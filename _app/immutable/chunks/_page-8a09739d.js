var _x=Object.defineProperty;var vx=(i,e,t)=>e in i?_x(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ml=(i,e,t)=>(vx(i,typeof e!="symbol"?e+"":e,t),t);import{I as En,J as Xf,K as uw,L as bx,S as vr,i as br,s as mr,C as xr,M as en,k as zt,l as Nt,m as Gt,h as Le,N as dr,b as qt,O as pr,D as Ar,E as kr,F as Sr,P as Tr,Q as So,f as xt,t as Ft,R as qo,T as or,U as zo,o as Ds,V as Po,W as S1,X as In,v as ou,w as ln,e as gn,x as pn,y as un,Y as ko,d as Fr,z as cn,Z as Zs,_ as ws,$ as nh,g as Rr,a0 as Zp,a1 as Kp,a2 as Ny,B as eo,a3 as wx,a as Yi,q as Xn,c as Zi,r as Yn,n as Ht,a4 as Ua,G as Dt,a5 as Ys,a6 as oa,H as As,p as ec,a7 as Ac,a8 as ed,u as Jo,a9 as xx,aa as ep,ab as To,ac as cw,ad as Lo,ae as Ud,af as Id,ag as Ih,ah as hw,A as Ax,ai as R0,aj as fw,ak as dw}from"./index-6dd75127.js";import{r as kx,w as Cc}from"./singletons-88d9bc00.js";import{_ as h1}from"./preload-helper-aa6bc0ce.js";import{p as Sx}from"./stores-b885f474.js";var I2=function(i,e){return I2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(t[l]=o[l])},I2(i,e)};function Nl(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");I2(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hs=function(){return hs=Object.assign||function(e){for(var t,o=1,l=arguments.length;o<l;o++){t=arguments[o];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},hs.apply(this,arguments)};function Eh(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],o=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ic=function(){function i(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(i,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.destroy=function(){},i}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Cx(i){return i===void 0&&(i=window),Ex(i)?{passive:!0}:!1}function Ex(i){i===void 0&&(i=window);var e=!1;try{var t={get passive(){return e=!0,!1}},o=function(){};i.document.addEventListener("test",o,t),i.document.removeEventListener("test",o,t)}catch{e=!1}return e}const pw=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:Cx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ix(i,e){if(i.closest)return i.closest(e);for(var t=i;t;){if(mw(t,e))return t;t=t.parentElement}return null}function mw(i,e){var t=i.matches||i.webkitMatchesSelector||i.msMatchesSelector;return t.call(i,e)}function Tx(i){var e=i;if(e.offsetParent!==null)return e.scrollWidth;var t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);var o=t.scrollWidth;return document.documentElement.removeChild(t),o}const C1=Object.freeze(Object.defineProperty({__proto__:null,closest:Ix,matches:mw,estimateScrollWidth:Tx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Lx={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Px={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},jy={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},Mp;function Mx(i,e){e===void 0&&(e=!1);var t=i.CSS,o=Mp;if(typeof Mp=="boolean"&&!e)return Mp;var l=t&&typeof t.supports=="function";if(!l)return!1;var u=t.supports("--css-vars","yes"),m=t.supports("(--css-vars: yes)")&&t.supports("color","#00000000");return o=u||m,e||(Mp=o),o}function Dx(i,e,t){if(!i)return{x:0,y:0};var o=e.x,l=e.y,u=o+t.left,m=l+t.top,r,f;if(i.type==="touchstart"){var _=i;r=_.changedTouches[0].pageX-u,f=_.changedTouches[0].pageY-m}else{var w=i;r=w.pageX-u,f=w.pageY-m}return{x:r,y:f}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Uy=["touchstart","pointerdown","mousedown","keydown"],Vy=["touchend","pointerup","mouseup","contextmenu"],Dp=[],Ox=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.activationAnimationHasEnded=!1,o.activationTimer=0,o.fgDeactivationRemovalTimer=0,o.fgScale="0",o.frame={width:0,height:0},o.initialSize=0,o.layoutFrame=0,o.maxRadius=0,o.unboundedCoords={left:0,top:0},o.activationState=o.defaultActivationState(),o.activationTimerCallback=function(){o.activationAnimationHasEnded=!0,o.runDeactivationUXLogicIfReady()},o.activateHandler=function(l){o.activateImpl(l)},o.deactivateHandler=function(){o.deactivateImpl()},o.focusHandler=function(){o.handleFocus()},o.blurHandler=function(){o.handleBlur()},o.resizeHandler=function(){o.layout()},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Lx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Px},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return jy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this,o=this.supportsPressRipple();if(this.registerRootHandlers(o),o){var l=e.cssClasses,u=l.ROOT,m=l.UNBOUNDED;requestAnimationFrame(function(){t.adapter.addClass(u),t.adapter.isUnbounded()&&(t.adapter.addClass(m),t.layoutInternal())})}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var o=e.cssClasses,l=o.ROOT,u=o.UNBOUNDED;requestAnimationFrame(function(){t.adapter.removeClass(l),t.adapter.removeClass(u),t.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(t){this.activateImpl(t)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var t=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){t.layoutInternal(),t.layoutFrame=0})},e.prototype.setUnbounded=function(t){var o=e.cssClasses.UNBOUNDED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame(function(){return t.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame(function(){return t.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(t){var o,l;if(t){try{for(var u=Eh(Uy),m=u.next();!m.done;m=u.next()){var r=m.value;this.adapter.registerInteractionHandler(r,this.activateHandler)}}catch(f){o={error:f}}finally{try{m&&!m.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(t){var o,l;if(t.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var u=Eh(Vy),m=u.next();!m.done;m=u.next()){var r=m.value;this.adapter.registerDocumentInteractionHandler(r,this.deactivateHandler)}}catch(f){o={error:f}}finally{try{m&&!m.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}},e.prototype.deregisterRootHandlers=function(){var t,o;try{for(var l=Eh(Uy),u=l.next();!u.done;u=l.next()){var m=u.value;this.adapter.deregisterInteractionHandler(m,this.activateHandler)}}catch(r){t={error:r}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var t,o;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var l=Eh(Vy),u=l.next();!u.done;u=l.next()){var m=u.value;this.adapter.deregisterDocumentInteractionHandler(m,this.deactivateHandler)}}catch(r){t={error:r}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}},e.prototype.removeCssVars=function(){var t=this,o=e.strings,l=Object.keys(o);l.forEach(function(u){u.indexOf("VAR_")===0&&t.adapter.updateCssVariable(o[u],null)})},e.prototype.activateImpl=function(t){var o=this;if(!this.adapter.isSurfaceDisabled()){var l=this.activationState;if(!l.isActivated){var u=this.previousActivationEvent,m=u&&t!==void 0&&u.type!==t.type;if(!m){l.isActivated=!0,l.isProgrammatic=t===void 0,l.activationEvent=t,l.wasActivatedByPointer=l.isProgrammatic?!1:t!==void 0&&(t.type==="mousedown"||t.type==="touchstart"||t.type==="pointerdown");var r=t!==void 0&&Dp.length>0&&Dp.some(function(f){return o.adapter.containsEventTarget(f)});if(r){this.resetActivationState();return}t!==void 0&&(Dp.push(t.target),this.registerDeactivationHandlers(t)),l.wasElementMadeActive=this.checkElementMadeActive(t),l.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Dp=[],!l.wasElementMadeActive&&t!==void 0&&(t.key===" "||t.keyCode===32)&&(l.wasElementMadeActive=o.checkElementMadeActive(t),l.wasElementMadeActive&&o.animateActivation()),l.wasElementMadeActive||(o.activationState=o.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(t){return t!==void 0&&t.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var t=this,o=e.strings,l=o.VAR_FG_TRANSLATE_START,u=o.VAR_FG_TRANSLATE_END,m=e.cssClasses,r=m.FG_DEACTIVATION,f=m.FG_ACTIVATION,_=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var w="",b="";if(!this.adapter.isUnbounded()){var x=this.getFgTranslationCoordinates(),v=x.startPoint,C=x.endPoint;w=v.x+"px, "+v.y+"px",b=C.x+"px, "+C.y+"px"}this.adapter.updateCssVariable(l,w),this.adapter.updateCssVariable(u,b),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(r),this.adapter.computeBoundingRect(),this.adapter.addClass(f),this.activationTimer=setTimeout(function(){t.activationTimerCallback()},_)},e.prototype.getFgTranslationCoordinates=function(){var t=this.activationState,o=t.activationEvent,l=t.wasActivatedByPointer,u;l?u=Dx(o,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):u={x:this.frame.width/2,y:this.frame.height/2},u={x:u.x-this.initialSize/2,y:u.y-this.initialSize/2};var m={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:u,endPoint:m}},e.prototype.runDeactivationUXLogicIfReady=function(){var t=this,o=e.cssClasses.FG_DEACTIVATION,l=this.activationState,u=l.hasDeactivationUXRun,m=l.isActivated,r=u||!m;r&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(o),this.fgDeactivationRemovalTimer=setTimeout(function(){t.adapter.removeClass(o)},jy.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(t),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var t=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return t.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var t=this,o=this.activationState;if(!!o.isActivated){var l=hs({},o);o.isProgrammatic?(requestAnimationFrame(function(){t.animateDeactivation(l)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){t.activationState.hasDeactivationUXRun=!0,t.animateDeactivation(l),t.resetActivationState()}))}},e.prototype.animateDeactivation=function(t){var o=t.wasActivatedByPointer,l=t.wasElementMadeActive;(o||l)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var t=this;this.frame=this.adapter.computeBoundingRect();var o=Math.max(this.frame.height,this.frame.width),l=function(){var m=Math.sqrt(Math.pow(t.frame.width,2)+Math.pow(t.frame.height,2));return m+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?o:l();var u=Math.floor(o*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&u%2!==0?this.initialSize=u-1:this.initialSize=u,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var t=e.strings,o=t.VAR_FG_SIZE,l=t.VAR_LEFT,u=t.VAR_TOP,m=t.VAR_FG_SCALE;this.adapter.updateCssVariable(o,this.initialSize+"px"),this.adapter.updateCssVariable(m,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(l,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(u,this.unboundedCoords.top+"px"))},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vf={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},Jp={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},Fx={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lg=function(i){Nl(e,i);function e(t){return i.call(this,hs(hs({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return Fx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Vf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Jp},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.handleTargetScroll=function(){},e.prototype.handleWindowResize=function(){},e.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Op=0,gw=function(i){Nl(e,i);function e(t){var o=i.call(this,t)||this;return o.wasDocked=!0,o.isDockedShowing=!0,o.currentAppBarOffsetTop=0,o.isCurrentlyBeingResized=!1,o.resizeThrottleId=Op,o.resizeDebounceId=Op,o.lastScrollPosition=o.adapter.getViewportScrollY(),o.topAppBarHeight=o.adapter.getTopAppBarHeight(),o}return e.prototype.destroy=function(){i.prototype.destroy.call(this),this.adapter.setStyle("top","")},e.prototype.handleTargetScroll=function(){var t=Math.max(this.adapter.getViewportScrollY(),0),o=t-this.lastScrollPosition;this.lastScrollPosition=t,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=o,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},e.prototype.handleWindowResize=function(){var t=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){t.resizeThrottleId=Op,t.throttledResizeHandler()},Jp.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){t.handleTargetScroll(),t.isCurrentlyBeingResized=!1,t.resizeDebounceId=Op},Jp.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},e.prototype.checkForUpdate=function(){var t=-this.topAppBarHeight,o=this.currentAppBarOffsetTop<0,l=this.currentAppBarOffsetTop>t,u=o&&l;if(u)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==l)return this.isDockedShowing=l,!0}else return this.wasDocked=!0,!0;return u},e.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var t=this.currentAppBarOffsetTop;Math.abs(t)>=this.topAppBarHeight&&(t=-Jp.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",t+"px")}},e.prototype.throttledResizeHandler=function(){var t=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==t&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-t,this.topAppBarHeight=t),this.handleTargetScroll()},e}(lg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Rx=function(i){Nl(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.wasScrolled=!1,t}return e.prototype.handleTargetScroll=function(){var t=this.adapter.getViewportScrollY();t<=0?this.wasScrolled&&(this.adapter.removeClass(Vf.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(Vf.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},e}(gw);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bx=function(i){Nl(e,i);function e(t){var o=i.call(this,t)||this;return o.collapsed=!1,o.isAlwaysCollapsed=!1,o}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),e.prototype.init=function(){i.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Vf.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Vf.SHORT_COLLAPSED_CLASS))},e.prototype.setAlwaysCollapsed=function(t){this.isAlwaysCollapsed=!!t,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},e.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},e.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},e.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var t=this.adapter.getViewportScrollY();t<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},e.prototype.uncollapse=function(){this.adapter.removeClass(Vf.SHORT_COLLAPSED_CLASS),this.collapsed=!1},e.prototype.collapse=function(){this.adapter.addClass(Vf.SHORT_COLLAPSED_CLASS),this.collapsed=!0},e}(lg);function _r(i){return Object.entries(i).filter(([e,t])=>e!==""&&t).map(([e])=>e).join(" ")}function cs(i,e,t,o={bubbles:!0},l=!1){if(typeof Event<"u"&&i){const u=new CustomEvent(e,Object.assign(Object.assign({},o),{detail:t}));if(i==null||i.dispatchEvent(u),l&&e.startsWith("SMUI")){const m=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},o),{detail:t}));i==null||i.dispatchEvent(m),m.defaultPrevented&&u.preventDefault()}return u}}function cf(i,e){let t=Object.getOwnPropertyNames(i);const o={};for(let l=0;l<t.length;l++){const u=t[l],m=u.indexOf("$");m!==-1&&e.indexOf(u.substring(0,m+1))!==-1||e.indexOf(u)===-1&&(o[u]=i[u])}return o}const qy=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,zx=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function No(i){let e,t=[];i.$on=(l,u)=>{let m=l,r=()=>{};return e?r=e(m,u):t.push([m,u]),m.match(qy)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',m),()=>{r()}};function o(l){Xf(i,l)}return l=>{const u=[],m={};e=(r,f)=>{let _=r,w=f,b=!1;const x=_.match(qy),v=_.match(zx),C=x||v;if(_.match(/^SMUI:\w+:/)){const M=_.split(":");let O="";for(let V=0;V<M.length;V++)O+=V===M.length-1?":"+M[V]:M[V].split("-").map(G=>G.slice(0,1).toUpperCase()+G.slice(1)).join("");console.warn(`The event ${_.split("$")[0]} has been renamed to ${O.split("$")[0]}.`),_=O}if(C){const M=_.split(x?":":"$");_=M[0];const O=Object.fromEntries(M.slice(1).map(V=>[V,!0]));O.passive&&(b=b||{},b.passive=!0),O.nonpassive&&(b=b||{},b.passive=!1),O.capture&&(b=b||{},b.capture=!0),O.once&&(b=b||{},b.once=!0),O.preventDefault&&(w=uw(w)),O.stopPropagation&&(w=bx(w))}const T=En(l,_,w,b),S=()=>{T();const M=u.indexOf(S);M>-1&&u.splice(M,1)};return u.push(S),_ in m||(m[_]=En(l,_,o)),S};for(let r=0;r<t.length;r++)e(t[r][0],t[r][1]);return{destroy:()=>{for(let r=0;r<u.length;r++)u[r]();for(let r of Object.entries(m))r[1]()}}}}function fo(i,e){let t=Object.getOwnPropertyNames(i);const o={};for(let l=0;l<t.length;l++){const u=t[l];u.substring(0,e.length)===e&&(o[u.substring(e.length)]=i[u])}return o}function Wo(i,e){let t=[];if(e)for(let o=0;o<e.length;o++){const l=e[o],u=Array.isArray(l)?l[0]:l;Array.isArray(l)&&l.length>1?t.push(u(i,l[1])):t.push(u(i))}return{update(o){if((o&&o.length||0)!=t.length)throw new Error("You must not change the length of an actions array.");if(o)for(let l=0;l<o.length;l++){const u=t[l];if(u&&u.update){const m=o[l];Array.isArray(m)&&m.length>1?u.update(m[1]):u.update()}}},destroy(){for(let o=0;o<t.length;o++){const l=t[o];l&&l.destroy&&l.destroy()}}}}const{window:Hy}=S1;function Nx(i){let e,t,o,l,u,m,r;const f=i[22].default,_=xr(f,i,i[21],null);let w=[{class:t=_r({[i[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":i[4]==="short","mdc-top-app-bar--short-collapsed":i[0],"mdc-top-app-bar--fixed":i[4]==="fixed","smui-top-app-bar--static":i[4]==="static","smui-top-app-bar--color-secondary":i[5]==="secondary","mdc-top-app-bar--prominent":i[6],"mdc-top-app-bar--dense":i[7],...i[11]})},{style:o=Object.entries(i[12]).map(Gy).concat([i[3]]).join(" ")},i[15]],b={};for(let x=0;x<w.length;x+=1)b=en(b,w[x]);return{c(){e=zt("header"),_&&_.c(),this.h()},l(x){e=Nt(x,"HEADER",{class:!0,style:!0});var v=Gt(e);_&&_.l(v),v.forEach(Le),this.h()},h(){dr(e,b)},m(x,v){qt(x,e,v),_&&_.m(e,null),i[25](e),u=!0,m||(r=[En(Hy,"resize",i[23]),En(Hy,"scroll",i[24]),pr(l=Wo.call(null,e,i[1])),pr(i[13].call(null,e)),En(e,"SMUITopAppBarIconButton:nav",i[26])],m=!0)},p(x,v){_&&_.p&&(!u||v[0]&2097152)&&Ar(_,f,x,x[21],u?Sr(f,x[21],v,null):kr(x[21]),null),dr(e,b=Tr(w,[(!u||v[0]&2293&&t!==(t=_r({[x[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":x[4]==="short","mdc-top-app-bar--short-collapsed":x[0],"mdc-top-app-bar--fixed":x[4]==="fixed","smui-top-app-bar--static":x[4]==="static","smui-top-app-bar--color-secondary":x[5]==="secondary","mdc-top-app-bar--prominent":x[6],"mdc-top-app-bar--dense":x[7],...x[11]})))&&{class:t},(!u||v[0]&4104&&o!==(o=Object.entries(x[12]).map(Gy).concat([x[3]]).join(" ")))&&{style:o},v[0]&32768&&x[15]])),l&&So(l.update)&&v[0]&2&&l.update.call(null,x[1])},i(x){u||(xt(_,x),u=!0)},o(x){Ft(_,x),u=!1},d(x){x&&Le(e),_&&_.d(x),i[25](null),m=!1,qo(r)}}}const Gy=([i,e])=>`${i}: ${e};`;function jx(i,e,t){const o=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let f=()=>{};function _(he){return he===f}let{use:w=[]}=e,{class:b=""}=e,{style:x=""}=e,{variant:v="standard"}=e,{color:C="primary"}=e,{collapsed:T=f}=e;const S=!_(T)&&!!T;_(T)&&(T=!1);let{prominent:M=!1}=e,{dense:O=!1}=e,{scrollTarget:V=void 0}=e,G,Z,te={},J={},oe,Me=kx({variant:v,prominent:M,dense:O},he=>{t(18,oe=he)}),Fe,pe=v;Ds(()=>(t(9,Z=Ie()),Z.init(),()=>{Z.destroy()}));function Ie(){const he={static:lg,short:Bx,fixed:Rx}[v]||gw;return new he({hasClass:Se,addClass:me,removeClass:et,setStyle:nt,getTopAppBarHeight:()=>G.clientHeight,notifyNavigationIconClicked:()=>cs(G,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>V==null?window.pageYOffset:V.scrollTop,getTotalActionItems:()=>G.querySelectorAll(".mdc-top-app-bar__action-item").length})}function Se(he){return he in te?te[he]:we().classList.contains(he)}function me(he){te[he]||t(11,te[he]=!0,te)}function et(he){(!(he in te)||te[he])&&t(11,te[he]=!1,te)}function nt(he,ge){J[he]!=ge&&(ge===""||ge==null?(delete J[he],t(12,J),t(20,pe),t(4,v),t(9,Z)):t(12,J[he]=ge,J))}function Et(){Z&&(Z.handleTargetScroll(),v==="short"&&t(0,T="isCollapsed"in Z&&Z.isCollapsed))}function it(){return Me}function we(){return G}const ke=()=>v!=="short"&&v!=="fixed"&&Z&&Z.handleWindowResize(),Oe=()=>V==null&&Et();function le(he){In[he?"unshift":"push"](()=>{G=he,t(10,G)})}const Ce=()=>Z&&Z.handleNavigationClick();return i.$$set=he=>{e=en(en({},e),Po(he)),t(15,l=or(e,o)),"use"in he&&t(1,w=he.use),"class"in he&&t(2,b=he.class),"style"in he&&t(3,x=he.style),"variant"in he&&t(4,v=he.variant),"color"in he&&t(5,C=he.color),"collapsed"in he&&t(0,T=he.collapsed),"prominent"in he&&t(6,M=he.prominent),"dense"in he&&t(7,O=he.dense),"scrollTarget"in he&&t(8,V=he.scrollTarget),"$$scope"in he&&t(21,m=he.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&262352&&oe&&oe({variant:v,prominent:M,dense:O}),i.$$.dirty[0]&1049104&&pe!==v&&Z&&(t(20,pe=v),Z.destroy(),t(11,te={}),t(12,J={}),t(9,Z=Ie()),Z.init()),i.$$.dirty[0]&528&&Z&&v==="short"&&"setAlwaysCollapsed"in Z&&Z.setAlwaysCollapsed(S),i.$$.dirty[0]&524544&&Fe!==V&&(Fe&&Fe.removeEventListener("scroll",Et),V&&V.addEventListener("scroll",Et),t(19,Fe=V))},[T,w,b,x,v,C,M,O,V,Z,G,te,J,r,Et,l,it,we,oe,Fe,pe,m,u,ke,Oe,le,Ce]}class Ux extends vr{constructor(e){super(),br(this,e,jx,Nx,mr,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function Vx(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("div"),r&&r.c(),this.h()},l(w){e=Nt(w,"DIV",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function qx(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class yw extends vr{constructor(e){super(),br(this,e,qx,Vx,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Hx(i){let e;const t=i[10].default,o=xr(t,i,i[12],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4096)&&Ar(o,t,l,l[12],e?Sr(t,l[12],u,null):kr(l[12]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function Gx(i){let e,t,o;const l=[{use:[i[7],...i[0]]},{class:_r({[i[1]]:!0,[i[5]]:!0,...i[4]})},i[6],i[8]];var u=i[2];function m(r){let f={$$slots:{default:[Hx]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[11](e)),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,[f]){const _=f&499?Tr(l,[f&129&&{use:[r[7],...r[0]]},f&50&&{class:_r({[r[1]]:!0,[r[5]]:!0,...r[4]})},f&64&&ko(r[6]),f&256&&ko(r[8])]):{};if(f&4096&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[2])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[11](e),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[11](null),r&&Le(t),e&&cn(e,r)}}}const tf={component:yw,class:"",classMap:{},contexts:{},props:{}};function Wx(i,e,t){const o=["use","class","component","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e,{class:f=""}=e,_;const w=tf.class,b={},x=[],v=tf.contexts,C=tf.props;let{component:T=tf.component}=e;Object.entries(tf.classMap).forEach(([V,G])=>{const Z=Zs(G);Z&&"subscribe"in Z&&x.push(Z.subscribe(te=>{t(4,b[V]=te,b)}))});const S=No(zo());for(let V in v)v.hasOwnProperty(V)&&ws(V,v[V]);nh(()=>{for(const V of x)V()});function M(){return _.getElement()}function O(V){In[V?"unshift":"push"](()=>{_=V,t(3,_)})}return i.$$set=V=>{e=en(en({},e),Po(V)),t(8,l=or(e,o)),"use"in V&&t(0,r=V.use),"class"in V&&t(1,f=V.class),"component"in V&&t(2,T=V.component),"$$scope"in V&&t(12,m=V.$$scope)},[r,f,T,_,b,w,C,S,l,M,u,O,m]}class Xx extends vr{constructor(e){super(),br(this,e,Wx,Gx,mr,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const Wy=Object.assign({},tf);function Mu(i){return new Proxy(Xx,{construct:function(e,t){return Object.assign(tf,Wy,i),new e(...t)},get:function(e,t){return Object.assign(tf,Wy,i),e[t]}})}function Yx(i){let e,t,o,l,u;const m=i[7].default,r=xr(m,i,i[6],null);let f=[{href:i[1]},i[4]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("a"),r&&r.c(),this.h()},l(w){e=Nt(w,"A",{href:!0});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[8](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[3].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&64)&&Ar(r,m,w,w[6],o?Sr(m,w[6],b,null):kr(w[6]),null),dr(e,_=Tr(f,[(!o||b&2)&&{href:w[1]},b&16&&w[4]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[8](null),l=!1,qo(u)}}}function Zx(i,e,t){const o=["use","href","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e,{href:f="javascript:void(0);"}=e;const _=No(zo());let w;function b(){return w}function x(v){In[v?"unshift":"push"](()=>{w=v,t(2,w)})}return i.$$set=v=>{e=en(en({},e),Po(v)),t(4,l=or(e,o)),"use"in v&&t(0,r=v.use),"href"in v&&t(1,f=v.href),"$$scope"in v&&t(6,m=v.$$scope)},[r,f,w,_,l,b,m,u,x]}class Kx extends vr{constructor(e){super(),br(this,e,Zx,Yx,mr,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function Jx(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("button"),r&&r.c(),this.h()},l(w){e=Nt(w,"BUTTON",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),e.autofocus&&e.focus(),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function Qx(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class $x extends vr{constructor(e){super(),br(this,e,Qx,Jx,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function e6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("h3"),r&&r.c(),this.h()},l(w){e=Nt(w,"H3",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function t6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class i6 extends vr{constructor(e){super(),br(this,e,t6,e6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function n6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("i"),r&&r.c(),this.h()},l(w){e=Nt(w,"I",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function r6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class o6 extends vr{constructor(e){super(),br(this,e,r6,n6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function s6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("li"),r&&r.c(),this.h()},l(w){e=Nt(w,"LI",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function a6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class l6 extends vr{constructor(e){super(),br(this,e,a6,s6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function u6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("main"),r&&r.c(),this.h()},l(w){e=Nt(w,"MAIN",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function c6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class h6 extends vr{constructor(e){super(),br(this,e,c6,u6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function f6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("nav"),r&&r.c(),this.h()},l(w){e=Nt(w,"NAV",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function d6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class p6 extends vr{constructor(e){super(),br(this,e,d6,f6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function m6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("span"),r&&r.c(),this.h()},l(w){e=Nt(w,"SPAN",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function g6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class _w extends vr{constructor(e){super(),br(this,e,g6,m6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function y6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=Zp("svg"),r&&r.c(),this.h()},l(w){e=Kp(w,"svg",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){Ny(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),Ny(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function _6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class Xy extends vr{constructor(e){super(),br(this,e,_6,y6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function v6(i){let e,t,o,l,u;const m=i[6].default,r=xr(m,i,i[5],null);let f=[i[3]],_={};for(let w=0;w<f.length;w+=1)_=en(_,f[w]);return{c(){e=zt("ul"),r&&r.c(),this.h()},l(w){e=Nt(w,"UL",{});var b=Gt(e);r&&r.l(b),b.forEach(Le),this.h()},h(){dr(e,_)},m(w,b){qt(w,e,b),r&&r.m(e,null),i[7](e),o=!0,l||(u=[pr(t=Wo.call(null,e,i[0])),pr(i[2].call(null,e))],l=!0)},p(w,[b]){r&&r.p&&(!o||b&32)&&Ar(r,m,w,w[5],o?Sr(m,w[5],b,null):kr(w[5]),null),dr(e,_=Tr(f,[b&8&&w[3]])),t&&So(t.update)&&b&1&&t.update.call(null,w[0])},i(w){o||(xt(r,w),o=!0)},o(w){Ft(r,w),o=!1},d(w){w&&Le(e),r&&r.d(w),i[7](null),l=!1,qo(u)}}}function b6(i,e,t){const o=["use","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=No(zo());let _;function w(){return _}function b(x){In[x?"unshift":"push"](()=>{_=x,t(1,_)})}return i.$$set=x=>{e=en(en({},e),Po(x)),t(3,l=or(e,o)),"use"in x&&t(0,r=x.use),"$$scope"in x&&t(5,m=x.$$scope)},[r,_,f,l,w,m,u,b]}class w6 extends vr{constructor(e){super(),br(this,e,b6,v6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const vw=Kx,x6=$x,E1=yw,A6=i6,k6=l6,S6=h6,C6=p6,pf=_w,E6=w6,I6=Mu({class:"mdc-top-app-bar__row",component:E1});function T6(i){let e,t,o,l,u,m;const r=i[9].default,f=xr(r,i,i[8],null);let _=[{class:t=_r({[i[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":i[2]==="start","mdc-top-app-bar__section--align-end":i[2]==="end"})},i[3]?{role:"toolbar"}:{},i[6]],w={};for(let b=0;b<_.length;b+=1)w=en(w,_[b]);return{c(){e=zt("section"),f&&f.c(),this.h()},l(b){e=Nt(b,"SECTION",{class:!0});var x=Gt(e);f&&f.l(x),x.forEach(Le),this.h()},h(){dr(e,w)},m(b,x){qt(b,e,x),f&&f.m(e,null),i[10](e),l=!0,u||(m=[pr(o=Wo.call(null,e,i[0])),pr(i[5].call(null,e))],u=!0)},p(b,[x]){f&&f.p&&(!l||x&256)&&Ar(f,r,b,b[8],l?Sr(r,b[8],x,null):kr(b[8]),null),dr(e,w=Tr(_,[(!l||x&6&&t!==(t=_r({[b[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":b[2]==="start","mdc-top-app-bar__section--align-end":b[2]==="end"})))&&{class:t},x&8&&(b[3]?{role:"toolbar"}:{}),x&64&&b[6]])),o&&So(o.update)&&x&1&&o.update.call(null,b[0])},i(b){l||(xt(f,b),l=!0)},o(b){Ft(f,b),l=!1},d(b){b&&Le(e),f&&f.d(b),i[10](null),u=!1,qo(m)}}}function L6(i,e,t){const o=["use","class","align","toolbar","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let{use:f=[]}=e,{class:_=""}=e,{align:w="start"}=e,{toolbar:b=!1}=e,x;ws("SMUI:icon-button:context",b?"top-app-bar:action":"top-app-bar:navigation"),ws("SMUI:button:context",b?"top-app-bar:action":"top-app-bar:navigation");function v(){return x}function C(T){In[T?"unshift":"push"](()=>{x=T,t(4,x)})}return i.$$set=T=>{e=en(en({},e),Po(T)),t(6,l=or(e,o)),"use"in T&&t(0,f=T.use),"class"in T&&t(1,_=T.class),"align"in T&&t(2,w=T.align),"toolbar"in T&&t(3,b=T.toolbar),"$$scope"in T&&t(8,m=T.$$scope)},[f,_,w,b,x,r,l,v,m,u,C]}class P6 extends vr{constructor(e){super(),br(this,e,L6,T6,mr,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}const M6=Mu({class:"mdc-top-app-bar__title",component:pf});function D6(i){let e;const t=i[11].default,o=xr(t,i,i[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&8192)&&Ar(o,t,l,l[13],e?Sr(t,l[13],u,null):kr(l[13]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function O6(i){let e,t,o;const l=[{use:[i[6],...i[0]]},{class:_r({[i[1]]:!0,[i[5]]:!0})},i[7]];var u=i[2];function m(r){let f={$$slots:{default:[D6]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[12](e)),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,[f]){const _=f&227?Tr(l,[f&65&&{use:[r[6],...r[0]]},f&34&&{class:_r({[r[1]]:!0,[r[5]]:!0})},f&128&&ko(r[7])]):{};if(f&8192&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[2])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[12](e),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[12](null),r&&Le(t),e&&cn(e,r)}}}function F6(i,e,t){let o,l;const u=["use","class","topAppBar","component","getElement"];let m=or(e,u),r,f=eo,_=()=>(f(),f=wx(o,G=>t(10,r=G)),o);i.$$.on_destroy.push(()=>f());let{$$slots:w={},$$scope:b}=e;const x=No(zo());let{use:v=[]}=e,{class:C=""}=e,{topAppBar:T}=e,S,{component:M=S6}=e;function O(){return S.getElement()}function V(G){In[G?"unshift":"push"](()=>{S=G,t(4,S)})}return i.$$set=G=>{e=en(en({},e),Po(G)),t(7,m=or(e,u)),"use"in G&&t(0,v=G.use),"class"in G&&t(1,C=G.class),"topAppBar"in G&&t(8,T=G.topAppBar),"component"in G&&t(2,M=G.component),"$$scope"in G&&t(13,b=G.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&_(t(3,o=T&&T.getPropStore())),i.$$.dirty&1032&&t(5,l=(()=>!o||r.variant==="static"?"":r.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":r.prominent&&r.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":r.prominent?"mdc-top-app-bar--prominent-fixed-adjust":r.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[v,C,M,o,S,l,x,m,T,O,r,w,V,b]}class R6 extends vr{constructor(e){super(),br(this,e,F6,O6,mr,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const Yy=P6,B6=R6,fr={title:"WASAC Rural Water Network",url:"https://wasac.rw",logo:"https://raw.githubusercontent.com/wasac/logo/main/logo.png",basePath:"",attribution:"\xA9<a href='http://wasac.rw'>WASAC,Ltd.</a>",styles:[{title:"OSM",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style.json"},{title:"OSM (Open Building)",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-buildings.json"},{title:"Bing Aerial",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-aerial.json"}],center:[30.0291,-2.0032],zoom:9,search:{url:"https://wasac.github.io/vt/wss.geojson",target:["wss_name","district","po_name"],format:i=>{const e=[];return["wss_id","wss_name","po_name","district"].forEach(o=>{i[o]&&e.push(i[o])}),e.length>0?e.join(", "):""},place_type:["wss"],placeholder:"Search WSS/PO/District",zoom:13},popup:{target:["handpump","improvedspring","dugwell","solarpump","otherwaterpoint","household","publictap","waterkiosk","industrial","institution","other connection","chamber","reservoir","pumping-station","watersource","pipeline","wss","pg-building"]},legend:{targets:{village:"Village","village-annotation":"Village Label",cell:"Cell","cell-annotation":"Cell Label",sector:"Sector","sector-annotation":"Sector Label",district:"District","district-annotation":"District Label",wss:"WSS","wss-annotation":"WSS Label",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",watersource:"Water Source",reservoir:"Reservoir","pumping-station":"Pumping Station",chamber:"Chamber",household:"Household",publictap:"Public Tap",waterkiosk:"Water Kiosk",industrial:"Industrial",institution:"Institution","other connection":"Other connection",handpump:"Hand Pump",improvedspring:"Improved Spring",dugwell:"Dug well",solarpump:"Solar Pump",otherwaterpoint:"Other water point",parcels:"Parcels",parcels_annotation:"Parcels Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade"}},elevation:{url:"https://wasac.github.io/rw-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],routing:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}}},terrain:{source:"rwanda-dem",exaggeration:1},adminBoundary:{url:"https://wasac.github.io/rw-admin-boundary"}};function $o(i){return $o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(i)}var Bl=Uint8Array,zl=Uint16Array,Vd=Uint32Array,I1=new Bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T1=new Bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),T2=new Bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bw=function(i,e){for(var t=new zl(31),o=0;o<31;++o)t[o]=e+=1<<i[o-1];for(var l=new Vd(t[30]),o=1;o<30;++o)for(var u=t[o];u<t[o+1];++u)l[u]=u-t[o]<<5|o;return[t,l]},ww=bw(I1,2),xw=ww[0],L2=ww[1];xw[28]=258,L2[258]=28;var Aw=bw(T1,0),z6=Aw[0],Zy=Aw[1],P2=new zl(32768);for(var xs=0;xs<32768;++xs){var Yh=(xs&43690)>>>1|(xs&21845)<<1;Yh=(Yh&52428)>>>2|(Yh&13107)<<2,Yh=(Yh&61680)>>>4|(Yh&3855)<<4,P2[xs]=((Yh&65280)>>>8|(Yh&255)<<8)>>>1}var ih=function(i,e,t){for(var o=i.length,l=0,u=new zl(e);l<o;++l)++u[i[l]-1];var m=new zl(e);for(l=0;l<e;++l)m[l]=m[l-1]+u[l-1]<<1;var r;if(t){r=new zl(1<<e);var f=15-e;for(l=0;l<o;++l)if(i[l])for(var _=l<<4|i[l],w=e-i[l],b=m[i[l]-1]++<<w,x=b|(1<<w)-1;b<=x;++b)r[P2[b]>>>f]=_}else for(r=new zl(o),l=0;l<o;++l)r[l]=P2[m[i[l]-1]++]>>>15-i[l];return r},hf=new Bl(288);for(var xs=0;xs<144;++xs)hf[xs]=8;for(var xs=144;xs<256;++xs)hf[xs]=9;for(var xs=256;xs<280;++xs)hf[xs]=7;for(var xs=280;xs<288;++xs)hf[xs]=8;var qd=new Bl(32);for(var xs=0;xs<32;++xs)qd[xs]=5;var N6=ih(hf,9,0),j6=ih(hf,9,1),U6=ih(qd,5,0),V6=ih(qd,5,1),Sm=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},wc=function(i,e,t){var o=e/8>>0;return(i[o]|i[o+1]<<8)>>>(e&7)&t},Cm=function(i,e){var t=e/8>>0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>>(e&7)},ug=function(i){return(i/8>>0)+(i&7&&1)},kw=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var o=new(i instanceof zl?zl:i instanceof Vd?Vd:Bl)(t-e);return o.set(i.subarray(e,t)),o},q6=function(i,e,t){var o=i.length,l=!e||t,u=!t||t.i;t||(t={}),e||(e=new Bl(o*3));var m=function(Be){var We=e.length;if(Be>We){var st=new Bl(Math.max(We*2,Be));st.set(e),e=st}},r=t.f||0,f=t.p||0,_=t.b||0,w=t.l,b=t.d,x=t.m,v=t.n,C=o*8;do{if(!w){t.f=r=wc(i,f,1);var T=wc(i,f+1,3);if(f+=3,T)if(T==1)w=j6,b=V6,x=9,v=5;else if(T==2){var V=wc(i,f,31)+257,G=wc(i,f+10,15)+4,Z=V+wc(i,f+5,31)+1;f+=14;for(var te=new Bl(Z),J=new Bl(19),oe=0;oe<G;++oe)J[T2[oe]]=wc(i,f+oe*3,7);f+=G*3;var Me=Sm(J),Fe=(1<<Me)-1;if(!u&&f+Z*(Me+7)>C)break;for(var pe=ih(J,Me,1),oe=0;oe<Z;){var Ie=pe[wc(i,f,Fe)];f+=Ie&15;var S=Ie>>>4;if(S<16)te[oe++]=S;else{var Se=0,me=0;for(S==16?(me=3+wc(i,f,3),f+=2,Se=te[oe-1]):S==17?(me=3+wc(i,f,7),f+=3):S==18&&(me=11+wc(i,f,127),f+=7);me--;)te[oe++]=Se}}var et=te.subarray(0,V),nt=te.subarray(V);x=Sm(et),v=Sm(nt),w=ih(et,x,1),b=ih(nt,v,1)}else throw"invalid block type";else{var S=ug(f)+4,M=i[S-4]|i[S-3]<<8,O=S+M;if(O>o){if(u)throw"unexpected EOF";break}l&&m(_+M),e.set(i.subarray(S,O),_),t.b=_+=M,t.p=f=O*8;continue}if(f>C)throw"unexpected EOF"}l&&m(_+131072);for(var Et=(1<<x)-1,it=(1<<v)-1,we=x+v+18;u||f+we<C;){var Se=w[Cm(i,f)&Et],ke=Se>>>4;if(f+=Se&15,f>C)throw"unexpected EOF";if(!Se)throw"invalid length/literal";if(ke<256)e[_++]=ke;else if(ke==256){w=null;break}else{var Oe=ke-254;if(ke>264){var oe=ke-257,le=I1[oe];Oe=wc(i,f,(1<<le)-1)+xw[oe],f+=le}var Ce=b[Cm(i,f)&it],he=Ce>>>4;if(!Ce)throw"invalid distance";f+=Ce&15;var nt=z6[he];if(he>3){var le=T1[he];nt+=Cm(i,f)&(1<<le)-1,f+=le}if(f>C)throw"unexpected EOF";l&&m(_+131072);for(var ge=_+Oe;_<ge;_+=4)e[_]=e[_-nt],e[_+1]=e[_+1-nt],e[_+2]=e[_+2-nt],e[_+3]=e[_+3-nt];_=ge}}t.l=w,t.p=f,t.b=_,w&&(r=1,t.m=x,t.d=b,t.n=v)}while(!r);return _==e.length?e:kw(e,0,_)},wh=function(i,e,t){t<<=e&7;var o=e/8>>0;i[o]|=t,i[o+1]|=t>>>8},bd=function(i,e,t){t<<=e&7;var o=e/8>>0;i[o]|=t,i[o+1]|=t>>>8,i[o+2]|=t>>>16},Em=function(i,e){for(var t=[],o=0;o<i.length;++o)i[o]&&t.push({s:o,f:i[o]});var l=t.length,u=t.slice();if(!l)return[new Bl(0),0];if(l==1){var m=new Bl(t[0].s+1);return m[t[0].s]=1,[m,1]}t.sort(function(Z,te){return Z.f-te.f}),t.push({s:-1,f:25001});var r=t[0],f=t[1],_=0,w=1,b=2;for(t[0]={s:-1,f:r.f+f.f,l:r,r:f};w!=l-1;)r=t[t[_].f<t[b].f?_++:b++],f=t[_!=w&&t[_].f<t[b].f?_++:b++],t[w++]={s:-1,f:r.f+f.f,l:r,r:f};for(var x=u[0].s,o=1;o<l;++o)u[o].s>x&&(x=u[o].s);var v=new zl(x+1),C=M2(t[w-1],v,0);if(C>e){var o=0,T=0,S=C-e,M=1<<S;for(u.sort(function(te,J){return v[J.s]-v[te.s]||te.f-J.f});o<l;++o){var O=u[o].s;if(v[O]>e)T+=M-(1<<C-v[O]),v[O]=e;else break}for(T>>>=S;T>0;){var V=u[o].s;v[V]<e?T-=1<<e-v[V]++-1:++o}for(;o>=0&&T;--o){var G=u[o].s;v[G]==e&&(--v[G],++T)}C=e}return[new Bl(v),C]},M2=function(i,e,t){return i.s==-1?Math.max(M2(i.l,e,t+1),M2(i.r,e,t+1)):e[i.s]=t},Ky=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new zl(++e),o=0,l=i[0],u=1,m=function(f){t[o++]=f},r=1;r<=e;++r)if(i[r]==l&&r!=e)++u;else{if(!l&&u>2){for(;u>138;u-=138)m(32754);u>2&&(m(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(m(l),--u;u>6;u-=6)m(8304);u>2&&(m(u-3<<5|8208),u=0)}for(;u--;)m(l);u=1,l=i[r]}return[t.subarray(0,o),e]},wd=function(i,e){for(var t=0,o=0;o<e.length;++o)t+=i[o]*e[o];return t},Qp=function(i,e,t){var o=t.length,l=ug(e+2);i[l]=o&255,i[l+1]=o>>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var u=0;u<o;++u)i[l+u+4]=t[u];return(l+4+o)*8},Jy=function(i,e,t,o,l,u,m,r,f,_,w){wh(e,w++,t),++l[256];for(var b=Em(l,15),x=b[0],v=b[1],C=Em(u,15),T=C[0],S=C[1],M=Ky(x),O=M[0],V=M[1],G=Ky(T),Z=G[0],te=G[1],J=new zl(19),oe=0;oe<O.length;++oe)J[O[oe]&31]++;for(var oe=0;oe<Z.length;++oe)J[Z[oe]&31]++;for(var Me=Em(J,7),Fe=Me[0],pe=Me[1],Ie=19;Ie>4&&!Fe[T2[Ie-1]];--Ie);var Se=_+5<<3,me=wd(l,hf)+wd(u,qd)+m,et=wd(l,x)+wd(u,T)+m+14+3*Ie+wd(J,Fe)+(2*J[16]+3*J[17]+7*J[18]);if(Se<=me&&Se<=et)return Qp(e,w,i.subarray(f,f+_));var nt,Et,it,we;if(wh(e,w,1+(et<me)),w+=2,et<me){nt=ih(x,v,0),Et=x,it=ih(T,S,0),we=T;var ke=ih(Fe,pe,0);wh(e,w,V-257),wh(e,w+5,te-1),wh(e,w+10,Ie-4),w+=14;for(var oe=0;oe<Ie;++oe)wh(e,w+3*oe,Fe[T2[oe]]);w+=3*Ie;for(var Oe=[O,Z],le=0;le<2;++le)for(var Ce=Oe[le],oe=0;oe<Ce.length;++oe){var he=Ce[oe]&31;wh(e,w,ke[he]),w+=Fe[he],he>15&&(wh(e,w,Ce[oe]>>>5&127),w+=Ce[oe]>>>12)}}else nt=N6,Et=hf,it=U6,we=qd;for(var oe=0;oe<r;++oe)if(o[oe]>255){var he=o[oe]>>>18&31;bd(e,w,nt[he+257]),w+=Et[he+257],he>7&&(wh(e,w,o[oe]>>>23&31),w+=I1[he]);var ge=o[oe]&31;bd(e,w,it[ge]),w+=we[ge],ge>3&&(bd(e,w,o[oe]>>>5&8191),w+=T1[ge])}else bd(e,w,nt[o[oe]]),w+=Et[o[oe]];return bd(e,w,nt[256]),w+Et[256]},H6=new Vd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),G6=new Bl(0),W6=function(i,e,t,o,l,u){var m=i.length,r=new Bl(o+m+5*(1+Math.floor(m/7e3))+l),f=r.subarray(o,r.length-l),_=0;if(!e||m<8)for(var w=0;w<=m;w+=65535){var b=w+65535;b<m?_=Qp(f,_,i.subarray(w,b)):(f[w]=u,_=Qp(f,_,i.subarray(w,m)))}else{for(var x=H6[e-1],v=x>>>13,C=x&8191,T=(1<<t)-1,S=new zl(32768),M=new zl(T+1),O=Math.ceil(t/3),V=2*O,G=function(bt){return(i[bt]^i[bt+1]<<O^i[bt+2]<<V)&T},Z=new Vd(25e3),te=new zl(288),J=new zl(32),oe=0,Me=0,w=0,Fe=0,pe=0,Ie=0;w<m;++w){var Se=G(w),me=w&32767,et=M[Se];if(S[me]=et,M[Se]=me,pe<=w){var nt=m-w;if((oe>7e3||Fe>24576)&&nt>423){_=Jy(i,f,0,Z,te,J,Me,Fe,Ie,w-Ie,_),Fe=oe=Me=0,Ie=w;for(var Et=0;Et<286;++Et)te[Et]=0;for(var Et=0;Et<30;++Et)J[Et]=0}var it=2,we=0,ke=C,Oe=me-et&32767;if(nt>2&&Se==G(w-Oe))for(var le=Math.min(v,nt)-1,Ce=Math.min(32767,w),he=Math.min(258,nt);Oe<=Ce&&--ke&&me!=et;){if(i[w+it]==i[w+it-Oe]){for(var ge=0;ge<he&&i[w+ge]==i[w+ge-Oe];++ge);if(ge>it){if(it=ge,we=Oe,ge>le)break;for(var Be=Math.min(Oe,ge-2),We=0,Et=0;Et<Be;++Et){var st=w-Oe+Et+32768&32767,Xe=S[st],gt=st-Xe+32768&32767;gt>We&&(We=gt,et=st)}}}me=et,et=S[me],Oe+=me-et+32768&32767}if(we){Z[Fe++]=268435456|L2[it]<<18|Zy[we];var Pt=L2[it]&31,ri=Zy[we]&31;Me+=I1[Pt]+T1[ri],++te[257+Pt],++J[ri],pe=w+it,++oe}else Z[Fe++]=i[w],++te[i[w]]}}_=Jy(i,f,u,Z,te,J,Me,Fe,Ie,w-Ie,_),u||(_=Qp(f,_,G6))}return kw(r,0,o+ug(_)+l)},X6=function(){var i=1,e=0;return{p:function(t){for(var o=i,l=e,u=t.length,m=0;m!=u;){for(var r=Math.min(m+5552,u);m<r;++m)o+=t[m],l+=o;o%=65521,l%=65521}i=o,e=l},d:function(){return(i>>>8<<16|(e&255)<<8|e>>>8)+((i&255)<<23)*2}}},Y6=function(i,e,t,o,l){return W6(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,o,!l)},Z6=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},K6=function(i,e){var t=e.level,o=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=o<<6|(o?32-2*o:1)},J6=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function D2(i,e){e===void 0&&(e={});var t=X6();t.p(i);var o=Y6(i,e,2,4);return K6(o,e),Z6(o,o.length-4,t.d()),o}function Q6(i,e){return q6((J6(i),i.subarray(2,-4)),e)}var Vr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Im(){Vr.console&&typeof Vr.console.log=="function"&&Vr.console.log.apply(Vr.console,arguments)}var us={log:Im,warn:function(i){Vr.console&&(typeof Vr.console.warn=="function"?Vr.console.warn.apply(Vr.console,arguments):Im.call(null,arguments))},error:function(i){Vr.console&&(typeof Vr.console.error=="function"?Vr.console.error.apply(Vr.console,arguments):Im(i))}};function Tm(i,e,t){var o=new XMLHttpRequest;o.open("GET",i),o.responseType="blob",o.onload=function(){zf(o.response,e,t)},o.onerror=function(){us.error("could not download file")},o.send()}function Qy(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Fp(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var Md,O2,zf=Vr.saveAs||((typeof window>"u"?"undefined":$o(window))!=="object"||window!==Vr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var o=Vr.URL||Vr.webkitURL,l=document.createElement("a");e=e||i.name||"download",l.download=e,l.rel="noopener",typeof i=="string"?(l.href=i,l.origin!==location.origin?Qy(l.href)?Tm(i,e,t):Fp(l,l.target="_blank"):Fp(l)):(l.href=o.createObjectURL(i),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){Fp(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(Qy(i))Tm(i,e,t);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout(function(){Fp(o)})}else navigator.msSaveOrOpenBlob(function(l,u){return u===void 0?u={autoBom:!1}:$o(u)!=="object"&&(us.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(i,t),e)}:function(i,e,t,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof i=="string")return Tm(i,e,t);var l=i.type==="application/octet-stream",u=/constructor/i.test(Vr.HTMLElement)||Vr.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||l&&u)&&(typeof FileReader>"u"?"undefined":$o(FileReader))==="object"){var r=new FileReader;r.onloadend=function(){var w=r.result;w=m?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=w:location=w,o=null},r.readAsDataURL(i)}else{var f=Vr.URL||Vr.webkitURL,_=f.createObjectURL(i);o?o.location=_:location.href=_,o=null,setTimeout(function(){f.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Sw(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(r){return[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}}],o=0;o<t.length;o++){var l=t[o].re,u=t[o].process,m=l.exec(i);m&&(e=u(m),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var r=this.r.toString(16),f=this.g.toString(16),_=this.b.toString(16);return r.length==1&&(r="0"+r),f.length==1&&(f="0"+f),_.length==1&&(_="0"+_),"#"+r+f+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Lm(i,e){var t=i[0],o=i[1],l=i[2],u=i[3];t=gl(t,o,l,u,e[0],7,-680876936),u=gl(u,t,o,l,e[1],12,-389564586),l=gl(l,u,t,o,e[2],17,606105819),o=gl(o,l,u,t,e[3],22,-1044525330),t=gl(t,o,l,u,e[4],7,-176418897),u=gl(u,t,o,l,e[5],12,1200080426),l=gl(l,u,t,o,e[6],17,-1473231341),o=gl(o,l,u,t,e[7],22,-45705983),t=gl(t,o,l,u,e[8],7,1770035416),u=gl(u,t,o,l,e[9],12,-1958414417),l=gl(l,u,t,o,e[10],17,-42063),o=gl(o,l,u,t,e[11],22,-1990404162),t=gl(t,o,l,u,e[12],7,1804603682),u=gl(u,t,o,l,e[13],12,-40341101),l=gl(l,u,t,o,e[14],17,-1502002290),t=yl(t,o=gl(o,l,u,t,e[15],22,1236535329),l,u,e[1],5,-165796510),u=yl(u,t,o,l,e[6],9,-1069501632),l=yl(l,u,t,o,e[11],14,643717713),o=yl(o,l,u,t,e[0],20,-373897302),t=yl(t,o,l,u,e[5],5,-701558691),u=yl(u,t,o,l,e[10],9,38016083),l=yl(l,u,t,o,e[15],14,-660478335),o=yl(o,l,u,t,e[4],20,-405537848),t=yl(t,o,l,u,e[9],5,568446438),u=yl(u,t,o,l,e[14],9,-1019803690),l=yl(l,u,t,o,e[3],14,-187363961),o=yl(o,l,u,t,e[8],20,1163531501),t=yl(t,o,l,u,e[13],5,-1444681467),u=yl(u,t,o,l,e[2],9,-51403784),l=yl(l,u,t,o,e[7],14,1735328473),t=_l(t,o=yl(o,l,u,t,e[12],20,-1926607734),l,u,e[5],4,-378558),u=_l(u,t,o,l,e[8],11,-2022574463),l=_l(l,u,t,o,e[11],16,1839030562),o=_l(o,l,u,t,e[14],23,-35309556),t=_l(t,o,l,u,e[1],4,-1530992060),u=_l(u,t,o,l,e[4],11,1272893353),l=_l(l,u,t,o,e[7],16,-155497632),o=_l(o,l,u,t,e[10],23,-1094730640),t=_l(t,o,l,u,e[13],4,681279174),u=_l(u,t,o,l,e[0],11,-358537222),l=_l(l,u,t,o,e[3],16,-722521979),o=_l(o,l,u,t,e[6],23,76029189),t=_l(t,o,l,u,e[9],4,-640364487),u=_l(u,t,o,l,e[12],11,-421815835),l=_l(l,u,t,o,e[15],16,530742520),t=vl(t,o=_l(o,l,u,t,e[2],23,-995338651),l,u,e[0],6,-198630844),u=vl(u,t,o,l,e[7],10,1126891415),l=vl(l,u,t,o,e[14],15,-1416354905),o=vl(o,l,u,t,e[5],21,-57434055),t=vl(t,o,l,u,e[12],6,1700485571),u=vl(u,t,o,l,e[3],10,-1894986606),l=vl(l,u,t,o,e[10],15,-1051523),o=vl(o,l,u,t,e[1],21,-2054922799),t=vl(t,o,l,u,e[8],6,1873313359),u=vl(u,t,o,l,e[15],10,-30611744),l=vl(l,u,t,o,e[6],15,-1560198380),o=vl(o,l,u,t,e[13],21,1309151649),t=vl(t,o,l,u,e[4],6,-145523070),u=vl(u,t,o,l,e[11],10,-1120210379),l=vl(l,u,t,o,e[2],15,718787259),o=vl(o,l,u,t,e[9],21,-343485551),i[0]=rf(t,i[0]),i[1]=rf(o,i[1]),i[2]=rf(l,i[2]),i[3]=rf(u,i[3])}function L1(i,e,t,o,l,u){return e=rf(rf(e,i),rf(o,u)),rf(e<<l|e>>>32-l,t)}function gl(i,e,t,o,l,u,m){return L1(e&t|~e&o,i,e,l,u,m)}function yl(i,e,t,o,l,u,m){return L1(e&o|t&~o,i,e,l,u,m)}function _l(i,e,t,o,l,u,m){return L1(e^t^o,i,e,l,u,m)}function vl(i,e,t,o,l,u,m){return L1(t^(e|~o),i,e,l,u,m)}function Cw(i){var e,t=i.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)Lm(o,$6(i.substring(e-64,e)));i=i.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)l[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Lm(o,l),e=0;e<16;e++)l[e]=0;return l[14]=8*t,Lm(o,l),o}function $6(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}Md=Vr.atob.bind(Vr),O2=Vr.btoa.bind(Vr);var $y="0123456789abcdef".split("");function e8(i){for(var e="",t=0;t<4;t++)e+=$y[i>>8*t+4&15]+$y[i>>8*t&15];return e}function t8(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function F2(i){return Cw(i).map(t8).join("")}var i8=function(i){for(var e=0;e<i.length;e++)i[e]=e8(i[e]);return i.join("")}(Cw("hello"))!="5d41402abc4b2a76b9719d911017c592";function rf(i,e){if(i8){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function R2(i,e){var t,o,l,u;if(i!==t){for(var m=(l=i,u=1+(256/i.length>>0),new Array(u+1).join(l)),r=[],f=0;f<256;f++)r[f]=f;var _=0;for(f=0;f<256;f++){var w=r[f];_=(_+w+m.charCodeAt(f))%256,r[f]=r[_],r[_]=w}t=i,o=r}else r=o;var b=e.length,x=0,v=0,C="";for(f=0;f<b;f++)v=(v+(w=r[x=(x+1)%256]))%256,r[x]=r[v],r[v]=w,m=r[(r[x]+r[v])%256],C+=String.fromCharCode(e.charCodeAt(f)^m);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var e_={print:4,modify:8,copy:16,"annot-forms":32};function M0(i,e,t,o){this.v=1,this.r=2;var l=192;i.forEach(function(r){if(e_.perm!==void 0)throw new Error("Invalid permission: "+r);l+=e_[r]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var u=(e+this.padding).substr(0,32),m=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,m),this.P=-(1+(255^l)),this.encryptionKey=F2(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=R2(this.encryptionKey,this.padding)}function D0(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,o=0;o<t;o++){var l=i.charCodeAt(o);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=i[o]}return e}function t_(i){if($o(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,o,l){if(l=l||!1,typeof t!="string"||typeof o!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var u=Math.random().toString(35);return e[t][u]=[o,!!l],u},this.unsubscribe=function(t){for(var o in e)if(e[o][t])return delete e[o][t],Object.keys(e[o]).length===0&&delete e[o],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var o=Array.prototype.slice.call(arguments,1),l=[];for(var u in e[t]){var m=e[t][u];try{m[0].apply(i,o)}catch(r){Vr.console&&us.error("jsPDF PubSub Error",r.message,r)}m[1]&&l.push(u)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function f1(i){if(!(this instanceof f1))return new f1(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function Ew(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function jf(i,e,t,o,l){if(!(this instanceof jf))return new jf(i,e,t,o,l);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,Ew.call(this,o,l)}function B0(i,e,t,o,l){if(!(this instanceof B0))return new B0(i,e,t,o,l);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Ew.call(this,o,l)}function Ur(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],l=arguments[2],u=arguments[3],m=[],r=1,f=16,_="S",w=null;$o(i=i||{})==="object"&&(t=i.orientation,o=i.unit||o,l=i.format||l,u=i.compress||i.compressPdf||u,(w=i.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),r=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(f=i.floatPrecision),_=i.defaultPathOperation||"S"),m=i.filters||(u===!0?["FlateEncode"]:m),o=o||"mm",t=(""+(t||"P")).toLowerCase();var b=i.putOnlyUsedFonts||!1,x={},v={internal:{},__private__:{}};v.__private__.PubSub=t_;var C="1.3",T=v.__private__.getPdfVersion=function(){return C};v.__private__.setPdfVersion=function(se){C=se};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return S};var M=v.__private__.getPageFormat=function(se){return S[se]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},V=O.COMPAT;function G(){this.saveGraphicsState(),Ke(new rn(_t,0,0,-_t,0,ya()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),_="n",V=O.ADVANCED}function Z(){this.restoreGraphicsState(),_="S",V=O.COMPAT}var te=v.__private__.combineFontStyleAndFontWeight=function(se,Ue){if(se=="bold"&&Ue=="normal"||se=="bold"&&Ue==400||se=="normal"&&Ue=="italic"||se=="bold"&&Ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ue&&(se=Ue==400||Ue==="normal"?se==="italic"?"italic":"normal":Ue!=700&&Ue!=="bold"||se!=="normal"?(Ue==700?"bold":Ue)+""+se:"bold"),se};v.advancedAPI=function(se){var Ue=V===O.COMPAT;return Ue&&G.call(this),typeof se!="function"||(se(this),Ue&&Z.call(this)),this},v.compatAPI=function(se){var Ue=V===O.ADVANCED;return Ue&&Z.call(this),typeof se!="function"||(se(this),Ue&&G.call(this)),this},v.isAdvancedAPI=function(){return V===O.ADVANCED};var J,oe=function(se){if(V!==O.ADVANCED)throw new Error(se+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Me=v.roundToPrecision=v.__private__.roundToPrecision=function(se,Ue){var At=e||Ue;if(isNaN(se)||isNaN(At))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return se.toFixed(At).replace(/0+$/,"")};J=v.hpf=v.__private__.hpf=typeof f=="number"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Me(se,f)}:f==="smart"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Me(se,se>-1&&se<1?16:5)}:function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Me(se,16)};var Fe=v.f2=v.__private__.f2=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f2");return Me(se,2)},pe=v.__private__.f3=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f3");return Me(se,3)},Ie=v.scale=v.__private__.scale=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.scale");return V===O.COMPAT?se*_t:V===O.ADVANCED?se:void 0},Se=function(se){return V===O.COMPAT?ya()-se:V===O.ADVANCED?se:void 0},me=function(se){return Ie(Se(se))};v.__private__.setPrecision=v.setPrecision=function(se){typeof parseInt(se,10)=="number"&&(e=parseInt(se,10))};var et,nt="00000000000000000000000000000000",Et=v.__private__.getFileId=function(){return nt},it=v.__private__.setFileId=function(se){return nt=se!==void 0&&/^[a-fA-F0-9]{32}$/.test(se)?se.toUpperCase():nt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(U=new M0(w.userPermissions,w.userPassword,w.ownerPassword,nt)),nt};v.setFileId=function(se){return it(se),this},v.getFileId=function(){return Et()};var we=v.__private__.convertDateToPDFDate=function(se){var Ue=se.getTimezoneOffset(),At=Ue<0?"+":"-",Qt=Math.floor(Math.abs(Ue/60)),hi=Math.abs(Ue%60),qi=[At,he(Qt),"'",he(hi),"'"].join("");return["D:",se.getFullYear(),he(se.getMonth()+1),he(se.getDate()),he(se.getHours()),he(se.getMinutes()),he(se.getSeconds()),qi].join("")},ke=v.__private__.convertPDFDateToDate=function(se){var Ue=parseInt(se.substr(2,4),10),At=parseInt(se.substr(6,2),10)-1,Qt=parseInt(se.substr(8,2),10),hi=parseInt(se.substr(10,2),10),qi=parseInt(se.substr(12,2),10),an=parseInt(se.substr(14,2),10);return new Date(Ue,At,Qt,hi,qi,an,0)},Oe=v.__private__.setCreationDate=function(se){var Ue;if(se===void 0&&(se=new Date),se instanceof Date)Ue=we(se);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(se))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ue=se}return et=Ue},le=v.__private__.getCreationDate=function(se){var Ue=et;return se==="jsDate"&&(Ue=ke(et)),Ue};v.setCreationDate=function(se){return Oe(se),this},v.getCreationDate=function(se){return le(se)};var Ce,he=v.__private__.padd2=function(se){return("0"+parseInt(se)).slice(-2)},ge=v.__private__.padd2Hex=function(se){return("00"+(se=se.toString())).substr(se.length)},Be=0,We=[],st=[],Xe=0,gt=[],Pt=[],ri=!1,ut=st,bt=function(){Be=0,Xe=0,st=[],We=[],gt=[],ct=Te(),dt=Te()};v.__private__.setCustomOutputDestination=function(se){ri=!0,ut=se};var vt=function(se){ri||(ut=se)};v.__private__.resetCustomOutputDestination=function(){ri=!1,ut=st};var Ke=v.__private__.out=function(se){return se=se.toString(),Xe+=se.length+1,ut.push(se),ut},ei=v.__private__.write=function(se){return Ke(arguments.length===1?se.toString():Array.prototype.join.call(arguments," "))},li=v.__private__.getArrayBuffer=function(se){for(var Ue=se.length,At=new ArrayBuffer(Ue),Qt=new Uint8Array(At);Ue--;)Qt[Ue]=se.charCodeAt(Ue);return At},$t=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return $t};var Si=i.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(se){return Si=V===O.ADVANCED?se/_t:se,this};var Ti,Yt=v.__private__.getFontSize=v.getFontSize=function(){return V===O.COMPAT?Si:Si*_t},mi=i.R2L||!1;v.__private__.setR2L=v.setR2L=function(se){return mi=se,this},v.__private__.getR2L=v.getR2L=function(){return mi};var Wi,Ci=v.__private__.setZoomMode=function(se){var Ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(se))Ti=se;else if(isNaN(se)){if(Ue.indexOf(se)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+se+'" is not recognized.');Ti=se}else Ti=parseInt(se,10)};v.__private__.getZoomMode=function(){return Ti};var ti,Pe=v.__private__.setPageMode=function(se){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(se)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+se+'" is not recognized.');Wi=se};v.__private__.getPageMode=function(){return Wi};var Q=v.__private__.setLayoutMode=function(se){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(se)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+se+'" is not recognized.');ti=se};v.__private__.getLayoutMode=function(){return ti},v.__private__.setDisplayMode=v.setDisplayMode=function(se,Ue,At){return Ci(se),Q(Ue),Pe(At),this};var ae={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(se){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ae[se]},v.__private__.getDocumentProperties=function(){return ae},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(se){for(var Ue in ae)ae.hasOwnProperty(Ue)&&se[Ue]&&(ae[Ue]=se[Ue]);return this},v.__private__.setDocumentProperty=function(se,Ue){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ae[se]=Ue};var Qe,_t,Jt,di,wn,Ln={},hn={},Bi=[],Xi={},Hn={},Gn={},Zr={},zn=null,fn=0,yn=[],tn=new t_(v),wr=i.hotfixes||[],Wn={},lr={},Kr=[],rn=function se(Ue,At,Qt,hi,qi,an){if(!(this instanceof se))return new se(Ue,At,Qt,hi,qi,an);isNaN(Ue)&&(Ue=1),isNaN(At)&&(At=0),isNaN(Qt)&&(Qt=0),isNaN(hi)&&(hi=1),isNaN(qi)&&(qi=0),isNaN(an)&&(an=0),this._matrix=[Ue,At,Qt,hi,qi,an]};Object.defineProperty(rn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(rn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(rn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(rn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(rn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(rn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(rn.prototype,"a",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(rn.prototype,"b",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(rn.prototype,"c",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(rn.prototype,"d",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(rn.prototype,"e",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(rn.prototype,"f",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(rn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rn.prototype.join=function(se){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(se)},rn.prototype.multiply=function(se){var Ue=se.sx*this.sx+se.shy*this.shx,At=se.sx*this.shy+se.shy*this.sy,Qt=se.shx*this.sx+se.sy*this.shx,hi=se.shx*this.shy+se.sy*this.sy,qi=se.tx*this.sx+se.ty*this.shx+this.tx,an=se.tx*this.shy+se.ty*this.sy+this.ty;return new rn(Ue,At,Qt,hi,qi,an)},rn.prototype.decompose=function(){var se=this.sx,Ue=this.shy,At=this.shx,Qt=this.sy,hi=this.tx,qi=this.ty,an=Math.sqrt(se*se+Ue*Ue),Kn=(se/=an)*At+(Ue/=an)*Qt;At-=se*Kn,Qt-=Ue*Kn;var gr=Math.sqrt(At*At+Qt*Qt);return Kn/=gr,se*(Qt/=gr)<Ue*(At/=gr)&&(se=-se,Ue=-Ue,Kn=-Kn,an=-an),{scale:new rn(an,0,0,gr,0,0),translate:new rn(1,0,0,1,hi,qi),rotate:new rn(se,Ue,-Ue,se,0,0),skew:new rn(1,0,Kn,1,0,0)}},rn.prototype.toString=function(se){return this.join(" ")},rn.prototype.inversed=function(){var se=this.sx,Ue=this.shy,At=this.shx,Qt=this.sy,hi=this.tx,qi=this.ty,an=1/(se*Qt-Ue*At),Kn=Qt*an,gr=-Ue*an,Nr=-At*an,Wr=se*an;return new rn(Kn,gr,Nr,Wr,-Kn*hi-Nr*qi,-gr*hi-Wr*qi)},rn.prototype.applyToPoint=function(se){var Ue=se.x*this.sx+se.y*this.shx+this.tx,At=se.x*this.shy+se.y*this.sy+this.ty;return new Vl(Ue,At)},rn.prototype.applyToRectangle=function(se){var Ue=this.applyToPoint(se),At=this.applyToPoint(new Vl(se.x+se.w,se.y+se.h));return new mu(Ue.x,Ue.y,At.x-Ue.x,At.y-Ue.y)},rn.prototype.clone=function(){var se=this.sx,Ue=this.shy,At=this.shx,Qt=this.sy,hi=this.tx,qi=this.ty;return new rn(se,Ue,At,Qt,hi,qi)},v.Matrix=rn;var He=v.matrixMult=function(se,Ue){return Ue.multiply(se)},yo=new rn(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=yo;var _o=function(se,Ue){if(!Hn[se]){var At=(Ue instanceof jf?"Sh":"P")+(Object.keys(Xi).length+1).toString(10);Ue.id=At,Hn[se]=At,Xi[At]=Ue,tn.publish("addPattern",Ue)}};v.ShadingPattern=jf,v.TilingPattern=B0,v.addShadingPattern=function(se,Ue){return oe("addShadingPattern()"),_o(se,Ue),this},v.beginTilingPattern=function(se){oe("beginTilingPattern()"),Fn(se.boundingBox[0],se.boundingBox[1],se.boundingBox[2]-se.boundingBox[0],se.boundingBox[3]-se.boundingBox[1],se.matrix)},v.endTilingPattern=function(se,Ue){oe("endTilingPattern()"),Ue.stream=Pt[Ce].join(`
`),_o(se,Ue),tn.publish("endTilingPattern",Ue),Kr.pop().restore()};var co=v.__private__.newObject=function(){var se=Te();return Ee(se,!0),se},Te=v.__private__.newObjectDeferred=function(){return Be++,We[Be]=function(){return Xe},Be},Ee=function(se,Ue){return Ue=typeof Ue=="boolean"&&Ue,We[se]=Xe,Ue&&Ke(se+" 0 obj"),se},qe=v.__private__.newAdditionalObject=function(){var se={objId:Te(),content:""};return gt.push(se),se},ct=Te(),dt=Te(),jt=v.__private__.decodeColorString=function(se){var Ue=se.split(" ");if(Ue.length!==2||Ue[1]!=="g"&&Ue[1]!=="G")Ue.length===5&&(Ue[4]==="k"||Ue[4]==="K")&&(Ue=[(1-Ue[0])*(1-Ue[3]),(1-Ue[1])*(1-Ue[3]),(1-Ue[2])*(1-Ue[3]),"r"]);else{var At=parseFloat(Ue[0]);Ue=[At,At,At,"r"]}for(var Qt="#",hi=0;hi<3;hi++)Qt+=("0"+Math.floor(255*parseFloat(Ue[hi])).toString(16)).slice(-2);return Qt},Ge=v.__private__.encodeColorString=function(se){var Ue;typeof se=="string"&&(se={ch1:se});var At=se.ch1,Qt=se.ch2,hi=se.ch3,qi=se.ch4,an=se.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof At=="string"&&At.charAt(0)!=="#"){var Kn=new Sw(At);if(Kn.ok)At=Kn.toHex();else if(!/^\d*\.?\d*$/.test(At))throw new Error('Invalid color "'+At+'" passed to jsPDF.encodeColorString.')}if(typeof At=="string"&&/^#[0-9A-Fa-f]{3}$/.test(At)&&(At="#"+At[1]+At[1]+At[2]+At[2]+At[3]+At[3]),typeof At=="string"&&/^#[0-9A-Fa-f]{6}$/.test(At)){var gr=parseInt(At.substr(1),16);At=gr>>16&255,Qt=gr>>8&255,hi=255&gr}if(Qt===void 0||qi===void 0&&At===Qt&&Qt===hi)if(typeof At=="string")Ue=At+" "+an[0];else switch(se.precision){case 2:Ue=Fe(At/255)+" "+an[0];break;case 3:default:Ue=pe(At/255)+" "+an[0]}else if(qi===void 0||$o(qi)==="object"){if(qi&&!isNaN(qi.a)&&qi.a===0)return Ue=["1.","1.","1.",an[1]].join(" ");if(typeof At=="string")Ue=[At,Qt,hi,an[1]].join(" ");else switch(se.precision){case 2:Ue=[Fe(At/255),Fe(Qt/255),Fe(hi/255),an[1]].join(" ");break;default:case 3:Ue=[pe(At/255),pe(Qt/255),pe(hi/255),an[1]].join(" ")}}else if(typeof At=="string")Ue=[At,Qt,hi,qi,an[2]].join(" ");else switch(se.precision){case 2:Ue=[Fe(At),Fe(Qt),Fe(hi),Fe(qi),an[2]].join(" ");break;case 3:default:Ue=[pe(At),pe(Qt),pe(hi),pe(qi),an[2]].join(" ")}return Ue},Zt=v.__private__.getFilters=function(){return m},Rt=v.__private__.putStream=function(se){var Ue=(se=se||{}).data||"",At=se.filters||Zt(),Qt=se.alreadyAppliedFilters||[],hi=se.addLength1||!1,qi=Ue.length,an=se.objectId,Kn=function(Ss){return Ss};if(w!==null&&an===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Kn=U.encryptor(an,0));var gr={};At===!0&&(At=["FlateEncode"]);var Nr=se.additionalKeyValues||[],Wr=(gr=Ur.API.processDataByFilters!==void 0?Ur.API.processDataByFilters(Ue,At):{data:Ue,reverseChain:[]}).reverseChain+(Array.isArray(Qt)?Qt.join(" "):Qt.toString());if(gr.data.length!==0&&(Nr.push({key:"Length",value:gr.data.length}),hi===!0&&Nr.push({key:"Length1",value:qi})),Wr.length!=0)if(Wr.split("/").length-1==1)Nr.push({key:"Filter",value:Wr});else{Nr.push({key:"Filter",value:"["+Wr+"]"});for(var to=0;to<Nr.length;to+=1)if(Nr[to].key==="DecodeParms"){for(var Oo=[],jo=0;jo<gr.reverseChain.split("/").length-1;jo+=1)Oo.push("null");Oo.push(Nr[to].value),Nr[to].value="["+Oo.join(" ")+"]"}}Ke("<<");for(var Ho=0;Ho<Nr.length;Ho++)Ke("/"+Nr[Ho].key+" "+Nr[Ho].value);Ke(">>"),gr.data.length!==0&&(Ke("stream"),Ke(Kn(gr.data)),Ke("endstream"))},oi=v.__private__.putPage=function(se){var Ue=se.number,At=se.data,Qt=se.objId,hi=se.contentsObjId;Ee(Qt,!0),Ke("<</Type /Page"),Ke("/Parent "+se.rootDictionaryObjId+" 0 R"),Ke("/Resources "+se.resourceDictionaryObjId+" 0 R"),Ke("/MediaBox ["+parseFloat(J(se.mediaBox.bottomLeftX))+" "+parseFloat(J(se.mediaBox.bottomLeftY))+" "+J(se.mediaBox.topRightX)+" "+J(se.mediaBox.topRightY)+"]"),se.cropBox!==null&&Ke("/CropBox ["+J(se.cropBox.bottomLeftX)+" "+J(se.cropBox.bottomLeftY)+" "+J(se.cropBox.topRightX)+" "+J(se.cropBox.topRightY)+"]"),se.bleedBox!==null&&Ke("/BleedBox ["+J(se.bleedBox.bottomLeftX)+" "+J(se.bleedBox.bottomLeftY)+" "+J(se.bleedBox.topRightX)+" "+J(se.bleedBox.topRightY)+"]"),se.trimBox!==null&&Ke("/TrimBox ["+J(se.trimBox.bottomLeftX)+" "+J(se.trimBox.bottomLeftY)+" "+J(se.trimBox.topRightX)+" "+J(se.trimBox.topRightY)+"]"),se.artBox!==null&&Ke("/ArtBox ["+J(se.artBox.bottomLeftX)+" "+J(se.artBox.bottomLeftY)+" "+J(se.artBox.topRightX)+" "+J(se.artBox.topRightY)+"]"),typeof se.userUnit=="number"&&se.userUnit!==1&&Ke("/UserUnit "+se.userUnit),tn.publish("putPage",{objId:Qt,pageContext:yn[Ue],pageNumber:Ue,page:At}),Ke("/Contents "+hi+" 0 R"),Ke(">>"),Ke("endobj");var qi=At.join(`
`);return V===O.ADVANCED&&(qi+=`
Q`),Ee(hi,!0),Rt({data:qi,filters:Zt(),objectId:hi}),Ke("endobj"),Qt},yt=v.__private__.putPages=function(){var se,Ue,At=[];for(se=1;se<=fn;se++)yn[se].objId=Te(),yn[se].contentsObjId=Te();for(se=1;se<=fn;se++)At.push(oi({number:se,data:Pt[se],objId:yn[se].objId,contentsObjId:yn[se].contentsObjId,mediaBox:yn[se].mediaBox,cropBox:yn[se].cropBox,bleedBox:yn[se].bleedBox,trimBox:yn[se].trimBox,artBox:yn[se].artBox,userUnit:yn[se].userUnit,rootDictionaryObjId:ct,resourceDictionaryObjId:dt}));Ee(ct,!0),Ke("<</Type /Pages");var Qt="/Kids [";for(Ue=0;Ue<fn;Ue++)Qt+=At[Ue]+" 0 R ";Ke(Qt+"]"),Ke("/Count "+fn),Ke(">>"),Ke("endobj"),tn.publish("postPutPages")},Ri=function(se){tn.publish("putFont",{font:se,out:Ke,newObject:co,putStream:Rt}),se.isAlreadyPutted!==!0&&(se.objectNumber=co(),Ke("<<"),Ke("/Type /Font"),Ke("/BaseFont /"+D0(se.postScriptName)),Ke("/Subtype /Type1"),typeof se.encoding=="string"&&Ke("/Encoding /"+se.encoding),Ke("/FirstChar 32"),Ke("/LastChar 255"),Ke(">>"),Ke("endobj"))},Ii=function(){for(var se in Ln)Ln.hasOwnProperty(se)&&(b===!1||b===!0&&x.hasOwnProperty(se))&&Ri(Ln[se])},Sn=function(se){se.objectNumber=co();var Ue=[];Ue.push({key:"Type",value:"/XObject"}),Ue.push({key:"Subtype",value:"/Form"}),Ue.push({key:"BBox",value:"["+[J(se.x),J(se.y),J(se.x+se.width),J(se.y+se.height)].join(" ")+"]"}),Ue.push({key:"Matrix",value:"["+se.matrix.toString()+"]"});var At=se.pages[1].join(`
`);Rt({data:At,additionalKeyValues:Ue,objectId:se.objectNumber}),Ke("endobj")},An=function(){for(var se in Wn)Wn.hasOwnProperty(se)&&Sn(Wn[se])},wt=function(se,Ue){var At,Qt=[],hi=1/(Ue-1);for(At=0;At<1;At+=hi)Qt.push(At);if(Qt.push(1),se[0].offset!=0){var qi={offset:0,color:se[0].color};se.unshift(qi)}if(se[se.length-1].offset!=1){var an={offset:1,color:se[se.length-1].color};se.push(an)}for(var Kn="",gr=0,Nr=0;Nr<Qt.length;Nr++){for(At=Qt[Nr];At>se[gr+1].offset;)gr++;var Wr=se[gr].offset,to=(At-Wr)/(se[gr+1].offset-Wr),Oo=se[gr].color,jo=se[gr+1].color;Kn+=ge(Math.round((1-to)*Oo[0]+to*jo[0]).toString(16))+ge(Math.round((1-to)*Oo[1]+to*jo[1]).toString(16))+ge(Math.round((1-to)*Oo[2]+to*jo[2]).toString(16))}return Kn.trim()},Tn=function(se,Ue){Ue||(Ue=21);var At=co(),Qt=wt(se.colors,Ue),hi=[];hi.push({key:"FunctionType",value:"0"}),hi.push({key:"Domain",value:"[0.0 1.0]"}),hi.push({key:"Size",value:"["+Ue+"]"}),hi.push({key:"BitsPerSample",value:"8"}),hi.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hi.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rt({data:Qt,additionalKeyValues:hi,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:At}),Ke("endobj"),se.objectNumber=co(),Ke("<< /ShadingType "+se.type),Ke("/ColorSpace /DeviceRGB");var qi="/Coords ["+J(parseFloat(se.coords[0]))+" "+J(parseFloat(se.coords[1]))+" ";se.type===2?qi+=J(parseFloat(se.coords[2]))+" "+J(parseFloat(se.coords[3])):qi+=J(parseFloat(se.coords[2]))+" "+J(parseFloat(se.coords[3]))+" "+J(parseFloat(se.coords[4]))+" "+J(parseFloat(se.coords[5])),Ke(qi+="]"),se.matrix&&Ke("/Matrix ["+se.matrix.toString()+"]"),Ke("/Function "+At+" 0 R"),Ke("/Extend [true true]"),Ke(">>"),Ke("endobj")},Jn=function(se,Ue){var At=Te(),Qt=co();Ue.push({resourcesOid:At,objectOid:Qt}),se.objectNumber=Qt;var hi=[];hi.push({key:"Type",value:"/Pattern"}),hi.push({key:"PatternType",value:"1"}),hi.push({key:"PaintType",value:"1"}),hi.push({key:"TilingType",value:"1"}),hi.push({key:"BBox",value:"["+se.boundingBox.map(J).join(" ")+"]"}),hi.push({key:"XStep",value:J(se.xStep)}),hi.push({key:"YStep",value:J(se.yStep)}),hi.push({key:"Resources",value:At+" 0 R"}),se.matrix&&hi.push({key:"Matrix",value:"["+se.matrix.toString()+"]"}),Rt({data:se.stream,additionalKeyValues:hi,objectId:se.objectNumber}),Ke("endobj")},Pr=function(se){var Ue;for(Ue in Xi)Xi.hasOwnProperty(Ue)&&(Xi[Ue]instanceof jf?Tn(Xi[Ue]):Xi[Ue]instanceof B0&&Jn(Xi[Ue],se))},sr=function(se){for(var Ue in se.objectNumber=co(),Ke("<<"),se)switch(Ue){case"opacity":Ke("/ca "+Fe(se[Ue]));break;case"stroke-opacity":Ke("/CA "+Fe(se[Ue]))}Ke(">>"),Ke("endobj")},Cr=function(){var se;for(se in Gn)Gn.hasOwnProperty(se)&&sr(Gn[se])},Mr=function(){for(var se in Ke("/XObject <<"),Wn)Wn.hasOwnProperty(se)&&Wn[se].objectNumber>=0&&Ke("/"+se+" "+Wn[se].objectNumber+" 0 R");tn.publish("putXobjectDict"),Ke(">>")},io=function(){U.oid=co(),Ke("<<"),Ke("/Filter /Standard"),Ke("/V "+U.v),Ke("/R "+U.r),Ke("/U <"+U.toHexString(U.U)+">"),Ke("/O <"+U.toHexString(U.O)+">"),Ke("/P "+U.P),Ke(">>"),Ke("endobj")},Jr=function(){for(var se in Ke("/Font <<"),Ln)Ln.hasOwnProperty(se)&&(b===!1||b===!0&&x.hasOwnProperty(se))&&Ke("/"+se+" "+Ln[se].objectNumber+" 0 R");Ke(">>")},mo=function(){if(Object.keys(Xi).length>0){for(var se in Ke("/Shading <<"),Xi)Xi.hasOwnProperty(se)&&Xi[se]instanceof jf&&Xi[se].objectNumber>=0&&Ke("/"+se+" "+Xi[se].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),Ke(">>")}},Qo=function(se){if(Object.keys(Xi).length>0){for(var Ue in Ke("/Pattern <<"),Xi)Xi.hasOwnProperty(Ue)&&Xi[Ue]instanceof v.TilingPattern&&Xi[Ue].objectNumber>=0&&Xi[Ue].objectNumber<se&&Ke("/"+Ue+" "+Xi[Ue].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),Ke(">>")}},nl=function(){if(Object.keys(Gn).length>0){var se;for(se in Ke("/ExtGState <<"),Gn)Gn.hasOwnProperty(se)&&Gn[se].objectNumber>=0&&Ke("/"+se+" "+Gn[se].objectNumber+" 0 R");tn.publish("putGStateDict"),Ke(">>")}},Mo=function(se){Ee(se.resourcesOid,!0),Ke("<<"),Ke("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Jr(),mo(),Qo(se.objectOid),nl(),Mr(),Ke(">>"),Ke("endobj")},Mt=function(){var se=[];Ii(),Cr(),An(),Pr(se),tn.publish("putResources"),se.forEach(Mo),Mo({resourcesOid:dt,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources")},tr=function(){tn.publish("putAdditionalObjects");for(var se=0;se<gt.length;se++){var Ue=gt[se];Ee(Ue.objId,!0),Ke(Ue.content),Ke("endobj")}tn.publish("postPutAdditionalObjects")},rr=function(se){hn[se.fontName]=hn[se.fontName]||{},hn[se.fontName][se.fontStyle]=se.id},zr=function(se,Ue,At,Qt,hi){var qi={id:"F"+(Object.keys(Ln).length+1).toString(10),postScriptName:se,fontName:Ue,fontStyle:At,encoding:Qt,isStandardFont:hi||!1,metadata:{}};return tn.publish("addFont",{font:qi,instance:this}),Ln[qi.id]=qi,rr(qi),qi.id},Xo=function(se){for(var Ue=0,At=$t.length;Ue<At;Ue++){var Qt=zr.call(this,se[Ue][0],se[Ue][1],se[Ue][2],$t[Ue][3],!0);b===!1&&(x[Qt]=!0);var hi=se[Ue][0].split("-");rr({id:Qt,fontName:hi[0],fontStyle:hi[1]||""})}tn.publish("addFonts",{fonts:Ln,dictionary:hn})},Do=function(se){return se.foo=function(){try{return se.apply(this,arguments)}catch(Qt){var Ue=Qt.stack||"";~Ue.indexOf(" at ")&&(Ue=Ue.split(" at ")[1]);var At="Error in function "+Ue.split(`
`)[0].split("<")[0]+": "+Qt.message;if(!Vr.console)throw new Error(At);Vr.console.error(At,Qt),Vr.alert&&alert(At)}},se.foo.bar=se,se.foo},Ea=function(se,Ue){var At,Qt,hi,qi,an,Kn,gr,Nr,Wr;if(hi=(Ue=Ue||{}).sourceEncoding||"Unicode",an=Ue.outputEncoding,(Ue.autoencode||an)&&Ln[Qe].metadata&&Ln[Qe].metadata[hi]&&Ln[Qe].metadata[hi].encoding&&(qi=Ln[Qe].metadata[hi].encoding,!an&&Ln[Qe].encoding&&(an=Ln[Qe].encoding),!an&&qi.codePages&&(an=qi.codePages[0]),typeof an=="string"&&(an=qi[an]),an)){for(gr=!1,Kn=[],At=0,Qt=se.length;At<Qt;At++)(Nr=an[se.charCodeAt(At)])?Kn.push(String.fromCharCode(Nr)):Kn.push(se[At]),Kn[At].charCodeAt(0)>>8&&(gr=!0);se=Kn.join("")}for(At=se.length;gr===void 0&&At!==0;)se.charCodeAt(At-1)>>8&&(gr=!0),At--;if(!gr)return se;for(Kn=Ue.noBOM?[]:[254,255],At=0,Qt=se.length;At<Qt;At++){if((Wr=(Nr=se.charCodeAt(At))>>8)>>8)throw new Error("Character at position "+At+" of string '"+se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Kn.push(Wr),Kn.push(Nr-(Wr<<8))}return String.fromCharCode.apply(void 0,Kn)},es=v.__private__.pdfEscape=v.pdfEscape=function(se,Ue){return Ea(se,Ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Us=v.__private__.beginPage=function(se){Pt[++fn]=[],yn[fn]={objId:0,contentsObjId:0,userUnit:Number(r),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(se[0]),topRightY:Number(se[1])}},ks(fn),vt(Pt[Ce])},ys=function(se,Ue){var At,Qt,hi;switch(t=Ue||t,typeof se=="string"&&(At=M(se.toLowerCase()),Array.isArray(At)&&(Qt=At[0],hi=At[1])),Array.isArray(se)&&(Qt=se[0]*_t,hi=se[1]*_t),isNaN(Qt)&&(Qt=l[0],hi=l[1]),(Qt>14400||hi>14400)&&(us.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Qt=Math.min(14400,Qt),hi=Math.min(14400,hi)),l=[Qt,hi],t.substr(0,1)){case"l":hi>Qt&&(l=[hi,Qt]);break;case"p":Qt>hi&&(l=[hi,Qt])}Us(l),Qn(F),Ke(qs),Ou!==0&&Ke(Ou+" J"),du!==0&&Ke(du+" j"),tn.publish("addPage",{pageNumber:fn})},Ia=function(se){se>0&&se<=fn&&(Pt.splice(se,1),yn.splice(se,1),fn--,Ce>fn&&(Ce=fn),this.setPage(Ce))},ks=function(se){se>0&&se<=fn&&(Ce=se)},Ks=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Pt.length-1},Vs=function(se,Ue,At){var Qt,hi=void 0;return At=At||{},se=se!==void 0?se:Ln[Qe].fontName,Ue=Ue!==void 0?Ue:Ln[Qe].fontStyle,Qt=se.toLowerCase(),hn[Qt]!==void 0&&hn[Qt][Ue]!==void 0?hi=hn[Qt][Ue]:hn[se]!==void 0&&hn[se][Ue]!==void 0?hi=hn[se][Ue]:At.disableWarning===!1&&us.warn("Unable to look up font label for font '"+se+"', '"+Ue+"'. Refer to getFontList() for available fonts."),hi||At.noFallback||(hi=hn.times[Ue])==null&&(hi=hn.times.normal),hi},Ta=v.__private__.putInfo=function(){var se=co(),Ue=function(Qt){return Qt};for(var At in w!==null&&(Ue=U.encryptor(se,0)),Ke("<<"),Ke("/Producer ("+es(Ue("jsPDF "+Ur.version))+")"),ae)ae.hasOwnProperty(At)&&ae[At]&&Ke("/"+At.substr(0,1).toUpperCase()+At.substr(1)+" ("+es(Ue(ae[At]))+")");Ke("/CreationDate ("+es(Ue(et))+")"),Ke(">>"),Ke("endobj")},wl=v.__private__.putCatalog=function(se){var Ue=(se=se||{}).rootDictionaryObjId||ct;switch(co(),Ke("<<"),Ke("/Type /Catalog"),Ke("/Pages "+Ue+" 0 R"),Ti||(Ti="fullwidth"),Ti){case"fullwidth":Ke("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ke("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ke("/OpenAction [3 0 R /Fit]");break;case"original":Ke("/OpenAction [3 0 R /XYZ null null 1]");break;default:var At=""+Ti;At.substr(At.length-1)==="%"&&(Ti=parseInt(Ti)/100),typeof Ti=="number"&&Ke("/OpenAction [3 0 R /XYZ null null "+Fe(Ti)+"]")}switch(ti||(ti="continuous"),ti){case"continuous":Ke("/PageLayout /OneColumn");break;case"single":Ke("/PageLayout /SinglePage");break;case"two":case"twoleft":Ke("/PageLayout /TwoColumnLeft");break;case"tworight":Ke("/PageLayout /TwoColumnRight")}Wi&&Ke("/PageMode /"+Wi),tn.publish("putCatalog"),Ke(">>"),Ke("endobj")},uu=v.__private__.putTrailer=function(){Ke("trailer"),Ke("<<"),Ke("/Size "+(Be+1)),Ke("/Root "+Be+" 0 R"),Ke("/Info "+(Be-1)+" 0 R"),w!==null&&Ke("/Encrypt "+U.oid+" 0 R"),Ke("/ID [ <"+nt+"> <"+nt+"> ]"),Ke(">>")},xl=v.__private__.putHeader=function(){Ke("%PDF-"+C),Ke("%\xBA\xDF\xAC\xE0")},cu=v.__private__.putXRef=function(){var se="0000000000";Ke("xref"),Ke("0 "+(Be+1)),Ke("0000000000 65535 f ");for(var Ue=1;Ue<=Be;Ue++)typeof We[Ue]=="function"?Ke((se+We[Ue]()).slice(-10)+" 00000 n "):We[Ue]!==void 0?Ke((se+We[Ue]).slice(-10)+" 00000 n "):Ke("0000000000 00000 n ")},da=v.__private__.buildDocument=function(){bt(),vt(st),tn.publish("buildDocument"),xl(),yt(),tr(),Mt(),w!==null&&io(),Ta(),wl();var se=Xe;return cu(),uu(),Ke("startxref"),Ke(""+se),Ke("%%EOF"),vt(Pt[Ce]),st.join(`
`)},pa=v.__private__.getBlob=function(se){return new Blob([li(se)],{type:"application/pdf"})},Ao=v.output=v.__private__.output=Do(function(se,Ue){switch(typeof(Ue=Ue||{})=="string"?Ue={filename:Ue}:Ue.filename=Ue.filename||"generated.pdf",se){case void 0:return da();case"save":v.save(Ue.filename);break;case"arraybuffer":return li(da());case"blob":return pa(da());case"bloburi":case"bloburl":if(Vr.URL!==void 0&&typeof Vr.URL.createObjectURL=="function")return Vr.URL&&Vr.URL.createObjectURL(pa(da()))||void 0;us.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var At="",Qt=da();try{At=O2(Qt)}catch{At=O2(unescape(encodeURIComponent(Qt)))}return"data:application/pdf;filename="+Ue.filename+";base64,"+At;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var hi="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ue.pdfObjectUrl&&(hi=Ue.pdfObjectUrl,qi="");var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+hi+'"'+qi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ue)+");<\/script></body></html>",Kn=Vr.open();return Kn!==null&&Kn.document.write(an),Kn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ue.filename+'" width="500px" height="400px" /></body></html>',Nr=Vr.open();if(Nr!==null){Nr.document.write(gr);var Wr=this;Nr.document.documentElement.querySelector("#pdfViewer").onload=function(){Nr.document.title=Ue.filename,Nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wr.output("bloburl"))}}return Nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var to='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ue)+'"></iframe></body></html>',Oo=Vr.open();if(Oo!==null&&(Oo.document.write(to),Oo.document.title=Ue.filename),Oo||typeof safari>"u")return Oo;break;case"datauri":case"dataurl":return Vr.document.location.href=this.output("datauristring",Ue);default:return null}}),rl=function(se){return Array.isArray(wr)===!0&&wr.indexOf(se)>-1};switch(o){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=rl("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);_t=o}var U=null;Oe(),it();var $=function(se){return w!==null?U.encryptor(se,0):function(Ue){return Ue}},ye=v.__private__.getPageInfo=v.getPageInfo=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yn[se].objId,pageNumber:se,pageContext:yn[se]}},De=v.__private__.getPageInfoByObjId=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ue in yn)if(yn[Ue].objId===se)break;return ye(Ue)},rt=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:yn[Ce].objId,pageNumber:Ce,pageContext:yn[Ce]}};v.addPage=function(){return ys.apply(this,arguments),this},v.setPage=function(){return ks.apply(this,arguments),vt.call(this,Pt[Ce]),this},v.insertPage=function(se){return this.addPage(),this.movePage(Ce,se),this},v.movePage=function(se,Ue){var At,Qt;if(se>Ue){At=Pt[se],Qt=yn[se];for(var hi=se;hi>Ue;hi--)Pt[hi]=Pt[hi-1],yn[hi]=yn[hi-1];Pt[Ue]=At,yn[Ue]=Qt,this.setPage(Ue)}else if(se<Ue){At=Pt[se],Qt=yn[se];for(var qi=se;qi<Ue;qi++)Pt[qi]=Pt[qi+1],yn[qi]=yn[qi+1];Pt[Ue]=At,yn[Ue]=Qt,this.setPage(Ue)}return this},v.deletePage=function(){return Ia.apply(this,arguments),this},v.__private__.text=v.text=function(se,Ue,At,Qt,hi){var qi,an,Kn,gr,Nr,Wr,to,Oo,jo,Ho=(Qt=Qt||{}).scope||this;if(typeof se=="number"&&typeof Ue=="number"&&(typeof At=="string"||Array.isArray(At))){var Ss=At;At=Ue,Ue=se,se=Ss}if(arguments[3]instanceof rn?(oe("The transform parameter of text() with a Matrix value"),jo=hi):(Kn=arguments[4],gr=arguments[5],$o(to=arguments[3])==="object"&&to!==null||(typeof Kn=="string"&&(gr=Kn,Kn=null),typeof to=="string"&&(gr=to,to=null),typeof to=="number"&&(Kn=to,to=null),Qt={flags:to,angle:Kn,align:gr})),isNaN(Ue)||isNaN(At)||se==null)throw new Error("Invalid arguments passed to jsPDF.text");if(se.length===0)return Ho;var fs="",jr=!1,Cs=typeof Qt.lineHeightFactor=="number"?Qt.lineHeightFactor:c,_s=Ho.internal.scaleFactor;function Hl(Fo){return Fo=Fo.split("	").join(Array(Qt.TabLen||9).join(" ")),es(Fo,to)}function kl(Fo){for(var Hr,Co=Fo.concat(),ts=[],_n=Co.length;_n--;)typeof(Hr=Co.shift())=="string"?ts.push(Hr):Array.isArray(Fo)&&(Hr.length===1||Hr[1]===void 0&&Hr[2]===void 0)?ts.push(Hr[0]):ts.push([Hr[0],Hr[1],Hr[2]]);return ts}function Ru(Fo,Hr){var Co;if(typeof Fo=="string")Co=Hr(Fo)[0];else if(Array.isArray(Fo)){for(var ts,_n,Fa=Fo.concat(),ju=[],Uu=Fa.length;Uu--;)typeof(ts=Fa.shift())=="string"?ju.push(Hr(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(_n=Hr(ts[0],ts[1],ts[2]),ju.push([_n[0],_n[1],_n[2]]));Co=ju}return Co}var La=!1,Sl=!0;if(typeof se=="string")La=!0;else if(Array.isArray(se)){var ol=se.concat();an=[];for(var Bu,Os=ol.length;Os--;)(typeof(Bu=ol.shift())!="string"||Array.isArray(Bu)&&typeof Bu[0]!="string")&&(Sl=!1);La=Sl}if(La===!1)throw new Error('Type of text must be string or Array. "'+se+'" is not recognized.');typeof se=="string"&&(se=se.match(/[\r?\n]/)?se.split(/\r\n|\r|\n/g):[se]);var gu=Si/Ho.internal.scaleFactor,Gl=gu*(Cs-1);switch(Qt.baseline){case"bottom":At-=Gl;break;case"top":At+=gu-Gl;break;case"hanging":At+=gu-2*Gl;break;case"middle":At+=gu/2-Gl}if((Wr=Qt.maxWidth||0)>0&&(typeof se=="string"?se=Ho.splitTextToSize(se,Wr):Object.prototype.toString.call(se)==="[object Array]"&&(se=se.reduce(function(Fo,Hr){return Fo.concat(Ho.splitTextToSize(Hr,Wr))},[]))),qi={text:se,x:Ue,y:At,options:Qt,mutex:{pdfEscape:es,activeFontKey:Qe,fonts:Ln,activeFontSize:Si}},tn.publish("preProcessText",qi),se=qi.text,Kn=(Qt=qi.options).angle,!(jo instanceof rn)&&Kn&&typeof Kn=="number"){Kn*=Math.PI/180,Qt.rotationDirection===0&&(Kn=-Kn),V===O.ADVANCED&&(Kn=-Kn);var Ha=Math.cos(Kn),yu=Math.sin(Kn);jo=new rn(Ha,yu,-yu,Ha,0,0)}else Kn&&Kn instanceof rn&&(jo=Kn);V!==O.ADVANCED||jo||(jo=yo),(Nr=Qt.charSpace||fu)!==void 0&&(fs+=J(Ie(Nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Oo=Qt.horizontalScale)!==void 0&&(fs+=J(100*Oo)+` Tz
`),Qt.lang;var Fs=-1,_u=Qt.renderingMode!==void 0?Qt.renderingMode:Qt.stroke,sl=Ho.internal.getCurrentPageInfo().pageContext;switch(_u){case 0:case!1:case"fill":Fs=0;break;case 1:case!0:case"stroke":Fs=1;break;case 2:case"fillThenStroke":Fs=2;break;case 3:case"invisible":Fs=3;break;case 4:case"fillAndAddForClipping":Fs=4;break;case 5:case"strokeAndAddPathForClipping":Fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fs=6;break;case 7:case"addToPathForClipping":Fs=7}var Wl=sl.usedRenderingMode!==void 0?sl.usedRenderingMode:-1;Fs!==-1?fs+=Fs+` Tr
`:Wl!==-1&&(fs+=`0 Tr
`),Fs!==-1&&(sl.usedRenderingMode=Fs),gr=Qt.align||"left";var Pa,Cl=Si*Cs,Mc=Ho.internal.pageSize.getWidth(),Dc=Ln[Qe];Nr=Qt.charSpace||fu,Wr=Qt.maxWidth||0,to=Object.assign({autoencode:!0,noBOM:!0},Qt.flags);var El=[];if(Object.prototype.toString.call(se)==="[object Array]"){var Rs;an=kl(se),gr!=="left"&&(Pa=an.map(function(Fo){return Ho.getStringUnitWidth(Fo,{font:Dc,charSpace:Nr,fontSize:Si,doKerning:!1})*Si/_s}));var Ma,Da=0;if(gr==="right"){Ue-=Pa[0],se=[],Os=an.length;for(var sa=0;sa<Os;sa++)sa===0?(Ma=ma(Ue),Rs=Va(At)):(Ma=Ie(Da-Pa[sa]),Rs=-Cl),se.push([an[sa],Ma,Rs]),Da=Pa[sa]}else if(gr==="center"){Ue-=Pa[0]/2,se=[],Os=an.length;for(var ss=0;ss<Os;ss++)ss===0?(Ma=ma(Ue),Rs=Va(At)):(Ma=Ie((Da-Pa[ss])/2),Rs=-Cl),se.push([an[ss],Ma,Rs]),Da=Pa[ss]}else if(gr==="left"){se=[],Os=an.length;for(var al=0;al<Os;al++)se.push(an[al])}else{if(gr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');se=[],Os=an.length,Wr=Wr!==0?Wr:Mc;for(var Yo=0;Yo<Os;Yo++)Rs=Yo===0?Va(At):-Cl,Ma=Yo===0?ma(Ue):0,Yo<Os-1?El.push(J(Ie((Wr-Pa[Yo])/(an[Yo].split(" ").length-1)))):El.push(0),se.push([an[Yo],Ma,Rs])}}var zu=typeof Qt.R2L=="boolean"?Qt.R2L:mi;zu===!0&&(se=Ru(se,function(Fo,Hr,Co){return[Fo.split("").reverse().join(""),Hr,Co]})),qi={text:se,x:Ue,y:At,options:Qt,mutex:{pdfEscape:es,activeFontKey:Qe,fonts:Ln,activeFontSize:Si}},tn.publish("postProcessText",qi),se=qi.text,jr=qi.mutex.isHex||!1;var Oa=Ln[Qe].encoding;Oa!=="WinAnsiEncoding"&&Oa!=="StandardEncoding"||(se=Ru(se,function(Fo,Hr,Co){return[Hl(Fo),Hr,Co]})),an=kl(se),se=[];for(var aa,Xr,_a,Il=0,Nu=1,vu=Array.isArray(an[0])?Nu:Il,Hs="",Tl=function(Fo,Hr,Co){var ts="";return Co instanceof rn?(Co=typeof Qt.angle=="number"?He(Co,new rn(1,0,0,1,Fo,Hr)):He(new rn(1,0,0,1,Fo,Hr),Co),V===O.ADVANCED&&(Co=He(new rn(1,0,0,-1,0,0),Co)),ts=Co.join(" ")+` Tm
`):ts=J(Fo)+" "+J(Hr)+` Td
`,ts},ds=0;ds<an.length;ds++){switch(Hs="",vu){case Nu:_a=(jr?"<":"(")+an[ds][0]+(jr?">":")"),aa=parseFloat(an[ds][1]),Xr=parseFloat(an[ds][2]);break;case Il:_a=(jr?"<":"(")+an[ds]+(jr?">":")"),aa=ma(Ue),Xr=Va(At)}El!==void 0&&El[ds]!==void 0&&(Hs=El[ds]+` Tw
`),ds===0?se.push(Hs+Tl(aa,Xr,jo)+_a):vu===Il?se.push(Hs+_a):vu===Nu&&se.push(Hs+Tl(aa,Xr,jo)+_a)}se=vu===Il?se.join(` Tj
T* `):se.join(` Tj
`),se+=` Tj
`;var Pn=`BT
/`;return Pn+=Qe+" "+Si+` Tf
`,Pn+=J(Si*Cs)+` TL
`,Pn+=hu+`
`,Pn+=fs,Pn+=se,Ke(Pn+="ET"),x[Qe]=!0,Ho};var Ct=v.__private__.clip=v.clip=function(se){return Ke(se==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Ct("evenodd")},v.__private__.discardPath=v.discardPath=function(){return Ke("n"),this};var Ut=v.__private__.isValidStyle=function(se){var Ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(se)!==-1&&(Ue=!0),Ue};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(se){return Ut(se)&&(_=se),this};var Bt=v.__private__.getStyle=v.getStyle=function(se){var Ue=_;switch(se){case"D":case"S":Ue="S";break;case"F":Ue="f";break;case"FD":case"DF":Ue="B";break;case"f":case"f*":case"B":case"B*":Ue=se}return Ue},bi=v.close=function(){return Ke("h"),this};v.stroke=function(){return Ke("S"),this},v.fill=function(se){return yi("f",se),this},v.fillEvenOdd=function(se){return yi("f*",se),this},v.fillStroke=function(se){return yi("B",se),this},v.fillStrokeEvenOdd=function(se){return yi("B*",se),this};var yi=function(se,Ue){$o(Ue)==="object"?ji(Ue,se):Ke(se)},_i=function(se){se===null||V===O.ADVANCED&&se===void 0||(se=Bt(se),Ke(se))};function ui(se,Ue,At,Qt,hi){var qi=new B0(Ue||this.boundingBox,At||this.xStep,Qt||this.yStep,this.gState,hi||this.matrix);qi.stream=this.stream;var an=se+"$$"+this.cloneIndex+++"$$";return _o(an,qi),qi}var ji=function(se,Ue){var At=Hn[se.key],Qt=Xi[At];if(Qt instanceof jf)Ke("q"),Ke(on(Ue)),Qt.gState&&v.setGState(Qt.gState),Ke(se.matrix.toString()+" cm"),Ke("/"+At+" sh"),Ke("Q");else if(Qt instanceof B0){var hi=new rn(1,0,0,-1,0,ya());se.matrix&&(hi=hi.multiply(se.matrix||yo),At=ui.call(Qt,se.key,se.boundingBox,se.xStep,se.yStep,hi).id),Ke("q"),Ke("/Pattern cs"),Ke("/"+At+" scn"),Qt.gState&&v.setGState(Qt.gState),Ke(Ue),Ke("Q")}},on=function(se){switch(se){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cn=v.moveTo=function(se,Ue){return Ke(J(Ie(se))+" "+J(me(Ue))+" m"),this},ft=v.lineTo=function(se,Ue){return Ke(J(Ie(se))+" "+J(me(Ue))+" l"),this},p=v.curveTo=function(se,Ue,At,Qt,hi,qi){return Ke([J(Ie(se)),J(me(Ue)),J(Ie(At)),J(me(Qt)),J(Ie(hi)),J(me(qi)),"c"].join(" ")),this};v.__private__.line=v.line=function(se,Ue,At,Qt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Qt)||!Ut(hi))throw new Error("Invalid arguments passed to jsPDF.line");return V===O.COMPAT?this.lines([[At-se,Qt-Ue]],se,Ue,[1,1],hi||"S"):this.lines([[At-se,Qt-Ue]],se,Ue,[1,1]).stroke()},v.__private__.lines=v.lines=function(se,Ue,At,Qt,hi,qi){var an,Kn,gr,Nr,Wr,to,Oo,jo,Ho,Ss,fs,jr;if(typeof se=="number"&&(jr=At,At=Ue,Ue=se,se=jr),Qt=Qt||[1,1],qi=qi||!1,isNaN(Ue)||isNaN(At)||!Array.isArray(se)||!Array.isArray(Qt)||!Ut(hi)||typeof qi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cn(Ue,At),an=Qt[0],Kn=Qt[1],Nr=se.length,Ss=Ue,fs=At,gr=0;gr<Nr;gr++)(Wr=se[gr]).length===2?(Ss=Wr[0]*an+Ss,fs=Wr[1]*Kn+fs,ft(Ss,fs)):(to=Wr[0]*an+Ss,Oo=Wr[1]*Kn+fs,jo=Wr[2]*an+Ss,Ho=Wr[3]*Kn+fs,Ss=Wr[4]*an+Ss,fs=Wr[5]*Kn+fs,p(to,Oo,jo,Ho,Ss,fs));return qi&&bi(),_i(hi),this},v.path=function(se){for(var Ue=0;Ue<se.length;Ue++){var At=se[Ue],Qt=At.c;switch(At.op){case"m":Cn(Qt[0],Qt[1]);break;case"l":ft(Qt[0],Qt[1]);break;case"c":p.apply(this,Qt);break;case"h":bi()}}return this},v.__private__.rect=v.rect=function(se,Ue,At,Qt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Qt)||!Ut(hi))throw new Error("Invalid arguments passed to jsPDF.rect");return V===O.COMPAT&&(Qt=-Qt),Ke([J(Ie(se)),J(me(Ue)),J(Ie(At)),J(Ie(Qt)),"re"].join(" ")),_i(hi),this},v.__private__.triangle=v.triangle=function(se,Ue,At,Qt,hi,qi,an){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Qt)||isNaN(hi)||isNaN(qi)||!Ut(an))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[At-se,Qt-Ue],[hi-At,qi-Qt],[se-hi,Ue-qi]],se,Ue,[1,1],an,!0),this},v.__private__.roundedRect=v.roundedRect=function(se,Ue,At,Qt,hi,qi,an){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Qt)||isNaN(hi)||isNaN(qi)||!Ut(an))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Kn=4/3*(Math.SQRT2-1);return hi=Math.min(hi,.5*At),qi=Math.min(qi,.5*Qt),this.lines([[At-2*hi,0],[hi*Kn,0,hi,qi-qi*Kn,hi,qi],[0,Qt-2*qi],[0,qi*Kn,-hi*Kn,qi,-hi,qi],[2*hi-At,0],[-hi*Kn,0,-hi,-qi*Kn,-hi,-qi],[0,2*qi-Qt],[0,-qi*Kn,hi*Kn,-qi,hi,-qi]],se+hi,Ue,[1,1],an,!0),this},v.__private__.ellipse=v.ellipse=function(se,Ue,At,Qt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Qt)||!Ut(hi))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qi=4/3*(Math.SQRT2-1)*At,an=4/3*(Math.SQRT2-1)*Qt;return Cn(se+At,Ue),p(se+At,Ue-an,se+qi,Ue-Qt,se,Ue-Qt),p(se-qi,Ue-Qt,se-At,Ue-an,se-At,Ue),p(se-At,Ue+an,se-qi,Ue+Qt,se,Ue+Qt),p(se+qi,Ue+Qt,se+At,Ue+an,se+At,Ue),_i(hi),this},v.__private__.circle=v.circle=function(se,Ue,At,Qt){if(isNaN(se)||isNaN(Ue)||isNaN(At)||!Ut(Qt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(se,Ue,At,At,Qt)},v.setFont=function(se,Ue,At){return At&&(Ue=te(Ue,At)),Qe=Vs(se,Ue,{disableWarning:!1}),this};var Di=v.__private__.getFont=v.getFont=function(){return Ln[Vs.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var se,Ue,At={};for(se in hn)if(hn.hasOwnProperty(se))for(Ue in At[se]=[],hn[se])hn[se].hasOwnProperty(Ue)&&At[se].push(Ue);return At},v.addFont=function(se,Ue,At,Qt,hi){var qi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qi.indexOf(arguments[3])!==-1?hi=arguments[3]:arguments[3]&&qi.indexOf(arguments[3])==-1&&(At=te(At,Qt)),hi=hi||"Identity-H",zr.call(this,se,Ue,At,hi)};var c,F=i.lineWidth||.200025,mn=v.__private__.getLineWidth=v.getLineWidth=function(){return F},Qn=v.__private__.setLineWidth=v.setLineWidth=function(se){return F=se,Ke(J(Ie(se))+" w"),this};v.__private__.setLineDash=Ur.API.setLineDash=Ur.API.setLineDashPattern=function(se,Ue){if(se=se||[],Ue=Ue||0,isNaN(Ue)||!Array.isArray(se))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return se=se.map(function(At){return J(Ie(At))}).join(" "),Ue=J(Ie(Ue)),Ke("["+se+"] "+Ue+" d"),this};var vo=v.__private__.getLineHeight=v.getLineHeight=function(){return Si*c};v.__private__.getLineHeight=v.getLineHeight=function(){return Si*c};var ne=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(se){return typeof(se=se||1.15)=="number"&&(c=se),this},Br=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return c};ne(i.lineHeight);var ma=v.__private__.getHorizontalCoordinate=function(se){return Ie(se)},Va=v.__private__.getVerticalCoordinate=function(se){return V===O.ADVANCED?se:yn[Ce].mediaBox.topRightY-yn[Ce].mediaBox.bottomLeftY-Ie(se)},Pc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(se){return J(ma(se))},Al=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(se){return J(Va(se))},qs=i.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return jt(qs)},v.__private__.setStrokeColor=v.setDrawColor=function(se,Ue,At,Qt){return qs=Ge({ch1:se,ch2:Ue,ch3:At,ch4:Qt,pdfColorType:"draw",precision:2}),Ke(qs),this};var nc=i.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return jt(nc)},v.__private__.setFillColor=v.setFillColor=function(se,Ue,At,Qt){return nc=Ge({ch1:se,ch2:Ue,ch3:At,ch4:Qt,pdfColorType:"fill",precision:2}),Ke(nc),this};var hu=i.textColor||"0 g",sh=v.__private__.getTextColor=v.getTextColor=function(){return jt(hu)};v.__private__.setTextColor=v.setTextColor=function(se,Ue,At,Qt){return hu=Ge({ch1:se,ch2:Ue,ch3:At,ch4:Qt,pdfColorType:"text",precision:3}),this};var fu=i.charSpace,ah=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(fu||0)};v.__private__.setCharSpace=v.setCharSpace=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fu=se,this};var Ou=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(se){var Ue=v.CapJoinStyles[se];if(Ue===void 0)throw new Error("Line cap style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ou=Ue,Ke(Ue+" J"),this};var du=0;v.__private__.setLineJoin=v.setLineJoin=function(se){var Ue=v.CapJoinStyles[se];if(Ue===void 0)throw new Error("Line join style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return du=Ue,Ke(Ue+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(se){if(se=se||0,isNaN(se))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ke(J(Ie(se))+" M"),this},v.GState=f1,v.setGState=function(se){(se=typeof se=="string"?Gn[Zr[se]]:pu(null,se)).equals(zn)||(Ke("/"+se.id+" gs"),zn=se)};var pu=function(se,Ue){if(!se||!Zr[se]){var At=!1;for(var Qt in Gn)if(Gn.hasOwnProperty(Qt)&&Gn[Qt].equals(Ue)){At=!0;break}if(At)Ue=Gn[Qt];else{var hi="GS"+(Object.keys(Gn).length+1).toString(10);Gn[hi]=Ue,Ue.id=hi}return se&&(Zr[se]=Ue.id),tn.publish("addGState",Ue),Ue}};v.addGState=function(se,Ue){return pu(se,Ue),this},v.saveGraphicsState=function(){return Ke("q"),Bi.push({key:Qe,size:Si,color:hu}),this},v.restoreGraphicsState=function(){Ke("Q");var se=Bi.pop();return Qe=se.key,Si=se.size,hu=se.color,zn=null,this},v.setCurrentTransformationMatrix=function(se){return Ke(se.toString()+" cm"),this},v.comment=function(se){return Ke("#"+se),this};var Vl=function(se,Ue){var At=se||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return At},set:function(qi){isNaN(qi)||(At=parseFloat(qi))}});var Qt=Ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Qt},set:function(qi){isNaN(qi)||(Qt=parseFloat(qi))}});var hi="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return hi},set:function(qi){hi=qi.toString()}}),this},mu=function(se,Ue,At,Qt){Vl.call(this,se,Ue),this.type="rect";var hi=At||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return hi},set:function(an){isNaN(an)||(hi=parseFloat(an))}});var qi=Qt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qi},set:function(an){isNaN(an)||(qi=parseFloat(an))}}),this},Nn=function(){this.page=fn,this.currentPage=Ce,this.pages=Pt.slice(0),this.pagesContext=yn.slice(0),this.x=Jt,this.y=di,this.matrix=wn,this.width=ga(Ce),this.height=ya(Ce),this.outputDestination=ut,this.id="",this.objectNumber=-1};Nn.prototype.restore=function(){fn=this.page,Ce=this.currentPage,yn=this.pagesContext,Pt=this.pages,Jt=this.x,di=this.y,wn=this.matrix,ql(Ce,this.width),bo(Ce,this.height),ut=this.outputDestination};var Fn=function(se,Ue,At,Qt,hi){Kr.push(new Nn),fn=Ce=0,Pt=[],Jt=se,di=Ue,wn=hi,Us([At,Qt])},Fu=function(se){if(lr[se])Kr.pop().restore();else{var Ue=new Nn,At="Xo"+(Object.keys(Wn).length+1).toString(10);Ue.id=At,lr[se]=At,Wn[At]=Ue,tn.publish("addFormObject",Ue),Kr.pop().restore()}};for(var qa in v.beginFormObject=function(se,Ue,At,Qt,hi){return Fn(se,Ue,At,Qt,hi),this},v.endFormObject=function(se){return Fu(se),this},v.doFormObject=function(se,Ue){var At=Wn[lr[se]];return Ke("q"),Ke(Ue.toString()+" cm"),Ke("/"+At.id+" Do"),Ke("Q"),this},v.getFormObject=function(se){var Ue=Wn[lr[se]];return{x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height,matrix:Ue.matrix}},v.save=function(se,Ue){return se=se||"generated.pdf",(Ue=Ue||{}).returnPromise=Ue.returnPromise||!1,Ue.returnPromise===!1?(zf(pa(da()),se),typeof zf.unload=="function"&&Vr.setTimeout&&setTimeout(zf.unload,911),this):new Promise(function(At,Qt){try{var hi=zf(pa(da()),se);typeof zf.unload=="function"&&Vr.setTimeout&&setTimeout(zf.unload,911),At(hi)}catch(qi){Qt(qi.message)}})},Ur.API)Ur.API.hasOwnProperty(qa)&&(qa==="events"&&Ur.API.events.length?function(se,Ue){var At,Qt,hi;for(hi=Ue.length-1;hi!==-1;hi--)At=Ue[hi][0],Qt=Ue[hi][1],se.subscribe.apply(se,[At].concat(typeof Qt=="function"?[Qt]:Qt))}(tn,Ur.API.events):v[qa]=Ur.API[qa]);var ga=v.getPageWidth=function(se){return(yn[se=se||Ce].mediaBox.topRightX-yn[se].mediaBox.bottomLeftX)/_t},ql=v.setPageWidth=function(se,Ue){yn[se].mediaBox.topRightX=Ue*_t+yn[se].mediaBox.bottomLeftX},ya=v.getPageHeight=function(se){return(yn[se=se||Ce].mediaBox.topRightY-yn[se].mediaBox.bottomLeftY)/_t},bo=v.setPageHeight=function(se,Ue){yn[se].mediaBox.topRightY=Ue*_t+yn[se].mediaBox.bottomLeftY};return v.internal={pdfEscape:es,getStyle:Bt,getFont:Di,getFontSize:Yt,getCharSpace:ah,getTextColor:sh,getLineHeight:vo,getLineHeightFactor:Br,getLineWidth:mn,write:ei,getHorizontalCoordinate:ma,getVerticalCoordinate:Va,getCoordinateString:Pc,getVerticalCoordinateString:Al,collections:{},newObject:co,newAdditionalObject:qe,newObjectDeferred:Te,newObjectDeferredBegin:Ee,getFilters:Zt,putStream:Rt,events:tn,scaleFactor:_t,pageSize:{getWidth:function(){return ga(Ce)},setWidth:function(se){ql(Ce,se)},getHeight:function(){return ya(Ce)},setHeight:function(se){bo(Ce,se)}},encryptionOptions:w,encryption:U,getEncryptor:$,output:Ao,getNumberOfPages:Ks,pages:Pt,out:Ke,f2:Fe,f3:pe,getPageInfo:ye,getPageInfoByObjId:De,getCurrentPageInfo:rt,getPDFVersion:T,Point:Vl,Rectangle:mu,Matrix:rn,hasHotfix:rl},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return ga(Ce)},set:function(se){ql(Ce,se)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return ya(Ce)},set:function(se){bo(Ce,se)},enumerable:!0,configurable:!0}),Xo.call(v,$t),Qe="F1",ys(l,t),tn.publish("initialized"),v}M0.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},M0.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},M0.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},M0.prototype.processOwnerPassword=function(i,e){return R2(F2(e).substr(0,5),i)},M0.prototype.encryptor=function(i,e){var t=F2(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(o){return R2(t,o)}},f1.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||$o(i)!==$o(this))return!1;var o=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;o++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&o--;return o===0},Ur.API={events:[]},Ur.version="2.5.1";var Xs=Ur.API,cg=1,t0=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},w0=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$r=function(i){return i.toFixed(2)},Zh=function(i){return i.toFixed(5)};Xs.__acroform__={};var au=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},i_=function(i){return i*cg},Wc=function(i){var e=new Tw,t=ar.internal.getHeight(i)||0,o=ar.internal.getWidth(i)||0;return e.BBox=[0,0,Number($r(o)),Number($r(t))],e},n8=Xs.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},r8=Xs.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},o8=Xs.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<e)==0?0:1},ia=Xs.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return o8(i,e-1)},na=Xs.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return n8(i,e-1)},ra=Xs.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return r8(i,e-1)},s8=Xs.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,o=e.internal.getVerticalCoordinate,l=i[0],u=i[1],m=i[2],r=i[3],f={};return f.lowerLeft_X=t(l)||0,f.lowerLeft_Y=o(u+r)||0,f.upperRight_X=t(l+m)||0,f.upperRight_Y=o(u)||0,[Number($r(f.lowerLeft_X)),Number($r(f.lowerLeft_Y)),Number($r(f.upperRight_X)),Number($r(f.upperRight_Y))]},a8=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,o=B2(i,t),l=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+l+" "+$r(o.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=Wc(i);return u.scope=i.scope,u.stream=e.join(`
`),u}},B2=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,o={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=i.multiline?l.map(function(pe){return pe.split(`
`)}):l.map(function(pe){return[pe]});var u=t,m=ar.internal.getHeight(i)||0;m=m<0?-m:m;var r=ar.internal.getWidth(i)||0;r=r<0?-r:r;var f=function(pe,Ie,Se){if(pe+1<l.length){var me=Ie+" "+l[pe+1][0];return Rp(me,i,Se).width<=r-4}return!1};u++;e:for(;u>0;){e="",u--;var _,w,b=Rp("3",i,u).height,x=i.multiline?m-u:(m-b)/2,v=x+=2,C=0,T=0,S=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+Rp(e,i,u=12).width+", FieldWidth:"+r+`
`;break}for(var M="",O=0,V=0;V<l.length;V++)if(l.hasOwnProperty(V)){var G=!1;if(l[V].length!==1&&S!==l[V].length-1){if((b+2)*(O+2)+2>m)continue e;M+=l[V][S],G=!0,T=V,V--}else{M=(M+=l[V][S]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var Z=parseInt(V),te=f(Z,M,u),J=V>=l.length-1;if(te&&!J){M+=" ",S=0;continue}if(te||J){if(J)T=Z;else if(i.multiline&&(b+2)*(O+2)+2>m)continue e}else{if(!i.multiline||(b+2)*(O+2)+2>m)continue e;T=Z}}for(var oe="",Me=C;Me<=T;Me++){var Fe=l[Me];if(i.multiline){if(Me===T){oe+=Fe[S]+" ",S=(S+1)%Fe.length;continue}if(Me===C){oe+=Fe[Fe.length-1]+" ";continue}}oe+=Fe[0]+" "}switch(oe=oe.substr(oe.length-1)==" "?oe.substr(0,oe.length-1):oe,w=Rp(oe,i,u).width,i.textAlign){case"right":_=r-w-2;break;case"center":_=(r-w)/2;break;case"left":default:_=2}e+=$r(_)+" "+$r(v)+` Td
`,e+="("+t0(oe)+`) Tj
`,e+=-$r(_)+` 0 Td
`,v=-(u+2),w=0,C=G?T:T+1,O++,M=""}break}return o.text=e,o.fontSize=u,o},Rp=function(i,e,t){var o=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(i,{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:l}},l8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},u8=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(o){return o.type===t.type&&o.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},c8=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var o=t,l=i[t];e.internal.newObjectDeferredBegin(l.objId,!0),$o(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete i[o]}},h8=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Ic.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(l8)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");cg=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new Lw,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];u.objId=void 0,u.hasAnnotation&&u8(u,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(o,l){var u=!o;for(var m in o||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(m)){var r=o[m],f=[],_=r.Rect;if(r.Rect&&(r.Rect=s8(r.Rect,l)),l.internal.newObjectDeferredBegin(r.objId,!0),r.DA=ar.createDefaultAppearanceStream(r),$o(r)==="object"&&typeof r.getKeyValueListForStream=="function"&&(f=r.getKeyValueListForStream()),r.Rect=_,r.hasAppearanceStream&&!r.appearanceStreamContent){var w=a8(r);f.push({key:"AP",value:"<</N "+w+">>"}),l.internal.acroformPlugin.xForms.push(w)}if(r.appearanceStreamContent){var b="";for(var x in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(x)){var v=r.appearanceStreamContent[x];if(b+="/"+x+" ",b+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var m in v)if(v.hasOwnProperty(m)){var C=v[m];typeof C=="function"&&(C=C.call(l,r)),b+="/"+m+" "+C+" ",l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C)}}else typeof(C=v)=="function"&&(C=C.call(l,r)),b+="/"+m+" "+C,l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}l.internal.putStream({additionalKeyValues:f,objectId:r.objId}),l.internal.out("endobj")}u&&c8(l.internal.acroformPlugin.xForms,l)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},Iw=Xs.__acroform__.arrayToPdfArray=function(i,e,t){var o=function(m){return m};if(Array.isArray(i)){for(var l="[",u=0;u<i.length;u++)switch(u!==0&&(l+=" "),$o(i[u])){case"boolean":case"number":case"object":l+=i[u].toString();break;case"string":i[u].substr(0,1)!=="/"?(e!==void 0&&t&&(o=t.internal.getEncryptor(e)),l+="("+t0(o(i[u].toString()))+")"):l+=i[u].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pm=function(i,e,t){var o=function(l){return l};return e!==void 0&&t&&(o=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+t0(o(i))+")"},eh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};eh.prototype.toString=function(){return this.objId+" 0 R"},eh.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},eh.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var o=e[t],l=this[o];l&&(Array.isArray(l)?i.push({key:o,value:Iw(l,this.objId,this.scope)}):l instanceof eh?(l.scope=this.scope,i.push({key:o,value:l.objId+" 0 R"})):typeof l!="function"&&i.push({key:o,value:l}))}return i};var Tw=function(){eh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};au(Tw,eh);var Lw=function(){eh.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(o){return o};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+t0(t(i))+")"}},set:function(t){i=t}})};au(Lw,eh);var Ic=function i(){eh.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');e=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(e,3))},set:function(M){Boolean(M)===!0?this.F=na(e,3):this.F=ra(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');t=M}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(M){o=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(M){o[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(M){o[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(M){o[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(M){o[3]=M}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof d1)return;u="FieldObject"+i.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+t0(M(u))+")"},set:function(M){u=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(M){u=M}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(M){m=M}});var r="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return r},set:function(M){r=M}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(M){f=M}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/cg:_},set:function(M){_=M}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(M){w=M}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof d1||this instanceof Gf))return Pm(b,this.objId,this.scope)},set:function(M){M=M.toString(),b=M}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ja?x:Pm(x,this.objId,this.scope)},set:function(M){M=M.toString(),x=this instanceof ja?M:M.substr(0,1)==="("?w0(M.substr(1,M.length-2)):w0(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja?w0(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof ja?"/"+M:M}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ja?v:Pm(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=this instanceof ja?M:M.substr(0,1)==="("?w0(M.substr(1,M.length-2)):w0(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja?w0(v.substr(1,v.length-1)):v},set:function(M){M=M.toString(),v=this instanceof ja?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(M){M=Boolean(M),T=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(M){C=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,1))},set:function(M){Boolean(M)===!0?this.Ff=na(this.Ff,1):this.Ff=ra(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,2))},set:function(M){Boolean(M)===!0?this.Ff=na(this.Ff,2):this.Ff=ra(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,3))},set:function(M){Boolean(M)===!0?this.Ff=na(this.Ff,3):this.Ff=ra(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');S=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(S){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};au(Ic,eh);var V0=function(){Ic.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Iw(e,this.objId,this.scope)},set:function(t){var o,l;l=[],typeof(o=t)=="string"&&(l=function(u,m,r){r||(r=1);for(var f,_=[];f=m.exec(u);)_.push(f[r]);return _}(o,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,o){for(o=o||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,18):this.Ff=ra(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=na(this.Ff,19):this.Ff=ra(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=na(this.Ff,20),e.sort()):this.Ff=ra(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,22):this.Ff=ra(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,23):this.Ff=ra(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,27):this.Ff=ra(this.Ff,27)}}),this.hasAppearanceStream=!1};au(V0,Ic);var q0=function(){V0.call(this),this.fontName="helvetica",this.combo=!1};au(q0,V0);var H0=function(){q0.call(this),this.combo=!0};au(H0,q0);var $p=function(){H0.call(this),this.edit=!0};au($p,H0);var ja=function(){Ic.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,15):this.Ff=ra(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,16):this.Ff=ra(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,17):this.Ff=ra(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=na(this.Ff,26):this.Ff=ra(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(u){return u};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var o,l=[];for(o in l.push("<<"),e)l.push("/"+o+" ("+t0(t(e[o]))+")");return l.push(">>"),l.join(`
`)}},set:function(t){$o(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};au(ja,Ic);var e1=function(){ja.call(this),this.pushButton=!0};au(e1,ja);var G0=function(){ja.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};au(G0,ja);var d1=function(){var i,e;Ic.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var t,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(r){return r};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var u,m=[];for(u in m.push("<<"),o)m.push("/"+u+" ("+t0(l(o[u]))+")");return m.push(">>"),m.join(`
`)},set:function(l){$o(l)==="object"&&(o=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(l){typeof l=="string"&&(o.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(l){t=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(l){t="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};au(d1,Ic),G0.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},G0.prototype.createOption=function(i){var e=new d1;return e.Parent=this,e.optionName=i,this.Kids.push(e),f8.call(this.scope,e),e};var t1=function(){ja.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ar.CheckBox.createAppearanceStream()};au(t1,ja);var Gf=function(){Ic.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,13):this.Ff=ra(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,21):this.Ff=ra(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,23):this.Ff=ra(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,24):this.Ff=ra(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,25):this.Ff=ra(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=na(this.Ff,26):this.Ff=ra(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};au(Gf,Ic);var i1=function(){Gf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ia(this.Ff,14))},set:function(i){Boolean(i)===!0?this.Ff=na(this.Ff,14):this.Ff=ra(this.Ff,14)}}),this.password=!0};au(i1,Gf);var ar={CheckBox:{createAppearanceStream:function(){return{N:{On:ar.CheckBox.YesNormal},D:{On:ar.CheckBox.YesPushDown,Off:ar.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Wc(i);e.scope=i.scope;var t=[],o=i.scope.internal.getFont(i.fontName,i.fontStyle).id,l=i.scope.__private__.encodeColorString(i.color),u=B2(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+$r(ar.internal.getWidth(i))+" "+$r(ar.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+o+" "+$r(u.fontSize)+" Tf "+l),t.push("BT"),t.push(u.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=Wc(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,o=i.scope.__private__.encodeColorString(i.color),l=[],u=ar.internal.getHeight(i),m=ar.internal.getWidth(i),r=B2(i,i.caption);return l.push("1 g"),l.push("0 0 "+$r(m)+" "+$r(u)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+$r(m-1)+" "+$r(u-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+t+" "+$r(r.fontSize)+" Tf "+o),l.push(r.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(i){var e=Wc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$r(ar.internal.getWidth(i))+" "+$r(ar.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:ar.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=ar.RadioButton.Circle.YesNormal,e.D[i]=ar.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Wc(i);e.scope=i.scope;var t=[],o=ar.internal.getWidth(i)<=ar.internal.getHeight(i)?ar.internal.getWidth(i)/4:ar.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=ar.internal.Bezier_C,u=Number((o*l).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Zh(ar.internal.getWidth(i)/2)+" "+Zh(ar.internal.getHeight(i)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),t.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),t.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),t.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Wc(i);e.scope=i.scope;var t=[],o=ar.internal.getWidth(i)<=ar.internal.getHeight(i)?ar.internal.getWidth(i)/4:ar.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),u=Number((l*ar.internal.Bezier_C).toFixed(5)),m=Number((o*ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Zh(ar.internal.getWidth(i)/2)+" "+Zh(ar.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Zh(ar.internal.getWidth(i)/2)+" "+Zh(ar.internal.getHeight(i)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+m+" "+m+" "+o+" 0 "+o+" c"),t.push("-"+m+" "+o+" -"+o+" "+m+" -"+o+" 0 c"),t.push("-"+o+" -"+m+" -"+m+" -"+o+" 0 -"+o+" c"),t.push(m+" -"+o+" "+o+" -"+m+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=Wc(i);e.scope=i.scope;var t=[],o=ar.internal.getWidth(i)<=ar.internal.getHeight(i)?ar.internal.getWidth(i)/4:ar.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),u=Number((l*ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Zh(ar.internal.getWidth(i)/2)+" "+Zh(ar.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:ar.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=ar.RadioButton.Cross.YesNormal,e.D[i]=ar.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Wc(i);e.scope=i.scope;var t=[],o=ar.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+$r(ar.internal.getWidth(i)-2)+" "+$r(ar.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push($r(o.x1.x)+" "+$r(o.x1.y)+" m"),t.push($r(o.x2.x)+" "+$r(o.x2.y)+" l"),t.push($r(o.x4.x)+" "+$r(o.x4.y)+" m"),t.push($r(o.x3.x)+" "+$r(o.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Wc(i);e.scope=i.scope;var t=ar.internal.calculateCross(i),o=[];return o.push("0.749023 g"),o.push("0 0 "+$r(ar.internal.getWidth(i))+" "+$r(ar.internal.getHeight(i))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+$r(ar.internal.getWidth(i)-2)+" "+$r(ar.internal.getHeight(i)-2)+" re"),o.push("W"),o.push("n"),o.push($r(t.x1.x)+" "+$r(t.x1.y)+" m"),o.push($r(t.x2.x)+" "+$r(t.x2.y)+" l"),o.push($r(t.x4.x)+" "+$r(t.x4.y)+" m"),o.push($r(t.x3.x)+" "+$r(t.x3.y)+" l"),o.push("s"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(i){var e=Wc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$r(ar.internal.getWidth(i))+" "+$r(ar.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};ar.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=ar.internal.getWidth(i),t=ar.internal.getHeight(i),o=Math.min(e,t);return{x1:{x:(e-o)/2,y:(t-o)/2+o},x2:{x:(e-o)/2+o,y:(t-o)/2},x3:{x:(e-o)/2,y:(t-o)/2},x4:{x:(e-o)/2+o,y:(t-o)/2+o}}}},ar.internal.getWidth=function(i){var e=0;return $o(i)==="object"&&(e=i_(i.Rect[2])),e},ar.internal.getHeight=function(i){var e=0;return $o(i)==="object"&&(e=i_(i.Rect[3])),e};var f8=Xs.addField=function(i){if(h8(this,i),!(i instanceof Ic))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Xs.AcroFormChoiceField=V0,Xs.AcroFormListBox=q0,Xs.AcroFormComboBox=H0,Xs.AcroFormEditBox=$p,Xs.AcroFormButton=ja,Xs.AcroFormPushButton=e1,Xs.AcroFormRadioButton=G0,Xs.AcroFormCheckBox=t1,Xs.AcroFormTextField=Gf,Xs.AcroFormPasswordField=i1,Xs.AcroFormAppearance=ar,Xs.AcroForm={ChoiceField:V0,ListBox:q0,ComboBox:H0,EditBox:$p,Button:ja,PushButton:e1,RadioButton:G0,CheckBox:t1,TextField:Gf,PasswordField:i1,Appearance:ar},Ur.AcroForm={ChoiceField:V0,ListBox:q0,ComboBox:H0,EditBox:$p,Button:ja,PushButton:e1,RadioButton:G0,CheckBox:t1,TextField:Gf,PasswordField:i1,Appearance:ar};Ur.AcroForm;function Pw(i){return i.reduce(function(e,t,o){return e[t]=o,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=i.__addimage__.getImageFileTypeByImageData=function(pe,Ie){var Se,me,et,nt,Et,it=e;if((Ie=Ie||e)==="RGBA"||pe.data!==void 0&&pe.data instanceof Uint8ClampedArray&&"height"in pe&&"width"in pe)return"RGBA";if(te(pe))for(Et in t)for(et=t[Et],Se=0;Se<et.length;Se+=1){for(nt=!0,me=0;me<et[Se].length;me+=1)if(et[Se][me]!==void 0&&et[Se][me]!==pe[me]){nt=!1;break}if(nt===!0){it=Et;break}}else for(Et in t)for(et=t[Et],Se=0;Se<et.length;Se+=1){for(nt=!0,me=0;me<et[Se].length;me+=1)if(et[Se][me]!==void 0&&et[Se][me]!==pe.charCodeAt(me)){nt=!1;break}if(nt===!0){it=Et;break}}return it===e&&Ie!==e&&(it=Ie),it},l=function pe(Ie){for(var Se=this.internal.write,me=this.internal.putStream,et=(0,this.internal.getFilters)();et.indexOf("FlateEncode")!==-1;)et.splice(et.indexOf("FlateEncode"),1);Ie.objectId=this.internal.newObject();var nt=[];if(nt.push({key:"Type",value:"/XObject"}),nt.push({key:"Subtype",value:"/Image"}),nt.push({key:"Width",value:Ie.width}),nt.push({key:"Height",value:Ie.height}),Ie.colorSpace===S.INDEXED?nt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ie.palette.length/3-1)+" "+("sMask"in Ie&&Ie.sMask!==void 0?Ie.objectId+2:Ie.objectId+1)+" 0 R]"}):(nt.push({key:"ColorSpace",value:"/"+Ie.colorSpace}),Ie.colorSpace===S.DEVICE_CMYK&&nt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),nt.push({key:"BitsPerComponent",value:Ie.bitsPerComponent}),"decodeParameters"in Ie&&Ie.decodeParameters!==void 0&&nt.push({key:"DecodeParms",value:"<<"+Ie.decodeParameters+">>"}),"transparency"in Ie&&Array.isArray(Ie.transparency)){for(var Et="",it=0,we=Ie.transparency.length;it<we;it++)Et+=Ie.transparency[it]+" "+Ie.transparency[it]+" ";nt.push({key:"Mask",value:"["+Et+"]"})}Ie.sMask!==void 0&&nt.push({key:"SMask",value:Ie.objectId+1+" 0 R"});var ke=Ie.filter!==void 0?["/"+Ie.filter]:void 0;if(me({data:Ie.data,additionalKeyValues:nt,alreadyAppliedFilters:ke,objectId:Ie.objectId}),Se("endobj"),"sMask"in Ie&&Ie.sMask!==void 0){var Oe="/Predictor "+Ie.predictor+" /Colors 1 /BitsPerComponent "+Ie.bitsPerComponent+" /Columns "+Ie.width,le={width:Ie.width,height:Ie.height,colorSpace:"DeviceGray",bitsPerComponent:Ie.bitsPerComponent,decodeParameters:Oe,data:Ie.sMask};"filter"in Ie&&(le.filter=Ie.filter),pe.call(this,le)}if(Ie.colorSpace===S.INDEXED){var Ce=this.internal.newObject();me({data:oe(new Uint8Array(Ie.palette)),objectId:Ce}),Se("endobj")}},u=function(){var pe=this.internal.collections.addImage_images;for(var Ie in pe)l.call(this,pe[Ie])},m=function(){var pe,Ie=this.internal.collections.addImage_images,Se=this.internal.write;for(var me in Ie)Se("/I"+(pe=Ie[me]).index,pe.objectId,"0","R")},r=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",m))},f=function(){var pe=this.internal.collections.addImage_images;return r.call(this),pe},_=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(pe){return typeof i["process"+pe.toUpperCase()]=="function"},b=function(pe){return $o(pe)==="object"&&pe.nodeType===1},x=function(pe,Ie){if(pe.nodeName==="IMG"&&pe.hasAttribute("src")){var Se=""+pe.getAttribute("src");if(Se.indexOf("data:image/")===0)return Md(unescape(Se).split("base64,").pop());var me=i.loadFile(Se,!0);if(me!==void 0)return me}if(pe.nodeName==="CANVAS"){if(pe.width===0||pe.height===0)throw new Error("Given canvas must have data. Canvas width: "+pe.width+", height: "+pe.height);var et;switch(Ie){case"PNG":et="image/png";break;case"WEBP":et="image/webp";break;case"JPEG":case"JPG":default:et="image/jpeg"}return Md(pe.toDataURL(et,1).split("base64,").pop())}},v=function(pe){var Ie=this.internal.collections.addImage_images;if(Ie){for(var Se in Ie)if(pe===Ie[Se].alias)return Ie[Se]}},C=function(pe,Ie,Se){return pe||Ie||(pe=-96,Ie=-96),pe<0&&(pe=-1*Se.width*72/pe/this.internal.scaleFactor),Ie<0&&(Ie=-1*Se.height*72/Ie/this.internal.scaleFactor),pe===0&&(pe=Ie*Se.width/Se.height),Ie===0&&(Ie=pe*Se.height/Se.width),[pe,Ie]},T=function(pe,Ie,Se,me,et,nt){var Et=C.call(this,Se,me,et),it=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,ke=f.call(this);if(Se=Et[0],me=Et[1],ke[et.index]=et,nt){nt*=Math.PI/180;var Oe=Math.cos(nt),le=Math.sin(nt),Ce=function(ge){return ge.toFixed(4)},he=[Ce(Oe),Ce(le),Ce(-1*le),Ce(Oe),0,0,"cm"]}this.internal.write("q"),nt?(this.internal.write([1,"0","0",1,it(pe),we(Ie+me),"cm"].join(" ")),this.internal.write(he.join(" ")),this.internal.write([it(Se),"0","0",it(me),"0","0","cm"].join(" "))):this.internal.write([it(Se),"0","0",it(me),it(pe),we(Ie+me),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+et.index+" Do"),this.internal.write("Q")},S=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=i.__addimage__.sHashCode=function(pe){var Ie,Se,me=0;if(typeof pe=="string")for(Se=pe.length,Ie=0;Ie<Se;Ie++)me=(me<<5)-me+pe.charCodeAt(Ie),me|=0;else if(te(pe))for(Se=pe.byteLength/2,Ie=0;Ie<Se;Ie++)me=(me<<5)-me+pe[Ie],me|=0;return me},V=i.__addimage__.validateStringAsBase64=function(pe){(pe=pe||"").toString().trim();var Ie=!0;return pe.length===0&&(Ie=!1),pe.length%4!=0&&(Ie=!1),/^[A-Za-z0-9+/]+$/.test(pe.substr(0,pe.length-2))===!1&&(Ie=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(pe.substr(-2))===!1&&(Ie=!1),Ie},G=i.__addimage__.extractImageFromDataUrl=function(pe){var Ie=(pe=pe||"").split("base64,"),Se=null;if(Ie.length===2){var me=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ie[0]);Array.isArray(me)&&(Se={mimeType:me[1],charset:me[2],data:Ie[1]})}return Se},Z=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(pe){return Z()&&pe instanceof ArrayBuffer};var te=i.__addimage__.isArrayBufferView=function(pe){return Z()&&typeof Uint32Array<"u"&&(pe instanceof Int8Array||pe instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&pe instanceof Uint8ClampedArray||pe instanceof Int16Array||pe instanceof Uint16Array||pe instanceof Int32Array||pe instanceof Uint32Array||pe instanceof Float32Array||pe instanceof Float64Array)},J=i.__addimage__.binaryStringToUint8Array=function(pe){for(var Ie=pe.length,Se=new Uint8Array(Ie),me=0;me<Ie;me++)Se[me]=pe.charCodeAt(me);return Se},oe=i.__addimage__.arrayBufferToBinaryString=function(pe){for(var Ie="",Se=te(pe)?pe:new Uint8Array(pe),me=0;me<Se.length;me+=8192)Ie+=String.fromCharCode.apply(null,Se.subarray(me,me+8192));return Ie};i.addImage=function(){var pe,Ie,Se,me,et,nt,Et,it,we;if(typeof arguments[1]=="number"?(Ie=e,Se=arguments[1],me=arguments[2],et=arguments[3],nt=arguments[4],Et=arguments[5],it=arguments[6],we=arguments[7]):(Ie=arguments[1],Se=arguments[2],me=arguments[3],et=arguments[4],nt=arguments[5],Et=arguments[6],it=arguments[7],we=arguments[8]),$o(pe=arguments[0])==="object"&&!b(pe)&&"imageData"in pe){var ke=pe;pe=ke.imageData,Ie=ke.format||Ie||e,Se=ke.x||Se||0,me=ke.y||me||0,et=ke.w||ke.width||et,nt=ke.h||ke.height||nt,Et=ke.alias||Et,it=ke.compression||it,we=ke.rotation||ke.angle||we}var Oe=this.internal.getFilters();if(it===void 0&&Oe.indexOf("FlateEncode")!==-1&&(it="SLOW"),isNaN(Se)||isNaN(me))throw new Error("Invalid coordinates passed to jsPDF.addImage");r.call(this);var le=Me.call(this,pe,Ie,Et,it);return T.call(this,Se,me,et,nt,le,we),this};var Me=function(pe,Ie,Se,me){var et,nt,Et;if(typeof pe=="string"&&o(pe)===e){pe=unescape(pe);var it=Fe(pe,!1);(it!==""||(it=i.loadFile(pe,!0))!==void 0)&&(pe=it)}if(b(pe)&&(pe=x(pe,Ie)),Ie=o(pe,Ie),!w(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if(((Et=Se)==null||Et.length===0)&&(Se=function(we){return typeof we=="string"||te(we)?O(we):te(we.data)?O(we.data):null}(pe)),(et=v.call(this,Se))||(Z()&&(pe instanceof Uint8Array||Ie==="RGBA"||(nt=pe,pe=J(pe))),et=this["process"+Ie.toUpperCase()](pe,_.call(this),Se,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in i.image_compression?we:M.NONE}(me),nt)),!et)throw new Error("An unknown error occurred whilst processing the image.");return et},Fe=i.__addimage__.convertBase64ToBinaryString=function(pe,Ie){var Se;Ie=typeof Ie!="boolean"||Ie;var me,et="";if(typeof pe=="string"){me=(Se=G(pe))!==null?Se.data:pe;try{et=Md(me)}catch(nt){if(Ie)throw V(me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+nt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};i.getImageProperties=function(pe){var Ie,Se,me="";if(b(pe)&&(pe=x(pe)),typeof pe=="string"&&o(pe)===e&&((me=Fe(pe,!1))===""&&(me=i.loadFile(pe)||""),pe=me),Se=o(pe),!w(Se))throw new Error("addImage does not support files of type '"+Se+"', please ensure that a plugin for '"+Se+"' support is added.");if(!Z()||pe instanceof Uint8Array||(pe=J(pe)),!(Ie=this["process"+Se.toUpperCase()](pe)))throw new Error("An unknown error occurred whilst processing the image");return Ie.fileType=Se,Ie}})(Ur.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};Ur.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var o,l,u,m=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),_=t.pageContext.annotations,w=!1,b=0;b<_.length&&!w;b++)switch((o=_[b]).type){case"link":(e(o.options.url)||e(o.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var x=0;x<_.length;x++){o=_[x];var v=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(T.objId),O=o.title||"Note";u="<</Type /Annot /Subtype /Text "+(l="/Rect ["+m(o.bounds.x)+" "+r(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w)+" "+r(o.bounds.y)+"] ")+"/Contents ("+v(M(o.contents))+")",u+=" /Popup "+S.objId+" 0 R",u+=" /P "+f.objId+" 0 R",u+=" /T ("+v(M(O))+") >>",T.content=u;var V=T.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+m(o.bounds.x+30)+" "+r(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w+30)+" "+r(o.bounds.y)+"] ")+" /Parent "+V,o.open&&(u+=" /Open true"),u+=" >>",S.content=u,this.internal.write(T.objId,"0 R",S.objId,"0 R");break;case"freetext":l="/Rect ["+m(o.bounds.x)+" "+r(o.bounds.y)+" "+m(o.bounds.x+o.bounds.w)+" "+r(o.bounds.y+o.bounds.h)+"] ";var G=o.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+v(C(o.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(o.options.name){var Z=this.annotations._nameMap[o.options.name];o.options.pageNumber=Z.page,o.options.top=Z.y}else o.options.top||(o.options.top=0);if(l="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",u="",o.options.url)u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+v(C(o.options.url))+") >>";else if(o.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,u+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var te=r(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),u+=" /XYZ "+o.options.left+" "+te+" "+o.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var o=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":o.pageContext.annotations.push(t)}},i.link=function(t,o,l,u,m){var r=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;r.pageContext.annotations.push({finalBounds:{x:f(t),y:_(o),w:f(t+l),h:_(o+u)},options:m,type:"link"})},i.textWithLink=function(t,o,l,u){var m,r,f=this.getTextWidth(t),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){r=u.maxWidth;var w=this.splitTextToSize(t,r).length;m=Math.ceil(_*w)}else r=f,m=_;return this.text(t,o,l,u),l+=.2*_,u.align==="center"&&(o-=f/2),u.align==="right"&&(o-=f),this.link(o,l-_,r,m,u),f},i.getTextWidth=function(t){var o=this.internal.getFontSize();return this.getStringUnitWidth(t)*o/this.internal.scaleFactor}}(Ur.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];i.__arabicParser__={};var u=i.__arabicParser__.isInArabicSubstitutionA=function(T){return e[T.charCodeAt(0)]!==void 0},m=i.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},r=i.__arabicParser__.isArabicEndLetter=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length<=2},f=i.__arabicParser__.isArabicAlfLetter=function(T){return m(T)&&l.indexOf(T.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=1};var _=i.__arabicParser__.arabicLetterHasFinalForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=3};var w=i.__arabicParser__.arabicLetterHasMedialForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length==4},b=i.__arabicParser__.resolveLigatures=function(T){var S=0,M=t,O="",V=0;for(S=0;S<T.length;S+=1)M[T.charCodeAt(S)]!==void 0?(V++,typeof(M=M[T.charCodeAt(S)])=="number"&&(O+=String.fromCharCode(M),M=t,V=0),S===T.length-1&&(M=t,O+=T.charAt(S-(V-1)),S-=V-1,V=0)):(M=t,O+=T.charAt(S-V),S-=V,V=0);return O};i.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&o[T.charCodeAt(0)]!==void 0};var x=i.__arabicParser__.getCorrectForm=function(T,S,M){return m(T)?u(T)===!1?-1:!_(T)||!m(S)&&!m(M)||!m(M)&&r(S)||r(T)&&!m(S)||r(T)&&f(S)||r(T)&&r(S)?0:w(T)&&m(S)&&!r(S)&&m(M)&&_(M)?3:r(T)||!m(M)?1:2:-1},v=function(T){var S=0,M=0,O=0,V="",G="",Z="",te=(T=T||"").split("\\s+"),J=[];for(S=0;S<te.length;S+=1){for(J.push(""),M=0;M<te[S].length;M+=1)V=te[S][M],G=te[S][M-1],Z=te[S][M+1],m(V)?(O=x(V,G,Z),J[S]+=O!==-1?String.fromCharCode(e[V.charCodeAt(0)][O]):V):J[S]+=V;J[S]=b(J[S])}return J.join(" ")},C=i.__arabicParser__.processArabic=i.processArabic=function(){var T,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(S)){var O=0;for(M=[],O=0;O<S.length;O+=1)Array.isArray(S[O])?M.push([v(S[O][0]),S[O][1],S[O][2]]):M.push([v(S[O])]);T=M}else T=v(S);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};i.events.push(["preProcessText",C])}(Ur.API),Ur.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(r){t=r}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(r){o=isNaN(r)||Number.isInteger(r)===!1||r<0?150:r,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(r){l=isNaN(r)||Number.isInteger(r)===!1||r<0?300:r,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(r){u=r}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(r){m=r}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,o){var l;if((t=t||"2d")!=="2d")return null;for(l in o)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=o[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ur.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(T){f=T}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(T){_=T}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(T){b=T}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(T){C=T}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(f){return o.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},i.getTextDimensions=function(f,_){o.call(this);var w=(_=_||{}).fontSize||this.getFontSize(),b=_.font||this.getFont(),x=_.scaleFactor||this.internal.scaleFactor,v=0,C=0,T=0,S=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var M=_.maxWidth;M>0?typeof f=="string"?f=this.splitTextToSize(f,M):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(V,G){return V.concat(S.splitTextToSize(G,M))},[])):f=Array.isArray(f)?f:[f];for(var O=0;O<f.length;O++)v<(T=this.getStringUnitWidth(f[O],{font:b})*w)&&(v=T);return v!==0&&(C=f.length),{w:v/=x,h:Math.max((C*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/x,0)}},i.cellAddPage=function(){o.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=i.cell=function(){var f;f=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var _=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===f.lineNumber?(f.x=(_.x||0)+(_.width||0),f.y=_.y||0):_.y+_.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,v&&x&&(this.printHeaderRow(f.lineNumber,!0),f.y+=x[0].height)):f.y=_.y+_.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-w,f.y+w,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+w,{align:"center",baseline:"top",maxWidth:f.width-w-w}):this.text(f.text,f.x+w,f.y+w,{align:"left",baseline:"top",maxWidth:f.width-w-w})),this.internal.__cell__.lastCell=f,this};i.table=function(f,_,w,b,x){if(o.call(this),!w)throw new Error("No data for PDF table.");var v,C,T,S,M=[],O=[],V=[],G={},Z={},te=[],J=[],oe=(x=x||{}).autoSize||!1,Me=x.printHeaders!==!1,Fe=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,pe=x.margins||Object.assign({width:this.getPageWidth()},e),Ie=typeof x.padding=="number"?x.padding:3,Se=x.headerBackgroundColor||"#c8c8c8",me=x.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Me,this.internal.__cell__.margins=pe,this.internal.__cell__.table_font_size=Fe,this.internal.__cell__.padding=Ie,this.internal.__cell__.headerBackgroundColor=Se,this.internal.__cell__.headerTextColor=me,this.setFontSize(Fe),b==null)O=M=Object.keys(w[0]),V=M.map(function(){return"left"});else if(Array.isArray(b)&&$o(b[0])==="object")for(M=b.map(function(ke){return ke.name}),O=b.map(function(ke){return ke.prompt||ke.name||""}),V=b.map(function(ke){return ke.align||"left"}),v=0;v<b.length;v+=1)Z[b[v].name]=b[v].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(O=M=b,V=M.map(function(){return"left"}));if(oe||Array.isArray(b)&&typeof b[0]=="string")for(v=0;v<M.length;v+=1){for(G[S=M[v]]=w.map(function(ke){return ke[S]}),this.setFont(void 0,"bold"),te.push(this.getTextDimensions(O[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=G[S],this.setFont(void 0,"normal"),T=0;T<C.length;T+=1)te.push(this.getTextDimensions(C[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[S]=Math.max.apply(null,te)+Ie+Ie,te=[]}if(Me){var et={};for(v=0;v<M.length;v+=1)et[M[v]]={},et[M[v]].text=O[v],et[M[v]].align=V[v];var nt=r.call(this,et,Z);J=M.map(function(ke){return new u(f,_,Z[ke],nt,et[ke].text,void 0,et[ke].align)}),this.setTableHeaderRow(J),this.printHeaderRow(1,!1)}var Et=b.reduce(function(ke,Oe){return ke[Oe.name]=Oe.align,ke},{});for(v=0;v<w.length;v+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:v,data:w[v]},this);var it=r.call(this,w[v],Z);for(T=0;T<M.length;T+=1){var we=w[v][M[T]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:v,col:T,data:we},this),m.call(this,new u(f,_,Z[M[T]],it,we,v+2,Et[M[T]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=_,this};var r=function(f,_){var w=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(f).map(function(v){var C=f[v];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,_[v]-w-w)},this).map(function(v){return this.getLineHeightFactor()*v.length*b/x+w+w},this).reduce(function(v,C){return Math.max(v,C)},0)};i.setTableHeaderRow=function(f){o.call(this),this.internal.__cell__.tableHeaderRow=f},i.printHeaderRow=function(f,_){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){w=this.internal.__cell__.tableHeaderRow[v].clone(),_&&(w.y=this.internal.__cell__.margins.top||0,x.push(w)),w.lineNumber=f;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,w),this.setTextColor(C)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}}(Ur.API);var Mw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Dw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],z2=Pw(Dw),Ow=[100,200,300,400,500,600,700,800,900],d8=Pw(Ow);function N2(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(u){return Mw[u=u||"normal"]?u:"normal"}(i.style),o=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(i.weight),l=function(u){return typeof z2[u=u||"normal"]=="number"?u:"normal"}(i.stretch);return{family:e,style:t,weight:o,stretch:l,src:i.src||[],ref:i.ref||{name:e,style:[l,t,o].join(" ")}}}function n_(i,e,t,o){var l;for(l=t;l>=0&&l<e.length;l+=o)if(i[e[l]])return i[e[l]];for(l=t;l>=0&&l<e.length;l-=o)if(i[e[l]])return i[e[l]]}var p8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},r_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o_(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function m8(i,e,t){for(var o=(t=t||{}).defaultFontFamily||"times",l=Object.assign({},p8,t.genericFontFamilies||{}),u=null,m=null,r=0;r<e.length;++r)if(l[(u=N2(e[r])).family]&&(u.family=l[u.family]),i.hasOwnProperty(u.family)){m=i[u.family];break}if(!(m=m||i[o]))throw new Error("Could not find a font-family for the rule '"+o_(u)+"' and default family '"+o+"'.");if(m=function(f,_){if(_[f])return _[f];var w=z2[f],b=w<=z2.normal?-1:1,x=n_(_,Dw,w,b);if(!x)throw new Error("Could not find a matching font-stretch value for "+f);return x}(u.stretch,m),m=function(f,_){if(_[f])return _[f];for(var w=Mw[f],b=0;b<w.length;++b)if(_[w[b]])return _[w[b]];throw new Error("Could not find a matching font-style for "+f)}(u.style,m),!(m=function(f,_){if(_[f])return _[f];if(f===400&&_[500])return _[500];if(f===500&&_[400])return _[400];var w=d8[f],b=n_(_,Ow,w,f<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+f);return b}(u.weight,m)))throw new Error("Failed to resolve a font for the rule '"+o_(u)+"'.");return m}function s_(i){return i.trimLeft()}function g8(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function y8(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var Bp,a_,l_,Mm=["times"];(function(i){var e,t,o,l,u,m,r,f,_,w=function(le){return le=le||{},this.isStrokeTransparent=le.isStrokeTransparent||!1,this.strokeOpacity=le.strokeOpacity||1,this.strokeStyle=le.strokeStyle||"#000000",this.fillStyle=le.fillStyle||"#000000",this.isFillTransparent=le.isFillTransparent||!1,this.fillOpacity=le.fillOpacity||1,this.font=le.font||"10px sans-serif",this.textBaseline=le.textBaseline||"alphabetic",this.textAlign=le.textAlign||"left",this.lineWidth=le.lineWidth||1,this.lineJoin=le.lineJoin||"miter",this.lineCap=le.lineCap||"butt",this.path=le.path||[],this.transform=le.transform!==void 0?le.transform.clone():new f,this.globalCompositeOperation=le.globalCompositeOperation||"normal",this.globalAlpha=le.globalAlpha||1,this.clip_path=le.clip_path||[],this.currentPoint=le.currentPoint||new m,this.miterLimit=le.miterLimit||10,this.lastPoint=le.lastPoint||new m,this.lineDashOffset=le.lineDashOffset||0,this.lineDash=le.lineDash||[],this.margin=le.margin||[0,0,0,0],this.prevPageLastElemOffset=le.prevPageLastElemOffset||0,this.ignoreClearRect=typeof le.ignoreClearRect!="boolean"||le.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,m=this.internal.Point,r=this.internal.Rectangle,f=this.internal.Matrix,_=new w}]);var b=function(le){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ce=le;Object.defineProperty(this,"pdf",{get:function(){return Ce}});var he=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return he},set:function(vt){he=Boolean(vt)}});var ge=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ge},set:function(vt){ge=Boolean(vt)}});var Be=0;Object.defineProperty(this,"posX",{get:function(){return Be},set:function(vt){isNaN(vt)||(Be=vt)}});var We=0;Object.defineProperty(this,"posY",{get:function(){return We},set:function(vt){isNaN(vt)||(We=vt)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(vt){var Ke;typeof vt=="number"?Ke=[vt,vt,vt,vt]:((Ke=new Array(4))[0]=vt[0],Ke[1]=vt.length>=2?vt[1]:Ke[0],Ke[2]=vt.length>=3?vt[2]:Ke[0],Ke[3]=vt.length>=4?vt[3]:Ke[1]),_.margin=Ke}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(vt){st=vt}});var Xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Xe},set:function(vt){Xe=vt}});var gt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return gt},set:function(vt){gt=vt}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(vt){vt instanceof w&&(_=vt)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(vt){_.path=vt}});var Pt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pt},set:function(vt){Pt=vt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(vt){var Ke;Ke=x(vt),this.ctx.fillStyle=Ke.style,this.ctx.isFillTransparent=Ke.a===0,this.ctx.fillOpacity=Ke.a,this.pdf.setFillColor(Ke.r,Ke.g,Ke.b,{a:Ke.a}),this.pdf.setTextColor(Ke.r,Ke.g,Ke.b,{a:Ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(vt){var Ke=x(vt);this.ctx.strokeStyle=Ke.style,this.ctx.isStrokeTransparent=Ke.a===0,this.ctx.strokeOpacity=Ke.a,Ke.a===0?this.pdf.setDrawColor(255,255,255):(Ke.a,this.pdf.setDrawColor(Ke.r,Ke.g,Ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(vt){["butt","round","square"].indexOf(vt)!==-1&&(this.ctx.lineCap=vt,this.pdf.setLineCap(vt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(vt){isNaN(vt)||(this.ctx.lineWidth=vt,this.pdf.setLineWidth(vt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(vt){["bevel","round","miter"].indexOf(vt)!==-1&&(this.ctx.lineJoin=vt,this.pdf.setLineJoin(vt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(vt){isNaN(vt)||(this.ctx.miterLimit=vt,this.pdf.setMiterLimit(vt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(vt){this.ctx.textBaseline=vt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(vt){["right","end","center","left","start"].indexOf(vt)!==-1&&(this.ctx.textAlign=vt)}});var ri=null;function ut(vt,Ke){if(ri===null){var ei=function(li){var $t=[];return Object.keys(li).forEach(function(Si){li[Si].forEach(function(Ti){var Yt=null;switch(Ti){case"bold":Yt={family:Si,weight:"bold"};break;case"italic":Yt={family:Si,style:"italic"};break;case"bolditalic":Yt={family:Si,weight:"bold",style:"italic"};break;case"":case"normal":Yt={family:Si}}Yt!==null&&(Yt.ref={name:Si,style:Ti},$t.push(Yt))})}),$t}(vt.getFontList());ri=function(li){for(var $t={},Si=0;Si<li.length;++Si){var Ti=N2(li[Si]),Yt=Ti.family,mi=Ti.stretch,Wi=Ti.style,Ci=Ti.weight;$t[Yt]=$t[Yt]||{},$t[Yt][mi]=$t[Yt][mi]||{},$t[Yt][mi][Wi]=$t[Yt][mi][Wi]||{},$t[Yt][mi][Wi][Ci]=Ti}return $t}(ei.concat(Ke))}return ri}var bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return bt},set:function(vt){ri=null,bt=vt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(vt){var Ke;if(this.ctx.font=vt,(Ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(vt))!==null){var ei=Ke[1],li=(Ke[2],Ke[3]),$t=Ke[4],Si=(Ke[5],Ke[6]),Ti=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($t)[2];$t=Math.floor(Ti==="px"?parseFloat($t)*this.pdf.internal.scaleFactor:Ti==="em"?parseFloat($t)*this.pdf.getFontSize():parseFloat($t)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($t);var Yt=function(ae){var Qe,_t,Jt=[],di=ae.trim();if(di==="")return Mm;if(di in r_)return[r_[di]];for(;di!=="";){switch(_t=null,Qe=(di=s_(di)).charAt(0)){case'"':case"'":_t=g8(di.substring(1),Qe);break;default:_t=y8(di)}if(_t===null||(Jt.push(_t[0]),(di=s_(_t[1]))!==""&&di.charAt(0)!==","))return Mm;di=di.replace(/^,/,"")}return Jt}(Si);if(this.fontFaces){var mi=m8(ut(this.pdf,this.fontFaces),Yt.map(function(ae){return{family:ae,stretch:"normal",weight:li,style:ei}}));this.pdf.setFont(mi.ref.name,mi.ref.style)}else{var Wi="";(li==="bold"||parseInt(li,10)>=700||ei==="bold")&&(Wi="bold"),ei==="italic"&&(Wi+="italic"),Wi.length===0&&(Wi="normal");for(var Ci="",ti={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pe=0;Pe<Yt.length;Pe++){if(this.pdf.internal.getFont(Yt[Pe],Wi,{noFallback:!0,disableWarning:!0})!==void 0){Ci=Yt[Pe];break}if(Wi==="bolditalic"&&this.pdf.internal.getFont(Yt[Pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ci=Yt[Pe],Wi="bold";else if(this.pdf.internal.getFont(Yt[Pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ci=Yt[Pe],Wi="normal";break}}if(Ci===""){for(var Q=0;Q<Yt.length;Q++)if(ti[Yt[Q]]){Ci=ti[Yt[Q]];break}}Ci=Ci===""?"Times":Ci,this.pdf.setFont(Ci,Wi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(vt){this.ctx.globalCompositeOperation=vt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(vt){this.ctx.globalAlpha=vt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(vt){this.ctx.lineDashOffset=vt,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(vt){this.ctx.lineDash=vt,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(vt){this.ctx.ignoreClearRect=Boolean(vt)}})};b.prototype.setLineDash=function(le){this.lineDash=le},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){G.call(this,"fill",!1)},b.prototype.stroke=function(){G.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(le,Ce){if(isNaN(le)||isNaN(Ce))throw us.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var he=this.ctx.transform.applyToPoint(new m(le,Ce));this.path.push({type:"mt",x:he.x,y:he.y}),this.ctx.lastPoint=new m(le,Ce)},b.prototype.closePath=function(){var le=new m(0,0),Ce=0;for(Ce=this.path.length-1;Ce!==-1;Ce--)if(this.path[Ce].type==="begin"&&$o(this.path[Ce+1])==="object"&&typeof this.path[Ce+1].x=="number"){le=new m(this.path[Ce+1].x,this.path[Ce+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(le.x,le.y)},b.prototype.lineTo=function(le,Ce){if(isNaN(le)||isNaN(Ce))throw us.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var he=this.ctx.transform.applyToPoint(new m(le,Ce));this.path.push({type:"lt",x:he.x,y:he.y}),this.ctx.lastPoint=new m(he.x,he.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},b.prototype.quadraticCurveTo=function(le,Ce,he,ge){if(isNaN(he)||isNaN(ge)||isNaN(le)||isNaN(Ce))throw us.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Be=this.ctx.transform.applyToPoint(new m(he,ge)),We=this.ctx.transform.applyToPoint(new m(le,Ce));this.path.push({type:"qct",x1:We.x,y1:We.y,x:Be.x,y:Be.y}),this.ctx.lastPoint=new m(Be.x,Be.y)},b.prototype.bezierCurveTo=function(le,Ce,he,ge,Be,We){if(isNaN(Be)||isNaN(We)||isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge))throw us.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new m(Be,We)),Xe=this.ctx.transform.applyToPoint(new m(le,Ce)),gt=this.ctx.transform.applyToPoint(new m(he,ge));this.path.push({type:"bct",x1:Xe.x,y1:Xe.y,x2:gt.x,y2:gt.y,x:st.x,y:st.y}),this.ctx.lastPoint=new m(st.x,st.y)},b.prototype.arc=function(le,Ce,he,ge,Be,We){if(isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge)||isNaN(Be))throw us.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(We=Boolean(We),!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new m(le,Ce));le=st.x,Ce=st.y;var Xe=this.ctx.transform.applyToPoint(new m(0,he)),gt=this.ctx.transform.applyToPoint(new m(0,0));he=Math.sqrt(Math.pow(Xe.x-gt.x,2)+Math.pow(Xe.y-gt.y,2))}Math.abs(Be-ge)>=2*Math.PI&&(ge=0,Be=2*Math.PI),this.path.push({type:"arc",x:le,y:Ce,radius:he,startAngle:ge,endAngle:Be,counterclockwise:We})},b.prototype.arcTo=function(le,Ce,he,ge,Be){throw new Error("arcTo not implemented.")},b.prototype.rect=function(le,Ce,he,ge){if(isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge))throw us.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(le,Ce),this.lineTo(le+he,Ce),this.lineTo(le+he,Ce+ge),this.lineTo(le,Ce+ge),this.lineTo(le,Ce),this.lineTo(le+he,Ce),this.lineTo(le,Ce)},b.prototype.fillRect=function(le,Ce,he,ge){if(isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge))throw us.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var Be={};this.lineCap!=="butt"&&(Be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(le,Ce,he,ge),this.fill(),Be.hasOwnProperty("lineCap")&&(this.lineCap=Be.lineCap),Be.hasOwnProperty("lineJoin")&&(this.lineJoin=Be.lineJoin)}},b.prototype.strokeRect=function(le,Ce,he,ge){if(isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge))throw us.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(le,Ce,he,ge),this.stroke())},b.prototype.clearRect=function(le,Ce,he,ge){if(isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge))throw us.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(le,Ce,he,ge))},b.prototype.save=function(le){le=typeof le!="boolean"||le;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ce),le){this.ctx.fontSize=this.pdf.internal.getFontSize();var ge=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ge}},b.prototype.restore=function(le){le=typeof le!="boolean"||le;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("Q");this.pdf.setPage(Ce),le&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(le){var Ce,he,ge,Be;if(le.isCanvasGradient===!0&&(le=le.getColor()),!le)return{r:0,g:0,b:0,a:0,style:le};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(le))Ce=0,he=0,ge=0,Be=0;else{var We=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(le);if(We!==null)Ce=parseInt(We[1]),he=parseInt(We[2]),ge=parseInt(We[3]),Be=1;else if((We=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(le))!==null)Ce=parseInt(We[1]),he=parseInt(We[2]),ge=parseInt(We[3]),Be=parseFloat(We[4]);else{if(Be=1,typeof le=="string"&&le.charAt(0)!=="#"){var st=new Sw(le);le=st.ok?st.toHex():"#000000"}le.length===4?(Ce=le.substring(1,2),Ce+=Ce,he=le.substring(2,3),he+=he,ge=le.substring(3,4),ge+=ge):(Ce=le.substring(1,3),he=le.substring(3,5),ge=le.substring(5,7)),Ce=parseInt(Ce,16),he=parseInt(he,16),ge=parseInt(ge,16)}}return{r:Ce,g:he,b:ge,a:Be,style:le}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(le,Ce,he,ge){if(isNaN(Ce)||isNaN(he)||typeof le!="string")throw us.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ge=isNaN(ge)?void 0:ge,!v.call(this)){var Be=it(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;Ie.call(this,{text:le,x:Ce,y:he,scale:We,angle:Be,align:this.textAlign,maxWidth:ge})}},b.prototype.strokeText=function(le,Ce,he,ge){if(isNaN(Ce)||isNaN(he)||typeof le!="string")throw us.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){ge=isNaN(ge)?void 0:ge;var Be=it(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;Ie.call(this,{text:le,x:Ce,y:he,scale:We,renderingMode:"stroke",angle:Be,align:this.textAlign,maxWidth:ge})}},b.prototype.measureText=function(le){if(typeof le!="string")throw us.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ce=this.pdf,he=this.pdf.internal.scaleFactor,ge=Ce.internal.getFontSize(),Be=Ce.getStringUnitWidth(le)*ge/Ce.internal.scaleFactor,We=function(st){var Xe=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Xe}}),this};return new We({width:Be*=Math.round(96*he/72*1e4)/1e4})},b.prototype.scale=function(le,Ce){if(isNaN(le)||isNaN(Ce))throw us.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var he=new f(le,0,0,Ce,0,0);this.ctx.transform=this.ctx.transform.multiply(he)},b.prototype.rotate=function(le){if(isNaN(le))throw us.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ce=new f(Math.cos(le),Math.sin(le),-Math.sin(le),Math.cos(le),0,0);this.ctx.transform=this.ctx.transform.multiply(Ce)},b.prototype.translate=function(le,Ce){if(isNaN(le)||isNaN(Ce))throw us.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var he=new f(1,0,0,1,le,Ce);this.ctx.transform=this.ctx.transform.multiply(he)},b.prototype.transform=function(le,Ce,he,ge,Be,We){if(isNaN(le)||isNaN(Ce)||isNaN(he)||isNaN(ge)||isNaN(Be)||isNaN(We))throw us.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new f(le,Ce,he,ge,Be,We);this.ctx.transform=this.ctx.transform.multiply(st)},b.prototype.setTransform=function(le,Ce,he,ge,Be,We){le=isNaN(le)?1:le,Ce=isNaN(Ce)?0:Ce,he=isNaN(he)?0:he,ge=isNaN(ge)?1:ge,Be=isNaN(Be)?0:Be,We=isNaN(We)?0:We,this.ctx.transform=new f(le,Ce,he,ge,Be,We)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(le,Ce,he,ge,Be,We,st,Xe,gt){var Pt=this.pdf.getImageProperties(le),ri=1,ut=1,bt=1,vt=1;ge!==void 0&&Xe!==void 0&&(bt=Xe/ge,vt=gt/Be,ri=Pt.width/ge*Xe/ge,ut=Pt.height/Be*gt/Be),We===void 0&&(We=Ce,st=he,Ce=0,he=0),ge!==void 0&&Xe===void 0&&(Xe=ge,gt=Be),ge===void 0&&Xe===void 0&&(Xe=Pt.width,gt=Pt.height);for(var Ke,ei=this.ctx.transform.decompose(),li=it(ei.rotate.shx),$t=new f,Si=($t=($t=($t=$t.multiply(ei.translate)).multiply(ei.skew)).multiply(ei.scale)).applyToRectangle(new r(We-Ce*bt,st-he*vt,ge*ri,Be*ut)),Ti=S.call(this,Si),Yt=[],mi=0;mi<Ti.length;mi+=1)Yt.indexOf(Ti[mi])===-1&&Yt.push(Ti[mi]);if(V(Yt),this.autoPaging)for(var Wi=Yt[0],Ci=Yt[Yt.length-1],ti=Wi;ti<Ci+1;ti++){this.pdf.setPage(ti);var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Q=ti===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=ti===1?0:ae+(ti-2)*Qe;if(this.ctx.clip_path.length!==0){var Jt=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ke,this.posX+this.margin[3],-_t+Q+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=Jt}var di=JSON.parse(JSON.stringify(Si));di=O([di],this.posX+this.margin[3],-_t+Q+this.ctx.prevPageLastElemOffset)[0];var wn=(ti>Wi||ti<Ci)&&T.call(this);wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,Qe,null).clip().discardPath()),this.pdf.addImage(le,"JPEG",di.x,di.y,di.w,di.h,null,null,li),wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(le,"JPEG",Si.x,Si.y,Si.w,Si.h,null,null,li)};var S=function(le,Ce,he){var ge=[];Ce=Ce||this.pdf.internal.pageSize.width,he=he||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Be=this.posY+this.ctx.prevPageLastElemOffset;switch(le.type){default:case"mt":case"lt":ge.push(Math.floor((le.y+Be)/he)+1);break;case"arc":ge.push(Math.floor((le.y+Be-le.radius)/he)+1),ge.push(Math.floor((le.y+Be+le.radius)/he)+1);break;case"qct":var We=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,le.x1,le.y1,le.x,le.y);ge.push(Math.floor((We.y+Be)/he)+1),ge.push(Math.floor((We.y+We.h+Be)/he)+1);break;case"bct":var st=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,le.x1,le.y1,le.x2,le.y2,le.x,le.y);ge.push(Math.floor((st.y+Be)/he)+1),ge.push(Math.floor((st.y+st.h+Be)/he)+1);break;case"rect":ge.push(Math.floor((le.y+Be)/he)+1),ge.push(Math.floor((le.y+le.h+Be)/he)+1)}for(var Xe=0;Xe<ge.length;Xe+=1)for(;this.pdf.internal.getNumberOfPages()<ge[Xe];)M.call(this);return ge},M=function(){var le=this.fillStyle,Ce=this.strokeStyle,he=this.font,ge=this.lineCap,Be=this.lineWidth,We=this.lineJoin;this.pdf.addPage(),this.fillStyle=le,this.strokeStyle=Ce,this.font=he,this.lineCap=ge,this.lineWidth=Be,this.lineJoin=We},O=function(le,Ce,he){for(var ge=0;ge<le.length;ge++)switch(le[ge].type){case"bct":le[ge].x2+=Ce,le[ge].y2+=he;case"qct":le[ge].x1+=Ce,le[ge].y1+=he;case"mt":case"lt":case"arc":default:le[ge].x+=Ce,le[ge].y+=he}return le},V=function(le){return le.sort(function(Ce,he){return Ce-he})},G=function(le,Ce){for(var he,ge,Be=this.fillStyle,We=this.strokeStyle,st=this.lineCap,Xe=this.lineWidth,gt=Math.abs(Xe*this.ctx.transform.scaleX),Pt=this.lineJoin,ri=JSON.parse(JSON.stringify(this.path)),ut=JSON.parse(JSON.stringify(this.path)),bt=[],vt=0;vt<ut.length;vt++)if(ut[vt].x!==void 0)for(var Ke=S.call(this,ut[vt]),ei=0;ei<Ke.length;ei+=1)bt.indexOf(Ke[ei])===-1&&bt.push(Ke[ei]);for(var li=0;li<bt.length;li++)for(;this.pdf.internal.getNumberOfPages()<bt[li];)M.call(this);if(V(bt),this.autoPaging)for(var $t=bt[0],Si=bt[bt.length-1],Ti=$t;Ti<Si+1;Ti++){this.pdf.setPage(Ti),this.fillStyle=Be,this.strokeStyle=We,this.lineCap=st,this.lineWidth=gt,this.lineJoin=Pt;var Yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mi=Ti===1?this.posY+this.margin[0]:this.margin[0],Wi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ci=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ti=Ti===1?0:Wi+(Ti-2)*Ci;if(this.ctx.clip_path.length!==0){var Pe=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(he,this.posX+this.margin[3],-ti+mi+this.ctx.prevPageLastElemOffset),Z.call(this,le,!0),this.path=Pe}if(ge=JSON.parse(JSON.stringify(ri)),this.path=O(ge,this.posX+this.margin[3],-ti+mi+this.ctx.prevPageLastElemOffset),Ce===!1||Ti===0){var Q=(Ti>$t||Ti<Si)&&T.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,Ci,null).clip().discardPath()),Z.call(this,le,Ce),Q&&this.pdf.restoreGraphicsState()}this.lineWidth=Xe}else this.lineWidth=gt,Z.call(this,le,Ce),this.lineWidth=Xe;this.path=ri},Z=function(le,Ce){if((le!=="stroke"||Ce||!C.call(this))&&(le==="stroke"||Ce||!v.call(this))){for(var he,ge,Be=[],We=this.path,st=0;st<We.length;st++){var Xe=We[st];switch(Xe.type){case"begin":Be.push({begin:!0});break;case"close":Be.push({close:!0});break;case"mt":Be.push({start:Xe,deltas:[],abs:[]});break;case"lt":var gt=Be.length;if(We[st-1]&&!isNaN(We[st-1].x)&&(he=[Xe.x-We[st-1].x,Xe.y-We[st-1].y],gt>0)){for(;gt>=0;gt--)if(Be[gt-1].close!==!0&&Be[gt-1].begin!==!0){Be[gt-1].deltas.push(he),Be[gt-1].abs.push(Xe);break}}break;case"bct":he=[Xe.x1-We[st-1].x,Xe.y1-We[st-1].y,Xe.x2-We[st-1].x,Xe.y2-We[st-1].y,Xe.x-We[st-1].x,Xe.y-We[st-1].y],Be[Be.length-1].deltas.push(he);break;case"qct":var Pt=We[st-1].x+2/3*(Xe.x1-We[st-1].x),ri=We[st-1].y+2/3*(Xe.y1-We[st-1].y),ut=Xe.x+2/3*(Xe.x1-Xe.x),bt=Xe.y+2/3*(Xe.y1-Xe.y),vt=Xe.x,Ke=Xe.y;he=[Pt-We[st-1].x,ri-We[st-1].y,ut-We[st-1].x,bt-We[st-1].y,vt-We[st-1].x,Ke-We[st-1].y],Be[Be.length-1].deltas.push(he);break;case"arc":Be.push({deltas:[],abs:[],arc:!0}),Array.isArray(Be[Be.length-1].abs)&&Be[Be.length-1].abs.push(Xe)}}ge=Ce?null:le==="stroke"?"stroke":"fill";for(var ei=!1,li=0;li<Be.length;li++)if(Be[li].arc)for(var $t=Be[li].abs,Si=0;Si<$t.length;Si++){var Ti=$t[Si];Ti.type==="arc"?oe.call(this,Ti.x,Ti.y,Ti.radius,Ti.startAngle,Ti.endAngle,Ti.counterclockwise,void 0,Ce,!ei):Se.call(this,Ti.x,Ti.y),ei=!0}else if(Be[li].close===!0)this.pdf.internal.out("h"),ei=!1;else if(Be[li].begin!==!0){var Yt=Be[li].start.x,mi=Be[li].start.y;me.call(this,Be[li].deltas,Yt,mi),ei=!0}ge&&Me.call(this,ge),Ce&&Fe.call(this)}},te=function(le){var Ce=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,he=Ce*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return le-he;case"top":return le+Ce-he;case"hanging":return le+Ce-2*he;case"middle":return le+Ce/2-he;case"ideographic":return le;case"alphabetic":default:return le}},J=function(le){return le+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var le=function(){};return le.colorStops=[],le.addColorStop=function(Ce,he){this.colorStops.push([Ce,he])},le.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},le.isCanvasGradient=!0,le},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var oe=function(le,Ce,he,ge,Be,We,st,Xe,gt){for(var Pt=nt.call(this,he,ge,Be,We),ri=0;ri<Pt.length;ri++){var ut=Pt[ri];ri===0&&(gt?pe.call(this,ut.x1+le,ut.y1+Ce):Se.call(this,ut.x1+le,ut.y1+Ce)),et.call(this,le,Ce,ut.x2,ut.y2,ut.x3,ut.y3,ut.x4,ut.y4)}Xe?Fe.call(this):Me.call(this,st)},Me=function(le){switch(le){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Fe=function(){this.pdf.clip(),this.pdf.discardPath()},pe=function(le,Ce){this.pdf.internal.out(t(le)+" "+o(Ce)+" m")},Ie=function(le){var Ce;switch(le.align){case"right":case"end":Ce="right";break;case"center":Ce="center";break;case"left":case"start":default:Ce="left"}var he=this.pdf.getTextDimensions(le.text),ge=te.call(this,le.y),Be=J.call(this,ge)-he.h,We=this.ctx.transform.applyToPoint(new m(le.x,ge)),st=this.ctx.transform.decompose(),Xe=new f;Xe=(Xe=(Xe=Xe.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var gt,Pt,ri,ut=this.ctx.transform.applyToRectangle(new r(le.x,ge,he.w,he.h)),bt=Xe.applyToRectangle(new r(le.x,Be,he.w,he.h)),vt=S.call(this,bt),Ke=[],ei=0;ei<vt.length;ei+=1)Ke.indexOf(vt[ei])===-1&&Ke.push(vt[ei]);if(V(Ke),this.autoPaging)for(var li=Ke[0],$t=Ke[Ke.length-1],Si=li;Si<$t+1;Si++){this.pdf.setPage(Si);var Ti=Si===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mi=this.pdf.internal.pageSize.height-this.margin[2],Wi=mi-this.margin[0],Ci=this.pdf.internal.pageSize.width-this.margin[1],ti=Ci-this.margin[3],Pe=Si===1?0:Yt+(Si-2)*Wi;if(this.ctx.clip_path.length!==0){var Q=this.path;gt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(gt,this.posX+this.margin[3],-1*Pe+Ti),Z.call(this,"fill",!0),this.path=Q}var ae=O([JSON.parse(JSON.stringify(bt))],this.posX+this.margin[3],-Pe+Ti+this.ctx.prevPageLastElemOffset)[0];le.scale>=.01&&(Pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pt*le.scale),ri=this.lineWidth,this.lineWidth=ri*le.scale);var Qe=this.autoPaging!=="text";if(Qe||ae.y+ae.h<=mi){if(Qe||ae.y>=Ti&&ae.x<=Ci){var _t=Qe?le.text:this.pdf.splitTextToSize(le.text,le.maxWidth||Ci-ae.x)[0],Jt=O([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-Pe+Ti+this.ctx.prevPageLastElemOffset)[0],di=Qe&&(Si>li||Si<$t)&&T.call(this);di&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ti,Wi,null).clip().discardPath()),this.pdf.text(_t,Jt.x,Jt.y,{angle:le.angle,align:Ce,renderingMode:le.renderingMode}),di&&this.pdf.restoreGraphicsState()}}else ae.y<mi&&(this.ctx.prevPageLastElemOffset+=mi-ae.y);le.scale>=.01&&(this.pdf.setFontSize(Pt),this.lineWidth=ri)}else le.scale>=.01&&(Pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pt*le.scale),ri=this.lineWidth,this.lineWidth=ri*le.scale),this.pdf.text(le.text,We.x+this.posX,We.y+this.posY,{angle:le.angle,align:Ce,renderingMode:le.renderingMode,maxWidth:le.maxWidth}),le.scale>=.01&&(this.pdf.setFontSize(Pt),this.lineWidth=ri)},Se=function(le,Ce,he,ge){he=he||0,ge=ge||0,this.pdf.internal.out(t(le+he)+" "+o(Ce+ge)+" l")},me=function(le,Ce,he){return this.pdf.lines(le,Ce,he,null,null)},et=function(le,Ce,he,ge,Be,We,st,Xe){this.pdf.internal.out([e(l(he+le)),e(u(ge+Ce)),e(l(Be+le)),e(u(We+Ce)),e(l(st+le)),e(u(Xe+Ce)),"c"].join(" "))},nt=function(le,Ce,he,ge){for(var Be=2*Math.PI,We=Math.PI/2;Ce>he;)Ce-=Be;var st=Math.abs(he-Ce);st<Be&&ge&&(st=Be-st);for(var Xe=[],gt=ge?-1:1,Pt=Ce;st>1e-5;){var ri=Pt+gt*Math.min(st,We);Xe.push(Et.call(this,le,Pt,ri)),st-=Math.abs(ri-Pt),Pt=ri}return Xe},Et=function(le,Ce,he){var ge=(he-Ce)/2,Be=le*Math.cos(ge),We=le*Math.sin(ge),st=Be,Xe=-We,gt=st*st+Xe*Xe,Pt=gt+st*Be+Xe*We,ri=4/3*(Math.sqrt(2*gt*Pt)-Pt)/(st*We-Xe*Be),ut=st-ri*Xe,bt=Xe+ri*st,vt=ut,Ke=-bt,ei=ge+Ce,li=Math.cos(ei),$t=Math.sin(ei);return{x1:le*Math.cos(Ce),y1:le*Math.sin(Ce),x2:ut*li-bt*$t,y2:ut*$t+bt*li,x3:vt*li-Ke*$t,y3:vt*$t+Ke*li,x4:le*Math.cos(he),y4:le*Math.sin(he)}},it=function(le){return 180*le/Math.PI},we=function(le,Ce,he,ge,Be,We){var st=le+.5*(he-le),Xe=Ce+.5*(ge-Ce),gt=Be+.5*(he-Be),Pt=We+.5*(ge-We),ri=Math.min(le,Be,st,gt),ut=Math.max(le,Be,st,gt),bt=Math.min(Ce,We,Xe,Pt),vt=Math.max(Ce,We,Xe,Pt);return new r(ri,bt,ut-ri,vt-bt)},ke=function(le,Ce,he,ge,Be,We,st,Xe){var gt,Pt,ri,ut,bt,vt,Ke,ei,li,$t,Si,Ti,Yt,mi,Wi=he-le,Ci=ge-Ce,ti=Be-he,Pe=We-ge,Q=st-Be,ae=Xe-We;for(Pt=0;Pt<41;Pt++)li=(Ke=(ri=le+(gt=Pt/40)*Wi)+gt*((bt=he+gt*ti)-ri))+gt*(bt+gt*(Be+gt*Q-bt)-Ke),$t=(ei=(ut=Ce+gt*Ci)+gt*((vt=ge+gt*Pe)-ut))+gt*(vt+gt*(We+gt*ae-vt)-ei),Pt==0?(Si=li,Ti=$t,Yt=li,mi=$t):(Si=Math.min(Si,li),Ti=Math.min(Ti,$t),Yt=Math.max(Yt,li),mi=Math.max(mi,$t));return new r(Math.round(Si),Math.round(Ti),Math.round(Yt-Si),Math.round(mi-Ti))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var le,Ce,he=(le=this.ctx.lineDash,Ce=this.ctx.lineDashOffset,JSON.stringify({lineDash:le,lineDashOffset:Ce}));this.prevLineDash!==he&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=he)}}})(Ur.API),function(i){var e=function(u){var m,r,f,_,w,b,x,v,C,T;for(/[^\x00-\xFF]/.test(u),r=[],f=0,_=(u+=m="\0\0\0\0".slice(u.length%4||4)).length;_>f;f+=4)(w=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(b=(w=((w=((w=((w=(w-(T=w%85))/85)-(C=w%85))/85)-(v=w%85))/85)-(x=w%85))/85)%85,r.push(b+33,x+33,v+33,C+33,T+33)):r.push(122);return function(S,M){for(var O=M;O>0;O--)S.pop()}(r,m.length),String.fromCharCode.apply(String,r)+"~>"},t=function(u){var m,r,f,_,w,b=String,x="length",v=255,C="charCodeAt",T="slice",S="replace";for(u[T](-2),u=u[T](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],_=0,w=(u+=m="uuuuu"[T](u[x]%5||5))[x];w>_;_+=5)r=52200625*(u[C](_)-33)+614125*(u[C](_+1)-33)+7225*(u[C](_+2)-33)+85*(u[C](_+3)-33)+(u[C](_+4)-33),f.push(v&r>>24,v&r>>16,v&r>>8,v&r);return function(M,O){for(var V=O;V>0;V--)M.pop()}(f,m[x]),b.fromCharCode.apply(b,f)},o=function(u){var m=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),m.test(u)===!1)return"";for(var r="",f=0;f<u.length;f+=2)r+=String.fromCharCode("0x"+(u[f]+u[f+1]));return r},l=function(u){for(var m=new Uint8Array(u.length),r=u.length;r--;)m[r]=u.charCodeAt(r);return u=(m=D2(m)).reduce(function(f,_){return f+String.fromCharCode(_)},"")};i.processDataByFilters=function(u,m){var r=0,f=u||"",_=[];for(typeof(m=m||[])=="string"&&(m=[m]),r=0;r<m.length;r+=1)switch(m[r]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=o(f),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=l(f),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+m[r]+'" is not implemented')}return{data:f,reverseChain:_.reverse().join(" ")}}}(Ur.API),function(i){i.loadFile=function(e,t,o){return function(l,u,m){u=u!==!1,m=typeof m=="function"?m:function(){};var r=void 0;try{r=function(f,_,w){var b=new XMLHttpRequest,x=0,v=function(C){var T=C.length,S=[],M=String.fromCharCode;for(x=0;x<T;x+=1)S.push(M(255&C.charCodeAt(x)));return S.join("")};if(b.open("GET",f,!_),b.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(b.onload=function(){b.status===200?w(v(this.responseText)):w(void 0)}),b.send(null),_&&b.status===200)return v(b.responseText)}(l,u,m)}catch{}return r}(e,t,o)},i.loadImageFile=i.loadFile}(Ur.API),function(i){function e(){return(Vr.html2canvas?Promise.resolve(Vr.html2canvas):h1(()=>import("./html2canvas.esm-fb42d204.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load html2canvas: "+m))}).then(function(m){return m.default?m.default:m})}function t(){return(Vr.DOMPurify?Promise.resolve(Vr.DOMPurify):h1(()=>import("./purify.es-20117e50.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load dompurify: "+m))}).then(function(m){return m.default?m.default:m})}var o=function(m){var r=$o(m);return r==="undefined"?"undefined":r==="string"||m instanceof String?"string":r==="number"||m instanceof Number?"number":r==="function"||m instanceof Function?"function":m&&m.constructor===Array?"array":m&&m.nodeType===1?"element":r==="object"?"object":"unknown"},l=function(m,r){var f=document.createElement(m);for(var _ in r.className&&(f.className=r.className),r.innerHTML&&r.dompurify&&(f.innerHTML=r.dompurify.sanitize(r.innerHTML)),r.style)f.style[_]=r.style[_];return f},u=function m(r){var f=Object.assign(m.convert(Promise.resolve()),JSON.parse(JSON.stringify(m.template))),_=m.convert(Promise.resolve(),f);return _=(_=_.setProgress(1,m,1,[m])).set(r)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(m,r){return m.__proto__=r||u.prototype,m},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(m,r){return this.then(function(){switch(r=r||function(f){switch(o(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(m)){case"string":return this.then(t).then(function(f){return this.set({src:l("div",{innerHTML:m,dompurify:f})})});case"element":return this.set({src:m});case"canvas":return this.set({canvas:m});case"img":return this.set({img:m});default:return this.error("Unknown source type.")}})},u.prototype.to=function(m){switch(m){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var m={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},r=function f(_,w){for(var b=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),x=_.firstChild;x;x=x.nextSibling)w!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||b.appendChild(f(x,w));return _.nodeType===1&&(_.nodeName==="CANVAS"?(b.width=_.width,b.height=_.height,b.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(b.value=_.value),b.addEventListener("load",function(){b.scrollTop=_.scrollTop,b.scrollLeft=_.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);r.tagName==="BODY"&&(m.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:m}),this.prop.container.appendChild(r),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(e).then(function(r){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,r(this.prop.container,f)}).then(function(r){(this.opt.html2canvas.onrendered||function(){})(r),this.prop.canvas=r,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(e).then(function(r){var f=this.opt.jsPDF,_=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=_,_)for(var x=0;x<_.length;++x){var v=_[x],C=v.src.find(function(T){return T.format==="truetype"});C&&f.addFont(C.url,v.ref.name,v.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,f.context2d.save(!0),r(this.prop.container,b)}).then(function(r){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(r),this.prop.canvas=r,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var m=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=m})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(m,r,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(m,r):this.outputPdf(m,r)},u.prototype.outputPdf=function(m,r){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(m,r)})},u.prototype.outputImg=function(m){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(m){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+m+'" is not supported.'}})},u.prototype.save=function(m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(m?{filename:m}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(m){if(o(m)!=="object")return this;var r=Object.keys(m||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=m[f]};switch(f){case"margin":return this.setMargin.bind(this,m.margin);case"jsPDF":return function(){return this.opt.jsPDF=m.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,m.pageSize);default:return function(){this.opt[f]=m[f]}}},this);return this.then(function(){return this.thenList(r)})},u.prototype.get=function(m,r){return this.then(function(){var f=m in u.template.prop?this.prop[m]:this.opt[m];return r?r(f):f})},u.prototype.setMargin=function(m){return this.then(function(){switch(o(m)){case"number":m=[m,m,m,m];case"array":if(m.length===2&&(m=[m[0],m[1],m[0],m[1]]),m.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=m}).then(this.setPageSize)},u.prototype.setPageSize=function(m){function r(f,_){return Math.floor(f*_/72*96)}return this.then(function(){(m=m||Ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(m.inner={width:m.width-this.opt.margin[1]-this.opt.margin[3],height:m.height-this.opt.margin[0]-this.opt.margin[2]},m.inner.px={width:r(m.inner.width,m.k),height:r(m.inner.height,m.k)},m.inner.ratio=m.inner.height/m.inner.width),this.prop.pageSize=m})},u.prototype.setProgress=function(m,r,f,_){return m!=null&&(this.progress.val=m),r!=null&&(this.progress.state=r),f!=null&&(this.progress.n=f),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(m,r,f,_){return this.setProgress(m?this.progress.val+m:null,r||null,f?this.progress.n+f:null,_?this.progress.stack.concat(_):null)},u.prototype.then=function(m,r){var f=this;return this.thenCore(m,r,function(_,w){return f.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(b){return f.updateProgress(null,_),b}).then(_,w).then(function(b){return f.updateProgress(1),b})})},u.prototype.thenCore=function(m,r,f){f=f||Promise.prototype.then,m&&(m=m.bind(this)),r&&(r=r.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),w=f.call(_,m,r);return u.convert(w,this.__proto__)},u.prototype.thenExternal=function(m,r){return Promise.prototype.then.call(this,m,r)},u.prototype.thenList=function(m){var r=this;return m.forEach(function(f){r=r.thenCore(f)}),r},u.prototype.catch=function(m){m&&(m=m.bind(this));var r=Promise.prototype.catch.call(this,m);return u.convert(r,this)},u.prototype.catchExternal=function(m){return Promise.prototype.catch.call(this,m)},u.prototype.error=function(m){return this.then(function(){throw new Error(m)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ur.getPageSize=function(m,r,f){if($o(m)==="object"){var _=m;m=_.orientation,r=_.unit||r,f=_.format||f}r=r||"mm",f=f||"a4",m=(""+(m||"P")).toLowerCase();var w,b=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(r){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+r}var v,C=0,T=0;if(x.hasOwnProperty(b))C=x[b][1]/w,T=x[b][0]/w;else try{C=f[1],T=f[0]}catch{throw new Error("Invalid format: "+f)}if(m==="p"||m==="portrait")m="p",T>C&&(v=T,T=C,C=v);else{if(m!=="l"&&m!=="landscape")throw"Invalid orientation: "+m;m="l",C>T&&(v=T,T=C,C=v)}return{width:T,height:C,unit:r,k:w,orientation:m}},i.html=function(m,r){(r=r||{}).callback=r.callback||function(){},r.html2canvas=r.html2canvas||{},r.html2canvas.canvas=r.html2canvas.canvas||this.canvas,r.jsPDF=r.jsPDF||this,r.fontFaces=r.fontFaces?r.fontFaces.map(N2):null;var f=new u(r);return r.worker?f:f.from(m).doCallback()}}(Ur.API),Ur.API.addJS=function(i){return l_=i,this.internal.events.subscribe("postPutResources",function(){Bp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),a_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+l_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bp!==void 0&&a_!==void 0&&this.internal.out("/Names <</JavaScript "+Bp+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=t.outline.render().split(/\r\n/),u=0;u<l.length;u++){var m=l[u],r=o.exec(m);if(r!=null){var f=r[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(m)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,w=[];for(u=0;u<_;u++){var b=t.internal.newObject();w.push(b);var x=t.internal.getPageInfo(u+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),u=0;u<w.length;u++)t.internal.write("(page_"+(u+1)+")"+w[u]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(o,l,u){var m={title:l,options:u,children:[]};return o==null&&(o=this.root),o.children.push(m),m},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(o){o.id=t.internal.newObjectDeferred();for(var l=0;l<o.children.length;l++)this.genIds_r(o.children[l])},t.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},t.outline.renderItems=function(o){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<o.children.length;u++){var m=o.children[u];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(o)),u>0&&this.line("/Prev "+this.makeRef(o.children[u-1])),u<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[u+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var r=this.count=this.count_r({count:0},m);if(r>0&&this.line("/Count "+r),m.options&&m.options.pageNumber){var f=t.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var _=0;_<o.children.length;_++)this.renderItems(o.children[_])},t.outline.line=function(o){this.ctx.val+=o+`\r
`},t.outline.makeRef=function(o){return o.id+" 0 R"},t.outline.makeString=function(o){return"("+t.internal.pdfEscape(o)+")"},t.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(o,l){for(var u=0;u<l.children.length;u++)o.count++,this.count_r(o,l.children[u]);return o.count}}])}(Ur.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,o,l,u,m,r){var f,_=this.decode.DCT_DECODE,w=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=m||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(b){for(var x,v=256*b.charCodeAt(4)+b.charCodeAt(5),C=b.length,T={width:0,height:0,numcomponents:1},S=4;S<C;S+=2){if(S+=v,e.indexOf(b.charCodeAt(S+1))!==-1){x=256*b.charCodeAt(S+5)+b.charCodeAt(S+6),T={width:256*b.charCodeAt(S+7)+b.charCodeAt(S+8),height:x,numcomponents:b.charCodeAt(S+9)};break}v=256*b.charCodeAt(S+2)+b.charCodeAt(S+3)}return T}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:r=this.color_spaces.DEVICE_GRAY;break;case 4:r=this.color_spaces.DEVICE_CMYK;break;case 3:r=this.color_spaces.DEVICE_RGB}w={data:t,width:f.width,height:f.height,colorSpace:r,bitsPerComponent:8,filter:_,index:o,alias:l}}return w}}(Ur.API);var x0,zp,u_,c_,h_,_8=function(){var i,e,t;function o(u){var m,r,f,_,w,b,x,v,C,T,S,M,O,V;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(m=this.readUInt32(),C=function(){var G,Z;for(Z=[],G=0;G<4;++G)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(m);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),_=this.readUInt16()||100,b.delay=1e3*w/_,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,m-=4),u=(b!=null?b.data:void 0)||this.imgData,M=0;0<=m?M<m:M>m;0<=m?++M:--M)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(m),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((T=f-this.transparency.indexed.length)>0)for(O=0;0<=T?O<T:O>T;0<=T?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(m)[0];break;case 2:this.transparency.rgb=this.read(m)}break;case"tEXt":x=(S=this.read(m)).indexOf(0),v=String.fromCharCode.apply(String,S.slice(0,x)),this.text[v]=String.fromCharCode.apply(String,S.slice(x+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=m}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(u){var m,r;for(r=[],m=0;0<=u?m<u:m>u;0<=u?++m:--m)r.push(this.data[this.pos++]);return r},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(u){var m=this.pixelBitlength/8,r=new Uint8Array(this.width*this.height*m),f=0,_=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function w(b,x,v,C){var T,S,M,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we,ke=Math.ceil((_.width-b)/v),Oe=Math.ceil((_.height-x)/C),le=_.width==ke&&_.height==Oe;for(Ie=m*ke,Fe=le?r:new Uint8Array(Ie*Oe),G=u.length,pe=0,S=0;pe<Oe&&f<G;){switch(u[f++]){case 0:for(O=et=0;et<Ie;O=et+=1)Fe[S++]=u[f++];break;case 1:for(O=nt=0;nt<Ie;O=nt+=1)T=u[f++],V=O<m?0:Fe[S-m],Fe[S++]=(T+V)%256;break;case 2:for(O=Et=0;Et<Ie;O=Et+=1)T=u[f++],M=(O-O%m)/m,Se=pe&&Fe[(pe-1)*Ie+M*m+O%m],Fe[S++]=(Se+T)%256;break;case 3:for(O=it=0;it<Ie;O=it+=1)T=u[f++],M=(O-O%m)/m,V=O<m?0:Fe[S-m],Se=pe&&Fe[(pe-1)*Ie+M*m+O%m],Fe[S++]=(T+Math.floor((V+Se)/2))%256;break;case 4:for(O=we=0;we<Ie;O=we+=1)T=u[f++],M=(O-O%m)/m,V=O<m?0:Fe[S-m],pe===0?Se=me=0:(Se=Fe[(pe-1)*Ie+M*m+O%m],me=M&&Fe[(pe-1)*Ie+(M-1)*m+O%m]),Z=V+Se-me,te=Math.abs(Z-V),oe=Math.abs(Z-Se),Me=Math.abs(Z-me),J=te<=oe&&te<=Me?V:oe<=Me?Se:me,Fe[S++]=(T+J)%256;break;default:throw new Error("Invalid filter algorithm: "+u[f-1])}if(!le){var Ce=((x+pe*C)*_.width+b)*m,he=pe*Ie;for(O=0;O<ke;O+=1){for(var ge=0;ge<m;ge+=1)r[Ce++]=Fe[he++];Ce+=(v-1)*m}}pe++}}return u=Q6(u),_.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),r},o.prototype.decodePalette=function(){var u,m,r,f,_,w,b,x,v;for(r=this.palette,w=this.transparency.indexed||[],_=new Uint8Array((w.length||0)+r.length),f=0,u=0,m=b=0,x=r.length;b<x;m=b+=3)_[f++]=r[m],_[f++]=r[m+1],_[f++]=r[m+2],_[f++]=(v=w[u++])!=null?v:255;return _},o.prototype.copyToImageData=function(u,m){var r,f,_,w,b,x,v,C,T,S,M;if(f=this.colors,T=null,r=this.hasAlphaChannel,this.palette.length&&(T=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),f=4,r=!0),C=(_=u.data||u).length,b=T||m,w=x=0,f===1)for(;w<C;)v=T?4*m[w/4]:x,S=b[v++],_[w++]=S,_[w++]=S,_[w++]=S,_[w++]=r?b[v++]:255,x=v;else for(;w<C;)v=T?4*m[w/4]:x,_[w++]=b[v++],_[w++]=b[v++],_[w++]=b[v++],_[w++]=r?b[v++]:255,x=v},o.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var l=function(){if(Object.prototype.toString.call(Vr)==="[object Window]"){try{e=Vr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),i=function(u){var m;if(l()===!0)return t.width=u.width,t.height=u.height,t.clearRect(0,0,u.width,u.height),t.putImageData(u,0,0),(m=new Image).src=e.toDataURL(),m;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(u){var m,r,f,_,w,b,x,v;if(this.animation){for(v=[],r=w=0,b=(x=this.animation.frames).length;w<b;r=++w)m=x[r],f=u.createImageData(m.width,m.height),_=this.decodePixels(new Uint8Array(m.data)),this.copyToImageData(f,_),m.imageData=f,v.push(m.image=i(f));return v}},o.prototype.renderFrame=function(u,m){var r,f,_;return r=(f=this.animation.frames)[m],_=f[m-1],m===0&&u.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?u.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&u.putImageData(_.imageData,_.xOffset,_.yOffset),r.blendOp===0&&u.clearRect(r.xOffset,r.yOffset,r.width,r.height),u.drawImage(r.image,r.xOffset,r.yOffset)},o.prototype.animate=function(u){var m,r,f,_,w,b,x=this;return r=0,b=this.animation,_=b.numFrames,f=b.frames,w=b.numPlays,(m=function(){var v,C;if(v=r++%_,C=f[v],x.renderFrame(u,v),_>1&&r/_<w)return x.animation._timeout=setTimeout(m,C.delay)})()},o.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},o.prototype.render=function(u){var m,r;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,m=u.getContext("2d"),this.animation?(this.decodeFrames(m),this.animate(m)):(r=m.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),m.putImageData(r,0,0))},o}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function v8(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,o=i[e++]|i[e++]<<8,l=i[e++],u=l>>7,m=1<<(7&l)+1;i[e++],i[e++];var r=null,f=null;u&&(r=e,f=m,e+=3*m);var _=!0,w=[],b=0,x=null,v=0,C=null;for(this.width=t,this.height=o;_&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,C=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((pe=i[e++])>=0))throw Error("Invalid block size");if(pe===0)break;e+=pe}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var T=i[e++];b=i[e++]|i[e++]<<8,x=i[e++],(1&T)==0&&(x=null),v=T>>2&7,e++;break;case 254:for(;;){if(!((pe=i[e++])>=0))throw Error("Invalid block size");if(pe===0)break;e+=pe}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var S=i[e++]|i[e++]<<8,M=i[e++]|i[e++]<<8,O=i[e++]|i[e++]<<8,V=i[e++]|i[e++]<<8,G=i[e++],Z=G>>6&1,te=1<<(7&G)+1,J=r,oe=f,Me=!1;G>>7&&(Me=!0,J=e,oe=te,e+=3*te);var Fe=e;for(e++;;){var pe;if(!((pe=i[e++])>=0))throw Error("Invalid block size");if(pe===0)break;e+=pe}w.push({x:S,y:M,width:O,height:V,has_local_palette:Me,palette_offset:J,palette_size:oe,data_offset:Fe,data_length:e-Fe,transparent_index:x,interlaced:!!Z,delay:b,disposal:v});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return C},this.frameInfo=function(Ie){if(Ie<0||Ie>=w.length)throw new Error("Frame index out of range.");return w[Ie]},this.decodeAndBlitFrameBGRA=function(Ie,Se){var me=this.frameInfo(Ie),et=me.width*me.height,nt=new Uint8Array(et);f_(i,me.data_offset,nt,et);var Et=me.palette_offset,it=me.transparent_index;it===null&&(it=256);var we=me.width,ke=t-we,Oe=we,le=4*(me.y*t+me.x),Ce=4*((me.y+me.height)*t+me.x),he=le,ge=4*ke;me.interlaced===!0&&(ge+=4*t*7);for(var Be=8,We=0,st=nt.length;We<st;++We){var Xe=nt[We];if(Oe===0&&(Oe=we,(he+=ge)>=Ce&&(ge=4*ke+4*t*(Be-1),he=le+(we+ke)*(Be<<1),Be>>=1)),Xe===it)he+=4;else{var gt=i[Et+3*Xe],Pt=i[Et+3*Xe+1],ri=i[Et+3*Xe+2];Se[he++]=ri,Se[he++]=Pt,Se[he++]=gt,Se[he++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(Ie,Se){var me=this.frameInfo(Ie),et=me.width*me.height,nt=new Uint8Array(et);f_(i,me.data_offset,nt,et);var Et=me.palette_offset,it=me.transparent_index;it===null&&(it=256);var we=me.width,ke=t-we,Oe=we,le=4*(me.y*t+me.x),Ce=4*((me.y+me.height)*t+me.x),he=le,ge=4*ke;me.interlaced===!0&&(ge+=4*t*7);for(var Be=8,We=0,st=nt.length;We<st;++We){var Xe=nt[We];if(Oe===0&&(Oe=we,(he+=ge)>=Ce&&(ge=4*ke+4*t*(Be-1),he=le+(we+ke)*(Be<<1),Be>>=1)),Xe===it)he+=4;else{var gt=i[Et+3*Xe],Pt=i[Et+3*Xe+1],ri=i[Et+3*Xe+2];Se[he++]=gt,Se[he++]=Pt,Se[he++]=ri,Se[he++]=255}--Oe}}}function f_(i,e,t,o){for(var l=i[e++],u=1<<l,m=u+1,r=m+1,f=l+1,_=(1<<f)-1,w=0,b=0,x=0,v=i[e++],C=new Int32Array(4096),T=null;;){for(;w<16&&v!==0;)b|=i[e++]<<w,w+=8,v===1?v=i[e++]:--v;if(w<f)break;var S=b&_;if(b>>=f,w-=f,S!==u){if(S===m)break;for(var M=S<r?S:T,O=0,V=M;V>u;)V=C[V]>>8,++O;var G=V;if(x+O+(M!==S?1:0)>o)return void us.log("Warning, gif stream longer than expected.");t[x++]=G;var Z=x+=O;for(M!==S&&(t[x++]=G),V=M;O--;)V=C[V],t[--Z]=255&V,V>>=8;T!==null&&r<4096&&(C[r++]=T<<8|G,r>=_+1&&f<12&&(++f,_=_<<1|1)),T=S}else r=m+1,_=(1<<(f=l+1))-1,T=null}return x!==o&&us.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Dm(i){var e,t,o,l,u,m=Math.floor,r=new Array(64),f=new Array(64),_=new Array(64),w=new Array(64),b=new Array(65535),x=new Array(65535),v=new Array(64),C=new Array(64),T=[],S=0,M=7,O=new Array(64),V=new Array(64),G=new Array(64),Z=new Array(256),te=new Array(2048),J=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],oe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Me=[0,1,2,3,4,5,6,7,8,9,10,11],Fe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],pe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ie=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],et=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function nt(le,Ce){for(var he=0,ge=0,Be=new Array,We=1;We<=16;We++){for(var st=1;st<=le[We];st++)Be[Ce[ge]]=[],Be[Ce[ge]][0]=he,Be[Ce[ge]][1]=We,ge++,he++;he*=2}return Be}function Et(le){for(var Ce=le[0],he=le[1]-1;he>=0;)Ce&1<<he&&(S|=1<<M),he--,--M<0&&(S==255?(it(255),it(0)):it(S),M=7,S=0)}function it(le){T.push(le)}function we(le){it(le>>8&255),it(255&le)}function ke(le,Ce,he,ge,Be){for(var We,st=Be[0],Xe=Be[240],gt=function($t,Si){var Ti,Yt,mi,Wi,Ci,ti,Pe,Q,ae,Qe,_t=0;for(ae=0;ae<8;++ae){Ti=$t[_t],Yt=$t[_t+1],mi=$t[_t+2],Wi=$t[_t+3],Ci=$t[_t+4],ti=$t[_t+5],Pe=$t[_t+6];var Jt=Ti+(Q=$t[_t+7]),di=Ti-Q,wn=Yt+Pe,Ln=Yt-Pe,hn=mi+ti,Bi=mi-ti,Xi=Wi+Ci,Hn=Wi-Ci,Gn=Jt+Xi,Zr=Jt-Xi,zn=wn+hn,fn=wn-hn;$t[_t]=Gn+zn,$t[_t+4]=Gn-zn;var yn=.707106781*(fn+Zr);$t[_t+2]=Zr+yn,$t[_t+6]=Zr-yn;var tn=.382683433*((Gn=Hn+Bi)-(fn=Ln+di)),wr=.5411961*Gn+tn,Wn=1.306562965*fn+tn,lr=.707106781*(zn=Bi+Ln),Kr=di+lr,rn=di-lr;$t[_t+5]=rn+wr,$t[_t+3]=rn-wr,$t[_t+1]=Kr+Wn,$t[_t+7]=Kr-Wn,_t+=8}for(_t=0,ae=0;ae<8;++ae){Ti=$t[_t],Yt=$t[_t+8],mi=$t[_t+16],Wi=$t[_t+24],Ci=$t[_t+32],ti=$t[_t+40],Pe=$t[_t+48];var He=Ti+(Q=$t[_t+56]),yo=Ti-Q,_o=Yt+Pe,co=Yt-Pe,Te=mi+ti,Ee=mi-ti,qe=Wi+Ci,ct=Wi-Ci,dt=He+qe,jt=He-qe,Ge=_o+Te,Zt=_o-Te;$t[_t]=dt+Ge,$t[_t+32]=dt-Ge;var Rt=.707106781*(Zt+jt);$t[_t+16]=jt+Rt,$t[_t+48]=jt-Rt;var oi=.382683433*((dt=ct+Ee)-(Zt=co+yo)),yt=.5411961*dt+oi,Ri=1.306562965*Zt+oi,Ii=.707106781*(Ge=Ee+co),Sn=yo+Ii,An=yo-Ii;$t[_t+40]=An+yt,$t[_t+24]=An-yt,$t[_t+8]=Sn+Ri,$t[_t+56]=Sn-Ri,_t++}for(ae=0;ae<64;++ae)Qe=$t[ae]*Si[ae],v[ae]=Qe>0?Qe+.5|0:Qe-.5|0;return v}(le,Ce),Pt=0;Pt<64;++Pt)C[J[Pt]]=gt[Pt];var ri=C[0]-he;he=C[0],ri==0?Et(ge[0]):(Et(ge[x[We=32767+ri]]),Et(b[We]));for(var ut=63;ut>0&&C[ut]==0;)ut--;if(ut==0)return Et(st),he;for(var bt,vt=1;vt<=ut;){for(var Ke=vt;C[vt]==0&&vt<=ut;)++vt;var ei=vt-Ke;if(ei>=16){bt=ei>>4;for(var li=1;li<=bt;++li)Et(Xe);ei&=15}We=32767+C[vt],Et(Be[(ei<<4)+x[We]]),Et(b[We]),vt++}return ut!=63&&Et(st),he}function Oe(le){le=Math.min(Math.max(le,1),100),u!=le&&(function(Ce){for(var he=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ge=0;ge<64;ge++){var Be=m((he[ge]*Ce+50)/100);Be=Math.min(Math.max(Be,1),255),r[J[ge]]=Be}for(var We=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var Xe=m((We[st]*Ce+50)/100);Xe=Math.min(Math.max(Xe,1),255),f[J[st]]=Xe}for(var gt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pt=0,ri=0;ri<8;ri++)for(var ut=0;ut<8;ut++)_[Pt]=1/(r[J[Pt]]*gt[ri]*gt[ut]*8),w[Pt]=1/(f[J[Pt]]*gt[ri]*gt[ut]*8),Pt++}(le<50?Math.floor(5e3/le):Math.floor(200-2*le)),u=le)}this.encode=function(le,Ce){Ce&&Oe(Ce),T=new Array,S=0,M=7,we(65496),we(65504),we(16),it(74),it(70),it(73),it(70),it(0),it(1),it(1),it(0),we(1),we(1),it(0),it(0),function(){we(65499),we(132),it(0);for(var Yt=0;Yt<64;Yt++)it(r[Yt]);it(1);for(var mi=0;mi<64;mi++)it(f[mi])}(),function(Yt,mi){we(65472),we(17),it(8),we(mi),we(Yt),it(3),it(1),it(17),it(0),it(2),it(17),it(1),it(3),it(17),it(1)}(le.width,le.height),function(){we(65476),we(418),it(0);for(var Yt=0;Yt<16;Yt++)it(oe[Yt+1]);for(var mi=0;mi<=11;mi++)it(Me[mi]);it(16);for(var Wi=0;Wi<16;Wi++)it(Fe[Wi+1]);for(var Ci=0;Ci<=161;Ci++)it(pe[Ci]);it(1);for(var ti=0;ti<16;ti++)it(Ie[ti+1]);for(var Pe=0;Pe<=11;Pe++)it(Se[Pe]);it(17);for(var Q=0;Q<16;Q++)it(me[Q+1]);for(var ae=0;ae<=161;ae++)it(et[ae])}(),we(65498),we(12),it(3),it(1),it(0),it(2),it(17),it(3),it(17),it(0),it(63),it(0);var he=0,ge=0,Be=0;S=0,M=7,this.encode.displayName="_encode_";for(var We,st,Xe,gt,Pt,ri,ut,bt,vt,Ke=le.data,ei=le.width,li=le.height,$t=4*ei,Si=0;Si<li;){for(We=0;We<$t;){for(Pt=$t*Si+We,ut=-1,bt=0,vt=0;vt<64;vt++)ri=Pt+(bt=vt>>3)*$t+(ut=4*(7&vt)),Si+bt>=li&&(ri-=$t*(Si+1+bt-li)),We+ut>=$t&&(ri-=We+ut-$t+4),st=Ke[ri++],Xe=Ke[ri++],gt=Ke[ri++],O[vt]=(te[st]+te[Xe+256>>0]+te[gt+512>>0]>>16)-128,V[vt]=(te[st+768>>0]+te[Xe+1024>>0]+te[gt+1280>>0]>>16)-128,G[vt]=(te[st+1280>>0]+te[Xe+1536>>0]+te[gt+1792>>0]>>16)-128;he=ke(O,_,he,e,o),ge=ke(V,w,ge,t,l),Be=ke(G,w,Be,t,l),We+=32}Si+=8}if(M>=0){var Ti=[];Ti[1]=M+1,Ti[0]=(1<<M+1)-1,Et(Ti)}return we(65497),new Uint8Array(T)},i=i||50,function(){for(var le=String.fromCharCode,Ce=0;Ce<256;Ce++)Z[Ce]=le(Ce)}(),e=nt(oe,Me),t=nt(Ie,Se),o=nt(Fe,pe),l=nt(me,et),function(){for(var le=1,Ce=2,he=1;he<=15;he++){for(var ge=le;ge<Ce;ge++)x[32767+ge]=he,b[32767+ge]=[],b[32767+ge][1]=he,b[32767+ge][0]=ge;for(var Be=-(Ce-1);Be<=-le;Be++)x[32767+Be]=he,b[32767+Be]=[],b[32767+Be][1]=he,b[32767+Be][0]=Ce-1+Be;le<<=1,Ce<<=1}}(),function(){for(var le=0;le<256;le++)te[le]=19595*le,te[le+256>>0]=38470*le,te[le+512>>0]=7471*le+32768,te[le+768>>0]=-11059*le,te[le+1024>>0]=-21709*le,te[le+1280>>0]=32768*le+8421375,te[le+1536>>0]=-27439*le,te[le+1792>>0]=-5329*le}(),Oe(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xc(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function d_(i){function e(oe){if(!oe)throw Error("assert :P")}function t(oe,Me,Fe){for(var pe=0;4>pe;pe++)if(oe[Me+pe]!=Fe.charCodeAt(pe))return!0;return!1}function o(oe,Me,Fe,pe,Ie){for(var Se=0;Se<Ie;Se++)oe[Me+Se]=Fe[pe+Se]}function l(oe,Me,Fe,pe){for(var Ie=0;Ie<pe;Ie++)oe[Me+Ie]=Fe}function u(oe){return new Int32Array(oe)}function m(oe,Me){for(var Fe=[],pe=0;pe<oe;pe++)Fe.push(new Me);return Fe}function r(oe,Me){var Fe=[];return function pe(Ie,Se,me){for(var et=me[Se],nt=0;nt<et&&(Ie.push(me.length>Se+1?[]:new Me),!(me.length<Se+1));nt++)pe(Ie[nt],Se+1,me)}(Fe,0,oe),Fe}var f=function(){var oe=this;function Me(j,K){for(var ue=1<<K-1>>>0;j&ue;)ue>>>=1;return ue?(j&ue-1)+ue:j}function Fe(j,K,ue,ve,je){e(!(ve%ue));do j[K+(ve-=ue)]=je;while(0<ve)}function pe(j,K,ue,ve,je){if(e(2328>=je),512>=je)var Ze=u(512);else if((Ze=u(je))==null)return 0;return function($e,at,pt,St,ai,Ai){var wi,pi,$i=at,Oi=1<<pt,Xt=u(16),ii=u(16);for(e(ai!=0),e(St!=null),e($e!=null),e(0<pt),pi=0;pi<ai;++pi){if(15<St[pi])return 0;++Xt[St[pi]]}if(Xt[0]==ai)return 0;for(ii[1]=0,wi=1;15>wi;++wi){if(Xt[wi]>1<<wi)return 0;ii[wi+1]=ii[wi]+Xt[wi]}for(pi=0;pi<ai;++pi)wi=St[pi],0<St[pi]&&(Ai[ii[wi]++]=pi);if(ii[15]==1)return(St=new Ie).g=0,St.value=Ai[0],Fe($e,$i,1,Oi,St),Oi;var Hi,Ki=-1,Ui=Oi-1,Dn=0,kn=1,yr=1,On=1<<pt;for(pi=0,wi=1,ai=2;wi<=pt;++wi,ai<<=1){if(kn+=yr<<=1,0>(yr-=Xt[wi]))return 0;for(;0<Xt[wi];--Xt[wi])(St=new Ie).g=wi,St.value=Ai[pi++],Fe($e,$i+Dn,ai,On,St),Dn=Me(Dn,wi)}for(wi=pt+1,ai=2;15>=wi;++wi,ai<<=1){if(kn+=yr<<=1,0>(yr-=Xt[wi]))return 0;for(;0<Xt[wi];--Xt[wi]){if(St=new Ie,(Dn&Ui)!=Ki){for($i+=On,Hi=1<<(Ki=wi)-pt;15>Ki&&!(0>=(Hi-=Xt[Ki]));)++Ki,Hi<<=1;Oi+=On=1<<(Hi=Ki-pt),$e[at+(Ki=Dn&Ui)].g=Hi+pt,$e[at+Ki].value=$i-at-Ki}St.g=wi-pt,St.value=Ai[pi++],Fe($e,$i+(Dn>>pt),ai,On,St),Dn=Me(Dn,wi)}}return kn!=2*ii[15]-1?0:Oi}(j,K,ue,ve,je,Ze)}function Ie(){this.value=this.g=0}function Se(){this.value=this.g=0}function me(){this.G=m(5,Ie),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(Os,Se)}function et(j,K,ue,ve){e(j!=null),e(K!=null),e(2147483648>ve),j.Ca=254,j.I=0,j.b=-8,j.Ka=0,j.oa=K,j.pa=ue,j.Jd=K,j.Yc=ue+ve,j.Zc=4<=ve?ue+ve-4+1:ue,We(j)}function nt(j,K){for(var ue=0;0<K--;)ue|=Xe(j,128)<<K;return ue}function Et(j,K){var ue=nt(j,K);return st(j)?-ue:ue}function it(j,K,ue,ve){var je,Ze=0;for(e(j!=null),e(K!=null),e(4294967288>ve),j.Sb=ve,j.Ra=0,j.u=0,j.h=0,4<ve&&(ve=4),je=0;je<ve;++je)Ze+=K[ue+je]<<8*je;j.Ra=Ze,j.bb=ve,j.oa=K,j.pa=ue}function we(j){for(;8<=j.u&&j.bb<j.Sb;)j.Ra>>>=8,j.Ra+=j.oa[j.pa+j.bb]<<Ha-8>>>0,++j.bb,j.u-=8;he(j)&&(j.h=1,j.u=0)}function ke(j,K){if(e(0<=K),!j.h&&K<=Gl){var ue=Ce(j)&gu[K];return j.u+=K,we(j),ue}return j.h=1,j.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function le(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ce(j){return j.Ra>>>(j.u&Ha-1)>>>0}function he(j){return e(j.bb<=j.Sb),j.h||j.bb==j.Sb&&j.u>Ha}function ge(j,K){j.u=K,j.h=he(j)}function Be(j){j.u>=yu&&(e(j.u>=yu),we(j))}function We(j){e(j!=null&&j.oa!=null),j.pa<j.Zc?(j.I=(j.oa[j.pa++]|j.I<<8)>>>0,j.b+=8):(e(j!=null&&j.oa!=null),j.pa<j.Yc?(j.b+=8,j.I=j.oa[j.pa++]|j.I<<8):j.Ka?j.b=0:(j.I<<=8,j.b+=8,j.Ka=1))}function st(j){return nt(j,1)}function Xe(j,K){var ue=j.Ca;0>j.b&&We(j);var ve=j.b,je=ue*K>>>8,Ze=(j.I>>>ve>je)+0;for(Ze?(ue-=je,j.I-=je+1<<ve>>>0):ue=je+1,ve=ue,je=0;256<=ve;)je+=8,ve>>=8;return ve=7^je+Fs[ve],j.b-=ve,j.Ca=(ue<<ve)-1,Ze}function gt(j,K,ue){j[K+0]=ue>>24&255,j[K+1]=ue>>16&255,j[K+2]=ue>>8&255,j[K+3]=ue>>0&255}function Pt(j,K){return j[K+0]<<0|j[K+1]<<8}function ri(j,K){return Pt(j,K)|j[K+2]<<16}function ut(j,K){return Pt(j,K)|Pt(j,K+2)<<16}function bt(j,K){var ue=1<<K;return e(j!=null),e(0<K),j.X=u(ue),j.X==null?0:(j.Mb=32-K,j.Xa=K,1)}function vt(j,K){e(j!=null),e(K!=null),e(j.Xa==K.Xa),o(K.X,0,j.X,0,1<<K.Xa)}function Ke(){this.X=[],this.Xa=this.Mb=0}function ei(j,K,ue,ve){e(ue!=null),e(ve!=null);var je=ue[0],Ze=ve[0];return je==0&&(je=(j*Ze+K/2)/K),Ze==0&&(Ze=(K*je+j/2)/j),0>=je||0>=Ze?0:(ue[0]=je,ve[0]=Ze,1)}function li(j,K){return j+(1<<K)-1>>>K}function $t(j,K){return((4278255360&j)+(4278255360&K)>>>0&4278255360)+((16711935&j)+(16711935&K)>>>0&16711935)>>>0}function Si(j,K){oe[K]=function(ue,ve,je,Ze,$e,at,pt){var St;for(St=0;St<$e;++St){var ai=oe[j](at[pt+St-1],je,Ze+St);at[pt+St]=$t(ue[ve+St],ai)}}}function Ti(){this.ud=this.hd=this.jd=0}function Yt(j,K){return((4278124286&(j^K))>>>1)+(j&K)>>>0}function mi(j){return 0<=j&&256>j?j:0>j?0:255<j?255:void 0}function Wi(j,K){return mi(j+(j-K+.5>>1))}function Ci(j,K,ue){return Math.abs(K-ue)-Math.abs(j-ue)}function ti(j,K,ue,ve,je,Ze,$e){for(ve=Ze[$e-1],ue=0;ue<je;++ue)Ze[$e+ue]=ve=$t(j[K+ue],ve)}function Pe(j,K,ue,ve,je){var Ze;for(Ze=0;Ze<ue;++Ze){var $e=j[K+Ze],at=$e>>8&255,pt=16711935&(pt=(pt=16711935&$e)+((at<<16)+at));ve[je+Ze]=(4278255360&$e)+pt>>>0}}function Q(j,K){K.jd=j>>0&255,K.hd=j>>8&255,K.ud=j>>16&255}function ae(j,K,ue,ve,je,Ze){var $e;for($e=0;$e<ve;++$e){var at=K[ue+$e],pt=at>>>8,St=at,ai=255&(ai=(ai=at>>>16)+((j.jd<<24>>24)*(pt<<24>>24)>>>5));St=255&(St=(St=St+((j.hd<<24>>24)*(pt<<24>>24)>>>5))+((j.ud<<24>>24)*(ai<<24>>24)>>>5)),je[Ze+$e]=(4278255360&at)+(ai<<16)+St}}function Qe(j,K,ue,ve,je){oe[K]=function(Ze,$e,at,pt,St,ai,Ai,wi,pi){for(pt=Ai;pt<wi;++pt)for(Ai=0;Ai<pi;++Ai)St[ai++]=je(at[ve(Ze[$e++])])},oe[j]=function(Ze,$e,at,pt,St,ai,Ai){var wi=8>>Ze.b,pi=Ze.Ea,$i=Ze.K[0],Oi=Ze.w;if(8>wi)for(Ze=(1<<Ze.b)-1,Oi=(1<<wi)-1;$e<at;++$e){var Xt,ii=0;for(Xt=0;Xt<pi;++Xt)Xt&Ze||(ii=ve(pt[St++])),ai[Ai++]=je($i[ii&Oi]),ii>>=wi}else oe["VP8LMapColor"+ue](pt,St,$i,Oi,ai,Ai,$e,at,pi)}}function _t(j,K,ue,ve,je){for(ue=K+ue;K<ue;){var Ze=j[K++];ve[je++]=Ze>>16&255,ve[je++]=Ze>>8&255,ve[je++]=Ze>>0&255}}function Jt(j,K,ue,ve,je){for(ue=K+ue;K<ue;){var Ze=j[K++];ve[je++]=Ze>>16&255,ve[je++]=Ze>>8&255,ve[je++]=Ze>>0&255,ve[je++]=Ze>>24&255}}function di(j,K,ue,ve,je){for(ue=K+ue;K<ue;){var Ze=($e=j[K++])>>16&240|$e>>12&15,$e=$e>>0&240|$e>>28&15;ve[je++]=Ze,ve[je++]=$e}}function wn(j,K,ue,ve,je){for(ue=K+ue;K<ue;){var Ze=($e=j[K++])>>16&248|$e>>13&7,$e=$e>>5&224|$e>>3&31;ve[je++]=Ze,ve[je++]=$e}}function Ln(j,K,ue,ve,je){for(ue=K+ue;K<ue;){var Ze=j[K++];ve[je++]=Ze>>0&255,ve[je++]=Ze>>8&255,ve[je++]=Ze>>16&255}}function hn(j,K,ue,ve,je,Ze){if(Ze==0)for(ue=K+ue;K<ue;)gt(ve,((Ze=j[K++])[0]>>24|Ze[1]>>8&65280|Ze[2]<<8&16711680|Ze[3]<<24)>>>0),je+=32;else o(ve,je,j,K,ue)}function Bi(j,K){oe[K][0]=oe[j+"0"],oe[K][1]=oe[j+"1"],oe[K][2]=oe[j+"2"],oe[K][3]=oe[j+"3"],oe[K][4]=oe[j+"4"],oe[K][5]=oe[j+"5"],oe[K][6]=oe[j+"6"],oe[K][7]=oe[j+"7"],oe[K][8]=oe[j+"8"],oe[K][9]=oe[j+"9"],oe[K][10]=oe[j+"10"],oe[K][11]=oe[j+"11"],oe[K][12]=oe[j+"12"],oe[K][13]=oe[j+"13"],oe[K][14]=oe[j+"0"],oe[K][15]=oe[j+"0"]}function Xi(j){return j==Ro||j==xu||j==Au||j==Rc}function Hn(){this.eb=[],this.size=this.A=this.fb=0}function Gn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Zr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Hn,this.f.kb=new Gn,this.sd=null}function zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function fn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yn(j){return alert("todo:WebPSamplerProcessPlane"),j.T}function tn(j,K){var ue=j.T,ve=K.ba.f.RGBA,je=ve.eb,Ze=ve.fb+j.ka*ve.A,$e=X[K.ba.S],at=j.y,pt=j.O,St=j.f,ai=j.N,Ai=j.ea,wi=j.W,pi=K.cc,$i=K.dc,Oi=K.Mc,Xt=K.Nc,ii=j.ka,Hi=j.ka+j.T,Ki=j.U,Ui=Ki+1>>1;for(ii==0?$e(at,pt,null,null,St,ai,Ai,wi,St,ai,Ai,wi,je,Ze,null,null,Ki):($e(K.ec,K.fc,at,pt,pi,$i,Oi,Xt,St,ai,Ai,wi,je,Ze-ve.A,je,Ze,Ki),++ue);ii+2<Hi;ii+=2)pi=St,$i=ai,Oi=Ai,Xt=wi,ai+=j.Rc,wi+=j.Rc,Ze+=2*ve.A,$e(at,(pt+=2*j.fa)-j.fa,at,pt,pi,$i,Oi,Xt,St,ai,Ai,wi,je,Ze-ve.A,je,Ze,Ki);return pt+=j.fa,j.j+Hi<j.o?(o(K.ec,K.fc,at,pt,Ki),o(K.cc,K.dc,St,ai,Ui),o(K.Mc,K.Nc,Ai,wi,Ui),ue--):1&Hi||$e(at,pt,null,null,St,ai,Ai,wi,St,ai,Ai,wi,je,Ze+ve.A,null,null,Ki),ue}function wr(j,K,ue){var ve=j.F,je=[j.J];if(ve!=null){var Ze=j.U,$e=K.ba.S,at=$e==Xl||$e==Au;K=K.ba.f.RGBA;var pt=[0],St=j.ka;pt[0]=j.T,j.Kb&&(St==0?--pt[0]:(--St,je[0]-=j.width),j.j+j.ka+j.T==j.o&&(pt[0]=j.o-j.j-St));var ai=K.eb;St=K.fb+St*K.A,j=Uu(ve,je[0],j.width,Ze,pt,ai,St+(at?0:3),K.A),e(ue==pt),j&&Xi($e)&&Fa(ai,St,at,Ze,pt,K.A)}return 0}function Wn(j){var K=j.ma,ue=K.ba.S,ve=11>ue,je=ue==oc||ue==wu||ue==Xl||ue==no||ue==12||Xi(ue);if(K.memory=null,K.Ib=null,K.Jb=null,K.Nd=null,!Sl(K.Oa,j,je?11:12))return 0;if(je&&Xi(ue)&&an(),j.da)alert("todo:use_scaling");else{if(ve){if(K.Ib=yn,j.Kb){if(ue=j.U+1>>1,K.memory=u(j.U+2*ue),K.memory==null)return 0;K.ec=K.memory,K.fc=0,K.cc=K.ec,K.dc=K.fc+j.U,K.Mc=K.cc,K.Nc=K.dc+ue,K.Ib=tn,an()}}else alert("todo:EmitYUV");je&&(K.Jb=wr,ve&&hi())}if(ve&&!Vt){for(j=0;256>j;++j)Pi[j]=89858*(j-128)+kt>>Lt,Ni[j]=-22014*(j-128)+kt,Vi[j]=-45773*(j-128),Ei[j]=113618*(j-128)+kt>>Lt;for(j=It;j<si;++j)K=76283*(j-16)+kt>>Lt,sn[j-It]=Cs(K,255),zi[j-It]=Cs(K+8>>4,15);Vt=1}return 1}function lr(j){var K=j.ma,ue=j.U,ve=j.T;return e(!(1&j.ka)),0>=ue||0>=ve?0:(ue=K.Ib(j,K),K.Jb!=null&&K.Jb(j,K,ue),K.Dc+=ue,1)}function Kr(j){j.ma.memory=null}function rn(j,K,ue,ve){return ke(j,8)!=47?0:(K[0]=ke(j,14)+1,ue[0]=ke(j,14)+1,ve[0]=ke(j,1),ke(j,3)!=0?0:!j.h)}function He(j,K){if(4>j)return j+1;var ue=j-2>>1;return(2+(1&j)<<ue)+ke(K,ue)+1}function yo(j,K){return 120<K?K-120:1<=(ue=((ue=$n[K-1])>>4)*j+(8-(15&ue)))?ue:1;var ue}function _o(j,K,ue){var ve=Ce(ue),je=j[K+=255&ve].g-8;return 0<je&&(ge(ue,ue.u+8),ve=Ce(ue),K+=j[K].value,K+=ve&(1<<je)-1),ge(ue,ue.u+j[K].g),j[K].value}function co(j,K,ue){return ue.g+=j.g,ue.value+=j.value<<K>>>0,e(8>=ue.g),j.g}function Te(j,K,ue){var ve=j.xc;return e((K=ve==0?0:j.vc[j.md*(ue>>ve)+(K>>ve)])<j.Wb),j.Ya[K]}function Ee(j,K,ue,ve){var je=j.ab,Ze=j.c*K,$e=j.C;K=$e+K;var at=ue,pt=ve;for(ve=j.Ta,ue=j.Ua;0<je--;){var St=j.gc[je],ai=$e,Ai=K,wi=at,pi=pt,$i=(pt=ve,at=ue,St.Ea);switch(e(ai<Ai),e(Ai<=St.nc),St.hc){case 2:Wl(wi,pi,(Ai-ai)*$i,pt,at);break;case 0:var Oi=ai,Xt=Ai,ii=pt,Hi=at,Ki=(On=St).Ea;Oi==0&&(_u(wi,pi,null,null,1,ii,Hi),ti(wi,pi+1,0,0,Ki-1,ii,Hi+1),pi+=Ki,Hi+=Ki,++Oi);for(var Ui=1<<On.b,Dn=Ui-1,kn=li(Ki,On.b),yr=On.K,On=On.w+(Oi>>On.b)*kn;Oi<Xt;){var go=yr,wo=On,Yr=1;for(sl(wi,pi,ii,Hi-Ki,1,ii,Hi);Yr<Ki;){var qr=(Yr&~Dn)+Ui;qr>Ki&&(qr=Ki),(0,El[go[wo++]>>8&15])(wi,pi+ +Yr,ii,Hi+Yr-Ki,qr-Yr,ii,Hi+Yr),Yr=qr}pi+=Ki,Hi+=Ki,++Oi&Dn||(On+=kn)}Ai!=St.nc&&o(pt,at-$i,pt,at+(Ai-ai-1)*$i,$i);break;case 1:for($i=wi,Xt=pi,Ki=(wi=St.Ea)-(Hi=wi&~(ii=(pi=1<<St.b)-1)),Oi=li(wi,St.b),Ui=St.K,St=St.w+(ai>>St.b)*Oi;ai<Ai;){for(Dn=Ui,kn=St,yr=new Ti,On=Xt+Hi,go=Xt+wi;Xt<On;)Q(Dn[kn++],yr),Rs(yr,$i,Xt,pi,pt,at),Xt+=pi,at+=pi;Xt<go&&(Q(Dn[kn++],yr),Rs(yr,$i,Xt,Ki,pt,at),Xt+=Ki,at+=Ki),++ai&ii||(St+=Oi)}break;case 3:if(wi==pt&&pi==at&&0<St.b){for(Xt=pt,wi=$i=at+(Ai-ai)*$i-(Hi=(Ai-ai)*li(St.Ea,St.b)),pi=pt,ii=at,Oi=[],Hi=(Ki=Hi)-1;0<=Hi;--Hi)Oi[Hi]=pi[ii+Hi];for(Hi=Ki-1;0<=Hi;--Hi)Xt[wi+Hi]=Oi[Hi];Pa(St,ai,Ai,pt,$i,pt,at)}else Pa(St,ai,Ai,wi,pi,pt,at)}at=ve,pt=ue}pt!=ue&&o(ve,ue,at,pt,Ze)}function qe(j,K){var ue=j.V,ve=j.Ba+j.c*j.C,je=K-j.C;if(e(K<=j.l.o),e(16>=je),0<je){var Ze=j.l,$e=j.Ta,at=j.Ua,pt=Ze.width;if(Ee(j,je,ue,ve),je=at=[at],e((ue=j.C)<(ve=K)),e(Ze.v<Ze.va),ve>Ze.o&&(ve=Ze.o),ue<Ze.j){var St=Ze.j-ue;ue=Ze.j,je[0]+=St*pt}if(ue>=ve?ue=0:(je[0]+=4*Ze.v,Ze.ka=ue-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=ve-ue,ue=1),ue){if(at=at[0],11>(ue=j.ca).S){var ai=ue.f.RGBA,Ai=(ve=ue.S,je=Ze.U,Ze=Ze.T,St=ai.eb,ai.A),wi=Ze;for(ai=ai.fb+j.Ma*ai.A;0<wi--;){var pi=$e,$i=at,Oi=je,Xt=St,ii=ai;switch(ve){case Ga:Ma(pi,$i,Oi,Xt,ii);break;case oc:Da(pi,$i,Oi,Xt,ii);break;case Ro:Da(pi,$i,Oi,Xt,ii),Fa(Xt,ii,0,Oi,1,0);break;case bu:al(pi,$i,Oi,Xt,ii);break;case wu:hn(pi,$i,Oi,Xt,ii,1);break;case xu:hn(pi,$i,Oi,Xt,ii,1),Fa(Xt,ii,0,Oi,1,0);break;case Xl:hn(pi,$i,Oi,Xt,ii,0);break;case Au:hn(pi,$i,Oi,Xt,ii,0),Fa(Xt,ii,1,Oi,1,0);break;case no:sa(pi,$i,Oi,Xt,ii);break;case Rc:sa(pi,$i,Oi,Xt,ii),ju(Xt,ii,Oi,1,0);break;case va:ss(pi,$i,Oi,Xt,ii);break;default:e(0)}at+=pt,ai+=Ai}j.Ma+=Ze}else alert("todo:EmitRescaledRowsYUVA");e(j.Ma<=ue.height)}}j.C=K,e(j.C<=j.i)}function ct(j){var K;if(0<j.ua)return 0;for(K=0;K<j.Wb;++K){var ue=j.Ya[K].G,ve=j.Ya[K].H;if(0<ue[1][ve[1]+0].g||0<ue[2][ve[2]+0].g||0<ue[3][ve[3]+0].g)return 0}return 1}function dt(j,K,ue,ve,je,Ze){if(j.Z!=0){var $e=j.qd,at=j.rd;for(e(z[j.Z]!=null);K<ue;++K)z[j.Z]($e,at,ve,je,ve,je,Ze),$e=ve,at=je,je+=Ze;j.qd=$e,j.rd=at}}function jt(j,K){var ue=j.l.ma,ve=ue.Z==0||ue.Z==1?j.l.j:j.C;if(ve=j.C<ve?ve:j.C,e(K<=j.l.o),K>ve){var je=j.l.width,Ze=ue.ca,$e=ue.tb+je*ve,at=j.V,pt=j.Ba+j.c*ve,St=j.gc;e(j.ab==1),e(St[0].hc==3),Mc(St[0],ve,K,at,pt,Ze,$e),dt(ue,ve,K,Ze,$e,je)}j.C=j.Ma=K}function Ge(j,K,ue,ve,je,Ze,$e){var at=j.$/ve,pt=j.$%ve,St=j.m,ai=j.s,Ai=ue+j.$,wi=Ai;je=ue+ve*je;var pi=ue+ve*Ze,$i=280+ai.ua,Oi=j.Pb?at:16777216,Xt=0<ai.ua?ai.Wa:null,ii=ai.wc,Hi=Ai<pi?Te(ai,pt,at):null;e(j.C<Ze),e(pi<=je);var Ki=!1;e:for(;;){for(;Ki||Ai<pi;){var Ui=0;if(at>=Oi){var Dn=Ai-ue;e((Oi=j).Pb),Oi.wd=Oi.m,Oi.xd=Dn,0<Oi.s.ua&&vt(Oi.s.Wa,Oi.s.vb),Oi=at+Vu}if(pt&ii||(Hi=Te(ai,pt,at)),e(Hi!=null),Hi.Qb&&(K[Ai]=Hi.qb,Ki=!0),!Ki)if(Be(St),Hi.jc){Ui=St,Dn=K;var kn=Ai,yr=Hi.pd[Ce(Ui)&Os-1];e(Hi.jc),256>yr.g?(ge(Ui,Ui.u+yr.g),Dn[kn]=yr.value,Ui=0):(ge(Ui,Ui.u+yr.g-256),e(256<=yr.value),Ui=yr.value),Ui==0&&(Ki=!0)}else Ui=_o(Hi.G[0],Hi.H[0],St);if(St.h)break;if(Ki||256>Ui){if(!Ki)if(Hi.nd)K[Ai]=(Hi.qb|Ui<<8)>>>0;else{if(Be(St),Ki=_o(Hi.G[1],Hi.H[1],St),Be(St),Dn=_o(Hi.G[2],Hi.H[2],St),kn=_o(Hi.G[3],Hi.H[3],St),St.h)break;K[Ai]=(kn<<24|Ki<<16|Ui<<8|Dn)>>>0}if(Ki=!1,++Ai,++pt>=ve&&(pt=0,++at,$e!=null&&at<=Ze&&!(at%16)&&$e(j,at),Xt!=null))for(;wi<Ai;)Ui=K[wi++],Xt.X[(506832829*Ui&4294967295)>>>Xt.Mb]=Ui}else if(280>Ui){if(Ui=He(Ui-256,St),Dn=_o(Hi.G[4],Hi.H[4],St),Be(St),Dn=yo(ve,Dn=He(Dn,St)),St.h)break;if(Ai-ue<Dn||je-Ai<Ui)break e;for(kn=0;kn<Ui;++kn)K[Ai+kn]=K[Ai+kn-Dn];for(Ai+=Ui,pt+=Ui;pt>=ve;)pt-=ve,++at,$e!=null&&at<=Ze&&!(at%16)&&$e(j,at);if(e(Ai<=je),pt&ii&&(Hi=Te(ai,pt,at)),Xt!=null)for(;wi<Ai;)Ui=K[wi++],Xt.X[(506832829*Ui&4294967295)>>>Xt.Mb]=Ui}else{if(!(Ui<$i))break e;for(Ki=Ui-280,e(Xt!=null);wi<Ai;)Ui=K[wi++],Xt.X[(506832829*Ui&4294967295)>>>Xt.Mb]=Ui;Ui=Ai,e(!(Ki>>>(Dn=Xt).Xa)),K[Ui]=Dn.X[Ki],Ki=!0}Ki||e(St.h==he(St))}if(j.Pb&&St.h&&Ai<je)e(j.m.h),j.a=5,j.m=j.wd,j.$=j.xd,0<j.s.ua&&vt(j.s.vb,j.s.Wa);else{if(St.h)break e;$e!=null&&$e(j,at>Ze?Ze:at),j.a=0,j.$=Ai-ue}return 1}return j.a=3,0}function Zt(j){e(j!=null),j.vc=null,j.yc=null,j.Ya=null;var K=j.Wa;K!=null&&(K.X=null),j.vb=null,e(j!=null)}function Rt(){var j=new Fu;return j==null?null:(j.a=0,j.xb=D,Bi("Predictor","VP8LPredictors"),Bi("Predictor","VP8LPredictors_C"),Bi("PredictorAdd","VP8LPredictorsAdd"),Bi("PredictorAdd","VP8LPredictorsAdd_C"),Wl=Pe,Rs=ae,Ma=_t,Da=Jt,sa=di,ss=wn,al=Ln,oe.VP8LMapColor32b=Cl,oe.VP8LMapColor8b=Dc,j)}function oi(j,K,ue,ve,je){var Ze=1,$e=[j],at=[K],pt=ve.m,St=ve.s,ai=null,Ai=0;e:for(;;){if(ue)for(;Ze&&ke(pt,1);){var wi=$e,pi=at,$i=ve,Oi=1,Xt=$i.m,ii=$i.gc[$i.ab],Hi=ke(Xt,2);if($i.Oc&1<<Hi)Ze=0;else{switch($i.Oc|=1<<Hi,ii.hc=Hi,ii.Ea=wi[0],ii.nc=pi[0],ii.K=[null],++$i.ab,e(4>=$i.ab),Hi){case 0:case 1:ii.b=ke(Xt,3)+2,Oi=oi(li(ii.Ea,ii.b),li(ii.nc,ii.b),0,$i,ii.K),ii.K=ii.K[0];break;case 3:var Ki,Ui=ke(Xt,8)+1,Dn=16<Ui?0:4<Ui?1:2<Ui?2:3;if(wi[0]=li(ii.Ea,Dn),ii.b=Dn,Ki=Oi=oi(Ui,1,0,$i,ii.K)){var kn,yr=Ui,On=ii,go=1<<(8>>On.b),wo=u(go);if(wo==null)Ki=0;else{var Yr=On.K[0],qr=On.w;for(wo[0]=On.K[0][0],kn=1;kn<1*yr;++kn)wo[kn]=$t(Yr[qr+kn],wo[kn-1]);for(;kn<4*go;++kn)wo[kn]=0;On.K[0]=null,On.K[0]=wo,Ki=1}}Oi=Ki;break;case 2:break;default:e(0)}Ze=Oi}}if($e=$e[0],at=at[0],Ze&&ke(pt,1)&&!(Ze=1<=(Ai=ke(pt,4))&&11>=Ai)){ve.a=3;break e}var po;if(po=Ze)t:{var xo,Gr,Es,Or=ve,ns=$e,Bs=at,ao=Ai,as=ue,Is=Or.m,zs=Or.s,Bo=[null],ba=1,Wa=0,Io=ur[ao];i:for(;;){if(as&&ke(Is,1)){var bs=ke(Is,3)+2,Kl=li(ns,bs),Xa=li(Bs,bs),hl=Kl*Xa;if(!oi(Kl,Xa,0,Or,Bo))break i;for(Bo=Bo[0],zs.xc=bs,xo=0;xo<hl;++xo){var fl=Bo[xo]>>8&65535;Bo[xo]=fl,fl>=ba&&(ba=fl+1)}}if(Is.h)break i;for(Gr=0;5>Gr;++Gr){var rs=Fh[Gr];!Gr&&0<ao&&(rs+=1<<ao),Wa<rs&&(Wa=rs)}var Rh=m(ba*Io,Ie),s0=ba,yf=m(s0,me);if(yf==null)var lc=null;else e(65536>=s0),lc=yf;var uc=u(Wa);if(lc==null||uc==null||Rh==null){Or.a=1;break i}var Bh=Rh;for(xo=Es=0;xo<ba;++xo){var Ya=lc[xo],Za=Ya.G,cc=Ya.H,hc=0,zh=1,Bc=0;for(Gr=0;5>Gr;++Gr){rs=Fh[Gr],Za[Gr]=Bh,cc[Gr]=Es,!Gr&&0<ao&&(rs+=1<<ao);n:{var fc,zc=rs,dc=Or,Nc=uc,ua=Bh,Qs=Es,Ts=0,Jl=dc.m,a0=ke(Jl,1);if(l(Nc,0,0,zc),a0){var Ql=ke(Jl,1)+1,l0=ke(Jl,1),_f=ke(Jl,l0==0?1:8);Nc[_f]=1,Ql==2&&(Nc[_f=ke(Jl,8)]=1);var fh=1}else{var jc=u(19),vf=ke(Jl,4)+4;if(19<vf){dc.a=3;var dh=0;break n}for(fc=0;fc<vf;++fc)jc[sc[fc]]=ke(Jl,3);var Nh=void 0,ph=void 0,Ll=dc,u0=jc,Uc=zc,pc=Nc,wa=0,$l=Ll.m,c0=8,bf=m(128,Ie);o:for(;pe(bf,0,7,u0,19);){if(ke($l,1)){var ld=2+2*ke($l,3);if((Nh=2+ke($l,ld))>Uc)break o}else Nh=Uc;for(ph=0;ph<Uc&&Nh--;){Be($l);var mc=bf[0+(127&Ce($l))];ge($l,$l.u+mc.g);var ku=mc.value;if(16>ku)pc[ph++]=ku,ku!=0&&(c0=ku);else{var h0=ku==16,qu=ku-16,mh=ll[qu],wf=ke($l,Oh[qu])+mh;if(ph+wf>Uc)break o;for(var ud=h0?c0:0;0<wf--;)pc[ph++]=ud}}wa=1;break o}wa||(Ll.a=3),fh=wa}(fh=fh&&!Jl.h)&&(Ts=pe(ua,Qs,8,Nc,zc)),fh&&Ts!=0?dh=Ts:(dc.a=3,dh=0)}if(dh==0)break i;if(zh&&ul[Gr]==1&&(zh=Bh[Es].g==0),hc+=Bh[Es].g,Es+=dh,3>=Gr){var gh,xf=uc[0];for(gh=1;gh<rs;++gh)uc[gh]>xf&&(xf=uc[gh]);Bc+=xf}}if(Ya.nd=zh,Ya.Qb=0,zh&&(Ya.qb=(Za[3][cc[3]+0].value<<24|Za[1][cc[1]+0].value<<16|Za[2][cc[2]+0].value)>>>0,hc==0&&256>Za[0][cc[0]+0].value&&(Ya.Qb=1,Ya.qb+=Za[0][cc[0]+0].value<<8)),Ya.jc=!Ya.Qb&&6>Bc,Ya.jc){var xa,Su=Ya;for(xa=0;xa<Os;++xa){var Hu=xa,eu=Su.pd[Hu],jh=Su.G[0][Su.H[0]+Hu];256<=jh.value?(eu.g=jh.g+256,eu.value=jh.value):(eu.g=0,eu.value=0,Hu>>=co(jh,8,eu),Hu>>=co(Su.G[1][Su.H[1]+Hu],16,eu),Hu>>=co(Su.G[2][Su.H[2]+Hu],0,eu),co(Su.G[3][Su.H[3]+Hu],24,eu))}}}zs.vc=Bo,zs.Wb=ba,zs.Ya=lc,zs.yc=Rh,po=1;break t}po=0}if(!(Ze=po)){ve.a=3;break e}if(0<Ai){if(St.ua=1<<Ai,!bt(St.Wa,Ai)){ve.a=1,Ze=0;break e}}else St.ua=0;var Gu=ve,f0=$e,Ko=at,Wu=Gu.s,Uh=Wu.xc;if(Gu.c=f0,Gu.i=Ko,Wu.md=li(f0,Uh),Wu.wc=Uh==0?-1:(1<<Uh)-1,ue){ve.xb=I;break e}if((ai=u($e*at))==null){ve.a=1,Ze=0;break e}Ze=(Ze=Ge(ve,ai,0,$e,at,at,null))&&!pt.h;break e}return Ze?(je!=null?je[0]=ai:(e(ai==null),e(ue)),ve.$=0,ue||Zt(St)):Zt(St),Ze}function yt(j,K){var ue=j.c*j.i,ve=ue+K+16*K;return e(j.c<=K),j.V=u(ve),j.V==null?(j.Ta=null,j.Ua=0,j.a=1,0):(j.Ta=j.V,j.Ua=j.Ba+ue+K,1)}function Ri(j,K){var ue=j.C,ve=K-ue,je=j.V,Ze=j.Ba+j.c*ue;for(e(K<=j.l.o);0<ve;){var $e=16<ve?16:ve,at=j.l.ma,pt=j.l.width,St=pt*$e,ai=at.ca,Ai=at.tb+pt*ue,wi=j.Ta,pi=j.Ua;Ee(j,$e,je,Ze),Oc(wi,pi,ai,Ai,St),dt(at,ue,ue+$e,ai,Ai,pt),ve-=$e,je+=$e*j.c,ue+=$e}e(ue==K),j.C=j.Ma=K}function Ii(){this.ub=this.yd=this.td=this.Rb=0}function Sn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function An(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function wt(){this.Yb=function(){var j=[];return function K(ue,ve,je){for(var Ze=je[ve],$e=0;$e<Ze&&(ue.push(je.length>ve+1?[]:0),!(je.length<ve+1));$e++)K(ue[$e],ve+1,je)}(j,0,[3,11]),j}()}function Tn(){this.jb=u(3),this.Wc=r([4,8],wt),this.Xc=r([4,17],wt)}function Jn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Pr(){this.ld=this.La=this.dd=this.tc=0}function sr(){this.Na=this.la=0}function Cr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mr(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function io(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pr),this.Y=0,this.ya=Array(new Mr),this.aa=0,this.l=new Qo}function Jr(){this.y=u(16),this.f=u(8),this.ea=u(8)}function mo(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new Ii,this.Kc=new Sn,this.ed=new Jn,this.Qa=new An,this.Ic=this.$c=this.Aa=0,this.D=new io,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,Oe),this.ia=0,this.pb=m(4,Cr),this.Pa=new Tn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Jr),this.Hd=0,this.rb=Array(new sr),this.sb=0,this.wa=Array(new Pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mr),this.L=this.aa=0,this.gd=r([4,2],Pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function nl(){var j=new mo;return j!=null&&(j.a=0,j.sc="OK",j.cb=0,j.Xb=0,Uo||(Uo=rr)),j}function Mo(j,K,ue){return j.a==0&&(j.a=K,j.sc=ue,j.cb=0),0}function Mt(j,K,ue){return 3<=ue&&j[K+0]==157&&j[K+1]==1&&j[K+2]==42}function tr(j,K){if(j==null)return 0;if(j.a=0,j.sc="OK",K==null)return Mo(j,2,"null VP8Io passed to VP8GetHeaders()");var ue=K.data,ve=K.w,je=K.ha;if(4>je)return Mo(j,7,"Truncated header.");var Ze=ue[ve+0]|ue[ve+1]<<8|ue[ve+2]<<16,$e=j.Od;if($e.Rb=!(1&Ze),$e.td=Ze>>1&7,$e.yd=Ze>>4&1,$e.ub=Ze>>5,3<$e.td)return Mo(j,3,"Incorrect keyframe parameters.");if(!$e.yd)return Mo(j,4,"Frame not displayable.");ve+=3,je-=3;var at=j.Kc;if($e.Rb){if(7>je)return Mo(j,7,"cannot parse picture header");if(!Mt(ue,ve,je))return Mo(j,3,"Bad code word");at.c=16383&(ue[ve+4]<<8|ue[ve+3]),at.Td=ue[ve+4]>>6,at.i=16383&(ue[ve+6]<<8|ue[ve+5]),at.Ud=ue[ve+6]>>6,ve+=7,je-=7,j.za=at.c+15>>4,j.Ub=at.i+15>>4,K.width=at.c,K.height=at.i,K.Da=0,K.j=0,K.v=0,K.va=K.width,K.o=K.height,K.da=0,K.ib=K.width,K.hb=K.height,K.U=K.width,K.T=K.height,l((Ze=j.Pa).jb,0,255,Ze.jb.length),e((Ze=j.Qa)!=null),Ze.Cb=0,Ze.Bb=0,Ze.Fb=1,l(Ze.Zb,0,0,Ze.Zb.length),l(Ze.Lb,0,0,Ze.Lb)}if($e.ub>je)return Mo(j,7,"bad partition length");et(Ze=j.m,ue,ve,$e.ub),ve+=$e.ub,je-=$e.ub,$e.Rb&&(at.Ld=st(Ze),at.Kd=st(Ze)),at=j.Qa;var pt,St=j.Pa;if(e(Ze!=null),e(at!=null),at.Cb=st(Ze),at.Cb){if(at.Bb=st(Ze),st(Ze)){for(at.Fb=st(Ze),pt=0;4>pt;++pt)at.Zb[pt]=st(Ze)?Et(Ze,7):0;for(pt=0;4>pt;++pt)at.Lb[pt]=st(Ze)?Et(Ze,6):0}if(at.Bb)for(pt=0;3>pt;++pt)St.jb[pt]=st(Ze)?nt(Ze,8):255}else at.Bb=0;if(Ze.Ka)return Mo(j,3,"cannot parse segment header");if((at=j.ed).zd=st(Ze),at.Tb=nt(Ze,6),at.wb=nt(Ze,3),at.Pc=st(Ze),at.Pc&&st(Ze)){for(St=0;4>St;++St)st(Ze)&&(at.vd[St]=Et(Ze,6));for(St=0;4>St;++St)st(Ze)&&(at.od[St]=Et(Ze,6))}if(j.L=at.Tb==0?0:at.zd?1:2,Ze.Ka)return Mo(j,3,"cannot parse filter header");var ai=je;if(je=pt=ve,ve=pt+ai,at=ai,j.Xb=(1<<nt(j.m,2))-1,ai<3*(St=j.Xb))ue=7;else{for(pt+=3*St,at-=3*St,ai=0;ai<St;++ai){var Ai=ue[je+0]|ue[je+1]<<8|ue[je+2]<<16;Ai>at&&(Ai=at),et(j.Jc[+ai],ue,pt,Ai),pt+=Ai,at-=Ai,je+=3}et(j.Jc[+St],ue,pt,at),ue=pt<ve?0:5}if(ue!=0)return Mo(j,ue,"cannot parse partitions");for(ue=nt(pt=j.m,7),je=st(pt)?Et(pt,4):0,ve=st(pt)?Et(pt,4):0,at=st(pt)?Et(pt,4):0,St=st(pt)?Et(pt,4):0,pt=st(pt)?Et(pt,4):0,ai=j.Qa,Ai=0;4>Ai;++Ai){if(ai.Cb){var wi=ai.Zb[Ai];ai.Fb||(wi+=ue)}else{if(0<Ai){j.pb[Ai]=j.pb[0];continue}wi=ue}var pi=j.pb[Ai];pi.Sc[0]=ac[Cs(wi+je,127)],pi.Sc[1]=vs[Cs(wi+0,127)],pi.Eb[0]=2*ac[Cs(wi+ve,127)],pi.Eb[1]=101581*vs[Cs(wi+at,127)]>>16,8>pi.Eb[1]&&(pi.Eb[1]=8),pi.Qc[0]=ac[Cs(wi+St,117)],pi.Qc[1]=vs[Cs(wi+pt,127)],pi.lc=wi+pt}if(!$e.Rb)return Mo(j,4,"Not a key frame.");for(st(Ze),$e=j.Pa,ue=0;4>ue;++ue){for(je=0;8>je;++je)for(ve=0;3>ve;++ve)for(at=0;11>at;++at)St=Xe(Ze,ps[ue][je][ve][at])?nt(Ze,8):Zl[ue][je][ve][at],$e.Wc[ue][je].Yb[ve][at]=St;for(je=0;17>je;++je)$e.Xc[ue][je]=$e.Wc[ue][hh[je]]}return j.kc=st(Ze),j.kc&&(j.Bd=nt(Ze,8)),j.cb=1}function rr(j,K,ue,ve,je,Ze,$e){var at=K[je].Yb[ue];for(ue=0;16>je;++je){if(!Xe(j,at[ue+0]))return je;for(;!Xe(j,at[ue+1]);)if(at=K[++je].Yb[0],ue=0,je==16)return 16;var pt=K[je+1].Yb;if(Xe(j,at[ue+2])){var St=j,ai=0;if(Xe(St,(wi=at)[(Ai=ue)+3]))if(Xe(St,wi[Ai+6])){for(at=0,Ai=2*(ai=Xe(St,wi[Ai+8]))+(wi=Xe(St,wi[Ai+9+ai])),ai=0,wi=Yl[Ai];wi[at];++at)ai+=ai+Xe(St,wi[at]);ai+=3+(8<<Ai)}else Xe(St,wi[Ai+7])?(ai=7+2*Xe(St,165),ai+=Xe(St,145)):ai=5+Xe(St,159);else ai=Xe(St,wi[Ai+4])?3+Xe(St,wi[Ai+5]):2;at=pt[2]}else ai=1,at=pt[1];pt=$e+cl[je],0>(St=j).b&&We(St);var Ai,wi=St.b,pi=(Ai=St.Ca>>1)-(St.I>>wi)>>31;--St.b,St.Ca+=pi,St.Ca|=1,St.I-=(Ai+1&pi)<<wi,Ze[pt]=((ai^pi)-pi)*ve[(0<je)+0]}return 16}function zr(j){var K=j.rb[j.sb-1];K.la=0,K.Na=0,l(j.zc,0,0,j.zc.length),j.ja=0}function Xo(j,K){if(j==null)return 0;if(K==null)return Mo(j,2,"NULL VP8Io parameter in VP8Decode().");if(!j.cb&&!tr(j,K))return 0;if(e(j.cb),K.ac==null||K.ac(K)){K.ob&&(j.L=0);var ue=vn[j.L];if(j.L==2?(j.yb=0,j.zb=0):(j.yb=K.v-ue>>4,j.zb=K.j-ue>>4,0>j.yb&&(j.yb=0),0>j.zb&&(j.zb=0)),j.Va=K.o+15+ue>>4,j.Hb=K.va+15+ue>>4,j.Hb>j.za&&(j.Hb=j.za),j.Va>j.Ub&&(j.Va=j.Ub),0<j.L){var ve=j.ed;for(ue=0;4>ue;++ue){var je;if(j.Qa.Cb){var Ze=j.Qa.Lb[ue];j.Qa.Fb||(Ze+=ve.Tb)}else Ze=ve.Tb;for(je=0;1>=je;++je){var $e=j.gd[ue][je],at=Ze;if(ve.Pc&&(at+=ve.vd[0],je&&(at+=ve.od[0])),0<(at=0>at?0:63<at?63:at)){var pt=at;0<ve.wb&&(pt=4<ve.wb?pt>>2:pt>>1)>9-ve.wb&&(pt=9-ve.wb),1>pt&&(pt=1),$e.dd=pt,$e.tc=2*at+pt,$e.ld=40<=at?2:15<=at?1:0}else $e.tc=0;$e.La=je}}}ue=0}else Mo(j,6,"Frame setup failed"),ue=j.a;if(ue=ue==0){if(ue){j.$c=0,0<j.Aa||(j.Ic=Er);e:{ue=j.Ic,ve=4*(pt=j.za);var St=32*pt,ai=pt+1,Ai=0<j.L?pt*(0<j.Aa?2:1):0,wi=(j.Aa==2?2:1)*pt;if(($e=ve+832+(je=3*(16*ue+vn[j.L])/2*St)+(Ze=j.Fa!=null&&0<j.Fa.length?j.Kc.c*j.Kc.i:0))!=$e)ue=0;else{if($e>j.Vb){if(j.Vb=0,j.Ec=u($e),j.Fc=0,j.Ec==null){ue=Mo(j,1,"no memory during frame initialization.");break e}j.Vb=$e}$e=j.Ec,at=j.Fc,j.Ac=$e,j.Bc=at,at+=ve,j.Gd=m(St,Jr),j.Hd=0,j.rb=m(ai+1,sr),j.sb=1,j.wa=Ai?m(Ai,Pr):null,j.Y=0,j.D.Nb=0,j.D.wa=j.wa,j.D.Y=j.Y,0<j.Aa&&(j.D.Y+=pt),e(!0),j.oc=$e,j.pc=at,at+=832,j.ya=m(wi,Mr),j.aa=0,j.D.ya=j.ya,j.D.aa=j.aa,j.Aa==2&&(j.D.aa+=pt),j.R=16*pt,j.B=8*pt,pt=(St=vn[j.L])*j.R,St=St/2*j.B,j.sa=$e,j.ta=at+pt,j.qa=j.sa,j.ra=j.ta+16*ue*j.R+St,j.Ha=j.qa,j.Ia=j.ra+8*ue*j.B+St,j.$c=0,at+=je,j.mb=Ze?$e:null,j.nb=Ze?at:null,e(at+Ze<=j.Fc+j.Vb),zr(j),l(j.Ac,j.Bc,0,ve),ue=1}}if(ue){if(K.ka=0,K.y=j.sa,K.O=j.ta,K.f=j.qa,K.N=j.ra,K.ea=j.Ha,K.Vd=j.Ia,K.fa=j.R,K.Rc=j.B,K.F=null,K.J=0,!Fc){for(ue=-255;255>=ue;++ue)lh[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)uh[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)Dh[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)Lr[255+ue]=0>ue?0:255<ue?255:ue;Fc=1}Yo=Ta,zu=Ia,aa=ks,Xr=Ks,_a=Vs,Oa=ys,Il=nc,Nu=hu,vu=ah,Hs=Ou,Tl=sh,ds=fu,Pn=du,Fo=pu,Hr=Br,Co=ma,ts=Va,_n=Pc,B[0]=Ut,B[1]=uu,B[2]=rt,B[3]=Ct,B[4]=Bt,B[5]=yi,B[6]=bi,B[7]=_i,B[8]=ji,B[9]=ui,la[0]=rl,la[1]=cu,la[2]=da,la[3]=pa,la[4]=U,la[5]=$,la[6]=ye,d[0]=p,d[1]=xl,d[2]=on,d[3]=Cn,d[4]=c,d[5]=Di,d[6]=F,ue=1}else ue=0}ue&&(ue=function(pi,$i){for(pi.M=0;pi.M<pi.Va;++pi.M){var Oi,Xt=pi.Jc[pi.M&pi.Xb],ii=pi.m,Hi=pi;for(Oi=0;Oi<Hi.za;++Oi){var Ki=ii,Ui=Hi,Dn=Ui.Ac,kn=Ui.Bc+4*Oi,yr=Ui.zc,On=Ui.ya[Ui.aa+Oi];if(Ui.Qa.Bb?On.$b=Xe(Ki,Ui.Pa.jb[0])?2+Xe(Ki,Ui.Pa.jb[2]):Xe(Ki,Ui.Pa.jb[1]):On.$b=0,Ui.kc&&(On.Ad=Xe(Ki,Ui.Bd)),On.Za=!Xe(Ki,145)+0,On.Za){var go=On.Ob,wo=0;for(Ui=0;4>Ui;++Ui){var Yr,qr=yr[0+Ui];for(Yr=0;4>Yr;++Yr){qr=is[Dn[kn+Yr]][qr];for(var po=ch[Xe(Ki,qr[0])];0<po;)po=ch[2*po+Xe(Ki,qr[po])];qr=-po,Dn[kn+Yr]=qr}o(go,wo,Dn,kn,4),wo+=4,yr[0+Ui]=qr}}else qr=Xe(Ki,156)?Xe(Ki,128)?1:3:Xe(Ki,163)?2:0,On.Ob[0]=qr,l(Dn,kn,qr,4),l(yr,0,qr,4);On.Dd=Xe(Ki,142)?Xe(Ki,114)?Xe(Ki,183)?1:3:2:0}if(Hi.m.Ka)return Mo(pi,7,"Premature end-of-partition0 encountered.");for(;pi.ja<pi.za;++pi.ja){if(Hi=Xt,Ki=(ii=pi).rb[ii.sb-1],Dn=ii.rb[ii.sb+ii.ja],Oi=ii.ya[ii.aa+ii.ja],kn=ii.kc?Oi.Ad:0)Ki.la=Dn.la=0,Oi.Za||(Ki.Na=Dn.Na=0),Oi.Hc=0,Oi.Gc=0,Oi.ia=0;else{var xo,Gr;if(Ki=Dn,Dn=Hi,kn=ii.Pa.Xc,yr=ii.ya[ii.aa+ii.ja],On=ii.pb[yr.$b],Ui=yr.ad,go=0,wo=ii.rb[ii.sb-1],qr=Yr=0,l(Ui,go,0,384),yr.Za)var Es=0,Or=kn[3];else{po=u(16);var ns=Ki.Na+wo.Na;if(ns=Uo(Dn,kn[1],ns,On.Eb,0,po,0),Ki.Na=wo.Na=(0<ns)+0,1<ns)Yo(po,0,Ui,go);else{var Bs=po[0]+3>>3;for(po=0;256>po;po+=16)Ui[go+po]=Bs}Es=1,Or=kn[0]}var ao=15&Ki.la,as=15&wo.la;for(po=0;4>po;++po){var Is=1&as;for(Bs=Gr=0;4>Bs;++Bs)ao=ao>>1|(Is=(ns=Uo(Dn,Or,ns=Is+(1&ao),On.Sc,Es,Ui,go))>Es)<<7,Gr=Gr<<2|(3<ns?3:1<ns?2:Ui[go+0]!=0),go+=16;ao>>=4,as=as>>1|Is<<7,Yr=(Yr<<8|Gr)>>>0}for(Or=ao,Es=as>>4,xo=0;4>xo;xo+=2){for(Gr=0,ao=Ki.la>>4+xo,as=wo.la>>4+xo,po=0;2>po;++po){for(Is=1&as,Bs=0;2>Bs;++Bs)ns=Is+(1&ao),ao=ao>>1|(Is=0<(ns=Uo(Dn,kn[2],ns,On.Qc,0,Ui,go)))<<3,Gr=Gr<<2|(3<ns?3:1<ns?2:Ui[go+0]!=0),go+=16;ao>>=2,as=as>>1|Is<<5}qr|=Gr<<4*xo,Or|=ao<<4<<xo,Es|=(240&as)<<xo}Ki.la=Or,wo.la=Es,yr.Hc=Yr,yr.Gc=qr,yr.ia=43690&qr?0:On.ia,kn=!(Yr|qr)}if(0<ii.L&&(ii.wa[ii.Y+ii.ja]=ii.gd[Oi.$b][Oi.Za],ii.wa[ii.Y+ii.ja].La|=!kn),Hi.Ka)return Mo(pi,7,"Premature end-of-file encountered.")}if(zr(pi),ii=$i,Hi=1,Oi=(Xt=pi).D,Ki=0<Xt.L&&Xt.M>=Xt.zb&&Xt.M<=Xt.Va,Xt.Aa==0)e:{if(Oi.M=Xt.M,Oi.uc=Ki,Ru(Xt,Oi),Hi=1,Oi=(Gr=Xt.D).Nb,Ki=(qr=vn[Xt.L])*Xt.R,Dn=qr/2*Xt.B,po=16*Oi*Xt.R,Bs=8*Oi*Xt.B,kn=Xt.sa,yr=Xt.ta-Ki+po,On=Xt.qa,Ui=Xt.ra-Dn+Bs,go=Xt.Ha,wo=Xt.Ia-Dn+Bs,as=(ao=Gr.M)==0,Yr=ao>=Xt.Va-1,Xt.Aa==2&&Ru(Xt,Gr),Gr.uc)for(Is=(ns=Xt).D.M,e(ns.D.uc),Gr=ns.yb;Gr<ns.Hb;++Gr){Es=Gr,Or=Is;var zs=(Bo=(rs=ns).D).Nb;xo=rs.R;var Bo=Bo.wa[Bo.Y+Es],ba=rs.sa,Wa=rs.ta+16*zs*xo+16*Es,Io=Bo.dd,bs=Bo.tc;if(bs!=0)if(e(3<=bs),rs.L==1)0<Es&&Co(ba,Wa,xo,bs+4),Bo.La&&_n(ba,Wa,xo,bs),0<Or&&Hr(ba,Wa,xo,bs+4),Bo.La&&ts(ba,Wa,xo,bs);else{var Kl=rs.B,Xa=rs.qa,hl=rs.ra+8*zs*Kl+8*Es,fl=rs.Ha,rs=rs.Ia+8*zs*Kl+8*Es;zs=Bo.ld,0<Es&&(Nu(ba,Wa,xo,bs+4,Io,zs),Hs(Xa,hl,fl,rs,Kl,bs+4,Io,zs)),Bo.La&&(ds(ba,Wa,xo,bs,Io,zs),Fo(Xa,hl,fl,rs,Kl,bs,Io,zs)),0<Or&&(Il(ba,Wa,xo,bs+4,Io,zs),vu(Xa,hl,fl,rs,Kl,bs+4,Io,zs)),Bo.La&&(Tl(ba,Wa,xo,bs,Io,zs),Pn(Xa,hl,fl,rs,Kl,bs,Io,zs))}}if(Xt.ia&&alert("todo:DitherRow"),ii.put!=null){if(Gr=16*ao,ao=16*(ao+1),as?(ii.y=Xt.sa,ii.O=Xt.ta+po,ii.f=Xt.qa,ii.N=Xt.ra+Bs,ii.ea=Xt.Ha,ii.W=Xt.Ia+Bs):(Gr-=qr,ii.y=kn,ii.O=yr,ii.f=On,ii.N=Ui,ii.ea=go,ii.W=wo),Yr||(ao-=qr),ao>ii.o&&(ao=ii.o),ii.F=null,ii.J=null,Xt.Fa!=null&&0<Xt.Fa.length&&Gr<ao&&(ii.J=bo(Xt,ii,Gr,ao-Gr),ii.F=Xt.mb,ii.F==null&&ii.F.length==0)){Hi=Mo(Xt,3,"Could not decode alpha data.");break e}Gr<ii.j&&(qr=ii.j-Gr,Gr=ii.j,e(!(1&qr)),ii.O+=Xt.R*qr,ii.N+=Xt.B*(qr>>1),ii.W+=Xt.B*(qr>>1),ii.F!=null&&(ii.J+=ii.width*qr)),Gr<ao&&(ii.O+=ii.v,ii.N+=ii.v>>1,ii.W+=ii.v>>1,ii.F!=null&&(ii.J+=ii.v),ii.ka=Gr-ii.j,ii.U=ii.va-ii.v,ii.T=ao-Gr,Hi=ii.put(ii))}Oi+1!=Xt.Ic||Yr||(o(Xt.sa,Xt.ta-Ki,kn,yr+16*Xt.R,Ki),o(Xt.qa,Xt.ra-Dn,On,Ui+8*Xt.B,Dn),o(Xt.Ha,Xt.Ia-Dn,go,wo+8*Xt.B,Dn))}if(!Hi)return Mo(pi,6,"Output aborted.")}return 1}(j,K)),K.bc!=null&&K.bc(K),ue&=1}return ue?(j.cb=0,ue):0}function Do(j,K,ue,ve,je){je=j[K+ue+32*ve]+(je>>3),j[K+ue+32*ve]=-256&je?0>je?0:255:je}function Ea(j,K,ue,ve,je,Ze){Do(j,K,0,ue,ve+je),Do(j,K,1,ue,ve+Ze),Do(j,K,2,ue,ve-Ze),Do(j,K,3,ue,ve-je)}function es(j){return(20091*j>>16)+j}function Us(j,K,ue,ve){var je,Ze=0,$e=u(16);for(je=0;4>je;++je){var at=j[K+0]+j[K+8],pt=j[K+0]-j[K+8],St=(35468*j[K+4]>>16)-es(j[K+12]),ai=es(j[K+4])+(35468*j[K+12]>>16);$e[Ze+0]=at+ai,$e[Ze+1]=pt+St,$e[Ze+2]=pt-St,$e[Ze+3]=at-ai,Ze+=4,K++}for(je=Ze=0;4>je;++je)at=(j=$e[Ze+0]+4)+$e[Ze+8],pt=j-$e[Ze+8],St=(35468*$e[Ze+4]>>16)-es($e[Ze+12]),Do(ue,ve,0,0,at+(ai=es($e[Ze+4])+(35468*$e[Ze+12]>>16))),Do(ue,ve,1,0,pt+St),Do(ue,ve,2,0,pt-St),Do(ue,ve,3,0,at-ai),Ze++,ve+=32}function ys(j,K,ue,ve){var je=j[K+0]+4,Ze=35468*j[K+4]>>16,$e=es(j[K+4]),at=35468*j[K+1]>>16;Ea(ue,ve,0,je+$e,j=es(j[K+1]),at),Ea(ue,ve,1,je+Ze,j,at),Ea(ue,ve,2,je-Ze,j,at),Ea(ue,ve,3,je-$e,j,at)}function Ia(j,K,ue,ve,je){Us(j,K,ue,ve),je&&Us(j,K+16,ue,ve+4)}function ks(j,K,ue,ve){zu(j,K+0,ue,ve,1),zu(j,K+32,ue,ve+128,1)}function Ks(j,K,ue,ve){var je;for(j=j[K+0]+4,je=0;4>je;++je)for(K=0;4>K;++K)Do(ue,ve,K,je,j)}function Vs(j,K,ue,ve){j[K+0]&&Xr(j,K+0,ue,ve),j[K+16]&&Xr(j,K+16,ue,ve+4),j[K+32]&&Xr(j,K+32,ue,ve+128),j[K+48]&&Xr(j,K+48,ue,ve+128+4)}function Ta(j,K,ue,ve){var je,Ze=u(16);for(je=0;4>je;++je){var $e=j[K+0+je]+j[K+12+je],at=j[K+4+je]+j[K+8+je],pt=j[K+4+je]-j[K+8+je],St=j[K+0+je]-j[K+12+je];Ze[0+je]=$e+at,Ze[8+je]=$e-at,Ze[4+je]=St+pt,Ze[12+je]=St-pt}for(je=0;4>je;++je)$e=(j=Ze[0+4*je]+3)+Ze[3+4*je],at=Ze[1+4*je]+Ze[2+4*je],pt=Ze[1+4*je]-Ze[2+4*je],St=j-Ze[3+4*je],ue[ve+0]=$e+at>>3,ue[ve+16]=St+pt>>3,ue[ve+32]=$e-at>>3,ue[ve+48]=St-pt>>3,ve+=64}function wl(j,K,ue){var ve,je=K-32,Ze=Js,$e=255-j[je-1];for(ve=0;ve<ue;++ve){var at,pt=Ze,St=$e+j[K-1];for(at=0;at<ue;++at)j[K+at]=pt[St+j[je+at]];K+=32}}function uu(j,K){wl(j,K,4)}function xl(j,K){wl(j,K,8)}function cu(j,K){wl(j,K,16)}function da(j,K){var ue;for(ue=0;16>ue;++ue)o(j,K+32*ue,j,K-32,16)}function pa(j,K){var ue;for(ue=16;0<ue;--ue)l(j,K,j[K-1],16),K+=32}function Ao(j,K,ue){var ve;for(ve=0;16>ve;++ve)l(K,ue+32*ve,j,16)}function rl(j,K){var ue,ve=16;for(ue=0;16>ue;++ue)ve+=j[K-1+32*ue]+j[K+ue-32];Ao(ve>>5,j,K)}function U(j,K){var ue,ve=8;for(ue=0;16>ue;++ue)ve+=j[K-1+32*ue];Ao(ve>>4,j,K)}function $(j,K){var ue,ve=8;for(ue=0;16>ue;++ue)ve+=j[K+ue-32];Ao(ve>>4,j,K)}function ye(j,K){Ao(128,j,K)}function De(j,K,ue){return j+2*K+ue+2>>2}function rt(j,K){var ue,ve=K-32;for(ve=new Uint8Array([De(j[ve-1],j[ve+0],j[ve+1]),De(j[ve+0],j[ve+1],j[ve+2]),De(j[ve+1],j[ve+2],j[ve+3]),De(j[ve+2],j[ve+3],j[ve+4])]),ue=0;4>ue;++ue)o(j,K+32*ue,ve,0,ve.length)}function Ct(j,K){var ue=j[K-1],ve=j[K-1+32],je=j[K-1+64],Ze=j[K-1+96];gt(j,K+0,16843009*De(j[K-1-32],ue,ve)),gt(j,K+32,16843009*De(ue,ve,je)),gt(j,K+64,16843009*De(ve,je,Ze)),gt(j,K+96,16843009*De(je,Ze,Ze))}function Ut(j,K){var ue,ve=4;for(ue=0;4>ue;++ue)ve+=j[K+ue-32]+j[K-1+32*ue];for(ve>>=3,ue=0;4>ue;++ue)l(j,K+32*ue,ve,4)}function Bt(j,K){var ue=j[K-1+0],ve=j[K-1+32],je=j[K-1+64],Ze=j[K-1-32],$e=j[K+0-32],at=j[K+1-32],pt=j[K+2-32],St=j[K+3-32];j[K+0+96]=De(ve,je,j[K-1+96]),j[K+1+96]=j[K+0+64]=De(ue,ve,je),j[K+2+96]=j[K+1+64]=j[K+0+32]=De(Ze,ue,ve),j[K+3+96]=j[K+2+64]=j[K+1+32]=j[K+0+0]=De($e,Ze,ue),j[K+3+64]=j[K+2+32]=j[K+1+0]=De(at,$e,Ze),j[K+3+32]=j[K+2+0]=De(pt,at,$e),j[K+3+0]=De(St,pt,at)}function bi(j,K){var ue=j[K+1-32],ve=j[K+2-32],je=j[K+3-32],Ze=j[K+4-32],$e=j[K+5-32],at=j[K+6-32],pt=j[K+7-32];j[K+0+0]=De(j[K+0-32],ue,ve),j[K+1+0]=j[K+0+32]=De(ue,ve,je),j[K+2+0]=j[K+1+32]=j[K+0+64]=De(ve,je,Ze),j[K+3+0]=j[K+2+32]=j[K+1+64]=j[K+0+96]=De(je,Ze,$e),j[K+3+32]=j[K+2+64]=j[K+1+96]=De(Ze,$e,at),j[K+3+64]=j[K+2+96]=De($e,at,pt),j[K+3+96]=De(at,pt,pt)}function yi(j,K){var ue=j[K-1+0],ve=j[K-1+32],je=j[K-1+64],Ze=j[K-1-32],$e=j[K+0-32],at=j[K+1-32],pt=j[K+2-32],St=j[K+3-32];j[K+0+0]=j[K+1+64]=Ze+$e+1>>1,j[K+1+0]=j[K+2+64]=$e+at+1>>1,j[K+2+0]=j[K+3+64]=at+pt+1>>1,j[K+3+0]=pt+St+1>>1,j[K+0+96]=De(je,ve,ue),j[K+0+64]=De(ve,ue,Ze),j[K+0+32]=j[K+1+96]=De(ue,Ze,$e),j[K+1+32]=j[K+2+96]=De(Ze,$e,at),j[K+2+32]=j[K+3+96]=De($e,at,pt),j[K+3+32]=De(at,pt,St)}function _i(j,K){var ue=j[K+0-32],ve=j[K+1-32],je=j[K+2-32],Ze=j[K+3-32],$e=j[K+4-32],at=j[K+5-32],pt=j[K+6-32],St=j[K+7-32];j[K+0+0]=ue+ve+1>>1,j[K+1+0]=j[K+0+64]=ve+je+1>>1,j[K+2+0]=j[K+1+64]=je+Ze+1>>1,j[K+3+0]=j[K+2+64]=Ze+$e+1>>1,j[K+0+32]=De(ue,ve,je),j[K+1+32]=j[K+0+96]=De(ve,je,Ze),j[K+2+32]=j[K+1+96]=De(je,Ze,$e),j[K+3+32]=j[K+2+96]=De(Ze,$e,at),j[K+3+64]=De($e,at,pt),j[K+3+96]=De(at,pt,St)}function ui(j,K){var ue=j[K-1+0],ve=j[K-1+32],je=j[K-1+64],Ze=j[K-1+96];j[K+0+0]=ue+ve+1>>1,j[K+2+0]=j[K+0+32]=ve+je+1>>1,j[K+2+32]=j[K+0+64]=je+Ze+1>>1,j[K+1+0]=De(ue,ve,je),j[K+3+0]=j[K+1+32]=De(ve,je,Ze),j[K+3+32]=j[K+1+64]=De(je,Ze,Ze),j[K+3+64]=j[K+2+64]=j[K+0+96]=j[K+1+96]=j[K+2+96]=j[K+3+96]=Ze}function ji(j,K){var ue=j[K-1+0],ve=j[K-1+32],je=j[K-1+64],Ze=j[K-1+96],$e=j[K-1-32],at=j[K+0-32],pt=j[K+1-32],St=j[K+2-32];j[K+0+0]=j[K+2+32]=ue+$e+1>>1,j[K+0+32]=j[K+2+64]=ve+ue+1>>1,j[K+0+64]=j[K+2+96]=je+ve+1>>1,j[K+0+96]=Ze+je+1>>1,j[K+3+0]=De(at,pt,St),j[K+2+0]=De($e,at,pt),j[K+1+0]=j[K+3+32]=De(ue,$e,at),j[K+1+32]=j[K+3+64]=De(ve,ue,$e),j[K+1+64]=j[K+3+96]=De(je,ve,ue),j[K+1+96]=De(Ze,je,ve)}function on(j,K){var ue;for(ue=0;8>ue;++ue)o(j,K+32*ue,j,K-32,8)}function Cn(j,K){var ue;for(ue=0;8>ue;++ue)l(j,K,j[K-1],8),K+=32}function ft(j,K,ue){var ve;for(ve=0;8>ve;++ve)l(K,ue+32*ve,j,8)}function p(j,K){var ue,ve=8;for(ue=0;8>ue;++ue)ve+=j[K+ue-32]+j[K-1+32*ue];ft(ve>>4,j,K)}function Di(j,K){var ue,ve=4;for(ue=0;8>ue;++ue)ve+=j[K+ue-32];ft(ve>>3,j,K)}function c(j,K){var ue,ve=4;for(ue=0;8>ue;++ue)ve+=j[K-1+32*ue];ft(ve>>3,j,K)}function F(j,K){ft(128,j,K)}function mn(j,K,ue){var ve=j[K-ue],je=j[K+0],Ze=3*(je-ve)+rc[1020+j[K-2*ue]-j[K+ue]],$e=Zo[112+(Ze+4>>3)];j[K-ue]=Js[255+ve+Zo[112+(Ze+3>>3)]],j[K+0]=Js[255+je-$e]}function Qn(j,K,ue,ve){var je=j[K+0],Ze=j[K+ue];return Go[255+j[K-2*ue]-j[K-ue]]>ve||Go[255+Ze-je]>ve}function vo(j,K,ue,ve){return 4*Go[255+j[K-ue]-j[K+0]]+Go[255+j[K-2*ue]-j[K+ue]]<=ve}function ne(j,K,ue,ve,je){var Ze=j[K-3*ue],$e=j[K-2*ue],at=j[K-ue],pt=j[K+0],St=j[K+ue],ai=j[K+2*ue],Ai=j[K+3*ue];return 4*Go[255+at-pt]+Go[255+$e-St]>ve?0:Go[255+j[K-4*ue]-Ze]<=je&&Go[255+Ze-$e]<=je&&Go[255+$e-at]<=je&&Go[255+Ai-ai]<=je&&Go[255+ai-St]<=je&&Go[255+St-pt]<=je}function Br(j,K,ue,ve){var je=2*ve+1;for(ve=0;16>ve;++ve)vo(j,K+ve,ue,je)&&mn(j,K+ve,ue)}function ma(j,K,ue,ve){var je=2*ve+1;for(ve=0;16>ve;++ve)vo(j,K+ve*ue,1,je)&&mn(j,K+ve*ue,1)}function Va(j,K,ue,ve){var je;for(je=3;0<je;--je)Br(j,K+=4*ue,ue,ve)}function Pc(j,K,ue,ve){var je;for(je=3;0<je;--je)ma(j,K+=4,ue,ve)}function Al(j,K,ue,ve,je,Ze,$e,at){for(Ze=2*Ze+1;0<je--;){if(ne(j,K,ue,Ze,$e))if(Qn(j,K,ue,at))mn(j,K,ue);else{var pt=j,St=K,ai=ue,Ai=pt[St-2*ai],wi=pt[St-ai],pi=pt[St+0],$i=pt[St+ai],Oi=pt[St+2*ai],Xt=27*(Hi=rc[1020+3*(pi-wi)+rc[1020+Ai-$i]])+63>>7,ii=18*Hi+63>>7,Hi=9*Hi+63>>7;pt[St-3*ai]=Js[255+pt[St-3*ai]+Hi],pt[St-2*ai]=Js[255+Ai+ii],pt[St-ai]=Js[255+wi+Xt],pt[St+0]=Js[255+pi-Xt],pt[St+ai]=Js[255+$i-ii],pt[St+2*ai]=Js[255+Oi-Hi]}K+=ve}}function qs(j,K,ue,ve,je,Ze,$e,at){for(Ze=2*Ze+1;0<je--;){if(ne(j,K,ue,Ze,$e))if(Qn(j,K,ue,at))mn(j,K,ue);else{var pt=j,St=K,ai=ue,Ai=pt[St-ai],wi=pt[St+0],pi=pt[St+ai],$i=Zo[112+((Oi=3*(wi-Ai))+4>>3)],Oi=Zo[112+(Oi+3>>3)],Xt=$i+1>>1;pt[St-2*ai]=Js[255+pt[St-2*ai]+Xt],pt[St-ai]=Js[255+Ai+Oi],pt[St+0]=Js[255+wi-$i],pt[St+ai]=Js[255+pi-Xt]}K+=ve}}function nc(j,K,ue,ve,je,Ze){Al(j,K,ue,1,16,ve,je,Ze)}function hu(j,K,ue,ve,je,Ze){Al(j,K,1,ue,16,ve,je,Ze)}function sh(j,K,ue,ve,je,Ze){var $e;for($e=3;0<$e;--$e)qs(j,K+=4*ue,ue,1,16,ve,je,Ze)}function fu(j,K,ue,ve,je,Ze){var $e;for($e=3;0<$e;--$e)qs(j,K+=4,1,ue,16,ve,je,Ze)}function ah(j,K,ue,ve,je,Ze,$e,at){Al(j,K,je,1,8,Ze,$e,at),Al(ue,ve,je,1,8,Ze,$e,at)}function Ou(j,K,ue,ve,je,Ze,$e,at){Al(j,K,1,je,8,Ze,$e,at),Al(ue,ve,1,je,8,Ze,$e,at)}function du(j,K,ue,ve,je,Ze,$e,at){qs(j,K+4*je,je,1,8,Ze,$e,at),qs(ue,ve+4*je,je,1,8,Ze,$e,at)}function pu(j,K,ue,ve,je,Ze,$e,at){qs(j,K+4,1,je,8,Ze,$e,at),qs(ue,ve+4,1,je,8,Ze,$e,at)}function Vl(){this.ba=new Zr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new fn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fn(){this.ua=0,this.Wa=new Ke,this.vb=new Ke,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new Ie}function Fu(){this.xb=this.a=0,this.l=new Qo,this.ca=new Zr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new le,this.Pb=0,this.wd=new le,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fn,this.ab=0,this.gc=m(4,Nn),this.Oc=0}function qa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ga(j,K,ue,ve,je,Ze,$e){for(j=j==null?0:j[K+0],K=0;K<$e;++K)je[Ze+K]=j+ue[ve+K]&255,j=je[Ze+K]}function ql(j,K,ue,ve,je,Ze,$e){var at;if(j==null)ga(null,null,ue,ve,je,Ze,$e);else for(at=0;at<$e;++at)je[Ze+at]=j[K+at]+ue[ve+at]&255}function ya(j,K,ue,ve,je,Ze,$e){if(j==null)ga(null,null,ue,ve,je,Ze,$e);else{var at,pt=j[K+0],St=pt,ai=pt;for(at=0;at<$e;++at)St=ai+(pt=j[K+at])-St,ai=ue[ve+at]+(-256&St?0>St?0:255:St)&255,St=pt,je[Ze+at]=ai}}function bo(j,K,ue,ve){var je=K.width,Ze=K.o;if(e(j!=null&&K!=null),0>ue||0>=ve||ue+ve>Ze)return null;if(!j.Cc){if(j.ga==null){var $e;if(j.ga=new qa,($e=j.ga==null)||($e=K.width*K.o,e(j.Gb.length==0),j.Gb=u($e),j.Uc=0,j.Gb==null?$e=0:(j.mb=j.Gb,j.nb=j.Uc,j.rc=null,$e=1),$e=!$e),!$e){$e=j.ga;var at=j.Fa,pt=j.P,St=j.qc,ai=j.mb,Ai=j.nb,wi=pt+1,pi=St-1,$i=$e.l;if(e(at!=null&&ai!=null&&K!=null),z[0]=null,z[1]=ga,z[2]=ql,z[3]=ya,$e.ca=ai,$e.tb=Ai,$e.c=K.width,$e.i=K.height,e(0<$e.c&&0<$e.i),1>=St)K=0;else if($e.$a=at[pt+0]>>0&3,$e.Z=at[pt+0]>>2&3,$e.Lc=at[pt+0]>>4&3,pt=at[pt+0]>>6&3,0>$e.$a||1<$e.$a||4<=$e.Z||1<$e.Lc||pt)K=0;else if($i.put=lr,$i.ac=Wn,$i.bc=Kr,$i.ma=$e,$i.width=K.width,$i.height=K.height,$i.Da=K.Da,$i.v=K.v,$i.va=K.va,$i.j=K.j,$i.o=K.o,$e.$a)e:{e($e.$a==1),K=Rt();t:for(;;){if(K==null){K=0;break e}if(e($e!=null),$e.mc=K,K.c=$e.c,K.i=$e.i,K.l=$e.l,K.l.ma=$e,K.l.width=$e.c,K.l.height=$e.i,K.a=0,it(K.m,at,wi,pi),!oi($e.c,$e.i,1,K,null)||(K.ab==1&&K.gc[0].hc==3&&ct(K.s)?($e.ic=1,at=K.c*K.i,K.Ta=null,K.Ua=0,K.V=u(at),K.Ba=0,K.V==null?(K.a=1,K=0):K=1):($e.ic=0,K=yt(K,$e.c)),!K))break t;K=1;break e}$e.mc=null,K=0}else K=pi>=$e.c*$e.i;$e=!K}if($e)return null;j.ga.Lc!=1?j.Ga=0:ve=Ze-ue}e(j.ga!=null),e(ue+ve<=Ze);e:{if(K=(at=j.ga).c,Ze=at.l.o,at.$a==0){if(wi=j.rc,pi=j.Vc,$i=j.Fa,pt=j.P+1+ue*K,St=j.mb,ai=j.nb+ue*K,e(pt<=j.P+j.qc),at.Z!=0)for(e(z[at.Z]!=null),$e=0;$e<ve;++$e)z[at.Z](wi,pi,$i,pt,St,ai,K),wi=St,pi=ai,ai+=K,pt+=K;else for($e=0;$e<ve;++$e)o(St,ai,$i,pt,K),wi=St,pi=ai,ai+=K,pt+=K;j.rc=wi,j.Vc=pi}else{if(e(at.mc!=null),K=ue+ve,e(($e=at.mc)!=null),e(K<=$e.i),$e.C>=K)K=1;else if(at.ic||hi(),at.ic){at=$e.V,wi=$e.Ba,pi=$e.c;var Oi=$e.i,Xt=($i=1,pt=$e.$/pi,St=$e.$%pi,ai=$e.m,Ai=$e.s,$e.$),ii=pi*Oi,Hi=pi*K,Ki=Ai.wc,Ui=Xt<Hi?Te(Ai,St,pt):null;e(Xt<=ii),e(K<=Oi),e(ct(Ai));t:for(;;){for(;!ai.h&&Xt<Hi;){if(St&Ki||(Ui=Te(Ai,St,pt)),e(Ui!=null),Be(ai),256>(Oi=_o(Ui.G[0],Ui.H[0],ai)))at[wi+Xt]=Oi,++Xt,++St>=pi&&(St=0,++pt<=K&&!(pt%16)&&jt($e,pt));else{if(!(280>Oi)){$i=0;break t}Oi=He(Oi-256,ai);var Dn,kn=_o(Ui.G[4],Ui.H[4],ai);if(Be(ai),!(Xt>=(kn=yo(pi,kn=He(kn,ai)))&&ii-Xt>=Oi)){$i=0;break t}for(Dn=0;Dn<Oi;++Dn)at[wi+Xt+Dn]=at[wi+Xt+Dn-kn];for(Xt+=Oi,St+=Oi;St>=pi;)St-=pi,++pt<=K&&!(pt%16)&&jt($e,pt);Xt<Hi&&St&Ki&&(Ui=Te(Ai,St,pt))}e(ai.h==he(ai))}jt($e,pt>K?K:pt);break t}!$i||ai.h&&Xt<ii?($i=0,$e.a=ai.h?5:3):$e.$=Xt,K=$i}else K=Ge($e,$e.V,$e.Ba,$e.c,$e.i,K,Ri);if(!K){ve=0;break e}}ue+ve>=Ze&&(j.Cc=1),ve=1}if(!ve)return null;if(j.Cc&&((ve=j.ga)!=null&&(ve.mc=null),j.ga=null,0<j.Ga))return alert("todo:WebPDequantizeLevels"),null}return j.nb+ue*je}function se(j,K,ue,ve,je,Ze){for(;0<je--;){var $e,at=j,pt=K+(ue?1:0),St=j,ai=K+(ue?0:3);for($e=0;$e<ve;++$e){var Ai=St[ai+4*$e];Ai!=255&&(Ai*=32897,at[pt+4*$e+0]=at[pt+4*$e+0]*Ai>>23,at[pt+4*$e+1]=at[pt+4*$e+1]*Ai>>23,at[pt+4*$e+2]=at[pt+4*$e+2]*Ai>>23)}K+=Ze}}function Ue(j,K,ue,ve,je){for(;0<ve--;){var Ze;for(Ze=0;Ze<ue;++Ze){var $e=j[K+2*Ze+0],at=15&(St=j[K+2*Ze+1]),pt=4369*at,St=(240&St|St>>4)*pt>>16;j[K+2*Ze+0]=(240&$e|$e>>4)*pt>>16&240|(15&$e|$e<<4)*pt>>16>>4&15,j[K+2*Ze+1]=240&St|at}K+=je}}function At(j,K,ue,ve,je,Ze,$e,at){var pt,St,ai=255;for(St=0;St<je;++St){for(pt=0;pt<ve;++pt){var Ai=j[K+pt];Ze[$e+4*pt]=Ai,ai&=Ai}K+=ue,$e+=at}return ai!=255}function Qt(j,K,ue,ve,je){var Ze;for(Ze=0;Ze<je;++Ze)ue[ve+Ze]=j[K+Ze]>>8}function hi(){Fa=se,ju=Ue,Uu=At,Oc=Qt}function qi(j,K,ue){oe[j]=function(ve,je,Ze,$e,at,pt,St,ai,Ai,wi,pi,$i,Oi,Xt,ii,Hi,Ki){var Ui,Dn=Ki-1>>1,kn=at[pt+0]|St[ai+0]<<16,yr=Ai[wi+0]|pi[$i+0]<<16;e(ve!=null);var On=3*kn+yr+131074>>2;for(K(ve[je+0],255&On,On>>16,Oi,Xt),Ze!=null&&(On=3*yr+kn+131074>>2,K(Ze[$e+0],255&On,On>>16,ii,Hi)),Ui=1;Ui<=Dn;++Ui){var go=at[pt+Ui]|St[ai+Ui]<<16,wo=Ai[wi+Ui]|pi[$i+Ui]<<16,Yr=kn+go+yr+wo+524296,qr=Yr+2*(go+yr)>>3;On=qr+kn>>1,kn=(Yr=Yr+2*(kn+wo)>>3)+go>>1,K(ve[je+2*Ui-1],255&On,On>>16,Oi,Xt+(2*Ui-1)*ue),K(ve[je+2*Ui-0],255&kn,kn>>16,Oi,Xt+(2*Ui-0)*ue),Ze!=null&&(On=Yr+yr>>1,kn=qr+wo>>1,K(Ze[$e+2*Ui-1],255&On,On>>16,ii,Hi+(2*Ui-1)*ue),K(Ze[$e+2*Ui+0],255&kn,kn>>16,ii,Hi+(2*Ui+0)*ue)),kn=go,yr=wo}1&Ki||(On=3*kn+yr+131074>>2,K(ve[je+Ki-1],255&On,On>>16,Oi,Xt+(Ki-1)*ue),Ze!=null&&(On=3*yr+kn+131074>>2,K(Ze[$e+Ki-1],255&On,On>>16,ii,Hi+(Ki-1)*ue)))}}function an(){X[Ga]=ie,X[oc]=_e,X[bu]=de,X[wu]=Ae,X[Xl]=ze,X[no]=Je,X[va]=ot,X[Ro]=_e,X[xu]=Ae,X[Au]=ze,X[Rc]=Je}function Kn(j){return j&~xi?0>j?0:255:j>>fi}function gr(j,K){return Kn((19077*j>>8)+(26149*K>>8)-14234)}function Nr(j,K,ue){return Kn((19077*j>>8)-(6419*K>>8)-(13320*ue>>8)+8708)}function Wr(j,K){return Kn((19077*j>>8)+(33050*K>>8)-17685)}function to(j,K,ue,ve,je){ve[je+0]=gr(j,ue),ve[je+1]=Nr(j,K,ue),ve[je+2]=Wr(j,K)}function Oo(j,K,ue,ve,je){ve[je+0]=Wr(j,K),ve[je+1]=Nr(j,K,ue),ve[je+2]=gr(j,ue)}function jo(j,K,ue,ve,je){var Ze=Nr(j,K,ue);K=Ze<<3&224|Wr(j,K)>>3,ve[je+0]=248&gr(j,ue)|Ze>>5,ve[je+1]=K}function Ho(j,K,ue,ve,je){var Ze=240&Wr(j,K)|15;ve[je+0]=240&gr(j,ue)|Nr(j,K,ue)>>4,ve[je+1]=Ze}function Ss(j,K,ue,ve,je){ve[je+0]=255,to(j,K,ue,ve,je+1)}function fs(j,K,ue,ve,je){Oo(j,K,ue,ve,je),ve[je+3]=255}function jr(j,K,ue,ve,je){to(j,K,ue,ve,je),ve[je+3]=255}function Cs(j,K){return 0>j?0:j>K?K:j}function _s(j,K,ue){oe[j]=function(ve,je,Ze,$e,at,pt,St,ai,Ai){for(var wi=ai+(-2&Ai)*ue;ai!=wi;)K(ve[je+0],Ze[$e+0],at[pt+0],St,ai),K(ve[je+1],Ze[$e+0],at[pt+0],St,ai+ue),je+=2,++$e,++pt,ai+=2*ue;1&Ai&&K(ve[je+0],Ze[$e+0],at[pt+0],St,ai)}}function Hl(j,K,ue){return ue==0?j==0?K==0?6:5:K==0?4:0:ue}function kl(j,K,ue,ve,je){switch(j>>>30){case 3:zu(K,ue,ve,je,0);break;case 2:Oa(K,ue,ve,je);break;case 1:Xr(K,ue,ve,je)}}function Ru(j,K){var ue,ve,je=K.M,Ze=K.Nb,$e=j.oc,at=j.pc+40,pt=j.oc,St=j.pc+584,ai=j.oc,Ai=j.pc+600;for(ue=0;16>ue;++ue)$e[at+32*ue-1]=129;for(ue=0;8>ue;++ue)pt[St+32*ue-1]=129,ai[Ai+32*ue-1]=129;for(0<je?$e[at-1-32]=pt[St-1-32]=ai[Ai-1-32]=129:(l($e,at-32-1,127,21),l(pt,St-32-1,127,9),l(ai,Ai-32-1,127,9)),ve=0;ve<j.za;++ve){var wi=K.ya[K.aa+ve];if(0<ve){for(ue=-1;16>ue;++ue)o($e,at+32*ue-4,$e,at+32*ue+12,4);for(ue=-1;8>ue;++ue)o(pt,St+32*ue-4,pt,St+32*ue+4,4),o(ai,Ai+32*ue-4,ai,Ai+32*ue+4,4)}var pi=j.Gd,$i=j.Hd+ve,Oi=wi.ad,Xt=wi.Hc;if(0<je&&(o($e,at-32,pi[$i].y,0,16),o(pt,St-32,pi[$i].f,0,8),o(ai,Ai-32,pi[$i].ea,0,8)),wi.Za){var ii=$e,Hi=at-32+16;for(0<je&&(ve>=j.za-1?l(ii,Hi,pi[$i].y[15],4):o(ii,Hi,pi[$i+1].y,0,4)),ue=0;4>ue;ue++)ii[Hi+128+ue]=ii[Hi+256+ue]=ii[Hi+384+ue]=ii[Hi+0+ue];for(ue=0;16>ue;++ue,Xt<<=2)ii=$e,Hi=at+Rn[ue],B[wi.Ob[ue]](ii,Hi),kl(Xt,Oi,16*+ue,ii,Hi)}else if(ii=Hl(ve,je,wi.Ob[0]),la[ii]($e,at),Xt!=0)for(ue=0;16>ue;++ue,Xt<<=2)kl(Xt,Oi,16*+ue,$e,at+Rn[ue]);for(ue=wi.Gc,ii=Hl(ve,je,wi.Dd),d[ii](pt,St),d[ii](ai,Ai),Xt=Oi,ii=pt,Hi=St,255&(wi=ue>>0)&&(170&wi?aa(Xt,256,ii,Hi):_a(Xt,256,ii,Hi)),wi=ai,Xt=Ai,255&(ue>>=8)&&(170&ue?aa(Oi,320,wi,Xt):_a(Oi,320,wi,Xt)),je<j.Ub-1&&(o(pi[$i].y,0,$e,at+480,16),o(pi[$i].f,0,pt,St+224,8),o(pi[$i].ea,0,ai,Ai+224,8)),ue=8*Ze*j.B,pi=j.sa,$i=j.ta+16*ve+16*Ze*j.R,Oi=j.qa,wi=j.ra+8*ve+ue,Xt=j.Ha,ii=j.Ia+8*ve+ue,ue=0;16>ue;++ue)o(pi,$i+ue*j.R,$e,at+32*ue,16);for(ue=0;8>ue;++ue)o(Oi,wi+ue*j.B,pt,St+32*ue,8),o(Xt,ii+ue*j.B,ai,Ai+32*ue,8)}}function La(j,K,ue,ve,je,Ze,$e,at,pt){var St=[0],ai=[0],Ai=0,wi=pt!=null?pt.kd:0,pi=pt!=null?pt:new mu;if(j==null||12>ue)return 7;pi.data=j,pi.w=K,pi.ha=ue,K=[K],ue=[ue],pi.gb=[pi.gb];e:{var $i=K,Oi=ue,Xt=pi.gb;if(e(j!=null),e(Oi!=null),e(Xt!=null),Xt[0]=0,12<=Oi[0]&&!t(j,$i[0],"RIFF")){if(t(j,$i[0]+8,"WEBP")){Xt=3;break e}var ii=ut(j,$i[0]+4);if(12>ii||4294967286<ii){Xt=3;break e}if(wi&&ii>Oi[0]-8){Xt=7;break e}Xt[0]=ii,$i[0]+=12,Oi[0]-=12}Xt=0}if(Xt!=0)return Xt;for(ii=0<pi.gb[0],ue=ue[0];;){e:{var Hi=j;Oi=K,Xt=ue;var Ki=St,Ui=ai,Dn=$i=[0];if((On=Ai=[Ai])[0]=0,8>Xt[0])Xt=7;else{if(!t(Hi,Oi[0],"VP8X")){if(ut(Hi,Oi[0]+4)!=10){Xt=3;break e}if(18>Xt[0]){Xt=7;break e}var kn=ut(Hi,Oi[0]+8),yr=1+ri(Hi,Oi[0]+12);if(2147483648<=yr*(Hi=1+ri(Hi,Oi[0]+15))){Xt=3;break e}Dn!=null&&(Dn[0]=kn),Ki!=null&&(Ki[0]=yr),Ui!=null&&(Ui[0]=Hi),Oi[0]+=18,Xt[0]-=18,On[0]=1}Xt=0}}if(Ai=Ai[0],$i=$i[0],Xt!=0)return Xt;if(Oi=!!(2&$i),!ii&&Ai)return 3;if(Ze!=null&&(Ze[0]=!!(16&$i)),$e!=null&&($e[0]=Oi),at!=null&&(at[0]=0),$e=St[0],$i=ai[0],Ai&&Oi&&pt==null){Xt=0;break}if(4>ue){Xt=7;break}if(ii&&Ai||!ii&&!Ai&&!t(j,K[0],"ALPH")){ue=[ue],pi.na=[pi.na],pi.P=[pi.P],pi.Sa=[pi.Sa];e:{kn=j,Xt=K,ii=ue;var On=pi.gb;Ki=pi.na,Ui=pi.P,Dn=pi.Sa,yr=22,e(kn!=null),e(ii!=null),Hi=Xt[0];var go=ii[0];for(e(Ki!=null),e(Dn!=null),Ki[0]=null,Ui[0]=null,Dn[0]=0;;){if(Xt[0]=Hi,ii[0]=go,8>go){Xt=7;break e}var wo=ut(kn,Hi+4);if(4294967286<wo){Xt=3;break e}var Yr=8+wo+1&-2;if(yr+=Yr,0<On&&yr>On){Xt=3;break e}if(!t(kn,Hi,"VP8 ")||!t(kn,Hi,"VP8L")){Xt=0;break e}if(go[0]<Yr){Xt=7;break e}t(kn,Hi,"ALPH")||(Ki[0]=kn,Ui[0]=Hi+8,Dn[0]=wo),Hi+=Yr,go-=Yr}}if(ue=ue[0],pi.na=pi.na[0],pi.P=pi.P[0],pi.Sa=pi.Sa[0],Xt!=0)break}ue=[ue],pi.Ja=[pi.Ja],pi.xa=[pi.xa];e:if(On=j,Xt=K,ii=ue,Ki=pi.gb[0],Ui=pi.Ja,Dn=pi.xa,kn=Xt[0],Hi=!t(On,kn,"VP8 "),yr=!t(On,kn,"VP8L"),e(On!=null),e(ii!=null),e(Ui!=null),e(Dn!=null),8>ii[0])Xt=7;else{if(Hi||yr){if(On=ut(On,kn+4),12<=Ki&&On>Ki-12){Xt=3;break e}if(wi&&On>ii[0]-8){Xt=7;break e}Ui[0]=On,Xt[0]+=8,ii[0]-=8,Dn[0]=yr}else Dn[0]=5<=ii[0]&&On[kn+0]==47&&!(On[kn+4]>>5),Ui[0]=ii[0];Xt=0}if(ue=ue[0],pi.Ja=pi.Ja[0],pi.xa=pi.xa[0],K=K[0],Xt!=0)break;if(4294967286<pi.Ja)return 3;if(at==null||Oi||(at[0]=pi.xa?2:1),$e=[$e],$i=[$i],pi.xa){if(5>ue){Xt=7;break}at=$e,wi=$i,Oi=Ze,j==null||5>ue?j=0:5<=ue&&j[K+0]==47&&!(j[K+4]>>5)?(ii=[0],On=[0],Ki=[0],it(Ui=new le,j,K,ue),rn(Ui,ii,On,Ki)?(at!=null&&(at[0]=ii[0]),wi!=null&&(wi[0]=On[0]),Oi!=null&&(Oi[0]=Ki[0]),j=1):j=0):j=0}else{if(10>ue){Xt=7;break}at=$i,j==null||10>ue||!Mt(j,K+3,ue-3)?j=0:(wi=j[K+0]|j[K+1]<<8|j[K+2]<<16,Oi=16383&(j[K+7]<<8|j[K+6]),j=16383&(j[K+9]<<8|j[K+8]),1&wi||3<(wi>>1&7)||!(wi>>4&1)||wi>>5>=pi.Ja||!Oi||!j?j=0:($e&&($e[0]=Oi),at&&(at[0]=j),j=1))}if(!j||($e=$e[0],$i=$i[0],Ai&&(St[0]!=$e||ai[0]!=$i)))return 3;pt!=null&&(pt[0]=pi,pt.offset=K-pt.w,e(4294967286>K-pt.w),e(pt.offset==pt.ha-ue));break}return Xt==0||Xt==7&&Ai&&pt==null?(Ze!=null&&(Ze[0]|=pi.na!=null&&0<pi.na.length),ve!=null&&(ve[0]=$e),je!=null&&(je[0]=$i),0):Xt}function Sl(j,K,ue){var ve=K.width,je=K.height,Ze=0,$e=0,at=ve,pt=je;if(K.Da=j!=null&&0<j.Da,K.Da&&(at=j.cd,pt=j.bd,Ze=j.v,$e=j.j,11>ue||(Ze&=-2,$e&=-2),0>Ze||0>$e||0>=at||0>=pt||Ze+at>ve||$e+pt>je))return 0;if(K.v=Ze,K.j=$e,K.va=Ze+at,K.o=$e+pt,K.U=at,K.T=pt,K.da=j!=null&&0<j.da,K.da){if(!ei(at,pt,ue=[j.ib],Ze=[j.hb]))return 0;K.ib=ue[0],K.hb=Ze[0]}return K.ob=j!=null&&j.ob,K.Kb=j==null||!j.Sd,K.da&&(K.ob=K.ib<3*ve/4&&K.hb<3*je/4,K.Kb=0),1}function ol(j){if(j==null)return 2;if(11>j.S){var K=j.f.RGBA;K.fb+=(j.height-1)*K.A,K.A=-K.A}else K=j.f.kb,j=j.height,K.O+=(j-1)*K.fa,K.fa=-K.fa,K.N+=(j-1>>1)*K.Ab,K.Ab=-K.Ab,K.W+=(j-1>>1)*K.Db,K.Db=-K.Db,K.F!=null&&(K.J+=(j-1)*K.lb,K.lb=-K.lb);return 0}function Bu(j,K,ue,ve){if(ve==null||0>=j||0>=K)return 2;if(ue!=null){if(ue.Da){var je=ue.cd,Ze=ue.bd,$e=-2&ue.v,at=-2&ue.j;if(0>$e||0>at||0>=je||0>=Ze||$e+je>j||at+Ze>K)return 2;j=je,K=Ze}if(ue.da){if(!ei(j,K,je=[ue.ib],Ze=[ue.hb]))return 2;j=je[0],K=Ze[0]}}ve.width=j,ve.height=K;e:{var pt=ve.width,St=ve.height;if(j=ve.S,0>=pt||0>=St||!(j>=Ga&&13>j))j=2;else{if(0>=ve.Rd&&ve.sd==null){$e=Ze=je=K=0;var ai=(at=pt*Dr[j])*St;if(11>j||(Ze=(St+1)/2*(K=(pt+1)/2),j==12&&($e=(je=pt)*St)),(St=u(ai+2*Ze+$e))==null){j=1;break e}ve.sd=St,11>j?((pt=ve.f.RGBA).eb=St,pt.fb=0,pt.A=at,pt.size=ai):((pt=ve.f.kb).y=St,pt.O=0,pt.fa=at,pt.Fd=ai,pt.f=St,pt.N=0+ai,pt.Ab=K,pt.Cd=Ze,pt.ea=St,pt.W=0+ai+Ze,pt.Db=K,pt.Ed=Ze,j==12&&(pt.F=St,pt.J=0+ai+2*Ze),pt.Tc=$e,pt.lb=je)}if(K=1,je=ve.S,Ze=ve.width,$e=ve.height,je>=Ga&&13>je)if(11>je)j=ve.f.RGBA,K&=(at=Math.abs(j.A))*($e-1)+Ze<=j.size,K&=at>=Ze*Dr[je],K&=j.eb!=null;else{j=ve.f.kb,at=(Ze+1)/2,ai=($e+1)/2,pt=Math.abs(j.fa),St=Math.abs(j.Ab);var Ai=Math.abs(j.Db),wi=Math.abs(j.lb),pi=wi*($e-1)+Ze;K&=pt*($e-1)+Ze<=j.Fd,K&=St*(ai-1)+at<=j.Cd,K=(K&=Ai*(ai-1)+at<=j.Ed)&pt>=Ze&St>=at&Ai>=at,K&=j.y!=null,K&=j.f!=null,K&=j.ea!=null,je==12&&(K&=wi>=Ze,K&=pi<=j.Tc,K&=j.F!=null)}else K=0;j=K?0:2}}return j!=0||ue!=null&&ue.fd&&(j=ol(ve)),j}var Os=64,gu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gl=24,Ha=32,yu=8,Fs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Si("Predictor0","PredictorAdd0"),oe.Predictor0=function(){return 4278190080},oe.Predictor1=function(j){return j},oe.Predictor2=function(j,K,ue){return K[ue+0]},oe.Predictor3=function(j,K,ue){return K[ue+1]},oe.Predictor4=function(j,K,ue){return K[ue-1]},oe.Predictor5=function(j,K,ue){return Yt(Yt(j,K[ue+1]),K[ue+0])},oe.Predictor6=function(j,K,ue){return Yt(j,K[ue-1])},oe.Predictor7=function(j,K,ue){return Yt(j,K[ue+0])},oe.Predictor8=function(j,K,ue){return Yt(K[ue-1],K[ue+0])},oe.Predictor9=function(j,K,ue){return Yt(K[ue+0],K[ue+1])},oe.Predictor10=function(j,K,ue){return Yt(Yt(j,K[ue-1]),Yt(K[ue+0],K[ue+1]))},oe.Predictor11=function(j,K,ue){var ve=K[ue+0];return 0>=Ci(ve>>24&255,j>>24&255,(K=K[ue-1])>>24&255)+Ci(ve>>16&255,j>>16&255,K>>16&255)+Ci(ve>>8&255,j>>8&255,K>>8&255)+Ci(255&ve,255&j,255&K)?ve:j},oe.Predictor12=function(j,K,ue){var ve=K[ue+0];return(mi((j>>24&255)+(ve>>24&255)-((K=K[ue-1])>>24&255))<<24|mi((j>>16&255)+(ve>>16&255)-(K>>16&255))<<16|mi((j>>8&255)+(ve>>8&255)-(K>>8&255))<<8|mi((255&j)+(255&ve)-(255&K)))>>>0},oe.Predictor13=function(j,K,ue){var ve=K[ue-1];return(Wi((j=Yt(j,K[ue+0]))>>24&255,ve>>24&255)<<24|Wi(j>>16&255,ve>>16&255)<<16|Wi(j>>8&255,ve>>8&255)<<8|Wi(j>>0&255,ve>>0&255))>>>0};var _u=oe.PredictorAdd0;oe.PredictorAdd1=ti,Si("Predictor2","PredictorAdd2"),Si("Predictor3","PredictorAdd3"),Si("Predictor4","PredictorAdd4"),Si("Predictor5","PredictorAdd5"),Si("Predictor6","PredictorAdd6"),Si("Predictor7","PredictorAdd7"),Si("Predictor8","PredictorAdd8"),Si("Predictor9","PredictorAdd9"),Si("Predictor10","PredictorAdd10"),Si("Predictor11","PredictorAdd11"),Si("Predictor12","PredictorAdd12"),Si("Predictor13","PredictorAdd13");var sl=oe.PredictorAdd2;Qe("ColorIndexInverseTransform","MapARGB","32b",function(j){return j>>8&255},function(j){return j}),Qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(j){return j},function(j){return j>>8&255});var Wl,Pa=oe.ColorIndexInverseTransform,Cl=oe.MapARGB,Mc=oe.VP8LColorIndexInverseTransformAlpha,Dc=oe.MapAlpha,El=oe.VP8LPredictorsAdd=[];El.length=16,(oe.VP8LPredictors=[]).length=16,(oe.VP8LPredictorsAdd_C=[]).length=16,(oe.VP8LPredictors_C=[]).length=16;var Rs,Ma,Da,sa,ss,al,Yo,zu,Oa,aa,Xr,_a,Il,Nu,vu,Hs,Tl,ds,Pn,Fo,Hr,Co,ts,_n,Fa,ju,Uu,Oc,lh=u(511),uh=u(2041),Dh=u(225),Lr=u(767),Fc=0,rc=uh,Zo=Dh,Js=Lr,Go=lh,Ga=0,oc=1,bu=2,wu=3,Xl=4,no=5,va=6,Ro=7,xu=8,Au=9,Rc=10,Oh=[2,3,7],ll=[3,3,11],Fh=[280,256,256,256,40],ul=[0,1,1,1,0],sc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$n=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ur=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Vu=8,ac=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vs=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Uo=null,Yl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ch=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],is=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ps=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],la=[],B=[],d=[],I=1,D=2,z=[],X=[];qi("UpsampleRgbLinePair",to,3),qi("UpsampleBgrLinePair",Oo,3),qi("UpsampleRgbaLinePair",jr,4),qi("UpsampleBgraLinePair",fs,4),qi("UpsampleArgbLinePair",Ss,4),qi("UpsampleRgba4444LinePair",Ho,2),qi("UpsampleRgb565LinePair",jo,2);var ie=oe.UpsampleRgbLinePair,de=oe.UpsampleBgrLinePair,_e=oe.UpsampleRgbaLinePair,Ae=oe.UpsampleBgraLinePair,ze=oe.UpsampleArgbLinePair,Je=oe.UpsampleRgba4444LinePair,ot=oe.UpsampleRgb565LinePair,Lt=16,kt=1<<Lt-1,It=-227,si=482,fi=6,xi=(256<<fi)-1,Vt=0,Pi=u(256),Ei=u(256),Vi=u(256),Ni=u(256),sn=u(si-It),zi=u(si-It);_s("YuvToRgbRow",to,3),_s("YuvToBgrRow",Oo,3),_s("YuvToRgbaRow",jr,4),_s("YuvToBgraRow",fs,4),_s("YuvToArgbRow",Ss,4),_s("YuvToRgba4444Row",Ho,2),_s("YuvToRgb565Row",jo,2);var Rn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vn=[0,2,8],qn=[8,7,6,4,4,2,2,2,1,1,1,1],Er=1;this.WebPDecodeRGBA=function(j,K,ue,ve,je){var Ze=oc,$e=new Vl,at=new Zr;$e.ba=at,at.S=Ze,at.width=[at.width],at.height=[at.height];var pt=at.width,St=at.height,ai=new zn;if(ai==null||j==null)var Ai=2;else e(ai!=null),Ai=La(j,K,ue,ai.width,ai.height,ai.Pd,ai.Qd,ai.format,null);if(Ai!=0?pt=0:(pt!=null&&(pt[0]=ai.width[0]),St!=null&&(St[0]=ai.height[0]),pt=1),pt){at.width=at.width[0],at.height=at.height[0],ve!=null&&(ve[0]=at.width),je!=null&&(je[0]=at.height);e:{if(ve=new Qo,(je=new mu).data=j,je.w=K,je.ha=ue,je.kd=1,K=[0],e(je!=null),((j=La(je.data,je.w,je.ha,null,null,null,K,null,je))==0||j==7)&&K[0]&&(j=4),(K=j)==0){if(e($e!=null),ve.data=je.data,ve.w=je.w+je.offset,ve.ha=je.ha-je.offset,ve.put=lr,ve.ac=Wn,ve.bc=Kr,ve.ma=$e,je.xa){if((j=Rt())==null){$e=1;break e}if(function(wi,pi){var $i=[0],Oi=[0],Xt=[0];t:for(;;){if(wi==null)return 0;if(pi==null)return wi.a=2,0;if(wi.l=pi,wi.a=0,it(wi.m,pi.data,pi.w,pi.ha),!rn(wi.m,$i,Oi,Xt)){wi.a=3;break t}if(wi.xb=D,pi.width=$i[0],pi.height=Oi[0],!oi($i[0],Oi[0],1,wi,null))break t;return 1}return e(wi.a!=0),0}(j,ve)){if(ve=(K=Bu(ve.width,ve.height,$e.Oa,$e.ba))==0){t:{ve=j;i:for(;;){if(ve==null){ve=0;break t}if(e(ve.s.yc!=null),e(ve.s.Ya!=null),e(0<ve.s.Wb),e((ue=ve.l)!=null),e((je=ue.ma)!=null),ve.xb!=0){if(ve.ca=je.ba,ve.tb=je.tb,e(ve.ca!=null),!Sl(je.Oa,ue,wu)){ve.a=2;break i}if(!yt(ve,ue.width)||ue.da)break i;if((ue.da||Xi(ve.ca.S))&&hi(),11>ve.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ve.ca.f.kb.F!=null&&hi()),ve.Pb&&0<ve.s.ua&&ve.s.vb.X==null&&!bt(ve.s.vb,ve.s.Wa.Xa)){ve.a=1;break i}ve.xb=0}if(!Ge(ve,ve.V,ve.Ba,ve.c,ve.i,ue.o,qe))break i;je.Dc=ve.Ma,ve=1;break t}e(ve.a!=0),ve=0}ve=!ve}ve&&(K=j.a)}else K=j.a}else{if((j=new nl)==null){$e=1;break e}if(j.Fa=je.na,j.P=je.P,j.qc=je.Sa,tr(j,ve)){if((K=Bu(ve.width,ve.height,$e.Oa,$e.ba))==0){if(j.Aa=0,ue=$e.Oa,e((je=j)!=null),ue!=null){if(0<(pt=0>(pt=ue.Md)?0:100<pt?255:255*pt/100)){for(St=ai=0;4>St;++St)12>(Ai=je.pb[St]).lc&&(Ai.ia=pt*qn[0>Ai.lc?0:Ai.lc]>>3),ai|=Ai.ia;ai&&(alert("todo:VP8InitRandom"),je.ia=1)}je.Ga=ue.Id,100<je.Ga?je.Ga=100:0>je.Ga&&(je.Ga=0)}Xo(j,ve)||(K=j.a)}}else K=j.a}K==0&&$e.Oa!=null&&$e.Oa.fd&&(K=ol($e.ba))}$e=K}Ze=$e!=0?null:11>Ze?at.f.RGBA.eb:at.f.kb.y}else Ze=null;return Ze};var Dr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(oe,Me){for(var Fe="",pe=0;pe<4;pe++)Fe+=String.fromCharCode(oe[Me++]);return Fe}function w(oe,Me){return(oe[Me+0]<<0|oe[Me+1]<<8|oe[Me+2]<<16)>>>0}function b(oe,Me){return(oe[Me+0]<<0|oe[Me+1]<<8|oe[Me+2]<<16|oe[Me+3]<<24)>>>0}new f;var x=[0],v=[0],C=[],T=new f,S=i,M=function(oe,Me){var Fe={},pe=0,Ie=!1,Se=0,me=0;if(Fe.frames=[],!function(Ce,he,ge,Be){for(var We=0;We<Be;We++)if(Ce[he+We]!=ge.charCodeAt(We))return!0;return!1}(oe,Me,"RIFF",4)){var et,nt;for(b(oe,Me+=4),Me+=8;Me<oe.length;){var Et=_(oe,Me),it=b(oe,Me+=4);Me+=4;var we=it+(1&it);switch(Et){case"VP8 ":case"VP8L":Fe.frames[pe]===void 0&&(Fe.frames[pe]={}),(le=Fe.frames[pe]).src_off=Ie?me:Me-8,le.src_size=Se+it+8,pe++,Ie&&(Ie=!1,Se=0,me=0);break;case"VP8X":(le=Fe.header={}).feature_flags=oe[Me];var ke=Me+4;le.canvas_width=1+w(oe,ke),ke+=3,le.canvas_height=1+w(oe,ke),ke+=3;break;case"ALPH":Ie=!0,Se=we+8,me=Me-8;break;case"ANIM":(le=Fe.header).bgcolor=b(oe,Me),ke=Me+4,le.loop_count=(et=oe)[(nt=ke)+0]<<0|et[nt+1]<<8,ke+=2;break;case"ANMF":var Oe,le;(le=Fe.frames[pe]={}).offset_x=2*w(oe,Me),Me+=3,le.offset_y=2*w(oe,Me),Me+=3,le.width=1+w(oe,Me),Me+=3,le.height=1+w(oe,Me),Me+=3,le.duration=w(oe,Me),Me+=3,Oe=oe[Me++],le.dispose=1&Oe,le.blend=Oe>>1&1}Et!="ANMF"&&(Me+=we)}return Fe}}(S,0);M.response=S,M.rgbaoutput=!0,M.dataurl=!1;var O=M.header?M.header:null,V=M.frames?M.frames:null;if(O){O.loop_counter=O.loop_count,x=[O.canvas_height],v=[O.canvas_width];for(var G=0;G<V.length&&V[G].blend!=0;G++);}var Z=V[0],te=T.WebPDecodeRGBA(S,Z.src_off,Z.src_size,v,x);Z.rgba=te,Z.imgwidth=v[0],Z.imgheight=x[0];for(var J=0;J<v[0]*x[0]*4;J++)C[J]=te[J];return this.width=v,this.height=x,this.data=C,this}(function(i){var e=function(){return typeof D2=="function"},t=function(x,v,C,T){var S=4,M=m;switch(T){case i.image_compression.FAST:S=1,M=u;break;case i.image_compression.MEDIUM:S=6,M=r;break;case i.image_compression.SLOW:S=9,M=f}x=o(x,v,C,M);var O=D2(x,{level:S});return i.__addimage__.arrayBufferToBinaryString(O)},o=function(x,v,C,T){for(var S,M,O,V=x.length/v,G=new Uint8Array(x.length+V),Z=w(),te=0;te<V;te+=1){if(O=te*v,S=x.subarray(O,O+v),T)G.set(T(S,C,M),O+te);else{for(var J,oe=Z.length,Me=[];J<oe;J+=1)Me[J]=Z[J](S,C,M);var Fe=b(Me.concat());G.set(Me[Fe],O+te)}M=S}return G},l=function(x){var v=Array.apply([],x);return v.unshift(0),v},u=function(x,v){var C,T=[],S=x.length;T[0]=1;for(var M=0;M<S;M+=1)C=x[M-v]||0,T[M+1]=x[M]-C+256&255;return T},m=function(x,v,C){var T,S=[],M=x.length;S[0]=2;for(var O=0;O<M;O+=1)T=C&&C[O]||0,S[O+1]=x[O]-T+256&255;return S},r=function(x,v,C){var T,S,M=[],O=x.length;M[0]=3;for(var V=0;V<O;V+=1)T=x[V-v]||0,S=C&&C[V]||0,M[V+1]=x[V]+256-(T+S>>>1)&255;return M},f=function(x,v,C){var T,S,M,O,V=[],G=x.length;V[0]=4;for(var Z=0;Z<G;Z+=1)T=x[Z-v]||0,S=C&&C[Z]||0,M=C&&C[Z-v]||0,O=_(T,S,M),V[Z+1]=x[Z]-O+256&255;return V},_=function(x,v,C){if(x===v&&v===C)return x;var T=Math.abs(v-C),S=Math.abs(x-C),M=Math.abs(x+v-C-C);return T<=S&&T<=M?x:S<=M?v:C},w=function(){return[l,u,m,r,f]},b=function(x){var v=x.map(function(C){return C.reduce(function(T,S){return T+Math.abs(S)},0)});return v.indexOf(Math.min.apply(null,v))};i.processPNG=function(x,v,C,T){var S,M,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie,Se,me,et=this.decode.FLATE_DECODE,nt="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(O=new _8(x)).imgData,M=O.bits,S=O.colorSpace,G=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){oe=(J=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,Fe=new Uint8Array(oe*O.colors),Me=new Uint8Array(oe);var Et,it=O.pixelBitlength-O.bits;for(Se=0,me=0;Se<oe;Se++){for(Ie=J[Se],Et=0;Et<it;)Fe[me++]=Ie>>>Et&255,Et+=O.bits;Me[Se]=Ie>>>Et&255}}if(O.bits===16){oe=(J=new Uint32Array(O.decodePixels().buffer)).length,Fe=new Uint8Array(oe*(32/O.pixelBitlength)*O.colors),Me=new Uint8Array(oe*(32/O.pixelBitlength)),pe=O.colors>1,Se=0,me=0;for(var we=0;Se<oe;)Ie=J[Se++],Fe[me++]=Ie>>>0&255,pe&&(Fe[me++]=Ie>>>16&255,Ie=J[Se++],Fe[me++]=Ie>>>0&255),Me[we++]=Ie>>>16&255;M=8}T!==i.image_compression.NONE&&e()?(x=t(Fe,O.width*O.colors,O.colors,T),te=t(Me,O.width,1,T)):(x=Fe,te=Me,et=void 0)}if(O.colorType===3&&(S=this.color_spaces.INDEXED,Z=O.palette,O.transparency.indexed)){var ke=O.transparency.indexed,Oe=0;for(Se=0,oe=ke.length;Se<oe;++Se)Oe+=ke[Se];if((Oe/=255)===oe-1&&ke.indexOf(0)!==-1)V=[ke.indexOf(0)];else if(Oe!==oe){for(J=O.decodePixels(),Me=new Uint8Array(J.length),Se=0,oe=J.length;Se<oe;Se++)Me[Se]=ke[J[Se]];te=t(Me,O.width,1)}}var le=function(Ce){var he;switch(Ce){case i.image_compression.FAST:he=11;break;case i.image_compression.MEDIUM:he=13;break;case i.image_compression.SLOW:he=14;break;default:he=12}return he}(T);return et===this.decode.FLATE_DECODE&&(nt="/Predictor "+le+" "),nt+="/Colors "+G+" /BitsPerComponent "+M+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(te&&this.__addimage__.isArrayBuffer(te)||this.__addimage__.isArrayBufferView(te))&&(te=this.__addimage__.arrayBufferToBinaryString(te)),{alias:C,data:x,index:v,filter:et,decodeParameters:nt,transparency:V,palette:Z,sMask:te,predictor:le,width:O.width,height:O.height,bitsPerComponent:M,colorSpace:S}}}})(Ur.API),function(i){i.processGIF89A=function(e,t,o,l){var u=new v8(e),m=u.width,r=u.height,f=[];u.decodeAndBlitFrameRGBA(0,f);var _={data:f,width:m,height:r},w=new Dm(100).encode(_,100);return i.processJPEG.call(this,w,t,o,l)},i.processGIF87A=i.processGIF89A}(Ur.API),xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:o,blue:t,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xc.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){us.log("bit decode error:"+t)}},xc.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<e;l++)for(var u=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+8*l*4,r=0;r<8&&8*l+r<this.width;r++){var f=this.palette[u>>7-r&1];this.data[m+4*r]=f.blue,this.data[m+4*r+1]=f.green,this.data[m+4*r+2]=f.red,this.data[m+4*r+3]=255}t!==0&&(this.pos+=4-t)}},xc.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,l=0;l<i;l++){var u=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+2*l*4,r=u>>4,f=15&u,_=this.palette[r];if(this.data[m]=_.blue,this.data[m+1]=_.green,this.data[m+2]=_.red,this.data[m+3]=255,2*l+1>=this.width)break;_=this.palette[f],this.data[m+4]=_.blue,this.data[m+4+1]=_.green,this.data[m+4+2]=_.red,this.data[m+4+3]=255}e!==0&&(this.pos+=4-e)}},xc.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*o;if(l<this.palette.length){var m=this.palette[l];this.data[u]=m.red,this.data[u+1]=m.green,this.data[u+2]=m.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}i!==0&&(this.pos+=4-i)}},xc.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(u&e)/e*255|0,r=(u>>5&e)/e*255|0,f=(u>>10&e)/e*255|0,_=u>>15?255:0,w=o*this.width*4+4*l;this.data[w]=f,this.data[w+1]=r,this.data[w+2]=m,this.data[w+3]=_}this.pos+=i}},xc.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var l=this.bottom_up?o:this.height-1-o,u=0;u<this.width;u++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var r=(m&e)/e*255|0,f=(m>>5&t)/t*255|0,_=(m>>11)/e*255|0,w=l*this.width*4+4*u;this.data[w]=_,this.data[w+1]=f,this.data[w+2]=r,this.data[w+3]=255}this.pos+=i}},xc.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),m=e*this.width*4+4*t;this.data[m]=u,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=255}this.pos+=this.width%4}},xc.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*t;this.data[r]=u,this.data[r+1]=l,this.data[r+2]=o,this.data[r+3]=m}},xc.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,o,l){var u=new xc(e,!1),m=u.width,r=u.height,f={data:u.getData(),width:m,height:r},_=new Dm(100).encode(f,100);return i.processJPEG.call(this,_,t,o,l)}}(Ur.API),d_.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,o,l){var u=new d_(e),m=u.width,r=u.height,f={data:u.getData(),width:m,height:r},_=new Dm(100).encode(f,100);return i.processJPEG.call(this,_,t,o,l)}}(Ur.API),Ur.API.processRGBA=function(i,e,t){for(var o=i.data,l=o.length,u=new Uint8Array(l/4*3),m=new Uint8Array(l/4),r=0,f=0,_=0;_<l;_+=4){var w=o[_],b=o[_+1],x=o[_+2],v=o[_+3];u[r++]=w,u[r++]=b,u[r++]=x,m[f++]=v}var C=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Ur.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},x0=Ur.API,zp=x0.getCharWidthsArray=function(i,e){var t,o,l=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),m=e.charSpace||this.internal.getCharSpace(),r=e.widths?e.widths:l.metadata.Unicode.widths,f=r.fof?r.fof:1,_=e.kerning?e.kerning:l.metadata.Unicode.kerning,w=_.fof?_.fof:1,b=e.doKerning!==!1,x=0,v=i.length,C=0,T=r[0]||f,S=[];for(t=0;t<v;t++)o=i.charCodeAt(t),typeof l.metadata.widthOfString=="function"?S.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(o))+m*(1e3/u)||0)/1e3):(x=b&&$o(_[o])==="object"&&!isNaN(parseInt(_[o][C],10))?_[o][C]/w:0,S.push((r[o]||T)/f+x)),C=o;return S},u_=x0.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),o=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return x0.processArabic&&(i=x0.processArabic(i)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(i,t,l)/t:zp.apply(this,arguments).reduce(function(u,m){return u+m},0)},c_=function(i,e,t,o){for(var l=[],u=0,m=i.length,r=0;u!==m&&r+e[u]<t;)r+=e[u],u++;l.push(i.slice(0,u));var f=u;for(r=0;u!==m;)r+e[u]>o&&(l.push(i.slice(f,u)),r=0,f=u),r+=e[u],u++;return f!==u&&l.push(i.slice(f,u)),l},h_=function(i,e,t){t||(t={});var o,l,u,m,r,f,_,w=[],b=[w],x=t.textIndent||0,v=0,C=0,T=i.split(" "),S=zp.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?T[0].length+2:t.lineIndent||0){var M=Array(f).join(" "),O=[];T.map(function(G){(G=G.split(/\s*\n/)).length>1?O=O.concat(G.map(function(Z,te){return(te&&Z.length?`
`:"")+Z})):O.push(G[0])}),T=O,f=u_.apply(this,[M,t])}for(u=0,m=T.length;u<m;u++){var V=0;if(o=T[u],f&&o[0]==`
`&&(o=o.substr(1),V=1),x+v+(C=(l=zp.apply(this,[o,t])).reduce(function(G,Z){return G+Z},0))>e||V){if(C>e){for(r=c_.apply(this,[o,l,e-(x+v),e]),w.push(r.shift()),w=[r.pop()];r.length;)b.push([r.shift()]);C=l.slice(o.length-(w[0]?w[0].length:0)).reduce(function(G,Z){return G+Z},0)}else w=[o];b.push(w),x=C+f,v=S}else w.push(o),x+=v+C,v=S}return _=f?function(G,Z){return(Z?M:"")+G.join(" ")}:function(G){return G.join(" ")},b.map(_)},x0.splitTextToSize=function(i,e,t){var o,l=(t=t||{}).fontSize||this.internal.getFontSize(),u=function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var b=this.internal.getFont(w.fontName,w.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);o=Array.isArray(i)?i:String(i).split(/\r?\n/);var m=1*this.internal.scaleFactor*e/l;u.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/l:0,u.lineIndent=t.lineIndent;var r,f,_=[];for(r=0,f=o.length;r<f;r++)_=_.concat(h_.apply(this,[o[r],m,u]));return _},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},o={},l=0;l<e.length;l++)t[e[l]]="0123456789abcdef"[l],o["0123456789abcdef"[l]]=e[l];var u=function(b){return"0x"+parseInt(b,10).toString(16)},m=i.__fontmetrics__.compress=function(b){var x,v,C,T,S=["{"];for(var M in b){if(x=b[M],isNaN(parseInt(M,10))?v="'"+M+"'":(M=parseInt(M,10),v=(v=u(M).slice(2)).slice(0,-1)+o[v.slice(-1)]),typeof x=="number")x<0?(C=u(x).slice(3),T="-"):(C=u(x).slice(2),T=""),C=T+C.slice(0,-1)+o[C.slice(-1)];else{if($o(x)!=="object")throw new Error("Don't know what to do with value type "+$o(x)+".");C=m(x)}S.push(v+C)}return S.push("}"),S.join("")},r=i.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,v,C,T,S={},M=1,O=S,V=[],G="",Z="",te=b.length-1,J=1;J<te;J+=1)(T=b[J])=="'"?x?(C=x.join(""),x=void 0):x=[]:x?x.push(T):T=="{"?(V.push([O,C]),O={},C=void 0):T=="}"?((v=V.pop())[0][v[1]]=O,C=void 0,O=v[0]):T=="-"?M=-1:C===void 0?t.hasOwnProperty(T)?(G+=t[T],C=parseInt(G,16)*M,M=1,G=""):G+=T:t.hasOwnProperty(T)?(Z+=t[T],O[C]=parseInt(Z,16)*M,M=1,C=void 0,Z=""):Z+=T;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:r("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},w={Unicode:{"Courier-Oblique":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":r("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":r("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":r("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:r("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:r("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":r("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:r("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":r("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":r("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":r("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(b){var x=b.font,v=w.Unicode[x.postScriptName];v&&(x.metadata.Unicode={},x.metadata.Unicode.widths=v.widths,x.metadata.Unicode.kerning=v.kerning);var C=_.Unicode[x.postScriptName];C&&(x.metadata.Unicode.encoding=C,x.encoding=C.codePages[0])}])}(Ur.API),function(i){var e=function(t){for(var o=t.length,l=new Uint8Array(o),u=0;u<o;u++)l[u]=t.charCodeAt(u);return l};i.API.events.push(["addFont",function(t){var o=void 0,l=t.font,u=t.instance;if(!l.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(o=u.existsFileInVFS(l.postScriptName)===!1?u.loadFile(l.postScriptName):u.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(m,r){r=/^\x00\x01\x00\x00/.test(r)?e(r):e(Md(r)),m.metadata=i.API.TTFFont.open(r),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(l,o)}}])}(Ur),function(i){function e(){return(Vr.canvg?Promise.resolve(Vr.canvg):h1(()=>import("./index.es-b1161769.js"),[],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ur.API.addSvgAsImage=function(t,o,l,u,m,r,f,_){if(isNaN(o)||isNaN(l))throw us.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(m))throw us.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=u,w.height=m;var b=w.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,w.width,w.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(C){return C.fromString(b,t,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(x)}).then(function(){v.addImage(w.toDataURL("image/jpeg",1),o,l,u,m,f,_)})}}(),Ur.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var l=0;l<this.internal.pages[o].length;l++)this.internal.pages[o][l]=this.internal.pages[o][l].replace(e,t);return this},Ur.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var o,l,u,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},r=Object.keys(m),f=[],_=0,w=0,b=0;function x(C,T){var S,M=!1;for(S=0;S<C.length;S+=1)C[S]===T&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var v=r.length;for(b=0;b<v;b+=1)t[r[b]].value=t[r[b]].defaultValue,t[r[b]].explicitSet=!1}if($o(i)==="object"){for(l in i)if(u=i[l],x(r,l)&&u!==void 0){if(t[l].type==="boolean"&&typeof u=="boolean")t[l].value=u;else if(t[l].type==="name"&&x(t[l].valueSet,u))t[l].value=u;else if(t[l].type==="integer"&&Number.isInteger(u))t[l].value=u;else if(t[l].type==="array"){for(_=0;_<u.length;_+=1)if(o=!0,u[_].length===1&&typeof u[_][0]=="number")f.push(String(u[_]-1));else if(u[_].length>1){for(w=0;w<u[_].length;w+=1)typeof u[_][w]!="number"&&(o=!1);o===!0&&f.push([u[_][0]-1,u[_][1]-1].join(" "))}t[l].value="["+f.join(" ")+"]"}else t[l].value=t[l].defaultValue;t[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,T=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?T.push("/"+C+" /"+t[C].value):T.push("/"+C+" "+t[C].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(o)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),_=u.length+m.length+r.length+l.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(l+u+m+r+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(o,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ur.API),function(i){var e=i.API,t=e.pdfEscape16=function(u,m){for(var r,f=m.metadata.Unicode.widths,_=["","0","00","000","0000"],w=[""],b=0,x=u.length;b<x;++b){if(r=m.metadata.characterToGlyph(u.charCodeAt(b)),m.metadata.glyIdsUsed.push(r),m.metadata.toUnicode[r]=u.charCodeAt(b),f.indexOf(r)==-1&&(f.push(r),f.push([parseInt(m.metadata.widthOfGlyph(r),10)])),r=="0")return w.join("");r=r.toString(16),w.push(_[4-r.length],r)}return w.join("")},o=function(u){var m,r,f,_,w,b,x;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,x=(r=Object.keys(u).sort(function(v,C){return v-C})).length;b<x;b++)m=r[b],f.length>=100&&(w+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),u[m]!==void 0&&u[m]!==null&&typeof u[m].toString=="function"&&(_=("0000"+u[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),f.push("<"+m+"><"+_+">"));return f.length&&(w+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(m){var r=m.font,f=m.out,_=m.newObject,w=m.putStream;if(r.metadata instanceof i.API.TTFFont&&r.encoding==="Identity-H"){for(var b=r.metadata.Unicode.widths,x=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),v="",C=0;C<x.length;C++)v+=String.fromCharCode(x[C]);var T=_();w({data:v,addLength1:!0,objectId:T}),f("endobj");var S=_();w({data:o(r.metadata.toUnicode),addLength1:!0,objectId:S}),f("endobj");var M=_();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+D0(r.fontName)),f("/FontFile2 "+T+" 0 R"),f("/FontBBox "+i.API.PDFObject.convert(r.metadata.bbox)),f("/Flags "+r.metadata.flags),f("/StemV "+r.metadata.stemV),f("/ItalicAngle "+r.metadata.italicAngle),f("/Ascent "+r.metadata.ascender),f("/Descent "+r.metadata.decender),f("/CapHeight "+r.metadata.capHeight),f(">>"),f("endobj");var O=_();f("<<"),f("/Type /Font"),f("/BaseFont /"+D0(r.fontName)),f("/FontDescriptor "+M+" 0 R"),f("/W "+i.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+r.encoding+")"),f(">>"),f(">>"),f("endobj"),r.objectNumber=_(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+S+" 0 R"),f("/BaseFont /"+D0(r.fontName)),f("/Encoding /"+r.encoding),f("/DescendantFonts ["+O+" 0 R]"),f(">>"),f("endobj"),r.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(m){var r=m.font,f=m.out,_=m.newObject,w=m.putStream;if(r.metadata instanceof i.API.TTFFont&&r.encoding==="WinAnsiEncoding"){for(var b=r.metadata.rawData,x="",v=0;v<b.length;v++)x+=String.fromCharCode(b[v]);var C=_();w({data:x,addLength1:!0,objectId:C}),f("endobj");var T=_();w({data:o(r.metadata.toUnicode),addLength1:!0,objectId:T}),f("endobj");var S=_();f("<<"),f("/Descent "+r.metadata.decender),f("/CapHeight "+r.metadata.capHeight),f("/StemV "+r.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+C+" 0 R"),f("/Flags 96"),f("/FontBBox "+i.API.PDFObject.convert(r.metadata.bbox)),f("/FontName /"+D0(r.fontName)),f("/ItalicAngle "+r.metadata.italicAngle),f("/Ascent "+r.metadata.ascender),f(">>"),f("endobj"),r.objectNumber=_();for(var M=0;M<r.metadata.hmtx.widths.length;M++)r.metadata.hmtx.widths[M]=parseInt(r.metadata.hmtx.widths[M]*(1e3/r.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+D0(r.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),f("endobj"),r.isAlreadyPutted=!0}})(u)}]);var l=function(u){var m,r=u.text||"",f=u.x,_=u.y,w=u.options||{},b=u.mutex||{},x=b.pdfEscape,v=b.activeFontKey,C=b.fonts,T=v,S="",M=0,O="",V=C[T].encoding;if(C[T].encoding!=="Identity-H")return{text:r,x:f,y:_,options:w,mutex:b};for(O=r,T=v,Array.isArray(r)&&(O=r[0]),M=0;M<O.length;M+=1)C[T].metadata.hasOwnProperty("cmap")&&(m=C[T].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),m||O[M].charCodeAt(0)<256&&C[T].metadata.hasOwnProperty("Unicode")?S+=O[M]:S+="";var G="";return parseInt(T.slice(1))<14||V==="WinAnsiEncoding"?G=x(S,T).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(G=t(S,C[T])),b.isHex=!0,{text:G,x:f,y:_,options:w,mutex:b}};e.events.push(["postProcessText",function(u){var m=u.text||"",r=[],f={text:m,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(m)){var _=0;for(_=0;_<m.length;_+=1)Array.isArray(m[_])&&m[_].length===3?r.push([l(Object.assign({},f,{text:m[_][0]})).text,m[_][1],m[_][2]]):r.push(l(Object.assign({},f,{text:m[_]})).text);u.text=r}else u.text=l(Object.assign({},f,{text:m})).text}])}(Ur),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,o){return e.call(this),this.internal.vFS[t]=o,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ur.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(o){var l,u,m,r,f,_,w,b=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,V=0;this.__bidiEngine__={};var G=function(pe){var Ie=pe.charCodeAt(),Se=Ie>>8,me=T[Se];return me!==void 0?b[256*me+(255&Ie)]:Se===252||Se===253?"AL":M.test(Se)?"L":Se===8?"R":"N"},Z=function(pe){for(var Ie,Se=0;Se<pe.length;Se++){if((Ie=G(pe.charAt(Se)))==="L")return!1;if(Ie==="R")return!0}return!1},te=function(pe,Ie,Se,me){var et,nt,Et,it,we=Ie[me];switch(we){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(we="AN");break;case"AL":O=!0,we="R";break;case"WS":we="N";break;case"CS":me<1||me+1>=Ie.length||(et=Se[me-1])!=="EN"&&et!=="AN"||(nt=Ie[me+1])!=="EN"&&nt!=="AN"?we="N":O&&(nt="AN"),we=nt===et?nt:"N";break;case"ES":we=(et=me>0?Se[me-1]:"B")==="EN"&&me+1<Ie.length&&Ie[me+1]==="EN"?"EN":"N";break;case"ET":if(me>0&&Se[me-1]==="EN"){we="EN";break}if(O){we="N";break}for(Et=me+1,it=Ie.length;Et<it&&Ie[Et]==="ET";)Et++;we=Et<it&&Ie[Et]==="EN"?"EN":"N";break;case"NSM":if(m&&!r){for(it=Ie.length,Et=me+1;Et<it&&Ie[Et]==="NSM";)Et++;if(Et<it){var ke=pe[me],Oe=ke>=1425&&ke<=2303||ke===64286;if(et=Ie[Et],Oe&&(et==="R"||et==="AL")){we="R";break}}}we=me<1||(et=Ie[me-1])==="B"?"N":Se[me-1];break;case"B":O=!1,l=!0,we=V;break;case"S":u=!0,we="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":we="N"}return we},J=function(pe,Ie,Se){var me=pe.split("");return Se&&oe(me,Se,{hiLevel:V}),me.reverse(),Ie&&Ie.reverse(),me.join("")},oe=function(pe,Ie,Se){var me,et,nt,Et,it,we=-1,ke=pe.length,Oe=0,le=[],Ce=V?v:x,he=[];for(O=!1,l=!1,u=!1,et=0;et<ke;et++)he[et]=G(pe[et]);for(nt=0;nt<ke;nt++){if(it=Oe,le[nt]=te(pe,he,le,nt),me=240&(Oe=Ce[it][C[le[nt]]]),Oe&=15,Ie[nt]=Et=Ce[Oe][5],me>0)if(me===16){for(et=we;et<nt;et++)Ie[et]=1;we=-1}else we=-1;if(Ce[Oe][6])we===-1&&(we=nt);else if(we>-1){for(et=we;et<nt;et++)Ie[et]=Et;we=-1}he[nt]==="B"&&(Ie[nt]=0),Se.hiLevel|=Et}u&&function(ge,Be,We){for(var st=0;st<We;st++)if(ge[st]==="S"){Be[st]=V;for(var Xe=st-1;Xe>=0&&ge[Xe]==="WS";Xe--)Be[Xe]=V}}(he,Ie,ke)},Me=function(pe,Ie,Se,me,et){if(!(et.hiLevel<pe)){if(pe===1&&V===1&&!l)return Ie.reverse(),void(Se&&Se.reverse());for(var nt,Et,it,we,ke=Ie.length,Oe=0;Oe<ke;){if(me[Oe]>=pe){for(it=Oe+1;it<ke&&me[it]>=pe;)it++;for(we=Oe,Et=it-1;we<Et;we++,Et--)nt=Ie[we],Ie[we]=Ie[Et],Ie[Et]=nt,Se&&(nt=Se[we],Se[we]=Se[Et],Se[Et]=nt);Oe=it}Oe++}}},Fe=function(pe,Ie,Se){var me=pe.split(""),et={hiLevel:V};return Se||(Se=[]),oe(me,Se,et),function(nt,Et,it){if(it.hiLevel!==0&&w)for(var we,ke=0;ke<nt.length;ke++)Et[ke]===1&&(we=S.indexOf(nt[ke]))>=0&&(nt[ke]=S[we+1])}(me,Se,et),Me(2,me,Ie,Se,et),Me(1,me,Ie,Se,et),me.join("")};return this.__bidiEngine__.doBidiReorder=function(pe,Ie,Se){if(function(et,nt){if(nt)for(var Et=0;Et<et.length;Et++)nt[Et]=Et;r===void 0&&(r=Z(et)),_===void 0&&(_=Z(et))}(pe,Ie),m||!f||_)if(m&&f&&r^_)V=r?1:0,pe=J(pe,Ie,Se);else if(!m&&f&&_)V=r?1:0,pe=Fe(pe,Ie,Se),pe=J(pe,Ie);else if(!m||r||f||_){if(m&&!f&&r^_)pe=J(pe,Ie),r?(V=0,pe=Fe(pe,Ie,Se)):(V=1,pe=Fe(pe,Ie,Se),pe=J(pe,Ie));else if(m&&r&&!f&&_)V=1,pe=Fe(pe,Ie,Se),pe=J(pe,Ie);else if(!m&&!f&&r^_){var me=w;r?(V=1,pe=Fe(pe,Ie,Se),V=0,w=!1,pe=Fe(pe,Ie,Se),w=me):(V=0,pe=Fe(pe,Ie,Se),pe=J(pe,Ie),V=1,w=!1,pe=Fe(pe,Ie,Se),w=me,pe=J(pe,Ie))}}else V=0,pe=Fe(pe,Ie,Se);else V=r?1:0,pe=Fe(pe,Ie,Se);return pe},this.__bidiEngine__.setOptions=function(pe){pe&&(m=pe.isInputVisual,f=pe.isOutputVisual,r=pe.isInputRtl,_=pe.isOutputRtl,w=pe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(o){var l=o.text,u=(o.x,o.y,o.options||{}),m=(o.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,t.setOptions(u),Object.prototype.toString.call(l)==="[object Array]"){var r=0;for(m=[],r=0;r<l.length;r+=1)Object.prototype.toString.call(l[r])==="[object Array]"?m.push([t.doBidiReorder(l[r][0]),l[r][1],l[r][2]]):m.push([t.doBidiReorder(l[r])]);o.text=m}else o.text=t.doBidiReorder(l);t.setOptions({isInputVisual:!0})}])}(Ur),Ur.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new ff(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new O8(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new b8(this.contents),this.head=new x8(this),this.name=new E8(this),this.cmap=new Fw(this),this.toUnicode={},this.hhea=new A8(this),this.maxp=new I8(this),this.hmtx=new T8(this),this.post=new S8(this),this.os2=new k8(this),this.loca=new D8(this),this.glyf=new L8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,o,l,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var m,r,f,_;for(_=[],m=0,r=(f=this.bbox).length;m<r;m++)e=f[m],_.push(Math.round(e*this.scaleFactor));return _}.call(this),this.stemV=0,this.post.exists?(o=255&(l=this.post.italic_angle),(32768&(t=l>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,o){var l,u,m,r;for(m=0,u=0,r=(e=""+e).length;0<=r?u<r:u>r;u=0<=r?++u:--u)l=e.charCodeAt(u),m+=this.widthOfGlyph(this.characterToGlyph(l))+o*(1e3/t)||0;return m*(t/1e3)},i.prototype.lineHeight=function(e,t){var o;return t==null&&(t=!1),o=t?this.lineGap:0,(this.ascender+o-this.decender)/1e3*e},i}();var Tc,ff=function(){function i(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,o;for(o=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)o[t]=String.fromCharCode(this.readByte());return o.join("")},i.prototype.writeString=function(e){var t,o,l;for(l=[],t=0,o=e.length;0<=o?t<o:t>o;t=0<=o?++t:--t)l.push(this.writeByte(e.charCodeAt(t)));return l},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,o,l,u,m,r,f;return e=this.readByte(),t=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),m=this.readByte(),r=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^o)+4294967296*(255^l)+16777216*(255^u)+65536*(255^m)+256*(255^r)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*o+4294967296*l+16777216*u+65536*m+256*r+f},i.prototype.writeLongLong=function(e){var t,o;return t=Math.floor(e/4294967296),o=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,o;for(t=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)t.push(this.readByte());return t},i.prototype.write=function(e){var t,o,l,u;for(u=[],o=0,l=e.length;o<l;o++)t=e[o],u.push(this.writeByte(t));return u},i}(),b8=function(){var i;function e(t){var o,l,u;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},l=0,u=this.tableCount;0<=u?l<u:l>u;l=0<=u?++l:--l)o={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[o.tag]=o}return e.prototype.encode=function(t){var o,l,u,m,r,f,_,w,b,x,v,C,T;for(T in v=Object.keys(t).length,f=Math.log(2),b=16*Math.floor(Math.log(v)/f),m=Math.floor(b/f),w=16*v-b,(l=new ff).writeInt(this.scalarType),l.writeShort(v),l.writeShort(b),l.writeShort(m),l.writeShort(w),u=16*v,_=l.pos+u,r=null,C=[],t)for(x=t[T],l.writeString(T),l.writeInt(i(x)),l.writeInt(_),l.writeInt(x.length),C=C.concat(x),T==="head"&&(r=_),_+=x.length;_%4;)C.push(0),_++;return l.write(C),o=2981146554-i(l.data),l.pos=r+8,l.writeUInt32(o),l.data},i=function(t){var o,l,u,m;for(t=Rw.call(t);t.length%4;)t.push(0);for(u=new ff(t),l=0,o=0,m=t.length;o<m;o=o+=4)l+=u.readUInt32();return 4294967295&l},e}(),w8={}.hasOwnProperty,rh=function(i,e){for(var t in e)w8.call(e,t)&&(i[t]=e[t]);function o(){this.constructor=i}return o.prototype=e.prototype,i.prototype=new o,i.__super__=e.prototype,i};Tc=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var x8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var o;return(o=new ff).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(t),o.writeShort(this.glyphDataFormat),o.data},e}(),p_=function(){function i(e,t){var o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(v=e.readUInt16(),x=v/2,e.pos+=6,u=function(){var G,Z;for(Z=[],f=G=0;0<=x?G<x:G>x;f=0<=x?++G:--G)Z.push(e.readUInt16());return Z}(),e.pos+=2,T=function(){var G,Z;for(Z=[],f=G=0;0<=x?G<x:G>x;f=0<=x?++G:--G)Z.push(e.readUInt16());return Z}(),_=function(){var G,Z;for(Z=[],f=G=0;0<=x?G<x:G>x;f=0<=x?++G:--G)Z.push(e.readUInt16());return Z}(),w=function(){var G,Z;for(Z=[],f=G=0;0<=x?G<x:G>x;f=0<=x?++G:--G)Z.push(e.readUInt16());return Z}(),l=(this.length-e.pos+this.offset)/2,r=function(){var G,Z;for(Z=[],f=G=0;0<=l?G<l:G>l;f=0<=l?++G:--G)Z.push(e.readUInt16());return Z}(),f=M=0,V=u.length;M<V;f=++M)for(S=u[f],o=O=C=T[f];C<=S?O<=S:O>=S;o=C<=S?++O:--O)w[f]===0?m=o+_[f]:(m=r[w[f]/2+(o-C)-(x-f)]||0)!==0&&(m+=_[f]),this.codeMap[o]=65535&m}e.pos=b}return i.encode=function(e,t){var o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we,ke,Oe,le,Ce,he,ge,Be,We,st,Xe,gt,Pt,ri;switch(me=new ff,m=Object.keys(e).sort(function(ut,bt){return ut-bt}),t){case"macroman":for(T=0,S=function(){var ut=[];for(C=0;C<256;++C)ut.push(0);return ut}(),O={0:0},u={},et=0,we=m.length;et<we;et++)O[Xe=e[l=m[et]]]==null&&(O[Xe]=++T),u[l]={old:e[l],new:O[e[l]]},S[l]=O[e[l]];return me.writeUInt16(1),me.writeUInt16(0),me.writeUInt32(12),me.writeUInt16(0),me.writeUInt16(262),me.writeUInt16(0),me.write(S),{charMap:u,subtable:me.data,maxGlyphID:T+1};case"unicode":for(Ie=[],b=[],V=0,O={},o={},M=_=null,nt=0,ke=m.length;nt<ke;nt++)O[Z=e[l=m[nt]]]==null&&(O[Z]=++V),o[l]={old:Z,new:O[Z]},r=O[Z]-l,M!=null&&r===_||(M&&b.push(M),Ie.push(l),_=r),M=l;for(M&&b.push(M),b.push(65535),Ie.push(65535),Fe=2*(Me=Ie.length),oe=2*Math.pow(Math.log(Me)/Math.LN2,2),x=Math.log(oe/2)/Math.LN2,J=2*Me-oe,f=[],te=[],v=[],C=Et=0,Oe=Ie.length;Et<Oe;C=++Et){if(pe=Ie[C],w=b[C],pe===65535){f.push(0),te.push(0);break}if(pe-(Se=o[pe].new)>=32768)for(f.push(0),te.push(2*(v.length+Me-C)),l=it=pe;pe<=w?it<=w:it>=w;l=pe<=w?++it:--it)v.push(o[l].new);else f.push(Se-pe),te.push(0)}for(me.writeUInt16(3),me.writeUInt16(1),me.writeUInt32(12),me.writeUInt16(4),me.writeUInt16(16+8*Me+2*v.length),me.writeUInt16(0),me.writeUInt16(Fe),me.writeUInt16(oe),me.writeUInt16(x),me.writeUInt16(J),We=0,le=b.length;We<le;We++)l=b[We],me.writeUInt16(l);for(me.writeUInt16(0),st=0,Ce=Ie.length;st<Ce;st++)l=Ie[st],me.writeUInt16(l);for(gt=0,he=f.length;gt<he;gt++)r=f[gt],me.writeUInt16(r);for(Pt=0,ge=te.length;Pt<ge;Pt++)G=te[Pt],me.writeUInt16(G);for(ri=0,Be=v.length;ri<Be;ri++)T=v[ri],me.writeUInt16(T);return{charMap:o,subtable:me.data,maxGlyphID:V+1}}},i}(),Fw=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="cmap",e.prototype.parse=function(t){var o,l,u;for(t.pos=this.offset,this.version=t.readUInt16(),u=t.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=u?l<u:l>u;l=0<=u?++l:--l)o=new p_(t,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},e.encode=function(t,o){var l,u;return o==null&&(o="macroman"),l=p_.encode(t,o),(u=new ff).writeUInt16(0),u.writeUInt16(1),l.table=u.data.concat(l.subtable),l},e}(),A8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),k8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var o,l;for(l=[],o=0;o<10;++o)l.push(t.readByte());return l}(),this.charRange=function(){var o,l;for(l=[],o=0;o<4;++o)l.push(t.readInt());return l}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var o,l;for(l=[],o=0;o<2;o=++o)l.push(t.readInt());return l}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),S8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="post",e.prototype.parse=function(t){var o,l,u;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var m;for(l=t.readUInt16(),this.glyphNameIndex=[],m=0;0<=l?m<l:m>l;m=0<=l?++m:--m)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],u=[];t.pos<this.offset+this.length;)o=t.readByte(),u.push(this.names.push(t.readString(o)));return u;case 151552:return l=t.readUInt16(),this.offsets=t.read(l);case 196608:break;case 262144:return this.map=function(){var r,f,_;for(_=[],m=r=0,f=this.file.maxp.numGlyphs;0<=f?r<f:r>f;m=0<=f?++r:--r)_.push(t.readUInt32());return _}.call(this)}},e}(),C8=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},E8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="name",e.prototype.parse=function(t){var o,l,u,m,r,f,_,w,b,x,v;for(t.pos=this.offset,t.readShort(),o=t.readShort(),f=t.readShort(),l=[],m=0;0<=o?m<o:m>o;m=0<=o?++m:--m)l.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(_={},m=b=0,x=l.length;b<x;m=++b)u=l[m],t.pos=u.offset,w=t.readString(u.length),r=new C8(w,u),_[v=u.nameID]==null&&(_[v]=[]),_[u.nameID].push(r);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},e}(),I8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),T8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var o,l,u,m,r,f,_;for(t.pos=this.offset,this.metrics=[],o=0,f=this.file.hhea.numberOfMetrics;0<=f?o<f:o>f;o=0<=f?++o:--o)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,b;for(b=[],o=w=0;0<=u?w<u:w>u;o=0<=u?++w:--w)b.push(t.readInt16());return b}(),this.widths=function(){var w,b,x,v;for(v=[],w=0,b=(x=this.metrics).length;w<b;w++)m=x[w],v.push(m.advance);return v}.call(this),l=this.widths[this.widths.length-1],_=[],o=r=0;0<=u?r<u:r>u;o=0<=u?++r:--r)_.push(this.widths.push(l));return _},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Rw=[].slice,L8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var o,l,u,m,r,f,_,w,b,x;return t in this.cache?this.cache[t]:(m=this.file.loca,o=this.file.contents,l=m.indexOf(t),(u=m.lengthOf(t))===0?this.cache[t]=null:(o.pos=this.offset+l,r=(f=new ff(o.read(u))).readShort(),w=f.readShort(),x=f.readShort(),_=f.readShort(),b=f.readShort(),this.cache[t]=r===-1?new M8(f,w,x,_,b):new P8(f,r,w,x,_,b),this.cache[t]))},e.prototype.encode=function(t,o,l){var u,m,r,f,_;for(r=[],m=[],f=0,_=o.length;f<_;f++)u=t[o[f]],m.push(r.length),u&&(r=r.concat(u.encode(l)));return m.push(r.length),{table:r,offsets:m}},e}(),P8=function(){function i(e,t,o,l,u,m){this.raw=e,this.numberOfContours=t,this.xMin=o,this.yMin=l,this.xMax=u,this.yMax=m,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),M8=function(){function i(e,t,o,l,u){var m,r;for(this.raw=e,this.xMin=t,this.yMin=o,this.xMax=l,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;r=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&r;)m.pos+=1&r?4:2,128&r?m.pos+=8:64&r?m.pos+=4:8&r&&(m.pos+=2)}return i.prototype.encode=function(){var e,t,o;for(t=new ff(Rw.call(this.raw.data)),e=0,o=this.glyphIDs.length;e<o;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),D8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Tc),e.prototype.tag="loca",e.prototype.parse=function(t){var o,l;return t.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?function(){var u,m;for(m=[],l=0,u=this.length;l<u;l+=2)m.push(2*t.readUInt16());return m}.call(this):function(){var u,m;for(m=[],l=0,u=this.length;l<u;l+=4)m.push(t.readUInt32());return m}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,o){for(var l=new Uint32Array(this.offsets.length),u=0,m=0,r=0;r<l.length;++r)if(l[r]=u,m<o.length&&o[m]==r){++m,l[r]=u;var f=this.offsets[r],_=this.offsets[r+1]-f;_>0&&(u+=_)}for(var w=new Array(4*l.length),b=0;b<l.length;++b)w[4*b+3]=255&l[b],w[4*b+2]=(65280&l[b])>>8,w[4*b+1]=(16711680&l[b])>>16,w[4*b]=(4278190080&l[b])>>24;return w},e}(),O8=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,o,l,u;for(t in l=this.font.cmap.tables[0].codeMap,e={},u=this.subset)o=u[t],e[t]=l[o];return e},i.prototype.glyphsFor=function(e){var t,o,l,u,m,r,f;for(l={},m=0,r=e.length;m<r;m++)l[u=e[m]]=this.font.glyf.glyphFor(u);for(u in t=[],l)(o=l[u])!=null&&o.compound&&t.push.apply(t,o.glyphIDs);if(t.length>0)for(u in f=this.glyphsFor(t))o=f[u],l[u]=o;return l},i.prototype.encode=function(e,t){var o,l,u,m,r,f,_,w,b,x,v,C,T,S,M;for(l in o=Fw.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(e),v={0:0},M=o.charMap)v[(f=M[l]).old]=f.new;for(C in x=o.maxGlyphID,m)C in v||(v[C]=x++);return w=function(O){var V,G;for(V in G={},O)G[O[V]]=V;return G}(v),b=Object.keys(w).sort(function(O,V){return O-V}),T=function(){var O,V,G;for(G=[],O=0,V=b.length;O<V;O++)r=b[O],G.push(w[r]);return G}(),u=this.font.glyf.encode(m,T,v),_=this.font.loca.encode(u.offsets,T),S={cmap:this.font.cmap.raw(),glyf:u.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},i}();Ur.API.PDFObject=function(){var i;function e(){}return i=function(t,o){return(Array(o+1).join("0")+t).slice(-o)},e.convert=function(t){var o,l,u,m;if(Array.isArray(t))return"["+function(){var r,f,_;for(_=[],r=0,f=t.length;r<f;r++)o=t[r],_.push(e.convert(o));return _}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(l in u=["<<"],t)m=t[l],u.push("/"+l+" "+e.convert(m));return u.push(">>"),u.join(`
`)}return""+t},e}();var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F8(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function R8(i){var e=i.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),t}var Bw={exports:{}};(function(i,e){(function(t,o){o()})(O0,function(){function t(_,w){return typeof w>"u"?w={autoBom:!1}:typeof w!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),w={autoBom:!w}),w.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function o(_,w,b){var x=new XMLHttpRequest;x.open("GET",_),x.responseType="blob",x.onload=function(){f(x.response,w,b)},x.onerror=function(){console.error("could not download file")},x.send()}function l(_){var w=new XMLHttpRequest;w.open("HEAD",_,!1);try{w.send()}catch{}return 200<=w.status&&299>=w.status}function u(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(w)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof O0=="object"&&O0.global===O0?O0:void 0,r=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(_,w,b){var x=m.URL||m.webkitURL,v=document.createElement("a");w=w||_.name||"download",v.download=w,v.rel="noopener",typeof _=="string"?(v.href=_,v.origin===location.origin?u(v):l(v.href)?o(_,w,b):u(v,v.target="_blank")):(v.href=x.createObjectURL(_),setTimeout(function(){x.revokeObjectURL(v.href)},4e4),setTimeout(function(){u(v)},0))}:"msSaveOrOpenBlob"in navigator?function(_,w,b){if(w=w||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(t(_,b),w);else if(l(_))o(_,w,b);else{var x=document.createElement("a");x.href=_,x.target="_blank",setTimeout(function(){u(x)})}}:function(_,w,b,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof _=="string")return o(_,w,b);var v=_.type==="application/octet-stream",C=/constructor/i.test(m.HTMLElement)||m.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||v&&C||r)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var V=S.result;V=T?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=V:location=V,x=null},S.readAsDataURL(_)}else{var M=m.URL||m.webkitURL,O=M.createObjectURL(_);x?x.location=O:location.href=O,x=null,setTimeout(function(){M.revokeObjectURL(O)},4e4)}});m.saveAs=f.saveAs=f,i.exports=f})})(Bw);var Tu={exports:{}};(function(i,e){(function(t,o){i.exports=o()})(O0,function(){var t,o,l;function u(r,f){if(!t)t=f;else if(!o)o=f;else{var _="var sharedChunk = {}; ("+t+")(sharedChunk); ("+o+")(sharedChunk);",w={};t(w),l=f(w),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}u(["exports"],function(r){var f=_;function _(y,h,A,P){this.cx=3*y,this.bx=3*(A-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(P-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=h,this.p2x=A,this.p2y=P}function w(y,h,A,P){const N=new f(y,h,A,P);return function(q){return N.solve(q)}}_.prototype={sampleCurveX:function(y){return((this.ax*y+this.bx)*y+this.cx)*y},sampleCurveY:function(y){return((this.ay*y+this.by)*y+this.cy)*y},sampleCurveDerivativeX:function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},solveCurveX:function(y,h){if(h===void 0&&(h=1e-6),y<0)return 0;if(y>1)return 1;for(var A=y,P=0;P<8;P++){var N=this.sampleCurveX(A)-y;if(Math.abs(N)<h)return A;var q=this.sampleCurveDerivativeX(A);if(Math.abs(q)<1e-6)break;A-=N/q}var Y=0,re=1;for(A=y,P=0;P<20&&(N=this.sampleCurveX(A),!(Math.abs(N-y)<h));P++)y>N?Y=A:re=A,A=.5*(re-Y)+Y;return A},solve:function(y,h){return this.sampleCurveY(this.solveCurveX(y,h))}};const b=w(.25,.1,.25,1);function x(y,h,A){return Math.min(A,Math.max(h,y))}function v(y,h,A){const P=A-h,N=((y-h)%P+P)%P+h;return N===h?A:N}function C(y,...h){for(const A of h)for(const P in A)y[P]=A[P];return y}let T=1;function S(y,h){y.forEach(A=>{h[A]&&(h[A]=h[A].bind(h))})}function M(y,h,A){const P={};for(const N in y)P[N]=h.call(A||this,y[N],N,y);return P}function O(y,h,A){const P={};for(const N in y)h.call(A||this,y[N],N,y)&&(P[N]=y[N]);return P}function V(y){return Array.isArray(y)?y.map(V):typeof y=="object"&&y?M(y,V):y}const G={};function Z(y){G[y]||(typeof console<"u"&&console.warn(y),G[y]=!0)}function te(y,h,A){return(A.y-y.y)*(h.x-y.x)>(h.y-y.y)*(A.x-y.x)}function J(y){let h=0;for(let A,P,N=0,q=y.length,Y=q-1;N<q;Y=N++)A=y[N],P=y[Y],h+=(P.x-A.x)*(A.y+P.y);return h}function oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Me(y){const h={};if(y.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,P,N,q)=>{const Y=N||q;return h[P]=!Y||Y.toLowerCase(),""}),h["max-age"]){const A=parseInt(h["max-age"],10);isNaN(A)?delete h["max-age"]:h["max-age"]=A}return h}let Fe,pe,Ie=null;function Se(y){if(Ie==null){const h=y.navigator?y.navigator.userAgent:null;Ie=!!y.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return Ie}function me(y){return typeof ImageBitmap<"u"&&y instanceof ImageBitmap}const et={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y){const h=requestAnimationFrame(y);return{cancel:()=>cancelAnimationFrame(h)}},getImageData(y,h=0){const A=window.document.createElement("canvas"),P=A.getContext("2d");if(!P)throw new Error("failed to create canvas 2d context");return A.width=y.width,A.height=y.height,P.drawImage(y,0,0,y.width,y.height),P.getImageData(-h,-h,y.width+2*h,y.height+2*h)},resolveURL:y=>(Fe||(Fe=document.createElement("a")),Fe.href=y,Fe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(pe==null&&(pe=matchMedia("(prefers-reduced-motion: reduce)")),pe.matches)}};var nt=Et;function Et(y,h){this.x=y,this.y=h}Et.prototype={clone:function(){return new Et(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,h){return this.clone()._rotateAround(y,h)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var h=y.x-this.x,A=y.y-this.y;return h*h+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,h){return Math.atan2(this.x*h-this.y*y,this.x*y+this.y*h)},_matMult:function(y){var h=y[2]*this.x+y[3]*this.y;return this.x=y[0]*this.x+y[1]*this.y,this.y=h,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var h=Math.cos(y),A=Math.sin(y),P=A*this.x+h*this.y;return this.x=h*this.x-A*this.y,this.y=P,this},_rotateAround:function(y,h){var A=Math.cos(y),P=Math.sin(y),N=h.y+P*(this.x-h.x)+A*(this.y-h.y);return this.x=h.x+A*(this.x-h.x)-P*(this.y-h.y),this.y=N,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Et.convert=function(y){return y instanceof Et?y:Array.isArray(y)?new Et(y[0],y[1]):y};const it={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},we="mapbox-tiles";let ke,Oe,le=500,Ce=50;function he(){typeof caches>"u"||ke||(ke=caches.open(we))}let ge=1/0;const Be={supported:!1,testSupport:function(y){!Xe&&st&&(gt?Pt(y):We=y)}};let We,st,Xe=!1,gt=!1;function Pt(y){const h=y.createTexture();y.bindTexture(y.TEXTURE_2D,h);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,st),y.isContextLost())return;Be.supported=!0}catch{}y.deleteTexture(h),Xe=!0}typeof document<"u"&&(st=document.createElement("img"),st.onload=function(){We&&Pt(We),We=null,gt=!0},st.onerror=function(){Xe=!0,We=null},st.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ri={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ri);class ut extends Error{constructor(h,A,P,N){super(`AJAXError: ${A} (${h}): ${P}`),this.status=h,this.statusText=A,this.url=P,this.body=N}}const bt=oe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function vt(y,h){const A=new AbortController,P=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:bt(),signal:A.signal});let N=!1,q=!1;return y.type==="json"&&P.headers.set("Accept","application/json"),((Y,re,fe)=>{if(q)return;const be=Date.now();fetch(P).then(Re=>Re.ok?((Ve,tt,lt)=>{(y.type==="arrayBuffer"?Ve.arrayBuffer():y.type==="json"?Ve.json():Ve.text()).then(ht=>{q||(tt&&lt&&function(Kt,Wt,vi){if(he(),!ke)return;const Fi={status:Wt.status,statusText:Wt.statusText,headers:new Headers};Wt.headers.forEach((Li,Qi)=>Fi.headers.set(Qi,Li));const gi=Me(Wt.headers.get("Cache-Control")||"");gi["no-store"]||(gi["max-age"]&&Fi.headers.set("Expires",new Date(vi+1e3*gi["max-age"]).toUTCString()),new Date(Fi.headers.get("Expires")).getTime()-vi<42e4||function(Li,Qi){if(Oe===void 0)try{new Response(new ReadableStream),Oe=!0}catch{Oe=!1}Oe?Qi(Li.body):Li.blob().then(Qi)}(Wt,Li=>{const Qi=new Response(Li,Fi);he(),ke&&ke.then(Ji=>Ji.put(function(Zn){const er=Zn.indexOf("?");return er<0?Zn:Zn.slice(0,er)}(Kt.url),Qi)).catch(Ji=>Z(Ji.message))}))}(P,tt,lt),N=!0,h(null,ht,Ve.headers.get("Cache-Control"),Ve.headers.get("Expires")))}).catch(ht=>{q||h(new Error(ht.message))})})(Re,null,be):Re.blob().then(Ve=>h(new ut(Re.status,Re.statusText,y.url,Ve)))).catch(Re=>{Re.code!==20&&h(new Error(Re.message))})})(),{cancel:()=>{q=!0,N||A.abort()}}}const Ke=function(y,h){if(/:\/\//.test(y.url)&&!/^https?:|^file:/.test(y.url)){if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,h);if(!oe()){const P=y.url.substring(0,y.url.indexOf("://"));return(it.REGISTERED_PROTOCOLS[P]||vt)(y,h)}}if(!(/^file:/.test(A=y.url)||/^file:/.test(bt())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return vt(y,h);if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,h,void 0,!0)}var A;return function(P,N){const q=new XMLHttpRequest;q.open(P.method||"GET",P.url,!0),P.type==="arrayBuffer"&&(q.responseType="arraybuffer");for(const Y in P.headers)q.setRequestHeader(Y,P.headers[Y]);return P.type==="json"&&(q.responseType="text",q.setRequestHeader("Accept","application/json")),q.withCredentials=P.credentials==="include",q.onerror=()=>{N(new Error(q.statusText))},q.onload=()=>{if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let Y=q.response;if(P.type==="json")try{Y=JSON.parse(q.response)}catch(re){return N(re)}N(null,Y,q.getResponseHeader("Cache-Control"),q.getResponseHeader("Expires"))}else{const Y=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});N(new ut(q.status,q.statusText,P.url,Y))}},q.send(P.body),{cancel:()=>q.abort()}}(y,h)},ei=function(y,h){return Ke(C(y,{type:"arrayBuffer"}),h)};function li(y){const h=window.document.createElement("a");return h.href=y,h.protocol===window.document.location.protocol&&h.host===window.document.location.host}const $t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Si,Ti;Si=[],Ti=0;const Yt=function(y,h){if(Be.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),Ti>=it.MAX_PARALLEL_IMAGE_REQUESTS){const q={requestParameters:y,callback:h,cancelled:!1,cancel(){this.cancelled=!0}};return Si.push(q),q}Ti++;let A=!1;const P=()=>{if(!A)for(A=!0,Ti--;Si.length&&Ti<it.MAX_PARALLEL_IMAGE_REQUESTS;){const q=Si.shift(),{requestParameters:Y,callback:re,cancelled:fe}=q;fe||(q.cancel=Yt(Y,re).cancel)}},N=ei(y,(q,Y,re,fe)=>{P(),q?h(q):Y&&function(be,Re){typeof createImageBitmap=="function"?function(Ve,tt){const lt=new Blob([new Uint8Array(Ve)],{type:"image/png"});createImageBitmap(lt).then(ht=>{tt(null,ht)}).catch(ht=>{tt(new Error(`Could not load image because of ${ht.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(be,Re):function(Ve,tt){const lt=new Image;lt.onload=()=>{tt(null,lt),URL.revokeObjectURL(lt.src),lt.onload=null,window.requestAnimationFrame(()=>{lt.src=$t})},lt.onerror=()=>tt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ht=new Blob([new Uint8Array(Ve)],{type:"image/png"});lt.src=Ve.byteLength?URL.createObjectURL(ht):$t}(be,Re)}(Y,(be,Re)=>{be!=null?h(be):Re!=null&&h(null,Re,{cacheControl:re,expires:fe})})});return{cancel:()=>{N.cancel(),P()}}};function mi(y,h,A){A[y]&&A[y].indexOf(h)!==-1||(A[y]=A[y]||[],A[y].push(h))}function Wi(y,h,A){if(A&&A[y]){const P=A[y].indexOf(h);P!==-1&&A[y].splice(P,1)}}class Ci{constructor(h,A={}){C(this,A),this.type=h}}class ti extends Ci{constructor(h,A={}){super("error",C({error:h},A))}}class Pe{on(h,A){return this._listeners=this._listeners||{},mi(h,A,this._listeners),this}off(h,A){return Wi(h,A,this._listeners),Wi(h,A,this._oneTimeListeners),this}once(h,A){return this._oneTimeListeners=this._oneTimeListeners||{},mi(h,A,this._oneTimeListeners),this}fire(h,A){typeof h=="string"&&(h=new Ci(h,A||{}));const P=h.type;if(this.listens(P)){h.target=this;const N=this._listeners&&this._listeners[P]?this._listeners[P].slice():[];for(const re of N)re.call(this,h);const q=this._oneTimeListeners&&this._oneTimeListeners[P]?this._oneTimeListeners[P].slice():[];for(const re of q)Wi(P,re,this._oneTimeListeners),re.call(this,h);const Y=this._eventedParent;Y&&(C(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Y.fire(h))}else h instanceof ti&&console.error(h.error);return this}listens(h){return this._listeners&&this._listeners[h]&&this._listeners[h].length>0||this._oneTimeListeners&&this._oneTimeListeners[h]&&this._oneTimeListeners[h].length>0||this._eventedParent&&this._eventedParent.listens(h)}setEventedParent(h,A){return this._eventedParent=h,this._eventedParentData=A,this}}var Q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ae{constructor(h,A,P,N){this.message=(h?`${h}: `:"")+P,N&&(this.identifier=N),A!=null&&A.__line__&&(this.line=A.__line__)}}function Qe(y){const h=y.value;return h?[new ae(y.key,h,"constants have been deprecated as of v8")]:[]}function _t(y,...h){for(const A of h)for(const P in A)y[P]=A[P];return y}function Jt(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function di(y){if(Array.isArray(y))return y.map(di);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){const h={};for(const A in y)h[A]=di(y[A]);return h}return Jt(y)}class wn extends Error{constructor(h,A){super(A),this.message=A,this.key=h}}class Ln{constructor(h,A=[]){this.parent=h,this.bindings={};for(const[P,N]of A)this.bindings[P]=N}concat(h){return new Ln(this,h)}get(h){if(this.bindings[h])return this.bindings[h];if(this.parent)return this.parent.get(h);throw new Error(`${h} not found in scope.`)}has(h){return!!this.bindings[h]||!!this.parent&&this.parent.has(h)}}const hn={kind:"null"},Bi={kind:"number"},Xi={kind:"string"},Hn={kind:"boolean"},Gn={kind:"color"},Zr={kind:"object"},zn={kind:"value"},fn={kind:"collator"},yn={kind:"formatted"},tn={kind:"padding"},wr={kind:"resolvedImage"};function Wn(y,h){return{kind:"array",itemType:y,N:h}}function lr(y){if(y.kind==="array"){const h=lr(y.itemType);return typeof y.N=="number"?`array<${h}, ${y.N}>`:y.itemType.kind==="value"?"array":`array<${h}>`}return y.kind}const Kr=[hn,Bi,Xi,Hn,Gn,yn,Zr,Wn(zn),tn,wr];function rn(y,h){if(h.kind==="error")return null;if(y.kind==="array"){if(h.kind==="array"&&(h.N===0&&h.itemType.kind==="value"||!rn(y.itemType,h.itemType))&&(typeof y.N!="number"||y.N===h.N))return null}else{if(y.kind===h.kind)return null;if(y.kind==="value"){for(const A of Kr)if(!rn(A,h))return null}}return`Expected ${lr(y)} but found ${lr(h)} instead.`}function He(y,h){return h.some(A=>A.kind===y.kind)}function yo(y,h){return h.some(A=>A==="null"?y===null:A==="array"?Array.isArray(y):A==="object"?y&&!Array.isArray(y)&&typeof y=="object":A===typeof y)}var _o,co={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Te(y){return(y=Math.round(y))<0?0:y>255?255:y}function Ee(y){return Te(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function qe(y){return(h=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:h>1?1:h;var h}function ct(y,h,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?y+(h-y)*A*6:2*A<1?h:3*A<2?y+(h-y)*(2/3-A)*6:y}try{_o={}.parseCSSColor=function(y){var h,A=y.replace(/ /g,"").toLowerCase();if(A in co)return co[A].slice();if(A[0]==="#")return A.length===4?(h=parseInt(A.substr(1),16))>=0&&h<=4095?[(3840&h)>>4|(3840&h)>>8,240&h|(240&h)>>4,15&h|(15&h)<<4,1]:null:A.length===7&&(h=parseInt(A.substr(1),16))>=0&&h<=16777215?[(16711680&h)>>16,(65280&h)>>8,255&h,1]:null;var P=A.indexOf("("),N=A.indexOf(")");if(P!==-1&&N+1===A.length){var q=A.substr(0,P),Y=A.substr(P+1,N-(P+1)).split(","),re=1;switch(q){case"rgba":if(Y.length!==4)return null;re=qe(Y.pop());case"rgb":return Y.length!==3?null:[Ee(Y[0]),Ee(Y[1]),Ee(Y[2]),re];case"hsla":if(Y.length!==4)return null;re=qe(Y.pop());case"hsl":if(Y.length!==3)return null;var fe=(parseFloat(Y[0])%360+360)%360/360,be=qe(Y[1]),Re=qe(Y[2]),Ve=Re<=.5?Re*(be+1):Re+be-Re*be,tt=2*Re-Ve;return[Te(255*ct(tt,Ve,fe+1/3)),Te(255*ct(tt,Ve,fe)),Te(255*ct(tt,Ve,fe-1/3)),re];default:return null}}return null}}catch{}class dt{constructor(h,A,P,N=1){this.r=h,this.g=A,this.b=P,this.a=N}static parse(h){if(!h)return;if(h instanceof dt)return h;if(typeof h!="string")return;const A=_o(h);return A?new dt(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[h,A,P,N]=this.toArray();return`rgba(${Math.round(h)},${Math.round(A)},${Math.round(P)},${N})`}toArray(){const{r:h,g:A,b:P,a:N}=this;return N===0?[0,0,0,0]:[255*h/N,255*A/N,255*P/N,N]}}dt.black=new dt(0,0,0,1),dt.white=new dt(1,1,1,1),dt.transparent=new dt(0,0,0,0),dt.red=new dt(1,0,0,1);class jt{constructor(h,A,P){this.sensitivity=h?A?"variant":"case":A?"accent":"base",this.locale=P,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(h,A){return this.collator.compare(h,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ge{constructor(h,A,P,N,q){this.text=h,this.image=A,this.scale=P,this.fontStack=N,this.textColor=q}}class Zt{constructor(h){this.sections=h}static fromString(h){return new Zt([new Ge(h,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(h=>h.text.length!==0||h.image&&h.image.name.length!==0)}static factory(h){return h instanceof Zt?h:Zt.fromString(h)}toString(){return this.sections.length===0?"":this.sections.map(h=>h.text).join("")}}class Rt{constructor(h){this.values=h.slice()}static parse(h){if(h instanceof Rt)return h;if(typeof h=="number")return new Rt([h,h,h,h]);if(Array.isArray(h)&&!(h.length<1||h.length>4)){for(const A of h)if(typeof A!="number")return;switch(h.length){case 1:h=[h[0],h[0],h[0],h[0]];break;case 2:h=[h[0],h[1],h[0],h[1]];break;case 3:h=[h[0],h[1],h[2],h[1]]}return new Rt(h)}}toString(){return JSON.stringify(this.values)}}class oi{constructor(h){this.name=h.name,this.available=h.available}toString(){return this.name}static fromString(h){return h?new oi({name:h,available:!1}):null}}function yt(y,h,A,P){return typeof y=="number"&&y>=0&&y<=255&&typeof h=="number"&&h>=0&&h<=255&&typeof A=="number"&&A>=0&&A<=255?P===void 0||typeof P=="number"&&P>=0&&P<=1?null:`Invalid rgba value [${[y,h,A,P].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof P=="number"?[y,h,A,P]:[y,h,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ri(y){if(y===null||typeof y=="string"||typeof y=="boolean"||typeof y=="number"||y instanceof dt||y instanceof jt||y instanceof Zt||y instanceof Rt||y instanceof oi)return!0;if(Array.isArray(y)){for(const h of y)if(!Ri(h))return!1;return!0}if(typeof y=="object"){for(const h in y)if(!Ri(y[h]))return!1;return!0}return!1}function Ii(y){if(y===null)return hn;if(typeof y=="string")return Xi;if(typeof y=="boolean")return Hn;if(typeof y=="number")return Bi;if(y instanceof dt)return Gn;if(y instanceof jt)return fn;if(y instanceof Zt)return yn;if(y instanceof Rt)return tn;if(y instanceof oi)return wr;if(Array.isArray(y)){const h=y.length;let A;for(const P of y){const N=Ii(P);if(A){if(A===N)continue;A=zn;break}A=N}return Wn(A||zn,h)}return Zr}function Sn(y){const h=typeof y;return y===null?"":h==="string"||h==="number"||h==="boolean"?String(y):y instanceof dt||y instanceof Zt||y instanceof Rt||y instanceof oi?y.toString():JSON.stringify(y)}class An{constructor(h,A){this.type=h,this.value=A}static parse(h,A){if(h.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${h.length-1} instead.`);if(!Ri(h[1]))return A.error("invalid value");const P=h[1];let N=Ii(P);const q=A.expectedType;return N.kind!=="array"||N.N!==0||!q||q.kind!=="array"||typeof q.N=="number"&&q.N!==0||(N=q),new An(N,P)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wt{constructor(h){this.name="ExpressionEvaluationError",this.message=h}toJSON(){return this.message}}const Tn={string:Xi,number:Bi,boolean:Hn,object:Zr};class Jn{constructor(h,A){this.type=h,this.args=A}static parse(h,A){if(h.length<2)return A.error("Expected at least one argument.");let P,N=1;const q=h[0];if(q==="array"){let re,fe;if(h.length>2){const be=h[1];if(typeof be!="string"||!(be in Tn)||be==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);re=Tn[be],N++}else re=zn;if(h.length>3){if(h[2]!==null&&(typeof h[2]!="number"||h[2]<0||h[2]!==Math.floor(h[2])))return A.error('The length argument to "array" must be a positive integer literal',2);fe=h[2],N++}P=Wn(re,fe)}else{if(!Tn[q])throw new Error(`Types doesn't contain name = ${q}`);P=Tn[q]}const Y=[];for(;N<h.length;N++){const re=A.parse(h[N],N,zn);if(!re)return null;Y.push(re)}return new Jn(P,Y)}evaluate(h){for(let A=0;A<this.args.length;A++){const P=this.args[A].evaluate(h);if(!rn(this.type,Ii(P)))return P;if(A===this.args.length-1)throw new wt(`Expected value to be of type ${lr(this.type)}, but found ${lr(Ii(P))} instead.`)}throw new Error}eachChild(h){this.args.forEach(h)}outputDefined(){return this.args.every(h=>h.outputDefined())}}const Pr={"to-boolean":Hn,"to-color":Gn,"to-number":Bi,"to-string":Xi};class sr{constructor(h,A){this.type=h,this.args=A}static parse(h,A){if(h.length<2)return A.error("Expected at least one argument.");const P=h[0];if(!Pr[P])throw new Error(`Can't parse ${P} as it is not part of the known types`);if((P==="to-boolean"||P==="to-string")&&h.length!==2)return A.error("Expected one argument.");const N=Pr[P],q=[];for(let Y=1;Y<h.length;Y++){const re=A.parse(h[Y],Y,zn);if(!re)return null;q.push(re)}return new sr(N,q)}evaluate(h){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(h));if(this.type.kind==="color"){let A,P;for(const N of this.args){if(A=N.evaluate(h),P=null,A instanceof dt)return A;if(typeof A=="string"){const q=h.parseColor(A);if(q)return q}else if(Array.isArray(A)&&(P=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:yt(A[0],A[1],A[2],A[3]),!P))return new dt(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new wt(P||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const P of this.args){A=P.evaluate(h);const N=Rt.parse(A);if(N)return N}throw new wt(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const P of this.args){if(A=P.evaluate(h),A===null)return 0;const N=Number(A);if(!isNaN(N))return N}throw new wt(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?Zt.fromString(Sn(this.args[0].evaluate(h))):this.type.kind==="resolvedImage"?oi.fromString(Sn(this.args[0].evaluate(h))):Sn(this.args[0].evaluate(h))}eachChild(h){this.args.forEach(h)}outputDefined(){return this.args.every(h=>h.outputDefined())}}const Cr=["Unknown","Point","LineString","Polygon"];class Mr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(h){let A=this._parseColorCache[h];return A||(A=this._parseColorCache[h]=dt.parse(h)),A}}class io{constructor(h,A,P,N){this.name=h,this.type=A,this._evaluate=P,this.args=N}evaluate(h){return this._evaluate(h,this.args)}eachChild(h){this.args.forEach(h)}outputDefined(){return!1}static parse(h,A){const P=h[0],N=io.definitions[P];if(!N)return A.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0);const q=Array.isArray(N)?N[0]:N.type,Y=Array.isArray(N)?[[N[1],N[2]]]:N.overloads,re=Y.filter(([be])=>!Array.isArray(be)||be.length===h.length-1);let fe=null;for(const[be,Re]of re){fe=new xl(A.registry,A.path,null,A.scope);const Ve=[];let tt=!1;for(let lt=1;lt<h.length;lt++){const ht=h[lt],Kt=Array.isArray(be)?be[lt-1]:be.type,Wt=fe.parse(ht,1+Ve.length,Kt);if(!Wt){tt=!0;break}Ve.push(Wt)}if(!tt)if(Array.isArray(be)&&be.length!==Ve.length)fe.error(`Expected ${be.length} arguments, but found ${Ve.length} instead.`);else{for(let lt=0;lt<Ve.length;lt++){const ht=Array.isArray(be)?be[lt]:be.type,Kt=Ve[lt];fe.concat(lt+1).checkSubtype(ht,Kt.type)}if(fe.errors.length===0)return new io(P,q,Re,Ve)}}if(re.length===1)A.errors.push(...fe.errors);else{const be=(re.length?re:Y).map(([Ve])=>{return tt=Ve,Array.isArray(tt)?`(${tt.map(lr).join(", ")})`:`(${lr(tt.type)}...)`;var tt}).join(" | "),Re=[];for(let Ve=1;Ve<h.length;Ve++){const tt=A.parse(h[Ve],1+Re.length);if(!tt)return null;Re.push(lr(tt.type))}A.error(`Expected arguments of type ${be}, but found (${Re.join(", ")}) instead.`)}return null}static register(h,A){io.definitions=A;for(const P in A)h[P]=io}}class Jr{constructor(h,A,P){this.type=fn,this.locale=P,this.caseSensitive=h,this.diacriticSensitive=A}static parse(h,A){if(h.length!==2)return A.error("Expected one argument.");const P=h[1];if(typeof P!="object"||Array.isArray(P))return A.error("Collator options argument must be an object.");const N=A.parse(P["case-sensitive"]!==void 0&&P["case-sensitive"],1,Hn);if(!N)return null;const q=A.parse(P["diacritic-sensitive"]!==void 0&&P["diacritic-sensitive"],1,Hn);if(!q)return null;let Y=null;return P.locale&&(Y=A.parse(P.locale,1,Xi),!Y)?null:new Jr(N,q,Y)}evaluate(h){return new jt(this.caseSensitive.evaluate(h),this.diacriticSensitive.evaluate(h),this.locale?this.locale.evaluate(h):null)}eachChild(h){h(this.caseSensitive),h(this.diacriticSensitive),this.locale&&h(this.locale)}outputDefined(){return!1}}const mo=8192;function Qo(y,h){y[0]=Math.min(y[0],h[0]),y[1]=Math.min(y[1],h[1]),y[2]=Math.max(y[2],h[0]),y[3]=Math.max(y[3],h[1])}function nl(y,h){return!(y[0]<=h[0]||y[2]>=h[2]||y[1]<=h[1]||y[3]>=h[3])}function Mo(y,h){const A=(180+y[0])/360,P=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y[1]*Math.PI/360)))/360,N=Math.pow(2,h.z);return[Math.round(A*N*mo),Math.round(P*N*mo)]}function Mt(y,h,A){const P=y[0]-h[0],N=y[1]-h[1],q=y[0]-A[0],Y=y[1]-A[1];return P*Y-q*N==0&&P*q<=0&&N*Y<=0}function tr(y,h){let A=!1;for(let Y=0,re=h.length;Y<re;Y++){const fe=h[Y];for(let be=0,Re=fe.length;be<Re-1;be++){if(Mt(y,fe[be],fe[be+1]))return!1;(N=fe[be])[1]>(P=y)[1]!=(q=fe[be+1])[1]>P[1]&&P[0]<(q[0]-N[0])*(P[1]-N[1])/(q[1]-N[1])+N[0]&&(A=!A)}}var P,N,q;return A}function rr(y,h){for(let A=0;A<h.length;A++)if(tr(y,h[A]))return!0;return!1}function zr(y,h,A,P){const N=P[0]-A[0],q=P[1]-A[1],Y=(y[0]-A[0])*q-N*(y[1]-A[1]),re=(h[0]-A[0])*q-N*(h[1]-A[1]);return Y>0&&re<0||Y<0&&re>0}function Xo(y,h,A){for(const be of A)for(let Re=0;Re<be.length-1;++Re)if((re=[(Y=be[Re+1])[0]-(q=be[Re])[0],Y[1]-q[1]])[0]*(fe=[(N=h)[0]-(P=y)[0],N[1]-P[1]])[1]-re[1]*fe[0]!=0&&zr(P,N,q,Y)&&zr(q,Y,P,N))return!0;var P,N,q,Y,re,fe;return!1}function Do(y,h){for(let A=0;A<y.length;++A)if(!tr(y[A],h))return!1;for(let A=0;A<y.length-1;++A)if(Xo(y[A],y[A+1],h))return!1;return!0}function Ea(y,h){for(let A=0;A<h.length;A++)if(Do(y,h[A]))return!0;return!1}function es(y,h,A){const P=[];for(let N=0;N<y.length;N++){const q=[];for(let Y=0;Y<y[N].length;Y++){const re=Mo(y[N][Y],A);Qo(h,re),q.push(re)}P.push(q)}return P}function Us(y,h,A){const P=[];for(let N=0;N<y.length;N++){const q=es(y[N],h,A);P.push(q)}return P}function ys(y,h,A,P){if(y[0]<A[0]||y[0]>A[2]){const N=.5*P;let q=y[0]-A[0]>N?-P:A[0]-y[0]>N?P:0;q===0&&(q=y[0]-A[2]>N?-P:A[2]-y[0]>N?P:0),y[0]+=q}Qo(h,y)}function Ia(y,h,A,P){const N=Math.pow(2,P.z)*mo,q=[P.x*mo,P.y*mo],Y=[];for(const re of y)for(const fe of re){const be=[fe.x+q[0],fe.y+q[1]];ys(be,h,A,N),Y.push(be)}return Y}function ks(y,h,A,P){const N=Math.pow(2,P.z)*mo,q=[P.x*mo,P.y*mo],Y=[];for(const fe of y){const be=[];for(const Re of fe){const Ve=[Re.x+q[0],Re.y+q[1]];Qo(h,Ve),be.push(Ve)}Y.push(be)}if(h[2]-h[0]<=N/2){(re=h)[0]=re[1]=1/0,re[2]=re[3]=-1/0;for(const fe of Y)for(const be of fe)ys(be,h,A,N)}var re;return Y}class Ks{constructor(h,A){this.type=Hn,this.geojson=h,this.geometries=A}static parse(h,A){if(h.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${h.length-1} instead.`);if(Ri(h[1])){const P=h[1];if(P.type==="FeatureCollection")for(let N=0;N<P.features.length;++N){const q=P.features[N].geometry.type;if(q==="Polygon"||q==="MultiPolygon")return new Ks(P,P.features[N].geometry)}else if(P.type==="Feature"){const N=P.geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new Ks(P,P.geometry)}else if(P.type==="Polygon"||P.type==="MultiPolygon")return new Ks(P,P)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(h){if(h.geometry()!=null&&h.canonicalID()!=null){if(h.geometryType()==="Point")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const re=es(P.coordinates,q,Y),fe=Ia(A.geometry(),N,q,Y);if(!nl(N,q))return!1;for(const be of fe)if(!tr(be,re))return!1}if(P.type==="MultiPolygon"){const re=Us(P.coordinates,q,Y),fe=Ia(A.geometry(),N,q,Y);if(!nl(N,q))return!1;for(const be of fe)if(!rr(be,re))return!1}return!0}(h,this.geometries);if(h.geometryType()==="LineString")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const re=es(P.coordinates,q,Y),fe=ks(A.geometry(),N,q,Y);if(!nl(N,q))return!1;for(const be of fe)if(!Do(be,re))return!1}if(P.type==="MultiPolygon"){const re=Us(P.coordinates,q,Y),fe=ks(A.geometry(),N,q,Y);if(!nl(N,q))return!1;for(const be of fe)if(!Ea(be,re))return!1}return!0}(h,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Vs(y){if(y instanceof io&&(y.name==="get"&&y.args.length===1||y.name==="feature-state"||y.name==="has"&&y.args.length===1||y.name==="properties"||y.name==="geometry-type"||y.name==="id"||/^filter-/.test(y.name))||y instanceof Ks)return!1;let h=!0;return y.eachChild(A=>{h&&!Vs(A)&&(h=!1)}),h}function Ta(y){if(y instanceof io&&y.name==="feature-state")return!1;let h=!0;return y.eachChild(A=>{h&&!Ta(A)&&(h=!1)}),h}function wl(y,h){if(y instanceof io&&h.indexOf(y.name)>=0)return!1;let A=!0;return y.eachChild(P=>{A&&!wl(P,h)&&(A=!1)}),A}class uu{constructor(h,A){this.type=A.type,this.name=h,this.boundExpression=A}static parse(h,A){if(h.length!==2||typeof h[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const P=h[1];return A.scope.has(P)?new uu(P,A.scope.get(P)):A.error(`Unknown variable "${P}". Make sure "${P}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(h){return this.boundExpression.evaluate(h)}eachChild(){}outputDefined(){return!1}}class xl{constructor(h,A=[],P,N=new Ln,q=[]){this.registry=h,this.path=A,this.key=A.map(Y=>`[${Y}]`).join(""),this.scope=N,this.errors=q,this.expectedType=P}parse(h,A,P,N,q={}){return A?this.concat(A,P,N)._parse(h,q):this._parse(h,q)}_parse(h,A){function P(N,q,Y){return Y==="assert"?new Jn(q,[N]):Y==="coerce"?new sr(q,[N]):N}if(h!==null&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"||(h=["literal",h]),Array.isArray(h)){if(h.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const N=h[0];if(typeof N!="string")return this.error(`Expression name must be a string, but found ${typeof N} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const q=this.registry[N];if(q){let Y=q.parse(h,this);if(!Y)return null;if(this.expectedType){const re=this.expectedType,fe=Y.type;if(re.kind!=="string"&&re.kind!=="number"&&re.kind!=="boolean"&&re.kind!=="object"&&re.kind!=="array"||fe.kind!=="value")if(re.kind!=="color"&&re.kind!=="formatted"&&re.kind!=="resolvedImage"||fe.kind!=="value"&&fe.kind!=="string")if(re.kind!=="padding"||fe.kind!=="value"&&fe.kind!=="number"&&fe.kind!=="array"){if(this.checkSubtype(re,fe))return null}else Y=P(Y,re,A.typeAnnotation||"coerce");else Y=P(Y,re,A.typeAnnotation||"coerce");else Y=P(Y,re,A.typeAnnotation||"assert")}if(!(Y instanceof An)&&Y.type.kind!=="resolvedImage"&&cu(Y)){const re=new Mr;try{Y=new An(Y.type,Y.evaluate(re))}catch(fe){return this.error(fe.message),null}}return Y}return this.error(`Unknown expression "${N}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(h===void 0?"'undefined' value invalid. Use null instead.":typeof h=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof h} instead.`)}concat(h,A,P){const N=typeof h=="number"?this.path.concat(h):this.path,q=P?this.scope.concat(P):this.scope;return new xl(this.registry,N,A||null,q,this.errors)}error(h,...A){const P=`${this.key}${A.map(N=>`[${N}]`).join("")}`;this.errors.push(new wn(P,h))}checkSubtype(h,A){const P=rn(h,A);return P&&this.error(P),P}}function cu(y){if(y instanceof uu)return cu(y.boundExpression);if(y instanceof io&&y.name==="error"||y instanceof Jr||y instanceof Ks)return!1;const h=y instanceof sr||y instanceof Jn;let A=!0;return y.eachChild(P=>{A=h?A&&cu(P):A&&P instanceof An}),!!A&&Vs(y)&&wl(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function da(y,h){const A=y.length-1;let P,N,q=0,Y=A,re=0;for(;q<=Y;)if(re=Math.floor((q+Y)/2),P=y[re],N=y[re+1],P<=h){if(re===A||h<N)return re;q=re+1}else{if(!(P>h))throw new wt("Input is not a number.");Y=re-1}return 0}class pa{constructor(h,A,P){this.type=h,this.input=A,this.labels=[],this.outputs=[];for(const[N,q]of P)this.labels.push(N),this.outputs.push(q)}static parse(h,A){if(h.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${h.length-1}.`);if((h.length-1)%2!=0)return A.error("Expected an even number of arguments.");const P=A.parse(h[1],1,Bi);if(!P)return null;const N=[];let q=null;A.expectedType&&A.expectedType.kind!=="value"&&(q=A.expectedType);for(let Y=1;Y<h.length;Y+=2){const re=Y===1?-1/0:h[Y],fe=h[Y+1],be=Y,Re=Y+1;if(typeof re!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(N.length&&N[N.length-1][0]>=re)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',be);const Ve=A.parse(fe,Re,q);if(!Ve)return null;q=q||Ve.type,N.push([re,Ve])}return new pa(q,P,N)}evaluate(h){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(h);const N=this.input.evaluate(h);if(N<=A[0])return P[0].evaluate(h);const q=A.length;return N>=A[q-1]?P[q-1].evaluate(h):P[da(A,N)].evaluate(h)}eachChild(h){h(this.input);for(const A of this.outputs)h(A)}outputDefined(){return this.outputs.every(h=>h.outputDefined())}}function Ao(y,h,A){return y*(1-A)+h*A}var rl=Object.freeze({__proto__:null,number:Ao,color:function(y,h,A){return new dt(Ao(y.r,h.r,A),Ao(y.g,h.g,A),Ao(y.b,h.b,A),Ao(y.a,h.a,A))},array:function(y,h,A){return y.map((P,N)=>Ao(P,h[N],A))},padding:function(y,h,A){const P=y.values,N=h.values;return new Rt([Ao(P[0],N[0],A),Ao(P[1],N[1],A),Ao(P[2],N[2],A),Ao(P[3],N[3],A)])}});const U=.95047,$=1.08883,ye=4/29,De=6/29,rt=3*De*De,Ct=Math.PI/180,Ut=180/Math.PI;function Bt(y){return y>.008856451679035631?Math.pow(y,1/3):y/rt+ye}function bi(y){return y>De?y*y*y:rt*(y-ye)}function yi(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function _i(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function ui(y){const h=_i(y.r),A=_i(y.g),P=_i(y.b),N=Bt((.4124564*h+.3575761*A+.1804375*P)/U),q=Bt((.2126729*h+.7151522*A+.072175*P)/1);return{l:116*q-16,a:500*(N-q),b:200*(q-Bt((.0193339*h+.119192*A+.9503041*P)/$)),alpha:y.a}}function ji(y){let h=(y.l+16)/116,A=isNaN(y.a)?h:h+y.a/500,P=isNaN(y.b)?h:h-y.b/200;return h=1*bi(h),A=U*bi(A),P=$*bi(P),new dt(yi(3.2404542*A-1.5371385*h-.4985314*P),yi(-.969266*A+1.8760108*h+.041556*P),yi(.0556434*A-.2040259*h+1.0572252*P),y.alpha)}function on(y,h,A){const P=h-y;return y+A*(P>180||P<-180?P-360*Math.round(P/360):P)}const Cn={forward:ui,reverse:ji,interpolate:function(y,h,A){return{l:Ao(y.l,h.l,A),a:Ao(y.a,h.a,A),b:Ao(y.b,h.b,A),alpha:Ao(y.alpha,h.alpha,A)}}},ft={forward:function(y){const{l:h,a:A,b:P}=ui(y),N=Math.atan2(P,A)*Ut;return{h:N<0?N+360:N,c:Math.sqrt(A*A+P*P),l:h,alpha:y.a}},reverse:function(y){const h=y.h*Ct,A=y.c;return ji({l:y.l,a:Math.cos(h)*A,b:Math.sin(h)*A,alpha:y.alpha})},interpolate:function(y,h,A){return{h:on(y.h,h.h,A),c:Ao(y.c,h.c,A),l:Ao(y.l,h.l,A),alpha:Ao(y.alpha,h.alpha,A)}}};var p=Object.freeze({__proto__:null,lab:Cn,hcl:ft});class Di{constructor(h,A,P,N,q){this.type=h,this.operator=A,this.interpolation=P,this.input=N,this.labels=[],this.outputs=[];for(const[Y,re]of q)this.labels.push(Y),this.outputs.push(re)}static interpolationFactor(h,A,P,N){let q=0;if(h.name==="exponential")q=c(A,h.base,P,N);else if(h.name==="linear")q=c(A,1,P,N);else if(h.name==="cubic-bezier"){const Y=h.controlPoints;q=new f(Y[0],Y[1],Y[2],Y[3]).solve(c(A,1,P,N))}return q}static parse(h,A){let[P,N,q,...Y]=h;if(!Array.isArray(N)||N.length===0)return A.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){const be=N[1];if(typeof be!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:be}}else{if(N[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(N[0])}`,1,0);{const be=N.slice(1);if(be.length!==4||be.some(Re=>typeof Re!="number"||Re<0||Re>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:be}}}if(h.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${h.length-1}.`);if((h.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(q=A.parse(q,2,Bi),!q)return null;const re=[];let fe=null;P==="interpolate-hcl"||P==="interpolate-lab"?fe=Gn:A.expectedType&&A.expectedType.kind!=="value"&&(fe=A.expectedType);for(let be=0;be<Y.length;be+=2){const Re=Y[be],Ve=Y[be+1],tt=be+3,lt=be+4;if(typeof Re!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tt);if(re.length&&re[re.length-1][0]>=Re)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',tt);const ht=A.parse(Ve,lt,fe);if(!ht)return null;fe=fe||ht.type,re.push([Re,ht])}return fe.kind==="number"||fe.kind==="color"||fe.kind==="padding"||fe.kind==="array"&&fe.itemType.kind==="number"&&typeof fe.N=="number"?new Di(fe,P,N,q,re):A.error(`Type ${lr(fe)} is not interpolatable.`)}evaluate(h){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(h);const N=this.input.evaluate(h);if(N<=A[0])return P[0].evaluate(h);const q=A.length;if(N>=A[q-1])return P[q-1].evaluate(h);const Y=da(A,N),re=Di.interpolationFactor(this.interpolation,N,A[Y],A[Y+1]),fe=P[Y].evaluate(h),be=P[Y+1].evaluate(h);return this.operator==="interpolate"?rl[this.type.kind.toLowerCase()](fe,be,re):this.operator==="interpolate-hcl"?ft.reverse(ft.interpolate(ft.forward(fe),ft.forward(be),re)):Cn.reverse(Cn.interpolate(Cn.forward(fe),Cn.forward(be),re))}eachChild(h){h(this.input);for(const A of this.outputs)h(A)}outputDefined(){return this.outputs.every(h=>h.outputDefined())}}function c(y,h,A,P){const N=P-A,q=y-A;return N===0?0:h===1?q/N:(Math.pow(h,q)-1)/(Math.pow(h,N)-1)}class F{constructor(h,A){this.type=h,this.args=A}static parse(h,A){if(h.length<2)return A.error("Expectected at least one argument.");let P=null;const N=A.expectedType;N&&N.kind!=="value"&&(P=N);const q=[];for(const re of h.slice(1)){const fe=A.parse(re,1+q.length,P,void 0,{typeAnnotation:"omit"});if(!fe)return null;P=P||fe.type,q.push(fe)}if(!P)throw new Error("No output type");const Y=N&&q.some(re=>rn(N,re.type));return new F(Y?zn:P,q)}evaluate(h){let A,P=null,N=0;for(const q of this.args)if(N++,P=q.evaluate(h),P&&P instanceof oi&&!P.available&&(A||(A=P.name),P=null,N===this.args.length&&(P=A)),P!==null)break;return P}eachChild(h){this.args.forEach(h)}outputDefined(){return this.args.every(h=>h.outputDefined())}}class mn{constructor(h,A){this.type=A.type,this.bindings=[].concat(h),this.result=A}evaluate(h){return this.result.evaluate(h)}eachChild(h){for(const A of this.bindings)h(A[1]);h(this.result)}static parse(h,A){if(h.length<4)return A.error(`Expected at least 3 arguments, but found ${h.length-1} instead.`);const P=[];for(let q=1;q<h.length-1;q+=2){const Y=h[q];if(typeof Y!="string")return A.error(`Expected string, but found ${typeof Y} instead.`,q);if(/[^a-zA-Z0-9_]/.test(Y))return A.error("Variable names must contain only alphanumeric characters or '_'.",q);const re=A.parse(h[q+1],q+1);if(!re)return null;P.push([Y,re])}const N=A.parse(h[h.length-1],h.length-1,A.expectedType,P);return N?new mn(P,N):null}outputDefined(){return this.result.outputDefined()}}class Qn{constructor(h,A,P){this.type=h,this.index=A,this.input=P}static parse(h,A){if(h.length!==3)return A.error(`Expected 2 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,Bi),N=A.parse(h[2],2,Wn(A.expectedType||zn));return P&&N?new Qn(N.type.itemType,P,N):null}evaluate(h){const A=this.index.evaluate(h),P=this.input.evaluate(h);if(A<0)throw new wt(`Array index out of bounds: ${A} < 0.`);if(A>=P.length)throw new wt(`Array index out of bounds: ${A} > ${P.length-1}.`);if(A!==Math.floor(A))throw new wt(`Array index must be an integer, but found ${A} instead.`);return P[A]}eachChild(h){h(this.index),h(this.input)}outputDefined(){return!1}}class vo{constructor(h,A){this.type=Hn,this.needle=h,this.haystack=A}static parse(h,A){if(h.length!==3)return A.error(`Expected 2 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,zn),N=A.parse(h[2],2,zn);return P&&N?He(P.type,[Hn,Xi,Bi,hn,zn])?new vo(P,N):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${lr(P.type)} instead`):null}evaluate(h){const A=this.needle.evaluate(h),P=this.haystack.evaluate(h);if(!P)return!1;if(!yo(A,["boolean","string","number","null"]))throw new wt(`Expected first argument to be of type boolean, string, number or null, but found ${lr(Ii(A))} instead.`);if(!yo(P,["string","array"]))throw new wt(`Expected second argument to be of type array or string, but found ${lr(Ii(P))} instead.`);return P.indexOf(A)>=0}eachChild(h){h(this.needle),h(this.haystack)}outputDefined(){return!0}}class ne{constructor(h,A,P){this.type=Bi,this.needle=h,this.haystack=A,this.fromIndex=P}static parse(h,A){if(h.length<=2||h.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,zn),N=A.parse(h[2],2,zn);if(!P||!N)return null;if(!He(P.type,[Hn,Xi,Bi,hn,zn]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${lr(P.type)} instead`);if(h.length===4){const q=A.parse(h[3],3,Bi);return q?new ne(P,N,q):null}return new ne(P,N)}evaluate(h){const A=this.needle.evaluate(h),P=this.haystack.evaluate(h);if(!yo(A,["boolean","string","number","null"]))throw new wt(`Expected first argument to be of type boolean, string, number or null, but found ${lr(Ii(A))} instead.`);if(!yo(P,["string","array"]))throw new wt(`Expected second argument to be of type array or string, but found ${lr(Ii(P))} instead.`);if(this.fromIndex){const N=this.fromIndex.evaluate(h);return P.indexOf(A,N)}return P.indexOf(A)}eachChild(h){h(this.needle),h(this.haystack),this.fromIndex&&h(this.fromIndex)}outputDefined(){return!1}}class Br{constructor(h,A,P,N,q,Y){this.inputType=h,this.type=A,this.input=P,this.cases=N,this.outputs=q,this.otherwise=Y}static parse(h,A){if(h.length<5)return A.error(`Expected at least 4 arguments, but found only ${h.length-1}.`);if(h.length%2!=1)return A.error("Expected an even number of arguments.");let P,N;A.expectedType&&A.expectedType.kind!=="value"&&(N=A.expectedType);const q={},Y=[];for(let be=2;be<h.length-1;be+=2){let Re=h[be];const Ve=h[be+1];Array.isArray(Re)||(Re=[Re]);const tt=A.concat(be);if(Re.length===0)return tt.error("Expected at least one branch label.");for(const ht of Re){if(typeof ht!="number"&&typeof ht!="string")return tt.error("Branch labels must be numbers or strings.");if(typeof ht=="number"&&Math.abs(ht)>Number.MAX_SAFE_INTEGER)return tt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ht=="number"&&Math.floor(ht)!==ht)return tt.error("Numeric branch labels must be integer values.");if(P){if(tt.checkSubtype(P,Ii(ht)))return null}else P=Ii(ht);if(q[String(ht)]!==void 0)return tt.error("Branch labels must be unique.");q[String(ht)]=Y.length}const lt=A.parse(Ve,be,N);if(!lt)return null;N=N||lt.type,Y.push(lt)}const re=A.parse(h[1],1,zn);if(!re)return null;const fe=A.parse(h[h.length-1],h.length-1,N);return fe?re.type.kind!=="value"&&A.concat(1).checkSubtype(P,re.type)?null:new Br(P,N,re,q,Y,fe):null}evaluate(h){const A=this.input.evaluate(h);return(Ii(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(h)}eachChild(h){h(this.input),this.outputs.forEach(h),h(this.otherwise)}outputDefined(){return this.outputs.every(h=>h.outputDefined())&&this.otherwise.outputDefined()}}class ma{constructor(h,A,P){this.type=h,this.branches=A,this.otherwise=P}static parse(h,A){if(h.length<4)return A.error(`Expected at least 3 arguments, but found only ${h.length-1}.`);if(h.length%2!=0)return A.error("Expected an odd number of arguments.");let P;A.expectedType&&A.expectedType.kind!=="value"&&(P=A.expectedType);const N=[];for(let Y=1;Y<h.length-1;Y+=2){const re=A.parse(h[Y],Y,Hn);if(!re)return null;const fe=A.parse(h[Y+1],Y+1,P);if(!fe)return null;N.push([re,fe]),P=P||fe.type}const q=A.parse(h[h.length-1],h.length-1,P);if(!q)return null;if(!P)throw new Error("Can't infer output type");return new ma(P,N,q)}evaluate(h){for(const[A,P]of this.branches)if(A.evaluate(h))return P.evaluate(h);return this.otherwise.evaluate(h)}eachChild(h){for(const[A,P]of this.branches)h(A),h(P);h(this.otherwise)}outputDefined(){return this.branches.every(([h,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class Va{constructor(h,A,P,N){this.type=h,this.input=A,this.beginIndex=P,this.endIndex=N}static parse(h,A){if(h.length<=2||h.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,zn),N=A.parse(h[2],2,Bi);if(!P||!N)return null;if(!He(P.type,[Wn(zn),Xi,zn]))return A.error(`Expected first argument to be of type array or string, but found ${lr(P.type)} instead`);if(h.length===4){const q=A.parse(h[3],3,Bi);return q?new Va(P.type,P,N,q):null}return new Va(P.type,P,N)}evaluate(h){const A=this.input.evaluate(h),P=this.beginIndex.evaluate(h);if(!yo(A,["string","array"]))throw new wt(`Expected first argument to be of type array or string, but found ${lr(Ii(A))} instead.`);if(this.endIndex){const N=this.endIndex.evaluate(h);return A.slice(P,N)}return A.slice(P)}eachChild(h){h(this.input),h(this.beginIndex),this.endIndex&&h(this.endIndex)}outputDefined(){return!1}}function Pc(y,h){return y==="=="||y==="!="?h.kind==="boolean"||h.kind==="string"||h.kind==="number"||h.kind==="null"||h.kind==="value":h.kind==="string"||h.kind==="number"||h.kind==="value"}function Al(y,h,A,P){return P.compare(h,A)===0}function qs(y,h,A){const P=y!=="=="&&y!=="!=";return class zw{constructor(q,Y,re){this.type=Hn,this.lhs=q,this.rhs=Y,this.collator=re,this.hasUntypedArgument=q.type.kind==="value"||Y.type.kind==="value"}static parse(q,Y){if(q.length!==3&&q.length!==4)return Y.error("Expected two or three arguments.");const re=q[0];let fe=Y.parse(q[1],1,zn);if(!fe)return null;if(!Pc(re,fe.type))return Y.concat(1).error(`"${re}" comparisons are not supported for type '${lr(fe.type)}'.`);let be=Y.parse(q[2],2,zn);if(!be)return null;if(!Pc(re,be.type))return Y.concat(2).error(`"${re}" comparisons are not supported for type '${lr(be.type)}'.`);if(fe.type.kind!==be.type.kind&&fe.type.kind!=="value"&&be.type.kind!=="value")return Y.error(`Cannot compare types '${lr(fe.type)}' and '${lr(be.type)}'.`);P&&(fe.type.kind==="value"&&be.type.kind!=="value"?fe=new Jn(be.type,[fe]):fe.type.kind!=="value"&&be.type.kind==="value"&&(be=new Jn(fe.type,[be])));let Re=null;if(q.length===4){if(fe.type.kind!=="string"&&be.type.kind!=="string"&&fe.type.kind!=="value"&&be.type.kind!=="value")return Y.error("Cannot use collator to compare non-string types.");if(Re=Y.parse(q[3],3,fn),!Re)return null}return new zw(fe,be,Re)}evaluate(q){const Y=this.lhs.evaluate(q),re=this.rhs.evaluate(q);if(P&&this.hasUntypedArgument){const fe=Ii(Y),be=Ii(re);if(fe.kind!==be.kind||fe.kind!=="string"&&fe.kind!=="number")throw new wt(`Expected arguments for "${y}" to be (string, string) or (number, number), but found (${fe.kind}, ${be.kind}) instead.`)}if(this.collator&&!P&&this.hasUntypedArgument){const fe=Ii(Y),be=Ii(re);if(fe.kind!=="string"||be.kind!=="string")return h(q,Y,re)}return this.collator?A(q,Y,re,this.collator.evaluate(q)):h(q,Y,re)}eachChild(q){q(this.lhs),q(this.rhs),this.collator&&q(this.collator)}outputDefined(){return!0}}}const nc=qs("==",function(y,h,A){return h===A},Al),hu=qs("!=",function(y,h,A){return h!==A},function(y,h,A,P){return!Al(0,h,A,P)}),sh=qs("<",function(y,h,A){return h<A},function(y,h,A,P){return P.compare(h,A)<0}),fu=qs(">",function(y,h,A){return h>A},function(y,h,A,P){return P.compare(h,A)>0}),ah=qs("<=",function(y,h,A){return h<=A},function(y,h,A,P){return P.compare(h,A)<=0}),Ou=qs(">=",function(y,h,A){return h>=A},function(y,h,A,P){return P.compare(h,A)>=0});class du{constructor(h,A,P,N,q){this.type=Xi,this.number=h,this.locale=A,this.currency=P,this.minFractionDigits=N,this.maxFractionDigits=q}static parse(h,A){if(h.length!==3)return A.error("Expected two arguments.");const P=A.parse(h[1],1,Bi);if(!P)return null;const N=h[2];if(typeof N!="object"||Array.isArray(N))return A.error("NumberFormat options argument must be an object.");let q=null;if(N.locale&&(q=A.parse(N.locale,1,Xi),!q))return null;let Y=null;if(N.currency&&(Y=A.parse(N.currency,1,Xi),!Y))return null;let re=null;if(N["min-fraction-digits"]&&(re=A.parse(N["min-fraction-digits"],1,Bi),!re))return null;let fe=null;return N["max-fraction-digits"]&&(fe=A.parse(N["max-fraction-digits"],1,Bi),!fe)?null:new du(P,q,Y,re,fe)}evaluate(h){return new Intl.NumberFormat(this.locale?this.locale.evaluate(h):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(h):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(h):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(h):void 0}).format(this.number.evaluate(h))}eachChild(h){h(this.number),this.locale&&h(this.locale),this.currency&&h(this.currency),this.minFractionDigits&&h(this.minFractionDigits),this.maxFractionDigits&&h(this.maxFractionDigits)}outputDefined(){return!1}}class pu{constructor(h){this.type=yn,this.sections=h}static parse(h,A){if(h.length<2)return A.error("Expected at least one argument.");const P=h[1];if(!Array.isArray(P)&&typeof P=="object")return A.error("First argument must be an image or text section.");const N=[];let q=!1;for(let Y=1;Y<=h.length-1;++Y){const re=h[Y];if(q&&typeof re=="object"&&!Array.isArray(re)){q=!1;let fe=null;if(re["font-scale"]&&(fe=A.parse(re["font-scale"],1,Bi),!fe))return null;let be=null;if(re["text-font"]&&(be=A.parse(re["text-font"],1,Wn(Xi)),!be))return null;let Re=null;if(re["text-color"]&&(Re=A.parse(re["text-color"],1,Gn),!Re))return null;const Ve=N[N.length-1];Ve.scale=fe,Ve.font=be,Ve.textColor=Re}else{const fe=A.parse(h[Y],1,zn);if(!fe)return null;const be=fe.type.kind;if(be!=="string"&&be!=="value"&&be!=="null"&&be!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");q=!0,N.push({content:fe,scale:null,font:null,textColor:null})}}return new pu(N)}evaluate(h){return new Zt(this.sections.map(A=>{const P=A.content.evaluate(h);return Ii(P)===wr?new Ge("",P,null,null,null):new Ge(Sn(P),null,A.scale?A.scale.evaluate(h):null,A.font?A.font.evaluate(h).join(","):null,A.textColor?A.textColor.evaluate(h):null)}))}eachChild(h){for(const A of this.sections)h(A.content),A.scale&&h(A.scale),A.font&&h(A.font),A.textColor&&h(A.textColor)}outputDefined(){return!1}}class Vl{constructor(h){this.type=wr,this.input=h}static parse(h,A){if(h.length!==2)return A.error("Expected two arguments.");const P=A.parse(h[1],1,Xi);return P?new Vl(P):A.error("No image name provided.")}evaluate(h){const A=this.input.evaluate(h),P=oi.fromString(A);return P&&h.availableImages&&(P.available=h.availableImages.indexOf(A)>-1),P}eachChild(h){h(this.input)}outputDefined(){return!1}}class mu{constructor(h){this.type=Bi,this.input=h}static parse(h,A){if(h.length!==2)return A.error(`Expected 1 argument, but found ${h.length-1} instead.`);const P=A.parse(h[1],1);return P?P.type.kind!=="array"&&P.type.kind!=="string"&&P.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${lr(P.type)} instead.`):new mu(P):null}evaluate(h){const A=this.input.evaluate(h);if(typeof A=="string"||Array.isArray(A))return A.length;throw new wt(`Expected value to be of type string or array, but found ${lr(Ii(A))} instead.`)}eachChild(h){h(this.input)}outputDefined(){return!1}}const Nn={"==":nc,"!=":hu,">":fu,"<":sh,">=":Ou,"<=":ah,array:Jn,at:Qn,boolean:Jn,case:ma,coalesce:F,collator:Jr,format:pu,image:Vl,in:vo,"index-of":ne,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:mu,let:mn,literal:An,match:Br,number:Jn,"number-format":du,object:Jn,slice:Va,step:pa,string:Jn,"to-boolean":sr,"to-color":sr,"to-number":sr,"to-string":sr,var:uu,within:Ks};function Fn(y,[h,A,P,N]){h=h.evaluate(y),A=A.evaluate(y),P=P.evaluate(y);const q=N?N.evaluate(y):1,Y=yt(h,A,P,q);if(Y)throw new wt(Y);return new dt(h/255*q,A/255*q,P/255*q,q)}function Fu(y,h){return y in h}function qa(y,h){const A=h[y];return A===void 0?null:A}function ga(y){return{type:y}}function ql(y){return{result:"success",value:y}}function ya(y){return{result:"error",value:y}}function bo(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function se(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function Ue(y){return!!y.expression&&y.expression.interpolated}function At(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function Qt(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function hi(y){return y}function qi(y,h){const A=h.type==="color",P=y.stops&&typeof y.stops[0][0]=="object",N=P||!(P||y.property!==void 0),q=y.type||(Ue(h)?"exponential":"interval");if(A||h.type==="padding"){const be=A?dt.parse:Rt.parse;(y=_t({},y)).stops&&(y.stops=y.stops.map(Re=>[Re[0],be(Re[1])])),y.default=be(y.default?y.default:h.default)}if(y.colorSpace&&y.colorSpace!=="rgb"&&!p[y.colorSpace])throw new Error(`Unknown color space: ${y.colorSpace}`);let Y,re,fe;if(q==="exponential")Y=Nr;else if(q==="interval")Y=gr;else if(q==="categorical"){Y=Kn,re=Object.create(null);for(const be of y.stops)re[be[0]]=be[1];fe=typeof y.stops[0][0]}else{if(q!=="identity")throw new Error(`Unknown function type "${q}"`);Y=Wr}if(P){const be={},Re=[];for(let lt=0;lt<y.stops.length;lt++){const ht=y.stops[lt],Kt=ht[0].zoom;be[Kt]===void 0&&(be[Kt]={zoom:Kt,type:y.type,property:y.property,default:y.default,stops:[]},Re.push(Kt)),be[Kt].stops.push([ht[0].value,ht[1]])}const Ve=[];for(const lt of Re)Ve.push([be[lt].zoom,qi(be[lt],h)]);const tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:Di.interpolationFactor.bind(void 0,tt),zoomStops:Ve.map(lt=>lt[0]),evaluate:({zoom:lt},ht)=>Nr({stops:Ve,base:y.base},h,lt).evaluate(lt,ht)}}if(N){const be=q==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:be,interpolationFactor:Di.interpolationFactor.bind(void 0,be),zoomStops:y.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>Y(y,h,Re,re,fe)}}return{kind:"source",evaluate(be,Re){const Ve=Re&&Re.properties?Re.properties[y.property]:void 0;return Ve===void 0?an(y.default,h.default):Y(y,h,Ve,re,fe)}}}function an(y,h,A){return y!==void 0?y:h!==void 0?h:A!==void 0?A:void 0}function Kn(y,h,A,P,N){return an(typeof A===N?P[A]:void 0,y.default,h.default)}function gr(y,h,A){if(At(A)!=="number")return an(y.default,h.default);const P=y.stops.length;if(P===1||A<=y.stops[0][0])return y.stops[0][1];if(A>=y.stops[P-1][0])return y.stops[P-1][1];const N=da(y.stops.map(q=>q[0]),A);return y.stops[N][1]}function Nr(y,h,A){const P=y.base!==void 0?y.base:1;if(At(A)!=="number")return an(y.default,h.default);const N=y.stops.length;if(N===1||A<=y.stops[0][0])return y.stops[0][1];if(A>=y.stops[N-1][0])return y.stops[N-1][1];const q=da(y.stops.map(Re=>Re[0]),A),Y=function(Re,Ve,tt,lt){const ht=lt-tt,Kt=Re-tt;return ht===0?0:Ve===1?Kt/ht:(Math.pow(Ve,Kt)-1)/(Math.pow(Ve,ht)-1)}(A,P,y.stops[q][0],y.stops[q+1][0]),re=y.stops[q][1],fe=y.stops[q+1][1];let be=rl[h.type]||hi;if(y.colorSpace&&y.colorSpace!=="rgb"){const Re=p[y.colorSpace];be=(Ve,tt)=>Re.reverse(Re.interpolate(Re.forward(Ve),Re.forward(tt),Y))}return typeof re.evaluate=="function"?{evaluate(...Re){const Ve=re.evaluate.apply(void 0,Re),tt=fe.evaluate.apply(void 0,Re);if(Ve!==void 0&&tt!==void 0)return be(Ve,tt,Y)}}:be(re,fe,Y)}function Wr(y,h,A){switch(h.type){case"color":A=dt.parse(A);break;case"formatted":A=Zt.fromString(A.toString());break;case"resolvedImage":A=oi.fromString(A.toString());break;case"padding":A=Rt.parse(A);break;default:At(A)===h.type||h.type==="enum"&&h.values[A]||(A=void 0)}return an(A,y.default,h.default)}io.register(Nn,{error:[{kind:"error"},[Xi],(y,[h])=>{throw new wt(h.evaluate(y))}],typeof:[Xi,[zn],(y,[h])=>lr(Ii(h.evaluate(y)))],"to-rgba":[Wn(Bi,4),[Gn],(y,[h])=>h.evaluate(y).toArray()],rgb:[Gn,[Bi,Bi,Bi],Fn],rgba:[Gn,[Bi,Bi,Bi,Bi],Fn],has:{type:Hn,overloads:[[[Xi],(y,[h])=>Fu(h.evaluate(y),y.properties())],[[Xi,Zr],(y,[h,A])=>Fu(h.evaluate(y),A.evaluate(y))]]},get:{type:zn,overloads:[[[Xi],(y,[h])=>qa(h.evaluate(y),y.properties())],[[Xi,Zr],(y,[h,A])=>qa(h.evaluate(y),A.evaluate(y))]]},"feature-state":[zn,[Xi],(y,[h])=>qa(h.evaluate(y),y.featureState||{})],properties:[Zr,[],y=>y.properties()],"geometry-type":[Xi,[],y=>y.geometryType()],id:[zn,[],y=>y.id()],zoom:[Bi,[],y=>y.globals.zoom],"heatmap-density":[Bi,[],y=>y.globals.heatmapDensity||0],"line-progress":[Bi,[],y=>y.globals.lineProgress||0],accumulated:[zn,[],y=>y.globals.accumulated===void 0?null:y.globals.accumulated],"+":[Bi,ga(Bi),(y,h)=>{let A=0;for(const P of h)A+=P.evaluate(y);return A}],"*":[Bi,ga(Bi),(y,h)=>{let A=1;for(const P of h)A*=P.evaluate(y);return A}],"-":{type:Bi,overloads:[[[Bi,Bi],(y,[h,A])=>h.evaluate(y)-A.evaluate(y)],[[Bi],(y,[h])=>-h.evaluate(y)]]},"/":[Bi,[Bi,Bi],(y,[h,A])=>h.evaluate(y)/A.evaluate(y)],"%":[Bi,[Bi,Bi],(y,[h,A])=>h.evaluate(y)%A.evaluate(y)],ln2:[Bi,[],()=>Math.LN2],pi:[Bi,[],()=>Math.PI],e:[Bi,[],()=>Math.E],"^":[Bi,[Bi,Bi],(y,[h,A])=>Math.pow(h.evaluate(y),A.evaluate(y))],sqrt:[Bi,[Bi],(y,[h])=>Math.sqrt(h.evaluate(y))],log10:[Bi,[Bi],(y,[h])=>Math.log(h.evaluate(y))/Math.LN10],ln:[Bi,[Bi],(y,[h])=>Math.log(h.evaluate(y))],log2:[Bi,[Bi],(y,[h])=>Math.log(h.evaluate(y))/Math.LN2],sin:[Bi,[Bi],(y,[h])=>Math.sin(h.evaluate(y))],cos:[Bi,[Bi],(y,[h])=>Math.cos(h.evaluate(y))],tan:[Bi,[Bi],(y,[h])=>Math.tan(h.evaluate(y))],asin:[Bi,[Bi],(y,[h])=>Math.asin(h.evaluate(y))],acos:[Bi,[Bi],(y,[h])=>Math.acos(h.evaluate(y))],atan:[Bi,[Bi],(y,[h])=>Math.atan(h.evaluate(y))],min:[Bi,ga(Bi),(y,h)=>Math.min(...h.map(A=>A.evaluate(y)))],max:[Bi,ga(Bi),(y,h)=>Math.max(...h.map(A=>A.evaluate(y)))],abs:[Bi,[Bi],(y,[h])=>Math.abs(h.evaluate(y))],round:[Bi,[Bi],(y,[h])=>{const A=h.evaluate(y);return A<0?-Math.round(-A):Math.round(A)}],floor:[Bi,[Bi],(y,[h])=>Math.floor(h.evaluate(y))],ceil:[Bi,[Bi],(y,[h])=>Math.ceil(h.evaluate(y))],"filter-==":[Hn,[Xi,zn],(y,[h,A])=>y.properties()[h.value]===A.value],"filter-id-==":[Hn,[zn],(y,[h])=>y.id()===h.value],"filter-type-==":[Hn,[Xi],(y,[h])=>y.geometryType()===h.value],"filter-<":[Hn,[Xi,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P<N}],"filter-id-<":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A<P}],"filter->":[Hn,[Xi,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P>N}],"filter-id->":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A>P}],"filter-<=":[Hn,[Xi,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P<=N}],"filter-id-<=":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A<=P}],"filter->=":[Hn,[Xi,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P>=N}],"filter-id->=":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A>=P}],"filter-has":[Hn,[zn],(y,[h])=>h.value in y.properties()],"filter-has-id":[Hn,[],y=>y.id()!==null&&y.id()!==void 0],"filter-type-in":[Hn,[Wn(Xi)],(y,[h])=>h.value.indexOf(y.geometryType())>=0],"filter-id-in":[Hn,[Wn(zn)],(y,[h])=>h.value.indexOf(y.id())>=0],"filter-in-small":[Hn,[Xi,Wn(zn)],(y,[h,A])=>A.value.indexOf(y.properties()[h.value])>=0],"filter-in-large":[Hn,[Xi,Wn(zn)],(y,[h,A])=>function(P,N,q,Y){for(;q<=Y;){const re=q+Y>>1;if(N[re]===P)return!0;N[re]>P?Y=re-1:q=re+1}return!1}(y.properties()[h.value],A.value,0,A.value.length-1)],all:{type:Hn,overloads:[[[Hn,Hn],(y,[h,A])=>h.evaluate(y)&&A.evaluate(y)],[ga(Hn),(y,h)=>{for(const A of h)if(!A.evaluate(y))return!1;return!0}]]},any:{type:Hn,overloads:[[[Hn,Hn],(y,[h,A])=>h.evaluate(y)||A.evaluate(y)],[ga(Hn),(y,h)=>{for(const A of h)if(A.evaluate(y))return!0;return!1}]]},"!":[Hn,[Hn],(y,[h])=>!h.evaluate(y)],"is-supported-script":[Hn,[Xi],(y,[h])=>{const A=y.globals&&y.globals.isSupportedScript;return!A||A(h.evaluate(y))}],upcase:[Xi,[Xi],(y,[h])=>h.evaluate(y).toUpperCase()],downcase:[Xi,[Xi],(y,[h])=>h.evaluate(y).toLowerCase()],concat:[Xi,ga(zn),(y,h)=>h.map(A=>Sn(A.evaluate(y))).join("")],"resolved-locale":[Xi,[fn],(y,[h])=>h.evaluate(y).resolvedLocale()]});class to{constructor(h,A){this.expression=h,this._warningHistory={},this._evaluator=new Mr,this._defaultValue=A?function(P){return P.type==="color"&&Qt(P.default)?new dt(0,0,0,0):P.type==="color"?dt.parse(P.default)||null:P.type==="padding"?Rt.parse(P.default)||null:P.default===void 0?null:P.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(h,A,P,N,q,Y){return this._evaluator.globals=h,this._evaluator.feature=A,this._evaluator.featureState=P,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y,this.expression.evaluate(this._evaluator)}evaluate(h,A,P,N,q,Y){this._evaluator.globals=h,this._evaluator.feature=A||null,this._evaluator.featureState=P||null,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y||null;try{const re=this.expression.evaluate(this._evaluator);if(re==null||typeof re=="number"&&re!=re)return this._defaultValue;if(this._enumValues&&!(re in this._enumValues))throw new wt(`Expected value to be one of ${Object.keys(this._enumValues).map(fe=>JSON.stringify(fe)).join(", ")}, but found ${JSON.stringify(re)} instead.`);return re}catch(re){return this._warningHistory[re.message]||(this._warningHistory[re.message]=!0,typeof console<"u"&&console.warn(re.message)),this._defaultValue}}}function Oo(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in Nn}function jo(y,h){const A=new xl(Nn,[],h?function(N){const q={color:Gn,string:Xi,number:Bi,enum:Xi,boolean:Hn,formatted:yn,padding:tn,resolvedImage:wr};return N.type==="array"?Wn(q[N.value]||zn,N.length):q[N.type]}(h):void 0),P=A.parse(y,void 0,void 0,void 0,h&&h.type==="string"?{typeAnnotation:"coerce"}:void 0);return P?ql(new to(P,h)):ya(A.errors)}class Ho{constructor(h,A){this.kind=h,this._styleExpression=A,this.isStateDependent=h!=="constant"&&!Ta(A.expression)}evaluateWithoutErrorHandling(h,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(h,A,P,N,q,Y)}evaluate(h,A,P,N,q,Y){return this._styleExpression.evaluate(h,A,P,N,q,Y)}}class Ss{constructor(h,A,P,N){this.kind=h,this.zoomStops=P,this._styleExpression=A,this.isStateDependent=h!=="camera"&&!Ta(A.expression),this.interpolationType=N}evaluateWithoutErrorHandling(h,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(h,A,P,N,q,Y)}evaluate(h,A,P,N,q,Y){return this._styleExpression.evaluate(h,A,P,N,q,Y)}interpolationFactor(h,A,P){return this.interpolationType?Di.interpolationFactor(this.interpolationType,h,A,P):0}}function fs(y,h){const A=jo(y,h);if(A.result==="error")return A;const P=A.value.expression,N=Vs(P);if(!N&&!bo(h))return ya([new wn("","data expressions not supported")]);const q=wl(P,["zoom"]);if(!q&&!se(h))return ya([new wn("","zoom expressions not supported")]);const Y=Cs(P);return Y||q?Y instanceof wn?ya([Y]):Y instanceof Di&&!Ue(h)?ya([new wn("",'"interpolate" expressions cannot be used with this property')]):ql(Y?new Ss(N?"camera":"composite",A.value,Y.labels,Y instanceof Di?Y.interpolation:void 0):new Ho(N?"constant":"source",A.value)):ya([new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class jr{constructor(h,A){this._parameters=h,this._specification=A,_t(this,qi(this._parameters,this._specification))}static deserialize(h){return new jr(h._parameters,h._specification)}static serialize(h){return{_parameters:h._parameters,_specification:h._specification}}}function Cs(y){let h=null;if(y instanceof mn)h=Cs(y.result);else if(y instanceof F){for(const A of y.args)if(h=Cs(A),h)break}else(y instanceof pa||y instanceof Di)&&y.input instanceof io&&y.input.name==="zoom"&&(h=y);return h instanceof wn||y.eachChild(A=>{const P=Cs(A);P instanceof wn?h=P:!h&&P?h=new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):h&&P&&h!==P&&(h=new wn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),h}function _s(y){const h=y.key,A=y.value,P=y.valueSpec||{},N=y.objectElementValidators||{},q=y.style,Y=y.styleSpec;let re=[];const fe=At(A);if(fe!=="object")return[new ae(h,A,`object expected, ${fe} found`)];for(const be in A){const Re=be.split(".")[0],Ve=P[Re]||P["*"];let tt;if(N[Re])tt=N[Re];else if(P[Re])tt=Yo;else if(N["*"])tt=N["*"];else{if(!P["*"]){re.push(new ae(h,A[be],`unknown property "${be}"`));continue}tt=Yo}re=re.concat(tt({key:(h&&`${h}.`)+be,value:A[be],valueSpec:Ve,style:q,styleSpec:Y,object:A,objectKey:be},A))}for(const be in P)N[be]||P[be].required&&P[be].default===void 0&&A[be]===void 0&&re.push(new ae(h,A,`missing required property "${be}"`));return re}function Hl(y){const h=y.value,A=y.valueSpec,P=y.style,N=y.styleSpec,q=y.key,Y=y.arrayElementValidator||Yo;if(At(h)!=="array")return[new ae(q,h,`array expected, ${At(h)} found`)];if(A.length&&h.length!==A.length)return[new ae(q,h,`array length ${A.length} expected, length ${h.length} found`)];if(A["min-length"]&&h.length<A["min-length"])return[new ae(q,h,`array length at least ${A["min-length"]} expected, length ${h.length} found`)];let re={type:A.value,values:A.values};N.$version<7&&(re.function=A.function),At(A.value)==="object"&&(re=A.value);let fe=[];for(let be=0;be<h.length;be++)fe=fe.concat(Y({array:h,arrayIndex:be,value:h[be],valueSpec:re,style:P,styleSpec:N,key:`${q}[${be}]`}));return fe}function kl(y){const h=y.key,A=y.value,P=y.valueSpec;let N=At(A);return N==="number"&&A!=A&&(N="NaN"),N!=="number"?[new ae(h,A,`number expected, ${N} found`)]:"minimum"in P&&A<P.minimum?[new ae(h,A,`${A} is less than the minimum value ${P.minimum}`)]:"maximum"in P&&A>P.maximum?[new ae(h,A,`${A} is greater than the maximum value ${P.maximum}`)]:[]}function Ru(y){const h=y.valueSpec,A=Jt(y.value.type);let P,N,q,Y={};const re=A!=="categorical"&&y.value.property===void 0,fe=!re,be=At(y.value.stops)==="array"&&At(y.value.stops[0])==="array"&&At(y.value.stops[0][0])==="object",Re=_s({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(lt){if(A==="identity")return[new ae(lt.key,lt.value,'identity function may not have a "stops" property')];let ht=[];const Kt=lt.value;return ht=ht.concat(Hl({key:lt.key,value:Kt,valueSpec:lt.valueSpec,style:lt.style,styleSpec:lt.styleSpec,arrayElementValidator:Ve})),At(Kt)==="array"&&Kt.length===0&&ht.push(new ae(lt.key,Kt,"array must have at least one stop")),ht},default:function(lt){return Yo({key:lt.key,value:lt.value,valueSpec:h,style:lt.style,styleSpec:lt.styleSpec})}}});return A==="identity"&&re&&Re.push(new ae(y.key,y.value,'missing required property "property"')),A==="identity"||y.value.stops||Re.push(new ae(y.key,y.value,'missing required property "stops"')),A==="exponential"&&y.valueSpec.expression&&!Ue(y.valueSpec)&&Re.push(new ae(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(fe&&!bo(y.valueSpec)?Re.push(new ae(y.key,y.value,"property functions not supported")):re&&!se(y.valueSpec)&&Re.push(new ae(y.key,y.value,"zoom functions not supported"))),A!=="categorical"&&!be||y.value.property!==void 0||Re.push(new ae(y.key,y.value,'"property" property is required')),Re;function Ve(lt){let ht=[];const Kt=lt.value,Wt=lt.key;if(At(Kt)!=="array")return[new ae(Wt,Kt,`array expected, ${At(Kt)} found`)];if(Kt.length!==2)return[new ae(Wt,Kt,`array length 2 expected, length ${Kt.length} found`)];if(be){if(At(Kt[0])!=="object")return[new ae(Wt,Kt,`object expected, ${At(Kt[0])} found`)];if(Kt[0].zoom===void 0)return[new ae(Wt,Kt,"object stop key must have zoom")];if(Kt[0].value===void 0)return[new ae(Wt,Kt,"object stop key must have value")];if(q&&q>Jt(Kt[0].zoom))return[new ae(Wt,Kt[0].zoom,"stop zoom values must appear in ascending order")];Jt(Kt[0].zoom)!==q&&(q=Jt(Kt[0].zoom),N=void 0,Y={}),ht=ht.concat(_s({key:`${Wt}[0]`,value:Kt[0],valueSpec:{zoom:{}},style:lt.style,styleSpec:lt.styleSpec,objectElementValidators:{zoom:kl,value:tt}}))}else ht=ht.concat(tt({key:`${Wt}[0]`,value:Kt[0],valueSpec:{},style:lt.style,styleSpec:lt.styleSpec},Kt));return Oo(di(Kt[1]))?ht.concat([new ae(`${Wt}[1]`,Kt[1],"expressions are not allowed in function stops.")]):ht.concat(Yo({key:`${Wt}[1]`,value:Kt[1],valueSpec:h,style:lt.style,styleSpec:lt.styleSpec}))}function tt(lt,ht){const Kt=At(lt.value),Wt=Jt(lt.value),vi=lt.value!==null?lt.value:ht;if(P){if(Kt!==P)return[new ae(lt.key,vi,`${Kt} stop domain type must match previous stop domain type ${P}`)]}else P=Kt;if(Kt!=="number"&&Kt!=="string"&&Kt!=="boolean")return[new ae(lt.key,vi,"stop domain value must be a number, string, or boolean")];if(Kt!=="number"&&A!=="categorical"){let Fi=`number expected, ${Kt} found`;return bo(h)&&A===void 0&&(Fi+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ae(lt.key,vi,Fi)]}return A!=="categorical"||Kt!=="number"||isFinite(Wt)&&Math.floor(Wt)===Wt?A!=="categorical"&&Kt==="number"&&N!==void 0&&Wt<N?[new ae(lt.key,vi,"stop domain values must appear in ascending order")]:(N=Wt,A==="categorical"&&Wt in Y?[new ae(lt.key,vi,"stop domain values must be unique")]:(Y[Wt]=!0,[])):[new ae(lt.key,vi,`integer expected, found ${Wt}`)]}}function La(y){const h=(y.expressionContext==="property"?fs:jo)(di(y.value),y.valueSpec);if(h.result==="error")return h.value.map(P=>new ae(`${y.key}${P.key}`,y.value,P.message));const A=h.value.expression||h.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!A.outputDefined())return[new ae(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!Ta(A))return[new ae(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!Ta(A))return[new ae(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!wl(A,["zoom","feature-state"]))return[new ae(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!Vs(A))return[new ae(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Sl(y){const h=y.key,A=y.value,P=y.valueSpec,N=[];return Array.isArray(P.values)?P.values.indexOf(Jt(A))===-1&&N.push(new ae(h,A,`expected one of [${P.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(P.values).indexOf(Jt(A))===-1&&N.push(new ae(h,A,`expected one of [${Object.keys(P.values).join(", ")}], ${JSON.stringify(A)} found`)),N}function ol(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(const h of y.slice(1))if(!ol(h)&&typeof h!="boolean")return!1;return!0;default:return!0}}const Bu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Os(y){if(y==null)return{filter:()=>!0,needGeometry:!1};ol(y)||(y=Ha(y));const h=jo(y,Bu);if(h.result==="error")throw new Error(h.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,P,N)=>h.value.evaluate(A,P,{},N),needGeometry:Gl(y)}}function gu(y,h){return y<h?-1:y>h?1:0}function Gl(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(let h=1;h<y.length;h++)if(Gl(y[h]))return!0;return!1}function Ha(y){if(!y)return!0;const h=y[0];return y.length<=1?h!=="any":h==="=="?yu(y[1],y[2],"=="):h==="!="?sl(yu(y[1],y[2],"==")):h==="<"||h===">"||h==="<="||h===">="?yu(y[1],y[2],h):h==="any"?(A=y.slice(1),["any"].concat(A.map(Ha))):h==="all"?["all"].concat(y.slice(1).map(Ha)):h==="none"?["all"].concat(y.slice(1).map(Ha).map(sl)):h==="in"?Fs(y[1],y.slice(2)):h==="!in"?sl(Fs(y[1],y.slice(2))):h==="has"?_u(y[1]):h==="!has"?sl(_u(y[1])):h!=="within"||y;var A}function yu(y,h,A){switch(y){case"$type":return[`filter-type-${A}`,h];case"$id":return[`filter-id-${A}`,h];default:return[`filter-${A}`,y,h]}}function Fs(y,h){if(h.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",h]];case"$id":return["filter-id-in",["literal",h]];default:return h.length>200&&!h.some(A=>typeof A!=typeof h[0])?["filter-in-large",y,["literal",h.sort(gu)]]:["filter-in-small",y,["literal",h]]}}function _u(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function sl(y){return["!",y]}function Wl(y){return ol(di(y.value))?La(_t({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pa(y)}function Pa(y){const h=y.value,A=y.key;if(At(h)!=="array")return[new ae(A,h,`array expected, ${At(h)} found`)];const P=y.styleSpec;let N,q=[];if(h.length<1)return[new ae(A,h,"filter array must have at least 1 element")];switch(q=q.concat(Sl({key:`${A}[0]`,value:h[0],valueSpec:P.filter_operator,style:y.style,styleSpec:y.styleSpec})),Jt(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&Jt(h[1])==="$type"&&q.push(new ae(A,h,`"$type" cannot be use with operator "${h[0]}"`));case"==":case"!=":h.length!==3&&q.push(new ae(A,h,`filter array for operator "${h[0]}" must have 3 elements`));case"in":case"!in":h.length>=2&&(N=At(h[1]),N!=="string"&&q.push(new ae(`${A}[1]`,h[1],`string expected, ${N} found`)));for(let Y=2;Y<h.length;Y++)N=At(h[Y]),Jt(h[1])==="$type"?q=q.concat(Sl({key:`${A}[${Y}]`,value:h[Y],valueSpec:P.geometry_type,style:y.style,styleSpec:y.styleSpec})):N!=="string"&&N!=="number"&&N!=="boolean"&&q.push(new ae(`${A}[${Y}]`,h[Y],`string, number, or boolean expected, ${N} found`));break;case"any":case"all":case"none":for(let Y=1;Y<h.length;Y++)q=q.concat(Pa({key:`${A}[${Y}]`,value:h[Y],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":N=At(h[1]),h.length!==2?q.push(new ae(A,h,`filter array for "${h[0]}" operator must have 2 elements`)):N!=="string"&&q.push(new ae(`${A}[1]`,h[1],`string expected, ${N} found`));break;case"within":N=At(h[1]),h.length!==2?q.push(new ae(A,h,`filter array for "${h[0]}" operator must have 2 elements`)):N!=="object"&&q.push(new ae(`${A}[1]`,h[1],`object expected, ${N} found`))}return q}function Cl(y,h){const A=y.key,P=y.style,N=y.styleSpec,q=y.value,Y=y.objectKey,re=N[`${h}_${y.layerType}`];if(!re)return[];const fe=Y.match(/^(.*)-transition$/);if(h==="paint"&&fe&&re[fe[1]]&&re[fe[1]].transition)return Yo({key:A,value:q,valueSpec:N.transition,style:P,styleSpec:N});const be=y.valueSpec||re[Y];if(!be)return[new ae(A,q,`unknown property "${Y}"`)];let Re;if(At(q)==="string"&&bo(be)&&!be.tokens&&(Re=/^{([^}]+)}$/.exec(q)))return[new ae(A,q,`"${Y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const Ve=[];return y.layerType==="symbol"&&(Y==="text-field"&&P&&!P.glyphs&&Ve.push(new ae(A,q,'use of "text-field" requires a style "glyphs" property')),Y==="text-font"&&Qt(di(q))&&Jt(q.type)==="identity"&&Ve.push(new ae(A,q,'"text-font" does not support identity functions'))),Ve.concat(Yo({key:y.key,value:q,valueSpec:be,style:P,styleSpec:N,expressionContext:"property",propertyType:h,propertyKey:Y}))}function Mc(y){return Cl(y,"paint")}function Dc(y){return Cl(y,"layout")}function El(y){let h=[];const A=y.value,P=y.key,N=y.style,q=y.styleSpec;A.type||A.ref||h.push(new ae(P,A,'either "type" or "ref" is required'));let Y=Jt(A.type);const re=Jt(A.ref);if(A.id){const fe=Jt(A.id);for(let be=0;be<y.arrayIndex;be++){const Re=N.layers[be];Jt(Re.id)===fe&&h.push(new ae(P,A.id,`duplicate layer id "${A.id}", previously used at line ${Re.id.__line__}`))}}if("ref"in A){let fe;["type","source","source-layer","filter","layout"].forEach(be=>{be in A&&h.push(new ae(P,A[be],`"${be}" is prohibited for ref layers`))}),N.layers.forEach(be=>{Jt(be.id)===re&&(fe=be)}),fe?fe.ref?h.push(new ae(P,A.ref,"ref cannot reference another ref layer")):Y=Jt(fe.type):h.push(new ae(P,A.ref,`ref layer "${re}" not found`))}else if(Y!=="background")if(A.source){const fe=N.sources&&N.sources[A.source],be=fe&&Jt(fe.type);fe?be==="vector"&&Y==="raster"?h.push(new ae(P,A.source,`layer "${A.id}" requires a raster source`)):be==="raster"&&Y!=="raster"?h.push(new ae(P,A.source,`layer "${A.id}" requires a vector source`)):be!=="vector"||A["source-layer"]?be==="raster-dem"&&Y!=="hillshade"?h.push(new ae(P,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):Y!=="line"||!A.paint||!A.paint["line-gradient"]||be==="geojson"&&fe.lineMetrics||h.push(new ae(P,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):h.push(new ae(P,A,`layer "${A.id}" must specify a "source-layer"`)):h.push(new ae(P,A.source,`source "${A.source}" not found`))}else h.push(new ae(P,A,'missing required property "source"'));return h=h.concat(_s({key:P,value:A,valueSpec:q.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Yo({key:`${P}.type`,value:A.type,valueSpec:q.layer.type,style:y.style,styleSpec:y.styleSpec,object:A,objectKey:"type"}),filter:Wl,layout:fe=>_s({layer:A,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":be=>Dc(_t({layerType:Y},be))}}),paint:fe=>_s({layer:A,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":be=>Mc(_t({layerType:Y},be))}})}})),h}function Rs(y){const h=y.value,A=y.key,P=At(h);return P!=="string"?[new ae(A,h,`string expected, ${P} found`)]:[]}const Ma={promoteId:function({key:y,value:h}){if(At(h)==="string")return Rs({key:y,value:h});{const A=[];for(const P in h)A.push(...Rs({key:`${y}.${P}`,value:h[P]}));return A}}};function Da(y){const h=y.value,A=y.key,P=y.styleSpec,N=y.style;if(!h.type)return[new ae(A,h,'"type" is required')];const q=Jt(h.type);let Y;switch(q){case"vector":case"raster":case"raster-dem":return Y=_s({key:A,value:h,valueSpec:P[`source_${q.replace("-","_")}`],style:y.style,styleSpec:P,objectElementValidators:Ma}),Y;case"geojson":if(Y=_s({key:A,value:h,valueSpec:P.source_geojson,style:N,styleSpec:P,objectElementValidators:Ma}),h.cluster)for(const re in h.clusterProperties){const[fe,be]=h.clusterProperties[re],Re=typeof fe=="string"?[fe,["accumulated"],["get",re]]:fe;Y.push(...La({key:`${A}.${re}.map`,value:be,expressionContext:"cluster-map"})),Y.push(...La({key:`${A}.${re}.reduce`,value:Re,expressionContext:"cluster-reduce"}))}return Y;case"video":return _s({key:A,value:h,valueSpec:P.source_video,style:N,styleSpec:P});case"image":return _s({key:A,value:h,valueSpec:P.source_image,style:N,styleSpec:P});case"canvas":return[new ae(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Sl({key:`${A}.type`,value:h.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:N,styleSpec:P})}}function sa(y){const h=y.value,A=y.styleSpec,P=A.light,N=y.style;let q=[];const Y=At(h);if(h===void 0)return q;if(Y!=="object")return q=q.concat([new ae("light",h,`object expected, ${Y} found`)]),q;for(const re in h){const fe=re.match(/^(.*)-transition$/);q=q.concat(fe&&P[fe[1]]&&P[fe[1]].transition?Yo({key:re,value:h[re],valueSpec:A.transition,style:N,styleSpec:A}):P[re]?Yo({key:re,value:h[re],valueSpec:P[re],style:N,styleSpec:A}):[new ae(re,h[re],`unknown property "${re}"`)])}return q}function ss(y){const h=y.value,A=y.styleSpec,P=A.terrain,N=y.style;let q=[];const Y=At(h);if(h===void 0)return q;if(Y!=="object")return q=q.concat([new ae("terrain",h,`object expected, ${Y} found`)]),q;for(const re in h)q=q.concat(P[re]?Yo({key:re,value:h[re],valueSpec:P[re],style:N,styleSpec:A}):[new ae(re,h[re],`unknown property "${re}"`)]);return q}const al={"*":()=>[],array:Hl,boolean:function(y){const h=y.value,A=y.key,P=At(h);return P!=="boolean"?[new ae(A,h,`boolean expected, ${P} found`)]:[]},number:kl,color:function(y){const h=y.key,A=y.value,P=At(A);return P!=="string"?[new ae(h,A,`color expected, ${P} found`)]:_o(A)===null?[new ae(h,A,`color expected, "${A}" found`)]:[]},constants:Qe,enum:Sl,filter:Wl,function:Ru,layer:El,object:_s,source:Da,light:sa,terrain:ss,string:Rs,formatted:function(y){return Rs(y).length===0?[]:La(y)},resolvedImage:function(y){return Rs(y).length===0?[]:La(y)},padding:function(y){const h=y.key,A=y.value;if(At(A)==="array"){if(A.length<1||A.length>4)return[new ae(h,A,`padding requires 1 to 4 values; ${A.length} values found`)];const P={type:"number"};let N=[];for(let q=0;q<A.length;q++)N=N.concat(Yo({key:`${h}[${q}]`,value:A[q],valueSpec:P}));return N}return kl({key:h,value:A,valueSpec:{}})}};function Yo(y){const h=y.value,A=y.valueSpec,P=y.styleSpec;return A.expression&&Qt(Jt(h))?Ru(y):A.expression&&Oo(di(h))?La(y):A.type&&al[A.type]?al[A.type](y):_s(_t({},y,{valueSpec:A.type?P[A.type]:A}))}function zu(y){const h=y.value,A=y.key,P=Rs(y);return P.length||(h.indexOf("{fontstack}")===-1&&P.push(new ae(A,h,'"glyphs" url must include a "{fontstack}" token')),h.indexOf("{range}")===-1&&P.push(new ae(A,h,'"glyphs" url must include a "{range}" token'))),P}function Oa(y,h=Q){let A=[];return A=A.concat(Yo({key:"",value:y,valueSpec:h.$root,styleSpec:h,style:y,objectElementValidators:{glyphs:zu,"*":()=>[]}})),y.constants&&(A=A.concat(Qe({key:"constants",value:y.constants,style:y,styleSpec:h}))),aa(A)}function aa(y){return[].concat(y).sort((h,A)=>h.line-A.line)}function Xr(y){return function(...h){return aa(y.apply(this,h))}}Oa.source=Xr(Da),Oa.light=Xr(sa),Oa.terrain=Xr(ss),Oa.layer=Xr(El),Oa.filter=Xr(Wl),Oa.paintProperty=Xr(Mc),Oa.layoutProperty=Xr(Dc);const _a=Oa,Il=_a.light,Nu=_a.paintProperty,vu=_a.layoutProperty;function Hs(y,h){let A=!1;if(h&&h.length)for(const P of h)y.fire(new ti(new Error(P.message))),A=!0;return A}class Tl{constructor(h,A,P){const N=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;const Y=new Int32Array(this.arrayBuffer);h=Y[0],this.d=(A=Y[1])+2*(P=Y[2]);for(let fe=0;fe<this.d*this.d;fe++){const be=Y[3+fe],Re=Y[3+fe+1];N.push(be===Re?null:Y.subarray(be,Re))}const re=Y[3+N.length+1];this.keys=Y.subarray(Y[3+N.length],re),this.bboxes=Y.subarray(re),this.insert=this._insertReadonly}else{this.d=A+2*P;for(let Y=0;Y<this.d*this.d;Y++)N.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=h,this.padding=P,this.scale=A/h,this.uid=0;const q=P/A*h;this.min=-q,this.max=h+q}insert(h,A,P,N,q){this._forEachCell(A,P,N,q,this._insertCell,this.uid++,void 0,void 0),this.keys.push(h),this.bboxes.push(A),this.bboxes.push(P),this.bboxes.push(N),this.bboxes.push(q)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(h,A,P,N,q,Y){this.cells[q].push(Y)}query(h,A,P,N,q){const Y=this.min,re=this.max;if(h<=Y&&A<=Y&&re<=P&&re<=N&&!q)return Array.prototype.slice.call(this.keys);{const fe=[];return this._forEachCell(h,A,P,N,this._queryCell,fe,{},q),fe}}_queryCell(h,A,P,N,q,Y,re,fe){const be=this.cells[q];if(be!==null){const Re=this.keys,Ve=this.bboxes;for(let tt=0;tt<be.length;tt++){const lt=be[tt];if(re[lt]===void 0){const ht=4*lt;(fe?fe(Ve[ht+0],Ve[ht+1],Ve[ht+2],Ve[ht+3]):h<=Ve[ht+2]&&A<=Ve[ht+3]&&P>=Ve[ht+0]&&N>=Ve[ht+1])?(re[lt]=!0,Y.push(Re[lt])):re[lt]=!1}}}}_forEachCell(h,A,P,N,q,Y,re,fe){const be=this._convertToCellCoord(h),Re=this._convertToCellCoord(A),Ve=this._convertToCellCoord(P),tt=this._convertToCellCoord(N);for(let lt=be;lt<=Ve;lt++)for(let ht=Re;ht<=tt;ht++){const Kt=this.d*ht+lt;if((!fe||fe(this._convertFromCellCoord(lt),this._convertFromCellCoord(ht),this._convertFromCellCoord(lt+1),this._convertFromCellCoord(ht+1)))&&q.call(this,h,A,P,N,Kt,Y,re,fe))return}}_convertFromCellCoord(h){return(h-this.padding)/this.scale}_convertToCellCoord(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const h=this.cells,A=3+this.cells.length+1+1;let P=0;for(let Y=0;Y<this.cells.length;Y++)P+=this.cells[Y].length;const N=new Int32Array(A+P+this.keys.length+this.bboxes.length);N[0]=this.extent,N[1]=this.n,N[2]=this.padding;let q=A;for(let Y=0;Y<h.length;Y++){const re=h[Y];N[3+Y]=q,N.set(re,q),q+=re.length}return N[3+h.length]=q,N.set(this.keys,q),q+=this.keys.length,N[3+h.length+1]=q,N.set(this.bboxes,q),q+=this.bboxes.length,N.buffer}static serialize(h,A){const P=h.toArrayBuffer();return A&&A.push(P),{buffer:P}}static deserialize(h){return new Tl(h.buffer)}}const ds={};function Pn(y,h,A={}){if(ds[y])throw new Error(`${y} is already registered.`);Object.defineProperty(h,"_classRegistryKey",{value:y,writeable:!1}),ds[y]={klass:h,omit:A.omit||[],shallow:A.shallow||[]}}Pn("Object",Object),Pn("TransferableGridIndex",Tl),Pn("Color",dt),Pn("Error",Error),Pn("AJAXError",ut),Pn("ResolvedImage",oi),Pn("StylePropertyFunction",jr),Pn("StyleExpression",to,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",Ss),Pn("ZoomConstantExpression",Ho),Pn("CompoundExpression",io,{omit:["_evaluate"]});for(const y in Nn)Nn[y]._classRegistryKey||Pn(`Expression_${y}`,Nn[y]);function Fo(y){return y&&typeof ArrayBuffer<"u"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function Hr(y,h){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob)return y;if(Fo(y)||me(y))return h&&h.push(y),y;if(ArrayBuffer.isView(y)){const A=y;return h&&h.push(A.buffer),A}if(y instanceof ImageData)return h&&h.push(y.data.buffer),y;if(Array.isArray(y)){const A=[];for(const P of y)A.push(Hr(P,h));return A}if(typeof y=="object"){const A=y.constructor,P=A._classRegistryKey;if(!P)throw new Error("can't serialize object of unregistered class");if(!ds[P])throw new Error(`${P} is not registered.`);const N=A.serialize?A.serialize(y,h):{};if(A.serialize){if(h&&N===h[h.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const q in y){if(!y.hasOwnProperty(q)||ds[P].omit.indexOf(q)>=0)continue;const Y=y[q];N[q]=ds[P].shallow.indexOf(q)>=0?Y:Hr(Y,h)}y instanceof Error&&(N.message=y.message)}if(N.$name)throw new Error("$name property is reserved for worker serialization logic.");return P!=="Object"&&(N.$name=P),N}throw new Error("can't serialize object of type "+typeof y)}function Co(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob||Fo(y)||me(y)||ArrayBuffer.isView(y)||y instanceof ImageData)return y;if(Array.isArray(y))return y.map(Co);if(typeof y=="object"){const h=y.$name||"Object";if(!ds[h])throw new Error(`can't deserialize unregistered class ${h}`);const{klass:A}=ds[h];if(!A)throw new Error(`can't deserialize unregistered class ${h}`);if(A.deserialize)return A.deserialize(y);const P=Object.create(A.prototype);for(const N of Object.keys(y)){if(N==="$name")continue;const q=y[N];P[N]=ds[h].shallow.indexOf(N)>=0?q:Co(q)}return P}throw new Error("can't deserialize object of type "+typeof y)}class ts{constructor(){this.first=!0}update(h,A){const P=Math.floor(h);return this.first?(this.first=!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=h,this.lastFloorZoom=P,!0):(this.lastFloorZoom>P?(this.lastIntegerZoom=P+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=A),h!==this.lastZoom&&(this.lastZoom=h,this.lastFloorZoom=P,!0))}}const _n={"Latin-1 Supplement":y=>y>=128&&y<=255,Arabic:y=>y>=1536&&y<=1791,"Arabic Supplement":y=>y>=1872&&y<=1919,"Arabic Extended-A":y=>y>=2208&&y<=2303,"Hangul Jamo":y=>y>=4352&&y<=4607,"Unified Canadian Aboriginal Syllabics":y=>y>=5120&&y<=5759,Khmer:y=>y>=6016&&y<=6143,"Unified Canadian Aboriginal Syllabics Extended":y=>y>=6320&&y<=6399,"General Punctuation":y=>y>=8192&&y<=8303,"Letterlike Symbols":y=>y>=8448&&y<=8527,"Number Forms":y=>y>=8528&&y<=8591,"Miscellaneous Technical":y=>y>=8960&&y<=9215,"Control Pictures":y=>y>=9216&&y<=9279,"Optical Character Recognition":y=>y>=9280&&y<=9311,"Enclosed Alphanumerics":y=>y>=9312&&y<=9471,"Geometric Shapes":y=>y>=9632&&y<=9727,"Miscellaneous Symbols":y=>y>=9728&&y<=9983,"Miscellaneous Symbols and Arrows":y=>y>=11008&&y<=11263,"CJK Radicals Supplement":y=>y>=11904&&y<=12031,"Kangxi Radicals":y=>y>=12032&&y<=12255,"Ideographic Description Characters":y=>y>=12272&&y<=12287,"CJK Symbols and Punctuation":y=>y>=12288&&y<=12351,Hiragana:y=>y>=12352&&y<=12447,Katakana:y=>y>=12448&&y<=12543,Bopomofo:y=>y>=12544&&y<=12591,"Hangul Compatibility Jamo":y=>y>=12592&&y<=12687,Kanbun:y=>y>=12688&&y<=12703,"Bopomofo Extended":y=>y>=12704&&y<=12735,"CJK Strokes":y=>y>=12736&&y<=12783,"Katakana Phonetic Extensions":y=>y>=12784&&y<=12799,"Enclosed CJK Letters and Months":y=>y>=12800&&y<=13055,"CJK Compatibility":y=>y>=13056&&y<=13311,"CJK Unified Ideographs Extension A":y=>y>=13312&&y<=19903,"Yijing Hexagram Symbols":y=>y>=19904&&y<=19967,"CJK Unified Ideographs":y=>y>=19968&&y<=40959,"Yi Syllables":y=>y>=40960&&y<=42127,"Yi Radicals":y=>y>=42128&&y<=42191,"Hangul Jamo Extended-A":y=>y>=43360&&y<=43391,"Hangul Syllables":y=>y>=44032&&y<=55215,"Hangul Jamo Extended-B":y=>y>=55216&&y<=55295,"Private Use Area":y=>y>=57344&&y<=63743,"CJK Compatibility Ideographs":y=>y>=63744&&y<=64255,"Arabic Presentation Forms-A":y=>y>=64336&&y<=65023,"Vertical Forms":y=>y>=65040&&y<=65055,"CJK Compatibility Forms":y=>y>=65072&&y<=65103,"Small Form Variants":y=>y>=65104&&y<=65135,"Arabic Presentation Forms-B":y=>y>=65136&&y<=65279,"Halfwidth and Fullwidth Forms":y=>y>=65280&&y<=65519};function Fa(y){for(const h of y)if(Oc(h.charCodeAt(0)))return!0;return!1}function ju(y){for(const h of y)if(!Uu(h.charCodeAt(0)))return!1;return!0}function Uu(y){return!(_n.Arabic(y)||_n["Arabic Supplement"](y)||_n["Arabic Extended-A"](y)||_n["Arabic Presentation Forms-A"](y)||_n["Arabic Presentation Forms-B"](y))}function Oc(y){return!(y!==746&&y!==747&&(y<4352||!(_n["Bopomofo Extended"](y)||_n.Bopomofo(y)||_n["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||_n["CJK Compatibility Ideographs"](y)||_n["CJK Compatibility"](y)||_n["CJK Radicals Supplement"](y)||_n["CJK Strokes"](y)||!(!_n["CJK Symbols and Punctuation"](y)||y>=12296&&y<=12305||y>=12308&&y<=12319||y===12336)||_n["CJK Unified Ideographs Extension A"](y)||_n["CJK Unified Ideographs"](y)||_n["Enclosed CJK Letters and Months"](y)||_n["Hangul Compatibility Jamo"](y)||_n["Hangul Jamo Extended-A"](y)||_n["Hangul Jamo Extended-B"](y)||_n["Hangul Jamo"](y)||_n["Hangul Syllables"](y)||_n.Hiragana(y)||_n["Ideographic Description Characters"](y)||_n.Kanbun(y)||_n["Kangxi Radicals"](y)||_n["Katakana Phonetic Extensions"](y)||_n.Katakana(y)&&y!==12540||!(!_n["Halfwidth and Fullwidth Forms"](y)||y===65288||y===65289||y===65293||y>=65306&&y<=65310||y===65339||y===65341||y===65343||y>=65371&&y<=65503||y===65507||y>=65512&&y<=65519)||!(!_n["Small Form Variants"](y)||y>=65112&&y<=65118||y>=65123&&y<=65126)||_n["Unified Canadian Aboriginal Syllabics"](y)||_n["Unified Canadian Aboriginal Syllabics Extended"](y)||_n["Vertical Forms"](y)||_n["Yijing Hexagram Symbols"](y)||_n["Yi Syllables"](y)||_n["Yi Radicals"](y))))}function lh(y){return!(Oc(y)||function(h){return!!(_n["Latin-1 Supplement"](h)&&(h===167||h===169||h===174||h===177||h===188||h===189||h===190||h===215||h===247)||_n["General Punctuation"](h)&&(h===8214||h===8224||h===8225||h===8240||h===8241||h===8251||h===8252||h===8258||h===8263||h===8264||h===8265||h===8273)||_n["Letterlike Symbols"](h)||_n["Number Forms"](h)||_n["Miscellaneous Technical"](h)&&(h>=8960&&h<=8967||h>=8972&&h<=8991||h>=8996&&h<=9e3||h===9003||h>=9085&&h<=9114||h>=9150&&h<=9165||h===9167||h>=9169&&h<=9179||h>=9186&&h<=9215)||_n["Control Pictures"](h)&&h!==9251||_n["Optical Character Recognition"](h)||_n["Enclosed Alphanumerics"](h)||_n["Geometric Shapes"](h)||_n["Miscellaneous Symbols"](h)&&!(h>=9754&&h<=9759)||_n["Miscellaneous Symbols and Arrows"](h)&&(h>=11026&&h<=11055||h>=11088&&h<=11097||h>=11192&&h<=11243)||_n["CJK Symbols and Punctuation"](h)||_n.Katakana(h)||_n["Private Use Area"](h)||_n["CJK Compatibility Forms"](h)||_n["Small Form Variants"](h)||_n["Halfwidth and Fullwidth Forms"](h)||h===8734||h===8756||h===8757||h>=9984&&h<=10087||h>=10102&&h<=10131||h===65532||h===65533)}(y))}function uh(y){return y>=1424&&y<=2303||_n["Arabic Presentation Forms-A"](y)||_n["Arabic Presentation Forms-B"](y)}function Dh(y,h){return!(!h&&uh(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||_n.Khmer(y))}function Lr(y){for(const h of y)if(uh(h.charCodeAt(0)))return!0;return!1}const Fc="deferred",rc="loading",Zo="loaded";let Js=null,Go="unavailable",Ga=null;const oc=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(Go="error"),Js&&Js(y)};function bu(){wu.fire(new Ci("pluginStateChange",{pluginStatus:Go,pluginURL:Ga}))}const wu=new Pe,Xl=function(){return Go},no=function(){if(Go!==Fc||!Ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Go=rc,bu(),Ga&&ei({url:Ga},y=>{y?oc(y):(Go=Zo,bu())})},va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Go===Zo||va.applyArabicShaping!=null,isLoading:()=>Go===rc,setState(y){if(!oe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Go=y.pluginStatus,Ga=y.pluginURL},isParsed(){if(!oe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return va.applyArabicShaping!=null&&va.processBidirectionalText!=null&&va.processStyledBidirectionalText!=null},getPluginURL(){if(!oe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ga}};class Ro{constructor(h,A){this.zoom=h,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ts,this.transition={})}isSupportedScript(h){return function(A,P){for(const N of A)if(!Dh(N.charCodeAt(0),P))return!1;return!0}(h,va.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const h=this.zoom,A=h-Math.floor(h),P=this.crossFadingFactor();return h>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*A}}}class xu{constructor(h,A){this.property=h,this.value=A,this.expression=function(P,N){if(Qt(P))return new jr(P,N);if(Oo(P)){const q=fs(P,N);if(q.result==="error")throw new Error(q.value.map(Y=>`${Y.key}: ${Y.message}`).join(", "));return q.value}{let q=P;return N.type==="color"&&typeof P=="string"?q=dt.parse(P):N.type!=="padding"||typeof P!="number"&&!Array.isArray(P)||(q=Rt.parse(P)),{kind:"constant",evaluate:()=>q}}}(A===void 0?h.specification.default:A,h.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(h,A,P){return this.property.possiblyEvaluate(this,h,A,P)}}class Au{constructor(h){this.property=h,this.value=new xu(h,void 0)}transitioned(h,A){return new Oh(this.property,this.value,A,C({},h.transition,this.transition),h.now)}untransitioned(){return new Oh(this.property,this.value,null,{},0)}}class Rc{constructor(h){this._properties=h,this._values=Object.create(h.defaultTransitionablePropertyValues)}getValue(h){return V(this._values[h].value.value)}setValue(h,A){Object.prototype.hasOwnProperty.call(this._values,h)||(this._values[h]=new Au(this._values[h].property)),this._values[h].value=new xu(this._values[h].property,A===null?void 0:V(A))}getTransition(h){return V(this._values[h].transition)}setTransition(h,A){Object.prototype.hasOwnProperty.call(this._values,h)||(this._values[h]=new Au(this._values[h].property)),this._values[h].transition=V(A)||void 0}serialize(){const h={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(h[A]=P);const N=this.getTransition(A);N!==void 0&&(h[`${A}-transition`]=N)}return h}transitioned(h,A){const P=new ll(this._properties);for(const N of Object.keys(this._values))P._values[N]=this._values[N].transitioned(h,A._values[N]);return P}untransitioned(){const h=new ll(this._properties);for(const A of Object.keys(this._values))h._values[A]=this._values[A].untransitioned();return h}}class Oh{constructor(h,A,P,N,q){this.property=h,this.value=A,this.begin=q+N.delay||0,this.end=this.begin+N.duration||0,h.specification.transition&&(N.delay||N.duration)&&(this.prior=P)}possiblyEvaluate(h,A,P){const N=h.now||0,q=this.value.possiblyEvaluate(h,A,P),Y=this.prior;if(Y){if(N>this.end)return this.prior=null,q;if(this.value.isDataDriven())return this.prior=null,q;if(N<this.begin)return Y.possiblyEvaluate(h,A,P);{const re=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(Y.possiblyEvaluate(h,A,P),q,function(fe){if(fe<=0)return 0;if(fe>=1)return 1;const be=fe*fe,Re=be*fe;return 4*(fe<.5?Re:3*(fe-be)+Re-.75)}(re))}}return q}}class ll{constructor(h){this._properties=h,this._values=Object.create(h.defaultTransitioningPropertyValues)}possiblyEvaluate(h,A,P){const N=new sc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(h,A,P);return N}hasTransition(){for(const h of Object.keys(this._values))if(this._values[h].prior)return!0;return!1}}class Fh{constructor(h){this._properties=h,this._values=Object.create(h.defaultPropertyValues)}getValue(h){return V(this._values[h].value)}setValue(h,A){this._values[h]=new xu(this._values[h].property,A===null?void 0:V(A))}serialize(){const h={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(h[A]=P)}return h}possiblyEvaluate(h,A,P){const N=new sc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(h,A,P);return N}}class ul{constructor(h,A,P){this.property=h,this.value=A,this.parameters=P}isConstant(){return this.value.kind==="constant"}constantOr(h){return this.value.kind==="constant"?this.value.value:h}evaluate(h,A,P,N){return this.property.evaluate(this.value,this.parameters,h,A,P,N)}}class sc{constructor(h){this._properties=h,this._values=Object.create(h.defaultPossiblyEvaluatedValues)}get(h){return this._values[h]}}class $n{constructor(h){this.specification=h}possiblyEvaluate(h,A){if(h.isDataDriven())throw new Error("Value should not be data driven");return h.expression.evaluate(A)}interpolate(h,A,P){const N=rl[this.specification.type];return N?N(h,A,P):h}}class ur{constructor(h,A){this.specification=h,this.overrides=A}possiblyEvaluate(h,A,P,N){return new ul(this,h.expression.kind==="constant"||h.expression.kind==="camera"?{kind:"constant",value:h.expression.evaluate(A,null,{},P,N)}:h.expression,A)}interpolate(h,A,P){if(h.value.kind!=="constant"||A.value.kind!=="constant")return h;if(h.value.value===void 0||A.value.value===void 0)return new ul(this,{kind:"constant",value:void 0},h.parameters);const N=rl[this.specification.type];return N?new ul(this,{kind:"constant",value:N(h.value.value,A.value.value,P)},h.parameters):h}evaluate(h,A,P,N,q,Y){return h.kind==="constant"?h.value:h.evaluate(A,P,N,q,Y)}}class Vu extends ur{possiblyEvaluate(h,A,P,N){if(h.value===void 0)return new ul(this,{kind:"constant",value:void 0},A);if(h.expression.kind==="constant"){const q=h.expression.evaluate(A,null,{},P,N),Y=h.property.specification.type==="resolvedImage"&&typeof q!="string"?q.name:q,re=this._calculate(Y,Y,Y,A);return new ul(this,{kind:"constant",value:re},A)}if(h.expression.kind==="camera"){const q=this._calculate(h.expression.evaluate({zoom:A.zoom-1}),h.expression.evaluate({zoom:A.zoom}),h.expression.evaluate({zoom:A.zoom+1}),A);return new ul(this,{kind:"constant",value:q},A)}return new ul(this,h.expression,A)}evaluate(h,A,P,N,q,Y){if(h.kind==="source"){const re=h.evaluate(A,P,N,q,Y);return this._calculate(re,re,re,A)}return h.kind==="composite"?this._calculate(h.evaluate({zoom:Math.floor(A.zoom)-1},P,N),h.evaluate({zoom:Math.floor(A.zoom)},P,N),h.evaluate({zoom:Math.floor(A.zoom)+1},P,N),A):h.value}_calculate(h,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:h,to:A}:{from:P,to:A}}interpolate(h){return h}}class ac{constructor(h){this.specification=h}possiblyEvaluate(h,A,P,N){if(h.value!==void 0){if(h.expression.kind==="constant"){const q=h.expression.evaluate(A,null,{},P,N);return this._calculate(q,q,q,A)}return this._calculate(h.expression.evaluate(new Ro(Math.floor(A.zoom-1),A)),h.expression.evaluate(new Ro(Math.floor(A.zoom),A)),h.expression.evaluate(new Ro(Math.floor(A.zoom+1),A)),A)}}_calculate(h,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:h,to:A}:{from:P,to:A}}interpolate(h){return h}}class vs{constructor(h){this.specification=h}possiblyEvaluate(h,A,P,N){return!!h.expression.evaluate(A,null,{},P,N)}interpolate(){return!1}}class Uo{constructor(h){this.properties=h,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in h){const P=h[A];P.specification.overridable&&this.overridableProperties.push(A);const N=this.defaultPropertyValues[A]=new xu(P,void 0),q=this.defaultTransitionablePropertyValues[A]=new Au(P);this.defaultTransitioningPropertyValues[A]=q.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=N.possiblyEvaluate({})}}}Pn("DataDrivenProperty",ur),Pn("DataConstantProperty",$n),Pn("CrossFadedDataDrivenProperty",Vu),Pn("CrossFadedProperty",ac),Pn("ColorRampProperty",vs);const Yl="-transition";class cl extends Pe{constructor(h,A){if(super(),this.id=h.id,this.type=h.type,this._featureFilter={filter:()=>!0,needGeometry:!1},h.type!=="custom"&&(this.metadata=h.metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,h.type!=="background"&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),A.layout&&(this._unevaluatedLayout=new Fh(A.layout)),A.paint)){this._transitionablePaint=new Rc(A.paint);for(const P in h.paint)this.setPaintProperty(P,h.paint[P],{validate:!1});for(const P in h.layout)this.setLayoutProperty(P,h.layout[P],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sc(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(h){return h==="visibility"?this.visibility:this._unevaluatedLayout.getValue(h)}setLayoutProperty(h,A,P={}){A!=null&&this._validate(vu,`layers.${this.id}.layout.${h}`,h,A,P)||(h!=="visibility"?this._unevaluatedLayout.setValue(h,A):this.visibility=A)}getPaintProperty(h){return h.endsWith(Yl)?this._transitionablePaint.getTransition(h.slice(0,-Yl.length)):this._transitionablePaint.getValue(h)}setPaintProperty(h,A,P={}){if(A!=null&&this._validate(Nu,`layers.${this.id}.paint.${h}`,h,A,P))return!1;if(h.endsWith(Yl))return this._transitionablePaint.setTransition(h.slice(0,-Yl.length),A||void 0),!1;{const N=this._transitionablePaint._values[h],q=N.property.specification["property-type"]==="cross-faded-data-driven",Y=N.value.isDataDriven(),re=N.value;this._transitionablePaint.setValue(h,A),this._handleSpecialPaintPropertyUpdate(h);const fe=this._transitionablePaint._values[h].value;return fe.isDataDriven()||Y||q||this._handleOverridablePaintPropertyUpdate(h,re,fe)}}_handleSpecialPaintPropertyUpdate(h){}_handleOverridablePaintPropertyUpdate(h,A,P){return!1}isHidden(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||this.visibility==="none"}updateTransitions(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(h,A){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(h,void 0,A)}serialize(){const h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),O(h,(A,P)=>!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length))}_validate(h,A,P,N,q={}){return(!q||q.validate!==!1)&&Hs(this,h.call(_a,{key:A,layerType:this.type,objectKey:P,value:N,styleSpec:Q,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const h in this.paint._values){const A=this.paint.get(h);if(A instanceof ul&&bo(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const ch={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zl{constructor(h,A){this._structArray=h,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class is{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(h,A){return h._trim(),A&&(h.isTransferred=!0,A.push(h.arrayBuffer)),{length:h.length,arrayBuffer:h.arrayBuffer}}static deserialize(h){const A=Object.create(this.prototype);return A.arrayBuffer=h.arrayBuffer,A.length=h.length,A.capacity=h.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(h){this.reserve(h),this.length=h}reserve(h){if(h>this.capacity){this.capacity=Math.max(h,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ps(y,h=1){let A=0,P=0;return{members:y.map(N=>{const q=ch[N.type].BYTES_PER_ELEMENT,Y=A=hh(A,Math.max(h,q)),re=N.components||1;return P=Math.max(P,q),A+=q*re,{name:N.name,type:N.type,components:re,offset:Y}}),size:hh(A,Math.max(P,h)),alignment:h}}function hh(y,h){return Math.ceil(y/h)*h}class la extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A){const P=this.length;return this.resize(P+1),this.emplace(P,h,A)}emplace(h,A,P){const N=2*h;return this.int16[N+0]=A,this.int16[N+1]=P,h}}la.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",la);class B extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,h,A,P,N)}emplace(h,A,P,N,q){const Y=4*h;return this.int16[Y+0]=A,this.int16[Y+1]=P,this.int16[Y+2]=N,this.int16[Y+3]=q,h}}B.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",B);class d extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y){const re=this.length;return this.resize(re+1),this.emplace(re,h,A,P,N,q,Y)}emplace(h,A,P,N,q,Y,re){const fe=6*h;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.int16[fe+2]=N,this.int16[fe+3]=q,this.int16[fe+4]=Y,this.int16[fe+5]=re,h}}d.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",d);class I extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y){const re=this.length;return this.resize(re+1),this.emplace(re,h,A,P,N,q,Y)}emplace(h,A,P,N,q,Y,re){const fe=4*h,be=8*h;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.uint8[be+4]=N,this.uint8[be+5]=q,this.uint8[be+6]=Y,this.uint8[be+7]=re,h}}I.prototype.bytesPerElement=8,Pn("StructArrayLayout2i4ub8",I);class D extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A){const P=this.length;return this.resize(P+1),this.emplace(P,h,A)}emplace(h,A,P){const N=2*h;return this.float32[N+0]=A,this.float32[N+1]=P,h}}D.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",D);class z extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,re,fe,be,Re){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,h,A,P,N,q,Y,re,fe,be,Re)}emplace(h,A,P,N,q,Y,re,fe,be,Re,Ve){const tt=10*h;return this.uint16[tt+0]=A,this.uint16[tt+1]=P,this.uint16[tt+2]=N,this.uint16[tt+3]=q,this.uint16[tt+4]=Y,this.uint16[tt+5]=re,this.uint16[tt+6]=fe,this.uint16[tt+7]=be,this.uint16[tt+8]=Re,this.uint16[tt+9]=Ve,h}}z.prototype.bytesPerElement=20,Pn("StructArrayLayout10ui20",z);class X extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,h,A,P,N,q,Y,re,fe,be,Re,Ve,tt)}emplace(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt){const ht=12*h;return this.int16[ht+0]=A,this.int16[ht+1]=P,this.int16[ht+2]=N,this.int16[ht+3]=q,this.uint16[ht+4]=Y,this.uint16[ht+5]=re,this.uint16[ht+6]=fe,this.uint16[ht+7]=be,this.int16[ht+8]=Re,this.int16[ht+9]=Ve,this.int16[ht+10]=tt,this.int16[ht+11]=lt,h}}X.prototype.bytesPerElement=24,Pn("StructArrayLayout4i4ui4i24",X);class ie extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=3*h;return this.float32[q+0]=A,this.float32[q+1]=P,this.float32[q+2]=N,h}}ie.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",ie);class de extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(h){const A=this.length;return this.resize(A+1),this.emplace(A,h)}emplace(h,A){return this.uint32[1*h+0]=A,h}}de.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",de);class _e extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,re,fe,be){const Re=this.length;return this.resize(Re+1),this.emplace(Re,h,A,P,N,q,Y,re,fe,be)}emplace(h,A,P,N,q,Y,re,fe,be,Re){const Ve=10*h,tt=5*h;return this.int16[Ve+0]=A,this.int16[Ve+1]=P,this.int16[Ve+2]=N,this.int16[Ve+3]=q,this.int16[Ve+4]=Y,this.int16[Ve+5]=re,this.uint32[tt+3]=fe,this.uint16[Ve+8]=be,this.uint16[Ve+9]=Re,h}}_e.prototype.bytesPerElement=20,Pn("StructArrayLayout6i1ul2ui20",_e);class Ae extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y){const re=this.length;return this.resize(re+1),this.emplace(re,h,A,P,N,q,Y)}emplace(h,A,P,N,q,Y,re){const fe=6*h;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.int16[fe+2]=N,this.int16[fe+3]=q,this.int16[fe+4]=Y,this.int16[fe+5]=re,h}}Ae.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",Ae);class ze extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,h,A,P,N,q)}emplace(h,A,P,N,q,Y){const re=4*h,fe=8*h;return this.float32[re+0]=A,this.float32[re+1]=P,this.float32[re+2]=N,this.int16[fe+6]=q,this.int16[fe+7]=Y,h}}ze.prototype.bytesPerElement=16,Pn("StructArrayLayout2f1f2i16",ze);class Je extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,h,A,P,N)}emplace(h,A,P,N,q){const Y=12*h,re=3*h;return this.uint8[Y+0]=A,this.uint8[Y+1]=P,this.float32[re+1]=N,this.float32[re+2]=q,h}}Je.prototype.bytesPerElement=12,Pn("StructArrayLayout2ub2f12",Je);class ot extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=3*h;return this.uint16[q+0]=A,this.uint16[q+1]=P,this.uint16[q+2]=N,h}}ot.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",ot);class Lt extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt,Wt,vi){const Fi=this.length;return this.resize(Fi+1),this.emplace(Fi,h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt,Wt,vi)}emplace(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt,Wt,vi,Fi){const gi=24*h,Li=12*h,Qi=48*h;return this.int16[gi+0]=A,this.int16[gi+1]=P,this.uint16[gi+2]=N,this.uint16[gi+3]=q,this.uint32[Li+2]=Y,this.uint32[Li+3]=re,this.uint32[Li+4]=fe,this.uint16[gi+10]=be,this.uint16[gi+11]=Re,this.uint16[gi+12]=Ve,this.float32[Li+7]=tt,this.float32[Li+8]=lt,this.uint8[Qi+36]=ht,this.uint8[Qi+37]=Kt,this.uint8[Qi+38]=Wt,this.uint32[Li+10]=vi,this.int16[gi+22]=Fi,h}}Lt.prototype.bytesPerElement=48,Pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Lt);class kt extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt,Wt,vi,Fi,gi,Li,Qi,Ji,Zn,er,Un,Mn,xn,Vn){const Bn=this.length;return this.resize(Bn+1),this.emplace(Bn,h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt,Wt,vi,Fi,gi,Li,Qi,Ji,Zn,er,Un,Mn,xn,Vn)}emplace(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt,Wt,vi,Fi,gi,Li,Qi,Ji,Zn,er,Un,Mn,xn,Vn,Bn){const dn=34*h,hr=17*h;return this.int16[dn+0]=A,this.int16[dn+1]=P,this.int16[dn+2]=N,this.int16[dn+3]=q,this.int16[dn+4]=Y,this.int16[dn+5]=re,this.int16[dn+6]=fe,this.int16[dn+7]=be,this.uint16[dn+8]=Re,this.uint16[dn+9]=Ve,this.uint16[dn+10]=tt,this.uint16[dn+11]=lt,this.uint16[dn+12]=ht,this.uint16[dn+13]=Kt,this.uint16[dn+14]=Wt,this.uint16[dn+15]=vi,this.uint16[dn+16]=Fi,this.uint16[dn+17]=gi,this.uint16[dn+18]=Li,this.uint16[dn+19]=Qi,this.uint16[dn+20]=Ji,this.uint16[dn+21]=Zn,this.uint16[dn+22]=er,this.uint32[hr+12]=Un,this.float32[hr+13]=Mn,this.float32[hr+14]=xn,this.float32[hr+15]=Vn,this.float32[hr+16]=Bn,h}}kt.prototype.bytesPerElement=68,Pn("StructArrayLayout8i15ui1ul4f68",kt);class It extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h){const A=this.length;return this.resize(A+1),this.emplace(A,h)}emplace(h,A){return this.float32[1*h+0]=A,h}}It.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",It);class si extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=3*h;return this.int16[q+0]=A,this.int16[q+1]=P,this.int16[q+2]=N,h}}si.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",si);class fi extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=4*h;return this.uint32[2*h+0]=A,this.uint16[q+2]=P,this.uint16[q+3]=N,h}}fi.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",fi);class xi extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A){const P=this.length;return this.resize(P+1),this.emplace(P,h,A)}emplace(h,A,P){const N=2*h;return this.uint16[N+0]=A,this.uint16[N+1]=P,h}}xi.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",xi);class Vt extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h){const A=this.length;return this.resize(A+1),this.emplace(A,h)}emplace(h,A){return this.uint16[1*h+0]=A,h}}Vt.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",Vt);class Pi extends is{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,h,A,P,N)}emplace(h,A,P,N,q){const Y=4*h;return this.float32[Y+0]=A,this.float32[Y+1]=P,this.float32[Y+2]=N,this.float32[Y+3]=q,h}}Pi.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",Pi);class Ei extends Zl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new nt(this.anchorPointX,this.anchorPointY)}}Ei.prototype.size=20;class Vi extends _e{get(h){return new Ei(this,h)}}Pn("CollisionBoxArray",Vi);class Ni extends Zl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(h){this._structArray.uint8[this._pos1+37]=h}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(h){this._structArray.uint8[this._pos1+38]=h}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(h){this._structArray.uint32[this._pos4+10]=h}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ni.prototype.size=48;class sn extends Lt{get(h){return new Ni(this,h)}}Pn("PlacedSymbolArray",sn);class zi extends Zl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(h){this._structArray.uint32[this._pos4+12]=h}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}zi.prototype.size=68;class Rn extends kt{get(h){return new zi(this,h)}}Pn("SymbolInstanceArray",Rn);class vn extends It{getoffsetX(h){return this.float32[1*h+0]}}Pn("GlyphOffsetArray",vn);class qn extends si{getx(h){return this.int16[3*h+0]}gety(h){return this.int16[3*h+1]}gettileUnitDistanceFromAnchor(h){return this.int16[3*h+2]}}Pn("SymbolLineVertexArray",qn);class Er extends Zl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Er.prototype.size=8;class Dr extends fi{get(h){return new Er(this,h)}}Pn("FeatureIndexArray",Dr);class j extends la{}class K extends la{}class ue extends la{}class ve extends d{}class je extends I{}class Ze extends D{}class $e extends z{}class at extends X{}class pt extends ie{}class St extends de{}class ai extends Ae{}class Ai extends Je{}class wi extends ot{}class pi extends xi{}const $i=ps([{name:"a_pos",components:2,type:"Int16"}],4),{members:Oi}=$i;class Xt{constructor(h=[]){this.segments=h}prepareSegment(h,A,P,N){let q=this.segments[this.segments.length-1];return h>Xt.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${Xt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${h}`),(!q||q.vertexLength+h>Xt.MAX_VERTEX_ARRAY_LENGTH||q.sortKey!==N)&&(q={vertexOffset:A.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},N!==void 0&&(q.sortKey=N),this.segments.push(q)),q}get(){return this.segments}destroy(){for(const h of this.segments)for(const A in h.vaos)h.vaos[A].destroy()}static simpleSegment(h,A,P,N){return new Xt([{vertexOffset:h,primitiveOffset:A,vertexLength:P,primitiveLength:N,vaos:{},sortKey:0}])}}function ii(y,h){return 256*(y=x(Math.floor(y),0,255))+x(Math.floor(h),0,255)}Xt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",Xt);const Hi=ps([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ki={exports:{}},Ui={exports:{}};Ui.exports=function(y,h){var A,P,N,q,Y,re,fe,be;for(P=y.length-(A=3&y.length),N=h,Y=3432918353,re=461845907,be=0;be<P;)fe=255&y.charCodeAt(be)|(255&y.charCodeAt(++be))<<8|(255&y.charCodeAt(++be))<<16|(255&y.charCodeAt(++be))<<24,++be,N=27492+(65535&(q=5*(65535&(N=(N^=fe=(65535&(fe=(fe=(65535&fe)*Y+(((fe>>>16)*Y&65535)<<16)&4294967295)<<15|fe>>>17))*re+(((fe>>>16)*re&65535)<<16)&4294967295)<<13|N>>>19))+((5*(N>>>16)&65535)<<16)&4294967295))+((58964+(q>>>16)&65535)<<16);switch(fe=0,A){case 3:fe^=(255&y.charCodeAt(be+2))<<16;case 2:fe^=(255&y.charCodeAt(be+1))<<8;case 1:N^=fe=(65535&(fe=(fe=(65535&(fe^=255&y.charCodeAt(be)))*Y+(((fe>>>16)*Y&65535)<<16)&4294967295)<<15|fe>>>17))*re+(((fe>>>16)*re&65535)<<16)&4294967295}return N^=y.length,N=2246822507*(65535&(N^=N>>>16))+((2246822507*(N>>>16)&65535)<<16)&4294967295,N=3266489909*(65535&(N^=N>>>13))+((3266489909*(N>>>16)&65535)<<16)&4294967295,(N^=N>>>16)>>>0};var Dn={exports:{}};Dn.exports=function(y,h){for(var A,P=y.length,N=h^P,q=0;P>=4;)A=1540483477*(65535&(A=255&y.charCodeAt(q)|(255&y.charCodeAt(++q))<<8|(255&y.charCodeAt(++q))<<16|(255&y.charCodeAt(++q))<<24))+((1540483477*(A>>>16)&65535)<<16),N=1540483477*(65535&N)+((1540483477*(N>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++q;switch(P){case 3:N^=(255&y.charCodeAt(q+2))<<16;case 2:N^=(255&y.charCodeAt(q+1))<<8;case 1:N=1540483477*(65535&(N^=255&y.charCodeAt(q)))+((1540483477*(N>>>16)&65535)<<16)}return N=1540483477*(65535&(N^=N>>>13))+((1540483477*(N>>>16)&65535)<<16),(N^=N>>>15)>>>0};var kn=Ui.exports,yr=Dn.exports;Ki.exports=kn,Ki.exports.murmur3=kn,Ki.exports.murmur2=yr;class On{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(h,A,P,N){this.ids.push(go(h)),this.positions.push(A,P,N)}getPositions(h){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=go(h);let P=0,N=this.ids.length-1;for(;P<N;){const Y=P+N>>1;this.ids[Y]>=A?N=Y:P=Y+1}const q=[];for(;this.ids[P]===A;)q.push({index:this.positions[3*P],start:this.positions[3*P+1],end:this.positions[3*P+2]}),P++;return q}static serialize(h,A){const P=new Float64Array(h.ids),N=new Uint32Array(h.positions);return wo(P,N,0,P.length-1),A&&A.push(P.buffer,N.buffer),{ids:P,positions:N}}static deserialize(h){const A=new On;return A.ids=h.ids,A.positions=h.positions,A.indexed=!0,A}}function go(y){const h=+y;return!isNaN(h)&&h<=Number.MAX_SAFE_INTEGER?h:Ki.exports(String(y))}function wo(y,h,A,P){for(;A<P;){const N=y[A+P>>1];let q=A-1,Y=P+1;for(;;){do q++;while(y[q]<N);do Y--;while(y[Y]>N);if(q>=Y)break;Yr(y,q,Y),Yr(h,3*q,3*Y),Yr(h,3*q+1,3*Y+1),Yr(h,3*q+2,3*Y+2)}Y-A<P-Y?(wo(y,h,A,Y),A=Y+1):(wo(y,h,Y+1,P),P=Y)}}function Yr(y,h,A){const P=y[h];y[h]=y[A],y[A]=P}Pn("FeaturePositionMap",On);class qr{constructor(h,A){this.gl=h.gl,this.location=A}}class po extends qr{constructor(h,A){super(h,A),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class xo extends qr{constructor(h,A){super(h,A),this.current=[0,0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))}}class Gr extends qr{constructor(h,A){super(h,A),this.current=dt.transparent}set(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))}}const Es=new Float32Array(16);function Or(y){return[ii(255*y.r,255*y.g),ii(255*y.b,255*y.a)]}class ns{constructor(h,A,P){this.value=h,this.uniformNames=A.map(N=>`u_${N}`),this.type=P}setUniform(h,A,P){h.set(P.constantOr(this.value))}getBinding(h,A,P){return this.type==="color"?new Gr(h,A):new po(h,A)}}class Bs{constructor(h,A){this.uniformNames=A.map(P=>`u_${P}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(h,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=h.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=h.tlbr}setUniform(h,A,P,N){const q=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;q&&h.set(q)}getBinding(h,A,P){return P.substr(0,9)==="u_pattern"?new xo(h,A):new po(h,A)}}class ao{constructor(h,A,P,N){this.expression=h,this.type=P,this.maxValue=0,this.paintVertexAttributes=A.map(q=>({name:`a_${q}`,type:"Float32",components:P==="color"?2:1,offset:0})),this.paintVertexArray=new N}populatePaintArray(h,A,P,N,q){const Y=this.paintVertexArray.length,re=this.expression.evaluate(new Ro(0),A,{},N,[],q);this.paintVertexArray.resize(h),this._setPaintValue(Y,h,re)}updatePaintArray(h,A,P,N){const q=this.expression.evaluate({zoom:0},P,N);this._setPaintValue(h,A,q)}_setPaintValue(h,A,P){if(this.type==="color"){const N=Or(P);for(let q=h;q<A;q++)this.paintVertexArray.emplace(q,N[0],N[1])}else{for(let N=h;N<A;N++)this.paintVertexArray.emplace(N,P);this.maxValue=Math.max(this.maxValue,Math.abs(P))}}upload(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class as{constructor(h,A,P,N,q,Y){this.expression=h,this.uniformNames=A.map(re=>`u_${re}_t`),this.type=P,this.useIntegerZoom=N,this.zoom=q,this.maxValue=0,this.paintVertexAttributes=A.map(re=>({name:`a_${re}`,type:"Float32",components:P==="color"?4:2,offset:0})),this.paintVertexArray=new Y}populatePaintArray(h,A,P,N,q){const Y=this.expression.evaluate(new Ro(this.zoom),A,{},N,[],q),re=this.expression.evaluate(new Ro(this.zoom+1),A,{},N,[],q),fe=this.paintVertexArray.length;this.paintVertexArray.resize(h),this._setPaintValue(fe,h,Y,re)}updatePaintArray(h,A,P,N){const q=this.expression.evaluate({zoom:this.zoom},P,N),Y=this.expression.evaluate({zoom:this.zoom+1},P,N);this._setPaintValue(h,A,q,Y)}_setPaintValue(h,A,P,N){if(this.type==="color"){const q=Or(P),Y=Or(N);for(let re=h;re<A;re++)this.paintVertexArray.emplace(re,q[0],q[1],Y[0],Y[1])}else{for(let q=h;q<A;q++)this.paintVertexArray.emplace(q,P,N);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(N))}}upload(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(h,A){const P=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,N=x(this.expression.interpolationFactor(P,this.zoom,this.zoom+1),0,1);h.set(N)}getBinding(h,A,P){return new po(h,A)}}class Is{constructor(h,A,P,N,q,Y){this.expression=h,this.type=A,this.useIntegerZoom=P,this.zoom=N,this.layerId=Y,this.zoomInPaintVertexArray=new q,this.zoomOutPaintVertexArray=new q}populatePaintArray(h,A,P){const N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(h),this.zoomOutPaintVertexArray.resize(h),this._setPaintValues(N,h,A.patterns&&A.patterns[this.layerId],P)}updatePaintArray(h,A,P,N,q){this._setPaintValues(h,A,P.patterns&&P.patterns[this.layerId],q)}_setPaintValues(h,A,P,N){if(!N||!P)return;const{min:q,mid:Y,max:re}=P,fe=N[q],be=N[Y],Re=N[re];if(fe&&be&&Re)for(let Ve=h;Ve<A;Ve++)this.zoomInPaintVertexArray.emplace(Ve,be.tl[0],be.tl[1],be.br[0],be.br[1],fe.tl[0],fe.tl[1],fe.br[0],fe.br[1],be.pixelRatio,fe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ve,be.tl[0],be.tl[1],be.br[0],be.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],be.pixelRatio,Re.pixelRatio)}upload(h){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=h.createVertexBuffer(this.zoomInPaintVertexArray,Hi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=h.createVertexBuffer(this.zoomOutPaintVertexArray,Hi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zs{constructor(h,A,P){this.binders={},this._buffers=[];const N=[];for(const q in h.paint._values){if(!P(q))continue;const Y=h.paint.get(q);if(!(Y instanceof ul&&bo(Y.property.specification)))continue;const re=ba(q,h.type),fe=Y.value,be=Y.property.specification.type,Re=Y.property.useIntegerZoom,Ve=Y.property.specification["property-type"],tt=Ve==="cross-faded"||Ve==="cross-faded-data-driven";if(fe.kind==="constant")this.binders[q]=tt?new Bs(fe.value,re):new ns(fe.value,re,be),N.push(`/u_${q}`);else if(fe.kind==="source"||tt){const lt=Wa(q,be,"source");this.binders[q]=tt?new Is(fe,be,Re,A,lt,h.id):new ao(fe,re,be,lt),N.push(`/a_${q}`)}else{const lt=Wa(q,be,"composite");this.binders[q]=new as(fe,re,be,Re,A,lt),N.push(`/z_${q}`)}}this.cacheKey=N.sort().join("")}getMaxValue(h){const A=this.binders[h];return A instanceof ao||A instanceof as?A.maxValue:0}populatePaintArrays(h,A,P,N,q){for(const Y in this.binders){const re=this.binders[Y];(re instanceof ao||re instanceof as||re instanceof Is)&&re.populatePaintArray(h,A,P,N,q)}}setConstantPatternPositions(h,A){for(const P in this.binders){const N=this.binders[P];N instanceof Bs&&N.setConstantPatternPositions(h,A)}}updatePaintArrays(h,A,P,N,q){let Y=!1;for(const re in h){const fe=A.getPositions(re);for(const be of fe){const Re=P.feature(be.index);for(const Ve in this.binders){const tt=this.binders[Ve];if((tt instanceof ao||tt instanceof as||tt instanceof Is)&&tt.expression.isStateDependent===!0){const lt=N.paint.get(Ve);tt.expression=lt.value,tt.updatePaintArray(be.start,be.end,Re,h[re],q),Y=!0}}}}return Y}defines(){const h=[];for(const A in this.binders){const P=this.binders[A];(P instanceof ns||P instanceof Bs)&&h.push(...P.uniformNames.map(N=>`#define HAS_UNIFORM_${N}`))}return h}getBinderAttributes(){const h=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof ao||P instanceof as)for(let N=0;N<P.paintVertexAttributes.length;N++)h.push(P.paintVertexAttributes[N].name);else if(P instanceof Is)for(let N=0;N<Hi.members.length;N++)h.push(Hi.members[N].name)}return h}getBinderUniforms(){const h=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof ns||P instanceof Bs||P instanceof as)for(const N of P.uniformNames)h.push(N)}return h}getPaintVertexBuffers(){return this._buffers}getUniforms(h,A){const P=[];for(const N in this.binders){const q=this.binders[N];if(q instanceof ns||q instanceof Bs||q instanceof as){for(const Y of q.uniformNames)if(A[Y]){const re=q.getBinding(h,A[Y],Y);P.push({name:Y,property:N,binding:re})}}}return P}setUniforms(h,A,P,N){for(const{name:q,property:Y,binding:re}of A)this.binders[Y].setUniform(re,N,P.get(Y),q)}updatePaintBuffers(h){this._buffers=[];for(const A in this.binders){const P=this.binders[A];if(h&&P instanceof Is){const N=h.fromScale===2?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(P instanceof ao||P instanceof as)&&P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}}upload(h){for(const A in this.binders){const P=this.binders[A];(P instanceof ao||P instanceof as||P instanceof Is)&&P.upload(h)}this.updatePaintBuffers()}destroy(){for(const h in this.binders){const A=this.binders[h];(A instanceof ao||A instanceof as||A instanceof Is)&&A.destroy()}}}class Bo{constructor(h,A,P=()=>!0){this.programConfigurations={};for(const N of h)this.programConfigurations[N.id]=new zs(N,A,P);this.needsUpload=!1,this._featureMap=new On,this._bufferOffset=0}populatePaintArrays(h,A,P,N,q,Y){for(const re in this.programConfigurations)this.programConfigurations[re].populatePaintArrays(h,A,N,q,Y);A.id!==void 0&&this._featureMap.add(A.id,P,this._bufferOffset,h),this._bufferOffset=h,this.needsUpload=!0}updatePaintArrays(h,A,P,N){for(const q of P)this.needsUpload=this.programConfigurations[q.id].updatePaintArrays(h,this._featureMap,A,q,N)||this.needsUpload}get(h){return this.programConfigurations[h]}upload(h){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(h);this.needsUpload=!1}}destroy(){for(const h in this.programConfigurations)this.programConfigurations[h].destroy()}}function ba(y,h){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[y]||[y.replace(`${h}-`,"").replace(/-/g,"_")]}function Wa(y,h,A){const P={color:{source:D,composite:Pi},number:{source:It,composite:D}},N=function(q){return{"line-pattern":{source:$e,composite:$e},"fill-pattern":{source:$e,composite:$e},"fill-extrusion-pattern":{source:$e,composite:$e}}[q]}(y);return N&&N[A]||P[h][A]}Pn("ConstantBinder",ns),Pn("CrossFadedConstantBinder",Bs),Pn("SourceExpressionBinder",ao),Pn("CrossFadedCompositeBinder",Is),Pn("CompositeExpressionBinder",as),Pn("ProgramConfiguration",zs,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",Bo);var Io=8192;const bs=Math.pow(2,14)-1,Kl=-bs-1;function Xa(y){const h=Io/y.extent,A=y.loadGeometry();for(let P=0;P<A.length;P++){const N=A[P];for(let q=0;q<N.length;q++){const Y=N[q],re=Math.round(Y.x*h),fe=Math.round(Y.y*h);Y.x=x(re,Kl,bs),Y.y=x(fe,Kl,bs),(re<Y.x||re>Y.x+1||fe<Y.y||fe>Y.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function hl(y,h){return{type:y.type,id:y.id,properties:y.properties,geometry:h?Xa(y):[]}}function fl(y,h,A,P,N){y.emplaceBack(2*h+(P+1)/2,2*A+(N+1)/2)}class rs{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new K,this.indexArray=new wi,this.segments=new Xt,this.programConfigurations=new Bo(h.layers,h.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){const N=this.layers[0],q=[];let Y=null,re=!1;N.type==="circle"&&(Y=N.layout.get("circle-sort-key"),re=!Y.isConstant());for(const{feature:fe,id:be,index:Re,sourceLayerIndex:Ve}of h){const tt=this.layers[0]._featureFilter.needGeometry,lt=hl(fe,tt);if(!this.layers[0]._featureFilter.filter(new Ro(this.zoom),lt,P))continue;const ht=re?Y.evaluate(lt,{},P):void 0,Kt={id:be,properties:fe.properties,type:fe.type,sourceLayerIndex:Ve,index:Re,geometry:tt?lt.geometry:Xa(fe),patterns:{},sortKey:ht};q.push(Kt)}re&&q.sort((fe,be)=>fe.sortKey-be.sortKey);for(const fe of q){const{geometry:be,index:Re,sourceLayerIndex:Ve}=fe,tt=h[Re].feature;this.addFeature(fe,be,Re,P),A.featureIndex.insert(tt,be,Re,Ve,this.index)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Oi),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(h,A,P,N){for(const q of A)for(const Y of q){const re=Y.x,fe=Y.y;if(re<0||re>=Io||fe<0||fe>=Io)continue;const be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,h.sortKey),Re=be.vertexLength;fl(this.layoutVertexArray,re,fe,-1,-1),fl(this.layoutVertexArray,re,fe,1,-1),fl(this.layoutVertexArray,re,fe,1,1),fl(this.layoutVertexArray,re,fe,-1,1),this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+3,Re+2),be.vertexLength+=4,be.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,{},N)}}function Rh(y,h){for(let A=0;A<y.length;A++)if(hc(h,y[A]))return!0;for(let A=0;A<h.length;A++)if(hc(y,h[A]))return!0;return!!uc(y,h)}function s0(y,h,A){return!!hc(y,h)||!!Ya(h,y,A)}function yf(y,h){if(y.length===1)return cc(h,y[0]);for(let A=0;A<h.length;A++){const P=h[A];for(let N=0;N<P.length;N++)if(hc(y,P[N]))return!0}for(let A=0;A<y.length;A++)if(cc(h,y[A]))return!0;for(let A=0;A<h.length;A++)if(uc(y,h[A]))return!0;return!1}function lc(y,h,A){if(y.length>1){if(uc(y,h))return!0;for(let P=0;P<h.length;P++)if(Ya(h[P],y,A))return!0}for(let P=0;P<y.length;P++)if(Ya(y[P],h,A))return!0;return!1}function uc(y,h){if(y.length===0||h.length===0)return!1;for(let A=0;A<y.length-1;A++){const P=y[A],N=y[A+1];for(let q=0;q<h.length-1;q++)if(Bh(P,N,h[q],h[q+1]))return!0}return!1}function Bh(y,h,A,P){return te(y,A,P)!==te(h,A,P)&&te(y,h,A)!==te(y,h,P)}function Ya(y,h,A){const P=A*A;if(h.length===1)return y.distSqr(h[0])<P;for(let N=1;N<h.length;N++)if(Za(y,h[N-1],h[N])<P)return!0;return!1}function Za(y,h,A){const P=h.distSqr(A);if(P===0)return y.distSqr(h);const N=((y.x-h.x)*(A.x-h.x)+(y.y-h.y)*(A.y-h.y))/P;return y.distSqr(N<0?h:N>1?A:A.sub(h)._mult(N)._add(h))}function cc(y,h){let A,P,N,q=!1;for(let Y=0;Y<y.length;Y++){A=y[Y];for(let re=0,fe=A.length-1;re<A.length;fe=re++)P=A[re],N=A[fe],P.y>h.y!=N.y>h.y&&h.x<(N.x-P.x)*(h.y-P.y)/(N.y-P.y)+P.x&&(q=!q)}return q}function hc(y,h){let A=!1;for(let P=0,N=y.length-1;P<y.length;N=P++){const q=y[P],Y=y[N];q.y>h.y!=Y.y>h.y&&h.x<(Y.x-q.x)*(h.y-q.y)/(Y.y-q.y)+q.x&&(A=!A)}return A}function zh(y,h,A){const P=A[0],N=A[2];if(y.x<P.x&&h.x<P.x||y.x>N.x&&h.x>N.x||y.y<P.y&&h.y<P.y||y.y>N.y&&h.y>N.y)return!1;const q=te(y,h,A[0]);return q!==te(y,h,A[1])||q!==te(y,h,A[2])||q!==te(y,h,A[3])}function Bc(y,h,A){const P=h.paint.get(y).value;return P.kind==="constant"?P.value:A.programConfigurations.get(h.id).getMaxValue(y)}function fc(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function zc(y,h,A,P,N){if(!h[0]&&!h[1])return y;const q=nt.convert(h)._mult(N);A==="viewport"&&q._rotate(-P);const Y=[];for(let re=0;re<y.length;re++)Y.push(y[re].sub(q));return Y}Pn("CircleBucket",rs,{omit:["layers"]});const dc=new Uo({"circle-sort-key":new ur(Q.layout_circle["circle-sort-key"])});var Nc={paint:new Uo({"circle-radius":new ur(Q.paint_circle["circle-radius"]),"circle-color":new ur(Q.paint_circle["circle-color"]),"circle-blur":new ur(Q.paint_circle["circle-blur"]),"circle-opacity":new ur(Q.paint_circle["circle-opacity"]),"circle-translate":new $n(Q.paint_circle["circle-translate"]),"circle-translate-anchor":new $n(Q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $n(Q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $n(Q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ur(Q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ur(Q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ur(Q.paint_circle["circle-stroke-opacity"])}),layout:dc},ua=1e-6,Qs=typeof Float32Array<"u"?Float32Array:Array;function Ts(){var y=new Qs(9);return Qs!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function Jl(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function a0(y,h,A){var P=h[0],N=h[1],q=h[2],Y=h[3],re=h[4],fe=h[5],be=h[6],Re=h[7],Ve=h[8],tt=h[9],lt=h[10],ht=h[11],Kt=h[12],Wt=h[13],vi=h[14],Fi=h[15],gi=A[0],Li=A[1],Qi=A[2],Ji=A[3];return y[0]=gi*P+Li*re+Qi*Ve+Ji*Kt,y[1]=gi*N+Li*fe+Qi*tt+Ji*Wt,y[2]=gi*q+Li*be+Qi*lt+Ji*vi,y[3]=gi*Y+Li*Re+Qi*ht+Ji*Fi,y[4]=(gi=A[4])*P+(Li=A[5])*re+(Qi=A[6])*Ve+(Ji=A[7])*Kt,y[5]=gi*N+Li*fe+Qi*tt+Ji*Wt,y[6]=gi*q+Li*be+Qi*lt+Ji*vi,y[7]=gi*Y+Li*Re+Qi*ht+Ji*Fi,y[8]=(gi=A[8])*P+(Li=A[9])*re+(Qi=A[10])*Ve+(Ji=A[11])*Kt,y[9]=gi*N+Li*fe+Qi*tt+Ji*Wt,y[10]=gi*q+Li*be+Qi*lt+Ji*vi,y[11]=gi*Y+Li*Re+Qi*ht+Ji*Fi,y[12]=(gi=A[12])*P+(Li=A[13])*re+(Qi=A[14])*Ve+(Ji=A[15])*Kt,y[13]=gi*N+Li*fe+Qi*tt+Ji*Wt,y[14]=gi*q+Li*be+Qi*lt+Ji*vi,y[15]=gi*Y+Li*Re+Qi*ht+Ji*Fi,y}Math.hypot||(Math.hypot=function(){for(var y=0,h=arguments.length;h--;)y+=arguments[h]*arguments[h];return Math.sqrt(y)});var Ql,l0=a0;function _f(){var y=new Qs(3);return Qs!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function fh(y,h,A){var P=new Qs(3);return P[0]=y,P[1]=h,P[2]=A,P}function jc(y,h,A){var P=h[0],N=h[1],q=h[2],Y=h[3];return y[0]=A[0]*P+A[4]*N+A[8]*q+A[12]*Y,y[1]=A[1]*P+A[5]*N+A[9]*q+A[13]*Y,y[2]=A[2]*P+A[6]*N+A[10]*q+A[14]*Y,y[3]=A[3]*P+A[7]*N+A[11]*q+A[15]*Y,y}function vf(){var y=new Qs(4);return Qs!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y[3]=1,y}function dh(y,h){const A=jc([],[y.x,y.y,0,1],h);return new nt(A[0]/A[3],A[1]/A[3])}_f(),Ql=new Qs(4),Qs!=Float32Array&&(Ql[0]=0,Ql[1]=0,Ql[2]=0,Ql[3]=0),_f(),fh(1,0,0),fh(0,1,0),vf(),vf(),Ts(),function(){var y;y=new Qs(2),Qs!=Float32Array&&(y[0]=0,y[1]=0)}();class Nh extends rs{}Pn("HeatmapBucket",Nh,{omit:["layers"]});var ph={paint:new Uo({"heatmap-radius":new ur(Q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ur(Q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $n(Q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vs(Q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $n(Q.paint_heatmap["heatmap-opacity"])})};function Ll(y,{width:h,height:A},P,N){if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==h*A*P)throw new RangeError(`mismatched image size. expected: ${N.length} but got: ${h*A*P}`)}else N=new Uint8Array(h*A*P);return y.width=h,y.height=A,y.data=N,y}function u0(y,{width:h,height:A},P){if(h===y.width&&A===y.height)return;const N=Ll({},{width:h,height:A},P);Uc(y,N,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,h),height:Math.min(y.height,A)},P),y.width=h,y.height=A,y.data=N.data}function Uc(y,h,A,P,N,q){if(N.width===0||N.height===0)return h;if(N.width>y.width||N.height>y.height||A.x>y.width-N.width||A.y>y.height-N.height)throw new RangeError("out of range source coordinates for image copy");if(N.width>h.width||N.height>h.height||P.x>h.width-N.width||P.y>h.height-N.height)throw new RangeError("out of range destination coordinates for image copy");const Y=y.data,re=h.data;if(Y===re)throw new Error("srcData equals dstData, so image is already copied");for(let fe=0;fe<N.height;fe++){const be=((A.y+fe)*y.width+A.x)*q,Re=((P.y+fe)*h.width+P.x)*q;for(let Ve=0;Ve<N.width*q;Ve++)re[Re+Ve]=Y[be+Ve]}return h}class pc{constructor(h,A){Ll(this,h,1,A)}resize(h){u0(this,h,1)}clone(){return new pc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(h,A,P,N,q){Uc(h,A,P,N,q,1)}}class wa{constructor(h,A){Ll(this,h,4,A)}resize(h){u0(this,h,4)}replace(h,A){A?this.data.set(h):this.data=h instanceof Uint8ClampedArray?new Uint8Array(h.buffer):h}clone(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(h,A,P,N,q){Uc(h,A,P,N,q,4)}}function $l(y){const h={},A=y.resolution||256,P=y.clips?y.clips.length:1,N=y.image||new wa({width:A,height:P});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const q=(Y,re,fe)=>{h[y.evaluationKey]=fe;const be=y.expression.evaluate(h);N.data[Y+re+0]=Math.floor(255*be.r/be.a),N.data[Y+re+1]=Math.floor(255*be.g/be.a),N.data[Y+re+2]=Math.floor(255*be.b/be.a),N.data[Y+re+3]=Math.floor(255*be.a)};if(y.clips)for(let Y=0,re=0;Y<P;++Y,re+=4*A)for(let fe=0,be=0;fe<A;fe++,be+=4){const Re=fe/(A-1),{start:Ve,end:tt}=y.clips[Y];q(re,be,Ve*(1-Re)+tt*Re)}else for(let Y=0,re=0;Y<A;Y++,re+=4)q(0,re,Y/(A-1));return N}Pn("AlphaImage",pc),Pn("RGBAImage",wa);var c0={paint:new Uo({"hillshade-illumination-direction":new $n(Q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $n(Q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $n(Q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $n(Q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $n(Q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $n(Q.paint_hillshade["hillshade-accent-color"])})};const bf=ps([{name:"a_pos",components:2,type:"Int16"}],4),{members:ld}=bf;var mc={exports:{}};function ku(y,h,A){A=A||2;var P,N,q,Y,re,fe,be,Re=h&&h.length,Ve=Re?h[0]*A:y.length,tt=h0(y,0,Ve,A,!0),lt=[];if(!tt||tt.next===tt.prev)return lt;if(Re&&(tt=function(Kt,Wt,vi,Fi){var gi,Li,Qi,Ji=[];for(gi=0,Li=Wt.length;gi<Li;gi++)(Qi=h0(Kt,Wt[gi]*Fi,gi<Li-1?Wt[gi+1]*Fi:Kt.length,Fi,!1))===Qi.next&&(Qi.steiner=!0),Ji.push(jh(Qi));for(Ji.sort(xa),gi=0;gi<Ji.length;gi++)vi=Su(Ji[gi],vi);return vi}(y,h,tt,A)),y.length>80*A){P=q=y[0],N=Y=y[1];for(var ht=A;ht<Ve;ht+=A)(re=y[ht])<P&&(P=re),(fe=y[ht+1])<N&&(N=fe),re>q&&(q=re),fe>Y&&(Y=fe);be=(be=Math.max(q-P,Y-N))!==0?32767/be:0}return mh(tt,lt,A,P,N,be,0),lt}function h0(y,h,A,P,N){var q,Y;if(N===kf(y,h,A,P)>0)for(q=h;q<A;q+=P)Y=up(q,y[q],y[q+1],Y);else for(q=A-P;q>=h;q-=P)Y=up(q,y[q],y[q+1],Y);return Y&&Wu(Y,Y.next)&&(Af(Y),Y=Y.next),Y}function qu(y,h){if(!y)return y;h||(h=y);var A,P=y;do if(A=!1,P.steiner||!Wu(P,P.next)&&Ko(P.prev,P,P.next)!==0)P=P.next;else{if(Af(P),(P=h=P.prev)===P.next)break;A=!0}while(A||P!==h);return h}function mh(y,h,A,P,N,q,Y){if(y){!Y&&q&&function(Re,Ve,tt,lt){var ht=Re;do ht.z===0&&(ht.z=eu(ht.x,ht.y,Ve,tt,lt)),ht.prevZ=ht.prev,ht.nextZ=ht.next,ht=ht.next;while(ht!==Re);ht.prevZ.nextZ=null,ht.prevZ=null,function(Kt){var Wt,vi,Fi,gi,Li,Qi,Ji,Zn,er=1;do{for(vi=Kt,Kt=null,Li=null,Qi=0;vi;){for(Qi++,Fi=vi,Ji=0,Wt=0;Wt<er&&(Ji++,Fi=Fi.nextZ);Wt++);for(Zn=er;Ji>0||Zn>0&&Fi;)Ji!==0&&(Zn===0||!Fi||vi.z<=Fi.z)?(gi=vi,vi=vi.nextZ,Ji--):(gi=Fi,Fi=Fi.nextZ,Zn--),Li?Li.nextZ=gi:Kt=gi,gi.prevZ=Li,Li=gi;vi=Fi}Li.nextZ=null,er*=2}while(Qi>1)}(ht)}(y,P,N,q);for(var re,fe,be=y;y.prev!==y.next;)if(re=y.prev,fe=y.next,q?ud(y,P,N,q):wf(y))h.push(re.i/A|0),h.push(y.i/A|0),h.push(fe.i/A|0),Af(y),y=fe.next,be=fe.next;else if((y=fe)===be){Y?Y===1?mh(y=gh(qu(y),h,A),h,A,P,N,q,2):Y===2&&xf(y,h,A,P,N,q):mh(qu(y),h,A,P,N,q,1);break}}}function wf(y){var h=y.prev,A=y,P=y.next;if(Ko(h,A,P)>=0)return!1;for(var N=h.x,q=A.x,Y=P.x,re=h.y,fe=A.y,be=P.y,Re=N<q?N<Y?N:Y:q<Y?q:Y,Ve=re<fe?re<be?re:be:fe<be?fe:be,tt=N>q?N>Y?N:Y:q>Y?q:Y,lt=re>fe?re>be?re:be:fe>be?fe:be,ht=P.next;ht!==h;){if(ht.x>=Re&&ht.x<=tt&&ht.y>=Ve&&ht.y<=lt&&Gu(N,re,q,fe,Y,be,ht.x,ht.y)&&Ko(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function ud(y,h,A,P){var N=y.prev,q=y,Y=y.next;if(Ko(N,q,Y)>=0)return!1;for(var re=N.x,fe=q.x,be=Y.x,Re=N.y,Ve=q.y,tt=Y.y,lt=re<fe?re<be?re:be:fe<be?fe:be,ht=Re<Ve?Re<tt?Re:tt:Ve<tt?Ve:tt,Kt=re>fe?re>be?re:be:fe>be?fe:be,Wt=Re>Ve?Re>tt?Re:tt:Ve>tt?Ve:tt,vi=eu(lt,ht,h,A,P),Fi=eu(Kt,Wt,h,A,P),gi=y.prevZ,Li=y.nextZ;gi&&gi.z>=vi&&Li&&Li.z<=Fi;){if(gi.x>=lt&&gi.x<=Kt&&gi.y>=ht&&gi.y<=Wt&&gi!==N&&gi!==Y&&Gu(re,Re,fe,Ve,be,tt,gi.x,gi.y)&&Ko(gi.prev,gi,gi.next)>=0||(gi=gi.prevZ,Li.x>=lt&&Li.x<=Kt&&Li.y>=ht&&Li.y<=Wt&&Li!==N&&Li!==Y&&Gu(re,Re,fe,Ve,be,tt,Li.x,Li.y)&&Ko(Li.prev,Li,Li.next)>=0))return!1;Li=Li.nextZ}for(;gi&&gi.z>=vi;){if(gi.x>=lt&&gi.x<=Kt&&gi.y>=ht&&gi.y<=Wt&&gi!==N&&gi!==Y&&Gu(re,Re,fe,Ve,be,tt,gi.x,gi.y)&&Ko(gi.prev,gi,gi.next)>=0)return!1;gi=gi.prevZ}for(;Li&&Li.z<=Fi;){if(Li.x>=lt&&Li.x<=Kt&&Li.y>=ht&&Li.y<=Wt&&Li!==N&&Li!==Y&&Gu(re,Re,fe,Ve,be,tt,Li.x,Li.y)&&Ko(Li.prev,Li,Li.next)>=0)return!1;Li=Li.nextZ}return!0}function gh(y,h,A){var P=y;do{var N=P.prev,q=P.next.next;!Wu(N,q)&&Uh(N,P,P.next,q)&&Vh(N,q)&&Vh(q,N)&&(h.push(N.i/A|0),h.push(P.i/A|0),h.push(q.i/A|0),Af(P),Af(P.next),P=y=q),P=P.next}while(P!==y);return qu(P)}function xf(y,h,A,P,N,q){var Y=y;do{for(var re=Y.next.next;re!==Y.prev;){if(Y.i!==re.i&&f0(Y,re)){var fe=lp(Y,re);return Y=qu(Y,Y.next),fe=qu(fe,fe.next),mh(Y,h,A,P,N,q,0),void mh(fe,h,A,P,N,q,0)}re=re.next}Y=Y.next}while(Y!==y)}function xa(y,h){return y.x-h.x}function Su(y,h){var A=function(N,q){var Y,re=q,fe=N.x,be=N.y,Re=-1/0;do{if(be<=re.y&&be>=re.next.y&&re.next.y!==re.y){var Ve=re.x+(be-re.y)*(re.next.x-re.x)/(re.next.y-re.y);if(Ve<=fe&&Ve>Re&&(Re=Ve,Y=re.x<re.next.x?re:re.next,Ve===fe))return Y}re=re.next}while(re!==q);if(!Y)return null;var tt,lt=Y,ht=Y.x,Kt=Y.y,Wt=1/0;re=Y;do fe>=re.x&&re.x>=ht&&fe!==re.x&&Gu(be<Kt?fe:Re,be,ht,Kt,be<Kt?Re:fe,be,re.x,re.y)&&(tt=Math.abs(be-re.y)/(fe-re.x),Vh(re,N)&&(tt<Wt||tt===Wt&&(re.x>Y.x||re.x===Y.x&&Hu(Y,re)))&&(Y=re,Wt=tt)),re=re.next;while(re!==lt);return Y}(y,h);if(!A)return h;var P=lp(A,y);return qu(P,P.next),qu(A,A.next)}function Hu(y,h){return Ko(y.prev,y,h.prev)<0&&Ko(h.next,y,y.next)<0}function eu(y,h,A,P,N){return(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-A)*N|0)|y<<8))|y<<4))|y<<2))|y<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-P)*N|0)|h<<8))|h<<4))|h<<2))|h<<1))<<1}function jh(y){var h=y,A=y;do(h.x<A.x||h.x===A.x&&h.y<A.y)&&(A=h),h=h.next;while(h!==y);return A}function Gu(y,h,A,P,N,q,Y,re){return(N-Y)*(h-re)>=(y-Y)*(q-re)&&(y-Y)*(P-re)>=(A-Y)*(h-re)&&(A-Y)*(q-re)>=(N-Y)*(P-re)}function f0(y,h){return y.next.i!==h.i&&y.prev.i!==h.i&&!function(A,P){var N=A;do{if(N.i!==A.i&&N.next.i!==A.i&&N.i!==P.i&&N.next.i!==P.i&&Uh(N,N.next,A,P))return!0;N=N.next}while(N!==A);return!1}(y,h)&&(Vh(y,h)&&Vh(h,y)&&function(A,P){var N=A,q=!1,Y=(A.x+P.x)/2,re=(A.y+P.y)/2;do N.y>re!=N.next.y>re&&N.next.y!==N.y&&Y<(N.next.x-N.x)*(re-N.y)/(N.next.y-N.y)+N.x&&(q=!q),N=N.next;while(N!==A);return q}(y,h)&&(Ko(y.prev,y,h.prev)||Ko(y,h.prev,h))||Wu(y,h)&&Ko(y.prev,y,y.next)>0&&Ko(h.prev,h,h.next)>0)}function Ko(y,h,A){return(h.y-y.y)*(A.x-h.x)-(h.x-y.x)*(A.y-h.y)}function Wu(y,h){return y.x===h.x&&y.y===h.y}function Uh(y,h,A,P){var N=p0(Ko(y,h,A)),q=p0(Ko(y,h,P)),Y=p0(Ko(A,P,y)),re=p0(Ko(A,P,h));return N!==q&&Y!==re||!(N!==0||!d0(y,A,h))||!(q!==0||!d0(y,P,h))||!(Y!==0||!d0(A,y,P))||!(re!==0||!d0(A,h,P))}function d0(y,h,A){return h.x<=Math.max(y.x,A.x)&&h.x>=Math.min(y.x,A.x)&&h.y<=Math.max(y.y,A.y)&&h.y>=Math.min(y.y,A.y)}function p0(y){return y>0?1:y<0?-1:0}function Vh(y,h){return Ko(y.prev,y,y.next)<0?Ko(y,h,y.next)>=0&&Ko(y,y.prev,h)>=0:Ko(y,h,y.prev)<0||Ko(y,y.next,h)<0}function lp(y,h){var A=new cd(y.i,y.x,y.y),P=new cd(h.i,h.x,h.y),N=y.next,q=h.prev;return y.next=h,h.prev=y,A.next=N,N.prev=A,P.next=A,A.prev=P,q.next=P,P.prev=q,P}function up(y,h,A,P){var N=new cd(y,h,A);return P?(N.next=P.next,N.prev=P,P.next.prev=N,P.next=N):(N.prev=N,N.next=N),N}function Af(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function cd(y,h,A){this.i=y,this.x=h,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kf(y,h,A,P){for(var N=0,q=h,Y=A-P;q<A;q+=P)N+=(y[Y]-y[q])*(y[q+1]+y[Y+1]),Y=q;return N}function K1(y,h,A,P,N){cp(y,h,A||0,P||y.length-1,N||hp)}function cp(y,h,A,P,N){for(;P>A;){if(P-A>600){var q=P-A+1,Y=h-A+1,re=Math.log(q),fe=.5*Math.exp(2*re/3),be=.5*Math.sqrt(re*fe*(q-fe)/q)*(Y-q/2<0?-1:1);cp(y,h,Math.max(A,Math.floor(h-Y*fe/q+be)),Math.min(P,Math.floor(h+(q-Y)*fe/q+be)),N)}var Re=y[h],Ve=A,tt=P;for(Sf(y,A,h),N(y[P],Re)>0&&Sf(y,A,P);Ve<tt;){for(Sf(y,Ve,tt),Ve++,tt--;N(y[Ve],Re)<0;)Ve++;for(;N(y[tt],Re)>0;)tt--}N(y[A],Re)===0?Sf(y,A,tt):Sf(y,++tt,P),tt<=h&&(A=tt+1),h<=tt&&(P=tt-1)}}function Sf(y,h,A){var P=y[h];y[h]=y[A],y[A]=P}function hp(y,h){return y<h?-1:y>h?1:0}function m0(y,h){const A=y.length;if(A<=1)return[y];const P=[];let N,q;for(let Y=0;Y<A;Y++){const re=J(y[Y]);re!==0&&(y[Y].area=Math.abs(re),q===void 0&&(q=re<0),q===re<0?(N&&P.push(N),N=[y[Y]]):N.push(y[Y]))}if(N&&P.push(N),h>1)for(let Y=0;Y<P.length;Y++)P[Y].length<=h||(K1(P[Y],h,1,P[Y].length-1,Ns),P[Y]=P[Y].slice(0,h));return P}function Ns(y,h){return h.area-y.area}function Cf(y,h,A){const P=A.patternDependencies;let N=!1;for(const q of h){const Y=q.paint.get(`${y}-pattern`);Y.isConstant()||(N=!0);const re=Y.constantOr(null);re&&(N=!0,P[re.to]=!0,P[re.from]=!0)}return N}function hd(y,h,A,P,N){const q=N.patternDependencies;for(const Y of h){const re=Y.paint.get(`${y}-pattern`).value;if(re.kind!=="constant"){let fe=re.evaluate({zoom:P-1},A,{},N.availableImages),be=re.evaluate({zoom:P},A,{},N.availableImages),Re=re.evaluate({zoom:P+1},A,{},N.availableImages);fe=fe&&fe.name?fe.name:fe,be=be&&be.name?be.name:be,Re=Re&&Re.name?Re.name:Re,q[fe]=!0,q[be]=!0,q[Re]=!0,A.patterns[Y.id]={min:fe,mid:be,max:Re}}}return A}mc.exports=ku,mc.exports.default=ku,ku.deviation=function(y,h,A,P){var N=h&&h.length,q=Math.abs(kf(y,0,N?h[0]*A:y.length,A));if(N)for(var Y=0,re=h.length;Y<re;Y++)q-=Math.abs(kf(y,h[Y]*A,Y<re-1?h[Y+1]*A:y.length,A));var fe=0;for(Y=0;Y<P.length;Y+=3){var be=P[Y]*A,Re=P[Y+1]*A,Ve=P[Y+2]*A;fe+=Math.abs((y[be]-y[Ve])*(y[Re+1]-y[be+1])-(y[be]-y[Re])*(y[Ve+1]-y[be+1]))}return q===0&&fe===0?0:Math.abs((fe-q)/q)},ku.flatten=function(y){for(var h=y[0][0].length,A={vertices:[],holes:[],dimensions:h},P=0,N=0;N<y.length;N++){for(var q=0;q<y[N].length;q++)for(var Y=0;Y<h;Y++)A.vertices.push(y[N][q][Y]);N>0&&A.holes.push(P+=y[N-1].length)}return A};class fd{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new wi,this.indexArray2=new pi,this.programConfigurations=new Bo(h.layers,h.zoom),this.segments=new Xt,this.segments2=new Xt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){this.hasPattern=Cf("fill",this.layers,A);const N=this.layers[0].layout.get("fill-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:re,id:fe,index:be,sourceLayerIndex:Re}of h){const Ve=this.layers[0]._featureFilter.needGeometry,tt=hl(re,Ve);if(!this.layers[0]._featureFilter.filter(new Ro(this.zoom),tt,P))continue;const lt=q?N.evaluate(tt,{},P,A.availableImages):void 0,ht={id:fe,properties:re.properties,type:re.type,sourceLayerIndex:Re,index:be,geometry:Ve?tt.geometry:Xa(re),patterns:{},sortKey:lt};Y.push(ht)}q&&Y.sort((re,fe)=>re.sortKey-fe.sortKey);for(const re of Y){const{geometry:fe,index:be,sourceLayerIndex:Re}=re;if(this.hasPattern){const Ve=hd("fill",this.layers,re,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(re,fe,be,P,{});A.featureIndex.insert(h[be].feature,fe,be,Re,this.index)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}addFeatures(h,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,ld),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.indexBuffer2=h.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(h,A,P,N,q){for(const Y of m0(A,500)){let re=0;for(const lt of Y)re+=lt.length;const fe=this.segments.prepareSegment(re,this.layoutVertexArray,this.indexArray),be=fe.vertexLength,Re=[],Ve=[];for(const lt of Y){if(lt.length===0)continue;lt!==Y[0]&&Ve.push(Re.length/2);const ht=this.segments2.prepareSegment(lt.length,this.layoutVertexArray,this.indexArray2),Kt=ht.vertexLength;this.layoutVertexArray.emplaceBack(lt[0].x,lt[0].y),this.indexArray2.emplaceBack(Kt+lt.length-1,Kt),Re.push(lt[0].x),Re.push(lt[0].y);for(let Wt=1;Wt<lt.length;Wt++)this.layoutVertexArray.emplaceBack(lt[Wt].x,lt[Wt].y),this.indexArray2.emplaceBack(Kt+Wt-1,Kt+Wt),Re.push(lt[Wt].x),Re.push(lt[Wt].y);ht.vertexLength+=lt.length,ht.primitiveLength+=lt.length}const tt=mc.exports(Re,Ve);for(let lt=0;lt<tt.length;lt+=3)this.indexArray.emplaceBack(be+tt[lt],be+tt[lt+1],be+tt[lt+2]);fe.vertexLength+=re,fe.primitiveLength+=tt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,q,N)}}Pn("FillBucket",fd,{omit:["layers","patternFeatures"]});const J1=new Uo({"fill-sort-key":new ur(Q.layout_fill["fill-sort-key"])});var fp={paint:new Uo({"fill-antialias":new $n(Q.paint_fill["fill-antialias"]),"fill-opacity":new ur(Q.paint_fill["fill-opacity"]),"fill-color":new ur(Q.paint_fill["fill-color"]),"fill-outline-color":new ur(Q.paint_fill["fill-outline-color"]),"fill-translate":new $n(Q.paint_fill["fill-translate"]),"fill-translate-anchor":new $n(Q.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vu(Q.paint_fill["fill-pattern"])}),layout:J1};const qh=ps([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Q1=ps([{name:"a_centroid",components:2,type:"Int16"}],4),{members:$1}=qh;var Vc={},gc=nt,cr=yc;function yc(y,h,A,P,N){this.properties={},this.extent=A,this.type=0,this._pbf=y,this._geometry=-1,this._keys=P,this._values=N,y.readFields(em,this,h)}function em(y,h,A){y==1?h.id=A.readVarint():y==2?function(P,N){for(var q=P.readVarint()+P.pos;P.pos<q;){var Y=N._keys[P.readVarint()],re=N._values[P.readVarint()];N.properties[Y]=re}}(A,h):y==3?h.type=A.readVarint():y==4&&(h._geometry=A.pos)}function tm(y){for(var h,A,P=0,N=0,q=y.length,Y=q-1;N<q;Y=N++)P+=((A=y[Y]).x-(h=y[N]).x)*(h.y+A.y);return P}yc.types=["Unknown","Point","LineString","Polygon"],yc.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var h,A=y.readVarint()+y.pos,P=1,N=0,q=0,Y=0,re=[];y.pos<A;){if(N<=0){var fe=y.readVarint();P=7&fe,N=fe>>3}if(N--,P===1||P===2)q+=y.readSVarint(),Y+=y.readSVarint(),P===1&&(h&&re.push(h),h=[]),h.push(new gc(q,Y));else{if(P!==7)throw new Error("unknown command "+P);h&&h.push(h[0].clone())}}return h&&re.push(h),re},yc.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var h=y.readVarint()+y.pos,A=1,P=0,N=0,q=0,Y=1/0,re=-1/0,fe=1/0,be=-1/0;y.pos<h;){if(P<=0){var Re=y.readVarint();A=7&Re,P=Re>>3}if(P--,A===1||A===2)(N+=y.readSVarint())<Y&&(Y=N),N>re&&(re=N),(q+=y.readSVarint())<fe&&(fe=q),q>be&&(be=q);else if(A!==7)throw new Error("unknown command "+A)}return[Y,fe,re,be]},yc.prototype.toGeoJSON=function(y,h,A){var P,N,q=this.extent*Math.pow(2,A),Y=this.extent*y,re=this.extent*h,fe=this.loadGeometry(),be=yc.types[this.type];function Re(lt){for(var ht=0;ht<lt.length;ht++){var Kt=lt[ht];lt[ht]=[360*(Kt.x+Y)/q-180,360/Math.PI*Math.atan(Math.exp((180-360*(Kt.y+re)/q)*Math.PI/180))-90]}}switch(this.type){case 1:var Ve=[];for(P=0;P<fe.length;P++)Ve[P]=fe[P][0];Re(fe=Ve);break;case 2:for(P=0;P<fe.length;P++)Re(fe[P]);break;case 3:for(fe=function(lt){var ht=lt.length;if(ht<=1)return[lt];for(var Kt,Wt,vi=[],Fi=0;Fi<ht;Fi++){var gi=tm(lt[Fi]);gi!==0&&(Wt===void 0&&(Wt=gi<0),Wt===gi<0?(Kt&&vi.push(Kt),Kt=[lt[Fi]]):Kt.push(lt[Fi]))}return Kt&&vi.push(Kt),vi}(fe),P=0;P<fe.length;P++)for(N=0;N<fe[P].length;N++)Re(fe[P][N])}fe.length===1?fe=fe[0]:be="Multi"+be;var tt={type:"Feature",geometry:{type:be,coordinates:fe},properties:this.properties};return"id"in this&&(tt.id=this.id),tt};var im=cr,dp=pp;function pp(y,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(nm,this,h),this.length=this._features.length}function nm(y,h,A){y===15?h.version=A.readVarint():y===1?h.name=A.readString():y===5?h.extent=A.readVarint():y===2?h._features.push(A.pos):y===3?h._keys.push(A.readString()):y===4&&h._values.push(function(P){for(var N=null,q=P.readVarint()+P.pos;P.pos<q;){var Y=P.readVarint()>>3;N=Y===1?P.readString():Y===2?P.readFloat():Y===3?P.readDouble():Y===4?P.readVarint64():Y===5?P.readVarint():Y===6?P.readSVarint():Y===7?P.readBoolean():null}return N}(A))}pp.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var h=this._pbf.readVarint()+this._pbf.pos;return new im(this._pbf,h,this.extent,this._keys,this._values)};var Ef=dp;function g0(y,h,A){if(y===3){var P=new Ef(A,A.readVarint()+A.pos);P.length&&(h[P.name]=P)}}Vc.VectorTile=function(y,h){this.layers=y.readFields(g0,{},h)},Vc.VectorTileFeature=cr,Vc.VectorTileLayer=dp;const mp=Vc.VectorTileFeature.types,dd=Math.pow(2,13);function Hh(y,h,A,P,N,q,Y,re){y.emplaceBack(h,A,2*Math.floor(P*dd)+Y,N*dd*2,q*dd*2,Math.round(re))}class If{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new ve,this.centroidVertexArray=new j,this.indexArray=new wi,this.programConfigurations=new Bo(h.layers,h.zoom),this.segments=new Xt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){this.features=[],this.hasPattern=Cf("fill-extrusion",this.layers,A);for(const{feature:N,id:q,index:Y,sourceLayerIndex:re}of h){const fe=this.layers[0]._featureFilter.needGeometry,be=hl(N,fe);if(!this.layers[0]._featureFilter.filter(new Ro(this.zoom),be,P))continue;const Re={id:q,sourceLayerIndex:re,index:Y,geometry:fe?be.geometry:Xa(N),properties:N.properties,type:N.type,patterns:{}};this.hasPattern?this.features.push(hd("fill-extrusion",this.layers,Re,this.zoom,A)):this.addFeature(Re,Re.geometry,Y,P,{}),A.featureIndex.insert(N,Re.geometry,Y,re,this.index,!0)}}addFeatures(h,A,P){for(const N of this.features){const{geometry:q}=N;this.addFeature(N,q,N.index,A,P)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,$1),this.centroidVertexBuffer=h.createVertexBuffer(this.centroidVertexArray,Q1.members,!0),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(h,A,P,N,q){const Y={x:0,y:0,vertexCount:0};for(const re of m0(A,500)){let fe=0;for(const ht of re)fe+=ht.length;let be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ht of re){if(ht.length===0||rm(ht))continue;let Kt=0;for(let Wt=0;Wt<ht.length;Wt++){const vi=ht[Wt];if(Wt>=1){const Fi=ht[Wt-1];if(!gp(vi,Fi)){be.vertexLength+4>Xt.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const gi=vi.sub(Fi)._perp()._unit(),Li=Fi.dist(vi);Kt+Li>32768&&(Kt=0),Hh(this.layoutVertexArray,vi.x,vi.y,gi.x,gi.y,0,0,Kt),Hh(this.layoutVertexArray,vi.x,vi.y,gi.x,gi.y,0,1,Kt),Y.x+=2*vi.x,Y.y+=2*vi.y,Y.vertexCount+=2,Kt+=Li,Hh(this.layoutVertexArray,Fi.x,Fi.y,gi.x,gi.y,0,0,Kt),Hh(this.layoutVertexArray,Fi.x,Fi.y,gi.x,gi.y,0,1,Kt),Y.x+=2*Fi.x,Y.y+=2*Fi.y,Y.vertexCount+=2;const Qi=be.vertexLength;this.indexArray.emplaceBack(Qi,Qi+2,Qi+1),this.indexArray.emplaceBack(Qi+1,Qi+2,Qi+3),be.vertexLength+=4,be.primitiveLength+=2}}}}if(be.vertexLength+fe>Xt.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(fe,this.layoutVertexArray,this.indexArray)),mp[h.type]!=="Polygon")continue;const Re=[],Ve=[],tt=be.vertexLength;for(const ht of re)if(ht.length!==0){ht!==re[0]&&Ve.push(Re.length/2);for(let Kt=0;Kt<ht.length;Kt++){const Wt=ht[Kt];Hh(this.layoutVertexArray,Wt.x,Wt.y,0,0,1,1,0),Y.x+=Wt.x,Y.y+=Wt.y,Y.vertexCount+=1,Re.push(Wt.x),Re.push(Wt.y)}}const lt=mc.exports(Re,Ve);for(let ht=0;ht<lt.length;ht+=3)this.indexArray.emplaceBack(tt+lt[ht],tt+lt[ht+2],tt+lt[ht+1]);be.primitiveLength+=lt.length/3,be.vertexLength+=fe}for(let re=0;re<Y.vertexCount;re++)this.centroidVertexArray.emplaceBack(Math.floor(Y.x/Y.vertexCount),Math.floor(Y.y/Y.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,q,N)}}function gp(y,h){return y.x===h.x&&(y.x<0||y.x>Io)||y.y===h.y&&(y.y<0||y.y>Io)}function rm(y){return y.every(h=>h.x<0)||y.every(h=>h.x>Io)||y.every(h=>h.y<0)||y.every(h=>h.y>Io)}Pn("FillExtrusionBucket",If,{omit:["layers","features"]});var om={paint:new Uo({"fill-extrusion-opacity":new $n(Q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ur(Q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $n(Q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $n(Q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vu(Q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ur(Q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ur(Q["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $n(Q["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Tf(y,h){return y.x*h.x+y.y*h.y}function yp(y,h){if(y.length===1){let A=0;const P=h[A++];let N;for(;!N||P.equals(N);)if(N=h[A++],!N)return 1/0;for(;A<h.length;A++){const q=h[A],Y=y[0],re=N.sub(P),fe=q.sub(P),be=Y.sub(P),Re=Tf(re,re),Ve=Tf(re,fe),tt=Tf(fe,fe),lt=Tf(be,re),ht=Tf(be,fe),Kt=Re*tt-Ve*Ve,Wt=(tt*lt-Ve*ht)/Kt,vi=(Re*ht-Ve*lt)/Kt,Fi=P.z*(1-Wt-vi)+N.z*Wt+q.z*vi;if(isFinite(Fi))return Fi}return 1/0}{let A=1/0;for(const P of h)A=Math.min(A,P.z);return A}}const _p=ps([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sm}=_p,n=ps([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:s}=n,a=Vc.VectorTileFeature.types,g=Math.cos(Math.PI/180*37.5),k=Math.pow(2,14)/.5;class E{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new je,this.layoutVertexArray2=new Ze,this.indexArray=new wi,this.programConfigurations=new Bo(h.layers,h.zoom),this.segments=new Xt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){this.hasPattern=Cf("line",this.layers,A);const N=this.layers[0].layout.get("line-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:re,id:fe,index:be,sourceLayerIndex:Re}of h){const Ve=this.layers[0]._featureFilter.needGeometry,tt=hl(re,Ve);if(!this.layers[0]._featureFilter.filter(new Ro(this.zoom),tt,P))continue;const lt=q?N.evaluate(tt,{},P):void 0,ht={id:fe,properties:re.properties,type:re.type,sourceLayerIndex:Re,index:be,geometry:Ve?tt.geometry:Xa(re),patterns:{},sortKey:lt};Y.push(ht)}q&&Y.sort((re,fe)=>re.sortKey-fe.sortKey);for(const re of Y){const{geometry:fe,index:be,sourceLayerIndex:Re}=re;if(this.hasPattern){const Ve=hd("line",this.layers,re,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(re,fe,be,P,{});A.featureIndex.insert(h[be].feature,fe,be,Re,this.index)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}addFeatures(h,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=h.createVertexBuffer(this.layoutVertexArray2,s)),this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,sm),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(h){if(h.properties&&Object.prototype.hasOwnProperty.call(h.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(h.properties,"mapbox_clip_end"))return{start:+h.properties.mapbox_clip_start,end:+h.properties.mapbox_clip_end}}addFeature(h,A,P,N,q){const Y=this.layers[0].layout,re=Y.get("line-join").evaluate(h,{}),fe=Y.get("line-cap"),be=Y.get("line-miter-limit"),Re=Y.get("line-round-limit");this.lineClips=this.lineFeatureClips(h);for(const Ve of A)this.addLine(Ve,h,re,fe,be,Re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,q,N)}addLine(h,A,P,N,q,Y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let vi=0;vi<h.length-1;vi++)this.totalDistance+=h[vi].dist(h[vi+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=a[A.type]==="Polygon";let fe=h.length;for(;fe>=2&&h[fe-1].equals(h[fe-2]);)fe--;let be=0;for(;be<fe-1&&h[be].equals(h[be+1]);)be++;if(fe<(re?3:2))return;P==="bevel"&&(q=1.05);const Re=this.overscaling<=16?122880/(512*this.overscaling):0,Ve=this.segments.prepareSegment(10*fe,this.layoutVertexArray,this.indexArray);let tt,lt,ht,Kt,Wt;this.e1=this.e2=-1,re&&(tt=h[fe-2],Wt=h[be].sub(tt)._unit()._perp());for(let vi=be;vi<fe;vi++){if(ht=vi===fe-1?re?h[be+1]:void 0:h[vi+1],ht&&h[vi].equals(ht))continue;Wt&&(Kt=Wt),tt&&(lt=tt),tt=h[vi],Wt=ht?ht.sub(tt)._unit()._perp():Kt,Kt=Kt||Wt;let Fi=Kt.add(Wt);Fi.x===0&&Fi.y===0||Fi._unit();const gi=Kt.x*Wt.x+Kt.y*Wt.y,Li=Fi.x*Wt.x+Fi.y*Wt.y,Qi=Li!==0?1/Li:1/0,Ji=2*Math.sqrt(2-2*Li),Zn=Li<g&&lt&&ht,er=Kt.x*Wt.y-Kt.y*Wt.x>0;if(Zn&&vi>be){const xn=tt.dist(lt);if(xn>2*Re){const Vn=tt.sub(tt.sub(lt)._mult(Re/xn)._round());this.updateDistance(lt,Vn),this.addCurrentVertex(Vn,Kt,0,0,Ve),lt=Vn}}const Un=lt&&ht;let Mn=Un?P:re?"butt":N;if(Un&&Mn==="round"&&(Qi<Y?Mn="miter":Qi<=2&&(Mn="fakeround")),Mn==="miter"&&Qi>q&&(Mn="bevel"),Mn==="bevel"&&(Qi>2&&(Mn="flipbevel"),Qi<q&&(Mn="miter")),lt&&this.updateDistance(lt,tt),Mn==="miter")Fi._mult(Qi),this.addCurrentVertex(tt,Fi,0,0,Ve);else if(Mn==="flipbevel"){if(Qi>100)Fi=Wt.mult(-1);else{const xn=Qi*Kt.add(Wt).mag()/Kt.sub(Wt).mag();Fi._perp()._mult(xn*(er?-1:1))}this.addCurrentVertex(tt,Fi,0,0,Ve),this.addCurrentVertex(tt,Fi.mult(-1),0,0,Ve)}else if(Mn==="bevel"||Mn==="fakeround"){const xn=-Math.sqrt(Qi*Qi-1),Vn=er?xn:0,Bn=er?0:xn;if(lt&&this.addCurrentVertex(tt,Kt,Vn,Bn,Ve),Mn==="fakeround"){const dn=Math.round(180*Ji/Math.PI/20);for(let hr=1;hr<dn;hr++){let nr=hr/dn;if(nr!==.5){const os=nr-.5;nr+=nr*os*(nr-1)*((1.0904+gi*(gi*(3.55645-1.43519*gi)-3.2452))*os*os+(.848013+gi*(.215638*gi-1.06021)))}const Qr=Wt.sub(Kt)._mult(nr)._add(Kt)._unit()._mult(er?-1:1);this.addHalfVertex(tt,Qr.x,Qr.y,!1,er,0,Ve)}}ht&&this.addCurrentVertex(tt,Wt,-Vn,-Bn,Ve)}else if(Mn==="butt")this.addCurrentVertex(tt,Fi,0,0,Ve);else if(Mn==="square"){const xn=lt?1:-1;this.addCurrentVertex(tt,Fi,xn,xn,Ve)}else Mn==="round"&&(lt&&(this.addCurrentVertex(tt,Kt,0,0,Ve),this.addCurrentVertex(tt,Kt,1,1,Ve,!0)),ht&&(this.addCurrentVertex(tt,Wt,-1,-1,Ve,!0),this.addCurrentVertex(tt,Wt,0,0,Ve)));if(Zn&&vi<fe-1){const xn=tt.dist(ht);if(xn>2*Re){const Vn=tt.add(ht.sub(tt)._mult(Re/xn)._round());this.updateDistance(tt,Vn),this.addCurrentVertex(Vn,Wt,0,0,Ve),tt=Vn}}}}addCurrentVertex(h,A,P,N,q,Y=!1){const re=A.y*N-A.x,fe=-A.y-A.x*N;this.addHalfVertex(h,A.x+A.y*P,A.y-A.x*P,Y,!1,P,q),this.addHalfVertex(h,re,fe,Y,!0,-N,q),this.distance>k/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(h,A,P,N,q,Y))}addHalfVertex({x:h,y:A},P,N,q,Y,re,fe){const be=.5*(this.lineClips?this.scaledDistance*(k-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((h<<1)+(q?1:0),(A<<1)+(Y?1:0),Math.round(63*P)+128,Math.round(63*N)+128,1+(re===0?0:re<0?-1:1)|(63&be)<<2,be>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Re=fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Re),fe.primitiveLength++),Y?this.e2=Re:this.e1=Re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(h,A){this.distance+=h.dist(A),this.updateScaledDistance()}}Pn("LineBucket",E,{omit:["layers","patternFeatures"]});const L=new Uo({"line-cap":new $n(Q.layout_line["line-cap"]),"line-join":new ur(Q.layout_line["line-join"]),"line-miter-limit":new $n(Q.layout_line["line-miter-limit"]),"line-round-limit":new $n(Q.layout_line["line-round-limit"]),"line-sort-key":new ur(Q.layout_line["line-sort-key"])});var R={paint:new Uo({"line-opacity":new ur(Q.paint_line["line-opacity"]),"line-color":new ur(Q.paint_line["line-color"]),"line-translate":new $n(Q.paint_line["line-translate"]),"line-translate-anchor":new $n(Q.paint_line["line-translate-anchor"]),"line-width":new ur(Q.paint_line["line-width"]),"line-gap-width":new ur(Q.paint_line["line-gap-width"]),"line-offset":new ur(Q.paint_line["line-offset"]),"line-blur":new ur(Q.paint_line["line-blur"]),"line-dasharray":new ac(Q.paint_line["line-dasharray"]),"line-pattern":new Vu(Q.paint_line["line-pattern"]),"line-gradient":new vs(Q.paint_line["line-gradient"])}),layout:L};const W=new class extends ur{possiblyEvaluate(y,h){return h=new Ro(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(y,h)}evaluate(y,h,A,P){return h=C({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(y,h,A,P)}}(R.paint.properties["line-width"].specification);function H(y,h){return h>0?h+2*y:y}W.useIntegerZoom=!0;const ee=ps([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ce=ps([{name:"a_projected_pos",components:3,type:"Float32"}],4);ps([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const xe=ps([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ps([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ne=ps([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ye=ps([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mt(y,h,A){return y.sections.forEach(P=>{P.text=function(N,q,Y){const re=q.layout.get("text-transform").evaluate(Y,{});return re==="uppercase"?N=N.toLocaleUpperCase():re==="lowercase"&&(N=N.toLocaleLowerCase()),va.applyArabicShaping&&(N=va.applyArabicShaping(N)),N}(P.text,h,A)}),y}ps([{name:"triangle",components:3,type:"Uint16"}]),ps([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ps([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ps([{type:"Float32",name:"offsetX"}]),ps([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Tt={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ot=24,ni=ki,ci=function(y,h,A,P,N){var q,Y,re=8*N-P-1,fe=(1<<re)-1,be=fe>>1,Re=-7,Ve=A?N-1:0,tt=A?-1:1,lt=y[h+Ve];for(Ve+=tt,q=lt&(1<<-Re)-1,lt>>=-Re,Re+=re;Re>0;q=256*q+y[h+Ve],Ve+=tt,Re-=8);for(Y=q&(1<<-Re)-1,q>>=-Re,Re+=P;Re>0;Y=256*Y+y[h+Ve],Ve+=tt,Re-=8);if(q===0)q=1-be;else{if(q===fe)return Y?NaN:1/0*(lt?-1:1);Y+=Math.pow(2,P),q-=be}return(lt?-1:1)*Y*Math.pow(2,q-P)},Mi=function(y,h,A,P,N,q){var Y,re,fe,be=8*q-N-1,Re=(1<<be)-1,Ve=Re>>1,tt=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,lt=P?0:q-1,ht=P?1:-1,Kt=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(re=isNaN(h)?1:0,Y=Re):(Y=Math.floor(Math.log(h)/Math.LN2),h*(fe=Math.pow(2,-Y))<1&&(Y--,fe*=2),(h+=Y+Ve>=1?tt/fe:tt*Math.pow(2,1-Ve))*fe>=2&&(Y++,fe/=2),Y+Ve>=Re?(re=0,Y=Re):Y+Ve>=1?(re=(h*fe-1)*Math.pow(2,N),Y+=Ve):(re=h*Math.pow(2,Ve-1)*Math.pow(2,N),Y=0));N>=8;y[A+lt]=255&re,lt+=ht,re/=256,N-=8);for(Y=Y<<N|re,be+=N;be>0;y[A+lt]=255&Y,lt+=ht,Y/=256,be-=8);y[A+lt-ht]|=128*Kt};function ki(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}ki.Varint=0,ki.Fixed64=1,ki.Bytes=2,ki.Fixed32=5;var Gi,nn=4294967296,bn=1/nn,ir=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ir(y){return y.type===ki.Bytes?y.readVarint()+y.pos:y.pos+1}function ms(y,h,A){return A?4294967296*h+(y>>>0):4294967296*(h>>>0)+(y>>>0)}function Aa(y,h,A){var P=h<=16383?1:h<=2097151?2:h<=268435455?3:Math.floor(Math.log(h)/(7*Math.LN2));A.realloc(P);for(var N=A.pos-1;N>=y;N--)A.buf[N+P]=A.buf[N]}function dl(y,h){for(var A=0;A<y.length;A++)h.writeVarint(y[A])}function Xu(y,h){for(var A=0;A<y.length;A++)h.writeSVarint(y[A])}function Gh(y,h){for(var A=0;A<y.length;A++)h.writeFloat(y[A])}function M3(y,h){for(var A=0;A<y.length;A++)h.writeDouble(y[A])}function D3(y,h){for(var A=0;A<y.length;A++)h.writeBoolean(y[A])}function O3(y,h){for(var A=0;A<y.length;A++)h.writeFixed32(y[A])}function F3(y,h){for(var A=0;A<y.length;A++)h.writeSFixed32(y[A])}function R3(y,h){for(var A=0;A<y.length;A++)h.writeFixed64(y[A])}function B3(y,h){for(var A=0;A<y.length;A++)h.writeSFixed64(y[A])}function vp(y,h){return(y[h]|y[h+1]<<8|y[h+2]<<16)+16777216*y[h+3]}function y0(y,h,A){y[A]=h,y[A+1]=h>>>8,y[A+2]=h>>>16,y[A+3]=h>>>24}function $g(y,h){return(y[h]|y[h+1]<<8|y[h+2]<<16)+(y[h+3]<<24)}function z3(y,h,A){y===1&&A.readMessage(N3,h)}function N3(y,h,A){if(y===3){const{id:P,bitmap:N,width:q,height:Y,left:re,top:fe,advance:be}=A.readMessage(j3,{});h.push({id:P,bitmap:new pc({width:q+6,height:Y+6},N),metrics:{width:q,height:Y,left:re,top:fe,advance:be}})}}function j3(y,h,A){y===1?h.id=A.readVarint():y===2?h.bitmap=A.readBytes():y===3?h.width=A.readVarint():y===4?h.height=A.readVarint():y===5?h.left=A.readSVarint():y===6?h.top=A.readSVarint():y===7&&(h.advance=A.readVarint())}function ey(y){let h=0,A=0;for(const Y of y)h+=Y.w*Y.h,A=Math.max(A,Y.w);y.sort((Y,re)=>re.h-Y.h);const P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(h/.95)),A),h:1/0}];let N=0,q=0;for(const Y of y)for(let re=P.length-1;re>=0;re--){const fe=P[re];if(!(Y.w>fe.w||Y.h>fe.h)){if(Y.x=fe.x,Y.y=fe.y,q=Math.max(q,Y.y+Y.h),N=Math.max(N,Y.x+Y.w),Y.w===fe.w&&Y.h===fe.h){const be=P.pop();re<P.length&&(P[re]=be)}else Y.h===fe.h?(fe.x+=Y.w,fe.w-=Y.w):Y.w===fe.w?(fe.y+=Y.h,fe.h-=Y.h):(P.push({x:fe.x+Y.w,y:fe.y,w:fe.w-Y.w,h:Y.h}),fe.y+=Y.h,fe.h-=Y.h);break}}return{w:N,h:q,fill:h/(N*q)||0}}ki.prototype={destroy:function(){this.buf=null},readFields:function(y,h,A){for(A=A||this.length;this.pos<A;){var P=this.readVarint(),N=P>>3,q=this.pos;this.type=7&P,y(N,h,this),this.pos===q&&this.skip(P)}return h},readMessage:function(y,h){return this.readFields(y,h,this.readVarint()+this.pos)},readFixed32:function(){var y=vp(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=$g(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=vp(this.buf,this.pos)+vp(this.buf,this.pos+4)*nn;return this.pos+=8,y},readSFixed64:function(){var y=vp(this.buf,this.pos)+$g(this.buf,this.pos+4)*nn;return this.pos+=8,y},readFloat:function(){var y=ci(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=ci(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var h,A,P=this.buf;return h=127&(A=P[this.pos++]),A<128?h:(h|=(127&(A=P[this.pos++]))<<7,A<128?h:(h|=(127&(A=P[this.pos++]))<<14,A<128?h:(h|=(127&(A=P[this.pos++]))<<21,A<128?h:function(N,q,Y){var re,fe,be=Y.buf;if(re=(112&(fe=be[Y.pos++]))>>4,fe<128||(re|=(127&(fe=be[Y.pos++]))<<3,fe<128)||(re|=(127&(fe=be[Y.pos++]))<<10,fe<128)||(re|=(127&(fe=be[Y.pos++]))<<17,fe<128)||(re|=(127&(fe=be[Y.pos++]))<<24,fe<128)||(re|=(1&(fe=be[Y.pos++]))<<31,fe<128))return ms(N,re,q);throw new Error("Expected varint not more than 10 bytes")}(h|=(15&(A=P[this.pos]))<<28,y,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2==1?(y+1)/-2:y/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var y=this.readVarint()+this.pos,h=this.pos;return this.pos=y,y-h>=12&&ir?function(A,P,N){return ir.decode(A.subarray(P,N))}(this.buf,h,y):function(A,P,N){for(var q="",Y=P;Y<N;){var re,fe,be,Re=A[Y],Ve=null,tt=Re>239?4:Re>223?3:Re>191?2:1;if(Y+tt>N)break;tt===1?Re<128&&(Ve=Re):tt===2?(192&(re=A[Y+1]))==128&&(Ve=(31&Re)<<6|63&re)<=127&&(Ve=null):tt===3?(fe=A[Y+2],(192&(re=A[Y+1]))==128&&(192&fe)==128&&((Ve=(15&Re)<<12|(63&re)<<6|63&fe)<=2047||Ve>=55296&&Ve<=57343)&&(Ve=null)):tt===4&&(fe=A[Y+2],be=A[Y+3],(192&(re=A[Y+1]))==128&&(192&fe)==128&&(192&be)==128&&((Ve=(15&Re)<<18|(63&re)<<12|(63&fe)<<6|63&be)<=65535||Ve>=1114112)&&(Ve=null)),Ve===null?(Ve=65533,tt=1):Ve>65535&&(Ve-=65536,q+=String.fromCharCode(Ve>>>10&1023|55296),Ve=56320|1023&Ve),q+=String.fromCharCode(Ve),Y+=tt}return q}(this.buf,h,y)},readBytes:function(){var y=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,y);return this.pos=y,h},readPackedVarint:function(y,h){if(this.type!==ki.Bytes)return y.push(this.readVarint(h));var A=Ir(this);for(y=y||[];this.pos<A;)y.push(this.readVarint(h));return y},readPackedSVarint:function(y){if(this.type!==ki.Bytes)return y.push(this.readSVarint());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==ki.Bytes)return y.push(this.readBoolean());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==ki.Bytes)return y.push(this.readFloat());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==ki.Bytes)return y.push(this.readDouble());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==ki.Bytes)return y.push(this.readFixed32());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==ki.Bytes)return y.push(this.readSFixed32());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==ki.Bytes)return y.push(this.readFixed64());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==ki.Bytes)return y.push(this.readSFixed64());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readSFixed64());return y},skip:function(y){var h=7&y;if(h===ki.Varint)for(;this.buf[this.pos++]>127;);else if(h===ki.Bytes)this.pos=this.readVarint()+this.pos;else if(h===ki.Fixed32)this.pos+=4;else{if(h!==ki.Fixed64)throw new Error("Unimplemented type: "+h);this.pos+=8}},writeTag:function(y,h){this.writeVarint(y<<3|h)},realloc:function(y){for(var h=this.length||16;h<this.pos+y;)h*=2;if(h!==this.length){var A=new Uint8Array(h);A.set(this.buf),this.buf=A,this.length=h}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),y0(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),y0(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),y0(this.buf,-1&y,this.pos),y0(this.buf,Math.floor(y*bn),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),y0(this.buf,-1&y,this.pos),y0(this.buf,Math.floor(y*bn),this.pos+4),this.pos+=8},writeVarint:function(y){(y=+y||0)>268435455||y<0?function(h,A){var P,N;if(h>=0?(P=h%4294967296|0,N=h/4294967296|0):(N=~(-h/4294967296),4294967295^(P=~(-h%4294967296))?P=P+1|0:(P=0,N=N+1|0)),h>=18446744073709552e3||h<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(q,Y,re){re.buf[re.pos++]=127&q|128,q>>>=7,re.buf[re.pos++]=127&q|128,q>>>=7,re.buf[re.pos++]=127&q|128,q>>>=7,re.buf[re.pos++]=127&q|128,re.buf[re.pos]=127&(q>>>=7)}(P,0,A),function(q,Y){var re=(7&q)<<4;Y.buf[Y.pos++]|=re|((q>>>=3)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q)))))}(N,A)}(y,this):(this.realloc(4),this.buf[this.pos++]=127&y|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=y>>>7&127))))},writeSVarint:function(y){this.writeVarint(y<0?2*-y-1:2*y)},writeBoolean:function(y){this.writeVarint(Boolean(y))},writeString:function(y){y=String(y),this.realloc(4*y.length),this.pos++;var h=this.pos;this.pos=function(P,N,q){for(var Y,re,fe=0;fe<N.length;fe++){if((Y=N.charCodeAt(fe))>55295&&Y<57344){if(!re){Y>56319||fe+1===N.length?(P[q++]=239,P[q++]=191,P[q++]=189):re=Y;continue}if(Y<56320){P[q++]=239,P[q++]=191,P[q++]=189,re=Y;continue}Y=re-55296<<10|Y-56320|65536,re=null}else re&&(P[q++]=239,P[q++]=191,P[q++]=189,re=null);Y<128?P[q++]=Y:(Y<2048?P[q++]=Y>>6|192:(Y<65536?P[q++]=Y>>12|224:(P[q++]=Y>>18|240,P[q++]=Y>>12&63|128),P[q++]=Y>>6&63|128),P[q++]=63&Y|128)}return q}(this.buf,y,this.pos);var A=this.pos-h;A>=128&&Aa(h,A,this),this.pos=h-1,this.writeVarint(A),this.pos+=A},writeFloat:function(y){this.realloc(4),Mi(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),Mi(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var h=y.length;this.writeVarint(h),this.realloc(h);for(var A=0;A<h;A++)this.buf[this.pos++]=y[A]},writeRawMessage:function(y,h){this.pos++;var A=this.pos;y(h,this);var P=this.pos-A;P>=128&&Aa(A,P,this),this.pos=A-1,this.writeVarint(P),this.pos+=P},writeMessage:function(y,h,A){this.writeTag(y,ki.Bytes),this.writeRawMessage(h,A)},writePackedVarint:function(y,h){h.length&&this.writeMessage(y,dl,h)},writePackedSVarint:function(y,h){h.length&&this.writeMessage(y,Xu,h)},writePackedBoolean:function(y,h){h.length&&this.writeMessage(y,D3,h)},writePackedFloat:function(y,h){h.length&&this.writeMessage(y,Gh,h)},writePackedDouble:function(y,h){h.length&&this.writeMessage(y,M3,h)},writePackedFixed32:function(y,h){h.length&&this.writeMessage(y,O3,h)},writePackedSFixed32:function(y,h){h.length&&this.writeMessage(y,F3,h)},writePackedFixed64:function(y,h){h.length&&this.writeMessage(y,R3,h)},writePackedSFixed64:function(y,h){h.length&&this.writeMessage(y,B3,h)},writeBytesField:function(y,h){this.writeTag(y,ki.Bytes),this.writeBytes(h)},writeFixed32Field:function(y,h){this.writeTag(y,ki.Fixed32),this.writeFixed32(h)},writeSFixed32Field:function(y,h){this.writeTag(y,ki.Fixed32),this.writeSFixed32(h)},writeFixed64Field:function(y,h){this.writeTag(y,ki.Fixed64),this.writeFixed64(h)},writeSFixed64Field:function(y,h){this.writeTag(y,ki.Fixed64),this.writeSFixed64(h)},writeVarintField:function(y,h){this.writeTag(y,ki.Varint),this.writeVarint(h)},writeSVarintField:function(y,h){this.writeTag(y,ki.Varint),this.writeSVarint(h)},writeStringField:function(y,h){this.writeTag(y,ki.Bytes),this.writeString(h)},writeFloatField:function(y,h){this.writeTag(y,ki.Fixed32),this.writeFloat(h)},writeDoubleField:function(y,h){this.writeTag(y,ki.Fixed64),this.writeDouble(h)},writeBooleanField:function(y,h){this.writeVarintField(y,Boolean(h))}};class am{constructor(h,{pixelRatio:A,version:P,stretchX:N,stretchY:q,content:Y}){this.paddedRect=h,this.pixelRatio=A,this.stretchX=N,this.stretchY=q,this.content=Y,this.version=P}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ty{constructor(h,A){const P={},N={};this.haveRenderCallbacks=[];const q=[];this.addImages(h,P,q),this.addImages(A,N,q);const{w:Y,h:re}=ey(q),fe=new wa({width:Y||1,height:re||1});for(const be in h){const Re=h[be],Ve=P[be].paddedRect;wa.copy(Re.data,fe,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Re.data)}for(const be in A){const Re=A[be],Ve=N[be].paddedRect,tt=Ve.x+1,lt=Ve.y+1,ht=Re.data.width,Kt=Re.data.height;wa.copy(Re.data,fe,{x:0,y:0},{x:tt,y:lt},Re.data),wa.copy(Re.data,fe,{x:0,y:Kt-1},{x:tt,y:lt-1},{width:ht,height:1}),wa.copy(Re.data,fe,{x:0,y:0},{x:tt,y:lt+Kt},{width:ht,height:1}),wa.copy(Re.data,fe,{x:ht-1,y:0},{x:tt-1,y:lt},{width:1,height:Kt}),wa.copy(Re.data,fe,{x:0,y:0},{x:tt+ht,y:lt},{width:1,height:Kt})}this.image=fe,this.iconPositions=P,this.patternPositions=N}addImages(h,A,P){for(const N in h){const q=h[N],Y={x:0,y:0,w:q.data.width+2,h:q.data.height+2};P.push(Y),A[N]=new am(Y,q),q.hasRenderCallback&&this.haveRenderCallbacks.push(N)}}patchUpdatedImages(h,A){h.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const P in h.updatedImages)this.patchUpdatedImage(this.iconPositions[P],h.getImage(P),A),this.patchUpdatedImage(this.patternPositions[P],h.getImage(P),A)}patchUpdatedImage(h,A,P){if(!h||!A||h.version===A.version)return;h.version=A.version;const[N,q]=h.tl;P.update(A.data,void 0,{x:N,y:q})}}Pn("ImagePosition",am),Pn("ImageAtlas",ty),r.WritingMode=void 0,(Gi=r.WritingMode||(r.WritingMode={}))[Gi.none=0]="none",Gi[Gi.horizontal=1]="horizontal",Gi[Gi.vertical=2]="vertical",Gi[Gi.horizontalOnly=3]="horizontalOnly";const bp=-17;class pd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(h,A){const P=new pd;return P.scale=h||1,P.fontStack=A,P}static forImage(h){const A=new pd;return A.imageName=h,A}}class _0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(h,A){const P=new _0;for(let N=0;N<h.sections.length;N++){const q=h.sections[N];q.image?P.addImageSection(q):P.addTextSection(q,A)}return P}length(){return this.text.length}getSection(h){return this.sections[this.sectionIndex[h]]}getSectionIndex(h){return this.sectionIndex[h]}getCharCode(h){return this.text.charCodeAt(h)}verticalizePunctuation(){this.text=function(h){let A="";for(let P=0;P<h.length;P++){const N=h.charCodeAt(P+1)||null,q=h.charCodeAt(P-1)||null;A+=N&&lh(N)&&!Tt[h[P+1]]||q&&lh(q)&&!Tt[h[P-1]]||!Tt[h[P]]?h[P]:Tt[h[P]]}return A}(this.text)}trim(){let h=0;for(let P=0;P<this.text.length&&xp[this.text.charCodeAt(P)];P++)h++;let A=this.text.length;for(let P=this.text.length-1;P>=0&&P>=h&&xp[this.text.charCodeAt(P)];P--)A--;this.text=this.text.substring(h,A),this.sectionIndex=this.sectionIndex.slice(h,A)}substring(h,A){const P=new _0;return P.text=this.text.substring(h,A),P.sectionIndex=this.sectionIndex.slice(h,A),P.sections=this.sections,P}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((h,A)=>Math.max(h,this.sections[A].scale),0)}addTextSection(h,A){this.text+=h.text,this.sections.push(pd.forText(h.scale,h.fontStack||A));const P=this.sections.length-1;for(let N=0;N<h.text.length;++N)this.sectionIndex.push(P)}addImageSection(h){const A=h.image?h.image.name:"";if(A.length===0)return void Z("Can't add FormattedSection with an empty image.");const P=this.getNextImageSectionCharCode();P?(this.text+=String.fromCharCode(P),this.sections.push(pd.forImage(A)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wp(y,h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt){const Wt=_0.fromFeature(y,N);let vi;Ve===r.WritingMode.vertical&&Wt.verticalizePunctuation();const{processBidirectionalText:Fi,processStyledBidirectionalText:gi}=va;if(Fi&&Wt.sections.length===1){vi=[];const Ji=Fi(Wt.toString(),lm(Wt,be,q,h,P,lt,ht));for(const Zn of Ji){const er=new _0;er.text=Zn,er.sections=Wt.sections;for(let Un=0;Un<Zn.length;Un++)er.sectionIndex.push(0);vi.push(er)}}else if(gi){vi=[];const Ji=gi(Wt.text,Wt.sectionIndex,lm(Wt,be,q,h,P,lt,ht));for(const Zn of Ji){const er=new _0;er.text=Zn[0],er.sectionIndex=Zn[1],er.sections=Wt.sections,vi.push(er)}}else vi=function(Ji,Zn){const er=[],Un=Ji.text;let Mn=0;for(const xn of Zn)er.push(Ji.substring(Mn,xn)),Mn=xn;return Mn<Un.length&&er.push(Ji.substring(Mn,Un.length)),er}(Wt,lm(Wt,be,q,h,P,lt,ht));const Li=[],Qi={positionedLines:Li,text:Wt.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Ve,iconsInText:!1,verticalizable:!1};return function(Ji,Zn,er,Un,Mn,xn,Vn,Bn,dn,hr,nr,Qr){let os=0,ls=bp,$s=0,Eu=0;const Ra=Bn==="right"?1:Bn==="left"?0:.5;let Gs=0;for(const Ws of Mn){Ws.trim();const za=Ws.getMaxScale(),Ja=(za-1)*Ot,pl={positionedGlyphs:[],lineOffset:0};Ji.positionedLines[Gs]=pl;const Ml=pl.positionedGlyphs;let Dl=0;if(!Ws.length()){ls+=xn,++Gs;continue}for(let ha=0;ha<Ws.length();ha++){const ro=Ws.getSection(ha),tu=Ws.getSectionIndex(ha),Na=Ws.getCharCode(ha);let Qa=0,Yu=null,_c=null,vc=null,_h=Ot;const Zu=!(dn===r.WritingMode.horizontal||!nr&&!Oc(Na)||nr&&(xp[Na]||(ca=Na,_n.Arabic(ca)||_n["Arabic Supplement"](ca)||_n["Arabic Extended-A"](ca)||_n["Arabic Presentation Forms-A"](ca)||_n["Arabic Presentation Forms-B"](ca))));if(ro.imageName){const Iu=Un[ro.imageName];if(!Iu)continue;vc=ro.imageName,Ji.iconsInText=Ji.iconsInText||!0,_c=Iu.paddedRect;const Ol=Iu.displaySize;ro.scale=ro.scale*Ot/Qr,Yu={width:Ol[0],height:Ol[1],left:1,top:-3,advance:Zu?Ol[1]:Ol[0]},Qa=Ja+(Ot-Ol[1]*ro.scale),_h=Yu.advance;const vh=Zu?Ol[0]*ro.scale-Ot*za:Ol[1]*ro.scale-Ot*za;vh>0&&vh>Dl&&(Dl=vh)}else{const Iu=er[ro.fontStack],Ol=Iu&&Iu[Na];if(Ol&&Ol.rect)_c=Ol.rect,Yu=Ol.metrics;else{const vh=Zn[ro.fontStack],yd=vh&&vh[Na];if(!yd)continue;Yu=yd.metrics}Qa=(za-ro.scale)*Ot}Zu?(Ji.verticalizable=!0,Ml.push({glyph:Na,imageName:vc,x:os,y:ls+Qa,vertical:Zu,scale:ro.scale,fontStack:ro.fontStack,sectionIndex:tu,metrics:Yu,rect:_c}),os+=_h*ro.scale+hr):(Ml.push({glyph:Na,imageName:vc,x:os,y:ls+Qa,vertical:Zu,scale:ro.scale,fontStack:ro.fontStack,sectionIndex:tu,metrics:Yu,rect:_c}),os+=Yu.advance*ro.scale+hr)}Ml.length!==0&&($s=Math.max(os-hr,$s),q3(Ml,0,Ml.length-1,Ra,Dl)),os=0;const gs=xn*za+Dl;pl.lineOffset=Math.max(Dl,Ja),ls+=gs,Eu=Math.max(gs,Eu),++Gs}var ca;const Ba=ls-bp,{horizontalAlign:Ka,verticalAlign:Pl}=um(Vn);(function(Ws,za,Ja,pl,Ml,Dl,gs,ha,ro){const tu=(za-Ja)*Ml;let Na=0;Na=Dl!==gs?-ha*pl-bp:(-pl*ro+.5)*gs;for(const Qa of Ws)for(const Yu of Qa.positionedGlyphs)Yu.x+=tu,Yu.y+=Na})(Ji.positionedLines,Ra,Ka,Pl,$s,Eu,xn,Ba,Mn.length),Ji.top+=-Pl*Ba,Ji.bottom=Ji.top+Ba,Ji.left+=-Ka*$s,Ji.right=Ji.left+$s}(Qi,h,A,P,vi,Y,re,fe,Ve,be,tt,Kt),!function(Ji){for(const Zn of Ji)if(Zn.positionedGlyphs.length!==0)return!1;return!0}(Li)&&Qi}const xp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},U3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function iy(y,h,A,P,N,q){if(h.imageName){const Y=P[h.imageName];return Y?Y.displaySize[0]*h.scale*Ot/q+N:0}{const Y=A[h.fontStack],re=Y&&Y[y];return re?re.metrics.advance*h.scale+N:0}}function ny(y,h,A,P){const N=Math.pow(y-h,2);return P?y<h?N/2:2*N:N+Math.abs(A)*A}function V3(y,h,A){let P=0;return y===10&&(P-=1e4),A&&(P+=150),y!==40&&y!==65288||(P+=50),h!==41&&h!==65289||(P+=50),P}function ry(y,h,A,P,N,q){let Y=null,re=ny(h,A,N,q);for(const fe of P){const be=ny(h-fe.x,A,N,q)+fe.badness;be<=re&&(Y=fe,re=be)}return{index:y,x:h,priorBreak:Y,badness:re}}function oy(y){return y?oy(y.priorBreak).concat(y.index):[]}function lm(y,h,A,P,N,q,Y){if(q!=="point")return[];if(!y)return[];const re=[],fe=function(tt,lt,ht,Kt,Wt,vi){let Fi=0;for(let gi=0;gi<tt.length();gi++){const Li=tt.getSection(gi);Fi+=iy(tt.getCharCode(gi),Li,Kt,Wt,lt,vi)}return Fi/Math.max(1,Math.ceil(Fi/ht))}(y,h,A,P,N,Y),be=y.text.indexOf("\u200B")>=0;let Re=0;for(let tt=0;tt<y.length();tt++){const lt=y.getSection(tt),ht=y.getCharCode(tt);if(xp[ht]||(Re+=iy(ht,lt,P,N,h,Y)),tt<y.length()-1){const Kt=!((Ve=ht)<11904||!(_n["Bopomofo Extended"](Ve)||_n.Bopomofo(Ve)||_n["CJK Compatibility Forms"](Ve)||_n["CJK Compatibility Ideographs"](Ve)||_n["CJK Compatibility"](Ve)||_n["CJK Radicals Supplement"](Ve)||_n["CJK Strokes"](Ve)||_n["CJK Symbols and Punctuation"](Ve)||_n["CJK Unified Ideographs Extension A"](Ve)||_n["CJK Unified Ideographs"](Ve)||_n["Enclosed CJK Letters and Months"](Ve)||_n["Halfwidth and Fullwidth Forms"](Ve)||_n.Hiragana(Ve)||_n["Ideographic Description Characters"](Ve)||_n["Kangxi Radicals"](Ve)||_n["Katakana Phonetic Extensions"](Ve)||_n.Katakana(Ve)||_n["Vertical Forms"](Ve)||_n["Yi Radicals"](Ve)||_n["Yi Syllables"](Ve)));(U3[ht]||Kt||lt.imageName)&&re.push(ry(tt+1,Re,fe,re,V3(ht,y.getCharCode(tt+1),Kt&&be),!1))}}var Ve;return oy(ry(y.length(),Re,fe,re,0,!0))}function um(y){let h=.5,A=.5;switch(y){case"right":case"top-right":case"bottom-right":h=1;break;case"left":case"top-left":case"bottom-left":h=0}switch(y){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:h,verticalAlign:A}}function q3(y,h,A,P,N){if(!P&&!N)return;const q=y[A],Y=(y[A].x+q.metrics.advance*q.scale)*P;for(let re=h;re<=A;re++)y[re].x-=Y,y[re].y+=N}function H3(y,h,A){const{horizontalAlign:P,verticalAlign:N}=um(A),q=h[0]-y.displaySize[0]*P,Y=h[1]-y.displaySize[1]*N;return{image:y,top:Y,bottom:Y+y.displaySize[1],left:q,right:q+y.displaySize[0]}}function sy(y,h,A,P,N,q){const Y=y.image;let re;if(Y.content){const Wt=Y.content,vi=Y.pixelRatio||1;re=[Wt[0]/vi,Wt[1]/vi,Y.displaySize[0]-Wt[2]/vi,Y.displaySize[1]-Wt[3]/vi]}const fe=h.left*q,be=h.right*q;let Re,Ve,tt,lt;A==="width"||A==="both"?(lt=N[0]+fe-P[3],Ve=N[0]+be+P[1]):(lt=N[0]+(fe+be-Y.displaySize[0])/2,Ve=lt+Y.displaySize[0]);const ht=h.top*q,Kt=h.bottom*q;return A==="height"||A==="both"?(Re=N[1]+ht-P[0],tt=N[1]+Kt+P[2]):(Re=N[1]+(ht+Kt-Y.displaySize[1])/2,tt=Re+Y.displaySize[1]),{image:Y,top:Re,right:Ve,bottom:tt,left:lt,collisionPadding:re}}const yh=128;function ay(y,h){const{expression:A}=h;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Ro(y+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:P,interpolationType:N}=A;let q=0;for(;q<P.length&&P[q]<=y;)q++;q=Math.max(0,q-1);let Y=q;for(;Y<P.length&&P[Y]<y+1;)Y++;Y=Math.min(P.length-1,Y);const re=P[q],fe=P[Y];return A.kind==="composite"?{kind:"composite",minZoom:re,maxZoom:fe,interpolationType:N}:{kind:"camera",minZoom:re,maxZoom:fe,minSize:A.evaluate(new Ro(re)),maxSize:A.evaluate(new Ro(fe)),interpolationType:N}}}class Wh extends nt{constructor(h,A,P,N){super(h,A),this.angle=P,N!==void 0&&(this.segment=N)}clone(){return new Wh(this.x,this.y,this.angle,this.segment)}}function ly(y,h,A,P,N){if(h.segment===void 0)return!0;let q=h,Y=h.segment+1,re=0;for(;re>-A/2;){if(Y--,Y<0)return!1;re-=y[Y].dist(q),q=y[Y]}re+=y[Y].dist(y[Y+1]),Y++;const fe=[];let be=0;for(;re<A/2;){const Re=y[Y],Ve=y[Y+1];if(!Ve)return!1;let tt=y[Y-1].angleTo(Re)-Re.angleTo(Ve);for(tt=Math.abs((tt+3*Math.PI)%(2*Math.PI)-Math.PI),fe.push({distance:re,angleDelta:tt}),be+=tt;re-fe[0].distance>P;)be-=fe.shift().angleDelta;if(be>N)return!1;Y++,re+=Re.dist(Ve)}return!0}function uy(y){let h=0;for(let A=0;A<y.length-1;A++)h+=y[A].dist(y[A+1]);return h}function cy(y,h,A){return y?.6*h*A:0}function hy(y,h){return Math.max(y?y.right-y.left:0,h?h.right-h.left:0)}function G3(y,h,A,P,N,q){const Y=cy(A,N,q),re=hy(A,P)*q;let fe=0;const be=uy(y)/2;for(let Re=0;Re<y.length-1;Re++){const Ve=y[Re],tt=y[Re+1],lt=Ve.dist(tt);if(fe+lt>be){const ht=(be-fe)/lt,Kt=Ao(Ve.x,tt.x,ht),Wt=Ao(Ve.y,tt.y,ht),vi=new Wh(Kt,Wt,tt.angleTo(Ve),Re);return vi._round(),!Y||ly(y,vi,re,Y,h)?vi:void 0}fe+=lt}}function W3(y,h,A,P,N,q,Y,re,fe){const be=cy(P,q,Y),Re=hy(P,N),Ve=Re*Y,tt=y[0].x===0||y[0].x===fe||y[0].y===0||y[0].y===fe;return h-Ve<h/4&&(h=Ve+h/4),fy(y,tt?h/2*re%h:(Re/2+2*q)*Y*re%h,h,be,A,Ve,tt,!1,fe)}function fy(y,h,A,P,N,q,Y,re,fe){const be=q/2,Re=uy(y);let Ve=0,tt=h-A,lt=[];for(let ht=0;ht<y.length-1;ht++){const Kt=y[ht],Wt=y[ht+1],vi=Kt.dist(Wt),Fi=Wt.angleTo(Kt);for(;tt+A<Ve+vi;){tt+=A;const gi=(tt-Ve)/vi,Li=Ao(Kt.x,Wt.x,gi),Qi=Ao(Kt.y,Wt.y,gi);if(Li>=0&&Li<fe&&Qi>=0&&Qi<fe&&tt-be>=0&&tt+be<=Re){const Ji=new Wh(Li,Qi,Fi,ht);Ji._round(),P&&!ly(y,Ji,q,P,N)||lt.push(Ji)}}Ve+=vi}return re||lt.length||Y||(lt=fy(y,Ve/2,A,P,N,q,Y,!0,fe)),lt}function dy(y,h,A,P,N){const q=[];for(let Y=0;Y<y.length;Y++){const re=y[Y];let fe;for(let be=0;be<re.length-1;be++){let Re=re[be],Ve=re[be+1];Re.x<h&&Ve.x<h||(Re.x<h?Re=new nt(h,Re.y+(h-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round():Ve.x<h&&(Ve=new nt(h,Re.y+(h-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round()),Re.y<A&&Ve.y<A||(Re.y<A?Re=new nt(Re.x+(A-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),A)._round():Ve.y<A&&(Ve=new nt(Re.x+(A-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),A)._round()),Re.x>=P&&Ve.x>=P||(Re.x>=P?Re=new nt(P,Re.y+(P-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round():Ve.x>=P&&(Ve=new nt(P,Re.y+(P-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round()),Re.y>=N&&Ve.y>=N||(Re.y>=N?Re=new nt(Re.x+(N-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),N)._round():Ve.y>=N&&(Ve=new nt(Re.x+(N-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),N)._round()),fe&&Re.equals(fe[fe.length-1])||(fe=[Re],q.push(fe)),fe.push(Ve)))))}}return q}function py(y,h,A,P){const N=[],q=y.image,Y=q.pixelRatio,re=q.paddedRect.w-2,fe=q.paddedRect.h-2,be=y.right-y.left,Re=y.bottom-y.top,Ve=q.stretchX||[[0,re]],tt=q.stretchY||[[0,fe]],lt=(xn,Vn)=>xn+Vn[1]-Vn[0],ht=Ve.reduce(lt,0),Kt=tt.reduce(lt,0),Wt=re-ht,vi=fe-Kt;let Fi=0,gi=ht,Li=0,Qi=Kt,Ji=0,Zn=Wt,er=0,Un=vi;if(q.content&&P){const xn=q.content;Fi=Ap(Ve,0,xn[0]),Li=Ap(tt,0,xn[1]),gi=Ap(Ve,xn[0],xn[2]),Qi=Ap(tt,xn[1],xn[3]),Ji=xn[0]-Fi,er=xn[1]-Li,Zn=xn[2]-xn[0]-gi,Un=xn[3]-xn[1]-Qi}const Mn=(xn,Vn,Bn,dn)=>{const hr=kp(xn.stretch-Fi,gi,be,y.left),nr=Sp(xn.fixed-Ji,Zn,xn.stretch,ht),Qr=kp(Vn.stretch-Li,Qi,Re,y.top),os=Sp(Vn.fixed-er,Un,Vn.stretch,Kt),ls=kp(Bn.stretch-Fi,gi,be,y.left),$s=Sp(Bn.fixed-Ji,Zn,Bn.stretch,ht),Eu=kp(dn.stretch-Li,Qi,Re,y.top),Ra=Sp(dn.fixed-er,Un,dn.stretch,Kt),Gs=new nt(hr,Qr),ca=new nt(ls,Qr),Ba=new nt(ls,Eu),Ka=new nt(hr,Eu),Pl=new nt(nr/Y,os/Y),Ws=new nt($s/Y,Ra/Y),za=h*Math.PI/180;if(za){const Ml=Math.sin(za),Dl=Math.cos(za),gs=[Dl,-Ml,Ml,Dl];Gs._matMult(gs),ca._matMult(gs),Ka._matMult(gs),Ba._matMult(gs)}const Ja=xn.stretch+xn.fixed,pl=Vn.stretch+Vn.fixed;return{tl:Gs,tr:ca,bl:Ka,br:Ba,tex:{x:q.paddedRect.x+1+Ja,y:q.paddedRect.y+1+pl,w:Bn.stretch+Bn.fixed-Ja,h:dn.stretch+dn.fixed-pl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pl,pixelOffsetBR:Ws,minFontScaleX:Zn/Y/be,minFontScaleY:Un/Y/Re,isSDF:A}};if(P&&(q.stretchX||q.stretchY)){const xn=my(Ve,Wt,ht),Vn=my(tt,vi,Kt);for(let Bn=0;Bn<xn.length-1;Bn++){const dn=xn[Bn],hr=xn[Bn+1];for(let nr=0;nr<Vn.length-1;nr++)N.push(Mn(dn,Vn[nr],hr,Vn[nr+1]))}}else N.push(Mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:re+1},{fixed:0,stretch:fe+1}));return N}function Ap(y,h,A){let P=0;for(const N of y)P+=Math.max(h,Math.min(A,N[1]))-Math.max(h,Math.min(A,N[0]));return P}function my(y,h,A){const P=[{fixed:-1,stretch:0}];for(const[N,q]of y){const Y=P[P.length-1];P.push({fixed:N-Y.stretch,stretch:Y.stretch}),P.push({fixed:N-Y.stretch,stretch:Y.stretch+(q-N)})}return P.push({fixed:h+1,stretch:A}),P}function kp(y,h,A,P){return y/h*A+P}function Sp(y,h,A,P){return y-h*A/P}Pn("Anchor",Wh);class Cp{constructor(h,A,P,N,q,Y,re,fe,be,Re){if(this.boxStartIndex=h.length,be){let Ve=Y.top,tt=Y.bottom;const lt=Y.collisionPadding;lt&&(Ve-=lt[1],tt+=lt[3]);let ht=tt-Ve;ht>0&&(ht=Math.max(10,ht),this.circleDiameter=ht)}else{let Ve=Y.top*re-fe[0],tt=Y.bottom*re+fe[2],lt=Y.left*re-fe[3],ht=Y.right*re+fe[1];const Kt=Y.collisionPadding;if(Kt&&(lt-=Kt[0]*re,Ve-=Kt[1]*re,ht+=Kt[2]*re,tt+=Kt[3]*re),Re){const Wt=new nt(lt,Ve),vi=new nt(ht,Ve),Fi=new nt(lt,tt),gi=new nt(ht,tt),Li=Re*Math.PI/180;Wt._rotate(Li),vi._rotate(Li),Fi._rotate(Li),gi._rotate(Li),lt=Math.min(Wt.x,vi.x,Fi.x,gi.x),ht=Math.max(Wt.x,vi.x,Fi.x,gi.x),Ve=Math.min(Wt.y,vi.y,Fi.y,gi.y),tt=Math.max(Wt.y,vi.y,Fi.y,gi.y)}h.emplaceBack(A.x,A.y,lt,Ve,ht,tt,P,N,q)}this.boxEndIndex=h.length}}class X3{constructor(h=[],A=Y3){if(this.data=h,this.length=this.data.length,this.compare=A,this.length>0)for(let P=(this.length>>1)-1;P>=0;P--)this._down(P)}push(h){this.data.push(h),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const h=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:A,compare:P}=this,N=A[h];for(;h>0;){const q=h-1>>1,Y=A[q];if(P(N,Y)>=0)break;A[h]=Y,h=q}A[h]=N}_down(h){const{data:A,compare:P}=this,N=this.length>>1,q=A[h];for(;h<N;){let Y=1+(h<<1),re=A[Y];const fe=Y+1;if(fe<this.length&&P(A[fe],re)<0&&(Y=fe,re=A[fe]),P(re,q)>=0)break;A[h]=re,h=Y}A[h]=q}}function Y3(y,h){return y<h?-1:y>h?1:0}function Z3(y,h=1,A=!1){let P=1/0,N=1/0,q=-1/0,Y=-1/0;const re=y[0];for(let lt=0;lt<re.length;lt++){const ht=re[lt];(!lt||ht.x<P)&&(P=ht.x),(!lt||ht.y<N)&&(N=ht.y),(!lt||ht.x>q)&&(q=ht.x),(!lt||ht.y>Y)&&(Y=ht.y)}const fe=Math.min(q-P,Y-N);let be=fe/2;const Re=new X3([],K3);if(fe===0)return new nt(P,N);for(let lt=P;lt<q;lt+=fe)for(let ht=N;ht<Y;ht+=fe)Re.push(new v0(lt+be,ht+be,be,y));let Ve=function(lt){let ht=0,Kt=0,Wt=0;const vi=lt[0];for(let Fi=0,gi=vi.length,Li=gi-1;Fi<gi;Li=Fi++){const Qi=vi[Fi],Ji=vi[Li],Zn=Qi.x*Ji.y-Ji.x*Qi.y;Kt+=(Qi.x+Ji.x)*Zn,Wt+=(Qi.y+Ji.y)*Zn,ht+=3*Zn}return new v0(Kt/ht,Wt/ht,0,lt)}(y),tt=Re.length;for(;Re.length;){const lt=Re.pop();(lt.d>Ve.d||!Ve.d)&&(Ve=lt,A&&console.log("found best %d after %d probes",Math.round(1e4*lt.d)/1e4,tt)),lt.max-Ve.d<=h||(be=lt.h/2,Re.push(new v0(lt.p.x-be,lt.p.y-be,be,y)),Re.push(new v0(lt.p.x+be,lt.p.y-be,be,y)),Re.push(new v0(lt.p.x-be,lt.p.y+be,be,y)),Re.push(new v0(lt.p.x+be,lt.p.y+be,be,y)),tt+=4)}return A&&(console.log(`num probes: ${tt}`),console.log(`best distance: ${Ve.d}`)),Ve.p}function K3(y,h){return h.max-y.max}function v0(y,h,A,P){this.p=new nt(y,h),this.h=A,this.d=function(N,q){let Y=!1,re=1/0;for(let fe=0;fe<q.length;fe++){const be=q[fe];for(let Re=0,Ve=be.length,tt=Ve-1;Re<Ve;tt=Re++){const lt=be[Re],ht=be[tt];lt.y>N.y!=ht.y>N.y&&N.x<(ht.x-lt.x)*(N.y-lt.y)/(ht.y-lt.y)+lt.x&&(Y=!Y),re=Math.min(re,Za(N,lt,ht))}}return(Y?1:-1)*Math.sqrt(re)}(this.p,P),this.max=this.d+this.h*Math.SQRT2}const cm=Number.POSITIVE_INFINITY;function gy(y,h){return h[1]!==cm?function(A,P,N){let q=0,Y=0;switch(P=Math.abs(P),N=Math.abs(N),A){case"top-right":case"top-left":case"top":Y=N-7;break;case"bottom-right":case"bottom-left":case"bottom":Y=7-N}switch(A){case"top-right":case"bottom-right":case"right":q=-P;break;case"top-left":case"bottom-left":case"left":q=P}return[q,Y]}(y,h[0],h[1]):function(A,P){let N=0,q=0;P<0&&(P=0);const Y=P/Math.sqrt(2);switch(A){case"top-right":case"top-left":q=Y-7;break;case"bottom-right":case"bottom-left":q=7-Y;break;case"bottom":q=7-P;break;case"top":q=P-7}switch(A){case"top-right":case"bottom-right":N=-Y;break;case"top-left":case"bottom-left":N=Y;break;case"left":N=P;break;case"right":N=-P}return[N,q]}(y,h[0])}function hm(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function J3(y,h,A,P,N,q,Y,re,fe,be,Re){let Ve=q.textMaxSize.evaluate(h,{});Ve===void 0&&(Ve=Y);const tt=y.layers[0].layout,lt=tt.get("icon-offset").evaluate(h,{},Re),ht=_y(A.horizontal),Kt=Y/24,Wt=y.tilePixelRatio*Kt,vi=y.tilePixelRatio*Ve/24,Fi=y.tilePixelRatio*re,gi=y.tilePixelRatio*tt.get("symbol-spacing"),Li=tt.get("text-padding")*y.tilePixelRatio,Qi=function(dn,hr,nr,Qr=1){const os=dn.get("icon-padding").evaluate(hr,{},nr),ls=os&&os.values;return[ls[0]*Qr,ls[1]*Qr,ls[2]*Qr,ls[3]*Qr]}(tt,h,Re,y.tilePixelRatio),Ji=tt.get("text-max-angle")/180*Math.PI,Zn=tt.get("text-rotation-alignment")!=="viewport"&&tt.get("symbol-placement")!=="point",er=tt.get("icon-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",Un=tt.get("symbol-placement"),Mn=gi/2,xn=tt.get("icon-text-fit");let Vn;P&&xn!=="none"&&(y.allowVerticalPlacement&&A.vertical&&(Vn=sy(P,A.vertical,xn,tt.get("icon-text-fit-padding"),lt,Kt)),ht&&(P=sy(P,ht,xn,tt.get("icon-text-fit-padding"),lt,Kt)));const Bn=(dn,hr)=>{hr.x<0||hr.x>=Io||hr.y<0||hr.y>=Io||function(nr,Qr,os,ls,$s,Eu,Ra,Gs,ca,Ba,Ka,Pl,Ws,za,Ja,pl,Ml,Dl,gs,ha,ro,tu,Na,Qa,Yu){const _c=nr.addToLineVertexArray(Qr,os);let vc,_h,Zu,Iu,Ol=0,vh=0,yd=0,Oy=0,wm=-1,xm=-1;const bh={};let Fy=Ki.exports(""),Am=0,km=0;if(Gs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Am,km]=Gs.layout.get("text-offset").evaluate(ro,{},Qa).map(Fl=>Fl*Ot):(Am=Gs.layout.get("text-radial-offset").evaluate(ro,{},Qa)*Ot,km=cm),nr.allowVerticalPlacement&&ls.vertical){const Fl=Gs.layout.get("text-rotate").evaluate(ro,{},Qa)+90;Zu=new Cp(ca,Qr,Ba,Ka,Pl,ls.vertical,Ws,za,Ja,Fl),Ra&&(Iu=new Cp(ca,Qr,Ba,Ka,Pl,Ra,Ml,Dl,Ja,Fl))}if($s){const Fl=Gs.layout.get("icon-rotate").evaluate(ro,{}),qc=Gs.layout.get("icon-text-fit")!=="none",_d=py($s,Fl,Na,qc),vd=Ra?py(Ra,Fl,Na,qc):void 0;_h=new Cp(ca,Qr,Ba,Ka,Pl,$s,Ml,Dl,!1,Fl),Ol=4*_d.length;const zy=nr.iconSizeData;let Pf=null;zy.kind==="source"?(Pf=[yh*Gs.layout.get("icon-size").evaluate(ro,{})],Pf[0]>Xh&&Z(`${nr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):zy.kind==="composite"&&(Pf=[yh*tu.compositeIconSizes[0].evaluate(ro,{},Qa),yh*tu.compositeIconSizes[1].evaluate(ro,{},Qa)],(Pf[0]>Xh||Pf[1]>Xh)&&Z(`${nr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),nr.addSymbols(nr.icon,_d,Pf,ha,gs,ro,r.WritingMode.none,Qr,_c.lineStartIndex,_c.lineLength,-1,Qa),wm=nr.icon.placedSymbolArray.length-1,vd&&(vh=4*vd.length,nr.addSymbols(nr.icon,vd,Pf,ha,gs,ro,r.WritingMode.vertical,Qr,_c.lineStartIndex,_c.lineLength,-1,Qa),xm=nr.icon.placedSymbolArray.length-1)}const Ry=Object.keys(ls.horizontal);for(const Fl of Ry){const qc=ls.horizontal[Fl];if(!vc){Fy=Ki.exports(qc.text);const vd=Gs.layout.get("text-rotate").evaluate(ro,{},Qa);vc=new Cp(ca,Qr,Ba,Ka,Pl,qc,Ws,za,Ja,vd)}const _d=qc.positionedLines.length===1;if(yd+=yy(nr,Qr,qc,Eu,Gs,Ja,ro,pl,_c,ls.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,_d?Ry:[Fl],bh,wm,tu,Qa),_d)break}ls.vertical&&(Oy+=yy(nr,Qr,ls.vertical,Eu,Gs,Ja,ro,pl,_c,r.WritingMode.vertical,["vertical"],bh,xm,tu,Qa));const cx=vc?vc.boxStartIndex:nr.collisionBoxArray.length,hx=vc?vc.boxEndIndex:nr.collisionBoxArray.length,fx=Zu?Zu.boxStartIndex:nr.collisionBoxArray.length,dx=Zu?Zu.boxEndIndex:nr.collisionBoxArray.length,px=_h?_h.boxStartIndex:nr.collisionBoxArray.length,mx=_h?_h.boxEndIndex:nr.collisionBoxArray.length,gx=Iu?Iu.boxStartIndex:nr.collisionBoxArray.length,yx=Iu?Iu.boxEndIndex:nr.collisionBoxArray.length;let bc=-1;const Pp=(Fl,qc)=>Fl&&Fl.circleDiameter?Math.max(Fl.circleDiameter,qc):qc;bc=Pp(vc,bc),bc=Pp(Zu,bc),bc=Pp(_h,bc),bc=Pp(Iu,bc);const By=bc>-1?1:0;By&&(bc*=Yu/Ot),nr.glyphOffsetArray.length>=b0.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ro.sortKey!==void 0&&nr.addToSortKeyRanges(nr.symbolInstances.length,ro.sortKey),nr.symbolInstances.emplaceBack(Qr.x,Qr.y,bh.right>=0?bh.right:-1,bh.center>=0?bh.center:-1,bh.left>=0?bh.left:-1,bh.vertical||-1,wm,xm,Fy,cx,hx,fx,dx,px,mx,gx,yx,Ba,yd,Oy,Ol,vh,By,0,Ws,Am,km,bc)}(y,hr,dn,A,P,N,Vn,y.layers[0],y.collisionBoxArray,h.index,h.sourceLayerIndex,y.index,Wt,[Li,Li,Li,Li],Zn,fe,Fi,Qi,er,lt,h,q,be,Re,Y)};if(Un==="line")for(const dn of dy(h.geometry,0,0,Io,Io)){const hr=W3(dn,gi,Ji,A.vertical||ht,P,24,vi,y.overscaling,Io);for(const nr of hr){const Qr=ht;Qr&&Q3(y,Qr.text,Mn,nr)||Bn(dn,nr)}}else if(Un==="line-center"){for(const dn of h.geometry)if(dn.length>1){const hr=G3(dn,Ji,A.vertical||ht,P,24,vi);hr&&Bn(dn,hr)}}else if(h.type==="Polygon")for(const dn of m0(h.geometry,0)){const hr=Z3(dn,16);Bn(dn[0],new Wh(hr.x,hr.y,0))}else if(h.type==="LineString")for(const dn of h.geometry)Bn(dn,new Wh(dn[0].x,dn[0].y,0));else if(h.type==="Point")for(const dn of h.geometry)for(const hr of dn)Bn([hr],new Wh(hr.x,hr.y,0))}const Xh=32640;function yy(y,h,A,P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht){const Kt=function(Fi,gi,Li,Qi,Ji,Zn,er,Un){const Mn=Qi.layout.get("text-rotate").evaluate(Zn,{})*Math.PI/180,xn=[];for(const Vn of gi.positionedLines)for(const Bn of Vn.positionedGlyphs){if(!Bn.rect)continue;const dn=Bn.rect||{};let hr=4,nr=!0,Qr=1,os=0;const ls=(Ji||Un)&&Bn.vertical,$s=Bn.metrics.advance*Bn.scale/2;if(Un&&gi.verticalizable){const gs=(Bn.scale-1)*Ot,ha=(Ot-Bn.metrics.width*Bn.scale)/2;os=Vn.lineOffset/2-(Bn.imageName?-ha:gs)}if(Bn.imageName){const gs=er[Bn.imageName];nr=gs.sdf,Qr=gs.pixelRatio,hr=1/Qr}const Eu=Ji?[Bn.x+$s,Bn.y]:[0,0];let Ra=Ji?[0,0]:[Bn.x+$s+Li[0],Bn.y+Li[1]-os],Gs=[0,0];ls&&(Gs=Ra,Ra=[0,0]);const ca=(Bn.metrics.left-hr)*Bn.scale-$s+Ra[0],Ba=(-Bn.metrics.top-hr)*Bn.scale+Ra[1],Ka=ca+dn.w*Bn.scale/Qr,Pl=Ba+dn.h*Bn.scale/Qr,Ws=new nt(ca,Ba),za=new nt(Ka,Ba),Ja=new nt(ca,Pl),pl=new nt(Ka,Pl);if(ls){const gs=new nt(-$s,$s-bp),ha=-Math.PI/2,ro=12-$s,tu=new nt(22-ro,-(Bn.imageName?ro:0)),Na=new nt(...Gs);Ws._rotateAround(ha,gs)._add(tu)._add(Na),za._rotateAround(ha,gs)._add(tu)._add(Na),Ja._rotateAround(ha,gs)._add(tu)._add(Na),pl._rotateAround(ha,gs)._add(tu)._add(Na)}if(Mn){const gs=Math.sin(Mn),ha=Math.cos(Mn),ro=[ha,-gs,gs,ha];Ws._matMult(ro),za._matMult(ro),Ja._matMult(ro),pl._matMult(ro)}const Ml=new nt(0,0),Dl=new nt(0,0);xn.push({tl:Ws,tr:za,bl:Ja,br:pl,tex:dn,writingMode:gi.writingMode,glyphOffset:Eu,sectionIndex:Bn.sectionIndex,isSDF:nr,pixelOffsetTL:Ml,pixelOffsetBR:Dl,minFontScaleX:0,minFontScaleY:0})}return xn}(0,A,re,N,q,Y,P,y.allowVerticalPlacement),Wt=y.textSizeData;let vi=null;Wt.kind==="source"?(vi=[yh*N.layout.get("text-size").evaluate(Y,{})],vi[0]>Xh&&Z(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Wt.kind==="composite"&&(vi=[yh*lt.compositeTextSizes[0].evaluate(Y,{},ht),yh*lt.compositeTextSizes[1].evaluate(Y,{},ht)],(vi[0]>Xh||vi[1]>Xh)&&Z(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),y.addSymbols(y.text,Kt,vi,re,q,Y,be,h,fe.lineStartIndex,fe.lineLength,tt,ht);for(const Fi of Re)Ve[Fi]=y.text.placedSymbolArray.length-1;return 4*Kt.length}function _y(y){for(const h in y)return y[h];return null}function Q3(y,h,A,P){const N=y.compareText;if(h in N){const q=N[h];for(let Y=q.length-1;Y>=0;Y--)if(P.dist(q[Y])<A)return!0}else N[h]=[];return N[h].push(P),!1}const $3=Vc.VectorTileFeature.types,ex=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ep(y,h,A,P,N,q,Y,re,fe,be,Re,Ve,tt){const lt=re?Math.min(Xh,Math.round(re[0])):0,ht=re?Math.min(Xh,Math.round(re[1])):0;y.emplaceBack(h,A,Math.round(32*P),Math.round(32*N),q,Y,(lt<<1)+(fe?1:0),ht,16*be,16*Re,256*Ve,256*tt)}function fm(y,h,A){y.emplaceBack(h.x,h.y,A),y.emplaceBack(h.x,h.y,A),y.emplaceBack(h.x,h.y,A),y.emplaceBack(h.x,h.y,A)}function tx(y){for(const h of y.sections)if(Lr(h.text))return!0;return!1}class dm{constructor(h){this.layoutVertexArray=new at,this.indexArray=new wi,this.programConfigurations=h,this.segments=new Xt,this.dynamicLayoutVertexArray=new pt,this.opacityVertexArray=new St,this.placedSymbolArray=new sn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(h,A,P,N){this.isEmpty()||(P&&(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,ee.members),this.indexBuffer=h.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=h.createVertexBuffer(this.dynamicLayoutVertexArray,ce.members,!0),this.opacityVertexBuffer=h.createVertexBuffer(this.opacityVertexArray,ex,!0),this.opacityVertexBuffer.itemSize=1),(P||N)&&this.programConfigurations.upload(h))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pn("SymbolBuffers",dm);class pm{constructor(h,A,P){this.layoutVertexArray=new h,this.layoutAttributes=A,this.indexArray=new P,this.segments=new Xt,this.collisionVertexArray=new Ai}upload(h){this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=h.createVertexBuffer(this.collisionVertexArray,xe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pn("CollisionBuffers",pm);class b0{constructor(h){this.collisionBoxArray=h.collisionBoxArray,this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(Y=>Y.id),this.index=h.index,this.pixelRatio=h.pixelRatio,this.sourceLayerIndex=h.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Jl([]),this.placementViewportMatrix=Jl([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ay(this.zoom,A["text-size"]),this.iconSizeData=ay(this.zoom,A["icon-size"]);const P=this.layers[0].layout,N=P.get("symbol-sort-key"),q=P.get("symbol-z-order");this.canOverlap=gm(P,"text-overlap","text-allow-overlap")!=="never"||gm(P,"icon-overlap","icon-allow-overlap")!=="never"||P.get("text-ignore-placement")||P.get("icon-ignore-placement"),this.sortFeaturesByKey=q!=="viewport-y"&&!N.isConstant(),this.sortFeaturesByY=(q==="viewport-y"||q==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,P.get("symbol-placement")==="point"&&(this.writingModes=P.get("text-writing-mode").map(Y=>r.WritingMode[Y])),this.stateDependentLayerIds=this.layers.filter(Y=>Y.isStateDependent()).map(Y=>Y.id),this.sourceID=h.sourceID}createArrays(){this.text=new dm(new Bo(this.layers,this.zoom,h=>/^text/.test(h))),this.icon=new dm(new Bo(this.layers,this.zoom,h=>/^icon/.test(h))),this.glyphOffsetArray=new vn,this.lineVertexArray=new qn,this.symbolInstances=new Rn}calculateGlyphDependencies(h,A,P,N,q){for(let Y=0;Y<h.length;Y++)if(A[h.charCodeAt(Y)]=!0,(P||N)&&q){const re=Tt[h.charAt(Y)];re&&(A[re.charCodeAt(0)]=!0)}}populate(h,A,P){const N=this.layers[0],q=N.layout,Y=q.get("text-font"),re=q.get("text-field"),fe=q.get("icon-image"),be=(re.value.kind!=="constant"||re.value.value instanceof Zt&&!re.value.value.isEmpty()||re.value.value.toString().length>0)&&(Y.value.kind!=="constant"||Y.value.value.length>0),Re=fe.value.kind!=="constant"||!!fe.value.value||Object.keys(fe.parameters).length>0,Ve=q.get("symbol-sort-key");if(this.features=[],!be&&!Re)return;const tt=A.iconDependencies,lt=A.glyphDependencies,ht=A.availableImages,Kt=new Ro(this.zoom);for(const{feature:Wt,id:vi,index:Fi,sourceLayerIndex:gi}of h){const Li=N._featureFilter.needGeometry,Qi=hl(Wt,Li);if(!N._featureFilter.filter(Kt,Qi,P))continue;let Ji,Zn;if(Li||(Qi.geometry=Xa(Wt)),be){const Un=N.getValueAndResolveTokens("text-field",Qi,P,ht),Mn=Zt.factory(Un);tx(Mn)&&(this.hasRTLText=!0),(!this.hasRTLText||Xl()==="unavailable"||this.hasRTLText&&va.isParsed())&&(Ji=mt(Mn,N,Qi))}if(Re){const Un=N.getValueAndResolveTokens("icon-image",Qi,P,ht);Zn=Un instanceof oi?Un:oi.fromString(Un)}if(!Ji&&!Zn)continue;const er=this.sortFeaturesByKey?Ve.evaluate(Qi,{},P):void 0;if(this.features.push({id:vi,text:Ji,icon:Zn,index:Fi,sourceLayerIndex:gi,geometry:Qi.geometry,properties:Wt.properties,type:$3[Wt.type],sortKey:er}),Zn&&(tt[Zn.name]=!0),Ji){const Un=Y.evaluate(Qi,{},P).join(","),Mn=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const xn of Ji.sections)if(xn.image)tt[xn.image.name]=!0;else{const Vn=Fa(Ji.toString()),Bn=xn.fontStack||Un,dn=lt[Bn]=lt[Bn]||{};this.calculateGlyphDependencies(xn.text,dn,Mn,this.allowVerticalPlacement,Vn)}}}q.get("symbol-placement")==="line"&&(this.features=function(Wt){const vi={},Fi={},gi=[];let Li=0;function Qi(Un){gi.push(Wt[Un]),Li++}function Ji(Un,Mn,xn){const Vn=Fi[Un];return delete Fi[Un],Fi[Mn]=Vn,gi[Vn].geometry[0].pop(),gi[Vn].geometry[0]=gi[Vn].geometry[0].concat(xn[0]),Vn}function Zn(Un,Mn,xn){const Vn=vi[Mn];return delete vi[Mn],vi[Un]=Vn,gi[Vn].geometry[0].shift(),gi[Vn].geometry[0]=xn[0].concat(gi[Vn].geometry[0]),Vn}function er(Un,Mn,xn){const Vn=xn?Mn[0][Mn[0].length-1]:Mn[0][0];return`${Un}:${Vn.x}:${Vn.y}`}for(let Un=0;Un<Wt.length;Un++){const Mn=Wt[Un],xn=Mn.geometry,Vn=Mn.text?Mn.text.toString():null;if(!Vn){Qi(Un);continue}const Bn=er(Vn,xn),dn=er(Vn,xn,!0);if(Bn in Fi&&dn in vi&&Fi[Bn]!==vi[dn]){const hr=Zn(Bn,dn,xn),nr=Ji(Bn,dn,gi[hr].geometry);delete vi[Bn],delete Fi[dn],Fi[er(Vn,gi[nr].geometry,!0)]=nr,gi[hr].geometry=null}else Bn in Fi?Ji(Bn,dn,xn):dn in vi?Zn(Bn,dn,xn):(Qi(Un),vi[Bn]=Li-1,Fi[dn]=Li-1)}return gi.filter(Un=>Un.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Wt,vi)=>Wt.sortKey-vi.sortKey)}update(h,A,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(h,A,this.layers,P),this.icon.programConfigurations.updatePaintArrays(h,A,this.layers,P))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(h){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(h),this.iconCollisionBox.upload(h)),this.text.upload(h,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(h,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(h,A){const P=this.lineVertexArray.length;if(h.segment!==void 0){let N=h.dist(A[h.segment+1]),q=h.dist(A[h.segment]);const Y={};for(let re=h.segment+1;re<A.length;re++)Y[re]={x:A[re].x,y:A[re].y,tileUnitDistanceFromAnchor:N},re<A.length-1&&(N+=A[re+1].dist(A[re]));for(let re=h.segment||0;re>=0;re--)Y[re]={x:A[re].x,y:A[re].y,tileUnitDistanceFromAnchor:q},re>0&&(q+=A[re-1].dist(A[re]));for(let re=0;re<A.length;re++){const fe=Y[re];this.lineVertexArray.emplaceBack(fe.x,fe.y,fe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}}addSymbols(h,A,P,N,q,Y,re,fe,be,Re,Ve,tt){const lt=h.indexArray,ht=h.layoutVertexArray,Kt=h.segments.prepareSegment(4*A.length,ht,lt,this.canOverlap?Y.sortKey:void 0),Wt=this.glyphOffsetArray.length,vi=Kt.vertexLength,Fi=this.allowVerticalPlacement&&re===r.WritingMode.vertical?Math.PI/2:0,gi=Y.text&&Y.text.sections;for(let Li=0;Li<A.length;Li++){const{tl:Qi,tr:Ji,bl:Zn,br:er,tex:Un,pixelOffsetTL:Mn,pixelOffsetBR:xn,minFontScaleX:Vn,minFontScaleY:Bn,glyphOffset:dn,isSDF:hr,sectionIndex:nr}=A[Li],Qr=Kt.vertexLength,os=dn[1];Ep(ht,fe.x,fe.y,Qi.x,os+Qi.y,Un.x,Un.y,P,hr,Mn.x,Mn.y,Vn,Bn),Ep(ht,fe.x,fe.y,Ji.x,os+Ji.y,Un.x+Un.w,Un.y,P,hr,xn.x,Mn.y,Vn,Bn),Ep(ht,fe.x,fe.y,Zn.x,os+Zn.y,Un.x,Un.y+Un.h,P,hr,Mn.x,xn.y,Vn,Bn),Ep(ht,fe.x,fe.y,er.x,os+er.y,Un.x+Un.w,Un.y+Un.h,P,hr,xn.x,xn.y,Vn,Bn),fm(h.dynamicLayoutVertexArray,fe,Fi),lt.emplaceBack(Qr,Qr+1,Qr+2),lt.emplaceBack(Qr+1,Qr+2,Qr+3),Kt.vertexLength+=4,Kt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dn[0]),Li!==A.length-1&&nr===A[Li+1].sectionIndex||h.programConfigurations.populatePaintArrays(ht.length,Y,Y.index,{},tt,gi&&gi[nr])}h.placedSymbolArray.emplaceBack(fe.x,fe.y,Wt,this.glyphOffsetArray.length-Wt,vi,be,Re,fe.segment,P?P[0]:0,P?P[1]:0,N[0],N[1],re,0,!1,0,Ve)}_addCollisionDebugVertex(h,A,P,N,q,Y){return A.emplaceBack(0,0),h.emplaceBack(P.x,P.y,N,q,Math.round(Y.x),Math.round(Y.y))}addCollisionDebugVertices(h,A,P,N,q,Y,re){const fe=q.segments.prepareSegment(4,q.layoutVertexArray,q.indexArray),be=fe.vertexLength,Re=q.layoutVertexArray,Ve=q.collisionVertexArray,tt=re.anchorX,lt=re.anchorY;this._addCollisionDebugVertex(Re,Ve,Y,tt,lt,new nt(h,A)),this._addCollisionDebugVertex(Re,Ve,Y,tt,lt,new nt(P,A)),this._addCollisionDebugVertex(Re,Ve,Y,tt,lt,new nt(P,N)),this._addCollisionDebugVertex(Re,Ve,Y,tt,lt,new nt(h,N)),fe.vertexLength+=4;const ht=q.indexArray;ht.emplaceBack(be,be+1),ht.emplaceBack(be+1,be+2),ht.emplaceBack(be+2,be+3),ht.emplaceBack(be+3,be),fe.primitiveLength+=4}addDebugCollisionBoxes(h,A,P,N){for(let q=h;q<A;q++){const Y=this.collisionBoxArray.get(q);this.addCollisionDebugVertices(Y.x1,Y.y1,Y.x2,Y.y2,N?this.textCollisionBox:this.iconCollisionBox,Y.anchorPoint,P)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pm(ai,Ne.members,pi),this.iconCollisionBox=new pm(ai,Ne.members,pi);for(let h=0;h<this.symbolInstances.length;h++){const A=this.symbolInstances.get(h);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(h,A,P,N,q,Y,re,fe,be){const Re={};for(let Ve=A;Ve<P;Ve++){const tt=h.get(Ve);Re.textBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Re.textFeatureIndex=tt.featureIndex;break}for(let Ve=N;Ve<q;Ve++){const tt=h.get(Ve);Re.verticalTextBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Re.verticalTextFeatureIndex=tt.featureIndex;break}for(let Ve=Y;Ve<re;Ve++){const tt=h.get(Ve);Re.iconBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Re.iconFeatureIndex=tt.featureIndex;break}for(let Ve=fe;Ve<be;Ve++){const tt=h.get(Ve);Re.verticalIconBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Re.verticalIconFeatureIndex=tt.featureIndex;break}return Re}deserializeCollisionBoxes(h){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const P=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(h,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(h,A){const P=h.placedSymbolArray.get(A),N=P.vertexStartIndex+4*P.numGlyphs;for(let q=P.vertexStartIndex;q<N;q+=4)h.indexArray.emplaceBack(q,q+1,q+2),h.indexArray.emplaceBack(q+1,q+2,q+3)}getSortedSymbolIndexes(h){if(this.sortedAngle===h&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(h),P=Math.cos(h),N=[],q=[],Y=[];for(let re=0;re<this.symbolInstances.length;++re){Y.push(re);const fe=this.symbolInstances.get(re);N.push(0|Math.round(A*fe.anchorX+P*fe.anchorY)),q.push(fe.featureIndex)}return Y.sort((re,fe)=>N[re]-N[fe]||q[fe]-q[re]),Y}addToSortKeyRanges(h,A){const P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===A?P.symbolInstanceEnd=h+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:h,symbolInstanceEnd:h+1})}sortFeatures(h){if(this.sortFeaturesByY&&this.sortedAngle!==h&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(h),this.sortedAngle=h,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const P=this.symbolInstances.get(A);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach((N,q,Y)=>{N>=0&&Y.indexOf(N)===q&&this.addIndicesForPlacedSymbol(this.text,N)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pn("SymbolBucket",b0,{omit:["layers","collisionBoxArray","features","compareText"]}),b0.MAX_GLYPHS=65535,b0.addDynamicAttributes=fm;const ix=new Uo({"symbol-placement":new $n(Q.layout_symbol["symbol-placement"]),"symbol-spacing":new $n(Q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $n(Q.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ur(Q.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $n(Q.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $n(Q.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $n(Q.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $n(Q.layout_symbol["icon-ignore-placement"]),"icon-optional":new $n(Q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $n(Q.layout_symbol["icon-rotation-alignment"]),"icon-size":new ur(Q.layout_symbol["icon-size"]),"icon-text-fit":new $n(Q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $n(Q.layout_symbol["icon-text-fit-padding"]),"icon-image":new ur(Q.layout_symbol["icon-image"]),"icon-rotate":new ur(Q.layout_symbol["icon-rotate"]),"icon-padding":new ur(Q.layout_symbol["icon-padding"]),"icon-keep-upright":new $n(Q.layout_symbol["icon-keep-upright"]),"icon-offset":new ur(Q.layout_symbol["icon-offset"]),"icon-anchor":new ur(Q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $n(Q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $n(Q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $n(Q.layout_symbol["text-rotation-alignment"]),"text-field":new ur(Q.layout_symbol["text-field"]),"text-font":new ur(Q.layout_symbol["text-font"]),"text-size":new ur(Q.layout_symbol["text-size"]),"text-max-width":new ur(Q.layout_symbol["text-max-width"]),"text-line-height":new $n(Q.layout_symbol["text-line-height"]),"text-letter-spacing":new ur(Q.layout_symbol["text-letter-spacing"]),"text-justify":new ur(Q.layout_symbol["text-justify"]),"text-radial-offset":new ur(Q.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $n(Q.layout_symbol["text-variable-anchor"]),"text-anchor":new ur(Q.layout_symbol["text-anchor"]),"text-max-angle":new $n(Q.layout_symbol["text-max-angle"]),"text-writing-mode":new $n(Q.layout_symbol["text-writing-mode"]),"text-rotate":new ur(Q.layout_symbol["text-rotate"]),"text-padding":new $n(Q.layout_symbol["text-padding"]),"text-keep-upright":new $n(Q.layout_symbol["text-keep-upright"]),"text-transform":new ur(Q.layout_symbol["text-transform"]),"text-offset":new ur(Q.layout_symbol["text-offset"]),"text-allow-overlap":new $n(Q.layout_symbol["text-allow-overlap"]),"text-overlap":new $n(Q.layout_symbol["text-overlap"]),"text-ignore-placement":new $n(Q.layout_symbol["text-ignore-placement"]),"text-optional":new $n(Q.layout_symbol["text-optional"])});var mm={paint:new Uo({"icon-opacity":new ur(Q.paint_symbol["icon-opacity"]),"icon-color":new ur(Q.paint_symbol["icon-color"]),"icon-halo-color":new ur(Q.paint_symbol["icon-halo-color"]),"icon-halo-width":new ur(Q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ur(Q.paint_symbol["icon-halo-blur"]),"icon-translate":new $n(Q.paint_symbol["icon-translate"]),"icon-translate-anchor":new $n(Q.paint_symbol["icon-translate-anchor"]),"text-opacity":new ur(Q.paint_symbol["text-opacity"]),"text-color":new ur(Q.paint_symbol["text-color"],{runtimeType:Gn,getOverride:y=>y.textColor,hasOverride:y=>!!y.textColor}),"text-halo-color":new ur(Q.paint_symbol["text-halo-color"]),"text-halo-width":new ur(Q.paint_symbol["text-halo-width"]),"text-halo-blur":new ur(Q.paint_symbol["text-halo-blur"]),"text-translate":new $n(Q.paint_symbol["text-translate"]),"text-translate-anchor":new $n(Q.paint_symbol["text-translate-anchor"])}),layout:ix};class vy{constructor(h){if(h.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=h.property.overrides?h.property.overrides.runtimeType:hn,this.defaultValue=h}evaluate(h){if(h.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(h.formattedSection))return A.getOverride(h.formattedSection)}return h.feature&&h.featureState?this.defaultValue.evaluate(h.feature,h.featureState):this.defaultValue.property.specification.default}eachChild(h){this.defaultValue.isConstant()||h(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pn("FormatSectionOverride",vy,{omit:["defaultValue"]});class Ip extends cl{constructor(h){super(h,mm)}recalculate(h,A){if(super.recalculate(h,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const P=this.layout.get("text-writing-mode");if(P){const N=[];for(const q of P)N.indexOf(q)<0&&N.push(q);this.layout._values["text-writing-mode"]=N}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(h,A,P,N){const q=this.layout.get(h).evaluate(A,{},P,N),Y=this._unevaluatedLayout._values[h];return Y.isDataDriven()||Oo(Y.value)||!q?q:function(re,fe){return fe.replace(/{([^{}]+)}/g,(be,Re)=>Re in re?String(re[Re]):"")}(A.properties,q)}createBucket(h){return new b0(h)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const h of mm.paint.overridableProperties){if(!Ip.hasPaintOverride(this.layout,h))continue;const A=this.paint.get(h),P=new vy(A),N=new to(P,A.property.specification);let q=null;q=A.value.kind==="constant"||A.value.kind==="source"?new Ho("source",N):new Ss("composite",N,A.value.zoomStops),this.paint._values[h]=new ul(A.property,q,A.parameters)}}_handleOverridablePaintPropertyUpdate(h,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&Ip.hasPaintOverride(this.layout,h)}static hasPaintOverride(h,A){const P=h.get("text-field"),N=mm.paint.properties[A];let q=!1;const Y=re=>{for(const fe of re)if(N.overrides&&N.overrides.hasOverride(fe))return void(q=!0)};if(P.value.kind==="constant"&&P.value.value instanceof Zt)Y(P.value.value.sections);else if(P.value.kind==="source"){const re=be=>{q||(be instanceof An&&Ii(be.value)===yn?Y(be.value.sections):be instanceof pu?Y(be.sections):be.eachChild(re))},fe=P.value;fe._styleExpression&&re(fe._styleExpression.expression)}return q}}function gm(y,h,A){let P="never";const N=y.get(h);return N?P=N:y.get(A)&&(P="always"),P}var nx={paint:new Uo({"background-color":new $n(Q.paint_background["background-color"]),"background-pattern":new ac(Q.paint_background["background-pattern"]),"background-opacity":new $n(Q.paint_background["background-opacity"])})},rx={paint:new Uo({"raster-opacity":new $n(Q.paint_raster["raster-opacity"]),"raster-hue-rotate":new $n(Q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $n(Q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $n(Q.paint_raster["raster-brightness-max"]),"raster-saturation":new $n(Q.paint_raster["raster-saturation"]),"raster-contrast":new $n(Q.paint_raster["raster-contrast"]),"raster-resampling":new $n(Q.paint_raster["raster-resampling"]),"raster-fade-duration":new $n(Q.paint_raster["raster-fade-duration"])})};class ox extends cl{constructor(h){super(h,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=h}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const sx={circle:class extends cl{constructor(y){super(y,Nc)}createBucket(y){return new rs(y)}queryRadius(y){const h=y;return Bc("circle-radius",this,h)+Bc("circle-stroke-width",this,h)+fc(this.paint.get("circle-translate"))}queryIntersectsFeature(y,h,A,P,N,q,Y,re){const fe=zc(y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,Y),be=this.paint.get("circle-radius").evaluate(h,A)+this.paint.get("circle-stroke-width").evaluate(h,A),Re=this.paint.get("circle-pitch-alignment")==="map",Ve=Re?fe:function(lt,ht){return lt.map(Kt=>dh(Kt,ht))}(fe,re),tt=Re?be*Y:be;for(const lt of P)for(const ht of lt){const Kt=Re?ht:dh(ht,re);let Wt=tt;const vi=jc([],[ht.x,ht.y,0,1],re);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Wt*=vi[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Wt*=q.cameraToCenterDistance/vi[3]),s0(Ve,Kt,Wt))return!0}return!1}},heatmap:class extends cl{constructor(y){super(y,ph),this._updateColorRamp()}createBucket(y){return new Nh(y)}_handleSpecialPaintPropertyUpdate(y){y==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$l({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends cl{constructor(y){super(y,c0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends cl{constructor(y){super(y,fp)}recalculate(y,h){super.recalculate(y,h);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(y){return new fd(y)}queryRadius(){return fc(this.paint.get("fill-translate"))}queryIntersectsFeature(y,h,A,P,N,q,Y){return yf(zc(y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,Y),P)}isTileClipped(){return!0}},"fill-extrusion":class extends cl{constructor(y){super(y,om)}createBucket(y){return new If(y)}queryRadius(){return fc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(y,h,A,P,N,q,Y,re){const fe=zc(y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,Y),be=this.paint.get("fill-extrusion-height").evaluate(h,A),Re=this.paint.get("fill-extrusion-base").evaluate(h,A),Ve=function(lt,ht,Kt,Wt){const vi=[];for(const Fi of lt){const gi=[Fi.x,Fi.y,0,1];jc(gi,gi,ht),vi.push(new nt(gi[0]/gi[3],gi[1]/gi[3]))}return vi}(fe,re),tt=function(lt,ht,Kt,Wt){const vi=[],Fi=[],gi=Wt[8]*ht,Li=Wt[9]*ht,Qi=Wt[10]*ht,Ji=Wt[11]*ht,Zn=Wt[8]*Kt,er=Wt[9]*Kt,Un=Wt[10]*Kt,Mn=Wt[11]*Kt;for(const xn of lt){const Vn=[],Bn=[];for(const dn of xn){const hr=dn.x,nr=dn.y,Qr=Wt[0]*hr+Wt[4]*nr+Wt[12],os=Wt[1]*hr+Wt[5]*nr+Wt[13],ls=Wt[2]*hr+Wt[6]*nr+Wt[14],$s=Wt[3]*hr+Wt[7]*nr+Wt[15],Eu=ls+Qi,Ra=$s+Ji,Gs=Qr+Zn,ca=os+er,Ba=ls+Un,Ka=$s+Mn,Pl=new nt((Qr+gi)/Ra,(os+Li)/Ra);Pl.z=Eu/Ra,Vn.push(Pl);const Ws=new nt(Gs/Ka,ca/Ka);Ws.z=Ba/Ka,Bn.push(Ws)}vi.push(Vn),Fi.push(Bn)}return[vi,Fi]}(P,Re,be,re);return function(lt,ht,Kt){let Wt=1/0;yf(Kt,ht)&&(Wt=yp(Kt,ht[0]));for(let vi=0;vi<ht.length;vi++){const Fi=ht[vi],gi=lt[vi];for(let Li=0;Li<Fi.length-1;Li++){const Qi=Fi[Li],Ji=[Qi,Fi[Li+1],gi[Li+1],gi[Li],Qi];Rh(Kt,Ji)&&(Wt=Math.min(Wt,yp(Kt,Ji)))}}return Wt!==1/0&&Wt}(tt[0],tt[1],Ve)}},line:class extends cl{constructor(y){super(y,R),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(y){y==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof pa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(y,h){super.recalculate(y,h),this.paint._values["line-floorwidth"]=W.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,y)}createBucket(y){return new E(y)}queryRadius(y){const h=y,A=H(Bc("line-width",this,h),Bc("line-gap-width",this,h)),P=Bc("line-offset",this,h);return A/2+Math.abs(P)+fc(this.paint.get("line-translate"))}queryIntersectsFeature(y,h,A,P,N,q,Y){const re=zc(y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,Y),fe=Y/2*H(this.paint.get("line-width").evaluate(h,A),this.paint.get("line-gap-width").evaluate(h,A)),be=this.paint.get("line-offset").evaluate(h,A);return be&&(P=function(Re,Ve){const tt=[];for(let lt=0;lt<Re.length;lt++){const ht=Re[lt],Kt=[];for(let Wt=0;Wt<ht.length;Wt++){const vi=ht[Wt-1],Fi=ht[Wt],gi=ht[Wt+1],Li=Wt===0?new nt(0,0):Fi.sub(vi)._unit()._perp(),Qi=Wt===ht.length-1?new nt(0,0):gi.sub(Fi)._unit()._perp(),Ji=Li._add(Qi)._unit(),Zn=Ji.x*Qi.x+Ji.y*Qi.y;Zn!==0&&Ji._mult(1/Zn),Kt.push(Ji._mult(Ve)._add(Fi))}tt.push(Kt)}return tt}(P,be*Y)),function(Re,Ve,tt){for(let lt=0;lt<Ve.length;lt++){const ht=Ve[lt];if(Re.length>=3){for(let Kt=0;Kt<ht.length;Kt++)if(hc(Re,ht[Kt]))return!0}if(lc(Re,ht,tt))return!0}return!1}(re,P,fe)}isTileClipped(){return!0}},symbol:Ip,background:class extends cl{constructor(y){super(y,nx)}},raster:class extends cl{constructor(y){super(y,rx)}}};class ax{constructor(h){this._callback=h,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const by=63710088e-1;class Ls{constructor(h,A){if(isNaN(h)||isNaN(A))throw new Error(`Invalid LngLat object: (${h}, ${A})`);if(this.lng=+h,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ls(v(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(h){const A=Math.PI/180,P=this.lat*A,N=h.lat*A,q=Math.sin(P)*Math.sin(N)+Math.cos(P)*Math.cos(N)*Math.cos((h.lng-this.lng)*A);return by*Math.acos(Math.min(q,1))}toBounds(h=0){const A=360*h/40075017,P=A/Math.cos(Math.PI/180*this.lat);return new Lf(new Ls(this.lng-P,this.lat-A),new Ls(this.lng+P,this.lat+A))}static convert(h){if(h instanceof Ls)return h;if(Array.isArray(h)&&(h.length===2||h.length===3))return new Ls(Number(h[0]),Number(h[1]));if(!Array.isArray(h)&&typeof h=="object"&&h!==null)return new Ls(Number("lng"in h?h.lng:h.lon),Number(h.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Lf{constructor(h,A){h&&(A?this.setSouthWest(h).setNorthEast(A):h.length===4?this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]]):this.setSouthWest(h[0]).setNorthEast(h[1]))}setNorthEast(h){return this._ne=h instanceof Ls?new Ls(h.lng,h.lat):Ls.convert(h),this}setSouthWest(h){return this._sw=h instanceof Ls?new Ls(h.lng,h.lat):Ls.convert(h),this}extend(h){const A=this._sw,P=this._ne;let N,q;if(h instanceof Ls)N=h,q=h;else{if(!(h instanceof Lf))return Array.isArray(h)?h.length===4||h.every(Array.isArray)?this.extend(Lf.convert(h)):this.extend(Ls.convert(h)):this;if(N=h._sw,q=h._ne,!N||!q)return this}return A||P?(A.lng=Math.min(N.lng,A.lng),A.lat=Math.min(N.lat,A.lat),P.lng=Math.max(q.lng,P.lng),P.lat=Math.max(q.lat,P.lat)):(this._sw=new Ls(N.lng,N.lat),this._ne=new Ls(q.lng,q.lat)),this}getCenter(){return new Ls((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ls(this.getWest(),this.getNorth())}getSouthEast(){return new Ls(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(h){const{lng:A,lat:P}=Ls.convert(h);let N=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(N=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=P&&P<=this._ne.lat&&N}static convert(h){return h instanceof Lf?h:h&&new Lf(h)}}const wy=2*Math.PI*by;function xy(y){return wy*Math.cos(y*Math.PI/180)}function Ay(y){return(180+y)/360}function ky(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function Sy(y,h){return y/xy(h)}function ym(y){return 360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90}class Tp{constructor(h,A,P=0){this.x=+h,this.y=+A,this.z=+P}static fromLngLat(h,A=0){const P=Ls.convert(h);return new Tp(Ay(P.lng),ky(P.lat),Sy(A,P.lat))}toLngLat(){return new Ls(360*this.x-180,ym(this.y))}toAltitude(){return this.z*xy(ym(this.y))}meterInMercatorCoordinateUnits(){return 1/wy*(h=ym(this.y),1/Math.cos(h*Math.PI/180));var h}}function Cy(y,h,A){var P=2*Math.PI*6378137/256/Math.pow(2,A);return[y*P-2*Math.PI*6378137/2,h*P-2*Math.PI*6378137/2]}class _m{constructor(h,A,P){if(h<0||h>25||P<0||P>=Math.pow(2,h)||A<0||A>=Math.pow(2,h))throw new Error(`x=${A}, y=${P}, z=${h} outside of bounds. 0<=x<${Math.pow(2,h)}, 0<=y<${Math.pow(2,h)} 0<=z<=25 `);this.z=h,this.x=A,this.y=P,this.key=md(0,h,h,A,P)}equals(h){return this.z===h.z&&this.x===h.x&&this.y===h.y}url(h,A,P){const N=(Y=this.y,re=this.z,fe=Cy(256*(q=this.x),256*(Y=Math.pow(2,re)-Y-1),re),be=Cy(256*(q+1),256*(Y+1),re),fe[0]+","+fe[1]+","+be[0]+","+be[1]);var q,Y,re,fe,be;const Re=function(Ve,tt,lt){let ht,Kt="";for(let Wt=Ve;Wt>0;Wt--)ht=1<<Wt-1,Kt+=(tt&ht?1:0)+(lt&ht?2:0);return Kt}(this.z,this.x,this.y);return h[(this.x+this.y)%h.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(P==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,Re).replace(/{bbox-epsg-3857}/g,N)}isChildOf(h){const A=this.z-h.z;return A>0&&h.x===this.x>>A&&h.y===this.y>>A}getTilePoint(h){const A=Math.pow(2,this.z);return new nt((h.x*A-this.x)*Io,(h.y*A-this.y)*Io)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ey{constructor(h,A){this.wrap=h,this.canonical=A,this.key=md(h,A.z,A.z,A.x,A.y)}}class Cu{constructor(h,A,P,N,q){if(h<P)throw new Error(`overscaledZ should be >= z; overscaledZ = ${h}; z = ${P}`);this.overscaledZ=h,this.wrap=A,this.canonical=new _m(P,+N,+q),this.key=md(A,h,P,N,q)}clone(){return new Cu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(h){return this.overscaledZ===h.overscaledZ&&this.wrap===h.wrap&&this.canonical.equals(h.canonical)}scaledTo(h){if(h>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${h}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-h;return h>this.canonical.z?new Cu(h,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cu(h,this.wrap,h,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(h,A){if(h>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${h}; overscaledZ = ${this.overscaledZ}`);const P=this.canonical.z-h;return h>this.canonical.z?md(this.wrap*+A,h,this.canonical.z,this.canonical.x,this.canonical.y):md(this.wrap*+A,h,h,this.canonical.x>>P,this.canonical.y>>P)}isChildOf(h){if(h.wrap!==this.wrap)return!1;const A=this.canonical.z-h.canonical.z;return h.overscaledZ===0||h.overscaledZ<this.overscaledZ&&h.canonical.x===this.canonical.x>>A&&h.canonical.y===this.canonical.y>>A}children(h){if(this.overscaledZ>=h)return[new Cu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,P=2*this.canonical.x,N=2*this.canonical.y;return[new Cu(A,this.wrap,A,P,N),new Cu(A,this.wrap,A,P+1,N),new Cu(A,this.wrap,A,P,N+1),new Cu(A,this.wrap,A,P+1,N+1)]}isLessThan(h){return this.wrap<h.wrap||!(this.wrap>h.wrap)&&(this.overscaledZ<h.overscaledZ||!(this.overscaledZ>h.overscaledZ)&&(this.canonical.x<h.canonical.x||!(this.canonical.x>h.canonical.x)&&this.canonical.y<h.canonical.y))}wrapped(){return new Cu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(h){return new Cu(this.overscaledZ,h,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ey(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(h){return this.canonical.getTilePoint(new Tp(h.x-this.wrap,h.y))}}function md(y,h,A,P,N){(y*=2)<0&&(y=-1*y-1);const q=1<<A;return(q*q*y+q*N+P).toString(36)+A.toString(36)+h.toString(36)}Pn("CanonicalTileID",_m),Pn("OverscaledTileID",Cu,{omit:["posMatrix"]});class Iy{constructor(h,A,P){if(this.uid=h,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(P&&P!=="mapbox"&&P!=="terrarium")return void Z(`"${P}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const N=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=P||"mapbox";for(let q=0;q<N;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(N,q)]=this.data[this._idx(N-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,N)]=this.data[this._idx(q,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<N;q++)for(let Y=0;Y<N;Y++){const re=this.get(q,Y);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(h,A){const P=new Uint8Array(this.data.buffer),N=4*this._idx(h,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(P[N],P[N+1],P[N+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(h,A){if(h<-1||h>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(h+1)}_unpackMapbox(h,A,P){return(256*h*256+256*A+P)/10-1e4}_unpackTerrarium(h,A,P){return 256*h+A+P/256-32768}getPixels(){return new wa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(h,A,P){if(this.dim!==h.dim)throw new Error("dem dimension mismatch");let N=A*this.dim,q=A*this.dim+this.dim,Y=P*this.dim,re=P*this.dim+this.dim;switch(A){case-1:N=q-1;break;case 1:q=N+1}switch(P){case-1:Y=re-1;break;case 1:re=Y+1}const fe=-A*this.dim,be=-P*this.dim;for(let Re=Y;Re<re;Re++)for(let Ve=N;Ve<q;Ve++)this.data[this._idx(Ve,Re)]=h.data[this._idx(Ve+fe,Re+be)]}}Pn("DEMData",Iy);class Ty{constructor(h){this._stringToNumber={},this._numberToString=[];for(let A=0;A<h.length;A++){const P=h[A];this._stringToNumber[P]=A,this._numberToString[A]=P}}encode(h){return this._stringToNumber[h]}decode(h){if(h>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${h} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[h]}}class Ly{constructor(h,A,P,N,q){this.type="Feature",this._vectorTileFeature=h,h._z=A,h._x=P,h._y=N,this.properties=h.properties,this.id=q}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(h){this._geometry=h}toJSON(){const h={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(h[A]=this[A]);return h}}class Py{constructor(h,A){this.tileID=h,this.x=h.canonical.x,this.y=h.canonical.y,this.z=h.canonical.z,this.grid=new Tl(Io,16,0),this.grid3D=new Tl(Io,16,0),this.featureIndexArray=new Dr,this.promoteId=A}insert(h,A,P,N,q,Y){const re=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(P,N,q);const fe=Y?this.grid3D:this.grid;for(let be=0;be<A.length;be++){const Re=A[be],Ve=[1/0,1/0,-1/0,-1/0];for(let tt=0;tt<Re.length;tt++){const lt=Re[tt];Ve[0]=Math.min(Ve[0],lt.x),Ve[1]=Math.min(Ve[1],lt.y),Ve[2]=Math.max(Ve[2],lt.x),Ve[3]=Math.max(Ve[3],lt.y)}Ve[0]<Io&&Ve[1]<Io&&Ve[2]>=0&&Ve[3]>=0&&fe.insert(re,Ve[0],Ve[1],Ve[2],Ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vc.VectorTile(new ni(this.rawTileData)).layers,this.sourceLayerCoder=new Ty(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(h,A,P,N){this.loadVTLayers();const q=h.params||{},Y=Io/h.tileSize/h.scale,re=Os(q.filter),fe=h.queryGeometry,be=h.queryPadding*Y,Re=Dy(fe),Ve=this.grid.query(Re.minX-be,Re.minY-be,Re.maxX+be,Re.maxY+be),tt=Dy(h.cameraQueryGeometry),lt=this.grid3D.query(tt.minX-be,tt.minY-be,tt.maxX+be,tt.maxY+be,(Wt,vi,Fi,gi)=>function(Li,Qi,Ji,Zn,er){for(const Mn of Li)if(Qi<=Mn.x&&Ji<=Mn.y&&Zn>=Mn.x&&er>=Mn.y)return!0;const Un=[new nt(Qi,Ji),new nt(Qi,er),new nt(Zn,er),new nt(Zn,Ji)];if(Li.length>2){for(const Mn of Un)if(hc(Li,Mn))return!0}for(let Mn=0;Mn<Li.length-1;Mn++)if(zh(Li[Mn],Li[Mn+1],Un))return!0;return!1}(h.cameraQueryGeometry,Wt-be,vi-be,Fi+be,gi+be));for(const Wt of lt)Ve.push(Wt);Ve.sort(lx);const ht={};let Kt;for(let Wt=0;Wt<Ve.length;Wt++){const vi=Ve[Wt];if(vi===Kt)continue;Kt=vi;const Fi=this.featureIndexArray.get(vi);let gi=null;this.loadMatchingFeature(ht,Fi.bucketIndex,Fi.sourceLayerIndex,Fi.featureIndex,re,q.layers,q.availableImages,A,P,N,(Li,Qi,Ji)=>(gi||(gi=Xa(Li)),Qi.queryIntersectsFeature(fe,Li,Ji,gi,this.z,h.transform,Y,h.pixelPosMatrix)))}return ht}loadMatchingFeature(h,A,P,N,q,Y,re,fe,be,Re,Ve){const tt=this.bucketLayerIDs[A];if(Y&&!function(Wt,vi){for(let Fi=0;Fi<Wt.length;Fi++)if(vi.indexOf(Wt[Fi])>=0)return!0;return!1}(Y,tt))return;const lt=this.sourceLayerCoder.decode(P),ht=this.vtLayers[lt].feature(N);if(q.needGeometry){const Wt=hl(ht,!0);if(!q.filter(new Ro(this.tileID.overscaledZ),Wt,this.tileID.canonical))return}else if(!q.filter(new Ro(this.tileID.overscaledZ),ht))return;const Kt=this.getId(ht,lt);for(let Wt=0;Wt<tt.length;Wt++){const vi=tt[Wt];if(Y&&Y.indexOf(vi)<0)continue;const Fi=fe[vi];if(!Fi)continue;let gi={};Kt&&Re&&(gi=Re.getState(Fi.sourceLayer||"_geojsonTileLayer",Kt));const Li=C({},be[vi]);Li.paint=My(Li.paint,Fi.paint,ht,gi,re),Li.layout=My(Li.layout,Fi.layout,ht,gi,re);const Qi=!Ve||Ve(ht,Fi,gi);if(!Qi)continue;const Ji=new Ly(ht,this.z,this.x,this.y,Kt);Ji.layer=Li;let Zn=h[vi];Zn===void 0&&(Zn=h[vi]=[]),Zn.push({featureIndex:N,feature:Ji,intersectionZ:Qi})}}lookupSymbolFeatures(h,A,P,N,q,Y,re,fe){const be={};this.loadVTLayers();const Re=Os(q);for(const Ve of h)this.loadMatchingFeature(be,P,N,Ve,Re,Y,re,fe,A);return be}hasLayer(h){for(const A of this.bucketLayerIDs)for(const P of A)if(h===P)return!0;return!1}getId(h,A){let P=h.id;return this.promoteId&&(P=h.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof P=="boolean"&&(P=Number(P))),P}}function My(y,h,A,P,N){return M(y,(q,Y)=>{const re=h instanceof sc?h.get(Y):null;return re&&re.evaluate?re.evaluate(A,P,N):re})}function Dy(y){let h=1/0,A=1/0,P=-1/0,N=-1/0;for(const q of y)h=Math.min(h,q.x),A=Math.min(A,q.y),P=Math.max(P,q.x),N=Math.max(N,q.y);return{minX:h,minY:A,maxX:P,maxY:N}}function lx(y,h){return h-y}var vm;Pn("FeatureIndex",Py,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(vm=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",vm.load="load",vm.fullLoad="fullLoad";let Lp=null,gd=[];const bm=1e3/30,ux={mark(y){performance.mark(y)},frame(y){const h=y;Lp!=null&&gd.push(h-Lp),Lp=h},clearMetrics(){Lp=null,gd=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const y in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[y])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const y=performance.getEntriesByName("loadTime")[0].duration,h=performance.getEntriesByName("fullLoadTime")[0].duration,A=gd.length,P=1/(gd.reduce((q,Y)=>q+Y,0)/A/1e3),N=gd.filter(q=>q>bm).reduce((q,Y)=>q+(Y-bm)/bm,0);return{loadTime:y,fullLoadTime:h,fps:P,percentDroppedFrames:N/(A+N)*100}}};r.AJAXError=ut,r.ARRAY_TYPE=Qs,r.Actor=class{constructor(y,h,A){this.target=y,this.parent=h,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new ax(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=oe()?y:window}send(y,h,A,P,N=!1){const q=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[q]=A);const Y=Se(this.globalScope)?void 0:[];return this.target.postMessage({id:q,type:y,hasCallback:!!A,targetMapId:P,mustQueue:N,sourceMapId:this.mapId,data:Hr(h,Y)},Y),{cancel:()=>{A&&delete this.callbacks[q],this.target.postMessage({id:q,type:"<cancel>",targetMapId:P,sourceMapId:this.mapId})}}}receive(y){const h=y.data,A=h.id;if(A&&(!h.targetMapId||this.mapId===h.targetMapId))if(h.type==="<cancel>"){delete this.tasks[A];const P=this.cancelCallbacks[A];delete this.cancelCallbacks[A],P&&P()}else oe()||h.mustQueue?(this.tasks[A]=h,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,h)}process(){if(!this.taskQueue.length)return;const y=this.taskQueue.shift(),h=this.tasks[y];delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),h&&this.processTask(y,h)}processTask(y,h){if(h.type==="<response>"){const A=this.callbacks[y];delete this.callbacks[y],A&&(h.error?A(Co(h.error)):A(null,Co(h.data)))}else{let A=!1;const P=Se(this.globalScope)?void 0:[],N=h.hasCallback?(re,fe)=>{A=!0,delete this.cancelCallbacks[y],this.target.postMessage({id:y,type:"<response>",sourceMapId:this.mapId,error:re?Hr(re):null,data:Hr(fe,P)},P)}:re=>{A=!0};let q=null;const Y=Co(h.data);if(this.parent[h.type])q=this.parent[h.type](h.sourceMapId,Y,N);else if(this.parent.getWorkerSource){const re=h.type.split(".");q=this.parent.getWorkerSource(h.sourceMapId,re[0],Y.source)[re[1]](Y,N)}else N(new Error(`Could not find function ${h.type}`));!A&&q&&q.cancel&&(this.cancelCallbacks[y]=q.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=pc,r.CanonicalTileID=_m,r.CollisionBoxArray=Vi,r.CollisionCircleLayoutArray=class extends ze{},r.Color=dt,r.DEMData=Iy,r.DataConstantProperty=$n,r.DictionaryCoder=Ty,r.EXTENT=Io,r.ErrorEvent=ti,r.EvaluationParameters=Ro,r.Event=Ci,r.Evented=Pe,r.FeatureIndex=Py,r.FillBucket=fd,r.FillExtrusionBucket=If,r.GeoJSONFeature=Ly,r.ImageAtlas=ty,r.ImagePosition=am,r.LineBucket=E,r.LineStripIndexArray=class extends Vt{},r.LngLat=Ls,r.LngLatBounds=Lf,r.MercatorCoordinate=Tp,r.ONE_EM=Ot,r.OverscaledTileID=Cu,r.PerformanceUtils=ux,r.PosArray=j,r.Properties=Uo,r.QuadTriangleArray=class extends ot{},r.RGBAImage=wa,r.RasterBoundsArray=class extends B{},r.RequestPerformance=class{constructor(y){this._marks={start:[y.url,"start"].join("#"),end:[y.url,"end"].join("#"),measure:y.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let y=performance.getEntriesByName(this._marks.measure);return y.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),y=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),y}},r.ResourceType=ri,r.SegmentVector=Xt,r.SymbolBucket=b0,r.Transitionable=Rc,r.TriangleIndexArray=wi,r.Uniform1f=po,r.Uniform1i=class extends qr{constructor(y,h){super(y,h),this.current=0}set(y){this.current!==y&&(this.current=y,this.gl.uniform1i(this.location,y))}},r.Uniform2f=class extends qr{constructor(y,h){super(y,h),this.current=[0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]||(this.current=y,this.gl.uniform2f(this.location,y[0],y[1]))}},r.Uniform3f=class extends qr{constructor(y,h){super(y,h),this.current=[0,0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]||(this.current=y,this.gl.uniform3f(this.location,y[0],y[1],y[2]))}},r.Uniform4f=xo,r.UniformColor=Gr,r.UniformMatrix4f=class extends qr{constructor(y,h){super(y,h),this.current=Es}set(y){if(y[12]!==this.current[12]||y[0]!==this.current[0])return this.current=y,void this.gl.uniformMatrix4fv(this.location,!1,y);for(let h=1;h<16;h++)if(y[h]!==this.current[h]){this.current=y,this.gl.uniformMatrix4fv(this.location,!1,y);break}}},r.UnwrappedTileID=Ey,r.ValidationError=ae,r.ZoomHistory=ts,r.add=function(y,h,A){return y[0]=h[0]+A[0],y[1]=h[1]+A[1],y[2]=h[2]+A[2],y},r.addDynamicAttributes=fm,r.asyncAll=function(y,h,A){if(!y.length)return A(null,[]);let P=y.length;const N=new Array(y.length);let q=null;y.forEach((Y,re)=>{h(Y,(fe,be)=>{fe&&(q=fe),N[re]=be,--P==0&&A(q,N)})})},r.bezier=w,r.bindAll=S,r.cacheEntryPossiblyAdded=function(y){ge++,ge>Ce&&(y.getActor().send("enforceCacheSizeLimit",le),ge=0)},r.clamp=x,r.clearTileCache=function(y){const h=caches.delete(we);y&&h.catch(y).then(()=>y())},r.clipLine=dy,r.clone=function(y){var h=new Qs(16);return h[0]=y[0],h[1]=y[1],h[2]=y[2],h[3]=y[3],h[4]=y[4],h[5]=y[5],h[6]=y[6],h[7]=y[7],h[8]=y[8],h[9]=y[9],h[10]=y[10],h[11]=y[11],h[12]=y[12],h[13]=y[13],h[14]=y[14],h[15]=y[15],h},r.clone$1=V,r.clone$2=function(y){var h=new Qs(3);return h[0]=y[0],h[1]=y[1],h[2]=y[2],h},r.collisionCircleLayout=Ye,r.config=it,r.copy=function(y,h){return y[0]=h[0],y[1]=h[1],y[2]=h[2],y[3]=h[3],y[4]=h[4],y[5]=h[5],y[6]=h[6],y[7]=h[7],y[8]=h[8],y[9]=h[9],y[10]=h[10],y[11]=h[11],y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15],y},r.create=function(){var y=new Qs(16);return Qs!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y},r.create$1=Ts,r.createExpression=jo,r.createFilter=Os,r.createLayout=ps,r.createStyleLayer=function(y){return y.type==="custom"?new ox(y):new sx[y.type](y)},r.cross=function(y,h,A){var P=h[0],N=h[1],q=h[2],Y=A[0],re=A[1],fe=A[2];return y[0]=N*fe-q*re,y[1]=q*Y-P*fe,y[2]=P*re-N*Y,y},r.dot=function(y,h){return y[0]*h[0]+y[1]*h[1]+y[2]*h[2]},r.dot$1=function(y,h){return y[0]*h[0]+y[1]*h[1]+y[2]*h[2]+y[3]*h[3]},r.ease=b,r.emitValidationErrors=Hs,r.enforceCacheSizeLimit=function(y){he(),ke&&ke.then(h=>{h.keys().then(A=>{for(let P=0;P<A.length-y;P++)h.delete(A[P])})})},r.equals=function(y,h){var A=y[0],P=y[1],N=y[2],q=y[3],Y=y[4],re=y[5],fe=y[6],be=y[7],Re=y[8],Ve=y[9],tt=y[10],lt=y[11],ht=y[12],Kt=y[13],Wt=y[14],vi=y[15],Fi=h[0],gi=h[1],Li=h[2],Qi=h[3],Ji=h[4],Zn=h[5],er=h[6],Un=h[7],Mn=h[8],xn=h[9],Vn=h[10],Bn=h[11],dn=h[12],hr=h[13],nr=h[14],Qr=h[15];return Math.abs(A-Fi)<=ua*Math.max(1,Math.abs(A),Math.abs(Fi))&&Math.abs(P-gi)<=ua*Math.max(1,Math.abs(P),Math.abs(gi))&&Math.abs(N-Li)<=ua*Math.max(1,Math.abs(N),Math.abs(Li))&&Math.abs(q-Qi)<=ua*Math.max(1,Math.abs(q),Math.abs(Qi))&&Math.abs(Y-Ji)<=ua*Math.max(1,Math.abs(Y),Math.abs(Ji))&&Math.abs(re-Zn)<=ua*Math.max(1,Math.abs(re),Math.abs(Zn))&&Math.abs(fe-er)<=ua*Math.max(1,Math.abs(fe),Math.abs(er))&&Math.abs(be-Un)<=ua*Math.max(1,Math.abs(be),Math.abs(Un))&&Math.abs(Re-Mn)<=ua*Math.max(1,Math.abs(Re),Math.abs(Mn))&&Math.abs(Ve-xn)<=ua*Math.max(1,Math.abs(Ve),Math.abs(xn))&&Math.abs(tt-Vn)<=ua*Math.max(1,Math.abs(tt),Math.abs(Vn))&&Math.abs(lt-Bn)<=ua*Math.max(1,Math.abs(lt),Math.abs(Bn))&&Math.abs(ht-dn)<=ua*Math.max(1,Math.abs(ht),Math.abs(dn))&&Math.abs(Kt-hr)<=ua*Math.max(1,Math.abs(Kt),Math.abs(hr))&&Math.abs(Wt-nr)<=ua*Math.max(1,Math.abs(Wt),Math.abs(nr))&&Math.abs(vi-Qr)<=ua*Math.max(1,Math.abs(vi),Math.abs(Qr))},r.evaluateSizeForFeature=function(y,{uSize:h,uSizeT:A},{lowerSize:P,upperSize:N}){return y.kind==="source"?P/yh:y.kind==="composite"?Ao(P/yh,N/yh,A):h},r.evaluateSizeForZoom=function(y,h){let A=0,P=0;if(y.kind==="constant")P=y.layoutSize;else if(y.kind!=="source"){const{interpolationType:N,minZoom:q,maxZoom:Y}=y,re=N?x(Di.interpolationFactor(N,h,q,Y),0,1):0;y.kind==="camera"?P=Ao(y.minSize,y.maxSize,re):A=re}return{uSizeT:A,uSize:P}},r.evaluateVariableOffset=gy,r.evented=wu,r.exported=et,r.exported$1=Be,r.extend=C,r.filterObject=O,r.fromRotation=function(y,h){var A=Math.sin(h),P=Math.cos(h);return y[0]=P,y[1]=A,y[2]=0,y[3]=-A,y[4]=P,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},r.fromScaling=function(y,h){return y[0]=h[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=h[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=h[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},r.getAnchorAlignment=um,r.getAnchorJustification=hm,r.getArrayBuffer=ei,r.getImage=Yt,r.getJSON=function(y,h){return Ke(C(y,{type:"json"}),h)},r.getOverlapMode=gm,r.getRTLTextPluginStatus=Xl,r.getReferrer=bt,r.getVideo=function(y,h){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){h(null,A)};for(let P=0;P<y.length;P++){const N=window.document.createElement("source");li(y[P])||(A.crossOrigin="Anonymous"),N.src=y[P],A.appendChild(N)}return{cancel:()=>{}}},r.identity=Jl,r.invert=function(y,h){var A=h[0],P=h[1],N=h[2],q=h[3],Y=h[4],re=h[5],fe=h[6],be=h[7],Re=h[8],Ve=h[9],tt=h[10],lt=h[11],ht=h[12],Kt=h[13],Wt=h[14],vi=h[15],Fi=A*re-P*Y,gi=A*fe-N*Y,Li=A*be-q*Y,Qi=P*fe-N*re,Ji=P*be-q*re,Zn=N*be-q*fe,er=Re*Kt-Ve*ht,Un=Re*Wt-tt*ht,Mn=Re*vi-lt*ht,xn=Ve*Wt-tt*Kt,Vn=Ve*vi-lt*Kt,Bn=tt*vi-lt*Wt,dn=Fi*Bn-gi*Vn+Li*xn+Qi*Mn-Ji*Un+Zn*er;return dn?(y[0]=(re*Bn-fe*Vn+be*xn)*(dn=1/dn),y[1]=(N*Vn-P*Bn-q*xn)*dn,y[2]=(Kt*Zn-Wt*Ji+vi*Qi)*dn,y[3]=(tt*Ji-Ve*Zn-lt*Qi)*dn,y[4]=(fe*Mn-Y*Bn-be*Un)*dn,y[5]=(A*Bn-N*Mn+q*Un)*dn,y[6]=(Wt*Li-ht*Zn-vi*gi)*dn,y[7]=(Re*Zn-tt*Li+lt*gi)*dn,y[8]=(Y*Vn-re*Mn+be*er)*dn,y[9]=(P*Mn-A*Vn-q*er)*dn,y[10]=(ht*Ji-Kt*Li+vi*Fi)*dn,y[11]=(Ve*Li-Re*Ji-lt*Fi)*dn,y[12]=(re*Un-Y*xn-fe*er)*dn,y[13]=(A*xn-P*Un+N*er)*dn,y[14]=(Kt*gi-ht*Qi-Wt*Fi)*dn,y[15]=(Re*Qi-Ve*gi+tt*Fi)*dn,y):null},r.isImageBitmap=me,r.isSafari=Se,r.isWorker=oe,r.keysDifference=function(y,h){const A=[];for(const P in y)P in h||A.push(P);return A},r.lazyLoadRTLTextPlugin=function(){va.isLoading()||va.isLoaded()||Xl()!=="deferred"||no()},r.makeRequest=Ke,r.mapObject=M,r.mercatorXfromLng=Ay,r.mercatorYfromLat=ky,r.mercatorZfromAltitude=Sy,r.mul=l0,r.mul$1=function(y,h,A){return y[0]=h[0]*A[0],y[1]=h[1]*A[1],y[2]=h[2]*A[2],y[3]=h[3]*A[3],y},r.multiply=a0,r.nextPowerOfTwo=function(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))},r.normalize=function(y,h){var A=h[0],P=h[1],N=h[2],q=A*A+P*P+N*N;return q>0&&(q=1/Math.sqrt(q)),y[0]=h[0]*q,y[1]=h[1]*q,y[2]=h[2]*q,y},r.number=Ao,r.ortho=function(y,h,A,P,N,q,Y){var re=1/(h-A),fe=1/(P-N),be=1/(q-Y);return y[0]=-2*re,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*fe,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*be,y[11]=0,y[12]=(h+A)*re,y[13]=(N+P)*fe,y[14]=(Y+q)*be,y[15]=1,y},r.parseCacheControl=Me,r.parseGlyphPbf=function(y){return new ni(y).readFields(z3,[])},r.pbf=ni,r.performSymbolLayout=function(y){y.bucket.createArrays(),y.bucket.tilePixelRatio=Io/(512*y.bucket.overscaling),y.bucket.compareText={},y.bucket.iconsNeedLinear=!1;const h=y.bucket.layers[0].layout,A=y.bucket.layers[0]._unevaluatedLayout._values,P={layoutIconSize:A["icon-size"].possiblyEvaluate(new Ro(y.bucket.zoom+1),y.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Ro(y.bucket.zoom+1),y.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Ro(18))};if(y.bucket.textSizeData.kind==="composite"){const{minZoom:fe,maxZoom:be}=y.bucket.textSizeData;P.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Ro(fe),y.canonical),A["text-size"].possiblyEvaluate(new Ro(be),y.canonical)]}if(y.bucket.iconSizeData.kind==="composite"){const{minZoom:fe,maxZoom:be}=y.bucket.iconSizeData;P.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Ro(fe),y.canonical),A["icon-size"].possiblyEvaluate(new Ro(be),y.canonical)]}const N=h.get("text-line-height")*Ot,q=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",Y=h.get("text-keep-upright"),re=h.get("text-size");for(const fe of y.bucket.features){const be=h.get("text-font").evaluate(fe,{},y.canonical).join(","),Re=re.evaluate(fe,{},y.canonical),Ve=P.layoutTextSize.evaluate(fe,{},y.canonical),tt=P.layoutIconSize.evaluate(fe,{},y.canonical),lt={horizontal:{},vertical:void 0},ht=fe.text;let Kt,Wt=[0,0];if(ht){const gi=ht.toString(),Li=h.get("text-letter-spacing").evaluate(fe,{},y.canonical)*Ot,Qi=ju(gi)?Li:0,Ji=h.get("text-anchor").evaluate(fe,{},y.canonical),Zn=h.get("text-variable-anchor");if(!Zn){const Vn=h.get("text-radial-offset").evaluate(fe,{},y.canonical);Wt=Vn?gy(Ji,[Vn*Ot,cm]):h.get("text-offset").evaluate(fe,{},y.canonical).map(Bn=>Bn*Ot)}let er=q?"center":h.get("text-justify").evaluate(fe,{},y.canonical);const Un=h.get("symbol-placement"),Mn=Un==="point"?h.get("text-max-width").evaluate(fe,{},y.canonical)*Ot:0,xn=()=>{y.bucket.allowVerticalPlacement&&Fa(gi)&&(lt.vertical=wp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,be,Mn,N,Ji,"left",Qi,Wt,r.WritingMode.vertical,!0,Un,Ve,Re))};if(!q&&Zn){const Vn=er==="auto"?Zn.map(dn=>hm(dn)):[er];let Bn=!1;for(let dn=0;dn<Vn.length;dn++){const hr=Vn[dn];if(!lt.horizontal[hr])if(Bn)lt.horizontal[hr]=lt.horizontal[0];else{const nr=wp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,be,Mn,N,"center",hr,Qi,Wt,r.WritingMode.horizontal,!1,Un,Ve,Re);nr&&(lt.horizontal[hr]=nr,Bn=nr.positionedLines.length===1)}}xn()}else{er==="auto"&&(er=hm(Ji));const Vn=wp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,be,Mn,N,Ji,er,Qi,Wt,r.WritingMode.horizontal,!1,Un,Ve,Re);Vn&&(lt.horizontal[er]=Vn),xn(),Fa(gi)&&q&&Y&&(lt.vertical=wp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,be,Mn,N,Ji,er,Qi,Wt,r.WritingMode.vertical,!1,Un,Ve,Re))}}let vi=!1;if(fe.icon&&fe.icon.name){const gi=y.imageMap[fe.icon.name];gi&&(Kt=H3(y.imagePositions[fe.icon.name],h.get("icon-offset").evaluate(fe,{},y.canonical),h.get("icon-anchor").evaluate(fe,{},y.canonical)),vi=!!gi.sdf,y.bucket.sdfIcons===void 0?y.bucket.sdfIcons=vi:y.bucket.sdfIcons!==vi&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gi.pixelRatio!==y.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(y.bucket.iconsNeedLinear=!0))}const Fi=_y(lt.horizontal)||lt.vertical;y.bucket.iconsInText=!!Fi&&Fi.iconsInText,(Fi||Kt)&&J3(y.bucket,fe,lt,Kt,y.imageMap,P,Ve,tt,Wt,vi,y.canonical)}y.showCollisionBoxes&&y.bucket.generateCollisionDebugBuffers()},r.perspective=function(y,h,A,P,N){var q,Y=1/Math.tan(h/2);return y[0]=Y/A,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=Y,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,N!=null&&N!==1/0?(y[10]=(N+P)*(q=1/(P-N)),y[14]=2*N*P*q):(y[10]=-1,y[14]=-2*P),y},r.pick=function(y,h){const A={};for(let P=0;P<h.length;P++){const N=h[P];N in y&&(A[N]=y[N])}return A},r.plugin=va,r.pointGeometry=nt,r.polygonIntersectsPolygon=Rh,r.potpack=ey,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Pn,r.registerForPluginStateChange=function(y){return y({pluginStatus:Go,pluginURL:Ga}),wu.on("pluginStateChange",y),y},r.renderColorRamp=$l,r.rotateX=function(y,h,A){var P=Math.sin(A),N=Math.cos(A),q=h[4],Y=h[5],re=h[6],fe=h[7],be=h[8],Re=h[9],Ve=h[10],tt=h[11];return h!==y&&(y[0]=h[0],y[1]=h[1],y[2]=h[2],y[3]=h[3],y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15]),y[4]=q*N+be*P,y[5]=Y*N+Re*P,y[6]=re*N+Ve*P,y[7]=fe*N+tt*P,y[8]=be*N-q*P,y[9]=Re*N-Y*P,y[10]=Ve*N-re*P,y[11]=tt*N-fe*P,y},r.rotateZ=function(y,h,A){var P=Math.sin(A),N=Math.cos(A),q=h[0],Y=h[1],re=h[2],fe=h[3],be=h[4],Re=h[5],Ve=h[6],tt=h[7];return h!==y&&(y[8]=h[8],y[9]=h[9],y[10]=h[10],y[11]=h[11],y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15]),y[0]=q*N+be*P,y[1]=Y*N+Re*P,y[2]=re*N+Ve*P,y[3]=fe*N+tt*P,y[4]=be*N-q*P,y[5]=Re*N-Y*P,y[6]=Ve*N-re*P,y[7]=tt*N-fe*P,y},r.scale=function(y,h,A){var P=A[0],N=A[1],q=A[2];return y[0]=h[0]*P,y[1]=h[1]*P,y[2]=h[2]*P,y[3]=h[3]*P,y[4]=h[4]*N,y[5]=h[5]*N,y[6]=h[6]*N,y[7]=h[7]*N,y[8]=h[8]*q,y[9]=h[9]*q,y[10]=h[10]*q,y[11]=h[11]*q,y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15],y},r.scale$1=function(y,h,A){return y[0]=h[0]*A,y[1]=h[1]*A,y[2]=h[2]*A,y},r.setCacheLimits=function(y,h){le=y,Ce=h},r.setRTLTextPlugin=function(y,h,A=!1){if(Go===Fc||Go===rc||Go===Zo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ga=et.resolveURL(y),Go=Fc,Js=h,bu(),A||no()},r.spec=Q,r.sphericalToCartesian=function([y,h,A]){return h+=90,h*=Math.PI/180,A*=Math.PI/180,{x:y*Math.cos(h)*Math.sin(A),y:y*Math.sin(h)*Math.sin(A),z:y*Math.cos(A)}},r.sqrLen=function(y){var h=y[0],A=y[1];return h*h+A*A},r.sub=function(y,h,A){return y[0]=h[0]-A[0],y[1]=h[1]-A[1],y[2]=h[2]-A[2],y},r.toEvaluationFeature=hl,r.transformMat3=function(y,h,A){var P=h[0],N=h[1],q=h[2];return y[0]=P*A[0]+N*A[3]+q*A[6],y[1]=P*A[1]+N*A[4]+q*A[7],y[2]=P*A[2]+N*A[5]+q*A[8],y},r.transformMat4=jc,r.transformMat4$1=function(y,h,A){var P=h[0],N=h[1];return y[0]=A[0]*P+A[4]*N+A[12],y[1]=A[1]*P+A[5]*N+A[13],y},r.translate=function(y,h,A){var P,N,q,Y,re,fe,be,Re,Ve,tt,lt,ht,Kt=A[0],Wt=A[1],vi=A[2];return h===y?(y[12]=h[0]*Kt+h[4]*Wt+h[8]*vi+h[12],y[13]=h[1]*Kt+h[5]*Wt+h[9]*vi+h[13],y[14]=h[2]*Kt+h[6]*Wt+h[10]*vi+h[14],y[15]=h[3]*Kt+h[7]*Wt+h[11]*vi+h[15]):(N=h[1],q=h[2],Y=h[3],re=h[4],fe=h[5],be=h[6],Re=h[7],Ve=h[8],tt=h[9],lt=h[10],ht=h[11],y[0]=P=h[0],y[1]=N,y[2]=q,y[3]=Y,y[4]=re,y[5]=fe,y[6]=be,y[7]=Re,y[8]=Ve,y[9]=tt,y[10]=lt,y[11]=ht,y[12]=P*Kt+re*Wt+Ve*vi+h[12],y[13]=N*Kt+fe*Wt+tt*vi+h[13],y[14]=q*Kt+be*Wt+lt*vi+h[14],y[15]=Y*Kt+Re*Wt+ht*vi+h[15]),y},r.triggerPluginCompletionEvent=oc,r.unicodeBlockLookup=_n,r.uniqueId=function(){return T++},r.validateCustomStyleLayer=function(y){const h=[],A=y.id;return A===void 0&&h.push({message:`layers.${A}: missing required property "id"`}),y.render===void 0&&h.push({message:`layers.${A}: missing required method "render"`}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&h.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),h},r.validateLight=Il,r.validateStyle=_a,r.vectorTile=Vc,r.warnOnce=Z,r.wrap=v}),u(["./shared"],function(r){function f(Te){const Ee=typeof Te;if(Ee==="number"||Ee==="boolean"||Ee==="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){let dt="[";for(const jt of Te)dt+=`${f(jt)},`;return`${dt}]`}const qe=Object.keys(Te).sort();let ct="{";for(let dt=0;dt<qe.length;dt++)ct+=`${JSON.stringify(qe[dt])}:${f(Te[qe[dt]])},`;return`${ct}}`}function _(Te){let Ee="";for(const qe of r.refProperties)Ee+=`/${f(Te[qe])}`;return Ee}class w{constructor(Ee){this.keyCache={},Ee&&this.replace(Ee)}replace(Ee){this._layerConfigs={},this._layers={},this.update(Ee,[])}update(Ee,qe){for(const dt of Ee){this._layerConfigs[dt.id]=dt;const jt=this._layers[dt.id]=r.createStyleLayer(dt);jt._featureFilter=r.createFilter(jt.filter),this.keyCache[dt.id]&&delete this.keyCache[dt.id]}for(const dt of qe)delete this.keyCache[dt],delete this._layerConfigs[dt],delete this._layers[dt];this.familiesBySource={};const ct=function(dt,jt){const Ge={};for(let Rt=0;Rt<dt.length;Rt++){const oi=jt&&jt[dt[Rt].id]||_(dt[Rt]);jt&&(jt[dt[Rt].id]=oi);let yt=Ge[oi];yt||(yt=Ge[oi]=[]),yt.push(dt[Rt])}const Zt=[];for(const Rt in Ge)Zt.push(Ge[Rt]);return Zt}(Object.values(this._layerConfigs),this.keyCache);for(const dt of ct){const jt=dt.map(Ri=>this._layers[Ri.id]),Ge=jt[0];if(Ge.visibility==="none")continue;const Zt=Ge.source||"";let Rt=this.familiesBySource[Zt];Rt||(Rt=this.familiesBySource[Zt]={});const oi=Ge.sourceLayer||"_geojsonTileLayer";let yt=Rt[oi];yt||(yt=Rt[oi]=[]),yt.push(jt)}}}class b{constructor(Ee){const qe={},ct=[];for(const Zt in Ee){const Rt=Ee[Zt],oi=qe[Zt]={};for(const yt in Rt){const Ri=Rt[+yt];if(!Ri||Ri.bitmap.width===0||Ri.bitmap.height===0)continue;const Ii={x:0,y:0,w:Ri.bitmap.width+2,h:Ri.bitmap.height+2};ct.push(Ii),oi[yt]={rect:Ii,metrics:Ri.metrics}}}const{w:dt,h:jt}=r.potpack(ct),Ge=new r.AlphaImage({width:dt||1,height:jt||1});for(const Zt in Ee){const Rt=Ee[Zt];for(const oi in Rt){const yt=Rt[+oi];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const Ri=qe[Zt][oi].rect;r.AlphaImage.copy(yt.bitmap,Ge,{x:0,y:0},{x:Ri.x+1,y:Ri.y+1},yt.bitmap)}}this.image=Ge,this.positions=qe}}r.register("GlyphAtlas",b);class x{constructor(Ee){this.tileID=new r.OverscaledTileID(Ee.tileID.overscaledZ,Ee.tileID.wrap,Ee.tileID.canonical.z,Ee.tileID.canonical.x,Ee.tileID.canonical.y),this.uid=Ee.uid,this.zoom=Ee.zoom,this.pixelRatio=Ee.pixelRatio,this.tileSize=Ee.tileSize,this.source=Ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ee.showCollisionBoxes,this.collectResourceTiming=!!Ee.collectResourceTiming,this.returnDependencies=!!Ee.returnDependencies,this.promoteId=Ee.promoteId}parse(Ee,qe,ct,dt,jt){this.status="parsing",this.data=Ee,this.collisionBoxArray=new r.CollisionBoxArray;const Ge=new r.DictionaryCoder(Object.keys(Ee.layers).sort()),Zt=new r.FeatureIndex(this.tileID,this.promoteId);Zt.bucketLayerIDs=[];const Rt={},oi={featureIndex:Zt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ct},yt=qe.familiesBySource[this.source];for(const sr in yt){const Cr=Ee.layers[sr];if(!Cr)continue;Cr.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${sr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mr=Ge.encode(sr),io=[];for(let Jr=0;Jr<Cr.length;Jr++){const mo=Cr.feature(Jr),Qo=Zt.getId(mo,sr);io.push({feature:mo,id:Qo,index:Jr,sourceLayerIndex:Mr})}for(const Jr of yt[sr]){const mo=Jr[0];mo.source!==this.source&&r.warnOnce(`layer.source = ${mo.source} does not equal this.source = ${this.source}`),mo.minzoom&&this.zoom<Math.floor(mo.minzoom)||mo.maxzoom&&this.zoom>=mo.maxzoom||mo.visibility!=="none"&&(v(Jr,this.zoom,ct),(Rt[mo.id]=mo.createBucket({index:Zt.bucketLayerIDs.length,layers:Jr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mr,sourceID:this.source})).populate(io,oi,this.tileID.canonical),Zt.bucketLayerIDs.push(Jr.map(Qo=>Qo.id)))}}let Ri,Ii,Sn,An;const wt=r.mapObject(oi.glyphDependencies,sr=>Object.keys(sr).map(Number));Object.keys(wt).length?dt.send("getGlyphs",{uid:this.uid,stacks:wt},(sr,Cr)=>{Ri||(Ri=sr,Ii=Cr,Pr.call(this))}):Ii={};const Tn=Object.keys(oi.iconDependencies);Tn.length?dt.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"},(sr,Cr)=>{Ri||(Ri=sr,Sn=Cr,Pr.call(this))}):Sn={};const Jn=Object.keys(oi.patternDependencies);function Pr(){if(Ri)return jt(Ri);if(Ii&&Sn&&An){const sr=new b(Ii),Cr=new r.ImageAtlas(Sn,An);for(const Mr in Rt){const io=Rt[Mr];io instanceof r.SymbolBucket?(v(io.layers,this.zoom,ct),r.performSymbolLayout({bucket:io,glyphMap:Ii,glyphPositions:sr.positions,imageMap:Sn,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):io.hasPattern&&(io instanceof r.LineBucket||io instanceof r.FillBucket||io instanceof r.FillExtrusionBucket)&&(v(io.layers,this.zoom,ct),io.addFeatures(oi,this.tileID.canonical,Cr.patternPositions))}this.status="done",jt(null,{buckets:Object.values(Rt).filter(Mr=>!Mr.isEmpty()),featureIndex:Zt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sr.image,imageAtlas:Cr,glyphMap:this.returnDependencies?Ii:null,iconMap:this.returnDependencies?Sn:null,glyphPositions:this.returnDependencies?sr.positions:null})}}Jn.length?dt.send("getImages",{icons:Jn,source:this.source,tileID:this.tileID,type:"patterns"},(sr,Cr)=>{Ri||(Ri=sr,An=Cr,Pr.call(this))}):An={},Pr.call(this)}}function v(Te,Ee,qe){const ct=new r.EvaluationParameters(Ee);for(const dt of Te)dt.recalculate(ct,qe)}function C(Te,Ee){const qe=r.getArrayBuffer(Te.request,(ct,dt,jt,Ge)=>{ct?Ee(ct):dt&&Ee(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(dt)),rawData:dt,cacheControl:jt,expires:Ge})});return()=>{qe.cancel(),Ee()}}class T{constructor(Ee,qe,ct,dt){this.actor=Ee,this.layerIndex=qe,this.availableImages=ct,this.loadVectorData=dt||C,this.loading={},this.loaded={}}loadTile(Ee,qe){const ct=Ee.uid;this.loading||(this.loading={});const dt=!!(Ee&&Ee.request&&Ee.request.collectResourceTiming)&&new r.RequestPerformance(Ee.request),jt=this.loading[ct]=new x(Ee);jt.abort=this.loadVectorData(Ee,(Ge,Zt)=>{if(delete this.loading[ct],Ge||!Zt)return jt.status="done",this.loaded[ct]=jt,qe(Ge);const Rt=Zt.rawData,oi={};Zt.expires&&(oi.expires=Zt.expires),Zt.cacheControl&&(oi.cacheControl=Zt.cacheControl);const yt={};if(dt){const Ri=dt.finish();Ri&&(yt.resourceTiming=JSON.parse(JSON.stringify(Ri)))}jt.vectorTile=Zt.vectorTile,jt.parse(Zt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ri,Ii)=>{if(Ri||!Ii)return qe(Ri);qe(null,r.extend({rawTileData:Rt.slice(0)},Ii,oi,yt))}),this.loaded=this.loaded||{},this.loaded[ct]=jt})}reloadTile(Ee,qe){const ct=this.loaded,dt=Ee.uid,jt=this;if(ct&&ct[dt]){const Ge=ct[dt];Ge.showCollisionBoxes=Ee.showCollisionBoxes;const Zt=(Rt,oi)=>{const yt=Ge.reloadCallback;yt&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,jt.layerIndex,this.availableImages,jt.actor,yt)),qe(Rt,oi)};Ge.status==="parsing"?Ge.reloadCallback=Zt:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,Zt):Zt())}}abortTile(Ee,qe){const ct=this.loading,dt=Ee.uid;ct&&ct[dt]&&ct[dt].abort&&(ct[dt].abort(),delete ct[dt]),qe()}removeTile(Ee,qe){const ct=this.loaded,dt=Ee.uid;ct&&ct[dt]&&delete ct[dt],qe()}}class S{constructor(){this.loaded={}}loadTile(Ee,qe){const{uid:ct,encoding:dt,rawImageData:jt}=Ee,Ge=r.isImageBitmap(jt)?this.getImageData(jt):jt,Zt=new r.DEMData(ct,Ge,dt);this.loaded=this.loaded||{},this.loaded[ct]=Zt,qe(null,Zt)}getImageData(Ee){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ee.width,Ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ee.width,this.offscreenCanvas.height=Ee.height,this.offscreenCanvasContext.drawImage(Ee,0,0,Ee.width,Ee.height);const qe=this.offscreenCanvasContext.getImageData(-1,-1,Ee.width+2,Ee.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:qe.width,height:qe.height},qe.data)}removeTile(Ee){const qe=this.loaded,ct=Ee.uid;qe&&qe[ct]&&delete qe[ct]}}var M=function Te(Ee,qe){var ct,dt=Ee&&Ee.type;if(dt==="FeatureCollection")for(ct=0;ct<Ee.features.length;ct++)Te(Ee.features[ct],qe);else if(dt==="GeometryCollection")for(ct=0;ct<Ee.geometries.length;ct++)Te(Ee.geometries[ct],qe);else if(dt==="Feature")Te(Ee.geometry,qe);else if(dt==="Polygon")O(Ee.coordinates,qe);else if(dt==="MultiPolygon")for(ct=0;ct<Ee.coordinates.length;ct++)O(Ee.coordinates[ct],qe);return Ee};function O(Te,Ee){if(Te.length!==0){V(Te[0],Ee);for(var qe=1;qe<Te.length;qe++)V(Te[qe],!Ee)}}function V(Te,Ee){for(var qe=0,ct=0,dt=0,jt=Te.length,Ge=jt-1;dt<jt;Ge=dt++){var Zt=(Te[dt][0]-Te[Ge][0])*(Te[Ge][1]+Te[dt][1]),Rt=qe+Zt;ct+=Math.abs(qe)>=Math.abs(Zt)?qe-Rt+Zt:Zt-Rt+qe,qe=Rt}qe+ct>=0!=!!Ee&&Te.reverse()}const G=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(Ee){this._feature=Ee,this.extent=r.EXTENT,this.type=Ee.type,this.properties=Ee.tags,"id"in Ee&&!isNaN(Ee.id)&&(this.id=parseInt(Ee.id,10))}loadGeometry(){if(this._feature.type===1){const Ee=[];for(const qe of this._feature.geometry)Ee.push([new r.pointGeometry(qe[0],qe[1])]);return Ee}{const Ee=[];for(const qe of this._feature.geometry){const ct=[];for(const dt of qe)ct.push(new r.pointGeometry(dt[0],dt[1]));Ee.push(ct)}return Ee}}toGeoJSON(Ee,qe,ct){return G.call(this,Ee,qe,ct)}}class te{constructor(Ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=Ee.length,this._features=Ee}feature(Ee){return new Z(this._features[Ee])}}var J={exports:{}},oe=r.pointGeometry,Me=r.vectorTile.VectorTileFeature,Fe=pe;function pe(Te,Ee){this.options=Ee||{},this.features=Te,this.length=Te.length}function Ie(Te,Ee){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=Ee||4096}pe.prototype.feature=function(Te){return new Ie(this.features[Te],this.options.extent)},Ie.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var Ee=0;Ee<Te.length;Ee++){for(var qe=Te[Ee],ct=[],dt=0;dt<qe.length;dt++)ct.push(new oe(qe[dt][0],qe[dt][1]));this.geometry.push(ct)}return this.geometry},Ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,Ee=1/0,qe=-1/0,ct=1/0,dt=-1/0,jt=0;jt<Te.length;jt++)for(var Ge=Te[jt],Zt=0;Zt<Ge.length;Zt++){var Rt=Ge[Zt];Ee=Math.min(Ee,Rt.x),qe=Math.max(qe,Rt.x),ct=Math.min(ct,Rt.y),dt=Math.max(dt,Rt.y)}return[Ee,ct,qe,dt]},Ie.prototype.toGeoJSON=Me.prototype.toGeoJSON;var Se=r.pbf,me=Fe;function et(Te){var Ee=new Se;return function(qe,ct){for(var dt in qe.layers)ct.writeMessage(3,nt,qe.layers[dt])}(Te,Ee),Ee.finish()}function nt(Te,Ee){var qe;Ee.writeVarintField(15,Te.version||1),Ee.writeStringField(1,Te.name||""),Ee.writeVarintField(5,Te.extent||4096);var ct={keys:[],values:[],keycache:{},valuecache:{}};for(qe=0;qe<Te.length;qe++)ct.feature=Te.feature(qe),Ee.writeMessage(2,Et,ct);var dt=ct.keys;for(qe=0;qe<dt.length;qe++)Ee.writeStringField(3,dt[qe]);var jt=ct.values;for(qe=0;qe<jt.length;qe++)Ee.writeMessage(4,le,jt[qe])}function Et(Te,Ee){var qe=Te.feature;qe.id!==void 0&&Ee.writeVarintField(1,qe.id),Ee.writeMessage(2,it,Te),Ee.writeVarintField(3,qe.type),Ee.writeMessage(4,Oe,qe)}function it(Te,Ee){var qe=Te.feature,ct=Te.keys,dt=Te.values,jt=Te.keycache,Ge=Te.valuecache;for(var Zt in qe.properties){var Rt=qe.properties[Zt],oi=jt[Zt];if(Rt!==null){oi===void 0&&(ct.push(Zt),jt[Zt]=oi=ct.length-1),Ee.writeVarint(oi);var yt=typeof Rt;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Rt=JSON.stringify(Rt));var Ri=yt+":"+Rt,Ii=Ge[Ri];Ii===void 0&&(dt.push(Rt),Ge[Ri]=Ii=dt.length-1),Ee.writeVarint(Ii)}}}function we(Te,Ee){return(Ee<<3)+(7&Te)}function ke(Te){return Te<<1^Te>>31}function Oe(Te,Ee){for(var qe=Te.loadGeometry(),ct=Te.type,dt=0,jt=0,Ge=qe.length,Zt=0;Zt<Ge;Zt++){var Rt=qe[Zt],oi=1;ct===1&&(oi=Rt.length),Ee.writeVarint(we(1,oi));for(var yt=ct===3?Rt.length-1:Rt.length,Ri=0;Ri<yt;Ri++){Ri===1&&ct!==1&&Ee.writeVarint(we(2,yt-1));var Ii=Rt[Ri].x-dt,Sn=Rt[Ri].y-jt;Ee.writeVarint(ke(Ii)),Ee.writeVarint(ke(Sn)),dt+=Ii,jt+=Sn}ct===3&&Ee.writeVarint(we(7,1))}}function le(Te,Ee){var qe=typeof Te;qe==="string"?Ee.writeStringField(1,Te):qe==="boolean"?Ee.writeBooleanField(7,Te):qe==="number"&&(Te%1!=0?Ee.writeDoubleField(3,Te):Te<0?Ee.writeSVarintField(6,Te):Ee.writeVarintField(5,Te))}function Ce(Te,Ee,qe,ct,dt,jt){if(dt-ct<=qe)return;const Ge=ct+dt>>1;he(Te,Ee,Ge,ct,dt,jt%2),Ce(Te,Ee,qe,ct,Ge-1,jt+1),Ce(Te,Ee,qe,Ge+1,dt,jt+1)}function he(Te,Ee,qe,ct,dt,jt){for(;dt>ct;){if(dt-ct>600){const oi=dt-ct+1,yt=qe-ct+1,Ri=Math.log(oi),Ii=.5*Math.exp(2*Ri/3),Sn=.5*Math.sqrt(Ri*Ii*(oi-Ii)/oi)*(yt-oi/2<0?-1:1);he(Te,Ee,qe,Math.max(ct,Math.floor(qe-yt*Ii/oi+Sn)),Math.min(dt,Math.floor(qe+(oi-yt)*Ii/oi+Sn)),jt)}const Ge=Ee[2*qe+jt];let Zt=ct,Rt=dt;for(ge(Te,Ee,ct,qe),Ee[2*dt+jt]>Ge&&ge(Te,Ee,ct,dt);Zt<Rt;){for(ge(Te,Ee,Zt,Rt),Zt++,Rt--;Ee[2*Zt+jt]<Ge;)Zt++;for(;Ee[2*Rt+jt]>Ge;)Rt--}Ee[2*ct+jt]===Ge?ge(Te,Ee,ct,Rt):(Rt++,ge(Te,Ee,Rt,dt)),Rt<=qe&&(ct=Rt+1),qe<=Rt&&(dt=Rt-1)}}function ge(Te,Ee,qe,ct){Be(Te,qe,ct),Be(Ee,2*qe,2*ct),Be(Ee,2*qe+1,2*ct+1)}function Be(Te,Ee,qe){const ct=Te[Ee];Te[Ee]=Te[qe],Te[qe]=ct}function We(Te,Ee,qe,ct){const dt=Te-qe,jt=Ee-ct;return dt*dt+jt*jt}J.exports=et,J.exports.fromVectorTileJs=et,J.exports.fromGeojsonVt=function(Te,Ee){Ee=Ee||{};var qe={};for(var ct in Te)qe[ct]=new me(Te[ct].features,Ee),qe[ct].name=ct,qe[ct].version=Ee.version,qe[ct].extent=Ee.extent;return et({layers:qe})},J.exports.GeoJSONWrapper=me;const st=Te=>Te[0],Xe=Te=>Te[1];class gt{constructor(Ee,qe=st,ct=Xe,dt=64,jt=Float64Array){this.nodeSize=dt,this.points=Ee;const Ge=Ee.length<65536?Uint16Array:Uint32Array,Zt=this.ids=new Ge(Ee.length),Rt=this.coords=new jt(2*Ee.length);for(let oi=0;oi<Ee.length;oi++)Zt[oi]=oi,Rt[2*oi]=qe(Ee[oi]),Rt[2*oi+1]=ct(Ee[oi]);Ce(Zt,Rt,dt,0,Zt.length-1,0)}range(Ee,qe,ct,dt){return function(jt,Ge,Zt,Rt,oi,yt,Ri){const Ii=[0,jt.length-1,0],Sn=[];let An,wt;for(;Ii.length;){const Tn=Ii.pop(),Jn=Ii.pop(),Pr=Ii.pop();if(Jn-Pr<=Ri){for(let Mr=Pr;Mr<=Jn;Mr++)An=Ge[2*Mr],wt=Ge[2*Mr+1],An>=Zt&&An<=oi&&wt>=Rt&&wt<=yt&&Sn.push(jt[Mr]);continue}const sr=Math.floor((Pr+Jn)/2);An=Ge[2*sr],wt=Ge[2*sr+1],An>=Zt&&An<=oi&&wt>=Rt&&wt<=yt&&Sn.push(jt[sr]);const Cr=(Tn+1)%2;(Tn===0?Zt<=An:Rt<=wt)&&(Ii.push(Pr),Ii.push(sr-1),Ii.push(Cr)),(Tn===0?oi>=An:yt>=wt)&&(Ii.push(sr+1),Ii.push(Jn),Ii.push(Cr))}return Sn}(this.ids,this.coords,Ee,qe,ct,dt,this.nodeSize)}within(Ee,qe,ct){return function(dt,jt,Ge,Zt,Rt,oi){const yt=[0,dt.length-1,0],Ri=[],Ii=Rt*Rt;for(;yt.length;){const Sn=yt.pop(),An=yt.pop(),wt=yt.pop();if(An-wt<=oi){for(let Cr=wt;Cr<=An;Cr++)We(jt[2*Cr],jt[2*Cr+1],Ge,Zt)<=Ii&&Ri.push(dt[Cr]);continue}const Tn=Math.floor((wt+An)/2),Jn=jt[2*Tn],Pr=jt[2*Tn+1];We(Jn,Pr,Ge,Zt)<=Ii&&Ri.push(dt[Tn]);const sr=(Sn+1)%2;(Sn===0?Ge-Rt<=Jn:Zt-Rt<=Pr)&&(yt.push(wt),yt.push(Tn-1),yt.push(sr)),(Sn===0?Ge+Rt>=Jn:Zt+Rt>=Pr)&&(yt.push(Tn+1),yt.push(An),yt.push(sr))}return Ri}(this.ids,this.coords,Ee,qe,ct,this.nodeSize)}}const Pt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},ri=Math.fround||(ut=new Float32Array(1),Te=>(ut[0]=+Te,ut[0]));var ut;class bt{constructor(Ee){this.options=Yt(Object.create(Pt),Ee),this.trees=new Array(this.options.maxZoom+1)}load(Ee){const{log:qe,minZoom:ct,maxZoom:dt,nodeSize:jt}=this.options;qe&&console.time("total time");const Ge=`prepare ${Ee.length} points`;qe&&console.time(Ge),this.points=Ee;let Zt=[];for(let Rt=0;Rt<Ee.length;Rt++)Ee[Rt].geometry&&Zt.push(Ke(Ee[Rt],Rt));this.trees[dt+1]=new gt(Zt,mi,Wi,jt,Float32Array),qe&&console.timeEnd(Ge);for(let Rt=dt;Rt>=ct;Rt--){const oi=+Date.now();Zt=this._cluster(Zt,Rt),this.trees[Rt]=new gt(Zt,mi,Wi,jt,Float32Array),qe&&console.log("z%d: %d clusters in %dms",Rt,Zt.length,+Date.now()-oi)}return qe&&console.timeEnd("total time"),this}getClusters(Ee,qe){let ct=((Ee[0]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,Ee[1]));let jt=Ee[2]===180?180:((Ee[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Ee[3]));if(Ee[2]-Ee[0]>=360)ct=-180,jt=180;else if(ct>jt){const yt=this.getClusters([ct,dt,180,Ge],qe),Ri=this.getClusters([-180,dt,jt,Ge],qe);return yt.concat(Ri)}const Zt=this.trees[this._limitZoom(qe)],Rt=Zt.range($t(ct),Si(Ge),$t(jt),Si(dt)),oi=[];for(const yt of Rt){const Ri=Zt.points[yt];oi.push(Ri.numPoints?ei(Ri):this.points[Ri.index])}return oi}getChildren(Ee){const qe=this._getOriginId(Ee),ct=this._getOriginZoom(Ee),dt="No cluster with the specified id.",jt=this.trees[ct];if(!jt)throw new Error(dt);const Ge=jt.points[qe];if(!Ge)throw new Error(dt);const Zt=this.options.radius/(this.options.extent*Math.pow(2,ct-1)),Rt=jt.within(Ge.x,Ge.y,Zt),oi=[];for(const yt of Rt){const Ri=jt.points[yt];Ri.parentId===Ee&&oi.push(Ri.numPoints?ei(Ri):this.points[Ri.index])}if(oi.length===0)throw new Error(dt);return oi}getLeaves(Ee,qe,ct){const dt=[];return this._appendLeaves(dt,Ee,qe=qe||10,ct=ct||0,0),dt}getTile(Ee,qe,ct){const dt=this.trees[this._limitZoom(Ee)],jt=Math.pow(2,Ee),{extent:Ge,radius:Zt}=this.options,Rt=Zt/Ge,oi=(ct-Rt)/jt,yt=(ct+1+Rt)/jt,Ri={features:[]};return this._addTileFeatures(dt.range((qe-Rt)/jt,oi,(qe+1+Rt)/jt,yt),dt.points,qe,ct,jt,Ri),qe===0&&this._addTileFeatures(dt.range(1-Rt/jt,oi,1,yt),dt.points,jt,ct,jt,Ri),qe===jt-1&&this._addTileFeatures(dt.range(0,oi,Rt/jt,yt),dt.points,-1,ct,jt,Ri),Ri.features.length?Ri:null}getClusterExpansionZoom(Ee){let qe=this._getOriginZoom(Ee)-1;for(;qe<=this.options.maxZoom;){const ct=this.getChildren(Ee);if(qe++,ct.length!==1)break;Ee=ct[0].properties.cluster_id}return qe}_appendLeaves(Ee,qe,ct,dt,jt){const Ge=this.getChildren(qe);for(const Zt of Ge){const Rt=Zt.properties;if(Rt&&Rt.cluster?jt+Rt.point_count<=dt?jt+=Rt.point_count:jt=this._appendLeaves(Ee,Rt.cluster_id,ct,dt,jt):jt<dt?jt++:Ee.push(Zt),Ee.length===ct)break}return jt}_addTileFeatures(Ee,qe,ct,dt,jt,Ge){for(const Zt of Ee){const Rt=qe[Zt],oi=Rt.numPoints;let yt,Ri,Ii;if(oi)yt=li(Rt),Ri=Rt.x,Ii=Rt.y;else{const wt=this.points[Rt.index];yt=wt.properties,Ri=$t(wt.geometry.coordinates[0]),Ii=Si(wt.geometry.coordinates[1])}const Sn={type:1,geometry:[[Math.round(this.options.extent*(Ri*jt-ct)),Math.round(this.options.extent*(Ii*jt-dt))]],tags:yt};let An;oi?An=Rt.id:this.options.generateId?An=Rt.index:this.points[Rt.index].id&&(An=this.points[Rt.index].id),An!==void 0&&(Sn.id=An),Ge.features.push(Sn)}}_limitZoom(Ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ee),this.options.maxZoom+1))}_cluster(Ee,qe){const ct=[],{radius:dt,extent:jt,reduce:Ge,minPoints:Zt}=this.options,Rt=dt/(jt*Math.pow(2,qe));for(let oi=0;oi<Ee.length;oi++){const yt=Ee[oi];if(yt.zoom<=qe)continue;yt.zoom=qe;const Ri=this.trees[qe+1],Ii=Ri.within(yt.x,yt.y,Rt),Sn=yt.numPoints||1;let An=Sn;for(const wt of Ii){const Tn=Ri.points[wt];Tn.zoom>qe&&(An+=Tn.numPoints||1)}if(An>Sn&&An>=Zt){let wt=yt.x*Sn,Tn=yt.y*Sn,Jn=Ge&&Sn>1?this._map(yt,!0):null;const Pr=(oi<<5)+(qe+1)+this.points.length;for(const sr of Ii){const Cr=Ri.points[sr];if(Cr.zoom<=qe)continue;Cr.zoom=qe;const Mr=Cr.numPoints||1;wt+=Cr.x*Mr,Tn+=Cr.y*Mr,Cr.parentId=Pr,Ge&&(Jn||(Jn=this._map(yt,!0)),Ge(Jn,this._map(Cr)))}yt.parentId=Pr,ct.push(vt(wt/An,Tn/An,Pr,An,Jn))}else if(ct.push(yt),An>1)for(const wt of Ii){const Tn=Ri.points[wt];Tn.zoom<=qe||(Tn.zoom=qe,ct.push(Tn))}}return ct}_getOriginId(Ee){return Ee-this.points.length>>5}_getOriginZoom(Ee){return(Ee-this.points.length)%32}_map(Ee,qe){if(Ee.numPoints)return qe?Yt({},Ee.properties):Ee.properties;const ct=this.points[Ee.index].properties,dt=this.options.map(ct);return qe&&dt===ct?Yt({},dt):dt}}function vt(Te,Ee,qe,ct,dt){return{x:ri(Te),y:ri(Ee),zoom:1/0,id:qe,parentId:-1,numPoints:ct,properties:dt}}function Ke(Te,Ee){const[qe,ct]=Te.geometry.coordinates;return{x:ri($t(qe)),y:ri(Si(ct)),zoom:1/0,index:Ee,parentId:-1}}function ei(Te){return{type:"Feature",id:Te.id,properties:li(Te),geometry:{type:"Point",coordinates:[(Ee=Te.x,360*(Ee-.5)),Ti(Te.y)]}};var Ee}function li(Te){const Ee=Te.numPoints,qe=Ee>=1e4?`${Math.round(Ee/1e3)}k`:Ee>=1e3?Math.round(Ee/100)/10+"k":Ee;return Yt(Yt({},Te.properties),{cluster:!0,cluster_id:Te.id,point_count:Ee,point_count_abbreviated:qe})}function $t(Te){return Te/360+.5}function Si(Te){const Ee=Math.sin(Te*Math.PI/180),qe=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return qe<0?0:qe>1?1:qe}function Ti(Te){const Ee=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(Ee))/Math.PI-90}function Yt(Te,Ee){for(const qe in Ee)Te[qe]=Ee[qe];return Te}function mi(Te){return Te.x}function Wi(Te){return Te.y}function Ci(Te,Ee,qe,ct){for(var dt,jt=ct,Ge=qe-Ee>>1,Zt=qe-Ee,Rt=Te[Ee],oi=Te[Ee+1],yt=Te[qe],Ri=Te[qe+1],Ii=Ee+3;Ii<qe;Ii+=3){var Sn=ti(Te[Ii],Te[Ii+1],Rt,oi,yt,Ri);if(Sn>jt)dt=Ii,jt=Sn;else if(Sn===jt){var An=Math.abs(Ii-Ge);An<Zt&&(dt=Ii,Zt=An)}}jt>ct&&(dt-Ee>3&&Ci(Te,Ee,dt,ct),Te[dt+2]=jt,qe-dt>3&&Ci(Te,dt,qe,ct))}function ti(Te,Ee,qe,ct,dt,jt){var Ge=dt-qe,Zt=jt-ct;if(Ge!==0||Zt!==0){var Rt=((Te-qe)*Ge+(Ee-ct)*Zt)/(Ge*Ge+Zt*Zt);Rt>1?(qe=dt,ct=jt):Rt>0&&(qe+=Ge*Rt,ct+=Zt*Rt)}return(Ge=Te-qe)*Ge+(Zt=Ee-ct)*Zt}function Pe(Te,Ee,qe,ct){var dt={id:Te===void 0?null:Te,type:Ee,geometry:qe,tags:ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(jt){var Ge=jt.geometry,Zt=jt.type;if(Zt==="Point"||Zt==="MultiPoint"||Zt==="LineString")Q(jt,Ge);else if(Zt==="Polygon"||Zt==="MultiLineString")for(var Rt=0;Rt<Ge.length;Rt++)Q(jt,Ge[Rt]);else if(Zt==="MultiPolygon")for(Rt=0;Rt<Ge.length;Rt++)for(var oi=0;oi<Ge[Rt].length;oi++)Q(jt,Ge[Rt][oi])}(dt),dt}function Q(Te,Ee){for(var qe=0;qe<Ee.length;qe+=3)Te.minX=Math.min(Te.minX,Ee[qe]),Te.minY=Math.min(Te.minY,Ee[qe+1]),Te.maxX=Math.max(Te.maxX,Ee[qe]),Te.maxY=Math.max(Te.maxY,Ee[qe+1])}function ae(Te,Ee,qe,ct){if(Ee.geometry){var dt=Ee.geometry.coordinates,jt=Ee.geometry.type,Ge=Math.pow(qe.tolerance/((1<<qe.maxZoom)*qe.extent),2),Zt=[],Rt=Ee.id;if(qe.promoteId?Rt=Ee.properties[qe.promoteId]:qe.generateId&&(Rt=ct||0),jt==="Point")Qe(dt,Zt);else if(jt==="MultiPoint")for(var oi=0;oi<dt.length;oi++)Qe(dt[oi],Zt);else if(jt==="LineString")_t(dt,Zt,Ge,!1);else if(jt==="MultiLineString"){if(qe.lineMetrics){for(oi=0;oi<dt.length;oi++)_t(dt[oi],Zt=[],Ge,!1),Te.push(Pe(Rt,"LineString",Zt,Ee.properties));return}Jt(dt,Zt,Ge,!1)}else if(jt==="Polygon")Jt(dt,Zt,Ge,!0);else{if(jt!=="MultiPolygon"){if(jt==="GeometryCollection"){for(oi=0;oi<Ee.geometry.geometries.length;oi++)ae(Te,{id:Rt,geometry:Ee.geometry.geometries[oi],properties:Ee.properties},qe,ct);return}throw new Error("Input data is not a valid GeoJSON object.")}for(oi=0;oi<dt.length;oi++){var yt=[];Jt(dt[oi],yt,Ge,!0),Zt.push(yt)}}Te.push(Pe(Rt,jt,Zt,Ee.properties))}}function Qe(Te,Ee){Ee.push(di(Te[0])),Ee.push(wn(Te[1])),Ee.push(0)}function _t(Te,Ee,qe,ct){for(var dt,jt,Ge=0,Zt=0;Zt<Te.length;Zt++){var Rt=di(Te[Zt][0]),oi=wn(Te[Zt][1]);Ee.push(Rt),Ee.push(oi),Ee.push(0),Zt>0&&(Ge+=ct?(dt*oi-Rt*jt)/2:Math.sqrt(Math.pow(Rt-dt,2)+Math.pow(oi-jt,2))),dt=Rt,jt=oi}var yt=Ee.length-3;Ee[2]=1,Ci(Ee,0,yt,qe),Ee[yt+2]=1,Ee.size=Math.abs(Ge),Ee.start=0,Ee.end=Ee.size}function Jt(Te,Ee,qe,ct){for(var dt=0;dt<Te.length;dt++){var jt=[];_t(Te[dt],jt,qe,ct),Ee.push(jt)}}function di(Te){return Te/360+.5}function wn(Te){var Ee=Math.sin(Te*Math.PI/180),qe=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return qe<0?0:qe>1?1:qe}function Ln(Te,Ee,qe,ct,dt,jt,Ge,Zt){if(ct/=Ee,jt>=(qe/=Ee)&&Ge<ct)return Te;if(Ge<qe||jt>=ct)return null;for(var Rt=[],oi=0;oi<Te.length;oi++){var yt=Te[oi],Ri=yt.geometry,Ii=yt.type,Sn=dt===0?yt.minX:yt.minY,An=dt===0?yt.maxX:yt.maxY;if(Sn>=qe&&An<ct)Rt.push(yt);else if(!(An<qe||Sn>=ct)){var wt=[];if(Ii==="Point"||Ii==="MultiPoint")hn(Ri,wt,qe,ct,dt);else if(Ii==="LineString")Bi(Ri,wt,qe,ct,dt,!1,Zt.lineMetrics);else if(Ii==="MultiLineString")Hn(Ri,wt,qe,ct,dt,!1);else if(Ii==="Polygon")Hn(Ri,wt,qe,ct,dt,!0);else if(Ii==="MultiPolygon")for(var Tn=0;Tn<Ri.length;Tn++){var Jn=[];Hn(Ri[Tn],Jn,qe,ct,dt,!0),Jn.length&&wt.push(Jn)}if(wt.length){if(Zt.lineMetrics&&Ii==="LineString"){for(Tn=0;Tn<wt.length;Tn++)Rt.push(Pe(yt.id,Ii,wt[Tn],yt.tags));continue}Ii!=="LineString"&&Ii!=="MultiLineString"||(wt.length===1?(Ii="LineString",wt=wt[0]):Ii="MultiLineString"),Ii!=="Point"&&Ii!=="MultiPoint"||(Ii=wt.length===3?"Point":"MultiPoint"),Rt.push(Pe(yt.id,Ii,wt,yt.tags))}}}return Rt.length?Rt:null}function hn(Te,Ee,qe,ct,dt){for(var jt=0;jt<Te.length;jt+=3){var Ge=Te[jt+dt];Ge>=qe&&Ge<=ct&&(Ee.push(Te[jt]),Ee.push(Te[jt+1]),Ee.push(Te[jt+2]))}}function Bi(Te,Ee,qe,ct,dt,jt,Ge){for(var Zt,Rt,oi=Xi(Te),yt=dt===0?Zr:zn,Ri=Te.start,Ii=0;Ii<Te.length-3;Ii+=3){var Sn=Te[Ii],An=Te[Ii+1],wt=Te[Ii+2],Tn=Te[Ii+3],Jn=Te[Ii+4],Pr=dt===0?Sn:An,sr=dt===0?Tn:Jn,Cr=!1;Ge&&(Zt=Math.sqrt(Math.pow(Sn-Tn,2)+Math.pow(An-Jn,2))),Pr<qe?sr>qe&&(Rt=yt(oi,Sn,An,Tn,Jn,qe),Ge&&(oi.start=Ri+Zt*Rt)):Pr>ct?sr<ct&&(Rt=yt(oi,Sn,An,Tn,Jn,ct),Ge&&(oi.start=Ri+Zt*Rt)):Gn(oi,Sn,An,wt),sr<qe&&Pr>=qe&&(Rt=yt(oi,Sn,An,Tn,Jn,qe),Cr=!0),sr>ct&&Pr<=ct&&(Rt=yt(oi,Sn,An,Tn,Jn,ct),Cr=!0),!jt&&Cr&&(Ge&&(oi.end=Ri+Zt*Rt),Ee.push(oi),oi=Xi(Te)),Ge&&(Ri+=Zt)}var Mr=Te.length-3;Sn=Te[Mr],An=Te[Mr+1],wt=Te[Mr+2],(Pr=dt===0?Sn:An)>=qe&&Pr<=ct&&Gn(oi,Sn,An,wt),Mr=oi.length-3,jt&&Mr>=3&&(oi[Mr]!==oi[0]||oi[Mr+1]!==oi[1])&&Gn(oi,oi[0],oi[1],oi[2]),oi.length&&Ee.push(oi)}function Xi(Te){var Ee=[];return Ee.size=Te.size,Ee.start=Te.start,Ee.end=Te.end,Ee}function Hn(Te,Ee,qe,ct,dt,jt){for(var Ge=0;Ge<Te.length;Ge++)Bi(Te[Ge],Ee,qe,ct,dt,jt,!1)}function Gn(Te,Ee,qe,ct){Te.push(Ee),Te.push(qe),Te.push(ct)}function Zr(Te,Ee,qe,ct,dt,jt){var Ge=(jt-Ee)/(ct-Ee);return Te.push(jt),Te.push(qe+(dt-qe)*Ge),Te.push(1),Ge}function zn(Te,Ee,qe,ct,dt,jt){var Ge=(jt-qe)/(dt-qe);return Te.push(Ee+(ct-Ee)*Ge),Te.push(jt),Te.push(1),Ge}function fn(Te,Ee){for(var qe=[],ct=0;ct<Te.length;ct++){var dt,jt=Te[ct],Ge=jt.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")dt=yn(jt.geometry,Ee);else if(Ge==="MultiLineString"||Ge==="Polygon"){dt=[];for(var Zt=0;Zt<jt.geometry.length;Zt++)dt.push(yn(jt.geometry[Zt],Ee))}else if(Ge==="MultiPolygon")for(dt=[],Zt=0;Zt<jt.geometry.length;Zt++){for(var Rt=[],oi=0;oi<jt.geometry[Zt].length;oi++)Rt.push(yn(jt.geometry[Zt][oi],Ee));dt.push(Rt)}qe.push(Pe(jt.id,Ge,dt,jt.tags))}return qe}function yn(Te,Ee){var qe=[];qe.size=Te.size,Te.start!==void 0&&(qe.start=Te.start,qe.end=Te.end);for(var ct=0;ct<Te.length;ct+=3)qe.push(Te[ct]+Ee,Te[ct+1],Te[ct+2]);return qe}function tn(Te,Ee){if(Te.transformed)return Te;var qe,ct,dt,jt=1<<Te.z,Ge=Te.x,Zt=Te.y;for(qe=0;qe<Te.features.length;qe++){var Rt=Te.features[qe],oi=Rt.geometry,yt=Rt.type;if(Rt.geometry=[],yt===1)for(ct=0;ct<oi.length;ct+=2)Rt.geometry.push(wr(oi[ct],oi[ct+1],Ee,jt,Ge,Zt));else for(ct=0;ct<oi.length;ct++){var Ri=[];for(dt=0;dt<oi[ct].length;dt+=2)Ri.push(wr(oi[ct][dt],oi[ct][dt+1],Ee,jt,Ge,Zt));Rt.geometry.push(Ri)}}return Te.transformed=!0,Te}function wr(Te,Ee,qe,ct,dt,jt){return[Math.round(qe*(Te*ct-dt)),Math.round(qe*(Ee*ct-jt))]}function Wn(Te,Ee,qe,ct,dt){for(var jt=Ee===dt.maxZoom?0:dt.tolerance/((1<<Ee)*dt.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:qe,y:ct,z:Ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Zt=0;Zt<Te.length;Zt++){Ge.numFeatures++,lr(Ge,Te[Zt],jt,dt);var Rt=Te[Zt].minX,oi=Te[Zt].minY,yt=Te[Zt].maxX,Ri=Te[Zt].maxY;Rt<Ge.minX&&(Ge.minX=Rt),oi<Ge.minY&&(Ge.minY=oi),yt>Ge.maxX&&(Ge.maxX=yt),Ri>Ge.maxY&&(Ge.maxY=Ri)}return Ge}function lr(Te,Ee,qe,ct){var dt=Ee.geometry,jt=Ee.type,Ge=[];if(jt==="Point"||jt==="MultiPoint")for(var Zt=0;Zt<dt.length;Zt+=3)Ge.push(dt[Zt]),Ge.push(dt[Zt+1]),Te.numPoints++,Te.numSimplified++;else if(jt==="LineString")Kr(Ge,dt,Te,qe,!1,!1);else if(jt==="MultiLineString"||jt==="Polygon")for(Zt=0;Zt<dt.length;Zt++)Kr(Ge,dt[Zt],Te,qe,jt==="Polygon",Zt===0);else if(jt==="MultiPolygon")for(var Rt=0;Rt<dt.length;Rt++){var oi=dt[Rt];for(Zt=0;Zt<oi.length;Zt++)Kr(Ge,oi[Zt],Te,qe,!0,Zt===0)}if(Ge.length){var yt=Ee.tags||null;if(jt==="LineString"&&ct.lineMetrics){for(var Ri in yt={},Ee.tags)yt[Ri]=Ee.tags[Ri];yt.mapbox_clip_start=dt.start/dt.size,yt.mapbox_clip_end=dt.end/dt.size}var Ii={geometry:Ge,type:jt==="Polygon"||jt==="MultiPolygon"?3:jt==="LineString"||jt==="MultiLineString"?2:1,tags:yt};Ee.id!==null&&(Ii.id=Ee.id),Te.features.push(Ii)}}function Kr(Te,Ee,qe,ct,dt,jt){var Ge=ct*ct;if(ct>0&&Ee.size<(dt?Ge:ct))qe.numPoints+=Ee.length/3;else{for(var Zt=[],Rt=0;Rt<Ee.length;Rt+=3)(ct===0||Ee[Rt+2]>Ge)&&(qe.numSimplified++,Zt.push(Ee[Rt]),Zt.push(Ee[Rt+1])),qe.numPoints++;dt&&function(oi,yt){for(var Ri=0,Ii=0,Sn=oi.length,An=Sn-2;Ii<Sn;An=Ii,Ii+=2)Ri+=(oi[Ii]-oi[An])*(oi[Ii+1]+oi[An+1]);if(Ri>0===yt)for(Ii=0,Sn=oi.length;Ii<Sn/2;Ii+=2){var wt=oi[Ii],Tn=oi[Ii+1];oi[Ii]=oi[Sn-2-Ii],oi[Ii+1]=oi[Sn-1-Ii],oi[Sn-2-Ii]=wt,oi[Sn-1-Ii]=Tn}}(Zt,jt),Te.push(Zt)}}function rn(Te,Ee){var qe=(Ee=this.options=function(dt,jt){for(var Ge in jt)dt[Ge]=jt[Ge];return dt}(Object.create(this.options),Ee)).debug;if(qe&&console.time("preprocess data"),Ee.maxZoom<0||Ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ee.promoteId&&Ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var ct=function(dt,jt){var Ge=[];if(dt.type==="FeatureCollection")for(var Zt=0;Zt<dt.features.length;Zt++)ae(Ge,dt.features[Zt],jt,Zt);else ae(Ge,dt.type==="Feature"?dt:{geometry:dt},jt);return Ge}(Te,Ee);this.tiles={},this.tileCoords=[],qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ee.indexMaxZoom,Ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ct=function(dt,jt){var Ge=jt.buffer/jt.extent,Zt=dt,Rt=Ln(dt,1,-1-Ge,Ge,0,-1,2,jt),oi=Ln(dt,1,1-Ge,2+Ge,0,-1,2,jt);return(Rt||oi)&&(Zt=Ln(dt,1,-Ge,1+Ge,0,-1,2,jt)||[],Rt&&(Zt=fn(Rt,1).concat(Zt)),oi&&(Zt=Zt.concat(fn(oi,-1)))),Zt}(ct,Ee),ct.length&&this.splitTile(ct,0,0,0),qe&&(ct.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function He(Te,Ee,qe){return 32*((1<<Te)*qe+Ee)+Te}function yo(Te,Ee){const qe=Te.tileID.canonical;if(!this._geoJSONIndex)return Ee(null,null);const ct=this._geoJSONIndex.getTile(qe.z,qe.x,qe.y);if(!ct)return Ee(null,null);const dt=new te(ct.features);let jt=J.exports(dt);jt.byteOffset===0&&jt.byteLength===jt.buffer.byteLength||(jt=new Uint8Array(jt)),Ee(null,{vectorTile:dt,rawData:jt.buffer})}rn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rn.prototype.splitTile=function(Te,Ee,qe,ct,dt,jt,Ge){for(var Zt=[Te,Ee,qe,ct],Rt=this.options,oi=Rt.debug;Zt.length;){ct=Zt.pop(),qe=Zt.pop(),Ee=Zt.pop(),Te=Zt.pop();var yt=1<<Ee,Ri=He(Ee,qe,ct),Ii=this.tiles[Ri];if(!Ii&&(oi>1&&console.time("creation"),Ii=this.tiles[Ri]=Wn(Te,Ee,qe,ct,Rt),this.tileCoords.push({z:Ee,x:qe,y:ct}),oi)){oi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ee,qe,ct,Ii.numFeatures,Ii.numPoints,Ii.numSimplified),console.timeEnd("creation"));var Sn="z"+Ee;this.stats[Sn]=(this.stats[Sn]||0)+1,this.total++}if(Ii.source=Te,dt){if(Ee===Rt.maxZoom||Ee===dt)continue;var An=1<<dt-Ee;if(qe!==Math.floor(jt/An)||ct!==Math.floor(Ge/An))continue}else if(Ee===Rt.indexMaxZoom||Ii.numPoints<=Rt.indexMaxPoints)continue;if(Ii.source=null,Te.length!==0){oi>1&&console.time("clipping");var wt,Tn,Jn,Pr,sr,Cr,Mr=.5*Rt.buffer/Rt.extent,io=.5-Mr,Jr=.5+Mr,mo=1+Mr;wt=Tn=Jn=Pr=null,sr=Ln(Te,yt,qe-Mr,qe+Jr,0,Ii.minX,Ii.maxX,Rt),Cr=Ln(Te,yt,qe+io,qe+mo,0,Ii.minX,Ii.maxX,Rt),Te=null,sr&&(wt=Ln(sr,yt,ct-Mr,ct+Jr,1,Ii.minY,Ii.maxY,Rt),Tn=Ln(sr,yt,ct+io,ct+mo,1,Ii.minY,Ii.maxY,Rt),sr=null),Cr&&(Jn=Ln(Cr,yt,ct-Mr,ct+Jr,1,Ii.minY,Ii.maxY,Rt),Pr=Ln(Cr,yt,ct+io,ct+mo,1,Ii.minY,Ii.maxY,Rt),Cr=null),oi>1&&console.timeEnd("clipping"),Zt.push(wt||[],Ee+1,2*qe,2*ct),Zt.push(Tn||[],Ee+1,2*qe,2*ct+1),Zt.push(Jn||[],Ee+1,2*qe+1,2*ct),Zt.push(Pr||[],Ee+1,2*qe+1,2*ct+1)}}},rn.prototype.getTile=function(Te,Ee,qe){var ct=this.options,dt=ct.extent,jt=ct.debug;if(Te<0||Te>24)return null;var Ge=1<<Te,Zt=He(Te,Ee=(Ee%Ge+Ge)%Ge,qe);if(this.tiles[Zt])return tn(this.tiles[Zt],dt);jt>1&&console.log("drilling down to z%d-%d-%d",Te,Ee,qe);for(var Rt,oi=Te,yt=Ee,Ri=qe;!Rt&&oi>0;)oi--,yt=Math.floor(yt/2),Ri=Math.floor(Ri/2),Rt=this.tiles[He(oi,yt,Ri)];return Rt&&Rt.source?(jt>1&&console.log("found parent tile z%d-%d-%d",oi,yt,Ri),jt>1&&console.time("drilling down"),this.splitTile(Rt.source,oi,yt,Ri,Te,Ee,qe),jt>1&&console.timeEnd("drilling down"),this.tiles[Zt]?tn(this.tiles[Zt],dt):null):null};class _o extends T{constructor(Ee,qe,ct,dt){super(Ee,qe,ct,yo),dt&&(this.loadGeoJSON=dt)}loadData(Ee,qe){var ct;(ct=this._pendingRequest)===null||ct===void 0||ct.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const dt=!!(Ee&&Ee.request&&Ee.request.collectResourceTiming)&&new r.RequestPerformance(Ee.request);this._pendingCallback=qe,this._pendingRequest=this.loadGeoJSON(Ee,(jt,Ge)=>{if(delete this._pendingCallback,delete this._pendingRequest,jt||!Ge)return qe(jt);if(typeof Ge!="object")return qe(new Error(`Input data given to '${Ee.source}' is not a valid GeoJSON object.`));{M(Ge,!0);try{if(Ee.filter){const Rt=r.createExpression(Ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Rt.result==="error")throw new Error(Rt.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));const oi=Ge.features.filter(yt=>Rt.value.evaluate({zoom:0},yt));Ge={type:"FeatureCollection",features:oi}}this._geoJSONIndex=Ee.cluster?new bt(function({superclusterOptions:Rt,clusterProperties:oi}){if(!oi||!Rt)return Rt;const yt={},Ri={},Ii={accumulated:null,zoom:0},Sn={properties:null},An=Object.keys(oi);for(const wt of An){const[Tn,Jn]=oi[wt],Pr=r.createExpression(Jn),sr=r.createExpression(typeof Tn=="string"?[Tn,["accumulated"],["get",wt]]:Tn);yt[wt]=Pr.value,Ri[wt]=sr.value}return Rt.map=wt=>{Sn.properties=wt;const Tn={};for(const Jn of An)Tn[Jn]=yt[Jn].evaluate(Ii,Sn);return Tn},Rt.reduce=(wt,Tn)=>{Sn.properties=Tn;for(const Jn of An)Ii.accumulated=wt[Jn],wt[Jn]=Ri[Jn].evaluate(Ii,Sn)},Rt}(Ee)).load(Ge.features):function(Rt,oi){return new rn(Rt,oi)}(Ge,Ee.geojsonVtOptions)}catch(Rt){return qe(Rt)}this.loaded={};const Zt={};if(dt){const Rt=dt.finish();Rt&&(Zt.resourceTiming={},Zt.resourceTiming[Ee.source]=JSON.parse(JSON.stringify(Rt)))}qe(null,Zt)}})}reloadTile(Ee,qe){const ct=this.loaded;return ct&&ct[Ee.uid]?super.reloadTile(Ee,qe):this.loadTile(Ee,qe)}loadGeoJSON(Ee,qe){if(Ee.request)return r.getJSON(Ee.request,qe);if(typeof Ee.data=="string")try{qe(null,JSON.parse(Ee.data))}catch{qe(new Error(`Input data given to '${Ee.source}' is not a valid GeoJSON object.`))}else qe(new Error(`Input data given to '${Ee.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Ee,qe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),qe()}getClusterExpansionZoom(Ee,qe){try{qe(null,this._geoJSONIndex.getClusterExpansionZoom(Ee.clusterId))}catch(ct){qe(ct)}}getClusterChildren(Ee,qe){try{qe(null,this._geoJSONIndex.getChildren(Ee.clusterId))}catch(ct){qe(ct)}}getClusterLeaves(Ee,qe){try{qe(null,this._geoJSONIndex.getLeaves(Ee.clusterId,Ee.limit,Ee.offset))}catch(ct){qe(ct)}}}class co{constructor(Ee){this.self=Ee,this.actor=new r.Actor(Ee,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:_o},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(qe,ct)=>{if(this.workerSourceTypes[qe])throw new Error(`Worker source with name "${qe}" already registered.`);this.workerSourceTypes[qe]=ct},this.self.registerRTLTextPlugin=qe=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=qe.applyArabicShaping,r.plugin.processBidirectionalText=qe.processBidirectionalText,r.plugin.processStyledBidirectionalText=qe.processStyledBidirectionalText}}setReferrer(Ee,qe){this.referrer=qe}setImages(Ee,qe,ct){this.availableImages[Ee]=qe;for(const dt in this.workerSources[Ee]){const jt=this.workerSources[Ee][dt];for(const Ge in jt)jt[Ge].availableImages=qe}ct()}setLayers(Ee,qe,ct){this.getLayerIndex(Ee).replace(qe),ct()}updateLayers(Ee,qe,ct){this.getLayerIndex(Ee).update(qe.layers,qe.removedIds),ct()}loadTile(Ee,qe,ct){this.getWorkerSource(Ee,qe.type,qe.source).loadTile(qe,ct)}loadDEMTile(Ee,qe,ct){this.getDEMWorkerSource(Ee,qe.source).loadTile(qe,ct)}reloadTile(Ee,qe,ct){this.getWorkerSource(Ee,qe.type,qe.source).reloadTile(qe,ct)}abortTile(Ee,qe,ct){this.getWorkerSource(Ee,qe.type,qe.source).abortTile(qe,ct)}removeTile(Ee,qe,ct){this.getWorkerSource(Ee,qe.type,qe.source).removeTile(qe,ct)}removeDEMTile(Ee,qe){this.getDEMWorkerSource(Ee,qe.source).removeTile(qe)}removeSource(Ee,qe,ct){if(!this.workerSources[Ee]||!this.workerSources[Ee][qe.type]||!this.workerSources[Ee][qe.type][qe.source])return;const dt=this.workerSources[Ee][qe.type][qe.source];delete this.workerSources[Ee][qe.type][qe.source],dt.removeSource!==void 0?dt.removeSource(qe,ct):ct()}loadWorkerSource(Ee,qe,ct){try{this.self.importScripts(qe.url),ct()}catch(dt){ct(dt.toString())}}syncRTLPluginState(Ee,qe,ct){try{r.plugin.setState(qe);const dt=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&dt!=null){this.self.importScripts(dt);const jt=r.plugin.isParsed();ct(jt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${dt}`),jt)}}catch(dt){ct(dt.toString())}}getAvailableImages(Ee){let qe=this.availableImages[Ee];return qe||(qe=[]),qe}getLayerIndex(Ee){let qe=this.layerIndexes[Ee];return qe||(qe=this.layerIndexes[Ee]=new w),qe}getWorkerSource(Ee,qe,ct){if(this.workerSources[Ee]||(this.workerSources[Ee]={}),this.workerSources[Ee][qe]||(this.workerSources[Ee][qe]={}),!this.workerSources[Ee][qe][ct]){const dt={send:(jt,Ge,Zt)=>{this.actor.send(jt,Ge,Zt,Ee)}};this.workerSources[Ee][qe][ct]=new this.workerSourceTypes[qe](dt,this.getLayerIndex(Ee),this.getAvailableImages(Ee))}return this.workerSources[Ee][qe][ct]}getDEMWorkerSource(Ee,qe){return this.demWorkerSources[Ee]||(this.demWorkerSources[Ee]={}),this.demWorkerSources[Ee][qe]||(this.demWorkerSources[Ee][qe]=new S),this.demWorkerSources[Ee][qe]}enforceCacheSizeLimit(Ee,qe){r.enforceCacheSizeLimit(qe)}}return r.isWorker()&&(self.worker=new co(self)),co}),u(["./shared"],function(r){var f=_;function _(B){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var D,z,X=new Blob([""],{type:"text/javascript"}),ie=URL.createObjectURL(X);try{z=new Worker(ie),D=!0}catch{D=!1}return z&&z.terminate(),URL.revokeObjectURL(ie),D}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var D=document.createElement("canvas");D.width=D.height=1;var z=D.getContext("2d");if(!z)return!1;var X=z.getImageData(0,0,1,1);return X&&X.width===D.width}()?(w[I=d&&d.failIfMajorPerformanceCaveat]===void 0&&(w[I]=function(D){var z,X=function(ie){var de=document.createElement("canvas"),_e=Object.create(_.webGLContextAttributes);return _e.failIfMajorPerformanceCaveat=ie,de.getContext("webgl",_e)||de.getContext("experimental-webgl",_e)}(D);if(!X)return!1;try{z=X.createShader(X.VERTEX_SHADER)}catch{return!1}return!(!z||X.isContextLost())&&(X.shaderSource(z,"void main() {}"),X.compileShader(z),X.getShaderParameter(z,X.COMPILE_STATUS)===!0)}(I)),w[I]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var I}(B)}var w={};function b(B,d){if(Array.isArray(B)){if(!Array.isArray(d)||B.length!==d.length)return!1;for(let I=0;I<B.length;I++)if(!b(B[I],d[I]))return!1;return!0}if(typeof B=="object"&&B!==null&&d!==null){if(typeof d!="object"||Object.keys(B).length!==Object.keys(d).length)return!1;for(const I in B)if(!b(B[I],d[I]))return!1;return!0}return B===d}_.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class x{static testProp(d){if(!x.docStyle)return d[0];for(let I=0;I<d.length;I++)if(d[I]in x.docStyle)return d[I];return d[0]}static create(d,I,D){const z=window.document.createElement(d);return I!==void 0&&(z.className=I),D&&D.appendChild(z),z}static createNS(d,I){return window.document.createElementNS(d,I)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(d,I){d.style[x.transformProp]=I}static addEventListener(d,I,D,z={}){d.addEventListener(I,D,"passive"in z?z:z.capture)}static removeEventListener(d,I,D,z={}){d.removeEventListener(I,D,"passive"in z?z:z.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",x.suppressClickInternal,!0)},0)}static mousePos(d,I){const D=d.getBoundingClientRect();return new r.pointGeometry(I.clientX-D.left-d.clientLeft,I.clientY-D.top-d.clientTop)}static touchPos(d,I){const D=d.getBoundingClientRect(),z=[];for(let X=0;X<I.length;X++)z.push(new r.pointGeometry(I[X].clientX-D.left-d.clientLeft,I[X].clientY-D.top-d.clientTop));return z}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);class v{constructor(d){this._transformRequestFn=d}transformRequest(d,I){return this._transformRequestFn&&this._transformRequestFn(d,I)||{url:d}}normalizeSpriteURL(d,I,D){const z=function(X){const ie=X.match(C);if(!ie)throw new Error(`Unable to parse URL "${X}"`);return{protocol:ie[1],authority:ie[2],path:ie[3]||"/",params:ie[4]?ie[4].split("&"):[]}}(d);return z.path+=`${I}${D}`,function(X){const ie=X.params.length?`?${X.params.join("&")}`:"";return`${X.protocol}://${X.authority}${X.path}${ie}`}(z)}setTransformRequest(d){this._transformRequestFn=d}}const C=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(d,I,D,z){this.context=d,this.format=D,this.texture=d.gl.createTexture(),this.update(I,z)}update(d,I,D){const{width:z,height:X}=d,ie=!(this.size&&this.size[0]===z&&this.size[1]===X||D),{context:de}=this,{gl:_e}=de;if(this.useMipmap=Boolean(I&&I.useMipmap),_e.bindTexture(_e.TEXTURE_2D,this.texture),de.pixelStoreUnpackFlipY.set(!1),de.pixelStoreUnpack.set(1),de.pixelStoreUnpackPremultiplyAlpha.set(this.format===_e.RGBA&&(!I||I.premultiply!==!1)),ie)this.size=[z,X],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||r.isImageBitmap(d)?_e.texImage2D(_e.TEXTURE_2D,0,this.format,this.format,_e.UNSIGNED_BYTE,d):_e.texImage2D(_e.TEXTURE_2D,0,this.format,z,X,0,this.format,_e.UNSIGNED_BYTE,d.data);else{const{x:Ae,y:ze}=D||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||r.isImageBitmap(d)?_e.texSubImage2D(_e.TEXTURE_2D,0,Ae,ze,_e.RGBA,_e.UNSIGNED_BYTE,d):_e.texSubImage2D(_e.TEXTURE_2D,0,Ae,ze,z,X,_e.RGBA,_e.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&_e.generateMipmap(_e.TEXTURE_2D)}bind(d,I,D){const{context:z}=this,{gl:X}=z;X.bindTexture(X.TEXTURE_2D,this.texture),D!==X.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(D=X.LINEAR),d!==this.filter&&(X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,d),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,D||d),this.filter=d),I!==this.wrap&&(X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,I),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function S(B){const{userImage:d}=B;return!!(d&&d.render&&d.render())&&(B.data.replace(new Uint8Array(d.data.buffer)),!0)}class M extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:I,callback:D}of this.requestors)this._notify(I,D);this.requestors=[]}}getImage(d){return this.images[d]}addImage(d,I){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,I)&&(this.images[d]=I)}_validate(d,I){let D=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),D=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),D=!1),this._validateContent(I.content,I)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),D=!1),D}_validateStretch(d,I){if(!d)return!0;let D=0;for(const z of d){if(z[0]<D||z[1]<z[0]||I<z[1])return!1;D=z[1]}return!0}_validateContent(d,I){return!(d&&(d.length!==4||d[0]<0||I.data.width<d[0]||d[1]<0||I.data.height<d[1]||d[2]<0||I.data.width<d[2]||d[3]<0||I.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,I){const D=this.images[d];if(D.data.width!==I.data.width||D.data.height!==I.data.height)throw new Error(`size mismatch between old image (${D.data.width}x${D.data.height}) and new image (${I.data.width}x${I.data.height}).`);I.version=D.version+1,this.images[d]=I,this.updatedImages[d]=!0}removeImage(d){const I=this.images[d];delete this.images[d],delete this.patterns[d],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,I){let D=!0;if(!this.isLoaded())for(const z of d)this.images[z]||(D=!1);this.isLoaded()||D?this._notify(d,I):this.requestors.push({ids:d,callback:I})}_notify(d,I){const D={};for(const z of d){this.images[z]||this.fire(new r.Event("styleimagemissing",{id:z}));const X=this.images[z];X?D[z]={data:X.data.clone(),pixelRatio:X.pixelRatio,sdf:X.sdf,version:X.version,stretchX:X.stretchX,stretchY:X.stretchY,content:X.content,hasRenderCallback:Boolean(X.userImage&&X.userImage.render)}:r.warnOnce(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}I(null,D)}getPixelSize(){const{width:d,height:I}=this.atlasImage;return{width:d,height:I}}getPattern(d){const I=this.patterns[d],D=this.getImage(d);if(!D)return null;if(I&&I.position.version===D.version)return I.position;if(I)I.position.version=D.version;else{const z={w:D.data.width+2,h:D.data.height+2,x:0,y:0},X=new r.ImagePosition(z,D);this.patterns[d]={bin:z,position:X}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const I=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(d,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const X in this.patterns)d.push(this.patterns[X].bin);const{w:I,h:D}=r.potpack(d),z=this.atlasImage;z.resize({width:I||1,height:D||1});for(const X in this.patterns){const{bin:ie}=this.patterns[X],de=ie.x+1,_e=ie.y+1,Ae=this.images[X].data,ze=Ae.width,Je=Ae.height;r.RGBAImage.copy(Ae,z,{x:0,y:0},{x:de,y:_e},{width:ze,height:Je}),r.RGBAImage.copy(Ae,z,{x:0,y:Je-1},{x:de,y:_e-1},{width:ze,height:1}),r.RGBAImage.copy(Ae,z,{x:0,y:0},{x:de,y:_e+Je},{width:ze,height:1}),r.RGBAImage.copy(Ae,z,{x:ze-1,y:0},{x:de-1,y:_e},{width:1,height:Je}),r.RGBAImage.copy(Ae,z,{x:0,y:0},{x:de+ze,y:_e},{width:1,height:Je})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const I of d){if(this.callbackDispatchedThisFrame[I])continue;this.callbackDispatchedThisFrame[I]=!0;const D=this.images[I];D||r.warnOnce(`Image with ID: "${I}" was not found`),S(D)&&this.updateImage(I,D)}}}const O=1e20;function V(B,d,I,D,z,X,ie,de,_e){for(let Ae=d;Ae<d+D;Ae++)G(B,I*X+Ae,X,z,ie,de,_e);for(let Ae=I;Ae<I+z;Ae++)G(B,Ae*X+d,1,D,ie,de,_e)}function G(B,d,I,D,z,X,ie){X[0]=0,ie[0]=-O,ie[1]=O,z[0]=B[d];for(let de=1,_e=0,Ae=0;de<D;de++){z[de]=B[d+de*I];const ze=de*de;do{const Je=X[_e];Ae=(z[de]-z[Je]+ze-Je*Je)/(de-Je)/2}while(Ae<=ie[_e]&&--_e>-1);_e++,X[_e]=de,ie[_e]=Ae,ie[_e+1]=O}for(let de=0,_e=0;de<D;de++){for(;ie[_e+1]<de;)_e++;const Ae=X[_e],ze=de-Ae;B[d+de*I]=z[Ae]+ze*ze}}class Z{constructor(d,I){this.requestManager=d,this.localIdeographFontFamily=I,this.entries={}}setURL(d){this.url=d}getGlyphs(d,I){const D=[];for(const z in d)for(const X of d[z])D.push({stack:z,id:X});r.asyncAll(D,({stack:z,id:X},ie)=>{let de=this.entries[z];de||(de=this.entries[z]={glyphs:{},requests:{},ranges:{}});let _e=de.glyphs[X];if(_e!==void 0)return void ie(null,{stack:z,id:X,glyph:_e});if(_e=this._tinySDF(de,z,X),_e)return de.glyphs[X]=_e,void ie(null,{stack:z,id:X,glyph:_e});const Ae=Math.floor(X/256);if(256*Ae>65535)return void ie(new Error("glyphs > 65535 not supported"));if(de.ranges[Ae])return void ie(null,{stack:z,id:X,glyph:_e});let ze=de.requests[Ae];ze||(ze=de.requests[Ae]=[],Z.loadGlyphRange(z,Ae,this.url,this.requestManager,(Je,ot)=>{if(ot){for(const Lt in ot)this._doesCharSupportLocalGlyph(+Lt)||(de.glyphs[+Lt]=ot[+Lt]);de.ranges[Ae]=!0}for(const Lt of ze)Lt(Je,ot);delete de.requests[Ae]})),ze.push((Je,ot)=>{Je?ie(Je):ot&&ie(null,{stack:z,id:X,glyph:ot[X]||null})})},(z,X)=>{if(z)I(z);else if(X){const ie={};for(const{stack:de,id:_e,glyph:Ae}of X)(ie[de]||(ie[de]={}))[_e]=Ae&&{id:Ae.id,bitmap:Ae.bitmap.clone(),metrics:Ae.metrics};I(null,ie)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](d)||r.unicodeBlockLookup["Hangul Syllables"](d)||r.unicodeBlockLookup.Hiragana(d)||r.unicodeBlockLookup.Katakana(d))}_tinySDF(d,I,D){const z=this.localIdeographFontFamily;if(!z||!this._doesCharSupportLocalGlyph(D))return;let X=d.tinySDF;if(!X){let de="400";/bold/i.test(I)?de="900":/medium/i.test(I)?de="500":/light/i.test(I)&&(de="200"),X=d.tinySDF=new Z.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:z,fontWeight:de})}const ie=X.draw(String.fromCharCode(D));return{id:D,bitmap:new r.AlphaImage({width:ie.width||30,height:ie.height||30},ie.data),metrics:{width:ie.glyphWidth||24,height:ie.glyphHeight||24,left:ie.glyphLeft||0,top:ie.glyphTop-27||-8,advance:ie.glyphAdvance||24}}}}Z.loadGlyphRange=function(B,d,I,D,z){const X=256*d,ie=X+255,de=D.transformRequest(I.replace("{fontstack}",B).replace("{range}",`${X}-${ie}`),r.ResourceType.Glyphs);r.getArrayBuffer(de,(_e,Ae)=>{if(_e)z(_e);else if(Ae){const ze={};for(const Je of r.parseGlyphPbf(Ae))ze[Je.id]=Je;z(null,ze)}})},Z.TinySDF=class{constructor({fontSize:B=24,buffer:d=3,radius:I=8,cutoff:D=.25,fontFamily:z="sans-serif",fontWeight:X="normal",fontStyle:ie="normal"}={}){this.buffer=d,this.cutoff=D,this.radius=I;const de=this.size=B+4*d,_e=this._createCanvas(de),Ae=this.ctx=_e.getContext("2d",{willReadFrequently:!0});Ae.font=`${ie} ${X} ${B}px ${z}`,Ae.textBaseline="alphabetic",Ae.textAlign="left",Ae.fillStyle="black",this.gridOuter=new Float64Array(de*de),this.gridInner=new Float64Array(de*de),this.f=new Float64Array(de),this.z=new Float64Array(de+1),this.v=new Uint16Array(de)}_createCanvas(B){const d=document.createElement("canvas");return d.width=d.height=B,d}draw(B){const{width:d,actualBoundingBoxAscent:I,actualBoundingBoxDescent:D,actualBoundingBoxLeft:z,actualBoundingBoxRight:X}=this.ctx.measureText(B),ie=Math.ceil(I),de=Math.min(this.size-this.buffer,Math.ceil(X-z)),_e=Math.min(this.size-this.buffer,ie+Math.ceil(D)),Ae=de+2*this.buffer,ze=_e+2*this.buffer,Je=Math.max(Ae*ze,0),ot=new Uint8ClampedArray(Je),Lt={data:ot,width:Ae,height:ze,glyphWidth:de,glyphHeight:_e,glyphTop:ie,glyphLeft:0,glyphAdvance:d};if(de===0||_e===0)return Lt;const{ctx:kt,buffer:It,gridInner:si,gridOuter:fi}=this;kt.clearRect(It,It,de,_e),kt.fillText(B,It,It+ie);const xi=kt.getImageData(It,It,de,_e);fi.fill(O,0,Je),si.fill(0,0,Je);for(let Vt=0;Vt<_e;Vt++)for(let Pi=0;Pi<de;Pi++){const Ei=xi.data[4*(Vt*de+Pi)+3]/255;if(Ei===0)continue;const Vi=(Vt+It)*Ae+Pi+It;if(Ei===1)fi[Vi]=0,si[Vi]=O;else{const Ni=.5-Ei;fi[Vi]=Ni>0?Ni*Ni:0,si[Vi]=Ni<0?Ni*Ni:0}}V(fi,0,0,Ae,ze,Ae,this.f,this.v,this.z),V(si,It,It,de,_e,Ae,this.f,this.v,this.z);for(let Vt=0;Vt<Je;Vt++){const Pi=Math.sqrt(fi[Vt])-Math.sqrt(si[Vt]);ot[Vt]=Math.round(255-255*(Pi/this.radius+this.cutoff))}return Lt}};const te=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(B,d){return r.sphericalToCartesian(B.expression.evaluate(d))}interpolate(B,d,I){return{x:r.number(B.x,d.x,I),y:r.number(B.y,d.y,I),z:r.number(B.z,d.z,I)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),J="-transition";class oe extends r.Evented{constructor(d){super(),this._transitionable=new r.Transitionable(te),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,I={}){if(!this._validate(r.validateLight,d,I))for(const D in d){const z=d[D];D.endsWith(J)?this._transitionable.setTransition(D.slice(0,-J.length),z):this._transitionable.setValue(D,z)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,I,D){return(!D||D.validate!==!1)&&r.emitValidationErrors(this,d.call(r.validateStyle,r.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class Me{constructor(d,I){this.width=d,this.height=I,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,I){const D=d.join(",")+String(I);return this.dashEntry[D]||(this.dashEntry[D]=this.addDash(d,I)),this.dashEntry[D]}getDashRanges(d,I,D){const z=[];let X=d.length%2==1?-d[d.length-1]*D:0,ie=d[0]*D,de=!0;z.push({left:X,right:ie,isDash:de,zeroLength:d[0]===0});let _e=d[0];for(let Ae=1;Ae<d.length;Ae++){de=!de;const ze=d[Ae];X=_e*D,_e+=ze,ie=_e*D,z.push({left:X,right:ie,isDash:de,zeroLength:ze===0})}return z}addRoundDash(d,I,D){const z=I/2;for(let X=-D;X<=D;X++){const ie=this.width*(this.nextRow+D+X);let de=0,_e=d[de];for(let Ae=0;Ae<this.width;Ae++){Ae/_e.right>1&&(_e=d[++de]);const ze=Math.abs(Ae-_e.left),Je=Math.abs(Ae-_e.right),ot=Math.min(ze,Je);let Lt;const kt=X/D*(z+1);if(_e.isDash){const It=z-Math.abs(kt);Lt=Math.sqrt(ot*ot+It*It)}else Lt=z-Math.sqrt(ot*ot+kt*kt);this.data[ie+Ae]=Math.max(0,Math.min(255,Lt+128))}}}addRegularDash(d){for(let de=d.length-1;de>=0;--de){const _e=d[de],Ae=d[de+1];_e.zeroLength?d.splice(de,1):Ae&&Ae.isDash===_e.isDash&&(Ae.left=_e.left,d.splice(de,1))}const I=d[0],D=d[d.length-1];I.isDash===D.isDash&&(I.left=D.left-this.width,D.right=I.right+this.width);const z=this.width*this.nextRow;let X=0,ie=d[X];for(let de=0;de<this.width;de++){de/ie.right>1&&(ie=d[++X]);const _e=Math.abs(de-ie.left),Ae=Math.abs(de-ie.right),ze=Math.min(_e,Ae);this.data[z+de]=Math.max(0,Math.min(255,(ie.isDash?ze:-ze)+128))}}addDash(d,I){const D=I?7:0,z=2*D+1;if(this.nextRow+z>this.height)return r.warnOnce("LineAtlas out of space"),null;let X=0;for(let de=0;de<d.length;de++)X+=d[de];if(X!==0){const de=this.width/X,_e=this.getDashRanges(d,this.width,de);I?this.addRoundDash(_e,de,D):this.addRegularDash(_e)}const ie={y:(this.nextRow+D+.5)/this.height,height:2*D/this.height,width:X};return this.nextRow+=z,this.dirty=!0,ie}bind(d){const I=d.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))}}class Fe{constructor(d,I){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const D=this.workerPool.acquire(this.id);for(let z=0;z<D.length;z++){const X=new Fe.Actor(D[z],I,this.id);X.name=`Worker ${z}`,this.actors.push(X)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,I,D){r.asyncAll(this.actors,(z,X)=>{z.send(d,I,X)},D=D||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function pe(B,d,I){const D=function(z,X){if(z)return I(z);if(X){const ie=r.pick(r.extend(X,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);X.vector_layers&&(ie.vectorLayers=X.vector_layers,ie.vectorLayerIds=ie.vectorLayers.map(de=>de.id)),I(null,ie)}};return B.url?r.getJSON(d.transformRequest(B.url,r.ResourceType.Source),D):r.exported.frame(()=>D(null,B))}Fe.Actor=r.Actor;class Ie{constructor(d,I,D){this.bounds=r.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=I||0,this.maxzoom=D||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const I=Math.pow(2,d.z),D=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*I),z=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*I),X=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*I),ie=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*I);return d.x>=D&&d.x<X&&d.y>=z&&d.y<ie}}class Se extends r.Evented{constructor(d,I,D,z){if(super(),this.id=d,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(I,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=pe(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),d?this.fire(new r.ErrorEvent(d)):I&&(r.extend(this,I),I.bounds&&(this.tileBounds=new Ie(I.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z={request:this.map._requestManager.transformRequest(D,r.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function X(ie,de){return delete d.request,d.aborted?I(null):ie&&ie.status!==404?I(ie):(de&&de.resourceTiming&&(d.resourceTiming=de.resourceTiming),this.map._refreshExpiredTiles&&de&&d.setExpiryData(de),d.loadVectorData(de,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}z.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=I:d.request=d.actor.send("reloadTile",z,X.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",z,X.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class me extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},I),r.extend(this,r.pick(I,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=pe(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new r.ErrorEvent(d)):I&&(r.extend(this,I),I.bounds&&(this.tileBounds=new Ie(I.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=r.getImage(this.map._requestManager.transformRequest(D,r.ResourceType.Tile),(z,X,ie)=>{if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(z)d.state="errored",I(z);else if(X){this.map._refreshExpiredTiles&&d.setExpiryData(ie);const de=this.map.painter.context,_e=de.gl;d.texture=this.map.painter.getTileTexture(X.width),d.texture?d.texture.update(X,{useMipmap:!0}):(d.texture=new T(de,X,_e.RGBA,{useMipmap:!0}),d.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),de.extTextureFilterAnisotropic&&_e.texParameterf(_e.TEXTURE_2D,de.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,de.extTextureFilterAnisotropicMax)),d.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),I(null)}})}abortTile(d,I){d.request&&(d.request.cancel(),delete d.request),I()}unloadTile(d,I){d.texture&&this.map.painter.saveTileTexture(d.texture),I()}hasTransition(){return!1}}let et;class nt extends me{constructor(d,I,D,z){super(d,I,D,z),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function z(X,ie){X&&(d.state="errored",I(X)),ie&&(d.dem=ie,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",I(null))}d.request=r.getImage(this.map._requestManager.transformRequest(D,r.ResourceType.Tile),function(X,ie){if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(X)d.state="errored",I(X);else if(ie){this.map._refreshExpiredTiles&&d.setExpiryData(ie),delete ie.cacheControl,delete ie.expires;const de=r.isImageBitmap(ie)&&(et==null&&(et=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),et)?ie:r.exported.getImageData(ie,1),_e={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:de,encoding:this.encoding};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",_e,z.bind(this)))}}.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID)}_getNeighboringTiles(d){const I=d.canonical,D=Math.pow(2,I.z),z=(I.x-1+D)%D,X=I.x===0?d.wrap-1:d.wrap,ie=(I.x+1+D)%D,de=I.x+1===D?d.wrap+1:d.wrap,_e={};return _e[new r.OverscaledTileID(d.overscaledZ,X,I.z,z,I.y).key]={backfilled:!1},_e[new r.OverscaledTileID(d.overscaledZ,de,I.z,ie,I.y).key]={backfilled:!1},I.y>0&&(_e[new r.OverscaledTileID(d.overscaledZ,X,I.z,z,I.y-1).key]={backfilled:!1},_e[new r.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},_e[new r.OverscaledTileID(d.overscaledZ,de,I.z,ie,I.y-1).key]={backfilled:!1}),I.y+1<D&&(_e[new r.OverscaledTileID(d.overscaledZ,X,I.z,z,I.y+1).key]={backfilled:!1},_e[new r.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},_e[new r.OverscaledTileID(d.overscaledZ,de,I.z,ie,I.y+1).key]={backfilled:!1}),_e}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class Et extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=D.getActor(),this.setEventedParent(z),this._data=I.data,this._options=r.extend({},I),this._collectResourceTiming=I.collectResourceTiming,I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;const X=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*X,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*X,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?I.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:r.EXTENT,radius:(I.clusterRadius||50)*X,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData("content"),this}getClusterExpansionZoom(d,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},I),this}getClusterChildren(d,I){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},I),this}getClusterLeaves(d,I,D,z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:I,offset:D},z),this}_updateWorkerData(d){const I=r.extend({},this.workerOptions),D=this._data;typeof D=="string"?(I.request=this.map._requestManager.transformRequest(r.exported.resolveURL(D),r.ResourceType.Source),I.request.collectResourceTiming=this._collectResourceTiming):I.data=JSON.stringify(D),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,I,(z,X)=>{if(this._pendingLoads--,this._removed||X&&X.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:d}));let ie=null;if(X&&X.resourceTiming&&X.resourceTiming[this.id]&&(ie=X.resourceTiming[this.id].slice(0)),z)return void this.fire(new r.ErrorEvent(z));const de={dataType:"source",sourceDataType:d};this._collectResourceTiming&&ie&&ie.length>0&&r.extend(de,{resourceTiming:ie}),this.fire(new r.Event("data",de))})}loaded(){return this._pendingLoads===0}loadTile(d,I){const D=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const z={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(D,z,(X,ie)=>(delete d.request,d.unloadVectorData(),d.aborted?I(null):X?I(X):(d.loadVectorData(ie,this.map.painter,D==="reloadTile"),I(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var it=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class we extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=I}load(d,I){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(D,z)=>{this._loaded=!0,D?this.fire(new r.ErrorEvent(D)):z&&(this.image=z,d&&(this.coordinates=d),I&&I(),this._finishLoading())})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}setCoordinates(d){this.coordinates=d;const I=d.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(z){let X=1/0,ie=1/0,de=-1/0,_e=-1/0;for(const ot of z)X=Math.min(X,ot.x),ie=Math.min(ie,ot.y),de=Math.max(de,ot.x),_e=Math.max(_e,ot.y);const Ae=Math.max(de-X,_e-ie),ze=Math.max(0,Math.floor(-Math.log(Ae)/Math.LN2)),Je=Math.pow(2,ze);return new r.CanonicalTileID(ze,Math.floor((X+de)/2*Je),Math.floor((ie+_e)/2*Je))}(I),this.minzoom=this.maxzoom=this.tileID.z;const D=I.map(z=>this.tileID.getTilePoint(z)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(D[0].x,D[0].y,0,0),this._boundsArray.emplaceBack(D[1].x,D[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(D[3].x,D[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(D[2].x,D[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,it.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(d,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}loadTile(d,I){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},I(null)):(d.state="errored",I(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ke extends we{constructor(d,I,D,z){super(d,I,D,z),this.roundZoom=!0,this.type="video",this.options=I}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const I of d.urls)this.urls.push(this.map._requestManager.transformRequest(I,r.ResourceType.Source).url);r.getVideo(this.urls,(I,D)=>{this._loaded=!0,I?this.fire(new r.ErrorEvent(I)):D&&(this.video=D,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const I=this.video.seekable;d<I.start(0)||d>I.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${I.start(0)} and ${I.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,it.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new T(d,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Oe extends we{constructor(d,I,D,z){super(d,I,D,z),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(X=>!Array.isArray(X)||X.length!==2||X.some(ie=>typeof ie!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const I=this.map.painter.context,D=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,it.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(I,this.canvas,D.RGBA,{premultiply:!0});for(const z in this.tiles){const X=this.tiles[z];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const le={vector:Se,raster:me,"raster-dem":nt,geojson:Et,video:ke,image:we,canvas:Oe};function Ce(B,d){const I=r.create();return r.translate(I,I,[1,1,0]),r.scale(I,I,[.5*B.width,.5*B.height,1]),r.multiply(I,I,B.calculatePosMatrix(d.toUnwrapped()))}function he(B,d,I,D,z,X){const ie=function(Je,ot,Lt){if(Je)for(const kt of Je){const It=ot[kt];if(It&&It.source===Lt&&It.type==="fill-extrusion")return!0}else for(const kt in ot){const It=ot[kt];if(It.source===Lt&&It.type==="fill-extrusion")return!0}return!1}(z&&z.layers,d,B.id),de=X.maxPitchScaleFactor(),_e=B.tilesIn(D,de,ie);_e.sort(ge);const Ae=[];for(const Je of _e)Ae.push({wrappedTileID:Je.tileID.wrapped().key,queryResults:Je.tile.queryRenderedFeatures(d,I,B._state,Je.queryGeometry,Je.cameraQueryGeometry,Je.scale,z,X,de,Ce(B.transform,Je.tileID))});const ze=function(Je){const ot={},Lt={};for(const kt of Je){const It=kt.queryResults,si=kt.wrappedTileID,fi=Lt[si]=Lt[si]||{};for(const xi in It){const Vt=It[xi],Pi=fi[xi]=fi[xi]||{},Ei=ot[xi]=ot[xi]||[];for(const Vi of Vt)Pi[Vi.featureIndex]||(Pi[Vi.featureIndex]=!0,Ei.push(Vi))}}return ot}(Ae);for(const Je in ze)ze[Je].forEach(ot=>{const Lt=ot.feature,kt=B.getFeatureState(Lt.layer["source-layer"],Lt.id);Lt.source=Lt.layer.source,Lt.layer["source-layer"]&&(Lt.sourceLayer=Lt.layer["source-layer"]),Lt.state=kt});return ze}function ge(B,d){const I=B.tileID,D=d.tileID;return I.overscaledZ-D.overscaledZ||I.canonical.y-D.canonical.y||I.wrap-D.wrap||I.canonical.x-D.canonical.x}class Be{constructor(d,I){this.tileID=d,this.uid=r.uniqueId(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const I=d+this.timeAdded;I<r.exported.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.textures.forEach(I=>d.saveTileTexture(I)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(d,I,D){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(z,X){const ie={};if(!X)return ie;for(const de of z){const _e=de.layerIds.map(Ae=>X.getLayer(Ae)).filter(Boolean);if(_e.length!==0){de.layers=_e,de.stateDependentLayerIds&&(de.stateDependentLayers=de.stateDependentLayerIds.map(Ae=>_e.filter(ze=>ze.id===Ae)[0]));for(const Ae of _e)ie[Ae.id]=de}}return ie}(d.buckets,I.style),this.hasSymbolBuckets=!1;for(const z in this.buckets){const X=this.buckets[z];if(X instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!D)break;X.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const z in this.buckets){const X=this.buckets[z];if(X instanceof r.SymbolBucket&&X.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const z in this.buckets){const X=this.buckets[z];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(z).queryRadius(X))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const D in this.buckets){const z=this.buckets[D];z.uploadPending()&&z.upload(d)}const I=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(d,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(d,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,I,D,z,X,ie,de,_e,Ae,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:X,scale:ie,tileSize:this.tileSize,pixelPosMatrix:ze,transform:_e,params:de,queryPadding:this.queryPadding*Ae},d,I,D):{}}querySourceFeatures(d,I){const D=this.latestFeatureIndex;if(!D||!D.rawTileData)return;const z=D.loadVTLayers(),X=I?I.sourceLayer:"",ie=z._geojsonTileLayer||z[X];if(!ie)return;const de=r.createFilter(I&&I.filter),{z:_e,x:Ae,y:ze}=this.tileID.canonical,Je={z:_e,x:Ae,y:ze};for(let ot=0;ot<ie.length;ot++){const Lt=ie.feature(ot);if(de.needGeometry){const si=r.toEvaluationFeature(Lt,!0);if(!de.filter(new r.EvaluationParameters(this.tileID.overscaledZ),si,this.tileID.canonical))continue}else if(!de.filter(new r.EvaluationParameters(this.tileID.overscaledZ),Lt))continue;const kt=D.getId(Lt,X),It=new r.GeoJSONFeature(Lt,_e,Ae,ze,kt);It.tile=Je,d.push(It)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const I=this.expirationTime;if(d.cacheControl){const D=r.parseCacheControl(d.cacheControl);D["max-age"]&&(this.expirationTime=Date.now()+1e3*D["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const D=Date.now();let z=!1;if(this.expirationTime>D)z=!1;else if(I)if(this.expirationTime<I)z=!0;else{const X=this.expirationTime-I;X?this.expirationTime=D+Math.max(X,3e4):z=!0}else z=!0;z?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const D=this.latestFeatureIndex.loadVTLayers();for(const z in this.buckets){if(!I.style.hasLayer(z))continue;const X=this.buckets[z],ie=X.layers[0].sourceLayer||"_geojsonTileLayer",de=D[ie],_e=d[ie];if(!de||!_e||Object.keys(_e).length===0)continue;X.update(_e,de,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Ae=I&&I.style&&I.style.getLayer(z);Ae&&(this.queryPadding=Math.max(this.queryPadding,Ae.queryRadius(X)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=r.exported.now()+d}setDependencies(d,I){const D={};for(const z of I)D[z]=!0;this.dependencies[d]=D}hasDependency(d,I){for(const D of d){const z=this.dependencies[D];if(z){for(const X of I)if(z[X])return!0}}return!1}}class We{constructor(d,I){this.max=d,this.onRemove=I,this.reset()}reset(){for(const d in this.data)for(const I of this.data[d])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(d,I,D){const z=d.wrapped().key;this.data[z]===void 0&&(this.data[z]=[]);const X={value:I,timeout:void 0};if(D!==void 0&&(X.timeout=setTimeout(()=>{this.remove(d,X)},D)),this.data[z].push(X),this.order.push(z),this.order.length>this.max){const ie=this._getAndRemoveByKey(this.order[0]);ie&&this.onRemove(ie)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const I=this.data[d].shift();return I.timeout&&clearTimeout(I.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),I.value}getByKey(d){const I=this.data[d];return I?I[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,I){if(!this.has(d))return this;const D=d.wrapped().key,z=I===void 0?0:this.data[D].indexOf(I),X=this.data[D][z];return this.data[D].splice(z,1),X.timeout&&clearTimeout(X.timeout),this.data[D].length===0&&delete this.data[D],this.onRemove(X.value),this.order.splice(this.order.indexOf(D),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(d){const I=[];for(const D in this.data)for(const z of this.data[D])d(z.value)||I.push(z);for(const D of I)this.remove(D.value.tileID,D)}}class st{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,I,D){const z=String(I);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][z]=this.stateChanges[d][z]||{},r.extend(this.stateChanges[d][z],D),this.deletedStates[d]===null){this.deletedStates[d]={};for(const X in this.state[d])X!==z&&(this.deletedStates[d][X]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][z]===null){this.deletedStates[d][z]={};for(const X in this.state[d][z])D[X]||(this.deletedStates[d][z][X]=null)}else for(const X in D)this.deletedStates[d]&&this.deletedStates[d][z]&&this.deletedStates[d][z][X]===null&&delete this.deletedStates[d][z][X]}removeFeatureState(d,I,D){if(this.deletedStates[d]===null)return;const z=String(I);if(this.deletedStates[d]=this.deletedStates[d]||{},D&&I!==void 0)this.deletedStates[d][z]!==null&&(this.deletedStates[d][z]=this.deletedStates[d][z]||{},this.deletedStates[d][z][D]=null);else if(I!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][z])for(D in this.deletedStates[d][z]={},this.stateChanges[d][z])this.deletedStates[d][z][D]=null;else this.deletedStates[d][z]=null;else this.deletedStates[d]=null}getState(d,I){const D=String(I),z=r.extend({},(this.state[d]||{})[D],(this.stateChanges[d]||{})[D]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const X=this.deletedStates[d][I];if(X===null)return{};for(const ie in X)delete z[ie]}return z}initializeTileState(d,I){d.setFeatureState(this.state,I)}coalesceChanges(d,I){const D={};for(const z in this.stateChanges){this.state[z]=this.state[z]||{};const X={};for(const ie in this.stateChanges[z])this.state[z][ie]||(this.state[z][ie]={}),r.extend(this.state[z][ie],this.stateChanges[z][ie]),X[ie]=this.state[z][ie];D[z]=X}for(const z in this.deletedStates){this.state[z]=this.state[z]||{};const X={};if(this.deletedStates[z]===null)for(const ie in this.state[z])X[ie]={},this.state[z][ie]={};else for(const ie in this.deletedStates[z]){if(this.deletedStates[z][ie]===null)this.state[z][ie]={};else for(const de of Object.keys(this.deletedStates[z][ie]))delete this.state[z][ie][de];X[ie]=this.state[z][ie]}D[z]=D[z]||{},r.extend(D[z],X)}if(this.stateChanges={},this.deletedStates={},Object.keys(D).length!==0)for(const z in d)d[z].setFeatureState(D,I)}}class Xe extends r.Evented{constructor(d,I,D){super(),this.id=d,this.dispatcher=D,this.on("data",z=>{z.dataType==="source"&&z.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(z,X,ie,de){const _e=new le[X.type](z,X,ie,de);if(_e.id!==z)throw new Error(`Expected Source id to be ${z} instead of ${_e.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],_e),_e}(d,I,D,this),this._tiles={},this._cache=new We(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new st}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const d in this._tiles){const I=this._tiles[d];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,I){return this._source.loadTile(d,I)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new r.Event("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const I in this._tiles){const D=this._tiles[I];D.upload(d),D.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort(gt).map(d=>d.key)}getRenderableIds(d){const I=[];for(const D in this._tiles)this._isIdRenderable(D,d)&&I.push(this._tiles[D]);return d?I.sort((D,z)=>{const X=D.tileID,ie=z.tileID,de=new r.pointGeometry(X.canonical.x,X.canonical.y)._rotate(this.transform.angle),_e=new r.pointGeometry(ie.canonical.x,ie.canonical.y)._rotate(this.transform.angle);return X.overscaledZ-ie.overscaledZ||_e.y-de.y||_e.x-de.x}).map(D=>D.tileID.key):I.map(D=>D.tileID).sort(gt).map(D=>D.key)}hasRenderableParent(d){const I=this.findLoadedParent(d,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(d,I){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(I||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,I){const D=this._tiles[d];D&&(D.state!=="loading"&&(D.state=I),this._loadTile(D,this._tileLoaded.bind(this,D,d,I)))}_tileLoaded(d,I,D,z){if(z)return d.state="errored",void(z.status!==404?this._source.fire(new r.ErrorEvent(z,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=r.exported.now(),D==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(I,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const I=this.getRenderableIds();for(let z=0;z<I.length;z++){const X=I[z];if(d.neighboringTiles&&d.neighboringTiles[X]){const ie=this.getTileByID(X);D(d,ie),D(ie,d)}}function D(z,X){z.needsHillshadePrepare=!0,z.needsTerrainPrepare=!0;let ie=X.tileID.canonical.x-z.tileID.canonical.x;const de=X.tileID.canonical.y-z.tileID.canonical.y,_e=Math.pow(2,z.tileID.canonical.z),Ae=X.tileID.key;ie===0&&de===0||Math.abs(de)>1||(Math.abs(ie)>1&&(Math.abs(ie+_e)===1?ie+=_e:Math.abs(ie-_e)===1&&(ie-=_e)),X.dem&&z.dem&&(z.dem.backfillBorder(X.dem,ie,de),z.neighboringTiles&&z.neighboringTiles[Ae]&&(z.neighboringTiles[Ae].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,I,D,z){for(const X in this._tiles){let ie=this._tiles[X];if(z[X]||!ie.hasData()||ie.tileID.overscaledZ<=I||ie.tileID.overscaledZ>D)continue;let de=ie.tileID;for(;ie&&ie.tileID.overscaledZ>I+1;){const Ae=ie.tileID.scaledTo(ie.tileID.overscaledZ-1);ie=this._tiles[Ae.key],ie&&ie.hasData()&&(de=Ae)}let _e=de;for(;_e.overscaledZ>I;)if(_e=_e.scaledTo(_e.overscaledZ-1),d[_e.key]){z[de.key]=de;break}}}findLoadedParent(d,I){if(d.key in this._loadedParentTiles){const D=this._loadedParentTiles[d.key];return D&&D.tileID.overscaledZ>=I?D:null}for(let D=d.overscaledZ-1;D>=I;D--){const z=d.scaledTo(D),X=this._getLoadedTile(z);if(X)return X}}_getLoadedTile(d){const I=this._tiles[d.key];return I&&I.hasData()?I:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const I=Math.ceil(d.width/this._source.tileSize)+1,D=Math.ceil(d.height/this._source.tileSize)+1,z=Math.floor(I*D*5),X=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,z):z;this._cache.setMaxSize(X)}handleWrapJump(d){const I=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,I){const D={};for(const z in this._tiles){const X=this._tiles[z];X.tileID=X.tileID.unwrapTo(X.tileID.wrap+I),D[X.tileID.key]=X}this._tiles=D;for(const z in this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(const z in this._tiles)this._setTileReloadTimer(z,this._tiles[z])}}update(d,I){if(this.transform=d,this.terrain=I,!this._sourceLoaded||this._paused)return;let D;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ae=>new r.OverscaledTileID(Ae.canonical.z,Ae.wrap,Ae.canonical.z,Ae.canonical.x,Ae.canonical.y)):(D=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:I}),this._source.hasTile&&(D=D.filter(Ae=>this._source.hasTile(Ae)))):D=[];const z=d.coveringZoomLevel(this._source),X=Math.max(z-Xe.maxOverzooming,this._source.minzoom),ie=Math.max(z+Xe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ae={};for(const ze of D)if(ze.canonical.z>this._source.minzoom){const Je=ze.scaledTo(ze.canonical.z-1);Ae[Je.key]=Je;const ot=ze.scaledTo(Math.max(this._source.minzoom,Math.min(ze.canonical.z,5)));Ae[ot.key]=ot}D=D.concat(Object.values(Ae))}const de=this._updateRetainedTiles(D,z);if(Pt(this._source.type)){const Ae={},ze={},Je=Object.keys(de);for(const ot of Je){const Lt=de[ot],kt=this._tiles[ot];if(!kt||kt.fadeEndTime&&kt.fadeEndTime<=r.exported.now())continue;const It=this.findLoadedParent(Lt,X);It&&(this._addTile(It.tileID),Ae[It.tileID.key]=It.tileID),ze[ot]=Lt}this._retainLoadedChildren(ze,z,ie,de);for(const ot in Ae)de[ot]||(this._coveredTiles[ot]=!0,de[ot]=Ae[ot]);if(I){const ot={},Lt={};for(const kt of D)this._tiles[kt.key].hasData()?ot[kt.key]=kt:Lt[kt.key]=kt;for(const kt in Lt){const It=Lt[kt].children(this._source.maxzoom);this._tiles[It[0].key]&&this._tiles[It[1].key]&&this._tiles[It[2].key]&&this._tiles[It[3].key]&&(ot[It[0].key]=de[It[0].key]=It[0],ot[It[1].key]=de[It[1].key]=It[1],ot[It[2].key]=de[It[2].key]=It[2],ot[It[3].key]=de[It[3].key]=It[3],delete Lt[kt])}for(const kt in Lt){const It=this.findLoadedParent(Lt[kt],this._source.minzoom);if(It){ot[It.tileID.key]=de[It.tileID.key]=It.tileID;for(const si in ot)ot[si].isChildOf(It.tileID)&&delete ot[si]}}for(const kt in this._tiles)ot[kt]||(this._coveredTiles[kt]=!0)}}for(const Ae in de)this._tiles[Ae].clearFadeHold();const _e=r.keysDifference(this._tiles,de);for(const Ae of _e){const ze=this._tiles[Ae];ze.hasSymbolBuckets&&!ze.holdingForFade()?ze.setHoldDuration(this.map._fadeDuration):ze.hasSymbolBuckets&&!ze.symbolFadeFinished()||this._removeTile(Ae)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,I){const D={},z={},X=Math.max(I-Xe.maxOverzooming,this._source.minzoom),ie=Math.max(I+Xe.maxUnderzooming,this._source.minzoom),de={};for(const _e of d){const Ae=this._addTile(_e);D[_e.key]=_e,Ae.hasData()||I<this._source.maxzoom&&(de[_e.key]=_e)}this._retainLoadedChildren(de,I,ie,D);for(const _e of d){let Ae=this._tiles[_e.key];if(Ae.hasData())continue;if(I+1>this._source.maxzoom){const Je=_e.children(this._source.maxzoom)[0],ot=this.getTile(Je);if(ot&&ot.hasData()){D[Je.key]=Je;continue}}else{const Je=_e.children(this._source.maxzoom);if(D[Je[0].key]&&D[Je[1].key]&&D[Je[2].key]&&D[Je[3].key])continue}let ze=Ae.wasRequested();for(let Je=_e.overscaledZ-1;Je>=X;--Je){const ot=_e.scaledTo(Je);if(z[ot.key]||(z[ot.key]=!0,Ae=this.getTile(ot),!Ae&&ze&&(Ae=this._addTile(ot)),Ae&&(D[ot.key]=ot,ze=Ae.wasRequested(),Ae.hasData())))break}}return D}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const I=[];let D,z=this._tiles[d].tileID;for(;z.overscaledZ>0;){if(z.key in this._loadedParentTiles){D=this._loadedParentTiles[z.key];break}I.push(z.key);const X=z.scaledTo(z.overscaledZ-1);if(D=this._getLoadedTile(X),D)break;z=X}for(const X of I)this._loadedParentTiles[X]=D}}_addTile(d){let I=this._tiles[d.key];if(I)return I;I=this._cache.getAndRemove(d),I&&(this._setTileReloadTimer(d.key,I),I.tileID=d,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,I)));const D=I;return I||(I=new Be(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,d.key,I.state))),I.uses++,this._tiles[d.key]=I,D||this._source.fire(new r.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I}_setTileReloadTimer(d,I){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const D=I.getExpiryTimeout();D&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},D))}_removeTile(d){const I=this._tiles[d];I&&(I.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,I,D){const z=[],X=this.transform;if(!X)return z;const ie=D?X.getCameraQueryGeometry(d):d,de=d.map(kt=>X.pointCoordinate(kt,this.terrain)),_e=ie.map(kt=>X.pointCoordinate(kt,this.terrain)),Ae=this.getIds();let ze=1/0,Je=1/0,ot=-1/0,Lt=-1/0;for(const kt of _e)ze=Math.min(ze,kt.x),Je=Math.min(Je,kt.y),ot=Math.max(ot,kt.x),Lt=Math.max(Lt,kt.y);for(let kt=0;kt<Ae.length;kt++){const It=this._tiles[Ae[kt]];if(It.holdingForFade())continue;const si=It.tileID,fi=Math.pow(2,X.zoom-It.tileID.overscaledZ),xi=I*It.queryPadding*r.EXTENT/It.tileSize/fi,Vt=[si.getTilePoint(new r.MercatorCoordinate(ze,Je)),si.getTilePoint(new r.MercatorCoordinate(ot,Lt))];if(Vt[0].x-xi<r.EXTENT&&Vt[0].y-xi<r.EXTENT&&Vt[1].x+xi>=0&&Vt[1].y+xi>=0){const Pi=de.map(Vi=>si.getTilePoint(Vi)),Ei=_e.map(Vi=>si.getTilePoint(Vi));z.push({tile:It,tileID:si,queryGeometry:Pi,cameraQueryGeometry:Ei,scale:fi})}}return z}getVisibleCoordinates(d){const I=this.getRenderableIds(d).map(D=>this._tiles[D].tileID);for(const D of I)D.posMatrix=this.transform.calculatePosMatrix(D.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(Pt(this._source.type))for(const d in this._tiles){const I=this._tiles[d];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(d,I,D){this._state.updateState(d=d||"_geojsonTileLayer",I,D)}removeFeatureState(d,I,D){this._state.removeFeatureState(d=d||"_geojsonTileLayer",I,D)}getFeatureState(d,I){return this._state.getState(d=d||"_geojsonTileLayer",I)}setDependencies(d,I,D){const z=this._tiles[d];z&&z.setDependencies(I,D)}reloadTilesForDependencies(d,I){for(const D in this._tiles)this._tiles[D].hasDependency(d,I)&&this._reloadTile(D,"reloading");this._cache.filter(D=>!D.hasDependency(d,I))}}function gt(B,d){const I=Math.abs(2*B.wrap)-+(B.wrap<0),D=Math.abs(2*d.wrap)-+(d.wrap<0);return B.overscaledZ-d.overscaledZ||D-I||d.canonical.y-B.canonical.y||d.canonical.x-B.canonical.x}function Pt(B){return B==="raster"||B==="image"||B==="video"}Xe.maxOverzooming=10,Xe.maxUnderzooming=3;const ri="mapboxgl_preloaded_worker_pool";class ut{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<ut.workerCount;)this.workers.push(new Worker(la.workerUrl));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(I=>{I.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ri]}numActive(){return Object.keys(this.active).length}}const bt=Math.floor(r.exported.hardwareConcurrency/2);let vt;function Ke(){return vt||(vt=new ut),vt}function ei(B,d){const I={};for(const D in B)D!=="ref"&&(I[D]=B[D]);return r.refProperties.forEach(D=>{D in d&&(I[D]=d[D])}),I}function li(B){B=B.slice();const d=Object.create(null);for(let I=0;I<B.length;I++)d[B[I].id]=B[I];for(let I=0;I<B.length;I++)"ref"in B[I]&&(B[I]=ei(B[I],d[B[I].ref]));return B}ut.workerCount=Math.max(Math.min(bt,6),1);const $t={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Si(B,d,I){I.push({command:$t.addSource,args:[B,d[B]]})}function Ti(B,d,I){d.push({command:$t.removeSource,args:[B]}),I[B]=!0}function Yt(B,d,I,D){Ti(B,I,D),Si(B,d,I)}function mi(B,d,I){let D;for(D in B[I])if(Object.prototype.hasOwnProperty.call(B[I],D)&&D!=="data"&&!b(B[I][D],d[I][D]))return!1;for(D in d[I])if(Object.prototype.hasOwnProperty.call(d[I],D)&&D!=="data"&&!b(B[I][D],d[I][D]))return!1;return!0}function Wi(B,d,I,D,z,X){let ie;for(ie in d=d||{},B=B||{})Object.prototype.hasOwnProperty.call(B,ie)&&(b(B[ie],d[ie])||I.push({command:X,args:[D,ie,d[ie],z]}));for(ie in d)Object.prototype.hasOwnProperty.call(d,ie)&&!Object.prototype.hasOwnProperty.call(B,ie)&&(b(B[ie],d[ie])||I.push({command:X,args:[D,ie,d[ie],z]}))}function Ci(B){return B.id}function ti(B,d){return B[d.id]=d,B}class Pe{constructor(d,I){this.reset(d,I)}reset(d,I){this.points=d||[],this._distances=[0];for(let D=1;D<this.points.length;D++)this._distances[D]=this._distances[D-1]+this.points[D].dist(this.points[D-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=r.clamp(d,0,1);let I=1,D=this._distances[I];const z=d*this.paddedLength+this.padding;for(;D<z&&I<this._distances.length;)D=this._distances[++I];const X=I-1,ie=this._distances[X],de=D-ie,_e=de>0?(z-ie)/de:0;return this.points[X].mult(1-_e).add(this.points[I].mult(_e))}}function Q(B,d){let I=!0;return B==="always"||B!=="never"&&d!=="never"||(I=!1),I}class ae{constructor(d,I,D){const z=this.boxCells=[],X=this.circleCells=[];this.xCellCount=Math.ceil(d/D),this.yCellCount=Math.ceil(I/D);for(let ie=0;ie<this.xCellCount*this.yCellCount;ie++)z.push([]),X.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=I,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/I,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,I,D,z,X){this._forEachCell(I,D,z,X,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(I),this.bboxes.push(D),this.bboxes.push(z),this.bboxes.push(X)}insertCircle(d,I,D,z){this._forEachCell(I-z,D-z,I+z,D+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(I),this.circles.push(D),this.circles.push(z)}_insertBoxCell(d,I,D,z,X,ie){this.boxCells[X].push(ie)}_insertCircleCell(d,I,D,z,X,ie){this.circleCells[X].push(ie)}_query(d,I,D,z,X,ie,de){if(D<0||d>this.width||z<0||I>this.height)return[];const _e=[];if(d<=0&&I<=0&&this.width<=D&&this.height<=z){if(X)return[{key:null,x1:d,y1:I,x2:D,y2:z}];for(let Ae=0;Ae<this.boxKeys.length;Ae++)_e.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(let Ae=0;Ae<this.circleKeys.length;Ae++){const ze=this.circles[3*Ae],Je=this.circles[3*Ae+1],ot=this.circles[3*Ae+2];_e.push({key:this.circleKeys[Ae],x1:ze-ot,y1:Je-ot,x2:ze+ot,y2:Je+ot})}}else this._forEachCell(d,I,D,z,this._queryCell,_e,{hitTest:X,overlapMode:ie,seenUids:{box:{},circle:{}}},de);return _e}query(d,I,D,z){return this._query(d,I,D,z,!1,null)}hitTest(d,I,D,z,X,ie){return this._query(d,I,D,z,!0,X,ie).length>0}hitTestCircle(d,I,D,z,X){const ie=d-D,de=d+D,_e=I-D,Ae=I+D;if(de<0||ie>this.width||Ae<0||_e>this.height)return!1;const ze=[];return this._forEachCell(ie,_e,de,Ae,this._queryCellCircle,ze,{hitTest:!0,overlapMode:z,circle:{x:d,y:I,radius:D},seenUids:{box:{},circle:{}}},X),ze.length>0}_queryCell(d,I,D,z,X,ie,de,_e){const{seenUids:Ae,hitTest:ze,overlapMode:Je}=de,ot=this.boxCells[X];if(ot!==null){const kt=this.bboxes;for(const It of ot)if(!Ae.box[It]){Ae.box[It]=!0;const si=4*It,fi=this.boxKeys[It];if(d<=kt[si+2]&&I<=kt[si+3]&&D>=kt[si+0]&&z>=kt[si+1]&&(!_e||_e(fi))&&(!ze||!Q(Je,fi.overlapMode))&&(ie.push({key:fi,x1:kt[si],y1:kt[si+1],x2:kt[si+2],y2:kt[si+3]}),ze))return!0}}const Lt=this.circleCells[X];if(Lt!==null){const kt=this.circles;for(const It of Lt)if(!Ae.circle[It]){Ae.circle[It]=!0;const si=3*It,fi=this.circleKeys[It];if(this._circleAndRectCollide(kt[si],kt[si+1],kt[si+2],d,I,D,z)&&(!_e||_e(fi))&&(!ze||!Q(Je,fi.overlapMode))){const xi=kt[si],Vt=kt[si+1],Pi=kt[si+2];if(ie.push({key:fi,x1:xi-Pi,y1:Vt-Pi,x2:xi+Pi,y2:Vt+Pi}),ze)return!0}}}return!1}_queryCellCircle(d,I,D,z,X,ie,de,_e){const{circle:Ae,seenUids:ze,overlapMode:Je}=de,ot=this.boxCells[X];if(ot!==null){const kt=this.bboxes;for(const It of ot)if(!ze.box[It]){ze.box[It]=!0;const si=4*It,fi=this.boxKeys[It];if(this._circleAndRectCollide(Ae.x,Ae.y,Ae.radius,kt[si+0],kt[si+1],kt[si+2],kt[si+3])&&(!_e||_e(fi))&&!Q(Je,fi.overlapMode))return ie.push(!0),!0}}const Lt=this.circleCells[X];if(Lt!==null){const kt=this.circles;for(const It of Lt)if(!ze.circle[It]){ze.circle[It]=!0;const si=3*It,fi=this.circleKeys[It];if(this._circlesCollide(kt[si],kt[si+1],kt[si+2],Ae.x,Ae.y,Ae.radius)&&(!_e||_e(fi))&&!Q(Je,fi.overlapMode))return ie.push(!0),!0}}}_forEachCell(d,I,D,z,X,ie,de,_e){const Ae=this._convertToXCellCoord(d),ze=this._convertToYCellCoord(I),Je=this._convertToXCellCoord(D),ot=this._convertToYCellCoord(z);for(let Lt=Ae;Lt<=Je;Lt++)for(let kt=ze;kt<=ot;kt++)if(X.call(this,d,I,D,z,this.xCellCount*kt+Lt,ie,de,_e))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,I,D,z,X,ie){const de=z-d,_e=X-I,Ae=D+ie;return Ae*Ae>de*de+_e*_e}_circleAndRectCollide(d,I,D,z,X,ie,de){const _e=(ie-z)/2,Ae=Math.abs(d-(z+_e));if(Ae>_e+D)return!1;const ze=(de-X)/2,Je=Math.abs(I-(X+ze));if(Je>ze+D)return!1;if(Ae<=_e||Je<=ze)return!0;const ot=Ae-_e,Lt=Je-ze;return ot*ot+Lt*Lt<=D*D}}function Qe(B,d,I,D,z){const X=r.create();return d?(r.scale(X,X,[1/z,1/z,1]),I||r.rotateZ(X,X,D.angle)):r.multiply(X,D.labelPlaneMatrix,B),X}function _t(B,d,I,D,z){if(d){const X=r.clone(B);return r.scale(X,X,[z,z,1]),I||r.rotateZ(X,X,-D.angle),X}return D.glCoordMatrix}function Jt(B,d,I){let D;I?(D=[B.x,B.y,I(B.x,B.y),1],r.transformMat4(D,D,d)):(D=[B.x,B.y,0,1],fn(D,D,d));const z=D[3];return{point:new r.pointGeometry(D[0]/z,D[1]/z),signedDistanceFromCamera:z}}function di(B,d){return .5+B/d*.5}function wn(B,d){const I=B[0]/B[3],D=B[1]/B[3];return I>=-d[0]&&I<=d[0]&&D>=-d[1]&&D<=d[1]}function Ln(B,d,I,D,z,X,ie,de,_e,Ae){const ze=D?B.textSizeData:B.iconSizeData,Je=r.evaluateSizeForZoom(ze,I.transform.zoom),ot=[256/I.width*2+1,256/I.height*2+1],Lt=D?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Lt.clear();const kt=B.lineVertexArray,It=D?B.text.placedSymbolArray:B.icon.placedSymbolArray,si=I.transform.width/I.transform.height;let fi=!1;for(let xi=0;xi<It.length;xi++){const Vt=It.get(xi);if(Vt.hidden||Vt.writingMode===r.WritingMode.vertical&&!fi){zn(Vt.numGlyphs,Lt);continue}let Pi;if(fi=!1,Ae?(Pi=[Vt.anchorX,Vt.anchorY,Ae(Vt.anchorX,Vt.anchorY),1],r.transformMat4(Pi,Pi,d)):(Pi=[Vt.anchorX,Vt.anchorY,0,1],fn(Pi,Pi,d)),!wn(Pi,ot)){zn(Vt.numGlyphs,Lt);continue}const Ei=di(I.transform.cameraToCenterDistance,Pi[3]),Vi=r.evaluateSizeForFeature(ze,Je,Vt),Ni=ie?Vi/Ei:Vi*Ei,sn=new r.pointGeometry(Vt.anchorX,Vt.anchorY),zi=Jt(sn,z,Ae).point,Rn={},vn=Xi(Vt,Ni,!1,de,d,z,X,B.glyphOffsetArray,kt,Lt,zi,sn,Rn,si,_e,Ae);fi=vn.useVertical,(vn.notEnoughRoom||fi||vn.needsFlipping&&Xi(Vt,Ni,!0,de,d,z,X,B.glyphOffsetArray,kt,Lt,zi,sn,Rn,si,_e,Ae).notEnoughRoom)&&zn(Vt.numGlyphs,Lt)}D?B.text.dynamicLayoutVertexBuffer.updateData(Lt):B.icon.dynamicLayoutVertexBuffer.updateData(Lt)}function hn(B,d,I,D,z,X,ie,de,_e,Ae,ze,Je,ot){const Lt=de.glyphStartIndex+de.numGlyphs,kt=de.lineStartIndex,It=de.lineStartIndex+de.lineLength,si=d.getoffsetX(de.glyphStartIndex),fi=d.getoffsetX(Lt-1),xi=Gn(B*si,I,D,z,X,ie,de.segment,kt,It,_e,Ae,ze,Je,ot);if(!xi)return null;const Vt=Gn(B*fi,I,D,z,X,ie,de.segment,kt,It,_e,Ae,ze,Je,ot);return Vt?{first:xi,last:Vt}:null}function Bi(B,d,I,D){return B===r.WritingMode.horizontal&&Math.abs(I.y-d.y)>Math.abs(I.x-d.x)*D?{useVertical:!0}:(B===r.WritingMode.vertical?d.y<I.y:d.x>I.x)?{needsFlipping:!0}:null}function Xi(B,d,I,D,z,X,ie,de,_e,Ae,ze,Je,ot,Lt,kt,It){const si=d/24,fi=B.lineOffsetX*si,xi=B.lineOffsetY*si;let Vt;if(B.numGlyphs>1){const Pi=B.glyphStartIndex+B.numGlyphs,Ei=B.lineStartIndex,Vi=B.lineStartIndex+B.lineLength,Ni=hn(si,de,fi,xi,I,ze,Je,B,_e,X,ot,kt,It);if(!Ni)return{notEnoughRoom:!0};const sn=Jt(Ni.first.point,ie,It).point,zi=Jt(Ni.last.point,ie,It).point;if(D&&!I){const Rn=Bi(B.writingMode,sn,zi,Lt);if(Rn)return Rn}Vt=[Ni.first];for(let Rn=B.glyphStartIndex+1;Rn<Pi-1;Rn++)Vt.push(Gn(si*de.getoffsetX(Rn),fi,xi,I,ze,Je,B.segment,Ei,Vi,_e,X,ot,kt,It));Vt.push(Ni.last)}else{if(D&&!I){const Ei=Jt(Je,z,It).point,Vi=B.lineStartIndex+B.segment+1,Ni=new r.pointGeometry(_e.getx(Vi),_e.gety(Vi)),sn=Jt(Ni,z,It),zi=sn.signedDistanceFromCamera>0?sn.point:Hn(Je,Ni,Ei,1,z,It),Rn=Bi(B.writingMode,Ei,zi,Lt);if(Rn)return Rn}const Pi=Gn(si*de.getoffsetX(B.glyphStartIndex),fi,xi,I,ze,Je,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,_e,X,ot,kt,It);if(!Pi)return{notEnoughRoom:!0};Vt=[Pi]}for(const Pi of Vt)r.addDynamicAttributes(Ae,Pi.point,Pi.angle);return{}}function Hn(B,d,I,D,z,X){const ie=Jt(B.add(B.sub(d)._unit()),z,X).point,de=I.sub(ie);return I.add(de._mult(D/de.mag()))}function Gn(B,d,I,D,z,X,ie,de,_e,Ae,ze,Je,ot,Lt){const kt=D?B-d:B+d;let It=kt>0?1:-1,si=0;D&&(It*=-1,si=Math.PI),It<0&&(si+=Math.PI);let fi=It>0?de+ie:de+ie+1,xi=z,Vt=z,Pi=0,Ei=0;const Vi=Math.abs(kt),Ni=[];for(;Pi+Ei<=Vi;){if(fi+=It,fi<de||fi>=_e)return null;if(Vt=xi,Ni.push(xi),xi=Je[fi],xi===void 0){const qn=new r.pointGeometry(Ae.getx(fi),Ae.gety(fi)),Er=Jt(qn,ze,Lt);if(Er.signedDistanceFromCamera>0)xi=Je[fi]=Er.point;else{const Dr=fi-It;xi=Hn(Pi===0?X:new r.pointGeometry(Ae.getx(Dr),Ae.gety(Dr)),qn,Vt,Vi-Pi+1,ze,Lt)}}Pi+=Ei,Ei=Vt.dist(xi)}const sn=(Vi-Pi)/Ei,zi=xi.sub(Vt),Rn=zi.mult(sn)._add(Vt);Rn._add(zi._unit()._perp()._mult(I*It));const vn=si+Math.atan2(xi.y-Vt.y,xi.x-Vt.x);return Ni.push(Rn),{point:Rn,angle:ot?vn:0,path:Ni}}const Zr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zn(B,d){for(let I=0;I<B;I++){const D=d.length;d.resize(D+4),d.float32.set(Zr,3*D)}}function fn(B,d,I){const D=d[0],z=d[1];return B[0]=I[0]*D+I[4]*z+I[12],B[1]=I[1]*D+I[5]*z+I[13],B[3]=I[3]*D+I[7]*z+I[15],B}const yn=100;class tn{constructor(d,I=new ae(d.width+200,d.height+200,25),D=new ae(d.width+200,d.height+200,25)){this.transform=d,this.grid=I,this.ignoredGrid=D,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+yn,this.screenBottomBoundary=d.height+yn,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,I,D,z,X,ie){const de=this.projectAndGetPerspectiveRatio(z,d.anchorPointX,d.anchorPointY,ie),_e=D*de.perspectiveRatio,Ae=d.x1*_e+de.point.x,ze=d.y1*_e+de.point.y,Je=d.x2*_e+de.point.x,ot=d.y2*_e+de.point.y;return!this.isInsideGrid(Ae,ze,Je,ot)||I!=="always"&&this.grid.hitTest(Ae,ze,Je,ot,I,X)||de.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Ae,ze,Je,ot],offscreen:this.isOffscreen(Ae,ze,Je,ot)}}placeCollisionCircles(d,I,D,z,X,ie,de,_e,Ae,ze,Je,ot,Lt,kt){const It=[],si=new r.pointGeometry(I.anchorX,I.anchorY),fi=Jt(si,ie,kt),xi=di(this.transform.cameraToCenterDistance,fi.signedDistanceFromCamera),Vt=(ze?X/xi:X*xi)/r.ONE_EM,Pi=Jt(si,de,kt).point,Ei=hn(Vt,z,I.lineOffsetX*Vt,I.lineOffsetY*Vt,!1,Pi,si,I,D,de,{},!1,kt);let Vi=!1,Ni=!1,sn=!0;if(Ei){const zi=.5*ot*xi+Lt,Rn=new r.pointGeometry(-100,-100),vn=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),qn=new Pe,Er=Ei.first,Dr=Ei.last;let j=[];for(let ve=Er.path.length-1;ve>=1;ve--)j.push(Er.path[ve]);for(let ve=1;ve<Dr.path.length;ve++)j.push(Dr.path[ve]);const K=2.5*zi;if(_e){const ve=j.map(je=>Jt(je,_e,kt));j=ve.some(je=>je.signedDistanceFromCamera<=0)?[]:ve.map(je=>je.point)}let ue=[];if(j.length>0){const ve=j[0].clone(),je=j[0].clone();for(let Ze=1;Ze<j.length;Ze++)ve.x=Math.min(ve.x,j[Ze].x),ve.y=Math.min(ve.y,j[Ze].y),je.x=Math.max(je.x,j[Ze].x),je.y=Math.max(je.y,j[Ze].y);ue=ve.x>=Rn.x&&je.x<=vn.x&&ve.y>=Rn.y&&je.y<=vn.y?[j]:je.x<Rn.x||ve.x>vn.x||je.y<Rn.y||ve.y>vn.y?[]:r.clipLine([j],Rn.x,Rn.y,vn.x,vn.y)}for(const ve of ue){qn.reset(ve,.25*zi);let je=0;je=qn.length<=.5*zi?1:Math.ceil(qn.paddedLength/K)+1;for(let Ze=0;Ze<je;Ze++){const $e=Ze/Math.max(je-1,1),at=qn.lerp($e),pt=at.x+yn,St=at.y+yn;It.push(pt,St,zi,0);const ai=pt-zi,Ai=St-zi,wi=pt+zi,pi=St+zi;if(sn=sn&&this.isOffscreen(ai,Ai,wi,pi),Ni=Ni||this.isInsideGrid(ai,Ai,wi,pi),d!=="always"&&this.grid.hitTestCircle(pt,St,zi,d,Je)&&(Vi=!0,!Ae))return{circles:[],offscreen:!1,collisionDetected:Vi}}}}return{circles:!Ae&&Vi||!Ni||xi<this.perspectiveRatioCutoff?[]:It,offscreen:sn,collisionDetected:Vi}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const I=[];let D=1/0,z=1/0,X=-1/0,ie=-1/0;for(const ze of d){const Je=new r.pointGeometry(ze.x+yn,ze.y+yn);D=Math.min(D,Je.x),z=Math.min(z,Je.y),X=Math.max(X,Je.x),ie=Math.max(ie,Je.y),I.push(Je)}const de=this.grid.query(D,z,X,ie).concat(this.ignoredGrid.query(D,z,X,ie)),_e={},Ae={};for(const ze of de){const Je=ze.key;if(_e[Je.bucketInstanceId]===void 0&&(_e[Je.bucketInstanceId]={}),_e[Je.bucketInstanceId][Je.featureIndex])continue;const ot=[new r.pointGeometry(ze.x1,ze.y1),new r.pointGeometry(ze.x2,ze.y1),new r.pointGeometry(ze.x2,ze.y2),new r.pointGeometry(ze.x1,ze.y2)];r.polygonIntersectsPolygon(I,ot)&&(_e[Je.bucketInstanceId][Je.featureIndex]=!0,Ae[Je.bucketInstanceId]===void 0&&(Ae[Je.bucketInstanceId]=[]),Ae[Je.bucketInstanceId].push(Je.featureIndex))}return Ae}insertCollisionBox(d,I,D,z,X,ie){(D?this.ignoredGrid:this.grid).insert({bucketInstanceId:z,featureIndex:X,collisionGroupID:ie,overlapMode:I},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,I,D,z,X,ie){const de=D?this.ignoredGrid:this.grid,_e={bucketInstanceId:z,featureIndex:X,collisionGroupID:ie,overlapMode:I};for(let Ae=0;Ae<d.length;Ae+=4)de.insertCircle(_e,d[Ae],d[Ae+1],d[Ae+2])}projectAndGetPerspectiveRatio(d,I,D,z){let X;return z?(X=[I,D,z(I,D),1],r.transformMat4(X,X,d)):(X=[I,D,0,1],fn(X,X,d)),{point:new r.pointGeometry((X[0]/X[3]+1)/2*this.transform.width+yn,(-X[1]/X[3]+1)/2*this.transform.height+yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}}isOffscreen(d,I,D,z){return D<yn||d>=this.screenRightBoundary||z<yn||I>this.screenBottomBoundary}isInsideGrid(d,I,D,z){return D>=0&&d<this.gridRightBoundary&&z>=0&&I<this.gridBottomBoundary}getViewportMatrix(){const d=r.identity([]);return r.translate(d,d,[-100,-100,0]),d}}function wr(B,d,I){return d*(r.EXTENT/(B.tileSize*Math.pow(2,I-B.tileID.overscaledZ)))}class Wn{constructor(d,I,D,z){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?I:-I))):z&&D?1:0,this.placed=D}isHidden(){return this.opacity===0&&!this.placed}}class lr{constructor(d,I,D,z,X){this.text=new Wn(d?d.text:null,I,D,X),this.icon=new Wn(d?d.icon:null,I,z,X)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Kr{constructor(d,I,D){this.text=d,this.icon=I,this.skipFade=D}}class rn{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class He{constructor(d,I,D,z,X){this.bucketInstanceId=d,this.featureIndex=I,this.sourceLayerIndex=D,this.bucketIndex=z,this.tileID=X}}class yo{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const I=++this.maxGroupID;this.collisionGroups[d]={ID:I,predicate:D=>D.collisionGroupID===I}}return this.collisionGroups[d]}}function _o(B,d,I,D,z){const{horizontalAlign:X,verticalAlign:ie}=r.getAnchorAlignment(B),de=-(X-.5)*d,_e=-(ie-.5)*I,Ae=r.evaluateVariableOffset(B,D);return new r.pointGeometry(de+Ae[0]*z,_e+Ae[1]*z)}function co(B,d,I,D,z,X){const{x1:ie,x2:de,y1:_e,y2:Ae,anchorPointX:ze,anchorPointY:Je}=B,ot=new r.pointGeometry(d,I);return D&&ot._rotate(z?X:-X),{x1:ie+ot.x,y1:_e+ot.y,x2:de+ot.x,y2:Ae+ot.y,anchorPointX:ze,anchorPointY:Je}}class Te{constructor(d,I,D,z,X){this.transform=d.clone(),this.terrain=I,this.collisionIndex=new tn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=D,this.retainedQueryData={},this.collisionGroups=new yo(z),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,I,D,z){const X=D.getBucket(I),ie=D.latestFeatureIndex;if(!X||!ie||I.id!==X.layerIds[0])return;const de=D.collisionBoxArray,_e=X.layers[0].layout,Ae=Math.pow(2,this.transform.zoom-D.tileID.overscaledZ),ze=D.tileSize/r.EXTENT,Je=this.transform.calculatePosMatrix(D.tileID.toUnwrapped()),ot=_e.get("text-pitch-alignment")==="map",Lt=_e.get("text-rotation-alignment")==="map",kt=wr(D,1,this.transform.zoom),It=Qe(Je,ot,Lt,this.transform,kt);let si=null;if(ot){const xi=_t(Je,ot,Lt,this.transform,kt);si=r.multiply([],this.transform.labelPlaneMatrix,xi)}this.retainedQueryData[X.bucketInstanceId]=new He(X.bucketInstanceId,ie,X.sourceLayerIndex,X.index,D.tileID);const fi={bucket:X,layout:_e,posMatrix:Je,textLabelPlaneMatrix:It,labelToScreenMatrix:si,scale:Ae,textPixelRatio:ze,holdingForFade:D.holdingForFade(),collisionBoxArray:de,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(X.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(X.sourceID)};if(z)for(const xi of X.sortKeyRanges){const{sortKey:Vt,symbolInstanceStart:Pi,symbolInstanceEnd:Ei}=xi;d.push({sortKey:Vt,symbolInstanceStart:Pi,symbolInstanceEnd:Ei,parameters:fi})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:X.symbolInstances.length,parameters:fi})}attemptAnchorPlacement(d,I,D,z,X,ie,de,_e,Ae,ze,Je,ot,Lt,kt,It,si){const fi=[ot.textOffset0,ot.textOffset1],xi=_o(d,D,z,fi,X),Vt=this.collisionIndex.placeCollisionBox(co(I,xi.x,xi.y,ie,de,this.transform.angle),Je,_e,Ae,ze.predicate,si);if((!It||this.collisionIndex.placeCollisionBox(co(It,xi.x,xi.y,ie,de,this.transform.angle),Je,_e,Ae,ze.predicate,si).box.length!==0)&&Vt.box.length>0){let Pi;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID].text&&(Pi=this.prevPlacement.variableOffsets[ot.crossTileID].anchor),ot.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ot.crossTileID]={textOffset:fi,width:D,height:z,anchor:d,textBoxScale:X,prevAnchor:Pi},this.markUsedJustification(Lt,d,ot,kt),Lt.allowVerticalPlacement&&(this.markUsedOrientation(Lt,kt,ot),this.placedOrientations[ot.crossTileID]=kt),{shift:xi,placedGlyphBoxes:Vt}}}placeLayerBucketPart(d,I,D){const{bucket:z,layout:X,posMatrix:ie,textLabelPlaneMatrix:de,labelToScreenMatrix:_e,textPixelRatio:Ae,holdingForFade:ze,collisionBoxArray:Je,partiallyEvaluatedTextSize:ot,collisionGroup:Lt}=d.parameters,kt=X.get("text-optional"),It=X.get("icon-optional"),si=r.getOverlapMode(X,"text-overlap","text-allow-overlap"),fi=si==="always",xi=r.getOverlapMode(X,"icon-overlap","icon-allow-overlap"),Vt=xi==="always",Pi=X.get("text-rotation-alignment")==="map",Ei=X.get("text-pitch-alignment")==="map",Vi=X.get("icon-text-fit")!=="none",Ni=X.get("symbol-z-order")==="viewport-y",sn=fi&&(Vt||!z.hasIconData()||It),zi=Vt&&(fi||!z.hasTextData()||kt);!z.collisionArrays&&Je&&z.deserializeCollisionBoxes(Je);const Rn=(vn,qn)=>{if(I[vn.crossTileID])return;if(ze)return void(this.placements[vn.crossTileID]=new Kr(!1,!1,!1));let Er=!1,Dr=!1,j=!0,K=null,ue={box:null,offscreen:null},ve={box:null,offscreen:null},je=null,Ze=null,$e=null,at=0,pt=0,St=0;qn.textFeatureIndex?at=qn.textFeatureIndex:vn.useRuntimeCollisionCircles&&(at=vn.featureIndex),qn.verticalTextFeatureIndex&&(pt=qn.verticalTextFeatureIndex);const ai=this.retainedQueryData[z.bucketInstanceId].tileID,Ai=this.terrain?(Oi,Xt)=>this.terrain.getElevation(ai,Oi,Xt):null;for(const Oi of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Xt=qn[Oi];Xt&&(Xt.elevation=Ai?Ai(Xt.anchorPointX,Xt.anchorPointY):0)}const wi=qn.textBox;if(wi){const Oi=ii=>{let Hi=r.WritingMode.horizontal;if(z.allowVerticalPlacement&&!ii&&this.prevPlacement){const Ki=this.prevPlacement.placedOrientations[vn.crossTileID];Ki&&(this.placedOrientations[vn.crossTileID]=Ki,Hi=Ki,this.markUsedOrientation(z,Hi,vn))}return Hi},Xt=(ii,Hi)=>{if(z.allowVerticalPlacement&&vn.numVerticalGlyphVertices>0&&qn.verticalTextBox){for(const Ki of z.writingModes)if(Ki===r.WritingMode.vertical?(ue=Hi(),ve=ue):ue=ii(),ue&&ue.box&&ue.box.length)break}else ue=ii()};if(X.get("text-variable-anchor")){let ii=X.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[vn.crossTileID]){const Ui=this.prevPlacement.variableOffsets[vn.crossTileID];ii.indexOf(Ui.anchor)>0&&(ii=ii.filter(Dn=>Dn!==Ui.anchor),ii.unshift(Ui.anchor))}const Hi=(Ui,Dn,kn)=>{const yr=Ui.x2-Ui.x1,On=Ui.y2-Ui.y1,go=vn.textBoxScale,wo=Vi&&xi==="never"?Dn:null;let Yr={box:[],offscreen:!1};const qr=si!=="never"?2*ii.length:ii.length;for(let po=0;po<qr;++po){const xo=this.attemptAnchorPlacement(ii[po%ii.length],Ui,yr,On,go,Pi,Ei,Ae,ie,Lt,po>=ii.length?si:"never",vn,z,kn,wo,Ai);if(xo&&(Yr=xo.placedGlyphBoxes,Yr&&Yr.box&&Yr.box.length)){Er=!0,K=xo.shift;break}}return Yr};Xt(()=>Hi(wi,qn.iconBox,r.WritingMode.horizontal),()=>{const Ui=qn.verticalTextBox;return z.allowVerticalPlacement&&!(ue&&ue.box&&ue.box.length)&&vn.numVerticalGlyphVertices>0&&Ui?Hi(Ui,qn.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),ue&&(Er=ue.box,j=ue.offscreen);const Ki=Oi(ue&&ue.box);if(!Er&&this.prevPlacement){const Ui=this.prevPlacement.variableOffsets[vn.crossTileID];Ui&&(this.variableOffsets[vn.crossTileID]=Ui,this.markUsedJustification(z,Ui.anchor,vn,Ki))}}else{const ii=(Hi,Ki)=>{const Ui=this.collisionIndex.placeCollisionBox(Hi,si,Ae,ie,Lt.predicate,Ai);return Ui&&Ui.box&&Ui.box.length&&(this.markUsedOrientation(z,Ki,vn),this.placedOrientations[vn.crossTileID]=Ki),Ui};Xt(()=>ii(wi,r.WritingMode.horizontal),()=>{const Hi=qn.verticalTextBox;return z.allowVerticalPlacement&&vn.numVerticalGlyphVertices>0&&Hi?ii(Hi,r.WritingMode.vertical):{box:null,offscreen:null}}),Oi(ue&&ue.box&&ue.box.length)}}if(je=ue,Er=je&&je.box&&je.box.length>0,j=je&&je.offscreen,vn.useRuntimeCollisionCircles){const Oi=z.text.placedSymbolArray.get(vn.centerJustifiedTextSymbolIndex),Xt=r.evaluateSizeForFeature(z.textSizeData,ot,Oi),ii=X.get("text-padding");Ze=this.collisionIndex.placeCollisionCircles(si,Oi,z.lineVertexArray,z.glyphOffsetArray,Xt,ie,de,_e,D,Ei,Lt.predicate,vn.collisionCircleDiameter,ii,Ai),Ze.circles.length&&Ze.collisionDetected&&!D&&r.warnOnce("Collisions detected, but collision boxes are not shown"),Er=fi||Ze.circles.length>0&&!Ze.collisionDetected,j=j&&Ze.offscreen}if(qn.iconFeatureIndex&&(St=qn.iconFeatureIndex),qn.iconBox){const Oi=Xt=>{const ii=Vi&&K?co(Xt,K.x,K.y,Pi,Ei,this.transform.angle):Xt;return this.collisionIndex.placeCollisionBox(ii,xi,Ae,ie,Lt.predicate,Ai)};ve&&ve.box&&ve.box.length&&qn.verticalIconBox?($e=Oi(qn.verticalIconBox),Dr=$e.box.length>0):($e=Oi(qn.iconBox),Dr=$e.box.length>0),j=j&&$e.offscreen}const pi=kt||vn.numHorizontalGlyphVertices===0&&vn.numVerticalGlyphVertices===0,$i=It||vn.numIconVertices===0;if(pi||$i?$i?pi||(Dr=Dr&&Er):Er=Dr&&Er:Dr=Er=Dr&&Er,Er&&je&&je.box&&this.collisionIndex.insertCollisionBox(je.box,si,X.get("text-ignore-placement"),z.bucketInstanceId,ve&&ve.box&&pt?pt:at,Lt.ID),Dr&&$e&&this.collisionIndex.insertCollisionBox($e.box,xi,X.get("icon-ignore-placement"),z.bucketInstanceId,St,Lt.ID),Ze&&(Er&&this.collisionIndex.insertCollisionCircles(Ze.circles,si,X.get("text-ignore-placement"),z.bucketInstanceId,at,Lt.ID),D)){const Oi=z.bucketInstanceId;let Xt=this.collisionCircleArrays[Oi];Xt===void 0&&(Xt=this.collisionCircleArrays[Oi]=new rn);for(let ii=0;ii<Ze.circles.length;ii+=4)Xt.circles.push(Ze.circles[ii+0]),Xt.circles.push(Ze.circles[ii+1]),Xt.circles.push(Ze.circles[ii+2]),Xt.circles.push(Ze.collisionDetected?1:0)}if(vn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(z.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vn.crossTileID]=new Kr(Er||sn,Dr||zi,j||z.justReloaded),I[vn.crossTileID]=!0};if(Ni){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vn=z.getSortedSymbolIndexes(this.transform.angle);for(let qn=vn.length-1;qn>=0;--qn){const Er=vn[qn];Rn(z.symbolInstances.get(Er),z.collisionArrays[Er])}}else for(let vn=d.symbolInstanceStart;vn<d.symbolInstanceEnd;vn++)Rn(z.symbolInstances.get(vn),z.collisionArrays[vn]);if(D&&z.bucketInstanceId in this.collisionCircleArrays){const vn=this.collisionCircleArrays[z.bucketInstanceId];r.invert(vn.invProjMatrix,ie),vn.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(d,I,D,z){let X;X=z===r.WritingMode.vertical?D.verticalPlacedTextSymbolIndex:{left:D.leftJustifiedTextSymbolIndex,center:D.centerJustifiedTextSymbolIndex,right:D.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(I)];const ie=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex,D.verticalPlacedTextSymbolIndex];for(const de of ie)de>=0&&(d.text.placedSymbolArray.get(de).crossTileID=X>=0&&de!==X?0:D.crossTileID)}markUsedOrientation(d,I,D){const z=I===r.WritingMode.horizontal||I===r.WritingMode.horizontalOnly?I:0,X=I===r.WritingMode.vertical?I:0,ie=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex];for(const de of ie)d.text.placedSymbolArray.get(de).placedOrientation=z;D.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(D.verticalPlacedTextSymbolIndex).placedOrientation=X)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const I=this.prevPlacement;let D=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;const z=I?I.symbolFadeChange(d):1,X=I?I.opacities:{},ie=I?I.variableOffsets:{},de=I?I.placedOrientations:{};for(const _e in this.placements){const Ae=this.placements[_e],ze=X[_e];ze?(this.opacities[_e]=new lr(ze,z,Ae.text,Ae.icon),D=D||Ae.text!==ze.text.placed||Ae.icon!==ze.icon.placed):(this.opacities[_e]=new lr(null,z,Ae.text,Ae.icon,Ae.skipFade),D=D||Ae.text||Ae.icon)}for(const _e in X){const Ae=X[_e];if(!this.opacities[_e]){const ze=new lr(Ae,z,!1,!1);ze.isHidden()||(this.opacities[_e]=ze,D=D||Ae.text.placed||Ae.icon.placed)}}for(const _e in ie)this.variableOffsets[_e]||!this.opacities[_e]||this.opacities[_e].isHidden()||(this.variableOffsets[_e]=ie[_e]);for(const _e in de)this.placedOrientations[_e]||!this.opacities[_e]||this.opacities[_e].isHidden()||(this.placedOrientations[_e]=de[_e]);if(I&&I.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");D?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:d)}updateLayerOpacities(d,I){const D={};for(const z of I){const X=z.getBucket(d);X&&z.latestFeatureIndex&&d.id===X.layerIds[0]&&this.updateBucketOpacities(X,D,z.collisionBoxArray)}}updateBucketOpacities(d,I,D){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const z=d.layers[0].layout,X=new lr(null,0,!1,!1,!0),ie=z.get("text-allow-overlap"),de=z.get("icon-allow-overlap"),_e=z.get("text-variable-anchor"),Ae=z.get("text-rotation-alignment")==="map",ze=z.get("text-pitch-alignment")==="map",Je=z.get("icon-text-fit")!=="none",ot=new lr(null,0,ie&&(de||!d.hasIconData()||z.get("icon-optional")),de&&(ie||!d.hasTextData()||z.get("text-optional")),!0);!d.collisionArrays&&D&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(D);const Lt=(kt,It,si)=>{for(let fi=0;fi<It/4;fi++)kt.opacityVertexArray.emplaceBack(si)};for(let kt=0;kt<d.symbolInstances.length;kt++){const It=d.symbolInstances.get(kt),{numHorizontalGlyphVertices:si,numVerticalGlyphVertices:fi,crossTileID:xi}=It;let Vt=this.opacities[xi];I[xi]?Vt=X:Vt||(Vt=ot,this.opacities[xi]=Vt),I[xi]=!0;const Pi=It.numIconVertices>0,Ei=this.placedOrientations[It.crossTileID],Vi=Ei===r.WritingMode.vertical,Ni=Ei===r.WritingMode.horizontal||Ei===r.WritingMode.horizontalOnly;if(si>0||fi>0){const sn=oi(Vt.text);Lt(d.text,si,Vi?yt:sn),Lt(d.text,fi,Ni?yt:sn);const zi=Vt.text.isHidden();[It.rightJustifiedTextSymbolIndex,It.centerJustifiedTextSymbolIndex,It.leftJustifiedTextSymbolIndex].forEach(qn=>{qn>=0&&(d.text.placedSymbolArray.get(qn).hidden=zi||Vi?1:0)}),It.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(It.verticalPlacedTextSymbolIndex).hidden=zi||Ni?1:0);const Rn=this.variableOffsets[It.crossTileID];Rn&&this.markUsedJustification(d,Rn.anchor,It,Ei);const vn=this.placedOrientations[It.crossTileID];vn&&(this.markUsedJustification(d,"left",It,vn),this.markUsedOrientation(d,vn,It))}if(Pi){const sn=oi(Vt.icon),zi=!(Je&&It.verticalPlacedIconSymbolIndex&&Vi);It.placedIconSymbolIndex>=0&&(Lt(d.icon,It.numIconVertices,zi?sn:yt),d.icon.placedSymbolArray.get(It.placedIconSymbolIndex).hidden=Vt.icon.isHidden()),It.verticalPlacedIconSymbolIndex>=0&&(Lt(d.icon,It.numVerticalIconVertices,zi?yt:sn),d.icon.placedSymbolArray.get(It.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const sn=d.collisionArrays[kt];if(sn){let zi=new r.pointGeometry(0,0);if(sn.textBox||sn.verticalTextBox){let vn=!0;if(_e){const qn=this.variableOffsets[xi];qn?(zi=_o(qn.anchor,qn.width,qn.height,qn.textOffset,qn.textBoxScale),Ae&&zi._rotate(ze?this.transform.angle:-this.transform.angle)):vn=!1}sn.textBox&&Ee(d.textCollisionBox.collisionVertexArray,Vt.text.placed,!vn||Vi,zi.x,zi.y),sn.verticalTextBox&&Ee(d.textCollisionBox.collisionVertexArray,Vt.text.placed,!vn||Ni,zi.x,zi.y)}const Rn=Boolean(!Ni&&sn.verticalIconBox);sn.iconBox&&Ee(d.iconCollisionBox.collisionVertexArray,Vt.icon.placed,Rn,Je?zi.x:0,Je?zi.y:0),sn.verticalIconBox&&Ee(d.iconCollisionBox.collisionVertexArray,Vt.icon.placed,!Rn,Je?zi.x:0,Je?zi.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=kt.invProjMatrix,d.placementViewportMatrix=kt.viewportMatrix,d.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,I){const D=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*D>d}setStale(){this.stale=!0}}function Ee(B,d,I,D,z){B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0)}const qe=Math.pow(2,25),ct=Math.pow(2,24),dt=Math.pow(2,17),jt=Math.pow(2,16),Ge=Math.pow(2,9),Zt=Math.pow(2,8),Rt=Math.pow(2,1);function oi(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const d=B.placed?1:0,I=Math.floor(127*B.opacity);return I*qe+d*ct+I*dt+d*jt+I*Ge+d*Zt+I*Rt+d}const yt=0;class Ri{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,I,D,z,X){const ie=this._bucketParts;for(;this._currentTileIndex<d.length;)if(I.getBucketParts(ie,z,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,X())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ie.sort((de,_e)=>de.sortKey-_e.sortKey));this._currentPartIndex<ie.length;)if(I.placeLayerBucketPart(ie[this._currentPartIndex],this._seenCrossTileIDs,D),this._currentPartIndex++,X())return!0;return!1}}class Ii{constructor(d,I,D,z,X,ie,de,_e){this.placement=new Te(d,I,ie,de,_e),this._currentPlacementIndex=D.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=X,this._done=!1}isDone(){return this._done}continuePlacement(d,I,D){const z=r.exported.now(),X=()=>{const ie=r.exported.now()-z;return!this._forceFullPlacement&&ie>2};for(;this._currentPlacementIndex>=0;){const ie=I[d[this._currentPlacementIndex]],de=this.placement.collisionIndex.transform.zoom;if(ie.type==="symbol"&&(!ie.minzoom||ie.minzoom<=de)&&(!ie.maxzoom||ie.maxzoom>de)){if(this._inProgressLayer||(this._inProgressLayer=new Ri(ie)),this._inProgressLayer.continuePlacement(D[ie.source],this.placement,this._showCollisionBoxes,ie,X))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const Sn=512/r.EXTENT/2;class An{constructor(d,I,D){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=D;for(let z=0;z<I.length;z++){const X=I.get(z),ie=X.key;this.indexedSymbolInstances[ie]||(this.indexedSymbolInstances[ie]=[]),this.indexedSymbolInstances[ie].push({crossTileID:X.crossTileID,coord:this.getScaledCoordinates(X,d)})}}getScaledCoordinates(d,I){const D=Sn/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*r.EXTENT+d.anchorX)*D),y:Math.floor((I.canonical.y*r.EXTENT+d.anchorY)*D)}}findMatches(d,I,D){const z=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z);for(let X=0;X<d.length;X++){const ie=d.get(X);if(ie.crossTileID)continue;const de=this.indexedSymbolInstances[ie.key];if(!de)continue;const _e=this.getScaledCoordinates(ie,I);for(const Ae of de)if(Math.abs(Ae.coord.x-_e.x)<=z&&Math.abs(Ae.coord.y-_e.y)<=z&&!D[Ae.crossTileID]){D[Ae.crossTileID]=!0,ie.crossTileID=Ae.crossTileID;break}}}}class wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Tn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const I=Math.round((d-this.lng)/360);if(I!==0)for(const D in this.indexes){const z=this.indexes[D],X={};for(const ie in z){const de=z[ie];de.tileID=de.tileID.unwrapTo(de.tileID.wrap+I),X[de.tileID.key]=de}this.indexes[D]=X}this.lng=d}addBucket(d,I,D){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let X=0;X<I.symbolInstances.length;X++)I.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const z=this.usedCrossTileIDs[d.overscaledZ];for(const X in this.indexes){const ie=this.indexes[X];if(Number(X)>d.overscaledZ)for(const de in ie){const _e=ie[de];_e.tileID.isChildOf(d)&&_e.findMatches(I.symbolInstances,d,z)}else{const de=ie[d.scaledTo(Number(X)).key];de&&de.findMatches(I.symbolInstances,d,z)}}for(let X=0;X<I.symbolInstances.length;X++){const ie=I.symbolInstances.get(X);ie.crossTileID||(ie.crossTileID=D.generate(),z[ie.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new An(d,I.symbolInstances,I.bucketInstanceId),!0}removeBucketCrossTileIDs(d,I){for(const D in I.indexedSymbolInstances)for(const z of I.indexedSymbolInstances[D])delete this.usedCrossTileIDs[d][z.crossTileID]}removeStaleBuckets(d){let I=!1;for(const D in this.indexes){const z=this.indexes[D];for(const X in z)d[z[X].bucketInstanceId]||(this.removeBucketCrossTileIDs(D,z[X]),delete z[X],I=!0)}return I}}class Jn{constructor(){this.layerIndexes={},this.crossTileIDs=new wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,I,D){let z=this.layerIndexes[d.id];z===void 0&&(z=this.layerIndexes[d.id]=new Tn);let X=!1;const ie={};z.handleWrapJump(D);for(const de of I){const _e=de.getBucket(d);_e&&d.id===_e.layerIds[0]&&(_e.bucketInstanceId||(_e.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(de.tileID,_e,this.crossTileIDs)&&(X=!0),ie[_e.bucketInstanceId]=!0)}return z.removeStaleBuckets(ie)&&(X=!0),X}pruneUnusedLayers(d){const I={};d.forEach(D=>{I[D]=!0});for(const D in this.layerIndexes)I[D]||delete this.layerIndexes[D]}}var Pr=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class sr extends r.Evented{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=d._cache.max,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const d in this._tiles){const I=this._tiles[d];I.textures.forEach(D=>D.destroy()),I.textures=[]}}update(d,I){this.sourceCache.update(d,I),this._renderableTilesKeys=[];for(const D of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:I}))this._renderableTilesKeys.push(D.key),this._tiles[D.key]||(D.posMatrix=new Float64Array(16),r.ortho(D.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[D.key]=new Be(D,this.tileSize))}removeOutdated(d){const I={};this.renderHistory=this.renderHistory.filter((D,z)=>this.renderHistory.indexOf(D)===z).slice(0,this.renderHistorySize);for(const D of this._renderableTilesKeys)I[D]=!0;for(const D of this.renderHistory)I[D]=!0;for(const D in this._tiles)I[D]||(this._tiles[D].clearTextures(d),delete this._tiles[D])}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const I={};for(const D of this._renderableTilesKeys){const z=this._tiles[D].tileID;if(z.canonical.equals(d.canonical)){const X=d.clone();X.posMatrix=new Float64Array(16),r.ortho(X.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),I[D]=X}else if(z.canonical.isChildOf(d.canonical)){const X=d.clone();X.posMatrix=new Float64Array(16);const ie=z.canonical.z-d.canonical.z,de=z.canonical.x-(z.canonical.x>>ie<<ie),_e=z.canonical.y-(z.canonical.y>>ie<<ie),Ae=r.EXTENT>>ie;r.ortho(X.posMatrix,0,Ae,0,Ae,0,1),r.translate(X.posMatrix,X.posMatrix,[-de*Ae,-_e*Ae,0]),I[D]=X}else if(d.canonical.isChildOf(z.canonical)){const X=d.clone();X.posMatrix=new Float64Array(16);const ie=d.canonical.z-z.canonical.z,de=d.canonical.x-(d.canonical.x>>ie<<ie),_e=d.canonical.y-(d.canonical.y>>ie<<ie),Ae=r.EXTENT>>ie;r.ortho(X.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(X.posMatrix,X.posMatrix,[de*Ae,_e*Ae,0]),r.scale(X.posMatrix,X.posMatrix,[1/2**ie,1/2**ie,0]),I[D]=X}}return I}getSourceTile(d,I){const D=this.sourceCache._source;let z=d.overscaledZ-this.deltaZoom;if(z>D.maxzoom&&(z=D.maxzoom),z<D.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(z).key);let X=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!X||!X.dem)&&I)for(;z>=D.minzoom&&(!X||!X.dem);)X=this.sourceCache.getTileByID(d.scaledTo(z--).key);return X}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(I=>I.timeLoaded>=d)}}class Cr{constructor(d,I,D){this.style=d,this.sourceCache=new sr(I),this.options=D,this.exaggeration=typeof D.exaggeration=="number"?D.exaggeration:1,this.elevationOffset=typeof D.elevationOffset=="number"?D.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(d,I,D,z=r.EXTENT){if(!(I>=0&&I<z&&D>=0&&D<z))return this.elevationOffset;let X=0;const ie=this.getTerrainData(d);if(ie.tile&&ie.tile.dem){const de=r.transformMat4$1([],[I/z*r.EXTENT,D/z*r.EXTENT],ie.u_terrain_matrix),_e=[de[0]*ie.tile.dem.dim,de[1]*ie.tile.dem.dim],Ae=[Math.floor(_e[0]),Math.floor(_e[1])],ze=ie.tile.dem.get(Ae[0],Ae[1]),Je=ie.tile.dem.get(Ae[0],Ae[1]+1),ot=ie.tile.dem.get(Ae[0]+1,Ae[1]),Lt=ie.tile.dem.get(Ae[0]+1,Ae[1]+1);X=r.number(r.number(ze,Je,_e[0]-Ae[0]),r.number(ot,Lt,_e[0]-Ae[0]),_e[1]-Ae[1])}return X}rememberForRerender(d,I){for(const D in this.sourceCache._tiles){const z=this.sourceCache._tiles[D];(z.tileID.equals(I)||z.tileID.isChildOf(I))&&(d===this.sourceCache.sourceCache.id&&(z.timeLoaded=Date.now()),this._rerender[d]=this._rerender[d]||{},this._rerender[d][z.tileID.key]=!0)}}needsRerender(d,I){return this._rerender[d]&&this._rerender[d][I.key]}clearRerenderCache(){this._rerender={}}getElevation(d,I,D,z=r.EXTENT){return(this.getDEMElevation(d,I,D,z)+this.elevationOffset)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const z=this.style.map.painter.context,X=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(z,X,z.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(z,new r.RGBAImage({width:1,height:1}),z.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const I=this.sourceCache.getSourceTile(d,!0);if(I&&I.dem&&(!I.demTexture||I.needsTerrainPrepare)){const z=this.style.map.painter.context;I.demTexture=this.style.map.painter.getTileTexture(I.dem.stride),I.demTexture?I.demTexture.update(I.dem.getPixels(),{premultiply:!1}):I.demTexture=new T(z,I.dem.getPixels(),z.gl.RGBA,{premultiply:!1}),I.demTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),I.needsTerrainPrepare=!1}const D=I&&I+I.tileID.key+d.key;if(D&&!this._demMatrixCache[D]){const z=this.sourceCache.sourceCache._source.maxzoom;let X=d.canonical.z-I.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=z?X=d.canonical.z-z:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ie=d.canonical.x-(d.canonical.x>>X<<X),de=d.canonical.y-(d.canonical.y>>X<<X),_e=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<X),1/(r.EXTENT<<X),0]);r.translate(_e,_e,[ie*r.EXTENT,de*r.EXTENT,0]),this._demMatrixCache[d.key]={matrix:_e,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:I&&I.dem&&I.dem.dim||1,u_terrain_matrix:D?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:I&&I.dem&&I.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(I&&I.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:I}}getRTTFramebuffer(){const d=this.style.map.painter;if(!this._rttFramebuffer){const I=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=d.context.createFramebuffer(I,I,!0),this._rttFramebuffer.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,I,I))}return this._rttFramebuffer}getFramebuffer(d){const I=this.style.map.painter,D=I.width/devicePixelRatio,z=I.height/devicePixelRatio;return!this._fbo||this._fbo.width===D&&this._fbo.height===z||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=I.context.createFramebuffer(D,z,!0),this._fbo.depthAttachment.set(I.context.createRenderbuffer(I.context.gl.DEPTH_COMPONENT16,D,z))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const I=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let X=0,ie=0;X<this._coordsTextureSize;X++)for(let de=0;de<this._coordsTextureSize;de++,ie+=4)I[ie+0]=255&de,I[ie+1]=255&X,I[ie+2]=de>>8<<4|X>>8,I[ie+3]=0;const D=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(I.buffer)),z=new T(d,D,d.gl.RGBA,{premultiply:!1});return z.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=z,z}pointCoordinate(d){const I=new Uint8Array(4),D=this.style.map.painter,z=D.context,X=z.gl;z.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),X.readPixels(d.x,D.height/devicePixelRatio-d.y-1,1,1,X.RGBA,X.UNSIGNED_BYTE,I),z.bindFramebuffer.set(null);const ie=I[0]+(I[2]>>4<<8),de=I[1]+((15&I[2])<<8),_e=this.coordsIndex[255-I[3]],Ae=_e&&this.sourceCache.getTileByID(_e);if(!Ae)return null;const ze=this._coordsTextureSize,Je=(1<<Ae.tileID.canonical.z)*ze;return new r.MercatorCoordinate((Ae.tileID.canonical.x*ze+ie)/Je,(Ae.tileID.canonical.y*ze+de)/Je,this.getElevation(Ae.tileID,ie,de,ze))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.style.map.painter.context,I=new r.PosArray,D=new r.TriangleIndexArray,z=this.meshSize,X=r.EXTENT/z,ie=z*z;for(let de=0;de<=z;de++)for(let _e=0;_e<=z;_e++)I.emplaceBack(_e*X,de*X);for(let de=0;de<ie;de+=z+1)for(let _e=0;_e<z;_e++)D.emplaceBack(_e+de,z+_e+de+1,z+_e+de+2),D.emplaceBack(_e+de,z+_e+de+2,_e+de+1);return this._mesh={indexBuffer:d.createIndexBuffer(D),vertexBuffer:d.createVertexBuffer(I,Pr.members),segments:r.SegmentVector.simpleSegment(0,0,I.length,D.length)},this._mesh}getMinMaxElevation(d){const I=this.getTerrainData(d).tile,D={minElevation:null,maxElevation:null};return I&&I.dem&&(D.minElevation=(I.dem.min+this.elevationOffset)*this.exaggeration,D.maxElevation=(I.dem.max+this.elevationOffset)*this.exaggeration),D}}const Mr=(B,d)=>r.emitValidationErrors(B,d&&d.filter(I=>I.identifier!=="source.canvas")),io=r.pick($t,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jr=r.pick($t,["setCenter","setZoom","setBearing","setPitch"]),mo=function(){const B={},d=r.spec.$version;for(const I in r.spec.$root){const D=r.spec.$root[I];if(D.required){let z=null;z=I==="version"?d:D.type==="array"?[]:{},z!=null&&(B[I]=z)}}return B}();class Qo extends r.Evented{constructor(d,I={}){super(),this.map=d,this.dispatcher=new Fe(Ke(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new Z(d._requestManager,I.localIdeographFontFamily),this.lineAtlas=new Me(256,512),this.crossTileSymbolIndex=new Jn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const D=this;this._rtlTextPluginCallback=Qo.registerForPluginStateChange(z=>{D.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(X,ie)=>{if(r.triggerPluginCompletionEvent(X),ie&&ie.every(de=>de))for(const de in D.sourceCaches)D.sourceCaches[de].reload()})}),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const X=this.sourceCaches[z.sourceId];if(!X)return;const ie=X.getSource();if(ie&&ie.vectorLayerIds)for(const de in this._layers){const _e=this._layers[de];_e.source===ie.id&&this._validateLayer(_e)}})}loadURL(d,I={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const D=typeof I.validate!="boolean"||I.validate,z=this.map._requestManager.transformRequest(d,r.ResourceType.Style);this._request=r.getJSON(z,(X,ie)=>{this._request=null,X?this.fire(new r.ErrorEvent(X)):ie&&this._load(ie,D)})}loadJSON(d,I={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(d,I.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(mo,!1)}_load(d,I){if(I&&Mr(this,r.validateStyle(d)))return;this._loaded=!0,this.stylesheet=d;for(const z in d.sources)this.addSource(z,d.sources[z],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);const D=li(this.stylesheet.layers);this._order=D.map(z=>z.id),this._layers={},this._serializedLayers={};for(let z of D)z=r.createStyleLayer(z),z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new oe(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(d){this._spriteRequest=function(I,D,z,X){let ie,de,_e;const Ae=z>1?"@2x":"";let ze=r.getJSON(D.transformRequest(D.normalizeSpriteURL(I,Ae,".json"),r.ResourceType.SpriteJSON),(Lt,kt)=>{ze=null,_e||(_e=Lt,ie=kt,ot())}),Je=r.getImage(D.transformRequest(D.normalizeSpriteURL(I,Ae,".png"),r.ResourceType.SpriteImage),(Lt,kt)=>{Je=null,_e||(_e=Lt,de=kt,ot())});function ot(){if(_e)X(_e);else if(ie&&de){const Lt=r.exported.getImageData(de),kt={};for(const It in ie){const{width:si,height:fi,x:xi,y:Vt,sdf:Pi,pixelRatio:Ei,stretchX:Vi,stretchY:Ni,content:sn}=ie[It],zi=new r.RGBAImage({width:si,height:fi});r.RGBAImage.copy(Lt,zi,{x:xi,y:Vt},{x:0,y:0},{width:si,height:fi}),kt[It]={data:zi,pixelRatio:Ei,sdf:Pi,stretchX:Vi,stretchY:Ni,content:sn}}X(null,kt)}}return{cancel(){ze&&(ze.cancel(),ze=null),Je&&(Je.cancel(),Je=null)}}}(d,this.map._requestManager,this.map.getPixelRatio(),(I,D)=>{if(this._spriteRequest=null,I)this.fire(new r.ErrorEvent(I));else if(D)for(const z in D)this.imageManager.addImage(z,D[z]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(d){const I=this.sourceCaches[d.source];if(!I)return;const D=d.sourceLayer;if(!D)return;const z=I.getSource();(z.type==="geojson"||z.vectorLayerIds&&z.vectorLayerIds.indexOf(D)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${D}" does not exist on source "${z.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const I=[];for(const D of d){const z=this._layers[D];z.type!=="custom"&&I.push(z.serialize())}return I}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const I=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),X=Object.keys(this._removedLayers);(z.length||X.length)&&this._updateWorkerLayers(z,X);for(const ie in this._updatedSources){const de=this._updatedSources[ie];if(de==="reload")this._reloadSource(ie);else{if(de!=="clear")throw new Error(`Invalid action ${de}`);this._clearSource(ie)}}this._updateTilesForChangedImages();for(const ie in this._updatedPaintProps)this._layers[ie].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const D={};for(const z in this.sourceCaches){const X=this.sourceCaches[z];D[z]=X.used,X.used=!1}for(const z of this._order){const X=this._layers[z];X.recalculate(d,this._availableImages),!X.isHidden(d.zoom)&&X.source&&(this.sourceCaches[X.source].used=!0)}for(const z in D){const X=this.sourceCaches[z];D[z]!==X.used&&X.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:z}))}this.light.recalculate(d),this.z=d.zoom,I&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:I})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(d){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),d){const I=this.sourceCaches[d.source];if(!I)throw new Error(`cannot load terrain, because there exists no source with ID: ${d.source}`);this.terrain=new Cr(this,I,d),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=D=>{D.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=D=>{D.tile&&(D.sourceId===d.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(D.sourceId,D.tile.tileID)):D.source.type==="geojson"&&this.terrain.rememberForRerender(D.sourceId,D.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:d}))}setState(d){if(this._checkLoaded(),Mr(this,r.validateStyle(d)))return!1;(d=r.clone$1(d)).layers=li(d.layers);const I=function(z,X){if(!z)return[{command:$t.setStyle,args:[X]}];let ie=[];try{if(!b(z.version,X.version))return[{command:$t.setStyle,args:[X]}];b(z.center,X.center)||ie.push({command:$t.setCenter,args:[X.center]}),b(z.zoom,X.zoom)||ie.push({command:$t.setZoom,args:[X.zoom]}),b(z.bearing,X.bearing)||ie.push({command:$t.setBearing,args:[X.bearing]}),b(z.pitch,X.pitch)||ie.push({command:$t.setPitch,args:[X.pitch]}),b(z.sprite,X.sprite)||ie.push({command:$t.setSprite,args:[X.sprite]}),b(z.glyphs,X.glyphs)||ie.push({command:$t.setGlyphs,args:[X.glyphs]}),b(z.transition,X.transition)||ie.push({command:$t.setTransition,args:[X.transition]}),b(z.light,X.light)||ie.push({command:$t.setLight,args:[X.light]});const de={},_e=[];(function(ze,Je,ot,Lt){let kt;for(kt in Je=Je||{},ze=ze||{})Object.prototype.hasOwnProperty.call(ze,kt)&&(Object.prototype.hasOwnProperty.call(Je,kt)||Ti(kt,ot,Lt));for(kt in Je)Object.prototype.hasOwnProperty.call(Je,kt)&&(Object.prototype.hasOwnProperty.call(ze,kt)?b(ze[kt],Je[kt])||(ze[kt].type==="geojson"&&Je[kt].type==="geojson"&&mi(ze,Je,kt)?ot.push({command:$t.setGeoJSONSourceData,args:[kt,Je[kt].data]}):Yt(kt,Je,ot,Lt)):Si(kt,Je,ot))})(z.sources,X.sources,_e,de);const Ae=[];z.layers&&z.layers.forEach(ze=>{de[ze.source]?ie.push({command:$t.removeLayer,args:[ze.id]}):Ae.push(ze)}),ie=ie.concat(_e),function(ze,Je,ot){Je=Je||[];const Lt=(ze=ze||[]).map(Ci),kt=Je.map(Ci),It=ze.reduce(ti,{}),si=Je.reduce(ti,{}),fi=Lt.slice(),xi=Object.create(null);let Vt,Pi,Ei,Vi,Ni,sn,zi;for(Vt=0,Pi=0;Vt<Lt.length;Vt++)Ei=Lt[Vt],Object.prototype.hasOwnProperty.call(si,Ei)?Pi++:(ot.push({command:$t.removeLayer,args:[Ei]}),fi.splice(fi.indexOf(Ei,Pi),1));for(Vt=0,Pi=0;Vt<kt.length;Vt++)Ei=kt[kt.length-1-Vt],fi[fi.length-1-Vt]!==Ei&&(Object.prototype.hasOwnProperty.call(It,Ei)?(ot.push({command:$t.removeLayer,args:[Ei]}),fi.splice(fi.lastIndexOf(Ei,fi.length-Pi),1)):Pi++,sn=fi[fi.length-Vt],ot.push({command:$t.addLayer,args:[si[Ei],sn]}),fi.splice(fi.length-Vt,0,Ei),xi[Ei]=!0);for(Vt=0;Vt<kt.length;Vt++)if(Ei=kt[Vt],Vi=It[Ei],Ni=si[Ei],!xi[Ei]&&!b(Vi,Ni))if(b(Vi.source,Ni.source)&&b(Vi["source-layer"],Ni["source-layer"])&&b(Vi.type,Ni.type)){for(zi in Wi(Vi.layout,Ni.layout,ot,Ei,null,$t.setLayoutProperty),Wi(Vi.paint,Ni.paint,ot,Ei,null,$t.setPaintProperty),b(Vi.filter,Ni.filter)||ot.push({command:$t.setFilter,args:[Ei,Ni.filter]}),b(Vi.minzoom,Ni.minzoom)&&b(Vi.maxzoom,Ni.maxzoom)||ot.push({command:$t.setLayerZoomRange,args:[Ei,Ni.minzoom,Ni.maxzoom]}),Vi)Object.prototype.hasOwnProperty.call(Vi,zi)&&zi!=="layout"&&zi!=="paint"&&zi!=="filter"&&zi!=="metadata"&&zi!=="minzoom"&&zi!=="maxzoom"&&(zi.indexOf("paint.")===0?Wi(Vi[zi],Ni[zi],ot,Ei,zi.slice(6),$t.setPaintProperty):b(Vi[zi],Ni[zi])||ot.push({command:$t.setLayerProperty,args:[Ei,zi,Ni[zi]]}));for(zi in Ni)Object.prototype.hasOwnProperty.call(Ni,zi)&&!Object.prototype.hasOwnProperty.call(Vi,zi)&&zi!=="layout"&&zi!=="paint"&&zi!=="filter"&&zi!=="metadata"&&zi!=="minzoom"&&zi!=="maxzoom"&&(zi.indexOf("paint.")===0?Wi(Vi[zi],Ni[zi],ot,Ei,zi.slice(6),$t.setPaintProperty):b(Vi[zi],Ni[zi])||ot.push({command:$t.setLayerProperty,args:[Ei,zi,Ni[zi]]}))}else ot.push({command:$t.removeLayer,args:[Ei]}),sn=fi[fi.lastIndexOf(Ei)+1],ot.push({command:$t.addLayer,args:[Ni,sn]})}(Ae,X.layers,ie)}catch(de){console.warn("Unable to compute style diff:",de),ie=[{command:$t.setStyle,args:[X]}]}return ie}(this.serialize(),d).filter(z=>!(z.command in Jr));if(I.length===0)return!1;const D=I.filter(z=>!(z.command in io));if(D.length>0)throw new Error(`Unimplemented: ${D.map(z=>z.command).join(", ")}.`);return I.forEach(z=>{z.command!=="setTransition"&&this[z.command].apply(this,z.args)}),this.stylesheet=d,!0}addImage(d,I){if(this.getImage(d))return this.fire(new r.ErrorEvent(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,I),this._afterImageUpdated(d)}updateImage(d,I){this.imageManager.updateImage(d,I)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new r.ErrorEvent(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,I,D={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!I.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(I).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(r.validateStyle.source,`sources.${d}`,I,null,D))return;this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);const z=this.sourceCaches[d]=new Xe(d,I,this.dispatcher);z.style=this,z.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:z.serialize(),sourceId:d})),z.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===d)return this.fire(new r.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${D}" is using it.`)));const I=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],I.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),I.setEventedParent(null),I.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,I){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const D=this.sourceCaches[d].getSource();if(D.type!=="geojson")throw new Error(`geojsonSource.type is ${D.type}, which is !== 'geojson`);D.setData(I),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,I,D={}){this._checkLoaded();const z=d.id;if(this.getLayer(z))return void this.fire(new r.ErrorEvent(new Error(`Layer "${z}" already exists on this map.`)));let X;if(d.type==="custom"){if(Mr(this,r.validateCustomStyleLayer(d)))return;X=r.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(z,d.source),d=r.clone$1(d),d=r.extend(d,{source:z})),this._validate(r.validateStyle.layer,`layers.${z}`,d,{arrayIndex:-1},D))return;X=r.createStyleLayer(d),this._validateLayer(X),X.setEventedParent(this,{layer:{id:z}}),this._serializedLayers[X.id]=X.serialize()}const ie=I?this._order.indexOf(I):this._order.length;if(I&&ie===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${z}" before non-existing layer "${I}".`)));else{if(this._order.splice(ie,0,z),this._layerOrderChanged=!0,this._layers[z]=X,this._removedLayers[z]&&X.source&&X.type!=="custom"){const de=this._removedLayers[z];delete this._removedLayers[z],de.type!==X.type?this._updatedSources[X.source]="clear":(this._updatedSources[X.source]="reload",this.sourceCaches[X.source].pause())}this._updateLayer(X),X.onAdd&&X.onAdd(this.map)}}moveLayer(d,I){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new r.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===I)return;const D=this._order.indexOf(d);this._order.splice(D,1);const z=I?this._order.indexOf(I):this._order.length;I&&z===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${d}" before non-existing layer "${I}".`))):(this._order.splice(z,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const I=this._layers[d];if(!I)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${d}".`)));I.setEventedParent(null);const D=this._order.indexOf(d);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=I,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],I.onRemove&&I.onRemove(this.map)}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,I,D){this._checkLoaded();const z=this.getLayer(d);z?z.minzoom===I&&z.maxzoom===D||(I!=null&&(z.minzoom=I),D!=null&&(z.maxzoom=D),this._updateLayer(z)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,I,D={}){this._checkLoaded();const z=this.getLayer(d);if(z){if(!b(z.filter,I))return I==null?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(r.validateStyle.filter,`layers.${z.id}.filter`,I,null,D)||(z.filter=r.clone$1(I),this._updateLayer(z)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return r.clone$1(this.getLayer(d).filter)}setLayoutProperty(d,I,D,z={}){this._checkLoaded();const X=this.getLayer(d);X?b(X.getLayoutProperty(I),D)||(X.setLayoutProperty(I,D,z),this._updateLayer(X)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,I){const D=this.getLayer(d);if(D)return D.getLayoutProperty(I);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,I,D,z={}){this._checkLoaded();const X=this.getLayer(d);X?b(X.getPaintProperty(I),D)||(X.setPaintProperty(I,D,z)&&this._updateLayer(X),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,I){return this.getLayer(d).getPaintProperty(I)}setFeatureState(d,I){this._checkLoaded();const D=d.source,z=d.sourceLayer,X=this.sourceCaches[D];if(X===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const ie=X.getSource().type;ie==="geojson"&&z?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ie!=="vector"||z?(d.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),X.setFeatureState(z,d.id,I)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,I){this._checkLoaded();const D=d.source,z=this.sourceCaches[D];if(z===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const X=z.getSource().type,ie=X==="vector"?d.sourceLayer:void 0;X!=="vector"||ie?I&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):z.removeFeatureState(ie,d.id,I):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const I=d.source,D=d.sourceLayer,z=this.sourceCaches[I];if(z!==void 0)return z.getSource().type!=="vector"||D?(d.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),z.getFeatureState(D,d.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,d=>d.serialize()),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(d){const I=ie=>this._layers[ie].type==="fill-extrusion",D={},z=[];for(let ie=this._order.length-1;ie>=0;ie--){const de=this._order[ie];if(I(de)){D[de]=ie;for(const _e of d){const Ae=_e[de];if(Ae)for(const ze of Ae)z.push(ze)}}}z.sort((ie,de)=>de.intersectionZ-ie.intersectionZ);const X=[];for(let ie=this._order.length-1;ie>=0;ie--){const de=this._order[ie];if(I(de))for(let _e=z.length-1;_e>=0;_e--){const Ae=z[_e].feature;if(D[Ae.layer.id]<ie)break;X.push(Ae),z.pop()}else for(const _e of d){const Ae=_e[de];if(Ae)for(const ze of Ae)X.push(ze.feature)}}return X}queryRenderedFeatures(d,I,D){I&&I.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);const z={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ie of I.layers){const de=this._layers[ie];if(!de)return this.fire(new r.ErrorEvent(new Error(`The layer '${ie}' does not exist in the map's style and cannot be queried for features.`))),[];z[de.source]=!0}}const X=[];I.availableImages=this._availableImages;for(const ie in this.sourceCaches)I.layers&&!z[ie]||X.push(he(this.sourceCaches[ie],this._layers,this._serializedLayers,d,I,D));return this.placement&&X.push(function(ie,de,_e,Ae,ze,Je,ot){const Lt={},kt=Je.queryRenderedSymbols(Ae),It=[];for(const si of Object.keys(kt).map(Number))It.push(ot[si]);It.sort(ge);for(const si of It){const fi=si.featureIndex.lookupSymbolFeatures(kt[si.bucketInstanceId],de,si.bucketIndex,si.sourceLayerIndex,ze.filter,ze.layers,ze.availableImages,ie);for(const xi in fi){const Vt=Lt[xi]=Lt[xi]||[],Pi=fi[xi];Pi.sort((Ei,Vi)=>{const Ni=si.featureSortOrder;if(Ni){const sn=Ni.indexOf(Ei.featureIndex);return Ni.indexOf(Vi.featureIndex)-sn}return Vi.featureIndex-Ei.featureIndex});for(const Ei of Pi)Vt.push(Ei)}}for(const si in Lt)Lt[si].forEach(fi=>{const xi=fi.feature,Vt=_e[ie[si].source].getFeatureState(xi.layer["source-layer"],xi.id);xi.source=xi.layer.source,xi.layer["source-layer"]&&(xi.sourceLayer=xi.layer["source-layer"]),xi.state=Vt});return Lt}(this._layers,this._serializedLayers,this.sourceCaches,d,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(X)}querySourceFeatures(d,I){I&&I.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);const D=this.sourceCaches[d];return D?function(z,X){const ie=z.getRenderableIds().map(Ae=>z.getTileByID(Ae)),de=[],_e={};for(let Ae=0;Ae<ie.length;Ae++){const ze=ie[Ae],Je=ze.tileID.canonical.key;_e[Je]||(_e[Je]=!0,ze.querySourceFeatures(de,X))}return de}(D,I):[]}addSourceType(d,I,D){return Qo.getSourceType(d)?D(new Error(`A source type called "${d}" already exists.`)):(Qo.setSourceType(d,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:I.workerSourceURL},D):D(null,null))}getLight(){return this.light.getLight()}setLight(d,I={}){this._checkLoaded();const D=this.light.getLight();let z=!1;for(const ie in d)if(!b(d[ie],D[ie])){z=!0;break}if(!z)return;const X={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,I),this.light.updateTransitions(X)}_validate(d,I,D,z,X={}){return(!X||X.validate!==!1)&&Mr(this,d.call(r.validateStyle,r.extend({key:I,style:this.serialize(),value:D,styleSpec:r.spec},z)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const I=this.sourceCaches[d];I.setEventedParent(null),I.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const I in this.sourceCaches)this.sourceCaches[I].update(d,this.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,I,D,z,X=!1){let ie=!1,de=!1;const _e={};for(const Ae of this._order){const ze=this._layers[Ae];if(ze.type!=="symbol")continue;if(!_e[ze.source]){const ot=this.sourceCaches[ze.source];_e[ze.source]=ot.getRenderableIds(!0).map(Lt=>ot.getTileByID(Lt)).sort((Lt,kt)=>kt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(kt.tileID)?-1:1))}const Je=this.crossTileSymbolIndex.addLayer(ze,_e[ze.source],d.center.lng);ie=ie||Je}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((X=X||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),d.zoom))&&(this.pauseablePlacement=new Ii(d,this.terrain,this._order,X,I,D,z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,_e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),de=!0),ie&&this.pauseablePlacement.placement.setStale()),de||ie)for(const Ae of this._order){const ze=this._layers[Ae];ze.type==="symbol"&&this.placement.updateLayerOpacities(ze,_e[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,I,D){this.imageManager.getImages(I.icons,D),this._updateTilesForChangedImages();const z=this.sourceCaches[I.source];z&&z.setDependencies(I.tileID.key,I.type,I.icons)}getGlyphs(d,I,D){this.glyphManager.getGlyphs(I.stacks,D)}getResource(d,I,D){return r.makeRequest(I,D)}}Qo.getSourceType=function(B){return le[B]},Qo.setSourceType=function(B,d){le[B]=d},Qo.registerForPluginStateChange=r.registerForPluginStateChange;var nl="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Mo={prelude:Mt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Mt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Mt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Mt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Mt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Mt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Mt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Mt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Mt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Mt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",nl),terrainDepth:Mt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",nl),terrainCoords:Mt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",nl)};function Mt(B,d){const I=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,D=d.match(/attribute ([\w]+) ([\w]+)/g),z=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),X=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ie=X?X.concat(z):z,de={};return{fragmentSource:B=B.replace(I,(_e,Ae,ze,Je,ot)=>(de[ot]=!0,Ae==="define"?`
#ifndef HAS_UNIFORM_u_${ot}
varying ${ze} ${Je} ${ot};
#else
uniform ${ze} ${Je} u_${ot};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ot}
    ${ze} ${Je} ${ot} = u_${ot};
#endif
`)),vertexSource:d=d.replace(I,(_e,Ae,ze,Je,ot)=>{const Lt=Je==="float"?"vec2":"vec4",kt=ot.match(/color/)?"color":Lt;return de[ot]?Ae==="define"?`
#ifndef HAS_UNIFORM_u_${ot}
uniform lowp float u_${ot}_t;
attribute ${ze} ${Lt} a_${ot};
varying ${ze} ${Je} ${ot};
#else
uniform ${ze} ${Je} u_${ot};
#endif
`:kt==="vec4"?`
#ifndef HAS_UNIFORM_u_${ot}
    ${ot} = a_${ot};
#else
    ${ze} ${Je} ${ot} = u_${ot};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ot}
    ${ot} = unpack_mix_${kt}(a_${ot}, u_${ot}_t);
#else
    ${ze} ${Je} ${ot} = u_${ot};
#endif
`:Ae==="define"?`
#ifndef HAS_UNIFORM_u_${ot}
uniform lowp float u_${ot}_t;
attribute ${ze} ${Lt} a_${ot};
#else
uniform ${ze} ${Je} u_${ot};
#endif
`:kt==="vec4"?`
#ifndef HAS_UNIFORM_u_${ot}
    ${ze} ${Je} ${ot} = a_${ot};
#else
    ${ze} ${Je} ${ot} = u_${ot};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ot}
    ${ze} ${Je} ${ot} = unpack_mix_${kt}(a_${ot}, u_${ot}_t);
#else
    ${ze} ${Je} ${ot} = u_${ot};
#endif
`}),staticAttributes:D,staticUniforms:ie}}class tr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,I,D,z,X,ie,de,_e,Ae){this.context=d;let ze=this.boundPaintVertexBuffers.length!==z.length;for(let Je=0;!ze&&Je<z.length;Je++)this.boundPaintVertexBuffers[Je]!==z[Je]&&(ze=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===D&&!ze&&this.boundIndexBuffer===X&&this.boundVertexOffset===ie&&this.boundDynamicVertexBuffer===de&&this.boundDynamicVertexBuffer2===_e&&this.boundDynamicVertexBuffer3===Ae?(d.bindVertexArrayOES.set(this.vao),de&&de.bind(),X&&X.dynamicDraw&&X.bind(),_e&&_e.bind(),Ae&&Ae.bind()):this.freshBind(I,D,z,X,ie,de,_e,Ae)}freshBind(d,I,D,z,X,ie,de,_e){let Ae;const ze=d.numAttributes,Je=this.context,ot=Je.gl;if(Je.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Je.extVertexArrayObject.createVertexArrayOES(),Je.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=d,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=D,this.boundIndexBuffer=z,this.boundVertexOffset=X,this.boundDynamicVertexBuffer=ie,this.boundDynamicVertexBuffer2=de,this.boundDynamicVertexBuffer3=_e;else{Ae=Je.currentNumAttributes||0;for(let Lt=ze;Lt<Ae;Lt++)ot.disableVertexAttribArray(Lt)}I.enableAttributes(ot,d);for(const Lt of D)Lt.enableAttributes(ot,d);ie&&ie.enableAttributes(ot,d),de&&de.enableAttributes(ot,d),_e&&_e.enableAttributes(ot,d),I.bind(),I.setVertexAttribPointers(ot,d,X);for(const Lt of D)Lt.bind(),Lt.setVertexAttribPointers(ot,d,X);ie&&(ie.bind(),ie.setVertexAttribPointers(ot,d,X)),z&&z.bind(),de&&(de.bind(),de.setVertexAttribPointers(ot,d,X)),_e&&(_e.bind(),_e.setVertexAttribPointers(ot,d,X)),Je.currentNumAttributes=ze}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function rr(B){const d=[];for(let I=0;I<B.length;I++){if(B[I]===null)continue;const D=B[I].split(" ");d.push(D.pop())}return d}class zr{constructor(d,I,D,z,X,ie,de){const _e=d.gl;this.program=_e.createProgram();const Ae=rr(D.staticAttributes),ze=z?z.getBinderAttributes():[],Je=Ae.concat(ze),ot=Mo.prelude.staticUniforms?rr(Mo.prelude.staticUniforms):[],Lt=D.staticUniforms?rr(D.staticUniforms):[],kt=z?z.getBinderUniforms():[],It=ot.concat(Lt).concat(kt),si=[];for(const Ni of It)si.indexOf(Ni)<0&&si.push(Ni);const fi=z?z.defines():[];ie&&fi.push("#define OVERDRAW_INSPECTOR;"),de&&fi.push("#define TERRAIN3D;");const xi=fi.concat(Mo.prelude.fragmentSource,D.fragmentSource).join(`
`),Vt=fi.concat(Mo.prelude.vertexSource,D.vertexSource).join(`
`),Pi=_e.createShader(_e.FRAGMENT_SHADER);if(_e.isContextLost())return void(this.failedToCreate=!0);_e.shaderSource(Pi,xi),_e.compileShader(Pi),_e.attachShader(this.program,Pi);const Ei=_e.createShader(_e.VERTEX_SHADER);if(_e.isContextLost())return void(this.failedToCreate=!0);_e.shaderSource(Ei,Vt),_e.compileShader(Ei),_e.attachShader(this.program,Ei),this.attributes={};const Vi={};this.numAttributes=Je.length;for(let Ni=0;Ni<this.numAttributes;Ni++)Je[Ni]&&(_e.bindAttribLocation(this.program,Ni,Je[Ni]),this.attributes[Je[Ni]]=Ni);_e.linkProgram(this.program),_e.deleteShader(Ei),_e.deleteShader(Pi);for(let Ni=0;Ni<si.length;Ni++){const sn=si[Ni];if(sn&&!Vi[sn]){const zi=_e.getUniformLocation(this.program,sn);zi&&(Vi[sn]=zi)}}this.fixedUniforms=X(d,Vi),this.terrainUniforms=((Ni,sn)=>({u_depth:new r.Uniform1i(Ni,sn.u_depth),u_terrain:new r.Uniform1i(Ni,sn.u_terrain),u_terrain_dim:new r.Uniform1f(Ni,sn.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(Ni,sn.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(Ni,sn.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(Ni,sn.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(Ni,sn.u_terrain_exaggeration)}))(d,Vi),this.binderUniforms=z?z.getUniforms(d,Vi):[]}draw(d,I,D,z,X,ie,de,_e,Ae,ze,Je,ot,Lt,kt,It,si,fi,xi){const Vt=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(D),d.setStencilMode(z),d.setColorMode(X),d.setCullFace(ie),_e){d.activeTexture.set(Vt.TEXTURE2),Vt.bindTexture(Vt.TEXTURE_2D,_e.depthTexture),d.activeTexture.set(Vt.TEXTURE3),Vt.bindTexture(Vt.TEXTURE_2D,_e.texture);for(const Ei in this.terrainUniforms)this.terrainUniforms[Ei].set(_e[Ei])}for(const Ei in this.fixedUniforms)this.fixedUniforms[Ei].set(de[Ei]);It&&It.setUniforms(d,this.binderUniforms,Lt,{zoom:kt});let Pi=0;switch(I){case Vt.LINES:Pi=2;break;case Vt.TRIANGLES:Pi=3;break;case Vt.LINE_STRIP:Pi=1}for(const Ei of ot.get()){const Vi=Ei.vaos||(Ei.vaos={});(Vi[Ae]||(Vi[Ae]=new tr)).bind(d,this,ze,It?It.getPaintVertexBuffers():[],Je,Ei.vertexOffset,si,fi,xi),Vt.drawElements(I,Ei.primitiveLength*Pi,Vt.UNSIGNED_SHORT,Ei.primitiveOffset*Pi*2)}}}function Xo(B,d,I){const D=1/wr(I,1,d.transform.tileZoom),z=Math.pow(2,I.tileID.overscaledZ),X=I.tileSize*Math.pow(2,d.transform.tileZoom)/z,ie=X*(I.tileID.canonical.x+I.tileID.wrap*z),de=X*I.tileID.canonical.y;return{u_image:0,u_texsize:I.imageAtlasTexture.size,u_scale:[D,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ie>>16,de>>16],u_pixel_coord_lower:[65535&ie,65535&de]}}const Do=(B,d,I,D)=>{const z=d.style.light,X=z.properties.get("position"),ie=[X.x,X.y,X.z],de=r.create$1();z.properties.get("anchor")==="viewport"&&r.fromRotation(de,-d.transform.angle),r.transformMat3(ie,ie,de);const _e=z.properties.get("color");return{u_matrix:B,u_lightpos:ie,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[_e.r,_e.g,_e.b],u_vertical_gradient:+I,u_opacity:D}},Ea=(B,d,I,D,z,X,ie)=>r.extend(Do(B,d,I,D),Xo(X,d,ie),{u_height_factor:-Math.pow(2,z.overscaledZ)/ie.tileSize/8}),es=B=>({u_matrix:B}),Us=(B,d,I,D)=>r.extend(es(B),Xo(I,d,D)),ys=(B,d)=>({u_matrix:B,u_world:d}),Ia=(B,d,I,D,z)=>r.extend(Us(B,d,I,D),{u_world:z}),ks=(B,d,I,D)=>{const z=B.transform;let X,ie;if(D.paint.get("circle-pitch-alignment")==="map"){const de=wr(I,1,z.zoom);X=!0,ie=[de,de]}else X=!1,ie=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(d.posMatrix,I,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+X,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:ie}},Ks=(B,d,I)=>{const D=wr(I,1,d.zoom),z=Math.pow(2,d.zoom-I.tileID.overscaledZ),X=I.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[d.pixelsToGLUnits[0]/(D*z),d.pixelsToGLUnits[1]/(D*z)],u_overscale_factor:X}},Vs=(B,d,I=1)=>({u_matrix:B,u_color:d,u_overlay:0,u_overlay_scale:I}),Ta=B=>({u_matrix:B}),wl=(B,d,I,D)=>({u_matrix:B,u_extrude_scale:wr(d,1,I),u_intensity:D});function uu(B,d){const I=Math.pow(2,d.canonical.z),D=d.canonical.y;return[new r.MercatorCoordinate(0,D/I).toLngLat().lat,new r.MercatorCoordinate(0,(D+1)/I).toLngLat().lat]}const xl=(B,d,I,D)=>{const z=B.transform;return{u_matrix:rl(B,d,I,D),u_ratio:1/wr(d,1,z.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},cu=(B,d,I,D,z)=>r.extend(xl(B,d,I,z),{u_image:0,u_image_height:D}),da=(B,d,I,D,z)=>{const X=B.transform,ie=Ao(d,X);return{u_matrix:rl(B,d,I,z),u_texsize:d.imageAtlasTexture.size,u_ratio:1/wr(d,1,X.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[ie,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},pa=(B,d,I,D,z,X)=>{const ie=B.lineAtlas,de=Ao(d,B.transform),_e=I.layout.get("line-cap")==="round",Ae=ie.getDash(D.from,_e),ze=ie.getDash(D.to,_e),Je=Ae.width*z.fromScale,ot=ze.width*z.toScale;return r.extend(xl(B,d,I,X),{u_patternscale_a:[de/Je,-Ae.height/2],u_patternscale_b:[de/ot,-ze.height/2],u_sdfgamma:ie.width/(256*Math.min(Je,ot)*B.pixelRatio)/2,u_image:0,u_tex_y_a:Ae.y,u_tex_y_b:ze.y,u_mix:z.t})};function Ao(B,d){return 1/wr(B,1,d.tileZoom)}function rl(B,d,I,D){return B.translatePosMatrix(D?D.posMatrix:d.tileID.posMatrix,d,I.paint.get("line-translate"),I.paint.get("line-translate-anchor"))}const U=(B,d,I,D,z)=>{return{u_matrix:B,u_tl_parent:d,u_scale_parent:I,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(ie=z.paint.get("raster-saturation"),ie>0?1-1/(1.001-ie):-ie),u_contrast_factor:(X=z.paint.get("raster-contrast"),X>0?1/(1-X):1+X),u_spin_weights:$(z.paint.get("raster-hue-rotate"))};var X,ie};function $(B){B*=Math.PI/180;const d=Math.sin(B),I=Math.cos(B);return[(2*I+1)/3,(-Math.sqrt(3)*d-I+1)/3,(Math.sqrt(3)*d-I+1)/3]}const ye=(B,d,I,D,z,X,ie,de,_e,Ae)=>{const ze=z.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+I,u_aspect_ratio:ze.width/ze.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:X,u_label_plane_matrix:ie,u_coord_matrix:de,u_is_text:+_e,u_pitch_with_map:+D,u_texsize:Ae,u_texture:0}},De=(B,d,I,D,z,X,ie,de,_e,Ae,ze)=>{const Je=z.transform;return r.extend(ye(B,d,I,D,z,X,ie,de,_e,Ae),{u_gamma_scale:D?Math.cos(Je._pitch)*Je.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:+ze})},rt=(B,d,I,D,z,X,ie,de,_e,Ae)=>r.extend(De(B,d,I,D,z,X,ie,de,!0,_e,!0),{u_texsize_icon:Ae,u_texture_icon:1}),Ct=(B,d,I)=>({u_matrix:B,u_opacity:d,u_color:I}),Ut=(B,d,I,D,z,X)=>r.extend(function(ie,de,_e,Ae){const ze=_e.imageManager.getPattern(ie.from.toString()),Je=_e.imageManager.getPattern(ie.to.toString()),{width:ot,height:Lt}=_e.imageManager.getPixelSize(),kt=Math.pow(2,Ae.tileID.overscaledZ),It=Ae.tileSize*Math.pow(2,_e.transform.tileZoom)/kt,si=It*(Ae.tileID.canonical.x+Ae.tileID.wrap*kt),fi=It*Ae.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:Je.tl,u_pattern_br_b:Je.br,u_texsize:[ot,Lt],u_mix:de.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:Je.displaySize,u_scale_a:de.fromScale,u_scale_b:de.toScale,u_tile_units_to_pixels:1/wr(Ae,1,_e.transform.tileZoom),u_pixel_coord_upper:[si>>16,fi>>16],u_pixel_coord_lower:[65535&si,65535&fi]}}(D,X,I,z),{u_matrix:B,u_opacity:d}),Bt={fillExtrusion:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_lightpos:new r.Uniform3f(B,d.u_lightpos),u_lightintensity:new r.Uniform1f(B,d.u_lightintensity),u_lightcolor:new r.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new r.Uniform1f(B,d.u_vertical_gradient),u_opacity:new r.Uniform1f(B,d.u_opacity)}),fillExtrusionPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_lightpos:new r.Uniform3f(B,d.u_lightpos),u_lightintensity:new r.Uniform1f(B,d.u_lightintensity),u_lightcolor:new r.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new r.Uniform1f(B,d.u_vertical_gradient),u_height_factor:new r.Uniform1f(B,d.u_height_factor),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade),u_opacity:new r.Uniform1f(B,d.u_opacity)}),fill:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),fillPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),fillOutline:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world)}),fillOutlinePattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),circle:(B,d)=>({u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(B,d.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(B,d.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),collisionBox:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(B,d.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(B,d.u_extrude_scale),u_overscale_factor:new r.Uniform1f(B,d.u_overscale_factor)}),collisionCircle:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_inv_matrix:new r.UniformMatrix4f(B,d.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(B,d.u_viewport_size)}),debug:(B,d)=>({u_color:new r.UniformColor(B,d.u_color),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_overlay:new r.Uniform1i(B,d.u_overlay),u_overlay_scale:new r.Uniform1f(B,d.u_overlay_scale)}),clippingMask:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),heatmap:(B,d)=>({u_extrude_scale:new r.Uniform1f(B,d.u_extrude_scale),u_intensity:new r.Uniform1f(B,d.u_intensity),u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),heatmapTexture:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world),u_image:new r.Uniform1i(B,d.u_image),u_color_ramp:new r.Uniform1i(B,d.u_color_ramp),u_opacity:new r.Uniform1f(B,d.u_opacity)}),hillshade:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_latrange:new r.Uniform2f(B,d.u_latrange),u_light:new r.Uniform2f(B,d.u_light),u_shadow:new r.UniformColor(B,d.u_shadow),u_highlight:new r.UniformColor(B,d.u_highlight),u_accent:new r.UniformColor(B,d.u_accent)}),hillshadePrepare:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_dimension:new r.Uniform2f(B,d.u_dimension),u_zoom:new r.Uniform1f(B,d.u_zoom),u_unpack:new r.Uniform4f(B,d.u_unpack)}),line:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels)}),lineGradient:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_image:new r.Uniform1i(B,d.u_image),u_image_height:new r.Uniform1f(B,d.u_image_height)}),linePattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texsize:new r.Uniform2f(B,d.u_texsize),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_image:new r.Uniform1i(B,d.u_image),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),lineSDF:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(B,d.u_patternscale_a),u_patternscale_b:new r.Uniform2f(B,d.u_patternscale_b),u_sdfgamma:new r.Uniform1f(B,d.u_sdfgamma),u_image:new r.Uniform1i(B,d.u_image),u_tex_y_a:new r.Uniform1f(B,d.u_tex_y_a),u_tex_y_b:new r.Uniform1f(B,d.u_tex_y_b),u_mix:new r.Uniform1f(B,d.u_mix)}),raster:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_tl_parent:new r.Uniform2f(B,d.u_tl_parent),u_scale_parent:new r.Uniform1f(B,d.u_scale_parent),u_buffer_scale:new r.Uniform1f(B,d.u_buffer_scale),u_fade_t:new r.Uniform1f(B,d.u_fade_t),u_opacity:new r.Uniform1f(B,d.u_opacity),u_image0:new r.Uniform1i(B,d.u_image0),u_image1:new r.Uniform1i(B,d.u_image1),u_brightness_low:new r.Uniform1f(B,d.u_brightness_low),u_brightness_high:new r.Uniform1f(B,d.u_brightness_high),u_saturation_factor:new r.Uniform1f(B,d.u_saturation_factor),u_contrast_factor:new r.Uniform1f(B,d.u_contrast_factor),u_spin_weights:new r.Uniform3f(B,d.u_spin_weights)}),symbolIcon:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texture:new r.Uniform1i(B,d.u_texture)}),symbolSDF:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texture:new r.Uniform1i(B,d.u_texture),u_gamma_scale:new r.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(B,d.u_is_halo)}),symbolTextAndIcon:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texsize_icon:new r.Uniform2f(B,d.u_texsize_icon),u_texture:new r.Uniform1i(B,d.u_texture),u_texture_icon:new r.Uniform1i(B,d.u_texture_icon),u_gamma_scale:new r.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(B,d.u_is_halo)}),background:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_opacity:new r.Uniform1f(B,d.u_opacity),u_color:new r.UniformColor(B,d.u_color)}),backgroundPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_opacity:new r.Uniform1f(B,d.u_opacity),u_image:new r.Uniform1i(B,d.u_image),u_pattern_tl_a:new r.Uniform2f(B,d.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(B,d.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(B,d.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(B,d.u_pattern_br_b),u_texsize:new r.Uniform2f(B,d.u_texsize),u_mix:new r.Uniform1f(B,d.u_mix),u_pattern_size_a:new r.Uniform2f(B,d.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(B,d.u_pattern_size_b),u_scale_a:new r.Uniform1f(B,d.u_scale_a),u_scale_b:new r.Uniform1f(B,d.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(B,d.u_tile_units_to_pixels)}),terrain:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texture:new r.Uniform1i(B,d.u_texture)}),terrainDepth:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),terrainCoords:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texture:new r.Uniform1i(B,d.u_texture),u_terrain_coords_id:new r.Uniform1f(B,d.u_terrain_coords_id)})};class bi{constructor(d,I,D){this.context=d;const z=d.gl;this.buffer=z.createBuffer(),this.dynamicDraw=Boolean(D),this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const I=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _i{constructor(d,I,D,z){this.length=I.length,this.attributes=D,this.itemSize=I.bytesPerElement,this.dynamicDraw=z,this.context=d;const X=d.gl;this.buffer=X.createBuffer(),d.bindVertexBuffer.set(this.buffer),X.bufferData(X.ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,I){for(let D=0;D<this.attributes.length;D++){const z=I.attributes[this.attributes[D].name];z!==void 0&&d.enableVertexAttribArray(z)}}setVertexAttribPointers(d,I,D){for(let z=0;z<this.attributes.length;z++){const X=this.attributes[z],ie=I.attributes[X.name];ie!==void 0&&d.vertexAttribPointer(ie,X.components,d[yi[X.type]],!1,this.itemSize,X.offset+this.itemSize*(D||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ji extends ui{getDefault(){return r.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class on extends ui{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class Cn extends ui{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class ft extends ui{getDefault(){return[!0,!0,!0,!0]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class p extends ui{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Di extends ui{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class c extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const I=this.current;(d.func!==I.func||d.ref!==I.ref||d.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class F extends ui{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class mn extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=d,this.dirty=!1}}class Qn extends ui{getDefault(){return[0,1]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class vo extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=d,this.dirty=!1}}class ne extends ui{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Br extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.BLEND):I.disable(I.BLEND),this.current=d,this.dirty=!1}}class ma extends ui{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Va extends ui{getDefault(){return r.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Pc extends ui{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class Al extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=d,this.dirty=!1}}class qs extends ui{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class nc extends ui{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class hu extends ui{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class sh extends ui{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class fu extends ui{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class ah extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Ou extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class du extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindTexture(I.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class pu extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Vl extends ui{getDefault(){return null}set(d){const I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class mu extends ui{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Nn extends ui{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class Fn extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Fu extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class qa extends ui{constructor(d,I){super(d),this.context=d,this.parent=I}getDefault(){return null}}class ga extends qa{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class ql extends qa{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class ya{constructor(d,I,D,z){this.context=d,this.width=I,this.height=D;const X=d.gl,ie=this.framebuffer=X.createFramebuffer();if(this.colorAttachment=new ga(d,ie),z&&(this.depthAttachment=new ql(d,ie)),X.checkFramebufferStatus(X.FRAMEBUFFER)!==X.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,I=this.colorAttachment.get();if(I&&d.deleteTexture(I),this.depthAttachment){const D=this.depthAttachment.get();D&&d.deleteRenderbuffer(D)}d.deleteFramebuffer(this.framebuffer)}}class bo{constructor(d,I,D){this.blendFunction=d,this.blendColor=I,this.mask=D}}bo.Replace=[1,0],bo.disabled=new bo(bo.Replace,r.Color.transparent,[!1,!1,!1,!1]),bo.unblended=new bo(bo.Replace,r.Color.transparent,[!0,!0,!0,!0]),bo.alphaBlended=new bo([1,771],r.Color.transparent,[!0,!0,!0,!0]);class se{constructor(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ji(this),this.clearDepth=new on(this),this.clearStencil=new Cn(this),this.colorMask=new ft(this),this.depthMask=new p(this),this.stencilMask=new Di(this),this.stencilFunc=new c(this),this.stencilOp=new F(this),this.stencilTest=new mn(this),this.depthRange=new Qn(this),this.depthTest=new vo(this),this.depthFunc=new ne(this),this.blend=new Br(this),this.blendFunc=new ma(this),this.blendColor=new Va(this),this.blendEquation=new Pc(this),this.cullFace=new Al(this),this.cullFaceSide=new qs(this),this.frontFace=new nc(this),this.program=new hu(this),this.activeTexture=new sh(this),this.viewport=new fu(this),this.bindFramebuffer=new ah(this),this.bindRenderbuffer=new Ou(this),this.bindTexture=new du(this),this.bindVertexBuffer=new pu(this),this.bindElementBuffer=new Vl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mu(this),this.pixelStoreUnpack=new Nn(this),this.pixelStoreUnpackPremultiplyAlpha=new Fn(this),this.pixelStoreUnpackFlipY=new Fu(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,I){return new bi(this,d,I)}createVertexBuffer(d,I,D){return new _i(this,d,I,D)}createRenderbuffer(d,I,D){const z=this.gl,X=z.createRenderbuffer();return this.bindRenderbuffer.set(X),z.renderbufferStorage(z.RENDERBUFFER,d,I,D),this.bindRenderbuffer.set(null),X}createFramebuffer(d,I,D){return new ya(this,d,I,D)}clear({color:d,depth:I}){const D=this.gl;let z=0;d&&(z|=D.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),I!==void 0&&(z|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),D.clear(z)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){b(d.blendFunction,bo.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ue{constructor(d,I,D){this.func=d,this.mask=I,this.range=D}}Ue.ReadOnly=!1,Ue.ReadWrite=!0,Ue.disabled=new Ue(519,Ue.ReadOnly,[0,1]);const At=7680;class Qt{constructor(d,I,D,z,X,ie){this.test=d,this.ref=I,this.mask=D,this.fail=z,this.depthFail=X,this.pass=ie}}Qt.disabled=new Qt({func:519,mask:0},0,0,At,At,At);class hi{constructor(d,I,D){this.enable=d,this.mode=I,this.frontFace=D}}let qi;function an(B,d,I,D,z,X,ie){const de=B.context,_e=de.gl,Ae=B.useProgram("collisionBox"),ze=[];let Je=0,ot=0;for(let Vt=0;Vt<D.length;Vt++){const Pi=D[Vt],Ei=d.getTile(Pi),Vi=Ei.getBucket(I);if(!Vi)continue;let Ni=Pi.posMatrix;z[0]===0&&z[1]===0||(Ni=B.translatePosMatrix(Pi.posMatrix,Ei,z,X));const sn=ie?Vi.textCollisionBox:Vi.iconCollisionBox,zi=Vi.collisionCircleArray;if(zi.length>0){const Rn=r.create(),vn=Ni;r.mul(Rn,Vi.placementInvProjMatrix,B.transform.glCoordMatrix),r.mul(Rn,Rn,Vi.placementViewportMatrix),ze.push({circleArray:zi,circleOffset:ot,transform:vn,invTransform:Rn,coord:Pi}),Je+=zi.length/4,ot=Je}sn&&Ae.draw(de,_e.LINES,Ue.disabled,Qt.disabled,B.colorModeForRenderPass(),hi.disabled,Ks(Ni,B.transform,Ei),B.style.terrain&&B.style.terrain.getTerrainData(Pi),I.id,sn.layoutVertexBuffer,sn.indexBuffer,sn.segments,null,B.transform.zoom,null,null,sn.collisionVertexBuffer)}if(!ie||!ze.length)return;const Lt=B.useProgram("collisionCircle"),kt=new r.CollisionCircleLayoutArray;kt.resize(4*Je),kt._trim();let It=0;for(const Vt of ze)for(let Pi=0;Pi<Vt.circleArray.length/4;Pi++){const Ei=4*Pi,Vi=Vt.circleArray[Ei+0],Ni=Vt.circleArray[Ei+1],sn=Vt.circleArray[Ei+2],zi=Vt.circleArray[Ei+3];kt.emplace(It++,Vi,Ni,sn,zi,0),kt.emplace(It++,Vi,Ni,sn,zi,1),kt.emplace(It++,Vi,Ni,sn,zi,2),kt.emplace(It++,Vi,Ni,sn,zi,3)}(!qi||qi.length<2*Je)&&(qi=function(Vt){const Pi=2*Vt,Ei=new r.QuadTriangleArray;Ei.resize(Pi),Ei._trim();for(let Vi=0;Vi<Pi;Vi++){const Ni=6*Vi;Ei.uint16[Ni+0]=4*Vi+0,Ei.uint16[Ni+1]=4*Vi+1,Ei.uint16[Ni+2]=4*Vi+2,Ei.uint16[Ni+3]=4*Vi+2,Ei.uint16[Ni+4]=4*Vi+3,Ei.uint16[Ni+5]=4*Vi+0}return Ei}(Je));const si=de.createIndexBuffer(qi,!0),fi=de.createVertexBuffer(kt,r.collisionCircleLayout.members,!0);for(const Vt of ze){const Pi={u_matrix:Vt.transform,u_inv_matrix:Vt.invTransform,u_camera_to_center_distance:(xi=B.transform).cameraToCenterDistance,u_viewport_size:[xi.width,xi.height]};Lt.draw(de,_e.TRIANGLES,Ue.disabled,Qt.disabled,B.colorModeForRenderPass(),hi.disabled,Pi,B.style.terrain&&B.style.terrain.getTerrainData(Vt.coord),I.id,fi,si,r.SegmentVector.simpleSegment(0,2*Vt.circleOffset,Vt.circleArray.length,Vt.circleArray.length/2),null,B.transform.zoom,null,null,null)}var xi;fi.destroy(),si.destroy()}hi.disabled=new hi(!1,1029,2305),hi.backCCW=new hi(!0,1029,2305);const Kn=r.identity(new Float32Array(16));function gr(B,d,I,D,z,X){const{horizontalAlign:ie,verticalAlign:de}=r.getAnchorAlignment(B),_e=-(ie-.5)*d,Ae=-(de-.5)*I,ze=r.evaluateVariableOffset(B,D);return new r.pointGeometry((_e/z+ze[0])*X,(Ae/z+ze[1])*X)}function Nr(B,d,I,D,z,X,ie,de,_e,Ae,ze){const Je=B.text.placedSymbolArray,ot=B.text.dynamicLayoutVertexArray,Lt=B.icon.dynamicLayoutVertexArray,kt={};ot.clear();for(let It=0;It<Je.length;It++){const si=Je.get(It),fi=B.allowVerticalPlacement&&!si.placedOrientation,xi=si.hidden||!si.crossTileID||fi?null:D[si.crossTileID];if(xi){const Vt=new r.pointGeometry(si.anchorX,si.anchorY),Pi=Jt(Vt,I?ie:X,ze),Ei=di(z.cameraToCenterDistance,Pi.signedDistanceFromCamera);let Vi=r.evaluateSizeForFeature(B.textSizeData,_e,si)*Ei/r.ONE_EM;I&&(Vi*=B.tilePixelRatio/de);const{width:Ni,height:sn,anchor:zi,textOffset:Rn,textBoxScale:vn}=xi,qn=gr(zi,Ni,sn,Rn,vn,Vi),Er=I?Jt(Vt.add(qn),X,ze).point:Pi.point.add(d?qn.rotate(-z.angle):qn),Dr=B.allowVerticalPlacement&&si.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let j=0;j<si.numGlyphs;j++)r.addDynamicAttributes(ot,Er,Dr);Ae&&si.associatedIconIndex>=0&&(kt[si.associatedIconIndex]={shiftedAnchor:Er,angle:Dr})}else zn(si.numGlyphs,ot)}if(Ae){Lt.clear();const It=B.icon.placedSymbolArray;for(let si=0;si<It.length;si++){const fi=It.get(si);if(fi.hidden)zn(fi.numGlyphs,Lt);else{const xi=kt[si];if(xi)for(let Vt=0;Vt<fi.numGlyphs;Vt++)r.addDynamicAttributes(Lt,xi.shiftedAnchor,xi.angle);else zn(fi.numGlyphs,Lt)}}B.icon.dynamicLayoutVertexBuffer.updateData(Lt)}B.text.dynamicLayoutVertexBuffer.updateData(ot)}function Wr(B,d,I){return I.iconsInText&&d?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function to(B,d,I,D,z,X,ie,de,_e,Ae,ze,Je){const ot=B.context,Lt=ot.gl,kt=B.transform,It=de==="map",si=_e==="map",fi=de!=="viewport"&&I.layout.get("symbol-placement")!=="point",xi=It&&!si&&!fi,Vt=!I.layout.get("symbol-sort-key").isConstant();let Pi=!1;const Ei=B.depthModeForSublayer(0,Ue.ReadOnly),Vi=I.layout.get("text-variable-anchor"),Ni=[];for(const sn of D){const zi=d.getTile(sn),Rn=zi.getBucket(I);if(!Rn)continue;const vn=z?Rn.text:Rn.icon;if(!vn||!vn.segments.get().length)continue;const qn=vn.programConfigurations.get(I.id),Er=z||Rn.sdfIcons,Dr=z?Rn.textSizeData:Rn.iconSizeData,j=si||kt.pitch!==0,K=B.useProgram(Wr(Er,z,Rn),qn),ue=r.evaluateSizeForZoom(Dr,kt.zoom),ve=B.style.terrain&&B.style.terrain.getTerrainData(sn);let je,Ze,$e,at,pt=[0,0],St=null;if(z){if(Ze=zi.glyphAtlasTexture,$e=Lt.LINEAR,je=zi.glyphAtlasTexture.size,Rn.iconsInText){pt=zi.imageAtlasTexture.size,St=zi.imageAtlasTexture;const Dn=Dr.kind==="composite"||Dr.kind==="camera";at=j||B.options.rotating||B.options.zooming||Dn?Lt.LINEAR:Lt.NEAREST}}else{const Dn=I.layout.get("icon-size").constantOr(0)!==1||Rn.iconsNeedLinear;Ze=zi.imageAtlasTexture,$e=Er||B.options.rotating||B.options.zooming||Dn||j?Lt.LINEAR:Lt.NEAREST,je=zi.imageAtlasTexture.size}const ai=wr(zi,1,B.transform.zoom),Ai=Qe(sn.posMatrix,si,It,B.transform,ai),wi=_t(sn.posMatrix,si,It,B.transform,ai),pi=Vi&&Rn.hasTextData(),$i=I.layout.get("icon-text-fit")!=="none"&&pi&&Rn.hasIconData();if(fi){const Dn=B.style.terrain?(yr,On)=>B.style.terrain.getElevation(sn,yr,On):null,kn=I.layout.get("text-rotation-alignment")==="map";Ln(Rn,sn.posMatrix,B,z,Ai,wi,si,Ae,kn,Dn)}const Oi=B.translatePosMatrix(sn.posMatrix,zi,X,ie),Xt=fi||z&&Vi||$i?Kn:Ai,ii=B.translatePosMatrix(wi,zi,X,ie,!0),Hi=Er&&I.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ki;Ki=Er?Rn.iconsInText?rt(Dr.kind,ue,xi,si,B,Oi,Xt,ii,je,pt):De(Dr.kind,ue,xi,si,B,Oi,Xt,ii,z,je,!0):ye(Dr.kind,ue,xi,si,B,Oi,Xt,ii,z,je);const Ui={program:K,buffers:vn,uniformValues:Ki,atlasTexture:Ze,atlasTextureIcon:St,atlasInterpolation:$e,atlasInterpolationIcon:at,isSDF:Er,hasHalo:Hi};if(Vt&&Rn.canOverlap){Pi=!0;const Dn=vn.segments.get();for(const kn of Dn)Ni.push({segments:new r.SegmentVector([kn]),sortKey:kn.sortKey,state:Ui,terrainData:ve})}else Ni.push({segments:vn.segments,sortKey:0,state:Ui,terrainData:ve})}Pi&&Ni.sort((sn,zi)=>sn.sortKey-zi.sortKey);for(const sn of Ni){const zi=sn.state;if(ot.activeTexture.set(Lt.TEXTURE0),zi.atlasTexture.bind(zi.atlasInterpolation,Lt.CLAMP_TO_EDGE),zi.atlasTextureIcon&&(ot.activeTexture.set(Lt.TEXTURE1),zi.atlasTextureIcon&&zi.atlasTextureIcon.bind(zi.atlasInterpolationIcon,Lt.CLAMP_TO_EDGE)),zi.isSDF){const Rn=zi.uniformValues;zi.hasHalo&&(Rn.u_is_halo=1,Oo(zi.buffers,sn.segments,I,B,zi.program,Ei,ze,Je,Rn,sn.terrainData)),Rn.u_is_halo=0}Oo(zi.buffers,sn.segments,I,B,zi.program,Ei,ze,Je,zi.uniformValues,sn.terrainData)}}function Oo(B,d,I,D,z,X,ie,de,_e,Ae){const ze=D.context;z.draw(ze,ze.gl.TRIANGLES,X,ie,de,hi.disabled,_e,Ae,I.id,B.layoutVertexBuffer,B.indexBuffer,d,I.paint,D.transform.zoom,B.programConfigurations.get(I.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function jo(B,d,I,D,z,X,ie){const de=B.context.gl,_e=I.paint.get("fill-pattern"),Ae=_e&&_e.constantOr(1),ze=I.getCrossfadeParameters();let Je,ot,Lt,kt,It;ie?(ot=Ae&&!I.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Je=de.LINES):(ot=Ae?"fillPattern":"fill",Je=de.TRIANGLES);for(const si of D){const fi=d.getTile(si);if(Ae&&!fi.patternsLoaded())continue;const xi=fi.getBucket(I);if(!xi)continue;const Vt=xi.programConfigurations.get(I.id),Pi=B.useProgram(ot,Vt),Ei=B.style.terrain&&B.style.terrain.getTerrainData(si);Ae&&(B.context.activeTexture.set(de.TEXTURE0),fi.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Vt.updatePaintBuffers(ze));const Vi=_e.constantOr(null);if(Vi&&fi.imageAtlas){const zi=fi.imageAtlas,Rn=zi.patternPositions[Vi.to.toString()],vn=zi.patternPositions[Vi.from.toString()];Rn&&vn&&Vt.setConstantPatternPositions(Rn,vn)}const Ni=Ei?si:null,sn=B.translatePosMatrix(Ni?Ni.posMatrix:si.posMatrix,fi,I.paint.get("fill-translate"),I.paint.get("fill-translate-anchor"));if(ie){kt=xi.indexBuffer2,It=xi.segments2;const zi=[de.drawingBufferWidth,de.drawingBufferHeight];Lt=ot==="fillOutlinePattern"&&Ae?Ia(sn,B,ze,fi,zi):ys(sn,zi)}else kt=xi.indexBuffer,It=xi.segments,Lt=Ae?Us(sn,B,ze,fi):es(sn);Pi.draw(B.context,Je,z,B.stencilModeForClipping(si),X,hi.disabled,Lt,Ei,I.id,xi.layoutVertexBuffer,kt,It,I.paint,B.transform.zoom,Vt)}}function Ho(B,d,I,D,z,X,ie){const de=B.context,_e=de.gl,Ae=I.paint.get("fill-extrusion-pattern"),ze=Ae.constantOr(1),Je=I.getCrossfadeParameters(),ot=I.paint.get("fill-extrusion-opacity");for(const Lt of D){const kt=d.getTile(Lt),It=kt.getBucket(I);if(!It)continue;const si=B.style.terrain&&B.style.terrain.getTerrainData(Lt),fi=It.programConfigurations.get(I.id),xi=B.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",fi);ze&&(B.context.activeTexture.set(_e.TEXTURE0),kt.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),fi.updatePaintBuffers(Je));const Vt=Ae.constantOr(null);if(Vt&&kt.imageAtlas){const Ni=kt.imageAtlas,sn=Ni.patternPositions[Vt.to.toString()],zi=Ni.patternPositions[Vt.from.toString()];sn&&zi&&fi.setConstantPatternPositions(sn,zi)}const Pi=B.translatePosMatrix(Lt.posMatrix,kt,I.paint.get("fill-extrusion-translate"),I.paint.get("fill-extrusion-translate-anchor")),Ei=I.paint.get("fill-extrusion-vertical-gradient"),Vi=ze?Ea(Pi,B,Ei,ot,Lt,Je,kt):Do(Pi,B,Ei,ot);xi.draw(de,de.gl.TRIANGLES,z,X,ie,hi.backCCW,Vi,si,I.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,I.paint,B.transform.zoom,fi,B.style.terrain&&It.centroidVertexBuffer)}}function Ss(B,d,I,D,z,X,ie){const de=B.context,_e=de.gl,Ae=I.fbo;if(!Ae)return;const ze=B.useProgram("hillshade"),Je=B.style.terrain&&B.style.terrain.getTerrainData(d);de.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Ae.colorAttachment.get()),ze.draw(de,_e.TRIANGLES,z,X,ie,hi.disabled,((ot,Lt,kt,It)=>{const si=kt.paint.get("hillshade-shadow-color"),fi=kt.paint.get("hillshade-highlight-color"),xi=kt.paint.get("hillshade-accent-color");let Vt=kt.paint.get("hillshade-illumination-direction")*(Math.PI/180);kt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Vt-=ot.transform.angle);const Pi=!ot.options.moving;return{u_matrix:It?It.posMatrix:ot.transform.calculatePosMatrix(Lt.tileID.toUnwrapped(),Pi),u_image:0,u_latrange:uu(0,Lt.tileID),u_light:[kt.paint.get("hillshade-exaggeration"),Vt],u_shadow:si,u_highlight:fi,u_accent:xi}})(B,I,D,Je?d:null),Je,D.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}function fs(B,d,I,D,z,X){const ie=B.context,de=ie.gl,_e=d.dem;if(_e&&_e.data){const Ae=_e.dim,ze=_e.stride,Je=_e.getPixels();if(ie.activeTexture.set(de.TEXTURE1),ie.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||B.getTileTexture(ze),d.demTexture){const Lt=d.demTexture;Lt.update(Je,{premultiply:!1}),Lt.bind(de.NEAREST,de.CLAMP_TO_EDGE)}else d.demTexture=new T(ie,Je,de.RGBA,{premultiply:!1}),d.demTexture.bind(de.NEAREST,de.CLAMP_TO_EDGE);ie.activeTexture.set(de.TEXTURE0);let ot=d.fbo;if(!ot){const Lt=new T(ie,{width:Ae,height:Ae,data:null},de.RGBA);Lt.bind(de.LINEAR,de.CLAMP_TO_EDGE),ot=d.fbo=ie.createFramebuffer(Ae,Ae,!0),ot.colorAttachment.set(Lt.texture)}ie.bindFramebuffer.set(ot.framebuffer),ie.viewport.set([0,0,Ae,Ae]),B.useProgram("hillshadePrepare").draw(ie,de.TRIANGLES,D,z,X,hi.disabled,((Lt,kt)=>{const It=kt.stride,si=r.create();return r.ortho(si,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(si,si,[0,-r.EXTENT,0]),{u_matrix:si,u_image:1,u_dimension:[It,It],u_zoom:Lt.overscaledZ,u_unpack:kt.getUnpackVector()}})(d.tileID,_e),null,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function jr(B,d,I,D,z,X){const ie=D.paint.get("raster-fade-duration");if(!X&&ie>0){const de=r.exported.now(),_e=(de-B.timeAdded)/ie,Ae=d?(de-d.timeAdded)/ie:-1,ze=I.getSource(),Je=z.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),ot=!d||Math.abs(d.tileID.overscaledZ-Je)>Math.abs(B.tileID.overscaledZ-Je),Lt=ot&&B.refreshedUponExpiration?1:r.clamp(ot?_e:1-Ae,0,1);return B.refreshedUponExpiration&&_e>=1&&(B.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Lt}:{opacity:Lt,mix:0}}return{opacity:1,mix:0}}const Cs=new r.Color(1,0,0,1),_s=new r.Color(0,1,0,1),Hl=new r.Color(0,0,1,1),kl=new r.Color(1,0,1,1),Ru=new r.Color(0,1,1,1);function La(B,d,I,D){ol(B,0,d+I/2,B.transform.width,I,D)}function Sl(B,d,I,D){ol(B,d-I/2,0,I,B.transform.height,D)}function ol(B,d,I,D,z,X){const ie=B.context,de=ie.gl;de.enable(de.SCISSOR_TEST),de.scissor(d*B.pixelRatio,I*B.pixelRatio,D*B.pixelRatio,z*B.pixelRatio),ie.clear({color:X}),de.disable(de.SCISSOR_TEST)}function Bu(B,d,I){const D=B.context,z=D.gl,X=I.posMatrix,ie=B.useProgram("debug"),de=Ue.disabled,_e=Qt.disabled,Ae=B.colorModeForRenderPass(),ze="$debug",Je=B.style.terrain&&B.style.terrain.getTerrainData(I);D.activeTexture.set(z.TEXTURE0),B.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE);const ot=d.getTileByID(I.key).latestRawTileData,Lt=Math.floor((ot&&ot.byteLength||0)/1024),kt=d.getTile(I).tileSize,It=512/Math.min(kt,512)*(I.overscaledZ/B.transform.zoom)*.5;let si=I.canonical.toString();I.overscaledZ!==I.canonical.z&&(si+=` => ${I.overscaledZ}`),function(fi,xi){fi.initDebugOverlayCanvas();const Vt=fi.debugOverlayCanvas,Pi=fi.context.gl,Ei=fi.debugOverlayCanvas.getContext("2d");Ei.clearRect(0,0,Vt.width,Vt.height),Ei.shadowColor="white",Ei.shadowBlur=2,Ei.lineWidth=1.5,Ei.strokeStyle="white",Ei.textBaseline="top",Ei.font="bold 36px Open Sans, sans-serif",Ei.fillText(xi,5,5),Ei.strokeText(xi,5,5),fi.debugOverlayTexture.update(Vt),fi.debugOverlayTexture.bind(Pi.LINEAR,Pi.CLAMP_TO_EDGE)}(B,`${si} ${Lt}kB`),ie.draw(D,z.TRIANGLES,de,_e,bo.alphaBlended,hi.disabled,Vs(X,r.Color.transparent,It),null,ze,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),ie.draw(D,z.LINE_STRIP,de,_e,Ae,hi.disabled,Vs(X,r.Color.red),Je,ze,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function Os(B,d,I){const D=B.context,z=D.gl,X=B.colorModeForRenderPass(),ie=new Ue(z.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D),de=B.useProgram("terrain"),_e=d.getTerrainMesh(),Ae=d.getTerrainData(I.tileID);D.bindFramebuffer.set(null),D.viewport.set([0,0,B.width,B.height]),D.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,d.getRTTFramebuffer().colorAttachment.get());const ze=B.transform.calculatePosMatrix(I.tileID.toUnwrapped());de.draw(D,z.TRIANGLES,ie,Qt.disabled,X,hi.backCCW,{u_matrix:ze,u_texture:0},Ae,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}function gu(B,d,I,D){const z=B.context,X=I.tileSize*d.qualityFactor;I.textures[D]||(I.textures[D]=B.getTileTexture(X)||new T(z,{width:X,height:X,data:null},z.gl.RGBA),I.textures[D].bind(z.gl.LINEAR,z.gl.CLAMP_TO_EDGE),D===0&&d.sourceCache.renderHistory.unshift(I.tileID.key));const ie=d.getRTTFramebuffer();ie.colorAttachment.set(I.textures[D].texture),z.bindFramebuffer.set(ie.framebuffer),z.viewport.set([0,0,X,X])}class Gl{constructor(d){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=d,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=d.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const d=this.painter.style,I=d.terrain;for(const D in d.sourceCaches){this._coordsDescendingInv[D]={};const z=d.sourceCaches[D].getVisibleCoordinates();for(const X of z){const ie=I.sourceCache.getTerrainCoords(X);for(const de in ie)this._coordsDescendingInv[D][de]||(this._coordsDescendingInv[D][de]=[]),this._coordsDescendingInv[D][de].push(ie[de])}}for(const D of d._order){const z=d._layers[D],X=z.source;if(this._renderToTexture[z.type]&&!this._coordsDescendingInvStr[X]){this._coordsDescendingInvStr[X]={};for(const ie in this._coordsDescendingInv[X])this._coordsDescendingInvStr[X][ie]=this._coordsDescendingInv[X][ie].map(de=>de.key).sort().join()}}return this._renderableTiles.forEach(D=>{for(const z in this._coordsDescendingInvStr){const X=this._coordsDescendingInvStr[z][D.tileID.key];X&&X!==D.textureCoords[z]&&D.clearTextures(this.painter),I.needsRerender(z,D.tileID)&&D.clearTextures(this.painter)}this._rerender[D.tileID.key]=!D.textures.length}),I.clearRerenderCache(),I.sourceCache.removeOutdated(this.painter),this}renderLayer(d){const I=d.type,D=this.painter,z=D.style._order,X=D.currentLayer,ie=X+1===z.length;if(this._renderToTexture[I]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=I,this._stacks[this._stacks.length-1].push(z[X]),!ie))return!0;if(this._renderToTexture[this._prevType]||I==="hillshade"||this._renderToTexture[I]&&ie){this._prevType=I;const de=this._stacks.length-1,_e=this._stacks[de]||[];for(const Ae of this._renderableTiles){if(gu(D,D.style.terrain,Ae,de),this._rerender[Ae.tileID.key]){D.context.clear({color:r.Color.transparent});for(let ze=0;ze<_e.length;ze++){const Je=D.style._layers[_e[ze]],ot=Je.source?this._coordsDescendingInv[Je.source][Ae.tileID.key]:[Ae.tileID];D._renderTileClippingMasks(Je,ot),D.renderLayer(D,D.style.sourceCaches[Je.source],Je,ot),Je.source&&(Ae.textureCoords[Je.source]=this._coordsDescendingInvStr[Je.source][Ae.tileID.key])}}Os(D,D.style.terrain,Ae)}if(I==="hillshade"){this._stacks.push([z[X]]);for(const Ae of this._renderableTiles){const ze=this._coordsDescendingInv[d.source][Ae.tileID.key];gu(D,D.style.terrain,Ae,this._stacks.length-1),D.context.clear({color:r.Color.transparent}),D._renderTileClippingMasks(d,ze),D.renderLayer(D,D.style.sourceCaches[d.source],d,ze),Os(D,D.style.terrain,Ae)}return!0}return this._renderToTexture[I]}return!1}}const Ha={symbol:function(B,d,I,D,z){if(B.renderPass!=="translucent")return;const X=Qt.disabled,ie=B.colorModeForRenderPass();I.layout.get("text-variable-anchor")&&function(de,_e,Ae,ze,Je,ot,Lt){const kt=_e.transform,It=Je==="map",si=ot==="map";for(const fi of de){const xi=ze.getTile(fi),Vt=xi.getBucket(Ae);if(!Vt||!Vt.text||!Vt.text.segments.get().length)continue;const Pi=r.evaluateSizeForZoom(Vt.textSizeData,kt.zoom),Ei=wr(xi,1,_e.transform.zoom),Vi=Qe(fi.posMatrix,si,It,_e.transform,Ei),Ni=Ae.layout.get("icon-text-fit")!=="none"&&Vt.hasIconData();if(Pi){const sn=Math.pow(2,kt.zoom-xi.tileID.overscaledZ);Nr(Vt,It,si,Lt,kt,Vi,fi.posMatrix,sn,Pi,Ni,_e.style.terrain?(zi,Rn)=>_e.style.terrain.getElevation(fi,zi,Rn):null)}}}(D,B,I,d,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),z),I.paint.get("icon-opacity").constantOr(1)!==0&&to(B,d,I,D,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),X,ie),I.paint.get("text-opacity").constantOr(1)!==0&&to(B,d,I,D,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),X,ie),d.map.showCollisionBoxes&&(an(B,d,I,D,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),an(B,d,I,D,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))},circle:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("circle-opacity"),X=I.paint.get("circle-stroke-width"),ie=I.paint.get("circle-stroke-opacity"),de=!I.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(X.constantOr(1)===0||ie.constantOr(1)===0))return;const _e=B.context,Ae=_e.gl,ze=B.depthModeForSublayer(0,Ue.ReadOnly),Je=Qt.disabled,ot=B.colorModeForRenderPass(),Lt=[];for(let kt=0;kt<D.length;kt++){const It=D[kt],si=d.getTile(It),fi=si.getBucket(I);if(!fi)continue;const xi=fi.programConfigurations.get(I.id),Vt=B.useProgram("circle",xi),Pi=fi.layoutVertexBuffer,Ei=fi.indexBuffer,Vi=B.style.terrain&&B.style.terrain.getTerrainData(It),Ni={programConfiguration:xi,program:Vt,layoutVertexBuffer:Pi,indexBuffer:Ei,uniformValues:ks(B,It,si,I),terrainData:Vi};if(de){const sn=fi.segments.get();for(const zi of sn)Lt.push({segments:new r.SegmentVector([zi]),sortKey:zi.sortKey,state:Ni})}else Lt.push({segments:fi.segments,sortKey:0,state:Ni})}de&&Lt.sort((kt,It)=>kt.sortKey-It.sortKey);for(const kt of Lt){const{programConfiguration:It,program:si,layoutVertexBuffer:fi,indexBuffer:xi,uniformValues:Vt,terrainData:Pi}=kt.state;si.draw(_e,Ae.TRIANGLES,ze,Je,ot,hi.disabled,Vt,Pi,I.id,fi,xi,kt.segments,I.paint,B.transform.zoom,It)}},heatmap:function(B,d,I,D){if(I.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const z=B.context,X=z.gl,ie=Qt.disabled,de=new bo([X.ONE,X.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(_e,Ae,ze){const Je=_e.gl;_e.activeTexture.set(Je.TEXTURE1),_e.viewport.set([0,0,Ae.width/4,Ae.height/4]);let ot=ze.heatmapFbo;if(ot)Je.bindTexture(Je.TEXTURE_2D,ot.colorAttachment.get()),_e.bindFramebuffer.set(ot.framebuffer);else{const Lt=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,Lt),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),ot=ze.heatmapFbo=_e.createFramebuffer(Ae.width/4,Ae.height/4,!1),function(kt,It,si,fi){const xi=kt.gl;xi.texImage2D(xi.TEXTURE_2D,0,xi.RGBA,It.width/4,It.height/4,0,xi.RGBA,kt.extRenderToTextureHalfFloat?kt.extTextureHalfFloat.HALF_FLOAT_OES:xi.UNSIGNED_BYTE,null),fi.colorAttachment.set(si)}(_e,Ae,Lt,ot)}})(z,B,I),z.clear({color:r.Color.transparent});for(let _e=0;_e<D.length;_e++){const Ae=D[_e];if(d.hasRenderableParent(Ae))continue;const ze=d.getTile(Ae),Je=ze.getBucket(I);if(!Je)continue;const ot=Je.programConfigurations.get(I.id),Lt=B.useProgram("heatmap",ot),{zoom:kt}=B.transform;Lt.draw(z,X.TRIANGLES,Ue.disabled,ie,de,hi.disabled,wl(Ae.posMatrix,ze,kt,I.paint.get("heatmap-intensity")),null,I.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,I.paint,B.transform.zoom,ot)}z.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(z,X){const ie=z.context,de=ie.gl,_e=X.heatmapFbo;if(!_e)return;ie.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,_e.colorAttachment.get()),ie.activeTexture.set(de.TEXTURE1);let Ae=X.colorRampTexture;Ae||(Ae=X.colorRampTexture=new T(ie,X.colorRamp,de.RGBA)),Ae.bind(de.LINEAR,de.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(ie,de.TRIANGLES,Ue.disabled,Qt.disabled,z.colorModeForRenderPass(),hi.disabled,((ze,Je,ot,Lt)=>{const kt=r.create();r.ortho(kt,0,ze.width,ze.height,0,0,1);const It=ze.context.gl;return{u_matrix:kt,u_world:[It.drawingBufferWidth,It.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Je.paint.get("heatmap-opacity")}})(z,X),null,X.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,X.paint,z.transform.zoom)}(B,I))},line:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("line-opacity"),X=I.paint.get("line-width");if(z.constantOr(1)===0||X.constantOr(1)===0)return;const ie=B.depthModeForSublayer(0,Ue.ReadOnly),de=B.colorModeForRenderPass(),_e=I.paint.get("line-dasharray"),Ae=I.paint.get("line-pattern"),ze=Ae.constantOr(1),Je=I.paint.get("line-gradient"),ot=I.getCrossfadeParameters(),Lt=ze?"linePattern":_e?"lineSDF":Je?"lineGradient":"line",kt=B.context,It=kt.gl;let si=!0;for(const fi of D){const xi=d.getTile(fi);if(ze&&!xi.patternsLoaded())continue;const Vt=xi.getBucket(I);if(!Vt)continue;const Pi=Vt.programConfigurations.get(I.id),Ei=B.context.program.get(),Vi=B.useProgram(Lt,Pi),Ni=si||Vi.program!==Ei,sn=B.style.terrain&&B.style.terrain.getTerrainData(fi),zi=Ae.constantOr(null);if(zi&&xi.imageAtlas){const qn=xi.imageAtlas,Er=qn.patternPositions[zi.to.toString()],Dr=qn.patternPositions[zi.from.toString()];Er&&Dr&&Pi.setConstantPatternPositions(Er,Dr)}const Rn=sn?fi:null,vn=ze?da(B,xi,I,ot,Rn):_e?pa(B,xi,I,_e,ot,Rn):Je?cu(B,xi,I,Vt.lineClipsArray.length,Rn):xl(B,xi,I,Rn);if(ze)kt.activeTexture.set(It.TEXTURE0),xi.imageAtlasTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE),Pi.updatePaintBuffers(ot);else if(_e&&(Ni||B.lineAtlas.dirty))kt.activeTexture.set(It.TEXTURE0),B.lineAtlas.bind(kt);else if(Je){const qn=Vt.gradients[I.id];let Er=qn.texture;if(I.gradientVersion!==qn.version){let Dr=256;if(I.stepInterpolant){const j=d.getSource().maxzoom,K=fi.canonical.z===j?Math.ceil(1<<B.transform.maxZoom-fi.canonical.z):1;Dr=r.clamp(r.nextPowerOfTwo(Vt.maxLineLength/r.EXTENT*1024*K),256,kt.maxTextureSize)}qn.gradient=r.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Dr,image:qn.gradient||void 0,clips:Vt.lineClipsArray}),qn.texture?qn.texture.update(qn.gradient):qn.texture=new T(kt,qn.gradient,It.RGBA),qn.version=I.gradientVersion,Er=qn.texture}kt.activeTexture.set(It.TEXTURE0),Er.bind(I.stepInterpolant?It.NEAREST:It.LINEAR,It.CLAMP_TO_EDGE)}Vi.draw(kt,It.TRIANGLES,ie,B.stencilModeForClipping(fi),de,hi.disabled,vn,sn,I.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,I.paint,B.transform.zoom,Pi,Vt.layoutVertexBuffer2),si=!1}},fill:function(B,d,I,D){const z=I.paint.get("fill-color"),X=I.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const ie=B.colorModeForRenderPass(),de=I.paint.get("fill-pattern"),_e=B.opaquePassEnabledForLayer()&&!de.constantOr(1)&&z.constantOr(r.Color.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===_e){const Ae=B.depthModeForSublayer(1,B.renderPass==="opaque"?Ue.ReadWrite:Ue.ReadOnly);jo(B,d,I,D,Ae,ie,!1)}if(B.renderPass==="translucent"&&I.paint.get("fill-antialias")){const Ae=B.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Ue.ReadOnly);jo(B,d,I,D,Ae,ie,!0)}},"fill-extrusion":function(B,d,I,D){const z=I.paint.get("fill-extrusion-opacity");if(z!==0&&B.renderPass==="translucent"){const X=new Ue(B.context.gl.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D);if(z!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Ho(B,d,I,D,X,Qt.disabled,bo.disabled),Ho(B,d,I,D,X,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const ie=B.colorModeForRenderPass();Ho(B,d,I,D,X,Qt.disabled,ie)}}},hillshade:function(B,d,I,D){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const z=B.context,X=B.depthModeForSublayer(0,Ue.ReadOnly),ie=B.colorModeForRenderPass(),[de,_e]=B.renderPass==="translucent"?B.stencilConfigForOverlap(D):[{},D];for(const Ae of _e){const ze=d.getTile(Ae);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&B.renderPass==="offscreen"?fs(B,ze,I,X,Qt.disabled,ie):B.renderPass==="translucent"&&Ss(B,Ae,ze,I,X,de[Ae.overscaledZ],ie)}z.viewport.set([0,0,B.width,B.height])},raster:function(B,d,I,D){if(B.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!D.length)return;const z=B.context,X=z.gl,ie=d.getSource(),de=B.useProgram("raster"),_e=B.colorModeForRenderPass(),[Ae,ze]=ie instanceof we?[{},D]:B.stencilConfigForOverlap(D),Je=ze[ze.length-1].overscaledZ,ot=!B.options.moving;for(const Lt of ze){const kt=B.depthModeForSublayer(Lt.overscaledZ-Je,I.paint.get("raster-opacity")===1?Ue.ReadWrite:Ue.ReadOnly,X.LESS),It=d.getTile(Lt);It.registerFadeDuration(I.paint.get("raster-fade-duration"));const si=d.findLoadedParent(Lt,0),fi=jr(It,si,d,I,B.transform,B.style.terrain);let xi,Vt;const Pi=I.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;z.activeTexture.set(X.TEXTURE0),It.texture.bind(Pi,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(X.TEXTURE1),si?(si.texture.bind(Pi,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),xi=Math.pow(2,si.tileID.overscaledZ-It.tileID.overscaledZ),Vt=[It.tileID.canonical.x*xi%1,It.tileID.canonical.y*xi%1]):It.texture.bind(Pi,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Ei=B.style.terrain&&B.style.terrain.getTerrainData(Lt),Vi=Ei?Lt:null,Ni=Vi?Vi.posMatrix:B.transform.calculatePosMatrix(Lt.toUnwrapped(),ot),sn=U(Ni,Vt||[0,0],xi||1,fi,I);ie instanceof we?de.draw(z,X.TRIANGLES,kt,Qt.disabled,_e,hi.disabled,sn,Ei,I.id,ie.boundsBuffer,B.quadTriangleIndexBuffer,ie.boundsSegments):de.draw(z,X.TRIANGLES,kt,Ae[Lt.overscaledZ],_e,hi.disabled,sn,Ei,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,d,I,D){const z=I.paint.get("background-color"),X=I.paint.get("background-opacity");if(X===0)return;const ie=B.context,de=ie.gl,_e=B.transform,Ae=_e.tileSize,ze=I.paint.get("background-pattern");if(B.isPatternMissing(ze))return;const Je=!ze&&z.a===1&&X===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Je)return;const ot=Qt.disabled,Lt=B.depthModeForSublayer(0,Je==="opaque"?Ue.ReadWrite:Ue.ReadOnly),kt=B.colorModeForRenderPass(),It=B.useProgram(ze?"backgroundPattern":"background"),si=D||_e.coveringTiles({tileSize:Ae,terrain:B.style.terrain});ze&&(ie.activeTexture.set(de.TEXTURE0),B.imageManager.bind(B.context));const fi=I.getCrossfadeParameters();for(const xi of si){const Vt=D?xi.posMatrix:B.transform.calculatePosMatrix(xi.toUnwrapped()),Pi=ze?Ut(Vt,X,B,ze,{tileID:xi,tileSize:Ae},fi):Ct(Vt,X,z),Ei=B.style.terrain&&B.style.terrain.getTerrainData(xi);It.draw(ie,de.TRIANGLES,Lt,ot,kt,hi.disabled,Pi,Ei,I.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}},debug:function(B,d,I){for(let D=0;D<I.length;D++)Bu(B,d,I[D])},custom:function(B,d,I){const D=B.context,z=I.implementation;if(B.renderPass==="offscreen"){const X=z.prerender;X&&(B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),X.call(z,D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),D.setStencilMode(Qt.disabled);const X=z.renderingMode==="3d"?new Ue(B.context.gl.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Ue.ReadOnly);D.setDepthMode(X),z.render(D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState(),D.bindFramebuffer.set(null)}}};class yu{constructor(d,I){this.context=new se(d),this.transform=I,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=Xe.maxUnderzooming+Xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jn,this.gpuTimers={}}resize(d,I,D){if(this.width=d*D,this.height=I*D,this.pixelRatio=D,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const z of this.style._order)this.style._layers[z].resize()}setup(){const d=this.context,I=new r.PosArray;I.emplaceBack(0,0),I.emplaceBack(r.EXTENT,0),I.emplaceBack(0,r.EXTENT),I.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(I,Pr.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const D=new r.PosArray;D.emplaceBack(0,0),D.emplaceBack(r.EXTENT,0),D.emplaceBack(0,r.EXTENT),D.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=d.createVertexBuffer(D,Pr.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const z=new r.RasterBoundsArray;z.emplaceBack(0,0,0,0),z.emplaceBack(r.EXTENT,0,r.EXTENT,0),z.emplaceBack(0,r.EXTENT,0,r.EXTENT),z.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(z,it.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const X=new r.PosArray;X.emplaceBack(0,0),X.emplaceBack(1,0),X.emplaceBack(0,1),X.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(X,Pr.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const ie=new r.LineStripIndexArray;ie.emplaceBack(0),ie.emplaceBack(1),ie.emplaceBack(3),ie.emplaceBack(2),ie.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(ie);const de=new r.TriangleIndexArray;de.emplaceBack(0,1,2),de.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(de),this.emptyTexture=new T(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);const _e=this.context.gl;this.stencilClearMode=new Qt({func:_e.ALWAYS,mask:0},0,255,_e.ZERO,_e.ZERO,_e.ZERO)}clearStencil(){const d=this.context,I=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const D=r.create();r.ortho(D,0,this.width,this.height,0,0,1),r.scale(D,D,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,I.TRIANGLES,Ue.disabled,this.stencilClearMode,bo.disabled,hi.disabled,Ta(D),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,I){if(this.currentStencilSource===d.source||!d.isTileClipped()||!I||!I.length)return;this.currentStencilSource=d.source;const D=this.context,z=D.gl;this.nextStencilID+I.length>256&&this.clearStencil(),D.setColorMode(bo.disabled),D.setDepthMode(Ue.disabled);const X=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ie of I){const de=this._tileClippingMaskIDs[ie.key]=this.nextStencilID++,_e=this.style.terrain&&this.style.terrain.getTerrainData(ie);X.draw(D,z.TRIANGLES,Ue.disabled,new Qt({func:z.ALWAYS,mask:0},de,255,z.KEEP,z.KEEP,z.REPLACE),bo.disabled,hi.disabled,Ta(ie.posMatrix),_e,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,I=this.context.gl;return new Qt({func:I.NOTEQUAL,mask:255},d,255,I.KEEP,I.KEEP,I.REPLACE)}stencilModeForClipping(d){const I=this.context.gl;return new Qt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,I.KEEP,I.KEEP,I.REPLACE)}stencilConfigForOverlap(d){const I=this.context.gl,D=d.sort((ie,de)=>de.overscaledZ-ie.overscaledZ),z=D[D.length-1].overscaledZ,X=D[0].overscaledZ-z+1;if(X>1){this.currentStencilSource=void 0,this.nextStencilID+X>256&&this.clearStencil();const ie={};for(let de=0;de<X;de++)ie[de+z]=new Qt({func:I.GEQUAL,mask:255},de+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=X,[ie,D]}return[{[z]:Qt.disabled},D]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new bo([d.CONSTANT_COLOR,d.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?bo.unblended:bo.alphaBlended}depthModeForSublayer(d,I,D){if(!this.opaquePassEnabledForLayer())return Ue.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new Ue(D||this.context.gl.LEQUAL,I,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,I){this.style=d,this.options=I,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const D=this.style._order,z=this.style.sourceCaches,X=this.style.terrain&&new Gl(this);for(const Ae in z){const ze=z[Ae];ze.used&&ze.prepare(this.context)}const ie={},de={},_e={};for(const Ae in z){const ze=z[Ae];ie[Ae]=ze.getVisibleCoordinates(),de[Ae]=ie[Ae].slice().reverse(),_e[Ae]=ze.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ae=0;Ae<D.length;Ae++)if(this.style._layers[D[Ae]].is3D()){this.opaquePassCutoff=Ae;break}if(X){this.opaquePassCutoff=0;const Ae=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Ae.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ze,Je){const ot=ze.context,Lt=ot.gl,kt=bo.unblended,It=new Ue(Lt.LEQUAL,Ue.ReadWrite,[0,1]),si=Je.getTerrainMesh(),fi=Je.sourceCache.getRenderableTiles(),xi=ze.useProgram("terrainDepth");ot.bindFramebuffer.set(Je.getFramebuffer("depth").framebuffer),ot.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),ot.clear({color:r.Color.transparent,depth:1});for(const Vt of fi){const Pi=Je.getTerrainData(Vt.tileID),Ei=ze.transform.calculatePosMatrix(Vt.tileID.toUnwrapped());xi.draw(ot,Lt.TRIANGLES,It,Qt.disabled,kt,hi.backCCW,{u_matrix:Ei},Pi,"terrain",si.vertexBuffer,si.indexBuffer,si.segments)}ot.bindFramebuffer.set(null),ot.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain),function(ze,Je){const ot=ze.context,Lt=ot.gl,kt=bo.unblended,It=new Ue(Lt.LEQUAL,Ue.ReadWrite,[0,1]),si=Je.getTerrainMesh(),fi=Je.getCoordsTexture(),xi=Je.sourceCache.getRenderableTiles(),Vt=ze.useProgram("terrainCoords");ot.bindFramebuffer.set(Je.getFramebuffer("coords").framebuffer),ot.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),ot.clear({color:r.Color.transparent,depth:1}),Je.coordsIndex=[];for(const Pi of xi){const Ei=Je.getTerrainData(Pi.tileID);ot.activeTexture.set(Lt.TEXTURE0),Lt.bindTexture(Lt.TEXTURE_2D,fi.texture);const Vi=ze.transform.calculatePosMatrix(Pi.tileID.toUnwrapped());Vt.draw(ot,Lt.TRIANGLES,It,Qt.disabled,kt,hi.backCCW,{u_matrix:Vi,u_terrain_coords_id:(255-Je.coordsIndex.length)/255,u_texture:0},Ei,"terrain",si.vertexBuffer,si.indexBuffer,si.segments),Je.coordsIndex.push(Pi.tileID.key)}ot.bindFramebuffer.set(null),ot.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Ae of D){const ze=this.style._layers[Ae];if(!ze.hasOffscreenPass()||ze.isHidden(this.transform.zoom))continue;const Je=de[ze.source];(ze.type==="custom"||Je.length)&&this.renderLayer(this,z[ze.source],ze,Je)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!X)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const Ae=this.style._layers[D[this.currentLayer]],ze=z[Ae.source],Je=ie[Ae.source];this._renderTileClippingMasks(Ae,Je),this.renderLayer(this,ze,Ae,Je)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const Ae=this.style._layers[D[this.currentLayer]],ze=z[Ae.source];if(X&&X.renderLayer(Ae))continue;const Je=(Ae.type==="symbol"?_e:de)[Ae.source];this._renderTileClippingMasks(Ae,ie[Ae.source]),this.renderLayer(this,ze,Ae,Je)}if(this.options.showTileBoundaries){let Ae,ze;Object.values(this.style._layers).forEach(Je=>{Je.source&&!Je.isHidden(this.transform.zoom)&&(Je.source!==(ze&&ze.id)&&(ze=this.style.sourceCaches[Je.source]),(!Ae||Ae.getSource().maxzoom<ze.getSource().maxzoom)&&(Ae=ze))}),Ae&&Ha.debug(this,Ae,Ae.getVisibleCoordinates())}this.options.showPadding&&function(Ae){const ze=Ae.transform.padding;La(Ae,Ae.transform.height-(ze.top||0),3,Cs),La(Ae,ze.bottom||0,3,_s),Sl(Ae,ze.left||0,3,Hl),Sl(Ae,Ae.transform.width-(ze.right||0),3,kl);const Je=Ae.transform.centerPoint;(function(ot,Lt,kt,It){ol(ot,Lt-1,kt-10,2,20,It),ol(ot,Lt-10,kt-1,20,2,It)})(Ae,Je.x,Ae.transform.height-Je.y,Ru)}(this),this.context.setDefault()}renderLayer(d,I,D,z){D.isHidden(this.transform.zoom)||(D.type==="background"||D.type==="custom"||(z||[]).length)&&(this.id=D.id,this.gpuTimingStart(D),Ha[D.type](d,I,D,z,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const I=this.context.extTimerQuery;let D=this.gpuTimers[d.id];D||(D=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),D.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,D.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}queryGpuTimers(d){const I={};for(const D in d){const z=d[D],X=this.context.extTimerQuery,ie=X.getQueryObjectEXT(z.query,X.QUERY_RESULT_EXT)/1e6;X.deleteQueryEXT(z.query),I[D]=ie}return I}translatePosMatrix(d,I,D,z,X){if(!D[0]&&!D[1])return d;const ie=X?z==="map"?this.transform.angle:0:z==="viewport"?-this.transform.angle:0;if(ie){const Ae=Math.sin(ie),ze=Math.cos(ie);D=[D[0]*ze-D[1]*Ae,D[0]*Ae+D[1]*ze]}const de=[X?D[0]:wr(I,D[0],this.transform.zoom),X?D[1]:wr(I,D[1],this.transform.zoom),0],_e=new Float32Array(16);return r.translate(_e,d,de),_e}saveTileTexture(d){const I=this._tileTextures[d.size[0]];I?I.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const I=this._tileTextures[d];return I&&I.length>0?I.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const I=this.imageManager.getPattern(d.from.toString()),D=this.imageManager.getPattern(d.to.toString());return!I||!D}useProgram(d,I){this.cache=this.cache||{};const D=d+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[D]||(this.cache[D]=new zr(this.context,d,Mo[d],I,Bt[d],this._showOverdrawInspector,this.style.terrain)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Fs{constructor(d,I){this.points=d,this.planes=I}static fromInvProjectionMatrix(d,I,D){const z=Math.pow(2,D),X=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(de=>{const _e=1/(de=r.transformMat4([],de,d))[3]/I*z;return r.mul$1(de,de,[_e,_e,1/de[3],_e])}),ie=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(de=>{const _e=r.sub([],X[de[0]],X[de[1]]),Ae=r.sub([],X[de[2]],X[de[1]]),ze=r.normalize([],r.cross([],_e,Ae)),Je=-r.dot(ze,X[de[1]]);return ze.concat(Je)});return new Fs(X,ie)}}class _u{constructor(d,I){this.min=d,this.max=I,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(d){const I=[d%2==0,d<2],D=r.clone$2(this.min),z=r.clone$2(this.max);for(let X=0;X<I.length;X++)D[X]=I[X]?this.min[X]:this.center[X],z[X]=I[X]?this.center[X]:this.max[X];return z[2]=this.max[2],new _u(D,z)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const I=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let D=!0;for(let z=0;z<d.planes.length;z++){const X=d.planes[z];let ie=0;for(let de=0;de<I.length;de++)r.dot$1(X,I[de])>=0&&ie++;if(ie===0)return 0;ie!==I.length&&(D=!1)}if(D)return 2;for(let z=0;z<3;z++){let X=Number.MAX_VALUE,ie=-Number.MAX_VALUE;for(let de=0;de<d.points.length;de++){const _e=d.points[de][z]-this.min[z];X=Math.min(X,_e),ie=Math.max(ie,_e)}if(ie<0||X>this.max[z]-this.min[z])return 0}return 1}}class sl{constructor(d=0,I=0,D=0,z=0){if(isNaN(d)||d<0||isNaN(I)||I<0||isNaN(D)||D<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=I,this.left=D,this.right=z}interpolate(d,I,D){return I.top!=null&&d.top!=null&&(this.top=r.number(d.top,I.top,D)),I.bottom!=null&&d.bottom!=null&&(this.bottom=r.number(d.bottom,I.bottom,D)),I.left!=null&&d.left!=null&&(this.left=r.number(d.left,I.left,D)),I.right!=null&&d.right!=null&&(this.right=r.number(d.right,I.right,D)),this}getCenter(d,I){const D=r.clamp((this.left+d-this.right)/2,0,d),z=r.clamp((this.top+I-this.bottom)/2,0,I);return new r.pointGeometry(D,z)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new sl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Wl{constructor(d,I,D,z,X){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=X===void 0||!!X,this._minZoom=d||0,this._maxZoom=I||22,this._minPitch=D==null?0:D,this._maxPitch=z==null?60:z,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sl,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const d=new Wl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d._elevation=this._elevation,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const I=-r.wrap(d,-180,180)*Math.PI/180;var D;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=(D=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0),D[0]=1,D[3]=1,D),function(z,X,ie){var de=X[0],_e=X[1],Ae=X[2],ze=X[3],Je=Math.sin(ie),ot=Math.cos(ie);z[0]=de*ot+Ae*Je,z[1]=_e*ot+ze*Je,z[2]=de*-Je+Ae*ot,z[3]=_e*-Je+ze*ot}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const I=r.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const I=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,I,D){this._unmodified=!1,this._edgeInsets.interpolate(d,I,D),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const I=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,I)}getVisibleUnwrappedCoordinates(d){const I=[new r.UnwrappedTileID(0,d)];if(this._renderWorldCopies){const D=this.pointCoordinate(new r.pointGeometry(0,0)),z=this.pointCoordinate(new r.pointGeometry(this.width,0)),X=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),ie=this.pointCoordinate(new r.pointGeometry(0,this.height)),de=Math.floor(Math.min(D.x,z.x,X.x,ie.x)),_e=Math.floor(Math.max(D.x,z.x,X.x,ie.x)),Ae=1;for(let ze=de-Ae;ze<=_e+Ae;ze++)ze!==0&&I.push(new r.UnwrappedTileID(ze,d))}return I}coveringTiles(d){var I,D;let z=this.coveringZoomLevel(d);const X=z;if(d.minzoom!==void 0&&z<d.minzoom)return[];d.maxzoom!==void 0&&z>d.maxzoom&&(z=d.maxzoom);const ie=this.pointCoordinate(this.getCameraPoint()),de=r.MercatorCoordinate.fromLngLat(this.center),_e=Math.pow(2,z),Ae=[_e*ie.x,_e*ie.y,0],ze=[_e*de.x,_e*de.y,0],Je=Fs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z);let ot=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ot=z);const Lt=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,kt=Vt=>({aabb:new _u([Vt*_e,0,0],[(Vt+1)*_e,_e,0]),zoom:0,x:0,y:0,wrap:Vt,fullyVisible:!1}),It=[],si=[],fi=z,xi=d.reparseOverscaled?X:z;if(this._renderWorldCopies)for(let Vt=1;Vt<=3;Vt++)It.push(kt(-Vt)),It.push(kt(Vt));for(It.push(kt(0));It.length>0;){const Vt=It.pop(),Pi=Vt.x,Ei=Vt.y;let Vi=Vt.fullyVisible;if(!Vi){const qn=Vt.aabb.intersects(Je);if(qn===0)continue;Vi=qn===2}const Ni=d.terrain?Ae:ze,sn=Vt.aabb.distanceX(Ni),zi=Vt.aabb.distanceY(Ni),Rn=Math.max(Math.abs(sn),Math.abs(zi)),vn=Lt+(1<<fi-Vt.zoom)-2;if(Vt.zoom===fi||Rn>vn&&Vt.zoom>=ot){const qn=fi-Vt.zoom,Er=Ae[0]-.5-(Pi<<qn),Dr=Ae[1]-.5-(Ei<<qn);si.push({tileID:new r.OverscaledTileID(Vt.zoom===fi?xi:Vt.zoom,Vt.wrap,Vt.zoom,Pi,Ei),distanceSq:r.sqrLen([ze[0]-.5-Pi,ze[1]-.5-Ei]),tileDistanceToCamera:Math.sqrt(Er*Er+Dr*Dr)})}else for(let qn=0;qn<4;qn++){const Er=(Pi<<1)+qn%2,Dr=(Ei<<1)+(qn>>1),j=Vt.zoom+1;let K=Vt.aabb.quadrant(qn);if(d.terrain){const ue=new r.OverscaledTileID(j,Vt.wrap,j,Er,Dr),ve=d.terrain.getMinMaxElevation(ue),je=(I=ve.minElevation)!==null&&I!==void 0?I:this.elevation,Ze=(D=ve.maxElevation)!==null&&D!==void 0?D:this.elevation;K=new _u([K.min[0],K.min[1],je],[K.max[0],K.max[1],Ze])}It.push({aabb:K,zoom:j,x:Er,y:Dr,wrap:Vt.wrap,fullyVisible:Vi})}}return si.sort((Vt,Pi)=>Vt.distanceSq-Pi.distanceSq).map(Vt=>Vt.tileID)}resize(d,I){this.width=d,this.height=I,this.pixelsToGLUnits=[2/d,-2/I],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const I=r.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(d.lng)*this.worldSize,r.mercatorYfromLat(I)*this.worldSize)}unproject(d){return new r.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(d){this.freezeElevation||(this.elevation=d?this.getElevation(this._center,d):0)}getElevation(d,I){const D=r.MercatorCoordinate.fromLngLat(d),z=(1<<this.tileZoom)*r.EXTENT,X=D.x*z,ie=D.y*z,de=Math.floor(X/r.EXTENT),_e=Math.floor(ie/r.EXTENT),Ae=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,de,_e);return I.getElevation(Ae,X%r.EXTENT,ie%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const I=this.pointLocation(this.centerPoint,d),D=this.getElevation(I,d);if(!(this.elevation-D))return;const z=this.getCameraPosition(),X=r.MercatorCoordinate.fromLngLat(z.lngLat,z.altitude),ie=r.MercatorCoordinate.fromLngLat(I,D),de=X.x-ie.x,_e=X.y-ie.y,Ae=X.z-ie.z,ze=Math.sqrt(de*de+_e*_e+Ae*Ae),Je=this.scaleZoom(this.cameraToCenterDistance/ze/this.tileSize);this._elevation=D,this._center=I,this.zoom=Je}setLocationAtPoint(d,I){const D=this.pointCoordinate(I),z=this.pointCoordinate(this.centerPoint),X=this.locationCoordinate(d),ie=new r.MercatorCoordinate(X.x-(D.x-z.x),X.y-(D.y-z.y));this.center=this.coordinateLocation(ie),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,I){return I?this.coordinatePoint(this.locationCoordinate(d),this.getElevation(d,I),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,I){return this.coordinateLocation(this.pointCoordinate(d,I))}locationCoordinate(d){return r.MercatorCoordinate.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,I){if(I){const ot=I.pointCoordinate(d);if(ot!=null)return ot}const D=[d.x,d.y,0,1],z=[d.x,d.y,1,1];r.transformMat4(D,D,this.pixelMatrixInverse),r.transformMat4(z,z,this.pixelMatrixInverse);const X=D[3],ie=z[3],de=D[1]/X,_e=z[1]/ie,Ae=D[2]/X,ze=z[2]/ie,Je=Ae===ze?0:(0-Ae)/(ze-Ae);return new r.MercatorCoordinate(r.number(D[0]/X,z[0]/ie,Je)/this.worldSize,r.number(de,_e,Je)/this.worldSize)}coordinatePoint(d,I=0,D=this.pixelMatrix){const z=[d.x*this.worldSize,d.y*this.worldSize,I,1];return r.transformMat4(z,z,D),new r.pointGeometry(z[0]/z[3],z[1]/z[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,d))).extend(this.pointLocation(new r.pointGeometry(this.width,d))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,I=!1){const D=d.key,z=I?this._alignedPosMatrixCache:this._posMatrixCache;if(z[D])return z[D];const X=d.canonical,ie=this.worldSize/this.zoomScale(X.z),de=X.x+Math.pow(2,X.z)*d.wrap,_e=r.identity(new Float64Array(16));return r.translate(_e,_e,[de*ie,X.y*ie,0]),r.scale(_e,_e,[ie/r.EXTENT,ie/r.EXTENT,1]),r.multiply(_e,I?this.alignedProjMatrix:this.projMatrix,_e),z[D]=new Float32Array(_e),z[D]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,I,D,z,X=-90,ie=90,de=-180,_e=180;const Ae=this.size,ze=this._unmodified;if(this.latRange){const Lt=this.latRange;X=r.mercatorYfromLat(Lt[1])*this.worldSize,ie=r.mercatorYfromLat(Lt[0])*this.worldSize,d=ie-X<Ae.y?Ae.y/(ie-X):0}if(this.lngRange){const Lt=this.lngRange;de=r.wrap(r.mercatorXfromLng(Lt[0])*this.worldSize,0,this.worldSize),_e=r.wrap(r.mercatorXfromLng(Lt[1])*this.worldSize,0,this.worldSize),_e<de&&(_e+=this.worldSize),I=_e-de<Ae.x?Ae.x/(_e-de):0}const Je=this.point,ot=Math.max(I||0,d||0);if(ot)return this.center=this.unproject(new r.pointGeometry(I?(_e+de)/2:Je.x,d?(ie+X)/2:Je.y)),this.zoom+=this.scaleZoom(ot),this._unmodified=ze,void(this._constraining=!1);if(this.latRange){const Lt=Je.y,kt=Ae.y/2;Lt-kt<X&&(z=X+kt),Lt+kt>ie&&(z=ie-kt)}if(this.lngRange){const Lt=(de+_e)/2,kt=r.wrap(Je.x,Lt-this.worldSize/2,Lt+this.worldSize/2),It=Ae.x/2;kt-It<de&&(D=de+It),kt+It>_e&&(D=_e-It)}D===void 0&&z===void 0||(this.center=this.unproject(new r.pointGeometry(D!==void 0?D:Je.x,z!==void 0?z:Je.y)).wrap()),this._unmodified=ze,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,I=this.point.x,D=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let z=r.identity(new Float64Array(16));r.scale(z,z,[this.width/2,-this.height/2,1]),r.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=r.identity(new Float64Array(16)),r.scale(z,z,[1,-1,1]),r.translate(z,z,[-1,-1,0]),r.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const X=Math.PI/2+this._pitch,ie=this._fov*(.5+d.y/this.height),de=Math.sin(ie)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-X-ie,.01,Math.PI-.01)),_e=this.getHorizon(),Ae=2*Math.atan(_e/this.cameraToCenterDistance)*(.5+d.y/(2*_e)),ze=Math.sin(Ae)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-X-Ae,.01,Math.PI-.01)),Je=Math.cos(Math.PI/2-this._pitch)*de+this.cameraToSeaLevelDistance,ot=Math.cos(Math.PI/2-this._pitch)*ze+this.cameraToSeaLevelDistance,Lt=1.01*Math.min(Je,ot),kt=this.height/50;z=new Float64Array(16),r.perspective(z,this._fov,this.width/this.height,kt,Lt),z[8]=2*-d.x/this.width,z[9]=2*d.y/this.height,r.scale(z,z,[1,-1,1]),r.translate(z,z,[0,0,-this.cameraToCenterDistance]),r.rotateX(z,z,this._pitch),r.rotateZ(z,z,this.angle),r.translate(z,z,[-I,-D,0]),this.mercatorMatrix=r.scale([],z,[this.worldSize,this.worldSize,this.worldSize]),r.scale(z,z,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,z),r.translate(z,z,[0,0,-this.elevation]),this.projMatrix=z,this.invProjMatrix=r.invert([],z),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,z);const It=this.width%2/2,si=this.height%2/2,fi=Math.cos(this.angle),xi=Math.sin(this.angle),Vt=I-Math.round(I)+fi*It+xi*si,Pi=D-Math.round(D)+fi*si+xi*It,Ei=new Float64Array(z);if(r.translate(Ei,Ei,[Vt>.5?Vt-1:Vt,Pi>.5?Pi-1:Pi,0]),this.alignedProjMatrix=Ei,z=r.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new r.pointGeometry(0,0)),I=[d.x*this.worldSize,d.y*this.worldSize,0,1];return r.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,d))}getCameraQueryGeometry(d){const I=this.getCameraPoint();if(d.length===1)return[d[0],I];{let D=I.x,z=I.y,X=I.x,ie=I.y;for(const de of d)D=Math.min(D,de.x),z=Math.min(z,de.y),X=Math.max(X,de.x),ie=Math.max(ie,de.y);return[new r.pointGeometry(D,z),new r.pointGeometry(X,z),new r.pointGeometry(X,ie),new r.pointGeometry(D,ie),new r.pointGeometry(D,z)]}}}class Pa{constructor(d){this._hashName=d&&encodeURIComponent(d),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(I,D){let z=!1,X=null;const ie=()=>{X=null,z&&(I(),X=setTimeout(ie,300),z=!1)};return()=>(z=!0,X||ie(),X)}(this._updateHashUnthrottled.bind(this))}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const I=this._map.getCenter(),D=Math.round(100*this._map.getZoom())/100,z=Math.ceil((D*Math.LN2+Math.log(512/360/.5))/Math.LN10),X=Math.pow(10,z),ie=Math.round(I.lng*X)/X,de=Math.round(I.lat*X)/X,_e=this._map.getBearing(),Ae=this._map.getPitch();let ze="";if(ze+=d?`/${ie}/${de}/${D}`:`${D}/${de}/${ie}`,(_e||Ae)&&(ze+="/"+Math.round(10*_e)/10),Ae&&(ze+=`/${Math.round(Ae)}`),this._hashName){const Je=this._hashName;let ot=!1;const Lt=window.location.hash.slice(1).split("&").map(kt=>{const It=kt.split("=")[0];return It===Je?(ot=!0,`${It}=${ze}`):kt}).filter(kt=>kt);return ot||Lt.push(`${Je}=${ze}`),`#${Lt.join("&")}`}return`#${ze}`}_getCurrentHash(){const d=window.location.hash.replace("#","");if(this._hashName){let I;return d.split("&").map(D=>D.split("=")).forEach(D=>{D[0]===this._hashName&&(I=D)}),(I&&I[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._getCurrentHash();if(d.length>=3&&!d.some(I=>isNaN(I))){const I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:I,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}}}const Cl={linearity:.3,easing:r.bezier(0,0,.3,1)},Mc=r.extend({deceleration:2500,maxSpeed:1400},Cl),Dc=r.extend({deceleration:20,maxSpeed:1400},Cl),El=r.extend({deceleration:1e3,maxSpeed:360},Cl),Rs=r.extend({deceleration:1e3,maxSpeed:90},Cl);class Ma{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,I=r.exported.now();for(;d.length>0&&I-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const I={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:X}of this._inertiaBuffer)I.zoom+=X.zoomDelta||0,I.bearing+=X.bearingDelta||0,I.pitch+=X.pitchDelta||0,X.panDelta&&I.pan._add(X.panDelta),X.around&&(I.around=X.around),X.pinchAround&&(I.pinchAround=X.pinchAround);const D=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(I.pan.mag()){const X=sa(I.pan.mag(),D,r.extend({},Mc,d||{}));z.offset=I.pan.mult(X.amount/I.pan.mag()),z.center=this._map.transform.center,Da(z,X)}if(I.zoom){const X=sa(I.zoom,D,Dc);z.zoom=this._map.transform.zoom+X.amount,Da(z,X)}if(I.bearing){const X=sa(I.bearing,D,El);z.bearing=this._map.transform.bearing+r.clamp(X.amount,-179,179),Da(z,X)}if(I.pitch){const X=sa(I.pitch,D,Rs);z.pitch=this._map.transform.pitch+X.amount,Da(z,X)}if(z.zoom||z.bearing){const X=I.pinchAround===void 0?I.around:I.pinchAround;z.around=X?this._map.unproject(X):this._map.getCenter()}return this.clear(),r.extend(z,{noMoveStart:!0})}}function Da(B,d){(!B.duration||B.duration<d.duration)&&(B.duration=d.duration,B.easing=d.easing)}function sa(B,d,I){const{maxSpeed:D,linearity:z,deceleration:X}=I,ie=r.clamp(B*z/(d/1e3),-D,D),de=Math.abs(ie)/(X*z);return{easing:I.easing,duration:1e3*de,amount:ie*(de/2)}}class ss extends r.Event{constructor(d,I,D,z={}){const X=x.mousePos(I.getCanvasContainer(),D),ie=I.unproject(X);super(d,r.extend({point:X,lngLat:ie,originalEvent:D},z)),this._defaultPrevented=!1,this.target=I}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class al extends r.Event{constructor(d,I,D){const z=d==="touchend"?D.changedTouches:D.touches,X=x.touchPos(I.getCanvasContainer(),z),ie=X.map(_e=>I.unproject(_e)),de=X.reduce((_e,Ae,ze,Je)=>_e.add(Ae.div(Je.length)),new r.pointGeometry(0,0));super(d,{points:X,point:de,lngLats:ie,lngLat:I.unproject(de),originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Yo extends r.Event{constructor(d,I,D){super(d,{originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class zu{constructor(d,I){this._map=d,this._clickTolerance=I.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new Yo(d.type,this._map,d))}mousedown(d,I){return this._mousedownPos=I,this._firePreventable(new ss(d.type,this._map,d))}mouseup(d){this._map.fire(new ss(d.type,this._map,d))}click(d,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new ss(d.type,this._map,d))}dblclick(d){return this._firePreventable(new ss(d.type,this._map,d))}mouseover(d){this._map.fire(new ss(d.type,this._map,d))}mouseout(d){this._map.fire(new ss(d.type,this._map,d))}touchstart(d){return this._firePreventable(new al(d.type,this._map,d))}touchmove(d){this._map.fire(new al(d.type,this._map,d))}touchend(d){this._map.fire(new al(d.type,this._map,d))}touchcancel(d){this._map.fire(new al(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oa{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new ss(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ss("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new ss(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class aa{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=I.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,I){this.isEnabled()&&d.shiftKey&&d.button===0&&(x.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)}mousemoveWindow(d,I){if(!this._active)return;const D=I;if(this._lastPos.equals(D)||!this._box&&D.dist(this._startPos)<this._clickTolerance)return;const z=this._startPos;this._lastPos=D,this._box||(this._box=x.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const X=Math.min(z.x,D.x),ie=Math.max(z.x,D.x),de=Math.min(z.y,D.y),_e=Math.max(z.y,D.y);x.setTransform(this._box,`translate(${X}px,${de}px)`),this._box.style.width=ie-X+"px",this._box.style.height=_e-de+"px"}mouseupWindow(d,I){if(!this._active||d.button!==0)return;const D=this._startPos,z=I;if(this.reset(),x.suppressClick(),D.x!==z.x||D.y!==z.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:X=>X.fitScreenCoordinates(D,z,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,I){return this._map.fire(new r.Event(d,{originalEvent:I}))}}function Xr(B,d){if(B.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${d.length}`);const I={};for(let D=0;D<B.length;D++)I[B[D].identifier]=d[D];return I}class _a{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,I,D){(this.centroid||D.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),D.length===this.numTouches&&(this.centroid=function(z){const X=new r.pointGeometry(0,0);for(const ie of z)X._add(ie);return X.div(z.length)}(I),this.touches=Xr(D,I)))}touchmove(d,I,D){if(this.aborted||!this.centroid)return;const z=Xr(D,I);for(const X in this.touches){const ie=this.touches[X],de=z[X];(!de||de.dist(ie)>30)&&(this.aborted=!0)}}touchend(d,I,D){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),D.length===0){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class Il{constructor(d){this.singleTap=new _a(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,I,D){this.singleTap.touchstart(d,I,D)}touchmove(d,I,D){this.singleTap.touchmove(d,I,D)}touchend(d,I,D){const z=this.singleTap.touchend(d,I,D);if(z){const X=d.timeStamp-this.lastTime<500,ie=!this.lastTap||this.lastTap.dist(z)<30;if(X&&ie||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class Nu{constructor(){this._zoomIn=new Il({numTouches:1,numTaps:2}),this._zoomOut=new Il({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,I,D){this._zoomIn.touchstart(d,I,D),this._zoomOut.touchstart(d,I,D)}touchmove(d,I,D){this._zoomIn.touchmove(d,I,D),this._zoomOut.touchmove(d,I,D)}touchend(d,I,D){const z=this._zoomIn.touchend(d,I,D),X=this._zoomOut.touchend(d,I,D);return z?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ie=>ie.easeTo({duration:300,zoom:ie.getZoom()+1,around:ie.unproject(z)},{originalEvent:d})}):X?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ie=>ie.easeTo({duration:300,zoom:ie.getZoom()-1,around:ie.unproject(X)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vu={0:1,2:2};class Hs{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(d,I){return!1}_move(d,I){return{}}mousedown(d,I){if(this._lastPoint)return;const D=x.mouseButton(d);this._correctButton(d,D)&&(this._lastPoint=I,this._eventButton=D)}mousemoveWindow(d,I){const D=this._lastPoint;if(D){if(d.preventDefault(),function(z,X){const ie=vu[X];return z.buttons===void 0||(z.buttons&ie)!==ie}(d,this._eventButton))this.reset();else if(this._moved||!(I.dist(D)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(D,I)}}mouseupWindow(d){this._lastPoint&&x.mouseButton(d)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl extends Hs{mousedown(d,I){super.mousedown(d,I),this._lastPoint&&(this._active=!0)}_correctButton(d,I){return I===0&&!d.ctrlKey}_move(d,I){return{around:I,panDelta:I.sub(d)}}}class ds extends Hs{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=.8*(I.x-d.x);if(D)return this._active=!0,{bearingDelta:D}}contextmenu(d){d.preventDefault()}}class Pn extends Hs{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=-.5*(I.y-d.y);if(D)return this._active=!0,{pitchDelta:D}}contextmenu(d){d.preventDefault()}}class Fo{constructor(d,I){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=I,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,I,D){return this._calculateTransform(d,I,D)}touchmove(d,I,D){if(this._map._cooperativeGestures&&(this._minTouches===2&&D.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,D.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(D.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,I,D)}touchend(d,I,D){this._calculateTransform(d,I,D),this._active&&D.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,I,D){D.length>0&&(this._active=!0);const z=Xr(D,I),X=new r.pointGeometry(0,0),ie=new r.pointGeometry(0,0);let de=0;for(const Ae in z){const ze=z[Ae],Je=this._touches[Ae];Je&&(X._add(ze),ie._add(ze.sub(Je)),de++,z[Ae]=ze)}if(this._touches=z,de<this._minTouches||!ie.mag())return;const _e=ie.div(de);return this._sum._add(_e),this._sum.mag()<this._clickTolerance?void 0:{around:X.div(de),panDelta:_e}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(d){}_move(d,I,D){return{}}touchstart(d,I,D){this._firstTwoTouches||D.length<2||(this._firstTwoTouches=[D[0].identifier,D[1].identifier],this._start([I[0],I[1]]))}touchmove(d,I,D){if(!this._firstTwoTouches)return;d.preventDefault();const[z,X]=this._firstTwoTouches,ie=Co(D,I,z),de=Co(D,I,X);if(!ie||!de)return;const _e=this._aroundCenter?null:ie.add(de).div(2);return this._move([ie,de],_e,d)}touchend(d,I,D){if(!this._firstTwoTouches)return;const[z,X]=this._firstTwoTouches,ie=Co(D,I,z),de=Co(D,I,X);ie&&de||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Co(B,d,I){for(let D=0;D<B.length;D++)if(B[D].identifier===I)return d[D]}function ts(B,d){return Math.log(B/d)/Math.LN2}class _n extends Hr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,I){const D=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(ts(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ts(this._distance,D),pinchAround:I}}}function Fa(B,d){return 180*B.angleWith(d)/Math.PI}class ju extends Hr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,I){const D=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fa(this._vector,D),pinchAround:I}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const I=25/(Math.PI*this._minDiameter)*360,D=Fa(d,this._startVector);return Math.abs(D)<I}}function Uu(B){return Math.abs(B.y)>Math.abs(B.x)}class Oc extends Hr{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,I,D){super.touchstart(d,I,D),this._currentTouchCount=D.length}_start(d){this._lastPoints=d,Uu(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,I,D){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const z=d[0].sub(this._lastPoints[0]),X=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(z,X,D.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(z.y+X.y)/2*-.5}):void 0}gestureBeginsVertically(d,I,D){if(this._valid!==void 0)return this._valid;const z=d.mag()>=2,X=I.mag()>=2;if(!z&&!X)return;if(!z||!X)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;const ie=d.y>0==I.y>0;return Uu(d)&&Uu(I)&&ie}}const lh={panStep:100,bearingStep:15,pitchStep:10};class uh{constructor(){const d=lh;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let I=0,D=0,z=0,X=0,ie=0;switch(d.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:d.shiftKey?D=-1:(d.preventDefault(),X=-1);break;case 39:d.shiftKey?D=1:(d.preventDefault(),X=1);break;case 38:d.shiftKey?z=1:(d.preventDefault(),ie=-1);break;case 40:d.shiftKey?z=-1:(d.preventDefault(),ie=1);break;default:return}return this._rotationDisabled&&(D=0,z=0),{cameraAnimation:de=>{const _e=de.getZoom();de.easeTo({duration:300,easeId:"keyboardHandler",easing:Dh,zoom:I?Math.round(_e)+I*(d.shiftKey?2:1):_e,bearing:de.getBearing()+D*this._bearingStep,pitch:de.getPitch()+z*this._pitchStep,offset:[-X*this._panStep,-ie*this._panStep],center:de.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Dh(B){return B*(2-B)}const Lr=4.000244140625;class Fc{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._handler=I,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;d.preventDefault()}let I=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const D=r.exported.now(),z=D-(this._lastWheelEventTime||0);this._lastWheelEventTime=D,I!==0&&I%Lr==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(z*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),d.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=d,this._delta-=I,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const I=x.mousePos(this._el,d);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;if(this._delta!==0){const de=this._type==="wheel"&&Math.abs(this._delta)>Lr?this._wheelZoomRate:this._defaultZoomRate;let _e=2/(1+Math.exp(-Math.abs(this._delta*de)));this._delta<0&&_e!==0&&(_e=1/_e);const Ae=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(Ae*_e))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const I=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,D=this._startZoom,z=this._easing;let X,ie=!1;if(this._type==="wheel"&&D&&z){const de=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),_e=z(de);X=r.number(D,I,_e),de<1?this._frameId||(this._frameId=!0):ie=!0}else X=I,ie=!0;return this._active=!0,ie&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ie,zoomDelta:X-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let I=r.ease;if(this._prevEase){const D=this._prevEase,z=(r.exported.now()-D.start)/D.duration,X=D.easing(z+.01)-D.easing(z),ie=.27/Math.sqrt(X*X+1e-4)*.01,de=Math.sqrt(.0729-ie*ie);I=r.bezier(ie,de,.25,1)}return this._prevEase={start:r.exported.now(),duration:d,easing:I},I}reset(){this._active=!1}}class rc{constructor(d,I){this._clickZoom=d,this._tapZoom=I}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zo{constructor(){this.reset()}reset(){this._active=!1}dblclick(d,I){return d.preventDefault(),{cameraAnimation:D=>{D.easeTo({duration:300,zoom:D.getZoom()+(d.shiftKey?-1:1),around:D.unproject(I)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Js{constructor(){this._tap=new Il({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(d,I,D){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?D.length>0&&(this._swipePoint=I[0],this._swipeTouch=D[0].identifier):this._tap.touchstart(d,I,D))}touchmove(d,I,D){if(this._tapTime){if(this._swipePoint){if(D[0].identifier!==this._swipeTouch)return;const z=I[0],X=z.y-this._swipePoint.y;return this._swipePoint=z,d.preventDefault(),this._active=!0,{zoomDelta:X/128}}}else this._tap.touchmove(d,I,D)}touchend(d,I,D){this._tapTime?this._swipePoint&&D.length===0&&this.reset():this._tap.touchend(d,I,D)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Go{constructor(d,I,D){this._el=d,this._mousePan=I,this._touchPan=D}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ga{constructor(d,I,D){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=I,this._mousePitch=D}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class oc{constructor(d,I,D,z){this._el=d,this._touchZoom=I,this._touchRotate=D,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const bu=B=>B.zoom||B.drag||B.pitch||B.rotate;class wu extends r.Event{}function Xl(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}class no{constructor(d,I){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ma(d),this._bearingSnap=I.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(I),r.bindAll(["handleEvent","handleWindowEvent"],this);const D=this._el;this._listeners=[[D,"touchstart",{passive:!0}],[D,"touchmove",{passive:!1}],[D,"touchend",void 0],[D,"touchcancel",void 0],[D,"mousedown",void 0],[D,"mousemove",void 0],[D,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[D,"mouseover",void 0],[D,"mouseout",void 0],[D,"dblclick",void 0],[D,"click",void 0],[D,"keydown",{capture:!1}],[D,"keyup",void 0],[D,"wheel",{passive:!1}],[D,"contextmenu",void 0],[window,"blur",void 0]];for(const[z,X,ie]of this._listeners)x.addEventListener(z,X,z===document?this.handleWindowEvent:this.handleEvent,ie)}destroy(){for(const[d,I,D]of this._listeners)x.removeEventListener(d,I,d===document?this.handleWindowEvent:this.handleEvent,D)}_addDefaultHandlers(d){const I=this._map,D=I.getCanvasContainer();this._add("mapEvent",new zu(I,d));const z=I.boxZoom=new aa(I,d);this._add("boxZoom",z);const X=new Nu,ie=new Zo;I.doubleClickZoom=new rc(ie,X),this._add("tapZoom",X),this._add("clickZoom",ie);const de=new Js;this._add("tapDragZoom",de);const _e=I.touchPitch=new Oc(I);this._add("touchPitch",_e);const Ae=new ds(d),ze=new Pn(d);I.dragRotate=new Ga(d,Ae,ze),this._add("mouseRotate",Ae,["mousePitch"]),this._add("mousePitch",ze,["mouseRotate"]);const Je=new Tl(d),ot=new Fo(d,I);I.dragPan=new Go(D,Je,ot),this._add("mousePan",Je),this._add("touchPan",ot,["touchZoom","touchRotate"]);const Lt=new ju,kt=new _n;I.touchZoomRotate=new oc(D,kt,Lt,de),this._add("touchRotate",Lt,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]);const It=I.scrollZoom=new Fc(I,this);this._add("scrollZoom",It,["mousePan"]);const si=I.keyboard=new uh;this._add("keyboard",si),this._add("blockableMapEvent",new Oa(I));for(const fi of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[fi]&&I[fi].enable(d[fi])}_add(d,I,D){this._handlers.push({handlerName:d,handler:I,allowed:D}),this._handlersById[d]=I}stop(d){if(!this._updatingCamera){for(const{handler:I}of this._handlers)I.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(bu(this._eventsInProgress))||this.isZooming()}_blockedByActive(d,I,D){for(const z in d)if(z!==D&&(!I||I.indexOf(z)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const I=[];for(const D of d)this._el.contains(D.target)&&I.push(D);return I}handleEvent(d,I){if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const D=d.type==="renderFrame"?void 0:d,z={needsRenderFrame:!1},X={},ie={},de=d.touches,_e=de?this._getMapTouches(de):void 0,Ae=_e?x.touchPos(this._el,_e):x.mousePos(this._el,d);for(const{handlerName:ot,handler:Lt,allowed:kt}of this._handlers){if(!Lt.isEnabled())continue;let It;this._blockedByActive(ie,kt,ot)?Lt.reset():Lt[I||d.type]&&(It=Lt[I||d.type](d,Ae,_e),this.mergeHandlerResult(z,X,It,ot,D),It&&It.needsRenderFrame&&this._triggerRenderFrame()),(It||Lt.isActive())&&(ie[ot]=Lt)}const ze={};for(const ot in this._previousActiveHandlers)ie[ot]||(ze[ot]=D);this._previousActiveHandlers=ie,(Object.keys(ze).length||Xl(z))&&(this._changes.push([z,X,ze]),this._triggerRenderFrame()),(Object.keys(ie).length||Xl(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Je}=z;Je&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Je(this._map))}mergeHandlerResult(d,I,D,z,X){if(!D)return;r.extend(d,D);const ie={handlerName:z,originalEvent:D.originalEvent||X};D.zoomDelta!==void 0&&(I.zoom=ie),D.panDelta!==void 0&&(I.drag=ie),D.pitchDelta!==void 0&&(I.pitch=ie),D.bearingDelta!==void 0&&(I.rotate=ie)}_applyChanges(){const d={},I={},D={};for(const[z,X,ie]of this._changes)z.panDelta&&(d.panDelta=(d.panDelta||new r.pointGeometry(0,0))._add(z.panDelta)),z.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(d.around=z.around),z.pinchAround!==void 0&&(d.pinchAround=z.pinchAround),z.noInertia&&(d.noInertia=z.noInertia),r.extend(I,X),r.extend(D,ie);this._updateMapTransform(d,I,D),this._changes=[]}_updateMapTransform(d,I,D){const z=this._map,X=z.transform,ie=z.style&&z.style.terrain;if(!(Xl(d)||ie&&this._drag))return this._fireEvents(I,D,!0);let{panDelta:de,zoomDelta:_e,bearingDelta:Ae,pitchDelta:ze,around:Je,pinchAround:ot}=d;ot!==void 0&&(Je=ot),z._stop(!0),Je=Je||z.transform.centerPoint;const Lt=X.pointLocation(de?Je.sub(de):Je);Ae&&(X.bearing+=Ae),ze&&(X.pitch+=ze),_e&&(X.zoom+=_e),ie?I.drag&&!this._drag?(this._drag={center:X.centerPoint,lngLat:X.pointLocation(Je),point:Je,handlerName:I.drag.handlerName},z.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&D[this._drag.handlerName]?(z.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):I.drag&&this._drag&&(X.center=X.pointLocation(X.centerPoint.sub(de))):X.setLocationAtPoint(Lt,Je),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(I,D,!0)}_fireEvents(d,I,D){const z=bu(this._eventsInProgress),X=bu(d),ie={};for(const ze in d){const{originalEvent:Je}=d[ze];this._eventsInProgress[ze]||(ie[`${ze}start`]=Je),this._eventsInProgress[ze]=d[ze]}!z&&X&&this._fireEvent("movestart",X.originalEvent);for(const ze in ie)this._fireEvent(ze,ie[ze]);X&&this._fireEvent("move",X.originalEvent);for(const ze in d){const{originalEvent:Je}=d[ze];this._fireEvent(ze,Je)}const de={};let _e;for(const ze in this._eventsInProgress){const{handlerName:Je,originalEvent:ot}=this._eventsInProgress[ze];this._handlersById[Je].isActive()||(delete this._eventsInProgress[ze],_e=I[Je]||ot,de[`${ze}end`]=_e)}for(const ze in de)this._fireEvent(ze,de[ze]);const Ae=bu(this._eventsInProgress);if(D&&(z||X)&&!Ae){this._updatingCamera=!0;const ze=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Je=ot=>ot!==0&&-this._bearingSnap<ot&&ot<this._bearingSnap;ze?(Je(ze.bearing||this._map.getBearing())&&(ze.bearing=0),this._map.easeTo(ze,{originalEvent:_e})):(this._map.fire(new r.Event("moveend",{originalEvent:_e})),Je(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,I){this._map.fire(new r.Event(d,I?{originalEvent:I}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new wu("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const va={extend:(B,...d)=>r.extend(B,...d),run(B){B()},logToElement(B,d=!1,I="log"){const D=window.document.getElementById(I);D&&(d&&(D.innerHTML=""),D.innerHTML+=`<br>${B}`)}};class Ro extends r.Evented{constructor(d,I){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=I.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,I){return this.jumpTo({center:d},I)}panBy(d,I,D){return d=r.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,r.extend({offset:d},I),D)}panTo(d,I,D){return this.easeTo(r.extend({center:d},I),D)}getZoom(){return this.transform.zoom}setZoom(d,I){return this.jumpTo({zoom:d},I),this}zoomTo(d,I,D){return this.easeTo(r.extend({zoom:d},I),D)}zoomIn(d,I){return this.zoomTo(this.getZoom()+1,d,I),this}zoomOut(d,I){return this.zoomTo(this.getZoom()-1,d,I),this}getBearing(){return this.transform.bearing}setBearing(d,I){return this.jumpTo({bearing:d},I),this}getPadding(){return this.transform.padding}setPadding(d,I){return this.jumpTo({padding:d},I),this}rotateTo(d,I,D){return this.easeTo(r.extend({bearing:d},I),D)}resetNorth(d,I){return this.rotateTo(0,r.extend({duration:1e3},d),I),this}resetNorthPitch(d,I){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},d),I),this}snapToNorth(d,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,I):this}getPitch(){return this.transform.pitch}setPitch(d,I){return this.jumpTo({pitch:d},I),this}cameraForBounds(d,I){d=r.LngLatBounds.convert(d);const D=I&&I.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),D,I)}_cameraForBoxAndBearing(d,I,D,z){const X={top:0,bottom:0,right:0,left:0};if(typeof(z=r.extend({padding:X,offset:[0,0],maxZoom:this.transform.maxZoom},z)).padding=="number"){const Ei=z.padding;z.padding={top:Ei,bottom:Ei,right:Ei,left:Ei}}z.padding=r.extend(X,z.padding);const ie=this.transform,de=ie.padding,_e=ie.project(r.LngLat.convert(d)),Ae=ie.project(r.LngLat.convert(I)),ze=_e.rotate(-D*Math.PI/180),Je=Ae.rotate(-D*Math.PI/180),ot=new r.pointGeometry(Math.max(ze.x,Je.x),Math.max(ze.y,Je.y)),Lt=new r.pointGeometry(Math.min(ze.x,Je.x),Math.min(ze.y,Je.y)),kt=ot.sub(Lt),It=(ie.width-(de.left+de.right+z.padding.left+z.padding.right))/kt.x,si=(ie.height-(de.top+de.bottom+z.padding.top+z.padding.bottom))/kt.y;if(si<0||It<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const fi=Math.min(ie.scaleZoom(ie.scale*Math.min(It,si)),z.maxZoom),xi=r.pointGeometry.convert(z.offset),Vt=new r.pointGeometry((z.padding.left-z.padding.right)/2,(z.padding.top-z.padding.bottom)/2).rotate(D*Math.PI/180),Pi=xi.add(Vt).mult(ie.scale/ie.zoomScale(fi));return{center:ie.unproject(_e.add(Ae).div(2).sub(Pi)),zoom:fi,bearing:D}}fitBounds(d,I,D){return this._fitInternal(this.cameraForBounds(d,I),I,D)}fitScreenCoordinates(d,I,D,z,X){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(d)),this.transform.pointLocation(r.pointGeometry.convert(I)),D,z),z,X)}_fitInternal(d,I,D){return d?(delete(I=r.extend(d,I)).padding,I.linear?this.easeTo(I,D):this.flyTo(I,D)):this}jumpTo(d,I){this.stop();const D=this.transform;let z=!1,X=!1,ie=!1;return"zoom"in d&&D.zoom!==+d.zoom&&(z=!0,D.zoom=+d.zoom),d.center!==void 0&&(D.center=r.LngLat.convert(d.center)),"bearing"in d&&D.bearing!==+d.bearing&&(X=!0,D.bearing=+d.bearing),"pitch"in d&&D.pitch!==+d.pitch&&(ie=!0,D.pitch=+d.pitch),d.padding==null||D.isPaddingEqual(d.padding)||(D.padding=d.padding),this.fire(new r.Event("movestart",I)).fire(new r.Event("move",I)),z&&this.fire(new r.Event("zoomstart",I)).fire(new r.Event("zoom",I)).fire(new r.Event("zoomend",I)),X&&this.fire(new r.Event("rotatestart",I)).fire(new r.Event("rotate",I)).fire(new r.Event("rotateend",I)),ie&&this.fire(new r.Event("pitchstart",I)).fire(new r.Event("pitch",I)).fire(new r.Event("pitchend",I)),this.fire(new r.Event("moveend",I))}calculateCameraOptionsFromTo(d,I,D,z=0){const X=r.MercatorCoordinate.fromLngLat(d,I),ie=r.MercatorCoordinate.fromLngLat(D,z),de=ie.x-X.x,_e=ie.y-X.y,Ae=ie.z-X.z,ze=Math.hypot(de,_e,Ae);if(ze===0)throw new Error("Can't calculate camera options with same From and To");const Je=Math.hypot(de,_e),ot=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ze/this.transform.tileSize),Lt=180*Math.atan2(de,-_e)/Math.PI;let kt=180*Math.acos(Je/ze)/Math.PI;return kt=Ae<0?90-kt:90+kt,{center:ie.toLngLat(),zoom:ot,pitch:kt,bearing:Lt}}easeTo(d,I){this._stop(!1,d.easeId),((d=r.extend({offset:[0,0],duration:500,easing:r.ease},d)).animate===!1||!d.essential&&r.exported.prefersReducedMotion)&&(d.duration=0);const D=this.transform,z=this.getZoom(),X=this.getBearing(),ie=this.getPitch(),de=this.getPadding(),_e="zoom"in d?+d.zoom:z,Ae="bearing"in d?this._normalizeBearing(d.bearing,X):X,ze="pitch"in d?+d.pitch:ie,Je="padding"in d?d.padding:D.padding,ot=r.pointGeometry.convert(d.offset);let Lt=D.centerPoint.add(ot);const kt=D.pointLocation(Lt),It=r.LngLat.convert(d.center||kt);this._normalizeCenter(It);const si=D.project(kt),fi=D.project(It).sub(si),xi=D.zoomScale(_e-z);let Vt,Pi;d.around&&(Vt=r.LngLat.convert(d.around),Pi=D.locationPoint(Vt));const Ei={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||_e!==z,this._rotating=this._rotating||X!==Ae,this._pitching=this._pitching||ze!==ie,this._padding=!D.isPaddingEqual(Je),this._easeId=d.easeId,this._prepareEase(I,d.noMoveStart,Ei),this._ease(Vi=>{if(this._zooming&&(D.zoom=r.number(z,_e,Vi)),this._rotating&&(D.bearing=r.number(X,Ae,Vi)),this._pitching&&(D.pitch=r.number(ie,ze,Vi)),this._padding&&(D.interpolatePadding(de,Je,Vi),Lt=D.centerPoint.add(ot)),Vt)D.setLocationAtPoint(Vt,Pi);else{const Ni=D.zoomScale(D.zoom-z),sn=_e>z?Math.min(2,xi):Math.max(.5,xi),zi=Math.pow(sn,1-Vi),Rn=D.unproject(si.add(fi.mult(Vi*zi)).mult(Ni));D.setLocationAtPoint(D.renderWorldCopies?Rn.wrap():Rn,Lt)}this._fireMoveEvents(I)},Vi=>{this._afterEase(I,Vi)},d),this}_prepareEase(d,I,D={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),I||D.moving||this.fire(new r.Event("movestart",d)),this._zooming&&!D.zooming&&this.fire(new r.Event("zoomstart",d)),this._rotating&&!D.rotating&&this.fire(new r.Event("rotatestart",d)),this._pitching&&!D.pitching&&this.fire(new r.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new r.Event("move",d)),this._zooming&&this.fire(new r.Event("zoom",d)),this._rotating&&this.fire(new r.Event("rotate",d)),this._pitching&&this.fire(new r.Event("pitch",d))}_afterEase(d,I){if(this._easeId&&I&&this._easeId===I)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const D=this._zooming,z=this._rotating,X=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new r.Event("zoomend",d)),z&&this.fire(new r.Event("rotateend",d)),X&&this.fire(new r.Event("pitchend",d)),this.fire(new r.Event("moveend",d))}flyTo(d,I){if(!d.essential&&r.exported.prefersReducedMotion){const j=r.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(j,I)}this.stop(),d=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},d);const D=this.transform,z=this.getZoom(),X=this.getBearing(),ie=this.getPitch(),de=this.getPadding(),_e="zoom"in d?r.clamp(+d.zoom,D.minZoom,D.maxZoom):z,Ae="bearing"in d?this._normalizeBearing(d.bearing,X):X,ze="pitch"in d?+d.pitch:ie,Je="padding"in d?d.padding:D.padding,ot=D.zoomScale(_e-z),Lt=r.pointGeometry.convert(d.offset);let kt=D.centerPoint.add(Lt);const It=D.pointLocation(kt),si=r.LngLat.convert(d.center||It);this._normalizeCenter(si);const fi=D.project(It),xi=D.project(si).sub(fi);let Vt=d.curve;const Pi=Math.max(D.width,D.height),Ei=Pi/ot,Vi=xi.mag();if("minZoom"in d){const j=r.clamp(Math.min(d.minZoom,z,_e),D.minZoom,D.maxZoom),K=Pi/D.zoomScale(j-z);Vt=Math.sqrt(K/Vi*2)}const Ni=Vt*Vt;function sn(j){const K=(Ei*Ei-Pi*Pi+(j?-1:1)*Ni*Ni*Vi*Vi)/(2*(j?Ei:Pi)*Ni*Vi);return Math.log(Math.sqrt(K*K+1)-K)}function zi(j){return(Math.exp(j)-Math.exp(-j))/2}function Rn(j){return(Math.exp(j)+Math.exp(-j))/2}const vn=sn(0);let qn=function(j){return Rn(vn)/Rn(vn+Vt*j)},Er=function(j){return Pi*((Rn(vn)*(zi(K=vn+Vt*j)/Rn(K))-zi(vn))/Ni)/Vi;var K},Dr=(sn(1)-vn)/Vt;if(Math.abs(Vi)<1e-6||!isFinite(Dr)){if(Math.abs(Pi-Ei)<1e-6)return this.easeTo(d,I);const j=Ei<Pi?-1:1;Dr=Math.abs(Math.log(Ei/Pi))/Vt,Er=function(){return 0},qn=function(K){return Math.exp(j*Vt*K)}}return d.duration="duration"in d?+d.duration:1e3*Dr/("screenSpeed"in d?+d.screenSpeed/Vt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=X!==Ae,this._pitching=ze!==ie,this._padding=!D.isPaddingEqual(Je),this._prepareEase(I,!1),this._ease(j=>{const K=j*Dr,ue=1/qn(K);D.zoom=j===1?_e:z+D.scaleZoom(ue),this._rotating&&(D.bearing=r.number(X,Ae,j)),this._pitching&&(D.pitch=r.number(ie,ze,j)),this._padding&&(D.interpolatePadding(de,Je,j),kt=D.centerPoint.add(Lt));const ve=j===1?si:D.unproject(fi.add(xi.mult(Er(K))).mult(ue));D.setLocationAtPoint(D.renderWorldCopies?ve.wrap():ve,kt),this._fireMoveEvents(I)},()=>this._afterEase(I),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,I)}if(!d){const D=this.handlers;D&&D.stop(!1)}return this}_ease(d,I,D){D.animate===!1||D.duration===0?(d(1),I()):(this._easeStart=r.exported.now(),this._easeOptions=D,this._onEaseFrame=d,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,I){d=r.wrap(d,-180,180);const D=Math.abs(d-I);return Math.abs(d-360-I)<D&&(d-=360),Math.abs(d+360-I)<D&&(d+=360),d}_normalizeCenter(d){const I=this.transform;if(!I.renderWorldCopies||I.lngRange)return;const D=d.lng-I.center.lng;d.lng+=D>180?-360:D<-180?360:0}}class xu{constructor(d={}){this.options=d,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,I){const D=this._map._getUIString(`AttributionControl.${I}`);d.title=D,d.setAttribute("aria-label",D)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(z=>typeof z!="string"?"":z)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const I=this._map.style.sourceCaches;for(const z in I){const X=I[z];if(X.used||X.usedForTerrain){const ie=X.getSource();ie.attribution&&d.indexOf(ie.attribution)<0&&d.push(ie.attribution)}}d=d.filter(z=>String(z).trim()),d.sort((z,X)=>z.length-X.length),d=d.filter((z,X)=>{for(let ie=X+1;ie<d.length;ie++)if(d[ie].indexOf(z)>=0)return!1;return!0});const D=d.join(" | ");D!==this._attribHTML&&(this._attribHTML=D,d.length?(this._innerContainer.innerHTML=D,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Au{constructor(d={}){this.options=d,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl mapboxgl-ctrl");const I=x.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://maplibre.org/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const d=this._container.children;if(d.length){const I=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&I.classList.add("maplibregl-compact","mapboxgl-compact"):I.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Rc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const I=++this._id;return this._queue.push({callback:d,id:I,cancelled:!1}),I}remove(d){const I=this._currentlyRunning,D=I?this._queue.concat(I):this._queue;for(const z of D)if(z.id===d)return void(z.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const I=this._currentlyRunning=this._queue;this._queue=[];for(const D of I)if(!D.cancelled&&(D.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Oh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},ll={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Fh={showCompass:!0,showZoom:!0,visualizePitch:!1};class ul{constructor(d,I,D=!1){this._clickTolerance=10,this.element=I,this.mouseRotate=new ds({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,D&&(this.mousePitch=new Pn({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(I,"mousedown",this.mousedown),x.addEventListener(I,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(I,"touchmove",this.touchmove),x.addEventListener(I,"touchend",this.touchend),x.addEventListener(I,"touchcancel",this.reset)}down(d,I){this.mouseRotate.mousedown(d,I),this.mousePitch&&this.mousePitch.mousedown(d,I),x.disableDrag()}move(d,I){const D=this.map,z=this.mouseRotate.mousemoveWindow(d,I);if(z&&z.bearingDelta&&D.setBearing(D.getBearing()+z.bearingDelta),this.mousePitch){const X=this.mousePitch.mousemoveWindow(d,I);X&&X.pitchDelta&&D.setPitch(D.getPitch()+X.pitchDelta)}}off(){const d=this.element;x.removeEventListener(d,"mousedown",this.mousedown),x.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(d,"touchmove",this.touchmove),x.removeEventListener(d,"touchend",this.touchend),x.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup)}mousedown(d){this.down(r.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),x.mousePos(this.element,d)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)}mousemove(d){this.move(d,x.mousePos(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function sc(B,d,I){if(B=new r.LngLat(B.lng,B.lat),d){const D=new r.LngLat(B.lng-360,B.lat),z=new r.LngLat(B.lng+360,B.lat),X=I.locationPoint(B).distSqr(d);I.locationPoint(D).distSqr(d)<X?B=D:I.locationPoint(z).distSqr(d)<X&&(B=z)}for(;Math.abs(B.lng-I.center.lng)>180;){const D=I.locationPoint(B);if(D.x>=0&&D.y>=0&&D.x<=I.width&&D.y<=I.height)break;B.lng>I.center.lng?B.lng-=360:B.lng+=360}return B}const $n={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ur(B,d,I){const D=B.classList;for(const z in $n)D.remove(`maplibregl-${I}-anchor-${z}`,`mapboxgl-${I}-anchor-${z}`);D.add(`maplibregl-${I}-anchor-${d}`,`mapboxgl-${I}-anchor-${d}`)}class Vu extends r.Evented{constructor(d,I){if(super(),(d instanceof HTMLElement||I)&&(d=r.extend({element:d},I)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=r.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");const D=x.createNS("http://www.w3.org/2000/svg","svg"),z=41,X=27;D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height",`${z}px`),D.setAttributeNS(null,"width",`${X}px`),D.setAttributeNS(null,"viewBox",`0 0 ${X} ${z}`);const ie=x.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"stroke","none"),ie.setAttributeNS(null,"stroke-width","1"),ie.setAttributeNS(null,"fill","none"),ie.setAttributeNS(null,"fill-rule","evenodd");const de=x.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"fill-rule","nonzero");const _e=x.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(3.0, 29.0)"),_e.setAttributeNS(null,"fill","#000000");const Ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xi of Ae){const Vt=x.createNS("http://www.w3.org/2000/svg","ellipse");Vt.setAttributeNS(null,"opacity","0.04"),Vt.setAttributeNS(null,"cx","10.5"),Vt.setAttributeNS(null,"cy","5.80029008"),Vt.setAttributeNS(null,"rx",xi.rx),Vt.setAttributeNS(null,"ry",xi.ry),_e.appendChild(Vt)}const ze=x.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"fill",this._color);const Je=x.createNS("http://www.w3.org/2000/svg","path");Je.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ze.appendChild(Je);const ot=x.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"opacity","0.25"),ot.setAttributeNS(null,"fill","#000000");const Lt=x.createNS("http://www.w3.org/2000/svg","path");Lt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ot.appendChild(Lt);const kt=x.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),kt.setAttributeNS(null,"fill","#FFFFFF");const It=x.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"transform","translate(8.0, 8.0)");const si=x.createNS("http://www.w3.org/2000/svg","circle");si.setAttributeNS(null,"fill","#000000"),si.setAttributeNS(null,"opacity","0.25"),si.setAttributeNS(null,"cx","5.5"),si.setAttributeNS(null,"cy","5.5"),si.setAttributeNS(null,"r","5.4999962");const fi=x.createNS("http://www.w3.org/2000/svg","circle");fi.setAttributeNS(null,"fill","#FFFFFF"),fi.setAttributeNS(null,"cx","5.5"),fi.setAttributeNS(null,"cy","5.5"),fi.setAttributeNS(null,"r","5.4999962"),It.appendChild(si),It.appendChild(fi),de.appendChild(_e),de.appendChild(ze),de.appendChild(ot),de.appendChild(kt),de.appendChild(It),D.appendChild(de),D.setAttributeNS(null,"height",z*this._scale+"px"),D.setAttributeNS(null,"width",X*this._scale+"px"),this._element.appendChild(D),this._offset=r.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()}),ur(this._element,this._anchor,"marker"),this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=r.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const z=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(38.1-13.5+z)],"bottom-right":[-z,-1*(38.1-13.5+z)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(d){const I=d.code,D=d.charCode||d.keyCode;I!=="Space"&&I!=="Enter"&&D!==32&&D!==13||this.togglePopup()}_onMapClick(d){const I=d.originalEvent.target,D=this._element;this._popup&&(I===D||D.contains(I))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}_update(d){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=sc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(I=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${$n[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${I}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const z=this._map.unproject(this._pos),X=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=z.distanceTo(this._lngLat)>20*X?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(d){return this._offset=r.pointGeometry.convert(d),this._update(),this}_onMove(d){if(!this._isDragging){const I=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ac={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vs,Uo=0,Yl=!1;const cl={maxWidth:100,unit:"metric"};function ch(B,d,I){const D=I&&I.maxWidth||100,z=B._container.clientHeight/2,X=B.unproject([0,z]),ie=B.unproject([D,z]),de=X.distanceTo(ie);if(I&&I.unit==="imperial"){const _e=3.2808*de;_e>5280?Zl(d,D,_e/5280,B._getUIString("ScaleControl.Miles")):Zl(d,D,_e,B._getUIString("ScaleControl.Feet"))}else I&&I.unit==="nautical"?Zl(d,D,de/1852,B._getUIString("ScaleControl.NauticalMiles")):de>=1e3?Zl(d,D,de/1e3,B._getUIString("ScaleControl.Kilometers")):Zl(d,D,de,B._getUIString("ScaleControl.Meters"))}function Zl(B,d,I,D){const z=function(X){const ie=Math.pow(10,`${Math.floor(X)}`.length-1);let de=X/ie;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:function(_e){const Ae=Math.pow(10,Math.ceil(-Math.log(_e)/Math.LN10));return Math.round(_e*Ae)/Ae}(de),ie*de}(I);B.style.width=d*(z/I)+"px",B.innerHTML=`${z}&nbsp;${D}`}const is={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ps=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function hh(B){if(B){if(typeof B=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,B),"top-left":new r.pointGeometry(d,d),"top-right":new r.pointGeometry(-d,d),bottom:new r.pointGeometry(0,-B),"bottom-left":new r.pointGeometry(d,-d),"bottom-right":new r.pointGeometry(-d,-d),left:new r.pointGeometry(B,0),right:new r.pointGeometry(-B,0)}}if(B instanceof r.pointGeometry||Array.isArray(B)){const d=r.pointGeometry.convert(B);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:r.pointGeometry.convert(B.center||[0,0]),top:r.pointGeometry.convert(B.top||[0,0]),"top-left":r.pointGeometry.convert(B["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(B["top-right"]||[0,0]),bottom:r.pointGeometry.convert(B.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(B["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(B["bottom-right"]||[0,0]),left:r.pointGeometry.convert(B.left||[0,0]),right:r.pointGeometry.convert(B.right||[0,0])}}return hh(new r.pointGeometry(0,0))}const la={supported:f,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends Ro{constructor(B){var d;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(B=r.extend({},ll,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Wl(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies),{bearingSnap:B.bearingSnap}),this._interactive=B.interactive,this._cooperativeGestures=B.cooperativeGestures,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new Rc,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Oh,B.locale),this._clickTolerance=B.clickTolerance,this._pixelRatio=(d=B.pixelRatio)!==null&&d!==void 0?d:devicePixelRatio,this._requestManager=new v(B.transformRequest),typeof B.container=="string"){if(this._container=document.getElementById(B.container),!this._container)throw new Error(`Container '${B.container}' not found.`)}else{if(!(B.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new no(this,B),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=B.hash&&new Pa(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,r.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new xu({customAttribution:B.customAttribution})),B.maplibreLogo&&this.addControl(new Au,B.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new r.Event(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new r.Event(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new r.Event("sourcedataabort",I))})}_getMapId(){return this._mapId}addControl(B,d){if(d===void 0&&(d=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const I=B.onAdd(this);this._controls.push(B);const D=this._controlPositions[d];return d.indexOf("bottom")!==-1?D.insertBefore(I,D.firstChild):D.appendChild(I),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(B);return d>-1&&this._controls.splice(d,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}calculateCameraOptionsFromTo(B,d,I,D){return D==null&&this.style.terrain&&(D=this.transform.getElevation(I,this.style.terrain)),super.calculateCameraOptionsFromTo(B,d,I,D)}resize(B){const d=this._containerDimensions(),I=d[0],D=d[1];this._resizeCanvas(I,D,this.getPixelRatio()),this.transform.resize(I,D),this.painter.resize(I,D,this.getPixelRatio());const z=!this._moving;return z&&(this.stop(),this.fire(new r.Event("movestart",B)).fire(new r.Event("move",B))),this.fire(new r.Event("resize",B)),z&&this.fire(new r.Event("moveend",B)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(B){const[d,I]=this._containerDimensions();this._pixelRatio=B,this._resizeCanvas(d,I,B),this.painter.resize(d,I,B)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(r.LngLatBounds.convert(B)),this._update()}setMinZoom(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B==null?60:B)>85)throw new Error("maxPitch must be less than or equal to 85");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.renderWorldCopies=B,this._update()}project(B){return this.transform.locationPoint(r.LngLat.convert(B),this.style&&this.style.terrain)}unproject(B){return this.transform.pointLocation(r.pointGeometry.convert(B),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(B,d,I){if(B==="mouseenter"||B==="mouseover"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:X=>{const ie=this.getLayer(d)?this.queryRenderedFeatures(X.point,{layers:[d]}):[];ie.length?D||(D=!0,I.call(this,new ss(B,this,X.originalEvent,{features:ie}))):D=!1},mouseout:()=>{D=!1}}}}if(B==="mouseleave"||B==="mouseout"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:ie=>{(this.getLayer(d)?this.queryRenderedFeatures(ie.point,{layers:[d]}):[]).length?D=!0:D&&(D=!1,I.call(this,new ss(B,this,ie.originalEvent)))},mouseout:ie=>{D&&(D=!1,I.call(this,new ss(B,this,ie.originalEvent)))}}}}{const D=z=>{const X=this.getLayer(d)?this.queryRenderedFeatures(z.point,{layers:[d]}):[];X.length&&(z.features=X,I.call(this,z),delete z.features)};return{layer:d,listener:I,delegates:{[B]:D}}}}on(B,d,I){if(I===void 0)return super.on(B,d);const D=this._createDelegatedListener(B,d,I);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(D);for(const z in D.delegates)this.on(z,D.delegates[z]);return this}once(B,d,I){if(I===void 0)return super.once(B,d);const D=this._createDelegatedListener(B,d,I);for(const z in D.delegates)this.once(z,D.delegates[z]);return this}off(B,d,I){return I===void 0?super.off(B,d):(this._delegatedListeners&&this._delegatedListeners[B]&&(D=>{const z=this._delegatedListeners[B];for(let X=0;X<z.length;X++){const ie=z[X];if(ie.layer===d&&ie.listener===I){for(const de in ie.delegates)this.off(de,ie.delegates[de]);return z.splice(X,1),this}}})(),this)}queryRenderedFeatures(B,d){if(!this.style)return[];let I;if(d!==void 0||B===void 0||B instanceof r.pointGeometry||Array.isArray(B)||(d=B,B=void 0),d=d||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof B[0]=="number")I=[r.pointGeometry.convert(B)];else{const D=r.pointGeometry.convert(B[0]),z=r.pointGeometry.convert(B[1]);I=[D,new r.pointGeometry(z.x,D.y),z,new r.pointGeometry(D.x,z.y),D]}return this.style.queryRenderedFeatures(I,d,this.transform)}querySourceFeatures(B,d){return this.style.querySourceFeatures(B,d)}setStyle(B,d){return(d=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(B,d))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const d=this._locale[B];if(d==null)throw new Error(`Missing UI string '${B}'`);return d}_updateStyle(B,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new Qo(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,d){if(typeof B=="string"){const I=this._requestManager.transformRequest(B,r.ResourceType.Style);r.getJSON(I,(D,z)=>{D?this.fire(new r.ErrorEvent(D)):z&&this._updateDiff(z,d)})}else typeof B=="object"&&this._updateDiff(B,d)}_updateDiff(B,d){try{this.style.setState(B)&&this._update(!0)}catch(I){r.warnOnce(`Unable to perform style diff: ${I.message||I.error||I}.  Rebuilding the style from scratch.`),this._updateStyle(B,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(B,d){return this._lazyInitEmptyStyle(),this.style.addSource(B,d),this._update(!0)}isSourceLoaded(B){const d=this.style&&this.style.sourceCaches[B];if(d!==void 0)return d.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${B}'`)))}setTerrain(B){return this.style.setTerrain(B),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const B=this.style&&this.style.sourceCaches;for(const d in B){const I=B[d]._tiles;for(const D in I){const z=I[D];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0}addSourceType(B,d,I){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,d,I)}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}addImage(B,d,{pixelRatio:I=1,sdf:D=!1,stretchX:z,stretchY:X,content:ie}={}){if(this._lazyInitEmptyStyle(),d instanceof HTMLImageElement||r.isImageBitmap(d)){const{width:de,height:_e,data:Ae}=r.exported.getImageData(d);this.style.addImage(B,{data:new r.RGBAImage({width:de,height:_e},Ae),pixelRatio:I,stretchX:z,stretchY:X,content:ie,sdf:D,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:de,height:_e,data:Ae}=d,ze=d;this.style.addImage(B,{data:new r.RGBAImage({width:de,height:_e},new Uint8Array(Ae)),pixelRatio:I,stretchX:z,stretchY:X,content:ie,sdf:D,version:0,userImage:ze}),ze.onAdd&&ze.onAdd(this,B)}}}updateImage(B,d){const I=this.style.getImage(B);if(!I)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const D=d instanceof HTMLImageElement||r.isImageBitmap(d)?r.exported.getImageData(d):d,{width:z,height:X,data:ie}=D;if(z===void 0||X===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(z!==I.data.width||X!==I.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const de=!(d instanceof HTMLImageElement||r.isImageBitmap(d));I.data.replace(ie,de),this.style.updateImage(B,I)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B,d){r.getImage(this._requestManager.transformRequest(B,r.ResourceType.Image),d)}listImages(){return this.style.listImages()}addLayer(B,d){return this._lazyInitEmptyStyle(),this.style.addLayer(B,d),this._update(!0)}moveLayer(B,d){return this.style.moveLayer(B,d),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}setLayerZoomRange(B,d,I){return this.style.setLayerZoomRange(B,d,I),this._update(!0)}setFilter(B,d,I={}){return this.style.setFilter(B,d,I),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,d,I,D={}){return this.style.setPaintProperty(B,d,I,D),this._update(!0)}getPaintProperty(B,d){return this.style.getPaintProperty(B,d)}setLayoutProperty(B,d,I,D={}){return this.style.setLayoutProperty(B,d,I,D),this._update(!0)}getLayoutProperty(B,d){return this.style.getLayoutProperty(B,d)}setLight(B,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(B,d){return this.style.setFeatureState(B,d),this._update()}removeFeatureState(B,d){return this.style.removeFeatureState(B,d),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,d=0;return this._container&&(B=this._container.clientWidth||400,d=this._container.clientHeight||300),[B,d]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map","mapboxgl-map");const d=this._canvasContainer=x.create("div","maplibregl-canvas-container mapboxgl-canvas-container",B);this._interactive&&d.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const I=this._containerDimensions();this._resizeCanvas(I[0],I[1],this.getPixelRatio());const D=this._controlContainer=x.create("div","maplibregl-control-container mapboxgl-control-container",B),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(X=>{z[X]=x.create("div",`maplibregl-ctrl-${X} mapboxgl-ctrl-${X}`,D)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const B=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=x.create("div","maplibregl-cooperative-gesture-screen",B);let d="Control",I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",d="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${I}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",D=>{D.key===d&&(this._metaPress=!0)}),document.addEventListener("keyup",D=>{D.key===d&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",D=>{this._onCooperativeGesture(D,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(B,d,I){this._canvas.width=I*B,this._canvas.height=I*d,this._canvas.style.width=`${B}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const B=r.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);d?(this.painter=new yu(d,this.transform),r.exported$1.testSupport(d)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:B}))}_contextRestored(B){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:B}))}_onMapScroll(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(B,d,I){return!d&&I<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){let d,I=0;const D=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=D.createQueryEXT(),D.beginQueryEXT(D.TIME_ELAPSED_EXT,d),I=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ie=this.transform.zoom,de=r.exported.now();this.style.zoomHistory.update(ie,de);const _e=new r.EvaluationParameters(ie,{now:de,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ae=_e.crossFadingFactor();Ae===1&&Ae===this._crossFadingFactor||(z=!0,this._crossFadingFactor=Ae),this.style.update(_e)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ie=r.exported.now()-I;D.endQueryEXT(D.TIME_ELAPSED_EXT,d),setTimeout(()=>{const de=D.getQueryObjectEXT(d,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(d),this.fire(new r.Event("gpu-timing-frame",{cpuTime:ie,gpuTime:de}))},50)}if(this.listens("gpu-timing-layer")){const ie=this.painter.collectGpuTimers();setTimeout(()=>{const de=this.painter.queryGpuTimers(ie);this.fire(new r.Event("gpu-timing-layer",{layerTimes:de}))},50)}const X=this._sourcesDirty||this._styleDirty||this._placementDirty;return X||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const B=this.painter.context.gl.getExtension("WEBGL_lose_context");B&&B.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._cooperativeGestures&&x.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(B=>{r.PerformanceUtils.frame(B),this._frame=null,this._render(B)}))}_onWindowOnline(){this._update()}_onWindowResize(B){this._trackResize&&this.resize({originalEvent:B})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}_setCacheLimits(B,d){r.setCacheLimits(B,d)}get version(){return"2.4.0"}},NavigationControl:class{constructor(B){this.options=r.extend({},Fh,B),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const B=this._map.getZoom(),d=B===this._map.getMaxZoom(),I=B===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())}_rotateCompassArrow(){const B=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=B}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ul(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,d){const I=x.create("button",B,this._container);return I.type="button",I.addEventListener("click",d),I}_setButtonTitle(B,d){const I=this._map._getUIString(`NavigationControl.${d}`);B.title=I,B.setAttribute("aria-label",I)}},GeolocateControl:class extends r.Evented{constructor(B){super(),this.options=r.extend({},ac,B),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(B){var d;return this._map=B,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,vs!==void 0?d(vs):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(I=>{vs=I.state!=="denied",d(vs)}):(vs=!!window.navigator.geolocation,d(vs)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Uo=0,Yl=!1}_isOutOfMapMaxBounds(B){const d=this._map.getMaxBounds(),I=B.coords;return d&&(I.longitude<d.getWest()||I.longitude>d.getEast()||I.latitude<d.getSouth()||I.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(B),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",B)),this._finish()}}_updateCamera(B){const d=new r.LngLat(B.coords.longitude,B.coords.latitude),I=B.coords.accuracy,D=this._map.getBearing(),z=r.extend({bearing:D},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(I),z,{geolocateSource:!0})}_updateMarker(B){if(B){const d=new r.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const B=this._map._container.clientHeight/2,d=this._map.unproject([0,B]),I=this._map.unproject([1,B]),D=d.distanceTo(I),z=Math.ceil(2*this._accuracy/D);this._circleElement.style.width=`${z}px`,this._circleElement.style.height=`${z}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(B){if(this._map){if(this.options.trackUserLocation)if(B.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(B.code===3&&Yl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",B)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(B){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",B===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Vu(this._dotElement),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Uo--,Yl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Uo++,Uo>1?(B={maximumAge:6e5,timeout:0},Yl=!0):(B=this.options.positionOptions,Yl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xu,LogoControl:Au,ScaleControl:class{constructor(B){this.options=r.extend({},cl,B),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ch(this._map,this._container,this.options)}onAdd(B){return this._map=B,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(B){this.options.unit=B,ch(this._map,this._container,this.options)}},FullscreenControl:class{constructor(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const B=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(B){this.options=B,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(B){return this._map=B,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(B){super(),this.options=r.extend(Object.create(is),B),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=r.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const d=document.createDocumentFragment(),I=document.createElement("body");let D;for(I.innerHTML=B;D=I.firstChild,D;)d.appendChild(D);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){this._container&&this._container.classList.add(B)}removeClassName(B){this._container&&this._container.classList.remove(B)}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(B){this._update(B.point)}_onMouseMove(B){this._update(B.point)}_onDrag(B){this._update(B.point)}_update(B){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=x.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(X=>this._container.classList.add(X)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!B))return;const d=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat);let I=this.options.anchor;const D=hh(this.options.offset);if(!I){const X=this._container.offsetWidth,ie=this._container.offsetHeight;let de;de=d.y+D.bottom.y<ie?["top"]:d.y>this._map.transform.height-ie?["bottom"]:[],d.x<X/2?de.push("left"):d.x>this._map.transform.width-X/2&&de.push("right"),I=de.length===0?"bottom":de.join("-")}const z=d.add(D[I]).round();x.setTransform(this._container,`${$n[I]} translate(${z.x}px,${z.y}px)`),ur(this._container,I,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(ps);B&&B.focus()}_onClose(){this.remove()}},Marker:Vu,Style:Qo,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:Oe,GeoJSONSource:Et,ImageSource:we,RasterDEMTileSource:nt,RasterTileSource:me,VectorTileSource:Se,VideoSource:ke,prewarm:function(){Ke().acquire(ri)},clearPrewarmedResources:function(){const B=vt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(ri),vt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ut.workerCount},set workerCount(B){ut.workerCount=B},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){r.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage(B){r.clearTileCache(B)},workerUrl:"",addProtocol(B,d){r.config.REGISTERED_PROTOCOLS[B]=d},removeProtocol(B){delete r.config.REGISTERED_PROTOCOLS[B]}};return va.extend(la,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),la});var m=l;return m})})(Tu);const B8=Tu.exports;var j2={};const z8={},N8=Object.freeze(Object.defineProperty({__proto__:null,default:z8},Symbol.toStringTag,{value:"Module"})),Om=R8(N8);(function(i){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.4"};if(i.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=Om,o=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=o.document,e.jsdomImplForWrapper=Om.implForWrapper,e.nodeCanvas=Om.Canvas,e.window=o,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function r(v,C){if(!!this.__eventListeners[v]){var T=this.__eventListeners[v];C?T[T.indexOf(C)]=!1:e.util.array.fill(T,!1)}}function f(v,C){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var T in v)this.on(T,v[T]);else this.__eventListeners[v]||(this.__eventListeners[v]=[]),this.__eventListeners[v].push(C);return this}function _(v,C){var T=function(){C.apply(this,arguments),this.off(v,T)}.bind(this);this.on(v,T)}function w(v,C){if(arguments.length===1)for(var T in v)_.call(this,T,v[T]);else _.call(this,v,C);return this}function b(v,C){if(!this.__eventListeners)return this;if(arguments.length===0)for(v in this.__eventListeners)r.call(this,v);else if(arguments.length===1&&typeof arguments[0]=="object")for(var T in v)r.call(this,T,v[T]);else r.call(this,v,C);return this}function x(v,C){if(!this.__eventListeners)return this;var T=this.__eventListeners[v];if(!T)return this;for(var S=0,M=T.length;S<M;S++)T[S]&&T[S].call(this,C||{});return this.__eventListeners[v]=T.filter(function(O){return O!==!1}),this}e.Observable={fire:x,on:f,once:w,off:b}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var r=0,f=arguments.length;r<f;r++)this._onObjectAdded(arguments[r]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(r,f,_){var w=this._objects;return _?w[f]=r:w.splice(f,0,r),this._onObjectAdded&&this._onObjectAdded(r),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var r=this._objects,f,_=!1,w=0,b=arguments.length;w<b;w++)f=r.indexOf(arguments[w]),f!==-1&&(_=!0,r.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[w]));return this.renderOnAddRemove&&_&&this.requestRenderAll(),this},forEachObject:function(r,f){for(var _=this.getObjects(),w=0,b=_.length;w<b;w++)r.call(f,_[w],w,_);return this},getObjects:function(r){return typeof r>"u"?this._objects.concat():this._objects.filter(function(f){return f.type===r})},item:function(r){return this._objects[r]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(r,f){return this._objects.indexOf(r)>-1?!0:f?this._objects.some(function(_){return typeof _.contains=="function"&&_.contains(r,!0)}):!1},complexity:function(){return this._objects.reduce(function(r,f){return r+=f.complexity?f.complexity():0,r},0)}},e.CommonMethods={_setOptions:function(r){for(var f in r)this.set(f,r[f])},_initGradient:function(r,f){r&&r.colorStops&&!(r instanceof e.Gradient)&&this.set(f,new e.Gradient(r))},_initPattern:function(r,f,_){r&&r.source&&!(r instanceof e.Pattern)?this.set(f,new e.Pattern(r,_)):_&&_()},_setObject:function(r){for(var f in r)this._set(f,r[f])},set:function(r,f){return typeof r=="object"?this._setObject(r):this._set(r,f),this},_set:function(r,f){this[r]=f},toggle:function(r){var f=this.get(r);return typeof f=="boolean"&&this.set(r,!f),this},get:function(r){return this[r]}},function(r){var f=Math.sqrt,_=Math.atan2,w=Math.pow,b=Math.PI/180,x=Math.PI/2;e.util={cos:function(v){if(v===0)return 1;v<0&&(v=-v);var C=v/x;switch(C){case 1:case 3:return 0;case 2:return-1}return Math.cos(v)},sin:function(v){if(v===0)return 0;var C=v/x,T=1;switch(v<0&&(T=-1),C){case 1:return T;case 2:return 0;case 3:return-T}return Math.sin(v)},removeFromArray:function(v,C){var T=v.indexOf(C);return T!==-1&&v.splice(T,1),v},getRandomInt:function(v,C){return Math.floor(Math.random()*(C-v+1))+v},degreesToRadians:function(v){return v*b},radiansToDegrees:function(v){return v/b},rotatePoint:function(v,C,T){var S=new e.Point(v.x-C.x,v.y-C.y),M=e.util.rotateVector(S,T);return new e.Point(M.x,M.y).addEquals(C)},rotateVector:function(v,C){var T=e.util.sin(C),S=e.util.cos(C),M=v.x*S-v.y*T,O=v.x*T+v.y*S;return{x:M,y:O}},createVector:function(v,C){return new e.Point(C.x-v.x,C.y-v.y)},calcAngleBetweenVectors:function(v,C){return Math.acos((v.x*C.x+v.y*C.y)/(Math.hypot(v.x,v.y)*Math.hypot(C.x,C.y)))},getHatVector:function(v){return new e.Point(v.x,v.y).multiply(1/Math.hypot(v.x,v.y))},getBisector:function(v,C,T){var S=e.util.createVector(v,C),M=e.util.createVector(v,T),O=e.util.calcAngleBetweenVectors(S,M),V=e.util.calcAngleBetweenVectors(e.util.rotateVector(S,O),M),G=O*(V===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(S,G)),angle:O}},projectStrokeOnPoints:function(v,C,T){var S=[],M=C.strokeWidth/2,O=C.strokeUniform?new e.Point(1/C.scaleX,1/C.scaleY):new e.Point(1,1),V=function(G){var Z=M/Math.hypot(G.x,G.y);return new e.Point(G.x*Z*O.x,G.y*Z*O.y)};return v.length<=1||v.forEach(function(G,Z){var te=new e.Point(G.x,G.y),J,oe;Z===0?(oe=v[Z+1],J=T?V(e.util.createVector(oe,te)).addEquals(te):v[v.length-1]):Z===v.length-1?(J=v[Z-1],oe=T?V(e.util.createVector(J,te)).addEquals(te):v[0]):(J=v[Z-1],oe=v[Z+1]);var Me=e.util.getBisector(te,J,oe),Fe=Me.vector,pe=Me.angle,Ie,Se;if(C.strokeLineJoin==="miter"&&(Ie=-M/Math.sin(pe/2),Se=new e.Point(Fe.x*Ie*O.x,Fe.y*Ie*O.y),Math.hypot(Se.x,Se.y)/M<=C.strokeMiterLimit)){S.push(te.add(Se)),S.push(te.subtract(Se));return}Ie=-M*Math.SQRT2,Se=new e.Point(Fe.x*Ie*O.x,Fe.y*Ie*O.y),S.push(te.add(Se)),S.push(te.subtract(Se))}),S},transformPoint:function(v,C,T){return T?new e.Point(C[0]*v.x+C[2]*v.y,C[1]*v.x+C[3]*v.y):new e.Point(C[0]*v.x+C[2]*v.y+C[4],C[1]*v.x+C[3]*v.y+C[5])},makeBoundingBoxFromPoints:function(v,C){if(C)for(var T=0;T<v.length;T++)v[T]=e.util.transformPoint(v[T],C);var S=[v[0].x,v[1].x,v[2].x,v[3].x],M=e.util.array.min(S),O=e.util.array.max(S),V=O-M,G=[v[0].y,v[1].y,v[2].y,v[3].y],Z=e.util.array.min(G),te=e.util.array.max(G),J=te-Z;return{left:M,top:Z,width:V,height:J}},invertTransform:function(v){var C=1/(v[0]*v[3]-v[1]*v[2]),T=[C*v[3],-C*v[1],-C*v[2],C*v[0]],S=e.util.transformPoint({x:v[4],y:v[5]},T,!0);return T[4]=-S.x,T[5]=-S.y,T},toFixed:function(v,C){return parseFloat(Number(v).toFixed(C))},parseUnit:function(v,C){var T=/\D{0,2}$/.exec(v),S=parseFloat(v);switch(C||(C=e.Text.DEFAULT_SVG_FONT_SIZE),T[0]){case"mm":return S*e.DPI/25.4;case"cm":return S*e.DPI/2.54;case"in":return S*e.DPI;case"pt":return S*e.DPI/72;case"pc":return S*e.DPI/72*12;case"em":return S*C;default:return S}},falseFunction:function(){return!1},getKlass:function(v,C){return v=e.util.string.camelize(v.charAt(0).toUpperCase()+v.slice(1)),e.util.resolveNamespace(C)[v]},getSvgAttributes:function(v){var C=["instantiated_by_use","style","id","class"];switch(v){case"linearGradient":C=C.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":C=C.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":C=C.concat(["offset","stop-color","stop-opacity"]);break}return C},resolveNamespace:function(v){if(!v)return e;var C=v.split("."),T=C.length,S,M=r||e.window;for(S=0;S<T;++S)M=M[C[S]];return M},loadImage:function(v,C,T,S){if(!v){C&&C.call(T,v);return}var M=e.util.createImage(),O=function(){C&&C.call(T,M,!1),M=M.onload=M.onerror=null};M.onload=O,M.onerror=function(){e.log("Error loading "+M.src),C&&C.call(T,null,!0),M=M.onload=M.onerror=null},v.indexOf("data")!==0&&S!==void 0&&S!==null&&(M.crossOrigin=S),v.substring(0,14)==="data:image/svg"&&(M.onload=null,e.util.loadImageInDom(M,O)),M.src=v},loadImageInDom:function(v,C){var T=e.document.createElement("div");T.style.width=T.style.height="1px",T.style.left=T.style.top="-100%",T.style.position="absolute",T.appendChild(v),e.document.querySelector("body").appendChild(T),v.onload=function(){C(),T.parentNode.removeChild(T),T=null}},enlivenObjects:function(v,C,T,S){v=v||[];var M=[],O=0,V=v.length;function G(){++O===V&&C&&C(M.filter(function(Z){return Z}))}if(!V){C&&C(M);return}v.forEach(function(Z,te){if(!Z||!Z.type){G();return}var J=e.util.getKlass(Z.type,T);J.fromObject(Z,function(oe,Me){Me||(M[te]=oe),S&&S(Z,oe,Me),G()})})},enlivenObjectEnlivables:function(v,C,T){var S=e.Object.ENLIVEN_PROPS.filter(function(M){return!!v[M]});e.util.enlivenObjects(S.map(function(M){return v[M]}),function(M){var O={};S.forEach(function(V,G){O[V]=M[G],C&&(C[V]=M[G])}),T&&T(O)})},enlivenPatterns:function(v,C){v=v||[];function T(){++M===O&&C&&C(S)}var S=[],M=0,O=v.length;if(!O){C&&C(S);return}v.forEach(function(V,G){V&&V.source?new e.Pattern(V,function(Z){S[G]=Z,T()}):(S[G]=V,T())})},groupSVGElements:function(v,C,T){var S;return v&&v.length===1?(typeof T<"u"&&(v[0].sourcePath=T),v[0]):(C&&(C.width&&C.height?C.centerPoint={x:C.width/2,y:C.height/2}:(delete C.width,delete C.height)),S=new e.Group(v,C),typeof T<"u"&&(S.sourcePath=T),S)},populateWithProperties:function(v,C,T){if(T&&Array.isArray(T))for(var S=0,M=T.length;S<M;S++)T[S]in v&&(C[T[S]]=v[T[S]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(v){var C=e.util.createCanvasElement();return C.width=v.width,C.height=v.height,C.getContext("2d").drawImage(v,0,0),C},toDataURL:function(v,C,T){return v.toDataURL("image/"+C,T)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(v,C,T){return[v[0]*C[0]+v[2]*C[1],v[1]*C[0]+v[3]*C[1],v[0]*C[2]+v[2]*C[3],v[1]*C[2]+v[3]*C[3],T?0:v[0]*C[4]+v[2]*C[5]+v[4],T?0:v[1]*C[4]+v[3]*C[5]+v[5]]},qrDecompose:function(v){var C=_(v[1],v[0]),T=w(v[0],2)+w(v[1],2),S=f(T),M=(v[0]*v[3]-v[2]*v[1])/S,O=_(v[0]*v[2]+v[1]*v[3],T);return{angle:C/b,scaleX:S,scaleY:M,skewX:O/b,skewY:0,translateX:v[4],translateY:v[5]}},calcRotateMatrix:function(v){if(!v.angle)return e.iMatrix.concat();var C=e.util.degreesToRadians(v.angle),T=e.util.cos(C),S=e.util.sin(C);return[T,S,-S,T,0,0]},calcDimensionsMatrix:function(v){var C=typeof v.scaleX>"u"?1:v.scaleX,T=typeof v.scaleY>"u"?1:v.scaleY,S=[v.flipX?-C:C,0,0,v.flipY?-T:T,0,0],M=e.util.multiplyTransformMatrices,O=e.util.degreesToRadians;return v.skewX&&(S=M(S,[1,0,Math.tan(O(v.skewX)),1],!0)),v.skewY&&(S=M(S,[1,Math.tan(O(v.skewY)),0,1],!0)),S},composeMatrix:function(v){var C=[1,0,0,1,v.translateX||0,v.translateY||0],T=e.util.multiplyTransformMatrices;return v.angle&&(C=T(C,e.util.calcRotateMatrix(v))),(v.scaleX!==1||v.scaleY!==1||v.skewX||v.skewY||v.flipX||v.flipY)&&(C=T(C,e.util.calcDimensionsMatrix(v))),C},resetObjectTransform:function(v){v.scaleX=1,v.scaleY=1,v.skewX=0,v.skewY=0,v.flipX=!1,v.flipY=!1,v.rotate(0)},saveObjectTransform:function(v){return{scaleX:v.scaleX,scaleY:v.scaleY,skewX:v.skewX,skewY:v.skewY,angle:v.angle,left:v.left,flipX:v.flipX,flipY:v.flipY,top:v.top}},isTransparent:function(v,C,T,S){S>0&&(C>S?C-=S:C=0,T>S?T-=S:T=0);var M=!0,O,V,G=v.getImageData(C,T,S*2||1,S*2||1),Z=G.data.length;for(O=3;O<Z&&(V=G.data[O],M=V<=0,M!==!1);O+=4);return G=null,M},parsePreserveAspectRatioAttribute:function(v){var C="meet",T="Mid",S="Mid",M=v.split(" "),O;return M&&M.length&&(C=M.pop(),C!=="meet"&&C!=="slice"?(O=C,C="meet"):M.length&&(O=M.pop())),T=O!=="none"?O.slice(1,4):"none",S=O!=="none"?O.slice(5,8):"none",{meetOrSlice:C,alignX:T,alignY:S}},clearFabricFontCache:function(v){v=(v||"").toLowerCase(),v?e.charWidthsCache[v]&&delete e.charWidthsCache[v]:e.charWidthsCache={}},limitDimsByArea:function(v,C){var T=Math.sqrt(C*v),S=Math.floor(C/T);return{x:Math.floor(T),y:S}},capValue:function(v,C,T){return Math.max(v,Math.min(C,T))},findScaleToFit:function(v,C){return Math.min(C.width/v.width,C.height/v.height)},findScaleToCover:function(v,C){return Math.max(C.width/v.width,C.height/v.height)},matrixToSVG:function(v){return"matrix("+v.map(function(C){return e.util.toFixed(C,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(v,C){var T=e.util.invertTransform(C),S=e.util.multiplyTransformMatrices(T,v.calcOwnMatrix());e.util.applyTransformToObject(v,S)},addTransformToObject:function(v,C){e.util.applyTransformToObject(v,e.util.multiplyTransformMatrices(C,v.calcOwnMatrix()))},applyTransformToObject:function(v,C){var T=e.util.qrDecompose(C),S=new e.Point(T.translateX,T.translateY);v.flipX=!1,v.flipY=!1,v.set("scaleX",T.scaleX),v.set("scaleY",T.scaleY),v.skewX=T.skewX,v.skewY=T.skewY,v.angle=T.angle,v.setPositionByOrigin(S,"center","center")},sizeAfterTransform:function(v,C,T){var S=v/2,M=C/2,O=[{x:-S,y:-M},{x:S,y:-M},{x:-S,y:M},{x:S,y:M}],V=e.util.calcDimensionsMatrix(T),G=e.util.makeBoundingBoxFromPoints(O,V);return{x:G.width,y:G.height}},mergeClipPaths:function(v,C){var T=v,S=C;T.inverted&&!S.inverted&&(T=C,S=v),e.util.applyTransformToObject(S,e.util.multiplyTransformMatrices(e.util.invertTransform(T.calcTransformMatrix()),S.calcTransformMatrix()));var M=T.inverted&&S.inverted;return M&&(T.inverted=S.inverted=!1),new e.Group([T],{clipPath:S,inverted:M})},hasStyleChanged:function(v,C,T){return T=T||!1,v.fill!==C.fill||v.stroke!==C.stroke||v.strokeWidth!==C.strokeWidth||v.fontSize!==C.fontSize||v.fontFamily!==C.fontFamily||v.fontWeight!==C.fontWeight||v.fontStyle!==C.fontStyle||v.deltaY!==C.deltaY||T&&(v.overline!==C.overline||v.underline!==C.underline||v.linethrough!==C.linethrough)},stylesToArray:function(T,C){for(var T=e.util.object.clone(T,!0),S=C.split(`
`),M=-1,O={},V=[],G=0;G<S.length;G++){if(!T[G]){M+=S[G].length;continue}for(var Z=0;Z<S[G].length;Z++){M++;var te=T[G][Z];if(te){var J=e.util.hasStyleChanged(O,te,!0);J?V.push({start:M,end:M+1,style:te}):V[V.length-1].end++}O=te||{}}}return V},stylesFromArray:function(v,C){if(!Array.isArray(v))return v;for(var T=C.split(`
`),S=-1,M=0,O={},V=0;V<T.length;V++)for(var G=0;G<T[V].length;G++)S++,v[M]&&v[M].start<=S&&S<v[M].end&&(O[V]=O[V]||{},O[V][G]=Object.assign({},v[M].style),S===v[M].end-1&&M++);return O}}}(i),function(){var r=Array.prototype.join,f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_={m:"l",M:"L"};function w(we,ke,Oe,le,Ce,he,ge,Be,We,st,Xe){var gt=e.util.cos(we),Pt=e.util.sin(we),ri=e.util.cos(ke),ut=e.util.sin(ke),bt=Oe*Ce*ri-le*he*ut+ge,vt=le*Ce*ri+Oe*he*ut+Be,Ke=st+We*(-Oe*Ce*Pt-le*he*gt),ei=Xe+We*(-le*Ce*Pt+Oe*he*gt),li=bt+We*(Oe*Ce*ut+le*he*ri),$t=vt+We*(le*Ce*ut-Oe*he*ri);return["C",Ke,ei,li,$t,bt,vt]}function b(we,ke,Oe,le,Ce,he,ge){var Be=Math.PI,We=ge*Be/180,st=e.util.sin(We),Xe=e.util.cos(We),gt=0,Pt=0;Oe=Math.abs(Oe),le=Math.abs(le);var ri=-Xe*we*.5-st*ke*.5,ut=-Xe*ke*.5+st*we*.5,bt=Oe*Oe,vt=le*le,Ke=ut*ut,ei=ri*ri,li=bt*vt-bt*Ke-vt*ei,$t=0;if(li<0){var Si=Math.sqrt(1-li/(bt*vt));Oe*=Si,le*=Si}else $t=(Ce===he?-1:1)*Math.sqrt(li/(bt*Ke+vt*ei));var Ti=$t*Oe*ut/le,Yt=-$t*le*ri/Oe,mi=Xe*Ti-st*Yt+we*.5,Wi=st*Ti+Xe*Yt+ke*.5,Ci=x(1,0,(ri-Ti)/Oe,(ut-Yt)/le),ti=x((ri-Ti)/Oe,(ut-Yt)/le,(-ri-Ti)/Oe,(-ut-Yt)/le);he===0&&ti>0?ti-=2*Be:he===1&&ti<0&&(ti+=2*Be);for(var Pe=Math.ceil(Math.abs(ti/Be*2)),Q=[],ae=ti/Pe,Qe=8/3*Math.sin(ae/4)*Math.sin(ae/4)/Math.sin(ae/2),_t=Ci+ae,Jt=0;Jt<Pe;Jt++)Q[Jt]=w(Ci,_t,Xe,st,Oe,le,mi,Wi,Qe,gt,Pt),gt=Q[Jt][5],Pt=Q[Jt][6],Ci=_t,_t+=ae;return Q}function x(we,ke,Oe,le){var Ce=Math.atan2(ke,we),he=Math.atan2(le,Oe);return he>=Ce?he-Ce:2*Math.PI-(Ce-he)}function v(we,ke,Oe,le,Ce,he,ge,Be){var We;if(e.cachesBoundsOfCurve&&(We=r.call(arguments),e.boundsOfCurveCache[We]))return e.boundsOfCurveCache[We];var st=Math.sqrt,Xe=Math.min,gt=Math.max,Pt=Math.abs,ri=[],ut=[[],[]],bt,vt,Ke,ei,li,$t,Si,Ti;vt=6*we-12*Oe+6*Ce,bt=-3*we+9*Oe-9*Ce+3*ge,Ke=3*Oe-3*we;for(var Yt=0;Yt<2;++Yt){if(Yt>0&&(vt=6*ke-12*le+6*he,bt=-3*ke+9*le-9*he+3*Be,Ke=3*le-3*ke),Pt(bt)<1e-12){if(Pt(vt)<1e-12)continue;ei=-Ke/vt,0<ei&&ei<1&&ri.push(ei);continue}Si=vt*vt-4*Ke*bt,!(Si<0)&&(Ti=st(Si),li=(-vt+Ti)/(2*bt),0<li&&li<1&&ri.push(li),$t=(-vt-Ti)/(2*bt),0<$t&&$t<1&&ri.push($t))}for(var mi,Wi,Ci=ri.length,ti=Ci,Pe;Ci--;)ei=ri[Ci],Pe=1-ei,mi=Pe*Pe*Pe*we+3*Pe*Pe*ei*Oe+3*Pe*ei*ei*Ce+ei*ei*ei*ge,ut[0][Ci]=mi,Wi=Pe*Pe*Pe*ke+3*Pe*Pe*ei*le+3*Pe*ei*ei*he+ei*ei*ei*Be,ut[1][Ci]=Wi;ut[0][ti]=we,ut[1][ti]=ke,ut[0][ti+1]=ge,ut[1][ti+1]=Be;var Q=[{x:Xe.apply(null,ut[0]),y:Xe.apply(null,ut[1])},{x:gt.apply(null,ut[0]),y:gt.apply(null,ut[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[We]=Q),Q}function C(we,ke,Oe){for(var le=Oe[1],Ce=Oe[2],he=Oe[3],ge=Oe[4],Be=Oe[5],We=Oe[6],st=Oe[7],Xe=b(We-we,st-ke,le,Ce,ge,Be,he),gt=0,Pt=Xe.length;gt<Pt;gt++)Xe[gt][1]+=we,Xe[gt][2]+=ke,Xe[gt][3]+=we,Xe[gt][4]+=ke,Xe[gt][5]+=we,Xe[gt][6]+=ke;return Xe}function T(we){var ke=0,Oe=0,le=we.length,Ce=0,he=0,ge,Be,We,st=[],Xe,gt,Pt;for(Be=0;Be<le;++Be){switch(We=!1,ge=we[Be].slice(0),ge[0]){case"l":ge[0]="L",ge[1]+=ke,ge[2]+=Oe;case"L":ke=ge[1],Oe=ge[2];break;case"h":ge[1]+=ke;case"H":ge[0]="L",ge[2]=Oe,ke=ge[1];break;case"v":ge[1]+=Oe;case"V":ge[0]="L",Oe=ge[1],ge[1]=ke,ge[2]=Oe;break;case"m":ge[0]="M",ge[1]+=ke,ge[2]+=Oe;case"M":ke=ge[1],Oe=ge[2],Ce=ge[1],he=ge[2];break;case"c":ge[0]="C",ge[1]+=ke,ge[2]+=Oe,ge[3]+=ke,ge[4]+=Oe,ge[5]+=ke,ge[6]+=Oe;case"C":gt=ge[3],Pt=ge[4],ke=ge[5],Oe=ge[6];break;case"s":ge[0]="S",ge[1]+=ke,ge[2]+=Oe,ge[3]+=ke,ge[4]+=Oe;case"S":Xe==="C"?(gt=2*ke-gt,Pt=2*Oe-Pt):(gt=ke,Pt=Oe),ke=ge[3],Oe=ge[4],ge[0]="C",ge[5]=ge[3],ge[6]=ge[4],ge[3]=ge[1],ge[4]=ge[2],ge[1]=gt,ge[2]=Pt,gt=ge[3],Pt=ge[4];break;case"q":ge[0]="Q",ge[1]+=ke,ge[2]+=Oe,ge[3]+=ke,ge[4]+=Oe;case"Q":gt=ge[1],Pt=ge[2],ke=ge[3],Oe=ge[4];break;case"t":ge[0]="T",ge[1]+=ke,ge[2]+=Oe;case"T":Xe==="Q"?(gt=2*ke-gt,Pt=2*Oe-Pt):(gt=ke,Pt=Oe),ge[0]="Q",ke=ge[1],Oe=ge[2],ge[1]=gt,ge[2]=Pt,ge[3]=ke,ge[4]=Oe;break;case"a":ge[0]="A",ge[6]+=ke,ge[7]+=Oe;case"A":We=!0,st=st.concat(C(ke,Oe,ge)),ke=ge[6],Oe=ge[7];break;case"z":case"Z":ke=Ce,Oe=he;break}We||st.push(ge),Xe=ge[0]}return st}function S(we,ke,Oe,le){return Math.sqrt((Oe-we)*(Oe-we)+(le-ke)*(le-ke))}function M(we){return we*we*we}function O(we){return 3*we*we*(1-we)}function V(we){return 3*we*(1-we)*(1-we)}function G(we){return(1-we)*(1-we)*(1-we)}function Z(we,ke,Oe,le,Ce,he,ge,Be){return function(We){var st=M(We),Xe=O(We),gt=V(We),Pt=G(We);return{x:ge*st+Ce*Xe+Oe*gt+we*Pt,y:Be*st+he*Xe+le*gt+ke*Pt}}}function te(we,ke,Oe,le,Ce,he,ge,Be){return function(We){var st=1-We,Xe=3*st*st*(Oe-we)+6*st*We*(Ce-Oe)+3*We*We*(ge-Ce),gt=3*st*st*(le-ke)+6*st*We*(he-le)+3*We*We*(Be-he);return Math.atan2(gt,Xe)}}function J(we){return we*we}function oe(we){return 2*we*(1-we)}function Me(we){return(1-we)*(1-we)}function Fe(we,ke,Oe,le,Ce,he){return function(ge){var Be=J(ge),We=oe(ge),st=Me(ge);return{x:Ce*Be+Oe*We+we*st,y:he*Be+le*We+ke*st}}}function pe(we,ke,Oe,le,Ce,he){return function(ge){var Be=1-ge,We=2*Be*(Oe-we)+2*ge*(Ce-Oe),st=2*Be*(le-ke)+2*ge*(he-le);return Math.atan2(st,We)}}function Ie(we,ke,Oe){var le={x:ke,y:Oe},Ce,he=0,ge;for(ge=1;ge<=100;ge+=1)Ce=we(ge/100),he+=S(le.x,le.y,Ce.x,Ce.y),le=Ce;return he}function Se(we,ke){for(var Oe=0,le=0,Ce=we.iterator,he={x:we.x,y:we.y},ge,Be,We=.01,st=we.angleFinder,Xe;le<ke&&We>1e-4;)ge=Ce(Oe),Xe=Oe,Be=S(he.x,he.y,ge.x,ge.y),Be+le>ke?(Oe-=We,We/=2):(he=ge,Oe+=We,le+=Be);return ge.angle=st(Xe),ge}function me(we){for(var ke=0,Oe=we.length,le,Ce=0,he=0,ge=0,Be=0,We=[],st,Xe,gt,Pt=0;Pt<Oe;Pt++){switch(le=we[Pt],Xe={x:Ce,y:he,command:le[0]},le[0]){case"M":Xe.length=0,ge=Ce=le[1],Be=he=le[2];break;case"L":Xe.length=S(Ce,he,le[1],le[2]),Ce=le[1],he=le[2];break;case"C":st=Z(Ce,he,le[1],le[2],le[3],le[4],le[5],le[6]),gt=te(Ce,he,le[1],le[2],le[3],le[4],le[5],le[6]),Xe.iterator=st,Xe.angleFinder=gt,Xe.length=Ie(st,Ce,he),Ce=le[5],he=le[6];break;case"Q":st=Fe(Ce,he,le[1],le[2],le[3],le[4]),gt=pe(Ce,he,le[1],le[2],le[3],le[4]),Xe.iterator=st,Xe.angleFinder=gt,Xe.length=Ie(st,Ce,he),Ce=le[3],he=le[4];break;case"Z":case"z":Xe.destX=ge,Xe.destY=Be,Xe.length=S(Ce,he,ge,Be),Ce=ge,he=Be;break}ke+=Xe.length,We.push(Xe)}return We.push({length:ke,x:Ce,y:he}),We}function et(we,ke,Oe){Oe||(Oe=me(we));for(var le=0;ke-Oe[le].length>0&&le<Oe.length-2;)ke-=Oe[le].length,le++;var Ce=Oe[le],he=ke/Ce.length,ge=Ce.command,Be=we[le],We;switch(ge){case"M":return{x:Ce.x,y:Ce.y,angle:0};case"Z":case"z":return We=new e.Point(Ce.x,Ce.y).lerp(new e.Point(Ce.destX,Ce.destY),he),We.angle=Math.atan2(Ce.destY-Ce.y,Ce.destX-Ce.x),We;case"L":return We=new e.Point(Ce.x,Ce.y).lerp(new e.Point(Be[1],Be[2]),he),We.angle=Math.atan2(Be[2]-Ce.y,Be[1]-Ce.x),We;case"C":return Se(Ce,ke);case"Q":return Se(Ce,ke)}}function nt(we){var ke=[],Oe=[],le,Ce,he=e.rePathCommand,ge="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Be="("+ge+")"+e.commaWsp,We="([01])"+e.commaWsp+"?",st=Be+"?"+Be+"?"+Be+We+We+Be+"?("+ge+")",Xe=new RegExp(st,"g"),gt,Pt,ri;if(!we||!we.match)return ke;ri=we.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ut=0,bt,vt=ri.length;ut<vt;ut++){le=ri[ut],Pt=le.slice(1).trim(),Oe.length=0;var Ke=le.charAt(0);if(bt=[Ke],Ke.toLowerCase()==="a")for(var ei;ei=Xe.exec(Pt);)for(var li=1;li<ei.length;li++)Oe.push(ei[li]);else for(;gt=he.exec(Pt);)Oe.push(gt[0]);for(var li=0,$t=Oe.length;li<$t;li++)Ce=parseFloat(Oe[li]),isNaN(Ce)||bt.push(Ce);var Si=f[Ke.toLowerCase()],Ti=_[Ke]||Ke;if(bt.length-1>Si)for(var Yt=1,mi=bt.length;Yt<mi;Yt+=Si)ke.push([Ke].concat(bt.slice(Yt,Yt+Si))),Ke=Ti;else ke.push(bt)}return ke}function Et(we,ke){var Oe=[],le,Ce=new e.Point(we[0].x,we[0].y),he=new e.Point(we[1].x,we[1].y),ge=we.length,Be=1,We=0,st=ge>2;for(ke=ke||0,st&&(Be=we[2].x<he.x?-1:we[2].x===he.x?0:1,We=we[2].y<he.y?-1:we[2].y===he.y?0:1),Oe.push(["M",Ce.x-Be*ke,Ce.y-We*ke]),le=1;le<ge;le++){if(!Ce.eq(he)){var Xe=Ce.midPointFrom(he);Oe.push(["Q",Ce.x,Ce.y,Xe.x,Xe.y])}Ce=we[le],le+1<we.length&&(he=we[le+1])}return st&&(Be=Ce.x>we[le-2].x?1:Ce.x===we[le-2].x?0:-1,We=Ce.y>we[le-2].y?1:Ce.y===we[le-2].y?0:-1),Oe.push(["L",Ce.x+Be*ke,Ce.y+We*ke]),Oe}function it(we,ke,Oe){return Oe&&(ke=e.util.multiplyTransformMatrices(ke,[1,0,0,1,-Oe.x,-Oe.y])),we.map(function(le){for(var Ce=le.slice(0),he={},ge=1;ge<le.length-1;ge+=2)he.x=le[ge],he.y=le[ge+1],he=e.util.transformPoint(he,ke),Ce[ge]=he.x,Ce[ge+1]=he.y;return Ce})}e.util.joinPath=function(we){return we.map(function(ke){return ke.join(" ")}).join(" ")},e.util.parsePath=nt,e.util.makePathSimpler=T,e.util.getSmoothPathFromPoints=Et,e.util.getPathSegmentsInfo=me,e.util.getBoundsOfCurve=v,e.util.getPointOnPath=et,e.util.transformPath=it}(),function(){var r=Array.prototype.slice;function f(v,C){for(var T=r.call(arguments,2),S=[],M=0,O=v.length;M<O;M++)S[M]=T.length?v[M][C].apply(v[M],T):v[M][C].call(v[M]);return S}function _(v,C){return x(v,C,function(T,S){return T>=S})}function w(v,C){return x(v,C,function(T,S){return T<S})}function b(v,C){for(var T=v.length;T--;)v[T]=C;return v}function x(v,C,T){if(!(!v||v.length===0)){var S=v.length-1,M=C?v[S][C]:v[S];if(C)for(;S--;)T(v[S][C],M)&&(M=v[S][C]);else for(;S--;)T(v[S],M)&&(M=v[S]);return M}}e.util.array={fill:b,invoke:f,min:w,max:_}}(),function(){function r(_,w,b){if(b)if(!e.isLikelyNode&&w instanceof Element)_=w;else if(w instanceof Array){_=[];for(var x=0,v=w.length;x<v;x++)_[x]=r({},w[x],b)}else if(w&&typeof w=="object")for(var C in w)C==="canvas"||C==="group"?_[C]=null:w.hasOwnProperty(C)&&(_[C]=r({},w[C],b));else _=w;else for(var C in w)_[C]=w[C];return _}function f(_,w){return r({},_,w)}e.util.object={extend:r,clone:f},e.util.object.extend(e.util,e.Observable)}(),function(){function r(x){return x.replace(/-+(.)?/g,function(v,C){return C?C.toUpperCase():""})}function f(x,v){return x.charAt(0).toUpperCase()+(v?x.slice(1):x.slice(1).toLowerCase())}function _(x){return x.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(x){var v=0,C,T=[];for(v=0,C;v<x.length;v++)(C=b(x,v))!==!1&&T.push(C);return T}function b(x,v){var C=x.charCodeAt(v);if(isNaN(C))return"";if(C<55296||C>57343)return x.charAt(v);if(55296<=C&&C<=56319){if(x.length<=v+1)throw"High surrogate without following low surrogate";var T=x.charCodeAt(v+1);if(56320>T||T>57343)throw"High surrogate without following low surrogate";return x.charAt(v)+x.charAt(v+1)}if(v===0)throw"Low surrogate without preceding high surrogate";var S=x.charCodeAt(v-1);if(55296>S||S>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:r,capitalize:f,escapeXml:_,graphemeSplit:w}}(),function(){var r=Array.prototype.slice,f=function(){},_=function(){for(var C in{toString:1})if(C==="toString")return!1;return!0}(),w=function(C,T,S){for(var M in T)M in C.prototype&&typeof C.prototype[M]=="function"&&(T[M]+"").indexOf("callSuper")>-1?C.prototype[M]=function(O){return function(){var V=this.constructor.superclass;this.constructor.superclass=S;var G=T[O].apply(this,arguments);if(this.constructor.superclass=V,O!=="initialize")return G}}(M):C.prototype[M]=T[M],_&&(T.toString!==Object.prototype.toString&&(C.prototype.toString=T.toString),T.valueOf!==Object.prototype.valueOf&&(C.prototype.valueOf=T.valueOf))};function b(){}function x(C){for(var T=null,S=this;S.constructor.superclass;){var M=S.constructor.superclass.prototype[C];if(S[C]!==M){T=M;break}S=S.constructor.superclass.prototype}return T?arguments.length>1?T.apply(this,r.call(arguments,1)):T.call(this):console.log("tried to callSuper "+C+", method not found in prototype chain",this)}function v(){var C=null,T=r.call(arguments,0);typeof T[0]=="function"&&(C=T.shift());function S(){this.initialize.apply(this,arguments)}S.superclass=C,S.subclasses=[],C&&(b.prototype=C.prototype,S.prototype=new b,C.subclasses.push(S));for(var M=0,O=T.length;M<O;M++)w(S,T[M],C);return S.prototype.initialize||(S.prototype.initialize=f),S.prototype.constructor=S,S.prototype.callSuper=x,S}e.util.createClass=v}(),function(){var r=!!e.document.createElement("div").attachEvent,f=["touchstart","touchmove","touchend"];e.util.addListener=function(w,b,x,v){w&&w.addEventListener(b,x,r?!1:v)},e.util.removeListener=function(w,b,x,v){w&&w.removeEventListener(b,x,r?!1:v)};function _(w){var b=w.changedTouches;return b&&b[0]?b[0]:w}e.util.getPointer=function(w){var b=w.target,x=e.util.getScrollLeftTop(b),v=_(w);return{x:v.clientX+x.left,y:v.clientY+x.top}},e.util.isTouchEvent=function(w){return f.indexOf(w.type)>-1||w.pointerType==="touch"}}(),function(){function r(v,C){var T=v.style;if(!T)return v;if(typeof C=="string")return v.style.cssText+=";"+C,C.indexOf("opacity")>-1?x(v,C.match(/opacity:\s*(\d?\.?\d*)/)[1]):v;for(var S in C)if(S==="opacity")x(v,C[S]);else{var M=S==="float"||S==="cssFloat"?typeof T.styleFloat>"u"?"cssFloat":"styleFloat":S;T.setProperty(M,C[S])}return v}var f=e.document.createElement("div"),_=typeof f.style.opacity=="string",w=typeof f.style.filter=="string",b=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,x=function(v){return v};_?x=function(v,C){return v.style.opacity=C,v}:w&&(x=function(v,C){var T=v.style;return v.currentStyle&&!v.currentStyle.hasLayout&&(T.zoom=1),b.test(T.filter)?(C=C>=.9999?"":"alpha(opacity="+C*100+")",T.filter=T.filter.replace(b,C)):T.filter+=" alpha(opacity="+C*100+")",v}),e.util.setStyle=r}(),function(){var r=Array.prototype.slice;function f(G){return typeof G=="string"?e.document.getElementById(G):G}var _,w=function(G){return r.call(G,0)};try{_=w(e.document.childNodes)instanceof Array}catch{}_||(w=function(G){for(var Z=new Array(G.length),te=G.length;te--;)Z[te]=G[te];return Z});function b(G,Z){var te=e.document.createElement(G);for(var J in Z)J==="class"?te.className=Z[J]:J==="for"?te.htmlFor=Z[J]:te.setAttribute(J,Z[J]);return te}function x(G,Z){G&&(" "+G.className+" ").indexOf(" "+Z+" ")===-1&&(G.className+=(G.className?" ":"")+Z)}function v(G,Z,te){return typeof Z=="string"&&(Z=b(Z,te)),G.parentNode&&G.parentNode.replaceChild(Z,G),Z.appendChild(G),Z}function C(G){for(var Z=0,te=0,J=e.document.documentElement,oe=e.document.body||{scrollLeft:0,scrollTop:0};G&&(G.parentNode||G.host)&&(G=G.parentNode||G.host,G===e.document?(Z=oe.scrollLeft||J.scrollLeft||0,te=oe.scrollTop||J.scrollTop||0):(Z+=G.scrollLeft||0,te+=G.scrollTop||0),!(G.nodeType===1&&G.style.position==="fixed")););return{left:Z,top:te}}function T(G){var Z,te=G&&G.ownerDocument,J={left:0,top:0},oe={left:0,top:0},Me,Fe={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!te)return oe;for(var pe in Fe)oe[Fe[pe]]+=parseInt(S(G,pe),10)||0;return Z=te.documentElement,typeof G.getBoundingClientRect<"u"&&(J=G.getBoundingClientRect()),Me=C(G),{left:J.left+Me.left-(Z.clientLeft||0)+oe.left,top:J.top+Me.top-(Z.clientTop||0)+oe.top}}var S;e.document.defaultView&&e.document.defaultView.getComputedStyle?S=function(G,Z){var te=e.document.defaultView.getComputedStyle(G,null);return te?te[Z]:void 0}:S=function(G,Z){var te=G.style[Z];return!te&&G.currentStyle&&(te=G.currentStyle[Z]),te},function(){var G=e.document.documentElement.style,Z="userSelect"in G?"userSelect":"MozUserSelect"in G?"MozUserSelect":"WebkitUserSelect"in G?"WebkitUserSelect":"KhtmlUserSelect"in G?"KhtmlUserSelect":"";function te(oe){return typeof oe.onselectstart<"u"&&(oe.onselectstart=e.util.falseFunction),Z?oe.style[Z]="none":typeof oe.unselectable=="string"&&(oe.unselectable="on"),oe}function J(oe){return typeof oe.onselectstart<"u"&&(oe.onselectstart=null),Z?oe.style[Z]="":typeof oe.unselectable=="string"&&(oe.unselectable=""),oe}e.util.makeElementUnselectable=te,e.util.makeElementSelectable=J}();function M(G){var Z=e.jsdomImplForWrapper(G);return Z._canvas||Z._image}function O(G){if(!!e.isLikelyNode){var Z=e.jsdomImplForWrapper(G);Z&&(Z._image=null,Z._canvas=null,Z._currentSrc=null,Z._attributes=null,Z._classList=null)}}function V(G,Z){G.imageSmoothingEnabled=G.imageSmoothingEnabled||G.webkitImageSmoothingEnabled||G.mozImageSmoothingEnabled||G.msImageSmoothingEnabled||G.oImageSmoothingEnabled,G.imageSmoothingEnabled=Z}e.util.setImageSmoothing=V,e.util.getById=f,e.util.toArray=w,e.util.addClass=x,e.util.makeElement=b,e.util.wrapElement=v,e.util.getScrollLeftTop=C,e.util.getElementOffset=T,e.util.getNodeCanvas=M,e.util.cleanUpJsdomNode=O}(),function(){function r(w,b){return w+(/\?/.test(w)?"&":"?")+b}function f(){}function _(w,b){b||(b={});var x=b.method?b.method.toUpperCase():"GET",v=b.onComplete||function(){},C=new e.window.XMLHttpRequest,T=b.body||b.parameters;return C.onreadystatechange=function(){C.readyState===4&&(v(C),C.onreadystatechange=f)},x==="GET"&&(T=null,typeof b.parameters=="string"&&(w=r(w,b.parameters))),C.open(x,w,!0),(x==="POST"||x==="PUT")&&C.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),C.send(T),C}e.util.request=_}(),e.log=console.log,e.warn=console.warn,function(){var r=e.util.object.extend,f=e.util.object.clone,_=[];e.util.object.extend(_,{cancelAll:function(){var M=this.splice(0);return M.forEach(function(O){O.cancel()}),M},cancelByCanvas:function(M){if(!M)return[];var O=this.filter(function(V){return typeof V.target=="object"&&V.target.canvas===M});return O.forEach(function(V){V.cancel()}),O},cancelByTarget:function(M){var O=this.findAnimationsByTarget(M);return O.forEach(function(V){V.cancel()}),O},findAnimationIndex:function(M){return this.indexOf(this.findAnimation(M))},findAnimation:function(M){return this.find(function(O){return O.cancel===M})},findAnimationsByTarget:function(M){return M?this.filter(function(O){return O.target===M}):[]}});function w(){return!1}function b(M,O,V,G){return-V*Math.cos(M/G*(Math.PI/2))+V+O}function x(M){M||(M={});var O=!1,V,G=function(){var Z=e.runningAnimations.indexOf(V);return Z>-1&&e.runningAnimations.splice(Z,1)[0]};return V=r(f(M),{cancel:function(){return O=!0,G()},currentValue:"startValue"in M?M.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(V),T(function(Z){var te=Z||+new Date,J=M.duration||500,oe=te+J,Me,Fe=M.onChange||w,pe=M.abort||w,Ie=M.onComplete||w,Se=M.easing||b,me="startValue"in M?M.startValue.length>0:!1,et="startValue"in M?M.startValue:0,nt="endValue"in M?M.endValue:100,Et=M.byValue||(me?et.map(function(it,we){return nt[we]-et[we]}):nt-et);M.onStart&&M.onStart(),function it(we){Me=we||+new Date;var ke=Me>oe?J:Me-te,Oe=ke/J,le=me?et.map(function(he,ge){return Se(ke,et[ge],Et[ge],J)}):Se(ke,et,Et,J),Ce=Math.abs(me?(le[0]-et[0])/Et[0]:(le-et)/Et);if(V.currentValue=me?le.slice():le,V.completionRate=Ce,V.durationRate=Oe,!O){if(pe(le,Ce,Oe)){G();return}if(Me>oe){V.currentValue=me?nt.slice():nt,V.completionRate=1,V.durationRate=1,Fe(me?nt.slice():nt,1,1),Ie(nt,1,1),G();return}else Fe(le,Ce,Oe),T(it)}}(te)}),V.cancel}var v=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(M){return e.window.setTimeout(M,1e3/60)},C=e.window.cancelAnimationFrame||e.window.clearTimeout;function T(){return v.apply(e.window,arguments)}function S(){return C.apply(e.window,arguments)}e.util.animate=x,e.util.requestAnimFrame=T,e.util.cancelAnimFrame=S,e.runningAnimations=_}(),function(){function r(_,w,b){var x="rgba("+parseInt(_[0]+b*(w[0]-_[0]),10)+","+parseInt(_[1]+b*(w[1]-_[1]),10)+","+parseInt(_[2]+b*(w[2]-_[2]),10);return x+=","+(_&&w?parseFloat(_[3]+b*(w[3]-_[3])):1),x+=")",x}function f(_,w,b,x){var v=new e.Color(_).getSource(),C=new e.Color(w).getSource(),T=x.onComplete,S=x.onChange;return x=x||{},e.util.animate(e.util.object.extend(x,{duration:b||500,startValue:v,endValue:C,byValue:C,easing:function(M,O,V,G){var Z=x.colorEasing?x.colorEasing(M,G):1-Math.cos(M/G*(Math.PI/2));return r(O,V,Z)},onComplete:function(M,O,V){if(T)return T(r(C,C,0),O,V)},onChange:function(M,O,V){if(S){if(Array.isArray(M))return S(r(M,M,0),O,V);S(M,O,V)}}}))}e.util.animateColor=f}(),function(){function r(we,ke,Oe,le){return we<Math.abs(ke)?(we=ke,le=Oe/4):ke===0&&we===0?le=Oe/(2*Math.PI)*Math.asin(1):le=Oe/(2*Math.PI)*Math.asin(ke/we),{a:we,c:ke,p:Oe,s:le}}function f(we,ke,Oe){return we.a*Math.pow(2,10*(ke-=1))*Math.sin((ke*Oe-we.s)*(2*Math.PI)/we.p)}function _(we,ke,Oe,le){return Oe*((we=we/le-1)*we*we+1)+ke}function w(we,ke,Oe,le){return we/=le/2,we<1?Oe/2*we*we*we+ke:Oe/2*((we-=2)*we*we+2)+ke}function b(we,ke,Oe,le){return Oe*(we/=le)*we*we*we+ke}function x(we,ke,Oe,le){return-Oe*((we=we/le-1)*we*we*we-1)+ke}function v(we,ke,Oe,le){return we/=le/2,we<1?Oe/2*we*we*we*we+ke:-Oe/2*((we-=2)*we*we*we-2)+ke}function C(we,ke,Oe,le){return Oe*(we/=le)*we*we*we*we+ke}function T(we,ke,Oe,le){return Oe*((we=we/le-1)*we*we*we*we+1)+ke}function S(we,ke,Oe,le){return we/=le/2,we<1?Oe/2*we*we*we*we*we+ke:Oe/2*((we-=2)*we*we*we*we+2)+ke}function M(we,ke,Oe,le){return-Oe*Math.cos(we/le*(Math.PI/2))+Oe+ke}function O(we,ke,Oe,le){return Oe*Math.sin(we/le*(Math.PI/2))+ke}function V(we,ke,Oe,le){return-Oe/2*(Math.cos(Math.PI*we/le)-1)+ke}function G(we,ke,Oe,le){return we===0?ke:Oe*Math.pow(2,10*(we/le-1))+ke}function Z(we,ke,Oe,le){return we===le?ke+Oe:Oe*(-Math.pow(2,-10*we/le)+1)+ke}function te(we,ke,Oe,le){return we===0?ke:we===le?ke+Oe:(we/=le/2,we<1?Oe/2*Math.pow(2,10*(we-1))+ke:Oe/2*(-Math.pow(2,-10*--we)+2)+ke)}function J(we,ke,Oe,le){return-Oe*(Math.sqrt(1-(we/=le)*we)-1)+ke}function oe(we,ke,Oe,le){return Oe*Math.sqrt(1-(we=we/le-1)*we)+ke}function Me(we,ke,Oe,le){return we/=le/2,we<1?-Oe/2*(Math.sqrt(1-we*we)-1)+ke:Oe/2*(Math.sqrt(1-(we-=2)*we)+1)+ke}function Fe(we,ke,Oe,le){var Ce=1.70158,he=0,ge=Oe;if(we===0)return ke;if(we/=le,we===1)return ke+Oe;he||(he=le*.3);var Be=r(ge,Oe,he,Ce);return-f(Be,we,le)+ke}function pe(we,ke,Oe,le){var Ce=1.70158,he=0,ge=Oe;if(we===0)return ke;if(we/=le,we===1)return ke+Oe;he||(he=le*.3);var Be=r(ge,Oe,he,Ce);return Be.a*Math.pow(2,-10*we)*Math.sin((we*le-Be.s)*(2*Math.PI)/Be.p)+Be.c+ke}function Ie(we,ke,Oe,le){var Ce=1.70158,he=0,ge=Oe;if(we===0)return ke;if(we/=le/2,we===2)return ke+Oe;he||(he=le*(.3*1.5));var Be=r(ge,Oe,he,Ce);return we<1?-.5*f(Be,we,le)+ke:Be.a*Math.pow(2,-10*(we-=1))*Math.sin((we*le-Be.s)*(2*Math.PI)/Be.p)*.5+Be.c+ke}function Se(we,ke,Oe,le,Ce){return Ce===void 0&&(Ce=1.70158),Oe*(we/=le)*we*((Ce+1)*we-Ce)+ke}function me(we,ke,Oe,le,Ce){return Ce===void 0&&(Ce=1.70158),Oe*((we=we/le-1)*we*((Ce+1)*we+Ce)+1)+ke}function et(we,ke,Oe,le,Ce){return Ce===void 0&&(Ce=1.70158),we/=le/2,we<1?Oe/2*(we*we*(((Ce*=1.525)+1)*we-Ce))+ke:Oe/2*((we-=2)*we*(((Ce*=1.525)+1)*we+Ce)+2)+ke}function nt(we,ke,Oe,le){return Oe-Et(le-we,0,Oe,le)+ke}function Et(we,ke,Oe,le){return(we/=le)<1/2.75?Oe*(7.5625*we*we)+ke:we<2/2.75?Oe*(7.5625*(we-=1.5/2.75)*we+.75)+ke:we<2.5/2.75?Oe*(7.5625*(we-=2.25/2.75)*we+.9375)+ke:Oe*(7.5625*(we-=2.625/2.75)*we+.984375)+ke}function it(we,ke,Oe,le){return we<le/2?nt(we*2,0,Oe,le)*.5+ke:Et(we*2-le,0,Oe,le)*.5+Oe*.5+ke}e.util.ease={easeInQuad:function(we,ke,Oe,le){return Oe*(we/=le)*we+ke},easeOutQuad:function(we,ke,Oe,le){return-Oe*(we/=le)*(we-2)+ke},easeInOutQuad:function(we,ke,Oe,le){return we/=le/2,we<1?Oe/2*we*we+ke:-Oe/2*(--we*(we-2)-1)+ke},easeInCubic:function(we,ke,Oe,le){return Oe*(we/=le)*we*we+ke},easeOutCubic:_,easeInOutCubic:w,easeInQuart:b,easeOutQuart:x,easeInOutQuart:v,easeInQuint:C,easeOutQuint:T,easeInOutQuint:S,easeInSine:M,easeOutSine:O,easeInOutSine:V,easeInExpo:G,easeOutExpo:Z,easeInOutExpo:te,easeInCirc:J,easeOutCirc:oe,easeInOutCirc:Me,easeInElastic:Fe,easeOutElastic:pe,easeInOutElastic:Ie,easeInBack:Se,easeOutBack:me,easeInOutBack:et,easeInBounce:nt,easeOutBounce:Et,easeInOutBounce:it}}(),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.util.object.clone,b=f.util.toFixed,x=f.util.parseUnit,v=f.util.multiplyTransformMatrices,C=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],T=["symbol","image","marker","pattern","view","svg"],S=["pattern","defs","symbol","metadata","clipPath","mask","desc"],M=["symbol","g","a","svg","clipPath","defs"],O={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},V={stroke:"strokeOpacity",fill:"fillOpacity"},G="font-size",Z="clip-path";f.svgValidTagNamesRegEx=oe(C),f.svgViewBoxElementsRegEx=oe(T),f.svgInvalidAncestorsRegEx=oe(S),f.svgValidParentsRegEx=oe(M),f.cssRules={},f.gradientDefs={},f.clipPaths={};function te(he){return he in O?O[he]:he}function J(he,ge,Be,We){var st=Array.isArray(ge),Xe;if((he==="fill"||he==="stroke")&&ge==="none")ge="";else{if(he==="strokeUniform")return ge==="non-scaling-stroke";if(he==="strokeDashArray")ge==="none"?ge=null:ge=ge.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(he==="transformMatrix")Be&&Be.transformMatrix?ge=v(Be.transformMatrix,f.parseTransformAttribute(ge)):ge=f.parseTransformAttribute(ge);else if(he==="visible")ge=ge!=="none"&&ge!=="hidden",Be&&Be.visible===!1&&(ge=!1);else if(he==="opacity")ge=parseFloat(ge),Be&&typeof Be.opacity<"u"&&(ge*=Be.opacity);else if(he==="textAnchor")ge=ge==="start"?"left":ge==="end"?"right":"center";else if(he==="charSpacing")Xe=x(ge,We)/We*1e3;else if(he==="paintFirst"){var gt=ge.indexOf("fill"),Pt=ge.indexOf("stroke"),ge="fill";(gt>-1&&Pt>-1&&Pt<gt||gt===-1&&Pt>-1)&&(ge="stroke")}else{if(he==="href"||he==="xlink:href"||he==="font")return ge;if(he==="imageSmoothing")return ge==="optimizeQuality";Xe=st?ge.map(x):x(ge,We)}}return!st&&isNaN(Xe)?ge:Xe}function oe(he){return new RegExp("^("+he.join("|")+")\\b","i")}function Me(he){for(var ge in V)if(!(typeof he[V[ge]]>"u"||he[ge]==="")){if(typeof he[ge]>"u"){if(!f.Object.prototype[ge])continue;he[ge]=f.Object.prototype[ge]}if(he[ge].indexOf("url(")!==0){var Be=new f.Color(he[ge]);he[ge]=Be.setAlpha(b(Be.getAlpha()*he[V[ge]],2)).toRgba()}}return he}function Fe(he,ge){var Be,We=[],st,Xe,gt;for(Xe=0,gt=ge.length;Xe<gt;Xe++)Be=ge[Xe],st=he.getElementsByTagName(Be),We=We.concat(Array.prototype.slice.call(st));return We}f.parseTransformAttribute=function(){function he(Yt,mi){var Wi=f.util.cos(mi[0]),Ci=f.util.sin(mi[0]),ti=0,Pe=0;mi.length===3&&(ti=mi[1],Pe=mi[2]),Yt[0]=Wi,Yt[1]=Ci,Yt[2]=-Ci,Yt[3]=Wi,Yt[4]=ti-(Wi*ti-Ci*Pe),Yt[5]=Pe-(Ci*ti+Wi*Pe)}function ge(Yt,mi){var Wi=mi[0],Ci=mi.length===2?mi[1]:mi[0];Yt[0]=Wi,Yt[3]=Ci}function Be(Yt,mi,Wi){Yt[Wi]=Math.tan(f.util.degreesToRadians(mi[0]))}function We(Yt,mi){Yt[4]=mi[0],mi.length===2&&(Yt[5]=mi[1])}var st=f.iMatrix,Xe=f.reNum,gt=f.commaWsp,Pt="(?:(skewX)\\s*\\(\\s*("+Xe+")\\s*\\))",ri="(?:(skewY)\\s*\\(\\s*("+Xe+")\\s*\\))",ut="(?:(rotate)\\s*\\(\\s*("+Xe+")(?:"+gt+"("+Xe+")"+gt+"("+Xe+"))?\\s*\\))",bt="(?:(scale)\\s*\\(\\s*("+Xe+")(?:"+gt+"("+Xe+"))?\\s*\\))",vt="(?:(translate)\\s*\\(\\s*("+Xe+")(?:"+gt+"("+Xe+"))?\\s*\\))",Ke="(?:(matrix)\\s*\\(\\s*("+Xe+")"+gt+"("+Xe+")"+gt+"("+Xe+")"+gt+"("+Xe+")"+gt+"("+Xe+")"+gt+"("+Xe+")\\s*\\))",ei="(?:"+Ke+"|"+vt+"|"+bt+"|"+ut+"|"+Pt+"|"+ri+")",li="(?:"+ei+"(?:"+gt+"*"+ei+")*)",$t="^\\s*(?:"+li+"?)\\s*$",Si=new RegExp($t),Ti=new RegExp(ei,"g");return function(Yt){var mi=st.concat(),Wi=[];if(!Yt||Yt&&!Si.test(Yt))return mi;Yt.replace(Ti,function(ti){var Pe=new RegExp(ei).exec(ti).filter(function(Qe){return!!Qe}),Q=Pe[1],ae=Pe.slice(2).map(parseFloat);switch(Q){case"translate":We(mi,ae);break;case"rotate":ae[0]=f.util.degreesToRadians(ae[0]),he(mi,ae);break;case"scale":ge(mi,ae);break;case"skewX":Be(mi,ae,2);break;case"skewY":Be(mi,ae,1);break;case"matrix":mi=ae;break}Wi.push(mi.concat()),mi=st.concat()});for(var Ci=Wi[0];Wi.length>1;)Wi.shift(),Ci=f.util.multiplyTransformMatrices(Ci,Wi[0]);return Ci}}();function pe(he,ge){var Be,We;he.replace(/;\s*$/,"").split(";").forEach(function(st){var Xe=st.split(":");Be=Xe[0].trim().toLowerCase(),We=Xe[1].trim(),ge[Be]=We})}function Ie(he,ge){var Be,We;for(var st in he)typeof he[st]>"u"||(Be=st.toLowerCase(),We=he[st],ge[Be]=We)}function Se(he,ge){var Be={};for(var We in f.cssRules[ge])if(me(he,We.split(" ")))for(var st in f.cssRules[ge][We])Be[st]=f.cssRules[ge][We][st];return Be}function me(he,ge){var Be,We=!0;return Be=nt(he,ge.pop()),Be&&ge.length&&(We=et(he,ge)),Be&&We&&ge.length===0}function et(he,ge){for(var Be,We=!0;he.parentNode&&he.parentNode.nodeType===1&&ge.length;)We&&(Be=ge.pop()),he=he.parentNode,We=nt(he,Be);return ge.length===0}function nt(he,ge){var Be=he.nodeName,We=he.getAttribute("class"),st=he.getAttribute("id"),Xe,gt;if(Xe=new RegExp("^"+Be,"i"),ge=ge.replace(Xe,""),st&&ge.length&&(Xe=new RegExp("#"+st+"(?![a-zA-Z\\-]+)","i"),ge=ge.replace(Xe,"")),We&&ge.length)for(We=We.split(" "),gt=We.length;gt--;)Xe=new RegExp("\\."+We[gt]+"(?![a-zA-Z\\-]+)","i"),ge=ge.replace(Xe,"");return ge.length===0}function Et(he,ge){var Be;if(he.getElementById&&(Be=he.getElementById(ge)),Be)return Be;var We,st,Xe,gt=he.getElementsByTagName("*");for(st=0,Xe=gt.length;st<Xe;st++)if(We=gt[st],ge===We.getAttribute("id"))return We}function it(he){for(var ge=Fe(he,["use","svg:use"]),Be=0;ge.length&&Be<ge.length;){var We=ge[Be],st=We.getAttribute("xlink:href")||We.getAttribute("href");if(st===null)return;var Xe=st.slice(1),gt=We.getAttribute("x")||0,Pt=We.getAttribute("y")||0,ri=Et(he,Xe).cloneNode(!0),ut=(ri.getAttribute("transform")||"")+" translate("+gt+", "+Pt+")",bt,vt=ge.length,Ke,ei,li,$t,Si=f.svgNS;if(ke(ri),/^svg$/i.test(ri.nodeName)){var Ti=ri.ownerDocument.createElementNS(Si,"g");for(ei=0,li=ri.attributes,$t=li.length;ei<$t;ei++)Ke=li.item(ei),Ti.setAttributeNS(Si,Ke.nodeName,Ke.nodeValue);for(;ri.firstChild;)Ti.appendChild(ri.firstChild);ri=Ti}for(ei=0,li=We.attributes,$t=li.length;ei<$t;ei++)Ke=li.item(ei),!(Ke.nodeName==="x"||Ke.nodeName==="y"||Ke.nodeName==="xlink:href"||Ke.nodeName==="href")&&(Ke.nodeName==="transform"?ut=Ke.nodeValue+" "+ut:ri.setAttribute(Ke.nodeName,Ke.nodeValue));ri.setAttribute("transform",ut),ri.setAttribute("instantiated_by_use","1"),ri.removeAttribute("id"),bt=We.parentNode,bt.replaceChild(ri,We),ge.length===vt&&Be++}}var we=new RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");function ke(he){if(!f.svgViewBoxElementsRegEx.test(he.nodeName))return{};var ge=he.getAttribute("viewBox"),Be=1,We=1,st=0,Xe=0,gt,Pt,ri,ut,bt=he.getAttribute("width"),vt=he.getAttribute("height"),Ke=he.getAttribute("x")||0,ei=he.getAttribute("y")||0,li=he.getAttribute("preserveAspectRatio")||"",$t=!ge||!(ge=ge.match(we)),Si=!bt||!vt||bt==="100%"||vt==="100%",Ti=$t&&Si,Yt={},mi="",Wi=0,Ci=0;if(Yt.width=0,Yt.height=0,Yt.toBeParsed=Ti,$t&&(Ke||ei)&&he.parentNode&&he.parentNode.nodeName!=="#document"&&(mi=" translate("+x(Ke)+" "+x(ei)+") ",ri=(he.getAttribute("transform")||"")+mi,he.setAttribute("transform",ri),he.removeAttribute("x"),he.removeAttribute("y")),Ti)return Yt;if($t)return Yt.width=x(bt),Yt.height=x(vt),Yt;if(st=-parseFloat(ge[1]),Xe=-parseFloat(ge[2]),gt=parseFloat(ge[3]),Pt=parseFloat(ge[4]),Yt.minX=st,Yt.minY=Xe,Yt.viewBoxWidth=gt,Yt.viewBoxHeight=Pt,Si?(Yt.width=gt,Yt.height=Pt):(Yt.width=x(bt),Yt.height=x(vt),Be=Yt.width/gt,We=Yt.height/Pt),li=f.util.parsePreserveAspectRatioAttribute(li),li.alignX!=="none"&&(li.meetOrSlice==="meet"&&(We=Be=Be>We?We:Be),li.meetOrSlice==="slice"&&(We=Be=Be>We?Be:We),Wi=Yt.width-gt*Be,Ci=Yt.height-Pt*Be,li.alignX==="Mid"&&(Wi/=2),li.alignY==="Mid"&&(Ci/=2),li.alignX==="Min"&&(Wi=0),li.alignY==="Min"&&(Ci=0)),Be===1&&We===1&&st===0&&Xe===0&&Ke===0&&ei===0)return Yt;if((Ke||ei)&&he.parentNode.nodeName!=="#document"&&(mi=" translate("+x(Ke)+" "+x(ei)+") "),ri=mi+" matrix("+Be+" 0 0 "+We+" "+(st*Be+Wi)+" "+(Xe*We+Ci)+") ",he.nodeName==="svg"){for(ut=he.ownerDocument.createElementNS(f.svgNS,"g");he.firstChild;)ut.appendChild(he.firstChild);he.appendChild(ut)}else ut=he,ut.removeAttribute("x"),ut.removeAttribute("y"),ri=ut.getAttribute("transform")+ri;return ut.setAttribute("transform",ri),Yt}function Oe(he,ge){for(;he&&(he=he.parentNode);)if(he.nodeName&&ge.test(he.nodeName.replace("svg:",""))&&!he.getAttribute("instantiated_by_use"))return!0;return!1}f.parseSVGDocument=function(he,ge,Be,We){if(!!he){it(he);var st=f.Object.__uid++,Xe,gt,Pt=ke(he),ri=f.util.toArray(he.getElementsByTagName("*"));if(Pt.crossOrigin=We&&We.crossOrigin,Pt.svgUid=st,ri.length===0&&f.isLikelyNode){ri=he.selectNodes('//*[name(.)!="svg"]');var ut=[];for(Xe=0,gt=ri.length;Xe<gt;Xe++)ut[Xe]=ri[Xe];ri=ut}var bt=ri.filter(function(Ke){return ke(Ke),f.svgValidTagNamesRegEx.test(Ke.nodeName.replace("svg:",""))&&!Oe(Ke,f.svgInvalidAncestorsRegEx)});if(!bt||bt&&!bt.length){ge&&ge([],{});return}var vt={};ri.filter(function(Ke){return Ke.nodeName.replace("svg:","")==="clipPath"}).forEach(function(Ke){var ei=Ke.getAttribute("id");vt[ei]=f.util.toArray(Ke.getElementsByTagName("*")).filter(function(li){return f.svgValidTagNamesRegEx.test(li.nodeName.replace("svg:",""))})}),f.gradientDefs[st]=f.getGradientDefs(he),f.cssRules[st]=f.getCSSRules(he),f.clipPaths[st]=vt,f.parseElements(bt,function(Ke,ei){ge&&(ge(Ke,Pt,ei,ri),delete f.gradientDefs[st],delete f.cssRules[st],delete f.clipPaths[st])},w(Pt),Be,We)}};function le(he,ge){var Be=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],We="xlink:href",st=ge.getAttribute(We).slice(1),Xe=Et(he,st);if(Xe&&Xe.getAttribute(We)&&le(he,Xe),Be.forEach(function(Pt){Xe&&!ge.hasAttribute(Pt)&&Xe.hasAttribute(Pt)&&ge.setAttribute(Pt,Xe.getAttribute(Pt))}),!ge.children.length)for(var gt=Xe.cloneNode(!0);gt.firstChild;)ge.appendChild(gt.firstChild);ge.removeAttribute(We)}var Ce=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");_(f,{parseFontDeclaration:function(he,ge){var Be=he.match(Ce);if(!!Be){var We=Be[1],st=Be[3],Xe=Be[4],gt=Be[5],Pt=Be[6];We&&(ge.fontStyle=We),st&&(ge.fontWeight=isNaN(parseFloat(st))?st:parseFloat(st)),Xe&&(ge.fontSize=x(Xe)),Pt&&(ge.fontFamily=Pt),gt&&(ge.lineHeight=gt==="normal"?1:gt)}},getGradientDefs:function(he){var ge=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Be=Fe(he,ge),We,st=0,Xe={};for(st=Be.length;st--;)We=Be[st],We.getAttribute("xlink:href")&&le(he,We),Xe[We.getAttribute("id")]=We;return Xe},parseAttributes:function(he,ge,Be){if(!!he){var We,st={},Xe,gt;typeof Be>"u"&&(Be=he.getAttribute("svgUid")),he.parentNode&&f.svgValidParentsRegEx.test(he.parentNode.nodeName)&&(st=f.parseAttributes(he.parentNode,ge,Be));var Pt=ge.reduce(function(li,$t){return We=he.getAttribute($t),We&&(li[$t]=We),li},{}),ri=_(Se(he,Be),f.parseStyleAttribute(he));Pt=_(Pt,ri),ri[Z]&&he.setAttribute(Z,ri[Z]),Xe=gt=st.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,Pt[G]&&(Pt[G]=Xe=x(Pt[G],gt));var ut,bt,vt={};for(var Ke in Pt)ut=te(Ke),bt=J(ut,Pt[Ke],st,Xe),vt[ut]=bt;vt&&vt.font&&f.parseFontDeclaration(vt.font,vt);var ei=_(st,vt);return f.svgValidParentsRegEx.test(he.nodeName)?ei:Me(ei)}},parseElements:function(he,ge,Be,We,st){new f.ElementsParser(he,ge,Be,We,st).parse()},parseStyleAttribute:function(he){var ge={},Be=he.getAttribute("style");return Be&&(typeof Be=="string"?pe(Be,ge):Ie(Be,ge)),ge},parsePointsAttribute:function(he){if(!he)return null;he=he.replace(/,/g," ").trim(),he=he.split(/\s+/);var ge=[],Be,We;for(Be=0,We=he.length;Be<We;Be+=2)ge.push({x:parseFloat(he[Be]),y:parseFloat(he[Be+1])});return ge},getCSSRules:function(he){var ge=he.getElementsByTagName("style"),Be,We,st={},Xe;for(Be=0,We=ge.length;Be<We;Be++){var gt=ge[Be].textContent;gt=gt.replace(/\/\*[\s\S]*?\*\//g,""),gt.trim()!==""&&(Xe=gt.split("}"),Xe=Xe.filter(function(Pt){return Pt.trim()}),Xe.forEach(function(Pt){var ri=Pt.split("{"),ut={},bt=ri[1].trim(),vt=bt.split(";").filter(function($t){return $t.trim()});for(Be=0,We=vt.length;Be<We;Be++){var Ke=vt[Be].split(":"),ei=Ke[0].trim(),li=Ke[1].trim();ut[ei]=li}Pt=ri[0].trim(),Pt.split(",").forEach(function($t){$t=$t.replace(/^svg/i,"").trim(),$t!==""&&(st[$t]?f.util.object.extend(st[$t],ut):st[$t]=f.util.object.clone(ut))})}))}return st},loadSVGFromURL:function(he,ge,Be,We){he=he.replace(/^\n\s*/,"").trim(),new f.util.request(he,{method:"get",onComplete:st});function st(Xe){var gt=Xe.responseXML;if(!gt||!gt.documentElement)return ge&&ge(null),!1;f.parseSVGDocument(gt.documentElement,function(Pt,ri,ut,bt){ge&&ge(Pt,ri,ut,bt)},Be,We)}},loadSVGFromString:function(he,ge,Be,We){var st=new f.window.DOMParser,Xe=st.parseFromString(he.trim(),"text/xml");f.parseSVGDocument(Xe.documentElement,function(gt,Pt,ri,ut){ge(gt,Pt,ri,ut)},Be,We)}})}(i),e.ElementsParser=function(r,f,_,w,b,x){this.elements=r,this.callback=f,this.options=_,this.reviver=w,this.svgUid=_&&_.svgUid||0,this.parsingOptions=b,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=x},function(r){r.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},r.createObjects=function(){var f=this;this.elements.forEach(function(_,w){_.setAttribute("svgUid",f.svgUid),f.createObject(_,w)})},r.findTag=function(f){return e[e.util.string.capitalize(f.tagName.replace("svg:",""))]},r.createObject=function(f,_){var w=this.findTag(f);if(w&&w.fromElement)try{w.fromElement(f,this.createCallback(_,f),this.options)}catch(b){e.log(b)}else this.checkIfDone()},r.createCallback=function(f,_){var w=this;return function(b){var x;w.resolveGradient(b,_,"fill"),w.resolveGradient(b,_,"stroke"),b instanceof e.Image&&b._originalElement&&(x=b.parsePreserveAspectRatioAttribute(_)),b._removeTransformMatrix(x),w.resolveClipPath(b,_),w.reviver&&w.reviver(_,b),w.instances[f]=b,w.checkIfDone()}},r.extractPropertyDefinition=function(f,_,w){var b=f[_],x=this.regexUrl;if(!!x.test(b)){x.lastIndex=0;var v=x.exec(b)[1];return x.lastIndex=0,e[w][this.svgUid][v]}},r.resolveGradient=function(f,_,w){var b=this.extractPropertyDefinition(f,w,"gradientDefs");if(b){var x=_.getAttribute(w+"-opacity"),v=e.Gradient.fromElement(b,f,x,this.options);f.set(w,v)}},r.createClipPathCallback=function(f,_){return function(w){w._removeTransformMatrix(),w.fillRule=w.clipRule,_.push(w)}},r.resolveClipPath=function(f,_){var w=this.extractPropertyDefinition(f,"clipPath","clipPaths"),b,x,v,C,T,S;if(w){C=[],v=e.util.invertTransform(f.calcTransformMatrix());for(var M=w[0].parentNode,O=_;O.parentNode&&O.getAttribute("clip-path")!==f.clipPath;)O=O.parentNode;O.parentNode.appendChild(M);for(var V=0;V<w.length;V++)b=w[V],x=this.findTag(b),x.fromElement(b,this.createClipPathCallback(f,C),this.options);C.length===1?w=C[0]:w=new e.Group(C),T=e.util.multiplyTransformMatrices(v,w.calcTransformMatrix()),w.clipPath&&this.resolveClipPath(w,O);var S=e.util.qrDecompose(T);w.flipX=!1,w.flipY=!1,w.set("scaleX",S.scaleX),w.set("scaleY",S.scaleY),w.angle=S.angle,w.skewX=S.skewX,w.skewY=0,w.setPositionByOrigin({x:S.translateX,y:S.translateY},"center","center"),f.clipPath=w}else delete f.clipPath},r.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(f){return f!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(r){var f=r.fabric||(r.fabric={});if(f.Point){f.warn("fabric.Point is already defined");return}f.Point=_;function _(w,b){this.x=w,this.y=b}_.prototype={type:"point",constructor:_,add:function(w){return new _(this.x+w.x,this.y+w.y)},addEquals:function(w){return this.x+=w.x,this.y+=w.y,this},scalarAdd:function(w){return new _(this.x+w,this.y+w)},scalarAddEquals:function(w){return this.x+=w,this.y+=w,this},subtract:function(w){return new _(this.x-w.x,this.y-w.y)},subtractEquals:function(w){return this.x-=w.x,this.y-=w.y,this},scalarSubtract:function(w){return new _(this.x-w,this.y-w)},scalarSubtractEquals:function(w){return this.x-=w,this.y-=w,this},multiply:function(w){return new _(this.x*w,this.y*w)},multiplyEquals:function(w){return this.x*=w,this.y*=w,this},divide:function(w){return new _(this.x/w,this.y/w)},divideEquals:function(w){return this.x/=w,this.y/=w,this},eq:function(w){return this.x===w.x&&this.y===w.y},lt:function(w){return this.x<w.x&&this.y<w.y},lte:function(w){return this.x<=w.x&&this.y<=w.y},gt:function(w){return this.x>w.x&&this.y>w.y},gte:function(w){return this.x>=w.x&&this.y>=w.y},lerp:function(w,b){return typeof b>"u"&&(b=.5),b=Math.max(Math.min(1,b),0),new _(this.x+(w.x-this.x)*b,this.y+(w.y-this.y)*b)},distanceFrom:function(w){var b=this.x-w.x,x=this.y-w.y;return Math.sqrt(b*b+x*x)},midPointFrom:function(w){return this.lerp(w)},min:function(w){return new _(Math.min(this.x,w.x),Math.min(this.y,w.y))},max:function(w){return new _(Math.max(this.x,w.x),Math.max(this.y,w.y))},toString:function(){return this.x+","+this.y},setXY:function(w,b){return this.x=w,this.y=b,this},setX:function(w){return this.x=w,this},setY:function(w){return this.y=w,this},setFromPoint:function(w){return this.x=w.x,this.y=w.y,this},swap:function(w){var b=this.x,x=this.y;this.x=w.x,this.y=w.y,w.x=b,w.y=x},clone:function(){return new _(this.x,this.y)}}}(i),function(r){var f=r.fabric||(r.fabric={});if(f.Intersection){f.warn("fabric.Intersection is already defined");return}function _(w){this.status=w,this.points=[]}f.Intersection=_,f.Intersection.prototype={constructor:_,appendPoint:function(w){return this.points.push(w),this},appendPoints:function(w){return this.points=this.points.concat(w),this}},f.Intersection.intersectLineLine=function(w,b,x,v){var C,T=(v.x-x.x)*(w.y-x.y)-(v.y-x.y)*(w.x-x.x),S=(b.x-w.x)*(w.y-x.y)-(b.y-w.y)*(w.x-x.x),M=(v.y-x.y)*(b.x-w.x)-(v.x-x.x)*(b.y-w.y);if(M!==0){var O=T/M,V=S/M;0<=O&&O<=1&&0<=V&&V<=1?(C=new _("Intersection"),C.appendPoint(new f.Point(w.x+O*(b.x-w.x),w.y+O*(b.y-w.y)))):C=new _}else T===0||S===0?C=new _("Coincident"):C=new _("Parallel");return C},f.Intersection.intersectLinePolygon=function(w,b,x){var v=new _,C=x.length,T,S,M,O;for(O=0;O<C;O++)T=x[O],S=x[(O+1)%C],M=_.intersectLineLine(w,b,T,S),v.appendPoints(M.points);return v.points.length>0&&(v.status="Intersection"),v},f.Intersection.intersectPolygonPolygon=function(w,b){var x=new _,v=w.length,C;for(C=0;C<v;C++){var T=w[C],S=w[(C+1)%v],M=_.intersectLinePolygon(T,S,b);x.appendPoints(M.points)}return x.points.length>0&&(x.status="Intersection"),x},f.Intersection.intersectPolygonRectangle=function(w,b,x){var v=b.min(x),C=b.max(x),T=new f.Point(C.x,v.y),S=new f.Point(v.x,C.y),M=_.intersectLinePolygon(v,T,w),O=_.intersectLinePolygon(T,C,w),V=_.intersectLinePolygon(C,S,w),G=_.intersectLinePolygon(S,v,w),Z=new _;return Z.appendPoints(M.points),Z.appendPoints(O.points),Z.appendPoints(V.points),Z.appendPoints(G.points),Z.points.length>0&&(Z.status="Intersection"),Z}}(i),function(r){var f=r.fabric||(r.fabric={});if(f.Color){f.warn("fabric.Color is already defined.");return}function _(b){b?this._tryParsingColor(b):this.setSource([0,0,0,1])}f.Color=_,f.Color.prototype={_tryParsingColor:function(b){var x;b in _.colorNameMap&&(b=_.colorNameMap[b]),b==="transparent"&&(x=[255,255,255,0]),x||(x=_.sourceFromHex(b)),x||(x=_.sourceFromRgb(b)),x||(x=_.sourceFromHsl(b)),x||(x=[0,0,0,1]),x&&this.setSource(x)},_rgbToHsl:function(b,x,v){b/=255,x/=255,v/=255;var C,T,S,M=f.util.array.max([b,x,v]),O=f.util.array.min([b,x,v]);if(S=(M+O)/2,M===O)C=T=0;else{var V=M-O;switch(T=S>.5?V/(2-M-O):V/(M+O),M){case b:C=(x-v)/V+(x<v?6:0);break;case x:C=(v-b)/V+2;break;case v:C=(b-x)/V+4;break}C/=6}return[Math.round(C*360),Math.round(T*100),Math.round(S*100)]},getSource:function(){return this._source},setSource:function(b){this._source=b},toRgb:function(){var b=this.getSource();return"rgb("+b[0]+","+b[1]+","+b[2]+")"},toRgba:function(){var b=this.getSource();return"rgba("+b[0]+","+b[1]+","+b[2]+","+b[3]+")"},toHsl:function(){var b=this.getSource(),x=this._rgbToHsl(b[0],b[1],b[2]);return"hsl("+x[0]+","+x[1]+"%,"+x[2]+"%)"},toHsla:function(){var b=this.getSource(),x=this._rgbToHsl(b[0],b[1],b[2]);return"hsla("+x[0]+","+x[1]+"%,"+x[2]+"%,"+b[3]+")"},toHex:function(){var b=this.getSource(),x,v,C;return x=b[0].toString(16),x=x.length===1?"0"+x:x,v=b[1].toString(16),v=v.length===1?"0"+v:v,C=b[2].toString(16),C=C.length===1?"0"+C:C,x.toUpperCase()+v.toUpperCase()+C.toUpperCase()},toHexa:function(){var b=this.getSource(),x;return x=Math.round(b[3]*255),x=x.toString(16),x=x.length===1?"0"+x:x,this.toHex()+x.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(b){var x=this.getSource();return x[3]=b,this.setSource(x),this},toGrayscale:function(){var b=this.getSource(),x=parseInt((b[0]*.3+b[1]*.59+b[2]*.11).toFixed(0),10),v=b[3];return this.setSource([x,x,x,v]),this},toBlackWhite:function(b){var x=this.getSource(),v=(x[0]*.3+x[1]*.59+x[2]*.11).toFixed(0),C=x[3];return b=b||127,v=Number(v)<Number(b)?0:255,this.setSource([v,v,v,C]),this},overlayWith:function(b){b instanceof _||(b=new _(b));var x=[],v=this.getAlpha(),C=.5,T=this.getSource(),S=b.getSource(),M;for(M=0;M<3;M++)x.push(Math.round(T[M]*(1-C)+S[M]*C));return x[3]=v,this.setSource(x),this}},f.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,f.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,f.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,f.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function w(b,x,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?b+(x-b)*6*v:v<1/2?x:v<2/3?b+(x-b)*(2/3-v)*6:b}f.Color.fromRgb=function(b){return _.fromSource(_.sourceFromRgb(b))},f.Color.sourceFromRgb=function(b){var x=b.match(_.reRGBa);if(x){var v=parseInt(x[1],10)/(/%$/.test(x[1])?100:1)*(/%$/.test(x[1])?255:1),C=parseInt(x[2],10)/(/%$/.test(x[2])?100:1)*(/%$/.test(x[2])?255:1),T=parseInt(x[3],10)/(/%$/.test(x[3])?100:1)*(/%$/.test(x[3])?255:1);return[parseInt(v,10),parseInt(C,10),parseInt(T,10),x[4]?parseFloat(x[4]):1]}},f.Color.fromRgba=_.fromRgb,f.Color.fromHsl=function(b){return _.fromSource(_.sourceFromHsl(b))},f.Color.sourceFromHsl=function(b){var x=b.match(_.reHSLa);if(!!x){var v=(parseFloat(x[1])%360+360)%360/360,C=parseFloat(x[2])/(/%$/.test(x[2])?100:1),T=parseFloat(x[3])/(/%$/.test(x[3])?100:1),S,M,O;if(C===0)S=M=O=T;else{var V=T<=.5?T*(C+1):T+C-T*C,G=T*2-V;S=w(G,V,v+1/3),M=w(G,V,v),O=w(G,V,v-1/3)}return[Math.round(S*255),Math.round(M*255),Math.round(O*255),x[4]?parseFloat(x[4]):1]}},f.Color.fromHsla=_.fromHsl,f.Color.fromHex=function(b){return _.fromSource(_.sourceFromHex(b))},f.Color.sourceFromHex=function(b){if(b.match(_.reHex)){var x=b.slice(b.indexOf("#")+1),v=x.length===3||x.length===4,C=x.length===8||x.length===4,T=v?x.charAt(0)+x.charAt(0):x.substring(0,2),S=v?x.charAt(1)+x.charAt(1):x.substring(2,4),M=v?x.charAt(2)+x.charAt(2):x.substring(4,6),O=C?v?x.charAt(3)+x.charAt(3):x.substring(6,8):"FF";return[parseInt(T,16),parseInt(S,16),parseInt(M,16),parseFloat((parseInt(O,16)/255).toFixed(2))]}},f.Color.fromSource=function(b){var x=new _;return x.setSource(b),x}}(i),function(r){var f=r.fabric||(r.fabric={}),_=["e","se","s","sw","w","nw","n","ne","e"],w=["ns","nesw","ew","nwse"],b={},x="left",v="top",C="right",T="bottom",S="center",M={top:T,bottom:v,left:C,right:x,center:S},O=f.util.radiansToDegrees,V=Math.sign||function(ut){return(ut>0)-(ut<0)||+ut};function G(ut,bt){var vt=ut.angle+O(Math.atan2(bt.y,bt.x))+360;return Math.round(vt%360/45)}function Z(ut,bt){var vt=bt.transform.target,Ke=vt.canvas,ei=f.util.object.clone(bt);ei.target=vt,Ke&&Ke.fire("object:"+ut,ei),vt.fire(ut,bt)}function te(ut,bt){var vt=bt.canvas,Ke=vt.uniScaleKey,ei=ut[Ke];return vt.uniformScaling&&!ei||!vt.uniformScaling&&ei}function J(ut){return ut.originX===S&&ut.originY===S}function oe(ut,bt,vt){var Ke=ut.lockScalingX,ei=ut.lockScalingY;return!!(Ke&&ei||!bt&&(Ke||ei)&&vt||Ke&&bt==="x"||ei&&bt==="y")}function Me(ut,bt,vt){var Ke="not-allowed",ei=te(ut,vt),li="";if(bt.x!==0&&bt.y===0?li="x":bt.x===0&&bt.y!==0&&(li="y"),oe(vt,li,ei))return Ke;var $t=G(vt,bt);return _[$t]+"-resize"}function Fe(ut,bt,vt){var Ke="not-allowed";if(bt.x!==0&&vt.lockSkewingY||bt.y!==0&&vt.lockSkewingX)return Ke;var ei=G(vt,bt)%4;return w[ei]+"-resize"}function pe(ut,bt,vt){return ut[vt.canvas.altActionKey]?b.skewCursorStyleHandler(ut,bt,vt):b.scaleCursorStyleHandler(ut,bt,vt)}function Ie(ut,bt,vt){var Ke=ut[vt.canvas.altActionKey];if(bt.x===0)return Ke?"skewX":"scaleY";if(bt.y===0)return Ke?"skewY":"scaleX"}function Se(ut,bt,vt){return vt.lockRotation?"not-allowed":bt.cursorStyle}function me(ut,bt,vt,Ke){return{e:ut,transform:bt,pointer:{x:vt,y:Ke}}}function et(ut){return function(bt,vt,Ke,ei){var li=vt.target,$t=li.getCenterPoint(),Si=li.translateToOriginPoint($t,vt.originX,vt.originY),Ti=ut(bt,vt,Ke,ei);return li.setPositionByOrigin(Si,vt.originX,vt.originY),Ti}}function nt(ut,bt){return function(vt,Ke,ei,li){var $t=bt(vt,Ke,ei,li);return $t&&Z(ut,me(vt,Ke,ei,li)),$t}}function Et(ut,bt,vt,Ke,ei){var li=ut.target,$t=li.controls[ut.corner],Si=li.canvas.getZoom(),Ti=li.padding/Si,Yt=li.toLocalPoint(new f.Point(Ke,ei),bt,vt);return Yt.x>=Ti&&(Yt.x-=Ti),Yt.x<=-Ti&&(Yt.x+=Ti),Yt.y>=Ti&&(Yt.y-=Ti),Yt.y<=Ti&&(Yt.y+=Ti),Yt.x-=$t.offsetX,Yt.y-=$t.offsetY,Yt}function it(ut){return ut.flipX!==ut.flipY}function we(ut,bt,vt,Ke,ei){if(ut[bt]!==0){var li=ut._getTransformedDimensions()[Ke],$t=ei/li*ut[vt];ut.set(vt,$t)}}function ke(ut,bt,vt,Ke){var ei=bt.target,li=ei._getTransformedDimensions(0,ei.skewY),$t=Et(bt,bt.originX,bt.originY,vt,Ke),Si=Math.abs($t.x*2)-li.x,Ti=ei.skewX,Yt;Si<2?Yt=0:(Yt=O(Math.atan2(Si/ei.scaleX,li.y/ei.scaleY)),bt.originX===x&&bt.originY===T&&(Yt=-Yt),bt.originX===C&&bt.originY===v&&(Yt=-Yt),it(ei)&&(Yt=-Yt));var mi=Ti!==Yt;if(mi){var Wi=ei._getTransformedDimensions().y;ei.set("skewX",Yt),we(ei,"skewY","scaleY","y",Wi)}return mi}function Oe(ut,bt,vt,Ke){var ei=bt.target,li=ei._getTransformedDimensions(ei.skewX,0),$t=Et(bt,bt.originX,bt.originY,vt,Ke),Si=Math.abs($t.y*2)-li.y,Ti=ei.skewY,Yt;Si<2?Yt=0:(Yt=O(Math.atan2(Si/ei.scaleY,li.x/ei.scaleX)),bt.originX===x&&bt.originY===T&&(Yt=-Yt),bt.originX===C&&bt.originY===v&&(Yt=-Yt),it(ei)&&(Yt=-Yt));var mi=Ti!==Yt;if(mi){var Wi=ei._getTransformedDimensions().x;ei.set("skewY",Yt),we(ei,"skewX","scaleX","x",Wi)}return mi}function le(ut,bt,vt,Ke){var ei=bt.target,li=ei.skewX,$t,Si=bt.originY;if(ei.lockSkewingX)return!1;if(li===0){var Ti=Et(bt,S,S,vt,Ke);Ti.x>0?$t=x:$t=C}else li>0&&($t=Si===v?x:C),li<0&&($t=Si===v?C:x),it(ei)&&($t=$t===x?C:x);bt.originX=$t;var Yt=nt("skewing",et(ke));return Yt(ut,bt,vt,Ke)}function Ce(ut,bt,vt,Ke){var ei=bt.target,li=ei.skewY,$t,Si=bt.originX;if(ei.lockSkewingY)return!1;if(li===0){var Ti=Et(bt,S,S,vt,Ke);Ti.y>0?$t=v:$t=T}else li>0&&($t=Si===x?v:T),li<0&&($t=Si===x?T:v),it(ei)&&($t=$t===v?T:v);bt.originY=$t;var Yt=nt("skewing",et(Oe));return Yt(ut,bt,vt,Ke)}function he(ut,bt,vt,Ke){var ei=bt,li=ei.target,$t=li.translateToOriginPoint(li.getCenterPoint(),ei.originX,ei.originY);if(li.lockRotation)return!1;var Si=Math.atan2(ei.ey-$t.y,ei.ex-$t.x),Ti=Math.atan2(Ke-$t.y,vt-$t.x),Yt=O(Ti-Si+ei.theta),mi=!0;if(li.snapAngle>0){var Wi=li.snapAngle,Ci=li.snapThreshold||Wi,ti=Math.ceil(Yt/Wi)*Wi,Pe=Math.floor(Yt/Wi)*Wi;Math.abs(Yt-Pe)<Ci?Yt=Pe:Math.abs(Yt-ti)<Ci&&(Yt=ti)}return Yt<0&&(Yt=360+Yt),Yt%=360,mi=li.angle!==Yt,li.angle=Yt,mi}function ge(ut,bt,vt,Ke,ei){ei=ei||{};var li=bt.target,$t=li.lockScalingX,Si=li.lockScalingY,Ti=ei.by,Yt,mi,Wi,Ci,ti=te(ut,li),Pe=oe(li,Ti,ti),Q,ae,Qe=bt.gestureScale;if(Pe)return!1;if(Qe)mi=bt.scaleX*Qe,Wi=bt.scaleY*Qe;else{if(Yt=Et(bt,bt.originX,bt.originY,vt,Ke),Q=Ti!=="y"?V(Yt.x):1,ae=Ti!=="x"?V(Yt.y):1,bt.signX||(bt.signX=Q),bt.signY||(bt.signY=ae),li.lockScalingFlip&&(bt.signX!==Q||bt.signY!==ae))return!1;if(Ci=li._getTransformedDimensions(),ti&&!Ti){var _t=Math.abs(Yt.x)+Math.abs(Yt.y),Jt=bt.original,di=Math.abs(Ci.x*Jt.scaleX/li.scaleX)+Math.abs(Ci.y*Jt.scaleY/li.scaleY),wn=_t/di;mi=Jt.scaleX*wn,Wi=Jt.scaleY*wn}else mi=Math.abs(Yt.x*li.scaleX/Ci.x),Wi=Math.abs(Yt.y*li.scaleY/Ci.y);J(bt)&&(mi*=2,Wi*=2),bt.signX!==Q&&Ti!=="y"&&(bt.originX=M[bt.originX],mi*=-1,bt.signX=Q),bt.signY!==ae&&Ti!=="x"&&(bt.originY=M[bt.originY],Wi*=-1,bt.signY=ae)}var Ln=li.scaleX,hn=li.scaleY;return Ti?(Ti==="x"&&li.set("scaleX",mi),Ti==="y"&&li.set("scaleY",Wi)):(!$t&&li.set("scaleX",mi),!Si&&li.set("scaleY",Wi)),Ln!==li.scaleX||hn!==li.scaleY}function Be(ut,bt,vt,Ke){return ge(ut,bt,vt,Ke)}function We(ut,bt,vt,Ke){return ge(ut,bt,vt,Ke,{by:"x"})}function st(ut,bt,vt,Ke){return ge(ut,bt,vt,Ke,{by:"y"})}function Xe(ut,bt,vt,Ke){return ut[bt.target.canvas.altActionKey]?b.skewHandlerX(ut,bt,vt,Ke):b.scalingY(ut,bt,vt,Ke)}function gt(ut,bt,vt,Ke){return ut[bt.target.canvas.altActionKey]?b.skewHandlerY(ut,bt,vt,Ke):b.scalingX(ut,bt,vt,Ke)}function Pt(ut,bt,vt,Ke){var ei=bt.target,li=Et(bt,bt.originX,bt.originY,vt,Ke),$t=ei.strokeWidth/(ei.strokeUniform?ei.scaleX:1),Si=J(bt)?2:1,Ti=ei.width,Yt=Math.abs(li.x*Si/ei.scaleX)-$t;return ei.set("width",Math.max(Yt,0)),Ti!==Yt}function ri(ut,bt,vt,Ke){var ei=bt.target,li=vt-bt.offsetX,$t=Ke-bt.offsetY,Si=!ei.get("lockMovementX")&&ei.left!==li,Ti=!ei.get("lockMovementY")&&ei.top!==$t;return Si&&ei.set("left",li),Ti&&ei.set("top",$t),(Si||Ti)&&Z("moving",me(ut,bt,vt,Ke)),Si||Ti}b.scaleCursorStyleHandler=Me,b.skewCursorStyleHandler=Fe,b.scaleSkewCursorStyleHandler=pe,b.rotationWithSnapping=nt("rotating",et(he)),b.scalingEqually=nt("scaling",et(Be)),b.scalingX=nt("scaling",et(We)),b.scalingY=nt("scaling",et(st)),b.scalingYOrSkewingX=Xe,b.scalingXOrSkewingY=gt,b.changeWidth=nt("resizing",et(Pt)),b.skewHandlerX=le,b.skewHandlerY=Ce,b.dragHandler=ri,b.scaleOrSkewActionName=Ie,b.rotationStyleHandler=Se,b.fireEvent=Z,b.wrapWithFixedAnchor=et,b.wrapWithFireEvent=nt,b.getLocalPoint=Et,f.controlsUtils=b}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.degreesToRadians,w=f.controlsUtils;function b(v,C,T,S,M){S=S||{};var O=this.sizeX||S.cornerSize||M.cornerSize,V=this.sizeY||S.cornerSize||M.cornerSize,G=typeof S.transparentCorners<"u"?S.transparentCorners:M.transparentCorners,Z=G?"stroke":"fill",te=!G&&(S.cornerStrokeColor||M.cornerStrokeColor),J=C,oe=T,Me;v.save(),v.fillStyle=S.cornerColor||M.cornerColor,v.strokeStyle=S.cornerStrokeColor||M.cornerStrokeColor,O>V?(Me=O,v.scale(1,V/O),oe=T*O/V):V>O?(Me=V,v.scale(O/V,1),J=C*V/O):Me=O,v.lineWidth=1,v.beginPath(),v.arc(J,oe,Me/2,0,2*Math.PI,!1),v[Z](),te&&v.stroke(),v.restore()}function x(v,C,T,S,M){S=S||{};var O=this.sizeX||S.cornerSize||M.cornerSize,V=this.sizeY||S.cornerSize||M.cornerSize,G=typeof S.transparentCorners<"u"?S.transparentCorners:M.transparentCorners,Z=G?"stroke":"fill",te=!G&&(S.cornerStrokeColor||M.cornerStrokeColor),J=O/2,oe=V/2;v.save(),v.fillStyle=S.cornerColor||M.cornerColor,v.strokeStyle=S.cornerStrokeColor||M.cornerStrokeColor,v.lineWidth=1,v.translate(C,T),v.rotate(_(M.angle)),v[Z+"Rect"](-J,-oe,O,V),te&&v.strokeRect(-J,-oe,O,V),v.restore()}w.renderCircleControl=b,w.renderSquareControl=x}(i),function(r){var f=r.fabric||(r.fabric={});function _(w){for(var b in w)this[b]=w[b]}f.Control=_,f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(w,b){return b.cursorStyle},getActionName:function(w,b){return b.actionName},getVisibility:function(w,b){var x=w._controlsVisibility;return x&&typeof x[b]<"u"?x[b]:this.visible},setVisibility:function(w){this.visible=w},positionHandler:function(w,b){var x=f.util.transformPoint({x:this.x*w.x+this.offsetX,y:this.y*w.y+this.offsetY},b);return x},calcCornerCoords:function(w,b,x,v,C){var T,S,M,O,V=C?this.touchSizeX:this.sizeX,G=C?this.touchSizeY:this.sizeY;if(V&&G&&V!==G){var Z=Math.atan2(G,V),te=Math.sqrt(V*V+G*G)/2,J=Z-f.util.degreesToRadians(w),oe=Math.PI/2-Z-f.util.degreesToRadians(w);T=te*f.util.cos(J),S=te*f.util.sin(J),M=te*f.util.cos(oe),O=te*f.util.sin(oe)}else{var Me=V&&G?V:b;te=Me*.7071067812;var J=f.util.degreesToRadians(45-w);T=M=te*f.util.cos(J),S=O=te*f.util.sin(J)}return{tl:{x:x-O,y:v-M},tr:{x:x+T,y:v-S},bl:{x:x-T,y:v+S},br:{x:x+O,y:v+M}}},render:function(w,b,x,v,C){switch(v=v||{},v.cornerStyle||C.cornerStyle){case"circle":f.controlsUtils.renderCircleControl.call(this,w,b,x,v,C);break;default:f.controlsUtils.renderSquareControl.call(this,w,b,x,v,C)}}}}(i),function(){function r(x,v){var C=x.getAttribute("style"),T=x.getAttribute("offset")||0,S,M,O,V;if(T=parseFloat(T)/(/%$/.test(T)?100:1),T=T<0?0:T>1?1:T,C){var G=C.split(/\s*;\s*/);for(G[G.length-1]===""&&G.pop(),V=G.length;V--;){var Z=G[V].split(/\s*:\s*/),te=Z[0].trim(),J=Z[1].trim();te==="stop-color"?S=J:te==="stop-opacity"&&(O=J)}}return S||(S=x.getAttribute("stop-color")||"rgb(0,0,0)"),O||(O=x.getAttribute("stop-opacity")),S=new e.Color(S),M=S.getAlpha(),O=isNaN(parseFloat(O))?1:parseFloat(O),O*=M*v,{offset:T,color:S.toRgb(),opacity:O}}function f(x){return{x1:x.getAttribute("x1")||0,y1:x.getAttribute("y1")||0,x2:x.getAttribute("x2")||"100%",y2:x.getAttribute("y2")||0}}function _(x){return{x1:x.getAttribute("fx")||x.getAttribute("cx")||"50%",y1:x.getAttribute("fy")||x.getAttribute("cy")||"50%",r1:0,x2:x.getAttribute("cx")||"50%",y2:x.getAttribute("cy")||"50%",r2:x.getAttribute("r")||"50%"}}var w=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(x){x||(x={}),x.coords||(x.coords={});var v,C=this;Object.keys(x).forEach(function(T){C[T]=x[T]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,v={x1:x.coords.x1||0,y1:x.coords.y1||0,x2:x.coords.x2||0,y2:x.coords.y2||0},this.type==="radial"&&(v.r1=x.coords.r1||0,v.r2=x.coords.r2||0),this.coords=v,this.colorStops=x.colorStops.slice()},addColorStop:function(x){for(var v in x){var C=new e.Color(x[v]);this.colorStops.push({offset:parseFloat(v),color:C.toRgb(),opacity:C.getAlpha()})}return this},toObject:function(x){var v={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,v,x),v},toSVG:function(x,M){var C=w(this.coords,!0),T,S,M=M||{},O,V,G=w(this.colorStops,!0),Z=C.r1>C.r2,te=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),J=-this.offsetX,oe=-this.offsetY,Me=!!M.additionalTransform,Fe=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(G.sort(function(et,nt){return et.offset-nt.offset}),Fe==="objectBoundingBox"?(J/=x.width,oe/=x.height):(J+=x.width/2,oe+=x.height/2),x.type==="path"&&this.gradientUnits!=="percentage"&&(J-=x.pathOffset.x,oe-=x.pathOffset.y),te[4]-=J,te[5]-=oe,V='id="SVGID_'+this.id+'" gradientUnits="'+Fe+'"',V+=' gradientTransform="'+(Me?M.additionalTransform+" ":"")+e.util.matrixToSVG(te)+'" ',this.type==="linear"?O=["<linearGradient ",V,' x1="',C.x1,'" y1="',C.y1,'" x2="',C.x2,'" y2="',C.y2,`">
`]:this.type==="radial"&&(O=["<radialGradient ",V,' cx="',Z?C.x1:C.x2,'" cy="',Z?C.y1:C.y2,'" r="',Z?C.r1:C.r2,'" fx="',Z?C.x2:C.x1,'" fy="',Z?C.y2:C.y1,`">
`]),this.type==="radial"){if(Z)for(G=G.concat(),G.reverse(),T=0,S=G.length;T<S;T++)G[T].offset=1-G[T].offset;var pe=Math.min(C.r1,C.r2);if(pe>0){var Ie=Math.max(C.r1,C.r2),Se=pe/Ie;for(T=0,S=G.length;T<S;T++)G[T].offset+=Se*(1-G[T].offset)}}for(T=0,S=G.length;T<S;T++){var me=G[T];O.push("<stop ",'offset="',me.offset*100+"%",'" style="stop-color:',me.color,typeof me.opacity<"u"?";stop-opacity: "+me.opacity:";",`"/>
`)}return O.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),O.join("")},toLive:function(x){var v,C=e.util.object.clone(this.coords),T,S;if(!!this.type){for(this.type==="linear"?v=x.createLinearGradient(C.x1,C.y1,C.x2,C.y2):this.type==="radial"&&(v=x.createRadialGradient(C.x1,C.y1,C.r1,C.x2,C.y2,C.r2)),T=0,S=this.colorStops.length;T<S;T++){var M=this.colorStops[T].color,O=this.colorStops[T].opacity,V=this.colorStops[T].offset;typeof O<"u"&&(M=new e.Color(M).setAlpha(O).toRgba()),v.addColorStop(V,M)}return v}}}),e.util.object.extend(e.Gradient,{fromElement:function(x,v,C,T){var S=parseFloat(C)/(/%$/.test(C)?100:1);S=S<0?0:S>1?1:S,isNaN(S)&&(S=1);var M=x.getElementsByTagName("stop"),O,V=x.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",G=x.getAttribute("gradientTransform")||"",Z=[],te,J,oe=0,Me=0,Fe;for(x.nodeName==="linearGradient"||x.nodeName==="LINEARGRADIENT"?(O="linear",te=f(x)):(O="radial",te=_(x)),J=M.length;J--;)Z.push(r(M[J],S));Fe=e.parseTransformAttribute(G),b(v,te,T,V),V==="pixels"&&(oe=-v.left,Me=-v.top);var pe=new e.Gradient({id:x.getAttribute("id"),type:O,coords:te,colorStops:Z,gradientUnits:V,gradientTransform:Fe,offsetX:oe,offsetY:Me});return pe}});function b(x,v,C,T){var S,M;Object.keys(v).forEach(function(O){S=v[O],S==="Infinity"?M=1:S==="-Infinity"?M=0:(M=parseFloat(v[O],10),typeof S=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(S)&&(M*=.01,T==="pixels"&&((O==="x1"||O==="x2"||O==="r2")&&(M*=C.viewBoxWidth||C.width),(O==="y1"||O==="y2")&&(M*=C.viewBoxHeight||C.height)))),v[O]=M})}}(),function(){var r=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(f,_){if(f||(f={}),this.id=e.Object.__uid++,this.setOptions(f),!f.source||f.source&&typeof f.source!="string"){_&&_(this);return}else{var w=this;this.source=e.util.createImage(),e.util.loadImage(f.source,function(b,x){w.source=b,_&&_(w,x)},null,this.crossOrigin)}},toObject:function(f){var _=e.Object.NUM_FRACTION_DIGITS,w,b;return typeof this.source.src=="string"?w=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(w=this.source.toDataURL()),b={type:"pattern",source:w,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:r(this.offsetX,_),offsetY:r(this.offsetY,_),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,b,f),b},toSVG:function(f){var _=typeof this.source=="function"?this.source():this.source,w=_.width/f.width,b=_.height/f.height,x=this.offsetX/f.width,v=this.offsetY/f.height,C="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(b=1,v&&(b+=Math.abs(v))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(w=1,x&&(w+=Math.abs(x))),_.src?C=_.src:_.toDataURL&&(C=_.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+x+'" y="'+v+'" width="'+w+'" height="'+b+`">
<image x="0" y="0" width="`+_.width+'" height="'+_.height+'" xlink:href="'+C+`"></image>
</pattern>
`},setOptions:function(f){for(var _ in f)this[_]=f[_]},toLive:function(f){var _=this.source;return!_||typeof _.src<"u"&&(!_.complete||_.naturalWidth===0||_.naturalHeight===0)?"":f.createPattern(_,this.repeat)}})}(),function(r){var f=r.fabric||(r.fabric={}),_=f.util.toFixed;if(f.Shadow){f.warn("fabric.Shadow is already defined.");return}f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(w){typeof w=="string"&&(w=this._parseShadow(w));for(var b in w)this[b]=w[b];this.id=f.Object.__uid++},_parseShadow:function(w){var b=w.trim(),x=f.Shadow.reOffsetsAndBlur.exec(b)||[],v=b.replace(f.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:v.trim(),offsetX:parseFloat(x[1],10)||0,offsetY:parseFloat(x[2],10)||0,blur:parseFloat(x[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(w){var b=40,x=40,v=f.Object.NUM_FRACTION_DIGITS,C=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-w.angle)),T=20,S=new f.Color(this.color);return w.width&&w.height&&(b=_((Math.abs(C.x)+this.blur)/w.width,v)*100+T,x=_((Math.abs(C.y)+this.blur)/w.height,v)*100+T),w.flipX&&(C.x*=-1),w.flipY&&(C.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+x+'%" height="'+(100+2*x)+'%" x="-'+b+'%" width="'+(100+2*b)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+_(this.blur?this.blur/2:0,v)+`"></feGaussianBlur>
	<feOffset dx="`+_(C.x,v)+'" dy="'+_(C.y,v)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+S.toRgb()+'" flood-opacity="'+S.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var w={},b=f.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(x){this[x]!==b[x]&&(w[x]=this[x])},this),w}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(i),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var r=e.util.object.extend,f=e.util.getElementOffset,_=e.util.removeFromArray,w=e.util.toFixed,b=e.util.transformPoint,x=e.util.invertTransform,v=e.util.getNodeCanvas,C=e.util.createCanvasElement,T=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(S,M){M||(M={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(S,M)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(S,M){var O=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(S),this._initOptions(M),this.interactive||this._initRetinaScaling(),M.overlayImage&&this.setOverlayImage(M.overlayImage,O),M.backgroundImage&&this.setBackgroundImage(M.backgroundImage,O),M.backgroundColor&&this.setBackgroundColor(M.backgroundColor,O),M.overlayColor&&this.setOverlayColor(M.overlayColor,O),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var S=e.devicePixelRatio;this.__initRetinaScaling(S,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(S,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(S,M,O){M.setAttribute("width",this.width*S),M.setAttribute("height",this.height*S),O.scale(S,S)},calcOffset:function(){return this._offset=f(this.lowerCanvasEl),this},setOverlayImage:function(S,M,O){return this.__setBgOverlayImage("overlayImage",S,M,O)},setBackgroundImage:function(S,M,O){return this.__setBgOverlayImage("backgroundImage",S,M,O)},setOverlayColor:function(S,M){return this.__setBgOverlayColor("overlayColor",S,M)},setBackgroundColor:function(S,M){return this.__setBgOverlayColor("backgroundColor",S,M)},__setBgOverlayImage:function(S,M,O,V){return typeof M=="string"?e.util.loadImage(M,function(G,Z){if(G){var te=new e.Image(G,V);this[S]=te,te.canvas=this}O&&O(G,Z)},this,V&&V.crossOrigin):(V&&M.setOptions(V),this[S]=M,M&&(M.canvas=this),O&&O(M,!1)),this},__setBgOverlayColor:function(S,M,O){return this[S]=M,this._initGradient(M,S),this._initPattern(M,S,O),this},_createCanvasElement:function(){var S=C();if(!S||(S.style||(S.style={}),typeof S.getContext>"u"))throw T;return S},_initOptions:function(S){var M=this.lowerCanvasEl;this._setOptions(S),this.width=this.width||parseInt(M.width,10)||0,this.height=this.height||parseInt(M.height,10)||0,this.lowerCanvasEl.style&&(M.width=this.width,M.height=this.height,M.style.width=this.width+"px",M.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(S){S&&S.getContext?this.lowerCanvasEl=S:this.lowerCanvasEl=e.util.getById(S)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(S,M){return this.setDimensions({width:S},M)},setHeight:function(S,M){return this.setDimensions({height:S},M)},setDimensions:function(S,M){var O;M=M||{};for(var V in S)O=S[V],M.cssOnly||(this._setBackstoreDimension(V,S[V]),O+="px",this.hasLostContext=!0),M.backstoreOnly||this._setCssDimension(V,O);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),M.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(S,M){return this.lowerCanvasEl[S]=M,this.upperCanvasEl&&(this.upperCanvasEl[S]=M),this.cacheCanvasEl&&(this.cacheCanvasEl[S]=M),this[S]=M,this},_setCssDimension:function(S,M){return this.lowerCanvasEl.style[S]=M,this.upperCanvasEl&&(this.upperCanvasEl.style[S]=M),this.wrapperEl&&(this.wrapperEl.style[S]=M),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(S){var M=this._activeObject,O=this.backgroundImage,V=this.overlayImage,G,Z,te;for(this.viewportTransform=S,Z=0,te=this._objects.length;Z<te;Z++)G=this._objects[Z],G.group||G.setCoords(!0);return M&&M.setCoords(),O&&O.setCoords(!0),V&&V.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(S,M){var O=S,V=this.viewportTransform.slice(0);S=b(S,x(this.viewportTransform)),V[0]=M,V[3]=M;var G=b(S,V);return V[4]+=O.x-G.x,V[5]+=O.y-G.y,this.setViewportTransform(V)},setZoom:function(S){return this.zoomToPoint(new e.Point(0,0),S),this},absolutePan:function(S){var M=this.viewportTransform.slice(0);return M[4]=-S.x,M[5]=-S.y,this.setViewportTransform(M)},relativePan:function(S){return this.absolutePan(new e.Point(-S.x-this.viewportTransform[4],-S.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(S){this.stateful&&S.setupState(),S._set("canvas",this),S.setCoords(),this.fire("object:added",{target:S}),S.fire("added")},_onObjectRemoved:function(S){this.fire("object:removed",{target:S}),S.fire("removed"),delete S.canvas},clearContext:function(S){return S.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var S=this.contextContainer;return this.renderCanvas(S,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var S={},M=this.width,O=this.height,V=x(this.viewportTransform);return S.tl=b({x:0,y:0},V),S.br=b({x:M,y:O},V),S.tr=new e.Point(S.br.x,S.tl.y),S.bl=new e.Point(S.tl.x,S.br.y),this.vptCoords=S,S},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(S,M){var O=this.viewportTransform,V=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(S),e.util.setImageSmoothing(S,this.imageSmoothingEnabled),this.fire("before:render",{ctx:S}),this._renderBackground(S),S.save(),S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._renderObjects(S,M),S.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),V&&(V.canvas=this,V.shouldCache(),V._transformDone=!0,V.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(S)),this._renderOverlay(S),this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),this.fire("after:render",{ctx:S})},drawClipPathOnCanvas:function(S){var M=this.viewportTransform,O=this.clipPath;S.save(),S.transform(M[0],M[1],M[2],M[3],M[4],M[5]),S.globalCompositeOperation="destination-in",O.transform(S),S.scale(1/O.zoomX,1/O.zoomY),S.drawImage(O._cacheCanvas,-O.cacheTranslationX,-O.cacheTranslationY),S.restore()},_renderObjects:function(S,M){var O,V;for(O=0,V=M.length;O<V;++O)M[O]&&M[O].render(S)},_renderBackgroundOrOverlay:function(S,M){var O=this[M+"Color"],V=this[M+"Image"],G=this.viewportTransform,Z=this[M+"Vpt"];if(!(!O&&!V)){if(O){S.save(),S.beginPath(),S.moveTo(0,0),S.lineTo(this.width,0),S.lineTo(this.width,this.height),S.lineTo(0,this.height),S.closePath(),S.fillStyle=O.toLive?O.toLive(S,this):O,Z&&S.transform(G[0],G[1],G[2],G[3],G[4],G[5]),S.transform(1,0,0,1,O.offsetX||0,O.offsetY||0);var te=O.gradientTransform||O.patternTransform;te&&S.transform(te[0],te[1],te[2],te[3],te[4],te[5]),S.fill(),S.restore()}V&&(S.save(),Z&&S.transform(G[0],G[1],G[2],G[3],G[4],G[5]),V.render(S),S.restore())}},_renderBackground:function(S){this._renderBackgroundOrOverlay(S,"background")},_renderOverlay:function(S){this._renderBackgroundOrOverlay(S,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(S){return this._centerObject(S,new e.Point(this.getCenterPoint().x,S.getCenterPoint().y))},centerObjectV:function(S){return this._centerObject(S,new e.Point(S.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(S){var M=this.getCenterPoint();return this._centerObject(S,M)},viewportCenterObject:function(S){var M=this.getVpCenter();return this._centerObject(S,M)},viewportCenterObjectH:function(S){var M=this.getVpCenter();return this._centerObject(S,new e.Point(M.x,S.getCenterPoint().y)),this},viewportCenterObjectV:function(S){var M=this.getVpCenter();return this._centerObject(S,new e.Point(S.getCenterPoint().x,M.y))},getVpCenter:function(){var S=this.getCenterPoint(),M=x(this.viewportTransform);return b(S,M)},_centerObject:function(S,M){return S.setPositionByOrigin(M,"center","center"),S.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(S){return this.toDatalessObject(S)},toObject:function(S){return this._toObjectMethod("toObject",S)},toDatalessObject:function(S){return this._toObjectMethod("toDatalessObject",S)},_toObjectMethod:function(S,M){var O=this.clipPath,V={version:e.version,objects:this._toObjects(S,M)};return O&&!O.excludeFromExport&&(V.clipPath=this._toObject(this.clipPath,S,M)),r(V,this.__serializeBgOverlay(S,M)),e.util.populateWithProperties(this,V,M),V},_toObjects:function(S,M){return this._objects.filter(function(O){return!O.excludeFromExport}).map(function(O){return this._toObject(O,S,M)},this)},_toObject:function(S,M,O){var V;this.includeDefaultValues||(V=S.includeDefaultValues,S.includeDefaultValues=!1);var G=S[M](O);return this.includeDefaultValues||(S.includeDefaultValues=V),G},__serializeBgOverlay:function(S,M){var O={},V=this.backgroundImage,G=this.overlayImage,Z=this.backgroundColor,te=this.overlayColor;return Z&&Z.toObject?Z.excludeFromExport||(O.background=Z.toObject(M)):Z&&(O.background=Z),te&&te.toObject?te.excludeFromExport||(O.overlay=te.toObject(M)):te&&(O.overlay=te),V&&!V.excludeFromExport&&(O.backgroundImage=this._toObject(V,S,M)),G&&!G.excludeFromExport&&(O.overlayImage=this._toObject(G,S,M)),O},svgViewportTransformation:!0,toSVG:function(S,M){S||(S={}),S.reviver=M;var O=[];return this._setSVGPreamble(O,S),this._setSVGHeader(O,S),this.clipPath&&O.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(O,"background"),this._setSVGBgOverlayImage(O,"backgroundImage",M),this._setSVGObjects(O,M),this.clipPath&&O.push(`</g>
`),this._setSVGBgOverlayColor(O,"overlay"),this._setSVGBgOverlayImage(O,"overlayImage",M),O.push("</svg>"),O.join("")},_setSVGPreamble:function(S,M){M.suppressPreamble||S.push('<?xml version="1.0" encoding="',M.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(S,M){var O=M.width||this.width,V=M.height||this.height,G,Z='viewBox="0 0 '+this.width+" "+this.height+'" ',te=e.Object.NUM_FRACTION_DIGITS;M.viewBox?Z='viewBox="'+M.viewBox.x+" "+M.viewBox.y+" "+M.viewBox.width+" "+M.viewBox.height+'" ':this.svgViewportTransformation&&(G=this.viewportTransform,Z='viewBox="'+w(-G[4]/G[0],te)+" "+w(-G[5]/G[3],te)+" "+w(this.width/G[0],te)+" "+w(this.height/G[3],te)+'" '),S.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',O,'" ','height="',V,'" ',Z,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(M),`</defs>
`)},createSVGClipPathMarkup:function(S){var M=this.clipPath;return M?(M.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+M.clipPathId+`" >
`+this.clipPath.toClipPathSVG(S.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var S=this,M=["background","overlay"].map(function(O){var V=S[O+"Color"];if(V&&V.toLive){var G=S[O+"Vpt"],Z=S.viewportTransform,te={width:S.width/(G?Z[0]:1),height:S.height/(G?Z[3]:1)};return V.toSVG(te,{additionalTransform:G?e.util.matrixToSVG(Z):""})}});return M.join("")},createSVGFontFacesMarkup:function(){var S="",M={},O,V,G,Z,te,J,oe,Me,Fe,pe=e.fontPaths,Ie=[];for(this._objects.forEach(function me(et){Ie.push(et),et._objects&&et._objects.forEach(me)}),Me=0,Fe=Ie.length;Me<Fe;Me++)if(O=Ie[Me],V=O.fontFamily,!(O.type.indexOf("text")===-1||M[V]||!pe[V])&&(M[V]=!0,!!O.styles)){G=O.styles;for(te in G){Z=G[te];for(oe in Z)J=Z[oe],V=J.fontFamily,!M[V]&&pe[V]&&(M[V]=!0)}}for(var Se in M)S+=[`		@font-face {
`,"			font-family: '",Se,`';
`,"			src: url('",pe[Se],`');
`,`		}
`].join("");return S&&(S=['	<style type="text/css">',`<![CDATA[
`,S,"]]>",`</style>
`].join("")),S},_setSVGObjects:function(S,M){var O,V,G,Z=this._objects;for(V=0,G=Z.length;V<G;V++)O=Z[V],!O.excludeFromExport&&this._setSVGObject(S,O,M)},_setSVGObject:function(S,M,O){S.push(M.toSVG(O))},_setSVGBgOverlayImage:function(S,M,O){this[M]&&!this[M].excludeFromExport&&this[M].toSVG&&S.push(this[M].toSVG(O))},_setSVGBgOverlayColor:function(S,M){var O=this[M+"Color"],V=this.viewportTransform,G=this.width,Z=this.height;if(!!O)if(O.toLive){var te=O.repeat,J=e.util.invertTransform(V),oe=this[M+"Vpt"],Me=oe?e.util.matrixToSVG(J):"";S.push('<rect transform="'+Me+" translate(",G/2,",",Z/2,')"',' x="',O.offsetX-G/2,'" y="',O.offsetY-Z/2,'" ','width="',te==="repeat-y"||te==="no-repeat"?O.source.width:G,'" height="',te==="repeat-x"||te==="no-repeat"?O.source.height:Z,'" fill="url(#SVGID_'+O.id+')"',`></rect>
`)}else S.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',O,'"',`></rect>
`)},sendToBack:function(S){if(!S)return this;var M=this._activeObject,O,V,G;if(S===M&&S.type==="activeSelection")for(G=M._objects,O=G.length;O--;)V=G[O],_(this._objects,V),this._objects.unshift(V);else _(this._objects,S),this._objects.unshift(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(S){if(!S)return this;var M=this._activeObject,O,V,G;if(S===M&&S.type==="activeSelection")for(G=M._objects,O=0;O<G.length;O++)V=G[O],_(this._objects,V),this._objects.push(V);else _(this._objects,S),this._objects.push(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(S,M){if(!S)return this;var O=this._activeObject,V,G,Z,te,J,oe=0;if(S===O&&S.type==="activeSelection")for(J=O._objects,V=0;V<J.length;V++)G=J[V],Z=this._objects.indexOf(G),Z>0+oe&&(te=Z-1,_(this._objects,G),this._objects.splice(te,0,G)),oe++;else Z=this._objects.indexOf(S),Z!==0&&(te=this._findNewLowerIndex(S,Z,M),_(this._objects,S),this._objects.splice(te,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(S,M,O){var V,G;if(O)for(V=M,G=M-1;G>=0;--G){var Z=S.intersectsWithObject(this._objects[G])||S.isContainedWithinObject(this._objects[G])||this._objects[G].isContainedWithinObject(S);if(Z){V=G;break}}else V=M-1;return V},bringForward:function(S,M){if(!S)return this;var O=this._activeObject,V,G,Z,te,J,oe=0;if(S===O&&S.type==="activeSelection")for(J=O._objects,V=J.length;V--;)G=J[V],Z=this._objects.indexOf(G),Z<this._objects.length-1-oe&&(te=Z+1,_(this._objects,G),this._objects.splice(te,0,G)),oe++;else Z=this._objects.indexOf(S),Z!==this._objects.length-1&&(te=this._findNewUpperIndex(S,Z,M),_(this._objects,S),this._objects.splice(te,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(S,M,O){var V,G,Z;if(O)for(V=M,G=M+1,Z=this._objects.length;G<Z;++G){var te=S.intersectsWithObject(this._objects[G])||S.isContainedWithinObject(this._objects[G])||this._objects[G].isContainedWithinObject(S);if(te){V=G;break}}else V=M+1;return V},moveTo:function(S,M){return _(this._objects,S),this._objects.splice(M,0,S),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(S){S.dispose&&S.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),r(e.StaticCanvas.prototype,e.Observable),r(e.StaticCanvas.prototype,e.Collection),r(e.StaticCanvas.prototype,e.DataURLExporter),r(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(S){var M=C();if(!M||!M.getContext)return null;var O=M.getContext("2d");if(!O)return null;switch(S){case"setLineDash":return typeof O.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var S=v(this.lowerCanvasEl);return S&&S.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(S){var M=v(this.lowerCanvasEl);return M&&M.createJPEGStream(S)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(r){r.strokeStyle=this.color,r.lineWidth=this.width,r.lineCap=this.strokeLineCap,r.miterLimit=this.strokeMiterLimit,r.lineJoin=this.strokeLineJoin,r.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(r){var f=this.canvas.viewportTransform;r.save(),r.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(!!this.shadow){var r=this.canvas,f=this.shadow,_=r.contextTop,w=r.getZoom();r&&r._isRetinaScaling()&&(w*=e.devicePixelRatio),_.shadowColor=f.color,_.shadowBlur=f.blur*w,_.shadowOffsetX=f.offsetX*w,_.shadowOffsetY=f.offsetY*w}},needsFullRender:function(){var r=new e.Color(this.color);return r.getAlpha()<1||!!this.shadow},_resetShadow:function(){var r=this.canvas.contextTop;r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0},_isOutSideCanvas:function(r){return r.x<0||r.x>this.canvas.getWidth()||r.y<0||r.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(r){this.canvas=r,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(r,f,_){var w=f.midPointFrom(_);return r.quadraticCurveTo(f.x,f.y,w.x,w.y),w},onMouseDown:function(r,f){!this.canvas._isMainEvent(f.e)||(this.drawStraightLine=f.e[this.straightLineKey],this._prepareForDrawing(r),this._captureDrawingPath(r),this._render())},onMouseMove:function(r,f){if(!!this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r))&&this._captureDrawingPath(r)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var _=this._points,w=_.length,b=this.canvas.contextTop;this._saveAndTransform(b),this.oldEnd&&(b.beginPath(),b.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(b,_[w-2],_[w-1],!0),b.stroke(),b.restore()}},onMouseUp:function(r){return this.canvas._isMainEvent(r.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(r){var f=new e.Point(r.x,r.y);this._reset(),this._addPoint(f),this.canvas.contextTop.moveTo(f.x,f.y)},_addPoint:function(r){return this._points.length>1&&r.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(r),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(r){var f=new e.Point(r.x,r.y);return this._addPoint(f)},_render:function(r){var f,_,w=this._points[0],b=this._points[1];if(r=r||this.canvas.contextTop,this._saveAndTransform(r),r.beginPath(),this._points.length===2&&w.x===b.x&&w.y===b.y){var x=this.width/1e3;w=new e.Point(w.x,w.y),b=new e.Point(b.x,b.y),w.x-=x,b.x+=x}for(r.moveTo(w.x,w.y),f=1,_=this._points.length;f<_;f++)this._drawSegment(r,w,b),w=this._points[f],b=this._points[f+1];r.lineTo(w.x,w.y),r.stroke(),r.restore()},convertPointsToSVGPath:function(r){var f=this.width/1e3;return e.util.getSmoothPathFromPoints(r,f)},_isEmptySVGPath:function(r){var f=e.util.joinPath(r);return f==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(r){var f=new e.Path(r,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,f.shadow=new e.Shadow(this.shadow)),f},decimatePoints:function(r,f){if(r.length<=2)return r;var _=this.canvas.getZoom(),w=Math.pow(f/_,2),b,x=r.length-1,v=r[0],C=[v],T;for(b=1;b<x-1;b++)T=Math.pow(v.x-r[b].x,2)+Math.pow(v.y-r[b].y,2),T>=w&&(v=r[b],C.push(v));return C.push(r[x]),C},_finalizeAndAddPath:function(){var r=this.canvas.contextTop;r.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var f=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(f)){this.canvas.requestRenderAll();return}var _=this.createPath(f);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:_}),this.canvas.add(_),this.canvas.requestRenderAll(),_.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:_})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(r){this.canvas=r,this.points=[]},drawDot:function(r){var f=this.addPoint(r),_=this.canvas.contextTop;this._saveAndTransform(_),this.dot(_,f),_.restore()},dot:function(r,f){r.fillStyle=f.fill,r.beginPath(),r.arc(f.x,f.y,f.radius,0,Math.PI*2,!1),r.closePath(),r.fill()},onMouseDown:function(r){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(r)},_render:function(){var r=this.canvas.contextTop,f,_,w=this.points;for(this._saveAndTransform(r),f=0,_=w.length;f<_;f++)this.dot(r,w[f]);r.restore()},onMouseMove:function(r){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(r),this._render()):this.drawDot(r))},onMouseUp:function(){var r=this.canvas.renderOnAddRemove,f,_;this.canvas.renderOnAddRemove=!1;var w=[];for(f=0,_=this.points.length;f<_;f++){var b=this.points[f],x=new e.Circle({radius:b.radius,left:b.x,top:b.y,originX:"center",originY:"center",fill:b.fill});this.shadow&&(x.shadow=new e.Shadow(this.shadow)),w.push(x)}var v=new e.Group(w);v.canvas=this.canvas,this.canvas.fire("before:path:created",{path:v}),this.canvas.add(v),this.canvas.fire("path:created",{path:v}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},addPoint:function(r){var f=new e.Point(r.x,r.y),_=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,w=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return f.radius=_,f.fill=w,this.points.push(f),f}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(r){this.canvas=r,this.sprayChunks=[]},onMouseDown:function(r){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(r),this.render(this.sprayChunkPoints)},onMouseMove:function(r){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r)||(this.addSprayChunk(r),this.render(this.sprayChunkPoints))},onMouseUp:function(){var r=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var f=[],_=0,w=this.sprayChunks.length;_<w;_++)for(var b=this.sprayChunks[_],x=0,v=b.length;x<v;x++){var C=new e.Rect({width:b[x].width,height:b[x].width,left:b[x].x+1,top:b[x].y+1,originX:"center",originY:"center",fill:this.color});f.push(C)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));var T=new e.Group(f);this.shadow&&T.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:T}),this.canvas.add(T),this.canvas.fire("path:created",{path:T}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},_getOptimizedRects:function(r){var f={},_,w,b;for(w=0,b=r.length;w<b;w++)_=r[w].left+""+r[w].top,f[_]||(f[_]=r[w]);var x=[];for(_ in f)x.push(f[_]);return x},render:function(r){var f=this.canvas.contextTop,_,w;for(f.fillStyle=this.color,this._saveAndTransform(f),_=0,w=r.length;_<w;_++){var b=r[_];typeof b.opacity<"u"&&(f.globalAlpha=b.opacity),f.fillRect(b.x,b.y,b.width,b.width)}f.restore()},_render:function(){var r=this.canvas.contextTop,f,_;for(r.fillStyle=this.color,this._saveAndTransform(r),f=0,_=this.sprayChunks.length;f<_;f++)this.render(this.sprayChunks[f]);r.restore()},addSprayChunk:function(r){this.sprayChunkPoints=[];var f,_,w,b=this.width/2,x;for(x=0;x<this.density;x++){f=e.util.getRandomInt(r.x-b,r.x+b),_=e.util.getRandomInt(r.y-b,r.y+b),this.dotWidthVariance?w=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):w=this.dotWidth;var v=new e.Point(f,_);v.width=w,this.randomOpacity&&(v.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(v)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var r=20,f=5,_=e.util.createCanvasElement(),w=_.getContext("2d");return _.width=_.height=r+f,w.fillStyle=this.color,w.beginPath(),w.arc(r/2,r/2,r/2,0,Math.PI*2,!1),w.closePath(),w.fill(),_},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(r){return r.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(r){this.callSuper("_setBrushStyles",r),r.strokeStyle=this.getPattern(r)},createPath:function(r){var f=this.callSuper("createPath",r),_=f._getLeftTopCoords().scalarAdd(f.strokeWidth/2);return f.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-_.x,offsetY:-_.y}),f}}),function(){var r=e.util.getPointer,f=e.util.degreesToRadians,_=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(b,x){x||(x={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(b,x),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var b=this.getActiveObjects(),x,v,C;if(b.length>0&&!this.preserveObjectStacking){v=[],C=[];for(var T=0,S=this._objects.length;T<S;T++)x=this._objects[T],b.indexOf(x)===-1?v.push(x):C.push(x);b.length>1&&(this._activeObject._objects=C),v.push.apply(v,C)}else v=this._objects;return v},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var b=this.contextContainer;return this.renderCanvas(b,this._chooseObjectsToRender()),this},renderTopLayer:function(b){b.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(b),this.contextTopDirty=!0),b.restore()},renderTop:function(){var b=this.contextTop;return this.clearContext(b),this.renderTopLayer(b),this.fire("after:render"),this},_normalizePointer:function(b,x){var v=b.calcTransformMatrix(),C=e.util.invertTransform(v),T=this.restorePointerVpt(x);return e.util.transformPoint(T,C)},isTargetTransparent:function(b,x,v){if(b.shouldCache()&&b._cacheCanvas&&b!==this._activeObject){var C=this._normalizePointer(b,{x,y:v}),T=Math.max(b.cacheTranslationX+C.x*b.zoomX,0),S=Math.max(b.cacheTranslationY+C.y*b.zoomY,0),G=e.util.isTransparent(b._cacheContext,Math.round(T),Math.round(S),this.targetFindTolerance);return G}var M=this.contextCache,O=b.selectionBackgroundColor,V=this.viewportTransform;b.selectionBackgroundColor="",this.clearContext(M),M.save(),M.transform(V[0],V[1],V[2],V[3],V[4],V[5]),b.render(M),M.restore(),b.selectionBackgroundColor=O;var G=e.util.isTransparent(M,x,v,this.targetFindTolerance);return G},_isSelectionKeyPressed:function(b){var x=!1;return Array.isArray(this.selectionKey)?x=!!this.selectionKey.find(function(v){return b[v]===!0}):x=b[this.selectionKey],x},_shouldClearSelection:function(b,x){var v=this.getActiveObjects(),C=this._activeObject;return!x||x&&C&&v.length>1&&v.indexOf(x)===-1&&C!==x&&!this._isSelectionKeyPressed(b)||x&&!x.evented||x&&!x.selectable&&C&&C!==x},_shouldCenterTransform:function(b,x,v){if(!!b){var C;return x==="scale"||x==="scaleX"||x==="scaleY"||x==="resizing"?C=this.centeredScaling||b.centeredScaling:x==="rotate"&&(C=this.centeredRotation||b.centeredRotation),C?!v:v}},_getOriginFromCorner:function(b,x){var v={x:b.originX,y:b.originY};return x==="ml"||x==="tl"||x==="bl"?v.x="right":(x==="mr"||x==="tr"||x==="br")&&(v.x="left"),x==="tl"||x==="mt"||x==="tr"?v.y="bottom":(x==="bl"||x==="mb"||x==="br")&&(v.y="top"),v},_getActionFromCorner:function(b,x,v,C){if(!x||!b)return"drag";var T=C.controls[x];return T.getActionName(v,T,C)},_setupCurrentTransform:function(b,x,v){if(!!x){var C=this.getPointer(b),T=x.__corner,S=x.controls[T],M=v&&T?S.getActionHandler(b,x,S):e.controlsUtils.dragHandler,O=this._getActionFromCorner(v,T,b,x),V=this._getOriginFromCorner(x,T),G=b[this.centeredKey],Z={target:x,action:O,actionHandler:M,corner:T,scaleX:x.scaleX,scaleY:x.scaleY,skewX:x.skewX,skewY:x.skewY,offsetX:C.x-x.left,offsetY:C.y-x.top,originX:V.x,originY:V.y,ex:C.x,ey:C.y,lastX:C.x,lastY:C.y,theta:f(x.angle),width:x.width*x.scaleX,shiftKey:b.shiftKey,altKey:G,original:e.util.saveObjectTransform(x)};this._shouldCenterTransform(x,O,G)&&(Z.originX="center",Z.originY="center"),Z.original.originX=V.x,Z.original.originY=V.y,this._currentTransform=Z,this._beforeTransform(b)}},setCursor:function(b){this.upperCanvasEl.style.cursor=b},_drawSelection:function(b){var x=this._groupSelector,v=new e.Point(x.ex,x.ey),C=e.util.transformPoint(v,this.viewportTransform),T=new e.Point(x.ex+x.left,x.ey+x.top),S=e.util.transformPoint(T,this.viewportTransform),M=Math.min(C.x,S.x),O=Math.min(C.y,S.y),V=Math.max(C.x,S.x),G=Math.max(C.y,S.y),Z=this.selectionLineWidth/2;this.selectionColor&&(b.fillStyle=this.selectionColor,b.fillRect(M,O,V-M,G-O)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(b.lineWidth=this.selectionLineWidth,b.strokeStyle=this.selectionBorderColor,M+=Z,O+=Z,V-=Z,G-=Z,e.Object.prototype._setLineDash.call(this,b,this.selectionDashArray),b.strokeRect(M,O,V-M,G-O))},findTarget:function(b,x){if(!this.skipTargetFind){var v=!0,C=this.getPointer(b,v),T=this._activeObject,S=this.getActiveObjects(),M,O,V=_(b),G=S.length>1&&!x||S.length===1;if(this.targets=[],G&&T._findTargetCorner(C,V)||S.length>1&&!x&&T===this._searchPossibleTargets([T],C))return T;if(S.length===1&&T===this._searchPossibleTargets([T],C))if(this.preserveObjectStacking)M=T,O=this.targets,this.targets=[];else return T;var Z=this._searchPossibleTargets(this._objects,C);return b[this.altSelectionKey]&&Z&&M&&Z!==M&&(Z=M,this.targets=O),Z}},_checkTarget:function(b,x,v){if(x&&x.visible&&x.evented&&x.containsPoint(b))if((this.perPixelTargetFind||x.perPixelTargetFind)&&!x.isEditing){var C=this.isTargetTransparent(x,v.x,v.y);if(!C)return!0}else return!0},_searchPossibleTargets:function(b,x){for(var v,C=b.length,T;C--;){var S=b[C],M=S.group?this._normalizePointer(S.group,x):x;if(this._checkTarget(M,S,x)){v=b[C],v.subTargetCheck&&v instanceof e.Group&&(T=this._searchPossibleTargets(v._objects,x),T&&this.targets.push(T));break}}return v},restorePointerVpt:function(b){return e.util.transformPoint(b,e.util.invertTransform(this.viewportTransform))},getPointer:function(b,x){if(this._absolutePointer&&!x)return this._absolutePointer;if(this._pointer&&x)return this._pointer;var v=r(b),C=this.upperCanvasEl,T=C.getBoundingClientRect(),S=T.width||0,M=T.height||0,O;(!S||!M)&&("top"in T&&"bottom"in T&&(M=Math.abs(T.top-T.bottom)),"right"in T&&"left"in T&&(S=Math.abs(T.right-T.left))),this.calcOffset(),v.x=v.x-this._offset.left,v.y=v.y-this._offset.top,x||(v=this.restorePointerVpt(v));var V=this.getRetinaScaling();return V!==1&&(v.x/=V,v.y/=V),S===0||M===0?O={width:1,height:1}:O={width:C.width/S,height:C.height/M},{x:v.x*O.width,y:v.y*O.height}},_createUpperCanvas:function(){var b=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),x=this.lowerCanvasEl,v=this.upperCanvasEl;v?v.className="":(v=this._createCanvasElement(),this.upperCanvasEl=v),e.util.addClass(v,"upper-canvas "+b),this.wrapperEl.appendChild(v),this._copyCanvasStyle(x,v),this._applyCanvasStyle(v),this.contextTop=v.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(b){var x=this.width||b.width,v=this.height||b.height;e.util.setStyle(b,{position:"absolute",width:x+"px",height:v+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),b.width=x,b.height=v,e.util.makeElementUnselectable(b)},_copyCanvasStyle:function(b,x){x.style.cssText=b.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var b=this._activeObject;return b?b.type==="activeSelection"&&b._objects?b._objects.slice(0):[b]:[]},_onObjectRemoved:function(b){b===this._activeObject&&(this.fire("before:selection:cleared",{target:b}),this._discardActiveObject(),this.fire("selection:cleared",{target:b}),b.fire("deselected")),b===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",b)},_fireSelectionEvents:function(b,x){var v=!1,C=this.getActiveObjects(),T=[],S=[];b.forEach(function(M){C.indexOf(M)===-1&&(v=!0,M.fire("deselected",{e:x,target:M}),S.push(M))}),C.forEach(function(M){b.indexOf(M)===-1&&(v=!0,M.fire("selected",{e:x,target:M}),T.push(M))}),b.length>0&&C.length>0?v&&this.fire("selection:updated",{e:x,selected:T,deselected:S}):C.length>0?this.fire("selection:created",{e:x,selected:T}):b.length>0&&this.fire("selection:cleared",{e:x,deselected:S})},setActiveObject:function(b,x){var v=this.getActiveObjects();return this._setActiveObject(b,x),this._fireSelectionEvents(v,x),this},_setActiveObject:function(b,x){return this._activeObject===b||!this._discardActiveObject(x,b)||b.onSelect({e:x})?!1:(this._activeObject=b,!0)},_discardActiveObject:function(b,x){var v=this._activeObject;if(v){if(v.onDeselect({e:b,object:x}))return!1;this._activeObject=null}return!0},discardActiveObject:function(b){var x=this.getActiveObjects(),v=this.getActiveObject();return x.length&&this.fire("before:selection:cleared",{target:v,e:b}),this._discardActiveObject(b),this._fireSelectionEvents(x,b),this},dispose:function(){var b=this.wrapperEl;return this.removeListeners(),b.removeChild(this.upperCanvasEl),b.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(x){e.util.cleanUpJsdomNode(this[x]),this[x]=void 0}.bind(this)),b.parentNode&&b.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(b){var x=this._activeObject;x&&x._renderControls(b)},_toObject:function(b,x,v){var C=this._realizeGroupTransformOnObject(b),T=this.callSuper("_toObject",b,x,v);return this._unwindGroupTransformOnObject(b,C),T},_realizeGroupTransformOnObject:function(b){if(b.group&&b.group.type==="activeSelection"&&this._activeObject===b.group){var x=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],v={};return x.forEach(function(C){v[C]=b[C]}),e.util.addTransformToObject(b,this._activeObject.calcOwnMatrix()),v}else return null},_unwindGroupTransformOnObject:function(b,x){x&&b.set(x)},_setSVGObject:function(b,x,v){var C=this._realizeGroupTransformOnObject(x);this.callSuper("_setSVGObject",b,x,v),this._unwindGroupTransformOnObject(x,C)},setViewportTransform:function(b){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,b)}});for(var w in e.StaticCanvas)w!=="prototype"&&(e.Canvas[w]=e.StaticCanvas[w])}(),function(){var r=e.util.addListener,f=e.util.removeListener,_=3,w=2,b=1,x={passive:!1};function v(C,T){return C.button&&C.button===T-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(r,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(C,T){var S=this.upperCanvasEl,M=this._getEventPrefix();C(e.window,"resize",this._onResize),C(S,M+"down",this._onMouseDown),C(S,M+"move",this._onMouseMove,x),C(S,M+"out",this._onMouseOut),C(S,M+"enter",this._onMouseEnter),C(S,"wheel",this._onMouseWheel),C(S,"contextmenu",this._onContextMenu),C(S,"dblclick",this._onDoubleClick),C(S,"dragover",this._onDragOver),C(S,"dragenter",this._onDragEnter),C(S,"dragleave",this._onDragLeave),C(S,"drop",this._onDrop),this.enablePointerEvents||C(S,"touchstart",this._onTouchStart,x),typeof eventjs<"u"&&T in eventjs&&(eventjs[T](S,"gesture",this._onGesture),eventjs[T](S,"drag",this._onDrag),eventjs[T](S,"orientation",this._onOrientationChange),eventjs[T](S,"shake",this._onShake),eventjs[T](S,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(f,"remove");var C=this._getEventPrefix();f(e.document,C+"up",this._onMouseUp),f(e.document,"touchend",this._onTouchEnd,x),f(e.document,C+"move",this._onMouseMove,x),f(e.document,"touchmove",this._onMouseMove,x)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(C,T){this.__onTransformGesture&&this.__onTransformGesture(C,T)},_onDrag:function(C,T){this.__onDrag&&this.__onDrag(C,T)},_onMouseWheel:function(C){this.__onMouseWheel(C)},_onMouseOut:function(C){var T=this._hoveredTarget;this.fire("mouse:out",{target:T,e:C}),this._hoveredTarget=null,T&&T.fire("mouseout",{e:C});var S=this;this._hoveredTargets.forEach(function(M){S.fire("mouse:out",{target:T,e:C}),M&&T.fire("mouseout",{e:C})}),this._hoveredTargets=[]},_onMouseEnter:function(C){!this._currentTransform&&!this.findTarget(C)&&(this.fire("mouse:over",{target:null,e:C}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(C,T){this.__onOrientationChange&&this.__onOrientationChange(C,T)},_onShake:function(C,T){this.__onShake&&this.__onShake(C,T)},_onLongPress:function(C,T){this.__onLongPress&&this.__onLongPress(C,T)},_onDragOver:function(C){C.preventDefault();var T=this._simpleEventHandler("dragover",C);this._fireEnterLeaveEvents(T,C)},_onDrop:function(C){return this._simpleEventHandler("drop:before",C),this._simpleEventHandler("drop",C)},_onContextMenu:function(C){return this.stopContextMenu&&(C.stopPropagation(),C.preventDefault()),!1},_onDoubleClick:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"dblclick"),this._resetTransformEventData(C)},getPointerId:function(C){var T=C.changedTouches;return T?T[0]&&T[0].identifier:this.enablePointerEvents?C.pointerId:-1},_isMainEvent:function(C){return C.isPrimary===!0?!0:C.isPrimary===!1?!1:C.type==="touchend"&&C.touches.length===0?!0:C.changedTouches?C.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(C){C.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(C)),this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,x),r(e.document,"touchmove",this._onMouseMove,x),f(T,S+"down",this._onMouseDown)},_onMouseDown:function(C){this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();f(T,S+"move",this._onMouseMove,x),r(e.document,S+"up",this._onMouseUp),r(e.document,S+"move",this._onMouseMove,x)},_onTouchEnd:function(C){if(!(C.touches.length>0)){this.__onMouseUp(C),this._resetTransformEventData(),this.mainTouchId=null;var T=this._getEventPrefix();f(e.document,"touchend",this._onTouchEnd,x),f(e.document,"touchmove",this._onMouseMove,x);var S=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){r(S.upperCanvasEl,T+"down",S._onMouseDown),S._willAddMouseDown=0},400)}},_onMouseUp:function(C){this.__onMouseUp(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();this._isMainEvent(C)&&(f(e.document,S+"up",this._onMouseUp),f(e.document,S+"move",this._onMouseMove,x),r(T,S+"move",this._onMouseMove,x))},_onMouseMove:function(C){!this.allowTouchScrolling&&C.preventDefault&&C.preventDefault(),this.__onMouseMove(C)},_onResize:function(){this.calcOffset()},_shouldRender:function(C){var T=this._activeObject;return!!T!=!!C||T&&C&&T!==C?!0:(T&&T.isEditing,!1)},__onMouseUp:function(C){var T,S=this._currentTransform,M=this._groupSelector,O=!1,V=!M||M.left===0&&M.top===0;if(this._cacheTransformEventData(C),T=this._target,this._handleEvent(C,"up:before"),v(C,_)){this.fireRightClick&&this._handleEvent(C,"up",_,V);return}if(v(C,w)){this.fireMiddleClick&&this._handleEvent(C,"up",w,V),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(C);return}if(!!this._isMainEvent(C)){if(S&&(this._finalizeCurrentTransform(C),O=S.actionPerformed),!V){var G=T===this._activeObject;this._maybeGroupObjects(C),O||(O=this._shouldRender(T)||!G&&T===this._activeObject)}var Z,te;if(T){if(Z=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C)),T.selectable&&T!==this._activeObject&&T.activeOn==="up")this.setActiveObject(T,C),O=!0;else{var J=T.controls[Z],oe=J&&J.getMouseUpHandler(C,T,J);oe&&(te=this.getPointer(C),oe(C,S,te.x,te.y))}T.isMoving=!1}if(S&&(S.target!==T||S.corner!==Z)){var Me=S.target&&S.target.controls[S.corner],Fe=Me&&Me.getMouseUpHandler(C,T,J);te=te||this.getPointer(C),Fe&&Fe(C,S,te.x,te.y)}this._setCursorFromEvent(C,T),this._handleEvent(C,"up",b,V),this._groupSelector=null,this._currentTransform=null,T&&(T.__corner=0),O?this.requestRenderAll():V||this.renderTop()}},_simpleEventHandler:function(C,T){var S=this.findTarget(T),M=this.targets,O={e:T,target:S,subTargets:M};if(this.fire(C,O),S&&S.fire(C,O),!M)return S;for(var V=0;V<M.length;V++)M[V].fire(C,O);return S},_handleEvent:function(C,T,S,M){var O=this._target,V=this.targets||[],G={e:C,target:O,subTargets:V,button:S||b,isClick:M||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};T==="up"&&(G.currentTarget=this.findTarget(C),G.currentSubTargets=this.targets),this.fire("mouse:"+T,G),O&&O.fire("mouse"+T,G);for(var Z=0;Z<V.length;Z++)V[Z].fire("mouse"+T,G)},_finalizeCurrentTransform:function(C){var T=this._currentTransform,S=T.target,M={e:C,target:S,transform:T,action:T.action};S._scaling&&(S._scaling=!1),S.setCoords(),(T.actionPerformed||this.stateful&&S.hasStateChanged())&&this._fire("modified",M)},_onMouseDownInDrawingMode:function(C){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(C).requestRenderAll();var T=this.getPointer(C);this.freeDrawingBrush.onMouseDown(T,{e:C,pointer:T}),this._handleEvent(C,"down")},_onMouseMoveInDrawingMode:function(C){if(this._isCurrentlyDrawing){var T=this.getPointer(C);this.freeDrawingBrush.onMouseMove(T,{e:C,pointer:T})}this.setCursor(this.freeDrawingCursor),this._handleEvent(C,"move")},_onMouseUpInDrawingMode:function(C){var T=this.getPointer(C);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:C,pointer:T}),this._handleEvent(C,"up")},__onMouseDown:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"down:before");var T=this._target;if(v(C,_)){this.fireRightClick&&this._handleEvent(C,"down",_);return}if(v(C,w)){this.fireMiddleClick&&this._handleEvent(C,"down",w);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(C);return}if(!!this._isMainEvent(C)&&!this._currentTransform){var S=this._pointer;this._previousPointer=S;var M=this._shouldRender(T),O=this._shouldGroup(C,T);if(this._shouldClearSelection(C,T)?this.discardActiveObject(C):O&&(this._handleGrouping(C,T),T=this._activeObject),this.selection&&(!T||!T.selectable&&!T.isEditing&&T!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),T){var V=T===this._activeObject;T.selectable&&T.activeOn==="down"&&this.setActiveObject(T,C);var G=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C));if(T.__corner=G,T===this._activeObject&&(G||!O)){this._setupCurrentTransform(C,T,V);var Z=T.controls[G],S=this.getPointer(C),te=Z&&Z.getMouseDownHandler(C,T,Z);te&&te(C,this._currentTransform,S.x,S.y)}}this._handleEvent(C,"down"),(M||O)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(C){this._resetTransformEventData(),this._pointer=this.getPointer(C,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(C)||null},_beforeTransform:function(C){var T=this._currentTransform;this.stateful&&T.target.saveState(),this.fire("before:transform",{e:C,transform:T})},__onMouseMove:function(C){this._handleEvent(C,"move:before"),this._cacheTransformEventData(C);var T,S;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(C);return}if(!!this._isMainEvent(C)){var M=this._groupSelector;M?(S=this._absolutePointer,M.left=S.x-M.ex,M.top=S.y-M.ey,this.renderTop()):this._currentTransform?this._transformObject(C):(T=this.findTarget(C)||null,this._setCursorFromEvent(C,T),this._fireOverOutEvents(T,C)),this._handleEvent(C,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(C,T){var S=this._hoveredTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:S,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var G=0;G<V;G++)this.fireSyntheticInOutEvents(O[G],T,{oldTarget:M[G],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=C,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(C,T){var S=this._draggedoverTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:S,evtOut:"dragleave",evtIn:"dragenter"});for(var G=0;G<V;G++)this.fireSyntheticInOutEvents(O[G],T,{oldTarget:M[G],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=C},fireSyntheticInOutEvents:function(C,T,S){var M,O,V=S.oldTarget,G,Z,te=V!==C,J=S.canvasEvtIn,oe=S.canvasEvtOut;te&&(M={e:T,target:C,previousTarget:V},O={e:T,target:V,nextTarget:C}),Z=C&&te,G=V&&te,G&&(oe&&this.fire(oe,O),V.fire(S.evtOut,O)),Z&&(J&&this.fire(J,M),C.fire(S.evtIn,M))},__onMouseWheel:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"wheel"),this._resetTransformEventData()},_transformObject:function(C){var T=this.getPointer(C),S=this._currentTransform;S.reset=!1,S.shiftKey=C.shiftKey,S.altKey=C[this.centeredKey],this._performTransformAction(C,S,T),S.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(C,T,S){var M=S.x,O=S.y,V=T.action,G=!1,Z=T.actionHandler;Z&&(G=Z(C,T,M,O)),V==="drag"&&G&&(T.target.isMoving=!0,this.setCursor(T.target.moveCursor||this.moveCursor)),T.actionPerformed=T.actionPerformed||G},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(C,T){if(!T)return this.setCursor(this.defaultCursor),!1;var S=T.hoverCursor||this.hoverCursor,M=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,O=(!M||!M.contains(T))&&T._findTargetCorner(this.getPointer(C,!0));O?this.setCursor(this.getCornerCursor(O,T,C)):(T.subTargetCheck&&this.targets.concat().reverse().map(function(V){S=V.hoverCursor||S}),this.setCursor(S))},getCornerCursor:function(C,T,S){var M=T.controls[C];return M.cursorStyleHandler(S,M,T)}})}(),function(){var r=Math.min,f=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(_,w){var b=this._activeObject;return b&&this._isSelectionKeyPressed(_)&&w&&w.selectable&&this.selection&&(b!==w||b.type==="activeSelection")&&!w.onSelect({e:_})},_handleGrouping:function(_,w){var b=this._activeObject;b.__corner||w===b&&(w=this.findTarget(_,!0),!w||!w.selectable)||(b&&b.type==="activeSelection"?this._updateActiveSelection(w,_):this._createActiveSelection(w,_))},_updateActiveSelection:function(_,w){var b=this._activeObject,x=b._objects.slice(0);b.contains(_)?(b.removeWithUpdate(_),this._hoveredTarget=_,this._hoveredTargets=this.targets.concat(),b.size()===1&&this._setActiveObject(b.item(0),w)):(b.addWithUpdate(_),this._hoveredTarget=b,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(x,w)},_createActiveSelection:function(_,w){var b=this.getActiveObjects(),x=this._createGroup(_);this._hoveredTarget=x,this._setActiveObject(x,w),this._fireSelectionEvents(b,w)},_createGroup:function(_){var w=this._objects,b=w.indexOf(this._activeObject)<w.indexOf(_),x=b?[this._activeObject,_]:[_,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(x,{canvas:this})},_groupSelectedObjects:function(_){var w=this._collectObjects(_),b;w.length===1?this.setActiveObject(w[0],_):w.length>1&&(b=new e.ActiveSelection(w.reverse(),{canvas:this}),this.setActiveObject(b,_))},_collectObjects:function(_){for(var w=[],b,x=this._groupSelector.ex,v=this._groupSelector.ey,C=x+this._groupSelector.left,T=v+this._groupSelector.top,S=new e.Point(r(x,C),r(v,T)),M=new e.Point(f(x,C),f(v,T)),O=!this.selectionFullyContained,V=x===C&&v===T,G=this._objects.length;G--&&(b=this._objects[G],!(!(!b||!b.selectable||!b.visible)&&(O&&b.intersectsWithRect(S,M,!0)||b.isContainedWithinRect(S,M,!0)||O&&b.containsPoint(S,null,!0)||O&&b.containsPoint(M,null,!0))&&(w.push(b),V))););return w.length>1&&(w=w.filter(function(Z){return!Z.onSelect({e:_})})),w},_maybeGroupObjects:function(_){this.selection&&this._groupSelector&&this._groupSelectedObjects(_),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(r){r||(r={});var f=r.format||"png",_=r.quality||1,w=(r.multiplier||1)*(r.enableRetinaScaling?this.getRetinaScaling():1),b=this.toCanvasElement(w,r);return e.util.toDataURL(b,f,_)},toCanvasElement:function(r,f){r=r||1,f=f||{};var _=(f.width||this.width)*r,w=(f.height||this.height)*r,b=this.getZoom(),x=this.width,v=this.height,C=b*r,T=this.viewportTransform,S=(T[4]-(f.left||0))*r,M=(T[5]-(f.top||0))*r,O=this.interactive,V=[C,0,0,C,S,M],G=this.enableRetinaScaling,Z=e.util.createCanvasElement(),te=this.contextTop;return Z.width=_,Z.height=w,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=V,this.width=_,this.height=w,this.calcViewportBoundaries(),this.renderCanvas(Z.getContext("2d"),this._objects),this.viewportTransform=T,this.width=x,this.height=v,this.calcViewportBoundaries(),this.interactive=O,this.enableRetinaScaling=G,this.contextTop=te,Z}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(r,f,_){if(!!r){var w=typeof r=="string"?JSON.parse(r):e.util.object.clone(r),b=this,x=w.clipPath,v=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete w.clipPath,this._enlivenObjects(w.objects,function(C){b.clear(),b._setBgOverlay(w,function(){x?b._enlivenObjects([x],function(T){b.clipPath=T[0],b.__setupCanvas.call(b,w,C,v,f)}):b.__setupCanvas.call(b,w,C,v,f)})},_),this}},__setupCanvas:function(r,f,_,w){var b=this;f.forEach(function(x,v){b.insertAt(x,v)}),this.renderOnAddRemove=_,delete r.objects,delete r.backgroundImage,delete r.overlayImage,delete r.background,delete r.overlay,this._setOptions(r),this.renderAll(),w&&w()},_setBgOverlay:function(r,f){var _={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!r.backgroundImage&&!r.overlayImage&&!r.background&&!r.overlay){f&&f();return}var w=function(){_.backgroundImage&&_.overlayImage&&_.backgroundColor&&_.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",r.backgroundImage,_,w),this.__setBgOverlay("overlayImage",r.overlayImage,_,w),this.__setBgOverlay("backgroundColor",r.background,_,w),this.__setBgOverlay("overlayColor",r.overlay,_,w)},__setBgOverlay:function(r,f,_,w){var b=this;if(!f){_[r]=!0,w&&w();return}r==="backgroundImage"||r==="overlayImage"?e.util.enlivenObjects([f],function(x){b[r]=x[0],_[r]=!0,w&&w()}):this["set"+e.util.string.capitalize(r,!0)](f,function(){_[r]=!0,w&&w()})},_enlivenObjects:function(r,f,_){if(!r||r.length===0){f&&f([]);return}e.util.enlivenObjects(r,function(w){f&&f(w)},null,_)},_toDataURL:function(r,f){this.clone(function(_){f(_.toDataURL(r))})},_toDataURLWithMultiplier:function(r,f,_){this.clone(function(w){_(w.toDataURLWithMultiplier(r,f))})},clone:function(r,f){var _=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(w){w.loadFromJSON(_,function(){r&&r(w)})})},cloneWithoutData:function(r){var f=e.util.createCanvasElement();f.width=this.width,f.height=this.height;var _=new e.Canvas(f);this.backgroundImage?(_.setBackgroundImage(this.backgroundImage.src,function(){_.renderAll(),r&&r(_)}),_.backgroundImageOpacity=this.backgroundImageOpacity,_.backgroundImageStretch=this.backgroundImageStretch):r&&r(_)}}),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.util.object.clone,b=f.util.toFixed,x=f.util.string.capitalize,v=f.util.degreesToRadians,C=!f.isLikelyNode,T=2;f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:C,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(S){S&&this.setOptions(S)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=f.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(S){var M=f.perfLimitSizeTotal,O=S.width,V=S.height,G=f.maxCacheSideLimit,Z=f.minCacheSideLimit;if(O<=G&&V<=G&&O*V<=M)return O<Z&&(S.width=Z),V<Z&&(S.height=Z),S;var te=O/V,J=f.util.limitDimsByArea(te,M),oe=f.util.capValue,Me=oe(Z,J.x,G),Fe=oe(Z,J.y,G);return O>Me&&(S.zoomX/=O/Me,S.width=Me,S.capped=!0),V>Fe&&(S.zoomY/=V/Fe,S.height=Fe,S.capped=!0),S},_getCacheCanvasDimensions:function(){var S=this.getTotalObjectScaling(),M=this._getTransformedDimensions(0,0),O=M.x*S.scaleX/this.scaleX,V=M.y*S.scaleY/this.scaleY;return{width:O+T,height:V+T,zoomX:S.scaleX,zoomY:S.scaleY,x:O,y:V}},_updateCacheCanvas:function(){var S=this.canvas;if(this.noScaleCache&&S&&S._currentTransform){var M=S._currentTransform.target,O=S._currentTransform.action;if(this===M&&O.slice&&O.slice(0,5)==="scale")return!1}var V=this._cacheCanvas,G=this._limitCacheSize(this._getCacheCanvasDimensions()),Z=f.minCacheSideLimit,te=G.width,J=G.height,oe,Me,Fe=G.zoomX,pe=G.zoomY,Ie=te!==this.cacheWidth||J!==this.cacheHeight,Se=this.zoomX!==Fe||this.zoomY!==pe,me=Ie||Se,et=0,nt=0,Et=!1;if(Ie){var it=this._cacheCanvas.width,we=this._cacheCanvas.height,ke=te>it||J>we,Oe=(te<it*.9||J<we*.9)&&it>Z&&we>Z;Et=ke||Oe,ke&&!G.capped&&(te>Z||J>Z)&&(et=te*.1,nt=J*.1)}return this instanceof f.Text&&this.path&&(me=!0,Et=!0,et+=this.getHeightOfLine(0)*this.zoomX,nt+=this.getHeightOfLine(0)*this.zoomY),me?(Et?(V.width=Math.ceil(te+et),V.height=Math.ceil(J+nt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,V.width,V.height)),oe=G.x/2,Me=G.y/2,this.cacheTranslationX=Math.round(V.width/2-oe)+oe,this.cacheTranslationY=Math.round(V.height/2-Me)+Me,this.cacheWidth=te,this.cacheHeight=J,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Fe,pe),this.zoomX=Fe,this.zoomY=pe,!0):!1},setOptions:function(S){this._setOptions(S),this._initGradient(S.fill,"fill"),this._initGradient(S.stroke,"stroke"),this._initPattern(S.fill,"fill"),this._initPattern(S.stroke,"stroke")},transform:function(S){var M=this.group&&!this.group._transformDone||this.group&&this.canvas&&S===this.canvas.contextTop,O=this.calcTransformMatrix(!M);S.transform(O[0],O[1],O[2],O[3],O[4],O[5])},toObject:function(S){var M=f.Object.NUM_FRACTION_DIGITS,O={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:b(this.left,M),top:b(this.top,M),width:b(this.width,M),height:b(this.height,M),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:b(this.strokeWidth,M),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:b(this.strokeMiterLimit,M),scaleX:b(this.scaleX,M),scaleY:b(this.scaleY,M),angle:b(this.angle,M),flipX:this.flipX,flipY:this.flipY,opacity:b(this.opacity,M),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:b(this.skewX,M),skewY:b(this.skewY,M)};return this.clipPath&&!this.clipPath.excludeFromExport&&(O.clipPath=this.clipPath.toObject(S),O.clipPath.inverted=this.clipPath.inverted,O.clipPath.absolutePositioned=this.clipPath.absolutePositioned),f.util.populateWithProperties(this,O,S),this.includeDefaultValues||(O=this._removeDefaultValues(O)),O},toDatalessObject:function(S){return this.toObject(S)},_removeDefaultValues:function(S){var M=f.util.getKlass(S.type).prototype,O=M.stateProperties;return O.forEach(function(V){V==="left"||V==="top"||(S[V]===M[V]&&delete S[V],Array.isArray(S[V])&&Array.isArray(M[V])&&S[V].length===0&&M[V].length===0&&delete S[V])}),S},toString:function(){return"#<fabric."+x(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var S=f.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(S.scaleX),scaleY:Math.abs(S.scaleY)}},getTotalObjectScaling:function(){var S=this.getObjectScaling(),M=S.scaleX,O=S.scaleY;if(this.canvas){var V=this.canvas.getZoom(),G=this.canvas.getRetinaScaling();M*=V*G,O*=V*G}return{scaleX:M,scaleY:O}},getObjectOpacity:function(){var S=this.opacity;return this.group&&(S*=this.group.getObjectOpacity()),S},_set:function(S,M){var O=S==="scaleX"||S==="scaleY",V=this[S]!==M,G=!1;return O&&(M=this._constrainScale(M)),S==="scaleX"&&M<0?(this.flipX=!this.flipX,M*=-1):S==="scaleY"&&M<0?(this.flipY=!this.flipY,M*=-1):S==="shadow"&&M&&!(M instanceof f.Shadow)?M=new f.Shadow(M):S==="dirty"&&this.group&&this.group.set("dirty",M),this[S]=M,V&&(G=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(S)>-1?(this.dirty=!0,G&&this.group.set("dirty",!0)):G&&this.stateProperties.indexOf(S)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(S){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(S.save(),this._setupCompositeOperation(S),this.drawSelectionBackground(S),this.transform(S),this._setOpacity(S),this._setShadow(S,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(S)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(S),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),S.restore())},renderCache:function(S){S=S||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,S.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(S,M){if(S.save(),M.inverted?S.globalCompositeOperation="destination-out":S.globalCompositeOperation="destination-in",M.absolutePositioned){var O=f.util.invertTransform(this.calcTransformMatrix());S.transform(O[0],O[1],O[2],O[3],O[4],O[5])}M.transform(S),S.scale(1/M.zoomX,1/M.zoomY),S.drawImage(M._cacheCanvas,-M.cacheTranslationX,-M.cacheTranslationY),S.restore()},drawObject:function(S,M){var O=this.fill,V=this.stroke;M?(this.fill="black",this.stroke="",this._setClippingProperties(S)):this._renderBackground(S),this._render(S),this._drawClipPath(S,this.clipPath),this.fill=O,this.stroke=V},_drawClipPath:function(S,M){!M||(M.canvas=this.canvas,M.shouldCache(),M._transformDone=!0,M.renderCache({forClipping:!0}),this.drawClipPathOnCache(S,M))},drawCacheOnCanvas:function(S){S.scale(1/this.zoomX,1/this.zoomY),S.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(S){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!S&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!S){var M=this.cacheWidth/this.zoomX,O=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-M/2,-O/2,M,O)}return!0}return!1},_renderBackground:function(S){if(!!this.backgroundColor){var M=this._getNonTransformedDimensions();S.fillStyle=this.backgroundColor,S.fillRect(-M.x/2,-M.y/2,M.x,M.y),this._removeShadow(S)}},_setOpacity:function(S){this.group&&!this.group._transformDone?S.globalAlpha=this.getObjectOpacity():S.globalAlpha*=this.opacity},_setStrokeStyles:function(S,M){var O=M.stroke;O&&(S.lineWidth=M.strokeWidth,S.lineCap=M.strokeLineCap,S.lineDashOffset=M.strokeDashOffset,S.lineJoin=M.strokeLineJoin,S.miterLimit=M.strokeMiterLimit,O.toLive?O.gradientUnits==="percentage"||O.gradientTransform||O.patternTransform?this._applyPatternForTransformedGradient(S,O):(S.strokeStyle=O.toLive(S,this),this._applyPatternGradientTransform(S,O)):S.strokeStyle=M.stroke)},_setFillStyles:function(S,M){var O=M.fill;O&&(O.toLive?(S.fillStyle=O.toLive(S,this),this._applyPatternGradientTransform(S,M.fill)):S.fillStyle=O)},_setClippingProperties:function(S){S.globalAlpha=1,S.strokeStyle="transparent",S.fillStyle="#000000"},_setLineDash:function(S,M){!M||M.length===0||(1&M.length&&M.push.apply(M,M),S.setLineDash(M))},_renderControls:function(S,M){var O=this.getViewportTransform(),V=this.calcTransformMatrix(),G,Z,te;M=M||{},Z=typeof M.hasBorders<"u"?M.hasBorders:this.hasBorders,te=typeof M.hasControls<"u"?M.hasControls:this.hasControls,V=f.util.multiplyTransformMatrices(O,V),G=f.util.qrDecompose(V),S.save(),S.translate(G.translateX,G.translateY),S.lineWidth=1*this.borderScaleFactor,this.group||(S.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(G.angle-=180),S.rotate(v(this.group?G.angle:this.angle)),M.forActiveSelection||this.group?Z&&this.drawBordersInGroup(S,G,M):Z&&this.drawBorders(S,M),te&&this.drawControls(S,M),S.restore()},_setShadow:function(S){if(!!this.shadow){var M=this.shadow,O=this.canvas,V,G=O&&O.viewportTransform[0]||1,Z=O&&O.viewportTransform[3]||1;M.nonScaling?V={scaleX:1,scaleY:1}:V=this.getObjectScaling(),O&&O._isRetinaScaling()&&(G*=f.devicePixelRatio,Z*=f.devicePixelRatio),S.shadowColor=M.color,S.shadowBlur=M.blur*f.browserShadowBlurConstant*(G+Z)*(V.scaleX+V.scaleY)/4,S.shadowOffsetX=M.offsetX*G*V.scaleX,S.shadowOffsetY=M.offsetY*Z*V.scaleY}},_removeShadow:function(S){!this.shadow||(S.shadowColor="",S.shadowBlur=S.shadowOffsetX=S.shadowOffsetY=0)},_applyPatternGradientTransform:function(S,M){if(!M||!M.toLive)return{offsetX:0,offsetY:0};var O=M.gradientTransform||M.patternTransform,V=-this.width/2+M.offsetX||0,G=-this.height/2+M.offsetY||0;return M.gradientUnits==="percentage"?S.transform(this.width,0,0,this.height,V,G):S.transform(1,0,0,1,V,G),O&&S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),{offsetX:V,offsetY:G}},_renderPaintInOrder:function(S){this.paintFirst==="stroke"?(this._renderStroke(S),this._renderFill(S)):(this._renderFill(S),this._renderStroke(S))},_render:function(){},_renderFill:function(S){!this.fill||(S.save(),this._setFillStyles(S,this),this.fillRule==="evenodd"?S.fill("evenodd"):S.fill(),S.restore())},_renderStroke:function(S){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(S),S.save(),this.strokeUniform&&this.group){var M=this.getObjectScaling();S.scale(1/M.scaleX,1/M.scaleY)}else this.strokeUniform&&S.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(S,this.strokeDashArray),this._setStrokeStyles(S,this),S.stroke(),S.restore()}},_applyPatternForTransformedGradient:function(S,M){var O=this._limitCacheSize(this._getCacheCanvasDimensions()),V=f.util.createCanvasElement(),G,Z=this.canvas.getRetinaScaling(),te=O.x/this.scaleX/Z,J=O.y/this.scaleY/Z;V.width=te,V.height=J,G=V.getContext("2d"),G.beginPath(),G.moveTo(0,0),G.lineTo(te,0),G.lineTo(te,J),G.lineTo(0,J),G.closePath(),G.translate(te/2,J/2),G.scale(O.zoomX/this.scaleX/Z,O.zoomY/this.scaleY/Z),this._applyPatternGradientTransform(G,M),G.fillStyle=M.toLive(S),G.fill(),S.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),S.scale(Z*this.scaleX/O.zoomX,Z*this.scaleY/O.zoomY),S.strokeStyle=G.createPattern(V,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var S=f.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",S.scaleX),this.set("scaleY",S.scaleY),this.angle=S.angle,this.skewX=S.skewX,this.skewY=0}},_removeTransformMatrix:function(S){var M=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),M=f.util.transformPoint(M,this.transformMatrix)),this.transformMatrix=null,S&&(this.scaleX*=S.scaleX,this.scaleY*=S.scaleY,this.cropX=S.cropX,this.cropY=S.cropY,M.x+=S.offsetLeft,M.y+=S.offsetTop,this.width=S.width,this.height=S.height),this.setPositionByOrigin(M,"center","center")},clone:function(S,M){var O=this.toObject(M);this.constructor.fromObject?this.constructor.fromObject(O,S):f.Object._fromObject("Object",O,S)},cloneAsImage:function(S,M){var O=this.toCanvasElement(M);return S&&S(new f.Image(O)),this},toCanvasElement:function(S){S||(S={});var M=f.util,O=M.saveObjectTransform(this),V=this.group,G=this.shadow,Z=Math.abs,te=(S.multiplier||1)*(S.enableRetinaScaling?f.devicePixelRatio:1);delete this.group,S.withoutTransform&&M.resetObjectTransform(this),S.withoutShadow&&(this.shadow=null);var J=f.util.createCanvasElement(),oe=this.getBoundingRect(!0,!0),Me=this.shadow,Fe,pe={x:0,y:0},Ie,Se,me;Me&&(Ie=Me.blur,Me.nonScaling?Fe={scaleX:1,scaleY:1}:Fe=this.getObjectScaling(),pe.x=2*Math.round(Z(Me.offsetX)+Ie)*Z(Fe.scaleX),pe.y=2*Math.round(Z(Me.offsetY)+Ie)*Z(Fe.scaleY)),Se=oe.width+pe.x,me=oe.height+pe.y,J.width=Math.ceil(Se),J.height=Math.ceil(me);var et=new f.StaticCanvas(J,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});S.format==="jpeg"&&(et.backgroundColor="#fff"),this.setPositionByOrigin(new f.Point(et.width/2,et.height/2),"center","center");var nt=this.canvas;et.add(this);var Et=et.toCanvasElement(te||1,S);return this.shadow=G,this.set("canvas",nt),V&&(this.group=V),this.set(O).setCoords(),et._objects=[],et.dispose(),et=null,Et},toDataURL:function(S){return S||(S={}),f.util.toDataURL(this.toCanvasElement(S),S.format||"png",S.quality||1)},isType:function(S){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===S},complexity:function(){return 1},toJSON:function(S){return this.toObject(S)},rotate:function(S){var M=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return M&&this._setOriginToCenter(),this.set("angle",S),M&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(S,M){M=M||this.canvas.getPointer(S);var O=new f.Point(M.x,M.y),V=this._getLeftTopCoords();return this.angle&&(O=f.util.rotatePoint(O,V,v(-this.angle))),{x:O.x-V.x,y:O.y-V.y}},_setupCompositeOperation:function(S){this.globalCompositeOperation&&(S.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){f.runningAnimations&&f.runningAnimations.cancelByTarget(this)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),_(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object.ENLIVEN_PROPS=["clipPath"],f.Object._fromObject=function(S,M,O,V){var G=f[S];M=w(M,!0),f.util.enlivenPatterns([M.fill,M.stroke],function(Z){typeof Z[0]<"u"&&(M.fill=Z[0]),typeof Z[1]<"u"&&(M.stroke=Z[1]),f.util.enlivenObjectEnlivables(M,M,function(){var te=V?new G(M[V],M):new G(M);O&&O(te)})})},f.Object.__uid=0)}(i),function(){var r=e.util.degreesToRadians,f={left:-.5,center:0,right:.5},_={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(w,b,x,v,C){var T=w.x,S=w.y,M,O,V;return typeof b=="string"?b=f[b]:b-=.5,typeof v=="string"?v=f[v]:v-=.5,M=v-b,typeof x=="string"?x=_[x]:x-=.5,typeof C=="string"?C=_[C]:C-=.5,O=C-x,(M||O)&&(V=this._getTransformedDimensions(),T=w.x+M*V.x,S=w.y+O*V.y),new e.Point(T,S)},translateToCenterPoint:function(w,b,x){var v=this.translateToGivenOrigin(w,b,x,"center","center");return this.angle?e.util.rotatePoint(v,w,r(this.angle)):v},translateToOriginPoint:function(w,b,x){var v=this.translateToGivenOrigin(w,"center","center",b,x);return this.angle?e.util.rotatePoint(v,w,r(this.angle)):v},getCenterPoint:function(){var w=new e.Point(this.left,this.top);return this.translateToCenterPoint(w,this.originX,this.originY)},getPointByOrigin:function(w,b){var x=this.getCenterPoint();return this.translateToOriginPoint(x,w,b)},toLocalPoint:function(w,b,x){var v=this.getCenterPoint(),C,T;return typeof b<"u"&&typeof x<"u"?C=this.translateToGivenOrigin(v,"center","center",b,x):C=new e.Point(this.left,this.top),T=new e.Point(w.x,w.y),this.angle&&(T=e.util.rotatePoint(T,v,-r(this.angle))),T.subtractEquals(C)},setPositionByOrigin:function(w,b,x){var v=this.translateToCenterPoint(w,b,x),C=this.translateToOriginPoint(v,this.originX,this.originY);this.set("left",C.x),this.set("top",C.y)},adjustPosition:function(w){var b=r(this.angle),x=this.getScaledWidth(),v=e.util.cos(b)*x,C=e.util.sin(b)*x,T,S;typeof this.originX=="string"?T=f[this.originX]:T=this.originX-.5,typeof w=="string"?S=f[w]:S=w-.5,this.left+=v*(S-T),this.top+=C*(S-T),this.setCoords(),this.originX=w},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var w=this.getCenterPoint();this.originX="center",this.originY="center",this.left=w.x,this.top=w.y},_resetOrigin:function(){var w=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=w.x,this.top=w.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function r(x){return[new e.Point(x.tl.x,x.tl.y),new e.Point(x.tr.x,x.tr.y),new e.Point(x.br.x,x.br.y),new e.Point(x.bl.x,x.bl.y)]}var f=e.util,_=f.degreesToRadians,w=f.multiplyTransformMatrices,b=f.transformPoint;f.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(x,v){return v?x?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),x?this.aCoords:this.lineCoords)},getCoords:function(x,v){return r(this._getCoords(x,v))},intersectsWithRect:function(x,v,C,T){var S=this.getCoords(C,T),M=e.Intersection.intersectPolygonRectangle(S,x,v);return M.status==="Intersection"},intersectsWithObject:function(x,v,C){var T=e.Intersection.intersectPolygonPolygon(this.getCoords(v,C),x.getCoords(v,C));return T.status==="Intersection"||x.isContainedWithinObject(this,v,C)||this.isContainedWithinObject(x,v,C)},isContainedWithinObject:function(x,v,C){for(var T=this.getCoords(v,C),S=v?x.aCoords:x.lineCoords,M=0,O=x._getImageLines(S);M<4;M++)if(!x.containsPoint(T[M],O))return!1;return!0},isContainedWithinRect:function(x,v,C,T){var S=this.getBoundingRect(C,T);return S.left>=x.x&&S.left+S.width<=v.x&&S.top>=x.y&&S.top+S.height<=v.y},containsPoint:function(x,M,C,T){var S=this._getCoords(C,T),M=M||this._getImageLines(S),O=this._findCrossPoints(x,M);return O!==0&&O%2===1},isOnScreen:function(x){if(!this.canvas)return!1;var v=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br,T=this.getCoords(!0,x);return T.some(function(S){return S.x<=C.x&&S.x>=v.x&&S.y<=C.y&&S.y>=v.y})||this.intersectsWithRect(v,C,!0,x)?!0:this._containsCenterOfCanvas(v,C,x)},_containsCenterOfCanvas:function(x,v,C){var T={x:(x.x+v.x)/2,y:(x.y+v.y)/2};return!!this.containsPoint(T,null,!0,C)},isPartiallyOnScreen:function(x){if(!this.canvas)return!1;var v=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br;if(this.intersectsWithRect(v,C,!0,x))return!0;var T=this.getCoords(!0,x).every(function(S){return(S.x>=C.x||S.x<=v.x)&&(S.y>=C.y||S.y<=v.y)});return T&&this._containsCenterOfCanvas(v,C,x)},_getImageLines:function(x){var v={topline:{o:x.tl,d:x.tr},rightline:{o:x.tr,d:x.br},bottomline:{o:x.br,d:x.bl},leftline:{o:x.bl,d:x.tl}};return v},_findCrossPoints:function(x,v){var C,T,S,M,O,V=0,G;for(var Z in v)if(G=v[Z],!(G.o.y<x.y&&G.d.y<x.y)&&!(G.o.y>=x.y&&G.d.y>=x.y)&&(G.o.x===G.d.x&&G.o.x>=x.x?O=G.o.x:(C=0,T=(G.d.y-G.o.y)/(G.d.x-G.o.x),S=x.y-C*x.x,M=G.o.y-T*G.o.x,O=-(S-M)/(C-T)),O>=x.x&&(V+=1),V===2))break;return V},getBoundingRect:function(x,v){var C=this.getCoords(x,v);return f.makeBoundingBoxFromPoints(C)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(x){return Math.abs(x)<this.minScaleLimit?x<0?-this.minScaleLimit:this.minScaleLimit:x===0?1e-4:x},scale:function(x){return this._set("scaleX",x),this._set("scaleY",x),this.setCoords()},scaleToWidth:function(x,v){var C=this.getBoundingRect(v).width/this.getScaledWidth();return this.scale(x/this.width/C)},scaleToHeight:function(x,v){var C=this.getBoundingRect(v).height/this.getScaledHeight();return this.scale(x/this.height/C)},calcLineCoords:function(){var x=this.getViewportTransform(),v=this.padding,C=_(this.angle),T=f.cos(C),S=f.sin(C),M=T*v,O=S*v,V=M+O,G=M-O,Z=this.calcACoords(),te={tl:b(Z.tl,x),tr:b(Z.tr,x),bl:b(Z.bl,x),br:b(Z.br,x)};return v&&(te.tl.x-=G,te.tl.y-=V,te.tr.x+=V,te.tr.y-=G,te.bl.x-=V,te.bl.y+=G,te.br.x+=G,te.br.y+=V),te},calcOCoords:function(){var x=this._calcRotateMatrix(),v=this._calcTranslateMatrix(),C=this.getViewportTransform(),T=w(C,v),S=w(T,x),S=w(S,[1/C[0],0,0,1/C[3],0,0]),M=this._calculateCurrentDimensions(),O={};return this.forEachControl(function(V,G,Z){O[G]=V.positionHandler(M,S,Z)}),O},calcACoords:function(){var x=this._calcRotateMatrix(),v=this._calcTranslateMatrix(),C=w(v,x),T=this._getTransformedDimensions(),S=T.x/2,M=T.y/2;return{tl:b({x:-S,y:-M},C),tr:b({x:S,y:-M},C),bl:b({x:-S,y:M},C),br:b({x:S,y:M},C)}},setCoords:function(x){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),x?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return f.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var x=this.getCenterPoint();return[1,0,0,1,x.x,x.y]},transformMatrixKey:function(x){var v="_",C="";return!x&&this.group&&(C=this.group.transformMatrixKey(x)+v),C+this.top+v+this.left+v+this.scaleX+v+this.scaleY+v+this.skewX+v+this.skewY+v+this.angle+v+this.originX+v+this.originY+v+this.width+v+this.height+v+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(x){var v=this.calcOwnMatrix();if(x||!this.group)return v;var C=this.transformMatrixKey(x),T=this.matrixCache||(this.matrixCache={});return T.key===C?T.value:(this.group&&(v=w(this.group.calcTransformMatrix(!1),v)),T.key=C,T.value=v,v)},calcOwnMatrix:function(){var x=this.transformMatrixKey(!0),v=this.ownMatrixCache||(this.ownMatrixCache={});if(v.key===x)return v.value;var C=this._calcTranslateMatrix(),T={angle:this.angle,translateX:C[4],translateY:C[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return v.key=x,v.value=f.composeMatrix(T),v.value},_getNonTransformedDimensions:function(){var x=this.strokeWidth,v=this.width+x,C=this.height+x;return{x:v,y:C}},_getTransformedDimensions:function(x,v){typeof x>"u"&&(x=this.skewX),typeof v>"u"&&(v=this.skewY);var C,T,S,M=x===0&&v===0;if(this.strokeUniform?(T=this.width,S=this.height):(C=this._getNonTransformedDimensions(),T=C.x,S=C.y),M)return this._finalizeDimensions(T*this.scaleX,S*this.scaleY);var O=f.sizeAfterTransform(T,S,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:x,skewY:v});return this._finalizeDimensions(O.x,O.y)},_finalizeDimensions:function(x,v){return this.strokeUniform?{x:x+this.strokeWidth,y:v+this.strokeWidth}:{x,y:v}},_calculateCurrentDimensions:function(){var x=this.getViewportTransform(),v=this._getTransformedDimensions(),C=b(v,x,!0);return C.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(r){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,r):this.canvas&&this.canvas.sendBackwards(this,r),this},bringForward:function(r){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,r):this.canvas&&this.canvas.bringForward(this,r),this},moveTo:function(r){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,r):this.canvas&&this.canvas.moveTo(this,r),this}}),function(){function r(_,w){if(w){if(w.toLive)return _+": url(#SVGID_"+w.id+"); ";var b=new e.Color(w),x=_+": "+b.toRgb()+"; ",v=b.getAlpha();return v!==1&&(x+=_+"-opacity: "+v.toString()+"; "),x}else return _+": none; "}var f=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(_){var w=this.fillRule?this.fillRule:"nonzero",b=this.strokeWidth?this.strokeWidth:"0",x=this.strokeDashArray?this.strokeDashArray.join(" "):"none",v=this.strokeDashOffset?this.strokeDashOffset:"0",C=this.strokeLineCap?this.strokeLineCap:"butt",T=this.strokeLineJoin?this.strokeLineJoin:"miter",S=this.strokeMiterLimit?this.strokeMiterLimit:"4",M=typeof this.opacity<"u"?this.opacity:"1",O=this.visible?"":" visibility: hidden;",V=_?"":this.getSvgFilter(),G=r("fill",this.fill),Z=r("stroke",this.stroke);return[Z,"stroke-width: ",b,"; ","stroke-dasharray: ",x,"; ","stroke-linecap: ",C,"; ","stroke-dashoffset: ",v,"; ","stroke-linejoin: ",T,"; ","stroke-miterlimit: ",S,"; ",G,"fill-rule: ",w,"; ","opacity: ",M,";",V,O].join("")},getSvgSpanStyles:function(_,w){var b="; ",v=_.fontFamily?"font-family: "+(_.fontFamily.indexOf("'")===-1&&_.fontFamily.indexOf('"')===-1?"'"+_.fontFamily+"'":_.fontFamily)+b:"",x=_.strokeWidth?"stroke-width: "+_.strokeWidth+b:"",v=v,C=_.fontSize?"font-size: "+_.fontSize+"px"+b:"",T=_.fontStyle?"font-style: "+_.fontStyle+b:"",S=_.fontWeight?"font-weight: "+_.fontWeight+b:"",M=_.fill?r("fill",_.fill):"",O=_.stroke?r("stroke",_.stroke):"",V=this.getSvgTextDecoration(_),G=_.deltaY?"baseline-shift: "+-_.deltaY+"; ":"";return V&&(V="text-decoration: "+V+b),[O,x,v,C,T,S,V,M,G,w?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(_){return["overline","underline","line-through"].filter(function(w){return _[w.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(_,w){var b=_?this.calcTransformMatrix():this.calcOwnMatrix(),x='transform="'+e.util.matrixToSVG(b);return x+(w||"")+'" '},_setSVGBg:function(_){if(this.backgroundColor){var w=e.Object.NUM_FRACTION_DIGITS;_.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/2,w),'" y="',f(-this.height/2,w),'" width="',f(this.width,w),'" height="',f(this.height,w),`"></rect>
`)}},toSVG:function(_){return this._createBaseSVGMarkup(this._toSVG(_),{reviver:_})},toClipPathSVG:function(_){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(_),{reviver:_})},_createBaseClipPathSVGMarkup:function(_,w){w=w||{};var b=w.reviver,x=w.additionalTransform||"",v=[this.getSvgTransform(!0,x),this.getSvgCommons()].join(""),C=_.indexOf("COMMON_PARTS");return _[C]=v,b?b(_.join("")):_.join("")},_createBaseSVGMarkup:function(_,w){w=w||{};var b=w.noStyle,x=w.reviver,v=b?"":'style="'+this.getSvgStyles()+'" ',C=w.withShadow?'style="'+this.getSvgFilter()+'" ':"",T=this.clipPath,S=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",M=T&&T.absolutePositioned,O=this.stroke,V=this.fill,G=this.shadow,Z,te=[],J,oe=_.indexOf("COMMON_PARTS"),Me=w.additionalTransform;return T&&(T.clipPathId="CLIPPATH_"+e.Object.__uid++,J='<clipPath id="'+T.clipPathId+`" >
`+T.toClipPathSVG(x)+`</clipPath>
`),M&&te.push("<g ",C,this.getSvgCommons(),` >
`),te.push("<g ",this.getSvgTransform(!1),M?"":C+this.getSvgCommons(),` >
`),Z=[v,S,b?"":this.addPaintOrder()," ",Me?'transform="'+Me+'" ':""].join(""),_[oe]=Z,V&&V.toLive&&te.push(V.toSVG(this)),O&&O.toLive&&te.push(O.toSVG(this)),G&&te.push(G.toSVG(this)),T&&te.push(J),te.push(_.join("")),te.push(`</g>
`),M&&te.push(`</g>
`),x?x(te.join("")):te.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var r=e.util.object.extend,f="stateProperties";function _(b,x,v){var C={},T=!0;v.forEach(function(S){C[S]=b[S]}),r(b[x],C,T)}function w(b,x,v){if(b===x)return!0;if(Array.isArray(b)){if(!Array.isArray(x)||b.length!==x.length)return!1;for(var C=0,T=b.length;C<T;C++)if(!w(b[C],x[C]))return!1;return!0}else if(b&&typeof b=="object"){var S=Object.keys(b),M;if(!x||typeof x!="object"||!v&&S.length!==Object.keys(x).length)return!1;for(var C=0,T=S.length;C<T;C++)if(M=S[C],!(M==="canvas"||M==="group")&&!w(b[M],x[M]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(b){b=b||f;var x="_"+b;return Object.keys(this[x]).length<this[b].length?!0:!w(this[x],this,!0)},saveState:function(b){var x=b&&b.propertySet||f,v="_"+x;return this[v]?(_(this,v,this[x]),b&&b.stateProperties&&_(this,v,b.stateProperties),this):this.setupState(b)},setupState:function(b){b=b||{};var x=b.propertySet||f;return b.propertySet=x,this["_"+x]={},this.saveState(b),this}})}(),function(){var r=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(f,_){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var w=f.x,b=f.y,x,v,C=Object.keys(this.oCoords),T=C.length-1,S;for(this.__corner=0;T>=0;T--)if(S=C[T],!!this.isControlVisible(S)&&(v=this._getImageLines(_?this.oCoords[S].touchCorner:this.oCoords[S].corner),x=this._findCrossPoints({x:w,y:b},v),x!==0&&x%2===1))return this.__corner=S,S;return!1},forEachControl:function(f){for(var _ in this.controls)f(this.controls[_],_,this)},_setCornerCoords:function(){var f=this.oCoords;for(var _ in f){var w=this.controls[_];f[_].corner=w.calcCornerCoords(this.angle,this.cornerSize,f[_].x,f[_].y,!1),f[_].touchCorner=w.calcCornerCoords(this.angle,this.touchCornerSize,f[_].x,f[_].y,!0)}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var _=this.getCenterPoint(),w=this._calculateCurrentDimensions(),b=this.canvas.viewportTransform;return f.translate(_.x,_.y),f.scale(1/b[0],1/b[3]),f.rotate(r(this.angle)),f.fillStyle=this.selectionBackgroundColor,f.fillRect(-w.x/2,-w.y/2,w.x,w.y),f.restore(),this},drawBorders:function(f,_){_=_||{};var w=this._calculateCurrentDimensions(),b=this.borderScaleFactor,x=w.x+b,v=w.y+b,C=typeof _.hasControls<"u"?_.hasControls:this.hasControls,T=!1;return f.save(),f.strokeStyle=_.borderColor||this.borderColor,this._setLineDash(f,_.borderDashArray||this.borderDashArray),f.strokeRect(-x/2,-v/2,x,v),C&&(f.beginPath(),this.forEachControl(function(S,M,O){S.withConnection&&S.getVisibility(O,M)&&(T=!0,f.moveTo(S.x*x,S.y*v),f.lineTo(S.x*x+S.offsetX,S.y*v+S.offsetY))}),T&&f.stroke()),f.restore(),this},drawBordersInGroup:function(f,_,w){w=w||{};var b=e.util.sizeAfterTransform(this.width,this.height,_),x=this.strokeWidth,v=this.strokeUniform,C=this.borderScaleFactor,T=b.x+x*(v?this.canvas.getZoom():_.scaleX)+C,S=b.y+x*(v?this.canvas.getZoom():_.scaleY)+C;return f.save(),this._setLineDash(f,w.borderDashArray||this.borderDashArray),f.strokeStyle=w.borderColor||this.borderColor,f.strokeRect(-T/2,-S/2,T,S),f.restore(),this},drawControls:function(f,_){_=_||{},f.save();var w=this.canvas.getRetinaScaling(),b,x;return f.setTransform(w,0,0,w,0,0),f.strokeStyle=f.fillStyle=_.cornerColor||this.cornerColor,this.transparentCorners||(f.strokeStyle=_.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(f,_.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(b=this.group.calcTransformMatrix()),this.forEachControl(function(v,C,T){x=T.oCoords[C],v.getVisibility(T,C)&&(b&&(x=e.util.transformPoint(x,b)),v.render(f,x.x,x.y,_,T))}),f.restore(),this},isControlVisible:function(f){return this.controls[f]&&this.controls[f].getVisibility(this,f)},setControlVisible:function(f,_){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[f]=_,this},setControlsVisibility:function(f){f||(f={});for(var _ in f)this.setControlVisible(_,f[_]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(r,f){f=f||{};var _=function(){},w=f.onComplete||_,b=f.onChange||_,x=this;return e.util.animate({target:this,startValue:r.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(v){r.set("left",v),x.requestRenderAll(),b()},onComplete:function(){r.setCoords(),w()}})},fxCenterObjectV:function(r,f){f=f||{};var _=function(){},w=f.onComplete||_,b=f.onChange||_,x=this;return e.util.animate({target:this,startValue:r.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(v){r.set("top",v),x.requestRenderAll(),b()},onComplete:function(){r.setCoords(),w()}})},fxRemove:function(r,f){f=f||{};var _=function(){},w=f.onComplete||_,b=f.onChange||_,x=this;return e.util.animate({target:this,startValue:r.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(v){r.set("opacity",v),x.requestRenderAll(),b()},onComplete:function(){x.remove(r),w()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var r=[],f,_,w=[];for(f in arguments[0])r.push(f);for(var b=0,x=r.length;b<x;b++)f=r[b],_=b!==x-1,w.push(this._animate(f,arguments[0][f],arguments[1],_));return w}else return this._animate.apply(this,arguments)},_animate:function(r,f,_,w){var b=this,x;f=f.toString(),_?_=e.util.object.clone(_):_={},~r.indexOf(".")&&(x=r.split("."));var v=b.colorProperties.indexOf(r)>-1||x&&b.colorProperties.indexOf(x[1])>-1,C=x?this.get(x[0])[x[1]]:this.get(r);"from"in _||(_.from=C),v||(~f.indexOf("=")?f=C+parseFloat(f.replace("=","")):f=parseFloat(f));var T={target:this,startValue:_.from,endValue:f,byValue:_.by,easing:_.easing,duration:_.duration,abort:_.abort&&function(S,M,O){return _.abort.call(b,S,M,O)},onChange:function(S,M,O){x?b[x[0]][x[1]]=S:b.set(r,S),!w&&_.onChange&&_.onChange(S,M,O)},onComplete:function(S,M,O){w||(b.setCoords(),_.onComplete&&_.onComplete(S,M,O))}};return v?e.util.animateColor(T.startValue,T.endValue,T.duration,T):e.util.animate(T)}}),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.util.object.clone,b={x1:1,x2:1,y1:1,y2:1};if(f.Line){f.warn("fabric.Line is already defined");return}f.Line=f.util.createClass(f.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:f.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(v,C){v||(v=[0,0,0,0]),this.callSuper("initialize",C),this.set("x1",v[0]),this.set("y1",v[1]),this.set("x2",v[2]),this.set("y2",v[3]),this._setWidthHeight(C)},_setWidthHeight:function(v){v||(v={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in v?v.left:this._getLeftToOriginX(),this.top="top"in v?v.top:this._getTopToOriginY()},_set:function(v,C){return this.callSuper("_set",v,C),typeof b[v]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:x({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:x({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(v){v.beginPath();var C=this.calcLinePoints();v.moveTo(C.x1,C.y1),v.lineTo(C.x2,C.y2),v.lineWidth=this.strokeWidth;var T=v.strokeStyle;v.strokeStyle=this.stroke||v.fillStyle,this.stroke&&this._renderStroke(v),v.strokeStyle=T},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(v){return _(this.callSuper("toObject",v),this.calcLinePoints())},_getNonTransformedDimensions:function(){var v=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(v.y-=this.strokeWidth),this.height===0&&(v.x-=this.strokeWidth)),v},calcLinePoints:function(){var v=this.x1<=this.x2?-1:1,C=this.y1<=this.y2?-1:1,T=v*this.width*.5,S=C*this.height*.5,M=v*this.width*-.5,O=C*this.height*-.5;return{x1:T,x2:M,y1:S,y2:O}},_toSVG:function(){var v=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',v.x1,'" y1="',v.y1,'" x2="',v.x2,'" y2="',v.y2,`" />
`]}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),f.Line.fromElement=function(v,C,T){T=T||{};var S=f.parseAttributes(v,f.Line.ATTRIBUTE_NAMES),M=[S.x1||0,S.y1||0,S.x2||0,S.y2||0];C(new f.Line(M,_(S,T)))},f.Line.fromObject=function(v,C){function T(M){delete M.points,C&&C(M)}var S=w(v,!0);S.points=[v.x1,v.y1,v.x2,v.y2],f.Object._fromObject("Line",S,T,"points")};function x(v,C){var T=v.origin,S=v.axis1,M=v.axis2,O=v.dimension,V=C.nearest,G=C.center,Z=C.farthest;return function(){switch(this.get(T)){case V:return Math.min(this.get(S),this.get(M));case G:return Math.min(this.get(S),this.get(M))+.5*this.get(O);case Z:return Math.max(this.get(S),this.get(M))}}}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.degreesToRadians;if(f.Circle){f.warn("fabric.Circle is already defined.");return}f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(b,x){return this.callSuper("_set",b,x),b==="radius"&&this.setRadius(x),this},toObject:function(b){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(b))},_toSVG:function(){var b,x=0,v=0,C=(this.endAngle-this.startAngle)%360;if(C===0)b=["<circle ","COMMON_PARTS",'cx="'+x+'" cy="'+v+'" ','r="',this.radius,`" />
`];else{var T=_(this.startAngle),S=_(this.endAngle),M=this.radius,O=f.util.cos(T)*M,V=f.util.sin(T)*M,G=f.util.cos(S)*M,Z=f.util.sin(S)*M,te=C>180?"1":"0";b=['<path d="M '+O+" "+V," A "+M+" "+M," 0 ",+te+" 1"," "+G+" "+Z,'" ',"COMMON_PARTS",` />
`]}return b},_render:function(b){b.beginPath(),b.arc(0,0,this.radius,_(this.startAngle),_(this.endAngle),!1),this._renderPaintInOrder(b)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(b){return this.radius=b,this.set("width",b*2).set("height",b*2)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),f.Circle.fromElement=function(b,x){var v=f.parseAttributes(b,f.Circle.ATTRIBUTE_NAMES);if(!w(v))throw new Error("value of `r` attribute is required and can not be negative");v.left=(v.left||0)-v.radius,v.top=(v.top||0)-v.radius,x(new f.Circle(v))};function w(b){return"radius"in b&&b.radius>=0}f.Circle.fromObject=function(b,x){f.Object._fromObject("Circle",b,x)}}(i),function(r){var f=r.fabric||(r.fabric={});if(f.Triangle){f.warn("fabric.Triangle is already defined");return}f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(_){var w=this.width/2,b=this.height/2;_.beginPath(),_.moveTo(-w,b),_.lineTo(0,-b),_.lineTo(w,b),_.closePath(),this._renderPaintInOrder(_)},_toSVG:function(){var _=this.width/2,w=this.height/2,b=[-_+" "+w,"0 "+-w,_+" "+w].join(",");return["<polygon ","COMMON_PARTS",'points="',b,'" />']}}),f.Triangle.fromObject=function(_,w){return f.Object._fromObject("Triangle",_,w)}}(i),function(r){var f=r.fabric||(r.fabric={}),_=Math.PI*2;if(f.Ellipse){f.warn("fabric.Ellipse is already defined.");return}f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(w){this.callSuper("initialize",w),this.set("rx",w&&w.rx||0),this.set("ry",w&&w.ry||0)},_set:function(w,b){switch(this.callSuper("_set",w,b),w){case"rx":this.rx=b,this.set("width",b*2);break;case"ry":this.ry=b,this.set("height",b*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(w){return this.callSuper("toObject",["rx","ry"].concat(w))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(w){w.beginPath(),w.save(),w.transform(1,0,0,this.ry/this.rx,0,0),w.arc(0,0,this.rx,0,_,!1),w.restore(),this._renderPaintInOrder(w)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),f.Ellipse.fromElement=function(w,b){var x=f.parseAttributes(w,f.Ellipse.ATTRIBUTE_NAMES);x.left=(x.left||0)-x.rx,x.top=(x.top||0)-x.ry,b(new f.Ellipse(x))},f.Ellipse.fromObject=function(w,b){f.Object._fromObject("Ellipse",w,b)}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend;if(f.Rect){f.warn("fabric.Rect is already defined");return}f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(w){this.callSuper("initialize",w),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(w){var b=this.rx?Math.min(this.rx,this.width/2):0,x=this.ry?Math.min(this.ry,this.height/2):0,v=this.width,C=this.height,T=-this.width/2,S=-this.height/2,M=b!==0||x!==0,O=1-.5522847498;w.beginPath(),w.moveTo(T+b,S),w.lineTo(T+v-b,S),M&&w.bezierCurveTo(T+v-O*b,S,T+v,S+O*x,T+v,S+x),w.lineTo(T+v,S+C-x),M&&w.bezierCurveTo(T+v,S+C-O*x,T+v-O*b,S+C,T+v-b,S+C),w.lineTo(T+b,S+C),M&&w.bezierCurveTo(T+O*b,S+C,T,S+C-O*x,T,S+C-x),w.lineTo(T,S+x),M&&w.bezierCurveTo(T,S+O*x,T+O*b,S,T+b,S),w.closePath(),this._renderPaintInOrder(w)},toObject:function(w){return this.callSuper("toObject",["rx","ry"].concat(w))},_toSVG:function(){var w=-this.width/2,b=-this.height/2;return["<rect ","COMMON_PARTS",'x="',w,'" y="',b,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(w,b,x){if(!w)return b(null);x=x||{};var v=f.parseAttributes(w,f.Rect.ATTRIBUTE_NAMES);v.left=v.left||0,v.top=v.top||0,v.height=v.height||0,v.width=v.width||0;var C=new f.Rect(_(x?f.util.object.clone(x):{},v));C.visible=C.visible&&C.width>0&&C.height>0,b(C)},f.Rect.fromObject=function(w,b){return f.Object._fromObject("Rect",w,b)}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.util.array.min,b=f.util.array.max,x=f.util.toFixed,v=f.util.projectStrokeOnPoints;if(f.Polyline){f.warn("fabric.Polyline is already defined");return}f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(C,T){T=T||{},this.points=C||[],this.callSuper("initialize",T),this._setPositionDimensions(T)},_projectStrokeOnPoints:function(){return v(this.points,this,!0)},_setPositionDimensions:function(C){var T=this._calcDimensions(C),S,M=this.exactBoundingBox?this.strokeWidth:0;this.width=T.width-M,this.height=T.height-M,C.fromSVG||(S=this.translateToGivenOrigin({x:T.left-this.strokeWidth/2+M/2,y:T.top-this.strokeWidth/2+M/2},"left","top",this.originX,this.originY)),typeof C.left>"u"&&(this.left=C.fromSVG?T.left:S.x),typeof C.top>"u"&&(this.top=C.fromSVG?T.top:S.y),this.pathOffset={x:T.left+this.width/2+M/2,y:T.top+this.height/2+M/2}},_calcDimensions:function(){var C=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,T=w(C,"x")||0,S=w(C,"y")||0,M=b(C,"x")||0,O=b(C,"y")||0,V=M-T,G=O-S;return{left:T,top:S,width:V,height:G}},toObject:function(C){return _(this.callSuper("toObject",C),{points:this.points.concat()})},_toSVG:function(){for(var C=[],T=this.pathOffset.x,S=this.pathOffset.y,M=f.Object.NUM_FRACTION_DIGITS,O=0,V=this.points.length;O<V;O++)C.push(x(this.points[O].x-T,M),",",x(this.points[O].y-S,M)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',C.join(""),`" />
`]},commonRender:function(C){var T,S=this.points.length,M=this.pathOffset.x,O=this.pathOffset.y;if(!S||isNaN(this.points[S-1].y))return!1;C.beginPath(),C.moveTo(this.points[0].x-M,this.points[0].y-O);for(var V=0;V<S;V++)T=this.points[V],C.lineTo(T.x-M,T.y-O);return!0},_render:function(C){!this.commonRender(C)||this._renderPaintInOrder(C)},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(C){return function(T,S,M){if(!T)return S(null);M||(M={});var O=f.parsePointsAttribute(T.getAttribute("points")),V=f.parseAttributes(T,f[C].ATTRIBUTE_NAMES);V.fromSVG=!0,S(new f[C](O,_(V,M)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(C,T){return f.Object._fromObject("Polyline",C,T,"points")}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.projectStrokeOnPoints;if(f.Polygon){f.warn("fabric.Polygon is already defined");return}f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return _(this.points,this)},_render:function(w){!this.commonRender(w)||(w.closePath(),this._renderPaintInOrder(w))}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(w,b){f.Object._fromObject("Polygon",w,b,"points")}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.array.min,w=f.util.array.max,b=f.util.object.extend,x=f.util.object.clone,v=f.util.toFixed;if(f.Path){f.warn("fabric.Path is already defined");return}f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(C,T){T=x(T||{}),delete T.path,this.callSuper("initialize",T),this._setPath(C||[],T)},_setPath:function(C,T){this.path=f.util.makePathSimpler(Array.isArray(C)?C:f.util.parsePath(C)),f.Polyline.prototype._setPositionDimensions.call(this,T||{})},_renderPathCommands:function(C){var T,S=0,M=0,O=0,V=0,G=0,Z=0,te=-this.pathOffset.x,J=-this.pathOffset.y;C.beginPath();for(var oe=0,Me=this.path.length;oe<Me;++oe)switch(T=this.path[oe],T[0]){case"L":O=T[1],V=T[2],C.lineTo(O+te,V+J);break;case"M":O=T[1],V=T[2],S=O,M=V,C.moveTo(O+te,V+J);break;case"C":O=T[5],V=T[6],G=T[3],Z=T[4],C.bezierCurveTo(T[1]+te,T[2]+J,G+te,Z+J,O+te,V+J);break;case"Q":C.quadraticCurveTo(T[1]+te,T[2]+J,T[3]+te,T[4]+J),O=T[3],V=T[4],G=T[1],Z=T[2];break;case"z":case"Z":O=S,V=M,C.closePath();break}},_render:function(C){this._renderPathCommands(C),this._renderPaintInOrder(C)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(C){return b(this.callSuper("toObject",C),{path:this.path.map(function(T){return T.slice()})})},toDatalessObject:function(C){var T=this.toObject(["sourcePath"].concat(C));return T.sourcePath&&delete T.path,T},_toSVG:function(){var C=f.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',C,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var C=f.Object.NUM_FRACTION_DIGITS;return" translate("+v(-this.pathOffset.x,C)+", "+v(-this.pathOffset.y,C)+")"},toClipPathSVG:function(C){var T=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},toSVG:function(C){var T=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var C=[],T=[],S,M=0,O=0,V=0,G=0,Z,te=0,J=this.path.length;te<J;++te){switch(S=this.path[te],S[0]){case"L":V=S[1],G=S[2],Z=[];break;case"M":V=S[1],G=S[2],M=V,O=G,Z=[];break;case"C":Z=f.util.getBoundsOfCurve(V,G,S[1],S[2],S[3],S[4],S[5],S[6]),V=S[5],G=S[6];break;case"Q":Z=f.util.getBoundsOfCurve(V,G,S[1],S[2],S[1],S[2],S[3],S[4]),V=S[3],G=S[4];break;case"z":case"Z":V=M,G=O;break}Z.forEach(function(me){C.push(me.x),T.push(me.y)}),C.push(V),T.push(G)}var oe=_(C)||0,Me=_(T)||0,Fe=w(C)||0,pe=w(T)||0,Ie=Fe-oe,Se=pe-Me;return{left:oe,top:Me,width:Ie,height:Se}}}),f.Path.fromObject=function(C,T){if(typeof C.sourcePath=="string"){var S=C.sourcePath;f.loadSVGFromURL(S,function(M){var O=M[0];O.setOptions(C),C.clipPath?f.util.enlivenObjects([C.clipPath],function(V){O.clipPath=V[0],T&&T(O)}):T&&T(O)})}else f.Object._fromObject("Path",C,T,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(C,T,S){var M=f.parseAttributes(C,f.Path.ATTRIBUTE_NAMES);M.fromSVG=!0,T(new f.Path(M.d,b(M,S)))}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.array.min,w=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(b,x,v){x=x||{},this._objects=[],v&&this.callSuper("initialize",x),this._objects=b||[];for(var C=this._objects.length;C--;)this._objects[C].group=this;if(v)this._updateObjectsACoords();else{var T=x&&x.centerPoint;x.originX!==void 0&&(this.originX=x.originX),x.originY!==void 0&&(this.originY=x.originY),T||this._calcBounds(),this._updateObjectsCoords(T),delete x.centerPoint,this.callSuper("initialize",x)}this.setCoords()},_updateObjectsACoords:function(){for(var b=!0,x=this._objects.length;x--;)this._objects[x].setCoords(b)},_updateObjectsCoords:function(x){for(var x=x||this.getCenterPoint(),v=this._objects.length;v--;)this._updateObjectCoords(this._objects[v],x)},_updateObjectCoords:function(b,x){var v=b.left,C=b.top,T=!0;b.set({left:v-x.x,top:C-x.y}),b.group=this,b.setCoords(T)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(b){var x=!!this.group;return this._restoreObjectsState(),f.util.resetObjectTransform(this),b&&(x&&f.util.removeTransformFromObject(b,this.group.calcTransformMatrix()),this._objects.push(b),b.group=this,b._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,x?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(b){return this._restoreObjectsState(),f.util.resetObjectTransform(this),this.remove(b),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(b){this.dirty=!0,b.group=this,b._set("canvas",this.canvas)},_onObjectRemoved:function(b){this.dirty=!0,delete b.group},_set:function(b,x){var v=this._objects.length;if(this.useSetOnGroup)for(;v--;)this._objects[v].setOnGroup(b,x);if(b==="canvas")for(;v--;)this._objects[v]._set(b,x);f.Object.prototype._set.call(this,b,x)},toObject:function(b){var x=this.includeDefaultValues,v=this._objects.filter(function(T){return!T.excludeFromExport}).map(function(T){var S=T.includeDefaultValues;T.includeDefaultValues=x;var M=T.toObject(b);return T.includeDefaultValues=S,M}),C=f.Object.prototype.toObject.call(this,b);return C.objects=v,C},toDatalessObject:function(b){var x,v=this.sourcePath;if(v)x=v;else{var C=this.includeDefaultValues;x=this._objects.map(function(S){var M=S.includeDefaultValues;S.includeDefaultValues=C;var O=S.toDatalessObject(b);return S.includeDefaultValues=M,O})}var T=f.Object.prototype.toDatalessObject.call(this,b);return T.objects=x,T},render:function(b){this._transformDone=!0,this.callSuper("render",b),this._transformDone=!1},shouldCache:function(){var b=f.Object.prototype.shouldCache.call(this);if(b){for(var x=0,v=this._objects.length;x<v;x++)if(this._objects[x].willDrawShadow())return this.ownCaching=!1,!1}return b},willDrawShadow:function(){if(f.Object.prototype.willDrawShadow.call(this))return!0;for(var b=0,x=this._objects.length;b<x;b++)if(this._objects[b].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(b){for(var x=0,v=this._objects.length;x<v;x++)this._objects[x].render(b);this._drawClipPath(b,this.clipPath)},isCacheDirty:function(b){if(this.callSuper("isCacheDirty",b))return!0;if(!this.statefullCache)return!1;for(var x=0,v=this._objects.length;x<v;x++)if(this._objects[x].isCacheDirty(!0)){if(this._cacheCanvas){var C=this.cacheWidth/this.zoomX,T=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-C/2,-T/2,C,T)}return!0}return!1},_restoreObjectsState:function(){var b=this.calcOwnMatrix();return this._objects.forEach(function(x){f.util.addTransformToObject(x,b),delete x.group,x.setCoords()}),this},destroy:function(){return this._objects.forEach(function(b){b.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(b){b.dispose&&b.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var b=this._objects,x=this.canvas;this._objects=[];var v=this.toObject();delete v.objects;var C=new f.ActiveSelection([]);return C.set(v),C.type="activeSelection",x.remove(this),b.forEach(function(T){T.group=C,T.dirty=!0,x.add(T)}),C.canvas=x,C._objects=b,x._activeObject=C,C.setCoords(),C}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var b=!0;return this.forEachObject(function(x){x.setCoords(b)}),this},_calcBounds:function(b){for(var x=[],v=[],C,T,S,M=["tr","br","bl","tl"],O=0,V=this._objects.length,G,Z=M.length;O<V;++O){for(C=this._objects[O],S=C.calcACoords(),G=0;G<Z;G++)T=M[G],x.push(S[T].x),v.push(S[T].y);C.aCoords=S}this._getBounds(x,v,b)},_getBounds:function(b,x,v){var C=new f.Point(_(b),_(x)),T=new f.Point(w(b),w(x)),S=C.y||0,M=C.x||0,O=T.x-C.x||0,V=T.y-C.y||0;this.width=O,this.height=V,v||this.setPositionByOrigin({x:M,y:S},"left","top")},_toSVG:function(b){for(var x=["<g ","COMMON_PARTS",` >
`],v=0,C=this._objects.length;v<C;v++)x.push("		",this._objects[v].toSVG(b));return x.push(`</g>
`),x},getSvgStyles:function(){var b=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",x=this.visible?"":" visibility: hidden;";return[b,this.getSvgFilter(),x].join("")},toClipPathSVG:function(b){for(var x=[],v=0,C=this._objects.length;v<C;v++)x.push("	",this._objects[v].toClipPathSVG(b));return this._createBaseClipPathSVGMarkup(x,{reviver:b})}}),f.Group.fromObject=function(b,x){var v=b.objects,C=f.util.object.clone(b,!0);if(delete C.objects,typeof v=="string"){f.loadSVGFromURL(v,function(T){var S=f.util.groupSVGElements(T,b,v),M=C.clipPath;delete C.clipPath,S.set(C),M?f.util.enlivenObjects([M],function(O){S.clipPath=O[0],x&&x(S)}):x&&x(S)});return}f.util.enlivenObjects(v,function(T){f.util.enlivenObjectEnlivables(b,C,function(){x&&x(new f.Group(T,C,!0))})})})}(i),function(r){var f=r.fabric||(r.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(_,w){w=w||{},this._objects=_||[];for(var b=this._objects.length;b--;)this._objects[b].group=this;w.originX&&(this.originX=w.originX),w.originY&&(this.originY=w.originY),this._calcBounds(),this._updateObjectsCoords(),f.Object.prototype.initialize.call(this,w),this.setCoords()},toGroup:function(){var _=this._objects.concat();this._objects=[];var w=f.Object.prototype.toObject.call(this),b=new f.Group([]);if(delete w.type,b.set(w),_.forEach(function(v){v.canvas.remove(v),v.group=b}),b._objects=_,!this.canvas)return b;var x=this.canvas;return x.add(b),x._activeObject=b,b.setCoords(),b},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(_,w,b){_.save(),_.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",_,w),b=b||{},typeof b.hasControls>"u"&&(b.hasControls=!1),b.forActiveSelection=!0;for(var x=0,v=this._objects.length;x<v;x++)this._objects[x]._renderControls(_,b);_.restore()}}),f.ActiveSelection.fromObject=function(_,w){f.util.enlivenObjects(_.objects,function(b){delete _.objects,w&&w(new f.ActiveSelection(b,_,!0))})})}(i),function(r){var f=e.util.object.extend;if(r.fabric||(r.fabric={}),r.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(_,w){w||(w={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",w),this._initElement(_,w)},getElement:function(){return this._element||{}},setElement:function(_,w){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=_,this._originalElement=_,this._initConfig(w),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(_){var w=e.filterBackend;w&&w.evictCachesForKey&&w.evictCachesForKey(_)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(_){e.util.cleanUpJsdomNode(this[_]),this[_]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var _=this.getElement();return{width:_.naturalWidth||_.width,height:_.naturalHeight||_.height}},_stroke:function(_){if(!(!this.stroke||this.strokeWidth===0)){var w=this.width/2,b=this.height/2;_.beginPath(),_.moveTo(-w,-b),_.lineTo(w,-b),_.lineTo(w,b),_.lineTo(-w,b),_.lineTo(-w,-b),_.closePath()}},toObject:function(_){var w=[];this.filters.forEach(function(x){x&&w.push(x.toObject())});var b=f(this.callSuper("toObject",["cropX","cropY"].concat(_)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:w});return this.resizeFilter&&(b.resizeFilter=this.resizeFilter.toObject()),b},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var _=[],w=[],b,x=this._element,v=-this.width/2,C=-this.height/2,T="",S="";if(!x)return[];if(this.hasCrop()){var M=e.Object.__uid++;_.push('<clipPath id="imageCrop_'+M+`">
`,'	<rect x="'+v+'" y="'+C+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),T=' clip-path="url(#imageCrop_'+M+')" '}if(this.imageSmoothing||(S='" image-rendering="optimizeSpeed'),w.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',v-this.cropX,'" y="',C-this.cropY,'" width="',x.width||x.naturalWidth,'" height="',x.height||x.height,S,'"',T,`></image>
`),this.stroke||this.strokeDashArray){var O=this.fill;this.fill=null,b=["	<rect ",'x="',v,'" y="',C,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=O}return this.paintFirst!=="fill"?_=_.concat(b,w):_=_.concat(w,b),_},getSrc:function(_){var w=_?this._element:this._originalElement;return w?w.toDataURL?w.toDataURL():this.srcFromAttribute?w.getAttribute("src"):w.src:this.src||""},setSrc:function(_,w,b){return e.util.loadImage(_,function(x,v){this.setElement(x,b),this._setWidthHeight(),w&&w(this,v)},this,b&&b.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var _=this.resizeFilter,w=this.minimumScaleTrigger,b=this.getTotalObjectScaling(),x=b.scaleX,v=b.scaleY,C=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!_||x>w&&v>w){this._element=C,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=x,this._lastScaleY=v;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var T=e.util.createCanvasElement(),S=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,M=C.width,O=C.height;T.width=M,T.height=O,this._element=T,this._lastScaleX=_.scaleX=x,this._lastScaleY=_.scaleY=v,e.filterBackend.applyFilters([_],C,M,O,this._element,S),this._filterScalingX=T.width/this._originalElement.width,this._filterScalingY=T.height/this._originalElement.height},applyFilters:function(_){if(_=_||this.filters||[],_=_.filter(function(C){return C&&!C.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),_.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var w=this._originalElement,b=w.naturalWidth||w.width,x=w.naturalHeight||w.height;if(this._element===this._originalElement){var v=e.util.createCanvasElement();v.width=b,v.height=x,this._element=v,this._filteredEl=v}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,b,x),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(_,this._originalElement,b,x,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(_){e.util.setImageSmoothing(_,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(_),this._renderPaintInOrder(_)},drawCacheOnCanvas:function(_){e.util.setImageSmoothing(_,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,_)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(_){var w=this._element;if(!!w){var b=this._filterScalingX,x=this._filterScalingY,v=this.width,C=this.height,T=Math.min,S=Math.max,M=S(this.cropX,0),O=S(this.cropY,0),V=w.naturalWidth||w.width,G=w.naturalHeight||w.height,Z=M*b,te=O*x,J=T(v*b,V-Z),oe=T(C*x,G-te),Me=-v/2,Fe=-C/2,pe=T(v,V/b-M),Ie=T(C,G/x-O);w&&_.drawImage(w,Z,te,J,oe,Me,Fe,pe,Ie)}},_needsResize:function(){var _=this.getTotalObjectScaling();return _.scaleX!==this._lastScaleX||_.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(_,w){this.setElement(e.util.getById(_),w),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(_){_||(_={}),this.setOptions(_),this._setWidthHeight(_)},_initFilters:function(_,w){_&&_.length?e.util.enlivenObjects(_,function(b){w&&w(b)},"fabric.Image.filters"):w&&w()},_setWidthHeight:function(_){_||(_={});var w=this.getElement();this.width=_.width||w.naturalWidth||w.width||0,this.height=_.height||w.naturalHeight||w.height||0},parsePreserveAspectRatioAttribute:function(){var _=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),w=this._element.width,b=this._element.height,x=1,v=1,C=0,T=0,S=0,M=0,O,V=this.width,G=this.height,Z={width:V,height:G};return _&&(_.alignX!=="none"||_.alignY!=="none")?(_.meetOrSlice==="meet"&&(x=v=e.util.findScaleToFit(this._element,Z),O=(V-w*x)/2,_.alignX==="Min"&&(C=-O),_.alignX==="Max"&&(C=O),O=(G-b*v)/2,_.alignY==="Min"&&(T=-O),_.alignY==="Max"&&(T=O)),_.meetOrSlice==="slice"&&(x=v=e.util.findScaleToCover(this._element,Z),O=w-V/x,_.alignX==="Mid"&&(S=O/2),_.alignX==="Max"&&(S=O),O=b-G/v,_.alignY==="Mid"&&(M=O/2),_.alignY==="Max"&&(M=O),w=V/x,b=G/v)):(x=V/w,v=G/b),{width:w,height:b,scaleX:x,scaleY:v,offsetLeft:C,offsetTop:T,cropX:S,cropY:M}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(_,w){var b=e.util.object.clone(_);e.util.loadImage(b.src,function(x,v){if(v){w&&w(null,!0);return}e.Image.prototype._initFilters.call(b,b.filters,function(C){b.filters=C||[],e.Image.prototype._initFilters.call(b,[b.resizeFilter],function(T){b.resizeFilter=T[0],e.util.enlivenObjectEnlivables(b,b,function(){var S=new e.Image(x,b);w(S,!1)})})})},null,b.crossOrigin)},e.Image.fromURL=function(_,w,b){e.util.loadImage(_,function(x,v){w&&w(new e.Image(x,b),v)},null,b&&b.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(_,w,b){var x=e.parseAttributes(_,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(x["xlink:href"],w,f(b?e.util.object.clone(b):{},x))}}(i),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var r=this.angle%360;return r>0?Math.round((r-1)/90)*90:Math.round(r/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(r){r=r||{};var f=function(){},_=r.onComplete||f,w=r.onChange||f,b=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(x){b.rotate(x),w()},onComplete:function(){b.setCoords(),_()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(r){return r.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(r){return r.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function r(_,w){var b="precision "+w+` float;
void main(){}`,x=_.createShader(_.FRAGMENT_SHADER);return _.shaderSource(x,b),_.compileShader(x),!!_.getShaderParameter(x,_.COMPILE_STATUS)}e.isWebglSupported=function(_){if(e.isLikelyNode)return!1;_=_||e.WebglFilterBackend.prototype.tileSize;var w=document.createElement("canvas"),b=w.getContext("webgl")||w.getContext("experimental-webgl"),x=!1;if(b){e.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE),x=e.maxTextureSize>=_;for(var v=["highp","mediump","lowp"],C=0;C<3;C++)if(r(b,v[C])){e.webGlPrecision=v[C];break}}return this.isSupported=x,x},e.WebglFilterBackend=f;function f(_){_&&_.tileSize&&(this.tileSize=_.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}f.prototype={tileSize:2048,resources:{},setupGLContext:function(_,w){this.dispose(),this.createWebGLCanvas(_,w),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(_,w)},chooseFastestCopyGLTo2DMethod:function(_,w){var b=typeof window.performance<"u",x;try{new ImageData(1,1),x=!0}catch{x=!1}var v=typeof ArrayBuffer<"u",C=typeof Uint8ClampedArray<"u";if(!!(b&&x&&v&&C)){var T=e.util.createCanvasElement(),S=new ArrayBuffer(_*w*4);if(e.forceGLPutImageData){this.imageBuffer=S,this.copyGLTo2D=m;return}var M={imageBuffer:S,destinationWidth:_,destinationHeight:w,targetCanvas:T},O,V,G;T.width=_,T.height=w,O=window.performance.now(),u.call(M,this.gl,M),V=window.performance.now()-O,O=window.performance.now(),m.call(M,this.gl,M),G=window.performance.now()-O,V>G?(this.imageBuffer=S,this.copyGLTo2D=m):this.copyGLTo2D=u}},createWebGLCanvas:function(_,w){var b=e.util.createCanvasElement();b.width=_,b.height=w;var x={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},v=b.getContext("webgl",x);v||(v=b.getContext("experimental-webgl",x)),v&&(v.clearColor(0,0,0,0),this.canvas=b,this.gl=v)},applyFilters:function(_,w,b,x,v,C){var T=this.gl,S;C&&(S=this.getCachedTexture(C,w));var M={originalWidth:w.width||w.originalWidth,originalHeight:w.height||w.originalHeight,sourceWidth:b,sourceHeight:x,destinationWidth:b,destinationHeight:x,context:T,sourceTexture:this.createTexture(T,b,x,!S&&w),targetTexture:this.createTexture(T,b,x),originalTexture:S||this.createTexture(T,b,x,!S&&w),passes:_.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:v},O=T.createFramebuffer();return T.bindFramebuffer(T.FRAMEBUFFER,O),_.forEach(function(V){V&&V.applyTo(M)}),l(M),this.copyGLTo2D(T,M),T.bindTexture(T.TEXTURE_2D,null),T.deleteTexture(M.sourceTexture),T.deleteTexture(M.targetTexture),T.deleteFramebuffer(O),v.getContext("2d").setTransform(1,0,0,1,0,0),M},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(_,w,b,x){var v=_.createTexture();return _.bindTexture(_.TEXTURE_2D,v),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),x?_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,x):_.texImage2D(_.TEXTURE_2D,0,_.RGBA,w,b,0,_.RGBA,_.UNSIGNED_BYTE,null),v},getCachedTexture:function(_,w){if(this.textureCache[_])return this.textureCache[_];var b=this.createTexture(this.gl,w.width,w.height,w);return this.textureCache[_]=b,b},evictCachesForKey:function(_){this.textureCache[_]&&(this.gl.deleteTexture(this.textureCache[_]),delete this.textureCache[_])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var _=this.gl,w={renderer:"",vendor:""};if(!_)return w;var b=_.getExtension("WEBGL_debug_renderer_info");if(b){var x=_.getParameter(b.UNMASKED_RENDERER_WEBGL),v=_.getParameter(b.UNMASKED_VENDOR_WEBGL);x&&(w.renderer=x.toLowerCase()),v&&(w.vendor=v.toLowerCase())}return this.gpuInfo=w,w}}}();function l(r){var f=r.targetCanvas,_=f.width,w=f.height,b=r.destinationWidth,x=r.destinationHeight;(_!==b||w!==x)&&(f.width=b,f.height=x)}function u(r,f){var _=r.canvas,w=f.targetCanvas,b=w.getContext("2d");b.translate(0,w.height),b.scale(1,-1);var x=_.height-w.height;b.drawImage(_,0,x,w.width,w.height,0,0,w.width,w.height)}function m(r,f){var _=f.targetCanvas,w=_.getContext("2d"),b=f.destinationWidth,x=f.destinationHeight,v=b*x*4,C=new Uint8Array(this.imageBuffer,0,v),T=new Uint8ClampedArray(this.imageBuffer,0,v);r.readPixels(0,0,b,x,r.RGBA,r.UNSIGNED_BYTE,C);var S=new ImageData(T,b,x);w.putImageData(S,0,0)}(function(){var r=function(){};e.Canvas2dFilterBackend=f;function f(){}f.prototype={evictCachesForKey:r,dispose:r,clearWebGLCaches:r,resources:{},applyFilters:function(_,w,b,x,v){var C=v.getContext("2d");C.drawImage(w,0,0,b,x);var T=C.getImageData(0,0,b,x),S=C.getImageData(0,0,b,x),M={sourceWidth:b,sourceHeight:x,imageData:T,originalEl:w,originalImageData:S,canvasEl:v,ctx:C,filterBackend:this};return _.forEach(function(O){O.applyTo(M)}),(M.imageData.width!==b||M.imageData.height!==x)&&(v.width=M.imageData.width,v.height=M.imageData.height),C.putImageData(M.imageData,0,0),M}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(r){r&&this.setOptions(r)},setOptions:function(r){for(var f in r)this[f]=r[f]},createProgram:function(r,f,_){f=f||this.fragmentSource,_=_||this.vertexSource,e.webGlPrecision!=="highp"&&(f=f.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var w=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(w,_),r.compileShader(w),!r.getShaderParameter(w,r.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+r.getShaderInfoLog(w));var b=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(b,f),r.compileShader(b),!r.getShaderParameter(b,r.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+r.getShaderInfoLog(b));var x=r.createProgram();if(r.attachShader(x,w),r.attachShader(x,b),r.linkProgram(x),!r.getProgramParameter(x,r.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+r.getProgramInfoLog(x));var v=this.getAttributeLocations(r,x),C=this.getUniformLocations(r,x)||{};return C.uStepW=r.getUniformLocation(x,"uStepW"),C.uStepH=r.getUniformLocation(x,"uStepH"),{program:x,attributeLocations:v,uniformLocations:C}},getAttributeLocations:function(r,f){return{aPosition:r.getAttribLocation(f,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(r,f,_){var w=f.aPosition,b=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,b),r.enableVertexAttribArray(w),r.vertexAttribPointer(w,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,_,r.STATIC_DRAW)},_setupFrameBuffer:function(r){var f=r.context,_,w;r.passes>1?(_=r.destinationWidth,w=r.destinationHeight,(r.sourceWidth!==_||r.sourceHeight!==w)&&(f.deleteTexture(r.targetTexture),r.targetTexture=r.filterBackend.createTexture(f,_,w)),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,r.targetTexture,0)):(f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish())},_swapTextures:function(r){r.passes--,r.pass++;var f=r.targetTexture;r.targetTexture=r.sourceTexture,r.sourceTexture=f},isNeutralState:function(){var r=this.mainParameter,f=e.Image.filters[this.type].prototype;if(r)if(Array.isArray(f[r])){for(var _=f[r].length;_--;)if(this[r][_]!==f[r][_])return!1;return!0}else return f[r]===this[r];else return!1},applyTo:function(r){r.webgl?(this._setupFrameBuffer(r),this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},retrieveShader:function(r){return r.programCache.hasOwnProperty(this.type)||(r.programCache[this.type]=this.createProgram(r.context)),r.programCache[this.type]},applyToWebGL:function(r){var f=r.context,_=this.retrieveShader(r);r.pass===0&&r.originalTexture?f.bindTexture(f.TEXTURE_2D,r.originalTexture):f.bindTexture(f.TEXTURE_2D,r.sourceTexture),f.useProgram(_.program),this.sendAttributeData(f,_.attributeLocations,r.aPosition),f.uniform1f(_.uniformLocations.uStepW,1/r.sourceWidth),f.uniform1f(_.uniformLocations.uStepH,1/r.sourceHeight),this.sendUniformData(f,_.uniformLocations),f.viewport(0,0,r.destinationWidth,r.destinationHeight),f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(r,f,_){r.activeTexture(_),r.bindTexture(r.TEXTURE_2D,f),r.activeTexture(r.TEXTURE0)},unbindAdditionalTexture:function(r,f){r.activeTexture(f),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(r){this[this.mainParameter]=r},sendUniformData:function(){},createHelpLayer:function(r){if(!r.helpLayer){var f=document.createElement("canvas");f.width=r.sourceWidth,f.height=r.sourceHeight,r.helpLayer=f}},toObject:function(){var r={type:this.type},f=this.mainParameter;return f&&(r[f]=this[f]),r},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(r,f){var _=new e.Image.filters[r.type](r);return f&&f(_),_},function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.ColorMatrix=w(_.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(b){this.callSuper("initialize",b),this.matrix=this.matrix.slice(0)},applyTo2d:function(b){var x=b.imageData,v=x.data,C=v.length,T=this.matrix,S,M,O,V,G,Z=this.colorsOnly;for(G=0;G<C;G+=4)S=v[G],M=v[G+1],O=v[G+2],Z?(v[G]=S*T[0]+M*T[1]+O*T[2]+T[4]*255,v[G+1]=S*T[5]+M*T[6]+O*T[7]+T[9]*255,v[G+2]=S*T[10]+M*T[11]+O*T[12]+T[14]*255):(V=v[G+3],v[G]=S*T[0]+M*T[1]+O*T[2]+V*T[3]+T[4]*255,v[G+1]=S*T[5]+M*T[6]+O*T[7]+V*T[8]+T[9]*255,v[G+2]=S*T[10]+M*T[11]+O*T[12]+V*T[13]+T[14]*255,v[G+3]=S*T[15]+M*T[16]+O*T[17]+V*T[18]+T[19]*255)},getUniformLocations:function(b,x){return{uColorMatrix:b.getUniformLocation(x,"uColorMatrix"),uConstants:b.getUniformLocation(x,"uConstants")}},sendUniformData:function(b,x){var v=this.matrix,C=[v[0],v[1],v[2],v[3],v[5],v[6],v[7],v[8],v[10],v[11],v[12],v[13],v[15],v[16],v[17],v[18]],T=[v[4],v[9],v[14],v[19]];b.uniformMatrix4fv(x.uColorMatrix,!1,C),b.uniform4fv(x.uConstants,T)}}),f.Image.filters.ColorMatrix.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Brightness=w(_.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(b){if(this.brightness!==0){var x=b.imageData,v=x.data,C,T=v.length,S=Math.round(this.brightness*255);for(C=0;C<T;C+=4)v[C]=v[C]+S,v[C+1]=v[C+1]+S,v[C+2]=v[C+2]+S}},getUniformLocations:function(b,x){return{uBrightness:b.getUniformLocation(x,"uBrightness")}},sendUniformData:function(b,x){b.uniform1f(x.uBrightness,this.brightness)}}),f.Image.filters.Brightness.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.Image.filters,b=f.util.createClass;w.Convolute=b(w.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(x){var v=Math.sqrt(this.matrix.length),C=this.type+"_"+v+"_"+(this.opaque?1:0),T=this.fragmentSource[C];return x.programCache.hasOwnProperty(C)||(x.programCache[C]=this.createProgram(x.context,T)),x.programCache[C]},applyTo2d:function(x){var v=x.imageData,C=v.data,T=this.matrix,S=Math.round(Math.sqrt(T.length)),M=Math.floor(S/2),O=v.width,V=v.height,G=x.ctx.createImageData(O,V),Z=G.data,te=this.opaque?1:0,J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we;for(Et=0;Et<V;Et++)for(nt=0;nt<O;nt++){for(pe=(Et*O+nt)*4,J=0,oe=0,Me=0,Fe=0,we=0;we<S;we++)for(it=0;it<S;it++)Se=Et+we-M,Ie=nt+it-M,!(Se<0||Se>=V||Ie<0||Ie>=O)&&(me=(Se*O+Ie)*4,et=T[we*S+it],J+=C[me]*et,oe+=C[me+1]*et,Me+=C[me+2]*et,te||(Fe+=C[me+3]*et));Z[pe]=J,Z[pe+1]=oe,Z[pe+2]=Me,te?Z[pe+3]=C[pe+3]:Z[pe+3]=Fe}x.imageData=G},getUniformLocations:function(x,v){return{uMatrix:x.getUniformLocation(v,"uMatrix"),uOpaque:x.getUniformLocation(v,"uOpaque"),uHalfSize:x.getUniformLocation(v,"uHalfSize"),uSize:x.getUniformLocation(v,"uSize")}},sendUniformData:function(x,v){x.uniform1fv(v.uMatrix,this.matrix)},toObject:function(){return _(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),f.Image.filters.Convolute.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Grayscale=w(_.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(b){var x=b.imageData,v=x.data,C,T=v.length,S,M=this.mode;for(C=0;C<T;C+=4)M==="average"?S=(v[C]+v[C+1]+v[C+2])/3:M==="lightness"?S=(Math.min(v[C],v[C+1],v[C+2])+Math.max(v[C],v[C+1],v[C+2]))/2:M==="luminosity"&&(S=.21*v[C]+.72*v[C+1]+.07*v[C+2]),v[C]=S,v[C+1]=S,v[C+2]=S},retrieveShader:function(b){var x=this.type+"_"+this.mode;if(!b.programCache.hasOwnProperty(x)){var v=this.fragmentSource[this.mode];b.programCache[x]=this.createProgram(b.context,v)}return b.programCache[x]},getUniformLocations:function(b,x){return{uMode:b.getUniformLocation(x,"uMode")}},sendUniformData:function(b,x){var v=1;b.uniform1i(x.uMode,v)},isNeutralState:function(){return!1}}),f.Image.filters.Grayscale.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Invert=w(_.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(b){var x=b.imageData,v=x.data,C,T=v.length;for(C=0;C<T;C+=4)v[C]=255-v[C],v[C+1]=255-v[C+1],v[C+2]=255-v[C+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(b,x){return{uInvert:b.getUniformLocation(x,"uInvert")}},sendUniformData:function(b,x){b.uniform1i(x.uInvert,this.invert)}}),f.Image.filters.Invert.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.Image.filters,b=f.util.createClass;w.Noise=b(w.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(x){if(this.noise!==0){var v=x.imageData,C=v.data,T,S=C.length,M=this.noise,O;for(T=0,S=C.length;T<S;T+=4)O=(.5-Math.random())*M,C[T]+=O,C[T+1]+=O,C[T+2]+=O}},getUniformLocations:function(x,v){return{uNoise:x.getUniformLocation(v,"uNoise"),uSeed:x.getUniformLocation(v,"uSeed")}},sendUniformData:function(x,v){x.uniform1f(v.uNoise,this.noise/255),x.uniform1f(v.uSeed,Math.random())},toObject:function(){return _(this.callSuper("toObject"),{noise:this.noise})}}),f.Image.filters.Noise.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Pixelate=w(_.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(b){var x=b.imageData,v=x.data,C=x.height,T=x.width,S,M,O,V,G,Z,te,J,oe,Me,Fe;for(M=0;M<C;M+=this.blocksize)for(O=0;O<T;O+=this.blocksize)for(S=M*4*T+O*4,V=v[S],G=v[S+1],Z=v[S+2],te=v[S+3],Me=Math.min(M+this.blocksize,C),Fe=Math.min(O+this.blocksize,T),J=M;J<Me;J++)for(oe=O;oe<Fe;oe++)S=J*4*T+oe*4,v[S]=V,v[S+1]=G,v[S+2]=Z,v[S+3]=te},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(b,x){return{uBlocksize:b.getUniformLocation(x,"uBlocksize"),uStepW:b.getUniformLocation(x,"uStepW"),uStepH:b.getUniformLocation(x,"uStepH")}},sendUniformData:function(b,x){b.uniform1f(x.uBlocksize,this.blocksize)}}),f.Image.filters.Pixelate.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,w=f.Image.filters,b=f.util.createClass;w.RemoveColor=b(w.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(x){var v=x.imageData,C=v.data,T,S=this.distance*255,M,O,V,G=new f.Color(this.color).getSource(),Z=[G[0]-S,G[1]-S,G[2]-S],te=[G[0]+S,G[1]+S,G[2]+S];for(T=0;T<C.length;T+=4)M=C[T],O=C[T+1],V=C[T+2],M>Z[0]&&O>Z[1]&&V>Z[2]&&M<te[0]&&O<te[1]&&V<te[2]&&(C[T+3]=0)},getUniformLocations:function(x,v){return{uLow:x.getUniformLocation(v,"uLow"),uHigh:x.getUniformLocation(v,"uHigh")}},sendUniformData:function(x,v){var C=new f.Color(this.color).getSource(),T=parseFloat(this.distance),S=[0+C[0]/255-T,0+C[1]/255-T,0+C[2]/255-T,1],M=[C[0]/255+T,C[1]/255+T,C[2]/255+T,1];x.uniform4fv(v.uLow,S),x.uniform4fv(v.uHigh,M)},toObject:function(){return _(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass,b={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var x in b)_[x]=w(_.ColorMatrix,{type:x,matrix:b[x],mainParameter:!1,colorsOnly:!0}),f.Image.filters[x].fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric,_=f.Image.filters,w=f.util.createClass;_.BlendColor=w(_.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(b){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[b]+`}
}`},retrieveShader:function(b){var x=this.type+"_"+this.mode,v;return b.programCache.hasOwnProperty(x)||(v=this.buildSource(this.mode),b.programCache[x]=this.createProgram(b.context,v)),b.programCache[x]},applyTo2d:function(b){var x=b.imageData,v=x.data,C=v.length,T,S,M,O,V,G,Z,te=1-this.alpha;Z=new f.Color(this.color).getSource(),T=Z[0]*this.alpha,S=Z[1]*this.alpha,M=Z[2]*this.alpha;for(var J=0;J<C;J+=4)switch(O=v[J],V=v[J+1],G=v[J+2],this.mode){case"multiply":v[J]=O*T/255,v[J+1]=V*S/255,v[J+2]=G*M/255;break;case"screen":v[J]=255-(255-O)*(255-T)/255,v[J+1]=255-(255-V)*(255-S)/255,v[J+2]=255-(255-G)*(255-M)/255;break;case"add":v[J]=O+T,v[J+1]=V+S,v[J+2]=G+M;break;case"diff":case"difference":v[J]=Math.abs(O-T),v[J+1]=Math.abs(V-S),v[J+2]=Math.abs(G-M);break;case"subtract":v[J]=O-T,v[J+1]=V-S,v[J+2]=G-M;break;case"darken":v[J]=Math.min(O,T),v[J+1]=Math.min(V,S),v[J+2]=Math.min(G,M);break;case"lighten":v[J]=Math.max(O,T),v[J+1]=Math.max(V,S),v[J+2]=Math.max(G,M);break;case"overlay":v[J]=T<128?2*O*T/255:255-2*(255-O)*(255-T)/255,v[J+1]=S<128?2*V*S/255:255-2*(255-V)*(255-S)/255,v[J+2]=M<128?2*G*M/255:255-2*(255-G)*(255-M)/255;break;case"exclusion":v[J]=T+O-2*T*O/255,v[J+1]=S+V-2*S*V/255,v[J+2]=M+G-2*M*G/255;break;case"tint":v[J]=T+O*te,v[J+1]=S+V*te,v[J+2]=M+G*te}},getUniformLocations:function(b,x){return{uColor:b.getUniformLocation(x,"uColor")}},sendUniformData:function(b,x){var v=new f.Color(this.color).getSource();v[0]=this.alpha*v[0]/255,v[1]=this.alpha*v[1]/255,v[2]=this.alpha*v[2]/255,v[3]=this.alpha,b.uniform4fv(x.uColor,v)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric,_=f.Image.filters,w=f.util.createClass;_.BlendImage=w(_.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(b){var x=this.type+"_"+this.mode,v=this.fragmentSource[this.mode];return b.programCache.hasOwnProperty(x)||(b.programCache[x]=this.createProgram(b.context,v)),b.programCache[x]},applyToWebGL:function(b){var x=b.context,v=this.createTexture(b.filterBackend,this.image);this.bindAdditionalTexture(x,v,x.TEXTURE1),this.callSuper("applyToWebGL",b),this.unbindAdditionalTexture(x,x.TEXTURE1)},createTexture:function(b,x){return b.getCachedTexture(x.cacheKey,x._element)},calculateMatrix:function(){var b=this.image,x=b._element.width,v=b._element.height;return[1/b.scaleX,0,0,0,1/b.scaleY,0,-b.left/x,-b.top/v,1]},applyTo2d:function(b){var x=b.imageData,v=b.filterBackend.resources,C=x.data,T=C.length,S=x.width,M=x.height,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie=this.image,Se;v.blendImage||(v.blendImage=f.util.createCanvasElement()),Fe=v.blendImage,pe=Fe.getContext("2d"),Fe.width!==S||Fe.height!==M?(Fe.width=S,Fe.height=M):pe.clearRect(0,0,S,M),pe.setTransform(Ie.scaleX,0,0,Ie.scaleY,Ie.left,Ie.top),pe.drawImage(Ie._element,0,0,S,M),Se=pe.getImageData(0,0,S,M).data;for(var me=0;me<T;me+=4)switch(te=C[me],J=C[me+1],oe=C[me+2],Me=C[me+3],O=Se[me],V=Se[me+1],G=Se[me+2],Z=Se[me+3],this.mode){case"multiply":C[me]=te*O/255,C[me+1]=J*V/255,C[me+2]=oe*G/255,C[me+3]=Me*Z/255;break;case"mask":C[me+3]=Z;break}},getUniformLocations:function(b,x){return{uTransformMatrix:b.getUniformLocation(x,"uTransformMatrix"),uImage:b.getUniformLocation(x,"uImage")}},sendUniformData:function(b,x){var v=this.calculateMatrix();b.uniform1i(x.uImage,1),b.uniformMatrix3fv(x.uTransformMatrix,!1,v)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendImage.fromObject=function(b,x){f.Image.fromObject(b.image,function(v){var C=f.util.object.clone(b);C.image=v,x(new f.Image.filters.BlendImage(C))})}}(i),function(r){var f=r.fabric||(r.fabric={}),_=Math.pow,w=Math.floor,b=Math.sqrt,x=Math.abs,v=Math.round,C=Math.sin,T=Math.ceil,S=f.Image.filters,M=f.util.createClass;S.Resize=M(S.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(O,V){return{uDelta:O.getUniformLocation(V,"uDelta"),uTaps:O.getUniformLocation(V,"uTaps")}},sendUniformData:function(O,V){O.uniform2fv(V.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),O.uniform1fv(V.uTaps,this.taps)},retrieveShader:function(O){var V=this.getFilterWindow(),G=this.type+"_"+V;if(!O.programCache.hasOwnProperty(G)){var Z=this.generateShader(V);O.programCache[G]=this.createProgram(O.context,Z)}return O.programCache[G]},getFilterWindow:function(){var O=this.tempScale;return Math.ceil(this.lanczosLobes/O)},getTaps:function(){for(var O=this.lanczosCreate(this.lanczosLobes),V=this.tempScale,G=this.getFilterWindow(),Z=new Array(G),te=1;te<=G;te++)Z[te-1]=O(te*V);return Z},generateShader:function(Z){for(var V=new Array(Z),G=this.fragmentSourceTOP,Z,te=1;te<=Z;te++)V[te-1]=te+".0 * uDelta";return G+="uniform float uTaps["+Z+`];
`,G+=`void main() {
`,G+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,G+=`  float sum = 1.0;
`,V.forEach(function(J,oe){G+="  color += texture2D(uTexture, vTexCoord + "+J+") * uTaps["+oe+`];
`,G+="  color += texture2D(uTexture, vTexCoord - "+J+") * uTaps["+oe+`];
`,G+="  sum += 2.0 * uTaps["+oe+`];
`}),G+=`  gl_FragColor = color / sum;
`,G+="}",G},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(O){O.webgl?(O.passes++,this.width=O.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=O.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),O.destinationWidth=this.dW,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceWidth=O.destinationWidth,this.height=O.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),O.destinationHeight=this.dH,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceHeight=O.destinationHeight):this.applyTo2d(O)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(O){return function(V){if(V>=O||V<=-O)return 0;if(V<11920929e-14&&V>-11920929e-14)return 1;V*=Math.PI;var G=V/O;return C(V)/V*C(G)/G}},applyTo2d:function(O){var V=O.imageData,G=this.scaleX,Z=this.scaleY;this.rcpScaleX=1/G,this.rcpScaleY=1/Z;var te=V.width,J=V.height,oe=v(te*G),Me=v(J*Z),Fe;this.resizeType==="sliceHack"?Fe=this.sliceByTwo(O,te,J,oe,Me):this.resizeType==="hermite"?Fe=this.hermiteFastResize(O,te,J,oe,Me):this.resizeType==="bilinear"?Fe=this.bilinearFiltering(O,te,J,oe,Me):this.resizeType==="lanczos"&&(Fe=this.lanczosResize(O,te,J,oe,Me)),O.imageData=Fe},sliceByTwo:function(O,V,G,Z,te){var J=O.imageData,oe=.5,Me=!1,Fe=!1,pe=V*oe,Ie=G*oe,Se=f.filterBackend.resources,me,et,nt=0,Et=0,it=V,we=0;for(Se.sliceByTwo||(Se.sliceByTwo=document.createElement("canvas")),me=Se.sliceByTwo,(me.width<V*1.5||me.height<G)&&(me.width=V*1.5,me.height=G),et=me.getContext("2d"),et.clearRect(0,0,V*1.5,G),et.putImageData(J,0,0),Z=w(Z),te=w(te);!Me||!Fe;)V=pe,G=Ie,Z<w(pe*oe)?pe=w(pe*oe):(pe=Z,Me=!0),te<w(Ie*oe)?Ie=w(Ie*oe):(Ie=te,Fe=!0),et.drawImage(me,nt,Et,V,G,it,we,pe,Ie),nt=it,Et=we,we+=Ie;return et.getImageData(nt,Et,Z,te)},lanczosResize:function(O,V,G,Z,te){function J(Oe){var le,Ce,he,ge,Be,We,st,Xe,gt,Pt,ri;for(we.x=(Oe+.5)*Ie,ke.x=w(we.x),le=0;le<te;le++){for(we.y=(le+.5)*Se,ke.y=w(we.y),Be=0,We=0,st=0,Xe=0,gt=0,Ce=ke.x-nt;Ce<=ke.x+nt;Ce++)if(!(Ce<0||Ce>=V)){Pt=w(1e3*x(Ce-we.x)),it[Pt]||(it[Pt]={});for(var ut=ke.y-Et;ut<=ke.y+Et;ut++)ut<0||ut>=G||(ri=w(1e3*x(ut-we.y)),it[Pt][ri]||(it[Pt][ri]=pe(b(_(Pt*me,2)+_(ri*et,2))/1e3)),he=it[Pt][ri],he>0&&(ge=(ut*V+Ce)*4,Be+=he,We+=he*oe[ge],st+=he*oe[ge+1],Xe+=he*oe[ge+2],gt+=he*oe[ge+3]))}ge=(le*Z+Oe)*4,Fe[ge]=We/Be,Fe[ge+1]=st/Be,Fe[ge+2]=Xe/Be,Fe[ge+3]=gt/Be}return++Oe<Z?J(Oe):Me}var oe=O.imageData.data,Me=O.ctx.createImageData(Z,te),Fe=Me.data,pe=this.lanczosCreate(this.lanczosLobes),Ie=this.rcpScaleX,Se=this.rcpScaleY,me=2/this.rcpScaleX,et=2/this.rcpScaleY,nt=T(Ie*this.lanczosLobes/2),Et=T(Se*this.lanczosLobes/2),it={},we={},ke={};return J(0)},bilinearFiltering:function(O,V,G,Z,te){var J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we=0,ke,Oe=this.rcpScaleX,le=this.rcpScaleY,Ce=4*(V-1),he=O.imageData,ge=he.data,Be=O.ctx.createImageData(Z,te),We=Be.data;for(Se=0;Se<te;Se++)for(me=0;me<Z;me++)for(pe=w(Oe*me),Ie=w(le*Se),et=Oe*me-pe,nt=le*Se-Ie,ke=4*(Ie*V+pe),Et=0;Et<4;Et++)J=ge[ke+Et],oe=ge[ke+4+Et],Me=ge[ke+Ce+Et],Fe=ge[ke+Ce+4+Et],it=J*(1-et)*(1-nt)+oe*et*(1-nt)+Me*nt*(1-et)+Fe*et*nt,We[we++]=it;return Be},hermiteFastResize:function(O,V,G,Z,te){for(var J=this.rcpScaleX,oe=this.rcpScaleY,Me=T(J/2),Fe=T(oe/2),pe=O.imageData,Ie=pe.data,Se=O.ctx.createImageData(Z,te),me=Se.data,et=0;et<te;et++)for(var nt=0;nt<Z;nt++){for(var Et=(nt+et*Z)*4,it=0,we=0,ke=0,Oe=0,le=0,Ce=0,he=0,ge=(et+.5)*oe,Be=w(et*oe);Be<(et+1)*oe;Be++)for(var We=x(ge-(Be+.5))/Fe,st=(nt+.5)*J,Xe=We*We,gt=w(nt*J);gt<(nt+1)*J;gt++){var Pt=x(st-(gt+.5))/Me,ri=b(Xe+Pt*Pt);ri>1&&ri<-1||(it=2*ri*ri*ri-3*ri*ri+1,it>0&&(Pt=4*(gt+Be*V),he+=it*Ie[Pt+3],ke+=it,Ie[Pt+3]<255&&(it=it*Ie[Pt+3]/250),Oe+=it*Ie[Pt],le+=it*Ie[Pt+1],Ce+=it*Ie[Pt+2],we+=it))}me[Et]=Oe/we,me[Et+1]=le/we,me[Et+2]=Ce/we,me[Et+3]=he/ke}return Se},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Contrast=w(_.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(b){if(this.contrast!==0){var x=b.imageData,v,T,C=x.data,T=C.length,S=Math.floor(this.contrast*255),M=259*(S+255)/(255*(259-S));for(v=0;v<T;v+=4)C[v]=M*(C[v]-128)+128,C[v+1]=M*(C[v+1]-128)+128,C[v+2]=M*(C[v+2]-128)+128}},getUniformLocations:function(b,x){return{uContrast:b.getUniformLocation(x,"uContrast")}},sendUniformData:function(b,x){b.uniform1f(x.uContrast,this.contrast)}}),f.Image.filters.Contrast.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Saturation=w(_.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(b){if(this.saturation!==0){var x=b.imageData,v=x.data,C=v.length,T=-this.saturation,S,M;for(S=0;S<C;S+=4)M=Math.max(v[S],v[S+1],v[S+2]),v[S]+=M!==v[S]?(M-v[S])*T:0,v[S+1]+=M!==v[S+1]?(M-v[S+1])*T:0,v[S+2]+=M!==v[S+2]?(M-v[S+2])*T:0}},getUniformLocations:function(b,x){return{uSaturation:b.getUniformLocation(x,"uSaturation")}},sendUniformData:function(b,x){b.uniform1f(x.uSaturation,-this.saturation)}}),f.Image.filters.Saturation.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Vibrance=w(_.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(b){if(this.vibrance!==0){var x=b.imageData,v=x.data,C=v.length,T=-this.vibrance,S,M,O,V;for(S=0;S<C;S+=4)M=Math.max(v[S],v[S+1],v[S+2]),O=(v[S]+v[S+1]+v[S+2])/3,V=Math.abs(M-O)*2/255*T,v[S]+=M!==v[S]?(M-v[S])*V:0,v[S+1]+=M!==v[S+1]?(M-v[S+1])*V:0,v[S+2]+=M!==v[S+2]?(M-v[S+2])*V:0}},getUniformLocations:function(b,x){return{uVibrance:b.getUniformLocation(x,"uVibrance")}},sendUniformData:function(b,x){b.uniform1f(x.uVibrance,-this.vibrance)}}),f.Image.filters.Vibrance.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Blur=w(_.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(b){b.webgl?(this.aspectRatio=b.sourceWidth/b.sourceHeight,b.passes++,this._setupFrameBuffer(b),this.horizontal=!0,this.applyToWebGL(b),this._swapTextures(b),this._setupFrameBuffer(b),this.horizontal=!1,this.applyToWebGL(b),this._swapTextures(b)):this.applyTo2d(b)},applyTo2d:function(b){b.imageData=this.simpleBlur(b)},simpleBlur:function(b){var x=b.filterBackend.resources,v,C,T=b.imageData.width,S=b.imageData.height;x.blurLayer1||(x.blurLayer1=f.util.createCanvasElement(),x.blurLayer2=f.util.createCanvasElement()),v=x.blurLayer1,C=x.blurLayer2,(v.width!==T||v.height!==S)&&(C.width=v.width=T,C.height=v.height=S);var M=v.getContext("2d"),O=C.getContext("2d"),V=15,G,Z,te,J,oe=this.blur*.06*.5;for(M.putImageData(b.imageData,0,0),O.clearRect(0,0,T,S),J=-V;J<=V;J++)G=(Math.random()-.5)/4,Z=J/V,te=oe*Z*T+G,O.globalAlpha=1-Math.abs(Z),O.drawImage(v,te,G),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);for(J=-V;J<=V;J++)G=(Math.random()-.5)/4,Z=J/V,te=oe*Z*S+G,O.globalAlpha=1-Math.abs(Z),O.drawImage(v,G,te),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);b.ctx.drawImage(v,0,0);var Me=b.ctx.getImageData(0,0,v.width,v.height);return M.globalAlpha=1,M.clearRect(0,0,v.width,v.height),Me},getUniformLocations:function(b,x){return{delta:b.getUniformLocation(x,"uDelta")}},sendUniformData:function(b,x){var v=this.chooseRightDelta();b.uniform2fv(x.delta,v)},chooseRightDelta:function(){var b=1,x=[0,0],v;return this.horizontal?this.aspectRatio>1&&(b=1/this.aspectRatio):this.aspectRatio<1&&(b=this.aspectRatio),v=b*this.blur*.12,this.horizontal?x[0]=v:x[1]=v,x}}),_.Blur.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Gamma=w(_.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(b){this.gamma=[1,1,1],_.BaseFilter.prototype.initialize.call(this,b)},applyTo2d:function(b){var x=b.imageData,v=x.data,C=this.gamma,T=v.length,S=1/C[0],M=1/C[1],O=1/C[2],V;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),V=0,T=256;V<T;V++)this.rVals[V]=Math.pow(V/255,S)*255,this.gVals[V]=Math.pow(V/255,M)*255,this.bVals[V]=Math.pow(V/255,O)*255;for(V=0,T=v.length;V<T;V+=4)v[V]=this.rVals[v[V]],v[V+1]=this.gVals[v[V+1]],v[V+2]=this.bVals[v[V+2]]},getUniformLocations:function(b,x){return{uGamma:b.getUniformLocation(x,"uGamma")}},sendUniformData:function(b,x){b.uniform3fv(x.uGamma,this.gamma)}}),f.Image.filters.Gamma.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.Composed=w(_.BaseFilter,{type:"Composed",subFilters:[],initialize:function(b){this.callSuper("initialize",b),this.subFilters=this.subFilters.slice(0)},applyTo:function(b){b.passes+=this.subFilters.length-1,this.subFilters.forEach(function(x){x.applyTo(b)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(b){return b.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(b){return!b.isNeutralState()})}}),f.Image.filters.Composed.fromObject=function(b,x){var v=b.subFilters||[],C=v.map(function(S){return new f.Image.filters[S.type](S)}),T=new f.Image.filters.Composed({subFilters:C});return x&&x(T),T}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,w=f.util.createClass;_.HueRotation=w(_.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var b=this.rotation*Math.PI,x=f.util.cos(b),v=f.util.sin(b),C=1/3,T=Math.sqrt(C)*v,S=1-x;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=x+S/3,this.matrix[1]=C*S-T,this.matrix[2]=C*S+T,this.matrix[5]=C*S+T,this.matrix[6]=x+C*S,this.matrix[7]=C*S-T,this.matrix[10]=C*S-T,this.matrix[11]=C*S+T,this.matrix[12]=x+C*S},isNeutralState:function(b){return this.calculateMatrix(),_.BaseFilter.prototype.isNeutralState.call(this,b)},applyTo:function(b){this.calculateMatrix(),_.BaseFilter.prototype.applyTo.call(this,b)}}),f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.clone;if(f.Text){f.warn("fabric.Text is already defined");return}var w="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat(w),cacheProperties:f.Object.prototype.cacheProperties.concat(w),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(b,x){this.styles=x?x.styles||{}:{},this.text=b,this.__skipDimension=!0,this.callSuper("initialize",x),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var b=this.path;b&&(b.segmentsInfo=f.util.getPathSegmentsInfo(b.path))},getMeasuringContext:function(){return f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d")),f._measuringContext},_splitText:function(){var b=this._splitTextIntoLines(this.text);return this.textLines=b.lines,this._textLines=b.graphemeLines,this._unwrappedTextLines=b._unwrappedLines,this._text=b.graphemeText,b},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var b,x,v,C,T,S,M,O=0,V=this._textLines.length;O<V;O++)if(!(this.textAlign!=="justify"&&(O===V-1||this.isEndOfWrapping(O)))&&(C=0,T=this._textLines[O],x=this.getLineWidth(O),x<this.width&&(M=this.textLines[O].match(this._reSpacesAndTabs)))){v=M.length,b=(this.width-x)/v;for(var G=0,Z=T.length;G<=Z;G++)S=this.__charBounds[O][G],this._reSpaceAndTab.test(T[G])?(S.width+=b,S.kernedWidth+=b,S.left+=C,C+=b):S.left+=C}},isEndOfWrapping:function(b){return b===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var b=this.callSuper("_getCacheCanvasDimensions"),x=this.fontSize;return b.width+=x*b.zoomX,b.height+=x*b.zoomY,b},_render:function(b){var x=this.path;x&&!x.isNotVisible()&&x._render(b),this._setTextStyles(b),this._renderTextLinesBackground(b),this._renderTextDecoration(b,"underline"),this._renderText(b),this._renderTextDecoration(b,"overline"),this._renderTextDecoration(b,"linethrough")},_renderText:function(b){this.paintFirst==="stroke"?(this._renderTextStroke(b),this._renderTextFill(b)):(this._renderTextFill(b),this._renderTextStroke(b))},_setTextStyles:function(b,x,v){if(b.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":b.textBaseline="middle";break;case"ascender":b.textBaseline="top";break;case"descender":b.textBaseline="bottom";break}b.font=this._getFontDeclaration(x,v)},calcTextWidth:function(){for(var b=this.getLineWidth(0),x=1,v=this._textLines.length;x<v;x++){var C=this.getLineWidth(x);C>b&&(b=C)}return b},_renderTextLine:function(b,x,v,C,T,S){this._renderChars(b,x,v,C,T,S)},_renderTextLinesBackground:function(b){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var x,v,C=b.fillStyle,T,S,M=this._getLeftOffset(),O=this._getTopOffset(),V=0,G=0,Z,te,J=this.path,oe,Me=0,Fe=this._textLines.length;Me<Fe;Me++){if(x=this.getHeightOfLine(Me),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Me)){O+=x;continue}T=this._textLines[Me],v=this._getLineLeftOffset(Me),G=0,V=0,S=this.getValueOfPropertyAt(Me,0,"textBackgroundColor");for(var pe=0,Ie=T.length;pe<Ie;pe++)Z=this.__charBounds[Me][pe],te=this.getValueOfPropertyAt(Me,pe,"textBackgroundColor"),J?(b.save(),b.translate(Z.renderLeft,Z.renderTop),b.rotate(Z.angle),b.fillStyle=te,te&&b.fillRect(-Z.width/2,-x/this.lineHeight*(1-this._fontSizeFraction),Z.width,x/this.lineHeight),b.restore()):te!==S?(oe=M+v+V,this.direction==="rtl"&&(oe=this.width-oe-G),b.fillStyle=S,S&&b.fillRect(oe,O,G,x/this.lineHeight),V=Z.left,G=Z.width,S=te):G+=Z.kernedWidth;te&&!J&&(oe=M+v+V,this.direction==="rtl"&&(oe=this.width-oe-G),b.fillStyle=te,b.fillRect(oe,O,G,x/this.lineHeight)),O+=x}b.fillStyle=C,this._removeShadow(b)}},getFontCache:function(b){var x=b.fontFamily.toLowerCase();f.charWidthsCache[x]||(f.charWidthsCache[x]={});var v=f.charWidthsCache[x],C=b.fontStyle.toLowerCase()+"_"+(b.fontWeight+"").toLowerCase();return v[C]||(v[C]={}),v[C]},_measureChar:function(b,x,v,C){var T=this.getFontCache(x),S=this._getFontDeclaration(x),M=this._getFontDeclaration(C),O=v+b,V=S===M,G,Z,te,J=x.fontSize/this.CACHE_FONT_SIZE,oe;if(v&&T[v]!==void 0&&(te=T[v]),T[b]!==void 0&&(oe=G=T[b]),V&&T[O]!==void 0&&(Z=T[O],oe=Z-te),G===void 0||te===void 0||Z===void 0){var Me=this.getMeasuringContext();this._setTextStyles(Me,x,!0)}return G===void 0&&(oe=G=Me.measureText(b).width,T[b]=G),te===void 0&&V&&v&&(te=Me.measureText(v).width,T[v]=te),V&&Z===void 0&&(Z=Me.measureText(O).width,T[O]=Z,oe=Z-te),{width:G*J,kernedWidth:oe*J}},getHeightOfChar:function(b,x){return this.getValueOfPropertyAt(b,x,"fontSize")},measureLine:function(b){var x=this._measureLine(b);return this.charSpacing!==0&&(x.width-=this._getWidthOfCharSpacing()),x.width<0&&(x.width=0),x},_measureLine:function(b){var x=0,v,C,T=this._textLines[b],S,M,O=0,V=new Array(T.length),G=0,Z,te,J=this.path,oe=this.pathSide==="right";for(this.__charBounds[b]=V,v=0;v<T.length;v++)C=T[v],M=this._getGraphemeBox(C,b,v,S),V[v]=M,x+=M.kernedWidth,S=C;if(V[v]={left:M?M.left+M.width:0,width:0,kernedWidth:0,height:this.fontSize},J){switch(te=J.segmentsInfo[J.segmentsInfo.length-1].length,Z=f.util.getPointOnPath(J.path,0,J.segmentsInfo),Z.x+=J.pathOffset.x,Z.y+=J.pathOffset.y,this.textAlign){case"left":G=oe?te-x:0;break;case"center":G=(te-x)/2;break;case"right":G=oe?0:te-x;break}for(G+=this.pathStartOffset*(oe?-1:1),v=oe?T.length-1:0;oe?v>=0:v<T.length;oe?v--:v++)M=V[v],G>te?G%=te:G<0&&(G+=te),this._setGraphemeOnPath(G,M,Z),G+=M.kernedWidth}return{width:x,numOfSpaces:O}},_setGraphemeOnPath:function(b,x,v){var C=b+x.kernedWidth/2,T=this.path,S=f.util.getPointOnPath(T.path,C,T.segmentsInfo);x.renderLeft=S.x-v.x,x.renderTop=S.y-v.y,x.angle=S.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(b,x,v,C,T){var S=this.getCompleteStyleDeclaration(x,v),M=C?this.getCompleteStyleDeclaration(x,v-1):{},O=this._measureChar(b,S,C,M),V=O.kernedWidth,G=O.width,Z;this.charSpacing!==0&&(Z=this._getWidthOfCharSpacing(),G+=Z,V+=Z);var te={width:G,left:0,height:S.fontSize,kernedWidth:V,deltaY:S.deltaY};if(v>0&&!T){var J=this.__charBounds[x][v-1];te.left=J.left+J.width+O.kernedWidth-O.width}return te},getHeightOfLine:function(b){if(this.__lineHeights[b])return this.__lineHeights[b];for(var x=this._textLines[b],v=this.getHeightOfChar(b,0),C=1,T=x.length;C<T;C++)v=Math.max(this.getHeightOfChar(b,C),v);return this.__lineHeights[b]=v*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var b,x=0,v=0,C=this._textLines.length;v<C;v++)b=this.getHeightOfLine(v),x+=v===C-1?b/this.lineHeight:b;return x},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(b,x){b.save();for(var v=0,C=this._getLeftOffset(),T=this._getTopOffset(),S=0,M=this._textLines.length;S<M;S++){var O=this.getHeightOfLine(S),V=O/this.lineHeight,G=this._getLineLeftOffset(S);this._renderTextLine(x,b,this._textLines[S],C+G,T+v+V,S),v+=O}b.restore()},_renderTextFill:function(b){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(b,"fillText")},_renderTextStroke:function(b){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(b),b.save(),this._setLineDash(b,this.strokeDashArray),b.beginPath(),this._renderTextCommon(b,"strokeText"),b.closePath(),b.restore())},_renderChars:function(b,x,v,C,T,S){var M=this.getHeightOfLine(S),O=this.textAlign.indexOf("justify")!==-1,V,G,Z="",te,J=0,oe,Me=this.path,Fe=!O&&this.charSpacing===0&&this.isEmptyStyles(S)&&!Me,pe=this.direction==="ltr",Ie=this.direction==="ltr"?1:-1,Se,me=x.canvas.getAttribute("dir");if(x.save(),me!==this.direction&&(x.canvas.setAttribute("dir",pe?"ltr":"rtl"),x.direction=pe?"ltr":"rtl",x.textAlign=pe?"left":"right"),T-=M*this._fontSizeFraction/this.lineHeight,Fe){this._renderChar(b,x,S,0,v.join(""),C,T,M),x.restore();return}for(var et=0,nt=v.length-1;et<=nt;et++)oe=et===nt||this.charSpacing||Me,Z+=v[et],te=this.__charBounds[S][et],J===0?(C+=Ie*(te.kernedWidth-te.width),J+=te.width):J+=te.kernedWidth,O&&!oe&&this._reSpaceAndTab.test(v[et])&&(oe=!0),oe||(V=V||this.getCompleteStyleDeclaration(S,et),G=this.getCompleteStyleDeclaration(S,et+1),oe=f.util.hasStyleChanged(V,G,!1)),oe&&(Me?(x.save(),x.translate(te.renderLeft,te.renderTop),x.rotate(te.angle),this._renderChar(b,x,S,et,Z,-J/2,0,M),x.restore()):(Se=C,this._renderChar(b,x,S,et,Z,Se,T,M)),Z="",V=G,C+=Ie*J,J=0);x.restore()},_applyPatternGradientTransformText:function(b){var x=f.util.createCanvasElement(),v,C=this.width+this.strokeWidth,T=this.height+this.strokeWidth;return x.width=C,x.height=T,v=x.getContext("2d"),v.beginPath(),v.moveTo(0,0),v.lineTo(C,0),v.lineTo(C,T),v.lineTo(0,T),v.closePath(),v.translate(C/2,T/2),v.fillStyle=b.toLive(v),this._applyPatternGradientTransform(v,b),v.fill(),v.createPattern(x,"no-repeat")},handleFiller:function(b,x,v){var C,T;return v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?(C=-this.width/2,T=-this.height/2,b.translate(C,T),b[x]=this._applyPatternGradientTransformText(v),{offsetX:C,offsetY:T}):(b[x]=v.toLive(b,this),this._applyPatternGradientTransform(b,v)):(b[x]=v,{offsetX:0,offsetY:0})},_setStrokeStyles:function(b,x){return b.lineWidth=x.strokeWidth,b.lineCap=this.strokeLineCap,b.lineDashOffset=this.strokeDashOffset,b.lineJoin=this.strokeLineJoin,b.miterLimit=this.strokeMiterLimit,this.handleFiller(b,"strokeStyle",x.stroke)},_setFillStyles:function(b,x){return this.handleFiller(b,"fillStyle",x.fill)},_renderChar:function(b,x,v,C,T,S,M){var O=this._getStyleDeclaration(v,C),V=this.getCompleteStyleDeclaration(v,C),G=b==="fillText"&&V.fill,Z=b==="strokeText"&&V.stroke&&V.strokeWidth,te,J;!Z&&!G||(x.save(),G&&(te=this._setFillStyles(x,V)),Z&&(J=this._setStrokeStyles(x,V)),x.font=this._getFontDeclaration(V),O&&O.textBackgroundColor&&this._removeShadow(x),O&&O.deltaY&&(M+=O.deltaY),G&&x.fillText(T,S-te.offsetX,M-te.offsetY),Z&&x.strokeText(T,S-J.offsetX,M-J.offsetY),x.restore())},setSuperscript:function(b,x){return this._setScript(b,x,this.superscript)},setSubscript:function(b,x){return this._setScript(b,x,this.subscript)},_setScript:function(b,x,v){var C=this.get2DCursorLocation(b,!0),T=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"fontSize"),S=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"deltaY"),M={fontSize:T*v.size,deltaY:S+T*v.baseline};return this.setSelectionStyles(M,b,x),this},_getLineLeftOffset:function(b){var x=this.getLineWidth(b),v=this.width-x,C=this.textAlign,T=this.direction,M,S=0,M=this.isEndOfWrapping(b);return C==="justify"||C==="justify-center"&&!M||C==="justify-right"&&!M||C==="justify-left"&&!M?0:(C==="center"&&(S=v/2),C==="right"&&(S=v),C==="justify-center"&&(S=v/2),C==="justify-right"&&(S=v),T==="rtl"&&(S-=v),S)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var b=this._forceClearCache;return b||(b=this.hasStateChanged("_dimensionAffectingProps")),b&&(this.dirty=!0,this._forceClearCache=!1),b},getLineWidth:function(b){if(this.__lineWidths[b]!==void 0)return this.__lineWidths[b];var x=this.measureLine(b),v=x.width;return this.__lineWidths[b]=v,v},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(b,x,v){var C=this._getStyleDeclaration(b,x);return C&&typeof C[v]<"u"?C[v]:this[v]},_renderTextDecoration:function(b,x){if(!(!this[x]&&!this.styleHas(x))){for(var v,C,T,S,M,O,V,G,Z=this._getLeftOffset(),te=this._getTopOffset(),J,oe,Me,Fe,pe,Ie,Se,me,et=this.path,nt=this._getWidthOfCharSpacing(),Et=this.offsets[x],it=0,we=this._textLines.length;it<we;it++){if(v=this.getHeightOfLine(it),!this[x]&&!this.styleHas(x,it)){te+=v;continue}V=this._textLines[it],Ie=v/this.lineHeight,S=this._getLineLeftOffset(it),oe=0,Me=0,G=this.getValueOfPropertyAt(it,0,x),me=this.getValueOfPropertyAt(it,0,"fill"),J=te+Ie*(1-this._fontSizeFraction),C=this.getHeightOfChar(it,0),M=this.getValueOfPropertyAt(it,0,"deltaY");for(var ke=0,Oe=V.length;ke<Oe;ke++)if(Fe=this.__charBounds[it][ke],pe=this.getValueOfPropertyAt(it,ke,x),Se=this.getValueOfPropertyAt(it,ke,"fill"),T=this.getHeightOfChar(it,ke),O=this.getValueOfPropertyAt(it,ke,"deltaY"),et&&pe&&Se)b.save(),b.fillStyle=me,b.translate(Fe.renderLeft,Fe.renderTop),b.rotate(Fe.angle),b.fillRect(-Fe.kernedWidth/2,Et*T+O,Fe.kernedWidth,this.fontSize/15),b.restore();else if((pe!==G||Se!==me||T!==C||O!==M)&&Me>0){var le=Z+S+oe;this.direction==="rtl"&&(le=this.width-le-Me),G&&me&&(b.fillStyle=me,b.fillRect(le,J+Et*C+M,Me,this.fontSize/15)),oe=Fe.left,Me=Fe.width,G=pe,me=Se,C=T,M=O}else Me+=Fe.kernedWidth;var le=Z+S+oe;this.direction==="rtl"&&(le=this.width-le-Me),b.fillStyle=Se,pe&&Se&&b.fillRect(le,J+Et*C+M,Me-nt,this.fontSize/15),te+=v}this._removeShadow(b)}},_getFontDeclaration:function(b,x){var v=b||this,C=this.fontFamily,T=f.Text.genericFonts.indexOf(C.toLowerCase())>-1,S=C===void 0||C.indexOf("'")>-1||C.indexOf(",")>-1||C.indexOf('"')>-1||T?v.fontFamily:'"'+v.fontFamily+'"';return[f.isLikelyNode?v.fontWeight:v.fontStyle,f.isLikelyNode?v.fontStyle:v.fontWeight,x?this.CACHE_FONT_SIZE+"px":v.fontSize+"px",S].join(" ")},render:function(b){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",b))},_splitTextIntoLines:function(b){for(var x=b.split(this._reNewline),v=new Array(x.length),C=[`
`],T=[],S=0;S<x.length;S++)v[S]=f.util.string.graphemeSplit(x[S]),T=T.concat(v[S],C);return T.pop(),{_unwrappedLines:v,lines:x,graphemeText:T,graphemeLines:v}},toObject:function(b){var x=w.concat(b),v=this.callSuper("toObject",x);return v.styles=f.util.stylesToArray(this.styles,this.text),v.path&&(v.path=this.path.toObject()),v},set:function(b,x){this.callSuper("set",b,x);var v=!1,C=!1;if(typeof b=="object")for(var T in b)T==="path"&&this.setPathInfo(),v=v||this._dimensionAffectingProps.indexOf(T)!==-1,C=C||T==="path";else v=this._dimensionAffectingProps.indexOf(b)!==-1,C=b==="path";return C&&this.setPathInfo(),v&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(b,x,v){if(!b)return x(null);var C=f.parseAttributes(b,f.Text.ATTRIBUTE_NAMES),T=C.textAnchor||"left";if(v=f.util.object.extend(v?_(v):{},C),v.top=v.top||0,v.left=v.left||0,C.textDecoration){var S=C.textDecoration;S.indexOf("underline")!==-1&&(v.underline=!0),S.indexOf("overline")!==-1&&(v.overline=!0),S.indexOf("line-through")!==-1&&(v.linethrough=!0),delete v.textDecoration}"dx"in C&&(v.left+=C.dx),"dy"in C&&(v.top+=C.dy),"fontSize"in v||(v.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);var M="";"textContent"in b?M=b.textContent:"firstChild"in b&&b.firstChild!==null&&"data"in b.firstChild&&b.firstChild.data!==null&&(M=b.firstChild.data),M=M.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var O=v.strokeWidth;v.strokeWidth=0;var V=new f.Text(M,v),G=V.getScaledHeight()/V.height,Z=(V.height+V.strokeWidth)*V.lineHeight-V.height,te=Z*G,J=V.getScaledHeight()+te,oe=0;T==="center"&&(oe=V.getScaledWidth()/2),T==="right"&&(oe=V.getScaledWidth()),V.set({left:V.left-oe,top:V.top-(J-V.fontSize*(.07+V._fontSizeFraction))/V.lineHeight,strokeWidth:typeof O<"u"?O:1}),x(V)},f.Text.fromObject=function(b,x){var v=_(b),C=b.path;return delete v.path,f.Object._fromObject("Text",v,function(T){T.styles=f.util.stylesFromArray(b.styles,b.text),C?f.Object._fromObject("Path",C,function(S){T.set("path",S),x(T)},"path"):x(T)},"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text)}(i),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(r){if(!this.styles||typeof r<"u"&&!this.styles[r])return!0;var f=typeof r>"u"?this.styles:{line:this.styles[r]};for(var _ in f)for(var w in f[_])for(var b in f[_][w])return!1;return!0},styleHas:function(r,f){if(!this.styles||!r||r===""||typeof f<"u"&&!this.styles[f])return!1;var _=typeof f>"u"?this.styles:{0:this.styles[f]};for(var w in _)for(var b in _[w])if(typeof _[w][b][r]<"u")return!0;return!1},cleanStyle:function(r){if(!this.styles||!r||r==="")return!1;var f=this.styles,_=0,w,b,x=!0,v=0,C;for(var T in f){w=0;for(var S in f[T]){var C=f[T][S],M=C.hasOwnProperty(r);_++,M?(b?C[r]!==b&&(x=!1):b=C[r],C[r]===this[r]&&delete C[r]):x=!1,Object.keys(C).length!==0?w++:delete f[T][S]}w===0&&delete f[T]}for(var O=0;O<this._textLines.length;O++)v+=this._textLines[O].length;x&&_===v&&(this[r]=b,this.removeStyle(r))},removeStyle:function(r){if(!(!this.styles||!r||r==="")){var f=this.styles,_,w,b;for(w in f){_=f[w];for(b in _)delete _[b][r],Object.keys(_[b]).length===0&&delete _[b];Object.keys(_).length===0&&delete f[w]}}},_extendStyles:function(r,f){var _=this.get2DCursorLocation(r);this._getLineStyle(_.lineIndex)||this._setLineStyle(_.lineIndex),this._getStyleDeclaration(_.lineIndex,_.charIndex)||this._setStyleDeclaration(_.lineIndex,_.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(_.lineIndex,_.charIndex),f)},get2DCursorLocation:function(r,f){typeof r>"u"&&(r=this.selectionStart);for(var _=f?this._unwrappedTextLines:this._textLines,w=_.length,b=0;b<w;b++){if(r<=_[b].length)return{lineIndex:b,charIndex:r};r-=_[b].length+this.missingNewlineOffset(b)}return{lineIndex:b-1,charIndex:_[b-1].length<r?_[b-1].length:r}},getSelectionStyles:function(r,f,_){typeof r>"u"&&(r=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||r);for(var w=[],b=r;b<f;b++)w.push(this.getStyleAtPosition(b,_));return w},getStyleAtPosition:function(r,f){var _=this.get2DCursorLocation(r),w=f?this.getCompleteStyleDeclaration(_.lineIndex,_.charIndex):this._getStyleDeclaration(_.lineIndex,_.charIndex);return w||{}},setSelectionStyles:function(r,f,_){typeof f>"u"&&(f=this.selectionStart||0),typeof _>"u"&&(_=this.selectionEnd||f);for(var w=f;w<_;w++)this._extendStyles(w,r);return this._forceClearCache=!0,this},_getStyleDeclaration:function(r,f){var _=this.styles&&this.styles[r];return _?_[f]:null},getCompleteStyleDeclaration:function(r,f){for(var _=this._getStyleDeclaration(r,f)||{},w={},b,x=0;x<this._styleProperties.length;x++)b=this._styleProperties[x],w[b]=typeof _[b]>"u"?this[b]:_[b];return w},_setStyleDeclaration:function(r,f,_){this.styles[r][f]=_},_deleteStyleDeclaration:function(r,f){delete this.styles[r][f]},_getLineStyle:function(r){return!!this.styles[r]},_setLineStyle:function(r){this.styles[r]={}},_deleteLineStyle:function(r){delete this.styles[r]}})}(),function(){function r(f){f.textDecoration&&(f.textDecoration.indexOf("underline")>-1&&(f.underline=!0),f.textDecoration.indexOf("line-through")>-1&&(f.linethrough=!0),f.textDecoration.indexOf("overline")>-1&&(f.overline=!0),delete f.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(f,_){this.callSuper("initialize",f,_),this.initBehavior()},setSelectionStart:function(f){f=Math.max(f,0),this._updateAndFire("selectionStart",f)},setSelectionEnd:function(f){f=Math.min(f,this.text.length),this._updateAndFire("selectionEnd",f)},_updateAndFire:function(f,_){this[f]!==_&&(this._fireSelectionChanged(),this[f]=_),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(f){this.clearContextTop(),this.callSuper("render",f),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(f){this.callSuper("_render",f)},clearContextTop:function(f){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var _=this.canvas.contextTop,w=this.canvas.viewportTransform;_.save(),_.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this.transform(_),this._clearTextArea(_),f||_.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var f=this._getCursorBoundaries(),_=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(f,_):this.renderSelection(f,_),_.restore()}},_clearTextArea:function(f){var _=this.width+4,w=this.height+4;f.clearRect(-_/2,-w/2,_,w)},_getCursorBoundaries:function(f){typeof f>"u"&&(f=this.selectionStart);var _=this._getLeftOffset(),w=this._getTopOffset(),b=this._getCursorBoundariesOffsets(f);return{left:_,top:w,leftOffset:b.left,topOffset:b.top}},_getCursorBoundariesOffsets:function(f){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var _,w,b,x=0,v=0,C,T=this.get2DCursorLocation(f);b=T.charIndex,w=T.lineIndex;for(var S=0;S<w;S++)x+=this.getHeightOfLine(S);_=this._getLineLeftOffset(w);var M=this.__charBounds[w][b];return M&&(v=M.left),this.charSpacing!==0&&b===this._textLines[w].length&&(v-=this._getWidthOfCharSpacing()),C={top:x,left:_+(v>0?v:0)},this.direction==="rtl"&&(C.left*=-1),this.cursorOffsetCache=C,this.cursorOffsetCache},renderCursor:function(f,_){var w=this.get2DCursorLocation(),b=w.lineIndex,x=w.charIndex>0?w.charIndex-1:0,v=this.getValueOfPropertyAt(b,x,"fontSize"),C=this.scaleX*this.canvas.getZoom(),T=this.cursorWidth/C,S=f.topOffset,M=this.getValueOfPropertyAt(b,x,"deltaY");S+=(1-this._fontSizeFraction)*this.getHeightOfLine(b)/this.lineHeight-v*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(f,_),_.fillStyle=this.cursorColor||this.getValueOfPropertyAt(b,x,"fill"),_.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,_.fillRect(f.left+f.leftOffset-T/2,S+f.top+M,T,v)},renderSelection:function(f,_){for(var w=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,b=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,x=this.textAlign.indexOf("justify")!==-1,v=this.get2DCursorLocation(w),C=this.get2DCursorLocation(b),T=v.lineIndex,S=C.lineIndex,M=v.charIndex<0?0:v.charIndex,O=C.charIndex<0?0:C.charIndex,V=T;V<=S;V++){var G=this._getLineLeftOffset(V)||0,Z=this.getHeightOfLine(V),te=0,J=0,oe=0;if(V===T&&(J=this.__charBounds[T][M].left),V>=T&&V<S)oe=x&&!this.isEndOfWrapping(V)?this.width:this.getLineWidth(V)||5;else if(V===S)if(O===0)oe=this.__charBounds[S][O].left;else{var Me=this._getWidthOfCharSpacing();oe=this.__charBounds[S][O-1].left+this.__charBounds[S][O-1].width-Me}te=Z,(this.lineHeight<1||V===S&&this.lineHeight>1)&&(Z/=this.lineHeight);var Fe=f.left+G+J,pe=oe-J,Ie=Z,Se=0;this.inCompositionMode?(_.fillStyle=this.compositionColor||"black",Ie=1,Se=Z):_.fillStyle=this.selectionColor,this.direction==="rtl"&&(Fe=this.width-Fe-pe),_.fillRect(Fe,f.top+f.topOffset+Se,pe,Ie),f.topOffset+=te}},getCurrentCharFontSize:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fontSize")},getCurrentCharColor:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fill")},_getCurrentCharIndex:function(){var f=this.get2DCursorLocation(this.selectionStart,!0),_=f.charIndex>0?f.charIndex-1:0;return{l:f.lineIndex,c:_}}}),e.IText.fromObject=function(f,_){var w=e.util.stylesFromArray(f.styles,f.text),b=Object.assign({},f,{styles:w});if(r(b),b.styles)for(var x in b.styles)for(var v in b.styles[x])r(b.styles[x][v]);e.Object._fromObject("IText",b,_,"text")}}(),function(){var r=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var f=this;this.on("added",function(){var _=f.canvas;_&&(_._hasITextHandlers||(_._hasITextHandlers=!0,f._initCanvasHandlers(_)),_._iTextInstances=_._iTextInstances||[],_._iTextInstances.push(f))})},initRemovedHandler:function(){var f=this;this.on("removed",function(){var _=f.canvas;_&&(_._iTextInstances=_._iTextInstances||[],e.util.removeFromArray(_._iTextInstances,f),_._iTextInstances.length===0&&(_._hasITextHandlers=!1,f._removeCanvasHandlers(_)))})},_initCanvasHandlers:function(f){f._mouseUpITextHandler=function(){f._iTextInstances&&f._iTextInstances.forEach(function(_){_.__isMousedown=!1})},f.on("mouse:up",f._mouseUpITextHandler)},_removeCanvasHandlers:function(f){f.off("mouse:up",f._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(f,_,w,b){var x;return x={isAborted:!1,abort:function(){this.isAborted=!0}},f.animate("_currentCursorOpacity",_,{duration:w,onComplete:function(){x.isAborted||f[b]()},onChange:function(){f.canvas&&f.selectionStart===f.selectionEnd&&f.renderCursorOrSelection()},abort:function(){return x.isAborted}}),x},_onTickComplete:function(){var f=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){f._currentTickCompleteState=f._animateCursor(f,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(f){var _=this,w=f?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){_._tick()},w)},abortCursorAnimation:function(){var f=this._currentTickState||this._currentTickCompleteState,_=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,f&&_&&_.clearContext(_.contextTop||_.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(f){var _=0,w=f-1;if(this._reSpace.test(this._text[w]))for(;this._reSpace.test(this._text[w]);)_++,w--;for(;/\S/.test(this._text[w])&&w>-1;)_++,w--;return f-_},findWordBoundaryRight:function(f){var _=0,w=f;if(this._reSpace.test(this._text[w]))for(;this._reSpace.test(this._text[w]);)_++,w++;for(;/\S/.test(this._text[w])&&w<this._text.length;)_++,w++;return f+_},findLineBoundaryLeft:function(f){for(var _=0,w=f-1;!/\n/.test(this._text[w])&&w>-1;)_++,w--;return f-_},findLineBoundaryRight:function(f){for(var _=0,w=f;!/\n/.test(this._text[w])&&w<this._text.length;)_++,w++;return f+_},searchWordBoundary:function(f,_){for(var w=this._text,b=this._reSpace.test(w[f])?f-1:f,x=w[b],v=e.reNonWord;!v.test(x)&&b>0&&b<w.length;)b+=_,x=w[b];return v.test(x)&&(b+=_===1?0:1),b},selectWord:function(f){f=f||this.selectionStart;var _=this.searchWordBoundary(f,-1),w=this.searchWordBoundary(f,1);this.selectionStart=_,this.selectionEnd=w,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(f){f=f||this.selectionStart;var _=this.findLineBoundaryLeft(f),w=this.findLineBoundaryRight(f);return this.selectionStart=_,this.selectionEnd=w,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(f){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(f),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(f){f._iTextInstances&&f._iTextInstances.forEach(function(_){_.selected=!1,_.isEditing&&_.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(f){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var _=this.getSelectionStartFromPointer(f.e),w=this.selectionStart,b=this.selectionEnd;(_!==this.__selectionStartOnMouseDown||w===b)&&(w===_||b===_)||(_>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=_):(this.selectionStart=_,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==w||this.selectionEnd!==b)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(f,_,w){var b=w.slice(0,f),x=e.util.string.graphemeSplit(b).length;if(f===_)return{selectionStart:x,selectionEnd:x};var v=w.slice(f,_),C=e.util.string.graphemeSplit(v).length;return{selectionStart:x,selectionEnd:x+C}},fromGraphemeToStringSelection:function(f,_,w){var b=w.slice(0,f),x=b.join("").length;if(f===_)return{selectionStart:x,selectionEnd:x};var v=w.slice(f,_),C=v.join("").length;return{selectionStart:x,selectionEnd:x+C}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var f=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=f.selectionStart,this.hiddenTextarea.selectionEnd=f.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=f.selectionEnd,this.inCompositionMode||(this.selectionStart=f.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var f=this._calcTextareaPosition();this.hiddenTextarea.style.left=f.left,this.hiddenTextarea.style.top=f.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var f=this.inCompositionMode?this.compositionStart:this.selectionStart,_=this._getCursorBoundaries(f),w=this.get2DCursorLocation(f),b=w.lineIndex,x=w.charIndex,v=this.getValueOfPropertyAt(b,x,"fontSize")*this.lineHeight,C=_.leftOffset,T=this.calcTransformMatrix(),S={x:_.left+C,y:_.top+_.topOffset+v},M=this.canvas.getRetinaScaling(),O=this.canvas.upperCanvasEl,V=O.width/M,G=O.height/M,Z=V-v,te=G-v,J=O.clientWidth/V,oe=O.clientHeight/G;return S=e.util.transformPoint(S,T),S=e.util.transformPoint(S,this.canvas.viewportTransform),S.x*=J,S.y*=oe,S.x<0&&(S.x=0),S.x>Z&&(S.x=Z),S.y<0&&(S.y=0),S.y>te&&(S.y=te),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:S.x+"px",top:S.y+"px",fontSize:v+"px",charHeight:v}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var f=this._textBeforeEdit!==this.text,_=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,_&&(_.blur&&_.blur(),_.parentNode&&_.parentNode.removeChild(_)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),f&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),f&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var f in this.styles)this._textLines[f]||delete this.styles[f]},removeStyleFromTo:function(f,_){var w=this.get2DCursorLocation(f,!0),b=this.get2DCursorLocation(_,!0),x=w.lineIndex,v=w.charIndex,C=b.lineIndex,T=b.charIndex,S,M;if(x!==C){if(this.styles[x])for(S=v;S<this._unwrappedTextLines[x].length;S++)delete this.styles[x][S];if(this.styles[C])for(S=T;S<this._unwrappedTextLines[C].length;S++)M=this.styles[C][S],M&&(this.styles[x]||(this.styles[x]={}),this.styles[x][v+S-T]=M);for(S=x+1;S<=C;S++)delete this.styles[S];this.shiftLineStyles(C,x-C)}else if(this.styles[x]){M=this.styles[x];var O=T-v,V,G;for(S=v;S<T;S++)delete M[S];for(G in this.styles[x])V=parseInt(G,10),V>=T&&(M[V-O]=M[G],delete M[G])}},shiftLineStyles:function(f,_){var w=r(this.styles);for(var b in this.styles){var x=parseInt(b,10);x>f&&(this.styles[x+_]=w[x],w[x-_]||delete this.styles[x])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(f,_,w,b){var x,v={},C=!1,T=this._unwrappedTextLines[f].length===_;w||(w=1),this.shiftLineStyles(f,w),this.styles[f]&&(x=this.styles[f][_===0?_:_-1]);for(var S in this.styles[f]){var M=parseInt(S,10);M>=_&&(C=!0,v[M-_]=this.styles[f][S],T&&_===0||delete this.styles[f][S])}var O=!1;for(C&&!T&&(this.styles[f+w]=v,O=!0),O&&w--;w>0;)b&&b[w-1]?this.styles[f+w]={0:r(b[w-1])}:x?this.styles[f+w]={0:r(x)}:delete this.styles[f+w],w--;this._forceClearCache=!0},insertCharStyleObject:function(f,_,w,b){this.styles||(this.styles={});var x=this.styles[f],v=x?r(x):{};w||(w=1);for(var C in v){var T=parseInt(C,10);T>=_&&(x[T+w]=v[T],v[T-w]||delete x[T])}if(this._forceClearCache=!0,b){for(;w--;)!Object.keys(b[w]).length||(this.styles[f]||(this.styles[f]={}),this.styles[f][_+w]=r(b[w]));return}if(!!x)for(var S=x[_?_-1:1];S&&w--;)this.styles[f][_+w]=r(S)},insertNewStyleBlock:function(f,_,w){for(var b=this.get2DCursorLocation(_,!0),x=[0],v=0,C=0;C<f.length;C++)f[C]===`
`?(v++,x[v]=0):x[v]++;x[0]>0&&(this.insertCharStyleObject(b.lineIndex,b.charIndex,x[0],w),w=w&&w.slice(x[0]+1)),v&&this.insertNewlineStyleObject(b.lineIndex,b.charIndex+x[0],v);for(var C=1;C<v;C++)x[C]>0?this.insertCharStyleObject(b.lineIndex+C,0,x[C],w):w&&this.styles[b.lineIndex+C]&&w[0]&&(this.styles[b.lineIndex+C][0]=w[0]),w=w&&w.slice(x[C]+1);x[C]>0&&this.insertCharStyleObject(b.lineIndex+C,0,x[C],w)},setSelectionStartEndWithShift:function(f,_,w){w<=f?(_===f?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=f),this.selectionStart=w):w>f&&w<_?this._selectionDirection==="right"?this.selectionEnd=w:this.selectionStart=w:(_===f?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=_),this.selectionEnd=w)},setSelectionInBoundaries:function(){var f=this.text.length;this.selectionStart>f?this.selectionStart=f:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>f?this.selectionEnd=f:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(r){if(!!this.canvas){this.__newClickTime=+new Date;var f=r.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",r),this._stopEvent(r.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=f,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(r){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===r.x&&this.__lastPointer.y===r.y},_stopEvent:function(r){r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(r){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(r.e))},tripleClickHandler:function(r){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(r.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(r){!this.canvas||!this.editable||r.e.button&&r.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(r.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(r){!this.canvas||!this.editable||r.e.button&&r.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(r){if(this.__isMousedown=!1,!(!this.editable||this.group||r.transform&&r.transform.actionPerformed||r.e.button&&r.e.button!==1)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(r.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(r){var f=this.getSelectionStartFromPointer(r),_=this.selectionStart,w=this.selectionEnd;r.shiftKey?this.setSelectionStartEndWithShift(_,w,f):(this.selectionStart=f,this.selectionEnd=f),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(r){for(var f=this.getLocalPointer(r),_=0,w=0,b=0,x=0,v=0,C,T,S=0,M=this._textLines.length;S<M&&b<=f.y;S++)b+=this.getHeightOfLine(S)*this.scaleY,v=S,S>0&&(x+=this._textLines[S-1].length+this.missingNewlineOffset(S-1));C=this._getLineLeftOffset(v),w=C*this.scaleX,T=this._textLines[v],this.direction==="rtl"&&(f.x=this.width*this.scaleX-f.x+w);for(var O=0,V=T.length;O<V&&(_=w,w+=this.__charBounds[v][O].kernedWidth*this.scaleX,w<=f.x);O++)x++;return this._getNewSelectionStartFromOffset(f,_,w,x,V)},_getNewSelectionStartFromOffset:function(r,f,_,w,b){var x=r.x-f,v=_-r.x,C=v>x||v<0?0:1,T=w+C;return this.flipX&&(T=b-T),T>this._text.length&&(T=this._text.length),T}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var r=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+r.top+"; left: "+r.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+r.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(r){if(!!this.isEditing){var f=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(r.keyCode in f)this[f[r.keyCode]](r);else if(r.keyCode in this.ctrlKeysMapDown&&(r.ctrlKey||r.metaKey))this[this.ctrlKeysMapDown[r.keyCode]](r);else return;r.stopImmediatePropagation(),r.preventDefault(),r.keyCode>=33&&r.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(r){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(r.keyCode in this.ctrlKeysMapUp&&(r.ctrlKey||r.metaKey))this[this.ctrlKeysMapUp[r.keyCode]](r);else return;r.stopImmediatePropagation(),r.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(r){var f=this.fromPaste;if(this.fromPaste=!1,r&&r.stopPropagation(),!!this.isEditing){var _=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,w=this._text.length,b=_.length,x,v,C=b-w,T=this.selectionStart,S=this.selectionEnd,M=T!==S,O,V,G;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var Z=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),te=T>Z.selectionStart;M?(x=this._text.slice(T,S),C+=S-T):b<w&&(te?x=this._text.slice(S+C,S):x=this._text.slice(T,T-C)),v=_.slice(Z.selectionEnd-C,Z.selectionEnd),x&&x.length&&(v.length&&(O=this.getSelectionStyles(T,T+1,!1),O=v.map(function(){return O[0]})),M?(V=T,G=S):te?(V=S-x.length,G=S):(V=S,G=S+x.length),this.removeStyleFromTo(V,G)),v.length&&(f&&v.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(O=e.copiedTextStyle),this.insertNewStyleBlock(v,T,O)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(r){this.compositionStart=r.target.selectionStart,this.compositionEnd=r.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(r){return r&&r.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(r,f){var _=this._getLineLeftOffset(r),w;return f>0&&(w=this.__charBounds[r][f-1],_+=w.left+w.width),_},getDownCursorOffset:function(r,f){var _=this._getSelectionForOffset(r,f),w=this.get2DCursorLocation(_),b=w.lineIndex;if(b===this._textLines.length-1||r.metaKey||r.keyCode===34)return this._text.length-_;var x=w.charIndex,v=this._getWidthBeforeCursor(b,x),C=this._getIndexOnLine(b+1,v),T=this._textLines[b].slice(x);return T.length+C+1+this.missingNewlineOffset(b)},_getSelectionForOffset:function(r,f){return r.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(r,f){var _=this._getSelectionForOffset(r,f),w=this.get2DCursorLocation(_),b=w.lineIndex;if(b===0||r.metaKey||r.keyCode===33)return-_;var x=w.charIndex,v=this._getWidthBeforeCursor(b,x),C=this._getIndexOnLine(b-1,v),T=this._textLines[b].slice(0,x),S=this.missingNewlineOffset(b-1);return-this._textLines[b-1].length+C-T.length+(1-S)},_getIndexOnLine:function(r,f){for(var _=this._textLines[r],w=this._getLineLeftOffset(r),b=w,x=0,v,C,T=0,S=_.length;T<S;T++)if(v=this.__charBounds[r][T].width,b+=v,b>f){C=!0;var M=b-v,O=b,V=Math.abs(M-f),G=Math.abs(O-f);x=G<V?T:T-1;break}return C||(x=_.length-1),x},moveCursorDown:function(r){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",r)},moveCursorUp:function(r){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",r)},_moveCursorUpOrDown:function(r,f){var _="get"+r+"CursorOffset",w=this[_](f,this._selectionDirection==="right");f.shiftKey?this.moveCursorWithShift(w):this.moveCursorWithoutShift(w),w!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(r){var f=this._selectionDirection==="left"?this.selectionStart+r:this.selectionEnd+r;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,f),r!==0},moveCursorWithoutShift:function(r){return r<0?(this.selectionStart+=r,this.selectionEnd=this.selectionStart):(this.selectionEnd+=r,this.selectionStart=this.selectionEnd),r!==0},moveCursorLeft:function(r){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",r)},_move:function(r,f,_){var w;if(r.altKey)w=this["findWordBoundary"+_](this[f]);else if(r.metaKey||r.keyCode===35||r.keyCode===36)w=this["findLineBoundary"+_](this[f]);else return this[f]+=_==="Left"?-1:1,!0;if(typeof w<"u"&&this[f]!==w)return this[f]=w,!0},_moveLeft:function(r,f){return this._move(r,f,"Left")},_moveRight:function(r,f){return this._move(r,f,"Right")},moveCursorLeftWithoutShift:function(r){var f=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(f=this._moveLeft(r,"selectionStart")),this.selectionEnd=this.selectionStart,f},moveCursorLeftWithShift:function(r){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(r,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(r,"selectionStart")},moveCursorRight:function(r){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",r)},_moveCursorLeftOrRight:function(r,f){var _="moveCursor"+r+"With";this._currentCursorOpacity=1,f.shiftKey?_+="Shift":_+="outShift",this[_](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(r){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(r,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(r,"selectionEnd")},moveCursorRightWithoutShift:function(r){var f=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(f=this._moveRight(r,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,f},removeChars:function(r,f){typeof f>"u"&&(f=r+1),this.removeStyleFromTo(r,f),this._text.splice(r,f-r),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(r,f,_,w){typeof w>"u"&&(w=_),w>_&&this.removeStyleFromTo(_,w);var b=e.util.string.graphemeSplit(r);this.insertNewStyleBlock(b,_,f),this._text=[].concat(this._text.slice(0,_),b,this._text.slice(w)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var r=e.util.toFixed,f=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var _=this._getSVGLeftTopOffsets(),w=this._getSVGTextAndBg(_.textTop,_.textLeft);return this._wrapSVGTextAndBg(w)},toSVG:function(_){return this._createBaseSVGMarkup(this._toSVG(),{reviver:_,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(_){var w=!0,b=this.getSvgTextDecoration(this);return[_.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",b?'text-decoration="'+b+'" ':"",'style="',this.getSvgStyles(w),'"',this.addPaintOrder()," >",_.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(_,w){var b=[],x=[],v=_,C;this._setSVGBg(x);for(var T=0,S=this._textLines.length;T<S;T++)C=this._getLineLeftOffset(T),(this.textBackgroundColor||this.styleHas("textBackgroundColor",T))&&this._setSVGTextLineBg(x,T,w+C,v),this._setSVGTextLineText(b,T,w+C,v),v+=this.getHeightOfLine(T);return{textSpans:b,textBgRects:x}},_createTextCharSpan:function(_,w,b,x){var v=_!==_.trim()||_.match(f),C=this.getSvgSpanStyles(w,v),T=C?'style="'+C+'"':"",S=w.deltaY,M="",O=e.Object.NUM_FRACTION_DIGITS;return S&&(M=' dy="'+r(S,O)+'" '),['<tspan x="',r(b,O),'" y="',r(x,O),'" ',M,T,">",e.util.string.escapeXml(_),"</tspan>"].join("")},_setSVGTextLineText:function(_,w,b,x){var v=this.getHeightOfLine(w),C=this.textAlign.indexOf("justify")!==-1,T,S,M="",O,V,G=0,Z=this._textLines[w],te;x+=v*(1-this._fontSizeFraction)/this.lineHeight;for(var J=0,oe=Z.length-1;J<=oe;J++)te=J===oe||this.charSpacing,M+=Z[J],O=this.__charBounds[w][J],G===0?(b+=O.kernedWidth-O.width,G+=O.width):G+=O.kernedWidth,C&&!te&&this._reSpaceAndTab.test(Z[J])&&(te=!0),te||(T=T||this.getCompleteStyleDeclaration(w,J),S=this.getCompleteStyleDeclaration(w,J+1),te=e.util.hasStyleChanged(T,S,!0)),te&&(V=this._getStyleDeclaration(w,J)||{},_.push(this._createTextCharSpan(M,V,b,x)),M="",T=S,b+=G,G=0)},_pushTextBgRect:function(_,w,b,x,v,C){var T=e.Object.NUM_FRACTION_DIGITS;_.push("		<rect ",this._getFillAttributes(w),' x="',r(b,T),'" y="',r(x,T),'" width="',r(v,T),'" height="',r(C,T),`"></rect>
`)},_setSVGTextLineBg:function(_,w,b,x){for(var v=this._textLines[w],C=this.getHeightOfLine(w)/this.lineHeight,T=0,S=0,M,O,V=this.getValueOfPropertyAt(w,0,"textBackgroundColor"),G=0,Z=v.length;G<Z;G++)M=this.__charBounds[w][G],O=this.getValueOfPropertyAt(w,G,"textBackgroundColor"),O!==V?(V&&this._pushTextBgRect(_,V,b+S,x,T,C),S=M.left,T=M.width,V=O):T+=M.kernedWidth;O&&this._pushTextBgRect(_,O,b+S,x,T,C)},_getFillAttributes:function(_){var w=_&&typeof _=="string"?new e.Color(_):"";return!w||!w.getSource()||w.getAlpha()===1?'fill="'+_+'"':'opacity="'+w.getAlpha()+'" fill="'+w.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(_){for(var w=0,b=0,x=0;x<_;x++)w+=this.getHeightOfLine(x);return b=this.getHeightOfLine(x),{lineTop:w,offset:(this._fontSizeMult-this._fontSizeFraction)*b/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(_){var w=e.Object.prototype.getSvgStyles.call(this,_);return w+" white-space: pre;"}})}(),function(r){var f=r.fabric||(r.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(_){for(var w=0,b=0,x=0,v={},C=0;C<_.graphemeLines.length;C++)_.graphemeText[x]===`
`&&C>0?(b=0,x++,w++):!this.splitByGrapheme&&this._reSpaceAndTab.test(_.graphemeText[x])&&C>0&&(b++,x++),v[C]={line:w,offset:b},x+=_.graphemeLines[C].length,b+=_.graphemeLines[C].length;return v},styleHas:function(_,w){if(this._styleMap&&!this.isWrapping){var b=this._styleMap[w];b&&(w=b.line)}return f.Text.prototype.styleHas.call(this,_,w)},isEmptyStyles:function(_){if(!this.styles)return!0;var w=0,b=_+1,x,v,C=!1,T=this._styleMap[_],S=this._styleMap[_+1];T&&(_=T.line,w=T.offset),S&&(b=S.line,C=b===_,x=S.offset),v=typeof _>"u"?this.styles:{line:this.styles[_]};for(var M in v)for(var O in v[M])if(O>=w&&(!C||O<x))for(var V in v[M][O])return!1;return!0},_getStyleDeclaration:function(_,w){if(this._styleMap&&!this.isWrapping){var b=this._styleMap[_];if(!b)return null;_=b.line,w=b.offset+w}return this.callSuper("_getStyleDeclaration",_,w)},_setStyleDeclaration:function(_,w,b){var x=this._styleMap[_];_=x.line,w=x.offset+w,this.styles[_][w]=b},_deleteStyleDeclaration:function(_,w){var b=this._styleMap[_];_=b.line,w=b.offset+w,delete this.styles[_][w]},_getLineStyle:function(_){var w=this._styleMap[_];return!!this.styles[w.line]},_setLineStyle:function(_){var w=this._styleMap[_];this.styles[w.line]={}},_wrapText:function(_,w){var b=[],x;for(this.isWrapping=!0,x=0;x<_.length;x++)b=b.concat(this._wrapLine(_[x],x,w));return this.isWrapping=!1,b},_measureWord:function(_,w,b){var x=0,v,C=!0;b=b||0;for(var T=0,S=_.length;T<S;T++){var M=this._getGraphemeBox(_[T],w,T+b,v,C);x+=M.kernedWidth,v=_[T]}return x},_wrapLine:function(_,w,b,Fe){var v=0,C=this.splitByGrapheme,T=[],S=[],M=C?f.util.string.graphemeSplit(_):_.split(this._wordJoiners),O="",V=0,G=C?"":" ",Z=0,te=0,J=0,oe=!0,Me=this._getWidthOfCharSpacing(),Fe=Fe||0;M.length===0&&M.push([]),b-=Fe;for(var pe=0;pe<M.length;pe++)O=C?M[pe]:f.util.string.graphemeSplit(M[pe]),Z=this._measureWord(O,w,V),V+=O.length,v+=te+Z-Me,v>b&&!oe?(T.push(S),S=[],v=Z,oe=!0):v+=Me,!oe&&!C&&S.push(G),S=S.concat(O),te=C?0:this._measureWord([G],w,V),V++,oe=!1,Z>J&&(J=Z);return pe&&T.push(S),J+Fe>this.dynamicMinWidth&&(this.dynamicMinWidth=J-Me+Fe),T},isEndOfWrapping:function(_){return!this._styleMap[_+1]||this._styleMap[_+1].line!==this._styleMap[_].line},missingNewlineOffset:function(_){return this.splitByGrapheme?this.isEndOfWrapping(_)?1:0:1},_splitTextIntoLines:function(_){for(var w=f.Text.prototype._splitTextIntoLines.call(this,_),b=this._wrapText(w.lines,this.width),x=new Array(b.length),v=0;v<b.length;v++)x[v]=b[v].join("");return w.lines=x,w.graphemeLines=b,w},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var _={};for(var w in this._styleMap)this._textLines[w]&&(_[this._styleMap[w].line]=1);for(var w in this.styles)_[w]||delete this.styles[w]},toObject:function(_){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(_))}}),f.Textbox.fromObject=function(_,w){var b=f.util.stylesFromArray(_.styles,_.text),x=Object.assign({},_,{styles:b});return f.Object._fromObject("Textbox",x,w,"text")}}(i),function(){var r=e.controlsUtils,f=r.scaleSkewCursorStyleHandler,_=r.scaleCursorStyleHandler,w=r.scalingEqually,b=r.scalingYOrSkewingX,x=r.scalingXOrSkewingY,v=r.scaleOrSkewActionName,C=e.Object.prototype.controls;if(C.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:f,actionHandler:x,getActionName:v}),C.mr=new e.Control({x:.5,y:0,cursorStyleHandler:f,actionHandler:x,getActionName:v}),C.mb=new e.Control({x:0,y:.5,cursorStyleHandler:f,actionHandler:b,getActionName:v}),C.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:f,actionHandler:b,getActionName:v}),C.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:_,actionHandler:w}),C.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:_,actionHandler:w}),C.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:_,actionHandler:w}),C.br=new e.Control({x:.5,y:.5,cursorStyleHandler:_,actionHandler:w}),C.mtr=new e.Control({x:0,y:-.5,actionHandler:r.rotationWithSnapping,cursorStyleHandler:r.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var T=e.Textbox.prototype.controls={};T.mtr=C.mtr,T.tr=C.tr,T.br=C.br,T.tl=C.tl,T.bl=C.bl,T.mt=C.mt,T.mb=C.mb,T.mr=new e.Control({x:.5,y:0,actionHandler:r.changeWidth,cursorStyleHandler:f,actionName:"resizing"}),T.ml=new e.Control({x:-.5,y:0,actionHandler:r.changeWidth,cursorStyleHandler:f,actionName:"resizing"})}}()})(j2);const Zc={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},p1={in:"in",mm:"mm"},td={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},th={Landscape:"landscape",Portrait:"portrait"},Hd={72:72,96:96,200:200,300:300,400:400};class j8{constructor(){ml(this,"map");ml(this,"width");ml(this,"height");ml(this,"dpi");ml(this,"format");ml(this,"unit")}generate(e,t=td.A4,o=300,l=Zc.PNG.toString(),u=p1.mm){this.map=e,this.width=t[0],this.height=t[1],this.dpi=o,this.format=l,this.unit=u;const m=this,r=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return m.dpi/96}});const f=document.createElement("div");f.className="hidden-map",document.body.appendChild(f);const _=document.createElement("div");_.style.width=this.toPixels(this.width),_.style.height=this.toPixels(this.height),f.appendChild(_);const w=this.map.getStyle();if(w&&w.sources){const x=w.sources;Object.keys(x).forEach(v=>{const C=x[v];Object.keys(C).forEach(T=>{C[T]||delete C[T]})})}const b=new Tu.exports.Map({container:_,style:w,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});b.once("idle",()=>{var C;const x=b.getCanvas(),v=`map.${m.format}`;switch(m.format){case Zc.PNG:m.toPNG(x,v);break;case Zc.JPEG:m.toJPEG(x,v);break;case Zc.PDF:m.toPDF(b,v);break;case Zc.SVG:m.toSVG(x,v);break;default:console.error(`Invalid file format: ${m.format}`);break}b.remove(),(C=f.parentNode)==null||C.removeChild(f),Object.defineProperty(window,"devicePixelRatio",{get(){return r}})})}toPNG(e,t){e.toBlob(o=>{Bw.exports.saveAs(o,t)})}toJPEG(e,t){const o=e.toDataURL("image/jpeg",.85),l=document.createElement("a");l.href=o,l.download=t,l.click(),l.remove()}toPDF(e,t){const o=e.getCanvas(),l=new Ur({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});l.addImage(o.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:m}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${u}, ${m}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(t)}toSVG(e,t){const o=e.toDataURL("image/png");j2.fabric.Image.fromURL(o,l=>{const u=new j2.fabric.Canvas("canvas"),m=Number(this.toPixels(this.width,this.dpi).replace("px","")),r=Number(this.toPixels(this.height,this.dpi).replace("px",""));l.scaleToWidth(m),l.scaleToHeight(r),u.add(l);const f=u.toSVG({x:0,y:0,width:m,height:r,viewBox:{x:0,y:0,width:m,height:r}}),_=document.createElement("a");_.href=`data:application/xml,${encodeURIComponent(f)}`,_.download=t,_.click(),_.remove()})}toPixels(e,t=96){return this.unit===p1.mm&&(t/=25.4),`${t*e}px`}toBlob(e){const t=atob(e.replace(/^.*,/,"")),o=new Uint8Array(t.length);for(let u=0;u<t.length;u+=1)o[u]=t.charCodeAt(u);return new Blob([o.buffer],{type:"image/png"})}}const U8=Object.freeze(Object.defineProperty({__proto__:null,Format:Zc,Unit:p1,Size:td,PageOrientation:th,DPI:Hd,default:j8},Symbol.toStringTag,{value:"Module"})),nu=Cc(null),Gd=Cc(null),xd=Cc(null),Fm=Cc(null),Ad=Cc(null),U2=Cc([]);function m_(i,e,t){const o=i.slice();return o[15]=e[t],o}function g_(i,e,t){const o=i.slice();return o[15]=e[t],o}function y_(i,e,t){const o=i.slice();return o[15]=e[t],o}function __(i,e,t){const o=i.slice();return o[15]=e[t],o}function v_(i){let e,t=i[15]+"",o;return{c(){e=zt("option"),o=Xn(t),this.h()},l(l){e=Nt(l,"OPTION",{});var u=Gt(e);o=Yn(u,t),u.forEach(Le),this.h()},h(){e.__value=td[i[15]],e.value=e.__value},m(l,u){qt(l,e,u),Dt(e,o)},p:eo,d(l){l&&Le(e)}}}function b_(i){let e,t,o,l,u,m,r,f=i[15]+"",_,w,b,x;function v(){return i[9](i[15])}return{c(){e=zt("label"),t=zt("input"),l=Yi(),u=zt("div"),m=zt("i"),r=Yi(),_=Xn(f),w=Yi(),this.h()},l(C){e=Nt(C,"LABEL",{class:!0,style:!0});var T=Gt(e);t=Nt(T,"INPUT",{type:!0,name:!0}),l=Zi(T),u=Nt(T,"DIV",{class:!0});var S=Gt(u);m=Nt(S,"I",{class:!0}),Gt(m).forEach(Le),S.forEach(Le),r=Zi(T),_=Yn(T,f),w=Zi(T),T.forEach(Le),this.h()},h(){Ht(t,"type","radio"),Ht(t,"name","orientation"),t.checked=o=i[3]===th[i[15]],Ht(m,"class",`fas ${th[i[15]]===th.Landscape?"fa-left-right":"fa-up-down"} svelte-ffzutn`),Ht(u,"class","icon is-small is-left"),Ht(e,"class","radio"),ec(e,"color","black")},m(C,T){qt(C,e,T),Dt(e,t),Dt(e,l),Dt(e,u),Dt(u,m),Dt(e,r),Dt(e,_),Dt(e,w),b||(x=En(t,"click",v),b=!0)},p(C,T){i=C,T&8&&o!==(o=i[3]===th[i[15]])&&(t.checked=o)},d(C){C&&Le(e),b=!1,x()}}}function w_(i){let e,t=i[15]+"",o;return{c(){e=zt("option"),o=Xn(t),this.h()},l(l){e=Nt(l,"OPTION",{});var u=Gt(e);o=Yn(u,t),u.forEach(Le),this.h()},h(){e.__value=Zc[i[15]],e.value=e.__value},m(l,u){qt(l,e,u),Dt(e,o)},p:eo,d(l){l&&Le(e)}}}function x_(i){let e,t=i[15]+"",o;return{c(){e=zt("option"),o=Xn(t),this.h()},l(l){e=Nt(l,"OPTION",{});var u=Gt(e);o=Yn(u,t),u.forEach(Le),this.h()},h(){e.__value=Hd[i[15]],e.value=e.__value},m(l,u){qt(l,e,u),Dt(e,o)},p:eo,d(l){l&&Le(e)}}}function V8(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we,ke,Oe,le,Ce,he,ge,Be,We,st,Xe,gt,Pt,ri,ut,bt,vt,Ke,ei,li,$t,Si,Ti,Yt,mi,Wi,Ci,ti,Pe,Q,ae,Qe,_t,Jt,di,wn,Ln=Object.keys(td),hn=[];for(let fn=0;fn<Ln.length;fn+=1)hn[fn]=v_(__(i,Ln,fn));let Bi=Object.keys(th),Xi=[];for(let fn=0;fn<Bi.length;fn+=1)Xi[fn]=b_(y_(i,Bi,fn));let Hn=Object.keys(Zc),Gn=[];for(let fn=0;fn<Hn.length;fn+=1)Gn[fn]=w_(g_(i,Hn,fn));let Zr=Object.keys(Hd),zn=[];for(let fn=0;fn<Zr.length;fn+=1)zn[fn]=x_(m_(i,Zr,fn));return{c(){e=zt("div"),t=zt("i"),o=Yi(),l=zt("div"),u=zt("div"),m=Yi(),r=zt("div"),f=zt("header"),_=zt("p"),w=Xn("Export"),b=Yi(),x=zt("button"),v=Yi(),C=zt("section"),T=zt("div"),S=zt("label"),M=Xn("Paper Size"),O=Yi(),V=zt("div"),G=zt("div"),Z=zt("select");for(let fn=0;fn<hn.length;fn+=1)hn[fn].c();te=Yi(),J=zt("div"),oe=zt("i"),Me=Yi(),Fe=zt("div"),pe=zt("label"),Ie=Xn("Page Orientation"),Se=Yi(),me=zt("div");for(let fn=0;fn<Xi.length;fn+=1)Xi[fn].c();et=Yi(),nt=zt("div"),Et=zt("label"),it=Xn("Format"),we=Yi(),ke=zt("div"),Oe=zt("div"),le=zt("select");for(let fn=0;fn<Gn.length;fn+=1)Gn[fn].c();Ce=Yi(),he=zt("div"),ge=zt("i"),Be=Yi(),We=zt("div"),st=zt("label"),Xe=Xn("DPI"),gt=Yi(),Pt=zt("div"),ri=zt("div"),ut=zt("select");for(let fn=0;fn<zn.length;fn+=1)zn[fn].c();bt=Yi(),vt=zt("div"),Ke=zt("i"),ei=Yi(),li=zt("footer"),$t=zt("button"),Si=zt("span"),Ti=zt("i"),Yt=Yi(),mi=zt("span"),Wi=Xn("Cancel"),Ci=Yi(),ti=zt("button"),Pe=zt("span"),Q=zt("i"),ae=Yi(),Qe=zt("span"),_t=Xn("Export"),this.h()},l(fn){e=Nt(fn,"DIV",{class:!0});var yn=Gt(e);t=Nt(yn,"I",{class:!0}),Gt(t).forEach(Le),yn.forEach(Le),o=Zi(fn),l=Nt(fn,"DIV",{class:!0});var tn=Gt(l);u=Nt(tn,"DIV",{class:!0}),Gt(u).forEach(Le),m=Zi(tn),r=Nt(tn,"DIV",{class:!0});var wr=Gt(r);f=Nt(wr,"HEADER",{class:!0});var Wn=Gt(f);_=Nt(Wn,"P",{class:!0});var lr=Gt(_);w=Yn(lr,"Export"),lr.forEach(Le),b=Zi(Wn),x=Nt(Wn,"BUTTON",{class:!0,"aria-label":!0}),Gt(x).forEach(Le),Wn.forEach(Le),v=Zi(wr),C=Nt(wr,"SECTION",{class:!0});var Kr=Gt(C);T=Nt(Kr,"DIV",{class:!0});var rn=Gt(T);S=Nt(rn,"LABEL",{class:!0});var He=Gt(S);M=Yn(He,"Paper Size"),He.forEach(Le),O=Zi(rn),V=Nt(rn,"DIV",{class:!0});var yo=Gt(V);G=Nt(yo,"DIV",{class:!0});var _o=Gt(G);Z=Nt(_o,"SELECT",{});var co=Gt(Z);for(let Jr=0;Jr<hn.length;Jr+=1)hn[Jr].l(co);co.forEach(Le),_o.forEach(Le),te=Zi(yo),J=Nt(yo,"DIV",{class:!0});var Te=Gt(J);oe=Nt(Te,"I",{class:!0}),Gt(oe).forEach(Le),Te.forEach(Le),yo.forEach(Le),rn.forEach(Le),Me=Zi(Kr),Fe=Nt(Kr,"DIV",{class:!0});var Ee=Gt(Fe);pe=Nt(Ee,"LABEL",{class:!0});var qe=Gt(pe);Ie=Yn(qe,"Page Orientation"),qe.forEach(Le),Se=Zi(Ee),me=Nt(Ee,"DIV",{class:!0});var ct=Gt(me);for(let Jr=0;Jr<Xi.length;Jr+=1)Xi[Jr].l(ct);ct.forEach(Le),Ee.forEach(Le),et=Zi(Kr),nt=Nt(Kr,"DIV",{class:!0});var dt=Gt(nt);Et=Nt(dt,"LABEL",{class:!0});var jt=Gt(Et);it=Yn(jt,"Format"),jt.forEach(Le),we=Zi(dt),ke=Nt(dt,"DIV",{class:!0});var Ge=Gt(ke);Oe=Nt(Ge,"DIV",{class:!0});var Zt=Gt(Oe);le=Nt(Zt,"SELECT",{});var Rt=Gt(le);for(let Jr=0;Jr<Gn.length;Jr+=1)Gn[Jr].l(Rt);Rt.forEach(Le),Zt.forEach(Le),Ce=Zi(Ge),he=Nt(Ge,"DIV",{class:!0});var oi=Gt(he);ge=Nt(oi,"I",{class:!0}),Gt(ge).forEach(Le),oi.forEach(Le),Ge.forEach(Le),dt.forEach(Le),Be=Zi(Kr),We=Nt(Kr,"DIV",{class:!0});var yt=Gt(We);st=Nt(yt,"LABEL",{class:!0});var Ri=Gt(st);Xe=Yn(Ri,"DPI"),Ri.forEach(Le),gt=Zi(yt),Pt=Nt(yt,"DIV",{class:!0});var Ii=Gt(Pt);ri=Nt(Ii,"DIV",{class:!0});var Sn=Gt(ri);ut=Nt(Sn,"SELECT",{});var An=Gt(ut);for(let Jr=0;Jr<zn.length;Jr+=1)zn[Jr].l(An);An.forEach(Le),Sn.forEach(Le),bt=Zi(Ii),vt=Nt(Ii,"DIV",{class:!0});var wt=Gt(vt);Ke=Nt(wt,"I",{class:!0}),Gt(Ke).forEach(Le),wt.forEach(Le),Ii.forEach(Le),yt.forEach(Le),Kr.forEach(Le),ei=Zi(wr),li=Nt(wr,"FOOTER",{class:!0});var Tn=Gt(li);$t=Nt(Tn,"BUTTON",{class:!0});var Jn=Gt($t);Si=Nt(Jn,"SPAN",{class:!0});var Pr=Gt(Si);Ti=Nt(Pr,"I",{class:!0}),Gt(Ti).forEach(Le),Pr.forEach(Le),Yt=Zi(Jn),mi=Nt(Jn,"SPAN",{});var sr=Gt(mi);Wi=Yn(sr,"Cancel"),sr.forEach(Le),Jn.forEach(Le),Ci=Zi(Tn),ti=Nt(Tn,"BUTTON",{class:!0});var Cr=Gt(ti);Pe=Nt(Cr,"SPAN",{class:!0});var Mr=Gt(Pe);Q=Nt(Mr,"I",{class:!0}),Gt(Q).forEach(Le),Mr.forEach(Le),ae=Zi(Cr),Qe=Nt(Cr,"SPAN",{});var io=Gt(Qe);_t=Yn(io,"Export"),io.forEach(Le),Cr.forEach(Le),Tn.forEach(Le),wr.forEach(Le),tn.forEach(Le),this.h()},h(){Ht(t,"class","fas fa-print fa-xl"),Ht(e,"class","icon is-large is-left menu-button svelte-ffzutn"),Ht(u,"class","modal-background"),Ht(_,"class","modal-card-title"),Ht(x,"class","delete"),Ht(x,"aria-label","close"),Ht(f,"class","modal-card-head"),Ht(S,"class","label"),i[0]===void 0&&Ua(()=>i[8].call(Z)),Ht(G,"class","select is-fullwidth"),Ht(oe,"class","fas fa-file"),Ht(J,"class","icon is-small is-left"),Ht(V,"class","control has-icons-left"),Ht(T,"class","field"),Ht(pe,"class","label"),Ht(me,"class","control"),Ht(Fe,"class","field"),Ht(Et,"class","label"),i[2]===void 0&&Ua(()=>i[10].call(le)),Ht(Oe,"class","select is-fullwidth"),Ht(ge,"class","fas fa-file-pdf"),Ht(he,"class","icon is-small is-left"),Ht(ke,"class","control has-icons-left"),Ht(nt,"class","field"),Ht(st,"class","label"),i[1]===void 0&&Ua(()=>i[11].call(ut)),Ht(ri,"class","select is-fullwidth"),Ht(Ke,"class","fas fa-braille"),Ht(vt,"class","icon is-small is-left"),Ht(Pt,"class","control has-icons-left"),Ht(We,"class","field"),Ht(C,"class","modal-card-body"),Ht(Ti,"class","fas fa-xmark"),Ht(Si,"class","icon"),Ht($t,"class","button"),Ht(Q,"class","fas fa-download"),Ht(Pe,"class","icon"),Ht(ti,"class","button is-success"),Ht(li,"class","modal-card-foot"),Ht(r,"class","modal-card"),Ht(l,"class",Jt=`modal ${i[4]?"is-active":""} svelte-ffzutn`)},m(fn,yn){qt(fn,e,yn),Dt(e,t),qt(fn,o,yn),qt(fn,l,yn),Dt(l,u),Dt(l,m),Dt(l,r),Dt(r,f),Dt(f,_),Dt(_,w),Dt(f,b),Dt(f,x),Dt(r,v),Dt(r,C),Dt(C,T),Dt(T,S),Dt(S,M),Dt(T,O),Dt(T,V),Dt(V,G),Dt(G,Z);for(let tn=0;tn<hn.length;tn+=1)hn[tn].m(Z,null);Ys(Z,i[0]),Dt(V,te),Dt(V,J),Dt(J,oe),Dt(C,Me),Dt(C,Fe),Dt(Fe,pe),Dt(pe,Ie),Dt(Fe,Se),Dt(Fe,me);for(let tn=0;tn<Xi.length;tn+=1)Xi[tn].m(me,null);Dt(C,et),Dt(C,nt),Dt(nt,Et),Dt(Et,it),Dt(nt,we),Dt(nt,ke),Dt(ke,Oe),Dt(Oe,le);for(let tn=0;tn<Gn.length;tn+=1)Gn[tn].m(le,null);Ys(le,i[2]),Dt(ke,Ce),Dt(ke,he),Dt(he,ge),Dt(C,Be),Dt(C,We),Dt(We,st),Dt(st,Xe),Dt(We,gt),Dt(We,Pt),Dt(Pt,ri),Dt(ri,ut);for(let tn=0;tn<zn.length;tn+=1)zn[tn].m(ut,null);Ys(ut,i[1]),Dt(Pt,bt),Dt(Pt,vt),Dt(vt,Ke),Dt(r,ei),Dt(r,li),Dt(li,$t),Dt($t,Si),Dt(Si,Ti),Dt($t,Yt),Dt($t,mi),Dt(mi,Wi),Dt(li,Ci),Dt(li,ti),Dt(ti,Pe),Dt(Pe,Q),Dt(ti,ae),Dt(ti,Qe),Dt(Qe,_t),di||(wn=[En(e,"click",i[6]),En(u,"click",i[7]),En(x,"click",i[7]),En(Z,"change",i[8]),En(le,"change",i[10]),En(ut,"change",i[11]),En($t,"click",i[7]),En(ti,"click",i[5])],di=!0)},p(fn,[yn]){if(yn&0){Ln=Object.keys(td);let tn;for(tn=0;tn<Ln.length;tn+=1){const wr=__(fn,Ln,tn);hn[tn]?hn[tn].p(wr,yn):(hn[tn]=v_(wr),hn[tn].c(),hn[tn].m(Z,null))}for(;tn<hn.length;tn+=1)hn[tn].d(1);hn.length=Ln.length}if(yn&1&&Ys(Z,fn[0]),yn&8){Bi=Object.keys(th);let tn;for(tn=0;tn<Bi.length;tn+=1){const wr=y_(fn,Bi,tn);Xi[tn]?Xi[tn].p(wr,yn):(Xi[tn]=b_(wr),Xi[tn].c(),Xi[tn].m(me,null))}for(;tn<Xi.length;tn+=1)Xi[tn].d(1);Xi.length=Bi.length}if(yn&0){Hn=Object.keys(Zc);let tn;for(tn=0;tn<Hn.length;tn+=1){const wr=g_(fn,Hn,tn);Gn[tn]?Gn[tn].p(wr,yn):(Gn[tn]=w_(wr),Gn[tn].c(),Gn[tn].m(le,null))}for(;tn<Gn.length;tn+=1)Gn[tn].d(1);Gn.length=Hn.length}if(yn&4&&Ys(le,fn[2]),yn&0){Zr=Object.keys(Hd);let tn;for(tn=0;tn<Zr.length;tn+=1){const wr=m_(fn,Zr,tn);zn[tn]?zn[tn].p(wr,yn):(zn[tn]=x_(wr),zn[tn].c(),zn[tn].m(ut,null))}for(;tn<zn.length;tn+=1)zn[tn].d(1);zn.length=Zr.length}yn&2&&Ys(ut,fn[1]),yn&16&&Jt!==(Jt=`modal ${fn[4]?"is-active":""} svelte-ffzutn`)&&Ht(l,"class",Jt)},i:eo,o:eo,d(fn){fn&&Le(e),fn&&Le(o),fn&&Le(l),oa(hn,fn),oa(Xi,fn),oa(Gn,fn),oa(zn,fn),di=!1,qo(wn)}}}function q8(i,e,t){let o;As(i,nu,O=>t(13,o=O));let l,u=td.A4,m=Hd[96],r=Zc.PNG,f=th.Landscape,_=!1;Ds(async()=>{const{default:O}=await h1(()=>Promise.resolve().then(()=>U8),void 0,import.meta.url);l=new O});const w=()=>{let O=[u[0],u[1]];return f!==th.Landscape&&(O=O.reverse()),O},b=()=>{const O=w();l.generate(o,O,m,r,p1.mm),v()},x=()=>{t(4,_=!0)},v=()=>{t(4,_=!1)};function C(){u=Ac(this),t(0,u)}const T=O=>{t(3,f=th[O])};function S(){r=Ac(this),t(2,r)}function M(){m=Ac(this),t(1,m)}return[u,m,r,f,_,b,x,v,C,T,S,M]}class H8 extends vr{constructor(e){super(),br(this,e,q8,V8,mr,{})}}const G8=async i=>{if("clipboard"in navigator)await navigator.clipboard.writeText(i);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=i,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},W8=(i,e)=>{async function t(){if(l)try{await G8(l),i.dispatchEvent(new CustomEvent("svelte-copy",{detail:l}))}catch(u){i.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:u}))}}let o=typeof e=="string"?["click"]:[e.events].flat(1),l=typeof e=="string"?e:e.text;return o.forEach(u=>{i.addEventListener(u,t,!0)}),{update:u=>{const m=typeof u=="string"?["click"]:[u.events].flat(1),r=typeof u=="string"?u:u.text,f=m.filter(w=>!o.includes(w)),_=o.filter(w=>!m.includes(w));f.forEach(w=>{i.addEventListener(w,t,!0)}),_.forEach(w=>{i.removeEventListener(w,t,!0)}),o=m,l=r},destroy:()=>{o.forEach(u=>{i.removeEventListener(u,t,!0)})}}};function X8(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we;return{c(){e=zt("div"),t=zt("i"),o=Yi(),l=zt("div"),u=zt("div"),m=Yi(),r=zt("div"),f=zt("header"),_=zt("p"),w=Xn("URL to share"),b=Yi(),x=zt("button"),v=Yi(),C=zt("section"),T=zt("div"),S=zt("input"),M=Yi(),O=zt("button"),V=zt("span"),G=zt("i"),Z=Yi(),te=zt("span"),J=Xn(i[1]),Me=Yi(),Fe=zt("footer"),pe=zt("button"),Ie=zt("span"),Se=zt("i"),me=Yi(),et=zt("span"),nt=Xn("Cancel"),this.h()},l(ke){e=Nt(ke,"DIV",{class:!0});var Oe=Gt(e);t=Nt(Oe,"I",{class:!0}),Gt(t).forEach(Le),Oe.forEach(Le),o=Zi(ke),l=Nt(ke,"DIV",{class:!0});var le=Gt(l);u=Nt(le,"DIV",{class:!0}),Gt(u).forEach(Le),m=Zi(le),r=Nt(le,"DIV",{class:!0});var Ce=Gt(r);f=Nt(Ce,"HEADER",{class:!0});var he=Gt(f);_=Nt(he,"P",{class:!0});var ge=Gt(_);w=Yn(ge,"URL to share"),ge.forEach(Le),b=Zi(he),x=Nt(he,"BUTTON",{class:!0,"aria-label":!0}),Gt(x).forEach(Le),he.forEach(Le),v=Zi(Ce),C=Nt(Ce,"SECTION",{class:!0});var Be=Gt(C);T=Nt(Be,"DIV",{class:!0});var We=Gt(T);S=Nt(We,"INPUT",{class:!0,type:!0,placeholder:!0}),M=Zi(We),O=Nt(We,"BUTTON",{class:!0});var st=Gt(O);V=Nt(st,"SPAN",{class:!0});var Xe=Gt(V);G=Nt(Xe,"I",{class:!0}),Gt(G).forEach(Le),Xe.forEach(Le),Z=Zi(st),te=Nt(st,"SPAN",{});var gt=Gt(te);J=Yn(gt,i[1]),gt.forEach(Le),st.forEach(Le),We.forEach(Le),Be.forEach(Le),Me=Zi(Ce),Fe=Nt(Ce,"FOOTER",{class:!0});var Pt=Gt(Fe);pe=Nt(Pt,"BUTTON",{class:!0});var ri=Gt(pe);Ie=Nt(ri,"SPAN",{class:!0});var ut=Gt(Ie);Se=Nt(ut,"I",{class:!0}),Gt(Se).forEach(Le),ut.forEach(Le),me=Zi(ri),et=Nt(ri,"SPAN",{});var bt=Gt(et);nt=Yn(bt,"Cancel"),bt.forEach(Le),ri.forEach(Le),Pt.forEach(Le),Ce.forEach(Le),le.forEach(Le),this.h()},h(){Ht(t,"class","fas fa-share-nodes fa-xl"),Ht(e,"class","icon is-large is-left menu-button svelte-119wfm0"),Ht(u,"class","modal-background"),Ht(_,"class","modal-card-title"),Ht(x,"class","delete"),Ht(x,"aria-label","close"),Ht(f,"class","modal-card-head"),Ht(S,"class","input is-success"),Ht(S,"type","text"),Ht(S,"placeholder","URL to share"),S.readOnly=!0,Ht(G,"class","fas fa-copy"),Ht(V,"class","icon"),Ht(O,"class","button is-success ml-1"),Ht(T,"class","copy-control svelte-119wfm0"),Ht(C,"class","modal-card-body"),Ht(Se,"class","fas fa-xmark"),Ht(Ie,"class","icon"),Ht(pe,"class","button"),Ht(Fe,"class","modal-card-foot"),Ht(r,"class","modal-card"),Ht(l,"class",Et=`modal ${i[0]?"is-active":""} svelte-119wfm0`)},m(ke,Oe){qt(ke,e,Oe),Dt(e,t),qt(ke,o,Oe),qt(ke,l,Oe),Dt(l,u),Dt(l,m),Dt(l,r),Dt(r,f),Dt(f,_),Dt(_,w),Dt(f,b),Dt(f,x),Dt(r,v),Dt(r,C),Dt(C,T),Dt(T,S),ed(S,i[2]),Dt(T,M),Dt(T,O),Dt(O,V),Dt(V,G),Dt(O,Z),Dt(O,te),Dt(te,J),Dt(r,Me),Dt(r,Fe),Dt(Fe,pe),Dt(pe,Ie),Dt(Ie,Se),Dt(pe,me),Dt(pe,et),Dt(et,nt),it||(we=[En(e,"click",i[5]),En(u,"click",i[4]),En(x,"click",i[4]),En(S,"input",i[6]),pr(oe=W8.call(null,O,i[2])),En(O,"click",i[3]),En(pe,"click",i[4])],it=!0)},p(ke,[Oe]){Oe&4&&S.value!==ke[2]&&ed(S,ke[2]),Oe&2&&Jo(J,ke[1]),oe&&So(oe.update)&&Oe&4&&oe.update.call(null,ke[2]),Oe&1&&Et!==(Et=`modal ${ke[0]?"is-active":""} svelte-119wfm0`)&&Ht(l,"class",Et)},i:eo,o:eo,d(ke){ke&&Le(e),ke&&Le(o),ke&&Le(l),it=!1,qo(we)}}}function Y8(i,e,t){let o,l,u,m;As(i,Gd,C=>t(7,l=C)),As(i,nu,C=>t(8,u=C)),As(i,Sx,C=>t(9,m=C));let r,f="Copy";const _=()=>{t(1,f="copied"),setTimeout(()=>{t(1,f="Copy")},2e3)},w=()=>{if(!u)return"";const C=`${m.url.protocol}//${m.url.host}`,T=`#${u.getZoom().toFixed(2)}`,S=`/${u.getCenter().lat.toFixed(6)}`,M=`/${u.getCenter().lng.toFixed(6)}`,O=u.getBearing()!==0?`/${u.getBearing().toFixed(1)}`:"",V=u.getPitch()!==0?`/${u.getPitch().toFixed()}`:"",G=`/?style=${l.title}`;return t(2,o=`${C}${G}${T}${S}${M}${O}${V}`),o},b=()=>{t(0,r=!1)},x=()=>t(0,r=!0);function v(){o=this.value,t(2,o)}return i.$$.update=()=>{i.$$.dirty&1&&r===!0&&w()},t(2,o=w()),[r,f,o,_,b,x,v]}class Z8 extends vr{constructor(e){super(),br(this,e,Y8,X8,mr,{})}}function K8(i){let e;return{c(){e=zt("link"),this.h()},l(t){e=Nt(t,"LINK",{rel:!0,href:!0}),this.h()},h(){Ht(e,"rel","stylesheet"),Ht(e,"href",fr.basePath+"/smui.css")},m(t,o){qt(t,e,o)},p:eo,d(t){t&&Le(e)}}}function J8(i){let e,t,o;return{c(){e=zt("link"),t=Yi(),o=zt("link"),this.h()},l(l){e=Nt(l,"LINK",{rel:!0,href:!0,media:!0}),t=Zi(l),o=Nt(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){Ht(e,"rel","stylesheet"),Ht(e,"href",fr.basePath+"/smui.css"),Ht(e,"media","print"),Ht(o,"rel","stylesheet"),Ht(o,"href",fr.basePath+"/smui-dark.css"),Ht(o,"media","screen")},m(l,u){qt(l,e,u),qt(l,t,u),qt(l,o,u)},p:eo,d(l){l&&Le(e),l&&Le(t),l&&Le(o)}}}function Q8(i){let e,t,o;return{c(){e=zt("link"),t=Yi(),o=zt("link"),this.h()},l(l){e=Nt(l,"LINK",{rel:!0,href:!0,media:!0}),t=Zi(l),o=Nt(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){Ht(e,"rel","stylesheet"),Ht(e,"href",fr.basePath+"/smui.css"),Ht(e,"media","(prefers-color-scheme: light)"),Ht(o,"rel","stylesheet"),Ht(o,"href",fr.basePath+"/smui-dark.css"),Ht(o,"media","screen and (prefers-color-scheme: dark)")},m(l,u){qt(l,e,u),qt(l,t,u),qt(l,o,u)},p:eo,d(l){l&&Le(e),l&&Le(t),l&&Le(o)}}}function $8(i){let e,t,o,l,u,m,r;function f(b,x){return b[0]===void 0?Q8:b[0]?J8:K8}let _=f(i),w=_(i);return{c(){w.c(),e=gn(),t=Yi(),o=zt("div"),l=zt("i"),this.h()},l(b){const x=xx("svelte-7r4yyr",document.head);w.l(x),e=gn(),x.forEach(Le),t=Zi(b),o=Nt(b,"DIV",{class:!0});var v=Gt(o);l=Nt(v,"I",{class:!0}),Gt(l).forEach(Le),v.forEach(Le),this.h()},h(){Ht(l,"class",u=`fas ${i[0]?"fa-sun":"fa-moon"} fa-xl svelte-ffzutn`),Ht(o,"class","icon is-large is-left menu-button svelte-ffzutn")},m(b,x){w.m(document.head,null),Dt(document.head,e),qt(b,t,x),qt(b,o,x),Dt(o,l),m||(r=En(o,"click",i[1]),m=!0)},p(b,[x]){_===(_=f(b))&&w?w.p(b,x):(w.d(1),w=_(b),w&&(w.c(),w.m(e.parentNode,e))),x&1&&u!==(u=`fas ${b[0]?"fa-sun":"fa-moon"} fa-xl svelte-ffzutn`)&&Ht(l,"class",u)},i:eo,o:eo,d(b){w.d(b),Le(e),b&&Le(t),b&&Le(o),m=!1,r()}}}function eA(i,e,t){let o;const l=ep();return Ds(async()=>{t(0,o=window.matchMedia("(prefers-color-scheme: dark)").matches)}),[o,()=>{t(0,o=!o),l("change",{isDarkTheme:o})}]}class tA extends vr{constructor(e){super(),br(this,e,eA,$8,mr,{})}}function iA(i){let e,t,o,l,u;return{c(){e=zt("div"),t=zt("i"),this.h()},l(m){e=Nt(m,"DIV",{class:!0});var r=Gt(e);t=Nt(r,"I",{class:!0}),Gt(t).forEach(Le),r.forEach(Le),this.h()},h(){Ht(t,"class",o=`fas ${i[0]?"fa-xmark":"fa-bars"} fa-xl svelte-ffzutn`),Ht(e,"class","icon is-large is-left menu-button svelte-ffzutn")},m(m,r){qt(m,e,r),Dt(e,t),l||(u=En(e,"click",i[1]),l=!0)},p(m,[r]){r&1&&o!==(o=`fas ${m[0]?"fa-xmark":"fa-bars"} fa-xl svelte-ffzutn`)&&Ht(t,"class",o)},i:eo,o:eo,d(m){m&&Le(e),l=!1,u()}}}function nA(i,e,t){let{isOpened:o=!1}=e;const l=()=>t(0,o=!o);return i.$$set=u=>{"isOpened"in u&&t(0,o=u.isOpened)},[o,l]}class rA extends vr{constructor(e){super(),br(this,e,nA,iA,mr,{isOpened:0})}}const{window:Nw}=S1;function A_(i){let e,t;return e=new M6({props:{$$slots:{default:[oA]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l&512&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function oA(i){let e=fr.title+"",t;return{c(){t=Xn(e)},l(o){t=Yn(o,e)},m(o,l){qt(o,t,l)},p:eo,d(o){o&&Le(t)}}}function sA(i){let e,t,o,l,u,m,r,f,_;function w(v){i[6](v)}let b={};i[0]!==void 0&&(b.isOpened=i[0]),e=new rA({props:b}),In.push(()=>To(e,"isOpened",w));let x=!i[3]&&A_(i);return{c(){ln(e.$$.fragment),o=Yi(),l=zt("a"),u=zt("img"),r=Yi(),x&&x.c(),f=gn(),this.h()},l(v){pn(e.$$.fragment,v),o=Zi(v),l=Nt(v,"A",{href:!0});var C=Gt(l);u=Nt(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(Le),r=Zi(v),x&&x.l(v),f=gn(),this.h()},h(){cw(u.src,m=fr.logo)||Ht(u,"src",m),Ht(u,"alt","logo"),Ht(u,"class","logo svelte-1cnjkz4"),Ht(l,"href",fr.url)},m(v,C){un(e,v,C),qt(v,o,C),qt(v,l,C),Dt(l,u),qt(v,r,C),x&&x.m(v,C),qt(v,f,C),_=!0},p(v,C){const T={};!t&&C&1&&(t=!0,T.isOpened=v[0],Lo(()=>t=!1)),e.$set(T),v[3]?x&&(Rr(),Ft(x,1,1,()=>{x=null}),Fr()):x?(x.p(v,C),C&8&&xt(x,1)):(x=A_(v),x.c(),xt(x,1),x.m(f.parentNode,f))},i(v){_||(xt(e.$$.fragment,v),xt(x),_=!0)},o(v){Ft(e.$$.fragment,v),Ft(x),_=!1},d(v){cn(e,v),v&&Le(o),v&&Le(l),v&&Le(r),x&&x.d(v),v&&Le(f)}}}function aA(i){let e,t,o,l,u,m;return e=new Z8({}),o=new H8({}),u=new tA({}),u.$on("change",i[4]),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment),l=Yi(),ln(u.$$.fragment)},l(r){pn(e.$$.fragment,r),t=Zi(r),pn(o.$$.fragment,r),l=Zi(r),pn(u.$$.fragment,r)},m(r,f){un(e,r,f),qt(r,t,f),un(o,r,f),qt(r,l,f),un(u,r,f),m=!0},p:eo,i(r){m||(xt(e.$$.fragment,r),xt(o.$$.fragment,r),xt(u.$$.fragment,r),m=!0)},o(r){Ft(e.$$.fragment,r),Ft(o.$$.fragment,r),Ft(u.$$.fragment,r),m=!1},d(r){cn(e,r),r&&Le(t),cn(o,r),r&&Le(l),cn(u,r)}}}function lA(i){let e,t,o,l,u,m;return e=new Yy({props:{$$slots:{default:[sA]},$$scope:{ctx:i}}}),u=new Yy({props:{align:"end",toolbar:!0,$$slots:{default:[aA]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),o=zt("section"),l=Yi(),ln(u.$$.fragment)},l(r){pn(e.$$.fragment,r),t=Zi(r),o=Nt(r,"SECTION",{}),Gt(o).forEach(Le),l=Zi(r),pn(u.$$.fragment,r)},m(r,f){un(e,r,f),qt(r,t,f),qt(r,o,f),qt(r,l,f),un(u,r,f),m=!0},p(r,f){const _={};f&521&&(_.$$scope={dirty:f,ctx:r}),e.$set(_);const w={};f&512&&(w.$$scope={dirty:f,ctx:r}),u.$set(w)},i(r){m||(xt(e.$$.fragment,r),xt(u.$$.fragment,r),m=!0)},o(r){Ft(e.$$.fragment,r),Ft(u.$$.fragment,r),m=!1},d(r){cn(e,r),r&&Le(t),r&&Le(o),r&&Le(l),cn(u,r)}}}function uA(i){let e,t;return e=new I6({props:{$$slots:{default:[lA]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l&521&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function cA(i){let e,t,o,l,u,m;Ua(i[5]);let r={variant:"fixed",$$slots:{default:[uA]},$$scope:{ctx:i}};return e=new Ux({props:r}),i[7](e),o=new B6({props:{topAppBar:i[2]}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(f){pn(e.$$.fragment,f),t=Zi(f),pn(o.$$.fragment,f)},m(f,_){un(e,f,_),qt(f,t,_),un(o,f,_),l=!0,u||(m=En(Nw,"resize",i[5]),u=!0)},p(f,[_]){const w={};_&521&&(w.$$scope={dirty:_,ctx:f}),e.$set(w);const b={};_&4&&(b.topAppBar=f[2]),o.$set(b)},i(f){l||(xt(e.$$.fragment,f),xt(o.$$.fragment,f),l=!0)},o(f){Ft(e.$$.fragment,f),Ft(o.$$.fragment,f),l=!1},d(f){i[7](null),cn(e,f),f&&Le(t),cn(o,f),u=!1,m()}}}function hA(i,e,t){let{drawerOpen:o=!1}=e,l,u=0,m=u<768;const r=()=>{t(3,m=window.matchMedia("only screen and (max-width: 768px)").matches)};Ds(()=>{r()});const f=()=>{t(0,o=!1)};function _(){t(1,u=Nw.innerWidth)}function w(x){o=x,t(0,o)}function b(x){In[x?"unshift":"push"](()=>{l=x,t(2,l)})}return i.$$set=x=>{"drawerOpen"in x&&t(0,o=x.drawerOpen)},i.$$.update=()=>{i.$$.dirty&2&&r()},[o,u,l,m,f,_,w,b]}class fA extends vr{constructor(e){super(),br(this,e,hA,cA,mr,{drawerOpen:0})}}const jw={name:"SplitterContext"};function dA(i){let e,t,o,l;return{c(){e=zt("div"),t=zt("div"),this.h()},l(u){e=Nt(u,"DIV",{class:!0,tabindex:!0});var m=Gt(e);t=Nt(m,"DIV",{class:!0,style:!0}),Gt(t).forEach(Le),m.forEach(Le),this.h()},h(){Ht(t,"class","line svelte-16wga0t"),Ht(t,"style",i[3]),Ht(e,"class",o=Ud(i[2])+" svelte-16wga0t"),Ht(e,"tabindex","0"),Ua(()=>i[13].call(e))},m(u,m){qt(u,e,m),Dt(e,t),l=Id(e,i[13].bind(e))},p(u,[m]){m&8&&Ht(t,"style",u[3]),m&4&&o!==(o=Ud(u[2])+" svelte-16wga0t")&&Ht(e,"class",o)},i:eo,o:eo,d(u){u&&Le(e),l()}}}function pA(i,e,t){let o,l,u,m,r,f,_,{color:w="silver"}=e,{hoverColor:b="gray"}=e,{dragColor:x="black"}=e,v=Zs(jw);As(i,v,M=>t(12,_=M));let C,T;function S(){C=this.clientWidth,T=this.clientHeight,t(0,C),t(1,T)}return i.$$set=M=>{"color"in M&&t(5,w=M.color),"hoverColor"in M&&t(6,b=M.hoverColor),"dragColor"in M&&t(7,x=M.dragColor)},i.$$.update=()=>{i.$$.dirty&4096&&t(10,o=_.dragging),i.$$.dirty&4096&&t(8,l=_.horizontal),i.$$.dirty&259&&t(11,u=l?T:C),i.$$.dirty&3296&&t(9,m={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":o?x:w,"--splitter-line-hover-color":o?x:b}),i.$$.dirty&512&&t(3,r=Object.entries(m).map(([M,O])=>`${M}:${O}`).join(";")),i.$$.dirty&256&&t(2,f=l?"splitter horizontal":"splitter vertical")},[C,T,f,r,v,w,b,x,l,m,o,u,_,S]}class mA extends vr{constructor(e){super(),br(this,e,pA,dA,mr,{color:5,hoverColor:6,dragColor:7})}}const gA=i=>({}),k_=i=>({}),yA=i=>({}),S_=i=>({}),_A=i=>({}),C_=i=>({});function vA(i){let e,t;return e=new mA({}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function bA(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C;const T=i[33].primary,S=xr(T,i,i[32],C_),M=i[33].splitter,O=xr(M,i,i[32],S_),V=O||vA(),G=i[33].secondary,Z=xr(G,i,i[32],k_);return{c(){e=zt("div"),t=zt("div"),S&&S.c(),l=Yi(),u=zt("div"),V&&V.c(),r=Yi(),f=zt("div"),Z&&Z.c(),this.h()},l(te){e=Nt(te,"DIV",{class:!0,style:!0});var J=Gt(e);t=Nt(J,"DIV",{class:!0});var oe=Gt(t);S&&S.l(oe),oe.forEach(Le),l=Zi(J),u=Nt(J,"DIV",{class:!0});var Me=Gt(u);V&&V.l(Me),Me.forEach(Le),r=Zi(J),f=Nt(J,"DIV",{class:!0});var Fe=Gt(f);Z&&Z.l(Fe),Fe.forEach(Le),J.forEach(Le),this.h()},h(){Ht(t,"class","primary svelte-603y9m"),Ua(()=>i[34].call(t)),Ht(u,"class","splitter svelte-603y9m"),Ua(()=>i[35].call(u)),Ht(f,"class","secondary svelte-603y9m"),Ua(()=>i[36].call(f)),Ht(e,"class",w=Ud(i[8])+" svelte-603y9m"),Ht(e,"style",i[9]),Ua(()=>i[37].call(e))},m(te,J){qt(te,e,J),Dt(e,t),S&&S.m(t,null),o=Id(t,i[34].bind(t)),Dt(e,l),Dt(e,u),V&&V.m(u,null),m=Id(u,i[35].bind(u)),Dt(e,r),Dt(e,f),Z&&Z.m(f,null),_=Id(f,i[36].bind(f)),b=Id(e,i[37].bind(e)),x=!0,v||(C=[En(u,"pointerdown",i[10]),En(u,"pointermove",i[11]),En(u,"pointerup",i[12]),En(u,"dblclick",i[13]),En(u,"keydown",i[14])],v=!0)},p(te,J){S&&S.p&&(!x||J[1]&2)&&Ar(S,T,te,te[32],x?Sr(T,te[32],J,_A):kr(te[32]),C_),O&&O.p&&(!x||J[1]&2)&&Ar(O,M,te,te[32],x?Sr(M,te[32],J,yA):kr(te[32]),S_),Z&&Z.p&&(!x||J[1]&2)&&Ar(Z,G,te,te[32],x?Sr(G,te[32],J,gA):kr(te[32]),k_),(!x||J[0]&256&&w!==(w=Ud(te[8])+" svelte-603y9m"))&&Ht(e,"class",w),(!x||J[0]&512)&&Ht(e,"style",te[9])},i(te){x||(xt(S,te),xt(V,te),xt(Z,te),x=!0)},o(te){Ft(S,te),Ft(V,te),Ft(Z,te),x=!1},d(te){te&&Le(e),S&&S.d(te),o(),V&&V.d(te),m(),Z&&Z.d(te),_(),b(),v=!1,qo(C)}}}function wA(i,e,t){let o,l,u,m,r,f,_,w,b,{$$slots:x={},$$scope:v}=e,{horizontal:C=!1}=e,{initialPrimarySize:T="50%"}=e,{minPrimarySize:S="0"}=e,{minSecondarySize:M="0"}=e,{splitterSize:O="7px"}=e,{resetOnDoubleClick:V=!0}=e,G,Z,te,J,oe,Me,Fe,pe;const Ie=gt=>Math.max(0,Math.min(gt,100));let Se,me,et,nt=!1;const Et=()=>r,it=gt=>{t(23,Se=Ie(gt))},we=Cc({horizontal:C,dragging:nt});ws(jw,we);const ke=ep(),Oe=gt=>{gt.currentTarget.setPointerCapture(gt.pointerId),me=C?gt.clientY:gt.clientX,et=l,t(24,nt=!0)},le=gt=>{if(gt.currentTarget.hasPointerCapture(gt.pointerId)){const Pt=C?gt.clientY:gt.clientX;let ri=et+(Pt-me);ri=Math.max(0,Math.min(ri,o));const ut=ri/o*100;t(23,Se=ut)}},Ce=gt=>{gt.currentTarget.releasePointerCapture(gt.pointerId),t(24,nt=!1)},he=()=>{V&&t(23,Se=void 0)},ge=gt=>{const Pt=Se||r;if(!gt.ctrlKey&&!gt.shiftKey&&!gt.altKey){switch(gt.code){case"Space":t(23,Se=void 0);return}if(C)switch(gt.code){case"ArrowUp":t(23,Se=Ie(Pt-1));return;case"ArrowDown":t(23,Se=Ie(Pt+1));return}else switch(gt.code){case"ArrowLeft":t(23,Se=Ie(Pt-1));return;case"ArrowRight":t(23,Se=Ie(Pt+1));return}}};function Be(){te=this.clientWidth,J=this.clientHeight,t(2,te),t(3,J)}function We(){oe=this.clientWidth,Me=this.clientHeight,t(4,oe),t(5,Me)}function st(){Fe=this.clientWidth,pe=this.clientHeight,t(6,Fe),t(7,pe)}function Xe(){G=this.clientWidth,Z=this.clientHeight,t(0,G),t(1,Z)}return i.$$set=gt=>{"horizontal"in gt&&t(15,C=gt.horizontal),"initialPrimarySize"in gt&&t(16,T=gt.initialPrimarySize),"minPrimarySize"in gt&&t(17,S=gt.minPrimarySize),"minSecondarySize"in gt&&t(18,M=gt.minSecondarySize),"splitterSize"in gt&&t(19,O=gt.splitterSize),"resetOnDoubleClick"in gt&&t(20,V=gt.resetOnDoubleClick),"$$scope"in gt&&t(32,v=gt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32771&&t(26,o=C?Z:G),i.$$.dirty[0]&32780&&t(27,l=C?J:te),i.$$.dirty[0]&32816&&t(31,u=C?Me:oe),i.$$.dirty[0]&32960&&t(30,m=C?pe:Fe),i.$$.dirty[0]&201326592|i.$$.dirty[1]&1&&t(25,r=Ie(Math.ceil((l-u)/(o-u)*100))),i.$$.dirty[0]&16809984&&we.set({horizontal:C,dragging:nt}),i.$$.dirty[0]&1258291200|i.$$.dirty[1]&1&&ke("changed",{percent:r,primarySize:l,splitterSize:u,secondarySize:m,dragging:nt}),i.$$.dirty[0]&8454144&&t(29,f=Se!==void 0?`${Se}%`:T),i.$$.dirty[0]&537788416&&t(28,_={"--primary-size":`${f}`,"--min-primary-size":`${S}`,"--min-secondary-size":`${M}`,"--splitter-size":`${O}`}),i.$$.dirty[0]&268435456&&t(9,w=Object.entries(_).map(([gt,Pt])=>`${gt}:${Pt}`).join(";")),i.$$.dirty[0]&32768&&t(8,b=C?"split horizontal":"split vertical")},[G,Z,te,J,oe,Me,Fe,pe,b,w,Oe,le,Ce,he,ge,C,T,S,M,O,V,Et,it,Se,nt,r,o,l,_,f,m,u,v,x,Be,We,st,Xe]}class xA extends vr{constructor(e){super(),br(this,e,wA,bA,mr,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}class Uw{constructor(){ml(this,"STYLE_PATHNAME","style")}getUrl(){const e=window.location,t=new URL(e.href);return t.hash=e.hash,t}updateUrl(e){history.replaceState("","",e.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(e){const t=this.getUrl();t.searchParams.set(this.STYLE_PATHNAME,e),this.updateUrl(t)}delete(){const e=this.getUrl();e.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(e)}getMatchedStyleByTitle(e,t){for(const o of e)if(o.title===t)return o}getMatchedStyleByUrl(e,t){for(const o of e)if(o.uri===t)return o}}function E_(i,e,t){const o=i.slice();return o[7]=e[t],o}function I_(i){let e,t=i[7].title+"",o;return{c(){e=zt("option"),o=Xn(t),this.h()},l(l){e=Nt(l,"OPTION",{});var u=Gt(e);o=Yn(u,t),u.forEach(Le),this.h()},h(){e.__value=i[7].uri,e.value=e.__value},m(l,u){qt(l,e,u),Dt(e,o)},p:eo,d(l){l&&Le(e)}}}function AA(i){let e,t,o,l,u=fr.styles,m=[];for(let r=0;r<u.length;r+=1)m[r]=I_(E_(i,u,r));return{c(){e=zt("div"),t=zt("select");for(let r=0;r<m.length;r+=1)m[r].c();this.h()},l(r){e=Nt(r,"DIV",{class:!0});var f=Gt(e);t=Nt(f,"SELECT",{});var _=Gt(t);for(let w=0;w<m.length;w+=1)m[w].l(_);_.forEach(Le),f.forEach(Le),this.h()},h(){i[0]===void 0&&Ua(()=>i[2].call(t)),Ht(e,"class","select is-link is-fullwidth mt-1")},m(r,f){qt(r,e,f),Dt(e,t);for(let _=0;_<m.length;_+=1)m[_].m(t,null);Ys(t,i[0]),o||(l=En(t,"change",i[2]),o=!0)},p(r,[f]){if(f&0){u=fr.styles;let _;for(_=0;_<u.length;_+=1){const w=E_(r,u,_);m[_]?m[_].p(w,f):(m[_]=I_(w),m[_].c(),m[_].m(t,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=u.length}f&1&&Ys(t,r[0])},i:eo,o:eo,d(r){r&&Le(e),oa(m,r),o=!1,l()}}}function kA(i,e,t){let o,l;As(i,Gd,w=>t(1,o=w)),As(i,nu,w=>t(3,l=w));const u=ep();let m=o.uri;const r=()=>{!l||m!==o.uri&&(l.setStyle(m),l.on("styledata",()=>{const w=new Uw,b=w.getMatchedStyleByUrl(fr.styles,m);b?(w.set(b.title),Gd.update(()=>b)):w.delete(),u("change")}))},f=()=>{m!==o.uri&&t(0,m=o.uri)};function _(){m=Ac(this),t(0,m)}return i.$$.update=()=>{i.$$.dirty&1&&r(),i.$$.dirty&2&&f()},[m,o,_]}class SA extends vr{constructor(e){super(),br(this,e,kA,AA,mr,{})}}var CA=8,EA={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},IA={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},TA=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],LA={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},PA={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},MA={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},DA={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},OA={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},FA={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},RA={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},BA=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],zA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},NA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},jA={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},UA={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},VA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},qA={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},HA={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},GA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},WA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},XA={type:"array",value:"*",doc:"A filter selects specific features from a layer."},YA={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},ZA={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},KA={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},JA={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},QA={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},$A={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},ek={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},tk={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},ik={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},nk={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},rk={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},ok={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},sk={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},ak={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},lk=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],uk={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},ck={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},hk={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},fk={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dk={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},pk={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mk={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},gk={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yk={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_k={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},vk={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},bk={$version:CA,$root:EA,sources:IA,source:TA,source_vector:LA,source_raster:PA,source_raster_dem:MA,source_geojson:DA,source_video:OA,source_image:FA,layer:RA,layout:BA,layout_background:zA,layout_sky:NA,layout_fill:jA,layout_circle:UA,layout_heatmap:VA,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0"}},"property-type":"constant"}},layout_line:qA,layout_symbol:HA,layout_raster:GA,layout_hillshade:WA,filter:XA,filter_symbol:YA,filter_fill:ZA,filter_line:KA,filter_circle:JA,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:QA,filter_operator:$A,geometry_type:ek,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:tk,expression:ik,expression_name:nk,fog:rk,light:ok,projection:sk,terrain:ak,paint:lk,paint_fill:uk,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of ambient occlusion (AO) shading. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The radius of ambient occlusion (AO) shading, in meters. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to hight of one floor and brings the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:ck,paint_circle:hk,paint_heatmap:fk,paint_symbol:dk,paint_raster:pk,paint_hillshade:mk,paint_background:gk,paint_sky:yk,transition:_k,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:vk},Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(i){var e={exports:{}};return i(e,e.exports),e.exports}function wk(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */P1(function(i,e){(function(t){var o=e&&!e.nodeType&&e,l=i&&!i.nodeType&&i,u=typeof Rm=="object"&&Rm;(u.global===u||u.window===u||u.self===u)&&(t=u);var m,r=2147483647,f=36,_=1,w=26,b=38,x=700,v=72,C=128,T="-",S=/^xn--/,M=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=f-_,Z=Math.floor,te=String.fromCharCode,J;function oe(ke){throw RangeError(V[ke])}function Me(ke,Oe){for(var le=ke.length,Ce=[];le--;)Ce[le]=Oe(ke[le]);return Ce}function Fe(ke,Oe){var le=ke.split("@"),Ce="";le.length>1&&(Ce=le[0]+"@",ke=le[1]),ke=ke.replace(O,".");var he=ke.split("."),ge=Me(he,Oe).join(".");return Ce+ge}function pe(ke){for(var Oe=[],le=0,Ce=ke.length,he,ge;le<Ce;)he=ke.charCodeAt(le++),he>=55296&&he<=56319&&le<Ce?(ge=ke.charCodeAt(le++),(ge&64512)==56320?Oe.push(((he&1023)<<10)+(ge&1023)+65536):(Oe.push(he),le--)):Oe.push(he);return Oe}function Ie(ke){return Me(ke,function(Oe){var le="";return Oe>65535&&(Oe-=65536,le+=te(Oe>>>10&1023|55296),Oe=56320|Oe&1023),le+=te(Oe),le}).join("")}function Se(ke){return ke-48<10?ke-22:ke-65<26?ke-65:ke-97<26?ke-97:f}function me(ke,Oe){return ke+22+75*(ke<26)-((Oe!=0)<<5)}function et(ke,Oe,le){var Ce=0;for(ke=le?Z(ke/x):ke>>1,ke+=Z(ke/Oe);ke>G*w>>1;Ce+=f)ke=Z(ke/G);return Z(Ce+(G+1)*ke/(ke+b))}function nt(ke){var Oe=[],le=ke.length,Ce,he=0,ge=C,Be=v,We,st,Xe,gt,Pt,ri,ut,bt,vt;for(We=ke.lastIndexOf(T),We<0&&(We=0),st=0;st<We;++st)ke.charCodeAt(st)>=128&&oe("not-basic"),Oe.push(ke.charCodeAt(st));for(Xe=We>0?We+1:0;Xe<le;){for(gt=he,Pt=1,ri=f;Xe>=le&&oe("invalid-input"),ut=Se(ke.charCodeAt(Xe++)),(ut>=f||ut>Z((r-he)/Pt))&&oe("overflow"),he+=ut*Pt,bt=ri<=Be?_:ri>=Be+w?w:ri-Be,!(ut<bt);ri+=f)vt=f-bt,Pt>Z(r/vt)&&oe("overflow"),Pt*=vt;Ce=Oe.length+1,Be=et(he-gt,Ce,gt==0),Z(he/Ce)>r-ge&&oe("overflow"),ge+=Z(he/Ce),he%=Ce,Oe.splice(he++,0,ge)}return Ie(Oe)}function Et(ke){var Oe,le,Ce,he,ge,Be,We,st,Xe,gt,Pt,ri=[],ut,bt,vt,Ke;for(ke=pe(ke),ut=ke.length,Oe=C,le=0,ge=v,Be=0;Be<ut;++Be)Pt=ke[Be],Pt<128&&ri.push(te(Pt));for(Ce=he=ri.length,he&&ri.push(T);Ce<ut;){for(We=r,Be=0;Be<ut;++Be)Pt=ke[Be],Pt>=Oe&&Pt<We&&(We=Pt);for(bt=Ce+1,We-Oe>Z((r-le)/bt)&&oe("overflow"),le+=(We-Oe)*bt,Oe=We,Be=0;Be<ut;++Be)if(Pt=ke[Be],Pt<Oe&&++le>r&&oe("overflow"),Pt==Oe){for(st=le,Xe=f;gt=Xe<=ge?_:Xe>=ge+w?w:Xe-ge,!(st<gt);Xe+=f)Ke=st-gt,vt=f-gt,ri.push(te(me(gt+Ke%vt,0))),st=Z(Ke/vt);ri.push(te(me(st,0))),ge=et(le,bt,Ce==he),le=0,++Ce}++le,++Oe}return ri.join("")}function it(ke){return Fe(ke,function(Oe){return S.test(Oe)?nt(Oe.slice(4).toLowerCase()):Oe})}function we(ke){return Fe(ke,function(Oe){return M.test(Oe)?"xn--"+Et(Oe):Oe})}if(m={version:"1.3.2",ucs2:{decode:pe,encode:Ie},decode:nt,encode:Et,toASCII:we,toUnicode:it},o&&l)if(i.exports==o)l.exports=m;else for(J in m)m.hasOwnProperty(J)&&(o[J]=m[J]);else t.punycode=m})(Rm)});function xk(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var Ak=function(i,e,t,o){e=e||"&",t=t||"=";var l={};if(typeof i!="string"||i.length===0)return l;var u=/\+/g;i=i.split(e);var m=1e3;o&&typeof o.maxKeys=="number"&&(m=o.maxKeys);var r=i.length;m>0&&r>m&&(r=m);for(var f=0;f<r;++f){var _=i[f].replace(u,"%20"),w=_.indexOf(t),b,x,v,C;w>=0?(b=_.substr(0,w),x=_.substr(w+1)):(b=_,x=""),v=decodeURIComponent(b),C=decodeURIComponent(x),xk(l,v)?Array.isArray(l[v])?l[v].push(C):l[v]=[l[v],C]:l[v]=C}return l},kd=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},kk=function(i,e,t,o){return e=e||"&",t=t||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(l){var u=encodeURIComponent(kd(l))+t;return Array.isArray(i[l])?i[l].map(function(m){return u+encodeURIComponent(kd(m))}).join(e):u+encodeURIComponent(kd(i[l]))}).join(e):o?encodeURIComponent(kd(o))+t+encodeURIComponent(kd(i)):""};P1(function(i,e){e.decode=e.parse=Ak,e.encode=e.stringify=kk});function Vw(i,...e){for(const t of e)for(const o in t)i[o]=t[o];return i}class Sk extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Kc=Sk;class hg{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[o,l]of t)this.bindings[o]=l}concat(e){return new hg(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Ck=hg;const M1={kind:"null"},jn={kind:"number"},ho={kind:"string"},oo={kind:"boolean"},Th={kind:"color"},W0={kind:"object"},so={kind:"value"},Ek={kind:"error"},D1={kind:"collator"},O1={kind:"formatted"},tp={kind:"resolvedImage"};function Ju(i,e){return{kind:"array",itemType:i,N:e}}function Ms(i){if(i.kind==="array"){const e=Ms(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const Ik=[M1,jn,ho,oo,Th,O1,W0,Ju(so),tp];function Wd(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Wd(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const t of Ik)if(!Wd(t,e))return null}}return`Expected ${Ms(i)} but found ${Ms(e)} instead.`}function fg(i,e){return e.some(t=>t.kind===i.kind)}function Xd(i,e){return e.some(t=>t==="null"?i===null:t==="array"?Array.isArray(i):t==="object"?i&&!Array.isArray(i)&&typeof i=="object":t===typeof i)}var Tk=P1(function(i,e){var t={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(_){return _=Math.round(_),_<0?0:_>255?255:_}function l(_){return _<0?0:_>1?1:_}function u(_){return _[_.length-1]==="%"?o(parseFloat(_)/100*255):o(parseInt(_))}function m(_){return _[_.length-1]==="%"?l(parseFloat(_)/100):l(parseFloat(_))}function r(_,w,b){return b<0?b+=1:b>1&&(b-=1),b*6<1?_+(w-_)*b*6:b*2<1?w:b*3<2?_+(w-_)*(2/3-b)*6:_}function f(_){var w=_.replace(/ /g,"").toLowerCase();if(w in t)return t[w].slice();if(w[0]==="#"){if(w.length===4){var b=parseInt(w.substr(1),16);return b>=0&&b<=4095?[(b&3840)>>4|(b&3840)>>8,b&240|(b&240)>>4,b&15|(b&15)<<4,1]:null}else if(w.length===7){var b=parseInt(w.substr(1),16);return b>=0&&b<=16777215?[(b&16711680)>>16,(b&65280)>>8,b&255,1]:null}return null}var x=w.indexOf("("),v=w.indexOf(")");if(x!==-1&&v+1===w.length){var C=w.substr(0,x),T=w.substr(x+1,v-(x+1)).split(","),S=1;switch(C){case"rgba":if(T.length!==4)return null;S=m(T.pop());case"rgb":return T.length!==3?null:[u(T[0]),u(T[1]),u(T[2]),S];case"hsla":if(T.length!==4)return null;S=m(T.pop());case"hsl":if(T.length!==3)return null;var M=(parseFloat(T[0])%360+360)%360/360,O=m(T[1]),V=m(T[2]),G=V<=.5?V*(O+1):V+O-V*O,Z=V*2-G;return[o(r(Z,G,M+1/3)*255),o(r(Z,G,M)*255),o(r(Z,G,M-1/3)*255),S];default:return null}}return null}try{e.parseCSSColor=f}catch{}});class su{constructor(e,t,o,l=1){this.r=e,this.g=t,this.b=o,this.a=l}static parse(e){if(!e)return;if(e instanceof su)return e;if(typeof e!="string")return;const t=Tk.parseCSSColor(e);if(!!t)return new su(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,o,l]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(o)},${l})`}toArray(){const{r:e,g:t,b:o,a:l}=this;return l===0?[0,0,0,0]:[e*255/l,t*255/l,o*255/l,l]}toArray01(){const{r:e,g:t,b:o,a:l}=this;return l===0?[0,0,0,0]:[e/l,t/l,o/l,l]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:o,a:l}=this;return[e,t,o,l]}}su.black=new su(0,0,0,1);su.white=new su(1,1,1,1);su.transparent=new su(0,0,0,0);su.red=new su(1,0,0,1);su.blue=new su(0,0,1,1);var tl=su;class dg{constructor(e,t,o){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class V2{constructor(e,t,o,l,u){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=o,this.fontStack=l,this.textColor=u}}class kc{constructor(e){this.sections=e}static fromString(e){return new kc([new V2(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof kc?e:kc.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const o={};t.fontStack&&(o["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(o["font-scale"]=t.scale),t.textColor&&(o["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(o)}return e}}class Ph{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ph({name:e,available:!1}):null}serialize(){return["image",this.name]}}function qw(i,e,t,o){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof o>"u"||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[i,e,t,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[i,e,t,o]:[i,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function m1(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof tl)return!0;if(i instanceof dg)return!0;if(i instanceof kc)return!0;if(i instanceof Ph)return!0;if(Array.isArray(i)){for(const e of i)if(!m1(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!m1(i[e]))return!1;return!0}else return!1}function Ca(i){if(i===null)return M1;if(typeof i=="string")return ho;if(typeof i=="boolean")return oo;if(typeof i=="number")return jn;if(i instanceof tl)return Th;if(i instanceof dg)return D1;if(i instanceof kc)return O1;if(i instanceof Ph)return tp;if(Array.isArray(i)){const e=i.length;let t;for(const o of i){const l=Ca(o);if(!t)t=l;else{if(t===l)continue;t=so;break}}return Ju(t||so,e)}else return W0}function Dd(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof tl||i instanceof kc||i instanceof Ph?i.toString():JSON.stringify(i)}class pg{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!m1(e[1]))return t.error("invalid value");const o=e[1];let l=Ca(o);const u=t.expectedType;return l.kind==="array"&&l.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(l=u),new pg(l,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof tl?["rgba"].concat(this.value.toArray()):this.value instanceof kc?this.value.serialize():this.value}}var g1=pg;class Lk{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var il=Lk;const Bm={string:ho,number:jn,boolean:oo,object:W0};class mg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let o=1,l;const u=e[0];if(u==="array"){let r;if(e.length>2){const _=e[1];if(typeof _!="string"||!(_ in Bm)||_==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=Bm[_],o++}else r=so;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],o++}l=Ju(r,f)}else l=Bm[u];const m=[];for(;o<e.length;o++){const r=t.parse(e[o],o,so);if(!r)return null;m.push(r)}return new mg(l,m)}evaluate(e){for(let t=0;t<this.args.length;t++){const o=this.args[t].evaluate(e);if(Wd(this.type,Ca(o))){if(t===this.args.length-1)throw new il(`Expected value to be of type ${Ms(this.type)}, but found ${Ms(Ca(o))} instead.`)}else return o}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const o=e.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){t.push(o.kind);const l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(o=>o.serialize()))}}var Ch=mg;class F1{constructor(e){this.type=O1,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return t.error("First argument must be an image or text section.");const l=[];let u=!1;for(let m=1;m<=e.length-1;++m){const r=e[m];if(u&&typeof r=="object"&&!Array.isArray(r)){u=!1;let f=null;if(r["font-scale"]&&(f=t.parse(r["font-scale"],1,jn),!f))return null;let _=null;if(r["text-font"]&&(_=t.parse(r["text-font"],1,Ju(ho)),!_))return null;let w=null;if(r["text-color"]&&(w=t.parse(r["text-color"],1,Th),!w))return null;const b=l[l.length-1];b.scale=f,b.font=_,b.textColor=w}else{const f=t.parse(e[m],1,so);if(!f)return null;const _=f.type.kind;if(_!=="string"&&_!=="value"&&_!=="null"&&_!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,l.push({content:f,scale:null,font:null,textColor:null})}}return new F1(l)}evaluate(e){const t=o=>{const l=o.content.evaluate(e);return Ca(l)===tp?new V2("",l,null,null,null):new V2(Dd(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)};return new kc(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const o={};t.scale&&(o["font-scale"]=t.scale.serialize()),t.font&&(o["text-font"]=t.font.serialize()),t.textColor&&(o["text-color"]=t.textColor.serialize()),e.push(o)}return e}}class R1{constructor(e){this.type=tp,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const o=t.parse(e[1],1,ho);return o?new R1(o):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),o=Ph.fromString(t);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(t)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Pk={"to-boolean":oo,"to-color":Th,"to-number":jn,"to-string":ho};class gg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[0];if((o==="to-boolean"||o==="to-string")&&e.length!==2)return t.error("Expected one argument.");const l=Pk[o],u=[];for(let m=1;m<e.length;m++){const r=t.parse(e[m],m,so);if(!r)return null;u.push(r)}return new gg(l,u)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let t,o;for(const l of this.args){if(t=l.evaluate(e),o=null,t instanceof tl)return t;if(typeof t=="string"){const u=e.parseColor(t);if(u)return u}else if(Array.isArray(t)&&(t.length<3||t.length>4?o=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:o=qw(t[0],t[1],t[2],t[3]),!o))return new tl(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new il(o||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const o of this.args){if(t=o.evaluate(e),t===null)return 0;const l=Number(t);if(!isNaN(l))return l}throw new il(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?kc.fromString(Dd(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ph.fromString(Dd(this.args[0].evaluate(e))):Dd(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new F1([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new R1(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var z0=gg;const Mk=["Unknown","Point","LineString","Polygon"];class Dk{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mk[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:o,y:l}=this.featureTileCoord,u=o*t-e[0],m=l*t-e[1],r=this.featureDistanceData.bearing[0],f=this.featureDistanceData.bearing[1];return r*u+f*m}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=tl.parse(e)),t}}var Hw=Dk;class N0{constructor(e,t,o,l){this.name=e,this.type=t,this._evaluate=o,this.args=l}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const o=e[0],l=N0.definitions[o];if(!l)return t.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(l)?l[0]:l.type,m=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,r=m.filter(([_])=>!Array.isArray(_)||_.length===e.length-1);let f=null;for(const[_,w]of r){f=new Zw(t.registry,t.path,null,t.scope);const b=[];let x=!1;for(let v=1;v<e.length;v++){const C=e[v],T=Array.isArray(_)?_[v-1]:_.type,S=f.parse(C,1+b.length,T);if(!S){x=!0;break}b.push(S)}if(!x){if(Array.isArray(_)&&_.length!==b.length){f.error(`Expected ${_.length} arguments, but found ${b.length} instead.`);continue}for(let v=0;v<b.length;v++){const C=Array.isArray(_)?_[v]:_.type,T=b[v];f.concat(v+1).checkSubtype(C,T.type)}if(f.errors.length===0)return new N0(o,u,w,b)}}if(r.length===1)t.errors.push(...f.errors);else{const w=(r.length?r:m).map(([x])=>Ok(x)).join(" | "),b=[];for(let x=1;x<e.length;x++){const v=t.parse(e[x],1+b.length);if(!v)return null;b.push(Ms(v.type))}t.error(`Expected arguments of type ${w}, but found (${b.join(", ")}) instead.`)}return null}static register(e,t){N0.definitions=t;for(const o in t)e[o]=N0}}function Ok(i){return Array.isArray(i)?`(${i.map(Ms).join(", ")})`:`(${Ms(i.type)}...)`}var id=N0;class B1{constructor(e,t,o){this.type=D1,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return t.error("Collator options argument must be an object.");const l=t.parse(o["case-sensitive"]===void 0?!1:o["case-sensitive"],1,oo);if(!l)return null;const u=t.parse(o["diacritic-sensitive"]===void 0?!1:o["diacritic-sensitive"],1,oo);if(!u)return null;let m=null;return o.locale&&(m=t.parse(o.locale,1,ho),!m)?null:new B1(l,u,m)}evaluate(e){return new dg(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const af=8192;function yg(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function Fk(i){return(180+i)/360}function Rk(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function y1(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function Bk(i,e){const t=Fk(i[0]),o=Rk(i[1]),l=Math.pow(2,e.z);return[Math.round(t*l*af),Math.round(o*l*af)]}function zk(i,e,t){const o=i[0]-e[0],l=i[1]-e[1],u=i[0]-t[0],m=i[1]-t[1];return o*m-u*l===0&&o*u<=0&&l*m<=0}function Nk(i,e,t){return e[1]>i[1]!=t[1]>i[1]&&i[0]<(t[0]-e[0])*(i[1]-e[1])/(t[1]-e[1])+e[0]}function _g(i,e){let t=!1;for(let o=0,l=e.length;o<l;o++){const u=e[o];for(let m=0,r=u.length;m<r-1;m++){if(zk(i,u[m],u[m+1]))return!1;Nk(i,u[m],u[m+1])&&(t=!t)}}return t}function jk(i,e){for(let t=0;t<e.length;t++)if(_g(i,e[t]))return!0;return!1}function Uk(i,e){return i[0]*e[1]-i[1]*e[0]}function T_(i,e,t,o){const l=i[0]-t[0],u=i[1]-t[1],m=e[0]-t[0],r=e[1]-t[1],f=o[0]-t[0],_=o[1]-t[1],w=l*_-f*u,b=m*_-f*r;return w>0&&b<0||w<0&&b>0}function Vk(i,e,t,o){const l=[e[0]-i[0],e[1]-i[1]],u=[o[0]-t[0],o[1]-t[1]];return Uk(u,l)===0?!1:!!(T_(i,e,t,o)&&T_(t,o,i,e))}function qk(i,e,t){for(const o of t)for(let l=0;l<o.length-1;++l)if(Vk(i,e,o[l],o[l+1]))return!0;return!1}function Gw(i,e){for(let t=0;t<i.length;++t)if(!_g(i[t],e))return!1;for(let t=0;t<i.length-1;++t)if(qk(i[t],i[t+1],e))return!1;return!0}function Hk(i,e){for(let t=0;t<e.length;t++)if(Gw(i,e[t]))return!0;return!1}function vg(i,e,t){const o=[];for(let l=0;l<i.length;l++){const u=[];for(let m=0;m<i[l].length;m++){const r=Bk(i[l][m],t);yg(e,r),u.push(r)}o.push(u)}return o}function Ww(i,e,t){const o=[];for(let l=0;l<i.length;l++){const u=vg(i[l],e,t);o.push(u)}return o}function Xw(i,e,t,o){if(i[0]<t[0]||i[0]>t[2]){const l=o*.5;let u=i[0]-t[0]>l?-o:t[0]-i[0]>l?o:0;u===0&&(u=i[0]-t[2]>l?-o:t[2]-i[0]>l?o:0),i[0]+=u}yg(e,i)}function Gk(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function L_(i,e,t,o){const l=Math.pow(2,o.z)*af,u=[o.x*af,o.y*af],m=[];if(!i)return m;for(const r of i)for(const f of r){const _=[f.x+u[0],f.y+u[1]];Xw(_,e,t,l),m.push(_)}return m}function P_(i,e,t,o){const l=Math.pow(2,o.z)*af,u=[o.x*af,o.y*af],m=[];if(!i)return m;for(const r of i){const f=[];for(const _ of r){const w=[_.x+u[0],_.y+u[1]];yg(e,w),f.push(w)}m.push(f)}if(e[2]-e[0]<=l/2){Gk(e);for(const r of m)for(const f of r)Xw(f,e,t,l)}return m}function Wk(i,e){const t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=vg(e.coordinates,o,l),m=L_(i.geometry(),t,o,l);if(!y1(t,o))return!1;for(const r of m)if(!_g(r,u))return!1}if(e.type==="MultiPolygon"){const u=Ww(e.coordinates,o,l),m=L_(i.geometry(),t,o,l);if(!y1(t,o))return!1;for(const r of m)if(!jk(r,u))return!1}return!0}function Xk(i,e){const t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=vg(e.coordinates,o,l),m=P_(i.geometry(),t,o,l);if(!y1(t,o))return!1;for(const r of m)if(!Gw(r,u))return!1}if(e.type==="MultiPolygon"){const u=Ww(e.coordinates,o,l),m=P_(i.geometry(),t,o,l);if(!y1(t,o))return!1;for(const r of m)if(!Hk(r,u))return!1}return!0}class Od{constructor(e,t){this.type=oo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(m1(e[1])){const o=e[1];if(o.type==="FeatureCollection")for(let l=0;l<o.features.length;++l){const u=o.features[l].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Od(o,o.features[l].geometry)}else if(o.type==="Feature"){const l=o.geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new Od(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Od(o,o)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Wk(e,this.geometries);if(e.geometryType()==="LineString")return Xk(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var bg=Od;function wg(i){if(i instanceof id){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof bg)return!1;let e=!0;return i.eachChild(t=>{e&&!wg(t)&&(e=!1)}),e}function xg(i){if(i instanceof id&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(t=>{e&&!xg(t)&&(e=!1)}),e}function Ag(i,e){if(i instanceof id&&e.indexOf(i.name)>=0)return!1;let t=!0;return i.eachChild(o=>{t&&!Ag(o,e)&&(t=!1)}),t}class kg{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const o=e[1];return t.scope.has(o)?new kg(o,t.scope.get(o)):t.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Yw=kg;class Sg{constructor(e,t=[],o,l=new Ck,u=[]){this.registry=e,this.path=t,this.key=t.map(m=>`[${m}]`).join(""),this.scope=l,this.errors=u,this.expectedType=o}parse(e,t,o,l,u={}){return t?this.concat(t,o,l)._parse(e,u):this._parse(e,u)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function o(l,u,m){return m==="assert"?new Ch(u,[l]):m==="coerce"?new z0(u,[l]):l}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=e[0];if(typeof l!="string")return this.error(`Expression name must be a string, but found ${typeof l} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[l];if(u){let m=u.parse(e,this);if(!m)return null;if(this.expectedType){const r=this.expectedType,f=m.type;if((r.kind==="string"||r.kind==="number"||r.kind==="boolean"||r.kind==="object"||r.kind==="array")&&f.kind==="value")m=o(m,r,t.typeAnnotation||"assert");else if((r.kind==="color"||r.kind==="formatted"||r.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))m=o(m,r,t.typeAnnotation||"coerce");else if(this.checkSubtype(r,f))return null}if(!(m instanceof g1)&&m.type.kind!=="resolvedImage"&&q2(m)){const r=new Hw;try{m=new g1(m.type,m.evaluate(r))}catch(f){return this.error(f.message),null}}return m}return this.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,o){const l=typeof e=="number"?this.path.concat(e):this.path,u=o?this.scope.concat(o):this.scope;return new Sg(this.registry,l,t||null,u,this.errors)}error(e,...t){const o=`${this.key}${t.map(l=>`[${l}]`).join("")}`;this.errors.push(new Kc(o,e))}checkSubtype(e,t){const o=Wd(e,t);return o&&this.error(o),o}}var Zw=Sg;function q2(i){if(i instanceof Yw)return q2(i.boundExpression);if(i instanceof id&&i.name==="error")return!1;if(i instanceof B1)return!1;if(i instanceof bg)return!1;const e=i instanceof z0||i instanceof Ch;let t=!0;return i.eachChild(o=>{e?t=t&&q2(o):t=t&&o instanceof g1}),t?wg(i)&&Ag(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function z1(i,e){const t=i.length-1;let o=0,l=t,u=0,m,r;for(;o<=l;)if(u=Math.floor((o+l)/2),m=i[u],r=i[u+1],m<=e){if(u===t||e<r)return u;o=u+1}else if(m>e)l=u-1;else throw new il("Input is not a number.");return 0}class Cg{constructor(e,t,o){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[l,u]of o)this.labels.push(l),this.outputs.push(u)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const o=t.parse(e[1],1,jn);if(!o)return null;const l=[];let u=null;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(let m=1;m<e.length;m+=2){const r=m===1?-1/0:e[m],f=e[m+1],_=m,w=m+1;if(typeof r!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(l.length&&l[l.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);const b=t.parse(f,w,u);if(!b)return null;u=u||b.type,l.push([r,b])}return new Cg(u,o,l)}evaluate(e){const t=this.labels,o=this.outputs;if(t.length===1)return o[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return o[0].evaluate(e);const u=t.length;if(l>=t[u-1])return o[u-1].evaluate(e);const m=z1(t,l);return o[m].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Kw=Cg,Yk=nd;function nd(i,e,t,o){this.cx=3*i,this.bx=3*(t-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=t,this.p2y=o}nd.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};nd.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};nd.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};nd.prototype.solveCurveX=function(i,e){typeof e>"u"&&(e=1e-6);var t,o,l,u,m;for(l=i,m=0;m<8;m++){if(u=this.sampleCurveX(l)-i,Math.abs(u)<e)return l;var r=this.sampleCurveDerivativeX(l);if(Math.abs(r)<1e-6)break;l=l-u/r}if(t=0,o=1,l=i,l<t)return t;if(l>o)return o;for(;t<o;){if(u=this.sampleCurveX(l),Math.abs(u-i)<e)return l;i>u?t=l:o=l,l=(o-t)*.5+t}return l};nd.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};function Lu(i,e,t){return i*(1-t)+e*t}function Zk(i,e,t){return new tl(Lu(i.r,e.r,t),Lu(i.g,e.g,t),Lu(i.b,e.b,t),Lu(i.a,e.a,t))}function Kk(i,e,t){return i.map((o,l)=>Lu(o,e[l],t))}var Jw=Object.freeze({__proto__:null,number:Lu,color:Zk,array:Kk});const Qw=.95047,$w=1,e4=1.08883,t4=4/29,X0=6/29,i4=3*X0*X0,Jk=X0*X0*X0,Qk=Math.PI/180,$k=180/Math.PI;function zm(i){return i>Jk?Math.pow(i,1/3):i/i4+t4}function Nm(i){return i>X0?i*i*i:i4*(i-t4)}function jm(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Um(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function n4(i){const e=Um(i.r),t=Um(i.g),o=Um(i.b),l=zm((.4124564*e+.3575761*t+.1804375*o)/Qw),u=zm((.2126729*e+.7151522*t+.072175*o)/$w),m=zm((.0193339*e+.119192*t+.9503041*o)/e4);return{l:116*u-16,a:500*(l-u),b:200*(u-m),alpha:i.a}}function r4(i){let e=(i.l+16)/116,t=isNaN(i.a)?e:e+i.a/500,o=isNaN(i.b)?e:e-i.b/200;return e=$w*Nm(e),t=Qw*Nm(t),o=e4*Nm(o),new tl(jm(3.2404542*t-1.5371385*e-.4985314*o),jm(-.969266*t+1.8760108*e+.041556*o),jm(.0556434*t-.2040259*e+1.0572252*o),i.alpha)}function eS(i,e,t){return{l:Lu(i.l,e.l,t),a:Lu(i.a,e.a,t),b:Lu(i.b,e.b,t),alpha:Lu(i.alpha,e.alpha,t)}}function tS(i){const{l:e,a:t,b:o}=n4(i),l=Math.atan2(o,t)*$k;return{h:l<0?l+360:l,c:Math.sqrt(t*t+o*o),l:e,alpha:i.a}}function iS(i){const e=i.h*Qk,t=i.c,o=i.l;return r4({l:o,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:i.alpha})}function nS(i,e,t){const o=e-i;return i+t*(o>180||o<-180?o-360*Math.round(o/360):o)}function rS(i,e,t){return{h:nS(i.h,e.h,t),c:Lu(i.c,e.c,t),l:Lu(i.l,e.l,t),alpha:Lu(i.alpha,e.alpha,t)}}const Td={forward:n4,reverse:r4,interpolate:eS},Ld={forward:tS,reverse:iS,interpolate:rS};var o4=Object.freeze({__proto__:null,lab:Td,hcl:Ld});class _1{constructor(e,t,o,l,u){this.type=e,this.operator=t,this.interpolation=o,this.input=l,this.labels=[],this.outputs=[];for(const[m,r]of u)this.labels.push(m),this.outputs.push(r)}static interpolationFactor(e,t,o,l){let u=0;if(e.name==="exponential")u=Vm(t,e.base,o,l);else if(e.name==="linear")u=Vm(t,1,o,l);else if(e.name==="cubic-bezier"){const m=e.controlPoints;u=new Yk(m[0],m[1],m[2],m[3]).solve(Vm(t,1,o,l))}return u}static parse(e,t){let[o,l,u,...m]=e;if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){const _=l[1];if(typeof _!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:_}}else if(l[0]==="cubic-bezier"){const _=l.slice(1);if(_.length!==4||_.some(w=>typeof w!="number"||w<0||w>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:_}}else return t.error(`Unknown interpolation type ${String(l[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(u=t.parse(u,2,jn),!u)return null;const r=[];let f=null;o==="interpolate-hcl"||o==="interpolate-lab"?f=Th:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let _=0;_<m.length;_+=2){const w=m[_],b=m[_+1],x=_+3,v=_+4;if(typeof w!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(r.length&&r[r.length-1][0]>=w)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const C=t.parse(b,v,f);if(!C)return null;f=f||C.type,r.push([w,C])}return f.kind!=="number"&&f.kind!=="color"&&!(f.kind==="array"&&f.itemType.kind==="number"&&typeof f.N=="number")?t.error(`Type ${Ms(f)} is not interpolatable.`):new _1(f,o,l,u,r)}evaluate(e){const t=this.labels,o=this.outputs;if(t.length===1)return o[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return o[0].evaluate(e);const u=t.length;if(l>=t[u-1])return o[u-1].evaluate(e);const m=z1(t,l),r=t[m],f=t[m+1],_=_1.interpolationFactor(this.interpolation,l,r,f),w=o[m].evaluate(e),b=o[m+1].evaluate(e);return this.operator==="interpolate"?Jw[this.type.kind.toLowerCase()](w,b,_):this.operator==="interpolate-hcl"?Ld.reverse(Ld.interpolate(Ld.forward(w),Ld.forward(b),_)):Td.reverse(Td.interpolate(Td.forward(w),Td.forward(b),_))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)t.push(this.labels[o],this.outputs[o].serialize());return t}}function Vm(i,e,t,o){const l=o-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}var Lh=_1;class v1{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let o=null;const l=t.expectedType;l&&l.kind!=="value"&&(o=l);const u=[];for(const r of e.slice(1)){const f=t.parse(r,1+u.length,o,void 0,{typeAnnotation:"omit"});if(!f)return null;o=o||f.type,u.push(f)}return l&&u.some(r=>Wd(l,r.type))?new v1(so,u):new v1(o,u)}evaluate(e){let t=null,o=0,l;for(const u of this.args){if(o++,t=u.evaluate(e),t&&t instanceof Ph&&!t.available&&(l||(l=t),t=null,o===this.args.length))return l;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var s4=v1;class Eg{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let u=1;u<e.length-1;u+=2){const m=e[u];if(typeof m!="string")return t.error(`Expected string, but found ${typeof m} instead.`,u);if(/[^a-zA-Z0-9_]/.test(m))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);const r=t.parse(e[u+1],u+1);if(!r)return null;o.push([m,r])}const l=t.parse(e[e.length-1],e.length-1,t.expectedType,o);return l?new Eg(o,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,o]of this.bindings)e.push(t,o.serialize());return e.push(this.result.serialize()),e}}var a4=Eg;class Ig{constructor(e,t,o){this.type=e,this.index=t,this.input=o}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,jn),l=t.parse(e[2],2,Ju(t.expectedType||so));if(!o||!l)return null;const u=l.type;return new Ig(u.itemType,o,l)}evaluate(e){const t=this.index.evaluate(e),o=this.input.evaluate(e);if(t<0)throw new il(`Array index out of bounds: ${t} < 0.`);if(t>=o.length)throw new il(`Array index out of bounds: ${t} > ${o.length-1}.`);if(t!==Math.floor(t))throw new il(`Array index must be an integer, but found ${t} instead.`);return o[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var oS=Ig;class Tg{constructor(e,t){this.type=oo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,so),l=t.parse(e[2],2,so);return!o||!l?null:fg(o.type,[oo,ho,jn,M1,so])?new Tg(o,l):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ms(o.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(o==null)return!1;if(!Xd(t,["boolean","string","number","null"]))throw new il(`Expected first argument to be of type boolean, string, number or null, but found ${Ms(Ca(t))} instead.`);if(!Xd(o,["string","array"]))throw new il(`Expected second argument to be of type array or string, but found ${Ms(Ca(o))} instead.`);return o.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var sS=Tg;class b1{constructor(e,t,o){this.type=jn,this.needle=e,this.haystack=t,this.fromIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,so),l=t.parse(e[2],2,so);if(!o||!l)return null;if(!fg(o.type,[oo,ho,jn,M1,so]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ms(o.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,jn);return u?new b1(o,l,u):null}else return new b1(o,l)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!Xd(t,["boolean","string","number","null"]))throw new il(`Expected first argument to be of type boolean, string, number or null, but found ${Ms(Ca(t))} instead.`);if(!Xd(o,["string","array"]))throw new il(`Expected second argument to be of type array or string, but found ${Ms(Ca(o))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(e);return o.indexOf(t,l)}return o.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var aS=b1;class Lg{constructor(e,t,o,l,u,m){this.inputType=e,this.type=t,this.input=o,this.cases=l,this.outputs=u,this.otherwise=m}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let o,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);const u={},m=[];for(let _=2;_<e.length-1;_+=2){let w=e[_];const b=e[_+1];Array.isArray(w)||(w=[w]);const x=t.concat(_);if(w.length===0)return x.error("Expected at least one branch label.");for(const C of w){if(typeof C!="number"&&typeof C!="string")return x.error("Branch labels must be numbers or strings.");if(typeof C=="number"&&Math.abs(C)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof C=="number"&&Math.floor(C)!==C)return x.error("Numeric branch labels must be integer values.");if(!o)o=Ca(C);else if(x.checkSubtype(o,Ca(C)))return null;if(typeof u[String(C)]<"u")return x.error("Branch labels must be unique.");u[String(C)]=m.length}const v=t.parse(b,_,l);if(!v)return null;l=l||v.type,m.push(v)}const r=t.parse(e[1],1,so);if(!r)return null;const f=t.parse(e[e.length-1],e.length-1,l);return!f||r.type.kind!=="value"&&t.concat(1).checkSubtype(o,r.type)?null:new Lg(o,l,r,u,m,f)}evaluate(e){const t=this.input.evaluate(e);return(Ca(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),o=[],l={};for(const m of t){const r=l[this.cases[m]];r===void 0?(l[this.cases[m]]=o.length,o.push([this.cases[m],[m]])):o[r][1].push(m)}const u=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,r]of o)r.length===1?e.push(u(r[0])):e.push(r.map(u)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var lS=Lg;class Pg{constructor(e,t,o){this.type=e,this.branches=t,this.otherwise=o}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let o;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);const l=[];for(let m=1;m<e.length-1;m+=2){const r=t.parse(e[m],m,oo);if(!r)return null;const f=t.parse(e[m+1],m+1,o);if(!f)return null;l.push([r,f]),o=o||f.type}const u=t.parse(e[e.length-1],e.length-1,o);return u?new Pg(o,l,u):null}evaluate(e){for(const[t,o]of this.branches)if(t.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,o]of this.branches)e(t),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var uS=Pg;class w1{constructor(e,t,o,l){this.type=e,this.input=t,this.beginIndex=o,this.endIndex=l}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,so),l=t.parse(e[2],2,jn);if(!o||!l)return null;if(!fg(o.type,[Ju(so),ho,so]))return t.error(`Expected first argument to be of type array or string, but found ${Ms(o.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,jn);return u?new w1(o.type,o,l,u):null}else return new w1(o.type,o,l)}evaluate(e){const t=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!Xd(t,["string","array"]))throw new il(`Expected first argument to be of type array or string, but found ${Ms(Ca(t))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(e);return t.slice(o,l)}return t.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var cS=w1;function M_(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function hS(i,e,t){return e===t}function fS(i,e,t){return e!==t}function dS(i,e,t){return e<t}function pS(i,e,t){return e>t}function mS(i,e,t){return e<=t}function gS(i,e,t){return e>=t}function l4(i,e,t,o){return o.compare(e,t)===0}function yS(i,e,t,o){return!l4(i,e,t,o)}function _S(i,e,t,o){return o.compare(e,t)<0}function vS(i,e,t,o){return o.compare(e,t)>0}function bS(i,e,t,o){return o.compare(e,t)<=0}function wS(i,e,t,o){return o.compare(e,t)>=0}function rd(i,e,t){const o=i!=="=="&&i!=="!=";return class u4{constructor(u,m,r){this.type=oo,this.lhs=u,this.rhs=m,this.collator=r,this.hasUntypedArgument=u.type.kind==="value"||m.type.kind==="value"}static parse(u,m){if(u.length!==3&&u.length!==4)return m.error("Expected two or three arguments.");const r=u[0];let f=m.parse(u[1],1,so);if(!f)return null;if(!M_(r,f.type))return m.concat(1).error(`"${r}" comparisons are not supported for type '${Ms(f.type)}'.`);let _=m.parse(u[2],2,so);if(!_)return null;if(!M_(r,_.type))return m.concat(2).error(`"${r}" comparisons are not supported for type '${Ms(_.type)}'.`);if(f.type.kind!==_.type.kind&&f.type.kind!=="value"&&_.type.kind!=="value")return m.error(`Cannot compare types '${Ms(f.type)}' and '${Ms(_.type)}'.`);o&&(f.type.kind==="value"&&_.type.kind!=="value"?f=new Ch(_.type,[f]):f.type.kind!=="value"&&_.type.kind==="value"&&(_=new Ch(f.type,[_])));let w=null;if(u.length===4){if(f.type.kind!=="string"&&_.type.kind!=="string"&&f.type.kind!=="value"&&_.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(w=m.parse(u[3],3,D1),!w)return null}return new u4(f,_,w)}evaluate(u){const m=this.lhs.evaluate(u),r=this.rhs.evaluate(u);if(o&&this.hasUntypedArgument){const f=Ca(m),_=Ca(r);if(f.kind!==_.kind||!(f.kind==="string"||f.kind==="number"))throw new il(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${f.kind}, ${_.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const f=Ca(m),_=Ca(r);if(f.kind!=="string"||_.kind!=="string")return e(u,m,r)}return this.collator?t(u,m,r,this.collator.evaluate(u)):e(u,m,r)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[i];return this.eachChild(m=>{u.push(m.serialize())}),u}}}const xS=rd("==",hS,l4),AS=rd("!=",fS,yS),kS=rd("<",dS,_S),SS=rd(">",pS,vS),CS=rd("<=",mS,bS),ES=rd(">=",gS,wS);class Mg{constructor(e,t,o,l,u,m){this.type=ho,this.number=e,this.locale=t,this.currency=o,this.unit=l,this.minFractionDigits=u,this.maxFractionDigits=m}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const o=t.parse(e[1],1,jn);if(!o)return null;const l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");let u=null;if(l.locale&&(u=t.parse(l.locale,1,ho),!u))return null;let m=null;if(l.currency&&(m=t.parse(l.currency,1,ho),!m))return null;let r=null;if(l.unit&&(r=t.parse(l.unit,1,ho),!r))return null;let f=null;if(l["min-fraction-digits"]&&(f=t.parse(l["min-fraction-digits"],1,jn),!f))return null;let _=null;return l["max-fraction-digits"]&&(_=t.parse(l["max-fraction-digits"],1,jn),!_)?null:new Mg(o,u,m,r,f,_)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Dg{constructor(e){this.type=jn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=t.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Ms(o.type)} instead.`):new Dg(o):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new il(`Expected value to be of type string or array, but found ${Ms(Ca(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var IS=Dg;const c4={"==":xS,"!=":AS,">":SS,"<":kS,">=":ES,"<=":CS,array:Ch,at:oS,boolean:Ch,case:uS,coalesce:s4,collator:B1,format:F1,image:R1,in:sS,"index-of":aS,interpolate:Lh,"interpolate-hcl":Lh,"interpolate-lab":Lh,length:IS,let:a4,literal:g1,match:lS,number:Ch,"number-format":Mg,object:Ch,slice:cS,step:Kw,string:Ch,"to-boolean":z0,"to-color":z0,"to-number":z0,"to-string":z0,var:Yw,within:bg};function D_(i,[e,t,o,l]){e=e.evaluate(i),t=t.evaluate(i),o=o.evaluate(i);const u=l?l.evaluate(i):1,m=qw(e,t,o,u);if(m)throw new il(m);return new tl(e/255*u,t/255*u,o/255*u,u)}function O_(i,e){return i in e}function qm(i,e){const t=e[i];return typeof t>"u"?null:t}function TS(i,e,t,o){for(;t<=o;){const l=t+o>>1;if(e[l]===i)return!0;e[l]>i?o=l-1:t=l+1}return!1}function Mf(i){return{type:i}}id.register(c4,{error:[Ek,[ho],(i,[e])=>{throw new il(e.evaluate(i))}],typeof:[ho,[so],(i,[e])=>Ms(Ca(e.evaluate(i)))],"to-rgba":[Ju(jn,4),[Th],(i,[e])=>e.evaluate(i).toArray()],rgb:[Th,[jn,jn,jn],D_],rgba:[Th,[jn,jn,jn,jn],D_],has:{type:oo,overloads:[[[ho],(i,[e])=>O_(e.evaluate(i),i.properties())],[[ho,W0],(i,[e,t])=>O_(e.evaluate(i),t.evaluate(i))]]},get:{type:so,overloads:[[[ho],(i,[e])=>qm(e.evaluate(i),i.properties())],[[ho,W0],(i,[e,t])=>qm(e.evaluate(i),t.evaluate(i))]]},"feature-state":[so,[ho],(i,[e])=>qm(e.evaluate(i),i.featureState||{})],properties:[W0,[],i=>i.properties()],"geometry-type":[ho,[],i=>i.geometryType()],id:[so,[],i=>i.id()],zoom:[jn,[],i=>i.globals.zoom],pitch:[jn,[],i=>i.globals.pitch||0],"distance-from-center":[jn,[],i=>i.distanceFromCenter()],"heatmap-density":[jn,[],i=>i.globals.heatmapDensity||0],"line-progress":[jn,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[jn,[],i=>i.globals.skyRadialProgress||0],accumulated:[so,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[jn,Mf(jn),(i,e)=>{let t=0;for(const o of e)t+=o.evaluate(i);return t}],"*":[jn,Mf(jn),(i,e)=>{let t=1;for(const o of e)t*=o.evaluate(i);return t}],"-":{type:jn,overloads:[[[jn,jn],(i,[e,t])=>e.evaluate(i)-t.evaluate(i)],[[jn],(i,[e])=>-e.evaluate(i)]]},"/":[jn,[jn,jn],(i,[e,t])=>e.evaluate(i)/t.evaluate(i)],"%":[jn,[jn,jn],(i,[e,t])=>e.evaluate(i)%t.evaluate(i)],ln2:[jn,[],()=>Math.LN2],pi:[jn,[],()=>Math.PI],e:[jn,[],()=>Math.E],"^":[jn,[jn,jn],(i,[e,t])=>Math.pow(e.evaluate(i),t.evaluate(i))],sqrt:[jn,[jn],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[jn,[jn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[jn,[jn],(i,[e])=>Math.log(e.evaluate(i))],log2:[jn,[jn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[jn,[jn],(i,[e])=>Math.sin(e.evaluate(i))],cos:[jn,[jn],(i,[e])=>Math.cos(e.evaluate(i))],tan:[jn,[jn],(i,[e])=>Math.tan(e.evaluate(i))],asin:[jn,[jn],(i,[e])=>Math.asin(e.evaluate(i))],acos:[jn,[jn],(i,[e])=>Math.acos(e.evaluate(i))],atan:[jn,[jn],(i,[e])=>Math.atan(e.evaluate(i))],min:[jn,Mf(jn),(i,e)=>Math.min(...e.map(t=>t.evaluate(i)))],max:[jn,Mf(jn),(i,e)=>Math.max(...e.map(t=>t.evaluate(i)))],abs:[jn,[jn],(i,[e])=>Math.abs(e.evaluate(i))],round:[jn,[jn],(i,[e])=>{const t=e.evaluate(i);return t<0?-Math.round(-t):Math.round(t)}],floor:[jn,[jn],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[jn,[jn],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[oo,[ho,so],(i,[e,t])=>i.properties()[e.value]===t.value],"filter-id-==":[oo,[so],(i,[e])=>i.id()===e.value],"filter-type-==":[oo,[ho],(i,[e])=>i.geometryType()===e.value],"filter-<":[oo,[ho,so],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o<l}],"filter-id-<":[oo,[so],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t<o}],"filter->":[oo,[ho,so],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o>l}],"filter-id->":[oo,[so],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t>o}],"filter-<=":[oo,[ho,so],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o<=l}],"filter-id-<=":[oo,[so],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t<=o}],"filter->=":[oo,[ho,so],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o>=l}],"filter-id->=":[oo,[so],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t>=o}],"filter-has":[oo,[so],(i,[e])=>e.value in i.properties()],"filter-has-id":[oo,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[oo,[Ju(ho)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[oo,[Ju(so)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[oo,[ho,Ju(so)],(i,[e,t])=>t.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[oo,[ho,Ju(so)],(i,[e,t])=>TS(i.properties()[e.value],t.value,0,t.value.length-1)],all:{type:oo,overloads:[[[oo,oo],(i,[e,t])=>e.evaluate(i)&&t.evaluate(i)],[Mf(oo),(i,e)=>{for(const t of e)if(!t.evaluate(i))return!1;return!0}]]},any:{type:oo,overloads:[[[oo,oo],(i,[e,t])=>e.evaluate(i)||t.evaluate(i)],[Mf(oo),(i,e)=>{for(const t of e)if(t.evaluate(i))return!0;return!1}]]},"!":[oo,[oo],(i,[e])=>!e.evaluate(i)],"is-supported-script":[oo,[ho],(i,[e])=>{const t=i.globals&&i.globals.isSupportedScript;return t?t(e.evaluate(i)):!0}],upcase:[ho,[ho],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[ho,[ho],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[ho,Mf(so),(i,e)=>e.map(t=>Dd(t.evaluate(i))).join("")],"resolved-locale":[ho,[D1],(i,[e])=>e.evaluate(i).resolvedLocale()]});var h4=c4;function H2(i){return{result:"success",value:i}}function F0(i){return{result:"error",value:i}}function LS(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function PS(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function f4(i){return!!i.expression&&i.expression.interpolated}function Og(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Fg(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function MS(i){return i}function Rg(i,e){const t=e.type==="color",o=i.stops&&typeof i.stops[0][0]=="object",l=o||i.property!==void 0,u=o||!l,m=i.type||(f4(e)?"exponential":"interval");if(t&&(i=Vw({},i),i.stops&&(i.stops=i.stops.map(w=>[w[0],tl.parse(w[1])])),i.default?i.default=tl.parse(i.default):i.default=tl.parse(e.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!o4[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let r,f,_;if(m==="exponential")r=F_;else if(m==="interval")r=OS;else if(m==="categorical"){r=DS,f=Object.create(null);for(const w of i.stops)f[w[0]]=w[1];_=typeof i.stops[0][0]}else if(m==="identity")r=FS;else throw new Error(`Unknown function type "${m}"`);if(o){const w={},b=[];for(let C=0;C<i.stops.length;C++){const T=i.stops[C],S=T[0].zoom;w[S]===void 0&&(w[S]={zoom:S,type:i.type,property:i.property,default:i.default,stops:[]},b.push(S)),w[S].stops.push([T[0].value,T[1]])}const x=[];for(const C of b)x.push([w[C].zoom,Rg(w[C],e)]);const v={name:"linear"};return{kind:"composite",interpolationType:v,interpolationFactor:Lh.interpolationFactor.bind(void 0,v),zoomStops:x.map(C=>C[0]),evaluate({zoom:C},T){return F_({stops:x,base:i.base},e,C).evaluate(C,T)}}}else if(u){const w=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:Lh.interpolationFactor.bind(void 0,w),zoomStops:i.stops.map(b=>b[0]),evaluate:({zoom:b})=>r(i,e,b,f,_)}}else return{kind:"source",evaluate(w,b){const x=b&&b.properties?b.properties[i.property]:void 0;return x===void 0?ip(i.default,e.default):r(i,e,x,f,_)}}}function ip(i,e,t){if(i!==void 0)return i;if(e!==void 0)return e;if(t!==void 0)return t}function DS(i,e,t,o,l){const u=typeof t===l?o[t]:void 0;return ip(u,i.default,e.default)}function OS(i,e,t){if(Og(t)!=="number")return ip(i.default,e.default);const o=i.stops.length;if(o===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[o-1][0])return i.stops[o-1][1];const l=z1(i.stops.map(u=>u[0]),t);return i.stops[l][1]}function F_(i,e,t){const o=i.base!==void 0?i.base:1;if(Og(t)!=="number")return ip(i.default,e.default);const l=i.stops.length;if(l===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[l-1][0])return i.stops[l-1][1];const u=z1(i.stops.map(w=>w[0]),t),m=RS(t,o,i.stops[u][0],i.stops[u+1][0]),r=i.stops[u][1],f=i.stops[u+1][1];let _=Jw[e.type]||MS;if(i.colorSpace&&i.colorSpace!=="rgb"){const w=o4[i.colorSpace];_=(b,x)=>w.reverse(w.interpolate(w.forward(b),w.forward(x),m))}return typeof r.evaluate=="function"?{evaluate(...w){const b=r.evaluate.apply(void 0,w),x=f.evaluate.apply(void 0,w);if(!(b===void 0||x===void 0))return _(b,x,m)}}:_(r,f,m)}function FS(i,e,t){return e.type==="color"?t=tl.parse(t):e.type==="formatted"?t=kc.fromString(t.toString()):e.type==="resolvedImage"?t=Ph.fromString(t.toString()):Og(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0),ip(t,i.default,e.default)}function RS(i,e,t,o){const l=o-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}class d4{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Hw,this._defaultValue=t?NS(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,o,l,u,m,r,f){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=o,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=f||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,o,l,u,m,r,f){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=o||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=f||null;try{const _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!==_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new il(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(_)} instead.`);return _}catch(_){return this._warningHistory[_.message]||(this._warningHistory[_.message]=!0,typeof console<"u"&&console.warn(_.message)),this._defaultValue}}}function p4(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in h4}function m4(i,e){const t=new Zw(h4,[],e?zS(e):void 0),o=t.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?H2(new d4(o,e)):F0(t.errors)}class G2{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!xg(t.expression)}evaluateWithoutErrorHandling(e,t,o,l,u,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,l,u,m)}evaluate(e,t,o,l,u,m){return this._styleExpression.evaluate(e,t,o,l,u,m)}}class W2{constructor(e,t,o,l){this.kind=e,this.zoomStops=o,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!xg(t.expression),this.interpolationType=l}evaluateWithoutErrorHandling(e,t,o,l,u,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,l,u,m)}evaluate(e,t,o,l,u,m){return this._styleExpression.evaluate(e,t,o,l,u,m)}interpolationFactor(e,t,o){return this.interpolationType?Lh.interpolationFactor(this.interpolationType,e,t,o):0}}function g4(i,e){if(i=m4(i,e),i.result==="error")return i;const t=i.value.expression,o=wg(t);if(!o&&!LS(e))return F0([new Kc("","data expressions not supported")]);const l=Ag(t,["zoom","pitch","distance-from-center"]);if(!l&&!PS(e))return F0([new Kc("","zoom expressions not supported")]);const u=n1(t);if(!u&&!l)return F0([new Kc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof Kc)return F0([u]);if(u instanceof Lh&&!f4(e))return F0([new Kc("",'"interpolate" expressions cannot be used with this property')]);if(!u)return H2(o?new G2("constant",i.value):new G2("source",i.value));const m=u instanceof Lh?u.interpolation:void 0;return H2(o?new W2("camera",i.value,u.labels,m):new W2("composite",i.value,u.labels,m))}class N1{constructor(e,t){this._parameters=e,this._specification=t,Vw(this,Rg(this._parameters,this._specification))}static deserialize(e){return new N1(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function BS(i,e){if(Fg(i))return new N1(i,e);if(p4(i)){const t=g4(i,e);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return t.value}else{let t=i;return typeof i=="string"&&e.type==="color"&&(t=tl.parse(i)),{kind:"constant",evaluate:()=>t}}}function n1(i){let e=null;if(i instanceof a4)e=n1(i.result);else if(i instanceof s4){for(const t of i.args)if(e=n1(t),e)break}else(i instanceof Kw||i instanceof Lh)&&i.input instanceof id&&i.input.name==="zoom"&&(e=i);return e instanceof Kc||i.eachChild(t=>{const o=n1(t);o instanceof Kc?e=o:!e&&o?e=new Kc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new Kc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function zS(i){const e={color:Th,string:ho,number:jn,enum:ho,boolean:oo,formatted:O1,resolvedImage:tp};return i.type==="array"?Ju(e[i.value]||so,i.length):e[i.type]}function NS(i){return i.type==="color"&&(Fg(i.default)||Array.isArray(i.default))?new tl(0,0,0,0):i.type==="color"?tl.parse(i.default)||null:i.default===void 0?null:i.default}function Yd(i){return typeof i=="object"?["literal",i]:i}function jS(i,e){let t=i.stops;if(!t)return US(i,e);const o=t&&typeof t[0][0]=="object",l=o||i.property!==void 0,u=o||!l;return t=t.map(m=>!l&&e.tokens&&typeof m[1]=="string"?[m[0],GS(m[1])]:[m[0],Yd(m[1])]),o?VS(i,e,t):u?HS(i,e,t):X2(i,e,t)}function US(i,e){const t=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,i.default];{const o=[e.type==="color"?"to-color":e.type,t,Yd(i.default)];return e.type==="array"&&o.splice(1,0,e.value,e.length||null),o}}function Bg(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function VS(i,e,t){const o={},l={},u=[];for(let r=0;r<t.length;r++){const f=t[r],_=f[0].zoom;o[_]===void 0&&(o[_]={zoom:_,type:i.type,property:i.property,default:i.default},l[_]=[],u.push(_)),l[_].push([f[0].value,f[1]])}if(Ng({},e)==="exponential"){const r=[Bg(i),["linear"],["zoom"]];for(const f of u){const _=X2(o[f],e,l[f]);Y0(r,f,_,!1)}return r}else{const r=["step",["zoom"]];for(const f of u){const _=X2(o[f],e,l[f]);Y0(r,f,_,!0)}return zg(r),r}}function qS(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function R_(i,e){const t=Yd(qS(i.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function X2(i,e,t){const o=Ng(i,e),l=["get",i.property];if(o==="categorical"&&typeof t[0][0]=="boolean"){const u=["case"];for(const m of t)u.push(["==",l,m[0]],m[1]);return u.push(R_(i,e)),u}else if(o==="categorical"){const u=["match",l];for(const m of t)Y0(u,m[0],m[1],!1);return u.push(R_(i,e)),u}else if(o==="interval"){const u=["step",["number",l]];for(const m of t)Y0(u,m[0],m[1],!0);return zg(u),i.default===void 0?u:["case",["==",["typeof",l],"number"],u,Yd(i.default)]}else if(o==="exponential"){const u=i.base!==void 0?i.base:1,m=[Bg(i),u===1?["linear"]:["exponential",u],["number",l]];for(const r of t)Y0(m,r[0],r[1],!1);return i.default===void 0?m:["case",["==",["typeof",l],"number"],m,Yd(i.default)]}else throw new Error(`Unknown property function type ${o}`)}function HS(i,e,t,o=["zoom"]){const l=Ng(i,e);let u,m=!1;if(l==="interval")u=["step",o],m=!0;else if(l==="exponential"){const r=i.base!==void 0?i.base:1;u=[Bg(i),r===1?["linear"]:["exponential",r],o]}else throw new Error(`Unknown zoom function type "${l}"`);for(const r of t)Y0(u,r[0],r[1],m);return zg(u),u}function zg(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function Y0(i,e,t,o){i.length>3&&e===i[i.length-2]||(o&&i.length===2||i.push(e),i.push(t))}function Ng(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function GS(i){const e=["concat"],t=/{([^{}]+)}/g;let o=0;for(let l=t.exec(i);l!==null;l=t.exec(i)){const u=i.slice(o,t.lastIndex-l[0].length);o=t.lastIndex,u.length>0&&e.push(u),e.push(["get",l[1]])}if(e.length===1)return i;if(o<i.length)e.push(i.slice(o));else if(e.length===2)return["to-string",e[1]];return e}function y4(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!y4(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}P1(function(i,e){var t=function(){var o=function(M,O,V,G){for(V=V||{},G=M.length;G--;V[M[G]]=O);return V},l=[1,12],u=[1,13],m=[1,9],r=[1,10],f=[1,11],_=[1,14],w=[1,15],b=[14,18,22,24],x=[18,22],v=[22,24],C={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(O,V,G,Z,te,J,oe){var Me=J.length-1;switch(te){case 1:this.$=new String(O.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(O),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=J[Me-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=J[Me-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[J[Me-2],J[Me]];break;case 16:this.$={},this.$[J[Me][0]]=J[Me][1];break;case 17:this.$=J[Me-2],J[Me-2][J[Me][0]]=J[Me][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[J[Me]];break;case 21:this.$=J[Me-2],J[Me-2].push(J[Me]);break}},table:[{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,12:1,13:2,15:7,16:8,17:_,23:w},{1:[3]},{14:[1,16]},o(b,[2,7]),o(b,[2,8]),o(b,[2,9]),o(b,[2,10]),o(b,[2,11]),o(b,[2,12]),o(b,[2,3]),o(b,[2,4]),o(b,[2,5]),o([14,18,21,22,24],[2,1]),o(b,[2,2]),{3:20,4:l,18:[1,17],19:18,20:19},{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,13:23,15:7,16:8,17:_,23:w,24:[1,21],25:22},{1:[2,6]},o(b,[2,13]),{18:[1,24],22:[1,25]},o(x,[2,16]),{21:[1,26]},o(b,[2,18]),{22:[1,28],24:[1,27]},o(v,[2,20]),o(b,[2,14]),{3:20,4:l,20:29},{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,13:30,15:7,16:8,17:_,23:w},o(b,[2,19]),{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,13:31,15:7,16:8,17:_,23:w},o(x,[2,17]),o(x,[2,15]),o(v,[2,21])],defaultActions:{16:[2,6]},parseError:function(O,V){if(V.recoverable)this.trace(O);else throw new Error(O)},parse:function(O){var V=this,G=[0],Z=[null],te=[],J=this.table,oe="",Me=0,Fe=0,pe=2,Ie=1,Se=te.slice.call(arguments,1),me=Object.create(this.lexer),et={yy:{}};for(var nt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,nt)&&(et.yy[nt]=this.yy[nt]);me.setInput(O,et.yy),et.yy.lexer=me,et.yy.parser=this,typeof me.yylloc>"u"&&(me.yylloc={});var Et=me.yylloc;te.push(Et);var it=me.options&&me.options.ranges;typeof et.yy.parseError=="function"?this.parseError=et.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function we(){var gt;return gt=me.lex()||Ie,typeof gt!="number"&&(gt=V.symbols_[gt]||gt),gt}for(var ke,Oe,le,Ce,he={},ge,Be,We,st;;){if(Oe=G[G.length-1],this.defaultActions[Oe]?le=this.defaultActions[Oe]:((ke===null||typeof ke>"u")&&(ke=we()),le=J[Oe]&&J[Oe][ke]),typeof le>"u"||!le.length||!le[0]){var Xe="";st=[];for(ge in J[Oe])this.terminals_[ge]&&ge>pe&&st.push("'"+this.terminals_[ge]+"'");me.showPosition?Xe="Parse error on line "+(Me+1)+`:
`+me.showPosition()+`
Expecting `+st.join(", ")+", got '"+(this.terminals_[ke]||ke)+"'":Xe="Parse error on line "+(Me+1)+": Unexpected "+(ke==Ie?"end of input":"'"+(this.terminals_[ke]||ke)+"'"),this.parseError(Xe,{text:me.match,token:this.terminals_[ke]||ke,line:me.yylineno,loc:Et,expected:st})}if(le[0]instanceof Array&&le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Oe+", token: "+ke);switch(le[0]){case 1:G.push(ke),Z.push(me.yytext),te.push(me.yylloc),G.push(le[1]),ke=null,Fe=me.yyleng,oe=me.yytext,Me=me.yylineno,Et=me.yylloc;break;case 2:if(Be=this.productions_[le[1]][1],he.$=Z[Z.length-Be],he._$={first_line:te[te.length-(Be||1)].first_line,last_line:te[te.length-1].last_line,first_column:te[te.length-(Be||1)].first_column,last_column:te[te.length-1].last_column},it&&(he._$.range=[te[te.length-(Be||1)].range[0],te[te.length-1].range[1]]),Ce=this.performAction.apply(he,[oe,Fe,Me,et.yy,le[1],Z,te].concat(Se)),typeof Ce<"u")return Ce;Be&&(G=G.slice(0,-1*Be*2),Z=Z.slice(0,-1*Be),te=te.slice(0,-1*Be)),G.push(this.productions_[le[1]][0]),Z.push(he.$),te.push(he._$),We=J[G[G.length-2]][G[G.length-1]],G.push(We);break;case 3:return!0}}return!0}},T=function(){var M={EOF:1,parseError:function(V,G){if(this.yy.parser)this.yy.parser.parseError(V,G);else throw new Error(V)},setInput:function(O,V){return this.yy=V||this.yy||{},this._input=O,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var V=O.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),O},unput:function(O){var V=O.length,G=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var Z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),G.length-1&&(this.yylineno-=G.length-1);var te=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===Z.length?this.yylloc.first_column:0)+Z[Z.length-G.length].length-G[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[te[0],te[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(O){this.unput(this.match.slice(O))},pastInput:function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var O=this.match;return O.length<20&&(O+=this._input.substr(0,20-O.length)),(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var O=this.pastInput(),V=new Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+V+"^"},test_match:function(O,V){var G,Z,te;if(this.options.backtrack_lexer&&(te={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(te.yylloc.range=this.yylloc.range.slice(0))),Z=O[0].match(/(?:\r\n?|\n).*/g),Z&&(this.yylineno+=Z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Z?Z[Z.length-1].length-Z[Z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+O[0].length},this.yytext+=O[0],this.match+=O[0],this.matches=O,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(O[0].length),this.matched+=O[0],G=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),G)return G;if(this._backtrack){for(var J in te)this[J]=te[J];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var O,V,G,Z;this._more||(this.yytext="",this.match="");for(var te=this._currentRules(),J=0;J<te.length;J++)if(G=this._input.match(this.rules[te[J]]),G&&(!V||G[0].length>V[0].length)){if(V=G,Z=J,this.options.backtrack_lexer){if(O=this.test_match(G,te[J]),O!==!1)return O;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(O=this.test_match(V,te[Z]),O!==!1?O:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(V,G,Z,te){switch(Z){case 0:break;case 1:return 6;case 2:return G.yytext=G.yytext.substr(1,G.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return M}();C.lexer=T;function S(){this.yy={}}return S.prototype=C,C.Parser=S,new S}();typeof wk<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})});const WS={StyleExpression:d4,isExpression:p4,isExpressionFilter:y4,createExpression:m4,createPropertyExpression:g4,normalizePropertyExpression:BS,ZoomConstantExpression:G2,ZoomDependentExpression:W2,StylePropertyFunction:N1},XS={convertFunction:jS,createFunction:Rg,isFunction:Fg};function YS(i){var e=i.expr,t=i.layer,o=Math.min(e(t,"paint","circle-radius"),8),l=Math.min(e(t,"paint","circle-stroke-width"),4),u=e(t,"paint","circle-color"),m=e(t,"paint","circle-opacity"),r=e(t,"paint","circle-stroke-color"),f=e(t,"paint","circle-stroke-opacity"),_=o-l/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(t,"paint","circle-blur")*_+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:m,r:_}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:f,r:o,"stroke-width":l,stroke:r}}]}}function ZS(i){var e=i.expr,t=i.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,i.image)(e(t,"paint","fill-pattern"))+")",backgroundColor:e(t,"paint","fill-color"),opacity:e(t,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function KS(i){var e=i.layer,t=i.expr,o=(0,i.image)(t(e,"paint","line-pattern")),l={stroke:o?"url(#img1)":t(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(t(e,"paint","line-width"),8)),strokeOpacity:t(e,"paint","line-opacity")},u=l.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:l.strokeWidth,height:l.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:o,x:0,y:0,width:l.strokeWidth,height:l.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:l,stroke:l.stroke,d:"M0 20 L 20 0"}}]}}function JS(i){return function(r){var f=r.image,_=(0,r.expr)(r.layer,"layout","icon-image");if(!_)return null;var w=f(_);return w?{element:"div",attributes:{style:{backgroundImage:"url("+w+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(i)||(l=(t=(e=i).expr)(o=e.layer,"paint","text-color"),u=t(o,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:m="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:t(o,"paint","text-halo-color"),"stroke-width":2*t(o,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:m,fill:"white"}},{element:"path",attributes:{key:"l3",d:m,fill:l,opacity:u}}]});var e,t,o,l,u,m}var QS=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function $S(i){var e,t=i.sprite,o=i.layer,l={circle:YS,symbol:JS,line:KS,fill:ZS}[o.type],u=(e=i.zoom,function(m,r,f){var _=function(C){var T=QS.find(function(S){return C.startsWith(S[0])});return T?T[1]||T[0]:null}(f),w=bk[r+"_"+_][f];if(!m[r])return w.default;var b=m[r][f];if(b===void 0)return w.default;if(typeof b=="object"){var x;if(!(x=Array.isArray(b)?WS.createExpression(b).value:XS.createFunction(b,w)).evaluate)return null;var v=x.evaluate({zoom:e},{});return v?v.name||v:null}return b});return l?l({layer:o,expr:u,image:function(m){if(t&&t.json){var r=t.json[m];if(r)return f=t.image,w=(_=r).x,b=_.y,x=_.width,v=_.height,(C=document.createElement("canvas")).width=2*x,C.height=2*v,C.getContext("2d").drawImage(f,2*w,2*b,2*x,2*v,0,0,2*x,2*v),C.toDataURL()}var f,_,w,b,x,v,C;return null}}):null}function eC(i){let e,t=i[0].innerHTML+"";return{c(){e=zt("div"),this.h()},l(o){e=Nt(o,"DIV",{class:!0});var l=Gt(e);l.forEach(Le),this.h()},h(){Ht(e,"class","legend svelte-1dizgfa")},m(o,l){qt(o,e,l),e.innerHTML=t},p(o,[l]){l&1&&t!==(t=o[0].innerHTML+"")&&(e.innerHTML=t)},i:eo,o:eo,d(o){o&&Le(e)}}}function tC(i,e,t){let{map:o}=e,{layer:l}=e,{spriteLoader:u}=e,m=document.createElement("div");const r=async()=>{const f=o.getZoom(),_=$S({zoom:f,layer:l});if(t(0,m.innerText="",m),_){let b,x,v;switch(_.element){case"div":if(_.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(_.attributes.style.backgroundImage)){var w=document.createElement("img");w.src=_.attributes.style.backgroundImage.replace("url(","").replace(")",""),w.alt=l.id,w.style.cssText="height: 24px;",m.appendChild(w)}b=document.createElement("div"),b.style.height="24px",b.style.width="50px",b.style.backgroundColor=_.attributes.style.backgroundColor,b.style.backgroundPosition=_.attributes.style.backgroundPosition,b.style.backgroundSize=_.attributes.style.backgroundSize,b.style.backgroundRepeat=_.attributes.style.backgroundRepeat,b.style.opacity=_.attributes.style.opacity,m.appendChild(b);break;case"svg":if(u&&(v=u.getIconDataUrl(l),v)){const C=document.createElement("img");C.src=v,C.alt=l.id,C.style.cssText="height: 24px;",m.appendChild(C);break}x=document.createElementNS("http://www.w3.org/2000/svg","svg"),x.style.cssText="height: 24px;",x.setAttributeNS(null,"version","1.1"),Object.keys(_.attributes).forEach(C=>{x.setAttribute(C,_.attributes[C]);let T=document.createElementNS("http://www.w3.org/2000/svg","g");_.children.forEach(S=>{var M=document.createElementNS("http://www.w3.org/2000/svg",S.element);Object.keys(S.attributes).forEach(O=>{M.setAttributeNS(null,O,S.attributes[O])}),T.appendChild(M)}),x.appendChild(T)}),m.appendChild(x);break;default:console.log(_.element);return}}else{const b=document.createElementNS("http://www.w3.org/2000/svg","svg"),x=document.createElementNS("http://www.w3.org/2000/svg","path"),v=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("fill","none"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("stroke","black"),b.classList.add("post-icon"),x.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),x.setAttribute("stroke-linecap","round"),x.setAttribute("stroke-linejoin","round"),x.setAttribute("stroke-width","2"),v.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-width","2"),b.appendChild(x),b.appendChild(v),m.appendChild(b)}};return o.on("moveend",r),o.on("zoom",r),i.$$set=f=>{"map"in f&&t(1,o=f.map),"layer"in f&&t(2,l=f.layer),"spriteLoader"in f&&t(3,u=f.spriteLoader)},i.$$.update=()=>{i.$$.dirty&4&&r()},[m,o,l,u]}class iC extends vr{constructor(e){super(),br(this,e,tC,eC,mr,{map:1,layer:2,spriteLoader:3})}}function nC(i){let e;return{c(){e=zt("i"),this.h()},l(t){e=Nt(t,"I",{class:!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","fas fa-eye-slash svelte-1p0eu1v")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function rC(i){let e;return{c(){e=zt("i"),this.h()},l(t){e=Nt(t,"I",{class:!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","fas fa-eye svelte-1p0eu1v")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function oC(i){let e,t,o,l,u,m,r,f,_,w=(i[3]&&i[3][i[1].id]?i[3][i[1].id]:i[1].id)+"",b,x,v,C;function T(O,V){return O[4]?rC:nC}let S=T(i),M=S(i);return r=new iC({props:{map:i[0],layer:i[1],spriteLoader:i[2]}}),{c(){e=zt("div"),t=zt("div"),o=zt("button"),l=zt("span"),M.c(),u=Yi(),m=zt("div"),ln(r.$$.fragment),f=Yi(),_=zt("div"),b=Xn(w),this.h()},l(O){e=Nt(O,"DIV",{class:!0});var V=Gt(e);t=Nt(V,"DIV",{class:!0});var G=Gt(t);o=Nt(G,"BUTTON",{class:!0});var Z=Gt(o);l=Nt(Z,"SPAN",{class:!0});var te=Gt(l);M.l(te),te.forEach(Le),Z.forEach(Le),G.forEach(Le),u=Zi(V),m=Nt(V,"DIV",{class:!0});var J=Gt(m);pn(r.$$.fragment,J),J.forEach(Le),f=Zi(V),_=Nt(V,"DIV",{class:!0});var oe=Gt(_);b=Yn(oe,w),oe.forEach(Le),V.forEach(Le),this.h()},h(){Ht(l,"class","icon is-small"),Ht(o,"class","button is-text is-narrow"),Ht(t,"class","column .is-marginless is-paddingless"),Ht(m,"class","column is-narrow .is-marginless is-paddingless"),Ht(_,"class","column is-narrow .is-marginless pl-2 has-text-left"),Ht(e,"class","columns is-vcentered is-mobile")},m(O,V){qt(O,e,V),Dt(e,t),Dt(t,o),Dt(o,l),M.m(l,null),Dt(e,u),Dt(e,m),un(r,m,null),Dt(e,f),Dt(e,_),Dt(_,b),x=!0,v||(C=En(o,"click",i[5]),v=!0)},p(O,[V]){S!==(S=T(O))&&(M.d(1),M=S(O),M&&(M.c(),M.m(l,null)));const G={};V&1&&(G.map=O[0]),V&2&&(G.layer=O[1]),V&4&&(G.spriteLoader=O[2]),r.$set(G),(!x||V&10)&&w!==(w=(O[3]&&O[3][O[1].id]?O[3][O[1].id]:O[1].id)+"")&&Jo(b,w)},i(O){x||(xt(r.$$.fragment,O),x=!0)},o(O){Ft(r.$$.fragment,O),x=!1},d(O){O&&Le(e),M.d(),cn(r),v=!1,C()}}}function sC(i,e,t){const o=ep();let{map:l}=e,{layer:u}=e,{spriteLoader:m}=e,{relativeLayers:r={}}=e,_=l.getLayer(u.id).visibility!=="none";const w=()=>{const x=_===!0?"visible":"none";l.setLayoutProperty(u.id,"visibility",x),o("visibilityChanged",{layer:u,visibility:x})},b=()=>t(4,_=!_);return i.$$set=x=>{"map"in x&&t(0,l=x.map),"layer"in x&&t(1,u=x.layer),"spriteLoader"in x&&t(2,m=x.spriteLoader),"relativeLayers"in x&&t(3,r=x.relativeLayers)},i.$$.update=()=>{i.$$.dirty&16&&w()},[l,u,m,r,_,b]}class j1 extends vr{constructor(e){super(),br(this,e,sC,oC,mr,{map:0,layer:1,spriteLoader:2,relativeLayers:3})}}class aC{constructor(e){ml(this,"spriteUrl");ml(this,"sprite");this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let t=!1;const o=new Promise((l,u)=>{const m=new Image;m.crossOrigin="Anonymous",m.onload=()=>{t||l(m)},m.onerror=r=>{t||u(r)},m.src=e});return o.cancel=()=>{t=!0},o}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){var o;let t;if(e.layout&&e.layout["icon-image"]){let l=e.layout["icon-image"];if(Array.isArray(l)&&(l=l[l.length-1]),(o=this.sprite)!=null&&o.json){let u;Object.keys(this.sprite.json).forEach(m=>{m===l&&(u=this.sprite.json[m])}),u&&(t=this.extractPartOfImage(this.sprite.image,u))}}return t}extractPartOfImage(e,t){const l=document.createElement("canvas");return l.width=t.width*1,l.height=t.height*1,l.getContext("2d").drawImage(e,t.x*1,t.y*1,t.width*1,t.height*1,0,0,t.width*1,t.height*1),l.toDataURL()}}const B_=Cc({});function z_(i,e,t){const o=i.slice();return o[14]=e[t],o}function N_(i){let e,t,o,l,u,m,r;return{c(){e=zt("li"),t=zt("a"),o=zt("span"),l=Xn("Show related"),this.h()},l(f){e=Nt(f,"LI",{class:!0});var _=Gt(e);t=Nt(_,"A",{});var w=Gt(t);o=Nt(w,"SPAN",{});var b=Gt(o);l=Yn(b,"Show related"),b.forEach(Le),w.forEach(Le),_.forEach(Le),this.h()},h(){Ht(e,"class",u=i[4]?"is-active":"")},m(f,_){qt(f,e,_),Dt(e,t),Dt(t,o),Dt(o,l),m||(r=En(e,"click",i[10]),m=!0)},p(f,_){_&16&&u!==(u=f[4]?"is-active":"")&&Ht(e,"class",u)},d(f){f&&Le(e),m=!1,r()}}}function j_(i){let e=i[1],t,o,l=G_(i);return{c(){l.c(),t=gn()},l(u){l.l(u),t=gn()},m(u,m){l.m(u,m),qt(u,t,m),o=!0},p(u,m){m&2&&mr(e,e=u[1])?(Rr(),Ft(l,1,1,eo),Fr(),l=G_(u),l.c(),xt(l,1),l.m(t.parentNode,t)):l.p(u,m)},i(u){o||(xt(l),o=!0)},o(u){Ft(l),o=!1},d(u){u&&Le(t),l.d(u)}}}function lC(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=zt("a"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"A",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","panel-block")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function uC(i){let e,t,o=i[2][i[14].id]&&U_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?o?(o.p(l,u),u&132&&xt(o,1)):(o=U_(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function cC(i){let e,t,o=i[6][i[14].id]&&V_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,u){l[6][l[14].id]?o?(o.p(l,u),u&192&&xt(o,1)):(o=V_(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function U_(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=zt("a"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"A",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","panel-block")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function V_(i){let e,t,o,l;const u=[fC,hC],m=[];function r(f,_){return f[4]===!0?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(f){t.l(f),o=gn()},m(f,_){m[e].m(f,_),qt(f,o,_),l=!0},p(f,_){let w=e;e=r(f),e===w?m[e].p(f,_):(Rr(),Ft(m[w],1,1,()=>{m[w]=null}),Fr(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),xt(t,1),t.m(o.parentNode,o))},i(f){l||(xt(t),l=!0)},o(f){Ft(t),l=!1},d(f){m[e].d(f),f&&Le(o)}}}function hC(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=zt("a"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"A",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","panel-block")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function fC(i){let e,t,o=i[2][i[14].id]&&q_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?o?(o.p(l,u),u&132&&xt(o,1)):(o=q_(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function q_(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=zt("a"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"A",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","panel-block")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function H_(i){let e,t,o,l;const u=[cC,uC,lC],m=[];function r(f,_){return f[3]===!0?0:f[4]===!0?1:2}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(f){t.l(f),o=gn()},m(f,_){m[e].m(f,_),qt(f,o,_),l=!0},p(f,_){let w=e;e=r(f),e===w?m[e].p(f,_):(Rr(),Ft(m[w],1,1,()=>{m[w]=null}),Fr(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),xt(t,1),t.m(o.parentNode,o))},i(f){l||(xt(t),l=!0)},o(f){Ft(t),l=!1},d(f){m[e].d(f),f&&Le(o)}}}function G_(i){let e,t,o=i[7],l=[];for(let m=0;m<o.length;m+=1)l[m]=H_(z_(i,o,m));const u=m=>Ft(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);qt(m,e,r),t=!0},p(m,r){if(r&509){o=m[7];let f;for(f=0;f<o.length;f+=1){const _=z_(m,o,f);l[f]?(l[f].p(_,r),xt(l[f],1)):(l[f]=H_(_),l[f].c(),xt(l[f],1),l[f].m(e.parentNode,e))}for(Rr(),f=o.length;f<l.length;f+=1)u(f);Fr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)xt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Ft(l[r]);t=!1},d(m){oa(l,m),m&&Le(e)}}}function dC(i){let e,t,o,l,u,m,r,f,_,w=i[2]&&Object.keys(i[2]).length>0,b,x,v,C,T,S=w&&N_(i),M=i[5]&&j_(i);return{c(){e=zt("nav"),t=zt("div"),o=zt("ul"),l=zt("li"),u=zt("a"),m=zt("span"),r=Xn("Show rendered"),_=Yi(),S&&S.c(),b=Yi(),x=zt("nav"),M&&M.c(),this.h()},l(O){e=Nt(O,"NAV",{class:!0});var V=Gt(e);t=Nt(V,"DIV",{class:!0});var G=Gt(t);o=Nt(G,"UL",{});var Z=Gt(o);l=Nt(Z,"LI",{class:!0});var te=Gt(l);u=Nt(te,"A",{});var J=Gt(u);m=Nt(J,"SPAN",{});var oe=Gt(m);r=Yn(oe,"Show rendered"),oe.forEach(Le),J.forEach(Le),te.forEach(Le),_=Zi(Z),S&&S.l(Z),Z.forEach(Le),G.forEach(Le),b=Zi(V),x=Nt(V,"NAV",{class:!0});var Me=Gt(x);M&&M.l(Me),Me.forEach(Le),V.forEach(Le),this.h()},h(){Ht(l,"class",f=i[3]?"is-active":""),Ht(t,"class","tabs is-toggle is-fullwidth m-2 legend-header"),Ht(x,"class","panel legend-content svelte-1ezzpaq"),Ht(e,"class","panel")},m(O,V){qt(O,e,V),Dt(e,t),Dt(t,o),Dt(o,l),Dt(l,u),Dt(u,m),Dt(m,r),Dt(o,_),S&&S.m(o,null),Dt(e,b),Dt(e,x),M&&M.m(x,null),v=!0,C||(T=En(l,"click",i[9]),C=!0)},p(O,[V]){(!v||V&8&&f!==(f=O[3]?"is-active":""))&&Ht(l,"class",f),V&4&&(w=O[2]&&Object.keys(O[2]).length>0),w?S?S.p(O,V):(S=N_(O),S.c(),S.m(o,null)):S&&(S.d(1),S=null),O[5]?M?(M.p(O,V),V&32&&xt(M,1)):(M=j_(O),M.c(),xt(M,1),M.m(x,null)):M&&(Rr(),Ft(M,1,1,()=>{M=null}),Fr())},i(O){v||(xt(M),v=!0)},o(O){Ft(M),v=!1},d(O){O&&Le(e),S&&S.d(),M&&M.d(),C=!1,T()}}}function pC(i,e,t){let o,l;As(i,B_,M=>t(11,l=M));let{map:u}=e,{style:m}=e,r=!0,f=!0,_,w={},{relativeLayers:b={}}=e;const x=async()=>{if(!u||!m)return;const M=m.sprite;!M||(t(5,_=new aC(M)),await _.load(),v())},v=()=>{!u||!m||setTimeout(()=>{if(t(6,w={}),r===!0){Object.keys(l).forEach(O=>{t(6,w[O]=l[O],w)});const M=u.queryRenderedFeatures();o.forEach(O=>{M.filter(G=>G.layer.id===O.id).length>0&&t(6,w[O.id]=O,w)})}else o.forEach(M=>{t(6,w[M.id]=M,w)})},500)},C=M=>{const O=M.detail.layer;M.detail.visibility==="none"?Ih(B_,l[O.id]=O,l):l[O.id]&&delete l[O.id]},T=()=>t(3,r=!r),S=()=>t(4,f=!f);return i.$$set=M=>{"map"in M&&t(0,u=M.map),"style"in M&&t(1,m=M.style),"relativeLayers"in M&&t(2,b=M.relativeLayers)},i.$$.update=()=>{i.$$.dirty&2&&t(7,o=m?m.layers:[]),i.$$.dirty&5&&(u&&(u.on("moveend",v),u.on("styledata",v),u.on("load",()=>{v()})),b&&Object.keys(b).length===0&&t(4,f=!1)),i.$$.dirty&8&&v(),i.$$.dirty&16&&v(),i.$$.dirty&2&&x()},[u,m,b,r,f,_,w,o,C,T,S]}class mC extends vr{constructor(e){super(),br(this,e,pC,dC,mr,{map:0,style:1,relativeLayers:2})}}function W_(i){let e,t,o,l,u,m,r,f;o=new SA({}),o.$on("change",i[4]);function _(x){i[5](x)}function w(x){i[6](x)}let b={relativeLayers:i[3]};return i[1]!==void 0&&(b.map=i[1]),i[2]!==void 0&&(b.style=i[2]),u=new mC({props:b}),In.push(()=>To(u,"map",_)),In.push(()=>To(u,"style",w)),{c(){e=zt("nav"),t=zt("div"),ln(o.$$.fragment),l=Yi(),ln(u.$$.fragment),this.h()},l(x){e=Nt(x,"NAV",{class:!0});var v=Gt(e);t=Nt(v,"DIV",{class:!0});var C=Gt(t);pn(o.$$.fragment,C),C.forEach(Le),l=Zi(v),pn(u.$$.fragment,v),v.forEach(Le),this.h()},h(){Ht(t,"class","panel-header m-1 p-0"),Ht(e,"class","panel")},m(x,v){qt(x,e,v),Dt(e,t),un(o,t,null),Dt(e,l),un(u,e,null),f=!0},p(x,v){const C={};v&8&&(C.relativeLayers=x[3]),!m&&v&2&&(m=!0,C.map=x[1],Lo(()=>m=!1)),!r&&v&4&&(r=!0,C.style=x[2],Lo(()=>r=!1)),u.$set(C)},i(x){f||(xt(o.$$.fragment,x),xt(u.$$.fragment,x),f=!0)},o(x){Ft(o.$$.fragment,x),Ft(u.$$.fragment,x),f=!1},d(x){x&&Le(e),cn(o),cn(u)}}}function gC(i){let e,t,o=i[0]&&W_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&xt(o,1)):(o=W_(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function yC(i,e,t){let o;As(i,nu,w=>t(1,o=w));let l,u={},{isLayersTabVisible:m=!1}=e;fr.legend&&fr.legend.targets&&(u=fr.legend.targets);const r=()=>{!o||t(2,l=o.getStyle())};function f(w){o=w,nu.set(o)}function _(w){l=w,t(2,l),t(1,o)}return i.$$set=w=>{"isLayersTabVisible"in w&&t(0,m=w.isLayersTabVisible)},i.$$.update=()=>{i.$$.dirty&2&&o&&o.on("load",()=>{t(2,l=o.getStyle())})},[m,o,l,u,r,f,_]}class _C extends vr{constructor(e){super(),br(this,e,yC,gC,mr,{isLayersTabVisible:0})}}const{Marker:vC}=B8,Z0={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},Yc={Time:"time",Distance:"distance"};class bC{constructor(e,t,o){ml(this,"map");ml(this,"url");ml(this,"contourSources",[]);ml(this,"contourLayers",[]);ml(this,"contourMaker");ml(this,"contours",[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);this.map=e,this.url=t,o&&(this.contours=o)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(e=>{var t;(t=this.map)==null||t.removeLayer(e)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(e=>{var t;(t=this.map)==null||t.removeSource(e)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(e,t,o,l,u){this.clearFeatures();let m=JSON.parse(JSON.stringify(this.contours));u&&(m=u),m.forEach(f=>{o===Yc.Time?delete f.distance:delete f.time});let r="km";return o===Yc.Time&&(r="min"),new Promise((f,_)=>{const w={locations:[{lat:t,lon:e}],costing:l,contours:m,polygons:!0},b=`${this.url}/isochrone?json=${JSON.stringify(w)}`;fetch(b).then(x=>x.json()).then(x=>{x.features.forEach(v=>{var T,S,M,O;const C=`isochrone-${v.properties.contour}-${o}`;(T=this.map)==null||T.addSource(C,{type:"geojson",data:v}),this.contourSources.push(C),(S=this.map)==null||S.addLayer({id:`pg-${C}-${o}`,type:"fill",source:C,layout:{},paint:{"fill-color":v.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${C}-${o}`),(M=this.map)==null||M.addLayer({id:`ls-${C}-${o}`,type:"line",source:C,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":v.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${C}-${o}`),(O=this.map)==null||O.addLayer({id:`symbol-${C}-${o}`,type:"symbol",source:C,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${r}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${C}-${o}`)}),this.map&&(this.contourMaker=new vC().setLngLat([e,t]).addTo(this.map)),f()}).catch(x=>_(x))})}getContoursOption(){return this.contours}}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var uo={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},jl=new Set;jl.add(uo.BACKSPACE);jl.add(uo.ENTER);jl.add(uo.SPACEBAR);jl.add(uo.PAGE_UP);jl.add(uo.PAGE_DOWN);jl.add(uo.END);jl.add(uo.HOME);jl.add(uo.ARROW_LEFT);jl.add(uo.ARROW_UP);jl.add(uo.ARROW_RIGHT);jl.add(uo.ARROW_DOWN);jl.add(uo.DELETE);jl.add(uo.ESCAPE);jl.add(uo.TAB);var lu={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Ul=new Map;Ul.set(lu.BACKSPACE,uo.BACKSPACE);Ul.set(lu.ENTER,uo.ENTER);Ul.set(lu.SPACEBAR,uo.SPACEBAR);Ul.set(lu.PAGE_UP,uo.PAGE_UP);Ul.set(lu.PAGE_DOWN,uo.PAGE_DOWN);Ul.set(lu.END,uo.END);Ul.set(lu.HOME,uo.HOME);Ul.set(lu.ARROW_LEFT,uo.ARROW_LEFT);Ul.set(lu.ARROW_UP,uo.ARROW_UP);Ul.set(lu.ARROW_RIGHT,uo.ARROW_RIGHT);Ul.set(lu.ARROW_DOWN,uo.ARROW_DOWN);Ul.set(lu.DELETE,uo.DELETE);Ul.set(lu.ESCAPE,uo.ESCAPE);Ul.set(lu.TAB,uo.TAB);var mf=new Set;mf.add(uo.PAGE_UP);mf.add(uo.PAGE_DOWN);mf.add(uo.END);mf.add(uo.HOME);mf.add(uo.ARROW_LEFT);mf.add(uo.ARROW_UP);mf.add(uo.ARROW_RIGHT);mf.add(uo.ARROW_DOWN);function fa(i){var e=i.key;if(jl.has(e))return e;var t=Ul.get(i.keyCode);return t||uo.UNKNOWN}const{applyPassive:Np}=pw,{matches:wC}=C1;function Yf(i,{ripple:e=!0,surface:t=!1,unbounded:o=!1,disabled:l=!1,color:u,active:m,rippleElement:r,eventTarget:f,activeTarget:_,addClass:w=C=>i.classList.add(C),removeClass:b=C=>i.classList.remove(C),addStyle:x=(C,T)=>i.style.setProperty(C,T),initPromise:v=Promise.resolve()}={}){let C,T=Zs("SMUI:addLayoutListener"),S,M=m,O=f,V=_;function G(){t?(w("mdc-ripple-surface"),u==="primary"?(w("smui-ripple-surface--primary"),b("smui-ripple-surface--secondary")):u==="secondary"?(b("smui-ripple-surface--primary"),w("smui-ripple-surface--secondary")):(b("smui-ripple-surface--primary"),b("smui-ripple-surface--secondary"))):(b("mdc-ripple-surface"),b("smui-ripple-surface--primary"),b("smui-ripple-surface--secondary")),C&&M!==m&&(M=m,m?C.activate():m===!1&&C.deactivate()),e&&!C?(C=new Ox({addClass:w,browserSupportsCssVars:()=>Mx(window),computeBoundingRect:()=>(r||i).getBoundingClientRect(),containsEventTarget:te=>i.contains(te),deregisterDocumentInteractionHandler:(te,J)=>document.documentElement.removeEventListener(te,J,Np()),deregisterInteractionHandler:(te,J)=>(f||i).removeEventListener(te,J,Np()),deregisterResizeHandler:te=>window.removeEventListener("resize",te),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>m==null?wC(_||i,":active"):m,isSurfaceDisabled:()=>!!l,isUnbounded:()=>!!o,registerDocumentInteractionHandler:(te,J)=>document.documentElement.addEventListener(te,J,Np()),registerInteractionHandler:(te,J)=>(f||i).addEventListener(te,J,Np()),registerResizeHandler:te=>window.addEventListener("resize",te),removeClass:b,updateCssVariable:x}),v.then(()=>{C&&(C.init(),C.setUnbounded(o))})):C&&!e&&v.then(()=>{C&&(C.destroy(),C=void 0)}),C&&(O!==f||V!==_)&&(O=f,V=_,C.destroy(),requestAnimationFrame(()=>{C&&(C.init(),C.setUnbounded(o))})),!e&&o&&w("mdc-ripple-upgraded--unbounded")}G(),T&&(S=T(Z));function Z(){C&&C.layout()}return{update(te){({ripple:e,surface:t,unbounded:o,disabled:l,color:u,active:m,rippleElement:r,eventTarget:f,activeTarget:_,addClass:w,removeClass:b,addStyle:x,initPromise:v}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:J=>i.classList.add(J),removeClass:J=>i.classList.remove(J),addStyle:(J,oe)=>i.style.setProperty(J,oe),initPromise:Promise.resolve()},te)),G()},destroy(){C&&(C.destroy(),C=void 0,b("mdc-ripple-surface"),b("smui-ripple-surface--primary"),b("smui-ripple-surface--secondary")),S&&S()}}}function X_(i){let e;return{c(){e=zt("div"),this.h()},l(t){e=Nt(t,"DIV",{class:!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","mdc-button__touch")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function xC(i){let e,t,o,l;const u=i[27].default,m=xr(u,i,i[29],null);let r=i[6]&&X_();return{c(){e=zt("div"),t=Yi(),m&&m.c(),r&&r.c(),o=gn(),this.h()},l(f){e=Nt(f,"DIV",{class:!0}),Gt(e).forEach(Le),t=Zi(f),m&&m.l(f),r&&r.l(f),o=gn(),this.h()},h(){Ht(e,"class","mdc-button__ripple")},m(f,_){qt(f,e,_),qt(f,t,_),m&&m.m(f,_),r&&r.m(f,_),qt(f,o,_),l=!0},p(f,_){m&&m.p&&(!l||_&536870912)&&Ar(m,u,f,f[29],l?Sr(u,f[29],_,null):kr(f[29]),null),f[6]?r||(r=X_(),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},i(f){l||(xt(m,f),l=!0)},o(f){Ft(m,f),l=!1},d(f){f&&Le(e),f&&Le(t),m&&m.d(f),r&&r.d(f),f&&Le(o)}}}function AC(i){let e,t,o;const l=[{use:[[Yf,{ripple:i[3],unbounded:!1,color:i[4],disabled:!!i[22].disabled,addClass:i[18],removeClass:i[19],addStyle:i[20]}],i[16],...i[0]]},{class:_r({[i[1]]:!0,"mdc-button":!0,"mdc-button--raised":i[5]==="raised","mdc-button--unelevated":i[5]==="unelevated","mdc-button--outlined":i[5]==="outlined","smui-button--color-secondary":i[4]==="secondary","mdc-button--touch":i[6],"mdc-card__action":i[17]==="card:action","mdc-card__action--button":i[17]==="card:action","mdc-dialog__button":i[17]==="dialog:action","mdc-top-app-bar__navigation-icon":i[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":i[17]==="top-app-bar:action","mdc-snackbar__action":i[17]==="snackbar:actions","mdc-banner__secondary-action":i[17]==="banner"&&i[8],"mdc-banner__primary-action":i[17]==="banner"&&!i[8],"mdc-tooltip__action":i[17]==="tooltip:rich-actions",...i[11]})},{style:Object.entries(i[12]).map(Y_).concat([i[2]]).join(" ")},i[15],i[14],i[13],{href:i[7]},i[22]];var u=i[9];function m(r){let f={$$slots:{default:[xC]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[28](e),e.$on("click",i[21])),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,[f]){const _=f&6289919?Tr(l,[f&6094873&&{use:[[Yf,{ripple:r[3],unbounded:!1,color:r[4],disabled:!!r[22].disabled,addClass:r[18],removeClass:r[19],addStyle:r[20]}],r[16],...r[0]]},f&133490&&{class:_r({[r[1]]:!0,"mdc-button":!0,"mdc-button--raised":r[5]==="raised","mdc-button--unelevated":r[5]==="unelevated","mdc-button--outlined":r[5]==="outlined","smui-button--color-secondary":r[4]==="secondary","mdc-button--touch":r[6],"mdc-card__action":r[17]==="card:action","mdc-card__action--button":r[17]==="card:action","mdc-dialog__button":r[17]==="dialog:action","mdc-top-app-bar__navigation-icon":r[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":r[17]==="top-app-bar:action","mdc-snackbar__action":r[17]==="snackbar:actions","mdc-banner__secondary-action":r[17]==="banner"&&r[8],"mdc-banner__primary-action":r[17]==="banner"&&!r[8],"mdc-tooltip__action":r[17]==="tooltip:rich-actions",...r[11]})},f&4100&&{style:Object.entries(r[12]).map(Y_).concat([r[2]]).join(" ")},f&32768&&ko(r[15]),f&16384&&ko(r[14]),f&8192&&ko(r[13]),f&128&&{href:r[7]},f&4194304&&ko(r[22])]):{};if(f&536870976&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[9])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[28](e),e.$on("click",r[21]),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[28](null),r&&Le(t),e&&cn(e,r)}}}const Y_=([i,e])=>`${i}: ${e};`;function kC(i,e,t){let o,l,u;const m=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let r=or(e,m),{$$slots:f={},$$scope:_}=e;const w=No(zo());let{use:b=[]}=e,{class:x=""}=e,{style:v=""}=e,{ripple:C=!0}=e,{color:T="primary"}=e,{variant:S="text"}=e,{touch:M=!1}=e,{href:O=void 0}=e,{action:V="close"}=e,{defaultAction:G=!1}=e,{secondary:Z=!1}=e,te,J={},oe={},Me=Zs("SMUI:button:context"),{component:Fe=O==null?x6:vw}=e,pe=r.disabled;ws("SMUI:label:context","button"),ws("SMUI:icon:context","button");function Ie(it){J[it]||t(11,J[it]=!0,J)}function Se(it){(!(it in J)||J[it])&&t(11,J[it]=!1,J)}function me(it,we){oe[it]!=we&&(we===""||we==null?(delete oe[it],t(12,oe)):t(12,oe[it]=we,oe))}function et(){Me==="banner"&&cs(nt(),Z?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function nt(){return te.getElement()}function Et(it){In[it?"unshift":"push"](()=>{te=it,t(10,te)})}return i.$$set=it=>{t(30,e=en(en({},e),Po(it))),t(22,r=or(e,m)),"use"in it&&t(0,b=it.use),"class"in it&&t(1,x=it.class),"style"in it&&t(2,v=it.style),"ripple"in it&&t(3,C=it.ripple),"color"in it&&t(4,T=it.color),"variant"in it&&t(5,S=it.variant),"touch"in it&&t(6,M=it.touch),"href"in it&&t(7,O=it.href),"action"in it&&t(23,V=it.action),"defaultAction"in it&&t(24,G=it.defaultAction),"secondary"in it&&t(8,Z=it.secondary),"component"in it&&t(9,Fe=it.component),"$$scope"in it&&t(29,_=it.$$scope)},i.$$.update=()=>{t(15,o=Me==="dialog:action"&&V!=null?{"data-mdc-dialog-action":V}:{action:e.action}),t(14,l=Me==="dialog:action"&&G?{"data-mdc-dialog-button-default":""}:{default:e.default}),t(13,u=Me==="banner"?{}:{secondary:e.secondary}),pe!==r.disabled&&(nt().blur(),t(26,pe=r.disabled))},e=Po(e),[b,x,v,C,T,S,M,O,Z,Fe,te,J,oe,u,l,o,w,Me,Ie,Se,me,et,r,V,G,nt,pe,f,Et,_]}class Zf extends vr{constructor(e){super(),br(this,e,kC,AC,mr,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}function SC(i){let e;const t=i[9].default,o=xr(t,i,i[11],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&2048)&&Ar(o,t,l,l[11],e?Sr(t,l[11],u,null):kr(l[11]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function CC(i){let e,t,o;const l=[{use:[i[4],...i[0]]},{class:_r({[i[1]]:!0,"mdc-button__label":i[5]==="button","mdc-fab__label":i[5]==="fab","mdc-tab__text-label":i[5]==="tab","mdc-image-list__label":i[5]==="image-list","mdc-snackbar__label":i[5]==="snackbar","mdc-banner__text":i[5]==="banner","mdc-segmented-button__label":i[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":i[5]==="data-table:pagination","mdc-data-table__header-cell-label":i[5]==="data-table:sortable-header-cell"})},i[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:i[6]},i[7]];var u=i[2];function m(r){let f={$$slots:{default:[SC]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[10](e)),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,[f]){const _=f&243?Tr(l,[f&17&&{use:[r[4],...r[0]]},f&34&&{class:_r({[r[1]]:!0,"mdc-button__label":r[5]==="button","mdc-fab__label":r[5]==="fab","mdc-tab__text-label":r[5]==="tab","mdc-image-list__label":r[5]==="image-list","mdc-snackbar__label":r[5]==="snackbar","mdc-banner__text":r[5]==="banner","mdc-segmented-button__label":r[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":r[5]==="data-table:pagination","mdc-data-table__header-cell-label":r[5]==="data-table:sortable-header-cell"})},f&32&&ko(r[5]==="snackbar"?{"aria-atomic":"false"}:{}),f&64&&{tabindex:r[6]},f&128&&ko(r[7])]):{};if(f&2048&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[2])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[10](e),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[10](null),r&&Le(t),e&&cn(e,r)}}}function EC(i,e,t){const o=["use","class","component","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let{use:f=[]}=e,{class:_=""}=e,w,{component:b=_w}=e;const x=Zs("SMUI:label:context"),v=Zs("SMUI:label:tabindex");function C(){return w.getElement()}function T(S){In[S?"unshift":"push"](()=>{w=S,t(3,w)})}return i.$$set=S=>{e=en(en({},e),Po(S)),t(7,l=or(e,o)),"use"in S&&t(0,f=S.use),"class"in S&&t(1,_=S.class),"component"in S&&t(2,b=S.component),"$$scope"in S&&t(11,m=S.$$scope)},[f,_,b,w,r,x,v,l,C,u,T,m]}class IC extends vr{constructor(e){super(),br(this,e,EC,CC,mr,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function TC(i){let e;const t=i[9].default,o=xr(t,i,i[11],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&2048)&&Ar(o,t,l,l[11],e?Sr(t,l[11],u,null):kr(l[11]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function LC(i){let e,t,o;const l=[{use:[i[5],...i[0]]},{class:_r({[i[1]]:!0,"mdc-button__icon":i[6]==="button","mdc-fab__icon":i[6]==="fab","mdc-icon-button__icon":i[6]==="icon-button","mdc-icon-button__icon--on":i[6]==="icon-button"&&i[2],"mdc-tab__icon":i[6]==="tab","mdc-banner__icon":i[6]==="banner","mdc-segmented-button__icon":i[6]==="segmented-button"})},{"aria-hidden":"true"},i[3]===Xy?{focusable:"false",tabindex:"-1"}:{},i[7]];var u=i[3];function m(r){let f={$$slots:{default:[TC]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[10](e)),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,[f]){const _=f&239?Tr(l,[f&33&&{use:[r[5],...r[0]]},f&70&&{class:_r({[r[1]]:!0,"mdc-button__icon":r[6]==="button","mdc-fab__icon":r[6]==="fab","mdc-icon-button__icon":r[6]==="icon-button","mdc-icon-button__icon--on":r[6]==="icon-button"&&r[2],"mdc-tab__icon":r[6]==="tab","mdc-banner__icon":r[6]==="banner","mdc-segmented-button__icon":r[6]==="segmented-button"})},l[2],f&8&&ko(r[3]===Xy?{focusable:"false",tabindex:"-1"}:{}),f&128&&ko(r[7])]):{};if(f&2048&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[3])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[10](e),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[10](null),r&&Le(t),e&&cn(e,r)}}}function PC(i,e,t){const o=["use","class","on","component","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let{use:f=[]}=e,{class:_=""}=e,{on:w=!1}=e,b,{component:x=o6}=e;const v=Zs("SMUI:icon:context");function C(){return b.getElement()}function T(S){In[S?"unshift":"push"](()=>{b=S,t(4,b)})}return i.$$set=S=>{e=en(en({},e),Po(S)),t(7,l=or(e,o)),"use"in S&&t(0,f=S.use),"class"in S&&t(1,_=S.class),"on"in S&&t(2,w=S.on),"component"in S&&t(3,x=S.component),"$$scope"in S&&t(11,m=S.$$scope)},[f,_,w,x,b,r,v,l,C,u,T,m]}class MC extends vr{constructor(e){super(),br(this,e,PC,LC,mr,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}function DC(i){let e;const t=i[4].default,o=xr(t,i,i[3],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,[u]){o&&o.p&&(!e||u&8)&&Ar(o,t,l,l[3],e?Sr(t,l[3],u,null):kr(l[3]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function OC(i,e,t){let o,{$$slots:l={},$$scope:u}=e,{key:m}=e,{value:r}=e;const f=Cc(r);return As(i,f,_=>t(5,o=_)),ws(m,f),nh(()=>{f.set(void 0)}),i.$$set=_=>{"key"in _&&t(1,m=_.key),"value"in _&&t(2,r=_.value),"$$scope"in _&&t(3,u=_.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&Ih(f,o=r,o)},[f,m,r,u,l]}class x1 extends vr{constructor(e){super(),br(this,e,OC,DC,mr,{key:1,value:2})}}const gf=IC,i0=MC;var _4={exports:{}},jg={exports:{}},v4=function(e,t){return function(){for(var l=new Array(arguments.length),u=0;u<l.length;u++)l[u]=arguments[u];return e.apply(t,l)}},FC=v4,n0=Object.prototype.toString;function Ug(i){return n0.call(i)==="[object Array]"}function Y2(i){return typeof i>"u"}function RC(i){return i!==null&&!Y2(i)&&i.constructor!==null&&!Y2(i.constructor)&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function BC(i){return n0.call(i)==="[object ArrayBuffer]"}function zC(i){return typeof FormData<"u"&&i instanceof FormData}function NC(i){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&i.buffer instanceof ArrayBuffer,e}function jC(i){return typeof i=="string"}function UC(i){return typeof i=="number"}function b4(i){return i!==null&&typeof i=="object"}function r1(i){if(n0.call(i)!=="[object Object]")return!1;var e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function VC(i){return n0.call(i)==="[object Date]"}function qC(i){return n0.call(i)==="[object File]"}function HC(i){return n0.call(i)==="[object Blob]"}function w4(i){return n0.call(i)==="[object Function]"}function GC(i){return b4(i)&&w4(i.pipe)}function WC(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}function XC(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function YC(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Vg(i,e){if(!(i===null||typeof i>"u"))if(typeof i!="object"&&(i=[i]),Ug(i))for(var t=0,o=i.length;t<o;t++)e.call(null,i[t],t,i);else for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.call(null,i[l],l,i)}function Z2(){var i={};function e(l,u){r1(i[u])&&r1(l)?i[u]=Z2(i[u],l):r1(l)?i[u]=Z2({},l):Ug(l)?i[u]=l.slice():i[u]=l}for(var t=0,o=arguments.length;t<o;t++)Vg(arguments[t],e);return i}function ZC(i,e,t){return Vg(e,function(l,u){t&&typeof l=="function"?i[u]=FC(l,t):i[u]=l}),i}function KC(i){return i.charCodeAt(0)===65279&&(i=i.slice(1)),i}var Du={isArray:Ug,isArrayBuffer:BC,isBuffer:RC,isFormData:zC,isArrayBufferView:NC,isString:jC,isNumber:UC,isObject:b4,isPlainObject:r1,isUndefined:Y2,isDate:VC,isFile:qC,isBlob:HC,isFunction:w4,isStream:GC,isURLSearchParams:WC,isStandardBrowserEnv:YC,forEach:Vg,merge:Z2,extend:ZC,trim:XC,stripBOM:KC},A0=Du;function Z_(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var x4=function(e,t,o){if(!t)return e;var l;if(o)l=o(t);else if(A0.isURLSearchParams(t))l=t.toString();else{var u=[];A0.forEach(t,function(f,_){f===null||typeof f>"u"||(A0.isArray(f)?_=_+"[]":f=[f],A0.forEach(f,function(b){A0.isDate(b)?b=b.toISOString():A0.isObject(b)&&(b=JSON.stringify(b)),u.push(Z_(_)+"="+Z_(b))}))}),l=u.join("&")}if(l){var m=e.indexOf("#");m!==-1&&(e=e.slice(0,m)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e},JC=Du;function U1(){this.handlers=[]}U1.prototype.use=function(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};U1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};U1.prototype.forEach=function(e){JC.forEach(this.handlers,function(o){o!==null&&e(o)})};var QC=U1,$C=Du,eE=function(e,t){$C.forEach(e,function(l,u){u!==t&&u.toUpperCase()===t.toUpperCase()&&(e[t]=l,delete e[u])})},A4=function(e,t,o,l,u){return e.config=t,o&&(e.code=o),e.request=l,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Hm,K_;function k4(){if(K_)return Hm;K_=1;var i=A4;return Hm=function(t,o,l,u,m){var r=new Error(t);return i(r,o,l,u,m)},Hm}var Gm,J_;function tE(){if(J_)return Gm;J_=1;var i=k4();return Gm=function(t,o,l){var u=l.config.validateStatus;!l.status||!u||u(l.status)?t(l):o(i("Request failed with status code "+l.status,l.config,null,l.request,l))},Gm}var Wm,Q_;function iE(){if(Q_)return Wm;Q_=1;var i=Du;return Wm=i.isStandardBrowserEnv()?function(){return{write:function(o,l,u,m,r,f){var _=[];_.push(o+"="+encodeURIComponent(l)),i.isNumber(u)&&_.push("expires="+new Date(u).toGMTString()),i.isString(m)&&_.push("path="+m),i.isString(r)&&_.push("domain="+r),f===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(o){var l=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Wm}var Xm,$_;function nE(){return $_||($_=1,Xm=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Xm}var Ym,ev;function rE(){return ev||(ev=1,Ym=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),Ym}var Zm,tv;function oE(){if(tv)return Zm;tv=1;var i=nE(),e=rE();return Zm=function(o,l){return o&&!i(l)?e(o,l):l},Zm}var Km,iv;function sE(){if(iv)return Km;iv=1;var i=Du,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Km=function(o){var l={},u,m,r;return o&&i.forEach(o.split(`
`),function(_){if(r=_.indexOf(":"),u=i.trim(_.substr(0,r)).toLowerCase(),m=i.trim(_.substr(r+1)),u){if(l[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?l[u]=(l[u]?l[u]:[]).concat([m]):l[u]=l[u]?l[u]+", "+m:m}}),l},Km}var Jm,nv;function aE(){if(nv)return Jm;nv=1;var i=Du;return Jm=i.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),l;function u(m){var r=m;return t&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return l=u(window.location.href),function(r){var f=i.isString(r)?u(r):r;return f.protocol===l.protocol&&f.host===l.host}}():function(){return function(){return!0}}(),Jm}var Qm,rv;function ov(){if(rv)return Qm;rv=1;var i=Du,e=tE(),t=iE(),o=x4,l=oE(),u=sE(),m=aE(),r=k4();return Qm=function(_){return new Promise(function(b,x){var v=_.data,C=_.headers,T=_.responseType;i.isFormData(v)&&delete C["Content-Type"];var S=new XMLHttpRequest;if(_.auth){var M=_.auth.username||"",O=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";C.Authorization="Basic "+btoa(M+":"+O)}var V=l(_.baseURL,_.url);S.open(_.method.toUpperCase(),o(V,_.params,_.paramsSerializer),!0),S.timeout=_.timeout;function G(){if(!!S){var te="getAllResponseHeaders"in S?u(S.getAllResponseHeaders()):null,J=!T||T==="text"||T==="json"?S.responseText:S.response,oe={data:J,status:S.status,statusText:S.statusText,headers:te,config:_,request:S};e(b,x,oe),S=null}}if("onloadend"in S?S.onloadend=G:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(G)},S.onabort=function(){!S||(x(r("Request aborted",_,"ECONNABORTED",S)),S=null)},S.onerror=function(){x(r("Network Error",_,null,S)),S=null},S.ontimeout=function(){var J="timeout of "+_.timeout+"ms exceeded";_.timeoutErrorMessage&&(J=_.timeoutErrorMessage),x(r(J,_,_.transitional&&_.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},i.isStandardBrowserEnv()){var Z=(_.withCredentials||m(V))&&_.xsrfCookieName?t.read(_.xsrfCookieName):void 0;Z&&(C[_.xsrfHeaderName]=Z)}"setRequestHeader"in S&&i.forEach(C,function(J,oe){typeof v>"u"&&oe.toLowerCase()==="content-type"?delete C[oe]:S.setRequestHeader(oe,J)}),i.isUndefined(_.withCredentials)||(S.withCredentials=!!_.withCredentials),T&&T!=="json"&&(S.responseType=_.responseType),typeof _.onDownloadProgress=="function"&&S.addEventListener("progress",_.onDownloadProgress),typeof _.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",_.onUploadProgress),_.cancelToken&&_.cancelToken.promise.then(function(J){!S||(S.abort(),x(J),S=null)}),v||(v=null),S.send(v)})},Qm}var $a=Du,sv=eE,lE=A4,uE={"Content-Type":"application/x-www-form-urlencoded"};function av(i,e){!$a.isUndefined(i)&&$a.isUndefined(i["Content-Type"])&&(i["Content-Type"]=e)}function cE(){var i;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(i=ov()),i}function hE(i,e,t){if($a.isString(i))try{return(e||JSON.parse)(i),$a.trim(i)}catch(o){if(o.name!=="SyntaxError")throw o}return(t||JSON.stringify)(i)}var V1={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:cE(),transformRequest:[function(e,t){return sv(t,"Accept"),sv(t,"Content-Type"),$a.isFormData(e)||$a.isArrayBuffer(e)||$a.isBuffer(e)||$a.isStream(e)||$a.isFile(e)||$a.isBlob(e)?e:$a.isArrayBufferView(e)?e.buffer:$a.isURLSearchParams(e)?(av(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):$a.isObject(e)||t&&t["Content-Type"]==="application/json"?(av(t,"application/json"),hE(e)):e}],transformResponse:[function(e){var t=this.transitional,o=t&&t.silentJSONParsing,l=t&&t.forcedJSONParsing,u=!o&&this.responseType==="json";if(u||l&&$a.isString(e)&&e.length)try{return JSON.parse(e)}catch(m){if(u)throw m.name==="SyntaxError"?lE(m,this,"E_JSON_PARSE"):m}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};V1.headers={common:{Accept:"application/json, text/plain, */*"}};$a.forEach(["delete","get","head"],function(e){V1.headers[e]={}});$a.forEach(["post","put","patch"],function(e){V1.headers[e]=$a.merge(uE)});var qg=V1,fE=Du,dE=qg,pE=function(e,t,o){var l=this||dE;return fE.forEach(o,function(m){e=m.call(l,e,t)}),e},$m,lv;function S4(){return lv||(lv=1,$m=function(e){return!!(e&&e.__CANCEL__)}),$m}var uv=Du,e2=pE,mE=S4(),gE=qg;function t2(i){i.cancelToken&&i.cancelToken.throwIfRequested()}var yE=function(e){t2(e),e.headers=e.headers||{},e.data=e2.call(e,e.data,e.headers,e.transformRequest),e.headers=uv.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),uv.forEach(["delete","get","head","post","put","patch","common"],function(l){delete e.headers[l]});var t=e.adapter||gE.adapter;return t(e).then(function(l){return t2(e),l.data=e2.call(e,l.data,l.headers,e.transformResponse),l},function(l){return mE(l)||(t2(e),l&&l.response&&(l.response.data=e2.call(e,l.response.data,l.response.headers,e.transformResponse))),Promise.reject(l)})},bl=Du,C4=function(e,t){t=t||{};var o={},l=["url","method","data"],u=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],r=["validateStatus"];function f(x,v){return bl.isPlainObject(x)&&bl.isPlainObject(v)?bl.merge(x,v):bl.isPlainObject(v)?bl.merge({},v):bl.isArray(v)?v.slice():v}function _(x){bl.isUndefined(t[x])?bl.isUndefined(e[x])||(o[x]=f(void 0,e[x])):o[x]=f(e[x],t[x])}bl.forEach(l,function(v){bl.isUndefined(t[v])||(o[v]=f(void 0,t[v]))}),bl.forEach(u,_),bl.forEach(m,function(v){bl.isUndefined(t[v])?bl.isUndefined(e[v])||(o[v]=f(void 0,e[v])):o[v]=f(void 0,t[v])}),bl.forEach(r,function(v){v in t?o[v]=f(e[v],t[v]):v in e&&(o[v]=f(void 0,e[v]))});var w=l.concat(u).concat(m).concat(r),b=Object.keys(e).concat(Object.keys(t)).filter(function(v){return w.indexOf(v)===-1});return bl.forEach(b,_),o};const _E="axios",vE="0.21.4",bE="Promise based HTTP client for the browser and node.js",wE="index.js",xE={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},AE={type:"git",url:"https://github.com/axios/axios.git"},kE=["xhr","http","ajax","promise","node"],SE="Matt Zabriskie",CE="MIT",EE={url:"https://github.com/axios/axios/issues"},IE="https://axios-http.com",TE={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},LE={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},PE="dist/axios.min.js",ME="dist/axios.min.js",DE="./index.d.ts",OE={"follow-redirects":"^1.14.0"},FE=[{path:"./dist/axios.min.js",threshold:"5kB"}],RE={name:_E,version:vE,description:bE,main:wE,scripts:xE,repository:AE,keywords:kE,author:SE,license:CE,bugs:EE,homepage:IE,devDependencies:TE,browser:LE,jsdelivr:PE,unpkg:ME,typings:DE,dependencies:OE,bundlesize:FE};var E4=RE,Hg={};["object","boolean","number","function","string","symbol"].forEach(function(i,e){Hg[i]=function(o){return typeof o===i||"a"+(e<1?"n ":" ")+i}});var cv={},BE=E4.version.split(".");function I4(i,e){for(var t=e?e.split("."):BE,o=i.split("."),l=0;l<3;l++){if(t[l]>o[l])return!0;if(t[l]<o[l])return!1}return!1}Hg.transitional=function(e,t,o){var l=t&&I4(t);function u(m,r){return"[Axios v"+E4.version+"] Transitional option '"+m+"'"+r+(o?". "+o:"")}return function(m,r,f){if(e===!1)throw new Error(u(r," has been removed in "+t));return l&&!cv[r]&&(cv[r]=!0,console.warn(u(r," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(m,r,f):!0}};function zE(i,e,t){if(typeof i!="object")throw new TypeError("options must be an object");for(var o=Object.keys(i),l=o.length;l-- >0;){var u=o[l],m=e[u];if(m){var r=i[u],f=r===void 0||m(r,u,i);if(f!==!0)throw new TypeError("option "+u+" must be "+f);continue}if(t!==!0)throw Error("Unknown option "+u)}}var NE={isOlderVersion:I4,assertOptions:zE,validators:Hg},T4=Du,jE=x4,hv=QC,fv=yE,q1=C4,L4=NE,k0=L4.validators;function np(i){this.defaults=i,this.interceptors={request:new hv,response:new hv}}np.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=q1(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&L4.assertOptions(t,{silentJSONParsing:k0.transitional(k0.boolean,"1.0.0"),forcedJSONParsing:k0.transitional(k0.boolean,"1.0.0"),clarifyTimeoutError:k0.transitional(k0.boolean,"1.0.0")},!1);var o=[],l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(e)===!1||(l=l&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});var u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});var m;if(!l){var r=[fv,void 0];for(Array.prototype.unshift.apply(r,o),r=r.concat(u),m=Promise.resolve(e);r.length;)m=m.then(r.shift(),r.shift());return m}for(var f=e;o.length;){var _=o.shift(),w=o.shift();try{f=_(f)}catch(b){w(b);break}}try{m=fv(f)}catch(b){return Promise.reject(b)}for(;u.length;)m=m.then(u.shift(),u.shift());return m};np.prototype.getUri=function(e){return e=q1(this.defaults,e),jE(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};T4.forEach(["delete","get","head","options"],function(e){np.prototype[e]=function(t,o){return this.request(q1(o||{},{method:e,url:t,data:(o||{}).data}))}});T4.forEach(["post","put","patch"],function(e){np.prototype[e]=function(t,o,l){return this.request(q1(l||{},{method:e,url:t,data:o}))}});var UE=np,i2,dv;function P4(){if(dv)return i2;dv=1;function i(e){this.message=e}return i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,i2=i,i2}var n2,pv;function VE(){if(pv)return n2;pv=1;var i=P4();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(m){o=m});var l=this;t(function(m){l.reason||(l.reason=new i(m),o(l.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var o,l=new e(function(m){o=m});return{token:l,cancel:o}},n2=e,n2}var r2,mv;function qE(){return mv||(mv=1,r2=function(e){return function(o){return e.apply(null,o)}}),r2}var o2,gv;function HE(){return gv||(gv=1,o2=function(e){return typeof e=="object"&&e.isAxiosError===!0}),o2}var yv=Du,GE=v4,o1=UE,WE=C4,XE=qg;function M4(i){var e=new o1(i),t=GE(o1.prototype.request,e);return yv.extend(t,o1.prototype,e),yv.extend(t,e),t}var Ec=M4(XE);Ec.Axios=o1;Ec.create=function(e){return M4(WE(Ec.defaults,e))};Ec.Cancel=P4();Ec.CancelToken=VE();Ec.isCancel=S4();Ec.all=function(e){return Promise.all(e)};Ec.spread=qE();Ec.isAxiosError=HE();jg.exports=Ec;jg.exports.default=Ec;(function(i){i.exports=jg.exports})(_4);const YE=F8(_4.exports);var Mh={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(u,m){return Object.prototype.hasOwnProperty.call(u,m)}i.assign=function(u){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var r=m.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var f in r)t(r,f)&&(u[f]=r[f])}}return u},i.shrinkBuf=function(u,m){return u.length===m?u:u.subarray?u.subarray(0,m):(u.length=m,u)};var o={arraySet:function(u,m,r,f,_){if(m.subarray&&u.subarray){u.set(m.subarray(r,r+f),_);return}for(var w=0;w<f;w++)u[_+w]=m[r+w]},flattenChunks:function(u){var m,r,f,_,w,b;for(f=0,m=0,r=u.length;m<r;m++)f+=u[m].length;for(b=new Uint8Array(f),_=0,m=0,r=u.length;m<r;m++)w=u[m],b.set(w,_),_+=w.length;return b}},l={arraySet:function(u,m,r,f,_){for(var w=0;w<f;w++)u[_+w]=m[r+w]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(e)})(Mh);var rp={},oh={},od={},ZE=Mh,KE=4,_v=0,vv=1,JE=2;function sd(i){for(var e=i.length;--e>=0;)i[e]=0}var QE=0,D4=1,$E=2,eI=3,tI=258,Gg=29,op=256,Zd=op+1+Gg,K0=30,Wg=19,O4=2*Zd+1,qf=15,s2=16,iI=7,Xg=256,F4=16,R4=17,B4=18,K2=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nI=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z4=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rI=512,kh=new Array((Zd+2)*2);sd(kh);var Fd=new Array(K0*2);sd(Fd);var Kd=new Array(rI);sd(Kd);var Jd=new Array(tI-eI+1);sd(Jd);var Yg=new Array(Gg);sd(Yg);var A1=new Array(K0);sd(A1);function a2(i,e,t,o,l){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=o,this.max_length=l,this.has_stree=i&&i.length}var N4,j4,U4;function l2(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function V4(i){return i<256?Kd[i]:Kd[256+(i>>>7)]}function Qd(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function ru(i,e,t){i.bi_valid>s2-t?(i.bi_buf|=e<<i.bi_valid&65535,Qd(i,i.bi_buf),i.bi_buf=e>>s2-i.bi_valid,i.bi_valid+=t-s2):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function Jc(i,e,t){ru(i,t[e*2],t[e*2+1])}function q4(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function oI(i){i.bi_valid===16?(Qd(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function sI(i,e){var t=e.dyn_tree,o=e.max_code,l=e.stat_desc.static_tree,u=e.stat_desc.has_stree,m=e.stat_desc.extra_bits,r=e.stat_desc.extra_base,f=e.stat_desc.max_length,_,w,b,x,v,C,T=0;for(x=0;x<=qf;x++)i.bl_count[x]=0;for(t[i.heap[i.heap_max]*2+1]=0,_=i.heap_max+1;_<O4;_++)w=i.heap[_],x=t[t[w*2+1]*2+1]+1,x>f&&(x=f,T++),t[w*2+1]=x,!(w>o)&&(i.bl_count[x]++,v=0,w>=r&&(v=m[w-r]),C=t[w*2],i.opt_len+=C*(x+v),u&&(i.static_len+=C*(l[w*2+1]+v)));if(T!==0){do{for(x=f-1;i.bl_count[x]===0;)x--;i.bl_count[x]--,i.bl_count[x+1]+=2,i.bl_count[f]--,T-=2}while(T>0);for(x=f;x!==0;x--)for(w=i.bl_count[x];w!==0;)b=i.heap[--_],!(b>o)&&(t[b*2+1]!==x&&(i.opt_len+=(x-t[b*2+1])*t[b*2],t[b*2+1]=x),w--)}}function H4(i,e,t){var o=new Array(qf+1),l=0,u,m;for(u=1;u<=qf;u++)o[u]=l=l+t[u-1]<<1;for(m=0;m<=e;m++){var r=i[m*2+1];r!==0&&(i[m*2]=q4(o[r]++,r))}}function aI(){var i,e,t,o,l,u=new Array(qf+1);for(t=0,o=0;o<Gg-1;o++)for(Yg[o]=t,i=0;i<1<<K2[o];i++)Jd[t++]=o;for(Jd[t-1]=o,l=0,o=0;o<16;o++)for(A1[o]=l,i=0;i<1<<s1[o];i++)Kd[l++]=o;for(l>>=7;o<K0;o++)for(A1[o]=l<<7,i=0;i<1<<s1[o]-7;i++)Kd[256+l++]=o;for(e=0;e<=qf;e++)u[e]=0;for(i=0;i<=143;)kh[i*2+1]=8,i++,u[8]++;for(;i<=255;)kh[i*2+1]=9,i++,u[9]++;for(;i<=279;)kh[i*2+1]=7,i++,u[7]++;for(;i<=287;)kh[i*2+1]=8,i++,u[8]++;for(H4(kh,Zd+1,u),i=0;i<K0;i++)Fd[i*2+1]=5,Fd[i*2]=q4(i,5);N4=new a2(kh,K2,op+1,Zd,qf),j4=new a2(Fd,s1,0,K0,qf),U4=new a2(new Array(0),nI,0,Wg,iI)}function G4(i){var e;for(e=0;e<Zd;e++)i.dyn_ltree[e*2]=0;for(e=0;e<K0;e++)i.dyn_dtree[e*2]=0;for(e=0;e<Wg;e++)i.bl_tree[e*2]=0;i.dyn_ltree[Xg*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function W4(i){i.bi_valid>8?Qd(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function lI(i,e,t,o){W4(i),o&&(Qd(i,t),Qd(i,~t)),ZE.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function bv(i,e,t,o){var l=e*2,u=t*2;return i[l]<i[u]||i[l]===i[u]&&o[e]<=o[t]}function u2(i,e,t){for(var o=i.heap[t],l=t<<1;l<=i.heap_len&&(l<i.heap_len&&bv(e,i.heap[l+1],i.heap[l],i.depth)&&l++,!bv(e,o,i.heap[l],i.depth));)i.heap[t]=i.heap[l],t=l,l<<=1;i.heap[t]=o}function wv(i,e,t){var o,l,u=0,m,r;if(i.last_lit!==0)do o=i.pending_buf[i.d_buf+u*2]<<8|i.pending_buf[i.d_buf+u*2+1],l=i.pending_buf[i.l_buf+u],u++,o===0?Jc(i,l,e):(m=Jd[l],Jc(i,m+op+1,e),r=K2[m],r!==0&&(l-=Yg[m],ru(i,l,r)),o--,m=V4(o),Jc(i,m,t),r=s1[m],r!==0&&(o-=A1[m],ru(i,o,r)));while(u<i.last_lit);Jc(i,Xg,e)}function J2(i,e){var t=e.dyn_tree,o=e.stat_desc.static_tree,l=e.stat_desc.has_stree,u=e.stat_desc.elems,m,r,f=-1,_;for(i.heap_len=0,i.heap_max=O4,m=0;m<u;m++)t[m*2]!==0?(i.heap[++i.heap_len]=f=m,i.depth[m]=0):t[m*2+1]=0;for(;i.heap_len<2;)_=i.heap[++i.heap_len]=f<2?++f:0,t[_*2]=1,i.depth[_]=0,i.opt_len--,l&&(i.static_len-=o[_*2+1]);for(e.max_code=f,m=i.heap_len>>1;m>=1;m--)u2(i,t,m);_=u;do m=i.heap[1],i.heap[1]=i.heap[i.heap_len--],u2(i,t,1),r=i.heap[1],i.heap[--i.heap_max]=m,i.heap[--i.heap_max]=r,t[_*2]=t[m*2]+t[r*2],i.depth[_]=(i.depth[m]>=i.depth[r]?i.depth[m]:i.depth[r])+1,t[m*2+1]=t[r*2+1]=_,i.heap[1]=_++,u2(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],sI(i,e),H4(t,f,i.bl_count)}function xv(i,e,t){var o,l=-1,u,m=e[0*2+1],r=0,f=7,_=4;for(m===0&&(f=138,_=3),e[(t+1)*2+1]=65535,o=0;o<=t;o++)u=m,m=e[(o+1)*2+1],!(++r<f&&u===m)&&(r<_?i.bl_tree[u*2]+=r:u!==0?(u!==l&&i.bl_tree[u*2]++,i.bl_tree[F4*2]++):r<=10?i.bl_tree[R4*2]++:i.bl_tree[B4*2]++,r=0,l=u,m===0?(f=138,_=3):u===m?(f=6,_=3):(f=7,_=4))}function Av(i,e,t){var o,l=-1,u,m=e[0*2+1],r=0,f=7,_=4;for(m===0&&(f=138,_=3),o=0;o<=t;o++)if(u=m,m=e[(o+1)*2+1],!(++r<f&&u===m)){if(r<_)do Jc(i,u,i.bl_tree);while(--r!==0);else u!==0?(u!==l&&(Jc(i,u,i.bl_tree),r--),Jc(i,F4,i.bl_tree),ru(i,r-3,2)):r<=10?(Jc(i,R4,i.bl_tree),ru(i,r-3,3)):(Jc(i,B4,i.bl_tree),ru(i,r-11,7));r=0,l=u,m===0?(f=138,_=3):u===m?(f=6,_=3):(f=7,_=4)}}function uI(i){var e;for(xv(i,i.dyn_ltree,i.l_desc.max_code),xv(i,i.dyn_dtree,i.d_desc.max_code),J2(i,i.bl_desc),e=Wg-1;e>=3&&i.bl_tree[z4[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function cI(i,e,t,o){var l;for(ru(i,e-257,5),ru(i,t-1,5),ru(i,o-4,4),l=0;l<o;l++)ru(i,i.bl_tree[z4[l]*2+1],3);Av(i,i.dyn_ltree,e-1),Av(i,i.dyn_dtree,t-1)}function hI(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return _v;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return vv;for(t=32;t<op;t++)if(i.dyn_ltree[t*2]!==0)return vv;return _v}var kv=!1;function fI(i){kv||(aI(),kv=!0),i.l_desc=new l2(i.dyn_ltree,N4),i.d_desc=new l2(i.dyn_dtree,j4),i.bl_desc=new l2(i.bl_tree,U4),i.bi_buf=0,i.bi_valid=0,G4(i)}function X4(i,e,t,o){ru(i,(QE<<1)+(o?1:0),3),lI(i,e,t,!0)}function dI(i){ru(i,D4<<1,3),Jc(i,Xg,kh),oI(i)}function pI(i,e,t,o){var l,u,m=0;i.level>0?(i.strm.data_type===JE&&(i.strm.data_type=hI(i)),J2(i,i.l_desc),J2(i,i.d_desc),m=uI(i),l=i.opt_len+3+7>>>3,u=i.static_len+3+7>>>3,u<=l&&(l=u)):l=u=t+5,t+4<=l&&e!==-1?X4(i,e,t,o):i.strategy===KE||u===l?(ru(i,(D4<<1)+(o?1:0),3),wv(i,kh,Fd)):(ru(i,($E<<1)+(o?1:0),3),cI(i,i.l_desc.max_code+1,i.d_desc.max_code+1,m+1),wv(i,i.dyn_ltree,i.dyn_dtree)),G4(i),o&&W4(i)}function mI(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(Jd[t]+op+1)*2]++,i.dyn_dtree[V4(e)*2]++),i.last_lit===i.lit_bufsize-1}od._tr_init=fI;od._tr_stored_block=X4;od._tr_flush_block=pI;od._tr_tally=mI;od._tr_align=dI;function gI(i,e,t,o){for(var l=i&65535|0,u=i>>>16&65535|0,m=0;t!==0;){m=t>2e3?2e3:t,t-=m;do l=l+e[o++]|0,u=u+l|0;while(--m);l%=65521,u%=65521}return l|u<<16|0}var Y4=gI;function yI(){for(var i,e=[],t=0;t<256;t++){i=t;for(var o=0;o<8;o++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var _I=yI();function vI(i,e,t,o){var l=_I,u=o+t;i^=-1;for(var m=o;m<u;m++)i=i>>>8^l[(i^e[m])&255];return i^-1}var Z4=vI,Zg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Rl=Mh,Qu=od,K4=Y4,$h=Z4,bI=Zg,r0=0,wI=1,xI=3,lf=4,Sv=5,Qc=0,Cv=1,$u=-2,AI=-3,c2=-5,kI=-1,SI=1,jp=2,CI=3,EI=4,II=0,TI=2,H1=8,LI=9,PI=15,MI=8,DI=29,OI=256,Q2=OI+1+DI,FI=30,RI=19,BI=2*Q2+1,zI=15,Eo=3,of=258,Sc=of+Eo+1,NI=32,G1=42,$2=69,a1=73,l1=91,u1=103,Hf=113,Pd=666,Sa=1,sp=2,Kf=3,ad=4,jI=3;function sf(i,e){return i.msg=bI[e],e}function Ev(i){return(i<<1)-(i>4?9:0)}function nf(i){for(var e=i.length;--e>=0;)i[e]=0}function ef(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(Rl.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function el(i,e){Qu._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,ef(i.strm)}function Vo(i,e){i.pending_buf[i.pending++]=e}function Sd(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function UI(i,e,t,o){var l=i.avail_in;return l>o&&(l=o),l===0?0:(i.avail_in-=l,Rl.arraySet(e,i.input,i.next_in,l,t),i.state.wrap===1?i.adler=K4(i.adler,e,l,t):i.state.wrap===2&&(i.adler=$h(i.adler,e,l,t)),i.next_in+=l,i.total_in+=l,l)}function J4(i,e){var t=i.max_chain_length,o=i.strstart,l,u,m=i.prev_length,r=i.nice_match,f=i.strstart>i.w_size-Sc?i.strstart-(i.w_size-Sc):0,_=i.window,w=i.w_mask,b=i.prev,x=i.strstart+of,v=_[o+m-1],C=_[o+m];i.prev_length>=i.good_match&&(t>>=2),r>i.lookahead&&(r=i.lookahead);do if(l=e,!(_[l+m]!==C||_[l+m-1]!==v||_[l]!==_[o]||_[++l]!==_[o+1])){o+=2,l++;do;while(_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&o<x);if(u=of-(x-o),o=x-of,u>m){if(i.match_start=e,m=u,u>=r)break;v=_[o+m-1],C=_[o+m]}}while((e=b[e&w])>f&&--t!==0);return m<=i.lookahead?m:i.lookahead}function Jf(i){var e=i.w_size,t,o,l,u,m;do{if(u=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-Sc)){Rl.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,o=i.hash_size,t=o;do l=i.head[--t],i.head[t]=l>=e?l-e:0;while(--o);o=e,t=o;do l=i.prev[--t],i.prev[t]=l>=e?l-e:0;while(--o);u+=e}if(i.strm.avail_in===0)break;if(o=UI(i.strm,i.window,i.strstart+i.lookahead,u),i.lookahead+=o,i.lookahead+i.insert>=Eo)for(m=i.strstart-i.insert,i.ins_h=i.window[m],i.ins_h=(i.ins_h<<i.hash_shift^i.window[m+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[m+Eo-1])&i.hash_mask,i.prev[m&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=m,m++,i.insert--,!(i.lookahead+i.insert<Eo)););}while(i.lookahead<Sc&&i.strm.avail_in!==0)}function VI(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Jf(i),i.lookahead===0&&e===r0)return Sa;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var o=i.block_start+t;if((i.strstart===0||i.strstart>=o)&&(i.lookahead=i.strstart-o,i.strstart=o,el(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-Sc&&(el(i,!1),i.strm.avail_out===0))return Sa}return i.insert=0,e===lf?(el(i,!0),i.strm.avail_out===0?Kf:ad):(i.strstart>i.block_start&&(el(i,!1),i.strm.avail_out===0),Sa)}function h2(i,e){for(var t,o;;){if(i.lookahead<Sc){if(Jf(i),i.lookahead<Sc&&e===r0)return Sa;if(i.lookahead===0)break}if(t=0,i.lookahead>=Eo&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Eo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-Sc&&(i.match_length=J4(i,t)),i.match_length>=Eo)if(o=Qu._tr_tally(i,i.strstart-i.match_start,i.match_length-Eo),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Eo){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Eo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else o=Qu._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(o&&(el(i,!1),i.strm.avail_out===0))return Sa}return i.insert=i.strstart<Eo-1?i.strstart:Eo-1,e===lf?(el(i,!0),i.strm.avail_out===0?Kf:ad):i.last_lit&&(el(i,!1),i.strm.avail_out===0)?Sa:sp}function S0(i,e){for(var t,o,l;;){if(i.lookahead<Sc){if(Jf(i),i.lookahead<Sc&&e===r0)return Sa;if(i.lookahead===0)break}if(t=0,i.lookahead>=Eo&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Eo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Eo-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-Sc&&(i.match_length=J4(i,t),i.match_length<=5&&(i.strategy===SI||i.match_length===Eo&&i.strstart-i.match_start>4096)&&(i.match_length=Eo-1)),i.prev_length>=Eo&&i.match_length<=i.prev_length){l=i.strstart+i.lookahead-Eo,o=Qu._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Eo),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=l&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Eo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Eo-1,i.strstart++,o&&(el(i,!1),i.strm.avail_out===0))return Sa}else if(i.match_available){if(o=Qu._tr_tally(i,0,i.window[i.strstart-1]),o&&el(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Sa}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(o=Qu._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Eo-1?i.strstart:Eo-1,e===lf?(el(i,!0),i.strm.avail_out===0?Kf:ad):i.last_lit&&(el(i,!1),i.strm.avail_out===0)?Sa:sp}function qI(i,e){for(var t,o,l,u,m=i.window;;){if(i.lookahead<=of){if(Jf(i),i.lookahead<=of&&e===r0)return Sa;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Eo&&i.strstart>0&&(l=i.strstart-1,o=m[l],o===m[++l]&&o===m[++l]&&o===m[++l])){u=i.strstart+of;do;while(o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&l<u);i.match_length=of-(u-l),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Eo?(t=Qu._tr_tally(i,1,i.match_length-Eo),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=Qu._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(el(i,!1),i.strm.avail_out===0))return Sa}return i.insert=0,e===lf?(el(i,!0),i.strm.avail_out===0?Kf:ad):i.last_lit&&(el(i,!1),i.strm.avail_out===0)?Sa:sp}function HI(i,e){for(var t;;){if(i.lookahead===0&&(Jf(i),i.lookahead===0)){if(e===r0)return Sa;break}if(i.match_length=0,t=Qu._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(el(i,!1),i.strm.avail_out===0))return Sa}return i.insert=0,e===lf?(el(i,!0),i.strm.avail_out===0?Kf:ad):i.last_lit&&(el(i,!1),i.strm.avail_out===0)?Sa:sp}function Hc(i,e,t,o,l){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=o,this.func=l}var j0;j0=[new Hc(0,0,0,0,VI),new Hc(4,4,8,4,h2),new Hc(4,5,16,8,h2),new Hc(4,6,32,32,h2),new Hc(4,4,16,16,S0),new Hc(8,16,32,32,S0),new Hc(8,16,128,128,S0),new Hc(8,32,128,256,S0),new Hc(32,128,258,1024,S0),new Hc(32,258,258,4096,S0)];function GI(i){i.window_size=2*i.w_size,nf(i.head),i.max_lazy_match=j0[i.level].max_lazy,i.good_match=j0[i.level].good_length,i.nice_match=j0[i.level].nice_length,i.max_chain_length=j0[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Eo-1,i.match_available=0,i.ins_h=0}function WI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Rl.Buf16(BI*2),this.dyn_dtree=new Rl.Buf16((2*FI+1)*2),this.bl_tree=new Rl.Buf16((2*RI+1)*2),nf(this.dyn_ltree),nf(this.dyn_dtree),nf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Rl.Buf16(zI+1),this.heap=new Rl.Buf16(2*Q2+1),nf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Rl.Buf16(2*Q2+1),nf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Q4(i){var e;return!i||!i.state?sf(i,$u):(i.total_in=i.total_out=0,i.data_type=TI,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?G1:Hf,i.adler=e.wrap===2?0:1,e.last_flush=r0,Qu._tr_init(e),Qc)}function $4(i){var e=Q4(i);return e===Qc&&GI(i.state),e}function XI(i,e){return!i||!i.state||i.state.wrap!==2?$u:(i.state.gzhead=e,Qc)}function e3(i,e,t,o,l,u){if(!i)return $u;var m=1;if(e===kI&&(e=6),o<0?(m=0,o=-o):o>15&&(m=2,o-=16),l<1||l>LI||t!==H1||o<8||o>15||e<0||e>9||u<0||u>EI)return sf(i,$u);o===8&&(o=9);var r=new WI;return i.state=r,r.strm=i,r.wrap=m,r.gzhead=null,r.w_bits=o,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=l+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+Eo-1)/Eo),r.window=new Rl.Buf8(r.w_size*2),r.head=new Rl.Buf16(r.hash_size),r.prev=new Rl.Buf16(r.w_size),r.lit_bufsize=1<<l+6,r.pending_buf_size=r.lit_bufsize*4,r.pending_buf=new Rl.Buf8(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=(1+2)*r.lit_bufsize,r.level=e,r.strategy=u,r.method=t,$4(i)}function YI(i,e){return e3(i,e,H1,PI,MI,II)}function ZI(i,e){var t,o,l,u;if(!i||!i.state||e>Sv||e<0)return i?sf(i,$u):$u;if(o=i.state,!i.output||!i.input&&i.avail_in!==0||o.status===Pd&&e!==lf)return sf(i,i.avail_out===0?c2:$u);if(o.strm=i,t=o.last_flush,o.last_flush=e,o.status===G1)if(o.wrap===2)i.adler=0,Vo(o,31),Vo(o,139),Vo(o,8),o.gzhead?(Vo(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Vo(o,o.gzhead.time&255),Vo(o,o.gzhead.time>>8&255),Vo(o,o.gzhead.time>>16&255),Vo(o,o.gzhead.time>>24&255),Vo(o,o.level===9?2:o.strategy>=jp||o.level<2?4:0),Vo(o,o.gzhead.os&255),o.gzhead.extra&&o.gzhead.extra.length&&(Vo(o,o.gzhead.extra.length&255),Vo(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(i.adler=$h(i.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=$2):(Vo(o,0),Vo(o,0),Vo(o,0),Vo(o,0),Vo(o,0),Vo(o,o.level===9?2:o.strategy>=jp||o.level<2?4:0),Vo(o,jI),o.status=Hf);else{var m=H1+(o.w_bits-8<<4)<<8,r=-1;o.strategy>=jp||o.level<2?r=0:o.level<6?r=1:o.level===6?r=2:r=3,m|=r<<6,o.strstart!==0&&(m|=NI),m+=31-m%31,o.status=Hf,Sd(o,m),o.strstart!==0&&(Sd(o,i.adler>>>16),Sd(o,i.adler&65535)),i.adler=1}if(o.status===$2)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(o.gzhead.extra.length&65535)&&!(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=$h(i.adler,o.pending_buf,o.pending-l,l)),ef(i),l=o.pending,o.pending===o.pending_buf_size));)Vo(o,o.gzhead.extra[o.gzindex]&255),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(i.adler=$h(i.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=a1)}else o.status=a1;if(o.status===a1)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=$h(i.adler,o.pending_buf,o.pending-l,l)),ef(i),l=o.pending,o.pending===o.pending_buf_size)){u=1;break}o.gzindex<o.gzhead.name.length?u=o.gzhead.name.charCodeAt(o.gzindex++)&255:u=0,Vo(o,u)}while(u!==0);o.gzhead.hcrc&&o.pending>l&&(i.adler=$h(i.adler,o.pending_buf,o.pending-l,l)),u===0&&(o.gzindex=0,o.status=l1)}else o.status=l1;if(o.status===l1)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=$h(i.adler,o.pending_buf,o.pending-l,l)),ef(i),l=o.pending,o.pending===o.pending_buf_size)){u=1;break}o.gzindex<o.gzhead.comment.length?u=o.gzhead.comment.charCodeAt(o.gzindex++)&255:u=0,Vo(o,u)}while(u!==0);o.gzhead.hcrc&&o.pending>l&&(i.adler=$h(i.adler,o.pending_buf,o.pending-l,l)),u===0&&(o.status=u1)}else o.status=u1;if(o.status===u1&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&ef(i),o.pending+2<=o.pending_buf_size&&(Vo(o,i.adler&255),Vo(o,i.adler>>8&255),i.adler=0,o.status=Hf)):o.status=Hf),o.pending!==0){if(ef(i),i.avail_out===0)return o.last_flush=-1,Qc}else if(i.avail_in===0&&Ev(e)<=Ev(t)&&e!==lf)return sf(i,c2);if(o.status===Pd&&i.avail_in!==0)return sf(i,c2);if(i.avail_in!==0||o.lookahead!==0||e!==r0&&o.status!==Pd){var f=o.strategy===jp?HI(o,e):o.strategy===CI?qI(o,e):j0[o.level].func(o,e);if((f===Kf||f===ad)&&(o.status=Pd),f===Sa||f===Kf)return i.avail_out===0&&(o.last_flush=-1),Qc;if(f===sp&&(e===wI?Qu._tr_align(o):e!==Sv&&(Qu._tr_stored_block(o,0,0,!1),e===xI&&(nf(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),ef(i),i.avail_out===0))return o.last_flush=-1,Qc}return e!==lf?Qc:o.wrap<=0?Cv:(o.wrap===2?(Vo(o,i.adler&255),Vo(o,i.adler>>8&255),Vo(o,i.adler>>16&255),Vo(o,i.adler>>24&255),Vo(o,i.total_in&255),Vo(o,i.total_in>>8&255),Vo(o,i.total_in>>16&255),Vo(o,i.total_in>>24&255)):(Sd(o,i.adler>>>16),Sd(o,i.adler&65535)),ef(i),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?Qc:Cv)}function KI(i){var e;return!i||!i.state?$u:(e=i.state.status,e!==G1&&e!==$2&&e!==a1&&e!==l1&&e!==u1&&e!==Hf&&e!==Pd?sf(i,$u):(i.state=null,e===Hf?sf(i,AI):Qc))}function JI(i,e){var t=e.length,o,l,u,m,r,f,_,w;if(!i||!i.state||(o=i.state,m=o.wrap,m===2||m===1&&o.status!==G1||o.lookahead))return $u;for(m===1&&(i.adler=K4(i.adler,e,t,0)),o.wrap=0,t>=o.w_size&&(m===0&&(nf(o.head),o.strstart=0,o.block_start=0,o.insert=0),w=new Rl.Buf8(o.w_size),Rl.arraySet(w,e,t-o.w_size,o.w_size,0),e=w,t=o.w_size),r=i.avail_in,f=i.next_in,_=i.input,i.avail_in=t,i.next_in=0,i.input=e,Jf(o);o.lookahead>=Eo;){l=o.strstart,u=o.lookahead-(Eo-1);do o.ins_h=(o.ins_h<<o.hash_shift^o.window[l+Eo-1])&o.hash_mask,o.prev[l&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=l,l++;while(--u);o.strstart=l,o.lookahead=Eo-1,Jf(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=Eo-1,o.match_available=0,i.next_in=f,i.input=_,i.avail_in=r,o.wrap=m,Qc}oh.deflateInit=YI;oh.deflateInit2=e3;oh.deflateReset=$4;oh.deflateResetKeep=Q4;oh.deflateSetHeader=XI;oh.deflate=ZI;oh.deflateEnd=KI;oh.deflateSetDictionary=JI;oh.deflateInfo="pako deflate (from Nodeca project)";var o0={},W1=Mh,t3=!0,i3=!0;try{String.fromCharCode.apply(null,[0])}catch{t3=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i3=!1}var $d=new W1.Buf8(256);for(var Kh=0;Kh<256;Kh++)$d[Kh]=Kh>=252?6:Kh>=248?5:Kh>=240?4:Kh>=224?3:Kh>=192?2:1;$d[254]=$d[254]=1;o0.string2buf=function(i){var e,t,o,l,u,m=i.length,r=0;for(l=0;l<m;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<m&&(o=i.charCodeAt(l+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),l++)),r+=t<128?1:t<2048?2:t<65536?3:4;for(e=new W1.Buf8(r),u=0,l=0;u<r;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<m&&(o=i.charCodeAt(l+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),l++)),t<128?e[u++]=t:t<2048?(e[u++]=192|t>>>6,e[u++]=128|t&63):t<65536?(e[u++]=224|t>>>12,e[u++]=128|t>>>6&63,e[u++]=128|t&63):(e[u++]=240|t>>>18,e[u++]=128|t>>>12&63,e[u++]=128|t>>>6&63,e[u++]=128|t&63);return e};function n3(i,e){if(e<65534&&(i.subarray&&i3||!i.subarray&&t3))return String.fromCharCode.apply(null,W1.shrinkBuf(i,e));for(var t="",o=0;o<e;o++)t+=String.fromCharCode(i[o]);return t}o0.buf2binstring=function(i){return n3(i,i.length)};o0.binstring2buf=function(i){for(var e=new W1.Buf8(i.length),t=0,o=e.length;t<o;t++)e[t]=i.charCodeAt(t);return e};o0.buf2string=function(i,e){var t,o,l,u,m=e||i.length,r=new Array(m*2);for(o=0,t=0;t<m;){if(l=i[t++],l<128){r[o++]=l;continue}if(u=$d[l],u>4){r[o++]=65533,t+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&t<m;)l=l<<6|i[t++]&63,u--;if(u>1){r[o++]=65533;continue}l<65536?r[o++]=l:(l-=65536,r[o++]=55296|l>>10&1023,r[o++]=56320|l&1023)}return n3(r,o)};o0.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+$d[i[t]]>e?t:e};function QI(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var r3=QI,Rd=oh,Bd=Mh,eg=o0,tg=Zg,$I=r3,o3=Object.prototype.toString,eT=0,f2=4,J0=0,Iv=1,Tv=2,tT=-1,iT=0,nT=8;function Qf(i){if(!(this instanceof Qf))return new Qf(i);this.options=Bd.assign({level:tT,method:nT,chunkSize:16384,windowBits:15,memLevel:8,strategy:iT,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $I,this.strm.avail_out=0;var t=Rd.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==J0)throw new Error(tg[t]);if(e.header&&Rd.deflateSetHeader(this.strm,e.header),e.dictionary){var o;if(typeof e.dictionary=="string"?o=eg.string2buf(e.dictionary):o3.call(e.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(e.dictionary):o=e.dictionary,t=Rd.deflateSetDictionary(this.strm,o),t!==J0)throw new Error(tg[t]);this._dict_set=!0}}Qf.prototype.push=function(i,e){var t=this.strm,o=this.options.chunkSize,l,u;if(this.ended)return!1;u=e===~~e?e:e===!0?f2:eT,typeof i=="string"?t.input=eg.string2buf(i):o3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Bd.Buf8(o),t.next_out=0,t.avail_out=o),l=Rd.deflate(t,u),l!==Iv&&l!==J0)return this.onEnd(l),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(u===f2||u===Tv))&&(this.options.to==="string"?this.onData(eg.buf2binstring(Bd.shrinkBuf(t.output,t.next_out))):this.onData(Bd.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&l!==Iv);return u===f2?(l=Rd.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===J0):(u===Tv&&(this.onEnd(J0),t.avail_out=0),!0)};Qf.prototype.onData=function(i){this.chunks.push(i)};Qf.prototype.onEnd=function(i){i===J0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Bd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Kg(i,e){var t=new Qf(e);if(t.push(i,!0),t.err)throw t.msg||tg[t.err];return t.result}function rT(i,e){return e=e||{},e.raw=!0,Kg(i,e)}function oT(i,e){return e=e||{},e.gzip=!0,Kg(i,e)}rp.Deflate=Qf;rp.deflate=Kg;rp.deflateRaw=rT;rp.gzip=oT;var ap={},Lc={},Up=30,sT=12,aT=function(e,t){var o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G,Z,te,J,oe,Me,Fe,pe;o=e.state,l=e.next_in,Fe=e.input,u=l+(e.avail_in-5),m=e.next_out,pe=e.output,r=m-(t-e.avail_out),f=m+(e.avail_out-257),_=o.dmax,w=o.wsize,b=o.whave,x=o.wnext,v=o.window,C=o.hold,T=o.bits,S=o.lencode,M=o.distcode,O=(1<<o.lenbits)-1,V=(1<<o.distbits)-1;e:do{T<15&&(C+=Fe[l++]<<T,T+=8,C+=Fe[l++]<<T,T+=8),G=S[C&O];t:for(;;){if(Z=G>>>24,C>>>=Z,T-=Z,Z=G>>>16&255,Z===0)pe[m++]=G&65535;else if(Z&16){te=G&65535,Z&=15,Z&&(T<Z&&(C+=Fe[l++]<<T,T+=8),te+=C&(1<<Z)-1,C>>>=Z,T-=Z),T<15&&(C+=Fe[l++]<<T,T+=8,C+=Fe[l++]<<T,T+=8),G=M[C&V];i:for(;;){if(Z=G>>>24,C>>>=Z,T-=Z,Z=G>>>16&255,Z&16){if(J=G&65535,Z&=15,T<Z&&(C+=Fe[l++]<<T,T+=8,T<Z&&(C+=Fe[l++]<<T,T+=8)),J+=C&(1<<Z)-1,J>_){e.msg="invalid distance too far back",o.mode=Up;break e}if(C>>>=Z,T-=Z,Z=m-r,J>Z){if(Z=J-Z,Z>b&&o.sane){e.msg="invalid distance too far back",o.mode=Up;break e}if(oe=0,Me=v,x===0){if(oe+=w-Z,Z<te){te-=Z;do pe[m++]=v[oe++];while(--Z);oe=m-J,Me=pe}}else if(x<Z){if(oe+=w+x-Z,Z-=x,Z<te){te-=Z;do pe[m++]=v[oe++];while(--Z);if(oe=0,x<te){Z=x,te-=Z;do pe[m++]=v[oe++];while(--Z);oe=m-J,Me=pe}}}else if(oe+=x-Z,Z<te){te-=Z;do pe[m++]=v[oe++];while(--Z);oe=m-J,Me=pe}for(;te>2;)pe[m++]=Me[oe++],pe[m++]=Me[oe++],pe[m++]=Me[oe++],te-=3;te&&(pe[m++]=Me[oe++],te>1&&(pe[m++]=Me[oe++]))}else{oe=m-J;do pe[m++]=pe[oe++],pe[m++]=pe[oe++],pe[m++]=pe[oe++],te-=3;while(te>2);te&&(pe[m++]=pe[oe++],te>1&&(pe[m++]=pe[oe++]))}}else if((Z&64)===0){G=M[(G&65535)+(C&(1<<Z)-1)];continue i}else{e.msg="invalid distance code",o.mode=Up;break e}break}}else if((Z&64)===0){G=S[(G&65535)+(C&(1<<Z)-1)];continue t}else if(Z&32){o.mode=sT;break e}else{e.msg="invalid literal/length code",o.mode=Up;break e}break}}while(l<u&&m<f);te=T>>3,l-=te,T-=te<<3,C&=(1<<T)-1,e.next_in=l,e.next_out=m,e.avail_in=l<u?5+(u-l):5-(l-u),e.avail_out=m<f?257+(f-m):257-(m-f),o.hold=C,o.bits=T},Lv=Mh,C0=15,Pv=852,Mv=592,Dv=0,d2=1,Ov=2,lT=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],uT=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],cT=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],hT=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],fT=function(e,t,o,l,u,m,r,f){var _=f.bits,w=0,b=0,x=0,v=0,C=0,T=0,S=0,M=0,O=0,V=0,G,Z,te,J,oe,Me=null,Fe=0,pe,Ie=new Lv.Buf16(C0+1),Se=new Lv.Buf16(C0+1),me=null,et=0,nt,Et,it;for(w=0;w<=C0;w++)Ie[w]=0;for(b=0;b<l;b++)Ie[t[o+b]]++;for(C=_,v=C0;v>=1&&Ie[v]===0;v--);if(C>v&&(C=v),v===0)return u[m++]=1<<24|64<<16|0,u[m++]=1<<24|64<<16|0,f.bits=1,0;for(x=1;x<v&&Ie[x]===0;x++);for(C<x&&(C=x),M=1,w=1;w<=C0;w++)if(M<<=1,M-=Ie[w],M<0)return-1;if(M>0&&(e===Dv||v!==1))return-1;for(Se[1]=0,w=1;w<C0;w++)Se[w+1]=Se[w]+Ie[w];for(b=0;b<l;b++)t[o+b]!==0&&(r[Se[t[o+b]]++]=b);if(e===Dv?(Me=me=r,pe=19):e===d2?(Me=lT,Fe-=257,me=uT,et-=257,pe=256):(Me=cT,me=hT,pe=-1),V=0,b=0,w=x,oe=m,T=C,S=0,te=-1,O=1<<C,J=O-1,e===d2&&O>Pv||e===Ov&&O>Mv)return 1;for(;;){nt=w-S,r[b]<pe?(Et=0,it=r[b]):r[b]>pe?(Et=me[et+r[b]],it=Me[Fe+r[b]]):(Et=32+64,it=0),G=1<<w-S,Z=1<<T,x=Z;do Z-=G,u[oe+(V>>S)+Z]=nt<<24|Et<<16|it|0;while(Z!==0);for(G=1<<w-1;V&G;)G>>=1;if(G!==0?(V&=G-1,V+=G):V=0,b++,--Ie[w]===0){if(w===v)break;w=t[o+r[b]]}if(w>C&&(V&J)!==te){for(S===0&&(S=C),oe+=x,T=w-S,M=1<<T;T+S<v&&(M-=Ie[T+S],!(M<=0));)T++,M<<=1;if(O+=1<<T,e===d2&&O>Pv||e===Ov&&O>Mv)return 1;te=V&J,u[te]=C<<24|T<<16|oe-m|0}}return V!==0&&(u[oe+V]=w-S<<24|64<<16|0),f.bits=C,0},Pu=Mh,ig=Y4,Gc=Z4,dT=aT,zd=fT,pT=0,s3=1,a3=2,Fv=4,mT=5,Vp=6,$f=0,gT=1,yT=2,tc=-2,l3=-3,u3=-4,_T=-5,Rv=8,c3=1,Bv=2,zv=3,Nv=4,jv=5,Uv=6,Vv=7,qv=8,Hv=9,Gv=10,k1=11,xh=12,p2=13,Wv=14,m2=15,Xv=16,Yv=17,Zv=18,Kv=19,qp=20,Hp=21,Jv=22,Qv=23,$v=24,eb=25,tb=26,g2=27,ib=28,nb=29,Ps=30,h3=31,vT=32,bT=852,wT=592,xT=15,AT=xT;function rb(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function kT(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Pu.Buf16(320),this.work=new Pu.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f3(i){var e;return!i||!i.state?tc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=c3,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Pu.Buf32(bT),e.distcode=e.distdyn=new Pu.Buf32(wT),e.sane=1,e.back=-1,$f)}function d3(i){var e;return!i||!i.state?tc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,f3(i))}function p3(i,e){var t,o;return!i||!i.state||(o=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?tc:(o.window!==null&&o.wbits!==e&&(o.window=null),o.wrap=t,o.wbits=e,d3(i))}function m3(i,e){var t,o;return i?(o=new kT,i.state=o,o.window=null,t=p3(i,e),t!==$f&&(i.state=null),t):tc}function ST(i){return m3(i,AT)}var ob=!0,y2,_2;function CT(i){if(ob){var e;for(y2=new Pu.Buf32(512),_2=new Pu.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(zd(s3,i.lens,0,288,y2,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;zd(a3,i.lens,0,32,_2,0,i.work,{bits:5}),ob=!1}i.lencode=y2,i.lenbits=9,i.distcode=_2,i.distbits=5}function g3(i,e,t,o){var l,u=i.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Pu.Buf8(u.wsize)),o>=u.wsize?(Pu.arraySet(u.window,e,t-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>o&&(l=o),Pu.arraySet(u.window,e,t-o,l,u.wnext),o-=l,o?(Pu.arraySet(u.window,e,t-o,o,0),u.wnext=o,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0}function ET(i,e){var t,o,l,u,m,r,f,_,w,b,x,v,C,T,S=0,M,O,V,G,Z,te,J,oe,Me=new Pu.Buf8(4),Fe,pe,Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return tc;t=i.state,t.mode===xh&&(t.mode=p2),m=i.next_out,l=i.output,f=i.avail_out,u=i.next_in,o=i.input,r=i.avail_in,_=t.hold,w=t.bits,b=r,x=f,oe=$f;e:for(;;)switch(t.mode){case c3:if(t.wrap===0){t.mode=p2;break}for(;w<16;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(t.wrap&2&&_===35615){t.check=0,Me[0]=_&255,Me[1]=_>>>8&255,t.check=Gc(t.check,Me,2,0),_=0,w=0,t.mode=Bv;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((_&255)<<8)+(_>>8))%31){i.msg="incorrect header check",t.mode=Ps;break}if((_&15)!==Rv){i.msg="unknown compression method",t.mode=Ps;break}if(_>>>=4,w-=4,J=(_&15)+8,t.wbits===0)t.wbits=J;else if(J>t.wbits){i.msg="invalid window size",t.mode=Ps;break}t.dmax=1<<J,i.adler=t.check=1,t.mode=_&512?Gv:xh,_=0,w=0;break;case Bv:for(;w<16;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(t.flags=_,(t.flags&255)!==Rv){i.msg="unknown compression method",t.mode=Ps;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Ps;break}t.head&&(t.head.text=_>>8&1),t.flags&512&&(Me[0]=_&255,Me[1]=_>>>8&255,t.check=Gc(t.check,Me,2,0)),_=0,w=0,t.mode=zv;case zv:for(;w<32;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}t.head&&(t.head.time=_),t.flags&512&&(Me[0]=_&255,Me[1]=_>>>8&255,Me[2]=_>>>16&255,Me[3]=_>>>24&255,t.check=Gc(t.check,Me,4,0)),_=0,w=0,t.mode=Nv;case Nv:for(;w<16;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}t.head&&(t.head.xflags=_&255,t.head.os=_>>8),t.flags&512&&(Me[0]=_&255,Me[1]=_>>>8&255,t.check=Gc(t.check,Me,2,0)),_=0,w=0,t.mode=jv;case jv:if(t.flags&1024){for(;w<16;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}t.length=_,t.head&&(t.head.extra_len=_),t.flags&512&&(Me[0]=_&255,Me[1]=_>>>8&255,t.check=Gc(t.check,Me,2,0)),_=0,w=0}else t.head&&(t.head.extra=null);t.mode=Uv;case Uv:if(t.flags&1024&&(v=t.length,v>r&&(v=r),v&&(t.head&&(J=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Pu.arraySet(t.head.extra,o,u,v,J)),t.flags&512&&(t.check=Gc(t.check,o,v,u)),r-=v,u+=v,t.length-=v),t.length))break e;t.length=0,t.mode=Vv;case Vv:if(t.flags&2048){if(r===0)break e;v=0;do J=o[u+v++],t.head&&J&&t.length<65536&&(t.head.name+=String.fromCharCode(J));while(J&&v<r);if(t.flags&512&&(t.check=Gc(t.check,o,v,u)),r-=v,u+=v,J)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=qv;case qv:if(t.flags&4096){if(r===0)break e;v=0;do J=o[u+v++],t.head&&J&&t.length<65536&&(t.head.comment+=String.fromCharCode(J));while(J&&v<r);if(t.flags&512&&(t.check=Gc(t.check,o,v,u)),r-=v,u+=v,J)break e}else t.head&&(t.head.comment=null);t.mode=Hv;case Hv:if(t.flags&512){for(;w<16;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(_!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Ps;break}_=0,w=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=xh;break;case Gv:for(;w<32;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}i.adler=t.check=rb(_),_=0,w=0,t.mode=k1;case k1:if(t.havedict===0)return i.next_out=m,i.avail_out=f,i.next_in=u,i.avail_in=r,t.hold=_,t.bits=w,yT;i.adler=t.check=1,t.mode=xh;case xh:if(e===mT||e===Vp)break e;case p2:if(t.last){_>>>=w&7,w-=w&7,t.mode=g2;break}for(;w<3;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}switch(t.last=_&1,_>>>=1,w-=1,_&3){case 0:t.mode=Wv;break;case 1:if(CT(t),t.mode=qp,e===Vp){_>>>=2,w-=2;break e}break;case 2:t.mode=Yv;break;case 3:i.msg="invalid block type",t.mode=Ps}_>>>=2,w-=2;break;case Wv:for(_>>>=w&7,w-=w&7;w<32;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if((_&65535)!==(_>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Ps;break}if(t.length=_&65535,_=0,w=0,t.mode=m2,e===Vp)break e;case m2:t.mode=Xv;case Xv:if(v=t.length,v){if(v>r&&(v=r),v>f&&(v=f),v===0)break e;Pu.arraySet(l,o,u,v,m),r-=v,u+=v,f-=v,m+=v,t.length-=v;break}t.mode=xh;break;case Yv:for(;w<14;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(t.nlen=(_&31)+257,_>>>=5,w-=5,t.ndist=(_&31)+1,_>>>=5,w-=5,t.ncode=(_&15)+4,_>>>=4,w-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Ps;break}t.have=0,t.mode=Zv;case Zv:for(;t.have<t.ncode;){for(;w<3;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}t.lens[Ie[t.have++]]=_&7,_>>>=3,w-=3}for(;t.have<19;)t.lens[Ie[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Fe={bits:t.lenbits},oe=zd(pT,t.lens,0,19,t.lencode,0,t.work,Fe),t.lenbits=Fe.bits,oe){i.msg="invalid code lengths set",t.mode=Ps;break}t.have=0,t.mode=Kv;case Kv:for(;t.have<t.nlen+t.ndist;){for(;S=t.lencode[_&(1<<t.lenbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=w);){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(V<16)_>>>=M,w-=M,t.lens[t.have++]=V;else{if(V===16){for(pe=M+2;w<pe;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(_>>>=M,w-=M,t.have===0){i.msg="invalid bit length repeat",t.mode=Ps;break}J=t.lens[t.have-1],v=3+(_&3),_>>>=2,w-=2}else if(V===17){for(pe=M+3;w<pe;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}_>>>=M,w-=M,J=0,v=3+(_&7),_>>>=3,w-=3}else{for(pe=M+7;w<pe;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}_>>>=M,w-=M,J=0,v=11+(_&127),_>>>=7,w-=7}if(t.have+v>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Ps;break}for(;v--;)t.lens[t.have++]=J}}if(t.mode===Ps)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Ps;break}if(t.lenbits=9,Fe={bits:t.lenbits},oe=zd(s3,t.lens,0,t.nlen,t.lencode,0,t.work,Fe),t.lenbits=Fe.bits,oe){i.msg="invalid literal/lengths set",t.mode=Ps;break}if(t.distbits=6,t.distcode=t.distdyn,Fe={bits:t.distbits},oe=zd(a3,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Fe),t.distbits=Fe.bits,oe){i.msg="invalid distances set",t.mode=Ps;break}if(t.mode=qp,e===Vp)break e;case qp:t.mode=Hp;case Hp:if(r>=6&&f>=258){i.next_out=m,i.avail_out=f,i.next_in=u,i.avail_in=r,t.hold=_,t.bits=w,dT(i,x),m=i.next_out,l=i.output,f=i.avail_out,u=i.next_in,o=i.input,r=i.avail_in,_=t.hold,w=t.bits,t.mode===xh&&(t.back=-1);break}for(t.back=0;S=t.lencode[_&(1<<t.lenbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=w);){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(O&&(O&240)===0){for(G=M,Z=O,te=V;S=t.lencode[te+((_&(1<<G+Z)-1)>>G)],M=S>>>24,O=S>>>16&255,V=S&65535,!(G+M<=w);){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}_>>>=G,w-=G,t.back+=G}if(_>>>=M,w-=M,t.back+=M,t.length=V,O===0){t.mode=tb;break}if(O&32){t.back=-1,t.mode=xh;break}if(O&64){i.msg="invalid literal/length code",t.mode=Ps;break}t.extra=O&15,t.mode=Jv;case Jv:if(t.extra){for(pe=t.extra;w<pe;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}t.length+=_&(1<<t.extra)-1,_>>>=t.extra,w-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Qv;case Qv:for(;S=t.distcode[_&(1<<t.distbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=w);){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if((O&240)===0){for(G=M,Z=O,te=V;S=t.distcode[te+((_&(1<<G+Z)-1)>>G)],M=S>>>24,O=S>>>16&255,V=S&65535,!(G+M<=w);){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}_>>>=G,w-=G,t.back+=G}if(_>>>=M,w-=M,t.back+=M,O&64){i.msg="invalid distance code",t.mode=Ps;break}t.offset=V,t.extra=O&15,t.mode=$v;case $v:if(t.extra){for(pe=t.extra;w<pe;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}t.offset+=_&(1<<t.extra)-1,_>>>=t.extra,w-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Ps;break}t.mode=eb;case eb:if(f===0)break e;if(v=x-f,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Ps;break}v>t.wnext?(v-=t.wnext,C=t.wsize-v):C=t.wnext-v,v>t.length&&(v=t.length),T=t.window}else T=l,C=m-t.offset,v=t.length;v>f&&(v=f),f-=v,t.length-=v;do l[m++]=T[C++];while(--v);t.length===0&&(t.mode=Hp);break;case tb:if(f===0)break e;l[m++]=t.length,f--,t.mode=Hp;break;case g2:if(t.wrap){for(;w<32;){if(r===0)break e;r--,_|=o[u++]<<w,w+=8}if(x-=f,i.total_out+=x,t.total+=x,x&&(i.adler=t.check=t.flags?Gc(t.check,l,x,m-x):ig(t.check,l,x,m-x)),x=f,(t.flags?_:rb(_))!==t.check){i.msg="incorrect data check",t.mode=Ps;break}_=0,w=0}t.mode=ib;case ib:if(t.wrap&&t.flags){for(;w<32;){if(r===0)break e;r--,_+=o[u++]<<w,w+=8}if(_!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Ps;break}_=0,w=0}t.mode=nb;case nb:oe=gT;break e;case Ps:oe=l3;break e;case h3:return u3;case vT:default:return tc}return i.next_out=m,i.avail_out=f,i.next_in=u,i.avail_in=r,t.hold=_,t.bits=w,(t.wsize||x!==i.avail_out&&t.mode<Ps&&(t.mode<g2||e!==Fv))&&g3(i,i.output,i.next_out,x-i.avail_out),b-=i.avail_in,x-=i.avail_out,i.total_in+=b,i.total_out+=x,t.total+=x,t.wrap&&x&&(i.adler=t.check=t.flags?Gc(t.check,l,x,i.next_out-x):ig(t.check,l,x,i.next_out-x)),i.data_type=t.bits+(t.last?64:0)+(t.mode===xh?128:0)+(t.mode===qp||t.mode===m2?256:0),(b===0&&x===0||e===Fv)&&oe===$f&&(oe=_T),oe}function IT(i){if(!i||!i.state)return tc;var e=i.state;return e.window&&(e.window=null),i.state=null,$f}function TT(i,e){var t;return!i||!i.state||(t=i.state,(t.wrap&2)===0)?tc:(t.head=e,e.done=!1,$f)}function LT(i,e){var t=e.length,o,l,u;return!i||!i.state||(o=i.state,o.wrap!==0&&o.mode!==k1)?tc:o.mode===k1&&(l=1,l=ig(l,e,t,0),l!==o.check)?l3:(u=g3(i,e,t,t),u?(o.mode=h3,u3):(o.havedict=1,$f))}Lc.inflateReset=d3;Lc.inflateReset2=p3;Lc.inflateResetKeep=f3;Lc.inflateInit=ST;Lc.inflateInit2=m3;Lc.inflate=ET;Lc.inflateEnd=IT;Lc.inflateGetHeader=TT;Lc.inflateSetDictionary=LT;Lc.inflateInfo="pako inflate (from Nodeca project)";var y3={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function PT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MT=PT,Q0=Lc,Nd=Mh,c1=o0,ta=y3,ng=Zg,DT=r3,OT=MT,_3=Object.prototype.toString;function e0(i){if(!(this instanceof e0))return new e0(i);this.options=Nd.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DT,this.strm.avail_out=0;var t=Q0.inflateInit2(this.strm,e.windowBits);if(t!==ta.Z_OK)throw new Error(ng[t]);if(this.header=new OT,Q0.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=c1.string2buf(e.dictionary):_3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Q0.inflateSetDictionary(this.strm,e.dictionary),t!==ta.Z_OK)))throw new Error(ng[t])}e0.prototype.push=function(i,e){var t=this.strm,o=this.options.chunkSize,l=this.options.dictionary,u,m,r,f,_,w=!1;if(this.ended)return!1;m=e===~~e?e:e===!0?ta.Z_FINISH:ta.Z_NO_FLUSH,typeof i=="string"?t.input=c1.binstring2buf(i):_3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Nd.Buf8(o),t.next_out=0,t.avail_out=o),u=Q0.inflate(t,ta.Z_NO_FLUSH),u===ta.Z_NEED_DICT&&l&&(u=Q0.inflateSetDictionary(this.strm,l)),u===ta.Z_BUF_ERROR&&w===!0&&(u=ta.Z_OK,w=!1),u!==ta.Z_STREAM_END&&u!==ta.Z_OK)return this.onEnd(u),this.ended=!0,!1;t.next_out&&(t.avail_out===0||u===ta.Z_STREAM_END||t.avail_in===0&&(m===ta.Z_FINISH||m===ta.Z_SYNC_FLUSH))&&(this.options.to==="string"?(r=c1.utf8border(t.output,t.next_out),f=t.next_out-r,_=c1.buf2string(t.output,r),t.next_out=f,t.avail_out=o-f,f&&Nd.arraySet(t.output,t.output,r,f,0),this.onData(_)):this.onData(Nd.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(w=!0)}while((t.avail_in>0||t.avail_out===0)&&u!==ta.Z_STREAM_END);return u===ta.Z_STREAM_END&&(m=ta.Z_FINISH),m===ta.Z_FINISH?(u=Q0.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===ta.Z_OK):(m===ta.Z_SYNC_FLUSH&&(this.onEnd(ta.Z_OK),t.avail_out=0),!0)};e0.prototype.onData=function(i){this.chunks.push(i)};e0.prototype.onEnd=function(i){i===ta.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Nd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Jg(i,e){var t=new e0(e);if(t.push(i,!0),t.err)throw t.msg||ng[t.err];return t.result}function FT(i,e){return e=e||{},e.raw=!0,Jg(i,e)}ap.Inflate=e0;ap.inflate=Jg;ap.inflateRaw=FT;ap.ungzip=Jg;var RT=Mh.assign,BT=rp,zT=ap,NT=y3,v3={};RT(v3,BT,zT,NT);var jT=v3,UT=function(){function i(e){var t=this;this.decode=function(){var v=new Uint8Array(t.width*t.height*4),C=t.decodePixels();return t.copyImageDataToBuffer(v,C),v},this.copyImageDataToBuffer=function(v,C){var T=t.colors,S,M=t.hasAlphaChannel;t.palette.length&&(S=t.decodePalette(),T=4,M=!0);var O=v,V=O.length,G=S||C,Z=0,te=0;if(T===1)for(;Z<V;){var J=S?C[Z/4]*4:te,oe=G[J++];O[Z++]=oe,O[Z++]=oe,O[Z++]=oe,O[Z++]=M?G[J++]:255,te=J}else for(;Z<V;){var J=S?C[Z/4]*4:te;O[Z++]=G[J++],O[Z++]=G[J++],O[Z++]=G[J++],O[Z++]=M?G[J++]:255,te=J}},this.decodePixels=function(){for(var v=jT.inflate(t.imgData),C=t.pixelBitlength/8,T=C*t.width,S=new Uint8Array(T*t.height),M=v.length,O=0,V=0,G=0;V<M;){switch(v[V++]){case 0:{for(var Z=0;Z<T;Z++)S[G++]=v[V++];break}case 1:{for(var Z=0;Z<T;Z++){var te=v[V++],J=Z<C?0:S[G-C];S[G++]=(te+J)%256}break}case 2:{for(var Z=0;Z<T;Z++){var te=v[V++],oe=(Z-Z%C)/C,Me=(O-1)*T+oe*C+Z%C,Fe=O&&S[Me];S[G++]=(Fe+te)%256}break}case 3:{for(var Z=0;Z<T;Z++){var te=v[V++],oe=(Z-Z%C)/C,J=Z<C?0:S[G-C],Me=(O-1)*T+oe*C+Z%C,Fe=O&&S[Me];S[G++]=(te+Math.floor((J+Fe)/2))%256}break}case 4:{for(var Z=0;Z<T;Z++){var te=v[V++],oe=(Z-Z%C)/C,J=Z<C?0:S[G-C],Fe=void 0,pe=void 0;if(O===0)Fe=pe=0;else{var Ie=(O-1)*T+oe*C+Z%C,Se=(O-1)*T+(oe-1)*C+Z%C;Fe=S[Ie],pe=oe&&S[Se]}var me=J+Fe-pe,et=Math.abs(me-J),nt=Math.abs(me-Fe),Et=Math.abs(me-pe),it=void 0;et<=nt&&et<=Et?it=J:nt<=Et?it=Fe:it=pe,S[G++]=(te+it)%256}break}default:throw new Error("Invalid filter algorithm: "+v[V-1])}O++}return S},this.read=function(v){for(var C=[],T=0;T<v;T++)C[T]=t.data[t.pos++];return C},this.readUInt32=function(){var v=t.data[t.pos++]<<24,C=t.data[t.pos++]<<16,T=t.data[t.pos++]<<8,S=t.data[t.pos++];return v|C|T|S},this.decodePalette=function(){for(var v=t.palette,C=t.transparency.indexed||[],T=new Uint8Array(C.length+v.length),S=0,M=0,O=0;O<v.length;O++){T[S++]=v[O],T[S++]=v[O+1],T[S++]=v[O+2];var V=C[M++];T[S++]=V!==void 0?V:255}return T},this.data=e,this.pos=8,this.palette=[];var o=[];for(this.transparency={},this.text={};;){for(var l=this.readUInt32(),u="",m=0;m<4;m++)u+=String.fromCharCode(this.data[this.pos++]);switch(u){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(l);break}case"IDAT":{for(var m=0;m<l;m++)o.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{this.transparency.indexed=this.read(l);var r=255-this.transparency.indexed.length;if(r>0)for(var m=0;m<255;m++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(l)[0];break}case 2:{this.transparency.rgb=this.read(l);break}}break}case"tEXt":{var f=this.read(l),_=f.indexOf(0),w=String.fromCharCode.apply(String,f.slice(0,_));this.text[w]=String.fromCharCode.apply(String,f.slice(_+1));break}case"IEND":{var b={0:1,3:1,4:1,2:3,6:3};this.colors=b[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);var x=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*x,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(o);return}default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return i.load=function(e){return new i(e)},i}();const rg=";base64,",VT=i=>i.indexOf(rg)>-1,qT=i=>{const e=i.indexOf(rg)+rg.length,t=i.substring(e),o=window.atob(t),l=o.length,u=new Uint8Array(new ArrayBuffer(l));for(let m=0;m<l;m++)u[m]=o.charCodeAt(m);return u};async function HT(){const i=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],e=o=>new Promise((l,u)=>{var m=document.createElement("img");m.onerror=r=>l(!1),m.onload=()=>l(!0),m.src=o});return(await Promise.all(i.map(e))).every(o=>!!o)}class GT extends Error{}async function b3(i){return new Promise((e,t)=>{const o=new XMLHttpRequest;o.open("GET",i),o.responseType="arraybuffer";const l=()=>{t(new GT(`failed to load binary data, code "${o.status}" from "${i}"`))};o.onerror=l,o.onreadystatechange=()=>{o.readyState==4&&(o.status==200?e(new Uint8Array(o.response)):l())},o.send()})}function WT(){var i=typeof i<"u"?i:{},e=function(){function U(){}function $(yi,_i){return function(){yi.apply(_i,arguments)}}function ye(yi){if(!(this instanceof ye))throw new TypeError("Promises must be constructed via new");if(typeof yi!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],bi(yi,this)}function De(yi,_i){for(;yi._state===3;)yi=yi._value;if(yi._state===0){yi._deferreds.push(_i);return}yi._handled=!0,ye._immediateFn(function(){var ui=yi._state===1?_i.onFulfilled:_i.onRejected;if(ui===null){(yi._state===1?rt:Ct)(_i.promise,yi._value);return}var ji;try{ji=ui(yi._value)}catch(on){Ct(_i.promise,on);return}rt(_i.promise,ji)})}function rt(yi,_i){try{if(_i===yi)throw new TypeError("A promise cannot be resolved with itself.");if(_i&&(typeof _i=="object"||typeof _i=="function")){var ui=_i.then;if(_i instanceof ye){yi._state=3,yi._value=_i,Ut(yi);return}else if(typeof ui=="function"){bi($(ui,_i),yi);return}}yi._state=1,yi._value=_i,Ut(yi)}catch(ji){Ct(yi,ji)}}function Ct(yi,_i){yi._state=2,yi._value=_i,Ut(yi)}function Ut(yi){yi._state===2&&yi._deferreds.length===0&&ye._immediateFn(function(){yi._handled||ye._unhandledRejectionFn(yi._value)});for(var _i=0,ui=yi._deferreds.length;_i<ui;_i++)De(yi,yi._deferreds[_i]);yi._deferreds=null}function Bt(yi,_i,ui){this.onFulfilled=typeof yi=="function"?yi:null,this.onRejected=typeof _i=="function"?_i:null,this.promise=ui}function bi(yi,_i){var ui=!1;try{yi(function(ji){ui||(ui=!0,rt(_i,ji))},function(ji){ui||(ui=!0,Ct(_i,ji))})}catch(ji){if(ui)return;ui=!0,Ct(_i,ji)}}return ye.prototype.catch=function(yi){return this.then(null,yi)},ye.prototype.then=function(yi,_i){var ui=new this.constructor(U);return De(this,new Bt(yi,_i,ui)),ui},ye.all=function(yi){return new ye(function(_i,ui){if(!Array.isArray(yi))return ui(new TypeError("Promise.all accepts an array"));var ji=Array.prototype.slice.call(yi);if(ji.length===0)return _i([]);var on=ji.length;function Cn(p,Di){try{if(Di&&(typeof Di=="object"||typeof Di=="function")){var c=Di.then;if(typeof c=="function"){c.call(Di,function(F){Cn(p,F)},ui);return}}ji[p]=Di,--on===0&&_i(ji)}catch(F){ui(F)}}for(var ft=0;ft<ji.length;ft++)Cn(ft,ji[ft])})},ye.resolve=function(yi){return yi&&typeof yi=="object"&&yi.constructor===ye?yi:new ye(function(_i){_i(yi)})},ye.reject=function(yi){return new ye(function(_i,ui){ui(yi)})},ye.race=function(yi){return new ye(function(_i,ui){if(!Array.isArray(yi))return ui(new TypeError("Promise.race accepts an array"));for(var ji=0,on=yi.length;ji<on;ji++)ye.resolve(yi[ji]).then(_i,ui)})},ye._immediateFn=typeof setImmediate=="function"&&function(yi){setImmediate(yi)}||function(yi){setTimeout(yi,0)},ye._unhandledRejectionFn=function(_i){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",_i)},ye}(),t={},o;for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);var l=!0,u="";function m(U){return i.locateFile?i.locateFile(U,u):u+U}var r,f,_;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",r=function($){try{var ye=new XMLHttpRequest;return ye.open("GET",$,!1),ye.send(null),ye.responseText}catch(rt){var De=Us($);if(De)return Do(De);throw rt}},f=function($,ye,De){var rt=new XMLHttpRequest;rt.open("GET",$,!0),rt.responseType="arraybuffer",rt.onload=function(){if(rt.status==200||rt.status==0&&rt.response){ye(rt.response);return}var Ut=Us($);if(Ut){ye(Ut.buffer);return}De()},rt.onerror=De,rt.send(null)};var w=i.print||console.log.bind(console),b=i.printErr||console.warn.bind(console);for(o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);t=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var x=16;function v(U,$){return $||($=x),Math.ceil(U/$)*$}function C(U){C.shown||(C.shown={}),C.shown[U]||(C.shown[U]=1,b(U))}var T=0,S=function(U){T=U},M=function(){return T},O;i.wasmBinary&&(O=i.wasmBinary),i.noExitRuntime&&i.noExitRuntime;var V={Memory:function(U){this.buffer=new ArrayBuffer(U.initial*65536),this.grow=function($){var ye=da($);return ye}},Table:function(U){var $=new Array(U.initial);return $.set=function(ye,De){$[ye]=De},$.get=function(ye){return $[ye]},$},Module:function(U){},Instance:function(U,$){this.exports=function(De,rt,Ct){function Ut(ui,ji,on){var Cn=ji.memory,ft=Ct,p=new ui.Int8Array(on),Di=new ui.Int16Array(on),c=new ui.Int32Array(on),F=new ui.Uint8Array(on),mn=new ui.Uint16Array(on),Qn=new ui.Uint32Array(on);new ui.Float32Array(on);var vo=new ui.Float64Array(on),ne=ui.Math.imul;ui.Math.fround,ui.Math.abs;var Br=ui.Math.clz32;ui.Math.min,ui.Math.max,ui.Math.floor,ui.Math.ceil,ui.Math.sqrt;var ma=ji.abort;ui.NaN,ui.Infinity;var Va=ji.SDL_Init,Pc=ji.SDL_SetVideoMode,Al=ji.SDL_CreateRGBSurface,qs=ji.SDL_LockSurface,nc=ji.SDL_UnlockSurface,hu=ji.SDL_UpperBlit,sh=ji.SDL_Flip,fu=ji.SDL_FreeSurface,ah=ji.fd_close,Ou=ji.fd_write,du=ji.emscripten_resize_heap,pu=ji.emscripten_memcpy_big,Vl=ji.setTempRet0,mu=ji.fd_seek,Nn=5255072,Fn=0;function Fu(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0;g=c[s>>2],ce=c[s+4>>2],a=c[n+2264>>2],p[a+823|0]=129,p[a+807|0]=129,p[a+791|0]=129,p[a+775|0]=129,p[a+759|0]=129,p[a+743|0]=129,p[a+727|0]=129,p[a+711|0]=129,p[a+695|0]=129,p[a+679|0]=129,p[a+663|0]=129,p[a+647|0]=129,p[a+631|0]=129,p[a+615|0]=129,p[a+599|0]=129,p[a+583|0]=129,p[a+519|0]=129,p[a+487|0]=129,p[a+455|0]=129,p[a+423|0]=129,p[a+391|0]=129,p[a+359|0]=129,p[a+327|0]=129,p[a+295|0]=129,p[a+263|0]=129,p[a+231|0]=129,p[a+199|0]=129,p[a+167|0]=129,p[a+135|0]=129,p[a+103|0]=129,p[a+71|0]=129,p[a+39|0]=129;e:{if((ce|0)>=1){p[a+551|0]=129,p[a+567|0]=129,p[a+7|0]=129;break e}p[a+7|0]=2139062143,p[a+8|0]=8355711,p[a+9|0]=32639,p[a+10|0]=127,p[a+11|0]=2139062143,p[a+12|0]=8355711,p[a+13|0]=32639,p[a+14|0]=127,p[a+551|0]=2139062143,p[a+552|0]=8355711,p[a+553|0]=32639,p[a+554|0]=127,p[a+555|0]=2139062143,p[a+556|0]=8355711,p[a+557|0]=32639,p[a+558|0]=127,p[a+567|0]=2139062143,p[a+568|0]=8355711,p[a+569|0]=32639,p[a+570|0]=127,p[a+571|0]=2139062143,p[a+572|0]=8355711,p[a+573|0]=32639,p[a+574|0]=127,p[a+20|0]=2139062143,p[a+21|0]=8355711,p[a+22|0]=32639,p[a+23|0]=127,p[a+24|0]=2139062143,p[a+25|0]=8355711,p[a+26|0]=32639,p[a+27|0]=127,p[a+15|0]=2139062143,p[a+16|0]=8355711,p[a+17|0]=32639,p[a+18|0]=127,p[a+19|0]=2139062143,p[a+20|0]=8355711,p[a+21|0]=32639,p[a+22|0]=127,p[a+559|0]=127,p[a+575|0]=127}if(c[n+288>>2]>=1)for(Ne=a+600|0,Ye=a+584|0,xe=a+40|0,Tt=ce?5:6,ni=g<<3,ci=g<<4,Mi=a+520|0,ki=a+8|0,mt=a+24|0,Ot=!ce<<2,Gi=(ce|0)<1;;){L=c[s+16>>2],ee&&(g=F[a+20|0]|F[a+21|0]<<8|(F[a+22|0]<<16|F[a+23|0]<<24),p[a+4|0]=g,p[a+5|0]=g>>>8,p[a+6|0]=g>>>16,p[a+7|0]=g>>>24,g=F[a+52|0]|F[a+53|0]<<8|(F[a+54|0]<<16|F[a+55|0]<<24),p[a+36|0]=g,p[a+37|0]=g>>>8,p[a+38|0]=g>>>16,p[a+39|0]=g>>>24,g=F[a+84|0]|F[a+85|0]<<8|(F[a+86|0]<<16|F[a+87|0]<<24),p[a+68|0]=g,p[a+69|0]=g>>>8,p[a+70|0]=g>>>16,p[a+71|0]=g>>>24,g=F[a+116|0]|F[a+117|0]<<8|(F[a+118|0]<<16|F[a+119|0]<<24),p[a+100|0]=g,p[a+101|0]=g>>>8,p[a+102|0]=g>>>16,p[a+103|0]=g>>>24,g=F[a+148|0]|F[a+149|0]<<8|(F[a+150|0]<<16|F[a+151|0]<<24),p[a+132|0]=g,p[a+133|0]=g>>>8,p[a+134|0]=g>>>16,p[a+135|0]=g>>>24,g=F[a+180|0]|F[a+181|0]<<8|(F[a+182|0]<<16|F[a+183|0]<<24),p[a+164|0]=g,p[a+165|0]=g>>>8,p[a+166|0]=g>>>16,p[a+167|0]=g>>>24,g=F[a+212|0]|F[a+213|0]<<8|(F[a+214|0]<<16|F[a+215|0]<<24),p[a+196|0]=g,p[a+197|0]=g>>>8,p[a+198|0]=g>>>16,p[a+199|0]=g>>>24,g=F[a+244|0]|F[a+245|0]<<8|(F[a+246|0]<<16|F[a+247|0]<<24),p[a+228|0]=g,p[a+229|0]=g>>>8,p[a+230|0]=g>>>16,p[a+231|0]=g>>>24,g=F[a+276|0]|F[a+277|0]<<8|(F[a+278|0]<<16|F[a+279|0]<<24),p[a+260|0]=g,p[a+261|0]=g>>>8,p[a+262|0]=g>>>16,p[a+263|0]=g>>>24,g=F[a+308|0]|F[a+309|0]<<8|(F[a+310|0]<<16|F[a+311|0]<<24),p[a+292|0]=g,p[a+293|0]=g>>>8,p[a+294|0]=g>>>16,p[a+295|0]=g>>>24,g=F[a+340|0]|F[a+341|0]<<8|(F[a+342|0]<<16|F[a+343|0]<<24),p[a+324|0]=g,p[a+325|0]=g>>>8,p[a+326|0]=g>>>16,p[a+327|0]=g>>>24,g=F[a+372|0]|F[a+373|0]<<8|(F[a+374|0]<<16|F[a+375|0]<<24),p[a+356|0]=g,p[a+357|0]=g>>>8,p[a+358|0]=g>>>16,p[a+359|0]=g>>>24,g=F[a+404|0]|F[a+405|0]<<8|(F[a+406|0]<<16|F[a+407|0]<<24),p[a+388|0]=g,p[a+389|0]=g>>>8,p[a+390|0]=g>>>16,p[a+391|0]=g>>>24,g=F[a+436|0]|F[a+437|0]<<8|(F[a+438|0]<<16|F[a+439|0]<<24),p[a+420|0]=g,p[a+421|0]=g>>>8,p[a+422|0]=g>>>16,p[a+423|0]=g>>>24,g=F[a+468|0]|F[a+469|0]<<8|(F[a+470|0]<<16|F[a+471|0]<<24),p[a+452|0]=g,p[a+453|0]=g>>>8,p[a+454|0]=g>>>16,p[a+455|0]=g>>>24,g=F[a+500|0]|F[a+501|0]<<8|(F[a+502|0]<<16|F[a+503|0]<<24),p[a+484|0]=g,p[a+485|0]=g>>>8,p[a+486|0]=g>>>16,p[a+487|0]=g>>>24,g=F[a+532|0]|F[a+533|0]<<8|(F[a+534|0]<<16|F[a+535|0]<<24),p[a+516|0]=g,p[a+517|0]=g>>>8,p[a+518|0]=g>>>16,p[a+519|0]=g>>>24,g=F[a+556|0]|F[a+557|0]<<8|(F[a+558|0]<<16|F[a+559|0]<<24),p[a+548|0]=g,p[a+549|0]=g>>>8,p[a+550|0]=g>>>16,p[a+551|0]=g>>>24,g=F[a+572|0]|F[a+573|0]<<8|(F[a+574|0]<<16|F[a+575|0]<<24),p[a+564|0]=g,p[a+565|0]=g>>>8,p[a+566|0]=g>>>16,p[a+567|0]=g>>>24,g=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),p[a+580|0]=g,p[a+581|0]=g>>>8,p[a+582|0]=g>>>16,p[a+583|0]=g>>>24,g=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),p[a+596|0]=g,p[a+597|0]=g>>>8,p[a+598|0]=g>>>16,p[a+599|0]=g>>>24,g=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),p[a+612|0]=g,p[a+613|0]=g>>>8,p[a+614|0]=g>>>16,p[a+615|0]=g>>>24,g=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),p[a+628|0]=g,p[a+629|0]=g>>>8,p[a+630|0]=g>>>16,p[a+631|0]=g>>>24,g=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),p[a+644|0]=g,p[a+645|0]=g>>>8,p[a+646|0]=g>>>16,p[a+647|0]=g>>>24,g=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),p[a+660|0]=g,p[a+661|0]=g>>>8,p[a+662|0]=g>>>16,p[a+663|0]=g>>>24,g=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),p[a+676|0]=g,p[a+677|0]=g>>>8,p[a+678|0]=g>>>16,p[a+679|0]=g>>>24,g=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),p[a+692|0]=g,p[a+693|0]=g>>>8,p[a+694|0]=g>>>16,p[a+695|0]=g>>>24,g=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),p[a+708|0]=g,p[a+709|0]=g>>>8,p[a+710|0]=g>>>16,p[a+711|0]=g>>>24,g=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),p[a+724|0]=g,p[a+725|0]=g>>>8,p[a+726|0]=g>>>16,p[a+727|0]=g>>>24,g=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),p[a+740|0]=g,p[a+741|0]=g>>>8,p[a+742|0]=g>>>16,p[a+743|0]=g>>>24,g=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),p[a+756|0]=g,p[a+757|0]=g>>>8,p[a+758|0]=g>>>16,p[a+759|0]=g>>>24,g=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),p[a+772|0]=g,p[a+773|0]=g>>>8,p[a+774|0]=g>>>16,p[a+775|0]=g>>>24,g=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),p[a+788|0]=g,p[a+789|0]=g>>>8,p[a+790|0]=g>>>16,p[a+791|0]=g>>>24,g=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),p[a+804|0]=g,p[a+805|0]=g>>>8,p[a+806|0]=g>>>16,p[a+807|0]=g>>>24,g=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),p[a+820|0]=g,p[a+821|0]=g>>>8,p[a+822|0]=g>>>16,p[a+823|0]=g>>>24),g=c[n+2252>>2]+(ee<<5)|0,E=L+ne(ee,800)|0,R=c[E+788>>2];e:{t:{i:{n:{if(!Gi){if(W=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),k=ki,H=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),p[k|0]=H,p[k+1|0]=H>>>8,p[k+2|0]=H>>>16,p[k+3|0]=H>>>24,p[k+4|0]=W,p[k+5|0]=W>>>8,p[k+6|0]=W>>>16,p[k+7|0]=W>>>24,W=F[g+12|0]|F[g+13|0]<<8|(F[g+14|0]<<16|F[g+15|0]<<24),H=F[g+8|0]|F[g+9|0]<<8|(F[g+10|0]<<16|F[g+11|0]<<24),p[k+8|0]=H,p[k+9|0]=H>>>8,p[k+10|0]=H>>>16,p[k+11|0]=H>>>24,p[k+12|0]=W,p[k+13|0]=W>>>8,p[k+14|0]=W>>>16,p[k+15|0]=W>>>24,k=F[g+20|0]|F[g+21|0]<<8|(F[g+22|0]<<16|F[g+23|0]<<24),W=F[g+16|0]|F[g+17|0]<<8|(F[g+18|0]<<16|F[g+19|0]<<24),p[a+552|0]=W,p[a+553|0]=W>>>8,p[a+554|0]=W>>>16,p[a+555|0]=W>>>24,p[a+556|0]=k,p[a+557|0]=k>>>8,p[a+558|0]=k>>>16,p[a+559|0]=k>>>24,k=F[g+28|0]|F[g+29|0]<<8|(F[g+30|0]<<16|F[g+31|0]<<24),L=F[g+24|0]|F[g+25|0]<<8|(F[g+26|0]<<16|F[g+27|0]<<24),p[a+568|0]=L,p[a+569|0]=L>>>8,p[a+570|0]=L>>>16,p[a+571|0]=L>>>24,p[a+572|0]=k,p[a+573|0]=k>>>8,p[a+574|0]=k>>>16,p[a+575|0]=k>>>24,F[E+768|0])break n;break t}if(!F[E+768|0])break t;L=c[mt>>2];break i}if((ee|0)>=(c[n+288>>2]+-1|0)){L=F[g+15|0],c[mt>>2]=ne(L,16843009),L=L|L<<8,L=L<<16|L;break i}L=F[g+32|0]|F[g+33|0]<<8|(F[g+34|0]<<16|F[g+35|0]<<24),c[mt>>2]=L}for(c[a+280>>2]=L,c[a+408>>2]=L,c[a+152>>2]=L,L=0;;){k=mn[(L<<1)+4880>>1]+xe|0,ft[c[(F[(E+L|0)+769|0]<<2)+10736>>2]](k),W=E+(L<<5)|0;i:{n:switch((R>>>30|0)+-1|0){case 2:ft[c[2703]](W,k,0);break i;case 1:ft[c[2704]](W,k);break i;case 0:break n;default:break i}ft[c[2706]](W,k)}if(R=R<<2,L=L+1|0,(L|0)==16)break}H=ee?Ot:Tt;break e}if(L=F[E+769|0],H=ee?Ot:Tt,ft[c[((L||H)<<2)+10704>>2]](xe),L=0,!R)break e;for(;;){k=E+(L<<5)|0,W=mn[(L<<1)+4880>>1]+xe|0;t:{i:switch((R>>>30|0)+-1|0){case 2:ft[c[2703]](k,W,0);break t;case 1:ft[c[2704]](k,W);break t;case 0:break i;default:break t}ft[c[2706]](k,W)}if(R=R<<2,L=L+1|0,(L|0)==16)break}}L=c[E+792>>2],k=F[E+785|0],k=((k||H)<<2)+10784|0,ft[c[k>>2]](Ye),ft[c[k>>2]](Ne);e:{if(!(L&255))break e;if(k=E+512|0,L&170){ft[c[2705]](k,Ye);break e}ft[c[2707]](k,Ye)}e:{if(!(L&65280))break e;if(k=E+640|0,L&43520){ft[c[2705]](k,Ne);break e}ft[c[2707]](k,Ne)}for((ce|0)<(c[n+292>>2]+-1|0)&&(L=Mi,k=F[L+4|0]|F[L+5|0]<<8|(F[L+6|0]<<16|F[L+7|0]<<24),E=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,k=F[L+12|0]|F[L+13|0]<<8|(F[L+14|0]<<16|F[L+15|0]<<24),L=F[L+8|0]|F[L+9|0]<<8|(F[L+10|0]<<16|F[L+11|0]<<24),p[g+8|0]=L,p[g+9|0]=L>>>8,p[g+10|0]=L>>>16,p[g+11|0]=L>>>24,p[g+12|0]=k,p[g+13|0]=k>>>8,p[g+14|0]=k>>>16,p[g+15|0]=k>>>24,L=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),k=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),p[g+16|0]=k,p[g+17|0]=k>>>8,p[g+18|0]=k>>>16,p[g+19|0]=k>>>24,p[g+20|0]=L,p[g+21|0]=L>>>8,p[g+22|0]=L>>>16,p[g+23|0]=L>>>24,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),k=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),p[g+24|0]=k,p[g+25|0]=k>>>8,p[g+26|0]=k>>>16,p[g+27|0]=k>>>24,p[g+28|0]=L,p[g+29|0]=L>>>8,p[g+30|0]=L>>>16,p[g+31|0]=L>>>24),nn=c[n+2284>>2],W=c[n+2272>>2],H=c[n+2276>>2],g=xe,E=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),k=(c[n+2268>>2]+(ee<<4)|0)+ne(c[n+2280>>2],ci)|0,R=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[g+12|0]|F[g+13|0]<<8|(F[g+14|0]<<16|F[g+15|0]<<24),g=F[g+8|0]|F[g+9|0]<<8|(F[g+10|0]<<16|F[g+11|0]<<24),p[k+8|0]=g,p[k+9|0]=g>>>8,p[k+10|0]=g>>>16,p[k+11|0]=g>>>24,p[k+12|0]=E,p[k+13|0]=E>>>8,p[k+14|0]=E>>>16,p[k+15|0]=E>>>24,g=ee<<3,bn=g+H|0,ir=g+W|0,L=1;E=(L<<5)+xe|0,W=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),g=k+ne(c[n+2280>>2],L)|0,H=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),p[g|0]=H,p[g+1|0]=H>>>8,p[g+2|0]=H>>>16,p[g+3|0]=H>>>24,p[g+4|0]=W,p[g+5|0]=W>>>8,p[g+6|0]=W>>>16,p[g+7|0]=W>>>24,R=F[E+12|0]|F[E+13|0]<<8|(F[E+14|0]<<16|F[E+15|0]<<24),E=F[E+8|0]|F[E+9|0]<<8|(F[E+10|0]<<16|F[E+11|0]<<24),p[g+8|0]=E,p[g+9|0]=E>>>8,p[g+10|0]=E>>>16,p[g+11|0]=E>>>24,p[g+12|0]=R,p[g+13|0]=R>>>8,p[g+14|0]=R>>>16,p[g+15|0]=R>>>24,L=L+1|0,(L|0)!=16;);if(k=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),R=ne(ni,nn),g=R+ir|0,E=F[a+584|0]|F[a+585|0]<<8|(F[a+586|0]<<16|F[a+587|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,L=R+bn|0,k=L,E=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),R=F[a+600|0]|F[a+601|0]<<8|(F[a+602|0]<<16|F[a+603|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),k=g+c[n+2284>>2]|0,R=F[a+616|0]|F[a+617|0]<<8|(F[a+618|0]<<16|F[a+619|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),k=L+c[n+2284>>2]|0,R=F[a+632|0]|F[a+633|0]<<8|(F[a+634|0]<<16|F[a+635|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),k=g+(c[n+2284>>2]<<1)|0,R=F[a+648|0]|F[a+649|0]<<8|(F[a+650|0]<<16|F[a+651|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),k=L+(c[n+2284>>2]<<1)|0,R=F[a+664|0]|F[a+665|0]<<8|(F[a+666|0]<<16|F[a+667|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),k=g+ne(c[n+2284>>2],3)|0,R=F[a+680|0]|F[a+681|0]<<8|(F[a+682|0]<<16|F[a+683|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),k=L+ne(c[n+2284>>2],3)|0,R=F[a+696|0]|F[a+697|0]<<8|(F[a+698|0]<<16|F[a+699|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),k=g+(c[n+2284>>2]<<2)|0,R=F[a+712|0]|F[a+713|0]<<8|(F[a+714|0]<<16|F[a+715|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),k=L+(c[n+2284>>2]<<2)|0,R=F[a+728|0]|F[a+729|0]<<8|(F[a+730|0]<<16|F[a+731|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),k=g+ne(c[n+2284>>2],5)|0,R=F[a+744|0]|F[a+745|0]<<8|(F[a+746|0]<<16|F[a+747|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),k=L+ne(c[n+2284>>2],5)|0,R=F[a+760|0]|F[a+761|0]<<8|(F[a+762|0]<<16|F[a+763|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),k=g+ne(c[n+2284>>2],6)|0,R=F[a+776|0]|F[a+777|0]<<8|(F[a+778|0]<<16|F[a+779|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),k=L+ne(c[n+2284>>2],6)|0,R=F[a+792|0]|F[a+793|0]<<8|(F[a+794|0]<<16|F[a+795|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,k=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),g=g+ne(c[n+2284>>2],7)|0,E=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,g=L+ne(c[n+2284>>2],7)|0,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),k=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),p[g|0]=k,p[g+1|0]=k>>>8,p[g+2|0]=k>>>16,p[g+3|0]=k>>>24,p[g+4|0]=L,p[g+5|0]=L>>>8,p[g+6|0]=L>>>16,p[g+7|0]=L>>>24,ee=ee+1|0,!((ee|0)<c[n+288>>2]))break}}function qa(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;xe=Nn-16|0,Nn=xe;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{f:{c:{if(n>>>0<=244){if(L=c[2884],R=n>>>0<11?16:n+11&-8,s=R>>>3|0,n=L>>>s|0,n&3){g=s+((n^-1)&1)|0,s=g<<3,k=c[s+11584>>2],n=k+8|0,a=c[k+8>>2],s=s+11576|0;h:{if((a|0)==(s|0)){Ne=11536,Ye=xa(-2,g)&L,c[Ne>>2]=Ye;break h}c[a+12>>2]=s,c[s+8>>2]=a}s=g<<3,c[k+4>>2]=s|3,s=s+k|0,c[s+4>>2]=c[s+4>>2]|1;break e}if(ce=c[2886],R>>>0<=ce>>>0)break c;if(n){a=n<<s,n=2<<s,n=a&(0-n|n),s=(0-n&n)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,a=(a|n)+(s>>>n|0)|0,n=a<<3,E=c[n+11584>>2],s=c[E+8>>2],n=n+11576|0;h:{if((s|0)==(n|0)){L=xa(-2,a)&L,c[2884]=L;break h}c[s+12>>2]=n,c[n+8>>2]=s}if(n=E+8|0,c[E+4>>2]=R|3,g=E+R|0,s=a<<3,k=s-R|0,c[g+4>>2]=k|1,c[s+E>>2]=k,ce){s=ce>>>3|0,a=(s<<3)+11576|0,R=c[2889],s=1<<s;h:{if(!(s&L)){c[2884]=s|L,s=a;break h}s=c[a+8>>2]}c[a+8>>2]=R,c[s+12>>2]=R,c[R+12>>2]=a,c[R+8>>2]=s}c[2889]=g,c[2886]=k;break e}if(W=c[2885],!W)break c;for(s=(W&0-W)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,s=c[((a|n)+(s>>>n|0)<<2)+11840>>2],k=(c[s+4>>2]&-8)-R|0,a=s;;){h:{if(n=c[a+16>>2],!n&&(n=c[a+20>>2],!n))break h;a=(c[n+4>>2]&-8)-R|0,g=a>>>0<k>>>0,k=g?a:k,s=g?n:s,a=n;continue}break}if(H=s+R|0,H>>>0<=s>>>0)break f;if(ee=c[s+24>>2],g=c[s+12>>2],(g|0)!=(s|0)){n=c[s+8>>2],c[n+12>>2]=g,c[g+8>>2]=n;break t}if(a=s+20|0,n=c[a>>2],!n){if(n=c[s+16>>2],!n)break a;a=s+16|0}for(;E=a,g=n,a=n+20|0,n=c[a>>2],!(!n&&(a=g+16|0,n=c[g+16>>2],!n)););c[E>>2]=0;break t}if(R=-1,n>>>0>4294967231||(n=n+11|0,R=n&-8,W=c[2885],!W))break c;n=n>>>8|0,E=0;h:{if(!n||(E=31,R>>>0>16777215))break h;s=n+1048320>>>16&8,n=n<<s,k=n+520192>>>16&4,n=n<<k,a=n+245760>>>16&2,n=(n<<a>>>15|0)-(a|(s|k))|0,E=(n<<1|R>>>n+21&1)+28|0}k=0-R|0,a=c[(E<<2)+11840>>2];h:{d:{p:{if(!a){n=0;break p}for(n=0,s=R<<((E|0)==31?0:25-(E>>>1|0)|0);;){m:{if(L=(c[a+4>>2]&-8)-R|0,L>>>0>=k>>>0||(g=a,k=L,k))break m;k=0,n=a;break d}if(L=c[a+20>>2],a=c[((s>>>29&4)+a|0)+16>>2],n=L?(L|0)==(a|0)?n:L:n,s=s<<1,!a)break}}if(!(n|g)){if(n=2<<E,n=(0-n|n)&W,!n)break c;s=(n&0-n)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,n=c[((a|n)+(s>>>n|0)<<2)+11840>>2]}if(!n)break h}for(;s=(c[n+4>>2]&-8)-R|0,a=s>>>0<k>>>0,k=a?s:k,g=a?n:g,s=c[n+16>>2],s?n=s:n=c[n+20>>2],!!n;);}if(!g|k>>>0>=c[2886]-R>>>0)break c;if(E=g+R|0,E>>>0<=g>>>0)break f;if(H=c[g+24>>2],s=c[g+12>>2],(g|0)!=(s|0)){n=c[g+8>>2],c[n+12>>2]=s,c[s+8>>2]=n;break i}if(a=g+20|0,n=c[a>>2],!n){if(n=c[g+16>>2],!n)break s;a=g+16|0}for(;L=a,s=n,a=n+20|0,n=c[a>>2],!(!n&&(a=s+16|0,n=c[s+16>>2],!n)););c[L>>2]=0;break i}if(a=c[2886],a>>>0>=R>>>0){g=c[2889],s=a-R|0;c:{if(s>>>0>=16){c[2886]=s,n=g+R|0,c[2889]=n,c[n+4>>2]=s|1,c[a+g>>2]=s,c[g+4>>2]=R|3;break c}c[2889]=0,c[2886]=0,c[g+4>>2]=a|3,n=a+g|0,c[n+4>>2]=c[n+4>>2]|1}n=g+8|0;break e}if(W=c[2887],W>>>0>R>>>0){s=W-R|0,c[2887]=s,a=c[2890],n=a+R|0,c[2890]=n,c[n+4>>2]=s|1,c[a+4>>2]=R|3,n=a+8|0;break e}if(n=0,H=R+47|0,s=H,c[3002]?a=c[3004]:(c[3005]=-1,c[3006]=-1,c[3003]=4096,c[3004]=4096,c[3002]=xe+12&-16^1431655768,c[3007]=0,c[2995]=0,a=4096),E=s+a|0,L=0-a|0,a=E&L,a>>>0<=R>>>0||(k=c[2994],k&&(g=c[2992],s=g+a|0,s>>>0<=g>>>0|s>>>0>k>>>0)))break e;if(F[11980]&4)break l;c:{h:{if(g=c[2890],g)for(n=11984;;){if(s=c[n>>2],s+c[n+4>>2]>>>0>g>>>0&&s>>>0<=g>>>0)break h;if(n=c[n+8>>2],!n)break}if(s=Za(0),(s|0)==-1||(L=a,g=c[3003],n=g+-1|0,n&s&&(L=(a-s|0)+(n+s&0-g)|0),L>>>0<=R>>>0|L>>>0>2147483646)||(k=c[2994],k&&(g=c[2992],n=g+L|0,n>>>0<=g>>>0|n>>>0>k>>>0)))break r;if(n=Za(L),(s|0)!=(n|0))break c;break o}if(L=L&E-W,L>>>0>2147483646)break r;if(s=Za(L),(s|0)==(c[n>>2]+c[n+4>>2]|0))break u;n=s}if(!((n|0)==-1|R+48>>>0<=L>>>0)){if(s=c[3004],s=s+(H-L|0)&0-s,s>>>0>2147483646){s=n;break o}if((Za(s)|0)!=-1){L=s+L|0,s=n;break o}Za(0-L|0);break r}if(s=n,(n|0)!=-1)break o;break r}ma()}g=0;break t}s=0;break i}if((s|0)!=-1)break o}c[2995]=c[2995]|4}if(a>>>0>2147483646||(s=Za(a),n=Za(0),s>>>0>=n>>>0|(s|0)==-1|(n|0)==-1)||(L=n-s|0,L>>>0<=R+40>>>0))break n}n=c[2992]+L|0,c[2992]=n,n>>>0>Qn[2993]&&(c[2993]=n);o:{l:{r:{if(k=c[2890],k){for(n=11984;;){if(g=c[n>>2],a=c[n+4>>2],(g+a|0)==(s|0))break r;if(n=c[n+8>>2],!n)break}break l}for(n=c[2888],s>>>0>=n>>>0&&n||(c[2888]=s),n=0,c[2997]=L,c[2996]=s,c[2892]=-1,c[2893]=c[3002],c[2999]=0;g=n<<3,a=g+11576|0,c[g+11584>>2]=a,c[g+11588>>2]=a,n=n+1|0,(n|0)!=32;);g=L+-40|0,n=s+8&7?-8-s&7:0,a=g-n|0,c[2887]=a,n=n+s|0,c[2890]=n,c[n+4>>2]=a|1,c[(s+g|0)+4>>2]=40,c[2891]=c[3006];break o}if(F[n+12|0]&8|s>>>0<=k>>>0|g>>>0>k>>>0)break l;c[n+4>>2]=a+L,n=k+8&7?-8-k&7:0,a=n+k|0,c[2890]=a,s=c[2887]+L|0,n=s-n|0,c[2887]=n,c[a+4>>2]=n|1,c[(s+k|0)+4>>2]=40,c[2891]=c[3006];break o}g=c[2888],s>>>0<g>>>0&&(c[2888]=s,g=0),a=s+L|0,n=11984;l:{r:{u:{s:{a:{f:{for(;;){if((a|0)!=c[n>>2]){if(n=c[n+8>>2],n)continue;break f}break}if(!(F[n+12|0]&8))break a}for(n=11984;;){if(a=c[n>>2],a>>>0<=k>>>0&&(E=a+c[n+4>>2]|0,E>>>0>k>>>0))break s;n=c[n+8>>2]}}if(c[n>>2]=s,c[n+4>>2]=c[n+4>>2]+L,W=(s+8&7?-8-s&7:0)+s|0,c[W+4>>2]=R|3,s=a+(a+8&7?-8-a&7:0)|0,n=(s-W|0)-R|0,E=R+W|0,(s|0)==(k|0)){c[2890]=E,n=c[2887]+n|0,c[2887]=n,c[E+4>>2]=n|1;break r}if(c[2889]==(s|0)){c[2889]=E,n=c[2886]+n|0,c[2886]=n,c[E+4>>2]=n|1,c[n+E>>2]=n;break r}if(a=c[s+4>>2],(a&3)==1){H=a&-8;a:{if(a>>>0<=255){if(k=c[s+8>>2],a=a>>>3|0,g=c[s+12>>2],(g|0)==(k|0)){Ne=11536,Ye=c[2884]&xa(-2,a),c[Ne>>2]=Ye;break a}c[k+12>>2]=g,c[g+8>>2]=k;break a}ee=c[s+24>>2],L=c[s+12>>2];f:{if((L|0)!=(s|0)){a=c[s+8>>2],c[a+12>>2]=L,c[L+8>>2]=a;break f}c:{if(k=s+20|0,R=c[k>>2],R||(k=s+16|0,R=c[k>>2],R))break c;L=0;break f}for(;a=k,L=R,k=L+20|0,R=c[k>>2],!(!R&&(k=L+16|0,R=c[L+16>>2],!R)););c[a>>2]=0}if(!ee)break a;g=c[s+28>>2],a=(g<<2)+11840|0;f:{if(c[a>>2]==(s|0)){if(c[a>>2]=L,L)break f;Ne=11540,Ye=c[2885]&xa(-2,g),c[Ne>>2]=Ye;break a}if(c[ee+(c[ee+16>>2]==(s|0)?16:20)>>2]=L,!L)break a}if(c[L+24>>2]=ee,a=c[s+16>>2],a&&(c[L+16>>2]=a,c[a+24>>2]=L),a=c[s+20>>2],!a)break a;c[L+20>>2]=a,c[a+24>>2]=L}s=s+H|0,n=n+H|0}if(c[s+4>>2]=c[s+4>>2]&-2,c[E+4>>2]=n|1,c[n+E>>2]=n,n>>>0<=255){n=n>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;a:{if(!(a&n)){c[2884]=n|a,n=s;break a}n=c[s+8>>2]}c[s+8>>2]=E,c[n+12>>2]=E,c[E+12>>2]=s,c[E+8>>2]=n;break r}s=E,g=n>>>8|0,a=0;a:{if(!g||(a=31,n>>>0>16777215))break a;a=g,g=g+1048320>>>16&8,a=a<<g,L=a+520192>>>16&4,a=a<<L,k=a+245760>>>16&2,a=(a<<k>>>15|0)-(k|(g|L))|0,a=(a<<1|n>>>a+21&1)+28|0}c[s+28>>2]=a,c[E+16>>2]=0,c[E+20>>2]=0,L=(a<<2)+11840|0,g=c[2885],s=1<<a;a:{if(!(g&s)){c[2885]=s|g,c[L>>2]=E,c[E+24>>2]=L;break a}for(k=n<<((a|0)==31?0:25-(a>>>1|0)|0),s=c[L>>2];;){if(a=s,(c[s+4>>2]&-8)==(n|0))break u;if(s=k>>>29|0,k=k<<1,g=(a+(s&4)|0)+16|0,s=c[g>>2],!s)break}c[g>>2]=E,c[E+24>>2]=a}c[E+12>>2]=E,c[E+8>>2]=E;break r}for(g=L+-40|0,n=s+8&7?-8-s&7:0,a=g-n|0,c[2887]=a,n=n+s|0,c[2890]=n,c[n+4>>2]=a|1,c[(s+g|0)+4>>2]=40,c[2891]=c[3006],n=(E+(E+-39&7?39-E&7:0)|0)+-47|0,a=n>>>0<k+16>>>0?k:n,c[a+4>>2]=27,n=c[2999],c[a+16>>2]=c[2998],c[a+20>>2]=n,n=c[2997],c[a+8>>2]=c[2996],c[a+12>>2]=n,c[2998]=a+8,c[2997]=L,c[2996]=s,c[2999]=0,n=a+24|0;c[n+4>>2]=7,s=n+8|0,n=n+4|0,E>>>0>s>>>0;);if((a|0)==(k|0))break o;if(c[a+4>>2]=c[a+4>>2]&-2,E=a-k|0,c[k+4>>2]=E|1,c[a>>2]=E,E>>>0<=255){n=E>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;s:{if(!(a&n)){c[2884]=n|a,n=s;break s}n=c[s+8>>2]}c[s+8>>2]=k,c[n+12>>2]=k,c[k+12>>2]=s,c[k+8>>2]=n;break o}c[k+16>>2]=0,c[k+20>>2]=0,n=k,a=E>>>8|0,s=0;s:{if(!a||(s=31,E>>>0>16777215))break s;s=a,a=a+1048320>>>16&8,s=s<<a,L=s+520192>>>16&4,s=s<<L,g=s+245760>>>16&2,s=(s<<g>>>15|0)-(g|(a|L))|0,s=(s<<1|E>>>s+21&1)+28|0}c[n+28>>2]=s,g=(s<<2)+11840|0,a=c[2885],n=1<<s;s:{if(!(a&n)){c[2885]=n|a,c[g>>2]=k,c[k+24>>2]=g;break s}for(n=E<<((s|0)==31?0:25-(s>>>1|0)|0),s=c[g>>2];;){if(a=s,(E|0)==(c[s+4>>2]&-8))break l;if(s=n>>>29|0,n=n<<1,g=(a+(s&4)|0)+16|0,s=c[g>>2],!s)break}c[g>>2]=k,c[k+24>>2]=a}c[k+12>>2]=k,c[k+8>>2]=k;break o}n=c[a+8>>2],c[n+12>>2]=E,c[a+8>>2]=E,c[E+24>>2]=0,c[E+12>>2]=a,c[E+8>>2]=n}n=W+8|0;break e}n=c[a+8>>2],c[n+12>>2]=k,c[a+8>>2]=k,c[k+24>>2]=0,c[k+12>>2]=a,c[k+8>>2]=n}if(n=c[2887],n>>>0<=R>>>0)break n;s=n-R|0,c[2887]=s,a=c[2890],n=a+R|0,c[2890]=n,c[n+4>>2]=s|1,c[a+4>>2]=R|3,n=a+8|0;break e}c[2865]=48,n=0;break e}i:{if(!H)break i;a=c[g+28>>2],n=(a<<2)+11840|0;n:{if(c[n>>2]==(g|0)){if(c[n>>2]=s,s)break n;W=xa(-2,a)&W,c[2885]=W;break i}if(c[H+(c[H+16>>2]==(g|0)?16:20)>>2]=s,!s)break i}if(c[s+24>>2]=H,n=c[g+16>>2],n&&(c[s+16>>2]=n,c[n+24>>2]=s),n=c[g+20>>2],!n)break i;c[s+20>>2]=n,c[n+24>>2]=s}i:{if(k>>>0<=15){n=k+R|0,c[g+4>>2]=n|3,n=n+g|0,c[n+4>>2]=c[n+4>>2]|1;break i}if(c[g+4>>2]=R|3,c[E+4>>2]=k|1,c[k+E>>2]=k,k>>>0<=255){n=k>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;n:{if(!(a&n)){c[2884]=n|a,n=s;break n}n=c[s+8>>2]}c[s+8>>2]=E,c[n+12>>2]=E,c[E+12>>2]=s,c[E+8>>2]=n;break i}n=E,a=k>>>8|0,s=0;n:{if(!a||(s=31,k>>>0>16777215))break n;s=a,a=a+1048320>>>16&8,s=s<<a,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(a|R))|0,s=(s<<1|k>>>s+21&1)+28|0}c[n+28>>2]=s,c[E+16>>2]=0,c[E+20>>2]=0,a=(s<<2)+11840|0;n:{n=1<<s;o:{if(!(n&W)){c[2885]=n|W,c[a>>2]=E,c[E+24>>2]=a;break o}for(n=k<<((s|0)==31?0:25-(s>>>1|0)|0),R=c[a>>2];;){if(s=R,(c[s+4>>2]&-8)==(k|0))break n;if(a=n>>>29|0,n=n<<1,a=(s+(a&4)|0)+16|0,R=c[a>>2],!R)break}c[a>>2]=E,c[E+24>>2]=s}c[E+12>>2]=E,c[E+8>>2]=E;break i}n=c[s+8>>2],c[n+12>>2]=E,c[s+8>>2]=E,c[E+24>>2]=0,c[E+12>>2]=s,c[E+8>>2]=n}n=g+8|0;break e}t:{if(!ee)break t;a=c[s+28>>2],n=(a<<2)+11840|0;i:{if(c[n>>2]==(s|0)){if(c[n>>2]=g,g)break i;Ne=11540,Ye=xa(-2,a)&W,c[Ne>>2]=Ye;break t}if(c[(c[ee+16>>2]==(s|0)?16:20)+ee>>2]=g,!g)break t}if(c[g+24>>2]=ee,n=c[s+16>>2],n&&(c[g+16>>2]=n,c[n+24>>2]=g),n=c[s+20>>2],!n)break t;c[g+20>>2]=n,c[n+24>>2]=g}t:{if(k>>>0<=15){n=k+R|0,c[s+4>>2]=n|3,n=n+s|0,c[n+4>>2]=c[n+4>>2]|1;break t}if(c[s+4>>2]=R|3,c[H+4>>2]=k|1,c[k+H>>2]=k,ce){n=ce>>>3|0,a=(n<<3)+11576|0,g=c[2889],n=1<<n;i:{if(!(n&L)){c[2884]=n|L,n=a;break i}n=c[a+8>>2]}c[a+8>>2]=g,c[n+12>>2]=g,c[g+12>>2]=a,c[g+8>>2]=n}c[2889]=H,c[2886]=k}n=s+8|0}return Nn=xe+16|0,n|0}function ga(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0;if(c[s+288>>2]>=1)for(Gi=s+2248|0;;){if(H=c[s+2244>>2],ce=c[s+2304>>2],E=0,c[s+108>>2]){R=c[n+4>>2],k=F[s+904|0],g=c[n+8>>2];e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Or(n),g=c[n+8>>2]}L=n,ee=g,E=c[n>>2],W=E>>>g|0,k=ne(k,R)>>>8|0;e:{if(W>>>0>k>>>0){E=((k^-1)<<g)+E|0,c[n>>2]=E,R=R-k|0;break e}R=k+1|0}a=Br(R)^24,g=ee-a|0,c[L+8>>2]=g,L=(R<<a)+-1|0,c[n+4>>2]=L;e:{if(W>>>0<=k>>>0){R=F[s+905|0];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break t}Or(n),E=c[n>>2],g=c[n+8>>2]}k=E>>>g|0,a=ne(L,R)>>>8|0;t:{if(k>>>0>a>>>0){c[n>>2]=((a^-1)<<g)+E,L=L-a|0;break t}L=a+1|0}E=k>>>0>a>>>0,a=Br(L)^24,g=g-a|0,a=L<<a;break e}R=F[s+906|0];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break t}Or(n),E=c[n>>2],g=c[n+8>>2]}a=g,W=a,k=ne(L,R)>>>8|0;t:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=3,L=L-k|0;break t}E=2,L=k+1|0}a=Br(L)^24,g=W-a|0,a=L<<a}c[n+8>>2]=g,c[n+4>>2]=a+-1}ce=ce+ne(xe,800)|0,p[ce+798|0]=E;e:{if(!c[s+2236>>2]){g=c[n+8>>2],R=c[n+4>>2];break e}k=c[n+4>>2],E=F[s+2240|0],g=c[n+8>>2];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Or(n),g=c[n+8>>2]}L=n,ee=g,R=c[n>>2],W=R>>>g|0,E=ne(k,E)>>>8|0;t:{if(W>>>0>E>>>0){c[n>>2]=R+((E^-1)<<g),k=k-E|0;break t}k=E+1|0}a=Br(k)^24,g=ee-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,p[ce+797|0]=W>>>0>E>>>0}e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Or(n),g=c[n+8>>2]}H=H+(xe<<2)|0,L=n,ee=g,E=c[n>>2],k=ne(R,145)>>>8|0,W=E>>>g>>>0<=k>>>0;e:{if(!W){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break e}k=k+1|0}a=Br(k)^24,g=ee-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,p[ce+768|0]=W;e:{if(!W){t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Or(n),E=c[n>>2],g=c[n+8>>2]}L=n,ee=g,k=ne(R,156)>>>8|0,W=E>>>g>>>0<=k>>>0;t:{if(!W){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break t}k=k+1|0}a=Br(k)^24,g=ee-a|0,c[L+8>>2]=g,L=(k<<a)+-1|0,c[n+4>>2]=L;t:{if(!W){i:{if((g|0)>-1)break i;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break i}Or(n),E=c[n>>2],g=c[n+8>>2]}a=g,R=a,k=L>>>1&16777215;i:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=1,L=L-k|0;break i}E=3,L=k+1|0}a=Br(L)^24,g=R-a|0,a=L<<a;break t}i:{if((g|0)>-1)break i;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break i}Or(n),E=c[n>>2],g=c[n+8>>2]}a=g,R=a,k=ne(L,163)>>>8|0;i:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=2,L=L-k|0;break i}E=0,L=k+1|0}a=Br(L)^24,g=R-a|0,a=L<<a}c[n+8>>2]=g,c[n+4>>2]=a+-1,p[ce+769|0]=E,a=ne(E,16843009),p[H|0]=a,p[H+1|0]=a>>>8,p[H+2|0]=a>>>16,p[H+3|0]=a>>>24,g=Gi,p[g|0]=a,p[g+1|0]=a>>>8,p[g+2|0]=a>>>16,p[g+3|0]=a>>>24;break e}for(L=ce+769|0,Ne=0;;){for(Ot=(s+Ne|0)+2248|0,g=F[Ot|0],Ye=0;;){ni=ne(g,9),ci=H+Ye|0,Mi=ne(F[ci|0],90),k=F[ni+(Mi+3504|0)|0],W=c[n+4>>2],g=c[n+8>>2];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){E=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}Or(n),g=c[n+8>>2]}ee=n,Tt=g,R=c[n>>2],mt=R>>>g|0,k=ne(k,W)>>>8|0;t:{if(mt>>>0>k>>>0){R=((k^-1)<<g)+R|0,c[n>>2]=R,W=W-k|0;break t}W=k+1|0}if(a=Br(W)^24,g=Tt-a|0,c[ee+8>>2]=g,a=(W<<a)+-1|0,c[n+4>>2]=a,k=mt>>>0>k>>>0,E=p[k+4416|0],41706>>>k&1)for(;;){mt=F[((Mi+3504|0)+ni|0)+E|0];t:{if((g|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){W=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=k+3,R=R<<24|(W>>>8&65280|(W<<8&16711680|W<<24))>>>8,c[n>>2]=R;break t}Or(n),R=c[n>>2],g=c[n+8>>2]}k=E<<1,ee=n,Tt=g,ki=R>>>g|0,W=ne(a,mt)>>>8|0;t:{if(ki>>>0>W>>>0){R=((W^-1)<<g)+R|0,c[n>>2]=R,a=a-W|0;break t}a=W+1|0}if(E=Br(a)^24,g=Tt-E|0,c[ee+8>>2]=g,a=(a<<E)+-1|0,c[n+4>>2]=a,k=k|ki>>>0>W>>>0,E=p[k+4416|0],!(41706>>>k&1))break}if(g=0-E|0,p[ci|0]=g,Ye=Ye+1|0,(Ye|0)==4)break}if(a=L,L=F[H|0]|F[H+1|0]<<8|(F[H+2|0]<<16|F[H+3|0]<<24),p[a|0]=L,p[a+1|0]=L>>>8,p[a+2|0]=L>>>16,p[a+3|0]=L>>>24,p[Ot|0]=g,L=a+4|0,Ne=Ne+1|0,(Ne|0)==4)break}}R=c[n+4>>2],g=c[n+8>>2];e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Or(n),g=c[n+8>>2]}L=n,W=g,E=c[n>>2],k=ne(R,142)>>>8|0,H=E>>>g>>>0<=k>>>0;e:{if(!H){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break e}k=k+1|0}a=Br(k)^24,g=W-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,a=0;e:{if(H)break e;t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Or(n),E=c[n>>2],g=c[n+8>>2]}L=n,W=g,k=ne(R,114)>>>8|0,H=E>>>g>>>0<=k>>>0;t:{if(!H){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break t}k=k+1|0}if(a=Br(k)^24,g=W-a|0,c[L+8>>2]=g,k=(k<<a)+-1|0,c[n+4>>2]=k,a=2,H)break e;t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Or(n),E=c[n>>2],g=c[n+8>>2]}a=ne(k,183)>>>8|0;t:{if(E>>>g>>>0>a>>>0){c[n>>2]=((a^-1)<<g)+E,E=k-a|0,a=1;break t}E=a+1|0,a=3}k=g,g=Br(E)^24,c[n+8>>2]=k-g,c[n+4>>2]=(E<<g)+-1}if(p[ce+785|0]=a,xe=xe+1|0,!((xe|0)<c[s+288>>2]))break}return!c[s+36>>2]}function ql(n,s,a,g,k,E){var L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0,ms=0,Aa=0,dl=0,Xu=0,Gh=0;ir=n+124|0,L=c[n+112>>2],Ye=(L|0)/(a|0)|0,Ne=n+24|0,Ir=(ne(a,g)<<2)+s|0,g=(L<<2)+s|0;e:{t:{mt=ne(a,k);i:{if((L|0)>=(mt|0))break i;for(xe=mt<<2,Ot=L-ne(a,Ye)|0,ms=c[n+148>>2],mt=0,bn=c[n+120>>2],nn=(bn|0)>0?ir:0,Aa=c[n+56>>2]?Ye:16777216,dl=bn+280|0,Xu=s+xe|0,ce=c[n+168>>2],L=c[n+152>>2],L&&(mt=c[c[n+160>>2]+(ne(c[n+156>>2],Ye>>L)+(Ot>>L)<<2)>>2]),ni=ce+ne(mt,548)|0,Gh=n+136|0,ki=n- -64|0,mt=g;;){(Ye|0)>=(Aa|0)&&(L=c[Ne+4>>2],c[ki>>2]=c[Ne>>2],c[ki+4>>2]=L,L=c[Ne+28>>2],c[ki+24>>2]=c[Ne+24>>2],c[ki+28>>2]=L,L=c[Ne+20>>2],c[ki+16>>2]=c[Ne+16>>2],c[ki+20>>2]=L,L=c[Ne+12>>2],c[ki+8>>2]=c[Ne+8>>2],c[ki+12>>2]=L,c[n+96>>2]=g-s>>2,c[n+120>>2]>=1&&m0(ir,Gh),Aa=Ye+8|0);n:{o:{l:{if(!(Ot&ms)){L=c[n+168>>2],W=c[n+152>>2],ce=0;r:{if(!W)break r;ce=c[c[n+160>>2]+(ne(c[n+156>>2],Ye>>W)+(Ot>>W)<<2)>>2]}ni=L+ne(ce,548)|0}if(c[ni+28>>2]){H=c[ni+24>>2];break l}c[n+44>>2]>=32&&Ae(Ne);r:{if(c[ni+32>>2]){L=c[n+28>>2],H=c[n+44>>2],R=H&63,W=R&31,Tt=c[n+24>>2],xe=(((32<=(R&63)>>>0?L>>>W|0:((1<<W)-1&L)<<32-W|Tt>>>W)&63)<<3)+ni|0,W=c[xe+36>>2],ce=H+W|0,H=c[xe+40>>2];u:{if((W|0)<=255){c[n+44>>2]=ce,c[g>>2]=H,H=0;break u}c[n+44>>2]=ce+-256}if(c[n+48>>2]|(c[n+44>>2]>64?c[n+40>>2]==c[n+36>>2]:0))break i;if(H)break r;break o}if(xe=n,L=c[n+28>>2],H=c[n+44>>2],ee=H&63,W=ee&31,Tt=c[n+24>>2],R=c[ni>>2]+(((32<=(ee&63)>>>0?L>>>W|0:((1<<W)-1&L)<<32-W|Tt>>>W)&255)<<2)|0,W=F[R|0],W>>>0>=9&&(H=H+8|0,c[n+44>>2]=H,ce=(mn[R+2>>1]<<2)+R|0,ci=H&63,R=ci&31,R=ce+(((-1<<W+-8^-1)&(32<=(ci&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Tt>>>R))<<2)|0,W=F[R|0]),c[xe+44>>2]=(W&255)+H,c[n+48>>2])break i;H=mn[R+2>>1]}if(c[n+44>>2]>64&&c[n+40>>2]==c[n+36>>2])break i;if((H|0)<=255){if(c[ni+20>>2]){H=c[ni+24>>2]|H<<8;break l}if(xe=n,R=c[n+44>>2],ci=R&63,ce=ci&31,ee=c[ni+4>>2]+(((32<=(ci&63)>>>0?L>>>ce|0:((1<<ce)-1&L)<<32-ce|Tt>>>ce)&255)<<2)|0,W=F[ee|0],W>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,ce=(mn[ee+2>>1]<<2)+ee|0,Gi=R&63,ee=Gi&31,ee=ce+(((-1<<W+-8^-1)&(32<=(Gi&63)>>>0?L>>>ee|0:((1<<ee)-1&L)<<32-ee|Tt>>>ee))<<2)|0,W=F[ee|0]),R=(W&255)+R|0,c[xe+44>>2]=R,ci=mn[ee+2>>1],(R|0)>=32&&(Ae(Ne),Tt=c[n+24>>2],R=c[n+44>>2],L=c[n+28>>2]),Gi=R&63,ce=Gi&31,ee=c[ni+8>>2]+(((32<=(Gi&63)>>>0?L>>>ce|0:((1<<ce)-1&L)<<32-ce|Tt>>>ce)&255)<<2)|0,W=F[ee|0],W>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,ce=(mn[ee+2>>1]<<2)+ee|0,Mi=R&63,ee=Mi&31,ee=ce+(((-1<<W+-8^-1)&(32<=Mi>>>0?L>>>ee|0:((1<<ee)-1&L)<<32-ee|Tt>>>ee))<<2)|0,W=F[ee|0]),R=(W&255)+R|0,c[xe+44>>2]=R,Gi=mn[ee+2>>1],ce=n,Mi=R&63,xe=Mi&31,ee=c[ni+12>>2]+(((32<=Mi>>>0?L>>>xe|0:((1<<xe)-1&L)<<32-xe|Tt>>>xe)&255)<<2)|0,W=F[ee|0],W>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,Mi=(mn[ee+2>>1]<<2)+ee|0,ee=R&63,xe=ee&31,ee=Mi+(((-1<<W+-8^-1)&(32<=(ee&63)>>>0?L>>>xe|0:((1<<xe)-1&L)<<32-xe|Tt>>>xe))<<2)|0,W=F[ee|0]),L=(W&255)+R|0,c[ce+44>>2]=L,c[n+48>>2]||(W=mn[ee+2>>1],c[n+40>>2]==c[n+36>>2]&&(L|0)>=65))break i;H=Gi|(ci<<16|H<<8)|W<<24;break l}r:{u:{if((H|0)<=279){ce=H+-256|0,(H|0)>=260&&(L=H+-258>>1,ce=no(Ne,L)+((ce&1|2)<<L)|0,Tt=c[Ne>>2],L=c[Ne+4>>2]),xe=n,H=c[n+44>>2],ci=H&63,R=ci&31,R=c[ni+16>>2]+(((32<=(ci&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Tt>>>R)&255)<<2)|0,W=F[R|0],W>>>0>=9&&(H=H+8|0,c[n+44>>2]=H,Mi=(mn[R+2>>1]<<2)+R|0,ee=H&63,R=ee&31,R=Mi+(((-1<<W+-8^-1)&(32<=(ee&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Tt>>>R))<<2)|0,W=F[R|0]),L=(W&255)+H|0,c[xe+44>>2]=L,H=mn[R+2>>1],(L|0)>=32&&Ae(Ne),H>>>0>=4&&(L=H+-2>>1,H=no(Ne,L)+((H&1|2)<<L)|0);s:{if((H+1|0)>=121){L=H+-119|0;break s}L=F[H+1264|0],L=(ne(L>>>4|0,a)-(L&15)|0)+8|0,L=(L|0)>1?L:1}if(c[n+48>>2]|(c[n+44>>2]>64?c[n+40>>2]==c[n+36>>2]:0))break i;if(g-s>>2<(L|0)||(xe=ce+1|0,Ir-g>>2<(xe|0)))break t;if(R=g-(L<<2)|0,!(g&3|(xe|0)<4|(L|0)>2)){s:{if((L|0)==1){H=c[R>>2],W=H,L=W,Tt=L;break s}L=c[R+4>>2],Tt=c[R>>2],H=Tt}s:{if(!(g&4)){ce=xe,W=g;break s}c[g>>2]=H,Tt=gp(Tt,L),L=Fn,R=R+4|0,W=g+4|0}for(H=ce>>>1|0,ee=H>>>0>1?H:1,H=0;ci=W+(H<<3)|0,c[ci>>2]=Tt,c[ci+4>>2]=L,H=H+1|0,(ee|0)!=(H|0););if(!(ce&1))break r;L=ee<<3,c[L+W>>2]=c[L+R>>2];break r}if((L|0)>=(xe|0))break u;if(H=0,(xe|0)<=0)break r;for(;L=H<<2,c[L+g>>2]=c[L+R>>2],L=(H|0)!=(ce|0),H=H+1|0,!!L;);break r}if((H|0)>=(dl|0))break t;if(W=H+-280|0,L=c[nn>>2],mt>>>0<g>>>0)for(;ce=c[mt>>2],c[L+(ne(ce,506832829)>>>c[nn+4>>2]<<2)>>2]=ce,mt=mt+4|0,mt>>>0<g>>>0;);H=c[L+(W<<2)>>2];break l}Xr(g,R,xe<<2)}if(Ot=xe+Ot|0,(Ot|0)>=(a|0))for(;Ot=Ot-a|0,L=Ye,Ye=L+1|0,Ye&15|(!E|(L|0)>=(k|0))||ft[E|0](n,Ye),(Ot|0)>=(a|0););if(ce=xe<<2,Ot&ms){L=c[n+168>>2],W=c[n+152>>2],xe=0;r:{if(!W)break r;xe=c[c[n+160>>2]+(ne(c[n+156>>2],Ye>>W)+(Ot>>W)<<2)>>2]}ni=L+ne(xe,548)|0}if(g=g+ce|0,(bn|0)<1|mt>>>0>=g>>>0)break n;for(L=c[nn>>2];W=c[mt>>2],c[L+(ne(W,506832829)>>>c[nn+4>>2]<<2)>>2]=W,mt=mt+4|0,mt>>>0<g>>>0;);break n}c[g>>2]=H}if(L=g+4|0,Ot=Ot+1|0,(Ot|0)<(a|0)){g=L;break n}if(W=Ye+1|0,W&15|(!E|(Ye|0)>=(k|0))||ft[E|0](n,W),Ot=0,!((bn|0)<1|mt>>>0>=L>>>0)){for(ce=c[nn>>2];Ye=c[mt>>2],c[ce+(ne(Ye,506832829)>>>c[nn+4>>2]<<2)>>2]=Ye,xe=mt>>>0<g>>>0,Ye=mt+4|0,mt=Ye,!!xe;);mt=Ye}g=L,Ye=W}if(!(g>>>0<Xu>>>0))break}}L=n,a=1;i:{if(c[n+48>>2]||(a=0,c[n+40>>2]!=c[n+36>>2]))break i;a=c[n+44>>2]>64}if(c[L+48>>2]=a,!(!c[n+56>>2]|(!a|g>>>0>=Ir>>>0))){if(c[n>>2]=5,s=c[n+68>>2],c[Ne>>2]=c[n+64>>2],c[Ne+4>>2]=s,s=c[n+92>>2],c[Ne+24>>2]=c[n+88>>2],c[Ne+28>>2]=s,s=c[n+84>>2],c[Ne+16>>2]=c[n+80>>2],c[Ne+20>>2]=s,s=c[n+76>>2],c[Ne+8>>2]=c[n+72>>2],c[Ne+12>>2]=s,c[n+112>>2]=c[n+96>>2],s=1,c[n+120>>2]<1)break e;return m0(n+136|0,ir),1}if(a)break t;return E&&ft[E|0](n,(Ye|0)>(k|0)?k:Ye),c[n>>2]=0,c[n+112>>2]=g-s>>2,1}c[n>>2]=3,s=0}return s}function ya(n){n=n|0;var s=0,a=0;a=cr(F[n+31|0],0,16843009,16843009),s=a,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,s=Fn,p[n+36|0]=s,p[n+37|0]=s>>>8,p[n+38|0]=s>>>16,p[n+39|0]=s>>>24,p[n+40|0]=a,p[n+41|0]=a>>>8,p[n+42|0]=a>>>16,p[n+43|0]=a>>>24,p[n+44|0]=s,p[n+45|0]=s>>>8,p[n+46|0]=s>>>16,p[n+47|0]=s>>>24,a=cr(F[n+63|0],0,16843009,16843009),s=a,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,s=Fn,p[n+68|0]=s,p[n+69|0]=s>>>8,p[n+70|0]=s>>>16,p[n+71|0]=s>>>24,p[n+72|0]=a,p[n+73|0]=a>>>8,p[n+74|0]=a>>>16,p[n+75|0]=a>>>24,p[n+76|0]=s,p[n+77|0]=s>>>8,p[n+78|0]=s>>>16,p[n+79|0]=s>>>24,a=cr(F[n+95|0],0,16843009,16843009),s=a,p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,s=Fn,p[n+100|0]=s,p[n+101|0]=s>>>8,p[n+102|0]=s>>>16,p[n+103|0]=s>>>24,p[n+104|0]=a,p[n+105|0]=a>>>8,p[n+106|0]=a>>>16,p[n+107|0]=a>>>24,p[n+108|0]=s,p[n+109|0]=s>>>8,p[n+110|0]=s>>>16,p[n+111|0]=s>>>24,a=cr(F[n+127|0],0,16843009,16843009),s=a,p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,s=Fn,p[n+132|0]=s,p[n+133|0]=s>>>8,p[n+134|0]=s>>>16,p[n+135|0]=s>>>24,p[n+136|0]=a,p[n+137|0]=a>>>8,p[n+138|0]=a>>>16,p[n+139|0]=a>>>24,p[n+140|0]=s,p[n+141|0]=s>>>8,p[n+142|0]=s>>>16,p[n+143|0]=s>>>24,a=cr(F[n+159|0],0,16843009,16843009),s=a,p[n+168|0]=s,p[n+169|0]=s>>>8,p[n+170|0]=s>>>16,p[n+171|0]=s>>>24,s=Fn,p[n+172|0]=s,p[n+173|0]=s>>>8,p[n+174|0]=s>>>16,p[n+175|0]=s>>>24,p[n+160|0]=a,p[n+161|0]=a>>>8,p[n+162|0]=a>>>16,p[n+163|0]=a>>>24,p[n+164|0]=s,p[n+165|0]=s>>>8,p[n+166|0]=s>>>16,p[n+167|0]=s>>>24,a=cr(F[n+-1|0],0,16843009,16843009),s=a,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,s=Fn,p[n+4|0]=s,p[n+5|0]=s>>>8,p[n+6|0]=s>>>16,p[n+7|0]=s>>>24,p[n+8|0]=a,p[n+9|0]=a>>>8,p[n+10|0]=a>>>16,p[n+11|0]=a>>>24,p[n+12|0]=s,p[n+13|0]=s>>>8,p[n+14|0]=s>>>16,p[n+15|0]=s>>>24,a=cr(F[n+191|0],0,16843009,16843009),s=a,p[n+200|0]=s,p[n+201|0]=s>>>8,p[n+202|0]=s>>>16,p[n+203|0]=s>>>24,s=Fn,p[n+204|0]=s,p[n+205|0]=s>>>8,p[n+206|0]=s>>>16,p[n+207|0]=s>>>24,p[n+192|0]=a,p[n+193|0]=a>>>8,p[n+194|0]=a>>>16,p[n+195|0]=a>>>24,p[n+196|0]=s,p[n+197|0]=s>>>8,p[n+198|0]=s>>>16,p[n+199|0]=s>>>24,a=cr(F[n+223|0],0,16843009,16843009),s=a,p[n+232|0]=s,p[n+233|0]=s>>>8,p[n+234|0]=s>>>16,p[n+235|0]=s>>>24,s=Fn,p[n+236|0]=s,p[n+237|0]=s>>>8,p[n+238|0]=s>>>16,p[n+239|0]=s>>>24,p[n+224|0]=a,p[n+225|0]=a>>>8,p[n+226|0]=a>>>16,p[n+227|0]=a>>>24,p[n+228|0]=s,p[n+229|0]=s>>>8,p[n+230|0]=s>>>16,p[n+231|0]=s>>>24,a=cr(F[n+255|0],0,16843009,16843009),s=a,p[n+264|0]=s,p[n+265|0]=s>>>8,p[n+266|0]=s>>>16,p[n+267|0]=s>>>24,s=Fn,p[n+268|0]=s,p[n+269|0]=s>>>8,p[n+270|0]=s>>>16,p[n+271|0]=s>>>24,p[n+256|0]=a,p[n+257|0]=a>>>8,p[n+258|0]=a>>>16,p[n+259|0]=a>>>24,p[n+260|0]=s,p[n+261|0]=s>>>8,p[n+262|0]=s>>>16,p[n+263|0]=s>>>24,a=cr(F[n+287|0],0,16843009,16843009),s=a,p[n+296|0]=s,p[n+297|0]=s>>>8,p[n+298|0]=s>>>16,p[n+299|0]=s>>>24,s=Fn,p[n+300|0]=s,p[n+301|0]=s>>>8,p[n+302|0]=s>>>16,p[n+303|0]=s>>>24,p[n+288|0]=a,p[n+289|0]=a>>>8,p[n+290|0]=a>>>16,p[n+291|0]=a>>>24,p[n+292|0]=s,p[n+293|0]=s>>>8,p[n+294|0]=s>>>16,p[n+295|0]=s>>>24,a=cr(F[n+319|0],0,16843009,16843009),s=a,p[n+328|0]=s,p[n+329|0]=s>>>8,p[n+330|0]=s>>>16,p[n+331|0]=s>>>24,s=Fn,p[n+332|0]=s,p[n+333|0]=s>>>8,p[n+334|0]=s>>>16,p[n+335|0]=s>>>24,p[n+320|0]=a,p[n+321|0]=a>>>8,p[n+322|0]=a>>>16,p[n+323|0]=a>>>24,p[n+324|0]=s,p[n+325|0]=s>>>8,p[n+326|0]=s>>>16,p[n+327|0]=s>>>24,a=cr(F[n+351|0],0,16843009,16843009),s=a,p[n+360|0]=s,p[n+361|0]=s>>>8,p[n+362|0]=s>>>16,p[n+363|0]=s>>>24,s=Fn,p[n+364|0]=s,p[n+365|0]=s>>>8,p[n+366|0]=s>>>16,p[n+367|0]=s>>>24,p[n+352|0]=a,p[n+353|0]=a>>>8,p[n+354|0]=a>>>16,p[n+355|0]=a>>>24,p[n+356|0]=s,p[n+357|0]=s>>>8,p[n+358|0]=s>>>16,p[n+359|0]=s>>>24,a=cr(F[n+383|0],0,16843009,16843009),s=a,p[n+392|0]=s,p[n+393|0]=s>>>8,p[n+394|0]=s>>>16,p[n+395|0]=s>>>24,s=Fn,p[n+396|0]=s,p[n+397|0]=s>>>8,p[n+398|0]=s>>>16,p[n+399|0]=s>>>24,p[n+384|0]=a,p[n+385|0]=a>>>8,p[n+386|0]=a>>>16,p[n+387|0]=a>>>24,p[n+388|0]=s,p[n+389|0]=s>>>8,p[n+390|0]=s>>>16,p[n+391|0]=s>>>24,a=cr(F[n+415|0],0,16843009,16843009),s=a,p[n+424|0]=s,p[n+425|0]=s>>>8,p[n+426|0]=s>>>16,p[n+427|0]=s>>>24,s=Fn,p[n+428|0]=s,p[n+429|0]=s>>>8,p[n+430|0]=s>>>16,p[n+431|0]=s>>>24,p[n+416|0]=a,p[n+417|0]=a>>>8,p[n+418|0]=a>>>16,p[n+419|0]=a>>>24,p[n+420|0]=s,p[n+421|0]=s>>>8,p[n+422|0]=s>>>16,p[n+423|0]=s>>>24,a=cr(F[n+447|0],0,16843009,16843009),s=a,p[n+456|0]=s,p[n+457|0]=s>>>8,p[n+458|0]=s>>>16,p[n+459|0]=s>>>24,s=Fn,p[n+460|0]=s,p[n+461|0]=s>>>8,p[n+462|0]=s>>>16,p[n+463|0]=s>>>24,p[n+448|0]=a,p[n+449|0]=a>>>8,p[n+450|0]=a>>>16,p[n+451|0]=a>>>24,p[n+452|0]=s,p[n+453|0]=s>>>8,p[n+454|0]=s>>>16,p[n+455|0]=s>>>24,a=cr(F[n+479|0],0,16843009,16843009),s=a,p[n+488|0]=s,p[n+489|0]=s>>>8,p[n+490|0]=s>>>16,p[n+491|0]=s>>>24,s=Fn,p[n+492|0]=s,p[n+493|0]=s>>>8,p[n+494|0]=s>>>16,p[n+495|0]=s>>>24,p[n+480|0]=a,p[n+481|0]=a>>>8,p[n+482|0]=a>>>16,p[n+483|0]=a>>>24,p[n+484|0]=s,p[n+485|0]=s>>>8,p[n+486|0]=s>>>16,p[n+487|0]=s>>>24}function bo(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;R=c[n+4>>2],E=F[s+3|0],a=c[n+8>>2];e:{if((a|0)>-1)break e;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),c[n+12>>2]=k+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Or(n),a=c[n+8>>2]}L=n,H=a,g=c[n>>2],W=g>>>a|0,E=ne(E,R)>>>8|0;e:{if(W>>>0>E>>>0){g=((E^-1)<<a)+g|0,c[n>>2]=g,R=R-E|0;break e}R=E+1|0}k=Br(R)^24,a=H-k|0,c[L+8>>2]=a,R=(R<<k)+-1|0,c[n+4>>2]=R;e:{if(W>>>0<=E>>>0){E=F[s+4|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,E=ne(E,R)>>>8|0,W=g>>>a>>>0<=E>>>0;t:{if(!W){g=((E^-1)<<a)+g|0,c[n>>2]=g,E=R-E|0;break t}E=E+1|0}if(k=Br(E)^24,a=H-k|0,c[L+8>>2]=a,R=(E<<k)+-1|0,c[n+4>>2]=R,E=2,W)break e;L=F[s+5|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,E=ne(L,R)>>>8|0;t:{if(g>>>a>>>0>E>>>0){c[n>>2]=((E^-1)<<a)+g,L=4,a=R-E|0;break t}L=3,a=E+1|0}return s=Br(a)^24,c[H+8>>2]=k-s,c[n+4>>2]=(a<<s)+-1,L}E=F[s+6|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,W=g>>>a|0,E=ne(E,R)>>>8|0;t:{if(W>>>0>E>>>0){g=((E^-1)<<a)+g|0,c[n>>2]=g,R=R-E|0;break t}R=E+1|0}if(k=Br(R)^24,a=H-k|0,c[L+8>>2]=a,R=(R<<k)+-1|0,c[n+4>>2]=R,W>>>0<=E>>>0){L=F[s+7|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,W=g>>>a|0,L=ne(L,R)>>>8|0;t:{if(W>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=R-L|0;break t}E=L+1|0}if(s=Br(E)^24,a=k-s|0,c[H+8>>2]=a,R=(E<<s)+-1|0,c[n+4>>2]=R,W>>>0<=L>>>0){t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}s=ne(R,159)>>>8|0;t:{if(g>>>a>>>0>s>>>0){c[n>>2]=((s^-1)<<a)+g,g=R-s|0,s=6;break t}g=s+1|0,s=5}return E=a,a=Br(g)^24,c[n+8>>2]=E-a,c[n+4>>2]=(g<<a)+-1,s}t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,L=ne(R,165)>>>8|0;t:{if(g>>>a>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=9,L=R-L|0;break t}E=7,L=L+1|0}s=Br(L)^24,a=k-s|0,c[H+8>>2]=a,R=(L<<s)+-1|0,c[n+4>>2]=R;t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,W=g>>>a|0,L=ne(R,145)>>>8|0;t:{if(W>>>0>L>>>0){c[n>>2]=((L^-1)<<a)+g,a=R-L|0;break t}a=L+1|0}return s=Br(a)^24,c[H+8>>2]=k-s,c[n+4>>2]=(a<<s)+-1,(W>>>0>L>>>0)+E|0}E=F[s+8|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,ee=g>>>a|0,W=ne(E,R)>>>8|0;t:{if(ee>>>0>W>>>0){g=((W^-1)<<a)+g|0,c[n>>2]=g,ce=10,E=R-W|0;break t}ce=9,E=W+1|0}k=Br(E)^24,a=H-k|0,c[L+8>>2]=a,E=(E<<k)+-1|0,c[n+4>>2]=E,L=F[s+ce|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Or(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,R=g>>>a|0,L=ne(L,E)>>>8|0;t:{if(R>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=E-L|0;break t}E=L+1|0}s=Br(E)^24,a=k-s|0,c[H+8>>2]=a,E=(E<<s)+-1|0,c[n+4>>2]=E,ce=(ee>>>0>W>>>0)<<1|R>>>0>L>>>0,L=c[(ce<<2)+10160>>2],s=F[L|0];t:{if(!s){R=0;break t}for(R=0;;){W=s&255;i:{if((a|0)>-1)break i;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break i}Or(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,ee=g>>>a|0,W=ne(E,W)>>>8|0;i:{if(ee>>>0>W>>>0){g=((W^-1)<<a)+g|0,c[n>>2]=g,E=E-W|0;break i}E=W+1|0}if(s=Br(E)^24,a=k-s|0,c[H+8>>2]=a,E=(E<<s)+-1|0,c[n+4>>2]=E,R=R<<1|ee>>>0>W>>>0,s=F[L+1|0],L=L+1|0,!s)break}}E=(8<<ce|3)+R|0}return E}function se(n){n=n|0,p[n|0]=-2139062144,p[n+1|0]=8421504,p[n+2|0]=32896,p[n+3|0]=128,p[n+4|0]=-2139062144,p[n+5|0]=8421504,p[n+6|0]=32896,p[n+7|0]=128,p[n+32|0]=-2139062144,p[n+33|0]=8421504,p[n+34|0]=32896,p[n+35|0]=128,p[n+36|0]=-2139062144,p[n+37|0]=8421504,p[n+38|0]=32896,p[n+39|0]=128,p[n+64|0]=-2139062144,p[n+65|0]=8421504,p[n+66|0]=32896,p[n+67|0]=128,p[n+68|0]=-2139062144,p[n+69|0]=8421504,p[n+70|0]=32896,p[n+71|0]=128,p[n+96|0]=-2139062144,p[n+97|0]=8421504,p[n+98|0]=32896,p[n+99|0]=128,p[n+100|0]=-2139062144,p[n+101|0]=8421504,p[n+102|0]=32896,p[n+103|0]=128,p[n+128|0]=-2139062144,p[n+129|0]=8421504,p[n+130|0]=32896,p[n+131|0]=128,p[n+132|0]=-2139062144,p[n+133|0]=8421504,p[n+134|0]=32896,p[n+135|0]=128,p[n+160|0]=-2139062144,p[n+161|0]=8421504,p[n+162|0]=32896,p[n+163|0]=128,p[n+164|0]=-2139062144,p[n+165|0]=8421504,p[n+166|0]=32896,p[n+167|0]=128,p[n+192|0]=-2139062144,p[n+193|0]=8421504,p[n+194|0]=32896,p[n+195|0]=128,p[n+196|0]=-2139062144,p[n+197|0]=8421504,p[n+198|0]=32896,p[n+199|0]=128,p[n+224|0]=-2139062144,p[n+225|0]=8421504,p[n+226|0]=32896,p[n+227|0]=128,p[n+228|0]=-2139062144,p[n+229|0]=8421504,p[n+230|0]=32896,p[n+231|0]=128,p[n+256|0]=-2139062144,p[n+257|0]=8421504,p[n+258|0]=32896,p[n+259|0]=128,p[n+260|0]=-2139062144,p[n+261|0]=8421504,p[n+262|0]=32896,p[n+263|0]=128,p[n+8|0]=-2139062144,p[n+9|0]=8421504,p[n+10|0]=32896,p[n+11|0]=128,p[n+12|0]=-2139062144,p[n+13|0]=8421504,p[n+14|0]=32896,p[n+15|0]=128,p[n+40|0]=-2139062144,p[n+41|0]=8421504,p[n+42|0]=32896,p[n+43|0]=128,p[n+44|0]=-2139062144,p[n+45|0]=8421504,p[n+46|0]=32896,p[n+47|0]=128,p[n+72|0]=-2139062144,p[n+73|0]=8421504,p[n+74|0]=32896,p[n+75|0]=128,p[n+76|0]=-2139062144,p[n+77|0]=8421504,p[n+78|0]=32896,p[n+79|0]=128,p[n+104|0]=-2139062144,p[n+105|0]=8421504,p[n+106|0]=32896,p[n+107|0]=128,p[n+108|0]=-2139062144,p[n+109|0]=8421504,p[n+110|0]=32896,p[n+111|0]=128,p[n+136|0]=-2139062144,p[n+137|0]=8421504,p[n+138|0]=32896,p[n+139|0]=128,p[n+140|0]=-2139062144,p[n+141|0]=8421504,p[n+142|0]=32896,p[n+143|0]=128,p[n+168|0]=-2139062144,p[n+169|0]=8421504,p[n+170|0]=32896,p[n+171|0]=128,p[n+172|0]=-2139062144,p[n+173|0]=8421504,p[n+174|0]=32896,p[n+175|0]=128,p[n+200|0]=-2139062144,p[n+201|0]=8421504,p[n+202|0]=32896,p[n+203|0]=128,p[n+204|0]=-2139062144,p[n+205|0]=8421504,p[n+206|0]=32896,p[n+207|0]=128,p[n+232|0]=-2139062144,p[n+233|0]=8421504,p[n+234|0]=32896,p[n+235|0]=128,p[n+236|0]=-2139062144,p[n+237|0]=8421504,p[n+238|0]=32896,p[n+239|0]=128,p[n+264|0]=-2139062144,p[n+265|0]=8421504,p[n+266|0]=32896,p[n+267|0]=128,p[n+268|0]=-2139062144,p[n+269|0]=8421504,p[n+270|0]=32896,p[n+271|0]=128,p[n+296|0]=-2139062144,p[n+297|0]=8421504,p[n+298|0]=32896,p[n+299|0]=128,p[n+300|0]=-2139062144,p[n+301|0]=8421504,p[n+302|0]=32896,p[n+303|0]=128,p[n+288|0]=-2139062144,p[n+289|0]=8421504,p[n+290|0]=32896,p[n+291|0]=128,p[n+292|0]=-2139062144,p[n+293|0]=8421504,p[n+294|0]=32896,p[n+295|0]=128,p[n+328|0]=-2139062144,p[n+329|0]=8421504,p[n+330|0]=32896,p[n+331|0]=128,p[n+332|0]=-2139062144,p[n+333|0]=8421504,p[n+334|0]=32896,p[n+335|0]=128,p[n+320|0]=-2139062144,p[n+321|0]=8421504,p[n+322|0]=32896,p[n+323|0]=128,p[n+324|0]=-2139062144,p[n+325|0]=8421504,p[n+326|0]=32896,p[n+327|0]=128,p[n+360|0]=-2139062144,p[n+361|0]=8421504,p[n+362|0]=32896,p[n+363|0]=128,p[n+364|0]=-2139062144,p[n+365|0]=8421504,p[n+366|0]=32896,p[n+367|0]=128,p[n+352|0]=-2139062144,p[n+353|0]=8421504,p[n+354|0]=32896,p[n+355|0]=128,p[n+356|0]=-2139062144,p[n+357|0]=8421504,p[n+358|0]=32896,p[n+359|0]=128,p[n+392|0]=-2139062144,p[n+393|0]=8421504,p[n+394|0]=32896,p[n+395|0]=128,p[n+396|0]=-2139062144,p[n+397|0]=8421504,p[n+398|0]=32896,p[n+399|0]=128,p[n+384|0]=-2139062144,p[n+385|0]=8421504,p[n+386|0]=32896,p[n+387|0]=128,p[n+388|0]=-2139062144,p[n+389|0]=8421504,p[n+390|0]=32896,p[n+391|0]=128,p[n+424|0]=-2139062144,p[n+425|0]=8421504,p[n+426|0]=32896,p[n+427|0]=128,p[n+428|0]=-2139062144,p[n+429|0]=8421504,p[n+430|0]=32896,p[n+431|0]=128,p[n+416|0]=-2139062144,p[n+417|0]=8421504,p[n+418|0]=32896,p[n+419|0]=128,p[n+420|0]=-2139062144,p[n+421|0]=8421504,p[n+422|0]=32896,p[n+423|0]=128,p[n+456|0]=-2139062144,p[n+457|0]=8421504,p[n+458|0]=32896,p[n+459|0]=128,p[n+460|0]=-2139062144,p[n+461|0]=8421504,p[n+462|0]=32896,p[n+463|0]=128,p[n+448|0]=-2139062144,p[n+449|0]=8421504,p[n+450|0]=32896,p[n+451|0]=128,p[n+452|0]=-2139062144,p[n+453|0]=8421504,p[n+454|0]=32896,p[n+455|0]=128,p[n+488|0]=-2139062144,p[n+489|0]=8421504,p[n+490|0]=32896,p[n+491|0]=128,p[n+492|0]=-2139062144,p[n+493|0]=8421504,p[n+494|0]=32896,p[n+495|0]=128,p[n+480|0]=-2139062144,p[n+481|0]=8421504,p[n+482|0]=32896,p[n+483|0]=128,p[n+484|0]=-2139062144,p[n+485|0]=8421504,p[n+486|0]=32896,p[n+487|0]=128}function Ue(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;s=n,E=s+-32|0,g=E,k=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),n=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),a=n,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=k,p[s+5|0]=k>>>8,p[s+6|0]=k>>>16,p[s+7|0]=k>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=k,p[s+37|0]=k>>>8,p[s+38|0]=k>>>16,p[s+39|0]=k>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=k,p[s+69|0]=k>>>8,p[s+70|0]=k>>>16,p[s+71|0]=k>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=k,p[s+101|0]=k>>>8,p[s+102|0]=k>>>16,p[s+103|0]=k>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=k,p[s+133|0]=k>>>8,p[s+134|0]=k>>>16,p[s+135|0]=k>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=k,p[s+165|0]=k>>>8,p[s+166|0]=k>>>16,p[s+167|0]=k>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=k,p[s+197|0]=k>>>8,p[s+198|0]=k>>>16,p[s+199|0]=k>>>24,p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=k,p[s+229|0]=k>>>8,p[s+230|0]=k>>>16,p[s+231|0]=k>>>24,k=g+8|0,g=F[k+4|0]|F[k+5|0]<<8|(F[k+6|0]<<16|F[k+7|0]<<24),n=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=n,p[s+8|0]=a,p[s+9|0]=a>>>8,p[s+10|0]=a>>>16,p[s+11|0]=a>>>24,p[s+12|0]=g,p[s+13|0]=g>>>8,p[s+14|0]=g>>>16,p[s+15|0]=g>>>24,p[s+40|0]=a,p[s+41|0]=a>>>8,p[s+42|0]=a>>>16,p[s+43|0]=a>>>24,p[s+44|0]=g,p[s+45|0]=g>>>8,p[s+46|0]=g>>>16,p[s+47|0]=g>>>24,p[s+72|0]=a,p[s+73|0]=a>>>8,p[s+74|0]=a>>>16,p[s+75|0]=a>>>24,p[s+76|0]=g,p[s+77|0]=g>>>8,p[s+78|0]=g>>>16,p[s+79|0]=g>>>24,p[s+104|0]=a,p[s+105|0]=a>>>8,p[s+106|0]=a>>>16,p[s+107|0]=a>>>24,p[s+108|0]=g,p[s+109|0]=g>>>8,p[s+110|0]=g>>>16,p[s+111|0]=g>>>24,p[s+136|0]=a,p[s+137|0]=a>>>8,p[s+138|0]=a>>>16,p[s+139|0]=a>>>24,p[s+140|0]=g,p[s+141|0]=g>>>8,p[s+142|0]=g>>>16,p[s+143|0]=g>>>24,p[s+168|0]=a,p[s+169|0]=a>>>8,p[s+170|0]=a>>>16,p[s+171|0]=a>>>24,p[s+172|0]=g,p[s+173|0]=g>>>8,p[s+174|0]=g>>>16,p[s+175|0]=g>>>24,p[s+200|0]=a,p[s+201|0]=a>>>8,p[s+202|0]=a>>>16,p[s+203|0]=a>>>24,p[s+204|0]=g,p[s+205|0]=g>>>8,p[s+206|0]=g>>>16,p[s+207|0]=g>>>24,p[s+232|0]=a,p[s+233|0]=a>>>8,p[s+234|0]=a>>>16,p[s+235|0]=a>>>24,p[s+236|0]=g,p[s+237|0]=g>>>8,p[s+238|0]=g>>>16,p[s+239|0]=g>>>24,g=F[k+4|0]|F[k+5|0]<<8|(F[k+6|0]<<16|F[k+7|0]<<24),L=g,a=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),p[s+264|0]=a,p[s+265|0]=a>>>8,p[s+266|0]=a>>>16,p[s+267|0]=a>>>24,p[s+268|0]=g,p[s+269|0]=g>>>8,p[s+270|0]=g>>>16,p[s+271|0]=g>>>24,g=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),n=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),E=n,p[s+256|0]=E,p[s+257|0]=E>>>8,p[s+258|0]=E>>>16,p[s+259|0]=E>>>24,p[s+260|0]=g,p[s+261|0]=g>>>8,p[s+262|0]=g>>>16,p[s+263|0]=g>>>24,p[s+296|0]=a,p[s+297|0]=a>>>8,p[s+298|0]=a>>>16,p[s+299|0]=a>>>24,p[s+300|0]=L,p[s+301|0]=L>>>8,p[s+302|0]=L>>>16,p[s+303|0]=L>>>24,p[s+288|0]=E,p[s+289|0]=E>>>8,p[s+290|0]=E>>>16,p[s+291|0]=E>>>24,p[s+292|0]=g,p[s+293|0]=g>>>8,p[s+294|0]=g>>>16,p[s+295|0]=g>>>24,p[s+328|0]=a,p[s+329|0]=a>>>8,p[s+330|0]=a>>>16,p[s+331|0]=a>>>24,p[s+332|0]=L,p[s+333|0]=L>>>8,p[s+334|0]=L>>>16,p[s+335|0]=L>>>24,p[s+320|0]=E,p[s+321|0]=E>>>8,p[s+322|0]=E>>>16,p[s+323|0]=E>>>24,p[s+324|0]=g,p[s+325|0]=g>>>8,p[s+326|0]=g>>>16,p[s+327|0]=g>>>24,p[s+360|0]=a,p[s+361|0]=a>>>8,p[s+362|0]=a>>>16,p[s+363|0]=a>>>24,p[s+364|0]=L,p[s+365|0]=L>>>8,p[s+366|0]=L>>>16,p[s+367|0]=L>>>24,p[s+352|0]=E,p[s+353|0]=E>>>8,p[s+354|0]=E>>>16,p[s+355|0]=E>>>24,p[s+356|0]=g,p[s+357|0]=g>>>8,p[s+358|0]=g>>>16,p[s+359|0]=g>>>24,p[s+384|0]=E,p[s+385|0]=E>>>8,p[s+386|0]=E>>>16,p[s+387|0]=E>>>24,p[s+388|0]=g,p[s+389|0]=g>>>8,p[s+390|0]=g>>>16,p[s+391|0]=g>>>24,p[s+392|0]=a,p[s+393|0]=a>>>8,p[s+394|0]=a>>>16,p[s+395|0]=a>>>24,p[s+396|0]=L,p[s+397|0]=L>>>8,p[s+398|0]=L>>>16,p[s+399|0]=L>>>24,p[s+424|0]=a,p[s+425|0]=a>>>8,p[s+426|0]=a>>>16,p[s+427|0]=a>>>24,p[s+428|0]=L,p[s+429|0]=L>>>8,p[s+430|0]=L>>>16,p[s+431|0]=L>>>24,p[s+416|0]=E,p[s+417|0]=E>>>8,p[s+418|0]=E>>>16,p[s+419|0]=E>>>24,p[s+420|0]=g,p[s+421|0]=g>>>8,p[s+422|0]=g>>>16,p[s+423|0]=g>>>24,p[s+448|0]=E,p[s+449|0]=E>>>8,p[s+450|0]=E>>>16,p[s+451|0]=E>>>24,p[s+452|0]=g,p[s+453|0]=g>>>8,p[s+454|0]=g>>>16,p[s+455|0]=g>>>24,p[s+456|0]=a,p[s+457|0]=a>>>8,p[s+458|0]=a>>>16,p[s+459|0]=a>>>24,p[s+460|0]=L,p[s+461|0]=L>>>8,p[s+462|0]=L>>>16,p[s+463|0]=L>>>24,p[s+488|0]=a,p[s+489|0]=a>>>8,p[s+490|0]=a>>>16,p[s+491|0]=a>>>24,p[s+492|0]=L,p[s+493|0]=L>>>8,p[s+494|0]=L>>>16,p[s+495|0]=L>>>24,p[s+480|0]=E,p[s+481|0]=E>>>8,p[s+482|0]=E>>>16,p[s+483|0]=E>>>24,p[s+484|0]=g,p[s+485|0]=g>>>8,p[s+486|0]=g>>>16,p[s+487|0]=g>>>24}function At(n,s,a,g,k){var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;E=Nn-80|0,Nn=E,c[E+76>>2]=s,ci=E+55|0,Tt=E+56|0,s=0;e:{t:for(;;){i:{if((Ne|0)<0)break i;if((s|0)>(2147483647-Ne|0)){c[2865]=61,Ne=-1;break i}Ne=s+Ne|0}i:{n:{o:{if(W=c[E+76>>2],s=W,L=F[s|0],L)for(;;){l:{L=L&255;r:{if(!L){L=s;break r}if((L|0)!=37)break l;for(L=s;;){if(F[s+1|0]!=37)break r;if(R=s+2|0,c[E+76>>2]=R,L=L+1|0,H=F[s+2|0],s=R,(H|0)!=37)break}}if(s=L-W|0,n&&qh(n,W,s),s)continue t;L=E,R=!Ef(p[c[E+76>>2]+1|0]),s=c[E+76>>2];r:{if(!(R|F[s+2|0]!=36)){mt=p[s+1|0]+-48|0,Ot=1,s=s+3|0;break r}mt=-1,s=s+1|0}c[L+76>>2]=s,ee=0,Ye=p[s|0],R=Ye+-32|0;r:{if(R>>>0>31){L=s;break r}if(L=s,R=1<<R,!(R&75913))break r;for(;;){if(L=s+1|0,c[E+76>>2]=L,ee=R|ee,Ye=p[s+1|0],R=Ye+-32|0,R>>>0>=32)break r;if(s=L,R=1<<R,!(R&75913))break}}r:{if((Ye|0)==42){R=E;u:{s:{if(!Ef(p[L+1|0])||(s=c[E+76>>2],F[s+2|0]!=36))break s;c[((p[s+1|0]<<2)+k|0)+-192>>2]=10,ce=c[((p[s+1|0]<<3)+g|0)+-384>>2],Ot=1,s=s+3|0;break u}if(Ot)break o;Ot=0,ce=0,n&&(s=c[a>>2],c[a>>2]=s+4,ce=c[s>>2]),s=c[E+76>>2]+1|0}if(c[R+76>>2]=s,(ce|0)>-1)break r;ce=0-ce|0,ee=ee|8192;break r}if(ce=Qs(E+76|0),(ce|0)<0)break o;s=c[E+76>>2]}H=-1;r:{if(F[s|0]!=46)break r;if(F[s+1|0]==42){u:{if(!Ef(p[s+2|0])||(s=c[E+76>>2],F[s+3|0]!=36))break u;c[((p[s+2|0]<<2)+k|0)+-192>>2]=10,H=c[((p[s+2|0]<<3)+g|0)+-384>>2],s=s+4|0,c[E+76>>2]=s;break r}if(Ot)break o;n?(s=c[a>>2],c[a>>2]=s+4,H=c[s>>2]):H=0,s=c[E+76>>2]+2|0,c[E+76>>2]=s;break r}c[E+76>>2]=s+1,H=Qs(E+76|0),s=c[E+76>>2]}for(L=0;;){if(ni=L,xe=-1,p[s|0]+-65>>>0>57)break e;if(Ye=s+1|0,c[E+76>>2]=Ye,L=p[s|0],s=Ye,L=F[(L+ne(ni,58)|0)+9599|0],!(L+-1>>>0<8))break}r:{u:{if((L|0)!=19){if(!L)break e;if((mt|0)>=0){c[(mt<<2)+k>>2]=L,s=(mt<<3)+g|0,L=c[s+4>>2],c[E+64>>2]=c[s>>2],c[E+68>>2]=L;break u}if(!n)break i;wu(E- -64|0,L,a),Ye=c[E+76>>2];break r}if((mt|0)>-1)break e}if(s=0,!n)continue t}R=ee&-65537,L=ee&8192?R:ee,xe=0,mt=9644,ee=Tt;r:{u:{s:{a:{f:{c:{h:{d:{p:{m:{_:{v:{b:{g:{w:{y:switch(s=p[Ye+-1|0],s=ni&&(s&15)==3?s&-33:s,s+-88|0){case 11:break r;case 9:case 13:case 14:case 15:break u;case 27:break h;case 12:case 17:break m;case 23:break _;case 0:case 32:break v;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break n;default:break y}y:switch(s+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break n;default:break y}if((s|0)==83)break c;break n}s=c[E+64>>2],W=c[E+68>>2],mt=9644;break p}s=0;g:switch(ni&255){case 0:c[c[E+64>>2]>>2]=Ne;continue t;case 1:c[c[E+64>>2]>>2]=Ne;continue t;case 2:L=c[E+64>>2],c[L>>2]=Ne,c[L+4>>2]=Ne>>31;continue t;case 3:Di[c[E+64>>2]>>1]=Ne;continue t;case 4:p[c[E+64>>2]]=Ne;continue t;case 6:c[c[E+64>>2]>>2]=Ne;continue t;case 7:break g;default:continue t}L=c[E+64>>2],c[L>>2]=Ne,c[L+4>>2]=Ne>>31;continue t}H=H>>>0>8?H:8,L=L|8,s=120}if(W=fh(c[E+64>>2],c[E+68>>2],Tt,s&32),!(L&8)|!(c[E+64>>2]|c[E+68>>2]))break d;mt=(s>>>4|0)+9644|0,xe=2;break d}if(W=u0(c[E+64>>2],c[E+68>>2],Tt),!(L&8))break d;s=Tt-W|0,H=(H|0)>(s|0)?H:s+1|0;break d}if(R=c[E+68>>2],W=R,s=c[E+64>>2],(R|0)<-1||(R|0)<=-1){W=0-(W+(0<s>>>0)|0)|0,s=0-s|0,c[E+64>>2]=s,c[E+68>>2]=W,xe=1,mt=9644;break p}if(L&2048){xe=1,mt=9645;break p}xe=L&1,mt=xe?9646:9644}W=Hi(s,W,Tt)}if(L=(H|0)>-1?L&-65537:L,s=c[E+64>>2],R=c[E+68>>2],!(!!(s|R)|H)){H=0,W=Tt;break n}s=!(s|R)+(Tt-W|0)|0,H=(H|0)>(s|0)?H:s;break n}s=c[E+64>>2],W=s||9654,s=xi(W,H),ee=s||H+W|0,L=R,H=s?s-W|0:H;break n}if(R=c[E+64>>2],H)break a;s=0,Bo(n,32,ce,0,L);break s}c[E+12>>2]=0,c[E+8>>2]=c[E+64>>2],c[E+64>>2]=E+8,H=-1,R=E+8|0}s=0;a:{for(;;){if(W=c[R>>2],!W)break a;if(W=fp(E+4|0,W),ee=(W|0)<0,!(ee|W>>>0>H-s>>>0)){if(R=R+4|0,s=s+W|0,H>>>0>s>>>0)continue;break a}break}if(xe=-1,ee)break e}if(Bo(n,32,ce,s,L),!s){s=0;break s}for(Ye=0,R=c[E+64>>2];;){if(W=c[R>>2],!W||(W=fp(E+4|0,W),Ye=W+Ye|0,(Ye|0)>(s|0)))break s;if(qh(n,E+4|0,W),R=R+4|0,!(Ye>>>0<s>>>0))break}}Bo(n,32,ce,s,L^8192),s=(ce|0)>(s|0)?ce:s;continue t}s=ft[0](n,vo[E+64>>3],ce,H,L,s)|0;continue t}p[E+55|0]=c[E+64>>2],H=1,W=ci,L=R;break n}R=s+1|0,c[E+76>>2]=R,L=F[s+1|0],s=R}if(xe=Ne,n)break e;if(!Ot)break i;for(s=1;;){if(n=c[(s<<2)+k>>2],n){if(wu((s<<3)+g|0,n,a),xe=1,s=s+1|0,(s|0)!=10)continue;break e}break}if(xe=1,s>>>0>=10)break e;for(;;){if(c[(s<<2)+k>>2])break o;if(s=s+1|0,(s|0)==10)break}break e}xe=-1;break e}ee=ee-W|0,H=(H|0)<(ee|0)?ee:H,R=H+xe|0,s=(ce|0)<(R|0)?R:ce,Bo(n,32,s,R,L),qh(n,mt,xe),Bo(n,48,s,R,L^65536),Bo(n,48,H,ee,0),qh(n,W,ee),Bo(n,32,s,R,L^8192);continue}break}xe=0}return Nn=E+80|0,xe}function Qt(n){n=n|0;var s=0,a=0;s=n,n=cr((F[s+-17|0]+(F[s+-18|0]+(F[s+-19|0]+(F[s+-20|0]+(F[s+-21|0]+(F[s+-22|0]+(F[s+-23|0]+(F[s+-24|0]+(F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,a=Fn,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24,p[s+8|0]=n,p[s+9|0]=n>>>8,p[s+10|0]=n>>>16,p[s+11|0]=n>>>24,p[s+12|0]=a,p[s+13|0]=a>>>8,p[s+14|0]=a>>>16,p[s+15|0]=a>>>24,p[s+40|0]=n,p[s+41|0]=n>>>8,p[s+42|0]=n>>>16,p[s+43|0]=n>>>24,p[s+44|0]=a,p[s+45|0]=a>>>8,p[s+46|0]=a>>>16,p[s+47|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s+72|0]=n,p[s+73|0]=n>>>8,p[s+74|0]=n>>>16,p[s+75|0]=n>>>24,p[s+76|0]=a,p[s+77|0]=a>>>8,p[s+78|0]=a>>>16,p[s+79|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+104|0]=n,p[s+105|0]=n>>>8,p[s+106|0]=n>>>16,p[s+107|0]=n>>>24,p[s+108|0]=a,p[s+109|0]=a>>>8,p[s+110|0]=a>>>16,p[s+111|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+136|0]=n,p[s+137|0]=n>>>8,p[s+138|0]=n>>>16,p[s+139|0]=n>>>24,p[s+140|0]=a,p[s+141|0]=a>>>8,p[s+142|0]=a>>>16,p[s+143|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+168|0]=n,p[s+169|0]=n>>>8,p[s+170|0]=n>>>16,p[s+171|0]=n>>>24,p[s+172|0]=a,p[s+173|0]=a>>>8,p[s+174|0]=a>>>16,p[s+175|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+200|0]=n,p[s+201|0]=n>>>8,p[s+202|0]=n>>>16,p[s+203|0]=n>>>24,p[s+204|0]=a,p[s+205|0]=a>>>8,p[s+206|0]=a>>>16,p[s+207|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+232|0]=n,p[s+233|0]=n>>>8,p[s+234|0]=n>>>16,p[s+235|0]=n>>>24,p[s+236|0]=a,p[s+237|0]=a>>>8,p[s+238|0]=a>>>16,p[s+239|0]=a>>>24,p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+264|0]=n,p[s+265|0]=n>>>8,p[s+266|0]=n>>>16,p[s+267|0]=n>>>24,p[s+268|0]=a,p[s+269|0]=a>>>8,p[s+270|0]=a>>>16,p[s+271|0]=a>>>24,p[s+256|0]=n,p[s+257|0]=n>>>8,p[s+258|0]=n>>>16,p[s+259|0]=n>>>24,p[s+260|0]=a,p[s+261|0]=a>>>8,p[s+262|0]=a>>>16,p[s+263|0]=a>>>24,p[s+296|0]=n,p[s+297|0]=n>>>8,p[s+298|0]=n>>>16,p[s+299|0]=n>>>24,p[s+300|0]=a,p[s+301|0]=a>>>8,p[s+302|0]=a>>>16,p[s+303|0]=a>>>24,p[s+288|0]=n,p[s+289|0]=n>>>8,p[s+290|0]=n>>>16,p[s+291|0]=n>>>24,p[s+292|0]=a,p[s+293|0]=a>>>8,p[s+294|0]=a>>>16,p[s+295|0]=a>>>24,p[s+328|0]=n,p[s+329|0]=n>>>8,p[s+330|0]=n>>>16,p[s+331|0]=n>>>24,p[s+332|0]=a,p[s+333|0]=a>>>8,p[s+334|0]=a>>>16,p[s+335|0]=a>>>24,p[s+320|0]=n,p[s+321|0]=n>>>8,p[s+322|0]=n>>>16,p[s+323|0]=n>>>24,p[s+324|0]=a,p[s+325|0]=a>>>8,p[s+326|0]=a>>>16,p[s+327|0]=a>>>24,p[s+360|0]=n,p[s+361|0]=n>>>8,p[s+362|0]=n>>>16,p[s+363|0]=n>>>24,p[s+364|0]=a,p[s+365|0]=a>>>8,p[s+366|0]=a>>>16,p[s+367|0]=a>>>24,p[s+352|0]=n,p[s+353|0]=n>>>8,p[s+354|0]=n>>>16,p[s+355|0]=n>>>24,p[s+356|0]=a,p[s+357|0]=a>>>8,p[s+358|0]=a>>>16,p[s+359|0]=a>>>24,p[s+392|0]=n,p[s+393|0]=n>>>8,p[s+394|0]=n>>>16,p[s+395|0]=n>>>24,p[s+396|0]=a,p[s+397|0]=a>>>8,p[s+398|0]=a>>>16,p[s+399|0]=a>>>24,p[s+384|0]=n,p[s+385|0]=n>>>8,p[s+386|0]=n>>>16,p[s+387|0]=n>>>24,p[s+388|0]=a,p[s+389|0]=a>>>8,p[s+390|0]=a>>>16,p[s+391|0]=a>>>24,p[s+424|0]=n,p[s+425|0]=n>>>8,p[s+426|0]=n>>>16,p[s+427|0]=n>>>24,p[s+428|0]=a,p[s+429|0]=a>>>8,p[s+430|0]=a>>>16,p[s+431|0]=a>>>24,p[s+416|0]=n,p[s+417|0]=n>>>8,p[s+418|0]=n>>>16,p[s+419|0]=n>>>24,p[s+420|0]=a,p[s+421|0]=a>>>8,p[s+422|0]=a>>>16,p[s+423|0]=a>>>24,p[s+456|0]=n,p[s+457|0]=n>>>8,p[s+458|0]=n>>>16,p[s+459|0]=n>>>24,p[s+460|0]=a,p[s+461|0]=a>>>8,p[s+462|0]=a>>>16,p[s+463|0]=a>>>24,p[s+448|0]=n,p[s+449|0]=n>>>8,p[s+450|0]=n>>>16,p[s+451|0]=n>>>24,p[s+452|0]=a,p[s+453|0]=a>>>8,p[s+454|0]=a>>>16,p[s+455|0]=a>>>24,p[s+488|0]=n,p[s+489|0]=n>>>8,p[s+490|0]=n>>>16,p[s+491|0]=n>>>24,p[s+492|0]=a,p[s+493|0]=a>>>8,p[s+494|0]=a>>>16,p[s+495|0]=a>>>24,p[s+480|0]=n,p[s+481|0]=n>>>8,p[s+482|0]=n>>>16,p[s+483|0]=n>>>24,p[s+484|0]=a,p[s+485|0]=a>>>8,p[s+486|0]=a>>>16,p[s+487|0]=a>>>24}function hi(n){n=n|0;var s=0,a=0;s=n,n=cr((F[s+479|0]+(F[s+447|0]+(F[s+415|0]+(F[s+383|0]+(F[s+351|0]+(F[s+319|0]+(F[s+287|0]+(F[s+255|0]+(F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,a=Fn,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24,p[s+8|0]=n,p[s+9|0]=n>>>8,p[s+10|0]=n>>>16,p[s+11|0]=n>>>24,p[s+12|0]=a,p[s+13|0]=a>>>8,p[s+14|0]=a>>>16,p[s+15|0]=a>>>24,p[s+40|0]=n,p[s+41|0]=n>>>8,p[s+42|0]=n>>>16,p[s+43|0]=n>>>24,p[s+44|0]=a,p[s+45|0]=a>>>8,p[s+46|0]=a>>>16,p[s+47|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s+72|0]=n,p[s+73|0]=n>>>8,p[s+74|0]=n>>>16,p[s+75|0]=n>>>24,p[s+76|0]=a,p[s+77|0]=a>>>8,p[s+78|0]=a>>>16,p[s+79|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+104|0]=n,p[s+105|0]=n>>>8,p[s+106|0]=n>>>16,p[s+107|0]=n>>>24,p[s+108|0]=a,p[s+109|0]=a>>>8,p[s+110|0]=a>>>16,p[s+111|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+136|0]=n,p[s+137|0]=n>>>8,p[s+138|0]=n>>>16,p[s+139|0]=n>>>24,p[s+140|0]=a,p[s+141|0]=a>>>8,p[s+142|0]=a>>>16,p[s+143|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+168|0]=n,p[s+169|0]=n>>>8,p[s+170|0]=n>>>16,p[s+171|0]=n>>>24,p[s+172|0]=a,p[s+173|0]=a>>>8,p[s+174|0]=a>>>16,p[s+175|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+200|0]=n,p[s+201|0]=n>>>8,p[s+202|0]=n>>>16,p[s+203|0]=n>>>24,p[s+204|0]=a,p[s+205|0]=a>>>8,p[s+206|0]=a>>>16,p[s+207|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+232|0]=n,p[s+233|0]=n>>>8,p[s+234|0]=n>>>16,p[s+235|0]=n>>>24,p[s+236|0]=a,p[s+237|0]=a>>>8,p[s+238|0]=a>>>16,p[s+239|0]=a>>>24,p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+264|0]=n,p[s+265|0]=n>>>8,p[s+266|0]=n>>>16,p[s+267|0]=n>>>24,p[s+268|0]=a,p[s+269|0]=a>>>8,p[s+270|0]=a>>>16,p[s+271|0]=a>>>24,p[s+256|0]=n,p[s+257|0]=n>>>8,p[s+258|0]=n>>>16,p[s+259|0]=n>>>24,p[s+260|0]=a,p[s+261|0]=a>>>8,p[s+262|0]=a>>>16,p[s+263|0]=a>>>24,p[s+296|0]=n,p[s+297|0]=n>>>8,p[s+298|0]=n>>>16,p[s+299|0]=n>>>24,p[s+300|0]=a,p[s+301|0]=a>>>8,p[s+302|0]=a>>>16,p[s+303|0]=a>>>24,p[s+288|0]=n,p[s+289|0]=n>>>8,p[s+290|0]=n>>>16,p[s+291|0]=n>>>24,p[s+292|0]=a,p[s+293|0]=a>>>8,p[s+294|0]=a>>>16,p[s+295|0]=a>>>24,p[s+328|0]=n,p[s+329|0]=n>>>8,p[s+330|0]=n>>>16,p[s+331|0]=n>>>24,p[s+332|0]=a,p[s+333|0]=a>>>8,p[s+334|0]=a>>>16,p[s+335|0]=a>>>24,p[s+320|0]=n,p[s+321|0]=n>>>8,p[s+322|0]=n>>>16,p[s+323|0]=n>>>24,p[s+324|0]=a,p[s+325|0]=a>>>8,p[s+326|0]=a>>>16,p[s+327|0]=a>>>24,p[s+360|0]=n,p[s+361|0]=n>>>8,p[s+362|0]=n>>>16,p[s+363|0]=n>>>24,p[s+364|0]=a,p[s+365|0]=a>>>8,p[s+366|0]=a>>>16,p[s+367|0]=a>>>24,p[s+352|0]=n,p[s+353|0]=n>>>8,p[s+354|0]=n>>>16,p[s+355|0]=n>>>24,p[s+356|0]=a,p[s+357|0]=a>>>8,p[s+358|0]=a>>>16,p[s+359|0]=a>>>24,p[s+392|0]=n,p[s+393|0]=n>>>8,p[s+394|0]=n>>>16,p[s+395|0]=n>>>24,p[s+396|0]=a,p[s+397|0]=a>>>8,p[s+398|0]=a>>>16,p[s+399|0]=a>>>24,p[s+384|0]=n,p[s+385|0]=n>>>8,p[s+386|0]=n>>>16,p[s+387|0]=n>>>24,p[s+388|0]=a,p[s+389|0]=a>>>8,p[s+390|0]=a>>>16,p[s+391|0]=a>>>24,p[s+424|0]=n,p[s+425|0]=n>>>8,p[s+426|0]=n>>>16,p[s+427|0]=n>>>24,p[s+428|0]=a,p[s+429|0]=a>>>8,p[s+430|0]=a>>>16,p[s+431|0]=a>>>24,p[s+416|0]=n,p[s+417|0]=n>>>8,p[s+418|0]=n>>>16,p[s+419|0]=n>>>24,p[s+420|0]=a,p[s+421|0]=a>>>8,p[s+422|0]=a>>>16,p[s+423|0]=a>>>24,p[s+456|0]=n,p[s+457|0]=n>>>8,p[s+458|0]=n>>>16,p[s+459|0]=n>>>24,p[s+460|0]=a,p[s+461|0]=a>>>8,p[s+462|0]=a>>>16,p[s+463|0]=a>>>24,p[s+448|0]=n,p[s+449|0]=n>>>8,p[s+450|0]=n>>>16,p[s+451|0]=n>>>24,p[s+452|0]=a,p[s+453|0]=a>>>8,p[s+454|0]=a>>>16,p[s+455|0]=a>>>24,p[s+488|0]=n,p[s+489|0]=n>>>8,p[s+490|0]=n>>>16,p[s+491|0]=n>>>24,p[s+492|0]=a,p[s+493|0]=a>>>8,p[s+494|0]=a>>>16,p[s+495|0]=a>>>24,p[s+480|0]=n,p[s+481|0]=n>>>8,p[s+482|0]=n>>>16,p[s+483|0]=n>>>24,p[s+484|0]=a,p[s+485|0]=a>>>8,p[s+486|0]=a>>>16,p[s+487|0]=a>>>24}function qi(n){n=n|0;var s=0,a=0;for(a=16;a=F[(n+s|0)+-32|0]+(F[((s<<5)+n|0)+-1|0]+a|0)|0,s=s+1|0,(s|0)!=16;);s=n,n=cr(a>>>5&255,0,16843009,16843009),a=n,p[s+8|0]=a,p[s+9|0]=a>>>8,p[s+10|0]=a>>>16,p[s+11|0]=a>>>24,n=Fn,p[s+12|0]=n,p[s+13|0]=n>>>8,p[s+14|0]=n>>>16,p[s+15|0]=n>>>24,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=n,p[s+5|0]=n>>>8,p[s+6|0]=n>>>16,p[s+7|0]=n>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=n,p[s+37|0]=n>>>8,p[s+38|0]=n>>>16,p[s+39|0]=n>>>24,p[s+40|0]=a,p[s+41|0]=a>>>8,p[s+42|0]=a>>>16,p[s+43|0]=a>>>24,p[s+44|0]=n,p[s+45|0]=n>>>8,p[s+46|0]=n>>>16,p[s+47|0]=n>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=n,p[s+69|0]=n>>>8,p[s+70|0]=n>>>16,p[s+71|0]=n>>>24,p[s+72|0]=a,p[s+73|0]=a>>>8,p[s+74|0]=a>>>16,p[s+75|0]=a>>>24,p[s+76|0]=n,p[s+77|0]=n>>>8,p[s+78|0]=n>>>16,p[s+79|0]=n>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=n,p[s+101|0]=n>>>8,p[s+102|0]=n>>>16,p[s+103|0]=n>>>24,p[s+104|0]=a,p[s+105|0]=a>>>8,p[s+106|0]=a>>>16,p[s+107|0]=a>>>24,p[s+108|0]=n,p[s+109|0]=n>>>8,p[s+110|0]=n>>>16,p[s+111|0]=n>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=n,p[s+133|0]=n>>>8,p[s+134|0]=n>>>16,p[s+135|0]=n>>>24,p[s+136|0]=a,p[s+137|0]=a>>>8,p[s+138|0]=a>>>16,p[s+139|0]=a>>>24,p[s+140|0]=n,p[s+141|0]=n>>>8,p[s+142|0]=n>>>16,p[s+143|0]=n>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=n,p[s+165|0]=n>>>8,p[s+166|0]=n>>>16,p[s+167|0]=n>>>24,p[s+168|0]=a,p[s+169|0]=a>>>8,p[s+170|0]=a>>>16,p[s+171|0]=a>>>24,p[s+172|0]=n,p[s+173|0]=n>>>8,p[s+174|0]=n>>>16,p[s+175|0]=n>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=n,p[s+197|0]=n>>>8,p[s+198|0]=n>>>16,p[s+199|0]=n>>>24,p[s+200|0]=a,p[s+201|0]=a>>>8,p[s+202|0]=a>>>16,p[s+203|0]=a>>>24,p[s+204|0]=n,p[s+205|0]=n>>>8,p[s+206|0]=n>>>16,p[s+207|0]=n>>>24,p[s+232|0]=a,p[s+233|0]=a>>>8,p[s+234|0]=a>>>16,p[s+235|0]=a>>>24,p[s+236|0]=n,p[s+237|0]=n>>>8,p[s+238|0]=n>>>16,p[s+239|0]=n>>>24,p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=n,p[s+229|0]=n>>>8,p[s+230|0]=n>>>16,p[s+231|0]=n>>>24,p[s+264|0]=a,p[s+265|0]=a>>>8,p[s+266|0]=a>>>16,p[s+267|0]=a>>>24,p[s+268|0]=n,p[s+269|0]=n>>>8,p[s+270|0]=n>>>16,p[s+271|0]=n>>>24,p[s+256|0]=a,p[s+257|0]=a>>>8,p[s+258|0]=a>>>16,p[s+259|0]=a>>>24,p[s+260|0]=n,p[s+261|0]=n>>>8,p[s+262|0]=n>>>16,p[s+263|0]=n>>>24,p[s+296|0]=a,p[s+297|0]=a>>>8,p[s+298|0]=a>>>16,p[s+299|0]=a>>>24,p[s+300|0]=n,p[s+301|0]=n>>>8,p[s+302|0]=n>>>16,p[s+303|0]=n>>>24,p[s+288|0]=a,p[s+289|0]=a>>>8,p[s+290|0]=a>>>16,p[s+291|0]=a>>>24,p[s+292|0]=n,p[s+293|0]=n>>>8,p[s+294|0]=n>>>16,p[s+295|0]=n>>>24,p[s+328|0]=a,p[s+329|0]=a>>>8,p[s+330|0]=a>>>16,p[s+331|0]=a>>>24,p[s+332|0]=n,p[s+333|0]=n>>>8,p[s+334|0]=n>>>16,p[s+335|0]=n>>>24,p[s+320|0]=a,p[s+321|0]=a>>>8,p[s+322|0]=a>>>16,p[s+323|0]=a>>>24,p[s+324|0]=n,p[s+325|0]=n>>>8,p[s+326|0]=n>>>16,p[s+327|0]=n>>>24,p[s+360|0]=a,p[s+361|0]=a>>>8,p[s+362|0]=a>>>16,p[s+363|0]=a>>>24,p[s+364|0]=n,p[s+365|0]=n>>>8,p[s+366|0]=n>>>16,p[s+367|0]=n>>>24,p[s+352|0]=a,p[s+353|0]=a>>>8,p[s+354|0]=a>>>16,p[s+355|0]=a>>>24,p[s+356|0]=n,p[s+357|0]=n>>>8,p[s+358|0]=n>>>16,p[s+359|0]=n>>>24,p[s+392|0]=a,p[s+393|0]=a>>>8,p[s+394|0]=a>>>16,p[s+395|0]=a>>>24,p[s+396|0]=n,p[s+397|0]=n>>>8,p[s+398|0]=n>>>16,p[s+399|0]=n>>>24,p[s+384|0]=a,p[s+385|0]=a>>>8,p[s+386|0]=a>>>16,p[s+387|0]=a>>>24,p[s+388|0]=n,p[s+389|0]=n>>>8,p[s+390|0]=n>>>16,p[s+391|0]=n>>>24,p[s+424|0]=a,p[s+425|0]=a>>>8,p[s+426|0]=a>>>16,p[s+427|0]=a>>>24,p[s+428|0]=n,p[s+429|0]=n>>>8,p[s+430|0]=n>>>16,p[s+431|0]=n>>>24,p[s+416|0]=a,p[s+417|0]=a>>>8,p[s+418|0]=a>>>16,p[s+419|0]=a>>>24,p[s+420|0]=n,p[s+421|0]=n>>>8,p[s+422|0]=n>>>16,p[s+423|0]=n>>>24,p[s+456|0]=a,p[s+457|0]=a>>>8,p[s+458|0]=a>>>16,p[s+459|0]=a>>>24,p[s+460|0]=n,p[s+461|0]=n>>>8,p[s+462|0]=n>>>16,p[s+463|0]=n>>>24,p[s+448|0]=a,p[s+449|0]=a>>>8,p[s+450|0]=a>>>16,p[s+451|0]=a>>>24,p[s+452|0]=n,p[s+453|0]=n>>>8,p[s+454|0]=n>>>16,p[s+455|0]=n>>>24,p[s+488|0]=a,p[s+489|0]=a>>>8,p[s+490|0]=a>>>16,p[s+491|0]=a>>>24,p[s+492|0]=n,p[s+493|0]=n>>>8,p[s+494|0]=n>>>16,p[s+495|0]=n>>>24,p[s+480|0]=a,p[s+481|0]=a>>>8,p[s+482|0]=a>>>16,p[s+483|0]=a>>>24,p[s+484|0]=n,p[s+485|0]=n>>>8,p[s+486|0]=n>>>16,p[s+487|0]=n>>>24}function an(n,s,a,g,k){var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0,ms=0,Aa=0,dl=0,Xu=0,Gh=0;ni=Nn-16|0,Nn=ni,mt=g+120|0,ce=g+24|0;e:{t:{i:{n:{o:{l:{r:{if(!a)break r;for(;;){if(!no(ce,1))break r;if(E=c[g+176>>2],Ye=no(ce,2),H=c[g+260>>2],R=1<<Ye,H&R)break l;c[g+260>>2]=R|H,E=ne(E,20)+g|0,ee=E+196|0,c[ee>>2]=0,H=E+192|0,c[H>>2]=s,R=E+188|0,c[R>>2]=n,c[E+180>>2]=Ye,xe=1,c[g+176>>2]=c[g+176>>2]+1;u:switch(Ye|0){case 0:case 1:if(ki=E,E=no(ce,3)+2|0,c[ki+184>>2]=E,ki=c[R>>2],R=-1<<E^-1,an(ki+R>>>E|0,R+c[H>>2]>>>E|0,0,g,ee))continue;break l;case 3:L=no(ce,8)+1|0,n=0;s:{if((L|0)>16||(n=1,(L|0)>4))break s;n=(L|0)>2?2:3}if(H=c[R>>2],R=E+184|0,c[R>>2]=n,!an(L,1,0,g,ee))break l;if(Ye=(H+(1<<n)|0)+-1|0,E=1<<(8>>>c[R>>2]),W=Ts(E,0,4),W){if(H=c[ee>>2],c[W>>2]=c[H>>2],xe=4,(L|0)>=2)for(R=L<<2,xe=(R|0)>5?R:5,L=4;R=L+W|0,p[R|0]=F[R+-4|0]+F[L+H|0],L=L+1|0,(xe|0)!=(L|0););R=E<<2,(R|0)>(xe|0)&&Zo(W+xe|0,0,R-xe|0),jr(c[ee>>2]),c[ee>>2]=W}n=Ye>>>n|0,xe=(W|0)!=0;break;default:break u}if(!xe)break}break l}r:{if(!no(ce,1)||(ci=no(ce,4),ci+-1>>>0<11))break r;c[g>>2]=3,L=0;break n}c[ni+12>>2]=0;r:{u:{s:{if(!a){Ye=1,R=1;break s}if(Ye=1,R=1,!no(ce,1))break s;if(Mi=1,E=no(ce,3)+2|0,R=1<<E,H=(R+n|0)+-1>>>E|0,R=(s+R|0)+-1>>>E|0,!an(H,R,0,g,ni+12|0))break u;if(c[g+152>>2]=E,Tt=ne(R,H),(Tt|0)>=1)for(L=0,R=c[ni+12>>2];H=R+(L<<2)|0,E=F[H+1|0]|F[H+2|0]<<8,c[H>>2]=E,Ye=(E|0)<(Ye|0)?Ye:E+1|0,L=L+1|0,(Tt|0)!=(L|0););if(!((Ye|0)>1e3|(Ye|0)>(ne(n,s)|0))){R=Ye;break s}if(bn=Ts(Ye,0,4),!bn){c[g>>2]=1,bn=0;break u}if(ce=Zo(bn,255,Ye<<2),(Tt|0)<1){R=0;break s}for(L=0,ee=c[ni+12>>2],R=0;W=ee+(L<<2)|0,H=ce+(c[W>>2]<<2)|0,E=c[H>>2],(E|0)==-1&&(c[H>>2]=R,E=R,R=E+1|0),c[W>>2]=E,L=L+1|0,(Tt|0)!=(L|0););}if(c[g+48>>2]){Mi=1;break u}if(Mi=1,Gh=1<<ci,Xu=(ci|0)>0?Gh+280|0:280,xe=Ql((Xu|0)>256?Xu:256,0,4),Gi=ne(mn[(ci<<1)+1184>>1],R),Gi=Ts(Gi,Gi>>31,4),dl=Ts(R,R>>31,548),!(!dl|(!Gi|!xe))){for(H=Gi;;){L=ir;s:{a:{if(!bn||(L=c[(ir<<2)+bn>>2],(L|0)!=-1))break a;if(Mi=1,!aa(Xu,g,xe,0)||!aa(256,g,xe,0)||!aa(256,g,xe,0)||!aa(256,g,xe,0))break r;if(aa(40,g,xe,0))break s;break r}for(Ne=ne(L,548)+dl|0,Mi=1,Ot=0,Ir=0,nn=1,ms=0;;){if(c[(Ot<<2)+Ne>>2]=H,Tt=mn[(Ot<<1)+1208>>1]+((ci|0)>0?Ot?0:Gh:0)|0,E=aa(Tt,g,xe,H),!E)break r;a:{if(!nn){nn=0;break a}if(!(Ot&2147483643))break a;nn=!F[H|0]}if(ce=E<<2,ee=F[H|0],Ot>>>0<=3){if(L=c[xe>>2],E=1,(Tt|0)>=2)for(;W=c[(E<<2)+xe>>2],L=(W|0)>(L|0)?W:L,E=E+1|0,(Tt|0)!=(E|0););Ir=L+Ir|0}if(H=H+ce|0,ms=ee+ms|0,Ot=Ot+1|0,(Ot|0)==5)break}c[Ne+28>>2]=0,c[Ne+20>>2]=nn;a:{if(!nn||(L=mn[c[Ne+8>>2]+2>>1]|mn[c[Ne+4>>2]+2>>1]<<16|mn[c[Ne+12>>2]+2>>1]<<24,c[Ne+24>>2]=L,ms)||(E=mn[c[Ne>>2]+2>>1],E>>>0>255))break a;c[Ne+28>>2]=1,c[Ne+24>>2]=L|E<<8,c[Ne+32>>2]=0;break s}if(c[Ne+32>>2]=(Ir|0)<6,(Ir|0)>5)break s;for(Mi=Ne+12|0,nn=Ne+8|0,Ir=Ne+4|0,ms=c[Ne>>2],L=0;;){ee=(L<<3)+Ne|0,Aa=ee+36|0,E=ms+(L<<2)|0,W=mn[E>>1]|mn[E+2>>1]<<16,E=W>>>16|0;a:{if(E>>>0>=256){c[Aa>>2]=W&255|256,c[ee+40>>2]=E;break a}W=W&255,c[Aa>>2]=W,Ot=ee+40|0,Tt=E<<8,c[Ot>>2]=Tt,ce=L>>>W|0,E=c[Ir>>2]+(ce<<2)|0,ee=F[E+2|0]|F[E+3|0]<<8,ki=W,W=F[E|0],E=ki+W|0,c[Aa>>2]=E,Tt=Tt|ee<<16,c[Ot>>2]=Tt,ce=ce>>>W|0,ee=c[nn>>2]+(ce<<2)|0,W=F[ee+2|0]|F[ee+3|0]<<8,ki=E,E=F[ee|0],ee=ki+E|0,c[Aa>>2]=ee,W=W|Tt,c[Ot>>2]=W,ce=c[Mi>>2]+(ce>>>E<<2)|0,E=F[ce+2|0]|F[ce+3|0]<<8,c[Aa>>2]=ee+F[ce|0],c[Ot>>2]=W|E<<24}if(L=L+1|0,(L|0)==64)break}}if(ir=ir+1|0,(ir|0)==(Ye|0))break}ir=c[ni+12>>2],c[g+172>>2]=Gi,c[g+168>>2]=dl,c[g+164>>2]=R,c[g+160>>2]=ir,Mi=0;break r}c[g>>2]=1;break r}xe=0}if(jr(xe),jr(bn),!Mi)break o;jr(c[ni+12>>2]),jr(Gi),If(dl)}c[g>>2]=3,L=0;break n}o:{if((ci|0)>=1){if(c[g+120>>2]=1<<ci,$l(g+124|0,ci))break o;c[g>>2]=1,L=0;break n}c[mt>>2]=0}if(c[g+104>>2]=s,c[g+100>>2]=n,R=c[g+152>>2],c[g+148>>2]=R?-1<<R^-1:-1,c[g+156>>2]=((1<<R)+n|0)+-1>>>R,a){c[g+4>>2]=1,L=0;break i}if(L=Ts(cr(n,n>>31,s,s>>31),Fn,4),!L){c[g>>2]=1,L=0;break n}if(!ql(g,L,n,s,s,0))break n;if(!c[g+48>>2])break i}jr(L),L=0;break t}if(k&&(c[k>>2]=L),c[g+112>>2]=0,L=1,a)break e}jr(c[g+160>>2]),jr(c[g+172>>2]),If(c[g+168>>2]),yc(g+124|0),yc(g+136|0),c[mt+48>>2]=0,c[mt+52>>2]=0,c[mt+40>>2]=0,c[mt+44>>2]=0,c[mt+32>>2]=0,c[mt+36>>2]=0,c[mt+24>>2]=0,c[mt+28>>2]=0,c[mt+16>>2]=0,c[mt+20>>2]=0,c[mt+8>>2]=0,c[mt+12>>2]=0,c[mt>>2]=0,c[mt+4>>2]=0}return Nn=ni+16|0,L}function Kn(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ce=F[n|0],ee=F[a|0],xe=F[g|0],Ne=F[k|0],Tt=F[E|0],p[L|0]=255,ce=ne(ce,19077)>>>8|0,Ne=Ne|Tt<<16,ee=ee|xe<<16,xe=(Ne+ne(ee,3)|0)+131074|0,Tt=xe>>>2&255,Ot=ce+(ne(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[L+3|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,xe=xe>>>18&255,Ot=ce+(ne(xe,26149)>>>8|0)|0,H=Ot+-14234|0,p[L+1|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(ne(Tt,6419)>>>8|0)-(ne(xe,13320)>>>8)|0,xe=ce+8708|0,p[L+2|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R|0]=255,ce=ne(ce,19077)>>>8|0,xe=(ne(Ne,3)+ee|0)+131074|0,Tt=xe>>>2&255,Ot=ce+(ne(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[R+3|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,xe=xe>>>18&255,Ot=ce+(ne(xe,26149)>>>8|0)|0,H=Ot+-14234|0,p[R+1|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(ne(Tt,6419)>>>8|0)-(ne(xe,13320)>>>8)|0,xe=ce+8708|0,p[R+2|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255),Ot=W+-1|0;e:{if((W|0)<3){ce=Ne,xe=ee;break e}for(ce=Ot>>1,Ir=(ce|0)>1?ce:1,Tt=1;bn=Tt<<1,ci=bn+-1|0,Ye=F[ci+n|0],xe=F[a+Tt|0],ni=F[g+Tt|0],ce=F[k+Tt|0],nn=F[E+Tt|0],ir=ci<<2,H=ir+L|0,p[H|0]=255,ce=ce|nn<<16,xe=xe|ni<<16,nn=Ne+xe|0,ni=(ce+(nn+ee|0)|0)+524296|0,Ye=ne(Ye,19077)>>>8|0,nn=ni+(nn<<1)>>>3|0,Mi=nn+ee|0,ki=Mi>>>1&255,Gi=Ye+(ne(ki,33050)>>>8|0)|0,mt=Gi+-17685|0,p[H+3|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<17685?0:255,Mi=Mi>>>17&255,Gi=Ye+(ne(Mi,26149)>>>8|0)|0,mt=Gi+-14234|0,p[H+1|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<14234?0:255,mt=H,H=Ye-(ne(ki,6419)>>>8|0)-(ne(Mi,13320)>>>8)|0,Ye=H+8708|0,p[mt+2|0]=Ye>>>0<16384?Ye>>>6|0:(H|0)<-8708?0:255,Ye=F[n+bn|0],Mi=Tt<<3,H=Mi+L|0,p[H|0]=255,ni=ni+(ee+ce<<1)>>>3|0,ki=ni+xe|0,Gi=ki>>>1&255,ee=ne(Ye,19077)>>>8|0,Ye=(ne(Gi,33050)>>>8|0)+ee|0,mt=Ye+-17685|0,p[H+3|0]=mt>>>0<16384?mt>>>6|0:Ye>>>0<17685?0:255,Ye=ki>>>17&255,ki=ee+(ne(Ye,26149)>>>8|0)|0,mt=ki+-14234|0,p[H+1|0]=mt>>>0<16384?mt>>>6|0:ki>>>0<14234?0:255,mt=H,ee=ee-(ne(Gi,6419)>>>8|0)-(ne(Ye,13320)>>>8)|0,H=ee+8708|0,p[mt+2|0]=H>>>0<16384?H>>>6|0:(ee|0)<-8708?0:255,s&&(H=F[s+ci|0],ee=R+ir|0,p[ee|0]=255,ci=Ne+ni|0,ni=ci>>>1&255,Ne=ne(H,19077)>>>8|0,H=(ne(ni,33050)>>>8|0)+Ne|0,Ye=H+-17685|0,p[ee+3|0]=Ye>>>0<16384?Ye>>>6|0:H>>>0<17685?0:255,H=ci>>>17&255,ci=Ne+(ne(H,26149)>>>8|0)|0,Ye=ci+-14234|0,p[ee+1|0]=Ye>>>0<16384?Ye>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(ne(ni,6419)>>>8|0)-(ne(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+2|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,Ne=F[s+bn|0],ee=R+Mi|0,p[ee|0]=255,Ne=ne(Ne,19077)>>>8|0,H=ce+nn|0,bn=H>>>1&255,ci=Ne+(ne(bn,33050)>>>8|0)|0,ni=ci+-17685|0,p[ee+3|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,H=H>>>17&255,ci=Ne+(ne(H,26149)>>>8|0)|0,ni=ci+-14234|0,p[ee+1|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(ne(bn,6419)>>>8|0)-(ne(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+2|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255),H=(Tt|0)!=(Ir|0),Tt=Tt+1|0,ee=xe,Ne=ce,!!H;);}e:{if(W&1||(a=F[n+Ot|0],g=Ot<<2,n=g+L|0,p[n|0]=255,a=ne(a,19077)>>>8|0,k=(ne(xe,3)+ce|0)+131074|0,E=k>>>2&255,L=a+(ne(E,33050)>>>8|0)|0,W=L+-17685|0,p[n+3|0]=W>>>0<16384?W>>>6|0:L>>>0<17685?0:255,k=k>>>18&255,L=a+(ne(k,26149)>>>8|0)|0,W=L+-14234|0,p[n+1|0]=W>>>0<16384?W>>>6|0:L>>>0<14234?0:255,L=n,n=a-(ne(E,6419)>>>8|0)-(ne(k,13320)>>>8)|0,a=n+8708|0,p[L+2|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ot|0],n=g+R|0,p[n|0]=255,s=ne(s,19077)>>>8|0,a=(ne(ce,3)+xe|0)+131074|0,g=a>>>2&255,k=s+(ne(g,33050)>>>8|0)|0,E=k+-17685|0,p[n+3|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,a=a>>>18&255,k=s+(ne(a,26149)>>>8|0)|0,E=k+-14234|0,p[n+1|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n,n=s-(ne(g,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[k+2|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function gr(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ce=F[n|0],ee=F[a|0],xe=F[g|0],Ne=F[k|0],Tt=F[E|0],p[L+3|0]=255,ce=ne(ce,19077)>>>8|0,Ne=Ne|Tt<<16,ee=ee|xe<<16,xe=(Ne+ne(ee,3)|0)+131074|0,Tt=xe>>>2&255,Ot=ce+(ne(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,xe=xe>>>18&255,Ot=ce+(ne(xe,26149)>>>8|0)|0,H=Ot+-14234|0,p[L|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(ne(Tt,6419)>>>8|0)-(ne(xe,13320)>>>8)|0,xe=ce+8708|0,p[L+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R+3|0]=255,ce=ne(ce,19077)>>>8|0,xe=(ne(Ne,3)+ee|0)+131074|0,Tt=xe>>>2&255,Ot=ce+(ne(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,xe=xe>>>18&255,Ot=ce+(ne(xe,26149)>>>8|0)|0,H=Ot+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(ne(Tt,6419)>>>8|0)-(ne(xe,13320)>>>8)|0,xe=ce+8708|0,p[R+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255),Ot=W+-1|0;e:{if((W|0)<3){ce=Ne,xe=ee;break e}for(ce=Ot>>1,Ir=(ce|0)>1?ce:1,Tt=1;bn=Tt<<1,ci=bn+-1|0,Ye=F[ci+n|0],xe=F[a+Tt|0],ni=F[g+Tt|0],ce=F[k+Tt|0],nn=F[E+Tt|0],ir=ci<<2,H=ir+L|0,p[H+3|0]=255,ce=ce|nn<<16,xe=xe|ni<<16,nn=Ne+xe|0,ni=(ce+(nn+ee|0)|0)+524296|0,Ye=ne(Ye,19077)>>>8|0,nn=ni+(nn<<1)>>>3|0,Mi=nn+ee|0,ki=Mi>>>1&255,Gi=Ye+(ne(ki,33050)>>>8|0)|0,mt=Gi+-17685|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<17685?0:255,Mi=Mi>>>17&255,Gi=Ye+(ne(Mi,26149)>>>8|0)|0,mt=Gi+-14234|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<14234?0:255,mt=H,H=Ye-(ne(ki,6419)>>>8|0)-(ne(Mi,13320)>>>8)|0,Ye=H+8708|0,p[mt+1|0]=Ye>>>0<16384?Ye>>>6|0:(H|0)<-8708?0:255,Ye=F[n+bn|0],Mi=Tt<<3,H=Mi+L|0,p[H+3|0]=255,ni=ni+(ee+ce<<1)>>>3|0,ki=ni+xe|0,Gi=ki>>>1&255,ee=ne(Ye,19077)>>>8|0,Ye=(ne(Gi,33050)>>>8|0)+ee|0,mt=Ye+-17685|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ye>>>0<17685?0:255,Ye=ki>>>17&255,ki=ee+(ne(Ye,26149)>>>8|0)|0,mt=ki+-14234|0,p[H|0]=mt>>>0<16384?mt>>>6|0:ki>>>0<14234?0:255,mt=H,ee=ee-(ne(Gi,6419)>>>8|0)-(ne(Ye,13320)>>>8)|0,H=ee+8708|0,p[mt+1|0]=H>>>0<16384?H>>>6|0:(ee|0)<-8708?0:255,s&&(H=F[s+ci|0],ee=R+ir|0,p[ee+3|0]=255,ci=Ne+ni|0,ni=ci>>>1&255,Ne=ne(H,19077)>>>8|0,H=(ne(ni,33050)>>>8|0)+Ne|0,Ye=H+-17685|0,p[ee+2|0]=Ye>>>0<16384?Ye>>>6|0:H>>>0<17685?0:255,H=ci>>>17&255,ci=Ne+(ne(H,26149)>>>8|0)|0,Ye=ci+-14234|0,p[ee|0]=Ye>>>0<16384?Ye>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(ne(ni,6419)>>>8|0)-(ne(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,Ne=F[s+bn|0],ee=R+Mi|0,p[ee+3|0]=255,Ne=ne(Ne,19077)>>>8|0,H=ce+nn|0,bn=H>>>1&255,ci=Ne+(ne(bn,33050)>>>8|0)|0,ni=ci+-17685|0,p[ee+2|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,H=H>>>17&255,ci=Ne+(ne(H,26149)>>>8|0)|0,ni=ci+-14234|0,p[ee|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(ne(bn,6419)>>>8|0)-(ne(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255),H=(Tt|0)!=(Ir|0),Tt=Tt+1|0,ee=xe,Ne=ce,!!H;);}e:{if(W&1||(a=F[n+Ot|0],g=Ot<<2,n=g+L|0,p[n+3|0]=255,a=ne(a,19077)>>>8|0,k=(ne(xe,3)+ce|0)+131074|0,E=k>>>2&255,L=a+(ne(E,33050)>>>8|0)|0,W=L+-17685|0,p[n+2|0]=W>>>0<16384?W>>>6|0:L>>>0<17685?0:255,k=k>>>18&255,L=a+(ne(k,26149)>>>8|0)|0,W=L+-14234|0,p[n|0]=W>>>0<16384?W>>>6|0:L>>>0<14234?0:255,L=n,n=a-(ne(E,6419)>>>8|0)-(ne(k,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ot|0],n=g+R|0,p[n+3|0]=255,s=ne(s,19077)>>>8|0,a=(ne(ce,3)+xe|0)+131074|0,g=a>>>2&255,k=s+(ne(g,33050)>>>8|0)|0,E=k+-17685|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,a=a>>>18&255,k=s+(ne(a,26149)>>>8|0)|0,E=k+-14234|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n,n=s-(ne(g,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Nr(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ce=F[n|0],ee=F[a|0],xe=F[g|0],Ne=F[k|0],Tt=F[E|0],p[L+3|0]=255,ce=ne(ce,19077)>>>8|0,Ne=Ne|Tt<<16,ee=ee|xe<<16,xe=(Ne+ne(ee,3)|0)+131074|0,Tt=xe>>>18&255,Ot=ce+(ne(Tt,26149)>>>8|0)|0,H=Ot+-14234|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,xe=xe>>>2&255,Ot=ce+(ne(xe,33050)>>>8|0)|0,H=Ot+-17685|0,p[L|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,ce=ce-(ne(xe,6419)>>>8|0)-(ne(Tt,13320)>>>8)|0,xe=ce+8708|0,p[L+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R+3|0]=255,ce=ne(ce,19077)>>>8|0,xe=(ne(Ne,3)+ee|0)+131074|0,Tt=xe>>>18&255,Ot=ce+(ne(Tt,26149)>>>8|0)|0,H=Ot+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,xe=xe>>>2&255,Ot=ce+(ne(xe,33050)>>>8|0)|0,H=Ot+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,ce=ce-(ne(xe,6419)>>>8|0)-(ne(Tt,13320)>>>8)|0,xe=ce+8708|0,p[R+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255),Ot=W+-1|0;e:{if((W|0)<3){ce=Ne,xe=ee;break e}for(ce=Ot>>1,Ir=(ce|0)>1?ce:1,Tt=1;bn=Tt<<1,ci=bn+-1|0,Ye=F[ci+n|0],xe=F[a+Tt|0],ni=F[g+Tt|0],ce=F[k+Tt|0],nn=F[E+Tt|0],ir=ci<<2,H=ir+L|0,p[H+3|0]=255,ce=ce|nn<<16,xe=xe|ni<<16,nn=Ne+xe|0,ni=(ce+(nn+ee|0)|0)+524296|0,Ye=ne(Ye,19077)>>>8|0,nn=ni+(nn<<1)>>>3|0,Mi=nn+ee|0,ki=Mi>>>17&255,Gi=Ye+(ne(ki,26149)>>>8|0)|0,mt=Gi+-14234|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<14234?0:255,Mi=Mi>>>1&255,Gi=Ye+(ne(Mi,33050)>>>8|0)|0,mt=Gi+-17685|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<17685?0:255,mt=H,H=Ye-(ne(Mi,6419)>>>8|0)-(ne(ki,13320)>>>8)|0,Ye=H+8708|0,p[mt+1|0]=Ye>>>0<16384?Ye>>>6|0:(H|0)<-8708?0:255,Ye=F[n+bn|0],Mi=Tt<<3,H=Mi+L|0,p[H+3|0]=255,ni=ni+(ee+ce<<1)>>>3|0,ki=ni+xe|0,Gi=ki>>>17&255,ee=ne(Ye,19077)>>>8|0,Ye=(ne(Gi,26149)>>>8|0)+ee|0,mt=Ye+-14234|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ye>>>0<14234?0:255,Ye=ki>>>1&255,ki=ee+(ne(Ye,33050)>>>8|0)|0,mt=ki+-17685|0,p[H|0]=mt>>>0<16384?mt>>>6|0:ki>>>0<17685?0:255,mt=H,ee=ee-(ne(Ye,6419)>>>8|0)-(ne(Gi,13320)>>>8)|0,H=ee+8708|0,p[mt+1|0]=H>>>0<16384?H>>>6|0:(ee|0)<-8708?0:255,s&&(H=F[s+ci|0],ee=R+ir|0,p[ee+3|0]=255,ci=Ne+ni|0,ni=ci>>>17&255,Ne=ne(H,19077)>>>8|0,H=(ne(ni,26149)>>>8|0)+Ne|0,Ye=H+-14234|0,p[ee+2|0]=Ye>>>0<16384?Ye>>>6|0:H>>>0<14234?0:255,H=ci>>>1&255,ci=Ne+(ne(H,33050)>>>8|0)|0,Ye=ci+-17685|0,p[ee|0]=Ye>>>0<16384?Ye>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ne-(ne(H,6419)>>>8|0)-(ne(ni,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,Ne=F[s+bn|0],ee=R+Mi|0,p[ee+3|0]=255,Ne=ne(Ne,19077)>>>8|0,H=ce+nn|0,bn=H>>>17&255,ci=Ne+(ne(bn,26149)>>>8|0)|0,ni=ci+-14234|0,p[ee+2|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ne+(ne(H,33050)>>>8|0)|0,ni=ci+-17685|0,p[ee|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ne-(ne(H,6419)>>>8|0)-(ne(bn,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255),H=(Tt|0)!=(Ir|0),Tt=Tt+1|0,ee=xe,Ne=ce,!!H;);}e:{if(W&1||(a=F[n+Ot|0],g=Ot<<2,n=g+L|0,p[n+3|0]=255,a=ne(a,19077)>>>8|0,k=(ne(xe,3)+ce|0)+131074|0,E=k>>>18&255,L=a+(ne(E,26149)>>>8|0)|0,W=L+-14234|0,p[n+2|0]=W>>>0<16384?W>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=a+(ne(k,33050)>>>8|0)|0,W=L+-17685|0,p[n|0]=W>>>0<16384?W>>>6|0:L>>>0<17685?0:255,L=n,n=a-(ne(k,6419)>>>8|0)-(ne(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ot|0],n=g+R|0,p[n+3|0]=255,s=ne(s,19077)>>>8|0,a=(ne(ce,3)+xe|0)+131074|0,g=a>>>18&255,k=s+(ne(g,26149)>>>8|0)|0,E=k+-14234|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(ne(a,33050)>>>8|0)|0,E=k+-17685|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(ne(a,6419)>>>8|0)-(ne(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Wr(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;xe=ne(F[n|0],19077)>>>8|0,Ne=F[k|0]|F[E|0]<<16,H=F[a|0]|F[g|0]<<16,ce=(Ne+ne(H,3)|0)+131074|0,Tt=ce>>>2&255,ce=ce>>>18|0,mt=xe-(ne(Tt,6419)>>>8|0)-(ne(ce,13320)>>>8)|0,ee=mt+8708|0,mt=ee>>>0<16384?ee>>6:(mt|0)<-8708?0:255,ce=xe+(ne(ce,26149)>>>8|0)|0,ee=ce+-14234|0,p[L|0]=mt>>>5|(ee>>>0<16384?ee>>>6|0:ce>>>0<14234?0:248)&248,xe=xe+(ne(Tt,33050)>>>8|0)|0,ce=xe+-17685|0,p[L+1|0]=mt<<3&224|(ce>>>0<16384?ce>>>9|0:xe>>>0<17685?0:31),s&&(xe=ne(F[s|0],19077)>>>8|0,ce=(ne(Ne,3)+H|0)+131074|0,Tt=ce>>>2&255,ce=ce>>>18|0,mt=xe-(ne(Tt,6419)>>>8|0)-(ne(ce,13320)>>>8)|0,ee=mt+8708|0,mt=ee>>>0<16384?ee>>6:(mt|0)<-8708?0:255,ce=xe+(ne(ce,26149)>>>8|0)|0,ee=ce+-14234|0,p[R|0]=mt>>>5|(ee>>>0<16384?ee>>>6|0:ce>>>0<14234?0:248)&248,xe=xe+(ne(Tt,33050)>>>8|0)|0,ce=xe+-17685|0,p[R+1|0]=mt<<3&224|(ce>>>0<16384?ce>>>9|0:xe>>>0<17685?0:31)),mt=W+-1|0;e:{if((W|0)<3){xe=Ne,ce=H;break e}for(xe=mt>>1,Ir=(xe|0)>1?xe:1,Tt=1;xe=F[k+Tt|0]|F[E+Tt|0]<<16,ce=F[a+Tt|0]|F[g+Tt|0]<<16,bn=ce+Ne|0,ee=(xe+(bn+H|0)|0)+524296|0,nn=Tt<<1,Ot=nn+-1|0,ki=Ot<<1,Gi=ki+L|0,Ye=ne(F[n+Ot|0],19077)>>>8|0,bn=ee+(bn<<1)>>>3|0,ci=bn+H|0,ir=ci>>>1&255,ci=ci>>>17|0,Mi=Ye-(ne(ir,6419)>>>8|0)-(ne(ci,13320)>>>8)|0,ni=Mi+8708|0,Mi=ni>>>0<16384?ni>>6:(Mi|0)<-8708?0:255,ci=Ye+(ne(ci,26149)>>>8|0)|0,ni=ci+-14234|0,p[Gi|0]=Mi>>>5|(ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:248)&248,ni=Gi,Ye=Ye+(ne(ir,33050)>>>8|0)|0,Gi=Ye+-17685|0,p[ni+1|0]=Mi<<3&224|(Gi>>>0<16384?Gi>>>9|0:Ye>>>0<17685?0:31),Gi=Tt<<2,ci=Gi+L|0,Ye=ne(F[n+nn|0],19077)>>>8|0,ee=ee+(H+xe<<1)>>>3|0,H=ee+ce|0,ir=H>>>1&255,H=H>>>17|0,Mi=Ye-(ne(ir,6419)>>>8|0)-(ne(H,13320)>>>8)|0,ni=Mi+8708|0,Mi=ni>>>0<16384?ni>>6:(Mi|0)<-8708?0:255,H=Ye+(ne(H,26149)>>>8|0)|0,ni=H+-14234|0,p[ci|0]=Mi>>>5|(ni>>>0<16384?ni>>>6|0:H>>>0<14234?0:248)&248,H=Ye+(ne(ir,33050)>>>8|0)|0,Ye=H+-17685|0,p[ci+1|0]=Mi<<3&224|(Ye>>>0<16384?Ye>>>9|0:H>>>0<17685?0:31),s&&(Ye=R+ki|0,H=ne(F[s+Ot|0],19077)>>>8|0,Ne=ee+Ne|0,ee=Ne>>>1&255,Ne=Ne>>>17|0,Ot=H-(ne(ee,6419)>>>8|0)-(ne(Ne,13320)>>>8)|0,ki=Ot+8708|0,Ot=ki>>>0<16384?ki>>6:(Ot|0)<-8708?0:255,Ne=H+(ne(Ne,26149)>>>8|0)|0,ki=Ne+-14234|0,p[Ye|0]=Ot>>>5|(ki>>>0<16384?ki>>>6|0:Ne>>>0<14234?0:248)&248,H=H+(ne(ee,33050)>>>8|0)|0,Ne=H+-17685|0,p[Ye+1|0]=Ot<<3&224|(Ne>>>0<16384?Ne>>>9|0:H>>>0<17685?0:31),Ne=R+Gi|0,H=ne(F[s+nn|0],19077)>>>8|0,ee=xe+bn|0,nn=ee>>>1&255,ee=ee>>>17|0,Ot=H-(ne(nn,6419)>>>8|0)-(ne(ee,13320)>>>8)|0,Ye=Ot+8708|0,Ot=Ye>>>0<16384?Ye>>6:(Ot|0)<-8708?0:255,ee=H+(ne(ee,26149)>>>8|0)|0,Ye=ee+-14234|0,p[Ne|0]=Ot>>>5|(Ye>>>0<16384?Ye>>>6|0:ee>>>0<14234?0:248)&248,ni=Ne,H=H+(ne(nn,33050)>>>8|0)|0,Ne=H+-17685|0,p[ni+1|0]=Ot<<3&224|(Ne>>>0<16384?Ne>>>9|0:H>>>0<17685?0:31)),ee=(Tt|0)!=(Ir|0),Tt=Tt+1|0,H=ce,Ne=xe,!!ee;);}e:{if(W&1||(a=mt<<1,g=a+L|0,n=ne(F[n+mt|0],19077)>>>8|0,k=(ne(ce,3)+xe|0)+131074|0,E=k>>>2&255,k=k>>>18|0,L=n-(ne(E,6419)>>>8|0)-(ne(k,13320)>>>8)|0,W=L+8708|0,L=W>>>0<16384?W>>6:(L|0)<-8708?0:255,k=n+(ne(k,26149)>>>8|0)|0,W=k+-14234|0,p[g|0]=L>>>5|(W>>>0<16384?W>>>6|0:k>>>0<14234?0:248)&248,k=g,n=n+(ne(E,33050)>>>8|0)|0,g=n+-17685|0,p[k+1|0]=L<<3&224|(g>>>0<16384?g>>>9|0:n>>>0<17685?0:31),!s))break e;a=a+R|0,n=ne(F[s+mt|0],19077)>>>8|0,s=(ne(xe,3)+ce|0)+131074|0,g=s>>>2&255,s=s>>>18|0,k=n-(ne(g,6419)>>>8|0)-(ne(s,13320)>>>8)|0,E=k+8708|0,k=E>>>0<16384?E>>6:(k|0)<-8708?0:255,s=n+(ne(s,26149)>>>8|0)|0,E=s+-14234|0,p[a|0]=k>>>5|(E>>>0<16384?E>>>6|0:s>>>0<14234?0:248)&248,n=n+(ne(g,33050)>>>8|0)|0,s=n+-17685|0,p[a+1|0]=k<<3&224|(s>>>0<16384?s>>>9|0:n>>>0<17685?0:31)}}function to(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ce=ne(F[n|0],19077)>>>8|0,xe=F[k|0]|F[E|0]<<16,H=F[a|0]|F[g|0]<<16,Ne=(xe+ne(H,3)|0)+131074|0,mt=Ne>>>2&255,Tt=ce+(ne(mt,33050)>>>8|0)|0,ee=Tt+-17685|0,p[L+1|0]=(ee>>>0<16384?ee>>>6|0:Tt>>>0<17685?0:240)|15,Ne=Ne>>>18|0,mt=ce-(ne(mt,6419)>>>8|0)-(ne(Ne,13320)>>>8)|0,Tt=mt+8708|0,ce=ce+(ne(Ne,26149)>>>8|0)|0,Ne=ce+-14234|0,p[L|0]=(Tt>>>0<16384?Tt>>>10|0:(mt|0)<-8708?0:15)|(Ne>>>0<16384?Ne>>>6|0:ce>>>0<14234?0:240)&240,s&&(ce=ne(F[s|0],19077)>>>8|0,Ne=(ne(xe,3)+H|0)+131074|0,mt=Ne>>>2&255,Tt=ce+(ne(mt,33050)>>>8|0)|0,ee=Tt+-17685|0,p[R+1|0]=(ee>>>0<16384?ee>>>6|0:Tt>>>0<17685?0:240)|15,Ne=Ne>>>18|0,Tt=ce+(ne(Ne,26149)>>>8|0)|0,ee=Tt+-14234|0,ce=ce-(ne(mt,6419)>>>8|0)-(ne(Ne,13320)>>>8)|0,Ne=ce+8708|0,p[R|0]=(ee>>>0<16384?ee>>>6|0:Tt>>>0<14234?0:240)&240|(Ne>>>0<16384?Ne>>>10|0:(ce|0)<-8708?0:15)),Tt=W+-1|0;e:{if((W|0)<3){ce=xe,Ne=H;break e}for(ce=Tt>>1,Ir=(ce|0)>1?ce:1,mt=1;ce=F[k+mt|0]|F[E+mt|0]<<16,Ne=F[a+mt|0]|F[g+mt|0]<<16,Ot=Ne+xe|0,ee=(ce+(Ot+H|0)|0)+524296|0,ki=mt<<1,ni=ki+-1|0,nn=ni<<1,Ye=nn+L|0,ir=ee+(Ot<<1)>>>3|0,ci=ir+H|0,Mi=ci>>>1&255,Ot=ne(F[n+ni|0],19077)>>>8|0,bn=(ne(Mi,33050)>>>8|0)+Ot|0,Gi=bn+-17685|0,p[Ye+1|0]=(Gi>>>0<16384?Gi>>>6|0:bn>>>0<17685?0:240)|15,Gi=Ye,Ye=ci>>>17|0,ci=Ot-(ne(Mi,6419)>>>8|0)-(ne(Ye,13320)>>>8)|0,Mi=ci+8708|0,Ot=Ot+(ne(Ye,26149)>>>8|0)|0,Ye=Ot+-14234|0,p[Gi|0]=(Mi>>>0<16384?Mi>>>10|0:(ci|0)<-8708?0:15)|(Ye>>>0<16384?Ye>>>6|0:Ot>>>0<14234?0:240)&240,Ot=mt<<2,Ye=Ot+L|0,ee=ee+(H+ce<<1)>>>3|0,ci=ee+Ne|0,Mi=ci>>>1&255,H=ne(F[n+ki|0],19077)>>>8|0,bn=(ne(Mi,33050)>>>8|0)+H|0,Gi=bn+-17685|0,p[Ye+1|0]=(Gi>>>0<16384?Gi>>>6|0:bn>>>0<17685?0:240)|15,Gi=Ye,Ye=ci>>>17|0,ci=H-(ne(Mi,6419)>>>8|0)-(ne(Ye,13320)>>>8)|0,Mi=ci+8708|0,H=H+(ne(Ye,26149)>>>8|0)|0,Ye=H+-14234|0,p[Gi|0]=(Mi>>>0<16384?Mi>>>10|0:(ci|0)<-8708?0:15)|(Ye>>>0<16384?Ye>>>6|0:H>>>0<14234?0:240)&240,s&&(nn=R+nn|0,H=ne(F[s+ni|0],19077)>>>8|0,xe=ee+xe|0,ee=xe>>>1&255,ni=H+(ne(ee,33050)>>>8|0)|0,Ye=ni+-17685|0,p[nn+1|0]=(Ye>>>0<16384?Ye>>>6|0:ni>>>0<17685?0:240)|15,Ye=nn,xe=xe>>>17|0,ni=H+(ne(xe,26149)>>>8|0)|0,nn=ni+-14234|0,H=H-(ne(ee,6419)>>>8|0)-(ne(xe,13320)>>>8)|0,xe=H+8708|0,p[Ye|0]=(nn>>>0<16384?nn>>>6|0:ni>>>0<14234?0:240)&240|(xe>>>0<16384?xe>>>10|0:(H|0)<-8708?0:15),xe=R+Ot|0,H=ne(F[s+ki|0],19077)>>>8|0,ee=ce+ir|0,ni=ee>>>1&255,ki=H+(ne(ni,33050)>>>8|0)|0,Ot=ki+-17685|0,p[xe+1|0]=(Ot>>>0<16384?Ot>>>6|0:ki>>>0<17685?0:240)|15,Ye=xe,xe=ee>>>17|0,ee=H+(ne(xe,26149)>>>8|0)|0,ki=ee+-14234|0,H=H-(ne(ni,6419)>>>8|0)-(ne(xe,13320)>>>8)|0,xe=H+8708|0,p[Ye|0]=(ki>>>0<16384?ki>>>6|0:ee>>>0<14234?0:240)&240|(xe>>>0<16384?xe>>>10|0:(H|0)<-8708?0:15)),ee=(mt|0)!=(Ir|0),mt=mt+1|0,H=Ne,xe=ce,!!ee;);}e:{if(W&1||(a=Tt<<1,g=a+L|0,n=ne(F[n+Tt|0],19077)>>>8|0,k=(ne(Ne,3)+ce|0)+131074|0,E=k>>>2&255,L=n+(ne(E,33050)>>>8|0)|0,W=L+-17685|0,p[g+1|0]=(W>>>0<16384?W>>>6|0:L>>>0<17685?0:240)|15,W=g,g=k>>>18|0,k=n+(ne(g,26149)>>>8|0)|0,L=k+-14234|0,n=n-(ne(E,6419)>>>8|0)-(ne(g,13320)>>>8)|0,g=n+8708|0,p[W|0]=(L>>>0<16384?L>>>6|0:k>>>0<14234?0:240)&240|(g>>>0<16384?g>>>10|0:(n|0)<-8708?0:15),!s))break e;a=a+R|0,n=ne(F[s+Tt|0],19077)>>>8|0,g=(ne(ce,3)+Ne|0)+131074|0,k=g>>>2&255,s=n+(ne(k,33050)>>>8|0)|0,E=s+-17685|0,p[a+1|0]=(E>>>0<16384?E>>>6|0:s>>>0<17685?0:240)|15,E=a,s=g>>>18|0,a=n+(ne(s,26149)>>>8|0)|0,g=a+-14234|0,n=n-(ne(k,6419)>>>8|0)-(ne(s,13320)>>>8)|0,s=n+8708|0,p[E|0]=(g>>>0<16384?g>>>6|0:a>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(n|0)<-8708?0:15)}}function Oo(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ce=ne(F[n|0],19077)>>>8|0,Ye=F[k|0]|F[E|0]<<16,ee=F[a|0]|F[g|0]<<16,xe=(Ye+ne(ee,3)|0)+131074|0,Ot=xe>>>18|0,Tt=ce+(ne(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[L|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,xe=xe>>>2&255,Tt=ce+(ne(xe,33050)>>>8|0)|0,H=Tt+-17685|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(ne(xe,6419)>>>8|0)-(ne(Ot,13320)>>>8)|0,xe=ce+8708|0,p[L+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255,s&&(ce=ne(F[s|0],19077)>>>8|0,xe=(ne(Ye,3)+ee|0)+131074|0,Ot=xe>>>18|0,Tt=ce+(ne(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,xe=xe>>>2&255,Tt=ce+(ne(xe,33050)>>>8|0)|0,H=Tt+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(ne(xe,6419)>>>8|0)-(ne(Ot,13320)>>>8)|0,xe=ce+8708|0,p[R+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255),Tt=W+-1|0;e:{if((W|0)<3){ce=Ye,xe=ee;break e}for(ce=Tt>>1,Ir=(ce|0)>1?ce:1,Ot=1;ce=F[k+Ot|0]|F[E+Ot|0]<<16,xe=F[a+Ot|0]|F[g+Ot|0]<<16,ni=xe+Ye|0,H=(ce+(ni+ee|0)|0)+524296|0,Gi=Ot<<1,ci=Gi+-1|0,nn=ne(ci,3),Ne=nn+L|0,ir=H+(ni<<1)>>>3|0,Mi=ir+ee|0,bn=Mi>>>17|0,ni=ne(F[n+ci|0],19077)>>>8|0,mt=(ne(bn,26149)>>>8|0)+ni|0,ki=mt+-14234|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ni+(ne(Mi,33050)>>>8|0)|0,ki=mt+-17685|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,mt=Ne,Ne=ni-(ne(Mi,6419)>>>8|0)-(ne(bn,13320)>>>8)|0,ni=Ne+8708|0,p[mt+1|0]=ni>>>0<16384?ni>>>6|0:(Ne|0)<-8708?0:255,ni=ne(Ot,6),Ne=ni+L|0,H=H+(ee+ce<<1)>>>3|0,Mi=H+xe|0,bn=Mi>>>1&255,ee=ne(F[n+Gi|0],19077)>>>8|0,mt=(ne(bn,33050)>>>8|0)+ee|0,ki=mt+-17685|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,Mi=Mi>>>17|0,mt=ee+(ne(Mi,26149)>>>8|0)|0,ki=mt+-14234|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,mt=Ne,ee=ee-(ne(bn,6419)>>>8|0)-(ne(Mi,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,s&&(ee=R+nn|0,H=H+Ye|0,Ne=H>>>17|0,Ye=ne(F[s+ci|0],19077)>>>8|0,ci=(ne(Ne,26149)>>>8|0)+Ye|0,nn=ci+-14234|0,p[ee|0]=nn>>>0<16384?nn>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ye+(ne(H,33050)>>>8|0)|0,nn=ci+-17685|0,p[ee+2|0]=nn>>>0<16384?nn>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ye-(ne(H,6419)>>>8|0)-(ne(Ne,13320)>>>8)|0,Ye=ee+8708|0,p[mt+1|0]=Ye>>>0<16384?Ye>>>6|0:(ee|0)<-8708?0:255,ee=R+ni|0,Ye=ne(F[s+Gi|0],19077)>>>8|0,H=ce+ir|0,ci=H>>>1&255,Gi=Ye+(ne(ci,33050)>>>8|0)|0,Ne=Gi+-17685|0,p[ee+2|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<17685?0:255,H=H>>>17|0,Gi=Ye+(ne(H,26149)>>>8|0)|0,Ne=Gi+-14234|0,p[ee|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<14234?0:255,Ne=ee,ee=Ye-(ne(ci,6419)>>>8|0)-(ne(H,13320)>>>8)|0,Ye=ee+8708|0,p[Ne+1|0]=Ye>>>0<16384?Ye>>>6|0:(ee|0)<-8708?0:255),H=(Ot|0)!=(Ir|0),Ot=Ot+1|0,ee=xe,Ye=ce,!!H;);}e:{if(W&1||(g=ne(Tt,3),a=g+L|0,n=ne(F[n+Tt|0],19077)>>>8|0,k=(ne(xe,3)+ce|0)+131074|0,E=k>>>18|0,L=n+(ne(E,26149)>>>8|0)|0,W=L+-14234|0,p[a|0]=W>>>0<16384?W>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=n+(ne(k,33050)>>>8|0)|0,W=L+-17685|0,p[a+2|0]=W>>>0<16384?W>>>6|0:L>>>0<17685?0:255,L=a,n=n-(ne(k,6419)>>>8|0)-(ne(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;n=g+R|0,s=ne(F[s+Tt|0],19077)>>>8|0,a=(ne(ce,3)+xe|0)+131074|0,g=a>>>18|0,k=s+(ne(g,26149)>>>8|0)|0,E=k+-14234|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(ne(a,33050)>>>8|0)|0,E=k+-17685|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(ne(a,6419)>>>8|0)-(ne(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function jo(n,s,a,g,k,E,L,R,W){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0;var H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ce=ne(F[n|0],19077)>>>8|0,Ye=F[k|0]|F[E|0]<<16,ee=F[a|0]|F[g|0]<<16,xe=(Ye+ne(ee,3)|0)+131074|0,Ot=xe>>>18|0,Tt=ce+(ne(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,xe=xe>>>2&255,Tt=ce+(ne(xe,33050)>>>8|0)|0,H=Tt+-17685|0,p[L|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(ne(xe,6419)>>>8|0)-(ne(Ot,13320)>>>8)|0,xe=ce+8708|0,p[L+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255,s&&(ce=ne(F[s|0],19077)>>>8|0,xe=(ne(Ye,3)+ee|0)+131074|0,Ot=xe>>>18|0,Tt=ce+(ne(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,xe=xe>>>2&255,Tt=ce+(ne(xe,33050)>>>8|0)|0,H=Tt+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(ne(xe,6419)>>>8|0)-(ne(Ot,13320)>>>8)|0,xe=ce+8708|0,p[R+1|0]=xe>>>0<16384?xe>>>6|0:(ce|0)<-8708?0:255),Tt=W+-1|0;e:{if((W|0)<3){ce=Ye,xe=ee;break e}for(ce=Tt>>1,Ir=(ce|0)>1?ce:1,Ot=1;ce=F[k+Ot|0]|F[E+Ot|0]<<16,xe=F[a+Ot|0]|F[g+Ot|0]<<16,ni=xe+Ye|0,H=(ce+(ni+ee|0)|0)+524296|0,Gi=Ot<<1,ci=Gi+-1|0,nn=ne(ci,3),Ne=nn+L|0,ir=H+(ni<<1)>>>3|0,Mi=ir+ee|0,bn=Mi>>>17|0,ni=ne(F[n+ci|0],19077)>>>8|0,mt=(ne(bn,26149)>>>8|0)+ni|0,ki=mt+-14234|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ni+(ne(Mi,33050)>>>8|0)|0,ki=mt+-17685|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,mt=Ne,Ne=ni-(ne(Mi,6419)>>>8|0)-(ne(bn,13320)>>>8)|0,ni=Ne+8708|0,p[mt+1|0]=ni>>>0<16384?ni>>>6|0:(Ne|0)<-8708?0:255,ni=ne(Ot,6),Ne=ni+L|0,H=H+(ee+ce<<1)>>>3|0,Mi=H+xe|0,bn=Mi>>>17|0,ee=ne(F[n+Gi|0],19077)>>>8|0,mt=(ne(bn,26149)>>>8|0)+ee|0,ki=mt+-14234|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ee+(ne(Mi,33050)>>>8|0)|0,ki=mt+-17685|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,mt=Ne,ee=ee-(ne(Mi,6419)>>>8|0)-(ne(bn,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,s&&(ee=R+nn|0,H=H+Ye|0,Ne=H>>>17|0,Ye=ne(F[s+ci|0],19077)>>>8|0,ci=(ne(Ne,26149)>>>8|0)+Ye|0,nn=ci+-14234|0,p[ee+2|0]=nn>>>0<16384?nn>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ye+(ne(H,33050)>>>8|0)|0,nn=ci+-17685|0,p[ee|0]=nn>>>0<16384?nn>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ye-(ne(H,6419)>>>8|0)-(ne(Ne,13320)>>>8)|0,Ye=ee+8708|0,p[mt+1|0]=Ye>>>0<16384?Ye>>>6|0:(ee|0)<-8708?0:255,ee=R+ni|0,Ye=ne(F[s+Gi|0],19077)>>>8|0,H=ce+ir|0,ci=H>>>17|0,Gi=Ye+(ne(ci,26149)>>>8|0)|0,Ne=Gi+-14234|0,p[ee+2|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<14234?0:255,H=H>>>1&255,Gi=Ye+(ne(H,33050)>>>8|0)|0,Ne=Gi+-17685|0,p[ee|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<17685?0:255,Ne=ee,ee=Ye-(ne(H,6419)>>>8|0)-(ne(ci,13320)>>>8)|0,Ye=ee+8708|0,p[Ne+1|0]=Ye>>>0<16384?Ye>>>6|0:(ee|0)<-8708?0:255),H=(Ot|0)!=(Ir|0),Ot=Ot+1|0,ee=xe,Ye=ce,!!H;);}e:{if(W&1||(g=ne(Tt,3),a=g+L|0,n=ne(F[n+Tt|0],19077)>>>8|0,k=(ne(xe,3)+ce|0)+131074|0,E=k>>>18|0,L=n+(ne(E,26149)>>>8|0)|0,W=L+-14234|0,p[a+2|0]=W>>>0<16384?W>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=n+(ne(k,33050)>>>8|0)|0,W=L+-17685|0,p[a|0]=W>>>0<16384?W>>>6|0:L>>>0<17685?0:255,L=a,n=n-(ne(k,6419)>>>8|0)-(ne(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;n=g+R|0,s=ne(F[s+Tt|0],19077)>>>8|0,a=(ne(ce,3)+xe|0)+131074|0,g=a>>>18|0,k=s+(ne(g,26149)>>>8|0)|0,E=k+-14234|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(ne(a,33050)>>>8|0)|0,E=k+-17685|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(ne(a,6419)>>>8|0)-(ne(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Ho(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0;e:{if(!n)break e;if(c[n>>2]=0,c[n+8>>2]=5010,!s){c[n>>2]=2,c[n+4>>2]=0,c[n+8>>2]=5013;break e}if(R=c[s+60>>2],R>>>0<=3){c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5050;break e}if(a=c[s+64>>2],k=F[a+1|0],E=F[a+2|0],g=F[a|0],L=g>>>4&1,p[n+42|0]=L,W=g>>>1&7,p[n+41|0]=W,H=(g^-1)&1,p[n+40|0]=H,g=(g|k<<8|E<<16)>>>5|0,c[n+44>>2]=g,W>>>0>=4){c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5068;break e}if(!L){c[n>>2]=4,c[n+4>>2]=0,c[n+8>>2]=5099;break e}if(k=R+-3|0,E=a+3|0,H){if(k>>>0<=6){c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5122;break e}if(!(F[a+5|0]==42&&!(F[E|0]!=157|F[a+4|0]!=1))){c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5150;break e}g=F[a+6|0]|F[a+7|0]<<8&16128,Di[n+48>>1]=g,p[n+52|0]=F[a+7|0]>>>6,k=F[a+8|0]|F[a+9|0]<<8&16128,Di[n+50>>1]=k,E=F[a+9|0],c[n+292>>2]=k+15>>>4,c[n+288>>2]=g+15>>>4,p[n+53|0]=E>>>6,c[s+84>>2]=0,c[s+4>>2]=k,c[s>>2]=g,c[s+100>>2]=k,c[s+96>>2]=g,c[s+92>>2]=0,c[s+88>>2]=k,c[s+80>>2]=g,c[s+72>>2]=0,c[s+76>>2]=0,c[s+16>>2]=k,c[s+12>>2]=g,s=n+904|0,Di[s>>1]=-1,p[s+2|0]=-1,c[n+120>>2]=0,c[n+112>>2]=1,c[n+116>>2]=0,c[n+104>>2]=0,c[n+108>>2]=0,k=R+-10|0,E=a+10|0,g=c[n+44>>2]}t:{if(g>>>0>k>>>0){if(s=0,c[n>>2])break t;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5164;break e}a=n+12|0,Er(a,E,g),L=c[n+44>>2],F[n+40|0]&&(ce=n,xe=Lr(a,1),p[ce+54|0]=xe,ce=n,xe=Lr(a,1),p[ce+55|0]=xe),s=Lr(a,1),c[n+104>>2]=s;i:{if(s){if(ce=n,xe=Lr(a,1),c[ce+108>>2]=xe,Lr(a,1)&&(ce=n,xe=Lr(a,1),c[ce+112>>2]=xe,s=n,Lr(a,1)?g=Ns(a,7):g=0,p[s+116|0]=g,s=n,Lr(a,1)?g=Ns(a,7):g=0,p[s+117|0]=g,s=n,Lr(a,1)?g=Ns(a,7):g=0,p[s+118|0]=g,s=n,Lr(a,1)?g=Ns(a,7):g=0,p[s+119|0]=g,s=n,Lr(a,1)?g=Ns(a,6):g=0,p[s+120|0]=g,s=n,Lr(a,1)?g=Ns(a,6):g=0,p[s+121|0]=g,s=n,Lr(a,1)?g=Ns(a,6):g=0,p[s+122|0]=g,s=n,Lr(a,1)?g=Ns(a,6):g=0,p[s+123|0]=g),!c[n+108>>2])break i;s=n,Lr(a,1)?g=Lr(a,8):g=255,p[s+904|0]=g,s=n,Lr(a,1)?g=Lr(a,8):g=255,p[s+905|0]=g,s=n,g=255;n:{if(!Lr(a,1))break n;g=Lr(a,8)}p[s+906|0]=g;break i}c[n+108>>2]=0}if(c[n+36>>2]){if(s=0,c[n>>2])break t;c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5185;break e}ce=n,xe=Lr(a,1),c[ce+56>>2]=xe,ce=n,xe=Lr(a,6),c[ce+60>>2]=xe,ce=n- -64|0,xe=Lr(a,3),c[ce>>2]=xe,s=Lr(a,1),c[n+68>>2]=s;i:{if(!s||!Lr(a,1)||(Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+72>>2]=xe),Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+76>>2]=xe),Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+80>>2]=xe),Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+84>>2]=xe),Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+88>>2]=xe),Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+92>>2]=xe),Lr(a,1)&&(ce=n,xe=Ns(a,6),c[ce+96>>2]=xe),!Lr(a,1)))break i;ce=n,xe=Ns(a,6),c[ce+100>>2]=xe}if(s=n,c[n+60>>2]?g=c[n+56>>2]?1:2:g=0,c[s+2308>>2]=g,c[n+36>>2]){if(s=0,c[n>>2])break t;c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5213;break e}H=Lr(a,2),R=-1<<H^-1,c[n+312>>2]=R,g=7;i:{if(s=k-L|0,W=ne(R,3),s>>>0>=W>>>0){if(ee=k+E|0,g=s-W|0,s=E+L|0,E=W+s|0,H)for(W=R>>>0>1?R:1,k=0;L=F[s|0]|F[s+1|0]<<8|F[s+2|0]<<16,L=L>>>0>g>>>0?g:L,Er((ne(k,28)+n|0)+316|0,E,L),g=g-L|0,E=E+L|0,s=s+3|0,k=k+1|0,(W|0)!=(k|0););if(Er((ne(R,28)+n|0)+316|0,E,g),g=5,E>>>0<ee>>>0)break i}if(s=0,c[n>>2])break t;c[n>>2]=g,c[n+4>>2]=0,c[n+8>>2]=5240;break e}if(vu(n),!F[n+40|0]){if(s=0,c[n>>2])break t;c[n>>2]=4,c[n+4>>2]=0,c[n+8>>2]=5264;break e}Lr(a,1),Pa(a,n),c[n+4>>2]=1,s=1}return s}return 0}function Ss(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0;if(k=c[n+20>>2],c[k+108>>2]<(s|0)){e:{if(!c[n+132>>2]&&(lc(),!c[n+132>>2]))break e;xe=c[k+100>>2],ci=ne(xe,c[k+104>>2]),W=c[k+112>>2],n=(W|0)/(xe|0)|0,ni=ne(s,xe);t:{i:{if((W|0)>=(ni|0)){Ye=k+48|0;break i}H=W-ne(n,xe)|0,L=c[k+152>>2],E=0;n:{if(!L)break n;E=c[c[k+160>>2]+(ne(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}if(Ye=k+48|0,c[Ye>>2])break i;for(Mi=c[k+148>>2],ki=c[k+16>>2],mt=k+24|0,Ot=c[k+168>>2]+ne(E,548)|0;;){if(!(H&Mi)){a=c[k+168>>2],L=c[k+152>>2],E=0;n:{if(!L)break n;E=c[c[k+160>>2]+(ne(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}Ot=a+ne(E,548)|0}g=c[k+44>>2],(g|0)>=32&&(Ae(mt),g=c[k+44>>2]),ee=k,E=c[mt+4>>2],a=E,R=g&63,L=R&31,Tt=c[mt>>2],a=c[Ot>>2]+(((32<=(R&63)>>>0?a>>>L|0:((1<<L)-1&a)<<32-L|Tt>>>L)&255)<<2)|0,L=F[a|0],L>>>0>=9&&(g=g+8|0,c[k+44>>2]=g,R=(mn[a+2>>1]<<2)+a|0,a=E,Ne=g&63,ce=Ne&31,a=R+(((-1<<L+-8^-1)&(32<=Ne>>>0?a>>>ce|0:((1<<ce)-1&a)<<32-ce|Tt>>>ce))<<2)|0,L=F[a|0]),R=(L&255)+g|0,c[ee+44>>2]=R,a=mn[a+2>>1];n:{if(a>>>0<=255){if(p[W+ki|0]=a,W=W+1|0,H=H+1|0,(H|0)<(xe|0))break n;if(E=n+1|0,H=0,(n|0)>=(s|0)){n=E;break n}if(E&15){n=E;break n}B(k,E),n=E;break n}if(ee=1,a>>>0>279)break t;L=a+-256|0,a>>>0>=260&&(E=a+-258>>1,L=no(mt,E)+((L&1|2)<<E)|0,Tt=c[k+24>>2],R=c[k+44>>2],E=c[k+28>>2]),ce=k,a=E,Ne=R&63,g=Ne&31,g=c[Ot+16>>2]+(((32<=Ne>>>0?a>>>g|0:((1<<g)-1&a)<<32-g|Tt>>>g)&255)<<2)|0,a=F[g|0],a>>>0>=9&&(R=R+8|0,c[k+44>>2]=R,Gi=(mn[g+2>>1]<<2)+g|0,Ne=R&63,g=Ne&31,g=Gi+(((-1<<a+-8^-1)&(32<=Ne>>>0?E>>>g|0:((1<<g)-1&E)<<32-g|Tt>>>g))<<2)|0,a=F[g|0]),E=(a&255)+R|0,c[ce+44>>2]=E,g=mn[g+2>>1],(E|0)>=32&&Ae(mt),E=L+1|0,g>>>0>=4&&(a=g+-2>>1,g=no(mt,a)+((g&1|2)<<a)|0);o:{if((g+1|0)>=121){a=g+-119|0;break o}a=F[g+1264|0],a=(ne(a>>>4|0,xe)-(a&15)|0)+8|0,a=(a|0)>1?a:1}if((ci-W|0)<(E|0)|(W|0)<(a|0))break t;g=W+ki|0,R=g-a|0;o:{l:{if((E|0)<8)break l;r:{u:switch(a+-1|0){case 0:a=F[R|0],ee=ne(a,16843009);break r;case 1:a=F[R|0]|F[R+1|0]<<8,ee=ne(a,65537);break r;case 3:break u;default:break l}a=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),ee=a}r:{u:{s:{if(g&3){if(p[g|0]=a,ee=xa(ee,24),R=R+1|0,g=g+1|0,g&3)break s;a=L>>>2|0;break u}L=E,a=L>>>2|0;break u}for(;p[g|0]=F[R|0],ce=L,L=L+-1|0,ee=xa(ee,24),R=R+1|0,g=g+1|0,!!(g&3););if(a=0,(ce|0)<5)break r;a=L>>2}for(ce=(a|0)>1?a:1,a=0;c[(a<<2)+g>>2]=ee,a=a+1|0,(ce|0)!=(a|0););a=ce<<2}if((a|0)>=(L|0))break o;for(;p[a+g|0]=F[a+R|0],a=a+1|0,(L|0)!=(a|0););break o}if((a|0)<(E|0)){if(a=0,(E|0)<=0)break o;for(;p[a+g|0]=F[a+R|0],ee=(a|0)!=(L|0),a=a+1|0,!!ee;);break o}Xr(g,R,E)}if(W=E+W|0,H=E+H|0,(H|0)>=(xe|0))for(;H=H-xe|0,E=n,n=E+1|0,n&15|(E|0)>=(s|0)||B(k,n),(H|0)>=(xe|0););if(!(H&Mi)|(W|0)>=(ni|0))break n;a=c[k+168>>2],L=c[k+152>>2],E=0;o:{if(!L)break o;E=c[c[k+160>>2]+(ne(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}Ot=a+ne(E,548)|0}if(c[Ye>>2]){c[Ye>>2]=1;break i}if(g=0,g=c[k+40>>2]==c[k+36>>2]?c[k+44>>2]>64:g,c[Ye>>2]=g,(W|0)>=(ni|0))break i;if(!!g)break}}B(k,(n|0)>(s|0)?s:n),ee=0}s=Ye,E=s,n=1;t:{if(c[s>>2]||(n=0,c[k+40>>2]!=c[k+36>>2]))break t;n=c[k+44>>2]>64}return c[E>>2]=n,!n|(ci|0)<=(W|0)&&!ee?(c[k+112>>2]=W,1):(c[k>>2]=n?5:3,0)}n=ql(k,c[k+16>>2],c[k+100>>2],c[k+104>>2],s,1)}else n=1;return n}function fs(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0;ci=Nn+-64|0,Nn=ci,k=c[n+2280>>2],bn=c[n+160>>2],Tt=c[n+2268>>2],E=c[n+2284>>2],Gi=F[c[n+2308>>2]+4863|0],a=Gi>>>1|0,Ne=c[n+2276>>2],Mi=c[n+2272>>2],Ir=c[n+308>>2],nn=c[n+164>>2],c[n+148>>2]==2&&Fu(n,n+160|0),L=ne(k,bn),ir=ne(k,Gi),g=ne(E,bn),ki=ne(a,E);e:{if(!c[n+168>>2]||(a=c[n+296>>2],(a|0)>=c[n+304>>2]))break e;for(Ye=c[n+164>>2];;){ce=c[n+172>>2]+(a<<2)|0,R=F[ce|0];t:{if(!R)break t;if(E=c[n+160>>2],H=c[n+2280>>2],W=(c[n+2268>>2]+(ne(E,H)<<4)|0)+(a<<4)|0,c[n+2308>>2]==1){if((a|0)>=1&&ft[c[2717]](W,H,R+4|0),F[ce+2|0]&&ft[c[2719]](W,H,R),E=ce+2|0,(Ye|0)>=1&&ft[c[2716]](W,H,R+4|0),!F[E|0])break t;ft[c[2718]](W,H,R);break t}if(ee=F[ce+1|0],Ot=c[n+2284>>2],k=ne(Ot,E)<<3,E=a<<3,ni=(k+c[n+2276>>2]|0)+E|0,mt=E+(k+c[n+2272>>2]|0)|0,xe=F[ce+3|0],(a|0)>=1&&(E=R+4|0,ft[c[2709]](W,H,E,ee,xe),ft[c[2711]](mt,ni,Ot,E,ee,xe)),F[ce+2|0]&&(ft[c[2713]](W,H,R,ee,xe),ft[c[2715]](mt,ni,Ot,R,ee,xe)),k=ce+2|0,(Ye|0)>=1&&(E=R+4|0,ft[c[2708]](W,H,E,ee,xe),ft[c[2710]](mt,ni,Ot,E,ee,xe)),!F[k|0])break t;ft[c[2712]](W,H,R,ee,xe),ft[c[2714]](mt,ni,Ot,R,ee,xe)}if(a=a+1|0,!((a|0)<c[n+304>>2]))break}}xe=L<<4,mt=Tt-ir|0,H=g<<3,Ye=Ne-ki|0,Tt=Mi-ki|0;e:{if(!c[n+540>>2]||(W=c[n+296>>2],g=c[n+304>>2],(W|0)>=(g|0)))break e;for(ee=n+552|0;;){if(a=c[n+176>>2]+ne(W,800)|0,k=F[a+796|0],k>>>0>=4){for(Ne=a+796|0,ce=c[n+2284>>2],Ot=ne(ce,c[n+160>>2])<<3,Mi=c[n+2276>>2],E=c[n+2272>>2],R=c[n+548>>2],L=c[n+544>>2],g=0;a=ee+(L<<2)|0,ni=c[a>>2]-c[ee+(R<<2)>>2]|0,c[a>>2]=ni&2147483647,a=c[n+544>>2]+1|0,L=(a|0)==55?0:a,c[n+544>>2]=L,a=c[n+548>>2]+1|0,R=(a|0)==55?0:a,c[n+548>>2]=R,p[g+ci|0]=ne(k,ni<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);for(k=W<<3,ft[c[2720]](ci,k+(E+Ot|0)|0,ce),E=F[Ne|0],R=c[n+548>>2],L=c[n+544>>2],g=0;a=ee+(L<<2)|0,Ne=c[a>>2]-c[ee+(R<<2)>>2]|0,c[a>>2]=Ne&2147483647,a=c[n+544>>2]+1|0,L=(a|0)==55?0:a,c[n+544>>2]=L,a=c[n+548>>2]+1|0,R=(a|0)==55?0:a,c[n+548>>2]=R,p[g+ci|0]=ne(E,Ne<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);ft[c[2720]](ci,k+(Ot+Mi|0)|0,ce),g=c[n+304>>2]}if(W=W+1|0,!((W|0)<(g|0)))break}}mt=xe+mt|0,E=H+Ye|0,Ne=H+Tt|0,Mi=Ir+-1|0;e:{t:{g=1;i:{if(!c[s+44>>2])break i;a=nn<<4,k=a+16|0;n:{if(nn){c[s+24>>2]=Ne,c[s+20>>2]=mt,L=E,a=a-Gi|0;break n}c[s+20>>2]=xe+c[n+2268>>2],c[s+24>>2]=H+c[n+2272>>2],L=H+c[n+2276>>2]|0,a=0}if(c[s+28>>2]=L,L=0,c[s+104>>2]=0,g=c[s+88>>2],k=k-((nn|0)>=(Mi|0)?0:Gi)|0,Ye=(k|0)>(g|0)?g:k,!(!c[n+2348>>2]|(Ye|0)<=(a|0))&&(L=Os(n,s,a,Ye-a|0),c[s+104>>2]=L,!L))break t;if(k=c[s+84>>2],(k|0)>(a|0)){g=k-a|0,c[s+20>>2]=c[s+20>>2]+ne(g,c[n+2280>>2]),a=ne(c[n+2284>>2],g>>1),c[s+24>>2]=a+c[s+24>>2],c[s+28>>2]=a+c[s+28>>2];n:{if(!L){L=0;break n}L=ne(g,c[s>>2])+L|0,c[s+104>>2]=L}a=k}if(g=1,(Ye|0)<=(a|0))break i;Tt=c[s+76>>2],c[s+20>>2]=Tt+c[s+20>>2],g=Tt>>1,c[s+24>>2]=g+c[s+24>>2],c[s+28>>2]=g+c[s+28>>2],L&&(c[s+104>>2]=L+Tt),c[s+8>>2]=a-k,c[s+16>>2]=Ye-a,c[s+12>>2]=c[s+80>>2]-Tt,g=ft[c[s+44>>2]](s)|0}if(c[n+156>>2]!=(bn+1|0)|(nn|0)>=(Mi|0))break e;Xr(c[n+2268>>2]-ir|0,mt+(c[n+2280>>2]<<4)|0,ir),s=0-ki|0,Xr(s+c[n+2272>>2]|0,Ne+(c[n+2284>>2]<<3)|0,ki),Xr(s+c[n+2276>>2]|0,E+(c[n+2284>>2]<<3)|0,ki);break e}g=Ko(n,3,4912)}return Nn=ci- -64|0,g|0}function jr(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0;e:{if(!n)break e;g=n+-8|0,a=c[n+-4>>2],n=a&-8,E=g+n|0;t:{if(a&1)break t;if(!(a&3)||(a=c[g>>2],g=g-a|0,g>>>0<Qn[2888]))break e;if(n=n+a|0,c[2889]!=(g|0)){if(a>>>0<=255){if(k=c[g+8>>2],a=a>>>3|0,s=c[g+12>>2],(s|0)==(k|0)){W=11536,H=c[2884]&xa(-2,a),c[W>>2]=H;break t}c[k+12>>2]=s,c[s+8>>2]=k;break t}R=c[g+24>>2],a=c[g+12>>2];i:{if((a|0)!=(g|0)){s=c[g+8>>2],c[s+12>>2]=a,c[a+8>>2]=s;break i}n:{if(k=g+20|0,s=c[k>>2],s||(k=g+16|0,s=c[k>>2],s))break n;a=0;break i}for(;L=k,a=s,k=a+20|0,s=c[k>>2],!(!s&&(k=a+16|0,s=c[a+16>>2],!s)););c[L>>2]=0}if(!R)break t;k=c[g+28>>2],s=(k<<2)+11840|0;i:{if(c[s>>2]==(g|0)){if(c[s>>2]=a,a)break i;W=11540,H=c[2885]&xa(-2,k),c[W>>2]=H;break t}if(c[R+(c[R+16>>2]==(g|0)?16:20)>>2]=a,!a)break t}if(c[a+24>>2]=R,s=c[g+16>>2],s&&(c[a+16>>2]=s,c[s+24>>2]=a),s=c[g+20>>2],!s)break t;c[a+20>>2]=s,c[s+24>>2]=a;break t}if(a=c[E+4>>2],(a&3)!=3)break t;c[2886]=n,c[E+4>>2]=a&-2,c[g+4>>2]=n|1,c[n+g>>2]=n;return}if(E>>>0<=g>>>0||(a=c[E+4>>2],!(a&1)))break e;t:{if(!(a&2)){if((E|0)==c[2890]){if(c[2890]=g,n=c[2887]+n|0,c[2887]=n,c[g+4>>2]=n|1,c[2889]!=(g|0))break e;c[2886]=0,c[2889]=0;return}if((E|0)==c[2889]){c[2889]=g,n=c[2886]+n|0,c[2886]=n,c[g+4>>2]=n|1,c[n+g>>2]=n;return}n=(a&-8)+n|0;i:{if(a>>>0<=255){if(s=c[E+8>>2],a=a>>>3|0,k=c[E+12>>2],(s|0)==(k|0)){W=11536,H=c[2884]&xa(-2,a),c[W>>2]=H;break i}c[s+12>>2]=k,c[k+8>>2]=s;break i}R=c[E+24>>2],a=c[E+12>>2];n:{if((E|0)!=(a|0)){s=c[E+8>>2],c[s+12>>2]=a,c[a+8>>2]=s;break n}o:{if(k=E+20|0,s=c[k>>2],s||(k=E+16|0,s=c[k>>2],s))break o;a=0;break n}for(;L=k,a=s,k=a+20|0,s=c[k>>2],!(!s&&(k=a+16|0,s=c[a+16>>2],!s)););c[L>>2]=0}if(!R)break i;k=c[E+28>>2],s=(k<<2)+11840|0;n:{if((E|0)==c[s>>2]){if(c[s>>2]=a,a)break n;W=11540,H=c[2885]&xa(-2,k),c[W>>2]=H;break i}if(c[R+((E|0)==c[R+16>>2]?16:20)>>2]=a,!a)break i}if(c[a+24>>2]=R,s=c[E+16>>2],s&&(c[a+16>>2]=s,c[s+24>>2]=a),s=c[E+20>>2],!s)break i;c[a+20>>2]=s,c[s+24>>2]=a}if(c[g+4>>2]=n|1,c[n+g>>2]=n,c[2889]!=(g|0))break t;c[2886]=n;return}c[E+4>>2]=a&-2,c[g+4>>2]=n|1,c[n+g>>2]=n}if(n>>>0<=255){n=n>>>3|0,a=(n<<3)+11576|0,s=c[2884],n=1<<n;t:{if(!(s&n)){c[2884]=n|s,n=a;break t}n=c[a+8>>2]}c[a+8>>2]=g,c[n+12>>2]=g,c[g+12>>2]=a,c[g+8>>2]=n;return}c[g+16>>2]=0,c[g+20>>2]=0,E=g,k=n>>>8|0,s=0;t:{if(!k||(s=31,n>>>0>16777215))break t;a=k,k=k+1048320>>>16&8,s=a<<k,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(k|R))|0,s=(s<<1|n>>>s+21&1)+28|0}c[E+28>>2]=s,L=(s<<2)+11840|0;t:{i:{k=c[2885],a=1<<s;n:{if(!(k&a)){c[2885]=a|k,c[L>>2]=g,c[g+24>>2]=L;break n}for(k=n<<((s|0)==31?0:25-(s>>>1|0)|0),a=c[L>>2];;){if(s=a,(c[a+4>>2]&-8)==(n|0))break i;if(a=k>>>29|0,k=k<<1,L=(s+(a&4)|0)+16|0,a=c[L>>2],!a)break}c[L>>2]=g,c[g+24>>2]=s}c[g+12>>2]=g,c[g+8>>2]=g;break t}n=c[s+8>>2],c[n+12>>2]=g,c[s+8>>2]=g,c[g+24>>2]=0,c[g+12>>2]=s,c[g+8>>2]=n}if(n=c[2892]+-1|0,c[2892]=n,n)break e;for(g=11992;n=c[g>>2],g=n+8|0,!!n;);c[2892]=-1}}function Cs(n,s,a,g,k){var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0;R=Nn-128|0,c[R+120>>2]=0,c[R+124>>2]=0,c[R+112>>2]=0,c[R+116>>2]=0,c[R+104>>2]=0,c[R+108>>2]=0,c[R+96>>2]=0,c[R+100>>2]=0,c[R+88>>2]=0,c[R+92>>2]=0,c[R+80>>2]=0,c[R+84>>2]=0,c[R+72>>2]=0,c[R+76>>2]=0,c[R+64>>2]=0,c[R+68>>2]=0;e:{if((g|0)>=1){for(;;){if(L=c[(E<<2)+a>>2],(L|0)>15)break e;if(L=(R- -64|0)+(L<<2)|0,c[L>>2]=c[L>>2]+1,E=E+1|0,(E|0)==(g|0))break}E=c[R+64>>2]}else E=0;if((E|0)==(g|0)||(c[R+4>>2]=0,E=c[R+68>>2],(E|0)>2)||(c[R+8>>2]=E,L=c[R+72>>2],(L|0)>4)||(E=E+L|0,c[R+12>>2]=E,L=c[R+76>>2],(L|0)>8)||(E=E+L|0,c[R+16>>2]=E,L=c[R+80>>2],(L|0)>16)||(E=E+L|0,c[R+20>>2]=E,L=c[R+84>>2],(L|0)>32)||(E=E+L|0,c[R+24>>2]=E,L=c[R+88>>2],(L|0)>64)||(E=E+L|0,c[R+28>>2]=E,L=c[R+92>>2],(L|0)>128)||(E=E+L|0,c[R+32>>2]=E,L=c[R+96>>2],(L|0)>256)||(E=E+L|0,c[R+36>>2]=E,L=c[R+100>>2],(L|0)>512)||(E=E+L|0,c[R+40>>2]=E,L=c[R+104>>2],(L|0)>1024)||(E=E+L|0,c[R+44>>2]=E,L=c[R+108>>2],(L|0)>2048)||(E=E+L|0,c[R+48>>2]=E,L=c[R+112>>2],(L|0)>4096)||(E=E+L|0,c[R+52>>2]=E,L=c[R+116>>2],(L|0)>8192)||(E=E+L|0,c[R+56>>2]=E,L=c[R+120>>2],(L|0)>16384))break e;if(c[R+60>>2]=E+L,E=0,(g|0)>0)for(;;){L=c[(E<<2)+a>>2];t:{if((L|0)<1)break t;if(k){W=R+(L<<2)|0,L=c[W>>2],c[W>>2]=L+1,Di[(L<<1)+k>>1]=E;break t}L=R+(L<<2)|0,c[L>>2]=c[L>>2]+1}if(E=E+1|0,(E|0)==(g|0))break}if(L=1<<s,mt=1,ce=c[R+60>>2],(ce|0)==1){if(!k)return L;for(a=mn[k>>1]<<16,E=L;s=E+-1|0,g=(s<<2)+n|0,Di[g>>1]=a,Di[g+2>>1]=a>>>16,g=(E|0)>1,E=s,!!g;);return L}ni=1;t:{i:{if((s|0)<1)break i;for(Ne=2,E=1;;){if(Ye=mt<<1,ci=(R- -64|0)+(E<<2)|0,g=c[ci>>2],mt=Ye-g|0,(mt|0)<0)break e;if(a=E,!(!n|(g|0)<1)){for(W=g+xe|0,Mi=a&255,ee=1<<a+-1;;){for(ki=(H<<2)+n|0,g=Mi|mn[(xe<<1)+k>>1]<<16,E=L;E=E-Ne|0,Tt=ki+(E<<2)|0,Di[Tt>>1]=g,Di[Tt+2>>1]=g>>>16,(E|0)>0;);for(g=ee;E=g,g=E>>>1|0,!!(E&H););if(H=E?E+(E+-1&H)|0:H,xe=xe+1|0,(W|0)==(xe|0))break}c[ci>>2]=0,xe=W}if(ni=Ye+ni|0,Ne=Ne<<1,E=a+1|0,(s|0)==(a|0))break}if((s|0)<=14)break i;Ye=L;break t}for(bn=L+-1|0,W=s,ee=-1,Ne=2,ce=n,Ye=L;;){if(Ot=0,ci=W,Gi=mt<<1,W=W+1|0,Tt=(R- -64|0)+(W<<2)|0,a=c[Tt>>2],mt=Gi-a|0,(mt|0)<0)break e;if(!(!n|(a|0)<1))for(ki=1<<ci,Ot=W-s|0,ir=Ot&255,Mi=1<<Ot,E=ee;;){ee=H&bn;i:{if((ee|0)==(E|0)){ee=E;break i}if(ce=(L<<2)+ce|0,L=Mi,E=Ot,(ci|0)<=13){E=W,g=E,a=Mi-a|0;n:{if((a|0)<1)break n;for(;;){if(g=15,E=E+1|0,(E|0)==15)break n;if(g=E,a=(a<<1)-c[(R- -64|0)+(E<<2)>>2]|0,!((a|0)>0))break}}E=g-s|0,L=1<<E}a=(ee<<2)+n|0,p[a|0]=s+E,Di[a+2>>1]=(ce-n>>>2|0)-ee,Ye=L+Ye|0}for(g=(H>>>s<<2)+ce|0,a=ir|mn[(xe<<1)+k>>1]<<16,E=L;E=E-Ne|0,nn=g+(E<<2)|0,Di[nn>>1]=a,Di[nn+2>>1]=a>>>16,(E|0)>0;);for(g=ki;E=g,g=E>>>1|0,!!(E&H););if(g=c[Tt>>2],a=g+-1|0,c[Tt>>2]=a,H=E?E+(E+-1&H)|0:H,xe=xe+1|0,E=ee,!((g|0)>1))break}if(ni=ni+Gi|0,Ne=Ne<<1,(W|0)==15)break}ce=c[R+60>>2]}Ot=((ce<<1)+-1|0)==(ni|0)?Ye:0}return Ot}function _s(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0;Ot=Nn-32|0,Nn=Ot,L=c[n+2256>>2],ce=c[n+2296>>2],ni=L+(ce<<1)|0,mt=c[n+2304>>2];e:{t:{if(c[n+2236>>2]&&(a=ne(ce,800)+mt|0,F[a+797|0]))break t;if(k=ne(ce,800)+mt|0,ci=F[k+798|0],W=3,g=Zo(k,0,768),!F[g+768|0]){a=Ot,c[a+24>>2]=0,c[a+28>>2]=0,c[a+16>>2]=0,c[a+20>>2]=0,c[a+8>>2]=0,c[a+12>>2]=0,c[a>>2]=0,c[a+4>>2]=0,E=L+-1|0,W=L+(ce<<1)|0,H=ft[c[2661]](s,n+2032|0,F[E|0]+F[W+1|0]|0,((ci<<5)+n|0)+784|0,0,a)|0,a=(H|0)>0,p[E|0]=a,p[W+1|0]=a;i:{if((H|0)>=2){ft[c[2674]](Ot,g);break i}a=ne(ce,800)+mt|0,g=Di[Ot>>1]+3>>>3|0,Di[a+480>>1]=g,Di[a+448>>1]=g,Di[a+416>>1]=g,Di[a+384>>1]=g,Di[a+352>>1]=g,Di[a+320>>1]=g,Di[a+288>>1]=g,Di[a+256>>1]=g,Di[a+224>>1]=g,Di[a+192>>1]=g,Di[a+160>>1]=g,Di[a+128>>1]=g,Di[a+96>>1]=g,Di[a+64>>1]=g,Di[a+32>>1]=g,Di[a>>1]=g}W=0,E=1}for(a=F[ni|0]&15,g=((ci<<5)+n|0)+776|0,ki=L+-2|0,L=F[ki|0]&15,W=(ne(W,68)+n|0)+1964|0;H=ft[c[2661]](s,W,(L&1)+(a&1)|0,g,E,k)|0,xe=mn[k>>1],R=(H|0)>(E|0),ee=a>>>1|0,a=ft[c[2661]](s,W,R+(ee&1)|0,g,E,k+32|0)|0,Ne=mn[k+32>>1],Ye=(a|0)>(E|0),R=(ee&126|R<<7)>>>1|0,ee=ft[c[2661]](s,W,Ye+(R&1)|0,g,E,k- -64|0)|0,Gi=mn[k+64>>1],Mi=(ee|0)>(E|0),Ye=(R|Ye<<7)>>>1|0,R=ft[c[2661]](s,W,Mi+(Ye&1)|0,g,E,k+96|0)|0,nn=(((a|0)>3?3:(a|0)<2?(Ne|0)!=0:2)|((H|0)>3?12:(H|0)<2?((xe|0)!=0)<<2:8))<<4|nn<<8|((ee|0)>3?12:(ee|0)<2?((Gi|0)!=0)<<2:8)|((R|0)>3?3:(R|0)<2?mn[k+96>>1]!=0:2),H=(R|0)>(E|0),a=H<<3|(Ye|Mi<<7)>>>5,L=H<<7|(L&254)>>>1,k=k+128|0,Tt=Tt+1|0,(Tt|0)!=4;);for(W=n+2100|0,Tt=L>>>4|0,ee=a&255,H=((ci<<5)+n|0)+792|0,L=0,a=1,E=0;g=E|4,xe=F[ki|0]>>>g|0,R=F[ni|0]>>>g|0,g=ft[c[2661]](s,W,(xe&1)+(R&1)|0,H,0,k)|0,Ye=mn[k>>1],Ne=(g|0)>0,R=ft[c[2661]](s,W,Ne+(R>>>1&1)|0,H,0,k+32|0)|0,Gi=mn[k+32>>1],xe=ft[c[2661]](s,W,Ne+(xe>>>1&1)|0,H,0,k- -64|0)|0,Mi=mn[k+64>>1],bn=(xe|0)>0,ir=(R|0)>0,Ne=ft[c[2661]](s,W,bn+ir|0,H,0,k+96|0)|0,L=((((R|0)>3?3:(R|0)<2?(Gi|0)!=0:2)|((g|0)>3?12:(g|0)<2?((Ye|0)!=0)<<2:8))<<4|((xe|0)>3?12:(xe|0)<2?((Mi|0)!=0)<<2:8)|((Ne|0)>3?3:(Ne|0)<2?mn[k+96>>1]!=0:2))<<(E<<2)|L,g=(Ne|0)>0,Tt=(g<<5|ir<<4)<<E|Tt,ee=(g<<1|bn)<<4<<E|ee,k=k+128|0,g=a,a=0,E=2,!!g;);p[ni|0]=ee,p[ki|0]=Tt,a=ne(ce,800)+mt|0,c[a+792>>2]=L,c[a+788>>2]=nn,p[a+796|0]=L&43690?0:c[((ci<<5)+n|0)+804>>2],E=(L|nn)!=0;break e}p[ni|0]=0,p[L+-2|0]=0,F[a+768|0]||(p[(L+(ce<<1)|0)+1|0]=0,p[L+-1|0]=0),a=ne(ce,800)+mt|0,c[a+788>>2]=0,c[a+792>>2]=0,p[a+796|0]=0}return c[n+2308>>2]>=1&&(a=c[n+2260>>2]+(c[n+2296>>2]<<2)|0,g=n,n=ne(ce,800)+mt|0,n=c[((g+(F[n+798|0]<<3)|0)+(F[n+768|0]<<2)|0)+2312>>2],p[a|0]=n,p[a+1|0]=n>>>8,p[a+2|0]=n>>>16,p[a+3|0]=n>>>24,p[a+2|0]=F[a+2|0]|E),Nn=Ot+32|0,!c[s+24>>2]}function Hl(n,s,a,g,k){var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0;Ne=Nn-16|0,Nn=Ne,L=c[n+8>>2];e:{t:switch(c[n>>2]){case 2:ft[c[2733]](g,ne(L,a-s|0),k);break e;case 0:i:{if(s){ce=L+-1|0,ee=k,E=s;break i}if(E=c[g>>2],E=E+-16777216&-16711936|E&16711935,c[k>>2]=E,ce=L+-1|0,(L|0)>=2)for(ee=k+4|0,H=g+4|0;xe=W<<2,R=c[xe+H>>2],E=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,c[ee+xe>>2]=E,W=W+1|0,(ce|0)!=(W|0););E=L<<2,ee=E+k|0,g=g+E|0,E=1}if(H=E,(H|0)<(a|0))for(E=c[n+4>>2],Ot=1<<E,Mi=Ot+-1|0,Ye=0-Ot|0,mt=0-L|0,Tt=ce+Ot>>>E|0,xe=c[n+16>>2]+(ne(Tt,H>>E)<<2)|0;;){if(R=c[g>>2],ce=mt<<2,E=c[ce+ee>>2],c[ee>>2]=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,E=1,W=xe,(L|0)>=2)for(;R=E<<2,ci=R+ee|0,ki=g+R|0,ni=Ot+(E&Ye)|0,R=(ni|0)>(L|0)?L:ni,ft[c[(c[W>>2]>>>6&60)+10960>>2]](ki,ce+ci|0,R-E|0,ci),W=W+4|0,E=R,(L|0)>(ni|0););if(H=H+1|0,xe=Mi&H?xe:(Tt<<2)+xe|0,E=L<<2,ee=E+ee|0,g=g+E|0,(a|0)==(H|0))break}if(c[n+12>>2]==(a|0))break e;n=L<<2,Xr(k-n|0,(ne(L,(s^-1)+a|0)<<2)+k|0,n);break e;case 1:if((a|0)<=(s|0))break e;for(E=c[n+4>>2],Ye=1<<E,mt=L&0-Ye,Tt=L-mt|0,ce=Ye+-1|0,W=ce+L>>>E|0,n=c[n+16>>2]+(ne(W,s>>E)<<2)|0,ee=(mt|0)<1;;){p[Ne+10|0]=0,Di[Ne+8>>1]=0,H=(L<<2)+g|0;i:{if(ee){E=n;break i}for(xe=(mt<<2)+g|0,E=n;R=c[E>>2],p[Ne+8|0]=R,p[Ne+10|0]=R>>>16,p[Ne+9|0]=R>>>8,ft[c[2804]](Ne+8|0,g,Ye,k),E=E+4|0,R=Ye<<2,k=R+k|0,g=g+R|0,g>>>0<xe>>>0;);}if(g>>>0<H>>>0&&(E=c[E>>2],p[Ne+8|0]=E,p[Ne+10|0]=E>>>16,p[Ne+9|0]=E>>>8,ft[c[2804]](Ne+8|0,g,Tt,k),E=Tt<<2,k=E+k|0,g=g+E|0),s=s+1|0,n=ce&s?n:(W<<2)+n|0,(s|0)==(a|0))break}break e;case 3:break t;default:break e}if(E=c[n+4>>2],!((g|0)!=(k|0)|(E|0)<1)){if(k=a-s|0,E=ne(k,(L+(1<<E)|0)+-1>>>E|0)<<2,W=((ne(k,L)<<2)+g|0)-E|0,k=Fc(W,g,E),ee=c[n+16>>2],ce=c[n+8>>2],n=c[n+4>>2],H=8>>>n|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(xe=-1<<H^-1,R=-1<<n^-1,n=(ce|0)<1;;){if(E=0,k=0,!n)for(;E&R||(k=F[W+1|0],W=W+4|0),c[g>>2]=c[ee+((k&xe)<<2)>>2],k=k>>>H|0,g=g+4|0,E=E+1|0,(ce|0)!=(E|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2805]](k,ee,g,s,a,ce);break e}if(ee=c[n+16>>2],H=8>>>E|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(xe=-1<<H^-1,R=-1<<E^-1,n=(L|0)<1;;){if(W=0,E=0,!n)for(;W&R||(E=F[g+1|0],g=g+4|0),c[k>>2]=c[ee+((E&xe)<<2)>>2],E=E>>>H|0,k=k+4|0,W=W+1|0,(L|0)!=(W|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2805]](g,ee,k,s,a,L)}Nn=Ne+16|0}function kl(n,s,a,g,k,E,L,R){var W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0;ce=Nn-16|0,Nn=ce,c[ce+12>>2]=0,c[ce+8>>2]=0,Gi=R?c[R+8>>2]:0;e:{if(!n){ee=7;break e}if(s>>>0<12){ee=7;break e}if(H=s,W=n,Tt=Nc(W,5463),!Tt){if(ee=3,(F[n+8|0]|F[n+9|0]<<8|(F[n+10|0]<<16|F[n+11|0]<<24))!=1346520407||(Ye=F[n+4|0]|F[n+5|0]<<8|(F[n+6|0]<<16|F[n+7|0]<<24),Ye+-12>>>0>4294967274))break e;if(!(!Gi|Ye>>>0<=s+-8>>>0)){ee=7;break e}if(H=s+-12|0,H>>>0<8){ee=7;break e}W=n+12|0}mt=Nc(W,5468);t:{if(mt){ee=0;break t}if(ee=3,(F[W+4|0]|F[W+5|0]<<8|(F[W+6|0]<<16|F[W+7|0]<<24))!=10)break e;if(H>>>0<18){ee=7;break e}if(xe=1,ni=(F[W+12|0]|F[W+13|0]<<8|F[W+14|0]<<16)+1|0,ci=(F[W+15|0]|F[W+16|0]<<8|F[W+17|0]<<16)+1|0,cr(ni,0,ci,0),Tt|Fn)break e;ee=F[W+8|0],H=H+-18|0,W=W+18|0,Mi=(ee&2)>>>1|0}k&&(c[k>>2]=ee>>>4&1),E&&(c[E>>2]=Mi),L&&(c[L>>2]=0),c[ce+8>>2]=ci,c[ce+12>>2]=ni;t:{if(!R&&(E=0,!mt&Mi))break t;E=0;i:{if(H>>>0<4)break i;n:{if(xe|Ye|(F[W|0]|F[W+1|0]<<8|(F[W+2|0]<<16|F[W+3|0]<<24))!=1213221953&&mt|Tt)break n;if(H>>>0<8)break i;for(ki=22;;){if(ee=3,Ne=F[W+4|0]|F[W+5|0]<<8|(F[W+6|0]<<16|F[W+7|0]<<24),Ne>>>0>4294967286||(Ot=Ne+9&-2,ki=Ot+ki|0,ki>>>0>Ye>>>0&&!Tt))break e;if((F[W|0]|F[W+1|0]<<8|(F[W+2|0]<<16|F[W+3|0]<<24))==540561494|(F[W|0]|F[W+1|0]<<8|(F[W+2|0]<<16|F[W+3|0]<<24))==1278758998)break n;if(H>>>0<Ot>>>0)break i;if(xe=(F[W|0]|F[W+1|0]<<8|(F[W+2|0]<<16|F[W+3|0]<<24))==1213221953,E=xe?W+8|0:E,nn=xe?Ne:nn,W=W+Ot|0,H=H-Ot|0,!(H>>>0>=8))break}break i}if(H>>>0<8)break i;Ne=F[W|0]|F[W+1|0]<<8|(F[W+2|0]<<16|F[W+3|0]<<24);n:{if(!((F[W|0]|F[W+1|0]<<8|(F[W+2|0]<<16|F[W+3|0]<<24))!=540561494&&(Ne|0)!=1278758998)){if(xe=F[W+4|0]|F[W+5|0]<<8|(F[W+6|0]<<16|F[W+7|0]<<24),Ye>>>0>=12&&(ee=3,xe>>>0>Ye+-12>>>0))break e;if(H=H+-8|0,xe>>>0>H>>>0&&Gi)break i;W=W+8|0,Ne=(Ne|0)==1278758998;break n}xe=H,Ne=F[W|0]!=47|H>>>0<5?0:F[W+4|0]<32}if(ee=3,xe>>>0>4294967286)break e;Mi|!L||(c[L>>2]=Ne?2:1);n:{if(!Ne){if(H>>>0<10)break i;if(St(W,H,xe,ce+12|0,ce+8|0))break n;break e}if(H>>>0<5)break i;if(!Ui(W,H,ce+12|0,ce+8|0,k))break e}if(c[ce+12>>2]!=(ni|0)|c[ce+8>>2]!=(ci|0)&&!mt)break e;if(!R)break t;c[R+8>>2]=0,c[R+12>>2]=0,c[R+4>>2]=s,c[R>>2]=n,c[R+32>>2]=Ne,c[R+28>>2]=Ye,c[R+24>>2]=xe,c[R+20>>2]=nn,c[R+16>>2]=E,c[R+12>>2]=W-n;break t}if(R){ee=7;break e}if(ee=7,mt)break e}if(k&&(c[k>>2]=c[k>>2]|(E|0)!=0),a&&(c[a>>2]=c[ce+12>>2]),ee=0,!g)break e;c[g>>2]=c[ce+8>>2]}return Nn=ce+16|0,ee}function Ru(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;e:{R=c[n+108>>2],a=s-R|0;t:{if((a|0)<1)break t;L=c[n+8>>2],Ne=c[L>>2],g=c[n+100>>2],H=c[n+16>>2]+(ne(g,R)<<2)|0,W=c[n+20>>2],ce=c[n+176>>2];i:{if((ce|0)>=1){if(a=ce+-1|0,Hl((ne(a,20)+n|0)+180|0,R,s,H,W),(ce|0)<2)break i;for(;g=a+-1|0,Hl((ne(g,20)+n|0)+180|0,R,s,W,W),ce=(a|0)>1,a=g,!!ce;);break i}if((W|0)==(H|0))break i;Xr(W,H,ne(a,g)<<2)}if(R=c[L+84>>2],H=c[n+108>>2],ce=(R|0)>(H|0),g=c[L+88>>2],g=(g|0)<(s|0)?g:s,a=ce?R:H,(g|0)<=(a|0))break t;if(g=g-a|0,c[L+16>>2]=g,c[L+8>>2]=a-R,a=c[L+76>>2],k=c[L+80>>2]-a|0,c[L+12>>2]=k,Ye=Ne<<2,xe=(a<<2)+(ce?W+ne(Ye,R-H|0)|0:W)|0,a=c[n+12>>2],R=c[a>>2],R>>>0>10)break e;W=c[a+20>>2],mt=c[a+16>>2]+ne(W,c[n+116>>2])|0;i:{if(c[L+92>>2]){if((g|0)<1)break i;for(;;){Ne=g-ee|0,ce=mc(c[n+268>>2],Ne),a=ne(ee,Ye)+xe|0,pc(a,Ye,c[c[n+268>>2]+44>>2],ce),ee=vs(c[n+268>>2],Ne,a,Ye)+ee|0,a=0,k=c[n+268>>2];n:{if(c[k+64>>2]>=c[k+56>>2])break n;for(ce=ne(E,W)+mt|0,H=c[k+52>>2],Ne=c[k+68>>2];;){if(c[k+24>>2]>0)break n;if(Ni(k),ft[c[2662]](Ne,H,1),Co(Ne,H,R,ce+ne(a,W)|0),a=a+1|0,!(c[k+64>>2]<c[k+56>>2]))break}}if(E=a+E|0,!((ee|0)<(g|0)))break}break i}if((g|0)>=1)for(a=g;Co(xe,k,R,mt),mt=W+mt|0,xe=xe+Ye|0,E=(a|0)>1,a=a+-1|0,!!E;);E=g}c[n+116>>2]=c[n+116>>2]+E}c[n+108>>2]=s;return}ee=c[n+116>>2];e:{if(c[L+92>>2]){if((g|0)<1)break e;for(;;){a=g-mt|0,E=mc(c[n+268>>2],a),pc(xe,Ye,c[c[n+268>>2]+44>>2],E),Ne=ne(E,Ye),mt=vs(c[n+268>>2],a,xe,Ye)+mt|0,R=0,L=c[n+268>>2];t:{if(c[L+64>>2]>=c[L+56>>2])break t;for(W=c[L+52>>2],H=c[L+68>>2],ce=H+3|0,a=ee;;){if(c[L+24>>2]>0)break t;if(Ni(L),ft[c[2662]](H,W,1),k=c[n+12>>2],ft[c[2860]](H,c[k+16>>2]+ne(c[k+32>>2],a)|0,W),E=a>>1,ft[c[2861]](H,c[k+20>>2]+ne(E,c[k+36>>2])|0,c[k+24>>2]+ne(E,c[k+40>>2])|0,W,(a^-1)&1),E=c[k+28>>2],E&&ft[c[2668]](ce,0,W,1,E+ne(c[k+44>>2],a)|0,0)|0,R=R+1|0,a=a+1|0,!(c[L+64>>2]<c[L+56>>2]))break}}if(xe=xe+Ne|0,ee=ee+R|0,!((mt|0)<(g|0)))break}break e}if((g|0)<1)break e;for(;;){if(ft[c[2860]](xe,c[a+16>>2]+ne(c[a+32>>2],ee)|0,k),E=ee>>1,ft[c[2861]](xe,c[a+20>>2]+ne(E,c[a+36>>2])|0,c[a+24>>2]+ne(E,c[a+40>>2])|0,k,(ee^-1)&1),E=c[a+28>>2],E&&ft[c[2668]](xe+3|0,0,k,1,E+ne(c[a+44>>2],ee)|0,0)|0,ee=ee+1|0,(g|0)<2)break e;g=g+-1|0,xe=xe+Ye|0,a=c[n+12>>2]}}c[n+116>>2]=ee,c[n+108>>2]=s}function La(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;s=c[n+40>>2],g=c[c[s>>2]>>2],k=g+-1|0;e:{if(k>>>0<12&&(a=0,2077>>>(k&65535)&1))break e;a=g+-7>>>0>3}c[s+40>>2]=0,c[s+44>>2]=0,c[s+48>>2]=0,c[s+52>>2]=0;e:{if(!Fa(c[s+20>>2],n,a?12:11))break e;a|g+-7>>>0>3||fl(),E=s+40|0;t:{i:{n:{o:{l:{if(c[n+92>>2]){if(a=c[s>>2],R=c[a>>2],L=R+-1|0,g>>>0<=10){if(L>>>0>=12||(k=0,!(2077>>>(L&65535)&1)))break n;break i}if(L>>>0>=12||(g=0,!(2077>>>(L&65535)&1)))break l;break o}r:{if(g>>>0<=10){if(Kl(),c[s+44>>2]=6,!c[n+56>>2])break r;if(k=c[n+12>>2],L=k+1|0,k=Ts(1,0,(L&-2)+k|0),c[E>>2]=k,!k)break e;c[s+4>>2]=k,n=c[n+12>>2],c[s+44>>2]=7,n=n+k|0,c[s+8>>2]=n,c[s+12>>2]=n+(L>>1),fl();break r}c[s+44>>2]=8}if(W=1,a)break e;n=9;r:switch(g+-5|0){default:n=g>>>0<11?10:11;break;case 0:case 5:break r}if(c[s+48>>2]=n,g>>>0>10)break e;break t}g=R+-7>>>0>3}if(R=c[n+100>>2],H=c[n+12>>2],ee=c[n+16>>2],ce=E,k=c[n+96>>2],E=k+1|0,xe=E&-2,Ne=xe<<1,Ye=k<<1,mt=(Ne+Ye<<2)+(g?0:k<<3)|0,L=Ts(1,0,mt+(g?283:367)|0),c[ce>>2]=L,!L||(W=(L+mt|0)+31&-32,c[s+24>>2]=W,c[s+32>>2]=W+168,c[s+28>>2]=W+84,c[s+36>>2]=g?0:W+252|0,ll(W,c[n+12>>2],c[n+16>>2],c[a+16>>2],k,R,c[a+32>>2],1,L),W=H+1>>1,H=ee+1>>1,E=E>>1,ee=R+1>>1,L=L+(Ye<<2)|0,ll(c[s+28>>2],W,H,c[a+20>>2],E,ee,c[a+36>>2],1,L),ll(c[s+32>>2],W,H,c[a+24>>2],E,ee,c[a+40>>2],1,L+(xe<<2)|0),c[s+44>>2]=12,W=1,g))break e;ll(c[s+36>>2],c[n+12>>2],c[n+16>>2],c[a+28>>2],k,R,c[a+44>>2],1,L+(Ne<<2)|0),c[s+48>>2]=13;break t}k=R+-7>>>0>3}if(L=c[n+100>>2],H=c[n+12>>2],ee=c[n+16>>2],a=c[n+96>>2],xe=ne(a,6),R=(k?xe:a<<3)<<2,ce=E,Ne=ne(a,3),Ye=a<<2,E=R+(k?Ne:Ye)|0,g=Ts(1,0,E+(k?283:367)|0),c[ce>>2]=g,!g||(W=1,E=(g+E|0)+31&-32,c[s+24>>2]=E,c[s+32>>2]=E+168,c[s+28>>2]=E+84,c[s+36>>2]=k?0:E+252|0,ce=E,E=g+R|0,ll(ce,c[n+12>>2],c[n+16>>2],E,a,L,0,1,g),R=H+1>>1,H=ee+1>>1,ee=a<<1,ll(c[s+28>>2],R,H,a+E|0,a,L,0,1,g+(ee<<2)|0),ll(c[s+32>>2],R,H,E+ee|0,a,L,0,1,g+(Ye<<2)|0),c[s+44>>2]=14,Xa(),k))break e;ll(c[s+36>>2],c[n+12>>2],c[n+16>>2],E+Ne|0,a,L,0,1,g+(xe<<2)|0),c[s+48>>2]=15,n=16;i:switch(c[c[s>>2]>>2]+-5|0){default:n=17;break;case 0:case 5:break i}c[s+52>>2]=n}lc()}return W|0}function Sl(n,s,a,g,k){var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0,ms=0,Aa=0,dl=0;Gi=Nn-256|0,Nn=Gi,E=(k|0)/25|0;e:{if(!n|k>>>0>100|((s|0)<1|(a|0)<1)||(L=1,ir=a+-1|0,Ye=s+-1|0,k=(E<<1|1)>(s|0)?Ye>>1:E,ee=(k<<1|1)>(a|0)?ir>>1:k,(ee|0)<1)||(L=0,H=s<<1,E=ee<<1,k=ne(H,E+2|0),ci=Ts(1,0,(k+H|0)+4094|0),!ci))break e;for(Ot=0-ee|0,E=E|1,xe=(ne(E,s)<<1)+ci|0,W=xe-H|0,Zo(W,0,H),mt=Zo(Gi,0,256),ki=k+ci|0,Mi=ne(E,E),nn=255,ce=255,E=n;;){for(L=0;k=F[L+E|0],p[k+mt|0]=1,Ne=(R|0)<(k|0),R=Ne?k:R,Ir=Ne?k:Ir,Ne=(ce|0)>(k|0),ce=Ne?k:ce,nn=Ne?k:nn,L=L+1|0,(L|0)!=(s|0););if(E=g+E|0,Tt=Tt+1|0,(Tt|0)==(a|0))break}for(R=R-ce|0,Ne=262144/(Mi>>>0)|0,E=H+ki|0,L=-1,ce=0,k=0;F[k+mt|0]&&(ce=ce+1|0,(L|0)>=0&&(L=k-L|0,R=(L|0)<(R|0)?L:R),L=k),k=k+1|0,(k|0)!=256;);for(L=R<<2,mt=ne(R,12)>>2,R=L-mt|0,Mi=E+2046|0,k=1;;){Tt=k<<1,ni=Tt+Mi|0,E=k;t:{if((k|0)<=(mt|0)||(E=0,(L|0)<=(k|0)))break t;E=(ne(mt,L-k|0)|0)/(R|0)|0}if(E=E>>>2|0,Di[ni>>1]=E,Di[Mi-Tt>>1]=0-E,k=k+1|0,(k|0)==1024)break}if(Di[Mi>>1]=0,!((ce|0)<3|(Ot|0)>=(a|0)))for(Tt=ee^-1,ce=s-ee|0,mt=ee+1|0,ms=ee+-1|0,Aa=(H-ee|0)+-2|0,dl=(Ye<<1)+xe|0,L=ci,E=n;;){if(R=0,k=0,ni=(s|0)<1,!ni)for(;R=F[k+E|0]+(R&65535)|0,H=k<<1,Ye=R+mn[H+W>>1]|0,bn=H+xe|0,H=L+H|0,Di[bn>>1]=Ye-mn[H>>1],Di[H>>1]=Ye,k=k+1|0,(k|0)!=(s|0););if(R=(Ot|0)<(ir|0)?g+E|0:E,H=(Ot|0)>-1,Ye=(s<<1)+L|0,bn=(Ye|0)==(xe|0),(Ot|0)>=(ee|0)){if(k=0,(ee|0)>-1){for(;Di[(k<<1)+ki>>1]=ne(Ne,mn[(ee-k<<1)+xe>>1]+mn[(k+ms<<1)+xe>>1]&65535)>>>16,W=(k|0)==(ee|0),k=k+1|0,!W;);k=mt}if((k|0)<(ce|0)){for(;Di[(k<<1)+ki>>1]=ne(Ne,mn[(k+ee<<1)+xe>>1]-mn[(k+Tt<<1)+xe>>1]&65535)>>>16,k=k+1|0,(ce|0)!=(k|0););k=ce}if((k|0)<(s|0))for(;Di[(k<<1)+ki>>1]=ne(Ne,((mn[dl>>1]<<1)-mn[(Aa-k<<1)+xe>>1]|0)-mn[(k+Tt<<1)+xe>>1]&65535)>>>16,k=k+1|0,(k|0)!=(s|0););if(k=0,!ni)for(;ni=n+k|0,W=F[ni|0],(Ir|0)<=(W|0)|(nn|0)>=(W|0)||(W=W+Di[(mn[(k<<1)+ki>>1]-(W<<2)<<1)+Mi>>1]|0,W=(W|0)>0?W:0,p[ni|0]=(W|0)<255?W:255),k=k+1|0,(k|0)!=(s|0););n=n+g|0}if(E=H?R:E,W=L,L=bn?ci:Ye,Ot=Ot+1|0,(Ot|0)==(a|0))break}jr(ci),L=1}return Nn=Gi+256|0,L}function ol(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;e:{if((k|0)<=15)for(Ne=c[(k<<2)+s>>2]+ne(a,11)|0,a=c[n+8>>2],W=c[n+4>>2];;){L=F[Ne|0];t:{if((a|0)>-1)break t;if(ce=c[n+12>>2],ce>>>0<Qn[n+20>>2]){R=F[ce|0]|F[ce+1|0]<<8|(F[ce+2|0]<<16|F[ce+3|0]<<24),c[n+12>>2]=ce+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8;break t}Or(n),a=c[n+8>>2]}xe=n,R=a,H=c[n>>2],ee=H>>>a|0,L=ne(L,W)>>>8|0;t:{if(ee>>>0>L>>>0){H=((L^-1)<<a)+H|0,c[n>>2]=H,W=W-L|0;break t}W=L+1|0}if(ce=Br(W)^24,a=R-ce|0,c[xe+8>>2]=a,W=(W<<ce)+-1|0,c[n+4>>2]=W,ce=k,xe=k,ee>>>0<=L>>>0)break e;for(;;){L=F[Ne+1|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){R=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,H=H<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8,c[n>>2]=H;break t}Or(n),H=c[n>>2],a=c[n+8>>2]}xe=n,R=a,ee=H>>>a|0,L=ne(L,W)>>>8|0;t:{if(ee>>>0>L>>>0){H=((L^-1)<<a)+H|0,c[n>>2]=H,W=W-L|0;break t}W=L+1|0}if(k=Br(W)^24,a=R-k|0,c[xe+8>>2]=a,W=(W<<k)+-1|0,c[n+4>>2]=W,k=ce+1|0,ee>>>0<=L>>>0){if(xe=16,(k|0)==16)break e;Ne=c[(k<<2)+s>>2],ce=k;continue}break}Ye=c[(k<<2)+s>>2],ee=F[Ne+2|0];t:{if((a|0)>-1)break t;if(R=c[n+12>>2],R>>>0<Qn[n+20>>2]){L=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=R+3,H=H<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=H;break t}Or(n),H=c[n>>2],a=c[n+8>>2]}xe=n,R=a,mt=H>>>a|0,ee=ne(W,ee)>>>8|0;t:{if(mt>>>0>ee>>>0){c[n>>2]=((ee^-1)<<a)+H,a=W-ee|0;break t}a=ee+1|0}L=Br(a)^24,R=R-L|0,c[xe+8>>2]=R,c[n+4>>2]=(a<<L)+-1;t:{if(mt>>>0<=ee>>>0){H=1,Ne=Ye+11|0;break t}H=bo(n,Ne),R=c[n+8>>2],Ne=Ye+22|0}t:{if((R|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,R=R+24|0,c[n+8>>2]=R,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Or(n),R=c[n+8>>2]}if(a=R+-1|0,c[n+8>>2]=a,W=c[n+4>>2],ee=W>>>1|0,Ye=c[n>>2],L=ee-(Ye>>>R|0)>>31,W=L+W|1,c[n+4>>2]=W,c[n>>2]=Ye-((L&ee+1)<<R),Di[(F[ce+5328|0]<<1)+E>>1]=ne(c[(((ce|0)>0)<<2)+g>>2],(L^H)-L|0),!((ce|0)<15))break}xe=16}return xe|0}function Bu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;e:{if((k|0)<=15)for(Ne=c[(k<<2)+s>>2]+ne(a,11)|0,R=c[n+8>>2],L=c[n+4>>2];;){H=F[Ne|0];t:{if((R|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){ce=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,R=R+24|0,c[n+8>>2]=R,c[n>>2]=c[n>>2]<<24|(ce>>>8&65280|(ce<<8&16711680|ce<<24))>>>8;break t}Or(n),R=c[n+8>>2]}if(W=c[n>>2],a=ne(L,H)>>>8|0,H=W>>>R>>>0<=a>>>0,H||(a=a+1|0,W=W-(a<<R)|0,c[n>>2]=W,a=L-a|0),a>>>0<=126&&(R=R-F[a+9056|0]|0,c[n+8>>2]=R,a=F[a+9184|0]),c[n+4>>2]=a,ce=k,L=k,H)break e;for(;;){H=F[Ne+1|0];t:{if((R|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),R=R+24|0,c[n+8>>2]=R,c[n+12>>2]=k+3,W=W<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=W;break t}Or(n),W=c[n>>2],R=c[n+8>>2]}ee=W>>>R|0,L=ne(a,H)>>>8|0;t:{if(ee>>>0<=L>>>0){a=L;break t}k=L+1|0,W=W-(k<<R)|0,c[n>>2]=W,a=a-k|0}if(a>>>0<=126&&(R=R-F[a+9056|0]|0,c[n+8>>2]=R,a=F[a+9184|0]),c[n+4>>2]=a,k=ce+1|0,H=c[(k<<2)+s>>2],ee>>>0<=L>>>0){if(L=16,ce=k,Ne=H,(k|0)!=16)continue;break e}break}xe=F[Ne+2|0];t:{if((R|0)>-1)break t;if(L=c[n+12>>2],L>>>0<Qn[n+20>>2]){ee=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),R=R+24|0,c[n+8>>2]=R,c[n+12>>2]=L+3,W=W<<24|(ee>>>8&65280|(ee<<8&16711680|ee<<24))>>>8,c[n>>2]=W;break t}Or(n),W=c[n>>2],R=c[n+8>>2]}ee=n,Ye=W>>>R|0,xe=ne(a,xe)>>>8|0,L=xe,Ye>>>0>L>>>0&&(L=xe+1|0,c[n>>2]=W-(L<<R),L=a-L|0),L>>>0<=126&&(R=R-F[L+9056|0]|0,c[n+8>>2]=R,L=F[L+9184|0]),c[ee+4>>2]=L;t:{if(Ye>>>0<=xe>>>0){ee=1,Ne=H+11|0;break t}ee=bo(n,Ne),R=c[n+8>>2],Ne=H+22|0}t:{if((R|0)>-1){a=R;break t}if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,a=R+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Or(n),a=c[n+8>>2]}if(R=a+-1|0,c[n+8>>2]=R,L=c[n+4>>2],W=L>>>1|0,xe=c[n>>2],H=W-(xe>>>a|0)>>31,L=L+H|1,c[n+4>>2]=L,c[n>>2]=xe-((H&W+1)<<a),Di[(F[ce+5328|0]<<1)+E>>1]=ne(c[(((ce|0)>0)<<2)+g>>2],(H^ee)-H|0),!((ce|0)<15))break}L=16}return L|0}function Os(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;e:{if((a|0)<0|(g|0)<1||(W=c[s+88>>2],(a+g|0)>(W|0)))break e;ee=c[s>>2];t:{i:{if(c[n+2356>>2])break i;E=c[n+2344>>2];n:{if(E)break n;if(k=Ql(1,0,144),c[n+2344>>2]=k,!k)break e;if(k=c[s+88>>2],L=k,E=k>>31,k=c[s>>2],E=Ts(cr(L,E,k,k>>31),Fn,1),c[n+2360>>2]=E,!E||(c[n+2368>>2]=0,c[n+2364>>2]=E,L=c[n+2348>>2],R=c[n+2352>>2],k=c[n+2344>>2],a0(),c[k+136>>2]=E,c[k>>2]=c[s>>2],c[k+4>>2]=c[s+4>>2],R>>>0<2)||(E=F[L|0]&3,c[k+8>>2]=E,c[k+12>>2]=F[L|0]>>>2&3,H=F[L|0]>>>4&3,c[k+16>>2]=H,E>>>0>1|H>>>0>1|F[L|0]>63)||(E=R+-1|0,R=k+24|0,mp(R),Vh(0,R),c[k- -64>>2]=k,c[k+24>>2]=c[s>>2],c[k+28>>2]=c[s+4>>2],c[k+96>>2]=c[s+72>>2],c[k+100>>2]=c[s+76>>2],c[k+104>>2]=c[s+80>>2],c[k+108>>2]=c[s+84>>2],c[k+112>>2]=c[s+88>>2],c[k+8>>2]?k=Tl(k,L+1|0,E):k=E>>>0>=ne(c[k+4>>2],c[k>>2])>>>0,!k))break t;if(E=c[n+2344>>2],c[E+16>>2]!=1){c[n+2372>>2]=0;break n}g=W-a|0}ce=c[E+112>>2];n:{if(!c[E+8>>2]){R=c[E>>2],L=ne(R,a),k=L+c[n+2364>>2]|0,W=(L+c[n+2348>>2]|0)+1|0,L=c[n+2368>>2];o:{l:{if(H=c[E+12>>2],H){if((g|0)<1)break o;if(ft[c[(H<<2)+10912>>2]](L,W,k,R),H=1,(g|0)!=1)break l;L=k;break o}if(E=0,(g|0)<=0)break o;for(;L=k,k=Xr(k,W,R),W=R+W|0,k=k+R|0,E=E+1|0,(E|0)!=(g|0););break o}for(;W=R+W|0,L=k+R|0,ft[c[(c[E+12>>2]<<2)+10912>>2]](k,W,L,R),k=L,H=H+1|0,(H|0)!=(g|0););}c[n+2368>>2]=L,g=a+g|0;break n}if(g=a+g|0,!Ss(E,g))break t}n:{if((g|0)>=(ce|0)){c[n+2356>>2]=1;break n}if(!c[n+2356>>2])break i}if(g=c[n+2344>>2],g&&(g0(c[g+20>>2]),c[g+20>>2]=0,jr(g)),c[n+2344>>2]=0,g=c[n+2372>>2],(g|0)<1)break i;if(L=c[s+76>>2],k=c[s+84>>2],!Sl(L+(c[n+2364>>2]+ne(k,ee)|0)|0,c[s+80>>2]-L|0,c[s+88>>2]-k|0,ee,g))break t}return c[n+2364>>2]+ne(a,ee)|0}jr(c[n+2360>>2]),c[n+2360>>2]=0,c[n+2364>>2]=0,s=c[n+2344>>2],s&&(g0(c[s+20>>2]),c[s+20>>2]=0,jr(s)),c[n+2344>>2]=0}return 0}function gu(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;c[n+152>>2]=0,W=1;e:{t:{if(c[n+148>>2]>=1){if(!(ft[c[2558]](n+124|0)|0))break t;c[n+140>>2]=n+180,c[n+136>>2]=n,c[n+132>>2]=18,W=c[n+2308>>2]>0?3:2}c[n+156>>2]=W;break e}if(!Ko(n,1,4941))return 0}L=c[n+288>>2],ee=L<<2,a=c[n+148>>2],H=c[n+2308>>2],xe=(H|0)>0?ne(ee,(a|0)<1?1:2):0,Ne=L<<5,mt=W<<4,Tt=ne(Ne,(ne(mt+F[H+4863|0]|0,3)|0)/2|0),Ye=(L<<1)+2|0,Ot=ne(ne(L,(a|0)==2?2:1),800),E=0;e:{if(!c[n+2348>>2])break e;ni=cr(mn[n+50>>1],0,mn[n+48>>1],0),E=Fn}ci=E,a=0,g=ee,k=g+Ne|0,k>>>0<g>>>0&&(a=1),g=k,k=g+Ye|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+xe|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Ot|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Tt|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+ni|0,a=a+E|0,E=k,a=k>>>0<g>>>0?a+1|0:a,g=a,k=k+832|0,k>>>0<832&&(a=a+1|0);e:{if(!a&k>>>0>4294967264|a>>>0>0)break e;R=c[n+2288>>2];t:{i:{if(a=g,g=E+863|0,g>>>0<863&&(a=a+1|0),E=g,k=g,g=a,!a&k>>>0>Qn[n+2292>>2]|a>>>0>0){if(jr(R),c[n+2292>>2]=0,R=Ts(E,g,1),c[n+2288>>2]=R,!R)break i;c[n+2292>>2]=E,H=c[n+2308>>2]}c[n+2244>>2]=R,c[n+160>>2]=0,a=R+ee|0,c[n+2252>>2]=a,a=a+Ne|0,ce=a+2|0,c[n+2256>>2]=ce,a=a+Ye|0,k=xe?a:0,c[n+2260>>2]=k,c[n+172>>2]=k,a=a+xe|0,g=c[n+148>>2],(H|0)<1|(g|0)<1||(c[n+172>>2]=k+(L<<2)),a=a+31&-32,c[n+2264>>2]=a,a=a+832|0,c[n+2304>>2]=a,c[n+176>>2]=a,(g|0)==2&&(c[n+176>>2]=a+ne(L,800)),c[n+152>>2]=0,E=L<<3,c[n+2284>>2]=E,k=L<<4,c[n+2280>>2]=k,a=a+Ot|0,c[n+2364>>2]=ni|ci?a+Tt|0:0,g=F[H+4863|0],a=a+ne(g,k)|0,c[n+2268>>2]=a,g=ne(E,g>>>1|0),a=g+(a+ne(k,mt)|0)|0,c[n+2272>>2]=a,c[n+2276>>2]=g+(a+(ne(E,W)<<3)|0),Zo(ce+-2|0,0,Ye),a=c[n+2256>>2]+-2|0,p[a|0]=0,p[a+1|0]=0,c[n+2296>>2]=0,c[n+2248>>2]=0,Zo(c[n+2244>>2],0,ee);break t}if(!Ko(n,1,4971))break e}c[s+8>>2]=0,c[s+20>>2]=c[n+2268>>2],c[s+24>>2]=c[n+2272>>2],c[s+28>>2]=c[n+2276>>2],c[s+32>>2]=c[n+2280>>2],n=c[n+2284>>2],c[s+104>>2]=0,c[s+36>>2]=n,Yl(),ce=1}return ce}function Gl(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;W=Nn-16|0,Nn=W,H=2;e:{if(!g|((s|0)<1|(n|0)<1))break e;t:{if(!a)break t;i:{if(!c[a+8>>2]){k=s,E=n;break i}if(k=c[a+24>>2],(k|0)<1||(E=c[a+20>>2],(E|0)<1)||(L=c[a+16>>2],R=c[a+12>>2],(L|R)<0|((R&-2)+E|0)>(n|0)|((L&-2)+k|0)>(s|0)))break e}if(!c[a+28>>2]){s=k,n=E;break t}if(c[W+12>>2]=c[a+32>>2],c[W+8>>2]=c[a+36>>2],!$e(E,k,W+12|0,W+8|0))break e;s=c[W+8>>2],n=c[W+12>>2]}if(c[g+8>>2]=s,c[g+4>>2]=n,(s|0)<1|(n|0)<1||(R=c[g>>2],R>>>0>12))break e;t:{if(c[g+80>>2]|c[g+12>>2]>0)break t;if(E=n,k=F[R+1157|0],cr(n,0,k,0),Fn)break e;L=s,Ne=ne(n,k),k=Ne,k=cr(s,0,k,k>>31),ee=Fn,H=1;i:{if(R>>>0<11){s=0,L=0,n=0;break i}E=cr(E,0,L,0),L=(R|0)==12,mt=L?E:0,ce=L?Fn:0,Ye=(n+1|0)/2|0,E=Ye,s=(s+1|0)/2|0,s=cr(E,E>>31,s,s>>31),L=L?n:0,n=Fn}if(xe=s,n=n<<1|s>>>31,ce=ce+ee|0,ee=k+mt|0,ee>>>0<k>>>0&&(ce=ce+1|0),xe=xe<<1,E=xe+ee|0,n=n+ce|0,n=Ts(E,E>>>0<ee>>>0?n+1|0:n,1),!n)break e;if(c[g+16>>2]=n,c[g+80>>2]=n,R>>>0>=11){c[g+48>>2]=k,c[g+32>>2]=Ne,c[g+52>>2]=s,c[g+36>>2]=Ye,c[g+56>>2]=s,c[g+40>>2]=Ye,n=n+k|0,c[g+20>>2]=n,c[g+24>>2]=n+s,(R|0)==12&&(c[g+28>>2]=n+xe),c[g+44>>2]=L,c[g+60>>2]=mt;break t}c[g+24>>2]=k,c[g+20>>2]=Ne}if(H=Yo(g),H|!a)break e;if(!c[a+48>>2]){H=0;break e}if(n=c[g+8>>2]+-1|0,Qn[g>>2]<=10){H=0,a=g+20|0,s=c[a>>2],c[a>>2]=0-s,c[g+16>>2]=c[g+16>>2]+ne(n,s);break e}if(H=0,a=g+32|0,s=c[a>>2],c[a>>2]=0-s,k=g+36|0,a=c[k>>2],c[k>>2]=0-a,E=g+40|0,k=c[E>>2],c[E>>2]=0-k,c[g+16>>2]=c[g+16>>2]+ne(n,s),s=g+20|0,E=s,L=c[s>>2],s=n>>1,c[E>>2]=L+ne(s,a),a=g+24|0,c[a>>2]=c[a>>2]+ne(s,k),a=c[g+28>>2],!a)break e;k=g+44|0,s=c[k>>2],c[k>>2]=0-s,c[g+28>>2]=a+ne(n,s)}return Nn=W+16|0,H}function Ha(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0;for(L=Nn+-64|0,k=Di[n+16>>1],E=Di[n>>1],R=k+E|0,a=Di[n+8>>1],g=Di[n+24>>1],W=((ne(a,20091)>>16)+a|0)+(ne(g,35468)>>16)|0,c[L+12>>2]=R-W,k=E-k|0,a=((ne(a,35468)>>16)-g|0)-(ne(g,20091)>>16)|0,c[L+8>>2]=k-a,c[L+4>>2]=a+k,c[L>>2]=R+W,k=Di[n+18>>1],E=Di[n+2>>1],R=k+E|0,a=Di[n+10>>1],g=Di[n+26>>1],W=((ne(a,20091)>>16)+a|0)+(ne(g,35468)>>16)|0,c[L+28>>2]=R-W,k=E-k|0,a=((ne(a,35468)>>16)-g|0)-(ne(g,20091)>>16)|0,c[L+24>>2]=k-a,c[L+20>>2]=a+k,a=R+W|0,c[L+16>>2]=a,E=Di[n+20>>1],R=Di[n+4>>1],W=E+R|0,g=Di[n+12>>1],k=Di[n+28>>1],H=((ne(g,20091)>>16)+g|0)+(ne(k,35468)>>16)|0,c[L+44>>2]=W-H,E=R-E|0,g=((ne(g,35468)>>16)-k|0)-(ne(k,20091)>>16)|0,c[L+40>>2]=E-g,c[L+36>>2]=g+E,c[L+32>>2]=W+H,k=Di[n+22>>1],E=Di[n+6>>1],R=k+E|0,g=Di[n+14>>1],n=Di[n+30>>1],W=((ne(g,20091)>>16)+g|0)+(ne(n,35468)>>16)|0,c[L+60>>2]=R-W,k=E-k|0,n=((ne(g,35468)>>16)-n|0)-(ne(n,20091)>>16)|0,c[L+56>>2]=k-n,c[L+52>>2]=n+k,c[L+48>>2]=R+W,n=L,L=0;;){if(g=c[n+48>>2],k=((ne(a,20091)>>16)+a|0)+(ne(g,35468)>>16)|0,E=c[n>>2]+4|0,R=c[n+32>>2],W=E+R|0,H=F[s|0]+(k+W>>3)|0,H=(H|0)>0?H:0,p[s|0]=(H|0)<255?H:255,a=((ne(a,35468)>>16)-g|0)-(ne(g,20091)>>16)|0,g=E-R|0,E=F[s+1|0]+(a+g>>3)|0,E=(E|0)>0?E:0,p[s+1|0]=(E|0)<255?E:255,a=F[s+2|0]+(g-a>>3)|0,a=(a|0)>0?a:0,p[s+2|0]=(a|0)<255?a:255,a=F[s+3|0]+(W-k>>3)|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,L=L+1|0,(L|0)!=4){s=s+32|0,a=c[n+20>>2],n=n+4|0;continue}break}}function yu(n){n=n|0;var s=0;s=cr(F[n+31|0],0,16843009,16843009),p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,s=Fn,p[n+36|0]=s,p[n+37|0]=s>>>8,p[n+38|0]=s>>>16,p[n+39|0]=s>>>24,s=cr(F[n+63|0],0,16843009,16843009),p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,s=Fn,p[n+68|0]=s,p[n+69|0]=s>>>8,p[n+70|0]=s>>>16,p[n+71|0]=s>>>24,s=cr(F[n+95|0],0,16843009,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,s=Fn,p[n+100|0]=s,p[n+101|0]=s>>>8,p[n+102|0]=s>>>16,p[n+103|0]=s>>>24,s=cr(F[n+127|0],0,16843009,16843009),p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,s=Fn,p[n+132|0]=s,p[n+133|0]=s>>>8,p[n+134|0]=s>>>16,p[n+135|0]=s>>>24,s=cr(F[n+159|0],0,16843009,16843009),p[n+160|0]=s,p[n+161|0]=s>>>8,p[n+162|0]=s>>>16,p[n+163|0]=s>>>24,s=Fn,p[n+164|0]=s,p[n+165|0]=s>>>8,p[n+166|0]=s>>>16,p[n+167|0]=s>>>24,s=cr(F[n+191|0],0,16843009,16843009),p[n+192|0]=s,p[n+193|0]=s>>>8,p[n+194|0]=s>>>16,p[n+195|0]=s>>>24,s=Fn,p[n+196|0]=s,p[n+197|0]=s>>>8,p[n+198|0]=s>>>16,p[n+199|0]=s>>>24,s=cr(F[n+223|0],0,16843009,16843009),p[n+224|0]=s,p[n+225|0]=s>>>8,p[n+226|0]=s>>>16,p[n+227|0]=s>>>24,s=Fn,p[n+228|0]=s,p[n+229|0]=s>>>8,p[n+230|0]=s>>>16,p[n+231|0]=s>>>24,s=cr(F[n+-1|0],0,16843009,16843009),p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,s=Fn,p[n+4|0]=s,p[n+5|0]=s>>>8,p[n+6|0]=s>>>16,p[n+7|0]=s>>>24}function Fs(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0;e:{if((a|0)!=1){for(;g=F[s|0]+(F[n|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(F[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(F[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,g=F[s+3|0]+(F[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+3|0]=(g|0)<255?g:255,g=F[s+4|0]+(F[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+4|0]=(g|0)<255?g:255,g=F[s+5|0]+(F[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+5|0]=(g|0)<255?g:255,g=F[s+6|0]+(F[n+6|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+6|0]=(g|0)<255?g:255,g=F[s+7|0]+(F[n+7|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+7|0]=(g|0)<255?g:255,n=n+8|0,s=s+a|0,k=k+1|0,(k|0)!=8;);break e}for(k=F[s+6|0];g=F[s|0]+(F[n|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(F[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(F[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,g=F[s+3|0]+(F[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+3|0]=(g|0)<255?g:255,g=F[s+4|0]+(F[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+4|0]=(g|0)<255?g:255,g=F[s+5|0]+(F[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+5|0]=(g|0)<255?g:255,k=(k&255)+(F[n+6|0]+-120>>4)|0,k=(k|0)>0?k:0,p[s+6|0]=(k|0)<255?k:255,k=F[s+7|0]+(F[n+7|0]+-120>>4)|0,k=(k|0)>0?k:0,k=(k|0)<255?k:255,p[s+7|0]=k,n=n+8|0,s=s+a|0,E=E+1|0,(E|0)!=8;);}}function _u(n){n=n|0;var s=0,a=0;s=cr((F[n+223|0]+(F[n+-25|0]+(F[n+191|0]+(F[n+-26|0]+(F[n+159|0]+(F[n+-27|0]+(F[n+127|0]+(F[n+-28|0]+(F[n+95|0]+(F[n+-29|0]+(F[n+63|0]+(F[n+-30|0]+(F[n+31|0]+(F[n+-31|0]+(F[n+-32|0]+F[n+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[n+224|0]=s,p[n+225|0]=s>>>8,p[n+226|0]=s>>>16,p[n+227|0]=s>>>24,a=Fn,p[n+228|0]=a,p[n+229|0]=a>>>8,p[n+230|0]=a>>>16,p[n+231|0]=a>>>24,p[n+192|0]=s,p[n+193|0]=s>>>8,p[n+194|0]=s>>>16,p[n+195|0]=s>>>24,p[n+196|0]=a,p[n+197|0]=a>>>8,p[n+198|0]=a>>>16,p[n+199|0]=a>>>24,p[n+160|0]=s,p[n+161|0]=s>>>8,p[n+162|0]=s>>>16,p[n+163|0]=s>>>24,p[n+164|0]=a,p[n+165|0]=a>>>8,p[n+166|0]=a>>>16,p[n+167|0]=a>>>24,p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,p[n+132|0]=a,p[n+133|0]=a>>>8,p[n+134|0]=a>>>16,p[n+135|0]=a>>>24,p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,p[n+100|0]=a,p[n+101|0]=a>>>8,p[n+102|0]=a>>>16,p[n+103|0]=a>>>24,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,p[n+68|0]=a,p[n+69|0]=a>>>8,p[n+70|0]=a>>>16,p[n+71|0]=a>>>24,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,p[n+36|0]=a,p[n+37|0]=a>>>8,p[n+38|0]=a>>>16,p[n+39|0]=a>>>24,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,p[n+4|0]=a,p[n+5|0]=a>>>8,p[n+6|0]=a>>>16,p[n+7|0]=a>>>24}function sl(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0;e:{if(a=c[s+48>>2],!a||ft[a|0](s)|0)break e;return Ko(n,6,4844),c[n>>2]}e:{t:{i:{n:{if(c[s+68>>2]){c[n+2308>>2]=0,a=0;break n}if(a=2,E=c[n+2308>>2],g=F[E+4863|0],(E|0)==2)break i;a=E}if(E=c[s+76>>2]-g|0,c[n+296>>2]=E>>4,k=c[s+84>>2]-g|0,c[n+300>>2]=k>>4,(E|0)<=-1&&(c[n+296>>2]=0),(k|0)>-1)break e;E=n+300|0;break t}c[n+296>>2]=0,E=n+300|0}c[E>>2]=0}if(g=g+15|0,E=g+c[s+88>>2]>>4,c[n+308>>2]=E,k=c[n+288>>2],s=g+c[s+80>>2]>>4,c[n+304>>2]=(s|0)>(k|0)?k:s,s=c[n+292>>2],(E|0)>(s|0)&&(c[n+308>>2]=s),(a|0)>=1)for(H=c[n+68>>2],ee=c[n+104>>2],E=0;;){s=(E<<3)+n|0;e:{if(ee){if(a=p[(n+E|0)+120|0],g=a,c[n+112>>2])break e;g=a+c[n+60>>2]|0;break e}g=c[n+60>>2]}a=g,L=s+2312|0,a=H?c[n+72>>2]+a|0:a;e:{if((a|0)>=1){k=(a|0)<63?a:63,a=(a|0)>0?k:0,W=s+2313|0,R=c[n+64>>2],(R|0)>=1&&(k=9-R|0,R=a>>>((R|0)>4?2:1)|0,k=(R|0)>(k|0)?k:R),k=(k|0)>1?k:1,p[W|0]=k,p[L|0]=k+(a<<1),p[s+2315|0]=(a|0)>39?2:(a|0)>14;break e}p[L|0]=0}p[s+2314|0]=0,k=s+2316|0,g=H?c[n+88>>2]+(c[n+72>>2]+g|0)|0:g,L=(g|0)>0;e:{if(!L){p[k|0]=0;break e}a=(g|0)<63?g:63,g=L?a:0,W=s+2317|0,L=c[n+64>>2],(L|0)>=1&&(a=9-L|0,L=g>>>((L|0)>4?2:1)|0,a=(L|0)>(a|0)?a:L),a=(a|0)>1?a:1,p[W|0]=a,p[k|0]=a+(g<<1),p[s+2319|0]=(g|0)>39?2:(g|0)>14}if(p[s+2318|0]=1,E=E+1|0,(E|0)==4)break}return 0}function Wl(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;g=Nn+-64|0,k=Di[n+24>>1],a=Di[n>>1],E=k+a|0,R=Di[n+16>>1],W=Di[n+8>>1],L=R+W|0,c[g+32>>2]=E-L,k=a-k|0,a=W-R|0,c[g+48>>2]=k-a,c[g+16>>2]=a+k,xe=E+L|0,c[g>>2]=xe,k=Di[n+26>>1],a=Di[n+2>>1],E=k+a|0,R=Di[n+18>>1],W=Di[n+10>>1],L=R+W|0,c[g+36>>2]=E-L,k=a-k|0,a=W-R|0,c[g+52>>2]=k-a,k=a+k|0,c[g+20>>2]=k,a=E+L|0,c[g+4>>2]=a,E=Di[n+4>>1],R=Di[n+28>>1],W=E-R|0,L=Di[n+12>>1],H=Di[n+20>>1],ee=L-H|0,c[g+56>>2]=W-ee,L=L+H|0,R=E+R|0,E=L+R|0,c[g+8>>2]=E,R=R-L|0,c[g+40>>2]=R,W=W+ee|0,c[g+24>>2]=W,L=Di[n+30>>1],H=Di[n+6>>1],ee=L+H|0,ce=Di[n+22>>1],Ne=Di[n+14>>1],Ye=ce+Ne|0,n=ee+Ye|0,c[g+12>>2]=n,mt=H-L|0,ce=Ne-ce|0,L=mt-ce|0,c[g+60>>2]=L,H=ee-Ye|0,c[g+44>>2]=H,ee=ce+mt|0,c[g+28>>2]=ee,xe=xe+3|0,ce=xe-n|0,Ne=a-E|0,Di[s+96>>1]=ce-Ne>>>3,n=n+xe|0,a=a+E|0,Di[s+64>>1]=n-a>>>3,Di[s+32>>1]=ce+Ne>>>3,Di[s>>1]=n+a>>>3,n=c[g+16>>2]+3|0,a=n-ee|0,E=k-W|0,Di[s+224>>1]=a-E>>>3,n=n+ee|0,k=k+W|0,Di[s+192>>1]=n-k>>>3,Di[s+160>>1]=a+E>>>3,Di[s+128>>1]=n+k>>>3,n=c[g+32>>2]+3|0,k=n-H|0,a=c[g+36>>2],E=a-R|0,Di[s+352>>1]=k-E>>>3,n=n+H|0,a=a+R|0,Di[s+320>>1]=n-a>>>3,Di[s+288>>1]=k+E>>>3,Di[s+256>>1]=n+a>>>3,n=c[g+48>>2]+3|0,k=n-L|0,a=c[g+52>>2],g=c[g+56>>2],E=a-g|0,Di[s+480>>1]=k-E>>>3,n=n+L|0,g=g+a|0,Di[s+448>>1]=n-g>>>3,Di[s+416>>1]=k+E>>>3,Di[s+384>>1]=n+g>>>3}function Pa(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0;for(Ye=s+904|0;;){for(R=0;;){for(W=0;;){for(E=0;;){ce=ne(W,11),xe=ne(R,33),ee=ne(H,264),L=F[(ce+(xe+(ee+1392|0)|0)|0)+E|0],mt=c[n+4>>2],a=c[n+8>>2];e:{if((a|0)>-1)break e;if(g=c[n+12>>2],g>>>0<Qn[n+20>>2]){k=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),c[n+12>>2]=g+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8;break e}Or(n),a=c[n+8>>2]}Ne=n,Tt=a,g=c[n>>2],L=ne(L,mt)>>>8|0,k=g>>>a>>>0<=L>>>0;e:{if(!k){c[n>>2]=g+((L^-1)<<a),a=mt-L|0;break e}a=L+1|0}g=Br(a)^24,c[Ne+8>>2]=Tt-g,c[n+4>>2]=(a<<g)+-1,Ne=(((s+ee|0)+xe|0)+ce|0)+E|0;e:{if(!k){a=Lr(n,8);break e}a=F[(((ee+2448|0)+xe|0)+ce|0)+E|0]}if(p[Ne+907|0]=a,E=E+1|0,(E|0)==11)break}if(W=W+1|0,(W|0)==3)break}if(R=R+1|0,(R|0)==8)break}if(a=ne(H,68)+Ye|0,k=ee+Ye|0,E=k+3|0,c[a+1124>>2]=E,c[a+1120>>2]=k+234,g=k+201|0,c[a+1116>>2]=g,c[a+1112>>2]=g,c[a+1108>>2]=g,c[a+1104>>2]=g,c[a+1100>>2]=g,c[a+1096>>2]=g,c[a+1092>>2]=g,c[a+1088>>2]=g,c[a+1084>>2]=k+168,c[a+1080>>2]=k+135,c[a+1076>>2]=g,c[a+1072>>2]=k+102,c[a+1068>>2]=k+69,c[a+1064>>2]=k+36,c[a+1060>>2]=E,H=H+1|0,(H|0)==4)break}a=Lr(n,1),c[s+2236>>2]=a,a&&(Ot=s,ni=Lr(n,8),p[Ot+2240|0]=ni)}function Cl(n){n=n|0;var s=0,a=0;s=n,n=cr((F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,a=Fn,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24}function Mc(n){n=n|0;var s=0,a=0;s=n,n=cr((F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,a=Fn,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24}function Dc(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;e:{t:{if(n){if(E=c[n+8>>2],ee=c[E+40>>2],c[n+4>>2]){if(c[n+12>>2]=c[ee>>2],!Fa(c[ee+20>>2],E,3))return c[n>>2]=2,Uo(n),0;if(s=c[n+104>>2],a=s,k=s>>31,s=c[n+100>>2],L=cr(a,k,s,s>>31),a=Fn,W=c[E>>2],k=W,s=k>>31,s=s<<4|k>>>28,k=k<<4,H=n,R=s,s=k,k=W&65535,g=k,s=s+g|0,s>>>0<g>>>0&&(R=R+1|0),g=s+L|0,a=a+R|0,s=Ts(g,g>>>0<s>>>0?a+1|0:a,4),c[H+16>>2]=s,!s){c[n+20>>2]=0;break e}c[n+20>>2]=(s+(L<<2)|0)+(k<<2);i:{n:{if(c[E+92>>2]){if(ce=c[E+100>>2],W=c[E+16>>2],k=c[E+12>>2],L=c[E+96>>2],a=L,s=a>>31,g=a,a=s,s=s<<5|g>>>27,R=a<<2|g>>>30,H=g<<5,a=g<<2,g=H+a|0,s=s+R|0,s=g>>>0<a>>>0?s+1|0:s,a=g+84|0,a>>>0<84&&(s=s+1|0),s=Ts(a,s,1),!s){c[n>>2]=1;break t}if(c[n+268>>2]=s,c[n+264>>2]=s,a=s,s=s+84|0,ll(a,k,W,s+H|0,L,ce,0,4,s),c[E+92>>2])break n}if(s=c[c[n+12>>2]>>2],s+-7>>>0>3)break i}lc(),s=c[c[n+12>>2]>>2]}i:{if(s>>>0<11||(ua(),!c[c[n+12>>2]+28>>2]))break i;lc()}i:{if(!c[n+56>>2]|c[n+120>>2]<1||(s=n+136|0,c[s>>2])||$l(s,c[n+132>>2]))break i;break e}c[n+4>>2]=0}if(!ql(n,c[n+16>>2],c[n+100>>2],c[n+104>>2],c[E+88>>2],2))break t;c[ee+16>>2]=c[n+116>>2],n=1}else n=0;return n}return Uo(n),0}return c[n>>2]=1,Uo(n),0}function El(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0;k=Di[n+2>>1],L=(ne(k,20091)>>16)+k|0,g=Di[n+8>>1],R=ne(g,35468)>>16,E=Di[n>>1]+4|0,a=R+E|0,n=F[s+32|0]+(L+a>>3)|0,n=(n|0)>0?n:0,p[s+32|0]=(n|0)<255?n:255,n=ne(k,35468)>>16,k=F[s+33|0]+(n+a>>3)|0,k=(k|0)>0?k:0,p[s+33|0]=(k|0)<255?k:255,k=F[s+34|0]+(a-n>>3)|0,k=(k|0)>0?k:0,p[s+34|0]=(k|0)<255?k:255,a=F[s+35|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+35|0]=(a|0)<255?a:255,k=g+(ne(g,20091)>>16)|0,a=k+E|0,g=F[s|0]+(a+L>>3)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(n+a>>3)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(a-n>>3)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,a=F[s+3|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,a=E-R|0,g=F[s+64|0]+(a+L>>3)|0,g=(g|0)>0?g:0,p[s+64|0]=(g|0)<255?g:255,g=F[s+65|0]+(n+a>>3)|0,g=(g|0)>0?g:0,p[s+65|0]=(g|0)<255?g:255,g=F[s+66|0]+(a-n>>3)|0,g=(g|0)>0?g:0,p[s+66|0]=(g|0)<255?g:255,a=F[s+67|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+67|0]=(a|0)<255?a:255,E=E-k|0,a=F[s+96|0]+(E+L>>3)|0,a=(a|0)>0?a:0,p[s+96|0]=(a|0)<255?a:255,a=F[s+97|0]+(n+E>>3)|0,a=(a|0)>0?a:0,p[s+97|0]=(a|0)<255?a:255,n=F[s+98|0]+(E-n>>3)|0,n=(n|0)>0?n:0,p[s+98|0]=(n|0)<255?n:255,n=F[s+99|0]+(E-L>>3)|0,n=(n|0)>0?n:0,p[s+99|0]=(n|0)<255?n:255}function Rs(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(H=k<<1&-4,H){for(H=g+H|0;R=ne(F[n|0],19077)>>>8|0,E=F[a|0],W=R+(ne(E,26149)>>>8|0)|0,L=W+-14234|0,ee=(L>>>0<16384?L>>>6|0:W>>>0<14234?0:248)&248,W=F[s|0],E=R-(ne(W,6419)>>>8|0)-(ne(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[g|0]=ee|E>>>5,L=E<<3&224,R=R+(ne(W,33050)>>>8|0)|0,E=R+-17685|0,p[g+1|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),R=ne(F[n+1|0],19077)>>>8|0,E=F[a|0],W=R+(ne(E,26149)>>>8|0)|0,L=W+-14234|0,ee=(L>>>0<16384?L>>>6|0:W>>>0<14234?0:248)&248,W=F[s|0],E=R-(ne(W,6419)>>>8|0)-(ne(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[g+2|0]=ee|E>>>5,L=E<<3&224,R=R+(ne(W,33050)>>>8|0)|0,E=R+-17685|0,p[g+3|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),a=a+1|0,s=s+1|0,n=n+2|0,g=g+4|0,(H|0)!=(g|0););g=H}k&1&&(n=ne(F[n|0],19077)>>>8|0,a=F[a|0],k=n+(ne(a,26149)>>>8|0)|0,H=k+-14234|0,H=(H>>>0<16384?H>>>6|0:k>>>0<14234?0:248)&248,s=F[s|0],a=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,k=a+8708|0,a=k>>>0<16384?k>>6:(a|0)<-8708?0:255,p[g|0]=H|a>>>5,n=n+(ne(s,33050)>>>8|0)|0,s=n+-17685|0,p[g+1|0]=a<<3&224|(s>>>0<16384?s>>>9|0:n>>>0<17685?0:31))}function Ma(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[a|0],R=F[s|0],W=F[n|0],p[g+3|0]=255,W=ne(W,19077)>>>8|0,H=W+(ne(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+2|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=W+(ne(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=W-(ne(R,6419)>>>8|0)-(ne(L,13320)>>>8)|0,R=L+8708|0,p[g+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],W=F[n+1|0],p[g+7|0]=255,W=ne(W,19077)>>>8|0,H=W+(ne(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+6|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=W+(ne(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g+4|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=W-(ne(R,6419)>>>8|0)-(ne(L,13320)>>>8)|0,R=L+8708|0,p[g+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(a=F[a|0],s=F[s|0],n=F[n|0],p[g+3|0]=255,n=ne(n,19077)>>>8|0,k=n+(ne(s,33050)>>>8|0)|0,E=k+-17685|0,p[g+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n+(ne(a,26149)>>>8|0)|0,E=k+-14234|0,p[g|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,n=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Da(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[s|0],R=F[a|0],W=F[n|0],p[g+3|0]=255,W=ne(W,19077)>>>8|0,H=W+(ne(R,26149)>>>8|0)|0,ee=H+-14234|0,p[g+2|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,H=W+(ne(L,33050)>>>8|0)|0,ee=H+-17685|0,p[g|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,L=W-(ne(L,6419)>>>8|0)-(ne(R,13320)>>>8)|0,R=L+8708|0,p[g+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[s|0],R=F[a|0],W=F[n+1|0],p[g+7|0]=255,W=ne(W,19077)>>>8|0,H=W+(ne(R,26149)>>>8|0)|0,ee=H+-14234|0,p[g+6|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,H=W+(ne(L,33050)>>>8|0)|0,ee=H+-17685|0,p[g+4|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,L=W-(ne(L,6419)>>>8|0)-(ne(R,13320)>>>8)|0,R=L+8708|0,p[g+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(s=F[s|0],a=F[a|0],n=F[n|0],p[g+3|0]=255,n=ne(n,19077)>>>8|0,k=n+(ne(a,26149)>>>8|0)|0,E=k+-14234|0,p[g+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n+(ne(s,33050)>>>8|0)|0,E=k+-17685|0,p[g|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,n=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function sa(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[a|0],R=F[s|0],W=F[n|0],p[g|0]=255,W=ne(W,19077)>>>8|0,H=W+(ne(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+3|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=W+(ne(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g+1|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=W-(ne(R,6419)>>>8|0)-(ne(L,13320)>>>8)|0,R=L+8708|0,p[g+2|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],W=F[n+1|0],p[g+4|0]=255,W=ne(W,19077)>>>8|0,H=W+(ne(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+7|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=W+(ne(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g+5|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=W-(ne(R,6419)>>>8|0)-(ne(L,13320)>>>8)|0,R=L+8708|0,p[g+6|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(a=F[a|0],s=F[s|0],n=F[n|0],p[g|0]=255,n=ne(n,19077)>>>8|0,k=n+(ne(s,33050)>>>8|0)|0,E=k+-17685|0,p[g+3|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n+(ne(a,26149)>>>8|0)|0,E=k+-14234|0,p[g+1|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,n=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[g+2|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function ss(n){n=n|0,p[n+224|0]=-2139062144,p[n+225|0]=8421504,p[n+226|0]=32896,p[n+227|0]=128,p[n+228|0]=-2139062144,p[n+229|0]=8421504,p[n+230|0]=32896,p[n+231|0]=128,p[n+192|0]=-2139062144,p[n+193|0]=8421504,p[n+194|0]=32896,p[n+195|0]=128,p[n+196|0]=-2139062144,p[n+197|0]=8421504,p[n+198|0]=32896,p[n+199|0]=128,p[n+160|0]=-2139062144,p[n+161|0]=8421504,p[n+162|0]=32896,p[n+163|0]=128,p[n+164|0]=-2139062144,p[n+165|0]=8421504,p[n+166|0]=32896,p[n+167|0]=128,p[n+128|0]=-2139062144,p[n+129|0]=8421504,p[n+130|0]=32896,p[n+131|0]=128,p[n+132|0]=-2139062144,p[n+133|0]=8421504,p[n+134|0]=32896,p[n+135|0]=128,p[n+96|0]=-2139062144,p[n+97|0]=8421504,p[n+98|0]=32896,p[n+99|0]=128,p[n+100|0]=-2139062144,p[n+101|0]=8421504,p[n+102|0]=32896,p[n+103|0]=128,p[n+64|0]=-2139062144,p[n+65|0]=8421504,p[n+66|0]=32896,p[n+67|0]=128,p[n+68|0]=-2139062144,p[n+69|0]=8421504,p[n+70|0]=32896,p[n+71|0]=128,p[n+32|0]=-2139062144,p[n+33|0]=8421504,p[n+34|0]=32896,p[n+35|0]=128,p[n+36|0]=-2139062144,p[n+37|0]=8421504,p[n+38|0]=32896,p[n+39|0]=128,p[n|0]=-2139062144,p[n+1|0]=8421504,p[n+2|0]=32896,p[n+3|0]=128,p[n+4|0]=-2139062144,p[n+5|0]=8421504,p[n+6|0]=32896,p[n+7|0]=128}function al(n){n=n|0;var s=0,a=0;s=n,n=s+-32|0,a=F[n|0]|F[n+1|0]<<8|(F[n+2|0]<<16|F[n+3|0]<<24),n=F[n+4|0]|F[n+5|0]<<8|(F[n+6|0]<<16|F[n+7|0]<<24),p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=n,p[s+229|0]=n>>>8,p[s+230|0]=n>>>16,p[s+231|0]=n>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=n,p[s+197|0]=n>>>8,p[s+198|0]=n>>>16,p[s+199|0]=n>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=n,p[s+165|0]=n>>>8,p[s+166|0]=n>>>16,p[s+167|0]=n>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=n,p[s+133|0]=n>>>8,p[s+134|0]=n>>>16,p[s+135|0]=n>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=n,p[s+101|0]=n>>>8,p[s+102|0]=n>>>16,p[s+103|0]=n>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=n,p[s+69|0]=n>>>8,p[s+70|0]=n>>>16,p[s+71|0]=n>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=n,p[s+37|0]=n>>>8,p[s+38|0]=n>>>16,p[s+39|0]=n>>>24,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=n,p[s+5|0]=n>>>8,p[s+6|0]=n>>>16,p[s+7|0]=n>>>24}function Yo(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;xe=2,W=c[n>>2];e:{if(W>>>0>12)break e;L=c[n+8>>2],k=c[n+4>>2];t:{i:{if(W>>>0>=11){if(a=c[n+40>>2],g=a>>31,R=c[n+36>>2],s=R>>31,ee=c[n+32>>2],E=ee>>31,Ne=g^a+g,a=(k+1|0)/2|0,Ot=(Ne|0)>=(a|0),R=s^s+R,ni=(R|0)>=(a|0),s=E^E+ee,ci=(s|0)>=(k|0),g=k,E=L+-1|0,ee=E,Ye=E>>31,H=cr(E,Ye,s,0),E=g+H|0,mt=g>>31,s=mt+Fn|0,s=E>>>0<H>>>0?s+1|0:s,ce=!s&E>>>0<=Qn[n+48>>2]|s>>>0<0,s=a,L=((L+1|0)/2|0)+-1|0,E=L,H=E>>31,R=cr(E,H,R,0),L=s+R|0,Tt=s>>31,a=Tt+Fn|0,a=L>>>0<R>>>0?a+1|0:a,ce=ce&(!a&L>>>0<=Qn[n+52>>2]|a>>>0<0),L=cr(Ne,0,E,H)+s|0,a=Tt+Fn|0,a=L>>>0<s>>>0?a+1|0:a,s=L,s=Ot&(ni&(ci&(ce&(!a&s>>>0<=Qn[n+56>>2]|a>>>0<0))))&c[n+16>>2]!=0&c[n+20>>2]!=0&c[n+24>>2]!=0,(W|0)!=12)break i;if(!c[n+28>>2]||(W=c[n+44>>2],a=W>>31,a=a^a+W,!(s&(a|0)>=(k|0))))break e;if(k=cr(a,0,ee,Ye)+g|0,s=mt+Fn|0,s=k>>>0<g>>>0?s+1|0:s,g=k,!s&g>>>0<=Qn[n+60>>2]|s>>>0<0)break t;break e}if(!c[n+16>>2]||(s=c[n+20>>2],g=s>>31,s=g^s+g,g=ne(F[W+1157|0],k),(s|0)<(g|0)))break e;if(k=L+-1|0,k=cr(k,k>>31,s,0),s=k+g|0,g=Fn+(g>>31)|0,g=s>>>0<k>>>0?g+1|0:g,!g&s>>>0<=Qn[n+24>>2]|g>>>0<0)break t;break e}if(!s)break e}xe=0}return xe}function zu(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{if(L=s,L){if(k=a,!k)break a;if(E=g,!E)break s;if(E=Br(E)-Br(L)|0,E>>>0<=31)break u;break t}if((g|0)==1&a>>>0>=0|g>>>0>1)break t;return s=(n>>>0)/(a>>>0)|0,Fn=0,s}if(k=g,!n)break r;if(!k||k+-1&k)break l;return n=L>>>(hp(k)&31)|0,Fn=0,n}if(!(k+-1&k))break o;H=(Br(k)+33|0)-Br(L)|0,R=0-H|0;break i}H=E+1|0,R=63-E|0;break i}return n=(L>>>0)/(k>>>0)|0,Fn=0,n}if(E=Br(k)-Br(L)|0,E>>>0<31)break n;break t}if((k|0)==1)break e;return a=n,n=hp(k),g=n&31,32<=(n&63)>>>0?(E=0,n=s>>>g|0):(E=s>>>g|0,n=((1<<g)-1&s)<<32-g|a>>>g),Fn=E,n}H=E+1|0,R=63-E|0}if(k=s,L=n,E=H&63,W=E&31,32<=(E&63)>>>0?(E=0,ce=k>>>W|0):(E=k>>>W|0,ce=((1<<W)-1&k)<<32-W|L>>>W),n=R&63,R=n&31,32<=(n&63)>>>0?(k=L<<R,n=0):(k=(1<<R)-1&L>>>32-R|s<<R,n=L<<R),s=k,H)for(L=g+-1|0,k=a+-1|0,(k|0)!=-1&&(L=L+1|0),R=k;k=ce,ee=E<<1|k>>>31,E=k<<1|s>>>31,xe=ee,k=ee,ee=E,W=L-((R>>>0<E>>>0)+k|0)|0,k=W>>31,W=W>>31,E=a&W,ce=ee-E|0,E=xe-((g&k)+(ee>>>0<E>>>0)|0)|0,k=s<<1|n>>>31,n=Ne|n<<1,s=k|Ye,xe=0,ee=W&1,Ne=ee,H=H+-1|0,!!H;);return Fn=xe|(s<<1|n>>>31),ee|n<<1}n=0,s=0}return Fn=s,n}function Oa(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(H=k<<1&-4,H){for(H=g+H|0;L=F[a|0],E=ne(F[n|0],19077)>>>8|0,ee=F[s|0],R=E+(ne(ee,33050)>>>8|0)|0,W=R+-17685|0,p[g+1|0]=(W>>>0<16384?W>>>6|0:R>>>0<17685?0:240)|15,R=E+(ne(L,26149)>>>8|0)|0,W=R+-14234|0,L=E-(ne(ee,6419)>>>8|0)-(ne(L,13320)>>>8)|0,E=L+8708|0,p[g|0]=(W>>>0<16384?W>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),L=F[a|0],E=ne(F[n+1|0],19077)>>>8|0,ee=F[s|0],R=E+(ne(ee,33050)>>>8|0)|0,W=R+-17685|0,p[g+3|0]=(W>>>0<16384?W>>>6|0:R>>>0<17685?0:240)|15,R=E+(ne(L,26149)>>>8|0)|0,W=R+-14234|0,L=E-(ne(ee,6419)>>>8|0)-(ne(L,13320)>>>8)|0,E=L+8708|0,p[g+2|0]=(W>>>0<16384?W>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),a=a+1|0,s=s+1|0,n=n+2|0,g=g+4|0,(H|0)!=(g|0););g=H}k&1&&(a=F[a|0],n=ne(F[n|0],19077)>>>8|0,s=F[s|0],k=n+(ne(s,33050)>>>8|0)|0,H=k+-17685|0,p[g+1|0]=(H>>>0<16384?H>>>6|0:k>>>0<17685?0:240)|15,H=g,g=n+(ne(a,26149)>>>8|0)|0,k=g+-14234|0,n=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[H|0]=(k>>>0<16384?k>>>6|0:g>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(n|0)<-8708?0:15))}function aa(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;ce=Nn-592|0,Nn=ce,E=s+24|0,L=no(E,1),W=Zo(a,0,n<<2);e:{t:{i:{n:{if(L){if(a=no(E,1),Ye=(no(E,no(E,1)?8:1)<<2)+W|0,mt=1,c[Ye>>2]=mt,(a|0)!=1)break n;Ye=(no(E,8)<<2)+W|0,mt=1,c[Ye>>2]=mt;break n}if(ee=Zo(ce,0,76),L=no(E,4)+4|0,(L|0)>19)break t;if(a=0,(L|0)>0)for(;Ye=(F[a+1232|0]<<2)+ee|0,mt=no(E,3),c[Ye>>2]=mt,a=a+1|0,(L|0)!=(a|0););if(!bs(ee+80|0,7,ee,19)||(L=n,no(E,1)&&(L=no(E,(no(E,3)<<1)+2|0)+2|0,(L|0)>(n|0))))break i;if((n|0)<1)break n;for(xe=8,a=0;;){if(!L)break n;k=c[s+44>>2],(k|0)>=32&&(Ae(E),k=c[s+44>>2]),Ne=k,R=c[s+28>>2],H=k&63,k=H&31,k=(ee+80|0)+(((32<=(H&63)>>>0?R>>>k|0:((1<<k)-1&R)<<32-k|c[s+24>>2]>>>k)&127)<<2)|0,c[s+44>>2]=Ne+F[k|0],R=mn[k+2>>1];o:{if(R>>>0<=15){c[(a<<2)+W>>2]=R,xe=R||xe,a=a+1|0;break o}if(k=R+-16|0,H=no(E,F[k+1251|0])+F[k+1254|0]|0,k=H+a|0,(k|0)>(n|0))break i;if((H|0)<1)break o;for(R=(R|0)==16?xe:0;c[(a<<2)+W>>2]=R,a=a+1|0,(k|0)!=(a|0););a=k}if(L=L+-1|0,!((a|0)<(n|0)))break}}if(c[s+48>>2])break t;if(a=bs(g,8,W,n),a)break e;break t}c[s>>2]=3}c[s>>2]=3,a=0}return Nn=ce+592|0,a}function Xr(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0;if(a>>>0>=512)return pu(n|0,s|0,a|0)|0,n|0;k=n+a|0;e:{if(!((n^s)&3)){t:{if((a|0)<1){a=n;break t}if(!(n&3)){a=n;break t}for(a=n;;){if(p[a|0]=F[s|0],s=s+1|0,a=a+1|0,a>>>0>=k>>>0)break t;if(!(a&3))break}}g=k&-4;t:{if(g>>>0<64||(E=g+-64|0,a>>>0>E>>>0))break t;for(;c[a>>2]=c[s>>2],c[a+4>>2]=c[s+4>>2],c[a+8>>2]=c[s+8>>2],c[a+12>>2]=c[s+12>>2],c[a+16>>2]=c[s+16>>2],c[a+20>>2]=c[s+20>>2],c[a+24>>2]=c[s+24>>2],c[a+28>>2]=c[s+28>>2],c[a+32>>2]=c[s+32>>2],c[a+36>>2]=c[s+36>>2],c[a+40>>2]=c[s+40>>2],c[a+44>>2]=c[s+44>>2],c[a+48>>2]=c[s+48>>2],c[a+52>>2]=c[s+52>>2],c[a+56>>2]=c[s+56>>2],c[a+60>>2]=c[s+60>>2],s=s- -64|0,a=a- -64|0,a>>>0<=E>>>0;);}if(a>>>0>=g>>>0)break e;for(;c[a>>2]=c[s>>2],s=s+4|0,a=a+4|0,a>>>0<g>>>0;);break e}if(k>>>0<4){a=n;break e}if(g=k+-4|0,g>>>0<n>>>0){a=n;break e}for(a=n;p[a|0]=F[s|0],p[a+1|0]=F[s+1|0],p[a+2|0]=F[s+2|0],p[a+3|0]=F[s+3|0],s=s+4|0,a=a+4|0,a>>>0<=g>>>0;);}if(a>>>0<k>>>0)for(;p[a|0]=F[s|0],s=s+1|0,a=a+1|0,(k|0)!=(a|0););return n|0}function _a(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(L=k&-2,L){for(L=ne(L,3)+g|0;R=F[a|0],E=ne(F[n|0],19077)>>>8|0,ee=F[s|0],W=E+(ne(ee,33050)>>>8|0)|0,H=W+-17685|0,p[g+2|0]=H>>>0<16384?H>>>6|0:W>>>0<17685?0:255,W=E+(ne(R,26149)>>>8|0)|0,H=W+-14234|0,p[g|0]=H>>>0<16384?H>>>6|0:W>>>0<14234?0:255,R=E-(ne(ee,6419)>>>8|0)-(ne(R,13320)>>>8)|0,E=R+8708|0,p[g+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[a|0],E=ne(F[n+1|0],19077)>>>8|0,ee=F[s|0],W=E+(ne(ee,33050)>>>8|0)|0,H=W+-17685|0,p[g+5|0]=H>>>0<16384?H>>>6|0:W>>>0<17685?0:255,W=E+(ne(R,26149)>>>8|0)|0,H=W+-14234|0,p[g+3|0]=H>>>0<16384?H>>>6|0:W>>>0<14234?0:255,R=E-(ne(ee,6419)>>>8|0)-(ne(R,13320)>>>8)|0,E=R+8708|0,p[g+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+6|0,(L|0)!=(g|0););g=L}k&1&&(a=F[a|0],n=ne(F[n|0],19077)>>>8|0,s=F[s|0],k=n+(ne(s,33050)>>>8|0)|0,L=k+-17685|0,p[g+2|0]=L>>>0<16384?L>>>6|0:k>>>0<17685?0:255,k=n+(ne(a,26149)>>>8|0)|0,L=k+-14234|0,p[g|0]=L>>>0<16384?L>>>6|0:k>>>0<14234?0:255,n=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Il(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if(L=k&-2,L){for(L=ne(L,3)+g|0;R=F[s|0],E=ne(F[n|0],19077)>>>8|0,ee=F[a|0],W=E+(ne(ee,26149)>>>8|0)|0,H=W+-14234|0,p[g+2|0]=H>>>0<16384?H>>>6|0:W>>>0<14234?0:255,W=E+(ne(R,33050)>>>8|0)|0,H=W+-17685|0,p[g|0]=H>>>0<16384?H>>>6|0:W>>>0<17685?0:255,R=E-(ne(R,6419)>>>8|0)-(ne(ee,13320)>>>8)|0,E=R+8708|0,p[g+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[s|0],E=ne(F[n+1|0],19077)>>>8|0,ee=F[a|0],W=E+(ne(ee,26149)>>>8|0)|0,H=W+-14234|0,p[g+5|0]=H>>>0<16384?H>>>6|0:W>>>0<14234?0:255,W=E+(ne(R,33050)>>>8|0)|0,H=W+-17685|0,p[g+3|0]=H>>>0<16384?H>>>6|0:W>>>0<17685?0:255,R=E-(ne(R,6419)>>>8|0)-(ne(ee,13320)>>>8)|0,E=R+8708|0,p[g+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+6|0,(L|0)!=(g|0););g=L}k&1&&(s=F[s|0],n=ne(F[n|0],19077)>>>8|0,a=F[a|0],k=n+(ne(a,26149)>>>8|0)|0,L=k+-14234|0,p[g+2|0]=L>>>0<16384?L>>>6|0:k>>>0<14234?0:255,k=n+(ne(s,33050)>>>8|0)|0,L=k+-17685|0,p[g|0]=L>>>0<16384?L>>>6|0:k>>>0<17685?0:255,n=n-(ne(s,6419)>>>8|0)-(ne(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Nu(n,s){var a=0,g=0,k=0;e:{if(!n)break e;if(!s){if(c[n>>2])break e;return c[n>>2]=2,c[n+4>>2]=0,c[n+8>>2]=5281,0}if(!c[n+4>>2]&&!Ho(n,s))break e;t:{if(!sl(n,s)){i:{if(!gu(n,s))break i;c[n+2300>>2]=0;n:{if(c[n+308>>2]>=1)for(k=n+12|0;;){if(g=c[n+312>>2],!ga(k,n))break n;if(c[n+2296>>2]<c[n+288>>2])for(a=(ne(a&g,28)+n|0)+316|0;;){if(!_s(n,a)){if(a=0,c[n>>2])break i;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5412;break i}if(g=c[n+2296>>2]+1|0,c[n+2296>>2]=g,!((g|0)<c[n+288>>2]))break}if(a=c[n+2256>>2]+-2|0,p[a|0]=0,p[a+1|0]=0,c[n+2296>>2]=0,c[n+2248>>2]=0,!Rc(n,s)){if(a=0,c[n>>2])break i;c[n>>2]=6,c[n+4>>2]=0,c[n+8>>2]=5447;break i}if(a=c[n+2300>>2]+1|0,c[n+2300>>2]=a,!((a|0)<c[n+308>>2]))break}o:{if(c[n+148>>2]<1||ft[c[2559]](n+124|0)|0)break o;a=0;break i}a=1;break i}if(a=0,c[n>>2])break i;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5371}if(c0(n,s)&a)break t}return ft[c[2562]](n+124|0),l0(n),jr(c[n+2288>>2]),c[n+2288>>2]=0,c[n+2292>>2]=0,c[n+12>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+24>>2]=0,c[n+28>>2]=0,c[n+32>>2]=0,c[n+36>>2]=0,c[n+4>>2]=0,0}c[n+4>>2]=0,a=1}return a}function vu(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0;for(s=n+12|0,R=Lr(s,7),Lr(s,1)&&(ce=Ns(s,4)),Lr(s,1)&&(xe=Ns(s,4)),Lr(s,1)&&(Ne=Ns(s,4)),Lr(s,1)&&(Ye=Ns(s,4)),Lr(s,1)&&(mt=Ns(s,4)),Tt=c[n+104>>2],L=n+776|0,W=L+24|0,H=L+16|0,ee=L+8|0;;){e:{t:{if(Tt){s=p[(n+E|0)+116|0]+(c[n+112>>2]?0:R)|0;break t}if(s=R,!E)break t;a=c[W+4>>2],s=(E<<5)+n|0,c[s+800>>2]=c[W>>2],c[s+804>>2]=a,a=c[H+4>>2],c[s+792>>2]=c[H>>2],c[s+796>>2]=a,a=c[ee+4>>2],c[s+784>>2]=c[ee>>2],c[s+788>>2]=a,a=c[L+4>>2],c[s+776>>2]=c[L>>2],c[s+780>>2]=a;break e}a=(E<<5)+n|0,k=s+mt|0,c[a+800>>2]=k,g=s+Ye|0,g=(g|0)<117?g:117,c[a+792>>2]=F[((g|0)>0?g:0)+4448|0],g=(s|0)<127?s:127,c[a+780>>2]=mn[(((g|0)>0?g:0)<<1)+4576>>1],g=s+ce|0,g=(g|0)<127?g:127,c[a+776>>2]=F[((g|0)>0?g:0)+4448|0],k=(k|0)<127?k:127,c[a+796>>2]=mn[(((k|0)>0?k:0)<<1)+4576>>1],k=s+xe|0,k=(k|0)<127?k:127,c[a+784>>2]=F[((k|0)>0?k:0)+4448|0]<<1,s=s+Ne|0,s=(s|0)<127?s:127,s=ne(mn[(((s|0)>0?s:0)<<1)+4576>>1],101581),c[a+788>>2]=s>>>0<524288?8:s>>>16|0}if(E=E+1|0,(E|0)==4)break}}function Hs(n,s,a,g,k,E,L){var R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0,ms=0,Aa=0,dl=0,Xu=0;if((g|0)>=1)for(ir=k<<1|1,Ir=ne(s,3),ms=0-s|0,Aa=ne(s,-3),dl=0-(s<<2)|0,Ot=s<<1,Xu=0-Ot|0,ni=c[2547],H=c[2548],ci=c[2546],ee=c[2549];;){k=g,Mi=n+Xu|0,W=F[Mi|0],ki=n+s|0,Ye=F[ki|0],R=W-Ye|0,mt=n+ms|0,g=F[mt|0],Ne=F[n|0];e:{if((F[R+ee|0]+(F[ee+(g-Ne|0)|0]<<2)|0)>(ir|0)||(Gi=n+Aa|0,xe=F[Gi|0],F[ee+(F[n+dl|0]-xe|0)|0]>(E|0)|F[ee+(xe-W|0)|0]>(E|0))||(ce=F[ee+(W-g|0)|0],(ce|0)>(E|0))||(nn=n+Ot|0,Tt=F[nn|0],F[ee+(F[n+Ir|0]-Tt|0)|0]>(E|0)|F[ee+(Tt-Ye|0)|0]>(E|0))||(bn=F[ee+(Ye-Ne|0)|0],(bn|0)>(E|0)))break e;if(R=p[R+ci|0]+ne(Ne-g|0,3)|0,!((bn|0)<=(L|0)&&(ce|0)<=(L|0))){W=p[(R+4>>3)+ni|0],p[mt|0]=F[(p[(R+3>>3)+ni|0]+g|0)+H|0],p[n|0]=F[(Ne-W|0)+H|0];break e}ce=xe,R=p[R+ci|0],xe=ne(R,9)+63>>7,p[Gi|0]=F[(ce+xe|0)+H|0],ce=W,W=ne(R,18)+63>>7,p[Mi|0]=F[(ce+W|0)+H|0],ce=g,g=ne(R,27)+63>>7,p[mt|0]=F[(ce+g|0)+H|0],p[n|0]=F[(Ne-g|0)+H|0],p[ki|0]=F[(Ye-W|0)+H|0],p[nn|0]=F[(Tt-xe|0)+H|0]}if(g=k+-1|0,n=n+a|0,!((k|0)>1))break}}function Tl(n,s,a){var g=0,k=0,E=0,L=0,R=0,W=0;if(g=Ql(1,0,272),!g)return 0;c[g>>2]=0,c[g+4>>2]=2,_n(),E=c[n>>2],c[g+100>>2]=E,k=c[n+4>>2],c[g+8>>2]=n+24,c[g+104>>2]=k,c[n+28>>2]=k,c[n+24>>2]=E,c[n- -64>>2]=n,c[g>>2]=0,ve(g+24|0,s,a);e:{t:{i:{if(!an(c[n>>2],c[n+4>>2],1,g,0))break i;n:{o:{if(c[g+176>>2]!=1|c[g+180>>2]!=3|c[g+120>>2]>0)break o;if(a=c[g+164>>2],(a|0)<1)break n;for(s=c[g+168>>2],k=0;;){if(E=s+ne(k,548)|0,F[c[E+4>>2]]|F[c[E+8>>2]]|F[c[E+12>>2]])break o;if(k=k+1|0,(a|0)==(k|0))break}break n}if(c[n+132>>2]=0,s=c[g+104>>2],a=s,k=s>>31,s=c[g+100>>2],L=cr(a,k,s,s>>31),a=Fn,W=g,k=c[n>>2],s=k>>31,s=s<<4|k>>>28,E=k<<4,R=k&65535,k=R,E=E+k|0,E>>>0<k>>>0&&(s=s+1|0),k=E+L|0,s=s+a|0,s=Ts(k,k>>>0<E>>>0?s+1|0:s,4),c[W+16>>2]=s,s)break t;c[g+20>>2]=0,c[g>>2]=1;break i}if(c[n+132>>2]=1,c[g+20>>2]=0,s=c[g+104>>2],a=s,k=s>>31,s=c[g+100>>2],s=Ts(cr(a,k,s,s>>31),Fn,1),c[g+16>>2]=s,s)break e;c[g>>2]=1}return Uo(g),jr(g),0}c[g+20>>2]=(s+(L<<2)|0)+(R<<2)}return c[n+20>>2]=g,1}function ds(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0;for(xe=0-s|0,ee=s<<2,W=ee+n|0,Ne=0-(s<<1)|0,Ye=a<<1|1,n=c[2548],a=c[2547],mt=c[2546],ce=c[2549];g=k+W|0,L=g+xe|0,H=F[L|0],R=F[g|0],E=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(H-R|0)|0]<<2)+F[E+ce|0]|0)<=(Ye|0)&&(E=p[E+mt|0]+ne(R-H|0,3)|0,Tt=p[(E+4>>3)+a|0],p[L|0]=F[(H+p[(E+3>>3)+a|0]|0)+n|0],p[g|0]=F[(R-Tt|0)+n|0]),k=k+1|0,(k|0)!=16;);for(W=W+ee|0,k=0;g=k+W|0,L=g+xe|0,H=F[L|0],R=F[g|0],E=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(H-R|0)|0]<<2)+F[E+ce|0]|0)<=(Ye|0)&&(E=p[E+mt|0]+ne(R-H|0,3)|0,Tt=p[(E+4>>3)+a|0],p[L|0]=F[(H+p[(E+3>>3)+a|0]|0)+n|0],p[g|0]=F[(R-Tt|0)+n|0]),k=k+1|0,(k|0)!=16;);for(H=W+ee|0,k=0;g=k+H|0,R=g+xe|0,ee=F[R|0],W=F[g|0],L=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(ee-W|0)|0]<<2)+F[L+ce|0]|0)<=(Ye|0)&&(L=p[L+mt|0]+ne(W-ee|0,3)|0,E=p[(L+4>>3)+a|0],p[R|0]=F[(ee+p[(L+3>>3)+a|0]|0)+n|0],p[g|0]=F[(W-E|0)+n|0]),k=k+1|0,(k|0)!=16;);}function Pn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;for(H=n+4|0,xe=a<<1|1,a=c[2548],ee=c[2547],Ne=c[2546],ce=c[2549];g=H+ne(s,k)|0,L=g+-1|0,R=F[L|0],W=F[g|0],E=F[g+-2|0]-F[g+1|0]|0,((F[ce+(R-W|0)|0]<<2)+F[E+ce|0]|0)<=(xe|0)&&(E=p[E+Ne|0]+ne(W-R|0,3)|0,Ye=p[(E+4>>3)+ee|0],p[L|0]=F[(R+p[(E+3>>3)+ee|0]|0)+a|0],p[g|0]=F[(W-Ye|0)+a|0]),k=k+1|0,(k|0)!=16;);for(H=n+8|0,k=0;g=H+ne(s,k)|0,L=g+-1|0,R=F[L|0],W=F[g|0],E=F[g+-2|0]-F[g+1|0]|0,((F[ce+(R-W|0)|0]<<2)+F[E+ce|0]|0)<=(xe|0)&&(E=p[E+Ne|0]+ne(W-R|0,3)|0,Ye=p[(E+4>>3)+ee|0],p[L|0]=F[(R+p[(E+3>>3)+ee|0]|0)+a|0],p[g|0]=F[(W-Ye|0)+a|0]),k=k+1|0,(k|0)!=16;);for(W=n+12|0,k=0;n=W+ne(s,k)|0,H=n+-1|0,g=F[H|0],R=F[n|0],L=F[n+-2|0]-F[n+1|0]|0,((F[ce+(g-R|0)|0]<<2)+F[L+ce|0]|0)<=(xe|0)&&(L=p[L+Ne|0]+ne(R-g|0,3)|0,E=p[(L+4>>3)+ee|0],p[H|0]=F[(g+p[(L+3>>3)+ee|0]|0)+a|0],p[n|0]=F[(R-E|0)+a|0]),k=k+1|0,(k|0)!=16;);}function Fo(n,s){n=n|0,s=s|0;var a=0;n=Di[n>>1]+4>>3,a=n+F[s|0]|0,a=(a|0)>0?a:0,p[s|0]=(a|0)<255?a:255,a=n+F[s+1|0]|0,a=(a|0)>0?a:0,p[s+1|0]=(a|0)<255?a:255,a=n+F[s+2|0]|0,a=(a|0)>0?a:0,p[s+2|0]=(a|0)<255?a:255,a=n+F[s+3|0]|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,a=n+F[s+32|0]|0,a=(a|0)>0?a:0,p[s+32|0]=(a|0)<255?a:255,a=n+F[s+33|0]|0,a=(a|0)>0?a:0,p[s+33|0]=(a|0)<255?a:255,a=n+F[s+34|0]|0,a=(a|0)>0?a:0,p[s+34|0]=(a|0)<255?a:255,a=n+F[s+35|0]|0,a=(a|0)>0?a:0,p[s+35|0]=(a|0)<255?a:255,a=n+F[s+64|0]|0,a=(a|0)>0?a:0,p[s+64|0]=(a|0)<255?a:255,a=n+F[s+65|0]|0,a=(a|0)>0?a:0,p[s+65|0]=(a|0)<255?a:255,a=n+F[s+66|0]|0,a=(a|0)>0?a:0,p[s+66|0]=(a|0)<255?a:255,a=n+F[s+67|0]|0,a=(a|0)>0?a:0,p[s+67|0]=(a|0)<255?a:255,a=n+F[s+96|0]|0,a=(a|0)>0?a:0,p[s+96|0]=(a|0)<255?a:255,a=n+F[s+97|0]|0,a=(a|0)>0?a:0,p[s+97|0]=(a|0)<255?a:255,a=n+F[s+98|0]|0,a=(a|0)>0?a:0,p[s+98|0]=(a|0)<255?a:255,n=n+F[s+99|0]|0,n=(n|0)>0?n:0,p[s+99|0]=(n|0)<255?n:255}function Hr(n,s,a,g,k,E,L){var R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,nn=0,bn=0,ir=0,Ir=0,ms=0;if((g|0)>=1)for(ki=k<<1|1,Gi=ne(s,3),nn=0-s|0,bn=ne(s,-3),ir=0-(s<<2)|0,Ot=s<<1,Ir=0-Ot|0,ms=c[2546],ee=c[2548],Ne=c[2547],H=c[2549];;){k=g,ni=n+Ir|0,W=F[ni|0],ci=n+s|0,ce=F[ci|0],Ye=W-ce|0,Tt=n+nn|0,g=F[Tt|0],xe=F[n|0];e:{if((F[Ye+H|0]+(F[H+(g-xe|0)|0]<<2)|0)>(ki|0)||(R=F[n+bn|0],F[H+(F[n+ir|0]-R|0)|0]>(E|0)|F[H+(R-W|0)|0]>(E|0))||(mt=F[H+(W-g|0)|0],(mt|0)>(E|0))||(R=F[n+Ot|0],F[H+(F[n+Gi|0]-R|0)|0]>(E|0)|F[H+(R-ce|0)|0]>(E|0))||(Mi=F[H+(ce-xe|0)|0],(Mi|0)>(E|0)))break e;if(R=ne(xe-g|0,3),!((Mi|0)<=(L|0)&&(mt|0)<=(L|0))){W=p[Ye+ms|0]+R|0,ce=p[(W+4>>3)+Ne|0],p[Tt|0]=F[(p[(W+3>>3)+Ne|0]+g|0)+ee|0],p[n|0]=F[(xe-ce|0)+ee|0];break e}Ye=p[(R+3>>3)+Ne|0],mt=W,W=p[(R+4>>3)+Ne|0],R=W+1>>1,p[ni|0]=F[(mt+R|0)+ee|0],p[Tt|0]=F[(g+Ye|0)+ee|0],p[n|0]=F[(xe-W|0)+ee|0],p[ci|0]=F[(ce-R|0)+ee|0]}if(g=k+-1|0,n=n+a|0,!((k|0)>1))break}}function Co(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;e:{t:switch(a|0){case 0:ft[c[2734]](n,s,g);return;case 1:ft[c[2735]](n,s,g);return;case 7:ft[c[2735]](n,s,g),ft[c[2664]](g,0,s,1,0);return;case 2:ft[c[2736]](n,s,g);return;case 3:Xr(g,n,s<<2);return;case 8:R=Xr(g,n,s<<2),W=0,H=s,ee=1,ce=0,L=c[2664],ft[L](R|0,W|0,H|0,ee|0,ce|0);return;case 4:if((s|0)<1)break e;for(a=(s<<2)+n|0;s=c[n>>2],s=s<<24|s<<8&16711680|(s>>>8&65280|s>>>24),p[g|0]=s,p[g+1|0]=s>>>8,p[g+2|0]=s>>>16,p[g+3|0]=s>>>24,g=g+4|0,n=n+4|0,n>>>0<a>>>0;);break e;case 9:if((s|0)>=1)for(E=(s<<2)+n|0,a=g;k=c[n>>2],k=k<<24|k<<8&16711680|(k>>>8&65280|k>>>24),p[a|0]=k,p[a+1|0]=k>>>8,p[a+2|0]=k>>>16,p[a+3|0]=k>>>24,a=a+4|0,n=n+4|0,n>>>0<E>>>0;);ft[c[2664]](g,1,s,1,0);return;case 5:ft[c[2737]](n,s,g);return;case 10:ft[c[2737]](n,s,g),ft[c[2665]](g,s,1,0);return;case 6:break t;default:break e}ft[c[2738]](n,s,g)}}function ts(n,s,a){var g=0,k=0,E=0;g=Nn-160|0,Nn=g,c[g+16>>2]=1,c[g+12>>2]=s,c[g+8>>2]=n,c[g+156>>2]=0,k=g,E=kl(n,s,0,0,0,g+156|0,0,g+8|0),c[k+48>>2]=E,!c[g+156>>2]|(c[g+48>>2]!=7?c[g+48>>2]:0)||(c[g+48>>2]=4),n=c[g+48>>2];e:{if(n)break e;mp(g+48|0),n=c[g+20>>2],c[g+112>>2]=n+c[g+8>>2],c[g+108>>2]=c[g+12>>2]-n,Vh(a,g+48|0);t:{if(!c[g+40>>2]){if(s=xo(),!s){n=1;break e}c[s+2348>>2]=c[g+24>>2],c[s+2352>>2]=c[g+28>>2];i:{if(Ho(s,g+48|0)&&(n=Gl(c[g+48>>2],c[g+52>>2],c[a+20>>2],c[a>>2]),n||(c[s+148>>2]=0,Dh(c[a+20>>2],s),n=0,Nu(s,g+48|0))))break i;n=c[s>>2]}zs(s);break t}s=Ql(1,0,272),n=0;i:{if(!s)break i;c[s>>2]=0,c[s+4>>2]=2,_n(),n=s}if(s=n,!s){n=1;break e}i:{if(je(s,g+48|0)&&(n=Gl(c[g+48>>2],c[g+52>>2],c[a+20>>2],c[a>>2]),n||(n=0,Dc(s))))break i;n=c[s>>2]}g0(s)}if(n){kf(c[a>>2]);break e}if(n=0,s=c[a+20>>2],!s|!c[s+48>>2])break e;n=Je(c[a>>2])}return Nn=g+160|0,n}function _n(){var n=0;n=c[2673],(n|0)!=c[2551]&&(c[2771]=81,c[2770]=81,c[2769]=82,c[2768]=83,c[2767]=84,c[2766]=85,c[2765]=86,c[2764]=87,c[2763]=88,c[2762]=89,c[2761]=90,c[2760]=91,c[2759]=92,c[2758]=93,c[2757]=94,c[2756]=81,c[2803]=81,c[2802]=81,c[2801]=82,c[2800]=83,c[2799]=84,c[2798]=85,c[2797]=86,c[2796]=87,c[2795]=88,c[2794]=89,c[2793]=90,c[2792]=91,c[2791]=92,c[2790]=93,c[2789]=94,c[2788]=81,c[2755]=95,c[2754]=95,c[2753]=96,c[2752]=97,c[2751]=98,c[2750]=99,c[2749]=100,c[2748]=101,c[2747]=102,c[2746]=103,c[2745]=104,c[2744]=105,c[2743]=106,c[2742]=107,c[2741]=108,c[2740]=95,c[2787]=95,c[2786]=95,c[2785]=96,c[2784]=97,c[2783]=98,c[2782]=99,c[2781]=100,c[2780]=101,c[2779]=102,c[2778]=103,c[2777]=104,c[2776]=105,c[2775]=106,c[2774]=107,c[2773]=108,c[2772]=95,c[2733]=109,c[2804]=110,c[2735]=111,c[2734]=112,c[2736]=113,c[2737]=114,c[2738]=115,c[2805]=116,c[2732]=117,c[2551]=n)}function Fa(n,s,a){var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0;k=Nn-16|0,Nn=k,W=c[s+4>>2],H=c[s>>2];e:{t:{if(!n){c[s+72>>2]=0,g=H,E=W;break t}if(L=c[n+8>>2],c[s+72>>2]=(L|0)>0,g=H,E=W,(L|0)<1)break t;if(L=0,g=c[n+16>>2],a=a>>>0>10,R=a?g&-2:g,E=c[n+24>>2],(R+E|0)>(W|0)||(g=c[n+12>>2],ee=a?g&-2:g,g=c[n+20>>2],(E|0)<1|(ee+g|0)>(H|0)|((g|0)<1|(R|ee)<0)))break e}if(c[s+84>>2]=R,c[s+76>>2]=ee,c[s+16>>2]=E,c[s+12>>2]=g,c[s+88>>2]=R+E,c[s+80>>2]=g+ee,n){a=c[n+28>>2],c[s+92>>2]=(a|0)>0,L=1,R=1;t:{if((a|0)>=1){if(c[k+12>>2]=c[n+32>>2],c[k+8>>2]=c[n+36>>2],!$e(g,E,k+12|0,k+8|0))break t;c[s+96>>2]=c[k+12>>2],c[s+100>>2]=c[k+8>>2],R=!c[s+92>>2]}if(c[s+68>>2]=c[n>>2]!=0,c[s+56>>2]=!c[n+4>>2],R)break e;n=0,n=c[s+96>>2]<((ne(H,3)|0)/4|0)?c[s+100>>2]<((ne(W,3)|0)/4|0):n,c[s+56>>2]=0,c[s+68>>2]=n;break e}L=0;break e}c[s+68>>2]=0,c[s+92>>2]=0,L=1,c[s+56>>2]=1}return Nn=k+16|0,L}function ju(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;if(g=c[n+108>>2],L=s-g|0,(L|0)>=1)for(a=c[n+100>>2],H=c[n+16>>2]+(ne(a,g)<<2)|0;;){R=(L|0)<16?L:16,xe=R+g|0,k=c[n+8>>2],ee=c[k>>2],Ne=ne(ee,R),ce=c[k+40>>2],k=c[ce+136>>2]+ne(g,ee)|0,W=c[n+20>>2],E=c[n+176>>2];e:{if((E|0)>=1){if(a=E+-1|0,Hl((ne(a,20)+n|0)+180|0,g,xe,H,W),(E|0)<2)break e;for(;E=a+-1|0,Hl((ne(E,20)+n|0)+180|0,g,xe,W,W),Ye=(a|0)>1,a=E,!!Ye;);break e}if((W|0)==(H|0))break e;Xr(W,H,ne(a,R)<<2)}if(ft[c[2669]](W,k,Ne),E=c[ce+12>>2],E){a=c[ce+140>>2];e:{if((L|0)<1)break e;if(ft[c[(E<<2)+10912>>2]](a,k,k,ee),(R|0)==1){a=k;break e}for(g=g+1|0;a=k+ee|0,ft[c[(c[ce+12>>2]<<2)+10912>>2]](k,a,a,ee),k=a,g=g+1|0,(xe|0)!=(g|0););}c[ce+140>>2]=a}if(a=c[n+100>>2],H=(ne(a,R)<<2)+H|0,g=xe,L=L-R|0,!((L|0)>0))break}c[n+108>>2]=s,c[n+116>>2]=s}function Uu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0;if(L=c[n+16>>2],(L|0)<1)return 0;for(ce=L+1>>1,a=c[s+24>>2];;){g=a,a=c[n+32>>2],E=vs(g,L-R|0,c[n+20>>2]+ne(a,R)|0,a),a=ce-W|0,mc(c[s+28>>2],a)&&(k=c[n+36>>2],k=vs(c[s+28>>2],a,c[n+24>>2]+ne(k,W)|0,k),g=a,a=c[n+36>>2],vs(c[s+32>>2],g,c[n+28>>2]+ne(a,W)|0,a),W=k+W|0),R=E+R|0,E=c[s>>2],g=c[E>>2],k=0,a=c[s+24>>2];e:{if(c[a+64>>2]>=c[a+56>>2])break e;for(xe=c[(g<<2)+11312>>2],g=c[E+16>>2]+ne(c[E+20>>2],c[s+16>>2]+H|0)|0;;){if(c[a+24>>2]>0||(ee=c[s+28>>2],c[ee+64>>2]>=c[ee+56>>2]|c[ee+24>>2]>0))break e;if(Ni(a),Ni(c[s+28>>2]),Ni(c[s+32>>2]),a=c[s+24>>2],ft[xe|0](c[a+68>>2],c[c[s+28>>2]+68>>2],c[c[s+32>>2]+68>>2],g,c[a+52>>2]),k=k+1|0,g=c[E+20>>2]+g|0,a=c[s+24>>2],!(c[a+64>>2]<c[a+56>>2]))break}}if(H=k+H|0,!((L|0)>(R|0)))break}return H|0}function Oc(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0;a=Nn-240|0,Nn=a,k=a+40|0,k?(Hh(Zo(k,0,200)+40|0),k=1):k=0;e:{if(!k){jh(c[2536]);break e}F[10640]||(Va(32)|0,p[10640]=1),k=a+80|0;t:{if(Gr(n,s,a+40|0))break t;if(E=Pc(c[a+40>>2],c[a+44>>2],32,0)|0,!E){n=c[a+44>>2],c[a>>2]=c[a+40>>2],c[a+4>>2]=n,Wu(c[2536],1051,a),E=0;break t}if(g=Al(0,c[a+40>>2],c[a+44>>2],32,255,65280,16711680,-16777216)|0,!g){n=c[a+44>>2],c[a+16>>2]=c[a+40>>2],c[a+20>>2]=n,Wu(c[2536],1092,a+16|0),g=0;break t}if(qs(g|0)|0,c[a+80>>2]=1,c[a+84>>2]=c[g+8>>2],c[a+88>>2]=c[g+12>>2],c[a+96>>2]=c[g+20>>2],c[a+100>>2]=c[g+16>>2],L=c[g+12>>2],R=c[g+16>>2],c[a+92>>2]=1,c[a+104>>2]=ne(L,R),n=Js(n,s,a+40|0),n){c[a+32>>2]=n,L=0,Wu(c[2536],1130,a+32|0);break t}if(nc(g|0),L=0,hu(g|0,0,E|0,0)|0)break t;L=!(sh(E|0)|0)}fu(g|0),fu(E|0),kf(k)}return Nn=a+240|0,L|0}function lh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0;if((g|0)>=2)for(L=g>>1,W=(L|0)>1?L:1,L=0;;){E=L<<3,R=c[(E|4)+n>>2],E=c[n+E>>2],H=(R>>>7&510)+(E>>>7&510)|0,ee=(R>>>15&510)+(E>>>15&510)|0,E=(R<<1&510)+(E<<1&510)|0,R=((ne(H,-24116)+ne(ee,28800)|0)+ne(E,-4684)|0)+33685504>>18,E=((ne(H,-19081)+ne(ee,-9719)|0)+ne(E,28800)|0)+33685504>>18;e:{if(k){p[s+L|0]=E,p[a+L|0]=R;break e}H=s+L|0,p[H|0]=(E+F[H|0]|0)+1>>>1,E=a+L|0,p[E|0]=(R+F[E|0]|0)+1>>>1}if(L=L+1|0,(W|0)==(L|0))break}if(g&1){if(n=c[(W<<3)+n>>2],g=n>>>6&1020,L=n>>>14&1020,R=n<<2&1020,n=((ne(g,-24116)+ne(L,28800)|0)+ne(R,-4684)|0)+33685504>>18,g=((ne(g,-19081)+ne(L,-9719)|0)+ne(R,28800)|0)+33685504>>18,k){p[s+W|0]=g,p[a+W|0]=n;return}s=s+W|0,p[s|0]=(g+F[s|0]|0)+1>>>1,s=a+W|0,p[s|0]=(n+F[s|0]|0)+1>>>1}}function uh(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0;k=c[n+16>>2],H=c[n+12>>2],Ne=(H+1|0)/2|0,ee=c[s>>2],a=c[ee+20>>2],L=c[n+8>>2],R=c[ee+16>>2]+ne(L,a)|0,ce=c[(c[ee>>2]<<2)+11248>>2],g=c[n+28>>2],E=c[n+24>>2],W=c[n+20>>2];e:{if(!L){ft[ce|0](W,0,E,g,E,g,R,0,H),a=k;break e}ft[ce|0](c[s+4>>2],W,c[s+8>>2],c[s+12>>2],E,g,R-a|0,R,H),a=k+1|0}Ye=a,xe=k+L|0;e:{if((k|0)<3){a=E,k=g;break e}for(L=L+2|0;a=c[n+32>>2],W=(a<<1)+W|0,Tt=W-a|0,mt=E,Ot=g,E=c[n+36>>2],a=mt+E|0,k=g+E|0,g=c[ee+20>>2],R=(g<<1)+R|0,ft[ce|0](Tt,W,mt,Ot,a,k,R-g|0,R,H),g=k,E=a,L=L+2|0,(L|0)<(xe|0););}return g=c[n+32>>2]+W|0,(c[n+84>>2]+xe|0)<c[n+88>>2]?(Xr(c[s+4>>2],g,H),Xr(c[s+8>>2],a,Ne),Xr(c[s+12>>2],k,Ne),Ye+-1|0):(xe&1||ft[ce|0](g,0,a,k,a,k,c[ee+20>>2]+R|0,0,H),Ye|0)}function Dh(n,s){var a=0,g=0,k=0;e:{if(!n)break e;a=c[n+44>>2];t:{if((a|0)<0||(g=255,(a|0)<=100&&(a=ne(a,255),g=(a|0)/100|0,(a|0)<100)))break t;a=c[s+800>>2];i:{if((a|0)>=12){k=c[s+804>>2];break i}k=ne(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+804>>2]=k}a=c[s+832>>2];i:{if((a|0)>=12){a=c[s+836>>2];break i}a=ne(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+836>>2]=a}k=a|k,a=c[s+864>>2];i:{if((a|0)>=12){a=c[s+868>>2];break i}a=ne(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+868>>2]=a}k=a|k,a=c[s+896>>2];i:{if((a|0)>=12){g=c[s+900>>2];break i}g=ne(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+900>>2]=g}if(!(g|k))break t;g=s+544|0,Xr(g+8|0,9424,220),c[g>>2]=0,c[g+4>>2]=31,c[g+228>>2]=256,c[s+540>>2]=1}if(n=c[n+52>>2],c[s+2372>>2]=n,(n|0)>=101){c[s+2372>>2]=100;return}if((n|0)>-1)break e;c[s+2372>>2]=0}}function Lr(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((s|0)<1)return 0;for(a=c[n+8>>2],R=c[n+4>>2];;){e:{if((a|0)>-1)break e;if(g=c[n+12>>2],g>>>0<Qn[n+20>>2]){k=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),c[n+12>>2]=g+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8;break e}if(g>>>0<Qn[n+16>>2]){c[n+12>>2]=g+1,a=a+8|0,c[n+8>>2]=a,c[n>>2]=F[g|0]|c[n>>2]<<8;break e}if(!c[n+24>>2]){c[n+24>>2]=1,a=a+8|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<8;break e}a=0,c[n+8>>2]=0}g=s+-1|0,ee=n,ce=a,E=c[n>>2],W=E>>>a|0,L=R>>>1&16777215;e:{if(W>>>0>L>>>0){c[n>>2]=E+((L^-1)<<a),E=R-L|0;break e}E=L+1|0}if(k=Br(E)^24,a=ce-k|0,c[ee+8>>2]=a,R=(E<<k)+-1|0,c[n+4>>2]=R,H=(W>>>0>L>>>0)<<g|H,k=(s|0)>1,s=g,!k)break}return H}function Fc(n,s,a){var g=0;e:{if((n|0)==(s|0))break e;if((s-n|0)-a>>>0<=0-(a<<1)>>>0)return Xr(n,s,a);g=(n^s)&3;t:{i:{if(n>>>0<s>>>0){if(g){g=n;break t}if(!(n&3)){g=n;break i}for(g=n;;){if(!a)break e;if(p[g|0]=F[s|0],s=s+1|0,a=a+-1|0,g=g+1|0,!(g&3))break}break i}n:{if(g)break n;if(n+a&3)for(;;){if(!a)break e;if(a=a+-1|0,g=a+n|0,p[g|0]=F[s+a|0],!(g&3))break}if(a>>>0<=3)break n;for(;a=a+-4|0,c[a+n>>2]=c[s+a>>2],a>>>0>3;);}if(!a)break e;for(;a=a+-1|0,p[a+n|0]=F[s+a|0],!!a;);break e}if(a>>>0<=3)break t;for(;c[g>>2]=c[s>>2],s=s+4|0,g=g+4|0,a=a+-4|0,a>>>0>3;);}if(!a)break e;for(;p[g|0]=F[s|0],g=g+1|0,s=s+1|0,a=a+-1|0,!!a;);}return n}function rc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;for(g=n+-17|0,k=n+-18|0,E=n+-19|0,L=n+-20|0,R=n+-21|0,W=n+-22|0,H=n+-23|0,ee=n+-24|0,ce=n+-25|0,xe=n+-26|0,Ne=n+-27|0,Ye=n+-28|0,mt=n+-29|0,Tt=n+-30|0,Ot=n+-31|0,ni=n+-32|0,ci=c[2548]-F[n+-33|0]|0;s=F[n+-1|0]+ci|0,p[n|0]=F[s+F[ni|0]|0],p[n+1|0]=F[F[Ot|0]+s|0],p[n+2|0]=F[F[Tt|0]+s|0],p[n+3|0]=F[F[mt|0]+s|0],p[n+4|0]=F[F[Ye|0]+s|0],p[n+5|0]=F[F[Ne|0]+s|0],p[n+6|0]=F[F[xe|0]+s|0],p[n+7|0]=F[F[ce|0]+s|0],p[n+8|0]=F[F[ee|0]+s|0],p[n+9|0]=F[F[H|0]+s|0],p[n+10|0]=F[F[W|0]+s|0],p[n+11|0]=F[F[R|0]+s|0],p[n+12|0]=F[F[L|0]+s|0],p[n+13|0]=F[F[E|0]+s|0],p[n+14|0]=F[F[k|0]+s|0],p[n+15|0]=F[F[g|0]+s|0],n=n+32|0,a=a+1|0,(a|0)!=16;);}function Zo(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;e:{if(!a||(g=n+a|0,p[g+-1|0]=s,p[n|0]=s,a>>>0<3)||(p[g+-2|0]=s,p[n+1|0]=s,p[g+-3|0]=s,p[n+2|0]=s,a>>>0<7)||(p[g+-4|0]=s,p[n+3|0]=s,a>>>0<9)||(g=0-n&3,k=g+n|0,s=ne(s&255,16843009),c[k>>2]=s,a=a-g&-4,g=a+k|0,c[g+-4>>2]=s,a>>>0<9)||(c[k+8>>2]=s,c[k+4>>2]=s,c[g+-8>>2]=s,c[g+-12>>2]=s,a>>>0<25)||(c[k+24>>2]=s,c[k+20>>2]=s,c[k+16>>2]=s,c[k+12>>2]=s,c[g+-16>>2]=s,c[g+-20>>2]=s,c[g+-24>>2]=s,c[g+-28>>2]=s,L=k&4|24,a=a-L|0,a>>>0<32))break e;for(g=s,E=s,s=k+L|0;c[s+24>>2]=E,c[s+28>>2]=g,c[s+16>>2]=E,c[s+20>>2]=g,c[s+8>>2]=E,c[s+12>>2]=g,c[s>>2]=E,c[s+4>>2]=g,s=s+32|0,a=a+-32|0,a>>>0>31;);}return n|0}function Js(n,s,a){var g=0,k=0,E=0,L=0;g=Nn-144|0,Nn=g;e:{if(!a){E=2;break e}t:{if(!n){k=2;break t}c[a>>2]=0,c[a+4>>2]=0,c[a+32>>2]=0,c[a+36>>2]=0,c[a+24>>2]=0,c[a+28>>2]=0,L=a+16|0,E=L,c[E>>2]=0,c[E+4>>2]=0,k=a+8|0,c[k>>2]=0,c[k+4>>2]=0,E=3;i:switch(k=kl(n,s,a,a+4|0,k,a+12|0,L,0),k|0){case 7:break e;case 0:break i;default:break t}if(c[g+140>>2]=0,c[g+132>>2]=0,c[g+136>>2]=0,c[g+124>>2]=0,c[g+128>>2]=0,c[g+116>>2]=0,c[g+120>>2]=0,c[g+100>>2]=0,c[g+104>>2]=0,c[g+108>>2]=0,c[g+112>>2]=0,c[g+92>>2]=0,c[g+96>>2]=0,c[g+108>>2]=a+124,k=a+40|0,c[g+88>>2]=k,ud(k,a)){Hh(g),c[g>>2]=c[a+40>>2],c[g+4>>2]=c[a>>2],c[g+8>>2]=c[a+4>>2],c[g+88>>2]=g,E=ts(n,s,g+88|0),E||(E=Au(g,k)),kf(g);break e}E=ts(n,s,g+88|0);break e}E=k}return Nn=g+144|0,E}function Go(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0;g=Nn-32|0,Nn=g,k=c[n+28>>2],c[g+16>>2]=k,E=c[n+20>>2],c[g+28>>2]=a,c[g+24>>2]=s,s=E-k|0,c[g+20>>2]=s,k=s+a|0,H=2,s=g+16|0;e:{t:{i:{if(!Cf(Ou(c[n+60>>2],g+16|0,2,g+12|0)|0))for(;;){if(E=c[g+12>>2],(E|0)==(k|0))break i;if((E|0)<=-1)break t;if(L=c[s+4>>2],R=E>>>0>L>>>0,W=(R<<3)+s|0,L=E-(R?L:0)|0,c[W>>2]=L+c[W>>2],W=(R?12:4)+s|0,c[W>>2]=c[W>>2]-L,k=k-E|0,s=R?s+8|0:s,H=H-R|0,!!Cf(Ou(c[n+60>>2],s|0,H|0,g+12|0)|0))break}if(c[g+12>>2]=-1,(k|0)!=-1)break t}s=c[n+44>>2],c[n+28>>2]=s,c[n+20>>2]=s,c[n+16>>2]=s+c[n+48>>2],n=a;break e}if(c[n+28>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n>>2]=c[n>>2]|32,n=0,(H|0)==2)break e;n=a-c[s+4>>2]|0}return Nn=g+32|0,n|0}function Ga(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;E=ne(c[n+8>>2],c[n+52>>2]),L=c[n+80>>2],R=c[n+68>>2],s=c[n+24>>2];e:{if(!s){if((E|0)<1)break e;for(;a=cr(c[n+16>>2],0,c[(g<<2)+L>>2],0)+-2147483648|0,s=Fn,s=a>>>0<2147483648?s+1|0:s,p[g+R|0]=(s|0)>255?-1:s,g=g+1|0,(E|0)!=(g|0););break e}if(a=0-s|0,s=c[n+32>>2],s=gc(0,a,s,s>>31),(E|0)<1)break e;for(W=c[n+76>>2],H=s,ee=0-s|0;s=c[n+16>>2],a=g<<2,k=cr(ee,Ne,c[a+L>>2],0),ce=Fn,xe=s,s=k,k=cr(H,Ye,c[a+W>>2],0),a=s+k|0,s=Fn+ce|0,s=a>>>0<k>>>0?s+1|0:s,k=a+-2147483648|0,a=cr(xe,0,k>>>0<2147483648?s+1|0:s,0)+-2147483648|0,s=Fn,s=a>>>0<2147483648?s+1|0:s,p[g+R|0]=(s|0)>255?-1:s,g=g+1|0,(E|0)!=(g|0););}}function oc(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0;if((a|0)>=1)for(k=c[g+-4>>2];ee=H<<2,E=ee+s|0,L=c[E>>2],E=c[E+-4>>2],W=E&255,ce=(L&255)-W|0,xe=(k&255)-W|0,W=xe>>31,Ne=E>>>24|0,Ye=(k>>>24|0)-Ne|0,mt=Ye>>31,Tt=E>>>8&255,Ot=(k>>>8&255)-Tt|0,R=Ot>>31,ni=E>>>16&255,ci=(k>>>16&255)-ni|0,E=ci>>31,Mi=k,k=(L>>>24|0)-Ne|0,R=((((W^W+xe)+((ce|0)<0?ce:0-ce|0)|0)+(mt^mt+Ye)|0)+((k|0)<0?k:0-k|0)|0)+(R^R+Ot)|0,k=(L>>>8&255)-Tt|0,R=(R+((k|0)<0?k:0-k|0)|0)+(E^E+ci)|0,k=(L>>>16&255)-ni|0,k=(R+((k|0)<0?k:0-k|0)|0)<1?L:Mi,L=c[n+ee>>2],k=(k&-16711936)+(L&-16711936)&-16711936|(k&16711935)+(L&16711935)&16711935,c[g+ee>>2]=k,H=H+1|0,(H|0)!=(a|0););}function bu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0;E=c[n+104>>2];e:{if(!E)break e;k=c[n+16>>2],g=c[n+8>>2],L=c[s>>2];t:{if(!c[n+56>>2]){s=g;break t}i:{if(!g){a=k+-1|0,s=0;break i}E=E-c[n>>2]|0,a=k,s=g+-1|0}if(g=g+k|0,k=c[n+84>>2],g=g+k|0,(g|0)!=c[n+88>>2]){k=a;break t}k=g-(s+k|0)|0}if((k|0)<1)break e;for(R=c[n+12>>2],ce=c[L>>2],a=c[L+20>>2],H=c[L+16>>2]+ne(a,s)|0,W=H+1|0,s=15;;){if(g=0,(R|0)>=1){for(;a=(g<<1)+W|0,xe=a,Ne=F[a|0]&240,a=F[g+E|0]>>>4|0,p[xe|0]=Ne|a,s=s&a,g=g+1|0,(R|0)!=(g|0););a=c[L+20>>2]}if(W=a+W|0,E=c[n>>2]+E|0,ee=ee+1|0,(ee|0)==(k|0))break}if((s|0)==15|ce+-7>>>0>3)break e;ft[c[2665]](H,R,k,a)}return 0}function wu(n,s,a){e:{t:{if(s>>>0>20)break t;i:switch(s+-9|0){case 0:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=c[s>>2];return;case 1:s=c[a>>2],c[a>>2]=s+4,s=c[s>>2],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 2:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=c[s>>2],c[n+4>>2]=0;return;case 4:s=c[a>>2],c[a>>2]=s+4,s=Di[s>>1],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 5:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=mn[s>>1],c[n+4>>2]=0;return;case 6:s=c[a>>2],c[a>>2]=s+4,s=p[s|0],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 7:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=F[s|0],c[n+4>>2]=0;return;case 3:case 8:break e;case 9:break i;default:break t}ft[0](n,a)}return}s=c[a>>2]+7&-8,c[a>>2]=s+8,a=c[s+4>>2],c[n>>2]=c[s>>2],c[n+4>>2]=a}function Xl(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0;k=c[n+16>>2],E=c[s+24>>2],a=c[c[s>>2]>>2];e:{if(a+-7>>>0>3&&!(1<<a&4154&&a>>>0<=12)||(a=c[n+104>>2],!a))break e;jc(c[n+20>>2],c[n+32>>2],a,c[n>>2],c[n+12>>2],k,0)}if((k|0)<1)return 0;for(L=k+1>>1,R=c[n+32>>2],g=c[n+20>>2],a=k;W=vs(E,a,g,R),g=ne(W,R)+g|0,H=dc(E)+H|0,a=a-W|0,(a|0)>0;);if((k|0)>=1){for(k=c[s+28>>2],E=c[n+36>>2],g=c[n+24>>2],a=L;R=vs(k,a,g,E),dc(k),g=ne(E,R)+g|0,a=a-R|0,(a|0)>0;);for(g=c[n+28>>2],s=c[s+32>>2],n=c[n+36>>2];a=vs(s,L,g,n),dc(s),g=ne(n,a)+g|0,L=L-a|0,(L|0)>0;);}return H|0}function no(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0;e:{if(!(c[n+24>>2]|(s|0)>24)){if(a=c[n+20>>2],k=a+s|0,c[n+20>>2]=k,R=c[(s<<2)+9312>>2],L=c[n+4>>2],g=L,s=a&63,a=s&31,E=c[n>>2],H=R&(32<=(s&63)>>>0?g>>>a|0:((1<<a)-1&g)<<32-a|E>>>a),(k|0)<8)break e;for(s=c[n+16>>2],W=c[n+12>>2],R=s>>>0>W>>>0?s:W;;){t:{if((s|0)==(R|0)){s=R,g=k;break t}if(g=L,E=(g&255)<<24|E>>>8,g=g>>>8|0,L=g,c[n>>2]=E,c[n+4>>2]=g,a=F[c[n+8>>2]+s|0],g=k+-8|0,c[n+20>>2]=g,s=s+1|0,c[n+16>>2]=s,a=L|a<<24,L=a,c[n>>2]=E,c[n+4>>2]=a,a=(k|0)>15,k=g,a)continue}break}if((s|0)!=(W|0)|(g|0)<65)break e;return c[n+20>>2]=0,c[n+24>>2]=1,H}c[n+20>>2]=0,c[n+24>>2]=1}return H}function va(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;k=ne(c[n+8>>2],c[n+52>>2]),L=c[n+76>>2],R=c[n+68>>2],s=ne(c[n+24>>2],c[n+16>>2]);e:{if(s){if((k|0)<1)break e;for(E=c[n+80>>2],ee=0-s|0,s=0;g=c[n+20>>2],a=s<<2,W=a+L|0,ce=c[W>>2],cr(c[a+E>>2],0,ee,0),H=Fn,g=cr(g,0,ce-H|0,0)+-2147483648|0,a=Fn,a=g>>>0<2147483648?a+1|0:a,p[s+R|0]=(a|0)>255?-1:a,c[W>>2]=H,s=s+1|0,(k|0)!=(s|0););break e}if((k|0)<1)break e;for(s=0;E=(s<<2)+L|0,g=cr(c[n+20>>2],0,c[E>>2],0)+-2147483648|0,a=Fn,a=g>>>0<2147483648?a+1|0:a,p[s+R|0]=(a|0)>255?-1:a,c[E>>2]=0,s=s+1|0,(k|0)!=(s|0););}}function Ro(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0;if((a|0)>=1)for(E=c[g+-4>>2];W=R<<2,L=W+s|0,k=c[L>>2],E=((k^E)>>>1&2139062143)+(k&E)|0,k=E&255,L=c[L+-4>>2],k=((k-(L&255)|0)/2|0)+k|0,H=k>>>0<256?k:(k^-1)>>>24|0,k=E>>>24|0,k=((k-(L>>>24|0)|0)/2|0)+k|0,H=H|(k>>>0<256?k:k>>>24^-1)<<24,k=E>>>16&255,k=((k-(L>>>16&255)|0)/2|0)+k|0,E=E>>>8&255,E=((E-(L>>>8&255)|0)/2|0)+E|0,E=H|(k>>>0<256?k:(k^-1)>>>24|0)<<16|(E>>>0<256?E:(E^-1)>>>24|0)<<8,L=c[n+W>>2],E=(E&-16711936)+(L&-16711936)&-16711936|(E&16711935)+(L&16711935)&16711935,c[g+W>>2]=E,R=R+1|0,(R|0)!=(a|0););}function xu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0;g=c[n+36>>2];e:{if(c[g+64>>2]>=c[g+56>>2])break e;E=c[n>>2],ee=c[E>>2]+-7|0,k=c[E+20>>2],H=c[E+16>>2]+ne(k,s)|0,R=c[g+52>>2],s=15;t:{if((a|0)<1|c[g+24>>2]>0)break t;for(W=H+1|0;;){if(Ni(g),g=0,(R|0)>=1)for(;k=(g<<1)+W|0,ce=k,xe=F[k|0]&240,k=F[c[c[n+36>>2]+68>>2]+g|0]>>>4|0,p[ce|0]=xe|k,s=s&k,g=g+1|0,(R|0)!=(g|0););if(k=c[E+20>>2],g=c[n+36>>2],L=L+1|0,c[g+64>>2]>=c[g+56>>2]|(L|0)>=(a|0))break t;if(W=k+W|0,!(c[g+24>>2]<=0))break}}if((s|0)==15|ee>>>0>3)break e;ft[c[2665]](H,R,L,k)}return L|0}function Au(n,s){var a=0,g=0;c[s+4>>2]=c[n+4>>2],c[s+8>>2]=c[n+8>>2],a=2;e:{if(Yo(s))break e;a=c[n+16>>2],g=c[n>>2];t:{if(g>>>0<=10){Ll(a,c[n+20>>2],c[s+16>>2],c[s+20>>2],ne(c[n+4>>2],F[g+1157|0]),c[n+8>>2]);break t}if(Ll(a,c[n+32>>2],c[s+16>>2],c[s+32>>2],c[n+4>>2],c[n+8>>2]),Ll(c[n+20>>2],c[n+36>>2],c[s+20>>2],c[s+36>>2],(c[n+4>>2]+1|0)/2|0,(c[n+8>>2]+1|0)/2|0),Ll(c[n+24>>2],c[n+40>>2],c[s+24>>2],c[s+40>>2],(c[n+4>>2]+1|0)/2|0,(c[n+8>>2]+1|0)/2|0),g=c[n>>2],!(1<<g&4154&&g>>>0<=12)&&(a=0,g+-7>>>0>3))break e;Ll(c[n+28>>2],c[n+44>>2],c[s+28>>2],c[s+44>>2],c[n+4>>2],c[n+8>>2])}a=0}return a}function Rc(n,s){var a=0,g=0,k=0,E=0;e:{if(c[n+2308>>2]<1||(a=c[n+2300>>2],(a|0)<c[n+300>>2]))break e;g=(a|0)<=c[n+308>>2]}a=n+160|0;e:{if(!c[n+148>>2]){c[n+168>>2]=g,c[n+164>>2]=c[n+2300>>2],Fu(n,a),E=fs(n,s);break e}if(k=n+124|0,!(ft[c[2559]](k)&1))break e;Xr(n+180|0,s,108),c[n+168>>2]=g,c[n+160>>2]=c[n+152>>2],c[n+164>>2]=c[n+2300>>2];t:{if(c[n+148>>2]==2){s=c[n+2304>>2],a=n+176|0,c[n+2304>>2]=c[a>>2],c[a>>2]=s;break t}Fu(n,a)}return g&&(s=c[n+2260>>2],g=n+172|0,c[n+2260>>2]=c[g>>2],c[g>>2]=s),ft[c[2560]](k),s=c[n+152>>2]+1|0,c[n+152>>2]=(s|0)==c[n+156>>2]?0:s,1}return E}function Oh(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0,ee=0;if((a|0)>=1)for(k=c[g+-4>>2];H=W<<2,L=H+s|0,R=c[L>>2],L=c[L+-4>>2],E=((R&255)+(k&255)|0)-(L&255)|0,ee=E>>>0<256?E:(E^-1)>>>24|0,E=(R>>>24)+(k>>>24)-(L>>>24)|0,ee=ee|(E>>>0<256?E:E>>>24^-1)<<24,E=((R>>>16&255)+(k>>>16&255)|0)-(L>>>16&255)|0,k=((R>>>8&255)+(k>>>8&255)|0)-(L>>>8&255)|0,k=ee|(E>>>0<256?E:(E^-1)>>>24|0)<<16|(k>>>0<256?k:(k^-1)>>>24|0)<<8,R=c[n+H>>2],k=(k&-16711936)+(R&-16711936)&-16711936|(k&16711935)+(R&16711935)&16711935,c[g+H>>2]=k,W=W+1|0,(W|0)!=(a|0););}function ll(n,s,a,g,k,E,L,R,W){var H=0,ee=0,ce=0,xe=0;c[n+72>>2]=L,c[n+68>>2]=g,c[n+60>>2]=0,c[n+64>>2]=0,c[n+56>>2]=E,c[n+52>>2]=k,c[n+48>>2]=a,c[n+44>>2]=s,c[n+8>>2]=R,L=(a|0)<(E|0),c[n+4>>2]=L,H=(s|0)<(k|0),c[n>>2]=H,ee=H?s+-1|0:k,c[n+40>>2]=ee,g=H?k+-1|0:s,c[n+36>>2]=g,H||(ce=n,xe=gc(0,1,ee,ee>>31),c[ce+12>>2]=xe),s=E-L|0,c[n+32>>2]=s,a=a-L|0,c[n+28>>2]=a;e:{if(!L){c[n+24>>2]=a,a=ne(a,g),a=gc(0,E,a,a>>31),g=Fn,c[n+20>>2]=(g|0)==1&a>>>0<0|g>>>0<1?a:0;break e}c[n+24>>2]=s,s=g}c[n+76>>2]=W,ce=n,xe=gc(0,1,s,s>>31),c[ce+16>>2]=xe,s=n,n=ne(k,R),c[s+80>>2]=(n<<2)+W,Zo(W,0,n<<3),wa()}function Fh(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0;E=F[n+-31|0],s=E+1|0,a=F[n+-30|0],k=s+a>>>1|0,p[n+64|0]=k,R=F[n+-32|0],p[n|0]=R+s>>>1,s=F[n+-29|0],g=(s+a|0)+1>>>1|0,p[n+65|0]=g,p[n+1|0]=k,k=F[n+-28|0],L=(k+s|0)+1>>>1|0,p[n+66|0]=L,p[n+2|0]=g,p[n+3|0]=L,g=s+2|0,L=(g+E|0)+(a<<1)>>>2|0,p[n+96|0]=L,a=a+2|0,p[n+32|0]=(a+R|0)+(E<<1)>>>2,E=k+(a+(s<<1)|0)>>>2|0,p[n+97|0]=E,p[n+33|0]=L,R=F[n+-25|0],a=F[n+-26|0],s=F[n+-27|0],g=s+(g+(k<<1)|0)>>>2|0,p[n+98|0]=g,p[n+34|0]=E,p[n+99|0]=(R+(s+(a<<1)|0)|0)+2>>>2,p[n+67|0]=(a+(k+(s<<1)|0)|0)+2>>>2,p[n+35|0]=g}function ul(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0;L=F[n+63|0],g=F[n+31|0],a=(L+g|0)+1>>>1|0,p[n+98|0]=a,R=F[n+95|0],p[n+96|0]=(R+L|0)+1>>>1,p[n+64|0]=a,k=F[n+-1|0],s=k+1|0,a=F[n+-33|0],E=s+a>>>1|0,p[n+34|0]=E,s=s+g>>>1|0,p[n+66|0]=s,p[n|0]=E,p[n+32|0]=s,s=F[n+-32|0],E=k+2|0,W=s+(E+(a<<1)|0)>>>2|0,p[n+35|0]=W,H=F[n+-31|0],p[n+3|0]=(F[n+-30|0]+(s+(H<<1)|0)|0)+2>>>2,p[n+2|0]=((a+(s<<1)|0)+H|0)+2>>>2,s=k<<1,k=g+2|0,a=a+(s+k|0)>>>2|0,p[n+67|0]=a,p[n+1|0]=W,g=(L+E|0)+(g<<1)>>>2|0,p[n+99|0]=g,p[n+33|0]=a,p[n+97|0]=(k+R|0)+(L<<1)>>>2,p[n+65|0]=g}function sc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0;g=F[n+-32|0],k=g+1|0,s=F[n+-33|0],a=k+s>>>1|0,p[n+65|0]=a,E=F[n+-31|0],L=k+E>>>1|0,p[n+66|0]=L,p[n|0]=a,k=F[n+-30|0],a=(k+E|0)+1>>>1|0,p[n+67|0]=a,p[n+1|0]=L,L=F[n+-29|0],p[n+3|0]=(L+k|0)+1>>>1,p[n+2|0]=a,a=F[n+-1|0],R=a+2|0,W=F[n+31|0],p[n+96|0]=(R+F[n+63|0]|0)+(W<<1)>>>2,R=g+(R+(s<<1)|0)>>>2|0,p[n+97|0]=R,s=s+2|0,p[n+64|0]=(s+W|0)+(a<<1)>>>2,s=(s+(g<<1)|0)+E>>>2|0,p[n+98|0]=s,p[n+32|0]=R,g=(k+(g+(E<<1)|0)|0)+2>>>2|0,p[n+99|0]=g,p[n+33|0]=s,p[n+35|0]=(L+((k<<1)+E|0)|0)+2>>>2,p[n+34|0]=g}function $n(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;g=c[n+36>>2];e:{if(c[g+64>>2]>=c[g+56>>2])break e;E=c[n>>2],k=c[E>>2],R=(k|0)==4|(k|0)==9,ce=k+-7|0,L=c[E+20>>2],W=c[E+16>>2]+ne(L,s)|0,H=c[g+52>>2],k=0,s=0;t:{if((a|0)<1||(s=0,c[g+24>>2]>0))break t;for(s=(R?0:3)+W|0;;){i:{if(Ni(g),ee=ft[c[2666]](c[c[n+36>>2]+68>>2],0,H,1,s,0)|ee,L=c[E+20>>2],g=c[n+36>>2],k=k+1|0,c[g+64>>2]>=c[g+56>>2]|(k|0)>=(a|0))break i;if(s=s+L|0,c[g+24>>2]<=0)continue}break}s=(ee|0)!=0}if(!s|ce>>>0>3)break e;ft[c[2664]](W,R,H,k,L)}return k|0}function ur(n,s,a){var g=0,k=0,E=0;g=Nn-208|0,Nn=g,c[g+204>>2]=a,a=0,Zo(g+160|0,0,40),c[g+200>>2]=c[g+204>>2];e:{if((At(0,s,g+200|0,g+80|0,g+160|0)|0)<0)break e;a=c[n+76>>2]>=0?1:a,k=c[n>>2],p[n+74|0]<=0&&(c[n>>2]=k&-33),E=k&32;t:{if(c[n+48>>2]){At(n,s,g+200|0,g+80|0,g+160|0);break t}if(c[n+48>>2]=80,c[n+16>>2]=g+80,c[n+28>>2]=g,c[n+20>>2]=g,k=c[n+44>>2],c[n+44>>2]=g,At(n,s,g+200|0,g+80|0,g+160|0),!k)break t;ft[c[n+36>>2]](n,0,0)|0,c[n+48>>2]=0,c[n+44>>2]=k,c[n+28>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0}if(c[n>>2]=E|c[n>>2],!a)break e}Nn=g+208|0}function Vu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;k=c[s>>2],E=c[k+28>>2],W=c[s+16>>2],L=c[k+44>>2],R=E+ne(W,L)|0,g=c[n+104>>2];e:{if(g){if(a=c[n+16>>2],(a|0)<1)break e;for(ee=c[k+32>>2],E=c[s+36>>2],L=c[n>>2],ce=c[k+16>>2],n=0;H=vs(E,a,g,L),g=ne(L,H)+g|0,n=dc(E)+n|0,a=a-H|0,(a|0)>0;);if((n|0)<1)break e;return jc(ne(W,ee)+ce|0,c[k+32>>2],R,c[k+44>>2],c[c[s+36>>2]+52>>2],n,1),0}if(!E|(a|0)<1)break e;for(n=c[n+96>>2],g=0;R=Zo(R,255,n)+L|0,g=g+1|0,(g|0)!=(a|0););}return 0}function ac(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;a=F[n+31|0],g=a+2|0,s=F[n+63|0],p[n+96|0]=F[n+95|0]+(g+(s<<1)|0)>>>2,E=a<<1,a=F[n+-1|0],k=a+2|0,s=s+(E+k|0)>>>2|0,p[n+97|0]=s,p[n+64|0]=s,s=g+(a<<1)|0,a=F[n+-33|0],s=s+a>>>2|0,p[n+98|0]=s,p[n+65|0]=s,p[n+32|0]=s,g=F[n+-32|0],s=(g+k|0)+(a<<1)>>>2|0,p[n+99|0]=s,p[n+66|0]=s,p[n+33|0]=s,p[n|0]=s,E=F[n+-29|0],s=F[n+-30|0],k=a,a=F[n+-31|0],k=((k+a|0)+(g<<1)|0)+2>>>2|0,p[n+67|0]=k,p[n+34|0]=k,p[n+1|0]=k,g=((s+g|0)+(a<<1)|0)+2>>>2|0,p[n+35|0]=g,p[n+2|0]=g,p[n+3|0]=((a+E|0)+(s<<1)|0)+2>>>2}function vs(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;e:{if((s|0)<1)break e;for(;;){if(c[n+24>>2]<1&&c[n+64>>2]<c[n+56>>2])break e;if(c[n+4>>2]&&(ee=n,ce=gp(c[n+76>>2],c[n+80>>2]),c[ee+76>>2]=ce,c[n+80>>2]=Fn),lp(n,a),!(c[n+4>>2]|(ne(c[n+52>>2],c[n+8>>2])|0)<1))for(W=c[n+76>>2],H=c[n+80>>2],k=0;L=k<<2,R=L+W|0,c[R>>2]=c[R>>2]+c[H+L>>2],k=k+1|0,(k|0)<(ne(c[n+52>>2],c[n+8>>2])|0););if(c[n+60>>2]=c[n+60>>2]+1,c[n+24>>2]=c[n+24>>2]-c[n+32>>2],a=a+g|0,E=E+1|0,(E|0)==(s|0))break}E=s}return E}function Uo(n){var s=0,a=0,g=0;if(n){if(s=n+160|0,jr(c[s>>2]),jr(c[n+172>>2]),a=n+168|0,If(c[a>>2]),yc(n+124|0),g=n+136|0,yc(g),c[a>>2]=0,c[a+4>>2]=0,c[s>>2]=0,c[s+4>>2]=0,c[n+152>>2]=0,c[n+156>>2]=0,c[n+144>>2]=0,c[n+148>>2]=0,c[g>>2]=0,c[g+4>>2]=0,c[n+128>>2]=0,c[n+132>>2]=0,c[n+120>>2]=0,c[n+124>>2]=0,jr(c[n+16>>2]),s=0,c[n+16>>2]=0,c[n+176>>2]>=1)for(;a=(ne(s,20)+n|0)+196|0,jr(c[a>>2]),c[a>>2]=0,s=s+1|0,(s|0)<c[n+176>>2];);c[n+260>>2]=0,c[n+176>>2]=0,jr(c[n+264>>2]),c[n+12>>2]=0,c[n+264>>2]=0}}function Yl(){c[2545]!=c[2673]&&(c[2703]=32,c[2674]=33,c[2706]=34,c[2704]=35,c[2705]=36,c[2707]=37,c[2708]=38,c[2712]=39,c[2709]=40,c[2710]=41,c[2714]=42,c[2716]=43,c[2717]=44,c[2718]=45,c[2719]=46,c[2713]=47,c[2711]=48,c[2715]=49,c[2690]=50,c[2688]=51,c[2686]=52,c[2685]=53,c[2684]=54,c[2693]=55,c[2692]=56,c[2691]=57,c[2689]=58,c[2687]=59,c[2682]=60,c[2681]=61,c[2680]=62,c[2679]=63,c[2678]=64,c[2677]=65,c[2676]=66,c[2702]=67,c[2701]=68,c[2700]=69,c[2699]=70,c[2698]=71,c[2697]=72,c[2696]=73,c[2720]=74,c[2545]=c[2673])}function cl(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;s=F[n+-29|0],k=s+2|0,g=F[n+-31|0],a=F[n+-30|0],E=(k+g|0)+(a<<1)>>>2|0,p[n+32|0]=E,a=a+2|0,p[n|0]=(a+F[n+-32|0]|0)+(g<<1)>>>2,g=F[n+-28|0],a=g+(a+(s<<1)|0)>>>2|0,p[n+64|0]=a,p[n+1|0]=E,p[n+33|0]=a,s=k+(g<<1)|0,k=F[n+-27|0],s=s+k>>>2|0,p[n+96|0]=s,p[n+2|0]=a,p[n+65|0]=s,p[n+34|0]=s,p[n+3|0]=s,s=F[n+-26|0],g=(s+(g+(k<<1)|0)|0)+2>>>2|0,p[n+97|0]=g,a=F[n+-25|0],k=(a+(k+(s<<1)|0)|0)+2>>>2|0,p[n+98|0]=k,p[n+35|0]=g,p[n+66|0]=g,p[n+99|0]=((a+s|0)+(a<<1)|0)+2>>>2,p[n+67|0]=k}function ch(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;a=F[n+63|0],s=a+2|0,E=F[n+95|0],g=ne((s+E|0)+(E<<1)>>>2|0,16843009),p[n+96|0]=g,p[n+97|0]=g>>>8,p[n+98|0]=g>>>16,p[n+99|0]=g>>>24,k=F[n+31|0],g=k+2|0,a=ne(E+(g+(a<<1)|0)>>>2|0,16843009),p[n+64|0]=a,p[n+65|0]=a>>>8,p[n+66|0]=a>>>16,p[n+67|0]=a>>>24,E=s,s=F[n+-1|0],k=ne((E+s|0)+(k<<1)>>>2|0,16843009),p[n+32|0]=k,p[n+33|0]=k>>>8,p[n+34|0]=k>>>16,p[n+35|0]=k>>>24,s=ne((F[n+-33|0]+g|0)+(s<<1)>>>2|0,16843009),p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24}function Zl(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if(p[k|0]=F[n|0],(s|0)>=2)for(R=s+-1|0,W=k+1|0,L=n+1|0;p[E+W|0]=F[E+L|0]-F[n+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(ee=g^-1,ce=(s|0)<2,W=1;;){if(k=g+k|0,R=n+g|0,p[k|0]=F[R|0]-F[n|0],E=1,!ce)for(;H=E+R|0,L=(F[n+E|0]+F[H+-1|0]|0)-F[R+(E+ee|0)|0]|0,L=(L|0)>0?L:0,p[k+E|0]=F[H|0]-((L|0)<255?L:255),E=E+1|0,(E|0)!=(s|0););if(n=R,W=W+1|0,(W|0)==(a|0))break}}function is(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;W=F[a+R|0],ce=F[s+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E|0]=255,H=ne(H,19077)>>>8|0,ee=H+(ne(ce,33050)>>>8|0)|0,L=ee+-17685|0,p[E+3|0]=L>>>0<16384?L>>>6|0:ee>>>0<17685?0:255,ee=H+(ne(W,26149)>>>8|0)|0,L=ee+-14234|0,p[E+1|0]=L>>>0<16384?L>>>6|0:ee>>>0<14234?0:255,L=E,E=H-(ne(ce,6419)>>>8|0)-(ne(W,13320)>>>8)|0,W=E+8708|0,p[L+2|0]=W>>>0<16384?W>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function ps(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;W=F[s+R|0],ce=F[a+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E+3|0]=255,H=ne(H,19077)>>>8|0,ee=H+(ne(ce,26149)>>>8|0)|0,L=ee+-14234|0,p[E+2|0]=L>>>0<16384?L>>>6|0:ee>>>0<14234?0:255,ee=H+(ne(W,33050)>>>8|0)|0,L=ee+-17685|0,p[E|0]=L>>>0<16384?L>>>6|0:ee>>>0<17685?0:255,L=E,E=H-(ne(W,6419)>>>8|0)-(ne(ce,13320)>>>8)|0,W=E+8708|0,p[L+1|0]=W>>>0<16384?W>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function hh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;W=F[a+R|0],ce=F[s+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E+3|0]=255,H=ne(H,19077)>>>8|0,ee=H+(ne(ce,33050)>>>8|0)|0,L=ee+-17685|0,p[E+2|0]=L>>>0<16384?L>>>6|0:ee>>>0<17685?0:255,ee=H+(ne(W,26149)>>>8|0)|0,L=ee+-14234|0,p[E|0]=L>>>0<16384?L>>>6|0:ee>>>0<14234?0:255,L=E,E=H-(ne(ce,6419)>>>8|0)-(ne(W,13320)>>>8)|0,W=E+8708|0,p[L+1|0]=W>>>0<16384?W>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function la(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;H=(R<<1)+g|0,W=ne(F[n+R|0],19077)>>>8|0,E=F[a+R|0],ee=W+(ne(E,26149)>>>8|0)|0,L=ee+-14234|0,ce=(L>>>0<16384?L>>>6|0:ee>>>0<14234?0:248)&248,ee=F[s+R|0],E=W-(ne(ee,6419)>>>8|0)-(ne(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[H|0]=ce|E>>>5,L=H,W=W+(ne(ee,33050)>>>8|0)|0,H=W+-17685|0,p[L+1|0]=E<<3&224|(H>>>0<16384?H>>>9|0:W>>>0<17685?0:31),R=R+1|0,(R|0)!=(k|0););}function B(n,s){var a=0,g=0,k=0,E=0,L=0;g=c[n+8>>2],L=c[g+40>>2],a=c[(Qn[L+12>>2]<2?g+84|0:n+108|0)>>2],k=c[n+108>>2],a=(k|0)<(a|0)?a:k;e:{if((a|0)>=(s|0)||(k=c[g>>2],g=c[L+136>>2]+ne(k,a)|0,zi(n+180|0,a,s,c[n+16>>2]+ne(a,c[n+100>>2])|0,g),E=c[L+12>>2],!E))break e;ft[c[(E<<2)+10912>>2]](c[L+140>>2],g,g,k),E=a+1|0;t:{if((E|0)==(s|0)){a=g;break t}for(;a=g+k|0,ft[c[(c[L+12>>2]<<2)+10912>>2]](g,a,a,k),g=a,E=E+1|0,(E|0)!=(s|0););}c[L+140>>2]=a}c[n+108>>2]=s,c[n+116>>2]=s}function d(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0;if(E=c[n+8>>2],(E|0)>=1)for(ee=ne(c[n+52>>2],E);;){if((L|0)<(ee|0))for(xe=c[n+80>>2],g=0,k=0,R=L,W=L;;){if(ce=c[n+40>>2],H=0,g=c[n+36>>2]+g|0,(g|0)>=1){for(;H=F[s+W|0],k=H+k|0,a=W+E|0,W=a,g=g-ce|0,(g|0)>0;);W=a}if(a=ne(g,H),c[(R<<2)+xe>>2]=a+ne(k,ce),k=cr(c[n+12>>2],0,0-a|0,0)+-2147483648|0,a=Fn,k=k>>>0<2147483648?a+1|0:a,R=E+R|0,!((R|0)<(ee|0)))break}if(L=L+1|0,(E|0)==(L|0))break}}function I(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+-32|0],g=c[2548]-F[n+-33|0]|0,s=g+F[n+-1|0]|0,p[n|0]=F[a+s|0],k=F[n+-31|0],p[n+1|0]=F[s+k|0],E=F[n+-30|0],p[n+2|0]=F[s+E|0],L=F[n+-29|0],p[n+3|0]=F[s+L|0],s=g+F[n+31|0]|0,p[n+32|0]=F[s+a|0],p[n+33|0]=F[s+k|0],p[n+34|0]=F[s+E|0],p[n+35|0]=F[s+L|0],s=g+F[n+63|0]|0,p[n+64|0]=F[s+a|0],p[n+65|0]=F[s+k|0],p[n+66|0]=F[s+E|0],p[n+67|0]=F[s+L|0],s=a,a=g+F[n+95|0]|0,p[n+96|0]=F[s+a|0],p[n+97|0]=F[a+k|0],p[n+98|0]=F[a+E|0],p[n+99|0]=F[a+L|0]}function D(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;R=F[a+E|0],W=(E<<1)+g|0,L=ne(F[n+E|0],19077)>>>8|0,ce=F[s+E|0],H=L+(ne(ce,33050)>>>8|0)|0,ee=H+-17685|0,p[W+1|0]=(ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:240)|15,ee=W,W=L+(ne(R,26149)>>>8|0)|0,H=W+-14234|0,R=L-(ne(ce,6419)>>>8|0)-(ne(R,13320)>>>8)|0,L=R+8708|0,p[ee|0]=(H>>>0<16384?H>>>6|0:W>>>0<14234?0:240)&240|(L>>>0<16384?L>>>10|0:(R|0)<-8708?0:15),E=E+1|0,(E|0)!=(k|0););}function z(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0;k=c[n+104>>2];e:{if(!k)break e;E=c[s>>2],L=c[E>>2],W=(L|0)==4|(L|0)==9,s=c[n+16>>2],g=c[n+8>>2],H=c[n+12>>2];t:{if(!c[n+56>>2]){R=g;break t}if(g?(R=g+-1|0,k=k-c[n>>2]|0,a=s):a=s+-1|0,s=s+g|0,g=c[n+84>>2],s=s+g|0,(s|0)!=c[n+88>>2]){s=a;break t}s=s-(g+R|0)|0}if(g=c[n>>2],n=c[E+20>>2],a=c[E+16>>2]+ne(n,R)|0,!(ft[c[2666]](k,g,H,s,a+(W?0:3)|0,n)|0)|L+-7>>>0>3)break e;ft[c[2664]](a,W,H,s,c[E+20>>2])}return 0}function X(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;W=F[s+L|0],R=ne(L,3)+g|0,ee=ne(F[n+L|0],19077)>>>8|0,ce=F[a+L|0],E=ee+(ne(ce,26149)>>>8|0)|0,H=E+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=ee+(ne(W,33050)>>>8|0)|0,H=E+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=R,W=ee-(ne(W,6419)>>>8|0)-(ne(ce,13320)>>>8)|0,R=W+8708|0,p[E+1|0]=R>>>0<16384?R>>>6|0:(W|0)<-8708?0:255,L=L+1|0,(L|0)!=(k|0););}function ie(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;W=F[a+L|0],R=ne(L,3)+g|0,ee=ne(F[n+L|0],19077)>>>8|0,ce=F[s+L|0],E=ee+(ne(ce,33050)>>>8|0)|0,H=E+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=ee+(ne(W,26149)>>>8|0)|0,H=E+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=R,W=ee-(ne(ce,6419)>>>8|0)-(ne(W,13320)>>>8)|0,R=W+8708|0,p[E+1|0]=R>>>0<16384?R>>>6|0:(W|0)<-8708?0:255,L=L+1|0,(L|0)!=(k|0););}function de(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0;return g=c[s>>2],s=c[s+-4>>2],a=s&255,k=(g&255)-a|0,E=(n&255)-a|0,a=E>>31,L=s>>>24|0,R=(n>>>24|0)-L|0,W=R>>31,H=s>>>8&255,ee=(n>>>8&255)-H|0,ce=ee>>31,xe=s>>>16&255,Ne=(n>>>16&255)-xe|0,s=Ne>>31,Ye=n,n=(g>>>24|0)-L|0,a=((((a^a+E)+((k|0)<0?k:0-k|0)|0)+(W^W+R)|0)+((n|0)<0?n:0-n|0)|0)+(ce^ce+ee)|0,n=(g>>>8&255)-H|0,s=(a+((n|0)<0?n:0-n|0)|0)+(s^s+Ne)|0,n=(g>>>16&255)-xe|0,((s+((n|0)<0?n:0-n|0)|0)<1?g:Ye)|0}function _e(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if(k=c[n+8>>2],(k|0)>=1)for(ee=ne(c[n+52>>2],k),ce=c[n+80>>2];;){if(a=k+L|0,g=c[n+36>>2],R=F[s+L|0],E=R,E=c[n+44>>2]>=2?F[s+a|0]:E,c[(L<<2)+ce>>2]=ne(g,R),W=a,(a|0)<(ee|0))for(;;){g=g-c[n+40>>2]|0;e:{if((g|0)>=0){H=c[n+36>>2];break e}H=c[n+36>>2],g=H+g|0,R=E,W=k+W|0,E=F[W+s|0]}if(c[(a<<2)+ce>>2]=ne(E,H)+ne(R-E|0,g),a=a+k|0,!((a|0)<(ee|0)))break}if(L=L+1|0,(L|0)==(k|0))break}}function Ae(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0;g=c[n+20>>2];e:{if((g|0)<8){s=g;break e}for(a=c[n+16>>2],s=c[n+12>>2],R=a>>>0>s>>>0?a:s;;){if((a|0)==(R|0)){s=g;break e}if(E=c[n+4>>2],k=E>>>8|0,L=(E&255)<<24|c[n>>2]>>>8,E=k,c[n>>2]=L,c[n+4>>2]=k,k=F[c[n+8>>2]+a|0],s=g+-8|0,c[n+20>>2]=s,a=a+1|0,c[n+16>>2]=a,c[n>>2]=L,c[n+4>>2]=E|k<<24,k=(g|0)>15,g=s,!k)break}}c[n+16>>2]!=c[n+12>>2]|(s|0)<65&&!c[n+24>>2]||(c[n+20>>2]=0,c[n+24>>2]=1)}function ze(n,s){e:{if(n){if(s>>>0<=127)break e;t:{if(!c[c[2607]>>2]){if((s&-128)==57216)break e;break t}if(s>>>0<=2047)return p[n+1|0]=s&63|128,p[n|0]=s>>>6|192,2;if(!((s&-8192)!=57344&&s>>>0>=55296))return p[n+2|0]=s&63|128,p[n|0]=s>>>12|224,p[n+1|0]=s>>>6&63|128,3;if(s+-65536>>>0<=1048575)return p[n+3|0]=s&63|128,p[n|0]=s>>>18|240,p[n+2|0]=s>>>6&63|128,p[n+1|0]=s>>>12&63|128,4}c[2865]=25,n=-1}else n=1;return n}return p[n|0]=s,1}function Je(n){var s=0,a=0,g=0,k=0,E=0,L=0;return n?(k=c[n+8>>2]+-1|0,Qn[n>>2]<=10?(s=n+20|0,a=c[s>>2],c[s>>2]=0-a,c[n+16>>2]=c[n+16>>2]+ne(a,k),0):(s=n+32|0,a=c[s>>2],c[s>>2]=0-a,g=n+36|0,s=c[g>>2],c[g>>2]=0-s,E=n+40|0,g=c[E>>2],c[E>>2]=0-g,c[n+16>>2]=c[n+16>>2]+ne(a,k),a=n+20|0,E=a,L=c[a>>2],a=k>>1,c[E>>2]=L+ne(a,s),s=n+24|0,c[s>>2]=c[s>>2]+ne(a,g),s=c[n+28>>2],s&&(g=n+44|0,a=c[g>>2],c[g>>2]=0-a,c[n+28>>2]=s+ne(a,k)),0)):2}function ot(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;for(g=n+-25|0,k=n+-26|0,E=n+-27|0,L=n+-28|0,R=n+-29|0,W=n+-30|0,H=n+-31|0,ee=n+-32|0,ce=c[2548]-F[n+-33|0]|0;s=F[n+-1|0]+ce|0,p[n|0]=F[s+F[ee|0]|0],p[n+1|0]=F[F[H|0]+s|0],p[n+2|0]=F[F[W|0]+s|0],p[n+3|0]=F[F[R|0]+s|0],p[n+4|0]=F[F[L|0]+s|0],p[n+5|0]=F[F[E|0]+s|0],p[n+6|0]=F[F[k|0]+s|0],p[n+7|0]=F[F[g|0]+s|0],n=n+32|0,a=a+1|0,(a|0)!=8;);}function Lt(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+95|0],p[n+67|0]=a,p[n+66|0]=a,s=ne(a,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,k=F[n+31|0],g=k+1|0,s=F[n+63|0],E=g+s>>>1|0,p[n+32|0]=E,L=F[n+-1|0],p[n|0]=g+L>>>1,g=(s+a|0)+1>>>1|0,p[n+64|0]=g,p[n+2|0]=E,p[n+34|0]=g,g=((a+k|0)+(s<<1)|0)+2>>>2|0,p[n+33|0]=g,s=s+2|0,p[n+1|0]=(s+L|0)+(k<<1)>>>2,a=(s+a|0)+(a<<1)>>>2|0,p[n+65|0]=a,p[n+3|0]=g,p[n+35|0]=a}function kt(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0;if(p[k|0]=F[n|0],H=s+-1|0,L=1,(s|0)>=2)for(R=k+1|0,W=n+1|0;p[E+R|0]=F[E+W|0]-F[n+E|0],E=E+1|0,(H|0)!=(E|0););if((a|0)>=2)for(R=(s|0)<2;;){if(k=g+k|0,s=n+g|0,p[k|0]=F[s|0]-F[n|0],!R)for(n=k+1|0,W=s+1|0,E=0;p[n+E|0]=F[E+W|0]-F[s+E|0],E=E+1|0,(H|0)!=(E|0););if(n=s,L=L+1|0,(L|0)==(a|0))break}}function It(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+-30|0],s=a+2|0,g=F[n+-29|0],k=F[n+-28|0]+(s+(g<<1)|0)>>>2|0,p[n+99|0]=k,E=F[n+-31|0],L=E+2|0,g=g+(L+(a<<1)|0)>>>2|0,p[n+98|0]=g,a=s,s=F[n+-32|0],a=(a+s|0)+(E<<1)>>>2|0,p[n+97|0]=a,s=(F[n+-33|0]+L|0)+(s<<1)>>>2|0,p[n+96|0]=s,p[n+67|0]=k,p[n+66|0]=g,p[n+65|0]=a,p[n+64|0]=s,p[n+35|0]=k,p[n+34|0]=g,p[n+33|0]=a,p[n+32|0]=s,p[n+3|0]=k,p[n+2|0]=g,p[n+1|0]=a,p[n|0]=s}function si(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;return s=c[s>>2],H=c[s+24>>2],E=s+40|0,ee=c[E>>2],g=c[s+20>>2],L=s+36|0,k=c[L>>2],a=c[s+16>>2],R=c[n+8>>2],s=c[s+32>>2],ce=a+ne(R,s)|0,a=s,s=c[n+12>>2],W=c[n+16>>2],Ll(c[n+20>>2],c[n+32>>2],ce,a,s,W),a=k,k=R>>1,a=g+ne(a,k)|0,s=(s+1|0)/2|0,g=(W+1|0)/2|0,Ll(c[n+24>>2],c[n+36>>2],a,c[L>>2],s,g),Ll(c[n+28>>2],c[n+36>>2],ne(k,ee)+H|0,c[E>>2],s,g),c[n+16>>2]}function fi(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0;if((g|0)>=1)for(H=s?0:3,ee=(s|0)!=0,ce=(a|0)<1;;){if(!ce)for(xe=n+H|0,W=n+ee|0,s=0;E=s<<2,L=F[E+xe|0],(L|0)!=255&&(R=E+W|0,L=ne(L,32897),p[R|0]=ne(L,F[R|0])>>>23,R=(E|1)+W|0,p[R|0]=ne(L,F[R|0])>>>23,E=(E|2)+W|0,p[E|0]=ne(L,F[E|0])>>>23),s=s+1|0,(a|0)!=(s|0););if(n=n+k|0,s=(g|0)>1,g=g+-1|0,!s)break}}function xi(n,s){var a=0;a=(s|0)!=0;e:{t:{i:{if(!s|!(n&3))break i;for(;;){if(!F[n|0])break t;if(n=n+1|0,s=s+-1|0,a=(s|0)!=0,!s)break i;if(!(n&3))break}}if(!a)break e}t:{if(!F[n|0]|s>>>0<4)break t;for(;;){if(a=c[n>>2],(a^-1)&a+-16843009&-2139062144)break t;if(n=n+4|0,s=s+-4|0,!(s>>>0>3))break}}if(!s)break e;for(;;){if(!F[n|0])return n;if(n=n+1|0,s=s+-1|0,!s)break}}return 0}function Vt(n){n=n|0;var s=0;s=ne((F[n+95|0]+(F[n+-29|0]+(F[n+63|0]+(F[n+-30|0]+(F[n+31|0]+(F[n+-31|0]+(F[n+-32|0]+F[n+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24}function Pi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0,ee=0;if((a|0)>=1)for(k=c[g+-4>>2];E=W<<2,L=E+s|0,R=c[L+4>>2],ee=g+E|0,H=c[L>>2],R=((R^H)>>>1&2139062143)+(R&H)|0,L=c[L+-4>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,k=((R^k)>>>1&2139062143)+(k&R)|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[ee>>2]=k,W=W+1|0,(W|0)!=(a|0););}function Ei(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0,Ye=0,mt=0;for(ce=0-s|0,xe=0-(s<<1)|0,Ne=a<<1|1,R=c[2548],W=c[2547],Ye=c[2546],H=c[2549];a=n+k|0,ee=a+ce|0,E=F[ee|0],L=F[a|0],g=F[a+xe|0]-F[s+a|0]|0,((F[(E-L|0)+H|0]<<2)+F[g+H|0]|0)<=(Ne|0)&&(g=p[g+Ye|0]+ne(L-E|0,3)|0,mt=p[(g+4>>3)+W|0],p[ee|0]=F[(p[(g+3>>3)+W|0]+E|0)+R|0],p[a|0]=F[(L-mt|0)+R|0]),k=k+1|0,(k|0)!=16;);}function Vi(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((a|0)>=1)for(;E=R<<2,W=Di[s+2>>1],H=Di[n>>1],ee=Di[s>>1],ce=Di[n+2>>1],L=mn[E+g>>1]+(((W+ne(H,9)|0)+ne(ee+ce|0,3)|0)+8>>4)|0,L=(L|0)<1023?L:1023,Di[k+E>>1]=(L|0)>0?L:0,L=E|2,E=mn[L+g>>1]+(((ne(ce,9)+ee|0)+ne(W+H|0,3)|0)+8>>4)|0,E=(E|0)<1023?E:1023,Di[k+L>>1]=(E|0)>0?E:0,s=s+2|0,n=n+2|0,R=R+1|0,(R|0)!=(a|0););}function Ni(n){var s=0,a=0,g=0;if(c[n+24>>2]<=0){e:{if(c[n+4>>2]){ft[c[2808]](n);break e}if(!c[n+20>>2]){if((ne(c[n+52>>2],c[n+8>>2])|0)<1)break e;for(a=c[n+76>>2];g=s<<2,p[c[n+68>>2]+s|0]=c[g+a>>2],a=c[n+76>>2],c[g+a>>2]=0,s=s+1|0,(s|0)<(ne(c[n+52>>2],c[n+8>>2])|0););break e}ft[c[2809]](n)}c[n+24>>2]=c[n+24>>2]+c[n+28>>2],c[n+68>>2]=c[n+68>>2]+c[n+72>>2],c[n+64>>2]=c[n+64>>2]+1}}function sn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0;if((g|0)>=1)for(;k=mn[n+2>>1],E=mn[n>>1],R=mn[n+4>>1],W=(ne(k,-19081)+ne(E,-9719)|0)+ne(R,28800)|0,H=W+33685504>>18,p[s+L|0]=H>>>0<256?H:(W|0)<-33685504?-33685504:255,k=(ne(k,-24116)+ne(E,28800)|0)+ne(R,-4684)|0,E=k+33685504>>18,p[a+L|0]=E>>>0<256?E:(k|0)<-33685504?-33685504:255,n=n+8|0,L=L+1|0,(L|0)!=(g|0););}function zi(n,s,a,g,k){var E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;W=c[n+16>>2],L=c[n+8>>2],n=c[n+4>>2],R=8>>>n|0;e:{if((R|0)<=7){if((s|0)>=(a|0))break e;for(H=-1<<R^-1,ee=-1<<n^-1,ce=(L|0)<1;;){if(E=0,n=0,!ce)for(;E&ee||(n=F[g|0],g=g+1|0),p[k|0]=c[((n&H)<<2)+W>>2]>>>8,n=n>>>R|0,k=k+1|0,E=E+1|0,(E|0)!=(L|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2732]](g,W,k,s,a,L)}}function Rn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0;E=c[s>>2],a=c[E+28>>2],L=c[E+44>>2],g=a+ne(L,c[n+8>>2])|0,k=c[n+16>>2],R=c[n+12>>2],s=c[n+104>>2];e:{if(s){if((k|0)<1)break e;for(a=0;g=Xr(g,s,R)+c[E+44>>2]|0,s=c[n>>2]+s|0,a=a+1|0,(k|0)!=(a|0););break e}if(!a|(k|0)<1)break e;for(s=0;g=Zo(g,255,R)+L|0,s=s+1|0,(k|0)!=(s|0););}return 0}function vn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0,xe=0,Ne=0;for(ce=a<<1|1,R=c[2548],W=c[2547],xe=c[2546],H=c[2549];a=ne(s,k)+n|0,ee=a+-1|0,E=F[ee|0],L=F[a|0],g=F[a+-2|0]-F[a+1|0]|0,((F[(E-L|0)+H|0]<<2)+F[g+H|0]|0)<=(ce|0)&&(g=p[g+xe|0]+ne(L-E|0,3)|0,Ne=p[(g+4>>3)+W|0],p[ee|0]=F[(p[(g+3>>3)+W|0]+E|0)+R|0],p[a|0]=F[(L-Ne|0)+R|0]),k=k+1|0,(k|0)!=16;);}function qn(n,s){n=n|0,s=s|0;var a=0,g=0;return a=c[s>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,a=n&255,s=c[s+-4>>2],a=((a-(s&255)|0)/2|0)+a|0,g=a>>>0<256?a:(a^-1)>>>24|0,a=n>>>24|0,a=((a-(s>>>24|0)|0)/2|0)+a|0,g=g|(a>>>0<256?a:a>>>24^-1)<<24,a=n>>>16&255,a=((a-(s>>>16&255)|0)/2|0)+a|0,n=n>>>8&255,n=((n-(s>>>8&255)|0)/2|0)+n|0,g|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function Er(n,s,a){var g=0;if(c[n+24>>2]=0,c[n+8>>2]=-8,c[n>>2]=0,c[n+4>>2]=254,c[n+12>>2]=s,g=s+a|0,c[n+16>>2]=g,g=a>>>0>3?g+-3|0:s,c[n+20>>2]=g,g>>>0>s>>>0){a=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),c[n+8>>2]=16,c[n+12>>2]=s+3,c[n>>2]=(a>>>8&65280|(a<<8&16711680|a<<24))>>>8;return}if((a|0)>=1){c[n+8>>2]=0,c[n+12>>2]=s+1,c[n>>2]=F[s|0];return}c[n+24>>2]=1,c[n+8>>2]=0,c[n>>2]=0}function Dr(n,s,a){var g=0,k=0,E=0,L=0;g=c[a+16>>2];e:{if(!g){if(rs(a))break e;g=c[a+16>>2]}if(E=c[a+20>>2],g-E>>>0<s>>>0)return ft[c[a+36>>2]](a,n,s)|0;t:{if(p[a+75|0]<0)break t;for(k=s;;){if(g=k,!g)break t;if(k=g+-1|0,F[k+n|0]==10)break}if(k=ft[c[a+36>>2]](a,n,g)|0,k>>>0<g>>>0)break e;n=n+g|0,s=s-g|0,E=c[a+20>>2],L=g}Xr(E,n,s),c[a+20>>2]=c[a+20>>2]+s,k=s+L|0}return k}function j(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if((a|0)>=1)for(ee=(s|0)<1;;){if(L=0,!ee)for(;k=L<<1,E=k+n|0,ce=E,H=(k|1)+n|0,R=F[H|0],k=R&15,W=ne(k,4369),E=F[E|0],p[ce|0]=ne(W,E&240|E>>>4)>>>16&240|ne((E&15|E<<4)&255,W)>>>20,p[H|0]=ne(R&240|R>>>4,W)>>>16&240|k,L=L+1|0,(L|0)!=(s|0););if(n=n+g|0,k=(a|0)>1,a=a+-1|0,!k)break}}function K(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,W=0;if(p[k|0]=F[n|0],(s|0)>=2)for(R=s+-1|0,L=k+1|0,W=n+1|0;p[E+L|0]=F[E+W|0]-F[n+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(L=1;;){if(k=g+k|0,R=n+g|0,E=0,(s|0)>=1)for(;p[k+E|0]=F[E+R|0]-F[n+E|0],E=E+1|0,(E|0)!=(s|0););if(n=R,L=L+1|0,(L|0)==(a|0))break}}function ue(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;if((s|0)>=1)for(;g=(E<<2)+n|0,k=c[g>>2],k>>>0<=4278190079&&(L=g,k>>>0>=16777216?(g=k>>>24|0,a?g=4278190080/(g>>>0)|0:g=ne(g,65793),g=ne(g,k>>>16&255)+8388608>>>8&16711680|(ne(g,k>>>8&255)+8388608>>>16&65280|(k&-16777216|ne(g,k&255)+8388608>>>24))):g=0,c[L>>2]=g),E=E+1|0,(E|0)!=(s|0););}function ve(n,s,a){var g=0,k=0,E=0,L=0,R=0,W=0,H=0,ee=0,ce=0;if(c[n+20>>2]=0,c[n+24>>2]=0,c[n>>2]=0,c[n+4>>2]=0,c[n+12>>2]=a,E=a>>>0<8?a:8,E)for(ce=E,a=0;L=F[s+a|0],k=R<<3,g=k&31,32<=(k&63)>>>0?(k=L<<g,g=0):(k=(1<<g)-1&L>>>32-g,g=L<<g),W=g|W,H=k|H,a=a+1|0,g=R+1|0,g>>>0<1&&(ee=ee+1|0),R=g,!!((ce|0)!=(g|0)|ee););c[n+16>>2]=E,c[n>>2]=W,c[n+4>>2]=H,c[n+8>>2]=s}function je(n,s){var a=0,g=0,k=0;a=0;e:{if(!n)break e;if(!s)return c[n>>2]=2,0;c[n>>2]=0,c[n+8>>2]=s,a=n+24|0,ve(a,c[s+64>>2],c[s+60>>2]);t:{i:{n:{if((no(a,8)|0)!=47||(k=no(a,14),g=no(a,14),no(a,1),no(a,3)))break n;if(!c[n+48>>2])break i}c[n>>2]=3;break t}if(c[n+4>>2]=2,g=g+1|0,c[s+4>>2]=g,a=s,s=k+1|0,c[a>>2]=s,a=1,an(s,g,1,n,0))break e}Uo(n),a=0}return a}function Ze(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;e:{if(!n){if((g|0)<1)break e;for(;k=F[s+E|0]+k|0,p[a+E|0]=k,E=E+1|0,(E|0)!=(g|0););break e}if((g|0)<1)break e;for(k=F[n|0],L=k,R=k;;){if(L=(L&255)-(R&255)|0,R=k,k=(k&255)+L|0,k=(k|0)>0?k:0,L=F[s+E|0]+((k|0)<255?k:255)|0,p[a+E|0]=L,E=E+1|0,(E|0)==(g|0))break e;k=F[n+E|0]}}}function $e(n,s,a,g){var k=0,E=0,L=0,R=0;return k=c[g>>2],E=c[a>>2],E|(s|0)<1||(R=cr(k,k>>31,n,n>>31),E=s+R|0,L=Fn,L=E>>>0<R>>>0?L+1|0:L,E=E+-1|0,L=L+-1|0,E=gc(E,(E|0)!=-1?L+1|0:L,s,0)),k|(n|0)<1||(L=cr(E,E>>31,s,s>>31),k=L+n|0,s=Fn,s=k>>>0<L>>>0?s+1|0:s,k=k+-1|0,s=s+-1|0,k=gc(k,(k|0)!=-1?s+1|0:s,n,0)),n=0,(E|0)<1|(k|0)<1||(c[a>>2]=E,c[g>>2]=k,n=1),n}function at(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0;if((a|0)>=1)for(k=c[g+-4>>2];E=W<<2,L=E+s|0,R=c[L+4>>2],k=((R^k)>>>1&2139062143)+(k&R)|0,R=g+E|0,L=c[L>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[R>>2]=k,W=W+1|0,(W|0)!=(a|0););}function pt(n,s){n=n|0,s=s|0;var a=0,g=0,k=0;return g=c[s>>2],s=c[s+-4>>2],a=((g&255)+(n&255)|0)-(s&255)|0,k=a>>>0<256?a:(a^-1)>>>24|0,a=(g>>>24)+(n>>>24)-(s>>>24)|0,k=k|(a>>>0<256?a:a>>>24^-1)<<24,a=((g>>>16&255)+(n>>>16&255)|0)-(s>>>16&255)|0,n=((g>>>8&255)+(n>>>8&255)|0)-(s>>>8&255)|0,k|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function St(n,s,a,g,k){var E=0;e:{if(!n|s>>>0<10|(F[n+3|0]!=157|F[n+4|0]!=1)||F[n+5|0]!=42||(s=F[n|0],(s&25)!=16|(s|F[n+1|0]<<8|F[n+2|0]<<16)>>>5>>>0>=a>>>0)||(s=F[n+6|0]|F[n+7|0]<<8&16128,!s)||(n=F[n+8|0]|F[n+9|0]<<8&16128,!n)||(g&&(c[g>>2]=s),E=1,!k))break e;c[k>>2]=n}return E}function ai(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,W=0;e:{if(g=c[n+104>>2],!g|(a|0)<1)break e;for(R=c[s+16>>2]+a|0,k=c[s+36>>2];;){if(E=c[n+8>>2],L=c[k+60>>2],W=g,g=c[n>>2],vs(k,c[n+16>>2]+(E-L|0)|0,W+ne(g,L-E|0)|0,g),a=a-(ft[c[s+52>>2]](s,R-a|0,a)|0)|0,(a|0)<1)break e;g=c[n+104>>2]}}return 0}function Ai(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0,ee=0;if((a|0)>=1)for(W=p[n+2|0],H=p[n+1|0],ee=p[n|0];E=k<<2,n=c[E+s>>2],L=n<<16>>24,R=(ne(L,ee)>>5)+(n>>>16|0)|0,c[g+E>>2]=n+(ne(H,L)>>>5|0)+(ne(R<<24>>24,W)>>>5)&255|(R<<16&16711680|n&-16711936),k=k+1|0,(k|0)!=(a|0););}function wi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(R=s+-4|0,s=c[g+-4>>2];k=L<<2,E=c[k+R>>2],s=((E^s)>>>1&2139062143)+(s&E)|0,E=g+k|0,k=c[n+k>>2],s=(s&-16711936)+(k&-16711936)&-16711936|(s&16711935)+(k&16711935)&16711935,c[E>>2]=s,L=L+1|0,(L|0)!=(a|0););}function pi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0;if((a|0)>=1)for(;k=R<<2,E=k+s|0,L=c[E>>2],W=g+k|0,E=c[E+-4>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,k=c[n+k>>2],c[W>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function $i(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0;if((a|0)>=1)for(;k=R<<2,E=k+s|0,L=c[E+4>>2],W=g+k|0,E=c[E>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,k=c[n+k>>2],c[W>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function Oi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(k=c[g+-4>>2];E=R<<2,L=c[E+s>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,L=g+E|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[L>>2]=k,R=R+1|0,(R|0)!=(a|0););}function Xt(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,W=0,H=0;if((g|0)>=1)for(;E=L<<1,k=E+a|0,H=k,E=mn[n+E>>1]-mn[s+E>>1]|0,k=E+mn[k>>1]|0,k=(k|0)<1023?k:1023,Di[H>>1]=(k|0)>0?k:0,k=E>>31,E=k+E^k,k=R+E|0,k>>>0<E>>>0&&(W=W+1|0),R=k,L=L+1|0,(L|0)!=(g|0););return Fn=W,R|0}function ii(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,W=0,H=0,ee=0;if(R=255,(g|0)>=1)for(ee=(a|0)<1;;){if(L=0,!ee)for(;W=F[(L<<2)+n|0],p[k+L|0]=W,R=R&W,L=L+1|0,(L|0)!=(a|0););if(k=k+E|0,n=n+s|0,H=H+1|0,(H|0)==(g|0))break}return(R&255)==255|0}function Hi(n,s,a){var g=0,k=0,E=0;e:{if((s|0)==1&n>>>0<0|s>>>0<1){g=n;break e}for(;g=gc(n,s,10,0),k=Fn,E=k,k=cr(g,k,10,0),a=a+-1|0,p[a|0]=n-k|48,k=s>>>0>9,n=g,s=E,!!k;);}if(g)for(;a=a+-1|0,n=(g>>>0)/10|0,p[a|0]=g-ne(n,10)|48,s=g>>>0>9,g=n,!!s;);return a}function Ki(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,W=0,H=0,ee=0;if(R=255,(g|0)>=1)for(ee=(a|0)<1;;){if(L=0,!ee)for(;W=F[n+L|0],p[(L<<2)+k|0]=W,R=R&W,L=L+1|0,(L|0)!=(a|0););if(k=k+E|0,n=n+s|0,H=H+1|0,(H|0)==(g|0))break}return(R|0)!=255|0}function Ui(n,s,a,g,k){var E=0,L=0,R=0;E=Nn-32|0,Nn=E;e:{if(!n|s>>>0<5|(F[n|0]!=47|F[n+4|0]>31)||(ve(E,n,s),(no(E,8)|0)!=47)||(n=no(E,14),s=no(E,14),L=no(E,1),no(E,3)|c[E+24>>2])||(a&&(c[a>>2]=n+1),g&&(c[g>>2]=s+1),R=1,!k))break e;c[k>>2]=L}return Nn=E+32|0,R}function Dn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(;;){k=F[s+E|0];e:{if((k|0)==255)break e;if(!k){p[n+E|0]=0;break e}L=n+E|0,R=L,g?k=4278190080/(k>>>0)|0:k=ne(k,65793),p[R|0]=ne(k,F[L|0])+8388608>>>24}if(E=E+1|0,(E|0)==(a|0))break}}function kn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0;e:{if(n){if((g|0)<=0)break e;for(;p[a+k|0]=F[s+k|0]+F[n+k|0],k=k+1|0,(k|0)!=(g|0););break e}if((g|0)<1)break e;for(n=0;n=F[s+k|0]+n|0,p[a+k|0]=n,k=k+1|0,(k|0)!=(g|0););}}function yr(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+-4|0,s=0;k=s<<2,E=c[k+n>>2],R=g+k|0,k=c[k+L>>2],c[R>>2]=(E&-16711936)+(k&-16711936)&-16711936|(E&16711935)+(k&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function On(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,W=0;if((g|0)>=1)for(R=(a|0)<1,W=E<<2;;){if(E=0,!R)for(;c[(E<<2)+k>>2]=F[n+E|0]<<8,E=E+1|0,(E|0)!=(a|0););if(n=n+s|0,k=k+W|0,L=L+1|0,(L|0)==(g|0))break}}function go(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)<(k|0))for(R=(E|0)<1;;){if(L=0,!R)for(;c[a>>2]=c[(c[n>>2]>>>6&1020)+s>>2],a=a+4|0,n=n+4|0,L=L+1|0,(L|0)!=(E|0););if(g=g+1|0,(k|0)==(g|0))break}}function wo(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+4|0,s=0;k=s<<2,E=c[k+n>>2],R=g+k|0,k=c[k+L>>2],c[R>>2]=(E&-16711936)+(k&-16711936)&-16711936|(E&16711935)+(k&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function Yr(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)<(k|0))for(R=(E|0)<1;;){if(L=0,!R)for(;p[a|0]=c[(F[n|0]<<2)+s>>2]>>>8,a=a+1|0,n=n+1|0,L=L+1|0,(L|0)!=(E|0););if(g=g+1|0,(k|0)==(g|0))break}}function qr(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(;k=E<<2,L=c[k+n>>2],R=g+k|0,k=c[s+k>>2],c[R>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,E=E+1|0,(E|0)!=(a|0););}function po(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0;if((a|0)>=1)for(s=c[g+-4>>2];E=k<<2,L=c[E+n>>2],s=(L&-16711936)+(s&-16711936)&-16711936|(L&16711935)+(s&16711935)&16711935,c[g+E>>2]=s,k=k+1|0,(k|0)!=(a|0););}function xo(){var n=0,s=0;n=Ql(1,0,2376);e:{if(!n||(c[n>>2]=0,c[n+8>>2]=5010,ft[c[2557]](n+124|0),c[n+312>>2]=0,c[n+4>>2]=0,c[2661]))break e;t:{if(s=c[2673],!s||!(ft[s|0](2)|0))break t;return c[2661]=19,n}c[2661]=20}return n}function Gr(n,s,a){var g=0,k=0;return g=2,!n|!a||(c[a>>2]=0,c[a+4>>2]=0,c[a+32>>2]=0,c[a+36>>2]=0,c[a+24>>2]=0,c[a+28>>2]=0,k=a+16|0,g=k,c[g>>2]=0,c[g+4>>2]=0,g=a+8|0,c[g>>2]=0,c[g+4>>2]=0,g=kl(n,s,a,a+4|0,g,a+12|0,k,0)),g}function Es(n,s,a,g){var k=0,E=0,L=0,R=0,W=0,H=0;return k=a>>>16|0,E=n>>>16|0,H=ne(k,E),L=a&65535,R=n&65535,W=ne(L,R),E=(W>>>16|0)+ne(E,L)|0,k=(E&65535)+ne(k,R)|0,n=(ne(s,a)+H|0)+ne(n,g)+(E>>>16)+(k>>>16)|0,s=W&65535|k<<16,Fn=n,s}function Or(n){var s=0;if(s=c[n+12>>2],s>>>0<Qn[n+16>>2]){c[n+12>>2]=s+1,c[n+8>>2]=c[n+8>>2]+8,c[n>>2]=F[s|0]|c[n>>2]<<8;return}if(!c[n+24>>2]){c[n+24>>2]=1,c[n>>2]=c[n>>2]<<8,c[n+8>>2]=c[n+8>>2]+8;return}c[n+8>>2]=0}function ns(n,s){n=n|0,s=s|0;var a=0;return s=c[s>>2],a=c[s+20>>2],zh(c[n+20>>2],c[n+32>>2],c[n+24>>2],c[n+28>>2],c[n+36>>2],ne(a,c[n+8>>2])+c[s+16>>2]|0,a,c[n+12>>2],c[n+16>>2],c[(c[s>>2]<<2)+11376>>2]),c[n+16>>2]}function Bs(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0;if((a|0)>=1)for(;k=c[(g<<2)+n>>2],p[s+g|0]=((ne(k&255,6420)+ne(k>>>16&255,16839)|0)+ne(k>>>8&255,33059)|0)+1081344>>>16,g=g+1|0,(g|0)!=(a|0););}function ao(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0;k=Nn-16|0,Nn=k;e:{if(!Cf(mu(c[n+60>>2],s|0,a|0,g&255,k+8|0)|0)){s=c[k+12>>2],n=c[k+8>>2];break e}c[k+8>>2]=-1,c[k+12>>2]=-1,s=-1,n=-1}return Nn=k+16|0,Fn=s,n|0}function as(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)>=1)for(;c[(R<<2)+E>>2]=F[a+L|0]|(F[n+L|0]<<16|F[s+L|0]<<8)|-16777216,L=k+L|0,R=R+1|0,(R|0)!=(g|0););}function Is(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;if((s|0)>=1)for(;E=g<<2,k=c[E+n>>2],L=k>>>8&255,c[a+E>>2]=(k&16711935)+(L<<16|L)&16711935|k&-16711936,g=g+1|0,(g|0)!=(s|0););}function zs(n){n&&(ft[c[2562]](n+124|0),l0(n),jr(c[n+2288>>2]),c[n+2288>>2]=0,c[n+2292>>2]=0,c[n+12>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+24>>2]=0,c[n+28>>2]=0,c[n+32>>2]=0,c[n+36>>2]=0,c[n+4>>2]=0,jr(n))}function Bo(n,s,a,g,k){var E=0;if(E=Nn-256|0,Nn=E,!(k&73728|(a|0)<=(g|0))){if(a=a-g|0,g=a>>>0<256,Zo(E,s&255,g?a:256),!g)for(;qh(n,E,256),a=a+-256|0,a>>>0>255;);qh(n,E,a)}Nn=E+256|0}function ba(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=((ne(F[n+2|0],16839)+ne(F[n+1|0],33059)|0)+ne(F[n|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(a|0););}function Wa(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=((ne(F[n|0],16839)+ne(F[n+1|0],33059)|0)+ne(F[n+2|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(a|0););}function Io(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+2|0]=s,p[a+3|0]=s>>>24,p[a+1|0]=s>>>8,p[a|0]=s>>>16,a=a+4|0,n=n+4|0,n>>>0<g>>>0;);}function bs(n,s,a,g){var k=0,E=0;k=Nn-1024|0,Nn=k;e:{if(!n){g=Cs(0,s,a,g,0);break e}if((g|0)<=512){g=Cs(n,s,a,g,k);break e}if(E=Ts(g,0,2),!E){g=0;break e}g=Cs(n,s,a,g,E),jr(E)}return Nn=k+1024|0,g}function Kl(){var n=0;n=c[2673],(n|0)!=c[2555]&&(c[2854]=136,c[2853]=137,c[2852]=138,c[2851]=139,c[2850]=140,c[2849]=136,c[2848]=137,c[2847]=138,c[2846]=141,c[2845]=139,c[2844]=142,c[2555]=n)}function Xa(){var n=0;n=c[2673],(n|0)!=c[2553]&&(c[2831]=129,c[2829]=130,c[2838]=131,c[2837]=132,c[2836]=129,c[2835]=130,c[2834]=133,c[2833]=131,c[2832]=132,c[2830]=134,c[2828]=135,c[2553]=n)}function hl(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+1|0]=s>>>5&224|s>>>3&31,p[a|0]=s>>>16&248|s>>>13&7,a=a+2|0,n=n+4|0,n>>>0<g>>>0;);}function fl(){var n=0;n=c[2673],(n|0)!=c[2554]&&(c[2820]=122,c[2819]=123,c[2815]=122,c[2813]=123,c[2822]=124,c[2821]=125,c[2818]=126,c[2817]=124,c[2816]=125,c[2814]=127,c[2812]=128,c[2554]=n)}function rs(n){var s=0;return s=F[n+74|0],p[n+74|0]=s+-1|s,s=c[n>>2],s&8?(c[n>>2]=s|32,-1):(c[n+4>>2]=0,c[n+8>>2]=0,s=c[n+44>>2],c[n+28>>2]=s,c[n+20>>2]=s,c[n+16>>2]=s+c[n+48>>2],0)}function Rh(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+1|0]=s&240|s>>>28,p[a|0]=s>>>16&240|s>>>12&15,a=a+2|0,n=n+4|0,n>>>0<g>>>0;);}function s0(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0;if((a|0)>=1)for(s=0;k=s<<2,E=c[k+n>>2],c[g+k>>2]=E+-16777216&-16711936|E&16711935,s=s+1|0,(a|0)!=(s|0););}function yf(n,s){n=n|0,s=s|0,mn[n>>1]&&ft[c[2706]](n,s),mn[n+32>>1]&&ft[c[2706]](n+32|0,s+4|0),mn[n+64>>1]&&ft[c[2706]](n- -64|0,s+128|0),mn[n+96>>1]&&ft[c[2706]](n+96|0,s+132|0)}function lc(){var n=0;n=c[2673],(n|0)!=c[2544]&&(c[2663]=21,c[2662]=22,c[2665]=23,c[2670]=24,c[2664]=25,c[2666]=26,c[2667]=27,c[2668]=28,c[2669]=29,c[2671]=30,c[2672]=31,c[2544]=n)}function uc(n,s){n=n|0,s=s|0;var a=0,g=0;return a=c[s>>2],g=c[s+4>>2],a=((a^g)>>>1&2139062143)+(a&g)|0,s=c[s+-4>>2],n=((s^n)>>>1&2139062143)+(n&s)|0,((a^n)>>>1&2139062143)+(n&a)|0}function Bh(n){n=n|0;var s=0,a=0,g=0;return c[n+12>>2]<1|c[n+16>>2]<1||(s=c[n+40>>2],a=ft[c[s+44>>2]](n,s)|0,g=c[s+48>>2],g&&ft[g|0](n,s,a)|0,c[s+16>>2]=c[s+16>>2]+a,s=1),s|0}function Ya(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0;if((g|0)>=1)for(;E=k<<1,L=E+a|0,Di[L>>1]=mn[L>>1]+(mn[n+E>>1]-mn[s+E>>1]|0),k=k+1|0,(k|0)!=(g|0););}function Za(n){var s=0,a=0;s=c[3008],a=n+3&-4,n=s+a|0;e:{if(n>>>0<=s>>>0&&(a|0)>=1||n>>>0>_p()<<16>>>0&&!(du(n|0)|0))break e;return c[3008]=n,s}return c[2865]=48,-1}function cc(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a|0]=s,p[a+2|0]=s>>>16,p[a+1|0]=s>>>8,a=a+3|0,n=n+4|0,n>>>0<g>>>0;);}function hc(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+2|0]=s,p[a+1|0]=s>>>8,p[a|0]=s>>>16,a=a+3|0,n=n+4|0,n>>>0<g>>>0;);}function zh(n,s,a,g,k,E,L,R,W,H){var ee=0,ce=0;if((W|0)>=1)for(;ft[H|0](n,a,g,E,R),ce=ee&1,a=ce?a+k|0:a,g=ce?g+k|0:g,E=E+L|0,n=n+s|0,ee=ee+1|0,(ee|0)!=(W|0););}function Bc(n,s){var a=0,g=0,k=0;a=0;e:{if(!n||(g=cr(n,0,s,0),k=Fn,a=g,(n|s)>>>0<65536))break e;a=k?-1:g}return s=a,n=qa(s),!n|!(F[n+-4|0]&3)||Zo(n,0,s),n}function fc(n,s){n=n|0,s=s|0;var a=0,g=0,k=0;e:{if((s|0)<=0)break e;for(;;){if(F[n+a|0]==255){if(a=a+4|0,g=(s|0)<2,s=s+-1|0,!g)continue;break e}break}k=1}return k|0}function zc(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0;if(k=n?F[n|0]:k,(g|0)>=1)for(;k=F[s+E|0]+k|0,p[a+E|0]=k,E=E+1|0,(E|0)!=(g|0););}function dc(n){var s=0;e:{if(c[n+64>>2]>=c[n+56>>2])break e;for(;;){if(c[n+24>>2]>0)break e;if(s=s+1|0,Ni(n),!(c[n+64>>2]<c[n+56>>2]))break}}return s}function Nc(n,s){var a=0,g=0,k=0,E=0;a=4;e:{for(;;){if(g=F[n|0],k=F[s|0],(g|0)==(k|0)){if(s=s+1|0,n=n+1|0,a=a+-1|0,a)continue;break e}break}E=g-k|0}return E}function ua(){var n=0;n=c[2673],(n|0)!=c[2556]&&(c[2861]=143,c[2860]=144,c[2857]=145,c[2858]=146,c[2859]=147,c[2862]=148,c[2863]=149,c[2864]=150,c[2556]=n)}function Qs(n){var s=0,a=0,g=0;if(Ef(p[c[n>>2]]))for(;s=c[n>>2],g=p[s|0],c[n>>2]=s+1,a=(ne(a,10)+g|0)+-48|0,!!Ef(p[s+1|0]););return a}function Ts(n,s,a){var g=0,k=0,E=0;e:{if(n|s&&(k=gc(2147418112,0,n,s),g=Fn,cr(a,0,n,s),!g&k>>>0<a>>>0|g>>>0<0|Fn>>>0>0))break e;E=qa(ne(n,a))}return E}function Jl(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0;E=n,n=s<<2,E=E+n|0,Hr(E,s,1,16,a,g,k),E=n+E|0,Hr(E,s,1,16,a,g,k),Hr(n+E|0,s,1,16,a,g,k)}function a0(){var n=0;n=c[2673],(n|0)!=c[2550]&&(c[2731]=75,c[2730]=76,c[2729]=77,c[2728]=0,c[2727]=78,c[2726]=79,c[2725]=80,c[2724]=0,c[2550]=n)}function Ql(n,s,a){var g=0,k=0,E=0;e:{if(n|s&&(k=gc(2147418112,0,n,s),g=Fn,cr(a,0,n,s),!g&k>>>0<a>>>0|g>>>0<0|Fn>>>0>0))break e;E=Bc(n,a)}return E}function l0(n){var s=0;jr(c[n+2360>>2]),c[n+2360>>2]=0,c[n+2364>>2]=0,s=c[n+2344>>2],s&&(g0(c[s+20>>2]),c[s+20>>2]=0,jr(s)),c[n+2344>>2]=0}function _f(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=c[(g<<2)+n>>2]>>>8,g=g+1|0,(g|0)!=(a|0););}function fh(n,s,a,g){if(n|s)for(;a=a+-1|0,p[a|0]=F[(n&15)+10128|0]|g,n=(s&15)<<28|n>>>4,s=s>>>4|0,!!(n|s););return a}function jc(n,s,a,g,k,E,L){var R=0;if((E|0)>=1)for(;ft[c[2663]](n,a,k,L),a=a+g|0,n=n+s|0,R=R+1|0,(R|0)!=(E|0););}function vf(n,s){n=n|0,s=s|0;for(var a=0;;){if((s|0)<1)return 0;if(s=s+-1|0,a=F[n|0],n=n+1|0,(a|0)!=255)break}return 1}function dh(n,s){n=n|0,s=s|0;var a=0;return a=c[s+4>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,s=c[s>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Nh(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0;L=n,n=a<<2,Hr(L+n|0,a,1,8,g,k,E),Hr(n+s|0,a,1,8,g,k,E)}function ph(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Hr(n+4|0,1,s,16,a,g,k),Hr(n+8|0,1,s,16,a,g,k),Hr(n+12|0,1,s,16,a,g,k)}function Ll(n,s,a,g,k,E){var L=0;if((E|0)>=1)for(;a=Xr(a,n,k)+g|0,n=n+s|0,L=(E|0)>1,E=E+-1|0,!!L;);}function u0(n,s,a){if(n|s)for(;a=a+-1|0,p[a|0]=n&7|48,n=(s&7)<<29|n>>>3,s=s>>>3|0,!!(n|s););return a}function Uc(n,s,a,g,k,E,L,R,W,H){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,W=W|0,H=H|0,ft[n|0](s,a,g,k,E,L,R,W,H)}function pc(n,s,a,g){var k=0;if((g|0)>=1)for(;ft[c[2662]](n,a,0),n=n+s|0,k=k+1|0,(k|0)!=(g|0););}function wa(){var n=0;n=c[2673],(n|0)!=c[2552]&&(c[2809]=118,c[2808]=119,c[2807]=120,c[2806]=121,c[2552]=n)}function $l(n,s){var a=0;return a=1<<s,a=Ql(a,a>>31,4),c[n>>2]=a,a?(c[n+8>>2]=s,c[n+4>>2]=32-s,1):0}function c0(n,s){var a=0;return a=1,c[n+148>>2]>=1&&(a=ft[c[2559]](n+124|0)|0),n=c[s+52>>2],n&&ft[n|0](s),a}function bf(n){n=n|0;var s=0;s=c[n+8>>2],s&&(s=ft[s|0](c[n+12>>2],c[n+16>>2])|0,c[n+20>>2]=c[n+20>>2]|!s)}function ld(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Hr(n+4|0,1,a,8,g,k,E),Hr(s+4|0,1,a,8,g,k,E)}function mc(n,s){var a=0;return a=c[n+24>>2],n=c[n+32>>2],n=((a+n|0)+-1|0)/(n|0)|0,(n|0)>(s|0)?s:n}function ku(n,s,a,g,k,E,L){return n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,ft[n|0](s,a,g,k,E,L)|0}function h0(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Hs(n,1,a,8,g,k,E),Hs(s,1,a,8,g,k,E)}function qu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Hs(n,a,1,8,g,k,E),Hs(s,a,1,8,g,k,E)}function mh(n){n=n|0,c[n>>2]=0,c[n+4>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+8>>2]=0,c[n+12>>2]=0}function wf(n,s,a,g,k){return n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,n=ft[n|0](s,a,g,k)|0,Vl(Fn|0),n|0}function ud(n,s){var a=0;return!s|c[n+12>>2]<2|c[n>>2]+-7>>>0>3||(a=c[s+8>>2]!=0),a}function gh(n,s){return n=n|0,s=s|0,n=c[s>>2],s=c[s+-4>>2],((n^s)>>>1&2139062143)+(n&s)|0}function xf(n,s,a,g,k,E,L){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,ft[n|0](s,a,g,k,E,L)}function xa(n,s){var a=0,g=0;return a=s&31,g=(-1>>>a&n)<<a,a=n,n=0-s&31,g|(a&-1<<n)>>>n}function Su(n,s){return n=n|0,s=s|0,n=c[s+4>>2],s=c[s>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Hu(n,s){return n=n|0,s=s|0,s=c[s+-4>>2],((s^n)>>>1&2139062143)+(n&s)|0}function eu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,ft[n|0](s,a,g,k,E)}function jh(n){e:{if(c[n+76>>2]<=-1){n=Dr(1024,26,n);break e}n=Dr(1024,26,n)}}function Gu(n,s){n=n|0,s=s|0,ft[c[2703]](n,s,1),ft[c[2703]](n- -64|0,s+128|0,1)}function f0(n,s){return n=n|0,s=s|0,s=c[s>>2],((s^n)>>>1&2139062143)+(n&s)|0}function Ko(n,s,a){return c[n>>2]||(c[n+8>>2]=a,c[n>>2]=s,c[n+4>>2]=0),0}function Wu(n,s,a){var g=0;g=Nn-16|0,Nn=g,c[g+12>>2]=a,ur(n,s,a),Nn=g+16|0}function Uh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Hs(n,1,s,16,a,g,k)}function d0(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Hs(n,s,1,16,a,g,k)}function p0(n){return n=n|0,c[n+20>>2]=0,c[n+4>>2]||(c[n+4>>2]=1),1}function Vh(n,s){c[s+40>>2]=n,c[s+52>>2]=3,c[s+48>>2]=4,c[s+44>>2]=5}function lp(n,s){if(!c[n>>2]){ft[c[2806]](n,s);return}ft[c[2807]](n,s)}function up(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,ft[n|0](s,a,g,k)}function Af(n,s,a){n=n|0,s=s|0,a=a|0,Ha(n,s),a&&Ha(n+32|0,s+4|0)}function cd(n,s,a,g){return n=n|0,s=s|0,a=a|0,g=g|0,ft[n|0](s,a,g)|0}function kf(n){n&&(c[n+12>>2]<=0&&jr(c[n+80>>2]),c[n+80>>2]=0)}function K1(n){n=n|0,n=c[n+40>>2],jr(c[n+40>>2]),c[n+40>>2]=0}function cp(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0,ft[n|0](s,a,g)}function Sf(n,s,a){return n=n|0,s=s|0,a=a|0,ft[n|0](s,a)|0}function hp(n){return n?31-Br(n+-1^n)|0:32}function m0(n,s){Xr(c[s>>2],c[n>>2],4<<c[s+8>>2])}function Ns(n,s){return s=Lr(n,s),Lr(n,1)?0-s|0:s}function Cf(n){return n?(c[2865]=n,-1):0}function hd(n,s,a){n=n|0,s=s|0,a=a|0,ft[n|0](s,a)}function fd(n,s){return n=n|0,s=s|0,ft[n|0](s)|0}function J1(n,s){return s=s|0,c[s+-4>>2]}function fp(n,s){return n?ze(n,s):0}function qh(n,s,a){F[n|0]&32||Dr(s,a,n)}function Q1(n){return n=n|0,n=Nn-n&-16,Nn=n,n|0}function $1(n,s){return s=s|0,c[s+4>>2]}function Vc(n,s){return-16777216}function gc(n,s,a,g){return n=zu(n,s,a,g),n}function cr(n,s,a,g){return n=Es(n,s,a,g),n}function yc(n){n&&(jr(c[n>>2]),c[n>>2]=0)}function em(n,s){return s=s|0,c[s>>2]}function tm(n){return n=n|0,ah(c[n+60>>2])|0}function im(n){return n=n|0,!c[n+20>>2]|0}function dp(n,s){return n=n|0,n|0}function pp(n,s){n=n|0,s=s|0,ft[n|0](s)}function nm(n){return n=n|0,sm(n|0)|0}function Ef(n){return n+-48>>>0<10}function g0(n){n&&(Uo(n),jr(n))}function mp(n){n&&Zo(n,0,108)}function dd(n){n=n|0,c[n+4>>2]=0}function Hh(n){n&&Zo(n,0,84)}function If(n){n&&jr(n)}function gp(n,s){return Fn=n,s}function rm(){return 11460}function om(n){n=n|0,Nn=n}function Tf(){return Nn|0}function yp(){}ft[1]=ju,ft[2]=Ru,ft[3]=K1,ft[4]=La,ft[5]=Bh,ft[6]=ns,ft[7]=uh,ft[8]=si,ft[9]=bu,ft[10]=z,ft[11]=Rn,ft[12]=Xl,ft[13]=Vu,ft[14]=Uu,ft[15]=ai,ft[16]=xu,ft[17]=$n,ft[18]=fs,ft[19]=Bu,ft[20]=ol,ft[21]=Dn,ft[22]=ue,ft[23]=j,ft[24]=as,ft[25]=fi,ft[26]=Ki,ft[27]=On,ft[28]=ii,ft[29]=_f,ft[30]=vf,ft[31]=fc,ft[32]=Af,ft[33]=Wl,ft[34]=Fo,ft[35]=El,ft[36]=Gu,ft[37]=yf,ft[38]=d0,ft[39]=Jl,ft[40]=Uh,ft[41]=qu,ft[42]=Nh,ft[43]=Ei,ft[44]=vn,ft[45]=ds,ft[46]=Pn,ft[47]=ph,ft[48]=h0,ft[49]=ld,ft[50]=cl,ft[51]=ac,ft[52]=It,ft[53]=I,ft[54]=Vt,ft[55]=Lt,ft[56]=ul,ft[57]=Fh,ft[58]=sc,ft[59]=ch,ft[60]=se,ft[61]=Qt,ft[62]=hi,ft[63]=ya,ft[64]=Ue,ft[65]=rc,ft[66]=qi,ft[67]=ss,ft[68]=Cl,ft[69]=Mc,ft[70]=yu,ft[71]=al,ft[72]=ot,ft[73]=_u,ft[74]=Fs,ft[75]=Ze,ft[76]=kn,ft[77]=zc,ft[78]=Zl,ft[79]=K,ft[80]=kt,ft[81]=Vc,ft[82]=qn,ft[83]=pt,ft[84]=de,ft[85]=uc,ft[86]=Su,ft[87]=gh,ft[88]=f0,ft[89]=Hu,ft[90]=dh,ft[91]=J1,ft[92]=$1,ft[93]=em,ft[94]=dp,ft[95]=s0,ft[96]=Ro,ft[97]=Oh,ft[98]=oc,ft[99]=Pi,ft[100]=$i,ft[101]=pi,ft[102]=Oi,ft[103]=wi,ft[104]=at,ft[105]=yr,ft[106]=wo,ft[107]=qr,ft[108]=po,ft[109]=Is,ft[110]=Ai,ft[111]=Io,ft[112]=hc,ft[113]=cc,ft[114]=Rh,ft[115]=hl,ft[116]=go,ft[117]=Yr,ft[118]=va,ft[119]=Ga,ft[120]=_e,ft[121]=d,ft[122]=Nr,ft[123]=gr,ft[124]=to,ft[125]=Kn,ft[126]=Wr,ft[127]=jo,ft[128]=Oo,ft[129]=ps,ft[130]=hh,ft[131]=D,ft[132]=is,ft[133]=la,ft[134]=X,ft[135]=ie,ft[136]=Oa,ft[137]=sa,ft[138]=Da,ft[139]=Ma,ft[140]=Rs,ft[141]=Il,ft[142]=_a,ft[143]=lh,ft[144]=Bs,ft[145]=Wa,ft[146]=ba,ft[147]=sn,ft[148]=Xt,ft[149]=Ya,ft[150]=Vi,ft[151]=mh,ft[152]=p0,ft[153]=im,ft[154]=bf,ft[155]=bf,ft[156]=dd,ft[157]=tm,ft[158]=Go,ft[159]=ao;function _p(){return on.byteLength/65536|0}function sm(n){n=n|0;var s=_p()|0,a=s+n|0;if(s<a&&a<65536){var g=new ArrayBuffer(ne(a,65536)),k=new ui.Int8Array(g);k.set(p),p=k,p=new ui.Int8Array(g),Di=new ui.Int16Array(g),c=new ui.Int32Array(g),F=new ui.Uint8Array(g),mn=new ui.Uint16Array(g),Qn=new ui.Uint32Array(g),new ui.Float32Array(g),vo=new ui.Float64Array(g),on=g,Cn.buffer=g}return s}return{__wasm_call_ctors:yp,WebpToSDL:Oc,memset:Zo,memcpy:Xr,malloc:qa,free:jr,__errno_location:rm,stackSave:Tf,stackRestore:om,stackAlloc:Q1,dynCall_vii:hd,dynCall_vi:pp,dynCall_ii:fd,dynCall_iii:Sf,dynCall_iiii:cd,dynCall_iiiiiii:ku,dynCall_viiii:up,dynCall_viii:cp,dynCall_viiiiii:xf,dynCall_viiiii:eu,dynCall_viiiiiiiii:Uc,dynCall_jiiii:wf,dynCall_jiji:wf,__growWasmMemory:nm}}for(var Bt=new Uint8Array(rt.buffer),bi=new Uint8Array(123),yi=25;yi>=0;--yi)bi[48+yi]=52+yi,bi[65+yi]=yi,bi[97+yi]=26+yi;bi[43]=62,bi[47]=63;function _i(ui,ji,on){for(var Cn,ft,p=0,Di=ji,c=on.length,F=ji+(c*3>>2)-(on[c-2]=="=")-(on[c-1]=="=");p<c;p+=4)Cn=bi[on.charCodeAt(p+1)],ft=bi[on.charCodeAt(p+2)],ui[Di++]=bi[on.charCodeAt(p)]<<2|Cn>>4,Di<F&&(ui[Di++]=Cn<<4|ft>>2),Di<F&&(ui[Di++]=ft<<6|bi[on.charCodeAt(p+3)])}return _i(Bt,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),_i(Bt,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),_i(Bt,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),_i(Bt,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),_i(Bt,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),_i(Bt,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),_i(Bt,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),_i(Bt,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),_i(Bt,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),_i(Bt,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),_i(Bt,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),_i(Bt,9803,"DA=="),_i(Bt,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),_i(Bt,9861,"Dg=="),_i(Bt,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),_i(Bt,9919,"EA=="),_i(Bt,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),_i(Bt,9986,"EgAAABISEgAAAAAAAAk="),_i(Bt,10035,"Cw=="),_i(Bt,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),_i(Bt,10093,"DA=="),_i(Bt,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),_i(Bt,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),_i(Bt,10428,"8Cw="),_i(Bt,10488,"BQ=="),_i(Bt,10500,"nQ=="),_i(Bt,10524,"ngAAAJ8AAAAQLQ=="),_i(Bt,10548,"Ag=="),_i(Bt,10563,"//////8="),Ut({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},De,rt.buffer)}(ys,G,Z)},instantiate:function(U,$){return{then:function(ye){var De=new V.Module(U);ye({instance:new V.Instance(De)})}}},RuntimeError:Error};O=[],typeof V!="object"&&Jt("no native wasm support detected");var G,Z=new V.Table({initial:160,maximum:160,element:"anyfunc"}),te=!1;function J(U,$){U||Jt("Assertion failed: "+$)}function oe(U){var $=i["_"+U];return J($,"Cannot call unknown function "+U+", make sure it is exported"),$}function Me(U,$,ye,De,rt){var Ct={string:function(on){var Cn=0;if(on!=null&&on!==0){var ft=(on.length<<2)+1;Cn=cu(ft),et(on,Cn,ft)}return Cn},array:function(on){var Cn=cu(on.length);return Et(on,Cn),Cn}};function Ut(on){return $==="string"?Se(on):$==="boolean"?Boolean(on):on}var Bt=oe(U),bi=[],yi=0;if(De)for(var _i=0;_i<De.length;_i++){var ui=Ct[ye[_i]];ui?(yi===0&&(yi=uu()),bi[_i]=ui(De[_i])):bi[_i]=De[_i]}var ji=Bt.apply(null,bi);return ji=Ut(ji),yi!==0&&xl(yi),ji}function Fe(U,$,ye,De){ye=ye||[];var rt=ye.every(function(Ut){return Ut==="number"}),Ct=$!=="string";return Ct&&rt&&!De?oe(U):function(){return Me(U,$,ye,arguments)}}var pe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ie(U,$,ye){for(var De=$+ye,rt=$;U[rt]&&!(rt>=De);)++rt;if(rt-$>16&&U.subarray&&pe)return pe.decode(U.subarray($,rt));for(var Ct="";$<rt;){var Ut=U[$++];if(!(Ut&128)){Ct+=String.fromCharCode(Ut);continue}var Bt=U[$++]&63;if((Ut&224)==192){Ct+=String.fromCharCode((Ut&31)<<6|Bt);continue}var bi=U[$++]&63;if((Ut&240)==224?Ut=(Ut&15)<<12|Bt<<6|bi:Ut=(Ut&7)<<18|Bt<<12|bi<<6|U[$++]&63,Ut<65536)Ct+=String.fromCharCode(Ut);else{var yi=Ut-65536;Ct+=String.fromCharCode(55296|yi>>10,56320|yi&1023)}}return Ct}function Se(U,$){return U?Ie(le,U,$):""}function me(U,$,ye,De){if(!(De>0))return 0;for(var rt=ye,Ct=ye+De-1,Ut=0;Ut<U.length;++Ut){var Bt=U.charCodeAt(Ut);if(Bt>=55296&&Bt<=57343){var bi=U.charCodeAt(++Ut);Bt=65536+((Bt&1023)<<10)|bi&1023}if(Bt<=127){if(ye>=Ct)break;$[ye++]=Bt}else if(Bt<=2047){if(ye+1>=Ct)break;$[ye++]=192|Bt>>6,$[ye++]=128|Bt&63}else if(Bt<=65535){if(ye+2>=Ct)break;$[ye++]=224|Bt>>12,$[ye++]=128|Bt>>6&63,$[ye++]=128|Bt&63}else{if(ye+3>=Ct)break;$[ye++]=240|Bt>>18,$[ye++]=128|Bt>>12&63,$[ye++]=128|Bt>>6&63,$[ye++]=128|Bt&63}}return $[ye]=0,ye-rt}function et(U,$,ye){return me(U,le,$,ye)}function nt(U){for(var $=0,ye=0;ye<U.length;++ye){var De=U.charCodeAt(ye);De>=55296&&De<=57343&&(De=65536+((De&1023)<<10)|U.charCodeAt(++ye)&1023),De<=127?++$:De<=2047?$+=2:De<=65535?$+=3:$+=4}return $}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Et(U,$){Oe.set(U,$)}var it=65536;function we(U,$){return U%$>0&&(U+=$-U%$),U}var ke,Oe,le,Ce,he,ge,Be;function We(U){ke=U,i.HEAP8=Oe=new Int8Array(U),i.HEAP16=Ce=new Int16Array(U),i.HEAP32=he=new Int32Array(U),i.HEAPU8=le=new Uint8Array(U),i.HEAPU16=new Uint16Array(U),i.HEAPU32=ge=new Uint32Array(U),i.HEAPF32=Be=new Float32Array(U),i.HEAPF64=new Float64Array(U)}var st=5255072,Xe=12032,gt=i.INITIAL_MEMORY||67108864;i.wasmMemory?G=i.wasmMemory:G=new V.Memory({initial:gt/it,maximum:2147483648/it}),G&&(ke=G.buffer),gt=ke.byteLength,We(ke),he[Xe>>2]=st;function Pt(U){for(;U.length>0;){var $=U.shift();if(typeof $=="function"){$(i);continue}var ye=$.func;typeof ye=="number"?$.arg===void 0?i.dynCall_v(ye):i.dynCall_vi(ye,$.arg):ye($.arg===void 0?null:$.arg)}}var ri=[],ut=[],bt=[],vt=[];function Ke(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Si(i.preRun.shift());Pt(ri)}function ei(){!i.noFSInit&&!He.init.initialized&&He.init(),Pt(ut)}function li(){He.ignorePermissions=!1,Pt(bt)}function $t(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Ti(i.postRun.shift());Pt(vt)}function Si(U){ri.unshift(U)}function Ti(U){vt.unshift(U)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function($,ye){var De=$>>>16,rt=$&65535,Ct=ye>>>16,Ut=ye&65535;return rt*Ut+(De*Ut+rt*Ct<<16)|0}),!Math.fround){var Yt=new Float32Array(1);Math.fround=function(U){return Yt[0]=U,Yt[0]}}Math.clz32||(Math.clz32=function(U){var $=32,ye=U>>16;return ye&&($-=16,U=ye),ye=U>>8,ye&&($-=8,U=ye),ye=U>>4,ye&&($-=4,U=ye),ye=U>>2,ye&&($-=2,U=ye),ye=U>>1,ye?$-2:$-U}),Math.trunc||(Math.trunc=function(U){return U<0?Math.ceil(U):Math.floor(U)});var mi=Math.abs,Wi=Math.ceil,Ci=Math.floor,ti=Math.min,Pe=0,Q=null;function ae(U){return U}function Qe(U){Pe++,i.monitorRunDependencies&&i.monitorRunDependencies(Pe)}function _t(U){if(Pe--,i.monitorRunDependencies&&i.monitorRunDependencies(Pe),Pe==0&&Q){var $=Q;Q=null,$()}}i.preloadedImages={},i.preloadedAudios={};function Jt(U){i.onAbort&&i.onAbort(U),U+="",b(U),te=!0,U="abort("+U+"). Build with -s ASSERTIONS=1 for more info.";var $=new V.RuntimeError(U);throw $}function di(U,$){return String.prototype.startsWith?U.startsWith($):U.indexOf($)===0}var wn="data:application/octet-stream;base64,";function Ln(U){return di(U,wn)}var hn="webp.wasm";Ln(hn)||(hn=m(hn));function Bi(){try{if(O)return new Uint8Array(O);var U=Us(hn);if(U)return U;if(!_)throw"both async and sync fetching of the wasm failed"}catch($){Jt($)}}function Xi(){return!O&&l&&typeof fetch=="function"?fetch(hn,{credentials:"same-origin"}).then(function(U){if(!U.ok)throw"failed to load wasm binary file at '"+hn+"'";return U.arrayBuffer()}).catch(function(){return Bi()}):e.resolve().then(Bi)}function Hn(){var U={env:ys,wasi_snapshot_preview1:ys};function $(Ut,Bt){var bi=Ut.exports;i.asm=bi,_t()}Qe();function ye(Ut){$(Ut.instance)}function De(Ut){return Xi().then(function(Bt){return V.instantiate(Bt,U)}).then(Ut,function(Bt){b("failed to asynchronously prepare wasm: "+Bt),Jt(Bt)})}function rt(){if(!O&&typeof V.instantiateStreaming=="function"&&!Ln(hn)&&typeof fetch=="function")fetch(hn,{credentials:"same-origin"}).then(function(Ut){var Bt=V.instantiateStreaming(Ut,U);return Bt.then(ye,function(bi){return b("wasm streaming compile failed: "+bi),b("falling back to ArrayBuffer instantiation"),De(ye)})});else return De(ye)}if(i.instantiateWasm)try{var Ct=i.instantiateWasm(U,$);return Ct}catch(Ut){return b("Module.instantiateWasm callback failed with error: "+Ut),!1}return rt(),{}}var Gn,Zr;ut.push({func:function(){Ia()}});function zn(U){return U}function fn(U){var $=/\b_Z[\w\d_]+/g;return U.replace($,function(ye){var De=ye;return ye===De?ye:De+" ["+ye+"]"})}function yn(){var U=new Error;if(!U.stack){try{throw new Error}catch($){U=$}if(!U.stack)return"(no stack trace available)"}return U.stack.toString()}function tn(){var U=yn();return i.extraStackTrace&&(U+=`
`+i.extraStackTrace()),fn(U)}function wr(U){return he[wl()>>2]=U,U}var Wn={splitPath:function(U){var $=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return $.exec(U).slice(1)},normalizeArray:function(U,$){for(var ye=0,De=U.length-1;De>=0;De--){var rt=U[De];rt==="."?U.splice(De,1):rt===".."?(U.splice(De,1),ye++):ye&&(U.splice(De,1),ye--)}if($)for(;ye;ye--)U.unshift("..");return U},normalize:function(U){var $=U.charAt(0)==="/",ye=U.substr(-1)==="/";return U=Wn.normalizeArray(U.split("/").filter(function(De){return!!De}),!$).join("/"),!U&&!$&&(U="."),U&&ye&&(U+="/"),($?"/":"")+U},dirname:function(U){var $=Wn.splitPath(U),ye=$[0],De=$[1];return!ye&&!De?".":(De&&(De=De.substr(0,De.length-1)),ye+De)},basename:function(U){if(U==="/")return"/";U=Wn.normalize(U),U=U.replace(/\/$/,"");var $=U.lastIndexOf("/");return $===-1?U:U.substr($+1)},extname:function(U){return Wn.splitPath(U)[3]},join:function(){var U=Array.prototype.slice.call(arguments,0);return Wn.normalize(U.join("/"))},join2:function(U,$){return Wn.normalize(U+"/"+$)}},lr={resolve:function(){for(var U="",$=!1,ye=arguments.length-1;ye>=-1&&!$;ye--){var De=ye>=0?arguments[ye]:He.cwd();if(typeof De!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!De)return"";U=De+"/"+U,$=De.charAt(0)==="/"}return U=Wn.normalizeArray(U.split("/").filter(function(rt){return!!rt}),!$).join("/"),($?"/":"")+U||"."},relative:function(U,$){U=lr.resolve(U).substr(1),$=lr.resolve($).substr(1);function ye(yi){for(var _i=0;_i<yi.length&&yi[_i]==="";_i++);for(var ui=yi.length-1;ui>=0&&yi[ui]==="";ui--);return _i>ui?[]:yi.slice(_i,ui-_i+1)}for(var De=ye(U.split("/")),rt=ye($.split("/")),Ct=Math.min(De.length,rt.length),Ut=Ct,Bt=0;Bt<Ct;Bt++)if(De[Bt]!==rt[Bt]){Ut=Bt;break}for(var bi=[],Bt=Ut;Bt<De.length;Bt++)bi.push("..");return bi=bi.concat(rt.slice(Ut)),bi.join("/")}},Kr={ttys:[],init:function(){},shutdown:function(){},register:function(U,$){Kr.ttys[U]={input:[],output:[],ops:$},He.registerDevice(U,Kr.stream_ops)},stream_ops:{open:function(U){var $=Kr.ttys[U.node.rdev];if(!$)throw new He.ErrnoError(43);U.tty=$,U.seekable=!1},close:function(U){U.tty.ops.flush(U.tty)},flush:function(U){U.tty.ops.flush(U.tty)},read:function(U,$,ye,De,rt){if(!U.tty||!U.tty.ops.get_char)throw new He.ErrnoError(60);for(var Ct=0,Ut=0;Ut<De;Ut++){var Bt;try{Bt=U.tty.ops.get_char(U.tty)}catch{throw new He.ErrnoError(29)}if(Bt===void 0&&Ct===0)throw new He.ErrnoError(6);if(Bt==null)break;Ct++,$[ye+Ut]=Bt}return Ct&&(U.node.timestamp=Date.now()),Ct},write:function(U,$,ye,De,rt){if(!U.tty||!U.tty.ops.put_char)throw new He.ErrnoError(60);try{for(var Ct=0;Ct<De;Ct++)U.tty.ops.put_char(U.tty,$[ye+Ct])}catch{throw new He.ErrnoError(29)}return De&&(U.node.timestamp=Date.now()),Ct}},default_tty_ops:{get_char:function(U){if(!U.input.length){var $=null;if(typeof window<"u"&&typeof window.prompt=="function"?($=window.prompt("Input: "),$!==null&&($+=`
`)):typeof readline=="function"&&($=readline(),$!==null&&($+=`
`)),!$)return null;U.input=Xo($,!0)}return U.input.shift()},put_char:function(U,$){$===null||$===10?(w(Ie(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(w(Ie(U.output,0)),U.output=[])}},default_tty1_ops:{put_char:function(U,$){$===null||$===10?(b(Ie(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(b(Ie(U.output,0)),U.output=[])}}},rn={ops_table:null,mount:function(U){return rn.createNode(null,"/",16895,0)},createNode:function(U,$,ye,De){if(He.isBlkdev(ye)||He.isFIFO(ye))throw new He.ErrnoError(63);rn.ops_table||(rn.ops_table={dir:{node:{getattr:rn.node_ops.getattr,setattr:rn.node_ops.setattr,lookup:rn.node_ops.lookup,mknod:rn.node_ops.mknod,rename:rn.node_ops.rename,unlink:rn.node_ops.unlink,rmdir:rn.node_ops.rmdir,readdir:rn.node_ops.readdir,symlink:rn.node_ops.symlink},stream:{llseek:rn.stream_ops.llseek}},file:{node:{getattr:rn.node_ops.getattr,setattr:rn.node_ops.setattr},stream:{llseek:rn.stream_ops.llseek,read:rn.stream_ops.read,write:rn.stream_ops.write,allocate:rn.stream_ops.allocate,mmap:rn.stream_ops.mmap,msync:rn.stream_ops.msync}},link:{node:{getattr:rn.node_ops.getattr,setattr:rn.node_ops.setattr,readlink:rn.node_ops.readlink},stream:{}},chrdev:{node:{getattr:rn.node_ops.getattr,setattr:rn.node_ops.setattr},stream:He.chrdev_stream_ops}});var rt=He.createNode(U,$,ye,De);return He.isDir(rt.mode)?(rt.node_ops=rn.ops_table.dir.node,rt.stream_ops=rn.ops_table.dir.stream,rt.contents={}):He.isFile(rt.mode)?(rt.node_ops=rn.ops_table.file.node,rt.stream_ops=rn.ops_table.file.stream,rt.usedBytes=0,rt.contents=null):He.isLink(rt.mode)?(rt.node_ops=rn.ops_table.link.node,rt.stream_ops=rn.ops_table.link.stream):He.isChrdev(rt.mode)&&(rt.node_ops=rn.ops_table.chrdev.node,rt.stream_ops=rn.ops_table.chrdev.stream),rt.timestamp=Date.now(),U&&(U.contents[$]=rt),rt},getFileDataAsRegularArray:function(U){if(U.contents&&U.contents.subarray){for(var $=[],ye=0;ye<U.usedBytes;++ye)$.push(U.contents[ye]);return $}return U.contents},getFileDataAsTypedArray:function(U){return U.contents?U.contents.subarray?U.contents.subarray(0,U.usedBytes):new Uint8Array(U.contents):new Uint8Array(0)},expandFileStorage:function(U,$){var ye=U.contents?U.contents.length:0;if(!(ye>=$)){var De=1024*1024;$=Math.max($,ye*(ye<De?2:1.125)>>>0),ye!=0&&($=Math.max($,256));var rt=U.contents;U.contents=new Uint8Array($),U.usedBytes>0&&U.contents.set(rt.subarray(0,U.usedBytes),0)}},resizeFileStorage:function(U,$){if(U.usedBytes!=$){if($==0){U.contents=null,U.usedBytes=0;return}if(!U.contents||U.contents.subarray){var ye=U.contents;U.contents=new Uint8Array($),ye&&U.contents.set(ye.subarray(0,Math.min($,U.usedBytes))),U.usedBytes=$;return}if(U.contents||(U.contents=[]),U.contents.length>$)U.contents.length=$;else for(;U.contents.length<$;)U.contents.push(0);U.usedBytes=$}},node_ops:{getattr:function(U){var $={};return $.dev=He.isChrdev(U.mode)?U.id:1,$.ino=U.id,$.mode=U.mode,$.nlink=1,$.uid=0,$.gid=0,$.rdev=U.rdev,He.isDir(U.mode)?$.size=4096:He.isFile(U.mode)?$.size=U.usedBytes:He.isLink(U.mode)?$.size=U.link.length:$.size=0,$.atime=new Date(U.timestamp),$.mtime=new Date(U.timestamp),$.ctime=new Date(U.timestamp),$.blksize=4096,$.blocks=Math.ceil($.size/$.blksize),$},setattr:function(U,$){$.mode!==void 0&&(U.mode=$.mode),$.timestamp!==void 0&&(U.timestamp=$.timestamp),$.size!==void 0&&rn.resizeFileStorage(U,$.size)},lookup:function(U,$){throw He.genericErrors[44]},mknod:function(U,$,ye,De){return rn.createNode(U,$,ye,De)},rename:function(U,$,ye){if(He.isDir(U.mode)){var De;try{De=He.lookupNode($,ye)}catch{}if(De)for(var rt in De.contents)throw new He.ErrnoError(55)}delete U.parent.contents[U.name],U.name=ye,$.contents[ye]=U,U.parent=$},unlink:function(U,$){delete U.contents[$]},rmdir:function(U,$){var ye=He.lookupNode(U,$);for(var De in ye.contents)throw new He.ErrnoError(55);delete U.contents[$]},readdir:function(U){var $=[".",".."];for(var ye in U.contents)!U.contents.hasOwnProperty(ye)||$.push(ye);return $},symlink:function(U,$,ye){var De=rn.createNode(U,$,41471,0);return De.link=ye,De},readlink:function(U){if(!He.isLink(U.mode))throw new He.ErrnoError(28);return U.link}},stream_ops:{read:function(U,$,ye,De,rt){var Ct=U.node.contents;if(rt>=U.node.usedBytes)return 0;var Ut=Math.min(U.node.usedBytes-rt,De);if(Ut>8&&Ct.subarray)$.set(Ct.subarray(rt,rt+Ut),ye);else for(var Bt=0;Bt<Ut;Bt++)$[ye+Bt]=Ct[rt+Bt];return Ut},write:function(U,$,ye,De,rt,Ct){if($.buffer===Oe.buffer&&(Ct=!1),!De)return 0;var Ut=U.node;if(Ut.timestamp=Date.now(),$.subarray&&(!Ut.contents||Ut.contents.subarray)){if(Ct)return Ut.contents=$.subarray(ye,ye+De),Ut.usedBytes=De,De;if(Ut.usedBytes===0&&rt===0)return Ut.contents=$.slice(ye,ye+De),Ut.usedBytes=De,De;if(rt+De<=Ut.usedBytes)return Ut.contents.set($.subarray(ye,ye+De),rt),De}if(rn.expandFileStorage(Ut,rt+De),Ut.contents.subarray&&$.subarray)Ut.contents.set($.subarray(ye,ye+De),rt);else for(var Bt=0;Bt<De;Bt++)Ut.contents[rt+Bt]=$[ye+Bt];return Ut.usedBytes=Math.max(Ut.usedBytes,rt+De),De},llseek:function(U,$,ye){var De=$;if(ye===1?De+=U.position:ye===2&&He.isFile(U.node.mode)&&(De+=U.node.usedBytes),De<0)throw new He.ErrnoError(28);return De},allocate:function(U,$,ye){rn.expandFileStorage(U.node,$+ye),U.node.usedBytes=Math.max(U.node.usedBytes,$+ye)},mmap:function(U,$,ye,De,rt,Ct){if(J($===0),!He.isFile(U.node.mode))throw new He.ErrnoError(43);var Ut,Bt,bi=U.node.contents;if(!(Ct&2)&&bi.buffer===ke)Bt=!1,Ut=bi.byteOffset;else{if((De>0||De+ye<bi.length)&&(bi.subarray?bi=bi.subarray(De,De+ye):bi=Array.prototype.slice.call(bi,De,De+ye)),Bt=!0,Ut=He.mmapAlloc(ye),!Ut)throw new He.ErrnoError(48);Oe.set(bi,Ut)}return{ptr:Ut,allocated:Bt}},msync:function(U,$,ye,De,rt){if(!He.isFile(U.node.mode))throw new He.ErrnoError(43);return rt&2||rn.stream_ops.write(U,$,0,De,ye,!1),0}}},He={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(U){if(!(U instanceof He.ErrnoError))throw U+" : "+tn();return wr(U.errno)},lookupPath:function(U,$){if(U=lr.resolve(He.cwd(),U),$=$||{},!U)return{path:"",node:null};var ye={follow_mount:!0,recurse_count:0};for(var De in ye)$[De]===void 0&&($[De]=ye[De]);if($.recurse_count>8)throw new He.ErrnoError(32);for(var rt=Wn.normalizeArray(U.split("/").filter(function(ji){return!!ji}),!1),Ct=He.root,Ut="/",Bt=0;Bt<rt.length;Bt++){var bi=Bt===rt.length-1;if(bi&&$.parent)break;if(Ct=He.lookupNode(Ct,rt[Bt]),Ut=Wn.join2(Ut,rt[Bt]),He.isMountpoint(Ct)&&(!bi||bi&&$.follow_mount)&&(Ct=Ct.mounted.root),!bi||$.follow)for(var yi=0;He.isLink(Ct.mode);){var _i=He.readlink(Ut);Ut=lr.resolve(Wn.dirname(Ut),_i);var ui=He.lookupPath(Ut,{recurse_count:$.recurse_count});if(Ct=ui.node,yi++>40)throw new He.ErrnoError(32)}}return{path:Ut,node:Ct}},getPath:function(U){for(var $;;){if(He.isRoot(U)){var ye=U.mount.mountpoint;return $?ye[ye.length-1]!=="/"?ye+"/"+$:ye+$:ye}$=$?U.name+"/"+$:U.name,U=U.parent}},hashName:function(U,$){for(var ye=0,De=0;De<$.length;De++)ye=(ye<<5)-ye+$.charCodeAt(De)|0;return(U+ye>>>0)%He.nameTable.length},hashAddNode:function(U){var $=He.hashName(U.parent.id,U.name);U.name_next=He.nameTable[$],He.nameTable[$]=U},hashRemoveNode:function(U){var $=He.hashName(U.parent.id,U.name);if(He.nameTable[$]===U)He.nameTable[$]=U.name_next;else for(var ye=He.nameTable[$];ye;){if(ye.name_next===U){ye.name_next=U.name_next;break}ye=ye.name_next}},lookupNode:function(U,$){var ye=He.mayLookup(U);if(ye)throw new He.ErrnoError(ye,U);for(var De=He.hashName(U.id,$),rt=He.nameTable[De];rt;rt=rt.name_next){var Ct=rt.name;if(rt.parent.id===U.id&&Ct===$)return rt}return He.lookup(U,$)},createNode:function(U,$,ye,De){var rt=new He.FSNode(U,$,ye,De);return He.hashAddNode(rt),rt},destroyNode:function(U){He.hashRemoveNode(U)},isRoot:function(U){return U===U.parent},isMountpoint:function(U){return!!U.mounted},isFile:function(U){return(U&61440)===32768},isDir:function(U){return(U&61440)===16384},isLink:function(U){return(U&61440)===40960},isChrdev:function(U){return(U&61440)===8192},isBlkdev:function(U){return(U&61440)===24576},isFIFO:function(U){return(U&61440)===4096},isSocket:function(U){return(U&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(U){var $=He.flagModes[U];if(typeof $>"u")throw new Error("Unknown file open mode: "+U);return $},flagsToPermissionString:function(U){var $=["r","w","rw"][U&3];return U&512&&($+="w"),$},nodePermissions:function(U,$){return He.ignorePermissions?0:$.indexOf("r")!==-1&&!(U.mode&292)||$.indexOf("w")!==-1&&!(U.mode&146)||$.indexOf("x")!==-1&&!(U.mode&73)?2:0},mayLookup:function(U){var $=He.nodePermissions(U,"x");return $||(U.node_ops.lookup?0:2)},mayCreate:function(U,$){try{var ye=He.lookupNode(U,$);return 20}catch{}return He.nodePermissions(U,"wx")},mayDelete:function(U,$,ye){var De;try{De=He.lookupNode(U,$)}catch(Ct){return Ct.errno}var rt=He.nodePermissions(U,"wx");if(rt)return rt;if(ye){if(!He.isDir(De.mode))return 54;if(He.isRoot(De)||He.getPath(De)===He.cwd())return 10}else if(He.isDir(De.mode))return 31;return 0},mayOpen:function(U,$){return U?He.isLink(U.mode)?32:He.isDir(U.mode)&&(He.flagsToPermissionString($)!=="r"||$&512)?31:He.nodePermissions(U,He.flagsToPermissionString($)):44},MAX_OPEN_FDS:4096,nextfd:function(U,$){U=U||0,$=$||He.MAX_OPEN_FDS;for(var ye=U;ye<=$;ye++)if(!He.streams[ye])return ye;throw new He.ErrnoError(33)},getStream:function(U){return He.streams[U]},createStream:function(U,$,ye){He.FSStream||(He.FSStream=function(){},He.FSStream.prototype={object:{get:function(){return this.node},set:function(Ut){this.node=Ut}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var De=new He.FSStream;for(var rt in U)De[rt]=U[rt];U=De;var Ct=He.nextfd($,ye);return U.fd=Ct,He.streams[Ct]=U,U},closeStream:function(U){He.streams[U]=null},chrdev_stream_ops:{open:function(U){var $=He.getDevice(U.node.rdev);U.stream_ops=$.stream_ops,U.stream_ops.open&&U.stream_ops.open(U)},llseek:function(){throw new He.ErrnoError(70)}},major:function(U){return U>>8},minor:function(U){return U&255},makedev:function(U,$){return U<<8|$},registerDevice:function(U,$){He.devices[U]={stream_ops:$}},getDevice:function(U){return He.devices[U]},getMounts:function(U){for(var $=[],ye=[U];ye.length;){var De=ye.pop();$.push(De),ye.push.apply(ye,De.mounts)}return $},syncfs:function(U,$){typeof U=="function"&&($=U,U=!1),He.syncFSRequests++,He.syncFSRequests>1&&b("warning: "+He.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ye=He.getMounts(He.root.mount),De=0;function rt(Ut){return He.syncFSRequests--,$(Ut)}function Ct(Ut){if(Ut)return Ct.errored?void 0:(Ct.errored=!0,rt(Ut));++De>=ye.length&&rt(null)}ye.forEach(function(Ut){if(!Ut.type.syncfs)return Ct(null);Ut.type.syncfs(Ut,U,Ct)})},mount:function(U,$,ye){var De=ye==="/",rt=!ye,Ct;if(De&&He.root)throw new He.ErrnoError(10);if(!De&&!rt){var Ut=He.lookupPath(ye,{follow_mount:!1});if(ye=Ut.path,Ct=Ut.node,He.isMountpoint(Ct))throw new He.ErrnoError(10);if(!He.isDir(Ct.mode))throw new He.ErrnoError(54)}var Bt={type:U,opts:$,mountpoint:ye,mounts:[]},bi=U.mount(Bt);return bi.mount=Bt,Bt.root=bi,De?He.root=bi:Ct&&(Ct.mounted=Bt,Ct.mount&&Ct.mount.mounts.push(Bt)),bi},unmount:function(U){var $=He.lookupPath(U,{follow_mount:!1});if(!He.isMountpoint($.node))throw new He.ErrnoError(28);var ye=$.node,De=ye.mounted,rt=He.getMounts(De);Object.keys(He.nameTable).forEach(function(Ut){for(var Bt=He.nameTable[Ut];Bt;){var bi=Bt.name_next;rt.indexOf(Bt.mount)!==-1&&He.destroyNode(Bt),Bt=bi}}),ye.mounted=null;var Ct=ye.mount.mounts.indexOf(De);ye.mount.mounts.splice(Ct,1)},lookup:function(U,$){return U.node_ops.lookup(U,$)},mknod:function(U,$,ye){var De=He.lookupPath(U,{parent:!0}),rt=De.node,Ct=Wn.basename(U);if(!Ct||Ct==="."||Ct==="..")throw new He.ErrnoError(28);var Ut=He.mayCreate(rt,Ct);if(Ut)throw new He.ErrnoError(Ut);if(!rt.node_ops.mknod)throw new He.ErrnoError(63);return rt.node_ops.mknod(rt,Ct,$,ye)},create:function(U,$){return $=$!==void 0?$:438,$&=4095,$|=32768,He.mknod(U,$,0)},mkdir:function(U,$){return $=$!==void 0?$:511,$&=1023,$|=16384,He.mknod(U,$,0)},mkdirTree:function(U,$){for(var ye=U.split("/"),De="",rt=0;rt<ye.length;++rt)if(!!ye[rt]){De+="/"+ye[rt];try{He.mkdir(De,$)}catch(Ct){if(Ct.errno!=20)throw Ct}}},mkdev:function(U,$,ye){return typeof ye>"u"&&(ye=$,$=438),$|=8192,He.mknod(U,$,ye)},symlink:function(U,$){if(!lr.resolve(U))throw new He.ErrnoError(44);var ye=He.lookupPath($,{parent:!0}),De=ye.node;if(!De)throw new He.ErrnoError(44);var rt=Wn.basename($),Ct=He.mayCreate(De,rt);if(Ct)throw new He.ErrnoError(Ct);if(!De.node_ops.symlink)throw new He.ErrnoError(63);return De.node_ops.symlink(De,rt,U)},rename:function(U,$){var ye=Wn.dirname(U),De=Wn.dirname($),rt=Wn.basename(U),Ct=Wn.basename($),Ut,Bt,bi;if(Ut=He.lookupPath(U,{parent:!0}),Bt=Ut.node,Ut=He.lookupPath($,{parent:!0}),bi=Ut.node,!Bt||!bi)throw new He.ErrnoError(44);if(Bt.mount!==bi.mount)throw new He.ErrnoError(75);var yi=He.lookupNode(Bt,rt),_i=lr.relative(U,De);if(_i.charAt(0)!==".")throw new He.ErrnoError(28);if(_i=lr.relative($,ye),_i.charAt(0)!==".")throw new He.ErrnoError(55);var ui;try{ui=He.lookupNode(bi,Ct)}catch{}if(yi!==ui){var ji=He.isDir(yi.mode),on=He.mayDelete(Bt,rt,ji);if(on)throw new He.ErrnoError(on);if(on=ui?He.mayDelete(bi,Ct,ji):He.mayCreate(bi,Ct),on)throw new He.ErrnoError(on);if(!Bt.node_ops.rename)throw new He.ErrnoError(63);if(He.isMountpoint(yi)||ui&&He.isMountpoint(ui))throw new He.ErrnoError(10);if(bi!==Bt&&(on=He.nodePermissions(Bt,"w"),on))throw new He.ErrnoError(on);try{He.trackingDelegate.willMovePath&&He.trackingDelegate.willMovePath(U,$)}catch(Cn){b("FS.trackingDelegate['willMovePath']('"+U+"', '"+$+"') threw an exception: "+Cn.message)}He.hashRemoveNode(yi);try{Bt.node_ops.rename(yi,bi,Ct)}catch(Cn){throw Cn}finally{He.hashAddNode(yi)}try{He.trackingDelegate.onMovePath&&He.trackingDelegate.onMovePath(U,$)}catch(Cn){b("FS.trackingDelegate['onMovePath']('"+U+"', '"+$+"') threw an exception: "+Cn.message)}}},rmdir:function(U){var $=He.lookupPath(U,{parent:!0}),ye=$.node,De=Wn.basename(U),rt=He.lookupNode(ye,De),Ct=He.mayDelete(ye,De,!0);if(Ct)throw new He.ErrnoError(Ct);if(!ye.node_ops.rmdir)throw new He.ErrnoError(63);if(He.isMountpoint(rt))throw new He.ErrnoError(10);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(U)}catch(Ut){b("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+Ut.message)}ye.node_ops.rmdir(ye,De),He.destroyNode(rt);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(U)}catch(Ut){b("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+Ut.message)}},readdir:function(U){var $=He.lookupPath(U,{follow:!0}),ye=$.node;if(!ye.node_ops.readdir)throw new He.ErrnoError(54);return ye.node_ops.readdir(ye)},unlink:function(U){var $=He.lookupPath(U,{parent:!0}),ye=$.node,De=Wn.basename(U),rt=He.lookupNode(ye,De),Ct=He.mayDelete(ye,De,!1);if(Ct)throw new He.ErrnoError(Ct);if(!ye.node_ops.unlink)throw new He.ErrnoError(63);if(He.isMountpoint(rt))throw new He.ErrnoError(10);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(U)}catch(Ut){b("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+Ut.message)}ye.node_ops.unlink(ye,De),He.destroyNode(rt);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(U)}catch(Ut){b("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+Ut.message)}},readlink:function(U){var $=He.lookupPath(U),ye=$.node;if(!ye)throw new He.ErrnoError(44);if(!ye.node_ops.readlink)throw new He.ErrnoError(28);return lr.resolve(He.getPath(ye.parent),ye.node_ops.readlink(ye))},stat:function(U,$){var ye=He.lookupPath(U,{follow:!$}),De=ye.node;if(!De)throw new He.ErrnoError(44);if(!De.node_ops.getattr)throw new He.ErrnoError(63);return De.node_ops.getattr(De)},lstat:function(U){return He.stat(U,!0)},chmod:function(U,$,ye){var De;if(typeof U=="string"){var rt=He.lookupPath(U,{follow:!ye});De=rt.node}else De=U;if(!De.node_ops.setattr)throw new He.ErrnoError(63);De.node_ops.setattr(De,{mode:$&4095|De.mode&-4096,timestamp:Date.now()})},lchmod:function(U,$){He.chmod(U,$,!0)},fchmod:function(U,$){var ye=He.getStream(U);if(!ye)throw new He.ErrnoError(8);He.chmod(ye.node,$)},chown:function(U,$,ye,De){var rt;if(typeof U=="string"){var Ct=He.lookupPath(U,{follow:!De});rt=Ct.node}else rt=U;if(!rt.node_ops.setattr)throw new He.ErrnoError(63);rt.node_ops.setattr(rt,{timestamp:Date.now()})},lchown:function(U,$,ye){He.chown(U,$,ye,!0)},fchown:function(U,$,ye){var De=He.getStream(U);if(!De)throw new He.ErrnoError(8);He.chown(De.node,$,ye)},truncate:function(U,$){if($<0)throw new He.ErrnoError(28);var ye;if(typeof U=="string"){var De=He.lookupPath(U,{follow:!0});ye=De.node}else ye=U;if(!ye.node_ops.setattr)throw new He.ErrnoError(63);if(He.isDir(ye.mode))throw new He.ErrnoError(31);if(!He.isFile(ye.mode))throw new He.ErrnoError(28);var rt=He.nodePermissions(ye,"w");if(rt)throw new He.ErrnoError(rt);ye.node_ops.setattr(ye,{size:$,timestamp:Date.now()})},ftruncate:function(U,$){var ye=He.getStream(U);if(!ye)throw new He.ErrnoError(8);if((ye.flags&2097155)===0)throw new He.ErrnoError(28);He.truncate(ye.node,$)},utime:function(U,$,ye){var De=He.lookupPath(U,{follow:!0}),rt=De.node;rt.node_ops.setattr(rt,{timestamp:Math.max($,ye)})},open:function(U,$,ye,De,rt){if(U==="")throw new He.ErrnoError(44);$=typeof $=="string"?He.modeStringToFlags($):$,ye=typeof ye>"u"?438:ye,$&64?ye=ye&4095|32768:ye=0;var Ct;if(typeof U=="object")Ct=U;else{U=Wn.normalize(U);try{var Ut=He.lookupPath(U,{follow:!($&131072)});Ct=Ut.node}catch{}}var Bt=!1;if($&64)if(Ct){if($&128)throw new He.ErrnoError(20)}else Ct=He.mknod(U,ye,0),Bt=!0;if(!Ct)throw new He.ErrnoError(44);if(He.isChrdev(Ct.mode)&&($&=-513),$&65536&&!He.isDir(Ct.mode))throw new He.ErrnoError(54);if(!Bt){var bi=He.mayOpen(Ct,$);if(bi)throw new He.ErrnoError(bi)}$&512&&He.truncate(Ct,0),$&=-131713;var yi=He.createStream({node:Ct,path:He.getPath(Ct),flags:$,seekable:!0,position:0,stream_ops:Ct.stream_ops,ungotten:[],error:!1},De,rt);yi.stream_ops.open&&yi.stream_ops.open(yi),i.logReadFiles&&!($&1)&&(He.readFiles||(He.readFiles={}),U in He.readFiles||(He.readFiles[U]=1,b("FS.trackingDelegate error on read file: "+U)));try{if(He.trackingDelegate.onOpenFile){var _i=0;($&2097155)!==1&&(_i|=He.tracking.openFlags.READ),($&2097155)!==0&&(_i|=He.tracking.openFlags.WRITE),He.trackingDelegate.onOpenFile(U,_i)}}catch(ui){b("FS.trackingDelegate['onOpenFile']('"+U+"', flags) threw an exception: "+ui.message)}return yi},close:function(U){if(He.isClosed(U))throw new He.ErrnoError(8);U.getdents&&(U.getdents=null);try{U.stream_ops.close&&U.stream_ops.close(U)}catch($){throw $}finally{He.closeStream(U.fd)}U.fd=null},isClosed:function(U){return U.fd===null},llseek:function(U,$,ye){if(He.isClosed(U))throw new He.ErrnoError(8);if(!U.seekable||!U.stream_ops.llseek)throw new He.ErrnoError(70);if(ye!=0&&ye!=1&&ye!=2)throw new He.ErrnoError(28);return U.position=U.stream_ops.llseek(U,$,ye),U.ungotten=[],U.position},read:function(U,$,ye,De,rt){if(De<0||rt<0)throw new He.ErrnoError(28);if(He.isClosed(U))throw new He.ErrnoError(8);if((U.flags&2097155)===1)throw new He.ErrnoError(8);if(He.isDir(U.node.mode))throw new He.ErrnoError(31);if(!U.stream_ops.read)throw new He.ErrnoError(28);var Ct=typeof rt<"u";if(!Ct)rt=U.position;else if(!U.seekable)throw new He.ErrnoError(70);var Ut=U.stream_ops.read(U,$,ye,De,rt);return Ct||(U.position+=Ut),Ut},write:function(U,$,ye,De,rt,Ct){if(De<0||rt<0)throw new He.ErrnoError(28);if(He.isClosed(U))throw new He.ErrnoError(8);if((U.flags&2097155)===0)throw new He.ErrnoError(8);if(He.isDir(U.node.mode))throw new He.ErrnoError(31);if(!U.stream_ops.write)throw new He.ErrnoError(28);U.seekable&&U.flags&1024&&He.llseek(U,0,2);var Ut=typeof rt<"u";if(!Ut)rt=U.position;else if(!U.seekable)throw new He.ErrnoError(70);var Bt=U.stream_ops.write(U,$,ye,De,rt,Ct);Ut||(U.position+=Bt);try{U.path&&He.trackingDelegate.onWriteToFile&&He.trackingDelegate.onWriteToFile(U.path)}catch(bi){b("FS.trackingDelegate['onWriteToFile']('"+U.path+"') threw an exception: "+bi.message)}return Bt},allocate:function(U,$,ye){if(He.isClosed(U))throw new He.ErrnoError(8);if($<0||ye<=0)throw new He.ErrnoError(28);if((U.flags&2097155)===0)throw new He.ErrnoError(8);if(!He.isFile(U.node.mode)&&!He.isDir(U.node.mode))throw new He.ErrnoError(43);if(!U.stream_ops.allocate)throw new He.ErrnoError(138);U.stream_ops.allocate(U,$,ye)},mmap:function(U,$,ye,De,rt,Ct){if((rt&2)!==0&&(Ct&2)===0&&(U.flags&2097155)!==2)throw new He.ErrnoError(2);if((U.flags&2097155)===1)throw new He.ErrnoError(2);if(!U.stream_ops.mmap)throw new He.ErrnoError(43);return U.stream_ops.mmap(U,$,ye,De,rt,Ct)},msync:function(U,$,ye,De,rt){return!U||!U.stream_ops.msync?0:U.stream_ops.msync(U,$,ye,De,rt)},munmap:function(U){return 0},ioctl:function(U,$,ye){if(!U.stream_ops.ioctl)throw new He.ErrnoError(59);return U.stream_ops.ioctl(U,$,ye)},readFile:function(U,$){if($=$||{},$.flags=$.flags||"r",$.encoding=$.encoding||"binary",$.encoding!=="utf8"&&$.encoding!=="binary")throw new Error('Invalid encoding type "'+$.encoding+'"');var ye,De=He.open(U,$.flags),rt=He.stat(U),Ct=rt.size,Ut=new Uint8Array(Ct);return He.read(De,Ut,0,Ct,0),$.encoding==="utf8"?ye=Ie(Ut,0):$.encoding==="binary"&&(ye=Ut),He.close(De),ye},writeFile:function(U,$,ye){ye=ye||{},ye.flags=ye.flags||"w";var De=He.open(U,ye.flags,ye.mode);if(typeof $=="string"){var rt=new Uint8Array(nt($)+1),Ct=me($,rt,0,rt.length);He.write(De,rt,0,Ct,void 0,ye.canOwn)}else if(ArrayBuffer.isView($))He.write(De,$,0,$.byteLength,void 0,ye.canOwn);else throw new Error("Unsupported data type");He.close(De)},cwd:function(){return He.currentPath},chdir:function(U){var $=He.lookupPath(U,{follow:!0});if($.node===null)throw new He.ErrnoError(44);if(!He.isDir($.node.mode))throw new He.ErrnoError(54);var ye=He.nodePermissions($.node,"x");if(ye)throw new He.ErrnoError(ye);He.currentPath=$.path},createDefaultDirectories:function(){He.mkdir("/tmp"),He.mkdir("/home"),He.mkdir("/home/web_user")},createDefaultDevices:function(){He.mkdir("/dev"),He.registerDevice(He.makedev(1,3),{read:function(){return 0},write:function(ye,De,rt,Ct,Ut){return Ct}}),He.mkdev("/dev/null",He.makedev(1,3)),Kr.register(He.makedev(5,0),Kr.default_tty_ops),Kr.register(He.makedev(6,0),Kr.default_tty1_ops),He.mkdev("/dev/tty",He.makedev(5,0)),He.mkdev("/dev/tty1",He.makedev(6,0));var U;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var $=new Uint8Array(1);U=function(){return crypto.getRandomValues($),$[0]}}U||(U=function(){Jt("random_device")}),He.createDevice("/dev","random",U),He.createDevice("/dev","urandom",U),He.mkdir("/dev/shm"),He.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){He.mkdir("/proc"),He.mkdir("/proc/self"),He.mkdir("/proc/self/fd"),He.mount({mount:function(){var U=He.createNode("/proc/self","fd",16895,73);return U.node_ops={lookup:function($,ye){var De=+ye,rt=He.getStream(De);if(!rt)throw new He.ErrnoError(8);var Ct={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return rt.path}}};return Ct.parent=Ct,Ct}},U}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?He.createDevice("/dev","stdin",i.stdin):He.symlink("/dev/tty","/dev/stdin"),i.stdout?He.createDevice("/dev","stdout",null,i.stdout):He.symlink("/dev/tty","/dev/stdout"),i.stderr?He.createDevice("/dev","stderr",null,i.stderr):He.symlink("/dev/tty1","/dev/stderr"),He.open("/dev/stdin","r"),He.open("/dev/stdout","w"),He.open("/dev/stderr","w")},ensureErrnoError:function(){He.ErrnoError||(He.ErrnoError=function($,ye){this.node=ye,this.setErrno=function(De){this.errno=De},this.setErrno($),this.message="FS error"},He.ErrnoError.prototype=new Error,He.ErrnoError.prototype.constructor=He.ErrnoError,[44].forEach(function(U){He.genericErrors[U]=new He.ErrnoError(U),He.genericErrors[U].stack="<generic error, no stack>"}))},staticInit:function(){He.ensureErrnoError(),He.nameTable=new Array(4096),He.mount(rn,{},"/"),He.createDefaultDirectories(),He.createDefaultDevices(),He.createSpecialDirectories(),He.filesystems={MEMFS:rn}},init:function(U,$,ye){He.init.initialized=!0,He.ensureErrnoError(),i.stdin=U||i.stdin,i.stdout=$||i.stdout,i.stderr=ye||i.stderr,He.createStandardStreams()},quit:function(){He.init.initialized=!1;var U=i._fflush;U&&U(0);for(var $=0;$<He.streams.length;$++){var ye=He.streams[$];!ye||He.close(ye)}},getMode:function(U,$){var ye=0;return U&&(ye|=365),$&&(ye|=146),ye},joinPath:function(U,$){var ye=Wn.join.apply(null,U);return $&&ye[0]=="/"&&(ye=ye.substr(1)),ye},absolutePath:function(U,$){return lr.resolve($,U)},standardizePath:function(U){return Wn.normalize(U)},findObject:function(U,$){var ye=He.analyzePath(U,$);return ye.exists?ye.object:(wr(ye.error),null)},analyzePath:function(U,$){try{var ye=He.lookupPath(U,{follow:!$});U=ye.path}catch{}var De={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ye=He.lookupPath(U,{parent:!0});De.parentExists=!0,De.parentPath=ye.path,De.parentObject=ye.node,De.name=Wn.basename(U),ye=He.lookupPath(U,{follow:!$}),De.exists=!0,De.path=ye.path,De.object=ye.node,De.name=ye.node.name,De.isRoot=ye.path==="/"}catch(rt){De.error=rt.errno}return De},createFolder:function(U,$,ye,De){var rt=Wn.join2(typeof U=="string"?U:He.getPath(U),$),Ct=He.getMode(ye,De);return He.mkdir(rt,Ct)},createPath:function(U,$,ye,De){U=typeof U=="string"?U:He.getPath(U);for(var rt=$.split("/").reverse();rt.length;){var Ct=rt.pop();if(!!Ct){var Ut=Wn.join2(U,Ct);try{He.mkdir(Ut)}catch{}U=Ut}}return Ut},createFile:function(U,$,ye,De,rt){var Ct=Wn.join2(typeof U=="string"?U:He.getPath(U),$),Ut=He.getMode(De,rt);return He.create(Ct,Ut)},createDataFile:function(U,$,ye,De,rt,Ct){var Ut=$?Wn.join2(typeof U=="string"?U:He.getPath(U),$):U,Bt=He.getMode(De,rt),bi=He.create(Ut,Bt);if(ye){if(typeof ye=="string"){for(var yi=new Array(ye.length),_i=0,ui=ye.length;_i<ui;++_i)yi[_i]=ye.charCodeAt(_i);ye=yi}He.chmod(bi,Bt|146);var ji=He.open(bi,"w");He.write(ji,ye,0,ye.length,0,Ct),He.close(ji),He.chmod(bi,Bt)}return bi},createDevice:function(U,$,ye,De){var rt=Wn.join2(typeof U=="string"?U:He.getPath(U),$),Ct=He.getMode(!!ye,!!De);He.createDevice.major||(He.createDevice.major=64);var Ut=He.makedev(He.createDevice.major++,0);return He.registerDevice(Ut,{open:function(Bt){Bt.seekable=!1},close:function(Bt){De&&De.buffer&&De.buffer.length&&De(10)},read:function(Bt,bi,yi,_i,ui){for(var ji=0,on=0;on<_i;on++){var Cn;try{Cn=ye()}catch{throw new He.ErrnoError(29)}if(Cn===void 0&&ji===0)throw new He.ErrnoError(6);if(Cn==null)break;ji++,bi[yi+on]=Cn}return ji&&(Bt.node.timestamp=Date.now()),ji},write:function(Bt,bi,yi,_i,ui){for(var ji=0;ji<_i;ji++)try{De(bi[yi+ji])}catch{throw new He.ErrnoError(29)}return _i&&(Bt.node.timestamp=Date.now()),ji}}),He.mkdev(rt,Ct,Ut)},createLink:function(U,$,ye,De,rt){var Ct=Wn.join2(typeof U=="string"?U:He.getPath(U),$);return He.symlink(ye,Ct)},forceLoadFile:function(U){if(U.isDevice||U.isFolder||U.link||U.contents)return!0;var $=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(r)try{U.contents=Xo(r(U.url),!0),U.usedBytes=U.contents.length}catch{$=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return $||wr(29),$},createLazyFile:function(U,$,ye,De,rt){function Ct(){this.lengthKnown=!1,this.chunks=[]}if(Ct.prototype.get=function(ji){if(!(ji>this.length-1||ji<0)){var on=ji%this.chunkSize,Cn=ji/this.chunkSize|0;return this.getter(Cn)[on]}},Ct.prototype.setDataGetter=function(ji){this.getter=ji},Ct.prototype.cacheLength=function(){var ji=new XMLHttpRequest;if(ji.open("HEAD",ye,!1),ji.send(null),!(ji.status>=200&&ji.status<300||ji.status===304))throw new Error("Couldn't load "+ye+". Status: "+ji.status);var on=Number(ji.getResponseHeader("Content-length")),Cn,ft=(Cn=ji.getResponseHeader("Accept-Ranges"))&&Cn==="bytes",p=(Cn=ji.getResponseHeader("Content-Encoding"))&&Cn==="gzip",Di=1024*1024;ft||(Di=on);var c=function(mn,Qn){if(mn>Qn)throw new Error("invalid range ("+mn+", "+Qn+") or no bytes requested!");if(Qn>on-1)throw new Error("only "+on+" bytes available! programmer error!");var vo=new XMLHttpRequest;if(vo.open("GET",ye,!1),on!==Di&&vo.setRequestHeader("Range","bytes="+mn+"-"+Qn),typeof Uint8Array<"u"&&(vo.responseType="arraybuffer"),vo.overrideMimeType&&vo.overrideMimeType("text/plain; charset=x-user-defined"),vo.send(null),!(vo.status>=200&&vo.status<300||vo.status===304))throw new Error("Couldn't load "+ye+". Status: "+vo.status);return vo.response!==void 0?new Uint8Array(vo.response||[]):Xo(vo.responseText||"",!0)},F=this;F.setDataGetter(function(mn){var Qn=mn*Di,vo=(mn+1)*Di-1;if(vo=Math.min(vo,on-1),typeof F.chunks[mn]>"u"&&(F.chunks[mn]=c(Qn,vo)),typeof F.chunks[mn]>"u")throw new Error("doXHR failed!");return F.chunks[mn]}),(p||!on)&&(Di=on=1,on=this.getter(0).length,Di=on,w("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=on,this._chunkSize=Di,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Ut,Bt}else var Bt={isDevice:!1,url:ye};var bi=He.createFile(U,$,Bt,De,rt);Bt.contents?bi.contents=Bt.contents:Bt.url&&(bi.contents=null,bi.url=Bt.url),Object.defineProperties(bi,{usedBytes:{get:function(){return this.contents.length}}});var yi={},_i=Object.keys(bi.stream_ops);return _i.forEach(function(ui){var ji=bi.stream_ops[ui];yi[ui]=function(){if(!He.forceLoadFile(bi))throw new He.ErrnoError(29);return ji.apply(null,arguments)}}),yi.read=function(ji,on,Cn,ft,p){if(!He.forceLoadFile(bi))throw new He.ErrnoError(29);var Di=ji.node.contents;if(p>=Di.length)return 0;var c=Math.min(Di.length-p,ft);if(Di.slice)for(var F=0;F<c;F++)on[Cn+F]=Di[p+F];else for(var F=0;F<c;F++)on[Cn+F]=Di.get(p+F);return c},bi.stream_ops=yi,bi},createPreloadedFile:function(U,$,ye,De,rt,Ct,Ut,Bt,bi,yi){Te.init();var _i=$?lr.resolve(Wn.join2(U,$)):U;function ui(ji){function on(ft){yi&&yi(),Bt||He.createDataFile(U,$,ft,De,rt,bi),Ct&&Ct(),_t()}var Cn=!1;i.preloadPlugins.forEach(function(ft){Cn||ft.canHandle(_i)&&(ft.handle(ji,_i,on,function(){Ut&&Ut(),_t()}),Cn=!0)}),Cn||on(ji)}Qe(),typeof ye=="string"?Te.asyncLoad(ye,function(ji){ui(ji)},Ut):ui(ye)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(U,$,ye){$=$||function(){},ye=ye||function(){};var De=He.indexedDB();try{var rt=De.open(He.DB_NAME(),He.DB_VERSION)}catch(Ct){return ye(Ct)}rt.onupgradeneeded=function(){w("creating db");var Ut=rt.result;Ut.createObjectStore(He.DB_STORE_NAME)},rt.onsuccess=function(){var Ut=rt.result,Bt=Ut.transaction([He.DB_STORE_NAME],"readwrite"),bi=Bt.objectStore(He.DB_STORE_NAME),yi=0,_i=0,ui=U.length;function ji(){_i==0?$():ye()}U.forEach(function(on){var Cn=bi.put(He.analyzePath(on).object.contents,on);Cn.onsuccess=function(){yi++,yi+_i==ui&&ji()},Cn.onerror=function(){_i++,yi+_i==ui&&ji()}}),Bt.onerror=ye},rt.onerror=ye},loadFilesFromDB:function(U,$,ye){$=$||function(){},ye=ye||function(){};var De=He.indexedDB();try{var rt=De.open(He.DB_NAME(),He.DB_VERSION)}catch(Ct){return ye(Ct)}rt.onupgradeneeded=ye,rt.onsuccess=function(){var Ut=rt.result;try{var Bt=Ut.transaction([He.DB_STORE_NAME],"readonly")}catch(on){ye(on);return}var bi=Bt.objectStore(He.DB_STORE_NAME),yi=0,_i=0,ui=U.length;function ji(){_i==0?$():ye()}U.forEach(function(on){var Cn=bi.get(on);Cn.onsuccess=function(){He.analyzePath(on).exists&&He.unlink(on),He.createDataFile(Wn.dirname(on),Wn.basename(on),Cn.result,!0,!0,!0),yi++,yi+_i==ui&&ji()},Cn.onerror=function(){_i++,yi+_i==ui&&ji()}}),Bt.onerror=ye},rt.onerror=ye},mmapAlloc:function(U){for(var $=v(U,16384),ye=Vs($);U<$;)Oe[ye+U++]=0;return ye}};function yo(U,$){if(Te.mainLoop.timingMode=U,Te.mainLoop.timingValue=$,!Te.mainLoop.func)return 1;if(U==0)Te.mainLoop.scheduler=function(){var Ut=Math.max(0,Te.mainLoop.tickStartTime+$-_o())|0;setTimeout(Te.mainLoop.runner,Ut)},Te.mainLoop.method="timeout";else if(U==1)Te.mainLoop.scheduler=function(){Te.requestAnimationFrame(Te.mainLoop.runner)},Te.mainLoop.method="rAF";else if(U==2){if(typeof setImmediate>"u"){var ye=[],De="setimmediate",rt=function(Ct){(Ct.data===De||Ct.data.target===De)&&(Ct.stopPropagation(),ye.shift()())};addEventListener("message",rt,!0),setImmediate=function(Ut){ye.push(Ut),postMessage(De,"*")}}Te.mainLoop.scheduler=function(){setImmediate(Te.mainLoop.runner)},Te.mainLoop.method="immediate"}return 0}var _o;typeof performance<"u"&&performance.now?_o=function(){return performance.now()}:_o=Date.now;function co(U,$,ye,De,rt){J(!Te.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Te.mainLoop.func=U,Te.mainLoop.arg=De;var Ct;typeof De<"u"?Ct=function(){i.dynCall_vi(U,De)}:Ct=function(){i.dynCall_v(U)};var Ut=Te.mainLoop.currentlyRunningMainloop;if(Te.mainLoop.runner=function(){if(!te){if(Te.mainLoop.queue.length>0){var bi=Date.now(),yi=Te.mainLoop.queue.shift();if(yi.func(yi.arg),Te.mainLoop.remainingBlockers){var _i=Te.mainLoop.remainingBlockers,ui=_i%1==0?_i-1:Math.floor(_i);yi.counted?Te.mainLoop.remainingBlockers=ui:(ui=ui+.5,Te.mainLoop.remainingBlockers=(8*_i+ui)/9)}if(console.log('main loop blocker "'+yi.name+'" took '+(Date.now()-bi)+" ms"),Te.mainLoop.updateStatus(),Ut<Te.mainLoop.currentlyRunningMainloop)return;setTimeout(Te.mainLoop.runner,0);return}if(!(Ut<Te.mainLoop.currentlyRunningMainloop)){if(Te.mainLoop.currentFrameNumber=Te.mainLoop.currentFrameNumber+1|0,Te.mainLoop.timingMode==1&&Te.mainLoop.timingValue>1&&Te.mainLoop.currentFrameNumber%Te.mainLoop.timingValue!=0){Te.mainLoop.scheduler();return}else Te.mainLoop.timingMode==0&&(Te.mainLoop.tickStartTime=_o());Te.mainLoop.runIter(Ct),!(Ut<Te.mainLoop.currentlyRunningMainloop)&&(typeof Ge=="object"&&Ge.audio&&Ge.audio.queueNewAudioData&&Ge.audio.queueNewAudioData(),Te.mainLoop.scheduler())}}},rt||($&&$>0?yo(0,1e3/$):yo(1,1),Te.mainLoop.scheduler()),ye)throw"unwind"}var Te={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Te.mainLoop.scheduler=null,Te.mainLoop.currentlyRunningMainloop++},resume:function(){Te.mainLoop.currentlyRunningMainloop++;var U=Te.mainLoop.timingMode,$=Te.mainLoop.timingValue,ye=Te.mainLoop.func;Te.mainLoop.func=null,co(ye,0,!1,Te.mainLoop.arg,!0),yo(U,$),Te.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var U=i.statusMessage||"Please wait...",$=Te.mainLoop.remainingBlockers,ye=Te.mainLoop.expectedBlockers;$?$<ye?i.setStatus(U+" ("+(ye-$)+"/"+ye+")"):i.setStatus(U):i.setStatus("")}},runIter:function(U){if(!te){if(i.preMainLoop){var $=i.preMainLoop();if($===!1)return}try{U()}catch(ye){if(ye instanceof Ao)return;if(ye=="unwind")return;throw ye&&typeof ye=="object"&&ye.stack&&b("exception thrown: "+[ye,ye.stack]),ye}i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),Te.initted)return;Te.initted=!0;try{new Blob,Te.hasBlobConstructor=!0}catch{Te.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Te.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:Te.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Te.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&typeof Te.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var U={};U.canHandle=function(Ct){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(Ct)},U.handle=function(Ct,Ut,Bt,bi){var yi=null;if(Te.hasBlobConstructor)try{yi=new Blob([Ct],{type:Te.getMimetype(Ut)}),yi.size!==Ct.length&&(yi=new Blob([new Uint8Array(Ct).buffer],{type:Te.getMimetype(Ut)}))}catch(on){C("Blob constructor present but fails: "+on+"; falling back to blob builder")}if(!yi){var _i=new Te.BlobBuilder;_i.append(new Uint8Array(Ct).buffer),yi=_i.getBlob()}var ui=Te.URLObject.createObjectURL(yi),ji=new Image;ji.onload=function(){J(ji.complete,"Image "+Ut+" could not be decoded");var Cn=document.createElement("canvas");Cn.width=ji.width,Cn.height=ji.height;var ft=Cn.getContext("2d");ft.drawImage(ji,0,0),i.preloadedImages[Ut]=Cn,Te.URLObject.revokeObjectURL(ui),Bt&&Bt(Ct)},ji.onerror=function(Cn){console.log("Image "+ui+" could not be decoded"),bi&&bi()},ji.src=ui},i.preloadPlugins.push(U);var $={};$.canHandle=function(Ct){return!i.noAudioDecoding&&Ct.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},$.handle=function(Ct,Ut,Bt,bi){var yi=!1;function _i(ft){yi||(yi=!0,i.preloadedAudios[Ut]=ft,Bt&&Bt(Ct))}function ui(){yi||(yi=!0,i.preloadedAudios[Ut]=new Audio,bi&&bi())}if(Te.hasBlobConstructor){try{var ji=new Blob([Ct],{type:Te.getMimetype(Ut)})}catch{return ui()}var on=Te.URLObject.createObjectURL(ji),Cn=new Audio;Cn.addEventListener("canplaythrough",function(){_i(Cn)},!1),Cn.onerror=function(p){if(yi)return;console.log("warning: browser could not fully decode audio "+Ut+", trying slower base64 approach");function Di(c){for(var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mn="=",Qn="",vo=0,ne=0,Br=0;Br<c.length;Br++)for(vo=vo<<8|c[Br],ne+=8;ne>=6;){var ma=vo>>ne-6&63;ne-=6,Qn+=F[ma]}return ne==2?(Qn+=F[(vo&3)<<4],Qn+=mn+mn):ne==4&&(Qn+=F[(vo&15)<<2],Qn+=mn),Qn}Cn.src="data:audio/x-"+Ut.substr(-3)+";base64,"+Di(Ct),_i(Cn)},Cn.src=on,Te.safeSetTimeout(function(){_i(Cn)},1e4)}else return ui()},i.preloadPlugins.push($);function ye(){Te.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var De=i.canvas;De&&(De.requestPointerLock=De.requestPointerLock||De.mozRequestPointerLock||De.webkitRequestPointerLock||De.msRequestPointerLock||function(){},De.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},De.exitPointerLock=De.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ye,!1),document.addEventListener("mozpointerlockchange",ye,!1),document.addEventListener("webkitpointerlockchange",ye,!1),document.addEventListener("mspointerlockchange",ye,!1),i.elementPointerLock&&De.addEventListener("click",function(rt){!Te.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),rt.preventDefault())},!1))},createContext:function(U,$,ye,De){if($&&i.ctx&&U==i.canvas)return i.ctx;var rt,Ct;if($){var Ut={antialias:!1,alpha:!1,majorVersion:1};if(De)for(var Bt in De)Ut[Bt]=De[Bt];typeof wt<"u"&&(Ct=wt.createContext(U,Ut),Ct&&(rt=wt.getContext(Ct).GLctx))}else rt=U.getContext("2d");return rt?(ye&&($||J(typeof zr>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=rt,$&&wt.makeContextCurrent(Ct),i.useWebGL=$,Te.moduleContextCreatedCallbacks.forEach(function(bi){bi()}),Te.init()),rt):null},destroyContext:function(U,$,ye){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(U,$){Te.lockPointer=U,Te.resizeCanvas=$,typeof Te.lockPointer>"u"&&(Te.lockPointer=!0),typeof Te.resizeCanvas>"u"&&(Te.resizeCanvas=!1);var ye=i.canvas;function De(){Te.isFullscreen=!1;var Ct=ye.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===Ct?(ye.exitFullscreen=Te.exitFullscreen,Te.lockPointer&&ye.requestPointerLock(),Te.isFullscreen=!0,Te.resizeCanvas?Te.setFullscreenCanvasSize():Te.updateCanvasDimensions(ye)):(Ct.parentNode.insertBefore(ye,Ct),Ct.parentNode.removeChild(Ct),Te.resizeCanvas?Te.setWindowedCanvasSize():Te.updateCanvasDimensions(ye)),i.onFullScreen&&i.onFullScreen(Te.isFullscreen),i.onFullscreen&&i.onFullscreen(Te.isFullscreen)}Te.fullscreenHandlersInstalled||(Te.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",De,!1),document.addEventListener("mozfullscreenchange",De,!1),document.addEventListener("webkitfullscreenchange",De,!1),document.addEventListener("MSFullscreenChange",De,!1));var rt=document.createElement("div");ye.parentNode.insertBefore(rt,ye),rt.appendChild(ye),rt.requestFullscreen=rt.requestFullscreen||rt.mozRequestFullScreen||rt.msRequestFullscreen||(rt.webkitRequestFullscreen?function(){rt.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(rt.webkitRequestFullScreen?function(){rt.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),rt.requestFullscreen()},exitFullscreen:function(){if(!Te.isFullscreen)return!1;var U=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return U.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(U){var $=Date.now();if(Te.nextRAF===0)Te.nextRAF=$+1e3/60;else for(;$+2>=Te.nextRAF;)Te.nextRAF+=1e3/60;var ye=Math.max(Te.nextRAF-$,0);setTimeout(U,ye)},requestAnimationFrame:function(U){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(U);return}var $=Te.fakeRequestAnimationFrame;typeof window<"u"&&($=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||$),$(U)},safeCallback:function(U){return function(){if(!te)return U.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Te.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Te.allowAsyncCallbacks=!0,Te.queuedAsyncCallbacks.length>0){var U=Te.queuedAsyncCallbacks;Te.queuedAsyncCallbacks=[],U.forEach(function($){$()})}},safeRequestAnimationFrame:function(U){return Te.requestAnimationFrame(function(){te||(Te.allowAsyncCallbacks?U():Te.queuedAsyncCallbacks.push(U))})},safeSetTimeout:function(U,$){return setTimeout(function(){te||(Te.allowAsyncCallbacks?U():Te.queuedAsyncCallbacks.push(U))},$)},safeSetInterval:function(U,$){return setInterval(function(){te||Te.allowAsyncCallbacks&&U()},$)},getMimetype:function(U){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[U.substr(U.lastIndexOf(".")+1)]},getUserMedia:function(U){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(U)},getMovementX:function(U){return U.movementX||U.mozMovementX||U.webkitMovementX||0},getMovementY:function(U){return U.movementY||U.mozMovementY||U.webkitMovementY||0},getMouseWheelDelta:function(U){var $=0;switch(U.type){case"DOMMouseScroll":$=U.detail/3;break;case"mousewheel":$=U.wheelDelta/120;break;case"wheel":switch($=U.deltaY,U.deltaMode){case 0:$/=100;break;case 1:$/=3;break;case 2:$*=80;break;default:throw"unrecognized mouse wheel delta mode: "+U.deltaMode}break;default:throw"unrecognized mouse wheel event: "+U.type}return $},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(U){if(Te.pointerLock)U.type!="mousemove"&&"mozMovementX"in U?Te.mouseMovementX=Te.mouseMovementY=0:(Te.mouseMovementX=Te.getMovementX(U),Te.mouseMovementY=Te.getMovementY(U)),typeof Ge<"u"?(Te.mouseX=Ge.mouseX+Te.mouseMovementX,Te.mouseY=Ge.mouseY+Te.mouseMovementY):(Te.mouseX+=Te.mouseMovementX,Te.mouseY+=Te.mouseMovementY);else{var $=i.canvas.getBoundingClientRect(),ye=i.canvas.width,De=i.canvas.height,rt=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,Ct=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(U.type==="touchstart"||U.type==="touchend"||U.type==="touchmove"){var Ut=U.touch;if(Ut===void 0)return;var Bt=Ut.pageX-(rt+$.left),bi=Ut.pageY-(Ct+$.top);Bt=Bt*(ye/$.width),bi=bi*(De/$.height);var yi={x:Bt,y:bi};if(U.type==="touchstart")Te.lastTouches[Ut.identifier]=yi,Te.touches[Ut.identifier]=yi;else if(U.type==="touchend"||U.type==="touchmove"){var _i=Te.touches[Ut.identifier];_i||(_i=yi),Te.lastTouches[Ut.identifier]=_i,Te.touches[Ut.identifier]=yi}return}var ui=U.pageX-(rt+$.left),ji=U.pageY-(Ct+$.top);ui=ui*(ye/$.width),ji=ji*(De/$.height),Te.mouseMovementX=ui-Te.mouseX,Te.mouseMovementY=ji-Te.mouseY,Te.mouseX=ui,Te.mouseY=ji}},asyncLoad:function(U,$,ye,De){var rt=De?"":"al "+U;f(U,function(Ct){J(Ct,'Loading data file "'+U+'" failed (no arrayBuffer).'),$(new Uint8Array(Ct)),rt&&_t()},function(Ct){if(ye)ye();else throw'Loading data file "'+U+'" failed.'}),rt&&Qe()},resizeListeners:[],updateResizeListeners:function(){var U=i.canvas;Te.resizeListeners.forEach(function($){$(U.width,U.height)})},setCanvasSize:function(U,$,ye){var De=i.canvas;Te.updateCanvasDimensions(De,U,$),ye||Te.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Ge<"u"){var U=ge[Ge.screen>>2];U=U|8388608,he[Ge.screen>>2]=U}Te.updateCanvasDimensions(i.canvas),Te.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Ge<"u"){var U=ge[Ge.screen>>2];U=U&-8388609,he[Ge.screen>>2]=U}Te.updateCanvasDimensions(i.canvas),Te.updateResizeListeners()},updateCanvasDimensions:function(U,$,ye){$&&ye?(U.widthNative=$,U.heightNative=ye):($=U.widthNative,ye=U.heightNative);var De=$,rt=ye;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(De/rt<i.forcedAspectRatio?De=Math.round(rt*i.forcedAspectRatio):rt=Math.round(De/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===U.parentNode&&typeof screen<"u"){var Ct=Math.min(screen.width/De,screen.height/rt);De=Math.round(De*Ct),rt=Math.round(rt*Ct)}Te.resizeCanvas?(U.width!=De&&(U.width=De),U.height!=rt&&(U.height=rt),typeof U.style<"u"&&(U.style.removeProperty("width"),U.style.removeProperty("height"))):(U.width!=$&&(U.width=$),U.height!=ye&&(U.height=ye),typeof U.style<"u"&&(De!=$||rt!=ye?(U.style.setProperty("width",De+"px","important"),U.style.setProperty("height",rt+"px","important")):(U.style.removeProperty("width"),U.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var U=Te.nextWgetRequestHandle;return Te.nextWgetRequestHandle++,U}};function Ee(){return Date.now()-Ge.startTime|0}function qe(U){var $=Ge.surfaces[U];if($.locked++,$.locked>1||($.buffer||($.buffer=Vs($.width*$.height*4),he[U+20>>2]=$.buffer),he[U+20>>2]=$.buffer,U==Ge.screen&&i.screenIsReadOnly&&$.image))return 0;if($.image=$.ctx.getImageData(0,0,$.width,$.height),U==Ge.screen&&Ge.defaults.opaqueFrontBuffer)for(var ye=$.image.data,De=ye.length,rt=0;rt<De/4;rt++)ye[rt*4+3]=255;{if($.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;le.set($.image.data,$.buffer)}return 0}function ct(){return Ge.unicode}function dt(){return Ge.ttfContext}function jt(){return Ge.audio}var Ge={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(U){return{x:he[U+0>>2],y:he[U+4>>2],w:he[U+8>>2],h:he[U+12>>2]}},updateRect:function(U,$){he[U>>2]=$.x,he[U+4>>2]=$.y,he[U+8>>2]=$.w,he[U+12>>2]=$.h},intersectionOfRects:function(U,$){var ye=Math.max(U.x,$.x),De=Math.max(U.y,$.y),rt=Math.min(U.x+U.w,$.x+$.w),Ct=Math.min(U.y+U.h,$.y+$.h);return{x:ye,y:De,w:Math.max(ye,rt)-ye,h:Math.max(De,Ct)-De}},checkPixelFormat:function(U){},loadColorToCSSRGB:function(U){var $=he[U>>2];return"rgb("+($&255)+","+($>>8&255)+","+($>>16&255)+")"},loadColorToCSSRGBA:function(U){var $=he[U>>2];return"rgba("+($&255)+","+($>>8&255)+","+($>>16&255)+","+($>>24&255)/255+")"},translateColorToCSSRGBA:function(U){return"rgba("+(U&255)+","+(U>>8&255)+","+(U>>16&255)+","+(U>>>24)/255+")"},translateRGBAToCSSRGBA:function(U,$,ye,De){return"rgba("+(U&255)+","+($&255)+","+(ye&255)+","+(De&255)/255+")"},translateRGBAToColor:function(U,$,ye,De){return U|$<<8|ye<<16|De<<24},makeSurface:function(U,$,ye,De,rt,Ct,Ut,Bt,bi){ye=ye||0;var yi=ye&1,_i=ye&2097152,ui=ye&67108864,ji=Vs(60),on=Vs(44),Cn=_i?1:4,ft=0;!yi&&!ui&&(ft=Vs(U*$*4)),he[ji>>2]=ye,he[ji+4>>2]=on,he[ji+8>>2]=U,he[ji+12>>2]=$,he[ji+16>>2]=U*Cn,he[ji+20>>2]=ft,he[ji+36>>2]=0,he[ji+40>>2]=0,he[ji+44>>2]=i.canvas.width,he[ji+48>>2]=i.canvas.height,he[ji+56>>2]=1,he[on>>2]=-2042224636,he[on+4>>2]=0,Oe[on+8>>0]=Cn*8,Oe[on+9>>0]=Cn,he[on+12>>2]=Ct||255,he[on+16>>2]=Ut||65280,he[on+20>>2]=Bt||16711680,he[on+24>>2]=bi||4278190080,Ge.GL=Ge.GL||ui;var p;De?p=i.canvas:(Ge.canvasPool.length>0?p=Ge.canvasPool.pop():p=document.createElement("canvas"),p.width=U,p.height=$);var Di={antialias:Ge.glAttributes[13]!=0,depth:Ge.glAttributes[6]>0,stencil:Ge.glAttributes[7]>0,alpha:Ge.glAttributes[3]>0},c=Te.createContext(p,ui,De,Di);return Ge.surfaces[ji]={width:U,height:$,canvas:p,ctx:c,surf:ji,buffer:ft,pixelFormat:on,alpha:255,flags:ye,locked:0,usePageCanvas:De,source:rt,isFlagSet:function(F){return ye&F}},ji},copyIndexedColorData:function(U,$,ye,De,rt){if(!!U.colors){var Ct=i.canvas.width,Ut=i.canvas.height,Bt=$||0,bi=ye||0,yi=(De||Ct-Bt)+Bt,_i=(rt||Ut-bi)+bi,ui=U.buffer;U.image.data32||(U.image.data32=new Uint32Array(U.image.data.buffer));for(var ji=U.image.data32,on=U.colors32,Cn=bi;Cn<_i;++Cn)for(var ft=Cn*Ct,p=Bt;p<yi;++p)ji[ft+p]=on[le[ui+ft+p>>0]]}},freeSurface:function(U){var $=U+56,ye=he[$>>2];if(ye>1){he[$>>2]=ye-1;return}var De=Ge.surfaces[U];!De.usePageCanvas&&De.canvas&&Ge.canvasPool.push(De.canvas),De.buffer&&Ta(De.buffer),Ta(De.pixelFormat),Ta(U),Ge.surfaces[U]=null,U===Ge.screen&&(Ge.screen=null)},blitSurface:function(U,$,ye,De,rt){var Ct=Ge.surfaces[U],Ut=Ge.surfaces[ye],Bt,bi;if($?Bt=Ge.loadRect($):Bt={x:0,y:0,w:Ct.width,h:Ct.height},De?bi=Ge.loadRect(De):bi={x:0,y:0,w:Ct.width,h:Ct.height},Ut.clipRect){var yi=!rt||Bt.w===0?1:Bt.w/bi.w,_i=!rt||Bt.h===0?1:Bt.h/bi.h;bi=Ge.intersectionOfRects(Ut.clipRect,bi),Bt.w=bi.w*yi,Bt.h=bi.h*_i,De&&Ge.updateRect(De,bi)}var ui,ji;if(rt?(ui=bi.w,ji=bi.h):(ui=Bt.w,ji=Bt.h),Bt.w===0||Bt.h===0||ui===0||ji===0)return 0;var on=Ut.ctx.globalAlpha;return Ut.ctx.globalAlpha=Ct.alpha/255,Ut.ctx.drawImage(Ct.canvas,Bt.x,Bt.y,Bt.w,Bt.h,bi.x,bi.y,ui,ji),Ut.ctx.globalAlpha=on,ye!=Ge.screen&&(C("WARNING: copying canvas data to memory for compatibility"),qe(ye),Ut.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(U){function $(){for(var _i in Ge.keyboardMap)Ge.events.push({type:"keyup",keyCode:Ge.keyboardMap[_i]})}switch(U.type){case"touchstart":case"touchmove":{U.preventDefault();var ye=[];if(U.type==="touchstart")for(var De=0;De<U.touches.length;De++){var rt=U.touches[De];Ge.downFingers[rt.identifier]!=!0&&(Ge.downFingers[rt.identifier]=!0,ye.push(rt))}else ye=U.touches;var Ct=ye[0];if(Ct){U.type=="touchstart"&&(Ge.DOMButtons[0]=1);var Ut;switch(U.type){case"touchstart":Ut="mousedown";break;case"touchmove":Ut="mousemove";break}var Bt={type:Ut,button:0,pageX:Ct.clientX,pageY:Ct.clientY};Ge.events.push(Bt)}for(var De=0;De<ye.length;De++){var rt=ye[De];Ge.events.push({type:U.type,touch:rt})}break}case"touchend":{U.preventDefault();for(var De=0;De<U.changedTouches.length;De++){var rt=U.changedTouches[De];Ge.downFingers[rt.identifier]===!0&&delete Ge.downFingers[rt.identifier]}var Bt={type:"mouseup",button:0,pageX:U.changedTouches[0].clientX,pageY:U.changedTouches[0].clientY};Ge.DOMButtons[0]=0,Ge.events.push(Bt);for(var De=0;De<U.changedTouches.length;De++){var rt=U.changedTouches[De];Ge.events.push({type:"touchend",touch:rt})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var bi=-Te.getMouseWheelDelta(U);bi=bi==0?0:bi>0?Math.max(bi,1):Math.min(bi,-1);var yi=bi>0?3:4;Ge.events.push({type:"mousedown",button:yi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"mouseup",button:yi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"wheel",deltaX:0,deltaY:bi}),U.preventDefault();break;case"mousemove":if(Ge.DOMButtons[0]===1&&Ge.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Te.pointerLock&&("mozMovementX"in U&&(U.movementX=U.mozMovementX,U.movementY=U.mozMovementY),U.movementX==0&&U.movementY==0)){U.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((U.type!=="keydown"||!ct()&&!Ge.textInput||U.keyCode===8||U.keyCode===9)&&U.preventDefault(),U.type=="mousedown")Ge.DOMButtons[U.button]=1,Ge.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}});else if(U.type=="mouseup"){if(!Ge.DOMButtons[U.button])return;Ge.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Ge.DOMButtons[U.button]=0}U.type==="keydown"||U.type==="mousedown"?Ge.canRequestFullscreen=!0:(U.type==="keyup"||U.type==="mouseup")&&(Ge.canRequestFullscreen=!1),U.type==="keypress"&&Ge.savedKeydown?(Ge.savedKeydown.keypressCharCode=U.charCode,Ge.savedKeydown=null):U.type==="keydown"&&(Ge.savedKeydown=U),(U.type!=="keypress"||Ge.textInput)&&Ge.events.push(U);break;case"mouseout":for(var De=0;De<3;De++)Ge.DOMButtons[De]&&(Ge.events.push({type:"mouseup",button:De,pageX:U.pageX,pageY:U.pageY}),Ge.DOMButtons[De]=0);U.preventDefault();break;case"focus":Ge.events.push(U),U.preventDefault();break;case"blur":Ge.events.push(U),$(),U.preventDefault();break;case"visibilitychange":Ge.events.push({type:"visibilitychange",visible:!document.hidden}),$(),U.preventDefault();break;case"unload":Te.mainLoop.runner&&(Ge.events.push(U),Te.mainLoop.runner());return;case"resize":Ge.events.push(U),U.preventDefault&&U.preventDefault();break}Ge.events.length>=1e4&&(b("SDL event queue full, dropping events"),Ge.events=Ge.events.slice(0,1e4))},lookupKeyCodeForEvent:function(U){var $=U.keyCode;return $>=65&&$<=90?$+=32:($=Ge.keyCodes[U.keyCode]||U.keyCode,U.location===2&&$>=(224|1<<10)&&$<=(227|1<<10)&&($+=4)),$},handleEvent:function(U){if(!U.handled)switch(U.handled=!0,U.type){case"touchstart":case"touchend":case"touchmove":{Te.calculateMouseEvent(U);break}case"keydown":case"keyup":{var $=U.type==="keydown",ye=Ge.lookupKeyCodeForEvent(U);Oe[Ge.keyboardState+ye>>0]=$,Ge.modState=(Oe[Ge.keyboardState+1248>>0]?64:0)|(Oe[Ge.keyboardState+1249>>0]?1:0)|(Oe[Ge.keyboardState+1250>>0]?256:0)|(Oe[Ge.keyboardState+1252>>0]?128:0)|(Oe[Ge.keyboardState+1253>>0]?2:0)|(Oe[Ge.keyboardState+1254>>0]?512:0),$?Ge.keyboardMap[ye]=U.keyCode:delete Ge.keyboardMap[ye];break}case"mousedown":case"mouseup":U.type=="mousedown"?Ge.buttonState|=1<<U.button:U.type=="mouseup"&&(Ge.buttonState&=~(1<<U.button));case"mousemove":{Te.calculateMouseEvent(U);break}}},flushEventsToHandler:function(){},pollEvent:function(U){if(Ge.initFlags&512&&Ge.joystickEventState&&Ge.queryJoysticks(),U){for(;Ge.events.length>0;)if(Ge.makeCEvent(Ge.events.shift(),U)!==!1)return 1;return 0}else return Ge.events.length>0},makeCEvent:function(U,$){if(typeof U=="number"){Ks($,U,28),Ta(U);return}switch(Ge.handleEvent(U),U.type){case"keydown":case"keyup":{var ye=U.type==="keydown",De=Ge.lookupKeyCodeForEvent(U),rt;De>=1024?rt=De-1024:rt=Ge.scanCodes[De]||De,he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Oe[$+8>>0]=ye?1:0,Oe[$+9>>0]=0,he[$+12>>2]=rt,he[$+16>>2]=De,Ce[$+20>>1]=Ge.modState,he[$+24>>2]=U.keypressCharCode||De;break}case"keypress":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type];for(var Ct=Xo(String.fromCharCode(U.charCode)),Ut=0;Ut<Ct.length;++Ut)Oe[$+(8+Ut)>>0]=Ct[Ut];break}case"mousedown":case"mouseup":case"mousemove":{if(U.type!="mousemove"){var ye=U.type==="mousedown";he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,he[$+8>>2]=0,he[$+12>>2]=0,Oe[$+16>>0]=U.button+1,Oe[$+17>>0]=ye?1:0,he[$+20>>2]=Te.mouseX,he[$+24>>2]=Te.mouseY}else he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,he[$+8>>2]=0,he[$+12>>2]=0,he[$+16>>2]=Ge.buttonState,he[$+20>>2]=Te.mouseX,he[$+24>>2]=Te.mouseY,he[$+28>>2]=Te.mouseMovementX,he[$+32>>2]=Te.mouseMovementY;break}case"wheel":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+16>>2]=U.deltaX,he[$+20>>2]=U.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Bt=U.touch;if(!Te.touches[Bt.identifier])break;var bi=i.canvas.width,yi=i.canvas.height,_i=Te.touches[Bt.identifier].x/bi,ui=Te.touches[Bt.identifier].y/yi,ji=Te.lastTouches[Bt.identifier].x/bi,on=Te.lastTouches[Bt.identifier].y/yi,Cn=_i-ji,ft=ui-on;if(Bt.deviceID===void 0&&(Bt.deviceID=Ge.TOUCH_DEFAULT_ID),Cn===0&&ft===0&&U.type==="touchmove")return!1;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=Ee(),Zr=[Bt.deviceID>>>0,(Gn=Bt.deviceID,+mi(Gn)>=1?Gn>0?(ti(+Ci(Gn/4294967296),4294967295)|0)>>>0:~~+Wi((Gn-+(~~Gn>>>0))/4294967296)>>>0:0)],he[$+8>>2]=Zr[0],he[$+12>>2]=Zr[1],Zr=[Bt.identifier>>>0,(Gn=Bt.identifier,+mi(Gn)>=1?Gn>0?(ti(+Ci(Gn/4294967296),4294967295)|0)>>>0:~~+Wi((Gn-+(~~Gn>>>0))/4294967296)>>>0:0)],he[$+16>>2]=Zr[0],he[$+20>>2]=Zr[1],Be[$+24>>2]=_i,Be[$+28>>2]=ui,Be[$+32>>2]=Cn,Be[$+36>>2]=ft,Bt.force!==void 0?Be[$+40>>2]=Bt.force:Be[$+40>>2]=U.type=="touchend"?0:1;break}case"unload":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type];break}case"resize":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=U.w,he[$+8>>2]=U.h;break}case"joystick_button_up":case"joystick_button_down":{var p=U.type==="joystick_button_up"?0:1;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Oe[$+4>>0]=U.index,Oe[$+5>>0]=U.button,Oe[$+6>>0]=p;break}case"joystick_axis_motion":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Oe[$+4>>0]=U.index,Oe[$+5>>0]=U.axis,he[$+8>>2]=Ge.joystickAxisValueConversion(U.value);break}case"focus":{var Di=12;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Oe[$+8>>0]=Di;break}case"blur":{var c=13;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Oe[$+8>>0]=c;break}case"visibilitychange":{var F=1,mn=2,Qn=U.visible?F:mn;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Oe[$+8>>0]=Qn;break}default:throw"Unhandled SDL event: "+U.type}},makeFontString:function(U,$){return $.charAt(0)!="'"&&$.charAt(0)!='"'&&($='"'+$+'"'),U+"px "+$+", serif"},estimateTextWidth:function(U,$){var ye=U.size,De=Ge.makeFontString(ye,U.name),rt=dt();rt.font=De;var Ct=rt.measureText($).width|0;return Ct},allocateChannels:function(U){if(!(Ge.numChannels&&Ge.numChannels>=U&&U!=0)){Ge.numChannels=U,Ge.channels=[];for(var $=0;$<U;$++)Ge.channels[$]={audio:null,volume:1}}},setGetVolume:function(U,$){if(!U)return 0;var ye=U.volume*128;if($!=-1&&(U.volume=Math.min(Math.max($,0),128)/128,U.audio))try{U.audio.volume=U.volume,U.audio.webAudioGainNode&&(U.audio.webAudioGainNode.gain.value=U.volume)}catch(De){b("setGetVolume failed to set audio volume: "+De)}return ye},setPannerPosition:function(U,$,ye,De){!U||U.audio&&U.audio.webAudioPannerNode&&U.audio.webAudioPannerNode.setPosition($,ye,De)},playWebAudio:function(U){if(!!U&&!U.webAudioNode&&!!Ge.webAudioAvailable())try{var $=U.resource.webAudio;if(U.paused=!1,!$.decodedBuffer){$.onDecodeComplete===void 0&&Jt("Cannot play back audio object that was not loaded"),$.onDecodeComplete.push(function(){U.paused||Ge.playWebAudio(U)});return}U.webAudioNode=Ge.audioContext.createBufferSource(),U.webAudioNode.buffer=$.decodedBuffer,U.webAudioNode.loop=U.loop,U.webAudioNode.onended=function(){U.onended()},U.webAudioPannerNode=Ge.audioContext.createPanner(),U.webAudioPannerNode.setPosition(0,0,-.5),U.webAudioPannerNode.panningModel="equalpower",U.webAudioGainNode=Ge.audioContext.createGain(),U.webAudioGainNode.gain.value=U.volume,U.webAudioNode.connect(U.webAudioPannerNode),U.webAudioPannerNode.connect(U.webAudioGainNode),U.webAudioGainNode.connect(Ge.audioContext.destination),U.webAudioNode.start(0,U.currentPosition),U.startTime=Ge.audioContext.currentTime-U.currentPosition}catch(ye){b("playWebAudio failed: "+ye)}},pauseWebAudio:function(U){if(!!U){if(U.webAudioNode)try{U.currentPosition=(Ge.audioContext.currentTime-U.startTime)%U.resource.webAudio.decodedBuffer.duration,U.webAudioNode.onended=void 0,U.webAudioNode.stop(0),U.webAudioNode=void 0}catch($){b("pauseWebAudio failed: "+$)}U.paused=!0}},openAudioContext:function(){Ge.audioContext||(typeof AudioContext<"u"?Ge.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Ge.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Ge.audioContext},fillWebAudioBufferFromHeap:function(U,$,ye){for(var De=jt(),rt=De.channels,Ct=0;Ct<rt;++Ct){var Ut=ye.getChannelData(Ct);if(Ut.length!=$)throw"Web Audio output buffer length mismatch! Destination size: "+Ut.length+" samples vs expected "+$+" samples!";if(De.format==32784)for(var Bt=0;Bt<$;++Bt)Ut[Bt]=Ce[U+(Bt*rt+Ct)*2>>1]/32768;else if(De.format==8)for(var Bt=0;Bt<$;++Bt){var bi=Oe[U+(Bt*rt+Ct)>>0];Ut[Bt]=(bi>=0?bi-128:bi+128)/128}else if(De.format==33056)for(var Bt=0;Bt<$;++Bt)Ut[Bt]=Be[U+(Bt*rt+Ct)*4>>2];else throw"Invalid SDL audio format "+De.format+"!"}},debugSurface:function(U){console.log("dumping surface "+[U.surf,U.source,U.width,U.height]);for(var $=U.ctx.getImageData(0,0,U.width,U.height),ye=$.data,De=Math.min(U.width,U.height),rt=0;rt<De;rt++)console.log("   diagonal "+rt+":"+[ye[rt*U.width*4+rt*4+0],ye[rt*U.width*4+rt*4+1],ye[rt*U.width*4+rt*4+2],ye[rt*U.width*4+rt*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(U,$){for(var ye=new Array($.buttons.length),De=0;De<$.buttons.length;De++)ye[De]=Ge.getJoystickButtonState($.buttons[De]);Ge.lastJoystickState[U]={buttons:ye,axes:$.axes.slice(0),timestamp:$.timestamp,index:$.index,id:$.id}},getJoystickButtonState:function(U){return typeof U=="object"?U.pressed:U>0},queryJoysticks:function(){for(var U in Ge.lastJoystickState){var $=Ge.getGamepad(U-1),ye=Ge.lastJoystickState[U];if(typeof $>"u"||$===null)return;if(typeof $.timestamp!="number"||$.timestamp!==ye.timestamp||!$.timestamp){var De;for(De=0;De<$.buttons.length;De++){var rt=Ge.getJoystickButtonState($.buttons[De]);rt!==ye.buttons[De]&&Ge.events.push({type:rt?"joystick_button_down":"joystick_button_up",joystick:U,index:U-1,button:De})}for(De=0;De<$.axes.length;De++)$.axes[De]!==ye.axes[De]&&Ge.events.push({type:"joystick_axis_motion",joystick:U,index:U-1,axis:De,value:$.axes[De]});Ge.recordJoystickState(U,$)}}},joystickAxisValueConversion:function(U){return U=Math.min(1,Math.max(U,-1)),Math.ceil((U+1)*32767.5-32768)},getGamepads:function(){var U=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return U!==void 0?U.apply(navigator):[]},getGamepad:function(U){var $=Ge.getGamepads();return $.length>U&&U>=0?$[U]:null}};function Zt(U,$,ye,De,rt,Ct,Ut,Bt){return Ge.makeSurface($,ye,U,!1,"CreateRGBSurface",rt,Ct,Ut,Bt)}function Rt(U){}function oi(U){U&&Ge.freeSurface(U)}function yt(U){if(Ge.startTime=Date.now(),Ge.initFlags=U,!i.doNotCaptureKeyboard){var $=i.keyboardListeningElement||document;$.addEventListener("keydown",Ge.receiveEvent),$.addEventListener("keyup",Ge.receiveEvent),$.addEventListener("keypress",Ge.receiveEvent),window.addEventListener("focus",Ge.receiveEvent),window.addEventListener("blur",Ge.receiveEvent),document.addEventListener("visibilitychange",Ge.receiveEvent)}return window.addEventListener("unload",Ge.receiveEvent),Ge.keyboardState=Vs(65536),ks(Ge.keyboardState,0,65536),Ge.DOMEventToSDLEvent.keydown=768,Ge.DOMEventToSDLEvent.keyup=769,Ge.DOMEventToSDLEvent.keypress=771,Ge.DOMEventToSDLEvent.mousedown=1025,Ge.DOMEventToSDLEvent.mouseup=1026,Ge.DOMEventToSDLEvent.mousemove=1024,Ge.DOMEventToSDLEvent.wheel=1027,Ge.DOMEventToSDLEvent.touchstart=1792,Ge.DOMEventToSDLEvent.touchend=1793,Ge.DOMEventToSDLEvent.touchmove=1794,Ge.DOMEventToSDLEvent.unload=256,Ge.DOMEventToSDLEvent.resize=28673,Ge.DOMEventToSDLEvent.visibilitychange=512,Ge.DOMEventToSDLEvent.focus=512,Ge.DOMEventToSDLEvent.blur=512,Ge.DOMEventToSDLEvent.joystick_axis_motion=1536,Ge.DOMEventToSDLEvent.joystick_button_down=1539,Ge.DOMEventToSDLEvent.joystick_button_up=1540,0}function Ri(U){var $=U.getExtension("ANGLE_instanced_arrays");if($)return U.vertexAttribDivisor=function(ye,De){$.vertexAttribDivisorANGLE(ye,De)},U.drawArraysInstanced=function(ye,De,rt,Ct){$.drawArraysInstancedANGLE(ye,De,rt,Ct)},U.drawElementsInstanced=function(ye,De,rt,Ct,Ut){$.drawElementsInstancedANGLE(ye,De,rt,Ct,Ut)},1}function Ii(U){var $=U.getExtension("OES_vertex_array_object");if($)return U.createVertexArray=function(){return $.createVertexArrayOES()},U.deleteVertexArray=function(ye){$.deleteVertexArrayOES(ye)},U.bindVertexArray=function(ye){$.bindVertexArrayOES(ye)},U.isVertexArray=function(ye){return $.isVertexArrayOES(ye)},1}function Sn(U){var $=U.getExtension("WEBGL_draw_buffers");if($)return U.drawBuffers=function(ye,De){$.drawBuffersWEBGL(ye,De)},1}function An(U){return!!(U.multiDrawWebgl=U.getExtension("WEBGL_multi_draw"))}var wt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function($){wt.lastError||(wt.lastError=$)},getNewId:function(U){for(var $=wt.counter++,ye=U.length;ye<$;ye++)U[ye]=null;return $},getSource:function(U,$,ye,De){for(var rt="",Ct=0;Ct<$;++Ct){var Ut=De?he[De+Ct*4>>2]:-1;rt+=Se(he[ye+Ct*4>>2],Ut<0?void 0:Ut)}return rt},createContext:function(U,$){var ye=U.getContext("webgl",$)||U.getContext("experimental-webgl",$);if(!ye)return 0;var De=wt.registerContext(ye,$);return De},registerContext:function(U,$){var ye=wt.getNewId(wt.contexts),De={handle:ye,attributes:$,version:$.majorVersion,GLctx:U};return De.cannotHandleOffsetsInUniformArrayViews=function(rt){function Ct(yi,_i){var ui=rt.createShader(_i);return rt.shaderSource(ui,yi),rt.compileShader(ui),ui}try{var Ut=rt.createProgram();rt.attachShader(Ut,Ct("attribute vec4 p;void main(){gl_Position=p;}",35633)),rt.attachShader(Ut,Ct("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),rt.linkProgram(Ut);var Bt=new Float32Array(8);Bt[4]=1,rt.useProgram(Ut);var bi=rt.getUniformLocation(Ut,"u");return rt.uniform4fv(bi,Bt.subarray(4,8)),!rt.getUniform(Ut,bi)[0]}catch{return!1}}(),U.canvas&&(U.canvas.GLctxObject=De),wt.contexts[ye]=De,(typeof $.enableExtensionsByDefault>"u"||$.enableExtensionsByDefault)&&wt.initExtensions(De),ye},makeContextCurrent:function(U){return wt.currentContext=wt.contexts[U],i.ctx=zr=wt.currentContext&&wt.currentContext.GLctx,!(U&&!zr)},getContext:function(U){return wt.contexts[U]},deleteContext:function(U){wt.currentContext===wt.contexts[U]&&(wt.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(wt.contexts[U].GLctx.canvas),wt.contexts[U]&&wt.contexts[U].GLctx.canvas&&(wt.contexts[U].GLctx.canvas.GLctxObject=void 0),wt.contexts[U]=null},initExtensions:function(U){if(U||(U=wt.currentContext),!U.initExtensionsDone){U.initExtensionsDone=!0;var $=U.GLctx;Ri($),Ii($),Sn($),$.disjointTimerQueryExt=$.getExtension("EXT_disjoint_timer_query"),An($);var ye=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],De=$.getSupportedExtensions()||[];De.forEach(function(rt){ye.indexOf(rt)!=-1&&$.getExtension(rt)})}},populateUniformTable:function(U){for(var $=wt.programs[U],ye=wt.programInfos[U]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},De=ye.uniforms,rt=zr.getProgramParameter($,35718),Ct=0;Ct<rt;++Ct){var Ut=zr.getActiveUniform($,Ct),Bt=Ut.name;ye.maxUniformLength=Math.max(ye.maxUniformLength,Bt.length+1),Bt.slice(-1)=="]"&&(Bt=Bt.slice(0,Bt.lastIndexOf("[")));var bi=zr.getUniformLocation($,Bt);if(bi){var yi=wt.getNewId(wt.uniforms);De[Bt]=[Ut.size,yi],wt.uniforms[yi]=bi;for(var _i=1;_i<Ut.size;++_i){var ui=Bt+"["+_i+"]";bi=zr.getUniformLocation($,ui),yi=wt.getNewId(wt.uniforms),wt.uniforms[yi]=bi}}}}};function Tn(U,$,ye,De){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(Ct){i.canvas.addEventListener(Ct,Ge.receiveEvent,!0)});var rt=i.canvas;return U==0&&$==0&&(U=rt.width,$=rt.height),Ge.addedResizeListener||(Ge.addedResizeListener=!0,Te.resizeListeners.push(function(Ct,Ut){Ge.settingVideoMode||Ge.receiveEvent({type:"resize",w:Ct,h:Ut})})),Ge.settingVideoMode=!0,Te.setCanvasSize(U,$),Ge.settingVideoMode=!1,Ge.screen&&(Ge.freeSurface(Ge.screen),J(!Ge.screen)),Ge.GL&&(De=De|67108864),Ge.screen=Ge.makeSurface(U,$,De,!0,"screen"),Ge.screen}function Jn(U){J(!Ge.GL);var $=Ge.surfaces[U];if(!(!$.locked||--$.locked>0)){if($.isFlagSet(2097152))Ge.copyIndexedColorData($);else if($.colors)for(var on=i.canvas.width,Cn=i.canvas.height,ft=$.buffer,ye=$.image.data,p=$.colors,Di=0;Di<Cn;Di++){for(var c=Di*on*4,F=0;F<on;F++){var bi=le[ft++>>0]*4,mn=c+F*4;ye[mn]=p[bi],ye[mn+1]=p[bi+1],ye[mn+2]=p[bi+2]}ft+=on*3}else{var ye=$.image.data,De=$.buffer;J(De%4==0,"Invalid buffer offset: "+De);var rt=De>>2,Ct=0,Ut=U==Ge.screen,Bt;if(typeof CanvasPixelArray<"u"&&ye instanceof CanvasPixelArray)for(Bt=ye.length;Ct<Bt;){var bi=he[rt];ye[Ct]=bi&255,ye[Ct+1]=bi>>8&255,ye[Ct+2]=bi>>16&255,ye[Ct+3]=Ut?255:bi>>24&255,rt++,Ct+=4}else{var yi=new Uint32Array(ye.buffer);if(Ut&&Ge.defaults.opaqueFrontBuffer){Bt=yi.length,yi.set(he.subarray(rt,rt+Bt));var _i=new Uint8Array(ye.buffer),ui=3,ji=ui+4*Bt;if(Bt%8==0)for(;ui<ji;)_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0;else for(;ui<ji;)_i[ui]=255,ui=ui+4|0}else yi.set(he.subarray(rt,rt+yi.length))}}$.ctx.putImageData($.image,0,0)}}function Pr(U,$,ye,De){return Ge.blitSurface(U,$,ye,De,!1)}function sr(){return 12032}var Cr=Uint8Array.prototype.copyWithin?function(U,$,ye){le.copyWithin(U,$,$+ye)}:function(U,$,ye){le.set(le.subarray($,$+ye),U)};function Mr(){return le.length}function io(U){try{return G.grow(U-ke.byteLength+65535>>>16),We(G.buffer),1}catch{}}function Jr(U){U=U>>>0;var $=Mr(),ye=65536,De=2147483648;if(U>De)return!1;for(var rt=16777216,Ct=1;Ct<=4;Ct*=2){var Ut=$*(1+.2/Ct);Ut=Math.min(Ut,U+100663296);var Bt=Math.min(De,we(Math.max(rt,U,Ut),ye)),bi=io(Bt);if(bi)return!0}return!1}var mo={mappings:{},buffers:[null,[],[]],printChar:function(U,$){var ye=mo.buffers[U];$===0||$===10?((U===1?w:b)(Ie(ye,0)),ye.length=0):ye.push($)},varargs:void 0,get:function(){mo.varargs+=4;var U=he[mo.varargs-4>>2];return U},getStr:function(U){var $=Se(U);return $},get64:function(U,$){return U}};function Qo(U){return 0}function nl(U,$,ye,De,rt){}function Mo(U,$,ye,De){for(var rt=0,Ct=0;Ct<ye;Ct++){for(var Ut=he[$+Ct*8>>2],Bt=he[$+(Ct*8+4)>>2],bi=0;bi<Bt;bi++)mo.printChar(U,le[Ut+bi]);rt+=Bt}return he[De>>2]=rt,0}var Mt=function(U,$,ye,De){U||(U=this),this.parent=U,this.mount=U.mount,this.mounted=null,this.id=He.nextInode++,this.name=$,this.mode=ye,this.node_ops={},this.stream_ops={},this.rdev=De},tr=365,rr=146;Object.defineProperties(Mt.prototype,{read:{get:function(){return(this.mode&tr)===tr},set:function(U){U?this.mode|=tr:this.mode&=~tr}},write:{get:function(){return(this.mode&rr)===rr},set:function(U){U?this.mode|=rr:this.mode&=~rr}},isFolder:{get:function(){return He.isDir(this.mode)}},isDevice:{get:function(){return He.isChrdev(this.mode)}}}),He.FSNode=Mt,He.staticInit(),i.requestFullscreen=function($,ye){Te.requestFullscreen($,ye)},i.requestAnimationFrame=function($){Te.requestAnimationFrame($)},i.setCanvasSize=function($,ye,De){Te.setCanvasSize($,ye,De)},i.pauseMainLoop=function(){Te.mainLoop.pause()},i.resumeMainLoop=function(){Te.mainLoop.resume()},i.getUserMedia=function(){Te.getUserMedia()},i.createContext=function($,ye,De,rt){return Te.createContext($,ye,De,rt)};var zr;function Xo(U,$,ye){var De=ye>0?ye:nt(U)+1,rt=new Array(De),Ct=me(U,rt,0,rt.length);return $&&(rt.length=Ct),rt}function Do(U){for(var $=[],ye=0;ye<U.length;ye++){var De=U[ye];De>255&&(De&=255),$.push(String.fromCharCode(De))}return $.join("")}var Ea=typeof atob=="function"?atob:function(U){var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ye="",De,rt,Ct,Ut,Bt,bi,yi,_i=0;U=U.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Ut=$.indexOf(U.charAt(_i++)),Bt=$.indexOf(U.charAt(_i++)),bi=$.indexOf(U.charAt(_i++)),yi=$.indexOf(U.charAt(_i++)),De=Ut<<2|Bt>>4,rt=(Bt&15)<<4|bi>>2,Ct=(bi&3)<<6|yi,ye=ye+String.fromCharCode(De),bi!==64&&(ye=ye+String.fromCharCode(rt)),yi!==64&&(ye=ye+String.fromCharCode(Ct));while(_i<U.length);return ye};function es(U){try{for(var $=Ea(U),ye=new Uint8Array($.length),De=0;De<$.length;++De)ye[De]=$.charCodeAt(De);return ye}catch{throw new Error("Converting base64 string to bytes failed.")}}function Us(U){if(!!Ln(U))return es(U.slice(wn.length))}var ys={SDL_CreateRGBSurface:Zt,SDL_Flip:Rt,SDL_FreeSurface:oi,SDL_Init:yt,SDL_LockSurface:qe,SDL_SetVideoMode:Tn,SDL_UnlockSurface:Jn,SDL_UpperBlit:Pr,emscripten_get_sbrk_ptr:sr,emscripten_memcpy_big:Cr,emscripten_resize_heap:Jr,fd_close:Qo,fd_seek:nl,fd_write:Mo,getTempRet0:M,memory:G,setTempRet0:S,table:Z};Hn();var Ia=i.___wasm_call_ctors=function(){return(Ia=i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};i._WebpToSDL=function(){return(i._WebpToSDL=i.asm.WebpToSDL).apply(null,arguments)};var ks=i._memset=function(){return(ks=i._memset=i.asm.memset).apply(null,arguments)},Ks=i._memcpy=function(){return(Ks=i._memcpy=i.asm.memcpy).apply(null,arguments)},Vs=i._malloc=function(){return(Vs=i._malloc=i.asm.malloc).apply(null,arguments)},Ta=i._free=function(){return(Ta=i._free=i.asm.free).apply(null,arguments)},wl=i.___errno_location=function(){return(wl=i.___errno_location=i.asm.__errno_location).apply(null,arguments)},uu=i.stackSave=function(){return(uu=i.stackSave=i.asm.stackSave).apply(null,arguments)},xl=i.stackRestore=function(){return(xl=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},cu=i.stackAlloc=function(){return(cu=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_vii=function(){return(i.dynCall_vii=i.asm.dynCall_vii).apply(null,arguments)},i.dynCall_vi=function(){return(i.dynCall_vi=i.asm.dynCall_vi).apply(null,arguments)},i.dynCall_ii=function(){return(i.dynCall_ii=i.asm.dynCall_ii).apply(null,arguments)},i.dynCall_iii=function(){return(i.dynCall_iii=i.asm.dynCall_iii).apply(null,arguments)},i.dynCall_iiii=function(){return(i.dynCall_iiii=i.asm.dynCall_iiii).apply(null,arguments)},i.dynCall_iiiiiii=function(){return(i.dynCall_iiiiiii=i.asm.dynCall_iiiiiii).apply(null,arguments)},i.dynCall_viiii=function(){return(i.dynCall_viiii=i.asm.dynCall_viiii).apply(null,arguments)},i.dynCall_viii=function(){return(i.dynCall_viii=i.asm.dynCall_viii).apply(null,arguments)},i.dynCall_viiiiii=function(){return(i.dynCall_viiiiii=i.asm.dynCall_viiiiii).apply(null,arguments)},i.dynCall_viiiii=function(){return(i.dynCall_viiiii=i.asm.dynCall_viiiii).apply(null,arguments)},i.dynCall_viiiiiiiii=function(){return(i.dynCall_viiiiiiiii=i.asm.dynCall_viiiiiiiii).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};var da=i.__growWasmMemory=function(){return(da=i.__growWasmMemory=i.asm.__growWasmMemory).apply(null,arguments)};i.cwrap=Fe;var pa;function Ao(U){this.name="ExitStatus",this.message="Program terminated with exit("+U+")",this.status=U}Q=function U(){pa||rl(),pa||(Q=U)};function rl(U){if(Pe>0||(Ke(),Pe>0))return;function $(){pa||(pa=!0,i.calledRun=!0,!te&&(ei(),li(),i.onRuntimeInitialized&&i.onRuntimeInitialized(),$t()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),$()},1)):$()}if(i.run=rl,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();rl(),this.Module=i,this.webpToSdl=i.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(U){i.canvas=U},this.Module.doNotCaptureKeyboard=!0}const XT=()=>new Promise(i=>requestAnimationFrame(i));class Gp extends Error{}const YT=i=>/\.webp.*$/i.test(i.src);class ZT{constructor({webp:e=new WT,webpSupport:t=HT(),detectWebpImage:o=YT}={}){this.busy=!1,this.cache={},this.webp=e,this.webpSupport=t,this.detectWebpImage=o}async decode(e){if(this.busy)throw new Gp("cannot decode when already busy");this.busy=!0;try{await XT();const t=document.createElement("canvas");return this.webp.setCanvas(t),this.webp.webpToSdl(e,e.length),this.busy=!1,t.toDataURL()}catch(t){throw this.busy=!1,t.name=Gp.name,t.message=`failed to decode webp image: ${t.message}`,t}}async polyfillImage(e){if(await this.webpSupport)return;const{src:t}=e;if(this.detectWebpImage(e)){if(this.cache[t]){e.src=this.cache[t];return}try{const o=VT(t)?qT(t):await b3(t),l=await this.decode(o);e.src=this.cache[t]=l}catch(o){throw o.name=Gp.name,o.message=`failed to polyfill image "${t}": ${o.message}`,o}}}async polyfillDocument({document:e=window.document}={}){if(await this.webpSupport)return null;for(const t of Array.from(e.querySelectorAll("img")))try{await this.polyfillImage(t)}catch(o){throw o.name=Gp.name,o.message=`webp image polyfill failed for url "${t.src}": ${o}`,o}}clearCache(){this.cache={}}}var w3={},X1={};X1.byteLength=QT;X1.toByteArray=e7;X1.fromByteArray=n7;var $c=[],Ku=[],KT=typeof Uint8Array<"u"?Uint8Array:Array,v2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var E0=0,JT=v2.length;E0<JT;++E0)$c[E0]=v2[E0],Ku[v2.charCodeAt(E0)]=E0;Ku["-".charCodeAt(0)]=62;Ku["_".charCodeAt(0)]=63;function x3(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function QT(i){var e=x3(i),t=e[0],o=e[1];return(t+o)*3/4-o}function $T(i,e,t){return(e+t)*3/4-t}function e7(i){var e,t=x3(i),o=t[0],l=t[1],u=new KT($T(i,o,l)),m=0,r=l>0?o-4:o,f;for(f=0;f<r;f+=4)e=Ku[i.charCodeAt(f)]<<18|Ku[i.charCodeAt(f+1)]<<12|Ku[i.charCodeAt(f+2)]<<6|Ku[i.charCodeAt(f+3)],u[m++]=e>>16&255,u[m++]=e>>8&255,u[m++]=e&255;return l===2&&(e=Ku[i.charCodeAt(f)]<<2|Ku[i.charCodeAt(f+1)]>>4,u[m++]=e&255),l===1&&(e=Ku[i.charCodeAt(f)]<<10|Ku[i.charCodeAt(f+1)]<<4|Ku[i.charCodeAt(f+2)]>>2,u[m++]=e>>8&255,u[m++]=e&255),u}function t7(i){return $c[i>>18&63]+$c[i>>12&63]+$c[i>>6&63]+$c[i&63]}function i7(i,e,t){for(var o,l=[],u=e;u<t;u+=3)o=(i[u]<<16&16711680)+(i[u+1]<<8&65280)+(i[u+2]&255),l.push(t7(o));return l.join("")}function n7(i){for(var e,t=i.length,o=t%3,l=[],u=16383,m=0,r=t-o;m<r;m+=u)l.push(i7(i,m,m+u>r?r:m+u));return o===1?(e=i[t-1],l.push($c[e>>2]+$c[e<<4&63]+"==")):o===2&&(e=(i[t-2]<<8)+i[t-1],l.push($c[e>>10]+$c[e>>4&63]+$c[e<<2&63]+"=")),l.join("")}var Qg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Qg.read=function(i,e,t,o,l){var u,m,r=l*8-o-1,f=(1<<r)-1,_=f>>1,w=-7,b=t?l-1:0,x=t?-1:1,v=i[e+b];for(b+=x,u=v&(1<<-w)-1,v>>=-w,w+=r;w>0;u=u*256+i[e+b],b+=x,w-=8);for(m=u&(1<<-w)-1,u>>=-w,w+=o;w>0;m=m*256+i[e+b],b+=x,w-=8);if(u===0)u=1-_;else{if(u===f)return m?NaN:(v?-1:1)*(1/0);m=m+Math.pow(2,o),u=u-_}return(v?-1:1)*m*Math.pow(2,u-o)};Qg.write=function(i,e,t,o,l,u){var m,r,f,_=u*8-l-1,w=(1<<_)-1,b=w>>1,x=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=o?0:u-1,C=o?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(r=isNaN(e)?1:0,m=w):(m=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-m))<1&&(m--,f*=2),m+b>=1?e+=x/f:e+=x*Math.pow(2,1-b),e*f>=2&&(m++,f/=2),m+b>=w?(r=0,m=w):m+b>=1?(r=(e*f-1)*Math.pow(2,l),m=m+b):(r=e*Math.pow(2,b-1)*Math.pow(2,l),m=0));l>=8;i[t+v]=r&255,v+=C,r/=256,l-=8);for(m=m<<l|r,_+=l;_>0;i[t+v]=m&255,v+=C,m/=256,_-=8);i[t+v-C]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=X1,t=Qg,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=r,i.SlowBuffer=O,i.INSPECT_MAX_BYTES=50;const l=2147483647;i.kMaxLength=l,r.TYPED_ARRAY_SUPPORT=u(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const Pe=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(Pe,Q),Pe.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.byteOffset}});function m(Pe){if(Pe>l)throw new RangeError('The value "'+Pe+'" is invalid for option "size"');const Q=new Uint8Array(Pe);return Object.setPrototypeOf(Q,r.prototype),Q}function r(Pe,Q,ae){if(typeof Pe=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(Pe)}return f(Pe,Q,ae)}r.poolSize=8192;function f(Pe,Q,ae){if(typeof Pe=="string")return x(Pe,Q);if(ArrayBuffer.isView(Pe))return C(Pe);if(Pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Pe);if(Yt(Pe,ArrayBuffer)||Pe&&Yt(Pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Yt(Pe,SharedArrayBuffer)||Pe&&Yt(Pe.buffer,SharedArrayBuffer)))return T(Pe,Q,ae);if(typeof Pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Qe=Pe.valueOf&&Pe.valueOf();if(Qe!=null&&Qe!==Pe)return r.from(Qe,Q,ae);const _t=S(Pe);if(_t)return _t;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Pe[Symbol.toPrimitive]=="function")return r.from(Pe[Symbol.toPrimitive]("string"),Q,ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Pe)}r.from=function(Pe,Q,ae){return f(Pe,Q,ae)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function _(Pe){if(typeof Pe!="number")throw new TypeError('"size" argument must be of type number');if(Pe<0)throw new RangeError('The value "'+Pe+'" is invalid for option "size"')}function w(Pe,Q,ae){return _(Pe),Pe<=0?m(Pe):Q!==void 0?typeof ae=="string"?m(Pe).fill(Q,ae):m(Pe).fill(Q):m(Pe)}r.alloc=function(Pe,Q,ae){return w(Pe,Q,ae)};function b(Pe){return _(Pe),m(Pe<0?0:M(Pe)|0)}r.allocUnsafe=function(Pe){return b(Pe)},r.allocUnsafeSlow=function(Pe){return b(Pe)};function x(Pe,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!r.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ae=V(Pe,Q)|0;let Qe=m(ae);const _t=Qe.write(Pe,Q);return _t!==ae&&(Qe=Qe.slice(0,_t)),Qe}function v(Pe){const Q=Pe.length<0?0:M(Pe.length)|0,ae=m(Q);for(let Qe=0;Qe<Q;Qe+=1)ae[Qe]=Pe[Qe]&255;return ae}function C(Pe){if(Yt(Pe,Uint8Array)){const Q=new Uint8Array(Pe);return T(Q.buffer,Q.byteOffset,Q.byteLength)}return v(Pe)}function T(Pe,Q,ae){if(Q<0||Pe.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(Pe.byteLength<Q+(ae||0))throw new RangeError('"length" is outside of buffer bounds');let Qe;return Q===void 0&&ae===void 0?Qe=new Uint8Array(Pe):ae===void 0?Qe=new Uint8Array(Pe,Q):Qe=new Uint8Array(Pe,Q,ae),Object.setPrototypeOf(Qe,r.prototype),Qe}function S(Pe){if(r.isBuffer(Pe)){const Q=M(Pe.length)|0,ae=m(Q);return ae.length===0||Pe.copy(ae,0,0,Q),ae}if(Pe.length!==void 0)return typeof Pe.length!="number"||mi(Pe.length)?m(0):v(Pe);if(Pe.type==="Buffer"&&Array.isArray(Pe.data))return v(Pe.data)}function M(Pe){if(Pe>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return Pe|0}function O(Pe){return+Pe!=Pe&&(Pe=0),r.alloc(+Pe)}r.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==r.prototype},r.compare=function(Q,ae){if(Yt(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),Yt(ae,Uint8Array)&&(ae=r.from(ae,ae.offset,ae.byteLength)),!r.isBuffer(Q)||!r.isBuffer(ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ae)return 0;let Qe=Q.length,_t=ae.length;for(let Jt=0,di=Math.min(Qe,_t);Jt<di;++Jt)if(Q[Jt]!==ae[Jt]){Qe=Q[Jt],_t=ae[Jt];break}return Qe<_t?-1:_t<Qe?1:0},r.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(Q,ae){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return r.alloc(0);let Qe;if(ae===void 0)for(ae=0,Qe=0;Qe<Q.length;++Qe)ae+=Q[Qe].length;const _t=r.allocUnsafe(ae);let Jt=0;for(Qe=0;Qe<Q.length;++Qe){let di=Q[Qe];if(Yt(di,Uint8Array))Jt+di.length>_t.length?(r.isBuffer(di)||(di=r.from(di)),di.copy(_t,Jt)):Uint8Array.prototype.set.call(_t,di,Jt);else if(r.isBuffer(di))di.copy(_t,Jt);else throw new TypeError('"list" argument must be an Array of Buffers');Jt+=di.length}return _t};function V(Pe,Q){if(r.isBuffer(Pe))return Pe.length;if(ArrayBuffer.isView(Pe)||Yt(Pe,ArrayBuffer))return Pe.byteLength;if(typeof Pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Pe);const ae=Pe.length,Qe=arguments.length>2&&arguments[2]===!0;if(!Qe&&ae===0)return 0;let _t=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ae;case"utf8":case"utf-8":return ei(Pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae*2;case"hex":return ae>>>1;case"base64":return Si(Pe).length;default:if(_t)return Qe?-1:ei(Pe).length;Q=(""+Q).toLowerCase(),_t=!0}}r.byteLength=V;function G(Pe,Q,ae){let Qe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ae===void 0||ae>this.length)&&(ae=this.length),ae<=0)||(ae>>>=0,Q>>>=0,ae<=Q))return"";for(Pe||(Pe="utf8");;)switch(Pe){case"hex":return we(this,Q,ae);case"utf8":case"utf-8":return me(this,Q,ae);case"ascii":return Et(this,Q,ae);case"latin1":case"binary":return it(this,Q,ae);case"base64":return Se(this,Q,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,Q,ae);default:if(Qe)throw new TypeError("Unknown encoding: "+Pe);Pe=(Pe+"").toLowerCase(),Qe=!0}}r.prototype._isBuffer=!0;function Z(Pe,Q,ae){const Qe=Pe[Q];Pe[Q]=Pe[ae],Pe[ae]=Qe}r.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ae=0;ae<Q;ae+=2)Z(this,ae,ae+1);return this},r.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ae=0;ae<Q;ae+=4)Z(this,ae,ae+3),Z(this,ae+1,ae+2);return this},r.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ae=0;ae<Q;ae+=8)Z(this,ae,ae+7),Z(this,ae+1,ae+6),Z(this,ae+2,ae+5),Z(this,ae+3,ae+4);return this},r.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?me(this,0,Q):G.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(Q){if(!r.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:r.compare(this,Q)===0},r.prototype.inspect=function(){let Q="";const ae=i.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ae).replace(/(.{2})/g,"$1 ").trim(),this.length>ae&&(Q+=" ... "),"<Buffer "+Q+">"},o&&(r.prototype[o]=r.prototype.inspect),r.prototype.compare=function(Q,ae,Qe,_t,Jt){if(Yt(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),!r.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ae===void 0&&(ae=0),Qe===void 0&&(Qe=Q?Q.length:0),_t===void 0&&(_t=0),Jt===void 0&&(Jt=this.length),ae<0||Qe>Q.length||_t<0||Jt>this.length)throw new RangeError("out of range index");if(_t>=Jt&&ae>=Qe)return 0;if(_t>=Jt)return-1;if(ae>=Qe)return 1;if(ae>>>=0,Qe>>>=0,_t>>>=0,Jt>>>=0,this===Q)return 0;let di=Jt-_t,wn=Qe-ae;const Ln=Math.min(di,wn),hn=this.slice(_t,Jt),Bi=Q.slice(ae,Qe);for(let Xi=0;Xi<Ln;++Xi)if(hn[Xi]!==Bi[Xi]){di=hn[Xi],wn=Bi[Xi];break}return di<wn?-1:wn<di?1:0};function te(Pe,Q,ae,Qe,_t){if(Pe.length===0)return-1;if(typeof ae=="string"?(Qe=ae,ae=0):ae>2147483647?ae=2147483647:ae<-2147483648&&(ae=-2147483648),ae=+ae,mi(ae)&&(ae=_t?0:Pe.length-1),ae<0&&(ae=Pe.length+ae),ae>=Pe.length){if(_t)return-1;ae=Pe.length-1}else if(ae<0)if(_t)ae=0;else return-1;if(typeof Q=="string"&&(Q=r.from(Q,Qe)),r.isBuffer(Q))return Q.length===0?-1:J(Pe,Q,ae,Qe,_t);if(typeof Q=="number")return Q=Q&255,typeof Uint8Array.prototype.indexOf=="function"?_t?Uint8Array.prototype.indexOf.call(Pe,Q,ae):Uint8Array.prototype.lastIndexOf.call(Pe,Q,ae):J(Pe,[Q],ae,Qe,_t);throw new TypeError("val must be string, number or Buffer")}function J(Pe,Q,ae,Qe,_t){let Jt=1,di=Pe.length,wn=Q.length;if(Qe!==void 0&&(Qe=String(Qe).toLowerCase(),Qe==="ucs2"||Qe==="ucs-2"||Qe==="utf16le"||Qe==="utf-16le")){if(Pe.length<2||Q.length<2)return-1;Jt=2,di/=2,wn/=2,ae/=2}function Ln(Bi,Xi){return Jt===1?Bi[Xi]:Bi.readUInt16BE(Xi*Jt)}let hn;if(_t){let Bi=-1;for(hn=ae;hn<di;hn++)if(Ln(Pe,hn)===Ln(Q,Bi===-1?0:hn-Bi)){if(Bi===-1&&(Bi=hn),hn-Bi+1===wn)return Bi*Jt}else Bi!==-1&&(hn-=hn-Bi),Bi=-1}else for(ae+wn>di&&(ae=di-wn),hn=ae;hn>=0;hn--){let Bi=!0;for(let Xi=0;Xi<wn;Xi++)if(Ln(Pe,hn+Xi)!==Ln(Q,Xi)){Bi=!1;break}if(Bi)return hn}return-1}r.prototype.includes=function(Q,ae,Qe){return this.indexOf(Q,ae,Qe)!==-1},r.prototype.indexOf=function(Q,ae,Qe){return te(this,Q,ae,Qe,!0)},r.prototype.lastIndexOf=function(Q,ae,Qe){return te(this,Q,ae,Qe,!1)};function oe(Pe,Q,ae,Qe){ae=Number(ae)||0;const _t=Pe.length-ae;Qe?(Qe=Number(Qe),Qe>_t&&(Qe=_t)):Qe=_t;const Jt=Q.length;Qe>Jt/2&&(Qe=Jt/2);let di;for(di=0;di<Qe;++di){const wn=parseInt(Q.substr(di*2,2),16);if(mi(wn))return di;Pe[ae+di]=wn}return di}function Me(Pe,Q,ae,Qe){return Ti(ei(Q,Pe.length-ae),Pe,ae,Qe)}function Fe(Pe,Q,ae,Qe){return Ti(li(Q),Pe,ae,Qe)}function pe(Pe,Q,ae,Qe){return Ti(Si(Q),Pe,ae,Qe)}function Ie(Pe,Q,ae,Qe){return Ti($t(Q,Pe.length-ae),Pe,ae,Qe)}r.prototype.write=function(Q,ae,Qe,_t){if(ae===void 0)_t="utf8",Qe=this.length,ae=0;else if(Qe===void 0&&typeof ae=="string")_t=ae,Qe=this.length,ae=0;else if(isFinite(ae))ae=ae>>>0,isFinite(Qe)?(Qe=Qe>>>0,_t===void 0&&(_t="utf8")):(_t=Qe,Qe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Jt=this.length-ae;if((Qe===void 0||Qe>Jt)&&(Qe=Jt),Q.length>0&&(Qe<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");_t||(_t="utf8");let di=!1;for(;;)switch(_t){case"hex":return oe(this,Q,ae,Qe);case"utf8":case"utf-8":return Me(this,Q,ae,Qe);case"ascii":case"latin1":case"binary":return Fe(this,Q,ae,Qe);case"base64":return pe(this,Q,ae,Qe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,Q,ae,Qe);default:if(di)throw new TypeError("Unknown encoding: "+_t);_t=(""+_t).toLowerCase(),di=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(Pe,Q,ae){return Q===0&&ae===Pe.length?e.fromByteArray(Pe):e.fromByteArray(Pe.slice(Q,ae))}function me(Pe,Q,ae){ae=Math.min(Pe.length,ae);const Qe=[];let _t=Q;for(;_t<ae;){const Jt=Pe[_t];let di=null,wn=Jt>239?4:Jt>223?3:Jt>191?2:1;if(_t+wn<=ae){let Ln,hn,Bi,Xi;switch(wn){case 1:Jt<128&&(di=Jt);break;case 2:Ln=Pe[_t+1],(Ln&192)===128&&(Xi=(Jt&31)<<6|Ln&63,Xi>127&&(di=Xi));break;case 3:Ln=Pe[_t+1],hn=Pe[_t+2],(Ln&192)===128&&(hn&192)===128&&(Xi=(Jt&15)<<12|(Ln&63)<<6|hn&63,Xi>2047&&(Xi<55296||Xi>57343)&&(di=Xi));break;case 4:Ln=Pe[_t+1],hn=Pe[_t+2],Bi=Pe[_t+3],(Ln&192)===128&&(hn&192)===128&&(Bi&192)===128&&(Xi=(Jt&15)<<18|(Ln&63)<<12|(hn&63)<<6|Bi&63,Xi>65535&&Xi<1114112&&(di=Xi))}}di===null?(di=65533,wn=1):di>65535&&(di-=65536,Qe.push(di>>>10&1023|55296),di=56320|di&1023),Qe.push(di),_t+=wn}return nt(Qe)}const et=4096;function nt(Pe){const Q=Pe.length;if(Q<=et)return String.fromCharCode.apply(String,Pe);let ae="",Qe=0;for(;Qe<Q;)ae+=String.fromCharCode.apply(String,Pe.slice(Qe,Qe+=et));return ae}function Et(Pe,Q,ae){let Qe="";ae=Math.min(Pe.length,ae);for(let _t=Q;_t<ae;++_t)Qe+=String.fromCharCode(Pe[_t]&127);return Qe}function it(Pe,Q,ae){let Qe="";ae=Math.min(Pe.length,ae);for(let _t=Q;_t<ae;++_t)Qe+=String.fromCharCode(Pe[_t]);return Qe}function we(Pe,Q,ae){const Qe=Pe.length;(!Q||Q<0)&&(Q=0),(!ae||ae<0||ae>Qe)&&(ae=Qe);let _t="";for(let Jt=Q;Jt<ae;++Jt)_t+=Wi[Pe[Jt]];return _t}function ke(Pe,Q,ae){const Qe=Pe.slice(Q,ae);let _t="";for(let Jt=0;Jt<Qe.length-1;Jt+=2)_t+=String.fromCharCode(Qe[Jt]+Qe[Jt+1]*256);return _t}r.prototype.slice=function(Q,ae){const Qe=this.length;Q=~~Q,ae=ae===void 0?Qe:~~ae,Q<0?(Q+=Qe,Q<0&&(Q=0)):Q>Qe&&(Q=Qe),ae<0?(ae+=Qe,ae<0&&(ae=0)):ae>Qe&&(ae=Qe),ae<Q&&(ae=Q);const _t=this.subarray(Q,ae);return Object.setPrototypeOf(_t,r.prototype),_t};function Oe(Pe,Q,ae){if(Pe%1!==0||Pe<0)throw new RangeError("offset is not uint");if(Pe+Q>ae)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(Q,ae,Qe){Q=Q>>>0,ae=ae>>>0,Qe||Oe(Q,ae,this.length);let _t=this[Q],Jt=1,di=0;for(;++di<ae&&(Jt*=256);)_t+=this[Q+di]*Jt;return _t},r.prototype.readUintBE=r.prototype.readUIntBE=function(Q,ae,Qe){Q=Q>>>0,ae=ae>>>0,Qe||Oe(Q,ae,this.length);let _t=this[Q+--ae],Jt=1;for(;ae>0&&(Jt*=256);)_t+=this[Q+--ae]*Jt;return _t},r.prototype.readUint8=r.prototype.readUInt8=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,1,this.length),this[Q]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,2,this.length),this[Q]|this[Q+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,2,this.length),this[Q]<<8|this[Q+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},r.prototype.readBigUInt64LE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],Qe=this[Q+7];(ae===void 0||Qe===void 0)&&bt(Q,this.length-8);const _t=ae+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Jt=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+Qe*2**24;return BigInt(_t)+(BigInt(Jt)<<BigInt(32))}),r.prototype.readBigUInt64BE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],Qe=this[Q+7];(ae===void 0||Qe===void 0)&&bt(Q,this.length-8);const _t=ae*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Jt=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+Qe;return(BigInt(_t)<<BigInt(32))+BigInt(Jt)}),r.prototype.readIntLE=function(Q,ae,Qe){Q=Q>>>0,ae=ae>>>0,Qe||Oe(Q,ae,this.length);let _t=this[Q],Jt=1,di=0;for(;++di<ae&&(Jt*=256);)_t+=this[Q+di]*Jt;return Jt*=128,_t>=Jt&&(_t-=Math.pow(2,8*ae)),_t},r.prototype.readIntBE=function(Q,ae,Qe){Q=Q>>>0,ae=ae>>>0,Qe||Oe(Q,ae,this.length);let _t=ae,Jt=1,di=this[Q+--_t];for(;_t>0&&(Jt*=256);)di+=this[Q+--_t]*Jt;return Jt*=128,di>=Jt&&(di-=Math.pow(2,8*ae)),di},r.prototype.readInt8=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},r.prototype.readInt16LE=function(Q,ae){Q=Q>>>0,ae||Oe(Q,2,this.length);const Qe=this[Q]|this[Q+1]<<8;return Qe&32768?Qe|4294901760:Qe},r.prototype.readInt16BE=function(Q,ae){Q=Q>>>0,ae||Oe(Q,2,this.length);const Qe=this[Q+1]|this[Q]<<8;return Qe&32768?Qe|4294901760:Qe},r.prototype.readInt32LE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},r.prototype.readInt32BE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},r.prototype.readBigInt64LE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],Qe=this[Q+7];(ae===void 0||Qe===void 0)&&bt(Q,this.length-8);const _t=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(Qe<<24);return(BigInt(_t)<<BigInt(32))+BigInt(ae+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),r.prototype.readBigInt64BE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],Qe=this[Q+7];(ae===void 0||Qe===void 0)&&bt(Q,this.length-8);const _t=(ae<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(_t)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+Qe)}),r.prototype.readFloatLE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,4,this.length),t.read(this,Q,!0,23,4)},r.prototype.readFloatBE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,4,this.length),t.read(this,Q,!1,23,4)},r.prototype.readDoubleLE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,8,this.length),t.read(this,Q,!0,52,8)},r.prototype.readDoubleBE=function(Q,ae){return Q=Q>>>0,ae||Oe(Q,8,this.length),t.read(this,Q,!1,52,8)};function le(Pe,Q,ae,Qe,_t,Jt){if(!r.isBuffer(Pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>_t||Q<Jt)throw new RangeError('"value" argument is out of bounds');if(ae+Qe>Pe.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(Q,ae,Qe,_t){if(Q=+Q,ae=ae>>>0,Qe=Qe>>>0,!_t){const wn=Math.pow(2,8*Qe)-1;le(this,Q,ae,Qe,wn,0)}let Jt=1,di=0;for(this[ae]=Q&255;++di<Qe&&(Jt*=256);)this[ae+di]=Q/Jt&255;return ae+Qe},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(Q,ae,Qe,_t){if(Q=+Q,ae=ae>>>0,Qe=Qe>>>0,!_t){const wn=Math.pow(2,8*Qe)-1;le(this,Q,ae,Qe,wn,0)}let Jt=Qe-1,di=1;for(this[ae+Jt]=Q&255;--Jt>=0&&(di*=256);)this[ae+Jt]=Q/di&255;return ae+Qe},r.prototype.writeUint8=r.prototype.writeUInt8=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,1,255,0),this[ae]=Q&255,ae+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,2,65535,0),this[ae]=Q&255,this[ae+1]=Q>>>8,ae+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,2,65535,0),this[ae]=Q>>>8,this[ae+1]=Q&255,ae+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,4,4294967295,0),this[ae+3]=Q>>>24,this[ae+2]=Q>>>16,this[ae+1]=Q>>>8,this[ae]=Q&255,ae+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,4,4294967295,0),this[ae]=Q>>>24,this[ae+1]=Q>>>16,this[ae+2]=Q>>>8,this[ae+3]=Q&255,ae+4};function Ce(Pe,Q,ae,Qe,_t){ri(Q,Qe,_t,Pe,ae,7);let Jt=Number(Q&BigInt(4294967295));Pe[ae++]=Jt,Jt=Jt>>8,Pe[ae++]=Jt,Jt=Jt>>8,Pe[ae++]=Jt,Jt=Jt>>8,Pe[ae++]=Jt;let di=Number(Q>>BigInt(32)&BigInt(4294967295));return Pe[ae++]=di,di=di>>8,Pe[ae++]=di,di=di>>8,Pe[ae++]=di,di=di>>8,Pe[ae++]=di,ae}function he(Pe,Q,ae,Qe,_t){ri(Q,Qe,_t,Pe,ae,7);let Jt=Number(Q&BigInt(4294967295));Pe[ae+7]=Jt,Jt=Jt>>8,Pe[ae+6]=Jt,Jt=Jt>>8,Pe[ae+5]=Jt,Jt=Jt>>8,Pe[ae+4]=Jt;let di=Number(Q>>BigInt(32)&BigInt(4294967295));return Pe[ae+3]=di,di=di>>8,Pe[ae+2]=di,di=di>>8,Pe[ae+1]=di,di=di>>8,Pe[ae]=di,ae+8}r.prototype.writeBigUInt64LE=Ci(function(Q,ae=0){return Ce(this,Q,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=Ci(function(Q,ae=0){return he(this,Q,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(Q,ae,Qe,_t){if(Q=+Q,ae=ae>>>0,!_t){const Ln=Math.pow(2,8*Qe-1);le(this,Q,ae,Qe,Ln-1,-Ln)}let Jt=0,di=1,wn=0;for(this[ae]=Q&255;++Jt<Qe&&(di*=256);)Q<0&&wn===0&&this[ae+Jt-1]!==0&&(wn=1),this[ae+Jt]=(Q/di>>0)-wn&255;return ae+Qe},r.prototype.writeIntBE=function(Q,ae,Qe,_t){if(Q=+Q,ae=ae>>>0,!_t){const Ln=Math.pow(2,8*Qe-1);le(this,Q,ae,Qe,Ln-1,-Ln)}let Jt=Qe-1,di=1,wn=0;for(this[ae+Jt]=Q&255;--Jt>=0&&(di*=256);)Q<0&&wn===0&&this[ae+Jt+1]!==0&&(wn=1),this[ae+Jt]=(Q/di>>0)-wn&255;return ae+Qe},r.prototype.writeInt8=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,1,127,-128),Q<0&&(Q=255+Q+1),this[ae]=Q&255,ae+1},r.prototype.writeInt16LE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,2,32767,-32768),this[ae]=Q&255,this[ae+1]=Q>>>8,ae+2},r.prototype.writeInt16BE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,2,32767,-32768),this[ae]=Q>>>8,this[ae+1]=Q&255,ae+2},r.prototype.writeInt32LE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,4,2147483647,-2147483648),this[ae]=Q&255,this[ae+1]=Q>>>8,this[ae+2]=Q>>>16,this[ae+3]=Q>>>24,ae+4},r.prototype.writeInt32BE=function(Q,ae,Qe){return Q=+Q,ae=ae>>>0,Qe||le(this,Q,ae,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ae]=Q>>>24,this[ae+1]=Q>>>16,this[ae+2]=Q>>>8,this[ae+3]=Q&255,ae+4},r.prototype.writeBigInt64LE=Ci(function(Q,ae=0){return Ce(this,Q,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=Ci(function(Q,ae=0){return he(this,Q,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(Pe,Q,ae,Qe,_t,Jt){if(ae+Qe>Pe.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("Index out of range")}function Be(Pe,Q,ae,Qe,_t){return Q=+Q,ae=ae>>>0,_t||ge(Pe,Q,ae,4),t.write(Pe,Q,ae,Qe,23,4),ae+4}r.prototype.writeFloatLE=function(Q,ae,Qe){return Be(this,Q,ae,!0,Qe)},r.prototype.writeFloatBE=function(Q,ae,Qe){return Be(this,Q,ae,!1,Qe)};function We(Pe,Q,ae,Qe,_t){return Q=+Q,ae=ae>>>0,_t||ge(Pe,Q,ae,8),t.write(Pe,Q,ae,Qe,52,8),ae+8}r.prototype.writeDoubleLE=function(Q,ae,Qe){return We(this,Q,ae,!0,Qe)},r.prototype.writeDoubleBE=function(Q,ae,Qe){return We(this,Q,ae,!1,Qe)},r.prototype.copy=function(Q,ae,Qe,_t){if(!r.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(Qe||(Qe=0),!_t&&_t!==0&&(_t=this.length),ae>=Q.length&&(ae=Q.length),ae||(ae=0),_t>0&&_t<Qe&&(_t=Qe),_t===Qe||Q.length===0||this.length===0)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if(Qe<0||Qe>=this.length)throw new RangeError("Index out of range");if(_t<0)throw new RangeError("sourceEnd out of bounds");_t>this.length&&(_t=this.length),Q.length-ae<_t-Qe&&(_t=Q.length-ae+Qe);const Jt=_t-Qe;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ae,Qe,_t):Uint8Array.prototype.set.call(Q,this.subarray(Qe,_t),ae),Jt},r.prototype.fill=function(Q,ae,Qe,_t){if(typeof Q=="string"){if(typeof ae=="string"?(_t=ae,ae=0,Qe=this.length):typeof Qe=="string"&&(_t=Qe,Qe=this.length),_t!==void 0&&typeof _t!="string")throw new TypeError("encoding must be a string");if(typeof _t=="string"&&!r.isEncoding(_t))throw new TypeError("Unknown encoding: "+_t);if(Q.length===1){const di=Q.charCodeAt(0);(_t==="utf8"&&di<128||_t==="latin1")&&(Q=di)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ae<0||this.length<ae||this.length<Qe)throw new RangeError("Out of range index");if(Qe<=ae)return this;ae=ae>>>0,Qe=Qe===void 0?this.length:Qe>>>0,Q||(Q=0);let Jt;if(typeof Q=="number")for(Jt=ae;Jt<Qe;++Jt)this[Jt]=Q;else{const di=r.isBuffer(Q)?Q:r.from(Q,_t),wn=di.length;if(wn===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Jt=0;Jt<Qe-ae;++Jt)this[Jt+ae]=di[Jt%wn]}return this};const st={};function Xe(Pe,Q,ae){st[Pe]=class extends ae{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Pe}]`,this.stack,delete this.name}get code(){return Pe}set code(_t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_t,writable:!0})}toString(){return`${this.name} [${Pe}]: ${this.message}`}}}Xe("ERR_BUFFER_OUT_OF_BOUNDS",function(Pe){return Pe?`${Pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Xe("ERR_INVALID_ARG_TYPE",function(Pe,Q){return`The "${Pe}" argument must be of type number. Received type ${typeof Q}`},TypeError),Xe("ERR_OUT_OF_RANGE",function(Pe,Q,ae){let Qe=`The value of "${Pe}" is out of range.`,_t=ae;return Number.isInteger(ae)&&Math.abs(ae)>2**32?_t=gt(String(ae)):typeof ae=="bigint"&&(_t=String(ae),(ae>BigInt(2)**BigInt(32)||ae<-(BigInt(2)**BigInt(32)))&&(_t=gt(_t)),_t+="n"),Qe+=` It must be ${Q}. Received ${_t}`,Qe},RangeError);function gt(Pe){let Q="",ae=Pe.length;const Qe=Pe[0]==="-"?1:0;for(;ae>=Qe+4;ae-=3)Q=`_${Pe.slice(ae-3,ae)}${Q}`;return`${Pe.slice(0,ae)}${Q}`}function Pt(Pe,Q,ae){ut(Q,"offset"),(Pe[Q]===void 0||Pe[Q+ae]===void 0)&&bt(Q,Pe.length-(ae+1))}function ri(Pe,Q,ae,Qe,_t,Jt){if(Pe>ae||Pe<Q){const di=typeof Q=="bigint"?"n":"";let wn;throw Jt>3?Q===0||Q===BigInt(0)?wn=`>= 0${di} and < 2${di} ** ${(Jt+1)*8}${di}`:wn=`>= -(2${di} ** ${(Jt+1)*8-1}${di}) and < 2 ** ${(Jt+1)*8-1}${di}`:wn=`>= ${Q}${di} and <= ${ae}${di}`,new st.ERR_OUT_OF_RANGE("value",wn,Pe)}Pt(Qe,_t,Jt)}function ut(Pe,Q){if(typeof Pe!="number")throw new st.ERR_INVALID_ARG_TYPE(Q,"number",Pe)}function bt(Pe,Q,ae){throw Math.floor(Pe)!==Pe?(ut(Pe,ae),new st.ERR_OUT_OF_RANGE(ae||"offset","an integer",Pe)):Q<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(ae||"offset",`>= ${ae?1:0} and <= ${Q}`,Pe)}const vt=/[^+/0-9A-Za-z-_]/g;function Ke(Pe){if(Pe=Pe.split("=")[0],Pe=Pe.trim().replace(vt,""),Pe.length<2)return"";for(;Pe.length%4!==0;)Pe=Pe+"=";return Pe}function ei(Pe,Q){Q=Q||1/0;let ae;const Qe=Pe.length;let _t=null;const Jt=[];for(let di=0;di<Qe;++di){if(ae=Pe.charCodeAt(di),ae>55295&&ae<57344){if(!_t){if(ae>56319){(Q-=3)>-1&&Jt.push(239,191,189);continue}else if(di+1===Qe){(Q-=3)>-1&&Jt.push(239,191,189);continue}_t=ae;continue}if(ae<56320){(Q-=3)>-1&&Jt.push(239,191,189),_t=ae;continue}ae=(_t-55296<<10|ae-56320)+65536}else _t&&(Q-=3)>-1&&Jt.push(239,191,189);if(_t=null,ae<128){if((Q-=1)<0)break;Jt.push(ae)}else if(ae<2048){if((Q-=2)<0)break;Jt.push(ae>>6|192,ae&63|128)}else if(ae<65536){if((Q-=3)<0)break;Jt.push(ae>>12|224,ae>>6&63|128,ae&63|128)}else if(ae<1114112){if((Q-=4)<0)break;Jt.push(ae>>18|240,ae>>12&63|128,ae>>6&63|128,ae&63|128)}else throw new Error("Invalid code point")}return Jt}function li(Pe){const Q=[];for(let ae=0;ae<Pe.length;++ae)Q.push(Pe.charCodeAt(ae)&255);return Q}function $t(Pe,Q){let ae,Qe,_t;const Jt=[];for(let di=0;di<Pe.length&&!((Q-=2)<0);++di)ae=Pe.charCodeAt(di),Qe=ae>>8,_t=ae%256,Jt.push(_t),Jt.push(Qe);return Jt}function Si(Pe){return e.toByteArray(Ke(Pe))}function Ti(Pe,Q,ae,Qe){let _t;for(_t=0;_t<Qe&&!(_t+ae>=Q.length||_t>=Pe.length);++_t)Q[_t+ae]=Pe[_t];return _t}function Yt(Pe,Q){return Pe instanceof Q||Pe!=null&&Pe.constructor!=null&&Pe.constructor.name!=null&&Pe.constructor.name===Q.name}function mi(Pe){return Pe!==Pe}const Wi=function(){const Pe="0123456789abcdef",Q=new Array(256);for(let ae=0;ae<16;++ae){const Qe=ae*16;for(let _t=0;_t<16;++_t)Q[Qe+_t]=Pe[ae]+Pe[_t]}return Q}();function Ci(Pe){return typeof BigInt>"u"?ti:Pe}function ti(){throw new Error("BigInt not supported")}})(w3);const r7=Math.PI/180,o7=180/Math.PI,s7=i=>{const e=sb(i[0]+1,i[2]),t=sb(i[0],i[2]),o=ab(i[1]+1,i[2]),l=ab(i[1],i[2]);return[t,o,e,l]},sb=(i,e)=>i/Math.pow(2,e)*360-180,ab=(i,e)=>{const t=Math.PI-2*Math.PI*i/Math.pow(2,e);return o7*Math.atan(.5*(Math.exp(t)-Math.exp(-t)))},a7=(i,e,t)=>{const o=l7(i,e,t);return o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o},l7=(i,e,t)=>{const o=Math.sin(e*r7),l=Math.pow(2,t);let u=l*(i/360+.5);const m=l*(.5-.25*Math.log((1+o)/(1-o))/Math.PI);return u=u%l,u<0&&(u=u+l),[u,m,t]};class u7{constructor(e,t,o,l){this.url=e,this.tileSize=t,this.minzoom=o,this.maxzoom=l}getValue(e,t){return new Promise((o,l)=>{const u=e[0],m=e[1];let r=t;t>this.maxzoom?r=this.maxzoom:t<this.minzoom&&(r=this.minzoom);const f=a7(u,m,r),_=this.url.replace(/{x}/g,f[0].toString()).replace(/{y}/g,f[1].toString()).replace(/{z}/g,f[2].toString());let w=this.getUrlExtension(_);switch(w||(w="png"),w){case"png":YE.get(_,{responseType:"arraybuffer"}).then(b=>{const x=w3.Buffer.from(b.data,"binary"),v=this.getValueFromPNG(x,f,u,m);o(v)}).catch(b=>l(b));break;case"webp":b3(_).then(b=>{this.getValueFromWEBP(b,f,u,m).then(x=>{o(x)}).catch(x=>l(x))}).catch(b=>l(b));break;default:l(new Error(`Invalid file extension: ${w}`));break}})}getValueFromPNG(e,t,o,l){const m=UT.load(e).decodePixels(),r=this.pixels2rgba(m,t,o,l);return this.calc(r[0],r[1],r[2],r[3])}getValueFromWEBP(e,t,o,l){return new Promise((u,m)=>{new ZT().decode(e).then(f=>{const _=this.dataURIConverter(f),w=this.getValueFromPNG(_,t,o,l);u(w)}).catch(f=>m(f))})}pixels2rgba(e,t,o,l){const u=[];for(let w=0;w<e.length;w+=4){const b=e[w],x=e[w+1],v=e[w+2],C=e[w+3],T=[b,x,v,C];u.push(T)}const m=s7(t),r=this.getPixelPosition(o,l,m),f=r[0]+r[1]*this.tileSize;return u[f]}getPixelPosition(e,t,o){const l=this.tileSize,u=this.tileSize,m=o[2]-o[0],r=o[3]-o[1],f=(e-o[0])/m,_=(t-o[1])/r,w=Math.floor(l*f),b=Math.floor(u*(1-_));return[w,b]}getUrlExtension(e){let t=e.split(/[#?]/)[0].split(".").pop();return t&&(t=t.trim()),t}dataURIConverter(e){const t=atob(e.split(",")[1]),o=new Uint8Array(t.length);for(let l=0;l<t.length;l+=1)o[l]=t.charCodeAt(l);return o}}var c7=globalThis&&globalThis.__awaiter||function(i,e,t,o){function l(u){return u instanceof t?u:new t(function(m){m(u)})}return new(t||(t=Promise))(function(u,m){function r(w){try{_(o.next(w))}catch(b){m(b)}}function f(w){try{_(o.throw(w))}catch(b){m(b)}}function _(w){w.done?u(w.value):l(w.value).then(r,f)}_((o=o.apply(i,e||[])).next())})};class h7 extends u7{constructor(e,t,o=5,l=15){super(e,t,o,l)}getElevation(e,t){return c7(this,void 0,void 0,function*(){return yield this.getValue(e,t)})}calc(e,t,o){return-1e4+(e*256*256+t*256+o)*.1}}var iu=63710088e-1,f7={centimeters:iu*100,centimetres:iu*100,degrees:iu/111325,feet:iu*3.28084,inches:iu*39.37,kilometers:iu/1e3,kilometres:iu/1e3,meters:iu,metres:iu,miles:iu/1609.344,millimeters:iu*1e3,millimetres:iu*1e3,nauticalmiles:iu/1852,radians:1,yards:iu*1.0936};function d7(i,e){e===void 0&&(e="kilometers");var t=f7[e];if(!t)throw new Error(e+" units is invalid");return i*t}function Wp(i){var e=i%360;return e*Math.PI/180}function lb(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function p7(i,e,t){t===void 0&&(t={});var o=lb(i),l=lb(e),u=Wp(l[1]-o[1]),m=Wp(l[0]-o[0]),r=Wp(o[1]),f=Wp(l[1]),_=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(m/2),2)*Math.cos(r)*Math.cos(f);return d7(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),t.units)}function m7(i){let e,t,o,l,u;t=new Zf({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[x7]},$$scope:{ctx:i}}}),t.$on("click",i[5]);let m=i[1]&&ub(i);return{c(){e=zt("div"),ln(t.$$.fragment),o=Yi(),m&&m.c(),l=gn(),this.h()},l(r){e=Nt(r,"DIV",{class:!0});var f=Gt(e);pn(t.$$.fragment,f),f.forEach(Le),o=Zi(r),m&&m.l(r),l=gn(),this.h()},h(){Ht(e,"class","tool-button svelte-7hbpus")},m(r,f){qt(r,e,f),un(t,e,null),qt(r,o,f),m&&m.m(r,f),qt(r,l,f),u=!0},p(r,f){const _={};f&524289&&(_.$$scope={dirty:f,ctx:r}),t.$set(_),r[1]?m?(m.p(r,f),f&2&&xt(m,1)):(m=ub(r),m.c(),xt(m,1),m.m(l.parentNode,l)):m&&(Rr(),Ft(m,1,1,()=>{m=null}),Fr())},i(r){u||(xt(t.$$.fragment,r),xt(m),u=!0)},o(r){Ft(t.$$.fragment,r),Ft(m),u=!1},d(r){r&&Le(e),cn(t),r&&Le(o),m&&m.d(r),r&&Le(l)}}}function g7(i){let e;return{c(){e=Xn("straighten")},l(t){e=Yn(t,"straighten")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function y7(i){let e;return{c(){e=Xn("stop_circle")},l(t){e=Yn(t,"stop_circle")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function _7(i){let e;function t(u,m){return u[0]?y7:g7}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),qt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Le(e)}}}function v7(i){let e;return{c(){e=Xn("Start measure")},l(t){e=Yn(t,"Start measure")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function b7(i){let e;return{c(){e=Xn("Stop measure")},l(t){e=Yn(t,"Stop measure")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function w7(i){let e;function t(u,m){return u[0]?b7:v7}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),qt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Le(e)}}}function x7(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[_7]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[w7]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&524289&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&524289&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function ub(i){let e,t,o,l,u,m,r;return o=new Zf({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[S7]},$$scope:{ctx:i}}}),o.$on("click",i[6]),m=new Zf({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[I7]},$$scope:{ctx:i}}}),m.$on("click",i[7]),{c(){e=zt("div"),t=zt("div"),ln(o.$$.fragment),l=Yi(),u=zt("div"),ln(m.$$.fragment),this.h()},l(f){e=Nt(f,"DIV",{style:!0});var _=Gt(e);t=Nt(_,"DIV",{class:!0});var w=Gt(t);pn(o.$$.fragment,w),w.forEach(Le),l=Zi(_),u=Nt(_,"DIV",{class:!0});var b=Gt(u);pn(m.$$.fragment,b),b.forEach(Le),_.forEach(Le),this.h()},h(){Ht(t,"class","sub-button svelte-7hbpus"),Ht(u,"class","sub-button svelte-7hbpus"),ec(e,"display","inline-flex"),ec(e,"width","100%")},m(f,_){qt(f,e,_),Dt(e,t),un(o,t,null),Dt(e,l),Dt(e,u),un(m,u,null),r=!0},p(f,_){const w={};_&524288&&(w.$$scope={dirty:_,ctx:f}),o.$set(w);const b={};_&524288&&(b.$$scope={dirty:_,ctx:f}),m.$set(b)},i(f){r||(xt(o.$$.fragment,f),xt(m.$$.fragment,f),r=!0)},o(f){Ft(o.$$.fragment,f),Ft(m.$$.fragment,f),r=!1},d(f){f&&Le(e),cn(o),cn(m)}}}function A7(i){let e;return{c(){e=Xn("delete")},l(t){e=Yn(t,"delete")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function k7(i){let e;return{c(){e=Xn("Clear")},l(t){e=Yn(t,"Clear")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function S7(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[A7]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[k7]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&524288&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&524288&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function C7(i){let e;return{c(){e=Xn("file_download")},l(t){e=Yn(t,"file_download")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function E7(i){let e;return{c(){e=Xn("GeoJSON")},l(t){e=Yn(t,"GeoJSON")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function I7(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[C7]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[E7]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&524288&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&524288&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function T7(i){let e,t,o=fr.elevation&&m7(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,[u]){fr.elevation&&o.p(l,u)},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}const I0="elev-controls-source-line",b2="elev-controls-layer-line",w2="elev-controls-layer-symbol",T0="elev-controls-source-symbol";function L7(i,e,t){let o,l;As(i,xd,te=>t(8,o=te)),As(i,nu,te=>t(9,l=te));let u,m=fr.elevation.options.units||"kilometers",r=!1;Ds(()=>{if(o)o.coordinates.length>0&&t(1,r=!0);else{const te={markers:[],coordinates:[],elevations:[]};xd.update(()=>te)}}),nh(()=>{u===!0&&w()});const f=()=>{u?w():_()},_=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(0,u=!0),l.on("click",x),l.fire("elevation.on"))},w=()=>{t(0,u=!1),l&&(l.getCanvas().style.cursor="",l.off("click",x),l.fire("elevation.off"))},b=()=>{l&&(l.getLayer(b2)&&l.removeLayer(b2),l.getLayer(w2)&&l.removeLayer(w2),l.getSource(I0)&&l.removeSource(I0),l.getSource(T0)&&l.removeSource(T0)),o.markers.forEach(te=>te.remove()),t(1,r=!1)},x=te=>{(!(l!=null&&l.getSource(I0))||!(l!=null&&l.getSource(T0)))&&(b(),v());let J=l==null?void 0:l.getZoom();J||(J=15),J=Math.round(J);const oe=[te.lngLat.lng,te.lngLat.lat];new h7(fr.elevation.url,fr.elevation.options.tileSize).getElevation(oe,J).then(Fe=>{if(Fe||(Fe=-1),l){const pe=new Tu.exports.Marker({draggable:!0}).setLngLat(te.lngLat).addTo(l);o.markers.push(pe),o.coordinates.push([oe[0],oe[1],Fe]),o.elevations.push(Fe),l.getSource(I0).setData(T(o.coordinates)),l.getSource(T0).setData(S(o.coordinates)),t(1,r=!0)}})},v=()=>{Ih(xd,o.markers=[],o),Ih(xd,o.coordinates=[],o),Ih(xd,o.elevations=[],o),l&&(l.addSource(I0,{type:"geojson",data:T(o.coordinates)}),l.addSource(T0,{type:"geojson",data:S(o.coordinates)}),l.addLayer({id:b2,type:"line",source:I0,paint:{"line-color":fr.elevation.options.mainColor,"line-width":2}}),l.addLayer({id:w2,type:"symbol",source:T0,layout:{"text-field":"{text}","text-font":fr.elevation.options.font,"text-size":fr.elevation.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":fr.elevation.options.mainColor,"text-halo-color":fr.elevation.options.haloColor,"text-halo-width":fr.elevation.options.fontHalo}}))},C=(te,J)=>{let oe=`${te.toFixed(2)} km`;te<1&&(oe=`${(te*1e3).toFixed()} m`);let Me="";return J>0&&(Me=`
alt.${J}m`),`${oe}${Me}`},T=(te=[])=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:te}}),S=(te=[])=>{let J=0;return{type:"FeatureCollection",features:te.map((oe,Me)=>(Me>0&&(J+=p7(te[Me-1],te[Me],{units:m})),{type:"Feature",properties:{id:Me+1,text:C(J,oe[2]),elevation:oe[2],length:(J*1e3).toFixed()},geometry:{type:"Point",coordinates:oe}}))}},M=()=>{if(o.coordinates.length===0)return;const te=S(o.coordinates);if(te.features.forEach(Me=>{delete Me.properties.text}),o.coordinates.length>1){const Me=T(o.coordinates);te.features.push(Me)}const J="measure_result.geojson",oe=JSON.stringify(te);O(J,oe)},O=(te,J)=>{const oe=new Blob([J],{type:"text/plain"}),Me=document.createElement("a");Me.href=URL.createObjectURL(oe),Me.setAttribute("download",te),Me.dispatchEvent(new MouseEvent("click"))};return[u,r,f,b,M,()=>f(),()=>b(),()=>M()]}class P7 extends vr{constructor(e){super(),br(this,e,L7,T7,mr,{})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var M7={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var D7=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.shakeAnimationEndHandler=function(){o.handleShakeAnimationEnd()},o}return Object.defineProperty(e,"cssClasses",{get:function(){return M7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(t){var o=e.cssClasses.LABEL_SHAKE;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.float=function(t){var o=e.cssClasses,l=o.LABEL_FLOAT_ABOVE,u=o.LABEL_SHAKE;t?this.adapter.addClass(l):(this.adapter.removeClass(l),this.adapter.removeClass(u))},e.prototype.setRequired=function(t){var o=e.cssClasses.LABEL_REQUIRED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.handleShakeAnimationEnd=function(){var t=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(t)},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Df={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var O7=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.transitionEndHandler=function(l){o.handleTransitionEnd(l)},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Df},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(Df.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Df.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(t){this.adapter.setStyle("transform-origin",t+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(Df.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(t){var o=this.adapter.hasClass(Df.LINE_RIPPLE_DEACTIVATING);t.propertyName==="opacity"&&o&&(this.adapter.removeClass(Df.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Df.LINE_RIPPLE_DEACTIVATING))},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var F7={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},R7={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Cd={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},ea;(function(i){i[i.BOTTOM=1]="BOTTOM",i[i.CENTER=2]="CENTER",i[i.RIGHT=4]="RIGHT",i[i.FLIP_RTL=8]="FLIP_RTL"})(ea||(ea={}));var Wf;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=4]="TOP_RIGHT",i[i.BOTTOM_LEFT=1]="BOTTOM_LEFT",i[i.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",i[i.TOP_START=8]="TOP_START",i[i.TOP_END=12]="TOP_END",i[i.BOTTOM_START=9]="BOTTOM_START",i[i.BOTTOM_END=13]="BOTTOM_END"})(Wf||(Wf={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Jh,Ah,lo={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};Jh={},Jh[""+lo.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",Jh[""+lo.LIST_ITEM_CLASS]="mdc-list-item",Jh[""+lo.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",Jh[""+lo.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",Jh[""+lo.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",Jh[""+lo.ROOT]="mdc-list";var L0=(Ah={},Ah[""+lo.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Ah[""+lo.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Ah[""+lo.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Ah[""+lo.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Ah[""+lo.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Ah[""+lo.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Ah[""+lo.ROOT]="mdc-deprecated-list",Ah),Qh={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+lo.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` a,
    .`+L0[lo.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+L0[lo.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+lo.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` a,
    .`+lo.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+L0[lo.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+L0[lo.LIST_ITEM_CLASS]+` a,
    .`+L0[lo.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+L0[lo.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},ka={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var B7=["input","button","textarea","select"],Uf=function(i){var e=i.target;if(!!e){var t=(""+e.tagName).toLowerCase();B7.indexOf(t)===-1&&i.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function z7(){var i={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return i}function N7(i,e){for(var t=new Map,o=0;o<i;o++){var l=e(o).trim();if(!!l){var u=l[0].toLowerCase();t.has(u)||t.set(u,[]),t.get(u).push({text:l.toLowerCase(),index:o})}}return t.forEach(function(m){m.sort(function(r,f){return r.index-f.index})}),t}function og(i,e){var t=i.nextChar,o=i.focusItemAtIndex,l=i.sortedIndexByFirstChar,u=i.focusedItemIndex,m=i.skipFocus,r=i.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){k3(e)},ka.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+t;var f;return e.typeaheadBuffer.length===1?f=j7(l,u,r,e):f=U7(l,r,e),f!==-1&&!m&&o(f),f}function j7(i,e,t,o){var l=o.typeaheadBuffer[0],u=i.get(l);if(!u)return-1;if(l===o.currentFirstChar&&u[o.sortedIndexCursor].index===e){o.sortedIndexCursor=(o.sortedIndexCursor+1)%u.length;var m=u[o.sortedIndexCursor].index;if(!t(m))return m}o.currentFirstChar=l;var r=-1,f;for(f=0;f<u.length;f++)if(!t(u[f].index)){r=f;break}for(;f<u.length;f++)if(u[f].index>e&&!t(u[f].index)){r=f;break}return r!==-1?(o.sortedIndexCursor=r,u[o.sortedIndexCursor].index):-1}function U7(i,e,t){var o=t.typeaheadBuffer[0],l=i.get(o);if(!l)return-1;var u=l[t.sortedIndexCursor];if(u.text.lastIndexOf(t.typeaheadBuffer,0)===0&&!e(u.index))return u.index;for(var m=(t.sortedIndexCursor+1)%l.length,r=-1;m!==t.sortedIndexCursor;){var f=l[m],_=f.text.lastIndexOf(t.typeaheadBuffer,0)===0,w=!e(f.index);if(_&&w){r=m;break}m=(m+1)%l.length}return r!==-1?(t.sortedIndexCursor=r,l[t.sortedIndexCursor].index):-1}function A3(i){return i.typeaheadBuffer.length>0}function k3(i){i.typeaheadBuffer=""}function cb(i,e){var t=i.event,o=i.isTargetListItem,l=i.focusedItemIndex,u=i.focusItemAtIndex,m=i.sortedIndexByFirstChar,r=i.isItemAtIndexDisabled,f=fa(t)==="ArrowLeft",_=fa(t)==="ArrowUp",w=fa(t)==="ArrowRight",b=fa(t)==="ArrowDown",x=fa(t)==="Home",v=fa(t)==="End",C=fa(t)==="Enter",T=fa(t)==="Spacebar";if(t.ctrlKey||t.metaKey||f||_||w||b||x||v||C)return-1;var S=!T&&t.key.length===1;if(S){Uf(t);var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:t.key.toLowerCase(),sortedIndexByFirstChar:m,skipFocus:!1,isItemAtIndexDisabled:r};return og(M,e)}if(!T)return-1;o&&Uf(t);var O=o&&A3(e);if(O){var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:" ",sortedIndexByFirstChar:m,skipFocus:!1,isItemAtIndexDisabled:r};return og(M,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function V7(i){return i instanceof Array}var q7=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.wrapFocus=!1,o.isVertical=!0,o.isSingleSelectionList=!1,o.selectedIndex=ka.UNSET_INDEX,o.focusedItemIndex=ka.UNSET_INDEX,o.useActivatedClass=!1,o.useSelectedAttr=!1,o.ariaCurrentAttrValue=null,o.isCheckboxList=!1,o.isRadioList=!1,o.hasTypeahead=!1,o.typeaheadState=z7(),o.sortedIndexByFirstChar=new Map,o}return Object.defineProperty(e,"strings",{get:function(){return Qh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return lo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ka},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(t){this.wrapFocus=t},e.prototype.setVerticalOrientation=function(t){this.isVertical=t},e.prototype.setSingleSelection=function(t){this.isSingleSelectionList=t,t&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var t=this.getSelectedIndexFromDOM();if(t!==ka.UNSET_INDEX){var o=this.adapter.listItemAtIndexHasClass(t,lo.LIST_ITEM_ACTIVATED_CLASS);o&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=t}},e.prototype.getSelectedIndexFromDOM=function(){for(var t=ka.UNSET_INDEX,o=this.adapter.getListItemCount(),l=0;l<o;l++){var u=this.adapter.listItemAtIndexHasClass(l,lo.LIST_ITEM_SELECTED_CLASS),m=this.adapter.listItemAtIndexHasClass(l,lo.LIST_ITEM_ACTIVATED_CLASS);if(!!(u||m)){t=l;break}}return t},e.prototype.setHasTypeahead=function(t){this.hasTypeahead=t,t&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&A3(this.typeaheadState)},e.prototype.setUseActivatedClass=function(t){this.useActivatedClass=t},e.prototype.setUseSelectedAttribute=function(t){this.useSelectedAttr=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t,o){var l=o===void 0?{}:o,u=l.forceUpdate;!this.isIndexValid(t)||(this.isCheckboxList?this.setCheckboxAtIndex(t):this.isRadioList?this.setRadioAtIndex(t):this.setSingleSelectionAtIndex(t,{forceUpdate:u}))},e.prototype.handleFocusIn=function(t){t>=0&&(this.focusedItemIndex=t,this.adapter.setAttributeForElementIndex(t,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(t,"0"))},e.prototype.handleFocusOut=function(t){var o=this;t>=0&&(this.adapter.setAttributeForElementIndex(t,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(t,"-1")),setTimeout(function(){o.adapter.isFocusInsideList()||o.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(t,o,l){var u=this,m=fa(t)==="ArrowLeft",r=fa(t)==="ArrowUp",f=fa(t)==="ArrowRight",_=fa(t)==="ArrowDown",w=fa(t)==="Home",b=fa(t)==="End",x=fa(t)==="Enter",v=fa(t)==="Spacebar",C=t.key==="A"||t.key==="a";if(this.adapter.isRootFocused()){if(r||b?(t.preventDefault(),this.focusLastElement()):(_||w)&&(t.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var T={event:t,focusItemAtIndex:function(O){u.focusItemAtIndex(O)},focusedItemIndex:-1,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(O){return u.adapter.listItemAtIndexHasClass(O,lo.LIST_ITEM_DISABLED_CLASS)}};cb(T,this.typeaheadState)}return}var S=this.adapter.getFocusedElementIndex();if(!(S===-1&&(S=l,S<0))){if(this.isVertical&&_||!this.isVertical&&f)Uf(t),this.focusNextElement(S);else if(this.isVertical&&r||!this.isVertical&&m)Uf(t),this.focusPrevElement(S);else if(w)Uf(t),this.focusFirstElement();else if(b)Uf(t),this.focusLastElement();else if(C&&t.ctrlKey&&this.isCheckboxList)t.preventDefault(),this.toggleAll(this.selectedIndex===ka.UNSET_INDEX?[]:this.selectedIndex);else if((x||v)&&o){var M=t.target;if(M&&M.tagName==="A"&&x||(Uf(t),this.adapter.listItemAtIndexHasClass(S,lo.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(S),this.adapter.notifyAction(S))}if(this.hasTypeahead){var T={event:t,focusItemAtIndex:function(V){u.focusItemAtIndex(V)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(V){return u.adapter.listItemAtIndexHasClass(V,lo.LIST_ITEM_DISABLED_CLASS)}};cb(T,this.typeaheadState)}}},e.prototype.handleClick=function(t,o){t!==ka.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(t,lo.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(t,o),this.adapter.notifyAction(t)))},e.prototype.focusNextElement=function(t){var o=this.adapter.getListItemCount(),l=t+1;if(l>=o)if(this.wrapFocus)l=0;else return t;return this.focusItemAtIndex(l),l},e.prototype.focusPrevElement=function(t){var o=t-1;if(o<0)if(this.wrapFocus)o=this.adapter.getListItemCount()-1;else return t;return this.focusItemAtIndex(o),o},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var t=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(t),t},e.prototype.focusInitialElement=function(){var t=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(t),t},e.prototype.setEnabled=function(t,o){!this.isIndexValid(t)||(o?(this.adapter.removeClassForElementIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,Qh.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,Qh.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(t,o){var l=o===void 0?{}:o,u=l.forceUpdate;if(!(this.selectedIndex===t&&!u)){var m=lo.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(m=lo.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==ka.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,m),this.setAriaForSingleSelectionAtIndex(t),this.setTabindexAtIndex(t),t!==ka.UNSET_INDEX&&this.adapter.addClassForElementIndex(t,m),this.selectedIndex=t}},e.prototype.setAriaForSingleSelectionAtIndex=function(t){this.selectedIndex===ka.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(t,Qh.ARIA_CURRENT));var o=this.ariaCurrentAttrValue!==null,l=o?Qh.ARIA_CURRENT:Qh.ARIA_SELECTED;if(this.selectedIndex!==ka.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,l,"false"),t!==ka.UNSET_INDEX){var u=o?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(t,l,u)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?Qh.ARIA_SELECTED:Qh.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(t){var o=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(t,!0),this.selectedIndex!==ka.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,o,"false"),this.adapter.setAttributeForElementIndex(t,o,"true"),this.selectedIndex=t},e.prototype.setCheckboxAtIndex=function(t){for(var o=this.getSelectionAttribute(),l=0;l<this.adapter.getListItemCount();l++){var u=!1;t.indexOf(l)>=0&&(u=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(l,u),this.adapter.setAttributeForElementIndex(l,o,u?"true":"false")}this.selectedIndex=t},e.prototype.setTabindexAtIndex=function(t){this.focusedItemIndex===ka.UNSET_INDEX&&t!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==t&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==t&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),t!==ka.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(t,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var t=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(t)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==ka.UNSET_INDEX?this.selectedIndex:V7(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(t,o){return Math.min(t,o)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(t){var o=this;if(t instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return t.length===0?!0:t.some(function(l){return o.isIndexInRange(l)})}else if(typeof t=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return this.isIndexInRange(t)||this.isSingleSelectionList&&t===ka.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(t){var o=this.adapter.getListItemCount();return t>=0&&t<o},e.prototype.setSelectedIndexOnAction=function(t,o){o===void 0&&(o=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(t,o):this.setSelectedIndex(t)},e.prototype.toggleCheckboxAtIndex=function(t,o){var l=this.getSelectionAttribute(),u=this.adapter.isCheckboxCheckedAtIndex(t);o&&(u=!u,this.adapter.setCheckedCheckboxOrRadioAtIndex(t,u)),this.adapter.setAttributeForElementIndex(t,l,u?"true":"false");var m=this.selectedIndex===ka.UNSET_INDEX?[]:this.selectedIndex.slice();u?m.push(t):m=m.filter(function(r){return r!==t}),this.selectedIndex=m},e.prototype.focusItemAtIndex=function(t){this.adapter.focusItemAtIndex(t),this.focusedItemIndex=t},e.prototype.toggleAll=function(t){var o=this.adapter.getListItemCount();if(t.length===o)this.setCheckboxAtIndex([]);else{for(var l=[],u=0;u<o;u++)(!this.adapter.listItemAtIndexHasClass(u,lo.LIST_ITEM_DISABLED_CLASS)||t.indexOf(u)>-1)&&l.push(u);this.setCheckboxAtIndex(l)}},e.prototype.typeaheadMatchItem=function(t,o,l){var u=this;l===void 0&&(l=!1);var m={focusItemAtIndex:function(r){u.focusItemAtIndex(r)},focusedItemIndex:o||this.focusedItemIndex,nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:l,isItemAtIndexDisabled:function(r){return u.adapter.listItemAtIndexHasClass(r,lo.LIST_ITEM_DISABLED_CLASS)}};return og(m,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return N7(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){k3(this.typeaheadState)},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var S3=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.isSurfaceOpen=!1,o.isQuickOpen=!1,o.isHoistedElement=!1,o.isFixedPosition=!1,o.isHorizontallyCenteredOnViewport=!1,o.maxHeight=0,o.openAnimationEndTimerId=0,o.closeAnimationEndTimerId=0,o.animationRequestId=0,o.anchorCorner=Wf.TOP_START,o.originCorner=Wf.TOP_START,o.anchorMargin={top:0,right:0,bottom:0,left:0},o.position={x:0,y:0},o}return Object.defineProperty(e,"cssClasses",{get:function(){return F7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return R7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Cd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Wf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=e.cssClasses,o=t.ROOT,l=t.OPEN;if(!this.adapter.hasClass(o))throw new Error(o+" class required in root element.");this.adapter.hasClass(l)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(t){this.anchorCorner=t},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^ea.RIGHT},e.prototype.setAnchorMargin=function(t){this.anchorMargin.top=t.top||0,this.anchorMargin.right=t.right||0,this.anchorMargin.bottom=t.bottom||0,this.anchorMargin.left=t.left||0},e.prototype.setIsHoisted=function(t){this.isHoistedElement=t},e.prototype.setFixedPosition=function(t){this.isFixedPosition=t},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(t,o){this.position.x=this.isFinite(t)?t:0,this.position.y=this.isFinite(o)?o:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(t){this.isHorizontallyCenteredOnViewport=t},e.prototype.setQuickOpen=function(t){this.isQuickOpen=t},e.prototype.setMaxHeight=function(t){this.maxHeight=t},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var t=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){t.dimensions=t.adapter.getInnerDimensions(),t.autoposition(),t.adapter.addClass(e.cssClasses.OPEN),t.openAnimationEndTimerId=setTimeout(function(){t.openAnimationEndTimerId=0,t.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),t.adapter.notifyOpen()},Cd.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(t){var o=this;if(t===void 0&&(t=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,t||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){o.adapter.removeClass(e.cssClasses.OPEN),o.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),o.closeAnimationEndTimerId=setTimeout(function(){o.closeAnimationEndTimerId=0,o.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),o.adapter.notifyClose()},Cd.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,t||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(t){var o=t.target;this.adapter.isElementInContainer(o)||this.close()},e.prototype.handleKeydown=function(t){var o=t.keyCode,l=t.key,u=l==="Escape"||o===27;u&&this.close()},e.prototype.autoposition=function(){var t;this.measurements=this.getAutoLayoutmeasurements();var o=this.getoriginCorner(),l=this.getMenuSurfaceMaxHeight(o),u=this.hasBit(o,ea.BOTTOM)?"bottom":"top",m=this.hasBit(o,ea.RIGHT)?"right":"left",r=this.getHorizontalOriginOffset(o),f=this.getVerticalOriginOffset(o),_=this.measurements,w=_.anchorSize,b=_.surfaceSize,x=(t={},t[m]=r,t[u]=f,t);w.width/b.width>Cd.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(m="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(x),this.adapter.setTransformOrigin(m+" "+u),this.adapter.setPosition(x),this.adapter.setMaxHeight(l?l+"px":""),this.hasBit(o,ea.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var t=this.adapter.getAnchorDimensions(),o=this.adapter.getBodyDimensions(),l=this.adapter.getWindowDimensions(),u=this.adapter.getWindowScroll();return t||(t={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:t,bodySize:o,surfaceSize:this.dimensions,viewportDistance:{top:t.top,right:l.width-t.right,bottom:l.height-t.bottom,left:t.left},viewportSize:l,windowScroll:u}},e.prototype.getoriginCorner=function(){var t=this.originCorner,o=this.measurements,l=o.viewportDistance,u=o.anchorSize,m=o.surfaceSize,r=e.numbers.MARGIN_TO_EDGE,f=this.hasBit(this.anchorCorner,ea.BOTTOM),_,w;f?(_=l.top-r+this.anchorMargin.bottom,w=l.bottom-r-this.anchorMargin.bottom):(_=l.top-r+this.anchorMargin.top,w=l.bottom-r+u.height-this.anchorMargin.top);var b=w-m.height>0;!b&&_>w&&(t=this.setBit(t,ea.BOTTOM));var x=this.adapter.isRtl(),v=this.hasBit(this.anchorCorner,ea.FLIP_RTL),C=this.hasBit(this.anchorCorner,ea.RIGHT)||this.hasBit(t,ea.RIGHT),T=!1;x&&v?T=!C:T=C;var S,M;T?(S=l.left+u.width+this.anchorMargin.right,M=l.right-this.anchorMargin.right):(S=l.left+this.anchorMargin.left,M=l.right+u.width-this.anchorMargin.left);var O=S-m.width>0,V=M-m.width>0,G=this.hasBit(t,ea.FLIP_RTL)&&this.hasBit(t,ea.RIGHT);return V&&G&&x||!O&&G?t=this.unsetBit(t,ea.RIGHT):(O&&T&&x||O&&!T&&C||!V&&S>=M)&&(t=this.setBit(t,ea.RIGHT)),t},e.prototype.getMenuSurfaceMaxHeight=function(t){if(this.maxHeight>0)return this.maxHeight;var o=this.measurements.viewportDistance,l=0,u=this.hasBit(t,ea.BOTTOM),m=this.hasBit(this.anchorCorner,ea.BOTTOM),r=e.numbers.MARGIN_TO_EDGE;return u?(l=o.top+this.anchorMargin.top-r,m||(l+=this.measurements.anchorSize.height)):(l=o.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-r,m&&(l-=this.measurements.anchorSize.height)),l},e.prototype.getHorizontalOriginOffset=function(t){var o=this.measurements.anchorSize,l=this.hasBit(t,ea.RIGHT),u=this.hasBit(this.anchorCorner,ea.RIGHT);if(l){var m=u?o.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?m-(this.measurements.viewportSize.width-this.measurements.bodySize.width):m}return u?o.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(t){var o=this.measurements.anchorSize,l=this.hasBit(t,ea.BOTTOM),u=this.hasBit(this.anchorCorner,ea.BOTTOM),m=0;return l?m=u?o.height-this.anchorMargin.top:-this.anchorMargin.bottom:m=u?o.height+this.anchorMargin.bottom:this.anchorMargin.top,m},e.prototype.adjustPositionForHoistedElement=function(t){var o,l,u=this.measurements,m=u.windowScroll,r=u.viewportDistance,f=u.surfaceSize,_=u.viewportSize,w=Object.keys(t);try{for(var b=Eh(w),x=b.next();!x.done;x=b.next()){var v=x.value,C=t[v]||0;if(this.isHorizontallyCenteredOnViewport&&(v==="left"||v==="right")){t[v]=(_.width-f.width)/2;continue}C+=r[v],this.isFixedPosition||(v==="top"?C+=m.y:v==="bottom"?C-=m.y:v==="left"?C+=m.x:C-=m.x),t[v]=C}}catch(T){o={error:T}}finally{try{x&&!x.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}},e.prototype.maybeRestoreFocus=function(){var t=this,o=this.adapter.isFocused(),l=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(o||l)&&setTimeout(function(){t.adapter.restoreFocus()},Cd.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(t,o){return Boolean(t&o)},e.prototype.setBit=function(t,o){return t|o},e.prototype.unsetBit=function(t,o){return t^o},e.prototype.isFinite=function(t){return typeof t=="number"&&isFinite(t)},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $0={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},P0={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},H7={FOCUS_ROOT_INDEX:-1},U0;(function(i){i[i.NONE=0]="NONE",i[i.LIST_ROOT=1]="LIST_ROOT",i[i.FIRST_ITEM=2]="FIRST_ITEM",i[i.LAST_ITEM=3]="LAST_ITEM"})(U0||(U0={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var G7=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.closeAnimationEndTimerId=0,o.defaultFocusState=U0.LIST_ROOT,o.selectedIndex=-1,o}return Object.defineProperty(e,"cssClasses",{get:function(){return $0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return P0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return H7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(t){var o=t.key,l=t.keyCode,u=o==="Tab"||l===9;u&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(t){var o=this,l=this.adapter.getElementIndex(t);if(!(l<0)){this.adapter.notifySelected({index:l});var u=this.adapter.getAttributeFromElementAtIndex(l,P0.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(u),this.closeAnimationEndTimerId=setTimeout(function(){var m=o.adapter.getElementIndex(t);m>=0&&o.adapter.isSelectableItemAtIndex(m)&&o.setSelectedIndex(m)},S3.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case U0.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case U0.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case U0.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(t){this.defaultFocusState=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t){if(this.validatedIndex(t),!this.adapter.isSelectableItemAtIndex(t))throw new Error("MDCMenuFoundation: No selection group at specified index.");var o=this.adapter.getSelectedSiblingOfItemAtIndex(t);o>=0&&(this.adapter.removeAttributeFromElementAtIndex(o,P0.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(o,$0.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(t,$0.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(t,P0.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=t},e.prototype.setEnabled=function(t,o){this.validatedIndex(t),o?(this.adapter.removeClassFromElementAtIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,P0.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,P0.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(t){var o=this.adapter.getMenuItemCount(),l=t>=0&&t<o;if(!l)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var W7={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},hb={NOTCH_ELEMENT_PADDING:8},X7={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Y7=function(i){Nl(e,i);function e(t){return i.call(this,hs(hs({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return W7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return X7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return hb},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(t){var o=e.cssClasses.OUTLINE_NOTCHED;t>0&&(t+=hb.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(t),this.adapter.addClass(o)},e.prototype.closeNotch=function(){var t=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(t),this.adapter.removeNotchWidthProperty()},e}(ic);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var js={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},x2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},Of={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Z7=function(i){Nl(e,i);function e(t,o){o===void 0&&(o={});var l=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return l.disabled=!1,l.isMenuOpen=!1,l.useDefaultValidation=!0,l.customValidity=!0,l.lastSelectedIndex=Of.UNSET_INDEX,l.clickDebounceTimeout=0,l.recentlyClicked=!1,l.leadingIcon=o.leadingIcon,l.helperText=o.helperText,l}return Object.defineProperty(e,"cssClasses",{get:function(){return js},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Of},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return x2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(t,o,l){o===void 0&&(o=!1),l===void 0&&(l=!1),!(t>=this.adapter.getMenuItemCount())&&(t===Of.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(t).trim()),this.adapter.setSelectedIndex(t),o&&this.adapter.closeMenu(),!l&&this.lastSelectedIndex!==t&&this.handleChange(),this.lastSelectedIndex=t)},e.prototype.setValue=function(t,o){o===void 0&&(o=!1);var l=this.adapter.getMenuItemValues().indexOf(t);this.setSelectedIndex(l,!1,o)},e.prototype.getValue=function(){var t=this.adapter.getSelectedIndex(),o=this.adapter.getMenuItemValues();return t!==Of.UNSET_INDEX?o[t]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(t){this.disabled=t,this.disabled?(this.adapter.addClass(js.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(js.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass(js.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var t=this.getValue().length>0,o=this.adapter.hasClass(js.FOCUSED),l=t||o,u=this.adapter.hasClass(js.REQUIRED);this.notchOutline(l),this.adapter.floatLabel(l),this.adapter.setLabelRequired(u)}},e.prototype.layoutOptions=function(){var t=this.adapter.getMenuItemValues(),o=t.indexOf(this.getValue());this.setSelectedIndex(o,!1,!0)},e.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var t=this.getSelectedIndex(),o=t>=0?t:0;this.adapter.focusMenuItemAtIndex(o)}},e.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},e.prototype.handleMenuClosed=function(){this.adapter.removeClass(js.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var t=this.adapter.hasClass(js.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(t){this.setSelectedIndex(t,!0)},e.prototype.handleFocus=function(){this.adapter.addClass(js.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(t){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(t),this.openMenu()}},e.prototype.handleKeydown=function(t){if(!(this.isMenuOpen||!this.adapter.hasClass(js.FOCUSED))){var o=fa(t)===uo.ENTER,l=fa(t)===uo.SPACEBAR,u=fa(t)===uo.ARROW_UP,m=fa(t)===uo.ARROW_DOWN,r=t.ctrlKey||t.metaKey;if(!r&&(!l&&t.key&&t.key.length===1||l&&this.adapter.isTypeaheadInProgress())){var f=l?" ":t.key,_=this.adapter.typeaheadMatchItem(f,this.getSelectedIndex());_>=0&&this.setSelectedIndex(_),t.preventDefault();return}!o&&!l&&!u&&!m||(u&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):m&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),t.preventDefault())}},e.prototype.notchOutline=function(t){if(!!this.adapter.hasOutline()){var o=this.adapter.hasClass(js.FOCUSED);if(t){var l=Of.LABEL_SCALE,u=this.adapter.getLabelWidth()*l;this.adapter.notchOutline(u)}else o||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},e.prototype.setUseDefaultValidation=function(t){this.useDefaultValidation=t},e.prototype.setValid=function(t){this.useDefaultValidation||(this.customValidity=t),this.adapter.setSelectAnchorAttr("aria-invalid",(!t).toString()),t?(this.adapter.removeClass(js.INVALID),this.adapter.removeMenuClass(js.MENU_INVALID)):(this.adapter.addClass(js.INVALID),this.adapter.addMenuClass(js.MENU_INVALID)),this.syncHelperTextValidity(t)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(js.REQUIRED)&&!this.adapter.hasClass(js.DISABLED)?this.getSelectedIndex()!==Of.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(t){t?this.adapter.addClass(js.REQUIRED):this.adapter.removeClass(js.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",t.toString()),this.adapter.setLabelRequired(t)},e.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},e.prototype.init=function(){var t=this.adapter.getAnchorElement();t&&(this.adapter.setMenuAnchorElement(t),this.adapter.setMenuAnchorCorner(Wf.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(js.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(js.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass(js.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var t=this.adapter.hasClass(js.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(t){if(!!this.helperText){this.helperText.setValidity(t);var o=this.helperText.isVisible(),l=this.helperText.getId();o&&l?this.adapter.setSelectAnchorAttr(x2.ARIA_DESCRIBEDBY,l):this.adapter.removeSelectAnchorAttr(x2.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var t=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){t.recentlyClicked=!1},Of.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(ic);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ff={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},Rf={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var K7=function(i){Nl(e,i);function e(t){return i.call(this,hs(hs({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return Rf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Ff},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(Ff.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(t){this.adapter.setContent(t)},e.prototype.setValidation=function(t){t?this.adapter.addClass(Rf.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(Rf.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidationMsgPersistent=function(t){t?this.adapter.addClass(Rf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(Rf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},e.prototype.setValidity=function(t){var o=this.adapter.hasClass(Rf.HELPER_TEXT_VALIDATION_MSG);if(!!o){var l=this.adapter.hasClass(Rf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),u=!t||l;if(u){this.showToScreenReader(),t?this.adapter.removeAttr(Ff.ROLE):this.adapter.setAttr(Ff.ROLE,"alert");return}this.adapter.removeAttr(Ff.ROLE),this.hide()}},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(Ff.ARIA_HIDDEN)},e.prototype.hide=function(){this.adapter.setAttr(Ff.ARIA_HIDDEN,"true")},e}(ic);const{document:J7}=S1;function Q7(i){let e,t,o,l,u,m,r,f;const _=i[31].default,w=xr(_,i,i[30],null);let b=[{class:o=_r({[i[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":i[5],"mdc-menu-surface--open":i[4],"smui-menu-surface--static":i[4],"mdc-menu-surface--fullwidth":i[7],...i[10]})},{style:l=Object.entries(i[11]).map(fb).concat([i[3]]).join(" ")},i[13]],x={};for(let v=0;v<b.length;v+=1)x=en(x,b[v]);return{c(){e=Yi(),t=zt("div"),w&&w.c(),this.h()},l(v){e=Zi(v),t=Nt(v,"DIV",{class:!0,style:!0});var C=Gt(t);w&&w.l(C),C.forEach(Le),this.h()},h(){dr(t,x)},m(v,C){qt(v,e,C),qt(v,t,C),w&&w.m(t,null),i[33](t),m=!0,r||(f=[En(J7.body,"click",i[32],!0),pr(u=Wo.call(null,t,i[1])),pr(i[12].call(null,t)),En(t,"keydown",i[34])],r=!0)},p(v,C){w&&w.p&&(!m||C[0]&1073741824)&&Ar(w,_,v,v[30],m?Sr(_,v[30],C,null):kr(v[30]),null),dr(t,x=Tr(b,[(!m||C[0]&1204&&o!==(o=_r({[v[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":v[5],"mdc-menu-surface--open":v[4],"smui-menu-surface--static":v[4],"mdc-menu-surface--fullwidth":v[7],...v[10]})))&&{class:o},(!m||C[0]&2056&&l!==(l=Object.entries(v[11]).map(fb).concat([v[3]]).join(" ")))&&{style:l},C[0]&8192&&v[13]])),u&&So(u.update)&&C[0]&2&&u.update.call(null,v[1])},i(v){m||(xt(w,v),m=!0)},o(v){Ft(w,v),m=!1},d(v){v&&Le(e),v&&Le(t),w&&w.d(v),i[33](null),r=!1,qo(f)}}}const fb=([i,e])=>`${i}: ${e};`;function $7(i,e,t){const o=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;var r,f,_;const w=No(zo());let{use:b=[]}=e,{class:x=""}=e,{style:v=""}=e,{static:C=!1}=e,{anchor:T=!0}=e,{fixed:S=!1}=e,{open:M=C}=e,{managed:O=!1}=e,{fullWidth:V=!1}=e,{quickOpen:G=!1}=e,{anchorElement:Z=void 0}=e,{anchorCorner:te=void 0}=e,{anchorMargin:J={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:oe=0}=e,{horizontallyCenteredOnViewport:Me=!1}=e,Fe,pe,Ie={},Se={},me;ws("SMUI:list:role","menu"),ws("SMUI:list:item:role","menuitem");const et=Wf;Ds(()=>(t(9,pe=new S3({addClass:Et,removeClass:it,hasClass:nt,hasAnchor:()=>!!Z,notifyClose:()=>{O||t(0,M=C),M||cs(Fe,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{O||t(0,M=C),M||cs(Fe,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{O||t(0,M=!0),M&&cs(Fe,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:gt=>Fe.contains(gt),isRtl:()=>getComputedStyle(Fe).getPropertyValue("direction")==="rtl",setTransformOrigin:gt=>{t(11,Se["transform-origin"]=gt,Se)},isFocused:()=>document.activeElement===Fe,saveFocus:()=>{var gt;me=(gt=document.activeElement)!==null&&gt!==void 0?gt:void 0},restoreFocus:()=>{(!Fe||Fe.contains(document.activeElement))&&me&&document.contains(me)&&"focus"in me&&me.focus()},getInnerDimensions:()=>({width:Fe.offsetWidth,height:Fe.offsetHeight}),getAnchorDimensions:()=>Z?Z.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:gt=>{t(11,Se.left="left"in gt?`${gt.left}px`:"",Se),t(11,Se.right="right"in gt?`${gt.right}px`:"",Se),t(11,Se.top="top"in gt?`${gt.top}px`:"",Se),t(11,Se.bottom="bottom"in gt?`${gt.bottom}px`:"",Se)},setMaxHeight:gt=>{t(11,Se["max-height"]=gt,Se)}})),cs(Fe,"SMUIMenuSurface:mount",{get open(){return M},set open(gt){t(0,M=gt)},closeProgrammatic:we}),pe.init(),()=>{var gt;const Pt=pe.isHoistedElement;pe.destroy(),Pt&&((gt=Fe.parentNode)===null||gt===void 0||gt.removeChild(Fe))})),nh(()=>{var Xe;T&&Fe&&((Xe=Fe.parentElement)===null||Xe===void 0||Xe.classList.remove("mdc-menu-surface--anchor"))});function nt(Xe){return Xe in Ie?Ie[Xe]:ge().classList.contains(Xe)}function Et(Xe){Ie[Xe]||t(10,Ie[Xe]=!0,Ie)}function it(Xe){(!(Xe in Ie)||Ie[Xe])&&t(10,Ie[Xe]=!1,Ie)}function we(Xe){pe.close(Xe),t(0,M=!1)}function ke(){return M}function Oe(Xe){t(0,M=Xe)}function le(Xe,gt){return pe.setAbsolutePosition(Xe,gt)}function Ce(Xe){return pe.setIsHoisted(Xe)}function he(){return pe.isFixed()}function ge(){return Fe}const Be=Xe=>pe&&M&&!O&&pe.handleBodyClick(Xe);function We(Xe){In[Xe?"unshift":"push"](()=>{Fe=Xe,t(8,Fe)})}const st=Xe=>pe&&pe.handleKeydown(Xe);return i.$$set=Xe=>{e=en(en({},e),Po(Xe)),t(13,l=or(e,o)),"use"in Xe&&t(1,b=Xe.use),"class"in Xe&&t(2,x=Xe.class),"style"in Xe&&t(3,v=Xe.style),"static"in Xe&&t(4,C=Xe.static),"anchor"in Xe&&t(15,T=Xe.anchor),"fixed"in Xe&&t(5,S=Xe.fixed),"open"in Xe&&t(0,M=Xe.open),"managed"in Xe&&t(6,O=Xe.managed),"fullWidth"in Xe&&t(7,V=Xe.fullWidth),"quickOpen"in Xe&&t(16,G=Xe.quickOpen),"anchorElement"in Xe&&t(14,Z=Xe.anchorElement),"anchorCorner"in Xe&&t(17,te=Xe.anchorCorner),"anchorMargin"in Xe&&t(18,J=Xe.anchorMargin),"maxHeight"in Xe&&t(19,oe=Xe.maxHeight),"horizontallyCenteredOnViewport"in Xe&&t(20,Me=Xe.horizontallyCenteredOnViewport),"$$scope"in Xe&&t(30,m=Xe.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&939557120&&Fe&&T&&!(!(t(27,r=Fe.parentElement)===null||r===void 0)&&r.classList.contains("mdc-menu-surface--anchor"))&&(t(28,f=Fe.parentElement)===null||f===void 0||f.classList.add("mdc-menu-surface--anchor"),t(14,Z=t(29,_=Fe.parentElement)!==null&&_!==void 0?_:void 0)),i.$$.dirty[0]&513&&pe&&pe.isOpen()!==M&&(M?pe.open():pe.close()),i.$$.dirty[0]&66048&&pe&&pe.setQuickOpen(G),i.$$.dirty[0]&544&&pe&&pe.setFixedPosition(S),i.$$.dirty[0]&524800&&pe&&pe.setMaxHeight(oe),i.$$.dirty[0]&1049088&&pe&&pe.setIsHorizontallyCenteredOnViewport(Me),i.$$.dirty[0]&131584&&pe&&te!=null&&(typeof te=="string"?pe.setAnchorCorner(et[te]):pe.setAnchorCorner(te)),i.$$.dirty[0]&262656&&pe&&pe.setAnchorMargin(J)},[M,b,x,v,C,S,O,V,Fe,pe,Ie,Se,w,l,Z,T,G,te,J,oe,Me,ke,Oe,le,Ce,he,ge,r,f,_,m,u,Be,We,st]}class eL extends vr{constructor(e){super(),br(this,e,$7,Q7,mr,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function tL(i,{addClass:e=o=>i.classList.add(o),removeClass:t=o=>i.classList.remove(o)}={}){return e("mdc-menu-surface--anchor"),{destroy(){t("mdc-menu-surface--anchor")}}}function iL(i){let e;const t=i[17].default,o=xr(t,i,i[22],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4194304)&&Ar(o,t,l,l[22],e?Sr(t,l[22],u,null):kr(l[22]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function nL(i){let e,t,o;const l=[{use:i[5]},{class:_r({[i[1]]:!0,"mdc-menu":!0})},i[9]];function u(r){i[19](r)}let m={$$slots:{default:[iL]},$$scope:{ctx:i}};for(let r=0;r<l.length;r+=1)m=en(m,l[r]);return i[0]!==void 0&&(m.open=i[0]),e=new eL({props:m}),i[18](e),In.push(()=>To(e,"open",u)),e.$on("SMUIMenuSurface:mount",i[7]),e.$on("SMUIList:mount",i[8]),e.$on("SMUIMenuSurface:opened",i[20]),e.$on("keydown",i[6]),e.$on("SMUIList:action",i[21]),{c(){ln(e.$$.fragment)},l(r){pn(e.$$.fragment,r)},m(r,f){un(e,r,f),o=!0},p(r,[f]){const _=f&546?Tr(l,[f&32&&{use:r[5]},f&2&&{class:_r({[r[1]]:!0,"mdc-menu":!0})},f&512&&ko(r[9])]):{};f&4194304&&(_.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,_.open=r[0],Lo(()=>t=!1)),e.$set(_)},i(r){o||(xt(e.$$.fragment,r),o=!0)},o(r){Ft(e.$$.fragment,r),o=!1},d(r){i[18](null),cn(e,r)}}}function rL(i,e,t){let o;const l=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getMenuSurface","getElement"];let u=or(e,l),{$$slots:m={},$$scope:r}=e;const{closest:f}=C1,_=No(zo());let{use:w=[]}=e,{class:b=""}=e,{open:x=!1}=e,v,C,T,S;Ds(()=>(t(3,C=new G7({addClassToElementAtIndex:(me,et)=>{S.addClassForElementIndex(me,et)},removeClassFromElementAtIndex:(me,et)=>{S.removeClassForElementIndex(me,et)},addAttributeToElementAtIndex:(me,et,nt)=>{S.setAttributeForElementIndex(me,et,nt)},removeAttributeFromElementAtIndex:(me,et)=>{S.removeAttributeForElementIndex(me,et)},getAttributeFromElementAtIndex:(me,et)=>S.getAttributeFromElementIndex(me,et),elementContainsClass:(me,et)=>me.classList.contains(et),closeSurface:me=>T.closeProgrammatic(me),getElementIndex:me=>S.getOrderedList().map(et=>et.element).indexOf(me),notifySelected:me=>cs(Me(),"SMUIMenu:selected",{index:me.index,item:S.getOrderedList()[me.index].element},void 0,!0),getMenuItemCount:()=>S.items.length,focusItemAtIndex:me=>S.focusItemAtIndex(me),focusListRoot:()=>"focus"in S.element&&S.element.focus(),isSelectableItemAtIndex:me=>!!f(S.getOrderedList()[me].element,`.${$0.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:me=>{const et=S.getOrderedList(),nt=f(et[me].element,`.${$0.MENU_SELECTION_GROUP}`),Et=nt==null?void 0:nt.querySelector(`.${$0.MENU_SELECTED_LIST_ITEM}`);return Et?et.map(it=>it.element).indexOf(Et):-1}})),cs(Me(),"SMUIMenu:mount",C),C.init(),()=>{C.destroy()}));function M(me){C&&C.handleKeydown(me)}function O(me){T||(T=me.detail)}function V(me){S||t(4,S=me.detail)}function G(){return x}function Z(me){t(0,x=me)}function te(me){C.setDefaultFocusState(me)}function J(){return C.getSelectedIndex()}function oe(){return v}function Me(){return v.getElement()}function Fe(me){In[me?"unshift":"push"](()=>{v=me,t(2,v)})}function pe(me){x=me,t(0,x)}const Ie=()=>C&&C.handleMenuSurfaceOpened(),Se=me=>C&&C.handleItemAction(S.getOrderedList()[me.detail.index].element);return i.$$set=me=>{e=en(en({},e),Po(me)),t(9,u=or(e,l)),"use"in me&&t(10,w=me.use),"class"in me&&t(1,b=me.class),"open"in me&&t(0,x=me.open),"$$scope"in me&&t(22,r=me.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(5,o=[_,...w])},[x,b,v,C,S,o,M,O,V,u,w,G,Z,te,J,oe,Me,m,Fe,pe,Ie,Se,r]}class oL extends vr{constructor(e){super(),br(this,e,rL,nL,mr,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getMenuSurface:15,getElement:16})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getMenuSurface(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}function sL(i){let e;const t=i[37].default,o=xr(t,i,i[43],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[1]&4096)&&Ar(o,t,l,l[43],e?Sr(t,l[43],u,null):kr(l[43]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function aL(i){let e,t,o;const l=[{use:[i[17],...i[0]]},{class:_r({[i[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":i[2],"mdc-deprecated-list--dense":i[3],"mdc-deprecated-list--textual-list":i[4],"mdc-deprecated-list--avatar-list":i[5]||i[18],"mdc-deprecated-list--icon-list":i[6],"mdc-deprecated-list--image-list":i[7],"mdc-deprecated-list--thumbnail-list":i[8],"mdc-deprecated-list--video-list":i[9],"mdc-deprecated-list--two-line":i[10],"smui-list--three-line":i[11]&&!i[10]})},{role:i[15]},i[23]];var u=i[12];function m(r){let f={$$slots:{default:[sL]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[38](e),e.$on("keydown",i[39]),e.$on("focusin",i[40]),e.$on("focusout",i[41]),e.$on("click",i[42]),e.$on("SMUIListItem:mount",i[19]),e.$on("SMUIListItem:unmount",i[20]),e.$on("SMUI:action",i[21])),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,f){const _=f[0]&8818687?Tr(l,[f[0]&131073&&{use:[r[17],...r[0]]},f[0]&266238&&{class:_r({[r[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":r[2],"mdc-deprecated-list--dense":r[3],"mdc-deprecated-list--textual-list":r[4],"mdc-deprecated-list--avatar-list":r[5]||r[18],"mdc-deprecated-list--icon-list":r[6],"mdc-deprecated-list--image-list":r[7],"mdc-deprecated-list--thumbnail-list":r[8],"mdc-deprecated-list--video-list":r[9],"mdc-deprecated-list--two-line":r[10],"smui-list--three-line":r[11]&&!r[10]})},f[0]&32768&&{role:r[15]},f[0]&8388608&&ko(r[23])]):{};if(f[1]&4096&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[12])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[38](e),e.$on("keydown",r[39]),e.$on("focusin",r[40]),e.$on("focusout",r[41]),e.$on("click",r[42]),e.$on("SMUIListItem:mount",r[19]),e.$on("SMUIListItem:unmount",r[20]),e.$on("SMUI:action",r[21]),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[38](null),r&&Le(t),e&&cn(e,r)}}}function lL(i,e,t){const o=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;var r;const{closest:f,matches:_}=C1,w=No(zo());let{use:b=[]}=e,{class:x=""}=e,{nonInteractive:v=!1}=e,{dense:C=!1}=e,{textualList:T=!1}=e,{avatarList:S=!1}=e,{iconList:M=!1}=e,{imageList:O=!1}=e,{thumbnailList:V=!1}=e,{videoList:G=!1}=e,{twoLine:Z=!1}=e,{threeLine:te=!1}=e,{vertical:J=!0}=e,{wrapFocus:oe=(r=Zs("SMUI:list:wrapFocus"))!==null&&r!==void 0?r:!1}=e,{singleSelection:Me=!1}=e,{selectedIndex:Fe=-1}=e,{radioList:pe=!1}=e,{checkList:Ie=!1}=e,{hasTypeahead:Se=!1}=e,me,et,nt=[],Et=Zs("SMUI:list:role"),it=Zs("SMUI:list:nav");const we=new WeakMap;let ke=Zs("SMUI:dialog:selection"),Oe=Zs("SMUI:addLayoutListener"),le,{component:Ce=it?C6:E6}=e;ws("SMUI:list:nonInteractive",v),ws("SMUI:separator:context","list"),Et||(Me?(Et="listbox",ws("SMUI:list:item:role","option")):pe?(Et="radiogroup",ws("SMUI:list:item:role","radio")):Ie?(Et="group",ws("SMUI:list:item:role","checkbox")):(Et="list",ws("SMUI:list:item:role",void 0))),Oe&&(le=Oe(ei)),Ds(()=>{t(13,et=new q7({addClassForElementIndex:gt,focusItemAtIndex:st,getAttributeForElementIndex:(ae,Qe)=>{var _t,Jt;return(Jt=(_t=We()[ae])===null||_t===void 0?void 0:_t.getAttr(Qe))!==null&&Jt!==void 0?Jt:null},getFocusedElementIndex:()=>document.activeElement?We().map(ae=>ae.element).indexOf(document.activeElement):-1,getListItemCount:()=>nt.length,getPrimaryTextAtIndex:vt,hasCheckboxAtIndex:ae=>{var Qe,_t;return(_t=(Qe=We()[ae])===null||Qe===void 0?void 0:Qe.hasCheckbox)!==null&&_t!==void 0?_t:!1},hasRadioAtIndex:ae=>{var Qe,_t;return(_t=(Qe=We()[ae])===null||Qe===void 0?void 0:Qe.hasRadio)!==null&&_t!==void 0?_t:!1},isCheckboxCheckedAtIndex:ae=>{var Qe;const _t=We()[ae];return(Qe=(_t==null?void 0:_t.hasCheckbox)&&_t.checked)!==null&&Qe!==void 0?Qe:!1},isFocusInsideList:()=>me!=null&&Yt()!==document.activeElement&&Yt().contains(document.activeElement),isRootFocused:()=>me!=null&&document.activeElement===Yt(),listItemAtIndexHasClass:Xe,notifyAction:ae=>{t(24,Fe=ae),me!=null&&cs(Yt(),"SMUIList:action",{index:ae},void 0,!0)},removeClassForElementIndex:Pt,setAttributeForElementIndex:ri,setCheckedCheckboxOrRadioAtIndex:(ae,Qe)=>{We()[ae].checked=Qe},setTabIndexForListItemChildren:(ae,Qe)=>{const _t=We()[ae],Jt="button:not(:disabled), a";Array.prototype.forEach.call(_t.element.querySelectorAll(Jt),di=>{di.setAttribute("tabindex",Qe)})}}));const Q={get element(){return Yt()},get items(){return nt},get typeaheadInProgress(){return et.isTypeaheadInProgress()},typeaheadMatchItem(ae,Qe){return et.typeaheadMatchItem(ae,Qe,!0)},getOrderedList:We,focusItemAtIndex:st,addClassForElementIndex:gt,removeClassForElementIndex:Pt,setAttributeForElementIndex:ri,removeAttributeForElementIndex:ut,getAttributeFromElementIndex:bt,getPrimaryTextAtIndex:vt};return cs(Yt(),"SMUIList:mount",Q),et.init(),()=>{et.destroy()}}),nh(()=>{le&&le()});function he(Q){nt.push(Q.detail),we.set(Q.detail.element,Q.detail),Me&&Q.detail.selected&&t(24,Fe=Ke(Q.detail.element)),Q.stopPropagation()}function ge(Q){var ae;const Qe=(ae=Q.detail&&nt.indexOf(Q.detail))!==null&&ae!==void 0?ae:-1;Qe!==-1&&(nt.splice(Qe,1),nt=nt,we.delete(Q.detail.element)),Q.stopPropagation()}function Be(Q){if(pe||Ie){const ae=Ke(Q.target);if(ae!==-1){const Qe=We()[ae];Qe&&(pe&&!Qe.checked||Ie)&&(Qe.checked=!Qe.checked,Qe.activateRipple(),window.requestAnimationFrame(()=>{Qe.deactivateRipple()}))}}}function We(){return me==null?[]:[...Yt().children].map(Q=>we.get(Q)).filter(Q=>Q&&Q._smui_list_item_accessor)}function st(Q){const ae=We()[Q];ae&&"focus"in ae.element&&ae.element.focus()}function Xe(Q,ae){var Qe;const _t=We()[Q];return(Qe=_t&&_t.hasClass(ae))!==null&&Qe!==void 0?Qe:!1}function gt(Q,ae){const Qe=We()[Q];Qe&&Qe.addClass(ae)}function Pt(Q,ae){const Qe=We()[Q];Qe&&Qe.removeClass(ae)}function ri(Q,ae,Qe){const _t=We()[Q];_t&&_t.addAttr(ae,Qe)}function ut(Q,ae){const Qe=We()[Q];Qe&&Qe.removeAttr(ae)}function bt(Q,ae){const Qe=We()[Q];return Qe?Qe.getAttr(ae):null}function vt(Q){var ae;const Qe=We()[Q];return(ae=Qe&&Qe.getPrimaryText())!==null&&ae!==void 0?ae:""}function Ke(Q){const ae=f(Q,".mdc-deprecated-list-item, .mdc-deprecated-list");return ae&&_(ae,".mdc-deprecated-list-item")?We().map(Qe=>Qe==null?void 0:Qe.element).indexOf(ae):-1}function ei(){return et.layout()}function li(Q,ae){return et.setEnabled(Q,ae)}function $t(){return et.isTypeaheadInProgress()}function Si(){return et.getSelectedIndex()}function Ti(){return et.getFocusedItemIndex()}function Yt(){return me.getElement()}function mi(Q){In[Q?"unshift":"push"](()=>{me=Q,t(14,me)})}const Wi=Q=>et&&et.handleKeydown(Q,Q.target.classList.contains("mdc-deprecated-list-item"),Ke(Q.target)),Ci=Q=>et&&et.handleFocusIn(Ke(Q.target)),ti=Q=>et&&et.handleFocusOut(Ke(Q.target)),Pe=Q=>et&&et.handleClick(Ke(Q.target),!_(Q.target,'input[type="checkbox"], input[type="radio"]'));return i.$$set=Q=>{e=en(en({},e),Po(Q)),t(23,l=or(e,o)),"use"in Q&&t(0,b=Q.use),"class"in Q&&t(1,x=Q.class),"nonInteractive"in Q&&t(2,v=Q.nonInteractive),"dense"in Q&&t(3,C=Q.dense),"textualList"in Q&&t(4,T=Q.textualList),"avatarList"in Q&&t(5,S=Q.avatarList),"iconList"in Q&&t(6,M=Q.iconList),"imageList"in Q&&t(7,O=Q.imageList),"thumbnailList"in Q&&t(8,V=Q.thumbnailList),"videoList"in Q&&t(9,G=Q.videoList),"twoLine"in Q&&t(10,Z=Q.twoLine),"threeLine"in Q&&t(11,te=Q.threeLine),"vertical"in Q&&t(25,J=Q.vertical),"wrapFocus"in Q&&t(26,oe=Q.wrapFocus),"singleSelection"in Q&&t(27,Me=Q.singleSelection),"selectedIndex"in Q&&t(24,Fe=Q.selectedIndex),"radioList"in Q&&t(28,pe=Q.radioList),"checkList"in Q&&t(29,Ie=Q.checkList),"hasTypeahead"in Q&&t(30,Se=Q.hasTypeahead),"component"in Q&&t(12,Ce=Q.component),"$$scope"in Q&&t(43,m=Q.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33562624&&et&&et.setVerticalOrientation(J),i.$$.dirty[0]&67117056&&et&&et.setWrapFocus(oe),i.$$.dirty[0]&1073750016&&et&&et.setHasTypeahead(Se),i.$$.dirty[0]&134225920&&et&&et.setSingleSelection(Me),i.$$.dirty[0]&151003136&&et&&Me&&Si()!==Fe&&et.setSelectedIndex(Fe)},[b,x,v,C,T,S,M,O,V,G,Z,te,Ce,et,me,Et,_,w,ke,he,ge,Be,Ke,l,Fe,J,oe,Me,pe,Ie,Se,ei,li,$t,Si,Ti,Yt,u,mi,Wi,Ci,ti,Pe,m]}class uL extends vr{constructor(e){super(),br(this,e,lL,aL,mr,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function db(i){let e;return{c(){e=zt("span"),this.h()},l(t){e=Nt(t,"SPAN",{class:!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","mdc-deprecated-list-item__ripple")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function cL(i){let e,t,o=i[7]&&db();const l=i[32].default,u=xr(l,i,i[35],null);return{c(){o&&o.c(),e=gn(),u&&u.c()},l(m){o&&o.l(m),e=gn(),u&&u.l(m)},m(m,r){o&&o.m(m,r),qt(m,e,r),u&&u.m(m,r),t=!0},p(m,r){m[7]?o||(o=db(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),u&&u.p&&(!t||r[1]&16)&&Ar(u,l,m,m[35],t?Sr(l,m[35],r,null):kr(m[35]),null)},i(m){t||(xt(u,m),t=!0)},o(m){Ft(u,m),t=!1},d(m){o&&o.d(m),m&&Le(e),u&&u.d(m)}}}function hL(i){let e,t,o;const l=[{use:[...i[6]?[]:[[Yf,{ripple:!i[14],unbounded:!1,color:(i[1]||i[0])&&i[5]==null?"primary":i[5],disabled:i[9],addClass:i[22],removeClass:i[23],addStyle:i[24]}]],i[20],...i[2]]},{class:_r({[i[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":i[1],"mdc-deprecated-list-item--selected":i[0],"mdc-deprecated-list-item--disabled":i[9],"mdc-menu-item--selected":!i[21]&&i[8]==="menuitem"&&i[0],"smui-menu-item--non-interactive":i[6],...i[16]})},{style:Object.entries(i[17]).map(pb).concat([i[4]]).join(" ")},i[21]&&i[1]?{"aria-current":"page"}:{},i[21]?{}:{role:i[8]},!i[21]&&i[8]==="option"?{"aria-selected":i[0]?"true":"false"}:{},!i[21]&&(i[8]==="radio"||i[8]==="checkbox")?{"aria-checked":i[14]&&i[14].checked?"true":"false"}:{},i[21]?{}:{"aria-disabled":i[9]?"true":"false"},{"data-menu-item-skip-restore-focus":i[10]||void 0},{tabindex:i[19]},{href:i[11]},i[18],i[27]];var u=i[12];function m(r){let f={$$slots:{default:[cL]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=en(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[33](e),e.$on("click",i[13]),e.$on("keydown",i[25]),e.$on("SMUIGenericInput:mount",i[26]),e.$on("SMUIGenericInput:unmount",i[34])),{c(){e&&ln(e.$$.fragment),t=gn()},l(r){e&&pn(e.$$.fragment,r),t=gn()},m(r,f){e&&un(e,r,f),qt(r,t,f),o=!0},p(r,f){const _=f[0]&167726975?Tr(l,[f[0]&30425703&&{use:[...r[6]?[]:[[Yf,{ripple:!r[14],unbounded:!1,color:(r[1]||r[0])&&r[5]==null?"primary":r[5],disabled:r[9],addClass:r[22],removeClass:r[23],addStyle:r[24]}]],r[20],...r[2]]},f[0]&2163531&&{class:_r({[r[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":r[1],"mdc-deprecated-list-item--selected":r[0],"mdc-deprecated-list-item--disabled":r[9],"mdc-menu-item--selected":!r[21]&&r[8]==="menuitem"&&r[0],"smui-menu-item--non-interactive":r[6],...r[16]})},f[0]&131088&&{style:Object.entries(r[17]).map(pb).concat([r[4]]).join(" ")},f[0]&2097154&&ko(r[21]&&r[1]?{"aria-current":"page"}:{}),f[0]&2097408&&ko(r[21]?{}:{role:r[8]}),f[0]&2097409&&ko(!r[21]&&r[8]==="option"?{"aria-selected":r[0]?"true":"false"}:{}),f[0]&2113792&&ko(!r[21]&&(r[8]==="radio"||r[8]==="checkbox")?{"aria-checked":r[14]&&r[14].checked?"true":"false"}:{}),f[0]&2097664&&ko(r[21]?{}:{"aria-disabled":r[9]?"true":"false"}),f[0]&1024&&{"data-menu-item-skip-restore-focus":r[10]||void 0},f[0]&524288&&{tabindex:r[19]},f[0]&2048&&{href:r[11]},f[0]&262144&&ko(r[18]),f[0]&134217728&&ko(r[27])]):{};if(f[0]&128|f[1]&16&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[12])){if(e){Rr();const w=e;Ft(w.$$.fragment,1,0,()=>{cn(w,1)}),Fr()}u?(e=ou(u,m(r)),r[33](e),e.$on("click",r[13]),e.$on("keydown",r[25]),e.$on("SMUIGenericInput:mount",r[26]),e.$on("SMUIGenericInput:unmount",r[34]),ln(e.$$.fragment),xt(e.$$.fragment,1),un(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&xt(e.$$.fragment,r),o=!0)},o(r){e&&Ft(e.$$.fragment,r),o=!1},d(r){i[33](null),r&&Le(t),e&&cn(e,r)}}}let fL=0;const pb=([i,e])=>`${i}: ${e};`;function dL(i,e,t){let o;const l=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let u=or(e,l),{$$slots:m={},$$scope:r}=e;var f;const _=No(zo());let w=()=>{};function b(ut){return ut===w}let{use:x=[]}=e,{class:v=""}=e,{style:C=""}=e,{color:T=void 0}=e,{nonInteractive:S=(f=Zs("SMUI:list:nonInteractive"))!==null&&f!==void 0?f:!1}=e;ws("SMUI:list:nonInteractive",void 0);let{ripple:M=!S}=e,{activated:O=!1}=e,{role:V=Zs("SMUI:list:item:role")}=e;ws("SMUI:list:item:role",void 0);let{selected:G=!1}=e,{disabled:Z=!1}=e,{skipRestoreFocus:te=!1}=e,{tabindex:J=w}=e,{inputId:oe="SMUI-form-field-list-"+fL++}=e,{href:Me=void 0}=e,Fe,pe={},Ie={},Se={},me,et,nt=Zs("SMUI:list:item:nav"),{component:Et=nt?Me?vw:pf:k6}=e;ws("SMUI:generic:input:props",{id:oe}),ws("SMUI:separator:context",void 0),Ds(()=>{if(!G&&!S){let bt=!0,vt=Fe;for(;vt.previousSibling;)if(vt=vt.previousSibling,vt.nodeType===1&&vt.classList.contains("mdc-deprecated-list-item")&&!vt.classList.contains("mdc-deprecated-list-item--disabled")){bt=!1;break}bt&&(et=window.requestAnimationFrame(ge))}const ut={_smui_list_item_accessor:!0,get element(){return gt()},get selected(){return G},set selected(bt){t(0,G=bt)},hasClass:it,addClass:we,removeClass:ke,getAttr:le,addAttr:Ce,removeAttr:he,getPrimaryText:Xe,get checked(){var bt;return(bt=me&&me.checked)!==null&&bt!==void 0?bt:!1},set checked(bt){me&&t(14,me.checked=!!bt,me)},get hasCheckbox(){return!!(me&&"_smui_checkbox_accessor"in me)},get hasRadio(){return!!(me&&"_smui_radio_accessor"in me)},activateRipple(){me&&me.activateRipple()},deactivateRipple(){me&&me.deactivateRipple()},getValue(){return u.value},action:st,get tabindex(){return o},set tabindex(bt){t(28,J=bt)},get disabled(){return Z},get activated(){return O},set activated(bt){t(1,O=bt)}};return cs(gt(),"SMUIListItem:mount",ut),()=>{cs(gt(),"SMUIListItem:unmount",ut)}}),nh(()=>{et&&window.cancelAnimationFrame(et)});function it(ut){return ut in pe?pe[ut]:gt().classList.contains(ut)}function we(ut){pe[ut]||t(16,pe[ut]=!0,pe)}function ke(ut){(!(ut in pe)||pe[ut])&&t(16,pe[ut]=!1,pe)}function Oe(ut,bt){Ie[ut]!=bt&&(bt===""||bt==null?(delete Ie[ut],t(17,Ie)):t(17,Ie[ut]=bt,Ie))}function le(ut){var bt;return ut in Se?(bt=Se[ut])!==null&&bt!==void 0?bt:null:gt().getAttribute(ut)}function Ce(ut,bt){Se[ut]!==bt&&t(18,Se[ut]=bt,Se)}function he(ut){(!(ut in Se)||Se[ut]!=null)&&t(18,Se[ut]=void 0,Se)}function ge(){let ut=!0,bt=Fe.getElement();for(;bt.nextElementSibling;)if(bt=bt.nextElementSibling,bt.nodeType===1&&bt.classList.contains("mdc-deprecated-list-item")){const vt=bt.attributes.getNamedItem("tabindex");if(vt&&vt.value==="0"){ut=!1;break}}ut&&t(19,o=0)}function Be(ut){const bt=ut.key==="Enter",vt=ut.key==="Space";(bt||vt)&&st(ut)}function We(ut){("_smui_checkbox_accessor"in ut.detail||"_smui_radio_accessor"in ut.detail)&&t(14,me=ut.detail)}function st(ut){Z||cs(gt(),"SMUI:action",ut)}function Xe(){var ut,bt,vt;const Ke=gt(),ei=Ke.querySelector(".mdc-deprecated-list-item__primary-text");if(ei)return(ut=ei.textContent)!==null&&ut!==void 0?ut:"";const li=Ke.querySelector(".mdc-deprecated-list-item__text");return li?(bt=li.textContent)!==null&&bt!==void 0?bt:"":(vt=Ke.textContent)!==null&&vt!==void 0?vt:""}function gt(){return Fe.getElement()}function Pt(ut){In[ut?"unshift":"push"](()=>{Fe=ut,t(15,Fe)})}const ri=()=>t(14,me=void 0);return i.$$set=ut=>{e=en(en({},e),Po(ut)),t(27,u=or(e,l)),"use"in ut&&t(2,x=ut.use),"class"in ut&&t(3,v=ut.class),"style"in ut&&t(4,C=ut.style),"color"in ut&&t(5,T=ut.color),"nonInteractive"in ut&&t(6,S=ut.nonInteractive),"ripple"in ut&&t(7,M=ut.ripple),"activated"in ut&&t(1,O=ut.activated),"role"in ut&&t(8,V=ut.role),"selected"in ut&&t(0,G=ut.selected),"disabled"in ut&&t(9,Z=ut.disabled),"skipRestoreFocus"in ut&&t(10,te=ut.skipRestoreFocus),"tabindex"in ut&&t(28,J=ut.tabindex),"inputId"in ut&&t(29,oe=ut.inputId),"href"in ut&&t(11,Me=ut.href),"component"in ut&&t(12,Et=ut.component),"$$scope"in ut&&t(35,r=ut.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&268452417&&t(19,o=b(J)?!S&&!Z&&(G||me&&me.checked)?0:-1:J)},[G,O,x,v,C,T,S,M,V,Z,te,Me,Et,st,me,Fe,pe,Ie,Se,o,_,nt,we,ke,Oe,Be,We,u,J,oe,Xe,gt,m,Pt,ri,r]}class pL extends vr{constructor(e){super(),br(this,e,dL,hL,mr,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}Mu({class:"mdc-deprecated-list-item__text",component:pf});Mu({class:"mdc-deprecated-list-item__primary-text",component:pf});Mu({class:"mdc-deprecated-list-item__secondary-text",component:pf});function mL(i){let e,t,o,l,u,m;const r=i[8].default,f=xr(r,i,i[7],null);let _=[{class:t=_r({[i[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":i[4]})},i[5]],w={};for(let b=0;b<_.length;b+=1)w=en(w,_[b]);return{c(){e=zt("span"),f&&f.c(),this.h()},l(b){e=Nt(b,"SPAN",{class:!0});var x=Gt(e);f&&f.l(x),x.forEach(Le),this.h()},h(){dr(e,w)},m(b,x){qt(b,e,x),f&&f.m(e,null),i[9](e),l=!0,u||(m=[pr(o=Wo.call(null,e,i[0])),pr(i[3].call(null,e))],u=!0)},p(b,[x]){f&&f.p&&(!l||x&128)&&Ar(f,r,b,b[7],l?Sr(r,b[7],x,null):kr(b[7]),null),dr(e,w=Tr(_,[(!l||x&2&&t!==(t=_r({[b[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":b[4]})))&&{class:t},x&32&&b[5]])),o&&So(o.update)&&x&1&&o.update.call(null,b[0])},i(b){l||(xt(f,b),l=!0)},o(b){Ft(f,b),l=!1},d(b){b&&Le(e),f&&f.d(b),i[9](null),u=!1,qo(m)}}}function gL(i,e,t){const o=["use","class","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let{use:f=[]}=e,{class:_=""}=e,w,b=Zs("SMUI:list:graphic:menu-selection-group");function x(){return w}function v(C){In[C?"unshift":"push"](()=>{w=C,t(2,w)})}return i.$$set=C=>{e=en(en({},e),Po(C)),t(5,l=or(e,o)),"use"in C&&t(0,f=C.use),"class"in C&&t(1,_=C.class),"$$scope"in C&&t(7,m=C.$$scope)},[f,_,w,r,b,l,x,m,u,v]}class yL extends vr{constructor(e){super(),br(this,e,gL,mL,mr,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Mu({class:"mdc-deprecated-list-item__meta",component:pf});Mu({class:"mdc-deprecated-list-group",component:E1});Mu({class:"mdc-deprecated-list-group__subheader",component:A6});const _L=pL,vL=yL;Mu({class:"mdc-menu__selection-group-icon",component:vL});function bL(i){let e,t,o,l,u,m,r,f;const _=i[22].default,w=xr(_,i,i[21],null);let b=[{class:t=_r({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:o=Object.entries(i[9]).map(gb).concat([i[4]]).join(" ")},{for:l=i[5]||(i[11]?i[11].id:void 0)},i[12]],x={};for(let v=0;v<b.length;v+=1)x=en(x,b[v]);return{c(){e=zt("label"),w&&w.c(),this.h()},l(v){e=Nt(v,"LABEL",{class:!0,style:!0,for:!0});var C=Gt(e);w&&w.l(C),C.forEach(Le),this.h()},h(){dr(e,x)},m(v,C){qt(v,e,C),w&&w.m(e,null),i[24](e),m=!0,r||(f=[pr(u=Wo.call(null,e,i[2])),pr(i[10].call(null,e))],r=!0)},p(v,C){w&&w.p&&(!m||C&2097152)&&Ar(w,_,v,v[21],m?Sr(_,v[21],C,null):kr(v[21]),null),dr(e,x=Tr(b,[(!m||C&267&&t!==(t=_r({[v[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":v[0],"mdc-floating-label--required":v[1],...v[8]})))&&{class:t},(!m||C&528&&o!==(o=Object.entries(v[9]).map(gb).concat([v[4]]).join(" ")))&&{style:o},(!m||C&32&&l!==(l=v[5]||(v[11]?v[11].id:void 0)))&&{for:l},C&4096&&v[12]])),u&&So(u.update)&&C&4&&u.update.call(null,v[2])},i(v){m||(xt(w,v),m=!0)},o(v){Ft(w,v),m=!1},d(v){v&&Le(e),w&&w.d(v),i[24](null),r=!1,qo(f)}}}function wL(i){let e,t,o,l,u,m,r;const f=i[22].default,_=xr(f,i,i[21],null);let w=[{class:t=_r({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:o=Object.entries(i[9]).map(mb).concat([i[4]]).join(" ")},i[12]],b={};for(let x=0;x<w.length;x+=1)b=en(b,w[x]);return{c(){e=zt("span"),_&&_.c(),this.h()},l(x){e=Nt(x,"SPAN",{class:!0,style:!0});var v=Gt(e);_&&_.l(v),v.forEach(Le),this.h()},h(){dr(e,b)},m(x,v){qt(x,e,v),_&&_.m(e,null),i[23](e),u=!0,m||(r=[pr(l=Wo.call(null,e,i[2])),pr(i[10].call(null,e))],m=!0)},p(x,v){_&&_.p&&(!u||v&2097152)&&Ar(_,f,x,x[21],u?Sr(f,x[21],v,null):kr(x[21]),null),dr(e,b=Tr(w,[(!u||v&267&&t!==(t=_r({[x[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":x[0],"mdc-floating-label--required":x[1],...x[8]})))&&{class:t},(!u||v&528&&o!==(o=Object.entries(x[9]).map(mb).concat([x[4]]).join(" ")))&&{style:o},v&4096&&x[12]])),l&&So(l.update)&&v&4&&l.update.call(null,x[2])},i(x){u||(xt(_,x),u=!0)},o(x){Ft(_,x),u=!1},d(x){x&&Le(e),_&&_.d(x),i[23](null),m=!1,qo(r)}}}function xL(i){let e,t,o,l;const u=[wL,bL],m=[];function r(f,_){return f[6]?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(f){t.l(f),o=gn()},m(f,_){m[e].m(f,_),qt(f,o,_),l=!0},p(f,[_]){let w=e;e=r(f),e===w?m[e].p(f,_):(Rr(),Ft(m[w],1,1,()=>{m[w]=null}),Fr(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),xt(t,1),t.m(o.parentNode,o))},i(f){l||(xt(t),l=!0)},o(f){Ft(t),l=!1},d(f){m[e].d(f),f&&Le(o)}}}const mb=([i,e])=>`${i}: ${e};`,gb=([i,e])=>`${i}: ${e};`;function AL(i,e,t){const o=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;var r;const f=No(zo());let{use:_=[]}=e,{class:w=""}=e,{style:b=""}=e,{for:x=void 0}=e,{floatAbove:v=!1}=e,{required:C=!1}=e,{wrapped:T=!1}=e,S,M,O={},V={},G=(r=Zs("SMUI:generic:input:props"))!==null&&r!==void 0?r:{},Z=v,te=C;Ds(()=>{t(18,M=new D7({addClass:J,removeClass:oe,getWidth:()=>{var we,ke;const Oe=et(),le=Oe.cloneNode(!0);(we=Oe.parentNode)===null||we===void 0||we.appendChild(le),le.classList.add("smui-floating-label--remove-transition"),le.classList.add("smui-floating-label--force-size"),le.classList.remove("mdc-floating-label--float-above");const Ce=le.scrollWidth;return(ke=Oe.parentNode)===null||ke===void 0||ke.removeChild(le),Ce},registerInteractionHandler:(we,ke)=>et().addEventListener(we,ke),deregisterInteractionHandler:(we,ke)=>et().removeEventListener(we,ke)}));const it={get element(){return et()},addStyle:Me,removeStyle:Fe};return cs(S,"SMUIFloatingLabel:mount",it),M.init(),()=>{cs(S,"SMUIFloatingLabel:unmount",it),M.destroy()}});function J(it){O[it]||t(8,O[it]=!0,O)}function oe(it){(!(it in O)||O[it])&&t(8,O[it]=!1,O)}function Me(it,we){V[it]!=we&&(we===""||we==null?(delete V[it],t(9,V)):t(9,V[it]=we,V))}function Fe(it){it in V&&(delete V[it],t(9,V))}function pe(it){M.shake(it)}function Ie(it){t(0,v=it)}function Se(it){t(1,C=it)}function me(){return M.getWidth()}function et(){return S}function nt(it){In[it?"unshift":"push"](()=>{S=it,t(7,S)})}function Et(it){In[it?"unshift":"push"](()=>{S=it,t(7,S)})}return i.$$set=it=>{e=en(en({},e),Po(it)),t(12,l=or(e,o)),"use"in it&&t(2,_=it.use),"class"in it&&t(3,w=it.class),"style"in it&&t(4,b=it.style),"for"in it&&t(5,x=it.for),"floatAbove"in it&&t(0,v=it.floatAbove),"required"in it&&t(1,C=it.required),"wrapped"in it&&t(6,T=it.wrapped),"$$scope"in it&&t(21,m=it.$$scope)},i.$$.update=()=>{i.$$.dirty&786433&&M&&Z!==v&&(t(19,Z=v),M.float(v)),i.$$.dirty&1310722&&M&&te!==C&&(t(20,te=C),M.setRequired(C))},[v,C,_,w,b,x,T,S,O,V,f,G,l,pe,Ie,Se,me,et,M,Z,te,m,u,nt,Et]}class Y1 extends vr{constructor(e){super(),br(this,e,AL,xL,mr,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function kL(i){let e,t,o,l,u,m,r=[{class:t=_r({[i[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":i[3],...i[5]})},{style:o=Object.entries(i[6]).map(yb).concat([i[2]]).join(" ")},i[8]],f={};for(let _=0;_<r.length;_+=1)f=en(f,r[_]);return{c(){e=zt("div"),this.h()},l(_){e=Nt(_,"DIV",{class:!0,style:!0}),Gt(e).forEach(Le),this.h()},h(){dr(e,f)},m(_,w){qt(_,e,w),i[13](e),u||(m=[pr(l=Wo.call(null,e,i[0])),pr(i[7].call(null,e))],u=!0)},p(_,[w]){dr(e,f=Tr(r,[w&42&&t!==(t=_r({[_[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":_[3],..._[5]}))&&{class:t},w&68&&o!==(o=Object.entries(_[6]).map(yb).concat([_[2]]).join(" "))&&{style:o},w&256&&_[8]])),l&&So(l.update)&&w&1&&l.update.call(null,_[0])},i:eo,o:eo,d(_){_&&Le(e),i[13](null),u=!1,qo(m)}}}const yb=([i,e])=>`${i}: ${e};`;function SL(i,e,t){const o=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let l=or(e,o);const u=No(zo());let{use:m=[]}=e,{class:r=""}=e,{style:f=""}=e,{active:_=!1}=e,w,b,x={},v={};Ds(()=>(b=new O7({addClass:T,removeClass:S,hasClass:C,setStyle:M,registerEventHandler:(J,oe)=>Z().addEventListener(J,oe),deregisterEventHandler:(J,oe)=>Z().removeEventListener(J,oe)}),b.init(),()=>{b.destroy()}));function C(J){return J in x?x[J]:Z().classList.contains(J)}function T(J){x[J]||t(5,x[J]=!0,x)}function S(J){(!(J in x)||x[J])&&t(5,x[J]=!1,x)}function M(J,oe){v[J]!=oe&&(oe===""||oe==null?(delete v[J],t(6,v)):t(6,v[J]=oe,v))}function O(){b.activate()}function V(){b.deactivate()}function G(J){b.setRippleCenter(J)}function Z(){return w}function te(J){In[J?"unshift":"push"](()=>{w=J,t(4,w)})}return i.$$set=J=>{e=en(en({},e),Po(J)),t(8,l=or(e,o)),"use"in J&&t(0,m=J.use),"class"in J&&t(1,r=J.class),"style"in J&&t(2,f=J.style),"active"in J&&t(3,_=J.active)},[m,r,f,_,w,x,v,u,l,O,V,G,Z,te]}class C3 extends vr{constructor(e){super(),br(this,e,SL,kL,mr,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function _b(i){let e,t,o;const l=i[14].default,u=xr(l,i,i[13],null);return{c(){e=zt("div"),u&&u.c(),this.h()},l(m){e=Nt(m,"DIV",{class:!0,style:!0});var r=Gt(e);u&&u.l(r),r.forEach(Le),this.h()},h(){Ht(e,"class","mdc-notched-outline__notch"),Ht(e,"style",t=Object.entries(i[7]).map(vb).join(" "))},m(m,r){qt(m,e,r),u&&u.m(e,null),o=!0},p(m,r){u&&u.p&&(!o||r&8192)&&Ar(u,l,m,m[13],o?Sr(l,m[13],r,null):kr(m[13]),null),(!o||r&128&&t!==(t=Object.entries(m[7]).map(vb).join(" ")))&&Ht(e,"style",t)},i(m){o||(xt(u,m),o=!0)},o(m){Ft(u,m),o=!1},d(m){m&&Le(e),u&&u.d(m)}}}function CL(i){let e,t,o,l,u,m,r,f,_,w,b=!i[3]&&_b(i),x=[{class:m=_r({[i[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":i[2],"mdc-notched-outline--no-label":i[3],...i[6]})},i[9]],v={};for(let C=0;C<x.length;C+=1)v=en(v,x[C]);return{c(){e=zt("div"),t=zt("div"),o=Yi(),b&&b.c(),l=Yi(),u=zt("div"),this.h()},l(C){e=Nt(C,"DIV",{class:!0});var T=Gt(e);t=Nt(T,"DIV",{class:!0}),Gt(t).forEach(Le),o=Zi(T),b&&b.l(T),l=Zi(T),u=Nt(T,"DIV",{class:!0}),Gt(u).forEach(Le),T.forEach(Le),this.h()},h(){Ht(t,"class","mdc-notched-outline__leading"),Ht(u,"class","mdc-notched-outline__trailing"),dr(e,v)},m(C,T){qt(C,e,T),Dt(e,t),Dt(e,o),b&&b.m(e,null),Dt(e,l),Dt(e,u),i[15](e),f=!0,_||(w=[pr(r=Wo.call(null,e,i[0])),pr(i[8].call(null,e)),En(e,"SMUIFloatingLabel:mount",i[16]),En(e,"SMUIFloatingLabel:unmount",i[17])],_=!0)},p(C,[T]){C[3]?b&&(Rr(),Ft(b,1,1,()=>{b=null}),Fr()):b?(b.p(C,T),T&8&&xt(b,1)):(b=_b(C),b.c(),xt(b,1),b.m(e,l)),dr(e,v=Tr(x,[(!f||T&78&&m!==(m=_r({[C[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":C[2],"mdc-notched-outline--no-label":C[3],...C[6]})))&&{class:m},T&512&&C[9]])),r&&So(r.update)&&T&1&&r.update.call(null,C[0])},i(C){f||(xt(b),f=!0)},o(C){Ft(b),f=!1},d(C){C&&Le(e),b&&b.d(),i[15](null),_=!1,qo(w)}}}const vb=([i,e])=>`${i}: ${e};`;function EL(i,e,t){const o=["use","class","notched","noLabel","notch","closeNotch","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let{use:f=[]}=e,{class:_=""}=e,{notched:w=!1}=e,{noLabel:b=!1}=e,x,v,C,T={},S={};Ds(()=>(v=new Y7({addClass:M,removeClass:O,setNotchWidthProperty:pe=>V("width",pe+"px"),removeNotchWidthProperty:()=>G("width")}),v.init(),()=>{v.destroy()}));function M(pe){T[pe]||t(6,T[pe]=!0,T)}function O(pe){(!(pe in T)||T[pe])&&t(6,T[pe]=!1,T)}function V(pe,Ie){S[pe]!=Ie&&(Ie===""||Ie==null?(delete S[pe],t(7,S)):t(7,S[pe]=Ie,S))}function G(pe){pe in S&&(delete S[pe],t(7,S))}function Z(pe){v.notch(pe)}function te(){v.closeNotch()}function J(){return x}function oe(pe){In[pe?"unshift":"push"](()=>{x=pe,t(5,x)})}const Me=pe=>t(4,C=pe.detail),Fe=()=>t(4,C=void 0);return i.$$set=pe=>{e=en(en({},e),Po(pe)),t(9,l=or(e,o)),"use"in pe&&t(0,f=pe.use),"class"in pe&&t(1,_=pe.class),"notched"in pe&&t(2,w=pe.notched),"noLabel"in pe&&t(3,b=pe.noLabel),"$$scope"in pe&&t(13,m=pe.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&(C?(C.addStyle("transition-duration","0s"),M("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{C&&C.removeStyle("transition-duration")})):O("mdc-notched-outline--upgraded"))},[f,_,w,b,C,x,T,S,r,l,Z,te,J,m,u,oe,Me,Fe]}class E3 extends vr{constructor(e){super(),br(this,e,EL,CL,mr,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function IL(i){let e;return{c(){e=Xn(i[8])},l(t){e=Yn(t,i[8])},m(t,o){qt(t,e,o)},p(t,o){o&256&&Jo(e,t[8])},i:eo,o:eo,d(t){t&&Le(e)}}}function TL(i){let e;const t=i[13].default,o=xr(t,i,i[12],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4096)&&Ar(o,t,l,l[12],e?Sr(t,l[12],u,null):kr(l[12]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function LL(i){let e,t,o,l,u,m,r,f,_;const w=[TL,IL],b=[];function x(T,S){return T[8]==null?0:1}t=x(i),o=b[t]=w[t](i);let v=[{class:l=_r({[i[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":i[4],"mdc-select-helper-text--validation-msg-persistent":i[3],...i[6]})},{"aria-hidden":u=i[3]?void 0:"true"},{id:i[2]},i[7],i[10]],C={};for(let T=0;T<v.length;T+=1)C=en(C,v[T]);return{c(){e=zt("div"),o.c(),this.h()},l(T){e=Nt(T,"DIV",{class:!0,"aria-hidden":!0,id:!0});var S=Gt(e);o.l(S),S.forEach(Le),this.h()},h(){dr(e,C)},m(T,S){qt(T,e,S),b[t].m(e,null),i[14](e),r=!0,f||(_=[pr(m=Wo.call(null,e,i[0])),pr(i[9].call(null,e))],f=!0)},p(T,[S]){let M=t;t=x(T),t===M?b[t].p(T,S):(Rr(),Ft(b[M],1,1,()=>{b[M]=null}),Fr(),o=b[t],o?o.p(T,S):(o=b[t]=w[t](T),o.c()),xt(o,1),o.m(e,null)),dr(e,C=Tr(v,[(!r||S&90&&l!==(l=_r({[T[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":T[4],"mdc-select-helper-text--validation-msg-persistent":T[3],...T[6]})))&&{class:l},(!r||S&8&&u!==(u=T[3]?void 0:"true"))&&{"aria-hidden":u},(!r||S&4)&&{id:T[2]},S&128&&T[7],S&1024&&T[10]])),m&&So(m.update)&&S&1&&m.update.call(null,T[0])},i(T){r||(xt(o),r=!0)},o(T){Ft(o),r=!1},d(T){T&&Le(e),b[t].d(),i[14](null),f=!1,qo(_)}}}let PL=0;function ML(i,e,t){const o=["use","class","id","persistent","validationMsg","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const r=No(zo());let{use:f=[]}=e,{class:_=""}=e,{id:w="SMUI-select-helper-text-"+PL++}=e,{persistent:b=!1}=e,{validationMsg:x=!1}=e,v,C,T={},S={},M;Ds(()=>(C=new K7({addClass:V,removeClass:G,hasClass:O,getAttr:Z,setAttr:te,removeAttr:J,setContent:Fe=>{t(8,M=Fe)}}),w.startsWith("SMUI-select-helper-text-")&&cs(oe(),"SMUISelectHelperText:id",w),cs(oe(),"SMUISelectHelperText:mount",C),C.init(),()=>{cs(oe(),"SMUISelectHelperText:unmount",C),C.destroy()}));function O(Fe){return Fe in T?T[Fe]:oe().classList.contains(Fe)}function V(Fe){T[Fe]||t(6,T[Fe]=!0,T)}function G(Fe){(!(Fe in T)||T[Fe])&&t(6,T[Fe]=!1,T)}function Z(Fe){var pe;return Fe in S?(pe=S[Fe])!==null&&pe!==void 0?pe:null:oe().getAttribute(Fe)}function te(Fe,pe){S[Fe]!==pe&&t(7,S[Fe]=pe,S)}function J(Fe){(!(Fe in S)||S[Fe]!=null)&&t(7,S[Fe]=void 0,S)}function oe(){return v}function Me(Fe){In[Fe?"unshift":"push"](()=>{v=Fe,t(5,v)})}return i.$$set=Fe=>{e=en(en({},e),Po(Fe)),t(10,l=or(e,o)),"use"in Fe&&t(0,f=Fe.use),"class"in Fe&&t(1,_=Fe.class),"id"in Fe&&t(2,w=Fe.id),"persistent"in Fe&&t(3,b=Fe.persistent),"validationMsg"in Fe&&t(4,x=Fe.validationMsg),"$$scope"in Fe&&t(12,m=Fe.$$scope)},[f,_,w,b,x,v,T,S,M,r,l,oe,m,u,Me]}class DL extends vr{constructor(e){super(),br(this,e,ML,LL,mr,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const OL=i=>({}),bb=i=>({}),FL=i=>({}),wb=i=>({}),RL=i=>({}),xb=i=>({}),BL=i=>({}),Ab=i=>({});function kb(i){let e,t=[{type:"hidden"},{required:i[10]},{disabled:i[6]},{value:i[0]},fo(i[53],"input$")],o={};for(let l=0;l<t.length;l+=1)o=en(o,t[l]);return{c(){e=zt("input"),this.h()},l(l){e=Nt(l,"INPUT",{type:!0}),this.h()},h(){dr(e,o)},m(l,u){qt(l,e,u),e.autofocus&&e.focus()},p(l,u){dr(e,o=Tr(t,[{type:"hidden"},u[0]&1024&&{required:l[10]},u[0]&64&&{disabled:l[6]},u[0]&1&&{value:l[0]},u[1]&4194304&&fo(l[53],"input$")]))},d(l){l&&Le(e)}}}function Sb(i){let e;return{c(){e=zt("span"),this.h()},l(t){e=Nt(t,"SPAN",{class:!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","mdc-select__ripple")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function Cb(i){let e,t;const o=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},fo(i[53],"label$")];let l={$$slots:{default:[zL]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new Y1({props:l}),i[66](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[0]&3072|m[1]&4198400?Tr(o,[m[0]&2048&&{id:u[11]+"-smui-label"},m[1]&4096&&{floatAbove:u[43]!==""},m[0]&1024&&{required:u[10]},m[1]&4194304&&ko(fo(u[53],"label$"))]):{};m[0]&512|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[66](null),cn(e,u)}}}function zL(i){let e=(i[9]==null?"":i[9])+"",t,o;const l=i[63].label,u=xr(l,i,i[89],Ab);return{c(){t=Xn(e),u&&u.c()},l(m){t=Yn(m,e),u&&u.l(m)},m(m,r){qt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&512)&&e!==(e=(m[9]==null?"":m[9])+"")&&Jo(t,e),u&&u.p&&(!o||r[2]&134217728)&&Ar(u,l,m,m[89],o?Sr(l,m[89],r,BL):kr(m[89]),Ab)},i(m){o||(xt(u,m),o=!0)},o(m){Ft(u,m),o=!1},d(m){m&&Le(t),u&&u.d(m)}}}function Eb(i){let e,t;const o=[{noLabel:i[8]||i[9]==null&&!i[52].label},fo(i[53],"outline$")];let l={$$slots:{default:[jL]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new E3({props:l}),i[68](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[0]&768|m[1]&6291456?Tr(o,[m[0]&768|m[1]&2097152&&{noLabel:u[8]||u[9]==null&&!u[52].label},m[1]&4194304&&ko(fo(u[53],"outline$"))]):{};m[0]&3840|m[1]&6296064|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[68](null),cn(e,u)}}}function Ib(i){let e,t;const o=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},fo(i[53],"label$")];let l={$$slots:{default:[NL]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new Y1({props:l}),i[67](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[0]&3072|m[1]&4198400?Tr(o,[m[0]&2048&&{id:u[11]+"-smui-label"},m[1]&4096&&{floatAbove:u[43]!==""},m[0]&1024&&{required:u[10]},m[1]&4194304&&ko(fo(u[53],"label$"))]):{};m[0]&512|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[67](null),cn(e,u)}}}function NL(i){let e=(i[9]==null?"":i[9])+"",t,o;const l=i[63].label,u=xr(l,i,i[89],xb);return{c(){t=Xn(e),u&&u.c()},l(m){t=Yn(m,e),u&&u.l(m)},m(m,r){qt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&512)&&e!==(e=(m[9]==null?"":m[9])+"")&&Jo(t,e),u&&u.p&&(!o||r[2]&134217728)&&Ar(u,l,m,m[89],o?Sr(l,m[89],r,RL):kr(m[89]),xb)},i(m){o||(xt(u,m),o=!0)},o(m){Ft(u,m),o=!1},d(m){m&&Le(t),u&&u.d(m)}}}function jL(i){let e,t,o=!i[8]&&(i[9]!=null||i[52].label)&&Ib(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,u){!l[8]&&(l[9]!=null||l[52].label)?o?(o.p(l,u),u[0]&768|u[1]&2097152&&xt(o,1)):(o=Ib(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function Tb(i){let e,t;const o=[fo(i[53],"ripple$")];let l={};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new C3({props:l}),i[70](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[1]&4194304?Tr(o,[ko(fo(u[53],"ripple$"))]):{};e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[70](null),cn(e,u)}}}function UL(i){let e;const t=i[63].default,o=xr(t,i,i[89],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&134217728)&&Ar(o,t,l,l[89],e?Sr(t,l[89],u,null):kr(l[89]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function VL(i){let e,t,o;const l=[{role:"listbox"},{wrapFocus:i[36]},fo(i[53],"list$")];function u(r){i[76](r)}let m={$$slots:{default:[UL]},$$scope:{ctx:i}};for(let r=0;r<l.length;r+=1)m=en(m,l[r]);return i[24]!==void 0&&(m.selectedIndex=i[24]),e=new uL({props:m}),In.push(()=>To(e,"selectedIndex",u)),e.$on("SMUIList:mount",i[77]),{c(){ln(e.$$.fragment)},l(r){pn(e.$$.fragment,r)},m(r,f){un(e,r,f),o=!0},p(r,f){const _=f[1]&4194336?Tr(l,[l[0],f[1]&32&&{wrapFocus:r[36]},f[1]&4194304&&ko(fo(r[53],"list$"))]):{};f[2]&134217728&&(_.$$scope={dirty:f,ctx:r}),!t&&f[0]&16777216&&(t=!0,_.selectedIndex=r[24],Lo(()=>t=!1)),e.$set(_)},i(r){o||(xt(e.$$.fragment,r),o=!0)},o(r){Ft(e.$$.fragment,r),o=!1},d(r){cn(e,r)}}}function Lb(i){let e,t;const o=[fo(i[53],"helperText$")];let l={$$slots:{default:[qL]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new DL({props:l}),e.$on("SMUISelectHelperText:id",i[86]),e.$on("SMUISelectHelperText:mount",i[87]),e.$on("SMUISelectHelperText:unmount",i[88]),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[1]&4194304?Tr(o,[ko(fo(u[53],"helperText$"))]):{};m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){cn(e,u)}}}function qL(i){let e;const t=i[63].helperText,o=xr(t,i,i[89],bb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&134217728)&&Ar(o,t,l,l[89],e?Sr(t,l[89],u,OL):kr(l[89]),bb)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function HL(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G,Z,te,J,oe,Me,Fe,pe,Ie,Se,me,et,nt,Et,it,we,ke,Oe,le,Ce,he,ge=i[12]&&kb(i),Be=i[7]==="filled"&&Sb(),We=i[7]!=="outlined"&&!i[8]&&(i[9]!=null||i[52].label)&&Cb(i),st=i[7]==="outlined"&&Eb(i);const Xe=i[63].leadingIcon,gt=xr(Xe,i,i[89],wb);let Pt=[{id:b=i[11]+"-smui-selected-text"},{class:x=_r({[i[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":v=i[11]+"-smui-label"},fo(i[53],"selectedText$")],ri={};for(let ti=0;ti<Pt.length;ti+=1)ri=en(ri,Pt[ti]);let ut=[{class:T=_r({[i[17]]:!0,"mdc-select__selected-text-container":!0})},fo(i[53],"selectedTextContainer$")],bt={};for(let ti=0;ti<ut.length;ti+=1)bt=en(bt,ut[ti]);let vt=[{class:te=_r({[i[21]]:!0,"mdc-select__dropdown-icon":!0})},fo(i[53],"dropdownIcon$")],Ke={};for(let ti=0;ti<vt.length;ti+=1)Ke=en(Ke,vt[ti]);let ei=i[7]!=="outlined"&&i[5]&&Tb(i),li=[{class:Me=_r({[i[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":Fe=i[10]?"true":void 0},{"aria-disabled":pe=i[6]?"true":void 0},{"aria-controls":i[31]},{"aria-describedby":i[31]},i[29],fo(i[53],"anchor$")],$t={};for(let ti=0;ti<li.length;ti+=1)$t=en($t,li[ti]);const Si=[{class:_r({[i[22]]:!0,"mdc-select__menu":!0,...i[33]})},{fullWidth:!0},{anchor:!1},{anchorElement:i[34]},{anchorCorner:i[35]},fo(i[53],"menu$")];function Ti(ti){i[78](ti)}let Yt={$$slots:{default:[VL]},$$scope:{ctx:i}};for(let ti=0;ti<Si.length;ti+=1)Yt=en(Yt,Si[ti]);i[32]!==void 0&&(Yt.open=i[32]),me=new oL({props:Yt}),In.push(()=>To(me,"open",Ti)),me.$on("SMUIMenu:selected",i[79]),me.$on("SMUIMenuSurface:closing",i[80]),me.$on("SMUIMenuSurface:closed",i[81]),me.$on("SMUIMenuSurface:opened",i[82]);let mi=[{class:nt=_r({[i[3]]:!0,"mdc-select":!0,"mdc-select--required":i[10],"mdc-select--disabled":i[6],"mdc-select--filled":i[7]==="filled","mdc-select--outlined":i[7]==="outlined","smui-select--standard":i[7]==="standard","mdc-select--with-leading-icon":i[45](i[13])?i[52].leadingIcon:i[13],"mdc-select--no-label":i[8]||i[9]==null&&!i[52].label,"mdc-select--invalid":i[1],"mdc-select--activated":i[32],"mdc-data-table__pagination-rows-per-page-select":i[46]==="data-table:pagination",...i[26]})},{style:Et=Object.entries(i[27]).map(Pb).concat([i[4]]).join(" ")},cf(i[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Wi={};for(let ti=0;ti<mi.length;ti+=1)Wi=en(Wi,mi[ti]);let Ci=i[52].helperText&&Lb(i);return{c(){e=zt("div"),ge&&ge.c(),t=Yi(),o=zt("div"),Be&&Be.c(),l=Yi(),We&&We.c(),u=Yi(),st&&st.c(),m=Yi(),gt&&gt.c(),r=Yi(),f=zt("span"),_=zt("span"),w=Xn(i[43]),M=Yi(),O=zt("span"),V=Zp("svg"),G=Zp("polygon"),Z=Zp("polygon"),oe=Yi(),ei&&ei.c(),Se=Yi(),ln(me.$$.fragment),ke=Yi(),Ci&&Ci.c(),Oe=gn(),this.h()},l(ti){e=Nt(ti,"DIV",{class:!0,style:!0});var Pe=Gt(e);ge&&ge.l(Pe),t=Zi(Pe),o=Nt(Pe,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-describedby":!0});var Q=Gt(o);Be&&Be.l(Q),l=Zi(Q),We&&We.l(Q),u=Zi(Q),st&&st.l(Q),m=Zi(Q),gt&&gt.l(Q),r=Zi(Q),f=Nt(Q,"SPAN",{class:!0});var ae=Gt(f);_=Nt(ae,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var Qe=Gt(_);w=Yn(Qe,i[43]),Qe.forEach(Le),ae.forEach(Le),M=Zi(Q),O=Nt(Q,"SPAN",{class:!0});var _t=Gt(O);V=Kp(_t,"svg",{class:!0,viewBox:!0,focusable:!0});var Jt=Gt(V);G=Kp(Jt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),Gt(G).forEach(Le),Z=Kp(Jt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),Gt(Z).forEach(Le),Jt.forEach(Le),_t.forEach(Le),oe=Zi(Q),ei&&ei.l(Q),Q.forEach(Le),Se=Zi(Pe),pn(me.$$.fragment,Pe),Pe.forEach(Le),ke=Zi(ti),Ci&&Ci.l(ti),Oe=gn(),this.h()},h(){dr(_,ri),dr(f,bt),Ht(G,"class","mdc-select__dropdown-icon-inactive"),Ht(G,"stroke","none"),Ht(G,"fill-rule","evenodd"),Ht(G,"points","7 10 12 15 17 10"),Ht(Z,"class","mdc-select__dropdown-icon-active"),Ht(Z,"stroke","none"),Ht(Z,"fill-rule","evenodd"),Ht(Z,"points","7 15 12 10 17 15"),Ht(V,"class","mdc-select__dropdown-icon-graphic"),Ht(V,"viewBox","7 10 10 5"),Ht(V,"focusable","false"),dr(O,Ke),dr(o,$t),dr(e,Wi)},m(ti,Pe){qt(ti,e,Pe),ge&&ge.m(e,null),Dt(e,t),Dt(e,o),Be&&Be.m(o,null),Dt(o,l),We&&We.m(o,null),Dt(o,u),st&&st.m(o,null),Dt(o,m),gt&&gt.m(o,null),Dt(o,r),Dt(o,f),Dt(f,_),Dt(_,w),i[69](_),Dt(o,M),Dt(o,O),Dt(O,V),Dt(V,G),Dt(V,Z),Dt(o,oe),ei&&ei.m(o,null),i[71](o),Dt(e,Se),un(me,e,null),i[83](e),qt(ti,ke,Pe),Ci&&Ci.m(ti,Pe),qt(ti,Oe,Pe),le=!0,Ce||(he=[pr(C=Wo.call(null,_,i[18])),pr(S=Wo.call(null,f,i[16])),pr(J=Wo.call(null,O,i[20])),pr(Ie=Wo.call(null,o,i[14])),En(o,"focus",i[72]),En(o,"blur",i[73]),En(o,"click",i[74]),En(o,"keydown",i[75]),En(o,"focus",i[64]),En(o,"blur",i[65]),pr(it=Yf.call(null,e,{ripple:i[7]==="filled",unbounded:!1,addClass:i[49],removeClass:i[50],addStyle:i[51]})),pr(tL.call(null,e,{addClass:i[49],removeClass:i[50]})),pr(we=Wo.call(null,e,i[2])),pr(i[44].call(null,e)),En(e,"SMUISelectLeadingIcon:mount",i[84]),En(e,"SMUISelectLeadingIcon:unmount",i[85])],Ce=!0)},p(ti,Pe){ti[12]?ge?ge.p(ti,Pe):(ge=kb(ti),ge.c(),ge.m(e,t)):ge&&(ge.d(1),ge=null),ti[7]==="filled"?Be||(Be=Sb(),Be.c(),Be.m(o,l)):Be&&(Be.d(1),Be=null),ti[7]!=="outlined"&&!ti[8]&&(ti[9]!=null||ti[52].label)?We?(We.p(ti,Pe),Pe[0]&896|Pe[1]&2097152&&xt(We,1)):(We=Cb(ti),We.c(),xt(We,1),We.m(o,u)):We&&(Rr(),Ft(We,1,1,()=>{We=null}),Fr()),ti[7]==="outlined"?st?(st.p(ti,Pe),Pe[0]&128&&xt(st,1)):(st=Eb(ti),st.c(),xt(st,1),st.m(o,m)):st&&(Rr(),Ft(st,1,1,()=>{st=null}),Fr()),gt&&gt.p&&(!le||Pe[2]&134217728)&&Ar(gt,Xe,ti,ti[89],le?Sr(Xe,ti[89],Pe,FL):kr(ti[89]),wb),(!le||Pe[1]&4096)&&Jo(w,ti[43]),dr(_,ri=Tr(Pt,[(!le||Pe[0]&2048&&b!==(b=ti[11]+"-smui-selected-text"))&&{id:b},(!le||Pe[0]&524288&&x!==(x=_r({[ti[19]]:!0,"mdc-select__selected-text":!0})))&&{class:x},{role:"button"},{"aria-haspopup":"listbox"},(!le||Pe[0]&2048&&v!==(v=ti[11]+"-smui-label"))&&{"aria-labelledby":v},Pe[1]&4194304&&fo(ti[53],"selectedText$")])),C&&So(C.update)&&Pe[0]&262144&&C.update.call(null,ti[18]),dr(f,bt=Tr(ut,[(!le||Pe[0]&131072&&T!==(T=_r({[ti[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:T},Pe[1]&4194304&&fo(ti[53],"selectedTextContainer$")])),S&&So(S.update)&&Pe[0]&65536&&S.update.call(null,ti[16]),dr(O,Ke=Tr(vt,[(!le||Pe[0]&2097152&&te!==(te=_r({[ti[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:te},Pe[1]&4194304&&fo(ti[53],"dropdownIcon$")])),J&&So(J.update)&&Pe[0]&1048576&&J.update.call(null,ti[20]),ti[7]!=="outlined"&&ti[5]?ei?(ei.p(ti,Pe),Pe[0]&160&&xt(ei,1)):(ei=Tb(ti),ei.c(),xt(ei,1),ei.m(o,null)):ei&&(Rr(),Ft(ei,1,1,()=>{ei=null}),Fr()),dr(o,$t=Tr(li,[(!le||Pe[0]&32768&&Me!==(Me=_r({[ti[15]]:!0,"mdc-select__anchor":!0})))&&{class:Me},(!le||Pe[0]&1024&&Fe!==(Fe=ti[10]?"true":void 0))&&{"aria-required":Fe},(!le||Pe[0]&64&&pe!==(pe=ti[6]?"true":void 0))&&{"aria-disabled":pe},(!le||Pe[1]&1)&&{"aria-controls":ti[31]},(!le||Pe[1]&1)&&{"aria-describedby":ti[31]},Pe[0]&536870912&&ti[29],Pe[1]&4194304&&fo(ti[53],"anchor$")])),Ie&&So(Ie.update)&&Pe[0]&16384&&Ie.update.call(null,ti[14]);const Q=Pe[0]&4194304|Pe[1]&4194332?Tr(Si,[Pe[0]&4194304|Pe[1]&4&&{class:_r({[ti[22]]:!0,"mdc-select__menu":!0,...ti[33]})},Si[1],Si[2],Pe[1]&8&&{anchorElement:ti[34]},Pe[1]&16&&{anchorCorner:ti[35]},Pe[1]&4194304&&ko(fo(ti[53],"menu$"))]):{};Pe[0]&16777216|Pe[1]&4194400|Pe[2]&134217728&&(Q.$$scope={dirty:Pe,ctx:ti}),!et&&Pe[1]&2&&(et=!0,Q.open=ti[32],Lo(()=>et=!1)),me.$set(Q),dr(e,Wi=Tr(mi,[(!le||Pe[0]&67119050|Pe[1]&2097154&&nt!==(nt=_r({[ti[3]]:!0,"mdc-select":!0,"mdc-select--required":ti[10],"mdc-select--disabled":ti[6],"mdc-select--filled":ti[7]==="filled","mdc-select--outlined":ti[7]==="outlined","smui-select--standard":ti[7]==="standard","mdc-select--with-leading-icon":ti[45](ti[13])?ti[52].leadingIcon:ti[13],"mdc-select--no-label":ti[8]||ti[9]==null&&!ti[52].label,"mdc-select--invalid":ti[1],"mdc-select--activated":ti[32],"mdc-data-table__pagination-rows-per-page-select":ti[46]==="data-table:pagination",...ti[26]})))&&{class:nt},(!le||Pe[0]&134217744&&Et!==(Et=Object.entries(ti[27]).map(Pb).concat([ti[4]]).join(" ")))&&{style:Et},Pe[1]&4194304&&cf(ti[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),it&&So(it.update)&&Pe[0]&128&&it.update.call(null,{ripple:ti[7]==="filled",unbounded:!1,addClass:ti[49],removeClass:ti[50],addStyle:ti[51]}),we&&So(we.update)&&Pe[0]&4&&we.update.call(null,ti[2]),ti[52].helperText?Ci?(Ci.p(ti,Pe),Pe[1]&2097152&&xt(Ci,1)):(Ci=Lb(ti),Ci.c(),xt(Ci,1),Ci.m(Oe.parentNode,Oe)):Ci&&(Rr(),Ft(Ci,1,1,()=>{Ci=null}),Fr())},i(ti){le||(xt(We),xt(st),xt(gt,ti),xt(ei),xt(me.$$.fragment,ti),xt(Ci),le=!0)},o(ti){Ft(We),Ft(st),Ft(gt,ti),Ft(ei),Ft(me.$$.fragment,ti),Ft(Ci),le=!1},d(ti){ti&&Le(e),ge&&ge.d(),Be&&Be.d(),We&&We.d(),st&&st.d(),gt&&gt.d(ti),i[69](null),ei&&ei.d(),i[71](null),cn(me),i[83](null),ti&&Le(ke),Ci&&Ci.d(ti),ti&&Le(Oe),Ce=!1,qo(he)}}}let GL=0;function WL(i){const e=i.currentTarget.getBoundingClientRect();return(XL(i)?i.touches[0].clientX:i.clientX)-e.left}function XL(i){return"touches"in i}const Pb=([i,e])=>`${i}: ${e};`;function YL(i,e,t){const o=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let l=or(e,o),u,m,{$$slots:r={},$$scope:f}=e;const _=hw(r),w=No(zo());let b=()=>{};function x(wt){return wt===b}let{use:v=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:S=!0}=e,{disabled:M=!1}=e,{variant:O="standard"}=e,{noLabel:V=!1}=e,{label:G=void 0}=e,{value:Z=""}=e,{key:te=wt=>wt}=e,{dirty:J=!1}=e,{invalid:oe=b}=e,{updateInvalid:Me=x(oe)}=e;const Fe=x(oe);x(oe)&&(oe=!1);let{required:pe=!1}=e,{inputId:Ie="SMUI-select-"+GL++}=e,{hiddenInput:Se=!1}=e,{withLeadingIcon:me=b}=e,{anchor$use:et=[]}=e,{anchor$class:nt=""}=e,{selectedTextContainer$use:Et=[]}=e,{selectedTextContainer$class:it=""}=e,{selectedText$use:we=[]}=e,{selectedText$class:ke=""}=e,{dropdownIcon$use:Oe=[]}=e,{dropdownIcon$class:le=""}=e,{menu$class:Ce=""}=e,he,ge,Be={},We={},st,Xe={},gt,Pt=-1,ri,ut=Zs("SMUI:addLayoutListener"),bt,vt=!1,Ke={},ei,li,$t=!1,Si,Ti=Zs("SMUI:select:context"),Yt,mi,Wi,Ci,ti;ws("SMUI:list:role",""),ws("SMUI:list:nav",!1);const Pe=Cc("");As(i,Pe,wt=>t(43,u=wt)),ws("SMUI:select:selectedText",Pe);const Q=Cc(Z);As(i,Q,wt=>t(91,m=wt)),ws("SMUI:select:value",Q);let ae=Pt;ut&&(bt=ut(fn)),Ds(()=>(t(23,ge=new Z7({setSelectedText:wt=>{Ih(Pe,u=wt,u)},isSelectAnchorFocused:()=>document.activeElement===st,getSelectAnchorAttr:hn,setSelectAnchorAttr:Bi,removeSelectAnchorAttr:Xi,addMenuClass:wn,removeMenuClass:Ln,openMenu:()=>{t(32,vt=!0)},closeMenu:()=>{t(32,vt=!1)},getAnchorElement:()=>st,setMenuAnchorElement:wt=>{t(34,ei=wt)},setMenuAnchorCorner:wt=>{t(35,li=wt)},setMenuWrapFocus:wt=>{t(36,$t=wt)},getSelectedIndex:()=>Pt,setSelectedIndex:wt=>{t(62,ae=wt),t(24,Pt=wt),t(0,Z=Hn()[Pt])},focusMenuItemAtIndex:wt=>{Si.focusItemAtIndex(wt)},getMenuItemCount:()=>Si.items.length,getMenuItemValues:()=>Hn().map(te),getMenuItemTextAtIndex:wt=>Si.getPrimaryTextAtIndex(wt),isTypeaheadInProgress:()=>Si.typeaheadInProgress,typeaheadMatchItem:(wt,Tn)=>Si.typeaheadMatchItem(wt,Tn),addClass:_t,removeClass:Jt,hasClass:Qe,setRippleCenter:wt=>Ci&&Ci.setRippleCenter(wt),activateBottomLine:()=>Ci&&Ci.activate(),deactivateBottomLine:()=>Ci&&Ci.deactivate(),notifyChange:wt=>{t(54,J=!0),Me&&t(1,oe=!ge.isValid()),cs(yn(),"SMUISelect:change",{value:Z,index:Pt},void 0,!0)},hasOutline:()=>!!ti,notchOutline:wt=>ti&&ti.notch(wt),closeOutline:()=>ti&&ti.closeNotch(),hasLabel:()=>!!Wi,floatLabel:wt=>Wi&&Wi.float(wt),getLabelWidth:()=>Wi?Wi.getWidth():0,setLabelRequired:wt=>Wi&&Wi.setRequired(wt)},{get helperText(){return mi},get leadingIcon(){return Yt}})),t(24,Pt=Hn().indexOf(Z)),ge.init(),Zr(Fe),()=>{ge.destroy()})),nh(()=>{bt&&bt()});function Qe(wt){return wt in Be?Be[wt]:yn().classList.contains(wt)}function _t(wt){Be[wt]||t(26,Be[wt]=!0,Be)}function Jt(wt){(!(wt in Be)||Be[wt])&&t(26,Be[wt]=!1,Be)}function di(wt,Tn){We[wt]!=Tn&&(Tn===""||Tn==null?(delete We[wt],t(27,We)):t(27,We[wt]=Tn,We))}function wn(wt){Ke[wt]||t(33,Ke[wt]=!0,Ke)}function Ln(wt){(!(wt in Ke)||Ke[wt])&&t(33,Ke[wt]=!1,Ke)}function hn(wt){var Tn;return wt in Xe?(Tn=Xe[wt])!==null&&Tn!==void 0?Tn:null:yn().getAttribute(wt)}function Bi(wt,Tn){Xe[wt]!==Tn&&t(29,Xe[wt]=Tn,Xe)}function Xi(wt){(!(wt in Xe)||Xe[wt]!=null)&&t(29,Xe[wt]=void 0,Xe)}function Hn(){return Si.getOrderedList().map(wt=>wt.getValue())}function Gn(){return ge.getUseDefaultValidation()}function Zr(wt){ge.setUseDefaultValidation(wt)}function zn(){st.focus()}function fn(){ge.layout()}function yn(){return he}function tn(wt){Xf.call(this,i,wt)}function wr(wt){Xf.call(this,i,wt)}function Wn(wt){In[wt?"unshift":"push"](()=>{Wi=wt,t(40,Wi)})}function lr(wt){In[wt?"unshift":"push"](()=>{Wi=wt,t(40,Wi)})}function Kr(wt){In[wt?"unshift":"push"](()=>{ti=wt,t(42,ti)})}function rn(wt){In[wt?"unshift":"push"](()=>{gt=wt,t(30,gt)})}function He(wt){In[wt?"unshift":"push"](()=>{Ci=wt,t(41,Ci)})}function yo(wt){In[wt?"unshift":"push"](()=>{st=wt,t(28,st)})}const _o=()=>ge&&ge.handleFocus(),co=()=>ge&&ge.handleBlur(),Te=wt=>{st.focus(),ge&&ge.handleClick(WL(wt))},Ee=wt=>ge&&ge.handleKeydown(wt);function qe(wt){Pt=wt,t(24,Pt)}const ct=wt=>t(37,Si=wt.detail);function dt(wt){vt=wt,t(32,vt)}const jt=wt=>ge&&ge.handleMenuItemAction(wt.detail.index),Ge=()=>ge&&ge.handleMenuClosing(),Zt=()=>ge&&ge.handleMenuClosed(),Rt=()=>ge&&ge.handleMenuOpened();function oi(wt){In[wt?"unshift":"push"](()=>{he=wt,t(25,he)})}const yt=wt=>t(38,Yt=wt.detail),Ri=()=>t(38,Yt=void 0),Ii=wt=>t(31,ri=wt.detail),Sn=wt=>t(39,mi=wt.detail),An=()=>{t(31,ri=void 0),t(39,mi=void 0)};return i.$$set=wt=>{e=en(en({},e),Po(wt)),t(53,l=or(e,o)),"use"in wt&&t(2,v=wt.use),"class"in wt&&t(3,C=wt.class),"style"in wt&&t(4,T=wt.style),"ripple"in wt&&t(5,S=wt.ripple),"disabled"in wt&&t(6,M=wt.disabled),"variant"in wt&&t(7,O=wt.variant),"noLabel"in wt&&t(8,V=wt.noLabel),"label"in wt&&t(9,G=wt.label),"value"in wt&&t(0,Z=wt.value),"key"in wt&&t(55,te=wt.key),"dirty"in wt&&t(54,J=wt.dirty),"invalid"in wt&&t(1,oe=wt.invalid),"updateInvalid"in wt&&t(56,Me=wt.updateInvalid),"required"in wt&&t(10,pe=wt.required),"inputId"in wt&&t(11,Ie=wt.inputId),"hiddenInput"in wt&&t(12,Se=wt.hiddenInput),"withLeadingIcon"in wt&&t(13,me=wt.withLeadingIcon),"anchor$use"in wt&&t(14,et=wt.anchor$use),"anchor$class"in wt&&t(15,nt=wt.anchor$class),"selectedTextContainer$use"in wt&&t(16,Et=wt.selectedTextContainer$use),"selectedTextContainer$class"in wt&&t(17,it=wt.selectedTextContainer$class),"selectedText$use"in wt&&t(18,we=wt.selectedText$use),"selectedText$class"in wt&&t(19,ke=wt.selectedText$class),"dropdownIcon$use"in wt&&t(20,Oe=wt.dropdownIcon$use),"dropdownIcon$class"in wt&&t(21,le=wt.dropdownIcon$class),"menu$class"in wt&&t(22,Ce=wt.menu$class),"$$scope"in wt&&t(89,f=wt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&25165825|i.$$.dirty[2]&1&&ae!==Pt)if(t(62,ae=Pt),ge)ge.setSelectedIndex(Pt,!1,!0);else{const wt=Hn();Z!==wt[Pt]&&t(0,Z=wt[Pt])}i.$$.dirty[0]&1&&Ih(Q,m=Z,m),i.$$.dirty[0]&8388609|i.$$.dirty[1]&16777216&&ge&&ge.getValue()!==te(Z)&&ge.setValue(te(Z)),i.$$.dirty[0]&8388672&&ge&&ge.getDisabled()!==M&&ge.setDisabled(M),i.$$.dirty[0]&8388610|i.$$.dirty[1]&41943040&&ge&&J&&ge.isValid()!==!oe&&(Me?t(1,oe=!ge.isValid()):ge.setValid(!oe)),i.$$.dirty[0]&8389632&&ge&&ge.getRequired()!==pe&&ge.setRequired(pe)},[Z,oe,v,C,T,S,M,O,V,G,pe,Ie,Se,me,et,nt,Et,it,we,ke,Oe,le,Ce,ge,Pt,he,Be,We,st,Xe,gt,ri,vt,Ke,ei,li,$t,Si,Yt,mi,Wi,Ci,ti,u,w,x,Ti,Pe,Q,_t,Jt,di,_,l,J,te,Me,Gn,Zr,zn,fn,yn,ae,r,tn,wr,Wn,lr,Kr,rn,He,yo,_o,co,Te,Ee,qe,ct,dt,jt,Ge,Zt,Rt,oi,yt,Ri,Ii,Sn,An,f]}class I3 extends vr{constructor(e){super(),br(this,e,YL,HL,mr,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function ZL(i){let e;const t=i[11].default,o=xr(t,i,i[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&8192)&&Ar(o,t,l,l[13],e?Sr(t,l[13],u,null):kr(l[13]),null)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function KL(i){let e,t;const o=[{use:i[3]},{"data-value":i[0]},{value:i[0]},{selected:i[2]},i[6]];let l={$$slots:{default:[ZL]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new _L({props:l}),i[12](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,[m]){const r=m&77?Tr(o,[m&8&&{use:u[3]},m&1&&{"data-value":u[0]},m&1&&{value:u[0]},m&4&&{selected:u[2]},m&64&&ko(u[6])]):{};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[12](null),cn(e,u)}}}function JL(i,e,t){let o,l;const u=["use","class","value","getElement"];let m=or(e,u),r,f,{$$slots:_={},$$scope:w}=e;const b=No(zo());let{use:x=[]}=e;const v="";let{value:C=""}=e,T;const S=Zs("SMUI:select:selectedText");As(i,S,Z=>t(14,r=Z));const M=Zs("SMUI:select:value");As(i,M,Z=>t(10,f=Z)),ws("SMUI:list:item:role","option"),Ds(O),nh(O);function O(){l&&T&&Ih(S,r=T.getPrimaryText(),r)}function V(){return T.getElement()}function G(Z){In[Z?"unshift":"push"](()=>{T=Z,t(1,T)})}return i.$$set=Z=>{e=en(en({},e),Po(Z)),t(6,m=or(e,u)),"use"in Z&&t(7,x=Z.use),"value"in Z&&t(0,C=Z.value),"$$scope"in Z&&t(13,w=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&t(3,o=[b,...x]),i.$$.dirty&1025&&t(2,l=C!=null&&C!==""&&f===C)},[C,T,l,o,S,M,m,x,v,V,f,_,G,w]}class QL extends vr{constructor(e){super(),br(this,e,JL,KL,mr,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const T3=QL;/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var A2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},$L={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},Mb={LABEL_SCALE:.75},eP=["pattern","min","max","required","step","minlength","maxlength"],tP=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Db=["mousedown","touchstart"],Ob=["click","keydown"],iP=function(i){Nl(e,i);function e(t,o){o===void 0&&(o={});var l=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return l.isFocused=!1,l.receivedUserInput=!1,l.valid=!0,l.useNativeValidation=!0,l.validateOnValueChange=!0,l.helperText=o.helperText,l.characterCounter=o.characterCounter,l.leadingIcon=o.leadingIcon,l.trailingIcon=o.trailingIcon,l.inputFocusHandler=function(){l.activateFocus()},l.inputBlurHandler=function(){l.deactivateFocus()},l.inputInputHandler=function(){l.handleInput()},l.setPointerXOffset=function(u){l.setTransformOrigin(u)},l.textFieldInteractionHandler=function(){l.handleTextFieldInteraction()},l.validationAttributeChangeHandler=function(u){l.handleValidationAttributeChange(u)},l}return Object.defineProperty(e,"cssClasses",{get:function(){return $L},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return A2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Mb},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat",{get:function(){var t=this.getNativeInput().type;return tP.indexOf(t)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t,o,l,u;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var m=Eh(Db),r=m.next();!r.done;r=m.next()){var f=r.value;this.adapter.registerInputInteractionHandler(f,this.setPointerXOffset)}}catch(b){t={error:b}}finally{try{r&&!r.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}try{for(var _=Eh(Ob),w=_.next();!w.done;w=_.next()){var f=w.value;this.adapter.registerTextFieldInteractionHandler(f,this.textFieldInteractionHandler)}}catch(b){l={error:b}}finally{try{w&&!w.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},e.prototype.destroy=function(){var t,o,l,u;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var m=Eh(Db),r=m.next();!r.done;r=m.next()){var f=r.value;this.adapter.deregisterInputInteractionHandler(f,this.setPointerXOffset)}}catch(b){t={error:b}}finally{try{r&&!r.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}try{for(var _=Eh(Ob),w=_.next();!w.done;w=_.next()){var f=w.value;this.adapter.deregisterTextFieldInteractionHandler(f,this.textFieldInteractionHandler)}}catch(b){l={error:b}}finally{try{w&&!w.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},e.prototype.handleTextFieldInteraction=function(){var t=this.adapter.getNativeInput();t&&t.disabled||(this.receivedUserInput=!0)},e.prototype.handleValidationAttributeChange=function(t){var o=this;t.some(function(l){return eP.indexOf(l)>-1?(o.styleValidity(!0),o.adapter.setLabelRequired(o.getNativeInput().required),!0):!1}),t.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},e.prototype.notchOutline=function(t){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(t){var o=this.adapter.getLabelWidth()*Mb.LABEL_SCALE;this.adapter.notchOutline(o)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},e.prototype.setTransformOrigin=function(t){if(!(this.isDisabled()||this.adapter.hasOutline())){var o=t.touches,l=o?o[0]:t,u=l.target.getBoundingClientRect(),m=l.clientX-u.left;this.adapter.setLineRippleTransformOrigin(m)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var t=this.isValid();this.styleValidity(t),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},e.prototype.getValue=function(){return this.getNativeInput().value},e.prototype.setValue=function(t){if(this.getValue()!==t&&(this.getNativeInput().value=t),this.setcharacterCounter(t.length),this.validateOnValueChange){var o=this.isValid();this.styleValidity(o)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},e.prototype.setValid=function(t){this.valid=t,this.styleValidity(t);var o=!t&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(o)},e.prototype.setValidateOnValueChange=function(t){this.validateOnValueChange=t},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},e.prototype.setUseNativeValidation=function(t){this.useNativeValidation=t},e.prototype.isDisabled=function(){return this.getNativeInput().disabled},e.prototype.setDisabled=function(t){this.getNativeInput().disabled=t,this.styleDisabled(t)},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.setTrailingIconAriaLabel=function(t){this.trailingIcon&&this.trailingIcon.setAriaLabel(t)},e.prototype.setTrailingIconContent=function(t){this.trailingIcon&&this.trailingIcon.setContent(t)},e.prototype.setcharacterCounter=function(t){if(!!this.characterCounter){var o=this.getNativeInput().maxLength;if(o===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(t,o)}},e.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},e.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},e.prototype.styleValidity=function(t){var o=e.cssClasses.INVALID;if(t?this.adapter.removeClass(o):this.adapter.addClass(o),this.helperText){this.helperText.setValidity(t);var l=this.helperText.isValidation();if(!l)return;var u=this.helperText.isVisible(),m=this.helperText.getId();u&&m?this.adapter.setInputAttr(A2.ARIA_DESCRIBEDBY,m):this.adapter.removeInputAttr(A2.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused=function(t){var o=e.cssClasses.FOCUSED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.styleDisabled=function(t){var o=e.cssClasses,l=o.DISABLED,u=o.INVALID;t?(this.adapter.addClass(l),this.adapter.removeClass(u)):this.adapter.removeClass(l),this.leadingIcon&&this.leadingIcon.setDisabled(t),this.trailingIcon&&this.trailingIcon.setDisabled(t)},e.prototype.styleFloating=function(t){var o=e.cssClasses.LABEL_FLOATING;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.getNativeInput=function(){var t=this.adapter?this.adapter.getNativeInput():null;return t||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(ic);const nP=Mu({class:"mdc-text-field-helper-line",component:E1}),rP=Mu({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:pf}),oP=Mu({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:pf});function sP(i){let e,t,o,l,u,m=[{class:t=_r({[i[1]]:!0,"mdc-text-field__input":!0})},{type:i[2]},{placeholder:i[3]},i[4],i[6],i[10]],r={};for(let f=0;f<m.length;f+=1)r=en(r,m[f]);return{c(){e=zt("input"),this.h()},l(f){e=Nt(f,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){dr(e,r)},m(f,_){qt(f,e,_),e.autofocus&&e.focus(),i[26](e),l||(u=[pr(o=Wo.call(null,e,i[0])),pr(i[7].call(null,e)),En(e,"input",i[27]),En(e,"change",i[9]),En(e,"blur",i[24]),En(e,"focus",i[25])],l=!0)},p(f,[_]){dr(e,r=Tr(m,[_&2&&t!==(t=_r({[f[1]]:!0,"mdc-text-field__input":!0}))&&{class:t},_&4&&{type:f[2]},_&8&&{placeholder:f[3]},_&16&&f[4],_&64&&f[6],_&1024&&f[10]])),o&&So(o.update)&&_&1&&o.update.call(null,f[0])},i:eo,o:eo,d(f){f&&Le(e),i[26](null),l=!1,qo(u)}}}function aP(i){if(i===""){const e=new Number(Number.NaN);return e.length=0,e}return+i}function lP(i,e,t){const o=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=or(e,o);const u=No(zo());let m=()=>{};function r(we){return we===m}let{use:f=[]}=e,{class:_=""}=e,{type:w="text"}=e,{placeholder:b=" "}=e,{value:x=m}=e;const v=r(x);v&&(x="");let{files:C=null}=e,{dirty:T=!1}=e,{invalid:S=!1}=e,{updateInvalid:M=!0}=e,{emptyValueNull:O=x===null}=e;v&&O&&(x=null);let{emptyValueUndefined:V=x===void 0}=e;v&&V&&(x=void 0);let G,Z={},te={};Ds(()=>{M&&t(14,S=G.matches(":invalid"))});function J(we){if(w==="file"){t(12,C=we.currentTarget.files);return}if(we.currentTarget.value===""&&O){t(11,x=null);return}if(we.currentTarget.value===""&&V){t(11,x=void 0);return}switch(w){case"number":case"range":t(11,x=aP(we.currentTarget.value));break;default:t(11,x=we.currentTarget.value);break}}function oe(we){(w==="file"||w==="range")&&J(we),t(13,T=!0),M&&t(14,S=G.matches(":invalid"))}function Me(we){var ke;return we in Z?(ke=Z[we])!==null&&ke!==void 0?ke:null:me().getAttribute(we)}function Fe(we,ke){Z[we]!==ke&&t(6,Z[we]=ke,Z)}function pe(we){(!(we in Z)||Z[we]!=null)&&t(6,Z[we]=void 0,Z)}function Ie(){me().focus()}function Se(){me().blur()}function me(){return G}function et(we){Xf.call(this,i,we)}function nt(we){Xf.call(this,i,we)}function Et(we){In[we?"unshift":"push"](()=>{G=we,t(5,G)})}const it=we=>w!=="file"&&J(we);return i.$$set=we=>{e=en(en({},e),Po(we)),t(10,l=or(e,o)),"use"in we&&t(0,f=we.use),"class"in we&&t(1,_=we.class),"type"in we&&t(2,w=we.type),"placeholder"in we&&t(3,b=we.placeholder),"value"in we&&t(11,x=we.value),"files"in we&&t(12,C=we.files),"dirty"in we&&t(13,T=we.dirty),"invalid"in we&&t(14,S=we.invalid),"updateInvalid"in we&&t(15,M=we.updateInvalid),"emptyValueNull"in we&&t(16,O=we.emptyValueNull),"emptyValueUndefined"in we&&t(17,V=we.emptyValueUndefined)},i.$$.update=()=>{i.$$.dirty&2068&&(w==="file"?(delete te.value,t(4,te),t(2,w),t(11,x)):t(4,te.value=x==null?"":x,te))},[f,_,w,b,te,G,Z,u,J,oe,l,x,C,T,S,M,O,V,Me,Fe,pe,Ie,Se,me,et,nt,Et,it]}class uP extends vr{constructor(e){super(),br(this,e,lP,sP,mr,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function cP(i){let e,t,o,l,u,m,r=[{class:t=_r({[i[2]]:!0,"mdc-text-field__input":!0})},{style:o=`${i[4]?"":"resize: none; "}${i[3]}`},i[6],i[9]],f={};for(let _=0;_<r.length;_+=1)f=en(f,r[_]);return{c(){e=zt("textarea"),this.h()},l(_){e=Nt(_,"TEXTAREA",{class:!0,style:!0}),Gt(e).forEach(Le),this.h()},h(){dr(e,f)},m(_,w){qt(_,e,w),e.autofocus&&e.focus(),i[21](e),ed(e,i[0]),u||(m=[pr(l=Wo.call(null,e,i[1])),pr(i[7].call(null,e)),En(e,"change",i[8]),En(e,"blur",i[19]),En(e,"focus",i[20]),En(e,"input",i[22])],u=!0)},p(_,[w]){dr(e,f=Tr(r,[w&4&&t!==(t=_r({[_[2]]:!0,"mdc-text-field__input":!0}))&&{class:t},w&24&&o!==(o=`${_[4]?"":"resize: none; "}${_[3]}`)&&{style:o},w&64&&_[6],w&512&&_[9]])),l&&So(l.update)&&w&2&&l.update.call(null,_[1]),w&1&&ed(e,_[0])},i:eo,o:eo,d(_){_&&Le(e),i[21](null),u=!1,qo(m)}}}function hP(i,e,t){const o=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=or(e,o);const u=No(zo());let{use:m=[]}=e,{class:r=""}=e,{style:f=""}=e,{value:_=""}=e,{dirty:w=!1}=e,{invalid:b=!1}=e,{updateInvalid:x=!0}=e,{resizable:v=!0}=e,C,T={};Ds(()=>{x&&t(11,b=C.matches(":invalid"))});function S(){t(10,w=!0),x&&t(11,b=C.matches(":invalid"))}function M(pe){var Ie;return pe in T?(Ie=T[pe])!==null&&Ie!==void 0?Ie:null:te().getAttribute(pe)}function O(pe,Ie){T[pe]!==Ie&&t(6,T[pe]=Ie,T)}function V(pe){(!(pe in T)||T[pe]!=null)&&t(6,T[pe]=void 0,T)}function G(){te().focus()}function Z(){te().blur()}function te(){return C}function J(pe){Xf.call(this,i,pe)}function oe(pe){Xf.call(this,i,pe)}function Me(pe){In[pe?"unshift":"push"](()=>{C=pe,t(5,C)})}function Fe(){_=this.value,t(0,_)}return i.$$set=pe=>{e=en(en({},e),Po(pe)),t(9,l=or(e,o)),"use"in pe&&t(1,m=pe.use),"class"in pe&&t(2,r=pe.class),"style"in pe&&t(3,f=pe.style),"value"in pe&&t(0,_=pe.value),"dirty"in pe&&t(10,w=pe.dirty),"invalid"in pe&&t(11,b=pe.invalid),"updateInvalid"in pe&&t(12,x=pe.updateInvalid),"resizable"in pe&&t(4,v=pe.resizable)},[_,m,r,f,v,C,T,u,S,l,w,b,x,M,O,V,G,Z,te,J,oe,Me,Fe]}class fP extends vr{constructor(e){super(),br(this,e,hP,cP,mr,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const dP=i=>({}),Fb=i=>({}),pP=i=>({}),Rb=i=>({}),mP=i=>({}),Bb=i=>({}),gP=i=>({}),zb=i=>({}),yP=i=>({}),Nb=i=>({}),_P=i=>({}),jb=i=>({}),vP=i=>({}),Ub=i=>({}),bP=i=>({}),Vb=i=>({}),wP=i=>({}),qb=i=>({}),xP=i=>({}),Hb=i=>({}),AP=i=>({}),Gb=i=>({}),kP=i=>({}),Wb=i=>({});function SP(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C;const T=i[51].label,S=xr(T,i,i[90],Nb);o=new x1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[EP]},$$scope:{ctx:i}}});const M=i[51].default,O=xr(M,i,i[90],null);m=new x1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[IP]},$$scope:{ctx:i}}});const V=i[51].ripple,G=xr(V,i,i[90],Rb);let Z=[{class:f=_r({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||!i[42].label,"mdc-text-field--with-leading-icon":i[42].leadingIcon,"mdc-text-field--with-trailing-icon":i[42].trailingIcon,"mdc-text-field--invalid":i[1],...i[25]})},{style:_=Object.entries(i[26]).map(n5).concat([i[10]]).join(" ")},cf(i[41],["input$","label$","ripple$","outline$","helperLine$"])],te={};for(let J=0;J<Z.length;J+=1)te=en(te,Z[J]);return{c(){e=zt("div"),S&&S.c(),t=Yi(),ln(o.$$.fragment),l=Yi(),O&&O.c(),u=Yi(),ln(m.$$.fragment),r=Yi(),G&&G.c(),this.h()},l(J){e=Nt(J,"DIV",{class:!0,style:!0});var oe=Gt(e);S&&S.l(oe),t=Zi(oe),pn(o.$$.fragment,oe),l=Zi(oe),O&&O.l(oe),u=Zi(oe),pn(m.$$.fragment,oe),r=Zi(oe),G&&G.l(oe),oe.forEach(Le),this.h()},h(){dr(e,te)},m(J,oe){qt(J,e,oe),S&&S.m(e,null),Dt(e,t),un(o,e,null),Dt(e,l),O&&O.m(e,null),Dt(e,u),un(m,e,null),Dt(e,r),G&&G.m(e,null),i[80](e),x=!0,v||(C=[pr(w=Yf.call(null,e,{ripple:i[11],unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40]})),pr(b=Wo.call(null,e,i[8])),pr(i[34].call(null,e)),En(e,"SMUITextfieldLeadingIcon:mount",i[81]),En(e,"SMUITextfieldLeadingIcon:unmount",i[82]),En(e,"SMUITextfieldTrailingIcon:mount",i[83]),En(e,"SMUITextfieldTrailingIcon:unmount",i[84])],v=!0)},p(J,oe){S&&S.p&&(!x||oe[2]&268435456)&&Ar(S,T,J,J[90],x?Sr(T,J[90],oe,yP):kr(J[90]),Nb);const Me={};oe[2]&268435456&&(Me.$$scope={dirty:oe,ctx:J}),o.$set(Me),O&&O.p&&(!x||oe[2]&268435456)&&Ar(O,M,J,J[90],x?Sr(M,J[90],oe,null):kr(J[90]),null);const Fe={};oe[2]&268435456&&(Fe.$$scope={dirty:oe,ctx:J}),m.$set(Fe),G&&G.p&&(!x||oe[2]&268435456)&&Ar(G,V,J,J[90],x?Sr(V,J[90],oe,pP):kr(J[90]),Rb),dr(e,te=Tr(Z,[(!x||oe[0]&33673730|oe[1]&2048&&f!==(f=_r({[J[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":J[12],"mdc-text-field--textarea":J[14],"mdc-text-field--filled":J[15]==="filled","mdc-text-field--outlined":J[15]==="outlined","smui-text-field--standard":J[15]==="standard"&&!J[14],"mdc-text-field--no-label":J[16]||!J[42].label,"mdc-text-field--with-leading-icon":J[42].leadingIcon,"mdc-text-field--with-trailing-icon":J[42].trailingIcon,"mdc-text-field--invalid":J[1],...J[25]})))&&{class:f},(!x||oe[0]&67109888&&_!==(_=Object.entries(J[26]).map(n5).concat([J[10]]).join(" ")))&&{style:_},oe[1]&1024&&cf(J[41],["input$","label$","ripple$","outline$","helperLine$"])])),w&&So(w.update)&&oe[0]&2048&&w.update.call(null,{ripple:J[11],unbounded:!1,addClass:J[38],removeClass:J[39],addStyle:J[40]}),b&&So(b.update)&&oe[0]&256&&b.update.call(null,J[8])},i(J){x||(xt(S,J),xt(o.$$.fragment,J),xt(O,J),xt(m.$$.fragment,J),xt(G,J),x=!0)},o(J){Ft(S,J),Ft(o.$$.fragment,J),Ft(O,J),Ft(m.$$.fragment,J),Ft(G,J),x=!1},d(J){J&&Le(e),S&&S.d(J),cn(o),O&&O.d(J),cn(m),G&&G.d(J),i[80](null),v=!1,qo(C)}}}function CP(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V=!i[14]&&i[15]!=="outlined"&&Xb(i),G=(i[14]||i[15]==="outlined")&&Kb(i);l=new x1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[MP]},$$scope:{ctx:i}}});const Z=i[51].default,te=xr(Z,i,i[90],null),J=[OP,DP],oe=[];function Me(Se,me){return Se[14]&&typeof Se[0]=="string"?0:1}r=Me(i),f=oe[r]=J[r](i),w=new x1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[BP]},$$scope:{ctx:i}}});let Fe=!i[14]&&i[15]!=="outlined"&&i[11]&&e5(i),pe=[{class:x=_r({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||i[17]==null&&!i[42].label,"mdc-text-field--label-floating":i[28]||i[0]!=null&&i[0]!=="","mdc-text-field--with-leading-icon":i[35](i[22])?i[42].leadingIcon:i[22],"mdc-text-field--with-trailing-icon":i[35](i[23])?i[42].trailingIcon:i[23],"mdc-text-field--with-internal-counter":i[14]&&i[42].internalCounter,"mdc-text-field--invalid":i[1],...i[25]})},{style:v=Object.entries(i[26]).map(i5).concat([i[10]]).join(" ")},{for:void 0},cf(i[41],["input$","label$","ripple$","outline$","helperLine$"])],Ie={};for(let Se=0;Se<pe.length;Se+=1)Ie=en(Ie,pe[Se]);return{c(){e=zt("label"),V&&V.c(),t=Yi(),G&&G.c(),o=Yi(),ln(l.$$.fragment),u=Yi(),te&&te.c(),m=Yi(),f.c(),_=Yi(),ln(w.$$.fragment),b=Yi(),Fe&&Fe.c(),this.h()},l(Se){e=Nt(Se,"LABEL",{class:!0,style:!0,for:!0});var me=Gt(e);V&&V.l(me),t=Zi(me),G&&G.l(me),o=Zi(me),pn(l.$$.fragment,me),u=Zi(me),te&&te.l(me),m=Zi(me),f.l(me),_=Zi(me),pn(w.$$.fragment,me),b=Zi(me),Fe&&Fe.l(me),me.forEach(Le),this.h()},h(){dr(e,Ie)},m(Se,me){qt(Se,e,me),V&&V.m(e,null),Dt(e,t),G&&G.m(e,null),Dt(e,o),un(l,e,null),Dt(e,u),te&&te.m(e,null),Dt(e,m),oe[r].m(e,null),Dt(e,_),un(w,e,null),Dt(e,b),Fe&&Fe.m(e,null),i[73](e),S=!0,M||(O=[pr(C=Yf.call(null,e,{ripple:!i[14]&&i[15]==="filled",unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40],eventTarget:i[33],activeTarget:i[33],initPromise:i[37]})),pr(T=Wo.call(null,e,i[8])),pr(i[34].call(null,e)),En(e,"SMUITextfieldLeadingIcon:mount",i[74]),En(e,"SMUITextfieldLeadingIcon:unmount",i[75]),En(e,"SMUITextfieldTrailingIcon:mount",i[76]),En(e,"SMUITextfieldTrailingIcon:unmount",i[77]),En(e,"SMUITextfieldCharacterCounter:mount",i[78]),En(e,"SMUITextfieldCharacterCounter:unmount",i[79])],M=!0)},p(Se,me){!Se[14]&&Se[15]!=="outlined"?V?(V.p(Se,me),me[0]&49152&&xt(V,1)):(V=Xb(Se),V.c(),xt(V,1),V.m(e,t)):V&&(Rr(),Ft(V,1,1,()=>{V=null}),Fr()),Se[14]||Se[15]==="outlined"?G?(G.p(Se,me),me[0]&49152&&xt(G,1)):(G=Kb(Se),G.c(),xt(G,1),G.m(e,o)):G&&(Rr(),Ft(G,1,1,()=>{G=null}),Fr());const et={};me[2]&268435456&&(et.$$scope={dirty:me,ctx:Se}),l.$set(et),te&&te.p&&(!S||me[2]&268435456)&&Ar(te,Z,Se,Se[90],S?Sr(Z,Se[90],me,null):kr(Se[90]),null);let nt=r;r=Me(Se),r===nt?oe[r].p(Se,me):(Rr(),Ft(oe[nt],1,1,()=>{oe[nt]=null}),Fr(),f=oe[r],f?f.p(Se,me):(f=oe[r]=J[r](Se),f.c()),xt(f,1),f.m(e,_));const Et={};me[2]&268435456&&(Et.$$scope={dirty:me,ctx:Se}),w.$set(Et),!Se[14]&&Se[15]!=="outlined"&&Se[11]?Fe?(Fe.p(Se,me),me[0]&51200&&xt(Fe,1)):(Fe=e5(Se),Fe.c(),xt(Fe,1),Fe.m(e,null)):Fe&&(Rr(),Ft(Fe,1,1,()=>{Fe=null}),Fr()),dr(e,Ie=Tr(pe,[(!S||me[0]&314823171|me[1]&2048&&x!==(x=_r({[Se[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":Se[12],"mdc-text-field--textarea":Se[14],"mdc-text-field--filled":Se[15]==="filled","mdc-text-field--outlined":Se[15]==="outlined","smui-text-field--standard":Se[15]==="standard"&&!Se[14],"mdc-text-field--no-label":Se[16]||Se[17]==null&&!Se[42].label,"mdc-text-field--label-floating":Se[28]||Se[0]!=null&&Se[0]!=="","mdc-text-field--with-leading-icon":Se[35](Se[22])?Se[42].leadingIcon:Se[22],"mdc-text-field--with-trailing-icon":Se[35](Se[23])?Se[42].trailingIcon:Se[23],"mdc-text-field--with-internal-counter":Se[14]&&Se[42].internalCounter,"mdc-text-field--invalid":Se[1],...Se[25]})))&&{class:x},(!S||me[0]&67109888&&v!==(v=Object.entries(Se[26]).map(i5).concat([Se[10]]).join(" ")))&&{style:v},{for:void 0},me[1]&1024&&cf(Se[41],["input$","label$","ripple$","outline$","helperLine$"])])),C&&So(C.update)&&me[0]&49152|me[1]&4&&C.update.call(null,{ripple:!Se[14]&&Se[15]==="filled",unbounded:!1,addClass:Se[38],removeClass:Se[39],addStyle:Se[40],eventTarget:Se[33],activeTarget:Se[33],initPromise:Se[37]}),T&&So(T.update)&&me[0]&256&&T.update.call(null,Se[8])},i(Se){S||(xt(V),xt(G),xt(l.$$.fragment,Se),xt(te,Se),xt(f),xt(w.$$.fragment,Se),xt(Fe),S=!0)},o(Se){Ft(V),Ft(G),Ft(l.$$.fragment,Se),Ft(te,Se),Ft(f),Ft(w.$$.fragment,Se),Ft(Fe),S=!1},d(Se){Se&&Le(e),V&&V.d(),G&&G.d(),cn(l),te&&te.d(Se),oe[r].d(),cn(w),Fe&&Fe.d(),i[73](null),M=!1,qo(O)}}}function EP(i){let e;const t=i[51].leadingIcon,o=xr(t,i,i[90],zb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&Ar(o,t,l,l[90],e?Sr(t,l[90],u,gP):kr(l[90]),zb)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function IP(i){let e;const t=i[51].trailingIcon,o=xr(t,i,i[90],Bb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&Ar(o,t,l,l[90],e?Sr(t,l[90],u,mP):kr(l[90]),Bb)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function Xb(i){let e,t,o,l=i[15]==="filled"&&Yb(),u=!i[16]&&(i[17]!=null||i[42].label)&&Zb(i);return{c(){l&&l.c(),e=Yi(),u&&u.c(),t=gn()},l(m){l&&l.l(m),e=Zi(m),u&&u.l(m),t=gn()},m(m,r){l&&l.m(m,r),qt(m,e,r),u&&u.m(m,r),qt(m,t,r),o=!0},p(m,r){m[15]==="filled"?l||(l=Yb(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),!m[16]&&(m[17]!=null||m[42].label)?u?(u.p(m,r),r[0]&196608|r[1]&2048&&xt(u,1)):(u=Zb(m),u.c(),xt(u,1),u.m(t.parentNode,t)):u&&(Rr(),Ft(u,1,1,()=>{u=null}),Fr())},i(m){o||(xt(u),o=!0)},o(m){Ft(u),o=!1},d(m){l&&l.d(m),m&&Le(e),u&&u.d(m),m&&Le(t)}}}function Yb(i){let e;return{c(){e=zt("span"),this.h()},l(t){e=Nt(t,"SPAN",{class:!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","mdc-text-field__ripple")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function Zb(i){let e,t;const o=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},fo(i[41],"label$")];let l={$$slots:{default:[TP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new Y1({props:l}),i[52](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[0]&268443649|m[1]&1024?Tr(o,[m[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},m[0]&8192&&{required:u[13]},o[2],m[1]&1024&&ko(fo(u[41],"label$"))]):{};m[0]&131072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[52](null),cn(e,u)}}}function TP(i){let e=(i[17]==null?"":i[17])+"",t,o;const l=i[51].label,u=xr(l,i,i[90],Wb);return{c(){t=Xn(e),u&&u.c()},l(m){t=Yn(m,e),u&&u.l(m)},m(m,r){qt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&131072)&&e!==(e=(m[17]==null?"":m[17])+"")&&Jo(t,e),u&&u.p&&(!o||r[2]&268435456)&&Ar(u,l,m,m[90],o?Sr(l,m[90],r,kP):kr(m[90]),Wb)},i(m){o||(xt(u,m),o=!0)},o(m){Ft(u,m),o=!1},d(m){m&&Le(t),u&&u.d(m)}}}function Kb(i){let e,t;const o=[{noLabel:i[16]||i[17]==null&&!i[42].label},fo(i[41],"outline$")];let l={$$slots:{default:[PP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new E3({props:l}),i[54](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[0]&196608|m[1]&3072?Tr(o,[m[0]&196608|m[1]&2048&&{noLabel:u[16]||u[17]==null&&!u[42].label},m[1]&1024&&ko(fo(u[41],"outline$"))]):{};m[0]&268640289|m[1]&3072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[54](null),cn(e,u)}}}function Jb(i){let e,t;const o=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},fo(i[41],"label$")];let l={$$slots:{default:[LP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new Y1({props:l}),i[53](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[0]&268443649|m[1]&1024?Tr(o,[m[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},m[0]&8192&&{required:u[13]},o[2],m[1]&1024&&ko(fo(u[41],"label$"))]):{};m[0]&131072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[53](null),cn(e,u)}}}function LP(i){let e=(i[17]==null?"":i[17])+"",t,o;const l=i[51].label,u=xr(l,i,i[90],Gb);return{c(){t=Xn(e),u&&u.c()},l(m){t=Yn(m,e),u&&u.l(m)},m(m,r){qt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&131072)&&e!==(e=(m[17]==null?"":m[17])+"")&&Jo(t,e),u&&u.p&&(!o||r[2]&268435456)&&Ar(u,l,m,m[90],o?Sr(l,m[90],r,AP):kr(m[90]),Gb)},i(m){o||(xt(u,m),o=!0)},o(m){Ft(u,m),o=!1},d(m){m&&Le(t),u&&u.d(m)}}}function PP(i){let e,t,o=!i[16]&&(i[17]!=null||i[42].label)&&Jb(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,u){!l[16]&&(l[17]!=null||l[42].label)?o?(o.p(l,u),u[0]&196608|u[1]&2048&&xt(o,1)):(o=Jb(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function MP(i){let e;const t=i[51].leadingIcon,o=xr(t,i,i[90],Hb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&Ar(o,t,l,l[90],e?Sr(t,l[90],u,xP):kr(l[90]),Hb)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function DP(i){let e,t,o,l,u,m,r,f,_,w;const b=i[51].prefix,x=xr(b,i,i[90],Vb);let v=i[20]!=null&&Qb(i);const C=[{type:i[18]},{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},i[16]&&i[17]!=null?{placeholder:i[17]}:{},fo(i[41],"input$")];function T(J){i[64](J)}function S(J){i[65](J)}function M(J){i[66](J)}function O(J){i[67](J)}let V={};for(let J=0;J<C.length;J+=1)V=en(V,C[J]);i[0]!==void 0&&(V.value=i[0]),i[3]!==void 0&&(V.files=i[3]),i[4]!==void 0&&(V.dirty=i[4]),i[1]!==void 0&&(V.invalid=i[1]),o=new uP({props:V}),i[63](o),In.push(()=>To(o,"value",T)),In.push(()=>To(o,"files",S)),In.push(()=>To(o,"dirty",M)),In.push(()=>To(o,"invalid",O)),o.$on("blur",i[68]),o.$on("focus",i[69]),o.$on("blur",i[70]),o.$on("focus",i[71]);let G=i[21]!=null&&$b(i);const Z=i[51].suffix,te=xr(Z,i,i[90],Ub);return{c(){x&&x.c(),e=Yi(),v&&v.c(),t=Yi(),ln(o.$$.fragment),f=Yi(),G&&G.c(),_=Yi(),te&&te.c()},l(J){x&&x.l(J),e=Zi(J),v&&v.l(J),t=Zi(J),pn(o.$$.fragment,J),f=Zi(J),G&&G.l(J),_=Zi(J),te&&te.l(J)},m(J,oe){x&&x.m(J,oe),qt(J,e,oe),v&&v.m(J,oe),qt(J,t,oe),un(o,J,oe),qt(J,f,oe),G&&G.m(J,oe),qt(J,_,oe),te&&te.m(J,oe),w=!0},p(J,oe){x&&x.p&&(!w||oe[2]&268435456)&&Ar(x,b,J,J[90],w?Sr(b,J[90],oe,bP):kr(J[90]),Vb),J[20]!=null?v?(v.p(J,oe),oe[0]&1048576&&xt(v,1)):(v=Qb(J),v.c(),xt(v,1),v.m(t.parentNode,t)):v&&(Rr(),Ft(v,1,1,()=>{v=null}),Fr());const Me=oe[0]&135213056|oe[1]&1024?Tr(C,[oe[0]&262144&&{type:J[18]},oe[0]&4096&&{disabled:J[12]},oe[0]&8192&&{required:J[13]},oe[0]&524288&&{updateInvalid:J[19]},oe[0]&134217728&&{"aria-controls":J[27]},oe[0]&134217728&&{"aria-describedby":J[27]},oe[0]&196608&&ko(J[16]&&J[17]!=null?{placeholder:J[17]}:{}),oe[1]&1024&&ko(fo(J[41],"input$"))]):{};!l&&oe[0]&1&&(l=!0,Me.value=J[0],Lo(()=>l=!1)),!u&&oe[0]&8&&(u=!0,Me.files=J[3],Lo(()=>u=!1)),!m&&oe[0]&16&&(m=!0,Me.dirty=J[4],Lo(()=>m=!1)),!r&&oe[0]&2&&(r=!0,Me.invalid=J[1],Lo(()=>r=!1)),o.$set(Me),J[21]!=null?G?(G.p(J,oe),oe[0]&2097152&&xt(G,1)):(G=$b(J),G.c(),xt(G,1),G.m(_.parentNode,_)):G&&(Rr(),Ft(G,1,1,()=>{G=null}),Fr()),te&&te.p&&(!w||oe[2]&268435456)&&Ar(te,Z,J,J[90],w?Sr(Z,J[90],oe,vP):kr(J[90]),Ub)},i(J){w||(xt(x,J),xt(v),xt(o.$$.fragment,J),xt(G),xt(te,J),w=!0)},o(J){Ft(x,J),Ft(v),Ft(o.$$.fragment,J),Ft(G),Ft(te,J),w=!1},d(J){x&&x.d(J),J&&Le(e),v&&v.d(J),J&&Le(t),i[63](null),cn(o,J),J&&Le(f),G&&G.d(J),J&&Le(_),te&&te.d(J)}}}function OP(i){let e,t,o,l,u,m,r,f;const _=[{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},fo(i[41],"input$")];function w(S){i[56](S)}function b(S){i[57](S)}function x(S){i[58](S)}let v={};for(let S=0;S<_.length;S+=1)v=en(v,_[S]);i[0]!==void 0&&(v.value=i[0]),i[4]!==void 0&&(v.dirty=i[4]),i[1]!==void 0&&(v.invalid=i[1]),t=new fP({props:v}),i[55](t),In.push(()=>To(t,"value",w)),In.push(()=>To(t,"dirty",b)),In.push(()=>To(t,"invalid",x)),t.$on("blur",i[59]),t.$on("focus",i[60]),t.$on("blur",i[61]),t.$on("focus",i[62]);const C=i[51].internalCounter,T=xr(C,i,i[90],qb);return{c(){e=zt("span"),ln(t.$$.fragment),m=Yi(),T&&T.c(),this.h()},l(S){e=Nt(S,"SPAN",{class:!0});var M=Gt(e);pn(t.$$.fragment,M),m=Zi(M),T&&T.l(M),M.forEach(Le),this.h()},h(){Ht(e,"class",r=_r({"mdc-text-field__resizer":!("input$resizable"in i[41])||i[41].input$resizable}))},m(S,M){qt(S,e,M),un(t,e,null),Dt(e,m),T&&T.m(e,null),f=!0},p(S,M){const O=M[0]&134754304|M[1]&1024?Tr(_,[M[0]&4096&&{disabled:S[12]},M[0]&8192&&{required:S[13]},M[0]&524288&&{updateInvalid:S[19]},M[0]&134217728&&{"aria-controls":S[27]},M[0]&134217728&&{"aria-describedby":S[27]},M[1]&1024&&ko(fo(S[41],"input$"))]):{};!o&&M[0]&1&&(o=!0,O.value=S[0],Lo(()=>o=!1)),!l&&M[0]&16&&(l=!0,O.dirty=S[4],Lo(()=>l=!1)),!u&&M[0]&2&&(u=!0,O.invalid=S[1],Lo(()=>u=!1)),t.$set(O),T&&T.p&&(!f||M[2]&268435456)&&Ar(T,C,S,S[90],f?Sr(C,S[90],M,wP):kr(S[90]),qb),(!f||M[1]&1024&&r!==(r=_r({"mdc-text-field__resizer":!("input$resizable"in S[41])||S[41].input$resizable})))&&Ht(e,"class",r)},i(S){f||(xt(t.$$.fragment,S),xt(T,S),f=!0)},o(S){Ft(t.$$.fragment,S),Ft(T,S),f=!1},d(S){S&&Le(e),i[55](null),cn(t),T&&T.d(S)}}}function Qb(i){let e,t;return e=new rP({props:{$$slots:{default:[FP]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l[0]&1048576|l[2]&268435456&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function FP(i){let e;return{c(){e=Xn(i[20])},l(t){e=Yn(t,i[20])},m(t,o){qt(t,e,o)},p(t,o){o[0]&1048576&&Jo(e,t[20])},d(t){t&&Le(e)}}}function $b(i){let e,t;return e=new oP({props:{$$slots:{default:[RP]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l[0]&2097152|l[2]&268435456&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function RP(i){let e;return{c(){e=Xn(i[21])},l(t){e=Yn(t,i[21])},m(t,o){qt(t,e,o)},p(t,o){o[0]&2097152&&Jo(e,t[21])},d(t){t&&Le(e)}}}function BP(i){let e;const t=i[51].trailingIcon,o=xr(t,i,i[90],jb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&Ar(o,t,l,l[90],e?Sr(t,l[90],u,_P):kr(l[90]),jb)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function e5(i){let e,t;const o=[fo(i[41],"ripple$")];let l={};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new C3({props:l}),i[72](e),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[1]&1024?Tr(o,[ko(fo(u[41],"ripple$"))]):{};e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){i[72](null),cn(e,u)}}}function t5(i){let e,t;const o=[fo(i[41],"helperLine$")];let l={$$slots:{default:[zP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=en(l,o[u]);return e=new nP({props:l}),e.$on("SMUITextfieldHelperText:id",i[85]),e.$on("SMUITextfieldHelperText:mount",i[86]),e.$on("SMUITextfieldHelperText:unmount",i[87]),e.$on("SMUITextfieldCharacterCounter:mount",i[88]),e.$on("SMUITextfieldCharacterCounter:unmount",i[89]),{c(){ln(e.$$.fragment)},l(u){pn(e.$$.fragment,u)},m(u,m){un(e,u,m),t=!0},p(u,m){const r=m[1]&1024?Tr(o,[ko(fo(u[41],"helperLine$"))]):{};m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(xt(e.$$.fragment,u),t=!0)},o(u){Ft(e.$$.fragment,u),t=!1},d(u){cn(e,u)}}}function zP(i){let e;const t=i[51].helper,o=xr(t,i,i[90],Fb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&Ar(o,t,l,l[90],e?Sr(t,l[90],u,dP):kr(l[90]),Fb)},i(l){e||(xt(o,l),e=!0)},o(l){Ft(o,l),e=!1},d(l){o&&o.d(l)}}}function NP(i){let e,t,o,l,u;const m=[CP,SP],r=[];function f(w,b){return w[36]?0:1}e=f(i),t=r[e]=m[e](i);let _=i[42].helper&&t5(i);return{c(){t.c(),o=Yi(),_&&_.c(),l=gn()},l(w){t.l(w),o=Zi(w),_&&_.l(w),l=gn()},m(w,b){r[e].m(w,b),qt(w,o,b),_&&_.m(w,b),qt(w,l,b),u=!0},p(w,b){t.p(w,b),w[42].helper?_?(_.p(w,b),b[1]&2048&&xt(_,1)):(_=t5(w),_.c(),xt(_,1),_.m(l.parentNode,l)):_&&(Rr(),Ft(_,1,1,()=>{_=null}),Fr())},i(w){u||(xt(t),xt(_),u=!0)},o(w){Ft(t),Ft(_),u=!1},d(w){r[e].d(w),w&&Le(o),_&&_.d(w),w&&Le(l)}}}const i5=([i,e])=>`${i}: ${e};`,n5=([i,e])=>`${i}: ${e};`;function jP(i,e,t){let o;const l=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let u=or(e,l),{$$slots:m={},$$scope:r}=e;const f=hw(m),{applyPassive:_}=pw,w=No(zo());let b=()=>{};function x(yt){return yt===b}let{use:v=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:S=!0}=e,{disabled:M=!1}=e,{required:O=!1}=e,{textarea:V=!1}=e,{variant:G=V?"outlined":"standard"}=e,{noLabel:Z=!1}=e,{label:te=void 0}=e,{type:J="text"}=e,{value:oe=u.input$emptyValueUndefined?void 0:b}=e,{files:Me=b}=e;const Fe=!x(oe)||!x(Me);x(oe)&&(oe=void 0),x(Me)&&(Me=null);let{invalid:pe=b}=e,{updateInvalid:Ie=x(pe)}=e;x(pe)&&(pe=!1);let{dirty:Se=!1}=e,{prefix:me=void 0}=e,{suffix:et=void 0}=e,{validateOnValueChange:nt=Ie}=e,{useNativeValidation:Et=Ie}=e,{withLeadingIcon:it=b}=e,{withTrailingIcon:we=b}=e,{input:ke=void 0}=e,{floatingLabel:Oe=void 0}=e,{lineRipple:le=void 0}=e,{notchedOutline:Ce=void 0}=e,he,ge,Be={},We={},st,Xe=!1,gt=Zs("SMUI:addLayoutListener"),Pt,ri,ut=new Promise(yt=>ri=yt),bt,vt,Ke,ei,li=oe;gt&&(Pt=gt(Ci)),Ds(()=>{if(t(49,ge=new iP({addClass:Si,removeClass:Ti,hasClass:$t,registerTextFieldInteractionHandler:(yt,Ri)=>ti().addEventListener(yt,Ri),deregisterTextFieldInteractionHandler:(yt,Ri)=>ti().removeEventListener(yt,Ri),registerValidationAttributeChangeHandler:yt=>{const Ri=An=>An.map(wt=>wt.attributeName).filter(wt=>wt),Ii=new MutationObserver(An=>{Et&&yt(Ri(An))}),Sn={attributes:!0};return ke&&Ii.observe(ke.getElement(),Sn),Ii},deregisterValidationAttributeChangeHandler:yt=>{yt.disconnect()},getNativeInput:()=>{var yt;return(yt=ke==null?void 0:ke.getElement())!==null&&yt!==void 0?yt:null},setInputAttr:(yt,Ri)=>{ke==null||ke.addAttr(yt,Ri)},removeInputAttr:yt=>{ke==null||ke.removeAttr(yt)},isFocused:()=>document.activeElement===(ke==null?void 0:ke.getElement()),registerInputInteractionHandler:(yt,Ri)=>{ke==null||ke.getElement().addEventListener(yt,Ri,_())},deregisterInputInteractionHandler:(yt,Ri)=>{ke==null||ke.getElement().removeEventListener(yt,Ri,_())},floatLabel:yt=>Oe&&Oe.float(yt),getLabelWidth:()=>Oe?Oe.getWidth():0,hasLabel:()=>!!Oe,shakeLabel:yt=>Oe&&Oe.shake(yt),setLabelRequired:yt=>Oe&&Oe.setRequired(yt),activateLineRipple:()=>le&&le.activate(),deactivateLineRipple:()=>le&&le.deactivate(),setLineRippleTransformOrigin:yt=>le&&le.setRippleCenter(yt),closeOutline:()=>Ce&&Ce.closeNotch(),hasOutline:()=>!!Ce,notchOutline:yt=>Ce&&Ce.notch(yt)},{get helperText(){return Ke},get characterCounter(){return ei},get leadingIcon(){return bt},get trailingIcon(){return vt}})),Fe){if(ke==null)throw new Error("SMUI Textfield initialized without Input component.");ge.init()}else Ax().then(()=>{if(ke==null)throw new Error("SMUI Textfield initialized without Input component.");ge.init()});return ri(),()=>{ge.destroy()}}),nh(()=>{Pt&&Pt()});function $t(yt){var Ri;return yt in Be?(Ri=Be[yt])!==null&&Ri!==void 0?Ri:null:ti().classList.contains(yt)}function Si(yt){Be[yt]||t(25,Be[yt]=!0,Be)}function Ti(yt){(!(yt in Be)||Be[yt])&&t(25,Be[yt]=!1,Be)}function Yt(yt,Ri){We[yt]!=Ri&&(Ri===""||Ri==null?(delete We[yt],t(26,We)):t(26,We[yt]=Ri,We))}function mi(){ke==null||ke.focus()}function Wi(){ke==null||ke.blur()}function Ci(){if(ge){const yt=ge.shouldFloat;ge.notchOutline(yt)}}function ti(){return he}function Pe(yt){In[yt?"unshift":"push"](()=>{Oe=yt,t(5,Oe)})}function Q(yt){In[yt?"unshift":"push"](()=>{Oe=yt,t(5,Oe)})}function ae(yt){In[yt?"unshift":"push"](()=>{Ce=yt,t(7,Ce)})}function Qe(yt){In[yt?"unshift":"push"](()=>{ke=yt,t(2,ke)})}function _t(yt){oe=yt,t(0,oe)}function Jt(yt){Se=yt,t(4,Se)}function di(yt){pe=yt,t(1,pe),t(49,ge),t(19,Ie)}const wn=()=>t(28,Xe=!1),Ln=()=>t(28,Xe=!0),hn=yt=>cs(he,"blur",yt),Bi=yt=>cs(he,"focus",yt);function Xi(yt){In[yt?"unshift":"push"](()=>{ke=yt,t(2,ke)})}function Hn(yt){oe=yt,t(0,oe)}function Gn(yt){Me=yt,t(3,Me)}function Zr(yt){Se=yt,t(4,Se)}function zn(yt){pe=yt,t(1,pe),t(49,ge),t(19,Ie)}const fn=()=>t(28,Xe=!1),yn=()=>t(28,Xe=!0),tn=yt=>cs(he,"blur",yt),wr=yt=>cs(he,"focus",yt);function Wn(yt){In[yt?"unshift":"push"](()=>{le=yt,t(6,le)})}function lr(yt){In[yt?"unshift":"push"](()=>{he=yt,t(24,he)})}const Kr=yt=>t(29,bt=yt.detail),rn=()=>t(29,bt=void 0),He=yt=>t(30,vt=yt.detail),yo=()=>t(30,vt=void 0),_o=yt=>t(32,ei=yt.detail),co=()=>t(32,ei=void 0);function Te(yt){In[yt?"unshift":"push"](()=>{he=yt,t(24,he)})}const Ee=yt=>t(29,bt=yt.detail),qe=()=>t(29,bt=void 0),ct=yt=>t(30,vt=yt.detail),dt=()=>t(30,vt=void 0),jt=yt=>t(27,st=yt.detail),Ge=yt=>t(31,Ke=yt.detail),Zt=()=>{t(27,st=void 0),t(31,Ke=void 0)},Rt=yt=>t(32,ei=yt.detail),oi=()=>t(32,ei=void 0);return i.$$set=yt=>{e=en(en({},e),Po(yt)),t(41,u=or(e,l)),"use"in yt&&t(8,v=yt.use),"class"in yt&&t(9,C=yt.class),"style"in yt&&t(10,T=yt.style),"ripple"in yt&&t(11,S=yt.ripple),"disabled"in yt&&t(12,M=yt.disabled),"required"in yt&&t(13,O=yt.required),"textarea"in yt&&t(14,V=yt.textarea),"variant"in yt&&t(15,G=yt.variant),"noLabel"in yt&&t(16,Z=yt.noLabel),"label"in yt&&t(17,te=yt.label),"type"in yt&&t(18,J=yt.type),"value"in yt&&t(0,oe=yt.value),"files"in yt&&t(3,Me=yt.files),"invalid"in yt&&t(1,pe=yt.invalid),"updateInvalid"in yt&&t(19,Ie=yt.updateInvalid),"dirty"in yt&&t(4,Se=yt.dirty),"prefix"in yt&&t(20,me=yt.prefix),"suffix"in yt&&t(21,et=yt.suffix),"validateOnValueChange"in yt&&t(43,nt=yt.validateOnValueChange),"useNativeValidation"in yt&&t(44,Et=yt.useNativeValidation),"withLeadingIcon"in yt&&t(22,it=yt.withLeadingIcon),"withTrailingIcon"in yt&&t(23,we=yt.withTrailingIcon),"input"in yt&&t(2,ke=yt.input),"floatingLabel"in yt&&t(5,Oe=yt.floatingLabel),"lineRipple"in yt&&t(6,le=yt.lineRipple),"notchedOutline"in yt&&t(7,Ce=yt.notchedOutline),"$$scope"in yt&&t(90,r=yt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&t(33,o=ke&&ke.getElement()),i.$$.dirty[0]&524290|i.$$.dirty[1]&262144&&ge&&ge.isValid()!==!pe&&(Ie?t(1,pe=!ge.isValid()):ge.setValid(!pe)),i.$$.dirty[1]&266240&&ge&&ge.getValidateOnValueChange()!==nt&&ge.setValidateOnValueChange(x(nt)?!1:nt),i.$$.dirty[1]&270336&&ge&&ge.setUseNativeValidation(x(Et)?!0:Et),i.$$.dirty[0]&4096|i.$$.dirty[1]&262144&&ge&&ge.setDisabled(M),i.$$.dirty[0]&1|i.$$.dirty[1]&786432&&ge&&Fe&&li!==oe){t(50,li=oe);const yt=`${oe}`;ge.getValue()!==yt&&ge.setValue(yt)}},[oe,pe,ke,Me,Se,Oe,le,Ce,v,C,T,S,M,O,V,G,Z,te,J,Ie,me,et,it,we,he,Be,We,st,Xe,bt,vt,Ke,ei,o,w,x,Fe,ut,Si,Ti,Yt,u,f,nt,Et,mi,Wi,Ci,ti,ge,li,m,Pe,Q,ae,Qe,_t,Jt,di,wn,Ln,hn,Bi,Xi,Hn,Gn,Zr,zn,fn,yn,tn,wr,Wn,lr,Kr,rn,He,yo,_o,co,Te,Ee,qe,ct,dt,jt,Ge,Zt,Rt,oi,r]}class df extends vr{constructor(e){super(),br(this,e,jP,NP,mr,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}function r5(i,e,t){const o=i.slice();return o[17]=e[t],o[18]=e,o[19]=t,o}function o5(i,e,t){const o=i.slice();return o[20]=e[t],o}function UP(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G;function Z(me){i[10](me)}let te={label:"Means of Transport",style:"width:100%",$$slots:{default:[qP]},$$scope:{ctx:i}};i[4]!==void 0&&(te.value=i[4]),o=new I3({props:te}),In.push(()=>To(o,"value",Z));function J(me){i[11](me)}let oe={label:"Longitude",readonly:!0};i[1]!==void 0&&(oe.value=i[1]),r=new df({props:oe}),In.push(()=>To(r,"value",J));function Me(me){i[12](me)}let Fe={label:"Latitude",readonly:!0};i[2]!==void 0&&(Fe.value=i[2]),w=new df({props:Fe}),In.push(()=>To(w,"value",Me));let pe=i[3],Ie=[];for(let me=0;me<pe.length;me+=1)Ie[me]=a5(r5(i,pe,me));const Se=me=>Ft(Ie[me],1,1,()=>{Ie[me]=null});return S=new Zf({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[YP]},$$scope:{ctx:i}}}),S.$on("click",i[15]),V=new Zf({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[JP]},$$scope:{ctx:i}}}),V.$on("click",i[16]),{c(){e=zt("div"),t=zt("div"),ln(o.$$.fragment),u=Yi(),m=zt("div"),ln(r.$$.fragment),_=Yi(),ln(w.$$.fragment),x=Yi(),v=zt("div");for(let me=0;me<Ie.length;me+=1)Ie[me].c();C=Yi(),T=zt("div"),ln(S.$$.fragment),M=Yi(),O=zt("div"),ln(V.$$.fragment),this.h()},l(me){e=Nt(me,"DIV",{class:!0});var et=Gt(e);t=Nt(et,"DIV",{});var nt=Gt(t);pn(o.$$.fragment,nt),nt.forEach(Le),u=Zi(et),m=Nt(et,"DIV",{style:!0});var Et=Gt(m);pn(r.$$.fragment,Et),_=Zi(Et),pn(w.$$.fragment,Et),Et.forEach(Le),et.forEach(Le),x=Zi(me),v=Nt(me,"DIV",{style:!0});var it=Gt(v);for(let Oe=0;Oe<Ie.length;Oe+=1)Ie[Oe].l(it);it.forEach(Le),C=Zi(me),T=Nt(me,"DIV",{class:!0});var we=Gt(T);pn(S.$$.fragment,we),we.forEach(Le),M=Zi(me),O=Nt(me,"DIV",{class:!0});var ke=Gt(O);pn(V.$$.fragment,ke),ke.forEach(Le),this.h()},h(){ec(m,"display","inline-flex"),Ht(e,"class","transport-select svelte-1dgq3qf"),ec(v,"display","inline-flex"),Ht(T,"class","tool-button svelte-1dgq3qf"),Ht(O,"class","tool-button svelte-1dgq3qf")},m(me,et){qt(me,e,et),Dt(e,t),un(o,t,null),Dt(e,u),Dt(e,m),un(r,m,null),Dt(m,_),un(w,m,null),qt(me,x,et),qt(me,v,et);for(let nt=0;nt<Ie.length;nt+=1)Ie[nt].m(v,null);qt(me,C,et),qt(me,T,et),un(S,T,null),qt(me,M,et),qt(me,O,et),un(V,O,null),G=!0},p(me,et){const nt={};et&8388608&&(nt.$$scope={dirty:et,ctx:me}),!l&&et&16&&(l=!0,nt.value=me[4],Lo(()=>l=!1)),o.$set(nt);const Et={};!f&&et&2&&(f=!0,Et.value=me[1],Lo(()=>f=!1)),r.$set(Et);const it={};if(!b&&et&4&&(b=!0,it.value=me[2],Lo(()=>b=!1)),w.$set(it),et&9){pe=me[3];let Oe;for(Oe=0;Oe<pe.length;Oe+=1){const le=r5(me,pe,Oe);Ie[Oe]?(Ie[Oe].p(le,et),xt(Ie[Oe],1)):(Ie[Oe]=a5(le),Ie[Oe].c(),xt(Ie[Oe],1),Ie[Oe].m(v,null))}for(Rr(),Oe=pe.length;Oe<Ie.length;Oe+=1)Se(Oe);Fr()}const we={};et&8388608&&(we.$$scope={dirty:et,ctx:me}),S.$set(we);const ke={};et&8388608&&(ke.$$scope={dirty:et,ctx:me}),V.$set(ke)},i(me){if(!G){xt(o.$$.fragment,me),xt(r.$$.fragment,me),xt(w.$$.fragment,me);for(let et=0;et<pe.length;et+=1)xt(Ie[et]);xt(S.$$.fragment,me),xt(V.$$.fragment,me),G=!0}},o(me){Ft(o.$$.fragment,me),Ft(r.$$.fragment,me),Ft(w.$$.fragment,me),Ie=Ie.filter(Boolean);for(let et=0;et<Ie.length;et+=1)Ft(Ie[et]);Ft(S.$$.fragment,me),Ft(V.$$.fragment,me),G=!1},d(me){me&&Le(e),cn(o),cn(r),cn(w),me&&Le(x),me&&Le(v),oa(Ie,me),me&&Le(C),me&&Le(T),cn(S),me&&Le(M),me&&Le(O),cn(V)}}}function VP(i){let e=i[20].label+"",t;return{c(){t=Xn(e)},l(o){t=Yn(o,e)},m(o,l){qt(o,t,l)},p:eo,d(o){o&&Le(t)}}}function s5(i){let e,t;return e=new T3({props:{value:i[20].value,$$slots:{default:[VP]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l&8388608&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function qP(i){let e,t,o=i[5],l=[];for(let m=0;m<o.length;m+=1)l[m]=s5(o5(i,o,m));const u=m=>Ft(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);qt(m,e,r),t=!0},p(m,r){if(r&32){o=m[5];let f;for(f=0;f<o.length;f+=1){const _=o5(m,o,f);l[f]?(l[f].p(_,r),xt(l[f],1)):(l[f]=s5(_),l[f].c(),xt(l[f],1),l[f].m(e.parentNode,e))}for(Rr(),f=o.length;f<l.length;f+=1)u(f);Fr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)xt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Ft(l[r]);t=!1},d(m){oa(l,m),m&&Le(e)}}}function HP(i){let e,t,o;function l(m){i[14](m,i[17])}let u={label:i[17].distance+" km",type:"number"};return i[17].distance!==void 0&&(u.value=i[17].distance),e=new df({props:u}),In.push(()=>To(e,"value",l)),{c(){ln(e.$$.fragment)},l(m){pn(e.$$.fragment,m)},m(m,r){un(e,m,r),o=!0},p(m,r){i=m;const f={};r&8&&(f.label=i[17].distance+" km"),!t&&r&8&&(t=!0,f.value=i[17].distance,Lo(()=>t=!1)),e.$set(f)},i(m){o||(xt(e.$$.fragment,m),o=!0)},o(m){Ft(e.$$.fragment,m),o=!1},d(m){cn(e,m)}}}function GP(i){let e,t,o;function l(m){i[13](m,i[17])}let u={label:i[17].time+" min",type:"number"};return i[17].time!==void 0&&(u.value=i[17].time),e=new df({props:u}),In.push(()=>To(e,"value",l)),{c(){ln(e.$$.fragment)},l(m){pn(e.$$.fragment,m)},m(m,r){un(e,m,r),o=!0},p(m,r){i=m;const f={};r&8&&(f.label=i[17].time+" min"),!t&&r&8&&(t=!0,f.value=i[17].time,Lo(()=>t=!1)),e.$set(f)},i(m){o||(xt(e.$$.fragment,m),o=!0)},o(m){Ft(e.$$.fragment,m),o=!1},d(m){cn(e,m)}}}function a5(i){let e,t,o,l;const u=[GP,HP],m=[];function r(f,_){return f[0]===Yc.Time?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(f){t.l(f),o=gn()},m(f,_){m[e].m(f,_),qt(f,o,_),l=!0},p(f,_){let w=e;e=r(f),e===w?m[e].p(f,_):(Rr(),Ft(m[w],1,1,()=>{m[w]=null}),Fr(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),xt(t,1),t.m(o.parentNode,o))},i(f){l||(xt(t),l=!0)},o(f){Ft(t),l=!1},d(f){m[e].d(f),f&&Le(o)}}}function WP(i){let e;return{c(){e=Xn("straighten")},l(t){e=Yn(t,"straighten")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function XP(i){let e;return{c(){e=Xn("Calculate")},l(t){e=Yn(t,"Calculate")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function YP(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[WP]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[XP]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&8388608&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&8388608&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function ZP(i){let e;return{c(){e=Xn("delete")},l(t){e=Yn(t,"delete")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function KP(i){let e;return{c(){e=Xn("Clear")},l(t){e=Yn(t,"Clear")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function JP(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[ZP]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[KP]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&8388608&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&8388608&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function QP(i){let e,t,o=fr.valhalla&&UP(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,[u]){fr.valhalla&&o.p(l,u)},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function $P(i,e,t){var G;let o,l;As(i,Fm,Z=>t(8,o=Z)),As(i,nu,Z=>t(9,l=Z));let{contourType:u}=e,m,r,f=(G=fr.valhalla)==null?void 0:G.options.Contours;f||(f=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);let _=[{value:Z0.Walking,label:"Walking"},{value:Z0.Bicycle,label:"Bicycle"},{value:Z0.Car,label:"Car"}],w=_[0].value;const b=Z=>{o[Z].getIsochrone(Number(m),Number(r),Z,w,JSON.parse(JSON.stringify(f)))},x=()=>{o[u].clearFeatures()};function v(Z){w=Z,t(4,w)}function C(Z){m=Z,t(1,m),t(9,l),t(8,o),t(0,u)}function T(Z){r=Z,t(2,r),t(9,l),t(8,o),t(0,u)}function S(Z,te){i.$$.not_equal(te.time,Z)&&(te.time=Z,t(3,f))}function M(Z,te){i.$$.not_equal(te.distance,Z)&&(te.distance=Z,t(3,f))}const O=()=>b(u),V=()=>x();return i.$$set=Z=>{"contourType"in Z&&t(0,u=Z.contourType)},i.$$.update=()=>{if(i.$$.dirty&769&&l){if(!o){const Z={};Fm.update(()=>Z)}o[u]||Ih(Fm,o[u]=new bC(l,fr.valhalla.url),o),t(1,m=l.getCenter().lng),t(2,r=l.getCenter().lat),l.on("moveend",()=>{t(1,m=l.getCenter().lng),t(2,r=l.getCenter().lat)})}},[u,m,r,f,w,_,b,x,o,l,v,C,T,S,M,O,V]}class L3 extends vr{constructor(e){super(),br(this,e,$P,QP,mr,{contourType:0})}}function l5(i,e,t){const o=i.slice();return o[19]=e[t],o}function e9(i){let e,t,o,l,u,m,r,f,_;function w(v){i[7](v)}let b={label:"Means of Transport",style:"width:100%",$$slots:{default:[i9]},$$scope:{ctx:i}};i[0]!==void 0&&(b.value=i[0]),t=new I3({props:b}),In.push(()=>To(t,"value",w)),m=new Zf({props:{color:"primary",variant:"raised",style:"width:100%",$$slots:{default:[u9]},$$scope:{ctx:i}}}),m.$on("click",i[5]);let x=i[1]&&i[1].length>0&&c5(i);return{c(){e=zt("div"),ln(t.$$.fragment),l=Yi(),u=zt("div"),ln(m.$$.fragment),r=Yi(),x&&x.c(),f=gn(),this.h()},l(v){e=Nt(v,"DIV",{});var C=Gt(e);pn(t.$$.fragment,C),C.forEach(Le),l=Zi(v),u=Nt(v,"DIV",{class:!0,style:!0});var T=Gt(u);pn(m.$$.fragment,T),T.forEach(Le),r=Zi(v),x&&x.l(v),f=gn(),this.h()},h(){Ht(u,"class","tool-button svelte-1ul6seo"),ec(u,"display","flex"),ec(u,"align-items","center")},m(v,C){qt(v,e,C),un(t,e,null),qt(v,l,C),qt(v,u,C),un(m,u,null),qt(v,r,C),x&&x.m(v,C),qt(v,f,C),_=!0},p(v,C){const T={};C&4194304&&(T.$$scope={dirty:C,ctx:v}),!o&&C&1&&(o=!0,T.value=v[0],Lo(()=>o=!1)),t.$set(T);const S={};C&4194308&&(S.$$scope={dirty:C,ctx:v}),m.$set(S),v[1]&&v[1].length>0?x?(x.p(v,C),C&2&&xt(x,1)):(x=c5(v),x.c(),xt(x,1),x.m(f.parentNode,f)):x&&(Rr(),Ft(x,1,1,()=>{x=null}),Fr())},i(v){_||(xt(t.$$.fragment,v),xt(m.$$.fragment,v),xt(x),_=!0)},o(v){Ft(t.$$.fragment,v),Ft(m.$$.fragment,v),Ft(x),_=!1},d(v){v&&Le(e),cn(t),v&&Le(l),v&&Le(u),cn(m),v&&Le(r),x&&x.d(v),v&&Le(f)}}}function t9(i){let e=i[19].label+"",t;return{c(){t=Xn(e)},l(o){t=Yn(o,e)},m(o,l){qt(o,t,l)},p:eo,d(o){o&&Le(t)}}}function u5(i){let e,t;return e=new T3({props:{value:i[19].value,$$slots:{default:[t9]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l&4194304&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function i9(i){let e,t,o=i[4],l=[];for(let m=0;m<o.length;m+=1)l[m]=u5(l5(i,o,m));const u=m=>Ft(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);qt(m,e,r),t=!0},p(m,r){if(r&16){o=m[4];let f;for(f=0;f<o.length;f+=1){const _=l5(m,o,f);l[f]?(l[f].p(_,r),xt(l[f],1)):(l[f]=u5(_),l[f].c(),xt(l[f],1),l[f].m(e.parentNode,e))}for(Rr(),f=o.length;f<l.length;f+=1)u(f);Fr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)xt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Ft(l[r]);t=!1},d(m){oa(l,m),m&&Le(e)}}}function n9(i){let e;return{c(){e=Xn("route")},l(t){e=Yn(t,"route")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function r9(i){let e;return{c(){e=Xn("close")},l(t){e=Yn(t,"close")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function o9(i){let e;function t(u,m){return u[2]?r9:n9}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),qt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Le(e)}}}function s9(i){let e;return{c(){e=Xn("Start routing")},l(t){e=Yn(t,"Start routing")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function a9(i){let e;return{c(){e=Xn("Stop routing")},l(t){e=Yn(t,"Stop routing")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function l9(i){let e;function t(u,m){return u[2]?a9:s9}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),qt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Le(e)}}}function u9(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[o9]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[l9]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&4194308&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&4194308&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function c5(i){let e,t,o,l,u,m,r,f,_;t=new Zf({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[f9]},$$scope:{ctx:i}}}),t.$on("click",i[8]),u=new df({props:{value:`${i[1][0].lng.toFixed(6)}, ${i[1][0].lat.toFixed(6)}`,label:"From",readonly:!0,style:"width: 50%"}});let w=i[1].length>1&&h5(i),b=i[3]&&f5(i);return{c(){e=zt("div"),ln(t.$$.fragment),o=Yi(),l=zt("div"),ln(u.$$.fragment),m=Yi(),w&&w.c(),r=Yi(),b&&b.c(),f=gn(),this.h()},l(x){e=Nt(x,"DIV",{class:!0});var v=Gt(e);pn(t.$$.fragment,v),v.forEach(Le),o=Zi(x),l=Nt(x,"DIV",{style:!0});var C=Gt(l);pn(u.$$.fragment,C),m=Zi(C),w&&w.l(C),C.forEach(Le),r=Zi(x),b&&b.l(x),f=gn(),this.h()},h(){Ht(e,"class","sub-button tool-button svelte-1ul6seo"),ec(l,"display","inline-flex"),ec(l,"width","100%")},m(x,v){qt(x,e,v),un(t,e,null),qt(x,o,v),qt(x,l,v),un(u,l,null),Dt(l,m),w&&w.m(l,null),qt(x,r,v),b&&b.m(x,v),qt(x,f,v),_=!0},p(x,v){const C={};v&4194304&&(C.$$scope={dirty:v,ctx:x}),t.$set(C);const T={};v&2&&(T.value=`${x[1][0].lng.toFixed(6)}, ${x[1][0].lat.toFixed(6)}`),u.$set(T),x[1].length>1?w?(w.p(x,v),v&2&&xt(w,1)):(w=h5(x),w.c(),xt(w,1),w.m(l,null)):w&&(Rr(),Ft(w,1,1,()=>{w=null}),Fr()),x[3]?b?(b.p(x,v),v&8&&xt(b,1)):(b=f5(x),b.c(),xt(b,1),b.m(f.parentNode,f)):b&&(Rr(),Ft(b,1,1,()=>{b=null}),Fr())},i(x){_||(xt(t.$$.fragment,x),xt(u.$$.fragment,x),xt(w),xt(b),_=!0)},o(x){Ft(t.$$.fragment,x),Ft(u.$$.fragment,x),Ft(w),Ft(b),_=!1},d(x){x&&Le(e),cn(t),x&&Le(o),x&&Le(l),cn(u),w&&w.d(),x&&Le(r),b&&b.d(x),x&&Le(f)}}}function c9(i){let e;return{c(){e=Xn("delete")},l(t){e=Yn(t,"delete")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function h9(i){let e;return{c(){e=Xn("Clear")},l(t){e=Yn(t,"Clear")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function f9(i){let e,t,o,l;return e=new i0({props:{class:"material-icons",$$slots:{default:[c9]},$$scope:{ctx:i}}}),o=new gf({props:{$$slots:{default:[h9]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&4194304&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&4194304&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function h5(i){let e,t;return e=new df({props:{value:`${i[1][i[1].length-1].lng.toFixed(6)}, ${i[1][i[1].length-1].lat.toFixed(6)}`,label:"To",readonly:!0,style:"width: 50%"}}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},p(o,l){const u={};l&2&&(u.value=`${o[1][o[1].length-1].lng.toFixed(6)}, ${o[1][o[1].length-1].lat.toFixed(6)}`),e.$set(u)},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function f5(i){let e,t,o,l,u;return t=new df({props:{value:`${i[3].length} km`,label:"Length",readonly:!0,style:"width: 50%"}}),l=new df({props:{value:`${i[3].time} min`,label:"Time",readonly:!0,style:"width: 50%"}}),{c(){e=zt("div"),ln(t.$$.fragment),o=Yi(),ln(l.$$.fragment),this.h()},l(m){e=Nt(m,"DIV",{style:!0});var r=Gt(e);pn(t.$$.fragment,r),o=Zi(r),pn(l.$$.fragment,r),r.forEach(Le),this.h()},h(){ec(e,"display","inline-flex"),ec(e,"width","100%")},m(m,r){qt(m,e,r),un(t,e,null),Dt(e,o),un(l,e,null),u=!0},p(m,r){const f={};r&8&&(f.value=`${m[3].length} km`),t.$set(f);const _={};r&8&&(_.value=`${m[3].time} min`),l.$set(_)},i(m){u||(xt(t.$$.fragment,m),xt(l.$$.fragment,m),u=!0)},o(m){Ft(t.$$.fragment,m),Ft(l.$$.fragment,m),u=!1},d(m){m&&Le(e),cn(t),cn(l)}}}function d9(i){let e,t,o=fr.valhalla&&e9(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,[u]){fr.valhalla&&o.p(l,u)},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}const Bf="routing-controls-source-line",k2="routing-controls-layer-line",S2="routing-controls-layer-line-label",C2="routing-controls-layer-symbol",Ed="routing-controls-source-symbol";function p9(i,e,t){let o,l,u;As(i,U2,te=>t(9,o=te)),As(i,nu,te=>t(10,l=te)),As(i,Ad,te=>t(1,u=te));const m=fr.valhalla.options.routing;let r=!1,f=[{value:Z0.Walking,label:"Walking"},{value:Z0.Bicycle,label:"Bicycle"},{value:Z0.Car,label:"Car"}],_=f[0].value,w;Ds(()=>{u||Ad.update(()=>[])}),nh(()=>{r===!0&&v()});const b=()=>{r?v():x()},x=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(2,r=!0),l.on("click",C),l.fire("routing.on"))},v=()=>{t(2,r=!1),l&&(l.getCanvas().style.cursor="",l.off("click",C),l.fire("routing.off"))},C=te=>{const J=te.lngLat;u||Ad.update(()=>[]),Ad.update(()=>[...u,J])},T=()=>{l&&(l.getLayer(k2)&&l.removeLayer(k2),l.getLayer(S2)&&l.removeLayer(S2),l.getLayer(C2)&&l.removeLayer(C2),l.getSource(Bf)&&l.removeSource(Bf),l.getSource(Ed)&&l.removeSource(Ed)),Ad.update(()=>[])},S=()=>{if(!u||u&&u.length<2){t(3,w=void 0);return}const te=`${fr.valhalla.url}/route`,J={locations:u.map(Me=>({lon:Me.lng,lat:Me.lat})),costing:_,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},oe=`${te}?json=${JSON.stringify(J)}`;fetch(oe).then(Me=>Me.json()).then(Me=>{if("error"in Me)throw u.pop(),new Error(`${Me.status} (${Me.status_code}): ${Me.error} (${Me.error_code})`);let Fe=Me.trip.legs.map(me=>V(me.shape)),pe=[];Fe.forEach(me=>{pe=[...pe,...me]}),t(3,w=Me.trip.summary),t(3,w.length=Number(w.length.toFixed(2)),w),t(3,w.time=Number((w.time/60).toFixed()),w);const Ie={type:"FeatureCollection",features:Me.trip.legs.map(me=>{const et=V(me.shape),nt={length:Number(me.summary.length.toFixed(2)),time:Number((me.summary.time/60).toFixed())};return M(et,nt)})},Se=O(u.map(me=>[me.lng,me.lat]));l&&(l.getSource(Bf)?(l.getSource(Bf).setData(Ie),l.getSource(Ed).setData(Se)):(l.addSource(Bf,{type:"geojson",data:Ie}),l.addSource(Ed,{type:"geojson",data:Se}),l.addLayer({id:k2,type:"line",source:Bf,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),l.addLayer({id:S2,type:"symbol",source:Bf,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":m.font,"text-size":m.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}}),l.addLayer({id:C2,type:"symbol",source:Ed,layout:{"icon-image":m.iconImage,"icon-size":m.iconSize,"text-field":["get","text"],"text-font":m.font,"text-size":m.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}})))}).catch(Me=>{U2.update(()=>[...o,Me.message])})},M=(te=[],J={})=>({type:"Feature",properties:J,geometry:{type:"LineString",coordinates:te}}),O=(te=[])=>({type:"FeatureCollection",features:te.map((J,oe)=>{let Me=(oe+1).toString();return oe===0?Me="From":oe===te.length-1&&(Me="To"),{type:"Feature",properties:{text:Me},geometry:{type:"Point",coordinates:J}}})}),V=(te,J=6)=>{let oe=0,Me=0,Fe=0,pe=[],Ie=0,Se=0,me=null,et,nt,Et=Math.pow(10,J||6);for(;oe<te.length;){me=null,Ie=0,Se=0;do me=te.charCodeAt(oe++)-63,Se|=(me&31)<<Ie,Ie+=5;while(me>=32);et=Se&1?~(Se>>1):Se>>1,Ie=Se=0;do me=te.charCodeAt(oe++)-63,Se|=(me&31)<<Ie,Ie+=5;while(me>=32);nt=Se&1?~(Se>>1):Se>>1,Me+=et,Fe+=nt,pe.push([Fe/Et,Me/Et])}return pe};function G(te){_=te,t(0,_)}const Z=()=>T();return i.$$.update=()=>{i.$$.dirty&2&&S(),i.$$.dirty&1&&S()},[_,u,r,w,f,b,T,G,Z]}class m9 extends vr{constructor(e){super(),br(this,e,p9,d9,mr,{})}}function g9(i){let e;return{c(){e=zt("i"),this.h()},l(t){e=Nt(t,"I",{class:!0,"aria-hidden":!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","fas fa-angle-up"),Ht(e,"aria-hidden","true")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function y9(i){let e;return{c(){e=zt("i"),this.h()},l(t){e=Nt(t,"I",{class:!0,"aria-hidden":!0}),Gt(e).forEach(Le),this.h()},h(){Ht(e,"class","fas fa-angle-down"),Ht(e,"aria-hidden","true")},m(t,o){qt(t,e,o)},d(t){t&&Le(e)}}}function d5(i){let e,t;const o=i[3].default,l=xr(o,i,i[2],null);return{c(){e=zt("div"),l&&l.c(),this.h()},l(u){e=Nt(u,"DIV",{class:!0});var m=Gt(e);l&&l.l(m),m.forEach(Le),this.h()},h(){Ht(e,"class","is-collapsible")},m(u,m){qt(u,e,m),l&&l.m(e,null),t=!0},p(u,m){l&&l.p&&(!t||m&4)&&Ar(l,o,u,u[2],t?Sr(o,u[2],m,null):kr(u[2]),null)},i(u){t||(xt(l,u),t=!0)},o(u){Ft(l,u),t=!1},d(u){u&&Le(e),l&&l.d(u)}}}function _9(i){let e,t,o,l,u,m,r,f,_,w,b;function x(S,M){return S[0]?y9:g9}let v=x(i),C=v(i),T=i[0]&&d5(i);return{c(){e=zt("div"),t=zt("header"),o=zt("p"),l=Xn(i[1]),u=Yi(),m=zt("a"),r=zt("span"),C.c(),f=Yi(),T&&T.c(),this.h()},l(S){e=Nt(S,"DIV",{class:!0});var M=Gt(e);t=Nt(M,"HEADER",{class:!0});var O=Gt(t);o=Nt(O,"P",{class:!0});var V=Gt(o);l=Yn(V,i[1]),V.forEach(Le),u=Zi(O),m=Nt(O,"A",{href:!0,"data-action":!0,class:!0,"aria-label":!0});var G=Gt(m);r=Nt(G,"SPAN",{class:!0});var Z=Gt(r);C.l(Z),Z.forEach(Le),G.forEach(Le),O.forEach(Le),f=Zi(M),T&&T.l(M),M.forEach(Le),this.h()},h(){Ht(o,"class","card-header-title svelte-1267nlp"),Ht(r,"class","icon"),Ht(m,"href",""),Ht(m,"data-action","collapse"),Ht(m,"class","card-header-icon is-hidden-fullscreen"),Ht(m,"aria-label","more options"),Ht(t,"class","card-header"),Ht(e,"class","card")},m(S,M){qt(S,e,M),Dt(e,t),Dt(t,o),Dt(o,l),Dt(t,u),Dt(t,m),Dt(m,r),C.m(r,null),Dt(e,f),T&&T.m(e,null),_=!0,w||(b=[En(o,"click",i[4]),En(m,"click",i[5])],w=!0)},p(S,[M]){(!_||M&2)&&Jo(l,S[1]),v!==(v=x(S))&&(C.d(1),C=v(S),C&&(C.c(),C.m(r,null))),S[0]?T?(T.p(S,M),M&1&&xt(T,1)):(T=d5(S),T.c(),xt(T,1),T.m(e,null)):T&&(Rr(),Ft(T,1,1,()=>{T=null}),Fr())},i(S){_||(xt(T),_=!0)},o(S){Ft(T),_=!1},d(S){S&&Le(e),C.d(),T&&T.d(),w=!1,qo(b)}}}function v9(i,e,t){let{$$slots:o={},$$scope:l}=e,{title:u}=e,{isPanelOpen:m=!1}=e;const r=()=>t(0,m=!m),f=()=>t(0,m=!m);return i.$$set=_=>{"title"in _&&t(1,u=_.title),"isPanelOpen"in _&&t(0,m=_.isPanelOpen),"$$scope"in _&&t(2,l=_.$$scope)},[m,u,l,o,r,f]}class jd extends vr{constructor(e){super(),br(this,e,v9,_9,mr,{title:1,isPanelOpen:0})}}function p5(i){let e,t,o,l=fr.elevation&&b9(i),u=fr.valhalla&&x9(i);return{c(){l&&l.c(),e=Yi(),u&&u.c(),t=gn()},l(m){l&&l.l(m),e=Zi(m),u&&u.l(m),t=gn()},m(m,r){l&&l.m(m,r),qt(m,e,r),u&&u.m(m,r),qt(m,t,r),o=!0},p(m,r){fr.elevation&&l.p(m,r),fr.valhalla&&u.p(m,r)},i(m){o||(xt(l),xt(u),o=!0)},o(m){Ft(l),Ft(u),o=!1},d(m){l&&l.d(m),m&&Le(e),u&&u.d(m),m&&Le(t)}}}function b9(i){let e,t,o;function l(m){i[6](m)}let u={title:"Measuring tool",$$slots:{default:[w9]},$$scope:{ctx:i}};return i[2]!==void 0&&(u.isPanelOpen=i[2]),e=new jd({props:u}),In.push(()=>To(e,"isPanelOpen",l)),{c(){ln(e.$$.fragment)},l(m){pn(e.$$.fragment,m)},m(m,r){un(e,m,r),o=!0},p(m,r){const f={};r&4096&&(f.$$scope={dirty:r,ctx:m}),!t&&r&4&&(t=!0,f.isPanelOpen=m[2],Lo(()=>t=!1)),e.$set(f)},i(m){o||(xt(e.$$.fragment,m),o=!0)},o(m){Ft(e.$$.fragment,m),o=!1},d(m){cn(e,m)}}}function w9(i){let e,t,o;return t=new P7({}),{c(){e=zt("div"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"DIV",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","card-content")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p:eo,i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function x9(i){let e,t,o,l,u,m,r,f,_;function w(S){i[7](S)}let b={title:"Routing tool",$$slots:{default:[A9]},$$scope:{ctx:i}};i[3]!==void 0&&(b.isPanelOpen=i[3]),e=new jd({props:b}),In.push(()=>To(e,"isPanelOpen",w));function x(S){i[9](S)}let v={title:"Time Isochrone",$$slots:{default:[k9]},$$scope:{ctx:i}};i[4]!==void 0&&(v.isPanelOpen=i[4]),l=new jd({props:v}),In.push(()=>To(l,"isPanelOpen",x));function C(S){i[11](S)}let T={title:"Distance Isochrone",$$slots:{default:[S9]},$$scope:{ctx:i}};return i[5]!==void 0&&(T.isPanelOpen=i[5]),r=new jd({props:T}),In.push(()=>To(r,"isPanelOpen",C)),{c(){ln(e.$$.fragment),o=Yi(),ln(l.$$.fragment),m=Yi(),ln(r.$$.fragment)},l(S){pn(e.$$.fragment,S),o=Zi(S),pn(l.$$.fragment,S),m=Zi(S),pn(r.$$.fragment,S)},m(S,M){un(e,S,M),qt(S,o,M),un(l,S,M),qt(S,m,M),un(r,S,M),_=!0},p(S,M){const O={};M&4096&&(O.$$scope={dirty:M,ctx:S}),!t&&M&8&&(t=!0,O.isPanelOpen=S[3],Lo(()=>t=!1)),e.$set(O);const V={};M&4098&&(V.$$scope={dirty:M,ctx:S}),!u&&M&16&&(u=!0,V.isPanelOpen=S[4],Lo(()=>u=!1)),l.$set(V);const G={};M&4098&&(G.$$scope={dirty:M,ctx:S}),!f&&M&32&&(f=!0,G.isPanelOpen=S[5],Lo(()=>f=!1)),r.$set(G)},i(S){_||(xt(e.$$.fragment,S),xt(l.$$.fragment,S),xt(r.$$.fragment,S),_=!0)},o(S){Ft(e.$$.fragment,S),Ft(l.$$.fragment,S),Ft(r.$$.fragment,S),_=!1},d(S){cn(e,S),S&&Le(o),cn(l,S),S&&Le(m),cn(r,S)}}}function A9(i){let e,t,o;return t=new m9({}),{c(){e=zt("div"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"DIV",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","card-content")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p:eo,i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function k9(i){let e,t,o,l;function u(r){i[8](r)}let m={};return i[1].Time!==void 0&&(m.contourType=i[1].Time),t=new L3({props:m}),In.push(()=>To(t,"contourType",u)),{c(){e=zt("div"),ln(t.$$.fragment),this.h()},l(r){e=Nt(r,"DIV",{class:!0});var f=Gt(e);pn(t.$$.fragment,f),f.forEach(Le),this.h()},h(){Ht(e,"class","card-content")},m(r,f){qt(r,e,f),un(t,e,null),l=!0},p(r,f){const _={};!o&&f&2&&(o=!0,_.contourType=r[1].Time,Lo(()=>o=!1)),t.$set(_)},i(r){l||(xt(t.$$.fragment,r),l=!0)},o(r){Ft(t.$$.fragment,r),l=!1},d(r){r&&Le(e),cn(t)}}}function S9(i){let e,t,o,l;function u(r){i[10](r)}let m={};return i[1].Distance!==void 0&&(m.contourType=i[1].Distance),t=new L3({props:m}),In.push(()=>To(t,"contourType",u)),{c(){e=zt("div"),ln(t.$$.fragment),this.h()},l(r){e=Nt(r,"DIV",{class:!0});var f=Gt(e);pn(t.$$.fragment,f),f.forEach(Le),this.h()},h(){Ht(e,"class","card-content")},m(r,f){qt(r,e,f),un(t,e,null),l=!0},p(r,f){const _={};!o&&f&2&&(o=!0,_.contourType=r[1].Distance,Lo(()=>o=!1)),t.$set(_)},i(r){l||(xt(t.$$.fragment,r),l=!0)},o(r){Ft(t.$$.fragment,r),l=!1},d(r){r&&Le(e),cn(t)}}}function C9(i){let e,t,o=i[0]&&p5(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&xt(o,1)):(o=p5(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function E9(i,e,t){let{isAdvancedTabVisible:o=!1}=e,l=!0,u=!0,m=!1,r=!1;function f(C){l=C,t(2,l)}function _(C){u=C,t(3,u)}function w(C){i.$$.not_equal(Yc.Time,C)&&(Yc.Time=C,t(1,Yc))}function b(C){m=C,t(4,m)}function x(C){i.$$.not_equal(Yc.Distance,C)&&(Yc.Distance=C,t(1,Yc))}function v(C){r=C,t(5,r)}return i.$$set=C=>{"isAdvancedTabVisible"in C&&t(0,o=C.isAdvancedTabVisible)},[o,Yc,l,u,m,r,f,_,w,b,x,v]}class I9 extends vr{constructor(e){super(),br(this,e,E9,C9,mr,{isAdvancedTabVisible:0})}}var Nf=(i=>(i.LAYERS="Layers",i.SEARCH="Search",i.ADVANCED="Advanced",i))(Nf||{});function m5(i,e,t){const o=i.slice();return o[19]=e[t],o}function g5(i,e,t){const o=i.slice();return o[19]=e[t],o}function y5(i,e,t){const o=i.slice();return o[19]=e[t],o}function _5(i,e,t){const o=i.slice();return o[19]=e[t],o}function v5(i,e,t){const o=i.slice();return o[19]=e[t],o}function b5(i){let e,t=i[19].properties.name+"",o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[19].properties.id,e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&32&&t!==(t=u[19].properties.name+"")&&Jo(o,t),m&32&&l!==(l=u[19].properties.id)&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function w5(i){let e,t,o,l,u,m,r,f,_=i[6],w=[];for(let b=0;b<_.length;b+=1)w[b]=x5(_5(i,_,b));return{c(){e=zt("div"),t=zt("div"),o=zt("div"),l=zt("select"),u=zt("option"),m=Xn("Select district...");for(let b=0;b<w.length;b+=1)w[b].c();this.h()},l(b){e=Nt(b,"DIV",{class:!0});var x=Gt(e);t=Nt(x,"DIV",{class:!0});var v=Gt(t);o=Nt(v,"DIV",{class:!0});var C=Gt(o);l=Nt(C,"SELECT",{});var T=Gt(l);u=Nt(T,"OPTION",{});var S=Gt(u);m=Yn(S,"Select district..."),S.forEach(Le);for(let M=0;M<w.length;M+=1)w[M].l(T);T.forEach(Le),C.forEach(Le),v.forEach(Le),x.forEach(Le),this.h()},h(){u.__value="",u.value=u.__value,i[1]===void 0&&Ua(()=>i[11].call(l)),Ht(o,"class","select is-fullwidth"),Ht(t,"class","column is-full p-2"),Ht(e,"class","columns")},m(b,x){qt(b,e,x),Dt(e,t),Dt(t,o),Dt(o,l),Dt(l,u),Dt(u,m);for(let v=0;v<w.length;v+=1)w[v].m(l,null);Ys(l,i[1]),r||(f=En(l,"change",i[11]),r=!0)},p(b,x){if(x&64){_=b[6];let v;for(v=0;v<_.length;v+=1){const C=_5(b,_,v);w[v]?w[v].p(C,x):(w[v]=x5(C),w[v].c(),w[v].m(l,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=_.length}x&66&&Ys(l,b[1])},d(b){b&&Le(e),oa(w,b),r=!1,f()}}}function x5(i){let e,t=i[19].properties.name+"",o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[19].properties.id,e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&64&&t!==(t=u[19].properties.name+"")&&Jo(o,t),m&64&&l!==(l=u[19].properties.id)&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function A5(i){let e,t,o,l,u,m,r,f,_=i[7],w=[];for(let b=0;b<_.length;b+=1)w[b]=k5(y5(i,_,b));return{c(){e=zt("div"),t=zt("div"),o=zt("div"),l=zt("select"),u=zt("option"),m=Xn("Select sector...");for(let b=0;b<w.length;b+=1)w[b].c();this.h()},l(b){e=Nt(b,"DIV",{class:!0});var x=Gt(e);t=Nt(x,"DIV",{class:!0});var v=Gt(t);o=Nt(v,"DIV",{class:!0});var C=Gt(o);l=Nt(C,"SELECT",{});var T=Gt(l);u=Nt(T,"OPTION",{});var S=Gt(u);m=Yn(S,"Select sector..."),S.forEach(Le);for(let M=0;M<w.length;M+=1)w[M].l(T);T.forEach(Le),C.forEach(Le),v.forEach(Le),x.forEach(Le),this.h()},h(){u.__value="",u.value=u.__value,i[2]===void 0&&Ua(()=>i[12].call(l)),Ht(o,"class","select is-fullwidth"),Ht(t,"class","column is-full p-2"),Ht(e,"class","columns")},m(b,x){qt(b,e,x),Dt(e,t),Dt(t,o),Dt(o,l),Dt(l,u),Dt(u,m);for(let v=0;v<w.length;v+=1)w[v].m(l,null);Ys(l,i[2]),r||(f=En(l,"change",i[12]),r=!0)},p(b,x){if(x&128){_=b[7];let v;for(v=0;v<_.length;v+=1){const C=y5(b,_,v);w[v]?w[v].p(C,x):(w[v]=k5(C),w[v].c(),w[v].m(l,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=_.length}x&132&&Ys(l,b[2])},d(b){b&&Le(e),oa(w,b),r=!1,f()}}}function k5(i){let e,t=i[19].properties.name+"",o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[19].properties.id,e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&128&&t!==(t=u[19].properties.name+"")&&Jo(o,t),m&128&&l!==(l=u[19].properties.id)&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function S5(i){let e,t,o,l,u,m,r,f,_=i[8],w=[];for(let b=0;b<_.length;b+=1)w[b]=C5(g5(i,_,b));return{c(){e=zt("div"),t=zt("div"),o=zt("div"),l=zt("select"),u=zt("option"),m=Xn("Select cell...");for(let b=0;b<w.length;b+=1)w[b].c();this.h()},l(b){e=Nt(b,"DIV",{class:!0});var x=Gt(e);t=Nt(x,"DIV",{class:!0});var v=Gt(t);o=Nt(v,"DIV",{class:!0});var C=Gt(o);l=Nt(C,"SELECT",{});var T=Gt(l);u=Nt(T,"OPTION",{});var S=Gt(u);m=Yn(S,"Select cell..."),S.forEach(Le);for(let M=0;M<w.length;M+=1)w[M].l(T);T.forEach(Le),C.forEach(Le),v.forEach(Le),x.forEach(Le),this.h()},h(){u.__value="",u.value=u.__value,i[3]===void 0&&Ua(()=>i[13].call(l)),Ht(o,"class","select is-fullwidth"),Ht(t,"class","column is-full p-2"),Ht(e,"class","columns")},m(b,x){qt(b,e,x),Dt(e,t),Dt(t,o),Dt(o,l),Dt(l,u),Dt(u,m);for(let v=0;v<w.length;v+=1)w[v].m(l,null);Ys(l,i[3]),r||(f=En(l,"change",i[13]),r=!0)},p(b,x){if(x&256){_=b[8];let v;for(v=0;v<_.length;v+=1){const C=g5(b,_,v);w[v]?w[v].p(C,x):(w[v]=C5(C),w[v].c(),w[v].m(l,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=_.length}x&264&&Ys(l,b[3])},d(b){b&&Le(e),oa(w,b),r=!1,f()}}}function C5(i){let e,t=i[19].properties.name+"",o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[19].properties.id,e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&256&&t!==(t=u[19].properties.name+"")&&Jo(o,t),m&256&&l!==(l=u[19].properties.id)&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function E5(i){let e,t,o,l,u,m,r,f,_=i[9],w=[];for(let b=0;b<_.length;b+=1)w[b]=I5(m5(i,_,b));return{c(){e=zt("div"),t=zt("div"),o=zt("div"),l=zt("select"),u=zt("option"),m=Xn("Select village...");for(let b=0;b<w.length;b+=1)w[b].c();this.h()},l(b){e=Nt(b,"DIV",{class:!0});var x=Gt(e);t=Nt(x,"DIV",{class:!0});var v=Gt(t);o=Nt(v,"DIV",{class:!0});var C=Gt(o);l=Nt(C,"SELECT",{});var T=Gt(l);u=Nt(T,"OPTION",{});var S=Gt(u);m=Yn(S,"Select village..."),S.forEach(Le);for(let M=0;M<w.length;M+=1)w[M].l(T);T.forEach(Le),C.forEach(Le),v.forEach(Le),x.forEach(Le),this.h()},h(){u.__value="",u.value=u.__value,i[4]===void 0&&Ua(()=>i[14].call(l)),Ht(o,"class","select is-fullwidth"),Ht(t,"class","column is-full p-2"),Ht(e,"class","columns")},m(b,x){qt(b,e,x),Dt(e,t),Dt(t,o),Dt(o,l),Dt(l,u),Dt(u,m);for(let v=0;v<w.length;v+=1)w[v].m(l,null);Ys(l,i[4]),r||(f=En(l,"change",i[14]),r=!0)},p(b,x){if(x&512){_=b[9];let v;for(v=0;v<_.length;v+=1){const C=m5(b,_,v);w[v]?w[v].p(C,x):(w[v]=I5(C),w[v].c(),w[v].m(l,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=_.length}x&528&&Ys(l,b[4])},d(b){b&&Le(e),oa(w,b),r=!1,f()}}}function I5(i){let e,t=i[19].properties.name+"",o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[19].properties.id,e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&512&&t!==(t=u[19].properties.name+"")&&Jo(o,t),m&512&&l!==(l=u[19].properties.id)&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function T9(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C=i[5],T=[];for(let G=0;G<C.length;G+=1)T[G]=b5(v5(i,C,G));let S=i[0]&&w5(i),M=i[0]&&i[1]&&A5(i),O=i[0]&&i[1]&&i[2]&&S5(i),V=i[0]&&i[1]&&i[2]&&i[3]&&E5(i);return{c(){e=zt("div"),t=zt("div"),o=zt("div"),l=zt("select"),u=zt("option"),m=Xn("Select province...");for(let G=0;G<T.length;G+=1)T[G].c();r=Yi(),S&&S.c(),f=Yi(),M&&M.c(),_=Yi(),O&&O.c(),w=Yi(),V&&V.c(),b=gn(),this.h()},l(G){e=Nt(G,"DIV",{class:!0});var Z=Gt(e);t=Nt(Z,"DIV",{class:!0});var te=Gt(t);o=Nt(te,"DIV",{class:!0});var J=Gt(o);l=Nt(J,"SELECT",{});var oe=Gt(l);u=Nt(oe,"OPTION",{});var Me=Gt(u);m=Yn(Me,"Select province..."),Me.forEach(Le);for(let Fe=0;Fe<T.length;Fe+=1)T[Fe].l(oe);oe.forEach(Le),J.forEach(Le),te.forEach(Le),Z.forEach(Le),r=Zi(G),S&&S.l(G),f=Zi(G),M&&M.l(G),_=Zi(G),O&&O.l(G),w=Zi(G),V&&V.l(G),b=gn(),this.h()},h(){u.__value="",u.value=u.__value,i[0]===void 0&&Ua(()=>i[10].call(l)),Ht(o,"class","select is-fullwidth"),Ht(t,"class","column is-full p-2"),Ht(e,"class","columns")},m(G,Z){qt(G,e,Z),Dt(e,t),Dt(t,o),Dt(o,l),Dt(l,u),Dt(u,m);for(let te=0;te<T.length;te+=1)T[te].m(l,null);Ys(l,i[0]),qt(G,r,Z),S&&S.m(G,Z),qt(G,f,Z),M&&M.m(G,Z),qt(G,_,Z),O&&O.m(G,Z),qt(G,w,Z),V&&V.m(G,Z),qt(G,b,Z),x||(v=En(l,"change",i[10]),x=!0)},p(G,[Z]){if(Z&32){C=G[5];let te;for(te=0;te<C.length;te+=1){const J=v5(G,C,te);T[te]?T[te].p(J,Z):(T[te]=b5(J),T[te].c(),T[te].m(l,null))}for(;te<T.length;te+=1)T[te].d(1);T.length=C.length}Z&33&&Ys(l,G[0]),G[0]?S?S.p(G,Z):(S=w5(G),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null),G[0]&&G[1]?M?M.p(G,Z):(M=A5(G),M.c(),M.m(_.parentNode,_)):M&&(M.d(1),M=null),G[0]&&G[1]&&G[2]?O?O.p(G,Z):(O=S5(G),O.c(),O.m(w.parentNode,w)):O&&(O.d(1),O=null),G[0]&&G[1]&&G[2]&&G[3]?V?V.p(G,Z):(V=E5(G),V.c(),V.m(b.parentNode,b)):V&&(V.d(1),V=null)},i:eo,o:eo,d(G){G&&Le(e),oa(T,G),G&&Le(r),S&&S.d(G),G&&Le(f),M&&M.d(G),G&&Le(_),O&&O.d(G),G&&Le(w),V&&V.d(G),G&&Le(b),x=!1,v()}}}function L9(i,e,t){let o;As(i,nu,te=>t(15,o=te));let l,u,m,r,f,_=[],w=[],b=[],x=[],v=[];const C=async te=>{let J;switch(te){case"province":l&&(J=_.filter(oe=>oe.properties.id===Number(l))[0]);break;case"district":u&&(J=w.filter(oe=>oe.properties.id===Number(u))[0]);break;case"sector":m&&(J=b.filter(oe=>oe.properties.id===Number(m))[0]);break;case"cell":r&&(J=x.filter(oe=>oe.properties.id===Number(r))[0]);break;case"village":f&&(J=v.filter(oe=>oe.properties.id===Number(f))[0]);break}if(S(J),te!=="village"){if(te==="cell"&&l&&u&&m&&r){const oe=`${fr.adminBoundary.url}/${l}/${u}/${m}/${r}/village.geojson`;t(9,v=await T(oe)),t(4,f="")}else if(te==="sector"&&l&&u&&m){const oe=`${fr.adminBoundary.url}/${l}/${u}/${m}/cell.geojson`;t(8,x=await T(oe)),t(9,v=[]),t(3,r=""),t(4,f="")}else if(te==="district"&&l&&u){const oe=`${fr.adminBoundary.url}/${l}/${u}/sector.geojson`;t(7,b=await T(oe)),t(8,x=[]),t(9,v=[]),t(2,m=""),t(3,r=""),t(4,f="")}else if(te==="province"&&l){const oe=`${fr.adminBoundary.url}/${l}/district.geojson`;t(6,w=await T(oe)),t(7,b=[]),t(8,x=[]),t(9,v=[]),t(1,u=""),t(2,m=""),t(3,r=""),t(4,f="")}else if(_.length===0){const oe=`${fr.adminBoundary.url}/province.geojson`;t(5,_=await T(oe)),t(6,w=[]),t(7,b=[]),t(8,x=[]),t(9,v=[]),t(0,l=""),t(1,u=""),t(2,m=""),t(3,r=""),t(4,f="")}}},T=async te=>(await(await fetch(te)).json()).features,S=te=>{if(!te)return;const J="selected-boundary";"bbox"in te&&o.fitBounds(te.bbox);const oe={type:"FeatureCollection",features:[te]};o.getLayer(J)?o.getSource(J).setData(oe):(o.addSource(J,{type:"geojson",data:oe}),o.addLayer({id:J,type:"fill",source:J,paint:{"fill-color":"rgba(255, 0, 0, 1)","fill-outline-color":"rgba(255, 0, 0, 1)","fill-opacity":.1},filter:["==","$type","Polygon"]}))};function M(){l=Ac(this),t(0,l),t(5,_)}function O(){u=Ac(this),t(1,u),t(6,w)}function V(){m=Ac(this),t(2,m),t(7,b)}function G(){r=Ac(this),t(3,r),t(8,x)}function Z(){f=Ac(this),t(4,f),t(9,v)}return i.$$.update=()=>{i.$$.dirty&1&&C("province"),i.$$.dirty&2&&C("district"),i.$$.dirty&4&&C("sector"),i.$$.dirty&8&&C("cell"),i.$$.dirty&16&&C("village")},[l,u,m,r,f,_,w,b,x,v,M,O,V,G,Z]}class P9 extends vr{constructor(e){super(),br(this,e,L9,T9,mr,{})}}function T5(i){let e,t,o=fr.adminBoundary&&M9(i);return{c(){e=zt("div"),o&&o.c(),this.h()},l(l){e=Nt(l,"DIV",{class:!0});var u=Gt(e);o&&o.l(u),u.forEach(Le),this.h()},h(){Ht(e,"class","accordion-container")},m(l,u){qt(l,e,u),o&&o.m(e,null),t=!0},p(l,u){fr.adminBoundary&&o.p(l,u)},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){l&&Le(e),o&&o.d()}}}function M9(i){let e,t,o;function l(m){i[2](m)}let u={title:"Zoom to admin",$$slots:{default:[D9]},$$scope:{ctx:i}};return i[1]!==void 0&&(u.isPanelOpen=i[1]),e=new jd({props:u}),In.push(()=>To(e,"isPanelOpen",l)),{c(){ln(e.$$.fragment)},l(m){pn(e.$$.fragment,m)},m(m,r){un(e,m,r),o=!0},p(m,r){const f={};r&8&&(f.$$scope={dirty:r,ctx:m}),!t&&r&2&&(t=!0,f.isPanelOpen=m[1],Lo(()=>t=!1)),e.$set(f)},i(m){o||(xt(e.$$.fragment,m),o=!0)},o(m){Ft(e.$$.fragment,m),o=!1},d(m){cn(e,m)}}}function D9(i){let e,t,o;return t=new P9({}),{c(){e=zt("div"),ln(t.$$.fragment),this.h()},l(l){e=Nt(l,"DIV",{class:!0});var u=Gt(e);pn(t.$$.fragment,u),u.forEach(Le),this.h()},h(){Ht(e,"class","card-content")},m(l,u){qt(l,e,u),un(t,e,null),o=!0},p:eo,i(l){o||(xt(t.$$.fragment,l),o=!0)},o(l){Ft(t.$$.fragment,l),o=!1},d(l){l&&Le(e),cn(t)}}}function O9(i){let e,t,o=i[0]&&T5(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&xt(o,1)):(o=T5(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function F9(i,e,t){let{isSearchTabVisible:o=!1}=e,l=!0;function u(m){l=m,t(1,l)}return i.$$set=m=>{"isSearchTabVisible"in m&&t(0,o=m.isSearchTabVisible)},[o,l,u]}class R9 extends vr{constructor(e){super(),br(this,e,F9,O9,mr,{isSearchTabVisible:0})}}const{window:sg}=S1;function L5(i,e,t){const o=i.slice();return o[24]=e[t],o}function P5(i){let e,t,o,l,u,m,r=i[24].label+"",f,_,w,b,x,v;function C(){return i[14](i[24])}return{c(){e=zt("li"),t=zt("a"),o=zt("span"),l=zt("i"),u=Yi(),m=zt("span"),f=Xn(r),w=Yi(),b=zt("li"),this.h()},l(T){e=Nt(T,"LI",{class:!0});var S=Gt(e);t=Nt(S,"A",{});var M=Gt(t);o=Nt(M,"SPAN",{class:!0});var O=Gt(o);l=Nt(O,"I",{class:!0,"aria-hidden":!0}),Gt(l).forEach(Le),O.forEach(Le),u=Zi(M),m=Nt(M,"SPAN",{});var V=Gt(m);f=Yn(V,r),V.forEach(Le),M.forEach(Le),S.forEach(Le),w=Zi(T),b=Nt(T,"LI",{}),Gt(b).forEach(Le),this.h()},h(){Ht(l,"class",Ud(i[24].icon)+" svelte-1cz9ygz"),Ht(l,"aria-hidden","true"),Ht(o,"class","icon ml-2"),Ht(e,"class",_=i[3].label===i[24].label?"is-active":"")},m(T,S){qt(T,e,S),Dt(e,t),Dt(t,o),Dt(o,l),Dt(t,u),Dt(t,m),Dt(m,f),qt(T,w,S),qt(T,b,S),x||(v=En(e,"click",C),x=!0)},p(T,S){i=T,S&8&&_!==(_=i[3].label===i[24].label?"is-active":"")&&Ht(e,"class",_)},d(T){T&&Le(e),T&&Le(w),T&&Le(b),x=!1,v()}}}function B9(i){let e,t,o,l,u,m,r,f,_,w,b=i[10],x=[];for(let v=0;v<b.length;v+=1)x[v]=P5(L5(i,b,v));return u=new _C({props:{isLayersTabVisible:i[5]}}),r=new R9({props:{isSearchTabVisible:i[6]}}),_=new I9({props:{isAdvancedTabVisible:i[7]}}),{c(){e=zt("div"),t=zt("div"),o=zt("ul");for(let v=0;v<x.length;v+=1)x[v].c();l=Yi(),ln(u.$$.fragment),m=Yi(),ln(r.$$.fragment),f=Yi(),ln(_.$$.fragment),this.h()},l(v){e=Nt(v,"DIV",{slot:!0,class:!0});var C=Gt(e);t=Nt(C,"DIV",{class:!0});var T=Gt(t);o=Nt(T,"UL",{});var S=Gt(o);for(let M=0;M<x.length;M+=1)x[M].l(S);S.forEach(Le),T.forEach(Le),l=Zi(C),pn(u.$$.fragment,C),m=Zi(C),pn(r.$$.fragment,C),f=Zi(C),pn(_.$$.fragment,C),C.forEach(Le),this.h()},h(){Ht(t,"class","tabs is-centered is-small mb-0"),Ht(e,"slot","primary"),Ht(e,"class","drawer-content svelte-1cz9ygz")},m(v,C){qt(v,e,C),Dt(e,t),Dt(t,o);for(let T=0;T<x.length;T+=1)x[T].m(o,null);Dt(e,l),un(u,e,null),Dt(e,m),un(r,e,null),Dt(e,f),un(_,e,null),w=!0},p(v,C){if(C&1032){b=v[10];let O;for(O=0;O<b.length;O+=1){const V=L5(v,b,O);x[O]?x[O].p(V,C):(x[O]=P5(V),x[O].c(),x[O].m(o,null))}for(;O<x.length;O+=1)x[O].d(1);x.length=b.length}const T={};C&32&&(T.isLayersTabVisible=v[5]),u.$set(T);const S={};C&64&&(S.isSearchTabVisible=v[6]),r.$set(S);const M={};C&128&&(M.isAdvancedTabVisible=v[7]),_.$set(M)},i(v){w||(xt(u.$$.fragment,v),xt(r.$$.fragment,v),xt(_.$$.fragment,v),w=!0)},o(v){Ft(u.$$.fragment,v),Ft(r.$$.fragment,v),Ft(_.$$.fragment,v),w=!1},d(v){v&&Le(e),oa(x,v),cn(u),cn(r),cn(_)}}}function z9(i){let e,t,o,l;const u=i[12].default,m=xr(u,i,i[16],null);return{c(){e=zt("div"),m&&m.c(),t=Yi(),o=zt("div"),this.h()},l(r){e=Nt(r,"DIV",{slot:!0,class:!0});var f=Gt(e);m&&m.l(f),t=Zi(f),o=Nt(f,"DIV",{}),Gt(o).forEach(Le),f.forEach(Le),this.h()},h(){Ht(e,"slot","secondary"),Ht(e,"class","main-content svelte-1cz9ygz")},m(r,f){qt(r,e,f),m&&m.m(e,null),Dt(e,t),Dt(e,o),l=!0},p(r,f){m&&m.p&&(!l||f&65536)&&Ar(m,u,r,r[16],l?Sr(u,r[16],f,null):kr(r[16]),null)},i(r){l||(xt(m,r),l=!0)},o(r){Ft(m,r),l=!1},d(r){r&&Le(e),m&&m.d(r)}}}function N9(i){let e,t,o,l;Ua(i[13]);let u={initialPrimarySize:"0%",minPrimarySize:i[0]?"300px":"0px",minSecondarySize:i[4]?"0px":"50%",splitterSize:i[9],$$slots:{secondary:[z9],primary:[B9]},$$scope:{ctx:i}};return e=new xA({props:u}),i[15](e),e.$on("changed",i[11]),{c(){ln(e.$$.fragment)},l(m){pn(e.$$.fragment,m)},m(m,r){un(e,m,r),t=!0,o||(l=En(sg,"resize",i[13]),o=!0)},p(m,[r]){const f={};r&1&&(f.minPrimarySize=m[0]?"300px":"0px"),r&16&&(f.minSecondarySize=m[4]?"0px":"50%"),r&512&&(f.splitterSize=m[9]),r&65768&&(f.$$scope={dirty:r,ctx:m}),e.$set(f)},i(m){t||(xt(e.$$.fragment,m),t=!0)},o(m){Ft(e.$$.fragment,m),t=!1},d(m){i[15](null),cn(e,m),o=!1,l()}}}function j9(i,e,t){let o;As(i,nu,Fe=>t(17,o=Fe));let{$$slots:l={},$$scope:u}=e,m=0,r=0,f=m<768;const _=()=>{t(4,f=m<768)};Ds(()=>{t(4,f=window.matchMedia("only screen and (max-width: 768px)").matches)});let{open:w=!1}=e,b=[{icon:"fas fa-layer-group",label:Nf.LAYERS},{icon:"fas fa-search",label:Nf.SEARCH},{icon:"fas fa-chart-simple",label:Nf.ADVANCED}],x=b[0],v=!1,C=!1,T=!1,S,M="0px";const O=()=>{switch(t(5,v=!1),t(6,C=!1),t(7,T=!1),x.label){case Nf.LAYERS:t(5,v=!0);break;case Nf.SEARCH:t(6,C=!0);break;case Nf.ADVANCED:t(7,T=!0);break}},V=()=>{G()},G=()=>{if(!!S){if(w===!0)if(f)S.setPercent(100),t(9,M="0px");else{const Fe=380/m*100;S.setPercent(Fe),t(9,M="10px")}else S.setPercent(0),t(9,M="0px");Z()}},Z=()=>{!o||(o.triggerRepaint(),o.resize())},te=()=>{Z(),S.getPercent()===0?t(0,w=!1):t(0,w=!0)};G();function J(){t(1,m=sg.innerWidth),t(2,r=sg.innerHeight)}const oe=Fe=>t(3,x=Fe);function Me(Fe){In[Fe?"unshift":"push"](()=>{S=Fe,t(8,S)})}return i.$$set=Fe=>{"open"in Fe&&t(0,w=Fe.open),"$$scope"in Fe&&t(16,u=Fe.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&_(),i.$$.dirty&4&&_(),i.$$.dirty&8&&O(),i.$$.dirty&1&&V()},[w,m,r,x,f,v,C,T,S,M,b,te,l,J,oe,Me,u]}class U9 extends vr{constructor(e){super(),br(this,e,j9,N9,mr,{open:0})}}const V9=i=>({noResultsText:i[0]&2048}),M5=i=>({noResultsText:i[11]}),q9=i=>({createText:i[0]&16384}),D5=i=>({createText:i[14]}),H9=i=>({loadingText:i[0]&4096}),O5=i=>({loadingText:i[12]});function F5(i,e,t){const o=i.slice();return o[116]=e[t],o[118]=t,o}const G9=i=>({item:i[1]&1,label:i[1]&1}),R5=i=>({item:i[116].item,label:i[116].highlighted?i[116].highlighted:i[116].label});function B5(i,e,t){const o=i.slice();return o[119]=e[t],o}const W9=i=>({label:i[0]&2,item:i[0]&2}),z5=i=>({label:i[38](i[119]),item:i[119],unselectItem:i[45]});function N5(i,e,t){const o=i.slice();return o[118]=e[t],o}function X9(i){let e,t=i[1],o=[];for(let l=0;l<t.length;l+=1)o[l]=j5(N5(i,t,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=gn()},l(l){for(let u=0;u<o.length;u+=1)o[u].l(l);e=gn()},m(l,u){for(let m=0;m<o.length;m+=1)o[m].m(l,u);qt(l,e,u)},p(l,u){if(u[0]&18|u[1]&128){t=l[1];let m;for(m=0;m<t.length;m+=1){const r=N5(l,t,m);o[m]?o[m].p(r,u):(o[m]=j5(r),o[m].c(),o[m].m(e.parentNode,e))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},d(l){oa(o,l),l&&Le(e)}}}function Y9(i){let e,t;return{c(){e=zt("option"),t=Xn(i[3]),this.h()},l(o){e=Nt(o,"OPTION",{class:!0});var l=Gt(e);t=Yn(l,i[3]),l.forEach(Le),this.h()},h(){e.__value=i[2],e.value=e.__value,e.selected=!0,Ht(e,"class","svelte-1nqq7zl")},m(o,l){qt(o,e,l),Dt(e,t)},p(o,l){l[0]&8&&Jo(t,o[3]),l[0]&4&&(e.__value=o[2],e.value=e.__value)},d(o){o&&Le(e)}}}function j5(i){let e,t=i[38](i[118])+"",o,l,u;return{c(){e=zt("option"),o=Xn(t),l=Yi(),this.h()},l(m){e=Nt(m,"OPTION",{class:!0});var r=Gt(e);o=Yn(r,t),l=Zi(r),r.forEach(Le),this.h()},h(){e.__value=u=i[4](i[118],!0),e.value=e.__value,e.selected=!0,Ht(e,"class","svelte-1nqq7zl")},m(m,r){qt(m,e,r),Dt(e,o),Dt(e,l)},p(m,r){r[0]&2&&t!==(t=m[38](m[118])+"")&&Jo(o,t),r[0]&18&&u!==(u=m[4](m[118],!0))&&(e.__value=u,e.value=e.__value)},d(m){m&&Le(e)}}}function U5(i){let e,t,o=i[1],l=[];for(let m=0;m<o.length;m+=1)l[m]=V5(B5(i,o,m));const u=m=>Ft(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);qt(m,e,r),t=!0},p(m,r){if(r[0]&2|r[1]&16512|r[2]&1048576){o=m[1];let f;for(f=0;f<o.length;f+=1){const _=B5(m,o,f);l[f]?(l[f].p(_,r),xt(l[f],1)):(l[f]=V5(_),l[f].c(),xt(l[f],1),l[f].m(e.parentNode,e))}for(Rr(),f=o.length;f<l.length;f+=1)u(f);Fr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)xt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Ft(l[r]);t=!1},d(m){oa(l,m),m&&Le(e)}}}function Z9(i){let e,t,o=i[38](i[119])+"",l,u,m,r,f,_;return{c(){e=zt("div"),t=zt("span"),l=Xn(o),u=Yi(),m=zt("span"),r=Yi(),this.h()},l(w){e=Nt(w,"DIV",{class:!0});var b=Gt(e);t=Nt(b,"SPAN",{class:!0});var x=Gt(t);l=Yn(x,o),x.forEach(Le),u=Zi(b),m=Nt(b,"SPAN",{class:!0}),Gt(m).forEach(Le),b.forEach(Le),r=Zi(w),this.h()},h(){Ht(t,"class","tag svelte-1nqq7zl"),Ht(m,"class","tag is-delete svelte-1nqq7zl"),Ht(e,"class","tags has-addons svelte-1nqq7zl")},m(w,b){qt(w,e,b),Dt(e,t),Dt(t,l),Dt(e,u),Dt(e,m),qt(w,r,b),f||(_=En(m,"click",uw(function(){So(i[45](i[119]))&&i[45](i[119]).apply(this,arguments)})),f=!0)},p(w,b){i=w,b[0]&2&&o!==(o=i[38](i[119])+"")&&Jo(l,o)},d(w){w&&Le(e),w&&Le(r),f=!1,_()}}}function V5(i){let e;const t=i[83].tag,o=xr(t,i,i[82],z5),l=o||Z9(i);return{c(){l&&l.c()},l(u){l&&l.l(u)},m(u,m){l&&l.m(u,m),e=!0},p(u,m){o?o.p&&(!e||m[0]&2|m[2]&1048576)&&Ar(o,t,u,u[82],e?Sr(t,u[82],m,W9):kr(u[82]),z5):l&&l.p&&(!e||m[0]&2)&&l.p(u,e?m:[-1,-1,-1,-1])},i(u){e||(xt(l,u),e=!0)},o(u){Ft(l,u),e=!1},d(u){l&&l.d(u)}}}function q5(i){let e,t,o,l;return{c(){e=zt("span"),t=Xn("\u2716"),this.h()},l(u){e=Nt(u,"SPAN",{class:!0});var m=Gt(e);t=Yn(m,"\u2716"),m.forEach(Le),this.h()},h(){Ht(e,"class","autocomplete-clear-button svelte-1nqq7zl")},m(u,m){qt(u,e,m),Dt(e,t),o||(l=En(e,"click",i[49]),o=!0)},p:eo,d(u){u&&Le(e),o=!1,l()}}}function K9(i){let e,t;const o=i[83]["no-results"],l=xr(o,i,i[82],M5),u=l||eM(i);return{c(){e=zt("div"),u&&u.c(),this.h()},l(m){e=Nt(m,"DIV",{class:!0});var r=Gt(e);u&&u.l(r),r.forEach(Le),this.h()},h(){Ht(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(m,r){qt(m,e,r),u&&u.m(e,null),t=!0},p(m,r){l?l.p&&(!t||r[0]&2048|r[2]&1048576)&&Ar(l,o,m,m[82],t?Sr(o,m[82],r,V9):kr(m[82]),M5):u&&u.p&&(!t||r[0]&2048)&&u.p(m,t?r:[-1,-1,-1,-1])},i(m){t||(xt(u,m),t=!0)},o(m){Ft(u,m),t=!1},d(m){m&&Le(e),u&&u.d(m)}}}function J9(i){let e,t,o,l;const u=i[83].create,m=xr(u,i,i[82],D5),r=m||tM(i);return{c(){e=zt("div"),r&&r.c(),this.h()},l(f){e=Nt(f,"DIV",{class:!0});var _=Gt(e);r&&r.l(_),_.forEach(Le),this.h()},h(){Ht(e,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(f,_){qt(f,e,_),r&&r.m(e,null),t=!0,o||(l=En(e,"click",i[39]),o=!0)},p(f,_){m?m.p&&(!t||_[0]&16384|_[2]&1048576)&&Ar(m,u,f,f[82],t?Sr(u,f[82],_,q9):kr(f[82]),D5):r&&r.p&&(!t||_[0]&16384)&&r.p(f,t?_:[-1,-1,-1,-1])},i(f){t||(xt(r,f),t=!0)},o(f){Ft(r,f),t=!1},d(f){f&&Le(e),r&&r.d(f),o=!1,l()}}}function Q9(i){let e,t;const o=i[83].loading,l=xr(o,i,i[82],O5),u=l||iM(i);return{c(){e=zt("div"),u&&u.c(),this.h()},l(m){e=Nt(m,"DIV",{class:!0});var r=Gt(e);u&&u.l(r),r.forEach(Le),this.h()},h(){Ht(e,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(m,r){qt(m,e,r),u&&u.m(e,null),t=!0},p(m,r){l?l.p&&(!t||r[0]&4096|r[2]&1048576)&&Ar(l,o,m,m[82],t?Sr(o,m[82],r,H9):kr(m[82]),O5):u&&u.p&&(!t||r[0]&4096)&&u.p(m,t?r:[-1,-1,-1,-1])},i(m){t||(xt(u,m),t=!0)},o(m){Ft(u,m),t=!1},d(m){m&&Le(e),u&&u.d(m)}}}function $9(i){let e,t,o,l=i[31],u=[];for(let f=0;f<l.length;f+=1)u[f]=G5(F5(i,l,f));const m=f=>Ft(u[f],1,1,()=>{u[f]=null});let r=i[5]>0&&i[31].length>i[5]&&W5(i);return{c(){for(let f=0;f<u.length;f+=1)u[f].c();e=Yi(),r&&r.c(),t=gn()},l(f){for(let _=0;_<u.length;_+=1)u[_].l(f);e=Zi(f),r&&r.l(f),t=gn()},m(f,_){for(let w=0;w<u.length;w+=1)u[w].m(f,_);qt(f,e,_),r&&r.m(f,_),qt(f,t,_),o=!0},p(f,_){if(_[0]&1073741856|_[1]&524801|_[2]&1048576){l=f[31];let w;for(w=0;w<l.length;w+=1){const b=F5(f,l,w);u[w]?(u[w].p(b,_),xt(u[w],1)):(u[w]=G5(b),u[w].c(),xt(u[w],1),u[w].m(e.parentNode,e))}for(Rr(),w=l.length;w<u.length;w+=1)m(w);Fr()}f[5]>0&&f[31].length>f[5]?r?r.p(f,_):(r=W5(f),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(f){if(!o){for(let _=0;_<l.length;_+=1)xt(u[_]);o=!0}},o(f){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)Ft(u[_]);o=!1},d(f){oa(u,f),f&&Le(e),r&&r.d(f),f&&Le(t)}}}function eM(i){let e;return{c(){e=Xn(i[11])},l(t){e=Yn(t,i[11])},m(t,o){qt(t,e,o)},p(t,o){o[0]&2048&&Jo(e,t[11])},d(t){t&&Le(e)}}}function tM(i){let e;return{c(){e=Xn(i[14])},l(t){e=Yn(t,i[14])},m(t,o){qt(t,e,o)},p(t,o){o[0]&16384&&Jo(e,t[14])},d(t){t&&Le(e)}}}function iM(i){let e;return{c(){e=Xn(i[12])},l(t){e=Yn(t,i[12])},m(t,o){qt(t,e,o)},p(t,o){o[0]&4096&&Jo(e,t[12])},d(t){t&&Le(e)}}}function H5(i){let e,t,o,l,u;const m=i[83].item,r=xr(m,i,i[82],R5),f=r||oM(i);function _(){return i[86](i[116])}function w(){return i[87](i[118])}return{c(){e=zt("div"),f&&f.c(),this.h()},l(b){e=Nt(b,"DIV",{class:!0});var x=Gt(e);f&&f.l(x),x.forEach(Le),this.h()},h(){Ht(e,"class",t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"),R0(e,"confirmed",i[50](i[116].item))},m(b,x){qt(b,e,x),f&&f.m(e,null),o=!0,l||(u=[En(e,"click",_),En(e,"pointerenter",w)],l=!0)},p(b,x){i=b,r?r.p&&(!o||x[1]&1|x[2]&1048576)&&Ar(r,m,i,i[82],o?Sr(m,i[82],x,G9):kr(i[82]),R5):f&&f.p&&(!o||x[1]&1)&&f.p(i,o?x:[-1,-1,-1,-1]),(!o||x[0]&1073741824&&t!==(t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"))&&Ht(e,"class",t),(!o||x[0]&1073741824|x[1]&524289)&&R0(e,"confirmed",i[50](i[116].item))},i(b){o||(xt(f,b),o=!0)},o(b){Ft(f,b),o=!1},d(b){b&&Le(e),f&&f.d(b),l=!1,qo(u)}}}function nM(i){let e,t=i[116].label+"",o;return{c(){e=new fw(!1),o=gn(),this.h()},l(l){e=dw(l,!1),o=gn(),this.h()},h(){e.a=o},m(l,u){e.m(t,l,u),qt(l,o,u)},p(l,u){u[1]&1&&t!==(t=l[116].label+"")&&e.p(t)},d(l){l&&Le(o),l&&e.d()}}}function rM(i){let e,t=i[116].highlighted+"",o;return{c(){e=new fw(!1),o=gn(),this.h()},l(l){e=dw(l,!1),o=gn(),this.h()},h(){e.a=o},m(l,u){e.m(t,l,u),qt(l,o,u)},p(l,u){u[1]&1&&t!==(t=l[116].highlighted+"")&&e.p(t)},d(l){l&&Le(o),l&&e.d()}}}function oM(i){let e;function t(u,m){return u[116].highlighted?rM:nM}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),qt(u,e,m)},p(u,m){o===(o=t(u))&&l?l.p(u,m):(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Le(e)}}}function G5(i){let e,t,o=i[116]&&(i[5]<=0||i[118]<i[5])&&H5(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),qt(l,e,u),t=!0},p(l,u){l[116]&&(l[5]<=0||l[118]<l[5])?o?(o.p(l,u),u[0]&32|u[1]&1&&xt(o,1)):(o=H5(l),o.c(),xt(o,1),o.m(e.parentNode,e)):o&&(Rr(),Ft(o,1,1,()=>{o=null}),Fr())},i(l){t||(xt(o),t=!0)},o(l){Ft(o),t=!1},d(l){o&&o.d(l),l&&Le(e)}}}function W5(i){let e,t=i[13]&&X5(i);return{c(){t&&t.c(),e=gn()},l(o){t&&t.l(o),e=gn()},m(o,l){t&&t.m(o,l),qt(o,e,l)},p(o,l){o[13]?t?t.p(o,l):(t=X5(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(o){t&&t.d(o),o&&Le(e)}}}function X5(i){let e,t,o=i[31].length-i[5]+"",l,u,m;return{c(){e=zt("div"),t=Xn("..."),l=Xn(o),u=Yi(),m=Xn(i[13]),this.h()},l(r){e=Nt(r,"DIV",{class:!0});var f=Gt(e);t=Yn(f,"..."),l=Yn(f,o),u=Zi(f),m=Yn(f,i[13]),f.forEach(Le),this.h()},h(){Ht(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(r,f){qt(r,e,f),Dt(e,t),Dt(e,l),Dt(e,u),Dt(e,m)},p(r,f){f[0]&32|f[1]&1&&o!==(o=r[31].length-r[5]+"")&&Jo(l,o),f[0]&8192&&Jo(m,r[13])},d(r){r&&Le(e)}}}function sM(i){let e,t,o,l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V,G;function Z(Se,me){if(!Se[6]&&Se[2])return Y9;if(Se[6]&&Se[1])return X9}let te=Z(i),J=te&&te(i),oe=i[6]&&i[1]&&U5(i),Me=i[35]&&q5(i);const Fe=[$9,Q9,J9,K9],pe=[];function Ie(Se,me){return Se[31]&&Se[31].length>0?0:Se[34]&&Se[12]?1:Se[7]?2:Se[11]?3:-1}return~(C=Ie(i))&&(T=pe[C]=Fe[C](i)),{c(){e=zt("div"),t=zt("select"),J&&J.c(),o=Yi(),l=zt("div"),oe&&oe.c(),u=Yi(),m=zt("input"),b=Yi(),Me&&Me.c(),x=Yi(),v=zt("div"),T&&T.c(),this.h()},l(Se){e=Nt(Se,"DIV",{class:!0});var me=Gt(e);t=Nt(me,"SELECT",{name:!0,id:!0,class:!0});var et=Gt(t);J&&J.l(et),et.forEach(Le),o=Zi(me),l=Nt(me,"DIV",{class:!0});var nt=Gt(l);oe&&oe.l(nt),u=Zi(nt),m=Nt(nt,"INPUT",{type:!0,class:!0,id:!0,autocomplete:!0,placeholder:!0,name:!0,title:!0,tabindex:!0}),b=Zi(nt),Me&&Me.l(nt),nt.forEach(Le),x=Zi(me),v=Nt(me,"DIV",{class:!0});var Et=Gt(v);T&&T.l(Et),Et.forEach(Le),me.forEach(Le),this.h()},h(){Ht(t,"name",i[20]),Ht(t,"id",i[21]),t.multiple=i[6],Ht(t,"class","svelte-1nqq7zl"),Ht(m,"type","text"),Ht(m,"class",r=(i[17]?i[17]:"")+" "+(i[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),Ht(m,"id",f=i[18]?i[18]:""),Ht(m,"autocomplete",_=i[23]?"on":"off"),Ht(m,"placeholder",i[15]),Ht(m,"name",i[19]),m.disabled=i[26],m.required=i[28],Ht(m,"title",i[22]),m.readOnly=w=i[24]||i[8]&&i[1],Ht(m,"tabindex",i[29]),Ht(l,"class","input-container svelte-1nqq7zl"),Ht(v,"class",S=(i[25]?i[25]:"")+" autocomplete-list "+(i[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),Ht(e,"class",M=(i[16]?i[16]:"")+" "+(i[9]||!i[0].length?"hide-arrow":"")+" "+(i[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+i[37]+" svelte-1nqq7zl"),R0(e,"show-clear",i[35]),R0(e,"is-loading",i[10]&&i[34])},m(Se,me){qt(Se,e,me),Dt(e,t),J&&J.m(t,null),Dt(e,o),Dt(e,l),oe&&oe.m(l,null),Dt(l,u),Dt(l,m),i[84](m),ed(m,i[3]),Dt(l,b),Me&&Me.m(l,null),Dt(e,x),Dt(e,v),~C&&pe[C].m(v,null),i[88](v),O=!0,V||(G=[En(window,"click",i[41]),En(m,"input",i[85]),En(m,"input",i[44]),En(m,"focus",i[47]),En(m,"blur",i[48]),En(m,"keydown",i[42]),En(m,"click",i[46]),En(m,"keypress",i[43])],V=!0)},p(Se,me){te===(te=Z(Se))&&J?J.p(Se,me):(J&&J.d(1),J=te&&te(Se),J&&(J.c(),J.m(t,null))),(!O||me[0]&1048576)&&Ht(t,"name",Se[20]),(!O||me[0]&2097152)&&Ht(t,"id",Se[21]),(!O||me[0]&64)&&(t.multiple=Se[6]),Se[6]&&Se[1]?oe?(oe.p(Se,me),me[0]&66&&xt(oe,1)):(oe=U5(Se),oe.c(),xt(oe,1),oe.m(l,u)):oe&&(Rr(),Ft(oe,1,1,()=>{oe=null}),Fr()),(!O||me[0]&134348800&&r!==(r=(Se[17]?Se[17]:"")+" "+(Se[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&Ht(m,"class",r),(!O||me[0]&262144&&f!==(f=Se[18]?Se[18]:""))&&Ht(m,"id",f),(!O||me[0]&8388608&&_!==(_=Se[23]?"on":"off"))&&Ht(m,"autocomplete",_),(!O||me[0]&32768)&&Ht(m,"placeholder",Se[15]),(!O||me[0]&524288)&&Ht(m,"name",Se[19]),(!O||me[0]&67108864)&&(m.disabled=Se[26]),(!O||me[0]&268435456)&&(m.required=Se[28]),(!O||me[0]&4194304)&&Ht(m,"title",Se[22]),(!O||me[0]&16777474&&w!==(w=Se[24]||Se[8]&&Se[1]))&&(m.readOnly=w),(!O||me[0]&536870912)&&Ht(m,"tabindex",Se[29]),me[0]&8&&m.value!==Se[3]&&ed(m,Se[3]),Se[35]?Me?Me.p(Se,me):(Me=q5(Se),Me.c(),Me.m(l,null)):Me&&(Me.d(1),Me=null);let et=C;C=Ie(Se),C===et?~C&&pe[C].p(Se,me):(T&&(Rr(),Ft(pe[et],1,1,()=>{pe[et]=null}),Fr()),~C?(T=pe[C],T?T.p(Se,me):(T=pe[C]=Fe[C](Se),T.c()),xt(T,1),T.m(v,null)):T=null),(!O||me[0]&33554432|me[1]&32&&S!==(S=(Se[25]?Se[25]:"")+" autocomplete-list "+(Se[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&Ht(v,"class",S),(!O||me[0]&66113&&M!==(M=(Se[16]?Se[16]:"")+" "+(Se[9]||!Se[0].length?"hide-arrow":"")+" "+(Se[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+Se[37]+" svelte-1nqq7zl"))&&Ht(e,"class",M),(!O||me[0]&66113|me[1]&16)&&R0(e,"show-clear",Se[35]),(!O||me[0]&67137|me[1]&8)&&R0(e,"is-loading",Se[10]&&Se[34])},i(Se){O||(xt(oe),xt(T),O=!0)},o(Se){Ft(oe),Ft(T),O=!1},d(Se){Se&&Le(e),J&&J.d(),oe&&oe.d(),i[84](null),Me&&Me.d(),~C&&pe[C].d(),i[88](null),V=!1,qo(G)}}}function aM(i,e){if(typeof i!="function"){console.error("Not a function: "+i+", argument: "+e);return}let t;try{t=i(e)}catch{console.warn("Error executing Autocomplete function on value: "+e+" function: "+i)}return t}function Xp(i,e){let t=aM(i,e);return t==null&&(t=""),typeof t!="string"&&(t=t.toString()),t}function ag(i,e){if(!i)return 0;const t=i.keywords;let o=0;return e.forEach(l=>{t.includes(l)&&o++}),o}function lM(i,e,t){return ag(e,t)-ag(i,t)}function Yp(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function uM(i,e,t){let o,l,{$$slots:u={},$$scope:m}=e,{items:r=[]}=e,{searchFunction:f=!1}=e,{labelFieldName:_=void 0}=e,{keywordsFieldName:w=_}=e,{valueFieldName:b=void 0}=e,{labelFunction:x=function(Mt){return Mt==null?"":_?Mt[_]:Mt}}=e,{keywordsFunction:v=function(Mt){return Mt==null?"":w?Mt[w]:x(Mt)}}=e,{valueFunction:C=function(Mt,tr=!1){return Mt==null?Mt:!Me||tr?b?Mt[b]:Mt:Mt.map(rr=>b?rr[b]:rr)}}=e,{keywordsCleanFunction:T=function(Mt){return Mt}}=e,{textCleanFunction:S=function(Mt){return Mt}}=e,{beforeChange:M=function(Mt,tr){return!0}}=e,{onChange:O=function(Mt){}}=e,{onFocus:V=function(){}}=e,{onBlur:G=function(){}}=e,{onCreate:Z=function(Mt){mi&&console.log("onCreate: "+Mt)}}=e,{selectFirstIfEmpty:te=!1}=e,{minCharactersToSearch:J=1}=e,{maxItemsToShowInList:oe=0}=e,{multiple:Me=!1}=e,{create:Fe=!1}=e,{ignoreAccents:pe=!0}=e,{matchAllKeywords:Ie=!0}=e,{sortByMatchedKeywords:Se=!1}=e,{itemFilterFunction:me=void 0}=e,{itemSortFunction:et=void 0}=e,{lock:nt=!1}=e,{delay:Et=0}=e,{localFiltering:it=!0}=e,{localSorting:we=!0}=e,{cleanUserText:ke=!0}=e,{closeOnBlur:Oe=!1}=e,{hideArrow:le=!1}=e,{showClear:Ce=!1}=e,{showLoadingIndicator:he=!1}=e,{noResultsText:ge="No results found"}=e,{loadingText:Be="Loading results..."}=e,{moreItemsText:We="items not shown"}=e,{createText:st="Not found, add anyway?"}=e,{placeholder:Xe=void 0}=e,{className:gt=void 0}=e,{inputClassName:Pt=void 0}=e,{inputId:ri=void 0}=e,{name:ut=void 0}=e,{selectName:bt=void 0}=e,{selectId:vt=void 0}=e,{title:Ke=void 0}=e,{html5autocomplete:ei=void 0}=e,{readonly:li=void 0}=e,{dropdownClassName:$t=void 0}=e,{disabled:Si=!1}=e,{noInputStyles:Ti=!1}=e,{required:Yt=null}=e,{debug:mi=!1}=e,{tabindex:Wi=0}=e,{selectedItem:Ci=Me?[]:void 0}=e,{value:ti=void 0}=e,{highlightedItem:Pe=void 0}=e;const Q="sautocomplete-"+Math.floor(Math.random()*1e3);let ae,Qe,_t=!1,Jt=!1,di=-1,{text:wn}=e,Ln=0,hn,Bi=[],Xi=0,Hn=0,Gn;function Zr(Mt){return Xp(x,Mt)}function zn(Mt){const tr=Xp(v,Mt);let rr=Xp(T,tr);return rr=rr.toLowerCase().trim(),pe&&(rr=Yp(rr)),mi&&console.log("Extracted keywords: '"+rr+"' from item: "+JSON.stringify(Mt)),rr}function fn(){let Mt;mi&&(Mt=`Autocomplete prepare list ${ri?`(id: ${ri})`:""}`,console.time(Mt),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(r))),Array.isArray(r)||(console.warn("Autocomplete items / search function did not return array but",r),t(0,r=[]));const tr=r?r.length:0;Bi=new Array(tr),tr>0&&r.forEach((rr,zr)=>{const Xo=yn(rr);Xo===void 0&&console.log("Undefined item for: ",rr),Bi[zr]=Xo}),t(31,hn=Bi),mi&&(console.log(Bi.length+" items to search"),console.timeEnd(Mt))}function yn(Mt){return{keywords:it?zn(Mt):[],label:Zr(Mt),item:Mt}}function tn(){t(2,ti=C(Ci)),t(3,wn=Me?"":Zr(Ci)),t(31,hn=Bi),O(Ci)}function wr(Mt){if(Mt==null)return"";if(!ke)return Mt;const tr=Mt.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return Xp(S,tr).toLowerCase().trim()}async function Wn(){let Mt;mi&&(Mt=`Autocomplete search ${ri?`(id: ${ri})`:""}`,console.time(Mt),console.log("Searching user entered text: '"+wn+"'"));let tr=wr(wn);if(J>1&&tr.length<J&&(tr=""),t(81,Ln=tr.length),mi&&console.log("Changed user entered text '"+wn+"' into '"+tr+"'"),tr===""){f?(t(0,r=[]),mi&&console.log("User entered text is empty clear list of items")):(t(31,hn=Bi),mi&&console.log("User entered text is empty set the list of items to all items")),sr(),mi&&console.timeEnd(Mt);return}if(!f)Kr(tr);else{Xi=Xi+1;const rr=Xi;if(t(34,Jt=!0),f.constructor.name==="AsyncGeneratorFunction"){for await(const zr of f(tr,oe)){if(rr<Hn)return!1;rr>Hn&&t(0,r=[]),Hn=rr,t(0,r=[...r,...zr]),Kr(tr)}Hn<rr&&(Hn=rr,t(0,r=[]),Kr(tr))}else{let zr=await f(tr,oe);if(rr<Hn)return!1;Hn=rr,t(0,r=zr),Kr(tr)}t(34,Jt=!1)}mi&&(console.timeEnd(Mt),console.log("Search found "+hn.length+" items"))}function lr(Mt,tr){const rr=ag(Mt,tr);return Ie?rr>=tr.length:rr>0}function Kr(Mt){fn();const rr=(pe?Yp(Mt):Mt).split(/\s+/g).filter(Do=>Do!=="");let zr;it?(me?zr=Bi.filter(Do=>me(Do.item,rr)):zr=Bi.filter(Do=>lr(Do,rr)),we&&(et?zr=zr.sort((Do,Ea)=>et(Do.item,Ea.item,rr)):Se&&(zr=zr.sort((Do,Ea)=>lM(Do,Ea,rr))))):zr=Bi;const Xo=Mr(rr,"label");return t(31,hn=zr.map(Xo)),sr(),!0}function rn(Mt){let tr;if(mi&&console.log("createdItem",Mt),typeof Mt<"u"){fn(),t(31,hn=Bi);let rr=wt(Mt,hn);rr<=0&&(t(0,r=[Mt]),fn(),t(31,hn=Bi),rr=0),rr>=0&&(t(30,di=rr),tr=hn[di])}return tr}function He(Mt){if(mi&&console.log("selectListItem",Mt),typeof Mt>"u"&&Fe){const rr=Z(wn);if(typeof rr<"u"){if(typeof rr.then=="function")return rr.then(zr=>{if(typeof zr<"u"){const Xo=rn(zr);typeof Xo<"u"&&He(Xo)}}),!0;Mt=rn(rr)}}if(typeof Mt>"u")return mi&&console.log("listItem is undefined. Can not select."),!1;if(nt&&Ci)return!0;const tr=Mt.item;return M(Ci,tr)&&(Me?Ci?Ci.includes(tr)?t(1,Ci=Ci.filter(rr=>rr!==tr)):t(1,Ci=[...Ci,tr]):t(1,Ci=[tr]):(t(1,Ci=void 0),t(1,Ci=tr))),!0}function yo(){mi&&console.log("selectItem",di);const Mt=hn[di];He(Mt)?(mi&&console.log("selectListItem true, closing"),Jn(),Me&&ae.focus()):mi&&console.log("selectListItem false, not closing")}function _o(){mi&&console.log("up"),Tn(),di>0&&t(30,di--,di),Te()}function co(){mi&&console.log("down"),Tn(),di<hn.length-1&&t(30,di++,di),Te()}function Te(){mi&&console.log("highlight");const Mt=".selected";mi&&console.log("Seaching DOM element: "+Mt+" in "+Qe);const tr=Qe&&Qe.querySelector(Mt);tr?typeof tr.scrollIntoViewIfNeeded=="function"?(mi&&console.log("Scrolling selected item into view"),tr.scrollIntoViewIfNeeded()):tr.scrollIntoView==="function"?(mi&&console.log("Scrolling selected item into view"),tr.scrollIntoView()):mi&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):mi&&console.warn("Selected item not found to scroll into view")}function Ee(Mt){mi&&console.log("onListItemClick"),He(Mt)&&(Jn(),Me&&ae.focus())}function qe(Mt){mi&&console.log("onDocumentClick"),Mt.composedPath().some(tr=>tr.classList&&tr.classList.contains(Q))?(mi&&console.log("onDocumentClick inside"),Te()):(mi&&console.log("onDocumentClick outside"),Jn())}function ct(Mt){mi&&console.log("onKeyDown");let tr=Mt.key;tr==="Tab"&&Mt.shiftKey&&(tr="ShiftTab");const zr={Tab:_t?Jn():null,ShiftTab:_t?Jn():null,ArrowDown:co.bind(this),ArrowUp:_o.bind(this),Escape:yt.bind(this),Backspace:Me&&Ci&&Ci.length&&!wn?Ri.bind(this):null}[tr];typeof zr=="function"&&zr(Mt)}function dt(Mt){mi&&console.log("onKeyPress"),Mt.key==="Enter"&&(Mt.preventDefault(),jt())}function jt(){yo()}function Ge(Mt){mi&&console.log("onInput"),t(3,wn=Mt.target.value),Gn&&clearTimeout(Gn),Et?Gn=setTimeout(Rt,Et):Rt()}function Zt(Mt){mi&&console.log("unselectItem",Mt),t(1,Ci=Ci.filter(tr=>tr!==Mt)),ae.focus()}function Rt(){Wn()&&(t(30,di=0),Tn())}function oi(){mi&&console.log("onInputClick"),An()}function yt(Mt){mi&&console.log("onEsc"),Mt.stopPropagation(),_t&&(ae.focus(),Jn())}function Ri(Mt){mi&&console.log("onBackspace"),Zt(Ci[Ci.length-1])}function Ii(){mi&&console.log("onFocus"),V(),An()}function Sn(){mi&&console.log("onBlur"),Oe&&Jn(),G()}function An(){if(mi&&console.log("resetListToAllItemsAndOpen"),wn?!Bi.length&&Ci&&f&&Wn():t(31,hn=Bi),Tn(),Ci){mi&&console.log("Searching currently selected item: "+JSON.stringify(Ci));const Mt=wt(Ci,hn);Mt>=0&&(t(30,di=Mt),Te())}}function wt(Mt,tr){mi&&console.log("Finding index for item",Mt);let rr=-1;for(let zr=0;zr<tr.length;zr++){const Xo=tr[zr];if(typeof Xo>"u"){mi&&console.log(`listItem ${zr} is undefined. Skipping.`);continue}if(mi&&console.log("Item "+zr+": "+JSON.stringify(Xo)),Mt===Xo.item){rr=zr;break}}return mi&&(rr>=0?console.log("Found index for item: "+rr):console.warn("Not found index for item: "+Mt)),rr}function Tn(){mi&&console.log("open"),!Pr()&&t(80,_t=!0)}function Jn(){mi&&console.log("close"),t(80,_t=!1),t(34,Jt=!1),!wn&&te&&(t(30,di=0),yo())}function Pr(){return J>1&&Ln<J}function sr(){Pr()&&Jn()}function Cr(){mi&&console.log("clear"),t(3,wn=""),t(1,Ci=Me?[]:void 0),setTimeout(()=>{ae.focus(),Jn()})}function Mr(Mt,tr){return rr=>{let zr=rr[tr];const Xo=Object.assign({highlighted:void 0},rr);Xo.highlighted=zr;const Do=zr.toLowerCase(),Ea=pe?Yp(Do):Do;if(Mt&&Mt.length){const es=[];for(let Us=0;Us<Mt.length;Us++){let ys=Mt[Us];pe&&(ys=Yp(ys));const Ia=ys.length;let ks=0;do if(ks=Ea.indexOf(ys,ks),ks>=0){let Ks=ks+Ia;es.push([ks,Ks]),ks=Ks}while(ks!==-1)}if(es.length>0){const Us=new Set;for(let ys=0;ys<es.length;ys++){const Ia=es[ys],ks=Ia[0],Ks=Ia[1],Vs=Do.substring(ks,Ks);Us.add(Vs)}for(let ys of Us){if(ys==="b")continue;const Ia=new RegExp("("+ys+")","ig"),ks=Xo.highlighted.replace(Ia,"<b>$1</b>");Xo.highlighted=ks}}}return Xo}}function io(Mt){return Ci?Me?Ci.includes(Mt):Mt===Ci:!1}function Jr(Mt){In[Mt?"unshift":"push"](()=>{ae=Mt,t(32,ae)})}function mo(){wn=this.value,t(3,wn)}const Qo=Mt=>Ee(Mt),nl=Mt=>{t(30,di=Mt)};function Mo(Mt){In[Mt?"unshift":"push"](()=>{Qe=Mt,t(33,Qe)})}return i.$$set=Mt=>{"items"in Mt&&t(0,r=Mt.items),"searchFunction"in Mt&&t(52,f=Mt.searchFunction),"labelFieldName"in Mt&&t(53,_=Mt.labelFieldName),"keywordsFieldName"in Mt&&t(54,w=Mt.keywordsFieldName),"valueFieldName"in Mt&&t(55,b=Mt.valueFieldName),"labelFunction"in Mt&&t(56,x=Mt.labelFunction),"keywordsFunction"in Mt&&t(57,v=Mt.keywordsFunction),"valueFunction"in Mt&&t(4,C=Mt.valueFunction),"keywordsCleanFunction"in Mt&&t(58,T=Mt.keywordsCleanFunction),"textCleanFunction"in Mt&&t(59,S=Mt.textCleanFunction),"beforeChange"in Mt&&t(60,M=Mt.beforeChange),"onChange"in Mt&&t(61,O=Mt.onChange),"onFocus"in Mt&&t(62,V=Mt.onFocus),"onBlur"in Mt&&t(63,G=Mt.onBlur),"onCreate"in Mt&&t(64,Z=Mt.onCreate),"selectFirstIfEmpty"in Mt&&t(65,te=Mt.selectFirstIfEmpty),"minCharactersToSearch"in Mt&&t(66,J=Mt.minCharactersToSearch),"maxItemsToShowInList"in Mt&&t(5,oe=Mt.maxItemsToShowInList),"multiple"in Mt&&t(6,Me=Mt.multiple),"create"in Mt&&t(7,Fe=Mt.create),"ignoreAccents"in Mt&&t(67,pe=Mt.ignoreAccents),"matchAllKeywords"in Mt&&t(68,Ie=Mt.matchAllKeywords),"sortByMatchedKeywords"in Mt&&t(69,Se=Mt.sortByMatchedKeywords),"itemFilterFunction"in Mt&&t(70,me=Mt.itemFilterFunction),"itemSortFunction"in Mt&&t(71,et=Mt.itemSortFunction),"lock"in Mt&&t(8,nt=Mt.lock),"delay"in Mt&&t(72,Et=Mt.delay),"localFiltering"in Mt&&t(73,it=Mt.localFiltering),"localSorting"in Mt&&t(74,we=Mt.localSorting),"cleanUserText"in Mt&&t(75,ke=Mt.cleanUserText),"closeOnBlur"in Mt&&t(76,Oe=Mt.closeOnBlur),"hideArrow"in Mt&&t(9,le=Mt.hideArrow),"showClear"in Mt&&t(77,Ce=Mt.showClear),"showLoadingIndicator"in Mt&&t(10,he=Mt.showLoadingIndicator),"noResultsText"in Mt&&t(11,ge=Mt.noResultsText),"loadingText"in Mt&&t(12,Be=Mt.loadingText),"moreItemsText"in Mt&&t(13,We=Mt.moreItemsText),"createText"in Mt&&t(14,st=Mt.createText),"placeholder"in Mt&&t(15,Xe=Mt.placeholder),"className"in Mt&&t(16,gt=Mt.className),"inputClassName"in Mt&&t(17,Pt=Mt.inputClassName),"inputId"in Mt&&t(18,ri=Mt.inputId),"name"in Mt&&t(19,ut=Mt.name),"selectName"in Mt&&t(20,bt=Mt.selectName),"selectId"in Mt&&t(21,vt=Mt.selectId),"title"in Mt&&t(22,Ke=Mt.title),"html5autocomplete"in Mt&&t(23,ei=Mt.html5autocomplete),"readonly"in Mt&&t(24,li=Mt.readonly),"dropdownClassName"in Mt&&t(25,$t=Mt.dropdownClassName),"disabled"in Mt&&t(26,Si=Mt.disabled),"noInputStyles"in Mt&&t(27,Ti=Mt.noInputStyles),"required"in Mt&&t(28,Yt=Mt.required),"debug"in Mt&&t(78,mi=Mt.debug),"tabindex"in Mt&&t(29,Wi=Mt.tabindex),"selectedItem"in Mt&&t(1,Ci=Mt.selectedItem),"value"in Mt&&t(2,ti=Mt.value),"highlightedItem"in Mt&&t(51,Pe=Mt.highlightedItem),"text"in Mt&&t(3,wn=Mt.text),"$$scope"in Mt&&t(82,m=Mt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&1|i.$$.dirty[1]&2097152&&(f||fn()),i.$$.dirty[0]&2&&tn(),i.$$.dirty[0]&1073741824|i.$$.dirty[1]&1&&t(51,Pe=hn&&di&&di>=0&&di<hn.length?hn[di].item:null),i.$$.dirty[0]&1|i.$$.dirty[2]&786432&&t(36,o=_t&&(r&&r.length>0||Ln>0)),i.$$.dirty[0]&322|i.$$.dirty[2]&32768&&t(35,l=Ce||(nt||Me)&&Ci)},[r,Ci,ti,wn,C,oe,Me,Fe,nt,le,he,ge,Be,We,st,Xe,gt,Pt,ri,ut,bt,vt,Ke,ei,li,$t,Si,Ti,Yt,Wi,di,hn,ae,Qe,Jt,l,o,Q,Zr,yo,Ee,qe,ct,dt,Ge,Zt,oi,Ii,Sn,Cr,io,Pe,f,_,w,b,x,v,T,S,M,O,V,G,Z,te,J,pe,Ie,Se,me,et,Et,it,we,ke,Oe,Ce,mi,Mr,_t,Ln,m,u,Jr,mo,Qo,nl,Mo]}class cM extends vr{constructor(e){super(),br(this,e,uM,sM,mr,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function hM(i){let e,t,o,l,u;function m(_){i[9](_)}function r(_){i[10](_)}let f={items:i[4],placeholder:i[0].placeholder,hideArrow:!1,showClear:!0,showLoadingIndicator:!1,labelFunction:i[7],maxItemsToShowInList:"10"};return i[1]!==void 0&&(f.selectedItem=i[1]),i[3]!==void 0&&(f.onChange=i[3]),t=new cM({props:f}),i[8](t),In.push(()=>To(t,"selectedItem",m)),In.push(()=>To(t,"onChange",r)),{c(){e=zt("div"),ln(t.$$.fragment),this.h()},l(_){e=Nt(_,"DIV",{class:!0});var w=Gt(e);pn(t.$$.fragment,w),w.forEach(Le),this.h()},h(){Ht(e,"class","data-container")},m(_,w){qt(_,e,w),un(t,e,null),i[11](e),u=!0},p(_,[w]){const b={};w&1&&(b.placeholder=_[0].placeholder),w&1&&(b.labelFunction=_[7]),!o&&w&2&&(o=!0,b.selectedItem=_[1],Lo(()=>o=!1)),!l&&w&8&&(l=!0,b.onChange=_[3],Lo(()=>l=!1)),t.$set(b)},i(_){u||(xt(t.$$.fragment,_),u=!0)},o(_){Ft(t.$$.fragment,_),u=!1},d(_){_&&Le(e),i[8](null),cn(t),i[11](null)}}}function fM(i,e,t){let{map:o}=e,{searchOption:l}=e,{position:u="top-left"}=e;const m=ep();let r=[],f={},_={},w,b;function x(){}x.prototype.onAdd=function(Z){return this.map=Z,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl",this.controlContainer.appendChild(b),this.controlContainer},x.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map=void 0)};const v=()=>{if(!(f&&Object.keys(f).length>0)||!(_&&Object.keys(_).length>0&&_.key))return;const Z=f[_.key];if(!Z)return;const te=Z.geometry.coordinates;o.flyTo({center:te,zoom:l.zoom,curve:1}),w&&(w.remove(),w=void 0),w=new Tu.exports.Marker({draggable:!0}).setLngLat(te).addTo(o),m("zoomed")};let C=()=>{_||w&&(w.remove(),w=void 0)},T=null;Ds(async()=>{if(!o)return;T=new x,o.hasControl(T)===!1&&o.addControl(T,u),(await(await fetch(l.url)).json()).features.forEach(J=>{const oe=J.geometry.coordinates.join(","),Me=JSON.parse(JSON.stringify(J));Me.properties={},l.target.forEach(Fe=>{J.properties[Fe]&&(Me.properties[Fe]=J.properties[Fe])}),Object.keys(Me.properties).length!==0&&(Me.properties.key=oe,r.push(Me.properties),f[oe]=JSON.parse(JSON.stringify(J)))})});const S=Z=>Z?l.format(Z):"";function M(Z){In[Z?"unshift":"push"](()=>{b=Z,t(2,b)})}function O(Z){_=Z,t(1,_)}function V(Z){C=Z,t(3,C)}function G(Z){In[Z?"unshift":"push"](()=>{b=Z,t(2,b)})}return i.$$set=Z=>{"map"in Z&&t(5,o=Z.map),"searchOption"in Z&&t(0,l=Z.searchOption),"position"in Z&&t(6,u=Z.position)},i.$$.update=()=>{i.$$.dirty&2&&v()},[l,_,b,C,r,o,u,S,M,O,V,G]}class dM extends vr{constructor(e){super(),br(this,e,fM,hM,mr,{map:5,searchOption:0,position:6})}}var P3={};Object.defineProperty(P3,"__esModule",{value:!0});class uf{constructor(e,t){this.areas=e||uf.DEFAULT_AREAS,this.limit_no_areas=t||uf.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){this.map=e;const t=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const o of this.areas){const l=document.createElement("button");l.innerText=o.title,l.classList.add(o.title.replace(/[^a-z0-9-]/gi,"_")),l.value=JSON.stringify({center:o.latlng,zoom:o.zoom}),l.addEventListener("click",u=>{const m=u.srcElement;this.map.jumpTo(JSON.parse(m.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const r=this.mapAreaContainer.getElementsByClassName("active");for(;r[0];)r[0].classList.remove("active");m.classList.add("active")}),o.title===uf.DEFAULT_AREA&&l.classList.add("active"),this.mapAreaContainer.appendChild(l)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(o){!o.target||t.map.flyTo(JSON.parse(o.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(o){var l=document.createElement("option");l.setAttribute("type","option"),l.text=o.title,l.value=JSON.stringify({center:o.latlng,zoom:o.zoom}),t.select.appendChild(l)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var pM=P3.default=uf;uf.DEFAULT_AREA="Narok";uf.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];uf.DEFAULT_NO_AREAS=5;function Y5(i,e,t){const o=i.slice();return o[12]=e[t],o}function Z5(i,e,t){const o=i.slice();return o[15]=e[t],o}function K5(i,e,t){const o=i.slice();return o[15]=e[t],o}function J5(i){let e;function t(u,m){return u[3]?gM:mM}let o=t(i),l=o(i);return{c(){e=zt("div"),l.c(),this.h()},l(u){e=Nt(u,"DIV",{class:!0});var m=Gt(e);l.l(m),m.forEach(Le),this.h()},h(){Ht(e,"class","select is-fullwidth mb-2 is-success")},m(u,m){qt(u,e,m),l.m(e,null)},p(u,m){o===(o=t(u))&&l?l.p(u,m):(l.d(1),l=o(u),l&&(l.c(),l.m(e,null)))},d(u){u&&Le(e),l.d()}}}function mM(i){let e,t,o,l=i[0],u=[];for(let m=0;m<l.length;m+=1)u[m]=Q5(Z5(i,l,m));return{c(){e=zt("select");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){e=Nt(m,"SELECT",{class:!0});var r=Gt(e);for(let f=0;f<u.length;f+=1)u[f].l(r);r.forEach(Le),this.h()},h(){Ht(e,"class","is-focused"),i[2]===void 0&&Ua(()=>i[8].call(e))},m(m,r){qt(m,e,r);for(let f=0;f<u.length;f+=1)u[f].m(e,null);Ys(e,i[2]),t||(o=En(e,"change",i[8]),t=!0)},p(m,r){if(r&1){l=m[0];let f;for(f=0;f<l.length;f+=1){const _=Z5(m,l,f);u[f]?u[f].p(_,r):(u[f]=Q5(_),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}r&5&&Ys(e,m[2])},d(m){m&&Le(e),oa(u,m),t=!1,o()}}}function gM(i){let e,t,o,l=i[0],u=[];for(let m=0;m<l.length;m+=1)u[m]=$5(K5(i,l,m));return{c(){e=zt("select");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){e=Nt(m,"SELECT",{class:!0});var r=Gt(e);for(let f=0;f<u.length;f+=1)u[f].l(r);r.forEach(Le),this.h()},h(){Ht(e,"class","is-focused"),e.disabled=!0,i[2]===void 0&&Ua(()=>i[7].call(e))},m(m,r){qt(m,e,r);for(let f=0;f<u.length;f+=1)u[f].m(e,null);Ys(e,i[2]),t||(o=En(e,"change",i[7]),t=!0)},p(m,r){if(r&1){l=m[0];let f;for(f=0;f<l.length;f+=1){const _=K5(m,l,f);u[f]?u[f].p(_,r):(u[f]=$5(_),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}r&5&&Ys(e,m[2])},d(m){m&&Le(e),oa(u,m),t=!1,o()}}}function Q5(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&Jo(o,t),m&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function $5(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,o,l;return{c(){e=zt("option"),o=Xn(t),this.h()},l(u){e=Nt(u,"OPTION",{});var m=Gt(e);o=Yn(m,t),m.forEach(Le),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,m){qt(u,e,m),Dt(e,o)},p(u,m){m&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&Jo(o,t),m&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&Le(e)}}}function ew(i){let e,t;function o(m,r){return r&4&&(t=null),t==null&&(t=Object.keys(m[2].properties).length>0),t?_M:yM}let l=o(i,-1),u=l(i);return{c(){e=zt("div"),u.c(),this.h()},l(m){e=Nt(m,"DIV",{class:!0});var r=Gt(e);u.l(r),r.forEach(Le),this.h()},h(){Ht(e,"class","popup-table svelte-15dh02j")},m(m,r){qt(m,e,r),u.m(e,null)},p(m,r){l===(l=o(m,r))&&u?u.p(m,r):(u.d(1),u=l(m),u&&(u.c(),u.m(e,null)))},d(m){m&&Le(e),u.d()}}}function yM(i){let e,t,o=i[2].sourceLayer+"",l,u;return{c(){e=zt("div"),t=Xn("No attributes in the selected layer '"),l=Xn(o),u=Xn("'"),this.h()},l(m){e=Nt(m,"DIV",{class:!0});var r=Gt(e);t=Yn(r,"No attributes in the selected layer '"),l=Yn(r,o),u=Yn(r,"'"),r.forEach(Le),this.h()},h(){Ht(e,"class","notification is-info is-light")},m(m,r){qt(m,e,r),Dt(e,t),Dt(e,l),Dt(e,u)},p(m,r){r&4&&o!==(o=m[2].sourceLayer+"")&&Jo(l,o)},d(m){m&&Le(e)}}}function _M(i){let e,t=Object.keys(i[2].properties),o=[];for(let l=0;l<t.length;l+=1)o[l]=tw(Y5(i,t,l));return{c(){e=zt("table");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=Nt(l,"TABLE",{class:!0});var u=Gt(e);for(let m=0;m<o.length;m+=1)o[m].l(u);u.forEach(Le),this.h()},h(){Ht(e,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth")},m(l,u){qt(l,e,u);for(let m=0;m<o.length;m+=1)o[m].m(e,null)},p(l,u){if(u&4){t=Object.keys(l[2].properties);let m;for(m=0;m<t.length;m+=1){const r=Y5(l,t,m);o[m]?o[m].p(r,u):(o[m]=tw(r),o[m].c(),o[m].m(e,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},d(l){l&&Le(e),oa(o,l)}}}function tw(i){let e,t,o=i[12]+"",l,u,m=i[2].properties[i[12]]+"",r;return{c(){e=zt("tr"),t=zt("th"),l=Xn(o),u=zt("td"),r=Xn(m)},l(f){e=Nt(f,"TR",{});var _=Gt(e);t=Nt(_,"TH",{});var w=Gt(t);l=Yn(w,o),w.forEach(Le),u=Nt(_,"TD",{});var b=Gt(u);r=Yn(b,m),b.forEach(Le),_.forEach(Le)},m(f,_){qt(f,e,_),Dt(e,t),Dt(t,l),Dt(e,u),Dt(u,r)},p(f,_){_&4&&o!==(o=f[12]+"")&&Jo(l,o),_&4&&m!==(m=f[2].properties[f[12]]+"")&&Jo(r,m)},d(f){f&&Le(e)}}}function vM(i){let e,t,o=i[0]&&i[0].length>0&&J5(i),l=i[2]&&ew(i);return{c(){e=zt("div"),o&&o.c(),t=Yi(),l&&l.c()},l(u){e=Nt(u,"DIV",{});var m=Gt(e);o&&o.l(m),t=Zi(m),l&&l.l(m),m.forEach(Le)},m(u,m){qt(u,e,m),o&&o.m(e,null),Dt(e,t),l&&l.m(e,null),i[9](e)},p(u,[m]){u[0]&&u[0].length>0?o?o.p(u,m):(o=J5(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),u[2]?l?l.p(u,m):(l=ew(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:eo,o:eo,d(u){u&&Le(e),o&&o.d(),l&&l.d(),i[9](null)}}}function bM(i,e,t){let o,{map:l}=e,{targetLayers:u=[]}=e,m,r,f=[],_;function w(){}w.prototype.onAdd=function(T){return this.map=T,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},w.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),t(0,f=[]),t(2,_=void 0),m&&(m.remove(),m=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},w.prototype.onClick=function(T){if(!this.isActive){t(0,f=[]),t(2,_=void 0);return}let S=[];u.length>0?u.forEach(O=>{this.map.getLayer(O)&&S.push(O)}):S=l.getStyle().layers.map(O=>O.id);const M=this.map.queryRenderedFeatures(T.point,{layers:S});t(0,f=M),t(2,_=f[0]),f.length>0?m=new Tu.exports.Popup().setLngLat(T.lngLat).setDOMContent(r).setMaxWidth("300px").addTo(l):m&&(m.remove(),m=void 0)},w.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let b=null;Ds(async()=>{t(6,b=new w)});function x(){_=Ac(this),t(2,_),t(0,f)}function v(){_=Ac(this),t(2,_),t(0,f)}function C(T){In[T?"unshift":"push"](()=>{r=T,t(1,r)})}return i.$$set=T=>{"map"in T&&t(4,l=T.map),"targetLayers"in T&&t(5,u=T.targetLayers)},i.$$.update=()=>{i.$$.dirty&1&&t(3,o=f.length===1),i.$$.dirty&80&&l&&b!==null&&l.hasControl(b)===!1&&l.addControl(b,"top-right")},[f,r,_,o,l,u,b,x,v,C]}class wM extends vr{constructor(e){super(),br(this,e,bM,vM,mr,{map:4,targetLayers:5})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Sh={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},Z1={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Xc={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xM=Xc.ARIA_LIVE_DELAY_MS,iw=Z1.ARIA_LIVE_LABEL_TEXT_ATTR;function AM(i,e){e===void 0&&(e=i);var t=i.getAttribute("aria-live"),o=e.textContent.trim();!o||!t||(i.setAttribute("aria-live","off"),e.textContent="",e.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',e.setAttribute(iw,o),setTimeout(function(){i.setAttribute("aria-live",t),e.removeAttribute(iw),e.textContent=o},xM))}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nw=Sh.OPENING,rw=Sh.OPEN,ow=Sh.CLOSING,kM=Z1.REASON_ACTION,E2=Z1.REASON_DISMISS,SM=function(i){Nl(e,i);function e(t){var o=i.call(this,hs(hs({},e.defaultAdapter),t))||this;return o.opened=!1,o.animationFrame=0,o.animationTimer=0,o.autoDismissTimer=0,o.autoDismissTimeoutMs=Xc.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,o.closeOnEscape=!0,o}return Object.defineProperty(e,"cssClasses",{get:function(){return Sh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Z1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Xc},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(nw),this.adapter.removeClass(rw),this.adapter.removeClass(ow)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(ow),this.adapter.addClass(nw),this.adapter.announce(),this.runNextAnimationFrame(function(){t.adapter.addClass(rw),t.animationTimer=setTimeout(function(){var o=t.getTimeoutMs();t.handleAnimationTimerEnd(),t.adapter.notifyOpened(),o!==Xc.INDETERMINATE&&(t.autoDismissTimer=setTimeout(function(){t.close(E2)},o))},Xc.SNACKBAR_ANIMATION_OPEN_TIME_MS)})},e.prototype.close=function(t){var o=this;t===void 0&&(t=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(t),this.adapter.addClass(Sh.CLOSING),this.adapter.removeClass(Sh.OPEN),this.adapter.removeClass(Sh.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){o.handleAnimationTimerEnd(),o.adapter.notifyClosed(t)},Xc.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.opened},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},e.prototype.setTimeoutMs=function(t){var o=Xc.MIN_AUTO_DISMISS_TIMEOUT_MS,l=Xc.MAX_AUTO_DISMISS_TIMEOUT_MS,u=Xc.INDETERMINATE;if(t===Xc.INDETERMINATE||t<=l&&t>=o)this.autoDismissTimeoutMs=t;else throw new Error(`
        timeoutMs must be an integer in the range `+o+"\u2013"+l+`
        (or `+u+" to disable), but got '"+t+"'")},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape=t},e.prototype.handleKeyDown=function(t){var o=t.key==="Escape"||t.keyCode===27;o&&this.getCloseOnEscape()&&this.close(E2)},e.prototype.handleActionButtonClick=function(t){this.close(kM)},e.prototype.handleActionIconClick=function(t){this.close(E2)},e.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},e.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Sh.OPENING),this.adapter.removeClass(Sh.CLOSING)},e.prototype.runNextAnimationFrame=function(t){var o=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){o.animationFrame=0,clearTimeout(o.animationTimer),o.animationTimer=setTimeout(t,0)})},e}(ic);function CM(i){let e,t,o,l,u,m,r,f,_;const w=i[25].default,b=xr(w,i,i[24],null);let x=[{class:o=_r({[i[4]]:!0,"mdc-snackbar__surface":!0})},{role:"status"},{"aria-relevant":"additions"},fo(i[12],"surface$")],v={};for(let S=0;S<x.length;S+=1)v=en(v,x[S]);let C=[{class:u=_r({[i[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":i[2]==="stacked","mdc-snackbar--leading":i[3],...i[8]})},cf(i[12],["surface$"])],T={};for(let S=0;S<C.length;S+=1)T=en(T,C[S]);return{c(){e=zt("aside"),t=zt("div"),b&&b.c(),this.h()},l(S){e=Nt(S,"ASIDE",{class:!0});var M=Gt(e);t=Nt(M,"DIV",{class:!0,role:!0,"aria-relevant":!0});var O=Gt(t);b&&b.l(O),O.forEach(Le),M.forEach(Le),this.h()},h(){dr(t,v),dr(e,T)},m(S,M){qt(S,e,M),Dt(e,t),b&&b.m(t,null),i[26](e),r=!0,f||(_=[pr(l=Wo.call(null,t,i[5])),En(t,"click",i[10]),pr(m=Wo.call(null,e,i[0])),pr(i[9].call(null,e)),En(e,"SMUISnackbar:closed",i[11]),En(e,"keydown",i[27])],f=!0)},p(S,M){b&&b.p&&(!r||M[0]&16777216)&&Ar(b,w,S,S[24],r?Sr(w,S[24],M,null):kr(S[24]),null),dr(t,v=Tr(x,[(!r||M[0]&16&&o!==(o=_r({[S[4]]:!0,"mdc-snackbar__surface":!0})))&&{class:o},{role:"status"},{"aria-relevant":"additions"},M[0]&4096&&fo(S[12],"surface$")])),l&&So(l.update)&&M[0]&32&&l.update.call(null,S[5]),dr(e,T=Tr(C,[(!r||M[0]&270&&u!==(u=_r({[S[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":S[2]==="stacked","mdc-snackbar--leading":S[3],...S[8]})))&&{class:u},M[0]&4096&&cf(S[12],["surface$"])])),m&&So(m.update)&&M[0]&1&&m.update.call(null,S[0])},i(S){r||(xt(b,S),r=!0)},o(S){Ft(b,S),r=!1},d(S){S&&Le(e),b&&b.d(S),i[26](null),f=!1,qo(_)}}}let sw=Promise.resolve();function EM(i,e,t){const o=["use","class","variant","leading","timeoutMs","closeOnEscape","labelText","actionButtonText","surface$class","surface$use","open","forceOpen","close","isOpen","getLabelElement","getActionButtonElement","getElement"];let l=or(e,o),{$$slots:u={},$$scope:m}=e;const{closest:r}=C1,f=No(zo());let _=()=>{};function w(Ce){return Ce===_}let{use:b=[]}=e,{class:x=""}=e,{variant:v=""}=e,{leading:C=!1}=e,{timeoutMs:T=5e3}=e,{closeOnEscape:S=!0}=e,{labelText:M=_}=e,{actionButtonText:O=_}=e,{surface$class:V=""}=e,{surface$use:G=[]}=e,Z,te,J={},oe,Me=new Promise(Ce=>oe=Ce);ws("SMUI:label:context","snackbar"),Ds(()=>(t(6,te=new SM({addClass:Fe,announce:()=>AM(it()),notifyClosed:Ce=>cs(ke(),"SMUISnackbar:closed",Ce?{reason:Ce}:{},void 0,!0),notifyClosing:Ce=>cs(ke(),"SMUISnackbar:closing",Ce?{reason:Ce}:{},void 0,!0),notifyOpened:()=>cs(ke(),"SMUISnackbar:opened",void 0,void 0,!0),notifyOpening:()=>cs(ke(),"SMUISnackbar:opening",void 0,void 0,!0),removeClass:pe})),te.init(),()=>{te.destroy()}));function Fe(Ce){J[Ce]||t(8,J[Ce]=!0,J)}function pe(Ce){(!(Ce in J)||J[Ce])&&t(8,J[Ce]=!1,J)}function Ie(Ce){const he=Ce.target;te&&(r(he,".mdc-snackbar__action")?te.handleActionButtonClick(Ce):r(he,".mdc-snackbar__dismiss")&&te.handleActionIconClick(Ce))}function Se(){oe(),Me=new Promise(Ce=>oe=Ce)}function me(){sw=sw.then(()=>(te.open(),Me))}function et(){return te.open()}function nt(Ce){return te.close(Ce)}function Et(){return te.isOpen()}function it(){var Ce;return(Ce=ke().querySelector(".mdc-snackbar__label"))!==null&&Ce!==void 0?Ce:document.createElement("div")}function we(){var Ce;return(Ce=ke().querySelector(".mdc-snackbar__action"))!==null&&Ce!==void 0?Ce:document.createElement("button")}function ke(){return Z}function Oe(Ce){In[Ce?"unshift":"push"](()=>{Z=Ce,t(7,Z)})}const le=Ce=>te&&te.handleKeyDown(Ce);return i.$$set=Ce=>{e=en(en({},e),Po(Ce)),t(12,l=or(e,o)),"use"in Ce&&t(0,b=Ce.use),"class"in Ce&&t(1,x=Ce.class),"variant"in Ce&&t(2,v=Ce.variant),"leading"in Ce&&t(3,C=Ce.leading),"timeoutMs"in Ce&&t(13,T=Ce.timeoutMs),"closeOnEscape"in Ce&&t(14,S=Ce.closeOnEscape),"labelText"in Ce&&t(15,M=Ce.labelText),"actionButtonText"in Ce&&t(16,O=Ce.actionButtonText),"surface$class"in Ce&&t(4,V=Ce.surface$class),"surface$use"in Ce&&t(5,G=Ce.surface$use),"$$scope"in Ce&&t(24,m=Ce.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8256&&te&&te.getTimeoutMs()!==T&&te.setTimeoutMs(T),i.$$.dirty[0]&16448&&te&&te.getCloseOnEscape()!==S&&te.setCloseOnEscape(S),i.$$.dirty[0]&32832&&te&&!w(M)&&it().textContent!==M&&(it().textContent=M),i.$$.dirty[0]&65600&&te&&!w(O)&&we().textContent!==O&&(we().textContent=O)},[b,x,v,C,V,G,te,Z,J,f,Ie,Se,l,T,S,M,O,me,et,nt,Et,it,we,ke,m,u,Oe,le]}class IM extends vr{constructor(e){super(),br(this,e,EM,CM,mr,{use:0,class:1,variant:2,leading:3,timeoutMs:13,closeOnEscape:14,labelText:15,actionButtonText:16,surface$class:4,surface$use:5,open:17,forceOpen:18,close:19,isOpen:20,getLabelElement:21,getActionButtonElement:22,getElement:23},null,[-1,-1])}get open(){return this.$$.ctx[17]}get forceOpen(){return this.$$.ctx[18]}get close(){return this.$$.ctx[19]}get isOpen(){return this.$$.ctx[20]}get getLabelElement(){return this.$$.ctx[21]}get getActionButtonElement(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}const TM=Mu({class:"mdc-snackbar__actions",props:{"aria-atomic":"true"},contexts:{"SMUI:button:context":"snackbar:actions","SMUI:icon-button:context":"snackbar:actions","SMUI:label:context":void 0},component:E1});function LM(i){let e;return{c(){e=Xn(i[1])},l(t){e=Yn(t,i[1])},m(t,o){qt(t,e,o)},p(t,o){o&2&&Jo(e,t[1])},d(t){t&&Le(e)}}}function PM(i){let e,t,o,l;return{c(){e=zt("div"),t=zt("i"),this.h()},l(u){e=Nt(u,"DIV",{class:!0,style:!0});var m=Gt(e);t=Nt(m,"I",{class:!0}),Gt(t).forEach(Le),m.forEach(Le),this.h()},h(){Ht(t,"class","fas fa-xmark"),Ht(e,"class","icon is-small menu-button svelte-ffzutn"),ec(e,"color","white")},m(u,m){qt(u,e,m),Dt(e,t),o||(l=En(e,"click",i[3]),o=!0)},p:eo,d(u){u&&Le(e),o=!1,l()}}}function MM(i){let e,t,o,l;return e=new gf({props:{$$slots:{default:[LM]},$$scope:{ctx:i}}}),o=new TM({props:{$$slots:{default:[PM]},$$scope:{ctx:i}}}),{c(){ln(e.$$.fragment),t=Yi(),ln(o.$$.fragment)},l(u){pn(e.$$.fragment,u),t=Zi(u),pn(o.$$.fragment,u)},m(u,m){un(e,u,m),qt(u,t,m),un(o,u,m),l=!0},p(u,m){const r={};m&34&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&33&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(xt(e.$$.fragment,u),xt(o.$$.fragment,u),l=!0)},o(u){Ft(e.$$.fragment,u),Ft(o.$$.fragment,u),l=!1},d(u){cn(e,u),u&&Le(t),cn(o,u)}}}function DM(i){let e,t,o={$$slots:{default:[MM]},$$scope:{ctx:i}};return e=new IM({props:o}),i[4](e),{c(){ln(e.$$.fragment)},l(l){pn(e.$$.fragment,l)},m(l,u){un(e,l,u),t=!0},p(l,[u]){const m={};u&35&&(m.$$scope={dirty:u,ctx:l}),e.$set(m)},i(l){t||(xt(e.$$.fragment,l),t=!0)},o(l){Ft(e.$$.fragment,l),t=!1},d(l){i[4](null),cn(e,l)}}}function OM(i,e,t){let o;As(i,U2,f=>t(2,o=f));let l,u;const m=()=>l.close();function r(f){In[f?"unshift":"push"](()=>{l=f,t(0,l)})}return i.$$.update=()=>{i.$$.dirty&5&&o&&o.length>0&&l&&(t(1,u=o.shift()),l.open())},[l,u,o,m,r]}class FM extends vr{constructor(e){super(),br(this,e,OM,DM,mr,{})}}function aw(i){let e,t,o,l,u,m=i[0].search&&lw(i);function r(w){i[7](w)}function f(w){i[8](w)}let _={};return i[3]!==void 0&&(_.map=i[3]),i[0].popup.target!==void 0&&(_.targetLayers=i[0].popup.target),t=new wM({props:_}),In.push(()=>To(t,"map",r)),In.push(()=>To(t,"targetLayers",f)),{c(){m&&m.c(),e=Yi(),ln(t.$$.fragment)},l(w){m&&m.l(w),e=Zi(w),pn(t.$$.fragment,w)},m(w,b){m&&m.m(w,b),qt(w,e,b),un(t,w,b),u=!0},p(w,b){w[0].search?m?(m.p(w,b),b&1&&xt(m,1)):(m=lw(w),m.c(),xt(m,1),m.m(e.parentNode,e)):m&&(Rr(),Ft(m,1,1,()=>{m=null}),Fr());const x={};!o&&b&8&&(o=!0,x.map=w[3],Lo(()=>o=!1)),!l&&b&1&&(l=!0,x.targetLayers=w[0].popup.target,Lo(()=>l=!1)),t.$set(x)},i(w){u||(xt(m),xt(t.$$.fragment,w),u=!0)},o(w){Ft(m),Ft(t.$$.fragment,w),u=!1},d(w){m&&m.d(w),w&&Le(e),cn(t,w)}}}function lw(i){let e,t,o,l;function u(f){i[5](f)}function m(f){i[6](f)}let r={position:"top-left"};return i[3]!==void 0&&(r.map=i[3]),i[0].search!==void 0&&(r.searchOption=i[0].search),e=new dM({props:r}),In.push(()=>To(e,"map",u)),In.push(()=>To(e,"searchOption",m)),{c(){ln(e.$$.fragment)},l(f){pn(e.$$.fragment,f)},m(f,_){un(e,f,_),l=!0},p(f,_){const w={};!t&&_&8&&(t=!0,w.map=f[3],Lo(()=>t=!1)),!o&&_&1&&(o=!0,w.searchOption=f[0].search,Lo(()=>o=!1)),e.$set(w)},i(f){l||(xt(e.$$.fragment,f),l=!0)},o(f){Ft(e.$$.fragment,f),l=!1},d(f){cn(e,f)}}}function RM(i){let e,t,o,l,u,m,r=i[2]&&aw(i);return u=new FM({}),{c(){e=zt("div"),t=zt("div"),o=Yi(),r&&r.c(),l=Yi(),ln(u.$$.fragment),this.h()},l(f){e=Nt(f,"DIV",{class:!0});var _=Gt(e);t=Nt(_,"DIV",{class:!0,id:!0}),Gt(t).forEach(Le),o=Zi(_),r&&r.l(_),_.forEach(Le),l=Zi(f),pn(u.$$.fragment,f),this.h()},h(){Ht(t,"class","map svelte-1bahl15"),Ht(t,"id","map"),Ht(e,"class","map-wrap svelte-1bahl15")},m(f,_){qt(f,e,_),Dt(e,t),i[4](t),Dt(e,o),r&&r.m(e,null),qt(f,l,_),un(u,f,_),m=!0},p(f,[_]){f[2]?r?(r.p(f,_),_&4&&xt(r,1)):(r=aw(f),r.c(),xt(r,1),r.m(e,null)):r&&(Rr(),Ft(r,1,1,()=>{r=null}),Fr())},i(f){m||(xt(r),xt(u.$$.fragment,f),m=!0)},o(f){Ft(r),Ft(u.$$.fragment,f),m=!1},d(f){f&&Le(e),i[4](null),r&&r.d(),f&&Le(l),cn(u,f)}}}function BM(i,e,t){let o;As(i,nu,x=>t(3,o=x));let l,u,m=!1;Ds(async()=>{const x=new Uw,v=fr.styles[0],C=x.get();let T=v;if(C){const G=x.getMatchedStyleByTitle(fr.styles,C);G&&(T=G)}Gd.update(()=>T);const S=new Tu.exports.Map({container:l,style:T.uri,center:fr.center,zoom:fr.zoom,hash:!0,attributionControl:!1});S.addControl(new Tu.exports.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"top-right"),S.addControl(new Tu.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),S.addControl(new Tu.exports.FullscreenControl({container:document.querySelector("body")})),S.addControl(new Tu.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),S.addControl(new Tu.exports.AttributionControl({compact:!0}),"bottom-right"),fr.terrain&&(S.setMaxPitch(85),S.addControl(new Tu.exports.TerrainControl(fr.terrain))),fr.areaSwitcher&&S.addControl(new pM(fr.areaSwitcher.areas),"top-right");const M=()=>{S.loadImage(`${fr.basePath}/map-center.png`,(G,Z)=>{if(G)throw G;S.hasImage("map-center")||S.addImage("map-center",Z),S.getSource("center")||(u={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[S.getCenter().lng,S.getCenter().lat]}}]}},S.addSource("center",u)),S.getLayer("points")||S.addLayer({id:"points",type:"symbol",source:"center",layout:{"icon-image":"map-center","icon-size":.3}})})};S.on("load",()=>{t(2,m=!0),M(),S.on("moveend",()=>{S.getSource("center")?(u.data.features[0].geometry.coordinates=[S.getCenter().lng,S.getCenter().lat],S.getSource("center").setData(u.data)):M()})});let O=["wss","pipeline","watersource"],V;S.on("mousemove","wss",function(G){G.features.length>0&&(V&&O.forEach(Z=>{o.setFeatureState({source:"assets",sourceLayer:Z,id:V},{hover:!1})}),V=G.features[0].id,O.forEach(Z=>{o.setFeatureState({source:"assets",sourceLayer:Z,id:V},{hover:!0})}))}),S.on("mouseleave","wss",function(){V&&O.forEach(G=>{o.setFeatureState({source:"assets",sourceLayer:G,id:V},{hover:!1})}),V=null}),nu.update(()=>S)});function r(x){In[x?"unshift":"push"](()=>{l=x,t(1,l)})}function f(x){o=x,nu.set(o)}function _(x){i.$$.not_equal(fr.search,x)&&(fr.search=x,t(0,fr))}function w(x){o=x,nu.set(o)}function b(x){i.$$.not_equal(fr.popup.target,x)&&(fr.popup.target=x,t(0,fr))}return[fr,l,m,o,r,f,_,w,b]}class zM extends vr{constructor(e){super(),br(this,e,BM,RM,mr,{})}}function NM(i){let e,t;return e=new zM({}),{c(){ln(e.$$.fragment)},l(o){pn(e.$$.fragment,o)},m(o,l){un(e,o,l),t=!0},i(o){t||(xt(e.$$.fragment,o),t=!0)},o(o){Ft(e.$$.fragment,o),t=!1},d(o){cn(e,o)}}}function jM(i){let e,t,o=fr.title+"",l,u,m,r,f,_,w,b,x,v,C,T,S,M,O,V;function G(oe){i[1](oe)}let Z={};i[0]!==void 0&&(Z.drawerOpen=i[0]),C=new fA({props:Z}),In.push(()=>To(C,"drawerOpen",G));function te(oe){i[2](oe)}let J={$$slots:{default:[NM]},$$scope:{ctx:i}};return i[0]!==void 0&&(J.open=i[0]),M=new U9({props:J}),In.push(()=>To(M,"open",te)),{c(){e=zt("sveltekit:head"),t=zt("title"),l=Xn(o),u=Yi(),m=zt("script"),f=Yi(),_=zt("script"),w=Xn(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-3');`),b=Yi(),x=zt("link"),v=Yi(),ln(C.$$.fragment),S=Yi(),ln(M.$$.fragment),this.h()},l(oe){e=Nt(oe,"SVELTEKIT:HEAD",{});var Me=Gt(e);t=Nt(Me,"TITLE",{});var Fe=Gt(t);l=Yn(Fe,o),Fe.forEach(Le),u=Zi(Me),m=Nt(Me,"SCRIPT",{src:!0});var pe=Gt(m);pe.forEach(Le),f=Zi(Me),_=Nt(Me,"SCRIPT",{});var Ie=Gt(_);w=Yn(Ie,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-3');`),Ie.forEach(Le),b=Zi(Me),x=Nt(Me,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0,referrerpolicy:!0}),Me.forEach(Le),v=Zi(oe),pn(C.$$.fragment,oe),S=Zi(oe),pn(M.$$.fragment,oe),this.h()},h(){m.async=!0,cw(m.src,r="https://www.googletagmanager.com/gtag/js?id=UA-170080825-3")||Ht(m,"src",r),Ht(x,"rel","stylesheet"),Ht(x,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"),Ht(x,"integrity","sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="),Ht(x,"crossorigin","anonymous"),Ht(x,"referrerpolicy","no-referrer")},m(oe,Me){qt(oe,e,Me),Dt(e,t),Dt(t,l),Dt(e,u),Dt(e,m),Dt(e,f),Dt(e,_),Dt(_,w),Dt(e,b),Dt(e,x),qt(oe,v,Me),un(C,oe,Me),qt(oe,S,Me),un(M,oe,Me),V=!0},p(oe,[Me]){const Fe={};!T&&Me&1&&(T=!0,Fe.drawerOpen=oe[0],Lo(()=>T=!1)),C.$set(Fe);const pe={};Me&16&&(pe.$$scope={dirty:Me,ctx:oe}),!O&&Me&1&&(O=!0,pe.open=oe[0],Lo(()=>O=!1)),M.$set(pe)},i(oe){V||(xt(C.$$.fragment,oe),xt(M.$$.fragment,oe),V=!0)},o(oe){Ft(C.$$.fragment,oe),Ft(M.$$.fragment,oe),V=!1},d(oe){oe&&Le(e),oe&&Le(v),cn(C,oe),oe&&Le(S),cn(M,oe)}}}function UM(i,e,t){let o=!1;const l=fr.styles[0];Gd.update(()=>l);function u(r){o=r,t(0,o)}function m(r){o=r,t(0,o)}return[o,u,m]}class YM extends vr{constructor(e){super(),br(this,e,UM,jM,mr,{})}}export{YM as P,O0 as c};
