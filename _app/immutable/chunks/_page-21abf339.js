var j4=Object.defineProperty;var U4=(n,i,o)=>i in n?j4(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o;var wo=(n,i,o)=>(U4(n,typeof i!="symbol"?i+"":i,o),o);import{S as Xo,i as Yo,s as qo,k as st,a as Yi,l as at,m as ft,h as Ee,c as Ji,n as rt,I as Nh,b as vi,G as We,J as x0,K as rn,f as rr,g as Js,t as Cr,d as Ks,L as th,e as ln,M as bs,C as qu,D as Vu,E as Gu,F as Hu,q as Nr,r as Fr,B as ao,N as po,u as os,O as q4,P as $d,Q as X_,R as Y_,T as Ts,w as ko,x as Ao,y as Eo,U as Ls,z as So,V as dp,o as E0,W as Uu,X as Aa,Y as _s,Z as c2,p as ih,H as ul,_ as Bf,$ as Af,a0 as V4,a1 as G4,a2 as H4,a3 as Cf,a4 as J_,a5 as ep,a6 as K_}from"./index-7ff8e55d.js";import{w as rh}from"./singletons-081f223a.js";import{_ as tp}from"./preload-helper-aa6bc0ce.js";import{p as W4}from"./stores-8a8a96c8.js";var Z4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yl={exports:{}};(function(n,i){(function(o,l){n.exports=l()})(Z4,function(){var o,l,p;function m(h,E){if(!o)o=E;else if(!l)l=E;else{var L="var sharedChunk = {}; ("+o+")(sharedChunk); ("+l+")(sharedChunk);",z={};o(z),p=E(z),typeof window<"u"&&(p.workerUrl=window.URL.createObjectURL(new Blob([L],{type:"text/javascript"})))}}m(["exports"],function(h){var E=L;function L(d,a,g,x){this.cx=3*d,this.bx=3*(g-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(x-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=a,this.p2x=g,this.p2y=x}function z(d,a,g,x){const T=new E(d,a,g,x);return function(D){return T.solve(D)}}L.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,a){if(a===void 0&&(a=1e-6),d<0)return 0;if(d>1)return 1;for(var g=d,x=0;x<8;x++){var T=this.sampleCurveX(g)-d;if(Math.abs(T)<a)return g;var D=this.sampleCurveDerivativeX(g);if(Math.abs(D)<1e-6)break;g-=T/D}var O=0,Z=1;for(g=d,x=0;x<20&&(T=this.sampleCurveX(g),!(Math.abs(T-d)<a));x++)d>T?O=g:Z=g,g=.5*(Z-O)+O;return g},solve:function(d,a){return this.sampleCurveY(this.solveCurveX(d,a))}};const U=z(.25,.1,.25,1);function q(d,a,g){return Math.min(g,Math.max(a,d))}function B(d,a,g){const x=g-a,T=((d-a)%x+x)%x+a;return T===a?g:T}function K(d,...a){for(const g of a)for(const x in g)d[x]=g[x];return d}let J=1;function se(d,a){d.forEach(g=>{a[g]&&(a[g]=a[g].bind(a))})}function ne(d,a,g){const x={};for(const T in d)x[T]=a.call(g||this,d[T],T,d);return x}function re(d,a,g){const x={};for(const T in d)a.call(g||this,d[T],T,d)&&(x[T]=d[T]);return x}function ke(d){return Array.isArray(d)?d.map(ke):typeof d=="object"&&d?ne(d,ke):d}const Pe={};function be(d){Pe[d]||(typeof console<"u"&&console.warn(d),Pe[d]=!0)}function pe(d,a,g){return(g.y-d.y)*(a.x-d.x)>(a.y-d.y)*(g.x-d.x)}function ye(d){let a=0;for(let g,x,T=0,D=d.length,O=D-1;T<D;O=T++)g=d[T],x=d[O],a+=(x.x-g.x)*(g.y+x.y);return a}function me(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tt(d){const a={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(g,x,T,D)=>{const O=T||D;return a[x]=!O||O.toLowerCase(),""}),a["max-age"]){const g=parseInt(a["max-age"],10);isNaN(g)?delete a["max-age"]:a["max-age"]=g}return a}let nt,Se,Me=null;function Ge(d){if(Me==null){const a=d.navigator?d.navigator.userAgent:null;Me=!!d.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Me}function Xe(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const _t={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(d){const a=requestAnimationFrame(d);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(d,a=0){const g=window.document.createElement("canvas"),x=g.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return g.width=d.width,g.height=d.height,x.drawImage(d,0,0,d.width,d.height),x.getImageData(-a,-a,d.width+2*a,d.height+2*a)},resolveURL:d=>(nt||(nt=document.createElement("a")),nt.href=d,nt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Se==null&&(Se=matchMedia("(prefers-reduced-motion: reduce)")),Se.matches)}};var pt=Gt;function Gt(d,a){this.x=d,this.y=a}Gt.prototype={clone:function(){return new Gt(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,a){return this.clone()._rotateAround(d,a)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(d){var a=d.x-this.x,g=d.y-this.y;return a*a+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,a){return Math.atan2(this.x*a-this.y*d,this.x*d+this.y*a)},_matMult:function(d){var a=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=a,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(d){var a=Math.cos(d),g=Math.sin(d),x=g*this.x+a*this.y;return this.x=a*this.x-g*this.y,this.y=x,this},_rotateAround:function(d,a){var g=Math.cos(d),x=Math.sin(d),T=a.y+x*(this.x-a.x)+g*(this.y-a.y);return this.x=a.x+g*(this.x-a.x)-x*(this.y-a.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Gt.convert=function(d){return d instanceof Gt?d:Array.isArray(d)?new Gt(d[0],d[1]):d};const kt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Xt="mapbox-tiles";let Mt,qt,ve=500,it=50;function Re(){typeof caches>"u"||Mt||(Mt=caches.open(Xt))}let bt=1/0;const Ct={supported:!1,testSupport:function(d){!Wt&&Ht&&(si?ri(d):Ot=d)}};let Ot,Ht,Wt=!1,si=!1;function ri(d){const a=d.createTexture();d.bindTexture(d.TEXTURE_2D,a);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,Ht),d.isContextLost())return;Ct.supported=!0}catch{}d.deleteTexture(a),Wt=!0}typeof document<"u"&&(Ht=document.createElement("img"),Ht.onload=function(){Ot&&ri(Ot),Ot=null,si=!0},Ht.onerror=function(){Wt=!0,Ot=null},Ht.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const zi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(zi);class Di extends Error{constructor(a,g,x,T){super(`AJAXError: ${g} (${a}): ${x}`),this.status=a,this.statusText=g,this.url=x,this.body=T}}const er=me()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Zt(d,a){const g=new AbortController,x=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:er(),signal:g.signal});let T=!1,D=!1;return d.type==="json"&&x.headers.set("Accept","application/json"),((O,Z,ee)=>{if(D)return;const ue=Date.now();fetch(x).then(_e=>_e.ok?((Ce,Ue,Ze)=>{(d.type==="arrayBuffer"?Ce.arrayBuffer():d.type==="json"?Ce.json():Ce.text()).then(Ye=>{D||(Ue&&Ze&&function(Dt,Lt,oi){if(Re(),!Mt)return;const xi={status:Lt.status,statusText:Lt.statusText,headers:new Headers};Lt.headers.forEach((mi,Oi)=>xi.headers.set(Oi,mi));const ti=tt(Lt.headers.get("Cache-Control")||"");ti["no-store"]||(ti["max-age"]&&xi.headers.set("Expires",new Date(oi+1e3*ti["max-age"]).toUTCString()),new Date(xi.headers.get("Expires")).getTime()-oi<42e4||function(mi,Oi){if(qt===void 0)try{new Response(new ReadableStream),qt=!0}catch{qt=!1}qt?Oi(mi.body):mi.blob().then(Oi)}(Lt,mi=>{const Oi=new Response(mi,xi);Re(),Mt&&Mt.then(Fi=>Fi.put(function(Lr){const Or=Lr.indexOf("?");return Or<0?Lr:Lr.slice(0,Or)}(Dt.url),Oi)).catch(Fi=>be(Fi.message))}))}(x,Ue,Ze),T=!0,a(null,Ye,Ce.headers.get("Cache-Control"),Ce.headers.get("Expires")))}).catch(Ye=>{D||a(new Error(Ye.message))})})(_e,null,ue):_e.blob().then(Ce=>a(new Di(_e.status,_e.statusText,d.url,Ce)))).catch(_e=>{_e.code!==20&&a(new Error(_e.message))})})(),{cancel:()=>{D=!0,T||g.abort()}}}const yt=function(d,a){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){if(me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",d,a);if(!me()){const x=d.url.substring(0,d.url.indexOf("://"));return(kt.REGISTERED_PROTOCOLS[x]||Zt)(d,a)}}if(!(/^file:/.test(g=d.url)||/^file:/.test(er())&&!/^\w+:/.test(g))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Zt(d,a);if(me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",d,a,void 0,!0)}var g;return function(x,T){const D=new XMLHttpRequest;D.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(D.responseType="arraybuffer");for(const O in x.headers)D.setRequestHeader(O,x.headers[O]);return x.type==="json"&&(D.responseType="text",D.setRequestHeader("Accept","application/json")),D.withCredentials=x.credentials==="include",D.onerror=()=>{T(new Error(D.statusText))},D.onload=()=>{if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let O=D.response;if(x.type==="json")try{O=JSON.parse(D.response)}catch(Z){return T(Z)}T(null,O,D.getResponseHeader("Cache-Control"),D.getResponseHeader("Expires"))}else{const O=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});T(new Di(D.status,D.statusText,x.url,O))}},D.send(x.body),{cancel:()=>D.abort()}}(d,a)},$i=function(d,a){return yt(K(d,{type:"arrayBuffer"}),a)};function nr(d){const a=window.document.createElement("a");return a.href=d,a.protocol===window.document.location.protocol&&a.host===window.document.location.host}const di="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Hi,Ki;Hi=[],Ki=0;const Ui=function(d,a){if(Ct.supported&&(d.headers||(d.headers={}),d.headers.accept="image/webp,*/*"),Ki>=kt.MAX_PARALLEL_IMAGE_REQUESTS){const D={requestParameters:d,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Hi.push(D),D}Ki++;let g=!1;const x=()=>{if(!g)for(g=!0,Ki--;Hi.length&&Ki<kt.MAX_PARALLEL_IMAGE_REQUESTS;){const D=Hi.shift(),{requestParameters:O,callback:Z,cancelled:ee}=D;ee||(D.cancel=Ui(O,Z).cancel)}},T=$i(d,(D,O,Z,ee)=>{x(),D?a(D):O&&function(ue,_e){typeof createImageBitmap=="function"?function(Ce,Ue){const Ze=new Blob([new Uint8Array(Ce)],{type:"image/png"});createImageBitmap(Ze).then(Ye=>{Ue(null,Ye)}).catch(Ye=>{Ue(new Error(`Could not load image because of ${Ye.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ue,_e):function(Ce,Ue){const Ze=new Image;Ze.onload=()=>{Ue(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=di})},Ze.onerror=()=>Ue(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ye=new Blob([new Uint8Array(Ce)],{type:"image/png"});Ze.src=Ce.byteLength?URL.createObjectURL(Ye):di}(ue,_e)}(O,(ue,_e)=>{ue!=null?a(ue):_e!=null&&a(null,_e,{cacheControl:Z,expires:ee})})});return{cancel:()=>{T.cancel(),x()}}};function Qt(d,a,g){g[d]&&g[d].indexOf(a)!==-1||(g[d]=g[d]||[],g[d].push(a))}function lr(d,a,g){if(g&&g[d]){const x=g[d].indexOf(a);x!==-1&&g[d].splice(x,1)}}class pi{constructor(a,g={}){K(this,g),this.type=a}}class Dr extends pi{constructor(a,g={}){super("error",K({error:a},g))}}class ze{on(a,g){return this._listeners=this._listeners||{},Qt(a,g,this._listeners),this}off(a,g){return lr(a,g,this._listeners),lr(a,g,this._oneTimeListeners),this}once(a,g){return this._oneTimeListeners=this._oneTimeListeners||{},Qt(a,g,this._oneTimeListeners),this}fire(a,g){typeof a=="string"&&(a=new pi(a,g||{}));const x=a.type;if(this.listens(x)){a.target=this;const T=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const Z of T)Z.call(this,a);const D=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const Z of D)lr(x,Z,this._oneTimeListeners),Z.call(this,a);const O=this._eventedParent;O&&(K(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),O.fire(a))}else a instanceof Dr&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,g){return this._eventedParent=a,this._eventedParentData=g,this}}var Y={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class te{constructor(a,g,x,T){this.message=(a?`${a}: `:"")+x,T&&(this.identifier=T),g!=null&&g.__line__&&(this.line=g.__line__)}}function je(d){const a=d.value;return a?[new te(d.key,a,"constants have been deprecated as of v8")]:[]}function ot(d,...a){for(const g of a)for(const x in g)d[x]=g[x];return d}function mt(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Jt(d){if(Array.isArray(d))return d.map(Jt);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const a={};for(const g in d)a[g]=Jt(d[g]);return a}return mt(d)}class hr extends Error{constructor(a,g){super(g),this.message=g,this.key=a}}class xr{constructor(a,g=[]){this.parent=a,this.bindings={};for(const[x,T]of g)this.bindings[x]=T}concat(a){return new xr(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const or={kind:"null"},Ei={kind:"number"},Wi={kind:"string"},Br={kind:"boolean"},Zr={kind:"color"},Pn={kind:"object"},Vr={kind:"value"},vn={kind:"collator"},Pr={kind:"formatted"},_n={kind:"padding"},Tn={kind:"resolvedImage"};function Tr(d,a){return{kind:"array",itemType:d,N:a}}function Qr(d){if(d.kind==="array"){const a=Qr(d.itemType);return typeof d.N=="number"?`array<${a}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${a}>`}return d.kind}const Un=[or,Ei,Wi,Br,Zr,Pr,Pn,Tr(Vr),_n,Tn];function Bi(d,a){if(a.kind==="error")return null;if(d.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Bi(d.itemType,a.itemType))&&(typeof d.N!="number"||d.N===a.N))return null}else{if(d.kind===a.kind)return null;if(d.kind==="value"){for(const g of Un)if(!Bi(g,a))return null}}return`Expected ${Qr(d)} but found ${Qr(a)} instead.`}function Le(d,a){return a.some(g=>g.kind===d.kind)}function $n(d,a){return a.some(g=>g==="null"?d===null:g==="array"?Array.isArray(d):g==="object"?d&&!Array.isArray(d)&&typeof d=="object":g===typeof d)}var eo,Xn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function de(d){return(d=Math.round(d))<0?0:d>255?255:d}function fe(d){return de(d[d.length-1]==="%"?parseFloat(d)/100*255:parseInt(d))}function Te(d){return(a=d[d.length-1]==="%"?parseFloat(d)/100:parseFloat(d))<0?0:a>1?1:a;var a}function Ke(d,a,g){return g<0?g+=1:g>1&&(g-=1),6*g<1?d+(a-d)*g*6:2*g<1?a:3*g<2?d+(a-d)*(2/3-g)*6:d}try{eo={}.parseCSSColor=function(d){var a,g=d.replace(/ /g,"").toLowerCase();if(g in Xn)return Xn[g].slice();if(g[0]==="#")return g.length===4?(a=parseInt(g.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:g.length===7&&(a=parseInt(g.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var x=g.indexOf("("),T=g.indexOf(")");if(x!==-1&&T+1===g.length){var D=g.substr(0,x),O=g.substr(x+1,T-(x+1)).split(","),Z=1;switch(D){case"rgba":if(O.length!==4)return null;Z=Te(O.pop());case"rgb":return O.length!==3?null:[fe(O[0]),fe(O[1]),fe(O[2]),Z];case"hsla":if(O.length!==4)return null;Z=Te(O.pop());case"hsl":if(O.length!==3)return null;var ee=(parseFloat(O[0])%360+360)%360/360,ue=Te(O[1]),_e=Te(O[2]),Ce=_e<=.5?_e*(ue+1):_e+ue-_e*ue,Ue=2*_e-Ce;return[de(255*Ke(Ue,Ce,ee+1/3)),de(255*Ke(Ue,Ce,ee)),de(255*Ke(Ue,Ce,ee-1/3)),Z];default:return null}}return null}}catch{}class et{constructor(a,g,x,T=1){this.r=a,this.g=g,this.b=x,this.a=T}static parse(a){if(!a)return;if(a instanceof et)return a;if(typeof a!="string")return;const g=eo(a);return g?new et(g[0]/255*g[3],g[1]/255*g[3],g[2]/255*g[3],g[3]):void 0}toString(){const[a,g,x,T]=this.toArray();return`rgba(${Math.round(a)},${Math.round(g)},${Math.round(x)},${T})`}toArray(){const{r:a,g,b:x,a:T}=this;return T===0?[0,0,0,0]:[255*a/T,255*g/T,255*x/T,T]}}et.black=new et(0,0,0,1),et.white=new et(1,1,1,1),et.transparent=new et(0,0,0,0),et.red=new et(1,0,0,1);class wt{constructor(a,g,x){this.sensitivity=a?g?"variant":"case":g?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,g){return this.collator.compare(a,g)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class De{constructor(a,g,x,T,D){this.text=a,this.image=g,this.scale=x,this.fontStack=T,this.textColor=D}}class Nt{constructor(a){this.sections=a}static fromString(a){return new Nt([new De(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Nt?a:Nt.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class Tt{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Tt)return a;if(typeof a=="number")return new Tt([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const g of a)if(typeof g!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new Tt(a)}}toString(){return JSON.stringify(this.values)}}class jt{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new jt({name:a,available:!1}):null}}function ki(d,a,g,x){return typeof d=="number"&&d>=0&&d<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof g=="number"&&g>=0&&g<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[d,a,g,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[d,a,g,x]:[d,a,g]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ri(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof et||d instanceof wt||d instanceof Nt||d instanceof Tt||d instanceof jt)return!0;if(Array.isArray(d)){for(const a of d)if(!Ri(a))return!1;return!0}if(typeof d=="object"){for(const a in d)if(!Ri(d[a]))return!1;return!0}return!1}function wi(d){if(d===null)return or;if(typeof d=="string")return Wi;if(typeof d=="boolean")return Br;if(typeof d=="number")return Ei;if(d instanceof et)return Zr;if(d instanceof wt)return vn;if(d instanceof Nt)return Pr;if(d instanceof Tt)return _n;if(d instanceof jt)return Tn;if(Array.isArray(d)){const a=d.length;let g;for(const x of d){const T=wi(x);if(g){if(g===T)continue;g=Vr;break}g=T}return Tr(g||Vr,a)}return Pn}function kr(d){const a=typeof d;return d===null?"":a==="string"||a==="number"||a==="boolean"?String(d):d instanceof et||d instanceof Nt||d instanceof Tt||d instanceof jt?d.toString():JSON.stringify(d)}class Sr{constructor(a,g){this.type=a,this.value=g}static parse(a,g){if(a.length!==2)return g.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Ri(a[1]))return g.error("invalid value");const x=a[1];let T=wi(x);const D=g.expectedType;return T.kind!=="array"||T.N!==0||!D||D.kind!=="array"||typeof D.N=="number"&&D.N!==0||(T=D),new Sr(T,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ji{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const Gr={string:Wi,number:Ei,boolean:Br,object:Pn};class jr{constructor(a,g){this.type=a,this.args=g}static parse(a,g){if(a.length<2)return g.error("Expected at least one argument.");let x,T=1;const D=a[0];if(D==="array"){let Z,ee;if(a.length>2){const ue=a[1];if(typeof ue!="string"||!(ue in Gr)||ue==="object")return g.error('The item type argument of "array" must be one of string, number, boolean',1);Z=Gr[ue],T++}else Z=Vr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return g.error('The length argument to "array" must be a positive integer literal',2);ee=a[2],T++}x=Tr(Z,ee)}else{if(!Gr[D])throw new Error(`Types doesn't contain name = ${D}`);x=Gr[D]}const O=[];for(;T<a.length;T++){const Z=g.parse(a[T],T,Vr);if(!Z)return null;O.push(Z)}return new jr(x,O)}evaluate(a){for(let g=0;g<this.args.length;g++){const x=this.args[g].evaluate(a);if(!Bi(this.type,wi(x)))return x;if(g===this.args.length-1)throw new ji(`Expected value to be of type ${Qr(this.type)}, but found ${Qr(wi(x))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const dn={"to-boolean":Br,"to-color":Zr,"to-number":Ei,"to-string":Wi};class $r{constructor(a,g){this.type=a,this.args=g}static parse(a,g){if(a.length<2)return g.error("Expected at least one argument.");const x=a[0];if(!dn[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&a.length!==2)return g.error("Expected one argument.");const T=dn[x],D=[];for(let O=1;O<a.length;O++){const Z=g.parse(a[O],O,Vr);if(!Z)return null;D.push(Z)}return new $r(T,D)}evaluate(a){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(a));if(this.type.kind==="color"){let g,x;for(const T of this.args){if(g=T.evaluate(a),x=null,g instanceof et)return g;if(typeof g=="string"){const D=a.parseColor(g);if(D)return D}else if(Array.isArray(g)&&(x=g.length<3||g.length>4?`Invalid rbga value ${JSON.stringify(g)}: expected an array containing either three or four numeric values.`:ki(g[0],g[1],g[2],g[3]),!x))return new et(g[0]/255,g[1]/255,g[2]/255,g[3])}throw new ji(x||`Could not parse color from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}if(this.type.kind==="padding"){let g;for(const x of this.args){g=x.evaluate(a);const T=Tt.parse(g);if(T)return T}throw new ji(`Could not parse padding from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}if(this.type.kind==="number"){let g=null;for(const x of this.args){if(g=x.evaluate(a),g===null)return 0;const T=Number(g);if(!isNaN(T))return T}throw new ji(`Could not convert ${JSON.stringify(g)} to number.`)}return this.type.kind==="formatted"?Nt.fromString(kr(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?jt.fromString(kr(this.args[0].evaluate(a))):kr(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const un=["Unknown","Point","LineString","Polygon"];class bn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?un[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let g=this._parseColorCache[a];return g||(g=this._parseColorCache[a]=et.parse(a)),g}}class On{constructor(a,g,x,T){this.name=a,this.type=g,this._evaluate=x,this.args=T}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,g){const x=a[0],T=On.definitions[x];if(!T)return g.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const D=Array.isArray(T)?T[0]:T.type,O=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,Z=O.filter(([ue])=>!Array.isArray(ue)||ue.length===a.length-1);let ee=null;for(const[ue,_e]of Z){ee=new Wa(g.registry,g.path,null,g.scope);const Ce=[];let Ue=!1;for(let Ze=1;Ze<a.length;Ze++){const Ye=a[Ze],Dt=Array.isArray(ue)?ue[Ze-1]:ue.type,Lt=ee.parse(Ye,1+Ce.length,Dt);if(!Lt){Ue=!0;break}Ce.push(Lt)}if(!Ue)if(Array.isArray(ue)&&ue.length!==Ce.length)ee.error(`Expected ${ue.length} arguments, but found ${Ce.length} instead.`);else{for(let Ze=0;Ze<Ce.length;Ze++){const Ye=Array.isArray(ue)?ue[Ze]:ue.type,Dt=Ce[Ze];ee.concat(Ze+1).checkSubtype(Ye,Dt.type)}if(ee.errors.length===0)return new On(x,D,_e,Ce)}}if(Z.length===1)g.errors.push(...ee.errors);else{const ue=(Z.length?Z:O).map(([Ce])=>{return Ue=Ce,Array.isArray(Ue)?`(${Ue.map(Qr).join(", ")})`:`(${Qr(Ue.type)}...)`;var Ue}).join(" | "),_e=[];for(let Ce=1;Ce<a.length;Ce++){const Ue=g.parse(a[Ce],1+_e.length);if(!Ue)return null;_e.push(Qr(Ue.type))}g.error(`Expected arguments of type ${ue}, but found (${_e.join(", ")}) instead.`)}return null}static register(a,g){On.definitions=g;for(const x in g)a[x]=On}}class _o{constructor(a,g,x){this.type=vn,this.locale=x,this.caseSensitive=a,this.diacriticSensitive=g}static parse(a,g){if(a.length!==2)return g.error("Expected one argument.");const x=a[1];if(typeof x!="object"||Array.isArray(x))return g.error("Collator options argument must be an object.");const T=g.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,Br);if(!T)return null;const D=g.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,Br);if(!D)return null;let O=null;return x.locale&&(O=g.parse(x.locale,1,Wi),!O)?null:new _o(T,D,O)}evaluate(a){return new wt(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const qn=8192;function bo(d,a){d[0]=Math.min(d[0],a[0]),d[1]=Math.min(d[1],a[1]),d[2]=Math.max(d[2],a[0]),d[3]=Math.max(d[3],a[1])}function Ca(d,a){return!(d[0]<=a[0]||d[2]>=a[2]||d[1]<=a[1]||d[3]>=a[3])}function to(d,a){const g=(180+d[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,T=Math.pow(2,a.z);return[Math.round(g*T*qn),Math.round(x*T*qn)]}function xt(d,a,g){const x=d[0]-a[0],T=d[1]-a[1],D=d[0]-g[0],O=d[1]-g[1];return x*O-D*T==0&&x*D<=0&&T*O<=0}function Ur(d,a){let g=!1;for(let O=0,Z=a.length;O<Z;O++){const ee=a[O];for(let ue=0,_e=ee.length;ue<_e-1;ue++){if(xt(d,ee[ue],ee[ue+1]))return!1;(T=ee[ue])[1]>(x=d)[1]!=(D=ee[ue+1])[1]>x[1]&&x[0]<(D[0]-T[0])*(x[1]-T[1])/(D[1]-T[1])+T[0]&&(g=!g)}}var x,T,D;return g}function Wr(d,a){for(let g=0;g<a.length;g++)if(Ur(d,a[g]))return!0;return!1}function pn(d,a,g,x){const T=x[0]-g[0],D=x[1]-g[1],O=(d[0]-g[0])*D-T*(d[1]-g[1]),Z=(a[0]-g[0])*D-T*(a[1]-g[1]);return O>0&&Z<0||O<0&&Z>0}function mo(d,a,g){for(const ue of g)for(let _e=0;_e<ue.length-1;++_e)if((Z=[(O=ue[_e+1])[0]-(D=ue[_e])[0],O[1]-D[1]])[0]*(ee=[(T=a)[0]-(x=d)[0],T[1]-x[1]])[1]-Z[1]*ee[0]!=0&&pn(x,T,D,O)&&pn(D,O,x,T))return!0;var x,T,D,O,Z,ee;return!1}function io(d,a){for(let g=0;g<d.length;++g)if(!Ur(d[g],a))return!1;for(let g=0;g<d.length-1;++g)if(mo(d[g],d[g+1],a))return!1;return!0}function Qs(d,a){for(let g=0;g<a.length;g++)if(io(d,a[g]))return!0;return!1}function Io(d,a,g){const x=[];for(let T=0;T<d.length;T++){const D=[];for(let O=0;O<d[T].length;O++){const Z=to(d[T][O],g);bo(a,Z),D.push(Z)}x.push(D)}return x}function fs(d,a,g){const x=[];for(let T=0;T<d.length;T++){const D=Io(d[T],a,g);x.push(D)}return x}function Vo(d,a,g,x){if(d[0]<g[0]||d[0]>g[2]){const T=.5*x;let D=d[0]-g[0]>T?-x:g[0]-d[0]>T?x:0;D===0&&(D=d[0]-g[2]>T?-x:g[2]-d[0]>T?x:0),d[0]+=D}bo(a,d)}function $s(d,a,g,x){const T=Math.pow(2,x.z)*qn,D=[x.x*qn,x.y*qn],O=[];for(const Z of d)for(const ee of Z){const ue=[ee.x+D[0],ee.y+D[1]];Vo(ue,a,g,T),O.push(ue)}return O}function Jo(d,a,g,x){const T=Math.pow(2,x.z)*qn,D=[x.x*qn,x.y*qn],O=[];for(const ee of d){const ue=[];for(const _e of ee){const Ce=[_e.x+D[0],_e.y+D[1]];bo(a,Ce),ue.push(Ce)}O.push(ue)}if(a[2]-a[0]<=T/2){(Z=a)[0]=Z[1]=1/0,Z[2]=Z[3]=-1/0;for(const ee of O)for(const ue of ee)Vo(ue,a,g,T)}var Z;return O}class ws{constructor(a,g){this.type=Br,this.geojson=a,this.geometries=g}static parse(a,g){if(a.length!==2)return g.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Ri(a[1])){const x=a[1];if(x.type==="FeatureCollection")for(let T=0;T<x.features.length;++T){const D=x.features[T].geometry.type;if(D==="Polygon"||D==="MultiPolygon")return new ws(x,x.features[T].geometry)}else if(x.type==="Feature"){const T=x.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new ws(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new ws(x,x)}return g.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(g,x){const T=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],O=g.canonicalID();if(x.type==="Polygon"){const Z=Io(x.coordinates,D,O),ee=$s(g.geometry(),T,D,O);if(!Ca(T,D))return!1;for(const ue of ee)if(!Ur(ue,Z))return!1}if(x.type==="MultiPolygon"){const Z=fs(x.coordinates,D,O),ee=$s(g.geometry(),T,D,O);if(!Ca(T,D))return!1;for(const ue of ee)if(!Wr(ue,Z))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(g,x){const T=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],O=g.canonicalID();if(x.type==="Polygon"){const Z=Io(x.coordinates,D,O),ee=Jo(g.geometry(),T,D,O);if(!Ca(T,D))return!1;for(const ue of ee)if(!io(ue,Z))return!1}if(x.type==="MultiPolygon"){const Z=fs(x.coordinates,D,O),ee=Jo(g.geometry(),T,D,O);if(!Ca(T,D))return!1;for(const ue of ee)if(!Qs(ue,Z))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ds(d){if(d instanceof On&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof ws)return!1;let a=!0;return d.eachChild(g=>{a&&!ds(g)&&(a=!1)}),a}function ea(d){if(d instanceof On&&d.name==="feature-state")return!1;let a=!0;return d.eachChild(g=>{a&&!ea(g)&&(a=!1)}),a}function Ha(d,a){if(d instanceof On&&a.indexOf(d.name)>=0)return!1;let g=!0;return d.eachChild(x=>{g&&!Ha(x,a)&&(g=!1)}),g}class Tl{constructor(a,g){this.type=g.type,this.name=a,this.boundExpression=g}static parse(a,g){if(a.length!==2||typeof a[1]!="string")return g.error("'var' expression requires exactly one string literal argument.");const x=a[1];return g.scope.has(x)?new Tl(x,g.scope.get(x)):g.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Wa{constructor(a,g=[],x,T=new xr,D=[]){this.registry=a,this.path=g,this.key=g.map(O=>`[${O}]`).join(""),this.scope=T,this.errors=D,this.expectedType=x}parse(a,g,x,T,D={}){return g?this.concat(g,x,T)._parse(a,D):this._parse(a,D)}_parse(a,g){function x(T,D,O){return O==="assert"?new jr(D,[T]):O==="coerce"?new $r(D,[T]):T}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=a[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const D=this.registry[T];if(D){let O=D.parse(a,this);if(!O)return null;if(this.expectedType){const Z=this.expectedType,ee=O.type;if(Z.kind!=="string"&&Z.kind!=="number"&&Z.kind!=="boolean"&&Z.kind!=="object"&&Z.kind!=="array"||ee.kind!=="value")if(Z.kind!=="color"&&Z.kind!=="formatted"&&Z.kind!=="resolvedImage"||ee.kind!=="value"&&ee.kind!=="string")if(Z.kind!=="padding"||ee.kind!=="value"&&ee.kind!=="number"&&ee.kind!=="array"){if(this.checkSubtype(Z,ee))return null}else O=x(O,Z,g.typeAnnotation||"coerce");else O=x(O,Z,g.typeAnnotation||"coerce");else O=x(O,Z,g.typeAnnotation||"assert")}if(!(O instanceof Sr)&&O.type.kind!=="resolvedImage"&&Ll(O)){const Z=new bn;try{O=new Sr(O.type,O.evaluate(Z))}catch(ee){return this.error(ee.message),null}}return O}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,g,x){const T=typeof a=="number"?this.path.concat(a):this.path,D=x?this.scope.concat(x):this.scope;return new Wa(this.registry,T,g||null,D,this.errors)}error(a,...g){const x=`${this.key}${g.map(T=>`[${T}]`).join("")}`;this.errors.push(new hr(x,a))}checkSubtype(a,g){const x=Bi(a,g);return x&&this.error(x),x}}function Ll(d){if(d instanceof Tl)return Ll(d.boundExpression);if(d instanceof On&&d.name==="error"||d instanceof _o||d instanceof ws)return!1;const a=d instanceof $r||d instanceof jr;let g=!0;return d.eachChild(x=>{g=a?g&&Ll(x):g&&x instanceof Sr}),!!g&&ds(d)&&Ha(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Bs(d,a){const g=d.length-1;let x,T,D=0,O=g,Z=0;for(;D<=O;)if(Z=Math.floor((D+O)/2),x=d[Z],T=d[Z+1],x<=a){if(Z===g||a<T)return Z;D=Z+1}else{if(!(x>a))throw new ji("Input is not a number.");O=Z-1}return 0}class Rs{constructor(a,g,x){this.type=a,this.input=g,this.labels=[],this.outputs=[];for(const[T,D]of x)this.labels.push(T),this.outputs.push(D)}static parse(a,g){if(a.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return g.error("Expected an even number of arguments.");const x=g.parse(a[1],1,Ei);if(!x)return null;const T=[];let D=null;g.expectedType&&g.expectedType.kind!=="value"&&(D=g.expectedType);for(let O=1;O<a.length;O+=2){const Z=O===1?-1/0:a[O],ee=a[O+1],ue=O,_e=O+1;if(typeof Z!="number")return g.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(T.length&&T[T.length-1][0]>=Z)return g.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ue);const Ce=g.parse(ee,_e,D);if(!Ce)return null;D=D||Ce.type,T.push([Z,Ce])}return new Rs(D,x,T)}evaluate(a){const g=this.labels,x=this.outputs;if(g.length===1)return x[0].evaluate(a);const T=this.input.evaluate(a);if(T<=g[0])return x[0].evaluate(a);const D=g.length;return T>=g[D-1]?x[D-1].evaluate(a):x[Bs(g,T)].evaluate(a)}eachChild(a){a(this.input);for(const g of this.outputs)a(g)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Yn(d,a,g){return d*(1-g)+a*g}var Ta=Object.freeze({__proto__:null,number:Yn,color:function(d,a,g){return new et(Yn(d.r,a.r,g),Yn(d.g,a.g,g),Yn(d.b,a.b,g),Yn(d.a,a.a,g))},array:function(d,a,g){return d.map((x,T)=>Yn(x,a[T],g))},padding:function(d,a,g){const x=d.values,T=a.values;return new Tt([Yn(x[0],T[0],g),Yn(x[1],T[1],g),Yn(x[2],T[2],g),Yn(x[3],T[3],g)])}});const M=.95047,V=1.08883,oe=4/29,ge=6/29,qe=3*ge*ge,ht=Math.PI/180,St=180/Math.PI;function Et(d){return d>.008856451679035631?Math.pow(d,1/3):d/qe+oe}function ai(d){return d>ge?d*d*d:qe*(d-oe)}function ii(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function ni(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Vt(d){const a=ni(d.r),g=ni(d.g),x=ni(d.b),T=Et((.4124564*a+.3575761*g+.1804375*x)/M),D=Et((.2126729*a+.7151522*g+.072175*x)/1);return{l:116*D-16,a:500*(T-D),b:200*(D-Et((.0193339*a+.119192*g+.9503041*x)/V)),alpha:d.a}}function Ii(d){let a=(d.l+16)/116,g=isNaN(d.a)?a:a+d.a/500,x=isNaN(d.b)?a:a-d.b/200;return a=1*ai(a),g=M*ai(g),x=V*ai(x),new et(ii(3.2404542*g-1.5371385*a-.4985314*x),ii(-.969266*g+1.8760108*a+.041556*x),ii(.0556434*g-.2040259*a+1.0572252*x),d.alpha)}function Gi(d,a,g){const x=a-d;return d+g*(x>180||x<-180?x-360*Math.round(x/360):x)}const fr={forward:Vt,reverse:Ii,interpolate:function(d,a,g){return{l:Yn(d.l,a.l,g),a:Yn(d.a,a.a,g),b:Yn(d.b,a.b,g),alpha:Yn(d.alpha,a.alpha,g)}}},Je={forward:function(d){const{l:a,a:g,b:x}=Vt(d),T=Math.atan2(x,g)*St;return{h:T<0?T+360:T,c:Math.sqrt(g*g+x*x),l:a,alpha:d.a}},reverse:function(d){const a=d.h*ht,g=d.c;return Ii({l:d.l,a:Math.cos(a)*g,b:Math.sin(a)*g,alpha:d.alpha})},interpolate:function(d,a,g){return{h:Gi(d.h,a.h,g),c:Yn(d.c,a.c,g),l:Yn(d.l,a.l,g),alpha:Yn(d.alpha,a.alpha,g)}}};var c=Object.freeze({__proto__:null,lab:fr,hcl:Je});class _i{constructor(a,g,x,T,D){this.type=a,this.operator=g,this.interpolation=x,this.input=T,this.labels=[],this.outputs=[];for(const[O,Z]of D)this.labels.push(O),this.outputs.push(Z)}static interpolationFactor(a,g,x,T){let D=0;if(a.name==="exponential")D=s(g,a.base,x,T);else if(a.name==="linear")D=s(g,1,x,T);else if(a.name==="cubic-bezier"){const O=a.controlPoints;D=new E(O[0],O[1],O[2],O[3]).solve(s(g,1,x,T))}return D}static parse(a,g){let[x,T,D,...O]=a;if(!Array.isArray(T)||T.length===0)return g.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const ue=T[1];if(typeof ue!="number")return g.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:ue}}else{if(T[0]!=="cubic-bezier")return g.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const ue=T.slice(1);if(ue.length!==4||ue.some(_e=>typeof _e!="number"||_e<0||_e>1))return g.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:ue}}}if(a.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return g.error("Expected an even number of arguments.");if(D=g.parse(D,2,Ei),!D)return null;const Z=[];let ee=null;x==="interpolate-hcl"||x==="interpolate-lab"?ee=Zr:g.expectedType&&g.expectedType.kind!=="value"&&(ee=g.expectedType);for(let ue=0;ue<O.length;ue+=2){const _e=O[ue],Ce=O[ue+1],Ue=ue+3,Ze=ue+4;if(typeof _e!="number")return g.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ue);if(Z.length&&Z[Z.length-1][0]>=_e)return g.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ue);const Ye=g.parse(Ce,Ze,ee);if(!Ye)return null;ee=ee||Ye.type,Z.push([_e,Ye])}return ee.kind==="number"||ee.kind==="color"||ee.kind==="padding"||ee.kind==="array"&&ee.itemType.kind==="number"&&typeof ee.N=="number"?new _i(ee,x,T,D,Z):g.error(`Type ${Qr(ee)} is not interpolatable.`)}evaluate(a){const g=this.labels,x=this.outputs;if(g.length===1)return x[0].evaluate(a);const T=this.input.evaluate(a);if(T<=g[0])return x[0].evaluate(a);const D=g.length;if(T>=g[D-1])return x[D-1].evaluate(a);const O=Bs(g,T),Z=_i.interpolationFactor(this.interpolation,T,g[O],g[O+1]),ee=x[O].evaluate(a),ue=x[O+1].evaluate(a);return this.operator==="interpolate"?Ta[this.type.kind.toLowerCase()](ee,ue,Z):this.operator==="interpolate-hcl"?Je.reverse(Je.interpolate(Je.forward(ee),Je.forward(ue),Z)):fr.reverse(fr.interpolate(fr.forward(ee),fr.forward(ue),Z))}eachChild(a){a(this.input);for(const g of this.outputs)a(g)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function s(d,a,g,x){const T=x-g,D=d-g;return T===0?0:a===1?D/T:(Math.pow(a,D)-1)/(Math.pow(a,T)-1)}class A{constructor(a,g){this.type=a,this.args=g}static parse(a,g){if(a.length<2)return g.error("Expectected at least one argument.");let x=null;const T=g.expectedType;T&&T.kind!=="value"&&(x=T);const D=[];for(const Z of a.slice(1)){const ee=g.parse(Z,1+D.length,x,void 0,{typeAnnotation:"omit"});if(!ee)return null;x=x||ee.type,D.push(ee)}if(!x)throw new Error("No output type");const O=T&&D.some(Z=>Bi(T,Z.type));return new A(O?Vr:x,D)}evaluate(a){let g,x=null,T=0;for(const D of this.args)if(T++,x=D.evaluate(a),x&&x instanceof jt&&!x.available&&(g||(g=x.name),x=null,T===this.args.length&&(x=g)),x!==null)break;return x}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class tr{constructor(a,g){this.type=g.type,this.bindings=[].concat(a),this.result=g}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const g of this.bindings)a(g[1]);a(this.result)}static parse(a,g){if(a.length<4)return g.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const x=[];for(let D=1;D<a.length-1;D+=2){const O=a[D];if(typeof O!="string")return g.error(`Expected string, but found ${typeof O} instead.`,D);if(/[^a-zA-Z0-9_]/.test(O))return g.error("Variable names must contain only alphanumeric characters or '_'.",D);const Z=g.parse(a[D+1],D+1);if(!Z)return null;x.push([O,Z])}const T=g.parse(a[a.length-1],a.length-1,g.expectedType,x);return T?new tr(x,T):null}outputDefined(){return this.result.outputDefined()}}class zr{constructor(a,g,x){this.type=a,this.index=g,this.input=x}static parse(a,g){if(a.length!==3)return g.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const x=g.parse(a[1],1,Ei),T=g.parse(a[2],2,Tr(g.expectedType||Vr));return x&&T?new zr(T.type.itemType,x,T):null}evaluate(a){const g=this.index.evaluate(a),x=this.input.evaluate(a);if(g<0)throw new ji(`Array index out of bounds: ${g} < 0.`);if(g>=x.length)throw new ji(`Array index out of bounds: ${g} > ${x.length-1}.`);if(g!==Math.floor(g))throw new ji(`Array index must be an integer, but found ${g} instead.`);return x[g]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class Gn{constructor(a,g){this.type=Br,this.needle=a,this.haystack=g}static parse(a,g){if(a.length!==3)return g.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const x=g.parse(a[1],1,Vr),T=g.parse(a[2],2,Vr);return x&&T?Le(x.type,[Br,Wi,Ei,or,Vr])?new Gn(x,T):g.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(x.type)} instead`):null}evaluate(a){const g=this.needle.evaluate(a),x=this.haystack.evaluate(a);if(!x)return!1;if(!$n(g,["boolean","string","number","null"]))throw new ji(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(wi(g))} instead.`);if(!$n(x,["string","array"]))throw new ji(`Expected second argument to be of type array or string, but found ${Qr(wi(x))} instead.`);return x.indexOf(g)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class W{constructor(a,g,x){this.type=Ei,this.needle=a,this.haystack=g,this.fromIndex=x}static parse(a,g){if(a.length<=2||a.length>=5)return g.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const x=g.parse(a[1],1,Vr),T=g.parse(a[2],2,Vr);if(!x||!T)return null;if(!Le(x.type,[Br,Wi,Ei,or,Vr]))return g.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(x.type)} instead`);if(a.length===4){const D=g.parse(a[3],3,Ei);return D?new W(x,T,D):null}return new W(x,T)}evaluate(a){const g=this.needle.evaluate(a),x=this.haystack.evaluate(a);if(!$n(g,["boolean","string","number","null"]))throw new ji(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(wi(g))} instead.`);if(!$n(x,["string","array"]))throw new ji(`Expected second argument to be of type array or string, but found ${Qr(wi(x))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(a);return x.indexOf(g,T)}return x.indexOf(g)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class fn{constructor(a,g,x,T,D,O){this.inputType=a,this.type=g,this.input=x,this.cases=T,this.outputs=D,this.otherwise=O}static parse(a,g){if(a.length<5)return g.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return g.error("Expected an even number of arguments.");let x,T;g.expectedType&&g.expectedType.kind!=="value"&&(T=g.expectedType);const D={},O=[];for(let ue=2;ue<a.length-1;ue+=2){let _e=a[ue];const Ce=a[ue+1];Array.isArray(_e)||(_e=[_e]);const Ue=g.concat(ue);if(_e.length===0)return Ue.error("Expected at least one branch label.");for(const Ye of _e){if(typeof Ye!="number"&&typeof Ye!="string")return Ue.error("Branch labels must be numbers or strings.");if(typeof Ye=="number"&&Math.abs(Ye)>Number.MAX_SAFE_INTEGER)return Ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ye=="number"&&Math.floor(Ye)!==Ye)return Ue.error("Numeric branch labels must be integer values.");if(x){if(Ue.checkSubtype(x,wi(Ye)))return null}else x=wi(Ye);if(D[String(Ye)]!==void 0)return Ue.error("Branch labels must be unique.");D[String(Ye)]=O.length}const Ze=g.parse(Ce,ue,T);if(!Ze)return null;T=T||Ze.type,O.push(Ze)}const Z=g.parse(a[1],1,Vr);if(!Z)return null;const ee=g.parse(a[a.length-1],a.length-1,T);return ee?Z.type.kind!=="value"&&g.concat(1).checkSubtype(x,Z.type)?null:new fn(x,T,Z,D,O,ee):null}evaluate(a){const g=this.input.evaluate(a);return(wi(g)===this.inputType&&this.outputs[this.cases[g]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class Os{constructor(a,g,x){this.type=a,this.branches=g,this.otherwise=x}static parse(a,g){if(a.length<4)return g.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return g.error("Expected an odd number of arguments.");let x;g.expectedType&&g.expectedType.kind!=="value"&&(x=g.expectedType);const T=[];for(let O=1;O<a.length-1;O+=2){const Z=g.parse(a[O],O,Br);if(!Z)return null;const ee=g.parse(a[O+1],O+1,x);if(!ee)return null;T.push([Z,ee]),x=x||ee.type}const D=g.parse(a[a.length-1],a.length-1,x);if(!D)return null;if(!x)throw new Error("Can't infer output type");return new Os(x,T,D)}evaluate(a){for(const[g,x]of this.branches)if(g.evaluate(a))return x.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[g,x]of this.branches)a(g),a(x);a(this.otherwise)}outputDefined(){return this.branches.every(([a,g])=>g.outputDefined())&&this.otherwise.outputDefined()}}class fa{constructor(a,g,x,T){this.type=a,this.input=g,this.beginIndex=x,this.endIndex=T}static parse(a,g){if(a.length<=2||a.length>=5)return g.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const x=g.parse(a[1],1,Vr),T=g.parse(a[2],2,Ei);if(!x||!T)return null;if(!Le(x.type,[Tr(Vr),Wi,Vr]))return g.error(`Expected first argument to be of type array or string, but found ${Qr(x.type)} instead`);if(a.length===4){const D=g.parse(a[3],3,Ei);return D?new fa(x.type,x,T,D):null}return new fa(x.type,x,T)}evaluate(a){const g=this.input.evaluate(a),x=this.beginIndex.evaluate(a);if(!$n(g,["string","array"]))throw new ji(`Expected first argument to be of type array or string, but found ${Qr(wi(g))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(a);return g.slice(x,T)}return g.slice(x)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function $u(d,a){return d==="=="||d==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Za(d,a,g,x){return x.compare(a,g)===0}function ps(d,a,g){const x=d!=="=="&&d!=="!=";return class Q_{constructor(D,O,Z){this.type=Br,this.lhs=D,this.rhs=O,this.collator=Z,this.hasUntypedArgument=D.type.kind==="value"||O.type.kind==="value"}static parse(D,O){if(D.length!==3&&D.length!==4)return O.error("Expected two or three arguments.");const Z=D[0];let ee=O.parse(D[1],1,Vr);if(!ee)return null;if(!$u(Z,ee.type))return O.concat(1).error(`"${Z}" comparisons are not supported for type '${Qr(ee.type)}'.`);let ue=O.parse(D[2],2,Vr);if(!ue)return null;if(!$u(Z,ue.type))return O.concat(2).error(`"${Z}" comparisons are not supported for type '${Qr(ue.type)}'.`);if(ee.type.kind!==ue.type.kind&&ee.type.kind!=="value"&&ue.type.kind!=="value")return O.error(`Cannot compare types '${Qr(ee.type)}' and '${Qr(ue.type)}'.`);x&&(ee.type.kind==="value"&&ue.type.kind!=="value"?ee=new jr(ue.type,[ee]):ee.type.kind!=="value"&&ue.type.kind==="value"&&(ue=new jr(ee.type,[ue])));let _e=null;if(D.length===4){if(ee.type.kind!=="string"&&ue.type.kind!=="string"&&ee.type.kind!=="value"&&ue.type.kind!=="value")return O.error("Cannot use collator to compare non-string types.");if(_e=O.parse(D[3],3,vn),!_e)return null}return new Q_(ee,ue,_e)}evaluate(D){const O=this.lhs.evaluate(D),Z=this.rhs.evaluate(D);if(x&&this.hasUntypedArgument){const ee=wi(O),ue=wi(Z);if(ee.kind!==ue.kind||ee.kind!=="string"&&ee.kind!=="number")throw new ji(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${ee.kind}, ${ue.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const ee=wi(O),ue=wi(Z);if(ee.kind!=="string"||ue.kind!=="string")return a(D,O,Z)}return this.collator?g(D,O,Z,this.collator.evaluate(D)):a(D,O,Z)}eachChild(D){D(this.lhs),D(this.rhs),this.collator&&D(this.collator)}outputDefined(){return!0}}}const bu=ps("==",function(d,a,g){return a===g},Za),Pl=ps("!=",function(d,a,g){return a!==g},function(d,a,g,x){return!Za(0,a,g,x)}),Ac=ps("<",function(d,a,g){return a<g},function(d,a,g,x){return x.compare(a,g)<0}),Ml=ps(">",function(d,a,g){return a>g},function(d,a,g,x){return x.compare(a,g)>0}),Ec=ps("<=",function(d,a,g){return a<=g},function(d,a,g,x){return x.compare(a,g)<=0}),$l=ps(">=",function(d,a,g){return a>=g},function(d,a,g,x){return x.compare(a,g)>=0});class Dl{constructor(a,g,x,T,D){this.type=Wi,this.number=a,this.locale=g,this.currency=x,this.minFractionDigits=T,this.maxFractionDigits=D}static parse(a,g){if(a.length!==3)return g.error("Expected two arguments.");const x=g.parse(a[1],1,Ei);if(!x)return null;const T=a[2];if(typeof T!="object"||Array.isArray(T))return g.error("NumberFormat options argument must be an object.");let D=null;if(T.locale&&(D=g.parse(T.locale,1,Wi),!D))return null;let O=null;if(T.currency&&(O=g.parse(T.currency,1,Wi),!O))return null;let Z=null;if(T["min-fraction-digits"]&&(Z=g.parse(T["min-fraction-digits"],1,Ei),!Z))return null;let ee=null;return T["max-fraction-digits"]&&(ee=g.parse(T["max-fraction-digits"],1,Ei),!ee)?null:new Dl(x,D,O,Z,ee)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class zl{constructor(a){this.type=Pr,this.sections=a}static parse(a,g){if(a.length<2)return g.error("Expected at least one argument.");const x=a[1];if(!Array.isArray(x)&&typeof x=="object")return g.error("First argument must be an image or text section.");const T=[];let D=!1;for(let O=1;O<=a.length-1;++O){const Z=a[O];if(D&&typeof Z=="object"&&!Array.isArray(Z)){D=!1;let ee=null;if(Z["font-scale"]&&(ee=g.parse(Z["font-scale"],1,Ei),!ee))return null;let ue=null;if(Z["text-font"]&&(ue=g.parse(Z["text-font"],1,Tr(Wi)),!ue))return null;let _e=null;if(Z["text-color"]&&(_e=g.parse(Z["text-color"],1,Zr),!_e))return null;const Ce=T[T.length-1];Ce.scale=ee,Ce.font=ue,Ce.textColor=_e}else{const ee=g.parse(a[O],1,Vr);if(!ee)return null;const ue=ee.type.kind;if(ue!=="string"&&ue!=="value"&&ue!=="null"&&ue!=="resolvedImage")return g.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");D=!0,T.push({content:ee,scale:null,font:null,textColor:null})}}return new zl(T)}evaluate(a){return new Nt(this.sections.map(g=>{const x=g.content.evaluate(a);return wi(x)===Tn?new De("",x,null,null,null):new De(kr(x),null,g.scale?g.scale.evaluate(a):null,g.font?g.font.evaluate(a).join(","):null,g.textColor?g.textColor.evaluate(a):null)}))}eachChild(a){for(const g of this.sections)a(g.content),g.scale&&a(g.scale),g.font&&a(g.font),g.textColor&&a(g.textColor)}outputDefined(){return!1}}class cl{constructor(a){this.type=Tn,this.input=a}static parse(a,g){if(a.length!==2)return g.error("Expected two arguments.");const x=g.parse(a[1],1,Wi);return x?new cl(x):g.error("No image name provided.")}evaluate(a){const g=this.input.evaluate(a),x=jt.fromString(g);return x&&a.availableImages&&(x.available=a.availableImages.indexOf(g)>-1),x}eachChild(a){a(this.input)}outputDefined(){return!1}}class Nl{constructor(a){this.type=Ei,this.input=a}static parse(a,g){if(a.length!==2)return g.error(`Expected 1 argument, but found ${a.length-1} instead.`);const x=g.parse(a[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?g.error(`Expected argument of type string or array, but found ${Qr(x.type)} instead.`):new Nl(x):null}evaluate(a){const g=this.input.evaluate(a);if(typeof g=="string"||Array.isArray(g))return g.length;throw new ji(`Expected value to be of type string or array, but found ${Qr(wi(g))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const br={"==":bu,"!=":Pl,">":Ml,"<":Ac,">=":$l,"<=":Ec,array:jr,at:zr,boolean:jr,case:Os,coalesce:A,collator:_o,format:zl,image:cl,in:Gn,"index-of":W,interpolate:_i,"interpolate-hcl":_i,"interpolate-lab":_i,length:Nl,let:tr,literal:Sr,match:fn,number:jr,"number-format":Dl,object:jr,slice:fa,step:Rs,string:jr,"to-boolean":$r,"to-color":$r,"to-number":$r,"to-string":$r,var:Tl,within:ws};function yr(d,[a,g,x,T]){a=a.evaluate(d),g=g.evaluate(d),x=x.evaluate(d);const D=T?T.evaluate(d):1,O=ki(a,g,x,D);if(O)throw new ji(O);return new et(a/255*D,g/255*D,x/255*D,D)}function eu(d,a){return d in a}function da(d,a){const g=a[d];return g===void 0?null:g}function js(d){return{type:d}}function hl(d){return{result:"success",value:d}}function Us(d){return{result:"error",value:d}}function Hn(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function X(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Ie(d){return!!d.expression&&d.expression.interpolated}function lt(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function zt(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Kt(d){return d}function Li(d,a){const g=a.type==="color",x=d.stops&&typeof d.stops[0][0]=="object",T=x||!(x||d.property!==void 0),D=d.type||(Ie(a)?"exponential":"interval");if(g||a.type==="padding"){const ue=g?et.parse:Tt.parse;(d=ot({},d)).stops&&(d.stops=d.stops.map(_e=>[_e[0],ue(_e[1])])),d.default=ue(d.default?d.default:a.default)}if(d.colorSpace&&d.colorSpace!=="rgb"&&!c[d.colorSpace])throw new Error(`Unknown color space: ${d.colorSpace}`);let O,Z,ee;if(D==="exponential")O=mn;else if(D==="interval")O=en;else if(D==="categorical"){O=Mr,Z=Object.create(null);for(const ue of d.stops)Z[ue[0]]=ue[1];ee=typeof d.stops[0][0]}else{if(D!=="identity")throw new Error(`Unknown function type "${D}"`);O=En}if(x){const ue={},_e=[];for(let Ze=0;Ze<d.stops.length;Ze++){const Ye=d.stops[Ze],Dt=Ye[0].zoom;ue[Dt]===void 0&&(ue[Dt]={zoom:Dt,type:d.type,property:d.property,default:d.default,stops:[]},_e.push(Dt)),ue[Dt].stops.push([Ye[0].value,Ye[1]])}const Ce=[];for(const Ze of _e)Ce.push([ue[Ze].zoom,Li(ue[Ze],a)]);const Ue={name:"linear"};return{kind:"composite",interpolationType:Ue,interpolationFactor:_i.interpolationFactor.bind(void 0,Ue),zoomStops:Ce.map(Ze=>Ze[0]),evaluate:({zoom:Ze},Ye)=>mn({stops:Ce,base:d.base},a,Ze).evaluate(Ze,Ye)}}if(T){const ue=D==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:ue,interpolationFactor:_i.interpolationFactor.bind(void 0,ue),zoomStops:d.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>O(d,a,_e,Z,ee)}}return{kind:"source",evaluate(ue,_e){const Ce=_e&&_e.properties?_e.properties[d.property]:void 0;return Ce===void 0?Xi(d.default,a.default):O(d,a,Ce,Z,ee)}}}function Xi(d,a,g){return d!==void 0?d:a!==void 0?a:g!==void 0?g:void 0}function Mr(d,a,g,x,T){return Xi(typeof g===T?x[g]:void 0,d.default,a.default)}function en(d,a,g){if(lt(g)!=="number")return Xi(d.default,a.default);const x=d.stops.length;if(x===1||g<=d.stops[0][0])return d.stops[0][1];if(g>=d.stops[x-1][0])return d.stops[x-1][1];const T=Bs(d.stops.map(D=>D[0]),g);return d.stops[T][1]}function mn(d,a,g){const x=d.base!==void 0?d.base:1;if(lt(g)!=="number")return Xi(d.default,a.default);const T=d.stops.length;if(T===1||g<=d.stops[0][0])return d.stops[0][1];if(g>=d.stops[T-1][0])return d.stops[T-1][1];const D=Bs(d.stops.map(_e=>_e[0]),g),O=function(_e,Ce,Ue,Ze){const Ye=Ze-Ue,Dt=_e-Ue;return Ye===0?0:Ce===1?Dt/Ye:(Math.pow(Ce,Dt)-1)/(Math.pow(Ce,Ye)-1)}(g,x,d.stops[D][0],d.stops[D+1][0]),Z=d.stops[D][1],ee=d.stops[D+1][1];let ue=Ta[a.type]||Kt;if(d.colorSpace&&d.colorSpace!=="rgb"){const _e=c[d.colorSpace];ue=(Ce,Ue)=>_e.reverse(_e.interpolate(_e.forward(Ce),_e.forward(Ue),O))}return typeof Z.evaluate=="function"?{evaluate(..._e){const Ce=Z.evaluate.apply(void 0,_e),Ue=ee.evaluate.apply(void 0,_e);if(Ce!==void 0&&Ue!==void 0)return ue(Ce,Ue,O)}}:ue(Z,ee,O)}function En(d,a,g){switch(a.type){case"color":g=et.parse(g);break;case"formatted":g=Nt.fromString(g.toString());break;case"resolvedImage":g=jt.fromString(g.toString());break;case"padding":g=Tt.parse(g);break;default:lt(g)===a.type||a.type==="enum"&&a.values[g]||(g=void 0)}return Xi(g,d.default,a.default)}On.register(br,{error:[{kind:"error"},[Wi],(d,[a])=>{throw new ji(a.evaluate(d))}],typeof:[Wi,[Vr],(d,[a])=>Qr(wi(a.evaluate(d)))],"to-rgba":[Tr(Ei,4),[Zr],(d,[a])=>a.evaluate(d).toArray()],rgb:[Zr,[Ei,Ei,Ei],yr],rgba:[Zr,[Ei,Ei,Ei,Ei],yr],has:{type:Br,overloads:[[[Wi],(d,[a])=>eu(a.evaluate(d),d.properties())],[[Wi,Pn],(d,[a,g])=>eu(a.evaluate(d),g.evaluate(d))]]},get:{type:Vr,overloads:[[[Wi],(d,[a])=>da(a.evaluate(d),d.properties())],[[Wi,Pn],(d,[a,g])=>da(a.evaluate(d),g.evaluate(d))]]},"feature-state":[Vr,[Wi],(d,[a])=>da(a.evaluate(d),d.featureState||{})],properties:[Pn,[],d=>d.properties()],"geometry-type":[Wi,[],d=>d.geometryType()],id:[Vr,[],d=>d.id()],zoom:[Ei,[],d=>d.globals.zoom],"heatmap-density":[Ei,[],d=>d.globals.heatmapDensity||0],"line-progress":[Ei,[],d=>d.globals.lineProgress||0],accumulated:[Vr,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Ei,js(Ei),(d,a)=>{let g=0;for(const x of a)g+=x.evaluate(d);return g}],"*":[Ei,js(Ei),(d,a)=>{let g=1;for(const x of a)g*=x.evaluate(d);return g}],"-":{type:Ei,overloads:[[[Ei,Ei],(d,[a,g])=>a.evaluate(d)-g.evaluate(d)],[[Ei],(d,[a])=>-a.evaluate(d)]]},"/":[Ei,[Ei,Ei],(d,[a,g])=>a.evaluate(d)/g.evaluate(d)],"%":[Ei,[Ei,Ei],(d,[a,g])=>a.evaluate(d)%g.evaluate(d)],ln2:[Ei,[],()=>Math.LN2],pi:[Ei,[],()=>Math.PI],e:[Ei,[],()=>Math.E],"^":[Ei,[Ei,Ei],(d,[a,g])=>Math.pow(a.evaluate(d),g.evaluate(d))],sqrt:[Ei,[Ei],(d,[a])=>Math.sqrt(a.evaluate(d))],log10:[Ei,[Ei],(d,[a])=>Math.log(a.evaluate(d))/Math.LN10],ln:[Ei,[Ei],(d,[a])=>Math.log(a.evaluate(d))],log2:[Ei,[Ei],(d,[a])=>Math.log(a.evaluate(d))/Math.LN2],sin:[Ei,[Ei],(d,[a])=>Math.sin(a.evaluate(d))],cos:[Ei,[Ei],(d,[a])=>Math.cos(a.evaluate(d))],tan:[Ei,[Ei],(d,[a])=>Math.tan(a.evaluate(d))],asin:[Ei,[Ei],(d,[a])=>Math.asin(a.evaluate(d))],acos:[Ei,[Ei],(d,[a])=>Math.acos(a.evaluate(d))],atan:[Ei,[Ei],(d,[a])=>Math.atan(a.evaluate(d))],min:[Ei,js(Ei),(d,a)=>Math.min(...a.map(g=>g.evaluate(d)))],max:[Ei,js(Ei),(d,a)=>Math.max(...a.map(g=>g.evaluate(d)))],abs:[Ei,[Ei],(d,[a])=>Math.abs(a.evaluate(d))],round:[Ei,[Ei],(d,[a])=>{const g=a.evaluate(d);return g<0?-Math.round(-g):Math.round(g)}],floor:[Ei,[Ei],(d,[a])=>Math.floor(a.evaluate(d))],ceil:[Ei,[Ei],(d,[a])=>Math.ceil(a.evaluate(d))],"filter-==":[Br,[Wi,Vr],(d,[a,g])=>d.properties()[a.value]===g.value],"filter-id-==":[Br,[Vr],(d,[a])=>d.id()===a.value],"filter-type-==":[Br,[Wi],(d,[a])=>d.geometryType()===a.value],"filter-<":[Br,[Wi,Vr],(d,[a,g])=>{const x=d.properties()[a.value],T=g.value;return typeof x==typeof T&&x<T}],"filter-id-<":[Br,[Vr],(d,[a])=>{const g=d.id(),x=a.value;return typeof g==typeof x&&g<x}],"filter->":[Br,[Wi,Vr],(d,[a,g])=>{const x=d.properties()[a.value],T=g.value;return typeof x==typeof T&&x>T}],"filter-id->":[Br,[Vr],(d,[a])=>{const g=d.id(),x=a.value;return typeof g==typeof x&&g>x}],"filter-<=":[Br,[Wi,Vr],(d,[a,g])=>{const x=d.properties()[a.value],T=g.value;return typeof x==typeof T&&x<=T}],"filter-id-<=":[Br,[Vr],(d,[a])=>{const g=d.id(),x=a.value;return typeof g==typeof x&&g<=x}],"filter->=":[Br,[Wi,Vr],(d,[a,g])=>{const x=d.properties()[a.value],T=g.value;return typeof x==typeof T&&x>=T}],"filter-id->=":[Br,[Vr],(d,[a])=>{const g=d.id(),x=a.value;return typeof g==typeof x&&g>=x}],"filter-has":[Br,[Vr],(d,[a])=>a.value in d.properties()],"filter-has-id":[Br,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Br,[Tr(Wi)],(d,[a])=>a.value.indexOf(d.geometryType())>=0],"filter-id-in":[Br,[Tr(Vr)],(d,[a])=>a.value.indexOf(d.id())>=0],"filter-in-small":[Br,[Wi,Tr(Vr)],(d,[a,g])=>g.value.indexOf(d.properties()[a.value])>=0],"filter-in-large":[Br,[Wi,Tr(Vr)],(d,[a,g])=>function(x,T,D,O){for(;D<=O;){const Z=D+O>>1;if(T[Z]===x)return!0;T[Z]>x?O=Z-1:D=Z+1}return!1}(d.properties()[a.value],g.value,0,g.value.length-1)],all:{type:Br,overloads:[[[Br,Br],(d,[a,g])=>a.evaluate(d)&&g.evaluate(d)],[js(Br),(d,a)=>{for(const g of a)if(!g.evaluate(d))return!1;return!0}]]},any:{type:Br,overloads:[[[Br,Br],(d,[a,g])=>a.evaluate(d)||g.evaluate(d)],[js(Br),(d,a)=>{for(const g of a)if(g.evaluate(d))return!0;return!1}]]},"!":[Br,[Br],(d,[a])=>!a.evaluate(d)],"is-supported-script":[Br,[Wi],(d,[a])=>{const g=d.globals&&d.globals.isSupportedScript;return!g||g(a.evaluate(d))}],upcase:[Wi,[Wi],(d,[a])=>a.evaluate(d).toUpperCase()],downcase:[Wi,[Wi],(d,[a])=>a.evaluate(d).toLowerCase()],concat:[Wi,js(Vr),(d,a)=>a.map(g=>kr(g.evaluate(d))).join("")],"resolved-locale":[Wi,[vn],(d,[a])=>a.evaluate(d).resolvedLocale()]});class Mn{constructor(a,g){this.expression=a,this._warningHistory={},this._evaluator=new bn,this._defaultValue=g?function(x){return x.type==="color"&&zt(x.default)?new et(0,0,0,0):x.type==="color"?et.parse(x.default)||null:x.type==="padding"?Tt.parse(x.default)||null:x.default===void 0?null:x.default}(g):null,this._enumValues=g&&g.type==="enum"?g.values:null}evaluateWithoutErrorHandling(a,g,x,T,D,O){return this._evaluator.globals=a,this._evaluator.feature=g,this._evaluator.featureState=x,this._evaluator.canonical=T,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=O,this.expression.evaluate(this._evaluator)}evaluate(a,g,x,T,D,O){this._evaluator.globals=a,this._evaluator.feature=g||null,this._evaluator.featureState=x||null,this._evaluator.canonical=T,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=O||null;try{const Z=this.expression.evaluate(this._evaluator);if(Z==null||typeof Z=="number"&&Z!=Z)return this._defaultValue;if(this._enumValues&&!(Z in this._enumValues))throw new ji(`Expected value to be one of ${Object.keys(this._enumValues).map(ee=>JSON.stringify(ee)).join(", ")}, but found ${JSON.stringify(Z)} instead.`);return Z}catch(Z){return this._warningHistory[Z.message]||(this._warningHistory[Z.message]=!0,typeof console<"u"&&console.warn(Z.message)),this._defaultValue}}}function ro(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in br}function lo(d,a){const g=new Wa(br,[],a?function(T){const D={color:Zr,string:Wi,number:Ei,enum:Wi,boolean:Br,formatted:Pr,padding:_n,resolvedImage:Tn};return T.type==="array"?Tr(D[T.value]||Vr,T.length):D[T.type]}(a):void 0),x=g.parse(d,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?hl(new Mn(x,a)):Us(g.errors)}class ho{constructor(a,g){this.kind=a,this._styleExpression=g,this.isStateDependent=a!=="constant"&&!ea(g.expression)}evaluateWithoutErrorHandling(a,g,x,T,D,O){return this._styleExpression.evaluateWithoutErrorHandling(a,g,x,T,D,O)}evaluate(a,g,x,T,D,O){return this._styleExpression.evaluate(a,g,x,T,D,O)}}class Ko{constructor(a,g,x,T){this.kind=a,this.zoomStops=x,this._styleExpression=g,this.isStateDependent=a!=="camera"&&!ea(g.expression),this.interpolationType=T}evaluateWithoutErrorHandling(a,g,x,T,D,O){return this._styleExpression.evaluateWithoutErrorHandling(a,g,x,T,D,O)}evaluate(a,g,x,T,D,O){return this._styleExpression.evaluate(a,g,x,T,D,O)}interpolationFactor(a,g,x){return this.interpolationType?_i.interpolationFactor(this.interpolationType,a,g,x):0}}function Bo(d,a){const g=lo(d,a);if(g.result==="error")return g;const x=g.value.expression,T=ds(x);if(!T&&!Hn(a))return Us([new hr("","data expressions not supported")]);const D=Ha(x,["zoom"]);if(!D&&!X(a))return Us([new hr("","zoom expressions not supported")]);const O=Qo(x);return O||D?O instanceof hr?Us([O]):O instanceof _i&&!Ie(a)?Us([new hr("",'"interpolate" expressions cannot be used with this property')]):hl(O?new Ko(T?"camera":"composite",g.value,O.labels,O instanceof _i?O.interpolation:void 0):new ho(T?"constant":"source",g.value)):Us([new hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class gn{constructor(a,g){this._parameters=a,this._specification=g,ot(this,Li(this._parameters,this._specification))}static deserialize(a){return new gn(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Qo(d){let a=null;if(d instanceof tr)a=Qo(d.result);else if(d instanceof A){for(const g of d.args)if(a=Qo(g),a)break}else(d instanceof Rs||d instanceof _i)&&d.input instanceof On&&d.input.name==="zoom"&&(a=d);return a instanceof hr||d.eachChild(g=>{const x=Qo(g);x instanceof hr?a=x:!a&&x?a=new hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&x&&a!==x&&(a=new hr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Go(d){const a=d.key,g=d.value,x=d.valueSpec||{},T=d.objectElementValidators||{},D=d.style,O=d.styleSpec;let Z=[];const ee=lt(g);if(ee!=="object")return[new te(a,g,`object expected, ${ee} found`)];for(const ue in g){const _e=ue.split(".")[0],Ce=x[_e]||x["*"];let Ue;if(T[_e])Ue=T[_e];else if(x[_e])Ue=go;else if(T["*"])Ue=T["*"];else{if(!x["*"]){Z.push(new te(a,g[ue],`unknown property "${ue}"`));continue}Ue=go}Z=Z.concat(Ue({key:(a&&`${a}.`)+ue,value:g[ue],valueSpec:Ce,style:D,styleSpec:O,object:g,objectKey:ue},g))}for(const ue in x)T[ue]||x[ue].required&&x[ue].default===void 0&&g[ue]===void 0&&Z.push(new te(a,g,`missing required property "${ue}"`));return Z}function fl(d){const a=d.value,g=d.valueSpec,x=d.style,T=d.styleSpec,D=d.key,O=d.arrayElementValidator||go;if(lt(a)!=="array")return[new te(D,a,`array expected, ${lt(a)} found`)];if(g.length&&a.length!==g.length)return[new te(D,a,`array length ${g.length} expected, length ${a.length} found`)];if(g["min-length"]&&a.length<g["min-length"])return[new te(D,a,`array length at least ${g["min-length"]} expected, length ${a.length} found`)];let Z={type:g.value,values:g.values};T.$version<7&&(Z.function=g.function),lt(g.value)==="object"&&(Z=g.value);let ee=[];for(let ue=0;ue<a.length;ue++)ee=ee.concat(O({array:a,arrayIndex:ue,value:a[ue],valueSpec:Z,style:x,styleSpec:T,key:`${D}[${ue}]`}));return ee}function Xa(d){const a=d.key,g=d.value,x=d.valueSpec;let T=lt(g);return T==="number"&&g!=g&&(T="NaN"),T!=="number"?[new te(a,g,`number expected, ${T} found`)]:"minimum"in x&&g<x.minimum?[new te(a,g,`${g} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&g>x.maximum?[new te(a,g,`${g} is greater than the maximum value ${x.maximum}`)]:[]}function tu(d){const a=d.valueSpec,g=mt(d.value.type);let x,T,D,O={};const Z=g!=="categorical"&&d.value.property===void 0,ee=!Z,ue=lt(d.value.stops)==="array"&&lt(d.value.stops[0])==="array"&&lt(d.value.stops[0][0])==="object",_e=Go({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Ze){if(g==="identity")return[new te(Ze.key,Ze.value,'identity function may not have a "stops" property')];let Ye=[];const Dt=Ze.value;return Ye=Ye.concat(fl({key:Ze.key,value:Dt,valueSpec:Ze.valueSpec,style:Ze.style,styleSpec:Ze.styleSpec,arrayElementValidator:Ce})),lt(Dt)==="array"&&Dt.length===0&&Ye.push(new te(Ze.key,Dt,"array must have at least one stop")),Ye},default:function(Ze){return go({key:Ze.key,value:Ze.value,valueSpec:a,style:Ze.style,styleSpec:Ze.styleSpec})}}});return g==="identity"&&Z&&_e.push(new te(d.key,d.value,'missing required property "property"')),g==="identity"||d.value.stops||_e.push(new te(d.key,d.value,'missing required property "stops"')),g==="exponential"&&d.valueSpec.expression&&!Ie(d.valueSpec)&&_e.push(new te(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(ee&&!Hn(d.valueSpec)?_e.push(new te(d.key,d.value,"property functions not supported")):Z&&!X(d.valueSpec)&&_e.push(new te(d.key,d.value,"zoom functions not supported"))),g!=="categorical"&&!ue||d.value.property!==void 0||_e.push(new te(d.key,d.value,'"property" property is required')),_e;function Ce(Ze){let Ye=[];const Dt=Ze.value,Lt=Ze.key;if(lt(Dt)!=="array")return[new te(Lt,Dt,`array expected, ${lt(Dt)} found`)];if(Dt.length!==2)return[new te(Lt,Dt,`array length 2 expected, length ${Dt.length} found`)];if(ue){if(lt(Dt[0])!=="object")return[new te(Lt,Dt,`object expected, ${lt(Dt[0])} found`)];if(Dt[0].zoom===void 0)return[new te(Lt,Dt,"object stop key must have zoom")];if(Dt[0].value===void 0)return[new te(Lt,Dt,"object stop key must have value")];if(D&&D>mt(Dt[0].zoom))return[new te(Lt,Dt[0].zoom,"stop zoom values must appear in ascending order")];mt(Dt[0].zoom)!==D&&(D=mt(Dt[0].zoom),T=void 0,O={}),Ye=Ye.concat(Go({key:`${Lt}[0]`,value:Dt[0],valueSpec:{zoom:{}},style:Ze.style,styleSpec:Ze.styleSpec,objectElementValidators:{zoom:Xa,value:Ue}}))}else Ye=Ye.concat(Ue({key:`${Lt}[0]`,value:Dt[0],valueSpec:{},style:Ze.style,styleSpec:Ze.styleSpec},Dt));return ro(Jt(Dt[1]))?Ye.concat([new te(`${Lt}[1]`,Dt[1],"expressions are not allowed in function stops.")]):Ye.concat(go({key:`${Lt}[1]`,value:Dt[1],valueSpec:a,style:Ze.style,styleSpec:Ze.styleSpec}))}function Ue(Ze,Ye){const Dt=lt(Ze.value),Lt=mt(Ze.value),oi=Ze.value!==null?Ze.value:Ye;if(x){if(Dt!==x)return[new te(Ze.key,oi,`${Dt} stop domain type must match previous stop domain type ${x}`)]}else x=Dt;if(Dt!=="number"&&Dt!=="string"&&Dt!=="boolean")return[new te(Ze.key,oi,"stop domain value must be a number, string, or boolean")];if(Dt!=="number"&&g!=="categorical"){let xi=`number expected, ${Dt} found`;return Hn(a)&&g===void 0&&(xi+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new te(Ze.key,oi,xi)]}return g!=="categorical"||Dt!=="number"||isFinite(Lt)&&Math.floor(Lt)===Lt?g!=="categorical"&&Dt==="number"&&T!==void 0&&Lt<T?[new te(Ze.key,oi,"stop domain values must appear in ascending order")]:(T=Lt,g==="categorical"&&Lt in O?[new te(Ze.key,oi,"stop domain values must be unique")]:(O[Lt]=!0,[])):[new te(Ze.key,oi,`integer expected, found ${Lt}`)]}}function ta(d){const a=(d.expressionContext==="property"?Bo:lo)(Jt(d.value),d.valueSpec);if(a.result==="error")return a.value.map(x=>new te(`${d.key}${x.key}`,d.value,x.message));const g=a.value.expression||a.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!g.outputDefined())return[new te(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!ea(g))return[new te(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!ea(g))return[new te(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Ha(g,["zoom","feature-state"]))return[new te(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!ds(g))return[new te(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ya(d){const a=d.key,g=d.value,x=d.valueSpec,T=[];return Array.isArray(x.values)?x.values.indexOf(mt(g))===-1&&T.push(new te(a,g,`expected one of [${x.values.join(", ")}], ${JSON.stringify(g)} found`)):Object.keys(x.values).indexOf(mt(g))===-1&&T.push(new te(a,g,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(g)} found`)),T}function La(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const a of d.slice(1))if(!La(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const iu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ss(d){if(d==null)return{filter:()=>!0,needGeometry:!1};La(d)||(d=pa(d));const a=lo(d,iu);if(a.result==="error")throw new Error(a.value.map(g=>`${g.key}: ${g.message}`).join(", "));return{filter:(g,x,T)=>a.value.evaluate(g,x,{},T),needGeometry:dl(d)}}function Fl(d,a){return d<a?-1:d>a?1:0}function dl(d){if(!Array.isArray(d))return!1;if(d[0]==="within")return!0;for(let a=1;a<d.length;a++)if(dl(d[a]))return!0;return!1}function pa(d){if(!d)return!0;const a=d[0];return d.length<=1?a!=="any":a==="=="?Bl(d[1],d[2],"=="):a==="!="?Pa(Bl(d[1],d[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Bl(d[1],d[2],a):a==="any"?(g=d.slice(1),["any"].concat(g.map(pa))):a==="all"?["all"].concat(d.slice(1).map(pa)):a==="none"?["all"].concat(d.slice(1).map(pa).map(Pa)):a==="in"?as(d[1],d.slice(2)):a==="!in"?Pa(as(d[1],d.slice(2))):a==="has"?Rl(d[1]):a==="!has"?Pa(Rl(d[1])):a!=="within"||d;var g}function Bl(d,a,g){switch(d){case"$type":return[`filter-type-${g}`,a];case"$id":return[`filter-id-${g}`,a];default:return[`filter-${g}`,d,a]}}function as(d,a){if(a.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(g=>typeof g!=typeof a[0])?["filter-in-large",d,["literal",a.sort(Fl)]]:["filter-in-small",d,["literal",a]]}}function Rl(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Pa(d){return["!",d]}function pl(d){return La(Jt(d.value))?ta(ot({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ia(d)}function ia(d){const a=d.value,g=d.key;if(lt(a)!=="array")return[new te(g,a,`array expected, ${lt(a)} found`)];const x=d.styleSpec;let T,D=[];if(a.length<1)return[new te(g,a,"filter array must have at least 1 element")];switch(D=D.concat(Ya({key:`${g}[0]`,value:a[0],valueSpec:x.filter_operator,style:d.style,styleSpec:d.styleSpec})),mt(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&mt(a[1])==="$type"&&D.push(new te(g,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&D.push(new te(g,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(T=lt(a[1]),T!=="string"&&D.push(new te(`${g}[1]`,a[1],`string expected, ${T} found`)));for(let O=2;O<a.length;O++)T=lt(a[O]),mt(a[1])==="$type"?D=D.concat(Ya({key:`${g}[${O}]`,value:a[O],valueSpec:x.geometry_type,style:d.style,styleSpec:d.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&D.push(new te(`${g}[${O}]`,a[O],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let O=1;O<a.length;O++)D=D.concat(ia({key:`${g}[${O}]`,value:a[O],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":T=lt(a[1]),a.length!==2?D.push(new te(g,a,`filter array for "${a[0]}" operator must have 2 elements`)):T!=="string"&&D.push(new te(`${g}[1]`,a[1],`string expected, ${T} found`));break;case"within":T=lt(a[1]),a.length!==2?D.push(new te(g,a,`filter array for "${a[0]}" operator must have 2 elements`)):T!=="object"&&D.push(new te(`${g}[1]`,a[1],`object expected, ${T} found`))}return D}function Ja(d,a){const g=d.key,x=d.style,T=d.styleSpec,D=d.value,O=d.objectKey,Z=T[`${a}_${d.layerType}`];if(!Z)return[];const ee=O.match(/^(.*)-transition$/);if(a==="paint"&&ee&&Z[ee[1]]&&Z[ee[1]].transition)return go({key:g,value:D,valueSpec:T.transition,style:x,styleSpec:T});const ue=d.valueSpec||Z[O];if(!ue)return[new te(g,D,`unknown property "${O}"`)];let _e;if(lt(D)==="string"&&Hn(ue)&&!ue.tokens&&(_e=/^{([^}]+)}$/.exec(D)))return[new te(g,D,`"${O}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_e[1])} }\`.`)];const Ce=[];return d.layerType==="symbol"&&(O==="text-field"&&x&&!x.glyphs&&Ce.push(new te(g,D,'use of "text-field" requires a style "glyphs" property')),O==="text-font"&&zt(Jt(D))&&mt(D.type)==="identity"&&Ce.push(new te(g,D,'"text-font" does not support identity functions'))),Ce.concat(go({key:d.key,value:D,valueSpec:ue,style:x,styleSpec:T,expressionContext:"property",propertyType:a,propertyKey:O}))}function ec(d){return Ja(d,"paint")}function tc(d){return Ja(d,"layout")}function Ka(d){let a=[];const g=d.value,x=d.key,T=d.style,D=d.styleSpec;g.type||g.ref||a.push(new te(x,g,'either "type" or "ref" is required'));let O=mt(g.type);const Z=mt(g.ref);if(g.id){const ee=mt(g.id);for(let ue=0;ue<d.arrayIndex;ue++){const _e=T.layers[ue];mt(_e.id)===ee&&a.push(new te(x,g.id,`duplicate layer id "${g.id}", previously used at line ${_e.id.__line__}`))}}if("ref"in g){let ee;["type","source","source-layer","filter","layout"].forEach(ue=>{ue in g&&a.push(new te(x,g[ue],`"${ue}" is prohibited for ref layers`))}),T.layers.forEach(ue=>{mt(ue.id)===Z&&(ee=ue)}),ee?ee.ref?a.push(new te(x,g.ref,"ref cannot reference another ref layer")):O=mt(ee.type):a.push(new te(x,g.ref,`ref layer "${Z}" not found`))}else if(O!=="background")if(g.source){const ee=T.sources&&T.sources[g.source],ue=ee&&mt(ee.type);ee?ue==="vector"&&O==="raster"?a.push(new te(x,g.source,`layer "${g.id}" requires a raster source`)):ue==="raster"&&O!=="raster"?a.push(new te(x,g.source,`layer "${g.id}" requires a vector source`)):ue!=="vector"||g["source-layer"]?ue==="raster-dem"&&O!=="hillshade"?a.push(new te(x,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):O!=="line"||!g.paint||!g.paint["line-gradient"]||ue==="geojson"&&ee.lineMetrics||a.push(new te(x,g,`layer "${g.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new te(x,g,`layer "${g.id}" must specify a "source-layer"`)):a.push(new te(x,g.source,`source "${g.source}" not found`))}else a.push(new te(x,g,'missing required property "source"'));return a=a.concat(Go({key:x,value:g,valueSpec:D.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":()=>[],type:()=>go({key:`${x}.type`,value:g.type,valueSpec:D.layer.type,style:d.style,styleSpec:d.styleSpec,object:g,objectKey:"type"}),filter:pl,layout:ee=>Go({layer:g,key:ee.key,value:ee.value,style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{"*":ue=>tc(ot({layerType:O},ue))}}),paint:ee=>Go({layer:g,key:ee.key,value:ee.value,style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{"*":ue=>ec(ot({layerType:O},ue))}})}})),a}function ls(d){const a=d.value,g=d.key,x=lt(a);return x!=="string"?[new te(g,a,`string expected, ${x} found`)]:[]}const ra={promoteId:function({key:d,value:a}){if(lt(a)==="string")return ls({key:d,value:a});{const g=[];for(const x in a)g.push(...ls({key:`${d}.${x}`,value:a[x]}));return g}}};function na(d){const a=d.value,g=d.key,x=d.styleSpec,T=d.style;if(!a.type)return[new te(g,a,'"type" is required')];const D=mt(a.type);let O;switch(D){case"vector":case"raster":case"raster-dem":return O=Go({key:g,value:a,valueSpec:x[`source_${D.replace("-","_")}`],style:d.style,styleSpec:x,objectElementValidators:ra}),O;case"geojson":if(O=Go({key:g,value:a,valueSpec:x.source_geojson,style:T,styleSpec:x,objectElementValidators:ra}),a.cluster)for(const Z in a.clusterProperties){const[ee,ue]=a.clusterProperties[Z],_e=typeof ee=="string"?[ee,["accumulated"],["get",Z]]:ee;O.push(...ta({key:`${g}.${Z}.map`,value:ue,expressionContext:"cluster-map"})),O.push(...ta({key:`${g}.${Z}.reduce`,value:_e,expressionContext:"cluster-reduce"}))}return O;case"video":return Go({key:g,value:a,valueSpec:x.source_video,style:T,styleSpec:x});case"image":return Go({key:g,value:a,valueSpec:x.source_image,style:T,styleSpec:x});case"canvas":return[new te(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ya({key:`${g}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,styleSpec:x})}}function Ps(d){const a=d.value,g=d.styleSpec,x=g.light,T=d.style;let D=[];const O=lt(a);if(a===void 0)return D;if(O!=="object")return D=D.concat([new te("light",a,`object expected, ${O} found`)]),D;for(const Z in a){const ee=Z.match(/^(.*)-transition$/);D=D.concat(ee&&x[ee[1]]&&x[ee[1]].transition?go({key:Z,value:a[Z],valueSpec:g.transition,style:T,styleSpec:g}):x[Z]?go({key:Z,value:a[Z],valueSpec:x[Z],style:T,styleSpec:g}):[new te(Z,a[Z],`unknown property "${Z}"`)])}return D}function Do(d){const a=d.value,g=d.styleSpec,x=g.terrain,T=d.style;let D=[];const O=lt(a);if(a===void 0)return D;if(O!=="object")return D=D.concat([new te("terrain",a,`object expected, ${O} found`)]),D;for(const Z in a)D=D.concat(x[Z]?go({key:Z,value:a[Z],valueSpec:x[Z],style:T,styleSpec:g}):[new te(Z,a[Z],`unknown property "${Z}"`)]);return D}const Ma={"*":()=>[],array:fl,boolean:function(d){const a=d.value,g=d.key,x=lt(a);return x!=="boolean"?[new te(g,a,`boolean expected, ${x} found`)]:[]},number:Xa,color:function(d){const a=d.key,g=d.value,x=lt(g);return x!=="string"?[new te(a,g,`color expected, ${x} found`)]:eo(g)===null?[new te(a,g,`color expected, "${g}" found`)]:[]},constants:je,enum:Ya,filter:pl,function:tu,layer:Ka,object:Go,source:na,light:Ps,terrain:Do,string:ls,formatted:function(d){return ls(d).length===0?[]:ta(d)},resolvedImage:function(d){return ls(d).length===0?[]:ta(d)},padding:function(d){const a=d.key,g=d.value;if(lt(g)==="array"){if(g.length<1||g.length>4)return[new te(a,g,`padding requires 1 to 4 values; ${g.length} values found`)];const x={type:"number"};let T=[];for(let D=0;D<g.length;D++)T=T.concat(go({key:`${a}[${D}]`,value:g[D],valueSpec:x}));return T}return Xa({key:a,value:g,valueSpec:{}})}};function go(d){const a=d.value,g=d.valueSpec,x=d.styleSpec;return g.expression&&zt(mt(a))?tu(d):g.expression&&ro(Jt(a))?ta(d):g.type&&Ma[g.type]?Ma[g.type](d):Go(ot({},d,{valueSpec:g.type?x[g.type]:g}))}function ru(d){const a=d.value,g=d.key,x=ls(d);return x.length||(a.indexOf("{fontstack}")===-1&&x.push(new te(g,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&x.push(new te(g,a,'"glyphs" url must include a "{range}" token'))),x}function oa(d,a=Y){let g=[];return g=g.concat(go({key:"",value:d,valueSpec:a.$root,styleSpec:a,style:d,objectElementValidators:{glyphs:ru,"*":()=>[]}})),d.constants&&(g=g.concat(je({key:"constants",value:d.constants,style:d,styleSpec:a}))),Ms(g)}function Ms(d){return[].concat(d).sort((a,g)=>a.line-g.line)}function Sn(d){return function(...a){return Ms(d.apply(this,a))}}oa.source=Sn(na),oa.light=Sn(Ps),oa.terrain=Sn(Do),oa.layer=Sn(Ka),oa.filter=Sn(pl),oa.paintProperty=Sn(ec),oa.layoutProperty=Sn(tc);const qs=oa,Qa=qs.light,nu=qs.paintProperty,Ol=qs.layoutProperty;function ms(d,a){let g=!1;if(a&&a.length)for(const x of a)d.fire(new Dr(new Error(x.message))),g=!0;return g}class $a{constructor(a,g,x){const T=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const O=new Int32Array(this.arrayBuffer);a=O[0],this.d=(g=O[1])+2*(x=O[2]);for(let ee=0;ee<this.d*this.d;ee++){const ue=O[3+ee],_e=O[3+ee+1];T.push(ue===_e?null:O.subarray(ue,_e))}const Z=O[3+T.length+1];this.keys=O.subarray(O[3+T.length],Z),this.bboxes=O.subarray(Z),this.insert=this._insertReadonly}else{this.d=g+2*x;for(let O=0;O<this.d*this.d;O++)T.push([]);this.keys=[],this.bboxes=[]}this.n=g,this.extent=a,this.padding=x,this.scale=g/a,this.uid=0;const D=x/g*a;this.min=-D,this.max=a+D}insert(a,g,x,T,D){this._forEachCell(g,x,T,D,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(T),this.bboxes.push(D)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,g,x,T,D,O){this.cells[D].push(O)}query(a,g,x,T,D){const O=this.min,Z=this.max;if(a<=O&&g<=O&&Z<=x&&Z<=T&&!D)return Array.prototype.slice.call(this.keys);{const ee=[];return this._forEachCell(a,g,x,T,this._queryCell,ee,{},D),ee}}_queryCell(a,g,x,T,D,O,Z,ee){const ue=this.cells[D];if(ue!==null){const _e=this.keys,Ce=this.bboxes;for(let Ue=0;Ue<ue.length;Ue++){const Ze=ue[Ue];if(Z[Ze]===void 0){const Ye=4*Ze;(ee?ee(Ce[Ye+0],Ce[Ye+1],Ce[Ye+2],Ce[Ye+3]):a<=Ce[Ye+2]&&g<=Ce[Ye+3]&&x>=Ce[Ye+0]&&T>=Ce[Ye+1])?(Z[Ze]=!0,O.push(_e[Ze])):Z[Ze]=!1}}}}_forEachCell(a,g,x,T,D,O,Z,ee){const ue=this._convertToCellCoord(a),_e=this._convertToCellCoord(g),Ce=this._convertToCellCoord(x),Ue=this._convertToCellCoord(T);for(let Ze=ue;Ze<=Ce;Ze++)for(let Ye=_e;Ye<=Ue;Ye++){const Dt=this.d*Ye+Ze;if((!ee||ee(this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ye),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(Ye+1)))&&D.call(this,a,g,x,T,Dt,O,Z,ee))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,g=3+this.cells.length+1+1;let x=0;for(let O=0;O<this.cells.length;O++)x+=this.cells[O].length;const T=new Int32Array(g+x+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let D=g;for(let O=0;O<a.length;O++){const Z=a[O];T[3+O]=D,T.set(Z,D),D+=Z.length}return T[3+a.length]=D,T.set(this.keys,D),D+=this.keys.length,T[3+a.length+1]=D,T.set(this.bboxes,D),D+=this.bboxes.length,T.buffer}static serialize(a,g){const x=a.toArrayBuffer();return g&&g.push(x),{buffer:x}}static deserialize(a){return new $a(a.buffer)}}const Ro={};function dr(d,a,g={}){if(Ro[d])throw new Error(`${d} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:d,writeable:!1}),Ro[d]={klass:a,omit:g.omit||[],shallow:g.shallow||[]}}dr("Object",Object),dr("TransferableGridIndex",$a),dr("Color",et),dr("Error",Error),dr("AJAXError",Di),dr("ResolvedImage",jt),dr("StylePropertyFunction",gn),dr("StyleExpression",Mn,{omit:["_evaluator"]}),dr("ZoomDependentExpression",Ko),dr("ZoomConstantExpression",ho),dr("CompoundExpression",On,{omit:["_evaluate"]});for(const d in br)br[d]._classRegistryKey||dr(`Expression_${d}`,br[d]);function no(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function kn(d,a){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob)return d;if(no(d)||Xe(d))return a&&a.push(d),d;if(ArrayBuffer.isView(d)){const g=d;return a&&a.push(g.buffer),g}if(d instanceof ImageData)return a&&a.push(d.data.buffer),d;if(Array.isArray(d)){const g=[];for(const x of d)g.push(kn(x,a));return g}if(typeof d=="object"){const g=d.constructor,x=g._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");if(!Ro[x])throw new Error(`${x} is not registered.`);const T=g.serialize?g.serialize(d,a):{};if(g.serialize){if(a&&T===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const D in d){if(!d.hasOwnProperty(D)||Ro[x].omit.indexOf(D)>=0)continue;const O=d[D];T[D]=Ro[x].shallow.indexOf(D)>=0?O:kn(O,a)}d instanceof Error&&(T.message=d.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return x!=="Object"&&(T.$name=x),T}throw new Error("can't serialize object of type "+typeof d)}function Jn(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||no(d)||Xe(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(Jn);if(typeof d=="object"){const a=d.$name||"Object";if(!Ro[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:g}=Ro[a];if(!g)throw new Error(`can't deserialize unregistered class ${a}`);if(g.deserialize)return g.deserialize(d);const x=Object.create(g.prototype);for(const T of Object.keys(d)){if(T==="$name")continue;const D=d[T];x[T]=Ro[a].shallow.indexOf(T)>=0?D:Jn(D)}return x}throw new Error("can't deserialize object of type "+typeof d)}class Co{constructor(){this.first=!0}update(a,g){const x=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=g):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=g),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=x,!0))}}const ir={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function sa(d){for(const a of d)if(ic(a.charCodeAt(0)))return!0;return!1}function ou(d){for(const a of d)if(!su(a.charCodeAt(0)))return!1;return!0}function su(d){return!(ir.Arabic(d)||ir["Arabic Supplement"](d)||ir["Arabic Extended-A"](d)||ir["Arabic Presentation Forms-A"](d)||ir["Arabic Presentation Forms-B"](d))}function ic(d){return!(d!==746&&d!==747&&(d<4352||!(ir["Bopomofo Extended"](d)||ir.Bopomofo(d)||ir["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||ir["CJK Compatibility Ideographs"](d)||ir["CJK Compatibility"](d)||ir["CJK Radicals Supplement"](d)||ir["CJK Strokes"](d)||!(!ir["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||ir["CJK Unified Ideographs Extension A"](d)||ir["CJK Unified Ideographs"](d)||ir["Enclosed CJK Letters and Months"](d)||ir["Hangul Compatibility Jamo"](d)||ir["Hangul Jamo Extended-A"](d)||ir["Hangul Jamo Extended-B"](d)||ir["Hangul Jamo"](d)||ir["Hangul Syllables"](d)||ir.Hiragana(d)||ir["Ideographic Description Characters"](d)||ir.Kanbun(d)||ir["Kangxi Radicals"](d)||ir["Katakana Phonetic Extensions"](d)||ir.Katakana(d)&&d!==12540||!(!ir["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!ir["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||ir["Unified Canadian Aboriginal Syllabics"](d)||ir["Unified Canadian Aboriginal Syllabics Extended"](d)||ir["Vertical Forms"](d)||ir["Yijing Hexagram Symbols"](d)||ir["Yi Syllables"](d)||ir["Yi Radicals"](d))))}function Sc(d){return!(ic(d)||function(a){return!!(ir["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||ir["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||ir["Letterlike Symbols"](a)||ir["Number Forms"](a)||ir["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||ir["Control Pictures"](a)&&a!==9251||ir["Optical Character Recognition"](a)||ir["Enclosed Alphanumerics"](a)||ir["Geometric Shapes"](a)||ir["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||ir["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||ir["CJK Symbols and Punctuation"](a)||ir.Katakana(a)||ir["Private Use Area"](a)||ir["CJK Compatibility Forms"](a)||ir["Small Form Variants"](a)||ir["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(d))}function Ic(d){return d>=1424&&d<=2303||ir["Arabic Presentation Forms-A"](d)||ir["Arabic Presentation Forms-B"](d)}function Xc(d,a){return!(!a&&Ic(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||ir.Khmer(d))}function an(d){for(const a of d)if(Ic(a.charCodeAt(0)))return!0;return!1}const rc="deferred",wu="loading",yo="loaded";let xs=null,fo="unavailable",ma=null;const xu=function(d){d&&typeof d=="string"&&d.indexOf("NetworkError")>-1&&(fo="error"),xs&&xs(d)};function jl(){Ul.fire(new pi("pluginStateChange",{pluginStatus:fo,pluginURL:ma}))}const Ul=new ze,ml=function(){return fo},Dn=function(){if(fo!==rc||!ma)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fo=wu,jl(),ma&&$i({url:ma},d=>{d?xu(d):(fo=yo,jl())})},Vs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>fo===yo||Vs.applyArabicShaping!=null,isLoading:()=>fo===wu,setState(d){if(!me())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");fo=d.pluginStatus,ma=d.pluginURL},isParsed(){if(!me())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Vs.applyArabicShaping!=null&&Vs.processBidirectionalText!=null&&Vs.processStyledBidirectionalText!=null},getPluginURL(){if(!me())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ma}};class oo{constructor(a,g){this.zoom=a,g?(this.now=g.now,this.fadeDuration=g.fadeDuration,this.zoomHistory=g.zoomHistory,this.transition=g.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Co,this.transition={})}isSupportedScript(a){return function(g,x){for(const T of g)if(!Xc(T.charCodeAt(0),x))return!1;return!0}(a,Vs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,g=a-Math.floor(a),x=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:g+(1-g)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*g}}}class ql{constructor(a,g){this.property=a,this.value=g,this.expression=function(x,T){if(zt(x))return new gn(x,T);if(ro(x)){const D=Bo(x,T);if(D.result==="error")throw new Error(D.value.map(O=>`${O.key}: ${O.message}`).join(", "));return D.value}{let D=x;return T.type==="color"&&typeof x=="string"?D=et.parse(x):T.type!=="padding"||typeof x!="number"&&!Array.isArray(x)||(D=Tt.parse(x)),{kind:"constant",evaluate:()=>D}}}(g===void 0?a.specification.default:g,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,g,x){return this.property.possiblyEvaluate(this,a,g,x)}}class Vl{constructor(a){this.property=a,this.value=new ql(a,void 0)}transitioned(a,g){return new Yc(this.property,this.value,g,K({},a.transition,this.transition),a.now)}untransitioned(){return new Yc(this.property,this.value,null,{},0)}}class nc{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return ke(this._values[a].value.value)}setValue(a,g){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Vl(this._values[a].property)),this._values[a].value=new ql(this._values[a].property,g===null?void 0:ke(g))}getTransition(a){return ke(this._values[a].transition)}setTransition(a,g){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Vl(this._values[a].property)),this._values[a].transition=ke(g)||void 0}serialize(){const a={};for(const g of Object.keys(this._values)){const x=this.getValue(g);x!==void 0&&(a[g]=x);const T=this.getTransition(g);T!==void 0&&(a[`${g}-transition`]=T)}return a}transitioned(a,g){const x=new Da(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].transitioned(a,g._values[T]);return x}untransitioned(){const a=new Da(this._properties);for(const g of Object.keys(this._values))a._values[g]=this._values[g].untransitioned();return a}}class Yc{constructor(a,g,x,T,D){this.property=a,this.value=g,this.begin=D+T.delay||0,this.end=this.begin+T.duration||0,a.specification.transition&&(T.delay||T.duration)&&(this.prior=x)}possiblyEvaluate(a,g,x){const T=a.now||0,D=this.value.possiblyEvaluate(a,g,x),O=this.prior;if(O){if(T>this.end)return this.prior=null,D;if(this.value.isDataDriven())return this.prior=null,D;if(T<this.begin)return O.possiblyEvaluate(a,g,x);{const Z=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(a,g,x),D,function(ee){if(ee<=0)return 0;if(ee>=1)return 1;const ue=ee*ee,_e=ue*ee;return 4*(ee<.5?_e:3*(ee-ue)+_e-.75)}(Z))}}return D}}class Da{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,g,x){const T=new ku(this._properties);for(const D of Object.keys(this._values))T._values[D]=this._values[D].possiblyEvaluate(a,g,x);return T}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Jc{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return ke(this._values[a].value)}setValue(a,g){this._values[a]=new ql(this._values[a].property,g===null?void 0:ke(g))}serialize(){const a={};for(const g of Object.keys(this._values)){const x=this.getValue(g);x!==void 0&&(a[g]=x)}return a}possiblyEvaluate(a,g,x){const T=new ku(this._properties);for(const D of Object.keys(this._values))T._values[D]=this._values[D].possiblyEvaluate(a,g,x);return T}}class za{constructor(a,g,x){this.property=a,this.value=g,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,g,x,T){return this.property.evaluate(this.value,this.parameters,a,g,x,T)}}class ku{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Rr{constructor(a){this.specification=a}possiblyEvaluate(a,g){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(g)}interpolate(a,g,x){const T=Ta[this.specification.type];return T?T(a,g,x):a}}class Yr{constructor(a,g){this.specification=a,this.overrides=g}possiblyEvaluate(a,g,x,T){return new za(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(g,null,{},x,T)}:a.expression,g)}interpolate(a,g,x){if(a.value.kind!=="constant"||g.value.kind!=="constant")return a;if(a.value.value===void 0||g.value.value===void 0)return new za(this,{kind:"constant",value:void 0},a.parameters);const T=Ta[this.specification.type];return T?new za(this,{kind:"constant",value:T(a.value.value,g.value.value,x)},a.parameters):a}evaluate(a,g,x,T,D,O){return a.kind==="constant"?a.value:a.evaluate(g,x,T,D,O)}}class au extends Yr{possiblyEvaluate(a,g,x,T){if(a.value===void 0)return new za(this,{kind:"constant",value:void 0},g);if(a.expression.kind==="constant"){const D=a.expression.evaluate(g,null,{},x,T),O=a.property.specification.type==="resolvedImage"&&typeof D!="string"?D.name:D,Z=this._calculate(O,O,O,g);return new za(this,{kind:"constant",value:Z},g)}if(a.expression.kind==="camera"){const D=this._calculate(a.expression.evaluate({zoom:g.zoom-1}),a.expression.evaluate({zoom:g.zoom}),a.expression.evaluate({zoom:g.zoom+1}),g);return new za(this,{kind:"constant",value:D},g)}return new za(this,a.expression,g)}evaluate(a,g,x,T,D,O){if(a.kind==="source"){const Z=a.evaluate(g,x,T,D,O);return this._calculate(Z,Z,Z,g)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(g.zoom)-1},x,T),a.evaluate({zoom:Math.floor(g.zoom)},x,T),a.evaluate({zoom:Math.floor(g.zoom)+1},x,T),g):a.value}_calculate(a,g,x,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:a,to:g}:{from:x,to:g}}interpolate(a){return a}}class Au{constructor(a){this.specification=a}possiblyEvaluate(a,g,x,T){if(a.value!==void 0){if(a.expression.kind==="constant"){const D=a.expression.evaluate(g,null,{},x,T);return this._calculate(D,D,D,g)}return this._calculate(a.expression.evaluate(new oo(Math.floor(g.zoom-1),g)),a.expression.evaluate(new oo(Math.floor(g.zoom),g)),a.expression.evaluate(new oo(Math.floor(g.zoom+1),g)),g)}}_calculate(a,g,x,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:a,to:g}:{from:x,to:g}}interpolate(a){return a}}class Ho{constructor(a){this.specification=a}possiblyEvaluate(a,g,x,T){return!!a.expression.evaluate(g,null,{},x,T)}interpolate(){return!1}}class uo{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const g in a){const x=a[g];x.specification.overridable&&this.overridableProperties.push(g);const T=this.defaultPropertyValues[g]=new ql(x,void 0),D=this.defaultTransitionablePropertyValues[g]=new Vl(x);this.defaultTransitioningPropertyValues[g]=D.untransitioned(),this.defaultPossiblyEvaluatedValues[g]=T.possiblyEvaluate({})}}}dr("DataDrivenProperty",Yr),dr("DataConstantProperty",Rr),dr("CrossFadedDataDrivenProperty",au),dr("CrossFadedProperty",Au),dr("ColorRampProperty",Ho);const gl="-transition";class Na extends ze{constructor(a,g){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),g.layout&&(this._unevaluatedLayout=new Jc(g.layout)),g.paint)){this._transitionablePaint=new nc(g.paint);for(const x in a.paint)this.setPaintProperty(x,a.paint[x],{validate:!1});for(const x in a.layout)this.setLayoutProperty(x,a.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ku(g.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,g,x={}){g!=null&&this._validate(Ol,`layers.${this.id}.layout.${a}`,a,g,x)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,g):this.visibility=g)}getPaintProperty(a){return a.endsWith(gl)?this._transitionablePaint.getTransition(a.slice(0,-gl.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,g,x={}){if(g!=null&&this._validate(nu,`layers.${this.id}.paint.${a}`,a,g,x))return!1;if(a.endsWith(gl))return this._transitionablePaint.setTransition(a.slice(0,-gl.length),g||void 0),!1;{const T=this._transitionablePaint._values[a],D=T.property.specification["property-type"]==="cross-faded-data-driven",O=T.value.isDataDriven(),Z=T.value;this._transitionablePaint.setValue(a,g),this._handleSpecialPaintPropertyUpdate(a);const ee=this._transitionablePaint._values[a].value;return ee.isDataDriven()||O||D||this._handleOverridablePaintPropertyUpdate(a,Z,ee)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,g,x){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,g){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,g)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,g)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),re(a,(g,x)=>!(g===void 0||x==="layout"&&!Object.keys(g).length||x==="paint"&&!Object.keys(g).length))}_validate(a,g,x,T,D={}){return(!D||D.validate!==!1)&&ms(this,a.call(qs,{key:g,layerType:this.type,objectKey:x,value:T,styleSpec:Y,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const g=this.paint.get(a);if(g instanceof za&&Hn(g.property.specification)&&(g.value.kind==="source"||g.value.kind==="composite")&&g.value.isStateDependent)return!0}return!1}}const Cc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yl{constructor(a,g){this._structArray=a,this._pos1=g*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class To{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,g){return a._trim(),g&&(a.isTransferred=!0,g.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const g=Object.create(this.prototype);return g.arrayBuffer=a.arrayBuffer,g.length=a.length,g.capacity=a.arrayBuffer.byteLength/g.bytesPerElement,g._refreshViews(),g}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const g=this.uint8;this._refreshViews(),g&&this.uint8.set(g)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Oo(d,a=1){let g=0,x=0;return{members:d.map(T=>{const D=Cc[T.type].BYTES_PER_ELEMENT,O=g=Tc(g,Math.max(a,D)),Z=T.components||1;return x=Math.max(x,D),g+=D*Z,{name:T.name,type:T.type,components:Z,offset:O}}),size:Tc(g,Math.max(x,a)),alignment:a}}function Tc(d,a){return Math.ceil(d/a)*a}class Ds extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,g)}emplace(a,g,x){const T=2*a;return this.int16[T+0]=g,this.int16[T+1]=x,a}}Ds.prototype.bytesPerElement=4,dr("StructArrayLayout2i4",Ds);class I extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g,x,T){const D=this.length;return this.resize(D+1),this.emplace(D,a,g,x,T)}emplace(a,g,x,T,D){const O=4*a;return this.int16[O+0]=g,this.int16[O+1]=x,this.int16[O+2]=T,this.int16[O+3]=D,a}}I.prototype.bytesPerElement=8,dr("StructArrayLayout4i8",I);class u extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O){const Z=this.length;return this.resize(Z+1),this.emplace(Z,a,g,x,T,D,O)}emplace(a,g,x,T,D,O,Z){const ee=6*a;return this.int16[ee+0]=g,this.int16[ee+1]=x,this.int16[ee+2]=T,this.int16[ee+3]=D,this.int16[ee+4]=O,this.int16[ee+5]=Z,a}}u.prototype.bytesPerElement=12,dr("StructArrayLayout2i4i12",u);class _ extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O){const Z=this.length;return this.resize(Z+1),this.emplace(Z,a,g,x,T,D,O)}emplace(a,g,x,T,D,O,Z){const ee=4*a,ue=8*a;return this.int16[ee+0]=g,this.int16[ee+1]=x,this.uint8[ue+4]=T,this.uint8[ue+5]=D,this.uint8[ue+6]=O,this.uint8[ue+7]=Z,a}}_.prototype.bytesPerElement=8,dr("StructArrayLayout2i4ub8",_);class k extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,g)}emplace(a,g,x){const T=2*a;return this.float32[T+0]=g,this.float32[T+1]=x,a}}k.prototype.bytesPerElement=8,dr("StructArrayLayout2f8",k);class C extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O,Z,ee,ue,_e){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,a,g,x,T,D,O,Z,ee,ue,_e)}emplace(a,g,x,T,D,O,Z,ee,ue,_e,Ce){const Ue=10*a;return this.uint16[Ue+0]=g,this.uint16[Ue+1]=x,this.uint16[Ue+2]=T,this.uint16[Ue+3]=D,this.uint16[Ue+4]=O,this.uint16[Ue+5]=Z,this.uint16[Ue+6]=ee,this.uint16[Ue+7]=ue,this.uint16[Ue+8]=_e,this.uint16[Ue+9]=Ce,a}}C.prototype.bytesPerElement=20,dr("StructArrayLayout10ui20",C);class R extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue)}emplace(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze){const Ye=12*a;return this.int16[Ye+0]=g,this.int16[Ye+1]=x,this.int16[Ye+2]=T,this.int16[Ye+3]=D,this.uint16[Ye+4]=O,this.uint16[Ye+5]=Z,this.uint16[Ye+6]=ee,this.uint16[Ye+7]=ue,this.int16[Ye+8]=_e,this.int16[Ye+9]=Ce,this.int16[Ye+10]=Ue,this.int16[Ye+11]=Ze,a}}R.prototype.bytesPerElement=24,dr("StructArrayLayout4i4ui4i24",R);class H extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,g,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,g,x)}emplace(a,g,x,T){const D=3*a;return this.float32[D+0]=g,this.float32[D+1]=x,this.float32[D+2]=T,a}}H.prototype.bytesPerElement=12,dr("StructArrayLayout3f12",H);class ie extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const g=this.length;return this.resize(g+1),this.emplace(g,a)}emplace(a,g){return this.uint32[1*a+0]=g,a}}ie.prototype.bytesPerElement=4,dr("StructArrayLayout1ul4",ie);class ae extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O,Z,ee,ue){const _e=this.length;return this.resize(_e+1),this.emplace(_e,a,g,x,T,D,O,Z,ee,ue)}emplace(a,g,x,T,D,O,Z,ee,ue,_e){const Ce=10*a,Ue=5*a;return this.int16[Ce+0]=g,this.int16[Ce+1]=x,this.int16[Ce+2]=T,this.int16[Ce+3]=D,this.int16[Ce+4]=O,this.int16[Ce+5]=Z,this.uint32[Ue+3]=ee,this.uint16[Ce+8]=ue,this.uint16[Ce+9]=_e,a}}ae.prototype.bytesPerElement=20,dr("StructArrayLayout6i1ul2ui20",ae);class he extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O){const Z=this.length;return this.resize(Z+1),this.emplace(Z,a,g,x,T,D,O)}emplace(a,g,x,T,D,O,Z){const ee=6*a;return this.int16[ee+0]=g,this.int16[ee+1]=x,this.int16[ee+2]=T,this.int16[ee+3]=D,this.int16[ee+4]=O,this.int16[ee+5]=Z,a}}he.prototype.bytesPerElement=12,dr("StructArrayLayout2i2i2i12",he);class we extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D){const O=this.length;return this.resize(O+1),this.emplace(O,a,g,x,T,D)}emplace(a,g,x,T,D,O){const Z=4*a,ee=8*a;return this.float32[Z+0]=g,this.float32[Z+1]=x,this.float32[Z+2]=T,this.int16[ee+6]=D,this.int16[ee+7]=O,a}}we.prototype.bytesPerElement=16,dr("StructArrayLayout2f1f2i16",we);class Be extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,g,x,T){const D=this.length;return this.resize(D+1),this.emplace(D,a,g,x,T)}emplace(a,g,x,T,D){const O=12*a,Z=3*a;return this.uint8[O+0]=g,this.uint8[O+1]=x,this.float32[Z+1]=T,this.float32[Z+2]=D,a}}Be.prototype.bytesPerElement=12,dr("StructArrayLayout2ub2f12",Be);class Ve extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,g,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,g,x)}emplace(a,g,x,T){const D=3*a;return this.uint16[D+0]=g,this.uint16[D+1]=x,this.uint16[D+2]=T,a}}Ve.prototype.bytesPerElement=6,dr("StructArrayLayout3ui6",Ve);class vt extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt,Lt,oi){const xi=this.length;return this.resize(xi+1),this.emplace(xi,a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt,Lt,oi)}emplace(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt,Lt,oi,xi){const ti=24*a,mi=12*a,Oi=48*a;return this.int16[ti+0]=g,this.int16[ti+1]=x,this.uint16[ti+2]=T,this.uint16[ti+3]=D,this.uint32[mi+2]=O,this.uint32[mi+3]=Z,this.uint32[mi+4]=ee,this.uint16[ti+10]=ue,this.uint16[ti+11]=_e,this.uint16[ti+12]=Ce,this.float32[mi+7]=Ue,this.float32[mi+8]=Ze,this.uint8[Oi+36]=Ye,this.uint8[Oi+37]=Dt,this.uint8[Oi+38]=Lt,this.uint32[mi+10]=oi,this.int16[ti+22]=xi,a}}vt.prototype.bytesPerElement=48,dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",vt);class ut extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt,Lt,oi,xi,ti,mi,Oi,Fi,Lr,Or,Ar,pr,ur,Er){const _r=this.length;return this.resize(_r+1),this.emplace(_r,a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt,Lt,oi,xi,ti,mi,Oi,Fi,Lr,Or,Ar,pr,ur,Er)}emplace(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt,Lt,oi,xi,ti,mi,Oi,Fi,Lr,Or,Ar,pr,ur,Er,_r){const Qi=34*a,Kr=17*a;return this.int16[Qi+0]=g,this.int16[Qi+1]=x,this.int16[Qi+2]=T,this.int16[Qi+3]=D,this.int16[Qi+4]=O,this.int16[Qi+5]=Z,this.int16[Qi+6]=ee,this.int16[Qi+7]=ue,this.uint16[Qi+8]=_e,this.uint16[Qi+9]=Ce,this.uint16[Qi+10]=Ue,this.uint16[Qi+11]=Ze,this.uint16[Qi+12]=Ye,this.uint16[Qi+13]=Dt,this.uint16[Qi+14]=Lt,this.uint16[Qi+15]=oi,this.uint16[Qi+16]=xi,this.uint16[Qi+17]=ti,this.uint16[Qi+18]=mi,this.uint16[Qi+19]=Oi,this.uint16[Qi+20]=Fi,this.uint16[Qi+21]=Lr,this.uint16[Qi+22]=Or,this.uint32[Kr+12]=Ar,this.float32[Kr+13]=pr,this.float32[Kr+14]=ur,this.float32[Kr+15]=Er,this.float32[Kr+16]=_r,a}}ut.prototype.bytesPerElement=68,dr("StructArrayLayout8i15ui1ul4f68",ut);class dt extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const g=this.length;return this.resize(g+1),this.emplace(g,a)}emplace(a,g){return this.float32[1*a+0]=g,a}}dt.prototype.bytesPerElement=4,dr("StructArrayLayout1f4",dt);class Rt extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,g,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,g,x)}emplace(a,g,x,T){const D=3*a;return this.int16[D+0]=g,this.int16[D+1]=x,this.int16[D+2]=T,a}}Rt.prototype.bytesPerElement=6,dr("StructArrayLayout3i6",Rt);class $t extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,g,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,g,x)}emplace(a,g,x,T){const D=4*a;return this.uint32[2*a+0]=g,this.uint16[D+2]=x,this.uint16[D+3]=T,a}}$t.prototype.bytesPerElement=8,dr("StructArrayLayout1ul2ui8",$t);class ui extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,g)}emplace(a,g,x){const T=2*a;return this.uint16[T+0]=g,this.uint16[T+1]=x,a}}ui.prototype.bytesPerElement=4,dr("StructArrayLayout2ui4",ui);class It extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const g=this.length;return this.resize(g+1),this.emplace(g,a)}emplace(a,g){return this.uint16[1*a+0]=g,a}}It.prototype.bytesPerElement=2,dr("StructArrayLayout1ui2",It);class gi extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,g,x,T){const D=this.length;return this.resize(D+1),this.emplace(D,a,g,x,T)}emplace(a,g,x,T,D){const O=4*a;return this.float32[O+0]=g,this.float32[O+1]=x,this.float32[O+2]=T,this.float32[O+3]=D,a}}gi.prototype.bytesPerElement=16,dr("StructArrayLayout4f16",gi);class fi extends yl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new pt(this.anchorPointX,this.anchorPointY)}}fi.prototype.size=20;class Ti extends ae{get(a){return new fi(this,a)}}dr("CollisionBoxArray",Ti);class Si extends yl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Si.prototype.size=48;class Zi extends vt{get(a){return new Si(this,a)}}dr("PlacedSymbolArray",Zi);class Ai extends yl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ai.prototype.size=68;class vr extends ut{get(a){return new Ai(this,a)}}dr("SymbolInstanceArray",vr);class sr extends dt{getoffsetX(a){return this.float32[1*a+0]}}dr("GlyphOffsetArray",sr);class Ir extends Rt{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}dr("SymbolLineVertexArray",Ir);class nn extends yl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}nn.prototype.size=8;class cn extends $t{get(a){return new nn(this,a)}}dr("FeatureIndexArray",cn);class P extends Ds{}class j extends Ds{}class Q extends Ds{}class le extends u{}class Ae extends _{}class Fe extends k{}class Oe extends C{}class He extends R{}class Qe extends H{}class ct extends ie{}class Ut extends he{}class ci extends Be{}class li extends Ve{}class ei extends ui{}const qi=Oo([{name:"a_pos",components:2,type:"Int16"}],4),{members:bi}=qi;class Pt{constructor(a=[]){this.segments=a}prepareSegment(a,g,x,T){let D=this.segments[this.segments.length-1];return a>Pt.MAX_VERTEX_ARRAY_LENGTH&&be(`Max vertices per segment is ${Pt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!D||D.vertexLength+a>Pt.MAX_VERTEX_ARRAY_LENGTH||D.sortKey!==T)&&(D={vertexOffset:g.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},T!==void 0&&(D.sortKey=T),this.segments.push(D)),D}get(){return this.segments}destroy(){for(const a of this.segments)for(const g in a.vaos)a.vaos[g].destroy()}static simpleSegment(a,g,x,T){return new Pt([{vertexOffset:a,primitiveOffset:g,vertexLength:x,primitiveLength:T,vaos:{},sortKey:0}])}}function Ft(d,a){return 256*(d=q(Math.floor(d),0,255))+q(Math.floor(a),0,255)}Pt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dr("SegmentVector",Pt);const Pi=Oo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ni={exports:{}},Ci={exports:{}};Ci.exports=function(d,a){var g,x,T,D,O,Z,ee,ue;for(x=d.length-(g=3&d.length),T=a,O=3432918353,Z=461845907,ue=0;ue<x;)ee=255&d.charCodeAt(ue)|(255&d.charCodeAt(++ue))<<8|(255&d.charCodeAt(++ue))<<16|(255&d.charCodeAt(++ue))<<24,++ue,T=27492+(65535&(D=5*(65535&(T=(T^=ee=(65535&(ee=(ee=(65535&ee)*O+(((ee>>>16)*O&65535)<<16)&4294967295)<<15|ee>>>17))*Z+(((ee>>>16)*Z&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(ee=0,g){case 3:ee^=(255&d.charCodeAt(ue+2))<<16;case 2:ee^=(255&d.charCodeAt(ue+1))<<8;case 1:T^=ee=(65535&(ee=(ee=(65535&(ee^=255&d.charCodeAt(ue)))*O+(((ee>>>16)*O&65535)<<16)&4294967295)<<15|ee>>>17))*Z+(((ee>>>16)*Z&65535)<<16)&4294967295}return T^=d.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var mr={exports:{}};mr.exports=function(d,a){for(var g,x=d.length,T=a^x,D=0;x>=4;)g=1540483477*(65535&(g=255&d.charCodeAt(D)|(255&d.charCodeAt(++D))<<8|(255&d.charCodeAt(++D))<<16|(255&d.charCodeAt(++D))<<24))+((1540483477*(g>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),x-=4,++D;switch(x){case 3:T^=(255&d.charCodeAt(D+2))<<16;case 2:T^=(255&d.charCodeAt(D+1))<<8;case 1:T=1540483477*(65535&(T^=255&d.charCodeAt(D)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var cr=Ci.exports,tn=mr.exports;Ni.exports=cr,Ni.exports.murmur3=cr,Ni.exports.murmur2=tn;class gr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,g,x,T){this.ids.push(Vn(a)),this.positions.push(g,x,T)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const g=Vn(a);let x=0,T=this.ids.length-1;for(;x<T;){const O=x+T>>1;this.ids[O]>=g?T=O:x=O+1}const D=[];for(;this.ids[x]===g;)D.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return D}static serialize(a,g){const x=new Float64Array(a.ids),T=new Uint32Array(a.positions);return Wn(x,T,0,x.length-1),g&&g.push(x.buffer,T.buffer),{ids:x,positions:T}}static deserialize(a){const g=new gr;return g.ids=a.ids,g.positions=a.positions,g.indexed=!0,g}}function Vn(d){const a=+d;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Ni.exports(String(d))}function Wn(d,a,g,x){for(;g<x;){const T=d[g+x>>1];let D=g-1,O=x+1;for(;;){do D++;while(d[D]<T);do O--;while(d[O]>T);if(D>=O)break;In(d,D,O),In(a,3*D,3*O),In(a,3*D+1,3*O+1),In(a,3*D+2,3*O+2)}O-g<x-O?(Wn(d,a,g,O),g=O+1):(Wn(d,a,O+1,x),x=O)}}function In(d,a,g){const x=d[a];d[a]=d[g],d[g]=x}dr("FeaturePositionMap",gr);class xn{constructor(a,g){this.gl=a.gl,this.location=g}}class jn extends xn{constructor(a,g){super(a,g),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Zn extends xn{constructor(a,g){super(a,g),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class An extends xn{constructor(a,g){super(a,g),this.current=et.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const $o=new Float32Array(16);function hn(d){return[Ft(255*d.r,255*d.g),Ft(255*d.b,255*d.a)]}class Lo{constructor(a,g,x){this.value=a,this.uniformNames=g.map(T=>`u_${T}`),this.type=x}setUniform(a,g,x){a.set(x.constantOr(this.value))}getBinding(a,g,x){return this.type==="color"?new An(a,g):new jn(a,g)}}class us{constructor(a,g){this.uniformNames=g.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,g){this.pixelRatioFrom=g.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=g.tlbr,this.patternTo=a.tlbr}setUniform(a,g,x,T){const D=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;D&&a.set(D)}getBinding(a,g,x){return x.substr(0,9)==="u_pattern"?new Zn(a,g):new jn(a,g)}}class Bn{constructor(a,g,x,T){this.expression=a,this.type=x,this.maxValue=0,this.paintVertexAttributes=g.map(D=>({name:`a_${D}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(a,g,x,T,D){const O=this.paintVertexArray.length,Z=this.expression.evaluate(new oo(0),g,{},T,[],D);this.paintVertexArray.resize(a),this._setPaintValue(O,a,Z)}updatePaintArray(a,g,x,T){const D=this.expression.evaluate({zoom:0},x,T);this._setPaintValue(a,g,D)}_setPaintValue(a,g,x){if(this.type==="color"){const T=hn(x);for(let D=a;D<g;D++)this.paintVertexArray.emplace(D,T[0],T[1])}else{for(let T=a;T<g;T++)this.paintVertexArray.emplace(T,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zo{constructor(a,g,x,T,D,O){this.expression=a,this.uniformNames=g.map(Z=>`u_${Z}_t`),this.type=x,this.useIntegerZoom=T,this.zoom=D,this.maxValue=0,this.paintVertexAttributes=g.map(Z=>({name:`a_${Z}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new O}populatePaintArray(a,g,x,T,D){const O=this.expression.evaluate(new oo(this.zoom),g,{},T,[],D),Z=this.expression.evaluate(new oo(this.zoom+1),g,{},T,[],D),ee=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(ee,a,O,Z)}updatePaintArray(a,g,x,T){const D=this.expression.evaluate({zoom:this.zoom},x,T),O=this.expression.evaluate({zoom:this.zoom+1},x,T);this._setPaintValue(a,g,D,O)}_setPaintValue(a,g,x,T){if(this.type==="color"){const D=hn(x),O=hn(T);for(let Z=a;Z<g;Z++)this.paintVertexArray.emplace(Z,D[0],D[1],O[0],O[1])}else{for(let D=a;D<g;D++)this.paintVertexArray.emplace(D,x,T);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(T))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,g){const x=this.useIntegerZoom?Math.floor(g.zoom):g.zoom,T=q(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);a.set(T)}getBinding(a,g,x){return new jn(a,g)}}class es{constructor(a,g,x,T,D,O){this.expression=a,this.type=g,this.useIntegerZoom=x,this.zoom=T,this.layerId=O,this.zoomInPaintVertexArray=new D,this.zoomOutPaintVertexArray=new D}populatePaintArray(a,g,x){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(T,a,g.patterns&&g.patterns[this.layerId],x)}updatePaintArray(a,g,x,T,D){this._setPaintValues(a,g,x.patterns&&x.patterns[this.layerId],D)}_setPaintValues(a,g,x,T){if(!T||!x)return;const{min:D,mid:O,max:Z}=x,ee=T[D],ue=T[O],_e=T[Z];if(ee&&ue&&_e)for(let Ce=a;Ce<g;Ce++)this.zoomInPaintVertexArray.emplace(Ce,ue.tl[0],ue.tl[1],ue.br[0],ue.br[1],ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],ue.pixelRatio,ee.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ce,ue.tl[0],ue.tl[1],ue.br[0],ue.br[1],_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],ue.pixelRatio,_e.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Pi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Pi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cs{constructor(a,g,x){this.binders={},this._buffers=[];const T=[];for(const D in a.paint._values){if(!x(D))continue;const O=a.paint.get(D);if(!(O instanceof za&&Hn(O.property.specification)))continue;const Z=Gs(D,a.type),ee=O.value,ue=O.property.specification.type,_e=O.property.useIntegerZoom,Ce=O.property.specification["property-type"],Ue=Ce==="cross-faded"||Ce==="cross-faded-data-driven";if(ee.kind==="constant")this.binders[D]=Ue?new us(ee.value,Z):new Lo(ee.value,Z,ue),T.push(`/u_${D}`);else if(ee.kind==="source"||Ue){const Ze=ga(D,ue,"source");this.binders[D]=Ue?new es(ee,ue,_e,g,Ze,a.id):new Bn(ee,Z,ue,Ze),T.push(`/a_${D}`)}else{const Ze=ga(D,ue,"composite");this.binders[D]=new zo(ee,Z,ue,_e,g,Ze),T.push(`/z_${D}`)}}this.cacheKey=T.sort().join("")}getMaxValue(a){const g=this.binders[a];return g instanceof Bn||g instanceof zo?g.maxValue:0}populatePaintArrays(a,g,x,T,D){for(const O in this.binders){const Z=this.binders[O];(Z instanceof Bn||Z instanceof zo||Z instanceof es)&&Z.populatePaintArray(a,g,x,T,D)}}setConstantPatternPositions(a,g){for(const x in this.binders){const T=this.binders[x];T instanceof us&&T.setConstantPatternPositions(a,g)}}updatePaintArrays(a,g,x,T,D){let O=!1;for(const Z in a){const ee=g.getPositions(Z);for(const ue of ee){const _e=x.feature(ue.index);for(const Ce in this.binders){const Ue=this.binders[Ce];if((Ue instanceof Bn||Ue instanceof zo||Ue instanceof es)&&Ue.expression.isStateDependent===!0){const Ze=T.paint.get(Ce);Ue.expression=Ze.value,Ue.updatePaintArray(ue.start,ue.end,_e,a[Z],D),O=!0}}}}return O}defines(){const a=[];for(const g in this.binders){const x=this.binders[g];(x instanceof Lo||x instanceof us)&&a.push(...x.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return a}getBinderAttributes(){const a=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Bn||x instanceof zo)for(let T=0;T<x.paintVertexAttributes.length;T++)a.push(x.paintVertexAttributes[T].name);else if(x instanceof es)for(let T=0;T<Pi.members.length;T++)a.push(Pi.members[T].name)}return a}getBinderUniforms(){const a=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Lo||x instanceof us||x instanceof zo)for(const T of x.uniformNames)a.push(T)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,g){const x=[];for(const T in this.binders){const D=this.binders[T];if(D instanceof Lo||D instanceof us||D instanceof zo){for(const O of D.uniformNames)if(g[O]){const Z=D.getBinding(a,g[O],O);x.push({name:O,property:T,binding:Z})}}}return x}setUniforms(a,g,x,T){for(const{name:D,property:O,binding:Z}of g)this.binders[O].setUniform(Z,T,x.get(O),D)}updatePaintBuffers(a){this._buffers=[];for(const g in this.binders){const x=this.binders[g];if(a&&x instanceof es){const T=a.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(x instanceof Bn||x instanceof zo)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(a){for(const g in this.binders){const x=this.binders[g];(x instanceof Bn||x instanceof zo||x instanceof es)&&x.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const g=this.binders[a];(g instanceof Bn||g instanceof zo||g instanceof es)&&g.destroy()}}}class so{constructor(a,g,x=()=>!0){this.programConfigurations={};for(const T of a)this.programConfigurations[T.id]=new cs(T,g,x);this.needsUpload=!1,this._featureMap=new gr,this._bufferOffset=0}populatePaintArrays(a,g,x,T,D,O){for(const Z in this.programConfigurations)this.programConfigurations[Z].populatePaintArrays(a,g,T,D,O);g.id!==void 0&&this._featureMap.add(g.id,x,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,g,x,T){for(const D of x)this.needsUpload=this.programConfigurations[D.id].updatePaintArrays(a,this._featureMap,g,D,T)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const g in this.programConfigurations)this.programConfigurations[g].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function Gs(d,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${a}-`,"").replace(/-/g,"_")]}function ga(d,a,g){const x={color:{source:k,composite:gi},number:{source:dt,composite:k}},T=function(D){return{"line-pattern":{source:Oe,composite:Oe},"fill-pattern":{source:Oe,composite:Oe},"fill-extrusion-pattern":{source:Oe,composite:Oe}}[D]}(d);return T&&T[g]||x[a][g]}dr("ConstantBinder",Lo),dr("CrossFadedConstantBinder",us),dr("SourceExpressionBinder",Bn),dr("CrossFadedCompositeBinder",es),dr("CompositeExpressionBinder",zo),dr("ProgramConfiguration",cs,{omit:["_buffers"]}),dr("ProgramConfigurationSet",so);var Qn=8192;const Wo=Math.pow(2,14)-1,vl=-Wo-1;function ya(d){const a=Qn/d.extent,g=d.loadGeometry();for(let x=0;x<g.length;x++){const T=g[x];for(let D=0;D<T.length;D++){const O=T[D],Z=Math.round(O.x*a),ee=Math.round(O.y*a);O.x=q(Z,vl,Wo),O.y=q(ee,vl,Wo),(Z<O.x||Z>O.x+1||ee<O.y||ee>O.y+1)&&be("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return g}function Fa(d,a){return{type:d.type,id:d.id,properties:d.properties,geometry:a?ya(d):[]}}function Ba(d,a,g,x,T){d.emplaceBack(2*a+(x+1)/2,2*g+(T+1)/2)}class Po{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(g=>g.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new j,this.indexArray=new li,this.segments=new Pt,this.programConfigurations=new so(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(a,g,x){const T=this.layers[0],D=[];let O=null,Z=!1;T.type==="circle"&&(O=T.layout.get("circle-sort-key"),Z=!O.isConstant());for(const{feature:ee,id:ue,index:_e,sourceLayerIndex:Ce}of a){const Ue=this.layers[0]._featureFilter.needGeometry,Ze=Fa(ee,Ue);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),Ze,x))continue;const Ye=Z?O.evaluate(Ze,{},x):void 0,Dt={id:ue,properties:ee.properties,type:ee.type,sourceLayerIndex:Ce,index:_e,geometry:Ue?Ze.geometry:ya(ee),patterns:{},sortKey:Ye};D.push(Dt)}Z&&D.sort((ee,ue)=>ee.sortKey-ue.sortKey);for(const ee of D){const{geometry:ue,index:_e,sourceLayerIndex:Ce}=ee,Ue=a[_e].feature;this.addFeature(ee,ue,_e,x),g.featureIndex.insert(Ue,ue,_e,Ce,this.index)}}update(a,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,g,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,bi),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,g,x,T){for(const D of g)for(const O of D){const Z=O.x,ee=O.y;if(Z<0||Z>=Qn||ee<0||ee>=Qn)continue;const ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),_e=ue.vertexLength;Ba(this.layoutVertexArray,Z,ee,-1,-1),Ba(this.layoutVertexArray,Z,ee,1,-1),Ba(this.layoutVertexArray,Z,ee,1,1),Ba(this.layoutVertexArray,Z,ee,-1,1),this.indexArray.emplaceBack(_e,_e+1,_e+2),this.indexArray.emplaceBack(_e,_e+3,_e+2),ue.vertexLength+=4,ue.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,{},T)}}function Kc(d,a){for(let g=0;g<d.length;g++)if(Cu(a,d[g]))return!0;for(let g=0;g<a.length;g++)if(Cu(d,a[g]))return!0;return!!Su(d,a)}function lh(d,a,g){return!!Cu(d,a)||!!va(a,d,g)}function S0(d,a){if(d.length===1)return Iu(a,d[0]);for(let g=0;g<a.length;g++){const x=a[g];for(let T=0;T<x.length;T++)if(Cu(d,x[T]))return!0}for(let g=0;g<d.length;g++)if(Iu(a,d[g]))return!0;for(let g=0;g<a.length;g++)if(Su(d,a[g]))return!0;return!1}function Eu(d,a,g){if(d.length>1){if(Su(d,a))return!0;for(let x=0;x<a.length;x++)if(va(a[x],d,g))return!0}for(let x=0;x<d.length;x++)if(va(d[x],a,g))return!0;return!1}function Su(d,a){if(d.length===0||a.length===0)return!1;for(let g=0;g<d.length-1;g++){const x=d[g],T=d[g+1];for(let D=0;D<a.length-1;D++)if(Qc(x,T,a[D],a[D+1]))return!0}return!1}function Qc(d,a,g,x){return pe(d,g,x)!==pe(a,g,x)&&pe(d,a,g)!==pe(d,a,x)}function va(d,a,g){const x=g*g;if(a.length===1)return d.distSqr(a[0])<x;for(let T=1;T<a.length;T++)if(_a(d,a[T-1],a[T])<x)return!0;return!1}function _a(d,a,g){const x=a.distSqr(g);if(x===0)return d.distSqr(a);const T=((d.x-a.x)*(g.x-a.x)+(d.y-a.y)*(g.y-a.y))/x;return d.distSqr(T<0?a:T>1?g:g.sub(a)._mult(T)._add(a))}function Iu(d,a){let g,x,T,D=!1;for(let O=0;O<d.length;O++){g=d[O];for(let Z=0,ee=g.length-1;Z<g.length;ee=Z++)x=g[Z],T=g[ee],x.y>a.y!=T.y>a.y&&a.x<(T.x-x.x)*(a.y-x.y)/(T.y-x.y)+x.x&&(D=!D)}return D}function Cu(d,a){let g=!1;for(let x=0,T=d.length-1;x<d.length;T=x++){const D=d[x],O=d[T];D.y>a.y!=O.y>a.y&&a.x<(O.x-D.x)*(a.y-D.y)/(O.y-D.y)+D.x&&(g=!g)}return g}function $c(d,a,g){const x=g[0],T=g[2];if(d.x<x.x&&a.x<x.x||d.x>T.x&&a.x>T.x||d.y<x.y&&a.y<x.y||d.y>T.y&&a.y>T.y)return!1;const D=pe(d,a,g[0]);return D!==pe(d,a,g[1])||D!==pe(d,a,g[2])||D!==pe(d,a,g[3])}function oc(d,a,g){const x=a.paint.get(d).value;return x.kind==="constant"?x.value:g.programConfigurations.get(a.id).getMaxValue(d)}function Tu(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function sc(d,a,g,x,T){if(!a[0]&&!a[1])return d;const D=pt.convert(a)._mult(T);g==="viewport"&&D._rotate(-x);const O=[];for(let Z=0;Z<d.length;Z++)O.push(d[Z].sub(D));return O}dr("CircleBucket",Po,{omit:["layers"]});const Lu=new uo({"circle-sort-key":new Yr(Y.layout_circle["circle-sort-key"])});var ac={paint:new uo({"circle-radius":new Yr(Y.paint_circle["circle-radius"]),"circle-color":new Yr(Y.paint_circle["circle-color"]),"circle-blur":new Yr(Y.paint_circle["circle-blur"]),"circle-opacity":new Yr(Y.paint_circle["circle-opacity"]),"circle-translate":new Rr(Y.paint_circle["circle-translate"]),"circle-translate-anchor":new Rr(Y.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rr(Y.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rr(Y.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yr(Y.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yr(Y.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yr(Y.paint_circle["circle-stroke-opacity"])}),layout:Lu},zs=1e-6,ks=typeof Float32Array<"u"?Float32Array:Array;function ts(){var d=new ks(9);return ks!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function _l(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function uh(d,a,g){var x=a[0],T=a[1],D=a[2],O=a[3],Z=a[4],ee=a[5],ue=a[6],_e=a[7],Ce=a[8],Ue=a[9],Ze=a[10],Ye=a[11],Dt=a[12],Lt=a[13],oi=a[14],xi=a[15],ti=g[0],mi=g[1],Oi=g[2],Fi=g[3];return d[0]=ti*x+mi*Z+Oi*Ce+Fi*Dt,d[1]=ti*T+mi*ee+Oi*Ue+Fi*Lt,d[2]=ti*D+mi*ue+Oi*Ze+Fi*oi,d[3]=ti*O+mi*_e+Oi*Ye+Fi*xi,d[4]=(ti=g[4])*x+(mi=g[5])*Z+(Oi=g[6])*Ce+(Fi=g[7])*Dt,d[5]=ti*T+mi*ee+Oi*Ue+Fi*Lt,d[6]=ti*D+mi*ue+Oi*Ze+Fi*oi,d[7]=ti*O+mi*_e+Oi*Ye+Fi*xi,d[8]=(ti=g[8])*x+(mi=g[9])*Z+(Oi=g[10])*Ce+(Fi=g[11])*Dt,d[9]=ti*T+mi*ee+Oi*Ue+Fi*Lt,d[10]=ti*D+mi*ue+Oi*Ze+Fi*oi,d[11]=ti*O+mi*_e+Oi*Ye+Fi*xi,d[12]=(ti=g[12])*x+(mi=g[13])*Z+(Oi=g[14])*Ce+(Fi=g[15])*Dt,d[13]=ti*T+mi*ee+Oi*Ue+Fi*Lt,d[14]=ti*D+mi*ue+Oi*Ze+Fi*oi,d[15]=ti*O+mi*_e+Oi*Ye+Fi*xi,d}Math.hypot||(Math.hypot=function(){for(var d=0,a=arguments.length;a--;)d+=arguments[a]*arguments[a];return Math.sqrt(d)});var bl,ch=uh;function I0(){var d=new ks(3);return ks!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function Lc(d,a,g){var x=new ks(3);return x[0]=d,x[1]=a,x[2]=g,x}function lc(d,a,g){var x=a[0],T=a[1],D=a[2],O=a[3];return d[0]=g[0]*x+g[4]*T+g[8]*D+g[12]*O,d[1]=g[1]*x+g[5]*T+g[9]*D+g[13]*O,d[2]=g[2]*x+g[6]*T+g[10]*D+g[14]*O,d[3]=g[3]*x+g[7]*T+g[11]*D+g[15]*O,d}function C0(){var d=new ks(4);return ks!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function Pc(d,a){const g=lc([],[d.x,d.y,0,1],a);return new pt(g[0]/g[3],g[1]/g[3])}I0(),bl=new ks(4),ks!=Float32Array&&(bl[0]=0,bl[1]=0,bl[2]=0,bl[3]=0),I0(),Lc(1,0,0),Lc(0,1,0),C0(),C0(),ts(),function(){var d;d=new ks(2),ks!=Float32Array&&(d[0]=0,d[1]=0)}();class e0 extends Po{}dr("HeatmapBucket",e0,{omit:["layers"]});var Mc={paint:new uo({"heatmap-radius":new Yr(Y.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yr(Y.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rr(Y.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ho(Y.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rr(Y.paint_heatmap["heatmap-opacity"])})};function el(d,{width:a,height:g},x,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==a*g*x)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${a*g*x}`)}else T=new Uint8Array(a*g*x);return d.width=a,d.height=g,d.data=T,d}function hh(d,{width:a,height:g},x){if(a===d.width&&g===d.height)return;const T=el({},{width:a,height:g},x);uc(d,T,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,a),height:Math.min(d.height,g)},x),d.width=a,d.height=g,d.data=T.data}function uc(d,a,g,x,T,D){if(T.width===0||T.height===0)return a;if(T.width>d.width||T.height>d.height||g.x>d.width-T.width||g.y>d.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>a.width||T.height>a.height||x.x>a.width-T.width||x.y>a.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const O=d.data,Z=a.data;if(O===Z)throw new Error("srcData equals dstData, so image is already copied");for(let ee=0;ee<T.height;ee++){const ue=((g.y+ee)*d.width+g.x)*D,_e=((x.y+ee)*a.width+x.x)*D;for(let Ce=0;Ce<T.width*D;Ce++)Z[_e+Ce]=O[ue+Ce]}return a}class Pu{constructor(a,g){el(this,a,1,g)}resize(a){hh(this,a,1)}clone(){return new Pu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,g,x,T,D){uc(a,g,x,T,D,1)}}class Hs{constructor(a,g){el(this,a,4,g)}resize(a){hh(this,a,4)}replace(a,g){g?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Hs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,g,x,T,D){uc(a,g,x,T,D,4)}}function wl(d){const a={},g=d.resolution||256,x=d.clips?d.clips.length:1,T=d.image||new Hs({width:g,height:x});if(Math.log(g)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${g}`);const D=(O,Z,ee)=>{a[d.evaluationKey]=ee;const ue=d.expression.evaluate(a);T.data[O+Z+0]=Math.floor(255*ue.r/ue.a),T.data[O+Z+1]=Math.floor(255*ue.g/ue.a),T.data[O+Z+2]=Math.floor(255*ue.b/ue.a),T.data[O+Z+3]=Math.floor(255*ue.a)};if(d.clips)for(let O=0,Z=0;O<x;++O,Z+=4*g)for(let ee=0,ue=0;ee<g;ee++,ue+=4){const _e=ee/(g-1),{start:Ce,end:Ue}=d.clips[O];D(Z,ue,Ce*(1-_e)+Ue*_e)}else for(let O=0,Z=0;O<g;O++,Z+=4)D(0,Z,O/(g-1));return T}dr("AlphaImage",Pu),dr("RGBAImage",Hs);var fh={paint:new uo({"hillshade-illumination-direction":new Rr(Y.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rr(Y.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rr(Y.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rr(Y.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rr(Y.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rr(Y.paint_hillshade["hillshade-accent-color"])})};const T0=Oo([{name:"a_pos",components:2,type:"Int16"}],4),{members:of}=T0;var Mu={exports:{}};function Gl(d,a,g){g=g||2;var x,T,D,O,Z,ee,ue,_e=a&&a.length,Ce=_e?a[0]*g:d.length,Ue=dh(d,0,Ce,g,!0),Ze=[];if(!Ue||Ue.next===Ue.prev)return Ze;if(_e&&(Ue=function(Dt,Lt,oi,xi){var ti,mi,Oi,Fi=[];for(ti=0,mi=Lt.length;ti<mi;ti++)(Oi=dh(Dt,Lt[ti]*xi,ti<mi-1?Lt[ti+1]*xi:Dt.length,xi,!1))===Oi.next&&(Oi.steiner=!0),Fi.push(t0(Oi));for(Fi.sort(Ws),ti=0;ti<Fi.length;ti++)oi=Hl(Fi[ti],oi);return oi}(d,a,Ue,g)),d.length>80*g){x=D=d[0],T=O=d[1];for(var Ye=g;Ye<Ce;Ye+=g)(Z=d[Ye])<x&&(x=Z),(ee=d[Ye+1])<T&&(T=ee),Z>D&&(D=Z),ee>O&&(O=ee);ue=(ue=Math.max(D-x,O-T))!==0?32767/ue:0}return Dc(Ue,Ze,g,x,T,ue,0),Ze}function dh(d,a,g,x,T){var D,O;if(T===D0(d,a,g,x)>0)for(D=a;D<g;D+=x)O=rd(D,d[D],d[D+1],O);else for(D=g-x;D>=a;D-=x)O=rd(D,d[D],d[D+1],O);return O&&hu(O,O.next)&&(M0(O),O=O.next),O}function lu(d,a){if(!d)return d;a||(a=d);var g,x=d;do if(g=!1,x.steiner||!hu(x,x.next)&&vo(x.prev,x,x.next)!==0)x=x.next;else{if(M0(x),(x=a=x.prev)===x.next)break;g=!0}while(g||x!==a);return a}function Dc(d,a,g,x,T,D,O){if(d){!O&&D&&function(_e,Ce,Ue,Ze){var Ye=_e;do Ye.z===0&&(Ye.z=xl(Ye.x,Ye.y,Ce,Ue,Ze)),Ye.prevZ=Ye.prev,Ye.nextZ=Ye.next,Ye=Ye.next;while(Ye!==_e);Ye.prevZ.nextZ=null,Ye.prevZ=null,function(Dt){var Lt,oi,xi,ti,mi,Oi,Fi,Lr,Or=1;do{for(oi=Dt,Dt=null,mi=null,Oi=0;oi;){for(Oi++,xi=oi,Fi=0,Lt=0;Lt<Or&&(Fi++,xi=xi.nextZ);Lt++);for(Lr=Or;Fi>0||Lr>0&&xi;)Fi!==0&&(Lr===0||!xi||oi.z<=xi.z)?(ti=oi,oi=oi.nextZ,Fi--):(ti=xi,xi=xi.nextZ,Lr--),mi?mi.nextZ=ti:Dt=ti,ti.prevZ=mi,mi=ti;oi=xi}mi.nextZ=null,Or*=2}while(Oi>1)}(Ye)}(d,x,T,D);for(var Z,ee,ue=d;d.prev!==d.next;)if(Z=d.prev,ee=d.next,D?sf(d,x,T,D):L0(d))a.push(Z.i/g|0),a.push(d.i/g|0),a.push(ee.i/g|0),M0(d),d=ee.next,ue=ee.next;else if((d=ee)===ue){O?O===1?Dc(d=zc(lu(d),a,g),a,g,x,T,D,2):O===2&&P0(d,a,g,x,T,D):Dc(lu(d),a,g,x,T,D,1);break}}}function L0(d){var a=d.prev,g=d,x=d.next;if(vo(a,g,x)>=0)return!1;for(var T=a.x,D=g.x,O=x.x,Z=a.y,ee=g.y,ue=x.y,_e=T<D?T<O?T:O:D<O?D:O,Ce=Z<ee?Z<ue?Z:ue:ee<ue?ee:ue,Ue=T>D?T>O?T:O:D>O?D:O,Ze=Z>ee?Z>ue?Z:ue:ee>ue?ee:ue,Ye=x.next;Ye!==a;){if(Ye.x>=_e&&Ye.x<=Ue&&Ye.y>=Ce&&Ye.y<=Ze&&cu(T,Z,D,ee,O,ue,Ye.x,Ye.y)&&vo(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.next}return!0}function sf(d,a,g,x){var T=d.prev,D=d,O=d.next;if(vo(T,D,O)>=0)return!1;for(var Z=T.x,ee=D.x,ue=O.x,_e=T.y,Ce=D.y,Ue=O.y,Ze=Z<ee?Z<ue?Z:ue:ee<ue?ee:ue,Ye=_e<Ce?_e<Ue?_e:Ue:Ce<Ue?Ce:Ue,Dt=Z>ee?Z>ue?Z:ue:ee>ue?ee:ue,Lt=_e>Ce?_e>Ue?_e:Ue:Ce>Ue?Ce:Ue,oi=xl(Ze,Ye,a,g,x),xi=xl(Dt,Lt,a,g,x),ti=d.prevZ,mi=d.nextZ;ti&&ti.z>=oi&&mi&&mi.z<=xi;){if(ti.x>=Ze&&ti.x<=Dt&&ti.y>=Ye&&ti.y<=Lt&&ti!==T&&ti!==O&&cu(Z,_e,ee,Ce,ue,Ue,ti.x,ti.y)&&vo(ti.prev,ti,ti.next)>=0||(ti=ti.prevZ,mi.x>=Ze&&mi.x<=Dt&&mi.y>=Ye&&mi.y<=Lt&&mi!==T&&mi!==O&&cu(Z,_e,ee,Ce,ue,Ue,mi.x,mi.y)&&vo(mi.prev,mi,mi.next)>=0))return!1;mi=mi.nextZ}for(;ti&&ti.z>=oi;){if(ti.x>=Ze&&ti.x<=Dt&&ti.y>=Ye&&ti.y<=Lt&&ti!==T&&ti!==O&&cu(Z,_e,ee,Ce,ue,Ue,ti.x,ti.y)&&vo(ti.prev,ti,ti.next)>=0)return!1;ti=ti.prevZ}for(;mi&&mi.z<=xi;){if(mi.x>=Ze&&mi.x<=Dt&&mi.y>=Ye&&mi.y<=Lt&&mi!==T&&mi!==O&&cu(Z,_e,ee,Ce,ue,Ue,mi.x,mi.y)&&vo(mi.prev,mi,mi.next)>=0)return!1;mi=mi.nextZ}return!0}function zc(d,a,g){var x=d;do{var T=x.prev,D=x.next.next;!hu(T,D)&&i0(T,x,x.next,D)&&r0(T,D)&&r0(D,T)&&(a.push(T.i/g|0),a.push(x.i/g|0),a.push(D.i/g|0),M0(x),M0(x.next),x=d=D),x=x.next}while(x!==d);return lu(x)}function P0(d,a,g,x,T,D){var O=d;do{for(var Z=O.next.next;Z!==O.prev;){if(O.i!==Z.i&&ph(O,Z)){var ee=id(O,Z);return O=lu(O,O.next),ee=lu(ee,ee.next),Dc(O,a,g,x,T,D,0),void Dc(ee,a,g,x,T,D,0)}Z=Z.next}O=O.next}while(O!==d)}function Ws(d,a){return d.x-a.x}function Hl(d,a){var g=function(T,D){var O,Z=D,ee=T.x,ue=T.y,_e=-1/0;do{if(ue<=Z.y&&ue>=Z.next.y&&Z.next.y!==Z.y){var Ce=Z.x+(ue-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if(Ce<=ee&&Ce>_e&&(_e=Ce,O=Z.x<Z.next.x?Z:Z.next,Ce===ee))return O}Z=Z.next}while(Z!==D);if(!O)return null;var Ue,Ze=O,Ye=O.x,Dt=O.y,Lt=1/0;Z=O;do ee>=Z.x&&Z.x>=Ye&&ee!==Z.x&&cu(ue<Dt?ee:_e,ue,Ye,Dt,ue<Dt?_e:ee,ue,Z.x,Z.y)&&(Ue=Math.abs(ue-Z.y)/(ee-Z.x),r0(Z,T)&&(Ue<Lt||Ue===Lt&&(Z.x>O.x||Z.x===O.x&&uu(O,Z)))&&(O=Z,Lt=Ue)),Z=Z.next;while(Z!==Ze);return O}(d,a);if(!g)return a;var x=id(g,d);return lu(x,x.next),lu(g,g.next)}function uu(d,a){return vo(d.prev,d,a.prev)<0&&vo(a.next,d,d.next)<0}function xl(d,a,g,x,T){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-g)*T|0)|d<<8))|d<<4))|d<<2))|d<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-x)*T|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function t0(d){var a=d,g=d;do(a.x<g.x||a.x===g.x&&a.y<g.y)&&(g=a),a=a.next;while(a!==d);return g}function cu(d,a,g,x,T,D,O,Z){return(T-O)*(a-Z)>=(d-O)*(D-Z)&&(d-O)*(x-Z)>=(g-O)*(a-Z)&&(g-O)*(D-Z)>=(T-O)*(x-Z)}function ph(d,a){return d.next.i!==a.i&&d.prev.i!==a.i&&!function(g,x){var T=g;do{if(T.i!==g.i&&T.next.i!==g.i&&T.i!==x.i&&T.next.i!==x.i&&i0(T,T.next,g,x))return!0;T=T.next}while(T!==g);return!1}(d,a)&&(r0(d,a)&&r0(a,d)&&function(g,x){var T=g,D=!1,O=(g.x+x.x)/2,Z=(g.y+x.y)/2;do T.y>Z!=T.next.y>Z&&T.next.y!==T.y&&O<(T.next.x-T.x)*(Z-T.y)/(T.next.y-T.y)+T.x&&(D=!D),T=T.next;while(T!==g);return D}(d,a)&&(vo(d.prev,d,a.prev)||vo(d,a.prev,a))||hu(d,a)&&vo(d.prev,d,d.next)>0&&vo(a.prev,a,a.next)>0)}function vo(d,a,g){return(a.y-d.y)*(g.x-a.x)-(a.x-d.x)*(g.y-a.y)}function hu(d,a){return d.x===a.x&&d.y===a.y}function i0(d,a,g,x){var T=gh(vo(d,a,g)),D=gh(vo(d,a,x)),O=gh(vo(g,x,d)),Z=gh(vo(g,x,a));return T!==D&&O!==Z||!(T!==0||!mh(d,g,a))||!(D!==0||!mh(d,x,a))||!(O!==0||!mh(g,d,x))||!(Z!==0||!mh(g,a,x))}function mh(d,a,g){return a.x<=Math.max(d.x,g.x)&&a.x>=Math.min(d.x,g.x)&&a.y<=Math.max(d.y,g.y)&&a.y>=Math.min(d.y,g.y)}function gh(d){return d>0?1:d<0?-1:0}function r0(d,a){return vo(d.prev,d,d.next)<0?vo(d,a,d.next)>=0&&vo(d,d.prev,a)>=0:vo(d,a,d.prev)<0||vo(d,d.next,a)<0}function id(d,a){var g=new af(d.i,d.x,d.y),x=new af(a.i,a.x,a.y),T=d.next,D=a.prev;return d.next=a,a.prev=d,g.next=T,T.prev=g,x.next=g,g.prev=x,D.next=x,x.prev=D,x}function rd(d,a,g,x){var T=new af(d,a,g);return x?(T.next=x.next,T.prev=x,x.next.prev=T,x.next=T):(T.prev=T,T.next=T),T}function M0(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function af(d,a,g){this.i=d,this.x=a,this.y=g,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D0(d,a,g,x){for(var T=0,D=a,O=g-x;D<g;D+=x)T+=(d[O]-d[D])*(d[D+1]+d[O+1]),O=D;return T}function zp(d,a,g,x,T){nd(d,a,g||0,x||d.length-1,T||od)}function nd(d,a,g,x,T){for(;x>g;){if(x-g>600){var D=x-g+1,O=a-g+1,Z=Math.log(D),ee=.5*Math.exp(2*Z/3),ue=.5*Math.sqrt(Z*ee*(D-ee)/D)*(O-D/2<0?-1:1);nd(d,a,Math.max(g,Math.floor(a-O*ee/D+ue)),Math.min(x,Math.floor(a+(D-O)*ee/D+ue)),T)}var _e=d[a],Ce=g,Ue=x;for(z0(d,g,a),T(d[x],_e)>0&&z0(d,g,x);Ce<Ue;){for(z0(d,Ce,Ue),Ce++,Ue--;T(d[Ce],_e)<0;)Ce++;for(;T(d[Ue],_e)>0;)Ue--}T(d[g],_e)===0?z0(d,g,Ue):z0(d,++Ue,x),Ue<=a&&(g=Ue+1),a<=Ue&&(x=Ue-1)}}function z0(d,a,g){var x=d[a];d[a]=d[g],d[g]=x}function od(d,a){return d<a?-1:d>a?1:0}function yh(d,a){const g=d.length;if(g<=1)return[d];const x=[];let T,D;for(let O=0;O<g;O++){const Z=ye(d[O]);Z!==0&&(d[O].area=Math.abs(Z),D===void 0&&(D=Z<0),D===Z<0?(T&&x.push(T),T=[d[O]]):T.push(d[O]))}if(T&&x.push(T),a>1)for(let O=0;O<x.length;O++)x[O].length<=a||(zp(x[O],a,1,x[O].length-1,hs),x[O]=x[O].slice(0,a));return x}function hs(d,a){return a.area-d.area}function N0(d,a,g){const x=g.patternDependencies;let T=!1;for(const D of a){const O=D.paint.get(`${d}-pattern`);O.isConstant()||(T=!0);const Z=O.constantOr(null);Z&&(T=!0,x[Z.to]=!0,x[Z.from]=!0)}return T}function lf(d,a,g,x,T){const D=T.patternDependencies;for(const O of a){const Z=O.paint.get(`${d}-pattern`).value;if(Z.kind!=="constant"){let ee=Z.evaluate({zoom:x-1},g,{},T.availableImages),ue=Z.evaluate({zoom:x},g,{},T.availableImages),_e=Z.evaluate({zoom:x+1},g,{},T.availableImages);ee=ee&&ee.name?ee.name:ee,ue=ue&&ue.name?ue.name:ue,_e=_e&&_e.name?_e.name:_e,D[ee]=!0,D[ue]=!0,D[_e]=!0,g.patterns[O.id]={min:ee,mid:ue,max:_e}}}return g}Mu.exports=Gl,Mu.exports.default=Gl,Gl.deviation=function(d,a,g,x){var T=a&&a.length,D=Math.abs(D0(d,0,T?a[0]*g:d.length,g));if(T)for(var O=0,Z=a.length;O<Z;O++)D-=Math.abs(D0(d,a[O]*g,O<Z-1?a[O+1]*g:d.length,g));var ee=0;for(O=0;O<x.length;O+=3){var ue=x[O]*g,_e=x[O+1]*g,Ce=x[O+2]*g;ee+=Math.abs((d[ue]-d[Ce])*(d[_e+1]-d[ue+1])-(d[ue]-d[_e])*(d[Ce+1]-d[ue+1]))}return D===0&&ee===0?0:Math.abs((ee-D)/D)},Gl.flatten=function(d){for(var a=d[0][0].length,g={vertices:[],holes:[],dimensions:a},x=0,T=0;T<d.length;T++){for(var D=0;D<d[T].length;D++)for(var O=0;O<a;O++)g.vertices.push(d[T][D][O]);T>0&&g.holes.push(x+=d[T-1].length)}return g};class uf{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(g=>g.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Q,this.indexArray=new li,this.indexArray2=new ei,this.programConfigurations=new so(a.layers,a.zoom),this.segments=new Pt,this.segments2=new Pt,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(a,g,x){this.hasPattern=N0("fill",this.layers,g);const T=this.layers[0].layout.get("fill-sort-key"),D=!T.isConstant(),O=[];for(const{feature:Z,id:ee,index:ue,sourceLayerIndex:_e}of a){const Ce=this.layers[0]._featureFilter.needGeometry,Ue=Fa(Z,Ce);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),Ue,x))continue;const Ze=D?T.evaluate(Ue,{},x,g.availableImages):void 0,Ye={id:ee,properties:Z.properties,type:Z.type,sourceLayerIndex:_e,index:ue,geometry:Ce?Ue.geometry:ya(Z),patterns:{},sortKey:Ze};O.push(Ye)}D&&O.sort((Z,ee)=>Z.sortKey-ee.sortKey);for(const Z of O){const{geometry:ee,index:ue,sourceLayerIndex:_e}=Z;if(this.hasPattern){const Ce=lf("fill",this.layers,Z,this.zoom,g);this.patternFeatures.push(Ce)}else this.addFeature(Z,ee,ue,x,{});g.featureIndex.insert(a[ue].feature,ee,ue,_e,this.index)}}update(a,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,g,this.stateDependentLayers,x)}addFeatures(a,g,x){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,of),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,g,x,T,D){for(const O of yh(g,500)){let Z=0;for(const Ze of O)Z+=Ze.length;const ee=this.segments.prepareSegment(Z,this.layoutVertexArray,this.indexArray),ue=ee.vertexLength,_e=[],Ce=[];for(const Ze of O){if(Ze.length===0)continue;Ze!==O[0]&&Ce.push(_e.length/2);const Ye=this.segments2.prepareSegment(Ze.length,this.layoutVertexArray,this.indexArray2),Dt=Ye.vertexLength;this.layoutVertexArray.emplaceBack(Ze[0].x,Ze[0].y),this.indexArray2.emplaceBack(Dt+Ze.length-1,Dt),_e.push(Ze[0].x),_e.push(Ze[0].y);for(let Lt=1;Lt<Ze.length;Lt++)this.layoutVertexArray.emplaceBack(Ze[Lt].x,Ze[Lt].y),this.indexArray2.emplaceBack(Dt+Lt-1,Dt+Lt),_e.push(Ze[Lt].x),_e.push(Ze[Lt].y);Ye.vertexLength+=Ze.length,Ye.primitiveLength+=Ze.length}const Ue=Mu.exports(_e,Ce);for(let Ze=0;Ze<Ue.length;Ze+=3)this.indexArray.emplaceBack(ue+Ue[Ze],ue+Ue[Ze+1],ue+Ue[Ze+2]);ee.vertexLength+=Z,ee.primitiveLength+=Ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,D,T)}}dr("FillBucket",uf,{omit:["layers","patternFeatures"]});const Np=new uo({"fill-sort-key":new Yr(Y.layout_fill["fill-sort-key"])});var sd={paint:new uo({"fill-antialias":new Rr(Y.paint_fill["fill-antialias"]),"fill-opacity":new Yr(Y.paint_fill["fill-opacity"]),"fill-color":new Yr(Y.paint_fill["fill-color"]),"fill-outline-color":new Yr(Y.paint_fill["fill-outline-color"]),"fill-translate":new Rr(Y.paint_fill["fill-translate"]),"fill-translate-anchor":new Rr(Y.paint_fill["fill-translate-anchor"]),"fill-pattern":new au(Y.paint_fill["fill-pattern"])}),layout:Np};const n0=Oo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Fp=Oo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Bp}=n0;var cc={},Du=pt,Jr=zu;function zu(d,a,g,x,T){this.properties={},this.extent=g,this.type=0,this._pbf=d,this._geometry=-1,this._keys=x,this._values=T,d.readFields(Rp,this,a)}function Rp(d,a,g){d==1?a.id=g.readVarint():d==2?function(x,T){for(var D=x.readVarint()+x.pos;x.pos<D;){var O=T._keys[x.readVarint()],Z=T._values[x.readVarint()];T.properties[O]=Z}}(g,a):d==3?a.type=g.readVarint():d==4&&(a._geometry=g.pos)}function Op(d){for(var a,g,x=0,T=0,D=d.length,O=D-1;T<D;O=T++)x+=((g=d[O]).x-(a=d[T]).x)*(a.y+g.y);return x}zu.types=["Unknown","Point","LineString","Polygon"],zu.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var a,g=d.readVarint()+d.pos,x=1,T=0,D=0,O=0,Z=[];d.pos<g;){if(T<=0){var ee=d.readVarint();x=7&ee,T=ee>>3}if(T--,x===1||x===2)D+=d.readSVarint(),O+=d.readSVarint(),x===1&&(a&&Z.push(a),a=[]),a.push(new Du(D,O));else{if(x!==7)throw new Error("unknown command "+x);a&&a.push(a[0].clone())}}return a&&Z.push(a),Z},zu.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var a=d.readVarint()+d.pos,g=1,x=0,T=0,D=0,O=1/0,Z=-1/0,ee=1/0,ue=-1/0;d.pos<a;){if(x<=0){var _e=d.readVarint();g=7&_e,x=_e>>3}if(x--,g===1||g===2)(T+=d.readSVarint())<O&&(O=T),T>Z&&(Z=T),(D+=d.readSVarint())<ee&&(ee=D),D>ue&&(ue=D);else if(g!==7)throw new Error("unknown command "+g)}return[O,ee,Z,ue]},zu.prototype.toGeoJSON=function(d,a,g){var x,T,D=this.extent*Math.pow(2,g),O=this.extent*d,Z=this.extent*a,ee=this.loadGeometry(),ue=zu.types[this.type];function _e(Ze){for(var Ye=0;Ye<Ze.length;Ye++){var Dt=Ze[Ye];Ze[Ye]=[360*(Dt.x+O)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(Dt.y+Z)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var Ce=[];for(x=0;x<ee.length;x++)Ce[x]=ee[x][0];_e(ee=Ce);break;case 2:for(x=0;x<ee.length;x++)_e(ee[x]);break;case 3:for(ee=function(Ze){var Ye=Ze.length;if(Ye<=1)return[Ze];for(var Dt,Lt,oi=[],xi=0;xi<Ye;xi++){var ti=Op(Ze[xi]);ti!==0&&(Lt===void 0&&(Lt=ti<0),Lt===ti<0?(Dt&&oi.push(Dt),Dt=[Ze[xi]]):Dt.push(Ze[xi]))}return Dt&&oi.push(Dt),oi}(ee),x=0;x<ee.length;x++)for(T=0;T<ee[x].length;T++)_e(ee[x][T])}ee.length===1?ee=ee[0]:ue="Multi"+ue;var Ue={type:"Feature",geometry:{type:ue,coordinates:ee},properties:this.properties};return"id"in this&&(Ue.id=this.id),Ue};var jp=Jr,ad=ld;function ld(d,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(Up,this,a),this.length=this._features.length}function Up(d,a,g){d===15?a.version=g.readVarint():d===1?a.name=g.readString():d===5?a.extent=g.readVarint():d===2?a._features.push(g.pos):d===3?a._keys.push(g.readString()):d===4&&a._values.push(function(x){for(var T=null,D=x.readVarint()+x.pos;x.pos<D;){var O=x.readVarint()>>3;T=O===1?x.readString():O===2?x.readFloat():O===3?x.readDouble():O===4?x.readVarint64():O===5?x.readVarint():O===6?x.readSVarint():O===7?x.readBoolean():null}return T}(g))}ld.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var a=this._pbf.readVarint()+this._pbf.pos;return new jp(this._pbf,a,this.extent,this._keys,this._values)};var F0=ad;function vh(d,a,g){if(d===3){var x=new F0(g,g.readVarint()+g.pos);x.length&&(a[x.name]=x)}}cc.VectorTile=function(d,a){this.layers=d.readFields(vh,{},a)},cc.VectorTileFeature=Jr,cc.VectorTileLayer=ad;const ud=cc.VectorTileFeature.types,cf=Math.pow(2,13);function o0(d,a,g,x,T,D,O,Z){d.emplaceBack(a,g,2*Math.floor(x*cf)+O,T*cf*2,D*cf*2,Math.round(Z))}class B0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(g=>g.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new le,this.centroidVertexArray=new P,this.indexArray=new li,this.programConfigurations=new so(a.layers,a.zoom),this.segments=new Pt,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(a,g,x){this.features=[],this.hasPattern=N0("fill-extrusion",this.layers,g);for(const{feature:T,id:D,index:O,sourceLayerIndex:Z}of a){const ee=this.layers[0]._featureFilter.needGeometry,ue=Fa(T,ee);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),ue,x))continue;const _e={id:D,sourceLayerIndex:Z,index:O,geometry:ee?ue.geometry:ya(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(lf("fill-extrusion",this.layers,_e,this.zoom,g)):this.addFeature(_e,_e.geometry,O,x,{}),g.featureIndex.insert(T,_e.geometry,O,Z,this.index,!0)}}addFeatures(a,g,x){for(const T of this.features){const{geometry:D}=T;this.addFeature(T,D,T.index,g,x)}}update(a,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,g,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Bp),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Fp.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,g,x,T,D){const O={x:0,y:0,vertexCount:0};for(const Z of yh(g,500)){let ee=0;for(const Ye of Z)ee+=Ye.length;let ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ye of Z){if(Ye.length===0||qp(Ye))continue;let Dt=0;for(let Lt=0;Lt<Ye.length;Lt++){const oi=Ye[Lt];if(Lt>=1){const xi=Ye[Lt-1];if(!cd(oi,xi)){ue.vertexLength+4>Pt.MAX_VERTEX_ARRAY_LENGTH&&(ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ti=oi.sub(xi)._perp()._unit(),mi=xi.dist(oi);Dt+mi>32768&&(Dt=0),o0(this.layoutVertexArray,oi.x,oi.y,ti.x,ti.y,0,0,Dt),o0(this.layoutVertexArray,oi.x,oi.y,ti.x,ti.y,0,1,Dt),O.x+=2*oi.x,O.y+=2*oi.y,O.vertexCount+=2,Dt+=mi,o0(this.layoutVertexArray,xi.x,xi.y,ti.x,ti.y,0,0,Dt),o0(this.layoutVertexArray,xi.x,xi.y,ti.x,ti.y,0,1,Dt),O.x+=2*xi.x,O.y+=2*xi.y,O.vertexCount+=2;const Oi=ue.vertexLength;this.indexArray.emplaceBack(Oi,Oi+2,Oi+1),this.indexArray.emplaceBack(Oi+1,Oi+2,Oi+3),ue.vertexLength+=4,ue.primitiveLength+=2}}}}if(ue.vertexLength+ee>Pt.MAX_VERTEX_ARRAY_LENGTH&&(ue=this.segments.prepareSegment(ee,this.layoutVertexArray,this.indexArray)),ud[a.type]!=="Polygon")continue;const _e=[],Ce=[],Ue=ue.vertexLength;for(const Ye of Z)if(Ye.length!==0){Ye!==Z[0]&&Ce.push(_e.length/2);for(let Dt=0;Dt<Ye.length;Dt++){const Lt=Ye[Dt];o0(this.layoutVertexArray,Lt.x,Lt.y,0,0,1,1,0),O.x+=Lt.x,O.y+=Lt.y,O.vertexCount+=1,_e.push(Lt.x),_e.push(Lt.y)}}const Ze=Mu.exports(_e,Ce);for(let Ye=0;Ye<Ze.length;Ye+=3)this.indexArray.emplaceBack(Ue+Ze[Ye],Ue+Ze[Ye+2],Ue+Ze[Ye+1]);ue.primitiveLength+=Ze.length/3,ue.vertexLength+=ee}for(let Z=0;Z<O.vertexCount;Z++)this.centroidVertexArray.emplaceBack(Math.floor(O.x/O.vertexCount),Math.floor(O.y/O.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,D,T)}}function cd(d,a){return d.x===a.x&&(d.x<0||d.x>Qn)||d.y===a.y&&(d.y<0||d.y>Qn)}function qp(d){return d.every(a=>a.x<0)||d.every(a=>a.x>Qn)||d.every(a=>a.y<0)||d.every(a=>a.y>Qn)}dr("FillExtrusionBucket",B0,{omit:["layers","features"]});var Vp={paint:new uo({"fill-extrusion-opacity":new Rr(Y["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yr(Y["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rr(Y["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rr(Y["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new au(Y["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yr(Y["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yr(Y["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rr(Y["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function R0(d,a){return d.x*a.x+d.y*a.y}function hd(d,a){if(d.length===1){let g=0;const x=a[g++];let T;for(;!T||x.equals(T);)if(T=a[g++],!T)return 1/0;for(;g<a.length;g++){const D=a[g],O=d[0],Z=T.sub(x),ee=D.sub(x),ue=O.sub(x),_e=R0(Z,Z),Ce=R0(Z,ee),Ue=R0(ee,ee),Ze=R0(ue,Z),Ye=R0(ue,ee),Dt=_e*Ue-Ce*Ce,Lt=(Ue*Ze-Ce*Ye)/Dt,oi=(_e*Ye-Ce*Ze)/Dt,xi=x.z*(1-Lt-oi)+T.z*Lt+D.z*oi;if(isFinite(xi))return xi}return 1/0}{let g=1/0;for(const x of a)g=Math.min(g,x.z);return g}}const fd=Oo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Gp}=fd,e=Oo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:t}=e,r=cc.VectorTileFeature.types,f=Math.cos(Math.PI/180*37.5),y=Math.pow(2,14)/.5;class v{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(g=>g.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(g=>{this.gradients[g.id]={}}),this.layoutVertexArray=new Ae,this.layoutVertexArray2=new Fe,this.indexArray=new li,this.programConfigurations=new so(a.layers,a.zoom),this.segments=new Pt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(a,g,x){this.hasPattern=N0("line",this.layers,g);const T=this.layers[0].layout.get("line-sort-key"),D=!T.isConstant(),O=[];for(const{feature:Z,id:ee,index:ue,sourceLayerIndex:_e}of a){const Ce=this.layers[0]._featureFilter.needGeometry,Ue=Fa(Z,Ce);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),Ue,x))continue;const Ze=D?T.evaluate(Ue,{},x):void 0,Ye={id:ee,properties:Z.properties,type:Z.type,sourceLayerIndex:_e,index:ue,geometry:Ce?Ue.geometry:ya(Z),patterns:{},sortKey:Ze};O.push(Ye)}D&&O.sort((Z,ee)=>Z.sortKey-ee.sortKey);for(const Z of O){const{geometry:ee,index:ue,sourceLayerIndex:_e}=Z;if(this.hasPattern){const Ce=lf("line",this.layers,Z,this.zoom,g);this.patternFeatures.push(Ce)}else this.addFeature(Z,ee,ue,x,{});g.featureIndex.insert(a[ue].feature,ee,ue,_e,this.index)}}update(a,g,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,g,this.stateDependentLayers,x)}addFeatures(a,g,x){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,t)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Gp),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,g,x,T,D){const O=this.layers[0].layout,Z=O.get("line-join").evaluate(a,{}),ee=O.get("line-cap"),ue=O.get("line-miter-limit"),_e=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Ce of g)this.addLine(Ce,a,Z,ee,ue,_e);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,D,T)}addLine(a,g,x,T,D,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let oi=0;oi<a.length-1;oi++)this.totalDistance+=a[oi].dist(a[oi+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Z=r[g.type]==="Polygon";let ee=a.length;for(;ee>=2&&a[ee-1].equals(a[ee-2]);)ee--;let ue=0;for(;ue<ee-1&&a[ue].equals(a[ue+1]);)ue++;if(ee<(Z?3:2))return;x==="bevel"&&(D=1.05);const _e=this.overscaling<=16?122880/(512*this.overscaling):0,Ce=this.segments.prepareSegment(10*ee,this.layoutVertexArray,this.indexArray);let Ue,Ze,Ye,Dt,Lt;this.e1=this.e2=-1,Z&&(Ue=a[ee-2],Lt=a[ue].sub(Ue)._unit()._perp());for(let oi=ue;oi<ee;oi++){if(Ye=oi===ee-1?Z?a[ue+1]:void 0:a[oi+1],Ye&&a[oi].equals(Ye))continue;Lt&&(Dt=Lt),Ue&&(Ze=Ue),Ue=a[oi],Lt=Ye?Ye.sub(Ue)._unit()._perp():Dt,Dt=Dt||Lt;let xi=Dt.add(Lt);xi.x===0&&xi.y===0||xi._unit();const ti=Dt.x*Lt.x+Dt.y*Lt.y,mi=xi.x*Lt.x+xi.y*Lt.y,Oi=mi!==0?1/mi:1/0,Fi=2*Math.sqrt(2-2*mi),Lr=mi<f&&Ze&&Ye,Or=Dt.x*Lt.y-Dt.y*Lt.x>0;if(Lr&&oi>ue){const ur=Ue.dist(Ze);if(ur>2*_e){const Er=Ue.sub(Ue.sub(Ze)._mult(_e/ur)._round());this.updateDistance(Ze,Er),this.addCurrentVertex(Er,Dt,0,0,Ce),Ze=Er}}const Ar=Ze&&Ye;let pr=Ar?x:Z?"butt":T;if(Ar&&pr==="round"&&(Oi<O?pr="miter":Oi<=2&&(pr="fakeround")),pr==="miter"&&Oi>D&&(pr="bevel"),pr==="bevel"&&(Oi>2&&(pr="flipbevel"),Oi<D&&(pr="miter")),Ze&&this.updateDistance(Ze,Ue),pr==="miter")xi._mult(Oi),this.addCurrentVertex(Ue,xi,0,0,Ce);else if(pr==="flipbevel"){if(Oi>100)xi=Lt.mult(-1);else{const ur=Oi*Dt.add(Lt).mag()/Dt.sub(Lt).mag();xi._perp()._mult(ur*(Or?-1:1))}this.addCurrentVertex(Ue,xi,0,0,Ce),this.addCurrentVertex(Ue,xi.mult(-1),0,0,Ce)}else if(pr==="bevel"||pr==="fakeround"){const ur=-Math.sqrt(Oi*Oi-1),Er=Or?ur:0,_r=Or?0:ur;if(Ze&&this.addCurrentVertex(Ue,Dt,Er,_r,Ce),pr==="fakeround"){const Qi=Math.round(180*Fi/Math.PI/20);for(let Kr=1;Kr<Qi;Kr++){let Hr=Kr/Qi;if(Hr!==.5){const Mo=Hr-.5;Hr+=Hr*Mo*(Hr-1)*((1.0904+ti*(ti*(3.55645-1.43519*ti)-3.2452))*Mo*Mo+(.848013+ti*(.215638*ti-1.06021)))}const Cn=Lt.sub(Dt)._mult(Hr)._add(Dt)._unit()._mult(Or?-1:1);this.addHalfVertex(Ue,Cn.x,Cn.y,!1,Or,0,Ce)}}Ye&&this.addCurrentVertex(Ue,Lt,-Er,-_r,Ce)}else if(pr==="butt")this.addCurrentVertex(Ue,xi,0,0,Ce);else if(pr==="square"){const ur=Ze?1:-1;this.addCurrentVertex(Ue,xi,ur,ur,Ce)}else pr==="round"&&(Ze&&(this.addCurrentVertex(Ue,Dt,0,0,Ce),this.addCurrentVertex(Ue,Dt,1,1,Ce,!0)),Ye&&(this.addCurrentVertex(Ue,Lt,-1,-1,Ce,!0),this.addCurrentVertex(Ue,Lt,0,0,Ce)));if(Lr&&oi<ee-1){const ur=Ue.dist(Ye);if(ur>2*_e){const Er=Ue.add(Ye.sub(Ue)._mult(_e/ur)._round());this.updateDistance(Ue,Er),this.addCurrentVertex(Er,Lt,0,0,Ce),Ue=Er}}}}addCurrentVertex(a,g,x,T,D,O=!1){const Z=g.y*T-g.x,ee=-g.y-g.x*T;this.addHalfVertex(a,g.x+g.y*x,g.y-g.x*x,O,!1,x,D),this.addHalfVertex(a,Z,ee,O,!0,-T,D),this.distance>y/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,g,x,T,D,O))}addHalfVertex({x:a,y:g},x,T,D,O,Z,ee){const ue=.5*(this.lineClips?this.scaledDistance*(y-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(D?1:0),(g<<1)+(O?1:0),Math.round(63*x)+128,Math.round(63*T)+128,1+(Z===0?0:Z<0?-1:1)|(63&ue)<<2,ue>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const _e=ee.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_e),ee.primitiveLength++),O?this.e2=_e:this.e1=_e}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,g){this.distance+=a.dist(g),this.updateScaledDistance()}}dr("LineBucket",v,{omit:["layers","patternFeatures"]});const w=new uo({"line-cap":new Rr(Y.layout_line["line-cap"]),"line-join":new Yr(Y.layout_line["line-join"]),"line-miter-limit":new Rr(Y.layout_line["line-miter-limit"]),"line-round-limit":new Rr(Y.layout_line["line-round-limit"]),"line-sort-key":new Yr(Y.layout_line["line-sort-key"])});var S={paint:new uo({"line-opacity":new Yr(Y.paint_line["line-opacity"]),"line-color":new Yr(Y.paint_line["line-color"]),"line-translate":new Rr(Y.paint_line["line-translate"]),"line-translate-anchor":new Rr(Y.paint_line["line-translate-anchor"]),"line-width":new Yr(Y.paint_line["line-width"]),"line-gap-width":new Yr(Y.paint_line["line-gap-width"]),"line-offset":new Yr(Y.paint_line["line-offset"]),"line-blur":new Yr(Y.paint_line["line-blur"]),"line-dasharray":new Au(Y.paint_line["line-dasharray"]),"line-pattern":new au(Y.paint_line["line-pattern"]),"line-gradient":new Ho(Y.paint_line["line-gradient"])}),layout:w};const F=new class extends Yr{possiblyEvaluate(d,a){return a=new oo(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(d,a)}evaluate(d,a,g,x){return a=K({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(d,a,g,x)}}(S.paint.properties["line-width"].specification);function N(d,a){return a>0?a+2*d:d}F.useIntegerZoom=!0;const G=Oo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$=Oo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Oo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ce=Oo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Oo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const xe=Oo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ne=Oo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $e(d,a,g){return d.sections.forEach(x=>{x.text=function(T,D,O){const Z=D.layout.get("text-transform").evaluate(O,{});return Z==="uppercase"?T=T.toLocaleUpperCase():Z==="lowercase"&&(T=T.toLocaleLowerCase()),Vs.applyArabicShaping&&(T=Vs.applyArabicShaping(T)),T}(x.text,a,g)}),d}Oo([{name:"triangle",components:3,type:"Uint16"}]),Oo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Oo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Oo([{type:"Float32",name:"offsetX"}]),Oo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const gt={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var At=24,Bt=hi,Yt=function(d,a,g,x,T){var D,O,Z=8*T-x-1,ee=(1<<Z)-1,ue=ee>>1,_e=-7,Ce=g?T-1:0,Ue=g?-1:1,Ze=d[a+Ce];for(Ce+=Ue,D=Ze&(1<<-_e)-1,Ze>>=-_e,_e+=Z;_e>0;D=256*D+d[a+Ce],Ce+=Ue,_e-=8);for(O=D&(1<<-_e)-1,D>>=-_e,_e+=x;_e>0;O=256*O+d[a+Ce],Ce+=Ue,_e-=8);if(D===0)D=1-ue;else{if(D===ee)return O?NaN:1/0*(Ze?-1:1);O+=Math.pow(2,x),D-=ue}return(Ze?-1:1)*O*Math.pow(2,D-x)},yi=function(d,a,g,x,T,D){var O,Z,ee,ue=8*D-T-1,_e=(1<<ue)-1,Ce=_e>>1,Ue=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ze=x?0:D-1,Ye=x?1:-1,Dt=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(Z=isNaN(a)?1:0,O=_e):(O=Math.floor(Math.log(a)/Math.LN2),a*(ee=Math.pow(2,-O))<1&&(O--,ee*=2),(a+=O+Ce>=1?Ue/ee:Ue*Math.pow(2,1-Ce))*ee>=2&&(O++,ee/=2),O+Ce>=_e?(Z=0,O=_e):O+Ce>=1?(Z=(a*ee-1)*Math.pow(2,T),O+=Ce):(Z=a*Math.pow(2,Ce-1)*Math.pow(2,T),O=0));T>=8;d[g+Ze]=255&Z,Ze+=Ye,Z/=256,T-=8);for(O=O<<T|Z,ue+=T;ue>0;d[g+Ze]=255&O,Ze+=Ye,O/=256,ue-=8);d[g+Ze-Ye]|=128*Dt};function hi(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}hi.Varint=0,hi.Fixed64=1,hi.Bytes=2,hi.Fixed32=5;var Mi,Vi=4294967296,ar=1/Vi,qr=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function on(d){return d.type===hi.Bytes?d.readVarint()+d.pos:d.pos+1}function jo(d,a,g){return g?4294967296*a+(d>>>0):4294967296*(a>>>0)+(d>>>0)}function Zs(d,a,g){var x=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));g.realloc(x);for(var T=g.pos-1;T>=d;T--)g.buf[T+x]=g.buf[T]}function Ra(d,a){for(var g=0;g<d.length;g++)a.writeVarint(d[g])}function fu(d,a){for(var g=0;g<d.length;g++)a.writeSVarint(d[g])}function s0(d,a){for(var g=0;g<d.length;g++)a.writeFloat(d[g])}function e4(d,a){for(var g=0;g<d.length;g++)a.writeDouble(d[g])}function t4(d,a){for(var g=0;g<d.length;g++)a.writeBoolean(d[g])}function i4(d,a){for(var g=0;g<d.length;g++)a.writeFixed32(d[g])}function r4(d,a){for(var g=0;g<d.length;g++)a.writeSFixed32(d[g])}function n4(d,a){for(var g=0;g<d.length;g++)a.writeFixed64(d[g])}function o4(d,a){for(var g=0;g<d.length;g++)a.writeSFixed64(d[g])}function dd(d,a){return(d[a]|d[a+1]<<8|d[a+2]<<16)+16777216*d[a+3]}function _h(d,a,g){d[g]=a,d[g+1]=a>>>8,d[g+2]=a>>>16,d[g+3]=a>>>24}function Mm(d,a){return(d[a]|d[a+1]<<8|d[a+2]<<16)+(d[a+3]<<24)}function s4(d,a,g){d===1&&g.readMessage(a4,a)}function a4(d,a,g){if(d===3){const{id:x,bitmap:T,width:D,height:O,left:Z,top:ee,advance:ue}=g.readMessage(l4,{});a.push({id:x,bitmap:new Pu({width:D+6,height:O+6},T),metrics:{width:D,height:O,left:Z,top:ee,advance:ue}})}}function l4(d,a,g){d===1?a.id=g.readVarint():d===2?a.bitmap=g.readBytes():d===3?a.width=g.readVarint():d===4?a.height=g.readVarint():d===5?a.left=g.readSVarint():d===6?a.top=g.readSVarint():d===7&&(a.advance=g.readVarint())}function Dm(d){let a=0,g=0;for(const O of d)a+=O.w*O.h,g=Math.max(g,O.w);d.sort((O,Z)=>Z.h-O.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),g),h:1/0}];let T=0,D=0;for(const O of d)for(let Z=x.length-1;Z>=0;Z--){const ee=x[Z];if(!(O.w>ee.w||O.h>ee.h)){if(O.x=ee.x,O.y=ee.y,D=Math.max(D,O.y+O.h),T=Math.max(T,O.x+O.w),O.w===ee.w&&O.h===ee.h){const ue=x.pop();Z<x.length&&(x[Z]=ue)}else O.h===ee.h?(ee.x+=O.w,ee.w-=O.w):O.w===ee.w?(ee.y+=O.h,ee.h-=O.h):(x.push({x:ee.x+O.w,y:ee.y,w:ee.w-O.w,h:O.h}),ee.y+=O.h,ee.h-=O.h);break}}return{w:T,h:D,fill:a/(T*D)||0}}hi.prototype={destroy:function(){this.buf=null},readFields:function(d,a,g){for(g=g||this.length;this.pos<g;){var x=this.readVarint(),T=x>>3,D=this.pos;this.type=7&x,d(T,a,this),this.pos===D&&this.skip(x)}return a},readMessage:function(d,a){return this.readFields(d,a,this.readVarint()+this.pos)},readFixed32:function(){var d=dd(this.buf,this.pos);return this.pos+=4,d},readSFixed32:function(){var d=Mm(this.buf,this.pos);return this.pos+=4,d},readFixed64:function(){var d=dd(this.buf,this.pos)+dd(this.buf,this.pos+4)*Vi;return this.pos+=8,d},readSFixed64:function(){var d=dd(this.buf,this.pos)+Mm(this.buf,this.pos+4)*Vi;return this.pos+=8,d},readFloat:function(){var d=Yt(this.buf,this.pos,!0,23,4);return this.pos+=4,d},readDouble:function(){var d=Yt(this.buf,this.pos,!0,52,8);return this.pos+=8,d},readVarint:function(d){var a,g,x=this.buf;return a=127&(g=x[this.pos++]),g<128?a:(a|=(127&(g=x[this.pos++]))<<7,g<128?a:(a|=(127&(g=x[this.pos++]))<<14,g<128?a:(a|=(127&(g=x[this.pos++]))<<21,g<128?a:function(T,D,O){var Z,ee,ue=O.buf;if(Z=(112&(ee=ue[O.pos++]))>>4,ee<128||(Z|=(127&(ee=ue[O.pos++]))<<3,ee<128)||(Z|=(127&(ee=ue[O.pos++]))<<10,ee<128)||(Z|=(127&(ee=ue[O.pos++]))<<17,ee<128)||(Z|=(127&(ee=ue[O.pos++]))<<24,ee<128)||(Z|=(1&(ee=ue[O.pos++]))<<31,ee<128))return jo(T,Z,D);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(g=x[this.pos]))<<28,d,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var d=this.readVarint();return d%2==1?(d+1)/-2:d/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var d=this.readVarint()+this.pos,a=this.pos;return this.pos=d,d-a>=12&&qr?function(g,x,T){return qr.decode(g.subarray(x,T))}(this.buf,a,d):function(g,x,T){for(var D="",O=x;O<T;){var Z,ee,ue,_e=g[O],Ce=null,Ue=_e>239?4:_e>223?3:_e>191?2:1;if(O+Ue>T)break;Ue===1?_e<128&&(Ce=_e):Ue===2?(192&(Z=g[O+1]))==128&&(Ce=(31&_e)<<6|63&Z)<=127&&(Ce=null):Ue===3?(ee=g[O+2],(192&(Z=g[O+1]))==128&&(192&ee)==128&&((Ce=(15&_e)<<12|(63&Z)<<6|63&ee)<=2047||Ce>=55296&&Ce<=57343)&&(Ce=null)):Ue===4&&(ee=g[O+2],ue=g[O+3],(192&(Z=g[O+1]))==128&&(192&ee)==128&&(192&ue)==128&&((Ce=(15&_e)<<18|(63&Z)<<12|(63&ee)<<6|63&ue)<=65535||Ce>=1114112)&&(Ce=null)),Ce===null?(Ce=65533,Ue=1):Ce>65535&&(Ce-=65536,D+=String.fromCharCode(Ce>>>10&1023|55296),Ce=56320|1023&Ce),D+=String.fromCharCode(Ce),O+=Ue}return D}(this.buf,a,d)},readBytes:function(){var d=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,d);return this.pos=d,a},readPackedVarint:function(d,a){if(this.type!==hi.Bytes)return d.push(this.readVarint(a));var g=on(this);for(d=d||[];this.pos<g;)d.push(this.readVarint(a));return d},readPackedSVarint:function(d){if(this.type!==hi.Bytes)return d.push(this.readSVarint());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readSVarint());return d},readPackedBoolean:function(d){if(this.type!==hi.Bytes)return d.push(this.readBoolean());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readBoolean());return d},readPackedFloat:function(d){if(this.type!==hi.Bytes)return d.push(this.readFloat());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readFloat());return d},readPackedDouble:function(d){if(this.type!==hi.Bytes)return d.push(this.readDouble());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readDouble());return d},readPackedFixed32:function(d){if(this.type!==hi.Bytes)return d.push(this.readFixed32());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readFixed32());return d},readPackedSFixed32:function(d){if(this.type!==hi.Bytes)return d.push(this.readSFixed32());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readSFixed32());return d},readPackedFixed64:function(d){if(this.type!==hi.Bytes)return d.push(this.readFixed64());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readFixed64());return d},readPackedSFixed64:function(d){if(this.type!==hi.Bytes)return d.push(this.readSFixed64());var a=on(this);for(d=d||[];this.pos<a;)d.push(this.readSFixed64());return d},skip:function(d){var a=7&d;if(a===hi.Varint)for(;this.buf[this.pos++]>127;);else if(a===hi.Bytes)this.pos=this.readVarint()+this.pos;else if(a===hi.Fixed32)this.pos+=4;else{if(a!==hi.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(d,a){this.writeVarint(d<<3|a)},realloc:function(d){for(var a=this.length||16;a<this.pos+d;)a*=2;if(a!==this.length){var g=new Uint8Array(a);g.set(this.buf),this.buf=g,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(d){this.realloc(4),_h(this.buf,d,this.pos),this.pos+=4},writeSFixed32:function(d){this.realloc(4),_h(this.buf,d,this.pos),this.pos+=4},writeFixed64:function(d){this.realloc(8),_h(this.buf,-1&d,this.pos),_h(this.buf,Math.floor(d*ar),this.pos+4),this.pos+=8},writeSFixed64:function(d){this.realloc(8),_h(this.buf,-1&d,this.pos),_h(this.buf,Math.floor(d*ar),this.pos+4),this.pos+=8},writeVarint:function(d){(d=+d||0)>268435455||d<0?function(a,g){var x,T;if(a>=0?(x=a%4294967296|0,T=a/4294967296|0):(T=~(-a/4294967296),4294967295^(x=~(-a%4294967296))?x=x+1|0:(x=0,T=T+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(D,O,Z){Z.buf[Z.pos++]=127&D|128,D>>>=7,Z.buf[Z.pos++]=127&D|128,D>>>=7,Z.buf[Z.pos++]=127&D|128,D>>>=7,Z.buf[Z.pos++]=127&D|128,Z.buf[Z.pos]=127&(D>>>=7)}(x,0,g),function(D,O){var Z=(7&D)<<4;O.buf[O.pos++]|=Z|((D>>>=3)?128:0),D&&(O.buf[O.pos++]=127&D|((D>>>=7)?128:0),D&&(O.buf[O.pos++]=127&D|((D>>>=7)?128:0),D&&(O.buf[O.pos++]=127&D|((D>>>=7)?128:0),D&&(O.buf[O.pos++]=127&D|((D>>>=7)?128:0),D&&(O.buf[O.pos++]=127&D)))))}(T,g)}(d,this):(this.realloc(4),this.buf[this.pos++]=127&d|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=d>>>7&127))))},writeSVarint:function(d){this.writeVarint(d<0?2*-d-1:2*d)},writeBoolean:function(d){this.writeVarint(Boolean(d))},writeString:function(d){d=String(d),this.realloc(4*d.length),this.pos++;var a=this.pos;this.pos=function(x,T,D){for(var O,Z,ee=0;ee<T.length;ee++){if((O=T.charCodeAt(ee))>55295&&O<57344){if(!Z){O>56319||ee+1===T.length?(x[D++]=239,x[D++]=191,x[D++]=189):Z=O;continue}if(O<56320){x[D++]=239,x[D++]=191,x[D++]=189,Z=O;continue}O=Z-55296<<10|O-56320|65536,Z=null}else Z&&(x[D++]=239,x[D++]=191,x[D++]=189,Z=null);O<128?x[D++]=O:(O<2048?x[D++]=O>>6|192:(O<65536?x[D++]=O>>12|224:(x[D++]=O>>18|240,x[D++]=O>>12&63|128),x[D++]=O>>6&63|128),x[D++]=63&O|128)}return D}(this.buf,d,this.pos);var g=this.pos-a;g>=128&&Zs(a,g,this),this.pos=a-1,this.writeVarint(g),this.pos+=g},writeFloat:function(d){this.realloc(4),yi(this.buf,d,this.pos,!0,23,4),this.pos+=4},writeDouble:function(d){this.realloc(8),yi(this.buf,d,this.pos,!0,52,8),this.pos+=8},writeBytes:function(d){var a=d.length;this.writeVarint(a),this.realloc(a);for(var g=0;g<a;g++)this.buf[this.pos++]=d[g]},writeRawMessage:function(d,a){this.pos++;var g=this.pos;d(a,this);var x=this.pos-g;x>=128&&Zs(g,x,this),this.pos=g-1,this.writeVarint(x),this.pos+=x},writeMessage:function(d,a,g){this.writeTag(d,hi.Bytes),this.writeRawMessage(a,g)},writePackedVarint:function(d,a){a.length&&this.writeMessage(d,Ra,a)},writePackedSVarint:function(d,a){a.length&&this.writeMessage(d,fu,a)},writePackedBoolean:function(d,a){a.length&&this.writeMessage(d,t4,a)},writePackedFloat:function(d,a){a.length&&this.writeMessage(d,s0,a)},writePackedDouble:function(d,a){a.length&&this.writeMessage(d,e4,a)},writePackedFixed32:function(d,a){a.length&&this.writeMessage(d,i4,a)},writePackedSFixed32:function(d,a){a.length&&this.writeMessage(d,r4,a)},writePackedFixed64:function(d,a){a.length&&this.writeMessage(d,n4,a)},writePackedSFixed64:function(d,a){a.length&&this.writeMessage(d,o4,a)},writeBytesField:function(d,a){this.writeTag(d,hi.Bytes),this.writeBytes(a)},writeFixed32Field:function(d,a){this.writeTag(d,hi.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(d,a){this.writeTag(d,hi.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(d,a){this.writeTag(d,hi.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(d,a){this.writeTag(d,hi.Fixed64),this.writeSFixed64(a)},writeVarintField:function(d,a){this.writeTag(d,hi.Varint),this.writeVarint(a)},writeSVarintField:function(d,a){this.writeTag(d,hi.Varint),this.writeSVarint(a)},writeStringField:function(d,a){this.writeTag(d,hi.Bytes),this.writeString(a)},writeFloatField:function(d,a){this.writeTag(d,hi.Fixed32),this.writeFloat(a)},writeDoubleField:function(d,a){this.writeTag(d,hi.Fixed64),this.writeDouble(a)},writeBooleanField:function(d,a){this.writeVarintField(d,Boolean(a))}};class Hp{constructor(a,{pixelRatio:g,version:x,stretchX:T,stretchY:D,content:O}){this.paddedRect=a,this.pixelRatio=g,this.stretchX=T,this.stretchY=D,this.content=O,this.version=x}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zm{constructor(a,g){const x={},T={};this.haveRenderCallbacks=[];const D=[];this.addImages(a,x,D),this.addImages(g,T,D);const{w:O,h:Z}=Dm(D),ee=new Hs({width:O||1,height:Z||1});for(const ue in a){const _e=a[ue],Ce=x[ue].paddedRect;Hs.copy(_e.data,ee,{x:0,y:0},{x:Ce.x+1,y:Ce.y+1},_e.data)}for(const ue in g){const _e=g[ue],Ce=T[ue].paddedRect,Ue=Ce.x+1,Ze=Ce.y+1,Ye=_e.data.width,Dt=_e.data.height;Hs.copy(_e.data,ee,{x:0,y:0},{x:Ue,y:Ze},_e.data),Hs.copy(_e.data,ee,{x:0,y:Dt-1},{x:Ue,y:Ze-1},{width:Ye,height:1}),Hs.copy(_e.data,ee,{x:0,y:0},{x:Ue,y:Ze+Dt},{width:Ye,height:1}),Hs.copy(_e.data,ee,{x:Ye-1,y:0},{x:Ue-1,y:Ze},{width:1,height:Dt}),Hs.copy(_e.data,ee,{x:0,y:0},{x:Ue+Ye,y:Ze},{width:1,height:Dt})}this.image=ee,this.iconPositions=x,this.patternPositions=T}addImages(a,g,x){for(const T in a){const D=a[T],O={x:0,y:0,w:D.data.width+2,h:D.data.height+2};x.push(O),g[T]=new Hp(O,D),D.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(a,g){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in a.updatedImages)this.patchUpdatedImage(this.iconPositions[x],a.getImage(x),g),this.patchUpdatedImage(this.patternPositions[x],a.getImage(x),g)}patchUpdatedImage(a,g,x){if(!a||!g||a.version===g.version)return;a.version=g.version;const[T,D]=a.tl;x.update(g.data,void 0,{x:T,y:D})}}dr("ImagePosition",Hp),dr("ImageAtlas",zm),h.WritingMode=void 0,(Mi=h.WritingMode||(h.WritingMode={}))[Mi.none=0]="none",Mi[Mi.horizontal=1]="horizontal",Mi[Mi.vertical=2]="vertical",Mi[Mi.horizontalOnly=3]="horizontalOnly";const pd=-17;class hf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,g){const x=new hf;return x.scale=a||1,x.fontStack=g,x}static forImage(a){const g=new hf;return g.imageName=a,g}}class bh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,g){const x=new bh;for(let T=0;T<a.sections.length;T++){const D=a.sections[T];D.image?x.addImageSection(D):x.addTextSection(D,g)}return x}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let g="";for(let x=0;x<a.length;x++){const T=a.charCodeAt(x+1)||null,D=a.charCodeAt(x-1)||null;g+=T&&Sc(T)&&!gt[a[x+1]]||D&&Sc(D)&&!gt[a[x-1]]||!gt[a[x]]?a[x]:gt[a[x]]}return g}(this.text)}trim(){let a=0;for(let x=0;x<this.text.length&&gd[this.text.charCodeAt(x)];x++)a++;let g=this.text.length;for(let x=this.text.length-1;x>=0&&x>=a&&gd[this.text.charCodeAt(x)];x--)g--;this.text=this.text.substring(a,g),this.sectionIndex=this.sectionIndex.slice(a,g)}substring(a,g){const x=new bh;return x.text=this.text.substring(a,g),x.sectionIndex=this.sectionIndex.slice(a,g),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,g)=>Math.max(a,this.sections[g].scale),0)}addTextSection(a,g){this.text+=a.text,this.sections.push(hf.forText(a.scale,a.fontStack||g));const x=this.sections.length-1;for(let T=0;T<a.text.length;++T)this.sectionIndex.push(x)}addImageSection(a){const g=a.image?a.image.name:"";if(g.length===0)return void be("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(hf.forImage(g)),this.sectionIndex.push(this.sections.length-1)):be("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function md(d,a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt){const Lt=bh.fromFeature(d,T);let oi;Ce===h.WritingMode.vertical&&Lt.verticalizePunctuation();const{processBidirectionalText:xi,processStyledBidirectionalText:ti}=Vs;if(xi&&Lt.sections.length===1){oi=[];const Fi=xi(Lt.toString(),Wp(Lt,ue,D,a,x,Ze,Ye));for(const Lr of Fi){const Or=new bh;Or.text=Lr,Or.sections=Lt.sections;for(let Ar=0;Ar<Lr.length;Ar++)Or.sectionIndex.push(0);oi.push(Or)}}else if(ti){oi=[];const Fi=ti(Lt.text,Lt.sectionIndex,Wp(Lt,ue,D,a,x,Ze,Ye));for(const Lr of Fi){const Or=new bh;Or.text=Lr[0],Or.sectionIndex=Lr[1],Or.sections=Lt.sections,oi.push(Or)}}else oi=function(Fi,Lr){const Or=[],Ar=Fi.text;let pr=0;for(const ur of Lr)Or.push(Fi.substring(pr,ur)),pr=ur;return pr<Ar.length&&Or.push(Fi.substring(pr,Ar.length)),Or}(Lt,Wp(Lt,ue,D,a,x,Ze,Ye));const mi=[],Oi={positionedLines:mi,text:Lt.toString(),top:_e[1],bottom:_e[1],left:_e[0],right:_e[0],writingMode:Ce,iconsInText:!1,verticalizable:!1};return function(Fi,Lr,Or,Ar,pr,ur,Er,_r,Qi,Kr,Hr,Cn){let Mo=0,No=pd,As=0,Zl=0;const aa=_r==="right"?1:_r==="left"?0:.5;let gs=0;for(const ys of pr){ys.trim();const ua=ys.getMaxScale(),wa=(ua-1)*At,Oa={positionedGlyphs:[],lineOffset:0};Fi.positionedLines[gs]=Oa;const il=Oa.positionedGlyphs;let rl=0;if(!ys.length()){No+=ur,++gs;continue}for(let Fs=0;Fs<ys.length();Fs++){const zn=ys.getSection(Fs),kl=ys.getSectionIndex(Fs),ca=ys.getCharCode(Fs);let xa=0,du=null,Nu=null,Fu=null,Fc=At;const pu=!(Qi===h.WritingMode.horizontal||!Hr&&!ic(ca)||Hr&&(gd[ca]||(Ns=ca,ir.Arabic(Ns)||ir["Arabic Supplement"](Ns)||ir["Arabic Extended-A"](Ns)||ir["Arabic Presentation Forms-A"](Ns)||ir["Arabic Presentation Forms-B"](Ns))));if(zn.imageName){const Xl=Ar[zn.imageName];if(!Xl)continue;Fu=zn.imageName,Fi.iconsInText=Fi.iconsInText||!0,Nu=Xl.paddedRect;const nl=Xl.displaySize;zn.scale=zn.scale*At/Cn,du={width:nl[0],height:nl[1],left:1,top:-3,advance:pu?nl[1]:nl[0]},xa=wa+(At-nl[1]*zn.scale),Fc=du.advance;const Bc=pu?nl[0]*zn.scale-At*ua:nl[1]*zn.scale-At*ua;Bc>0&&Bc>rl&&(rl=Bc)}else{const Xl=Or[zn.fontStack],nl=Xl&&Xl[ca];if(nl&&nl.rect)Nu=nl.rect,du=nl.metrics;else{const Bc=Lr[zn.fontStack],pf=Bc&&Bc[ca];if(!pf)continue;du=pf.metrics}xa=(ua-zn.scale)*At}pu?(Fi.verticalizable=!0,il.push({glyph:ca,imageName:Fu,x:Mo,y:No+xa,vertical:pu,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:kl,metrics:du,rect:Nu}),Mo+=Fc*zn.scale+Kr):(il.push({glyph:ca,imageName:Fu,x:Mo,y:No+xa,vertical:pu,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:kl,metrics:du,rect:Nu}),Mo+=du.advance*zn.scale+Kr)}il.length!==0&&(As=Math.max(Mo-Kr,As),h4(il,0,il.length-1,aa,rl)),Mo=0;const Uo=ur*ua+rl;Oa.lineOffset=Math.max(rl,wa),No+=Uo,Zl=Math.max(Uo,Zl),++gs}var Ns;const la=No-pd,{horizontalAlign:ba,verticalAlign:tl}=Zp(Er);(function(ys,ua,wa,Oa,il,rl,Uo,Fs,zn){const kl=(ua-wa)*il;let ca=0;ca=rl!==Uo?-Fs*Oa-pd:(-Oa*zn+.5)*Uo;for(const xa of ys)for(const du of xa.positionedGlyphs)du.x+=kl,du.y+=ca})(Fi.positionedLines,aa,ba,tl,As,Zl,ur,la,pr.length),Fi.top+=-tl*la,Fi.bottom=Fi.top+la,Fi.left+=-ba*As,Fi.right=Fi.left+As}(Oi,a,g,x,oi,O,Z,ee,Ce,ue,Ue,Dt),!function(Fi){for(const Lr of Fi)if(Lr.positionedGlyphs.length!==0)return!1;return!0}(mi)&&Oi}const gd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},u4={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Nm(d,a,g,x,T,D){if(a.imageName){const O=x[a.imageName];return O?O.displaySize[0]*a.scale*At/D+T:0}{const O=g[a.fontStack],Z=O&&O[d];return Z?Z.metrics.advance*a.scale+T:0}}function Fm(d,a,g,x){const T=Math.pow(d-a,2);return x?d<a?T/2:2*T:T+Math.abs(g)*g}function c4(d,a,g){let x=0;return d===10&&(x-=1e4),g&&(x+=150),d!==40&&d!==65288||(x+=50),a!==41&&a!==65289||(x+=50),x}function Bm(d,a,g,x,T,D){let O=null,Z=Fm(a,g,T,D);for(const ee of x){const ue=Fm(a-ee.x,g,T,D)+ee.badness;ue<=Z&&(O=ee,Z=ue)}return{index:d,x:a,priorBreak:O,badness:Z}}function Rm(d){return d?Rm(d.priorBreak).concat(d.index):[]}function Wp(d,a,g,x,T,D,O){if(D!=="point")return[];if(!d)return[];const Z=[],ee=function(Ue,Ze,Ye,Dt,Lt,oi){let xi=0;for(let ti=0;ti<Ue.length();ti++){const mi=Ue.getSection(ti);xi+=Nm(Ue.getCharCode(ti),mi,Dt,Lt,Ze,oi)}return xi/Math.max(1,Math.ceil(xi/Ye))}(d,a,g,x,T,O),ue=d.text.indexOf("\u200B")>=0;let _e=0;for(let Ue=0;Ue<d.length();Ue++){const Ze=d.getSection(Ue),Ye=d.getCharCode(Ue);if(gd[Ye]||(_e+=Nm(Ye,Ze,x,T,a,O)),Ue<d.length()-1){const Dt=!((Ce=Ye)<11904||!(ir["Bopomofo Extended"](Ce)||ir.Bopomofo(Ce)||ir["CJK Compatibility Forms"](Ce)||ir["CJK Compatibility Ideographs"](Ce)||ir["CJK Compatibility"](Ce)||ir["CJK Radicals Supplement"](Ce)||ir["CJK Strokes"](Ce)||ir["CJK Symbols and Punctuation"](Ce)||ir["CJK Unified Ideographs Extension A"](Ce)||ir["CJK Unified Ideographs"](Ce)||ir["Enclosed CJK Letters and Months"](Ce)||ir["Halfwidth and Fullwidth Forms"](Ce)||ir.Hiragana(Ce)||ir["Ideographic Description Characters"](Ce)||ir["Kangxi Radicals"](Ce)||ir["Katakana Phonetic Extensions"](Ce)||ir.Katakana(Ce)||ir["Vertical Forms"](Ce)||ir["Yi Radicals"](Ce)||ir["Yi Syllables"](Ce)));(u4[Ye]||Dt||Ze.imageName)&&Z.push(Bm(Ue+1,_e,ee,Z,c4(Ye,d.getCharCode(Ue+1),Dt&&ue),!1))}}var Ce;return Rm(Bm(d.length(),_e,ee,Z,0,!0))}function Zp(d){let a=.5,g=.5;switch(d){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:a,verticalAlign:g}}function h4(d,a,g,x,T){if(!x&&!T)return;const D=d[g],O=(d[g].x+D.metrics.advance*D.scale)*x;for(let Z=a;Z<=g;Z++)d[Z].x-=O,d[Z].y+=T}function f4(d,a,g){const{horizontalAlign:x,verticalAlign:T}=Zp(g),D=a[0]-d.displaySize[0]*x,O=a[1]-d.displaySize[1]*T;return{image:d,top:O,bottom:O+d.displaySize[1],left:D,right:D+d.displaySize[0]}}function Om(d,a,g,x,T,D){const O=d.image;let Z;if(O.content){const Lt=O.content,oi=O.pixelRatio||1;Z=[Lt[0]/oi,Lt[1]/oi,O.displaySize[0]-Lt[2]/oi,O.displaySize[1]-Lt[3]/oi]}const ee=a.left*D,ue=a.right*D;let _e,Ce,Ue,Ze;g==="width"||g==="both"?(Ze=T[0]+ee-x[3],Ce=T[0]+ue+x[1]):(Ze=T[0]+(ee+ue-O.displaySize[0])/2,Ce=Ze+O.displaySize[0]);const Ye=a.top*D,Dt=a.bottom*D;return g==="height"||g==="both"?(_e=T[1]+Ye-x[0],Ue=T[1]+Dt+x[2]):(_e=T[1]+(Ye+Dt-O.displaySize[1])/2,Ue=_e+O.displaySize[1]),{image:O,top:_e,right:Ce,bottom:Ue,left:Ze,collisionPadding:Z}}const Nc=128;function jm(d,a){const{expression:g}=a;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new oo(d+1))};if(g.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:T}=g;let D=0;for(;D<x.length&&x[D]<=d;)D++;D=Math.max(0,D-1);let O=D;for(;O<x.length&&x[O]<d+1;)O++;O=Math.min(x.length-1,O);const Z=x[D],ee=x[O];return g.kind==="composite"?{kind:"composite",minZoom:Z,maxZoom:ee,interpolationType:T}:{kind:"camera",minZoom:Z,maxZoom:ee,minSize:g.evaluate(new oo(Z)),maxSize:g.evaluate(new oo(ee)),interpolationType:T}}}class a0 extends pt{constructor(a,g,x,T){super(a,g),this.angle=x,T!==void 0&&(this.segment=T)}clone(){return new a0(this.x,this.y,this.angle,this.segment)}}function Um(d,a,g,x,T){if(a.segment===void 0)return!0;let D=a,O=a.segment+1,Z=0;for(;Z>-g/2;){if(O--,O<0)return!1;Z-=d[O].dist(D),D=d[O]}Z+=d[O].dist(d[O+1]),O++;const ee=[];let ue=0;for(;Z<g/2;){const _e=d[O],Ce=d[O+1];if(!Ce)return!1;let Ue=d[O-1].angleTo(_e)-_e.angleTo(Ce);for(Ue=Math.abs((Ue+3*Math.PI)%(2*Math.PI)-Math.PI),ee.push({distance:Z,angleDelta:Ue}),ue+=Ue;Z-ee[0].distance>x;)ue-=ee.shift().angleDelta;if(ue>T)return!1;O++,Z+=_e.dist(Ce)}return!0}function qm(d){let a=0;for(let g=0;g<d.length-1;g++)a+=d[g].dist(d[g+1]);return a}function Vm(d,a,g){return d?.6*a*g:0}function Gm(d,a){return Math.max(d?d.right-d.left:0,a?a.right-a.left:0)}function d4(d,a,g,x,T,D){const O=Vm(g,T,D),Z=Gm(g,x)*D;let ee=0;const ue=qm(d)/2;for(let _e=0;_e<d.length-1;_e++){const Ce=d[_e],Ue=d[_e+1],Ze=Ce.dist(Ue);if(ee+Ze>ue){const Ye=(ue-ee)/Ze,Dt=Yn(Ce.x,Ue.x,Ye),Lt=Yn(Ce.y,Ue.y,Ye),oi=new a0(Dt,Lt,Ue.angleTo(Ce),_e);return oi._round(),!O||Um(d,oi,Z,O,a)?oi:void 0}ee+=Ze}}function p4(d,a,g,x,T,D,O,Z,ee){const ue=Vm(x,D,O),_e=Gm(x,T),Ce=_e*O,Ue=d[0].x===0||d[0].x===ee||d[0].y===0||d[0].y===ee;return a-Ce<a/4&&(a=Ce+a/4),Hm(d,Ue?a/2*Z%a:(_e/2+2*D)*O*Z%a,a,ue,g,Ce,Ue,!1,ee)}function Hm(d,a,g,x,T,D,O,Z,ee){const ue=D/2,_e=qm(d);let Ce=0,Ue=a-g,Ze=[];for(let Ye=0;Ye<d.length-1;Ye++){const Dt=d[Ye],Lt=d[Ye+1],oi=Dt.dist(Lt),xi=Lt.angleTo(Dt);for(;Ue+g<Ce+oi;){Ue+=g;const ti=(Ue-Ce)/oi,mi=Yn(Dt.x,Lt.x,ti),Oi=Yn(Dt.y,Lt.y,ti);if(mi>=0&&mi<ee&&Oi>=0&&Oi<ee&&Ue-ue>=0&&Ue+ue<=_e){const Fi=new a0(mi,Oi,xi,Ye);Fi._round(),x&&!Um(d,Fi,D,x,T)||Ze.push(Fi)}}Ce+=oi}return Z||Ze.length||O||(Ze=Hm(d,Ce/2,g,x,T,D,O,!0,ee)),Ze}function Wm(d,a,g,x,T){const D=[];for(let O=0;O<d.length;O++){const Z=d[O];let ee;for(let ue=0;ue<Z.length-1;ue++){let _e=Z[ue],Ce=Z[ue+1];_e.x<a&&Ce.x<a||(_e.x<a?_e=new pt(a,_e.y+(a-_e.x)/(Ce.x-_e.x)*(Ce.y-_e.y))._round():Ce.x<a&&(Ce=new pt(a,_e.y+(a-_e.x)/(Ce.x-_e.x)*(Ce.y-_e.y))._round()),_e.y<g&&Ce.y<g||(_e.y<g?_e=new pt(_e.x+(g-_e.y)/(Ce.y-_e.y)*(Ce.x-_e.x),g)._round():Ce.y<g&&(Ce=new pt(_e.x+(g-_e.y)/(Ce.y-_e.y)*(Ce.x-_e.x),g)._round()),_e.x>=x&&Ce.x>=x||(_e.x>=x?_e=new pt(x,_e.y+(x-_e.x)/(Ce.x-_e.x)*(Ce.y-_e.y))._round():Ce.x>=x&&(Ce=new pt(x,_e.y+(x-_e.x)/(Ce.x-_e.x)*(Ce.y-_e.y))._round()),_e.y>=T&&Ce.y>=T||(_e.y>=T?_e=new pt(_e.x+(T-_e.y)/(Ce.y-_e.y)*(Ce.x-_e.x),T)._round():Ce.y>=T&&(Ce=new pt(_e.x+(T-_e.y)/(Ce.y-_e.y)*(Ce.x-_e.x),T)._round()),ee&&_e.equals(ee[ee.length-1])||(ee=[_e],D.push(ee)),ee.push(Ce)))))}}return D}function Zm(d,a,g,x){const T=[],D=d.image,O=D.pixelRatio,Z=D.paddedRect.w-2,ee=D.paddedRect.h-2,ue=d.right-d.left,_e=d.bottom-d.top,Ce=D.stretchX||[[0,Z]],Ue=D.stretchY||[[0,ee]],Ze=(ur,Er)=>ur+Er[1]-Er[0],Ye=Ce.reduce(Ze,0),Dt=Ue.reduce(Ze,0),Lt=Z-Ye,oi=ee-Dt;let xi=0,ti=Ye,mi=0,Oi=Dt,Fi=0,Lr=Lt,Or=0,Ar=oi;if(D.content&&x){const ur=D.content;xi=yd(Ce,0,ur[0]),mi=yd(Ue,0,ur[1]),ti=yd(Ce,ur[0],ur[2]),Oi=yd(Ue,ur[1],ur[3]),Fi=ur[0]-xi,Or=ur[1]-mi,Lr=ur[2]-ur[0]-ti,Ar=ur[3]-ur[1]-Oi}const pr=(ur,Er,_r,Qi)=>{const Kr=vd(ur.stretch-xi,ti,ue,d.left),Hr=_d(ur.fixed-Fi,Lr,ur.stretch,Ye),Cn=vd(Er.stretch-mi,Oi,_e,d.top),Mo=_d(Er.fixed-Or,Ar,Er.stretch,Dt),No=vd(_r.stretch-xi,ti,ue,d.left),As=_d(_r.fixed-Fi,Lr,_r.stretch,Ye),Zl=vd(Qi.stretch-mi,Oi,_e,d.top),aa=_d(Qi.fixed-Or,Ar,Qi.stretch,Dt),gs=new pt(Kr,Cn),Ns=new pt(No,Cn),la=new pt(No,Zl),ba=new pt(Kr,Zl),tl=new pt(Hr/O,Mo/O),ys=new pt(As/O,aa/O),ua=a*Math.PI/180;if(ua){const il=Math.sin(ua),rl=Math.cos(ua),Uo=[rl,-il,il,rl];gs._matMult(Uo),Ns._matMult(Uo),ba._matMult(Uo),la._matMult(Uo)}const wa=ur.stretch+ur.fixed,Oa=Er.stretch+Er.fixed;return{tl:gs,tr:Ns,bl:ba,br:la,tex:{x:D.paddedRect.x+1+wa,y:D.paddedRect.y+1+Oa,w:_r.stretch+_r.fixed-wa,h:Qi.stretch+Qi.fixed-Oa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:tl,pixelOffsetBR:ys,minFontScaleX:Lr/O/ue,minFontScaleY:Ar/O/_e,isSDF:g}};if(x&&(D.stretchX||D.stretchY)){const ur=Xm(Ce,Lt,Ye),Er=Xm(Ue,oi,Dt);for(let _r=0;_r<ur.length-1;_r++){const Qi=ur[_r],Kr=ur[_r+1];for(let Hr=0;Hr<Er.length-1;Hr++)T.push(pr(Qi,Er[Hr],Kr,Er[Hr+1]))}}else T.push(pr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Z+1},{fixed:0,stretch:ee+1}));return T}function yd(d,a,g){let x=0;for(const T of d)x+=Math.max(a,Math.min(g,T[1]))-Math.max(a,Math.min(g,T[0]));return x}function Xm(d,a,g){const x=[{fixed:-1,stretch:0}];for(const[T,D]of d){const O=x[x.length-1];x.push({fixed:T-O.stretch,stretch:O.stretch}),x.push({fixed:T-O.stretch,stretch:O.stretch+(D-T)})}return x.push({fixed:a+1,stretch:g}),x}function vd(d,a,g,x){return d/a*g+x}function _d(d,a,g,x){return d-a*g/x}dr("Anchor",a0);class bd{constructor(a,g,x,T,D,O,Z,ee,ue,_e){if(this.boxStartIndex=a.length,ue){let Ce=O.top,Ue=O.bottom;const Ze=O.collisionPadding;Ze&&(Ce-=Ze[1],Ue+=Ze[3]);let Ye=Ue-Ce;Ye>0&&(Ye=Math.max(10,Ye),this.circleDiameter=Ye)}else{let Ce=O.top*Z-ee[0],Ue=O.bottom*Z+ee[2],Ze=O.left*Z-ee[3],Ye=O.right*Z+ee[1];const Dt=O.collisionPadding;if(Dt&&(Ze-=Dt[0]*Z,Ce-=Dt[1]*Z,Ye+=Dt[2]*Z,Ue+=Dt[3]*Z),_e){const Lt=new pt(Ze,Ce),oi=new pt(Ye,Ce),xi=new pt(Ze,Ue),ti=new pt(Ye,Ue),mi=_e*Math.PI/180;Lt._rotate(mi),oi._rotate(mi),xi._rotate(mi),ti._rotate(mi),Ze=Math.min(Lt.x,oi.x,xi.x,ti.x),Ye=Math.max(Lt.x,oi.x,xi.x,ti.x),Ce=Math.min(Lt.y,oi.y,xi.y,ti.y),Ue=Math.max(Lt.y,oi.y,xi.y,ti.y)}a.emplaceBack(g.x,g.y,Ze,Ce,Ye,Ue,x,T,D)}this.boxEndIndex=a.length}}class m4{constructor(a=[],g=g4){if(this.data=a,this.length=this.data.length,this.compare=g,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],g=this.data.pop();return this.length--,this.length>0&&(this.data[0]=g,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:g,compare:x}=this,T=g[a];for(;a>0;){const D=a-1>>1,O=g[D];if(x(T,O)>=0)break;g[a]=O,a=D}g[a]=T}_down(a){const{data:g,compare:x}=this,T=this.length>>1,D=g[a];for(;a<T;){let O=1+(a<<1),Z=g[O];const ee=O+1;if(ee<this.length&&x(g[ee],Z)<0&&(O=ee,Z=g[ee]),x(Z,D)>=0)break;g[a]=Z,a=O}g[a]=D}}function g4(d,a){return d<a?-1:d>a?1:0}function y4(d,a=1,g=!1){let x=1/0,T=1/0,D=-1/0,O=-1/0;const Z=d[0];for(let Ze=0;Ze<Z.length;Ze++){const Ye=Z[Ze];(!Ze||Ye.x<x)&&(x=Ye.x),(!Ze||Ye.y<T)&&(T=Ye.y),(!Ze||Ye.x>D)&&(D=Ye.x),(!Ze||Ye.y>O)&&(O=Ye.y)}const ee=Math.min(D-x,O-T);let ue=ee/2;const _e=new m4([],v4);if(ee===0)return new pt(x,T);for(let Ze=x;Ze<D;Ze+=ee)for(let Ye=T;Ye<O;Ye+=ee)_e.push(new wh(Ze+ue,Ye+ue,ue,d));let Ce=function(Ze){let Ye=0,Dt=0,Lt=0;const oi=Ze[0];for(let xi=0,ti=oi.length,mi=ti-1;xi<ti;mi=xi++){const Oi=oi[xi],Fi=oi[mi],Lr=Oi.x*Fi.y-Fi.x*Oi.y;Dt+=(Oi.x+Fi.x)*Lr,Lt+=(Oi.y+Fi.y)*Lr,Ye+=3*Lr}return new wh(Dt/Ye,Lt/Ye,0,Ze)}(d),Ue=_e.length;for(;_e.length;){const Ze=_e.pop();(Ze.d>Ce.d||!Ce.d)&&(Ce=Ze,g&&console.log("found best %d after %d probes",Math.round(1e4*Ze.d)/1e4,Ue)),Ze.max-Ce.d<=a||(ue=Ze.h/2,_e.push(new wh(Ze.p.x-ue,Ze.p.y-ue,ue,d)),_e.push(new wh(Ze.p.x+ue,Ze.p.y-ue,ue,d)),_e.push(new wh(Ze.p.x-ue,Ze.p.y+ue,ue,d)),_e.push(new wh(Ze.p.x+ue,Ze.p.y+ue,ue,d)),Ue+=4)}return g&&(console.log(`num probes: ${Ue}`),console.log(`best distance: ${Ce.d}`)),Ce.p}function v4(d,a){return a.max-d.max}function wh(d,a,g,x){this.p=new pt(d,a),this.h=g,this.d=function(T,D){let O=!1,Z=1/0;for(let ee=0;ee<D.length;ee++){const ue=D[ee];for(let _e=0,Ce=ue.length,Ue=Ce-1;_e<Ce;Ue=_e++){const Ze=ue[_e],Ye=ue[Ue];Ze.y>T.y!=Ye.y>T.y&&T.x<(Ye.x-Ze.x)*(T.y-Ze.y)/(Ye.y-Ze.y)+Ze.x&&(O=!O),Z=Math.min(Z,_a(T,Ze,Ye))}}return(O?1:-1)*Math.sqrt(Z)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}const Xp=Number.POSITIVE_INFINITY;function Ym(d,a){return a[1]!==Xp?function(g,x,T){let D=0,O=0;switch(x=Math.abs(x),T=Math.abs(T),g){case"top-right":case"top-left":case"top":O=T-7;break;case"bottom-right":case"bottom-left":case"bottom":O=7-T}switch(g){case"top-right":case"bottom-right":case"right":D=-x;break;case"top-left":case"bottom-left":case"left":D=x}return[D,O]}(d,a[0],a[1]):function(g,x){let T=0,D=0;x<0&&(x=0);const O=x/Math.sqrt(2);switch(g){case"top-right":case"top-left":D=O-7;break;case"bottom-right":case"bottom-left":D=7-O;break;case"bottom":D=7-x;break;case"top":D=x-7}switch(g){case"top-right":case"bottom-right":T=-O;break;case"top-left":case"bottom-left":T=O;break;case"left":T=x;break;case"right":T=-x}return[T,D]}(d,a[0])}function Yp(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _4(d,a,g,x,T,D,O,Z,ee,ue,_e){let Ce=D.textMaxSize.evaluate(a,{});Ce===void 0&&(Ce=O);const Ue=d.layers[0].layout,Ze=Ue.get("icon-offset").evaluate(a,{},_e),Ye=Km(g.horizontal),Dt=O/24,Lt=d.tilePixelRatio*Dt,oi=d.tilePixelRatio*Ce/24,xi=d.tilePixelRatio*Z,ti=d.tilePixelRatio*Ue.get("symbol-spacing"),mi=Ue.get("text-padding")*d.tilePixelRatio,Oi=function(Qi,Kr,Hr,Cn=1){const Mo=Qi.get("icon-padding").evaluate(Kr,{},Hr),No=Mo&&Mo.values;return[No[0]*Cn,No[1]*Cn,No[2]*Cn,No[3]*Cn]}(Ue,a,_e,d.tilePixelRatio),Fi=Ue.get("text-max-angle")/180*Math.PI,Lr=Ue.get("text-rotation-alignment")!=="viewport"&&Ue.get("symbol-placement")!=="point",Or=Ue.get("icon-rotation-alignment")==="map"&&Ue.get("symbol-placement")!=="point",Ar=Ue.get("symbol-placement"),pr=ti/2,ur=Ue.get("icon-text-fit");let Er;x&&ur!=="none"&&(d.allowVerticalPlacement&&g.vertical&&(Er=Om(x,g.vertical,ur,Ue.get("icon-text-fit-padding"),Ze,Dt)),Ye&&(x=Om(x,Ye,ur,Ue.get("icon-text-fit-padding"),Ze,Dt)));const _r=(Qi,Kr)=>{Kr.x<0||Kr.x>=Qn||Kr.y<0||Kr.y>=Qn||function(Hr,Cn,Mo,No,As,Zl,aa,gs,Ns,la,ba,tl,ys,ua,wa,Oa,il,rl,Uo,Fs,zn,kl,ca,xa,du){const Nu=Hr.addToLineVertexArray(Cn,Mo);let Fu,Fc,pu,Xl,nl=0,Bc=0,pf=0,dg=0,o1=-1,s1=-1;const Rc={};let pg=Ni.exports(""),a1=0,l1=0;if(gs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[a1,l1]=gs.layout.get("text-offset").evaluate(zn,{},xa).map(ol=>ol*At):(a1=gs.layout.get("text-radial-offset").evaluate(zn,{},xa)*At,l1=Xp),Hr.allowVerticalPlacement&&No.vertical){const ol=gs.layout.get("text-rotate").evaluate(zn,{},xa)+90;pu=new bd(Ns,Cn,la,ba,tl,No.vertical,ys,ua,wa,ol),aa&&(Xl=new bd(Ns,Cn,la,ba,tl,aa,il,rl,wa,ol))}if(As){const ol=gs.layout.get("icon-rotate").evaluate(zn,{}),hc=gs.layout.get("icon-text-fit")!=="none",mf=Zm(As,ol,ca,hc),gf=aa?Zm(aa,ol,ca,hc):void 0;Fc=new bd(Ns,Cn,la,ba,tl,As,il,rl,!1,ol),nl=4*mf.length;const yg=Hr.iconSizeData;let j0=null;yg.kind==="source"?(j0=[Nc*gs.layout.get("icon-size").evaluate(zn,{})],j0[0]>l0&&be(`${Hr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):yg.kind==="composite"&&(j0=[Nc*kl.compositeIconSizes[0].evaluate(zn,{},xa),Nc*kl.compositeIconSizes[1].evaluate(zn,{},xa)],(j0[0]>l0||j0[1]>l0)&&be(`${Hr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Hr.addSymbols(Hr.icon,mf,j0,Fs,Uo,zn,h.WritingMode.none,Cn,Nu.lineStartIndex,Nu.lineLength,-1,xa),o1=Hr.icon.placedSymbolArray.length-1,gf&&(Bc=4*gf.length,Hr.addSymbols(Hr.icon,gf,j0,Fs,Uo,zn,h.WritingMode.vertical,Cn,Nu.lineStartIndex,Nu.lineLength,-1,xa),s1=Hr.icon.placedSymbolArray.length-1)}const mg=Object.keys(No.horizontal);for(const ol of mg){const hc=No.horizontal[ol];if(!Fu){pg=Ni.exports(hc.text);const gf=gs.layout.get("text-rotate").evaluate(zn,{},xa);Fu=new bd(Ns,Cn,la,ba,tl,hc,ys,ua,wa,gf)}const mf=hc.positionedLines.length===1;if(pf+=Jm(Hr,Cn,hc,Zl,gs,wa,zn,Oa,Nu,No.vertical?h.WritingMode.horizontal:h.WritingMode.horizontalOnly,mf?mg:[ol],Rc,o1,kl,xa),mf)break}No.vertical&&(dg+=Jm(Hr,Cn,No.vertical,Zl,gs,wa,zn,Oa,Nu,h.WritingMode.vertical,["vertical"],Rc,s1,kl,xa));const M4=Fu?Fu.boxStartIndex:Hr.collisionBoxArray.length,D4=Fu?Fu.boxEndIndex:Hr.collisionBoxArray.length,z4=pu?pu.boxStartIndex:Hr.collisionBoxArray.length,N4=pu?pu.boxEndIndex:Hr.collisionBoxArray.length,F4=Fc?Fc.boxStartIndex:Hr.collisionBoxArray.length,B4=Fc?Fc.boxEndIndex:Hr.collisionBoxArray.length,R4=Xl?Xl.boxStartIndex:Hr.collisionBoxArray.length,O4=Xl?Xl.boxEndIndex:Hr.collisionBoxArray.length;let Bu=-1;const Ed=(ol,hc)=>ol&&ol.circleDiameter?Math.max(ol.circleDiameter,hc):hc;Bu=Ed(Fu,Bu),Bu=Ed(pu,Bu),Bu=Ed(Fc,Bu),Bu=Ed(Xl,Bu);const gg=Bu>-1?1:0;gg&&(Bu*=du/At),Hr.glyphOffsetArray.length>=xh.MAX_GLYPHS&&be("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zn.sortKey!==void 0&&Hr.addToSortKeyRanges(Hr.symbolInstances.length,zn.sortKey),Hr.symbolInstances.emplaceBack(Cn.x,Cn.y,Rc.right>=0?Rc.right:-1,Rc.center>=0?Rc.center:-1,Rc.left>=0?Rc.left:-1,Rc.vertical||-1,o1,s1,pg,M4,D4,z4,N4,F4,B4,R4,O4,la,pf,dg,nl,Bc,gg,0,ys,a1,l1,Bu)}(d,Kr,Qi,g,x,T,Er,d.layers[0],d.collisionBoxArray,a.index,a.sourceLayerIndex,d.index,Lt,[mi,mi,mi,mi],Lr,ee,xi,Oi,Or,Ze,a,D,ue,_e,O)};if(Ar==="line")for(const Qi of Wm(a.geometry,0,0,Qn,Qn)){const Kr=p4(Qi,ti,Fi,g.vertical||Ye,x,24,oi,d.overscaling,Qn);for(const Hr of Kr){const Cn=Ye;Cn&&b4(d,Cn.text,pr,Hr)||_r(Qi,Hr)}}else if(Ar==="line-center"){for(const Qi of a.geometry)if(Qi.length>1){const Kr=d4(Qi,Fi,g.vertical||Ye,x,24,oi);Kr&&_r(Qi,Kr)}}else if(a.type==="Polygon")for(const Qi of yh(a.geometry,0)){const Kr=y4(Qi,16);_r(Qi[0],new a0(Kr.x,Kr.y,0))}else if(a.type==="LineString")for(const Qi of a.geometry)_r(Qi,new a0(Qi[0].x,Qi[0].y,0));else if(a.type==="Point")for(const Qi of a.geometry)for(const Kr of Qi)_r([Kr],new a0(Kr.x,Kr.y,0))}const l0=32640;function Jm(d,a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye){const Dt=function(xi,ti,mi,Oi,Fi,Lr,Or,Ar){const pr=Oi.layout.get("text-rotate").evaluate(Lr,{})*Math.PI/180,ur=[];for(const Er of ti.positionedLines)for(const _r of Er.positionedGlyphs){if(!_r.rect)continue;const Qi=_r.rect||{};let Kr=4,Hr=!0,Cn=1,Mo=0;const No=(Fi||Ar)&&_r.vertical,As=_r.metrics.advance*_r.scale/2;if(Ar&&ti.verticalizable){const Uo=(_r.scale-1)*At,Fs=(At-_r.metrics.width*_r.scale)/2;Mo=Er.lineOffset/2-(_r.imageName?-Fs:Uo)}if(_r.imageName){const Uo=Or[_r.imageName];Hr=Uo.sdf,Cn=Uo.pixelRatio,Kr=1/Cn}const Zl=Fi?[_r.x+As,_r.y]:[0,0];let aa=Fi?[0,0]:[_r.x+As+mi[0],_r.y+mi[1]-Mo],gs=[0,0];No&&(gs=aa,aa=[0,0]);const Ns=(_r.metrics.left-Kr)*_r.scale-As+aa[0],la=(-_r.metrics.top-Kr)*_r.scale+aa[1],ba=Ns+Qi.w*_r.scale/Cn,tl=la+Qi.h*_r.scale/Cn,ys=new pt(Ns,la),ua=new pt(ba,la),wa=new pt(Ns,tl),Oa=new pt(ba,tl);if(No){const Uo=new pt(-As,As-pd),Fs=-Math.PI/2,zn=12-As,kl=new pt(22-zn,-(_r.imageName?zn:0)),ca=new pt(...gs);ys._rotateAround(Fs,Uo)._add(kl)._add(ca),ua._rotateAround(Fs,Uo)._add(kl)._add(ca),wa._rotateAround(Fs,Uo)._add(kl)._add(ca),Oa._rotateAround(Fs,Uo)._add(kl)._add(ca)}if(pr){const Uo=Math.sin(pr),Fs=Math.cos(pr),zn=[Fs,-Uo,Uo,Fs];ys._matMult(zn),ua._matMult(zn),wa._matMult(zn),Oa._matMult(zn)}const il=new pt(0,0),rl=new pt(0,0);ur.push({tl:ys,tr:ua,bl:wa,br:Oa,tex:Qi,writingMode:ti.writingMode,glyphOffset:Zl,sectionIndex:_r.sectionIndex,isSDF:Hr,pixelOffsetTL:il,pixelOffsetBR:rl,minFontScaleX:0,minFontScaleY:0})}return ur}(0,g,Z,T,D,O,x,d.allowVerticalPlacement),Lt=d.textSizeData;let oi=null;Lt.kind==="source"?(oi=[Nc*T.layout.get("text-size").evaluate(O,{})],oi[0]>l0&&be(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Lt.kind==="composite"&&(oi=[Nc*Ze.compositeTextSizes[0].evaluate(O,{},Ye),Nc*Ze.compositeTextSizes[1].evaluate(O,{},Ye)],(oi[0]>l0||oi[1]>l0)&&be(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),d.addSymbols(d.text,Dt,oi,Z,D,O,ue,a,ee.lineStartIndex,ee.lineLength,Ue,Ye);for(const xi of _e)Ce[xi]=d.text.placedSymbolArray.length-1;return 4*Dt.length}function Km(d){for(const a in d)return d[a];return null}function b4(d,a,g,x){const T=d.compareText;if(a in T){const D=T[a];for(let O=D.length-1;O>=0;O--)if(x.dist(D[O])<g)return!0}else T[a]=[];return T[a].push(x),!1}const w4=cc.VectorTileFeature.types,x4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wd(d,a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue){const Ze=Z?Math.min(l0,Math.round(Z[0])):0,Ye=Z?Math.min(l0,Math.round(Z[1])):0;d.emplaceBack(a,g,Math.round(32*x),Math.round(32*T),D,O,(Ze<<1)+(ee?1:0),Ye,16*ue,16*_e,256*Ce,256*Ue)}function Jp(d,a,g){d.emplaceBack(a.x,a.y,g),d.emplaceBack(a.x,a.y,g),d.emplaceBack(a.x,a.y,g),d.emplaceBack(a.x,a.y,g)}function k4(d){for(const a of d.sections)if(an(a.text))return!0;return!1}class Kp{constructor(a){this.layoutVertexArray=new He,this.indexArray=new li,this.programConfigurations=a,this.segments=new Pt,this.dynamicLayoutVertexArray=new Qe,this.opacityVertexArray=new ct,this.placedSymbolArray=new Zi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,g,x,T){this.isEmpty()||(x&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,G.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,g),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,$.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,x4,!0),this.opacityVertexBuffer.itemSize=1),(x||T)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dr("SymbolBuffers",Kp);class Qp{constructor(a,g,x){this.layoutVertexArray=new a,this.layoutAttributes=g,this.indexArray=new x,this.segments=new Pt,this.collisionVertexArray=new ci}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,ce.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dr("CollisionBuffers",Qp);class xh{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(O=>O.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_l([]),this.placementViewportMatrix=_l([]);const g=this.layers[0]._unevaluatedLayout._values;this.textSizeData=jm(this.zoom,g["text-size"]),this.iconSizeData=jm(this.zoom,g["icon-size"]);const x=this.layers[0].layout,T=x.get("symbol-sort-key"),D=x.get("symbol-z-order");this.canOverlap=e1(x,"text-overlap","text-allow-overlap")!=="never"||e1(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=D!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(D==="viewport-y"||D==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(O=>h.WritingMode[O])),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.sourceID=a.sourceID}createArrays(){this.text=new Kp(new so(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new Kp(new so(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new sr,this.lineVertexArray=new Ir,this.symbolInstances=new vr}calculateGlyphDependencies(a,g,x,T,D){for(let O=0;O<a.length;O++)if(g[a.charCodeAt(O)]=!0,(x||T)&&D){const Z=gt[a.charAt(O)];Z&&(g[Z.charCodeAt(0)]=!0)}}populate(a,g,x){const T=this.layers[0],D=T.layout,O=D.get("text-font"),Z=D.get("text-field"),ee=D.get("icon-image"),ue=(Z.value.kind!=="constant"||Z.value.value instanceof Nt&&!Z.value.value.isEmpty()||Z.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),_e=ee.value.kind!=="constant"||!!ee.value.value||Object.keys(ee.parameters).length>0,Ce=D.get("symbol-sort-key");if(this.features=[],!ue&&!_e)return;const Ue=g.iconDependencies,Ze=g.glyphDependencies,Ye=g.availableImages,Dt=new oo(this.zoom);for(const{feature:Lt,id:oi,index:xi,sourceLayerIndex:ti}of a){const mi=T._featureFilter.needGeometry,Oi=Fa(Lt,mi);if(!T._featureFilter.filter(Dt,Oi,x))continue;let Fi,Lr;if(mi||(Oi.geometry=ya(Lt)),ue){const Ar=T.getValueAndResolveTokens("text-field",Oi,x,Ye),pr=Nt.factory(Ar);k4(pr)&&(this.hasRTLText=!0),(!this.hasRTLText||ml()==="unavailable"||this.hasRTLText&&Vs.isParsed())&&(Fi=$e(pr,T,Oi))}if(_e){const Ar=T.getValueAndResolveTokens("icon-image",Oi,x,Ye);Lr=Ar instanceof jt?Ar:jt.fromString(Ar)}if(!Fi&&!Lr)continue;const Or=this.sortFeaturesByKey?Ce.evaluate(Oi,{},x):void 0;if(this.features.push({id:oi,text:Fi,icon:Lr,index:xi,sourceLayerIndex:ti,geometry:Oi.geometry,properties:Lt.properties,type:w4[Lt.type],sortKey:Or}),Lr&&(Ue[Lr.name]=!0),Fi){const Ar=O.evaluate(Oi,{},x).join(","),pr=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.WritingMode.vertical)>=0;for(const ur of Fi.sections)if(ur.image)Ue[ur.image.name]=!0;else{const Er=sa(Fi.toString()),_r=ur.fontStack||Ar,Qi=Ze[_r]=Ze[_r]||{};this.calculateGlyphDependencies(ur.text,Qi,pr,this.allowVerticalPlacement,Er)}}}D.get("symbol-placement")==="line"&&(this.features=function(Lt){const oi={},xi={},ti=[];let mi=0;function Oi(Ar){ti.push(Lt[Ar]),mi++}function Fi(Ar,pr,ur){const Er=xi[Ar];return delete xi[Ar],xi[pr]=Er,ti[Er].geometry[0].pop(),ti[Er].geometry[0]=ti[Er].geometry[0].concat(ur[0]),Er}function Lr(Ar,pr,ur){const Er=oi[pr];return delete oi[pr],oi[Ar]=Er,ti[Er].geometry[0].shift(),ti[Er].geometry[0]=ur[0].concat(ti[Er].geometry[0]),Er}function Or(Ar,pr,ur){const Er=ur?pr[0][pr[0].length-1]:pr[0][0];return`${Ar}:${Er.x}:${Er.y}`}for(let Ar=0;Ar<Lt.length;Ar++){const pr=Lt[Ar],ur=pr.geometry,Er=pr.text?pr.text.toString():null;if(!Er){Oi(Ar);continue}const _r=Or(Er,ur),Qi=Or(Er,ur,!0);if(_r in xi&&Qi in oi&&xi[_r]!==oi[Qi]){const Kr=Lr(_r,Qi,ur),Hr=Fi(_r,Qi,ti[Kr].geometry);delete oi[_r],delete xi[Qi],xi[Or(Er,ti[Hr].geometry,!0)]=Hr,ti[Kr].geometry=null}else _r in xi?Fi(_r,Qi,ur):Qi in oi?Lr(_r,Qi,ur):(Oi(Ar),oi[_r]=mi-1,xi[Qi]=mi-1)}return ti.filter(Ar=>Ar.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Lt,oi)=>Lt.sortKey-oi.sortKey)}update(a,g,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,g,this.layers,x),this.icon.programConfigurations.updatePaintArrays(a,g,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,g){const x=this.lineVertexArray.length;if(a.segment!==void 0){let T=a.dist(g[a.segment+1]),D=a.dist(g[a.segment]);const O={};for(let Z=a.segment+1;Z<g.length;Z++)O[Z]={x:g[Z].x,y:g[Z].y,tileUnitDistanceFromAnchor:T},Z<g.length-1&&(T+=g[Z+1].dist(g[Z]));for(let Z=a.segment||0;Z>=0;Z--)O[Z]={x:g[Z].x,y:g[Z].y,tileUnitDistanceFromAnchor:D},Z>0&&(D+=g[Z-1].dist(g[Z]));for(let Z=0;Z<g.length;Z++){const ee=O[Z];this.lineVertexArray.emplaceBack(ee.x,ee.y,ee.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(a,g,x,T,D,O,Z,ee,ue,_e,Ce,Ue){const Ze=a.indexArray,Ye=a.layoutVertexArray,Dt=a.segments.prepareSegment(4*g.length,Ye,Ze,this.canOverlap?O.sortKey:void 0),Lt=this.glyphOffsetArray.length,oi=Dt.vertexLength,xi=this.allowVerticalPlacement&&Z===h.WritingMode.vertical?Math.PI/2:0,ti=O.text&&O.text.sections;for(let mi=0;mi<g.length;mi++){const{tl:Oi,tr:Fi,bl:Lr,br:Or,tex:Ar,pixelOffsetTL:pr,pixelOffsetBR:ur,minFontScaleX:Er,minFontScaleY:_r,glyphOffset:Qi,isSDF:Kr,sectionIndex:Hr}=g[mi],Cn=Dt.vertexLength,Mo=Qi[1];wd(Ye,ee.x,ee.y,Oi.x,Mo+Oi.y,Ar.x,Ar.y,x,Kr,pr.x,pr.y,Er,_r),wd(Ye,ee.x,ee.y,Fi.x,Mo+Fi.y,Ar.x+Ar.w,Ar.y,x,Kr,ur.x,pr.y,Er,_r),wd(Ye,ee.x,ee.y,Lr.x,Mo+Lr.y,Ar.x,Ar.y+Ar.h,x,Kr,pr.x,ur.y,Er,_r),wd(Ye,ee.x,ee.y,Or.x,Mo+Or.y,Ar.x+Ar.w,Ar.y+Ar.h,x,Kr,ur.x,ur.y,Er,_r),Jp(a.dynamicLayoutVertexArray,ee,xi),Ze.emplaceBack(Cn,Cn+1,Cn+2),Ze.emplaceBack(Cn+1,Cn+2,Cn+3),Dt.vertexLength+=4,Dt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qi[0]),mi!==g.length-1&&Hr===g[mi+1].sectionIndex||a.programConfigurations.populatePaintArrays(Ye.length,O,O.index,{},Ue,ti&&ti[Hr])}a.placedSymbolArray.emplaceBack(ee.x,ee.y,Lt,this.glyphOffsetArray.length-Lt,oi,ue,_e,ee.segment,x?x[0]:0,x?x[1]:0,T[0],T[1],Z,0,!1,0,Ce)}_addCollisionDebugVertex(a,g,x,T,D,O){return g.emplaceBack(0,0),a.emplaceBack(x.x,x.y,T,D,Math.round(O.x),Math.round(O.y))}addCollisionDebugVertices(a,g,x,T,D,O,Z){const ee=D.segments.prepareSegment(4,D.layoutVertexArray,D.indexArray),ue=ee.vertexLength,_e=D.layoutVertexArray,Ce=D.collisionVertexArray,Ue=Z.anchorX,Ze=Z.anchorY;this._addCollisionDebugVertex(_e,Ce,O,Ue,Ze,new pt(a,g)),this._addCollisionDebugVertex(_e,Ce,O,Ue,Ze,new pt(x,g)),this._addCollisionDebugVertex(_e,Ce,O,Ue,Ze,new pt(x,T)),this._addCollisionDebugVertex(_e,Ce,O,Ue,Ze,new pt(a,T)),ee.vertexLength+=4;const Ye=D.indexArray;Ye.emplaceBack(ue,ue+1),Ye.emplaceBack(ue+1,ue+2),Ye.emplaceBack(ue+2,ue+3),Ye.emplaceBack(ue+3,ue),ee.primitiveLength+=4}addDebugCollisionBoxes(a,g,x,T){for(let D=a;D<g;D++){const O=this.collisionBoxArray.get(D);this.addCollisionDebugVertices(O.x1,O.y1,O.x2,O.y2,T?this.textCollisionBox:this.iconCollisionBox,O.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Qp(Ut,xe.members,ei),this.iconCollisionBox=new Qp(Ut,xe.members,ei);for(let a=0;a<this.symbolInstances.length;a++){const g=this.symbolInstances.get(a);this.addDebugCollisionBoxes(g.textBoxStartIndex,g.textBoxEndIndex,g,!0),this.addDebugCollisionBoxes(g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g,!0),this.addDebugCollisionBoxes(g.iconBoxStartIndex,g.iconBoxEndIndex,g,!1),this.addDebugCollisionBoxes(g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g,!1)}}_deserializeCollisionBoxesForSymbol(a,g,x,T,D,O,Z,ee,ue){const _e={};for(let Ce=g;Ce<x;Ce++){const Ue=a.get(Ce);_e.textBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},_e.textFeatureIndex=Ue.featureIndex;break}for(let Ce=T;Ce<D;Ce++){const Ue=a.get(Ce);_e.verticalTextBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},_e.verticalTextFeatureIndex=Ue.featureIndex;break}for(let Ce=O;Ce<Z;Ce++){const Ue=a.get(Ce);_e.iconBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},_e.iconFeatureIndex=Ue.featureIndex;break}for(let Ce=ee;Ce<ue;Ce++){const Ue=a.get(Ce);_e.verticalIconBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},_e.verticalIconFeatureIndex=Ue.featureIndex;break}return _e}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let g=0;g<this.symbolInstances.length;g++){const x=this.symbolInstances.get(g);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,g){const x=a.placedSymbolArray.get(g),T=x.vertexStartIndex+4*x.numGlyphs;for(let D=x.vertexStartIndex;D<T;D+=4)a.indexArray.emplaceBack(D,D+1,D+2),a.indexArray.emplaceBack(D+1,D+2,D+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const g=Math.sin(a),x=Math.cos(a),T=[],D=[],O=[];for(let Z=0;Z<this.symbolInstances.length;++Z){O.push(Z);const ee=this.symbolInstances.get(Z);T.push(0|Math.round(g*ee.anchorX+x*ee.anchorY)),D.push(ee.featureIndex)}return O.sort((Z,ee)=>T[Z]-T[ee]||D[ee]-D[Z]),O}addToSortKeyRanges(a,g){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===g?x.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:g,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const g of this.symbolInstanceIndexes){const x=this.symbolInstances.get(g);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((T,D,O)=>{T>=0&&O.indexOf(T)===D&&this.addIndicesForPlacedSymbol(this.text,T)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}dr("SymbolBucket",xh,{omit:["layers","collisionBoxArray","features","compareText"]}),xh.MAX_GLYPHS=65535,xh.addDynamicAttributes=Jp;const A4=new uo({"symbol-placement":new Rr(Y.layout_symbol["symbol-placement"]),"symbol-spacing":new Rr(Y.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rr(Y.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yr(Y.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rr(Y.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rr(Y.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rr(Y.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rr(Y.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rr(Y.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rr(Y.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yr(Y.layout_symbol["icon-size"]),"icon-text-fit":new Rr(Y.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rr(Y.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yr(Y.layout_symbol["icon-image"]),"icon-rotate":new Yr(Y.layout_symbol["icon-rotate"]),"icon-padding":new Yr(Y.layout_symbol["icon-padding"]),"icon-keep-upright":new Rr(Y.layout_symbol["icon-keep-upright"]),"icon-offset":new Yr(Y.layout_symbol["icon-offset"]),"icon-anchor":new Yr(Y.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rr(Y.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rr(Y.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rr(Y.layout_symbol["text-rotation-alignment"]),"text-field":new Yr(Y.layout_symbol["text-field"]),"text-font":new Yr(Y.layout_symbol["text-font"]),"text-size":new Yr(Y.layout_symbol["text-size"]),"text-max-width":new Yr(Y.layout_symbol["text-max-width"]),"text-line-height":new Rr(Y.layout_symbol["text-line-height"]),"text-letter-spacing":new Yr(Y.layout_symbol["text-letter-spacing"]),"text-justify":new Yr(Y.layout_symbol["text-justify"]),"text-radial-offset":new Yr(Y.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rr(Y.layout_symbol["text-variable-anchor"]),"text-anchor":new Yr(Y.layout_symbol["text-anchor"]),"text-max-angle":new Rr(Y.layout_symbol["text-max-angle"]),"text-writing-mode":new Rr(Y.layout_symbol["text-writing-mode"]),"text-rotate":new Yr(Y.layout_symbol["text-rotate"]),"text-padding":new Rr(Y.layout_symbol["text-padding"]),"text-keep-upright":new Rr(Y.layout_symbol["text-keep-upright"]),"text-transform":new Yr(Y.layout_symbol["text-transform"]),"text-offset":new Yr(Y.layout_symbol["text-offset"]),"text-allow-overlap":new Rr(Y.layout_symbol["text-allow-overlap"]),"text-overlap":new Rr(Y.layout_symbol["text-overlap"]),"text-ignore-placement":new Rr(Y.layout_symbol["text-ignore-placement"]),"text-optional":new Rr(Y.layout_symbol["text-optional"])});var $p={paint:new uo({"icon-opacity":new Yr(Y.paint_symbol["icon-opacity"]),"icon-color":new Yr(Y.paint_symbol["icon-color"]),"icon-halo-color":new Yr(Y.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yr(Y.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yr(Y.paint_symbol["icon-halo-blur"]),"icon-translate":new Rr(Y.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rr(Y.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yr(Y.paint_symbol["text-opacity"]),"text-color":new Yr(Y.paint_symbol["text-color"],{runtimeType:Zr,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Yr(Y.paint_symbol["text-halo-color"]),"text-halo-width":new Yr(Y.paint_symbol["text-halo-width"]),"text-halo-blur":new Yr(Y.paint_symbol["text-halo-blur"]),"text-translate":new Rr(Y.paint_symbol["text-translate"]),"text-translate-anchor":new Rr(Y.paint_symbol["text-translate-anchor"])}),layout:A4};class Qm{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:or,this.defaultValue=a}evaluate(a){if(a.formattedSection){const g=this.defaultValue.property.overrides;if(g&&g.hasOverride(a.formattedSection))return g.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dr("FormatSectionOverride",Qm,{omit:["defaultValue"]});class xd extends Na{constructor(a){super(a,$p)}recalculate(a,g){if(super.recalculate(a,g),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const T=[];for(const D of x)T.indexOf(D)<0&&T.push(D);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,g,x,T){const D=this.layout.get(a).evaluate(g,{},x,T),O=this._unevaluatedLayout._values[a];return O.isDataDriven()||ro(O.value)||!D?D:function(Z,ee){return ee.replace(/{([^{}]+)}/g,(ue,_e)=>_e in Z?String(Z[_e]):"")}(g.properties,D)}createBucket(a){return new xh(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of $p.paint.overridableProperties){if(!xd.hasPaintOverride(this.layout,a))continue;const g=this.paint.get(a),x=new Qm(g),T=new Mn(x,g.property.specification);let D=null;D=g.value.kind==="constant"||g.value.kind==="source"?new ho("source",T):new Ko("composite",T,g.value.zoomStops),this.paint._values[a]=new za(g.property,D,g.parameters)}}_handleOverridablePaintPropertyUpdate(a,g,x){return!(!this.layout||g.isDataDriven()||x.isDataDriven())&&xd.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,g){const x=a.get("text-field"),T=$p.paint.properties[g];let D=!1;const O=Z=>{for(const ee of Z)if(T.overrides&&T.overrides.hasOverride(ee))return void(D=!0)};if(x.value.kind==="constant"&&x.value.value instanceof Nt)O(x.value.value.sections);else if(x.value.kind==="source"){const Z=ue=>{D||(ue instanceof Sr&&wi(ue.value)===Pr?O(ue.value.sections):ue instanceof zl?O(ue.sections):ue.eachChild(Z))},ee=x.value;ee._styleExpression&&Z(ee._styleExpression.expression)}return D}}function e1(d,a,g){let x="never";const T=d.get(a);return T?x=T:d.get(g)&&(x="always"),x}var E4={paint:new uo({"background-color":new Rr(Y.paint_background["background-color"]),"background-pattern":new Au(Y.paint_background["background-pattern"]),"background-opacity":new Rr(Y.paint_background["background-opacity"])})},S4={paint:new uo({"raster-opacity":new Rr(Y.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rr(Y.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rr(Y.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rr(Y.paint_raster["raster-brightness-max"]),"raster-saturation":new Rr(Y.paint_raster["raster-saturation"]),"raster-contrast":new Rr(Y.paint_raster["raster-contrast"]),"raster-resampling":new Rr(Y.paint_raster["raster-resampling"]),"raster-fade-duration":new Rr(Y.paint_raster["raster-fade-duration"])})};class I4 extends Na{constructor(a){super(a,{}),this.onAdd=g=>{this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},this.onRemove=g=>{this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const C4={circle:class extends Na{constructor(d){super(d,ac)}createBucket(d){return new Po(d)}queryRadius(d){const a=d;return oc("circle-radius",this,a)+oc("circle-stroke-width",this,a)+Tu(this.paint.get("circle-translate"))}queryIntersectsFeature(d,a,g,x,T,D,O,Z){const ee=sc(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),D.angle,O),ue=this.paint.get("circle-radius").evaluate(a,g)+this.paint.get("circle-stroke-width").evaluate(a,g),_e=this.paint.get("circle-pitch-alignment")==="map",Ce=_e?ee:function(Ze,Ye){return Ze.map(Dt=>Pc(Dt,Ye))}(ee,Z),Ue=_e?ue*O:ue;for(const Ze of x)for(const Ye of Ze){const Dt=_e?Ye:Pc(Ye,Z);let Lt=Ue;const oi=lc([],[Ye.x,Ye.y,0,1],Z);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Lt*=oi[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Lt*=D.cameraToCenterDistance/oi[3]),lh(Ce,Dt,Lt))return!0}return!1}},heatmap:class extends Na{constructor(d){super(d,Mc),this._updateColorRamp()}createBucket(d){return new e0(d)}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=wl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Na{constructor(d){super(d,fh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Na{constructor(d){super(d,sd)}recalculate(d,a){super.recalculate(d,a);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new uf(d)}queryRadius(){return Tu(this.paint.get("fill-translate"))}queryIntersectsFeature(d,a,g,x,T,D,O){return S0(sc(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),D.angle,O),x)}isTileClipped(){return!0}},"fill-extrusion":class extends Na{constructor(d){super(d,Vp)}createBucket(d){return new B0(d)}queryRadius(){return Tu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(d,a,g,x,T,D,O,Z){const ee=sc(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),D.angle,O),ue=this.paint.get("fill-extrusion-height").evaluate(a,g),_e=this.paint.get("fill-extrusion-base").evaluate(a,g),Ce=function(Ze,Ye,Dt,Lt){const oi=[];for(const xi of Ze){const ti=[xi.x,xi.y,0,1];lc(ti,ti,Ye),oi.push(new pt(ti[0]/ti[3],ti[1]/ti[3]))}return oi}(ee,Z),Ue=function(Ze,Ye,Dt,Lt){const oi=[],xi=[],ti=Lt[8]*Ye,mi=Lt[9]*Ye,Oi=Lt[10]*Ye,Fi=Lt[11]*Ye,Lr=Lt[8]*Dt,Or=Lt[9]*Dt,Ar=Lt[10]*Dt,pr=Lt[11]*Dt;for(const ur of Ze){const Er=[],_r=[];for(const Qi of ur){const Kr=Qi.x,Hr=Qi.y,Cn=Lt[0]*Kr+Lt[4]*Hr+Lt[12],Mo=Lt[1]*Kr+Lt[5]*Hr+Lt[13],No=Lt[2]*Kr+Lt[6]*Hr+Lt[14],As=Lt[3]*Kr+Lt[7]*Hr+Lt[15],Zl=No+Oi,aa=As+Fi,gs=Cn+Lr,Ns=Mo+Or,la=No+Ar,ba=As+pr,tl=new pt((Cn+ti)/aa,(Mo+mi)/aa);tl.z=Zl/aa,Er.push(tl);const ys=new pt(gs/ba,Ns/ba);ys.z=la/ba,_r.push(ys)}oi.push(Er),xi.push(_r)}return[oi,xi]}(x,_e,ue,Z);return function(Ze,Ye,Dt){let Lt=1/0;S0(Dt,Ye)&&(Lt=hd(Dt,Ye[0]));for(let oi=0;oi<Ye.length;oi++){const xi=Ye[oi],ti=Ze[oi];for(let mi=0;mi<xi.length-1;mi++){const Oi=xi[mi],Fi=[Oi,xi[mi+1],ti[mi+1],ti[mi],Oi];Kc(Dt,Fi)&&(Lt=Math.min(Lt,hd(Dt,Fi)))}}return Lt!==1/0&&Lt}(Ue[0],Ue[1],Ce)}},line:class extends Na{constructor(d){super(d,S),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(d){d==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Rs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(d,a){super.recalculate(d,a),this.paint._values["line-floorwidth"]=F.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new v(d)}queryRadius(d){const a=d,g=N(oc("line-width",this,a),oc("line-gap-width",this,a)),x=oc("line-offset",this,a);return g/2+Math.abs(x)+Tu(this.paint.get("line-translate"))}queryIntersectsFeature(d,a,g,x,T,D,O){const Z=sc(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),D.angle,O),ee=O/2*N(this.paint.get("line-width").evaluate(a,g),this.paint.get("line-gap-width").evaluate(a,g)),ue=this.paint.get("line-offset").evaluate(a,g);return ue&&(x=function(_e,Ce){const Ue=[];for(let Ze=0;Ze<_e.length;Ze++){const Ye=_e[Ze],Dt=[];for(let Lt=0;Lt<Ye.length;Lt++){const oi=Ye[Lt-1],xi=Ye[Lt],ti=Ye[Lt+1],mi=Lt===0?new pt(0,0):xi.sub(oi)._unit()._perp(),Oi=Lt===Ye.length-1?new pt(0,0):ti.sub(xi)._unit()._perp(),Fi=mi._add(Oi)._unit(),Lr=Fi.x*Oi.x+Fi.y*Oi.y;Lr!==0&&Fi._mult(1/Lr),Dt.push(Fi._mult(Ce)._add(xi))}Ue.push(Dt)}return Ue}(x,ue*O)),function(_e,Ce,Ue){for(let Ze=0;Ze<Ce.length;Ze++){const Ye=Ce[Ze];if(_e.length>=3){for(let Dt=0;Dt<Ye.length;Dt++)if(Cu(_e,Ye[Dt]))return!0}if(Eu(_e,Ye,Ue))return!0}return!1}(Z,x,ee)}isTileClipped(){return!0}},symbol:xd,background:class extends Na{constructor(d){super(d,E4)}},raster:class extends Na{constructor(d){super(d,S4)}}};class T4{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const $m=63710088e-1;class is{constructor(a,g){if(isNaN(a)||isNaN(g))throw new Error(`Invalid LngLat object: (${a}, ${g})`);if(this.lng=+a,this.lat=+g,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new is(B(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const g=Math.PI/180,x=this.lat*g,T=a.lat*g,D=Math.sin(x)*Math.sin(T)+Math.cos(x)*Math.cos(T)*Math.cos((a.lng-this.lng)*g);return $m*Math.acos(Math.min(D,1))}toBounds(a=0){const g=360*a/40075017,x=g/Math.cos(Math.PI/180*this.lat);return new O0(new is(this.lng-x,this.lat-g),new is(this.lng+x,this.lat+g))}static convert(a){if(a instanceof is)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new is(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new is(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class O0{constructor(a,g){a&&(g?this.setSouthWest(a).setNorthEast(g):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof is?new is(a.lng,a.lat):is.convert(a),this}setSouthWest(a){return this._sw=a instanceof is?new is(a.lng,a.lat):is.convert(a),this}extend(a){const g=this._sw,x=this._ne;let T,D;if(a instanceof is)T=a,D=a;else{if(!(a instanceof O0))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(O0.convert(a)):this.extend(is.convert(a)):this;if(T=a._sw,D=a._ne,!T||!D)return this}return g||x?(g.lng=Math.min(T.lng,g.lng),g.lat=Math.min(T.lat,g.lat),x.lng=Math.max(D.lng,x.lng),x.lat=Math.max(D.lat,x.lat)):(this._sw=new is(T.lng,T.lat),this._ne=new is(D.lng,D.lat)),this}getCenter(){return new is((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new is(this.getWest(),this.getNorth())}getSouthEast(){return new is(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:g,lat:x}=is.convert(a);let T=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(T=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&T}static convert(a){return a instanceof O0?a:a&&new O0(a)}}const eg=2*Math.PI*$m;function tg(d){return eg*Math.cos(d*Math.PI/180)}function ig(d){return(180+d)/360}function rg(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function ng(d,a){return d/tg(a)}function t1(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}class kd{constructor(a,g,x=0){this.x=+a,this.y=+g,this.z=+x}static fromLngLat(a,g=0){const x=is.convert(a);return new kd(ig(x.lng),rg(x.lat),ng(g,x.lat))}toLngLat(){return new is(360*this.x-180,t1(this.y))}toAltitude(){return this.z*tg(t1(this.y))}meterInMercatorCoordinateUnits(){return 1/eg*(a=t1(this.y),1/Math.cos(a*Math.PI/180));var a}}function og(d,a,g){var x=2*Math.PI*6378137/256/Math.pow(2,g);return[d*x-2*Math.PI*6378137/2,a*x-2*Math.PI*6378137/2]}class i1{constructor(a,g,x){if(a<0||a>25||x<0||x>=Math.pow(2,a)||g<0||g>=Math.pow(2,a))throw new Error(`x=${g}, y=${x}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=g,this.y=x,this.key=ff(0,a,a,g,x)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,g,x){const T=(O=this.y,Z=this.z,ee=og(256*(D=this.x),256*(O=Math.pow(2,Z)-O-1),Z),ue=og(256*(D+1),256*(O+1),Z),ee[0]+","+ee[1]+","+ue[0]+","+ue[1]);var D,O,Z,ee,ue;const _e=function(Ce,Ue,Ze){let Ye,Dt="";for(let Lt=Ce;Lt>0;Lt--)Ye=1<<Lt-1,Dt+=(Ue&Ye?1:0)+(Ze&Ye?2:0);return Dt}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,g>1?"@2x":"").replace(/{quadkey}/g,_e).replace(/{bbox-epsg-3857}/g,T)}isChildOf(a){const g=this.z-a.z;return g>0&&a.x===this.x>>g&&a.y===this.y>>g}getTilePoint(a){const g=Math.pow(2,this.z);return new pt((a.x*g-this.x)*Qn,(a.y*g-this.y)*Qn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sg{constructor(a,g){this.wrap=a,this.canonical=g,this.key=ff(a,g.z,g.z,g.x,g.y)}}class Wl{constructor(a,g,x,T,D){if(a<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${x}`);this.overscaledZ=a,this.wrap=g,this.canonical=new i1(x,+T,+D),this.key=ff(g,a,x,T,D)}clone(){return new Wl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-a;return a>this.canonical.z?new Wl(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wl(a,this.wrap,a,this.canonical.x>>g,this.canonical.y>>g)}calculateScaledKey(a,g){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-a;return a>this.canonical.z?ff(this.wrap*+g,a,this.canonical.z,this.canonical.x,this.canonical.y):ff(this.wrap*+g,a,a,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const g=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>g&&a.canonical.y===this.canonical.y>>g}children(a){if(this.overscaledZ>=a)return[new Wl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const g=this.canonical.z+1,x=2*this.canonical.x,T=2*this.canonical.y;return[new Wl(g,this.wrap,g,x,T),new Wl(g,this.wrap,g,x+1,T),new Wl(g,this.wrap,g,x,T+1),new Wl(g,this.wrap,g,x+1,T+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Wl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Wl(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new kd(a.x-this.wrap,a.y))}}function ff(d,a,g,x,T){(d*=2)<0&&(d=-1*d-1);const D=1<<g;return(D*D*d+D*T+x).toString(36)+g.toString(36)+a.toString(36)}dr("CanonicalTileID",i1),dr("OverscaledTileID",Wl,{omit:["posMatrix"]});class ag{constructor(a,g,x){if(this.uid=a,g.height!==g.width)throw new RangeError("DEM tiles must be square");if(x&&x!=="mapbox"&&x!=="terrarium")return void be(`"${x}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=g.height;const T=this.dim=g.height-2;this.data=new Uint32Array(g.data.buffer),this.encoding=x||"mapbox";for(let D=0;D<T;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(T,D)]=this.data[this._idx(T-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,T)]=this.data[this._idx(D,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<T;D++)for(let O=0;O<T;O++){const Z=this.get(D,O);Z>this.max&&(this.max=Z),Z<this.min&&(this.min=Z)}}get(a,g){const x=new Uint8Array(this.data.buffer),T=4*this._idx(a,g);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(x[T],x[T+1],x[T+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(a,g){if(a<-1||a>=this.dim+1||g<-1||g>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(g+1)*this.stride+(a+1)}_unpackMapbox(a,g,x){return(256*a*256+256*g+x)/10-1e4}_unpackTerrarium(a,g,x){return 256*a+g+x/256-32768}getPixels(){return new Hs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,g,x){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let T=g*this.dim,D=g*this.dim+this.dim,O=x*this.dim,Z=x*this.dim+this.dim;switch(g){case-1:T=D-1;break;case 1:D=T+1}switch(x){case-1:O=Z-1;break;case 1:Z=O+1}const ee=-g*this.dim,ue=-x*this.dim;for(let _e=O;_e<Z;_e++)for(let Ce=T;Ce<D;Ce++)this.data[this._idx(Ce,_e)]=a.data[this._idx(Ce+ee,_e+ue)]}}dr("DEMData",ag);class lg{constructor(a){this._stringToNumber={},this._numberToString=[];for(let g=0;g<a.length;g++){const x=a[g];this._stringToNumber[x]=g,this._numberToString[g]=x}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class ug{constructor(a,g,x,T,D){this.type="Feature",this._vectorTileFeature=a,a._z=g,a._x=x,a._y=T,this.properties=a.properties,this.id=D}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const g in this)g!=="_geometry"&&g!=="_vectorTileFeature"&&(a[g]=this[g]);return a}}class cg{constructor(a,g){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new $a(Qn,16,0),this.grid3D=new $a(Qn,16,0),this.featureIndexArray=new cn,this.promoteId=g}insert(a,g,x,T,D,O){const Z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,T,D);const ee=O?this.grid3D:this.grid;for(let ue=0;ue<g.length;ue++){const _e=g[ue],Ce=[1/0,1/0,-1/0,-1/0];for(let Ue=0;Ue<_e.length;Ue++){const Ze=_e[Ue];Ce[0]=Math.min(Ce[0],Ze.x),Ce[1]=Math.min(Ce[1],Ze.y),Ce[2]=Math.max(Ce[2],Ze.x),Ce[3]=Math.max(Ce[3],Ze.y)}Ce[0]<Qn&&Ce[1]<Qn&&Ce[2]>=0&&Ce[3]>=0&&ee.insert(Z,Ce[0],Ce[1],Ce[2],Ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cc.VectorTile(new Bt(this.rawTileData)).layers,this.sourceLayerCoder=new lg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,g,x,T){this.loadVTLayers();const D=a.params||{},O=Qn/a.tileSize/a.scale,Z=ss(D.filter),ee=a.queryGeometry,ue=a.queryPadding*O,_e=fg(ee),Ce=this.grid.query(_e.minX-ue,_e.minY-ue,_e.maxX+ue,_e.maxY+ue),Ue=fg(a.cameraQueryGeometry),Ze=this.grid3D.query(Ue.minX-ue,Ue.minY-ue,Ue.maxX+ue,Ue.maxY+ue,(Lt,oi,xi,ti)=>function(mi,Oi,Fi,Lr,Or){for(const pr of mi)if(Oi<=pr.x&&Fi<=pr.y&&Lr>=pr.x&&Or>=pr.y)return!0;const Ar=[new pt(Oi,Fi),new pt(Oi,Or),new pt(Lr,Or),new pt(Lr,Fi)];if(mi.length>2){for(const pr of Ar)if(Cu(mi,pr))return!0}for(let pr=0;pr<mi.length-1;pr++)if($c(mi[pr],mi[pr+1],Ar))return!0;return!1}(a.cameraQueryGeometry,Lt-ue,oi-ue,xi+ue,ti+ue));for(const Lt of Ze)Ce.push(Lt);Ce.sort(L4);const Ye={};let Dt;for(let Lt=0;Lt<Ce.length;Lt++){const oi=Ce[Lt];if(oi===Dt)continue;Dt=oi;const xi=this.featureIndexArray.get(oi);let ti=null;this.loadMatchingFeature(Ye,xi.bucketIndex,xi.sourceLayerIndex,xi.featureIndex,Z,D.layers,D.availableImages,g,x,T,(mi,Oi,Fi)=>(ti||(ti=ya(mi)),Oi.queryIntersectsFeature(ee,mi,Fi,ti,this.z,a.transform,O,a.pixelPosMatrix)))}return Ye}loadMatchingFeature(a,g,x,T,D,O,Z,ee,ue,_e,Ce){const Ue=this.bucketLayerIDs[g];if(O&&!function(Lt,oi){for(let xi=0;xi<Lt.length;xi++)if(oi.indexOf(Lt[xi])>=0)return!0;return!1}(O,Ue))return;const Ze=this.sourceLayerCoder.decode(x),Ye=this.vtLayers[Ze].feature(T);if(D.needGeometry){const Lt=Fa(Ye,!0);if(!D.filter(new oo(this.tileID.overscaledZ),Lt,this.tileID.canonical))return}else if(!D.filter(new oo(this.tileID.overscaledZ),Ye))return;const Dt=this.getId(Ye,Ze);for(let Lt=0;Lt<Ue.length;Lt++){const oi=Ue[Lt];if(O&&O.indexOf(oi)<0)continue;const xi=ee[oi];if(!xi)continue;let ti={};Dt&&_e&&(ti=_e.getState(xi.sourceLayer||"_geojsonTileLayer",Dt));const mi=K({},ue[oi]);mi.paint=hg(mi.paint,xi.paint,Ye,ti,Z),mi.layout=hg(mi.layout,xi.layout,Ye,ti,Z);const Oi=!Ce||Ce(Ye,xi,ti);if(!Oi)continue;const Fi=new ug(Ye,this.z,this.x,this.y,Dt);Fi.layer=mi;let Lr=a[oi];Lr===void 0&&(Lr=a[oi]=[]),Lr.push({featureIndex:T,feature:Fi,intersectionZ:Oi})}}lookupSymbolFeatures(a,g,x,T,D,O,Z,ee){const ue={};this.loadVTLayers();const _e=ss(D);for(const Ce of a)this.loadMatchingFeature(ue,x,T,Ce,_e,O,Z,ee,g);return ue}hasLayer(a){for(const g of this.bucketLayerIDs)for(const x of g)if(a===x)return!0;return!1}getId(a,g){let x=a.id;return this.promoteId&&(x=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[g]],typeof x=="boolean"&&(x=Number(x))),x}}function hg(d,a,g,x,T){return ne(d,(D,O)=>{const Z=a instanceof ku?a.get(O):null;return Z&&Z.evaluate?Z.evaluate(g,x,T):Z})}function fg(d){let a=1/0,g=1/0,x=-1/0,T=-1/0;for(const D of d)a=Math.min(a,D.x),g=Math.min(g,D.y),x=Math.max(x,D.x),T=Math.max(T,D.y);return{minX:a,minY:g,maxX:x,maxY:T}}function L4(d,a){return a-d}var r1;dr("FeatureIndex",cg,{omit:["rawTileData","sourceLayerCoder"]}),h.PerformanceMarkers=void 0,(r1=h.PerformanceMarkers||(h.PerformanceMarkers={})).create="create",r1.load="load",r1.fullLoad="fullLoad";let Ad=null,df=[];const n1=1e3/30,P4={mark(d){performance.mark(d)},frame(d){const a=d;Ad!=null&&df.push(a-Ad),Ad=a},clearMetrics(){Ad=null,df=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const d in h.PerformanceMarkers)performance.clearMarks(h.PerformanceMarkers[d])},getPerformanceMetrics(){performance.measure("loadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.load),performance.measure("fullLoadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.fullLoad);const d=performance.getEntriesByName("loadTime")[0].duration,a=performance.getEntriesByName("fullLoadTime")[0].duration,g=df.length,x=1/(df.reduce((D,O)=>D+O,0)/g/1e3),T=df.filter(D=>D>n1).reduce((D,O)=>D+(O-n1)/n1,0);return{loadTime:d,fullLoadTime:a,fps:x,percentDroppedFrames:T/(g+T)*100}}};h.AJAXError=Di,h.ARRAY_TYPE=ks,h.Actor=class{constructor(d,a,g){this.target=d,this.parent=a,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},se(["receive","process"],this),this.invoker=new T4(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=me()?d:window}send(d,a,g,x,T=!1){const D=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[D]=g);const O=Ge(this.globalScope)?void 0:[];return this.target.postMessage({id:D,type:d,hasCallback:!!g,targetMapId:x,mustQueue:T,sourceMapId:this.mapId,data:kn(a,O)},O),{cancel:()=>{g&&delete this.callbacks[D],this.target.postMessage({id:D,type:"<cancel>",targetMapId:x,sourceMapId:this.mapId})}}}receive(d){const a=d.data,g=a.id;if(g&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[g];const x=this.cancelCallbacks[g];delete this.cancelCallbacks[g],x&&x()}else me()||a.mustQueue?(this.tasks[g]=a,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,a)}process(){if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),a=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(d,a)}processTask(d,a){if(a.type==="<response>"){const g=this.callbacks[d];delete this.callbacks[d],g&&(a.error?g(Jn(a.error)):g(null,Jn(a.data)))}else{let g=!1;const x=Ge(this.globalScope)?void 0:[],T=a.hasCallback?(Z,ee)=>{g=!0,delete this.cancelCallbacks[d],this.target.postMessage({id:d,type:"<response>",sourceMapId:this.mapId,error:Z?kn(Z):null,data:kn(ee,x)},x)}:Z=>{g=!0};let D=null;const O=Jn(a.data);if(this.parent[a.type])D=this.parent[a.type](a.sourceMapId,O,T);else if(this.parent.getWorkerSource){const Z=a.type.split(".");D=this.parent.getWorkerSource(a.sourceMapId,Z[0],O.source)[Z[1]](O,T)}else T(new Error(`Could not find function ${a.type}`));!g&&D&&D.cancel&&(this.cancelCallbacks[d]=D.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.AlphaImage=Pu,h.CanonicalTileID=i1,h.CollisionBoxArray=Ti,h.CollisionCircleLayoutArray=class extends we{},h.Color=et,h.DEMData=ag,h.DataConstantProperty=Rr,h.DictionaryCoder=lg,h.EXTENT=Qn,h.ErrorEvent=Dr,h.EvaluationParameters=oo,h.Event=pi,h.Evented=ze,h.FeatureIndex=cg,h.FillBucket=uf,h.FillExtrusionBucket=B0,h.GeoJSONFeature=ug,h.ImageAtlas=zm,h.ImagePosition=Hp,h.LineBucket=v,h.LineStripIndexArray=class extends It{},h.LngLat=is,h.LngLatBounds=O0,h.MercatorCoordinate=kd,h.ONE_EM=At,h.OverscaledTileID=Wl,h.PerformanceUtils=P4,h.PosArray=P,h.Properties=uo,h.QuadTriangleArray=class extends Ve{},h.RGBAImage=Hs,h.RasterBoundsArray=class extends I{},h.RequestPerformance=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},h.ResourceType=zi,h.SegmentVector=Pt,h.SymbolBucket=xh,h.Transitionable=nc,h.TriangleIndexArray=li,h.Uniform1f=jn,h.Uniform1i=class extends xn{constructor(d,a){super(d,a),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},h.Uniform2f=class extends xn{constructor(d,a){super(d,a),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},h.Uniform3f=class extends xn{constructor(d,a){super(d,a),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},h.Uniform4f=Zn,h.UniformColor=An,h.UniformMatrix4f=class extends xn{constructor(d,a){super(d,a),this.current=$o}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let a=1;a<16;a++)if(d[a]!==this.current[a]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},h.UnwrappedTileID=sg,h.ValidationError=te,h.ZoomHistory=Co,h.add=function(d,a,g){return d[0]=a[0]+g[0],d[1]=a[1]+g[1],d[2]=a[2]+g[2],d},h.addDynamicAttributes=Jp,h.asyncAll=function(d,a,g){if(!d.length)return g(null,[]);let x=d.length;const T=new Array(d.length);let D=null;d.forEach((O,Z)=>{a(O,(ee,ue)=>{ee&&(D=ee),T[Z]=ue,--x==0&&g(D,T)})})},h.bezier=z,h.bindAll=se,h.cacheEntryPossiblyAdded=function(d){bt++,bt>it&&(d.getActor().send("enforceCacheSizeLimit",ve),bt=0)},h.clamp=q,h.clearTileCache=function(d){const a=caches.delete(Xt);d&&a.catch(d).then(()=>d())},h.clipLine=Wm,h.clone=function(d){var a=new ks(16);return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15],a},h.clone$1=ke,h.clone$2=function(d){var a=new ks(3);return a[0]=d[0],a[1]=d[1],a[2]=d[2],a},h.collisionCircleLayout=Ne,h.config=kt,h.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15],d},h.create=function(){var d=new ks(16);return ks!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},h.create$1=ts,h.createExpression=lo,h.createFilter=ss,h.createLayout=Oo,h.createStyleLayer=function(d){return d.type==="custom"?new I4(d):new C4[d.type](d)},h.cross=function(d,a,g){var x=a[0],T=a[1],D=a[2],O=g[0],Z=g[1],ee=g[2];return d[0]=T*ee-D*Z,d[1]=D*O-x*ee,d[2]=x*Z-T*O,d},h.dot=function(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]},h.dot$1=function(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]},h.ease=U,h.emitValidationErrors=ms,h.enforceCacheSizeLimit=function(d){Re(),Mt&&Mt.then(a=>{a.keys().then(g=>{for(let x=0;x<g.length-d;x++)a.delete(g[x])})})},h.equals=function(d,a){var g=d[0],x=d[1],T=d[2],D=d[3],O=d[4],Z=d[5],ee=d[6],ue=d[7],_e=d[8],Ce=d[9],Ue=d[10],Ze=d[11],Ye=d[12],Dt=d[13],Lt=d[14],oi=d[15],xi=a[0],ti=a[1],mi=a[2],Oi=a[3],Fi=a[4],Lr=a[5],Or=a[6],Ar=a[7],pr=a[8],ur=a[9],Er=a[10],_r=a[11],Qi=a[12],Kr=a[13],Hr=a[14],Cn=a[15];return Math.abs(g-xi)<=zs*Math.max(1,Math.abs(g),Math.abs(xi))&&Math.abs(x-ti)<=zs*Math.max(1,Math.abs(x),Math.abs(ti))&&Math.abs(T-mi)<=zs*Math.max(1,Math.abs(T),Math.abs(mi))&&Math.abs(D-Oi)<=zs*Math.max(1,Math.abs(D),Math.abs(Oi))&&Math.abs(O-Fi)<=zs*Math.max(1,Math.abs(O),Math.abs(Fi))&&Math.abs(Z-Lr)<=zs*Math.max(1,Math.abs(Z),Math.abs(Lr))&&Math.abs(ee-Or)<=zs*Math.max(1,Math.abs(ee),Math.abs(Or))&&Math.abs(ue-Ar)<=zs*Math.max(1,Math.abs(ue),Math.abs(Ar))&&Math.abs(_e-pr)<=zs*Math.max(1,Math.abs(_e),Math.abs(pr))&&Math.abs(Ce-ur)<=zs*Math.max(1,Math.abs(Ce),Math.abs(ur))&&Math.abs(Ue-Er)<=zs*Math.max(1,Math.abs(Ue),Math.abs(Er))&&Math.abs(Ze-_r)<=zs*Math.max(1,Math.abs(Ze),Math.abs(_r))&&Math.abs(Ye-Qi)<=zs*Math.max(1,Math.abs(Ye),Math.abs(Qi))&&Math.abs(Dt-Kr)<=zs*Math.max(1,Math.abs(Dt),Math.abs(Kr))&&Math.abs(Lt-Hr)<=zs*Math.max(1,Math.abs(Lt),Math.abs(Hr))&&Math.abs(oi-Cn)<=zs*Math.max(1,Math.abs(oi),Math.abs(Cn))},h.evaluateSizeForFeature=function(d,{uSize:a,uSizeT:g},{lowerSize:x,upperSize:T}){return d.kind==="source"?x/Nc:d.kind==="composite"?Yn(x/Nc,T/Nc,g):a},h.evaluateSizeForZoom=function(d,a){let g=0,x=0;if(d.kind==="constant")x=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:T,minZoom:D,maxZoom:O}=d,Z=T?q(_i.interpolationFactor(T,a,D,O),0,1):0;d.kind==="camera"?x=Yn(d.minSize,d.maxSize,Z):g=Z}return{uSizeT:g,uSize:x}},h.evaluateVariableOffset=Ym,h.evented=Ul,h.exported=_t,h.exported$1=Ct,h.extend=K,h.filterObject=re,h.fromRotation=function(d,a){var g=Math.sin(a),x=Math.cos(a);return d[0]=x,d[1]=g,d[2]=0,d[3]=-g,d[4]=x,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},h.fromScaling=function(d,a){return d[0]=a[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=a[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=a[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.getAnchorAlignment=Zp,h.getAnchorJustification=Yp,h.getArrayBuffer=$i,h.getImage=Ui,h.getJSON=function(d,a){return yt(K(d,{type:"json"}),a)},h.getOverlapMode=e1,h.getRTLTextPluginStatus=ml,h.getReferrer=er,h.getVideo=function(d,a){const g=window.document.createElement("video");g.muted=!0,g.onloadstart=function(){a(null,g)};for(let x=0;x<d.length;x++){const T=window.document.createElement("source");nr(d[x])||(g.crossOrigin="Anonymous"),T.src=d[x],g.appendChild(T)}return{cancel:()=>{}}},h.identity=_l,h.invert=function(d,a){var g=a[0],x=a[1],T=a[2],D=a[3],O=a[4],Z=a[5],ee=a[6],ue=a[7],_e=a[8],Ce=a[9],Ue=a[10],Ze=a[11],Ye=a[12],Dt=a[13],Lt=a[14],oi=a[15],xi=g*Z-x*O,ti=g*ee-T*O,mi=g*ue-D*O,Oi=x*ee-T*Z,Fi=x*ue-D*Z,Lr=T*ue-D*ee,Or=_e*Dt-Ce*Ye,Ar=_e*Lt-Ue*Ye,pr=_e*oi-Ze*Ye,ur=Ce*Lt-Ue*Dt,Er=Ce*oi-Ze*Dt,_r=Ue*oi-Ze*Lt,Qi=xi*_r-ti*Er+mi*ur+Oi*pr-Fi*Ar+Lr*Or;return Qi?(d[0]=(Z*_r-ee*Er+ue*ur)*(Qi=1/Qi),d[1]=(T*Er-x*_r-D*ur)*Qi,d[2]=(Dt*Lr-Lt*Fi+oi*Oi)*Qi,d[3]=(Ue*Fi-Ce*Lr-Ze*Oi)*Qi,d[4]=(ee*pr-O*_r-ue*Ar)*Qi,d[5]=(g*_r-T*pr+D*Ar)*Qi,d[6]=(Lt*mi-Ye*Lr-oi*ti)*Qi,d[7]=(_e*Lr-Ue*mi+Ze*ti)*Qi,d[8]=(O*Er-Z*pr+ue*Or)*Qi,d[9]=(x*pr-g*Er-D*Or)*Qi,d[10]=(Ye*Fi-Dt*mi+oi*xi)*Qi,d[11]=(Ce*mi-_e*Fi-Ze*xi)*Qi,d[12]=(Z*Ar-O*ur-ee*Or)*Qi,d[13]=(g*ur-x*Ar+T*Or)*Qi,d[14]=(Dt*ti-Ye*Oi-Lt*xi)*Qi,d[15]=(_e*Oi-Ce*ti+Ue*xi)*Qi,d):null},h.isImageBitmap=Xe,h.isSafari=Ge,h.isWorker=me,h.keysDifference=function(d,a){const g=[];for(const x in d)x in a||g.push(x);return g},h.lazyLoadRTLTextPlugin=function(){Vs.isLoading()||Vs.isLoaded()||ml()!=="deferred"||Dn()},h.makeRequest=yt,h.mapObject=ne,h.mercatorXfromLng=ig,h.mercatorYfromLat=rg,h.mercatorZfromAltitude=ng,h.mul=ch,h.mul$1=function(d,a,g){return d[0]=a[0]*g[0],d[1]=a[1]*g[1],d[2]=a[2]*g[2],d[3]=a[3]*g[3],d},h.multiply=uh,h.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},h.normalize=function(d,a){var g=a[0],x=a[1],T=a[2],D=g*g+x*x+T*T;return D>0&&(D=1/Math.sqrt(D)),d[0]=a[0]*D,d[1]=a[1]*D,d[2]=a[2]*D,d},h.number=Yn,h.ortho=function(d,a,g,x,T,D,O){var Z=1/(a-g),ee=1/(x-T),ue=1/(D-O);return d[0]=-2*Z,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*ee,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*ue,d[11]=0,d[12]=(a+g)*Z,d[13]=(T+x)*ee,d[14]=(O+D)*ue,d[15]=1,d},h.parseCacheControl=tt,h.parseGlyphPbf=function(d){return new Bt(d).readFields(s4,[])},h.pbf=Bt,h.performSymbolLayout=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=Qn/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const a=d.bucket.layers[0].layout,g=d.bucket.layers[0]._unevaluatedLayout._values,x={layoutIconSize:g["icon-size"].possiblyEvaluate(new oo(d.bucket.zoom+1),d.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new oo(d.bucket.zoom+1),d.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new oo(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ue}=d.bucket.textSizeData;x.compositeTextSizes=[g["text-size"].possiblyEvaluate(new oo(ee),d.canonical),g["text-size"].possiblyEvaluate(new oo(ue),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ue}=d.bucket.iconSizeData;x.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new oo(ee),d.canonical),g["icon-size"].possiblyEvaluate(new oo(ue),d.canonical)]}const T=a.get("text-line-height")*At,D=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",O=a.get("text-keep-upright"),Z=a.get("text-size");for(const ee of d.bucket.features){const ue=a.get("text-font").evaluate(ee,{},d.canonical).join(","),_e=Z.evaluate(ee,{},d.canonical),Ce=x.layoutTextSize.evaluate(ee,{},d.canonical),Ue=x.layoutIconSize.evaluate(ee,{},d.canonical),Ze={horizontal:{},vertical:void 0},Ye=ee.text;let Dt,Lt=[0,0];if(Ye){const ti=Ye.toString(),mi=a.get("text-letter-spacing").evaluate(ee,{},d.canonical)*At,Oi=ou(ti)?mi:0,Fi=a.get("text-anchor").evaluate(ee,{},d.canonical),Lr=a.get("text-variable-anchor");if(!Lr){const Er=a.get("text-radial-offset").evaluate(ee,{},d.canonical);Lt=Er?Ym(Fi,[Er*At,Xp]):a.get("text-offset").evaluate(ee,{},d.canonical).map(_r=>_r*At)}let Or=D?"center":a.get("text-justify").evaluate(ee,{},d.canonical);const Ar=a.get("symbol-placement"),pr=Ar==="point"?a.get("text-max-width").evaluate(ee,{},d.canonical)*At:0,ur=()=>{d.bucket.allowVerticalPlacement&&sa(ti)&&(Ze.vertical=md(Ye,d.glyphMap,d.glyphPositions,d.imagePositions,ue,pr,T,Fi,"left",Oi,Lt,h.WritingMode.vertical,!0,Ar,Ce,_e))};if(!D&&Lr){const Er=Or==="auto"?Lr.map(Qi=>Yp(Qi)):[Or];let _r=!1;for(let Qi=0;Qi<Er.length;Qi++){const Kr=Er[Qi];if(!Ze.horizontal[Kr])if(_r)Ze.horizontal[Kr]=Ze.horizontal[0];else{const Hr=md(Ye,d.glyphMap,d.glyphPositions,d.imagePositions,ue,pr,T,"center",Kr,Oi,Lt,h.WritingMode.horizontal,!1,Ar,Ce,_e);Hr&&(Ze.horizontal[Kr]=Hr,_r=Hr.positionedLines.length===1)}}ur()}else{Or==="auto"&&(Or=Yp(Fi));const Er=md(Ye,d.glyphMap,d.glyphPositions,d.imagePositions,ue,pr,T,Fi,Or,Oi,Lt,h.WritingMode.horizontal,!1,Ar,Ce,_e);Er&&(Ze.horizontal[Or]=Er),ur(),sa(ti)&&D&&O&&(Ze.vertical=md(Ye,d.glyphMap,d.glyphPositions,d.imagePositions,ue,pr,T,Fi,Or,Oi,Lt,h.WritingMode.vertical,!1,Ar,Ce,_e))}}let oi=!1;if(ee.icon&&ee.icon.name){const ti=d.imageMap[ee.icon.name];ti&&(Dt=f4(d.imagePositions[ee.icon.name],a.get("icon-offset").evaluate(ee,{},d.canonical),a.get("icon-anchor").evaluate(ee,{},d.canonical)),oi=!!ti.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=oi:d.bucket.sdfIcons!==oi&&be("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ti.pixelRatio!==d.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const xi=Km(Ze.horizontal)||Ze.vertical;d.bucket.iconsInText=!!xi&&xi.iconsInText,(xi||Dt)&&_4(d.bucket,ee,Ze,Dt,d.imageMap,x,Ce,Ue,Lt,oi,d.canonical)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},h.perspective=function(d,a,g,x,T){var D,O=1/Math.tan(a/2);return d[0]=O/g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=O,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,T!=null&&T!==1/0?(d[10]=(T+x)*(D=1/(x-T)),d[14]=2*T*x*D):(d[10]=-1,d[14]=-2*x),d},h.pick=function(d,a){const g={};for(let x=0;x<a.length;x++){const T=a[x];T in d&&(g[T]=d[T])}return g},h.plugin=Vs,h.pointGeometry=pt,h.polygonIntersectsPolygon=Kc,h.potpack=Dm,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.register=dr,h.registerForPluginStateChange=function(d){return d({pluginStatus:fo,pluginURL:ma}),Ul.on("pluginStateChange",d),d},h.renderColorRamp=wl,h.rotateX=function(d,a,g){var x=Math.sin(g),T=Math.cos(g),D=a[4],O=a[5],Z=a[6],ee=a[7],ue=a[8],_e=a[9],Ce=a[10],Ue=a[11];return a!==d&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]),d[4]=D*T+ue*x,d[5]=O*T+_e*x,d[6]=Z*T+Ce*x,d[7]=ee*T+Ue*x,d[8]=ue*T-D*x,d[9]=_e*T-O*x,d[10]=Ce*T-Z*x,d[11]=Ue*T-ee*x,d},h.rotateZ=function(d,a,g){var x=Math.sin(g),T=Math.cos(g),D=a[0],O=a[1],Z=a[2],ee=a[3],ue=a[4],_e=a[5],Ce=a[6],Ue=a[7];return a!==d&&(d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]),d[0]=D*T+ue*x,d[1]=O*T+_e*x,d[2]=Z*T+Ce*x,d[3]=ee*T+Ue*x,d[4]=ue*T-D*x,d[5]=_e*T-O*x,d[6]=Ce*T-Z*x,d[7]=Ue*T-ee*x,d},h.scale=function(d,a,g){var x=g[0],T=g[1],D=g[2];return d[0]=a[0]*x,d[1]=a[1]*x,d[2]=a[2]*x,d[3]=a[3]*x,d[4]=a[4]*T,d[5]=a[5]*T,d[6]=a[6]*T,d[7]=a[7]*T,d[8]=a[8]*D,d[9]=a[9]*D,d[10]=a[10]*D,d[11]=a[11]*D,d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15],d},h.scale$1=function(d,a,g){return d[0]=a[0]*g,d[1]=a[1]*g,d[2]=a[2]*g,d},h.setCacheLimits=function(d,a){ve=d,it=a},h.setRTLTextPlugin=function(d,a,g=!1){if(fo===rc||fo===wu||fo===yo)throw new Error("setRTLTextPlugin cannot be called multiple times.");ma=_t.resolveURL(d),fo=rc,xs=a,jl(),g||Dn()},h.spec=Y,h.sphericalToCartesian=function([d,a,g]){return a+=90,a*=Math.PI/180,g*=Math.PI/180,{x:d*Math.cos(a)*Math.sin(g),y:d*Math.sin(a)*Math.sin(g),z:d*Math.cos(g)}},h.sqrLen=function(d){var a=d[0],g=d[1];return a*a+g*g},h.sub=function(d,a,g){return d[0]=a[0]-g[0],d[1]=a[1]-g[1],d[2]=a[2]-g[2],d},h.toEvaluationFeature=Fa,h.transformMat3=function(d,a,g){var x=a[0],T=a[1],D=a[2];return d[0]=x*g[0]+T*g[3]+D*g[6],d[1]=x*g[1]+T*g[4]+D*g[7],d[2]=x*g[2]+T*g[5]+D*g[8],d},h.transformMat4=lc,h.transformMat4$1=function(d,a,g){var x=a[0],T=a[1];return d[0]=g[0]*x+g[4]*T+g[12],d[1]=g[1]*x+g[5]*T+g[13],d},h.translate=function(d,a,g){var x,T,D,O,Z,ee,ue,_e,Ce,Ue,Ze,Ye,Dt=g[0],Lt=g[1],oi=g[2];return a===d?(d[12]=a[0]*Dt+a[4]*Lt+a[8]*oi+a[12],d[13]=a[1]*Dt+a[5]*Lt+a[9]*oi+a[13],d[14]=a[2]*Dt+a[6]*Lt+a[10]*oi+a[14],d[15]=a[3]*Dt+a[7]*Lt+a[11]*oi+a[15]):(T=a[1],D=a[2],O=a[3],Z=a[4],ee=a[5],ue=a[6],_e=a[7],Ce=a[8],Ue=a[9],Ze=a[10],Ye=a[11],d[0]=x=a[0],d[1]=T,d[2]=D,d[3]=O,d[4]=Z,d[5]=ee,d[6]=ue,d[7]=_e,d[8]=Ce,d[9]=Ue,d[10]=Ze,d[11]=Ye,d[12]=x*Dt+Z*Lt+Ce*oi+a[12],d[13]=T*Dt+ee*Lt+Ue*oi+a[13],d[14]=D*Dt+ue*Lt+Ze*oi+a[14],d[15]=O*Dt+_e*Lt+Ye*oi+a[15]),d},h.triggerPluginCompletionEvent=xu,h.unicodeBlockLookup=ir,h.uniqueId=function(){return J++},h.validateCustomStyleLayer=function(d){const a=[],g=d.id;return g===void 0&&a.push({message:`layers.${g}: missing required property "id"`}),d.render===void 0&&a.push({message:`layers.${g}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&a.push({message:`layers.${g}: property "renderingMode" must be either "2d" or "3d"`}),a},h.validateLight=Qa,h.validateStyle=qs,h.vectorTile=cc,h.warnOnce=be,h.wrap=B}),m(["./shared"],function(h){function E(de){const fe=typeof de;if(fe==="number"||fe==="boolean"||fe==="string"||de==null)return JSON.stringify(de);if(Array.isArray(de)){let et="[";for(const wt of de)et+=`${E(wt)},`;return`${et}]`}const Te=Object.keys(de).sort();let Ke="{";for(let et=0;et<Te.length;et++)Ke+=`${JSON.stringify(Te[et])}:${E(de[Te[et]])},`;return`${Ke}}`}function L(de){let fe="";for(const Te of h.refProperties)fe+=`/${E(de[Te])}`;return fe}class z{constructor(fe){this.keyCache={},fe&&this.replace(fe)}replace(fe){this._layerConfigs={},this._layers={},this.update(fe,[])}update(fe,Te){for(const et of fe){this._layerConfigs[et.id]=et;const wt=this._layers[et.id]=h.createStyleLayer(et);wt._featureFilter=h.createFilter(wt.filter),this.keyCache[et.id]&&delete this.keyCache[et.id]}for(const et of Te)delete this.keyCache[et],delete this._layerConfigs[et],delete this._layers[et];this.familiesBySource={};const Ke=function(et,wt){const De={};for(let Tt=0;Tt<et.length;Tt++){const jt=wt&&wt[et[Tt].id]||L(et[Tt]);wt&&(wt[et[Tt].id]=jt);let ki=De[jt];ki||(ki=De[jt]=[]),ki.push(et[Tt])}const Nt=[];for(const Tt in De)Nt.push(De[Tt]);return Nt}(Object.values(this._layerConfigs),this.keyCache);for(const et of Ke){const wt=et.map(Ri=>this._layers[Ri.id]),De=wt[0];if(De.visibility==="none")continue;const Nt=De.source||"";let Tt=this.familiesBySource[Nt];Tt||(Tt=this.familiesBySource[Nt]={});const jt=De.sourceLayer||"_geojsonTileLayer";let ki=Tt[jt];ki||(ki=Tt[jt]=[]),ki.push(wt)}}}class U{constructor(fe){const Te={},Ke=[];for(const Nt in fe){const Tt=fe[Nt],jt=Te[Nt]={};for(const ki in Tt){const Ri=Tt[+ki];if(!Ri||Ri.bitmap.width===0||Ri.bitmap.height===0)continue;const wi={x:0,y:0,w:Ri.bitmap.width+2,h:Ri.bitmap.height+2};Ke.push(wi),jt[ki]={rect:wi,metrics:Ri.metrics}}}const{w:et,h:wt}=h.potpack(Ke),De=new h.AlphaImage({width:et||1,height:wt||1});for(const Nt in fe){const Tt=fe[Nt];for(const jt in Tt){const ki=Tt[+jt];if(!ki||ki.bitmap.width===0||ki.bitmap.height===0)continue;const Ri=Te[Nt][jt].rect;h.AlphaImage.copy(ki.bitmap,De,{x:0,y:0},{x:Ri.x+1,y:Ri.y+1},ki.bitmap)}}this.image=De,this.positions=Te}}h.register("GlyphAtlas",U);class q{constructor(fe){this.tileID=new h.OverscaledTileID(fe.tileID.overscaledZ,fe.tileID.wrap,fe.tileID.canonical.z,fe.tileID.canonical.x,fe.tileID.canonical.y),this.uid=fe.uid,this.zoom=fe.zoom,this.pixelRatio=fe.pixelRatio,this.tileSize=fe.tileSize,this.source=fe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=fe.showCollisionBoxes,this.collectResourceTiming=!!fe.collectResourceTiming,this.returnDependencies=!!fe.returnDependencies,this.promoteId=fe.promoteId}parse(fe,Te,Ke,et,wt){this.status="parsing",this.data=fe,this.collisionBoxArray=new h.CollisionBoxArray;const De=new h.DictionaryCoder(Object.keys(fe.layers).sort()),Nt=new h.FeatureIndex(this.tileID,this.promoteId);Nt.bucketLayerIDs=[];const Tt={},jt={featureIndex:Nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ke},ki=Te.familiesBySource[this.source];for(const $r in ki){const un=fe.layers[$r];if(!un)continue;un.version===1&&h.warnOnce(`Vector tile source "${this.source}" layer "${$r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bn=De.encode($r),On=[];for(let _o=0;_o<un.length;_o++){const qn=un.feature(_o),bo=Nt.getId(qn,$r);On.push({feature:qn,id:bo,index:_o,sourceLayerIndex:bn})}for(const _o of ki[$r]){const qn=_o[0];qn.source!==this.source&&h.warnOnce(`layer.source = ${qn.source} does not equal this.source = ${this.source}`),qn.minzoom&&this.zoom<Math.floor(qn.minzoom)||qn.maxzoom&&this.zoom>=qn.maxzoom||qn.visibility!=="none"&&(B(_o,this.zoom,Ke),(Tt[qn.id]=qn.createBucket({index:Nt.bucketLayerIDs.length,layers:_o,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bn,sourceID:this.source})).populate(On,jt,this.tileID.canonical),Nt.bucketLayerIDs.push(_o.map(bo=>bo.id)))}}let Ri,wi,kr,Sr;const ji=h.mapObject(jt.glyphDependencies,$r=>Object.keys($r).map(Number));Object.keys(ji).length?et.send("getGlyphs",{uid:this.uid,stacks:ji},($r,un)=>{Ri||(Ri=$r,wi=un,dn.call(this))}):wi={};const Gr=Object.keys(jt.iconDependencies);Gr.length?et.send("getImages",{icons:Gr,source:this.source,tileID:this.tileID,type:"icons"},($r,un)=>{Ri||(Ri=$r,kr=un,dn.call(this))}):kr={};const jr=Object.keys(jt.patternDependencies);function dn(){if(Ri)return wt(Ri);if(wi&&kr&&Sr){const $r=new U(wi),un=new h.ImageAtlas(kr,Sr);for(const bn in Tt){const On=Tt[bn];On instanceof h.SymbolBucket?(B(On.layers,this.zoom,Ke),h.performSymbolLayout({bucket:On,glyphMap:wi,glyphPositions:$r.positions,imageMap:kr,imagePositions:un.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):On.hasPattern&&(On instanceof h.LineBucket||On instanceof h.FillBucket||On instanceof h.FillExtrusionBucket)&&(B(On.layers,this.zoom,Ke),On.addFeatures(jt,this.tileID.canonical,un.patternPositions))}this.status="done",wt(null,{buckets:Object.values(Tt).filter(bn=>!bn.isEmpty()),featureIndex:Nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$r.image,imageAtlas:un,glyphMap:this.returnDependencies?wi:null,iconMap:this.returnDependencies?kr:null,glyphPositions:this.returnDependencies?$r.positions:null})}}jr.length?et.send("getImages",{icons:jr,source:this.source,tileID:this.tileID,type:"patterns"},($r,un)=>{Ri||(Ri=$r,Sr=un,dn.call(this))}):Sr={},dn.call(this)}}function B(de,fe,Te){const Ke=new h.EvaluationParameters(fe);for(const et of de)et.recalculate(Ke,Te)}function K(de,fe){const Te=h.getArrayBuffer(de.request,(Ke,et,wt,De)=>{Ke?fe(Ke):et&&fe(null,{vectorTile:new h.vectorTile.VectorTile(new h.pbf(et)),rawData:et,cacheControl:wt,expires:De})});return()=>{Te.cancel(),fe()}}class J{constructor(fe,Te,Ke,et){this.actor=fe,this.layerIndex=Te,this.availableImages=Ke,this.loadVectorData=et||K,this.loading={},this.loaded={}}loadTile(fe,Te){const Ke=fe.uid;this.loading||(this.loading={});const et=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new h.RequestPerformance(fe.request),wt=this.loading[Ke]=new q(fe);wt.abort=this.loadVectorData(fe,(De,Nt)=>{if(delete this.loading[Ke],De||!Nt)return wt.status="done",this.loaded[Ke]=wt,Te(De);const Tt=Nt.rawData,jt={};Nt.expires&&(jt.expires=Nt.expires),Nt.cacheControl&&(jt.cacheControl=Nt.cacheControl);const ki={};if(et){const Ri=et.finish();Ri&&(ki.resourceTiming=JSON.parse(JSON.stringify(Ri)))}wt.vectorTile=Nt.vectorTile,wt.parse(Nt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ri,wi)=>{if(Ri||!wi)return Te(Ri);Te(null,h.extend({rawTileData:Tt.slice(0)},wi,jt,ki))}),this.loaded=this.loaded||{},this.loaded[Ke]=wt})}reloadTile(fe,Te){const Ke=this.loaded,et=fe.uid,wt=this;if(Ke&&Ke[et]){const De=Ke[et];De.showCollisionBoxes=fe.showCollisionBoxes;const Nt=(Tt,jt)=>{const ki=De.reloadCallback;ki&&(delete De.reloadCallback,De.parse(De.vectorTile,wt.layerIndex,this.availableImages,wt.actor,ki)),Te(Tt,jt)};De.status==="parsing"?De.reloadCallback=Nt:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Nt):Nt())}}abortTile(fe,Te){const Ke=this.loading,et=fe.uid;Ke&&Ke[et]&&Ke[et].abort&&(Ke[et].abort(),delete Ke[et]),Te()}removeTile(fe,Te){const Ke=this.loaded,et=fe.uid;Ke&&Ke[et]&&delete Ke[et],Te()}}class se{constructor(){this.loaded={}}loadTile(fe,Te){const{uid:Ke,encoding:et,rawImageData:wt}=fe,De=h.isImageBitmap(wt)?this.getImageData(wt):wt,Nt=new h.DEMData(Ke,De,et);this.loaded=this.loaded||{},this.loaded[Ke]=Nt,Te(null,Nt)}getImageData(fe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(fe.width,fe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=fe.width,this.offscreenCanvas.height=fe.height,this.offscreenCanvasContext.drawImage(fe,0,0,fe.width,fe.height);const Te=this.offscreenCanvasContext.getImageData(-1,-1,fe.width+2,fe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new h.RGBAImage({width:Te.width,height:Te.height},Te.data)}removeTile(fe){const Te=this.loaded,Ke=fe.uid;Te&&Te[Ke]&&delete Te[Ke]}}var ne=function de(fe,Te){var Ke,et=fe&&fe.type;if(et==="FeatureCollection")for(Ke=0;Ke<fe.features.length;Ke++)de(fe.features[Ke],Te);else if(et==="GeometryCollection")for(Ke=0;Ke<fe.geometries.length;Ke++)de(fe.geometries[Ke],Te);else if(et==="Feature")de(fe.geometry,Te);else if(et==="Polygon")re(fe.coordinates,Te);else if(et==="MultiPolygon")for(Ke=0;Ke<fe.coordinates.length;Ke++)re(fe.coordinates[Ke],Te);return fe};function re(de,fe){if(de.length!==0){ke(de[0],fe);for(var Te=1;Te<de.length;Te++)ke(de[Te],!fe)}}function ke(de,fe){for(var Te=0,Ke=0,et=0,wt=de.length,De=wt-1;et<wt;De=et++){var Nt=(de[et][0]-de[De][0])*(de[De][1]+de[et][1]),Tt=Te+Nt;Ke+=Math.abs(Te)>=Math.abs(Nt)?Te-Tt+Nt:Nt-Tt+Te,Te=Tt}Te+Ke>=0!=!!fe&&de.reverse()}const Pe=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class be{constructor(fe){this._feature=fe,this.extent=h.EXTENT,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const Te of this._feature.geometry)fe.push([new h.pointGeometry(Te[0],Te[1])]);return fe}{const fe=[];for(const Te of this._feature.geometry){const Ke=[];for(const et of Te)Ke.push(new h.pointGeometry(et[0],et[1]));fe.push(Ke)}return fe}}toGeoJSON(fe,Te,Ke){return Pe.call(this,fe,Te,Ke)}}class pe{constructor(fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=fe.length,this._features=fe}feature(fe){return new be(this._features[fe])}}var ye={exports:{}},me=h.pointGeometry,tt=h.vectorTile.VectorTileFeature,nt=Se;function Se(de,fe){this.options=fe||{},this.features=de,this.length=de.length}function Me(de,fe){this.id=typeof de.id=="number"?de.id:void 0,this.type=de.type,this.rawGeometry=de.type===1?[de.geometry]:de.geometry,this.properties=de.tags,this.extent=fe||4096}Se.prototype.feature=function(de){return new Me(this.features[de],this.options.extent)},Me.prototype.loadGeometry=function(){var de=this.rawGeometry;this.geometry=[];for(var fe=0;fe<de.length;fe++){for(var Te=de[fe],Ke=[],et=0;et<Te.length;et++)Ke.push(new me(Te[et][0],Te[et][1]));this.geometry.push(Ke)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var de=this.geometry,fe=1/0,Te=-1/0,Ke=1/0,et=-1/0,wt=0;wt<de.length;wt++)for(var De=de[wt],Nt=0;Nt<De.length;Nt++){var Tt=De[Nt];fe=Math.min(fe,Tt.x),Te=Math.max(Te,Tt.x),Ke=Math.min(Ke,Tt.y),et=Math.max(et,Tt.y)}return[fe,Ke,Te,et]},Me.prototype.toGeoJSON=tt.prototype.toGeoJSON;var Ge=h.pbf,Xe=nt;function _t(de){var fe=new Ge;return function(Te,Ke){for(var et in Te.layers)Ke.writeMessage(3,pt,Te.layers[et])}(de,fe),fe.finish()}function pt(de,fe){var Te;fe.writeVarintField(15,de.version||1),fe.writeStringField(1,de.name||""),fe.writeVarintField(5,de.extent||4096);var Ke={keys:[],values:[],keycache:{},valuecache:{}};for(Te=0;Te<de.length;Te++)Ke.feature=de.feature(Te),fe.writeMessage(2,Gt,Ke);var et=Ke.keys;for(Te=0;Te<et.length;Te++)fe.writeStringField(3,et[Te]);var wt=Ke.values;for(Te=0;Te<wt.length;Te++)fe.writeMessage(4,ve,wt[Te])}function Gt(de,fe){var Te=de.feature;Te.id!==void 0&&fe.writeVarintField(1,Te.id),fe.writeMessage(2,kt,de),fe.writeVarintField(3,Te.type),fe.writeMessage(4,qt,Te)}function kt(de,fe){var Te=de.feature,Ke=de.keys,et=de.values,wt=de.keycache,De=de.valuecache;for(var Nt in Te.properties){var Tt=Te.properties[Nt],jt=wt[Nt];if(Tt!==null){jt===void 0&&(Ke.push(Nt),wt[Nt]=jt=Ke.length-1),fe.writeVarint(jt);var ki=typeof Tt;ki!=="string"&&ki!=="boolean"&&ki!=="number"&&(Tt=JSON.stringify(Tt));var Ri=ki+":"+Tt,wi=De[Ri];wi===void 0&&(et.push(Tt),De[Ri]=wi=et.length-1),fe.writeVarint(wi)}}}function Xt(de,fe){return(fe<<3)+(7&de)}function Mt(de){return de<<1^de>>31}function qt(de,fe){for(var Te=de.loadGeometry(),Ke=de.type,et=0,wt=0,De=Te.length,Nt=0;Nt<De;Nt++){var Tt=Te[Nt],jt=1;Ke===1&&(jt=Tt.length),fe.writeVarint(Xt(1,jt));for(var ki=Ke===3?Tt.length-1:Tt.length,Ri=0;Ri<ki;Ri++){Ri===1&&Ke!==1&&fe.writeVarint(Xt(2,ki-1));var wi=Tt[Ri].x-et,kr=Tt[Ri].y-wt;fe.writeVarint(Mt(wi)),fe.writeVarint(Mt(kr)),et+=wi,wt+=kr}Ke===3&&fe.writeVarint(Xt(7,1))}}function ve(de,fe){var Te=typeof de;Te==="string"?fe.writeStringField(1,de):Te==="boolean"?fe.writeBooleanField(7,de):Te==="number"&&(de%1!=0?fe.writeDoubleField(3,de):de<0?fe.writeSVarintField(6,de):fe.writeVarintField(5,de))}function it(de,fe,Te,Ke,et,wt){if(et-Ke<=Te)return;const De=Ke+et>>1;Re(de,fe,De,Ke,et,wt%2),it(de,fe,Te,Ke,De-1,wt+1),it(de,fe,Te,De+1,et,wt+1)}function Re(de,fe,Te,Ke,et,wt){for(;et>Ke;){if(et-Ke>600){const jt=et-Ke+1,ki=Te-Ke+1,Ri=Math.log(jt),wi=.5*Math.exp(2*Ri/3),kr=.5*Math.sqrt(Ri*wi*(jt-wi)/jt)*(ki-jt/2<0?-1:1);Re(de,fe,Te,Math.max(Ke,Math.floor(Te-ki*wi/jt+kr)),Math.min(et,Math.floor(Te+(jt-ki)*wi/jt+kr)),wt)}const De=fe[2*Te+wt];let Nt=Ke,Tt=et;for(bt(de,fe,Ke,Te),fe[2*et+wt]>De&&bt(de,fe,Ke,et);Nt<Tt;){for(bt(de,fe,Nt,Tt),Nt++,Tt--;fe[2*Nt+wt]<De;)Nt++;for(;fe[2*Tt+wt]>De;)Tt--}fe[2*Ke+wt]===De?bt(de,fe,Ke,Tt):(Tt++,bt(de,fe,Tt,et)),Tt<=Te&&(Ke=Tt+1),Te<=Tt&&(et=Tt-1)}}function bt(de,fe,Te,Ke){Ct(de,Te,Ke),Ct(fe,2*Te,2*Ke),Ct(fe,2*Te+1,2*Ke+1)}function Ct(de,fe,Te){const Ke=de[fe];de[fe]=de[Te],de[Te]=Ke}function Ot(de,fe,Te,Ke){const et=de-Te,wt=fe-Ke;return et*et+wt*wt}ye.exports=_t,ye.exports.fromVectorTileJs=_t,ye.exports.fromGeojsonVt=function(de,fe){fe=fe||{};var Te={};for(var Ke in de)Te[Ke]=new Xe(de[Ke].features,fe),Te[Ke].name=Ke,Te[Ke].version=fe.version,Te[Ke].extent=fe.extent;return _t({layers:Te})},ye.exports.GeoJSONWrapper=Xe;const Ht=de=>de[0],Wt=de=>de[1];class si{constructor(fe,Te=Ht,Ke=Wt,et=64,wt=Float64Array){this.nodeSize=et,this.points=fe;const De=fe.length<65536?Uint16Array:Uint32Array,Nt=this.ids=new De(fe.length),Tt=this.coords=new wt(2*fe.length);for(let jt=0;jt<fe.length;jt++)Nt[jt]=jt,Tt[2*jt]=Te(fe[jt]),Tt[2*jt+1]=Ke(fe[jt]);it(Nt,Tt,et,0,Nt.length-1,0)}range(fe,Te,Ke,et){return function(wt,De,Nt,Tt,jt,ki,Ri){const wi=[0,wt.length-1,0],kr=[];let Sr,ji;for(;wi.length;){const Gr=wi.pop(),jr=wi.pop(),dn=wi.pop();if(jr-dn<=Ri){for(let bn=dn;bn<=jr;bn++)Sr=De[2*bn],ji=De[2*bn+1],Sr>=Nt&&Sr<=jt&&ji>=Tt&&ji<=ki&&kr.push(wt[bn]);continue}const $r=Math.floor((dn+jr)/2);Sr=De[2*$r],ji=De[2*$r+1],Sr>=Nt&&Sr<=jt&&ji>=Tt&&ji<=ki&&kr.push(wt[$r]);const un=(Gr+1)%2;(Gr===0?Nt<=Sr:Tt<=ji)&&(wi.push(dn),wi.push($r-1),wi.push(un)),(Gr===0?jt>=Sr:ki>=ji)&&(wi.push($r+1),wi.push(jr),wi.push(un))}return kr}(this.ids,this.coords,fe,Te,Ke,et,this.nodeSize)}within(fe,Te,Ke){return function(et,wt,De,Nt,Tt,jt){const ki=[0,et.length-1,0],Ri=[],wi=Tt*Tt;for(;ki.length;){const kr=ki.pop(),Sr=ki.pop(),ji=ki.pop();if(Sr-ji<=jt){for(let un=ji;un<=Sr;un++)Ot(wt[2*un],wt[2*un+1],De,Nt)<=wi&&Ri.push(et[un]);continue}const Gr=Math.floor((ji+Sr)/2),jr=wt[2*Gr],dn=wt[2*Gr+1];Ot(jr,dn,De,Nt)<=wi&&Ri.push(et[Gr]);const $r=(kr+1)%2;(kr===0?De-Tt<=jr:Nt-Tt<=dn)&&(ki.push(ji),ki.push(Gr-1),ki.push($r)),(kr===0?De+Tt>=jr:Nt+Tt>=dn)&&(ki.push(Gr+1),ki.push(Sr),ki.push($r))}return Ri}(this.ids,this.coords,fe,Te,Ke,this.nodeSize)}}const ri={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:de=>de},zi=Math.fround||(Di=new Float32Array(1),de=>(Di[0]=+de,Di[0]));var Di;class er{constructor(fe){this.options=Ui(Object.create(ri),fe),this.trees=new Array(this.options.maxZoom+1)}load(fe){const{log:Te,minZoom:Ke,maxZoom:et,nodeSize:wt}=this.options;Te&&console.time("total time");const De=`prepare ${fe.length} points`;Te&&console.time(De),this.points=fe;let Nt=[];for(let Tt=0;Tt<fe.length;Tt++)fe[Tt].geometry&&Nt.push(yt(fe[Tt],Tt));this.trees[et+1]=new si(Nt,Qt,lr,wt,Float32Array),Te&&console.timeEnd(De);for(let Tt=et;Tt>=Ke;Tt--){const jt=+Date.now();Nt=this._cluster(Nt,Tt),this.trees[Tt]=new si(Nt,Qt,lr,wt,Float32Array),Te&&console.log("z%d: %d clusters in %dms",Tt,Nt.length,+Date.now()-jt)}return Te&&console.timeEnd("total time"),this}getClusters(fe,Te){let Ke=((fe[0]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,fe[1]));let wt=fe[2]===180?180:((fe[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,fe[3]));if(fe[2]-fe[0]>=360)Ke=-180,wt=180;else if(Ke>wt){const ki=this.getClusters([Ke,et,180,De],Te),Ri=this.getClusters([-180,et,wt,De],Te);return ki.concat(Ri)}const Nt=this.trees[this._limitZoom(Te)],Tt=Nt.range(di(Ke),Hi(De),di(wt),Hi(et)),jt=[];for(const ki of Tt){const Ri=Nt.points[ki];jt.push(Ri.numPoints?$i(Ri):this.points[Ri.index])}return jt}getChildren(fe){const Te=this._getOriginId(fe),Ke=this._getOriginZoom(fe),et="No cluster with the specified id.",wt=this.trees[Ke];if(!wt)throw new Error(et);const De=wt.points[Te];if(!De)throw new Error(et);const Nt=this.options.radius/(this.options.extent*Math.pow(2,Ke-1)),Tt=wt.within(De.x,De.y,Nt),jt=[];for(const ki of Tt){const Ri=wt.points[ki];Ri.parentId===fe&&jt.push(Ri.numPoints?$i(Ri):this.points[Ri.index])}if(jt.length===0)throw new Error(et);return jt}getLeaves(fe,Te,Ke){const et=[];return this._appendLeaves(et,fe,Te=Te||10,Ke=Ke||0,0),et}getTile(fe,Te,Ke){const et=this.trees[this._limitZoom(fe)],wt=Math.pow(2,fe),{extent:De,radius:Nt}=this.options,Tt=Nt/De,jt=(Ke-Tt)/wt,ki=(Ke+1+Tt)/wt,Ri={features:[]};return this._addTileFeatures(et.range((Te-Tt)/wt,jt,(Te+1+Tt)/wt,ki),et.points,Te,Ke,wt,Ri),Te===0&&this._addTileFeatures(et.range(1-Tt/wt,jt,1,ki),et.points,wt,Ke,wt,Ri),Te===wt-1&&this._addTileFeatures(et.range(0,jt,Tt/wt,ki),et.points,-1,Ke,wt,Ri),Ri.features.length?Ri:null}getClusterExpansionZoom(fe){let Te=this._getOriginZoom(fe)-1;for(;Te<=this.options.maxZoom;){const Ke=this.getChildren(fe);if(Te++,Ke.length!==1)break;fe=Ke[0].properties.cluster_id}return Te}_appendLeaves(fe,Te,Ke,et,wt){const De=this.getChildren(Te);for(const Nt of De){const Tt=Nt.properties;if(Tt&&Tt.cluster?wt+Tt.point_count<=et?wt+=Tt.point_count:wt=this._appendLeaves(fe,Tt.cluster_id,Ke,et,wt):wt<et?wt++:fe.push(Nt),fe.length===Ke)break}return wt}_addTileFeatures(fe,Te,Ke,et,wt,De){for(const Nt of fe){const Tt=Te[Nt],jt=Tt.numPoints;let ki,Ri,wi;if(jt)ki=nr(Tt),Ri=Tt.x,wi=Tt.y;else{const ji=this.points[Tt.index];ki=ji.properties,Ri=di(ji.geometry.coordinates[0]),wi=Hi(ji.geometry.coordinates[1])}const kr={type:1,geometry:[[Math.round(this.options.extent*(Ri*wt-Ke)),Math.round(this.options.extent*(wi*wt-et))]],tags:ki};let Sr;jt?Sr=Tt.id:this.options.generateId?Sr=Tt.index:this.points[Tt.index].id&&(Sr=this.points[Tt.index].id),Sr!==void 0&&(kr.id=Sr),De.features.push(kr)}}_limitZoom(fe){return Math.max(this.options.minZoom,Math.min(Math.floor(+fe),this.options.maxZoom+1))}_cluster(fe,Te){const Ke=[],{radius:et,extent:wt,reduce:De,minPoints:Nt}=this.options,Tt=et/(wt*Math.pow(2,Te));for(let jt=0;jt<fe.length;jt++){const ki=fe[jt];if(ki.zoom<=Te)continue;ki.zoom=Te;const Ri=this.trees[Te+1],wi=Ri.within(ki.x,ki.y,Tt),kr=ki.numPoints||1;let Sr=kr;for(const ji of wi){const Gr=Ri.points[ji];Gr.zoom>Te&&(Sr+=Gr.numPoints||1)}if(Sr>kr&&Sr>=Nt){let ji=ki.x*kr,Gr=ki.y*kr,jr=De&&kr>1?this._map(ki,!0):null;const dn=(jt<<5)+(Te+1)+this.points.length;for(const $r of wi){const un=Ri.points[$r];if(un.zoom<=Te)continue;un.zoom=Te;const bn=un.numPoints||1;ji+=un.x*bn,Gr+=un.y*bn,un.parentId=dn,De&&(jr||(jr=this._map(ki,!0)),De(jr,this._map(un)))}ki.parentId=dn,Ke.push(Zt(ji/Sr,Gr/Sr,dn,Sr,jr))}else if(Ke.push(ki),Sr>1)for(const ji of wi){const Gr=Ri.points[ji];Gr.zoom<=Te||(Gr.zoom=Te,Ke.push(Gr))}}return Ke}_getOriginId(fe){return fe-this.points.length>>5}_getOriginZoom(fe){return(fe-this.points.length)%32}_map(fe,Te){if(fe.numPoints)return Te?Ui({},fe.properties):fe.properties;const Ke=this.points[fe.index].properties,et=this.options.map(Ke);return Te&&et===Ke?Ui({},et):et}}function Zt(de,fe,Te,Ke,et){return{x:zi(de),y:zi(fe),zoom:1/0,id:Te,parentId:-1,numPoints:Ke,properties:et}}function yt(de,fe){const[Te,Ke]=de.geometry.coordinates;return{x:zi(di(Te)),y:zi(Hi(Ke)),zoom:1/0,index:fe,parentId:-1}}function $i(de){return{type:"Feature",id:de.id,properties:nr(de),geometry:{type:"Point",coordinates:[(fe=de.x,360*(fe-.5)),Ki(de.y)]}};var fe}function nr(de){const fe=de.numPoints,Te=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe;return Ui(Ui({},de.properties),{cluster:!0,cluster_id:de.id,point_count:fe,point_count_abbreviated:Te})}function di(de){return de/360+.5}function Hi(de){const fe=Math.sin(de*Math.PI/180),Te=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return Te<0?0:Te>1?1:Te}function Ki(de){const fe=(180-360*de)*Math.PI/180;return 360*Math.atan(Math.exp(fe))/Math.PI-90}function Ui(de,fe){for(const Te in fe)de[Te]=fe[Te];return de}function Qt(de){return de.x}function lr(de){return de.y}function pi(de,fe,Te,Ke){for(var et,wt=Ke,De=Te-fe>>1,Nt=Te-fe,Tt=de[fe],jt=de[fe+1],ki=de[Te],Ri=de[Te+1],wi=fe+3;wi<Te;wi+=3){var kr=Dr(de[wi],de[wi+1],Tt,jt,ki,Ri);if(kr>wt)et=wi,wt=kr;else if(kr===wt){var Sr=Math.abs(wi-De);Sr<Nt&&(et=wi,Nt=Sr)}}wt>Ke&&(et-fe>3&&pi(de,fe,et,Ke),de[et+2]=wt,Te-et>3&&pi(de,et,Te,Ke))}function Dr(de,fe,Te,Ke,et,wt){var De=et-Te,Nt=wt-Ke;if(De!==0||Nt!==0){var Tt=((de-Te)*De+(fe-Ke)*Nt)/(De*De+Nt*Nt);Tt>1?(Te=et,Ke=wt):Tt>0&&(Te+=De*Tt,Ke+=Nt*Tt)}return(De=de-Te)*De+(Nt=fe-Ke)*Nt}function ze(de,fe,Te,Ke){var et={id:de===void 0?null:de,type:fe,geometry:Te,tags:Ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(wt){var De=wt.geometry,Nt=wt.type;if(Nt==="Point"||Nt==="MultiPoint"||Nt==="LineString")Y(wt,De);else if(Nt==="Polygon"||Nt==="MultiLineString")for(var Tt=0;Tt<De.length;Tt++)Y(wt,De[Tt]);else if(Nt==="MultiPolygon")for(Tt=0;Tt<De.length;Tt++)for(var jt=0;jt<De[Tt].length;jt++)Y(wt,De[Tt][jt])}(et),et}function Y(de,fe){for(var Te=0;Te<fe.length;Te+=3)de.minX=Math.min(de.minX,fe[Te]),de.minY=Math.min(de.minY,fe[Te+1]),de.maxX=Math.max(de.maxX,fe[Te]),de.maxY=Math.max(de.maxY,fe[Te+1])}function te(de,fe,Te,Ke){if(fe.geometry){var et=fe.geometry.coordinates,wt=fe.geometry.type,De=Math.pow(Te.tolerance/((1<<Te.maxZoom)*Te.extent),2),Nt=[],Tt=fe.id;if(Te.promoteId?Tt=fe.properties[Te.promoteId]:Te.generateId&&(Tt=Ke||0),wt==="Point")je(et,Nt);else if(wt==="MultiPoint")for(var jt=0;jt<et.length;jt++)je(et[jt],Nt);else if(wt==="LineString")ot(et,Nt,De,!1);else if(wt==="MultiLineString"){if(Te.lineMetrics){for(jt=0;jt<et.length;jt++)ot(et[jt],Nt=[],De,!1),de.push(ze(Tt,"LineString",Nt,fe.properties));return}mt(et,Nt,De,!1)}else if(wt==="Polygon")mt(et,Nt,De,!0);else{if(wt!=="MultiPolygon"){if(wt==="GeometryCollection"){for(jt=0;jt<fe.geometry.geometries.length;jt++)te(de,{id:Tt,geometry:fe.geometry.geometries[jt],properties:fe.properties},Te,Ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(jt=0;jt<et.length;jt++){var ki=[];mt(et[jt],ki,De,!0),Nt.push(ki)}}de.push(ze(Tt,wt,Nt,fe.properties))}}function je(de,fe){fe.push(Jt(de[0])),fe.push(hr(de[1])),fe.push(0)}function ot(de,fe,Te,Ke){for(var et,wt,De=0,Nt=0;Nt<de.length;Nt++){var Tt=Jt(de[Nt][0]),jt=hr(de[Nt][1]);fe.push(Tt),fe.push(jt),fe.push(0),Nt>0&&(De+=Ke?(et*jt-Tt*wt)/2:Math.sqrt(Math.pow(Tt-et,2)+Math.pow(jt-wt,2))),et=Tt,wt=jt}var ki=fe.length-3;fe[2]=1,pi(fe,0,ki,Te),fe[ki+2]=1,fe.size=Math.abs(De),fe.start=0,fe.end=fe.size}function mt(de,fe,Te,Ke){for(var et=0;et<de.length;et++){var wt=[];ot(de[et],wt,Te,Ke),fe.push(wt)}}function Jt(de){return de/360+.5}function hr(de){var fe=Math.sin(de*Math.PI/180),Te=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return Te<0?0:Te>1?1:Te}function xr(de,fe,Te,Ke,et,wt,De,Nt){if(Ke/=fe,wt>=(Te/=fe)&&De<Ke)return de;if(De<Te||wt>=Ke)return null;for(var Tt=[],jt=0;jt<de.length;jt++){var ki=de[jt],Ri=ki.geometry,wi=ki.type,kr=et===0?ki.minX:ki.minY,Sr=et===0?ki.maxX:ki.maxY;if(kr>=Te&&Sr<Ke)Tt.push(ki);else if(!(Sr<Te||kr>=Ke)){var ji=[];if(wi==="Point"||wi==="MultiPoint")or(Ri,ji,Te,Ke,et);else if(wi==="LineString")Ei(Ri,ji,Te,Ke,et,!1,Nt.lineMetrics);else if(wi==="MultiLineString")Br(Ri,ji,Te,Ke,et,!1);else if(wi==="Polygon")Br(Ri,ji,Te,Ke,et,!0);else if(wi==="MultiPolygon")for(var Gr=0;Gr<Ri.length;Gr++){var jr=[];Br(Ri[Gr],jr,Te,Ke,et,!0),jr.length&&ji.push(jr)}if(ji.length){if(Nt.lineMetrics&&wi==="LineString"){for(Gr=0;Gr<ji.length;Gr++)Tt.push(ze(ki.id,wi,ji[Gr],ki.tags));continue}wi!=="LineString"&&wi!=="MultiLineString"||(ji.length===1?(wi="LineString",ji=ji[0]):wi="MultiLineString"),wi!=="Point"&&wi!=="MultiPoint"||(wi=ji.length===3?"Point":"MultiPoint"),Tt.push(ze(ki.id,wi,ji,ki.tags))}}}return Tt.length?Tt:null}function or(de,fe,Te,Ke,et){for(var wt=0;wt<de.length;wt+=3){var De=de[wt+et];De>=Te&&De<=Ke&&(fe.push(de[wt]),fe.push(de[wt+1]),fe.push(de[wt+2]))}}function Ei(de,fe,Te,Ke,et,wt,De){for(var Nt,Tt,jt=Wi(de),ki=et===0?Pn:Vr,Ri=de.start,wi=0;wi<de.length-3;wi+=3){var kr=de[wi],Sr=de[wi+1],ji=de[wi+2],Gr=de[wi+3],jr=de[wi+4],dn=et===0?kr:Sr,$r=et===0?Gr:jr,un=!1;De&&(Nt=Math.sqrt(Math.pow(kr-Gr,2)+Math.pow(Sr-jr,2))),dn<Te?$r>Te&&(Tt=ki(jt,kr,Sr,Gr,jr,Te),De&&(jt.start=Ri+Nt*Tt)):dn>Ke?$r<Ke&&(Tt=ki(jt,kr,Sr,Gr,jr,Ke),De&&(jt.start=Ri+Nt*Tt)):Zr(jt,kr,Sr,ji),$r<Te&&dn>=Te&&(Tt=ki(jt,kr,Sr,Gr,jr,Te),un=!0),$r>Ke&&dn<=Ke&&(Tt=ki(jt,kr,Sr,Gr,jr,Ke),un=!0),!wt&&un&&(De&&(jt.end=Ri+Nt*Tt),fe.push(jt),jt=Wi(de)),De&&(Ri+=Nt)}var bn=de.length-3;kr=de[bn],Sr=de[bn+1],ji=de[bn+2],(dn=et===0?kr:Sr)>=Te&&dn<=Ke&&Zr(jt,kr,Sr,ji),bn=jt.length-3,wt&&bn>=3&&(jt[bn]!==jt[0]||jt[bn+1]!==jt[1])&&Zr(jt,jt[0],jt[1],jt[2]),jt.length&&fe.push(jt)}function Wi(de){var fe=[];return fe.size=de.size,fe.start=de.start,fe.end=de.end,fe}function Br(de,fe,Te,Ke,et,wt){for(var De=0;De<de.length;De++)Ei(de[De],fe,Te,Ke,et,wt,!1)}function Zr(de,fe,Te,Ke){de.push(fe),de.push(Te),de.push(Ke)}function Pn(de,fe,Te,Ke,et,wt){var De=(wt-fe)/(Ke-fe);return de.push(wt),de.push(Te+(et-Te)*De),de.push(1),De}function Vr(de,fe,Te,Ke,et,wt){var De=(wt-Te)/(et-Te);return de.push(fe+(Ke-fe)*De),de.push(wt),de.push(1),De}function vn(de,fe){for(var Te=[],Ke=0;Ke<de.length;Ke++){var et,wt=de[Ke],De=wt.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")et=Pr(wt.geometry,fe);else if(De==="MultiLineString"||De==="Polygon"){et=[];for(var Nt=0;Nt<wt.geometry.length;Nt++)et.push(Pr(wt.geometry[Nt],fe))}else if(De==="MultiPolygon")for(et=[],Nt=0;Nt<wt.geometry.length;Nt++){for(var Tt=[],jt=0;jt<wt.geometry[Nt].length;jt++)Tt.push(Pr(wt.geometry[Nt][jt],fe));et.push(Tt)}Te.push(ze(wt.id,De,et,wt.tags))}return Te}function Pr(de,fe){var Te=[];Te.size=de.size,de.start!==void 0&&(Te.start=de.start,Te.end=de.end);for(var Ke=0;Ke<de.length;Ke+=3)Te.push(de[Ke]+fe,de[Ke+1],de[Ke+2]);return Te}function _n(de,fe){if(de.transformed)return de;var Te,Ke,et,wt=1<<de.z,De=de.x,Nt=de.y;for(Te=0;Te<de.features.length;Te++){var Tt=de.features[Te],jt=Tt.geometry,ki=Tt.type;if(Tt.geometry=[],ki===1)for(Ke=0;Ke<jt.length;Ke+=2)Tt.geometry.push(Tn(jt[Ke],jt[Ke+1],fe,wt,De,Nt));else for(Ke=0;Ke<jt.length;Ke++){var Ri=[];for(et=0;et<jt[Ke].length;et+=2)Ri.push(Tn(jt[Ke][et],jt[Ke][et+1],fe,wt,De,Nt));Tt.geometry.push(Ri)}}return de.transformed=!0,de}function Tn(de,fe,Te,Ke,et,wt){return[Math.round(Te*(de*Ke-et)),Math.round(Te*(fe*Ke-wt))]}function Tr(de,fe,Te,Ke,et){for(var wt=fe===et.maxZoom?0:et.tolerance/((1<<fe)*et.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Te,y:Ke,z:fe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Nt=0;Nt<de.length;Nt++){De.numFeatures++,Qr(De,de[Nt],wt,et);var Tt=de[Nt].minX,jt=de[Nt].minY,ki=de[Nt].maxX,Ri=de[Nt].maxY;Tt<De.minX&&(De.minX=Tt),jt<De.minY&&(De.minY=jt),ki>De.maxX&&(De.maxX=ki),Ri>De.maxY&&(De.maxY=Ri)}return De}function Qr(de,fe,Te,Ke){var et=fe.geometry,wt=fe.type,De=[];if(wt==="Point"||wt==="MultiPoint")for(var Nt=0;Nt<et.length;Nt+=3)De.push(et[Nt]),De.push(et[Nt+1]),de.numPoints++,de.numSimplified++;else if(wt==="LineString")Un(De,et,de,Te,!1,!1);else if(wt==="MultiLineString"||wt==="Polygon")for(Nt=0;Nt<et.length;Nt++)Un(De,et[Nt],de,Te,wt==="Polygon",Nt===0);else if(wt==="MultiPolygon")for(var Tt=0;Tt<et.length;Tt++){var jt=et[Tt];for(Nt=0;Nt<jt.length;Nt++)Un(De,jt[Nt],de,Te,!0,Nt===0)}if(De.length){var ki=fe.tags||null;if(wt==="LineString"&&Ke.lineMetrics){for(var Ri in ki={},fe.tags)ki[Ri]=fe.tags[Ri];ki.mapbox_clip_start=et.start/et.size,ki.mapbox_clip_end=et.end/et.size}var wi={geometry:De,type:wt==="Polygon"||wt==="MultiPolygon"?3:wt==="LineString"||wt==="MultiLineString"?2:1,tags:ki};fe.id!==null&&(wi.id=fe.id),de.features.push(wi)}}function Un(de,fe,Te,Ke,et,wt){var De=Ke*Ke;if(Ke>0&&fe.size<(et?De:Ke))Te.numPoints+=fe.length/3;else{for(var Nt=[],Tt=0;Tt<fe.length;Tt+=3)(Ke===0||fe[Tt+2]>De)&&(Te.numSimplified++,Nt.push(fe[Tt]),Nt.push(fe[Tt+1])),Te.numPoints++;et&&function(jt,ki){for(var Ri=0,wi=0,kr=jt.length,Sr=kr-2;wi<kr;Sr=wi,wi+=2)Ri+=(jt[wi]-jt[Sr])*(jt[wi+1]+jt[Sr+1]);if(Ri>0===ki)for(wi=0,kr=jt.length;wi<kr/2;wi+=2){var ji=jt[wi],Gr=jt[wi+1];jt[wi]=jt[kr-2-wi],jt[wi+1]=jt[kr-1-wi],jt[kr-2-wi]=ji,jt[kr-1-wi]=Gr}}(Nt,wt),de.push(Nt)}}function Bi(de,fe){var Te=(fe=this.options=function(et,wt){for(var De in wt)et[De]=wt[De];return et}(Object.create(this.options),fe)).debug;if(Te&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ke=function(et,wt){var De=[];if(et.type==="FeatureCollection")for(var Nt=0;Nt<et.features.length;Nt++)te(De,et.features[Nt],wt,Nt);else te(De,et.type==="Feature"?et:{geometry:et},wt);return De}(de,fe);this.tiles={},this.tileCoords=[],Te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ke=function(et,wt){var De=wt.buffer/wt.extent,Nt=et,Tt=xr(et,1,-1-De,De,0,-1,2,wt),jt=xr(et,1,1-De,2+De,0,-1,2,wt);return(Tt||jt)&&(Nt=xr(et,1,-De,1+De,0,-1,2,wt)||[],Tt&&(Nt=vn(Tt,1).concat(Nt)),jt&&(Nt=Nt.concat(vn(jt,-1)))),Nt}(Ke,fe),Ke.length&&this.splitTile(Ke,0,0,0),Te&&(Ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Le(de,fe,Te){return 32*((1<<de)*Te+fe)+de}function $n(de,fe){const Te=de.tileID.canonical;if(!this._geoJSONIndex)return fe(null,null);const Ke=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!Ke)return fe(null,null);const et=new pe(Ke.features);let wt=ye.exports(et);wt.byteOffset===0&&wt.byteLength===wt.buffer.byteLength||(wt=new Uint8Array(wt)),fe(null,{vectorTile:et,rawData:wt.buffer})}Bi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bi.prototype.splitTile=function(de,fe,Te,Ke,et,wt,De){for(var Nt=[de,fe,Te,Ke],Tt=this.options,jt=Tt.debug;Nt.length;){Ke=Nt.pop(),Te=Nt.pop(),fe=Nt.pop(),de=Nt.pop();var ki=1<<fe,Ri=Le(fe,Te,Ke),wi=this.tiles[Ri];if(!wi&&(jt>1&&console.time("creation"),wi=this.tiles[Ri]=Tr(de,fe,Te,Ke,Tt),this.tileCoords.push({z:fe,x:Te,y:Ke}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,Te,Ke,wi.numFeatures,wi.numPoints,wi.numSimplified),console.timeEnd("creation"));var kr="z"+fe;this.stats[kr]=(this.stats[kr]||0)+1,this.total++}if(wi.source=de,et){if(fe===Tt.maxZoom||fe===et)continue;var Sr=1<<et-fe;if(Te!==Math.floor(wt/Sr)||Ke!==Math.floor(De/Sr))continue}else if(fe===Tt.indexMaxZoom||wi.numPoints<=Tt.indexMaxPoints)continue;if(wi.source=null,de.length!==0){jt>1&&console.time("clipping");var ji,Gr,jr,dn,$r,un,bn=.5*Tt.buffer/Tt.extent,On=.5-bn,_o=.5+bn,qn=1+bn;ji=Gr=jr=dn=null,$r=xr(de,ki,Te-bn,Te+_o,0,wi.minX,wi.maxX,Tt),un=xr(de,ki,Te+On,Te+qn,0,wi.minX,wi.maxX,Tt),de=null,$r&&(ji=xr($r,ki,Ke-bn,Ke+_o,1,wi.minY,wi.maxY,Tt),Gr=xr($r,ki,Ke+On,Ke+qn,1,wi.minY,wi.maxY,Tt),$r=null),un&&(jr=xr(un,ki,Ke-bn,Ke+_o,1,wi.minY,wi.maxY,Tt),dn=xr(un,ki,Ke+On,Ke+qn,1,wi.minY,wi.maxY,Tt),un=null),jt>1&&console.timeEnd("clipping"),Nt.push(ji||[],fe+1,2*Te,2*Ke),Nt.push(Gr||[],fe+1,2*Te,2*Ke+1),Nt.push(jr||[],fe+1,2*Te+1,2*Ke),Nt.push(dn||[],fe+1,2*Te+1,2*Ke+1)}}},Bi.prototype.getTile=function(de,fe,Te){var Ke=this.options,et=Ke.extent,wt=Ke.debug;if(de<0||de>24)return null;var De=1<<de,Nt=Le(de,fe=(fe%De+De)%De,Te);if(this.tiles[Nt])return _n(this.tiles[Nt],et);wt>1&&console.log("drilling down to z%d-%d-%d",de,fe,Te);for(var Tt,jt=de,ki=fe,Ri=Te;!Tt&&jt>0;)jt--,ki=Math.floor(ki/2),Ri=Math.floor(Ri/2),Tt=this.tiles[Le(jt,ki,Ri)];return Tt&&Tt.source?(wt>1&&console.log("found parent tile z%d-%d-%d",jt,ki,Ri),wt>1&&console.time("drilling down"),this.splitTile(Tt.source,jt,ki,Ri,de,fe,Te),wt>1&&console.timeEnd("drilling down"),this.tiles[Nt]?_n(this.tiles[Nt],et):null):null};class eo extends J{constructor(fe,Te,Ke,et){super(fe,Te,Ke,$n),et&&(this.loadGeoJSON=et)}loadData(fe,Te){var Ke;(Ke=this._pendingRequest)===null||Ke===void 0||Ke.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const et=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new h.RequestPerformance(fe.request);this._pendingCallback=Te,this._pendingRequest=this.loadGeoJSON(fe,(wt,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,wt||!De)return Te(wt);if(typeof De!="object")return Te(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));{ne(De,!0);try{if(fe.filter){const Tt=h.createExpression(fe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Tt.result==="error")throw new Error(Tt.value.map(ki=>`${ki.key}: ${ki.message}`).join(", "));const jt=De.features.filter(ki=>Tt.value.evaluate({zoom:0},ki));De={type:"FeatureCollection",features:jt}}this._geoJSONIndex=fe.cluster?new er(function({superclusterOptions:Tt,clusterProperties:jt}){if(!jt||!Tt)return Tt;const ki={},Ri={},wi={accumulated:null,zoom:0},kr={properties:null},Sr=Object.keys(jt);for(const ji of Sr){const[Gr,jr]=jt[ji],dn=h.createExpression(jr),$r=h.createExpression(typeof Gr=="string"?[Gr,["accumulated"],["get",ji]]:Gr);ki[ji]=dn.value,Ri[ji]=$r.value}return Tt.map=ji=>{kr.properties=ji;const Gr={};for(const jr of Sr)Gr[jr]=ki[jr].evaluate(wi,kr);return Gr},Tt.reduce=(ji,Gr)=>{kr.properties=Gr;for(const jr of Sr)wi.accumulated=ji[jr],ji[jr]=Ri[jr].evaluate(wi,kr)},Tt}(fe)).load(De.features):function(Tt,jt){return new Bi(Tt,jt)}(De,fe.geojsonVtOptions)}catch(Tt){return Te(Tt)}this.loaded={};const Nt={};if(et){const Tt=et.finish();Tt&&(Nt.resourceTiming={},Nt.resourceTiming[fe.source]=JSON.parse(JSON.stringify(Tt)))}Te(null,Nt)}})}reloadTile(fe,Te){const Ke=this.loaded;return Ke&&Ke[fe.uid]?super.reloadTile(fe,Te):this.loadTile(fe,Te)}loadGeoJSON(fe,Te){if(fe.request)return h.getJSON(fe.request,Te);if(typeof fe.data=="string")try{Te(null,JSON.parse(fe.data))}catch{Te(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else Te(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(fe,Te){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Te()}getClusterExpansionZoom(fe,Te){try{Te(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Ke){Te(Ke)}}getClusterChildren(fe,Te){try{Te(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Ke){Te(Ke)}}getClusterLeaves(fe,Te){try{Te(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Ke){Te(Ke)}}}class Xn{constructor(fe){this.self=fe,this.actor=new h.Actor(fe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:J,geojson:eo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Te,Ke)=>{if(this.workerSourceTypes[Te])throw new Error(`Worker source with name "${Te}" already registered.`);this.workerSourceTypes[Te]=Ke},this.self.registerRTLTextPlugin=Te=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=Te.applyArabicShaping,h.plugin.processBidirectionalText=Te.processBidirectionalText,h.plugin.processStyledBidirectionalText=Te.processStyledBidirectionalText}}setReferrer(fe,Te){this.referrer=Te}setImages(fe,Te,Ke){this.availableImages[fe]=Te;for(const et in this.workerSources[fe]){const wt=this.workerSources[fe][et];for(const De in wt)wt[De].availableImages=Te}Ke()}setLayers(fe,Te,Ke){this.getLayerIndex(fe).replace(Te),Ke()}updateLayers(fe,Te,Ke){this.getLayerIndex(fe).update(Te.layers,Te.removedIds),Ke()}loadTile(fe,Te,Ke){this.getWorkerSource(fe,Te.type,Te.source).loadTile(Te,Ke)}loadDEMTile(fe,Te,Ke){this.getDEMWorkerSource(fe,Te.source).loadTile(Te,Ke)}reloadTile(fe,Te,Ke){this.getWorkerSource(fe,Te.type,Te.source).reloadTile(Te,Ke)}abortTile(fe,Te,Ke){this.getWorkerSource(fe,Te.type,Te.source).abortTile(Te,Ke)}removeTile(fe,Te,Ke){this.getWorkerSource(fe,Te.type,Te.source).removeTile(Te,Ke)}removeDEMTile(fe,Te){this.getDEMWorkerSource(fe,Te.source).removeTile(Te)}removeSource(fe,Te,Ke){if(!this.workerSources[fe]||!this.workerSources[fe][Te.type]||!this.workerSources[fe][Te.type][Te.source])return;const et=this.workerSources[fe][Te.type][Te.source];delete this.workerSources[fe][Te.type][Te.source],et.removeSource!==void 0?et.removeSource(Te,Ke):Ke()}loadWorkerSource(fe,Te,Ke){try{this.self.importScripts(Te.url),Ke()}catch(et){Ke(et.toString())}}syncRTLPluginState(fe,Te,Ke){try{h.plugin.setState(Te);const et=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&et!=null){this.self.importScripts(et);const wt=h.plugin.isParsed();Ke(wt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${et}`),wt)}}catch(et){Ke(et.toString())}}getAvailableImages(fe){let Te=this.availableImages[fe];return Te||(Te=[]),Te}getLayerIndex(fe){let Te=this.layerIndexes[fe];return Te||(Te=this.layerIndexes[fe]=new z),Te}getWorkerSource(fe,Te,Ke){if(this.workerSources[fe]||(this.workerSources[fe]={}),this.workerSources[fe][Te]||(this.workerSources[fe][Te]={}),!this.workerSources[fe][Te][Ke]){const et={send:(wt,De,Nt)=>{this.actor.send(wt,De,Nt,fe)}};this.workerSources[fe][Te][Ke]=new this.workerSourceTypes[Te](et,this.getLayerIndex(fe),this.getAvailableImages(fe))}return this.workerSources[fe][Te][Ke]}getDEMWorkerSource(fe,Te){return this.demWorkerSources[fe]||(this.demWorkerSources[fe]={}),this.demWorkerSources[fe][Te]||(this.demWorkerSources[fe][Te]=new se),this.demWorkerSources[fe][Te]}enforceCacheSizeLimit(fe,Te){h.enforceCacheSizeLimit(Te)}}return h.isWorker()&&(self.worker=new Xn(self)),Xn}),m(["./shared"],function(h){var E=L;function L(I){return!function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,C,R=new Blob([""],{type:"text/javascript"}),H=URL.createObjectURL(R);try{C=new Worker(H),k=!0}catch{k=!1}return C&&C.terminate(),URL.revokeObjectURL(H),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var C=k.getContext("2d");if(!C)return!1;var R=C.getImageData(0,0,1,1);return R&&R.width===k.width}()?(z[_=u&&u.failIfMajorPerformanceCaveat]===void 0&&(z[_]=function(k){var C,R=function(H){var ie=document.createElement("canvas"),ae=Object.create(L.webGLContextAttributes);return ae.failIfMajorPerformanceCaveat=H,ie.getContext("webgl",ae)||ie.getContext("experimental-webgl",ae)}(k);if(!R)return!1;try{C=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!C||R.isContextLost())&&(R.shaderSource(C,"void main() {}"),R.compileShader(C),R.getShaderParameter(C,R.COMPILE_STATUS)===!0)}(_)),z[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}(I)}var z={};function U(I,u){if(Array.isArray(I)){if(!Array.isArray(u)||I.length!==u.length)return!1;for(let _=0;_<I.length;_++)if(!U(I[_],u[_]))return!1;return!0}if(typeof I=="object"&&I!==null&&u!==null){if(typeof u!="object"||Object.keys(I).length!==Object.keys(u).length)return!1;for(const _ in I)if(!U(I[_],u[_]))return!1;return!0}return I===u}L.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class q{static testProp(u){if(!q.docStyle)return u[0];for(let _=0;_<u.length;_++)if(u[_]in q.docStyle)return u[_];return u[0]}static create(u,_,k){const C=window.document.createElement(u);return _!==void 0&&(C.className=_),k&&k.appendChild(C),C}static createNS(u,_){return window.document.createElementNS(u,_)}static disableDrag(){q.docStyle&&q.selectProp&&(q.userSelect=q.docStyle[q.selectProp],q.docStyle[q.selectProp]="none")}static enableDrag(){q.docStyle&&q.selectProp&&(q.docStyle[q.selectProp]=q.userSelect)}static setTransform(u,_){u.style[q.transformProp]=_}static addEventListener(u,_,k,C={}){u.addEventListener(_,k,"passive"in C?C:C.capture)}static removeEventListener(u,_,k,C={}){u.removeEventListener(_,k,"passive"in C?C:C.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",q.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",q.suppressClickInternal,!0)},0)}static mousePos(u,_){const k=u.getBoundingClientRect();return new h.pointGeometry(_.clientX-k.left-u.clientLeft,_.clientY-k.top-u.clientTop)}static touchPos(u,_){const k=u.getBoundingClientRect(),C=[];for(let R=0;R<_.length;R++)C.push(new h.pointGeometry(_[R].clientX-k.left-u.clientLeft,_[R].clientY-k.top-u.clientTop));return C}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,q.selectProp=q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),q.transformProp=q.testProp(["transform","WebkitTransform"]);class B{constructor(u){this._transformRequestFn=u}transformRequest(u,_){return this._transformRequestFn&&this._transformRequestFn(u,_)||{url:u}}normalizeSpriteURL(u,_,k){const C=function(R){const H=R.match(K);if(!H)throw new Error(`Unable to parse URL "${R}"`);return{protocol:H[1],authority:H[2],path:H[3]||"/",params:H[4]?H[4].split("&"):[]}}(u);return C.path+=`${_}${k}`,function(R){const H=R.params.length?`?${R.params.join("&")}`:"";return`${R.protocol}://${R.authority}${R.path}${H}`}(C)}setTransformRequest(u){this._transformRequestFn=u}}const K=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class J{constructor(u,_,k,C){this.context=u,this.format=k,this.texture=u.gl.createTexture(),this.update(_,C)}update(u,_,k){const{width:C,height:R}=u,H=!(this.size&&this.size[0]===C&&this.size[1]===R||k),{context:ie}=this,{gl:ae}=ie;if(this.useMipmap=Boolean(_&&_.useMipmap),ae.bindTexture(ae.TEXTURE_2D,this.texture),ie.pixelStoreUnpackFlipY.set(!1),ie.pixelStoreUnpack.set(1),ie.pixelStoreUnpackPremultiplyAlpha.set(this.format===ae.RGBA&&(!_||_.premultiply!==!1)),H)this.size=[C,R],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||h.isImageBitmap(u)?ae.texImage2D(ae.TEXTURE_2D,0,this.format,this.format,ae.UNSIGNED_BYTE,u):ae.texImage2D(ae.TEXTURE_2D,0,this.format,C,R,0,this.format,ae.UNSIGNED_BYTE,u.data);else{const{x:he,y:we}=k||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||h.isImageBitmap(u)?ae.texSubImage2D(ae.TEXTURE_2D,0,he,we,ae.RGBA,ae.UNSIGNED_BYTE,u):ae.texSubImage2D(ae.TEXTURE_2D,0,he,we,C,R,ae.RGBA,ae.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ae.generateMipmap(ae.TEXTURE_2D)}bind(u,_,k){const{context:C}=this,{gl:R}=C;R.bindTexture(R.TEXTURE_2D,this.texture),k!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(k=R.LINEAR),u!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,u),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,k||u),this.filter=u),_!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,_),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,_),this.wrap=_)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function se(I){const{userImage:u}=I;return!!(u&&u.render&&u.render())&&(I.data.replace(new Uint8Array(u.data.buffer)),!0)}class ne extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:_,callback:k}of this.requestors)this._notify(_,k);this.requestors=[]}}getImage(u){return this.images[u]}addImage(u,_){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,_)&&(this.images[u]=_)}_validate(u,_){let k=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),k=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),k=!1),this._validateContent(_.content,_)||(this.fire(new h.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),k=!1),k}_validateStretch(u,_){if(!u)return!0;let k=0;for(const C of u){if(C[0]<k||C[1]<C[0]||_<C[1])return!1;k=C[1]}return!0}_validateContent(u,_){return!(u&&(u.length!==4||u[0]<0||_.data.width<u[0]||u[1]<0||_.data.height<u[1]||u[2]<0||_.data.width<u[2]||u[3]<0||_.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,_){const k=this.images[u];if(k.data.width!==_.data.width||k.data.height!==_.data.height)throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${_.data.width}x${_.data.height}).`);_.version=k.version+1,this.images[u]=_,this.updatedImages[u]=!0}removeImage(u){const _=this.images[u];delete this.images[u],delete this.patterns[u],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,_){let k=!0;if(!this.isLoaded())for(const C of u)this.images[C]||(k=!1);this.isLoaded()||k?this._notify(u,_):this.requestors.push({ids:u,callback:_})}_notify(u,_){const k={};for(const C of u){this.images[C]||this.fire(new h.Event("styleimagemissing",{id:C}));const R=this.images[C];R?k[C]={data:R.data.clone(),pixelRatio:R.pixelRatio,sdf:R.sdf,version:R.version,stretchX:R.stretchX,stretchY:R.stretchY,content:R.content,hasRenderCallback:Boolean(R.userImage&&R.userImage.render)}:h.warnOnce(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,k)}getPixelSize(){const{width:u,height:_}=this.atlasImage;return{width:u,height:_}}getPattern(u){const _=this.patterns[u],k=this.getImage(u);if(!k)return null;if(_&&_.position.version===k.version)return _.position;if(_)_.position.version=k.version;else{const C={w:k.data.width+2,h:k.data.height+2,x:0,y:0},R=new h.ImagePosition(C,k);this.patterns[u]={bin:C,position:R}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const _=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new J(u,this.atlasImage,_.RGBA),this.atlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const R in this.patterns)u.push(this.patterns[R].bin);const{w:_,h:k}=h.potpack(u),C=this.atlasImage;C.resize({width:_||1,height:k||1});for(const R in this.patterns){const{bin:H}=this.patterns[R],ie=H.x+1,ae=H.y+1,he=this.images[R].data,we=he.width,Be=he.height;h.RGBAImage.copy(he,C,{x:0,y:0},{x:ie,y:ae},{width:we,height:Be}),h.RGBAImage.copy(he,C,{x:0,y:Be-1},{x:ie,y:ae-1},{width:we,height:1}),h.RGBAImage.copy(he,C,{x:0,y:0},{x:ie,y:ae+Be},{width:we,height:1}),h.RGBAImage.copy(he,C,{x:we-1,y:0},{x:ie-1,y:ae},{width:1,height:Be}),h.RGBAImage.copy(he,C,{x:0,y:0},{x:ie+we,y:ae},{width:1,height:Be})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const _ of u){if(this.callbackDispatchedThisFrame[_])continue;this.callbackDispatchedThisFrame[_]=!0;const k=this.images[_];k||h.warnOnce(`Image with ID: "${_}" was not found`),se(k)&&this.updateImage(_,k)}}}const re=1e20;function ke(I,u,_,k,C,R,H,ie,ae){for(let he=u;he<u+k;he++)Pe(I,_*R+he,R,C,H,ie,ae);for(let he=_;he<_+C;he++)Pe(I,he*R+u,1,k,H,ie,ae)}function Pe(I,u,_,k,C,R,H){R[0]=0,H[0]=-re,H[1]=re,C[0]=I[u];for(let ie=1,ae=0,he=0;ie<k;ie++){C[ie]=I[u+ie*_];const we=ie*ie;do{const Be=R[ae];he=(C[ie]-C[Be]+we-Be*Be)/(ie-Be)/2}while(he<=H[ae]&&--ae>-1);ae++,R[ae]=ie,H[ae]=he,H[ae+1]=re}for(let ie=0,ae=0;ie<k;ie++){for(;H[ae+1]<ie;)ae++;const he=R[ae],we=ie-he;I[u+ie*_]=C[he]+we*we}}class be{constructor(u,_){this.requestManager=u,this.localIdeographFontFamily=_,this.entries={}}setURL(u){this.url=u}getGlyphs(u,_){const k=[];for(const C in u)for(const R of u[C])k.push({stack:C,id:R});h.asyncAll(k,({stack:C,id:R},H)=>{let ie=this.entries[C];ie||(ie=this.entries[C]={glyphs:{},requests:{},ranges:{}});let ae=ie.glyphs[R];if(ae!==void 0)return void H(null,{stack:C,id:R,glyph:ae});if(ae=this._tinySDF(ie,C,R),ae)return ie.glyphs[R]=ae,void H(null,{stack:C,id:R,glyph:ae});const he=Math.floor(R/256);if(256*he>65535)return void H(new Error("glyphs > 65535 not supported"));if(ie.ranges[he])return void H(null,{stack:C,id:R,glyph:ae});let we=ie.requests[he];we||(we=ie.requests[he]=[],be.loadGlyphRange(C,he,this.url,this.requestManager,(Be,Ve)=>{if(Ve){for(const vt in Ve)this._doesCharSupportLocalGlyph(+vt)||(ie.glyphs[+vt]=Ve[+vt]);ie.ranges[he]=!0}for(const vt of we)vt(Be,Ve);delete ie.requests[he]})),we.push((Be,Ve)=>{Be?H(Be):Ve&&H(null,{stack:C,id:R,glyph:Ve[R]||null})})},(C,R)=>{if(C)_(C);else if(R){const H={};for(const{stack:ie,id:ae,glyph:he}of R)(H[ie]||(H[ie]={}))[ae]=he&&{id:he.id,bitmap:he.bitmap.clone(),metrics:he.metrics};_(null,H)}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(h.unicodeBlockLookup["CJK Unified Ideographs"](u)||h.unicodeBlockLookup["Hangul Syllables"](u)||h.unicodeBlockLookup.Hiragana(u)||h.unicodeBlockLookup.Katakana(u))}_tinySDF(u,_,k){const C=this.localIdeographFontFamily;if(!C||!this._doesCharSupportLocalGlyph(k))return;let R=u.tinySDF;if(!R){let ie="400";/bold/i.test(_)?ie="900":/medium/i.test(_)?ie="500":/light/i.test(_)&&(ie="200"),R=u.tinySDF=new be.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:C,fontWeight:ie})}const H=R.draw(String.fromCharCode(k));return{id:k,bitmap:new h.AlphaImage({width:H.width||30,height:H.height||30},H.data),metrics:{width:H.glyphWidth||24,height:H.glyphHeight||24,left:H.glyphLeft||0,top:H.glyphTop-27||-8,advance:H.glyphAdvance||24}}}}be.loadGlyphRange=function(I,u,_,k,C){const R=256*u,H=R+255,ie=k.transformRequest(_.replace("{fontstack}",I).replace("{range}",`${R}-${H}`),h.ResourceType.Glyphs);h.getArrayBuffer(ie,(ae,he)=>{if(ae)C(ae);else if(he){const we={};for(const Be of h.parseGlyphPbf(he))we[Be.id]=Be;C(null,we)}})},be.TinySDF=class{constructor({fontSize:I=24,buffer:u=3,radius:_=8,cutoff:k=.25,fontFamily:C="sans-serif",fontWeight:R="normal",fontStyle:H="normal"}={}){this.buffer=u,this.cutoff=k,this.radius=_;const ie=this.size=I+4*u,ae=this._createCanvas(ie),he=this.ctx=ae.getContext("2d",{willReadFrequently:!0});he.font=`${H} ${R} ${I}px ${C}`,he.textBaseline="alphabetic",he.textAlign="left",he.fillStyle="black",this.gridOuter=new Float64Array(ie*ie),this.gridInner=new Float64Array(ie*ie),this.f=new Float64Array(ie),this.z=new Float64Array(ie+1),this.v=new Uint16Array(ie)}_createCanvas(I){const u=document.createElement("canvas");return u.width=u.height=I,u}draw(I){const{width:u,actualBoundingBoxAscent:_,actualBoundingBoxDescent:k,actualBoundingBoxLeft:C,actualBoundingBoxRight:R}=this.ctx.measureText(I),H=Math.ceil(_),ie=Math.min(this.size-this.buffer,Math.ceil(R-C)),ae=Math.min(this.size-this.buffer,H+Math.ceil(k)),he=ie+2*this.buffer,we=ae+2*this.buffer,Be=Math.max(he*we,0),Ve=new Uint8ClampedArray(Be),vt={data:Ve,width:he,height:we,glyphWidth:ie,glyphHeight:ae,glyphTop:H,glyphLeft:0,glyphAdvance:u};if(ie===0||ae===0)return vt;const{ctx:ut,buffer:dt,gridInner:Rt,gridOuter:$t}=this;ut.clearRect(dt,dt,ie,ae),ut.fillText(I,dt,dt+H);const ui=ut.getImageData(dt,dt,ie,ae);$t.fill(re,0,Be),Rt.fill(0,0,Be);for(let It=0;It<ae;It++)for(let gi=0;gi<ie;gi++){const fi=ui.data[4*(It*ie+gi)+3]/255;if(fi===0)continue;const Ti=(It+dt)*he+gi+dt;if(fi===1)$t[Ti]=0,Rt[Ti]=re;else{const Si=.5-fi;$t[Ti]=Si>0?Si*Si:0,Rt[Ti]=Si<0?Si*Si:0}}ke($t,0,0,he,we,he,this.f,this.v,this.z),ke(Rt,dt,dt,ie,ae,he,this.f,this.v,this.z);for(let It=0;It<Be;It++){const gi=Math.sqrt($t[It])-Math.sqrt(Rt[It]);Ve[It]=Math.round(255-255*(gi/this.radius+this.cutoff))}return vt}};const pe=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(I,u){return h.sphericalToCartesian(I.expression.evaluate(u))}interpolate(I,u,_){return{x:h.number(I.x,u.x,_),y:h.number(I.y,u.y,_),z:h.number(I.z,u.z,_)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),ye="-transition";class me extends h.Evented{constructor(u){super(),this._transitionable=new h.Transitionable(pe),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,_={}){if(!this._validate(h.validateLight,u,_))for(const k in u){const C=u[k];k.endsWith(ye)?this._transitionable.setTransition(k.slice(0,-ye.length),C):this._transitionable.setValue(k,C)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,_,k){return(!k||k.validate!==!1)&&h.emitValidationErrors(this,u.call(h.validateStyle,h.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class tt{constructor(u,_){this.width=u,this.height=_,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,_){const k=u.join(",")+String(_);return this.dashEntry[k]||(this.dashEntry[k]=this.addDash(u,_)),this.dashEntry[k]}getDashRanges(u,_,k){const C=[];let R=u.length%2==1?-u[u.length-1]*k:0,H=u[0]*k,ie=!0;C.push({left:R,right:H,isDash:ie,zeroLength:u[0]===0});let ae=u[0];for(let he=1;he<u.length;he++){ie=!ie;const we=u[he];R=ae*k,ae+=we,H=ae*k,C.push({left:R,right:H,isDash:ie,zeroLength:we===0})}return C}addRoundDash(u,_,k){const C=_/2;for(let R=-k;R<=k;R++){const H=this.width*(this.nextRow+k+R);let ie=0,ae=u[ie];for(let he=0;he<this.width;he++){he/ae.right>1&&(ae=u[++ie]);const we=Math.abs(he-ae.left),Be=Math.abs(he-ae.right),Ve=Math.min(we,Be);let vt;const ut=R/k*(C+1);if(ae.isDash){const dt=C-Math.abs(ut);vt=Math.sqrt(Ve*Ve+dt*dt)}else vt=C-Math.sqrt(Ve*Ve+ut*ut);this.data[H+he]=Math.max(0,Math.min(255,vt+128))}}}addRegularDash(u){for(let ie=u.length-1;ie>=0;--ie){const ae=u[ie],he=u[ie+1];ae.zeroLength?u.splice(ie,1):he&&he.isDash===ae.isDash&&(he.left=ae.left,u.splice(ie,1))}const _=u[0],k=u[u.length-1];_.isDash===k.isDash&&(_.left=k.left-this.width,k.right=_.right+this.width);const C=this.width*this.nextRow;let R=0,H=u[R];for(let ie=0;ie<this.width;ie++){ie/H.right>1&&(H=u[++R]);const ae=Math.abs(ie-H.left),he=Math.abs(ie-H.right),we=Math.min(ae,he);this.data[C+ie]=Math.max(0,Math.min(255,(H.isDash?we:-we)+128))}}addDash(u,_){const k=_?7:0,C=2*k+1;if(this.nextRow+C>this.height)return h.warnOnce("LineAtlas out of space"),null;let R=0;for(let ie=0;ie<u.length;ie++)R+=u[ie];if(R!==0){const ie=this.width/R,ae=this.getDashRanges(u,this.width,ie);_?this.addRoundDash(ae,ie,k):this.addRegularDash(ae)}const H={y:(this.nextRow+k+.5)/this.height,height:2*k/this.height,width:R};return this.nextRow+=C,this.dirty=!0,H}bind(u){const _=u.gl;this.texture?(_.bindTexture(_.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,_.texSubImage2D(_.TEXTURE_2D,0,0,0,this.width,this.height,_.ALPHA,_.UNSIGNED_BYTE,this.data))):(this.texture=_.createTexture(),_.bindTexture(_.TEXTURE_2D,this.texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texImage2D(_.TEXTURE_2D,0,_.ALPHA,this.width,this.height,0,_.ALPHA,_.UNSIGNED_BYTE,this.data))}}class nt{constructor(u,_){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const k=this.workerPool.acquire(this.id);for(let C=0;C<k.length;C++){const R=new nt.Actor(k[C],_,this.id);R.name=`Worker ${C}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,_,k){h.asyncAll(this.actors,(C,R)=>{C.send(u,_,R)},k=k||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Se(I,u,_){const k=function(C,R){if(C)return _(C);if(R){const H=h.pick(h.extend(R,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);R.vector_layers&&(H.vectorLayers=R.vector_layers,H.vectorLayerIds=H.vectorLayers.map(ie=>ie.id)),_(null,H)}};return I.url?h.getJSON(u.transformRequest(I.url,h.ResourceType.Source),k):h.exported.frame(()=>k(null,I))}nt.Actor=h.Actor;class Me{constructor(u,_,k){this.bounds=h.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=_||0,this.maxzoom=k||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const _=Math.pow(2,u.z),k=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*_),C=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*_),R=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*_),H=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*_);return u.x>=k&&u.x<R&&u.y>=C&&u.y<H}}class Ge extends h.Evented{constructor(u,_,k,C){if(super(),this.id=u,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(_,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Se(this._options,this.map._requestManager,(u,_)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u?this.fire(new h.ErrorEvent(u)):_&&(h.extend(this,_),_.bounds&&(this.tileBounds=new Me(_.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(u,_){const k=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(k,h.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function R(H,ie){return delete u.request,u.aborted?_(null):H&&H.status!==404?_(H):(ie&&ie.resourceTiming&&(u.resourceTiming=ie.resourceTiming),this.map._refreshExpiredTiles&&ie&&u.setExpiryData(ie),u.loadVectorData(ie,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),_(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}C.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=_:u.request=u.actor.send("reloadTile",C,R.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",C,R.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Xe extends h.Evented{constructor(u,_,k,C){super(),this.id=u,this.dispatcher=k,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},_),h.extend(this,h.pick(_,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Se(this._options,this.map._requestManager,(u,_)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new h.ErrorEvent(u)):_&&(h.extend(this,_),_.bounds&&(this.tileBounds=new Me(_.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,_){const k=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=h.getImage(this.map._requestManager.transformRequest(k,h.ResourceType.Tile),(C,R,H)=>{if(delete u.request,u.aborted)u.state="unloaded",_(null);else if(C)u.state="errored",_(C);else if(R){this.map._refreshExpiredTiles&&u.setExpiryData(H);const ie=this.map.painter.context,ae=ie.gl;u.texture=this.map.painter.getTileTexture(R.width),u.texture?u.texture.update(R,{useMipmap:!0}):(u.texture=new J(ie,R,ae.RGBA,{useMipmap:!0}),u.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),ie.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ie.extTextureFilterAnisotropicMax)),u.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),_(null)}})}abortTile(u,_){u.request&&(u.request.cancel(),delete u.request),_()}unloadTile(u,_){u.texture&&this.map.painter.saveTileTexture(u.texture),_()}hasTransition(){return!1}}let _t;class pt extends Xe{constructor(u,_,k,C){super(u,_,k,C),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},_),this.encoding=_.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(u,_){const k=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function C(R,H){R&&(u.state="errored",_(R)),H&&(u.dem=H,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",_(null))}u.request=h.getImage(this.map._requestManager.transformRequest(k,h.ResourceType.Tile),function(R,H){if(delete u.request,u.aborted)u.state="unloaded",_(null);else if(R)u.state="errored",_(R);else if(H){this.map._refreshExpiredTiles&&u.setExpiryData(H),delete H.cacheControl,delete H.expires;const ie=h.isImageBitmap(H)&&(_t==null&&(_t=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_t)?H:h.exported.getImageData(H,1),ae={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:ie,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",ae,C.bind(this)))}}.bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)}_getNeighboringTiles(u){const _=u.canonical,k=Math.pow(2,_.z),C=(_.x-1+k)%k,R=_.x===0?u.wrap-1:u.wrap,H=(_.x+1+k)%k,ie=_.x+1===k?u.wrap+1:u.wrap,ae={};return ae[new h.OverscaledTileID(u.overscaledZ,R,_.z,C,_.y).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,ie,_.z,H,_.y).key]={backfilled:!1},_.y>0&&(ae[new h.OverscaledTileID(u.overscaledZ,R,_.z,C,_.y-1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,u.wrap,_.z,_.x,_.y-1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,ie,_.z,H,_.y-1).key]={backfilled:!1}),_.y+1<k&&(ae[new h.OverscaledTileID(u.overscaledZ,R,_.z,C,_.y+1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,u.wrap,_.z,_.x,_.y+1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,ie,_.z,H,_.y+1).key]={backfilled:!1}),ae}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class Gt extends h.Evented{constructor(u,_,k,C){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=k.getActor(),this.setEventedParent(C),this._data=_.data,this._options=h.extend({},_),this._collectResourceTiming=_.collectResourceTiming,_.maxzoom!==void 0&&(this.maxzoom=_.maxzoom),_.type&&(this.type=_.type),_.attribution&&(this.attribution=_.attribution),this.promoteId=_.promoteId;const R=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:_.cluster||!1,geojsonVtOptions:{buffer:(_.buffer!==void 0?_.buffer:128)*R,tolerance:(_.tolerance!==void 0?_.tolerance:.375)*R,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:_.lineMetrics||!1,generateId:_.generateId||!1},superclusterOptions:{maxZoom:_.clusterMaxZoom!==void 0?_.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,_.clusterMinPoints||2),extent:h.EXTENT,radius:(_.clusterRadius||50)*R,log:!1,generateId:_.generateId||!1},clusterProperties:_.clusterProperties,filter:_.filter},_.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData("content"),this}getClusterExpansionZoom(u,_){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},_),this}getClusterChildren(u,_){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},_),this}getClusterLeaves(u,_,k,C){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:_,offset:k},C),this}_updateWorkerData(u){const _=h.extend({},this.workerOptions),k=this._data;typeof k=="string"?(_.request=this.map._requestManager.transformRequest(h.exported.resolveURL(k),h.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(k),this._pendingLoads++,this.fire(new h.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,_,(C,R)=>{if(this._pendingLoads--,this._removed||R&&R.abandoned)return void this.fire(new h.Event("dataabort",{dataType:"source",sourceDataType:u}));let H=null;if(R&&R.resourceTiming&&R.resourceTiming[this.id]&&(H=R.resourceTiming[this.id].slice(0)),C)return void this.fire(new h.ErrorEvent(C));const ie={dataType:"source",sourceDataType:u};this._collectResourceTiming&&H&&H.length>0&&h.extend(ie,{resourceTiming:H}),this.fire(new h.Event("data",ie))})}loaded(){return this._pendingLoads===0}loadTile(u,_){const k=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const C={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(k,C,(R,H)=>(delete u.request,u.unloadVectorData(),u.aborted?_(null):R?_(R):(u.loadVectorData(H,this.map.painter,k==="reloadTile"),_(null))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var kt=h.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xt extends h.Evented{constructor(u,_,k,C){super(),this.id=u,this.dispatcher=k,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=_}load(u,_){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(k,C)=>{this._loaded=!0,k?this.fire(new h.ErrorEvent(k)):C&&(this.image=C,u&&(this.coordinates=u),_&&_(),this._finishLoading())})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}setCoordinates(u){this.coordinates=u;const _=u.map(h.MercatorCoordinate.fromLngLat);this.tileID=function(C){let R=1/0,H=1/0,ie=-1/0,ae=-1/0;for(const Ve of C)R=Math.min(R,Ve.x),H=Math.min(H,Ve.y),ie=Math.max(ie,Ve.x),ae=Math.max(ae,Ve.y);const he=Math.max(ie-R,ae-H),we=Math.max(0,Math.floor(-Math.log(he)/Math.LN2)),Be=Math.pow(2,we);return new h.CanonicalTileID(we,Math.floor((R+ie)/2*Be),Math.floor((H+ae)/2*Be))}(_),this.minzoom=this.maxzoom=this.tileID.z;const k=_.map(C=>this.tileID.getTilePoint(C)._round());return this._boundsArray=new h.RasterBoundsArray,this._boundsArray.emplaceBack(k[0].x,k[0].y,0,0),this._boundsArray.emplaceBack(k[1].x,k[1].y,h.EXTENT,0),this._boundsArray.emplaceBack(k[3].x,k[3].y,0,h.EXTENT),this._boundsArray.emplaceBack(k[2].x,k[2].y,h.EXTENT,h.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,_=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,kt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new J(u,this.image,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const k in this.tiles){const C=this.tiles[k];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture)}}loadTile(u,_){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},_(null)):(u.state="errored",_(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Mt extends Xt{constructor(u,_,k,C){super(u,_,k,C),this.roundZoom=!0,this.type="video",this.options=_}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const _ of u.urls)this.urls.push(this.map._requestManager.transformRequest(_,h.ResourceType.Source).url);h.getVideo(this.urls,(_,k)=>{this._loaded=!0,_?this.fire(new h.ErrorEvent(_)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const _=this.video.seekable;u<_.start(0)||u>_.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${_.start(0)} and ${_.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,_=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,kt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE),_.texSubImage2D(_.TEXTURE_2D,0,0,0,_.RGBA,_.UNSIGNED_BYTE,this.video)):(this.texture=new J(u,this.video,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const k in this.tiles){const C=this.tiles[k];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class qt extends Xt{constructor(u,_,k,C){super(u,_,k,C),_.coordinates?Array.isArray(_.coordinates)&&_.coordinates.length===4&&!_.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(H=>typeof H!="number"))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),_.animate&&typeof _.animate!="boolean"&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),_.canvas?typeof _.canvas=="string"||_.canvas instanceof HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=_,this.animate=_.animate===void 0||_.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const _=this.map.painter.context,k=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,kt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new J(_,this.canvas,k.RGBA,{premultiply:!0});for(const C in this.tiles){const R=this.tiles[C];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const ve={vector:Ge,raster:Xe,"raster-dem":pt,geojson:Gt,video:Mt,image:Xt,canvas:qt};function it(I,u){const _=h.create();return h.translate(_,_,[1,1,0]),h.scale(_,_,[.5*I.width,.5*I.height,1]),h.multiply(_,_,I.calculatePosMatrix(u.toUnwrapped()))}function Re(I,u,_,k,C,R){const H=function(Be,Ve,vt){if(Be)for(const ut of Be){const dt=Ve[ut];if(dt&&dt.source===vt&&dt.type==="fill-extrusion")return!0}else for(const ut in Ve){const dt=Ve[ut];if(dt.source===vt&&dt.type==="fill-extrusion")return!0}return!1}(C&&C.layers,u,I.id),ie=R.maxPitchScaleFactor(),ae=I.tilesIn(k,ie,H);ae.sort(bt);const he=[];for(const Be of ae)he.push({wrappedTileID:Be.tileID.wrapped().key,queryResults:Be.tile.queryRenderedFeatures(u,_,I._state,Be.queryGeometry,Be.cameraQueryGeometry,Be.scale,C,R,ie,it(I.transform,Be.tileID))});const we=function(Be){const Ve={},vt={};for(const ut of Be){const dt=ut.queryResults,Rt=ut.wrappedTileID,$t=vt[Rt]=vt[Rt]||{};for(const ui in dt){const It=dt[ui],gi=$t[ui]=$t[ui]||{},fi=Ve[ui]=Ve[ui]||[];for(const Ti of It)gi[Ti.featureIndex]||(gi[Ti.featureIndex]=!0,fi.push(Ti))}}return Ve}(he);for(const Be in we)we[Be].forEach(Ve=>{const vt=Ve.feature,ut=I.getFeatureState(vt.layer["source-layer"],vt.id);vt.source=vt.layer.source,vt.layer["source-layer"]&&(vt.sourceLayer=vt.layer["source-layer"]),vt.state=ut});return we}function bt(I,u){const _=I.tileID,k=u.tileID;return _.overscaledZ-k.overscaledZ||_.canonical.y-k.canonical.y||_.wrap-k.wrap||_.canonical.x-k.canonical.x}class Ct{constructor(u,_){this.tileID=u,this.uid=h.uniqueId(),this.uses=0,this.tileSize=_,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const _=u+this.timeAdded;_<h.exported.now()||this.fadeEndTime&&_<this.fadeEndTime||(this.fadeEndTime=_)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.textures.forEach(_=>u.saveTileTexture(_)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(u,_,k){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(C,R){const H={};if(!R)return H;for(const ie of C){const ae=ie.layerIds.map(he=>R.getLayer(he)).filter(Boolean);if(ae.length!==0){ie.layers=ae,ie.stateDependentLayerIds&&(ie.stateDependentLayers=ie.stateDependentLayerIds.map(he=>ae.filter(we=>we.id===he)[0]));for(const he of ae)H[he.id]=ie}}return H}(u.buckets,_.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const R=this.buckets[C];if(R instanceof h.SymbolBucket){if(this.hasSymbolBuckets=!0,!k)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const R=this.buckets[C];if(R instanceof h.SymbolBucket&&R.hasRTLText){this.hasRTLText=!0,h.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const C in this.buckets){const R=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,_.style.getLayer(C).queryRadius(R))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new h.CollisionBoxArray}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const k in this.buckets){const C=this.buckets[k];C.uploadPending()&&C.upload(u)}const _=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new J(u,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new J(u,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,_,k,C,R,H,ie,ae,he,we){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:R,scale:H,tileSize:this.tileSize,pixelPosMatrix:we,transform:ae,params:ie,queryPadding:this.queryPadding*he},u,_,k):{}}querySourceFeatures(u,_){const k=this.latestFeatureIndex;if(!k||!k.rawTileData)return;const C=k.loadVTLayers(),R=_?_.sourceLayer:"",H=C._geojsonTileLayer||C[R];if(!H)return;const ie=h.createFilter(_&&_.filter),{z:ae,x:he,y:we}=this.tileID.canonical,Be={z:ae,x:he,y:we};for(let Ve=0;Ve<H.length;Ve++){const vt=H.feature(Ve);if(ie.needGeometry){const Rt=h.toEvaluationFeature(vt,!0);if(!ie.filter(new h.EvaluationParameters(this.tileID.overscaledZ),Rt,this.tileID.canonical))continue}else if(!ie.filter(new h.EvaluationParameters(this.tileID.overscaledZ),vt))continue;const ut=k.getId(vt,R),dt=new h.GeoJSONFeature(vt,ae,he,we,ut);dt.tile=Be,u.push(dt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const _=this.expirationTime;if(u.cacheControl){const k=h.parseCacheControl(u.cacheControl);k["max-age"]&&(this.expirationTime=Date.now()+1e3*k["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const k=Date.now();let C=!1;if(this.expirationTime>k)C=!1;else if(_)if(this.expirationTime<_)C=!0;else{const R=this.expirationTime-_;R?this.expirationTime=k+Math.max(R,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,_){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const k=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!_.style.hasLayer(C))continue;const R=this.buckets[C],H=R.layers[0].sourceLayer||"_geojsonTileLayer",ie=k[H],ae=u[H];if(!ie||!ae||Object.keys(ae).length===0)continue;R.update(ae,ie,this.imageAtlas&&this.imageAtlas.patternPositions||{});const he=_&&_.style&&_.style.getLayer(C);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(R)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=h.exported.now()+u}setDependencies(u,_){const k={};for(const C of _)k[C]=!0;this.dependencies[u]=k}hasDependency(u,_){for(const k of u){const C=this.dependencies[k];if(C){for(const R of _)if(C[R])return!0}}return!1}}class Ot{constructor(u,_){this.max=u,this.onRemove=_,this.reset()}reset(){for(const u in this.data)for(const _ of this.data[u])_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value);return this.data={},this.order=[],this}add(u,_,k){const C=u.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);const R={value:_,timeout:void 0};if(k!==void 0&&(R.timeout=setTimeout(()=>{this.remove(u,R)},k)),this.data[C].push(R),this.order.push(C),this.order.length>this.max){const H=this._getAndRemoveByKey(this.order[0]);H&&this.onRemove(H)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const _=this.data[u].shift();return _.timeout&&clearTimeout(_.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),_.value}getByKey(u){const _=this.data[u];return _?_[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,_){if(!this.has(u))return this;const k=u.wrapped().key,C=_===void 0?0:this.data[k].indexOf(_),R=this.data[k][C];return this.data[k].splice(C,1),R.timeout&&clearTimeout(R.timeout),this.data[k].length===0&&delete this.data[k],this.onRemove(R.value),this.order.splice(this.order.indexOf(k),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}filter(u){const _=[];for(const k in this.data)for(const C of this.data[k])u(C.value)||_.push(C);for(const k of _)this.remove(k.value.tileID,k)}}class Ht{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,_,k){const C=String(_);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][C]=this.stateChanges[u][C]||{},h.extend(this.stateChanges[u][C],k),this.deletedStates[u]===null){this.deletedStates[u]={};for(const R in this.state[u])R!==C&&(this.deletedStates[u][R]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][C]===null){this.deletedStates[u][C]={};for(const R in this.state[u][C])k[R]||(this.deletedStates[u][C][R]=null)}else for(const R in k)this.deletedStates[u]&&this.deletedStates[u][C]&&this.deletedStates[u][C][R]===null&&delete this.deletedStates[u][C][R]}removeFeatureState(u,_,k){if(this.deletedStates[u]===null)return;const C=String(_);if(this.deletedStates[u]=this.deletedStates[u]||{},k&&_!==void 0)this.deletedStates[u][C]!==null&&(this.deletedStates[u][C]=this.deletedStates[u][C]||{},this.deletedStates[u][C][k]=null);else if(_!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][C])for(k in this.deletedStates[u][C]={},this.stateChanges[u][C])this.deletedStates[u][C][k]=null;else this.deletedStates[u][C]=null;else this.deletedStates[u]=null}getState(u,_){const k=String(_),C=h.extend({},(this.state[u]||{})[k],(this.stateChanges[u]||{})[k]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const R=this.deletedStates[u][_];if(R===null)return{};for(const H in R)delete C[H]}return C}initializeTileState(u,_){u.setFeatureState(this.state,_)}coalesceChanges(u,_){const k={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const R={};for(const H in this.stateChanges[C])this.state[C][H]||(this.state[C][H]={}),h.extend(this.state[C][H],this.stateChanges[C][H]),R[H]=this.state[C][H];k[C]=R}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const R={};if(this.deletedStates[C]===null)for(const H in this.state[C])R[H]={},this.state[C][H]={};else for(const H in this.deletedStates[C]){if(this.deletedStates[C][H]===null)this.state[C][H]={};else for(const ie of Object.keys(this.deletedStates[C][H]))delete this.state[C][H][ie];R[H]=this.state[C][H]}k[C]=k[C]||{},h.extend(k[C],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(k).length!==0)for(const C in u)u[C].setFeatureState(k,_)}}class Wt extends h.Evented{constructor(u,_,k){super(),this.id=u,this.dispatcher=k,this.on("data",C=>{C.dataType==="source"&&C.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&C.dataType==="source"&&C.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(C,R,H,ie){const ae=new ve[R.type](C,R,H,ie);if(ae.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${ae.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],ae),ae}(u,_,k,this),this._tiles={},this._cache=new Ot(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ht}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const u in this._tiles){const _=this._tiles[u];if(_.state!=="loaded"&&_.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,_){return this._source.loadTile(u,_)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,()=>{})}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,()=>{}),this._source.fire(new h.Event("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _ in this._tiles){const k=this._tiles[_];k.upload(u),k.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(si).map(u=>u.key)}getRenderableIds(u){const _=[];for(const k in this._tiles)this._isIdRenderable(k,u)&&_.push(this._tiles[k]);return u?_.sort((k,C)=>{const R=k.tileID,H=C.tileID,ie=new h.pointGeometry(R.canonical.x,R.canonical.y)._rotate(this.transform.angle),ae=new h.pointGeometry(H.canonical.x,H.canonical.y)._rotate(this.transform.angle);return R.overscaledZ-H.overscaledZ||ae.y-ie.y||ae.x-ie.x}).map(k=>k.tileID.key):_.map(k=>k.tileID).sort(si).map(k=>k.key)}hasRenderableParent(u){const _=this.findLoadedParent(u,0);return!!_&&this._isIdRenderable(_.tileID.key)}_isIdRenderable(u,_){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(_||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,_){const k=this._tiles[u];k&&(k.state!=="loading"&&(k.state=_),this._loadTile(k,this._tileLoaded.bind(this,k,u,_)))}_tileLoaded(u,_,k,C){if(C)return u.state="errored",void(C.status!==404?this._source.fire(new h.ErrorEvent(C,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=h.exported.now(),k==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(_,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new h.Event("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const _=this.getRenderableIds();for(let C=0;C<_.length;C++){const R=_[C];if(u.neighboringTiles&&u.neighboringTiles[R]){const H=this.getTileByID(R);k(u,H),k(H,u)}}function k(C,R){C.needsHillshadePrepare=!0,C.needsTerrainPrepare=!0;let H=R.tileID.canonical.x-C.tileID.canonical.x;const ie=R.tileID.canonical.y-C.tileID.canonical.y,ae=Math.pow(2,C.tileID.canonical.z),he=R.tileID.key;H===0&&ie===0||Math.abs(ie)>1||(Math.abs(H)>1&&(Math.abs(H+ae)===1?H+=ae:Math.abs(H-ae)===1&&(H-=ae)),R.dem&&C.dem&&(C.dem.backfillBorder(R.dem,H,ie),C.neighboringTiles&&C.neighboringTiles[he]&&(C.neighboringTiles[he].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,_,k,C){for(const R in this._tiles){let H=this._tiles[R];if(C[R]||!H.hasData()||H.tileID.overscaledZ<=_||H.tileID.overscaledZ>k)continue;let ie=H.tileID;for(;H&&H.tileID.overscaledZ>_+1;){const he=H.tileID.scaledTo(H.tileID.overscaledZ-1);H=this._tiles[he.key],H&&H.hasData()&&(ie=he)}let ae=ie;for(;ae.overscaledZ>_;)if(ae=ae.scaledTo(ae.overscaledZ-1),u[ae.key]){C[ie.key]=ie;break}}}findLoadedParent(u,_){if(u.key in this._loadedParentTiles){const k=this._loadedParentTiles[u.key];return k&&k.tileID.overscaledZ>=_?k:null}for(let k=u.overscaledZ-1;k>=_;k--){const C=u.scaledTo(k),R=this._getLoadedTile(C);if(R)return R}}_getLoadedTile(u){const _=this._tiles[u.key];return _&&_.hasData()?_:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const _=Math.ceil(u.width/this._source.tileSize)+1,k=Math.ceil(u.height/this._source.tileSize)+1,C=Math.floor(_*k*5),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(R)}handleWrapJump(u){const _=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,_){const k={};for(const C in this._tiles){const R=this._tiles[C];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+_),k[R.tileID.key]=R}this._tiles=k;for(const C in this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(const C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}}update(u,_){if(this.transform=u,this.terrain=_,!this._sourceLoaded||this._paused)return;let k;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?k=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(he=>new h.OverscaledTileID(he.canonical.z,he.wrap,he.canonical.z,he.canonical.x,he.canonical.y)):(k=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:_}),this._source.hasTile&&(k=k.filter(he=>this._source.hasTile(he)))):k=[];const C=u.coveringZoomLevel(this._source),R=Math.max(C-Wt.maxOverzooming,this._source.minzoom),H=Math.max(C+Wt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const he={};for(const we of k)if(we.canonical.z>this._source.minzoom){const Be=we.scaledTo(we.canonical.z-1);he[Be.key]=Be;const Ve=we.scaledTo(Math.max(this._source.minzoom,Math.min(we.canonical.z,5)));he[Ve.key]=Ve}k=k.concat(Object.values(he))}const ie=this._updateRetainedTiles(k,C);if(ri(this._source.type)){const he={},we={},Be=Object.keys(ie);for(const Ve of Be){const vt=ie[Ve],ut=this._tiles[Ve];if(!ut||ut.fadeEndTime&&ut.fadeEndTime<=h.exported.now())continue;const dt=this.findLoadedParent(vt,R);dt&&(this._addTile(dt.tileID),he[dt.tileID.key]=dt.tileID),we[Ve]=vt}this._retainLoadedChildren(we,C,H,ie);for(const Ve in he)ie[Ve]||(this._coveredTiles[Ve]=!0,ie[Ve]=he[Ve]);if(_){const Ve={},vt={};for(const ut of k)this._tiles[ut.key].hasData()?Ve[ut.key]=ut:vt[ut.key]=ut;for(const ut in vt){const dt=vt[ut].children(this._source.maxzoom);this._tiles[dt[0].key]&&this._tiles[dt[1].key]&&this._tiles[dt[2].key]&&this._tiles[dt[3].key]&&(Ve[dt[0].key]=ie[dt[0].key]=dt[0],Ve[dt[1].key]=ie[dt[1].key]=dt[1],Ve[dt[2].key]=ie[dt[2].key]=dt[2],Ve[dt[3].key]=ie[dt[3].key]=dt[3],delete vt[ut])}for(const ut in vt){const dt=this.findLoadedParent(vt[ut],this._source.minzoom);if(dt){Ve[dt.tileID.key]=ie[dt.tileID.key]=dt.tileID;for(const Rt in Ve)Ve[Rt].isChildOf(dt.tileID)&&delete Ve[Rt]}}for(const ut in this._tiles)Ve[ut]||(this._coveredTiles[ut]=!0)}}for(const he in ie)this._tiles[he].clearFadeHold();const ae=h.keysDifference(this._tiles,ie);for(const he of ae){const we=this._tiles[he];we.hasSymbolBuckets&&!we.holdingForFade()?we.setHoldDuration(this.map._fadeDuration):we.hasSymbolBuckets&&!we.symbolFadeFinished()||this._removeTile(he)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,_){const k={},C={},R=Math.max(_-Wt.maxOverzooming,this._source.minzoom),H=Math.max(_+Wt.maxUnderzooming,this._source.minzoom),ie={};for(const ae of u){const he=this._addTile(ae);k[ae.key]=ae,he.hasData()||_<this._source.maxzoom&&(ie[ae.key]=ae)}this._retainLoadedChildren(ie,_,H,k);for(const ae of u){let he=this._tiles[ae.key];if(he.hasData())continue;if(_+1>this._source.maxzoom){const Be=ae.children(this._source.maxzoom)[0],Ve=this.getTile(Be);if(Ve&&Ve.hasData()){k[Be.key]=Be;continue}}else{const Be=ae.children(this._source.maxzoom);if(k[Be[0].key]&&k[Be[1].key]&&k[Be[2].key]&&k[Be[3].key])continue}let we=he.wasRequested();for(let Be=ae.overscaledZ-1;Be>=R;--Be){const Ve=ae.scaledTo(Be);if(C[Ve.key]||(C[Ve.key]=!0,he=this.getTile(Ve),!he&&we&&(he=this._addTile(Ve)),he&&(k[Ve.key]=Ve,we=he.wasRequested(),he.hasData())))break}}return k}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const _=[];let k,C=this._tiles[u].tileID;for(;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){k=this._loadedParentTiles[C.key];break}_.push(C.key);const R=C.scaledTo(C.overscaledZ-1);if(k=this._getLoadedTile(R),k)break;C=R}for(const R of _)this._loadedParentTiles[R]=k}}_addTile(u){let _=this._tiles[u.key];if(_)return _;_=this._cache.getAndRemove(u),_&&(this._setTileReloadTimer(u.key,_),_.tileID=u,this._state.initializeTileState(_,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,_)));const k=_;return _||(_=new Ct(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(_,this._tileLoaded.bind(this,_,u.key,_.state))),_.uses++,this._tiles[u.key]=_,k||this._source.fire(new h.Event("dataloading",{tile:_,coord:_.tileID,dataType:"source"})),_}_setTileReloadTimer(u,_){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const k=_.getExpiryTimeout();k&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},k))}_removeTile(u){const _=this._tiles[u];_&&(_.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),_.uses>0||(_.hasData()&&_.state!=="reloading"?this._cache.add(_.tileID,_,_.getExpiryTimeout()):(_.aborted=!0,this._abortTile(_),this._unloadTile(_))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,_,k){const C=[],R=this.transform;if(!R)return C;const H=k?R.getCameraQueryGeometry(u):u,ie=u.map(ut=>R.pointCoordinate(ut,this.terrain)),ae=H.map(ut=>R.pointCoordinate(ut,this.terrain)),he=this.getIds();let we=1/0,Be=1/0,Ve=-1/0,vt=-1/0;for(const ut of ae)we=Math.min(we,ut.x),Be=Math.min(Be,ut.y),Ve=Math.max(Ve,ut.x),vt=Math.max(vt,ut.y);for(let ut=0;ut<he.length;ut++){const dt=this._tiles[he[ut]];if(dt.holdingForFade())continue;const Rt=dt.tileID,$t=Math.pow(2,R.zoom-dt.tileID.overscaledZ),ui=_*dt.queryPadding*h.EXTENT/dt.tileSize/$t,It=[Rt.getTilePoint(new h.MercatorCoordinate(we,Be)),Rt.getTilePoint(new h.MercatorCoordinate(Ve,vt))];if(It[0].x-ui<h.EXTENT&&It[0].y-ui<h.EXTENT&&It[1].x+ui>=0&&It[1].y+ui>=0){const gi=ie.map(Ti=>Rt.getTilePoint(Ti)),fi=ae.map(Ti=>Rt.getTilePoint(Ti));C.push({tile:dt,tileID:Rt,queryGeometry:gi,cameraQueryGeometry:fi,scale:$t})}}return C}getVisibleCoordinates(u){const _=this.getRenderableIds(u).map(k=>this._tiles[k].tileID);for(const k of _)k.posMatrix=this.transform.calculatePosMatrix(k.toUnwrapped());return _}hasTransition(){if(this._source.hasTransition())return!0;if(ri(this._source.type))for(const u in this._tiles){const _=this._tiles[u];if(_.fadeEndTime!==void 0&&_.fadeEndTime>=h.exported.now())return!0}return!1}setFeatureState(u,_,k){this._state.updateState(u=u||"_geojsonTileLayer",_,k)}removeFeatureState(u,_,k){this._state.removeFeatureState(u=u||"_geojsonTileLayer",_,k)}getFeatureState(u,_){return this._state.getState(u=u||"_geojsonTileLayer",_)}setDependencies(u,_,k){const C=this._tiles[u];C&&C.setDependencies(_,k)}reloadTilesForDependencies(u,_){for(const k in this._tiles)this._tiles[k].hasDependency(u,_)&&this._reloadTile(k,"reloading");this._cache.filter(k=>!k.hasDependency(u,_))}}function si(I,u){const _=Math.abs(2*I.wrap)-+(I.wrap<0),k=Math.abs(2*u.wrap)-+(u.wrap<0);return I.overscaledZ-u.overscaledZ||k-_||u.canonical.y-I.canonical.y||u.canonical.x-I.canonical.x}function ri(I){return I==="raster"||I==="image"||I==="video"}Wt.maxOverzooming=10,Wt.maxUnderzooming=3;const zi="mapboxgl_preloaded_worker_pool";class Di{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Di.workerCount;)this.workers.push(new Worker(Ds.workerUrl));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(_=>{_.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zi]}numActive(){return Object.keys(this.active).length}}const er=Math.floor(h.exported.hardwareConcurrency/2);let Zt;function yt(){return Zt||(Zt=new Di),Zt}function $i(I,u){const _={};for(const k in I)k!=="ref"&&(_[k]=I[k]);return h.refProperties.forEach(k=>{k in u&&(_[k]=u[k])}),_}function nr(I){I=I.slice();const u=Object.create(null);for(let _=0;_<I.length;_++)u[I[_].id]=I[_];for(let _=0;_<I.length;_++)"ref"in I[_]&&(I[_]=$i(I[_],u[I[_].ref]));return I}Di.workerCount=Math.max(Math.min(er,6),1);const di={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Hi(I,u,_){_.push({command:di.addSource,args:[I,u[I]]})}function Ki(I,u,_){u.push({command:di.removeSource,args:[I]}),_[I]=!0}function Ui(I,u,_,k){Ki(I,_,k),Hi(I,u,_)}function Qt(I,u,_){let k;for(k in I[_])if(Object.prototype.hasOwnProperty.call(I[_],k)&&k!=="data"&&!U(I[_][k],u[_][k]))return!1;for(k in u[_])if(Object.prototype.hasOwnProperty.call(u[_],k)&&k!=="data"&&!U(I[_][k],u[_][k]))return!1;return!0}function lr(I,u,_,k,C,R){let H;for(H in u=u||{},I=I||{})Object.prototype.hasOwnProperty.call(I,H)&&(U(I[H],u[H])||_.push({command:R,args:[k,H,u[H],C]}));for(H in u)Object.prototype.hasOwnProperty.call(u,H)&&!Object.prototype.hasOwnProperty.call(I,H)&&(U(I[H],u[H])||_.push({command:R,args:[k,H,u[H],C]}))}function pi(I){return I.id}function Dr(I,u){return I[u.id]=u,I}class ze{constructor(u,_){this.reset(u,_)}reset(u,_){this.points=u||[],this._distances=[0];for(let k=1;k<this.points.length;k++)this._distances[k]=this._distances[k-1]+this.points[k].dist(this.points[k-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=h.clamp(u,0,1);let _=1,k=this._distances[_];const C=u*this.paddedLength+this.padding;for(;k<C&&_<this._distances.length;)k=this._distances[++_];const R=_-1,H=this._distances[R],ie=k-H,ae=ie>0?(C-H)/ie:0;return this.points[R].mult(1-ae).add(this.points[_].mult(ae))}}function Y(I,u){let _=!0;return I==="always"||I!=="never"&&u!=="never"||(_=!1),_}class te{constructor(u,_,k){const C=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(u/k),this.yCellCount=Math.ceil(_/k);for(let H=0;H<this.xCellCount*this.yCellCount;H++)C.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=_,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,_,k,C,R){this._forEachCell(_,k,C,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(_),this.bboxes.push(k),this.bboxes.push(C),this.bboxes.push(R)}insertCircle(u,_,k,C){this._forEachCell(_-C,k-C,_+C,k+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(_),this.circles.push(k),this.circles.push(C)}_insertBoxCell(u,_,k,C,R,H){this.boxCells[R].push(H)}_insertCircleCell(u,_,k,C,R,H){this.circleCells[R].push(H)}_query(u,_,k,C,R,H,ie){if(k<0||u>this.width||C<0||_>this.height)return[];const ae=[];if(u<=0&&_<=0&&this.width<=k&&this.height<=C){if(R)return[{key:null,x1:u,y1:_,x2:k,y2:C}];for(let he=0;he<this.boxKeys.length;he++)ae.push({key:this.boxKeys[he],x1:this.bboxes[4*he],y1:this.bboxes[4*he+1],x2:this.bboxes[4*he+2],y2:this.bboxes[4*he+3]});for(let he=0;he<this.circleKeys.length;he++){const we=this.circles[3*he],Be=this.circles[3*he+1],Ve=this.circles[3*he+2];ae.push({key:this.circleKeys[he],x1:we-Ve,y1:Be-Ve,x2:we+Ve,y2:Be+Ve})}}else this._forEachCell(u,_,k,C,this._queryCell,ae,{hitTest:R,overlapMode:H,seenUids:{box:{},circle:{}}},ie);return ae}query(u,_,k,C){return this._query(u,_,k,C,!1,null)}hitTest(u,_,k,C,R,H){return this._query(u,_,k,C,!0,R,H).length>0}hitTestCircle(u,_,k,C,R){const H=u-k,ie=u+k,ae=_-k,he=_+k;if(ie<0||H>this.width||he<0||ae>this.height)return!1;const we=[];return this._forEachCell(H,ae,ie,he,this._queryCellCircle,we,{hitTest:!0,overlapMode:C,circle:{x:u,y:_,radius:k},seenUids:{box:{},circle:{}}},R),we.length>0}_queryCell(u,_,k,C,R,H,ie,ae){const{seenUids:he,hitTest:we,overlapMode:Be}=ie,Ve=this.boxCells[R];if(Ve!==null){const ut=this.bboxes;for(const dt of Ve)if(!he.box[dt]){he.box[dt]=!0;const Rt=4*dt,$t=this.boxKeys[dt];if(u<=ut[Rt+2]&&_<=ut[Rt+3]&&k>=ut[Rt+0]&&C>=ut[Rt+1]&&(!ae||ae($t))&&(!we||!Y(Be,$t.overlapMode))&&(H.push({key:$t,x1:ut[Rt],y1:ut[Rt+1],x2:ut[Rt+2],y2:ut[Rt+3]}),we))return!0}}const vt=this.circleCells[R];if(vt!==null){const ut=this.circles;for(const dt of vt)if(!he.circle[dt]){he.circle[dt]=!0;const Rt=3*dt,$t=this.circleKeys[dt];if(this._circleAndRectCollide(ut[Rt],ut[Rt+1],ut[Rt+2],u,_,k,C)&&(!ae||ae($t))&&(!we||!Y(Be,$t.overlapMode))){const ui=ut[Rt],It=ut[Rt+1],gi=ut[Rt+2];if(H.push({key:$t,x1:ui-gi,y1:It-gi,x2:ui+gi,y2:It+gi}),we)return!0}}}return!1}_queryCellCircle(u,_,k,C,R,H,ie,ae){const{circle:he,seenUids:we,overlapMode:Be}=ie,Ve=this.boxCells[R];if(Ve!==null){const ut=this.bboxes;for(const dt of Ve)if(!we.box[dt]){we.box[dt]=!0;const Rt=4*dt,$t=this.boxKeys[dt];if(this._circleAndRectCollide(he.x,he.y,he.radius,ut[Rt+0],ut[Rt+1],ut[Rt+2],ut[Rt+3])&&(!ae||ae($t))&&!Y(Be,$t.overlapMode))return H.push(!0),!0}}const vt=this.circleCells[R];if(vt!==null){const ut=this.circles;for(const dt of vt)if(!we.circle[dt]){we.circle[dt]=!0;const Rt=3*dt,$t=this.circleKeys[dt];if(this._circlesCollide(ut[Rt],ut[Rt+1],ut[Rt+2],he.x,he.y,he.radius)&&(!ae||ae($t))&&!Y(Be,$t.overlapMode))return H.push(!0),!0}}}_forEachCell(u,_,k,C,R,H,ie,ae){const he=this._convertToXCellCoord(u),we=this._convertToYCellCoord(_),Be=this._convertToXCellCoord(k),Ve=this._convertToYCellCoord(C);for(let vt=he;vt<=Be;vt++)for(let ut=we;ut<=Ve;ut++)if(R.call(this,u,_,k,C,this.xCellCount*ut+vt,H,ie,ae))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,_,k,C,R,H){const ie=C-u,ae=R-_,he=k+H;return he*he>ie*ie+ae*ae}_circleAndRectCollide(u,_,k,C,R,H,ie){const ae=(H-C)/2,he=Math.abs(u-(C+ae));if(he>ae+k)return!1;const we=(ie-R)/2,Be=Math.abs(_-(R+we));if(Be>we+k)return!1;if(he<=ae||Be<=we)return!0;const Ve=he-ae,vt=Be-we;return Ve*Ve+vt*vt<=k*k}}function je(I,u,_,k,C){const R=h.create();return u?(h.scale(R,R,[1/C,1/C,1]),_||h.rotateZ(R,R,k.angle)):h.multiply(R,k.labelPlaneMatrix,I),R}function ot(I,u,_,k,C){if(u){const R=h.clone(I);return h.scale(R,R,[C,C,1]),_||h.rotateZ(R,R,-k.angle),R}return k.glCoordMatrix}function mt(I,u,_){let k;_?(k=[I.x,I.y,_(I.x,I.y),1],h.transformMat4(k,k,u)):(k=[I.x,I.y,0,1],vn(k,k,u));const C=k[3];return{point:new h.pointGeometry(k[0]/C,k[1]/C),signedDistanceFromCamera:C}}function Jt(I,u){return .5+I/u*.5}function hr(I,u){const _=I[0]/I[3],k=I[1]/I[3];return _>=-u[0]&&_<=u[0]&&k>=-u[1]&&k<=u[1]}function xr(I,u,_,k,C,R,H,ie,ae,he){const we=k?I.textSizeData:I.iconSizeData,Be=h.evaluateSizeForZoom(we,_.transform.zoom),Ve=[256/_.width*2+1,256/_.height*2+1],vt=k?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;vt.clear();const ut=I.lineVertexArray,dt=k?I.text.placedSymbolArray:I.icon.placedSymbolArray,Rt=_.transform.width/_.transform.height;let $t=!1;for(let ui=0;ui<dt.length;ui++){const It=dt.get(ui);if(It.hidden||It.writingMode===h.WritingMode.vertical&&!$t){Vr(It.numGlyphs,vt);continue}let gi;if($t=!1,he?(gi=[It.anchorX,It.anchorY,he(It.anchorX,It.anchorY),1],h.transformMat4(gi,gi,u)):(gi=[It.anchorX,It.anchorY,0,1],vn(gi,gi,u)),!hr(gi,Ve)){Vr(It.numGlyphs,vt);continue}const fi=Jt(_.transform.cameraToCenterDistance,gi[3]),Ti=h.evaluateSizeForFeature(we,Be,It),Si=H?Ti/fi:Ti*fi,Zi=new h.pointGeometry(It.anchorX,It.anchorY),Ai=mt(Zi,C,he).point,vr={},sr=Wi(It,Si,!1,ie,u,C,R,I.glyphOffsetArray,ut,vt,Ai,Zi,vr,Rt,ae,he);$t=sr.useVertical,(sr.notEnoughRoom||$t||sr.needsFlipping&&Wi(It,Si,!0,ie,u,C,R,I.glyphOffsetArray,ut,vt,Ai,Zi,vr,Rt,ae,he).notEnoughRoom)&&Vr(It.numGlyphs,vt)}k?I.text.dynamicLayoutVertexBuffer.updateData(vt):I.icon.dynamicLayoutVertexBuffer.updateData(vt)}function or(I,u,_,k,C,R,H,ie,ae,he,we,Be,Ve){const vt=ie.glyphStartIndex+ie.numGlyphs,ut=ie.lineStartIndex,dt=ie.lineStartIndex+ie.lineLength,Rt=u.getoffsetX(ie.glyphStartIndex),$t=u.getoffsetX(vt-1),ui=Zr(I*Rt,_,k,C,R,H,ie.segment,ut,dt,ae,he,we,Be,Ve);if(!ui)return null;const It=Zr(I*$t,_,k,C,R,H,ie.segment,ut,dt,ae,he,we,Be,Ve);return It?{first:ui,last:It}:null}function Ei(I,u,_,k){return I===h.WritingMode.horizontal&&Math.abs(_.y-u.y)>Math.abs(_.x-u.x)*k?{useVertical:!0}:(I===h.WritingMode.vertical?u.y<_.y:u.x>_.x)?{needsFlipping:!0}:null}function Wi(I,u,_,k,C,R,H,ie,ae,he,we,Be,Ve,vt,ut,dt){const Rt=u/24,$t=I.lineOffsetX*Rt,ui=I.lineOffsetY*Rt;let It;if(I.numGlyphs>1){const gi=I.glyphStartIndex+I.numGlyphs,fi=I.lineStartIndex,Ti=I.lineStartIndex+I.lineLength,Si=or(Rt,ie,$t,ui,_,we,Be,I,ae,R,Ve,ut,dt);if(!Si)return{notEnoughRoom:!0};const Zi=mt(Si.first.point,H,dt).point,Ai=mt(Si.last.point,H,dt).point;if(k&&!_){const vr=Ei(I.writingMode,Zi,Ai,vt);if(vr)return vr}It=[Si.first];for(let vr=I.glyphStartIndex+1;vr<gi-1;vr++)It.push(Zr(Rt*ie.getoffsetX(vr),$t,ui,_,we,Be,I.segment,fi,Ti,ae,R,Ve,ut,dt));It.push(Si.last)}else{if(k&&!_){const fi=mt(Be,C,dt).point,Ti=I.lineStartIndex+I.segment+1,Si=new h.pointGeometry(ae.getx(Ti),ae.gety(Ti)),Zi=mt(Si,C,dt),Ai=Zi.signedDistanceFromCamera>0?Zi.point:Br(Be,Si,fi,1,C,dt),vr=Ei(I.writingMode,fi,Ai,vt);if(vr)return vr}const gi=Zr(Rt*ie.getoffsetX(I.glyphStartIndex),$t,ui,_,we,Be,I.segment,I.lineStartIndex,I.lineStartIndex+I.lineLength,ae,R,Ve,ut,dt);if(!gi)return{notEnoughRoom:!0};It=[gi]}for(const gi of It)h.addDynamicAttributes(he,gi.point,gi.angle);return{}}function Br(I,u,_,k,C,R){const H=mt(I.add(I.sub(u)._unit()),C,R).point,ie=_.sub(H);return _.add(ie._mult(k/ie.mag()))}function Zr(I,u,_,k,C,R,H,ie,ae,he,we,Be,Ve,vt){const ut=k?I-u:I+u;let dt=ut>0?1:-1,Rt=0;k&&(dt*=-1,Rt=Math.PI),dt<0&&(Rt+=Math.PI);let $t=dt>0?ie+H:ie+H+1,ui=C,It=C,gi=0,fi=0;const Ti=Math.abs(ut),Si=[];for(;gi+fi<=Ti;){if($t+=dt,$t<ie||$t>=ae)return null;if(It=ui,Si.push(ui),ui=Be[$t],ui===void 0){const Ir=new h.pointGeometry(he.getx($t),he.gety($t)),nn=mt(Ir,we,vt);if(nn.signedDistanceFromCamera>0)ui=Be[$t]=nn.point;else{const cn=$t-dt;ui=Br(gi===0?R:new h.pointGeometry(he.getx(cn),he.gety(cn)),Ir,It,Ti-gi+1,we,vt)}}gi+=fi,fi=It.dist(ui)}const Zi=(Ti-gi)/fi,Ai=ui.sub(It),vr=Ai.mult(Zi)._add(It);vr._add(Ai._unit()._perp()._mult(_*dt));const sr=Rt+Math.atan2(ui.y-It.y,ui.x-It.x);return Si.push(vr),{point:vr,angle:Ve?sr:0,path:Si}}const Pn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Vr(I,u){for(let _=0;_<I;_++){const k=u.length;u.resize(k+4),u.float32.set(Pn,3*k)}}function vn(I,u,_){const k=u[0],C=u[1];return I[0]=_[0]*k+_[4]*C+_[12],I[1]=_[1]*k+_[5]*C+_[13],I[3]=_[3]*k+_[7]*C+_[15],I}const Pr=100;class _n{constructor(u,_=new te(u.width+200,u.height+200,25),k=new te(u.width+200,u.height+200,25)){this.transform=u,this.grid=_,this.ignoredGrid=k,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Pr,this.screenBottomBoundary=u.height+Pr,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,_,k,C,R,H){const ie=this.projectAndGetPerspectiveRatio(C,u.anchorPointX,u.anchorPointY,H),ae=k*ie.perspectiveRatio,he=u.x1*ae+ie.point.x,we=u.y1*ae+ie.point.y,Be=u.x2*ae+ie.point.x,Ve=u.y2*ae+ie.point.y;return!this.isInsideGrid(he,we,Be,Ve)||_!=="always"&&this.grid.hitTest(he,we,Be,Ve,_,R)||ie.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[he,we,Be,Ve],offscreen:this.isOffscreen(he,we,Be,Ve)}}placeCollisionCircles(u,_,k,C,R,H,ie,ae,he,we,Be,Ve,vt,ut){const dt=[],Rt=new h.pointGeometry(_.anchorX,_.anchorY),$t=mt(Rt,H,ut),ui=Jt(this.transform.cameraToCenterDistance,$t.signedDistanceFromCamera),It=(we?R/ui:R*ui)/h.ONE_EM,gi=mt(Rt,ie,ut).point,fi=or(It,C,_.lineOffsetX*It,_.lineOffsetY*It,!1,gi,Rt,_,k,ie,{},!1,ut);let Ti=!1,Si=!1,Zi=!0;if(fi){const Ai=.5*Ve*ui+vt,vr=new h.pointGeometry(-100,-100),sr=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ir=new ze,nn=fi.first,cn=fi.last;let P=[];for(let le=nn.path.length-1;le>=1;le--)P.push(nn.path[le]);for(let le=1;le<cn.path.length;le++)P.push(cn.path[le]);const j=2.5*Ai;if(ae){const le=P.map(Ae=>mt(Ae,ae,ut));P=le.some(Ae=>Ae.signedDistanceFromCamera<=0)?[]:le.map(Ae=>Ae.point)}let Q=[];if(P.length>0){const le=P[0].clone(),Ae=P[0].clone();for(let Fe=1;Fe<P.length;Fe++)le.x=Math.min(le.x,P[Fe].x),le.y=Math.min(le.y,P[Fe].y),Ae.x=Math.max(Ae.x,P[Fe].x),Ae.y=Math.max(Ae.y,P[Fe].y);Q=le.x>=vr.x&&Ae.x<=sr.x&&le.y>=vr.y&&Ae.y<=sr.y?[P]:Ae.x<vr.x||le.x>sr.x||Ae.y<vr.y||le.y>sr.y?[]:h.clipLine([P],vr.x,vr.y,sr.x,sr.y)}for(const le of Q){Ir.reset(le,.25*Ai);let Ae=0;Ae=Ir.length<=.5*Ai?1:Math.ceil(Ir.paddedLength/j)+1;for(let Fe=0;Fe<Ae;Fe++){const Oe=Fe/Math.max(Ae-1,1),He=Ir.lerp(Oe),Qe=He.x+Pr,ct=He.y+Pr;dt.push(Qe,ct,Ai,0);const Ut=Qe-Ai,ci=ct-Ai,li=Qe+Ai,ei=ct+Ai;if(Zi=Zi&&this.isOffscreen(Ut,ci,li,ei),Si=Si||this.isInsideGrid(Ut,ci,li,ei),u!=="always"&&this.grid.hitTestCircle(Qe,ct,Ai,u,Be)&&(Ti=!0,!he))return{circles:[],offscreen:!1,collisionDetected:Ti}}}}return{circles:!he&&Ti||!Si||ui<this.perspectiveRatioCutoff?[]:dt,offscreen:Zi,collisionDetected:Ti}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const _=[];let k=1/0,C=1/0,R=-1/0,H=-1/0;for(const we of u){const Be=new h.pointGeometry(we.x+Pr,we.y+Pr);k=Math.min(k,Be.x),C=Math.min(C,Be.y),R=Math.max(R,Be.x),H=Math.max(H,Be.y),_.push(Be)}const ie=this.grid.query(k,C,R,H).concat(this.ignoredGrid.query(k,C,R,H)),ae={},he={};for(const we of ie){const Be=we.key;if(ae[Be.bucketInstanceId]===void 0&&(ae[Be.bucketInstanceId]={}),ae[Be.bucketInstanceId][Be.featureIndex])continue;const Ve=[new h.pointGeometry(we.x1,we.y1),new h.pointGeometry(we.x2,we.y1),new h.pointGeometry(we.x2,we.y2),new h.pointGeometry(we.x1,we.y2)];h.polygonIntersectsPolygon(_,Ve)&&(ae[Be.bucketInstanceId][Be.featureIndex]=!0,he[Be.bucketInstanceId]===void 0&&(he[Be.bucketInstanceId]=[]),he[Be.bucketInstanceId].push(Be.featureIndex))}return he}insertCollisionBox(u,_,k,C,R,H){(k?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:R,collisionGroupID:H,overlapMode:_},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,_,k,C,R,H){const ie=k?this.ignoredGrid:this.grid,ae={bucketInstanceId:C,featureIndex:R,collisionGroupID:H,overlapMode:_};for(let he=0;he<u.length;he+=4)ie.insertCircle(ae,u[he],u[he+1],u[he+2])}projectAndGetPerspectiveRatio(u,_,k,C){let R;return C?(R=[_,k,C(_,k),1],h.transformMat4(R,R,u)):(R=[_,k,0,1],vn(R,R,u)),{point:new h.pointGeometry((R[0]/R[3]+1)/2*this.transform.width+Pr,(-R[1]/R[3]+1)/2*this.transform.height+Pr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/R[3]*.5}}isOffscreen(u,_,k,C){return k<Pr||u>=this.screenRightBoundary||C<Pr||_>this.screenBottomBoundary}isInsideGrid(u,_,k,C){return k>=0&&u<this.gridRightBoundary&&C>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const u=h.identity([]);return h.translate(u,u,[-100,-100,0]),u}}function Tn(I,u,_){return u*(h.EXTENT/(I.tileSize*Math.pow(2,_-I.tileID.overscaledZ)))}class Tr{constructor(u,_,k,C){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?_:-_))):C&&k?1:0,this.placed=k}isHidden(){return this.opacity===0&&!this.placed}}class Qr{constructor(u,_,k,C,R){this.text=new Tr(u?u.text:null,_,k,R),this.icon=new Tr(u?u.icon:null,_,C,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Un{constructor(u,_,k){this.text=u,this.icon=_,this.skipFade=k}}class Bi{constructor(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]}}class Le{constructor(u,_,k,C,R){this.bucketInstanceId=u,this.featureIndex=_,this.sourceLayerIndex=k,this.bucketIndex=C,this.tileID=R}}class $n{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const _=++this.maxGroupID;this.collisionGroups[u]={ID:_,predicate:k=>k.collisionGroupID===_}}return this.collisionGroups[u]}}function eo(I,u,_,k,C){const{horizontalAlign:R,verticalAlign:H}=h.getAnchorAlignment(I),ie=-(R-.5)*u,ae=-(H-.5)*_,he=h.evaluateVariableOffset(I,k);return new h.pointGeometry(ie+he[0]*C,ae+he[1]*C)}function Xn(I,u,_,k,C,R){const{x1:H,x2:ie,y1:ae,y2:he,anchorPointX:we,anchorPointY:Be}=I,Ve=new h.pointGeometry(u,_);return k&&Ve._rotate(C?R:-R),{x1:H+Ve.x,y1:ae+Ve.y,x2:ie+Ve.x,y2:he+Ve.y,anchorPointX:we,anchorPointY:Be}}class de{constructor(u,_,k,C,R){this.transform=u.clone(),this.terrain=_,this.collisionIndex=new _n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=k,this.retainedQueryData={},this.collisionGroups=new $n(C),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,_,k,C){const R=k.getBucket(_),H=k.latestFeatureIndex;if(!R||!H||_.id!==R.layerIds[0])return;const ie=k.collisionBoxArray,ae=R.layers[0].layout,he=Math.pow(2,this.transform.zoom-k.tileID.overscaledZ),we=k.tileSize/h.EXTENT,Be=this.transform.calculatePosMatrix(k.tileID.toUnwrapped()),Ve=ae.get("text-pitch-alignment")==="map",vt=ae.get("text-rotation-alignment")==="map",ut=Tn(k,1,this.transform.zoom),dt=je(Be,Ve,vt,this.transform,ut);let Rt=null;if(Ve){const ui=ot(Be,Ve,vt,this.transform,ut);Rt=h.multiply([],this.transform.labelPlaneMatrix,ui)}this.retainedQueryData[R.bucketInstanceId]=new Le(R.bucketInstanceId,H,R.sourceLayerIndex,R.index,k.tileID);const $t={bucket:R,layout:ae,posMatrix:Be,textLabelPlaneMatrix:dt,labelToScreenMatrix:Rt,scale:he,textPixelRatio:we,holdingForFade:k.holdingForFade(),collisionBoxArray:ie,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(C)for(const ui of R.sortKeyRanges){const{sortKey:It,symbolInstanceStart:gi,symbolInstanceEnd:fi}=ui;u.push({sortKey:It,symbolInstanceStart:gi,symbolInstanceEnd:fi,parameters:$t})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:$t})}attemptAnchorPlacement(u,_,k,C,R,H,ie,ae,he,we,Be,Ve,vt,ut,dt,Rt){const $t=[Ve.textOffset0,Ve.textOffset1],ui=eo(u,k,C,$t,R),It=this.collisionIndex.placeCollisionBox(Xn(_,ui.x,ui.y,H,ie,this.transform.angle),Be,ae,he,we.predicate,Rt);if((!dt||this.collisionIndex.placeCollisionBox(Xn(dt,ui.x,ui.y,H,ie,this.transform.angle),Be,ae,he,we.predicate,Rt).box.length!==0)&&It.box.length>0){let gi;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ve.crossTileID]&&this.prevPlacement.placements[Ve.crossTileID]&&this.prevPlacement.placements[Ve.crossTileID].text&&(gi=this.prevPlacement.variableOffsets[Ve.crossTileID].anchor),Ve.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ve.crossTileID]={textOffset:$t,width:k,height:C,anchor:u,textBoxScale:R,prevAnchor:gi},this.markUsedJustification(vt,u,Ve,ut),vt.allowVerticalPlacement&&(this.markUsedOrientation(vt,ut,Ve),this.placedOrientations[Ve.crossTileID]=ut),{shift:ui,placedGlyphBoxes:It}}}placeLayerBucketPart(u,_,k){const{bucket:C,layout:R,posMatrix:H,textLabelPlaneMatrix:ie,labelToScreenMatrix:ae,textPixelRatio:he,holdingForFade:we,collisionBoxArray:Be,partiallyEvaluatedTextSize:Ve,collisionGroup:vt}=u.parameters,ut=R.get("text-optional"),dt=R.get("icon-optional"),Rt=h.getOverlapMode(R,"text-overlap","text-allow-overlap"),$t=Rt==="always",ui=h.getOverlapMode(R,"icon-overlap","icon-allow-overlap"),It=ui==="always",gi=R.get("text-rotation-alignment")==="map",fi=R.get("text-pitch-alignment")==="map",Ti=R.get("icon-text-fit")!=="none",Si=R.get("symbol-z-order")==="viewport-y",Zi=$t&&(It||!C.hasIconData()||dt),Ai=It&&($t||!C.hasTextData()||ut);!C.collisionArrays&&Be&&C.deserializeCollisionBoxes(Be);const vr=(sr,Ir)=>{if(_[sr.crossTileID])return;if(we)return void(this.placements[sr.crossTileID]=new Un(!1,!1,!1));let nn=!1,cn=!1,P=!0,j=null,Q={box:null,offscreen:null},le={box:null,offscreen:null},Ae=null,Fe=null,Oe=null,He=0,Qe=0,ct=0;Ir.textFeatureIndex?He=Ir.textFeatureIndex:sr.useRuntimeCollisionCircles&&(He=sr.featureIndex),Ir.verticalTextFeatureIndex&&(Qe=Ir.verticalTextFeatureIndex);const Ut=this.retainedQueryData[C.bucketInstanceId].tileID,ci=this.terrain?(bi,Pt)=>this.terrain.getElevation(Ut,bi,Pt):null;for(const bi of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Pt=Ir[bi];Pt&&(Pt.elevation=ci?ci(Pt.anchorPointX,Pt.anchorPointY):0)}const li=Ir.textBox;if(li){const bi=Ft=>{let Pi=h.WritingMode.horizontal;if(C.allowVerticalPlacement&&!Ft&&this.prevPlacement){const Ni=this.prevPlacement.placedOrientations[sr.crossTileID];Ni&&(this.placedOrientations[sr.crossTileID]=Ni,Pi=Ni,this.markUsedOrientation(C,Pi,sr))}return Pi},Pt=(Ft,Pi)=>{if(C.allowVerticalPlacement&&sr.numVerticalGlyphVertices>0&&Ir.verticalTextBox){for(const Ni of C.writingModes)if(Ni===h.WritingMode.vertical?(Q=Pi(),le=Q):Q=Ft(),Q&&Q.box&&Q.box.length)break}else Q=Ft()};if(R.get("text-variable-anchor")){let Ft=R.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[sr.crossTileID]){const Ci=this.prevPlacement.variableOffsets[sr.crossTileID];Ft.indexOf(Ci.anchor)>0&&(Ft=Ft.filter(mr=>mr!==Ci.anchor),Ft.unshift(Ci.anchor))}const Pi=(Ci,mr,cr)=>{const tn=Ci.x2-Ci.x1,gr=Ci.y2-Ci.y1,Vn=sr.textBoxScale,Wn=Ti&&ui==="never"?mr:null;let In={box:[],offscreen:!1};const xn=Rt!=="never"?2*Ft.length:Ft.length;for(let jn=0;jn<xn;++jn){const Zn=this.attemptAnchorPlacement(Ft[jn%Ft.length],Ci,tn,gr,Vn,gi,fi,he,H,vt,jn>=Ft.length?Rt:"never",sr,C,cr,Wn,ci);if(Zn&&(In=Zn.placedGlyphBoxes,In&&In.box&&In.box.length)){nn=!0,j=Zn.shift;break}}return In};Pt(()=>Pi(li,Ir.iconBox,h.WritingMode.horizontal),()=>{const Ci=Ir.verticalTextBox;return C.allowVerticalPlacement&&!(Q&&Q.box&&Q.box.length)&&sr.numVerticalGlyphVertices>0&&Ci?Pi(Ci,Ir.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null}}),Q&&(nn=Q.box,P=Q.offscreen);const Ni=bi(Q&&Q.box);if(!nn&&this.prevPlacement){const Ci=this.prevPlacement.variableOffsets[sr.crossTileID];Ci&&(this.variableOffsets[sr.crossTileID]=Ci,this.markUsedJustification(C,Ci.anchor,sr,Ni))}}else{const Ft=(Pi,Ni)=>{const Ci=this.collisionIndex.placeCollisionBox(Pi,Rt,he,H,vt.predicate,ci);return Ci&&Ci.box&&Ci.box.length&&(this.markUsedOrientation(C,Ni,sr),this.placedOrientations[sr.crossTileID]=Ni),Ci};Pt(()=>Ft(li,h.WritingMode.horizontal),()=>{const Pi=Ir.verticalTextBox;return C.allowVerticalPlacement&&sr.numVerticalGlyphVertices>0&&Pi?Ft(Pi,h.WritingMode.vertical):{box:null,offscreen:null}}),bi(Q&&Q.box&&Q.box.length)}}if(Ae=Q,nn=Ae&&Ae.box&&Ae.box.length>0,P=Ae&&Ae.offscreen,sr.useRuntimeCollisionCircles){const bi=C.text.placedSymbolArray.get(sr.centerJustifiedTextSymbolIndex),Pt=h.evaluateSizeForFeature(C.textSizeData,Ve,bi),Ft=R.get("text-padding");Fe=this.collisionIndex.placeCollisionCircles(Rt,bi,C.lineVertexArray,C.glyphOffsetArray,Pt,H,ie,ae,k,fi,vt.predicate,sr.collisionCircleDiameter,Ft,ci),Fe.circles.length&&Fe.collisionDetected&&!k&&h.warnOnce("Collisions detected, but collision boxes are not shown"),nn=$t||Fe.circles.length>0&&!Fe.collisionDetected,P=P&&Fe.offscreen}if(Ir.iconFeatureIndex&&(ct=Ir.iconFeatureIndex),Ir.iconBox){const bi=Pt=>{const Ft=Ti&&j?Xn(Pt,j.x,j.y,gi,fi,this.transform.angle):Pt;return this.collisionIndex.placeCollisionBox(Ft,ui,he,H,vt.predicate,ci)};le&&le.box&&le.box.length&&Ir.verticalIconBox?(Oe=bi(Ir.verticalIconBox),cn=Oe.box.length>0):(Oe=bi(Ir.iconBox),cn=Oe.box.length>0),P=P&&Oe.offscreen}const ei=ut||sr.numHorizontalGlyphVertices===0&&sr.numVerticalGlyphVertices===0,qi=dt||sr.numIconVertices===0;if(ei||qi?qi?ei||(cn=cn&&nn):nn=cn&&nn:cn=nn=cn&&nn,nn&&Ae&&Ae.box&&this.collisionIndex.insertCollisionBox(Ae.box,Rt,R.get("text-ignore-placement"),C.bucketInstanceId,le&&le.box&&Qe?Qe:He,vt.ID),cn&&Oe&&this.collisionIndex.insertCollisionBox(Oe.box,ui,R.get("icon-ignore-placement"),C.bucketInstanceId,ct,vt.ID),Fe&&(nn&&this.collisionIndex.insertCollisionCircles(Fe.circles,Rt,R.get("text-ignore-placement"),C.bucketInstanceId,He,vt.ID),k)){const bi=C.bucketInstanceId;let Pt=this.collisionCircleArrays[bi];Pt===void 0&&(Pt=this.collisionCircleArrays[bi]=new Bi);for(let Ft=0;Ft<Fe.circles.length;Ft+=4)Pt.circles.push(Fe.circles[Ft+0]),Pt.circles.push(Fe.circles[Ft+1]),Pt.circles.push(Fe.circles[Ft+2]),Pt.circles.push(Fe.collisionDetected?1:0)}if(sr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[sr.crossTileID]=new Un(nn||Zi,cn||Ai,P||C.justReloaded),_[sr.crossTileID]=!0};if(Si){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const sr=C.getSortedSymbolIndexes(this.transform.angle);for(let Ir=sr.length-1;Ir>=0;--Ir){const nn=sr[Ir];vr(C.symbolInstances.get(nn),C.collisionArrays[nn])}}else for(let sr=u.symbolInstanceStart;sr<u.symbolInstanceEnd;sr++)vr(C.symbolInstances.get(sr),C.collisionArrays[sr]);if(k&&C.bucketInstanceId in this.collisionCircleArrays){const sr=this.collisionCircleArrays[C.bucketInstanceId];h.invert(sr.invProjMatrix,H),sr.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(u,_,k,C){let R;R=C===h.WritingMode.vertical?k.verticalPlacedTextSymbolIndex:{left:k.leftJustifiedTextSymbolIndex,center:k.centerJustifiedTextSymbolIndex,right:k.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(_)];const H=[k.leftJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.rightJustifiedTextSymbolIndex,k.verticalPlacedTextSymbolIndex];for(const ie of H)ie>=0&&(u.text.placedSymbolArray.get(ie).crossTileID=R>=0&&ie!==R?0:k.crossTileID)}markUsedOrientation(u,_,k){const C=_===h.WritingMode.horizontal||_===h.WritingMode.horizontalOnly?_:0,R=_===h.WritingMode.vertical?_:0,H=[k.leftJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.rightJustifiedTextSymbolIndex];for(const ie of H)u.text.placedSymbolArray.get(ie).placedOrientation=C;k.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(k.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let k=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const C=_?_.symbolFadeChange(u):1,R=_?_.opacities:{},H=_?_.variableOffsets:{},ie=_?_.placedOrientations:{};for(const ae in this.placements){const he=this.placements[ae],we=R[ae];we?(this.opacities[ae]=new Qr(we,C,he.text,he.icon),k=k||he.text!==we.text.placed||he.icon!==we.icon.placed):(this.opacities[ae]=new Qr(null,C,he.text,he.icon,he.skipFade),k=k||he.text||he.icon)}for(const ae in R){const he=R[ae];if(!this.opacities[ae]){const we=new Qr(he,C,!1,!1);we.isHidden()||(this.opacities[ae]=we,k=k||he.text.placed||he.icon.placed)}}for(const ae in H)this.variableOffsets[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.variableOffsets[ae]=H[ae]);for(const ae in ie)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=ie[ae]);if(_&&_.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");k?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:u)}updateLayerOpacities(u,_){const k={};for(const C of _){const R=C.getBucket(u);R&&C.latestFeatureIndex&&u.id===R.layerIds[0]&&this.updateBucketOpacities(R,k,C.collisionBoxArray)}}updateBucketOpacities(u,_,k){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const C=u.layers[0].layout,R=new Qr(null,0,!1,!1,!0),H=C.get("text-allow-overlap"),ie=C.get("icon-allow-overlap"),ae=C.get("text-variable-anchor"),he=C.get("text-rotation-alignment")==="map",we=C.get("text-pitch-alignment")==="map",Be=C.get("icon-text-fit")!=="none",Ve=new Qr(null,0,H&&(ie||!u.hasIconData()||C.get("icon-optional")),ie&&(H||!u.hasTextData()||C.get("text-optional")),!0);!u.collisionArrays&&k&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(k);const vt=(ut,dt,Rt)=>{for(let $t=0;$t<dt/4;$t++)ut.opacityVertexArray.emplaceBack(Rt)};for(let ut=0;ut<u.symbolInstances.length;ut++){const dt=u.symbolInstances.get(ut),{numHorizontalGlyphVertices:Rt,numVerticalGlyphVertices:$t,crossTileID:ui}=dt;let It=this.opacities[ui];_[ui]?It=R:It||(It=Ve,this.opacities[ui]=It),_[ui]=!0;const gi=dt.numIconVertices>0,fi=this.placedOrientations[dt.crossTileID],Ti=fi===h.WritingMode.vertical,Si=fi===h.WritingMode.horizontal||fi===h.WritingMode.horizontalOnly;if(Rt>0||$t>0){const Zi=jt(It.text);vt(u.text,Rt,Ti?ki:Zi),vt(u.text,$t,Si?ki:Zi);const Ai=It.text.isHidden();[dt.rightJustifiedTextSymbolIndex,dt.centerJustifiedTextSymbolIndex,dt.leftJustifiedTextSymbolIndex].forEach(Ir=>{Ir>=0&&(u.text.placedSymbolArray.get(Ir).hidden=Ai||Ti?1:0)}),dt.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(dt.verticalPlacedTextSymbolIndex).hidden=Ai||Si?1:0);const vr=this.variableOffsets[dt.crossTileID];vr&&this.markUsedJustification(u,vr.anchor,dt,fi);const sr=this.placedOrientations[dt.crossTileID];sr&&(this.markUsedJustification(u,"left",dt,sr),this.markUsedOrientation(u,sr,dt))}if(gi){const Zi=jt(It.icon),Ai=!(Be&&dt.verticalPlacedIconSymbolIndex&&Ti);dt.placedIconSymbolIndex>=0&&(vt(u.icon,dt.numIconVertices,Ai?Zi:ki),u.icon.placedSymbolArray.get(dt.placedIconSymbolIndex).hidden=It.icon.isHidden()),dt.verticalPlacedIconSymbolIndex>=0&&(vt(u.icon,dt.numVerticalIconVertices,Ai?ki:Zi),u.icon.placedSymbolArray.get(dt.verticalPlacedIconSymbolIndex).hidden=It.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Zi=u.collisionArrays[ut];if(Zi){let Ai=new h.pointGeometry(0,0);if(Zi.textBox||Zi.verticalTextBox){let sr=!0;if(ae){const Ir=this.variableOffsets[ui];Ir?(Ai=eo(Ir.anchor,Ir.width,Ir.height,Ir.textOffset,Ir.textBoxScale),he&&Ai._rotate(we?this.transform.angle:-this.transform.angle)):sr=!1}Zi.textBox&&fe(u.textCollisionBox.collisionVertexArray,It.text.placed,!sr||Ti,Ai.x,Ai.y),Zi.verticalTextBox&&fe(u.textCollisionBox.collisionVertexArray,It.text.placed,!sr||Si,Ai.x,Ai.y)}const vr=Boolean(!Si&&Zi.verticalIconBox);Zi.iconBox&&fe(u.iconCollisionBox.collisionVertexArray,It.icon.placed,vr,Be?Ai.x:0,Be?Ai.y:0),Zi.verticalIconBox&&fe(u.iconCollisionBox.collisionVertexArray,It.icon.placed,!vr,Be?Ai.x:0,Be?Ai.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=ut.invProjMatrix,u.placementViewportMatrix=ut.viewportMatrix,u.collisionCircleArray=ut.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,_){const k=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*k>u}setStale(){this.stale=!0}}function fe(I,u,_,k,C){I.emplaceBack(u?1:0,_?1:0,k||0,C||0),I.emplaceBack(u?1:0,_?1:0,k||0,C||0),I.emplaceBack(u?1:0,_?1:0,k||0,C||0),I.emplaceBack(u?1:0,_?1:0,k||0,C||0)}const Te=Math.pow(2,25),Ke=Math.pow(2,24),et=Math.pow(2,17),wt=Math.pow(2,16),De=Math.pow(2,9),Nt=Math.pow(2,8),Tt=Math.pow(2,1);function jt(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const u=I.placed?1:0,_=Math.floor(127*I.opacity);return _*Te+u*Ke+_*et+u*wt+_*De+u*Nt+_*Tt+u}const ki=0;class Ri{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,_,k,C,R){const H=this._bucketParts;for(;this._currentTileIndex<u.length;)if(_.getBucketParts(H,C,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,H.sort((ie,ae)=>ie.sortKey-ae.sortKey));this._currentPartIndex<H.length;)if(_.placeLayerBucketPart(H[this._currentPartIndex],this._seenCrossTileIDs,k),this._currentPartIndex++,R())return!0;return!1}}class wi{constructor(u,_,k,C,R,H,ie,ae){this.placement=new de(u,_,H,ie,ae),this._currentPlacementIndex=k.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(u,_,k){const C=h.exported.now(),R=()=>{const H=h.exported.now()-C;return!this._forceFullPlacement&&H>2};for(;this._currentPlacementIndex>=0;){const H=_[u[this._currentPlacementIndex]],ie=this.placement.collisionIndex.transform.zoom;if(H.type==="symbol"&&(!H.minzoom||H.minzoom<=ie)&&(!H.maxzoom||H.maxzoom>ie)){if(this._inProgressLayer||(this._inProgressLayer=new Ri(H)),this._inProgressLayer.continuePlacement(k[H.source],this.placement,this._showCollisionBoxes,H,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const kr=512/h.EXTENT/2;class Sr{constructor(u,_,k){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=k;for(let C=0;C<_.length;C++){const R=_.get(C),H=R.key;this.indexedSymbolInstances[H]||(this.indexedSymbolInstances[H]=[]),this.indexedSymbolInstances[H].push({crossTileID:R.crossTileID,coord:this.getScaledCoordinates(R,u)})}}getScaledCoordinates(u,_){const k=kr/Math.pow(2,_.canonical.z-this.tileID.canonical.z);return{x:Math.floor((_.canonical.x*h.EXTENT+u.anchorX)*k),y:Math.floor((_.canonical.y*h.EXTENT+u.anchorY)*k)}}findMatches(u,_,k){const C=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z);for(let R=0;R<u.length;R++){const H=u.get(R);if(H.crossTileID)continue;const ie=this.indexedSymbolInstances[H.key];if(!ie)continue;const ae=this.getScaledCoordinates(H,_);for(const he of ie)if(Math.abs(he.coord.x-ae.x)<=C&&Math.abs(he.coord.y-ae.y)<=C&&!k[he.crossTileID]){k[he.crossTileID]=!0,H.crossTileID=he.crossTileID;break}}}}class ji{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const _=Math.round((u-this.lng)/360);if(_!==0)for(const k in this.indexes){const C=this.indexes[k],R={};for(const H in C){const ie=C[H];ie.tileID=ie.tileID.unwrapTo(ie.tileID.wrap+_),R[ie.tileID.key]=ie}this.indexes[k]=R}this.lng=u}addBucket(u,_,k){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let R=0;R<_.symbolInstances.length;R++)_.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const C=this.usedCrossTileIDs[u.overscaledZ];for(const R in this.indexes){const H=this.indexes[R];if(Number(R)>u.overscaledZ)for(const ie in H){const ae=H[ie];ae.tileID.isChildOf(u)&&ae.findMatches(_.symbolInstances,u,C)}else{const ie=H[u.scaledTo(Number(R)).key];ie&&ie.findMatches(_.symbolInstances,u,C)}}for(let R=0;R<_.symbolInstances.length;R++){const H=_.symbolInstances.get(R);H.crossTileID||(H.crossTileID=k.generate(),C[H.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Sr(u,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(u,_){for(const k in _.indexedSymbolInstances)for(const C of _.indexedSymbolInstances[k])delete this.usedCrossTileIDs[u][C.crossTileID]}removeStaleBuckets(u){let _=!1;for(const k in this.indexes){const C=this.indexes[k];for(const R in C)u[C[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(k,C[R]),delete C[R],_=!0)}return _}}class jr{constructor(){this.layerIndexes={},this.crossTileIDs=new ji,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,_,k){let C=this.layerIndexes[u.id];C===void 0&&(C=this.layerIndexes[u.id]=new Gr);let R=!1;const H={};C.handleWrapJump(k);for(const ie of _){const ae=ie.getBucket(u);ae&&u.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(ie.tileID,ae,this.crossTileIDs)&&(R=!0),H[ae.bucketInstanceId]=!0)}return C.removeStaleBuckets(H)&&(R=!0),R}pruneUnusedLayers(u){const _={};u.forEach(k=>{_[k]=!0});for(const k in this.layerIndexes)_[k]||delete this.layerIndexes[k]}}var dn=h.createLayout([{name:"a_pos",type:"Int16",components:2}]);class $r extends h.Evented{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=u._cache.max,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const u in this._tiles){const _=this._tiles[u];_.textures.forEach(k=>k.destroy()),_.textures=[]}}update(u,_){this.sourceCache.update(u,_),this._renderableTilesKeys=[];for(const k of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:_}))this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),h.ortho(k.posMatrix,0,h.EXTENT,0,h.EXTENT,0,1),this._tiles[k.key]=new Ct(k,this.tileSize))}removeOutdated(u){const _={};this.renderHistory=this.renderHistory.filter((k,C)=>this.renderHistory.indexOf(k)===C).slice(0,this.renderHistorySize);for(const k of this._renderableTilesKeys)_[k]=!0;for(const k of this.renderHistory)_[k]=!0;for(const k in this._tiles)_[k]||(this._tiles[k].clearTextures(u),delete this._tiles[k])}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const _={};for(const k of this._renderableTilesKeys){const C=this._tiles[k].tileID;if(C.canonical.equals(u.canonical)){const R=u.clone();R.posMatrix=new Float64Array(16),h.ortho(R.posMatrix,0,h.EXTENT,0,h.EXTENT,0,1),_[k]=R}else if(C.canonical.isChildOf(u.canonical)){const R=u.clone();R.posMatrix=new Float64Array(16);const H=C.canonical.z-u.canonical.z,ie=C.canonical.x-(C.canonical.x>>H<<H),ae=C.canonical.y-(C.canonical.y>>H<<H),he=h.EXTENT>>H;h.ortho(R.posMatrix,0,he,0,he,0,1),h.translate(R.posMatrix,R.posMatrix,[-ie*he,-ae*he,0]),_[k]=R}else if(u.canonical.isChildOf(C.canonical)){const R=u.clone();R.posMatrix=new Float64Array(16);const H=u.canonical.z-C.canonical.z,ie=u.canonical.x-(u.canonical.x>>H<<H),ae=u.canonical.y-(u.canonical.y>>H<<H),he=h.EXTENT>>H;h.ortho(R.posMatrix,0,h.EXTENT,0,h.EXTENT,0,1),h.translate(R.posMatrix,R.posMatrix,[ie*he,ae*he,0]),h.scale(R.posMatrix,R.posMatrix,[1/2**H,1/2**H,0]),_[k]=R}}return _}getSourceTile(u,_){const k=this.sourceCache._source;let C=u.overscaledZ-this.deltaZoom;if(C>k.maxzoom&&(C=k.maxzoom),C<k.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(C).key);let R=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!R||!R.dem)&&_)for(;C>=k.minzoom&&(!R||!R.dem);)R=this.sourceCache.getTileByID(u.scaledTo(C--).key);return R}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(_=>_.timeLoaded>=u)}}class un{constructor(u,_,k){this.style=u,this.sourceCache=new $r(_),this.options=k,this.exaggeration=typeof k.exaggeration=="number"?k.exaggeration:1,this.elevationOffset=typeof k.elevationOffset=="number"?k.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(u,_,k,C=h.EXTENT){if(!(_>=0&&_<C&&k>=0&&k<C))return this.elevationOffset;let R=0;const H=this.getTerrainData(u);if(H.tile&&H.tile.dem){const ie=h.transformMat4$1([],[_/C*h.EXTENT,k/C*h.EXTENT],H.u_terrain_matrix),ae=[ie[0]*H.tile.dem.dim,ie[1]*H.tile.dem.dim],he=[Math.floor(ae[0]),Math.floor(ae[1])],we=H.tile.dem.get(he[0],he[1]),Be=H.tile.dem.get(he[0],he[1]+1),Ve=H.tile.dem.get(he[0]+1,he[1]),vt=H.tile.dem.get(he[0]+1,he[1]+1);R=h.number(h.number(we,Be,ae[0]-he[0]),h.number(Ve,vt,ae[0]-he[0]),ae[1]-he[1])}return R}rememberForRerender(u,_){for(const k in this.sourceCache._tiles){const C=this.sourceCache._tiles[k];(C.tileID.equals(_)||C.tileID.isChildOf(_))&&(u===this.sourceCache.sourceCache.id&&(C.timeLoaded=Date.now()),this._rerender[u]=this._rerender[u]||{},this._rerender[u][C.tileID.key]=!0)}}needsRerender(u,_){return this._rerender[u]&&this._rerender[u][_.key]}clearRerenderCache(){this._rerender={}}getElevation(u,_,k,C=h.EXTENT){return(this.getDEMElevation(u,_,k,C)+this.elevationOffset)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const C=this.style.map.painter.context,R=new h.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new J(C,R,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new J(C,new h.RGBAImage({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.identity([])}const _=this.sourceCache.getSourceTile(u,!0);if(_&&_.dem&&(!_.demTexture||_.needsTerrainPrepare)){const C=this.style.map.painter.context;_.demTexture=this.style.map.painter.getTileTexture(_.dem.stride),_.demTexture?_.demTexture.update(_.dem.getPixels(),{premultiply:!1}):_.demTexture=new J(C,_.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),_.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),_.needsTerrainPrepare=!1}const k=_&&_+_.tileID.key+u.key;if(k&&!this._demMatrixCache[k]){const C=this.sourceCache.sourceCache._source.maxzoom;let R=u.canonical.z-_.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=C?R=u.canonical.z-C:h.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const H=u.canonical.x-(u.canonical.x>>R<<R),ie=u.canonical.y-(u.canonical.y>>R<<R),ae=h.fromScaling(new Float64Array(16),[1/(h.EXTENT<<R),1/(h.EXTENT<<R),0]);h.translate(ae,ae,[H*h.EXTENT,ie*h.EXTENT,0]),this._demMatrixCache[u.key]={matrix:ae,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:_&&_.dem&&_.dem.dim||1,u_terrain_matrix:k?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:_&&_.dem&&_.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(_&&_.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:_}}getRTTFramebuffer(){const u=this.style.map.painter;if(!this._rttFramebuffer){const _=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=u.context.createFramebuffer(_,_,!0),this._rttFramebuffer.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,_,_))}return this._rttFramebuffer}getFramebuffer(u){const _=this.style.map.painter,k=_.width/devicePixelRatio,C=_.height/devicePixelRatio;return!this._fbo||this._fbo.width===k&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new J(_.context,{width:k,height:C,data:null},_.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(_.context.gl.NEAREST,_.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new J(_.context,{width:k,height:C,data:null},_.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(_.context.gl.NEAREST,_.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=_.context.createFramebuffer(k,C,!0),this._fbo.depthAttachment.set(_.context.createRenderbuffer(_.context.gl.DEPTH_COMPONENT16,k,C))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const _=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,H=0;R<this._coordsTextureSize;R++)for(let ie=0;ie<this._coordsTextureSize;ie++,H+=4)_[H+0]=255&ie,_[H+1]=255&R,_[H+2]=ie>>8<<4|R>>8,_[H+3]=0;const k=new h.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(_.buffer)),C=new J(u,k,u.gl.RGBA,{premultiply:!1});return C.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(u){const _=new Uint8Array(4),k=this.style.map.painter,C=k.context,R=C.gl;C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),R.readPixels(u.x,k.height/devicePixelRatio-u.y-1,1,1,R.RGBA,R.UNSIGNED_BYTE,_),C.bindFramebuffer.set(null);const H=_[0]+(_[2]>>4<<8),ie=_[1]+((15&_[2])<<8),ae=this.coordsIndex[255-_[3]],he=ae&&this.sourceCache.getTileByID(ae);if(!he)return null;const we=this._coordsTextureSize,Be=(1<<he.tileID.canonical.z)*we;return new h.MercatorCoordinate((he.tileID.canonical.x*we+H)/Be,(he.tileID.canonical.y*we+ie)/Be,this.getElevation(he.tileID,H,ie,we))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.style.map.painter.context,_=new h.PosArray,k=new h.TriangleIndexArray,C=this.meshSize,R=h.EXTENT/C,H=C*C;for(let ie=0;ie<=C;ie++)for(let ae=0;ae<=C;ae++)_.emplaceBack(ae*R,ie*R);for(let ie=0;ie<H;ie+=C+1)for(let ae=0;ae<C;ae++)k.emplaceBack(ae+ie,C+ae+ie+1,C+ae+ie+2),k.emplaceBack(ae+ie,C+ae+ie+2,ae+ie+1);return this._mesh={indexBuffer:u.createIndexBuffer(k),vertexBuffer:u.createVertexBuffer(_,dn.members),segments:h.SegmentVector.simpleSegment(0,0,_.length,k.length)},this._mesh}getMinMaxElevation(u){const _=this.getTerrainData(u).tile,k={minElevation:null,maxElevation:null};return _&&_.dem&&(k.minElevation=(_.dem.min+this.elevationOffset)*this.exaggeration,k.maxElevation=(_.dem.max+this.elevationOffset)*this.exaggeration),k}}const bn=(I,u)=>h.emitValidationErrors(I,u&&u.filter(_=>_.identifier!=="source.canvas")),On=h.pick(di,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),_o=h.pick(di,["setCenter","setZoom","setBearing","setPitch"]),qn=function(){const I={},u=h.spec.$version;for(const _ in h.spec.$root){const k=h.spec.$root[_];if(k.required){let C=null;C=_==="version"?u:k.type==="array"?[]:{},C!=null&&(I[_]=C)}}return I}();class bo extends h.Evented{constructor(u,_={}){super(),this.map=u,this.dispatcher=new nt(yt(),this),this.imageManager=new ne,this.imageManager.setEventedParent(this),this.glyphManager=new be(u._requestManager,_.localIdeographFontFamily),this.lineAtlas=new tt(256,512),this.crossTileSymbolIndex=new jr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const k=this;this._rtlTextPluginCallback=bo.registerForPluginStateChange(C=>{k.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:C.pluginStatus,pluginURL:C.pluginURL},(R,H)=>{if(h.triggerPluginCompletionEvent(R),H&&H.every(ie=>ie))for(const ie in k.sourceCaches)k.sourceCaches[ie].reload()})}),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const R=this.sourceCaches[C.sourceId];if(!R)return;const H=R.getSource();if(H&&H.vectorLayerIds)for(const ie in this._layers){const ae=this._layers[ie];ae.source===H.id&&this._validateLayer(ae)}})}loadURL(u,_={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const k=typeof _.validate!="boolean"||_.validate,C=this.map._requestManager.transformRequest(u,h.ResourceType.Style);this._request=h.getJSON(C,(R,H)=>{this._request=null,R?this.fire(new h.ErrorEvent(R)):H&&this._load(H,k)})}loadJSON(u,_={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(u,_.validate!==!1)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(qn,!1)}_load(u,_){if(_&&bn(this,h.validateStyle(u)))return;this._loaded=!0,this.stylesheet=u;for(const C in u.sources)this.addSource(C,u.sources[C],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);const k=nr(this.stylesheet.layers);this._order=k.map(C=>C.id),this._layers={},this._serializedLayers={};for(let C of k)C=h.createStyleLayer(C),C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new me(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}_loadSprite(u){this._spriteRequest=function(_,k,C,R){let H,ie,ae;const he=C>1?"@2x":"";let we=h.getJSON(k.transformRequest(k.normalizeSpriteURL(_,he,".json"),h.ResourceType.SpriteJSON),(vt,ut)=>{we=null,ae||(ae=vt,H=ut,Ve())}),Be=h.getImage(k.transformRequest(k.normalizeSpriteURL(_,he,".png"),h.ResourceType.SpriteImage),(vt,ut)=>{Be=null,ae||(ae=vt,ie=ut,Ve())});function Ve(){if(ae)R(ae);else if(H&&ie){const vt=h.exported.getImageData(ie),ut={};for(const dt in H){const{width:Rt,height:$t,x:ui,y:It,sdf:gi,pixelRatio:fi,stretchX:Ti,stretchY:Si,content:Zi}=H[dt],Ai=new h.RGBAImage({width:Rt,height:$t});h.RGBAImage.copy(vt,Ai,{x:ui,y:It},{x:0,y:0},{width:Rt,height:$t}),ut[dt]={data:Ai,pixelRatio:fi,sdf:gi,stretchX:Ti,stretchY:Si,content:Zi}}R(null,ut)}}return{cancel(){we&&(we.cancel(),we=null),Be&&(Be.cancel(),Be=null)}}}(u,this.map._requestManager,this.map.getPixelRatio(),(_,k)=>{if(this._spriteRequest=null,_)this.fire(new h.ErrorEvent(_));else if(k)for(const C in k)this.imageManager.addImage(C,k[C]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(u){const _=this.sourceCaches[u.source];if(!_)return;const k=u.sourceLayer;if(!k)return;const C=_.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(k)===-1)&&this.fire(new h.ErrorEvent(new Error(`Source layer "${k}" does not exist on source "${C.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const _=[];for(const k of u){const C=this._layers[k];C.type!=="custom"&&_.push(C.serialize())}return _}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const _=this._changed;if(this._changed){const C=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(C.length||R.length)&&this._updateWorkerLayers(C,R);for(const H in this._updatedSources){const ie=this._updatedSources[H];if(ie==="reload")this._reloadSource(H);else{if(ie!=="clear")throw new Error(`Invalid action ${ie}`);this._clearSource(H)}}this._updateTilesForChangedImages();for(const H in this._updatedPaintProps)this._layers[H].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const k={};for(const C in this.sourceCaches){const R=this.sourceCaches[C];k[C]=R.used,R.used=!1}for(const C of this._order){const R=this._layers[C];R.recalculate(u,this._availableImages),!R.isHidden(u.zoom)&&R.source&&(this.sourceCaches[R.source].used=!0)}for(const C in k){const R=this.sourceCaches[C];k[C]!==R.used&&R.fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(u),this.z=u.zoom,_&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const _ in this.sourceCaches)this.sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,_){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:_})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(u){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),u){const _=this.sourceCaches[u.source];if(!_)throw new Error(`cannot load terrain, because there exists no source with ID: ${u.source}`);this.terrain=new un(this,_,u),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=k=>{k.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=k=>{k.tile&&(k.sourceId===u.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(k.sourceId,k.tile.tileID)):k.source.type==="geojson"&&this.terrain.rememberForRerender(k.sourceId,k.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new h.Event("terrain",{terrain:u}))}setState(u){if(this._checkLoaded(),bn(this,h.validateStyle(u)))return!1;(u=h.clone$1(u)).layers=nr(u.layers);const _=function(C,R){if(!C)return[{command:di.setStyle,args:[R]}];let H=[];try{if(!U(C.version,R.version))return[{command:di.setStyle,args:[R]}];U(C.center,R.center)||H.push({command:di.setCenter,args:[R.center]}),U(C.zoom,R.zoom)||H.push({command:di.setZoom,args:[R.zoom]}),U(C.bearing,R.bearing)||H.push({command:di.setBearing,args:[R.bearing]}),U(C.pitch,R.pitch)||H.push({command:di.setPitch,args:[R.pitch]}),U(C.sprite,R.sprite)||H.push({command:di.setSprite,args:[R.sprite]}),U(C.glyphs,R.glyphs)||H.push({command:di.setGlyphs,args:[R.glyphs]}),U(C.transition,R.transition)||H.push({command:di.setTransition,args:[R.transition]}),U(C.light,R.light)||H.push({command:di.setLight,args:[R.light]});const ie={},ae=[];(function(we,Be,Ve,vt){let ut;for(ut in Be=Be||{},we=we||{})Object.prototype.hasOwnProperty.call(we,ut)&&(Object.prototype.hasOwnProperty.call(Be,ut)||Ki(ut,Ve,vt));for(ut in Be)Object.prototype.hasOwnProperty.call(Be,ut)&&(Object.prototype.hasOwnProperty.call(we,ut)?U(we[ut],Be[ut])||(we[ut].type==="geojson"&&Be[ut].type==="geojson"&&Qt(we,Be,ut)?Ve.push({command:di.setGeoJSONSourceData,args:[ut,Be[ut].data]}):Ui(ut,Be,Ve,vt)):Hi(ut,Be,Ve))})(C.sources,R.sources,ae,ie);const he=[];C.layers&&C.layers.forEach(we=>{ie[we.source]?H.push({command:di.removeLayer,args:[we.id]}):he.push(we)}),H=H.concat(ae),function(we,Be,Ve){Be=Be||[];const vt=(we=we||[]).map(pi),ut=Be.map(pi),dt=we.reduce(Dr,{}),Rt=Be.reduce(Dr,{}),$t=vt.slice(),ui=Object.create(null);let It,gi,fi,Ti,Si,Zi,Ai;for(It=0,gi=0;It<vt.length;It++)fi=vt[It],Object.prototype.hasOwnProperty.call(Rt,fi)?gi++:(Ve.push({command:di.removeLayer,args:[fi]}),$t.splice($t.indexOf(fi,gi),1));for(It=0,gi=0;It<ut.length;It++)fi=ut[ut.length-1-It],$t[$t.length-1-It]!==fi&&(Object.prototype.hasOwnProperty.call(dt,fi)?(Ve.push({command:di.removeLayer,args:[fi]}),$t.splice($t.lastIndexOf(fi,$t.length-gi),1)):gi++,Zi=$t[$t.length-It],Ve.push({command:di.addLayer,args:[Rt[fi],Zi]}),$t.splice($t.length-It,0,fi),ui[fi]=!0);for(It=0;It<ut.length;It++)if(fi=ut[It],Ti=dt[fi],Si=Rt[fi],!ui[fi]&&!U(Ti,Si))if(U(Ti.source,Si.source)&&U(Ti["source-layer"],Si["source-layer"])&&U(Ti.type,Si.type)){for(Ai in lr(Ti.layout,Si.layout,Ve,fi,null,di.setLayoutProperty),lr(Ti.paint,Si.paint,Ve,fi,null,di.setPaintProperty),U(Ti.filter,Si.filter)||Ve.push({command:di.setFilter,args:[fi,Si.filter]}),U(Ti.minzoom,Si.minzoom)&&U(Ti.maxzoom,Si.maxzoom)||Ve.push({command:di.setLayerZoomRange,args:[fi,Si.minzoom,Si.maxzoom]}),Ti)Object.prototype.hasOwnProperty.call(Ti,Ai)&&Ai!=="layout"&&Ai!=="paint"&&Ai!=="filter"&&Ai!=="metadata"&&Ai!=="minzoom"&&Ai!=="maxzoom"&&(Ai.indexOf("paint.")===0?lr(Ti[Ai],Si[Ai],Ve,fi,Ai.slice(6),di.setPaintProperty):U(Ti[Ai],Si[Ai])||Ve.push({command:di.setLayerProperty,args:[fi,Ai,Si[Ai]]}));for(Ai in Si)Object.prototype.hasOwnProperty.call(Si,Ai)&&!Object.prototype.hasOwnProperty.call(Ti,Ai)&&Ai!=="layout"&&Ai!=="paint"&&Ai!=="filter"&&Ai!=="metadata"&&Ai!=="minzoom"&&Ai!=="maxzoom"&&(Ai.indexOf("paint.")===0?lr(Ti[Ai],Si[Ai],Ve,fi,Ai.slice(6),di.setPaintProperty):U(Ti[Ai],Si[Ai])||Ve.push({command:di.setLayerProperty,args:[fi,Ai,Si[Ai]]}))}else Ve.push({command:di.removeLayer,args:[fi]}),Zi=$t[$t.lastIndexOf(fi)+1],Ve.push({command:di.addLayer,args:[Si,Zi]})}(he,R.layers,H)}catch(ie){console.warn("Unable to compute style diff:",ie),H=[{command:di.setStyle,args:[R]}]}return H}(this.serialize(),u).filter(C=>!(C.command in _o));if(_.length===0)return!1;const k=_.filter(C=>!(C.command in On));if(k.length>0)throw new Error(`Unimplemented: ${k.map(C=>C.command).join(", ")}.`);return _.forEach(C=>{C.command!=="setTransition"&&this[C.command].apply(this,C.args)}),this.stylesheet=u,!0}addImage(u,_){if(this.getImage(u))return this.fire(new h.ErrorEvent(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,_),this._afterImageUpdated(u)}updateImage(u,_){this.imageManager.updateImage(u,_)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new h.ErrorEvent(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,_,k={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(h.validateStyle.source,`sources.${u}`,_,null,k))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const C=this.sourceCaches[u]=new Wt(u,_,this.dispatcher);C.style=this,C.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:C.serialize(),sourceId:u})),C.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const k in this._layers)if(this._layers[k].source===u)return this.fire(new h.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${k}" is using it.`)));const _=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],_.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),_.setEventedParent(null),_.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,_){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const k=this.sourceCaches[u].getSource();if(k.type!=="geojson")throw new Error(`geojsonSource.type is ${k.type}, which is !== 'geojson`);k.setData(_),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,_,k={}){this._checkLoaded();const C=u.id;if(this.getLayer(C))return void this.fire(new h.ErrorEvent(new Error(`Layer "${C}" already exists on this map.`)));let R;if(u.type==="custom"){if(bn(this,h.validateCustomStyleLayer(u)))return;R=h.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(C,u.source),u=h.clone$1(u),u=h.extend(u,{source:C})),this._validate(h.validateStyle.layer,`layers.${C}`,u,{arrayIndex:-1},k))return;R=h.createStyleLayer(u),this._validateLayer(R),R.setEventedParent(this,{layer:{id:C}}),this._serializedLayers[R.id]=R.serialize()}const H=_?this._order.indexOf(_):this._order.length;if(_&&H===-1)this.fire(new h.ErrorEvent(new Error(`Cannot add layer "${C}" before non-existing layer "${_}".`)));else{if(this._order.splice(H,0,C),this._layerOrderChanged=!0,this._layers[C]=R,this._removedLayers[C]&&R.source&&R.type!=="custom"){const ie=this._removedLayers[C];delete this._removedLayers[C],ie.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.sourceCaches[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(u,_){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new h.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===_)return;const k=this._order.indexOf(u);this._order.splice(k,1);const C=_?this._order.indexOf(_):this._order.length;_&&C===-1?this.fire(new h.ErrorEvent(new Error(`Cannot move layer "${u}" before non-existing layer "${_}".`))):(this._order.splice(C,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const _=this._layers[u];if(!_)return void this.fire(new h.ErrorEvent(new Error(`Cannot remove non-existing layer "${u}".`)));_.setEventedParent(null);const k=this._order.indexOf(u);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=_,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],_.onRemove&&_.onRemove(this.map)}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,_,k){this._checkLoaded();const C=this.getLayer(u);C?C.minzoom===_&&C.maxzoom===k||(_!=null&&(C.minzoom=_),k!=null&&(C.maxzoom=k),this._updateLayer(C)):this.fire(new h.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,_,k={}){this._checkLoaded();const C=this.getLayer(u);if(C){if(!U(C.filter,_))return _==null?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(h.validateStyle.filter,`layers.${C.id}.filter`,_,null,k)||(C.filter=h.clone$1(_),this._updateLayer(C)))}else this.fire(new h.ErrorEvent(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return h.clone$1(this.getLayer(u).filter)}setLayoutProperty(u,_,k,C={}){this._checkLoaded();const R=this.getLayer(u);R?U(R.getLayoutProperty(_),k)||(R.setLayoutProperty(_,k,C),this._updateLayer(R)):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,_){const k=this.getLayer(u);if(k)return k.getLayoutProperty(_);this.fire(new h.ErrorEvent(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,_,k,C={}){this._checkLoaded();const R=this.getLayer(u);R?U(R.getPaintProperty(_),k)||(R.setPaintProperty(_,k,C)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,_){return this.getLayer(u).getPaintProperty(_)}setFeatureState(u,_){this._checkLoaded();const k=u.source,C=u.sourceLayer,R=this.sourceCaches[k];if(R===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)));const H=R.getSource().type;H==="geojson"&&C?this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):H!=="vector"||C?(u.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),R.setFeatureState(C,u.id,_)):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,_){this._checkLoaded();const k=u.source,C=this.sourceCaches[k];if(C===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)));const R=C.getSource().type,H=R==="vector"?u.sourceLayer:void 0;R!=="vector"||H?_&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(H,u.id,_):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const _=u.source,k=u.sourceLayer,C=this.sourceCaches[_];if(C!==void 0)return C.getSource().type!=="vector"||k?(u.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),C.getFeatureState(k,u.id)):void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:h.mapObject(this.sourceCaches,u=>u.serialize()),layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(u){const _=H=>this._layers[H].type==="fill-extrusion",k={},C=[];for(let H=this._order.length-1;H>=0;H--){const ie=this._order[H];if(_(ie)){k[ie]=H;for(const ae of u){const he=ae[ie];if(he)for(const we of he)C.push(we)}}}C.sort((H,ie)=>ie.intersectionZ-H.intersectionZ);const R=[];for(let H=this._order.length-1;H>=0;H--){const ie=this._order[H];if(_(ie))for(let ae=C.length-1;ae>=0;ae--){const he=C[ae].feature;if(k[he.layer.id]<H)break;R.push(he),C.pop()}else for(const ae of u){const he=ae[ie];if(he)for(const we of he)R.push(we.feature)}}return R}queryRenderedFeatures(u,_,k){_&&_.filter&&this._validate(h.validateStyle.filter,"queryRenderedFeatures.filter",_.filter,null,_);const C={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const H of _.layers){const ie=this._layers[H];if(!ie)return this.fire(new h.ErrorEvent(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];C[ie.source]=!0}}const R=[];_.availableImages=this._availableImages;for(const H in this.sourceCaches)_.layers&&!C[H]||R.push(Re(this.sourceCaches[H],this._layers,this._serializedLayers,u,_,k));return this.placement&&R.push(function(H,ie,ae,he,we,Be,Ve){const vt={},ut=Be.queryRenderedSymbols(he),dt=[];for(const Rt of Object.keys(ut).map(Number))dt.push(Ve[Rt]);dt.sort(bt);for(const Rt of dt){const $t=Rt.featureIndex.lookupSymbolFeatures(ut[Rt.bucketInstanceId],ie,Rt.bucketIndex,Rt.sourceLayerIndex,we.filter,we.layers,we.availableImages,H);for(const ui in $t){const It=vt[ui]=vt[ui]||[],gi=$t[ui];gi.sort((fi,Ti)=>{const Si=Rt.featureSortOrder;if(Si){const Zi=Si.indexOf(fi.featureIndex);return Si.indexOf(Ti.featureIndex)-Zi}return Ti.featureIndex-fi.featureIndex});for(const fi of gi)It.push(fi)}}for(const Rt in vt)vt[Rt].forEach($t=>{const ui=$t.feature,It=ae[H[Rt].source].getFeatureState(ui.layer["source-layer"],ui.id);ui.source=ui.layer.source,ui.layer["source-layer"]&&(ui.sourceLayer=ui.layer["source-layer"]),ui.state=It});return vt}(this._layers,this._serializedLayers,this.sourceCaches,u,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(u,_){_&&_.filter&&this._validate(h.validateStyle.filter,"querySourceFeatures.filter",_.filter,null,_);const k=this.sourceCaches[u];return k?function(C,R){const H=C.getRenderableIds().map(he=>C.getTileByID(he)),ie=[],ae={};for(let he=0;he<H.length;he++){const we=H[he],Be=we.tileID.canonical.key;ae[Be]||(ae[Be]=!0,we.querySourceFeatures(ie,R))}return ie}(k,_):[]}addSourceType(u,_,k){return bo.getSourceType(u)?k(new Error(`A source type called "${u}" already exists.`)):(bo.setSourceType(u,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:_.workerSourceURL},k):k(null,null))}getLight(){return this.light.getLight()}setLight(u,_={}){this._checkLoaded();const k=this.light.getLight();let C=!1;for(const H in u)if(!U(u[H],k[H])){C=!0;break}if(!C)return;const R={now:h.exported.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,_),this.light.updateTransitions(R)}_validate(u,_,k,C,R={}){return(!R||R.validate!==!1)&&bn(this,u.call(h.validateStyle,h.extend({key:_,style:this.serialize(),value:k,styleSpec:h.spec},C)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const _=this.sourceCaches[u];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const _ in this.sourceCaches)this.sourceCaches[_].update(u,this.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,_,k,C,R=!1){let H=!1,ie=!1;const ae={};for(const he of this._order){const we=this._layers[he];if(we.type!=="symbol")continue;if(!ae[we.source]){const Ve=this.sourceCaches[we.source];ae[we.source]=Ve.getRenderableIds(!0).map(vt=>Ve.getTileByID(vt)).sort((vt,ut)=>ut.tileID.overscaledZ-vt.tileID.overscaledZ||(vt.tileID.isLessThan(ut.tileID)?-1:1))}const Be=this.crossTileSymbolIndex.addLayer(we,ae[we.source],u.center.lng);H=H||Be}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),u.zoom))&&(this.pauseablePlacement=new wi(u,this.terrain,this._order,R,_,k,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),ie=!0),H&&this.pauseablePlacement.placement.setStale()),ie||H)for(const he of this._order){const we=this._layers[he];we.type==="symbol"&&this.placement.updateLayerOpacities(we,ae[we.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,_,k){this.imageManager.getImages(_.icons,k),this._updateTilesForChangedImages();const C=this.sourceCaches[_.source];C&&C.setDependencies(_.tileID.key,_.type,_.icons)}getGlyphs(u,_,k){this.glyphManager.getGlyphs(_.stacks,k)}getResource(u,_,k){return h.makeRequest(_,k)}}bo.getSourceType=function(I){return ve[I]},bo.setSourceType=function(I,u){ve[I]=u},bo.registerForPluginStateChange=h.registerForPluginStateChange;var Ca="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const to={prelude:xt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:xt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:xt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:xt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:xt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:xt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ca),terrainDepth:xt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ca),terrainCoords:xt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ca)};function xt(I,u){const _=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,k=u.match(/attribute ([\w]+) ([\w]+)/g),C=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),H=R?R.concat(C):C,ie={};return{fragmentSource:I=I.replace(_,(ae,he,we,Be,Ve)=>(ie[Ve]=!0,he==="define"?`
#ifndef HAS_UNIFORM_u_${Ve}
varying ${we} ${Be} ${Ve};
#else
uniform ${we} ${Be} u_${Ve};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ve}
    ${we} ${Be} ${Ve} = u_${Ve};
#endif
`)),vertexSource:u=u.replace(_,(ae,he,we,Be,Ve)=>{const vt=Be==="float"?"vec2":"vec4",ut=Ve.match(/color/)?"color":vt;return ie[Ve]?he==="define"?`
#ifndef HAS_UNIFORM_u_${Ve}
uniform lowp float u_${Ve}_t;
attribute ${we} ${vt} a_${Ve};
varying ${we} ${Be} ${Ve};
#else
uniform ${we} ${Be} u_${Ve};
#endif
`:ut==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ve}
    ${Ve} = a_${Ve};
#else
    ${we} ${Be} ${Ve} = u_${Ve};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ve}
    ${Ve} = unpack_mix_${ut}(a_${Ve}, u_${Ve}_t);
#else
    ${we} ${Be} ${Ve} = u_${Ve};
#endif
`:he==="define"?`
#ifndef HAS_UNIFORM_u_${Ve}
uniform lowp float u_${Ve}_t;
attribute ${we} ${vt} a_${Ve};
#else
uniform ${we} ${Be} u_${Ve};
#endif
`:ut==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ve}
    ${we} ${Be} ${Ve} = a_${Ve};
#else
    ${we} ${Be} ${Ve} = u_${Ve};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ve}
    ${we} ${Be} ${Ve} = unpack_mix_${ut}(a_${Ve}, u_${Ve}_t);
#else
    ${we} ${Be} ${Ve} = u_${Ve};
#endif
`}),staticAttributes:k,staticUniforms:H}}class Ur{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,_,k,C,R,H,ie,ae,he){this.context=u;let we=this.boundPaintVertexBuffers.length!==C.length;for(let Be=0;!we&&Be<C.length;Be++)this.boundPaintVertexBuffers[Be]!==C[Be]&&(we=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===_&&this.boundLayoutVertexBuffer===k&&!we&&this.boundIndexBuffer===R&&this.boundVertexOffset===H&&this.boundDynamicVertexBuffer===ie&&this.boundDynamicVertexBuffer2===ae&&this.boundDynamicVertexBuffer3===he?(u.bindVertexArrayOES.set(this.vao),ie&&ie.bind(),R&&R.dynamicDraw&&R.bind(),ae&&ae.bind(),he&&he.bind()):this.freshBind(_,k,C,R,H,ie,ae,he)}freshBind(u,_,k,C,R,H,ie,ae){let he;const we=u.numAttributes,Be=this.context,Ve=Be.gl;if(Be.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Be.extVertexArrayObject.createVertexArrayOES(),Be.bindVertexArrayOES.set(this.vao),he=0,this.boundProgram=u,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=k,this.boundIndexBuffer=C,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=H,this.boundDynamicVertexBuffer2=ie,this.boundDynamicVertexBuffer3=ae;else{he=Be.currentNumAttributes||0;for(let vt=we;vt<he;vt++)Ve.disableVertexAttribArray(vt)}_.enableAttributes(Ve,u);for(const vt of k)vt.enableAttributes(Ve,u);H&&H.enableAttributes(Ve,u),ie&&ie.enableAttributes(Ve,u),ae&&ae.enableAttributes(Ve,u),_.bind(),_.setVertexAttribPointers(Ve,u,R);for(const vt of k)vt.bind(),vt.setVertexAttribPointers(Ve,u,R);H&&(H.bind(),H.setVertexAttribPointers(Ve,u,R)),C&&C.bind(),ie&&(ie.bind(),ie.setVertexAttribPointers(Ve,u,R)),ae&&(ae.bind(),ae.setVertexAttribPointers(Ve,u,R)),Be.currentNumAttributes=we}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Wr(I){const u=[];for(let _=0;_<I.length;_++){if(I[_]===null)continue;const k=I[_].split(" ");u.push(k.pop())}return u}class pn{constructor(u,_,k,C,R,H,ie){const ae=u.gl;this.program=ae.createProgram();const he=Wr(k.staticAttributes),we=C?C.getBinderAttributes():[],Be=he.concat(we),Ve=to.prelude.staticUniforms?Wr(to.prelude.staticUniforms):[],vt=k.staticUniforms?Wr(k.staticUniforms):[],ut=C?C.getBinderUniforms():[],dt=Ve.concat(vt).concat(ut),Rt=[];for(const Si of dt)Rt.indexOf(Si)<0&&Rt.push(Si);const $t=C?C.defines():[];H&&$t.push("#define OVERDRAW_INSPECTOR;"),ie&&$t.push("#define TERRAIN3D;");const ui=$t.concat(to.prelude.fragmentSource,k.fragmentSource).join(`
`),It=$t.concat(to.prelude.vertexSource,k.vertexSource).join(`
`),gi=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);ae.shaderSource(gi,ui),ae.compileShader(gi),ae.attachShader(this.program,gi);const fi=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);ae.shaderSource(fi,It),ae.compileShader(fi),ae.attachShader(this.program,fi),this.attributes={};const Ti={};this.numAttributes=Be.length;for(let Si=0;Si<this.numAttributes;Si++)Be[Si]&&(ae.bindAttribLocation(this.program,Si,Be[Si]),this.attributes[Be[Si]]=Si);ae.linkProgram(this.program),ae.deleteShader(fi),ae.deleteShader(gi);for(let Si=0;Si<Rt.length;Si++){const Zi=Rt[Si];if(Zi&&!Ti[Zi]){const Ai=ae.getUniformLocation(this.program,Zi);Ai&&(Ti[Zi]=Ai)}}this.fixedUniforms=R(u,Ti),this.terrainUniforms=((Si,Zi)=>({u_depth:new h.Uniform1i(Si,Zi.u_depth),u_terrain:new h.Uniform1i(Si,Zi.u_terrain),u_terrain_dim:new h.Uniform1f(Si,Zi.u_terrain_dim),u_terrain_matrix:new h.UniformMatrix4f(Si,Zi.u_terrain_matrix),u_terrain_unpack:new h.Uniform4f(Si,Zi.u_terrain_unpack),u_terrain_offset:new h.Uniform1f(Si,Zi.u_terrain_offset),u_terrain_exaggeration:new h.Uniform1f(Si,Zi.u_terrain_exaggeration)}))(u,Ti),this.binderUniforms=C?C.getUniforms(u,Ti):[]}draw(u,_,k,C,R,H,ie,ae,he,we,Be,Ve,vt,ut,dt,Rt,$t,ui){const It=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(k),u.setStencilMode(C),u.setColorMode(R),u.setCullFace(H),ae){u.activeTexture.set(It.TEXTURE2),It.bindTexture(It.TEXTURE_2D,ae.depthTexture),u.activeTexture.set(It.TEXTURE3),It.bindTexture(It.TEXTURE_2D,ae.texture);for(const fi in this.terrainUniforms)this.terrainUniforms[fi].set(ae[fi])}for(const fi in this.fixedUniforms)this.fixedUniforms[fi].set(ie[fi]);dt&&dt.setUniforms(u,this.binderUniforms,vt,{zoom:ut});let gi=0;switch(_){case It.LINES:gi=2;break;case It.TRIANGLES:gi=3;break;case It.LINE_STRIP:gi=1}for(const fi of Ve.get()){const Ti=fi.vaos||(fi.vaos={});(Ti[he]||(Ti[he]=new Ur)).bind(u,this,we,dt?dt.getPaintVertexBuffers():[],Be,fi.vertexOffset,Rt,$t,ui),It.drawElements(_,fi.primitiveLength*gi,It.UNSIGNED_SHORT,fi.primitiveOffset*gi*2)}}}function mo(I,u,_){const k=1/Tn(_,1,u.transform.tileZoom),C=Math.pow(2,_.tileID.overscaledZ),R=_.tileSize*Math.pow(2,u.transform.tileZoom)/C,H=R*(_.tileID.canonical.x+_.tileID.wrap*C),ie=R*_.tileID.canonical.y;return{u_image:0,u_texsize:_.imageAtlasTexture.size,u_scale:[k,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[H>>16,ie>>16],u_pixel_coord_lower:[65535&H,65535&ie]}}const io=(I,u,_,k)=>{const C=u.style.light,R=C.properties.get("position"),H=[R.x,R.y,R.z],ie=h.create$1();C.properties.get("anchor")==="viewport"&&h.fromRotation(ie,-u.transform.angle),h.transformMat3(H,H,ie);const ae=C.properties.get("color");return{u_matrix:I,u_lightpos:H,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+_,u_opacity:k}},Qs=(I,u,_,k,C,R,H)=>h.extend(io(I,u,_,k),mo(R,u,H),{u_height_factor:-Math.pow(2,C.overscaledZ)/H.tileSize/8}),Io=I=>({u_matrix:I}),fs=(I,u,_,k)=>h.extend(Io(I),mo(_,u,k)),Vo=(I,u)=>({u_matrix:I,u_world:u}),$s=(I,u,_,k,C)=>h.extend(fs(I,u,_,k),{u_world:C}),Jo=(I,u,_,k)=>{const C=I.transform;let R,H;if(k.paint.get("circle-pitch-alignment")==="map"){const ie=Tn(_,1,C.zoom);R=!0,H=[ie,ie]}else R=!1,H=C.pixelsToGLUnits;return{u_camera_to_center_distance:C.cameraToCenterDistance,u_scale_with_map:+(k.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(u.posMatrix,_,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_pitch_with_map:+R,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:H}},ws=(I,u,_)=>{const k=Tn(_,1,u.zoom),C=Math.pow(2,u.zoom-_.tileID.overscaledZ),R=_.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:k,u_extrude_scale:[u.pixelsToGLUnits[0]/(k*C),u.pixelsToGLUnits[1]/(k*C)],u_overscale_factor:R}},ds=(I,u,_=1)=>({u_matrix:I,u_color:u,u_overlay:0,u_overlay_scale:_}),ea=I=>({u_matrix:I}),Ha=(I,u,_,k)=>({u_matrix:I,u_extrude_scale:Tn(u,1,_),u_intensity:k});function Tl(I,u){const _=Math.pow(2,u.canonical.z),k=u.canonical.y;return[new h.MercatorCoordinate(0,k/_).toLngLat().lat,new h.MercatorCoordinate(0,(k+1)/_).toLngLat().lat]}const Wa=(I,u,_,k)=>{const C=I.transform;return{u_matrix:Ta(I,u,_,k),u_ratio:1/Tn(u,1,C.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Ll=(I,u,_,k,C)=>h.extend(Wa(I,u,_,C),{u_image:0,u_image_height:k}),Bs=(I,u,_,k,C)=>{const R=I.transform,H=Yn(u,R);return{u_matrix:Ta(I,u,_,C),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Tn(u,1,R.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[H,k.fromScale,k.toScale],u_fade:k.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},Rs=(I,u,_,k,C,R)=>{const H=I.lineAtlas,ie=Yn(u,I.transform),ae=_.layout.get("line-cap")==="round",he=H.getDash(k.from,ae),we=H.getDash(k.to,ae),Be=he.width*C.fromScale,Ve=we.width*C.toScale;return h.extend(Wa(I,u,_,R),{u_patternscale_a:[ie/Be,-he.height/2],u_patternscale_b:[ie/Ve,-we.height/2],u_sdfgamma:H.width/(256*Math.min(Be,Ve)*I.pixelRatio)/2,u_image:0,u_tex_y_a:he.y,u_tex_y_b:we.y,u_mix:C.t})};function Yn(I,u){return 1/Tn(I,1,u.tileZoom)}function Ta(I,u,_,k){return I.translatePosMatrix(k?k.posMatrix:u.tileID.posMatrix,u,_.paint.get("line-translate"),_.paint.get("line-translate-anchor"))}const M=(I,u,_,k,C)=>{return{u_matrix:I,u_tl_parent:u,u_scale_parent:_,u_buffer_scale:1,u_fade_t:k.mix,u_opacity:k.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(H=C.paint.get("raster-saturation"),H>0?1-1/(1.001-H):-H),u_contrast_factor:(R=C.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:V(C.paint.get("raster-hue-rotate"))};var R,H};function V(I){I*=Math.PI/180;const u=Math.sin(I),_=Math.cos(I);return[(2*_+1)/3,(-Math.sqrt(3)*u-_+1)/3,(Math.sqrt(3)*u-_+1)/3]}const oe=(I,u,_,k,C,R,H,ie,ae,he)=>{const we=C.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:we.cameraToCenterDistance,u_pitch:we.pitch/360*2*Math.PI,u_rotate_symbol:+_,u_aspect_ratio:we.width/we.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:H,u_coord_matrix:ie,u_is_text:+ae,u_pitch_with_map:+k,u_texsize:he,u_texture:0}},ge=(I,u,_,k,C,R,H,ie,ae,he,we)=>{const Be=C.transform;return h.extend(oe(I,u,_,k,C,R,H,ie,ae,he),{u_gamma_scale:k?Math.cos(Be._pitch)*Be.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+we})},qe=(I,u,_,k,C,R,H,ie,ae,he)=>h.extend(ge(I,u,_,k,C,R,H,ie,!0,ae,!0),{u_texsize_icon:he,u_texture_icon:1}),ht=(I,u,_)=>({u_matrix:I,u_opacity:u,u_color:_}),St=(I,u,_,k,C,R)=>h.extend(function(H,ie,ae,he){const we=ae.imageManager.getPattern(H.from.toString()),Be=ae.imageManager.getPattern(H.to.toString()),{width:Ve,height:vt}=ae.imageManager.getPixelSize(),ut=Math.pow(2,he.tileID.overscaledZ),dt=he.tileSize*Math.pow(2,ae.transform.tileZoom)/ut,Rt=dt*(he.tileID.canonical.x+he.tileID.wrap*ut),$t=dt*he.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:we.tl,u_pattern_br_a:we.br,u_pattern_tl_b:Be.tl,u_pattern_br_b:Be.br,u_texsize:[Ve,vt],u_mix:ie.t,u_pattern_size_a:we.displaySize,u_pattern_size_b:Be.displaySize,u_scale_a:ie.fromScale,u_scale_b:ie.toScale,u_tile_units_to_pixels:1/Tn(he,1,ae.transform.tileZoom),u_pixel_coord_upper:[Rt>>16,$t>>16],u_pixel_coord_lower:[65535&Rt,65535&$t]}}(k,R,_,C),{u_matrix:I,u_opacity:u}),Et={fillExtrusion:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_lightpos:new h.Uniform3f(I,u.u_lightpos),u_lightintensity:new h.Uniform1f(I,u.u_lightintensity),u_lightcolor:new h.Uniform3f(I,u.u_lightcolor),u_vertical_gradient:new h.Uniform1f(I,u.u_vertical_gradient),u_opacity:new h.Uniform1f(I,u.u_opacity)}),fillExtrusionPattern:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_lightpos:new h.Uniform3f(I,u.u_lightpos),u_lightintensity:new h.Uniform1f(I,u.u_lightintensity),u_lightcolor:new h.Uniform3f(I,u.u_lightcolor),u_vertical_gradient:new h.Uniform1f(I,u.u_vertical_gradient),u_height_factor:new h.Uniform1f(I,u.u_height_factor),u_image:new h.Uniform1i(I,u.u_image),u_texsize:new h.Uniform2f(I,u.u_texsize),u_pixel_coord_upper:new h.Uniform2f(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(I,u.u_pixel_coord_lower),u_scale:new h.Uniform3f(I,u.u_scale),u_fade:new h.Uniform1f(I,u.u_fade),u_opacity:new h.Uniform1f(I,u.u_opacity)}),fill:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix)}),fillPattern:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_image:new h.Uniform1i(I,u.u_image),u_texsize:new h.Uniform2f(I,u.u_texsize),u_pixel_coord_upper:new h.Uniform2f(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(I,u.u_pixel_coord_lower),u_scale:new h.Uniform3f(I,u.u_scale),u_fade:new h.Uniform1f(I,u.u_fade)}),fillOutline:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_world:new h.Uniform2f(I,u.u_world)}),fillOutlinePattern:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_world:new h.Uniform2f(I,u.u_world),u_image:new h.Uniform1i(I,u.u_image),u_texsize:new h.Uniform2f(I,u.u_texsize),u_pixel_coord_upper:new h.Uniform2f(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(I,u.u_pixel_coord_lower),u_scale:new h.Uniform3f(I,u.u_scale),u_fade:new h.Uniform1f(I,u.u_fade)}),circle:(I,u)=>({u_camera_to_center_distance:new h.Uniform1f(I,u.u_camera_to_center_distance),u_scale_with_map:new h.Uniform1i(I,u.u_scale_with_map),u_pitch_with_map:new h.Uniform1i(I,u.u_pitch_with_map),u_extrude_scale:new h.Uniform2f(I,u.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(I,u.u_matrix)}),collisionBox:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_camera_to_center_distance:new h.Uniform1f(I,u.u_camera_to_center_distance),u_pixels_to_tile_units:new h.Uniform1f(I,u.u_pixels_to_tile_units),u_extrude_scale:new h.Uniform2f(I,u.u_extrude_scale),u_overscale_factor:new h.Uniform1f(I,u.u_overscale_factor)}),collisionCircle:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_inv_matrix:new h.UniformMatrix4f(I,u.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(I,u.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(I,u.u_viewport_size)}),debug:(I,u)=>({u_color:new h.UniformColor(I,u.u_color),u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_overlay:new h.Uniform1i(I,u.u_overlay),u_overlay_scale:new h.Uniform1f(I,u.u_overlay_scale)}),clippingMask:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix)}),heatmap:(I,u)=>({u_extrude_scale:new h.Uniform1f(I,u.u_extrude_scale),u_intensity:new h.Uniform1f(I,u.u_intensity),u_matrix:new h.UniformMatrix4f(I,u.u_matrix)}),heatmapTexture:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_world:new h.Uniform2f(I,u.u_world),u_image:new h.Uniform1i(I,u.u_image),u_color_ramp:new h.Uniform1i(I,u.u_color_ramp),u_opacity:new h.Uniform1f(I,u.u_opacity)}),hillshade:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_image:new h.Uniform1i(I,u.u_image),u_latrange:new h.Uniform2f(I,u.u_latrange),u_light:new h.Uniform2f(I,u.u_light),u_shadow:new h.UniformColor(I,u.u_shadow),u_highlight:new h.UniformColor(I,u.u_highlight),u_accent:new h.UniformColor(I,u.u_accent)}),hillshadePrepare:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_image:new h.Uniform1i(I,u.u_image),u_dimension:new h.Uniform2f(I,u.u_dimension),u_zoom:new h.Uniform1f(I,u.u_zoom),u_unpack:new h.Uniform4f(I,u.u_unpack)}),line:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_ratio:new h.Uniform1f(I,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(I,u.u_units_to_pixels)}),lineGradient:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_ratio:new h.Uniform1f(I,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(I,u.u_units_to_pixels),u_image:new h.Uniform1i(I,u.u_image),u_image_height:new h.Uniform1f(I,u.u_image_height)}),linePattern:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_texsize:new h.Uniform2f(I,u.u_texsize),u_ratio:new h.Uniform1f(I,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_image:new h.Uniform1i(I,u.u_image),u_units_to_pixels:new h.Uniform2f(I,u.u_units_to_pixels),u_scale:new h.Uniform3f(I,u.u_scale),u_fade:new h.Uniform1f(I,u.u_fade)}),lineSDF:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_ratio:new h.Uniform1f(I,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(I,u.u_units_to_pixels),u_patternscale_a:new h.Uniform2f(I,u.u_patternscale_a),u_patternscale_b:new h.Uniform2f(I,u.u_patternscale_b),u_sdfgamma:new h.Uniform1f(I,u.u_sdfgamma),u_image:new h.Uniform1i(I,u.u_image),u_tex_y_a:new h.Uniform1f(I,u.u_tex_y_a),u_tex_y_b:new h.Uniform1f(I,u.u_tex_y_b),u_mix:new h.Uniform1f(I,u.u_mix)}),raster:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_tl_parent:new h.Uniform2f(I,u.u_tl_parent),u_scale_parent:new h.Uniform1f(I,u.u_scale_parent),u_buffer_scale:new h.Uniform1f(I,u.u_buffer_scale),u_fade_t:new h.Uniform1f(I,u.u_fade_t),u_opacity:new h.Uniform1f(I,u.u_opacity),u_image0:new h.Uniform1i(I,u.u_image0),u_image1:new h.Uniform1i(I,u.u_image1),u_brightness_low:new h.Uniform1f(I,u.u_brightness_low),u_brightness_high:new h.Uniform1f(I,u.u_brightness_high),u_saturation_factor:new h.Uniform1f(I,u.u_saturation_factor),u_contrast_factor:new h.Uniform1f(I,u.u_contrast_factor),u_spin_weights:new h.Uniform3f(I,u.u_spin_weights)}),symbolIcon:(I,u)=>({u_is_size_zoom_constant:new h.Uniform1i(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(I,u.u_is_size_feature_constant),u_size_t:new h.Uniform1f(I,u.u_size_t),u_size:new h.Uniform1f(I,u.u_size),u_camera_to_center_distance:new h.Uniform1f(I,u.u_camera_to_center_distance),u_pitch:new h.Uniform1f(I,u.u_pitch),u_rotate_symbol:new h.Uniform1i(I,u.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(I,u.u_aspect_ratio),u_fade_change:new h.Uniform1f(I,u.u_fade_change),u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(I,u.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(I,u.u_coord_matrix),u_is_text:new h.Uniform1i(I,u.u_is_text),u_pitch_with_map:new h.Uniform1i(I,u.u_pitch_with_map),u_texsize:new h.Uniform2f(I,u.u_texsize),u_texture:new h.Uniform1i(I,u.u_texture)}),symbolSDF:(I,u)=>({u_is_size_zoom_constant:new h.Uniform1i(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(I,u.u_is_size_feature_constant),u_size_t:new h.Uniform1f(I,u.u_size_t),u_size:new h.Uniform1f(I,u.u_size),u_camera_to_center_distance:new h.Uniform1f(I,u.u_camera_to_center_distance),u_pitch:new h.Uniform1f(I,u.u_pitch),u_rotate_symbol:new h.Uniform1i(I,u.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(I,u.u_aspect_ratio),u_fade_change:new h.Uniform1f(I,u.u_fade_change),u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(I,u.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(I,u.u_coord_matrix),u_is_text:new h.Uniform1i(I,u.u_is_text),u_pitch_with_map:new h.Uniform1i(I,u.u_pitch_with_map),u_texsize:new h.Uniform2f(I,u.u_texsize),u_texture:new h.Uniform1i(I,u.u_texture),u_gamma_scale:new h.Uniform1f(I,u.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(I,u.u_is_halo)}),symbolTextAndIcon:(I,u)=>({u_is_size_zoom_constant:new h.Uniform1i(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(I,u.u_is_size_feature_constant),u_size_t:new h.Uniform1f(I,u.u_size_t),u_size:new h.Uniform1f(I,u.u_size),u_camera_to_center_distance:new h.Uniform1f(I,u.u_camera_to_center_distance),u_pitch:new h.Uniform1f(I,u.u_pitch),u_rotate_symbol:new h.Uniform1i(I,u.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(I,u.u_aspect_ratio),u_fade_change:new h.Uniform1f(I,u.u_fade_change),u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(I,u.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(I,u.u_coord_matrix),u_is_text:new h.Uniform1i(I,u.u_is_text),u_pitch_with_map:new h.Uniform1i(I,u.u_pitch_with_map),u_texsize:new h.Uniform2f(I,u.u_texsize),u_texsize_icon:new h.Uniform2f(I,u.u_texsize_icon),u_texture:new h.Uniform1i(I,u.u_texture),u_texture_icon:new h.Uniform1i(I,u.u_texture_icon),u_gamma_scale:new h.Uniform1f(I,u.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(I,u.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(I,u.u_is_halo)}),background:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_opacity:new h.Uniform1f(I,u.u_opacity),u_color:new h.UniformColor(I,u.u_color)}),backgroundPattern:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_opacity:new h.Uniform1f(I,u.u_opacity),u_image:new h.Uniform1i(I,u.u_image),u_pattern_tl_a:new h.Uniform2f(I,u.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(I,u.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(I,u.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(I,u.u_pattern_br_b),u_texsize:new h.Uniform2f(I,u.u_texsize),u_mix:new h.Uniform1f(I,u.u_mix),u_pattern_size_a:new h.Uniform2f(I,u.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(I,u.u_pattern_size_b),u_scale_a:new h.Uniform1f(I,u.u_scale_a),u_scale_b:new h.Uniform1f(I,u.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(I,u.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(I,u.u_tile_units_to_pixels)}),terrain:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_texture:new h.Uniform1i(I,u.u_texture)}),terrainDepth:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix)}),terrainCoords:(I,u)=>({u_matrix:new h.UniformMatrix4f(I,u.u_matrix),u_texture:new h.Uniform1i(I,u.u_texture),u_terrain_coords_id:new h.Uniform1f(I,u.u_terrain_coords_id)})};class ai{constructor(u,_,k){this.context=u;const C=u.gl;this.buffer=C.createBuffer(),this.dynamicDraw=Boolean(k),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const _=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ii={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ni{constructor(u,_,k,C){this.length=_.length,this.attributes=k,this.itemSize=_.bytesPerElement,this.dynamicDraw=C,this.context=u;const R=u.gl;this.buffer=R.createBuffer(),u.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,_){for(let k=0;k<this.attributes.length;k++){const C=_.attributes[this.attributes[k].name];C!==void 0&&u.enableVertexAttribArray(C)}}setVertexAttribPointers(u,_,k){for(let C=0;C<this.attributes.length;C++){const R=this.attributes[C],H=_.attributes[R.name];H!==void 0&&u.vertexAttribPointer(H,R.components,u[ii[R.type]],!1,this.itemSize,R.offset+this.itemSize*(k||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Vt{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ii extends Vt{getDefault(){return h.Color.transparent}set(u){const _=this.current;(u.r!==_.r||u.g!==_.g||u.b!==_.b||u.a!==_.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Gi extends Vt{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class fr extends Vt{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Je extends Vt{getDefault(){return[!0,!0,!0,!0]}set(u){const _=this.current;(u[0]!==_[0]||u[1]!==_[1]||u[2]!==_[2]||u[3]!==_[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class c extends Vt{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class _i extends Vt{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class s extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const _=this.current;(u.func!==_.func||u.ref!==_.ref||u.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class A extends Vt{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const _=this.current;(u[0]!==_[0]||u[1]!==_[1]||u[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class tr extends Vt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;u?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=u,this.dirty=!1}}class zr extends Vt{getDefault(){return[0,1]}set(u){const _=this.current;(u[0]!==_[0]||u[1]!==_[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Gn extends Vt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;u?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=u,this.dirty=!1}}class W extends Vt{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class fn extends Vt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;u?_.enable(_.BLEND):_.disable(_.BLEND),this.current=u,this.dirty=!1}}class Os extends Vt{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const _=this.current;(u[0]!==_[0]||u[1]!==_[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class fa extends Vt{getDefault(){return h.Color.transparent}set(u){const _=this.current;(u.r!==_.r||u.g!==_.g||u.b!==_.b||u.a!==_.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class $u extends Vt{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Za extends Vt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;u?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=u,this.dirty=!1}}class ps extends Vt{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class bu extends Vt{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class Pl extends Vt{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Ac extends Vt{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Ml extends Vt{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const _=this.current;(u[0]!==_[0]||u[1]!==_[1]||u[2]!==_[2]||u[3]!==_[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Ec extends Vt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class $l extends Vt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Dl extends Vt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class zl extends Vt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class cl extends Vt{getDefault(){return null}set(u){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Nl extends Vt{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class br extends Vt{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class yr extends Vt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class eu extends Vt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class da extends Vt{constructor(u,_){super(u),this.context=u,this.parent=_}getDefault(){return null}}class js extends da{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class hl extends da{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Us{constructor(u,_,k,C){this.context=u,this.width=_,this.height=k;const R=u.gl,H=this.framebuffer=R.createFramebuffer();if(this.colorAttachment=new js(u,H),C&&(this.depthAttachment=new hl(u,H)),R.checkFramebufferStatus(R.FRAMEBUFFER)!==R.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,_=this.colorAttachment.get();if(_&&u.deleteTexture(_),this.depthAttachment){const k=this.depthAttachment.get();k&&u.deleteRenderbuffer(k)}u.deleteFramebuffer(this.framebuffer)}}class Hn{constructor(u,_,k){this.blendFunction=u,this.blendColor=_,this.mask=k}}Hn.Replace=[1,0],Hn.disabled=new Hn(Hn.Replace,h.Color.transparent,[!1,!1,!1,!1]),Hn.unblended=new Hn(Hn.Replace,h.Color.transparent,[!0,!0,!0,!0]),Hn.alphaBlended=new Hn([1,771],h.Color.transparent,[!0,!0,!0,!0]);class X{constructor(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ii(this),this.clearDepth=new Gi(this),this.clearStencil=new fr(this),this.colorMask=new Je(this),this.depthMask=new c(this),this.stencilMask=new _i(this),this.stencilFunc=new s(this),this.stencilOp=new A(this),this.stencilTest=new tr(this),this.depthRange=new zr(this),this.depthTest=new Gn(this),this.depthFunc=new W(this),this.blend=new fn(this),this.blendFunc=new Os(this),this.blendColor=new fa(this),this.blendEquation=new $u(this),this.cullFace=new Za(this),this.cullFaceSide=new ps(this),this.frontFace=new bu(this),this.program=new Pl(this),this.activeTexture=new Ac(this),this.viewport=new Ml(this),this.bindFramebuffer=new Ec(this),this.bindRenderbuffer=new $l(this),this.bindTexture=new Dl(this),this.bindVertexBuffer=new zl(this),this.bindElementBuffer=new cl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Nl(this),this.pixelStoreUnpack=new br(this),this.pixelStoreUnpackPremultiplyAlpha=new yr(this),this.pixelStoreUnpackFlipY=new eu(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,_){return new ai(this,u,_)}createVertexBuffer(u,_,k){return new ni(this,u,_,k)}createRenderbuffer(u,_,k){const C=this.gl,R=C.createRenderbuffer();return this.bindRenderbuffer.set(R),C.renderbufferStorage(C.RENDERBUFFER,u,_,k),this.bindRenderbuffer.set(null),R}createFramebuffer(u,_,k){return new Us(this,u,_,k)}clear({color:u,depth:_}){const k=this.gl;let C=0;u&&(C|=k.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),_!==void 0&&(C|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),k.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){U(u.blendFunction,Hn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ie{constructor(u,_,k){this.func=u,this.mask=_,this.range=k}}Ie.ReadOnly=!1,Ie.ReadWrite=!0,Ie.disabled=new Ie(519,Ie.ReadOnly,[0,1]);const lt=7680;class zt{constructor(u,_,k,C,R,H){this.test=u,this.ref=_,this.mask=k,this.fail=C,this.depthFail=R,this.pass=H}}zt.disabled=new zt({func:519,mask:0},0,0,lt,lt,lt);class Kt{constructor(u,_,k){this.enable=u,this.mode=_,this.frontFace=k}}let Li;function Xi(I,u,_,k,C,R,H){const ie=I.context,ae=ie.gl,he=I.useProgram("collisionBox"),we=[];let Be=0,Ve=0;for(let It=0;It<k.length;It++){const gi=k[It],fi=u.getTile(gi),Ti=fi.getBucket(_);if(!Ti)continue;let Si=gi.posMatrix;C[0]===0&&C[1]===0||(Si=I.translatePosMatrix(gi.posMatrix,fi,C,R));const Zi=H?Ti.textCollisionBox:Ti.iconCollisionBox,Ai=Ti.collisionCircleArray;if(Ai.length>0){const vr=h.create(),sr=Si;h.mul(vr,Ti.placementInvProjMatrix,I.transform.glCoordMatrix),h.mul(vr,vr,Ti.placementViewportMatrix),we.push({circleArray:Ai,circleOffset:Ve,transform:sr,invTransform:vr,coord:gi}),Be+=Ai.length/4,Ve=Be}Zi&&he.draw(ie,ae.LINES,Ie.disabled,zt.disabled,I.colorModeForRenderPass(),Kt.disabled,ws(Si,I.transform,fi),I.style.terrain&&I.style.terrain.getTerrainData(gi),_.id,Zi.layoutVertexBuffer,Zi.indexBuffer,Zi.segments,null,I.transform.zoom,null,null,Zi.collisionVertexBuffer)}if(!H||!we.length)return;const vt=I.useProgram("collisionCircle"),ut=new h.CollisionCircleLayoutArray;ut.resize(4*Be),ut._trim();let dt=0;for(const It of we)for(let gi=0;gi<It.circleArray.length/4;gi++){const fi=4*gi,Ti=It.circleArray[fi+0],Si=It.circleArray[fi+1],Zi=It.circleArray[fi+2],Ai=It.circleArray[fi+3];ut.emplace(dt++,Ti,Si,Zi,Ai,0),ut.emplace(dt++,Ti,Si,Zi,Ai,1),ut.emplace(dt++,Ti,Si,Zi,Ai,2),ut.emplace(dt++,Ti,Si,Zi,Ai,3)}(!Li||Li.length<2*Be)&&(Li=function(It){const gi=2*It,fi=new h.QuadTriangleArray;fi.resize(gi),fi._trim();for(let Ti=0;Ti<gi;Ti++){const Si=6*Ti;fi.uint16[Si+0]=4*Ti+0,fi.uint16[Si+1]=4*Ti+1,fi.uint16[Si+2]=4*Ti+2,fi.uint16[Si+3]=4*Ti+2,fi.uint16[Si+4]=4*Ti+3,fi.uint16[Si+5]=4*Ti+0}return fi}(Be));const Rt=ie.createIndexBuffer(Li,!0),$t=ie.createVertexBuffer(ut,h.collisionCircleLayout.members,!0);for(const It of we){const gi={u_matrix:It.transform,u_inv_matrix:It.invTransform,u_camera_to_center_distance:(ui=I.transform).cameraToCenterDistance,u_viewport_size:[ui.width,ui.height]};vt.draw(ie,ae.TRIANGLES,Ie.disabled,zt.disabled,I.colorModeForRenderPass(),Kt.disabled,gi,I.style.terrain&&I.style.terrain.getTerrainData(It.coord),_.id,$t,Rt,h.SegmentVector.simpleSegment(0,2*It.circleOffset,It.circleArray.length,It.circleArray.length/2),null,I.transform.zoom,null,null,null)}var ui;$t.destroy(),Rt.destroy()}Kt.disabled=new Kt(!1,1029,2305),Kt.backCCW=new Kt(!0,1029,2305);const Mr=h.identity(new Float32Array(16));function en(I,u,_,k,C,R){const{horizontalAlign:H,verticalAlign:ie}=h.getAnchorAlignment(I),ae=-(H-.5)*u,he=-(ie-.5)*_,we=h.evaluateVariableOffset(I,k);return new h.pointGeometry((ae/C+we[0])*R,(he/C+we[1])*R)}function mn(I,u,_,k,C,R,H,ie,ae,he,we){const Be=I.text.placedSymbolArray,Ve=I.text.dynamicLayoutVertexArray,vt=I.icon.dynamicLayoutVertexArray,ut={};Ve.clear();for(let dt=0;dt<Be.length;dt++){const Rt=Be.get(dt),$t=I.allowVerticalPlacement&&!Rt.placedOrientation,ui=Rt.hidden||!Rt.crossTileID||$t?null:k[Rt.crossTileID];if(ui){const It=new h.pointGeometry(Rt.anchorX,Rt.anchorY),gi=mt(It,_?H:R,we),fi=Jt(C.cameraToCenterDistance,gi.signedDistanceFromCamera);let Ti=h.evaluateSizeForFeature(I.textSizeData,ae,Rt)*fi/h.ONE_EM;_&&(Ti*=I.tilePixelRatio/ie);const{width:Si,height:Zi,anchor:Ai,textOffset:vr,textBoxScale:sr}=ui,Ir=en(Ai,Si,Zi,vr,sr,Ti),nn=_?mt(It.add(Ir),R,we).point:gi.point.add(u?Ir.rotate(-C.angle):Ir),cn=I.allowVerticalPlacement&&Rt.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let P=0;P<Rt.numGlyphs;P++)h.addDynamicAttributes(Ve,nn,cn);he&&Rt.associatedIconIndex>=0&&(ut[Rt.associatedIconIndex]={shiftedAnchor:nn,angle:cn})}else Vr(Rt.numGlyphs,Ve)}if(he){vt.clear();const dt=I.icon.placedSymbolArray;for(let Rt=0;Rt<dt.length;Rt++){const $t=dt.get(Rt);if($t.hidden)Vr($t.numGlyphs,vt);else{const ui=ut[Rt];if(ui)for(let It=0;It<$t.numGlyphs;It++)h.addDynamicAttributes(vt,ui.shiftedAnchor,ui.angle);else Vr($t.numGlyphs,vt)}}I.icon.dynamicLayoutVertexBuffer.updateData(vt)}I.text.dynamicLayoutVertexBuffer.updateData(Ve)}function En(I,u,_){return _.iconsInText&&u?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function Mn(I,u,_,k,C,R,H,ie,ae,he,we,Be){const Ve=I.context,vt=Ve.gl,ut=I.transform,dt=ie==="map",Rt=ae==="map",$t=ie!=="viewport"&&_.layout.get("symbol-placement")!=="point",ui=dt&&!Rt&&!$t,It=!_.layout.get("symbol-sort-key").isConstant();let gi=!1;const fi=I.depthModeForSublayer(0,Ie.ReadOnly),Ti=_.layout.get("text-variable-anchor"),Si=[];for(const Zi of k){const Ai=u.getTile(Zi),vr=Ai.getBucket(_);if(!vr)continue;const sr=C?vr.text:vr.icon;if(!sr||!sr.segments.get().length)continue;const Ir=sr.programConfigurations.get(_.id),nn=C||vr.sdfIcons,cn=C?vr.textSizeData:vr.iconSizeData,P=Rt||ut.pitch!==0,j=I.useProgram(En(nn,C,vr),Ir),Q=h.evaluateSizeForZoom(cn,ut.zoom),le=I.style.terrain&&I.style.terrain.getTerrainData(Zi);let Ae,Fe,Oe,He,Qe=[0,0],ct=null;if(C){if(Fe=Ai.glyphAtlasTexture,Oe=vt.LINEAR,Ae=Ai.glyphAtlasTexture.size,vr.iconsInText){Qe=Ai.imageAtlasTexture.size,ct=Ai.imageAtlasTexture;const mr=cn.kind==="composite"||cn.kind==="camera";He=P||I.options.rotating||I.options.zooming||mr?vt.LINEAR:vt.NEAREST}}else{const mr=_.layout.get("icon-size").constantOr(0)!==1||vr.iconsNeedLinear;Fe=Ai.imageAtlasTexture,Oe=nn||I.options.rotating||I.options.zooming||mr||P?vt.LINEAR:vt.NEAREST,Ae=Ai.imageAtlasTexture.size}const Ut=Tn(Ai,1,I.transform.zoom),ci=je(Zi.posMatrix,Rt,dt,I.transform,Ut),li=ot(Zi.posMatrix,Rt,dt,I.transform,Ut),ei=Ti&&vr.hasTextData(),qi=_.layout.get("icon-text-fit")!=="none"&&ei&&vr.hasIconData();if($t){const mr=I.style.terrain?(tn,gr)=>I.style.terrain.getElevation(Zi,tn,gr):null,cr=_.layout.get("text-rotation-alignment")==="map";xr(vr,Zi.posMatrix,I,C,ci,li,Rt,he,cr,mr)}const bi=I.translatePosMatrix(Zi.posMatrix,Ai,R,H),Pt=$t||C&&Ti||qi?Mr:ci,Ft=I.translatePosMatrix(li,Ai,R,H,!0),Pi=nn&&_.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ni;Ni=nn?vr.iconsInText?qe(cn.kind,Q,ui,Rt,I,bi,Pt,Ft,Ae,Qe):ge(cn.kind,Q,ui,Rt,I,bi,Pt,Ft,C,Ae,!0):oe(cn.kind,Q,ui,Rt,I,bi,Pt,Ft,C,Ae);const Ci={program:j,buffers:sr,uniformValues:Ni,atlasTexture:Fe,atlasTextureIcon:ct,atlasInterpolation:Oe,atlasInterpolationIcon:He,isSDF:nn,hasHalo:Pi};if(It&&vr.canOverlap){gi=!0;const mr=sr.segments.get();for(const cr of mr)Si.push({segments:new h.SegmentVector([cr]),sortKey:cr.sortKey,state:Ci,terrainData:le})}else Si.push({segments:sr.segments,sortKey:0,state:Ci,terrainData:le})}gi&&Si.sort((Zi,Ai)=>Zi.sortKey-Ai.sortKey);for(const Zi of Si){const Ai=Zi.state;if(Ve.activeTexture.set(vt.TEXTURE0),Ai.atlasTexture.bind(Ai.atlasInterpolation,vt.CLAMP_TO_EDGE),Ai.atlasTextureIcon&&(Ve.activeTexture.set(vt.TEXTURE1),Ai.atlasTextureIcon&&Ai.atlasTextureIcon.bind(Ai.atlasInterpolationIcon,vt.CLAMP_TO_EDGE)),Ai.isSDF){const vr=Ai.uniformValues;Ai.hasHalo&&(vr.u_is_halo=1,ro(Ai.buffers,Zi.segments,_,I,Ai.program,fi,we,Be,vr,Zi.terrainData)),vr.u_is_halo=0}ro(Ai.buffers,Zi.segments,_,I,Ai.program,fi,we,Be,Ai.uniformValues,Zi.terrainData)}}function ro(I,u,_,k,C,R,H,ie,ae,he){const we=k.context;C.draw(we,we.gl.TRIANGLES,R,H,ie,Kt.disabled,ae,he,_.id,I.layoutVertexBuffer,I.indexBuffer,u,_.paint,k.transform.zoom,I.programConfigurations.get(_.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function lo(I,u,_,k,C,R,H){const ie=I.context.gl,ae=_.paint.get("fill-pattern"),he=ae&&ae.constantOr(1),we=_.getCrossfadeParameters();let Be,Ve,vt,ut,dt;H?(Ve=he&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Be=ie.LINES):(Ve=he?"fillPattern":"fill",Be=ie.TRIANGLES);for(const Rt of k){const $t=u.getTile(Rt);if(he&&!$t.patternsLoaded())continue;const ui=$t.getBucket(_);if(!ui)continue;const It=ui.programConfigurations.get(_.id),gi=I.useProgram(Ve,It),fi=I.style.terrain&&I.style.terrain.getTerrainData(Rt);he&&(I.context.activeTexture.set(ie.TEXTURE0),$t.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),It.updatePaintBuffers(we));const Ti=ae.constantOr(null);if(Ti&&$t.imageAtlas){const Ai=$t.imageAtlas,vr=Ai.patternPositions[Ti.to.toString()],sr=Ai.patternPositions[Ti.from.toString()];vr&&sr&&It.setConstantPatternPositions(vr,sr)}const Si=fi?Rt:null,Zi=I.translatePosMatrix(Si?Si.posMatrix:Rt.posMatrix,$t,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(H){ut=ui.indexBuffer2,dt=ui.segments2;const Ai=[ie.drawingBufferWidth,ie.drawingBufferHeight];vt=Ve==="fillOutlinePattern"&&he?$s(Zi,I,we,$t,Ai):Vo(Zi,Ai)}else ut=ui.indexBuffer,dt=ui.segments,vt=he?fs(Zi,I,we,$t):Io(Zi);gi.draw(I.context,Be,C,I.stencilModeForClipping(Rt),R,Kt.disabled,vt,fi,_.id,ui.layoutVertexBuffer,ut,dt,_.paint,I.transform.zoom,It)}}function ho(I,u,_,k,C,R,H){const ie=I.context,ae=ie.gl,he=_.paint.get("fill-extrusion-pattern"),we=he.constantOr(1),Be=_.getCrossfadeParameters(),Ve=_.paint.get("fill-extrusion-opacity");for(const vt of k){const ut=u.getTile(vt),dt=ut.getBucket(_);if(!dt)continue;const Rt=I.style.terrain&&I.style.terrain.getTerrainData(vt),$t=dt.programConfigurations.get(_.id),ui=I.useProgram(we?"fillExtrusionPattern":"fillExtrusion",$t);we&&(I.context.activeTexture.set(ae.TEXTURE0),ut.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),$t.updatePaintBuffers(Be));const It=he.constantOr(null);if(It&&ut.imageAtlas){const Si=ut.imageAtlas,Zi=Si.patternPositions[It.to.toString()],Ai=Si.patternPositions[It.from.toString()];Zi&&Ai&&$t.setConstantPatternPositions(Zi,Ai)}const gi=I.translatePosMatrix(vt.posMatrix,ut,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),fi=_.paint.get("fill-extrusion-vertical-gradient"),Ti=we?Qs(gi,I,fi,Ve,vt,Be,ut):io(gi,I,fi,Ve);ui.draw(ie,ie.gl.TRIANGLES,C,R,H,Kt.backCCW,Ti,Rt,_.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,_.paint,I.transform.zoom,$t,I.style.terrain&&dt.centroidVertexBuffer)}}function Ko(I,u,_,k,C,R,H){const ie=I.context,ae=ie.gl,he=_.fbo;if(!he)return;const we=I.useProgram("hillshade"),Be=I.style.terrain&&I.style.terrain.getTerrainData(u);ie.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,he.colorAttachment.get()),we.draw(ie,ae.TRIANGLES,C,R,H,Kt.disabled,((Ve,vt,ut,dt)=>{const Rt=ut.paint.get("hillshade-shadow-color"),$t=ut.paint.get("hillshade-highlight-color"),ui=ut.paint.get("hillshade-accent-color");let It=ut.paint.get("hillshade-illumination-direction")*(Math.PI/180);ut.paint.get("hillshade-illumination-anchor")==="viewport"&&(It-=Ve.transform.angle);const gi=!Ve.options.moving;return{u_matrix:dt?dt.posMatrix:Ve.transform.calculatePosMatrix(vt.tileID.toUnwrapped(),gi),u_image:0,u_latrange:Tl(0,vt.tileID),u_light:[ut.paint.get("hillshade-exaggeration"),It],u_shadow:Rt,u_highlight:$t,u_accent:ui}})(I,_,k,Be?u:null),Be,k.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}function Bo(I,u,_,k,C,R){const H=I.context,ie=H.gl,ae=u.dem;if(ae&&ae.data){const he=ae.dim,we=ae.stride,Be=ae.getPixels();if(H.activeTexture.set(ie.TEXTURE1),H.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||I.getTileTexture(we),u.demTexture){const vt=u.demTexture;vt.update(Be,{premultiply:!1}),vt.bind(ie.NEAREST,ie.CLAMP_TO_EDGE)}else u.demTexture=new J(H,Be,ie.RGBA,{premultiply:!1}),u.demTexture.bind(ie.NEAREST,ie.CLAMP_TO_EDGE);H.activeTexture.set(ie.TEXTURE0);let Ve=u.fbo;if(!Ve){const vt=new J(H,{width:he,height:he,data:null},ie.RGBA);vt.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),Ve=u.fbo=H.createFramebuffer(he,he,!0),Ve.colorAttachment.set(vt.texture)}H.bindFramebuffer.set(Ve.framebuffer),H.viewport.set([0,0,he,he]),I.useProgram("hillshadePrepare").draw(H,ie.TRIANGLES,k,C,R,Kt.disabled,((vt,ut)=>{const dt=ut.stride,Rt=h.create();return h.ortho(Rt,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(Rt,Rt,[0,-h.EXTENT,0]),{u_matrix:Rt,u_image:1,u_dimension:[dt,dt],u_zoom:vt.overscaledZ,u_unpack:ut.getUnpackVector()}})(u.tileID,ae),null,_.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function gn(I,u,_,k,C,R){const H=k.paint.get("raster-fade-duration");if(!R&&H>0){const ie=h.exported.now(),ae=(ie-I.timeAdded)/H,he=u?(ie-u.timeAdded)/H:-1,we=_.getSource(),Be=C.coveringZoomLevel({tileSize:we.tileSize,roundZoom:we.roundZoom}),Ve=!u||Math.abs(u.tileID.overscaledZ-Be)>Math.abs(I.tileID.overscaledZ-Be),vt=Ve&&I.refreshedUponExpiration?1:h.clamp(Ve?ae:1-he,0,1);return I.refreshedUponExpiration&&ae>=1&&(I.refreshedUponExpiration=!1),u?{opacity:1,mix:1-vt}:{opacity:vt,mix:0}}return{opacity:1,mix:0}}const Qo=new h.Color(1,0,0,1),Go=new h.Color(0,1,0,1),fl=new h.Color(0,0,1,1),Xa=new h.Color(1,0,1,1),tu=new h.Color(0,1,1,1);function ta(I,u,_,k){La(I,0,u+_/2,I.transform.width,_,k)}function Ya(I,u,_,k){La(I,u-_/2,0,_,I.transform.height,k)}function La(I,u,_,k,C,R){const H=I.context,ie=H.gl;ie.enable(ie.SCISSOR_TEST),ie.scissor(u*I.pixelRatio,_*I.pixelRatio,k*I.pixelRatio,C*I.pixelRatio),H.clear({color:R}),ie.disable(ie.SCISSOR_TEST)}function iu(I,u,_){const k=I.context,C=k.gl,R=_.posMatrix,H=I.useProgram("debug"),ie=Ie.disabled,ae=zt.disabled,he=I.colorModeForRenderPass(),we="$debug",Be=I.style.terrain&&I.style.terrain.getTerrainData(_);k.activeTexture.set(C.TEXTURE0),I.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE);const Ve=u.getTileByID(_.key).latestRawTileData,vt=Math.floor((Ve&&Ve.byteLength||0)/1024),ut=u.getTile(_).tileSize,dt=512/Math.min(ut,512)*(_.overscaledZ/I.transform.zoom)*.5;let Rt=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(Rt+=` => ${_.overscaledZ}`),function($t,ui){$t.initDebugOverlayCanvas();const It=$t.debugOverlayCanvas,gi=$t.context.gl,fi=$t.debugOverlayCanvas.getContext("2d");fi.clearRect(0,0,It.width,It.height),fi.shadowColor="white",fi.shadowBlur=2,fi.lineWidth=1.5,fi.strokeStyle="white",fi.textBaseline="top",fi.font="bold 36px Open Sans, sans-serif",fi.fillText(ui,5,5),fi.strokeText(ui,5,5),$t.debugOverlayTexture.update(It),$t.debugOverlayTexture.bind(gi.LINEAR,gi.CLAMP_TO_EDGE)}(I,`${Rt} ${vt}kB`),H.draw(k,C.TRIANGLES,ie,ae,Hn.alphaBlended,Kt.disabled,ds(R,h.Color.transparent,dt),null,we,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),H.draw(k,C.LINE_STRIP,ie,ae,he,Kt.disabled,ds(R,h.Color.red),Be,we,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function ss(I,u,_){const k=I.context,C=k.gl,R=I.colorModeForRenderPass(),H=new Ie(C.LEQUAL,Ie.ReadWrite,I.depthRangeFor3D),ie=I.useProgram("terrain"),ae=u.getTerrainMesh(),he=u.getTerrainData(_.tileID);k.bindFramebuffer.set(null),k.viewport.set([0,0,I.width,I.height]),k.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,u.getRTTFramebuffer().colorAttachment.get());const we=I.transform.calculatePosMatrix(_.tileID.toUnwrapped());ie.draw(k,C.TRIANGLES,H,zt.disabled,R,Kt.backCCW,{u_matrix:we,u_texture:0},he,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}function Fl(I,u,_,k){const C=I.context,R=_.tileSize*u.qualityFactor;_.textures[k]||(_.textures[k]=I.getTileTexture(R)||new J(C,{width:R,height:R,data:null},C.gl.RGBA),_.textures[k].bind(C.gl.LINEAR,C.gl.CLAMP_TO_EDGE),k===0&&u.sourceCache.renderHistory.unshift(_.tileID.key));const H=u.getRTTFramebuffer();H.colorAttachment.set(_.textures[k].texture),C.bindFramebuffer.set(H.framebuffer),C.viewport.set([0,0,R,R])}class dl{constructor(u){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=u,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=u.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const u=this.painter.style,_=u.terrain;for(const k in u.sourceCaches){this._coordsDescendingInv[k]={};const C=u.sourceCaches[k].getVisibleCoordinates();for(const R of C){const H=_.sourceCache.getTerrainCoords(R);for(const ie in H)this._coordsDescendingInv[k][ie]||(this._coordsDescendingInv[k][ie]=[]),this._coordsDescendingInv[k][ie].push(H[ie])}}for(const k of u._order){const C=u._layers[k],R=C.source;if(this._renderToTexture[C.type]&&!this._coordsDescendingInvStr[R]){this._coordsDescendingInvStr[R]={};for(const H in this._coordsDescendingInv[R])this._coordsDescendingInvStr[R][H]=this._coordsDescendingInv[R][H].map(ie=>ie.key).sort().join()}}return this._renderableTiles.forEach(k=>{for(const C in this._coordsDescendingInvStr){const R=this._coordsDescendingInvStr[C][k.tileID.key];R&&R!==k.textureCoords[C]&&k.clearTextures(this.painter),_.needsRerender(C,k.tileID)&&k.clearTextures(this.painter)}this._rerender[k.tileID.key]=!k.textures.length}),_.clearRerenderCache(),_.sourceCache.removeOutdated(this.painter),this}renderLayer(u){const _=u.type,k=this.painter,C=k.style._order,R=k.currentLayer,H=R+1===C.length;if(this._renderToTexture[_]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(C[R]),!H))return!0;if(this._renderToTexture[this._prevType]||_==="hillshade"||this._renderToTexture[_]&&H){this._prevType=_;const ie=this._stacks.length-1,ae=this._stacks[ie]||[];for(const he of this._renderableTiles){if(Fl(k,k.style.terrain,he,ie),this._rerender[he.tileID.key]){k.context.clear({color:h.Color.transparent});for(let we=0;we<ae.length;we++){const Be=k.style._layers[ae[we]],Ve=Be.source?this._coordsDescendingInv[Be.source][he.tileID.key]:[he.tileID];k._renderTileClippingMasks(Be,Ve),k.renderLayer(k,k.style.sourceCaches[Be.source],Be,Ve),Be.source&&(he.textureCoords[Be.source]=this._coordsDescendingInvStr[Be.source][he.tileID.key])}}ss(k,k.style.terrain,he)}if(_==="hillshade"){this._stacks.push([C[R]]);for(const he of this._renderableTiles){const we=this._coordsDescendingInv[u.source][he.tileID.key];Fl(k,k.style.terrain,he,this._stacks.length-1),k.context.clear({color:h.Color.transparent}),k._renderTileClippingMasks(u,we),k.renderLayer(k,k.style.sourceCaches[u.source],u,we),ss(k,k.style.terrain,he)}return!0}return this._renderToTexture[_]}return!1}}const pa={symbol:function(I,u,_,k,C){if(I.renderPass!=="translucent")return;const R=zt.disabled,H=I.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(ie,ae,he,we,Be,Ve,vt){const ut=ae.transform,dt=Be==="map",Rt=Ve==="map";for(const $t of ie){const ui=we.getTile($t),It=ui.getBucket(he);if(!It||!It.text||!It.text.segments.get().length)continue;const gi=h.evaluateSizeForZoom(It.textSizeData,ut.zoom),fi=Tn(ui,1,ae.transform.zoom),Ti=je($t.posMatrix,Rt,dt,ae.transform,fi),Si=he.layout.get("icon-text-fit")!=="none"&&It.hasIconData();if(gi){const Zi=Math.pow(2,ut.zoom-ui.tileID.overscaledZ);mn(It,dt,Rt,vt,ut,Ti,$t.posMatrix,Zi,gi,Si,ae.style.terrain?(Ai,vr)=>ae.style.terrain.getElevation($t,Ai,vr):null)}}}(k,I,_,u,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),C),_.paint.get("icon-opacity").constantOr(1)!==0&&Mn(I,u,_,k,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),R,H),_.paint.get("text-opacity").constantOr(1)!==0&&Mn(I,u,_,k,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),R,H),u.map.showCollisionBoxes&&(Xi(I,u,_,k,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),Xi(I,u,_,k,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(I,u,_,k){if(I.renderPass!=="translucent")return;const C=_.paint.get("circle-opacity"),R=_.paint.get("circle-stroke-width"),H=_.paint.get("circle-stroke-opacity"),ie=!_.layout.get("circle-sort-key").isConstant();if(C.constantOr(1)===0&&(R.constantOr(1)===0||H.constantOr(1)===0))return;const ae=I.context,he=ae.gl,we=I.depthModeForSublayer(0,Ie.ReadOnly),Be=zt.disabled,Ve=I.colorModeForRenderPass(),vt=[];for(let ut=0;ut<k.length;ut++){const dt=k[ut],Rt=u.getTile(dt),$t=Rt.getBucket(_);if(!$t)continue;const ui=$t.programConfigurations.get(_.id),It=I.useProgram("circle",ui),gi=$t.layoutVertexBuffer,fi=$t.indexBuffer,Ti=I.style.terrain&&I.style.terrain.getTerrainData(dt),Si={programConfiguration:ui,program:It,layoutVertexBuffer:gi,indexBuffer:fi,uniformValues:Jo(I,dt,Rt,_),terrainData:Ti};if(ie){const Zi=$t.segments.get();for(const Ai of Zi)vt.push({segments:new h.SegmentVector([Ai]),sortKey:Ai.sortKey,state:Si})}else vt.push({segments:$t.segments,sortKey:0,state:Si})}ie&&vt.sort((ut,dt)=>ut.sortKey-dt.sortKey);for(const ut of vt){const{programConfiguration:dt,program:Rt,layoutVertexBuffer:$t,indexBuffer:ui,uniformValues:It,terrainData:gi}=ut.state;Rt.draw(ae,he.TRIANGLES,we,Be,Ve,Kt.disabled,It,gi,_.id,$t,ui,ut.segments,_.paint,I.transform.zoom,dt)}},heatmap:function(I,u,_,k){if(_.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){const C=I.context,R=C.gl,H=zt.disabled,ie=new Hn([R.ONE,R.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(ae,he,we){const Be=ae.gl;ae.activeTexture.set(Be.TEXTURE1),ae.viewport.set([0,0,he.width/4,he.height/4]);let Ve=we.heatmapFbo;if(Ve)Be.bindTexture(Be.TEXTURE_2D,Ve.colorAttachment.get()),ae.bindFramebuffer.set(Ve.framebuffer);else{const vt=Be.createTexture();Be.bindTexture(Be.TEXTURE_2D,vt),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_WRAP_S,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_WRAP_T,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_MIN_FILTER,Be.LINEAR),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_MAG_FILTER,Be.LINEAR),Ve=we.heatmapFbo=ae.createFramebuffer(he.width/4,he.height/4,!1),function(ut,dt,Rt,$t){const ui=ut.gl;ui.texImage2D(ui.TEXTURE_2D,0,ui.RGBA,dt.width/4,dt.height/4,0,ui.RGBA,ut.extRenderToTextureHalfFloat?ut.extTextureHalfFloat.HALF_FLOAT_OES:ui.UNSIGNED_BYTE,null),$t.colorAttachment.set(Rt)}(ae,he,vt,Ve)}})(C,I,_),C.clear({color:h.Color.transparent});for(let ae=0;ae<k.length;ae++){const he=k[ae];if(u.hasRenderableParent(he))continue;const we=u.getTile(he),Be=we.getBucket(_);if(!Be)continue;const Ve=Be.programConfigurations.get(_.id),vt=I.useProgram("heatmap",Ve),{zoom:ut}=I.transform;vt.draw(C,R.TRIANGLES,Ie.disabled,H,ie,Kt.disabled,Ha(he.posMatrix,we,ut,_.paint.get("heatmap-intensity")),null,_.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,_.paint,I.transform.zoom,Ve)}C.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(C,R){const H=C.context,ie=H.gl,ae=R.heatmapFbo;if(!ae)return;H.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,ae.colorAttachment.get()),H.activeTexture.set(ie.TEXTURE1);let he=R.colorRampTexture;he||(he=R.colorRampTexture=new J(H,R.colorRamp,ie.RGBA)),he.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),C.useProgram("heatmapTexture").draw(H,ie.TRIANGLES,Ie.disabled,zt.disabled,C.colorModeForRenderPass(),Kt.disabled,((we,Be,Ve,vt)=>{const ut=h.create();h.ortho(ut,0,we.width,we.height,0,0,1);const dt=we.context.gl;return{u_matrix:ut,u_world:[dt.drawingBufferWidth,dt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Be.paint.get("heatmap-opacity")}})(C,R),null,R.id,C.viewportBuffer,C.quadTriangleIndexBuffer,C.viewportSegments,R.paint,C.transform.zoom)}(I,_))},line:function(I,u,_,k){if(I.renderPass!=="translucent")return;const C=_.paint.get("line-opacity"),R=_.paint.get("line-width");if(C.constantOr(1)===0||R.constantOr(1)===0)return;const H=I.depthModeForSublayer(0,Ie.ReadOnly),ie=I.colorModeForRenderPass(),ae=_.paint.get("line-dasharray"),he=_.paint.get("line-pattern"),we=he.constantOr(1),Be=_.paint.get("line-gradient"),Ve=_.getCrossfadeParameters(),vt=we?"linePattern":ae?"lineSDF":Be?"lineGradient":"line",ut=I.context,dt=ut.gl;let Rt=!0;for(const $t of k){const ui=u.getTile($t);if(we&&!ui.patternsLoaded())continue;const It=ui.getBucket(_);if(!It)continue;const gi=It.programConfigurations.get(_.id),fi=I.context.program.get(),Ti=I.useProgram(vt,gi),Si=Rt||Ti.program!==fi,Zi=I.style.terrain&&I.style.terrain.getTerrainData($t),Ai=he.constantOr(null);if(Ai&&ui.imageAtlas){const Ir=ui.imageAtlas,nn=Ir.patternPositions[Ai.to.toString()],cn=Ir.patternPositions[Ai.from.toString()];nn&&cn&&gi.setConstantPatternPositions(nn,cn)}const vr=Zi?$t:null,sr=we?Bs(I,ui,_,Ve,vr):ae?Rs(I,ui,_,ae,Ve,vr):Be?Ll(I,ui,_,It.lineClipsArray.length,vr):Wa(I,ui,_,vr);if(we)ut.activeTexture.set(dt.TEXTURE0),ui.imageAtlasTexture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),gi.updatePaintBuffers(Ve);else if(ae&&(Si||I.lineAtlas.dirty))ut.activeTexture.set(dt.TEXTURE0),I.lineAtlas.bind(ut);else if(Be){const Ir=It.gradients[_.id];let nn=Ir.texture;if(_.gradientVersion!==Ir.version){let cn=256;if(_.stepInterpolant){const P=u.getSource().maxzoom,j=$t.canonical.z===P?Math.ceil(1<<I.transform.maxZoom-$t.canonical.z):1;cn=h.clamp(h.nextPowerOfTwo(It.maxLineLength/h.EXTENT*1024*j),256,ut.maxTextureSize)}Ir.gradient=h.renderColorRamp({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:cn,image:Ir.gradient||void 0,clips:It.lineClipsArray}),Ir.texture?Ir.texture.update(Ir.gradient):Ir.texture=new J(ut,Ir.gradient,dt.RGBA),Ir.version=_.gradientVersion,nn=Ir.texture}ut.activeTexture.set(dt.TEXTURE0),nn.bind(_.stepInterpolant?dt.NEAREST:dt.LINEAR,dt.CLAMP_TO_EDGE)}Ti.draw(ut,dt.TRIANGLES,H,I.stencilModeForClipping($t),ie,Kt.disabled,sr,Zi,_.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,_.paint,I.transform.zoom,gi,It.layoutVertexBuffer2),Rt=!1}},fill:function(I,u,_,k){const C=_.paint.get("fill-color"),R=_.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const H=I.colorModeForRenderPass(),ie=_.paint.get("fill-pattern"),ae=I.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&C.constantOr(h.Color.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===ae){const he=I.depthModeForSublayer(1,I.renderPass==="opaque"?Ie.ReadWrite:Ie.ReadOnly);lo(I,u,_,k,he,H,!1)}if(I.renderPass==="translucent"&&_.paint.get("fill-antialias")){const he=I.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,Ie.ReadOnly);lo(I,u,_,k,he,H,!0)}},"fill-extrusion":function(I,u,_,k){const C=_.paint.get("fill-extrusion-opacity");if(C!==0&&I.renderPass==="translucent"){const R=new Ie(I.context.gl.LEQUAL,Ie.ReadWrite,I.depthRangeFor3D);if(C!==1||_.paint.get("fill-extrusion-pattern").constantOr(1))ho(I,u,_,k,R,zt.disabled,Hn.disabled),ho(I,u,_,k,R,I.stencilModeFor3D(),I.colorModeForRenderPass());else{const H=I.colorModeForRenderPass();ho(I,u,_,k,R,zt.disabled,H)}}},hillshade:function(I,u,_,k){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;const C=I.context,R=I.depthModeForSublayer(0,Ie.ReadOnly),H=I.colorModeForRenderPass(),[ie,ae]=I.renderPass==="translucent"?I.stencilConfigForOverlap(k):[{},k];for(const he of ae){const we=u.getTile(he);we.needsHillshadePrepare!==void 0&&we.needsHillshadePrepare&&I.renderPass==="offscreen"?Bo(I,we,_,R,zt.disabled,H):I.renderPass==="translucent"&&Ko(I,he,we,_,R,ie[he.overscaledZ],H)}C.viewport.set([0,0,I.width,I.height])},raster:function(I,u,_,k){if(I.renderPass!=="translucent"||_.paint.get("raster-opacity")===0||!k.length)return;const C=I.context,R=C.gl,H=u.getSource(),ie=I.useProgram("raster"),ae=I.colorModeForRenderPass(),[he,we]=H instanceof Xt?[{},k]:I.stencilConfigForOverlap(k),Be=we[we.length-1].overscaledZ,Ve=!I.options.moving;for(const vt of we){const ut=I.depthModeForSublayer(vt.overscaledZ-Be,_.paint.get("raster-opacity")===1?Ie.ReadWrite:Ie.ReadOnly,R.LESS),dt=u.getTile(vt);dt.registerFadeDuration(_.paint.get("raster-fade-duration"));const Rt=u.findLoadedParent(vt,0),$t=gn(dt,Rt,u,_,I.transform,I.style.terrain);let ui,It;const gi=_.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;C.activeTexture.set(R.TEXTURE0),dt.texture.bind(gi,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),C.activeTexture.set(R.TEXTURE1),Rt?(Rt.texture.bind(gi,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),ui=Math.pow(2,Rt.tileID.overscaledZ-dt.tileID.overscaledZ),It=[dt.tileID.canonical.x*ui%1,dt.tileID.canonical.y*ui%1]):dt.texture.bind(gi,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const fi=I.style.terrain&&I.style.terrain.getTerrainData(vt),Ti=fi?vt:null,Si=Ti?Ti.posMatrix:I.transform.calculatePosMatrix(vt.toUnwrapped(),Ve),Zi=M(Si,It||[0,0],ui||1,$t,_);H instanceof Xt?ie.draw(C,R.TRIANGLES,ut,zt.disabled,ae,Kt.disabled,Zi,fi,_.id,H.boundsBuffer,I.quadTriangleIndexBuffer,H.boundsSegments):ie.draw(C,R.TRIANGLES,ut,he[vt.overscaledZ],ae,Kt.disabled,Zi,fi,_.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,u,_,k){const C=_.paint.get("background-color"),R=_.paint.get("background-opacity");if(R===0)return;const H=I.context,ie=H.gl,ae=I.transform,he=ae.tileSize,we=_.paint.get("background-pattern");if(I.isPatternMissing(we))return;const Be=!we&&C.a===1&&R===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==Be)return;const Ve=zt.disabled,vt=I.depthModeForSublayer(0,Be==="opaque"?Ie.ReadWrite:Ie.ReadOnly),ut=I.colorModeForRenderPass(),dt=I.useProgram(we?"backgroundPattern":"background"),Rt=k||ae.coveringTiles({tileSize:he,terrain:I.style.terrain});we&&(H.activeTexture.set(ie.TEXTURE0),I.imageManager.bind(I.context));const $t=_.getCrossfadeParameters();for(const ui of Rt){const It=k?ui.posMatrix:I.transform.calculatePosMatrix(ui.toUnwrapped()),gi=we?St(It,R,I,we,{tileID:ui,tileSize:he},$t):ht(It,R,C),fi=I.style.terrain&&I.style.terrain.getTerrainData(ui);dt.draw(H,ie.TRIANGLES,vt,Ve,ut,Kt.disabled,gi,fi,_.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}},debug:function(I,u,_){for(let k=0;k<_.length;k++)iu(I,u,_[k])},custom:function(I,u,_){const k=I.context,C=_.implementation;if(I.renderPass==="offscreen"){const R=C.prerender;R&&(I.setCustomLayerDefaults(),k.setColorMode(I.colorModeForRenderPass()),R.call(C,k.gl,I.transform.customLayerMatrix()),k.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),k.setColorMode(I.colorModeForRenderPass()),k.setStencilMode(zt.disabled);const R=C.renderingMode==="3d"?new Ie(I.context.gl.LEQUAL,Ie.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,Ie.ReadOnly);k.setDepthMode(R),C.render(k.gl,I.transform.customLayerMatrix()),k.setDirty(),I.setBaseState(),k.bindFramebuffer.set(null)}}};class Bl{constructor(u,_){this.context=new X(u),this.transform=_,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.create(),renderTime:0},this.setup(),this.numSublayers=Wt.maxUnderzooming+Wt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new jr,this.gpuTimers={}}resize(u,_,k){if(this.width=u*k,this.height=_*k,this.pixelRatio=k,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const u=this.context,_=new h.PosArray;_.emplaceBack(0,0),_.emplaceBack(h.EXTENT,0),_.emplaceBack(0,h.EXTENT),_.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(_,dn.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const k=new h.PosArray;k.emplaceBack(0,0),k.emplaceBack(h.EXTENT,0),k.emplaceBack(0,h.EXTENT),k.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=u.createVertexBuffer(k,dn.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const C=new h.RasterBoundsArray;C.emplaceBack(0,0,0,0),C.emplaceBack(h.EXTENT,0,h.EXTENT,0),C.emplaceBack(0,h.EXTENT,0,h.EXTENT),C.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(C,kt.members),this.rasterBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const R=new h.PosArray;R.emplaceBack(0,0),R.emplaceBack(1,0),R.emplaceBack(0,1),R.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(R,dn.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const H=new h.LineStripIndexArray;H.emplaceBack(0),H.emplaceBack(1),H.emplaceBack(3),H.emplaceBack(2),H.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(H);const ie=new h.TriangleIndexArray;ie.emplaceBack(0,1,2),ie.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(ie),this.emptyTexture=new J(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);const ae=this.context.gl;this.stencilClearMode=new zt({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO)}clearStencil(){const u=this.context,_=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const k=h.create();h.ortho(k,0,this.width,this.height,0,0,1),h.scale(k,k,[_.drawingBufferWidth,_.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,_.TRIANGLES,Ie.disabled,this.stencilClearMode,Hn.disabled,Kt.disabled,ea(k),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,_){if(this.currentStencilSource===u.source||!u.isTileClipped()||!_||!_.length)return;this.currentStencilSource=u.source;const k=this.context,C=k.gl;this.nextStencilID+_.length>256&&this.clearStencil(),k.setColorMode(Hn.disabled),k.setDepthMode(Ie.disabled);const R=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const H of _){const ie=this._tileClippingMaskIDs[H.key]=this.nextStencilID++,ae=this.style.terrain&&this.style.terrain.getTerrainData(H);R.draw(k,C.TRIANGLES,Ie.disabled,new zt({func:C.ALWAYS,mask:0},ie,255,C.KEEP,C.KEEP,C.REPLACE),Hn.disabled,Kt.disabled,ea(H.posMatrix),ae,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,_=this.context.gl;return new zt({func:_.NOTEQUAL,mask:255},u,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(u){const _=this.context.gl;return new zt({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(u){const _=this.context.gl,k=u.sort((H,ie)=>ie.overscaledZ-H.overscaledZ),C=k[k.length-1].overscaledZ,R=k[0].overscaledZ-C+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const H={};for(let ie=0;ie<R;ie++)H[ie+C]=new zt({func:_.GEQUAL,mask:255},ie+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=R,[H,k]}return[{[C]:zt.disabled},k]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Hn([u.CONSTANT_COLOR,u.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hn.unblended:Hn.alphaBlended}depthModeForSublayer(u,_,k){if(!this.opaquePassEnabledForLayer())return Ie.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Ie(k||this.context.gl.LEQUAL,_,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,_){this.style=u,this.options=_,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const k=this.style._order,C=this.style.sourceCaches,R=this.style.terrain&&new dl(this);for(const he in C){const we=C[he];we.used&&we.prepare(this.context)}const H={},ie={},ae={};for(const he in C){const we=C[he];H[he]=we.getVisibleCoordinates(),ie[he]=H[he].slice().reverse(),ae[he]=we.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let he=0;he<k.length;he++)if(this.style._layers[k[he]].is3D()){this.opaquePassCutoff=he;break}if(R){this.opaquePassCutoff=0;const he=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!h.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||he.length)&&(h.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(we,Be){const Ve=we.context,vt=Ve.gl,ut=Hn.unblended,dt=new Ie(vt.LEQUAL,Ie.ReadWrite,[0,1]),Rt=Be.getTerrainMesh(),$t=Be.sourceCache.getRenderableTiles(),ui=we.useProgram("terrainDepth");Ve.bindFramebuffer.set(Be.getFramebuffer("depth").framebuffer),Ve.viewport.set([0,0,we.width/devicePixelRatio,we.height/devicePixelRatio]),Ve.clear({color:h.Color.transparent,depth:1});for(const It of $t){const gi=Be.getTerrainData(It.tileID),fi=we.transform.calculatePosMatrix(It.tileID.toUnwrapped());ui.draw(Ve,vt.TRIANGLES,dt,zt.disabled,ut,Kt.backCCW,{u_matrix:fi},gi,"terrain",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}Ve.bindFramebuffer.set(null),Ve.viewport.set([0,0,we.width,we.height])}(this,this.style.terrain),function(we,Be){const Ve=we.context,vt=Ve.gl,ut=Hn.unblended,dt=new Ie(vt.LEQUAL,Ie.ReadWrite,[0,1]),Rt=Be.getTerrainMesh(),$t=Be.getCoordsTexture(),ui=Be.sourceCache.getRenderableTiles(),It=we.useProgram("terrainCoords");Ve.bindFramebuffer.set(Be.getFramebuffer("coords").framebuffer),Ve.viewport.set([0,0,we.width/devicePixelRatio,we.height/devicePixelRatio]),Ve.clear({color:h.Color.transparent,depth:1}),Be.coordsIndex=[];for(const gi of ui){const fi=Be.getTerrainData(gi.tileID);Ve.activeTexture.set(vt.TEXTURE0),vt.bindTexture(vt.TEXTURE_2D,$t.texture);const Ti=we.transform.calculatePosMatrix(gi.tileID.toUnwrapped());It.draw(Ve,vt.TRIANGLES,dt,zt.disabled,ut,Kt.backCCW,{u_matrix:Ti,u_terrain_coords_id:(255-Be.coordsIndex.length)/255,u_texture:0},fi,"terrain",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments),Be.coordsIndex.push(gi.tileID.key)}Ve.bindFramebuffer.set(null),Ve.viewport.set([0,0,we.width,we.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const he of k){const we=this.style._layers[he];if(!we.hasOffscreenPass()||we.isHidden(this.transform.zoom))continue;const Be=ie[we.source];(we.type==="custom"||Be.length)&&this.renderLayer(this,C[we.source],we,Be)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:_.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!R)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const he=this.style._layers[k[this.currentLayer]],we=C[he.source],Be=H[he.source];this._renderTileClippingMasks(he,Be),this.renderLayer(this,we,he,Be)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const he=this.style._layers[k[this.currentLayer]],we=C[he.source];if(R&&R.renderLayer(he))continue;const Be=(he.type==="symbol"?ae:ie)[he.source];this._renderTileClippingMasks(he,H[he.source]),this.renderLayer(this,we,he,Be)}if(this.options.showTileBoundaries){let he,we;Object.values(this.style._layers).forEach(Be=>{Be.source&&!Be.isHidden(this.transform.zoom)&&(Be.source!==(we&&we.id)&&(we=this.style.sourceCaches[Be.source]),(!he||he.getSource().maxzoom<we.getSource().maxzoom)&&(he=we))}),he&&pa.debug(this,he,he.getVisibleCoordinates())}this.options.showPadding&&function(he){const we=he.transform.padding;ta(he,he.transform.height-(we.top||0),3,Qo),ta(he,we.bottom||0,3,Go),Ya(he,we.left||0,3,fl),Ya(he,he.transform.width-(we.right||0),3,Xa);const Be=he.transform.centerPoint;(function(Ve,vt,ut,dt){La(Ve,vt-1,ut-10,2,20,dt),La(Ve,vt-10,ut-1,20,2,dt)})(he,Be.x,he.transform.height-Be.y,tu)}(this),this.context.setDefault()}renderLayer(u,_,k,C){k.isHidden(this.transform.zoom)||(k.type==="background"||k.type==="custom"||(C||[]).length)&&(this.id=k.id,this.gpuTimingStart(k),pa[k.type](u,_,k,C,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery;let k=this.gpuTimers[u.id];k||(k=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),k.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,k.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}queryGpuTimers(u){const _={};for(const k in u){const C=u[k],R=this.context.extTimerQuery,H=R.getQueryObjectEXT(C.query,R.QUERY_RESULT_EXT)/1e6;R.deleteQueryEXT(C.query),_[k]=H}return _}translatePosMatrix(u,_,k,C,R){if(!k[0]&&!k[1])return u;const H=R?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(H){const he=Math.sin(H),we=Math.cos(H);k=[k[0]*we-k[1]*he,k[0]*he+k[1]*we]}const ie=[R?k[0]:Tn(_,k[0],this.transform.zoom),R?k[1]:Tn(_,k[1],this.transform.zoom),0],ae=new Float32Array(16);return h.translate(ae,u,ie),ae}saveTileTexture(u){const _=this._tileTextures[u.size[0]];_?_.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const _=this._tileTextures[u];return _&&_.length>0?_.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const _=this.imageManager.getPattern(u.from.toString()),k=this.imageManager.getPattern(u.to.toString());return!_||!k}useProgram(u,_){this.cache=this.cache||{};const k=u+(_?_.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[k]||(this.cache[k]=new pn(this.context,u,to[u],_,Et[u],this._showOverdrawInspector,this.style.terrain)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new J(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class as{constructor(u,_){this.points=u,this.planes=_}static fromInvProjectionMatrix(u,_,k){const C=Math.pow(2,k),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ie=>{const ae=1/(ie=h.transformMat4([],ie,u))[3]/_*C;return h.mul$1(ie,ie,[ae,ae,1/ie[3],ae])}),H=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ie=>{const ae=h.sub([],R[ie[0]],R[ie[1]]),he=h.sub([],R[ie[2]],R[ie[1]]),we=h.normalize([],h.cross([],ae,he)),Be=-h.dot(we,R[ie[1]]);return we.concat(Be)});return new as(R,H)}}class Rl{constructor(u,_){this.min=u,this.max=_,this.center=h.scale$1([],h.add([],this.min,this.max),.5)}quadrant(u){const _=[u%2==0,u<2],k=h.clone$2(this.min),C=h.clone$2(this.max);for(let R=0;R<_.length;R++)k[R]=_[R]?this.min[R]:this.center[R],C[R]=_[R]?this.center[R]:this.max[R];return C[2]=this.max[2],new Rl(k,C)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const _=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let k=!0;for(let C=0;C<u.planes.length;C++){const R=u.planes[C];let H=0;for(let ie=0;ie<_.length;ie++)h.dot$1(R,_[ie])>=0&&H++;if(H===0)return 0;H!==_.length&&(k=!1)}if(k)return 2;for(let C=0;C<3;C++){let R=Number.MAX_VALUE,H=-Number.MAX_VALUE;for(let ie=0;ie<u.points.length;ie++){const ae=u.points[ie][C]-this.min[C];R=Math.min(R,ae),H=Math.max(H,ae)}if(H<0||R>this.max[C]-this.min[C])return 0}return 1}}class Pa{constructor(u=0,_=0,k=0,C=0){if(isNaN(u)||u<0||isNaN(_)||_<0||isNaN(k)||k<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=_,this.left=k,this.right=C}interpolate(u,_,k){return _.top!=null&&u.top!=null&&(this.top=h.number(u.top,_.top,k)),_.bottom!=null&&u.bottom!=null&&(this.bottom=h.number(u.bottom,_.bottom,k)),_.left!=null&&u.left!=null&&(this.left=h.number(u.left,_.left,k)),_.right!=null&&u.right!=null&&(this.right=h.number(u.right,_.right,k)),this}getCenter(u,_){const k=h.clamp((this.left+u-this.right)/2,0,u),C=h.clamp((this.top+_-this.bottom)/2,0,_);return new h.pointGeometry(k,C)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Pa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class pl{constructor(u,_,k,C,R){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=R===void 0||!!R,this._minZoom=u||0,this._maxZoom=_||22,this._minPitch=k==null?0:k,this._maxPitch=C==null?60:C,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Pa,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const u=new pl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u._elevation=this._elevation,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const _=-h.wrap(u,-180,180)*Math.PI/180;var k;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=(k=new h.ARRAY_TYPE(4),h.ARRAY_TYPE!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k),function(C,R,H){var ie=R[0],ae=R[1],he=R[2],we=R[3],Be=Math.sin(H),Ve=Math.cos(H);C[0]=ie*Ve+he*Be,C[1]=ae*Ve+we*Be,C[2]=ie*-Be+he*Ve,C[3]=ae*-Be+we*Ve}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const _=h.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const _=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._zoom=_,this.scale=this.zoomScale(_),this.tileZoom=Math.floor(_),this.zoomFraction=_-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,_,k){this._unmodified=!1,this._edgeInsets.interpolate(u,_,k),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const _=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(u){const _=[new h.UnwrappedTileID(0,u)];if(this._renderWorldCopies){const k=this.pointCoordinate(new h.pointGeometry(0,0)),C=this.pointCoordinate(new h.pointGeometry(this.width,0)),R=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),H=this.pointCoordinate(new h.pointGeometry(0,this.height)),ie=Math.floor(Math.min(k.x,C.x,R.x,H.x)),ae=Math.floor(Math.max(k.x,C.x,R.x,H.x)),he=1;for(let we=ie-he;we<=ae+he;we++)we!==0&&_.push(new h.UnwrappedTileID(we,u))}return _}coveringTiles(u){var _,k;let C=this.coveringZoomLevel(u);const R=C;if(u.minzoom!==void 0&&C<u.minzoom)return[];u.maxzoom!==void 0&&C>u.maxzoom&&(C=u.maxzoom);const H=this.pointCoordinate(this.getCameraPoint()),ie=h.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,C),he=[ae*H.x,ae*H.y,0],we=[ae*ie.x,ae*ie.y,0],Be=as.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,C);let Ve=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ve=C);const vt=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,ut=It=>({aabb:new Rl([It*ae,0,0],[(It+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:It,fullyVisible:!1}),dt=[],Rt=[],$t=C,ui=u.reparseOverscaled?R:C;if(this._renderWorldCopies)for(let It=1;It<=3;It++)dt.push(ut(-It)),dt.push(ut(It));for(dt.push(ut(0));dt.length>0;){const It=dt.pop(),gi=It.x,fi=It.y;let Ti=It.fullyVisible;if(!Ti){const Ir=It.aabb.intersects(Be);if(Ir===0)continue;Ti=Ir===2}const Si=u.terrain?he:we,Zi=It.aabb.distanceX(Si),Ai=It.aabb.distanceY(Si),vr=Math.max(Math.abs(Zi),Math.abs(Ai)),sr=vt+(1<<$t-It.zoom)-2;if(It.zoom===$t||vr>sr&&It.zoom>=Ve){const Ir=$t-It.zoom,nn=he[0]-.5-(gi<<Ir),cn=he[1]-.5-(fi<<Ir);Rt.push({tileID:new h.OverscaledTileID(It.zoom===$t?ui:It.zoom,It.wrap,It.zoom,gi,fi),distanceSq:h.sqrLen([we[0]-.5-gi,we[1]-.5-fi]),tileDistanceToCamera:Math.sqrt(nn*nn+cn*cn)})}else for(let Ir=0;Ir<4;Ir++){const nn=(gi<<1)+Ir%2,cn=(fi<<1)+(Ir>>1),P=It.zoom+1;let j=It.aabb.quadrant(Ir);if(u.terrain){const Q=new h.OverscaledTileID(P,It.wrap,P,nn,cn),le=u.terrain.getMinMaxElevation(Q),Ae=(_=le.minElevation)!==null&&_!==void 0?_:this.elevation,Fe=(k=le.maxElevation)!==null&&k!==void 0?k:this.elevation;j=new Rl([j.min[0],j.min[1],Ae],[j.max[0],j.max[1],Fe])}dt.push({aabb:j,zoom:P,x:nn,y:cn,wrap:It.wrap,fullyVisible:Ti})}}return Rt.sort((It,gi)=>It.distanceSq-gi.distanceSq).map(It=>It.tileID)}resize(u,_){this.width=u,this.height=_,this.pixelsToGLUnits=[2/u,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const _=h.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.pointGeometry(h.mercatorXfromLng(u.lng)*this.worldSize,h.mercatorYfromLat(_)*this.worldSize)}unproject(u){return new h.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(u){this.freezeElevation||(this.elevation=u?this.getElevation(this._center,u):0)}getElevation(u,_){const k=h.MercatorCoordinate.fromLngLat(u),C=(1<<this.tileZoom)*h.EXTENT,R=k.x*C,H=k.y*C,ie=Math.floor(R/h.EXTENT),ae=Math.floor(H/h.EXTENT),he=new h.OverscaledTileID(this.tileZoom,0,this.tileZoom,ie,ae);return _.getElevation(he,R%h.EXTENT,H%h.EXTENT,h.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const _=this.pointLocation(this.centerPoint,u),k=this.getElevation(_,u);if(!(this.elevation-k))return;const C=this.getCameraPosition(),R=h.MercatorCoordinate.fromLngLat(C.lngLat,C.altitude),H=h.MercatorCoordinate.fromLngLat(_,k),ie=R.x-H.x,ae=R.y-H.y,he=R.z-H.z,we=Math.sqrt(ie*ie+ae*ae+he*he),Be=this.scaleZoom(this.cameraToCenterDistance/we/this.tileSize);this._elevation=k,this._center=_,this.zoom=Be}setLocationAtPoint(u,_){const k=this.pointCoordinate(_),C=this.pointCoordinate(this.centerPoint),R=this.locationCoordinate(u),H=new h.MercatorCoordinate(R.x-(k.x-C.x),R.y-(k.y-C.y));this.center=this.coordinateLocation(H),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,_){return _?this.coordinatePoint(this.locationCoordinate(u),this.getElevation(u,_),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,_){return this.coordinateLocation(this.pointCoordinate(u,_))}locationCoordinate(u){return h.MercatorCoordinate.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,_){if(_){const Ve=_.pointCoordinate(u);if(Ve!=null)return Ve}const k=[u.x,u.y,0,1],C=[u.x,u.y,1,1];h.transformMat4(k,k,this.pixelMatrixInverse),h.transformMat4(C,C,this.pixelMatrixInverse);const R=k[3],H=C[3],ie=k[1]/R,ae=C[1]/H,he=k[2]/R,we=C[2]/H,Be=he===we?0:(0-he)/(we-he);return new h.MercatorCoordinate(h.number(k[0]/R,C[0]/H,Be)/this.worldSize,h.number(ie,ae,Be)/this.worldSize)}coordinatePoint(u,_=0,k=this.pixelMatrix){const C=[u.x*this.worldSize,u.y*this.worldSize,_,1];return h.transformMat4(C,C,k),new h.pointGeometry(C[0]/C[3],C[1]/C[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new h.LngLatBounds().extend(this.pointLocation(new h.pointGeometry(0,u))).extend(this.pointLocation(new h.pointGeometry(this.width,u))).extend(this.pointLocation(new h.pointGeometry(this.width,this.height))).extend(this.pointLocation(new h.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new h.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,_=!1){const k=u.key,C=_?this._alignedPosMatrixCache:this._posMatrixCache;if(C[k])return C[k];const R=u.canonical,H=this.worldSize/this.zoomScale(R.z),ie=R.x+Math.pow(2,R.z)*u.wrap,ae=h.identity(new Float64Array(16));return h.translate(ae,ae,[ie*H,R.y*H,0]),h.scale(ae,ae,[H/h.EXTENT,H/h.EXTENT,1]),h.multiply(ae,_?this.alignedProjMatrix:this.projMatrix,ae),C[k]=new Float32Array(ae),C[k]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,_,k,C,R=-90,H=90,ie=-180,ae=180;const he=this.size,we=this._unmodified;if(this.latRange){const vt=this.latRange;R=h.mercatorYfromLat(vt[1])*this.worldSize,H=h.mercatorYfromLat(vt[0])*this.worldSize,u=H-R<he.y?he.y/(H-R):0}if(this.lngRange){const vt=this.lngRange;ie=h.wrap(h.mercatorXfromLng(vt[0])*this.worldSize,0,this.worldSize),ae=h.wrap(h.mercatorXfromLng(vt[1])*this.worldSize,0,this.worldSize),ae<ie&&(ae+=this.worldSize),_=ae-ie<he.x?he.x/(ae-ie):0}const Be=this.point,Ve=Math.max(_||0,u||0);if(Ve)return this.center=this.unproject(new h.pointGeometry(_?(ae+ie)/2:Be.x,u?(H+R)/2:Be.y)),this.zoom+=this.scaleZoom(Ve),this._unmodified=we,void(this._constraining=!1);if(this.latRange){const vt=Be.y,ut=he.y/2;vt-ut<R&&(C=R+ut),vt+ut>H&&(C=H-ut)}if(this.lngRange){const vt=(ie+ae)/2,ut=h.wrap(Be.x,vt-this.worldSize/2,vt+this.worldSize/2),dt=he.x/2;ut-dt<ie&&(k=ie+dt),ut+dt>ae&&(k=ae-dt)}k===void 0&&C===void 0||(this.center=this.unproject(new h.pointGeometry(k!==void 0?k:Be.x,C!==void 0?C:Be.y)).wrap()),this._unmodified=we,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,_=this.point.x,k=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let C=h.identity(new Float64Array(16));h.scale(C,C,[this.width/2,-this.height/2,1]),h.translate(C,C,[1,-1,0]),this.labelPlaneMatrix=C,C=h.identity(new Float64Array(16)),h.scale(C,C,[1,-1,1]),h.translate(C,C,[-1,-1,0]),h.scale(C,C,[2/this.width,2/this.height,1]),this.glCoordMatrix=C,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const R=Math.PI/2+this._pitch,H=this._fov*(.5+u.y/this.height),ie=Math.sin(H)*this.cameraToSeaLevelDistance/Math.sin(h.clamp(Math.PI-R-H,.01,Math.PI-.01)),ae=this.getHorizon(),he=2*Math.atan(ae/this.cameraToCenterDistance)*(.5+u.y/(2*ae)),we=Math.sin(he)*this.cameraToSeaLevelDistance/Math.sin(h.clamp(Math.PI-R-he,.01,Math.PI-.01)),Be=Math.cos(Math.PI/2-this._pitch)*ie+this.cameraToSeaLevelDistance,Ve=Math.cos(Math.PI/2-this._pitch)*we+this.cameraToSeaLevelDistance,vt=1.01*Math.min(Be,Ve),ut=this.height/50;C=new Float64Array(16),h.perspective(C,this._fov,this.width/this.height,ut,vt),C[8]=2*-u.x/this.width,C[9]=2*u.y/this.height,h.scale(C,C,[1,-1,1]),h.translate(C,C,[0,0,-this.cameraToCenterDistance]),h.rotateX(C,C,this._pitch),h.rotateZ(C,C,this.angle),h.translate(C,C,[-_,-k,0]),this.mercatorMatrix=h.scale([],C,[this.worldSize,this.worldSize,this.worldSize]),h.scale(C,C,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,C),h.translate(C,C,[0,0,-this.elevation]),this.projMatrix=C,this.invProjMatrix=h.invert([],C),this.pixelMatrix3D=h.multiply(new Float64Array(16),this.labelPlaneMatrix,C);const dt=this.width%2/2,Rt=this.height%2/2,$t=Math.cos(this.angle),ui=Math.sin(this.angle),It=_-Math.round(_)+$t*dt+ui*Rt,gi=k-Math.round(k)+$t*Rt+ui*dt,fi=new Float64Array(C);if(h.translate(fi,fi,[It>.5?It-1:It,gi>.5?gi-1:gi,0]),this.alignedProjMatrix=fi,C=h.invert(new Float64Array(16),this.pixelMatrix),!C)throw new Error("failed to invert matrix");this.pixelMatrixInverse=C,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new h.pointGeometry(0,0)),_=[u.x*this.worldSize,u.y*this.worldSize,0,1];return h.transformMat4(_,_,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,u))}getCameraQueryGeometry(u){const _=this.getCameraPoint();if(u.length===1)return[u[0],_];{let k=_.x,C=_.y,R=_.x,H=_.y;for(const ie of u)k=Math.min(k,ie.x),C=Math.min(C,ie.y),R=Math.max(R,ie.x),H=Math.max(H,ie.y);return[new h.pointGeometry(k,C),new h.pointGeometry(R,C),new h.pointGeometry(R,H),new h.pointGeometry(k,H),new h.pointGeometry(k,C)]}}}class ia{constructor(u){this._hashName=u&&encodeURIComponent(u),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(_,k){let C=!1,R=null;const H=()=>{R=null,C&&(_(),R=setTimeout(H,300),C=!1)};return()=>(C=!0,R||H(),R)}(this._updateHashUnthrottled.bind(this))}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const _=this._map.getCenter(),k=Math.round(100*this._map.getZoom())/100,C=Math.ceil((k*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,C),H=Math.round(_.lng*R)/R,ie=Math.round(_.lat*R)/R,ae=this._map.getBearing(),he=this._map.getPitch();let we="";if(we+=u?`/${H}/${ie}/${k}`:`${k}/${ie}/${H}`,(ae||he)&&(we+="/"+Math.round(10*ae)/10),he&&(we+=`/${Math.round(he)}`),this._hashName){const Be=this._hashName;let Ve=!1;const vt=window.location.hash.slice(1).split("&").map(ut=>{const dt=ut.split("=")[0];return dt===Be?(Ve=!0,`${dt}=${we}`):ut}).filter(ut=>ut);return Ve||vt.push(`${Be}=${we}`),`#${vt.join("&")}`}return`#${we}`}_getCurrentHash(){const u=window.location.hash.replace("#","");if(this._hashName){let _;return u.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(_=k)}),(_&&_[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._getCurrentHash();if(u.length>=3&&!u.some(_=>isNaN(_))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:_,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}}}const Ja={linearity:.3,easing:h.bezier(0,0,.3,1)},ec=h.extend({deceleration:2500,maxSpeed:1400},Ja),tc=h.extend({deceleration:20,maxSpeed:1400},Ja),Ka=h.extend({deceleration:1e3,maxSpeed:360},Ja),ls=h.extend({deceleration:1e3,maxSpeed:90},Ja);class ra{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,_=h.exported.now();for(;u.length>0&&_-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const _={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)_.zoom+=R.zoomDelta||0,_.bearing+=R.bearingDelta||0,_.pitch+=R.pitchDelta||0,R.panDelta&&_.pan._add(R.panDelta),R.around&&(_.around=R.around),R.pinchAround&&(_.pinchAround=R.pinchAround);const k=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(_.pan.mag()){const R=Ps(_.pan.mag(),k,h.extend({},ec,u||{}));C.offset=_.pan.mult(R.amount/_.pan.mag()),C.center=this._map.transform.center,na(C,R)}if(_.zoom){const R=Ps(_.zoom,k,tc);C.zoom=this._map.transform.zoom+R.amount,na(C,R)}if(_.bearing){const R=Ps(_.bearing,k,Ka);C.bearing=this._map.transform.bearing+h.clamp(R.amount,-179,179),na(C,R)}if(_.pitch){const R=Ps(_.pitch,k,ls);C.pitch=this._map.transform.pitch+R.amount,na(C,R)}if(C.zoom||C.bearing){const R=_.pinchAround===void 0?_.around:_.pinchAround;C.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),h.extend(C,{noMoveStart:!0})}}function na(I,u){(!I.duration||I.duration<u.duration)&&(I.duration=u.duration,I.easing=u.easing)}function Ps(I,u,_){const{maxSpeed:k,linearity:C,deceleration:R}=_,H=h.clamp(I*C/(u/1e3),-k,k),ie=Math.abs(H)/(R*C);return{easing:_.easing,duration:1e3*ie,amount:H*(ie/2)}}class Do extends h.Event{constructor(u,_,k,C={}){const R=q.mousePos(_.getCanvasContainer(),k),H=_.unproject(R);super(u,h.extend({point:R,lngLat:H,originalEvent:k},C)),this._defaultPrevented=!1,this.target=_}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ma extends h.Event{constructor(u,_,k){const C=u==="touchend"?k.changedTouches:k.touches,R=q.touchPos(_.getCanvasContainer(),C),H=R.map(ae=>_.unproject(ae)),ie=R.reduce((ae,he,we,Be)=>ae.add(he.div(Be.length)),new h.pointGeometry(0,0));super(u,{points:R,point:ie,lngLats:H,lngLat:_.unproject(ie),originalEvent:k}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class go extends h.Event{constructor(u,_,k){super(u,{originalEvent:k}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ru{constructor(u,_){this._map=u,this._clickTolerance=_.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new go(u.type,this._map,u))}mousedown(u,_){return this._mousedownPos=_,this._firePreventable(new Do(u.type,this._map,u))}mouseup(u){this._map.fire(new Do(u.type,this._map,u))}click(u,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||this._map.fire(new Do(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Do(u.type,this._map,u))}mouseover(u){this._map.fire(new Do(u.type,this._map,u))}mouseout(u){this._map.fire(new Do(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Ma(u.type,this._map,u))}touchmove(u){this._map.fire(new Ma(u.type,this._map,u))}touchend(u){this._map.fire(new Ma(u.type,this._map,u))}touchcancel(u){this._map.fire(new Ma(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oa{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Do(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Do("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Do(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ms{constructor(u,_){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,_){this.isEnabled()&&u.shiftKey&&u.button===0&&(q.disableDrag(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(u,_){if(!this._active)return;const k=_;if(this._lastPos.equals(k)||!this._box&&k.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=k,this._box||(this._box=q.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const R=Math.min(C.x,k.x),H=Math.max(C.x,k.x),ie=Math.min(C.y,k.y),ae=Math.max(C.y,k.y);q.setTransform(this._box,`translate(${R}px,${ie}px)`),this._box.style.width=H-R+"px",this._box.style.height=ae-ie+"px"}mouseupWindow(u,_){if(!this._active||u.button!==0)return;const k=this._startPos,C=_;if(this.reset(),q.suppressClick(),k.x!==C.x||k.y!==C.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:R=>R.fitScreenCoordinates(k,C,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(q.remove(this._box),this._box=null),q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,_){return this._map.fire(new h.Event(u,{originalEvent:_}))}}function Sn(I,u){if(I.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${u.length}`);const _={};for(let k=0;k<I.length;k++)_[I[k].identifier]=u[k];return _}class qs{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,_,k){(this.centroid||k.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),k.length===this.numTouches&&(this.centroid=function(C){const R=new h.pointGeometry(0,0);for(const H of C)R._add(H);return R.div(C.length)}(_),this.touches=Sn(k,_)))}touchmove(u,_,k){if(this.aborted||!this.centroid)return;const C=Sn(k,_);for(const R in this.touches){const H=this.touches[R],ie=C[R];(!ie||ie.dist(H)>30)&&(this.aborted=!0)}}touchend(u,_,k){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),k.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class Qa{constructor(u){this.singleTap=new qs(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,_,k){this.singleTap.touchstart(u,_,k)}touchmove(u,_,k){this.singleTap.touchmove(u,_,k)}touchend(u,_,k){const C=this.singleTap.touchend(u,_,k);if(C){const R=u.timeStamp-this.lastTime<500,H=!this.lastTap||this.lastTap.dist(C)<30;if(R&&H||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class nu{constructor(){this._zoomIn=new Qa({numTouches:1,numTaps:2}),this._zoomOut=new Qa({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,_,k){this._zoomIn.touchstart(u,_,k),this._zoomOut.touchstart(u,_,k)}touchmove(u,_,k){this._zoomIn.touchmove(u,_,k),this._zoomOut.touchmove(u,_,k)}touchend(u,_,k){const C=this._zoomIn.touchend(u,_,k),R=this._zoomOut.touchend(u,_,k);return C?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:H=>H.easeTo({duration:300,zoom:H.getZoom()+1,around:H.unproject(C)},{originalEvent:u})}):R?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:H=>H.easeTo({duration:300,zoom:H.getZoom()-1,around:H.unproject(R)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ol={0:1,2:2};class ms{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(u,_){return!1}_move(u,_){return{}}mousedown(u,_){if(this._lastPoint)return;const k=q.mouseButton(u);this._correctButton(u,k)&&(this._lastPoint=_,this._eventButton=k)}mousemoveWindow(u,_){const k=this._lastPoint;if(k){if(u.preventDefault(),function(C,R){const H=Ol[R];return C.buttons===void 0||(C.buttons&H)!==H}(u,this._eventButton))this.reset();else if(this._moved||!(_.dist(k)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(k,_)}}mouseupWindow(u){this._lastPoint&&q.mouseButton(u)===this._eventButton&&(this._moved&&q.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $a extends ms{mousedown(u,_){super.mousedown(u,_),this._lastPoint&&(this._active=!0)}_correctButton(u,_){return _===0&&!u.ctrlKey}_move(u,_){return{around:_,panDelta:_.sub(u)}}}class Ro extends ms{_correctButton(u,_){return _===0&&u.ctrlKey||_===2}_move(u,_){const k=.8*(_.x-u.x);if(k)return this._active=!0,{bearingDelta:k}}contextmenu(u){u.preventDefault()}}class dr extends ms{_correctButton(u,_){return _===0&&u.ctrlKey||_===2}_move(u,_){const k=-.5*(_.y-u.y);if(k)return this._active=!0,{pitchDelta:k}}contextmenu(u){u.preventDefault()}}class no{constructor(u,_){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=_,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(u,_,k){return this._calculateTransform(u,_,k)}touchmove(u,_,k){if(this._map._cooperativeGestures&&(this._minTouches===2&&k.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,k.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(k.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,_,k)}touchend(u,_,k){this._calculateTransform(u,_,k),this._active&&k.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,_,k){k.length>0&&(this._active=!0);const C=Sn(k,_),R=new h.pointGeometry(0,0),H=new h.pointGeometry(0,0);let ie=0;for(const he in C){const we=C[he],Be=this._touches[he];Be&&(R._add(we),H._add(we.sub(Be)),ie++,C[he]=we)}if(this._touches=C,ie<this._minTouches||!H.mag())return;const ae=H.div(ie);return this._sum._add(ae),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(ie),panDelta:ae}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(u){}_move(u,_,k){return{}}touchstart(u,_,k){this._firstTwoTouches||k.length<2||(this._firstTwoTouches=[k[0].identifier,k[1].identifier],this._start([_[0],_[1]]))}touchmove(u,_,k){if(!this._firstTwoTouches)return;u.preventDefault();const[C,R]=this._firstTwoTouches,H=Jn(k,_,C),ie=Jn(k,_,R);if(!H||!ie)return;const ae=this._aroundCenter?null:H.add(ie).div(2);return this._move([H,ie],ae,u)}touchend(u,_,k){if(!this._firstTwoTouches)return;const[C,R]=this._firstTwoTouches,H=Jn(k,_,C),ie=Jn(k,_,R);H&&ie||(this._active&&q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Jn(I,u,_){for(let k=0;k<I.length;k++)if(I[k].identifier===_)return u[k]}function Co(I,u){return Math.log(I/u)/Math.LN2}class ir extends kn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,_){const k=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Co(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Co(this._distance,k),pinchAround:_}}}function sa(I,u){return 180*I.angleWith(u)/Math.PI}class ou extends kn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,_){const k=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:sa(this._vector,k),pinchAround:_}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const _=25/(Math.PI*this._minDiameter)*360,k=sa(u,this._startVector);return Math.abs(k)<_}}function su(I){return Math.abs(I.y)>Math.abs(I.x)}class ic extends kn{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,_,k){super.touchstart(u,_,k),this._currentTouchCount=k.length}_start(u){this._lastPoints=u,su(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,_,k){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const C=u[0].sub(this._lastPoints[0]),R=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,R,k.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(C.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(u,_,k){if(this._valid!==void 0)return this._valid;const C=u.mag()>=2,R=_.mag()>=2;if(!C&&!R)return;if(!C||!R)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;const H=u.y>0==_.y>0;return su(u)&&su(_)&&H}}const Sc={panStep:100,bearingStep:15,pitchStep:10};class Ic{constructor(){const u=Sc;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let _=0,k=0,C=0,R=0,H=0;switch(u.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:u.shiftKey?k=-1:(u.preventDefault(),R=-1);break;case 39:u.shiftKey?k=1:(u.preventDefault(),R=1);break;case 38:u.shiftKey?C=1:(u.preventDefault(),H=-1);break;case 40:u.shiftKey?C=-1:(u.preventDefault(),H=1);break;default:return}return this._rotationDisabled&&(k=0,C=0),{cameraAnimation:ie=>{const ae=ie.getZoom();ie.easeTo({duration:300,easeId:"keyboardHandler",easing:Xc,zoom:_?Math.round(ae)+_*(u.shiftKey?2:1):ae,bearing:ie.getBearing()+k*this._bearingStep,pitch:ie.getPitch()+C*this._pitchStep,offset:[-R*this._panStep,-H*this._panStep],center:ie.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xc(I){return I*(2-I)}const an=4.000244140625;class rc{constructor(u,_){this._map=u,this._el=u.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;u.preventDefault()}let _=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const k=h.exported.now(),C=k-(this._lastWheelEventTime||0);this._lastWheelEventTime=k,_!==0&&_%an==0?this._type="wheel":_!==0&&Math.abs(_)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(C*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),u.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=u,this._delta-=_,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=q.mousePos(this._el,u);this._around=h.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(_)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;if(this._delta!==0){const ie=this._type==="wheel"&&Math.abs(this._delta)>an?this._wheelZoomRate:this._defaultZoomRate;let ae=2/(1+Math.exp(-Math.abs(this._delta*ie)));this._delta<0&&ae!==0&&(ae=1/ae);const he=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(he*ae))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,k=this._startZoom,C=this._easing;let R,H=!1;if(this._type==="wheel"&&k&&C){const ie=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),ae=C(ie);R=h.number(k,_,ae),ie<1?this._frameId||(this._frameId=!0):H=!0}else R=_,H=!0;return this._active=!0,H&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!H,zoomDelta:R-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let _=h.ease;if(this._prevEase){const k=this._prevEase,C=(h.exported.now()-k.start)/k.duration,R=k.easing(C+.01)-k.easing(C),H=.27/Math.sqrt(R*R+1e-4)*.01,ie=Math.sqrt(.0729-H*H);_=h.bezier(H,ie,.25,1)}return this._prevEase={start:h.exported.now(),duration:u,easing:_},_}reset(){this._active=!1}}class wu{constructor(u,_){this._clickZoom=u,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yo{constructor(){this.reset()}reset(){this._active=!1}dblclick(u,_){return u.preventDefault(),{cameraAnimation:k=>{k.easeTo({duration:300,zoom:k.getZoom()+(u.shiftKey?-1:1),around:k.unproject(_)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xs{constructor(){this._tap=new Qa({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(u,_,k){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?k.length>0&&(this._swipePoint=_[0],this._swipeTouch=k[0].identifier):this._tap.touchstart(u,_,k))}touchmove(u,_,k){if(this._tapTime){if(this._swipePoint){if(k[0].identifier!==this._swipeTouch)return;const C=_[0],R=C.y-this._swipePoint.y;return this._swipePoint=C,u.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(u,_,k)}touchend(u,_,k){this._tapTime?this._swipePoint&&k.length===0&&this.reset():this._tap.touchend(u,_,k)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fo{constructor(u,_,k){this._el=u,this._mousePan=_,this._touchPan=k}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ma{constructor(u,_,k){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=_,this._mousePitch=k}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class xu{constructor(u,_,k,C){this._el=u,this._touchZoom=_,this._touchRotate=k,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const jl=I=>I.zoom||I.drag||I.pitch||I.rotate;class Ul extends h.Event{}function ml(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta}class Dn{constructor(u,_){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ra(u),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(_),h.bindAll(["handleEvent","handleWindowEvent"],this);const k=this._el;this._listeners=[[k,"touchstart",{passive:!0}],[k,"touchmove",{passive:!1}],[k,"touchend",void 0],[k,"touchcancel",void 0],[k,"mousedown",void 0],[k,"mousemove",void 0],[k,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[k,"mouseover",void 0],[k,"mouseout",void 0],[k,"dblclick",void 0],[k,"click",void 0],[k,"keydown",{capture:!1}],[k,"keyup",void 0],[k,"wheel",{passive:!1}],[k,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,R,H]of this._listeners)q.addEventListener(C,R,C===document?this.handleWindowEvent:this.handleEvent,H)}destroy(){for(const[u,_,k]of this._listeners)q.removeEventListener(u,_,u===document?this.handleWindowEvent:this.handleEvent,k)}_addDefaultHandlers(u){const _=this._map,k=_.getCanvasContainer();this._add("mapEvent",new ru(_,u));const C=_.boxZoom=new Ms(_,u);this._add("boxZoom",C);const R=new nu,H=new yo;_.doubleClickZoom=new wu(H,R),this._add("tapZoom",R),this._add("clickZoom",H);const ie=new xs;this._add("tapDragZoom",ie);const ae=_.touchPitch=new ic(_);this._add("touchPitch",ae);const he=new Ro(u),we=new dr(u);_.dragRotate=new ma(u,he,we),this._add("mouseRotate",he,["mousePitch"]),this._add("mousePitch",we,["mouseRotate"]);const Be=new $a(u),Ve=new no(u,_);_.dragPan=new fo(k,Be,Ve),this._add("mousePan",Be),this._add("touchPan",Ve,["touchZoom","touchRotate"]);const vt=new ou,ut=new ir;_.touchZoomRotate=new xu(k,ut,vt,ie),this._add("touchRotate",vt,["touchPan","touchZoom"]),this._add("touchZoom",ut,["touchPan","touchRotate"]);const dt=_.scrollZoom=new rc(_,this);this._add("scrollZoom",dt,["mousePan"]);const Rt=_.keyboard=new Ic;this._add("keyboard",Rt),this._add("blockableMapEvent",new oa(_));for(const $t of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[$t]&&_[$t].enable(u[$t])}_add(u,_,k){this._handlers.push({handlerName:u,handler:_,allowed:k}),this._handlersById[u]=_}stop(u){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(jl(this._eventsInProgress))||this.isZooming()}_blockedByActive(u,_,k){for(const C in u)if(C!==k&&(!_||_.indexOf(C)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const _=[];for(const k of u)this._el.contains(k.target)&&_.push(k);return _}handleEvent(u,_){if(u.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=u.type==="renderFrame"?void 0:u,C={needsRenderFrame:!1},R={},H={},ie=u.touches,ae=ie?this._getMapTouches(ie):void 0,he=ae?q.touchPos(this._el,ae):q.mousePos(this._el,u);for(const{handlerName:Ve,handler:vt,allowed:ut}of this._handlers){if(!vt.isEnabled())continue;let dt;this._blockedByActive(H,ut,Ve)?vt.reset():vt[_||u.type]&&(dt=vt[_||u.type](u,he,ae),this.mergeHandlerResult(C,R,dt,Ve,k),dt&&dt.needsRenderFrame&&this._triggerRenderFrame()),(dt||vt.isActive())&&(H[Ve]=vt)}const we={};for(const Ve in this._previousActiveHandlers)H[Ve]||(we[Ve]=k);this._previousActiveHandlers=H,(Object.keys(we).length||ml(C))&&(this._changes.push([C,R,we]),this._triggerRenderFrame()),(Object.keys(H).length||ml(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Be}=C;Be&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Be(this._map))}mergeHandlerResult(u,_,k,C,R){if(!k)return;h.extend(u,k);const H={handlerName:C,originalEvent:k.originalEvent||R};k.zoomDelta!==void 0&&(_.zoom=H),k.panDelta!==void 0&&(_.drag=H),k.pitchDelta!==void 0&&(_.pitch=H),k.bearingDelta!==void 0&&(_.rotate=H)}_applyChanges(){const u={},_={},k={};for(const[C,R,H]of this._changes)C.panDelta&&(u.panDelta=(u.panDelta||new h.pointGeometry(0,0))._add(C.panDelta)),C.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+C.pitchDelta),C.around!==void 0&&(u.around=C.around),C.pinchAround!==void 0&&(u.pinchAround=C.pinchAround),C.noInertia&&(u.noInertia=C.noInertia),h.extend(_,R),h.extend(k,H);this._updateMapTransform(u,_,k),this._changes=[]}_updateMapTransform(u,_,k){const C=this._map,R=C.transform,H=C.style&&C.style.terrain;if(!(ml(u)||H&&this._drag))return this._fireEvents(_,k,!0);let{panDelta:ie,zoomDelta:ae,bearingDelta:he,pitchDelta:we,around:Be,pinchAround:Ve}=u;Ve!==void 0&&(Be=Ve),C._stop(!0),Be=Be||C.transform.centerPoint;const vt=R.pointLocation(ie?Be.sub(ie):Be);he&&(R.bearing+=he),we&&(R.pitch+=we),ae&&(R.zoom+=ae),H?_.drag&&!this._drag?(this._drag={center:R.centerPoint,lngLat:R.pointLocation(Be),point:Be,handlerName:_.drag.handlerName},C.fire(new h.Event("freezeElevation",{freeze:!0}))):this._drag&&k[this._drag.handlerName]?(C.fire(new h.Event("freezeElevation",{freeze:!1})),this._drag=null):_.drag&&this._drag&&(R.center=R.pointLocation(R.centerPoint.sub(ie))):R.setLocationAtPoint(vt,Be),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(_,k,!0)}_fireEvents(u,_,k){const C=jl(this._eventsInProgress),R=jl(u),H={};for(const we in u){const{originalEvent:Be}=u[we];this._eventsInProgress[we]||(H[`${we}start`]=Be),this._eventsInProgress[we]=u[we]}!C&&R&&this._fireEvent("movestart",R.originalEvent);for(const we in H)this._fireEvent(we,H[we]);R&&this._fireEvent("move",R.originalEvent);for(const we in u){const{originalEvent:Be}=u[we];this._fireEvent(we,Be)}const ie={};let ae;for(const we in this._eventsInProgress){const{handlerName:Be,originalEvent:Ve}=this._eventsInProgress[we];this._handlersById[Be].isActive()||(delete this._eventsInProgress[we],ae=_[Be]||Ve,ie[`${we}end`]=ae)}for(const we in ie)this._fireEvent(we,ie[we]);const he=jl(this._eventsInProgress);if(k&&(C||R)&&!he){this._updatingCamera=!0;const we=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Be=Ve=>Ve!==0&&-this._bearingSnap<Ve&&Ve<this._bearingSnap;we?(Be(we.bearing||this._map.getBearing())&&(we.bearing=0),this._map.easeTo(we,{originalEvent:ae})):(this._map.fire(new h.Event("moveend",{originalEvent:ae})),Be(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,_){this._map.fire(new h.Event(u,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Ul("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Vs={extend:(I,...u)=>h.extend(I,...u),run(I){I()},logToElement(I,u=!1,_="log"){const k=window.document.getElementById(_);k&&(u&&(k.innerHTML=""),k.innerHTML+=`<br>${I}`)}};class oo extends h.Evented{constructor(u,_){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=_.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,_){return this.jumpTo({center:u},_)}panBy(u,_,k){return u=h.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,h.extend({offset:u},_),k)}panTo(u,_,k){return this.easeTo(h.extend({center:u},_),k)}getZoom(){return this.transform.zoom}setZoom(u,_){return this.jumpTo({zoom:u},_),this}zoomTo(u,_,k){return this.easeTo(h.extend({zoom:u},_),k)}zoomIn(u,_){return this.zoomTo(this.getZoom()+1,u,_),this}zoomOut(u,_){return this.zoomTo(this.getZoom()-1,u,_),this}getBearing(){return this.transform.bearing}setBearing(u,_){return this.jumpTo({bearing:u},_),this}getPadding(){return this.transform.padding}setPadding(u,_){return this.jumpTo({padding:u},_),this}rotateTo(u,_,k){return this.easeTo(h.extend({bearing:u},_),k)}resetNorth(u,_){return this.rotateTo(0,h.extend({duration:1e3},u),_),this}resetNorthPitch(u,_){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},u),_),this}snapToNorth(u,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,_):this}getPitch(){return this.transform.pitch}setPitch(u,_){return this.jumpTo({pitch:u},_),this}cameraForBounds(u,_){u=h.LngLatBounds.convert(u);const k=_&&_.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),k,_)}_cameraForBoxAndBearing(u,_,k,C){const R={top:0,bottom:0,right:0,left:0};if(typeof(C=h.extend({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const fi=C.padding;C.padding={top:fi,bottom:fi,right:fi,left:fi}}C.padding=h.extend(R,C.padding);const H=this.transform,ie=H.padding,ae=H.project(h.LngLat.convert(u)),he=H.project(h.LngLat.convert(_)),we=ae.rotate(-k*Math.PI/180),Be=he.rotate(-k*Math.PI/180),Ve=new h.pointGeometry(Math.max(we.x,Be.x),Math.max(we.y,Be.y)),vt=new h.pointGeometry(Math.min(we.x,Be.x),Math.min(we.y,Be.y)),ut=Ve.sub(vt),dt=(H.width-(ie.left+ie.right+C.padding.left+C.padding.right))/ut.x,Rt=(H.height-(ie.top+ie.bottom+C.padding.top+C.padding.bottom))/ut.y;if(Rt<0||dt<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const $t=Math.min(H.scaleZoom(H.scale*Math.min(dt,Rt)),C.maxZoom),ui=h.pointGeometry.convert(C.offset),It=new h.pointGeometry((C.padding.left-C.padding.right)/2,(C.padding.top-C.padding.bottom)/2).rotate(k*Math.PI/180),gi=ui.add(It).mult(H.scale/H.zoomScale($t));return{center:H.unproject(ae.add(he).div(2).sub(gi)),zoom:$t,bearing:k}}fitBounds(u,_,k){return this._fitInternal(this.cameraForBounds(u,_),_,k)}fitScreenCoordinates(u,_,k,C,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(u)),this.transform.pointLocation(h.pointGeometry.convert(_)),k,C),C,R)}_fitInternal(u,_,k){return u?(delete(_=h.extend(u,_)).padding,_.linear?this.easeTo(_,k):this.flyTo(_,k)):this}jumpTo(u,_){this.stop();const k=this.transform;let C=!1,R=!1,H=!1;return"zoom"in u&&k.zoom!==+u.zoom&&(C=!0,k.zoom=+u.zoom),u.center!==void 0&&(k.center=h.LngLat.convert(u.center)),"bearing"in u&&k.bearing!==+u.bearing&&(R=!0,k.bearing=+u.bearing),"pitch"in u&&k.pitch!==+u.pitch&&(H=!0,k.pitch=+u.pitch),u.padding==null||k.isPaddingEqual(u.padding)||(k.padding=u.padding),this.fire(new h.Event("movestart",_)).fire(new h.Event("move",_)),C&&this.fire(new h.Event("zoomstart",_)).fire(new h.Event("zoom",_)).fire(new h.Event("zoomend",_)),R&&this.fire(new h.Event("rotatestart",_)).fire(new h.Event("rotate",_)).fire(new h.Event("rotateend",_)),H&&this.fire(new h.Event("pitchstart",_)).fire(new h.Event("pitch",_)).fire(new h.Event("pitchend",_)),this.fire(new h.Event("moveend",_))}calculateCameraOptionsFromTo(u,_,k,C=0){const R=h.MercatorCoordinate.fromLngLat(u,_),H=h.MercatorCoordinate.fromLngLat(k,C),ie=H.x-R.x,ae=H.y-R.y,he=H.z-R.z,we=Math.hypot(ie,ae,he);if(we===0)throw new Error("Can't calculate camera options with same From and To");const Be=Math.hypot(ie,ae),Ve=this.transform.scaleZoom(this.transform.cameraToCenterDistance/we/this.transform.tileSize),vt=180*Math.atan2(ie,-ae)/Math.PI;let ut=180*Math.acos(Be/we)/Math.PI;return ut=he<0?90-ut:90+ut,{center:H.toLngLat(),zoom:Ve,pitch:ut,bearing:vt}}easeTo(u,_){this._stop(!1,u.easeId),((u=h.extend({offset:[0,0],duration:500,easing:h.ease},u)).animate===!1||!u.essential&&h.exported.prefersReducedMotion)&&(u.duration=0);const k=this.transform,C=this.getZoom(),R=this.getBearing(),H=this.getPitch(),ie=this.getPadding(),ae="zoom"in u?+u.zoom:C,he="bearing"in u?this._normalizeBearing(u.bearing,R):R,we="pitch"in u?+u.pitch:H,Be="padding"in u?u.padding:k.padding,Ve=h.pointGeometry.convert(u.offset);let vt=k.centerPoint.add(Ve);const ut=k.pointLocation(vt),dt=h.LngLat.convert(u.center||ut);this._normalizeCenter(dt);const Rt=k.project(ut),$t=k.project(dt).sub(Rt),ui=k.zoomScale(ae-C);let It,gi;u.around&&(It=h.LngLat.convert(u.around),gi=k.locationPoint(It));const fi={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ae!==C,this._rotating=this._rotating||R!==he,this._pitching=this._pitching||we!==H,this._padding=!k.isPaddingEqual(Be),this._easeId=u.easeId,this._prepareEase(_,u.noMoveStart,fi),this._ease(Ti=>{if(this._zooming&&(k.zoom=h.number(C,ae,Ti)),this._rotating&&(k.bearing=h.number(R,he,Ti)),this._pitching&&(k.pitch=h.number(H,we,Ti)),this._padding&&(k.interpolatePadding(ie,Be,Ti),vt=k.centerPoint.add(Ve)),It)k.setLocationAtPoint(It,gi);else{const Si=k.zoomScale(k.zoom-C),Zi=ae>C?Math.min(2,ui):Math.max(.5,ui),Ai=Math.pow(Zi,1-Ti),vr=k.unproject(Rt.add($t.mult(Ti*Ai)).mult(Si));k.setLocationAtPoint(k.renderWorldCopies?vr.wrap():vr,vt)}this._fireMoveEvents(_)},Ti=>{this._afterEase(_,Ti)},u),this}_prepareEase(u,_,k={}){this._moving=!0,this.fire(new h.Event("freezeElevation",{freeze:!0})),_||k.moving||this.fire(new h.Event("movestart",u)),this._zooming&&!k.zooming&&this.fire(new h.Event("zoomstart",u)),this._rotating&&!k.rotating&&this.fire(new h.Event("rotatestart",u)),this._pitching&&!k.pitching&&this.fire(new h.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new h.Event("move",u)),this._zooming&&this.fire(new h.Event("zoom",u)),this._rotating&&this.fire(new h.Event("rotate",u)),this._pitching&&this.fire(new h.Event("pitch",u))}_afterEase(u,_){if(this._easeId&&_&&this._easeId===_)return;delete this._easeId,this.fire(new h.Event("freezeElevation",{freeze:!1}));const k=this._zooming,C=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new h.Event("zoomend",u)),C&&this.fire(new h.Event("rotateend",u)),R&&this.fire(new h.Event("pitchend",u)),this.fire(new h.Event("moveend",u))}flyTo(u,_){if(!u.essential&&h.exported.prefersReducedMotion){const P=h.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(P,_)}this.stop(),u=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},u);const k=this.transform,C=this.getZoom(),R=this.getBearing(),H=this.getPitch(),ie=this.getPadding(),ae="zoom"in u?h.clamp(+u.zoom,k.minZoom,k.maxZoom):C,he="bearing"in u?this._normalizeBearing(u.bearing,R):R,we="pitch"in u?+u.pitch:H,Be="padding"in u?u.padding:k.padding,Ve=k.zoomScale(ae-C),vt=h.pointGeometry.convert(u.offset);let ut=k.centerPoint.add(vt);const dt=k.pointLocation(ut),Rt=h.LngLat.convert(u.center||dt);this._normalizeCenter(Rt);const $t=k.project(dt),ui=k.project(Rt).sub($t);let It=u.curve;const gi=Math.max(k.width,k.height),fi=gi/Ve,Ti=ui.mag();if("minZoom"in u){const P=h.clamp(Math.min(u.minZoom,C,ae),k.minZoom,k.maxZoom),j=gi/k.zoomScale(P-C);It=Math.sqrt(j/Ti*2)}const Si=It*It;function Zi(P){const j=(fi*fi-gi*gi+(P?-1:1)*Si*Si*Ti*Ti)/(2*(P?fi:gi)*Si*Ti);return Math.log(Math.sqrt(j*j+1)-j)}function Ai(P){return(Math.exp(P)-Math.exp(-P))/2}function vr(P){return(Math.exp(P)+Math.exp(-P))/2}const sr=Zi(0);let Ir=function(P){return vr(sr)/vr(sr+It*P)},nn=function(P){return gi*((vr(sr)*(Ai(j=sr+It*P)/vr(j))-Ai(sr))/Si)/Ti;var j},cn=(Zi(1)-sr)/It;if(Math.abs(Ti)<1e-6||!isFinite(cn)){if(Math.abs(gi-fi)<1e-6)return this.easeTo(u,_);const P=fi<gi?-1:1;cn=Math.abs(Math.log(fi/gi))/It,nn=function(){return 0},Ir=function(j){return Math.exp(P*It*j)}}return u.duration="duration"in u?+u.duration:1e3*cn/("screenSpeed"in u?+u.screenSpeed/It:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=R!==he,this._pitching=we!==H,this._padding=!k.isPaddingEqual(Be),this._prepareEase(_,!1),this._ease(P=>{const j=P*cn,Q=1/Ir(j);k.zoom=P===1?ae:C+k.scaleZoom(Q),this._rotating&&(k.bearing=h.number(R,he,P)),this._pitching&&(k.pitch=h.number(H,we,P)),this._padding&&(k.interpolatePadding(ie,Be,P),ut=k.centerPoint.add(vt));const le=P===1?Rt:k.unproject($t.add(ui.mult(nn(j))).mult(Q));k.setLocationAtPoint(k.renderWorldCopies?le.wrap():le,ut),this._fireMoveEvents(_)},()=>this._afterEase(_),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,_)}if(!u){const k=this.handlers;k&&k.stop(!1)}return this}_ease(u,_,k){k.animate===!1||k.duration===0?(u(1),_()):(this._easeStart=h.exported.now(),this._easeOptions=k,this._onEaseFrame=u,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,_){u=h.wrap(u,-180,180);const k=Math.abs(u-_);return Math.abs(u-360-_)<k&&(u-=360),Math.abs(u+360-_)<k&&(u+=360),u}_normalizeCenter(u){const _=this.transform;if(!_.renderWorldCopies||_.lngRange)return;const k=u.lng-_.center.lng;u.lng+=k>180?-360:k<-180?360:0}}class ql{constructor(u={}){this.options=u,h.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=q.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,_){const k=this._map._getUIString(`AttributionControl.${_}`);u.title=k,u.setAttribute("aria-label",k)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(C=>typeof C!="string"?"":C)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const _=this._map.style.sourceCaches;for(const C in _){const R=_[C];if(R.used||R.usedForTerrain){const H=R.getSource();H.attribution&&u.indexOf(H.attribution)<0&&u.push(H.attribution)}}u=u.filter(C=>String(C).trim()),u.sort((C,R)=>C.length-R.length),u=u.filter((C,R)=>{for(let H=R+1;H<u.length;H++)if(u[H].indexOf(C)>=0)return!1;return!0});const k=u.join(" | ");k!==this._attribHTML&&(this._attribHTML=k,u.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Vl{constructor(u={}){this.options=u,h.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=q.create("div","maplibregl-ctrl mapboxgl-ctrl");const _=q.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://maplibre.org/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const u=this._container.children;if(u.length){const _=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact","mapboxgl-compact"):_.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class nc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const _=++this._id;return this._queue.push({callback:u,id:_,cancelled:!1}),_}remove(u){const _=this._currentlyRunning,k=_?this._queue.concat(_):this._queue;for(const C of k)if(C.id===u)return void(C.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const _=this._currentlyRunning=this._queue;this._queue=[];for(const k of _)if(!k.cancelled&&(k.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Yc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Da={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Jc={showCompass:!0,showZoom:!0,visualizePitch:!1};class za{constructor(u,_,k=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new Ro({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,k&&(this.mousePitch=new dr({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),q.addEventListener(_,"mousedown",this.mousedown),q.addEventListener(_,"touchstart",this.touchstart,{passive:!1}),q.addEventListener(_,"touchmove",this.touchmove),q.addEventListener(_,"touchend",this.touchend),q.addEventListener(_,"touchcancel",this.reset)}down(u,_){this.mouseRotate.mousedown(u,_),this.mousePitch&&this.mousePitch.mousedown(u,_),q.disableDrag()}move(u,_){const k=this.map,C=this.mouseRotate.mousemoveWindow(u,_);if(C&&C.bearingDelta&&k.setBearing(k.getBearing()+C.bearingDelta),this.mousePitch){const R=this.mousePitch.mousemoveWindow(u,_);R&&R.pitchDelta&&k.setPitch(k.getPitch()+R.pitchDelta)}}off(){const u=this.element;q.removeEventListener(u,"mousedown",this.mousedown),q.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),q.removeEventListener(u,"touchmove",this.touchmove),q.removeEventListener(u,"touchend",this.touchend),q.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){q.enableDrag(),q.removeEventListener(window,"mousemove",this.mousemove),q.removeEventListener(window,"mouseup",this.mouseup)}mousedown(u){this.down(h.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),q.mousePos(this.element,u)),q.addEventListener(window,"mousemove",this.mousemove),q.addEventListener(window,"mouseup",this.mouseup)}mousemove(u){this.move(u,q.mousePos(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=q.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=q.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ku(I,u,_){if(I=new h.LngLat(I.lng,I.lat),u){const k=new h.LngLat(I.lng-360,I.lat),C=new h.LngLat(I.lng+360,I.lat),R=_.locationPoint(I).distSqr(u);_.locationPoint(k).distSqr(u)<R?I=k:_.locationPoint(C).distSqr(u)<R&&(I=C)}for(;Math.abs(I.lng-_.center.lng)>180;){const k=_.locationPoint(I);if(k.x>=0&&k.y>=0&&k.x<=_.width&&k.y<=_.height)break;I.lng>_.center.lng?I.lng-=360:I.lng+=360}return I}const Rr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yr(I,u,_){const k=I.classList;for(const C in Rr)k.remove(`maplibregl-${_}-anchor-${C}`,`mapboxgl-${_}-anchor-${C}`);k.add(`maplibregl-${_}-anchor-${u}`,`mapboxgl-${_}-anchor-${u}`)}class au extends h.Evented{constructor(u,_){if(super(),(u instanceof HTMLElement||_)&&(u=h.extend({element:u},_)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=h.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=q.create("div"),this._element.setAttribute("aria-label","Map marker");const k=q.createNS("http://www.w3.org/2000/svg","svg"),C=41,R=27;k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height",`${C}px`),k.setAttributeNS(null,"width",`${R}px`),k.setAttributeNS(null,"viewBox",`0 0 ${R} ${C}`);const H=q.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"stroke","none"),H.setAttributeNS(null,"stroke-width","1"),H.setAttributeNS(null,"fill","none"),H.setAttributeNS(null,"fill-rule","evenodd");const ie=q.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill-rule","nonzero");const ae=q.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ae.setAttributeNS(null,"fill","#000000");const he=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ui of he){const It=q.createNS("http://www.w3.org/2000/svg","ellipse");It.setAttributeNS(null,"opacity","0.04"),It.setAttributeNS(null,"cx","10.5"),It.setAttributeNS(null,"cy","5.80029008"),It.setAttributeNS(null,"rx",ui.rx),It.setAttributeNS(null,"ry",ui.ry),ae.appendChild(It)}const we=q.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"fill",this._color);const Be=q.createNS("http://www.w3.org/2000/svg","path");Be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),we.appendChild(Be);const Ve=q.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"opacity","0.25"),Ve.setAttributeNS(null,"fill","#000000");const vt=q.createNS("http://www.w3.org/2000/svg","path");vt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ve.appendChild(vt);const ut=q.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ut.setAttributeNS(null,"fill","#FFFFFF");const dt=q.createNS("http://www.w3.org/2000/svg","g");dt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Rt=q.createNS("http://www.w3.org/2000/svg","circle");Rt.setAttributeNS(null,"fill","#000000"),Rt.setAttributeNS(null,"opacity","0.25"),Rt.setAttributeNS(null,"cx","5.5"),Rt.setAttributeNS(null,"cy","5.5"),Rt.setAttributeNS(null,"r","5.4999962");const $t=q.createNS("http://www.w3.org/2000/svg","circle");$t.setAttributeNS(null,"fill","#FFFFFF"),$t.setAttributeNS(null,"cx","5.5"),$t.setAttributeNS(null,"cy","5.5"),$t.setAttributeNS(null,"r","5.4999962"),dt.appendChild(Rt),dt.appendChild($t),ie.appendChild(ae),ie.appendChild(we),ie.appendChild(Ve),ie.appendChild(ut),ie.appendChild(dt),k.appendChild(ie),k.setAttributeNS(null,"height",C*this._scale+"px"),k.setAttributeNS(null,"width",R*this._scale+"px"),this._element.appendChild(k),this._offset=h.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",k=>{k.preventDefault()}),this._element.addEventListener("mousedown",k=>{k.preventDefault()}),Yr(this._element,this._anchor,"marker"),this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=h.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const C=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(u){const _=u.code,k=u.charCode||u.keyCode;_!=="Space"&&_!=="Enter"&&k!==32&&k!==13||this.togglePopup()}_onMapClick(u){const _=u.originalEvent.target,k=this._element;this._popup&&(_===k||k.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}_update(u){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ku(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),q.setTransform(this._element,`${Rr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${_}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),R=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*R?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(u){return this._offset=h.pointGeometry.convert(u),this._update(),this}_onMove(u){if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Au={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ho,uo=0,gl=!1;const Na={maxWidth:100,unit:"metric"};function Cc(I,u,_){const k=_&&_.maxWidth||100,C=I._container.clientHeight/2,R=I.unproject([0,C]),H=I.unproject([k,C]),ie=R.distanceTo(H);if(_&&_.unit==="imperial"){const ae=3.2808*ie;ae>5280?yl(u,k,ae/5280,I._getUIString("ScaleControl.Miles")):yl(u,k,ae,I._getUIString("ScaleControl.Feet"))}else _&&_.unit==="nautical"?yl(u,k,ie/1852,I._getUIString("ScaleControl.NauticalMiles")):ie>=1e3?yl(u,k,ie/1e3,I._getUIString("ScaleControl.Kilometers")):yl(u,k,ie,I._getUIString("ScaleControl.Meters"))}function yl(I,u,_,k){const C=function(R){const H=Math.pow(10,`${Math.floor(R)}`.length-1);let ie=R/H;return ie=ie>=10?10:ie>=5?5:ie>=3?3:ie>=2?2:ie>=1?1:function(ae){const he=Math.pow(10,Math.ceil(-Math.log(ae)/Math.LN10));return Math.round(ae*he)/he}(ie),H*ie}(_);I.style.width=u*(C/_)+"px",I.innerHTML=`${C}&nbsp;${k}`}const To={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Oo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Tc(I){if(I){if(typeof I=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(I,2)));return{center:new h.pointGeometry(0,0),top:new h.pointGeometry(0,I),"top-left":new h.pointGeometry(u,u),"top-right":new h.pointGeometry(-u,u),bottom:new h.pointGeometry(0,-I),"bottom-left":new h.pointGeometry(u,-u),"bottom-right":new h.pointGeometry(-u,-u),left:new h.pointGeometry(I,0),right:new h.pointGeometry(-I,0)}}if(I instanceof h.pointGeometry||Array.isArray(I)){const u=h.pointGeometry.convert(I);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:h.pointGeometry.convert(I.center||[0,0]),top:h.pointGeometry.convert(I.top||[0,0]),"top-left":h.pointGeometry.convert(I["top-left"]||[0,0]),"top-right":h.pointGeometry.convert(I["top-right"]||[0,0]),bottom:h.pointGeometry.convert(I.bottom||[0,0]),"bottom-left":h.pointGeometry.convert(I["bottom-left"]||[0,0]),"bottom-right":h.pointGeometry.convert(I["bottom-right"]||[0,0]),left:h.pointGeometry.convert(I.left||[0,0]),right:h.pointGeometry.convert(I.right||[0,0])}}return Tc(new h.pointGeometry(0,0))}const Ds={supported:E,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends oo{constructor(I){var u;if(h.PerformanceUtils.mark(h.PerformanceMarkers.create),(I=h.extend({},Da,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new pl(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies),{bearingSnap:I.bearingSnap}),this._interactive=I.interactive,this._cooperativeGestures=I.cooperativeGestures,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new nc,this._controls=[],this._mapId=h.uniqueId(),this._locale=h.extend({},Yc,I.locale),this._clickTolerance=I.clickTolerance,this._pixelRatio=(u=I.pixelRatio)!==null&&u!==void 0?u:devicePixelRatio,this._requestManager=new B(I.transformRequest),typeof I.container=="string"){if(this._container=document.getElementById(I.container),!this._container)throw new Error(`Container '${I.container}' not found.`)}else{if(!(I.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Dn(this,I),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=I.hash&&new ia(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,h.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new ql({customAttribution:I.customAttribution})),I.maplibreLogo&&this.addControl(new Vl,I.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",_=>{this._update(_.dataType==="style"),this.fire(new h.Event(`${_.dataType}data`,_))}),this.on("dataloading",_=>{this.fire(new h.Event(`${_.dataType}dataloading`,_))}),this.on("dataabort",_=>{this.fire(new h.Event("sourcedataabort",_))})}_getMapId(){return this._mapId}addControl(I,u){if(u===void 0&&(u=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=I.onAdd(this);this._controls.push(I);const k=this._controlPositions[u];return u.indexOf("bottom")!==-1?k.insertBefore(_,k.firstChild):k.appendChild(_),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(I);return u>-1&&this._controls.splice(u,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}calculateCameraOptionsFromTo(I,u,_,k){return k==null&&this.style.terrain&&(k=this.transform.getElevation(_,this.style.terrain)),super.calculateCameraOptionsFromTo(I,u,_,k)}resize(I){const u=this._containerDimensions(),_=u[0],k=u[1];this._resizeCanvas(_,k,this.getPixelRatio()),this.transform.resize(_,k),this.painter.resize(_,k,this.getPixelRatio());const C=!this._moving;return C&&(this.stop(),this.fire(new h.Event("movestart",I)).fire(new h.Event("move",I))),this.fire(new h.Event("resize",I)),C&&this.fire(new h.Event("moveend",I)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(I){const[u,_]=this._containerDimensions();this._pixelRatio=I,this._resizeCanvas(u,_,I),this.painter.resize(u,_,I)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(h.LngLatBounds.convert(I)),this._update()}setMinZoom(I){if((I=I==null?-2:I)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I==null?22:I)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I==null?0:I)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I==null?60:I)>85)throw new Error("maxPitch must be less than or equal to 85");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.renderWorldCopies=I,this._update()}project(I){return this.transform.locationPoint(h.LngLat.convert(I),this.style&&this.style.terrain)}unproject(I){return this.transform.pointLocation(h.pointGeometry.convert(I),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(I,u,_){if(I==="mouseenter"||I==="mouseover"){let k=!1;return{layer:u,listener:_,delegates:{mousemove:R=>{const H=this.getLayer(u)?this.queryRenderedFeatures(R.point,{layers:[u]}):[];H.length?k||(k=!0,_.call(this,new Do(I,this,R.originalEvent,{features:H}))):k=!1},mouseout:()=>{k=!1}}}}if(I==="mouseleave"||I==="mouseout"){let k=!1;return{layer:u,listener:_,delegates:{mousemove:H=>{(this.getLayer(u)?this.queryRenderedFeatures(H.point,{layers:[u]}):[]).length?k=!0:k&&(k=!1,_.call(this,new Do(I,this,H.originalEvent)))},mouseout:H=>{k&&(k=!1,_.call(this,new Do(I,this,H.originalEvent)))}}}}{const k=C=>{const R=this.getLayer(u)?this.queryRenderedFeatures(C.point,{layers:[u]}):[];R.length&&(C.features=R,_.call(this,C),delete C.features)};return{layer:u,listener:_,delegates:{[I]:k}}}}on(I,u,_){if(_===void 0)return super.on(I,u);const k=this._createDelegatedListener(I,u,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(k);for(const C in k.delegates)this.on(C,k.delegates[C]);return this}once(I,u,_){if(_===void 0)return super.once(I,u);const k=this._createDelegatedListener(I,u,_);for(const C in k.delegates)this.once(C,k.delegates[C]);return this}off(I,u,_){return _===void 0?super.off(I,u):(this._delegatedListeners&&this._delegatedListeners[I]&&(k=>{const C=this._delegatedListeners[I];for(let R=0;R<C.length;R++){const H=C[R];if(H.layer===u&&H.listener===_){for(const ie in H.delegates)this.off(ie,H.delegates[ie]);return C.splice(R,1),this}}})(),this)}queryRenderedFeatures(I,u){if(!this.style)return[];let _;if(u!==void 0||I===void 0||I instanceof h.pointGeometry||Array.isArray(I)||(u=I,I=void 0),u=u||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof h.pointGeometry||typeof I[0]=="number")_=[h.pointGeometry.convert(I)];else{const k=h.pointGeometry.convert(I[0]),C=h.pointGeometry.convert(I[1]);_=[k,new h.pointGeometry(C.x,k.y),C,new h.pointGeometry(k.x,C.y),k]}return this.style.queryRenderedFeatures(_,u,this.transform)}querySourceFeatures(I,u){return this.style.querySourceFeatures(I,u)}setStyle(I,u){return(u=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(I,u))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const u=this._locale[I];if(u==null)throw new Error(`Missing UI string '${I}'`);return u}_updateStyle(I,u){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new bo(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new bo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,u){if(typeof I=="string"){const _=this._requestManager.transformRequest(I,h.ResourceType.Style);h.getJSON(_,(k,C)=>{k?this.fire(new h.ErrorEvent(k)):C&&this._updateDiff(C,u)})}else typeof I=="object"&&this._updateDiff(I,u)}_updateDiff(I,u){try{this.style.setState(I)&&this._update(!0)}catch(_){h.warnOnce(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(I,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.warnOnce("There is no style added to the map.")}addSource(I,u){return this._lazyInitEmptyStyle(),this.style.addSource(I,u),this._update(!0)}isSourceLoaded(I){const u=this.style&&this.style.sourceCaches[I];if(u!==void 0)return u.loaded();this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){return this.style.setTerrain(I),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const u in I){const _=I[u]._tiles;for(const k in _){const C=_[k];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}addSourceType(I,u,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,u,_)}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}addImage(I,u,{pixelRatio:_=1,sdf:k=!1,stretchX:C,stretchY:R,content:H}={}){if(this._lazyInitEmptyStyle(),u instanceof HTMLImageElement||h.isImageBitmap(u)){const{width:ie,height:ae,data:he}=h.exported.getImageData(u);this.style.addImage(I,{data:new h.RGBAImage({width:ie,height:ae},he),pixelRatio:_,stretchX:C,stretchY:R,content:H,sdf:k,version:0})}else{if(u.width===void 0||u.height===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ie,height:ae,data:he}=u,we=u;this.style.addImage(I,{data:new h.RGBAImage({width:ie,height:ae},new Uint8Array(he)),pixelRatio:_,stretchX:C,stretchY:R,content:H,sdf:k,version:0,userImage:we}),we.onAdd&&we.onAdd(this,I)}}}updateImage(I,u){const _=this.style.getImage(I);if(!_)return this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const k=u instanceof HTMLImageElement||h.isImageBitmap(u)?h.exported.getImageData(u):u,{width:C,height:R,data:H}=k;if(C===void 0||R===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==_.data.width||R!==_.data.height)return this.fire(new h.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ie=!(u instanceof HTMLImageElement||h.isImageBitmap(u));_.data.replace(H,ie),this.style.updateImage(I,_)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I,u){h.getImage(this._requestManager.transformRequest(I,h.ResourceType.Image),u)}listImages(){return this.style.listImages()}addLayer(I,u){return this._lazyInitEmptyStyle(),this.style.addLayer(I,u),this._update(!0)}moveLayer(I,u){return this.style.moveLayer(I,u),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}setLayerZoomRange(I,u,_){return this.style.setLayerZoomRange(I,u,_),this._update(!0)}setFilter(I,u,_={}){return this.style.setFilter(I,u,_),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,u,_,k={}){return this.style.setPaintProperty(I,u,_,k),this._update(!0)}getPaintProperty(I,u){return this.style.getPaintProperty(I,u)}setLayoutProperty(I,u,_,k={}){return this.style.setLayoutProperty(I,u,_,k),this._update(!0)}getLayoutProperty(I,u){return this.style.getLayoutProperty(I,u)}setLight(I,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(I,u){return this.style.setFeatureState(I,u),this._update()}removeFeatureState(I,u){return this.style.removeFeatureState(I,u),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,u=0;return this._container&&(I=this._container.clientWidth||400,u=this._container.clientHeight||300),[I,u]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map","mapboxgl-map");const u=this._canvasContainer=q.create("div","maplibregl-canvas-container mapboxgl-canvas-container",I);this._interactive&&u.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=q.create("canvas","maplibregl-canvas mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const _=this._containerDimensions();this._resizeCanvas(_[0],_[1],this.getPixelRatio());const k=this._controlContainer=q.create("div","maplibregl-control-container mapboxgl-control-container",I),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(R=>{C[R]=q.create("div",`maplibregl-ctrl-${R} mapboxgl-ctrl-${R}`,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const I=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=q.create("div","maplibregl-cooperative-gesture-screen",I);let u="Control",_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",u="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",k=>{k.key===u&&(this._metaPress=!0)}),document.addEventListener("keyup",k=>{k.key===u&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",k=>{this._onCooperativeGesture(k,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(I,u,_){this._canvas.width=_*I,this._canvas.height=_*u,this._canvas.style.width=`${I}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const I=h.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);u?(this.painter=new Bl(u,this.transform),h.exported$1.testSupport(u)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:I}))}_contextRestored(I){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:I}))}_onMapScroll(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(I,u,_){return!u&&_<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){let u,_=0;const k=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(u=k.createQueryEXT(),k.beginQueryEXT(k.TIME_ELAPSED_EXT,u),_=h.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,ie=h.exported.now();this.style.zoomHistory.update(H,ie);const ae=new h.EvaluationParameters(H,{now:ie,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),he=ae.crossFadingFactor();he===1&&he===this._crossFadingFactor||(C=!0,this._crossFadingFactor=he),this.style.update(ae)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.load),this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const H=h.exported.now()-_;k.endQueryEXT(k.TIME_ELAPSED_EXT,u),setTimeout(()=>{const ie=k.getQueryObjectEXT(u,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(u),this.fire(new h.Event("gpu-timing-frame",{cpuTime:H,gpuTime:ie}))},50)}if(this.listens("gpu-timing-layer")){const H=this.painter.collectGpuTimers();setTimeout(()=>{const ie=this.painter.queryGpuTimers(H);this.fire(new h.Event("gpu-timing-layer",{layerTimes:ie}))},50)}const R=this._sourcesDirty||this._styleDirty||this._placementDirty;return R||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.Event("idle")),!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const I=this.painter.context.gl.getExtension("WEBGL_lose_context");I&&I.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),q.remove(this._canvasContainer),q.remove(this._controlContainer),this._cooperativeGestures&&q.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),h.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.exported.frame(I=>{h.PerformanceUtils.frame(I),this._frame=null,this._render(I)}))}_onWindowOnline(){this._update()}_onWindowResize(I){this._trackResize&&this.resize({originalEvent:I})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}_setCacheLimits(I,u){h.setCacheLimits(I,u)}get version(){return"2.4.0"}},NavigationControl:class{constructor(I){this.options=h.extend({},Jc,I),this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const I=this._map.getZoom(),u=I===this._map.getMaxZoom(),_=I===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const I=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=I}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new za(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,u){const _=q.create("button",I,this._container);return _.type="button",_.addEventListener("click",u),_}_setButtonTitle(I,u){const _=this._map._getUIString(`NavigationControl.${u}`);I.title=_,I.setAttribute("aria-label",_)}},GeolocateControl:class extends h.Evented{constructor(I){super(),this.options=h.extend({},Au,I),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(I){var u;return this._map=I,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,Ho!==void 0?u(Ho):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(_=>{Ho=_.state!=="denied",u(Ho)}):(Ho=!!window.navigator.geolocation,u(Ho)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),q.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uo=0,gl=!1}_isOutOfMapMaxBounds(I){const u=this._map.getMaxBounds(),_=I.coords;return u&&(_.longitude<u.getWest()||_.longitude>u.getEast()||_.latitude<u.getSouth()||_.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(I){if(this._map){if(this._isOutOfMapMaxBounds(I))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",I)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=I,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(I),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(I),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",I)),this._finish()}}_updateCamera(I){const u=new h.LngLat(I.coords.longitude,I.coords.latitude),_=I.coords.accuracy,k=this._map.getBearing(),C=h.extend({bearing:k},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(_),C,{geolocateSource:!0})}_updateMarker(I){if(I){const u=new h.LngLat(I.coords.longitude,I.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=I.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const I=this._map._container.clientHeight/2,u=this._map.unproject([0,I]),_=this._map.unproject([1,I]),k=u.distanceTo(_),C=Math.ceil(2*this._accuracy/k);this._circleElement.style.width=`${C}px`,this._circleElement.style.height=`${C}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(I){if(this._map){if(this.options.trackUserLocation)if(I.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(I.code===3&&gl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",I)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(I){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=q.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",I===!1){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new au(this._dotElement),this._circleElement=q.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new au({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uo--,gl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),uo++,uo>1?(I={maximumAge:6e5,timeout:0},gl=!0):(I=this.options.positionOptions,gl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ql,LogoControl:Vl,ScaleControl:class{constructor(I){this.options=h.extend({},Na,I),h.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Cc(this._map,this._container,this.options)}onAdd(I){return this._map=I,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(I){this.options.unit=I,Cc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const I=this._fullscreenButton=q.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(I){this.options=I,h.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(I){return this._map=I,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=q.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends h.Evented{constructor(I){super(),this.options=h.extend(Object.create(To),I),h.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&q.remove(this._content),this._container&&(q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=h.LngLat.convert(I),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const u=document.createDocumentFragment(),_=document.createElement("body");let k;for(_.innerHTML=I;k=_.firstChild,k;)u.appendChild(k);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=q.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){this._container&&this._container.classList.add(I)}removeClassName(I){this._container&&this._container.classList.remove(I)}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}_createCloseButton(){this.options.closeButton&&(this._closeButton=q.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(I){this._update(I.point)}_onMouseMove(I){this._update(I.point)}_onDrag(I){this._update(I.point)}_update(I){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=q.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=q.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(R=>this._container.classList.add(R)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ku(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!I))return;const u=this._pos=this._trackPointer&&I?I:this._map.project(this._lngLat);let _=this.options.anchor;const k=Tc(this.options.offset);if(!_){const R=this._container.offsetWidth,H=this._container.offsetHeight;let ie;ie=u.y+k.bottom.y<H?["top"]:u.y>this._map.transform.height-H?["bottom"]:[],u.x<R/2?ie.push("left"):u.x>this._map.transform.width-R/2&&ie.push("right"),_=ie.length===0?"bottom":ie.join("-")}const C=u.add(k[_]).round();q.setTransform(this._container,`${Rr[_]} translate(${C.x}px,${C.y}px)`),Yr(this._container,_,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(Oo);I&&I.focus()}_onClose(){this.remove()}},Marker:au,Style:bo,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,Evented:h.Evented,AJAXError:h.AJAXError,config:h.config,CanvasSource:qt,GeoJSONSource:Gt,ImageSource:Xt,RasterDEMTileSource:pt,RasterTileSource:Xe,VectorTileSource:Ge,VideoSource:Mt,prewarm:function(){yt().acquire(zi)},clearPrewarmedResources:function(){const I=Zt;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(zi),Zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Di.workerCount},set workerCount(I){Di.workerCount=I},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(I){h.config.MAX_PARALLEL_IMAGE_REQUESTS=I},clearStorage(I){h.clearTileCache(I)},workerUrl:"",addProtocol(I,u){h.config.REGISTERED_PROTOCOLS[I]=u},removeProtocol(I){delete h.config.REGISTERED_PROTOCOLS[I]}};return Vs.extend(Ds,{isSafari:h.isSafari,getPerformanceMetrics:h.PerformanceUtils.getPerformanceMetrics}),Ds});var b=p;return b})})(Yl);const Y4=Yl.exports,El=rh(null),Rf=rh(null),yf=rh(null),u1=rh(null),vf=rh(null),sn={title:"WASAC Rural Water Network",url:"https://wasac.rw",logo:"https://raw.githubusercontent.com/wasac/logo/main/logo.png",basePath:"",attribution:"\xA9<a href='http://wasac.rw'>WASAC,Ltd.</a>",styles:[{title:"OSM",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style.json"},{title:"OSM (Open Building)",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-buildings.json"},{title:"Bing Aerial",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-aerial.json"}],center:[30.0291,-2.0032],zoom:9,search:{url:"https://wasac.github.io/vt/wss.geojson",target:["wss_name","district","po_name"],format:n=>{const i=[];return["wss_id","wss_name","po_name","district"].forEach(l=>{n[l]&&i.push(n[l])}),i.length>0?i.join(", "):""},place_type:["wss"],placeholder:"Search WSS/PO/District",zoom:13},popup:{target:["handpump","improvedspring","dugwell","solarpump","otherwaterpoint","household","publictap","waterkiosk","industrial","institution","other connection","chamber","reservoir","pumping-station","watersource","pipeline","wss","pg-building"]},legend:{targets:{village:"Village","village-annotation":"Village Label",cell:"Cell","cell-annotation":"Cell Label",sector:"Sector","sector-annotation":"Sector Label",district:"District","district-annotation":"District Label",wss:"WSS","wss-annotation":"WSS Label",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",watersource:"Water Source",reservoir:"Reservoir","pumping-station":"Pumping Station",chamber:"Chamber",household:"Household",publictap:"Public Tap",waterkiosk:"Water Kiosk",industrial:"Industrial",institution:"Institution","other connection":"Other connection",handpump:"Hand Pump",improvedspring:"Improved Spring",dugwell:"Dug well",solarpump:"Solar Pump",otherwaterpoint:"Other water point",parcels:"Parcels",parcels_annotation:"Parcels Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade"}},elevation:{url:"https://wasac.github.io/rw-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],routing:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}}},terrain:{source:"rwanda-dem",exaggeration:1},adminBoundary:{url:"https://wasac.github.io/rw-admin-boundary"}};class $_{constructor(){wo(this,"STYLE_PATHNAME","style")}getUrl(){const i=window.location,o=new URL(i.href);return o.hash=i.hash,o}updateUrl(i){history.replaceState("","",i.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(i){const o=this.getUrl();o.searchParams.set(this.STYLE_PATHNAME,i),this.updateUrl(o)}delete(){const i=this.getUrl();i.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(i)}getMatchedStyleByTitle(i,o){for(const l of i)if(l.title===o)return l}getMatchedStyleByUrl(i,o){for(const l of i)if(l.uri===o)return l}}const J4=n=>({noResultsText:n[0]&2048}),vg=n=>({noResultsText:n[11]}),K4=n=>({createText:n[0]&16384}),_g=n=>({createText:n[14]}),Q4=n=>({loadingText:n[0]&4096}),bg=n=>({loadingText:n[12]});function wg(n,i,o){const l=n.slice();return l[116]=i[o],l[118]=o,l}const $4=n=>({item:n[1]&1,label:n[1]&1}),xg=n=>({item:n[116].item,label:n[116].highlighted?n[116].highlighted:n[116].label});function kg(n,i,o){const l=n.slice();return l[119]=i[o],l}const e3=n=>({label:n[0]&2,item:n[0]&2}),Ag=n=>({label:n[38](n[119]),item:n[119],unselectItem:n[45]});function Eg(n,i,o){const l=n.slice();return l[118]=i[o],l}function t3(n){let i,o=n[1],l=[];for(let p=0;p<o.length;p+=1)l[p]=Sg(Eg(n,o,p));return{c(){for(let p=0;p<l.length;p+=1)l[p].c();i=ln()},l(p){for(let m=0;m<l.length;m+=1)l[m].l(p);i=ln()},m(p,m){for(let b=0;b<l.length;b+=1)l[b].m(p,m);vi(p,i,m)},p(p,m){if(m[0]&18|m[1]&128){o=p[1];let b;for(b=0;b<o.length;b+=1){const h=Eg(p,o,b);l[b]?l[b].p(h,m):(l[b]=Sg(h),l[b].c(),l[b].m(i.parentNode,i))}for(;b<l.length;b+=1)l[b].d(1);l.length=o.length}},d(p){bs(l,p),p&&Ee(i)}}}function i3(n){let i,o;return{c(){i=st("option"),o=Nr(n[3]),this.h()},l(l){i=at(l,"OPTION",{class:!0});var p=ft(i);o=Fr(p,n[3]),p.forEach(Ee),this.h()},h(){i.__value=n[2],i.value=i.__value,i.selected=!0,rt(i,"class","svelte-1nqq7zl")},m(l,p){vi(l,i,p),We(i,o)},p(l,p){p[0]&8&&os(o,l[3]),p[0]&4&&(i.__value=l[2],i.value=i.__value)},d(l){l&&Ee(i)}}}function Sg(n){let i,o=n[38](n[118])+"",l,p,m;return{c(){i=st("option"),l=Nr(o),p=Yi(),this.h()},l(b){i=at(b,"OPTION",{class:!0});var h=ft(i);l=Fr(h,o),p=Ji(h),h.forEach(Ee),this.h()},h(){i.__value=m=n[4](n[118],!0),i.value=i.__value,i.selected=!0,rt(i,"class","svelte-1nqq7zl")},m(b,h){vi(b,i,h),We(i,l),We(i,p)},p(b,h){h[0]&2&&o!==(o=b[38](b[118])+"")&&os(l,o),h[0]&18&&m!==(m=b[4](b[118],!0))&&(i.__value=m,i.value=i.__value)},d(b){b&&Ee(i)}}}function Ig(n){let i,o,l=n[1],p=[];for(let b=0;b<l.length;b+=1)p[b]=Cg(kg(n,l,b));const m=b=>Cr(p[b],1,1,()=>{p[b]=null});return{c(){for(let b=0;b<p.length;b+=1)p[b].c();i=ln()},l(b){for(let h=0;h<p.length;h+=1)p[h].l(b);i=ln()},m(b,h){for(let E=0;E<p.length;E+=1)p[E].m(b,h);vi(b,i,h),o=!0},p(b,h){if(h[0]&2|h[1]&16512|h[2]&1048576){l=b[1];let E;for(E=0;E<l.length;E+=1){const L=kg(b,l,E);p[E]?(p[E].p(L,h),rr(p[E],1)):(p[E]=Cg(L),p[E].c(),rr(p[E],1),p[E].m(i.parentNode,i))}for(Js(),E=l.length;E<p.length;E+=1)m(E);Ks()}},i(b){if(!o){for(let h=0;h<l.length;h+=1)rr(p[h]);o=!0}},o(b){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)Cr(p[h]);o=!1},d(b){bs(p,b),b&&Ee(i)}}}function r3(n){let i,o,l=n[38](n[119])+"",p,m,b,h,E,L;return{c(){i=st("div"),o=st("span"),p=Nr(l),m=Yi(),b=st("span"),h=Yi(),this.h()},l(z){i=at(z,"DIV",{class:!0});var U=ft(i);o=at(U,"SPAN",{class:!0});var q=ft(o);p=Fr(q,l),q.forEach(Ee),m=Ji(U),b=at(U,"SPAN",{class:!0}),ft(b).forEach(Ee),U.forEach(Ee),h=Ji(z),this.h()},h(){rt(o,"class","tag svelte-1nqq7zl"),rt(b,"class","tag is-delete svelte-1nqq7zl"),rt(i,"class","tags has-addons svelte-1nqq7zl")},m(z,U){vi(z,i,U),We(i,o),We(o,p),We(i,m),We(i,b),vi(z,h,U),E||(L=rn(b,"click",q4(function(){$d(n[45](n[119]))&&n[45](n[119]).apply(this,arguments)})),E=!0)},p(z,U){n=z,U[0]&2&&l!==(l=n[38](n[119])+"")&&os(p,l)},d(z){z&&Ee(i),z&&Ee(h),E=!1,L()}}}function Cg(n){let i;const o=n[83].tag,l=qu(o,n,n[82],Ag),p=l||r3(n);return{c(){p&&p.c()},l(m){p&&p.l(m)},m(m,b){p&&p.m(m,b),i=!0},p(m,b){l?l.p&&(!i||b[0]&2|b[2]&1048576)&&Vu(l,o,m,m[82],i?Hu(o,m[82],b,e3):Gu(m[82]),Ag):p&&p.p&&(!i||b[0]&2)&&p.p(m,i?b:[-1,-1,-1,-1])},i(m){i||(rr(p,m),i=!0)},o(m){Cr(p,m),i=!1},d(m){p&&p.d(m)}}}function Tg(n){let i,o,l,p;return{c(){i=st("span"),o=Nr("\u2716"),this.h()},l(m){i=at(m,"SPAN",{class:!0});var b=ft(i);o=Fr(b,"\u2716"),b.forEach(Ee),this.h()},h(){rt(i,"class","autocomplete-clear-button svelte-1nqq7zl")},m(m,b){vi(m,i,b),We(i,o),l||(p=rn(i,"click",n[49]),l=!0)},p:ao,d(m){m&&Ee(i),l=!1,p()}}}function n3(n){let i,o;const l=n[83]["no-results"],p=qu(l,n,n[82],vg),m=p||l3(n);return{c(){i=st("div"),m&&m.c(),this.h()},l(b){i=at(b,"DIV",{class:!0});var h=ft(i);m&&m.l(h),h.forEach(Ee),this.h()},h(){rt(i,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(b,h){vi(b,i,h),m&&m.m(i,null),o=!0},p(b,h){p?p.p&&(!o||h[0]&2048|h[2]&1048576)&&Vu(p,l,b,b[82],o?Hu(l,b[82],h,J4):Gu(b[82]),vg):m&&m.p&&(!o||h[0]&2048)&&m.p(b,o?h:[-1,-1,-1,-1])},i(b){o||(rr(m,b),o=!0)},o(b){Cr(m,b),o=!1},d(b){b&&Ee(i),m&&m.d(b)}}}function o3(n){let i,o,l,p;const m=n[83].create,b=qu(m,n,n[82],_g),h=b||u3(n);return{c(){i=st("div"),h&&h.c(),this.h()},l(E){i=at(E,"DIV",{class:!0});var L=ft(i);h&&h.l(L),L.forEach(Ee),this.h()},h(){rt(i,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(E,L){vi(E,i,L),h&&h.m(i,null),o=!0,l||(p=rn(i,"click",n[39]),l=!0)},p(E,L){b?b.p&&(!o||L[0]&16384|L[2]&1048576)&&Vu(b,m,E,E[82],o?Hu(m,E[82],L,K4):Gu(E[82]),_g):h&&h.p&&(!o||L[0]&16384)&&h.p(E,o?L:[-1,-1,-1,-1])},i(E){o||(rr(h,E),o=!0)},o(E){Cr(h,E),o=!1},d(E){E&&Ee(i),h&&h.d(E),l=!1,p()}}}function s3(n){let i,o;const l=n[83].loading,p=qu(l,n,n[82],bg),m=p||c3(n);return{c(){i=st("div"),m&&m.c(),this.h()},l(b){i=at(b,"DIV",{class:!0});var h=ft(i);m&&m.l(h),h.forEach(Ee),this.h()},h(){rt(i,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(b,h){vi(b,i,h),m&&m.m(i,null),o=!0},p(b,h){p?p.p&&(!o||h[0]&4096|h[2]&1048576)&&Vu(p,l,b,b[82],o?Hu(l,b[82],h,Q4):Gu(b[82]),bg):m&&m.p&&(!o||h[0]&4096)&&m.p(b,o?h:[-1,-1,-1,-1])},i(b){o||(rr(m,b),o=!0)},o(b){Cr(m,b),o=!1},d(b){b&&Ee(i),m&&m.d(b)}}}function a3(n){let i,o,l,p=n[31],m=[];for(let E=0;E<p.length;E+=1)m[E]=Pg(wg(n,p,E));const b=E=>Cr(m[E],1,1,()=>{m[E]=null});let h=n[5]>0&&n[31].length>n[5]&&Mg(n);return{c(){for(let E=0;E<m.length;E+=1)m[E].c();i=Yi(),h&&h.c(),o=ln()},l(E){for(let L=0;L<m.length;L+=1)m[L].l(E);i=Ji(E),h&&h.l(E),o=ln()},m(E,L){for(let z=0;z<m.length;z+=1)m[z].m(E,L);vi(E,i,L),h&&h.m(E,L),vi(E,o,L),l=!0},p(E,L){if(L[0]&1073741856|L[1]&524801|L[2]&1048576){p=E[31];let z;for(z=0;z<p.length;z+=1){const U=wg(E,p,z);m[z]?(m[z].p(U,L),rr(m[z],1)):(m[z]=Pg(U),m[z].c(),rr(m[z],1),m[z].m(i.parentNode,i))}for(Js(),z=p.length;z<m.length;z+=1)b(z);Ks()}E[5]>0&&E[31].length>E[5]?h?h.p(E,L):(h=Mg(E),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i(E){if(!l){for(let L=0;L<p.length;L+=1)rr(m[L]);l=!0}},o(E){m=m.filter(Boolean);for(let L=0;L<m.length;L+=1)Cr(m[L]);l=!1},d(E){bs(m,E),E&&Ee(i),h&&h.d(E),E&&Ee(o)}}}function l3(n){let i;return{c(){i=Nr(n[11])},l(o){i=Fr(o,n[11])},m(o,l){vi(o,i,l)},p(o,l){l[0]&2048&&os(i,o[11])},d(o){o&&Ee(i)}}}function u3(n){let i;return{c(){i=Nr(n[14])},l(o){i=Fr(o,n[14])},m(o,l){vi(o,i,l)},p(o,l){l[0]&16384&&os(i,o[14])},d(o){o&&Ee(i)}}}function c3(n){let i;return{c(){i=Nr(n[12])},l(o){i=Fr(o,n[12])},m(o,l){vi(o,i,l)},p(o,l){l[0]&4096&&os(i,o[12])},d(o){o&&Ee(i)}}}function Lg(n){let i,o,l,p,m;const b=n[83].item,h=qu(b,n,n[82],xg),E=h||d3(n);function L(){return n[86](n[116])}function z(){return n[87](n[118])}return{c(){i=st("div"),E&&E.c(),this.h()},l(U){i=at(U,"DIV",{class:!0});var q=ft(i);E&&E.l(q),q.forEach(Ee),this.h()},h(){rt(i,"class",o="autocomplete-list-item "+(n[118]===n[30]?"selected":"")+" svelte-1nqq7zl"),Nh(i,"confirmed",n[50](n[116].item))},m(U,q){vi(U,i,q),E&&E.m(i,null),l=!0,p||(m=[rn(i,"click",L),rn(i,"pointerenter",z)],p=!0)},p(U,q){n=U,h?h.p&&(!l||q[1]&1|q[2]&1048576)&&Vu(h,b,n,n[82],l?Hu(b,n[82],q,$4):Gu(n[82]),xg):E&&E.p&&(!l||q[1]&1)&&E.p(n,l?q:[-1,-1,-1,-1]),(!l||q[0]&1073741824&&o!==(o="autocomplete-list-item "+(n[118]===n[30]?"selected":"")+" svelte-1nqq7zl"))&&rt(i,"class",o),(!l||q[0]&1073741824|q[1]&524289)&&Nh(i,"confirmed",n[50](n[116].item))},i(U){l||(rr(E,U),l=!0)},o(U){Cr(E,U),l=!1},d(U){U&&Ee(i),E&&E.d(U),p=!1,th(m)}}}function h3(n){let i,o=n[116].label+"",l;return{c(){i=new X_(!1),l=ln(),this.h()},l(p){i=Y_(p,!1),l=ln(),this.h()},h(){i.a=l},m(p,m){i.m(o,p,m),vi(p,l,m)},p(p,m){m[1]&1&&o!==(o=p[116].label+"")&&i.p(o)},d(p){p&&Ee(l),p&&i.d()}}}function f3(n){let i,o=n[116].highlighted+"",l;return{c(){i=new X_(!1),l=ln(),this.h()},l(p){i=Y_(p,!1),l=ln(),this.h()},h(){i.a=l},m(p,m){i.m(o,p,m),vi(p,l,m)},p(p,m){m[1]&1&&o!==(o=p[116].highlighted+"")&&i.p(o)},d(p){p&&Ee(l),p&&i.d()}}}function d3(n){let i;function o(m,b){return m[116].highlighted?f3:h3}let l=o(n),p=l(n);return{c(){p.c(),i=ln()},l(m){p.l(m),i=ln()},m(m,b){p.m(m,b),vi(m,i,b)},p(m,b){l===(l=o(m))&&p?p.p(m,b):(p.d(1),p=l(m),p&&(p.c(),p.m(i.parentNode,i)))},d(m){p.d(m),m&&Ee(i)}}}function Pg(n){let i,o,l=n[116]&&(n[5]<=0||n[118]<n[5])&&Lg(n);return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p(p,m){p[116]&&(p[5]<=0||p[118]<p[5])?l?(l.p(p,m),m[0]&32|m[1]&1&&rr(l,1)):(l=Lg(p),l.c(),rr(l,1),l.m(i.parentNode,i)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function Mg(n){let i,o=n[13]&&Dg(n);return{c(){o&&o.c(),i=ln()},l(l){o&&o.l(l),i=ln()},m(l,p){o&&o.m(l,p),vi(l,i,p)},p(l,p){l[13]?o?o.p(l,p):(o=Dg(l),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(l){o&&o.d(l),l&&Ee(i)}}}function Dg(n){let i,o,l=n[31].length-n[5]+"",p,m,b;return{c(){i=st("div"),o=Nr("..."),p=Nr(l),m=Yi(),b=Nr(n[13]),this.h()},l(h){i=at(h,"DIV",{class:!0});var E=ft(i);o=Fr(E,"..."),p=Fr(E,l),m=Ji(E),b=Fr(E,n[13]),E.forEach(Ee),this.h()},h(){rt(i,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(h,E){vi(h,i,E),We(i,o),We(i,p),We(i,m),We(i,b)},p(h,E){E[0]&32|E[1]&1&&l!==(l=h[31].length-h[5]+"")&&os(p,l),E[0]&8192&&os(b,h[13])},d(h){h&&Ee(i)}}}function p3(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe;function be(Ge,Xe){if(!Ge[6]&&Ge[2])return i3;if(Ge[6]&&Ge[1])return t3}let pe=be(n),ye=pe&&pe(n),me=n[6]&&n[1]&&Ig(n),tt=n[35]&&Tg(n);const nt=[a3,s3,o3,n3],Se=[];function Me(Ge,Xe){return Ge[31]&&Ge[31].length>0?0:Ge[34]&&Ge[12]?1:Ge[7]?2:Ge[11]?3:-1}return~(K=Me(n))&&(J=Se[K]=nt[K](n)),{c(){i=st("div"),o=st("select"),ye&&ye.c(),l=Yi(),p=st("div"),me&&me.c(),m=Yi(),b=st("input"),U=Yi(),tt&&tt.c(),q=Yi(),B=st("div"),J&&J.c(),this.h()},l(Ge){i=at(Ge,"DIV",{class:!0});var Xe=ft(i);o=at(Xe,"SELECT",{name:!0,id:!0,class:!0});var _t=ft(o);ye&&ye.l(_t),_t.forEach(Ee),l=Ji(Xe),p=at(Xe,"DIV",{class:!0});var pt=ft(p);me&&me.l(pt),m=Ji(pt),b=at(pt,"INPUT",{type:!0,class:!0,id:!0,autocomplete:!0,placeholder:!0,name:!0,title:!0,tabindex:!0}),U=Ji(pt),tt&&tt.l(pt),pt.forEach(Ee),q=Ji(Xe),B=at(Xe,"DIV",{class:!0});var Gt=ft(B);J&&J.l(Gt),Gt.forEach(Ee),Xe.forEach(Ee),this.h()},h(){rt(o,"name",n[20]),rt(o,"id",n[21]),o.multiple=n[6],rt(o,"class","svelte-1nqq7zl"),rt(b,"type","text"),rt(b,"class",h=(n[17]?n[17]:"")+" "+(n[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),rt(b,"id",E=n[18]?n[18]:""),rt(b,"autocomplete",L=n[23]?"on":"off"),rt(b,"placeholder",n[15]),rt(b,"name",n[19]),b.disabled=n[26],b.required=n[28],rt(b,"title",n[22]),b.readOnly=z=n[24]||n[8]&&n[1],rt(b,"tabindex",n[29]),rt(p,"class","input-container svelte-1nqq7zl"),rt(B,"class",se=(n[25]?n[25]:"")+" autocomplete-list "+(n[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),rt(i,"class",ne=(n[16]?n[16]:"")+" "+(n[9]||!n[0].length?"hide-arrow":"")+" "+(n[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+n[37]+" svelte-1nqq7zl"),Nh(i,"show-clear",n[35]),Nh(i,"is-loading",n[10]&&n[34])},m(Ge,Xe){vi(Ge,i,Xe),We(i,o),ye&&ye.m(o,null),We(i,l),We(i,p),me&&me.m(p,null),We(p,m),We(p,b),n[84](b),x0(b,n[3]),We(p,U),tt&&tt.m(p,null),We(i,q),We(i,B),~K&&Se[K].m(B,null),n[88](B),re=!0,ke||(Pe=[rn(window,"click",n[41]),rn(b,"input",n[85]),rn(b,"input",n[44]),rn(b,"focus",n[47]),rn(b,"blur",n[48]),rn(b,"keydown",n[42]),rn(b,"click",n[46]),rn(b,"keypress",n[43])],ke=!0)},p(Ge,Xe){pe===(pe=be(Ge))&&ye?ye.p(Ge,Xe):(ye&&ye.d(1),ye=pe&&pe(Ge),ye&&(ye.c(),ye.m(o,null))),(!re||Xe[0]&1048576)&&rt(o,"name",Ge[20]),(!re||Xe[0]&2097152)&&rt(o,"id",Ge[21]),(!re||Xe[0]&64)&&(o.multiple=Ge[6]),Ge[6]&&Ge[1]?me?(me.p(Ge,Xe),Xe[0]&66&&rr(me,1)):(me=Ig(Ge),me.c(),rr(me,1),me.m(p,m)):me&&(Js(),Cr(me,1,1,()=>{me=null}),Ks()),(!re||Xe[0]&134348800&&h!==(h=(Ge[17]?Ge[17]:"")+" "+(Ge[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&rt(b,"class",h),(!re||Xe[0]&262144&&E!==(E=Ge[18]?Ge[18]:""))&&rt(b,"id",E),(!re||Xe[0]&8388608&&L!==(L=Ge[23]?"on":"off"))&&rt(b,"autocomplete",L),(!re||Xe[0]&32768)&&rt(b,"placeholder",Ge[15]),(!re||Xe[0]&524288)&&rt(b,"name",Ge[19]),(!re||Xe[0]&67108864)&&(b.disabled=Ge[26]),(!re||Xe[0]&268435456)&&(b.required=Ge[28]),(!re||Xe[0]&4194304)&&rt(b,"title",Ge[22]),(!re||Xe[0]&16777474&&z!==(z=Ge[24]||Ge[8]&&Ge[1]))&&(b.readOnly=z),(!re||Xe[0]&536870912)&&rt(b,"tabindex",Ge[29]),Xe[0]&8&&b.value!==Ge[3]&&x0(b,Ge[3]),Ge[35]?tt?tt.p(Ge,Xe):(tt=Tg(Ge),tt.c(),tt.m(p,null)):tt&&(tt.d(1),tt=null);let _t=K;K=Me(Ge),K===_t?~K&&Se[K].p(Ge,Xe):(J&&(Js(),Cr(Se[_t],1,1,()=>{Se[_t]=null}),Ks()),~K?(J=Se[K],J?J.p(Ge,Xe):(J=Se[K]=nt[K](Ge),J.c()),rr(J,1),J.m(B,null)):J=null),(!re||Xe[0]&33554432|Xe[1]&32&&se!==(se=(Ge[25]?Ge[25]:"")+" autocomplete-list "+(Ge[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&rt(B,"class",se),(!re||Xe[0]&66113&&ne!==(ne=(Ge[16]?Ge[16]:"")+" "+(Ge[9]||!Ge[0].length?"hide-arrow":"")+" "+(Ge[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+Ge[37]+" svelte-1nqq7zl"))&&rt(i,"class",ne),(!re||Xe[0]&66113|Xe[1]&16)&&Nh(i,"show-clear",Ge[35]),(!re||Xe[0]&67137|Xe[1]&8)&&Nh(i,"is-loading",Ge[10]&&Ge[34])},i(Ge){re||(rr(me),rr(J),re=!0)},o(Ge){Cr(me),Cr(J),re=!1},d(Ge){Ge&&Ee(i),ye&&ye.d(),me&&me.d(),n[84](null),tt&&tt.d(),~K&&Se[K].d(),n[88](null),ke=!1,th(Pe)}}}function m3(n,i){if(typeof n!="function"){console.error("Not a function: "+n+", argument: "+i);return}let o;try{o=n(i)}catch{console.warn("Error executing Autocomplete function on value: "+i+" function: "+n)}return o}function Sd(n,i){let o=m3(n,i);return o==null&&(o=""),typeof o!="string"&&(o=o.toString()),o}function h2(n,i){if(!n)return 0;const o=n.keywords;let l=0;return i.forEach(p=>{o.includes(p)&&l++}),l}function g3(n,i,o){return h2(i,o)-h2(n,o)}function Id(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function y3(n,i,o){let l,p,{$$slots:m={},$$scope:b}=i,{items:h=[]}=i,{searchFunction:E=!1}=i,{labelFieldName:L=void 0}=i,{keywordsFieldName:z=L}=i,{valueFieldName:U=void 0}=i,{labelFunction:q=function(xt){return xt==null?"":L?xt[L]:xt}}=i,{keywordsFunction:B=function(xt){return xt==null?"":z?xt[z]:q(xt)}}=i,{valueFunction:K=function(xt,Ur=!1){return xt==null?xt:!tt||Ur?U?xt[U]:xt:xt.map(Wr=>U?Wr[U]:Wr)}}=i,{keywordsCleanFunction:J=function(xt){return xt}}=i,{textCleanFunction:se=function(xt){return xt}}=i,{beforeChange:ne=function(xt,Ur){return!0}}=i,{onChange:re=function(xt){}}=i,{onFocus:ke=function(){}}=i,{onBlur:Pe=function(){}}=i,{onCreate:be=function(xt){Qt&&console.log("onCreate: "+xt)}}=i,{selectFirstIfEmpty:pe=!1}=i,{minCharactersToSearch:ye=1}=i,{maxItemsToShowInList:me=0}=i,{multiple:tt=!1}=i,{create:nt=!1}=i,{ignoreAccents:Se=!0}=i,{matchAllKeywords:Me=!0}=i,{sortByMatchedKeywords:Ge=!1}=i,{itemFilterFunction:Xe=void 0}=i,{itemSortFunction:_t=void 0}=i,{lock:pt=!1}=i,{delay:Gt=0}=i,{localFiltering:kt=!0}=i,{localSorting:Xt=!0}=i,{cleanUserText:Mt=!0}=i,{closeOnBlur:qt=!1}=i,{hideArrow:ve=!1}=i,{showClear:it=!1}=i,{showLoadingIndicator:Re=!1}=i,{noResultsText:bt="No results found"}=i,{loadingText:Ct="Loading results..."}=i,{moreItemsText:Ot="items not shown"}=i,{createText:Ht="Not found, add anyway?"}=i,{placeholder:Wt=void 0}=i,{className:si=void 0}=i,{inputClassName:ri=void 0}=i,{inputId:zi=void 0}=i,{name:Di=void 0}=i,{selectName:er=void 0}=i,{selectId:Zt=void 0}=i,{title:yt=void 0}=i,{html5autocomplete:$i=void 0}=i,{readonly:nr=void 0}=i,{dropdownClassName:di=void 0}=i,{disabled:Hi=!1}=i,{noInputStyles:Ki=!1}=i,{required:Ui=null}=i,{debug:Qt=!1}=i,{tabindex:lr=0}=i,{selectedItem:pi=tt?[]:void 0}=i,{value:Dr=void 0}=i,{highlightedItem:ze=void 0}=i;const Y="sautocomplete-"+Math.floor(Math.random()*1e3);let te,je,ot=!1,mt=!1,Jt=-1,{text:hr}=i,xr=0,or,Ei=[],Wi=0,Br=0,Zr;function Pn(xt){return Sd(q,xt)}function Vr(xt){const Ur=Sd(B,xt);let Wr=Sd(J,Ur);return Wr=Wr.toLowerCase().trim(),Se&&(Wr=Id(Wr)),Qt&&console.log("Extracted keywords: '"+Wr+"' from item: "+JSON.stringify(xt)),Wr}function vn(){let xt;Qt&&(xt=`Autocomplete prepare list ${zi?`(id: ${zi})`:""}`,console.time(xt),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(h))),Array.isArray(h)||(console.warn("Autocomplete items / search function did not return array but",h),o(0,h=[]));const Ur=h?h.length:0;Ei=new Array(Ur),Ur>0&&h.forEach((Wr,pn)=>{const mo=Pr(Wr);mo===void 0&&console.log("Undefined item for: ",Wr),Ei[pn]=mo}),o(31,or=Ei),Qt&&(console.log(Ei.length+" items to search"),console.timeEnd(xt))}function Pr(xt){return{keywords:kt?Vr(xt):[],label:Pn(xt),item:xt}}function _n(){o(2,Dr=K(pi)),o(3,hr=tt?"":Pn(pi)),o(31,or=Ei),re(pi)}function Tn(xt){if(xt==null)return"";if(!Mt)return xt;const Ur=xt.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return Sd(se,Ur).toLowerCase().trim()}async function Tr(){let xt;Qt&&(xt=`Autocomplete search ${zi?`(id: ${zi})`:""}`,console.time(xt),console.log("Searching user entered text: '"+hr+"'"));let Ur=Tn(hr);if(ye>1&&Ur.length<ye&&(Ur=""),o(81,xr=Ur.length),Qt&&console.log("Changed user entered text '"+hr+"' into '"+Ur+"'"),Ur===""){E?(o(0,h=[]),Qt&&console.log("User entered text is empty clear list of items")):(o(31,or=Ei),Qt&&console.log("User entered text is empty set the list of items to all items")),$r(),Qt&&console.timeEnd(xt);return}if(!E)Un(Ur);else{Wi=Wi+1;const Wr=Wi;if(o(34,mt=!0),E.constructor.name==="AsyncGeneratorFunction"){for await(const pn of E(Ur,me)){if(Wr<Br)return!1;Wr>Br&&o(0,h=[]),Br=Wr,o(0,h=[...h,...pn]),Un(Ur)}Br<Wr&&(Br=Wr,o(0,h=[]),Un(Ur))}else{let pn=await E(Ur,me);if(Wr<Br)return!1;Br=Wr,o(0,h=pn),Un(Ur)}o(34,mt=!1)}Qt&&(console.timeEnd(xt),console.log("Search found "+or.length+" items"))}function Qr(xt,Ur){const Wr=h2(xt,Ur);return Me?Wr>=Ur.length:Wr>0}function Un(xt){vn();const Wr=(Se?Id(xt):xt).split(/\s+/g).filter(io=>io!=="");let pn;kt?(Xe?pn=Ei.filter(io=>Xe(io.item,Wr)):pn=Ei.filter(io=>Qr(io,Wr)),Xt&&(_t?pn=pn.sort((io,Qs)=>_t(io.item,Qs.item,Wr)):Ge&&(pn=pn.sort((io,Qs)=>g3(io,Qs,Wr))))):pn=Ei;const mo=bn(Wr,"label");return o(31,or=pn.map(mo)),$r(),!0}function Bi(xt){let Ur;if(Qt&&console.log("createdItem",xt),typeof xt<"u"){vn(),o(31,or=Ei);let Wr=ji(xt,or);Wr<=0&&(o(0,h=[xt]),vn(),o(31,or=Ei),Wr=0),Wr>=0&&(o(30,Jt=Wr),Ur=or[Jt])}return Ur}function Le(xt){if(Qt&&console.log("selectListItem",xt),typeof xt>"u"&&nt){const Wr=be(hr);if(typeof Wr<"u"){if(typeof Wr.then=="function")return Wr.then(pn=>{if(typeof pn<"u"){const mo=Bi(pn);typeof mo<"u"&&Le(mo)}}),!0;xt=Bi(Wr)}}if(typeof xt>"u")return Qt&&console.log("listItem is undefined. Can not select."),!1;if(pt&&pi)return!0;const Ur=xt.item;return ne(pi,Ur)&&(tt?pi?pi.includes(Ur)?o(1,pi=pi.filter(Wr=>Wr!==Ur)):o(1,pi=[...pi,Ur]):o(1,pi=[Ur]):(o(1,pi=void 0),o(1,pi=Ur))),!0}function $n(){Qt&&console.log("selectItem",Jt);const xt=or[Jt];Le(xt)?(Qt&&console.log("selectListItem true, closing"),jr(),tt&&te.focus()):Qt&&console.log("selectListItem false, not closing")}function eo(){Qt&&console.log("up"),Gr(),Jt>0&&o(30,Jt--,Jt),de()}function Xn(){Qt&&console.log("down"),Gr(),Jt<or.length-1&&o(30,Jt++,Jt),de()}function de(){Qt&&console.log("highlight");const xt=".selected";Qt&&console.log("Seaching DOM element: "+xt+" in "+je);const Ur=je&&je.querySelector(xt);Ur?typeof Ur.scrollIntoViewIfNeeded=="function"?(Qt&&console.log("Scrolling selected item into view"),Ur.scrollIntoViewIfNeeded()):Ur.scrollIntoView==="function"?(Qt&&console.log("Scrolling selected item into view"),Ur.scrollIntoView()):Qt&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):Qt&&console.warn("Selected item not found to scroll into view")}function fe(xt){Qt&&console.log("onListItemClick"),Le(xt)&&(jr(),tt&&te.focus())}function Te(xt){Qt&&console.log("onDocumentClick"),xt.composedPath().some(Ur=>Ur.classList&&Ur.classList.contains(Y))?(Qt&&console.log("onDocumentClick inside"),de()):(Qt&&console.log("onDocumentClick outside"),jr())}function Ke(xt){Qt&&console.log("onKeyDown");let Ur=xt.key;Ur==="Tab"&&xt.shiftKey&&(Ur="ShiftTab");const pn={Tab:ot?jr():null,ShiftTab:ot?jr():null,ArrowDown:Xn.bind(this),ArrowUp:eo.bind(this),Escape:ki.bind(this),Backspace:tt&&pi&&pi.length&&!hr?Ri.bind(this):null}[Ur];typeof pn=="function"&&pn(xt)}function et(xt){Qt&&console.log("onKeyPress"),xt.key==="Enter"&&(xt.preventDefault(),wt())}function wt(){$n()}function De(xt){Qt&&console.log("onInput"),o(3,hr=xt.target.value),Zr&&clearTimeout(Zr),Gt?Zr=setTimeout(Tt,Gt):Tt()}function Nt(xt){Qt&&console.log("unselectItem",xt),o(1,pi=pi.filter(Ur=>Ur!==xt)),te.focus()}function Tt(){Tr()&&(o(30,Jt=0),Gr())}function jt(){Qt&&console.log("onInputClick"),Sr()}function ki(xt){Qt&&console.log("onEsc"),xt.stopPropagation(),ot&&(te.focus(),jr())}function Ri(xt){Qt&&console.log("onBackspace"),Nt(pi[pi.length-1])}function wi(){Qt&&console.log("onFocus"),ke(),Sr()}function kr(){Qt&&console.log("onBlur"),qt&&jr(),Pe()}function Sr(){if(Qt&&console.log("resetListToAllItemsAndOpen"),hr?!Ei.length&&pi&&E&&Tr():o(31,or=Ei),Gr(),pi){Qt&&console.log("Searching currently selected item: "+JSON.stringify(pi));const xt=ji(pi,or);xt>=0&&(o(30,Jt=xt),de())}}function ji(xt,Ur){Qt&&console.log("Finding index for item",xt);let Wr=-1;for(let pn=0;pn<Ur.length;pn++){const mo=Ur[pn];if(typeof mo>"u"){Qt&&console.log(`listItem ${pn} is undefined. Skipping.`);continue}if(Qt&&console.log("Item "+pn+": "+JSON.stringify(mo)),xt===mo.item){Wr=pn;break}}return Qt&&(Wr>=0?console.log("Found index for item: "+Wr):console.warn("Not found index for item: "+xt)),Wr}function Gr(){Qt&&console.log("open"),!dn()&&o(80,ot=!0)}function jr(){Qt&&console.log("close"),o(80,ot=!1),o(34,mt=!1),!hr&&pe&&(o(30,Jt=0),$n())}function dn(){return ye>1&&xr<ye}function $r(){dn()&&jr()}function un(){Qt&&console.log("clear"),o(3,hr=""),o(1,pi=tt?[]:void 0),setTimeout(()=>{te.focus(),jr()})}function bn(xt,Ur){return Wr=>{let pn=Wr[Ur];const mo=Object.assign({highlighted:void 0},Wr);mo.highlighted=pn;const io=pn.toLowerCase(),Qs=Se?Id(io):io;if(xt&&xt.length){const Io=[];for(let fs=0;fs<xt.length;fs++){let Vo=xt[fs];Se&&(Vo=Id(Vo));const $s=Vo.length;let Jo=0;do if(Jo=Qs.indexOf(Vo,Jo),Jo>=0){let ws=Jo+$s;Io.push([Jo,ws]),Jo=ws}while(Jo!==-1)}if(Io.length>0){const fs=new Set;for(let Vo=0;Vo<Io.length;Vo++){const $s=Io[Vo],Jo=$s[0],ws=$s[1],ds=io.substring(Jo,ws);fs.add(ds)}for(let Vo of fs){if(Vo==="b")continue;const $s=new RegExp("("+Vo+")","ig"),Jo=mo.highlighted.replace($s,"<b>$1</b>");mo.highlighted=Jo}}}return mo}}function On(xt){return pi?tt?pi.includes(xt):xt===pi:!1}function _o(xt){po[xt?"unshift":"push"](()=>{te=xt,o(32,te)})}function qn(){hr=this.value,o(3,hr)}const bo=xt=>fe(xt),Ca=xt=>{o(30,Jt=xt)};function to(xt){po[xt?"unshift":"push"](()=>{je=xt,o(33,je)})}return n.$$set=xt=>{"items"in xt&&o(0,h=xt.items),"searchFunction"in xt&&o(52,E=xt.searchFunction),"labelFieldName"in xt&&o(53,L=xt.labelFieldName),"keywordsFieldName"in xt&&o(54,z=xt.keywordsFieldName),"valueFieldName"in xt&&o(55,U=xt.valueFieldName),"labelFunction"in xt&&o(56,q=xt.labelFunction),"keywordsFunction"in xt&&o(57,B=xt.keywordsFunction),"valueFunction"in xt&&o(4,K=xt.valueFunction),"keywordsCleanFunction"in xt&&o(58,J=xt.keywordsCleanFunction),"textCleanFunction"in xt&&o(59,se=xt.textCleanFunction),"beforeChange"in xt&&o(60,ne=xt.beforeChange),"onChange"in xt&&o(61,re=xt.onChange),"onFocus"in xt&&o(62,ke=xt.onFocus),"onBlur"in xt&&o(63,Pe=xt.onBlur),"onCreate"in xt&&o(64,be=xt.onCreate),"selectFirstIfEmpty"in xt&&o(65,pe=xt.selectFirstIfEmpty),"minCharactersToSearch"in xt&&o(66,ye=xt.minCharactersToSearch),"maxItemsToShowInList"in xt&&o(5,me=xt.maxItemsToShowInList),"multiple"in xt&&o(6,tt=xt.multiple),"create"in xt&&o(7,nt=xt.create),"ignoreAccents"in xt&&o(67,Se=xt.ignoreAccents),"matchAllKeywords"in xt&&o(68,Me=xt.matchAllKeywords),"sortByMatchedKeywords"in xt&&o(69,Ge=xt.sortByMatchedKeywords),"itemFilterFunction"in xt&&o(70,Xe=xt.itemFilterFunction),"itemSortFunction"in xt&&o(71,_t=xt.itemSortFunction),"lock"in xt&&o(8,pt=xt.lock),"delay"in xt&&o(72,Gt=xt.delay),"localFiltering"in xt&&o(73,kt=xt.localFiltering),"localSorting"in xt&&o(74,Xt=xt.localSorting),"cleanUserText"in xt&&o(75,Mt=xt.cleanUserText),"closeOnBlur"in xt&&o(76,qt=xt.closeOnBlur),"hideArrow"in xt&&o(9,ve=xt.hideArrow),"showClear"in xt&&o(77,it=xt.showClear),"showLoadingIndicator"in xt&&o(10,Re=xt.showLoadingIndicator),"noResultsText"in xt&&o(11,bt=xt.noResultsText),"loadingText"in xt&&o(12,Ct=xt.loadingText),"moreItemsText"in xt&&o(13,Ot=xt.moreItemsText),"createText"in xt&&o(14,Ht=xt.createText),"placeholder"in xt&&o(15,Wt=xt.placeholder),"className"in xt&&o(16,si=xt.className),"inputClassName"in xt&&o(17,ri=xt.inputClassName),"inputId"in xt&&o(18,zi=xt.inputId),"name"in xt&&o(19,Di=xt.name),"selectName"in xt&&o(20,er=xt.selectName),"selectId"in xt&&o(21,Zt=xt.selectId),"title"in xt&&o(22,yt=xt.title),"html5autocomplete"in xt&&o(23,$i=xt.html5autocomplete),"readonly"in xt&&o(24,nr=xt.readonly),"dropdownClassName"in xt&&o(25,di=xt.dropdownClassName),"disabled"in xt&&o(26,Hi=xt.disabled),"noInputStyles"in xt&&o(27,Ki=xt.noInputStyles),"required"in xt&&o(28,Ui=xt.required),"debug"in xt&&o(78,Qt=xt.debug),"tabindex"in xt&&o(29,lr=xt.tabindex),"selectedItem"in xt&&o(1,pi=xt.selectedItem),"value"in xt&&o(2,Dr=xt.value),"highlightedItem"in xt&&o(51,ze=xt.highlightedItem),"text"in xt&&o(3,hr=xt.text),"$$scope"in xt&&o(82,b=xt.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1|n.$$.dirty[1]&2097152&&(E||vn()),n.$$.dirty[0]&2&&_n(),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&1&&o(51,ze=or&&Jt&&Jt>=0&&Jt<or.length?or[Jt].item:null),n.$$.dirty[0]&1|n.$$.dirty[2]&786432&&o(36,l=ot&&(h&&h.length>0||xr>0)),n.$$.dirty[0]&322|n.$$.dirty[2]&32768&&o(35,p=it||(pt||tt)&&pi)},[h,pi,Dr,hr,K,me,tt,nt,pt,ve,Re,bt,Ct,Ot,Ht,Wt,si,ri,zi,Di,er,Zt,yt,$i,nr,di,Hi,Ki,Ui,lr,Jt,or,te,je,mt,p,l,Y,Pn,$n,fe,Te,Ke,et,De,Nt,jt,wi,kr,un,On,ze,E,L,z,U,q,B,J,se,ne,re,ke,Pe,be,pe,ye,Se,Me,Ge,Xe,_t,Gt,kt,Xt,Mt,qt,it,Qt,bn,ot,xr,b,m,_o,qn,bo,Ca,to]}class v3 extends Xo{constructor(i){super(),Yo(this,i,y3,p3,qo,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function _3(n){let i,o,l,p,m;function b(L){n[9](L)}function h(L){n[10](L)}let E={items:n[4],placeholder:n[0].placeholder,hideArrow:!1,showClear:!0,showLoadingIndicator:!1,labelFunction:n[7],maxItemsToShowInList:"10"};return n[1]!==void 0&&(E.selectedItem=n[1]),n[3]!==void 0&&(E.onChange=n[3]),o=new v3({props:E}),n[8](o),po.push(()=>Ts(o,"selectedItem",b)),po.push(()=>Ts(o,"onChange",h)),{c(){i=st("div"),ko(o.$$.fragment),this.h()},l(L){i=at(L,"DIV",{class:!0});var z=ft(i);Ao(o.$$.fragment,z),z.forEach(Ee),this.h()},h(){rt(i,"class","data-container")},m(L,z){vi(L,i,z),Eo(o,i,null),n[11](i),m=!0},p(L,[z]){const U={};z&1&&(U.placeholder=L[0].placeholder),z&1&&(U.labelFunction=L[7]),!l&&z&2&&(l=!0,U.selectedItem=L[1],Ls(()=>l=!1)),!p&&z&8&&(p=!0,U.onChange=L[3],Ls(()=>p=!1)),o.$set(U)},i(L){m||(rr(o.$$.fragment,L),m=!0)},o(L){Cr(o.$$.fragment,L),m=!1},d(L){L&&Ee(i),n[8](null),So(o),n[11](null)}}}function b3(n,i,o){let{map:l}=i,{searchOption:p}=i,{position:m="top-left"}=i;const b=dp();let h=[],E={},L={},z,U;function q(){}q.prototype.onAdd=function(be){return this.map=be,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl",this.controlContainer.appendChild(U),this.controlContainer},q.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map=void 0)};const B=()=>{if(!(E&&Object.keys(E).length>0)||!(L&&Object.keys(L).length>0&&L.key))return;const be=E[L.key];if(!be)return;const pe=be.geometry.coordinates;l.flyTo({center:pe,zoom:p.zoom,curve:1}),z&&(z.remove(),z=void 0),z=new Yl.exports.Marker({draggable:!0}).setLngLat(pe).addTo(l),b("zoomed")};let K=()=>{L||z&&(z.remove(),z=void 0)},J=null;E0(async()=>{if(!l)return;J=new q,l.hasControl(J)===!1&&l.addControl(J,m),(await(await fetch(p.url)).json()).features.forEach(ye=>{const me=ye.geometry.coordinates.join(","),tt=JSON.parse(JSON.stringify(ye));tt.properties={},p.target.forEach(nt=>{ye.properties[nt]&&(tt.properties[nt]=ye.properties[nt])}),Object.keys(tt.properties).length!==0&&(tt.properties.key=me,h.push(tt.properties),E[me]=JSON.parse(JSON.stringify(ye)))})});const se=be=>be?p.format(be):"";function ne(be){po[be?"unshift":"push"](()=>{U=be,o(2,U)})}function re(be){L=be,o(1,L)}function ke(be){K=be,o(3,K)}function Pe(be){po[be?"unshift":"push"](()=>{U=be,o(2,U)})}return n.$$set=be=>{"map"in be&&o(5,l=be.map),"searchOption"in be&&o(0,p=be.searchOption),"position"in be&&o(6,m=be.position)},n.$$.update=()=>{n.$$.dirty&2&&B()},[p,L,U,K,h,l,m,se,ne,re,ke,Pe]}class w3 extends Xo{constructor(i){super(),Yo(this,i,b3,_3,qo,{map:5,searchOption:0,position:6})}}var e5={};Object.defineProperty(e5,"__esModule",{value:!0});class v0{constructor(i,o){this.areas=i||v0.DEFAULT_AREAS,this.limit_no_areas=o||v0.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(i){this.map=i;const o=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const l of this.areas){const p=document.createElement("button");p.innerText=l.title,p.classList.add(l.title.replace(/[^a-z0-9-]/gi,"_")),p.value=JSON.stringify({center:l.latlng,zoom:l.zoom}),p.addEventListener("click",m=>{const b=m.srcElement;this.map.jumpTo(JSON.parse(b.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const h=this.mapAreaContainer.getElementsByClassName("active");for(;h[0];)h[0].classList.remove("active");b.classList.add("active")}),l.title===v0.DEFAULT_AREA&&p.classList.add("active"),this.mapAreaContainer.appendChild(p)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(l){!l.target||o.map.flyTo(JSON.parse(l.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(l){var p=document.createElement("option");p.setAttribute("type","option"),p.text=l.title,p.value=JSON.stringify({center:l.latlng,zoom:l.zoom}),o.select.appendChild(p)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(i){this.controlContainer&&!this.controlContainer.contains(i.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var x3=e5.default=v0;v0.DEFAULT_AREA="Narok";v0.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];v0.DEFAULT_NO_AREAS=5;function zg(n,i,o){const l=n.slice();return l[12]=i[o],l}function Ng(n,i,o){const l=n.slice();return l[15]=i[o],l}function Fg(n,i,o){const l=n.slice();return l[15]=i[o],l}function Bg(n){let i;function o(m,b){return m[3]?A3:k3}let l=o(n),p=l(n);return{c(){i=st("div"),p.c(),this.h()},l(m){i=at(m,"DIV",{class:!0});var b=ft(i);p.l(b),b.forEach(Ee),this.h()},h(){rt(i,"class","select is-fullwidth mb-2 is-success")},m(m,b){vi(m,i,b),p.m(i,null)},p(m,b){l===(l=o(m))&&p?p.p(m,b):(p.d(1),p=l(m),p&&(p.c(),p.m(i,null)))},d(m){m&&Ee(i),p.d()}}}function k3(n){let i,o,l,p=n[0],m=[];for(let b=0;b<p.length;b+=1)m[b]=Rg(Ng(n,p,b));return{c(){i=st("select");for(let b=0;b<m.length;b+=1)m[b].c();this.h()},l(b){i=at(b,"SELECT",{class:!0});var h=ft(i);for(let E=0;E<m.length;E+=1)m[E].l(h);h.forEach(Ee),this.h()},h(){rt(i,"class","is-focused"),n[2]===void 0&&Aa(()=>n[8].call(i))},m(b,h){vi(b,i,h);for(let E=0;E<m.length;E+=1)m[E].m(i,null);_s(i,n[2]),o||(l=rn(i,"change",n[8]),o=!0)},p(b,h){if(h&1){p=b[0];let E;for(E=0;E<p.length;E+=1){const L=Ng(b,p,E);m[E]?m[E].p(L,h):(m[E]=Rg(L),m[E].c(),m[E].m(i,null))}for(;E<m.length;E+=1)m[E].d(1);m.length=p.length}h&5&&_s(i,b[2])},d(b){b&&Ee(i),bs(m,b),o=!1,l()}}}function A3(n){let i,o,l,p=n[0],m=[];for(let b=0;b<p.length;b+=1)m[b]=Og(Fg(n,p,b));return{c(){i=st("select");for(let b=0;b<m.length;b+=1)m[b].c();this.h()},l(b){i=at(b,"SELECT",{class:!0});var h=ft(i);for(let E=0;E<m.length;E+=1)m[E].l(h);h.forEach(Ee),this.h()},h(){rt(i,"class","is-focused"),i.disabled=!0,n[2]===void 0&&Aa(()=>n[7].call(i))},m(b,h){vi(b,i,h);for(let E=0;E<m.length;E+=1)m[E].m(i,null);_s(i,n[2]),o||(l=rn(i,"change",n[7]),o=!0)},p(b,h){if(h&1){p=b[0];let E;for(E=0;E<p.length;E+=1){const L=Fg(b,p,E);m[E]?m[E].p(L,h):(m[E]=Og(L),m[E].c(),m[E].m(i,null))}for(;E<m.length;E+=1)m[E].d(1);m.length=p.length}h&5&&_s(i,b[2])},d(b){b&&Ee(i),bs(m,b),o=!1,l()}}}function Rg(n){let i,o=`${n[15].sourceLayer} (${n[15].source})`,l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[15],i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&1&&o!==(o=`${m[15].sourceLayer} (${m[15].source})`)&&os(l,o),b&1&&p!==(p=m[15])&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function Og(n){let i,o=`${n[15].sourceLayer} (${n[15].source})`,l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[15],i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&1&&o!==(o=`${m[15].sourceLayer} (${m[15].source})`)&&os(l,o),b&1&&p!==(p=m[15])&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function jg(n){let i,o;function l(b,h){return h&4&&(o=null),o==null&&(o=Object.keys(b[2].properties).length>0),o?S3:E3}let p=l(n,-1),m=p(n);return{c(){i=st("div"),m.c(),this.h()},l(b){i=at(b,"DIV",{class:!0});var h=ft(i);m.l(h),h.forEach(Ee),this.h()},h(){rt(i,"class","popup-table svelte-15dh02j")},m(b,h){vi(b,i,h),m.m(i,null)},p(b,h){p===(p=l(b,h))&&m?m.p(b,h):(m.d(1),m=p(b),m&&(m.c(),m.m(i,null)))},d(b){b&&Ee(i),m.d()}}}function E3(n){let i,o,l=n[2].sourceLayer+"",p,m;return{c(){i=st("div"),o=Nr("No attributes in the selected layer '"),p=Nr(l),m=Nr("'"),this.h()},l(b){i=at(b,"DIV",{class:!0});var h=ft(i);o=Fr(h,"No attributes in the selected layer '"),p=Fr(h,l),m=Fr(h,"'"),h.forEach(Ee),this.h()},h(){rt(i,"class","notification is-info is-light")},m(b,h){vi(b,i,h),We(i,o),We(i,p),We(i,m)},p(b,h){h&4&&l!==(l=b[2].sourceLayer+"")&&os(p,l)},d(b){b&&Ee(i)}}}function S3(n){let i,o=Object.keys(n[2].properties),l=[];for(let p=0;p<o.length;p+=1)l[p]=Ug(zg(n,o,p));return{c(){i=st("table");for(let p=0;p<l.length;p+=1)l[p].c();this.h()},l(p){i=at(p,"TABLE",{class:!0});var m=ft(i);for(let b=0;b<l.length;b+=1)l[b].l(m);m.forEach(Ee),this.h()},h(){rt(i,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth")},m(p,m){vi(p,i,m);for(let b=0;b<l.length;b+=1)l[b].m(i,null)},p(p,m){if(m&4){o=Object.keys(p[2].properties);let b;for(b=0;b<o.length;b+=1){const h=zg(p,o,b);l[b]?l[b].p(h,m):(l[b]=Ug(h),l[b].c(),l[b].m(i,null))}for(;b<l.length;b+=1)l[b].d(1);l.length=o.length}},d(p){p&&Ee(i),bs(l,p)}}}function Ug(n){let i,o,l=n[12]+"",p,m,b=n[2].properties[n[12]]+"",h;return{c(){i=st("tr"),o=st("th"),p=Nr(l),m=st("td"),h=Nr(b)},l(E){i=at(E,"TR",{});var L=ft(i);o=at(L,"TH",{});var z=ft(o);p=Fr(z,l),z.forEach(Ee),m=at(L,"TD",{});var U=ft(m);h=Fr(U,b),U.forEach(Ee),L.forEach(Ee)},m(E,L){vi(E,i,L),We(i,o),We(o,p),We(i,m),We(m,h)},p(E,L){L&4&&l!==(l=E[12]+"")&&os(p,l),L&4&&b!==(b=E[2].properties[E[12]]+"")&&os(h,b)},d(E){E&&Ee(i)}}}function I3(n){let i,o,l=n[0]&&n[0].length>0&&Bg(n),p=n[2]&&jg(n);return{c(){i=st("div"),l&&l.c(),o=Yi(),p&&p.c()},l(m){i=at(m,"DIV",{});var b=ft(i);l&&l.l(b),o=Ji(b),p&&p.l(b),b.forEach(Ee)},m(m,b){vi(m,i,b),l&&l.m(i,null),We(i,o),p&&p.m(i,null),n[9](i)},p(m,[b]){m[0]&&m[0].length>0?l?l.p(m,b):(l=Bg(m),l.c(),l.m(i,o)):l&&(l.d(1),l=null),m[2]?p?p.p(m,b):(p=jg(m),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},i:ao,o:ao,d(m){m&&Ee(i),l&&l.d(),p&&p.d(),n[9](null)}}}function C3(n,i,o){let l,{map:p}=i,{targetLayers:m=[]}=i,b,h,E=[],L;function z(){}z.prototype.onAdd=function(J){return this.map=J,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},z.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),o(0,E=[]),o(2,L=void 0),b&&(b.remove(),b=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},z.prototype.onClick=function(J){if(!this.isActive){o(0,E=[]),o(2,L=void 0);return}let se=[];m.length>0?m.forEach(re=>{this.map.getLayer(re)&&se.push(re)}):se=p.getStyle().layers.map(re=>re.id);const ne=this.map.queryRenderedFeatures(J.point,{layers:se});o(0,E=ne),o(2,L=E[0]),E.length>0?b=new Yl.exports.Popup().setLngLat(J.lngLat).setDOMContent(h).setMaxWidth("300px").addTo(p):b&&(b.remove(),b=void 0)},z.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let U=null;E0(async()=>{o(6,U=new z)});function q(){L=Uu(this),o(2,L),o(0,E)}function B(){L=Uu(this),o(2,L),o(0,E)}function K(J){po[J?"unshift":"push"](()=>{h=J,o(1,h)})}return n.$$set=J=>{"map"in J&&o(4,p=J.map),"targetLayers"in J&&o(5,m=J.targetLayers)},n.$$.update=()=>{n.$$.dirty&1&&o(3,l=E.length===1),n.$$.dirty&80&&p&&U!==null&&p.hasControl(U)===!1&&p.addControl(U,"top-right")},[E,h,L,l,p,m,U,q,B,K]}class T3 extends Xo{constructor(i){super(),Yo(this,i,C3,I3,qo,{map:4,targetLayers:5})}}function xo(n){return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},xo(n)}var al=Uint8Array,ll=Uint16Array,Of=Uint32Array,pp=new al([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mp=new al([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f2=new al([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t5=function(n,i){for(var o=new ll(31),l=0;l<31;++l)o[l]=i+=1<<n[l-1];for(var p=new Of(o[30]),l=1;l<30;++l)for(var m=o[l];m<o[l+1];++m)p[m]=m-o[l]<<5|l;return[o,p]},i5=t5(pp,2),r5=i5[0],d2=i5[1];r5[28]=258,d2[258]=28;var n5=t5(mp,0),L3=n5[0],qg=n5[1],p2=new ll(32768);for(var Zo=0;Zo<32768;++Zo){var u0=(Zo&43690)>>>1|(Zo&21845)<<1;u0=(u0&52428)>>>2|(u0&13107)<<2,u0=(u0&61680)>>>4|(u0&3855)<<4,p2[Zo]=((u0&65280)>>>8|(u0&255)<<8)>>>1}var wc=function(n,i,o){for(var l=n.length,p=0,m=new ll(i);p<l;++p)++m[n[p]-1];var b=new ll(i);for(p=0;p<i;++p)b[p]=b[p-1]+m[p-1]<<1;var h;if(o){h=new ll(1<<i);var E=15-i;for(p=0;p<l;++p)if(n[p])for(var L=p<<4|n[p],z=i-n[p],U=b[n[p]-1]++<<z,q=U|(1<<z)-1;U<=q;++U)h[p2[U]>>>E]=L}else for(h=new ll(l),p=0;p<l;++p)h[p]=p2[b[n[p]-1]++]>>>15-n[p];return h},k0=new al(288);for(var Zo=0;Zo<144;++Zo)k0[Zo]=8;for(var Zo=144;Zo<256;++Zo)k0[Zo]=9;for(var Zo=256;Zo<280;++Zo)k0[Zo]=7;for(var Zo=280;Zo<288;++Zo)k0[Zo]=8;var jf=new al(32);for(var Zo=0;Zo<32;++Zo)jf[Zo]=5;var P3=wc(k0,9,0),M3=wc(k0,9,1),D3=wc(jf,5,0),z3=wc(jf,5,1),c1=function(n){for(var i=n[0],o=1;o<n.length;++o)n[o]>i&&(i=n[o]);return i},Ru=function(n,i,o){var l=i/8>>0;return(n[l]|n[l+1]<<8)>>>(i&7)&o},h1=function(n,i){var o=i/8>>0;return(n[o]|n[o+1]<<8|n[o+2]<<16)>>>(i&7)},q2=function(n){return(n/8>>0)+(n&7&&1)},o5=function(n,i,o){(i==null||i<0)&&(i=0),(o==null||o>n.length)&&(o=n.length);var l=new(n instanceof ll?ll:n instanceof Of?Of:al)(o-i);return l.set(n.subarray(i,o)),l},N3=function(n,i,o){var l=n.length,p=!i||o,m=!o||o.i;o||(o={}),i||(i=new al(l*3));var b=function(Ct){var Ot=i.length;if(Ct>Ot){var Ht=new al(Math.max(Ot*2,Ct));Ht.set(i),i=Ht}},h=o.f||0,E=o.p||0,L=o.b||0,z=o.l,U=o.d,q=o.m,B=o.n,K=l*8;do{if(!z){o.f=h=Ru(n,E,1);var J=Ru(n,E+1,3);if(E+=3,J)if(J==1)z=M3,U=z3,q=9,B=5;else if(J==2){var ke=Ru(n,E,31)+257,Pe=Ru(n,E+10,15)+4,be=ke+Ru(n,E+5,31)+1;E+=14;for(var pe=new al(be),ye=new al(19),me=0;me<Pe;++me)ye[f2[me]]=Ru(n,E+me*3,7);E+=Pe*3;var tt=c1(ye),nt=(1<<tt)-1;if(!m&&E+be*(tt+7)>K)break;for(var Se=wc(ye,tt,1),me=0;me<be;){var Me=Se[Ru(n,E,nt)];E+=Me&15;var se=Me>>>4;if(se<16)pe[me++]=se;else{var Ge=0,Xe=0;for(se==16?(Xe=3+Ru(n,E,3),E+=2,Ge=pe[me-1]):se==17?(Xe=3+Ru(n,E,7),E+=3):se==18&&(Xe=11+Ru(n,E,127),E+=7);Xe--;)pe[me++]=Ge}}var _t=pe.subarray(0,ke),pt=pe.subarray(ke);q=c1(_t),B=c1(pt),z=wc(_t,q,1),U=wc(pt,B,1)}else throw"invalid block type";else{var se=q2(E)+4,ne=n[se-4]|n[se-3]<<8,re=se+ne;if(re>l){if(m)throw"unexpected EOF";break}p&&b(L+ne),i.set(n.subarray(se,re),L),o.b=L+=ne,o.p=E=re*8;continue}if(E>K)throw"unexpected EOF"}p&&b(L+131072);for(var Gt=(1<<q)-1,kt=(1<<B)-1,Xt=q+B+18;m||E+Xt<K;){var Ge=z[h1(n,E)&Gt],Mt=Ge>>>4;if(E+=Ge&15,E>K)throw"unexpected EOF";if(!Ge)throw"invalid length/literal";if(Mt<256)i[L++]=Mt;else if(Mt==256){z=null;break}else{var qt=Mt-254;if(Mt>264){var me=Mt-257,ve=pp[me];qt=Ru(n,E,(1<<ve)-1)+r5[me],E+=ve}var it=U[h1(n,E)&kt],Re=it>>>4;if(!it)throw"invalid distance";E+=it&15;var pt=L3[Re];if(Re>3){var ve=mp[Re];pt+=h1(n,E)&(1<<ve)-1,E+=ve}if(E>K)throw"unexpected EOF";p&&b(L+131072);for(var bt=L+qt;L<bt;L+=4)i[L]=i[L-pt],i[L+1]=i[L+1-pt],i[L+2]=i[L+2-pt],i[L+3]=i[L+3-pt];L=bt}}o.l=z,o.p=E,o.b=L,z&&(h=1,o.m=q,o.d=U,o.n=B)}while(!h);return L==i.length?i:o5(i,0,L)},Oc=function(n,i,o){o<<=i&7;var l=i/8>>0;n[l]|=o,n[l+1]|=o>>>8},_f=function(n,i,o){o<<=i&7;var l=i/8>>0;n[l]|=o,n[l+1]|=o>>>8,n[l+2]|=o>>>16},f1=function(n,i){for(var o=[],l=0;l<n.length;++l)n[l]&&o.push({s:l,f:n[l]});var p=o.length,m=o.slice();if(!p)return[new al(0),0];if(p==1){var b=new al(o[0].s+1);return b[o[0].s]=1,[b,1]}o.sort(function(be,pe){return be.f-pe.f}),o.push({s:-1,f:25001});var h=o[0],E=o[1],L=0,z=1,U=2;for(o[0]={s:-1,f:h.f+E.f,l:h,r:E};z!=p-1;)h=o[o[L].f<o[U].f?L++:U++],E=o[L!=z&&o[L].f<o[U].f?L++:U++],o[z++]={s:-1,f:h.f+E.f,l:h,r:E};for(var q=m[0].s,l=1;l<p;++l)m[l].s>q&&(q=m[l].s);var B=new ll(q+1),K=m2(o[z-1],B,0);if(K>i){var l=0,J=0,se=K-i,ne=1<<se;for(m.sort(function(pe,ye){return B[ye.s]-B[pe.s]||pe.f-ye.f});l<p;++l){var re=m[l].s;if(B[re]>i)J+=ne-(1<<K-B[re]),B[re]=i;else break}for(J>>>=se;J>0;){var ke=m[l].s;B[ke]<i?J-=1<<i-B[ke]++-1:++l}for(;l>=0&&J;--l){var Pe=m[l].s;B[Pe]==i&&(--B[Pe],++J)}K=i}return[new al(B),K]},m2=function(n,i,o){return n.s==-1?Math.max(m2(n.l,i,o+1),m2(n.r,i,o+1)):i[n.s]=o},Vg=function(n){for(var i=n.length;i&&!n[--i];);for(var o=new ll(++i),l=0,p=n[0],m=1,b=function(E){o[l++]=E},h=1;h<=i;++h)if(n[h]==p&&h!=i)++m;else{if(!p&&m>2){for(;m>138;m-=138)b(32754);m>2&&(b(m>10?m-11<<5|28690:m-3<<5|12305),m=0)}else if(m>3){for(b(p),--m;m>6;m-=6)b(8304);m>2&&(b(m-3<<5|8208),m=0)}for(;m--;)b(p);m=1,p=n[h]}return[o.subarray(0,l),i]},bf=function(n,i){for(var o=0,l=0;l<i.length;++l)o+=n[l]*i[l];return o},Od=function(n,i,o){var l=o.length,p=q2(i+2);n[p]=l&255,n[p+1]=l>>>8,n[p+2]=n[p]^255,n[p+3]=n[p+1]^255;for(var m=0;m<l;++m)n[p+m+4]=o[m];return(p+4+l)*8},Gg=function(n,i,o,l,p,m,b,h,E,L,z){Oc(i,z++,o),++p[256];for(var U=f1(p,15),q=U[0],B=U[1],K=f1(m,15),J=K[0],se=K[1],ne=Vg(q),re=ne[0],ke=ne[1],Pe=Vg(J),be=Pe[0],pe=Pe[1],ye=new ll(19),me=0;me<re.length;++me)ye[re[me]&31]++;for(var me=0;me<be.length;++me)ye[be[me]&31]++;for(var tt=f1(ye,7),nt=tt[0],Se=tt[1],Me=19;Me>4&&!nt[f2[Me-1]];--Me);var Ge=L+5<<3,Xe=bf(p,k0)+bf(m,jf)+b,_t=bf(p,q)+bf(m,J)+b+14+3*Me+bf(ye,nt)+(2*ye[16]+3*ye[17]+7*ye[18]);if(Ge<=Xe&&Ge<=_t)return Od(i,z,n.subarray(E,E+L));var pt,Gt,kt,Xt;if(Oc(i,z,1+(_t<Xe)),z+=2,_t<Xe){pt=wc(q,B,0),Gt=q,kt=wc(J,se,0),Xt=J;var Mt=wc(nt,Se,0);Oc(i,z,ke-257),Oc(i,z+5,pe-1),Oc(i,z+10,Me-4),z+=14;for(var me=0;me<Me;++me)Oc(i,z+3*me,nt[f2[me]]);z+=3*Me;for(var qt=[re,be],ve=0;ve<2;++ve)for(var it=qt[ve],me=0;me<it.length;++me){var Re=it[me]&31;Oc(i,z,Mt[Re]),z+=nt[Re],Re>15&&(Oc(i,z,it[me]>>>5&127),z+=it[me]>>>12)}}else pt=P3,Gt=k0,kt=D3,Xt=jf;for(var me=0;me<h;++me)if(l[me]>255){var Re=l[me]>>>18&31;_f(i,z,pt[Re+257]),z+=Gt[Re+257],Re>7&&(Oc(i,z,l[me]>>>23&31),z+=pp[Re]);var bt=l[me]&31;_f(i,z,kt[bt]),z+=Xt[bt],bt>3&&(_f(i,z,l[me]>>>5&8191),z+=mp[bt])}else _f(i,z,pt[l[me]]),z+=Gt[l[me]];return _f(i,z,pt[256]),z+Gt[256]},F3=new Of([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B3=new al(0),R3=function(n,i,o,l,p,m){var b=n.length,h=new al(l+b+5*(1+Math.floor(b/7e3))+p),E=h.subarray(l,h.length-p),L=0;if(!i||b<8)for(var z=0;z<=b;z+=65535){var U=z+65535;U<b?L=Od(E,L,n.subarray(z,U)):(E[z]=m,L=Od(E,L,n.subarray(z,b)))}else{for(var q=F3[i-1],B=q>>>13,K=q&8191,J=(1<<o)-1,se=new ll(32768),ne=new ll(J+1),re=Math.ceil(o/3),ke=2*re,Pe=function(er){return(n[er]^n[er+1]<<re^n[er+2]<<ke)&J},be=new Of(25e3),pe=new ll(288),ye=new ll(32),me=0,tt=0,z=0,nt=0,Se=0,Me=0;z<b;++z){var Ge=Pe(z),Xe=z&32767,_t=ne[Ge];if(se[Xe]=_t,ne[Ge]=Xe,Se<=z){var pt=b-z;if((me>7e3||nt>24576)&&pt>423){L=Gg(n,E,0,be,pe,ye,tt,nt,Me,z-Me,L),nt=me=tt=0,Me=z;for(var Gt=0;Gt<286;++Gt)pe[Gt]=0;for(var Gt=0;Gt<30;++Gt)ye[Gt]=0}var kt=2,Xt=0,Mt=K,qt=Xe-_t&32767;if(pt>2&&Ge==Pe(z-qt))for(var ve=Math.min(B,pt)-1,it=Math.min(32767,z),Re=Math.min(258,pt);qt<=it&&--Mt&&Xe!=_t;){if(n[z+kt]==n[z+kt-qt]){for(var bt=0;bt<Re&&n[z+bt]==n[z+bt-qt];++bt);if(bt>kt){if(kt=bt,Xt=qt,bt>ve)break;for(var Ct=Math.min(qt,bt-2),Ot=0,Gt=0;Gt<Ct;++Gt){var Ht=z-qt+Gt+32768&32767,Wt=se[Ht],si=Ht-Wt+32768&32767;si>Ot&&(Ot=si,_t=Ht)}}}Xe=_t,_t=se[Xe],qt+=Xe-_t+32768&32767}if(Xt){be[nt++]=268435456|d2[kt]<<18|qg[Xt];var ri=d2[kt]&31,zi=qg[Xt]&31;tt+=pp[ri]+mp[zi],++pe[257+ri],++ye[zi],Se=z+kt,++me}else be[nt++]=n[z],++pe[n[z]]}}L=Gg(n,E,m,be,pe,ye,tt,nt,Me,z-Me,L),m||(L=Od(E,L,B3))}return o5(h,0,l+q2(L)+p)},O3=function(){var n=1,i=0;return{p:function(o){for(var l=n,p=i,m=o.length,b=0;b!=m;){for(var h=Math.min(b+5552,m);b<h;++b)l+=o[b],p+=l;l%=65521,p%=65521}n=l,i=p},d:function(){return(n>>>8<<16|(i&255)<<8|i>>>8)+((n&255)<<23)*2}}},j3=function(n,i,o,l,p){return R3(n,i.level==null?6:i.level,i.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+i.mem,o,l,!p)},U3=function(n,i,o){for(;o;++i)n[i]=o,o>>>=8},q3=function(n,i){var o=i.level,l=o==0?0:o<6?1:o==9?3:2;n[0]=120,n[1]=l<<6|(l?32-2*l:1)},V3=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function g2(n,i){i===void 0&&(i={});var o=O3();o.p(n);var l=j3(n,i,2,4);return q3(l,i),U3(l,l.length-4,o.d()),l}function G3(n,i){return N3((V3(n),n.subarray(2,-4)),i)}var wn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function d1(){wn.console&&typeof wn.console.log=="function"&&wn.console.log.apply(wn.console,arguments)}var Fo={log:d1,warn:function(n){wn.console&&(typeof wn.console.warn=="function"?wn.console.warn.apply(wn.console,arguments):d1.call(null,arguments))},error:function(n){wn.console&&(typeof wn.console.error=="function"?wn.console.error.apply(wn.console,arguments):d1(n))}};function p1(n,i,o){var l=new XMLHttpRequest;l.open("GET",n),l.responseType="blob",l.onload=function(){V0(l.response,i,o)},l.onerror=function(){Fo.error("could not download file")},l.send()}function Hg(n){var i=new XMLHttpRequest;i.open("HEAD",n,!1);try{i.send()}catch{}return i.status>=200&&i.status<=299}function Cd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}}var Tf,y2,V0=wn.saveAs||((typeof window>"u"?"undefined":xo(window))!=="object"||window!==wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,i,o){var l=wn.URL||wn.webkitURL,p=document.createElement("a");i=i||n.name||"download",p.download=i,p.rel="noopener",typeof n=="string"?(p.href=n,p.origin!==location.origin?Hg(p.href)?p1(n,i,o):Cd(p,p.target="_blank"):Cd(p)):(p.href=l.createObjectURL(n),setTimeout(function(){l.revokeObjectURL(p.href)},4e4),setTimeout(function(){Cd(p)},0))}:"msSaveOrOpenBlob"in navigator?function(n,i,o){if(i=i||n.name||"download",typeof n=="string")if(Hg(n))p1(n,i,o);else{var l=document.createElement("a");l.href=n,l.target="_blank",setTimeout(function(){Cd(l)})}else navigator.msSaveOrOpenBlob(function(p,m){return m===void 0?m={autoBom:!1}:xo(m)!=="object"&&(Fo.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob([String.fromCharCode(65279),p],{type:p.type}):p}(n,o),i)}:function(n,i,o,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),typeof n=="string")return p1(n,i,o);var p=n.type==="application/octet-stream",m=/constructor/i.test(wn.HTMLElement)||wn.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||p&&m)&&(typeof FileReader>"u"?"undefined":xo(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var z=h.result;z=b?z:z.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=z:location=z,l=null},h.readAsDataURL(n)}else{var E=wn.URL||wn.webkitURL,L=E.createObjectURL(n);l?l.location=L:location.href=L,l=null,setTimeout(function(){E.revokeObjectURL(L)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function s5(n){var i;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var o=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],l=0;l<o.length;l++){var p=o[l].re,m=o[l].process,b=p.exec(n);b&&(i=m(b),this.r=i[0],this.g=i[1],this.b=i[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),E=this.g.toString(16),L=this.b.toString(16);return h.length==1&&(h="0"+h),E.length==1&&(E="0"+E),L.length==1&&(L="0"+L),"#"+h+E+L}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function m1(n,i){var o=n[0],l=n[1],p=n[2],m=n[3];o=ja(o,l,p,m,i[0],7,-680876936),m=ja(m,o,l,p,i[1],12,-389564586),p=ja(p,m,o,l,i[2],17,606105819),l=ja(l,p,m,o,i[3],22,-1044525330),o=ja(o,l,p,m,i[4],7,-176418897),m=ja(m,o,l,p,i[5],12,1200080426),p=ja(p,m,o,l,i[6],17,-1473231341),l=ja(l,p,m,o,i[7],22,-45705983),o=ja(o,l,p,m,i[8],7,1770035416),m=ja(m,o,l,p,i[9],12,-1958414417),p=ja(p,m,o,l,i[10],17,-42063),l=ja(l,p,m,o,i[11],22,-1990404162),o=ja(o,l,p,m,i[12],7,1804603682),m=ja(m,o,l,p,i[13],12,-40341101),p=ja(p,m,o,l,i[14],17,-1502002290),o=Ua(o,l=ja(l,p,m,o,i[15],22,1236535329),p,m,i[1],5,-165796510),m=Ua(m,o,l,p,i[6],9,-1069501632),p=Ua(p,m,o,l,i[11],14,643717713),l=Ua(l,p,m,o,i[0],20,-373897302),o=Ua(o,l,p,m,i[5],5,-701558691),m=Ua(m,o,l,p,i[10],9,38016083),p=Ua(p,m,o,l,i[15],14,-660478335),l=Ua(l,p,m,o,i[4],20,-405537848),o=Ua(o,l,p,m,i[9],5,568446438),m=Ua(m,o,l,p,i[14],9,-1019803690),p=Ua(p,m,o,l,i[3],14,-187363961),l=Ua(l,p,m,o,i[8],20,1163531501),o=Ua(o,l,p,m,i[13],5,-1444681467),m=Ua(m,o,l,p,i[2],9,-51403784),p=Ua(p,m,o,l,i[7],14,1735328473),o=qa(o,l=Ua(l,p,m,o,i[12],20,-1926607734),p,m,i[5],4,-378558),m=qa(m,o,l,p,i[8],11,-2022574463),p=qa(p,m,o,l,i[11],16,1839030562),l=qa(l,p,m,o,i[14],23,-35309556),o=qa(o,l,p,m,i[1],4,-1530992060),m=qa(m,o,l,p,i[4],11,1272893353),p=qa(p,m,o,l,i[7],16,-155497632),l=qa(l,p,m,o,i[10],23,-1094730640),o=qa(o,l,p,m,i[13],4,681279174),m=qa(m,o,l,p,i[0],11,-358537222),p=qa(p,m,o,l,i[3],16,-722521979),l=qa(l,p,m,o,i[6],23,76029189),o=qa(o,l,p,m,i[9],4,-640364487),m=qa(m,o,l,p,i[12],11,-421815835),p=qa(p,m,o,l,i[15],16,530742520),o=Va(o,l=qa(l,p,m,o,i[2],23,-995338651),p,m,i[0],6,-198630844),m=Va(m,o,l,p,i[7],10,1126891415),p=Va(p,m,o,l,i[14],15,-1416354905),l=Va(l,p,m,o,i[5],21,-57434055),o=Va(o,l,p,m,i[12],6,1700485571),m=Va(m,o,l,p,i[3],10,-1894986606),p=Va(p,m,o,l,i[10],15,-1051523),l=Va(l,p,m,o,i[1],21,-2054922799),o=Va(o,l,p,m,i[8],6,1873313359),m=Va(m,o,l,p,i[15],10,-30611744),p=Va(p,m,o,l,i[6],15,-1560198380),l=Va(l,p,m,o,i[13],21,1309151649),o=Va(o,l,p,m,i[4],6,-145523070),m=Va(m,o,l,p,i[11],10,-1120210379),p=Va(p,m,o,l,i[2],15,718787259),l=Va(l,p,m,o,i[9],21,-343485551),n[0]=m0(o,n[0]),n[1]=m0(l,n[1]),n[2]=m0(p,n[2]),n[3]=m0(m,n[3])}function gp(n,i,o,l,p,m){return i=m0(m0(i,n),m0(l,m)),m0(i<<p|i>>>32-p,o)}function ja(n,i,o,l,p,m,b){return gp(i&o|~i&l,n,i,p,m,b)}function Ua(n,i,o,l,p,m,b){return gp(i&l|o&~l,n,i,p,m,b)}function qa(n,i,o,l,p,m,b){return gp(i^o^l,n,i,p,m,b)}function Va(n,i,o,l,p,m,b){return gp(o^(i|~l),n,i,p,m,b)}function a5(n){var i,o=n.length,l=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=n.length;i+=64)m1(l,H3(n.substring(i-64,i)));n=n.substring(i-64);var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<n.length;i++)p[i>>2]|=n.charCodeAt(i)<<(i%4<<3);if(p[i>>2]|=128<<(i%4<<3),i>55)for(m1(l,p),i=0;i<16;i++)p[i]=0;return p[14]=8*o,m1(l,p),l}function H3(n){var i,o=[];for(i=0;i<64;i+=4)o[i>>2]=n.charCodeAt(i)+(n.charCodeAt(i+1)<<8)+(n.charCodeAt(i+2)<<16)+(n.charCodeAt(i+3)<<24);return o}Tf=wn.atob.bind(wn),y2=wn.btoa.bind(wn);var Wg="0123456789abcdef".split("");function W3(n){for(var i="",o=0;o<4;o++)i+=Wg[n>>8*o+4&15]+Wg[n>>8*o&15];return i}function Z3(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function v2(n){return a5(n).map(Z3).join("")}var X3=function(n){for(var i=0;i<n.length;i++)n[i]=W3(n[i]);return n.join("")}(a5("hello"))!="5d41402abc4b2a76b9719d911017c592";function m0(n,i){if(X3){var o=(65535&n)+(65535&i);return(n>>16)+(i>>16)+(o>>16)<<16|65535&o}return n+i&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _2(n,i){var o,l,p,m;if(n!==o){for(var b=(p=n,m=1+(256/n.length>>0),new Array(m+1).join(p)),h=[],E=0;E<256;E++)h[E]=E;var L=0;for(E=0;E<256;E++){var z=h[E];L=(L+z+b.charCodeAt(E))%256,h[E]=h[L],h[L]=z}o=n,l=h}else h=l;var U=i.length,q=0,B=0,K="";for(E=0;E<U;E++)B=(B+(z=h[q=(q+1)%256]))%256,h[q]=h[B],h[B]=z,b=h[(h[q]+h[B])%256],K+=String.fromCharCode(i.charCodeAt(E)^b);return K}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Zg={print:4,modify:8,copy:16,"annot-forms":32};function Mh(n,i,o,l){this.v=1,this.r=2;var p=192;n.forEach(function(h){if(Zg.perm!==void 0)throw new Error("Invalid permission: "+h);p+=Zg[h]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var m=(i+this.padding).substr(0,32),b=(o+this.padding).substr(0,32);this.O=this.processOwnerPassword(m,b),this.P=-(1+(255^p)),this.encryptionKey=v2(m+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(l)).substr(0,5),this.U=_2(this.encryptionKey,this.padding)}function Dh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var i="",o=n.length,l=0;l<o;l++){var p=n.charCodeAt(l);p<33||p===35||p===37||p===40||p===41||p===47||p===60||p===62||p===91||p===93||p===123||p===125||p>126?i+="#"+("0"+p.toString(16)).slice(-2):i+=n[l]}return i}function Xg(n){if(xo(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var i={};this.subscribe=function(o,l,p){if(p=p||!1,typeof o!="string"||typeof l!="function"||typeof p!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");i.hasOwnProperty(o)||(i[o]={});var m=Math.random().toString(35);return i[o][m]=[l,!!p],m},this.unsubscribe=function(o){for(var l in i)if(i[l][o])return delete i[l][o],Object.keys(i[l]).length===0&&delete i[l],!0;return!1},this.publish=function(o){if(i.hasOwnProperty(o)){var l=Array.prototype.slice.call(arguments,1),p=[];for(var m in i[o]){var b=i[o][m];try{b[0].apply(n,l)}catch(h){wn.console&&Fo.error("jsPDF PubSub Error",h.message,h)}b[1]&&p.push(m)}p.length&&p.forEach(this.unsubscribe)}},this.getTopics=function(){return i}}function ip(n){if(!(this instanceof ip))return new ip(n);var i="opacity,stroke-opacity".split(",");for(var o in n)n.hasOwnProperty(o)&&i.indexOf(o)>=0&&(this[o]=n[o]);this.id="",this.objectNumber=-1}function l5(n,i){this.gState=n,this.matrix=i,this.id="",this.objectNumber=-1}function H0(n,i,o,l,p){if(!(this instanceof H0))return new H0(n,i,o,l,p);this.type=n==="axial"?2:3,this.coords=i,this.colors=o,l5.call(this,l,p)}function Fh(n,i,o,l,p){if(!(this instanceof Fh))return new Fh(n,i,o,l,p);this.boundingBox=n,this.xStep=i,this.yStep=o,this.stream="",this.cloneIndex=0,l5.call(this,l,p)}function yn(n){var i,o=typeof arguments[0]=="string"?arguments[0]:"p",l=arguments[1],p=arguments[2],m=arguments[3],b=[],h=1,E=16,L="S",z=null;xo(n=n||{})==="object"&&(o=n.orientation,l=n.unit||l,p=n.format||p,m=n.compress||n.compressPdf||m,(z=n.encryption||null)!==null&&(z.userPassword=z.userPassword||"",z.ownerPassword=z.ownerPassword||"",z.userPermissions=z.userPermissions||[]),h=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(i=n.precision),n.floatPrecision!==void 0&&(E=n.floatPrecision),L=n.defaultPathOperation||"S"),b=n.filters||(m===!0?["FlateEncode"]:b),l=l||"mm",o=(""+(o||"P")).toLowerCase();var U=n.putOnlyUsedFonts||!1,q={},B={internal:{},__private__:{}};B.__private__.PubSub=Xg;var K="1.3",J=B.__private__.getPdfVersion=function(){return K};B.__private__.setPdfVersion=function(X){K=X};var se={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};B.__private__.getPageFormats=function(){return se};var ne=B.__private__.getPageFormat=function(X){return se[X]};p=p||"a4";var re={COMPAT:"compat",ADVANCED:"advanced"},ke=re.COMPAT;function Pe(){this.saveGraphicsState(),yt(new Bi(ot,0,0,-ot,0,Us()*ot).toString()+" cm"),this.setFontSize(this.getFontSize()/ot),L="n",ke=re.ADVANCED}function be(){this.restoreGraphicsState(),L="S",ke=re.COMPAT}var pe=B.__private__.combineFontStyleAndFontWeight=function(X,Ie){if(X=="bold"&&Ie=="normal"||X=="bold"&&Ie==400||X=="normal"&&Ie=="italic"||X=="bold"&&Ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ie&&(X=Ie==400||Ie==="normal"?X==="italic"?"italic":"normal":Ie!=700&&Ie!=="bold"||X!=="normal"?(Ie==700?"bold":Ie)+""+X:"bold"),X};B.advancedAPI=function(X){var Ie=ke===re.COMPAT;return Ie&&Pe.call(this),typeof X!="function"||(X(this),Ie&&be.call(this)),this},B.compatAPI=function(X){var Ie=ke===re.ADVANCED;return Ie&&be.call(this),typeof X!="function"||(X(this),Ie&&Pe.call(this)),this},B.isAdvancedAPI=function(){return ke===re.ADVANCED};var ye,me=function(X){if(ke!==re.ADVANCED)throw new Error(X+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},tt=B.roundToPrecision=B.__private__.roundToPrecision=function(X,Ie){var lt=i||Ie;if(isNaN(X)||isNaN(lt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return X.toFixed(lt).replace(/0+$/,"")};ye=B.hpf=B.__private__.hpf=typeof E=="number"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return tt(X,E)}:E==="smart"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return tt(X,X>-1&&X<1?16:5)}:function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return tt(X,16)};var nt=B.f2=B.__private__.f2=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f2");return tt(X,2)},Se=B.__private__.f3=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f3");return tt(X,3)},Me=B.scale=B.__private__.scale=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.scale");return ke===re.COMPAT?X*ot:ke===re.ADVANCED?X:void 0},Ge=function(X){return ke===re.COMPAT?Us()-X:ke===re.ADVANCED?X:void 0},Xe=function(X){return Me(Ge(X))};B.__private__.setPrecision=B.setPrecision=function(X){typeof parseInt(X,10)=="number"&&(i=parseInt(X,10))};var _t,pt="00000000000000000000000000000000",Gt=B.__private__.getFileId=function(){return pt},kt=B.__private__.setFileId=function(X){return pt=X!==void 0&&/^[a-fA-F0-9]{32}$/.test(X)?X.toUpperCase():pt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),z!==null&&(M=new Mh(z.userPermissions,z.userPassword,z.ownerPassword,pt)),pt};B.setFileId=function(X){return kt(X),this},B.getFileId=function(){return Gt()};var Xt=B.__private__.convertDateToPDFDate=function(X){var Ie=X.getTimezoneOffset(),lt=Ie<0?"+":"-",zt=Math.floor(Math.abs(Ie/60)),Kt=Math.abs(Ie%60),Li=[lt,Re(zt),"'",Re(Kt),"'"].join("");return["D:",X.getFullYear(),Re(X.getMonth()+1),Re(X.getDate()),Re(X.getHours()),Re(X.getMinutes()),Re(X.getSeconds()),Li].join("")},Mt=B.__private__.convertPDFDateToDate=function(X){var Ie=parseInt(X.substr(2,4),10),lt=parseInt(X.substr(6,2),10)-1,zt=parseInt(X.substr(8,2),10),Kt=parseInt(X.substr(10,2),10),Li=parseInt(X.substr(12,2),10),Xi=parseInt(X.substr(14,2),10);return new Date(Ie,lt,zt,Kt,Li,Xi,0)},qt=B.__private__.setCreationDate=function(X){var Ie;if(X===void 0&&(X=new Date),X instanceof Date)Ie=Xt(X);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(X))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ie=X}return _t=Ie},ve=B.__private__.getCreationDate=function(X){var Ie=_t;return X==="jsDate"&&(Ie=Mt(_t)),Ie};B.setCreationDate=function(X){return qt(X),this},B.getCreationDate=function(X){return ve(X)};var it,Re=B.__private__.padd2=function(X){return("0"+parseInt(X)).slice(-2)},bt=B.__private__.padd2Hex=function(X){return("00"+(X=X.toString())).substr(X.length)},Ct=0,Ot=[],Ht=[],Wt=0,si=[],ri=[],zi=!1,Di=Ht,er=function(){Ct=0,Wt=0,Ht=[],Ot=[],si=[],Ke=de(),et=de()};B.__private__.setCustomOutputDestination=function(X){zi=!0,Di=X};var Zt=function(X){zi||(Di=X)};B.__private__.resetCustomOutputDestination=function(){zi=!1,Di=Ht};var yt=B.__private__.out=function(X){return X=X.toString(),Wt+=X.length+1,Di.push(X),Di},$i=B.__private__.write=function(X){return yt(arguments.length===1?X.toString():Array.prototype.join.call(arguments," "))},nr=B.__private__.getArrayBuffer=function(X){for(var Ie=X.length,lt=new ArrayBuffer(Ie),zt=new Uint8Array(lt);Ie--;)zt[Ie]=X.charCodeAt(Ie);return lt},di=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];B.__private__.getStandardFonts=function(){return di};var Hi=n.fontSize||16;B.__private__.setFontSize=B.setFontSize=function(X){return Hi=ke===re.ADVANCED?X/ot:X,this};var Ki,Ui=B.__private__.getFontSize=B.getFontSize=function(){return ke===re.COMPAT?Hi:Hi*ot},Qt=n.R2L||!1;B.__private__.setR2L=B.setR2L=function(X){return Qt=X,this},B.__private__.getR2L=B.getR2L=function(){return Qt};var lr,pi=B.__private__.setZoomMode=function(X){var Ie=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(X))Ki=X;else if(isNaN(X)){if(Ie.indexOf(X)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+X+'" is not recognized.');Ki=X}else Ki=parseInt(X,10)};B.__private__.getZoomMode=function(){return Ki};var Dr,ze=B.__private__.setPageMode=function(X){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(X)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+X+'" is not recognized.');lr=X};B.__private__.getPageMode=function(){return lr};var Y=B.__private__.setLayoutMode=function(X){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(X)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+X+'" is not recognized.');Dr=X};B.__private__.getLayoutMode=function(){return Dr},B.__private__.setDisplayMode=B.setDisplayMode=function(X,Ie,lt){return pi(X),Y(Ie),ze(lt),this};var te={title:"",subject:"",author:"",keywords:"",creator:""};B.__private__.getDocumentProperty=function(X){if(Object.keys(te).indexOf(X)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return te[X]},B.__private__.getDocumentProperties=function(){return te},B.__private__.setDocumentProperties=B.setProperties=B.setDocumentProperties=function(X){for(var Ie in te)te.hasOwnProperty(Ie)&&X[Ie]&&(te[Ie]=X[Ie]);return this},B.__private__.setDocumentProperty=function(X,Ie){if(Object.keys(te).indexOf(X)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return te[X]=Ie};var je,ot,mt,Jt,hr,xr={},or={},Ei=[],Wi={},Br={},Zr={},Pn={},Vr=null,vn=0,Pr=[],_n=new Xg(B),Tn=n.hotfixes||[],Tr={},Qr={},Un=[],Bi=function X(Ie,lt,zt,Kt,Li,Xi){if(!(this instanceof X))return new X(Ie,lt,zt,Kt,Li,Xi);isNaN(Ie)&&(Ie=1),isNaN(lt)&&(lt=0),isNaN(zt)&&(zt=0),isNaN(Kt)&&(Kt=1),isNaN(Li)&&(Li=0),isNaN(Xi)&&(Xi=0),this._matrix=[Ie,lt,zt,Kt,Li,Xi]};Object.defineProperty(Bi.prototype,"sx",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(Bi.prototype,"shy",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(Bi.prototype,"shx",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(Bi.prototype,"sy",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(Bi.prototype,"tx",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(Bi.prototype,"ty",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(Bi.prototype,"a",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(Bi.prototype,"b",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(Bi.prototype,"c",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(Bi.prototype,"d",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(Bi.prototype,"e",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(Bi.prototype,"f",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(Bi.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Bi.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Bi.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Bi.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Bi.prototype.join=function(X){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ye).join(X)},Bi.prototype.multiply=function(X){var Ie=X.sx*this.sx+X.shy*this.shx,lt=X.sx*this.shy+X.shy*this.sy,zt=X.shx*this.sx+X.sy*this.shx,Kt=X.shx*this.shy+X.sy*this.sy,Li=X.tx*this.sx+X.ty*this.shx+this.tx,Xi=X.tx*this.shy+X.ty*this.sy+this.ty;return new Bi(Ie,lt,zt,Kt,Li,Xi)},Bi.prototype.decompose=function(){var X=this.sx,Ie=this.shy,lt=this.shx,zt=this.sy,Kt=this.tx,Li=this.ty,Xi=Math.sqrt(X*X+Ie*Ie),Mr=(X/=Xi)*lt+(Ie/=Xi)*zt;lt-=X*Mr,zt-=Ie*Mr;var en=Math.sqrt(lt*lt+zt*zt);return Mr/=en,X*(zt/=en)<Ie*(lt/=en)&&(X=-X,Ie=-Ie,Mr=-Mr,Xi=-Xi),{scale:new Bi(Xi,0,0,en,0,0),translate:new Bi(1,0,0,1,Kt,Li),rotate:new Bi(X,Ie,-Ie,X,0,0),skew:new Bi(1,0,Mr,1,0,0)}},Bi.prototype.toString=function(X){return this.join(" ")},Bi.prototype.inversed=function(){var X=this.sx,Ie=this.shy,lt=this.shx,zt=this.sy,Kt=this.tx,Li=this.ty,Xi=1/(X*zt-Ie*lt),Mr=zt*Xi,en=-Ie*Xi,mn=-lt*Xi,En=X*Xi;return new Bi(Mr,en,mn,En,-Mr*Kt-mn*Li,-en*Kt-En*Li)},Bi.prototype.applyToPoint=function(X){var Ie=X.x*this.sx+X.y*this.shx+this.tx,lt=X.x*this.shy+X.y*this.sy+this.ty;return new cl(Ie,lt)},Bi.prototype.applyToRectangle=function(X){var Ie=this.applyToPoint(X),lt=this.applyToPoint(new cl(X.x+X.w,X.y+X.h));return new Nl(Ie.x,Ie.y,lt.x-Ie.x,lt.y-Ie.y)},Bi.prototype.clone=function(){var X=this.sx,Ie=this.shy,lt=this.shx,zt=this.sy,Kt=this.tx,Li=this.ty;return new Bi(X,Ie,lt,zt,Kt,Li)},B.Matrix=Bi;var Le=B.matrixMult=function(X,Ie){return Ie.multiply(X)},$n=new Bi(1,0,0,1,0,0);B.unitMatrix=B.identityMatrix=$n;var eo=function(X,Ie){if(!Br[X]){var lt=(Ie instanceof H0?"Sh":"P")+(Object.keys(Wi).length+1).toString(10);Ie.id=lt,Br[X]=lt,Wi[lt]=Ie,_n.publish("addPattern",Ie)}};B.ShadingPattern=H0,B.TilingPattern=Fh,B.addShadingPattern=function(X,Ie){return me("addShadingPattern()"),eo(X,Ie),this},B.beginTilingPattern=function(X){me("beginTilingPattern()"),yr(X.boundingBox[0],X.boundingBox[1],X.boundingBox[2]-X.boundingBox[0],X.boundingBox[3]-X.boundingBox[1],X.matrix)},B.endTilingPattern=function(X,Ie){me("endTilingPattern()"),Ie.stream=ri[it].join(`
`),eo(X,Ie),_n.publish("endTilingPattern",Ie),Un.pop().restore()};var Xn=B.__private__.newObject=function(){var X=de();return fe(X,!0),X},de=B.__private__.newObjectDeferred=function(){return Ct++,Ot[Ct]=function(){return Wt},Ct},fe=function(X,Ie){return Ie=typeof Ie=="boolean"&&Ie,Ot[X]=Wt,Ie&&yt(X+" 0 obj"),X},Te=B.__private__.newAdditionalObject=function(){var X={objId:de(),content:""};return si.push(X),X},Ke=de(),et=de(),wt=B.__private__.decodeColorString=function(X){var Ie=X.split(" ");if(Ie.length!==2||Ie[1]!=="g"&&Ie[1]!=="G")Ie.length===5&&(Ie[4]==="k"||Ie[4]==="K")&&(Ie=[(1-Ie[0])*(1-Ie[3]),(1-Ie[1])*(1-Ie[3]),(1-Ie[2])*(1-Ie[3]),"r"]);else{var lt=parseFloat(Ie[0]);Ie=[lt,lt,lt,"r"]}for(var zt="#",Kt=0;Kt<3;Kt++)zt+=("0"+Math.floor(255*parseFloat(Ie[Kt])).toString(16)).slice(-2);return zt},De=B.__private__.encodeColorString=function(X){var Ie;typeof X=="string"&&(X={ch1:X});var lt=X.ch1,zt=X.ch2,Kt=X.ch3,Li=X.ch4,Xi=X.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof lt=="string"&&lt.charAt(0)!=="#"){var Mr=new s5(lt);if(Mr.ok)lt=Mr.toHex();else if(!/^\d*\.?\d*$/.test(lt))throw new Error('Invalid color "'+lt+'" passed to jsPDF.encodeColorString.')}if(typeof lt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(lt)&&(lt="#"+lt[1]+lt[1]+lt[2]+lt[2]+lt[3]+lt[3]),typeof lt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(lt)){var en=parseInt(lt.substr(1),16);lt=en>>16&255,zt=en>>8&255,Kt=255&en}if(zt===void 0||Li===void 0&&lt===zt&&zt===Kt)if(typeof lt=="string")Ie=lt+" "+Xi[0];else switch(X.precision){case 2:Ie=nt(lt/255)+" "+Xi[0];break;case 3:default:Ie=Se(lt/255)+" "+Xi[0]}else if(Li===void 0||xo(Li)==="object"){if(Li&&!isNaN(Li.a)&&Li.a===0)return Ie=["1.","1.","1.",Xi[1]].join(" ");if(typeof lt=="string")Ie=[lt,zt,Kt,Xi[1]].join(" ");else switch(X.precision){case 2:Ie=[nt(lt/255),nt(zt/255),nt(Kt/255),Xi[1]].join(" ");break;default:case 3:Ie=[Se(lt/255),Se(zt/255),Se(Kt/255),Xi[1]].join(" ")}}else if(typeof lt=="string")Ie=[lt,zt,Kt,Li,Xi[2]].join(" ");else switch(X.precision){case 2:Ie=[nt(lt),nt(zt),nt(Kt),nt(Li),Xi[2]].join(" ");break;case 3:default:Ie=[Se(lt),Se(zt),Se(Kt),Se(Li),Xi[2]].join(" ")}return Ie},Nt=B.__private__.getFilters=function(){return b},Tt=B.__private__.putStream=function(X){var Ie=(X=X||{}).data||"",lt=X.filters||Nt(),zt=X.alreadyAppliedFilters||[],Kt=X.addLength1||!1,Li=Ie.length,Xi=X.objectId,Mr=function(Ko){return Ko};if(z!==null&&Xi===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");z!==null&&(Mr=M.encryptor(Xi,0));var en={};lt===!0&&(lt=["FlateEncode"]);var mn=X.additionalKeyValues||[],En=(en=yn.API.processDataByFilters!==void 0?yn.API.processDataByFilters(Ie,lt):{data:Ie,reverseChain:[]}).reverseChain+(Array.isArray(zt)?zt.join(" "):zt.toString());if(en.data.length!==0&&(mn.push({key:"Length",value:en.data.length}),Kt===!0&&mn.push({key:"Length1",value:Li})),En.length!=0)if(En.split("/").length-1==1)mn.push({key:"Filter",value:En});else{mn.push({key:"Filter",value:"["+En+"]"});for(var Mn=0;Mn<mn.length;Mn+=1)if(mn[Mn].key==="DecodeParms"){for(var ro=[],lo=0;lo<en.reverseChain.split("/").length-1;lo+=1)ro.push("null");ro.push(mn[Mn].value),mn[Mn].value="["+ro.join(" ")+"]"}}yt("<<");for(var ho=0;ho<mn.length;ho++)yt("/"+mn[ho].key+" "+mn[ho].value);yt(">>"),en.data.length!==0&&(yt("stream"),yt(Mr(en.data)),yt("endstream"))},jt=B.__private__.putPage=function(X){var Ie=X.number,lt=X.data,zt=X.objId,Kt=X.contentsObjId;fe(zt,!0),yt("<</Type /Page"),yt("/Parent "+X.rootDictionaryObjId+" 0 R"),yt("/Resources "+X.resourceDictionaryObjId+" 0 R"),yt("/MediaBox ["+parseFloat(ye(X.mediaBox.bottomLeftX))+" "+parseFloat(ye(X.mediaBox.bottomLeftY))+" "+ye(X.mediaBox.topRightX)+" "+ye(X.mediaBox.topRightY)+"]"),X.cropBox!==null&&yt("/CropBox ["+ye(X.cropBox.bottomLeftX)+" "+ye(X.cropBox.bottomLeftY)+" "+ye(X.cropBox.topRightX)+" "+ye(X.cropBox.topRightY)+"]"),X.bleedBox!==null&&yt("/BleedBox ["+ye(X.bleedBox.bottomLeftX)+" "+ye(X.bleedBox.bottomLeftY)+" "+ye(X.bleedBox.topRightX)+" "+ye(X.bleedBox.topRightY)+"]"),X.trimBox!==null&&yt("/TrimBox ["+ye(X.trimBox.bottomLeftX)+" "+ye(X.trimBox.bottomLeftY)+" "+ye(X.trimBox.topRightX)+" "+ye(X.trimBox.topRightY)+"]"),X.artBox!==null&&yt("/ArtBox ["+ye(X.artBox.bottomLeftX)+" "+ye(X.artBox.bottomLeftY)+" "+ye(X.artBox.topRightX)+" "+ye(X.artBox.topRightY)+"]"),typeof X.userUnit=="number"&&X.userUnit!==1&&yt("/UserUnit "+X.userUnit),_n.publish("putPage",{objId:zt,pageContext:Pr[Ie],pageNumber:Ie,page:lt}),yt("/Contents "+Kt+" 0 R"),yt(">>"),yt("endobj");var Li=lt.join(`
`);return ke===re.ADVANCED&&(Li+=`
Q`),fe(Kt,!0),Tt({data:Li,filters:Nt(),objectId:Kt}),yt("endobj"),zt},ki=B.__private__.putPages=function(){var X,Ie,lt=[];for(X=1;X<=vn;X++)Pr[X].objId=de(),Pr[X].contentsObjId=de();for(X=1;X<=vn;X++)lt.push(jt({number:X,data:ri[X],objId:Pr[X].objId,contentsObjId:Pr[X].contentsObjId,mediaBox:Pr[X].mediaBox,cropBox:Pr[X].cropBox,bleedBox:Pr[X].bleedBox,trimBox:Pr[X].trimBox,artBox:Pr[X].artBox,userUnit:Pr[X].userUnit,rootDictionaryObjId:Ke,resourceDictionaryObjId:et}));fe(Ke,!0),yt("<</Type /Pages");var zt="/Kids [";for(Ie=0;Ie<vn;Ie++)zt+=lt[Ie]+" 0 R ";yt(zt+"]"),yt("/Count "+vn),yt(">>"),yt("endobj"),_n.publish("postPutPages")},Ri=function(X){_n.publish("putFont",{font:X,out:yt,newObject:Xn,putStream:Tt}),X.isAlreadyPutted!==!0&&(X.objectNumber=Xn(),yt("<<"),yt("/Type /Font"),yt("/BaseFont /"+Dh(X.postScriptName)),yt("/Subtype /Type1"),typeof X.encoding=="string"&&yt("/Encoding /"+X.encoding),yt("/FirstChar 32"),yt("/LastChar 255"),yt(">>"),yt("endobj"))},wi=function(){for(var X in xr)xr.hasOwnProperty(X)&&(U===!1||U===!0&&q.hasOwnProperty(X))&&Ri(xr[X])},kr=function(X){X.objectNumber=Xn();var Ie=[];Ie.push({key:"Type",value:"/XObject"}),Ie.push({key:"Subtype",value:"/Form"}),Ie.push({key:"BBox",value:"["+[ye(X.x),ye(X.y),ye(X.x+X.width),ye(X.y+X.height)].join(" ")+"]"}),Ie.push({key:"Matrix",value:"["+X.matrix.toString()+"]"});var lt=X.pages[1].join(`
`);Tt({data:lt,additionalKeyValues:Ie,objectId:X.objectNumber}),yt("endobj")},Sr=function(){for(var X in Tr)Tr.hasOwnProperty(X)&&kr(Tr[X])},ji=function(X,Ie){var lt,zt=[],Kt=1/(Ie-1);for(lt=0;lt<1;lt+=Kt)zt.push(lt);if(zt.push(1),X[0].offset!=0){var Li={offset:0,color:X[0].color};X.unshift(Li)}if(X[X.length-1].offset!=1){var Xi={offset:1,color:X[X.length-1].color};X.push(Xi)}for(var Mr="",en=0,mn=0;mn<zt.length;mn++){for(lt=zt[mn];lt>X[en+1].offset;)en++;var En=X[en].offset,Mn=(lt-En)/(X[en+1].offset-En),ro=X[en].color,lo=X[en+1].color;Mr+=bt(Math.round((1-Mn)*ro[0]+Mn*lo[0]).toString(16))+bt(Math.round((1-Mn)*ro[1]+Mn*lo[1]).toString(16))+bt(Math.round((1-Mn)*ro[2]+Mn*lo[2]).toString(16))}return Mr.trim()},Gr=function(X,Ie){Ie||(Ie=21);var lt=Xn(),zt=ji(X.colors,Ie),Kt=[];Kt.push({key:"FunctionType",value:"0"}),Kt.push({key:"Domain",value:"[0.0 1.0]"}),Kt.push({key:"Size",value:"["+Ie+"]"}),Kt.push({key:"BitsPerSample",value:"8"}),Kt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Kt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Tt({data:zt,additionalKeyValues:Kt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:lt}),yt("endobj"),X.objectNumber=Xn(),yt("<< /ShadingType "+X.type),yt("/ColorSpace /DeviceRGB");var Li="/Coords ["+ye(parseFloat(X.coords[0]))+" "+ye(parseFloat(X.coords[1]))+" ";X.type===2?Li+=ye(parseFloat(X.coords[2]))+" "+ye(parseFloat(X.coords[3])):Li+=ye(parseFloat(X.coords[2]))+" "+ye(parseFloat(X.coords[3]))+" "+ye(parseFloat(X.coords[4]))+" "+ye(parseFloat(X.coords[5])),yt(Li+="]"),X.matrix&&yt("/Matrix ["+X.matrix.toString()+"]"),yt("/Function "+lt+" 0 R"),yt("/Extend [true true]"),yt(">>"),yt("endobj")},jr=function(X,Ie){var lt=de(),zt=Xn();Ie.push({resourcesOid:lt,objectOid:zt}),X.objectNumber=zt;var Kt=[];Kt.push({key:"Type",value:"/Pattern"}),Kt.push({key:"PatternType",value:"1"}),Kt.push({key:"PaintType",value:"1"}),Kt.push({key:"TilingType",value:"1"}),Kt.push({key:"BBox",value:"["+X.boundingBox.map(ye).join(" ")+"]"}),Kt.push({key:"XStep",value:ye(X.xStep)}),Kt.push({key:"YStep",value:ye(X.yStep)}),Kt.push({key:"Resources",value:lt+" 0 R"}),X.matrix&&Kt.push({key:"Matrix",value:"["+X.matrix.toString()+"]"}),Tt({data:X.stream,additionalKeyValues:Kt,objectId:X.objectNumber}),yt("endobj")},dn=function(X){var Ie;for(Ie in Wi)Wi.hasOwnProperty(Ie)&&(Wi[Ie]instanceof H0?Gr(Wi[Ie]):Wi[Ie]instanceof Fh&&jr(Wi[Ie],X))},$r=function(X){for(var Ie in X.objectNumber=Xn(),yt("<<"),X)switch(Ie){case"opacity":yt("/ca "+nt(X[Ie]));break;case"stroke-opacity":yt("/CA "+nt(X[Ie]))}yt(">>"),yt("endobj")},un=function(){var X;for(X in Zr)Zr.hasOwnProperty(X)&&$r(Zr[X])},bn=function(){for(var X in yt("/XObject <<"),Tr)Tr.hasOwnProperty(X)&&Tr[X].objectNumber>=0&&yt("/"+X+" "+Tr[X].objectNumber+" 0 R");_n.publish("putXobjectDict"),yt(">>")},On=function(){M.oid=Xn(),yt("<<"),yt("/Filter /Standard"),yt("/V "+M.v),yt("/R "+M.r),yt("/U <"+M.toHexString(M.U)+">"),yt("/O <"+M.toHexString(M.O)+">"),yt("/P "+M.P),yt(">>"),yt("endobj")},_o=function(){for(var X in yt("/Font <<"),xr)xr.hasOwnProperty(X)&&(U===!1||U===!0&&q.hasOwnProperty(X))&&yt("/"+X+" "+xr[X].objectNumber+" 0 R");yt(">>")},qn=function(){if(Object.keys(Wi).length>0){for(var X in yt("/Shading <<"),Wi)Wi.hasOwnProperty(X)&&Wi[X]instanceof H0&&Wi[X].objectNumber>=0&&yt("/"+X+" "+Wi[X].objectNumber+" 0 R");_n.publish("putShadingPatternDict"),yt(">>")}},bo=function(X){if(Object.keys(Wi).length>0){for(var Ie in yt("/Pattern <<"),Wi)Wi.hasOwnProperty(Ie)&&Wi[Ie]instanceof B.TilingPattern&&Wi[Ie].objectNumber>=0&&Wi[Ie].objectNumber<X&&yt("/"+Ie+" "+Wi[Ie].objectNumber+" 0 R");_n.publish("putTilingPatternDict"),yt(">>")}},Ca=function(){if(Object.keys(Zr).length>0){var X;for(X in yt("/ExtGState <<"),Zr)Zr.hasOwnProperty(X)&&Zr[X].objectNumber>=0&&yt("/"+X+" "+Zr[X].objectNumber+" 0 R");_n.publish("putGStateDict"),yt(">>")}},to=function(X){fe(X.resourcesOid,!0),yt("<<"),yt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_o(),qn(),bo(X.objectOid),Ca(),bn(),yt(">>"),yt("endobj")},xt=function(){var X=[];wi(),un(),Sr(),dn(X),_n.publish("putResources"),X.forEach(to),to({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),_n.publish("postPutResources")},Ur=function(){_n.publish("putAdditionalObjects");for(var X=0;X<si.length;X++){var Ie=si[X];fe(Ie.objId,!0),yt(Ie.content),yt("endobj")}_n.publish("postPutAdditionalObjects")},Wr=function(X){or[X.fontName]=or[X.fontName]||{},or[X.fontName][X.fontStyle]=X.id},pn=function(X,Ie,lt,zt,Kt){var Li={id:"F"+(Object.keys(xr).length+1).toString(10),postScriptName:X,fontName:Ie,fontStyle:lt,encoding:zt,isStandardFont:Kt||!1,metadata:{}};return _n.publish("addFont",{font:Li,instance:this}),xr[Li.id]=Li,Wr(Li),Li.id},mo=function(X){for(var Ie=0,lt=di.length;Ie<lt;Ie++){var zt=pn.call(this,X[Ie][0],X[Ie][1],X[Ie][2],di[Ie][3],!0);U===!1&&(q[zt]=!0);var Kt=X[Ie][0].split("-");Wr({id:zt,fontName:Kt[0],fontStyle:Kt[1]||""})}_n.publish("addFonts",{fonts:xr,dictionary:or})},io=function(X){return X.foo=function(){try{return X.apply(this,arguments)}catch(zt){var Ie=zt.stack||"";~Ie.indexOf(" at ")&&(Ie=Ie.split(" at ")[1]);var lt="Error in function "+Ie.split(`
`)[0].split("<")[0]+": "+zt.message;if(!wn.console)throw new Error(lt);wn.console.error(lt,zt),wn.alert&&alert(lt)}},X.foo.bar=X,X.foo},Qs=function(X,Ie){var lt,zt,Kt,Li,Xi,Mr,en,mn,En;if(Kt=(Ie=Ie||{}).sourceEncoding||"Unicode",Xi=Ie.outputEncoding,(Ie.autoencode||Xi)&&xr[je].metadata&&xr[je].metadata[Kt]&&xr[je].metadata[Kt].encoding&&(Li=xr[je].metadata[Kt].encoding,!Xi&&xr[je].encoding&&(Xi=xr[je].encoding),!Xi&&Li.codePages&&(Xi=Li.codePages[0]),typeof Xi=="string"&&(Xi=Li[Xi]),Xi)){for(en=!1,Mr=[],lt=0,zt=X.length;lt<zt;lt++)(mn=Xi[X.charCodeAt(lt)])?Mr.push(String.fromCharCode(mn)):Mr.push(X[lt]),Mr[lt].charCodeAt(0)>>8&&(en=!0);X=Mr.join("")}for(lt=X.length;en===void 0&&lt!==0;)X.charCodeAt(lt-1)>>8&&(en=!0),lt--;if(!en)return X;for(Mr=Ie.noBOM?[]:[254,255],lt=0,zt=X.length;lt<zt;lt++){if((En=(mn=X.charCodeAt(lt))>>8)>>8)throw new Error("Character at position "+lt+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mr.push(En),Mr.push(mn-(En<<8))}return String.fromCharCode.apply(void 0,Mr)},Io=B.__private__.pdfEscape=B.pdfEscape=function(X,Ie){return Qs(X,Ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fs=B.__private__.beginPage=function(X){ri[++vn]=[],Pr[vn]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(X[0]),topRightY:Number(X[1])}},Jo(vn),Zt(ri[it])},Vo=function(X,Ie){var lt,zt,Kt;switch(o=Ie||o,typeof X=="string"&&(lt=ne(X.toLowerCase()),Array.isArray(lt)&&(zt=lt[0],Kt=lt[1])),Array.isArray(X)&&(zt=X[0]*ot,Kt=X[1]*ot),isNaN(zt)&&(zt=p[0],Kt=p[1]),(zt>14400||Kt>14400)&&(Fo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),zt=Math.min(14400,zt),Kt=Math.min(14400,Kt)),p=[zt,Kt],o.substr(0,1)){case"l":Kt>zt&&(p=[Kt,zt]);break;case"p":zt>Kt&&(p=[Kt,zt])}fs(p),zr(A),yt(ps),$l!==0&&yt($l+" J"),Dl!==0&&yt(Dl+" j"),_n.publish("addPage",{pageNumber:vn})},$s=function(X){X>0&&X<=vn&&(ri.splice(X,1),Pr.splice(X,1),vn--,it>vn&&(it=vn),this.setPage(it))},Jo=function(X){X>0&&X<=vn&&(it=X)},ws=B.__private__.getNumberOfPages=B.getNumberOfPages=function(){return ri.length-1},ds=function(X,Ie,lt){var zt,Kt=void 0;return lt=lt||{},X=X!==void 0?X:xr[je].fontName,Ie=Ie!==void 0?Ie:xr[je].fontStyle,zt=X.toLowerCase(),or[zt]!==void 0&&or[zt][Ie]!==void 0?Kt=or[zt][Ie]:or[X]!==void 0&&or[X][Ie]!==void 0?Kt=or[X][Ie]:lt.disableWarning===!1&&Fo.warn("Unable to look up font label for font '"+X+"', '"+Ie+"'. Refer to getFontList() for available fonts."),Kt||lt.noFallback||(Kt=or.times[Ie])==null&&(Kt=or.times.normal),Kt},ea=B.__private__.putInfo=function(){var X=Xn(),Ie=function(zt){return zt};for(var lt in z!==null&&(Ie=M.encryptor(X,0)),yt("<<"),yt("/Producer ("+Io(Ie("jsPDF "+yn.version))+")"),te)te.hasOwnProperty(lt)&&te[lt]&&yt("/"+lt.substr(0,1).toUpperCase()+lt.substr(1)+" ("+Io(Ie(te[lt]))+")");yt("/CreationDate ("+Io(Ie(_t))+")"),yt(">>"),yt("endobj")},Ha=B.__private__.putCatalog=function(X){var Ie=(X=X||{}).rootDictionaryObjId||Ke;switch(Xn(),yt("<<"),yt("/Type /Catalog"),yt("/Pages "+Ie+" 0 R"),Ki||(Ki="fullwidth"),Ki){case"fullwidth":yt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":yt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":yt("/OpenAction [3 0 R /Fit]");break;case"original":yt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var lt=""+Ki;lt.substr(lt.length-1)==="%"&&(Ki=parseInt(Ki)/100),typeof Ki=="number"&&yt("/OpenAction [3 0 R /XYZ null null "+nt(Ki)+"]")}switch(Dr||(Dr="continuous"),Dr){case"continuous":yt("/PageLayout /OneColumn");break;case"single":yt("/PageLayout /SinglePage");break;case"two":case"twoleft":yt("/PageLayout /TwoColumnLeft");break;case"tworight":yt("/PageLayout /TwoColumnRight")}lr&&yt("/PageMode /"+lr),_n.publish("putCatalog"),yt(">>"),yt("endobj")},Tl=B.__private__.putTrailer=function(){yt("trailer"),yt("<<"),yt("/Size "+(Ct+1)),yt("/Root "+Ct+" 0 R"),yt("/Info "+(Ct-1)+" 0 R"),z!==null&&yt("/Encrypt "+M.oid+" 0 R"),yt("/ID [ <"+pt+"> <"+pt+"> ]"),yt(">>")},Wa=B.__private__.putHeader=function(){yt("%PDF-"+K),yt("%\xBA\xDF\xAC\xE0")},Ll=B.__private__.putXRef=function(){var X="0000000000";yt("xref"),yt("0 "+(Ct+1)),yt("0000000000 65535 f ");for(var Ie=1;Ie<=Ct;Ie++)typeof Ot[Ie]=="function"?yt((X+Ot[Ie]()).slice(-10)+" 00000 n "):Ot[Ie]!==void 0?yt((X+Ot[Ie]).slice(-10)+" 00000 n "):yt("0000000000 00000 n ")},Bs=B.__private__.buildDocument=function(){er(),Zt(Ht),_n.publish("buildDocument"),Wa(),ki(),Ur(),xt(),z!==null&&On(),ea(),Ha();var X=Wt;return Ll(),Tl(),yt("startxref"),yt(""+X),yt("%%EOF"),Zt(ri[it]),Ht.join(`
`)},Rs=B.__private__.getBlob=function(X){return new Blob([nr(X)],{type:"application/pdf"})},Yn=B.output=B.__private__.output=io(function(X,Ie){switch(typeof(Ie=Ie||{})=="string"?Ie={filename:Ie}:Ie.filename=Ie.filename||"generated.pdf",X){case void 0:return Bs();case"save":B.save(Ie.filename);break;case"arraybuffer":return nr(Bs());case"blob":return Rs(Bs());case"bloburi":case"bloburl":if(wn.URL!==void 0&&typeof wn.URL.createObjectURL=="function")return wn.URL&&wn.URL.createObjectURL(Rs(Bs()))||void 0;Fo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var lt="",zt=Bs();try{lt=y2(zt)}catch{lt=y2(unescape(encodeURIComponent(zt)))}return"data:application/pdf;filename="+Ie.filename+";base64,"+lt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var Kt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Li=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ie.pdfObjectUrl&&(Kt=Ie.pdfObjectUrl,Li="");var Xi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Kt+'"'+Li+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ie)+");<\/script></body></html>",Mr=wn.open();return Mr!==null&&Mr.document.write(Xi),Mr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ie.filename+'" width="500px" height="400px" /></body></html>',mn=wn.open();if(mn!==null){mn.document.write(en);var En=this;mn.document.documentElement.querySelector("#pdfViewer").onload=function(){mn.document.title=Ie.filename,mn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(En.output("bloburl"))}}return mn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ie)+'"></iframe></body></html>',ro=wn.open();if(ro!==null&&(ro.document.write(Mn),ro.document.title=Ie.filename),ro||typeof safari>"u")return ro;break;case"datauri":case"dataurl":return wn.document.location.href=this.output("datauristring",Ie);default:return null}}),Ta=function(X){return Array.isArray(Tn)===!0&&Tn.indexOf(X)>-1};switch(l){case"pt":ot=1;break;case"mm":ot=72/25.4;break;case"cm":ot=72/2.54;break;case"in":ot=72;break;case"px":ot=Ta("px_scaling")==1?.75:96/72;break;case"pc":case"em":ot=12;break;case"ex":ot=6;break;default:if(typeof l!="number")throw new Error("Invalid unit: "+l);ot=l}var M=null;qt(),kt();var V=function(X){return z!==null?M.encryptor(X,0):function(Ie){return Ie}},oe=B.__private__.getPageInfo=B.getPageInfo=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pr[X].objId,pageNumber:X,pageContext:Pr[X]}},ge=B.__private__.getPageInfoByObjId=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ie in Pr)if(Pr[Ie].objId===X)break;return oe(Ie)},qe=B.__private__.getCurrentPageInfo=B.getCurrentPageInfo=function(){return{objId:Pr[it].objId,pageNumber:it,pageContext:Pr[it]}};B.addPage=function(){return Vo.apply(this,arguments),this},B.setPage=function(){return Jo.apply(this,arguments),Zt.call(this,ri[it]),this},B.insertPage=function(X){return this.addPage(),this.movePage(it,X),this},B.movePage=function(X,Ie){var lt,zt;if(X>Ie){lt=ri[X],zt=Pr[X];for(var Kt=X;Kt>Ie;Kt--)ri[Kt]=ri[Kt-1],Pr[Kt]=Pr[Kt-1];ri[Ie]=lt,Pr[Ie]=zt,this.setPage(Ie)}else if(X<Ie){lt=ri[X],zt=Pr[X];for(var Li=X;Li<Ie;Li++)ri[Li]=ri[Li+1],Pr[Li]=Pr[Li+1];ri[Ie]=lt,Pr[Ie]=zt,this.setPage(Ie)}return this},B.deletePage=function(){return $s.apply(this,arguments),this},B.__private__.text=B.text=function(X,Ie,lt,zt,Kt){var Li,Xi,Mr,en,mn,En,Mn,ro,lo,ho=(zt=zt||{}).scope||this;if(typeof X=="number"&&typeof Ie=="number"&&(typeof lt=="string"||Array.isArray(lt))){var Ko=lt;lt=Ie,Ie=X,X=Ko}if(arguments[3]instanceof Bi?(me("The transform parameter of text() with a Matrix value"),lo=Kt):(Mr=arguments[4],en=arguments[5],xo(Mn=arguments[3])==="object"&&Mn!==null||(typeof Mr=="string"&&(en=Mr,Mr=null),typeof Mn=="string"&&(en=Mn,Mn=null),typeof Mn=="number"&&(Mr=Mn,Mn=null),zt={flags:Mn,angle:Mr,align:en})),isNaN(Ie)||isNaN(lt)||X==null)throw new Error("Invalid arguments passed to jsPDF.text");if(X.length===0)return ho;var Bo="",gn=!1,Qo=typeof zt.lineHeightFactor=="number"?zt.lineHeightFactor:s,Go=ho.internal.scaleFactor;function fl(no){return no=no.split("	").join(Array(zt.TabLen||9).join(" ")),Io(no,Mn)}function Xa(no){for(var kn,Jn=no.concat(),Co=[],ir=Jn.length;ir--;)typeof(kn=Jn.shift())=="string"?Co.push(kn):Array.isArray(no)&&(kn.length===1||kn[1]===void 0&&kn[2]===void 0)?Co.push(kn[0]):Co.push([kn[0],kn[1],kn[2]]);return Co}function tu(no,kn){var Jn;if(typeof no=="string")Jn=kn(no)[0];else if(Array.isArray(no)){for(var Co,ir,sa=no.concat(),ou=[],su=sa.length;su--;)typeof(Co=sa.shift())=="string"?ou.push(kn(Co)[0]):Array.isArray(Co)&&typeof Co[0]=="string"&&(ir=kn(Co[0],Co[1],Co[2]),ou.push([ir[0],ir[1],ir[2]]));Jn=ou}return Jn}var ta=!1,Ya=!0;if(typeof X=="string")ta=!0;else if(Array.isArray(X)){var La=X.concat();Xi=[];for(var iu,ss=La.length;ss--;)(typeof(iu=La.shift())!="string"||Array.isArray(iu)&&typeof iu[0]!="string")&&(Ya=!1);ta=Ya}if(ta===!1)throw new Error('Type of text must be string or Array. "'+X+'" is not recognized.');typeof X=="string"&&(X=X.match(/[\r?\n]/)?X.split(/\r\n|\r|\n/g):[X]);var Fl=Hi/ho.internal.scaleFactor,dl=Fl*(Qo-1);switch(zt.baseline){case"bottom":lt-=dl;break;case"top":lt+=Fl-dl;break;case"hanging":lt+=Fl-2*dl;break;case"middle":lt+=Fl/2-dl}if((En=zt.maxWidth||0)>0&&(typeof X=="string"?X=ho.splitTextToSize(X,En):Object.prototype.toString.call(X)==="[object Array]"&&(X=X.reduce(function(no,kn){return no.concat(ho.splitTextToSize(kn,En))},[]))),Li={text:X,x:Ie,y:lt,options:zt,mutex:{pdfEscape:Io,activeFontKey:je,fonts:xr,activeFontSize:Hi}},_n.publish("preProcessText",Li),X=Li.text,Mr=(zt=Li.options).angle,!(lo instanceof Bi)&&Mr&&typeof Mr=="number"){Mr*=Math.PI/180,zt.rotationDirection===0&&(Mr=-Mr),ke===re.ADVANCED&&(Mr=-Mr);var pa=Math.cos(Mr),Bl=Math.sin(Mr);lo=new Bi(pa,Bl,-Bl,pa,0,0)}else Mr&&Mr instanceof Bi&&(lo=Mr);ke!==re.ADVANCED||lo||(lo=$n),(mn=zt.charSpace||Ml)!==void 0&&(Bo+=ye(Me(mn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ro=zt.horizontalScale)!==void 0&&(Bo+=ye(100*ro)+` Tz
`),zt.lang;var as=-1,Rl=zt.renderingMode!==void 0?zt.renderingMode:zt.stroke,Pa=ho.internal.getCurrentPageInfo().pageContext;switch(Rl){case 0:case!1:case"fill":as=0;break;case 1:case!0:case"stroke":as=1;break;case 2:case"fillThenStroke":as=2;break;case 3:case"invisible":as=3;break;case 4:case"fillAndAddForClipping":as=4;break;case 5:case"strokeAndAddPathForClipping":as=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":as=6;break;case 7:case"addToPathForClipping":as=7}var pl=Pa.usedRenderingMode!==void 0?Pa.usedRenderingMode:-1;as!==-1?Bo+=as+` Tr
`:pl!==-1&&(Bo+=`0 Tr
`),as!==-1&&(Pa.usedRenderingMode=as),en=zt.align||"left";var ia,Ja=Hi*Qo,ec=ho.internal.pageSize.getWidth(),tc=xr[je];mn=zt.charSpace||Ml,En=zt.maxWidth||0,Mn=Object.assign({autoencode:!0,noBOM:!0},zt.flags);var Ka=[];if(Object.prototype.toString.call(X)==="[object Array]"){var ls;Xi=Xa(X),en!=="left"&&(ia=Xi.map(function(no){return ho.getStringUnitWidth(no,{font:tc,charSpace:mn,fontSize:Hi,doKerning:!1})*Hi/Go}));var ra,na=0;if(en==="right"){Ie-=ia[0],X=[],ss=Xi.length;for(var Ps=0;Ps<ss;Ps++)Ps===0?(ra=Os(Ie),ls=fa(lt)):(ra=Me(na-ia[Ps]),ls=-Ja),X.push([Xi[Ps],ra,ls]),na=ia[Ps]}else if(en==="center"){Ie-=ia[0]/2,X=[],ss=Xi.length;for(var Do=0;Do<ss;Do++)Do===0?(ra=Os(Ie),ls=fa(lt)):(ra=Me((na-ia[Do])/2),ls=-Ja),X.push([Xi[Do],ra,ls]),na=ia[Do]}else if(en==="left"){X=[],ss=Xi.length;for(var Ma=0;Ma<ss;Ma++)X.push(Xi[Ma])}else{if(en!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');X=[],ss=Xi.length,En=En!==0?En:ec;for(var go=0;go<ss;go++)ls=go===0?fa(lt):-Ja,ra=go===0?Os(Ie):0,go<ss-1?Ka.push(ye(Me((En-ia[go])/(Xi[go].split(" ").length-1)))):Ka.push(0),X.push([Xi[go],ra,ls])}}var ru=typeof zt.R2L=="boolean"?zt.R2L:Qt;ru===!0&&(X=tu(X,function(no,kn,Jn){return[no.split("").reverse().join(""),kn,Jn]})),Li={text:X,x:Ie,y:lt,options:zt,mutex:{pdfEscape:Io,activeFontKey:je,fonts:xr,activeFontSize:Hi}},_n.publish("postProcessText",Li),X=Li.text,gn=Li.mutex.isHex||!1;var oa=xr[je].encoding;oa!=="WinAnsiEncoding"&&oa!=="StandardEncoding"||(X=tu(X,function(no,kn,Jn){return[fl(no),kn,Jn]})),Xi=Xa(X),X=[];for(var Ms,Sn,qs,Qa=0,nu=1,Ol=Array.isArray(Xi[0])?nu:Qa,ms="",$a=function(no,kn,Jn){var Co="";return Jn instanceof Bi?(Jn=typeof zt.angle=="number"?Le(Jn,new Bi(1,0,0,1,no,kn)):Le(new Bi(1,0,0,1,no,kn),Jn),ke===re.ADVANCED&&(Jn=Le(new Bi(1,0,0,-1,0,0),Jn)),Co=Jn.join(" ")+` Tm
`):Co=ye(no)+" "+ye(kn)+` Td
`,Co},Ro=0;Ro<Xi.length;Ro++){switch(ms="",Ol){case nu:qs=(gn?"<":"(")+Xi[Ro][0]+(gn?">":")"),Ms=parseFloat(Xi[Ro][1]),Sn=parseFloat(Xi[Ro][2]);break;case Qa:qs=(gn?"<":"(")+Xi[Ro]+(gn?">":")"),Ms=Os(Ie),Sn=fa(lt)}Ka!==void 0&&Ka[Ro]!==void 0&&(ms=Ka[Ro]+` Tw
`),Ro===0?X.push(ms+$a(Ms,Sn,lo)+qs):Ol===Qa?X.push(ms+qs):Ol===nu&&X.push(ms+$a(Ms,Sn,lo)+qs)}X=Ol===Qa?X.join(` Tj
T* `):X.join(` Tj
`),X+=` Tj
`;var dr=`BT
/`;return dr+=je+" "+Hi+` Tf
`,dr+=ye(Hi*Qo)+` TL
`,dr+=Pl+`
`,dr+=Bo,dr+=X,yt(dr+="ET"),q[je]=!0,ho};var ht=B.__private__.clip=B.clip=function(X){return yt(X==="evenodd"?"W*":"W"),this};B.clipEvenOdd=function(){return ht("evenodd")},B.__private__.discardPath=B.discardPath=function(){return yt("n"),this};var St=B.__private__.isValidStyle=function(X){var Ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(X)!==-1&&(Ie=!0),Ie};B.__private__.setDefaultPathOperation=B.setDefaultPathOperation=function(X){return St(X)&&(L=X),this};var Et=B.__private__.getStyle=B.getStyle=function(X){var Ie=L;switch(X){case"D":case"S":Ie="S";break;case"F":Ie="f";break;case"FD":case"DF":Ie="B";break;case"f":case"f*":case"B":case"B*":Ie=X}return Ie},ai=B.close=function(){return yt("h"),this};B.stroke=function(){return yt("S"),this},B.fill=function(X){return ii("f",X),this},B.fillEvenOdd=function(X){return ii("f*",X),this},B.fillStroke=function(X){return ii("B",X),this},B.fillStrokeEvenOdd=function(X){return ii("B*",X),this};var ii=function(X,Ie){xo(Ie)==="object"?Ii(Ie,X):yt(X)},ni=function(X){X===null||ke===re.ADVANCED&&X===void 0||(X=Et(X),yt(X))};function Vt(X,Ie,lt,zt,Kt){var Li=new Fh(Ie||this.boundingBox,lt||this.xStep,zt||this.yStep,this.gState,Kt||this.matrix);Li.stream=this.stream;var Xi=X+"$$"+this.cloneIndex+++"$$";return eo(Xi,Li),Li}var Ii=function(X,Ie){var lt=Br[X.key],zt=Wi[lt];if(zt instanceof H0)yt("q"),yt(Gi(Ie)),zt.gState&&B.setGState(zt.gState),yt(X.matrix.toString()+" cm"),yt("/"+lt+" sh"),yt("Q");else if(zt instanceof Fh){var Kt=new Bi(1,0,0,-1,0,Us());X.matrix&&(Kt=Kt.multiply(X.matrix||$n),lt=Vt.call(zt,X.key,X.boundingBox,X.xStep,X.yStep,Kt).id),yt("q"),yt("/Pattern cs"),yt("/"+lt+" scn"),zt.gState&&B.setGState(zt.gState),yt(Ie),yt("Q")}},Gi=function(X){switch(X){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},fr=B.moveTo=function(X,Ie){return yt(ye(Me(X))+" "+ye(Xe(Ie))+" m"),this},Je=B.lineTo=function(X,Ie){return yt(ye(Me(X))+" "+ye(Xe(Ie))+" l"),this},c=B.curveTo=function(X,Ie,lt,zt,Kt,Li){return yt([ye(Me(X)),ye(Xe(Ie)),ye(Me(lt)),ye(Xe(zt)),ye(Me(Kt)),ye(Xe(Li)),"c"].join(" ")),this};B.__private__.line=B.line=function(X,Ie,lt,zt,Kt){if(isNaN(X)||isNaN(Ie)||isNaN(lt)||isNaN(zt)||!St(Kt))throw new Error("Invalid arguments passed to jsPDF.line");return ke===re.COMPAT?this.lines([[lt-X,zt-Ie]],X,Ie,[1,1],Kt||"S"):this.lines([[lt-X,zt-Ie]],X,Ie,[1,1]).stroke()},B.__private__.lines=B.lines=function(X,Ie,lt,zt,Kt,Li){var Xi,Mr,en,mn,En,Mn,ro,lo,ho,Ko,Bo,gn;if(typeof X=="number"&&(gn=lt,lt=Ie,Ie=X,X=gn),zt=zt||[1,1],Li=Li||!1,isNaN(Ie)||isNaN(lt)||!Array.isArray(X)||!Array.isArray(zt)||!St(Kt)||typeof Li!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fr(Ie,lt),Xi=zt[0],Mr=zt[1],mn=X.length,Ko=Ie,Bo=lt,en=0;en<mn;en++)(En=X[en]).length===2?(Ko=En[0]*Xi+Ko,Bo=En[1]*Mr+Bo,Je(Ko,Bo)):(Mn=En[0]*Xi+Ko,ro=En[1]*Mr+Bo,lo=En[2]*Xi+Ko,ho=En[3]*Mr+Bo,Ko=En[4]*Xi+Ko,Bo=En[5]*Mr+Bo,c(Mn,ro,lo,ho,Ko,Bo));return Li&&ai(),ni(Kt),this},B.path=function(X){for(var Ie=0;Ie<X.length;Ie++){var lt=X[Ie],zt=lt.c;switch(lt.op){case"m":fr(zt[0],zt[1]);break;case"l":Je(zt[0],zt[1]);break;case"c":c.apply(this,zt);break;case"h":ai()}}return this},B.__private__.rect=B.rect=function(X,Ie,lt,zt,Kt){if(isNaN(X)||isNaN(Ie)||isNaN(lt)||isNaN(zt)||!St(Kt))throw new Error("Invalid arguments passed to jsPDF.rect");return ke===re.COMPAT&&(zt=-zt),yt([ye(Me(X)),ye(Xe(Ie)),ye(Me(lt)),ye(Me(zt)),"re"].join(" ")),ni(Kt),this},B.__private__.triangle=B.triangle=function(X,Ie,lt,zt,Kt,Li,Xi){if(isNaN(X)||isNaN(Ie)||isNaN(lt)||isNaN(zt)||isNaN(Kt)||isNaN(Li)||!St(Xi))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[lt-X,zt-Ie],[Kt-lt,Li-zt],[X-Kt,Ie-Li]],X,Ie,[1,1],Xi,!0),this},B.__private__.roundedRect=B.roundedRect=function(X,Ie,lt,zt,Kt,Li,Xi){if(isNaN(X)||isNaN(Ie)||isNaN(lt)||isNaN(zt)||isNaN(Kt)||isNaN(Li)||!St(Xi))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Mr=4/3*(Math.SQRT2-1);return Kt=Math.min(Kt,.5*lt),Li=Math.min(Li,.5*zt),this.lines([[lt-2*Kt,0],[Kt*Mr,0,Kt,Li-Li*Mr,Kt,Li],[0,zt-2*Li],[0,Li*Mr,-Kt*Mr,Li,-Kt,Li],[2*Kt-lt,0],[-Kt*Mr,0,-Kt,-Li*Mr,-Kt,-Li],[0,2*Li-zt],[0,-Li*Mr,Kt*Mr,-Li,Kt,-Li]],X+Kt,Ie,[1,1],Xi,!0),this},B.__private__.ellipse=B.ellipse=function(X,Ie,lt,zt,Kt){if(isNaN(X)||isNaN(Ie)||isNaN(lt)||isNaN(zt)||!St(Kt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Li=4/3*(Math.SQRT2-1)*lt,Xi=4/3*(Math.SQRT2-1)*zt;return fr(X+lt,Ie),c(X+lt,Ie-Xi,X+Li,Ie-zt,X,Ie-zt),c(X-Li,Ie-zt,X-lt,Ie-Xi,X-lt,Ie),c(X-lt,Ie+Xi,X-Li,Ie+zt,X,Ie+zt),c(X+Li,Ie+zt,X+lt,Ie+Xi,X+lt,Ie),ni(Kt),this},B.__private__.circle=B.circle=function(X,Ie,lt,zt){if(isNaN(X)||isNaN(Ie)||isNaN(lt)||!St(zt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(X,Ie,lt,lt,zt)},B.setFont=function(X,Ie,lt){return lt&&(Ie=pe(Ie,lt)),je=ds(X,Ie,{disableWarning:!1}),this};var _i=B.__private__.getFont=B.getFont=function(){return xr[ds.apply(B,arguments)]};B.__private__.getFontList=B.getFontList=function(){var X,Ie,lt={};for(X in or)if(or.hasOwnProperty(X))for(Ie in lt[X]=[],or[X])or[X].hasOwnProperty(Ie)&&lt[X].push(Ie);return lt},B.addFont=function(X,Ie,lt,zt,Kt){var Li=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Li.indexOf(arguments[3])!==-1?Kt=arguments[3]:arguments[3]&&Li.indexOf(arguments[3])==-1&&(lt=pe(lt,zt)),Kt=Kt||"Identity-H",pn.call(this,X,Ie,lt,Kt)};var s,A=n.lineWidth||.200025,tr=B.__private__.getLineWidth=B.getLineWidth=function(){return A},zr=B.__private__.setLineWidth=B.setLineWidth=function(X){return A=X,yt(ye(Me(X))+" w"),this};B.__private__.setLineDash=yn.API.setLineDash=yn.API.setLineDashPattern=function(X,Ie){if(X=X||[],Ie=Ie||0,isNaN(Ie)||!Array.isArray(X))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return X=X.map(function(lt){return ye(Me(lt))}).join(" "),Ie=ye(Me(Ie)),yt("["+X+"] "+Ie+" d"),this};var Gn=B.__private__.getLineHeight=B.getLineHeight=function(){return Hi*s};B.__private__.getLineHeight=B.getLineHeight=function(){return Hi*s};var W=B.__private__.setLineHeightFactor=B.setLineHeightFactor=function(X){return typeof(X=X||1.15)=="number"&&(s=X),this},fn=B.__private__.getLineHeightFactor=B.getLineHeightFactor=function(){return s};W(n.lineHeight);var Os=B.__private__.getHorizontalCoordinate=function(X){return Me(X)},fa=B.__private__.getVerticalCoordinate=function(X){return ke===re.ADVANCED?X:Pr[it].mediaBox.topRightY-Pr[it].mediaBox.bottomLeftY-Me(X)},$u=B.__private__.getHorizontalCoordinateString=B.getHorizontalCoordinateString=function(X){return ye(Os(X))},Za=B.__private__.getVerticalCoordinateString=B.getVerticalCoordinateString=function(X){return ye(fa(X))},ps=n.strokeColor||"0 G";B.__private__.getStrokeColor=B.getDrawColor=function(){return wt(ps)},B.__private__.setStrokeColor=B.setDrawColor=function(X,Ie,lt,zt){return ps=De({ch1:X,ch2:Ie,ch3:lt,ch4:zt,pdfColorType:"draw",precision:2}),yt(ps),this};var bu=n.fillColor||"0 g";B.__private__.getFillColor=B.getFillColor=function(){return wt(bu)},B.__private__.setFillColor=B.setFillColor=function(X,Ie,lt,zt){return bu=De({ch1:X,ch2:Ie,ch3:lt,ch4:zt,pdfColorType:"fill",precision:2}),yt(bu),this};var Pl=n.textColor||"0 g",Ac=B.__private__.getTextColor=B.getTextColor=function(){return wt(Pl)};B.__private__.setTextColor=B.setTextColor=function(X,Ie,lt,zt){return Pl=De({ch1:X,ch2:Ie,ch3:lt,ch4:zt,pdfColorType:"text",precision:3}),this};var Ml=n.charSpace,Ec=B.__private__.getCharSpace=B.getCharSpace=function(){return parseFloat(Ml||0)};B.__private__.setCharSpace=B.setCharSpace=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ml=X,this};var $l=0;B.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},B.__private__.setLineCap=B.setLineCap=function(X){var Ie=B.CapJoinStyles[X];if(Ie===void 0)throw new Error("Line cap style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $l=Ie,yt(Ie+" J"),this};var Dl=0;B.__private__.setLineJoin=B.setLineJoin=function(X){var Ie=B.CapJoinStyles[X];if(Ie===void 0)throw new Error("Line join style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=Ie,yt(Ie+" j"),this},B.__private__.setLineMiterLimit=B.__private__.setMiterLimit=B.setLineMiterLimit=B.setMiterLimit=function(X){if(X=X||0,isNaN(X))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return yt(ye(Me(X))+" M"),this},B.GState=ip,B.setGState=function(X){(X=typeof X=="string"?Zr[Pn[X]]:zl(null,X)).equals(Vr)||(yt("/"+X.id+" gs"),Vr=X)};var zl=function(X,Ie){if(!X||!Pn[X]){var lt=!1;for(var zt in Zr)if(Zr.hasOwnProperty(zt)&&Zr[zt].equals(Ie)){lt=!0;break}if(lt)Ie=Zr[zt];else{var Kt="GS"+(Object.keys(Zr).length+1).toString(10);Zr[Kt]=Ie,Ie.id=Kt}return X&&(Pn[X]=Ie.id),_n.publish("addGState",Ie),Ie}};B.addGState=function(X,Ie){return zl(X,Ie),this},B.saveGraphicsState=function(){return yt("q"),Ei.push({key:je,size:Hi,color:Pl}),this},B.restoreGraphicsState=function(){yt("Q");var X=Ei.pop();return je=X.key,Hi=X.size,Pl=X.color,Vr=null,this},B.setCurrentTransformationMatrix=function(X){return yt(X.toString()+" cm"),this},B.comment=function(X){return yt("#"+X),this};var cl=function(X,Ie){var lt=X||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return lt},set:function(Li){isNaN(Li)||(lt=parseFloat(Li))}});var zt=Ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return zt},set:function(Li){isNaN(Li)||(zt=parseFloat(Li))}});var Kt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Kt},set:function(Li){Kt=Li.toString()}}),this},Nl=function(X,Ie,lt,zt){cl.call(this,X,Ie),this.type="rect";var Kt=lt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Kt},set:function(Xi){isNaN(Xi)||(Kt=parseFloat(Xi))}});var Li=zt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Li},set:function(Xi){isNaN(Xi)||(Li=parseFloat(Xi))}}),this},br=function(){this.page=vn,this.currentPage=it,this.pages=ri.slice(0),this.pagesContext=Pr.slice(0),this.x=mt,this.y=Jt,this.matrix=hr,this.width=js(it),this.height=Us(it),this.outputDestination=Di,this.id="",this.objectNumber=-1};br.prototype.restore=function(){vn=this.page,it=this.currentPage,Pr=this.pagesContext,ri=this.pages,mt=this.x,Jt=this.y,hr=this.matrix,hl(it,this.width),Hn(it,this.height),Di=this.outputDestination};var yr=function(X,Ie,lt,zt,Kt){Un.push(new br),vn=it=0,ri=[],mt=X,Jt=Ie,hr=Kt,fs([lt,zt])},eu=function(X){if(Qr[X])Un.pop().restore();else{var Ie=new br,lt="Xo"+(Object.keys(Tr).length+1).toString(10);Ie.id=lt,Qr[X]=lt,Tr[lt]=Ie,_n.publish("addFormObject",Ie),Un.pop().restore()}};for(var da in B.beginFormObject=function(X,Ie,lt,zt,Kt){return yr(X,Ie,lt,zt,Kt),this},B.endFormObject=function(X){return eu(X),this},B.doFormObject=function(X,Ie){var lt=Tr[Qr[X]];return yt("q"),yt(Ie.toString()+" cm"),yt("/"+lt.id+" Do"),yt("Q"),this},B.getFormObject=function(X){var Ie=Tr[Qr[X]];return{x:Ie.x,y:Ie.y,width:Ie.width,height:Ie.height,matrix:Ie.matrix}},B.save=function(X,Ie){return X=X||"generated.pdf",(Ie=Ie||{}).returnPromise=Ie.returnPromise||!1,Ie.returnPromise===!1?(V0(Rs(Bs()),X),typeof V0.unload=="function"&&wn.setTimeout&&setTimeout(V0.unload,911),this):new Promise(function(lt,zt){try{var Kt=V0(Rs(Bs()),X);typeof V0.unload=="function"&&wn.setTimeout&&setTimeout(V0.unload,911),lt(Kt)}catch(Li){zt(Li.message)}})},yn.API)yn.API.hasOwnProperty(da)&&(da==="events"&&yn.API.events.length?function(X,Ie){var lt,zt,Kt;for(Kt=Ie.length-1;Kt!==-1;Kt--)lt=Ie[Kt][0],zt=Ie[Kt][1],X.subscribe.apply(X,[lt].concat(typeof zt=="function"?[zt]:zt))}(_n,yn.API.events):B[da]=yn.API[da]);var js=B.getPageWidth=function(X){return(Pr[X=X||it].mediaBox.topRightX-Pr[X].mediaBox.bottomLeftX)/ot},hl=B.setPageWidth=function(X,Ie){Pr[X].mediaBox.topRightX=Ie*ot+Pr[X].mediaBox.bottomLeftX},Us=B.getPageHeight=function(X){return(Pr[X=X||it].mediaBox.topRightY-Pr[X].mediaBox.bottomLeftY)/ot},Hn=B.setPageHeight=function(X,Ie){Pr[X].mediaBox.topRightY=Ie*ot+Pr[X].mediaBox.bottomLeftY};return B.internal={pdfEscape:Io,getStyle:Et,getFont:_i,getFontSize:Ui,getCharSpace:Ec,getTextColor:Ac,getLineHeight:Gn,getLineHeightFactor:fn,getLineWidth:tr,write:$i,getHorizontalCoordinate:Os,getVerticalCoordinate:fa,getCoordinateString:$u,getVerticalCoordinateString:Za,collections:{},newObject:Xn,newAdditionalObject:Te,newObjectDeferred:de,newObjectDeferredBegin:fe,getFilters:Nt,putStream:Tt,events:_n,scaleFactor:ot,pageSize:{getWidth:function(){return js(it)},setWidth:function(X){hl(it,X)},getHeight:function(){return Us(it)},setHeight:function(X){Hn(it,X)}},encryptionOptions:z,encryption:M,getEncryptor:V,output:Yn,getNumberOfPages:ws,pages:ri,out:yt,f2:nt,f3:Se,getPageInfo:oe,getPageInfoByObjId:ge,getCurrentPageInfo:qe,getPDFVersion:J,Point:cl,Rectangle:Nl,Matrix:Bi,hasHotfix:Ta},Object.defineProperty(B.internal.pageSize,"width",{get:function(){return js(it)},set:function(X){hl(it,X)},enumerable:!0,configurable:!0}),Object.defineProperty(B.internal.pageSize,"height",{get:function(){return Us(it)},set:function(X){Hn(it,X)},enumerable:!0,configurable:!0}),mo.call(B,di),je="F1",Vo(p,o),_n.publish("initialized"),B}Mh.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Mh.prototype.toHexString=function(n){return n.split("").map(function(i){return("0"+(255&i.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Mh.prototype.hexToBytes=function(n){for(var i=[],o=0;o<n.length;o+=2)i.push(String.fromCharCode(parseInt(n.substr(o,2),16)));return i.join("")},Mh.prototype.processOwnerPassword=function(n,i){return _2(v2(i).substr(0,5),n)},Mh.prototype.encryptor=function(n,i){var o=v2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&i,i>>8&255)).substr(0,10);return function(l){return _2(o,l)}},ip.prototype.equals=function(n){var i,o="id,objectNumber,equals";if(!n||xo(n)!==xo(this))return!1;var l=0;for(i in this)if(!(o.indexOf(i)>=0)){if(this.hasOwnProperty(i)&&!n.hasOwnProperty(i)||this[i]!==n[i])return!1;l++}for(i in n)n.hasOwnProperty(i)&&o.indexOf(i)<0&&l--;return l===0},yn.API={events:[]},yn.version="2.5.1";var vs=yn.API,V2=1,nh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ln=function(n){return n.toFixed(2)},c0=function(n){return n.toFixed(5)};vs.__acroform__={};var Cl=function(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n},Yg=function(n){return n*V2},pc=function(n){var i=new c5,o=Xr.internal.getHeight(n)||0,l=Xr.internal.getWidth(n)||0;return i.BBox=[0,0,Number(Ln(l)),Number(Ln(o))],i},Y3=vs.__acroform__.setBit=function(n,i){if(n=n||0,i=i||0,isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<i},J3=vs.__acroform__.clearBit=function(n,i){if(n=n||0,i=i||0,isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<i)},K3=vs.__acroform__.getBit=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<i)==0?0:1},Ss=vs.__acroform__.getBitForPdf=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return K3(n,i-1)},Is=vs.__acroform__.setBitForPdf=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Y3(n,i-1)},Cs=vs.__acroform__.clearBitForPdf=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J3(n,i-1)},Q3=vs.__acroform__.calculateCoordinates=function(n,i){var o=i.internal.getHorizontalCoordinate,l=i.internal.getVerticalCoordinate,p=n[0],m=n[1],b=n[2],h=n[3],E={};return E.lowerLeft_X=o(p)||0,E.lowerLeft_Y=l(m+h)||0,E.upperRight_X=o(p+b)||0,E.upperRight_Y=l(m)||0,[Number(Ln(E.lowerLeft_X)),Number(Ln(E.lowerLeft_Y)),Number(Ln(E.upperRight_X)),Number(Ln(E.upperRight_Y))]},$3=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var i=[],o=n._V||n.DV,l=b2(n,o),p=n.scope.internal.getFont(n.fontName,n.fontStyle).id;i.push("/Tx BMC"),i.push("q"),i.push("BT"),i.push(n.scope.__private__.encodeColorString(n.color)),i.push("/"+p+" "+Ln(l.fontSize)+" Tf"),i.push("1 0 0 1 0 0 Tm"),i.push(l.text),i.push("ET"),i.push("Q"),i.push("EMC");var m=pc(n);return m.scope=n.scope,m.stream=i.join(`
`),m}},b2=function(n,i){var o=n.fontSize===0?n.maxFontSize:n.fontSize,l={text:"",fontSize:""},p=(i=(i=i.substr(0,1)=="("?i.substr(1):i).substr(i.length-1)==")"?i.substr(0,i.length-1):i).split(" ");p=n.multiline?p.map(function(Se){return Se.split(`
`)}):p.map(function(Se){return[Se]});var m=o,b=Xr.internal.getHeight(n)||0;b=b<0?-b:b;var h=Xr.internal.getWidth(n)||0;h=h<0?-h:h;var E=function(Se,Me,Ge){if(Se+1<p.length){var Xe=Me+" "+p[Se+1][0];return Td(Xe,n,Ge).width<=h-4}return!1};m++;e:for(;m>0;){i="",m--;var L,z,U=Td("3",n,m).height,q=n.multiline?b-m:(b-U)/2,B=q+=2,K=0,J=0,se=0;if(m<=0){i=`(...) Tj
`,i+="% Width of Text: "+Td(i,n,m=12).width+", FieldWidth:"+h+`
`;break}for(var ne="",re=0,ke=0;ke<p.length;ke++)if(p.hasOwnProperty(ke)){var Pe=!1;if(p[ke].length!==1&&se!==p[ke].length-1){if((U+2)*(re+2)+2>b)continue e;ne+=p[ke][se],Pe=!0,J=ke,ke--}else{ne=(ne+=p[ke][se]+" ").substr(ne.length-1)==" "?ne.substr(0,ne.length-1):ne;var be=parseInt(ke),pe=E(be,ne,m),ye=ke>=p.length-1;if(pe&&!ye){ne+=" ",se=0;continue}if(pe||ye){if(ye)J=be;else if(n.multiline&&(U+2)*(re+2)+2>b)continue e}else{if(!n.multiline||(U+2)*(re+2)+2>b)continue e;J=be}}for(var me="",tt=K;tt<=J;tt++){var nt=p[tt];if(n.multiline){if(tt===J){me+=nt[se]+" ",se=(se+1)%nt.length;continue}if(tt===K){me+=nt[nt.length-1]+" ";continue}}me+=nt[0]+" "}switch(me=me.substr(me.length-1)==" "?me.substr(0,me.length-1):me,z=Td(me,n,m).width,n.textAlign){case"right":L=h-z-2;break;case"center":L=(h-z)/2;break;case"left":default:L=2}i+=Ln(L)+" "+Ln(B)+` Td
`,i+="("+nh(me)+`) Tj
`,i+=-Ln(L)+` 0 Td
`,B=-(m+2),z=0,K=Pe?J:J+1,re++,ne=""}break}return l.text=i,l.fontSize=m,l},Td=function(n,i,o){var l=i.scope.internal.getFont(i.fontName,i.fontStyle),p=i.scope.getStringUnitWidth(n,{font:l,fontSize:parseFloat(o),charSpace:0})*parseFloat(o);return{height:i.scope.getStringUnitWidth("3",{font:l,fontSize:parseFloat(o),charSpace:0})*parseFloat(o)*1.5,width:p}},ew={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},tw=function(n,i){var o={type:"reference",object:n};i.internal.getPageInfo(n.page).pageContext.annotations.find(function(l){return l.type===o.type&&l.object===o.object})===void 0&&i.internal.getPageInfo(n.page).pageContext.annotations.push(o)},iw=function(n,i){for(var o in n)if(n.hasOwnProperty(o)){var l=o,p=n[o];i.internal.newObjectDeferredBegin(p.objId,!0),xo(p)==="object"&&typeof p.putStream=="function"&&p.putStream(),delete n[l]}},rw=function(n,i){if(i.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ju.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(ew)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");V2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new h5,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(o){o.internal.events.unsubscribe(o.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete o.internal.acroformPlugin.acroFormDictionaryRoot._eventID,o.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(o){o.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var l=o.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var p in l)if(l.hasOwnProperty(p)){var m=l[p];m.objId=void 0,m.hasAnnotation&&tw(m,o)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(o){if(o.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");o.internal.write("/AcroForm "+o.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(o){(function(l,p){var m=!l;for(var b in l||(p.internal.newObjectDeferredBegin(p.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),p.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),l=l||p.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(l.hasOwnProperty(b)){var h=l[b],E=[],L=h.Rect;if(h.Rect&&(h.Rect=Q3(h.Rect,p)),p.internal.newObjectDeferredBegin(h.objId,!0),h.DA=Xr.createDefaultAppearanceStream(h),xo(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(E=h.getKeyValueListForStream()),h.Rect=L,h.hasAppearanceStream&&!h.appearanceStreamContent){var z=$3(h);E.push({key:"AP",value:"<</N "+z+">>"}),p.internal.acroformPlugin.xForms.push(z)}if(h.appearanceStreamContent){var U="";for(var q in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(q)){var B=h.appearanceStreamContent[q];if(U+="/"+q+" ",U+="<<",Object.keys(B).length>=1||Array.isArray(B)){for(var b in B)if(B.hasOwnProperty(b)){var K=B[b];typeof K=="function"&&(K=K.call(p,h)),U+="/"+b+" "+K+" ",p.internal.acroformPlugin.xForms.indexOf(K)>=0||p.internal.acroformPlugin.xForms.push(K)}}else typeof(K=B)=="function"&&(K=K.call(p,h)),U+="/"+b+" "+K,p.internal.acroformPlugin.xForms.indexOf(K)>=0||p.internal.acroformPlugin.xForms.push(K);U+=">>"}E.push({key:"AP",value:`<<
`+U+">>"})}p.internal.putStream({additionalKeyValues:E,objectId:h.objId}),p.internal.out("endobj")}m&&iw(p.internal.acroformPlugin.xForms,p)})(o,n)}),n.internal.acroformPlugin.isInitialized=!0}},u5=vs.__acroform__.arrayToPdfArray=function(n,i,o){var l=function(b){return b};if(Array.isArray(n)){for(var p="[",m=0;m<n.length;m++)switch(m!==0&&(p+=" "),xo(n[m])){case"boolean":case"number":case"object":p+=n[m].toString();break;case"string":n[m].substr(0,1)!=="/"?(i!==void 0&&o&&(l=o.internal.getEncryptor(i)),p+="("+nh(l(n[m].toString()))+")"):p+=n[m].toString()}return p+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},g1=function(n,i,o){var l=function(p){return p};return i!==void 0&&o&&(l=o.internal.getEncryptor(i)),(n=n||"").toString(),n="("+nh(l(n))+")"},_c=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};_c.prototype.toString=function(){return this.objId+" 0 R"},_c.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},_c.prototype.getKeyValueListForStream=function(){var n=[],i=Object.getOwnPropertyNames(this).filter(function(m){return m!="content"&&m!="appearanceStreamContent"&&m!="scope"&&m!="objId"&&m.substring(0,1)!="_"});for(var o in i)if(Object.getOwnPropertyDescriptor(this,i[o]).configurable===!1){var l=i[o],p=this[l];p&&(Array.isArray(p)?n.push({key:l,value:u5(p,this.objId,this.scope)}):p instanceof _c?(p.scope=this.scope,n.push({key:l,value:p.objId+" 0 R"})):typeof p!="function"&&n.push({key:l,value:p}))}return n};var c5=function(){_c.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,i=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(o){n=o.trim()},get:function(){return n||null}})};Cl(c5,_c);var h5=function(){_c.call(this);var n,i=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return i.length>0?i:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return i}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var o=function(l){return l};return this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),"("+nh(o(n))+")"}},set:function(o){n=o}})};Cl(h5,_c);var Ju=function n(){_c.call(this);var i=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return i},set:function(ne){if(isNaN(ne))throw new Error('Invalid value "'+ne+'" for attribute F supplied.');i=ne}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(i,3))},set:function(ne){Boolean(ne)===!0?this.F=Is(i,3):this.F=Cs(i,3)}});var o=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return o},set:function(ne){if(isNaN(ne))throw new Error('Invalid value "'+ne+'" for attribute Ff supplied.');o=ne}});var l=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(l.length!==0)return l},set:function(ne){l=ne!==void 0?ne:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[0])?0:l[0]},set:function(ne){l[0]=ne}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[1])?0:l[1]},set:function(ne){l[1]=ne}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[2])?0:l[2]},set:function(ne){l[2]=ne}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[3])?0:l[3]},set:function(ne){l[3]=ne}});var p="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return p},set:function(ne){switch(ne){case"/Btn":case"/Tx":case"/Ch":case"/Sig":p=ne;break;default:throw new Error('Invalid value "'+ne+'" for attribute FT supplied.')}}});var m=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!m||m.length<1){if(this instanceof rp)return;m="FieldObject"+n.FieldNum++}var ne=function(re){return re};return this.scope&&(ne=this.scope.internal.getEncryptor(this.objId)),"("+nh(ne(m))+")"},set:function(ne){m=ne.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return m},set:function(ne){m=ne}});var b="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return b},set:function(ne){b=ne}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(ne){h=ne}});var E=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return E},set:function(ne){E=ne}});var L=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return L===void 0?50/V2:L},set:function(ne){L=ne}});var z="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return z},set:function(ne){z=ne}});var U="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!U||this instanceof rp||this instanceof X0))return g1(U,this.objId,this.scope)},set:function(ne){ne=ne.toString(),U=ne}});var q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(q)return this instanceof ha?q:g1(q,this.objId,this.scope)},set:function(ne){ne=ne.toString(),q=this instanceof ha?ne:ne.substr(0,1)==="("?kh(ne.substr(1,ne.length-2)):kh(ne)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ha?kh(q.substr(1,q.length-1)):q},set:function(ne){ne=ne.toString(),q=this instanceof ha?"/"+ne:ne}});var B=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(B)return B},set:function(ne){this.V=ne}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof ha?B:g1(B,this.objId,this.scope)},set:function(ne){ne=ne.toString(),B=this instanceof ha?ne:ne.substr(0,1)==="("?kh(ne.substr(1,ne.length-2)):kh(ne)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ha?kh(B.substr(1,B.length-1)):B},set:function(ne){ne=ne.toString(),B=this instanceof ha?"/"+ne:ne}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var K,J=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return J},set:function(ne){ne=Boolean(ne),J=ne}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(K)return K},set:function(ne){K=ne}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,1))},set:function(ne){Boolean(ne)===!0?this.Ff=Is(this.Ff,1):this.Ff=Cs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,2))},set:function(ne){Boolean(ne)===!0?this.Ff=Is(this.Ff,2):this.Ff=Cs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,3))},set:function(ne){Boolean(ne)===!0?this.Ff=Is(this.Ff,3):this.Ff=Cs(this.Ff,3)}});var se=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(se!==null)return se},set:function(ne){if([0,1,2].indexOf(ne)===-1)throw new Error('Invalid value "'+ne+'" for attribute Q supplied.');se=ne}}),Object.defineProperty(this,"textAlign",{get:function(){var ne;switch(se){case 0:default:ne="left";break;case 1:ne="center";break;case 2:ne="right"}return ne},configurable:!0,enumerable:!0,set:function(ne){switch(ne){case"right":case 2:se=2;break;case"center":case 1:se=1;break;case"left":case 0:default:se=0}}})};Cl(Ju,_c);var jh=function(){Ju.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(o){n=o}});var i=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return u5(i,this.objId,this.scope)},set:function(o){var l,p;p=[],typeof(l=o)=="string"&&(p=function(m,b,h){h||(h=1);for(var E,L=[];E=b.exec(m);)L.push(E[h]);return L}(l,/\((.*?)\)/g)),i=p}}),this.getOptions=function(){return i},this.setOptions=function(o){i=o,this.sort&&i.sort()},this.addOption=function(o){o=(o=o||"").toString(),i.push(o),this.sort&&i.sort()},this.removeOption=function(o,l){for(l=l||!1,o=(o=o||"").toString();i.indexOf(o)!==-1&&(i.splice(i.indexOf(o),1),l!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,18))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,18):this.Ff=Cs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,19))},set:function(o){this.combo===!0&&(Boolean(o)===!0?this.Ff=Is(this.Ff,19):this.Ff=Cs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,20))},set:function(o){Boolean(o)===!0?(this.Ff=Is(this.Ff,20),i.sort()):this.Ff=Cs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,22))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,22):this.Ff=Cs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,23))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,27))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,27):this.Ff=Cs(this.Ff,27)}}),this.hasAppearanceStream=!1};Cl(jh,Ju);var Uh=function(){jh.call(this),this.fontName="helvetica",this.combo=!1};Cl(Uh,jh);var qh=function(){Uh.call(this),this.combo=!0};Cl(qh,Uh);var jd=function(){qh.call(this),this.edit=!0};Cl(jd,qh);var ha=function(){Ju.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,15))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,15):this.Ff=Cs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,16))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,16):this.Ff=Cs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,17))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,17):this.Ff=Cs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,26))},set:function(o){Boolean(o)===!0?this.Ff=Is(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(m){return m};if(this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),Object.keys(i).length!==0){var l,p=[];for(l in p.push("<<"),i)p.push("/"+l+" ("+nh(o(i[l]))+")");return p.push(">>"),p.join(`
`)}},set:function(o){xo(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}})};Cl(ha,Ju);var Ud=function(){ha.call(this),this.pushButton=!0};Cl(Ud,ha);var Vh=function(){ha.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i!==void 0?i:[]}})};Cl(Vh,ha);var rp=function(){var n,i;Ju.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(p){n=p}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return i},set:function(p){i=p}});var o,l={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var p=function(h){return h};this.scope&&(p=this.scope.internal.getEncryptor(this.objId));var m,b=[];for(m in b.push("<<"),l)b.push("/"+m+" ("+nh(p(l[m]))+")");return b.push(">>"),b.join(`
`)},set:function(p){xo(p)==="object"&&(l=p)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return l.CA||""},set:function(p){typeof p=="string"&&(l.CA=p)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return o},set:function(p){o=p}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return o.substr(1,o.length-1)},set:function(p){o="/"+p}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Cl(rp,Ju),Vh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var i in this.Kids)if(this.Kids.hasOwnProperty(i)){var o=this.Kids[i];o.appearanceStreamContent=n.createAppearanceStream(o.optionName),o.caption=n.getCA()}},Vh.prototype.createOption=function(n){var i=new rp;return i.Parent=this,i.optionName=n,this.Kids.push(i),nw.call(this.scope,i),i};var qd=function(){ha.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xr.CheckBox.createAppearanceStream()};Cl(qd,ha);var X0=function(){Ju.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,13))},set:function(i){Boolean(i)===!0?this.Ff=Is(this.Ff,13):this.Ff=Cs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,21))},set:function(i){Boolean(i)===!0?this.Ff=Is(this.Ff,21):this.Ff=Cs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,23))},set:function(i){Boolean(i)===!0?this.Ff=Is(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,24))},set:function(i){Boolean(i)===!0?this.Ff=Is(this.Ff,24):this.Ff=Cs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,25))},set:function(i){Boolean(i)===!0?this.Ff=Is(this.Ff,25):this.Ff=Cs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,26))},set:function(i){Boolean(i)===!0?this.Ff=Is(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){Number.isInteger(i)&&(n=i)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Cl(X0,Ju);var Vd=function(){X0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ss(this.Ff,14))},set:function(n){Boolean(n)===!0?this.Ff=Is(this.Ff,14):this.Ff=Cs(this.Ff,14)}}),this.password=!0};Cl(Vd,X0);var Xr={CheckBox:{createAppearanceStream:function(){return{N:{On:Xr.CheckBox.YesNormal},D:{On:Xr.CheckBox.YesPushDown,Off:Xr.CheckBox.OffPushDown}}},YesPushDown:function(n){var i=pc(n);i.scope=n.scope;var o=[],l=n.scope.internal.getFont(n.fontName,n.fontStyle).id,p=n.scope.__private__.encodeColorString(n.color),m=b2(n,n.caption);return o.push("0.749023 g"),o.push("0 0 "+Ln(Xr.internal.getWidth(n))+" "+Ln(Xr.internal.getHeight(n))+" re"),o.push("f"),o.push("BMC"),o.push("q"),o.push("0 0 1 rg"),o.push("/"+l+" "+Ln(m.fontSize)+" Tf "+p),o.push("BT"),o.push(m.text),o.push("ET"),o.push("Q"),o.push("EMC"),i.stream=o.join(`
`),i},YesNormal:function(n){var i=pc(n);i.scope=n.scope;var o=n.scope.internal.getFont(n.fontName,n.fontStyle).id,l=n.scope.__private__.encodeColorString(n.color),p=[],m=Xr.internal.getHeight(n),b=Xr.internal.getWidth(n),h=b2(n,n.caption);return p.push("1 g"),p.push("0 0 "+Ln(b)+" "+Ln(m)+" re"),p.push("f"),p.push("q"),p.push("0 0 1 rg"),p.push("0 0 "+Ln(b-1)+" "+Ln(m-1)+" re"),p.push("W"),p.push("n"),p.push("0 g"),p.push("BT"),p.push("/"+o+" "+Ln(h.fontSize)+" Tf "+l),p.push(h.text),p.push("ET"),p.push("Q"),i.stream=p.join(`
`),i},OffPushDown:function(n){var i=pc(n);i.scope=n.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+Ln(Xr.internal.getWidth(n))+" "+Ln(Xr.internal.getHeight(n))+" re"),o.push("f"),i.stream=o.join(`
`),i}},RadioButton:{Circle:{createAppearanceStream:function(n){var i={D:{Off:Xr.RadioButton.Circle.OffPushDown},N:{}};return i.N[n]=Xr.RadioButton.Circle.YesNormal,i.D[n]=Xr.RadioButton.Circle.YesPushDown,i},getCA:function(){return"l"},YesNormal:function(n){var i=pc(n);i.scope=n.scope;var o=[],l=Xr.internal.getWidth(n)<=Xr.internal.getHeight(n)?Xr.internal.getWidth(n)/4:Xr.internal.getHeight(n)/4;l=Number((.9*l).toFixed(5));var p=Xr.internal.Bezier_C,m=Number((l*p).toFixed(5));return o.push("q"),o.push("1 0 0 1 "+c0(Xr.internal.getWidth(n)/2)+" "+c0(Xr.internal.getHeight(n)/2)+" cm"),o.push(l+" 0 m"),o.push(l+" "+m+" "+m+" "+l+" 0 "+l+" c"),o.push("-"+m+" "+l+" -"+l+" "+m+" -"+l+" 0 c"),o.push("-"+l+" -"+m+" -"+m+" -"+l+" 0 -"+l+" c"),o.push(m+" -"+l+" "+l+" -"+m+" "+l+" 0 c"),o.push("f"),o.push("Q"),i.stream=o.join(`
`),i},YesPushDown:function(n){var i=pc(n);i.scope=n.scope;var o=[],l=Xr.internal.getWidth(n)<=Xr.internal.getHeight(n)?Xr.internal.getWidth(n)/4:Xr.internal.getHeight(n)/4;l=Number((.9*l).toFixed(5));var p=Number((2*l).toFixed(5)),m=Number((p*Xr.internal.Bezier_C).toFixed(5)),b=Number((l*Xr.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+c0(Xr.internal.getWidth(n)/2)+" "+c0(Xr.internal.getHeight(n)/2)+" cm"),o.push(p+" 0 m"),o.push(p+" "+m+" "+m+" "+p+" 0 "+p+" c"),o.push("-"+m+" "+p+" -"+p+" "+m+" -"+p+" 0 c"),o.push("-"+p+" -"+m+" -"+m+" -"+p+" 0 -"+p+" c"),o.push(m+" -"+p+" "+p+" -"+m+" "+p+" 0 c"),o.push("f"),o.push("Q"),o.push("0 g"),o.push("q"),o.push("1 0 0 1 "+c0(Xr.internal.getWidth(n)/2)+" "+c0(Xr.internal.getHeight(n)/2)+" cm"),o.push(l+" 0 m"),o.push(l+" "+b+" "+b+" "+l+" 0 "+l+" c"),o.push("-"+b+" "+l+" -"+l+" "+b+" -"+l+" 0 c"),o.push("-"+l+" -"+b+" -"+b+" -"+l+" 0 -"+l+" c"),o.push(b+" -"+l+" "+l+" -"+b+" "+l+" 0 c"),o.push("f"),o.push("Q"),i.stream=o.join(`
`),i},OffPushDown:function(n){var i=pc(n);i.scope=n.scope;var o=[],l=Xr.internal.getWidth(n)<=Xr.internal.getHeight(n)?Xr.internal.getWidth(n)/4:Xr.internal.getHeight(n)/4;l=Number((.9*l).toFixed(5));var p=Number((2*l).toFixed(5)),m=Number((p*Xr.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+c0(Xr.internal.getWidth(n)/2)+" "+c0(Xr.internal.getHeight(n)/2)+" cm"),o.push(p+" 0 m"),o.push(p+" "+m+" "+m+" "+p+" 0 "+p+" c"),o.push("-"+m+" "+p+" -"+p+" "+m+" -"+p+" 0 c"),o.push("-"+p+" -"+m+" -"+m+" -"+p+" 0 -"+p+" c"),o.push(m+" -"+p+" "+p+" -"+m+" "+p+" 0 c"),o.push("f"),o.push("Q"),i.stream=o.join(`
`),i}},Cross:{createAppearanceStream:function(n){var i={D:{Off:Xr.RadioButton.Cross.OffPushDown},N:{}};return i.N[n]=Xr.RadioButton.Cross.YesNormal,i.D[n]=Xr.RadioButton.Cross.YesPushDown,i},getCA:function(){return"8"},YesNormal:function(n){var i=pc(n);i.scope=n.scope;var o=[],l=Xr.internal.calculateCross(n);return o.push("q"),o.push("1 1 "+Ln(Xr.internal.getWidth(n)-2)+" "+Ln(Xr.internal.getHeight(n)-2)+" re"),o.push("W"),o.push("n"),o.push(Ln(l.x1.x)+" "+Ln(l.x1.y)+" m"),o.push(Ln(l.x2.x)+" "+Ln(l.x2.y)+" l"),o.push(Ln(l.x4.x)+" "+Ln(l.x4.y)+" m"),o.push(Ln(l.x3.x)+" "+Ln(l.x3.y)+" l"),o.push("s"),o.push("Q"),i.stream=o.join(`
`),i},YesPushDown:function(n){var i=pc(n);i.scope=n.scope;var o=Xr.internal.calculateCross(n),l=[];return l.push("0.749023 g"),l.push("0 0 "+Ln(Xr.internal.getWidth(n))+" "+Ln(Xr.internal.getHeight(n))+" re"),l.push("f"),l.push("q"),l.push("1 1 "+Ln(Xr.internal.getWidth(n)-2)+" "+Ln(Xr.internal.getHeight(n)-2)+" re"),l.push("W"),l.push("n"),l.push(Ln(o.x1.x)+" "+Ln(o.x1.y)+" m"),l.push(Ln(o.x2.x)+" "+Ln(o.x2.y)+" l"),l.push(Ln(o.x4.x)+" "+Ln(o.x4.y)+" m"),l.push(Ln(o.x3.x)+" "+Ln(o.x3.y)+" l"),l.push("s"),l.push("Q"),i.stream=l.join(`
`),i},OffPushDown:function(n){var i=pc(n);i.scope=n.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+Ln(Xr.internal.getWidth(n))+" "+Ln(Xr.internal.getHeight(n))+" re"),o.push("f"),i.stream=o.join(`
`),i}}},createDefaultAppearanceStream:function(n){var i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color);return"/"+i+" "+n.fontSize+" Tf "+o}};Xr.internal={Bezier_C:.551915024494,calculateCross:function(n){var i=Xr.internal.getWidth(n),o=Xr.internal.getHeight(n),l=Math.min(i,o);return{x1:{x:(i-l)/2,y:(o-l)/2+l},x2:{x:(i-l)/2+l,y:(o-l)/2},x3:{x:(i-l)/2,y:(o-l)/2},x4:{x:(i-l)/2+l,y:(o-l)/2+l}}}},Xr.internal.getWidth=function(n){var i=0;return xo(n)==="object"&&(i=Yg(n.Rect[2])),i},Xr.internal.getHeight=function(n){var i=0;return xo(n)==="object"&&(i=Yg(n.Rect[3])),i};var nw=vs.addField=function(n){if(rw(this,n),!(n instanceof Ju))throw new Error("Invalid argument passed to jsPDF.addField.");var i;return(i=n).scope.internal.acroformPlugin.printedOut&&(i.scope.internal.acroformPlugin.printedOut=!1,i.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),i.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(i),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};vs.AcroFormChoiceField=jh,vs.AcroFormListBox=Uh,vs.AcroFormComboBox=qh,vs.AcroFormEditBox=jd,vs.AcroFormButton=ha,vs.AcroFormPushButton=Ud,vs.AcroFormRadioButton=Vh,vs.AcroFormCheckBox=qd,vs.AcroFormTextField=X0,vs.AcroFormPasswordField=Vd,vs.AcroFormAppearance=Xr,vs.AcroForm={ChoiceField:jh,ListBox:Uh,ComboBox:qh,EditBox:jd,Button:ha,PushButton:Ud,RadioButton:Vh,CheckBox:qd,TextField:X0,PasswordField:Vd,Appearance:Xr},yn.AcroForm={ChoiceField:jh,ListBox:Uh,ComboBox:qh,EditBox:jd,Button:ha,PushButton:Ud,RadioButton:Vh,CheckBox:qd,TextField:X0,PasswordField:Vd,Appearance:Xr};yn.AcroForm;function f5(n){return n.reduce(function(i,o,l){return i[o]=l,i},{})}(function(n){n.__addimage__={};var i="UNKNOWN",o={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},l=n.__addimage__.getImageFileTypeByImageData=function(Se,Me){var Ge,Xe,_t,pt,Gt,kt=i;if((Me=Me||i)==="RGBA"||Se.data!==void 0&&Se.data instanceof Uint8ClampedArray&&"height"in Se&&"width"in Se)return"RGBA";if(pe(Se))for(Gt in o)for(_t=o[Gt],Ge=0;Ge<_t.length;Ge+=1){for(pt=!0,Xe=0;Xe<_t[Ge].length;Xe+=1)if(_t[Ge][Xe]!==void 0&&_t[Ge][Xe]!==Se[Xe]){pt=!1;break}if(pt===!0){kt=Gt;break}}else for(Gt in o)for(_t=o[Gt],Ge=0;Ge<_t.length;Ge+=1){for(pt=!0,Xe=0;Xe<_t[Ge].length;Xe+=1)if(_t[Ge][Xe]!==void 0&&_t[Ge][Xe]!==Se.charCodeAt(Xe)){pt=!1;break}if(pt===!0){kt=Gt;break}}return kt===i&&Me!==i&&(kt=Me),kt},p=function Se(Me){for(var Ge=this.internal.write,Xe=this.internal.putStream,_t=(0,this.internal.getFilters)();_t.indexOf("FlateEncode")!==-1;)_t.splice(_t.indexOf("FlateEncode"),1);Me.objectId=this.internal.newObject();var pt=[];if(pt.push({key:"Type",value:"/XObject"}),pt.push({key:"Subtype",value:"/Image"}),pt.push({key:"Width",value:Me.width}),pt.push({key:"Height",value:Me.height}),Me.colorSpace===se.INDEXED?pt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Me.palette.length/3-1)+" "+("sMask"in Me&&Me.sMask!==void 0?Me.objectId+2:Me.objectId+1)+" 0 R]"}):(pt.push({key:"ColorSpace",value:"/"+Me.colorSpace}),Me.colorSpace===se.DEVICE_CMYK&&pt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pt.push({key:"BitsPerComponent",value:Me.bitsPerComponent}),"decodeParameters"in Me&&Me.decodeParameters!==void 0&&pt.push({key:"DecodeParms",value:"<<"+Me.decodeParameters+">>"}),"transparency"in Me&&Array.isArray(Me.transparency)){for(var Gt="",kt=0,Xt=Me.transparency.length;kt<Xt;kt++)Gt+=Me.transparency[kt]+" "+Me.transparency[kt]+" ";pt.push({key:"Mask",value:"["+Gt+"]"})}Me.sMask!==void 0&&pt.push({key:"SMask",value:Me.objectId+1+" 0 R"});var Mt=Me.filter!==void 0?["/"+Me.filter]:void 0;if(Xe({data:Me.data,additionalKeyValues:pt,alreadyAppliedFilters:Mt,objectId:Me.objectId}),Ge("endobj"),"sMask"in Me&&Me.sMask!==void 0){var qt="/Predictor "+Me.predictor+" /Colors 1 /BitsPerComponent "+Me.bitsPerComponent+" /Columns "+Me.width,ve={width:Me.width,height:Me.height,colorSpace:"DeviceGray",bitsPerComponent:Me.bitsPerComponent,decodeParameters:qt,data:Me.sMask};"filter"in Me&&(ve.filter=Me.filter),Se.call(this,ve)}if(Me.colorSpace===se.INDEXED){var it=this.internal.newObject();Xe({data:me(new Uint8Array(Me.palette)),objectId:it}),Ge("endobj")}},m=function(){var Se=this.internal.collections.addImage_images;for(var Me in Se)p.call(this,Se[Me])},b=function(){var Se,Me=this.internal.collections.addImage_images,Ge=this.internal.write;for(var Xe in Me)Ge("/I"+(Se=Me[Xe]).index,Se.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",m),this.internal.events.subscribe("putXobjectDict",b))},E=function(){var Se=this.internal.collections.addImage_images;return h.call(this),Se},L=function(){return Object.keys(this.internal.collections.addImage_images).length},z=function(Se){return typeof n["process"+Se.toUpperCase()]=="function"},U=function(Se){return xo(Se)==="object"&&Se.nodeType===1},q=function(Se,Me){if(Se.nodeName==="IMG"&&Se.hasAttribute("src")){var Ge=""+Se.getAttribute("src");if(Ge.indexOf("data:image/")===0)return Tf(unescape(Ge).split("base64,").pop());var Xe=n.loadFile(Ge,!0);if(Xe!==void 0)return Xe}if(Se.nodeName==="CANVAS"){if(Se.width===0||Se.height===0)throw new Error("Given canvas must have data. Canvas width: "+Se.width+", height: "+Se.height);var _t;switch(Me){case"PNG":_t="image/png";break;case"WEBP":_t="image/webp";break;case"JPEG":case"JPG":default:_t="image/jpeg"}return Tf(Se.toDataURL(_t,1).split("base64,").pop())}},B=function(Se){var Me=this.internal.collections.addImage_images;if(Me){for(var Ge in Me)if(Se===Me[Ge].alias)return Me[Ge]}},K=function(Se,Me,Ge){return Se||Me||(Se=-96,Me=-96),Se<0&&(Se=-1*Ge.width*72/Se/this.internal.scaleFactor),Me<0&&(Me=-1*Ge.height*72/Me/this.internal.scaleFactor),Se===0&&(Se=Me*Ge.width/Ge.height),Me===0&&(Me=Se*Ge.height/Ge.width),[Se,Me]},J=function(Se,Me,Ge,Xe,_t,pt){var Gt=K.call(this,Ge,Xe,_t),kt=this.internal.getCoordinateString,Xt=this.internal.getVerticalCoordinateString,Mt=E.call(this);if(Ge=Gt[0],Xe=Gt[1],Mt[_t.index]=_t,pt){pt*=Math.PI/180;var qt=Math.cos(pt),ve=Math.sin(pt),it=function(bt){return bt.toFixed(4)},Re=[it(qt),it(ve),it(-1*ve),it(qt),0,0,"cm"]}this.internal.write("q"),pt?(this.internal.write([1,"0","0",1,kt(Se),Xt(Me+Xe),"cm"].join(" ")),this.internal.write(Re.join(" ")),this.internal.write([kt(Ge),"0","0",kt(Xe),"0","0","cm"].join(" "))):this.internal.write([kt(Ge),"0","0",kt(Xe),kt(Se),Xt(Me+Xe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+_t.index+" Do"),this.internal.write("Q")},se=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ne=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},re=n.__addimage__.sHashCode=function(Se){var Me,Ge,Xe=0;if(typeof Se=="string")for(Ge=Se.length,Me=0;Me<Ge;Me++)Xe=(Xe<<5)-Xe+Se.charCodeAt(Me),Xe|=0;else if(pe(Se))for(Ge=Se.byteLength/2,Me=0;Me<Ge;Me++)Xe=(Xe<<5)-Xe+Se[Me],Xe|=0;return Xe},ke=n.__addimage__.validateStringAsBase64=function(Se){(Se=Se||"").toString().trim();var Me=!0;return Se.length===0&&(Me=!1),Se.length%4!=0&&(Me=!1),/^[A-Za-z0-9+/]+$/.test(Se.substr(0,Se.length-2))===!1&&(Me=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Se.substr(-2))===!1&&(Me=!1),Me},Pe=n.__addimage__.extractImageFromDataUrl=function(Se){var Me=(Se=Se||"").split("base64,"),Ge=null;if(Me.length===2){var Xe=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Me[0]);Array.isArray(Xe)&&(Ge={mimeType:Xe[1],charset:Xe[2],data:Me[1]})}return Ge},be=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(Se){return be()&&Se instanceof ArrayBuffer};var pe=n.__addimage__.isArrayBufferView=function(Se){return be()&&typeof Uint32Array<"u"&&(Se instanceof Int8Array||Se instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Se instanceof Uint8ClampedArray||Se instanceof Int16Array||Se instanceof Uint16Array||Se instanceof Int32Array||Se instanceof Uint32Array||Se instanceof Float32Array||Se instanceof Float64Array)},ye=n.__addimage__.binaryStringToUint8Array=function(Se){for(var Me=Se.length,Ge=new Uint8Array(Me),Xe=0;Xe<Me;Xe++)Ge[Xe]=Se.charCodeAt(Xe);return Ge},me=n.__addimage__.arrayBufferToBinaryString=function(Se){for(var Me="",Ge=pe(Se)?Se:new Uint8Array(Se),Xe=0;Xe<Ge.length;Xe+=8192)Me+=String.fromCharCode.apply(null,Ge.subarray(Xe,Xe+8192));return Me};n.addImage=function(){var Se,Me,Ge,Xe,_t,pt,Gt,kt,Xt;if(typeof arguments[1]=="number"?(Me=i,Ge=arguments[1],Xe=arguments[2],_t=arguments[3],pt=arguments[4],Gt=arguments[5],kt=arguments[6],Xt=arguments[7]):(Me=arguments[1],Ge=arguments[2],Xe=arguments[3],_t=arguments[4],pt=arguments[5],Gt=arguments[6],kt=arguments[7],Xt=arguments[8]),xo(Se=arguments[0])==="object"&&!U(Se)&&"imageData"in Se){var Mt=Se;Se=Mt.imageData,Me=Mt.format||Me||i,Ge=Mt.x||Ge||0,Xe=Mt.y||Xe||0,_t=Mt.w||Mt.width||_t,pt=Mt.h||Mt.height||pt,Gt=Mt.alias||Gt,kt=Mt.compression||kt,Xt=Mt.rotation||Mt.angle||Xt}var qt=this.internal.getFilters();if(kt===void 0&&qt.indexOf("FlateEncode")!==-1&&(kt="SLOW"),isNaN(Ge)||isNaN(Xe))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var ve=tt.call(this,Se,Me,Gt,kt);return J.call(this,Ge,Xe,_t,pt,ve,Xt),this};var tt=function(Se,Me,Ge,Xe){var _t,pt,Gt;if(typeof Se=="string"&&l(Se)===i){Se=unescape(Se);var kt=nt(Se,!1);(kt!==""||(kt=n.loadFile(Se,!0))!==void 0)&&(Se=kt)}if(U(Se)&&(Se=q(Se,Me)),Me=l(Se,Me),!z(Me))throw new Error("addImage does not support files of type '"+Me+"', please ensure that a plugin for '"+Me+"' support is added.");if(((Gt=Ge)==null||Gt.length===0)&&(Ge=function(Xt){return typeof Xt=="string"||pe(Xt)?re(Xt):pe(Xt.data)?re(Xt.data):null}(Se)),(_t=B.call(this,Ge))||(be()&&(Se instanceof Uint8Array||Me==="RGBA"||(pt=Se,Se=ye(Se))),_t=this["process"+Me.toUpperCase()](Se,L.call(this),Ge,function(Xt){return Xt&&typeof Xt=="string"&&(Xt=Xt.toUpperCase()),Xt in n.image_compression?Xt:ne.NONE}(Xe),pt)),!_t)throw new Error("An unknown error occurred whilst processing the image.");return _t},nt=n.__addimage__.convertBase64ToBinaryString=function(Se,Me){var Ge;Me=typeof Me!="boolean"||Me;var Xe,_t="";if(typeof Se=="string"){Xe=(Ge=Pe(Se))!==null?Ge.data:Se;try{_t=Tf(Xe)}catch(pt){if(Me)throw ke(Xe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return _t};n.getImageProperties=function(Se){var Me,Ge,Xe="";if(U(Se)&&(Se=q(Se)),typeof Se=="string"&&l(Se)===i&&((Xe=nt(Se,!1))===""&&(Xe=n.loadFile(Se)||""),Se=Xe),Ge=l(Se),!z(Ge))throw new Error("addImage does not support files of type '"+Ge+"', please ensure that a plugin for '"+Ge+"' support is added.");if(!be()||Se instanceof Uint8Array||(Se=ye(Se)),!(Me=this["process"+Ge.toUpperCase()](Se)))throw new Error("An unknown error occurred whilst processing the image");return Me.fileType=Ge,Me}})(yn.API),function(n){var i=function(o){if(o!==void 0&&o!="")return!0};yn.API.events.push(["addPage",function(o){this.internal.getPageInfo(o.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(o){for(var l,p,m,b=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,E=this.internal.getPageInfoByObjId(o.objId),L=o.pageContext.annotations,z=!1,U=0;U<L.length&&!z;U++)switch((l=L[U]).type){case"link":(i(l.options.url)||i(l.options.pageNumber))&&(z=!0);break;case"reference":case"text":case"freetext":z=!0}if(z!=0){this.internal.write("/Annots [");for(var q=0;q<L.length;q++){l=L[q];var B=this.internal.pdfEscape,K=this.internal.getEncryptor(o.objId);switch(l.type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var J=this.internal.newAdditionalObject(),se=this.internal.newAdditionalObject(),ne=this.internal.getEncryptor(J.objId),re=l.title||"Note";m="<</Type /Annot /Subtype /Text "+(p="/Rect ["+b(l.bounds.x)+" "+h(l.bounds.y+l.bounds.h)+" "+b(l.bounds.x+l.bounds.w)+" "+h(l.bounds.y)+"] ")+"/Contents ("+B(ne(l.contents))+")",m+=" /Popup "+se.objId+" 0 R",m+=" /P "+E.objId+" 0 R",m+=" /T ("+B(ne(re))+") >>",J.content=m;var ke=J.objId+" 0 R";m="<</Type /Annot /Subtype /Popup "+(p="/Rect ["+b(l.bounds.x+30)+" "+h(l.bounds.y+l.bounds.h)+" "+b(l.bounds.x+l.bounds.w+30)+" "+h(l.bounds.y)+"] ")+" /Parent "+ke,l.open&&(m+=" /Open true"),m+=" >>",se.content=m,this.internal.write(J.objId,"0 R",se.objId,"0 R");break;case"freetext":p="/Rect ["+b(l.bounds.x)+" "+h(l.bounds.y)+" "+b(l.bounds.x+l.bounds.w)+" "+h(l.bounds.y+l.bounds.h)+"] ";var Pe=l.color||"#000000";m="<</Type /Annot /Subtype /FreeText "+p+"/Contents ("+B(K(l.contents))+")",m+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Pe+")",m+=" /Border [0 0 0]",m+=" >>",this.internal.write(m);break;case"link":if(l.options.name){var be=this.annotations._nameMap[l.options.name];l.options.pageNumber=be.page,l.options.top=be.y}else l.options.top||(l.options.top=0);if(p="/Rect ["+l.finalBounds.x+" "+l.finalBounds.y+" "+l.finalBounds.w+" "+l.finalBounds.h+"] ",m="",l.options.url)m="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /A <</S /URI /URI ("+B(K(l.options.url))+") >>";else if(l.options.pageNumber)switch(m="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(l.options.pageNumber).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":m+=" /Fit]";break;case"FitH":m+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,m+=" /FitV "+l.options.left+"]";break;case"XYZ":default:var pe=h(l.options.top);l.options.left=l.options.left||0,l.options.zoom===void 0&&(l.options.zoom=0),m+=" /XYZ "+l.options.left+" "+pe+" "+l.options.zoom+"]"}m!=""&&(m+=" >>",this.internal.write(m))}}this.internal.write("]")}}]),n.createAnnotation=function(o){var l=this.internal.getCurrentPageInfo();switch(o.type){case"link":this.link(o.bounds.x,o.bounds.y,o.bounds.w,o.bounds.h,o);break;case"text":case"freetext":l.pageContext.annotations.push(o)}},n.link=function(o,l,p,m,b){var h=this.internal.getCurrentPageInfo(),E=this.internal.getCoordinateString,L=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:E(o),y:L(l),w:E(o+p),h:L(l+m)},options:b,type:"link"})},n.textWithLink=function(o,l,p,m){var b,h,E=this.getTextWidth(o),L=this.internal.getLineHeight()/this.internal.scaleFactor;if(m.maxWidth!==void 0){h=m.maxWidth;var z=this.splitTextToSize(o,h).length;b=Math.ceil(L*z)}else h=E,b=L;return this.text(o,l,p,m),p+=.2*L,m.align==="center"&&(l-=E/2),m.align==="right"&&(l-=E),this.link(l,p-L,h,b,m),E},n.getTextWidth=function(o){var l=this.internal.getFontSize();return this.getStringUnitWidth(o)*l/this.internal.scaleFactor}}(yn.API),function(n){var i={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},o={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},l={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},p=[1570,1571,1573,1575];n.__arabicParser__={};var m=n.__arabicParser__.isInArabicSubstitutionA=function(J){return i[J.charCodeAt(0)]!==void 0},b=n.__arabicParser__.isArabicLetter=function(J){return typeof J=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(J)},h=n.__arabicParser__.isArabicEndLetter=function(J){return b(J)&&m(J)&&i[J.charCodeAt(0)].length<=2},E=n.__arabicParser__.isArabicAlfLetter=function(J){return b(J)&&p.indexOf(J.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(J){return b(J)&&m(J)&&i[J.charCodeAt(0)].length>=1};var L=n.__arabicParser__.arabicLetterHasFinalForm=function(J){return b(J)&&m(J)&&i[J.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(J){return b(J)&&m(J)&&i[J.charCodeAt(0)].length>=3};var z=n.__arabicParser__.arabicLetterHasMedialForm=function(J){return b(J)&&m(J)&&i[J.charCodeAt(0)].length==4},U=n.__arabicParser__.resolveLigatures=function(J){var se=0,ne=o,re="",ke=0;for(se=0;se<J.length;se+=1)ne[J.charCodeAt(se)]!==void 0?(ke++,typeof(ne=ne[J.charCodeAt(se)])=="number"&&(re+=String.fromCharCode(ne),ne=o,ke=0),se===J.length-1&&(ne=o,re+=J.charAt(se-(ke-1)),se-=ke-1,ke=0)):(ne=o,re+=J.charAt(se-ke),se-=ke,ke=0);return re};n.__arabicParser__.isArabicDiacritic=function(J){return J!==void 0&&l[J.charCodeAt(0)]!==void 0};var q=n.__arabicParser__.getCorrectForm=function(J,se,ne){return b(J)?m(J)===!1?-1:!L(J)||!b(se)&&!b(ne)||!b(ne)&&h(se)||h(J)&&!b(se)||h(J)&&E(se)||h(J)&&h(se)?0:z(J)&&b(se)&&!h(se)&&b(ne)&&L(ne)?3:h(J)||!b(ne)?1:2:-1},B=function(J){var se=0,ne=0,re=0,ke="",Pe="",be="",pe=(J=J||"").split("\\s+"),ye=[];for(se=0;se<pe.length;se+=1){for(ye.push(""),ne=0;ne<pe[se].length;ne+=1)ke=pe[se][ne],Pe=pe[se][ne-1],be=pe[se][ne+1],b(ke)?(re=q(ke,Pe,be),ye[se]+=re!==-1?String.fromCharCode(i[ke.charCodeAt(0)][re]):ke):ye[se]+=ke;ye[se]=U(ye[se])}return ye.join(" ")},K=n.__arabicParser__.processArabic=n.processArabic=function(){var J,se=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ne=[];if(Array.isArray(se)){var re=0;for(ne=[],re=0;re<se.length;re+=1)Array.isArray(se[re])?ne.push([B(se[re][0]),se[re][1],se[re][2]]):ne.push([B(se[re])]);J=ne}else J=B(se);return typeof arguments[0]=="string"?J:(arguments[0].text=J,arguments[0])};n.events.push(["preProcessText",K])}(yn.API),yn.API.autoPrint=function(n){var i;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){i=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+i+" 0 R")})}return this},function(n){var i=function(){var o=void 0;Object.defineProperty(this,"pdf",{get:function(){return o},set:function(h){o=h}});var l=150;Object.defineProperty(this,"width",{get:function(){return l},set:function(h){l=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=l+1)}});var p=300;Object.defineProperty(this,"height",{get:function(){return p},set:function(h){p=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=p+1)}});var m=[];Object.defineProperty(this,"childNodes",{get:function(){return m},set:function(h){m=h}});var b={};Object.defineProperty(this,"style",{get:function(){return b},set:function(h){b=h}}),Object.defineProperty(this,"parentNode",{})};i.prototype.getContext=function(o,l){var p;if((o=o||"2d")!=="2d")return null;for(p in l)this.pdf.context2d.hasOwnProperty(p)&&(this.pdf.context2d[p]=l[p]);return this.pdf.context2d._canvas=this,this.pdf.context2d},i.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new i,this.canvas.pdf=this}])}(yn.API),function(n){var i={left:0,top:0,bottom:0,right:0},o=!1,l=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},i),this.internal.__cell__.margins.width=this.getPageWidth(),p.call(this))},p=function(){this.internal.__cell__.lastCell=new m,this.internal.__cell__.pages=1},m=function(){var E=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return E},set:function(J){E=J}});var L=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return L},set:function(J){L=J}});var z=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return z},set:function(J){z=J}});var U=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return U},set:function(J){U=J}});var q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return q},set:function(J){q=J}});var B=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return B},set:function(J){B=J}});var K=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return K},set:function(J){K=J}}),this};m.prototype.clone=function(){return new m(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},m.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(E){return l.call(this),this.internal.__cell__.headerFunction=typeof E=="function"?E:void 0,this},n.getTextDimensions=function(E,L){l.call(this);var z=(L=L||{}).fontSize||this.getFontSize(),U=L.font||this.getFont(),q=L.scaleFactor||this.internal.scaleFactor,B=0,K=0,J=0,se=this;if(!Array.isArray(E)&&typeof E!="string"){if(typeof E!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");E=String(E)}var ne=L.maxWidth;ne>0?typeof E=="string"?E=this.splitTextToSize(E,ne):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(ke,Pe){return ke.concat(se.splitTextToSize(Pe,ne))},[])):E=Array.isArray(E)?E:[E];for(var re=0;re<E.length;re++)B<(J=this.getStringUnitWidth(E[re],{font:U})*z)&&(B=J);return B!==0&&(K=E.length),{w:B/=q,h:Math.max((K*z*this.getLineHeightFactor()-z*(this.getLineHeightFactor()-1))/q,0)}},n.cellAddPage=function(){l.call(this),this.addPage();var E=this.internal.__cell__.margins||i;return this.internal.__cell__.lastCell=new m(E.left,E.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var b=n.cell=function(){var E;E=arguments[0]instanceof m?arguments[0]:new m(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),l.call(this);var L=this.internal.__cell__.lastCell,z=this.internal.__cell__.padding,U=this.internal.__cell__.margins||i,q=this.internal.__cell__.tableHeaderRow,B=this.internal.__cell__.printHeaders;return L.lineNumber!==void 0&&(L.lineNumber===E.lineNumber?(E.x=(L.x||0)+(L.width||0),E.y=L.y||0):L.y+L.height+E.height+U.bottom>this.getPageHeight()?(this.cellAddPage(),E.y=U.top,B&&q&&(this.printHeaderRow(E.lineNumber,!0),E.y+=q[0].height)):E.y=L.y+L.height||E.y),E.text[0]!==void 0&&(this.rect(E.x,E.y,E.width,E.height,o===!0?"FD":void 0),E.align==="right"?this.text(E.text,E.x+E.width-z,E.y+z,{align:"right",baseline:"top"}):E.align==="center"?this.text(E.text,E.x+E.width/2,E.y+z,{align:"center",baseline:"top",maxWidth:E.width-z-z}):this.text(E.text,E.x+z,E.y+z,{align:"left",baseline:"top",maxWidth:E.width-z-z})),this.internal.__cell__.lastCell=E,this};n.table=function(E,L,z,U,q){if(l.call(this),!z)throw new Error("No data for PDF table.");var B,K,J,se,ne=[],re=[],ke=[],Pe={},be={},pe=[],ye=[],me=(q=q||{}).autoSize||!1,tt=q.printHeaders!==!1,nt=q.css&&q.css["font-size"]!==void 0?16*q.css["font-size"]:q.fontSize||12,Se=q.margins||Object.assign({width:this.getPageWidth()},i),Me=typeof q.padding=="number"?q.padding:3,Ge=q.headerBackgroundColor||"#c8c8c8",Xe=q.headerTextColor||"#000";if(p.call(this),this.internal.__cell__.printHeaders=tt,this.internal.__cell__.margins=Se,this.internal.__cell__.table_font_size=nt,this.internal.__cell__.padding=Me,this.internal.__cell__.headerBackgroundColor=Ge,this.internal.__cell__.headerTextColor=Xe,this.setFontSize(nt),U==null)re=ne=Object.keys(z[0]),ke=ne.map(function(){return"left"});else if(Array.isArray(U)&&xo(U[0])==="object")for(ne=U.map(function(Mt){return Mt.name}),re=U.map(function(Mt){return Mt.prompt||Mt.name||""}),ke=U.map(function(Mt){return Mt.align||"left"}),B=0;B<U.length;B+=1)be[U[B].name]=U[B].width*(19.049976/25.4);else Array.isArray(U)&&typeof U[0]=="string"&&(re=ne=U,ke=ne.map(function(){return"left"}));if(me||Array.isArray(U)&&typeof U[0]=="string")for(B=0;B<ne.length;B+=1){for(Pe[se=ne[B]]=z.map(function(Mt){return Mt[se]}),this.setFont(void 0,"bold"),pe.push(this.getTextDimensions(re[B],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),K=Pe[se],this.setFont(void 0,"normal"),J=0;J<K.length;J+=1)pe.push(this.getTextDimensions(K[J],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);be[se]=Math.max.apply(null,pe)+Me+Me,pe=[]}if(tt){var _t={};for(B=0;B<ne.length;B+=1)_t[ne[B]]={},_t[ne[B]].text=re[B],_t[ne[B]].align=ke[B];var pt=h.call(this,_t,be);ye=ne.map(function(Mt){return new m(E,L,be[Mt],pt,_t[Mt].text,void 0,_t[Mt].align)}),this.setTableHeaderRow(ye),this.printHeaderRow(1,!1)}var Gt=U.reduce(function(Mt,qt){return Mt[qt.name]=qt.align,Mt},{});for(B=0;B<z.length;B+=1){"rowStart"in q&&q.rowStart instanceof Function&&q.rowStart({row:B,data:z[B]},this);var kt=h.call(this,z[B],be);for(J=0;J<ne.length;J+=1){var Xt=z[B][ne[J]];"cellStart"in q&&q.cellStart instanceof Function&&q.cellStart({row:B,col:J,data:Xt},this),b.call(this,new m(E,L,be[ne[J]],kt,Xt,B+2,Gt[ne[J]]))}}return this.internal.__cell__.table_x=E,this.internal.__cell__.table_y=L,this};var h=function(E,L){var z=this.internal.__cell__.padding,U=this.internal.__cell__.table_font_size,q=this.internal.scaleFactor;return Object.keys(E).map(function(B){var K=E[B];return this.splitTextToSize(K.hasOwnProperty("text")?K.text:K,L[B]-z-z)},this).map(function(B){return this.getLineHeightFactor()*B.length*U/q+z+z},this).reduce(function(B,K){return Math.max(B,K)},0)};n.setTableHeaderRow=function(E){l.call(this),this.internal.__cell__.tableHeaderRow=E},n.printHeaderRow=function(E,L){if(l.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var z;if(o=!0,typeof this.internal.__cell__.headerFunction=="function"){var U=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new m(U[0],U[1],U[2],U[3],void 0,-1)}this.setFont(void 0,"bold");for(var q=[],B=0;B<this.internal.__cell__.tableHeaderRow.length;B+=1){z=this.internal.__cell__.tableHeaderRow[B].clone(),L&&(z.y=this.internal.__cell__.margins.top||0,q.push(z)),z.lineNumber=E;var K=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),b.call(this,z),this.setTextColor(K)}q.length>0&&this.setTableHeaderRow(q),this.setFont(void 0,"normal"),o=!1}}(yn.API);var d5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],w2=f5(p5),m5=[100,200,300,400,500,600,700,800,900],ow=f5(m5);function x2(n){var i=n.family.replace(/"|'/g,"").toLowerCase(),o=function(m){return d5[m=m||"normal"]?m:"normal"}(n.style),l=function(m){if(!m)return 400;if(typeof m=="number")return m>=100&&m<=900&&m%100==0?m:400;if(/^\d00$/.test(m))return parseInt(m);switch(m){case"bold":return 700;case"normal":default:return 400}}(n.weight),p=function(m){return typeof w2[m=m||"normal"]=="number"?m:"normal"}(n.stretch);return{family:i,style:o,weight:l,stretch:p,src:n.src||[],ref:n.ref||{name:i,style:[p,o,l].join(" ")}}}function Jg(n,i,o,l){var p;for(p=o;p>=0&&p<i.length;p+=l)if(n[i[p]])return n[i[p]];for(p=o;p>=0&&p<i.length;p-=l)if(n[i[p]])return n[i[p]]}var sw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Kg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Qg(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function aw(n,i,o){for(var l=(o=o||{}).defaultFontFamily||"times",p=Object.assign({},sw,o.genericFontFamilies||{}),m=null,b=null,h=0;h<i.length;++h)if(p[(m=x2(i[h])).family]&&(m.family=p[m.family]),n.hasOwnProperty(m.family)){b=n[m.family];break}if(!(b=b||n[l]))throw new Error("Could not find a font-family for the rule '"+Qg(m)+"' and default family '"+l+"'.");if(b=function(E,L){if(L[E])return L[E];var z=w2[E],U=z<=w2.normal?-1:1,q=Jg(L,p5,z,U);if(!q)throw new Error("Could not find a matching font-stretch value for "+E);return q}(m.stretch,b),b=function(E,L){if(L[E])return L[E];for(var z=d5[E],U=0;U<z.length;++U)if(L[z[U]])return L[z[U]];throw new Error("Could not find a matching font-style for "+E)}(m.style,b),!(b=function(E,L){if(L[E])return L[E];if(E===400&&L[500])return L[500];if(E===500&&L[400])return L[400];var z=ow[E],U=Jg(L,m5,z,E<400?-1:1);if(!U)throw new Error("Could not find a matching font-weight for value "+E);return U}(m.weight,b)))throw new Error("Failed to resolve a font for the rule '"+Qg(m)+"'.");return b}function $g(n){return n.trimLeft()}function lw(n,i){for(var o=0;o<n.length;){if(n.charAt(o)===i)return[n.substring(0,o),n.substring(o+1)];o+=1}return null}function uw(n){var i=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return i===null?null:[i[0],n.substring(i[0].length)]}var Ld,ey,ty,y1=["times"];(function(n){var i,o,l,p,m,b,h,E,L,z=function(ve){return ve=ve||{},this.isStrokeTransparent=ve.isStrokeTransparent||!1,this.strokeOpacity=ve.strokeOpacity||1,this.strokeStyle=ve.strokeStyle||"#000000",this.fillStyle=ve.fillStyle||"#000000",this.isFillTransparent=ve.isFillTransparent||!1,this.fillOpacity=ve.fillOpacity||1,this.font=ve.font||"10px sans-serif",this.textBaseline=ve.textBaseline||"alphabetic",this.textAlign=ve.textAlign||"left",this.lineWidth=ve.lineWidth||1,this.lineJoin=ve.lineJoin||"miter",this.lineCap=ve.lineCap||"butt",this.path=ve.path||[],this.transform=ve.transform!==void 0?ve.transform.clone():new E,this.globalCompositeOperation=ve.globalCompositeOperation||"normal",this.globalAlpha=ve.globalAlpha||1,this.clip_path=ve.clip_path||[],this.currentPoint=ve.currentPoint||new b,this.miterLimit=ve.miterLimit||10,this.lastPoint=ve.lastPoint||new b,this.lineDashOffset=ve.lineDashOffset||0,this.lineDash=ve.lineDash||[],this.margin=ve.margin||[0,0,0,0],this.prevPageLastElemOffset=ve.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ve.ignoreClearRect!="boolean"||ve.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new U(this),i=this.internal.f2,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,p=this.internal.getHorizontalCoordinate,m=this.internal.getVerticalCoordinate,b=this.internal.Point,h=this.internal.Rectangle,E=this.internal.Matrix,L=new z}]);var U=function(ve){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var it=ve;Object.defineProperty(this,"pdf",{get:function(){return it}});var Re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Re},set:function(Zt){Re=Boolean(Zt)}});var bt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return bt},set:function(Zt){bt=Boolean(Zt)}});var Ct=0;Object.defineProperty(this,"posX",{get:function(){return Ct},set:function(Zt){isNaN(Zt)||(Ct=Zt)}});var Ot=0;Object.defineProperty(this,"posY",{get:function(){return Ot},set:function(Zt){isNaN(Zt)||(Ot=Zt)}}),Object.defineProperty(this,"margin",{get:function(){return L.margin},set:function(Zt){var yt;typeof Zt=="number"?yt=[Zt,Zt,Zt,Zt]:((yt=new Array(4))[0]=Zt[0],yt[1]=Zt.length>=2?Zt[1]:yt[0],yt[2]=Zt.length>=3?Zt[2]:yt[0],yt[3]=Zt.length>=4?Zt[3]:yt[1]),L.margin=yt}});var Ht=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ht},set:function(Zt){Ht=Zt}});var Wt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Wt},set:function(Zt){Wt=Zt}});var si=[];Object.defineProperty(this,"pageBreaks",{get:function(){return si},set:function(Zt){si=Zt}}),Object.defineProperty(this,"ctx",{get:function(){return L},set:function(Zt){Zt instanceof z&&(L=Zt)}}),Object.defineProperty(this,"path",{get:function(){return L.path},set:function(Zt){L.path=Zt}});var ri=[];Object.defineProperty(this,"ctxStack",{get:function(){return ri},set:function(Zt){ri=Zt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Zt){var yt;yt=q(Zt),this.ctx.fillStyle=yt.style,this.ctx.isFillTransparent=yt.a===0,this.ctx.fillOpacity=yt.a,this.pdf.setFillColor(yt.r,yt.g,yt.b,{a:yt.a}),this.pdf.setTextColor(yt.r,yt.g,yt.b,{a:yt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Zt){var yt=q(Zt);this.ctx.strokeStyle=yt.style,this.ctx.isStrokeTransparent=yt.a===0,this.ctx.strokeOpacity=yt.a,yt.a===0?this.pdf.setDrawColor(255,255,255):(yt.a,this.pdf.setDrawColor(yt.r,yt.g,yt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Zt){["butt","round","square"].indexOf(Zt)!==-1&&(this.ctx.lineCap=Zt,this.pdf.setLineCap(Zt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Zt){isNaN(Zt)||(this.ctx.lineWidth=Zt,this.pdf.setLineWidth(Zt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Zt){["bevel","round","miter"].indexOf(Zt)!==-1&&(this.ctx.lineJoin=Zt,this.pdf.setLineJoin(Zt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Zt){isNaN(Zt)||(this.ctx.miterLimit=Zt,this.pdf.setMiterLimit(Zt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Zt){this.ctx.textBaseline=Zt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Zt){["right","end","center","left","start"].indexOf(Zt)!==-1&&(this.ctx.textAlign=Zt)}});var zi=null;function Di(Zt,yt){if(zi===null){var $i=function(nr){var di=[];return Object.keys(nr).forEach(function(Hi){nr[Hi].forEach(function(Ki){var Ui=null;switch(Ki){case"bold":Ui={family:Hi,weight:"bold"};break;case"italic":Ui={family:Hi,style:"italic"};break;case"bolditalic":Ui={family:Hi,weight:"bold",style:"italic"};break;case"":case"normal":Ui={family:Hi}}Ui!==null&&(Ui.ref={name:Hi,style:Ki},di.push(Ui))})}),di}(Zt.getFontList());zi=function(nr){for(var di={},Hi=0;Hi<nr.length;++Hi){var Ki=x2(nr[Hi]),Ui=Ki.family,Qt=Ki.stretch,lr=Ki.style,pi=Ki.weight;di[Ui]=di[Ui]||{},di[Ui][Qt]=di[Ui][Qt]||{},di[Ui][Qt][lr]=di[Ui][Qt][lr]||{},di[Ui][Qt][lr][pi]=Ki}return di}($i.concat(yt))}return zi}var er=null;Object.defineProperty(this,"fontFaces",{get:function(){return er},set:function(Zt){zi=null,er=Zt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Zt){var yt;if(this.ctx.font=Zt,(yt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Zt))!==null){var $i=yt[1],nr=(yt[2],yt[3]),di=yt[4],Hi=(yt[5],yt[6]),Ki=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(di)[2];di=Math.floor(Ki==="px"?parseFloat(di)*this.pdf.internal.scaleFactor:Ki==="em"?parseFloat(di)*this.pdf.getFontSize():parseFloat(di)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(di);var Ui=function(te){var je,ot,mt=[],Jt=te.trim();if(Jt==="")return y1;if(Jt in Kg)return[Kg[Jt]];for(;Jt!=="";){switch(ot=null,je=(Jt=$g(Jt)).charAt(0)){case'"':case"'":ot=lw(Jt.substring(1),je);break;default:ot=uw(Jt)}if(ot===null||(mt.push(ot[0]),(Jt=$g(ot[1]))!==""&&Jt.charAt(0)!==","))return y1;Jt=Jt.replace(/^,/,"")}return mt}(Hi);if(this.fontFaces){var Qt=aw(Di(this.pdf,this.fontFaces),Ui.map(function(te){return{family:te,stretch:"normal",weight:nr,style:$i}}));this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var lr="";(nr==="bold"||parseInt(nr,10)>=700||$i==="bold")&&(lr="bold"),$i==="italic"&&(lr+="italic"),lr.length===0&&(lr="normal");for(var pi="",Dr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ze=0;ze<Ui.length;ze++){if(this.pdf.internal.getFont(Ui[ze],lr,{noFallback:!0,disableWarning:!0})!==void 0){pi=Ui[ze];break}if(lr==="bolditalic"&&this.pdf.internal.getFont(Ui[ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pi=Ui[ze],lr="bold";else if(this.pdf.internal.getFont(Ui[ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pi=Ui[ze],lr="normal";break}}if(pi===""){for(var Y=0;Y<Ui.length;Y++)if(Dr[Ui[Y]]){pi=Dr[Ui[Y]];break}}pi=pi===""?"Times":pi,this.pdf.setFont(pi,lr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Zt){this.ctx.globalCompositeOperation=Zt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Zt){this.ctx.globalAlpha=Zt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Zt){this.ctx.lineDashOffset=Zt,qt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Zt){this.ctx.lineDash=Zt,qt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Zt){this.ctx.ignoreClearRect=Boolean(Zt)}})};U.prototype.setLineDash=function(ve){this.lineDash=ve},U.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},U.prototype.fill=function(){Pe.call(this,"fill",!1)},U.prototype.stroke=function(){Pe.call(this,"stroke",!1)},U.prototype.beginPath=function(){this.path=[{type:"begin"}]},U.prototype.moveTo=function(ve,it){if(isNaN(ve)||isNaN(it))throw Fo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Re=this.ctx.transform.applyToPoint(new b(ve,it));this.path.push({type:"mt",x:Re.x,y:Re.y}),this.ctx.lastPoint=new b(ve,it)},U.prototype.closePath=function(){var ve=new b(0,0),it=0;for(it=this.path.length-1;it!==-1;it--)if(this.path[it].type==="begin"&&xo(this.path[it+1])==="object"&&typeof this.path[it+1].x=="number"){ve=new b(this.path[it+1].x,this.path[it+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new b(ve.x,ve.y)},U.prototype.lineTo=function(ve,it){if(isNaN(ve)||isNaN(it))throw Fo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Re=this.ctx.transform.applyToPoint(new b(ve,it));this.path.push({type:"lt",x:Re.x,y:Re.y}),this.ctx.lastPoint=new b(Re.x,Re.y)},U.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Pe.call(this,null,!0)},U.prototype.quadraticCurveTo=function(ve,it,Re,bt){if(isNaN(Re)||isNaN(bt)||isNaN(ve)||isNaN(it))throw Fo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ct=this.ctx.transform.applyToPoint(new b(Re,bt)),Ot=this.ctx.transform.applyToPoint(new b(ve,it));this.path.push({type:"qct",x1:Ot.x,y1:Ot.y,x:Ct.x,y:Ct.y}),this.ctx.lastPoint=new b(Ct.x,Ct.y)},U.prototype.bezierCurveTo=function(ve,it,Re,bt,Ct,Ot){if(isNaN(Ct)||isNaN(Ot)||isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt))throw Fo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ht=this.ctx.transform.applyToPoint(new b(Ct,Ot)),Wt=this.ctx.transform.applyToPoint(new b(ve,it)),si=this.ctx.transform.applyToPoint(new b(Re,bt));this.path.push({type:"bct",x1:Wt.x,y1:Wt.y,x2:si.x,y2:si.y,x:Ht.x,y:Ht.y}),this.ctx.lastPoint=new b(Ht.x,Ht.y)},U.prototype.arc=function(ve,it,Re,bt,Ct,Ot){if(isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt)||isNaN(Ct))throw Fo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ot=Boolean(Ot),!this.ctx.transform.isIdentity){var Ht=this.ctx.transform.applyToPoint(new b(ve,it));ve=Ht.x,it=Ht.y;var Wt=this.ctx.transform.applyToPoint(new b(0,Re)),si=this.ctx.transform.applyToPoint(new b(0,0));Re=Math.sqrt(Math.pow(Wt.x-si.x,2)+Math.pow(Wt.y-si.y,2))}Math.abs(Ct-bt)>=2*Math.PI&&(bt=0,Ct=2*Math.PI),this.path.push({type:"arc",x:ve,y:it,radius:Re,startAngle:bt,endAngle:Ct,counterclockwise:Ot})},U.prototype.arcTo=function(ve,it,Re,bt,Ct){throw new Error("arcTo not implemented.")},U.prototype.rect=function(ve,it,Re,bt){if(isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt))throw Fo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ve,it),this.lineTo(ve+Re,it),this.lineTo(ve+Re,it+bt),this.lineTo(ve,it+bt),this.lineTo(ve,it),this.lineTo(ve+Re,it),this.lineTo(ve,it)},U.prototype.fillRect=function(ve,it,Re,bt){if(isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt))throw Fo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!B.call(this)){var Ct={};this.lineCap!=="butt"&&(Ct.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ct.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ve,it,Re,bt),this.fill(),Ct.hasOwnProperty("lineCap")&&(this.lineCap=Ct.lineCap),Ct.hasOwnProperty("lineJoin")&&(this.lineJoin=Ct.lineJoin)}},U.prototype.strokeRect=function(ve,it,Re,bt){if(isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt))throw Fo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");K.call(this)||(this.beginPath(),this.rect(ve,it,Re,bt),this.stroke())},U.prototype.clearRect=function(ve,it,Re,bt){if(isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt))throw Fo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ve,it,Re,bt))},U.prototype.save=function(ve){ve=typeof ve!="boolean"||ve;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,Re=0;Re<this.pdf.internal.getNumberOfPages();Re++)this.pdf.setPage(Re+1),this.pdf.internal.out("q");if(this.pdf.setPage(it),ve){this.ctx.fontSize=this.pdf.internal.getFontSize();var bt=new z(this.ctx);this.ctxStack.push(this.ctx),this.ctx=bt}},U.prototype.restore=function(ve){ve=typeof ve!="boolean"||ve;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,Re=0;Re<this.pdf.internal.getNumberOfPages();Re++)this.pdf.setPage(Re+1),this.pdf.internal.out("Q");this.pdf.setPage(it),ve&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},U.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var q=function(ve){var it,Re,bt,Ct;if(ve.isCanvasGradient===!0&&(ve=ve.getColor()),!ve)return{r:0,g:0,b:0,a:0,style:ve};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ve))it=0,Re=0,bt=0,Ct=0;else{var Ot=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ve);if(Ot!==null)it=parseInt(Ot[1]),Re=parseInt(Ot[2]),bt=parseInt(Ot[3]),Ct=1;else if((Ot=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ve))!==null)it=parseInt(Ot[1]),Re=parseInt(Ot[2]),bt=parseInt(Ot[3]),Ct=parseFloat(Ot[4]);else{if(Ct=1,typeof ve=="string"&&ve.charAt(0)!=="#"){var Ht=new s5(ve);ve=Ht.ok?Ht.toHex():"#000000"}ve.length===4?(it=ve.substring(1,2),it+=it,Re=ve.substring(2,3),Re+=Re,bt=ve.substring(3,4),bt+=bt):(it=ve.substring(1,3),Re=ve.substring(3,5),bt=ve.substring(5,7)),it=parseInt(it,16),Re=parseInt(Re,16),bt=parseInt(bt,16)}}return{r:it,g:Re,b:bt,a:Ct,style:ve}},B=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},K=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};U.prototype.fillText=function(ve,it,Re,bt){if(isNaN(it)||isNaN(Re)||typeof ve!="string")throw Fo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(bt=isNaN(bt)?void 0:bt,!B.call(this)){var Ct=kt(this.ctx.transform.rotation),Ot=this.ctx.transform.scaleX;Me.call(this,{text:ve,x:it,y:Re,scale:Ot,angle:Ct,align:this.textAlign,maxWidth:bt})}},U.prototype.strokeText=function(ve,it,Re,bt){if(isNaN(it)||isNaN(Re)||typeof ve!="string")throw Fo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!K.call(this)){bt=isNaN(bt)?void 0:bt;var Ct=kt(this.ctx.transform.rotation),Ot=this.ctx.transform.scaleX;Me.call(this,{text:ve,x:it,y:Re,scale:Ot,renderingMode:"stroke",angle:Ct,align:this.textAlign,maxWidth:bt})}},U.prototype.measureText=function(ve){if(typeof ve!="string")throw Fo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var it=this.pdf,Re=this.pdf.internal.scaleFactor,bt=it.internal.getFontSize(),Ct=it.getStringUnitWidth(ve)*bt/it.internal.scaleFactor,Ot=function(Ht){var Wt=(Ht=Ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Wt}}),this};return new Ot({width:Ct*=Math.round(96*Re/72*1e4)/1e4})},U.prototype.scale=function(ve,it){if(isNaN(ve)||isNaN(it))throw Fo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Re=new E(ve,0,0,it,0,0);this.ctx.transform=this.ctx.transform.multiply(Re)},U.prototype.rotate=function(ve){if(isNaN(ve))throw Fo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var it=new E(Math.cos(ve),Math.sin(ve),-Math.sin(ve),Math.cos(ve),0,0);this.ctx.transform=this.ctx.transform.multiply(it)},U.prototype.translate=function(ve,it){if(isNaN(ve)||isNaN(it))throw Fo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Re=new E(1,0,0,1,ve,it);this.ctx.transform=this.ctx.transform.multiply(Re)},U.prototype.transform=function(ve,it,Re,bt,Ct,Ot){if(isNaN(ve)||isNaN(it)||isNaN(Re)||isNaN(bt)||isNaN(Ct)||isNaN(Ot))throw Fo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ht=new E(ve,it,Re,bt,Ct,Ot);this.ctx.transform=this.ctx.transform.multiply(Ht)},U.prototype.setTransform=function(ve,it,Re,bt,Ct,Ot){ve=isNaN(ve)?1:ve,it=isNaN(it)?0:it,Re=isNaN(Re)?0:Re,bt=isNaN(bt)?1:bt,Ct=isNaN(Ct)?0:Ct,Ot=isNaN(Ot)?0:Ot,this.ctx.transform=new E(ve,it,Re,bt,Ct,Ot)};var J=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};U.prototype.drawImage=function(ve,it,Re,bt,Ct,Ot,Ht,Wt,si){var ri=this.pdf.getImageProperties(ve),zi=1,Di=1,er=1,Zt=1;bt!==void 0&&Wt!==void 0&&(er=Wt/bt,Zt=si/Ct,zi=ri.width/bt*Wt/bt,Di=ri.height/Ct*si/Ct),Ot===void 0&&(Ot=it,Ht=Re,it=0,Re=0),bt!==void 0&&Wt===void 0&&(Wt=bt,si=Ct),bt===void 0&&Wt===void 0&&(Wt=ri.width,si=ri.height);for(var yt,$i=this.ctx.transform.decompose(),nr=kt($i.rotate.shx),di=new E,Hi=(di=(di=(di=di.multiply($i.translate)).multiply($i.skew)).multiply($i.scale)).applyToRectangle(new h(Ot-it*er,Ht-Re*Zt,bt*zi,Ct*Di)),Ki=se.call(this,Hi),Ui=[],Qt=0;Qt<Ki.length;Qt+=1)Ui.indexOf(Ki[Qt])===-1&&Ui.push(Ki[Qt]);if(ke(Ui),this.autoPaging)for(var lr=Ui[0],pi=Ui[Ui.length-1],Dr=lr;Dr<pi+1;Dr++){this.pdf.setPage(Dr);var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Y=Dr===1?this.posY+this.margin[0]:this.margin[0],te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Dr===1?0:te+(Dr-2)*je;if(this.ctx.clip_path.length!==0){var mt=this.path;yt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=re(yt,this.posX+this.margin[3],-ot+Y+this.ctx.prevPageLastElemOffset),be.call(this,"fill",!0),this.path=mt}var Jt=JSON.parse(JSON.stringify(Hi));Jt=re([Jt],this.posX+this.margin[3],-ot+Y+this.ctx.prevPageLastElemOffset)[0];var hr=(Dr>lr||Dr<pi)&&J.call(this);hr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,je,null).clip().discardPath()),this.pdf.addImage(ve,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,nr),hr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ve,"JPEG",Hi.x,Hi.y,Hi.w,Hi.h,null,null,nr)};var se=function(ve,it,Re){var bt=[];it=it||this.pdf.internal.pageSize.width,Re=Re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ct=this.posY+this.ctx.prevPageLastElemOffset;switch(ve.type){default:case"mt":case"lt":bt.push(Math.floor((ve.y+Ct)/Re)+1);break;case"arc":bt.push(Math.floor((ve.y+Ct-ve.radius)/Re)+1),bt.push(Math.floor((ve.y+Ct+ve.radius)/Re)+1);break;case"qct":var Ot=Xt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ve.x1,ve.y1,ve.x,ve.y);bt.push(Math.floor((Ot.y+Ct)/Re)+1),bt.push(Math.floor((Ot.y+Ot.h+Ct)/Re)+1);break;case"bct":var Ht=Mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ve.x1,ve.y1,ve.x2,ve.y2,ve.x,ve.y);bt.push(Math.floor((Ht.y+Ct)/Re)+1),bt.push(Math.floor((Ht.y+Ht.h+Ct)/Re)+1);break;case"rect":bt.push(Math.floor((ve.y+Ct)/Re)+1),bt.push(Math.floor((ve.y+ve.h+Ct)/Re)+1)}for(var Wt=0;Wt<bt.length;Wt+=1)for(;this.pdf.internal.getNumberOfPages()<bt[Wt];)ne.call(this);return bt},ne=function(){var ve=this.fillStyle,it=this.strokeStyle,Re=this.font,bt=this.lineCap,Ct=this.lineWidth,Ot=this.lineJoin;this.pdf.addPage(),this.fillStyle=ve,this.strokeStyle=it,this.font=Re,this.lineCap=bt,this.lineWidth=Ct,this.lineJoin=Ot},re=function(ve,it,Re){for(var bt=0;bt<ve.length;bt++)switch(ve[bt].type){case"bct":ve[bt].x2+=it,ve[bt].y2+=Re;case"qct":ve[bt].x1+=it,ve[bt].y1+=Re;case"mt":case"lt":case"arc":default:ve[bt].x+=it,ve[bt].y+=Re}return ve},ke=function(ve){return ve.sort(function(it,Re){return it-Re})},Pe=function(ve,it){for(var Re,bt,Ct=this.fillStyle,Ot=this.strokeStyle,Ht=this.lineCap,Wt=this.lineWidth,si=Math.abs(Wt*this.ctx.transform.scaleX),ri=this.lineJoin,zi=JSON.parse(JSON.stringify(this.path)),Di=JSON.parse(JSON.stringify(this.path)),er=[],Zt=0;Zt<Di.length;Zt++)if(Di[Zt].x!==void 0)for(var yt=se.call(this,Di[Zt]),$i=0;$i<yt.length;$i+=1)er.indexOf(yt[$i])===-1&&er.push(yt[$i]);for(var nr=0;nr<er.length;nr++)for(;this.pdf.internal.getNumberOfPages()<er[nr];)ne.call(this);if(ke(er),this.autoPaging)for(var di=er[0],Hi=er[er.length-1],Ki=di;Ki<Hi+1;Ki++){this.pdf.setPage(Ki),this.fillStyle=Ct,this.strokeStyle=Ot,this.lineCap=Ht,this.lineWidth=si,this.lineJoin=ri;var Ui=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qt=Ki===1?this.posY+this.margin[0]:this.margin[0],lr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dr=Ki===1?0:lr+(Ki-2)*pi;if(this.ctx.clip_path.length!==0){var ze=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=re(Re,this.posX+this.margin[3],-Dr+Qt+this.ctx.prevPageLastElemOffset),be.call(this,ve,!0),this.path=ze}if(bt=JSON.parse(JSON.stringify(zi)),this.path=re(bt,this.posX+this.margin[3],-Dr+Qt+this.ctx.prevPageLastElemOffset),it===!1||Ki===0){var Y=(Ki>di||Ki<Hi)&&J.call(this);Y&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ui,pi,null).clip().discardPath()),be.call(this,ve,it),Y&&this.pdf.restoreGraphicsState()}this.lineWidth=Wt}else this.lineWidth=si,be.call(this,ve,it),this.lineWidth=Wt;this.path=zi},be=function(ve,it){if((ve!=="stroke"||it||!K.call(this))&&(ve==="stroke"||it||!B.call(this))){for(var Re,bt,Ct=[],Ot=this.path,Ht=0;Ht<Ot.length;Ht++){var Wt=Ot[Ht];switch(Wt.type){case"begin":Ct.push({begin:!0});break;case"close":Ct.push({close:!0});break;case"mt":Ct.push({start:Wt,deltas:[],abs:[]});break;case"lt":var si=Ct.length;if(Ot[Ht-1]&&!isNaN(Ot[Ht-1].x)&&(Re=[Wt.x-Ot[Ht-1].x,Wt.y-Ot[Ht-1].y],si>0)){for(;si>=0;si--)if(Ct[si-1].close!==!0&&Ct[si-1].begin!==!0){Ct[si-1].deltas.push(Re),Ct[si-1].abs.push(Wt);break}}break;case"bct":Re=[Wt.x1-Ot[Ht-1].x,Wt.y1-Ot[Ht-1].y,Wt.x2-Ot[Ht-1].x,Wt.y2-Ot[Ht-1].y,Wt.x-Ot[Ht-1].x,Wt.y-Ot[Ht-1].y],Ct[Ct.length-1].deltas.push(Re);break;case"qct":var ri=Ot[Ht-1].x+2/3*(Wt.x1-Ot[Ht-1].x),zi=Ot[Ht-1].y+2/3*(Wt.y1-Ot[Ht-1].y),Di=Wt.x+2/3*(Wt.x1-Wt.x),er=Wt.y+2/3*(Wt.y1-Wt.y),Zt=Wt.x,yt=Wt.y;Re=[ri-Ot[Ht-1].x,zi-Ot[Ht-1].y,Di-Ot[Ht-1].x,er-Ot[Ht-1].y,Zt-Ot[Ht-1].x,yt-Ot[Ht-1].y],Ct[Ct.length-1].deltas.push(Re);break;case"arc":Ct.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ct[Ct.length-1].abs)&&Ct[Ct.length-1].abs.push(Wt)}}bt=it?null:ve==="stroke"?"stroke":"fill";for(var $i=!1,nr=0;nr<Ct.length;nr++)if(Ct[nr].arc)for(var di=Ct[nr].abs,Hi=0;Hi<di.length;Hi++){var Ki=di[Hi];Ki.type==="arc"?me.call(this,Ki.x,Ki.y,Ki.radius,Ki.startAngle,Ki.endAngle,Ki.counterclockwise,void 0,it,!$i):Ge.call(this,Ki.x,Ki.y),$i=!0}else if(Ct[nr].close===!0)this.pdf.internal.out("h"),$i=!1;else if(Ct[nr].begin!==!0){var Ui=Ct[nr].start.x,Qt=Ct[nr].start.y;Xe.call(this,Ct[nr].deltas,Ui,Qt),$i=!0}bt&&tt.call(this,bt),it&&nt.call(this)}},pe=function(ve){var it=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Re=it*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ve-Re;case"top":return ve+it-Re;case"hanging":return ve+it-2*Re;case"middle":return ve+it/2-Re;case"ideographic":return ve;case"alphabetic":default:return ve}},ye=function(ve){return ve+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};U.prototype.createLinearGradient=function(){var ve=function(){};return ve.colorStops=[],ve.addColorStop=function(it,Re){this.colorStops.push([it,Re])},ve.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ve.isCanvasGradient=!0,ve},U.prototype.createPattern=function(){return this.createLinearGradient()},U.prototype.createRadialGradient=function(){return this.createLinearGradient()};var me=function(ve,it,Re,bt,Ct,Ot,Ht,Wt,si){for(var ri=pt.call(this,Re,bt,Ct,Ot),zi=0;zi<ri.length;zi++){var Di=ri[zi];zi===0&&(si?Se.call(this,Di.x1+ve,Di.y1+it):Ge.call(this,Di.x1+ve,Di.y1+it)),_t.call(this,ve,it,Di.x2,Di.y2,Di.x3,Di.y3,Di.x4,Di.y4)}Wt?nt.call(this):tt.call(this,Ht)},tt=function(ve){switch(ve){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},nt=function(){this.pdf.clip(),this.pdf.discardPath()},Se=function(ve,it){this.pdf.internal.out(o(ve)+" "+l(it)+" m")},Me=function(ve){var it;switch(ve.align){case"right":case"end":it="right";break;case"center":it="center";break;case"left":case"start":default:it="left"}var Re=this.pdf.getTextDimensions(ve.text),bt=pe.call(this,ve.y),Ct=ye.call(this,bt)-Re.h,Ot=this.ctx.transform.applyToPoint(new b(ve.x,bt)),Ht=this.ctx.transform.decompose(),Wt=new E;Wt=(Wt=(Wt=Wt.multiply(Ht.translate)).multiply(Ht.skew)).multiply(Ht.scale);for(var si,ri,zi,Di=this.ctx.transform.applyToRectangle(new h(ve.x,bt,Re.w,Re.h)),er=Wt.applyToRectangle(new h(ve.x,Ct,Re.w,Re.h)),Zt=se.call(this,er),yt=[],$i=0;$i<Zt.length;$i+=1)yt.indexOf(Zt[$i])===-1&&yt.push(Zt[$i]);if(ke(yt),this.autoPaging)for(var nr=yt[0],di=yt[yt.length-1],Hi=nr;Hi<di+1;Hi++){this.pdf.setPage(Hi);var Ki=Hi===1?this.posY+this.margin[0]:this.margin[0],Ui=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[2],lr=Qt-this.margin[0],pi=this.pdf.internal.pageSize.width-this.margin[1],Dr=pi-this.margin[3],ze=Hi===1?0:Ui+(Hi-2)*lr;if(this.ctx.clip_path.length!==0){var Y=this.path;si=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=re(si,this.posX+this.margin[3],-1*ze+Ki),be.call(this,"fill",!0),this.path=Y}var te=re([JSON.parse(JSON.stringify(er))],this.posX+this.margin[3],-ze+Ki+this.ctx.prevPageLastElemOffset)[0];ve.scale>=.01&&(ri=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ri*ve.scale),zi=this.lineWidth,this.lineWidth=zi*ve.scale);var je=this.autoPaging!=="text";if(je||te.y+te.h<=Qt){if(je||te.y>=Ki&&te.x<=pi){var ot=je?ve.text:this.pdf.splitTextToSize(ve.text,ve.maxWidth||pi-te.x)[0],mt=re([JSON.parse(JSON.stringify(Di))],this.posX+this.margin[3],-ze+Ki+this.ctx.prevPageLastElemOffset)[0],Jt=je&&(Hi>nr||Hi<di)&&J.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dr,lr,null).clip().discardPath()),this.pdf.text(ot,mt.x,mt.y,{angle:ve.angle,align:it,renderingMode:ve.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else te.y<Qt&&(this.ctx.prevPageLastElemOffset+=Qt-te.y);ve.scale>=.01&&(this.pdf.setFontSize(ri),this.lineWidth=zi)}else ve.scale>=.01&&(ri=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ri*ve.scale),zi=this.lineWidth,this.lineWidth=zi*ve.scale),this.pdf.text(ve.text,Ot.x+this.posX,Ot.y+this.posY,{angle:ve.angle,align:it,renderingMode:ve.renderingMode,maxWidth:ve.maxWidth}),ve.scale>=.01&&(this.pdf.setFontSize(ri),this.lineWidth=zi)},Ge=function(ve,it,Re,bt){Re=Re||0,bt=bt||0,this.pdf.internal.out(o(ve+Re)+" "+l(it+bt)+" l")},Xe=function(ve,it,Re){return this.pdf.lines(ve,it,Re,null,null)},_t=function(ve,it,Re,bt,Ct,Ot,Ht,Wt){this.pdf.internal.out([i(p(Re+ve)),i(m(bt+it)),i(p(Ct+ve)),i(m(Ot+it)),i(p(Ht+ve)),i(m(Wt+it)),"c"].join(" "))},pt=function(ve,it,Re,bt){for(var Ct=2*Math.PI,Ot=Math.PI/2;it>Re;)it-=Ct;var Ht=Math.abs(Re-it);Ht<Ct&&bt&&(Ht=Ct-Ht);for(var Wt=[],si=bt?-1:1,ri=it;Ht>1e-5;){var zi=ri+si*Math.min(Ht,Ot);Wt.push(Gt.call(this,ve,ri,zi)),Ht-=Math.abs(zi-ri),ri=zi}return Wt},Gt=function(ve,it,Re){var bt=(Re-it)/2,Ct=ve*Math.cos(bt),Ot=ve*Math.sin(bt),Ht=Ct,Wt=-Ot,si=Ht*Ht+Wt*Wt,ri=si+Ht*Ct+Wt*Ot,zi=4/3*(Math.sqrt(2*si*ri)-ri)/(Ht*Ot-Wt*Ct),Di=Ht-zi*Wt,er=Wt+zi*Ht,Zt=Di,yt=-er,$i=bt+it,nr=Math.cos($i),di=Math.sin($i);return{x1:ve*Math.cos(it),y1:ve*Math.sin(it),x2:Di*nr-er*di,y2:Di*di+er*nr,x3:Zt*nr-yt*di,y3:Zt*di+yt*nr,x4:ve*Math.cos(Re),y4:ve*Math.sin(Re)}},kt=function(ve){return 180*ve/Math.PI},Xt=function(ve,it,Re,bt,Ct,Ot){var Ht=ve+.5*(Re-ve),Wt=it+.5*(bt-it),si=Ct+.5*(Re-Ct),ri=Ot+.5*(bt-Ot),zi=Math.min(ve,Ct,Ht,si),Di=Math.max(ve,Ct,Ht,si),er=Math.min(it,Ot,Wt,ri),Zt=Math.max(it,Ot,Wt,ri);return new h(zi,er,Di-zi,Zt-er)},Mt=function(ve,it,Re,bt,Ct,Ot,Ht,Wt){var si,ri,zi,Di,er,Zt,yt,$i,nr,di,Hi,Ki,Ui,Qt,lr=Re-ve,pi=bt-it,Dr=Ct-Re,ze=Ot-bt,Y=Ht-Ct,te=Wt-Ot;for(ri=0;ri<41;ri++)nr=(yt=(zi=ve+(si=ri/40)*lr)+si*((er=Re+si*Dr)-zi))+si*(er+si*(Ct+si*Y-er)-yt),di=($i=(Di=it+si*pi)+si*((Zt=bt+si*ze)-Di))+si*(Zt+si*(Ot+si*te-Zt)-$i),ri==0?(Hi=nr,Ki=di,Ui=nr,Qt=di):(Hi=Math.min(Hi,nr),Ki=Math.min(Ki,di),Ui=Math.max(Ui,nr),Qt=Math.max(Qt,di));return new h(Math.round(Hi),Math.round(Ki),Math.round(Ui-Hi),Math.round(Qt-Ki))},qt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ve,it,Re=(ve=this.ctx.lineDash,it=this.ctx.lineDashOffset,JSON.stringify({lineDash:ve,lineDashOffset:it}));this.prevLineDash!==Re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Re)}}})(yn.API),function(n){var i=function(m){var b,h,E,L,z,U,q,B,K,J;for(/[^\x00-\xFF]/.test(m),h=[],E=0,L=(m+=b="\0\0\0\0".slice(m.length%4||4)).length;L>E;E+=4)(z=(m.charCodeAt(E)<<24)+(m.charCodeAt(E+1)<<16)+(m.charCodeAt(E+2)<<8)+m.charCodeAt(E+3))!==0?(U=(z=((z=((z=((z=(z-(J=z%85))/85)-(K=z%85))/85)-(B=z%85))/85)-(q=z%85))/85)%85,h.push(U+33,q+33,B+33,K+33,J+33)):h.push(122);return function(se,ne){for(var re=ne;re>0;re--)se.pop()}(h,b.length),String.fromCharCode.apply(String,h)+"~>"},o=function(m){var b,h,E,L,z,U=String,q="length",B=255,K="charCodeAt",J="slice",se="replace";for(m[J](-2),m=m[J](0,-2)[se](/\s/g,"")[se]("z","!!!!!"),E=[],L=0,z=(m+=b="uuuuu"[J](m[q]%5||5))[q];z>L;L+=5)h=52200625*(m[K](L)-33)+614125*(m[K](L+1)-33)+7225*(m[K](L+2)-33)+85*(m[K](L+3)-33)+(m[K](L+4)-33),E.push(B&h>>24,B&h>>16,B&h>>8,B&h);return function(ne,re){for(var ke=re;ke>0;ke--)ne.pop()}(E,b[q]),U.fromCharCode.apply(U,E)},l=function(m){var b=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((m=m.replace(/\s/g,"")).indexOf(">")!==-1&&(m=m.substr(0,m.indexOf(">"))),m.length%2&&(m+="0"),b.test(m)===!1)return"";for(var h="",E=0;E<m.length;E+=2)h+=String.fromCharCode("0x"+(m[E]+m[E+1]));return h},p=function(m){for(var b=new Uint8Array(m.length),h=m.length;h--;)b[h]=m.charCodeAt(h);return m=(b=g2(b)).reduce(function(E,L){return E+String.fromCharCode(L)},"")};n.processDataByFilters=function(m,b){var h=0,E=m||"",L=[];for(typeof(b=b||[])=="string"&&(b=[b]),h=0;h<b.length;h+=1)switch(b[h]){case"ASCII85Decode":case"/ASCII85Decode":E=o(E),L.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":E=i(E),L.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":E=l(E),L.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":E=E.split("").map(function(z){return("0"+z.charCodeAt().toString(16)).slice(-2)}).join("")+">",L.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":E=p(E),L.push("/FlateDecode");break;default:throw new Error('The filter: "'+b[h]+'" is not implemented')}return{data:E,reverseChain:L.reverse().join(" ")}}}(yn.API),function(n){n.loadFile=function(i,o,l){return function(p,m,b){m=m!==!1,b=typeof b=="function"?b:function(){};var h=void 0;try{h=function(E,L,z){var U=new XMLHttpRequest,q=0,B=function(K){var J=K.length,se=[],ne=String.fromCharCode;for(q=0;q<J;q+=1)se.push(ne(255&K.charCodeAt(q)));return se.join("")};if(U.open("GET",E,!L),U.overrideMimeType("text/plain; charset=x-user-defined"),L===!1&&(U.onload=function(){U.status===200?z(B(this.responseText)):z(void 0)}),U.send(null),L&&U.status===200)return B(U.responseText)}(p,m,b)}catch{}return h}(i,o,l)},n.loadImageFile=n.loadFile}(yn.API),function(n){function i(){return(wn.html2canvas?Promise.resolve(wn.html2canvas):tp(()=>import("./html2canvas.esm-fb42d204.js"),[],import.meta.url)).catch(function(b){return Promise.reject(new Error("Could not load html2canvas: "+b))}).then(function(b){return b.default?b.default:b})}function o(){return(wn.DOMPurify?Promise.resolve(wn.DOMPurify):tp(()=>import("./purify.es-20117e50.js"),[],import.meta.url)).catch(function(b){return Promise.reject(new Error("Could not load dompurify: "+b))}).then(function(b){return b.default?b.default:b})}var l=function(b){var h=xo(b);return h==="undefined"?"undefined":h==="string"||b instanceof String?"string":h==="number"||b instanceof Number?"number":h==="function"||b instanceof Function?"function":b&&b.constructor===Array?"array":b&&b.nodeType===1?"element":h==="object"?"object":"unknown"},p=function(b,h){var E=document.createElement(b);for(var L in h.className&&(E.className=h.className),h.innerHTML&&h.dompurify&&(E.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)E.style[L]=h.style[L];return E},m=function b(h){var E=Object.assign(b.convert(Promise.resolve()),JSON.parse(JSON.stringify(b.template))),L=b.convert(Promise.resolve(),E);return L=(L=L.setProgress(1,b,1,[b])).set(h)};(m.prototype=Object.create(Promise.prototype)).constructor=m,m.convert=function(b,h){return b.__proto__=h||m.prototype,b},m.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},m.prototype.from=function(b,h){return this.then(function(){switch(h=h||function(E){switch(l(E)){case"string":return"string";case"element":return E.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(b)){case"string":return this.then(o).then(function(E){return this.set({src:p("div",{innerHTML:b,dompurify:E})})});case"element":return this.set({src:b});case"canvas":return this.set({canvas:b});case"img":return this.set({img:b});default:return this.error("Unknown source type.")}})},m.prototype.to=function(b){switch(b){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},m.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var b={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=function E(L,z){for(var U=L.nodeType===3?document.createTextNode(L.nodeValue):L.cloneNode(!1),q=L.firstChild;q;q=q.nextSibling)z!==!0&&q.nodeType===1&&q.nodeName==="SCRIPT"||U.appendChild(E(q,z));return L.nodeType===1&&(L.nodeName==="CANVAS"?(U.width=L.width,U.height=L.height,U.getContext("2d").drawImage(L,0,0)):L.nodeName!=="TEXTAREA"&&L.nodeName!=="SELECT"||(U.value=L.value),U.addEventListener("load",function(){U.scrollTop=L.scrollTop,U.scrollLeft=L.scrollLeft},!0)),U}(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(b.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=p("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=p("div",{className:"html2pdf__container",style:b}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(p("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},m.prototype.toCanvas=function(){var b=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(b).then(i).then(function(h){var E=Object.assign({},this.opt.html2canvas);return delete E.onrendered,h(this.prop.container,E)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},m.prototype.toContext2d=function(){var b=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(b).then(i).then(function(h){var E=this.opt.jsPDF,L=this.opt.fontFaces,z=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,U=Object.assign({async:!0,allowTaint:!0,scale:z,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete U.onrendered,E.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,E.context2d.posX=this.opt.x,E.context2d.posY=this.opt.y,E.context2d.margin=this.opt.margin,E.context2d.fontFaces=L,L)for(var q=0;q<L.length;++q){var B=L[q],K=B.src.find(function(J){return J.format==="truetype"});K&&E.addFont(K.url,B.ref.name,B.ref.style)}return U.windowHeight=U.windowHeight||0,U.windowHeight=U.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):U.windowHeight,E.context2d.save(!0),h(this.prop.container,U)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},m.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var b=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=b})},m.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},m.prototype.output=function(b,h,E){return(E=E||"pdf").toLowerCase()==="img"||E.toLowerCase()==="image"?this.outputImg(b,h):this.outputPdf(b,h)},m.prototype.outputPdf=function(b,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(b,h)})},m.prototype.outputImg=function(b){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(b){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+b+'" is not supported.'}})},m.prototype.save=function(b){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(b?{filename:b}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},m.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},m.prototype.set=function(b){if(l(b)!=="object")return this;var h=Object.keys(b||{}).map(function(E){if(E in m.template.prop)return function(){this.prop[E]=b[E]};switch(E){case"margin":return this.setMargin.bind(this,b.margin);case"jsPDF":return function(){return this.opt.jsPDF=b.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,b.pageSize);default:return function(){this.opt[E]=b[E]}}},this);return this.then(function(){return this.thenList(h)})},m.prototype.get=function(b,h){return this.then(function(){var E=b in m.template.prop?this.prop[b]:this.opt[b];return h?h(E):E})},m.prototype.setMargin=function(b){return this.then(function(){switch(l(b)){case"number":b=[b,b,b,b];case"array":if(b.length===2&&(b=[b[0],b[1],b[0],b[1]]),b.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=b}).then(this.setPageSize)},m.prototype.setPageSize=function(b){function h(E,L){return Math.floor(E*L/72*96)}return this.then(function(){(b=b||yn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(b.inner={width:b.width-this.opt.margin[1]-this.opt.margin[3],height:b.height-this.opt.margin[0]-this.opt.margin[2]},b.inner.px={width:h(b.inner.width,b.k),height:h(b.inner.height,b.k)},b.inner.ratio=b.inner.height/b.inner.width),this.prop.pageSize=b})},m.prototype.setProgress=function(b,h,E,L){return b!=null&&(this.progress.val=b),h!=null&&(this.progress.state=h),E!=null&&(this.progress.n=E),L!=null&&(this.progress.stack=L),this.progress.ratio=this.progress.val/this.progress.state,this},m.prototype.updateProgress=function(b,h,E,L){return this.setProgress(b?this.progress.val+b:null,h||null,E?this.progress.n+E:null,L?this.progress.stack.concat(L):null)},m.prototype.then=function(b,h){var E=this;return this.thenCore(b,h,function(L,z){return E.updateProgress(null,null,1,[L]),Promise.prototype.then.call(this,function(U){return E.updateProgress(null,L),U}).then(L,z).then(function(U){return E.updateProgress(1),U})})},m.prototype.thenCore=function(b,h,E){E=E||Promise.prototype.then,b&&(b=b.bind(this)),h&&(h=h.bind(this));var L=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:m.convert(Object.assign({},this),Promise.prototype),z=E.call(L,b,h);return m.convert(z,this.__proto__)},m.prototype.thenExternal=function(b,h){return Promise.prototype.then.call(this,b,h)},m.prototype.thenList=function(b){var h=this;return b.forEach(function(E){h=h.thenCore(E)}),h},m.prototype.catch=function(b){b&&(b=b.bind(this));var h=Promise.prototype.catch.call(this,b);return m.convert(h,this)},m.prototype.catchExternal=function(b){return Promise.prototype.catch.call(this,b)},m.prototype.error=function(b){return this.then(function(){throw new Error(b)})},m.prototype.using=m.prototype.set,m.prototype.saveAs=m.prototype.save,m.prototype.export=m.prototype.output,m.prototype.run=m.prototype.then,yn.getPageSize=function(b,h,E){if(xo(b)==="object"){var L=b;b=L.orientation,h=L.unit||h,E=L.format||E}h=h||"mm",E=E||"a4",b=(""+(b||"P")).toLowerCase();var z,U=(""+E).toLowerCase(),q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":z=1;break;case"mm":z=72/25.4;break;case"cm":z=72/2.54;break;case"in":z=72;break;case"px":z=.75;break;case"pc":case"em":z=12;break;case"ex":z=6;break;default:throw"Invalid unit: "+h}var B,K=0,J=0;if(q.hasOwnProperty(U))K=q[U][1]/z,J=q[U][0]/z;else try{K=E[1],J=E[0]}catch{throw new Error("Invalid format: "+E)}if(b==="p"||b==="portrait")b="p",J>K&&(B=J,J=K,K=B);else{if(b!=="l"&&b!=="landscape")throw"Invalid orientation: "+b;b="l",K>J&&(B=J,J=K,K=B)}return{width:J,height:K,unit:h,k:z,orientation:b}},n.html=function(b,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(x2):null;var E=new m(h);return h.worker?E:E.from(b).doCallback()}}(yn.API),yn.API.addJS=function(n){return ty=n,this.internal.events.subscribe("postPutResources",function(){Ld=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ld+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ey=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ty+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ld!==void 0&&ey!==void 0&&this.internal.out("/Names <</JavaScript "+Ld+" 0 R>>")}),this},function(n){var i;n.events.push(["postPutResources",function(){var o=this,l=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var p=o.outline.render().split(/\r\n/),m=0;m<p.length;m++){var b=p[m],h=l.exec(b);if(h!=null){var E=h[1];o.internal.newObjectDeferredBegin(E,!1)}o.internal.write(b)}if(this.outline.createNamedDestinations){var L=this.internal.pages.length,z=[];for(m=0;m<L;m++){var U=o.internal.newObject();z.push(U);var q=o.internal.getPageInfo(m+1);o.internal.write("<< /D["+q.objId+" 0 R /XYZ null null null]>> endobj")}var B=o.internal.newObject();for(o.internal.write("<< /Names [ "),m=0;m<z.length;m++)o.internal.write("(page_"+(m+1)+")"+z[m]+" 0 R");o.internal.write(" ] >>","endobj"),i=o.internal.newObject(),o.internal.write("<< /Dests "+B+" 0 R"),o.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+i+" 0 R"))}]),n.events.push(["initialized",function(){var o=this;o.outline={createNamedDestinations:!1,root:{children:[]}},o.outline.add=function(l,p,m){var b={title:p,options:m,children:[]};return l==null&&(l=this.root),l.children.push(b),b},o.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=o,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},o.outline.genIds_r=function(l){l.id=o.internal.newObjectDeferred();for(var p=0;p<l.children.length;p++)this.genIds_r(l.children[p])},o.outline.renderRoot=function(l){this.objStart(l),this.line("/Type /Outlines"),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1]))),this.line("/Count "+this.count_r({count:0},l)),this.objEnd()},o.outline.renderItems=function(l){for(var p=this.ctx.pdf.internal.getVerticalCoordinateString,m=0;m<l.children.length;m++){var b=l.children[m];this.objStart(b),this.line("/Title "+this.makeString(b.title)),this.line("/Parent "+this.makeRef(l)),m>0&&this.line("/Prev "+this.makeRef(l.children[m-1])),m<l.children.length-1&&this.line("/Next "+this.makeRef(l.children[m+1])),b.children.length>0&&(this.line("/First "+this.makeRef(b.children[0])),this.line("/Last "+this.makeRef(b.children[b.children.length-1])));var h=this.count=this.count_r({count:0},b);if(h>0&&this.line("/Count "+h),b.options&&b.options.pageNumber){var E=o.internal.getPageInfo(b.options.pageNumber);this.line("/Dest ["+E.objId+" 0 R /XYZ 0 "+p(0)+" 0]")}this.objEnd()}for(var L=0;L<l.children.length;L++)this.renderItems(l.children[L])},o.outline.line=function(l){this.ctx.val+=l+`\r
`},o.outline.makeRef=function(l){return l.id+" 0 R"},o.outline.makeString=function(l){return"("+o.internal.pdfEscape(l)+")"},o.outline.objStart=function(l){this.ctx.val+=`\r
`+l.id+` 0 obj\r
<<\r
`},o.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},o.outline.count_r=function(l,p){for(var m=0;m<p.children.length;m++)l.count++,this.count_r(l,p.children[m]);return l.count}}])}(yn.API),function(n){var i=[192,193,194,195,196,197,198,199];n.processJPEG=function(o,l,p,m,b,h){var E,L=this.decode.DCT_DECODE,z=null;if(typeof o=="string"||this.__addimage__.isArrayBuffer(o)||this.__addimage__.isArrayBufferView(o)){switch(o=b||o,o=this.__addimage__.isArrayBuffer(o)?new Uint8Array(o):o,(E=function(U){for(var q,B=256*U.charCodeAt(4)+U.charCodeAt(5),K=U.length,J={width:0,height:0,numcomponents:1},se=4;se<K;se+=2){if(se+=B,i.indexOf(U.charCodeAt(se+1))!==-1){q=256*U.charCodeAt(se+5)+U.charCodeAt(se+6),J={width:256*U.charCodeAt(se+7)+U.charCodeAt(se+8),height:q,numcomponents:U.charCodeAt(se+9)};break}B=256*U.charCodeAt(se+2)+U.charCodeAt(se+3)}return J}(o=this.__addimage__.isArrayBufferView(o)?this.__addimage__.arrayBufferToBinaryString(o):o)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}z={data:o,width:E.width,height:E.height,colorSpace:h,bitsPerComponent:8,filter:L,index:l,alias:p}}return z}}(yn.API);var Ah,Pd,iy,ry,ny,cw=function(){var n,i,o;function l(m){var b,h,E,L,z,U,q,B,K,J,se,ne,re,ke;for(this.data=m,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},U=null;;){switch(b=this.readUInt32(),K=function(){var Pe,be;for(be=[],Pe=0;Pe<4;++Pe)be.push(String.fromCharCode(this.data[this.pos++]));return be}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(b);break;case"fcTL":U&&this.animation.frames.push(U),this.pos+=4,U={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},z=this.readUInt16(),L=this.readUInt16()||100,U.delay=1e3*z/L,U.disposeOp=this.data[this.pos++],U.blendOp=this.data[this.pos++],U.data=[];break;case"IDAT":case"fdAT":for(K==="fdAT"&&(this.pos+=4,b-=4),m=(U!=null?U.data:void 0)||this.imgData,ne=0;0<=b?ne<b:ne>b;0<=b?++ne:--ne)m.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(E=this.palette.length/3,this.transparency.indexed=this.read(b),this.transparency.indexed.length>E)throw new Error("More transparent colors than palette size");if((J=E-this.transparency.indexed.length)>0)for(re=0;0<=J?re<J:re>J;0<=J?++re:--re)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(b)[0];break;case 2:this.transparency.rgb=this.read(b)}break;case"tEXt":q=(se=this.read(b)).indexOf(0),B=String.fromCharCode.apply(String,se.slice(0,q)),this.text[B]=String.fromCharCode.apply(String,se.slice(q+1));break;case"IEND":return U&&this.animation.frames.push(U),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(ke=this.colorType)===4||ke===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=b}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}l.prototype.read=function(m){var b,h;for(h=[],b=0;0<=m?b<m:b>m;0<=m?++b:--b)h.push(this.data[this.pos++]);return h},l.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},l.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},l.prototype.decodePixels=function(m){var b=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*b),E=0,L=this;if(m==null&&(m=this.imgData),m.length===0)return new Uint8Array(0);function z(U,q,B,K){var J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t,pt,Gt,kt,Xt,Mt=Math.ceil((L.width-U)/B),qt=Math.ceil((L.height-q)/K),ve=L.width==Mt&&L.height==qt;for(Me=b*Mt,nt=ve?h:new Uint8Array(Me*qt),Pe=m.length,Se=0,se=0;Se<qt&&E<Pe;){switch(m[E++]){case 0:for(re=_t=0;_t<Me;re=_t+=1)nt[se++]=m[E++];break;case 1:for(re=pt=0;pt<Me;re=pt+=1)J=m[E++],ke=re<b?0:nt[se-b],nt[se++]=(J+ke)%256;break;case 2:for(re=Gt=0;Gt<Me;re=Gt+=1)J=m[E++],ne=(re-re%b)/b,Ge=Se&&nt[(Se-1)*Me+ne*b+re%b],nt[se++]=(Ge+J)%256;break;case 3:for(re=kt=0;kt<Me;re=kt+=1)J=m[E++],ne=(re-re%b)/b,ke=re<b?0:nt[se-b],Ge=Se&&nt[(Se-1)*Me+ne*b+re%b],nt[se++]=(J+Math.floor((ke+Ge)/2))%256;break;case 4:for(re=Xt=0;Xt<Me;re=Xt+=1)J=m[E++],ne=(re-re%b)/b,ke=re<b?0:nt[se-b],Se===0?Ge=Xe=0:(Ge=nt[(Se-1)*Me+ne*b+re%b],Xe=ne&&nt[(Se-1)*Me+(ne-1)*b+re%b]),be=ke+Ge-Xe,pe=Math.abs(be-ke),me=Math.abs(be-Ge),tt=Math.abs(be-Xe),ye=pe<=me&&pe<=tt?ke:me<=tt?Ge:Xe,nt[se++]=(J+ye)%256;break;default:throw new Error("Invalid filter algorithm: "+m[E-1])}if(!ve){var it=((q+Se*K)*L.width+U)*b,Re=Se*Me;for(re=0;re<Mt;re+=1){for(var bt=0;bt<b;bt+=1)h[it++]=nt[Re++];it+=(B-1)*b}}Se++}}return m=G3(m),L.interlaceMethod==1?(z(0,0,8,8),z(4,0,8,8),z(0,4,4,8),z(2,0,4,4),z(0,2,2,4),z(1,0,2,2),z(0,1,1,2)):z(0,0,1,1),h},l.prototype.decodePalette=function(){var m,b,h,E,L,z,U,q,B;for(h=this.palette,z=this.transparency.indexed||[],L=new Uint8Array((z.length||0)+h.length),E=0,m=0,b=U=0,q=h.length;U<q;b=U+=3)L[E++]=h[b],L[E++]=h[b+1],L[E++]=h[b+2],L[E++]=(B=z[m++])!=null?B:255;return L},l.prototype.copyToImageData=function(m,b){var h,E,L,z,U,q,B,K,J,se,ne;if(E=this.colors,J=null,h=this.hasAlphaChannel,this.palette.length&&(J=(ne=this._decodedPalette)!=null?ne:this._decodedPalette=this.decodePalette(),E=4,h=!0),K=(L=m.data||m).length,U=J||b,z=q=0,E===1)for(;z<K;)B=J?4*b[z/4]:q,se=U[B++],L[z++]=se,L[z++]=se,L[z++]=se,L[z++]=h?U[B++]:255,q=B;else for(;z<K;)B=J?4*b[z/4]:q,L[z++]=U[B++],L[z++]=U[B++],L[z++]=U[B++],L[z++]=h?U[B++]:255,q=B},l.prototype.decode=function(){var m;return m=new Uint8Array(this.width*this.height*4),this.copyToImageData(m,this.decodePixels()),m};var p=function(){if(Object.prototype.toString.call(wn)==="[object Window]"){try{i=wn.document.createElement("canvas"),o=i.getContext("2d")}catch{return!1}return!0}return!1};return p(),n=function(m){var b;if(p()===!0)return o.width=m.width,o.height=m.height,o.clearRect(0,0,m.width,m.height),o.putImageData(m,0,0),(b=new Image).src=i.toDataURL(),b;throw new Error("This method requires a Browser with Canvas-capability.")},l.prototype.decodeFrames=function(m){var b,h,E,L,z,U,q,B;if(this.animation){for(B=[],h=z=0,U=(q=this.animation.frames).length;z<U;h=++z)b=q[h],E=m.createImageData(b.width,b.height),L=this.decodePixels(new Uint8Array(b.data)),this.copyToImageData(E,L),b.imageData=E,B.push(b.image=n(E));return B}},l.prototype.renderFrame=function(m,b){var h,E,L;return h=(E=this.animation.frames)[b],L=E[b-1],b===0&&m.clearRect(0,0,this.width,this.height),(L!=null?L.disposeOp:void 0)===1?m.clearRect(L.xOffset,L.yOffset,L.width,L.height):(L!=null?L.disposeOp:void 0)===2&&m.putImageData(L.imageData,L.xOffset,L.yOffset),h.blendOp===0&&m.clearRect(h.xOffset,h.yOffset,h.width,h.height),m.drawImage(h.image,h.xOffset,h.yOffset)},l.prototype.animate=function(m){var b,h,E,L,z,U,q=this;return h=0,U=this.animation,L=U.numFrames,E=U.frames,z=U.numPlays,(b=function(){var B,K;if(B=h++%L,K=E[B],q.renderFrame(m,B),L>1&&h/L<z)return q.animation._timeout=setTimeout(b,K.delay)})()},l.prototype.stopAnimation=function(){var m;return clearTimeout((m=this.animation)!=null?m._timeout:void 0)},l.prototype.render=function(m){var b,h;return m._png&&m._png.stopAnimation(),m._png=this,m.width=this.width,m.height=this.height,b=m.getContext("2d"),this.animation?(this.decodeFrames(b),this.animate(b)):(h=b.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),b.putImageData(h,0,0))},l}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hw(n){var i=0;if(n[i++]!==71||n[i++]!==73||n[i++]!==70||n[i++]!==56||(n[i++]+1&253)!=56||n[i++]!==97)throw new Error("Invalid GIF 87a/89a header.");var o=n[i++]|n[i++]<<8,l=n[i++]|n[i++]<<8,p=n[i++],m=p>>7,b=1<<(7&p)+1;n[i++],n[i++];var h=null,E=null;m&&(h=i,E=b,i+=3*b);var L=!0,z=[],U=0,q=null,B=0,K=null;for(this.width=o,this.height=l;L&&i<n.length;)switch(n[i++]){case 33:switch(n[i++]){case 255:if(n[i]!==11||n[i+1]==78&&n[i+2]==69&&n[i+3]==84&&n[i+4]==83&&n[i+5]==67&&n[i+6]==65&&n[i+7]==80&&n[i+8]==69&&n[i+9]==50&&n[i+10]==46&&n[i+11]==48&&n[i+12]==3&&n[i+13]==1&&n[i+16]==0)i+=14,K=n[i++]|n[i++]<<8,i++;else for(i+=12;;){if(!((Se=n[i++])>=0))throw Error("Invalid block size");if(Se===0)break;i+=Se}break;case 249:if(n[i++]!==4||n[i+4]!==0)throw new Error("Invalid graphics extension block.");var J=n[i++];U=n[i++]|n[i++]<<8,q=n[i++],(1&J)==0&&(q=null),B=J>>2&7,i++;break;case 254:for(;;){if(!((Se=n[i++])>=0))throw Error("Invalid block size");if(Se===0)break;i+=Se}break;default:throw new Error("Unknown graphic control label: 0x"+n[i-1].toString(16))}break;case 44:var se=n[i++]|n[i++]<<8,ne=n[i++]|n[i++]<<8,re=n[i++]|n[i++]<<8,ke=n[i++]|n[i++]<<8,Pe=n[i++],be=Pe>>6&1,pe=1<<(7&Pe)+1,ye=h,me=E,tt=!1;Pe>>7&&(tt=!0,ye=i,me=pe,i+=3*pe);var nt=i;for(i++;;){var Se;if(!((Se=n[i++])>=0))throw Error("Invalid block size");if(Se===0)break;i+=Se}z.push({x:se,y:ne,width:re,height:ke,has_local_palette:tt,palette_offset:ye,palette_size:me,data_offset:nt,data_length:i-nt,transparent_index:q,interlaced:!!be,delay:U,disposal:B});break;case 59:L=!1;break;default:throw new Error("Unknown gif block: 0x"+n[i-1].toString(16))}this.numFrames=function(){return z.length},this.loopCount=function(){return K},this.frameInfo=function(Me){if(Me<0||Me>=z.length)throw new Error("Frame index out of range.");return z[Me]},this.decodeAndBlitFrameBGRA=function(Me,Ge){var Xe=this.frameInfo(Me),_t=Xe.width*Xe.height,pt=new Uint8Array(_t);oy(n,Xe.data_offset,pt,_t);var Gt=Xe.palette_offset,kt=Xe.transparent_index;kt===null&&(kt=256);var Xt=Xe.width,Mt=o-Xt,qt=Xt,ve=4*(Xe.y*o+Xe.x),it=4*((Xe.y+Xe.height)*o+Xe.x),Re=ve,bt=4*Mt;Xe.interlaced===!0&&(bt+=4*o*7);for(var Ct=8,Ot=0,Ht=pt.length;Ot<Ht;++Ot){var Wt=pt[Ot];if(qt===0&&(qt=Xt,(Re+=bt)>=it&&(bt=4*Mt+4*o*(Ct-1),Re=ve+(Xt+Mt)*(Ct<<1),Ct>>=1)),Wt===kt)Re+=4;else{var si=n[Gt+3*Wt],ri=n[Gt+3*Wt+1],zi=n[Gt+3*Wt+2];Ge[Re++]=zi,Ge[Re++]=ri,Ge[Re++]=si,Ge[Re++]=255}--qt}},this.decodeAndBlitFrameRGBA=function(Me,Ge){var Xe=this.frameInfo(Me),_t=Xe.width*Xe.height,pt=new Uint8Array(_t);oy(n,Xe.data_offset,pt,_t);var Gt=Xe.palette_offset,kt=Xe.transparent_index;kt===null&&(kt=256);var Xt=Xe.width,Mt=o-Xt,qt=Xt,ve=4*(Xe.y*o+Xe.x),it=4*((Xe.y+Xe.height)*o+Xe.x),Re=ve,bt=4*Mt;Xe.interlaced===!0&&(bt+=4*o*7);for(var Ct=8,Ot=0,Ht=pt.length;Ot<Ht;++Ot){var Wt=pt[Ot];if(qt===0&&(qt=Xt,(Re+=bt)>=it&&(bt=4*Mt+4*o*(Ct-1),Re=ve+(Xt+Mt)*(Ct<<1),Ct>>=1)),Wt===kt)Re+=4;else{var si=n[Gt+3*Wt],ri=n[Gt+3*Wt+1],zi=n[Gt+3*Wt+2];Ge[Re++]=si,Ge[Re++]=ri,Ge[Re++]=zi,Ge[Re++]=255}--qt}}}function oy(n,i,o,l){for(var p=n[i++],m=1<<p,b=m+1,h=b+1,E=p+1,L=(1<<E)-1,z=0,U=0,q=0,B=n[i++],K=new Int32Array(4096),J=null;;){for(;z<16&&B!==0;)U|=n[i++]<<z,z+=8,B===1?B=n[i++]:--B;if(z<E)break;var se=U&L;if(U>>=E,z-=E,se!==m){if(se===b)break;for(var ne=se<h?se:J,re=0,ke=ne;ke>m;)ke=K[ke]>>8,++re;var Pe=ke;if(q+re+(ne!==se?1:0)>l)return void Fo.log("Warning, gif stream longer than expected.");o[q++]=Pe;var be=q+=re;for(ne!==se&&(o[q++]=Pe),ke=ne;re--;)ke=K[ke],o[--be]=255&ke,ke>>=8;J!==null&&h<4096&&(K[h++]=J<<8|Pe,h>=L+1&&E<12&&(++E,L=L<<1|1)),J=se}else h=b+1,L=(1<<(E=p+1))-1,J=null}return q!==l&&Fo.log("Warning, gif stream shorter than expected."),o}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function v1(n){var i,o,l,p,m,b=Math.floor,h=new Array(64),E=new Array(64),L=new Array(64),z=new Array(64),U=new Array(65535),q=new Array(65535),B=new Array(64),K=new Array(64),J=[],se=0,ne=7,re=new Array(64),ke=new Array(64),Pe=new Array(64),be=new Array(256),pe=new Array(2048),ye=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],me=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],tt=[0,1,2,3,4,5,6,7,8,9,10,11],nt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Se=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Me=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ge=[0,1,2,3,4,5,6,7,8,9,10,11],Xe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_t=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pt(ve,it){for(var Re=0,bt=0,Ct=new Array,Ot=1;Ot<=16;Ot++){for(var Ht=1;Ht<=ve[Ot];Ht++)Ct[it[bt]]=[],Ct[it[bt]][0]=Re,Ct[it[bt]][1]=Ot,bt++,Re++;Re*=2}return Ct}function Gt(ve){for(var it=ve[0],Re=ve[1]-1;Re>=0;)it&1<<Re&&(se|=1<<ne),Re--,--ne<0&&(se==255?(kt(255),kt(0)):kt(se),ne=7,se=0)}function kt(ve){J.push(ve)}function Xt(ve){kt(ve>>8&255),kt(255&ve)}function Mt(ve,it,Re,bt,Ct){for(var Ot,Ht=Ct[0],Wt=Ct[240],si=function(di,Hi){var Ki,Ui,Qt,lr,pi,Dr,ze,Y,te,je,ot=0;for(te=0;te<8;++te){Ki=di[ot],Ui=di[ot+1],Qt=di[ot+2],lr=di[ot+3],pi=di[ot+4],Dr=di[ot+5],ze=di[ot+6];var mt=Ki+(Y=di[ot+7]),Jt=Ki-Y,hr=Ui+ze,xr=Ui-ze,or=Qt+Dr,Ei=Qt-Dr,Wi=lr+pi,Br=lr-pi,Zr=mt+Wi,Pn=mt-Wi,Vr=hr+or,vn=hr-or;di[ot]=Zr+Vr,di[ot+4]=Zr-Vr;var Pr=.707106781*(vn+Pn);di[ot+2]=Pn+Pr,di[ot+6]=Pn-Pr;var _n=.382683433*((Zr=Br+Ei)-(vn=xr+Jt)),Tn=.5411961*Zr+_n,Tr=1.306562965*vn+_n,Qr=.707106781*(Vr=Ei+xr),Un=Jt+Qr,Bi=Jt-Qr;di[ot+5]=Bi+Tn,di[ot+3]=Bi-Tn,di[ot+1]=Un+Tr,di[ot+7]=Un-Tr,ot+=8}for(ot=0,te=0;te<8;++te){Ki=di[ot],Ui=di[ot+8],Qt=di[ot+16],lr=di[ot+24],pi=di[ot+32],Dr=di[ot+40],ze=di[ot+48];var Le=Ki+(Y=di[ot+56]),$n=Ki-Y,eo=Ui+ze,Xn=Ui-ze,de=Qt+Dr,fe=Qt-Dr,Te=lr+pi,Ke=lr-pi,et=Le+Te,wt=Le-Te,De=eo+de,Nt=eo-de;di[ot]=et+De,di[ot+32]=et-De;var Tt=.707106781*(Nt+wt);di[ot+16]=wt+Tt,di[ot+48]=wt-Tt;var jt=.382683433*((et=Ke+fe)-(Nt=Xn+$n)),ki=.5411961*et+jt,Ri=1.306562965*Nt+jt,wi=.707106781*(De=fe+Xn),kr=$n+wi,Sr=$n-wi;di[ot+40]=Sr+ki,di[ot+24]=Sr-ki,di[ot+8]=kr+Ri,di[ot+56]=kr-Ri,ot++}for(te=0;te<64;++te)je=di[te]*Hi[te],B[te]=je>0?je+.5|0:je-.5|0;return B}(ve,it),ri=0;ri<64;++ri)K[ye[ri]]=si[ri];var zi=K[0]-Re;Re=K[0],zi==0?Gt(bt[0]):(Gt(bt[q[Ot=32767+zi]]),Gt(U[Ot]));for(var Di=63;Di>0&&K[Di]==0;)Di--;if(Di==0)return Gt(Ht),Re;for(var er,Zt=1;Zt<=Di;){for(var yt=Zt;K[Zt]==0&&Zt<=Di;)++Zt;var $i=Zt-yt;if($i>=16){er=$i>>4;for(var nr=1;nr<=er;++nr)Gt(Wt);$i&=15}Ot=32767+K[Zt],Gt(Ct[($i<<4)+q[Ot]]),Gt(U[Ot]),Zt++}return Di!=63&&Gt(Ht),Re}function qt(ve){ve=Math.min(Math.max(ve,1),100),m!=ve&&(function(it){for(var Re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],bt=0;bt<64;bt++){var Ct=b((Re[bt]*it+50)/100);Ct=Math.min(Math.max(Ct,1),255),h[ye[bt]]=Ct}for(var Ot=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ht=0;Ht<64;Ht++){var Wt=b((Ot[Ht]*it+50)/100);Wt=Math.min(Math.max(Wt,1),255),E[ye[Ht]]=Wt}for(var si=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ri=0,zi=0;zi<8;zi++)for(var Di=0;Di<8;Di++)L[ri]=1/(h[ye[ri]]*si[zi]*si[Di]*8),z[ri]=1/(E[ye[ri]]*si[zi]*si[Di]*8),ri++}(ve<50?Math.floor(5e3/ve):Math.floor(200-2*ve)),m=ve)}this.encode=function(ve,it){it&&qt(it),J=new Array,se=0,ne=7,Xt(65496),Xt(65504),Xt(16),kt(74),kt(70),kt(73),kt(70),kt(0),kt(1),kt(1),kt(0),Xt(1),Xt(1),kt(0),kt(0),function(){Xt(65499),Xt(132),kt(0);for(var Ui=0;Ui<64;Ui++)kt(h[Ui]);kt(1);for(var Qt=0;Qt<64;Qt++)kt(E[Qt])}(),function(Ui,Qt){Xt(65472),Xt(17),kt(8),Xt(Qt),Xt(Ui),kt(3),kt(1),kt(17),kt(0),kt(2),kt(17),kt(1),kt(3),kt(17),kt(1)}(ve.width,ve.height),function(){Xt(65476),Xt(418),kt(0);for(var Ui=0;Ui<16;Ui++)kt(me[Ui+1]);for(var Qt=0;Qt<=11;Qt++)kt(tt[Qt]);kt(16);for(var lr=0;lr<16;lr++)kt(nt[lr+1]);for(var pi=0;pi<=161;pi++)kt(Se[pi]);kt(1);for(var Dr=0;Dr<16;Dr++)kt(Me[Dr+1]);for(var ze=0;ze<=11;ze++)kt(Ge[ze]);kt(17);for(var Y=0;Y<16;Y++)kt(Xe[Y+1]);for(var te=0;te<=161;te++)kt(_t[te])}(),Xt(65498),Xt(12),kt(3),kt(1),kt(0),kt(2),kt(17),kt(3),kt(17),kt(0),kt(63),kt(0);var Re=0,bt=0,Ct=0;se=0,ne=7,this.encode.displayName="_encode_";for(var Ot,Ht,Wt,si,ri,zi,Di,er,Zt,yt=ve.data,$i=ve.width,nr=ve.height,di=4*$i,Hi=0;Hi<nr;){for(Ot=0;Ot<di;){for(ri=di*Hi+Ot,Di=-1,er=0,Zt=0;Zt<64;Zt++)zi=ri+(er=Zt>>3)*di+(Di=4*(7&Zt)),Hi+er>=nr&&(zi-=di*(Hi+1+er-nr)),Ot+Di>=di&&(zi-=Ot+Di-di+4),Ht=yt[zi++],Wt=yt[zi++],si=yt[zi++],re[Zt]=(pe[Ht]+pe[Wt+256>>0]+pe[si+512>>0]>>16)-128,ke[Zt]=(pe[Ht+768>>0]+pe[Wt+1024>>0]+pe[si+1280>>0]>>16)-128,Pe[Zt]=(pe[Ht+1280>>0]+pe[Wt+1536>>0]+pe[si+1792>>0]>>16)-128;Re=Mt(re,L,Re,i,l),bt=Mt(ke,z,bt,o,p),Ct=Mt(Pe,z,Ct,o,p),Ot+=32}Hi+=8}if(ne>=0){var Ki=[];Ki[1]=ne+1,Ki[0]=(1<<ne+1)-1,Gt(Ki)}return Xt(65497),new Uint8Array(J)},n=n||50,function(){for(var ve=String.fromCharCode,it=0;it<256;it++)be[it]=ve(it)}(),i=pt(me,tt),o=pt(Me,Ge),l=pt(nt,Se),p=pt(Xe,_t),function(){for(var ve=1,it=2,Re=1;Re<=15;Re++){for(var bt=ve;bt<it;bt++)q[32767+bt]=Re,U[32767+bt]=[],U[32767+bt][1]=Re,U[32767+bt][0]=bt;for(var Ct=-(it-1);Ct<=-ve;Ct++)q[32767+Ct]=Re,U[32767+Ct]=[],U[32767+Ct][1]=Re,U[32767+Ct][0]=it-1+Ct;ve<<=1,it<<=1}}(),function(){for(var ve=0;ve<256;ve++)pe[ve]=19595*ve,pe[ve+256>>0]=38470*ve,pe[ve+512>>0]=7471*ve+32768,pe[ve+768>>0]=-11059*ve,pe[ve+1024>>0]=-21709*ve,pe[ve+1280>>0]=32768*ve+8421375,pe[ve+1536>>0]=-27439*ve,pe[ve+1792>>0]=-5329*ve}(),qt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ou(n,i){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!i,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function sy(n){function i(me){if(!me)throw Error("assert :P")}function o(me,tt,nt){for(var Se=0;4>Se;Se++)if(me[tt+Se]!=nt.charCodeAt(Se))return!0;return!1}function l(me,tt,nt,Se,Me){for(var Ge=0;Ge<Me;Ge++)me[tt+Ge]=nt[Se+Ge]}function p(me,tt,nt,Se){for(var Me=0;Me<Se;Me++)me[tt+Me]=nt}function m(me){return new Int32Array(me)}function b(me,tt){for(var nt=[],Se=0;Se<me;Se++)nt.push(new tt);return nt}function h(me,tt){var nt=[];return function Se(Me,Ge,Xe){for(var _t=Xe[Ge],pt=0;pt<_t&&(Me.push(Xe.length>Ge+1?[]:new tt),!(Xe.length<Ge+1));pt++)Se(Me[pt],Ge+1,Xe)}(nt,0,me),nt}var E=function(){var me=this;function tt(P,j){for(var Q=1<<j-1>>>0;P&Q;)Q>>>=1;return Q?(P&Q-1)+Q:P}function nt(P,j,Q,le,Ae){i(!(le%Q));do P[j+(le-=Q)]=Ae;while(0<le)}function Se(P,j,Q,le,Ae){if(i(2328>=Ae),512>=Ae)var Fe=m(512);else if((Fe=m(Ae))==null)return 0;return function(Oe,He,Qe,ct,Ut,ci){var li,ei,qi=He,bi=1<<Qe,Pt=m(16),Ft=m(16);for(i(Ut!=0),i(ct!=null),i(Oe!=null),i(0<Qe),ei=0;ei<Ut;++ei){if(15<ct[ei])return 0;++Pt[ct[ei]]}if(Pt[0]==Ut)return 0;for(Ft[1]=0,li=1;15>li;++li){if(Pt[li]>1<<li)return 0;Ft[li+1]=Ft[li]+Pt[li]}for(ei=0;ei<Ut;++ei)li=ct[ei],0<ct[ei]&&(ci[Ft[li]++]=ei);if(Ft[15]==1)return(ct=new Me).g=0,ct.value=ci[0],nt(Oe,qi,1,bi,ct),bi;var Pi,Ni=-1,Ci=bi-1,mr=0,cr=1,tn=1,gr=1<<Qe;for(ei=0,li=1,Ut=2;li<=Qe;++li,Ut<<=1){if(cr+=tn<<=1,0>(tn-=Pt[li]))return 0;for(;0<Pt[li];--Pt[li])(ct=new Me).g=li,ct.value=ci[ei++],nt(Oe,qi+mr,Ut,gr,ct),mr=tt(mr,li)}for(li=Qe+1,Ut=2;15>=li;++li,Ut<<=1){if(cr+=tn<<=1,0>(tn-=Pt[li]))return 0;for(;0<Pt[li];--Pt[li]){if(ct=new Me,(mr&Ci)!=Ni){for(qi+=gr,Pi=1<<(Ni=li)-Qe;15>Ni&&!(0>=(Pi-=Pt[Ni]));)++Ni,Pi<<=1;bi+=gr=1<<(Pi=Ni-Qe),Oe[He+(Ni=mr&Ci)].g=Pi+Qe,Oe[He+Ni].value=qi-He-Ni}ct.g=li-Qe,ct.value=ci[ei++],nt(Oe,qi+(mr>>Qe),Ut,gr,ct),mr=tt(mr,li)}}return cr!=2*Ft[15]-1?0:bi}(P,j,Q,le,Ae,Fe)}function Me(){this.value=this.g=0}function Ge(){this.value=this.g=0}function Xe(){this.G=b(5,Me),this.H=m(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=b(ss,Ge)}function _t(P,j,Q,le){i(P!=null),i(j!=null),i(2147483648>le),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=j,P.pa=Q,P.Jd=j,P.Yc=Q+le,P.Zc=4<=le?Q+le-4+1:Q,Ot(P)}function pt(P,j){for(var Q=0;0<j--;)Q|=Wt(P,128)<<j;return Q}function Gt(P,j){var Q=pt(P,j);return Ht(P)?-Q:Q}function kt(P,j,Q,le){var Ae,Fe=0;for(i(P!=null),i(j!=null),i(4294967288>le),P.Sb=le,P.Ra=0,P.u=0,P.h=0,4<le&&(le=4),Ae=0;Ae<le;++Ae)Fe+=j[Q+Ae]<<8*Ae;P.Ra=Fe,P.bb=le,P.oa=j,P.pa=Q}function Xt(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<pa-8>>>0,++P.bb,P.u-=8;Re(P)&&(P.h=1,P.u=0)}function Mt(P,j){if(i(0<=j),!P.h&&j<=dl){var Q=it(P)&Fl[j];return P.u+=j,Xt(P),Q}return P.h=1,P.u=0}function qt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ve(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function it(P){return P.Ra>>>(P.u&pa-1)>>>0}function Re(P){return i(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>pa}function bt(P,j){P.u=j,P.h=Re(P)}function Ct(P){P.u>=Bl&&(i(P.u>=Bl),Xt(P))}function Ot(P){i(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(i(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function Ht(P){return pt(P,1)}function Wt(P,j){var Q=P.Ca;0>P.b&&Ot(P);var le=P.b,Ae=Q*j>>>8,Fe=(P.I>>>le>Ae)+0;for(Fe?(Q-=Ae,P.I-=Ae+1<<le>>>0):Q=Ae+1,le=Q,Ae=0;256<=le;)Ae+=8,le>>=8;return le=7^Ae+as[le],P.b-=le,P.Ca=(Q<<le)-1,Fe}function si(P,j,Q){P[j+0]=Q>>24&255,P[j+1]=Q>>16&255,P[j+2]=Q>>8&255,P[j+3]=Q>>0&255}function ri(P,j){return P[j+0]<<0|P[j+1]<<8}function zi(P,j){return ri(P,j)|P[j+2]<<16}function Di(P,j){return ri(P,j)|ri(P,j+2)<<16}function er(P,j){var Q=1<<j;return i(P!=null),i(0<j),P.X=m(Q),P.X==null?0:(P.Mb=32-j,P.Xa=j,1)}function Zt(P,j){i(P!=null),i(j!=null),i(P.Xa==j.Xa),l(j.X,0,P.X,0,1<<j.Xa)}function yt(){this.X=[],this.Xa=this.Mb=0}function $i(P,j,Q,le){i(Q!=null),i(le!=null);var Ae=Q[0],Fe=le[0];return Ae==0&&(Ae=(P*Fe+j/2)/j),Fe==0&&(Fe=(j*Ae+P/2)/P),0>=Ae||0>=Fe?0:(Q[0]=Ae,le[0]=Fe,1)}function nr(P,j){return P+(1<<j)-1>>>j}function di(P,j){return((4278255360&P)+(4278255360&j)>>>0&4278255360)+((16711935&P)+(16711935&j)>>>0&16711935)>>>0}function Hi(P,j){me[j]=function(Q,le,Ae,Fe,Oe,He,Qe){var ct;for(ct=0;ct<Oe;++ct){var Ut=me[P](He[Qe+ct-1],Ae,Fe+ct);He[Qe+ct]=di(Q[le+ct],Ut)}}}function Ki(){this.ud=this.hd=this.jd=0}function Ui(P,j){return((4278124286&(P^j))>>>1)+(P&j)>>>0}function Qt(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function lr(P,j){return Qt(P+(P-j+.5>>1))}function pi(P,j,Q){return Math.abs(j-Q)-Math.abs(P-Q)}function Dr(P,j,Q,le,Ae,Fe,Oe){for(le=Fe[Oe-1],Q=0;Q<Ae;++Q)Fe[Oe+Q]=le=di(P[j+Q],le)}function ze(P,j,Q,le,Ae){var Fe;for(Fe=0;Fe<Q;++Fe){var Oe=P[j+Fe],He=Oe>>8&255,Qe=16711935&(Qe=(Qe=16711935&Oe)+((He<<16)+He));le[Ae+Fe]=(4278255360&Oe)+Qe>>>0}}function Y(P,j){j.jd=P>>0&255,j.hd=P>>8&255,j.ud=P>>16&255}function te(P,j,Q,le,Ae,Fe){var Oe;for(Oe=0;Oe<le;++Oe){var He=j[Q+Oe],Qe=He>>>8,ct=He,Ut=255&(Ut=(Ut=He>>>16)+((P.jd<<24>>24)*(Qe<<24>>24)>>>5));ct=255&(ct=(ct=ct+((P.hd<<24>>24)*(Qe<<24>>24)>>>5))+((P.ud<<24>>24)*(Ut<<24>>24)>>>5)),Ae[Fe+Oe]=(4278255360&He)+(Ut<<16)+ct}}function je(P,j,Q,le,Ae){me[j]=function(Fe,Oe,He,Qe,ct,Ut,ci,li,ei){for(Qe=ci;Qe<li;++Qe)for(ci=0;ci<ei;++ci)ct[Ut++]=Ae(He[le(Fe[Oe++])])},me[P]=function(Fe,Oe,He,Qe,ct,Ut,ci){var li=8>>Fe.b,ei=Fe.Ea,qi=Fe.K[0],bi=Fe.w;if(8>li)for(Fe=(1<<Fe.b)-1,bi=(1<<li)-1;Oe<He;++Oe){var Pt,Ft=0;for(Pt=0;Pt<ei;++Pt)Pt&Fe||(Ft=le(Qe[ct++])),Ut[ci++]=Ae(qi[Ft&bi]),Ft>>=li}else me["VP8LMapColor"+Q](Qe,ct,qi,bi,Ut,ci,Oe,He,ei)}}function ot(P,j,Q,le,Ae){for(Q=j+Q;j<Q;){var Fe=P[j++];le[Ae++]=Fe>>16&255,le[Ae++]=Fe>>8&255,le[Ae++]=Fe>>0&255}}function mt(P,j,Q,le,Ae){for(Q=j+Q;j<Q;){var Fe=P[j++];le[Ae++]=Fe>>16&255,le[Ae++]=Fe>>8&255,le[Ae++]=Fe>>0&255,le[Ae++]=Fe>>24&255}}function Jt(P,j,Q,le,Ae){for(Q=j+Q;j<Q;){var Fe=(Oe=P[j++])>>16&240|Oe>>12&15,Oe=Oe>>0&240|Oe>>28&15;le[Ae++]=Fe,le[Ae++]=Oe}}function hr(P,j,Q,le,Ae){for(Q=j+Q;j<Q;){var Fe=(Oe=P[j++])>>16&248|Oe>>13&7,Oe=Oe>>5&224|Oe>>3&31;le[Ae++]=Fe,le[Ae++]=Oe}}function xr(P,j,Q,le,Ae){for(Q=j+Q;j<Q;){var Fe=P[j++];le[Ae++]=Fe>>0&255,le[Ae++]=Fe>>8&255,le[Ae++]=Fe>>16&255}}function or(P,j,Q,le,Ae,Fe){if(Fe==0)for(Q=j+Q;j<Q;)si(le,((Fe=P[j++])[0]>>24|Fe[1]>>8&65280|Fe[2]<<8&16711680|Fe[3]<<24)>>>0),Ae+=32;else l(le,Ae,P,j,Q)}function Ei(P,j){me[j][0]=me[P+"0"],me[j][1]=me[P+"1"],me[j][2]=me[P+"2"],me[j][3]=me[P+"3"],me[j][4]=me[P+"4"],me[j][5]=me[P+"5"],me[j][6]=me[P+"6"],me[j][7]=me[P+"7"],me[j][8]=me[P+"8"],me[j][9]=me[P+"9"],me[j][10]=me[P+"10"],me[j][11]=me[P+"11"],me[j][12]=me[P+"12"],me[j][13]=me[P+"13"],me[j][14]=me[P+"0"],me[j][15]=me[P+"0"]}function Wi(P){return P==oo||P==ql||P==Vl||P==nc}function Br(){this.eb=[],this.size=this.A=this.fb=0}function Zr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Br,this.f.kb=new Zr,this.sd=null}function Vr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pr(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function _n(P,j){var Q=P.T,le=j.ba.f.RGBA,Ae=le.eb,Fe=le.fb+P.ka*le.A,Oe=R[j.ba.S],He=P.y,Qe=P.O,ct=P.f,Ut=P.N,ci=P.ea,li=P.W,ei=j.cc,qi=j.dc,bi=j.Mc,Pt=j.Nc,Ft=P.ka,Pi=P.ka+P.T,Ni=P.U,Ci=Ni+1>>1;for(Ft==0?Oe(He,Qe,null,null,ct,Ut,ci,li,ct,Ut,ci,li,Ae,Fe,null,null,Ni):(Oe(j.ec,j.fc,He,Qe,ei,qi,bi,Pt,ct,Ut,ci,li,Ae,Fe-le.A,Ae,Fe,Ni),++Q);Ft+2<Pi;Ft+=2)ei=ct,qi=Ut,bi=ci,Pt=li,Ut+=P.Rc,li+=P.Rc,Fe+=2*le.A,Oe(He,(Qe+=2*P.fa)-P.fa,He,Qe,ei,qi,bi,Pt,ct,Ut,ci,li,Ae,Fe-le.A,Ae,Fe,Ni);return Qe+=P.fa,P.j+Pi<P.o?(l(j.ec,j.fc,He,Qe,Ni),l(j.cc,j.dc,ct,Ut,Ci),l(j.Mc,j.Nc,ci,li,Ci),Q--):1&Pi||Oe(He,Qe,null,null,ct,Ut,ci,li,ct,Ut,ci,li,Ae,Fe+le.A,null,null,Ni),Q}function Tn(P,j,Q){var le=P.F,Ae=[P.J];if(le!=null){var Fe=P.U,Oe=j.ba.S,He=Oe==ml||Oe==Vl;j=j.ba.f.RGBA;var Qe=[0],ct=P.ka;Qe[0]=P.T,P.Kb&&(ct==0?--Qe[0]:(--ct,Ae[0]-=P.width),P.j+P.ka+P.T==P.o&&(Qe[0]=P.o-P.j-ct));var Ut=j.eb;ct=j.fb+ct*j.A,P=su(le,Ae[0],P.width,Fe,Qe,Ut,ct+(He?0:3),j.A),i(Q==Qe),P&&Wi(Oe)&&sa(Ut,ct,He,Fe,Qe,j.A)}return 0}function Tr(P){var j=P.ma,Q=j.ba.S,le=11>Q,Ae=Q==xu||Q==Ul||Q==ml||Q==Dn||Q==12||Wi(Q);if(j.memory=null,j.Ib=null,j.Jb=null,j.Nd=null,!Ya(j.Oa,P,Ae?11:12))return 0;if(Ae&&Wi(Q)&&Xi(),P.da)alert("todo:use_scaling");else{if(le){if(j.Ib=Pr,P.Kb){if(Q=P.U+1>>1,j.memory=m(P.U+2*Q),j.memory==null)return 0;j.ec=j.memory,j.fc=0,j.cc=j.ec,j.dc=j.fc+P.U,j.Mc=j.cc,j.Nc=j.dc+Q,j.Ib=_n,Xi()}}else alert("todo:EmitYUV");Ae&&(j.Jb=Tn,le&&Kt())}if(le&&!It){for(P=0;256>P;++P)gi[P]=89858*(P-128)+ut>>vt,Si[P]=-22014*(P-128)+ut,Ti[P]=-45773*(P-128),fi[P]=113618*(P-128)+ut>>vt;for(P=dt;P<Rt;++P)j=76283*(P-16)+ut>>vt,Zi[P-dt]=Qo(j,255),Ai[P-dt]=Qo(j+8>>4,15);It=1}return 1}function Qr(P){var j=P.ma,Q=P.U,le=P.T;return i(!(1&P.ka)),0>=Q||0>=le?0:(Q=j.Ib(P,j),j.Jb!=null&&j.Jb(P,j,Q),j.Dc+=Q,1)}function Un(P){P.ma.memory=null}function Bi(P,j,Q,le){return Mt(P,8)!=47?0:(j[0]=Mt(P,14)+1,Q[0]=Mt(P,14)+1,le[0]=Mt(P,1),Mt(P,3)!=0?0:!P.h)}function Le(P,j){if(4>P)return P+1;var Q=P-2>>1;return(2+(1&P)<<Q)+Mt(j,Q)+1}function $n(P,j){return 120<j?j-120:1<=(Q=((Q=Rr[j-1])>>4)*P+(8-(15&Q)))?Q:1;var Q}function eo(P,j,Q){var le=it(Q),Ae=P[j+=255&le].g-8;return 0<Ae&&(bt(Q,Q.u+8),le=it(Q),j+=P[j].value,j+=le&(1<<Ae)-1),bt(Q,Q.u+P[j].g),P[j].value}function Xn(P,j,Q){return Q.g+=P.g,Q.value+=P.value<<j>>>0,i(8>=Q.g),P.g}function de(P,j,Q){var le=P.xc;return i((j=le==0?0:P.vc[P.md*(Q>>le)+(j>>le)])<P.Wb),P.Ya[j]}function fe(P,j,Q,le){var Ae=P.ab,Fe=P.c*j,Oe=P.C;j=Oe+j;var He=Q,Qe=le;for(le=P.Ta,Q=P.Ua;0<Ae--;){var ct=P.gc[Ae],Ut=Oe,ci=j,li=He,ei=Qe,qi=(Qe=le,He=Q,ct.Ea);switch(i(Ut<ci),i(ci<=ct.nc),ct.hc){case 2:pl(li,ei,(ci-Ut)*qi,Qe,He);break;case 0:var bi=Ut,Pt=ci,Ft=Qe,Pi=He,Ni=(gr=ct).Ea;bi==0&&(Rl(li,ei,null,null,1,Ft,Pi),Dr(li,ei+1,0,0,Ni-1,Ft,Pi+1),ei+=Ni,Pi+=Ni,++bi);for(var Ci=1<<gr.b,mr=Ci-1,cr=nr(Ni,gr.b),tn=gr.K,gr=gr.w+(bi>>gr.b)*cr;bi<Pt;){var Vn=tn,Wn=gr,In=1;for(Pa(li,ei,Ft,Pi-Ni,1,Ft,Pi);In<Ni;){var xn=(In&~mr)+Ci;xn>Ni&&(xn=Ni),(0,Ka[Vn[Wn++]>>8&15])(li,ei+ +In,Ft,Pi+In-Ni,xn-In,Ft,Pi+In),In=xn}ei+=Ni,Pi+=Ni,++bi&mr||(gr+=cr)}ci!=ct.nc&&l(Qe,He-qi,Qe,He+(ci-Ut-1)*qi,qi);break;case 1:for(qi=li,Pt=ei,Ni=(li=ct.Ea)-(Pi=li&~(Ft=(ei=1<<ct.b)-1)),bi=nr(li,ct.b),Ci=ct.K,ct=ct.w+(Ut>>ct.b)*bi;Ut<ci;){for(mr=Ci,cr=ct,tn=new Ki,gr=Pt+Pi,Vn=Pt+li;Pt<gr;)Y(mr[cr++],tn),ls(tn,qi,Pt,ei,Qe,He),Pt+=ei,He+=ei;Pt<Vn&&(Y(mr[cr++],tn),ls(tn,qi,Pt,Ni,Qe,He),Pt+=Ni,He+=Ni),++Ut&Ft||(ct+=bi)}break;case 3:if(li==Qe&&ei==He&&0<ct.b){for(Pt=Qe,li=qi=He+(ci-Ut)*qi-(Pi=(ci-Ut)*nr(ct.Ea,ct.b)),ei=Qe,Ft=He,bi=[],Pi=(Ni=Pi)-1;0<=Pi;--Pi)bi[Pi]=ei[Ft+Pi];for(Pi=Ni-1;0<=Pi;--Pi)Pt[li+Pi]=bi[Pi];ia(ct,Ut,ci,Qe,qi,Qe,He)}else ia(ct,Ut,ci,li,ei,Qe,He)}He=le,Qe=Q}Qe!=Q&&l(le,Q,He,Qe,Fe)}function Te(P,j){var Q=P.V,le=P.Ba+P.c*P.C,Ae=j-P.C;if(i(j<=P.l.o),i(16>=Ae),0<Ae){var Fe=P.l,Oe=P.Ta,He=P.Ua,Qe=Fe.width;if(fe(P,Ae,Q,le),Ae=He=[He],i((Q=P.C)<(le=j)),i(Fe.v<Fe.va),le>Fe.o&&(le=Fe.o),Q<Fe.j){var ct=Fe.j-Q;Q=Fe.j,Ae[0]+=ct*Qe}if(Q>=le?Q=0:(Ae[0]+=4*Fe.v,Fe.ka=Q-Fe.j,Fe.U=Fe.va-Fe.v,Fe.T=le-Q,Q=1),Q){if(He=He[0],11>(Q=P.ca).S){var Ut=Q.f.RGBA,ci=(le=Q.S,Ae=Fe.U,Fe=Fe.T,ct=Ut.eb,Ut.A),li=Fe;for(Ut=Ut.fb+P.Ma*Ut.A;0<li--;){var ei=Oe,qi=He,bi=Ae,Pt=ct,Ft=Ut;switch(le){case ma:ra(ei,qi,bi,Pt,Ft);break;case xu:na(ei,qi,bi,Pt,Ft);break;case oo:na(ei,qi,bi,Pt,Ft),sa(Pt,Ft,0,bi,1,0);break;case jl:Ma(ei,qi,bi,Pt,Ft);break;case Ul:or(ei,qi,bi,Pt,Ft,1);break;case ql:or(ei,qi,bi,Pt,Ft,1),sa(Pt,Ft,0,bi,1,0);break;case ml:or(ei,qi,bi,Pt,Ft,0);break;case Vl:or(ei,qi,bi,Pt,Ft,0),sa(Pt,Ft,1,bi,1,0);break;case Dn:Ps(ei,qi,bi,Pt,Ft);break;case nc:Ps(ei,qi,bi,Pt,Ft),ou(Pt,Ft,bi,1,0);break;case Vs:Do(ei,qi,bi,Pt,Ft);break;default:i(0)}He+=Qe,Ut+=ci}P.Ma+=Fe}else alert("todo:EmitRescaledRowsYUVA");i(P.Ma<=Q.height)}}P.C=j,i(P.C<=P.i)}function Ke(P){var j;if(0<P.ua)return 0;for(j=0;j<P.Wb;++j){var Q=P.Ya[j].G,le=P.Ya[j].H;if(0<Q[1][le[1]+0].g||0<Q[2][le[2]+0].g||0<Q[3][le[3]+0].g)return 0}return 1}function et(P,j,Q,le,Ae,Fe){if(P.Z!=0){var Oe=P.qd,He=P.rd;for(i(C[P.Z]!=null);j<Q;++j)C[P.Z](Oe,He,le,Ae,le,Ae,Fe),Oe=le,He=Ae,Ae+=Fe;P.qd=Oe,P.rd=He}}function wt(P,j){var Q=P.l.ma,le=Q.Z==0||Q.Z==1?P.l.j:P.C;if(le=P.C<le?le:P.C,i(j<=P.l.o),j>le){var Ae=P.l.width,Fe=Q.ca,Oe=Q.tb+Ae*le,He=P.V,Qe=P.Ba+P.c*le,ct=P.gc;i(P.ab==1),i(ct[0].hc==3),ec(ct[0],le,j,He,Qe,Fe,Oe),et(Q,le,j,Fe,Oe,Ae)}P.C=P.Ma=j}function De(P,j,Q,le,Ae,Fe,Oe){var He=P.$/le,Qe=P.$%le,ct=P.m,Ut=P.s,ci=Q+P.$,li=ci;Ae=Q+le*Ae;var ei=Q+le*Fe,qi=280+Ut.ua,bi=P.Pb?He:16777216,Pt=0<Ut.ua?Ut.Wa:null,Ft=Ut.wc,Pi=ci<ei?de(Ut,Qe,He):null;i(P.C<Fe),i(ei<=Ae);var Ni=!1;e:for(;;){for(;Ni||ci<ei;){var Ci=0;if(He>=bi){var mr=ci-Q;i((bi=P).Pb),bi.wd=bi.m,bi.xd=mr,0<bi.s.ua&&Zt(bi.s.Wa,bi.s.vb),bi=He+au}if(Qe&Ft||(Pi=de(Ut,Qe,He)),i(Pi!=null),Pi.Qb&&(j[ci]=Pi.qb,Ni=!0),!Ni)if(Ct(ct),Pi.jc){Ci=ct,mr=j;var cr=ci,tn=Pi.pd[it(Ci)&ss-1];i(Pi.jc),256>tn.g?(bt(Ci,Ci.u+tn.g),mr[cr]=tn.value,Ci=0):(bt(Ci,Ci.u+tn.g-256),i(256<=tn.value),Ci=tn.value),Ci==0&&(Ni=!0)}else Ci=eo(Pi.G[0],Pi.H[0],ct);if(ct.h)break;if(Ni||256>Ci){if(!Ni)if(Pi.nd)j[ci]=(Pi.qb|Ci<<8)>>>0;else{if(Ct(ct),Ni=eo(Pi.G[1],Pi.H[1],ct),Ct(ct),mr=eo(Pi.G[2],Pi.H[2],ct),cr=eo(Pi.G[3],Pi.H[3],ct),ct.h)break;j[ci]=(cr<<24|Ni<<16|Ci<<8|mr)>>>0}if(Ni=!1,++ci,++Qe>=le&&(Qe=0,++He,Oe!=null&&He<=Fe&&!(He%16)&&Oe(P,He),Pt!=null))for(;li<ci;)Ci=j[li++],Pt.X[(506832829*Ci&4294967295)>>>Pt.Mb]=Ci}else if(280>Ci){if(Ci=Le(Ci-256,ct),mr=eo(Pi.G[4],Pi.H[4],ct),Ct(ct),mr=$n(le,mr=Le(mr,ct)),ct.h)break;if(ci-Q<mr||Ae-ci<Ci)break e;for(cr=0;cr<Ci;++cr)j[ci+cr]=j[ci+cr-mr];for(ci+=Ci,Qe+=Ci;Qe>=le;)Qe-=le,++He,Oe!=null&&He<=Fe&&!(He%16)&&Oe(P,He);if(i(ci<=Ae),Qe&Ft&&(Pi=de(Ut,Qe,He)),Pt!=null)for(;li<ci;)Ci=j[li++],Pt.X[(506832829*Ci&4294967295)>>>Pt.Mb]=Ci}else{if(!(Ci<qi))break e;for(Ni=Ci-280,i(Pt!=null);li<ci;)Ci=j[li++],Pt.X[(506832829*Ci&4294967295)>>>Pt.Mb]=Ci;Ci=ci,i(!(Ni>>>(mr=Pt).Xa)),j[Ci]=mr.X[Ni],Ni=!0}Ni||i(ct.h==Re(ct))}if(P.Pb&&ct.h&&ci<Ae)i(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&Zt(P.s.vb,P.s.Wa);else{if(ct.h)break e;Oe!=null&&Oe(P,He>Fe?Fe:He),P.a=0,P.$=ci-Q}return 1}return P.a=3,0}function Nt(P){i(P!=null),P.vc=null,P.yc=null,P.Ya=null;var j=P.Wa;j!=null&&(j.X=null),P.vb=null,i(P!=null)}function Tt(){var P=new eu;return P==null?null:(P.a=0,P.xb=k,Ei("Predictor","VP8LPredictors"),Ei("Predictor","VP8LPredictors_C"),Ei("PredictorAdd","VP8LPredictorsAdd"),Ei("PredictorAdd","VP8LPredictorsAdd_C"),pl=ze,ls=te,ra=ot,na=mt,Ps=Jt,Do=hr,Ma=xr,me.VP8LMapColor32b=Ja,me.VP8LMapColor8b=tc,P)}function jt(P,j,Q,le,Ae){var Fe=1,Oe=[P],He=[j],Qe=le.m,ct=le.s,Ut=null,ci=0;e:for(;;){if(Q)for(;Fe&&Mt(Qe,1);){var li=Oe,ei=He,qi=le,bi=1,Pt=qi.m,Ft=qi.gc[qi.ab],Pi=Mt(Pt,2);if(qi.Oc&1<<Pi)Fe=0;else{switch(qi.Oc|=1<<Pi,Ft.hc=Pi,Ft.Ea=li[0],Ft.nc=ei[0],Ft.K=[null],++qi.ab,i(4>=qi.ab),Pi){case 0:case 1:Ft.b=Mt(Pt,3)+2,bi=jt(nr(Ft.Ea,Ft.b),nr(Ft.nc,Ft.b),0,qi,Ft.K),Ft.K=Ft.K[0];break;case 3:var Ni,Ci=Mt(Pt,8)+1,mr=16<Ci?0:4<Ci?1:2<Ci?2:3;if(li[0]=nr(Ft.Ea,mr),Ft.b=mr,Ni=bi=jt(Ci,1,0,qi,Ft.K)){var cr,tn=Ci,gr=Ft,Vn=1<<(8>>gr.b),Wn=m(Vn);if(Wn==null)Ni=0;else{var In=gr.K[0],xn=gr.w;for(Wn[0]=gr.K[0][0],cr=1;cr<1*tn;++cr)Wn[cr]=di(In[xn+cr],Wn[cr-1]);for(;cr<4*Vn;++cr)Wn[cr]=0;gr.K[0]=null,gr.K[0]=Wn,Ni=1}}bi=Ni;break;case 2:break;default:i(0)}Fe=bi}}if(Oe=Oe[0],He=He[0],Fe&&Mt(Qe,1)&&!(Fe=1<=(ci=Mt(Qe,4))&&11>=ci)){le.a=3;break e}var jn;if(jn=Fe)t:{var Zn,An,$o,hn=le,Lo=Oe,us=He,Bn=ci,zo=Q,es=hn.m,cs=hn.s,so=[null],Gs=1,ga=0,Qn=Yr[Bn];i:for(;;){if(zo&&Mt(es,1)){var Wo=Mt(es,3)+2,vl=nr(Lo,Wo),ya=nr(us,Wo),Fa=vl*ya;if(!jt(vl,ya,0,hn,so))break i;for(so=so[0],cs.xc=Wo,Zn=0;Zn<Fa;++Zn){var Ba=so[Zn]>>8&65535;so[Zn]=Ba,Ba>=Gs&&(Gs=Ba+1)}}if(es.h)break i;for(An=0;5>An;++An){var Po=Jc[An];!An&&0<Bn&&(Po+=1<<Bn),ga<Po&&(ga=Po)}var Kc=b(Gs*Qn,Me),lh=Gs,S0=b(lh,Xe);if(S0==null)var Eu=null;else i(65536>=lh),Eu=S0;var Su=m(ga);if(Eu==null||Su==null||Kc==null){hn.a=1;break i}var Qc=Kc;for(Zn=$o=0;Zn<Gs;++Zn){var va=Eu[Zn],_a=va.G,Iu=va.H,Cu=0,$c=1,oc=0;for(An=0;5>An;++An){Po=Jc[An],_a[An]=Qc,Iu[An]=$o,!An&&0<Bn&&(Po+=1<<Bn);r:{var Tu,sc=Po,Lu=hn,ac=Su,zs=Qc,ks=$o,ts=0,_l=Lu.m,uh=Mt(_l,1);if(p(ac,0,0,sc),uh){var bl=Mt(_l,1)+1,ch=Mt(_l,1),I0=Mt(_l,ch==0?1:8);ac[I0]=1,bl==2&&(ac[I0=Mt(_l,8)]=1);var Lc=1}else{var lc=m(19),C0=Mt(_l,4)+4;if(19<C0){Lu.a=3;var Pc=0;break r}for(Tu=0;Tu<C0;++Tu)lc[ku[Tu]]=Mt(_l,3);var e0=void 0,Mc=void 0,el=Lu,hh=lc,uc=sc,Pu=ac,Hs=0,wl=el.m,fh=8,T0=b(128,Me);o:for(;Se(T0,0,7,hh,19);){if(Mt(wl,1)){var of=2+2*Mt(wl,3);if((e0=2+Mt(wl,of))>uc)break o}else e0=uc;for(Mc=0;Mc<uc&&e0--;){Ct(wl);var Mu=T0[0+(127&it(wl))];bt(wl,wl.u+Mu.g);var Gl=Mu.value;if(16>Gl)Pu[Mc++]=Gl,Gl!=0&&(fh=Gl);else{var dh=Gl==16,lu=Gl-16,Dc=Da[lu],L0=Mt(wl,Yc[lu])+Dc;if(Mc+L0>uc)break o;for(var sf=dh?fh:0;0<L0--;)Pu[Mc++]=sf}}Hs=1;break o}Hs||(el.a=3),Lc=Hs}(Lc=Lc&&!_l.h)&&(ts=Se(zs,ks,8,ac,sc)),Lc&&ts!=0?Pc=ts:(Lu.a=3,Pc=0)}if(Pc==0)break i;if($c&&za[An]==1&&($c=Qc[$o].g==0),Cu+=Qc[$o].g,$o+=Pc,3>=An){var zc,P0=Su[0];for(zc=1;zc<Po;++zc)Su[zc]>P0&&(P0=Su[zc]);oc+=P0}}if(va.nd=$c,va.Qb=0,$c&&(va.qb=(_a[3][Iu[3]+0].value<<24|_a[1][Iu[1]+0].value<<16|_a[2][Iu[2]+0].value)>>>0,Cu==0&&256>_a[0][Iu[0]+0].value&&(va.Qb=1,va.qb+=_a[0][Iu[0]+0].value<<8)),va.jc=!va.Qb&&6>oc,va.jc){var Ws,Hl=va;for(Ws=0;Ws<ss;++Ws){var uu=Ws,xl=Hl.pd[uu],t0=Hl.G[0][Hl.H[0]+uu];256<=t0.value?(xl.g=t0.g+256,xl.value=t0.value):(xl.g=0,xl.value=0,uu>>=Xn(t0,8,xl),uu>>=Xn(Hl.G[1][Hl.H[1]+uu],16,xl),uu>>=Xn(Hl.G[2][Hl.H[2]+uu],0,xl),Xn(Hl.G[3][Hl.H[3]+uu],24,xl))}}}cs.vc=so,cs.Wb=Gs,cs.Ya=Eu,cs.yc=Kc,jn=1;break t}jn=0}if(!(Fe=jn)){le.a=3;break e}if(0<ci){if(ct.ua=1<<ci,!er(ct.Wa,ci)){le.a=1,Fe=0;break e}}else ct.ua=0;var cu=le,ph=Oe,vo=He,hu=cu.s,i0=hu.xc;if(cu.c=ph,cu.i=vo,hu.md=nr(ph,i0),hu.wc=i0==0?-1:(1<<i0)-1,Q){le.xb=_;break e}if((Ut=m(Oe*He))==null){le.a=1,Fe=0;break e}Fe=(Fe=De(le,Ut,0,Oe,He,He,null))&&!Qe.h;break e}return Fe?(Ae!=null?Ae[0]=Ut:(i(Ut==null),i(Q)),le.$=0,Q||Nt(ct)):Nt(ct),Fe}function ki(P,j){var Q=P.c*P.i,le=Q+j+16*j;return i(P.c<=j),P.V=m(le),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+Q+j,1)}function Ri(P,j){var Q=P.C,le=j-Q,Ae=P.V,Fe=P.Ba+P.c*Q;for(i(j<=P.l.o);0<le;){var Oe=16<le?16:le,He=P.l.ma,Qe=P.l.width,ct=Qe*Oe,Ut=He.ca,ci=He.tb+Qe*Q,li=P.Ta,ei=P.Ua;fe(P,Oe,Ae,Fe),ic(li,ei,Ut,ci,ct),et(He,Q,Q+Oe,Ut,ci,Qe),le-=Oe,Ae+=Oe*P.c,Q+=Oe}i(Q==j),P.C=P.Ma=j}function wi(){this.ub=this.yd=this.td=this.Rb=0}function kr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sr(){this.Fb=this.Bb=this.Cb=0,this.Zb=m(4),this.Lb=m(4)}function ji(){this.Yb=function(){var P=[];return function j(Q,le,Ae){for(var Fe=Ae[le],Oe=0;Oe<Fe&&(Q.push(Ae.length>le+1?[]:0),!(Ae.length<le+1));Oe++)j(Q[Oe],le+1,Ae)}(P,0,[3,11]),P}()}function Gr(){this.jb=m(3),this.Wc=h([4,8],ji),this.Xc=h([4,17],ji)}function jr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new m(4),this.od=new m(4)}function dn(){this.ld=this.La=this.dd=this.tc=0}function $r(){this.Na=this.la=0}function un(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bn(){this.ad=m(384),this.Za=0,this.Ob=m(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function On(){this.uc=this.M=this.Nb=0,this.wa=Array(new dn),this.Y=0,this.ya=Array(new bn),this.aa=0,this.l=new bo}function _o(){this.y=m(16),this.f=m(8),this.ea=m(8)}function qn(){this.cb=this.a=0,this.sc="",this.m=new qt,this.Od=new wi,this.Kc=new kr,this.ed=new jr,this.Qa=new Sr,this.Ic=this.$c=this.Aa=0,this.D=new On,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=b(8,qt),this.ia=0,this.pb=b(4,un),this.Pa=new Gr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _o),this.Hd=0,this.rb=Array(new $r),this.sb=0,this.wa=Array(new dn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bn),this.L=this.aa=0,this.gd=h([4,2],dn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ca(){var P=new qn;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,uo||(uo=Wr)),P}function to(P,j,Q){return P.a==0&&(P.a=j,P.sc=Q,P.cb=0),0}function xt(P,j,Q){return 3<=Q&&P[j+0]==157&&P[j+1]==1&&P[j+2]==42}function Ur(P,j){if(P==null)return 0;if(P.a=0,P.sc="OK",j==null)return to(P,2,"null VP8Io passed to VP8GetHeaders()");var Q=j.data,le=j.w,Ae=j.ha;if(4>Ae)return to(P,7,"Truncated header.");var Fe=Q[le+0]|Q[le+1]<<8|Q[le+2]<<16,Oe=P.Od;if(Oe.Rb=!(1&Fe),Oe.td=Fe>>1&7,Oe.yd=Fe>>4&1,Oe.ub=Fe>>5,3<Oe.td)return to(P,3,"Incorrect keyframe parameters.");if(!Oe.yd)return to(P,4,"Frame not displayable.");le+=3,Ae-=3;var He=P.Kc;if(Oe.Rb){if(7>Ae)return to(P,7,"cannot parse picture header");if(!xt(Q,le,Ae))return to(P,3,"Bad code word");He.c=16383&(Q[le+4]<<8|Q[le+3]),He.Td=Q[le+4]>>6,He.i=16383&(Q[le+6]<<8|Q[le+5]),He.Ud=Q[le+6]>>6,le+=7,Ae-=7,P.za=He.c+15>>4,P.Ub=He.i+15>>4,j.width=He.c,j.height=He.i,j.Da=0,j.j=0,j.v=0,j.va=j.width,j.o=j.height,j.da=0,j.ib=j.width,j.hb=j.height,j.U=j.width,j.T=j.height,p((Fe=P.Pa).jb,0,255,Fe.jb.length),i((Fe=P.Qa)!=null),Fe.Cb=0,Fe.Bb=0,Fe.Fb=1,p(Fe.Zb,0,0,Fe.Zb.length),p(Fe.Lb,0,0,Fe.Lb)}if(Oe.ub>Ae)return to(P,7,"bad partition length");_t(Fe=P.m,Q,le,Oe.ub),le+=Oe.ub,Ae-=Oe.ub,Oe.Rb&&(He.Ld=Ht(Fe),He.Kd=Ht(Fe)),He=P.Qa;var Qe,ct=P.Pa;if(i(Fe!=null),i(He!=null),He.Cb=Ht(Fe),He.Cb){if(He.Bb=Ht(Fe),Ht(Fe)){for(He.Fb=Ht(Fe),Qe=0;4>Qe;++Qe)He.Zb[Qe]=Ht(Fe)?Gt(Fe,7):0;for(Qe=0;4>Qe;++Qe)He.Lb[Qe]=Ht(Fe)?Gt(Fe,6):0}if(He.Bb)for(Qe=0;3>Qe;++Qe)ct.jb[Qe]=Ht(Fe)?pt(Fe,8):255}else He.Bb=0;if(Fe.Ka)return to(P,3,"cannot parse segment header");if((He=P.ed).zd=Ht(Fe),He.Tb=pt(Fe,6),He.wb=pt(Fe,3),He.Pc=Ht(Fe),He.Pc&&Ht(Fe)){for(ct=0;4>ct;++ct)Ht(Fe)&&(He.vd[ct]=Gt(Fe,6));for(ct=0;4>ct;++ct)Ht(Fe)&&(He.od[ct]=Gt(Fe,6))}if(P.L=He.Tb==0?0:He.zd?1:2,Fe.Ka)return to(P,3,"cannot parse filter header");var Ut=Ae;if(Ae=Qe=le,le=Qe+Ut,He=Ut,P.Xb=(1<<pt(P.m,2))-1,Ut<3*(ct=P.Xb))Q=7;else{for(Qe+=3*ct,He-=3*ct,Ut=0;Ut<ct;++Ut){var ci=Q[Ae+0]|Q[Ae+1]<<8|Q[Ae+2]<<16;ci>He&&(ci=He),_t(P.Jc[+Ut],Q,Qe,ci),Qe+=ci,He-=ci,Ae+=3}_t(P.Jc[+ct],Q,Qe,He),Q=Qe<le?0:5}if(Q!=0)return to(P,Q,"cannot parse partitions");for(Q=pt(Qe=P.m,7),Ae=Ht(Qe)?Gt(Qe,4):0,le=Ht(Qe)?Gt(Qe,4):0,He=Ht(Qe)?Gt(Qe,4):0,ct=Ht(Qe)?Gt(Qe,4):0,Qe=Ht(Qe)?Gt(Qe,4):0,Ut=P.Qa,ci=0;4>ci;++ci){if(Ut.Cb){var li=Ut.Zb[ci];Ut.Fb||(li+=Q)}else{if(0<ci){P.pb[ci]=P.pb[0];continue}li=Q}var ei=P.pb[ci];ei.Sc[0]=Au[Qo(li+Ae,127)],ei.Sc[1]=Ho[Qo(li+0,127)],ei.Eb[0]=2*Au[Qo(li+le,127)],ei.Eb[1]=101581*Ho[Qo(li+He,127)]>>16,8>ei.Eb[1]&&(ei.Eb[1]=8),ei.Qc[0]=Au[Qo(li+ct,117)],ei.Qc[1]=Ho[Qo(li+Qe,127)],ei.lc=li+Qe}if(!Oe.Rb)return to(P,4,"Not a key frame.");for(Ht(Fe),Oe=P.Pa,Q=0;4>Q;++Q){for(Ae=0;8>Ae;++Ae)for(le=0;3>le;++le)for(He=0;11>He;++He)ct=Wt(Fe,Oo[Q][Ae][le][He])?pt(Fe,8):yl[Q][Ae][le][He],Oe.Wc[Q][Ae].Yb[le][He]=ct;for(Ae=0;17>Ae;++Ae)Oe.Xc[Q][Ae]=Oe.Wc[Q][Tc[Ae]]}return P.kc=Ht(Fe),P.kc&&(P.Bd=pt(Fe,8)),P.cb=1}function Wr(P,j,Q,le,Ae,Fe,Oe){var He=j[Ae].Yb[Q];for(Q=0;16>Ae;++Ae){if(!Wt(P,He[Q+0]))return Ae;for(;!Wt(P,He[Q+1]);)if(He=j[++Ae].Yb[0],Q=0,Ae==16)return 16;var Qe=j[Ae+1].Yb;if(Wt(P,He[Q+2])){var ct=P,Ut=0;if(Wt(ct,(li=He)[(ci=Q)+3]))if(Wt(ct,li[ci+6])){for(He=0,ci=2*(Ut=Wt(ct,li[ci+8]))+(li=Wt(ct,li[ci+9+Ut])),Ut=0,li=gl[ci];li[He];++He)Ut+=Ut+Wt(ct,li[He]);Ut+=3+(8<<ci)}else Wt(ct,li[ci+7])?(Ut=7+2*Wt(ct,165),Ut+=Wt(ct,145)):Ut=5+Wt(ct,159);else Ut=Wt(ct,li[ci+4])?3+Wt(ct,li[ci+5]):2;He=Qe[2]}else Ut=1,He=Qe[1];Qe=Oe+Na[Ae],0>(ct=P).b&&Ot(ct);var ci,li=ct.b,ei=(ci=ct.Ca>>1)-(ct.I>>li)>>31;--ct.b,ct.Ca+=ei,ct.Ca|=1,ct.I-=(ci+1&ei)<<li,Fe[Qe]=((Ut^ei)-ei)*le[(0<Ae)+0]}return 16}function pn(P){var j=P.rb[P.sb-1];j.la=0,j.Na=0,p(P.zc,0,0,P.zc.length),P.ja=0}function mo(P,j){if(P==null)return 0;if(j==null)return to(P,2,"NULL VP8Io parameter in VP8Decode().");if(!P.cb&&!Ur(P,j))return 0;if(i(P.cb),j.ac==null||j.ac(j)){j.ob&&(P.L=0);var Q=sr[P.L];if(P.L==2?(P.yb=0,P.zb=0):(P.yb=j.v-Q>>4,P.zb=j.j-Q>>4,0>P.yb&&(P.yb=0),0>P.zb&&(P.zb=0)),P.Va=j.o+15+Q>>4,P.Hb=j.va+15+Q>>4,P.Hb>P.za&&(P.Hb=P.za),P.Va>P.Ub&&(P.Va=P.Ub),0<P.L){var le=P.ed;for(Q=0;4>Q;++Q){var Ae;if(P.Qa.Cb){var Fe=P.Qa.Lb[Q];P.Qa.Fb||(Fe+=le.Tb)}else Fe=le.Tb;for(Ae=0;1>=Ae;++Ae){var Oe=P.gd[Q][Ae],He=Fe;if(le.Pc&&(He+=le.vd[0],Ae&&(He+=le.od[0])),0<(He=0>He?0:63<He?63:He)){var Qe=He;0<le.wb&&(Qe=4<le.wb?Qe>>2:Qe>>1)>9-le.wb&&(Qe=9-le.wb),1>Qe&&(Qe=1),Oe.dd=Qe,Oe.tc=2*He+Qe,Oe.ld=40<=He?2:15<=He?1:0}else Oe.tc=0;Oe.La=Ae}}}Q=0}else to(P,6,"Frame setup failed"),Q=P.a;if(Q=Q==0){if(Q){P.$c=0,0<P.Aa||(P.Ic=nn);e:{Q=P.Ic,le=4*(Qe=P.za);var ct=32*Qe,Ut=Qe+1,ci=0<P.L?Qe*(0<P.Aa?2:1):0,li=(P.Aa==2?2:1)*Qe;if((Oe=le+832+(Ae=3*(16*Q+sr[P.L])/2*ct)+(Fe=P.Fa!=null&&0<P.Fa.length?P.Kc.c*P.Kc.i:0))!=Oe)Q=0;else{if(Oe>P.Vb){if(P.Vb=0,P.Ec=m(Oe),P.Fc=0,P.Ec==null){Q=to(P,1,"no memory during frame initialization.");break e}P.Vb=Oe}Oe=P.Ec,He=P.Fc,P.Ac=Oe,P.Bc=He,He+=le,P.Gd=b(ct,_o),P.Hd=0,P.rb=b(Ut+1,$r),P.sb=1,P.wa=ci?b(ci,dn):null,P.Y=0,P.D.Nb=0,P.D.wa=P.wa,P.D.Y=P.Y,0<P.Aa&&(P.D.Y+=Qe),i(!0),P.oc=Oe,P.pc=He,He+=832,P.ya=b(li,bn),P.aa=0,P.D.ya=P.ya,P.D.aa=P.aa,P.Aa==2&&(P.D.aa+=Qe),P.R=16*Qe,P.B=8*Qe,Qe=(ct=sr[P.L])*P.R,ct=ct/2*P.B,P.sa=Oe,P.ta=He+Qe,P.qa=P.sa,P.ra=P.ta+16*Q*P.R+ct,P.Ha=P.qa,P.Ia=P.ra+8*Q*P.B+ct,P.$c=0,He+=Ae,P.mb=Fe?Oe:null,P.nb=Fe?He:null,i(He+Fe<=P.Fc+P.Vb),pn(P),p(P.Ac,P.Bc,0,le),Q=1}}if(Q){if(j.ka=0,j.y=P.sa,j.O=P.ta,j.f=P.qa,j.N=P.ra,j.ea=P.Ha,j.Vd=P.Ia,j.fa=P.R,j.Rc=P.B,j.F=null,j.J=0,!rc){for(Q=-255;255>=Q;++Q)Sc[255+Q]=0>Q?-Q:Q;for(Q=-1020;1020>=Q;++Q)Ic[1020+Q]=-128>Q?-128:127<Q?127:Q;for(Q=-112;112>=Q;++Q)Xc[112+Q]=-16>Q?-16:15<Q?15:Q;for(Q=-255;510>=Q;++Q)an[255+Q]=0>Q?0:255<Q?255:Q;rc=1}go=ea,ru=$s,Ms=Jo,Sn=ws,qs=ds,oa=Vo,Qa=bu,nu=Pl,Ol=Ec,ms=$l,$a=Ac,Ro=Ml,dr=Dl,no=zl,kn=fn,Jn=Os,Co=fa,ir=$u,I[0]=St,I[1]=Tl,I[2]=qe,I[3]=ht,I[4]=Et,I[5]=ii,I[6]=ai,I[7]=ni,I[8]=Ii,I[9]=Vt,Ds[0]=Ta,Ds[1]=Ll,Ds[2]=Bs,Ds[3]=Rs,Ds[4]=M,Ds[5]=V,Ds[6]=oe,u[0]=c,u[1]=Wa,u[2]=Gi,u[3]=fr,u[4]=s,u[5]=_i,u[6]=A,Q=1}else Q=0}Q&&(Q=function(ei,qi){for(ei.M=0;ei.M<ei.Va;++ei.M){var bi,Pt=ei.Jc[ei.M&ei.Xb],Ft=ei.m,Pi=ei;for(bi=0;bi<Pi.za;++bi){var Ni=Ft,Ci=Pi,mr=Ci.Ac,cr=Ci.Bc+4*bi,tn=Ci.zc,gr=Ci.ya[Ci.aa+bi];if(Ci.Qa.Bb?gr.$b=Wt(Ni,Ci.Pa.jb[0])?2+Wt(Ni,Ci.Pa.jb[2]):Wt(Ni,Ci.Pa.jb[1]):gr.$b=0,Ci.kc&&(gr.Ad=Wt(Ni,Ci.Bd)),gr.Za=!Wt(Ni,145)+0,gr.Za){var Vn=gr.Ob,Wn=0;for(Ci=0;4>Ci;++Ci){var In,xn=tn[0+Ci];for(In=0;4>In;++In){xn=To[mr[cr+In]][xn];for(var jn=Cc[Wt(Ni,xn[0])];0<jn;)jn=Cc[2*jn+Wt(Ni,xn[jn])];xn=-jn,mr[cr+In]=xn}l(Vn,Wn,mr,cr,4),Wn+=4,tn[0+Ci]=xn}}else xn=Wt(Ni,156)?Wt(Ni,128)?1:3:Wt(Ni,163)?2:0,gr.Ob[0]=xn,p(mr,cr,xn,4),p(tn,0,xn,4);gr.Dd=Wt(Ni,142)?Wt(Ni,114)?Wt(Ni,183)?1:3:2:0}if(Pi.m.Ka)return to(ei,7,"Premature end-of-partition0 encountered.");for(;ei.ja<ei.za;++ei.ja){if(Pi=Pt,Ni=(Ft=ei).rb[Ft.sb-1],mr=Ft.rb[Ft.sb+Ft.ja],bi=Ft.ya[Ft.aa+Ft.ja],cr=Ft.kc?bi.Ad:0)Ni.la=mr.la=0,bi.Za||(Ni.Na=mr.Na=0),bi.Hc=0,bi.Gc=0,bi.ia=0;else{var Zn,An;if(Ni=mr,mr=Pi,cr=Ft.Pa.Xc,tn=Ft.ya[Ft.aa+Ft.ja],gr=Ft.pb[tn.$b],Ci=tn.ad,Vn=0,Wn=Ft.rb[Ft.sb-1],xn=In=0,p(Ci,Vn,0,384),tn.Za)var $o=0,hn=cr[3];else{jn=m(16);var Lo=Ni.Na+Wn.Na;if(Lo=uo(mr,cr[1],Lo,gr.Eb,0,jn,0),Ni.Na=Wn.Na=(0<Lo)+0,1<Lo)go(jn,0,Ci,Vn);else{var us=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)Ci[Vn+jn]=us}$o=1,hn=cr[0]}var Bn=15&Ni.la,zo=15&Wn.la;for(jn=0;4>jn;++jn){var es=1&zo;for(us=An=0;4>us;++us)Bn=Bn>>1|(es=(Lo=uo(mr,hn,Lo=es+(1&Bn),gr.Sc,$o,Ci,Vn))>$o)<<7,An=An<<2|(3<Lo?3:1<Lo?2:Ci[Vn+0]!=0),Vn+=16;Bn>>=4,zo=zo>>1|es<<7,In=(In<<8|An)>>>0}for(hn=Bn,$o=zo>>4,Zn=0;4>Zn;Zn+=2){for(An=0,Bn=Ni.la>>4+Zn,zo=Wn.la>>4+Zn,jn=0;2>jn;++jn){for(es=1&zo,us=0;2>us;++us)Lo=es+(1&Bn),Bn=Bn>>1|(es=0<(Lo=uo(mr,cr[2],Lo,gr.Qc,0,Ci,Vn)))<<3,An=An<<2|(3<Lo?3:1<Lo?2:Ci[Vn+0]!=0),Vn+=16;Bn>>=2,zo=zo>>1|es<<5}xn|=An<<4*Zn,hn|=Bn<<4<<Zn,$o|=(240&zo)<<Zn}Ni.la=hn,Wn.la=$o,tn.Hc=In,tn.Gc=xn,tn.ia=43690&xn?0:gr.ia,cr=!(In|xn)}if(0<Ft.L&&(Ft.wa[Ft.Y+Ft.ja]=Ft.gd[bi.$b][bi.Za],Ft.wa[Ft.Y+Ft.ja].La|=!cr),Pi.Ka)return to(ei,7,"Premature end-of-file encountered.")}if(pn(ei),Ft=qi,Pi=1,bi=(Pt=ei).D,Ni=0<Pt.L&&Pt.M>=Pt.zb&&Pt.M<=Pt.Va,Pt.Aa==0)e:{if(bi.M=Pt.M,bi.uc=Ni,tu(Pt,bi),Pi=1,bi=(An=Pt.D).Nb,Ni=(xn=sr[Pt.L])*Pt.R,mr=xn/2*Pt.B,jn=16*bi*Pt.R,us=8*bi*Pt.B,cr=Pt.sa,tn=Pt.ta-Ni+jn,gr=Pt.qa,Ci=Pt.ra-mr+us,Vn=Pt.Ha,Wn=Pt.Ia-mr+us,zo=(Bn=An.M)==0,In=Bn>=Pt.Va-1,Pt.Aa==2&&tu(Pt,An),An.uc)for(es=(Lo=Pt).D.M,i(Lo.D.uc),An=Lo.yb;An<Lo.Hb;++An){$o=An,hn=es;var cs=(so=(Po=Lo).D).Nb;Zn=Po.R;var so=so.wa[so.Y+$o],Gs=Po.sa,ga=Po.ta+16*cs*Zn+16*$o,Qn=so.dd,Wo=so.tc;if(Wo!=0)if(i(3<=Wo),Po.L==1)0<$o&&Jn(Gs,ga,Zn,Wo+4),so.La&&ir(Gs,ga,Zn,Wo),0<hn&&kn(Gs,ga,Zn,Wo+4),so.La&&Co(Gs,ga,Zn,Wo);else{var vl=Po.B,ya=Po.qa,Fa=Po.ra+8*cs*vl+8*$o,Ba=Po.Ha,Po=Po.Ia+8*cs*vl+8*$o;cs=so.ld,0<$o&&(nu(Gs,ga,Zn,Wo+4,Qn,cs),ms(ya,Fa,Ba,Po,vl,Wo+4,Qn,cs)),so.La&&(Ro(Gs,ga,Zn,Wo,Qn,cs),no(ya,Fa,Ba,Po,vl,Wo,Qn,cs)),0<hn&&(Qa(Gs,ga,Zn,Wo+4,Qn,cs),Ol(ya,Fa,Ba,Po,vl,Wo+4,Qn,cs)),so.La&&($a(Gs,ga,Zn,Wo,Qn,cs),dr(ya,Fa,Ba,Po,vl,Wo,Qn,cs))}}if(Pt.ia&&alert("todo:DitherRow"),Ft.put!=null){if(An=16*Bn,Bn=16*(Bn+1),zo?(Ft.y=Pt.sa,Ft.O=Pt.ta+jn,Ft.f=Pt.qa,Ft.N=Pt.ra+us,Ft.ea=Pt.Ha,Ft.W=Pt.Ia+us):(An-=xn,Ft.y=cr,Ft.O=tn,Ft.f=gr,Ft.N=Ci,Ft.ea=Vn,Ft.W=Wn),In||(Bn-=xn),Bn>Ft.o&&(Bn=Ft.o),Ft.F=null,Ft.J=null,Pt.Fa!=null&&0<Pt.Fa.length&&An<Bn&&(Ft.J=Hn(Pt,Ft,An,Bn-An),Ft.F=Pt.mb,Ft.F==null&&Ft.F.length==0)){Pi=to(Pt,3,"Could not decode alpha data.");break e}An<Ft.j&&(xn=Ft.j-An,An=Ft.j,i(!(1&xn)),Ft.O+=Pt.R*xn,Ft.N+=Pt.B*(xn>>1),Ft.W+=Pt.B*(xn>>1),Ft.F!=null&&(Ft.J+=Ft.width*xn)),An<Bn&&(Ft.O+=Ft.v,Ft.N+=Ft.v>>1,Ft.W+=Ft.v>>1,Ft.F!=null&&(Ft.J+=Ft.v),Ft.ka=An-Ft.j,Ft.U=Ft.va-Ft.v,Ft.T=Bn-An,Pi=Ft.put(Ft))}bi+1!=Pt.Ic||In||(l(Pt.sa,Pt.ta-Ni,cr,tn+16*Pt.R,Ni),l(Pt.qa,Pt.ra-mr,gr,Ci+8*Pt.B,mr),l(Pt.Ha,Pt.Ia-mr,Vn,Wn+8*Pt.B,mr))}if(!Pi)return to(ei,6,"Output aborted.")}return 1}(P,j)),j.bc!=null&&j.bc(j),Q&=1}return Q?(P.cb=0,Q):0}function io(P,j,Q,le,Ae){Ae=P[j+Q+32*le]+(Ae>>3),P[j+Q+32*le]=-256&Ae?0>Ae?0:255:Ae}function Qs(P,j,Q,le,Ae,Fe){io(P,j,0,Q,le+Ae),io(P,j,1,Q,le+Fe),io(P,j,2,Q,le-Fe),io(P,j,3,Q,le-Ae)}function Io(P){return(20091*P>>16)+P}function fs(P,j,Q,le){var Ae,Fe=0,Oe=m(16);for(Ae=0;4>Ae;++Ae){var He=P[j+0]+P[j+8],Qe=P[j+0]-P[j+8],ct=(35468*P[j+4]>>16)-Io(P[j+12]),Ut=Io(P[j+4])+(35468*P[j+12]>>16);Oe[Fe+0]=He+Ut,Oe[Fe+1]=Qe+ct,Oe[Fe+2]=Qe-ct,Oe[Fe+3]=He-Ut,Fe+=4,j++}for(Ae=Fe=0;4>Ae;++Ae)He=(P=Oe[Fe+0]+4)+Oe[Fe+8],Qe=P-Oe[Fe+8],ct=(35468*Oe[Fe+4]>>16)-Io(Oe[Fe+12]),io(Q,le,0,0,He+(Ut=Io(Oe[Fe+4])+(35468*Oe[Fe+12]>>16))),io(Q,le,1,0,Qe+ct),io(Q,le,2,0,Qe-ct),io(Q,le,3,0,He-Ut),Fe++,le+=32}function Vo(P,j,Q,le){var Ae=P[j+0]+4,Fe=35468*P[j+4]>>16,Oe=Io(P[j+4]),He=35468*P[j+1]>>16;Qs(Q,le,0,Ae+Oe,P=Io(P[j+1]),He),Qs(Q,le,1,Ae+Fe,P,He),Qs(Q,le,2,Ae-Fe,P,He),Qs(Q,le,3,Ae-Oe,P,He)}function $s(P,j,Q,le,Ae){fs(P,j,Q,le),Ae&&fs(P,j+16,Q,le+4)}function Jo(P,j,Q,le){ru(P,j+0,Q,le,1),ru(P,j+32,Q,le+128,1)}function ws(P,j,Q,le){var Ae;for(P=P[j+0]+4,Ae=0;4>Ae;++Ae)for(j=0;4>j;++j)io(Q,le,j,Ae,P)}function ds(P,j,Q,le){P[j+0]&&Sn(P,j+0,Q,le),P[j+16]&&Sn(P,j+16,Q,le+4),P[j+32]&&Sn(P,j+32,Q,le+128),P[j+48]&&Sn(P,j+48,Q,le+128+4)}function ea(P,j,Q,le){var Ae,Fe=m(16);for(Ae=0;4>Ae;++Ae){var Oe=P[j+0+Ae]+P[j+12+Ae],He=P[j+4+Ae]+P[j+8+Ae],Qe=P[j+4+Ae]-P[j+8+Ae],ct=P[j+0+Ae]-P[j+12+Ae];Fe[0+Ae]=Oe+He,Fe[8+Ae]=Oe-He,Fe[4+Ae]=ct+Qe,Fe[12+Ae]=ct-Qe}for(Ae=0;4>Ae;++Ae)Oe=(P=Fe[0+4*Ae]+3)+Fe[3+4*Ae],He=Fe[1+4*Ae]+Fe[2+4*Ae],Qe=Fe[1+4*Ae]-Fe[2+4*Ae],ct=P-Fe[3+4*Ae],Q[le+0]=Oe+He>>3,Q[le+16]=ct+Qe>>3,Q[le+32]=Oe-He>>3,Q[le+48]=ct-Qe>>3,le+=64}function Ha(P,j,Q){var le,Ae=j-32,Fe=xs,Oe=255-P[Ae-1];for(le=0;le<Q;++le){var He,Qe=Fe,ct=Oe+P[j-1];for(He=0;He<Q;++He)P[j+He]=Qe[ct+P[Ae+He]];j+=32}}function Tl(P,j){Ha(P,j,4)}function Wa(P,j){Ha(P,j,8)}function Ll(P,j){Ha(P,j,16)}function Bs(P,j){var Q;for(Q=0;16>Q;++Q)l(P,j+32*Q,P,j-32,16)}function Rs(P,j){var Q;for(Q=16;0<Q;--Q)p(P,j,P[j-1],16),j+=32}function Yn(P,j,Q){var le;for(le=0;16>le;++le)p(j,Q+32*le,P,16)}function Ta(P,j){var Q,le=16;for(Q=0;16>Q;++Q)le+=P[j-1+32*Q]+P[j+Q-32];Yn(le>>5,P,j)}function M(P,j){var Q,le=8;for(Q=0;16>Q;++Q)le+=P[j-1+32*Q];Yn(le>>4,P,j)}function V(P,j){var Q,le=8;for(Q=0;16>Q;++Q)le+=P[j+Q-32];Yn(le>>4,P,j)}function oe(P,j){Yn(128,P,j)}function ge(P,j,Q){return P+2*j+Q+2>>2}function qe(P,j){var Q,le=j-32;for(le=new Uint8Array([ge(P[le-1],P[le+0],P[le+1]),ge(P[le+0],P[le+1],P[le+2]),ge(P[le+1],P[le+2],P[le+3]),ge(P[le+2],P[le+3],P[le+4])]),Q=0;4>Q;++Q)l(P,j+32*Q,le,0,le.length)}function ht(P,j){var Q=P[j-1],le=P[j-1+32],Ae=P[j-1+64],Fe=P[j-1+96];si(P,j+0,16843009*ge(P[j-1-32],Q,le)),si(P,j+32,16843009*ge(Q,le,Ae)),si(P,j+64,16843009*ge(le,Ae,Fe)),si(P,j+96,16843009*ge(Ae,Fe,Fe))}function St(P,j){var Q,le=4;for(Q=0;4>Q;++Q)le+=P[j+Q-32]+P[j-1+32*Q];for(le>>=3,Q=0;4>Q;++Q)p(P,j+32*Q,le,4)}function Et(P,j){var Q=P[j-1+0],le=P[j-1+32],Ae=P[j-1+64],Fe=P[j-1-32],Oe=P[j+0-32],He=P[j+1-32],Qe=P[j+2-32],ct=P[j+3-32];P[j+0+96]=ge(le,Ae,P[j-1+96]),P[j+1+96]=P[j+0+64]=ge(Q,le,Ae),P[j+2+96]=P[j+1+64]=P[j+0+32]=ge(Fe,Q,le),P[j+3+96]=P[j+2+64]=P[j+1+32]=P[j+0+0]=ge(Oe,Fe,Q),P[j+3+64]=P[j+2+32]=P[j+1+0]=ge(He,Oe,Fe),P[j+3+32]=P[j+2+0]=ge(Qe,He,Oe),P[j+3+0]=ge(ct,Qe,He)}function ai(P,j){var Q=P[j+1-32],le=P[j+2-32],Ae=P[j+3-32],Fe=P[j+4-32],Oe=P[j+5-32],He=P[j+6-32],Qe=P[j+7-32];P[j+0+0]=ge(P[j+0-32],Q,le),P[j+1+0]=P[j+0+32]=ge(Q,le,Ae),P[j+2+0]=P[j+1+32]=P[j+0+64]=ge(le,Ae,Fe),P[j+3+0]=P[j+2+32]=P[j+1+64]=P[j+0+96]=ge(Ae,Fe,Oe),P[j+3+32]=P[j+2+64]=P[j+1+96]=ge(Fe,Oe,He),P[j+3+64]=P[j+2+96]=ge(Oe,He,Qe),P[j+3+96]=ge(He,Qe,Qe)}function ii(P,j){var Q=P[j-1+0],le=P[j-1+32],Ae=P[j-1+64],Fe=P[j-1-32],Oe=P[j+0-32],He=P[j+1-32],Qe=P[j+2-32],ct=P[j+3-32];P[j+0+0]=P[j+1+64]=Fe+Oe+1>>1,P[j+1+0]=P[j+2+64]=Oe+He+1>>1,P[j+2+0]=P[j+3+64]=He+Qe+1>>1,P[j+3+0]=Qe+ct+1>>1,P[j+0+96]=ge(Ae,le,Q),P[j+0+64]=ge(le,Q,Fe),P[j+0+32]=P[j+1+96]=ge(Q,Fe,Oe),P[j+1+32]=P[j+2+96]=ge(Fe,Oe,He),P[j+2+32]=P[j+3+96]=ge(Oe,He,Qe),P[j+3+32]=ge(He,Qe,ct)}function ni(P,j){var Q=P[j+0-32],le=P[j+1-32],Ae=P[j+2-32],Fe=P[j+3-32],Oe=P[j+4-32],He=P[j+5-32],Qe=P[j+6-32],ct=P[j+7-32];P[j+0+0]=Q+le+1>>1,P[j+1+0]=P[j+0+64]=le+Ae+1>>1,P[j+2+0]=P[j+1+64]=Ae+Fe+1>>1,P[j+3+0]=P[j+2+64]=Fe+Oe+1>>1,P[j+0+32]=ge(Q,le,Ae),P[j+1+32]=P[j+0+96]=ge(le,Ae,Fe),P[j+2+32]=P[j+1+96]=ge(Ae,Fe,Oe),P[j+3+32]=P[j+2+96]=ge(Fe,Oe,He),P[j+3+64]=ge(Oe,He,Qe),P[j+3+96]=ge(He,Qe,ct)}function Vt(P,j){var Q=P[j-1+0],le=P[j-1+32],Ae=P[j-1+64],Fe=P[j-1+96];P[j+0+0]=Q+le+1>>1,P[j+2+0]=P[j+0+32]=le+Ae+1>>1,P[j+2+32]=P[j+0+64]=Ae+Fe+1>>1,P[j+1+0]=ge(Q,le,Ae),P[j+3+0]=P[j+1+32]=ge(le,Ae,Fe),P[j+3+32]=P[j+1+64]=ge(Ae,Fe,Fe),P[j+3+64]=P[j+2+64]=P[j+0+96]=P[j+1+96]=P[j+2+96]=P[j+3+96]=Fe}function Ii(P,j){var Q=P[j-1+0],le=P[j-1+32],Ae=P[j-1+64],Fe=P[j-1+96],Oe=P[j-1-32],He=P[j+0-32],Qe=P[j+1-32],ct=P[j+2-32];P[j+0+0]=P[j+2+32]=Q+Oe+1>>1,P[j+0+32]=P[j+2+64]=le+Q+1>>1,P[j+0+64]=P[j+2+96]=Ae+le+1>>1,P[j+0+96]=Fe+Ae+1>>1,P[j+3+0]=ge(He,Qe,ct),P[j+2+0]=ge(Oe,He,Qe),P[j+1+0]=P[j+3+32]=ge(Q,Oe,He),P[j+1+32]=P[j+3+64]=ge(le,Q,Oe),P[j+1+64]=P[j+3+96]=ge(Ae,le,Q),P[j+1+96]=ge(Fe,Ae,le)}function Gi(P,j){var Q;for(Q=0;8>Q;++Q)l(P,j+32*Q,P,j-32,8)}function fr(P,j){var Q;for(Q=0;8>Q;++Q)p(P,j,P[j-1],8),j+=32}function Je(P,j,Q){var le;for(le=0;8>le;++le)p(j,Q+32*le,P,8)}function c(P,j){var Q,le=8;for(Q=0;8>Q;++Q)le+=P[j+Q-32]+P[j-1+32*Q];Je(le>>4,P,j)}function _i(P,j){var Q,le=4;for(Q=0;8>Q;++Q)le+=P[j+Q-32];Je(le>>3,P,j)}function s(P,j){var Q,le=4;for(Q=0;8>Q;++Q)le+=P[j-1+32*Q];Je(le>>3,P,j)}function A(P,j){Je(128,P,j)}function tr(P,j,Q){var le=P[j-Q],Ae=P[j+0],Fe=3*(Ae-le)+wu[1020+P[j-2*Q]-P[j+Q]],Oe=yo[112+(Fe+4>>3)];P[j-Q]=xs[255+le+yo[112+(Fe+3>>3)]],P[j+0]=xs[255+Ae-Oe]}function zr(P,j,Q,le){var Ae=P[j+0],Fe=P[j+Q];return fo[255+P[j-2*Q]-P[j-Q]]>le||fo[255+Fe-Ae]>le}function Gn(P,j,Q,le){return 4*fo[255+P[j-Q]-P[j+0]]+fo[255+P[j-2*Q]-P[j+Q]]<=le}function W(P,j,Q,le,Ae){var Fe=P[j-3*Q],Oe=P[j-2*Q],He=P[j-Q],Qe=P[j+0],ct=P[j+Q],Ut=P[j+2*Q],ci=P[j+3*Q];return 4*fo[255+He-Qe]+fo[255+Oe-ct]>le?0:fo[255+P[j-4*Q]-Fe]<=Ae&&fo[255+Fe-Oe]<=Ae&&fo[255+Oe-He]<=Ae&&fo[255+ci-Ut]<=Ae&&fo[255+Ut-ct]<=Ae&&fo[255+ct-Qe]<=Ae}function fn(P,j,Q,le){var Ae=2*le+1;for(le=0;16>le;++le)Gn(P,j+le,Q,Ae)&&tr(P,j+le,Q)}function Os(P,j,Q,le){var Ae=2*le+1;for(le=0;16>le;++le)Gn(P,j+le*Q,1,Ae)&&tr(P,j+le*Q,1)}function fa(P,j,Q,le){var Ae;for(Ae=3;0<Ae;--Ae)fn(P,j+=4*Q,Q,le)}function $u(P,j,Q,le){var Ae;for(Ae=3;0<Ae;--Ae)Os(P,j+=4,Q,le)}function Za(P,j,Q,le,Ae,Fe,Oe,He){for(Fe=2*Fe+1;0<Ae--;){if(W(P,j,Q,Fe,Oe))if(zr(P,j,Q,He))tr(P,j,Q);else{var Qe=P,ct=j,Ut=Q,ci=Qe[ct-2*Ut],li=Qe[ct-Ut],ei=Qe[ct+0],qi=Qe[ct+Ut],bi=Qe[ct+2*Ut],Pt=27*(Pi=wu[1020+3*(ei-li)+wu[1020+ci-qi]])+63>>7,Ft=18*Pi+63>>7,Pi=9*Pi+63>>7;Qe[ct-3*Ut]=xs[255+Qe[ct-3*Ut]+Pi],Qe[ct-2*Ut]=xs[255+ci+Ft],Qe[ct-Ut]=xs[255+li+Pt],Qe[ct+0]=xs[255+ei-Pt],Qe[ct+Ut]=xs[255+qi-Ft],Qe[ct+2*Ut]=xs[255+bi-Pi]}j+=le}}function ps(P,j,Q,le,Ae,Fe,Oe,He){for(Fe=2*Fe+1;0<Ae--;){if(W(P,j,Q,Fe,Oe))if(zr(P,j,Q,He))tr(P,j,Q);else{var Qe=P,ct=j,Ut=Q,ci=Qe[ct-Ut],li=Qe[ct+0],ei=Qe[ct+Ut],qi=yo[112+((bi=3*(li-ci))+4>>3)],bi=yo[112+(bi+3>>3)],Pt=qi+1>>1;Qe[ct-2*Ut]=xs[255+Qe[ct-2*Ut]+Pt],Qe[ct-Ut]=xs[255+ci+bi],Qe[ct+0]=xs[255+li-qi],Qe[ct+Ut]=xs[255+ei-Pt]}j+=le}}function bu(P,j,Q,le,Ae,Fe){Za(P,j,Q,1,16,le,Ae,Fe)}function Pl(P,j,Q,le,Ae,Fe){Za(P,j,1,Q,16,le,Ae,Fe)}function Ac(P,j,Q,le,Ae,Fe){var Oe;for(Oe=3;0<Oe;--Oe)ps(P,j+=4*Q,Q,1,16,le,Ae,Fe)}function Ml(P,j,Q,le,Ae,Fe){var Oe;for(Oe=3;0<Oe;--Oe)ps(P,j+=4,1,Q,16,le,Ae,Fe)}function Ec(P,j,Q,le,Ae,Fe,Oe,He){Za(P,j,Ae,1,8,Fe,Oe,He),Za(Q,le,Ae,1,8,Fe,Oe,He)}function $l(P,j,Q,le,Ae,Fe,Oe,He){Za(P,j,1,Ae,8,Fe,Oe,He),Za(Q,le,1,Ae,8,Fe,Oe,He)}function Dl(P,j,Q,le,Ae,Fe,Oe,He){ps(P,j+4*Ae,Ae,1,8,Fe,Oe,He),ps(Q,le+4*Ae,Ae,1,8,Fe,Oe,He)}function zl(P,j,Q,le,Ae,Fe,Oe,He){ps(P,j+4,1,Ae,8,Fe,Oe,He),ps(Q,le+4,1,Ae,8,Fe,Oe,He)}function cl(){this.ba=new Pn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Nl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function br(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function yr(){this.ua=0,this.Wa=new yt,this.vb=new yt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Xe,this.yc=new Me}function eu(){this.xb=this.a=0,this.l=new bo,this.ca=new Pn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ve,this.Pb=0,this.wd=new ve,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new yr,this.ab=0,this.gc=b(4,br),this.Oc=0}function da(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function js(P,j,Q,le,Ae,Fe,Oe){for(P=P==null?0:P[j+0],j=0;j<Oe;++j)Ae[Fe+j]=P+Q[le+j]&255,P=Ae[Fe+j]}function hl(P,j,Q,le,Ae,Fe,Oe){var He;if(P==null)js(null,null,Q,le,Ae,Fe,Oe);else for(He=0;He<Oe;++He)Ae[Fe+He]=P[j+He]+Q[le+He]&255}function Us(P,j,Q,le,Ae,Fe,Oe){if(P==null)js(null,null,Q,le,Ae,Fe,Oe);else{var He,Qe=P[j+0],ct=Qe,Ut=Qe;for(He=0;He<Oe;++He)ct=Ut+(Qe=P[j+He])-ct,Ut=Q[le+He]+(-256&ct?0>ct?0:255:ct)&255,ct=Qe,Ae[Fe+He]=Ut}}function Hn(P,j,Q,le){var Ae=j.width,Fe=j.o;if(i(P!=null&&j!=null),0>Q||0>=le||Q+le>Fe)return null;if(!P.Cc){if(P.ga==null){var Oe;if(P.ga=new da,(Oe=P.ga==null)||(Oe=j.width*j.o,i(P.Gb.length==0),P.Gb=m(Oe),P.Uc=0,P.Gb==null?Oe=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,Oe=1),Oe=!Oe),!Oe){Oe=P.ga;var He=P.Fa,Qe=P.P,ct=P.qc,Ut=P.mb,ci=P.nb,li=Qe+1,ei=ct-1,qi=Oe.l;if(i(He!=null&&Ut!=null&&j!=null),C[0]=null,C[1]=js,C[2]=hl,C[3]=Us,Oe.ca=Ut,Oe.tb=ci,Oe.c=j.width,Oe.i=j.height,i(0<Oe.c&&0<Oe.i),1>=ct)j=0;else if(Oe.$a=He[Qe+0]>>0&3,Oe.Z=He[Qe+0]>>2&3,Oe.Lc=He[Qe+0]>>4&3,Qe=He[Qe+0]>>6&3,0>Oe.$a||1<Oe.$a||4<=Oe.Z||1<Oe.Lc||Qe)j=0;else if(qi.put=Qr,qi.ac=Tr,qi.bc=Un,qi.ma=Oe,qi.width=j.width,qi.height=j.height,qi.Da=j.Da,qi.v=j.v,qi.va=j.va,qi.j=j.j,qi.o=j.o,Oe.$a)e:{i(Oe.$a==1),j=Tt();t:for(;;){if(j==null){j=0;break e}if(i(Oe!=null),Oe.mc=j,j.c=Oe.c,j.i=Oe.i,j.l=Oe.l,j.l.ma=Oe,j.l.width=Oe.c,j.l.height=Oe.i,j.a=0,kt(j.m,He,li,ei),!jt(Oe.c,Oe.i,1,j,null)||(j.ab==1&&j.gc[0].hc==3&&Ke(j.s)?(Oe.ic=1,He=j.c*j.i,j.Ta=null,j.Ua=0,j.V=m(He),j.Ba=0,j.V==null?(j.a=1,j=0):j=1):(Oe.ic=0,j=ki(j,Oe.c)),!j))break t;j=1;break e}Oe.mc=null,j=0}else j=ei>=Oe.c*Oe.i;Oe=!j}if(Oe)return null;P.ga.Lc!=1?P.Ga=0:le=Fe-Q}i(P.ga!=null),i(Q+le<=Fe);e:{if(j=(He=P.ga).c,Fe=He.l.o,He.$a==0){if(li=P.rc,ei=P.Vc,qi=P.Fa,Qe=P.P+1+Q*j,ct=P.mb,Ut=P.nb+Q*j,i(Qe<=P.P+P.qc),He.Z!=0)for(i(C[He.Z]!=null),Oe=0;Oe<le;++Oe)C[He.Z](li,ei,qi,Qe,ct,Ut,j),li=ct,ei=Ut,Ut+=j,Qe+=j;else for(Oe=0;Oe<le;++Oe)l(ct,Ut,qi,Qe,j),li=ct,ei=Ut,Ut+=j,Qe+=j;P.rc=li,P.Vc=ei}else{if(i(He.mc!=null),j=Q+le,i((Oe=He.mc)!=null),i(j<=Oe.i),Oe.C>=j)j=1;else if(He.ic||Kt(),He.ic){He=Oe.V,li=Oe.Ba,ei=Oe.c;var bi=Oe.i,Pt=(qi=1,Qe=Oe.$/ei,ct=Oe.$%ei,Ut=Oe.m,ci=Oe.s,Oe.$),Ft=ei*bi,Pi=ei*j,Ni=ci.wc,Ci=Pt<Pi?de(ci,ct,Qe):null;i(Pt<=Ft),i(j<=bi),i(Ke(ci));t:for(;;){for(;!Ut.h&&Pt<Pi;){if(ct&Ni||(Ci=de(ci,ct,Qe)),i(Ci!=null),Ct(Ut),256>(bi=eo(Ci.G[0],Ci.H[0],Ut)))He[li+Pt]=bi,++Pt,++ct>=ei&&(ct=0,++Qe<=j&&!(Qe%16)&&wt(Oe,Qe));else{if(!(280>bi)){qi=0;break t}bi=Le(bi-256,Ut);var mr,cr=eo(Ci.G[4],Ci.H[4],Ut);if(Ct(Ut),!(Pt>=(cr=$n(ei,cr=Le(cr,Ut)))&&Ft-Pt>=bi)){qi=0;break t}for(mr=0;mr<bi;++mr)He[li+Pt+mr]=He[li+Pt+mr-cr];for(Pt+=bi,ct+=bi;ct>=ei;)ct-=ei,++Qe<=j&&!(Qe%16)&&wt(Oe,Qe);Pt<Pi&&ct&Ni&&(Ci=de(ci,ct,Qe))}i(Ut.h==Re(Ut))}wt(Oe,Qe>j?j:Qe);break t}!qi||Ut.h&&Pt<Ft?(qi=0,Oe.a=Ut.h?5:3):Oe.$=Pt,j=qi}else j=De(Oe,Oe.V,Oe.Ba,Oe.c,Oe.i,j,Ri);if(!j){le=0;break e}}Q+le>=Fe&&(P.Cc=1),le=1}if(!le)return null;if(P.Cc&&((le=P.ga)!=null&&(le.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+Q*Ae}function X(P,j,Q,le,Ae,Fe){for(;0<Ae--;){var Oe,He=P,Qe=j+(Q?1:0),ct=P,Ut=j+(Q?0:3);for(Oe=0;Oe<le;++Oe){var ci=ct[Ut+4*Oe];ci!=255&&(ci*=32897,He[Qe+4*Oe+0]=He[Qe+4*Oe+0]*ci>>23,He[Qe+4*Oe+1]=He[Qe+4*Oe+1]*ci>>23,He[Qe+4*Oe+2]=He[Qe+4*Oe+2]*ci>>23)}j+=Fe}}function Ie(P,j,Q,le,Ae){for(;0<le--;){var Fe;for(Fe=0;Fe<Q;++Fe){var Oe=P[j+2*Fe+0],He=15&(ct=P[j+2*Fe+1]),Qe=4369*He,ct=(240&ct|ct>>4)*Qe>>16;P[j+2*Fe+0]=(240&Oe|Oe>>4)*Qe>>16&240|(15&Oe|Oe<<4)*Qe>>16>>4&15,P[j+2*Fe+1]=240&ct|He}j+=Ae}}function lt(P,j,Q,le,Ae,Fe,Oe,He){var Qe,ct,Ut=255;for(ct=0;ct<Ae;++ct){for(Qe=0;Qe<le;++Qe){var ci=P[j+Qe];Fe[Oe+4*Qe]=ci,Ut&=ci}j+=Q,Oe+=He}return Ut!=255}function zt(P,j,Q,le,Ae){var Fe;for(Fe=0;Fe<Ae;++Fe)Q[le+Fe]=P[j+Fe]>>8}function Kt(){sa=X,ou=Ie,su=lt,ic=zt}function Li(P,j,Q){me[P]=function(le,Ae,Fe,Oe,He,Qe,ct,Ut,ci,li,ei,qi,bi,Pt,Ft,Pi,Ni){var Ci,mr=Ni-1>>1,cr=He[Qe+0]|ct[Ut+0]<<16,tn=ci[li+0]|ei[qi+0]<<16;i(le!=null);var gr=3*cr+tn+131074>>2;for(j(le[Ae+0],255&gr,gr>>16,bi,Pt),Fe!=null&&(gr=3*tn+cr+131074>>2,j(Fe[Oe+0],255&gr,gr>>16,Ft,Pi)),Ci=1;Ci<=mr;++Ci){var Vn=He[Qe+Ci]|ct[Ut+Ci]<<16,Wn=ci[li+Ci]|ei[qi+Ci]<<16,In=cr+Vn+tn+Wn+524296,xn=In+2*(Vn+tn)>>3;gr=xn+cr>>1,cr=(In=In+2*(cr+Wn)>>3)+Vn>>1,j(le[Ae+2*Ci-1],255&gr,gr>>16,bi,Pt+(2*Ci-1)*Q),j(le[Ae+2*Ci-0],255&cr,cr>>16,bi,Pt+(2*Ci-0)*Q),Fe!=null&&(gr=In+tn>>1,cr=xn+Wn>>1,j(Fe[Oe+2*Ci-1],255&gr,gr>>16,Ft,Pi+(2*Ci-1)*Q),j(Fe[Oe+2*Ci+0],255&cr,cr>>16,Ft,Pi+(2*Ci+0)*Q)),cr=Vn,tn=Wn}1&Ni||(gr=3*cr+tn+131074>>2,j(le[Ae+Ni-1],255&gr,gr>>16,bi,Pt+(Ni-1)*Q),Fe!=null&&(gr=3*tn+cr+131074>>2,j(Fe[Oe+Ni-1],255&gr,gr>>16,Ft,Pi+(Ni-1)*Q)))}}function Xi(){R[ma]=H,R[xu]=ae,R[jl]=ie,R[Ul]=he,R[ml]=we,R[Dn]=Be,R[Vs]=Ve,R[oo]=ae,R[ql]=he,R[Vl]=we,R[nc]=Be}function Mr(P){return P&~ui?0>P?0:255:P>>$t}function en(P,j){return Mr((19077*P>>8)+(26149*j>>8)-14234)}function mn(P,j,Q){return Mr((19077*P>>8)-(6419*j>>8)-(13320*Q>>8)+8708)}function En(P,j){return Mr((19077*P>>8)+(33050*j>>8)-17685)}function Mn(P,j,Q,le,Ae){le[Ae+0]=en(P,Q),le[Ae+1]=mn(P,j,Q),le[Ae+2]=En(P,j)}function ro(P,j,Q,le,Ae){le[Ae+0]=En(P,j),le[Ae+1]=mn(P,j,Q),le[Ae+2]=en(P,Q)}function lo(P,j,Q,le,Ae){var Fe=mn(P,j,Q);j=Fe<<3&224|En(P,j)>>3,le[Ae+0]=248&en(P,Q)|Fe>>5,le[Ae+1]=j}function ho(P,j,Q,le,Ae){var Fe=240&En(P,j)|15;le[Ae+0]=240&en(P,Q)|mn(P,j,Q)>>4,le[Ae+1]=Fe}function Ko(P,j,Q,le,Ae){le[Ae+0]=255,Mn(P,j,Q,le,Ae+1)}function Bo(P,j,Q,le,Ae){ro(P,j,Q,le,Ae),le[Ae+3]=255}function gn(P,j,Q,le,Ae){Mn(P,j,Q,le,Ae),le[Ae+3]=255}function Qo(P,j){return 0>P?0:P>j?j:P}function Go(P,j,Q){me[P]=function(le,Ae,Fe,Oe,He,Qe,ct,Ut,ci){for(var li=Ut+(-2&ci)*Q;Ut!=li;)j(le[Ae+0],Fe[Oe+0],He[Qe+0],ct,Ut),j(le[Ae+1],Fe[Oe+0],He[Qe+0],ct,Ut+Q),Ae+=2,++Oe,++Qe,Ut+=2*Q;1&ci&&j(le[Ae+0],Fe[Oe+0],He[Qe+0],ct,Ut)}}function fl(P,j,Q){return Q==0?P==0?j==0?6:5:j==0?4:0:Q}function Xa(P,j,Q,le,Ae){switch(P>>>30){case 3:ru(j,Q,le,Ae,0);break;case 2:oa(j,Q,le,Ae);break;case 1:Sn(j,Q,le,Ae)}}function tu(P,j){var Q,le,Ae=j.M,Fe=j.Nb,Oe=P.oc,He=P.pc+40,Qe=P.oc,ct=P.pc+584,Ut=P.oc,ci=P.pc+600;for(Q=0;16>Q;++Q)Oe[He+32*Q-1]=129;for(Q=0;8>Q;++Q)Qe[ct+32*Q-1]=129,Ut[ci+32*Q-1]=129;for(0<Ae?Oe[He-1-32]=Qe[ct-1-32]=Ut[ci-1-32]=129:(p(Oe,He-32-1,127,21),p(Qe,ct-32-1,127,9),p(Ut,ci-32-1,127,9)),le=0;le<P.za;++le){var li=j.ya[j.aa+le];if(0<le){for(Q=-1;16>Q;++Q)l(Oe,He+32*Q-4,Oe,He+32*Q+12,4);for(Q=-1;8>Q;++Q)l(Qe,ct+32*Q-4,Qe,ct+32*Q+4,4),l(Ut,ci+32*Q-4,Ut,ci+32*Q+4,4)}var ei=P.Gd,qi=P.Hd+le,bi=li.ad,Pt=li.Hc;if(0<Ae&&(l(Oe,He-32,ei[qi].y,0,16),l(Qe,ct-32,ei[qi].f,0,8),l(Ut,ci-32,ei[qi].ea,0,8)),li.Za){var Ft=Oe,Pi=He-32+16;for(0<Ae&&(le>=P.za-1?p(Ft,Pi,ei[qi].y[15],4):l(Ft,Pi,ei[qi+1].y,0,4)),Q=0;4>Q;Q++)Ft[Pi+128+Q]=Ft[Pi+256+Q]=Ft[Pi+384+Q]=Ft[Pi+0+Q];for(Q=0;16>Q;++Q,Pt<<=2)Ft=Oe,Pi=He+vr[Q],I[li.Ob[Q]](Ft,Pi),Xa(Pt,bi,16*+Q,Ft,Pi)}else if(Ft=fl(le,Ae,li.Ob[0]),Ds[Ft](Oe,He),Pt!=0)for(Q=0;16>Q;++Q,Pt<<=2)Xa(Pt,bi,16*+Q,Oe,He+vr[Q]);for(Q=li.Gc,Ft=fl(le,Ae,li.Dd),u[Ft](Qe,ct),u[Ft](Ut,ci),Pt=bi,Ft=Qe,Pi=ct,255&(li=Q>>0)&&(170&li?Ms(Pt,256,Ft,Pi):qs(Pt,256,Ft,Pi)),li=Ut,Pt=ci,255&(Q>>=8)&&(170&Q?Ms(bi,320,li,Pt):qs(bi,320,li,Pt)),Ae<P.Ub-1&&(l(ei[qi].y,0,Oe,He+480,16),l(ei[qi].f,0,Qe,ct+224,8),l(ei[qi].ea,0,Ut,ci+224,8)),Q=8*Fe*P.B,ei=P.sa,qi=P.ta+16*le+16*Fe*P.R,bi=P.qa,li=P.ra+8*le+Q,Pt=P.Ha,Ft=P.Ia+8*le+Q,Q=0;16>Q;++Q)l(ei,qi+Q*P.R,Oe,He+32*Q,16);for(Q=0;8>Q;++Q)l(bi,li+Q*P.B,Qe,ct+32*Q,8),l(Pt,Ft+Q*P.B,Ut,ci+32*Q,8)}}function ta(P,j,Q,le,Ae,Fe,Oe,He,Qe){var ct=[0],Ut=[0],ci=0,li=Qe!=null?Qe.kd:0,ei=Qe!=null?Qe:new Nl;if(P==null||12>Q)return 7;ei.data=P,ei.w=j,ei.ha=Q,j=[j],Q=[Q],ei.gb=[ei.gb];e:{var qi=j,bi=Q,Pt=ei.gb;if(i(P!=null),i(bi!=null),i(Pt!=null),Pt[0]=0,12<=bi[0]&&!o(P,qi[0],"RIFF")){if(o(P,qi[0]+8,"WEBP")){Pt=3;break e}var Ft=Di(P,qi[0]+4);if(12>Ft||4294967286<Ft){Pt=3;break e}if(li&&Ft>bi[0]-8){Pt=7;break e}Pt[0]=Ft,qi[0]+=12,bi[0]-=12}Pt=0}if(Pt!=0)return Pt;for(Ft=0<ei.gb[0],Q=Q[0];;){e:{var Pi=P;bi=j,Pt=Q;var Ni=ct,Ci=Ut,mr=qi=[0];if((gr=ci=[ci])[0]=0,8>Pt[0])Pt=7;else{if(!o(Pi,bi[0],"VP8X")){if(Di(Pi,bi[0]+4)!=10){Pt=3;break e}if(18>Pt[0]){Pt=7;break e}var cr=Di(Pi,bi[0]+8),tn=1+zi(Pi,bi[0]+12);if(2147483648<=tn*(Pi=1+zi(Pi,bi[0]+15))){Pt=3;break e}mr!=null&&(mr[0]=cr),Ni!=null&&(Ni[0]=tn),Ci!=null&&(Ci[0]=Pi),bi[0]+=18,Pt[0]-=18,gr[0]=1}Pt=0}}if(ci=ci[0],qi=qi[0],Pt!=0)return Pt;if(bi=!!(2&qi),!Ft&&ci)return 3;if(Fe!=null&&(Fe[0]=!!(16&qi)),Oe!=null&&(Oe[0]=bi),He!=null&&(He[0]=0),Oe=ct[0],qi=Ut[0],ci&&bi&&Qe==null){Pt=0;break}if(4>Q){Pt=7;break}if(Ft&&ci||!Ft&&!ci&&!o(P,j[0],"ALPH")){Q=[Q],ei.na=[ei.na],ei.P=[ei.P],ei.Sa=[ei.Sa];e:{cr=P,Pt=j,Ft=Q;var gr=ei.gb;Ni=ei.na,Ci=ei.P,mr=ei.Sa,tn=22,i(cr!=null),i(Ft!=null),Pi=Pt[0];var Vn=Ft[0];for(i(Ni!=null),i(mr!=null),Ni[0]=null,Ci[0]=null,mr[0]=0;;){if(Pt[0]=Pi,Ft[0]=Vn,8>Vn){Pt=7;break e}var Wn=Di(cr,Pi+4);if(4294967286<Wn){Pt=3;break e}var In=8+Wn+1&-2;if(tn+=In,0<gr&&tn>gr){Pt=3;break e}if(!o(cr,Pi,"VP8 ")||!o(cr,Pi,"VP8L")){Pt=0;break e}if(Vn[0]<In){Pt=7;break e}o(cr,Pi,"ALPH")||(Ni[0]=cr,Ci[0]=Pi+8,mr[0]=Wn),Pi+=In,Vn-=In}}if(Q=Q[0],ei.na=ei.na[0],ei.P=ei.P[0],ei.Sa=ei.Sa[0],Pt!=0)break}Q=[Q],ei.Ja=[ei.Ja],ei.xa=[ei.xa];e:if(gr=P,Pt=j,Ft=Q,Ni=ei.gb[0],Ci=ei.Ja,mr=ei.xa,cr=Pt[0],Pi=!o(gr,cr,"VP8 "),tn=!o(gr,cr,"VP8L"),i(gr!=null),i(Ft!=null),i(Ci!=null),i(mr!=null),8>Ft[0])Pt=7;else{if(Pi||tn){if(gr=Di(gr,cr+4),12<=Ni&&gr>Ni-12){Pt=3;break e}if(li&&gr>Ft[0]-8){Pt=7;break e}Ci[0]=gr,Pt[0]+=8,Ft[0]-=8,mr[0]=tn}else mr[0]=5<=Ft[0]&&gr[cr+0]==47&&!(gr[cr+4]>>5),Ci[0]=Ft[0];Pt=0}if(Q=Q[0],ei.Ja=ei.Ja[0],ei.xa=ei.xa[0],j=j[0],Pt!=0)break;if(4294967286<ei.Ja)return 3;if(He==null||bi||(He[0]=ei.xa?2:1),Oe=[Oe],qi=[qi],ei.xa){if(5>Q){Pt=7;break}He=Oe,li=qi,bi=Fe,P==null||5>Q?P=0:5<=Q&&P[j+0]==47&&!(P[j+4]>>5)?(Ft=[0],gr=[0],Ni=[0],kt(Ci=new ve,P,j,Q),Bi(Ci,Ft,gr,Ni)?(He!=null&&(He[0]=Ft[0]),li!=null&&(li[0]=gr[0]),bi!=null&&(bi[0]=Ni[0]),P=1):P=0):P=0}else{if(10>Q){Pt=7;break}He=qi,P==null||10>Q||!xt(P,j+3,Q-3)?P=0:(li=P[j+0]|P[j+1]<<8|P[j+2]<<16,bi=16383&(P[j+7]<<8|P[j+6]),P=16383&(P[j+9]<<8|P[j+8]),1&li||3<(li>>1&7)||!(li>>4&1)||li>>5>=ei.Ja||!bi||!P?P=0:(Oe&&(Oe[0]=bi),He&&(He[0]=P),P=1))}if(!P||(Oe=Oe[0],qi=qi[0],ci&&(ct[0]!=Oe||Ut[0]!=qi)))return 3;Qe!=null&&(Qe[0]=ei,Qe.offset=j-Qe.w,i(4294967286>j-Qe.w),i(Qe.offset==Qe.ha-Q));break}return Pt==0||Pt==7&&ci&&Qe==null?(Fe!=null&&(Fe[0]|=ei.na!=null&&0<ei.na.length),le!=null&&(le[0]=Oe),Ae!=null&&(Ae[0]=qi),0):Pt}function Ya(P,j,Q){var le=j.width,Ae=j.height,Fe=0,Oe=0,He=le,Qe=Ae;if(j.Da=P!=null&&0<P.Da,j.Da&&(He=P.cd,Qe=P.bd,Fe=P.v,Oe=P.j,11>Q||(Fe&=-2,Oe&=-2),0>Fe||0>Oe||0>=He||0>=Qe||Fe+He>le||Oe+Qe>Ae))return 0;if(j.v=Fe,j.j=Oe,j.va=Fe+He,j.o=Oe+Qe,j.U=He,j.T=Qe,j.da=P!=null&&0<P.da,j.da){if(!$i(He,Qe,Q=[P.ib],Fe=[P.hb]))return 0;j.ib=Q[0],j.hb=Fe[0]}return j.ob=P!=null&&P.ob,j.Kb=P==null||!P.Sd,j.da&&(j.ob=j.ib<3*le/4&&j.hb<3*Ae/4,j.Kb=0),1}function La(P){if(P==null)return 2;if(11>P.S){var j=P.f.RGBA;j.fb+=(P.height-1)*j.A,j.A=-j.A}else j=P.f.kb,P=P.height,j.O+=(P-1)*j.fa,j.fa=-j.fa,j.N+=(P-1>>1)*j.Ab,j.Ab=-j.Ab,j.W+=(P-1>>1)*j.Db,j.Db=-j.Db,j.F!=null&&(j.J+=(P-1)*j.lb,j.lb=-j.lb);return 0}function iu(P,j,Q,le){if(le==null||0>=P||0>=j)return 2;if(Q!=null){if(Q.Da){var Ae=Q.cd,Fe=Q.bd,Oe=-2&Q.v,He=-2&Q.j;if(0>Oe||0>He||0>=Ae||0>=Fe||Oe+Ae>P||He+Fe>j)return 2;P=Ae,j=Fe}if(Q.da){if(!$i(P,j,Ae=[Q.ib],Fe=[Q.hb]))return 2;P=Ae[0],j=Fe[0]}}le.width=P,le.height=j;e:{var Qe=le.width,ct=le.height;if(P=le.S,0>=Qe||0>=ct||!(P>=ma&&13>P))P=2;else{if(0>=le.Rd&&le.sd==null){Oe=Fe=Ae=j=0;var Ut=(He=Qe*cn[P])*ct;if(11>P||(Fe=(ct+1)/2*(j=(Qe+1)/2),P==12&&(Oe=(Ae=Qe)*ct)),(ct=m(Ut+2*Fe+Oe))==null){P=1;break e}le.sd=ct,11>P?((Qe=le.f.RGBA).eb=ct,Qe.fb=0,Qe.A=He,Qe.size=Ut):((Qe=le.f.kb).y=ct,Qe.O=0,Qe.fa=He,Qe.Fd=Ut,Qe.f=ct,Qe.N=0+Ut,Qe.Ab=j,Qe.Cd=Fe,Qe.ea=ct,Qe.W=0+Ut+Fe,Qe.Db=j,Qe.Ed=Fe,P==12&&(Qe.F=ct,Qe.J=0+Ut+2*Fe),Qe.Tc=Oe,Qe.lb=Ae)}if(j=1,Ae=le.S,Fe=le.width,Oe=le.height,Ae>=ma&&13>Ae)if(11>Ae)P=le.f.RGBA,j&=(He=Math.abs(P.A))*(Oe-1)+Fe<=P.size,j&=He>=Fe*cn[Ae],j&=P.eb!=null;else{P=le.f.kb,He=(Fe+1)/2,Ut=(Oe+1)/2,Qe=Math.abs(P.fa),ct=Math.abs(P.Ab);var ci=Math.abs(P.Db),li=Math.abs(P.lb),ei=li*(Oe-1)+Fe;j&=Qe*(Oe-1)+Fe<=P.Fd,j&=ct*(Ut-1)+He<=P.Cd,j=(j&=ci*(Ut-1)+He<=P.Ed)&Qe>=Fe&ct>=He&ci>=He,j&=P.y!=null,j&=P.f!=null,j&=P.ea!=null,Ae==12&&(j&=li>=Fe,j&=ei<=P.Tc,j&=P.F!=null)}else j=0;P=j?0:2}}return P!=0||Q!=null&&Q.fd&&(P=La(le)),P}var ss=64,Fl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],dl=24,pa=32,Bl=8,as=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Hi("Predictor0","PredictorAdd0"),me.Predictor0=function(){return 4278190080},me.Predictor1=function(P){return P},me.Predictor2=function(P,j,Q){return j[Q+0]},me.Predictor3=function(P,j,Q){return j[Q+1]},me.Predictor4=function(P,j,Q){return j[Q-1]},me.Predictor5=function(P,j,Q){return Ui(Ui(P,j[Q+1]),j[Q+0])},me.Predictor6=function(P,j,Q){return Ui(P,j[Q-1])},me.Predictor7=function(P,j,Q){return Ui(P,j[Q+0])},me.Predictor8=function(P,j,Q){return Ui(j[Q-1],j[Q+0])},me.Predictor9=function(P,j,Q){return Ui(j[Q+0],j[Q+1])},me.Predictor10=function(P,j,Q){return Ui(Ui(P,j[Q-1]),Ui(j[Q+0],j[Q+1]))},me.Predictor11=function(P,j,Q){var le=j[Q+0];return 0>=pi(le>>24&255,P>>24&255,(j=j[Q-1])>>24&255)+pi(le>>16&255,P>>16&255,j>>16&255)+pi(le>>8&255,P>>8&255,j>>8&255)+pi(255&le,255&P,255&j)?le:P},me.Predictor12=function(P,j,Q){var le=j[Q+0];return(Qt((P>>24&255)+(le>>24&255)-((j=j[Q-1])>>24&255))<<24|Qt((P>>16&255)+(le>>16&255)-(j>>16&255))<<16|Qt((P>>8&255)+(le>>8&255)-(j>>8&255))<<8|Qt((255&P)+(255&le)-(255&j)))>>>0},me.Predictor13=function(P,j,Q){var le=j[Q-1];return(lr((P=Ui(P,j[Q+0]))>>24&255,le>>24&255)<<24|lr(P>>16&255,le>>16&255)<<16|lr(P>>8&255,le>>8&255)<<8|lr(P>>0&255,le>>0&255))>>>0};var Rl=me.PredictorAdd0;me.PredictorAdd1=Dr,Hi("Predictor2","PredictorAdd2"),Hi("Predictor3","PredictorAdd3"),Hi("Predictor4","PredictorAdd4"),Hi("Predictor5","PredictorAdd5"),Hi("Predictor6","PredictorAdd6"),Hi("Predictor7","PredictorAdd7"),Hi("Predictor8","PredictorAdd8"),Hi("Predictor9","PredictorAdd9"),Hi("Predictor10","PredictorAdd10"),Hi("Predictor11","PredictorAdd11"),Hi("Predictor12","PredictorAdd12"),Hi("Predictor13","PredictorAdd13");var Pa=me.PredictorAdd2;je("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var pl,ia=me.ColorIndexInverseTransform,Ja=me.MapARGB,ec=me.VP8LColorIndexInverseTransformAlpha,tc=me.MapAlpha,Ka=me.VP8LPredictorsAdd=[];Ka.length=16,(me.VP8LPredictors=[]).length=16,(me.VP8LPredictorsAdd_C=[]).length=16,(me.VP8LPredictors_C=[]).length=16;var ls,ra,na,Ps,Do,Ma,go,ru,oa,Ms,Sn,qs,Qa,nu,Ol,ms,$a,Ro,dr,no,kn,Jn,Co,ir,sa,ou,su,ic,Sc=m(511),Ic=m(2041),Xc=m(225),an=m(767),rc=0,wu=Ic,yo=Xc,xs=an,fo=Sc,ma=0,xu=1,jl=2,Ul=3,ml=4,Dn=5,Vs=6,oo=7,ql=8,Vl=9,nc=10,Yc=[2,3,7],Da=[3,3,11],Jc=[280,256,256,256,40],za=[0,1,1,1,0],ku=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Rr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],au=8,Au=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ho=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],uo=null,gl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Na=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Cc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],To=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Oo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Tc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ds=[],I=[],u=[],_=1,k=2,C=[],R=[];Li("UpsampleRgbLinePair",Mn,3),Li("UpsampleBgrLinePair",ro,3),Li("UpsampleRgbaLinePair",gn,4),Li("UpsampleBgraLinePair",Bo,4),Li("UpsampleArgbLinePair",Ko,4),Li("UpsampleRgba4444LinePair",ho,2),Li("UpsampleRgb565LinePair",lo,2);var H=me.UpsampleRgbLinePair,ie=me.UpsampleBgrLinePair,ae=me.UpsampleRgbaLinePair,he=me.UpsampleBgraLinePair,we=me.UpsampleArgbLinePair,Be=me.UpsampleRgba4444LinePair,Ve=me.UpsampleRgb565LinePair,vt=16,ut=1<<vt-1,dt=-227,Rt=482,$t=6,ui=(256<<$t)-1,It=0,gi=m(256),fi=m(256),Ti=m(256),Si=m(256),Zi=m(Rt-dt),Ai=m(Rt-dt);Go("YuvToRgbRow",Mn,3),Go("YuvToBgrRow",ro,3),Go("YuvToRgbaRow",gn,4),Go("YuvToBgraRow",Bo,4),Go("YuvToArgbRow",Ko,4),Go("YuvToRgba4444Row",ho,2),Go("YuvToRgb565Row",lo,2);var vr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sr=[0,2,8],Ir=[8,7,6,4,4,2,2,2,1,1,1,1],nn=1;this.WebPDecodeRGBA=function(P,j,Q,le,Ae){var Fe=xu,Oe=new cl,He=new Pn;Oe.ba=He,He.S=Fe,He.width=[He.width],He.height=[He.height];var Qe=He.width,ct=He.height,Ut=new Vr;if(Ut==null||P==null)var ci=2;else i(Ut!=null),ci=ta(P,j,Q,Ut.width,Ut.height,Ut.Pd,Ut.Qd,Ut.format,null);if(ci!=0?Qe=0:(Qe!=null&&(Qe[0]=Ut.width[0]),ct!=null&&(ct[0]=Ut.height[0]),Qe=1),Qe){He.width=He.width[0],He.height=He.height[0],le!=null&&(le[0]=He.width),Ae!=null&&(Ae[0]=He.height);e:{if(le=new bo,(Ae=new Nl).data=P,Ae.w=j,Ae.ha=Q,Ae.kd=1,j=[0],i(Ae!=null),((P=ta(Ae.data,Ae.w,Ae.ha,null,null,null,j,null,Ae))==0||P==7)&&j[0]&&(P=4),(j=P)==0){if(i(Oe!=null),le.data=Ae.data,le.w=Ae.w+Ae.offset,le.ha=Ae.ha-Ae.offset,le.put=Qr,le.ac=Tr,le.bc=Un,le.ma=Oe,Ae.xa){if((P=Tt())==null){Oe=1;break e}if(function(li,ei){var qi=[0],bi=[0],Pt=[0];t:for(;;){if(li==null)return 0;if(ei==null)return li.a=2,0;if(li.l=ei,li.a=0,kt(li.m,ei.data,ei.w,ei.ha),!Bi(li.m,qi,bi,Pt)){li.a=3;break t}if(li.xb=k,ei.width=qi[0],ei.height=bi[0],!jt(qi[0],bi[0],1,li,null))break t;return 1}return i(li.a!=0),0}(P,le)){if(le=(j=iu(le.width,le.height,Oe.Oa,Oe.ba))==0){t:{le=P;i:for(;;){if(le==null){le=0;break t}if(i(le.s.yc!=null),i(le.s.Ya!=null),i(0<le.s.Wb),i((Q=le.l)!=null),i((Ae=Q.ma)!=null),le.xb!=0){if(le.ca=Ae.ba,le.tb=Ae.tb,i(le.ca!=null),!Ya(Ae.Oa,Q,Ul)){le.a=2;break i}if(!ki(le,Q.width)||Q.da)break i;if((Q.da||Wi(le.ca.S))&&Kt(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&Kt()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!er(le.s.vb,le.s.Wa.Xa)){le.a=1;break i}le.xb=0}if(!De(le,le.V,le.Ba,le.c,le.i,Q.o,Te))break i;Ae.Dc=le.Ma,le=1;break t}i(le.a!=0),le=0}le=!le}le&&(j=P.a)}else j=P.a}else{if((P=new Ca)==null){Oe=1;break e}if(P.Fa=Ae.na,P.P=Ae.P,P.qc=Ae.Sa,Ur(P,le)){if((j=iu(le.width,le.height,Oe.Oa,Oe.ba))==0){if(P.Aa=0,Q=Oe.Oa,i((Ae=P)!=null),Q!=null){if(0<(Qe=0>(Qe=Q.Md)?0:100<Qe?255:255*Qe/100)){for(ct=Ut=0;4>ct;++ct)12>(ci=Ae.pb[ct]).lc&&(ci.ia=Qe*Ir[0>ci.lc?0:ci.lc]>>3),Ut|=ci.ia;Ut&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=Q.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}mo(P,le)||(j=P.a)}}else j=P.a}j==0&&Oe.Oa!=null&&Oe.Oa.fd&&(j=La(Oe.ba))}Oe=j}Fe=Oe!=0?null:11>Fe?He.f.RGBA.eb:He.f.kb.y}else Fe=null;return Fe};var cn=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function L(me,tt){for(var nt="",Se=0;Se<4;Se++)nt+=String.fromCharCode(me[tt++]);return nt}function z(me,tt){return(me[tt+0]<<0|me[tt+1]<<8|me[tt+2]<<16)>>>0}function U(me,tt){return(me[tt+0]<<0|me[tt+1]<<8|me[tt+2]<<16|me[tt+3]<<24)>>>0}new E;var q=[0],B=[0],K=[],J=new E,se=n,ne=function(me,tt){var nt={},Se=0,Me=!1,Ge=0,Xe=0;if(nt.frames=[],!function(it,Re,bt,Ct){for(var Ot=0;Ot<Ct;Ot++)if(it[Re+Ot]!=bt.charCodeAt(Ot))return!0;return!1}(me,tt,"RIFF",4)){var _t,pt;for(U(me,tt+=4),tt+=8;tt<me.length;){var Gt=L(me,tt),kt=U(me,tt+=4);tt+=4;var Xt=kt+(1&kt);switch(Gt){case"VP8 ":case"VP8L":nt.frames[Se]===void 0&&(nt.frames[Se]={}),(ve=nt.frames[Se]).src_off=Me?Xe:tt-8,ve.src_size=Ge+kt+8,Se++,Me&&(Me=!1,Ge=0,Xe=0);break;case"VP8X":(ve=nt.header={}).feature_flags=me[tt];var Mt=tt+4;ve.canvas_width=1+z(me,Mt),Mt+=3,ve.canvas_height=1+z(me,Mt),Mt+=3;break;case"ALPH":Me=!0,Ge=Xt+8,Xe=tt-8;break;case"ANIM":(ve=nt.header).bgcolor=U(me,tt),Mt=tt+4,ve.loop_count=(_t=me)[(pt=Mt)+0]<<0|_t[pt+1]<<8,Mt+=2;break;case"ANMF":var qt,ve;(ve=nt.frames[Se]={}).offset_x=2*z(me,tt),tt+=3,ve.offset_y=2*z(me,tt),tt+=3,ve.width=1+z(me,tt),tt+=3,ve.height=1+z(me,tt),tt+=3,ve.duration=z(me,tt),tt+=3,qt=me[tt++],ve.dispose=1&qt,ve.blend=qt>>1&1}Gt!="ANMF"&&(tt+=Xt)}return nt}}(se,0);ne.response=se,ne.rgbaoutput=!0,ne.dataurl=!1;var re=ne.header?ne.header:null,ke=ne.frames?ne.frames:null;if(re){re.loop_counter=re.loop_count,q=[re.canvas_height],B=[re.canvas_width];for(var Pe=0;Pe<ke.length&&ke[Pe].blend!=0;Pe++);}var be=ke[0],pe=J.WebPDecodeRGBA(se,be.src_off,be.src_size,B,q);be.rgba=pe,be.imgwidth=B[0],be.imgheight=q[0];for(var ye=0;ye<B[0]*q[0]*4;ye++)K[ye]=pe[ye];return this.width=B,this.height=q,this.data=K,this}(function(n){var i=function(){return typeof g2=="function"},o=function(q,B,K,J){var se=4,ne=b;switch(J){case n.image_compression.FAST:se=1,ne=m;break;case n.image_compression.MEDIUM:se=6,ne=h;break;case n.image_compression.SLOW:se=9,ne=E}q=l(q,B,K,ne);var re=g2(q,{level:se});return n.__addimage__.arrayBufferToBinaryString(re)},l=function(q,B,K,J){for(var se,ne,re,ke=q.length/B,Pe=new Uint8Array(q.length+ke),be=z(),pe=0;pe<ke;pe+=1){if(re=pe*B,se=q.subarray(re,re+B),J)Pe.set(J(se,K,ne),re+pe);else{for(var ye,me=be.length,tt=[];ye<me;ye+=1)tt[ye]=be[ye](se,K,ne);var nt=U(tt.concat());Pe.set(tt[nt],re+pe)}ne=se}return Pe},p=function(q){var B=Array.apply([],q);return B.unshift(0),B},m=function(q,B){var K,J=[],se=q.length;J[0]=1;for(var ne=0;ne<se;ne+=1)K=q[ne-B]||0,J[ne+1]=q[ne]-K+256&255;return J},b=function(q,B,K){var J,se=[],ne=q.length;se[0]=2;for(var re=0;re<ne;re+=1)J=K&&K[re]||0,se[re+1]=q[re]-J+256&255;return se},h=function(q,B,K){var J,se,ne=[],re=q.length;ne[0]=3;for(var ke=0;ke<re;ke+=1)J=q[ke-B]||0,se=K&&K[ke]||0,ne[ke+1]=q[ke]+256-(J+se>>>1)&255;return ne},E=function(q,B,K){var J,se,ne,re,ke=[],Pe=q.length;ke[0]=4;for(var be=0;be<Pe;be+=1)J=q[be-B]||0,se=K&&K[be]||0,ne=K&&K[be-B]||0,re=L(J,se,ne),ke[be+1]=q[be]-re+256&255;return ke},L=function(q,B,K){if(q===B&&B===K)return q;var J=Math.abs(B-K),se=Math.abs(q-K),ne=Math.abs(q+B-K-K);return J<=se&&J<=ne?q:se<=ne?B:K},z=function(){return[p,m,b,h,E]},U=function(q){var B=q.map(function(K){return K.reduce(function(J,se){return J+Math.abs(se)},0)});return B.indexOf(Math.min.apply(null,B))};n.processPNG=function(q,B,K,J){var se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t=this.decode.FLATE_DECODE,pt="";if(this.__addimage__.isArrayBuffer(q)&&(q=new Uint8Array(q)),this.__addimage__.isArrayBufferView(q)){if(q=(re=new cw(q)).imgData,ne=re.bits,se=re.colorSpace,Pe=re.colors,[4,6].indexOf(re.colorType)!==-1){if(re.bits===8){me=(ye=re.pixelBitlength==32?new Uint32Array(re.decodePixels().buffer):re.pixelBitlength==16?new Uint16Array(re.decodePixels().buffer):new Uint8Array(re.decodePixels().buffer)).length,nt=new Uint8Array(me*re.colors),tt=new Uint8Array(me);var Gt,kt=re.pixelBitlength-re.bits;for(Ge=0,Xe=0;Ge<me;Ge++){for(Me=ye[Ge],Gt=0;Gt<kt;)nt[Xe++]=Me>>>Gt&255,Gt+=re.bits;tt[Ge]=Me>>>Gt&255}}if(re.bits===16){me=(ye=new Uint32Array(re.decodePixels().buffer)).length,nt=new Uint8Array(me*(32/re.pixelBitlength)*re.colors),tt=new Uint8Array(me*(32/re.pixelBitlength)),Se=re.colors>1,Ge=0,Xe=0;for(var Xt=0;Ge<me;)Me=ye[Ge++],nt[Xe++]=Me>>>0&255,Se&&(nt[Xe++]=Me>>>16&255,Me=ye[Ge++],nt[Xe++]=Me>>>0&255),tt[Xt++]=Me>>>16&255;ne=8}J!==n.image_compression.NONE&&i()?(q=o(nt,re.width*re.colors,re.colors,J),pe=o(tt,re.width,1,J)):(q=nt,pe=tt,_t=void 0)}if(re.colorType===3&&(se=this.color_spaces.INDEXED,be=re.palette,re.transparency.indexed)){var Mt=re.transparency.indexed,qt=0;for(Ge=0,me=Mt.length;Ge<me;++Ge)qt+=Mt[Ge];if((qt/=255)===me-1&&Mt.indexOf(0)!==-1)ke=[Mt.indexOf(0)];else if(qt!==me){for(ye=re.decodePixels(),tt=new Uint8Array(ye.length),Ge=0,me=ye.length;Ge<me;Ge++)tt[Ge]=Mt[ye[Ge]];pe=o(tt,re.width,1)}}var ve=function(it){var Re;switch(it){case n.image_compression.FAST:Re=11;break;case n.image_compression.MEDIUM:Re=13;break;case n.image_compression.SLOW:Re=14;break;default:Re=12}return Re}(J);return _t===this.decode.FLATE_DECODE&&(pt="/Predictor "+ve+" "),pt+="/Colors "+Pe+" /BitsPerComponent "+ne+" /Columns "+re.width,(this.__addimage__.isArrayBuffer(q)||this.__addimage__.isArrayBufferView(q))&&(q=this.__addimage__.arrayBufferToBinaryString(q)),(pe&&this.__addimage__.isArrayBuffer(pe)||this.__addimage__.isArrayBufferView(pe))&&(pe=this.__addimage__.arrayBufferToBinaryString(pe)),{alias:K,data:q,index:B,filter:_t,decodeParameters:pt,transparency:ke,palette:be,sMask:pe,predictor:ve,width:re.width,height:re.height,bitsPerComponent:ne,colorSpace:se}}}})(yn.API),function(n){n.processGIF89A=function(i,o,l,p){var m=new hw(i),b=m.width,h=m.height,E=[];m.decodeAndBlitFrameRGBA(0,E);var L={data:E,width:b,height:h},z=new v1(100).encode(L,100);return n.processJPEG.call(this,z,o,l,p)},n.processGIF87A=n.processGIF89A}(yn.API),Ou.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0);this.palette[i]={red:p,green:l,blue:o,quad:m}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ou.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,i=this.width*this.height*4;this.data=new Uint8Array(i),this[n]()}catch(o){Fo.log("bit decode error:"+o)}},Ou.prototype.bit1=function(){var n,i=Math.ceil(this.width/8),o=i%4;for(n=this.height-1;n>=0;n--){for(var l=this.bottom_up?n:this.height-1-n,p=0;p<i;p++)for(var m=this.datav.getUint8(this.pos++,!0),b=l*this.width*4+8*p*4,h=0;h<8&&8*p+h<this.width;h++){var E=this.palette[m>>7-h&1];this.data[b+4*h]=E.blue,this.data[b+4*h+1]=E.green,this.data[b+4*h+2]=E.red,this.data[b+4*h+3]=255}o!==0&&(this.pos+=4-o)}},Ou.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),i=n%4,o=this.height-1;o>=0;o--){for(var l=this.bottom_up?o:this.height-1-o,p=0;p<n;p++){var m=this.datav.getUint8(this.pos++,!0),b=l*this.width*4+2*p*4,h=m>>4,E=15&m,L=this.palette[h];if(this.data[b]=L.blue,this.data[b+1]=L.green,this.data[b+2]=L.red,this.data[b+3]=255,2*p+1>=this.width)break;L=this.palette[E],this.data[b+4]=L.blue,this.data[b+4+1]=L.green,this.data[b+4+2]=L.red,this.data[b+4+3]=255}i!==0&&(this.pos+=4-i)}},Ou.prototype.bit8=function(){for(var n=this.width%4,i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<this.width;l++){var p=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+4*l;if(p<this.palette.length){var b=this.palette[p];this.data[m]=b.red,this.data[m+1]=b.green,this.data[m+2]=b.blue,this.data[m+3]=255}else this.data[m]=255,this.data[m+1]=255,this.data[m+2]=255,this.data[m+3]=255}n!==0&&(this.pos+=4-n)}},Ou.prototype.bit15=function(){for(var n=this.width%3,i=parseInt("11111",2),o=this.height-1;o>=0;o--){for(var l=this.bottom_up?o:this.height-1-o,p=0;p<this.width;p++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var b=(m&i)/i*255|0,h=(m>>5&i)/i*255|0,E=(m>>10&i)/i*255|0,L=m>>15?255:0,z=l*this.width*4+4*p;this.data[z]=E,this.data[z+1]=h,this.data[z+2]=b,this.data[z+3]=L}this.pos+=n}},Ou.prototype.bit16=function(){for(var n=this.width%3,i=parseInt("11111",2),o=parseInt("111111",2),l=this.height-1;l>=0;l--){for(var p=this.bottom_up?l:this.height-1-l,m=0;m<this.width;m++){var b=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(b&i)/i*255|0,E=(b>>5&o)/o*255|0,L=(b>>11)/i*255|0,z=p*this.width*4+4*m;this.data[z]=L,this.data[z+1]=E,this.data[z+2]=h,this.data[z+3]=255}this.pos+=n}},Ou.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),b=i*this.width*4+4*o;this.data[b]=m,this.data[b+1]=p,this.data[b+2]=l,this.data[b+3]=255}this.pos+=this.width%4}},Ou.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),b=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+4*o;this.data[h]=m,this.data[h+1]=p,this.data[h+2]=l,this.data[h+3]=b}},Ou.prototype.getData=function(){return this.data},function(n){n.processBMP=function(i,o,l,p){var m=new Ou(i,!1),b=m.width,h=m.height,E={data:m.getData(),width:b,height:h},L=new v1(100).encode(E,100);return n.processJPEG.call(this,L,o,l,p)}}(yn.API),sy.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(i,o,l,p){var m=new sy(i),b=m.width,h=m.height,E={data:m.getData(),width:b,height:h},L=new v1(100).encode(E,100);return n.processJPEG.call(this,L,o,l,p)}}(yn.API),yn.API.processRGBA=function(n,i,o){for(var l=n.data,p=l.length,m=new Uint8Array(p/4*3),b=new Uint8Array(p/4),h=0,E=0,L=0;L<p;L+=4){var z=l[L],U=l[L+1],q=l[L+2],B=l[L+3];m[h++]=z,m[h++]=U,m[h++]=q,b[E++]=B}var K=this.__addimage__.arrayBufferToBinaryString(m);return{alpha:this.__addimage__.arrayBufferToBinaryString(b),data:K,index:i,alias:o,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},yn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ah=yn.API,Pd=Ah.getCharWidthsArray=function(n,i){var o,l,p=(i=i||{}).font||this.internal.getFont(),m=i.fontSize||this.internal.getFontSize(),b=i.charSpace||this.internal.getCharSpace(),h=i.widths?i.widths:p.metadata.Unicode.widths,E=h.fof?h.fof:1,L=i.kerning?i.kerning:p.metadata.Unicode.kerning,z=L.fof?L.fof:1,U=i.doKerning!==!1,q=0,B=n.length,K=0,J=h[0]||E,se=[];for(o=0;o<B;o++)l=n.charCodeAt(o),typeof p.metadata.widthOfString=="function"?se.push((p.metadata.widthOfGlyph(p.metadata.characterToGlyph(l))+b*(1e3/m)||0)/1e3):(q=U&&xo(L[l])==="object"&&!isNaN(parseInt(L[l][K],10))?L[l][K]/z:0,se.push((h[l]||J)/E+q)),K=l;return se},iy=Ah.getStringUnitWidth=function(n,i){var o=(i=i||{}).fontSize||this.internal.getFontSize(),l=i.font||this.internal.getFont(),p=i.charSpace||this.internal.getCharSpace();return Ah.processArabic&&(n=Ah.processArabic(n)),typeof l.metadata.widthOfString=="function"?l.metadata.widthOfString(n,o,p)/o:Pd.apply(this,arguments).reduce(function(m,b){return m+b},0)},ry=function(n,i,o,l){for(var p=[],m=0,b=n.length,h=0;m!==b&&h+i[m]<o;)h+=i[m],m++;p.push(n.slice(0,m));var E=m;for(h=0;m!==b;)h+i[m]>l&&(p.push(n.slice(E,m)),h=0,E=m),h+=i[m],m++;return E!==m&&p.push(n.slice(E,m)),p},ny=function(n,i,o){o||(o={});var l,p,m,b,h,E,L,z=[],U=[z],q=o.textIndent||0,B=0,K=0,J=n.split(" "),se=Pd.apply(this,[" ",o])[0];if(E=o.lineIndent===-1?J[0].length+2:o.lineIndent||0){var ne=Array(E).join(" "),re=[];J.map(function(Pe){(Pe=Pe.split(/\s*\n/)).length>1?re=re.concat(Pe.map(function(be,pe){return(pe&&be.length?`
`:"")+be})):re.push(Pe[0])}),J=re,E=iy.apply(this,[ne,o])}for(m=0,b=J.length;m<b;m++){var ke=0;if(l=J[m],E&&l[0]==`
`&&(l=l.substr(1),ke=1),q+B+(K=(p=Pd.apply(this,[l,o])).reduce(function(Pe,be){return Pe+be},0))>i||ke){if(K>i){for(h=ry.apply(this,[l,p,i-(q+B),i]),z.push(h.shift()),z=[h.pop()];h.length;)U.push([h.shift()]);K=p.slice(l.length-(z[0]?z[0].length:0)).reduce(function(Pe,be){return Pe+be},0)}else z=[l];U.push(z),q=K+E,B=se}else z.push(l),q+=B+K,B=se}return L=E?function(Pe,be){return(be?ne:"")+Pe.join(" ")}:function(Pe){return Pe.join(" ")},U.map(L)},Ah.splitTextToSize=function(n,i,o){var l,p=(o=o||{}).fontSize||this.internal.getFontSize(),m=function(z){if(z.widths&&z.kerning)return{widths:z.widths,kerning:z.kerning};var U=this.internal.getFont(z.fontName,z.fontStyle);return U.metadata.Unicode?{widths:U.metadata.Unicode.widths||{0:1},kerning:U.metadata.Unicode.kerning||{}}:{font:U.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,o);l=Array.isArray(n)?n:String(n).split(/\r?\n/);var b=1*this.internal.scaleFactor*i/p;m.textIndent=o.textIndent?1*o.textIndent*this.internal.scaleFactor/p:0,m.lineIndent=o.lineIndent;var h,E,L=[];for(h=0,E=l.length;h<E;h++)L=L.concat(ny.apply(this,[l[h],b,m]));return L},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var i="klmnopqrstuvwxyz",o={},l={},p=0;p<i.length;p++)o[i[p]]="0123456789abcdef"[p],l["0123456789abcdef"[p]]=i[p];var m=function(U){return"0x"+parseInt(U,10).toString(16)},b=n.__fontmetrics__.compress=function(U){var q,B,K,J,se=["{"];for(var ne in U){if(q=U[ne],isNaN(parseInt(ne,10))?B="'"+ne+"'":(ne=parseInt(ne,10),B=(B=m(ne).slice(2)).slice(0,-1)+l[B.slice(-1)]),typeof q=="number")q<0?(K=m(q).slice(3),J="-"):(K=m(q).slice(2),J=""),K=J+K.slice(0,-1)+l[K.slice(-1)];else{if(xo(q)!=="object")throw new Error("Don't know what to do with value type "+xo(q)+".");K=b(q)}se.push(B+K)}return se.push("}"),se.join("")},h=n.__fontmetrics__.uncompress=function(U){if(typeof U!="string")throw new Error("Invalid argument passed to uncompress.");for(var q,B,K,J,se={},ne=1,re=se,ke=[],Pe="",be="",pe=U.length-1,ye=1;ye<pe;ye+=1)(J=U[ye])=="'"?q?(K=q.join(""),q=void 0):q=[]:q?q.push(J):J=="{"?(ke.push([re,K]),re={},K=void 0):J=="}"?((B=ke.pop())[0][B[1]]=re,K=void 0,re=B[0]):J=="-"?ne=-1:K===void 0?o.hasOwnProperty(J)?(Pe+=o[J],K=parseInt(Pe,16)*ne,ne=1,Pe=""):Pe+=J:o.hasOwnProperty(J)?(be+=o[J],re[K]=parseInt(be,16)*ne,ne=1,K=void 0,be=""):be+=J;return se},E={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},L={Unicode:{Courier:E,"Courier-Bold":E,"Courier-BoldOblique":E,"Courier-Oblique":E,Helvetica:E,"Helvetica-Bold":E,"Helvetica-BoldOblique":E,"Helvetica-Oblique":E,"Times-Roman":E,"Times-Bold":E,"Times-BoldItalic":E,"Times-Italic":E}},z={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(U){var q=U.font,B=z.Unicode[q.postScriptName];B&&(q.metadata.Unicode={},q.metadata.Unicode.widths=B.widths,q.metadata.Unicode.kerning=B.kerning);var K=L.Unicode[q.postScriptName];K&&(q.metadata.Unicode.encoding=K,q.encoding=K.codePages[0])}])}(yn.API),function(n){var i=function(o){for(var l=o.length,p=new Uint8Array(l),m=0;m<l;m++)p[m]=o.charCodeAt(m);return p};n.API.events.push(["addFont",function(o){var l=void 0,p=o.font,m=o.instance;if(!p.isStandardFont){if(m===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+p.postScriptName+"').");if(typeof(l=m.existsFileInVFS(p.postScriptName)===!1?m.loadFile(p.postScriptName):m.getFileFromVFS(p.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+p.postScriptName+"').");(function(b,h){h=/^\x00\x01\x00\x00/.test(h)?i(h):i(Tf(h)),b.metadata=n.API.TTFFont.open(h),b.metadata.Unicode=b.metadata.Unicode||{encoding:{},kerning:{},widths:[]},b.metadata.glyIdsUsed=[0]})(p,l)}}])}(yn),function(n){function i(){return(wn.canvg?Promise.resolve(wn.canvg):tp(()=>import("./index.es-4b20230a.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load canvg: "+o))}).then(function(o){return o.default?o.default:o})}yn.API.addSvgAsImage=function(o,l,p,m,b,h,E,L){if(isNaN(l)||isNaN(p))throw Fo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(m)||isNaN(b))throw Fo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var z=document.createElement("canvas");z.width=m,z.height=b;var U=z.getContext("2d");U.fillStyle="#fff",U.fillRect(0,0,z.width,z.height);var q={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},B=this;return i().then(function(K){return K.fromString(U,o,q)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(K){return K.render(q)}).then(function(){B.addImage(z.toDataURL("image/jpeg",1),l,p,m,b,E,L)})}}(),yn.API.putTotalPages=function(n){var i,o=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(i=new RegExp(n,"g"),o=this.internal.getNumberOfPages()):(i=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),o=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var l=1;l<=this.internal.getNumberOfPages();l++)for(var p=0;p<this.internal.pages[l].length;p++)this.internal.pages[l][p]=this.internal.pages[l][p].replace(i,o);return this},yn.API.viewerPreferences=function(n,i){var o;n=n||{},i=i||!1;var l,p,m,b={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(b),E=[],L=0,z=0,U=0;function q(K,J){var se,ne=!1;for(se=0;se<K.length;se+=1)K[se]===J&&(ne=!0);return ne}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(b)),this.internal.viewerpreferences.isSubscribed=!1),o=this.internal.viewerpreferences.configuration,n==="reset"||i===!0){var B=h.length;for(U=0;U<B;U+=1)o[h[U]].value=o[h[U]].defaultValue,o[h[U]].explicitSet=!1}if(xo(n)==="object"){for(p in n)if(m=n[p],q(h,p)&&m!==void 0){if(o[p].type==="boolean"&&typeof m=="boolean")o[p].value=m;else if(o[p].type==="name"&&q(o[p].valueSet,m))o[p].value=m;else if(o[p].type==="integer"&&Number.isInteger(m))o[p].value=m;else if(o[p].type==="array"){for(L=0;L<m.length;L+=1)if(l=!0,m[L].length===1&&typeof m[L][0]=="number")E.push(String(m[L]-1));else if(m[L].length>1){for(z=0;z<m[L].length;z+=1)typeof m[L][z]!="number"&&(l=!1);l===!0&&E.push([m[L][0]-1,m[L][1]-1].join(" "))}o[p].value="["+E.join(" ")+"]"}else o[p].value=o[p].defaultValue;o[p].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var K,J=[];for(K in o)o[K].explicitSet===!0&&(o[K].type==="name"?J.push("/"+K+" /"+o[K].value):J.push("/"+K+" "+o[K].value));J.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+J.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=o,this},function(n){var i=function(){var l='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',p=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),m=unescape(encodeURIComponent(l)),b=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),E=unescape(encodeURIComponent("</x:xmpmeta>")),L=m.length+b.length+h.length+p.length+E.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+L+" >>"),this.internal.write("stream"),this.internal.write(p+m+b+h+E),this.internal.write("endstream"),this.internal.write("endobj")},o=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(l,p){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:l,namespaceuri:p||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",o),this.internal.events.subscribe("postPutResources",i)),this}}(yn.API),function(n){var i=n.API,o=i.pdfEscape16=function(m,b){for(var h,E=b.metadata.Unicode.widths,L=["","0","00","000","0000"],z=[""],U=0,q=m.length;U<q;++U){if(h=b.metadata.characterToGlyph(m.charCodeAt(U)),b.metadata.glyIdsUsed.push(h),b.metadata.toUnicode[h]=m.charCodeAt(U),E.indexOf(h)==-1&&(E.push(h),E.push([parseInt(b.metadata.widthOfGlyph(h),10)])),h=="0")return z.join("");h=h.toString(16),z.push(L[4-h.length],h)}return z.join("")},l=function(m){var b,h,E,L,z,U,q;for(z=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,E=[],U=0,q=(h=Object.keys(m).sort(function(B,K){return B-K})).length;U<q;U++)b=h[U],E.length>=100&&(z+=`
`+E.length+` beginbfchar
`+E.join(`
`)+`
endbfchar`,E=[]),m[b]!==void 0&&m[b]!==null&&typeof m[b].toString=="function"&&(L=("0000"+m[b].toString(16)).slice(-4),b=("0000"+(+b).toString(16)).slice(-4),E.push("<"+b+"><"+L+">"));return E.length&&(z+=`
`+E.length+` beginbfchar
`+E.join(`
`)+`
endbfchar
`),z+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};i.events.push(["putFont",function(m){(function(b){var h=b.font,E=b.out,L=b.newObject,z=b.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="Identity-H"){for(var U=h.metadata.Unicode.widths,q=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),B="",K=0;K<q.length;K++)B+=String.fromCharCode(q[K]);var J=L();z({data:B,addLength1:!0,objectId:J}),E("endobj");var se=L();z({data:l(h.metadata.toUnicode),addLength1:!0,objectId:se}),E("endobj");var ne=L();E("<<"),E("/Type /FontDescriptor"),E("/FontName /"+Dh(h.fontName)),E("/FontFile2 "+J+" 0 R"),E("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),E("/Flags "+h.metadata.flags),E("/StemV "+h.metadata.stemV),E("/ItalicAngle "+h.metadata.italicAngle),E("/Ascent "+h.metadata.ascender),E("/Descent "+h.metadata.decender),E("/CapHeight "+h.metadata.capHeight),E(">>"),E("endobj");var re=L();E("<<"),E("/Type /Font"),E("/BaseFont /"+Dh(h.fontName)),E("/FontDescriptor "+ne+" 0 R"),E("/W "+n.API.PDFObject.convert(U)),E("/CIDToGIDMap /Identity"),E("/DW 1000"),E("/Subtype /CIDFontType2"),E("/CIDSystemInfo"),E("<<"),E("/Supplement 0"),E("/Registry (Adobe)"),E("/Ordering ("+h.encoding+")"),E(">>"),E(">>"),E("endobj"),h.objectNumber=L(),E("<<"),E("/Type /Font"),E("/Subtype /Type0"),E("/ToUnicode "+se+" 0 R"),E("/BaseFont /"+Dh(h.fontName)),E("/Encoding /"+h.encoding),E("/DescendantFonts ["+re+" 0 R]"),E(">>"),E("endobj"),h.isAlreadyPutted=!0}})(m)}]),i.events.push(["putFont",function(m){(function(b){var h=b.font,E=b.out,L=b.newObject,z=b.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var U=h.metadata.rawData,q="",B=0;B<U.length;B++)q+=String.fromCharCode(U[B]);var K=L();z({data:q,addLength1:!0,objectId:K}),E("endobj");var J=L();z({data:l(h.metadata.toUnicode),addLength1:!0,objectId:J}),E("endobj");var se=L();E("<<"),E("/Descent "+h.metadata.decender),E("/CapHeight "+h.metadata.capHeight),E("/StemV "+h.metadata.stemV),E("/Type /FontDescriptor"),E("/FontFile2 "+K+" 0 R"),E("/Flags 96"),E("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),E("/FontName /"+Dh(h.fontName)),E("/ItalicAngle "+h.metadata.italicAngle),E("/Ascent "+h.metadata.ascender),E(">>"),E("endobj"),h.objectNumber=L();for(var ne=0;ne<h.metadata.hmtx.widths.length;ne++)h.metadata.hmtx.widths[ne]=parseInt(h.metadata.hmtx.widths[ne]*(1e3/h.metadata.head.unitsPerEm));E("<</Subtype/TrueType/Type/Font/ToUnicode "+J+" 0 R/BaseFont/"+Dh(h.fontName)+"/FontDescriptor "+se+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),E("endobj"),h.isAlreadyPutted=!0}})(m)}]);var p=function(m){var b,h=m.text||"",E=m.x,L=m.y,z=m.options||{},U=m.mutex||{},q=U.pdfEscape,B=U.activeFontKey,K=U.fonts,J=B,se="",ne=0,re="",ke=K[J].encoding;if(K[J].encoding!=="Identity-H")return{text:h,x:E,y:L,options:z,mutex:U};for(re=h,J=B,Array.isArray(h)&&(re=h[0]),ne=0;ne<re.length;ne+=1)K[J].metadata.hasOwnProperty("cmap")&&(b=K[J].metadata.cmap.unicode.codeMap[re[ne].charCodeAt(0)]),b||re[ne].charCodeAt(0)<256&&K[J].metadata.hasOwnProperty("Unicode")?se+=re[ne]:se+="";var Pe="";return parseInt(J.slice(1))<14||ke==="WinAnsiEncoding"?Pe=q(se,J).split("").map(function(be){return be.charCodeAt(0).toString(16)}).join(""):ke==="Identity-H"&&(Pe=o(se,K[J])),U.isHex=!0,{text:Pe,x:E,y:L,options:z,mutex:U}};i.events.push(["postProcessText",function(m){var b=m.text||"",h=[],E={text:b,x:m.x,y:m.y,options:m.options,mutex:m.mutex};if(Array.isArray(b)){var L=0;for(L=0;L<b.length;L+=1)Array.isArray(b[L])&&b[L].length===3?h.push([p(Object.assign({},E,{text:b[L][0]})).text,b[L][1],b[L][2]]):h.push(p(Object.assign({},E,{text:b[L]})).text);m.text=h}else m.text=p(Object.assign({},E,{text:b})).text}])}(yn),function(n){var i=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(o){return i.call(this),this.internal.vFS[o]!==void 0},n.addFileToVFS=function(o,l){return i.call(this),this.internal.vFS[o]=l,this},n.getFileFromVFS=function(o){return i.call(this),this.internal.vFS[o]!==void 0?this.internal.vFS[o]:null}}(yn.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(l){var p,m,b,h,E,L,z,U=i,q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],B=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],K={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},J={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},se=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],ne=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),re=!1,ke=0;this.__bidiEngine__={};var Pe=function(Se){var Me=Se.charCodeAt(),Ge=Me>>8,Xe=J[Ge];return Xe!==void 0?U[256*Xe+(255&Me)]:Ge===252||Ge===253?"AL":ne.test(Ge)?"L":Ge===8?"R":"N"},be=function(Se){for(var Me,Ge=0;Ge<Se.length;Ge++){if((Me=Pe(Se.charAt(Ge)))==="L")return!1;if(Me==="R")return!0}return!1},pe=function(Se,Me,Ge,Xe){var _t,pt,Gt,kt,Xt=Me[Xe];switch(Xt){case"L":case"R":re=!1;break;case"N":case"AN":break;case"EN":re&&(Xt="AN");break;case"AL":re=!0,Xt="R";break;case"WS":Xt="N";break;case"CS":Xe<1||Xe+1>=Me.length||(_t=Ge[Xe-1])!=="EN"&&_t!=="AN"||(pt=Me[Xe+1])!=="EN"&&pt!=="AN"?Xt="N":re&&(pt="AN"),Xt=pt===_t?pt:"N";break;case"ES":Xt=(_t=Xe>0?Ge[Xe-1]:"B")==="EN"&&Xe+1<Me.length&&Me[Xe+1]==="EN"?"EN":"N";break;case"ET":if(Xe>0&&Ge[Xe-1]==="EN"){Xt="EN";break}if(re){Xt="N";break}for(Gt=Xe+1,kt=Me.length;Gt<kt&&Me[Gt]==="ET";)Gt++;Xt=Gt<kt&&Me[Gt]==="EN"?"EN":"N";break;case"NSM":if(b&&!h){for(kt=Me.length,Gt=Xe+1;Gt<kt&&Me[Gt]==="NSM";)Gt++;if(Gt<kt){var Mt=Se[Xe],qt=Mt>=1425&&Mt<=2303||Mt===64286;if(_t=Me[Gt],qt&&(_t==="R"||_t==="AL")){Xt="R";break}}}Xt=Xe<1||(_t=Me[Xe-1])==="B"?"N":Ge[Xe-1];break;case"B":re=!1,p=!0,Xt=ke;break;case"S":m=!0,Xt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":re=!1;break;case"BN":Xt="N"}return Xt},ye=function(Se,Me,Ge){var Xe=Se.split("");return Ge&&me(Xe,Ge,{hiLevel:ke}),Xe.reverse(),Me&&Me.reverse(),Xe.join("")},me=function(Se,Me,Ge){var Xe,_t,pt,Gt,kt,Xt=-1,Mt=Se.length,qt=0,ve=[],it=ke?B:q,Re=[];for(re=!1,p=!1,m=!1,_t=0;_t<Mt;_t++)Re[_t]=Pe(Se[_t]);for(pt=0;pt<Mt;pt++){if(kt=qt,ve[pt]=pe(Se,Re,ve,pt),Xe=240&(qt=it[kt][K[ve[pt]]]),qt&=15,Me[pt]=Gt=it[qt][5],Xe>0)if(Xe===16){for(_t=Xt;_t<pt;_t++)Me[_t]=1;Xt=-1}else Xt=-1;if(it[qt][6])Xt===-1&&(Xt=pt);else if(Xt>-1){for(_t=Xt;_t<pt;_t++)Me[_t]=Gt;Xt=-1}Re[pt]==="B"&&(Me[pt]=0),Ge.hiLevel|=Gt}m&&function(bt,Ct,Ot){for(var Ht=0;Ht<Ot;Ht++)if(bt[Ht]==="S"){Ct[Ht]=ke;for(var Wt=Ht-1;Wt>=0&&bt[Wt]==="WS";Wt--)Ct[Wt]=ke}}(Re,Me,Mt)},tt=function(Se,Me,Ge,Xe,_t){if(!(_t.hiLevel<Se)){if(Se===1&&ke===1&&!p)return Me.reverse(),void(Ge&&Ge.reverse());for(var pt,Gt,kt,Xt,Mt=Me.length,qt=0;qt<Mt;){if(Xe[qt]>=Se){for(kt=qt+1;kt<Mt&&Xe[kt]>=Se;)kt++;for(Xt=qt,Gt=kt-1;Xt<Gt;Xt++,Gt--)pt=Me[Xt],Me[Xt]=Me[Gt],Me[Gt]=pt,Ge&&(pt=Ge[Xt],Ge[Xt]=Ge[Gt],Ge[Gt]=pt);qt=kt}qt++}}},nt=function(Se,Me,Ge){var Xe=Se.split(""),_t={hiLevel:ke};return Ge||(Ge=[]),me(Xe,Ge,_t),function(pt,Gt,kt){if(kt.hiLevel!==0&&z)for(var Xt,Mt=0;Mt<pt.length;Mt++)Gt[Mt]===1&&(Xt=se.indexOf(pt[Mt]))>=0&&(pt[Mt]=se[Xt+1])}(Xe,Ge,_t),tt(2,Xe,Me,Ge,_t),tt(1,Xe,Me,Ge,_t),Xe.join("")};return this.__bidiEngine__.doBidiReorder=function(Se,Me,Ge){if(function(_t,pt){if(pt)for(var Gt=0;Gt<_t.length;Gt++)pt[Gt]=Gt;h===void 0&&(h=be(_t)),L===void 0&&(L=be(_t))}(Se,Me),b||!E||L)if(b&&E&&h^L)ke=h?1:0,Se=ye(Se,Me,Ge);else if(!b&&E&&L)ke=h?1:0,Se=nt(Se,Me,Ge),Se=ye(Se,Me);else if(!b||h||E||L){if(b&&!E&&h^L)Se=ye(Se,Me),h?(ke=0,Se=nt(Se,Me,Ge)):(ke=1,Se=nt(Se,Me,Ge),Se=ye(Se,Me));else if(b&&h&&!E&&L)ke=1,Se=nt(Se,Me,Ge),Se=ye(Se,Me);else if(!b&&!E&&h^L){var Xe=z;h?(ke=1,Se=nt(Se,Me,Ge),ke=0,z=!1,Se=nt(Se,Me,Ge),z=Xe):(ke=0,Se=nt(Se,Me,Ge),Se=ye(Se,Me),ke=1,z=!1,Se=nt(Se,Me,Ge),z=Xe,Se=ye(Se,Me))}}else ke=0,Se=nt(Se,Me,Ge);else ke=h?1:0,Se=nt(Se,Me,Ge);return Se},this.__bidiEngine__.setOptions=function(Se){Se&&(b=Se.isInputVisual,E=Se.isOutputVisual,h=Se.isInputRtl,L=Se.isOutputRtl,z=Se.isSymmetricSwapping)},this.__bidiEngine__.setOptions(l),this.__bidiEngine__};var i=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],o=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(l){var p=l.text,m=(l.x,l.y,l.options||{}),b=(l.mutex,m.lang,[]);if(m.isInputVisual=typeof m.isInputVisual!="boolean"||m.isInputVisual,o.setOptions(m),Object.prototype.toString.call(p)==="[object Array]"){var h=0;for(b=[],h=0;h<p.length;h+=1)Object.prototype.toString.call(p[h])==="[object Array]"?b.push([o.doBidiReorder(p[h][0]),p[h][1],p[h][2]]):b.push([o.doBidiReorder(p[h])]);l.text=b}else l.text=o.doBidiReorder(p);o.setOptions({isInputVisual:!0})}])}(yn),yn.API.TTFFont=function(){function n(i){var o;if(this.rawData=i,o=this.contents=new A0(i),this.contents.pos=4,o.readString(4)==="ttcf")throw new Error("TTCF not supported.");o.pos=0,this.parse(),this.subset=new Sw(this),this.registerTTF()}return n.open=function(i){return new n(i)},n.prototype.parse=function(){return this.directory=new fw(this.contents),this.head=new pw(this),this.name=new _w(this),this.cmap=new g5(this),this.toUnicode={},this.hhea=new mw(this),this.maxp=new bw(this),this.hmtx=new ww(this),this.post=new yw(this),this.os2=new gw(this),this.loca=new Ew(this),this.glyf=new xw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var i,o,l,p,m;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var b,h,E,L;for(L=[],b=0,h=(E=this.bbox).length;b<h;b++)i=E[b],L.push(Math.round(i*this.scaleFactor));return L}.call(this),this.stemV=0,this.post.exists?(l=255&(p=this.post.italic_angle),(32768&(o=p>>16))!=0&&(o=-(1+(65535^o))),this.italicAngle=+(o+"."+l)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(m=this.familyClass)===1||m===2||m===3||m===4||m===5||m===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(i){var o;return((o=this.cmap.unicode)!=null?o.codeMap[i]:void 0)||0},n.prototype.widthOfGlyph=function(i){var o;return o=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(i).advance*o},n.prototype.widthOfString=function(i,o,l){var p,m,b,h;for(b=0,m=0,h=(i=""+i).length;0<=h?m<h:m>h;m=0<=h?++m:--m)p=i.charCodeAt(m),b+=this.widthOfGlyph(this.characterToGlyph(p))+l*(1e3/o)||0;return b*(o/1e3)},n.prototype.lineHeight=function(i,o){var l;return o==null&&(o=!1),l=o?this.lineGap:0,(this.ascender+l-this.decender)/1e3*i},n}();var Ku,A0=function(){function n(i){this.data=i!=null?i:[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(i){return this.data[this.pos++]=i},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(i){return this.writeByte(i>>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt32=function(){var i;return(i=this.readUInt32())>=2147483648?i-4294967296:i},n.prototype.writeInt32=function(i){return i<0&&(i+=4294967296),this.writeUInt32(i)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(i){return this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt16=function(){var i;return(i=this.readUInt16())>=32768?i-65536:i},n.prototype.writeInt16=function(i){return i<0&&(i+=65536),this.writeUInt16(i)},n.prototype.readString=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)l[o]=String.fromCharCode(this.readByte());return l.join("")},n.prototype.writeString=function(i){var o,l,p;for(p=[],o=0,l=i.length;0<=l?o<l:o>l;o=0<=l?++o:--o)p.push(this.writeByte(i.charCodeAt(o)));return p},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(i){return this.writeInt16(i)},n.prototype.readLongLong=function(){var i,o,l,p,m,b,h,E;return i=this.readByte(),o=this.readByte(),l=this.readByte(),p=this.readByte(),m=this.readByte(),b=this.readByte(),h=this.readByte(),E=this.readByte(),128&i?-1*(72057594037927940*(255^i)+281474976710656*(255^o)+1099511627776*(255^l)+4294967296*(255^p)+16777216*(255^m)+65536*(255^b)+256*(255^h)+(255^E)+1):72057594037927940*i+281474976710656*o+1099511627776*l+4294967296*p+16777216*m+65536*b+256*h+E},n.prototype.writeLongLong=function(i){var o,l;return o=Math.floor(i/4294967296),l=4294967295&i,this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o),this.writeByte(l>>24&255),this.writeByte(l>>16&255),this.writeByte(l>>8&255),this.writeByte(255&l)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(i){return this.writeInt32(i)},n.prototype.read=function(i){var o,l;for(o=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)o.push(this.readByte());return o},n.prototype.write=function(i){var o,l,p,m;for(m=[],l=0,p=i.length;l<p;l++)o=i[l],m.push(this.writeByte(o));return m},n}(),fw=function(){var n;function i(o){var l,p,m;for(this.scalarType=o.readInt(),this.tableCount=o.readShort(),this.searchRange=o.readShort(),this.entrySelector=o.readShort(),this.rangeShift=o.readShort(),this.tables={},p=0,m=this.tableCount;0<=m?p<m:p>m;p=0<=m?++p:--p)l={tag:o.readString(4),checksum:o.readInt(),offset:o.readInt(),length:o.readInt()},this.tables[l.tag]=l}return i.prototype.encode=function(o){var l,p,m,b,h,E,L,z,U,q,B,K,J;for(J in B=Object.keys(o).length,E=Math.log(2),U=16*Math.floor(Math.log(B)/E),b=Math.floor(U/E),z=16*B-U,(p=new A0).writeInt(this.scalarType),p.writeShort(B),p.writeShort(U),p.writeShort(b),p.writeShort(z),m=16*B,L=p.pos+m,h=null,K=[],o)for(q=o[J],p.writeString(J),p.writeInt(n(q)),p.writeInt(L),p.writeInt(q.length),K=K.concat(q),J==="head"&&(h=L),L+=q.length;L%4;)K.push(0),L++;return p.write(K),l=2981146554-n(p.data),p.pos=h+8,p.writeUInt32(l),p.data},n=function(o){var l,p,m,b;for(o=y5.call(o);o.length%4;)o.push(0);for(m=new A0(o),p=0,l=0,b=o.length;l<b;l=l+=4)p+=m.readUInt32();return 4294967295&p},i}(),dw={}.hasOwnProperty,xc=function(n,i){for(var o in i)dw.call(i,o)&&(n[o]=i[o]);function l(){this.constructor=n}return l.prototype=i.prototype,n.prototype=new l,n.__super__=i.prototype,n};Ku=function(){function n(i){var o;this.file=i,o=this.file.directory.tables[this.tag],this.exists=!!o,o&&(this.offset=o.offset,this.length=o.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var pw=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="head",i.prototype.parse=function(o){return o.pos=this.offset,this.version=o.readInt(),this.revision=o.readInt(),this.checkSumAdjustment=o.readInt(),this.magicNumber=o.readInt(),this.flags=o.readShort(),this.unitsPerEm=o.readShort(),this.created=o.readLongLong(),this.modified=o.readLongLong(),this.xMin=o.readShort(),this.yMin=o.readShort(),this.xMax=o.readShort(),this.yMax=o.readShort(),this.macStyle=o.readShort(),this.lowestRecPPEM=o.readShort(),this.fontDirectionHint=o.readShort(),this.indexToLocFormat=o.readShort(),this.glyphDataFormat=o.readShort()},i.prototype.encode=function(o){var l;return(l=new A0).writeInt(this.version),l.writeInt(this.revision),l.writeInt(this.checkSumAdjustment),l.writeInt(this.magicNumber),l.writeShort(this.flags),l.writeShort(this.unitsPerEm),l.writeLongLong(this.created),l.writeLongLong(this.modified),l.writeShort(this.xMin),l.writeShort(this.yMin),l.writeShort(this.xMax),l.writeShort(this.yMax),l.writeShort(this.macStyle),l.writeShort(this.lowestRecPPEM),l.writeShort(this.fontDirectionHint),l.writeShort(o),l.writeShort(this.glyphDataFormat),l.data},i}(),ay=function(){function n(i,o){var l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke;switch(this.platformID=i.readUInt16(),this.encodingID=i.readShort(),this.offset=o+i.readInt(),U=i.pos,i.pos=this.offset,this.format=i.readUInt16(),this.length=i.readUInt16(),this.language=i.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(E=0;E<256;++E)this.codeMap[E]=i.readByte();break;case 4:for(B=i.readUInt16(),q=B/2,i.pos+=6,m=function(){var Pe,be;for(be=[],E=Pe=0;0<=q?Pe<q:Pe>q;E=0<=q?++Pe:--Pe)be.push(i.readUInt16());return be}(),i.pos+=2,J=function(){var Pe,be;for(be=[],E=Pe=0;0<=q?Pe<q:Pe>q;E=0<=q?++Pe:--Pe)be.push(i.readUInt16());return be}(),L=function(){var Pe,be;for(be=[],E=Pe=0;0<=q?Pe<q:Pe>q;E=0<=q?++Pe:--Pe)be.push(i.readUInt16());return be}(),z=function(){var Pe,be;for(be=[],E=Pe=0;0<=q?Pe<q:Pe>q;E=0<=q?++Pe:--Pe)be.push(i.readUInt16());return be}(),p=(this.length-i.pos+this.offset)/2,h=function(){var Pe,be;for(be=[],E=Pe=0;0<=p?Pe<p:Pe>p;E=0<=p?++Pe:--Pe)be.push(i.readUInt16());return be}(),E=ne=0,ke=m.length;ne<ke;E=++ne)for(se=m[E],l=re=K=J[E];K<=se?re<=se:re>=se;l=K<=se?++re:--re)z[E]===0?b=l+L[E]:(b=h[z[E]/2+(l-K)-(q-E)]||0)!==0&&(b+=L[E]),this.codeMap[l]=65535&b}i.pos=U}return n.encode=function(i,o){var l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t,pt,Gt,kt,Xt,Mt,qt,ve,it,Re,bt,Ct,Ot,Ht,Wt,si,ri,zi;switch(Xe=new A0,b=Object.keys(i).sort(function(Di,er){return Di-er}),o){case"macroman":for(J=0,se=function(){var Di=[];for(K=0;K<256;++K)Di.push(0);return Di}(),re={0:0},m={},_t=0,Xt=b.length;_t<Xt;_t++)re[Wt=i[p=b[_t]]]==null&&(re[Wt]=++J),m[p]={old:i[p],new:re[i[p]]},se[p]=re[i[p]];return Xe.writeUInt16(1),Xe.writeUInt16(0),Xe.writeUInt32(12),Xe.writeUInt16(0),Xe.writeUInt16(262),Xe.writeUInt16(0),Xe.write(se),{charMap:m,subtable:Xe.data,maxGlyphID:J+1};case"unicode":for(Me=[],U=[],ke=0,re={},l={},ne=L=null,pt=0,Mt=b.length;pt<Mt;pt++)re[be=i[p=b[pt]]]==null&&(re[be]=++ke),l[p]={old:be,new:re[be]},h=re[be]-p,ne!=null&&h===L||(ne&&U.push(ne),Me.push(p),L=h),ne=p;for(ne&&U.push(ne),U.push(65535),Me.push(65535),nt=2*(tt=Me.length),me=2*Math.pow(Math.log(tt)/Math.LN2,2),q=Math.log(me/2)/Math.LN2,ye=2*tt-me,E=[],pe=[],B=[],K=Gt=0,qt=Me.length;Gt<qt;K=++Gt){if(Se=Me[K],z=U[K],Se===65535){E.push(0),pe.push(0);break}if(Se-(Ge=l[Se].new)>=32768)for(E.push(0),pe.push(2*(B.length+tt-K)),p=kt=Se;Se<=z?kt<=z:kt>=z;p=Se<=z?++kt:--kt)B.push(l[p].new);else E.push(Ge-Se),pe.push(0)}for(Xe.writeUInt16(3),Xe.writeUInt16(1),Xe.writeUInt32(12),Xe.writeUInt16(4),Xe.writeUInt16(16+8*tt+2*B.length),Xe.writeUInt16(0),Xe.writeUInt16(nt),Xe.writeUInt16(me),Xe.writeUInt16(q),Xe.writeUInt16(ye),Ot=0,ve=U.length;Ot<ve;Ot++)p=U[Ot],Xe.writeUInt16(p);for(Xe.writeUInt16(0),Ht=0,it=Me.length;Ht<it;Ht++)p=Me[Ht],Xe.writeUInt16(p);for(si=0,Re=E.length;si<Re;si++)h=E[si],Xe.writeUInt16(h);for(ri=0,bt=pe.length;ri<bt;ri++)Pe=pe[ri],Xe.writeUInt16(Pe);for(zi=0,Ct=B.length;zi<Ct;zi++)J=B[zi],Xe.writeUInt16(J);return{charMap:l,subtable:Xe.data,maxGlyphID:ke+1}}},n}(),g5=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="cmap",i.prototype.parse=function(o){var l,p,m;for(o.pos=this.offset,this.version=o.readUInt16(),m=o.readUInt16(),this.tables=[],this.unicode=null,p=0;0<=m?p<m:p>m;p=0<=m?++p:--p)l=new ay(o,this.offset),this.tables.push(l),l.isUnicode&&this.unicode==null&&(this.unicode=l);return!0},i.encode=function(o,l){var p,m;return l==null&&(l="macroman"),p=ay.encode(o,l),(m=new A0).writeUInt16(0),m.writeUInt16(1),p.table=m.data.concat(p.subtable),p},i}(),mw=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="hhea",i.prototype.parse=function(o){return o.pos=this.offset,this.version=o.readInt(),this.ascender=o.readShort(),this.decender=o.readShort(),this.lineGap=o.readShort(),this.advanceWidthMax=o.readShort(),this.minLeftSideBearing=o.readShort(),this.minRightSideBearing=o.readShort(),this.xMaxExtent=o.readShort(),this.caretSlopeRise=o.readShort(),this.caretSlopeRun=o.readShort(),this.caretOffset=o.readShort(),o.pos+=8,this.metricDataFormat=o.readShort(),this.numberOfMetrics=o.readUInt16()},i}(),gw=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="OS/2",i.prototype.parse=function(o){if(o.pos=this.offset,this.version=o.readUInt16(),this.averageCharWidth=o.readShort(),this.weightClass=o.readUInt16(),this.widthClass=o.readUInt16(),this.type=o.readShort(),this.ySubscriptXSize=o.readShort(),this.ySubscriptYSize=o.readShort(),this.ySubscriptXOffset=o.readShort(),this.ySubscriptYOffset=o.readShort(),this.ySuperscriptXSize=o.readShort(),this.ySuperscriptYSize=o.readShort(),this.ySuperscriptXOffset=o.readShort(),this.ySuperscriptYOffset=o.readShort(),this.yStrikeoutSize=o.readShort(),this.yStrikeoutPosition=o.readShort(),this.familyClass=o.readShort(),this.panose=function(){var l,p;for(p=[],l=0;l<10;++l)p.push(o.readByte());return p}(),this.charRange=function(){var l,p;for(p=[],l=0;l<4;++l)p.push(o.readInt());return p}(),this.vendorID=o.readString(4),this.selection=o.readShort(),this.firstCharIndex=o.readShort(),this.lastCharIndex=o.readShort(),this.version>0&&(this.ascent=o.readShort(),this.descent=o.readShort(),this.lineGap=o.readShort(),this.winAscent=o.readShort(),this.winDescent=o.readShort(),this.codePageRange=function(){var l,p;for(p=[],l=0;l<2;l=++l)p.push(o.readInt());return p}(),this.version>1))return this.xHeight=o.readShort(),this.capHeight=o.readShort(),this.defaultChar=o.readShort(),this.breakChar=o.readShort(),this.maxContext=o.readShort()},i}(),yw=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="post",i.prototype.parse=function(o){var l,p,m;switch(o.pos=this.offset,this.format=o.readInt(),this.italicAngle=o.readInt(),this.underlinePosition=o.readShort(),this.underlineThickness=o.readShort(),this.isFixedPitch=o.readInt(),this.minMemType42=o.readInt(),this.maxMemType42=o.readInt(),this.minMemType1=o.readInt(),this.maxMemType1=o.readInt(),this.format){case 65536:break;case 131072:var b;for(p=o.readUInt16(),this.glyphNameIndex=[],b=0;0<=p?b<p:b>p;b=0<=p?++b:--b)this.glyphNameIndex.push(o.readUInt16());for(this.names=[],m=[];o.pos<this.offset+this.length;)l=o.readByte(),m.push(this.names.push(o.readString(l)));return m;case 151552:return p=o.readUInt16(),this.offsets=o.read(p);case 196608:break;case 262144:return this.map=function(){var h,E,L;for(L=[],b=h=0,E=this.file.maxp.numGlyphs;0<=E?h<E:h>E;b=0<=E?++h:--h)L.push(o.readUInt32());return L}.call(this)}},i}(),vw=function(n,i){this.raw=n,this.length=n.length,this.platformID=i.platformID,this.encodingID=i.encodingID,this.languageID=i.languageID},_w=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="name",i.prototype.parse=function(o){var l,p,m,b,h,E,L,z,U,q,B;for(o.pos=this.offset,o.readShort(),l=o.readShort(),E=o.readShort(),p=[],b=0;0<=l?b<l:b>l;b=0<=l?++b:--b)p.push({platformID:o.readShort(),encodingID:o.readShort(),languageID:o.readShort(),nameID:o.readShort(),length:o.readShort(),offset:this.offset+E+o.readShort()});for(L={},b=U=0,q=p.length;U<q;b=++U)m=p[b],o.pos=m.offset,z=o.readString(m.length),h=new vw(z,m),L[B=m.nameID]==null&&(L[B]=[]),L[m.nameID].push(h);this.strings=L,this.copyright=L[0],this.fontFamily=L[1],this.fontSubfamily=L[2],this.uniqueSubfamily=L[3],this.fontName=L[4],this.version=L[5];try{this.postscriptName=L[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=L[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=L[7],this.manufacturer=L[8],this.designer=L[9],this.description=L[10],this.vendorUrl=L[11],this.designerUrl=L[12],this.license=L[13],this.licenseUrl=L[14],this.preferredFamily=L[15],this.preferredSubfamily=L[17],this.compatibleFull=L[18],this.sampleText=L[19]},i}(),bw=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="maxp",i.prototype.parse=function(o){return o.pos=this.offset,this.version=o.readInt(),this.numGlyphs=o.readUInt16(),this.maxPoints=o.readUInt16(),this.maxContours=o.readUInt16(),this.maxCompositePoints=o.readUInt16(),this.maxComponentContours=o.readUInt16(),this.maxZones=o.readUInt16(),this.maxTwilightPoints=o.readUInt16(),this.maxStorage=o.readUInt16(),this.maxFunctionDefs=o.readUInt16(),this.maxInstructionDefs=o.readUInt16(),this.maxStackElements=o.readUInt16(),this.maxSizeOfInstructions=o.readUInt16(),this.maxComponentElements=o.readUInt16(),this.maxComponentDepth=o.readUInt16()},i}(),ww=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="hmtx",i.prototype.parse=function(o){var l,p,m,b,h,E,L;for(o.pos=this.offset,this.metrics=[],l=0,E=this.file.hhea.numberOfMetrics;0<=E?l<E:l>E;l=0<=E?++l:--l)this.metrics.push({advance:o.readUInt16(),lsb:o.readInt16()});for(m=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var z,U;for(U=[],l=z=0;0<=m?z<m:z>m;l=0<=m?++z:--z)U.push(o.readInt16());return U}(),this.widths=function(){var z,U,q,B;for(B=[],z=0,U=(q=this.metrics).length;z<U;z++)b=q[z],B.push(b.advance);return B}.call(this),p=this.widths[this.widths.length-1],L=[],l=h=0;0<=m?h<m:h>m;l=0<=m?++h:--h)L.push(this.widths.push(p));return L},i.prototype.forGlyph=function(o){return o in this.metrics?this.metrics[o]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[o-this.metrics.length]}},i}(),y5=[].slice,xw=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(o){var l,p,m,b,h,E,L,z,U,q;return o in this.cache?this.cache[o]:(b=this.file.loca,l=this.file.contents,p=b.indexOf(o),(m=b.lengthOf(o))===0?this.cache[o]=null:(l.pos=this.offset+p,h=(E=new A0(l.read(m))).readShort(),z=E.readShort(),q=E.readShort(),L=E.readShort(),U=E.readShort(),this.cache[o]=h===-1?new Aw(E,z,q,L,U):new kw(E,h,z,q,L,U),this.cache[o]))},i.prototype.encode=function(o,l,p){var m,b,h,E,L;for(h=[],b=[],E=0,L=l.length;E<L;E++)m=o[l[E]],b.push(h.length),m&&(h=h.concat(m.encode(p)));return b.push(h.length),{table:h,offsets:b}},i}(),kw=function(){function n(i,o,l,p,m,b){this.raw=i,this.numberOfContours=o,this.xMin=l,this.yMin=p,this.xMax=m,this.yMax=b,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Aw=function(){function n(i,o,l,p,m){var b,h;for(this.raw=i,this.xMin=o,this.yMin=l,this.xMax=p,this.yMax=m,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],b=this.raw;h=b.readShort(),this.glyphOffsets.push(b.pos),this.glyphIDs.push(b.readUInt16()),32&h;)b.pos+=1&h?4:2,128&h?b.pos+=8:64&h?b.pos+=4:8&h&&(b.pos+=2)}return n.prototype.encode=function(){var i,o,l;for(o=new A0(y5.call(this.raw.data)),i=0,l=this.glyphIDs.length;i<l;++i)o.pos=this.glyphOffsets[i];return o.data},n}(),Ew=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return xc(i,Ku),i.prototype.tag="loca",i.prototype.parse=function(o){var l,p;return o.pos=this.offset,l=this.file.head.indexToLocFormat,this.offsets=l===0?function(){var m,b;for(b=[],p=0,m=this.length;p<m;p+=2)b.push(2*o.readUInt16());return b}.call(this):function(){var m,b;for(b=[],p=0,m=this.length;p<m;p+=4)b.push(o.readUInt32());return b}.call(this)},i.prototype.indexOf=function(o){return this.offsets[o]},i.prototype.lengthOf=function(o){return this.offsets[o+1]-this.offsets[o]},i.prototype.encode=function(o,l){for(var p=new Uint32Array(this.offsets.length),m=0,b=0,h=0;h<p.length;++h)if(p[h]=m,b<l.length&&l[b]==h){++b,p[h]=m;var E=this.offsets[h],L=this.offsets[h+1]-E;L>0&&(m+=L)}for(var z=new Array(4*p.length),U=0;U<p.length;++U)z[4*U+3]=255&p[U],z[4*U+2]=(65280&p[U])>>8,z[4*U+1]=(16711680&p[U])>>16,z[4*U]=(4278190080&p[U])>>24;return z},i}(),Sw=function(){function n(i){this.font=i,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var i,o,l,p,m;for(o in p=this.font.cmap.tables[0].codeMap,i={},m=this.subset)l=m[o],i[o]=p[l];return i},n.prototype.glyphsFor=function(i){var o,l,p,m,b,h,E;for(p={},b=0,h=i.length;b<h;b++)p[m=i[b]]=this.font.glyf.glyphFor(m);for(m in o=[],p)(l=p[m])!=null&&l.compound&&o.push.apply(o,l.glyphIDs);if(o.length>0)for(m in E=this.glyphsFor(o))l=E[m],p[m]=l;return p},n.prototype.encode=function(i,o){var l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne;for(p in l=g5.encode(this.generateCmap(),"unicode"),b=this.glyphsFor(i),B={0:0},ne=l.charMap)B[(E=ne[p]).old]=E.new;for(K in q=l.maxGlyphID,b)K in B||(B[K]=q++);return z=function(re){var ke,Pe;for(ke in Pe={},re)Pe[re[ke]]=ke;return Pe}(B),U=Object.keys(z).sort(function(re,ke){return re-ke}),J=function(){var re,ke,Pe;for(Pe=[],re=0,ke=U.length;re<ke;re++)h=U[re],Pe.push(z[h]);return Pe}(),m=this.font.glyf.encode(b,J,B),L=this.font.loca.encode(m.offsets,J),se={cmap:this.font.cmap.raw(),glyf:m.table,loca:L,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(o)},this.font.os2.exists&&(se["OS/2"]=this.font.os2.raw()),this.font.directory.encode(se)},n}();yn.API.PDFObject=function(){var n;function i(){}return n=function(o,l){return(Array(l+1).join("0")+o).slice(-l)},i.convert=function(o){var l,p,m,b;if(Array.isArray(o))return"["+function(){var h,E,L;for(L=[],h=0,E=o.length;h<E;h++)l=o[h],L.push(i.convert(l));return L}().join(" ")+"]";if(typeof o=="string")return"/"+o;if(o!=null&&o.isString)return"("+o+")";if(o instanceof Date)return"(D:"+n(o.getUTCFullYear(),4)+n(o.getUTCMonth(),2)+n(o.getUTCDate(),2)+n(o.getUTCHours(),2)+n(o.getUTCMinutes(),2)+n(o.getUTCSeconds(),2)+"Z)";if({}.toString.call(o)==="[object Object]"){for(p in m=["<<"],o)b=o[p],m.push("/"+p+" "+i.convert(b));return m.push(">>"),m.join(`
`)}return""+o},i}();const ju={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},Y0={in:"in",mm:"mm"},_0={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},bc={Landscape:"landscape",Portrait:"portrait"},Jh={72:72,96:96,200:200,300:300,400:400};class Iw{constructor(){wo(this,"map");wo(this,"width",_0.A4[0]);wo(this,"height",_0.A4[1]);wo(this,"dpi",Jh[96]);wo(this,"format",ju.PNG.toString());wo(this,"unit",Y0.mm)}generate(i,o=_0.A4,l=300,p=ju.PNG.toString(),m=Y0.mm){this.map=i,this.width=o[0],this.height=o[1],this.dpi=l,this.format=p,this.unit=m;const b=this,h=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return b.dpi/96}});const E=document.createElement("div");E.className="hidden-map",document.body.appendChild(E);const L=document.createElement("div");L.style.width=this.toPixels(this.width),L.style.height=this.toPixels(this.height),E.appendChild(L);const z=this.map.getStyle();if(z&&z.sources){const q=z.sources;Object.keys(q).forEach(B=>{const K=q[B];Object.keys(K).forEach(J=>{K[J]||delete K[J]})})}const U=new Yl.exports.Map({container:L,style:z,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});U.once("idle",()=>{var K;const q=U.getCanvas(),B=`map.${b.format}`;switch(b.format){case ju.PNG:b.toPNG(q,B);break;case ju.JPEG:b.toJPEG(q,B);break;case ju.PDF:b.toPDF(U,B);break;case ju.SVG:b.toSVG(q,B);break;default:console.error(`Invalid file format: ${b.format}`);break}U.remove(),(K=E.parentNode)==null||K.removeChild(E),Object.defineProperty(window,"devicePixelRatio",{get(){return h}})})}toPNG(i,o){const l=document.createElement("a");l.href=i.toDataURL(),l.download=o,l.click(),l.remove()}toJPEG(i,o){const l=i.toDataURL("image/jpeg",.85),p=document.createElement("a");p.href=l,p.download=o,p.click(),p.remove()}toPDF(i,o){const l=i.getCanvas(),p=new yn({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});p.addImage(l.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:m,lat:b}=i.getCenter();p.setProperties({title:i.getStyle().name,subject:`center: [${m}, ${b}], zoom: ${i.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),p.save(o)}toSVG(i,o){const l=i.toDataURL("image/png"),p=Number(this.toPixels(this.width,this.dpi).replace("px","")),m=Number(this.toPixels(this.height,this.dpi).replace("px","")),b=`
		<svg xmlns="http://www.w3.org/2000/svg" 
			xmlns:xlink="http://www.w3.org/1999/xlink" 
			version="1.1" 
			width="${p}" 
			height="${m}" 
			viewBox="0 0 ${p} ${m}" 
			xml:space="preserve">
		    <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
			xlink:href="${l}" width="${p}" height="${m}"></image>
		</svg>`,h=document.createElement("a");h.href=`data:application/xml,${encodeURIComponent(b)}`,h.download=o,h.click(),h.remove()}toPixels(i,o=96){return this.unit===Y0.mm&&(o/=25.4),`${o*i}px`}toBlob(i){const o=atob(i.replace(/^.*,/,"")),l=new Uint8Array(o.length);for(let m=0;m<o.length;m+=1)l[m]=o.charCodeAt(m);return new Blob([l.buffer],{type:"image/png"})}}const Cw=Object.freeze(Object.defineProperty({__proto__:null,Format:ju,Unit:Y0,Size:_0,PageOrientation:bc,DPI:Jh,default:Iw},Symbol.toStringTag,{value:"Module"}));class Tw{constructor(i){wo(this,"map");wo(this,"width");wo(this,"height");wo(this,"unit");wo(this,"svgCanvas");wo(this,"svgPath");var b,h,E;if(this.map=i,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const o=(b=this.map)==null?void 0:b.getCanvas().clientWidth,l=(h=this.map)==null?void 0:h.getCanvas().clientHeight,p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.style.position="absolute",p.style.top="0px",p.style.left="0px",p.setAttribute("width",`${o}px`),p.setAttribute("height",`${l}px`);const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("style","fill:#888888;stroke-width:0"),m.setAttribute("fill-opacity","0.5"),p.append(m),(E=this.map)==null||E.getCanvasContainer().appendChild(p),this.svgCanvas=p,this.svgPath=m}mapResize(){this.generateCutOut()}updateArea(i,o){this.width=i,this.height=o,this.unit=Y0.mm,this.generateCutOut()}generateCutOut(){var L,z;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0||!(this.width&&this.height))return;const i=this.toPixels(this.width),o=this.toPixels(this.height),l=(L=this.map)==null?void 0:L.getCanvas().clientWidth,p=(z=this.map)==null?void 0:z.getCanvas().clientHeight,m=l/2-i/2,b=m+i,h=p/2-o/2,E=h+o;this.svgCanvas.setAttribute("width",`${l}px`),this.svgCanvas.setAttribute("height",`${p}px`),this.svgPath.setAttribute("d",`M 0 0 L ${l} 0 L ${l} ${p} L 0 ${p} M ${m} ${h} L ${m} ${E} L ${b} ${E} L ${b} ${h}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(i,o=96){return this.unit===Y0.mm&&(o/=25.4),o*i}}class Lw{constructor(i){wo(this,"map");wo(this,"width");wo(this,"height");wo(this,"svgCanvas");wo(this,"xLine");wo(this,"yLine");wo(this,"color","#535353");this.map=i,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var i,o;this.width=(i=this.map)==null?void 0:i.getCanvas().clientWidth,this.height=(o=this.map)==null?void 0:o.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const i=this.width/2,o=this.height/2;this.yLine.setAttribute("x1",`${i}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${i}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1",`${0}px`),this.xLine.setAttribute("y1",`${o}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${o}px`)}else console.error("element value is null")}createCanvas(i){if(this.width!==void 0&&this.height!==void 0){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="relative",o.setAttribute("width",`${this.width}px`),o.setAttribute("height",`${this.height}px`);const l=this.width/2,p=this.height/2;this.yLine=o.appendChild(this.createLine(l.toString(),"0",l.toString(),this.height.toString(),this.color,"2px")),this.xLine=o.appendChild(this.createLine("0",p.toString(),this.width.toString(),p.toString(),this.color,"2px")),i==null||i.appendChild(o),this.svgCanvas=o}}createLine(i,o,l,p,m,b){const h=document.createElementNS("http://www.w3.org/2000/svg","line");return h.setAttribute("x1",i),h.setAttribute("y1",o),h.setAttribute("x2",l),h.setAttribute("y2",p),h.setAttribute("stroke-dasharray","5,5"),h.setAttribute("stroke",m),h.setAttribute("stroke-width",b),h}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}function Pw(n,i,o,l){var p,m=(p=l)==null||typeof p=="number"||typeof p=="boolean"?l:o(l),b=i.get(m);return b===void 0&&(b=n.call(this,l),i.set(m,b)),b}function Mw(n,i,o){var l=Array.prototype.slice.call(arguments,3),p=o(l),m=i.get(p);return m===void 0&&(m=n.apply(this,l),i.set(p,m)),m}function Dw(n,i){return function(o,l,p,m,b){return p.bind(l,o,m,b)}(n,this,n.length===1?Pw:Mw,i.cache.create(),i.serializer)}const zw=JSON.stringify;function Gd(){this.cache=Object.create(null)}Gd.prototype.has=function(n){return n in this.cache},Gd.prototype.get=function(n){return this.cache[n]},Gd.prototype.set=function(n,i){this.cache[n]=i};var Nw={create:function(){return new Gd}};const Fw=(n,i={})=>{var Wt,si;let{bounds:o,axis:l="both",gpuAcceleration:p=!0,applyUserSelectHack:m=!0,disabled:b=!1,ignoreMultitouch:h=!1,grid:E,position:L,cancel:z,handle:U,defaultClass:q="neodrag",defaultClassDragging:B="neodrag-dragging",defaultClassDragged:K="neodrag-dragged",defaultPosition:J={x:0,y:0},onDragStart:se,onDrag:ne,onDragEnd:re}=i;const ke=new Promise(requestAnimationFrame);let Pe,be,pe=!1,ye=0,me=0,tt=0,nt=0,Se=0,Me=0,{x:Ge,y:Xe}=L?{x:(Wt=L==null?void 0:L.x)!=null?Wt:0,y:(si=L==null?void 0:L.y)!=null?si:0}:J;_1(Ge,Xe,n,p);let _t,pt,Gt,kt,Xt="",Mt=!!L;const qt=document.body.style,ve=n.classList,it=(ri,zi)=>{const Di={offsetX:ye,offsetY:me,domRect:n.getBoundingClientRect()};n.dispatchEvent(new CustomEvent(ri,{detail:Di})),zi==null||zi(Di)},Re=addEventListener;Re("touchstart",Ct,!1),Re("touchend",Ot,!1),Re("touchmove",Ht,!1),Re("mousedown",Ct,!1),Re("mouseup",Ot,!1),Re("mousemove",Ht,!1),n.style.touchAction="none";const bt=()=>{let ri=n.offsetWidth/pt.width;return isNaN(ri)&&(ri=1),ri};function Ct(ri){if(b||h&&ri.type==="touchstart"&&ri.touches.length>1)return;if(ve.add(q),Gt=function(Zt,yt){if(!Zt)return yt;if(Zt instanceof HTMLElement||Array.isArray(Zt))return Zt;const $i=yt.querySelectorAll(Zt);if($i===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from($i.values())}(U,n),kt=function(Zt,yt){if(!Zt)return;if(Zt instanceof HTMLElement||Array.isArray(Zt))return Zt;const $i=yt.querySelectorAll(Zt);if($i===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from($i.values())}(z,n),Pe=/(both|x)/.test(l),be=/(both|y)/.test(l),o!==void 0&&(_t=function(Zt,yt){if(Zt instanceof HTMLElement)return Zt.getBoundingClientRect();if(typeof Zt=="object"){const{top:nr=0,left:di=0,right:Hi=0,bottom:Ki=0}=Zt;return{top:nr,right:window.innerWidth-Hi,bottom:window.innerHeight-Ki,left:di}}if(Zt==="parent")return yt.parentNode.getBoundingClientRect();const $i=document.querySelector(Zt);if($i===null)throw new Error("The selector provided for bound doesn't exists in the document.");return $i.getBoundingClientRect()}(o,n)),pt=n.getBoundingClientRect(),cy(U)&&cy(z)&&U===z)throw new Error("`handle` selector can't be same as `cancel` selector");if(py(kt,Gt))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");if((Gt instanceof HTMLElement?Gt.contains(ri.target):Gt.some(Zt=>Zt.contains(ri.target)))&&!py(kt,ri.target)&&(pe=!0),!pe)return;m&&(Xt=qt.userSelect,qt.userSelect="none"),it("neodrag:start",se);const{clientX:zi,clientY:Di}=ly(ri)?ri.touches[0]:ri,er=bt();Pe&&(tt=zi-Ge/er),be&&(nt=Di-Xe/er),_t&&(Se=zi-pt.left,Me=Di-pt.top)}function Ot(){pe&&(ve.remove(B),ve.add(K),m&&(qt.userSelect=Xt),it("neodrag:end",re),Pe&&(tt=ye),Pe&&(nt=me),pe=!1)}function Ht(ri){if(!pe)return;ve.add(B),ri.preventDefault(),pt=n.getBoundingClientRect();const{clientX:zi,clientY:Di}=ly(ri)?ri.touches[0]:ri;let er=zi,Zt=Di;const yt=bt();if(_t){const $i={left:_t.left+Se,top:_t.top+Me,right:_t.right+Se-pt.width,bottom:_t.bottom+Me-pt.height};er=uy(er,$i.left,$i.right),Zt=uy(Zt,$i.top,$i.bottom)}if(Array.isArray(E)){let[$i,nr]=E;if(isNaN(+$i)||$i<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+nr)||nr<0)throw new Error("2nd argument of `grid` must be a valid positive number");let di=er-tt,Hi=Zt-nt;[di,Hi]=Bw([$i/yt,nr/yt],di,Hi),er=tt+di,Zt=nt+Hi}Pe&&(ye=Math.round((er-tt)*yt)),be&&(me=Math.round((Zt-nt)*yt)),Ge=ye,Xe=me,it("neodrag",ne),ke.then(()=>_1(ye,me,n,p))}return{destroy:()=>{const ri=removeEventListener;ri("touchstart",Ct,!1),ri("touchend",Ot,!1),ri("touchmove",Ht,!1),ri("mousedown",Ct,!1),ri("mouseup",Ot,!1),ri("mousemove",Ht,!1)},update:ri=>{var Di,er,Zt,yt,$i,nr,di,Hi,Ki,Ui,Qt;l=ri.axis||"both",b=(Di=ri.disabled)!=null?Di:!1,h=(er=ri.ignoreMultitouch)!=null?er:!1,U=ri.handle,o=ri.bounds,z=ri.cancel,m=(Zt=ri.applyUserSelectHack)!=null?Zt:!0,E=ri.grid,p=(yt=ri.gpuAcceleration)!=null?yt:!0;const zi=ve.contains(K);ve.remove(q,K),q=($i=ri.defaultClass)!=null?$i:"neodrag",B=(nr=ri.defaultClassDragging)!=null?nr:"neodrag-dragging",K=(di=ri.defaultClassDragged)!=null?di:"neodrag-dragged",ve.add(q),zi&&ve.add(K),Mt&&(Ge=ye=(Ki=(Hi=ri.position)==null?void 0:Hi.x)!=null?Ki:ye,Xe=me=(Qt=(Ui=ri.position)==null?void 0:Ui.y)!=null?Qt:me,ke.then(()=>_1(ye,me,n,p)))}}},ly=n=>{var i;return!!((i=n.touches)!=null&&i.length)},uy=(n,i,o)=>Math.min(Math.max(n,i),o),cy=n=>typeof n=="string";var H_,W_,Z_;const Bw=(hy=([n,i],o,l)=>{const p=(m,b)=>Math.ceil(m/b)*b;return[p(o,n),p(l,i)]},fy=(H_=jc==null?void 0:jc.cache)!=null?H_:Nw,dy=(W_=jc==null?void 0:jc.serializer)!=null?W_:zw,((Z_=jc==null?void 0:jc.strategy)!=null?Z_:Dw)(hy,{cache:fy,serializer:dy}));var hy,jc,fy,dy;function py(n,i){const o=i instanceof HTMLElement?[i]:i;return n instanceof HTMLElement?o.some(l=>n.contains(l)):!!Array.isArray(n)&&n.some(l=>o.some(p=>l.contains(p)))}function _1(n,i,o,l){o.style.transform=l?`translate3d(${+n}px, ${+i}px, 0)`:`translate(${+n}px, ${+i}px)`}function my(n,i,o){const l=n.slice();return l[28]=i[o],l}function gy(n,i,o){const l=n.slice();return l[28]=i[o],l}function yy(n,i,o){const l=n.slice();return l[28]=i[o],l}function vy(n,i,o){const l=n.slice();return l[28]=i[o],l}function _y(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t,pt,Gt,kt,Xt,Mt,qt,ve,it,Re,bt,Ct,Ot,Ht,Wt,si,ri,zi,Di,er,Zt,yt,$i,nr,di,Hi,Ki,Ui=Object.keys(_0),Qt=[];for(let je=0;je<Ui.length;je+=1)Qt[je]=by(vy(n,Ui,je));let lr=Object.keys(bc),pi=[];for(let je=0;je<lr.length;je+=1)pi[je]=wy(yy(n,lr,je));let Dr=Object.keys(ju),ze=[];for(let je=0;je<Dr.length;je+=1)ze[je]=xy(gy(n,Dr,je));let Y=Object.keys(Jh),te=[];for(let je=0;je<Y.length;je+=1)te[je]=ky(my(n,Y,je));return{c(){i=st("nav"),o=st("div"),l=st("span"),p=st("i"),m=Nr(`
			Export tool
			
			`),b=st("span"),h=st("i"),E=Yi(),L=st("div"),z=st("label"),U=Nr("Paper Size"),q=Yi(),B=st("div"),K=st("div"),J=st("select");for(let je=0;je<Qt.length;je+=1)Qt[je].c();se=Yi(),ne=st("div"),re=st("i"),ke=Yi(),Pe=st("div"),be=st("label"),pe=Nr("Page Orientation"),ye=Yi(),me=st("div");for(let je=0;je<pi.length;je+=1)pi[je].c();tt=Yi(),nt=st("div"),Se=st("label"),Me=Nr("Format"),Ge=Yi(),Xe=st("div"),_t=st("div"),pt=st("select");for(let je=0;je<ze.length;je+=1)ze[je].c();Gt=Yi(),kt=st("div"),Xt=st("i"),Mt=Yi(),qt=st("div"),ve=st("label"),it=Nr("DPI"),Re=Yi(),bt=st("div"),Ct=st("div"),Ot=st("select");for(let je=0;je<te.length;je+=1)te[je].c();Ht=Yi(),Wt=st("div"),si=st("i"),ri=Yi(),zi=st("div"),Di=st("button"),er=st("span"),Zt=st("i"),yt=Yi(),$i=st("span"),nr=Nr("Export"),this.h()},l(je){i=at(je,"NAV",{class:!0});var ot=ft(i);o=at(ot,"DIV",{class:!0});var mt=ft(o);l=at(mt,"SPAN",{class:!0});var Jt=ft(l);p=at(Jt,"I",{class:!0}),ft(p).forEach(Ee),Jt.forEach(Ee),m=Fr(mt,`
			Export tool
			
			`),b=at(mt,"SPAN",{class:!0});var hr=ft(b);h=at(hr,"I",{class:!0}),ft(h).forEach(Ee),hr.forEach(Ee),mt.forEach(Ee),E=Ji(ot),L=at(ot,"DIV",{class:!0});var xr=ft(L);z=at(xr,"LABEL",{class:!0});var or=ft(z);U=Fr(or,"Paper Size"),or.forEach(Ee),q=Ji(xr),B=at(xr,"DIV",{class:!0});var Ei=ft(B);K=at(Ei,"DIV",{class:!0});var Wi=ft(K);J=at(Wi,"SELECT",{});var Br=ft(J);for(let wt=0;wt<Qt.length;wt+=1)Qt[wt].l(Br);Br.forEach(Ee),Wi.forEach(Ee),se=Ji(Ei),ne=at(Ei,"DIV",{class:!0});var Zr=ft(ne);re=at(Zr,"I",{class:!0}),ft(re).forEach(Ee),Zr.forEach(Ee),Ei.forEach(Ee),xr.forEach(Ee),ke=Ji(ot),Pe=at(ot,"DIV",{class:!0});var Pn=ft(Pe);be=at(Pn,"LABEL",{class:!0});var Vr=ft(be);pe=Fr(Vr,"Page Orientation"),Vr.forEach(Ee),ye=Ji(Pn),me=at(Pn,"DIV",{class:!0});var vn=ft(me);for(let wt=0;wt<pi.length;wt+=1)pi[wt].l(vn);vn.forEach(Ee),Pn.forEach(Ee),tt=Ji(ot),nt=at(ot,"DIV",{class:!0});var Pr=ft(nt);Se=at(Pr,"LABEL",{class:!0});var _n=ft(Se);Me=Fr(_n,"Format"),_n.forEach(Ee),Ge=Ji(Pr),Xe=at(Pr,"DIV",{class:!0});var Tn=ft(Xe);_t=at(Tn,"DIV",{class:!0});var Tr=ft(_t);pt=at(Tr,"SELECT",{});var Qr=ft(pt);for(let wt=0;wt<ze.length;wt+=1)ze[wt].l(Qr);Qr.forEach(Ee),Tr.forEach(Ee),Gt=Ji(Tn),kt=at(Tn,"DIV",{class:!0});var Un=ft(kt);Xt=at(Un,"I",{class:!0}),ft(Xt).forEach(Ee),Un.forEach(Ee),Tn.forEach(Ee),Pr.forEach(Ee),Mt=Ji(ot),qt=at(ot,"DIV",{class:!0});var Bi=ft(qt);ve=at(Bi,"LABEL",{class:!0});var Le=ft(ve);it=Fr(Le,"DPI"),Le.forEach(Ee),Re=Ji(Bi),bt=at(Bi,"DIV",{class:!0});var $n=ft(bt);Ct=at($n,"DIV",{class:!0});var eo=ft(Ct);Ot=at(eo,"SELECT",{});var Xn=ft(Ot);for(let wt=0;wt<te.length;wt+=1)te[wt].l(Xn);Xn.forEach(Ee),eo.forEach(Ee),Ht=Ji($n),Wt=at($n,"DIV",{class:!0});var de=ft(Wt);si=at(de,"I",{class:!0}),ft(si).forEach(Ee),de.forEach(Ee),$n.forEach(Ee),Bi.forEach(Ee),ri=Ji(ot),zi=at(ot,"DIV",{class:!0});var fe=ft(zi);Di=at(fe,"BUTTON",{class:!0});var Te=ft(Di);er=at(Te,"SPAN",{class:!0});var Ke=ft(er);Zt=at(Ke,"I",{class:!0}),ft(Zt).forEach(Ee),Ke.forEach(Ee),yt=Ji(Te),$i=at(Te,"SPAN",{});var et=ft($i);nr=Fr(et,"Export"),et.forEach(Ee),Te.forEach(Ee),fe.forEach(Ee),ot.forEach(Ee),this.h()},h(){rt(p,"class","fas fa-up-down-left-right"),rt(l,"class","icon drag-icon"),rt(h,"class","fas fa-xmark"),rt(b,"class","icon close-icon svelte-4msz3t"),rt(o,"class","panel-heading heading-control svelte-4msz3t"),rt(z,"class","label"),n[0]===void 0&&Aa(()=>n[15].call(J)),rt(K,"class","select is-fullwidth"),rt(re,"class","fas fa-file"),rt(ne,"class","icon is-small is-left"),rt(B,"class","control has-icons-left"),rt(L,"class","field"),rt(be,"class","label"),rt(me,"class","control"),rt(Pe,"class","field"),rt(Se,"class","label"),n[3]===void 0&&Aa(()=>n[17].call(pt)),rt(_t,"class","select is-fullwidth"),rt(Xt,"class","fas fa-file-pdf"),rt(kt,"class","icon is-small is-left"),rt(Xe,"class","control has-icons-left"),rt(nt,"class","field"),rt(ve,"class","label"),n[2]===void 0&&Aa(()=>n[18].call(Ot)),rt(Ct,"class","select is-fullwidth"),rt(si,"class","fas fa-braille"),rt(Wt,"class","icon is-small is-left"),rt(bt,"class","control has-icons-left"),rt(qt,"class","field"),rt(Zt,"class","fas fa-download"),rt(er,"class","icon"),rt(Di,"class","button is-fullwidth is-success svelte-4msz3t"),rt(zi,"class","field"),rt(i,"class","panel is-success export-container svelte-4msz3t")},m(je,ot){vi(je,i,ot),We(i,o),We(o,l),We(l,p),We(o,m),We(o,b),We(b,h),We(i,E),We(i,L),We(L,z),We(z,U),We(L,q),We(L,B),We(B,K),We(K,J);for(let mt=0;mt<Qt.length;mt+=1)Qt[mt].m(J,null);_s(J,n[0]),We(B,se),We(B,ne),We(ne,re),We(i,ke),We(i,Pe),We(Pe,be),We(be,pe),We(Pe,ye),We(Pe,me);for(let mt=0;mt<pi.length;mt+=1)pi[mt].m(me,null);We(i,tt),We(i,nt),We(nt,Se),We(Se,Me),We(nt,Ge),We(nt,Xe),We(Xe,_t),We(_t,pt);for(let mt=0;mt<ze.length;mt+=1)ze[mt].m(pt,null);_s(pt,n[3]),We(Xe,Gt),We(Xe,kt),We(kt,Xt),We(i,Mt),We(i,qt),We(qt,ve),We(ve,it),We(qt,Re),We(qt,bt),We(bt,Ct),We(Ct,Ot);for(let mt=0;mt<te.length;mt+=1)te[mt].m(Ot,null);_s(Ot,n[2]),We(bt,Ht),We(bt,Wt),We(Wt,si),We(i,ri),We(i,zi),We(zi,Di),We(Di,er),We(er,Zt),We(Di,yt),We(Di,$i),We($i,nr),Hi||(Ki=[rn(b,"click",n[14]),rn(J,"change",n[15]),rn(pt,"change",n[17]),rn(Ot,"change",n[18]),rn(Di,"click",n[7]),c2(di=Fw.call(null,i,n[6]))],Hi=!0)},p(je,ot){if(ot&0){Ui=Object.keys(_0);let mt;for(mt=0;mt<Ui.length;mt+=1){const Jt=vy(je,Ui,mt);Qt[mt]?Qt[mt].p(Jt,ot):(Qt[mt]=by(Jt),Qt[mt].c(),Qt[mt].m(J,null))}for(;mt<Qt.length;mt+=1)Qt[mt].d(1);Qt.length=Ui.length}if(ot[0]&1&&_s(J,je[0]),ot[0]&2){lr=Object.keys(bc);let mt;for(mt=0;mt<lr.length;mt+=1){const Jt=yy(je,lr,mt);pi[mt]?pi[mt].p(Jt,ot):(pi[mt]=wy(Jt),pi[mt].c(),pi[mt].m(me,null))}for(;mt<pi.length;mt+=1)pi[mt].d(1);pi.length=lr.length}if(ot&0){Dr=Object.keys(ju);let mt;for(mt=0;mt<Dr.length;mt+=1){const Jt=gy(je,Dr,mt);ze[mt]?ze[mt].p(Jt,ot):(ze[mt]=xy(Jt),ze[mt].c(),ze[mt].m(pt,null))}for(;mt<ze.length;mt+=1)ze[mt].d(1);ze.length=Dr.length}if(ot[0]&8&&_s(pt,je[3]),ot&0){Y=Object.keys(Jh);let mt;for(mt=0;mt<Y.length;mt+=1){const Jt=my(je,Y,mt);te[mt]?te[mt].p(Jt,ot):(te[mt]=ky(Jt),te[mt].c(),te[mt].m(Ot,null))}for(;mt<te.length;mt+=1)te[mt].d(1);te.length=Y.length}ot[0]&4&&_s(Ot,je[2]),di&&$d(di.update)&&ot[0]&64&&di.update.call(null,je[6])},d(je){je&&Ee(i),bs(Qt,je),bs(pi,je),bs(ze,je),bs(te,je),Hi=!1,th(Ki)}}}function by(n){let i,o=n[28]+"",l;return{c(){i=st("option"),l=Nr(o),this.h()},l(p){i=at(p,"OPTION",{});var m=ft(i);l=Fr(m,o),m.forEach(Ee),this.h()},h(){i.__value=_0[n[28]],i.value=i.__value},m(p,m){vi(p,i,m),We(i,l)},p:ao,d(p){p&&Ee(i)}}}function wy(n){let i,o,l,p,m,b,h,E=n[28]+"",L,z,U,q;function B(){return n[16](n[28])}return{c(){i=st("label"),o=st("input"),p=Yi(),m=st("div"),b=st("i"),h=Yi(),L=Nr(E),z=Yi(),this.h()},l(K){i=at(K,"LABEL",{class:!0,style:!0});var J=ft(i);o=at(J,"INPUT",{type:!0,name:!0}),p=Ji(J),m=at(J,"DIV",{class:!0});var se=ft(m);b=at(se,"I",{class:!0}),ft(b).forEach(Ee),se.forEach(Ee),h=Ji(J),L=Fr(J,E),z=Ji(J),J.forEach(Ee),this.h()},h(){rt(o,"type","radio"),rt(o,"name","orientation"),o.checked=l=n[1]===bc[n[28]],rt(b,"class",`fas ${bc[n[28]]===bc.Landscape?"fa-left-right":"fa-up-down"} svelte-4msz3t`),rt(m,"class","icon is-small is-left"),rt(i,"class","radio"),ih(i,"color","black")},m(K,J){vi(K,i,J),We(i,o),We(i,p),We(i,m),We(m,b),We(i,h),We(i,L),We(i,z),U||(q=rn(o,"click",B),U=!0)},p(K,J){n=K,J[0]&2&&l!==(l=n[1]===bc[n[28]])&&(o.checked=l)},d(K){K&&Ee(i),U=!1,q()}}}function xy(n){let i,o=n[28]+"",l;return{c(){i=st("option"),l=Nr(o),this.h()},l(p){i=at(p,"OPTION",{});var m=ft(i);l=Fr(m,o),m.forEach(Ee),this.h()},h(){i.__value=ju[n[28]],i.value=i.__value},m(p,m){vi(p,i,m),We(i,l)},p:ao,d(p){p&&Ee(i)}}}function ky(n){let i,o=n[28]+"",l;return{c(){i=st("option"),l=Nr(o),this.h()},l(p){i=at(p,"OPTION",{});var m=ft(i);l=Fr(m,o),m.forEach(Ee),this.h()},h(){i.__value=Jh[n[28]],i.value=i.__value},m(p,m){vi(p,i,m),We(i,l)},p:ao,d(p){p&&Ee(i)}}}function Rw(n){let i,o,l,p=n[4]&&_y(n);return{c(){i=st("button"),o=Yi(),p&&p.c(),l=ln(),this.h()},l(m){i=at(m,"BUTTON",{class:!0}),ft(i).forEach(Ee),o=Ji(m),p&&p.l(m),l=ln(),this.h()},h(){rt(i,"class","maplibre-ctrl-icon svelte-4msz3t")},m(m,b){vi(m,i,b),n[13](i),vi(m,o,b),p&&p.m(m,b),vi(m,l,b)},p(m,b){m[4]?p?p.p(m,b):(p=_y(m),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i:ao,o:ao,d(m){m&&Ee(i),n[13](null),m&&Ee(o),p&&p.d(m),m&&Ee(l)}}}function Ow(n,i,o){let{map:l}=i,p,m,b,h,{showPrintableArea:E=!0}=i,{showCrosshair:L=!0}=i,{position:z="top-right"}=i,{paperSize:U=_0.A4}=i,{dpi:q=Jh[96]}=i,{format:B=ju.PNG}=i,{orientation:K=bc.Landscape}=i,J=!1,se={};function ne(){}ne.prototype.onAdd=function(_t){return this.map=_t,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",h.addEventListener("click",()=>{o(4,J=!J)}),this.controlContainer.appendChild(h),this.controlContainer},ne.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let re=null;E0(async()=>{const{default:_t}=await tp(()=>Promise.resolve().then(()=>Cw),void 0,import.meta.url);b=new _t,o(12,re=new ne)});const ke=()=>{const _t=Pe();b.generate(l,_t,q,B,Y0.mm)},Pe=()=>{let _t=[U[0],U[1]];return K!==bc.Landscape&&(_t=_t.reverse()),_t},be=()=>{!h||(J?h.classList.add("maplibre-ctrl-icon-active"):h.classList.remove("maplibre-ctrl-icon-active"),pe(E?J:!1),me(L?J:!1))},pe=_t=>{_t===!1?p!==void 0&&(p.destroy(),p=void 0):(p=new Tw(l),ye())},ye=()=>{if(p===void 0)return;const _t=Pe();p.updateArea(_t[0],_t[1])},me=_t=>{!l||(_t===!1?m!==void 0&&(m.destroy(),m=void 0):(m=new Lw(l),m.create()))};function tt(_t){po[_t?"unshift":"push"](()=>{h=_t,o(5,h)})}const nt=()=>{o(4,J=!J)};function Se(){U=Uu(this),o(0,U)}const Me=_t=>{o(1,K=bc[_t])};function Ge(){B=Uu(this),o(3,B)}function Xe(){q=Uu(this),o(2,q)}return n.$$set=_t=>{"map"in _t&&o(8,l=_t.map),"showPrintableArea"in _t&&o(9,E=_t.showPrintableArea),"showCrosshair"in _t&&o(10,L=_t.showCrosshair),"position"in _t&&o(11,z=_t.position),"paperSize"in _t&&o(0,U=_t.paperSize),"dpi"in _t&&o(2,q=_t.dpi),"format"in _t&&o(3,B=_t.format),"orientation"in _t&&o(1,K=_t.orientation)},n.$$.update=()=>{n.$$.dirty[0]&1&&ye(),n.$$.dirty[0]&2&&ye(),n.$$.dirty[0]&6400&&l&&(re!==null&&l.hasControl(re)===!1&&l.addControl(re,z),o(6,se.bounds=l.getContainer(),se)),n.$$.dirty[0]&16&&be()},[U,K,q,B,J,h,se,ke,l,E,L,z,re,tt,nt,Se,Me,Ge,Xe]}class jw extends Xo{constructor(i){super(),Yo(this,i,Ow,Rw,qo,{map:8,showPrintableArea:9,showCrosshair:10,position:11,paperSize:0,dpi:2,format:3,orientation:1},null,[-1,-1])}}const Uw=async n=>{if("clipboard"in navigator)await navigator.clipboard.writeText(n);else{const i=document.createElement("input");i.type="text",i.disabled=!0,i.style.setProperty("position","fixed"),i.style.setProperty("z-index","-100"),i.style.setProperty("pointer-events","none"),i.style.setProperty("opacity","0"),i.value=n,document.body.appendChild(i),i.click(),i.select(),document.execCommand("copy"),document.body.removeChild(i)}},Ay=(n,i)=>{async function o(){if(p)try{await Uw(p),n.dispatchEvent(new CustomEvent("svelte-copy",{detail:p}))}catch(m){n.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:m}))}}let l=typeof i=="string"?["click"]:[i.events].flat(1),p=typeof i=="string"?i:i.text;return l.forEach(m=>{n.addEventListener(m,o,!0)}),{update:m=>{const b=typeof m=="string"?["click"]:[m.events].flat(1),h=typeof m=="string"?m:m.text,E=b.filter(z=>!l.includes(z)),L=l.filter(z=>!b.includes(z));E.forEach(z=>{n.addEventListener(z,o,!0)}),L.forEach(z=>{n.removeEventListener(z,o,!0)}),l=b,p=h},destroy:()=>{l.forEach(m=>{n.removeEventListener(m,o,!0)})}}};function qw(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t,pt,Gt;return{c(){i=st("div"),o=st("div"),l=Yi(),p=st("div"),m=st("header"),b=st("p"),h=Nr("URL to share"),E=Yi(),L=st("button"),z=Yi(),U=st("section"),q=st("div"),B=st("input"),J=Yi(),se=st("button"),ne=st("span"),re=st("i"),ke=Yi(),Pe=st("span"),be=Nr(n[2]),ye=Yi(),me=st("footer"),tt=st("button"),nt=st("span"),Se=st("i"),Me=Yi(),Ge=st("span"),Xe=Nr("Cancel"),this.h()},l(kt){i=at(kt,"DIV",{class:!0});var Xt=ft(i);o=at(Xt,"DIV",{class:!0}),ft(o).forEach(Ee),l=Ji(Xt),p=at(Xt,"DIV",{class:!0});var Mt=ft(p);m=at(Mt,"HEADER",{class:!0});var qt=ft(m);b=at(qt,"P",{class:!0});var ve=ft(b);h=Fr(ve,"URL to share"),ve.forEach(Ee),E=Ji(qt),L=at(qt,"BUTTON",{class:!0,"aria-label":!0}),ft(L).forEach(Ee),qt.forEach(Ee),z=Ji(Mt),U=at(Mt,"SECTION",{class:!0});var it=ft(U);q=at(it,"DIV",{class:!0});var Re=ft(q);B=at(Re,"INPUT",{class:!0,type:!0,placeholder:!0}),J=Ji(Re),se=at(Re,"BUTTON",{class:!0});var bt=ft(se);ne=at(bt,"SPAN",{class:!0});var Ct=ft(ne);re=at(Ct,"I",{class:!0}),ft(re).forEach(Ee),Ct.forEach(Ee),ke=Ji(bt),Pe=at(bt,"SPAN",{});var Ot=ft(Pe);be=Fr(Ot,n[2]),Ot.forEach(Ee),bt.forEach(Ee),Re.forEach(Ee),it.forEach(Ee),ye=Ji(Mt),me=at(Mt,"FOOTER",{class:!0});var Ht=ft(me);tt=at(Ht,"BUTTON",{class:!0});var Wt=ft(tt);nt=at(Wt,"SPAN",{class:!0});var si=ft(nt);Se=at(si,"I",{class:!0}),ft(Se).forEach(Ee),si.forEach(Ee),Me=Ji(Wt),Ge=at(Wt,"SPAN",{});var ri=ft(Ge);Xe=Fr(ri,"Cancel"),ri.forEach(Ee),Wt.forEach(Ee),Ht.forEach(Ee),Mt.forEach(Ee),Xt.forEach(Ee),this.h()},h(){rt(o,"class","modal-background"),rt(b,"class","modal-card-title"),rt(L,"class","delete"),rt(L,"aria-label","close"),rt(m,"class","modal-card-head"),rt(B,"class","input is-success"),rt(B,"type","text"),rt(B,"placeholder","URL to share"),B.readOnly=!0,rt(re,"class","fas fa-copy"),rt(ne,"class","icon"),rt(se,"class","button is-success ml-1"),rt(q,"class","copy-control svelte-667xy4"),rt(U,"class","modal-card-body"),rt(Se,"class","fas fa-xmark"),rt(nt,"class","icon"),rt(tt,"class","button"),rt(me,"class","modal-card-foot"),rt(p,"class","modal-card"),rt(i,"class",_t=`modal ${n[0]?"is-active":""} svelte-667xy4`)},m(kt,Xt){vi(kt,i,Xt),We(i,o),We(i,l),We(i,p),We(p,m),We(m,b),We(b,h),We(m,E),We(m,L),We(p,z),We(p,U),We(U,q),We(q,B),x0(B,n[1]),We(q,J),We(q,se),We(se,ne),We(ne,re),We(se,ke),We(se,Pe),We(Pe,be),We(p,ye),We(p,me),We(me,tt),We(tt,nt),We(nt,Se),We(tt,Me),We(tt,Ge),We(Ge,Xe),pt||(Gt=[rn(o,"click",n[4]),rn(L,"click",n[4]),rn(B,"input",n[7]),c2(K=Ay.call(null,B,n[1])),rn(B,"click",n[3]),c2(pe=Ay.call(null,se,n[1])),rn(se,"click",n[3]),rn(tt,"click",n[4])],pt=!0)},p(kt,[Xt]){Xt&2&&B.value!==kt[1]&&x0(B,kt[1]),K&&$d(K.update)&&Xt&2&&K.update.call(null,kt[1]),Xt&4&&os(be,kt[2]),pe&&$d(pe.update)&&Xt&2&&pe.update.call(null,kt[1]),Xt&1&&_t!==(_t=`modal ${kt[0]?"is-active":""} svelte-667xy4`)&&rt(i,"class",_t)},i:ao,o:ao,d(kt){kt&&Ee(i),pt=!1,th(Gt)}}}function Vw(n,i,o){let l;ul(n,W4,B=>o(8,l=B));let{map:p}=i,{isShareModalShown:m}=i,b="",h="Copy";const E=()=>{o(2,h="copied"),setTimeout(()=>{o(2,h="Copy")},2e3)};let{customiseUrl:L=B=>B}=i;const z=()=>{if(!p)return"";const B=`${l.url.protocol}//${l.url.host}`,K=`#${p.getZoom().toFixed(2)}`,J=`/${p.getCenter().lat.toFixed(6)}`,se=`/${p.getCenter().lng.toFixed(6)}`,ne=p.getBearing()!==0?`/${p.getBearing().toFixed(1)}`:"",re=p.getPitch()!==0?`/${p.getPitch().toFixed()}`:"";o(1,b=L(`${B}${K}${J}${se}${ne}${re}`))},U=()=>{o(0,m=!1)};function q(){b=this.value,o(1,b)}return n.$$set=B=>{"map"in B&&o(5,p=B.map),"isShareModalShown"in B&&o(0,m=B.isShareModalShown),"customiseUrl"in B&&o(6,L=B.customiseUrl)},n.$$.update=()=>{n.$$.dirty&1&&m===!0&&z()},[m,b,h,E,U,p,L,q]}class Gw extends Xo{constructor(i){super(),Yo(this,i,Vw,qw,qo,{map:5,isShareModalShown:0,customiseUrl:6})}}function Hw(n){let i,o,l,p,m,b,h,E;function L(B){n[7](B)}function z(B){n[8](B)}function U(B){n[9](B)}let q={};return n[0]!==void 0&&(q.map=n[0]),n[3]!==void 0&&(q.isShareModalShown=n[3]),n[1]!==void 0&&(q.customiseUrl=n[1]),p=new Gw({props:q}),po.push(()=>Ts(p,"map",L)),po.push(()=>Ts(p,"isShareModalShown",z)),po.push(()=>Ts(p,"customiseUrl",U)),{c(){i=st("button"),o=st("i"),l=Yi(),ko(p.$$.fragment),this.h()},l(B){i=at(B,"BUTTON",{});var K=ft(i);o=at(K,"I",{class:!0}),ft(o).forEach(Ee),K.forEach(Ee),l=Ji(B),Ao(p.$$.fragment,B),this.h()},h(){rt(o,"class","fas fa-share-nodes")},m(B,K){vi(B,i,K),We(i,o),n[6](i),vi(B,l,K),Eo(p,B,K),E=!0},p(B,[K]){const J={};!m&&K&1&&(m=!0,J.map=B[0],Ls(()=>m=!1)),!b&&K&8&&(b=!0,J.isShareModalShown=B[3],Ls(()=>b=!1)),!h&&K&2&&(h=!0,J.customiseUrl=B[1],Ls(()=>h=!1)),p.$set(J)},i(B){E||(rr(p.$$.fragment,B),E=!0)},o(B){Cr(p.$$.fragment,B),E=!1},d(B){B&&Ee(i),n[6](null),B&&Ee(l),So(p,B)}}}function Ww(n,i,o){let{map:l}=i,p,m=!1,{position:b="top-right"}=i,{customiseUrl:h=K=>K}=i;function E(){}E.prototype.onAdd=function(K){return this.map=K,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",p.addEventListener("click",()=>{o(3,m=!m)}),this.controlContainer.appendChild(p),this.controlContainer},E.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let L=null;E0(async()=>{o(5,L=new E)});function z(K){po[K?"unshift":"push"](()=>{p=K,o(2,p)})}function U(K){l=K,o(0,l)}function q(K){m=K,o(3,m)}function B(K){h=K,o(1,h)}return n.$$set=K=>{"map"in K&&o(0,l=K.map),"position"in K&&o(4,b=K.position),"customiseUrl"in K&&o(1,h=K.customiseUrl)},n.$$.update=()=>{n.$$.dirty&49&&l&&L!==null&&l.hasControl(L)===!1&&l.addControl(L,b)},[l,h,p,m,b,L,z,U,q,B]}class Zw extends Xo{constructor(i){super(),Yo(this,i,Ww,Hw,qo,{map:0,position:4,customiseUrl:1})}}const v5={name:"SplitterContext"};function Xw(n){let i,o,l,p;return{c(){i=st("div"),o=st("div"),this.h()},l(m){i=at(m,"DIV",{class:!0,tabindex:!0});var b=ft(i);o=at(b,"DIV",{class:!0,style:!0}),ft(o).forEach(Ee),b.forEach(Ee),this.h()},h(){rt(o,"class","line svelte-16wga0t"),rt(o,"style",n[3]),rt(i,"class",l=Bf(n[2])+" svelte-16wga0t"),rt(i,"tabindex","0"),Aa(()=>n[13].call(i))},m(m,b){vi(m,i,b),We(i,o),p=Af(i,n[13].bind(i))},p(m,[b]){b&8&&rt(o,"style",m[3]),b&4&&l!==(l=Bf(m[2])+" svelte-16wga0t")&&rt(i,"class",l)},i:ao,o:ao,d(m){m&&Ee(i),p()}}}function Yw(n,i,o){let l,p,m,b,h,E,L,{color:z="silver"}=i,{hoverColor:U="gray"}=i,{dragColor:q="black"}=i,B=V4(v5);ul(n,B,ne=>o(12,L=ne));let K,J;function se(){K=this.clientWidth,J=this.clientHeight,o(0,K),o(1,J)}return n.$$set=ne=>{"color"in ne&&o(5,z=ne.color),"hoverColor"in ne&&o(6,U=ne.hoverColor),"dragColor"in ne&&o(7,q=ne.dragColor)},n.$$.update=()=>{n.$$.dirty&4096&&o(10,l=L.dragging),n.$$.dirty&4096&&o(8,p=L.horizontal),n.$$.dirty&259&&o(11,m=p?J:K),n.$$.dirty&3296&&o(9,b={"--splitter-line-margin":`${Math.max(0,Math.floor(m/2)-1)}px`,"--splitter-line-size":`${m%2===0?2:3}px`,"--splitter-line-color":l?q:z,"--splitter-line-hover-color":l?q:U}),n.$$.dirty&512&&o(3,h=Object.entries(b).map(([ne,re])=>`${ne}:${re}`).join(";")),n.$$.dirty&256&&o(2,E=p?"splitter horizontal":"splitter vertical")},[K,J,E,h,B,z,U,q,p,b,l,m,L,se]}class Jw extends Xo{constructor(i){super(),Yo(this,i,Yw,Xw,qo,{color:5,hoverColor:6,dragColor:7})}}const Kw=n=>({}),Ey=n=>({}),Qw=n=>({}),Sy=n=>({}),$w=n=>({}),Iy=n=>({});function ex(n){let i,o;return i=new Jw({}),{c(){ko(i.$$.fragment)},l(l){Ao(i.$$.fragment,l)},m(l,p){Eo(i,l,p),o=!0},i(l){o||(rr(i.$$.fragment,l),o=!0)},o(l){Cr(i.$$.fragment,l),o=!1},d(l){So(i,l)}}}function tx(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K;const J=n[33].primary,se=qu(J,n,n[32],Iy),ne=n[33].splitter,re=qu(ne,n,n[32],Sy),ke=re||ex(),Pe=n[33].secondary,be=qu(Pe,n,n[32],Ey);return{c(){i=st("div"),o=st("div"),se&&se.c(),p=Yi(),m=st("div"),ke&&ke.c(),h=Yi(),E=st("div"),be&&be.c(),this.h()},l(pe){i=at(pe,"DIV",{class:!0,style:!0});var ye=ft(i);o=at(ye,"DIV",{class:!0});var me=ft(o);se&&se.l(me),me.forEach(Ee),p=Ji(ye),m=at(ye,"DIV",{class:!0});var tt=ft(m);ke&&ke.l(tt),tt.forEach(Ee),h=Ji(ye),E=at(ye,"DIV",{class:!0});var nt=ft(E);be&&be.l(nt),nt.forEach(Ee),ye.forEach(Ee),this.h()},h(){rt(o,"class","primary svelte-603y9m"),Aa(()=>n[34].call(o)),rt(m,"class","splitter svelte-603y9m"),Aa(()=>n[35].call(m)),rt(E,"class","secondary svelte-603y9m"),Aa(()=>n[36].call(E)),rt(i,"class",z=Bf(n[8])+" svelte-603y9m"),rt(i,"style",n[9]),Aa(()=>n[37].call(i))},m(pe,ye){vi(pe,i,ye),We(i,o),se&&se.m(o,null),l=Af(o,n[34].bind(o)),We(i,p),We(i,m),ke&&ke.m(m,null),b=Af(m,n[35].bind(m)),We(i,h),We(i,E),be&&be.m(E,null),L=Af(E,n[36].bind(E)),U=Af(i,n[37].bind(i)),q=!0,B||(K=[rn(m,"pointerdown",n[10]),rn(m,"pointermove",n[11]),rn(m,"pointerup",n[12]),rn(m,"dblclick",n[13]),rn(m,"keydown",n[14])],B=!0)},p(pe,ye){se&&se.p&&(!q||ye[1]&2)&&Vu(se,J,pe,pe[32],q?Hu(J,pe[32],ye,$w):Gu(pe[32]),Iy),re&&re.p&&(!q||ye[1]&2)&&Vu(re,ne,pe,pe[32],q?Hu(ne,pe[32],ye,Qw):Gu(pe[32]),Sy),be&&be.p&&(!q||ye[1]&2)&&Vu(be,Pe,pe,pe[32],q?Hu(Pe,pe[32],ye,Kw):Gu(pe[32]),Ey),(!q||ye[0]&256&&z!==(z=Bf(pe[8])+" svelte-603y9m"))&&rt(i,"class",z),(!q||ye[0]&512)&&rt(i,"style",pe[9])},i(pe){q||(rr(se,pe),rr(ke,pe),rr(be,pe),q=!0)},o(pe){Cr(se,pe),Cr(ke,pe),Cr(be,pe),q=!1},d(pe){pe&&Ee(i),se&&se.d(pe),l(),ke&&ke.d(pe),b(),be&&be.d(pe),L(),U(),B=!1,th(K)}}}function ix(n,i,o){let l,p,m,b,h,E,L,z,U,{$$slots:q={},$$scope:B}=i,{horizontal:K=!1}=i,{initialPrimarySize:J="50%"}=i,{minPrimarySize:se="0"}=i,{minSecondarySize:ne="0"}=i,{splitterSize:re="7px"}=i,{resetOnDoubleClick:ke=!0}=i,Pe,be,pe,ye,me,tt,nt,Se;const Me=si=>Math.max(0,Math.min(si,100));let Ge,Xe,_t,pt=!1;const Gt=()=>h,kt=si=>{o(23,Ge=Me(si))},Xt=rh({horizontal:K,dragging:pt});G4(v5,Xt);const Mt=dp(),qt=si=>{si.currentTarget.setPointerCapture(si.pointerId),Xe=K?si.clientY:si.clientX,_t=p,o(24,pt=!0)},ve=si=>{if(si.currentTarget.hasPointerCapture(si.pointerId)){const ri=K?si.clientY:si.clientX;let zi=_t+(ri-Xe);zi=Math.max(0,Math.min(zi,l));const Di=zi/l*100;o(23,Ge=Di)}},it=si=>{si.currentTarget.releasePointerCapture(si.pointerId),o(24,pt=!1)},Re=()=>{ke&&o(23,Ge=void 0)},bt=si=>{const ri=Ge||h;if(!si.ctrlKey&&!si.shiftKey&&!si.altKey){switch(si.code){case"Space":o(23,Ge=void 0);return}if(K)switch(si.code){case"ArrowUp":o(23,Ge=Me(ri-1));return;case"ArrowDown":o(23,Ge=Me(ri+1));return}else switch(si.code){case"ArrowLeft":o(23,Ge=Me(ri-1));return;case"ArrowRight":o(23,Ge=Me(ri+1));return}}};function Ct(){pe=this.clientWidth,ye=this.clientHeight,o(2,pe),o(3,ye)}function Ot(){me=this.clientWidth,tt=this.clientHeight,o(4,me),o(5,tt)}function Ht(){nt=this.clientWidth,Se=this.clientHeight,o(6,nt),o(7,Se)}function Wt(){Pe=this.clientWidth,be=this.clientHeight,o(0,Pe),o(1,be)}return n.$$set=si=>{"horizontal"in si&&o(15,K=si.horizontal),"initialPrimarySize"in si&&o(16,J=si.initialPrimarySize),"minPrimarySize"in si&&o(17,se=si.minPrimarySize),"minSecondarySize"in si&&o(18,ne=si.minSecondarySize),"splitterSize"in si&&o(19,re=si.splitterSize),"resetOnDoubleClick"in si&&o(20,ke=si.resetOnDoubleClick),"$$scope"in si&&o(32,B=si.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&32771&&o(26,l=K?be:Pe),n.$$.dirty[0]&32780&&o(27,p=K?ye:pe),n.$$.dirty[0]&32816&&o(31,m=K?tt:me),n.$$.dirty[0]&32960&&o(30,b=K?Se:nt),n.$$.dirty[0]&201326592|n.$$.dirty[1]&1&&o(25,h=Me(Math.ceil((p-m)/(l-m)*100))),n.$$.dirty[0]&16809984&&Xt.set({horizontal:K,dragging:pt}),n.$$.dirty[0]&1258291200|n.$$.dirty[1]&1&&Mt("changed",{percent:h,primarySize:p,splitterSize:m,secondarySize:b,dragging:pt}),n.$$.dirty[0]&8454144&&o(29,E=Ge!==void 0?`${Ge}%`:J),n.$$.dirty[0]&537788416&&o(28,L={"--primary-size":`${E}`,"--min-primary-size":`${se}`,"--min-secondary-size":`${ne}`,"--splitter-size":`${re}`}),n.$$.dirty[0]&268435456&&o(9,z=Object.entries(L).map(([si,ri])=>`${si}:${ri}`).join(";")),n.$$.dirty[0]&32768&&o(8,U=K?"split horizontal":"split vertical")},[Pe,be,pe,ye,me,tt,nt,Se,U,z,qt,ve,it,Re,bt,K,J,se,ne,re,ke,Gt,kt,Ge,pt,h,l,p,L,E,b,m,B,q,Ct,Ot,Ht,Wt]}class rx extends Xo{constructor(i){super(),Yo(this,i,ix,tx,qo,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}const{window:k2}=H4,nx=n=>({}),Cy=n=>({}),ox=n=>({}),Ty=n=>({});function sx(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-bars")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function ax(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-xmark")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function Ly(n){let i,o,l,p;return{c(){i=st("span"),o=st("i"),this.h()},l(m){i=at(m,"SPAN",{class:!0});var b=ft(i);o=at(b,"I",{class:!0}),ft(o).forEach(Ee),b.forEach(Ee),this.h()},h(){rt(o,"class","fas fa-xmark fa-lg"),rt(i,"class","span close-icon svelte-u1yljz")},m(m,b){vi(m,i,b),We(i,o),l||(p=rn(i,"click",n[10]),l=!0)},p:ao,d(m){m&&Ee(i),l=!1,p()}}}function lx(n){let i,o,l,p=n[6]&&Ly(n);const m=n[15].primary,b=qu(m,n,n[19],Cy);return{c(){i=st("div"),p&&p.c(),o=Yi(),b&&b.c(),this.h()},l(h){i=at(h,"DIV",{slot:!0,class:!0});var E=ft(i);p&&p.l(E),o=Ji(E),b&&b.l(E),E.forEach(Ee),this.h()},h(){rt(i,"slot","primary"),rt(i,"class","primary-content svelte-u1yljz")},m(h,E){vi(h,i,E),p&&p.m(i,null),We(i,o),b&&b.m(i,null),l=!0},p(h,E){h[6]?p?p.p(h,E):(p=Ly(h),p.c(),p.m(i,o)):p&&(p.d(1),p=null),b&&b.p&&(!l||E&524288)&&Vu(b,m,h,h[19],l?Hu(m,h[19],E,nx):Gu(h[19]),Cy)},i(h){l||(rr(b,h),l=!0)},o(h){Cr(b,h),l=!1},d(h){h&&Ee(i),p&&p.d(),b&&b.d(h)}}}function ux(n){let i,o;const l=n[15].secondary,p=qu(l,n,n[19],Ty);return{c(){i=st("div"),p&&p.c(),this.h()},l(m){i=at(m,"DIV",{slot:!0,class:!0});var b=ft(i);p&&p.l(b),b.forEach(Ee),this.h()},h(){rt(i,"slot","secondary"),rt(i,"class","secondary-content svelte-u1yljz")},m(m,b){vi(m,i,b),p&&p.m(i,null),o=!0},p(m,b){p&&p.p&&(!o||b&524288)&&Vu(p,l,m,m[19],o?Hu(l,m[19],b,ox):Gu(m[19]),Ty)},i(m){o||(rr(p,m),o=!0)},o(m){Cr(p,m),o=!1},d(m){m&&Ee(i),p&&p.d(m)}}}function cx(n){let i,o,l,p,m,b,h;Aa(n[16]);function E(q,B){return q[0]?ax:sx}let L=E(n),z=L(n),U={initialPrimarySize:"0%",minPrimarySize:n[0]?`${n[1]}`:"0px",minSecondarySize:n[6]?"0px":n[2],splitterSize:n[8],$$slots:{secondary:[ux],primary:[lx]},$$scope:{ctx:n}};return p=new rx({props:U}),n[18](p),p.$on("changed",n[9]),{c(){i=st("button"),z.c(),o=Yi(),l=st("div"),ko(p.$$.fragment),this.h()},l(q){i=at(q,"BUTTON",{});var B=ft(i);z.l(B),B.forEach(Ee),o=Ji(q),l=at(q,"DIV",{class:!0});var K=ft(l);Ao(p.$$.fragment,K),K.forEach(Ee),this.h()},h(){rt(l,"class","split-container svelte-u1yljz")},m(q,B){vi(q,i,B),z.m(i,null),n[17](i),vi(q,o,B),vi(q,l,B),Eo(p,l,null),m=!0,b||(h=rn(k2,"resize",n[16]),b=!0)},p(q,[B]){L!==(L=E(q))&&(z.d(1),z=L(q),z&&(z.c(),z.m(i,null)));const K={};B&3&&(K.minPrimarySize=q[0]?`${q[1]}`:"0px"),B&68&&(K.minSecondarySize=q[6]?"0px":q[2]),B&256&&(K.splitterSize=q[8]),B&524352&&(K.$$scope={dirty:B,ctx:q}),p.$set(K)},i(q){m||(rr(p.$$.fragment,q),m=!0)},o(q){Cr(p.$$.fragment,q),m=!1},d(q){q&&Ee(i),z.d(),n[17](null),q&&Ee(o),q&&Ee(l),n[18](null),So(p),b=!1,h()}}}function hx(n,i,o){let{$$slots:l={},$$scope:p}=i,{map:m}=i,{isMenuShown:b=!1}=i,{initialPrimaryWidth:h=380}=i,{minPrimaryWidth:E="300px"}=i,{minSecondaryWidth:L="50%"}=i,z,U=0,q=0,B=U<768,K,J="0px";const se=()=>{o(6,B=U<768)};let{position:ne="top-left"}=i;function re(){}re.prototype.onAdd=function(Me){return this.map=Me,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",z.addEventListener("click",()=>{o(0,b=!b)}),this.controlContainer.appendChild(z),this.controlContainer},re.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let ke=null;E0(async()=>{o(6,B=window.matchMedia("only screen and (max-width: 768px)").matches),o(14,ke=new re)});const Pe=()=>{!m||(m.triggerRepaint(),m.resize())},be=()=>{if(!!K){if(b===!0)if(B)K.setPercent(100),o(8,J="0px");else{const Me=h/U*100;K.setPercent(Me),o(8,J="10px")}else K.setPercent(0),o(8,J="0px");Pe()}},pe=()=>{be()},ye=()=>{Pe(),K.getPercent()===0?o(0,b=!1):o(0,b=!0)},me=()=>{o(0,b=!1)};function tt(){o(3,U=k2.innerWidth),o(4,q=k2.innerHeight)}function nt(Me){po[Me?"unshift":"push"](()=>{z=Me,o(5,z)})}function Se(Me){po[Me?"unshift":"push"](()=>{K=Me,o(7,K)})}return n.$$set=Me=>{"map"in Me&&o(11,m=Me.map),"isMenuShown"in Me&&o(0,b=Me.isMenuShown),"initialPrimaryWidth"in Me&&o(12,h=Me.initialPrimaryWidth),"minPrimaryWidth"in Me&&o(1,E=Me.minPrimaryWidth),"minSecondaryWidth"in Me&&o(2,L=Me.minSecondaryWidth),"position"in Me&&o(13,ne=Me.position),"$$scope"in Me&&o(19,p=Me.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&se(),n.$$.dirty&16&&se(),n.$$.dirty&26624&&m&&ke!==null&&m.hasControl(ke)===!1&&m.addControl(ke,ne),n.$$.dirty&1&&pe()},[b,E,L,U,q,z,B,K,J,ye,me,m,h,ne,ke,l,tt,nt,Se,p]}class fx extends Xo{constructor(i){super(),Yo(this,i,hx,cx,qo,{map:11,isMenuShown:0,initialPrimaryWidth:12,minPrimaryWidth:1,minSecondaryWidth:2,position:13})}}function Py(n,i,o){const l=n.slice();return l[7]=i[o],l}function My(n){let i,o=n[7].title+"",l;return{c(){i=st("option"),l=Nr(o),this.h()},l(p){i=at(p,"OPTION",{});var m=ft(i);l=Fr(m,o),m.forEach(Ee),this.h()},h(){i.__value=n[7].uri,i.value=i.__value},m(p,m){vi(p,i,m),We(i,l)},p:ao,d(p){p&&Ee(i)}}}function dx(n){let i,o,l,p,m=sn.styles,b=[];for(let h=0;h<m.length;h+=1)b[h]=My(Py(n,m,h));return{c(){i=st("div"),o=st("select");for(let h=0;h<b.length;h+=1)b[h].c();this.h()},l(h){i=at(h,"DIV",{class:!0});var E=ft(i);o=at(E,"SELECT",{});var L=ft(o);for(let z=0;z<b.length;z+=1)b[z].l(L);L.forEach(Ee),E.forEach(Ee),this.h()},h(){n[0]===void 0&&Aa(()=>n[2].call(o)),rt(i,"class","select is-link is-fullwidth mt-1")},m(h,E){vi(h,i,E),We(i,o);for(let L=0;L<b.length;L+=1)b[L].m(o,null);_s(o,n[0]),l||(p=rn(o,"change",n[2]),l=!0)},p(h,[E]){if(E&0){m=sn.styles;let L;for(L=0;L<m.length;L+=1){const z=Py(h,m,L);b[L]?b[L].p(z,E):(b[L]=My(z),b[L].c(),b[L].m(o,null))}for(;L<b.length;L+=1)b[L].d(1);b.length=m.length}E&1&&_s(o,h[0])},i:ao,o:ao,d(h){h&&Ee(i),bs(b,h),l=!1,p()}}}function px(n,i,o){let l,p;ul(n,Rf,z=>o(1,l=z)),ul(n,El,z=>o(3,p=z));const m=dp();let b=l.uri;const h=()=>{!p||b!==l.uri&&(p.setStyle(b),p.on("styledata",()=>{const z=new $_,U=z.getMatchedStyleByUrl(sn.styles,b);U?(z.set(U.title),Rf.update(()=>U)):z.delete(),m("change")}))},E=()=>{b!==l.uri&&o(0,b=l.uri)};function L(){b=Uu(this),o(0,b)}return n.$$.update=()=>{n.$$.dirty&1&&h(),n.$$.dirty&2&&E()},[b,l,L]}class mx extends Xo{constructor(i){super(),Yo(this,i,px,dx,qo,{})}}var gx=8,yx={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},vx={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},_x=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],bx={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},wx={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},xx={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},kx={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Ax={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Ex={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Sx={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Ix=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],Cx={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},Tx={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},Lx={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},Px={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},Mx={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},Dx={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},zx={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},Nx={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},Fx={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},Bx={type:"array",value:"*",doc:"A filter selects specific features from a layer."},Rx={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},Ox={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},jx={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Ux={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},qx={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Vx={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},Gx={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},Hx={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Wx={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Zx={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},Xx={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},Yx={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},Jx={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},Kx={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},Qx=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],$x={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},e6={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},t6={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},i6={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},r6={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},n6={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},o6={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},s6={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},a6={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},l6={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},u6={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},c6={$version:gx,$root:yx,sources:vx,source:_x,source_vector:bx,source_raster:wx,source_raster_dem:xx,source_geojson:kx,source_video:Ax,source_image:Ex,layer:Sx,layout:Ix,layout_background:Cx,layout_sky:Tx,layout_fill:Lx,layout_circle:Px,layout_heatmap:Mx,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0"}},"property-type":"constant"}},layout_line:Dx,layout_symbol:zx,layout_raster:Nx,layout_hillshade:Fx,filter:Bx,filter_symbol:Rx,filter_fill:Ox,filter_line:jx,filter_circle:Ux,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:qx,filter_operator:Vx,geometry_type:Gx,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:Hx,expression:Wx,expression_name:Zx,fog:Xx,light:Yx,projection:Jx,terrain:Kx,paint:Qx,paint_fill:$x,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of ambient occlusion (AO) shading. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The radius of ambient occlusion (AO) shading, in meters. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to hight of one floor and brings the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:e6,paint_circle:t6,paint_heatmap:i6,paint_symbol:r6,paint_raster:n6,paint_hillshade:o6,paint_background:s6,paint_sky:a6,transition:l6,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:u6},b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yp(n){var i={exports:{}};return n(i,i.exports),i.exports}function h6(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */yp(function(n,i){(function(o){var l=i&&!i.nodeType&&i,p=n&&!n.nodeType&&n,m=typeof b1=="object"&&b1;(m.global===m||m.window===m||m.self===m)&&(o=m);var b,h=2147483647,E=36,L=1,z=26,U=38,q=700,B=72,K=128,J="-",se=/^xn--/,ne=/[^\x20-\x7E]/,re=/[\x2E\u3002\uFF0E\uFF61]/g,ke={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Pe=E-L,be=Math.floor,pe=String.fromCharCode,ye;function me(Mt){throw RangeError(ke[Mt])}function tt(Mt,qt){for(var ve=Mt.length,it=[];ve--;)it[ve]=qt(Mt[ve]);return it}function nt(Mt,qt){var ve=Mt.split("@"),it="";ve.length>1&&(it=ve[0]+"@",Mt=ve[1]),Mt=Mt.replace(re,".");var Re=Mt.split("."),bt=tt(Re,qt).join(".");return it+bt}function Se(Mt){for(var qt=[],ve=0,it=Mt.length,Re,bt;ve<it;)Re=Mt.charCodeAt(ve++),Re>=55296&&Re<=56319&&ve<it?(bt=Mt.charCodeAt(ve++),(bt&64512)==56320?qt.push(((Re&1023)<<10)+(bt&1023)+65536):(qt.push(Re),ve--)):qt.push(Re);return qt}function Me(Mt){return tt(Mt,function(qt){var ve="";return qt>65535&&(qt-=65536,ve+=pe(qt>>>10&1023|55296),qt=56320|qt&1023),ve+=pe(qt),ve}).join("")}function Ge(Mt){return Mt-48<10?Mt-22:Mt-65<26?Mt-65:Mt-97<26?Mt-97:E}function Xe(Mt,qt){return Mt+22+75*(Mt<26)-((qt!=0)<<5)}function _t(Mt,qt,ve){var it=0;for(Mt=ve?be(Mt/q):Mt>>1,Mt+=be(Mt/qt);Mt>Pe*z>>1;it+=E)Mt=be(Mt/Pe);return be(it+(Pe+1)*Mt/(Mt+U))}function pt(Mt){var qt=[],ve=Mt.length,it,Re=0,bt=K,Ct=B,Ot,Ht,Wt,si,ri,zi,Di,er,Zt;for(Ot=Mt.lastIndexOf(J),Ot<0&&(Ot=0),Ht=0;Ht<Ot;++Ht)Mt.charCodeAt(Ht)>=128&&me("not-basic"),qt.push(Mt.charCodeAt(Ht));for(Wt=Ot>0?Ot+1:0;Wt<ve;){for(si=Re,ri=1,zi=E;Wt>=ve&&me("invalid-input"),Di=Ge(Mt.charCodeAt(Wt++)),(Di>=E||Di>be((h-Re)/ri))&&me("overflow"),Re+=Di*ri,er=zi<=Ct?L:zi>=Ct+z?z:zi-Ct,!(Di<er);zi+=E)Zt=E-er,ri>be(h/Zt)&&me("overflow"),ri*=Zt;it=qt.length+1,Ct=_t(Re-si,it,si==0),be(Re/it)>h-bt&&me("overflow"),bt+=be(Re/it),Re%=it,qt.splice(Re++,0,bt)}return Me(qt)}function Gt(Mt){var qt,ve,it,Re,bt,Ct,Ot,Ht,Wt,si,ri,zi=[],Di,er,Zt,yt;for(Mt=Se(Mt),Di=Mt.length,qt=K,ve=0,bt=B,Ct=0;Ct<Di;++Ct)ri=Mt[Ct],ri<128&&zi.push(pe(ri));for(it=Re=zi.length,Re&&zi.push(J);it<Di;){for(Ot=h,Ct=0;Ct<Di;++Ct)ri=Mt[Ct],ri>=qt&&ri<Ot&&(Ot=ri);for(er=it+1,Ot-qt>be((h-ve)/er)&&me("overflow"),ve+=(Ot-qt)*er,qt=Ot,Ct=0;Ct<Di;++Ct)if(ri=Mt[Ct],ri<qt&&++ve>h&&me("overflow"),ri==qt){for(Ht=ve,Wt=E;si=Wt<=bt?L:Wt>=bt+z?z:Wt-bt,!(Ht<si);Wt+=E)yt=Ht-si,Zt=E-si,zi.push(pe(Xe(si+yt%Zt,0))),Ht=be(yt/Zt);zi.push(pe(Xe(Ht,0))),bt=_t(ve,er,it==Re),ve=0,++it}++ve,++qt}return zi.join("")}function kt(Mt){return nt(Mt,function(qt){return se.test(qt)?pt(qt.slice(4).toLowerCase()):qt})}function Xt(Mt){return nt(Mt,function(qt){return ne.test(qt)?"xn--"+Gt(qt):qt})}if(b={version:"1.3.2",ucs2:{decode:Se,encode:Me},decode:pt,encode:Gt,toASCII:Xt,toUnicode:kt},l&&p)if(n.exports==l)p.exports=b;else for(ye in b)b.hasOwnProperty(ye)&&(l[ye]=b[ye]);else o.punycode=b})(b1)});function f6(n,i){return Object.prototype.hasOwnProperty.call(n,i)}var d6=function(n,i,o,l){i=i||"&",o=o||"=";var p={};if(typeof n!="string"||n.length===0)return p;var m=/\+/g;n=n.split(i);var b=1e3;l&&typeof l.maxKeys=="number"&&(b=l.maxKeys);var h=n.length;b>0&&h>b&&(h=b);for(var E=0;E<h;++E){var L=n[E].replace(m,"%20"),z=L.indexOf(o),U,q,B,K;z>=0?(U=L.substr(0,z),q=L.substr(z+1)):(U=L,q=""),B=decodeURIComponent(U),K=decodeURIComponent(q),f6(p,B)?Array.isArray(p[B])?p[B].push(K):p[B]=[p[B],K]:p[B]=K}return p},wf=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},p6=function(n,i,o,l){return i=i||"&",o=o||"=",n===null&&(n=void 0),typeof n=="object"?Object.keys(n).map(function(p){var m=encodeURIComponent(wf(p))+o;return Array.isArray(n[p])?n[p].map(function(b){return m+encodeURIComponent(wf(b))}).join(i):m+encodeURIComponent(wf(n[p]))}).join(i):l?encodeURIComponent(wf(l))+o+encodeURIComponent(wf(n)):""};yp(function(n,i){i.decode=i.parse=d6,i.encode=i.stringify=p6});function _5(n,...i){for(const o of i)for(const l in o)n[l]=o[l];return n}class m6 extends Error{constructor(i,o){super(o),this.message=o,this.key=i}}var mc=m6;class G2{constructor(i,o=[]){this.parent=i,this.bindings={};for(const[l,p]of o)this.bindings[l]=p}concat(i){return new G2(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return this.bindings[i]?!0:this.parent?this.parent.has(i):!1}}var g6=G2;const vp={kind:"null"},wr={kind:"number"},Rn={kind:"string"},Nn={kind:"boolean"},Gc={kind:"color"},Gh={kind:"object"},Fn={kind:"value"},y6={kind:"error"},_p={kind:"collator"},bp={kind:"formatted"},Yf={kind:"resolvedImage"};function gu(n,i){return{kind:"array",itemType:n,N:i}}function ns(n){if(n.kind==="array"){const i=ns(n.itemType);return typeof n.N=="number"?`array<${i}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${i}>`}else return n.kind}const v6=[vp,wr,Rn,Nn,Gc,bp,Gh,gu(Fn),Yf];function Uf(n,i){if(i.kind==="error")return null;if(n.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Uf(n.itemType,i.itemType))&&(typeof n.N!="number"||n.N===i.N))return null}else{if(n.kind===i.kind)return null;if(n.kind==="value"){for(const o of v6)if(!Uf(o,i))return null}}return`Expected ${ns(n)} but found ${ns(i)} instead.`}function H2(n,i){return i.some(o=>o.kind===n.kind)}function qf(n,i){return i.some(o=>o==="null"?n===null:o==="array"?Array.isArray(n):o==="object"?n&&!Array.isArray(n)&&typeof n=="object":o===typeof n)}var _6=yp(function(n,i){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(L){return L=Math.round(L),L<0?0:L>255?255:L}function p(L){return L<0?0:L>1?1:L}function m(L){return L[L.length-1]==="%"?l(parseFloat(L)/100*255):l(parseInt(L))}function b(L){return L[L.length-1]==="%"?p(parseFloat(L)/100):p(parseFloat(L))}function h(L,z,U){return U<0?U+=1:U>1&&(U-=1),U*6<1?L+(z-L)*U*6:U*2<1?z:U*3<2?L+(z-L)*(2/3-U)*6:L}function E(L){var z=L.replace(/ /g,"").toLowerCase();if(z in o)return o[z].slice();if(z[0]==="#"){if(z.length===4){var U=parseInt(z.substr(1),16);return U>=0&&U<=4095?[(U&3840)>>4|(U&3840)>>8,U&240|(U&240)>>4,U&15|(U&15)<<4,1]:null}else if(z.length===7){var U=parseInt(z.substr(1),16);return U>=0&&U<=16777215?[(U&16711680)>>16,(U&65280)>>8,U&255,1]:null}return null}var q=z.indexOf("("),B=z.indexOf(")");if(q!==-1&&B+1===z.length){var K=z.substr(0,q),J=z.substr(q+1,B-(q+1)).split(","),se=1;switch(K){case"rgba":if(J.length!==4)return null;se=b(J.pop());case"rgb":return J.length!==3?null:[m(J[0]),m(J[1]),m(J[2]),se];case"hsla":if(J.length!==4)return null;se=b(J.pop());case"hsl":if(J.length!==3)return null;var ne=(parseFloat(J[0])%360+360)%360/360,re=b(J[1]),ke=b(J[2]),Pe=ke<=.5?ke*(re+1):ke+re-ke*re,be=ke*2-Pe;return[l(h(be,Pe,ne+1/3)*255),l(h(be,Pe,ne)*255),l(h(be,Pe,ne-1/3)*255),se];default:return null}}return null}try{i.parseCSSColor=E}catch{}});class Il{constructor(i,o,l,p=1){this.r=i,this.g=o,this.b=l,this.a=p}static parse(i){if(!i)return;if(i instanceof Il)return i;if(typeof i!="string")return;const o=_6.parseCSSColor(i);if(!!o)return new Il(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}toString(){const[i,o,l,p]=this.toArray();return`rgba(${Math.round(i)},${Math.round(o)},${Math.round(l)},${p})`}toArray(){const{r:i,g:o,b:l,a:p}=this;return p===0?[0,0,0,0]:[i*255/p,o*255/p,l*255/p,p]}toArray01(){const{r:i,g:o,b:l,a:p}=this;return p===0?[0,0,0,0]:[i/p,o/p,l/p,p]}toArray01PremultipliedAlpha(){const{r:i,g:o,b:l,a:p}=this;return[i,o,l,p]}}Il.black=new Il(0,0,0,1);Il.white=new Il(1,1,1,1);Il.transparent=new Il(0,0,0,0);Il.red=new Il(1,0,0,1);Il.blue=new Il(0,0,1,1);var Sa=Il;class W2{constructor(i,o,l){i?this.sensitivity=o?"variant":"case":this.sensitivity=o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,o){return this.collator.compare(i,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class A2{constructor(i,o,l,p,m){this.text=i.normalize?i.normalize():i,this.image=o,this.scale=l,this.fontStack=p,this.textColor=m}}class Wu{constructor(i){this.sections=i}static fromString(i){return new Wu([new A2(i,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Wu?i:Wu.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const o of this.sections){if(o.image){i.push(["image",o.image.name]);continue}i.push(o.text);const l={};o.fontStack&&(l["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(l["font-scale"]=o.scale),o.textColor&&(l["text-color"]=["rgba"].concat(o.textColor.toArray())),i.push(l)}return i}}class Wc{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Wc({name:i,available:!1}):null}serialize(){return["image",this.name]}}function b5(n,i,o,l){return typeof n=="number"&&n>=0&&n<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof o=="number"&&o>=0&&o<=255?typeof l>"u"||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[n,i,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[n,i,o,l]:[n,i,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function np(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof Sa)return!0;if(n instanceof W2)return!0;if(n instanceof Wu)return!0;if(n instanceof Wc)return!0;if(Array.isArray(n)){for(const i of n)if(!np(i))return!1;return!0}else if(typeof n=="object"){for(const i in n)if(!np(n[i]))return!1;return!0}else return!1}function Ys(n){if(n===null)return vp;if(typeof n=="string")return Rn;if(typeof n=="boolean")return Nn;if(typeof n=="number")return wr;if(n instanceof Sa)return Gc;if(n instanceof W2)return _p;if(n instanceof Wu)return bp;if(n instanceof Wc)return Yf;if(Array.isArray(n)){const i=n.length;let o;for(const l of n){const p=Ys(l);if(!o)o=p;else{if(o===p)continue;o=Fn;break}}return gu(o||Fn,i)}else return Gh}function Lf(n){const i=typeof n;return n===null?"":i==="string"||i==="number"||i==="boolean"?String(n):n instanceof Sa||n instanceof Wu||n instanceof Wc?n.toString():JSON.stringify(n)}class Z2{constructor(i,o){this.type=i,this.value=o}static parse(i,o){if(i.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!np(i[1]))return o.error("invalid value");const l=i[1];let p=Ys(l);const m=o.expectedType;return p.kind==="array"&&p.N===0&&m&&m.kind==="array"&&(typeof m.N!="number"||m.N===0)&&(p=m),new Z2(p,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Sa?["rgba"].concat(this.value.toArray()):this.value instanceof Wu?this.value.serialize():this.value}}var op=Z2;class b6{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}var Ia=b6;const w1={string:Rn,number:wr,boolean:Nn,object:Gh};class X2{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let l=1,p;const m=i[0];if(m==="array"){let h;if(i.length>2){const L=i[1];if(typeof L!="string"||!(L in w1)||L==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);h=w1[L],l++}else h=Fn;let E;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=i[2],l++}p=gu(h,E)}else p=w1[m];const b=[];for(;l<i.length;l++){const h=o.parse(i[l],l,Fn);if(!h)return null;b.push(h)}return new X2(p,b)}evaluate(i){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(i);if(Uf(this.type,Ys(l))){if(o===this.args.length-1)throw new Ia(`Expected value to be of type ${ns(this.type)}, but found ${ns(Ys(l))} instead.`)}else return l}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,o=[i.kind];if(i.kind==="array"){const l=i.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){o.push(l.kind);const p=i.N;(typeof p=="number"||this.args.length>1)&&o.push(p)}}return o.concat(this.args.map(l=>l.serialize()))}}var Vc=X2;class wp{constructor(i){this.type=bp,this.sections=i}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");const l=i[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const p=[];let m=!1;for(let b=1;b<=i.length-1;++b){const h=i[b];if(m&&typeof h=="object"&&!Array.isArray(h)){m=!1;let E=null;if(h["font-scale"]&&(E=o.parse(h["font-scale"],1,wr),!E))return null;let L=null;if(h["text-font"]&&(L=o.parse(h["text-font"],1,gu(Rn)),!L))return null;let z=null;if(h["text-color"]&&(z=o.parse(h["text-color"],1,Gc),!z))return null;const U=p[p.length-1];U.scale=E,U.font=L,U.textColor=z}else{const E=o.parse(i[b],1,Fn);if(!E)return null;const L=E.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:E,scale:null,font:null,textColor:null})}}return new wp(p)}evaluate(i){const o=l=>{const p=l.content.evaluate(i);return Ys(p)===Yf?new A2("",p,null,null,null):new A2(Lf(p),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)};return new Wu(this.sections.map(o))}eachChild(i){for(const o of this.sections)i(o.content),o.scale&&i(o.scale),o.font&&i(o.font),o.textColor&&i(o.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const o of this.sections){i.push(o.content.serialize());const l={};o.scale&&(l["font-scale"]=o.scale.serialize()),o.font&&(l["text-font"]=o.font.serialize()),o.textColor&&(l["text-color"]=o.textColor.serialize()),i.push(l)}return i}}class xp{constructor(i){this.type=Yf,this.input=i}static parse(i,o){if(i.length!==2)return o.error("Expected two arguments.");const l=o.parse(i[1],1,Rn);return l?new xp(l):o.error("No image name provided.")}evaluate(i){const o=this.input.evaluate(i),l=Wc.fromString(o);return l&&i.availableImages&&(l.available=i.availableImages.indexOf(o)>-1),l}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const w6={"to-boolean":Nn,"to-color":Gc,"to-number":wr,"to-string":Rn};class Y2{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");const l=i[0];if((l==="to-boolean"||l==="to-string")&&i.length!==2)return o.error("Expected one argument.");const p=w6[l],m=[];for(let b=1;b<i.length;b++){const h=o.parse(i[b],b,Fn);if(!h)return null;m.push(h)}return new Y2(p,m)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let o,l;for(const p of this.args){if(o=p.evaluate(i),l=null,o instanceof Sa)return o;if(typeof o=="string"){const m=i.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(o.length<3||o.length>4?l=`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:l=b5(o[0],o[1],o[2],o[3]),!l))return new Sa(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Ia(l||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}else if(this.type.kind==="number"){let o=null;for(const l of this.args){if(o=l.evaluate(i),o===null)return 0;const p=Number(o);if(!isNaN(p))return p}throw new Ia(`Could not convert ${JSON.stringify(o)} to number.`)}else return this.type.kind==="formatted"?Wu.fromString(Lf(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Wc.fromString(Lf(this.args[0].evaluate(i))):Lf(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new wp([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new xp(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(o=>{i.push(o.serialize())}),i}}var Bh=Y2;const x6=["Unknown","Point","LineString","Polygon"];class k6{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?x6[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:l,y:p}=this.featureTileCoord,m=l*o-i[0],b=p*o-i[1],h=this.featureDistanceData.bearing[0],E=this.featureDistanceData.bearing[1];return h*m+E*b}return 0}parseColor(i){let o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=Sa.parse(i)),o}}var w5=k6;class Rh{constructor(i,o,l,p){this.name=i,this.type=o,this._evaluate=l,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,o){const l=i[0],p=Rh.definitions[l];if(!p)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(p)?p[0]:p.type,b=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,h=b.filter(([L])=>!Array.isArray(L)||L.length===i.length-1);let E=null;for(const[L,z]of h){E=new S5(o.registry,o.path,null,o.scope);const U=[];let q=!1;for(let B=1;B<i.length;B++){const K=i[B],J=Array.isArray(L)?L[B-1]:L.type,se=E.parse(K,1+U.length,J);if(!se){q=!0;break}U.push(se)}if(!q){if(Array.isArray(L)&&L.length!==U.length){E.error(`Expected ${L.length} arguments, but found ${U.length} instead.`);continue}for(let B=0;B<U.length;B++){const K=Array.isArray(L)?L[B]:L.type,J=U[B];E.concat(B+1).checkSubtype(K,J.type)}if(E.errors.length===0)return new Rh(l,m,z,U)}}if(h.length===1)o.errors.push(...E.errors);else{const z=(h.length?h:b).map(([q])=>A6(q)).join(" | "),U=[];for(let q=1;q<i.length;q++){const B=o.parse(i[q],1+U.length);if(!B)return null;U.push(ns(B.type))}o.error(`Expected arguments of type ${z}, but found (${U.join(", ")}) instead.`)}return null}static register(i,o){Rh.definitions=o;for(const l in o)i[l]=Rh}}function A6(n){return Array.isArray(n)?`(${n.map(ns).join(", ")})`:`(${ns(n.type)}...)`}var Qh=Rh;class kp{constructor(i,o,l){this.type=_p,this.locale=l,this.caseSensitive=i,this.diacriticSensitive=o}static parse(i,o){if(i.length!==2)return o.error("Expected one argument.");const l=i[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const p=o.parse(l["case-sensitive"]===void 0?!1:l["case-sensitive"],1,Nn);if(!p)return null;const m=o.parse(l["diacritic-sensitive"]===void 0?!1:l["diacritic-sensitive"],1,Nn);if(!m)return null;let b=null;return l.locale&&(b=o.parse(l.locale,1,Rn),!b)?null:new kp(p,m,b)}evaluate(i){return new W2(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const b0=8192;function J2(n,i){n[0]=Math.min(n[0],i[0]),n[1]=Math.min(n[1],i[1]),n[2]=Math.max(n[2],i[0]),n[3]=Math.max(n[3],i[1])}function E6(n){return(180+n)/360}function S6(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function sp(n,i){return!(n[0]<=i[0]||n[2]>=i[2]||n[1]<=i[1]||n[3]>=i[3])}function I6(n,i){const o=E6(n[0]),l=S6(n[1]),p=Math.pow(2,i.z);return[Math.round(o*p*b0),Math.round(l*p*b0)]}function C6(n,i,o){const l=n[0]-i[0],p=n[1]-i[1],m=n[0]-o[0],b=n[1]-o[1];return l*b-m*p===0&&l*m<=0&&p*b<=0}function T6(n,i,o){return i[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]}function K2(n,i){let o=!1;for(let l=0,p=i.length;l<p;l++){const m=i[l];for(let b=0,h=m.length;b<h-1;b++){if(C6(n,m[b],m[b+1]))return!1;T6(n,m[b],m[b+1])&&(o=!o)}}return o}function L6(n,i){for(let o=0;o<i.length;o++)if(K2(n,i[o]))return!0;return!1}function P6(n,i){return n[0]*i[1]-n[1]*i[0]}function Dy(n,i,o,l){const p=n[0]-o[0],m=n[1]-o[1],b=i[0]-o[0],h=i[1]-o[1],E=l[0]-o[0],L=l[1]-o[1],z=p*L-E*m,U=b*L-E*h;return z>0&&U<0||z<0&&U>0}function M6(n,i,o,l){const p=[i[0]-n[0],i[1]-n[1]],m=[l[0]-o[0],l[1]-o[1]];return P6(m,p)===0?!1:!!(Dy(n,i,o,l)&&Dy(o,l,n,i))}function D6(n,i,o){for(const l of o)for(let p=0;p<l.length-1;++p)if(M6(n,i,l[p],l[p+1]))return!0;return!1}function x5(n,i){for(let o=0;o<n.length;++o)if(!K2(n[o],i))return!1;for(let o=0;o<n.length-1;++o)if(D6(n[o],n[o+1],i))return!1;return!0}function z6(n,i){for(let o=0;o<i.length;o++)if(x5(n,i[o]))return!0;return!1}function Q2(n,i,o){const l=[];for(let p=0;p<n.length;p++){const m=[];for(let b=0;b<n[p].length;b++){const h=I6(n[p][b],o);J2(i,h),m.push(h)}l.push(m)}return l}function k5(n,i,o){const l=[];for(let p=0;p<n.length;p++){const m=Q2(n[p],i,o);l.push(m)}return l}function A5(n,i,o,l){if(n[0]<o[0]||n[0]>o[2]){const p=l*.5;let m=n[0]-o[0]>p?-l:o[0]-n[0]>p?l:0;m===0&&(m=n[0]-o[2]>p?-l:o[2]-n[0]>p?l:0),n[0]+=m}J2(i,n)}function N6(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function zy(n,i,o,l){const p=Math.pow(2,l.z)*b0,m=[l.x*b0,l.y*b0],b=[];if(!n)return b;for(const h of n)for(const E of h){const L=[E.x+m[0],E.y+m[1]];A5(L,i,o,p),b.push(L)}return b}function Ny(n,i,o,l){const p=Math.pow(2,l.z)*b0,m=[l.x*b0,l.y*b0],b=[];if(!n)return b;for(const h of n){const E=[];for(const L of h){const z=[L.x+m[0],L.y+m[1]];J2(i,z),E.push(z)}b.push(E)}if(i[2]-i[0]<=p/2){N6(i);for(const h of b)for(const E of h)A5(E,i,o,p)}return b}function F6(n,i){const o=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],p=n.canonicalID();if(!p)return!1;if(i.type==="Polygon"){const m=Q2(i.coordinates,l,p),b=zy(n.geometry(),o,l,p);if(!sp(o,l))return!1;for(const h of b)if(!K2(h,m))return!1}if(i.type==="MultiPolygon"){const m=k5(i.coordinates,l,p),b=zy(n.geometry(),o,l,p);if(!sp(o,l))return!1;for(const h of b)if(!L6(h,m))return!1}return!0}function B6(n,i){const o=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],p=n.canonicalID();if(!p)return!1;if(i.type==="Polygon"){const m=Q2(i.coordinates,l,p),b=Ny(n.geometry(),o,l,p);if(!sp(o,l))return!1;for(const h of b)if(!x5(h,m))return!1}if(i.type==="MultiPolygon"){const m=k5(i.coordinates,l,p),b=Ny(n.geometry(),o,l,p);if(!sp(o,l))return!1;for(const h of b)if(!z6(h,m))return!1}return!0}class Pf{constructor(i,o){this.type=Nn,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(np(i[1])){const l=i[1];if(l.type==="FeatureCollection")for(let p=0;p<l.features.length;++p){const m=l.features[p].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Pf(l,l.features[p].geometry)}else if(l.type==="Feature"){const p=l.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Pf(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Pf(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return F6(i,this.geometries);if(i.geometryType()==="LineString")return B6(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var $2=Pf;function em(n){if(n instanceof Qh){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof $2)return!1;let i=!0;return n.eachChild(o=>{i&&!em(o)&&(i=!1)}),i}function tm(n){if(n instanceof Qh&&n.name==="feature-state")return!1;let i=!0;return n.eachChild(o=>{i&&!tm(o)&&(i=!1)}),i}function im(n,i){if(n instanceof Qh&&i.indexOf(n.name)>=0)return!1;let o=!0;return n.eachChild(l=>{o&&!im(l,i)&&(o=!1)}),o}class rm{constructor(i,o){this.type=o.type,this.name=i,this.boundExpression=o}static parse(i,o){if(i.length!==2||typeof i[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=i[1];return o.scope.has(l)?new rm(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var E5=rm;class nm{constructor(i,o=[],l,p=new g6,m=[]){this.registry=i,this.path=o,this.key=o.map(b=>`[${b}]`).join(""),this.scope=p,this.errors=m,this.expectedType=l}parse(i,o,l,p,m={}){return o?this.concat(o,l,p)._parse(i,m):this._parse(i,m)}_parse(i,o){(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number")&&(i=["literal",i]);function l(p,m,b){return b==="assert"?new Vc(m,[p]):b==="coerce"?new Bh(m,[p]):p}if(Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[p];if(m){let b=m.parse(i,this);if(!b)return null;if(this.expectedType){const h=this.expectedType,E=b.type;if((h.kind==="string"||h.kind==="number"||h.kind==="boolean"||h.kind==="object"||h.kind==="array")&&E.kind==="value")b=l(b,h,o.typeAnnotation||"assert");else if((h.kind==="color"||h.kind==="formatted"||h.kind==="resolvedImage")&&(E.kind==="value"||E.kind==="string"))b=l(b,h,o.typeAnnotation||"coerce");else if(this.checkSubtype(h,E))return null}if(!(b instanceof op)&&b.type.kind!=="resolvedImage"&&E2(b)){const h=new w5;try{b=new op(b.type,b.evaluate(h))}catch(E){return this.error(E.message),null}}return b}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof i>"u"?this.error("'undefined' value invalid. Use null instead."):typeof i=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof i} instead.`)}concat(i,o,l){const p=typeof i=="number"?this.path.concat(i):this.path,m=l?this.scope.concat(l):this.scope;return new nm(this.registry,p,o||null,m,this.errors)}error(i,...o){const l=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new mc(l,i))}checkSubtype(i,o){const l=Uf(i,o);return l&&this.error(l),l}}var S5=nm;function E2(n){if(n instanceof E5)return E2(n.boundExpression);if(n instanceof Qh&&n.name==="error")return!1;if(n instanceof kp)return!1;if(n instanceof $2)return!1;const i=n instanceof Bh||n instanceof Vc;let o=!0;return n.eachChild(l=>{i?o=o&&E2(l):o=o&&l instanceof op}),o?em(n)&&im(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Ap(n,i){const o=n.length-1;let l=0,p=o,m=0,b,h;for(;l<=p;)if(m=Math.floor((l+p)/2),b=n[m],h=n[m+1],b<=i){if(m===o||i<h)return m;l=m+1}else if(b>i)p=m-1;else throw new Ia("Input is not a number.");return 0}class om{constructor(i,o,l){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(const[p,m]of l)this.labels.push(p),this.outputs.push(m)}static parse(i,o){if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!==0)return o.error("Expected an even number of arguments.");const l=o.parse(i[1],1,wr);if(!l)return null;const p=[];let m=null;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);for(let b=1;b<i.length;b+=2){const h=b===1?-1/0:i[b],E=i[b+1],L=b,z=b+1;if(typeof h!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(p.length&&p[p.length-1][0]>=h)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const U=o.parse(E,z,m);if(!U)return null;m=m||U.type,p.push([h,U])}return new om(m,l,p)}evaluate(i){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(i);const p=this.input.evaluate(i);if(p<=o[0])return l[0].evaluate(i);const m=o.length;if(p>=o[m-1])return l[m-1].evaluate(i);const b=Ap(o,p);return l[b].evaluate(i)}eachChild(i){i(this.input);for(const o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i}}var I5=om,R6=$h;function $h(n,i,o,l){this.cx=3*n,this.bx=3*(o-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(l-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=l,this.p2x=o,this.p2y=l}$h.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};$h.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};$h.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};$h.prototype.solveCurveX=function(n,i){typeof i>"u"&&(i=1e-6);var o,l,p,m,b;for(p=n,b=0;b<8;b++){if(m=this.sampleCurveX(p)-n,Math.abs(m)<i)return p;var h=this.sampleCurveDerivativeX(p);if(Math.abs(h)<1e-6)break;p=p-m/h}if(o=0,l=1,p=n,p<o)return o;if(p>l)return l;for(;o<l;){if(m=this.sampleCurveX(p),Math.abs(m-n)<i)return p;n>m?o=p:l=p,p=(l-o)*.5+o}return p};$h.prototype.solve=function(n,i){return this.sampleCurveY(this.solveCurveX(n,i))};function Jl(n,i,o){return n*(1-o)+i*o}function O6(n,i,o){return new Sa(Jl(n.r,i.r,o),Jl(n.g,i.g,o),Jl(n.b,i.b,o),Jl(n.a,i.a,o))}function j6(n,i,o){return n.map((l,p)=>Jl(l,i[p],o))}var C5=Object.freeze({__proto__:null,number:Jl,color:O6,array:j6});const T5=.95047,L5=1,P5=1.08883,M5=4/29,Hh=6/29,D5=3*Hh*Hh,U6=Hh*Hh*Hh,q6=Math.PI/180,V6=180/Math.PI;function x1(n){return n>U6?Math.pow(n,1/3):n/D5+M5}function k1(n){return n>Hh?n*n*n:D5*(n-M5)}function A1(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function E1(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function z5(n){const i=E1(n.r),o=E1(n.g),l=E1(n.b),p=x1((.4124564*i+.3575761*o+.1804375*l)/T5),m=x1((.2126729*i+.7151522*o+.072175*l)/L5),b=x1((.0193339*i+.119192*o+.9503041*l)/P5);return{l:116*m-16,a:500*(p-m),b:200*(m-b),alpha:n.a}}function N5(n){let i=(n.l+16)/116,o=isNaN(n.a)?i:i+n.a/500,l=isNaN(n.b)?i:i-n.b/200;return i=L5*k1(i),o=T5*k1(o),l=P5*k1(l),new Sa(A1(3.2404542*o-1.5371385*i-.4985314*l),A1(-.969266*o+1.8760108*i+.041556*l),A1(.0556434*o-.2040259*i+1.0572252*l),n.alpha)}function G6(n,i,o){return{l:Jl(n.l,i.l,o),a:Jl(n.a,i.a,o),b:Jl(n.b,i.b,o),alpha:Jl(n.alpha,i.alpha,o)}}function H6(n){const{l:i,a:o,b:l}=z5(n),p=Math.atan2(l,o)*V6;return{h:p<0?p+360:p,c:Math.sqrt(o*o+l*l),l:i,alpha:n.a}}function W6(n){const i=n.h*q6,o=n.c,l=n.l;return N5({l,a:Math.cos(i)*o,b:Math.sin(i)*o,alpha:n.alpha})}function Z6(n,i,o){const l=i-n;return n+o*(l>180||l<-180?l-360*Math.round(l/360):l)}function X6(n,i,o){return{h:Z6(n.h,i.h,o),c:Jl(n.c,i.c,o),l:Jl(n.l,i.l,o),alpha:Jl(n.alpha,i.alpha,o)}}const Ef={forward:z5,reverse:N5,interpolate:G6},Sf={forward:H6,reverse:W6,interpolate:X6};var F5=Object.freeze({__proto__:null,lab:Ef,hcl:Sf});class ap{constructor(i,o,l,p,m){this.type=i,this.operator=o,this.interpolation=l,this.input=p,this.labels=[],this.outputs=[];for(const[b,h]of m)this.labels.push(b),this.outputs.push(h)}static interpolationFactor(i,o,l,p){let m=0;if(i.name==="exponential")m=S1(o,i.base,l,p);else if(i.name==="linear")m=S1(o,1,l,p);else if(i.name==="cubic-bezier"){const b=i.controlPoints;m=new R6(b[0],b[1],b[2],b[3]).solve(S1(o,1,l,p))}return m}static parse(i,o){let[l,p,m,...b]=i;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const L=p[1];if(typeof L!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:L}}else if(p[0]==="cubic-bezier"){const L=p.slice(1);if(L.length!==4||L.some(z=>typeof z!="number"||z<0||z>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:L}}else return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!==0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,wr),!m)return null;const h=[];let E=null;l==="interpolate-hcl"||l==="interpolate-lab"?E=Gc:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let L=0;L<b.length;L+=2){const z=b[L],U=b[L+1],q=L+3,B=L+4;if(typeof z!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(h.length&&h[h.length-1][0]>=z)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const K=o.parse(U,B,E);if(!K)return null;E=E||K.type,h.push([z,K])}return E.kind!=="number"&&E.kind!=="color"&&!(E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number")?o.error(`Type ${ns(E)} is not interpolatable.`):new ap(E,l,p,m,h)}evaluate(i){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(i);const p=this.input.evaluate(i);if(p<=o[0])return l[0].evaluate(i);const m=o.length;if(p>=o[m-1])return l[m-1].evaluate(i);const b=Ap(o,p),h=o[b],E=o[b+1],L=ap.interpolationFactor(this.interpolation,p,h,E),z=l[b].evaluate(i),U=l[b+1].evaluate(i);return this.operator==="interpolate"?C5[this.type.kind.toLowerCase()](z,U,L):this.operator==="interpolate-hcl"?Sf.reverse(Sf.interpolate(Sf.forward(z),Sf.forward(U),L)):Ef.reverse(Ef.interpolate(Ef.forward(z),Ef.forward(U),L))}eachChild(i){i(this.input);for(const o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;this.interpolation.name==="linear"?i=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?i=["linear"]:i=["exponential",this.interpolation.base]:i=["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,i,this.input.serialize()];for(let l=0;l<this.labels.length;l++)o.push(this.labels[l],this.outputs[l].serialize());return o}}function S1(n,i,o,l){const p=l-o,m=n-o;return p===0?0:i===1?m/p:(Math.pow(i,m)-1)/(Math.pow(i,p)-1)}var Hc=ap;class lp{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expectected at least one argument.");let l=null;const p=o.expectedType;p&&p.kind!=="value"&&(l=p);const m=[];for(const h of i.slice(1)){const E=o.parse(h,1+m.length,l,void 0,{typeAnnotation:"omit"});if(!E)return null;l=l||E.type,m.push(E)}return p&&m.some(h=>Uf(p,h.type))?new lp(Fn,m):new lp(l,m)}evaluate(i){let o=null,l=0,p;for(const m of this.args){if(l++,o=m.evaluate(i),o&&o instanceof Wc&&!o.available&&(p||(p=o),o=null,l===this.args.length))return p;if(o!==null)break}return o}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(o=>{i.push(o.serialize())}),i}}var B5=lp;class sm{constructor(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const o of this.bindings)i(o[1]);i(this.result)}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const l=[];for(let m=1;m<i.length-1;m+=2){const b=i[m];if(typeof b!="string")return o.error(`Expected string, but found ${typeof b} instead.`,m);if(/[^a-zA-Z0-9_]/.test(b))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const h=o.parse(i[m+1],m+1);if(!h)return null;l.push([b,h])}const p=o.parse(i[i.length-1],i.length-1,o.expectedType,l);return p?new sm(l,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[o,l]of this.bindings)i.push(o,l.serialize());return i.push(this.result.serialize()),i}}var R5=sm;class am{constructor(i,o,l){this.type=i,this.index=o,this.input=l}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const l=o.parse(i[1],1,wr),p=o.parse(i[2],2,gu(o.expectedType||Fn));if(!l||!p)return null;const m=p.type;return new am(m.itemType,l,p)}evaluate(i){const o=this.index.evaluate(i),l=this.input.evaluate(i);if(o<0)throw new Ia(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new Ia(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new Ia(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Y6=am;class lm{constructor(i,o){this.type=Nn,this.needle=i,this.haystack=o}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const l=o.parse(i[1],1,Fn),p=o.parse(i[2],2,Fn);return!l||!p?null:H2(l.type,[Nn,Rn,wr,vp,Fn])?new lm(l,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${ns(l.type)} instead`)}evaluate(i){const o=this.needle.evaluate(i),l=this.haystack.evaluate(i);if(l==null)return!1;if(!qf(o,["boolean","string","number","null"]))throw new Ia(`Expected first argument to be of type boolean, string, number or null, but found ${ns(Ys(o))} instead.`);if(!qf(l,["string","array"]))throw new Ia(`Expected second argument to be of type array or string, but found ${ns(Ys(l))} instead.`);return l.indexOf(o)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var J6=lm;class up{constructor(i,o,l){this.type=wr,this.needle=i,this.haystack=o,this.fromIndex=l}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const l=o.parse(i[1],1,Fn),p=o.parse(i[2],2,Fn);if(!l||!p)return null;if(!H2(l.type,[Nn,Rn,wr,vp,Fn]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${ns(l.type)} instead`);if(i.length===4){const m=o.parse(i[3],3,wr);return m?new up(l,p,m):null}else return new up(l,p)}evaluate(i){const o=this.needle.evaluate(i),l=this.haystack.evaluate(i);if(!qf(o,["boolean","string","number","null"]))throw new Ia(`Expected first argument to be of type boolean, string, number or null, but found ${ns(Ys(o))} instead.`);if(!qf(l,["string","array"]))throw new Ia(`Expected second argument to be of type array or string, but found ${ns(Ys(l))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(i);return l.indexOf(o,p)}return l.indexOf(o)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var K6=up;class um{constructor(i,o,l,p,m,b){this.inputType=i,this.type=o,this.input=l,this.cases=p,this.outputs=m,this.otherwise=b}static parse(i,o){if(i.length<5)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!==1)return o.error("Expected an even number of arguments.");let l,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);const m={},b=[];for(let L=2;L<i.length-1;L+=2){let z=i[L];const U=i[L+1];Array.isArray(z)||(z=[z]);const q=o.concat(L);if(z.length===0)return q.error("Expected at least one branch label.");for(const K of z){if(typeof K!="number"&&typeof K!="string")return q.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return q.error("Numeric branch labels must be integer values.");if(!l)l=Ys(K);else if(q.checkSubtype(l,Ys(K)))return null;if(typeof m[String(K)]<"u")return q.error("Branch labels must be unique.");m[String(K)]=b.length}const B=o.parse(U,L,p);if(!B)return null;p=p||B.type,b.push(B)}const h=o.parse(i[1],1,Fn);if(!h)return null;const E=o.parse(i[i.length-1],i.length-1,p);return!E||h.type.kind!=="value"&&o.concat(1).checkSubtype(l,h.type)?null:new um(l,p,h,m,b,E)}evaluate(i){const o=this.input.evaluate(i);return(Ys(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),l=[],p={};for(const b of o){const h=p[this.cases[b]];h===void 0?(p[this.cases[b]]=l.length,l.push([this.cases[b],[b]])):l[h][1].push(b)}const m=b=>this.inputType.kind==="number"?Number(b):b;for(const[b,h]of l)h.length===1?i.push(m(h[0])):i.push(h.map(m)),i.push(this.outputs[b].serialize());return i.push(this.otherwise.serialize()),i}}var Q6=um;class cm{constructor(i,o,l){this.type=i,this.branches=o,this.otherwise=l}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!==0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const p=[];for(let b=1;b<i.length-1;b+=2){const h=o.parse(i[b],b,Nn);if(!h)return null;const E=o.parse(i[b+1],b+1,l);if(!E)return null;p.push([h,E]),l=l||E.type}const m=o.parse(i[i.length-1],i.length-1,l);return m?new cm(l,p,m):null}evaluate(i){for(const[o,l]of this.branches)if(o.evaluate(i))return l.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[o,l]of this.branches)i(o),i(l);i(this.otherwise)}outputDefined(){return this.branches.every(([i,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(o=>{i.push(o.serialize())}),i}}var $6=cm;class cp{constructor(i,o,l,p){this.type=i,this.input=o,this.beginIndex=l,this.endIndex=p}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const l=o.parse(i[1],1,Fn),p=o.parse(i[2],2,wr);if(!l||!p)return null;if(!H2(l.type,[gu(Fn),Rn,Fn]))return o.error(`Expected first argument to be of type array or string, but found ${ns(l.type)} instead`);if(i.length===4){const m=o.parse(i[3],3,wr);return m?new cp(l.type,l,p,m):null}else return new cp(l.type,l,p)}evaluate(i){const o=this.input.evaluate(i),l=this.beginIndex.evaluate(i);if(!qf(o,["string","array"]))throw new Ia(`Expected first argument to be of type array or string, but found ${ns(Ys(o))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(i);return o.slice(l,p)}return o.slice(l)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var e8=cp;function Fy(n,i){return n==="=="||n==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function t8(n,i,o){return i===o}function i8(n,i,o){return i!==o}function r8(n,i,o){return i<o}function n8(n,i,o){return i>o}function o8(n,i,o){return i<=o}function s8(n,i,o){return i>=o}function O5(n,i,o,l){return l.compare(i,o)===0}function a8(n,i,o,l){return!O5(n,i,o,l)}function l8(n,i,o,l){return l.compare(i,o)<0}function u8(n,i,o,l){return l.compare(i,o)>0}function c8(n,i,o,l){return l.compare(i,o)<=0}function h8(n,i,o,l){return l.compare(i,o)>=0}function ef(n,i,o){const l=n!=="=="&&n!=="!=";return class j5{constructor(m,b,h){this.type=Nn,this.lhs=m,this.rhs=b,this.collator=h,this.hasUntypedArgument=m.type.kind==="value"||b.type.kind==="value"}static parse(m,b){if(m.length!==3&&m.length!==4)return b.error("Expected two or three arguments.");const h=m[0];let E=b.parse(m[1],1,Fn);if(!E)return null;if(!Fy(h,E.type))return b.concat(1).error(`"${h}" comparisons are not supported for type '${ns(E.type)}'.`);let L=b.parse(m[2],2,Fn);if(!L)return null;if(!Fy(h,L.type))return b.concat(2).error(`"${h}" comparisons are not supported for type '${ns(L.type)}'.`);if(E.type.kind!==L.type.kind&&E.type.kind!=="value"&&L.type.kind!=="value")return b.error(`Cannot compare types '${ns(E.type)}' and '${ns(L.type)}'.`);l&&(E.type.kind==="value"&&L.type.kind!=="value"?E=new Vc(L.type,[E]):E.type.kind!=="value"&&L.type.kind==="value"&&(L=new Vc(E.type,[L])));let z=null;if(m.length===4){if(E.type.kind!=="string"&&L.type.kind!=="string"&&E.type.kind!=="value"&&L.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(z=b.parse(m[3],3,_p),!z)return null}return new j5(E,L,z)}evaluate(m){const b=this.lhs.evaluate(m),h=this.rhs.evaluate(m);if(l&&this.hasUntypedArgument){const E=Ys(b),L=Ys(h);if(E.kind!==L.kind||!(E.kind==="string"||E.kind==="number"))throw new Ia(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${E.kind}, ${L.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const E=Ys(b),L=Ys(h);if(E.kind!=="string"||L.kind!=="string")return i(m,b,h)}return this.collator?o(m,b,h,this.collator.evaluate(m)):i(m,b,h)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[n];return this.eachChild(b=>{m.push(b.serialize())}),m}}}const f8=ef("==",t8,O5),d8=ef("!=",i8,a8),p8=ef("<",r8,l8),m8=ef(">",n8,u8),g8=ef("<=",o8,c8),y8=ef(">=",s8,h8);class hm{constructor(i,o,l,p,m,b){this.type=Rn,this.number=i,this.locale=o,this.currency=l,this.unit=p,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(i,o){if(i.length!==3)return o.error("Expected two arguments.");const l=o.parse(i[1],1,wr);if(!l)return null;const p=i[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let m=null;if(p.locale&&(m=o.parse(p.locale,1,Rn),!m))return null;let b=null;if(p.currency&&(b=o.parse(p.currency,1,Rn),!b))return null;let h=null;if(p.unit&&(h=o.parse(p.unit,1,Rn),!h))return null;let E=null;if(p["min-fraction-digits"]&&(E=o.parse(p["min-fraction-digits"],1,wr),!E))return null;let L=null;return p["max-fraction-digits"]&&(L=o.parse(p["max-fraction-digits"],1,wr),!L)?null:new hm(l,m,b,h,E,L)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class fm{constructor(i){this.type=wr,this.input=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);const l=o.parse(i[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${ns(l.type)} instead.`):new fm(l):null}evaluate(i){const o=this.input.evaluate(i);if(typeof o=="string")return o.length;if(Array.isArray(o))return o.length;throw new Ia(`Expected value to be of type string or array, but found ${ns(Ys(o))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(o=>{i.push(o.serialize())}),i}}var v8=fm;const U5={"==":f8,"!=":d8,">":m8,"<":p8,">=":y8,"<=":g8,array:Vc,at:Y6,boolean:Vc,case:$6,coalesce:B5,collator:kp,format:wp,image:xp,in:J6,"index-of":K6,interpolate:Hc,"interpolate-hcl":Hc,"interpolate-lab":Hc,length:v8,let:R5,literal:op,match:Q6,number:Vc,"number-format":hm,object:Vc,slice:e8,step:I5,string:Vc,"to-boolean":Bh,"to-color":Bh,"to-number":Bh,"to-string":Bh,var:E5,within:$2};function By(n,[i,o,l,p]){i=i.evaluate(n),o=o.evaluate(n),l=l.evaluate(n);const m=p?p.evaluate(n):1,b=b5(i,o,l,m);if(b)throw new Ia(b);return new Sa(i/255*m,o/255*m,l/255*m,m)}function Ry(n,i){return n in i}function I1(n,i){const o=i[n];return typeof o>"u"?null:o}function _8(n,i,o,l){for(;o<=l;){const p=o+l>>1;if(i[p]===n)return!0;i[p]>n?l=p-1:o=p+1}return!1}function U0(n){return{type:n}}Qh.register(U5,{error:[y6,[Rn],(n,[i])=>{throw new Ia(i.evaluate(n))}],typeof:[Rn,[Fn],(n,[i])=>ns(Ys(i.evaluate(n)))],"to-rgba":[gu(wr,4),[Gc],(n,[i])=>i.evaluate(n).toArray()],rgb:[Gc,[wr,wr,wr],By],rgba:[Gc,[wr,wr,wr,wr],By],has:{type:Nn,overloads:[[[Rn],(n,[i])=>Ry(i.evaluate(n),n.properties())],[[Rn,Gh],(n,[i,o])=>Ry(i.evaluate(n),o.evaluate(n))]]},get:{type:Fn,overloads:[[[Rn],(n,[i])=>I1(i.evaluate(n),n.properties())],[[Rn,Gh],(n,[i,o])=>I1(i.evaluate(n),o.evaluate(n))]]},"feature-state":[Fn,[Rn],(n,[i])=>I1(i.evaluate(n),n.featureState||{})],properties:[Gh,[],n=>n.properties()],"geometry-type":[Rn,[],n=>n.geometryType()],id:[Fn,[],n=>n.id()],zoom:[wr,[],n=>n.globals.zoom],pitch:[wr,[],n=>n.globals.pitch||0],"distance-from-center":[wr,[],n=>n.distanceFromCenter()],"heatmap-density":[wr,[],n=>n.globals.heatmapDensity||0],"line-progress":[wr,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[wr,[],n=>n.globals.skyRadialProgress||0],accumulated:[Fn,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[wr,U0(wr),(n,i)=>{let o=0;for(const l of i)o+=l.evaluate(n);return o}],"*":[wr,U0(wr),(n,i)=>{let o=1;for(const l of i)o*=l.evaluate(n);return o}],"-":{type:wr,overloads:[[[wr,wr],(n,[i,o])=>i.evaluate(n)-o.evaluate(n)],[[wr],(n,[i])=>-i.evaluate(n)]]},"/":[wr,[wr,wr],(n,[i,o])=>i.evaluate(n)/o.evaluate(n)],"%":[wr,[wr,wr],(n,[i,o])=>i.evaluate(n)%o.evaluate(n)],ln2:[wr,[],()=>Math.LN2],pi:[wr,[],()=>Math.PI],e:[wr,[],()=>Math.E],"^":[wr,[wr,wr],(n,[i,o])=>Math.pow(i.evaluate(n),o.evaluate(n))],sqrt:[wr,[wr],(n,[i])=>Math.sqrt(i.evaluate(n))],log10:[wr,[wr],(n,[i])=>Math.log(i.evaluate(n))/Math.LN10],ln:[wr,[wr],(n,[i])=>Math.log(i.evaluate(n))],log2:[wr,[wr],(n,[i])=>Math.log(i.evaluate(n))/Math.LN2],sin:[wr,[wr],(n,[i])=>Math.sin(i.evaluate(n))],cos:[wr,[wr],(n,[i])=>Math.cos(i.evaluate(n))],tan:[wr,[wr],(n,[i])=>Math.tan(i.evaluate(n))],asin:[wr,[wr],(n,[i])=>Math.asin(i.evaluate(n))],acos:[wr,[wr],(n,[i])=>Math.acos(i.evaluate(n))],atan:[wr,[wr],(n,[i])=>Math.atan(i.evaluate(n))],min:[wr,U0(wr),(n,i)=>Math.min(...i.map(o=>o.evaluate(n)))],max:[wr,U0(wr),(n,i)=>Math.max(...i.map(o=>o.evaluate(n)))],abs:[wr,[wr],(n,[i])=>Math.abs(i.evaluate(n))],round:[wr,[wr],(n,[i])=>{const o=i.evaluate(n);return o<0?-Math.round(-o):Math.round(o)}],floor:[wr,[wr],(n,[i])=>Math.floor(i.evaluate(n))],ceil:[wr,[wr],(n,[i])=>Math.ceil(i.evaluate(n))],"filter-==":[Nn,[Rn,Fn],(n,[i,o])=>n.properties()[i.value]===o.value],"filter-id-==":[Nn,[Fn],(n,[i])=>n.id()===i.value],"filter-type-==":[Nn,[Rn],(n,[i])=>n.geometryType()===i.value],"filter-<":[Nn,[Rn,Fn],(n,[i,o])=>{const l=n.properties()[i.value],p=o.value;return typeof l==typeof p&&l<p}],"filter-id-<":[Nn,[Fn],(n,[i])=>{const o=n.id(),l=i.value;return typeof o==typeof l&&o<l}],"filter->":[Nn,[Rn,Fn],(n,[i,o])=>{const l=n.properties()[i.value],p=o.value;return typeof l==typeof p&&l>p}],"filter-id->":[Nn,[Fn],(n,[i])=>{const o=n.id(),l=i.value;return typeof o==typeof l&&o>l}],"filter-<=":[Nn,[Rn,Fn],(n,[i,o])=>{const l=n.properties()[i.value],p=o.value;return typeof l==typeof p&&l<=p}],"filter-id-<=":[Nn,[Fn],(n,[i])=>{const o=n.id(),l=i.value;return typeof o==typeof l&&o<=l}],"filter->=":[Nn,[Rn,Fn],(n,[i,o])=>{const l=n.properties()[i.value],p=o.value;return typeof l==typeof p&&l>=p}],"filter-id->=":[Nn,[Fn],(n,[i])=>{const o=n.id(),l=i.value;return typeof o==typeof l&&o>=l}],"filter-has":[Nn,[Fn],(n,[i])=>i.value in n.properties()],"filter-has-id":[Nn,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Nn,[gu(Rn)],(n,[i])=>i.value.indexOf(n.geometryType())>=0],"filter-id-in":[Nn,[gu(Fn)],(n,[i])=>i.value.indexOf(n.id())>=0],"filter-in-small":[Nn,[Rn,gu(Fn)],(n,[i,o])=>o.value.indexOf(n.properties()[i.value])>=0],"filter-in-large":[Nn,[Rn,gu(Fn)],(n,[i,o])=>_8(n.properties()[i.value],o.value,0,o.value.length-1)],all:{type:Nn,overloads:[[[Nn,Nn],(n,[i,o])=>i.evaluate(n)&&o.evaluate(n)],[U0(Nn),(n,i)=>{for(const o of i)if(!o.evaluate(n))return!1;return!0}]]},any:{type:Nn,overloads:[[[Nn,Nn],(n,[i,o])=>i.evaluate(n)||o.evaluate(n)],[U0(Nn),(n,i)=>{for(const o of i)if(o.evaluate(n))return!0;return!1}]]},"!":[Nn,[Nn],(n,[i])=>!i.evaluate(n)],"is-supported-script":[Nn,[Rn],(n,[i])=>{const o=n.globals&&n.globals.isSupportedScript;return o?o(i.evaluate(n)):!0}],upcase:[Rn,[Rn],(n,[i])=>i.evaluate(n).toUpperCase()],downcase:[Rn,[Rn],(n,[i])=>i.evaluate(n).toLowerCase()],concat:[Rn,U0(Fn),(n,i)=>i.map(o=>Lf(o.evaluate(n))).join("")],"resolved-locale":[Rn,[_p],(n,[i])=>i.evaluate(n).resolvedLocale()]});var q5=U5;function S2(n){return{result:"success",value:n}}function zh(n){return{result:"error",value:n}}function b8(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function w8(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function V5(n){return!!n.expression&&n.expression.interpolated}function dm(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function pm(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function x8(n){return n}function mm(n,i){const o=i.type==="color",l=n.stops&&typeof n.stops[0][0]=="object",p=l||n.property!==void 0,m=l||!p,b=n.type||(V5(i)?"exponential":"interval");if(o&&(n=_5({},n),n.stops&&(n.stops=n.stops.map(z=>[z[0],Sa.parse(z[1])])),n.default?n.default=Sa.parse(n.default):n.default=Sa.parse(i.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!F5[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let h,E,L;if(b==="exponential")h=Oy;else if(b==="interval")h=A8;else if(b==="categorical"){h=k8,E=Object.create(null);for(const z of n.stops)E[z[0]]=z[1];L=typeof n.stops[0][0]}else if(b==="identity")h=E8;else throw new Error(`Unknown function type "${b}"`);if(l){const z={},U=[];for(let K=0;K<n.stops.length;K++){const J=n.stops[K],se=J[0].zoom;z[se]===void 0&&(z[se]={zoom:se,type:n.type,property:n.property,default:n.default,stops:[]},U.push(se)),z[se].stops.push([J[0].value,J[1]])}const q=[];for(const K of U)q.push([z[K].zoom,mm(z[K],i)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:Hc.interpolationFactor.bind(void 0,B),zoomStops:q.map(K=>K[0]),evaluate({zoom:K},J){return Oy({stops:q,base:n.base},i,K).evaluate(K,J)}}}else if(m){const z=b==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Hc.interpolationFactor.bind(void 0,z),zoomStops:n.stops.map(U=>U[0]),evaluate:({zoom:U})=>h(n,i,U,E,L)}}else return{kind:"source",evaluate(z,U){const q=U&&U.properties?U.properties[n.property]:void 0;return q===void 0?Jf(n.default,i.default):h(n,i,q,E,L)}}}function Jf(n,i,o){if(n!==void 0)return n;if(i!==void 0)return i;if(o!==void 0)return o}function k8(n,i,o,l,p){const m=typeof o===p?l[o]:void 0;return Jf(m,n.default,i.default)}function A8(n,i,o){if(dm(o)!=="number")return Jf(n.default,i.default);const l=n.stops.length;if(l===1||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[l-1][0])return n.stops[l-1][1];const p=Ap(n.stops.map(m=>m[0]),o);return n.stops[p][1]}function Oy(n,i,o){const l=n.base!==void 0?n.base:1;if(dm(o)!=="number")return Jf(n.default,i.default);const p=n.stops.length;if(p===1||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[p-1][0])return n.stops[p-1][1];const m=Ap(n.stops.map(z=>z[0]),o),b=S8(o,l,n.stops[m][0],n.stops[m+1][0]),h=n.stops[m][1],E=n.stops[m+1][1];let L=C5[i.type]||x8;if(n.colorSpace&&n.colorSpace!=="rgb"){const z=F5[n.colorSpace];L=(U,q)=>z.reverse(z.interpolate(z.forward(U),z.forward(q),b))}return typeof h.evaluate=="function"?{evaluate(...z){const U=h.evaluate.apply(void 0,z),q=E.evaluate.apply(void 0,z);if(!(U===void 0||q===void 0))return L(U,q,b)}}:L(h,E,b)}function E8(n,i,o){return i.type==="color"?o=Sa.parse(o):i.type==="formatted"?o=Wu.fromString(o.toString()):i.type==="resolvedImage"?o=Wc.fromString(o.toString()):dm(o)!==i.type&&(i.type!=="enum"||!i.values[o])&&(o=void 0),Jf(o,n.default,i.default)}function S8(n,i,o,l){const p=l-o,m=n-o;return p===0?0:i===1?m/p:(Math.pow(i,m)-1)/(Math.pow(i,p)-1)}class G5{constructor(i,o){this.expression=i,this._warningHistory={},this._evaluator=new w5,this._defaultValue=o?T8(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(i,o,l,p,m,b,h,E){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=p||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(i,o,l,p,m,b,h,E){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=E||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!==L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Ia(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function H5(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in q5}function W5(n,i){const o=new S5(q5,[],i?C8(i):void 0),l=o.parse(n,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?S2(new G5(l,i)):zh(o.errors)}class I2{constructor(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent=i!=="constant"&&!tm(o.expression)}evaluateWithoutErrorHandling(i,o,l,p,m,b){return this._styleExpression.evaluateWithoutErrorHandling(i,o,l,p,m,b)}evaluate(i,o,l,p,m,b){return this._styleExpression.evaluate(i,o,l,p,m,b)}}class C2{constructor(i,o,l,p){this.kind=i,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=i!=="camera"&&!tm(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,o,l,p,m,b){return this._styleExpression.evaluateWithoutErrorHandling(i,o,l,p,m,b)}evaluate(i,o,l,p,m,b){return this._styleExpression.evaluate(i,o,l,p,m,b)}interpolationFactor(i,o,l){return this.interpolationType?Hc.interpolationFactor(this.interpolationType,i,o,l):0}}function Z5(n,i){if(n=W5(n,i),n.result==="error")return n;const o=n.value.expression,l=em(o);if(!l&&!b8(i))return zh([new mc("","data expressions not supported")]);const p=im(o,["zoom","pitch","distance-from-center"]);if(!p&&!w8(i))return zh([new mc("","zoom expressions not supported")]);const m=Hd(o);if(!m&&!p)return zh([new mc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(m instanceof mc)return zh([m]);if(m instanceof Hc&&!V5(i))return zh([new mc("",'"interpolate" expressions cannot be used with this property')]);if(!m)return S2(l?new I2("constant",n.value):new I2("source",n.value));const b=m instanceof Hc?m.interpolation:void 0;return S2(l?new C2("camera",n.value,m.labels,b):new C2("composite",n.value,m.labels,b))}class Ep{constructor(i,o){this._parameters=i,this._specification=o,_5(this,mm(this._parameters,this._specification))}static deserialize(i){return new Ep(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function I8(n,i){if(pm(n))return new Ep(n,i);if(H5(n)){const o=Z5(n,i);if(o.result==="error")throw new Error(o.value.map(l=>`${l.key}: ${l.message}`).join(", "));return o.value}else{let o=n;return typeof n=="string"&&i.type==="color"&&(o=Sa.parse(n)),{kind:"constant",evaluate:()=>o}}}function Hd(n){let i=null;if(n instanceof R5)i=Hd(n.result);else if(n instanceof B5){for(const o of n.args)if(i=Hd(o),i)break}else(n instanceof I5||n instanceof Hc)&&n.input instanceof Qh&&n.input.name==="zoom"&&(i=n);return i instanceof mc||n.eachChild(o=>{const l=Hd(o);l instanceof mc?i=l:!i&&l?i=new mc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&l&&i!==l&&(i=new mc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function C8(n){const i={color:Gc,string:Rn,number:wr,enum:Rn,boolean:Nn,formatted:bp,resolvedImage:Yf};return n.type==="array"?gu(i[n.value]||Fn,n.length):i[n.type]}function T8(n){return n.type==="color"&&(pm(n.default)||Array.isArray(n.default))?new Sa(0,0,0,0):n.type==="color"?Sa.parse(n.default)||null:n.default===void 0?null:n.default}function Vf(n){return typeof n=="object"?["literal",n]:n}function L8(n,i){let o=n.stops;if(!o)return P8(n,i);const l=o&&typeof o[0][0]=="object",p=l||n.property!==void 0,m=l||!p;return o=o.map(b=>!p&&i.tokens&&typeof b[1]=="string"?[b[0],N8(b[1])]:[b[0],Vf(b[1])]),l?M8(n,i,o):m?z8(n,i,o):T2(n,i,o)}function P8(n,i){const o=["get",n.property];if(n.default===void 0)return i.type==="string"?["string",o]:o;if(i.type==="enum")return["match",o,Object.keys(i.values),o,n.default];{const l=[i.type==="color"?"to-color":i.type,o,Vf(n.default)];return i.type==="array"&&l.splice(1,0,i.value,i.length||null),l}}function gm(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function M8(n,i,o){const l={},p={},m=[];for(let h=0;h<o.length;h++){const E=o[h],L=E[0].zoom;l[L]===void 0&&(l[L]={zoom:L,type:n.type,property:n.property,default:n.default},p[L]=[],m.push(L)),p[L].push([E[0].value,E[1]])}if(vm({},i)==="exponential"){const h=[gm(n),["linear"],["zoom"]];for(const E of m){const L=T2(l[E],i,p[E]);Wh(h,E,L,!1)}return h}else{const h=["step",["zoom"]];for(const E of m){const L=T2(l[E],i,p[E]);Wh(h,E,L,!0)}return ym(h),h}}function D8(n,i){if(n!==void 0)return n;if(i!==void 0)return i}function jy(n,i){const o=Vf(D8(n.default,i.default));return o===void 0&&i.type==="resolvedImage"?"":o}function T2(n,i,o){const l=vm(n,i),p=["get",n.property];if(l==="categorical"&&typeof o[0][0]=="boolean"){const m=["case"];for(const b of o)m.push(["==",p,b[0]],b[1]);return m.push(jy(n,i)),m}else if(l==="categorical"){const m=["match",p];for(const b of o)Wh(m,b[0],b[1],!1);return m.push(jy(n,i)),m}else if(l==="interval"){const m=["step",["number",p]];for(const b of o)Wh(m,b[0],b[1],!0);return ym(m),n.default===void 0?m:["case",["==",["typeof",p],"number"],m,Vf(n.default)]}else if(l==="exponential"){const m=n.base!==void 0?n.base:1,b=[gm(n),m===1?["linear"]:["exponential",m],["number",p]];for(const h of o)Wh(b,h[0],h[1],!1);return n.default===void 0?b:["case",["==",["typeof",p],"number"],b,Vf(n.default)]}else throw new Error(`Unknown property function type ${l}`)}function z8(n,i,o,l=["zoom"]){const p=vm(n,i);let m,b=!1;if(p==="interval")m=["step",l],b=!0;else if(p==="exponential"){const h=n.base!==void 0?n.base:1;m=[gm(n),h===1?["linear"]:["exponential",h],l]}else throw new Error(`Unknown zoom function type "${p}"`);for(const h of o)Wh(m,h[0],h[1],b);return ym(m),m}function ym(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Wh(n,i,o,l){n.length>3&&i===n[n.length-2]||(l&&n.length===2||n.push(i),n.push(o))}function vm(n,i){return n.type?n.type:i.expression.interpolated?"exponential":"interval"}function N8(n){const i=["concat"],o=/{([^{}]+)}/g;let l=0;for(let p=o.exec(n);p!==null;p=o.exec(n)){const m=n.slice(l,o.lastIndex-p[0].length);l=o.lastIndex,m.length>0&&i.push(m),i.push(["get",p[1]])}if(i.length===1)return n;if(l<n.length)i.push(n.slice(l));else if(i.length===2)return["to-string",i[1]];return i}function X5(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const i of n.slice(1))if(!X5(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}yp(function(n,i){var o=function(){var l=function(ne,re,ke,Pe){for(ke=ke||{},Pe=ne.length;Pe--;ke[ne[Pe]]=re);return ke},p=[1,12],m=[1,13],b=[1,9],h=[1,10],E=[1,11],L=[1,14],z=[1,15],U=[14,18,22,24],q=[18,22],B=[22,24],K={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(re,ke,Pe,be,pe,ye,me){var tt=ye.length-1;switch(pe){case 1:this.$=new String(re.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(re),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=ye[tt-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=ye[tt-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[ye[tt-2],ye[tt]];break;case 16:this.$={},this.$[ye[tt][0]]=ye[tt][1];break;case 17:this.$=ye[tt-2],ye[tt-2][ye[tt][0]]=ye[tt][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[ye[tt]];break;case 21:this.$=ye[tt-2],ye[tt-2].push(ye[tt]);break}},table:[{3:5,4:p,5:6,6:m,7:3,8:b,9:4,10:h,11:E,12:1,13:2,15:7,16:8,17:L,23:z},{1:[3]},{14:[1,16]},l(U,[2,7]),l(U,[2,8]),l(U,[2,9]),l(U,[2,10]),l(U,[2,11]),l(U,[2,12]),l(U,[2,3]),l(U,[2,4]),l(U,[2,5]),l([14,18,21,22,24],[2,1]),l(U,[2,2]),{3:20,4:p,18:[1,17],19:18,20:19},{3:5,4:p,5:6,6:m,7:3,8:b,9:4,10:h,11:E,13:23,15:7,16:8,17:L,23:z,24:[1,21],25:22},{1:[2,6]},l(U,[2,13]),{18:[1,24],22:[1,25]},l(q,[2,16]),{21:[1,26]},l(U,[2,18]),{22:[1,28],24:[1,27]},l(B,[2,20]),l(U,[2,14]),{3:20,4:p,20:29},{3:5,4:p,5:6,6:m,7:3,8:b,9:4,10:h,11:E,13:30,15:7,16:8,17:L,23:z},l(U,[2,19]),{3:5,4:p,5:6,6:m,7:3,8:b,9:4,10:h,11:E,13:31,15:7,16:8,17:L,23:z},l(q,[2,17]),l(q,[2,15]),l(B,[2,21])],defaultActions:{16:[2,6]},parseError:function(re,ke){if(ke.recoverable)this.trace(re);else throw new Error(re)},parse:function(re){var ke=this,Pe=[0],be=[null],pe=[],ye=this.table,me="",tt=0,nt=0,Se=2,Me=1,Ge=pe.slice.call(arguments,1),Xe=Object.create(this.lexer),_t={yy:{}};for(var pt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pt)&&(_t.yy[pt]=this.yy[pt]);Xe.setInput(re,_t.yy),_t.yy.lexer=Xe,_t.yy.parser=this,typeof Xe.yylloc>"u"&&(Xe.yylloc={});var Gt=Xe.yylloc;pe.push(Gt);var kt=Xe.options&&Xe.options.ranges;typeof _t.yy.parseError=="function"?this.parseError=_t.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Xt(){var si;return si=Xe.lex()||Me,typeof si!="number"&&(si=ke.symbols_[si]||si),si}for(var Mt,qt,ve,it,Re={},bt,Ct,Ot,Ht;;){if(qt=Pe[Pe.length-1],this.defaultActions[qt]?ve=this.defaultActions[qt]:((Mt===null||typeof Mt>"u")&&(Mt=Xt()),ve=ye[qt]&&ye[qt][Mt]),typeof ve>"u"||!ve.length||!ve[0]){var Wt="";Ht=[];for(bt in ye[qt])this.terminals_[bt]&&bt>Se&&Ht.push("'"+this.terminals_[bt]+"'");Xe.showPosition?Wt="Parse error on line "+(tt+1)+`:
`+Xe.showPosition()+`
Expecting `+Ht.join(", ")+", got '"+(this.terminals_[Mt]||Mt)+"'":Wt="Parse error on line "+(tt+1)+": Unexpected "+(Mt==Me?"end of input":"'"+(this.terminals_[Mt]||Mt)+"'"),this.parseError(Wt,{text:Xe.match,token:this.terminals_[Mt]||Mt,line:Xe.yylineno,loc:Gt,expected:Ht})}if(ve[0]instanceof Array&&ve.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qt+", token: "+Mt);switch(ve[0]){case 1:Pe.push(Mt),be.push(Xe.yytext),pe.push(Xe.yylloc),Pe.push(ve[1]),Mt=null,nt=Xe.yyleng,me=Xe.yytext,tt=Xe.yylineno,Gt=Xe.yylloc;break;case 2:if(Ct=this.productions_[ve[1]][1],Re.$=be[be.length-Ct],Re._$={first_line:pe[pe.length-(Ct||1)].first_line,last_line:pe[pe.length-1].last_line,first_column:pe[pe.length-(Ct||1)].first_column,last_column:pe[pe.length-1].last_column},kt&&(Re._$.range=[pe[pe.length-(Ct||1)].range[0],pe[pe.length-1].range[1]]),it=this.performAction.apply(Re,[me,nt,tt,_t.yy,ve[1],be,pe].concat(Ge)),typeof it<"u")return it;Ct&&(Pe=Pe.slice(0,-1*Ct*2),be=be.slice(0,-1*Ct),pe=pe.slice(0,-1*Ct)),Pe.push(this.productions_[ve[1]][0]),be.push(Re.$),pe.push(Re._$),Ot=ye[Pe[Pe.length-2]][Pe[Pe.length-1]],Pe.push(Ot);break;case 3:return!0}}return!0}},J=function(){var ne={EOF:1,parseError:function(ke,Pe){if(this.yy.parser)this.yy.parser.parseError(ke,Pe);else throw new Error(ke)},setInput:function(re,ke){return this.yy=ke||this.yy||{},this._input=re,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var re=this._input[0];this.yytext+=re,this.yyleng++,this.offset++,this.match+=re,this.matched+=re;var ke=re.match(/(?:\r\n?|\n).*/g);return ke?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),re},unput:function(re){var ke=re.length,Pe=re.split(/(?:\r\n?|\n)/g);this._input=re+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ke),this.offset-=ke;var be=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Pe.length-1&&(this.yylineno-=Pe.length-1);var pe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Pe?(Pe.length===be.length?this.yylloc.first_column:0)+be[be.length-Pe.length].length-Pe[0].length:this.yylloc.first_column-ke},this.options.ranges&&(this.yylloc.range=[pe[0],pe[0]+this.yyleng-ke]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(re){this.unput(this.match.slice(re))},pastInput:function(){var re=this.matched.substr(0,this.matched.length-this.match.length);return(re.length>20?"...":"")+re.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var re=this.match;return re.length<20&&(re+=this._input.substr(0,20-re.length)),(re.substr(0,20)+(re.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var re=this.pastInput(),ke=new Array(re.length+1).join("-");return re+this.upcomingInput()+`
`+ke+"^"},test_match:function(re,ke){var Pe,be,pe;if(this.options.backtrack_lexer&&(pe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pe.yylloc.range=this.yylloc.range.slice(0))),be=re[0].match(/(?:\r\n?|\n).*/g),be&&(this.yylineno+=be.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:be?be[be.length-1].length-be[be.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+re[0].length},this.yytext+=re[0],this.match+=re[0],this.matches=re,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(re[0].length),this.matched+=re[0],Pe=this.performAction.call(this,this.yy,this,ke,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Pe)return Pe;if(this._backtrack){for(var ye in pe)this[ye]=pe[ye];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var re,ke,Pe,be;this._more||(this.yytext="",this.match="");for(var pe=this._currentRules(),ye=0;ye<pe.length;ye++)if(Pe=this._input.match(this.rules[pe[ye]]),Pe&&(!ke||Pe[0].length>ke[0].length)){if(ke=Pe,be=ye,this.options.backtrack_lexer){if(re=this.test_match(Pe,pe[ye]),re!==!1)return re;if(this._backtrack){ke=!1;continue}else return!1}else if(!this.options.flex)break}return ke?(re=this.test_match(ke,pe[be]),re!==!1?re:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ke=this.next();return ke||this.lex()},begin:function(ke){this.conditionStack.push(ke)},popState:function(){var ke=this.conditionStack.length-1;return ke>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ke){return ke=this.conditionStack.length-1-Math.abs(ke||0),ke>=0?this.conditionStack[ke]:"INITIAL"},pushState:function(ke){this.begin(ke)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ke,Pe,be,pe){switch(be){case 0:break;case 1:return 6;case 2:return Pe.yytext=Pe.yytext.substr(1,Pe.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return ne}();K.lexer=J;function se(){this.yy={}}return se.prototype=K,K.Parser=se,new se}();typeof h6<"u"&&(i.parser=o,i.Parser=o.Parser,i.parse=function(){return o.parse.apply(o,arguments)})});const F8={StyleExpression:G5,isExpression:H5,isExpressionFilter:X5,createExpression:W5,createPropertyExpression:Z5,normalizePropertyExpression:I8,ZoomConstantExpression:I2,ZoomDependentExpression:C2,StylePropertyFunction:Ep},B8={convertFunction:L8,createFunction:mm,isFunction:pm};function R8(n){var i=n.expr,o=n.layer,l=Math.min(i(o,"paint","circle-radius"),8),p=Math.min(i(o,"paint","circle-stroke-width"),4),m=i(o,"paint","circle-color"),b=i(o,"paint","circle-opacity"),h=i(o,"paint","circle-stroke-color"),E=i(o,"paint","circle-stroke-opacity"),L=l-p/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+i(o,"paint","circle-blur")*L+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:m,opacity:b,r:L}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:E,r:l,"stroke-width":p,stroke:h}}]}}function O8(n){var i=n.expr,o=n.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,n.image)(i(o,"paint","fill-pattern"))+")",backgroundColor:i(o,"paint","fill-color"),opacity:i(o,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function j8(n){var i=n.layer,o=n.expr,l=(0,n.image)(o(i,"paint","line-pattern")),p={stroke:l?"url(#img1)":o(i,"paint","line-color"),strokeWidth:Math.max(2,Math.min(o(i,"paint","line-width"),8)),strokeOpacity:o(i,"paint","line-opacity")},m=p.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:p.strokeWidth,height:p.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-m/2+" "+-m/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:l,x:0,y:0,width:p.strokeWidth,height:p.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:p,stroke:p.stroke,d:"M0 20 L 20 0"}}]}}function U8(n){return function(h){var E=h.image,L=(0,h.expr)(h.layer,"layout","icon-image");if(!L)return null;var z=E(L);return z?{element:"div",attributes:{style:{backgroundImage:"url("+z+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(n)||(p=(o=(i=n).expr)(l=i.layer,"paint","text-color"),m=o(l,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:b="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:o(l,"paint","text-halo-color"),"stroke-width":2*o(l,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:b,fill:"white"}},{element:"path",attributes:{key:"l3",d:b,fill:p,opacity:m}}]});var i,o,l,p,m,b}var q8=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function V8(n){var i,o=n.sprite,l=n.layer,p={circle:R8,symbol:U8,line:j8,fill:O8}[l.type],m=(i=n.zoom,function(b,h,E){var L=function(K){var J=q8.find(function(se){return K.startsWith(se[0])});return J?J[1]||J[0]:null}(E),z=c6[h+"_"+L][E];if(!b[h])return z.default;var U=b[h][E];if(U===void 0)return z.default;if(typeof U=="object"){var q;if(!(q=Array.isArray(U)?F8.createExpression(U).value:B8.createFunction(U,z)).evaluate)return null;var B=q.evaluate({zoom:i},{});return B?B.name||B:null}return U});return p?p({layer:l,expr:m,image:function(b){if(o&&o.json){var h=o.json[b];if(h)return E=o.image,z=(L=h).x,U=L.y,q=L.width,B=L.height,(K=document.createElement("canvas")).width=2*q,K.height=2*B,K.getContext("2d").drawImage(E,2*z,2*U,2*q,2*B,0,0,2*q,2*B),K.toDataURL()}var E,L,z,U,q,B,K;return null}}):null}function G8(n){let i,o=n[0].innerHTML+"";return{c(){i=st("div"),this.h()},l(l){i=at(l,"DIV",{class:!0});var p=ft(i);p.forEach(Ee),this.h()},h(){rt(i,"class","legend svelte-1dizgfa")},m(l,p){vi(l,i,p),i.innerHTML=o},p(l,[p]){p&1&&o!==(o=l[0].innerHTML+"")&&(i.innerHTML=o)},i:ao,o:ao,d(l){l&&Ee(i)}}}function H8(n,i,o){let{map:l}=i,{layer:p}=i,{spriteLoader:m}=i,b=document.createElement("div");const h=async()=>{const E=l.getZoom(),L=V8({zoom:E,layer:p});if(o(0,b.innerText="",b),L){let U,q,B;switch(L.element){case"div":if(L.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(L.attributes.style.backgroundImage)){var z=document.createElement("img");z.src=L.attributes.style.backgroundImage.replace("url(","").replace(")",""),z.alt=p.id,z.style.cssText="height: 24px;",b.appendChild(z)}U=document.createElement("div"),U.style.height="24px",U.style.width="50px",U.style.backgroundColor=L.attributes.style.backgroundColor,U.style.backgroundPosition=L.attributes.style.backgroundPosition,U.style.backgroundSize=L.attributes.style.backgroundSize,U.style.backgroundRepeat=L.attributes.style.backgroundRepeat,U.style.opacity=L.attributes.style.opacity,b.appendChild(U);break;case"svg":if(m&&(B=m.getIconDataUrl(p),B)){const K=document.createElement("img");K.src=B,K.alt=p.id,K.style.cssText="height: 24px;",b.appendChild(K);break}q=document.createElementNS("http://www.w3.org/2000/svg","svg"),q.style.cssText="height: 24px;",q.setAttributeNS(null,"version","1.1"),Object.keys(L.attributes).forEach(K=>{q.setAttribute(K,L.attributes[K]);let J=document.createElementNS("http://www.w3.org/2000/svg","g");L.children.forEach(se=>{var ne=document.createElementNS("http://www.w3.org/2000/svg",se.element);Object.keys(se.attributes).forEach(re=>{ne.setAttributeNS(null,re,se.attributes[re])}),J.appendChild(ne)}),q.appendChild(J)}),b.appendChild(q);break;default:console.log(L.element);return}}else{const U=document.createElementNS("http://www.w3.org/2000/svg","svg"),q=document.createElementNS("http://www.w3.org/2000/svg","path"),B=document.createElementNS("http://www.w3.org/2000/svg","path");U.setAttribute("fill","none"),U.setAttribute("viewBox","0 0 24 24"),U.setAttribute("stroke","black"),U.classList.add("post-icon"),q.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),q.setAttribute("stroke-linecap","round"),q.setAttribute("stroke-linejoin","round"),q.setAttribute("stroke-width","2"),B.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),B.setAttribute("stroke-linecap","round"),B.setAttribute("stroke-linejoin","round"),B.setAttribute("stroke-width","2"),U.appendChild(q),U.appendChild(B),b.appendChild(U)}};return l.on("moveend",h),l.on("zoom",h),n.$$set=E=>{"map"in E&&o(1,l=E.map),"layer"in E&&o(2,p=E.layer),"spriteLoader"in E&&o(3,m=E.spriteLoader)},n.$$.update=()=>{n.$$.dirty&4&&h()},[b,l,p,m]}class W8 extends Xo{constructor(i){super(),Yo(this,i,H8,G8,qo,{map:1,layer:2,spriteLoader:3})}}function Z8(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-eye-slash svelte-1p0eu1v")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function X8(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-eye svelte-1p0eu1v")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function Y8(n){let i,o,l,p,m,b,h,E,L,z=(n[3]&&n[3][n[1].id]?n[3][n[1].id]:n[1].id)+"",U,q,B,K;function J(re,ke){return re[4]?X8:Z8}let se=J(n),ne=se(n);return h=new W8({props:{map:n[0],layer:n[1],spriteLoader:n[2]}}),{c(){i=st("div"),o=st("div"),l=st("button"),p=st("span"),ne.c(),m=Yi(),b=st("div"),ko(h.$$.fragment),E=Yi(),L=st("div"),U=Nr(z),this.h()},l(re){i=at(re,"DIV",{class:!0});var ke=ft(i);o=at(ke,"DIV",{class:!0});var Pe=ft(o);l=at(Pe,"BUTTON",{class:!0});var be=ft(l);p=at(be,"SPAN",{class:!0});var pe=ft(p);ne.l(pe),pe.forEach(Ee),be.forEach(Ee),Pe.forEach(Ee),m=Ji(ke),b=at(ke,"DIV",{class:!0});var ye=ft(b);Ao(h.$$.fragment,ye),ye.forEach(Ee),E=Ji(ke),L=at(ke,"DIV",{class:!0});var me=ft(L);U=Fr(me,z),me.forEach(Ee),ke.forEach(Ee),this.h()},h(){rt(p,"class","icon is-small"),rt(l,"class","button is-text is-narrow"),rt(o,"class","column .is-marginless is-paddingless"),rt(b,"class","column is-narrow .is-marginless is-paddingless"),rt(L,"class","column is-narrow .is-marginless pl-2 has-text-left"),rt(i,"class","columns is-vcentered is-mobile")},m(re,ke){vi(re,i,ke),We(i,o),We(o,l),We(l,p),ne.m(p,null),We(i,m),We(i,b),Eo(h,b,null),We(i,E),We(i,L),We(L,U),q=!0,B||(K=rn(l,"click",n[5]),B=!0)},p(re,[ke]){se!==(se=J(re))&&(ne.d(1),ne=se(re),ne&&(ne.c(),ne.m(p,null)));const Pe={};ke&1&&(Pe.map=re[0]),ke&2&&(Pe.layer=re[1]),ke&4&&(Pe.spriteLoader=re[2]),h.$set(Pe),(!q||ke&10)&&z!==(z=(re[3]&&re[3][re[1].id]?re[3][re[1].id]:re[1].id)+"")&&os(U,z)},i(re){q||(rr(h.$$.fragment,re),q=!0)},o(re){Cr(h.$$.fragment,re),q=!1},d(re){re&&Ee(i),ne.d(),So(h),B=!1,K()}}}function J8(n,i,o){const l=dp();let{map:p}=i,{layer:m}=i,{spriteLoader:b}=i,{relativeLayers:h={}}=i,L=p.getLayer(m.id).visibility!=="none";const z=()=>{const q=L===!0?"visible":"none";p.setLayoutProperty(m.id,"visibility",q),l("visibilityChanged",{layer:m,visibility:q})},U=()=>o(4,L=!L);return n.$$set=q=>{"map"in q&&o(0,p=q.map),"layer"in q&&o(1,m=q.layer),"spriteLoader"in q&&o(2,b=q.spriteLoader),"relativeLayers"in q&&o(3,h=q.relativeLayers)},n.$$.update=()=>{n.$$.dirty&16&&z()},[p,m,b,h,L,U]}class Sp extends Xo{constructor(i){super(),Yo(this,i,J8,Y8,qo,{map:0,layer:1,spriteLoader:2,relativeLayers:3})}}class K8{constructor(i){wo(this,"spriteUrl");wo(this,"sprite");this.spriteUrl=i}async load(){const i=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:i[0],json:i[1]},this.sprite}loadImage(i){let o=!1;const l=new Promise((p,m)=>{const b=new Image;b.crossOrigin="Anonymous",b.onload=()=>{o||p(b)},b.onerror=h=>{o||m(h)},b.src=i});return l.cancel=()=>{o=!0},l}async fetchUrl(i){return(await fetch(i)).json()}getIconDataUrl(i){var l;let o;if(i.layout&&i.layout["icon-image"]){let p=i.layout["icon-image"];if(Array.isArray(p)&&(p=p[p.length-1]),(l=this.sprite)!=null&&l.json){let m;Object.keys(this.sprite.json).forEach(b=>{b===p&&(m=this.sprite.json[b])}),m&&(o=this.extractPartOfImage(this.sprite.image,m))}}return o}extractPartOfImage(i,o){const p=document.createElement("canvas");return p.width=o.width*1,p.height=o.height*1,p.getContext("2d").drawImage(i,o.x*1,o.y*1,o.width*1,o.height*1,0,0,o.width*1,o.height*1),p.toDataURL()}}const Uy=rh({});function qy(n,i,o){const l=n.slice();return l[12]=i[o],l}function Vy(n){let i=n[2],o,l,p=Xy(n);return{c(){p.c(),o=ln()},l(m){p.l(m),o=ln()},m(m,b){p.m(m,b),vi(m,o,b),l=!0},p(m,b){b&4&&qo(i,i=m[2])?(Js(),Cr(p,1,1,ao),Ks(),p=Xy(m),p.c(),rr(p,1),p.m(o.parentNode,o)):p.p(m,b)},i(m){l||(rr(p),l=!0)},o(m){Cr(p),l=!1},d(m){m&&Ee(o),p.d(m)}}}function Q8(n){let i,o,l;return o=new Sp({props:{map:n[1],layer:n[12],spriteLoader:n[5],relativeLayers:n[4]}}),o.$on("visibilityChanged",n[8]),{c(){i=st("a"),ko(o.$$.fragment),this.h()},l(p){i=at(p,"A",{class:!0});var m=ft(i);Ao(o.$$.fragment,m),m.forEach(Ee),this.h()},h(){rt(i,"class","panel-block")},m(p,m){vi(p,i,m),Eo(o,i,null),l=!0},p(p,m){const b={};m&2&&(b.map=p[1]),m&128&&(b.layer=p[12]),m&32&&(b.spriteLoader=p[5]),m&16&&(b.relativeLayers=p[4]),o.$set(b)},i(p){l||(rr(o.$$.fragment,p),l=!0)},o(p){Cr(o.$$.fragment,p),l=!1},d(p){p&&Ee(i),So(o)}}}function $8(n){let i,o,l=n[4][n[12].id]&&Gy(n);return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p(p,m){p[4][p[12].id]?l?(l.p(p,m),m&144&&rr(l,1)):(l=Gy(p),l.c(),rr(l,1),l.m(i.parentNode,i)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function ek(n){let i,o,l=n[6][n[12].id]&&Hy(n);return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p(p,m){p[6][p[12].id]?l?(l.p(p,m),m&192&&rr(l,1)):(l=Hy(p),l.c(),rr(l,1),l.m(i.parentNode,i)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function Gy(n){let i,o,l;return o=new Sp({props:{map:n[1],layer:n[12],spriteLoader:n[5],relativeLayers:n[4]}}),o.$on("visibilityChanged",n[8]),{c(){i=st("a"),ko(o.$$.fragment),this.h()},l(p){i=at(p,"A",{class:!0});var m=ft(i);Ao(o.$$.fragment,m),m.forEach(Ee),this.h()},h(){rt(i,"class","panel-block")},m(p,m){vi(p,i,m),Eo(o,i,null),l=!0},p(p,m){const b={};m&2&&(b.map=p[1]),m&128&&(b.layer=p[12]),m&32&&(b.spriteLoader=p[5]),m&16&&(b.relativeLayers=p[4]),o.$set(b)},i(p){l||(rr(o.$$.fragment,p),l=!0)},o(p){Cr(o.$$.fragment,p),l=!1},d(p){p&&Ee(i),So(o)}}}function Hy(n){let i,o,l,p;const m=[ik,tk],b=[];function h(E,L){return E[0]===!0?0:1}return i=h(n),o=b[i]=m[i](n),{c(){o.c(),l=ln()},l(E){o.l(E),l=ln()},m(E,L){b[i].m(E,L),vi(E,l,L),p=!0},p(E,L){let z=i;i=h(E),i===z?b[i].p(E,L):(Js(),Cr(b[z],1,1,()=>{b[z]=null}),Ks(),o=b[i],o?o.p(E,L):(o=b[i]=m[i](E),o.c()),rr(o,1),o.m(l.parentNode,l))},i(E){p||(rr(o),p=!0)},o(E){Cr(o),p=!1},d(E){b[i].d(E),E&&Ee(l)}}}function tk(n){let i,o,l;return o=new Sp({props:{map:n[1],layer:n[12],spriteLoader:n[5],relativeLayers:n[4]}}),o.$on("visibilityChanged",n[8]),{c(){i=st("a"),ko(o.$$.fragment),this.h()},l(p){i=at(p,"A",{class:!0});var m=ft(i);Ao(o.$$.fragment,m),m.forEach(Ee),this.h()},h(){rt(i,"class","panel-block")},m(p,m){vi(p,i,m),Eo(o,i,null),l=!0},p(p,m){const b={};m&2&&(b.map=p[1]),m&128&&(b.layer=p[12]),m&32&&(b.spriteLoader=p[5]),m&16&&(b.relativeLayers=p[4]),o.$set(b)},i(p){l||(rr(o.$$.fragment,p),l=!0)},o(p){Cr(o.$$.fragment,p),l=!1},d(p){p&&Ee(i),So(o)}}}function ik(n){let i,o,l=n[4][n[12].id]&&Wy(n);return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p(p,m){p[4][p[12].id]?l?(l.p(p,m),m&144&&rr(l,1)):(l=Wy(p),l.c(),rr(l,1),l.m(i.parentNode,i)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function Wy(n){let i,o,l;return o=new Sp({props:{map:n[1],layer:n[12],spriteLoader:n[5],relativeLayers:n[4]}}),o.$on("visibilityChanged",n[8]),{c(){i=st("a"),ko(o.$$.fragment),this.h()},l(p){i=at(p,"A",{class:!0});var m=ft(i);Ao(o.$$.fragment,m),m.forEach(Ee),this.h()},h(){rt(i,"class","panel-block")},m(p,m){vi(p,i,m),Eo(o,i,null),l=!0},p(p,m){const b={};m&2&&(b.map=p[1]),m&128&&(b.layer=p[12]),m&32&&(b.spriteLoader=p[5]),m&16&&(b.relativeLayers=p[4]),o.$set(b)},i(p){l||(rr(o.$$.fragment,p),l=!0)},o(p){Cr(o.$$.fragment,p),l=!1},d(p){p&&Ee(i),So(o)}}}function Zy(n){let i,o,l,p;const m=[ek,$8,Q8],b=[];function h(E,L){return E[3]===!0?0:E[0]===!0?1:2}return i=h(n),o=b[i]=m[i](n),{c(){o.c(),l=ln()},l(E){o.l(E),l=ln()},m(E,L){b[i].m(E,L),vi(E,l,L),p=!0},p(E,L){let z=i;i=h(E),i===z?b[i].p(E,L):(Js(),Cr(b[z],1,1,()=>{b[z]=null}),Ks(),o=b[i],o?o.p(E,L):(o=b[i]=m[i](E),o.c()),rr(o,1),o.m(l.parentNode,l))},i(E){p||(rr(o),p=!0)},o(E){Cr(o),p=!1},d(E){b[i].d(E),E&&Ee(l)}}}function Xy(n){let i,o,l=n[7],p=[];for(let b=0;b<l.length;b+=1)p[b]=Zy(qy(n,l,b));const m=b=>Cr(p[b],1,1,()=>{p[b]=null});return{c(){for(let b=0;b<p.length;b+=1)p[b].c();i=ln()},l(b){for(let h=0;h<p.length;h+=1)p[h].l(b);i=ln()},m(b,h){for(let E=0;E<p.length;E+=1)p[E].m(b,h);vi(b,i,h),o=!0},p(b,h){if(h&507){l=b[7];let E;for(E=0;E<l.length;E+=1){const L=qy(b,l,E);p[E]?(p[E].p(L,h),rr(p[E],1)):(p[E]=Zy(L),p[E].c(),rr(p[E],1),p[E].m(i.parentNode,i))}for(Js(),E=l.length;E<p.length;E+=1)m(E);Ks()}},i(b){if(!o){for(let h=0;h<l.length;h+=1)rr(p[h]);o=!0}},o(b){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)Cr(p[h]);o=!1},d(b){bs(p,b),b&&Ee(i)}}}function rk(n){let i,o,l=n[5]&&Vy(n);return{c(){i=st("nav"),l&&l.c(),this.h()},l(p){i=at(p,"NAV",{class:!0});var m=ft(i);l&&l.l(m),m.forEach(Ee),this.h()},h(){rt(i,"class","panel")},m(p,m){vi(p,i,m),l&&l.m(i,null),o=!0},p(p,[m]){p[5]?l?(l.p(p,m),m&32&&rr(l,1)):(l=Vy(p),l.c(),rr(l,1),l.m(i,null)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){p&&Ee(i),l&&l.d()}}}function nk(n,i,o){let l,p;ul(n,Uy,J=>o(9,p=J));let{map:m}=i,{style:b}=i,{onlyRendered:h=!0}=i,{onlyRelative:E=!0}=i,L,z={},{relativeLayers:U={}}=i;const q=async()=>{if(!m||!b)return;const J=b.sprite;!J||(o(5,L=new K8(J)),await L.load(),B())},B=()=>{!m||!b||setTimeout(()=>{if(o(6,z={}),h===!0){Object.keys(p).forEach(se=>{o(6,z[se]=p[se],z)});const J=m.queryRenderedFeatures();l.forEach(se=>{J.filter(re=>re.layer.id===se.id).length>0&&o(6,z[se.id]=se,z)})}else l.forEach(J=>{o(6,z[J.id]=J,z)})},500)},K=J=>{const se=J.detail.layer;J.detail.visibility==="none"?Cf(Uy,p[se.id]=se,p):p[se.id]&&delete p[se.id]};return n.$$set=J=>{"map"in J&&o(1,m=J.map),"style"in J&&o(2,b=J.style),"onlyRendered"in J&&o(3,h=J.onlyRendered),"onlyRelative"in J&&o(0,E=J.onlyRelative),"relativeLayers"in J&&o(4,U=J.relativeLayers)},n.$$.update=()=>{n.$$.dirty&4&&o(7,l=b?b.layers:[]),n.$$.dirty&18&&(m&&(m.on("moveend",B),m.on("styledata",B),m.on("load",()=>{B()})),U&&Object.keys(U).length===0&&o(0,E=!1)),n.$$.dirty&8&&B(),n.$$.dirty&1&&B(),n.$$.dirty&4&&q()},[E,m,b,h,U,L,z,l,K]}class ok extends Xo{constructor(i){super(),Yo(this,i,nk,rk,qo,{map:1,style:2,onlyRendered:3,onlyRelative:0,relativeLayers:4})}}function Yy(n){let i,o,l,p,m,b,h;return{c(){i=st("li"),o=st("a"),l=st("span"),p=Nr("Show related"),this.h()},l(E){i=at(E,"LI",{class:!0});var L=ft(i);o=at(L,"A",{});var z=ft(o);l=at(z,"SPAN",{});var U=ft(l);p=Fr(U,"Show related"),U.forEach(Ee),z.forEach(Ee),L.forEach(Ee),this.h()},h(){rt(i,"class",m=n[1]?"is-active":"")},m(E,L){vi(E,i,L),We(i,o),We(o,l),We(l,p),b||(h=rn(i,"click",n[4]),b=!0)},p(E,L){L&2&&m!==(m=E[1]?"is-active":"")&&rt(i,"class",m)},d(E){E&&Ee(i),b=!1,h()}}}function sk(n){let i,o,l,p,m,b,h,E,L=n[2]&&Object.keys(n[2]).length>0,z,U,q=L&&Yy(n);return{c(){i=st("div"),o=st("ul"),l=st("li"),p=st("a"),m=st("span"),b=Nr("Show rendered"),E=Yi(),q&&q.c(),this.h()},l(B){i=at(B,"DIV",{class:!0});var K=ft(i);o=at(K,"UL",{});var J=ft(o);l=at(J,"LI",{class:!0});var se=ft(l);p=at(se,"A",{});var ne=ft(p);m=at(ne,"SPAN",{});var re=ft(m);b=Fr(re,"Show rendered"),re.forEach(Ee),ne.forEach(Ee),se.forEach(Ee),E=Ji(J),q&&q.l(J),J.forEach(Ee),K.forEach(Ee),this.h()},h(){rt(l,"class",h=n[0]?"is-active":""),rt(i,"class","tabs is-toggle is-fullwidth m-2r")},m(B,K){vi(B,i,K),We(i,o),We(o,l),We(l,p),We(p,m),We(m,b),We(o,E),q&&q.m(o,null),z||(U=rn(l,"click",n[3]),z=!0)},p(B,[K]){K&1&&h!==(h=B[0]?"is-active":"")&&rt(l,"class",h),K&4&&(L=B[2]&&Object.keys(B[2]).length>0),L?q?q.p(B,K):(q=Yy(B),q.c(),q.m(o,null)):q&&(q.d(1),q=null)},i:ao,o:ao,d(B){B&&Ee(i),q&&q.d(),z=!1,U()}}}function ak(n,i,o){let{onlyRendered:l=!0}=i,{onlyRelative:p=!0}=i,{relativeLayers:m={}}=i;const b=()=>o(0,l=!l),h=()=>o(1,p=!p);return n.$$set=E=>{"onlyRendered"in E&&o(0,l=E.onlyRendered),"onlyRelative"in E&&o(1,p=E.onlyRelative),"relativeLayers"in E&&o(2,m=E.relativeLayers)},[l,p,m,b,h]}class lk extends Xo{constructor(i){super(),Yo(this,i,ak,sk,qo,{onlyRendered:0,onlyRelative:1,relativeLayers:2})}}function Jy(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J;l=new mx({}),l.$on("change",n[6]);function se(ye){n[7](ye)}function ne(ye){n[8](ye)}let re={relativeLayers:n[5]};n[3]!==void 0&&(re.onlyRendered=n[3]),n[4]!==void 0&&(re.onlyRelative=n[4]),b=new lk({props:re}),po.push(()=>Ts(b,"onlyRendered",se)),po.push(()=>Ts(b,"onlyRelative",ne));function ke(ye){n[9](ye)}function Pe(ye){n[10](ye)}function be(ye){n[11](ye)}let pe={style:n[2],relativeLayers:n[5]};return n[1]!==void 0&&(pe.map=n[1]),n[3]!==void 0&&(pe.onlyRendered=n[3]),n[4]!==void 0&&(pe.onlyRelative=n[4]),U=new ok({props:pe}),po.push(()=>Ts(U,"map",ke)),po.push(()=>Ts(U,"onlyRendered",Pe)),po.push(()=>Ts(U,"onlyRelative",be)),{c(){i=st("nav"),o=st("div"),ko(l.$$.fragment),p=Yi(),m=st("div"),ko(b.$$.fragment),L=Yi(),z=st("div"),ko(U.$$.fragment),this.h()},l(ye){i=at(ye,"NAV",{class:!0});var me=ft(i);o=at(me,"DIV",{class:!0});var tt=ft(o);Ao(l.$$.fragment,tt),tt.forEach(Ee),p=Ji(me),m=at(me,"DIV",{class:!0});var nt=ft(m);Ao(b.$$.fragment,nt),nt.forEach(Ee),L=Ji(me),z=at(me,"DIV",{class:!0});var Se=ft(z);Ao(U.$$.fragment,Se),Se.forEach(Ee),me.forEach(Ee),this.h()},h(){rt(o,"class","panel-header m-1 p-0"),rt(m,"class","legend-header m-1"),rt(z,"class","legend-content svelte-x3dpit"),rt(i,"class","panel")},m(ye,me){vi(ye,i,me),We(i,o),Eo(l,o,null),We(i,p),We(i,m),Eo(b,m,null),We(i,L),We(i,z),Eo(U,z,null),J=!0},p(ye,me){const tt={};me&32&&(tt.relativeLayers=ye[5]),!h&&me&8&&(h=!0,tt.onlyRendered=ye[3],Ls(()=>h=!1)),!E&&me&16&&(E=!0,tt.onlyRelative=ye[4],Ls(()=>E=!1)),b.$set(tt);const nt={};me&4&&(nt.style=ye[2]),me&32&&(nt.relativeLayers=ye[5]),!q&&me&2&&(q=!0,nt.map=ye[1],Ls(()=>q=!1)),!B&&me&8&&(B=!0,nt.onlyRendered=ye[3],Ls(()=>B=!1)),!K&&me&16&&(K=!0,nt.onlyRelative=ye[4],Ls(()=>K=!1)),U.$set(nt)},i(ye){J||(rr(l.$$.fragment,ye),rr(b.$$.fragment,ye),rr(U.$$.fragment,ye),J=!0)},o(ye){Cr(l.$$.fragment,ye),Cr(b.$$.fragment,ye),Cr(U.$$.fragment,ye),J=!1},d(ye){ye&&Ee(i),So(l),So(b),So(U)}}}function uk(n){let i,o,l=n[0]&&Jy(n);return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p(p,[m]){p[0]?l?(l.p(p,m),m&1&&rr(l,1)):(l=Jy(p),l.c(),rr(l,1),l.m(i.parentNode,i)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function ck(n,i,o){let l;ul(n,El,J=>o(1,l=J));let p,m=!0,b=!0,h={},{isLayersTabVisible:E=!1}=i;sn.legend&&sn.legend.targets&&(h=sn.legend.targets);const L=()=>{!l||o(2,p=l.getStyle())};function z(J){m=J,o(3,m)}function U(J){b=J,o(4,b)}function q(J){l=J,El.set(l)}function B(J){m=J,o(3,m)}function K(J){b=J,o(4,b)}return n.$$set=J=>{"isLayersTabVisible"in J&&o(0,E=J.isLayersTabVisible)},n.$$.update=()=>{n.$$.dirty&2&&l&&l.on("load",()=>{o(2,p=l.getStyle())})},[E,l,p,m,b,h,L,z,U,q,B,K]}class hk extends Xo{constructor(i){super(),Yo(this,i,ck,uk,qo,{isLayersTabVisible:0})}}var Y5={exports:{}},_m={exports:{}},J5=function(i,o){return function(){for(var p=new Array(arguments.length),m=0;m<p.length;m++)p[m]=arguments[m];return i.apply(o,p)}},fk=J5,oh=Object.prototype.toString;function bm(n){return oh.call(n)==="[object Array]"}function L2(n){return typeof n>"u"}function dk(n){return n!==null&&!L2(n)&&n.constructor!==null&&!L2(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function pk(n){return oh.call(n)==="[object ArrayBuffer]"}function mk(n){return typeof FormData<"u"&&n instanceof FormData}function gk(n){var i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(n):i=n&&n.buffer&&n.buffer instanceof ArrayBuffer,i}function yk(n){return typeof n=="string"}function vk(n){return typeof n=="number"}function K5(n){return n!==null&&typeof n=="object"}function Wd(n){if(oh.call(n)!=="[object Object]")return!1;var i=Object.getPrototypeOf(n);return i===null||i===Object.prototype}function _k(n){return oh.call(n)==="[object Date]"}function bk(n){return oh.call(n)==="[object File]"}function wk(n){return oh.call(n)==="[object Blob]"}function Q5(n){return oh.call(n)==="[object Function]"}function xk(n){return K5(n)&&Q5(n.pipe)}function kk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}function Ak(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function Ek(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function wm(n,i){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),bm(n))for(var o=0,l=n.length;o<l;o++)i.call(null,n[o],o,n);else for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&i.call(null,n[p],p,n)}function P2(){var n={};function i(p,m){Wd(n[m])&&Wd(p)?n[m]=P2(n[m],p):Wd(p)?n[m]=P2({},p):bm(p)?n[m]=p.slice():n[m]=p}for(var o=0,l=arguments.length;o<l;o++)wm(arguments[o],i);return n}function Sk(n,i,o){return wm(i,function(p,m){o&&typeof p=="function"?n[m]=fk(p,o):n[m]=p}),n}function Ik(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var Ql={isArray:bm,isArrayBuffer:pk,isBuffer:dk,isFormData:mk,isArrayBufferView:gk,isString:yk,isNumber:vk,isObject:K5,isPlainObject:Wd,isUndefined:L2,isDate:_k,isFile:bk,isBlob:wk,isFunction:Q5,isStream:xk,isURLSearchParams:kk,isStandardBrowserEnv:Ek,forEach:wm,merge:P2,extend:Sk,trim:Ak,stripBOM:Ik},Eh=Ql;function Ky(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $5=function(i,o,l){if(!o)return i;var p;if(l)p=l(o);else if(Eh.isURLSearchParams(o))p=o.toString();else{var m=[];Eh.forEach(o,function(E,L){E===null||typeof E>"u"||(Eh.isArray(E)?L=L+"[]":E=[E],Eh.forEach(E,function(U){Eh.isDate(U)?U=U.toISOString():Eh.isObject(U)&&(U=JSON.stringify(U)),m.push(Ky(L)+"="+Ky(U))}))}),p=m.join("&")}if(p){var b=i.indexOf("#");b!==-1&&(i=i.slice(0,b)),i+=(i.indexOf("?")===-1?"?":"&")+p}return i},Ck=Ql;function Ip(){this.handlers=[]}Ip.prototype.use=function(i,o,l){return this.handlers.push({fulfilled:i,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1};Ip.prototype.eject=function(i){this.handlers[i]&&(this.handlers[i]=null)};Ip.prototype.forEach=function(i){Ck.forEach(this.handlers,function(l){l!==null&&i(l)})};var Tk=Ip,Lk=Ql,Pk=function(i,o){Lk.forEach(i,function(p,m){m!==o&&m.toUpperCase()===o.toUpperCase()&&(i[o]=p,delete i[m])})},eb=function(i,o,l,p,m){return i.config=o,l&&(i.code=l),i.request=p,i.response=m,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},i},C1,Qy;function tb(){if(Qy)return C1;Qy=1;var n=eb;return C1=function(o,l,p,m,b){var h=new Error(o);return n(h,l,p,m,b)},C1}var T1,$y;function Mk(){if($y)return T1;$y=1;var n=tb();return T1=function(o,l,p){var m=p.config.validateStatus;!p.status||!m||m(p.status)?o(p):l(n("Request failed with status code "+p.status,p.config,null,p.request,p))},T1}var L1,ev;function Dk(){if(ev)return L1;ev=1;var n=Ql;return L1=n.isStandardBrowserEnv()?function(){return{write:function(l,p,m,b,h,E){var L=[];L.push(l+"="+encodeURIComponent(p)),n.isNumber(m)&&L.push("expires="+new Date(m).toGMTString()),n.isString(b)&&L.push("path="+b),n.isString(h)&&L.push("domain="+h),E===!0&&L.push("secure"),document.cookie=L.join("; ")},read:function(l){var p=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),L1}var P1,tv;function zk(){return tv||(tv=1,P1=function(i){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(i)}),P1}var M1,iv;function Nk(){return iv||(iv=1,M1=function(i,o){return o?i.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):i}),M1}var D1,rv;function Fk(){if(rv)return D1;rv=1;var n=zk(),i=Nk();return D1=function(l,p){return l&&!n(p)?i(l,p):p},D1}var z1,nv;function Bk(){if(nv)return z1;nv=1;var n=Ql,i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return z1=function(l){var p={},m,b,h;return l&&n.forEach(l.split(`
`),function(L){if(h=L.indexOf(":"),m=n.trim(L.substr(0,h)).toLowerCase(),b=n.trim(L.substr(h+1)),m){if(p[m]&&i.indexOf(m)>=0)return;m==="set-cookie"?p[m]=(p[m]?p[m]:[]).concat([b]):p[m]=p[m]?p[m]+", "+b:b}}),p},z1}var N1,ov;function Rk(){if(ov)return N1;ov=1;var n=Ql;return N1=n.isStandardBrowserEnv()?function(){var o=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a"),p;function m(b){var h=b;return o&&(l.setAttribute("href",h),h=l.href),l.setAttribute("href",h),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return p=m(window.location.href),function(h){var E=n.isString(h)?m(h):h;return E.protocol===p.protocol&&E.host===p.host}}():function(){return function(){return!0}}(),N1}var F1,sv;function av(){if(sv)return F1;sv=1;var n=Ql,i=Mk(),o=Dk(),l=$5,p=Fk(),m=Bk(),b=Rk(),h=tb();return F1=function(L){return new Promise(function(U,q){var B=L.data,K=L.headers,J=L.responseType;n.isFormData(B)&&delete K["Content-Type"];var se=new XMLHttpRequest;if(L.auth){var ne=L.auth.username||"",re=L.auth.password?unescape(encodeURIComponent(L.auth.password)):"";K.Authorization="Basic "+btoa(ne+":"+re)}var ke=p(L.baseURL,L.url);se.open(L.method.toUpperCase(),l(ke,L.params,L.paramsSerializer),!0),se.timeout=L.timeout;function Pe(){if(!!se){var pe="getAllResponseHeaders"in se?m(se.getAllResponseHeaders()):null,ye=!J||J==="text"||J==="json"?se.responseText:se.response,me={data:ye,status:se.status,statusText:se.statusText,headers:pe,config:L,request:se};i(U,q,me),se=null}}if("onloadend"in se?se.onloadend=Pe:se.onreadystatechange=function(){!se||se.readyState!==4||se.status===0&&!(se.responseURL&&se.responseURL.indexOf("file:")===0)||setTimeout(Pe)},se.onabort=function(){!se||(q(h("Request aborted",L,"ECONNABORTED",se)),se=null)},se.onerror=function(){q(h("Network Error",L,null,se)),se=null},se.ontimeout=function(){var ye="timeout of "+L.timeout+"ms exceeded";L.timeoutErrorMessage&&(ye=L.timeoutErrorMessage),q(h(ye,L,L.transitional&&L.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",se)),se=null},n.isStandardBrowserEnv()){var be=(L.withCredentials||b(ke))&&L.xsrfCookieName?o.read(L.xsrfCookieName):void 0;be&&(K[L.xsrfHeaderName]=be)}"setRequestHeader"in se&&n.forEach(K,function(ye,me){typeof B>"u"&&me.toLowerCase()==="content-type"?delete K[me]:se.setRequestHeader(me,ye)}),n.isUndefined(L.withCredentials)||(se.withCredentials=!!L.withCredentials),J&&J!=="json"&&(se.responseType=L.responseType),typeof L.onDownloadProgress=="function"&&se.addEventListener("progress",L.onDownloadProgress),typeof L.onUploadProgress=="function"&&se.upload&&se.upload.addEventListener("progress",L.onUploadProgress),L.cancelToken&&L.cancelToken.promise.then(function(ye){!se||(se.abort(),q(ye),se=null)}),B||(B=null),se.send(B)})},F1}var ka=Ql,lv=Pk,Ok=eb,jk={"Content-Type":"application/x-www-form-urlencoded"};function uv(n,i){!ka.isUndefined(n)&&ka.isUndefined(n["Content-Type"])&&(n["Content-Type"]=i)}function Uk(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=av()),n}function qk(n,i,o){if(ka.isString(n))try{return(i||JSON.parse)(n),ka.trim(n)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(n)}var Cp={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Uk(),transformRequest:[function(i,o){return lv(o,"Accept"),lv(o,"Content-Type"),ka.isFormData(i)||ka.isArrayBuffer(i)||ka.isBuffer(i)||ka.isStream(i)||ka.isFile(i)||ka.isBlob(i)?i:ka.isArrayBufferView(i)?i.buffer:ka.isURLSearchParams(i)?(uv(o,"application/x-www-form-urlencoded;charset=utf-8"),i.toString()):ka.isObject(i)||o&&o["Content-Type"]==="application/json"?(uv(o,"application/json"),qk(i)):i}],transformResponse:[function(i){var o=this.transitional,l=o&&o.silentJSONParsing,p=o&&o.forcedJSONParsing,m=!l&&this.responseType==="json";if(m||p&&ka.isString(i)&&i.length)try{return JSON.parse(i)}catch(b){if(m)throw b.name==="SyntaxError"?Ok(b,this,"E_JSON_PARSE"):b}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(i){return i>=200&&i<300}};Cp.headers={common:{Accept:"application/json, text/plain, */*"}};ka.forEach(["delete","get","head"],function(i){Cp.headers[i]={}});ka.forEach(["post","put","patch"],function(i){Cp.headers[i]=ka.merge(jk)});var xm=Cp,Vk=Ql,Gk=xm,Hk=function(i,o,l){var p=this||Gk;return Vk.forEach(l,function(b){i=b.call(p,i,o)}),i},B1,cv;function ib(){return cv||(cv=1,B1=function(i){return!!(i&&i.__CANCEL__)}),B1}var hv=Ql,R1=Hk,Wk=ib(),Zk=xm;function O1(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var Xk=function(i){O1(i),i.headers=i.headers||{},i.data=R1.call(i,i.data,i.headers,i.transformRequest),i.headers=hv.merge(i.headers.common||{},i.headers[i.method]||{},i.headers),hv.forEach(["delete","get","head","post","put","patch","common"],function(p){delete i.headers[p]});var o=i.adapter||Zk.adapter;return o(i).then(function(p){return O1(i),p.data=R1.call(i,p.data,p.headers,i.transformResponse),p},function(p){return Wk(p)||(O1(i),p&&p.response&&(p.response.data=R1.call(i,p.response.data,p.response.headers,i.transformResponse))),Promise.reject(p)})},Ga=Ql,rb=function(i,o){o=o||{};var l={},p=["url","method","data"],m=["headers","auth","proxy","params"],b=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function E(q,B){return Ga.isPlainObject(q)&&Ga.isPlainObject(B)?Ga.merge(q,B):Ga.isPlainObject(B)?Ga.merge({},B):Ga.isArray(B)?B.slice():B}function L(q){Ga.isUndefined(o[q])?Ga.isUndefined(i[q])||(l[q]=E(void 0,i[q])):l[q]=E(i[q],o[q])}Ga.forEach(p,function(B){Ga.isUndefined(o[B])||(l[B]=E(void 0,o[B]))}),Ga.forEach(m,L),Ga.forEach(b,function(B){Ga.isUndefined(o[B])?Ga.isUndefined(i[B])||(l[B]=E(void 0,i[B])):l[B]=E(void 0,o[B])}),Ga.forEach(h,function(B){B in o?l[B]=E(i[B],o[B]):B in i&&(l[B]=E(void 0,i[B]))});var z=p.concat(m).concat(b).concat(h),U=Object.keys(i).concat(Object.keys(o)).filter(function(B){return z.indexOf(B)===-1});return Ga.forEach(U,L),l};const Yk="axios",Jk="0.21.4",Kk="Promise based HTTP client for the browser and node.js",Qk="index.js",$k={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},eA={type:"git",url:"https://github.com/axios/axios.git"},tA=["xhr","http","ajax","promise","node"],iA="Matt Zabriskie",rA="MIT",nA={url:"https://github.com/axios/axios/issues"},oA="https://axios-http.com",sA={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},aA={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},lA="dist/axios.min.js",uA="dist/axios.min.js",cA="./index.d.ts",hA={"follow-redirects":"^1.14.0"},fA=[{path:"./dist/axios.min.js",threshold:"5kB"}],dA={name:Yk,version:Jk,description:Kk,main:Qk,scripts:$k,repository:eA,keywords:tA,author:iA,license:rA,bugs:nA,homepage:oA,devDependencies:sA,browser:aA,jsdelivr:lA,unpkg:uA,typings:cA,dependencies:hA,bundlesize:fA};var nb=dA,km={};["object","boolean","number","function","string","symbol"].forEach(function(n,i){km[n]=function(l){return typeof l===n||"a"+(i<1?"n ":" ")+n}});var fv={},pA=nb.version.split(".");function ob(n,i){for(var o=i?i.split("."):pA,l=n.split("."),p=0;p<3;p++){if(o[p]>l[p])return!0;if(o[p]<l[p])return!1}return!1}km.transitional=function(i,o,l){var p=o&&ob(o);function m(b,h){return"[Axios v"+nb.version+"] Transitional option '"+b+"'"+h+(l?". "+l:"")}return function(b,h,E){if(i===!1)throw new Error(m(h," has been removed in "+o));return p&&!fv[h]&&(fv[h]=!0,console.warn(m(h," has been deprecated since v"+o+" and will be removed in the near future"))),i?i(b,h,E):!0}};function mA(n,i,o){if(typeof n!="object")throw new TypeError("options must be an object");for(var l=Object.keys(n),p=l.length;p-- >0;){var m=l[p],b=i[m];if(b){var h=n[m],E=h===void 0||b(h,m,n);if(E!==!0)throw new TypeError("option "+m+" must be "+E);continue}if(o!==!0)throw Error("Unknown option "+m)}}var gA={isOlderVersion:ob,assertOptions:mA,validators:km},sb=Ql,yA=$5,dv=Tk,pv=Xk,Tp=rb,ab=gA,Sh=ab.validators;function Kf(n){this.defaults=n,this.interceptors={request:new dv,response:new dv}}Kf.prototype.request=function(i){typeof i=="string"?(i=arguments[1]||{},i.url=arguments[0]):i=i||{},i=Tp(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var o=i.transitional;o!==void 0&&ab.assertOptions(o,{silentJSONParsing:Sh.transitional(Sh.boolean,"1.0.0"),forcedJSONParsing:Sh.transitional(Sh.boolean,"1.0.0"),clarifyTimeoutError:Sh.transitional(Sh.boolean,"1.0.0")},!1);var l=[],p=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(i)===!1||(p=p&&q.synchronous,l.unshift(q.fulfilled,q.rejected))});var m=[];this.interceptors.response.forEach(function(q){m.push(q.fulfilled,q.rejected)});var b;if(!p){var h=[pv,void 0];for(Array.prototype.unshift.apply(h,l),h=h.concat(m),b=Promise.resolve(i);h.length;)b=b.then(h.shift(),h.shift());return b}for(var E=i;l.length;){var L=l.shift(),z=l.shift();try{E=L(E)}catch(U){z(U);break}}try{b=pv(E)}catch(U){return Promise.reject(U)}for(;m.length;)b=b.then(m.shift(),m.shift());return b};Kf.prototype.getUri=function(i){return i=Tp(this.defaults,i),yA(i.url,i.params,i.paramsSerializer).replace(/^\?/,"")};sb.forEach(["delete","get","head","options"],function(i){Kf.prototype[i]=function(o,l){return this.request(Tp(l||{},{method:i,url:o,data:(l||{}).data}))}});sb.forEach(["post","put","patch"],function(i){Kf.prototype[i]=function(o,l,p){return this.request(Tp(p||{},{method:i,url:o,data:l}))}});var vA=Kf,j1,mv;function lb(){if(mv)return j1;mv=1;function n(i){this.message=i}return n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,j1=n,j1}var U1,gv;function _A(){if(gv)return U1;gv=1;var n=lb();function i(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var l;this.promise=new Promise(function(b){l=b});var p=this;o(function(b){p.reason||(p.reason=new n(b),l(p.reason))})}return i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var l,p=new i(function(b){l=b});return{token:p,cancel:l}},U1=i,U1}var q1,yv;function bA(){return yv||(yv=1,q1=function(i){return function(l){return i.apply(null,l)}}),q1}var V1,vv;function wA(){return vv||(vv=1,V1=function(i){return typeof i=="object"&&i.isAxiosError===!0}),V1}var _v=Ql,xA=J5,Zd=vA,kA=rb,AA=xm;function ub(n){var i=new Zd(n),o=xA(Zd.prototype.request,i);return _v.extend(o,Zd.prototype,i),_v.extend(o,i),o}var Yu=ub(AA);Yu.Axios=Zd;Yu.create=function(i){return ub(kA(Yu.defaults,i))};Yu.Cancel=lb();Yu.CancelToken=_A();Yu.isCancel=ib();Yu.all=function(i){return Promise.all(i)};Yu.spread=bA();Yu.isAxiosError=wA();_m.exports=Yu;_m.exports.default=Yu;(function(n){n.exports=_m.exports})(Y5);const EA=X4(Y5.exports);var Zc={};(function(n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function o(m,b){return Object.prototype.hasOwnProperty.call(m,b)}n.assign=function(m){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var h=b.shift();if(!!h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var E in h)o(h,E)&&(m[E]=h[E])}}return m},n.shrinkBuf=function(m,b){return m.length===b?m:m.subarray?m.subarray(0,b):(m.length=b,m)};var l={arraySet:function(m,b,h,E,L){if(b.subarray&&m.subarray){m.set(b.subarray(h,h+E),L);return}for(var z=0;z<E;z++)m[L+z]=b[h+z]},flattenChunks:function(m){var b,h,E,L,z,U;for(E=0,b=0,h=m.length;b<h;b++)E+=m[b].length;for(U=new Uint8Array(E),L=0,b=0,h=m.length;b<h;b++)z=m[b],U.set(z,L),L+=z.length;return U}},p={arraySet:function(m,b,h,E,L){for(var z=0;z<E;z++)m[L+z]=b[h+z]},flattenChunks:function(m){return[].concat.apply([],m)}};n.setTyped=function(m){m?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,l)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,p))},n.setTyped(i)})(Zc);var Qf={},kc={},tf={},SA=Zc,IA=4,bv=0,wv=1,CA=2;function rf(n){for(var i=n.length;--i>=0;)n[i]=0}var TA=0,cb=1,LA=2,PA=3,MA=258,Am=29,$f=256,Gf=$f+1+Am,Zh=30,Em=19,hb=2*Gf+1,W0=15,G1=16,DA=7,Sm=256,fb=16,db=17,pb=18,M2=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Xd=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],zA=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],mb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NA=512,qc=new Array((Gf+2)*2);rf(qc);var Mf=new Array(Zh*2);rf(Mf);var Hf=new Array(NA);rf(Hf);var Wf=new Array(MA-PA+1);rf(Wf);var Im=new Array(Am);rf(Im);var hp=new Array(Zh);rf(hp);function H1(n,i,o,l,p){this.static_tree=n,this.extra_bits=i,this.extra_base=o,this.elems=l,this.max_length=p,this.has_stree=n&&n.length}var gb,yb,vb;function W1(n,i){this.dyn_tree=n,this.max_code=0,this.stat_desc=i}function _b(n){return n<256?Hf[n]:Hf[256+(n>>>7)]}function Zf(n,i){n.pending_buf[n.pending++]=i&255,n.pending_buf[n.pending++]=i>>>8&255}function Sl(n,i,o){n.bi_valid>G1-o?(n.bi_buf|=i<<n.bi_valid&65535,Zf(n,n.bi_buf),n.bi_buf=i>>G1-n.bi_valid,n.bi_valid+=o-G1):(n.bi_buf|=i<<n.bi_valid&65535,n.bi_valid+=o)}function gc(n,i,o){Sl(n,o[i*2],o[i*2+1])}function bb(n,i){var o=0;do o|=n&1,n>>>=1,o<<=1;while(--i>0);return o>>>1}function FA(n){n.bi_valid===16?(Zf(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)}function BA(n,i){var o=i.dyn_tree,l=i.max_code,p=i.stat_desc.static_tree,m=i.stat_desc.has_stree,b=i.stat_desc.extra_bits,h=i.stat_desc.extra_base,E=i.stat_desc.max_length,L,z,U,q,B,K,J=0;for(q=0;q<=W0;q++)n.bl_count[q]=0;for(o[n.heap[n.heap_max]*2+1]=0,L=n.heap_max+1;L<hb;L++)z=n.heap[L],q=o[o[z*2+1]*2+1]+1,q>E&&(q=E,J++),o[z*2+1]=q,!(z>l)&&(n.bl_count[q]++,B=0,z>=h&&(B=b[z-h]),K=o[z*2],n.opt_len+=K*(q+B),m&&(n.static_len+=K*(p[z*2+1]+B)));if(J!==0){do{for(q=E-1;n.bl_count[q]===0;)q--;n.bl_count[q]--,n.bl_count[q+1]+=2,n.bl_count[E]--,J-=2}while(J>0);for(q=E;q!==0;q--)for(z=n.bl_count[q];z!==0;)U=n.heap[--L],!(U>l)&&(o[U*2+1]!==q&&(n.opt_len+=(q-o[U*2+1])*o[U*2],o[U*2+1]=q),z--)}}function wb(n,i,o){var l=new Array(W0+1),p=0,m,b;for(m=1;m<=W0;m++)l[m]=p=p+o[m-1]<<1;for(b=0;b<=i;b++){var h=n[b*2+1];h!==0&&(n[b*2]=bb(l[h]++,h))}}function RA(){var n,i,o,l,p,m=new Array(W0+1);for(o=0,l=0;l<Am-1;l++)for(Im[l]=o,n=0;n<1<<M2[l];n++)Wf[o++]=l;for(Wf[o-1]=l,p=0,l=0;l<16;l++)for(hp[l]=p,n=0;n<1<<Xd[l];n++)Hf[p++]=l;for(p>>=7;l<Zh;l++)for(hp[l]=p<<7,n=0;n<1<<Xd[l]-7;n++)Hf[256+p++]=l;for(i=0;i<=W0;i++)m[i]=0;for(n=0;n<=143;)qc[n*2+1]=8,n++,m[8]++;for(;n<=255;)qc[n*2+1]=9,n++,m[9]++;for(;n<=279;)qc[n*2+1]=7,n++,m[7]++;for(;n<=287;)qc[n*2+1]=8,n++,m[8]++;for(wb(qc,Gf+1,m),n=0;n<Zh;n++)Mf[n*2+1]=5,Mf[n*2]=bb(n,5);gb=new H1(qc,M2,$f+1,Gf,W0),yb=new H1(Mf,Xd,0,Zh,W0),vb=new H1(new Array(0),zA,0,Em,DA)}function xb(n){var i;for(i=0;i<Gf;i++)n.dyn_ltree[i*2]=0;for(i=0;i<Zh;i++)n.dyn_dtree[i*2]=0;for(i=0;i<Em;i++)n.bl_tree[i*2]=0;n.dyn_ltree[Sm*2]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function kb(n){n.bi_valid>8?Zf(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function OA(n,i,o,l){kb(n),l&&(Zf(n,o),Zf(n,~o)),SA.arraySet(n.pending_buf,n.window,i,o,n.pending),n.pending+=o}function xv(n,i,o,l){var p=i*2,m=o*2;return n[p]<n[m]||n[p]===n[m]&&l[i]<=l[o]}function Z1(n,i,o){for(var l=n.heap[o],p=o<<1;p<=n.heap_len&&(p<n.heap_len&&xv(i,n.heap[p+1],n.heap[p],n.depth)&&p++,!xv(i,l,n.heap[p],n.depth));)n.heap[o]=n.heap[p],o=p,p<<=1;n.heap[o]=l}function kv(n,i,o){var l,p,m=0,b,h;if(n.last_lit!==0)do l=n.pending_buf[n.d_buf+m*2]<<8|n.pending_buf[n.d_buf+m*2+1],p=n.pending_buf[n.l_buf+m],m++,l===0?gc(n,p,i):(b=Wf[p],gc(n,b+$f+1,i),h=M2[b],h!==0&&(p-=Im[b],Sl(n,p,h)),l--,b=_b(l),gc(n,b,o),h=Xd[b],h!==0&&(l-=hp[b],Sl(n,l,h)));while(m<n.last_lit);gc(n,Sm,i)}function D2(n,i){var o=i.dyn_tree,l=i.stat_desc.static_tree,p=i.stat_desc.has_stree,m=i.stat_desc.elems,b,h,E=-1,L;for(n.heap_len=0,n.heap_max=hb,b=0;b<m;b++)o[b*2]!==0?(n.heap[++n.heap_len]=E=b,n.depth[b]=0):o[b*2+1]=0;for(;n.heap_len<2;)L=n.heap[++n.heap_len]=E<2?++E:0,o[L*2]=1,n.depth[L]=0,n.opt_len--,p&&(n.static_len-=l[L*2+1]);for(i.max_code=E,b=n.heap_len>>1;b>=1;b--)Z1(n,o,b);L=m;do b=n.heap[1],n.heap[1]=n.heap[n.heap_len--],Z1(n,o,1),h=n.heap[1],n.heap[--n.heap_max]=b,n.heap[--n.heap_max]=h,o[L*2]=o[b*2]+o[h*2],n.depth[L]=(n.depth[b]>=n.depth[h]?n.depth[b]:n.depth[h])+1,o[b*2+1]=o[h*2+1]=L,n.heap[1]=L++,Z1(n,o,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],BA(n,i),wb(o,E,n.bl_count)}function Av(n,i,o){var l,p=-1,m,b=i[0*2+1],h=0,E=7,L=4;for(b===0&&(E=138,L=3),i[(o+1)*2+1]=65535,l=0;l<=o;l++)m=b,b=i[(l+1)*2+1],!(++h<E&&m===b)&&(h<L?n.bl_tree[m*2]+=h:m!==0?(m!==p&&n.bl_tree[m*2]++,n.bl_tree[fb*2]++):h<=10?n.bl_tree[db*2]++:n.bl_tree[pb*2]++,h=0,p=m,b===0?(E=138,L=3):m===b?(E=6,L=3):(E=7,L=4))}function Ev(n,i,o){var l,p=-1,m,b=i[0*2+1],h=0,E=7,L=4;for(b===0&&(E=138,L=3),l=0;l<=o;l++)if(m=b,b=i[(l+1)*2+1],!(++h<E&&m===b)){if(h<L)do gc(n,m,n.bl_tree);while(--h!==0);else m!==0?(m!==p&&(gc(n,m,n.bl_tree),h--),gc(n,fb,n.bl_tree),Sl(n,h-3,2)):h<=10?(gc(n,db,n.bl_tree),Sl(n,h-3,3)):(gc(n,pb,n.bl_tree),Sl(n,h-11,7));h=0,p=m,b===0?(E=138,L=3):m===b?(E=6,L=3):(E=7,L=4)}}function jA(n){var i;for(Av(n,n.dyn_ltree,n.l_desc.max_code),Av(n,n.dyn_dtree,n.d_desc.max_code),D2(n,n.bl_desc),i=Em-1;i>=3&&n.bl_tree[mb[i]*2+1]===0;i--);return n.opt_len+=3*(i+1)+5+5+4,i}function UA(n,i,o,l){var p;for(Sl(n,i-257,5),Sl(n,o-1,5),Sl(n,l-4,4),p=0;p<l;p++)Sl(n,n.bl_tree[mb[p]*2+1],3);Ev(n,n.dyn_ltree,i-1),Ev(n,n.dyn_dtree,o-1)}function qA(n){var i=4093624447,o;for(o=0;o<=31;o++,i>>>=1)if(i&1&&n.dyn_ltree[o*2]!==0)return bv;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return wv;for(o=32;o<$f;o++)if(n.dyn_ltree[o*2]!==0)return wv;return bv}var Sv=!1;function VA(n){Sv||(RA(),Sv=!0),n.l_desc=new W1(n.dyn_ltree,gb),n.d_desc=new W1(n.dyn_dtree,yb),n.bl_desc=new W1(n.bl_tree,vb),n.bi_buf=0,n.bi_valid=0,xb(n)}function Ab(n,i,o,l){Sl(n,(TA<<1)+(l?1:0),3),OA(n,i,o,!0)}function GA(n){Sl(n,cb<<1,3),gc(n,Sm,qc),FA(n)}function HA(n,i,o,l){var p,m,b=0;n.level>0?(n.strm.data_type===CA&&(n.strm.data_type=qA(n)),D2(n,n.l_desc),D2(n,n.d_desc),b=jA(n),p=n.opt_len+3+7>>>3,m=n.static_len+3+7>>>3,m<=p&&(p=m)):p=m=o+5,o+4<=p&&i!==-1?Ab(n,i,o,l):n.strategy===IA||m===p?(Sl(n,(cb<<1)+(l?1:0),3),kv(n,qc,Mf)):(Sl(n,(LA<<1)+(l?1:0),3),UA(n,n.l_desc.max_code+1,n.d_desc.max_code+1,b+1),kv(n,n.dyn_ltree,n.dyn_dtree)),xb(n),l&&kb(n)}function WA(n,i,o){return n.pending_buf[n.d_buf+n.last_lit*2]=i>>>8&255,n.pending_buf[n.d_buf+n.last_lit*2+1]=i&255,n.pending_buf[n.l_buf+n.last_lit]=o&255,n.last_lit++,i===0?n.dyn_ltree[o*2]++:(n.matches++,i--,n.dyn_ltree[(Wf[o]+$f+1)*2]++,n.dyn_dtree[_b(i)*2]++),n.last_lit===n.lit_bufsize-1}tf._tr_init=VA;tf._tr_stored_block=Ab;tf._tr_flush_block=HA;tf._tr_tally=WA;tf._tr_align=GA;function ZA(n,i,o,l){for(var p=n&65535|0,m=n>>>16&65535|0,b=0;o!==0;){b=o>2e3?2e3:o,o-=b;do p=p+i[l++]|0,m=m+p|0;while(--b);p%=65521,m%=65521}return p|m<<16|0}var Eb=ZA;function XA(){for(var n,i=[],o=0;o<256;o++){n=o;for(var l=0;l<8;l++)n=n&1?3988292384^n>>>1:n>>>1;i[o]=n}return i}var YA=XA();function JA(n,i,o,l){var p=YA,m=l+o;n^=-1;for(var b=l;b<m;b++)n=n>>>8^p[(n^i[b])&255];return n^-1}var Sb=JA,Cm={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sl=Zc,yu=tf,Ib=Eb,f0=Sb,KA=Cm,sh=0,QA=1,$A=3,w0=4,Iv=5,yc=0,Cv=1,vu=-2,e7=-3,X1=-5,t7=-1,i7=1,Md=2,r7=3,n7=4,o7=0,s7=2,Lp=8,a7=9,l7=15,u7=8,c7=29,h7=256,z2=h7+1+c7,f7=30,d7=19,p7=2*z2+1,m7=15,Kn=3,g0=258,Zu=g0+Kn+1,g7=32,Pp=42,N2=69,Yd=73,Jd=91,Kd=103,Z0=113,If=666,Xs=1,ed=2,J0=3,nf=4,y7=3;function y0(n,i){return n.msg=KA[i],i}function Tv(n){return(n<<1)-(n>4?9:0)}function p0(n){for(var i=n.length;--i>=0;)n[i]=0}function d0(n){var i=n.state,o=i.pending;o>n.avail_out&&(o=n.avail_out),o!==0&&(sl.arraySet(n.output,i.pending_buf,i.pending_out,o,n.next_out),n.next_out+=o,i.pending_out+=o,n.total_out+=o,n.avail_out-=o,i.pending-=o,i.pending===0&&(i.pending_out=0))}function Ea(n,i){yu._tr_flush_block(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,i),n.block_start=n.strstart,d0(n.strm)}function co(n,i){n.pending_buf[n.pending++]=i}function xf(n,i){n.pending_buf[n.pending++]=i>>>8&255,n.pending_buf[n.pending++]=i&255}function v7(n,i,o,l){var p=n.avail_in;return p>l&&(p=l),p===0?0:(n.avail_in-=p,sl.arraySet(i,n.input,n.next_in,p,o),n.state.wrap===1?n.adler=Ib(n.adler,i,p,o):n.state.wrap===2&&(n.adler=f0(n.adler,i,p,o)),n.next_in+=p,n.total_in+=p,p)}function Cb(n,i){var o=n.max_chain_length,l=n.strstart,p,m,b=n.prev_length,h=n.nice_match,E=n.strstart>n.w_size-Zu?n.strstart-(n.w_size-Zu):0,L=n.window,z=n.w_mask,U=n.prev,q=n.strstart+g0,B=L[l+b-1],K=L[l+b];n.prev_length>=n.good_match&&(o>>=2),h>n.lookahead&&(h=n.lookahead);do if(p=i,!(L[p+b]!==K||L[p+b-1]!==B||L[p]!==L[l]||L[++p]!==L[l+1])){l+=2,p++;do;while(L[++l]===L[++p]&&L[++l]===L[++p]&&L[++l]===L[++p]&&L[++l]===L[++p]&&L[++l]===L[++p]&&L[++l]===L[++p]&&L[++l]===L[++p]&&L[++l]===L[++p]&&l<q);if(m=g0-(q-l),l=q-g0,m>b){if(n.match_start=i,b=m,m>=h)break;B=L[l+b-1],K=L[l+b]}}while((i=U[i&z])>E&&--o!==0);return b<=n.lookahead?b:n.lookahead}function K0(n){var i=n.w_size,o,l,p,m,b;do{if(m=n.window_size-n.lookahead-n.strstart,n.strstart>=i+(i-Zu)){sl.arraySet(n.window,n.window,i,i,0),n.match_start-=i,n.strstart-=i,n.block_start-=i,l=n.hash_size,o=l;do p=n.head[--o],n.head[o]=p>=i?p-i:0;while(--l);l=i,o=l;do p=n.prev[--o],n.prev[o]=p>=i?p-i:0;while(--l);m+=i}if(n.strm.avail_in===0)break;if(l=v7(n.strm,n.window,n.strstart+n.lookahead,m),n.lookahead+=l,n.lookahead+n.insert>=Kn)for(b=n.strstart-n.insert,n.ins_h=n.window[b],n.ins_h=(n.ins_h<<n.hash_shift^n.window[b+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[b+Kn-1])&n.hash_mask,n.prev[b&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=b,b++,n.insert--,!(n.lookahead+n.insert<Kn)););}while(n.lookahead<Zu&&n.strm.avail_in!==0)}function _7(n,i){var o=65535;for(o>n.pending_buf_size-5&&(o=n.pending_buf_size-5);;){if(n.lookahead<=1){if(K0(n),n.lookahead===0&&i===sh)return Xs;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var l=n.block_start+o;if((n.strstart===0||n.strstart>=l)&&(n.lookahead=n.strstart-l,n.strstart=l,Ea(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-Zu&&(Ea(n,!1),n.strm.avail_out===0))return Xs}return n.insert=0,i===w0?(Ea(n,!0),n.strm.avail_out===0?J0:nf):(n.strstart>n.block_start&&(Ea(n,!1),n.strm.avail_out===0),Xs)}function Y1(n,i){for(var o,l;;){if(n.lookahead<Zu){if(K0(n),n.lookahead<Zu&&i===sh)return Xs;if(n.lookahead===0)break}if(o=0,n.lookahead>=Kn&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+Kn-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),o!==0&&n.strstart-o<=n.w_size-Zu&&(n.match_length=Cb(n,o)),n.match_length>=Kn)if(l=yu._tr_tally(n,n.strstart-n.match_start,n.match_length-Kn),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=Kn){n.match_length--;do n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+Kn-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else l=yu._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(l&&(Ea(n,!1),n.strm.avail_out===0))return Xs}return n.insert=n.strstart<Kn-1?n.strstart:Kn-1,i===w0?(Ea(n,!0),n.strm.avail_out===0?J0:nf):n.last_lit&&(Ea(n,!1),n.strm.avail_out===0)?Xs:ed}function Ih(n,i){for(var o,l,p;;){if(n.lookahead<Zu){if(K0(n),n.lookahead<Zu&&i===sh)return Xs;if(n.lookahead===0)break}if(o=0,n.lookahead>=Kn&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+Kn-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=Kn-1,o!==0&&n.prev_length<n.max_lazy_match&&n.strstart-o<=n.w_size-Zu&&(n.match_length=Cb(n,o),n.match_length<=5&&(n.strategy===i7||n.match_length===Kn&&n.strstart-n.match_start>4096)&&(n.match_length=Kn-1)),n.prev_length>=Kn&&n.match_length<=n.prev_length){p=n.strstart+n.lookahead-Kn,l=yu._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-Kn),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=p&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+Kn-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=Kn-1,n.strstart++,l&&(Ea(n,!1),n.strm.avail_out===0))return Xs}else if(n.match_available){if(l=yu._tr_tally(n,0,n.window[n.strstart-1]),l&&Ea(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Xs}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(l=yu._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<Kn-1?n.strstart:Kn-1,i===w0?(Ea(n,!0),n.strm.avail_out===0?J0:nf):n.last_lit&&(Ea(n,!1),n.strm.avail_out===0)?Xs:ed}function b7(n,i){for(var o,l,p,m,b=n.window;;){if(n.lookahead<=g0){if(K0(n),n.lookahead<=g0&&i===sh)return Xs;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=Kn&&n.strstart>0&&(p=n.strstart-1,l=b[p],l===b[++p]&&l===b[++p]&&l===b[++p])){m=n.strstart+g0;do;while(l===b[++p]&&l===b[++p]&&l===b[++p]&&l===b[++p]&&l===b[++p]&&l===b[++p]&&l===b[++p]&&l===b[++p]&&p<m);n.match_length=g0-(m-p),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=Kn?(o=yu._tr_tally(n,1,n.match_length-Kn),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(o=yu._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),o&&(Ea(n,!1),n.strm.avail_out===0))return Xs}return n.insert=0,i===w0?(Ea(n,!0),n.strm.avail_out===0?J0:nf):n.last_lit&&(Ea(n,!1),n.strm.avail_out===0)?Xs:ed}function w7(n,i){for(var o;;){if(n.lookahead===0&&(K0(n),n.lookahead===0)){if(i===sh)return Xs;break}if(n.match_length=0,o=yu._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,o&&(Ea(n,!1),n.strm.avail_out===0))return Xs}return n.insert=0,i===w0?(Ea(n,!0),n.strm.avail_out===0?J0:nf):n.last_lit&&(Ea(n,!1),n.strm.avail_out===0)?Xs:ed}function fc(n,i,o,l,p){this.good_length=n,this.max_lazy=i,this.nice_length=o,this.max_chain=l,this.func=p}var Oh;Oh=[new fc(0,0,0,0,_7),new fc(4,4,8,4,Y1),new fc(4,5,16,8,Y1),new fc(4,6,32,32,Y1),new fc(4,4,16,16,Ih),new fc(8,16,32,32,Ih),new fc(8,16,128,128,Ih),new fc(8,32,128,256,Ih),new fc(32,128,258,1024,Ih),new fc(32,258,258,4096,Ih)];function x7(n){n.window_size=2*n.w_size,p0(n.head),n.max_lazy_match=Oh[n.level].max_lazy,n.good_match=Oh[n.level].good_length,n.nice_match=Oh[n.level].nice_length,n.max_chain_length=Oh[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=Kn-1,n.match_available=0,n.ins_h=0}function k7(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Lp,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new sl.Buf16(p7*2),this.dyn_dtree=new sl.Buf16((2*f7+1)*2),this.bl_tree=new sl.Buf16((2*d7+1)*2),p0(this.dyn_ltree),p0(this.dyn_dtree),p0(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new sl.Buf16(m7+1),this.heap=new sl.Buf16(2*z2+1),p0(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new sl.Buf16(2*z2+1),p0(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Tb(n){var i;return!n||!n.state?y0(n,vu):(n.total_in=n.total_out=0,n.data_type=s7,i=n.state,i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap?Pp:Z0,n.adler=i.wrap===2?0:1,i.last_flush=sh,yu._tr_init(i),yc)}function Lb(n){var i=Tb(n);return i===yc&&x7(n.state),i}function A7(n,i){return!n||!n.state||n.state.wrap!==2?vu:(n.state.gzhead=i,yc)}function Pb(n,i,o,l,p,m){if(!n)return vu;var b=1;if(i===t7&&(i=6),l<0?(b=0,l=-l):l>15&&(b=2,l-=16),p<1||p>a7||o!==Lp||l<8||l>15||i<0||i>9||m<0||m>n7)return y0(n,vu);l===8&&(l=9);var h=new k7;return n.state=h,h.strm=n,h.wrap=b,h.gzhead=null,h.w_bits=l,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=p+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+Kn-1)/Kn),h.window=new sl.Buf8(h.w_size*2),h.head=new sl.Buf16(h.hash_size),h.prev=new sl.Buf16(h.w_size),h.lit_bufsize=1<<p+6,h.pending_buf_size=h.lit_bufsize*4,h.pending_buf=new sl.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=(1+2)*h.lit_bufsize,h.level=i,h.strategy=m,h.method=o,Lb(n)}function E7(n,i){return Pb(n,i,Lp,l7,u7,o7)}function S7(n,i){var o,l,p,m;if(!n||!n.state||i>Iv||i<0)return n?y0(n,vu):vu;if(l=n.state,!n.output||!n.input&&n.avail_in!==0||l.status===If&&i!==w0)return y0(n,n.avail_out===0?X1:vu);if(l.strm=n,o=l.last_flush,l.last_flush=i,l.status===Pp)if(l.wrap===2)n.adler=0,co(l,31),co(l,139),co(l,8),l.gzhead?(co(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),co(l,l.gzhead.time&255),co(l,l.gzhead.time>>8&255),co(l,l.gzhead.time>>16&255),co(l,l.gzhead.time>>24&255),co(l,l.level===9?2:l.strategy>=Md||l.level<2?4:0),co(l,l.gzhead.os&255),l.gzhead.extra&&l.gzhead.extra.length&&(co(l,l.gzhead.extra.length&255),co(l,l.gzhead.extra.length>>8&255)),l.gzhead.hcrc&&(n.adler=f0(n.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=N2):(co(l,0),co(l,0),co(l,0),co(l,0),co(l,0),co(l,l.level===9?2:l.strategy>=Md||l.level<2?4:0),co(l,y7),l.status=Z0);else{var b=Lp+(l.w_bits-8<<4)<<8,h=-1;l.strategy>=Md||l.level<2?h=0:l.level<6?h=1:l.level===6?h=2:h=3,b|=h<<6,l.strstart!==0&&(b|=g7),b+=31-b%31,l.status=Z0,xf(l,b),l.strstart!==0&&(xf(l,n.adler>>>16),xf(l,n.adler&65535)),n.adler=1}if(l.status===N2)if(l.gzhead.extra){for(p=l.pending;l.gzindex<(l.gzhead.extra.length&65535)&&!(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>p&&(n.adler=f0(n.adler,l.pending_buf,l.pending-p,p)),d0(n),p=l.pending,l.pending===l.pending_buf_size));)co(l,l.gzhead.extra[l.gzindex]&255),l.gzindex++;l.gzhead.hcrc&&l.pending>p&&(n.adler=f0(n.adler,l.pending_buf,l.pending-p,p)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=Yd)}else l.status=Yd;if(l.status===Yd)if(l.gzhead.name){p=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>p&&(n.adler=f0(n.adler,l.pending_buf,l.pending-p,p)),d0(n),p=l.pending,l.pending===l.pending_buf_size)){m=1;break}l.gzindex<l.gzhead.name.length?m=l.gzhead.name.charCodeAt(l.gzindex++)&255:m=0,co(l,m)}while(m!==0);l.gzhead.hcrc&&l.pending>p&&(n.adler=f0(n.adler,l.pending_buf,l.pending-p,p)),m===0&&(l.gzindex=0,l.status=Jd)}else l.status=Jd;if(l.status===Jd)if(l.gzhead.comment){p=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>p&&(n.adler=f0(n.adler,l.pending_buf,l.pending-p,p)),d0(n),p=l.pending,l.pending===l.pending_buf_size)){m=1;break}l.gzindex<l.gzhead.comment.length?m=l.gzhead.comment.charCodeAt(l.gzindex++)&255:m=0,co(l,m)}while(m!==0);l.gzhead.hcrc&&l.pending>p&&(n.adler=f0(n.adler,l.pending_buf,l.pending-p,p)),m===0&&(l.status=Kd)}else l.status=Kd;if(l.status===Kd&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&d0(n),l.pending+2<=l.pending_buf_size&&(co(l,n.adler&255),co(l,n.adler>>8&255),n.adler=0,l.status=Z0)):l.status=Z0),l.pending!==0){if(d0(n),n.avail_out===0)return l.last_flush=-1,yc}else if(n.avail_in===0&&Tv(i)<=Tv(o)&&i!==w0)return y0(n,X1);if(l.status===If&&n.avail_in!==0)return y0(n,X1);if(n.avail_in!==0||l.lookahead!==0||i!==sh&&l.status!==If){var E=l.strategy===Md?w7(l,i):l.strategy===r7?b7(l,i):Oh[l.level].func(l,i);if((E===J0||E===nf)&&(l.status=If),E===Xs||E===J0)return n.avail_out===0&&(l.last_flush=-1),yc;if(E===ed&&(i===QA?yu._tr_align(l):i!==Iv&&(yu._tr_stored_block(l,0,0,!1),i===$A&&(p0(l.head),l.lookahead===0&&(l.strstart=0,l.block_start=0,l.insert=0))),d0(n),n.avail_out===0))return l.last_flush=-1,yc}return i!==w0?yc:l.wrap<=0?Cv:(l.wrap===2?(co(l,n.adler&255),co(l,n.adler>>8&255),co(l,n.adler>>16&255),co(l,n.adler>>24&255),co(l,n.total_in&255),co(l,n.total_in>>8&255),co(l,n.total_in>>16&255),co(l,n.total_in>>24&255)):(xf(l,n.adler>>>16),xf(l,n.adler&65535)),d0(n),l.wrap>0&&(l.wrap=-l.wrap),l.pending!==0?yc:Cv)}function I7(n){var i;return!n||!n.state?vu:(i=n.state.status,i!==Pp&&i!==N2&&i!==Yd&&i!==Jd&&i!==Kd&&i!==Z0&&i!==If?y0(n,vu):(n.state=null,i===Z0?y0(n,e7):yc))}function C7(n,i){var o=i.length,l,p,m,b,h,E,L,z;if(!n||!n.state||(l=n.state,b=l.wrap,b===2||b===1&&l.status!==Pp||l.lookahead))return vu;for(b===1&&(n.adler=Ib(n.adler,i,o,0)),l.wrap=0,o>=l.w_size&&(b===0&&(p0(l.head),l.strstart=0,l.block_start=0,l.insert=0),z=new sl.Buf8(l.w_size),sl.arraySet(z,i,o-l.w_size,l.w_size,0),i=z,o=l.w_size),h=n.avail_in,E=n.next_in,L=n.input,n.avail_in=o,n.next_in=0,n.input=i,K0(l);l.lookahead>=Kn;){p=l.strstart,m=l.lookahead-(Kn-1);do l.ins_h=(l.ins_h<<l.hash_shift^l.window[p+Kn-1])&l.hash_mask,l.prev[p&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=p,p++;while(--m);l.strstart=p,l.lookahead=Kn-1,K0(l)}return l.strstart+=l.lookahead,l.block_start=l.strstart,l.insert=l.lookahead,l.lookahead=0,l.match_length=l.prev_length=Kn-1,l.match_available=0,n.next_in=E,n.input=L,n.avail_in=h,l.wrap=b,yc}kc.deflateInit=E7;kc.deflateInit2=Pb;kc.deflateReset=Lb;kc.deflateResetKeep=Tb;kc.deflateSetHeader=A7;kc.deflate=S7;kc.deflateEnd=I7;kc.deflateSetDictionary=C7;kc.deflateInfo="pako deflate (from Nodeca project)";var ah={},Mp=Zc,Mb=!0,Db=!0;try{String.fromCharCode.apply(null,[0])}catch{Mb=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Db=!1}var Xf=new Mp.Buf8(256);for(var h0=0;h0<256;h0++)Xf[h0]=h0>=252?6:h0>=248?5:h0>=240?4:h0>=224?3:h0>=192?2:1;Xf[254]=Xf[254]=1;ah.string2buf=function(n){var i,o,l,p,m,b=n.length,h=0;for(p=0;p<b;p++)o=n.charCodeAt(p),(o&64512)===55296&&p+1<b&&(l=n.charCodeAt(p+1),(l&64512)===56320&&(o=65536+(o-55296<<10)+(l-56320),p++)),h+=o<128?1:o<2048?2:o<65536?3:4;for(i=new Mp.Buf8(h),m=0,p=0;m<h;p++)o=n.charCodeAt(p),(o&64512)===55296&&p+1<b&&(l=n.charCodeAt(p+1),(l&64512)===56320&&(o=65536+(o-55296<<10)+(l-56320),p++)),o<128?i[m++]=o:o<2048?(i[m++]=192|o>>>6,i[m++]=128|o&63):o<65536?(i[m++]=224|o>>>12,i[m++]=128|o>>>6&63,i[m++]=128|o&63):(i[m++]=240|o>>>18,i[m++]=128|o>>>12&63,i[m++]=128|o>>>6&63,i[m++]=128|o&63);return i};function zb(n,i){if(i<65534&&(n.subarray&&Db||!n.subarray&&Mb))return String.fromCharCode.apply(null,Mp.shrinkBuf(n,i));for(var o="",l=0;l<i;l++)o+=String.fromCharCode(n[l]);return o}ah.buf2binstring=function(n){return zb(n,n.length)};ah.binstring2buf=function(n){for(var i=new Mp.Buf8(n.length),o=0,l=i.length;o<l;o++)i[o]=n.charCodeAt(o);return i};ah.buf2string=function(n,i){var o,l,p,m,b=i||n.length,h=new Array(b*2);for(l=0,o=0;o<b;){if(p=n[o++],p<128){h[l++]=p;continue}if(m=Xf[p],m>4){h[l++]=65533,o+=m-1;continue}for(p&=m===2?31:m===3?15:7;m>1&&o<b;)p=p<<6|n[o++]&63,m--;if(m>1){h[l++]=65533;continue}p<65536?h[l++]=p:(p-=65536,h[l++]=55296|p>>10&1023,h[l++]=56320|p&1023)}return zb(h,l)};ah.utf8border=function(n,i){var o;for(i=i||n.length,i>n.length&&(i=n.length),o=i-1;o>=0&&(n[o]&192)===128;)o--;return o<0||o===0?i:o+Xf[n[o]]>i?o:i};function T7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Nb=T7,Df=kc,zf=Zc,F2=ah,B2=Cm,L7=Nb,Fb=Object.prototype.toString,P7=0,J1=4,Xh=0,Lv=1,Pv=2,M7=-1,D7=0,z7=8;function Q0(n){if(!(this instanceof Q0))return new Q0(n);this.options=zf.assign({level:M7,method:z7,chunkSize:16384,windowBits:15,memLevel:8,strategy:D7,to:""},n||{});var i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L7,this.strm.avail_out=0;var o=Df.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(o!==Xh)throw new Error(B2[o]);if(i.header&&Df.deflateSetHeader(this.strm,i.header),i.dictionary){var l;if(typeof i.dictionary=="string"?l=F2.string2buf(i.dictionary):Fb.call(i.dictionary)==="[object ArrayBuffer]"?l=new Uint8Array(i.dictionary):l=i.dictionary,o=Df.deflateSetDictionary(this.strm,l),o!==Xh)throw new Error(B2[o]);this._dict_set=!0}}Q0.prototype.push=function(n,i){var o=this.strm,l=this.options.chunkSize,p,m;if(this.ended)return!1;m=i===~~i?i:i===!0?J1:P7,typeof n=="string"?o.input=F2.string2buf(n):Fb.call(n)==="[object ArrayBuffer]"?o.input=new Uint8Array(n):o.input=n,o.next_in=0,o.avail_in=o.input.length;do{if(o.avail_out===0&&(o.output=new zf.Buf8(l),o.next_out=0,o.avail_out=l),p=Df.deflate(o,m),p!==Lv&&p!==Xh)return this.onEnd(p),this.ended=!0,!1;(o.avail_out===0||o.avail_in===0&&(m===J1||m===Pv))&&(this.options.to==="string"?this.onData(F2.buf2binstring(zf.shrinkBuf(o.output,o.next_out))):this.onData(zf.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||o.avail_out===0)&&p!==Lv);return m===J1?(p=Df.deflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===Xh):(m===Pv&&(this.onEnd(Xh),o.avail_out=0),!0)};Q0.prototype.onData=function(n){this.chunks.push(n)};Q0.prototype.onEnd=function(n){n===Xh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zf.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Tm(n,i){var o=new Q0(i);if(o.push(n,!0),o.err)throw o.msg||B2[o.err];return o.result}function N7(n,i){return i=i||{},i.raw=!0,Tm(n,i)}function F7(n,i){return i=i||{},i.gzip=!0,Tm(n,i)}Qf.Deflate=Q0;Qf.deflate=Tm;Qf.deflateRaw=N7;Qf.gzip=F7;var td={},Qu={},Dd=30,B7=12,R7=function(i,o){var l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se;l=i.state,p=i.next_in,nt=i.input,m=p+(i.avail_in-5),b=i.next_out,Se=i.output,h=b-(o-i.avail_out),E=b+(i.avail_out-257),L=l.dmax,z=l.wsize,U=l.whave,q=l.wnext,B=l.window,K=l.hold,J=l.bits,se=l.lencode,ne=l.distcode,re=(1<<l.lenbits)-1,ke=(1<<l.distbits)-1;e:do{J<15&&(K+=nt[p++]<<J,J+=8,K+=nt[p++]<<J,J+=8),Pe=se[K&re];t:for(;;){if(be=Pe>>>24,K>>>=be,J-=be,be=Pe>>>16&255,be===0)Se[b++]=Pe&65535;else if(be&16){pe=Pe&65535,be&=15,be&&(J<be&&(K+=nt[p++]<<J,J+=8),pe+=K&(1<<be)-1,K>>>=be,J-=be),J<15&&(K+=nt[p++]<<J,J+=8,K+=nt[p++]<<J,J+=8),Pe=ne[K&ke];i:for(;;){if(be=Pe>>>24,K>>>=be,J-=be,be=Pe>>>16&255,be&16){if(ye=Pe&65535,be&=15,J<be&&(K+=nt[p++]<<J,J+=8,J<be&&(K+=nt[p++]<<J,J+=8)),ye+=K&(1<<be)-1,ye>L){i.msg="invalid distance too far back",l.mode=Dd;break e}if(K>>>=be,J-=be,be=b-h,ye>be){if(be=ye-be,be>U&&l.sane){i.msg="invalid distance too far back",l.mode=Dd;break e}if(me=0,tt=B,q===0){if(me+=z-be,be<pe){pe-=be;do Se[b++]=B[me++];while(--be);me=b-ye,tt=Se}}else if(q<be){if(me+=z+q-be,be-=q,be<pe){pe-=be;do Se[b++]=B[me++];while(--be);if(me=0,q<pe){be=q,pe-=be;do Se[b++]=B[me++];while(--be);me=b-ye,tt=Se}}}else if(me+=q-be,be<pe){pe-=be;do Se[b++]=B[me++];while(--be);me=b-ye,tt=Se}for(;pe>2;)Se[b++]=tt[me++],Se[b++]=tt[me++],Se[b++]=tt[me++],pe-=3;pe&&(Se[b++]=tt[me++],pe>1&&(Se[b++]=tt[me++]))}else{me=b-ye;do Se[b++]=Se[me++],Se[b++]=Se[me++],Se[b++]=Se[me++],pe-=3;while(pe>2);pe&&(Se[b++]=Se[me++],pe>1&&(Se[b++]=Se[me++]))}}else if((be&64)===0){Pe=ne[(Pe&65535)+(K&(1<<be)-1)];continue i}else{i.msg="invalid distance code",l.mode=Dd;break e}break}}else if((be&64)===0){Pe=se[(Pe&65535)+(K&(1<<be)-1)];continue t}else if(be&32){l.mode=B7;break e}else{i.msg="invalid literal/length code",l.mode=Dd;break e}break}}while(p<m&&b<E);pe=J>>3,p-=pe,J-=pe<<3,K&=(1<<J)-1,i.next_in=p,i.next_out=b,i.avail_in=p<m?5+(m-p):5-(p-m),i.avail_out=b<E?257+(E-b):257-(b-E),l.hold=K,l.bits=J},Mv=Zc,Ch=15,Dv=852,zv=592,Nv=0,K1=1,Fv=2,O7=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],j7=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U7=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],q7=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],V7=function(i,o,l,p,m,b,h,E){var L=E.bits,z=0,U=0,q=0,B=0,K=0,J=0,se=0,ne=0,re=0,ke=0,Pe,be,pe,ye,me,tt=null,nt=0,Se,Me=new Mv.Buf16(Ch+1),Ge=new Mv.Buf16(Ch+1),Xe=null,_t=0,pt,Gt,kt;for(z=0;z<=Ch;z++)Me[z]=0;for(U=0;U<p;U++)Me[o[l+U]]++;for(K=L,B=Ch;B>=1&&Me[B]===0;B--);if(K>B&&(K=B),B===0)return m[b++]=1<<24|64<<16|0,m[b++]=1<<24|64<<16|0,E.bits=1,0;for(q=1;q<B&&Me[q]===0;q++);for(K<q&&(K=q),ne=1,z=1;z<=Ch;z++)if(ne<<=1,ne-=Me[z],ne<0)return-1;if(ne>0&&(i===Nv||B!==1))return-1;for(Ge[1]=0,z=1;z<Ch;z++)Ge[z+1]=Ge[z]+Me[z];for(U=0;U<p;U++)o[l+U]!==0&&(h[Ge[o[l+U]]++]=U);if(i===Nv?(tt=Xe=h,Se=19):i===K1?(tt=O7,nt-=257,Xe=j7,_t-=257,Se=256):(tt=U7,Xe=q7,Se=-1),ke=0,U=0,z=q,me=b,J=K,se=0,pe=-1,re=1<<K,ye=re-1,i===K1&&re>Dv||i===Fv&&re>zv)return 1;for(;;){pt=z-se,h[U]<Se?(Gt=0,kt=h[U]):h[U]>Se?(Gt=Xe[_t+h[U]],kt=tt[nt+h[U]]):(Gt=32+64,kt=0),Pe=1<<z-se,be=1<<J,q=be;do be-=Pe,m[me+(ke>>se)+be]=pt<<24|Gt<<16|kt|0;while(be!==0);for(Pe=1<<z-1;ke&Pe;)Pe>>=1;if(Pe!==0?(ke&=Pe-1,ke+=Pe):ke=0,U++,--Me[z]===0){if(z===B)break;z=o[l+h[U]]}if(z>K&&(ke&ye)!==pe){for(se===0&&(se=K),me+=q,J=z-se,ne=1<<J;J+se<B&&(ne-=Me[J+se],!(ne<=0));)J++,ne<<=1;if(re+=1<<J,i===K1&&re>Dv||i===Fv&&re>zv)return 1;pe=ke&ye,m[pe]=K<<24|J<<16|me-b|0}}return ke!==0&&(m[me+ke]=z-se<<24|64<<16|0),E.bits=K,0},Kl=Zc,R2=Eb,dc=Sb,G7=R7,Nf=V7,H7=0,Bb=1,Rb=2,Bv=4,W7=5,zd=6,$0=0,Z7=1,X7=2,_u=-2,Ob=-3,jb=-4,Y7=-5,Rv=8,Ub=1,Ov=2,jv=3,Uv=4,qv=5,Vv=6,Gv=7,Hv=8,Wv=9,Zv=10,fp=11,Uc=12,Q1=13,Xv=14,$1=15,Yv=16,Jv=17,Kv=18,Qv=19,Nd=20,Fd=21,$v=22,e_=23,t_=24,i_=25,r_=26,e2=27,n_=28,o_=29,rs=30,qb=31,J7=32,K7=852,Q7=592,$7=15,eE=$7;function s_(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function tE(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Kl.Buf16(320),this.work=new Kl.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Vb(n){var i;return!n||!n.state?_u:(i=n.state,n.total_in=n.total_out=i.total=0,n.msg="",i.wrap&&(n.adler=i.wrap&1),i.mode=Ub,i.last=0,i.havedict=0,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Kl.Buf32(K7),i.distcode=i.distdyn=new Kl.Buf32(Q7),i.sane=1,i.back=-1,$0)}function Gb(n){var i;return!n||!n.state?_u:(i=n.state,i.wsize=0,i.whave=0,i.wnext=0,Vb(n))}function Hb(n,i){var o,l;return!n||!n.state||(l=n.state,i<0?(o=0,i=-i):(o=(i>>4)+1,i<48&&(i&=15)),i&&(i<8||i>15))?_u:(l.window!==null&&l.wbits!==i&&(l.window=null),l.wrap=o,l.wbits=i,Gb(n))}function Wb(n,i){var o,l;return n?(l=new tE,n.state=l,l.window=null,o=Hb(n,i),o!==$0&&(n.state=null),o):_u}function iE(n){return Wb(n,eE)}var a_=!0,t2,i2;function rE(n){if(a_){var i;for(t2=new Kl.Buf32(512),i2=new Kl.Buf32(32),i=0;i<144;)n.lens[i++]=8;for(;i<256;)n.lens[i++]=9;for(;i<280;)n.lens[i++]=7;for(;i<288;)n.lens[i++]=8;for(Nf(Bb,n.lens,0,288,t2,0,n.work,{bits:9}),i=0;i<32;)n.lens[i++]=5;Nf(Rb,n.lens,0,32,i2,0,n.work,{bits:5}),a_=!1}n.lencode=t2,n.lenbits=9,n.distcode=i2,n.distbits=5}function Zb(n,i,o,l){var p,m=n.state;return m.window===null&&(m.wsize=1<<m.wbits,m.wnext=0,m.whave=0,m.window=new Kl.Buf8(m.wsize)),l>=m.wsize?(Kl.arraySet(m.window,i,o-m.wsize,m.wsize,0),m.wnext=0,m.whave=m.wsize):(p=m.wsize-m.wnext,p>l&&(p=l),Kl.arraySet(m.window,i,o-l,p,m.wnext),l-=p,l?(Kl.arraySet(m.window,i,o-l,l,0),m.wnext=l,m.whave=m.wsize):(m.wnext+=p,m.wnext===m.wsize&&(m.wnext=0),m.whave<m.wsize&&(m.whave+=p))),0}function nE(n,i){var o,l,p,m,b,h,E,L,z,U,q,B,K,J,se=0,ne,re,ke,Pe,be,pe,ye,me,tt=new Kl.Buf8(4),nt,Se,Me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return _u;o=n.state,o.mode===Uc&&(o.mode=Q1),b=n.next_out,p=n.output,E=n.avail_out,m=n.next_in,l=n.input,h=n.avail_in,L=o.hold,z=o.bits,U=h,q=E,me=$0;e:for(;;)switch(o.mode){case Ub:if(o.wrap===0){o.mode=Q1;break}for(;z<16;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(o.wrap&2&&L===35615){o.check=0,tt[0]=L&255,tt[1]=L>>>8&255,o.check=dc(o.check,tt,2,0),L=0,z=0,o.mode=Ov;break}if(o.flags=0,o.head&&(o.head.done=!1),!(o.wrap&1)||(((L&255)<<8)+(L>>8))%31){n.msg="incorrect header check",o.mode=rs;break}if((L&15)!==Rv){n.msg="unknown compression method",o.mode=rs;break}if(L>>>=4,z-=4,ye=(L&15)+8,o.wbits===0)o.wbits=ye;else if(ye>o.wbits){n.msg="invalid window size",o.mode=rs;break}o.dmax=1<<ye,n.adler=o.check=1,o.mode=L&512?Zv:Uc,L=0,z=0;break;case Ov:for(;z<16;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(o.flags=L,(o.flags&255)!==Rv){n.msg="unknown compression method",o.mode=rs;break}if(o.flags&57344){n.msg="unknown header flags set",o.mode=rs;break}o.head&&(o.head.text=L>>8&1),o.flags&512&&(tt[0]=L&255,tt[1]=L>>>8&255,o.check=dc(o.check,tt,2,0)),L=0,z=0,o.mode=jv;case jv:for(;z<32;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}o.head&&(o.head.time=L),o.flags&512&&(tt[0]=L&255,tt[1]=L>>>8&255,tt[2]=L>>>16&255,tt[3]=L>>>24&255,o.check=dc(o.check,tt,4,0)),L=0,z=0,o.mode=Uv;case Uv:for(;z<16;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}o.head&&(o.head.xflags=L&255,o.head.os=L>>8),o.flags&512&&(tt[0]=L&255,tt[1]=L>>>8&255,o.check=dc(o.check,tt,2,0)),L=0,z=0,o.mode=qv;case qv:if(o.flags&1024){for(;z<16;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}o.length=L,o.head&&(o.head.extra_len=L),o.flags&512&&(tt[0]=L&255,tt[1]=L>>>8&255,o.check=dc(o.check,tt,2,0)),L=0,z=0}else o.head&&(o.head.extra=null);o.mode=Vv;case Vv:if(o.flags&1024&&(B=o.length,B>h&&(B=h),B&&(o.head&&(ye=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),Kl.arraySet(o.head.extra,l,m,B,ye)),o.flags&512&&(o.check=dc(o.check,l,B,m)),h-=B,m+=B,o.length-=B),o.length))break e;o.length=0,o.mode=Gv;case Gv:if(o.flags&2048){if(h===0)break e;B=0;do ye=l[m+B++],o.head&&ye&&o.length<65536&&(o.head.name+=String.fromCharCode(ye));while(ye&&B<h);if(o.flags&512&&(o.check=dc(o.check,l,B,m)),h-=B,m+=B,ye)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=Hv;case Hv:if(o.flags&4096){if(h===0)break e;B=0;do ye=l[m+B++],o.head&&ye&&o.length<65536&&(o.head.comment+=String.fromCharCode(ye));while(ye&&B<h);if(o.flags&512&&(o.check=dc(o.check,l,B,m)),h-=B,m+=B,ye)break e}else o.head&&(o.head.comment=null);o.mode=Wv;case Wv:if(o.flags&512){for(;z<16;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(L!==(o.check&65535)){n.msg="header crc mismatch",o.mode=rs;break}L=0,z=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),n.adler=o.check=0,o.mode=Uc;break;case Zv:for(;z<32;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}n.adler=o.check=s_(L),L=0,z=0,o.mode=fp;case fp:if(o.havedict===0)return n.next_out=b,n.avail_out=E,n.next_in=m,n.avail_in=h,o.hold=L,o.bits=z,X7;n.adler=o.check=1,o.mode=Uc;case Uc:if(i===W7||i===zd)break e;case Q1:if(o.last){L>>>=z&7,z-=z&7,o.mode=e2;break}for(;z<3;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}switch(o.last=L&1,L>>>=1,z-=1,L&3){case 0:o.mode=Xv;break;case 1:if(rE(o),o.mode=Nd,i===zd){L>>>=2,z-=2;break e}break;case 2:o.mode=Jv;break;case 3:n.msg="invalid block type",o.mode=rs}L>>>=2,z-=2;break;case Xv:for(L>>>=z&7,z-=z&7;z<32;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if((L&65535)!==(L>>>16^65535)){n.msg="invalid stored block lengths",o.mode=rs;break}if(o.length=L&65535,L=0,z=0,o.mode=$1,i===zd)break e;case $1:o.mode=Yv;case Yv:if(B=o.length,B){if(B>h&&(B=h),B>E&&(B=E),B===0)break e;Kl.arraySet(p,l,m,B,b),h-=B,m+=B,E-=B,b+=B,o.length-=B;break}o.mode=Uc;break;case Jv:for(;z<14;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(o.nlen=(L&31)+257,L>>>=5,z-=5,o.ndist=(L&31)+1,L>>>=5,z-=5,o.ncode=(L&15)+4,L>>>=4,z-=4,o.nlen>286||o.ndist>30){n.msg="too many length or distance symbols",o.mode=rs;break}o.have=0,o.mode=Kv;case Kv:for(;o.have<o.ncode;){for(;z<3;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}o.lens[Me[o.have++]]=L&7,L>>>=3,z-=3}for(;o.have<19;)o.lens[Me[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,nt={bits:o.lenbits},me=Nf(H7,o.lens,0,19,o.lencode,0,o.work,nt),o.lenbits=nt.bits,me){n.msg="invalid code lengths set",o.mode=rs;break}o.have=0,o.mode=Qv;case Qv:for(;o.have<o.nlen+o.ndist;){for(;se=o.lencode[L&(1<<o.lenbits)-1],ne=se>>>24,re=se>>>16&255,ke=se&65535,!(ne<=z);){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(ke<16)L>>>=ne,z-=ne,o.lens[o.have++]=ke;else{if(ke===16){for(Se=ne+2;z<Se;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(L>>>=ne,z-=ne,o.have===0){n.msg="invalid bit length repeat",o.mode=rs;break}ye=o.lens[o.have-1],B=3+(L&3),L>>>=2,z-=2}else if(ke===17){for(Se=ne+3;z<Se;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}L>>>=ne,z-=ne,ye=0,B=3+(L&7),L>>>=3,z-=3}else{for(Se=ne+7;z<Se;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}L>>>=ne,z-=ne,ye=0,B=11+(L&127),L>>>=7,z-=7}if(o.have+B>o.nlen+o.ndist){n.msg="invalid bit length repeat",o.mode=rs;break}for(;B--;)o.lens[o.have++]=ye}}if(o.mode===rs)break;if(o.lens[256]===0){n.msg="invalid code -- missing end-of-block",o.mode=rs;break}if(o.lenbits=9,nt={bits:o.lenbits},me=Nf(Bb,o.lens,0,o.nlen,o.lencode,0,o.work,nt),o.lenbits=nt.bits,me){n.msg="invalid literal/lengths set",o.mode=rs;break}if(o.distbits=6,o.distcode=o.distdyn,nt={bits:o.distbits},me=Nf(Rb,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,nt),o.distbits=nt.bits,me){n.msg="invalid distances set",o.mode=rs;break}if(o.mode=Nd,i===zd)break e;case Nd:o.mode=Fd;case Fd:if(h>=6&&E>=258){n.next_out=b,n.avail_out=E,n.next_in=m,n.avail_in=h,o.hold=L,o.bits=z,G7(n,q),b=n.next_out,p=n.output,E=n.avail_out,m=n.next_in,l=n.input,h=n.avail_in,L=o.hold,z=o.bits,o.mode===Uc&&(o.back=-1);break}for(o.back=0;se=o.lencode[L&(1<<o.lenbits)-1],ne=se>>>24,re=se>>>16&255,ke=se&65535,!(ne<=z);){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(re&&(re&240)===0){for(Pe=ne,be=re,pe=ke;se=o.lencode[pe+((L&(1<<Pe+be)-1)>>Pe)],ne=se>>>24,re=se>>>16&255,ke=se&65535,!(Pe+ne<=z);){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}L>>>=Pe,z-=Pe,o.back+=Pe}if(L>>>=ne,z-=ne,o.back+=ne,o.length=ke,re===0){o.mode=r_;break}if(re&32){o.back=-1,o.mode=Uc;break}if(re&64){n.msg="invalid literal/length code",o.mode=rs;break}o.extra=re&15,o.mode=$v;case $v:if(o.extra){for(Se=o.extra;z<Se;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}o.length+=L&(1<<o.extra)-1,L>>>=o.extra,z-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=e_;case e_:for(;se=o.distcode[L&(1<<o.distbits)-1],ne=se>>>24,re=se>>>16&255,ke=se&65535,!(ne<=z);){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if((re&240)===0){for(Pe=ne,be=re,pe=ke;se=o.distcode[pe+((L&(1<<Pe+be)-1)>>Pe)],ne=se>>>24,re=se>>>16&255,ke=se&65535,!(Pe+ne<=z);){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}L>>>=Pe,z-=Pe,o.back+=Pe}if(L>>>=ne,z-=ne,o.back+=ne,re&64){n.msg="invalid distance code",o.mode=rs;break}o.offset=ke,o.extra=re&15,o.mode=t_;case t_:if(o.extra){for(Se=o.extra;z<Se;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}o.offset+=L&(1<<o.extra)-1,L>>>=o.extra,z-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){n.msg="invalid distance too far back",o.mode=rs;break}o.mode=i_;case i_:if(E===0)break e;if(B=q-E,o.offset>B){if(B=o.offset-B,B>o.whave&&o.sane){n.msg="invalid distance too far back",o.mode=rs;break}B>o.wnext?(B-=o.wnext,K=o.wsize-B):K=o.wnext-B,B>o.length&&(B=o.length),J=o.window}else J=p,K=b-o.offset,B=o.length;B>E&&(B=E),E-=B,o.length-=B;do p[b++]=J[K++];while(--B);o.length===0&&(o.mode=Fd);break;case r_:if(E===0)break e;p[b++]=o.length,E--,o.mode=Fd;break;case e2:if(o.wrap){for(;z<32;){if(h===0)break e;h--,L|=l[m++]<<z,z+=8}if(q-=E,n.total_out+=q,o.total+=q,q&&(n.adler=o.check=o.flags?dc(o.check,p,q,b-q):R2(o.check,p,q,b-q)),q=E,(o.flags?L:s_(L))!==o.check){n.msg="incorrect data check",o.mode=rs;break}L=0,z=0}o.mode=n_;case n_:if(o.wrap&&o.flags){for(;z<32;){if(h===0)break e;h--,L+=l[m++]<<z,z+=8}if(L!==(o.total&4294967295)){n.msg="incorrect length check",o.mode=rs;break}L=0,z=0}o.mode=o_;case o_:me=Z7;break e;case rs:me=Ob;break e;case qb:return jb;case J7:default:return _u}return n.next_out=b,n.avail_out=E,n.next_in=m,n.avail_in=h,o.hold=L,o.bits=z,(o.wsize||q!==n.avail_out&&o.mode<rs&&(o.mode<e2||i!==Bv))&&Zb(n,n.output,n.next_out,q-n.avail_out),U-=n.avail_in,q-=n.avail_out,n.total_in+=U,n.total_out+=q,o.total+=q,o.wrap&&q&&(n.adler=o.check=o.flags?dc(o.check,p,q,n.next_out-q):R2(o.check,p,q,n.next_out-q)),n.data_type=o.bits+(o.last?64:0)+(o.mode===Uc?128:0)+(o.mode===Nd||o.mode===$1?256:0),(U===0&&q===0||i===Bv)&&me===$0&&(me=Y7),me}function oE(n){if(!n||!n.state)return _u;var i=n.state;return i.window&&(i.window=null),n.state=null,$0}function sE(n,i){var o;return!n||!n.state||(o=n.state,(o.wrap&2)===0)?_u:(o.head=i,i.done=!1,$0)}function aE(n,i){var o=i.length,l,p,m;return!n||!n.state||(l=n.state,l.wrap!==0&&l.mode!==fp)?_u:l.mode===fp&&(p=1,p=R2(p,i,o,0),p!==l.check)?Ob:(m=Zb(n,i,o,o),m?(l.mode=qb,jb):(l.havedict=1,$0))}Qu.inflateReset=Gb;Qu.inflateReset2=Hb;Qu.inflateResetKeep=Vb;Qu.inflateInit=iE;Qu.inflateInit2=Wb;Qu.inflate=nE;Qu.inflateEnd=oE;Qu.inflateGetHeader=sE;Qu.inflateSetDictionary=aE;Qu.inflateInfo="pako inflate (from Nodeca project)";var Xb={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function lE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var uE=lE,Yh=Qu,Ff=Zc,Qd=ah,Es=Xb,O2=Cm,cE=Nb,hE=uE,Yb=Object.prototype.toString;function eh(n){if(!(this instanceof eh))return new eh(n);this.options=Ff.assign({chunkSize:16384,windowBits:0,to:""},n||{});var i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(n&&n.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cE,this.strm.avail_out=0;var o=Yh.inflateInit2(this.strm,i.windowBits);if(o!==Es.Z_OK)throw new Error(O2[o]);if(this.header=new hE,Yh.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Qd.string2buf(i.dictionary):Yb.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(o=Yh.inflateSetDictionary(this.strm,i.dictionary),o!==Es.Z_OK)))throw new Error(O2[o])}eh.prototype.push=function(n,i){var o=this.strm,l=this.options.chunkSize,p=this.options.dictionary,m,b,h,E,L,z=!1;if(this.ended)return!1;b=i===~~i?i:i===!0?Es.Z_FINISH:Es.Z_NO_FLUSH,typeof n=="string"?o.input=Qd.binstring2buf(n):Yb.call(n)==="[object ArrayBuffer]"?o.input=new Uint8Array(n):o.input=n,o.next_in=0,o.avail_in=o.input.length;do{if(o.avail_out===0&&(o.output=new Ff.Buf8(l),o.next_out=0,o.avail_out=l),m=Yh.inflate(o,Es.Z_NO_FLUSH),m===Es.Z_NEED_DICT&&p&&(m=Yh.inflateSetDictionary(this.strm,p)),m===Es.Z_BUF_ERROR&&z===!0&&(m=Es.Z_OK,z=!1),m!==Es.Z_STREAM_END&&m!==Es.Z_OK)return this.onEnd(m),this.ended=!0,!1;o.next_out&&(o.avail_out===0||m===Es.Z_STREAM_END||o.avail_in===0&&(b===Es.Z_FINISH||b===Es.Z_SYNC_FLUSH))&&(this.options.to==="string"?(h=Qd.utf8border(o.output,o.next_out),E=o.next_out-h,L=Qd.buf2string(o.output,h),o.next_out=E,o.avail_out=l-E,E&&Ff.arraySet(o.output,o.output,h,E,0),this.onData(L)):this.onData(Ff.shrinkBuf(o.output,o.next_out))),o.avail_in===0&&o.avail_out===0&&(z=!0)}while((o.avail_in>0||o.avail_out===0)&&m!==Es.Z_STREAM_END);return m===Es.Z_STREAM_END&&(b=Es.Z_FINISH),b===Es.Z_FINISH?(m=Yh.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===Es.Z_OK):(b===Es.Z_SYNC_FLUSH&&(this.onEnd(Es.Z_OK),o.avail_out=0),!0)};eh.prototype.onData=function(n){this.chunks.push(n)};eh.prototype.onEnd=function(n){n===Es.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ff.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Lm(n,i){var o=new eh(i);if(o.push(n,!0),o.err)throw o.msg||O2[o.err];return o.result}function fE(n,i){return i=i||{},i.raw=!0,Lm(n,i)}td.Inflate=eh;td.inflate=Lm;td.inflateRaw=fE;td.ungzip=Lm;var dE=Zc.assign,pE=Qf,mE=td,gE=Xb,Jb={};dE(Jb,pE,mE,gE);var yE=Jb,vE=function(){function n(i){var o=this;this.decode=function(){var B=new Uint8Array(o.width*o.height*4),K=o.decodePixels();return o.copyImageDataToBuffer(B,K),B},this.copyImageDataToBuffer=function(B,K){var J=o.colors,se,ne=o.hasAlphaChannel;o.palette.length&&(se=o.decodePalette(),J=4,ne=!0);var re=B,ke=re.length,Pe=se||K,be=0,pe=0;if(J===1)for(;be<ke;){var ye=se?K[be/4]*4:pe,me=Pe[ye++];re[be++]=me,re[be++]=me,re[be++]=me,re[be++]=ne?Pe[ye++]:255,pe=ye}else for(;be<ke;){var ye=se?K[be/4]*4:pe;re[be++]=Pe[ye++],re[be++]=Pe[ye++],re[be++]=Pe[ye++],re[be++]=ne?Pe[ye++]:255,pe=ye}},this.decodePixels=function(){for(var B=yE.inflate(o.imgData),K=o.pixelBitlength/8,J=K*o.width,se=new Uint8Array(J*o.height),ne=B.length,re=0,ke=0,Pe=0;ke<ne;){switch(B[ke++]){case 0:{for(var be=0;be<J;be++)se[Pe++]=B[ke++];break}case 1:{for(var be=0;be<J;be++){var pe=B[ke++],ye=be<K?0:se[Pe-K];se[Pe++]=(pe+ye)%256}break}case 2:{for(var be=0;be<J;be++){var pe=B[ke++],me=(be-be%K)/K,tt=(re-1)*J+me*K+be%K,nt=re&&se[tt];se[Pe++]=(nt+pe)%256}break}case 3:{for(var be=0;be<J;be++){var pe=B[ke++],me=(be-be%K)/K,ye=be<K?0:se[Pe-K],tt=(re-1)*J+me*K+be%K,nt=re&&se[tt];se[Pe++]=(pe+Math.floor((ye+nt)/2))%256}break}case 4:{for(var be=0;be<J;be++){var pe=B[ke++],me=(be-be%K)/K,ye=be<K?0:se[Pe-K],nt=void 0,Se=void 0;if(re===0)nt=Se=0;else{var Me=(re-1)*J+me*K+be%K,Ge=(re-1)*J+(me-1)*K+be%K;nt=se[Me],Se=me&&se[Ge]}var Xe=ye+nt-Se,_t=Math.abs(Xe-ye),pt=Math.abs(Xe-nt),Gt=Math.abs(Xe-Se),kt=void 0;_t<=pt&&_t<=Gt?kt=ye:pt<=Gt?kt=nt:kt=Se,se[Pe++]=(pe+kt)%256}break}default:throw new Error("Invalid filter algorithm: "+B[ke-1])}re++}return se},this.read=function(B){for(var K=[],J=0;J<B;J++)K[J]=o.data[o.pos++];return K},this.readUInt32=function(){var B=o.data[o.pos++]<<24,K=o.data[o.pos++]<<16,J=o.data[o.pos++]<<8,se=o.data[o.pos++];return B|K|J|se},this.decodePalette=function(){for(var B=o.palette,K=o.transparency.indexed||[],J=new Uint8Array(K.length+B.length),se=0,ne=0,re=0;re<B.length;re++){J[se++]=B[re],J[se++]=B[re+1],J[se++]=B[re+2];var ke=K[ne++];J[se++]=ke!==void 0?ke:255}return J},this.data=i,this.pos=8,this.palette=[];var l=[];for(this.transparency={},this.text={};;){for(var p=this.readUInt32(),m="",b=0;b<4;b++)m+=String.fromCharCode(this.data[this.pos++]);switch(m){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(p);break}case"IDAT":{for(var b=0;b<p;b++)l.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{this.transparency.indexed=this.read(p);var h=255-this.transparency.indexed.length;if(h>0)for(var b=0;b<255;b++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(p)[0];break}case 2:{this.transparency.rgb=this.read(p);break}}break}case"tEXt":{var E=this.read(p),L=E.indexOf(0),z=String.fromCharCode.apply(String,E.slice(0,L));this.text[z]=String.fromCharCode.apply(String,E.slice(L+1));break}case"IEND":{var U={0:1,3:1,4:1,2:3,6:3};this.colors=U[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);var q=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*q,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(l);return}default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return n.load=function(i){return new n(i)},n}();const j2=";base64,",_E=n=>n.indexOf(j2)>-1,bE=n=>{const i=n.indexOf(j2)+j2.length,o=n.substring(i),l=window.atob(o),p=l.length,m=new Uint8Array(new ArrayBuffer(p));for(let b=0;b<p;b++)m[b]=l.charCodeAt(b);return m};async function wE(){const n=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],i=l=>new Promise((p,m)=>{var b=document.createElement("img");b.onerror=h=>p(!1),b.onload=()=>p(!0),b.src=l});return(await Promise.all(n.map(i))).every(l=>!!l)}class xE extends Error{}async function Kb(n){return new Promise((i,o)=>{const l=new XMLHttpRequest;l.open("GET",n),l.responseType="arraybuffer";const p=()=>{o(new xE(`failed to load binary data, code "${l.status}" from "${n}"`))};l.onerror=p,l.onreadystatechange=()=>{l.readyState==4&&(l.status==200?i(new Uint8Array(l.response)):p())},l.send()})}function kE(){var n=typeof n<"u"?n:{},i=function(){function M(){}function V(ii,ni){return function(){ii.apply(ni,arguments)}}function oe(ii){if(!(this instanceof oe))throw new TypeError("Promises must be constructed via new");if(typeof ii!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ai(ii,this)}function ge(ii,ni){for(;ii._state===3;)ii=ii._value;if(ii._state===0){ii._deferreds.push(ni);return}ii._handled=!0,oe._immediateFn(function(){var Vt=ii._state===1?ni.onFulfilled:ni.onRejected;if(Vt===null){(ii._state===1?qe:ht)(ni.promise,ii._value);return}var Ii;try{Ii=Vt(ii._value)}catch(Gi){ht(ni.promise,Gi);return}qe(ni.promise,Ii)})}function qe(ii,ni){try{if(ni===ii)throw new TypeError("A promise cannot be resolved with itself.");if(ni&&(typeof ni=="object"||typeof ni=="function")){var Vt=ni.then;if(ni instanceof oe){ii._state=3,ii._value=ni,St(ii);return}else if(typeof Vt=="function"){ai(V(Vt,ni),ii);return}}ii._state=1,ii._value=ni,St(ii)}catch(Ii){ht(ii,Ii)}}function ht(ii,ni){ii._state=2,ii._value=ni,St(ii)}function St(ii){ii._state===2&&ii._deferreds.length===0&&oe._immediateFn(function(){ii._handled||oe._unhandledRejectionFn(ii._value)});for(var ni=0,Vt=ii._deferreds.length;ni<Vt;ni++)ge(ii,ii._deferreds[ni]);ii._deferreds=null}function Et(ii,ni,Vt){this.onFulfilled=typeof ii=="function"?ii:null,this.onRejected=typeof ni=="function"?ni:null,this.promise=Vt}function ai(ii,ni){var Vt=!1;try{ii(function(Ii){Vt||(Vt=!0,qe(ni,Ii))},function(Ii){Vt||(Vt=!0,ht(ni,Ii))})}catch(Ii){if(Vt)return;Vt=!0,ht(ni,Ii)}}return oe.prototype.catch=function(ii){return this.then(null,ii)},oe.prototype.then=function(ii,ni){var Vt=new this.constructor(M);return ge(this,new Et(ii,ni,Vt)),Vt},oe.all=function(ii){return new oe(function(ni,Vt){if(!Array.isArray(ii))return Vt(new TypeError("Promise.all accepts an array"));var Ii=Array.prototype.slice.call(ii);if(Ii.length===0)return ni([]);var Gi=Ii.length;function fr(c,_i){try{if(_i&&(typeof _i=="object"||typeof _i=="function")){var s=_i.then;if(typeof s=="function"){s.call(_i,function(A){fr(c,A)},Vt);return}}Ii[c]=_i,--Gi===0&&ni(Ii)}catch(A){Vt(A)}}for(var Je=0;Je<Ii.length;Je++)fr(Je,Ii[Je])})},oe.resolve=function(ii){return ii&&typeof ii=="object"&&ii.constructor===oe?ii:new oe(function(ni){ni(ii)})},oe.reject=function(ii){return new oe(function(ni,Vt){Vt(ii)})},oe.race=function(ii){return new oe(function(ni,Vt){if(!Array.isArray(ii))return Vt(new TypeError("Promise.race accepts an array"));for(var Ii=0,Gi=ii.length;Ii<Gi;Ii++)oe.resolve(ii[Ii]).then(ni,Vt)})},oe._immediateFn=typeof setImmediate=="function"&&function(ii){setImmediate(ii)}||function(ii){setTimeout(ii,0)},oe._unhandledRejectionFn=function(ni){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",ni)},oe}(),o={},l;for(l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);var p=!0,m="";function b(M){return n.locateFile?n.locateFile(M,m):m+M}var h,E,L;document.currentScript&&(m=document.currentScript.src),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",h=function(V){try{var oe=new XMLHttpRequest;return oe.open("GET",V,!1),oe.send(null),oe.responseText}catch(qe){var ge=fs(V);if(ge)return io(ge);throw qe}},E=function(V,oe,ge){var qe=new XMLHttpRequest;qe.open("GET",V,!0),qe.responseType="arraybuffer",qe.onload=function(){if(qe.status==200||qe.status==0&&qe.response){oe(qe.response);return}var St=fs(V);if(St){oe(St.buffer);return}ge()},qe.onerror=ge,qe.send(null)};var z=n.print||console.log.bind(console),U=n.printErr||console.warn.bind(console);for(l in o)o.hasOwnProperty(l)&&(n[l]=o[l]);o=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit;var q=16;function B(M,V){return V||(V=q),Math.ceil(M/V)*V}function K(M){K.shown||(K.shown={}),K.shown[M]||(K.shown[M]=1,U(M))}var J=0,se=function(M){J=M},ne=function(){return J},re;n.wasmBinary&&(re=n.wasmBinary),n.noExitRuntime&&n.noExitRuntime;var ke={Memory:function(M){this.buffer=new ArrayBuffer(M.initial*65536),this.grow=function(V){var oe=Bs(V);return oe}},Table:function(M){var V=new Array(M.initial);return V.set=function(oe,ge){V[oe]=ge},V.get=function(oe){return V[oe]},V},Module:function(M){},Instance:function(M,V){this.exports=function(ge,qe,ht){function St(Vt,Ii,Gi){var fr=Ii.memory,Je=ht,c=new Vt.Int8Array(Gi),_i=new Vt.Int16Array(Gi),s=new Vt.Int32Array(Gi),A=new Vt.Uint8Array(Gi),tr=new Vt.Uint16Array(Gi),zr=new Vt.Uint32Array(Gi);new Vt.Float32Array(Gi);var Gn=new Vt.Float64Array(Gi),W=Vt.Math.imul;Vt.Math.fround,Vt.Math.abs;var fn=Vt.Math.clz32;Vt.Math.min,Vt.Math.max,Vt.Math.floor,Vt.Math.ceil,Vt.Math.sqrt;var Os=Ii.abort;Vt.NaN,Vt.Infinity;var fa=Ii.SDL_Init,$u=Ii.SDL_SetVideoMode,Za=Ii.SDL_CreateRGBSurface,ps=Ii.SDL_LockSurface,bu=Ii.SDL_UnlockSurface,Pl=Ii.SDL_UpperBlit,Ac=Ii.SDL_Flip,Ml=Ii.SDL_FreeSurface,Ec=Ii.fd_close,$l=Ii.fd_write,Dl=Ii.emscripten_resize_heap,zl=Ii.emscripten_memcpy_big,cl=Ii.setTempRet0,Nl=Ii.fd_seek,br=5255072,yr=0;function eu(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0;f=s[t>>2],$=s[t+4>>2],r=s[e+2264>>2],c[r+823|0]=129,c[r+807|0]=129,c[r+791|0]=129,c[r+775|0]=129,c[r+759|0]=129,c[r+743|0]=129,c[r+727|0]=129,c[r+711|0]=129,c[r+695|0]=129,c[r+679|0]=129,c[r+663|0]=129,c[r+647|0]=129,c[r+631|0]=129,c[r+615|0]=129,c[r+599|0]=129,c[r+583|0]=129,c[r+519|0]=129,c[r+487|0]=129,c[r+455|0]=129,c[r+423|0]=129,c[r+391|0]=129,c[r+359|0]=129,c[r+327|0]=129,c[r+295|0]=129,c[r+263|0]=129,c[r+231|0]=129,c[r+199|0]=129,c[r+167|0]=129,c[r+135|0]=129,c[r+103|0]=129,c[r+71|0]=129,c[r+39|0]=129;e:{if(($|0)>=1){c[r+551|0]=129,c[r+567|0]=129,c[r+7|0]=129;break e}c[r+7|0]=2139062143,c[r+8|0]=8355711,c[r+9|0]=32639,c[r+10|0]=127,c[r+11|0]=2139062143,c[r+12|0]=8355711,c[r+13|0]=32639,c[r+14|0]=127,c[r+551|0]=2139062143,c[r+552|0]=8355711,c[r+553|0]=32639,c[r+554|0]=127,c[r+555|0]=2139062143,c[r+556|0]=8355711,c[r+557|0]=32639,c[r+558|0]=127,c[r+567|0]=2139062143,c[r+568|0]=8355711,c[r+569|0]=32639,c[r+570|0]=127,c[r+571|0]=2139062143,c[r+572|0]=8355711,c[r+573|0]=32639,c[r+574|0]=127,c[r+20|0]=2139062143,c[r+21|0]=8355711,c[r+22|0]=32639,c[r+23|0]=127,c[r+24|0]=2139062143,c[r+25|0]=8355711,c[r+26|0]=32639,c[r+27|0]=127,c[r+15|0]=2139062143,c[r+16|0]=8355711,c[r+17|0]=32639,c[r+18|0]=127,c[r+19|0]=2139062143,c[r+20|0]=8355711,c[r+21|0]=32639,c[r+22|0]=127,c[r+559|0]=127,c[r+575|0]=127}if(s[e+288>>2]>=1)for(xe=r+600|0,Ne=r+584|0,ce=r+40|0,gt=$?5:6,Bt=f<<3,Yt=f<<4,yi=r+520|0,hi=r+8|0,$e=r+24|0,At=!$<<2,Mi=($|0)<1;;){w=s[t+16>>2],G&&(f=A[r+20|0]|A[r+21|0]<<8|(A[r+22|0]<<16|A[r+23|0]<<24),c[r+4|0]=f,c[r+5|0]=f>>>8,c[r+6|0]=f>>>16,c[r+7|0]=f>>>24,f=A[r+52|0]|A[r+53|0]<<8|(A[r+54|0]<<16|A[r+55|0]<<24),c[r+36|0]=f,c[r+37|0]=f>>>8,c[r+38|0]=f>>>16,c[r+39|0]=f>>>24,f=A[r+84|0]|A[r+85|0]<<8|(A[r+86|0]<<16|A[r+87|0]<<24),c[r+68|0]=f,c[r+69|0]=f>>>8,c[r+70|0]=f>>>16,c[r+71|0]=f>>>24,f=A[r+116|0]|A[r+117|0]<<8|(A[r+118|0]<<16|A[r+119|0]<<24),c[r+100|0]=f,c[r+101|0]=f>>>8,c[r+102|0]=f>>>16,c[r+103|0]=f>>>24,f=A[r+148|0]|A[r+149|0]<<8|(A[r+150|0]<<16|A[r+151|0]<<24),c[r+132|0]=f,c[r+133|0]=f>>>8,c[r+134|0]=f>>>16,c[r+135|0]=f>>>24,f=A[r+180|0]|A[r+181|0]<<8|(A[r+182|0]<<16|A[r+183|0]<<24),c[r+164|0]=f,c[r+165|0]=f>>>8,c[r+166|0]=f>>>16,c[r+167|0]=f>>>24,f=A[r+212|0]|A[r+213|0]<<8|(A[r+214|0]<<16|A[r+215|0]<<24),c[r+196|0]=f,c[r+197|0]=f>>>8,c[r+198|0]=f>>>16,c[r+199|0]=f>>>24,f=A[r+244|0]|A[r+245|0]<<8|(A[r+246|0]<<16|A[r+247|0]<<24),c[r+228|0]=f,c[r+229|0]=f>>>8,c[r+230|0]=f>>>16,c[r+231|0]=f>>>24,f=A[r+276|0]|A[r+277|0]<<8|(A[r+278|0]<<16|A[r+279|0]<<24),c[r+260|0]=f,c[r+261|0]=f>>>8,c[r+262|0]=f>>>16,c[r+263|0]=f>>>24,f=A[r+308|0]|A[r+309|0]<<8|(A[r+310|0]<<16|A[r+311|0]<<24),c[r+292|0]=f,c[r+293|0]=f>>>8,c[r+294|0]=f>>>16,c[r+295|0]=f>>>24,f=A[r+340|0]|A[r+341|0]<<8|(A[r+342|0]<<16|A[r+343|0]<<24),c[r+324|0]=f,c[r+325|0]=f>>>8,c[r+326|0]=f>>>16,c[r+327|0]=f>>>24,f=A[r+372|0]|A[r+373|0]<<8|(A[r+374|0]<<16|A[r+375|0]<<24),c[r+356|0]=f,c[r+357|0]=f>>>8,c[r+358|0]=f>>>16,c[r+359|0]=f>>>24,f=A[r+404|0]|A[r+405|0]<<8|(A[r+406|0]<<16|A[r+407|0]<<24),c[r+388|0]=f,c[r+389|0]=f>>>8,c[r+390|0]=f>>>16,c[r+391|0]=f>>>24,f=A[r+436|0]|A[r+437|0]<<8|(A[r+438|0]<<16|A[r+439|0]<<24),c[r+420|0]=f,c[r+421|0]=f>>>8,c[r+422|0]=f>>>16,c[r+423|0]=f>>>24,f=A[r+468|0]|A[r+469|0]<<8|(A[r+470|0]<<16|A[r+471|0]<<24),c[r+452|0]=f,c[r+453|0]=f>>>8,c[r+454|0]=f>>>16,c[r+455|0]=f>>>24,f=A[r+500|0]|A[r+501|0]<<8|(A[r+502|0]<<16|A[r+503|0]<<24),c[r+484|0]=f,c[r+485|0]=f>>>8,c[r+486|0]=f>>>16,c[r+487|0]=f>>>24,f=A[r+532|0]|A[r+533|0]<<8|(A[r+534|0]<<16|A[r+535|0]<<24),c[r+516|0]=f,c[r+517|0]=f>>>8,c[r+518|0]=f>>>16,c[r+519|0]=f>>>24,f=A[r+556|0]|A[r+557|0]<<8|(A[r+558|0]<<16|A[r+559|0]<<24),c[r+548|0]=f,c[r+549|0]=f>>>8,c[r+550|0]=f>>>16,c[r+551|0]=f>>>24,f=A[r+572|0]|A[r+573|0]<<8|(A[r+574|0]<<16|A[r+575|0]<<24),c[r+564|0]=f,c[r+565|0]=f>>>8,c[r+566|0]=f>>>16,c[r+567|0]=f>>>24,f=A[r+588|0]|A[r+589|0]<<8|(A[r+590|0]<<16|A[r+591|0]<<24),c[r+580|0]=f,c[r+581|0]=f>>>8,c[r+582|0]=f>>>16,c[r+583|0]=f>>>24,f=A[r+604|0]|A[r+605|0]<<8|(A[r+606|0]<<16|A[r+607|0]<<24),c[r+596|0]=f,c[r+597|0]=f>>>8,c[r+598|0]=f>>>16,c[r+599|0]=f>>>24,f=A[r+620|0]|A[r+621|0]<<8|(A[r+622|0]<<16|A[r+623|0]<<24),c[r+612|0]=f,c[r+613|0]=f>>>8,c[r+614|0]=f>>>16,c[r+615|0]=f>>>24,f=A[r+636|0]|A[r+637|0]<<8|(A[r+638|0]<<16|A[r+639|0]<<24),c[r+628|0]=f,c[r+629|0]=f>>>8,c[r+630|0]=f>>>16,c[r+631|0]=f>>>24,f=A[r+652|0]|A[r+653|0]<<8|(A[r+654|0]<<16|A[r+655|0]<<24),c[r+644|0]=f,c[r+645|0]=f>>>8,c[r+646|0]=f>>>16,c[r+647|0]=f>>>24,f=A[r+668|0]|A[r+669|0]<<8|(A[r+670|0]<<16|A[r+671|0]<<24),c[r+660|0]=f,c[r+661|0]=f>>>8,c[r+662|0]=f>>>16,c[r+663|0]=f>>>24,f=A[r+684|0]|A[r+685|0]<<8|(A[r+686|0]<<16|A[r+687|0]<<24),c[r+676|0]=f,c[r+677|0]=f>>>8,c[r+678|0]=f>>>16,c[r+679|0]=f>>>24,f=A[r+700|0]|A[r+701|0]<<8|(A[r+702|0]<<16|A[r+703|0]<<24),c[r+692|0]=f,c[r+693|0]=f>>>8,c[r+694|0]=f>>>16,c[r+695|0]=f>>>24,f=A[r+716|0]|A[r+717|0]<<8|(A[r+718|0]<<16|A[r+719|0]<<24),c[r+708|0]=f,c[r+709|0]=f>>>8,c[r+710|0]=f>>>16,c[r+711|0]=f>>>24,f=A[r+732|0]|A[r+733|0]<<8|(A[r+734|0]<<16|A[r+735|0]<<24),c[r+724|0]=f,c[r+725|0]=f>>>8,c[r+726|0]=f>>>16,c[r+727|0]=f>>>24,f=A[r+748|0]|A[r+749|0]<<8|(A[r+750|0]<<16|A[r+751|0]<<24),c[r+740|0]=f,c[r+741|0]=f>>>8,c[r+742|0]=f>>>16,c[r+743|0]=f>>>24,f=A[r+764|0]|A[r+765|0]<<8|(A[r+766|0]<<16|A[r+767|0]<<24),c[r+756|0]=f,c[r+757|0]=f>>>8,c[r+758|0]=f>>>16,c[r+759|0]=f>>>24,f=A[r+780|0]|A[r+781|0]<<8|(A[r+782|0]<<16|A[r+783|0]<<24),c[r+772|0]=f,c[r+773|0]=f>>>8,c[r+774|0]=f>>>16,c[r+775|0]=f>>>24,f=A[r+796|0]|A[r+797|0]<<8|(A[r+798|0]<<16|A[r+799|0]<<24),c[r+788|0]=f,c[r+789|0]=f>>>8,c[r+790|0]=f>>>16,c[r+791|0]=f>>>24,f=A[r+812|0]|A[r+813|0]<<8|(A[r+814|0]<<16|A[r+815|0]<<24),c[r+804|0]=f,c[r+805|0]=f>>>8,c[r+806|0]=f>>>16,c[r+807|0]=f>>>24,f=A[r+828|0]|A[r+829|0]<<8|(A[r+830|0]<<16|A[r+831|0]<<24),c[r+820|0]=f,c[r+821|0]=f>>>8,c[r+822|0]=f>>>16,c[r+823|0]=f>>>24),f=s[e+2252>>2]+(G<<5)|0,v=w+W(G,800)|0,S=s[v+788>>2];e:{t:{i:{r:{if(!Mi){if(F=A[f+4|0]|A[f+5|0]<<8|(A[f+6|0]<<16|A[f+7|0]<<24),y=hi,N=A[f|0]|A[f+1|0]<<8|(A[f+2|0]<<16|A[f+3|0]<<24),c[y|0]=N,c[y+1|0]=N>>>8,c[y+2|0]=N>>>16,c[y+3|0]=N>>>24,c[y+4|0]=F,c[y+5|0]=F>>>8,c[y+6|0]=F>>>16,c[y+7|0]=F>>>24,F=A[f+12|0]|A[f+13|0]<<8|(A[f+14|0]<<16|A[f+15|0]<<24),N=A[f+8|0]|A[f+9|0]<<8|(A[f+10|0]<<16|A[f+11|0]<<24),c[y+8|0]=N,c[y+9|0]=N>>>8,c[y+10|0]=N>>>16,c[y+11|0]=N>>>24,c[y+12|0]=F,c[y+13|0]=F>>>8,c[y+14|0]=F>>>16,c[y+15|0]=F>>>24,y=A[f+20|0]|A[f+21|0]<<8|(A[f+22|0]<<16|A[f+23|0]<<24),F=A[f+16|0]|A[f+17|0]<<8|(A[f+18|0]<<16|A[f+19|0]<<24),c[r+552|0]=F,c[r+553|0]=F>>>8,c[r+554|0]=F>>>16,c[r+555|0]=F>>>24,c[r+556|0]=y,c[r+557|0]=y>>>8,c[r+558|0]=y>>>16,c[r+559|0]=y>>>24,y=A[f+28|0]|A[f+29|0]<<8|(A[f+30|0]<<16|A[f+31|0]<<24),w=A[f+24|0]|A[f+25|0]<<8|(A[f+26|0]<<16|A[f+27|0]<<24),c[r+568|0]=w,c[r+569|0]=w>>>8,c[r+570|0]=w>>>16,c[r+571|0]=w>>>24,c[r+572|0]=y,c[r+573|0]=y>>>8,c[r+574|0]=y>>>16,c[r+575|0]=y>>>24,A[v+768|0])break r;break t}if(!A[v+768|0])break t;w=s[$e>>2];break i}if((G|0)>=(s[e+288>>2]+-1|0)){w=A[f+15|0],s[$e>>2]=W(w,16843009),w=w|w<<8,w=w<<16|w;break i}w=A[f+32|0]|A[f+33|0]<<8|(A[f+34|0]<<16|A[f+35|0]<<24),s[$e>>2]=w}for(s[r+280>>2]=w,s[r+408>>2]=w,s[r+152>>2]=w,w=0;;){y=tr[(w<<1)+4880>>1]+ce|0,Je[s[(A[(v+w|0)+769|0]<<2)+10736>>2]](y),F=v+(w<<5)|0;i:{r:switch((S>>>30|0)+-1|0){case 2:Je[s[2703]](F,y,0);break i;case 1:Je[s[2704]](F,y);break i;case 0:break r;default:break i}Je[s[2706]](F,y)}if(S=S<<2,w=w+1|0,(w|0)==16)break}N=G?At:gt;break e}if(w=A[v+769|0],N=G?At:gt,Je[s[((w||N)<<2)+10704>>2]](ce),w=0,!S)break e;for(;;){y=v+(w<<5)|0,F=tr[(w<<1)+4880>>1]+ce|0;t:{i:switch((S>>>30|0)+-1|0){case 2:Je[s[2703]](y,F,0);break t;case 1:Je[s[2704]](y,F);break t;case 0:break i;default:break t}Je[s[2706]](y,F)}if(S=S<<2,w=w+1|0,(w|0)==16)break}}w=s[v+792>>2],y=A[v+785|0],y=((y||N)<<2)+10784|0,Je[s[y>>2]](Ne),Je[s[y>>2]](xe);e:{if(!(w&255))break e;if(y=v+512|0,w&170){Je[s[2705]](y,Ne);break e}Je[s[2707]](y,Ne)}e:{if(!(w&65280))break e;if(y=v+640|0,w&43520){Je[s[2705]](y,xe);break e}Je[s[2707]](y,xe)}for(($|0)<(s[e+292>>2]+-1|0)&&(w=yi,y=A[w+4|0]|A[w+5|0]<<8|(A[w+6|0]<<16|A[w+7|0]<<24),v=A[w|0]|A[w+1|0]<<8|(A[w+2|0]<<16|A[w+3|0]<<24),c[f|0]=v,c[f+1|0]=v>>>8,c[f+2|0]=v>>>16,c[f+3|0]=v>>>24,c[f+4|0]=y,c[f+5|0]=y>>>8,c[f+6|0]=y>>>16,c[f+7|0]=y>>>24,y=A[w+12|0]|A[w+13|0]<<8|(A[w+14|0]<<16|A[w+15|0]<<24),w=A[w+8|0]|A[w+9|0]<<8|(A[w+10|0]<<16|A[w+11|0]<<24),c[f+8|0]=w,c[f+9|0]=w>>>8,c[f+10|0]=w>>>16,c[f+11|0]=w>>>24,c[f+12|0]=y,c[f+13|0]=y>>>8,c[f+14|0]=y>>>16,c[f+15|0]=y>>>24,w=A[r+812|0]|A[r+813|0]<<8|(A[r+814|0]<<16|A[r+815|0]<<24),y=A[r+808|0]|A[r+809|0]<<8|(A[r+810|0]<<16|A[r+811|0]<<24),c[f+16|0]=y,c[f+17|0]=y>>>8,c[f+18|0]=y>>>16,c[f+19|0]=y>>>24,c[f+20|0]=w,c[f+21|0]=w>>>8,c[f+22|0]=w>>>16,c[f+23|0]=w>>>24,w=A[r+828|0]|A[r+829|0]<<8|(A[r+830|0]<<16|A[r+831|0]<<24),y=A[r+824|0]|A[r+825|0]<<8|(A[r+826|0]<<16|A[r+827|0]<<24),c[f+24|0]=y,c[f+25|0]=y>>>8,c[f+26|0]=y>>>16,c[f+27|0]=y>>>24,c[f+28|0]=w,c[f+29|0]=w>>>8,c[f+30|0]=w>>>16,c[f+31|0]=w>>>24),Vi=s[e+2284>>2],F=s[e+2272>>2],N=s[e+2276>>2],f=ce,v=A[f+4|0]|A[f+5|0]<<8|(A[f+6|0]<<16|A[f+7|0]<<24),y=(s[e+2268>>2]+(G<<4)|0)+W(s[e+2280>>2],Yt)|0,S=A[f|0]|A[f+1|0]<<8|(A[f+2|0]<<16|A[f+3|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[f+12|0]|A[f+13|0]<<8|(A[f+14|0]<<16|A[f+15|0]<<24),f=A[f+8|0]|A[f+9|0]<<8|(A[f+10|0]<<16|A[f+11|0]<<24),c[y+8|0]=f,c[y+9|0]=f>>>8,c[y+10|0]=f>>>16,c[y+11|0]=f>>>24,c[y+12|0]=v,c[y+13|0]=v>>>8,c[y+14|0]=v>>>16,c[y+15|0]=v>>>24,f=G<<3,ar=f+N|0,qr=f+F|0,w=1;v=(w<<5)+ce|0,F=A[v+4|0]|A[v+5|0]<<8|(A[v+6|0]<<16|A[v+7|0]<<24),f=y+W(s[e+2280>>2],w)|0,N=A[v|0]|A[v+1|0]<<8|(A[v+2|0]<<16|A[v+3|0]<<24),c[f|0]=N,c[f+1|0]=N>>>8,c[f+2|0]=N>>>16,c[f+3|0]=N>>>24,c[f+4|0]=F,c[f+5|0]=F>>>8,c[f+6|0]=F>>>16,c[f+7|0]=F>>>24,S=A[v+12|0]|A[v+13|0]<<8|(A[v+14|0]<<16|A[v+15|0]<<24),v=A[v+8|0]|A[v+9|0]<<8|(A[v+10|0]<<16|A[v+11|0]<<24),c[f+8|0]=v,c[f+9|0]=v>>>8,c[f+10|0]=v>>>16,c[f+11|0]=v>>>24,c[f+12|0]=S,c[f+13|0]=S>>>8,c[f+14|0]=S>>>16,c[f+15|0]=S>>>24,w=w+1|0,(w|0)!=16;);if(y=A[r+588|0]|A[r+589|0]<<8|(A[r+590|0]<<16|A[r+591|0]<<24),S=W(Bt,Vi),f=S+qr|0,v=A[r+584|0]|A[r+585|0]<<8|(A[r+586|0]<<16|A[r+587|0]<<24),c[f|0]=v,c[f+1|0]=v>>>8,c[f+2|0]=v>>>16,c[f+3|0]=v>>>24,c[f+4|0]=y,c[f+5|0]=y>>>8,c[f+6|0]=y>>>16,c[f+7|0]=y>>>24,w=S+ar|0,y=w,v=A[r+604|0]|A[r+605|0]<<8|(A[r+606|0]<<16|A[r+607|0]<<24),S=A[r+600|0]|A[r+601|0]<<8|(A[r+602|0]<<16|A[r+603|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+620|0]|A[r+621|0]<<8|(A[r+622|0]<<16|A[r+623|0]<<24),y=f+s[e+2284>>2]|0,S=A[r+616|0]|A[r+617|0]<<8|(A[r+618|0]<<16|A[r+619|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+636|0]|A[r+637|0]<<8|(A[r+638|0]<<16|A[r+639|0]<<24),y=w+s[e+2284>>2]|0,S=A[r+632|0]|A[r+633|0]<<8|(A[r+634|0]<<16|A[r+635|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+652|0]|A[r+653|0]<<8|(A[r+654|0]<<16|A[r+655|0]<<24),y=f+(s[e+2284>>2]<<1)|0,S=A[r+648|0]|A[r+649|0]<<8|(A[r+650|0]<<16|A[r+651|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+668|0]|A[r+669|0]<<8|(A[r+670|0]<<16|A[r+671|0]<<24),y=w+(s[e+2284>>2]<<1)|0,S=A[r+664|0]|A[r+665|0]<<8|(A[r+666|0]<<16|A[r+667|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+684|0]|A[r+685|0]<<8|(A[r+686|0]<<16|A[r+687|0]<<24),y=f+W(s[e+2284>>2],3)|0,S=A[r+680|0]|A[r+681|0]<<8|(A[r+682|0]<<16|A[r+683|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+700|0]|A[r+701|0]<<8|(A[r+702|0]<<16|A[r+703|0]<<24),y=w+W(s[e+2284>>2],3)|0,S=A[r+696|0]|A[r+697|0]<<8|(A[r+698|0]<<16|A[r+699|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+716|0]|A[r+717|0]<<8|(A[r+718|0]<<16|A[r+719|0]<<24),y=f+(s[e+2284>>2]<<2)|0,S=A[r+712|0]|A[r+713|0]<<8|(A[r+714|0]<<16|A[r+715|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+732|0]|A[r+733|0]<<8|(A[r+734|0]<<16|A[r+735|0]<<24),y=w+(s[e+2284>>2]<<2)|0,S=A[r+728|0]|A[r+729|0]<<8|(A[r+730|0]<<16|A[r+731|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+748|0]|A[r+749|0]<<8|(A[r+750|0]<<16|A[r+751|0]<<24),y=f+W(s[e+2284>>2],5)|0,S=A[r+744|0]|A[r+745|0]<<8|(A[r+746|0]<<16|A[r+747|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+764|0]|A[r+765|0]<<8|(A[r+766|0]<<16|A[r+767|0]<<24),y=w+W(s[e+2284>>2],5)|0,S=A[r+760|0]|A[r+761|0]<<8|(A[r+762|0]<<16|A[r+763|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+780|0]|A[r+781|0]<<8|(A[r+782|0]<<16|A[r+783|0]<<24),y=f+W(s[e+2284>>2],6)|0,S=A[r+776|0]|A[r+777|0]<<8|(A[r+778|0]<<16|A[r+779|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,v=A[r+796|0]|A[r+797|0]<<8|(A[r+798|0]<<16|A[r+799|0]<<24),y=w+W(s[e+2284>>2],6)|0,S=A[r+792|0]|A[r+793|0]<<8|(A[r+794|0]<<16|A[r+795|0]<<24),c[y|0]=S,c[y+1|0]=S>>>8,c[y+2|0]=S>>>16,c[y+3|0]=S>>>24,c[y+4|0]=v,c[y+5|0]=v>>>8,c[y+6|0]=v>>>16,c[y+7|0]=v>>>24,y=A[r+812|0]|A[r+813|0]<<8|(A[r+814|0]<<16|A[r+815|0]<<24),f=f+W(s[e+2284>>2],7)|0,v=A[r+808|0]|A[r+809|0]<<8|(A[r+810|0]<<16|A[r+811|0]<<24),c[f|0]=v,c[f+1|0]=v>>>8,c[f+2|0]=v>>>16,c[f+3|0]=v>>>24,c[f+4|0]=y,c[f+5|0]=y>>>8,c[f+6|0]=y>>>16,c[f+7|0]=y>>>24,f=w+W(s[e+2284>>2],7)|0,w=A[r+828|0]|A[r+829|0]<<8|(A[r+830|0]<<16|A[r+831|0]<<24),y=A[r+824|0]|A[r+825|0]<<8|(A[r+826|0]<<16|A[r+827|0]<<24),c[f|0]=y,c[f+1|0]=y>>>8,c[f+2|0]=y>>>16,c[f+3|0]=y>>>24,c[f+4|0]=w,c[f+5|0]=w>>>8,c[f+6|0]=w>>>16,c[f+7|0]=w>>>24,G=G+1|0,!((G|0)<s[e+288>>2]))break}}function da(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;ce=br-16|0,br=ce;e:{t:{i:{r:{o:{l:{n:{u:{s:{a:{f:{c:{if(e>>>0<=244){if(w=s[2884],S=e>>>0<11?16:e+11&-8,t=S>>>3|0,e=w>>>t|0,e&3){f=t+((e^-1)&1)|0,t=f<<3,y=s[t+11584>>2],e=y+8|0,r=s[y+8>>2],t=t+11576|0;h:{if((r|0)==(t|0)){xe=11536,Ne=Ws(-2,f)&w,s[xe>>2]=Ne;break h}s[r+12>>2]=t,s[t+8>>2]=r}t=f<<3,s[y+4>>2]=t|3,t=t+y|0,s[t+4>>2]=s[t+4>>2]|1;break e}if($=s[2886],S>>>0<=$>>>0)break c;if(e){r=e<<t,e=2<<t,e=r&(0-e|e),t=(0-e&e)+-1|0,e=t>>>12&16,r=e,t=t>>>e|0,e=t>>>5&8,r=r|e,t=t>>>e|0,e=t>>>2&4,r=r|e,t=t>>>e|0,e=t>>>1&2,r=r|e,t=t>>>e|0,e=t>>>1&1,r=(r|e)+(t>>>e|0)|0,e=r<<3,v=s[e+11584>>2],t=s[v+8>>2],e=e+11576|0;h:{if((t|0)==(e|0)){w=Ws(-2,r)&w,s[2884]=w;break h}s[t+12>>2]=e,s[e+8>>2]=t}if(e=v+8|0,s[v+4>>2]=S|3,f=v+S|0,t=r<<3,y=t-S|0,s[f+4>>2]=y|1,s[t+v>>2]=y,$){t=$>>>3|0,r=(t<<3)+11576|0,S=s[2889],t=1<<t;h:{if(!(t&w)){s[2884]=t|w,t=r;break h}t=s[r+8>>2]}s[r+8>>2]=S,s[t+12>>2]=S,s[S+12>>2]=r,s[S+8>>2]=t}s[2889]=f,s[2886]=y;break e}if(F=s[2885],!F)break c;for(t=(F&0-F)+-1|0,e=t>>>12&16,r=e,t=t>>>e|0,e=t>>>5&8,r=r|e,t=t>>>e|0,e=t>>>2&4,r=r|e,t=t>>>e|0,e=t>>>1&2,r=r|e,t=t>>>e|0,e=t>>>1&1,t=s[((r|e)+(t>>>e|0)<<2)+11840>>2],y=(s[t+4>>2]&-8)-S|0,r=t;;){h:{if(e=s[r+16>>2],!e&&(e=s[r+20>>2],!e))break h;r=(s[e+4>>2]&-8)-S|0,f=r>>>0<y>>>0,y=f?r:y,t=f?e:t,r=e;continue}break}if(N=t+S|0,N>>>0<=t>>>0)break f;if(G=s[t+24>>2],f=s[t+12>>2],(f|0)!=(t|0)){e=s[t+8>>2],s[e+12>>2]=f,s[f+8>>2]=e;break t}if(r=t+20|0,e=s[r>>2],!e){if(e=s[t+16>>2],!e)break a;r=t+16|0}for(;v=r,f=e,r=e+20|0,e=s[r>>2],!(!e&&(r=f+16|0,e=s[f+16>>2],!e)););s[v>>2]=0;break t}if(S=-1,e>>>0>4294967231||(e=e+11|0,S=e&-8,F=s[2885],!F))break c;e=e>>>8|0,v=0;h:{if(!e||(v=31,S>>>0>16777215))break h;t=e+1048320>>>16&8,e=e<<t,y=e+520192>>>16&4,e=e<<y,r=e+245760>>>16&2,e=(e<<r>>>15|0)-(r|(t|y))|0,v=(e<<1|S>>>e+21&1)+28|0}y=0-S|0,r=s[(v<<2)+11840>>2];h:{d:{p:{if(!r){e=0;break p}for(e=0,t=S<<((v|0)==31?0:25-(v>>>1|0)|0);;){m:{if(w=(s[r+4>>2]&-8)-S|0,w>>>0>=y>>>0||(f=r,y=w,y))break m;y=0,e=r;break d}if(w=s[r+20>>2],r=s[((t>>>29&4)+r|0)+16>>2],e=w?(w|0)==(r|0)?e:w:e,t=t<<1,!r)break}}if(!(e|f)){if(e=2<<v,e=(0-e|e)&F,!e)break c;t=(e&0-e)+-1|0,e=t>>>12&16,r=e,t=t>>>e|0,e=t>>>5&8,r=r|e,t=t>>>e|0,e=t>>>2&4,r=r|e,t=t>>>e|0,e=t>>>1&2,r=r|e,t=t>>>e|0,e=t>>>1&1,e=s[((r|e)+(t>>>e|0)<<2)+11840>>2]}if(!e)break h}for(;t=(s[e+4>>2]&-8)-S|0,r=t>>>0<y>>>0,y=r?t:y,f=r?e:f,t=s[e+16>>2],t?e=t:e=s[e+20>>2],!!e;);}if(!f|y>>>0>=s[2886]-S>>>0)break c;if(v=f+S|0,v>>>0<=f>>>0)break f;if(N=s[f+24>>2],t=s[f+12>>2],(f|0)!=(t|0)){e=s[f+8>>2],s[e+12>>2]=t,s[t+8>>2]=e;break i}if(r=f+20|0,e=s[r>>2],!e){if(e=s[f+16>>2],!e)break s;r=f+16|0}for(;w=r,t=e,r=e+20|0,e=s[r>>2],!(!e&&(r=t+16|0,e=s[t+16>>2],!e)););s[w>>2]=0;break i}if(r=s[2886],r>>>0>=S>>>0){f=s[2889],t=r-S|0;c:{if(t>>>0>=16){s[2886]=t,e=f+S|0,s[2889]=e,s[e+4>>2]=t|1,s[r+f>>2]=t,s[f+4>>2]=S|3;break c}s[2889]=0,s[2886]=0,s[f+4>>2]=r|3,e=r+f|0,s[e+4>>2]=s[e+4>>2]|1}e=f+8|0;break e}if(F=s[2887],F>>>0>S>>>0){t=F-S|0,s[2887]=t,r=s[2890],e=r+S|0,s[2890]=e,s[e+4>>2]=t|1,s[r+4>>2]=S|3,e=r+8|0;break e}if(e=0,N=S+47|0,t=N,s[3002]?r=s[3004]:(s[3005]=-1,s[3006]=-1,s[3003]=4096,s[3004]=4096,s[3002]=ce+12&-16^1431655768,s[3007]=0,s[2995]=0,r=4096),v=t+r|0,w=0-r|0,r=v&w,r>>>0<=S>>>0||(y=s[2994],y&&(f=s[2992],t=f+r|0,t>>>0<=f>>>0|t>>>0>y>>>0)))break e;if(A[11980]&4)break l;c:{h:{if(f=s[2890],f)for(e=11984;;){if(t=s[e>>2],t+s[e+4>>2]>>>0>f>>>0&&t>>>0<=f>>>0)break h;if(e=s[e+8>>2],!e)break}if(t=_a(0),(t|0)==-1||(w=r,f=s[3003],e=f+-1|0,e&t&&(w=(r-t|0)+(e+t&0-f)|0),w>>>0<=S>>>0|w>>>0>2147483646)||(y=s[2994],y&&(f=s[2992],e=f+w|0,e>>>0<=f>>>0|e>>>0>y>>>0)))break n;if(e=_a(w),(t|0)!=(e|0))break c;break o}if(w=w&v-F,w>>>0>2147483646)break n;if(t=_a(w),(t|0)==(s[e>>2]+s[e+4>>2]|0))break u;e=t}if(!((e|0)==-1|S+48>>>0<=w>>>0)){if(t=s[3004],t=t+(N-w|0)&0-t,t>>>0>2147483646){t=e;break o}if((_a(t)|0)!=-1){w=t+w|0,t=e;break o}_a(0-w|0);break n}if(t=e,(e|0)!=-1)break o;break n}Os()}f=0;break t}t=0;break i}if((t|0)!=-1)break o}s[2995]=s[2995]|4}if(r>>>0>2147483646||(t=_a(r),e=_a(0),t>>>0>=e>>>0|(t|0)==-1|(e|0)==-1)||(w=e-t|0,w>>>0<=S+40>>>0))break r}e=s[2992]+w|0,s[2992]=e,e>>>0>zr[2993]&&(s[2993]=e);o:{l:{n:{if(y=s[2890],y){for(e=11984;;){if(f=s[e>>2],r=s[e+4>>2],(f+r|0)==(t|0))break n;if(e=s[e+8>>2],!e)break}break l}for(e=s[2888],t>>>0>=e>>>0&&e||(s[2888]=t),e=0,s[2997]=w,s[2996]=t,s[2892]=-1,s[2893]=s[3002],s[2999]=0;f=e<<3,r=f+11576|0,s[f+11584>>2]=r,s[f+11588>>2]=r,e=e+1|0,(e|0)!=32;);f=w+-40|0,e=t+8&7?-8-t&7:0,r=f-e|0,s[2887]=r,e=e+t|0,s[2890]=e,s[e+4>>2]=r|1,s[(t+f|0)+4>>2]=40,s[2891]=s[3006];break o}if(A[e+12|0]&8|t>>>0<=y>>>0|f>>>0>y>>>0)break l;s[e+4>>2]=r+w,e=y+8&7?-8-y&7:0,r=e+y|0,s[2890]=r,t=s[2887]+w|0,e=t-e|0,s[2887]=e,s[r+4>>2]=e|1,s[(t+y|0)+4>>2]=40,s[2891]=s[3006];break o}f=s[2888],t>>>0<f>>>0&&(s[2888]=t,f=0),r=t+w|0,e=11984;l:{n:{u:{s:{a:{f:{for(;;){if((r|0)!=s[e>>2]){if(e=s[e+8>>2],e)continue;break f}break}if(!(A[e+12|0]&8))break a}for(e=11984;;){if(r=s[e>>2],r>>>0<=y>>>0&&(v=r+s[e+4>>2]|0,v>>>0>y>>>0))break s;e=s[e+8>>2]}}if(s[e>>2]=t,s[e+4>>2]=s[e+4>>2]+w,F=(t+8&7?-8-t&7:0)+t|0,s[F+4>>2]=S|3,t=r+(r+8&7?-8-r&7:0)|0,e=(t-F|0)-S|0,v=S+F|0,(t|0)==(y|0)){s[2890]=v,e=s[2887]+e|0,s[2887]=e,s[v+4>>2]=e|1;break n}if(s[2889]==(t|0)){s[2889]=v,e=s[2886]+e|0,s[2886]=e,s[v+4>>2]=e|1,s[e+v>>2]=e;break n}if(r=s[t+4>>2],(r&3)==1){N=r&-8;a:{if(r>>>0<=255){if(y=s[t+8>>2],r=r>>>3|0,f=s[t+12>>2],(f|0)==(y|0)){xe=11536,Ne=s[2884]&Ws(-2,r),s[xe>>2]=Ne;break a}s[y+12>>2]=f,s[f+8>>2]=y;break a}G=s[t+24>>2],w=s[t+12>>2];f:{if((w|0)!=(t|0)){r=s[t+8>>2],s[r+12>>2]=w,s[w+8>>2]=r;break f}c:{if(y=t+20|0,S=s[y>>2],S||(y=t+16|0,S=s[y>>2],S))break c;w=0;break f}for(;r=y,w=S,y=w+20|0,S=s[y>>2],!(!S&&(y=w+16|0,S=s[w+16>>2],!S)););s[r>>2]=0}if(!G)break a;f=s[t+28>>2],r=(f<<2)+11840|0;f:{if(s[r>>2]==(t|0)){if(s[r>>2]=w,w)break f;xe=11540,Ne=s[2885]&Ws(-2,f),s[xe>>2]=Ne;break a}if(s[G+(s[G+16>>2]==(t|0)?16:20)>>2]=w,!w)break a}if(s[w+24>>2]=G,r=s[t+16>>2],r&&(s[w+16>>2]=r,s[r+24>>2]=w),r=s[t+20>>2],!r)break a;s[w+20>>2]=r,s[r+24>>2]=w}t=t+N|0,e=e+N|0}if(s[t+4>>2]=s[t+4>>2]&-2,s[v+4>>2]=e|1,s[e+v>>2]=e,e>>>0<=255){e=e>>>3|0,t=(e<<3)+11576|0,r=s[2884],e=1<<e;a:{if(!(r&e)){s[2884]=e|r,e=t;break a}e=s[t+8>>2]}s[t+8>>2]=v,s[e+12>>2]=v,s[v+12>>2]=t,s[v+8>>2]=e;break n}t=v,f=e>>>8|0,r=0;a:{if(!f||(r=31,e>>>0>16777215))break a;r=f,f=f+1048320>>>16&8,r=r<<f,w=r+520192>>>16&4,r=r<<w,y=r+245760>>>16&2,r=(r<<y>>>15|0)-(y|(f|w))|0,r=(r<<1|e>>>r+21&1)+28|0}s[t+28>>2]=r,s[v+16>>2]=0,s[v+20>>2]=0,w=(r<<2)+11840|0,f=s[2885],t=1<<r;a:{if(!(f&t)){s[2885]=t|f,s[w>>2]=v,s[v+24>>2]=w;break a}for(y=e<<((r|0)==31?0:25-(r>>>1|0)|0),t=s[w>>2];;){if(r=t,(s[t+4>>2]&-8)==(e|0))break u;if(t=y>>>29|0,y=y<<1,f=(r+(t&4)|0)+16|0,t=s[f>>2],!t)break}s[f>>2]=v,s[v+24>>2]=r}s[v+12>>2]=v,s[v+8>>2]=v;break n}for(f=w+-40|0,e=t+8&7?-8-t&7:0,r=f-e|0,s[2887]=r,e=e+t|0,s[2890]=e,s[e+4>>2]=r|1,s[(t+f|0)+4>>2]=40,s[2891]=s[3006],e=(v+(v+-39&7?39-v&7:0)|0)+-47|0,r=e>>>0<y+16>>>0?y:e,s[r+4>>2]=27,e=s[2999],s[r+16>>2]=s[2998],s[r+20>>2]=e,e=s[2997],s[r+8>>2]=s[2996],s[r+12>>2]=e,s[2998]=r+8,s[2997]=w,s[2996]=t,s[2999]=0,e=r+24|0;s[e+4>>2]=7,t=e+8|0,e=e+4|0,v>>>0>t>>>0;);if((r|0)==(y|0))break o;if(s[r+4>>2]=s[r+4>>2]&-2,v=r-y|0,s[y+4>>2]=v|1,s[r>>2]=v,v>>>0<=255){e=v>>>3|0,t=(e<<3)+11576|0,r=s[2884],e=1<<e;s:{if(!(r&e)){s[2884]=e|r,e=t;break s}e=s[t+8>>2]}s[t+8>>2]=y,s[e+12>>2]=y,s[y+12>>2]=t,s[y+8>>2]=e;break o}s[y+16>>2]=0,s[y+20>>2]=0,e=y,r=v>>>8|0,t=0;s:{if(!r||(t=31,v>>>0>16777215))break s;t=r,r=r+1048320>>>16&8,t=t<<r,w=t+520192>>>16&4,t=t<<w,f=t+245760>>>16&2,t=(t<<f>>>15|0)-(f|(r|w))|0,t=(t<<1|v>>>t+21&1)+28|0}s[e+28>>2]=t,f=(t<<2)+11840|0,r=s[2885],e=1<<t;s:{if(!(r&e)){s[2885]=e|r,s[f>>2]=y,s[y+24>>2]=f;break s}for(e=v<<((t|0)==31?0:25-(t>>>1|0)|0),t=s[f>>2];;){if(r=t,(v|0)==(s[t+4>>2]&-8))break l;if(t=e>>>29|0,e=e<<1,f=(r+(t&4)|0)+16|0,t=s[f>>2],!t)break}s[f>>2]=y,s[y+24>>2]=r}s[y+12>>2]=y,s[y+8>>2]=y;break o}e=s[r+8>>2],s[e+12>>2]=v,s[r+8>>2]=v,s[v+24>>2]=0,s[v+12>>2]=r,s[v+8>>2]=e}e=F+8|0;break e}e=s[r+8>>2],s[e+12>>2]=y,s[r+8>>2]=y,s[y+24>>2]=0,s[y+12>>2]=r,s[y+8>>2]=e}if(e=s[2887],e>>>0<=S>>>0)break r;t=e-S|0,s[2887]=t,r=s[2890],e=r+S|0,s[2890]=e,s[e+4>>2]=t|1,s[r+4>>2]=S|3,e=r+8|0;break e}s[2865]=48,e=0;break e}i:{if(!N)break i;r=s[f+28>>2],e=(r<<2)+11840|0;r:{if(s[e>>2]==(f|0)){if(s[e>>2]=t,t)break r;F=Ws(-2,r)&F,s[2885]=F;break i}if(s[N+(s[N+16>>2]==(f|0)?16:20)>>2]=t,!t)break i}if(s[t+24>>2]=N,e=s[f+16>>2],e&&(s[t+16>>2]=e,s[e+24>>2]=t),e=s[f+20>>2],!e)break i;s[t+20>>2]=e,s[e+24>>2]=t}i:{if(y>>>0<=15){e=y+S|0,s[f+4>>2]=e|3,e=e+f|0,s[e+4>>2]=s[e+4>>2]|1;break i}if(s[f+4>>2]=S|3,s[v+4>>2]=y|1,s[y+v>>2]=y,y>>>0<=255){e=y>>>3|0,t=(e<<3)+11576|0,r=s[2884],e=1<<e;r:{if(!(r&e)){s[2884]=e|r,e=t;break r}e=s[t+8>>2]}s[t+8>>2]=v,s[e+12>>2]=v,s[v+12>>2]=t,s[v+8>>2]=e;break i}e=v,r=y>>>8|0,t=0;r:{if(!r||(t=31,y>>>0>16777215))break r;t=r,r=r+1048320>>>16&8,t=t<<r,S=t+520192>>>16&4,t=t<<S,w=t+245760>>>16&2,t=(t<<w>>>15|0)-(w|(r|S))|0,t=(t<<1|y>>>t+21&1)+28|0}s[e+28>>2]=t,s[v+16>>2]=0,s[v+20>>2]=0,r=(t<<2)+11840|0;r:{e=1<<t;o:{if(!(e&F)){s[2885]=e|F,s[r>>2]=v,s[v+24>>2]=r;break o}for(e=y<<((t|0)==31?0:25-(t>>>1|0)|0),S=s[r>>2];;){if(t=S,(s[t+4>>2]&-8)==(y|0))break r;if(r=e>>>29|0,e=e<<1,r=(t+(r&4)|0)+16|0,S=s[r>>2],!S)break}s[r>>2]=v,s[v+24>>2]=t}s[v+12>>2]=v,s[v+8>>2]=v;break i}e=s[t+8>>2],s[e+12>>2]=v,s[t+8>>2]=v,s[v+24>>2]=0,s[v+12>>2]=t,s[v+8>>2]=e}e=f+8|0;break e}t:{if(!G)break t;r=s[t+28>>2],e=(r<<2)+11840|0;i:{if(s[e>>2]==(t|0)){if(s[e>>2]=f,f)break i;xe=11540,Ne=Ws(-2,r)&F,s[xe>>2]=Ne;break t}if(s[(s[G+16>>2]==(t|0)?16:20)+G>>2]=f,!f)break t}if(s[f+24>>2]=G,e=s[t+16>>2],e&&(s[f+16>>2]=e,s[e+24>>2]=f),e=s[t+20>>2],!e)break t;s[f+20>>2]=e,s[e+24>>2]=f}t:{if(y>>>0<=15){e=y+S|0,s[t+4>>2]=e|3,e=e+t|0,s[e+4>>2]=s[e+4>>2]|1;break t}if(s[t+4>>2]=S|3,s[N+4>>2]=y|1,s[y+N>>2]=y,$){e=$>>>3|0,r=(e<<3)+11576|0,f=s[2889],e=1<<e;i:{if(!(e&w)){s[2884]=e|w,e=r;break i}e=s[r+8>>2]}s[r+8>>2]=f,s[e+12>>2]=f,s[f+12>>2]=r,s[f+8>>2]=e}s[2889]=N,s[2886]=y}e=t+8|0}return br=ce+16|0,e|0}function js(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0;if(s[t+288>>2]>=1)for(Mi=t+2248|0;;){if(N=s[t+2244>>2],$=s[t+2304>>2],v=0,s[t+108>>2]){S=s[e+4>>2],y=A[t+904|0],f=s[e+8>>2];e:{if((f|0)>-1)break e;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,f=f+24|0,s[e+8>>2]=f,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break e}hn(e),f=s[e+8>>2]}w=e,G=f,v=s[e>>2],F=v>>>f|0,y=W(y,S)>>>8|0;e:{if(F>>>0>y>>>0){v=((y^-1)<<f)+v|0,s[e>>2]=v,S=S-y|0;break e}S=y+1|0}r=fn(S)^24,f=G-r|0,s[w+8>>2]=f,w=(S<<r)+-1|0,s[e+4>>2]=w;e:{if(F>>>0<=y>>>0){S=A[t+905|0];t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){y=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=v;break t}hn(e),v=s[e>>2],f=s[e+8>>2]}y=v>>>f|0,r=W(w,S)>>>8|0;t:{if(y>>>0>r>>>0){s[e>>2]=((r^-1)<<f)+v,w=w-r|0;break t}w=r+1|0}v=y>>>0>r>>>0,r=fn(w)^24,f=f-r|0,r=w<<r;break e}S=A[t+906|0];t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){y=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=v;break t}hn(e),v=s[e>>2],f=s[e+8>>2]}r=f,F=r,y=W(w,S)>>>8|0;t:{if(v>>>r>>>0>y>>>0){s[e>>2]=((y^-1)<<f)+v,v=3,w=w-y|0;break t}v=2,w=y+1|0}r=fn(w)^24,f=F-r|0,r=w<<r}s[e+8>>2]=f,s[e+4>>2]=r+-1}$=$+W(ce,800)|0,c[$+798|0]=v;e:{if(!s[t+2236>>2]){f=s[e+8>>2],S=s[e+4>>2];break e}y=s[e+4>>2],v=A[t+2240|0],f=s[e+8>>2];t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,f=f+24|0,s[e+8>>2]=f,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break t}hn(e),f=s[e+8>>2]}w=e,G=f,S=s[e>>2],F=S>>>f|0,v=W(y,v)>>>8|0;t:{if(F>>>0>v>>>0){s[e>>2]=S+((v^-1)<<f),y=y-v|0;break t}y=v+1|0}r=fn(y)^24,f=G-r|0,s[w+8>>2]=f,S=(y<<r)+-1|0,s[e+4>>2]=S,c[$+797|0]=F>>>0>v>>>0}e:{if((f|0)>-1)break e;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,f=f+24|0,s[e+8>>2]=f,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break e}hn(e),f=s[e+8>>2]}N=N+(ce<<2)|0,w=e,G=f,v=s[e>>2],y=W(S,145)>>>8|0,F=v>>>f>>>0<=y>>>0;e:{if(!F){v=((y^-1)<<f)+v|0,s[e>>2]=v,y=S-y|0;break e}y=y+1|0}r=fn(y)^24,f=G-r|0,s[w+8>>2]=f,S=(y<<r)+-1|0,s[e+4>>2]=S,c[$+768|0]=F;e:{if(!F){t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=v;break t}hn(e),v=s[e>>2],f=s[e+8>>2]}w=e,G=f,y=W(S,156)>>>8|0,F=v>>>f>>>0<=y>>>0;t:{if(!F){v=((y^-1)<<f)+v|0,s[e>>2]=v,y=S-y|0;break t}y=y+1|0}r=fn(y)^24,f=G-r|0,s[w+8>>2]=f,w=(y<<r)+-1|0,s[e+4>>2]=w;t:{if(!F){i:{if((f|0)>-1)break i;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){y=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=v;break i}hn(e),v=s[e>>2],f=s[e+8>>2]}r=f,S=r,y=w>>>1&16777215;i:{if(v>>>r>>>0>y>>>0){s[e>>2]=((y^-1)<<f)+v,v=1,w=w-y|0;break i}v=3,w=y+1|0}r=fn(w)^24,f=S-r|0,r=w<<r;break t}i:{if((f|0)>-1)break i;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){y=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=v;break i}hn(e),v=s[e>>2],f=s[e+8>>2]}r=f,S=r,y=W(w,163)>>>8|0;i:{if(v>>>r>>>0>y>>>0){s[e>>2]=((y^-1)<<f)+v,v=2,w=w-y|0;break i}v=0,w=y+1|0}r=fn(w)^24,f=S-r|0,r=w<<r}s[e+8>>2]=f,s[e+4>>2]=r+-1,c[$+769|0]=v,r=W(v,16843009),c[N|0]=r,c[N+1|0]=r>>>8,c[N+2|0]=r>>>16,c[N+3|0]=r>>>24,f=Mi,c[f|0]=r,c[f+1|0]=r>>>8,c[f+2|0]=r>>>16,c[f+3|0]=r>>>24;break e}for(w=$+769|0,xe=0;;){for(At=(t+xe|0)+2248|0,f=A[At|0],Ne=0;;){Bt=W(f,9),Yt=N+Ne|0,yi=W(A[Yt|0],90),y=A[Bt+(yi+3504|0)|0],F=s[e+4>>2],f=s[e+8>>2];t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){v=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,f=f+24|0,s[e+8>>2]=f,s[e>>2]=s[e>>2]<<24|(v>>>8&65280|(v<<8&16711680|v<<24))>>>8;break t}hn(e),f=s[e+8>>2]}G=e,gt=f,S=s[e>>2],$e=S>>>f|0,y=W(y,F)>>>8|0;t:{if($e>>>0>y>>>0){S=((y^-1)<<f)+S|0,s[e>>2]=S,F=F-y|0;break t}F=y+1|0}if(r=fn(F)^24,f=gt-r|0,s[G+8>>2]=f,r=(F<<r)+-1|0,s[e+4>>2]=r,y=$e>>>0>y>>>0,v=c[y+4416|0],41706>>>y&1)for(;;){$e=A[((yi+3504|0)+Bt|0)+v|0];t:{if((f|0)>-1)break t;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){F=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=y+3,S=S<<24|(F>>>8&65280|(F<<8&16711680|F<<24))>>>8,s[e>>2]=S;break t}hn(e),S=s[e>>2],f=s[e+8>>2]}y=v<<1,G=e,gt=f,hi=S>>>f|0,F=W(r,$e)>>>8|0;t:{if(hi>>>0>F>>>0){S=((F^-1)<<f)+S|0,s[e>>2]=S,r=r-F|0;break t}r=F+1|0}if(v=fn(r)^24,f=gt-v|0,s[G+8>>2]=f,r=(r<<v)+-1|0,s[e+4>>2]=r,y=y|hi>>>0>F>>>0,v=c[y+4416|0],!(41706>>>y&1))break}if(f=0-v|0,c[Yt|0]=f,Ne=Ne+1|0,(Ne|0)==4)break}if(r=w,w=A[N|0]|A[N+1|0]<<8|(A[N+2|0]<<16|A[N+3|0]<<24),c[r|0]=w,c[r+1|0]=w>>>8,c[r+2|0]=w>>>16,c[r+3|0]=w>>>24,c[At|0]=f,w=r+4|0,xe=xe+1|0,(xe|0)==4)break}}S=s[e+4>>2],f=s[e+8>>2];e:{if((f|0)>-1)break e;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,f=f+24|0,s[e+8>>2]=f,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break e}hn(e),f=s[e+8>>2]}w=e,F=f,v=s[e>>2],y=W(S,142)>>>8|0,N=v>>>f>>>0<=y>>>0;e:{if(!N){v=((y^-1)<<f)+v|0,s[e>>2]=v,y=S-y|0;break e}y=y+1|0}r=fn(y)^24,f=F-r|0,s[w+8>>2]=f,S=(y<<r)+-1|0,s[e+4>>2]=S,r=0;e:{if(N)break e;t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=v;break t}hn(e),v=s[e>>2],f=s[e+8>>2]}w=e,F=f,y=W(S,114)>>>8|0,N=v>>>f>>>0<=y>>>0;t:{if(!N){v=((y^-1)<<f)+v|0,s[e>>2]=v,y=S-y|0;break t}y=y+1|0}if(r=fn(y)^24,f=F-r|0,s[w+8>>2]=f,y=(y<<r)+-1|0,s[e+4>>2]=y,r=2,N)break e;t:{if((f|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),f=f+24|0,s[e+8>>2]=f,s[e+12>>2]=r+3,v=v<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=v;break t}hn(e),v=s[e>>2],f=s[e+8>>2]}r=W(y,183)>>>8|0;t:{if(v>>>f>>>0>r>>>0){s[e>>2]=((r^-1)<<f)+v,v=y-r|0,r=1;break t}v=r+1|0,r=3}y=f,f=fn(v)^24,s[e+8>>2]=y-f,s[e+4>>2]=(v<<f)+-1}if(c[$+785|0]=r,ce=ce+1|0,!((ce|0)<s[t+288>>2]))break}return!s[t+36>>2]}function hl(e,t,r,f,y,v){var w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0,jo=0,Zs=0,Ra=0,fu=0,s0=0;qr=e+124|0,w=s[e+112>>2],Ne=(w|0)/(r|0)|0,xe=e+24|0,on=(W(r,f)<<2)+t|0,f=(w<<2)+t|0;e:{t:{$e=W(r,y);i:{if((w|0)>=($e|0))break i;for(ce=$e<<2,At=w-W(r,Ne)|0,jo=s[e+148>>2],$e=0,ar=s[e+120>>2],Vi=(ar|0)>0?qr:0,Zs=s[e+56>>2]?Ne:16777216,Ra=ar+280|0,fu=t+ce|0,$=s[e+168>>2],w=s[e+152>>2],w&&($e=s[s[e+160>>2]+(W(s[e+156>>2],Ne>>w)+(At>>w)<<2)>>2]),Bt=$+W($e,548)|0,s0=e+136|0,hi=e- -64|0,$e=f;;){(Ne|0)>=(Zs|0)&&(w=s[xe+4>>2],s[hi>>2]=s[xe>>2],s[hi+4>>2]=w,w=s[xe+28>>2],s[hi+24>>2]=s[xe+24>>2],s[hi+28>>2]=w,w=s[xe+20>>2],s[hi+16>>2]=s[xe+16>>2],s[hi+20>>2]=w,w=s[xe+12>>2],s[hi+8>>2]=s[xe+8>>2],s[hi+12>>2]=w,s[e+96>>2]=f-t>>2,s[e+120>>2]>=1&&yh(qr,s0),Zs=Ne+8|0);r:{o:{l:{if(!(At&jo)){w=s[e+168>>2],F=s[e+152>>2],$=0;n:{if(!F)break n;$=s[s[e+160>>2]+(W(s[e+156>>2],Ne>>F)+(At>>F)<<2)>>2]}Bt=w+W($,548)|0}if(s[Bt+28>>2]){N=s[Bt+24>>2];break l}s[e+44>>2]>=32&&he(xe);n:{if(s[Bt+32>>2]){w=s[e+28>>2],N=s[e+44>>2],S=N&63,F=S&31,gt=s[e+24>>2],ce=(((32<=(S&63)>>>0?w>>>F|0:((1<<F)-1&w)<<32-F|gt>>>F)&63)<<3)+Bt|0,F=s[ce+36>>2],$=N+F|0,N=s[ce+40>>2];u:{if((F|0)<=255){s[e+44>>2]=$,s[f>>2]=N,N=0;break u}s[e+44>>2]=$+-256}if(s[e+48>>2]|(s[e+44>>2]>64?s[e+40>>2]==s[e+36>>2]:0))break i;if(N)break n;break o}if(ce=e,w=s[e+28>>2],N=s[e+44>>2],G=N&63,F=G&31,gt=s[e+24>>2],S=s[Bt>>2]+(((32<=(G&63)>>>0?w>>>F|0:((1<<F)-1&w)<<32-F|gt>>>F)&255)<<2)|0,F=A[S|0],F>>>0>=9&&(N=N+8|0,s[e+44>>2]=N,$=(tr[S+2>>1]<<2)+S|0,Yt=N&63,S=Yt&31,S=$+(((-1<<F+-8^-1)&(32<=(Yt&63)>>>0?w>>>S|0:((1<<S)-1&w)<<32-S|gt>>>S))<<2)|0,F=A[S|0]),s[ce+44>>2]=(F&255)+N,s[e+48>>2])break i;N=tr[S+2>>1]}if(s[e+44>>2]>64&&s[e+40>>2]==s[e+36>>2])break i;if((N|0)<=255){if(s[Bt+20>>2]){N=s[Bt+24>>2]|N<<8;break l}if(ce=e,S=s[e+44>>2],Yt=S&63,$=Yt&31,G=s[Bt+4>>2]+(((32<=(Yt&63)>>>0?w>>>$|0:((1<<$)-1&w)<<32-$|gt>>>$)&255)<<2)|0,F=A[G|0],F>>>0>=9&&(S=S+8|0,s[e+44>>2]=S,$=(tr[G+2>>1]<<2)+G|0,Mi=S&63,G=Mi&31,G=$+(((-1<<F+-8^-1)&(32<=(Mi&63)>>>0?w>>>G|0:((1<<G)-1&w)<<32-G|gt>>>G))<<2)|0,F=A[G|0]),S=(F&255)+S|0,s[ce+44>>2]=S,Yt=tr[G+2>>1],(S|0)>=32&&(he(xe),gt=s[e+24>>2],S=s[e+44>>2],w=s[e+28>>2]),Mi=S&63,$=Mi&31,G=s[Bt+8>>2]+(((32<=(Mi&63)>>>0?w>>>$|0:((1<<$)-1&w)<<32-$|gt>>>$)&255)<<2)|0,F=A[G|0],F>>>0>=9&&(S=S+8|0,s[e+44>>2]=S,$=(tr[G+2>>1]<<2)+G|0,yi=S&63,G=yi&31,G=$+(((-1<<F+-8^-1)&(32<=yi>>>0?w>>>G|0:((1<<G)-1&w)<<32-G|gt>>>G))<<2)|0,F=A[G|0]),S=(F&255)+S|0,s[ce+44>>2]=S,Mi=tr[G+2>>1],$=e,yi=S&63,ce=yi&31,G=s[Bt+12>>2]+(((32<=yi>>>0?w>>>ce|0:((1<<ce)-1&w)<<32-ce|gt>>>ce)&255)<<2)|0,F=A[G|0],F>>>0>=9&&(S=S+8|0,s[e+44>>2]=S,yi=(tr[G+2>>1]<<2)+G|0,G=S&63,ce=G&31,G=yi+(((-1<<F+-8^-1)&(32<=(G&63)>>>0?w>>>ce|0:((1<<ce)-1&w)<<32-ce|gt>>>ce))<<2)|0,F=A[G|0]),w=(F&255)+S|0,s[$+44>>2]=w,s[e+48>>2]||(F=tr[G+2>>1],s[e+40>>2]==s[e+36>>2]&&(w|0)>=65))break i;N=Mi|(Yt<<16|N<<8)|F<<24;break l}n:{u:{if((N|0)<=279){$=N+-256|0,(N|0)>=260&&(w=N+-258>>1,$=Dn(xe,w)+(($&1|2)<<w)|0,gt=s[xe>>2],w=s[xe+4>>2]),ce=e,N=s[e+44>>2],Yt=N&63,S=Yt&31,S=s[Bt+16>>2]+(((32<=(Yt&63)>>>0?w>>>S|0:((1<<S)-1&w)<<32-S|gt>>>S)&255)<<2)|0,F=A[S|0],F>>>0>=9&&(N=N+8|0,s[e+44>>2]=N,yi=(tr[S+2>>1]<<2)+S|0,G=N&63,S=G&31,S=yi+(((-1<<F+-8^-1)&(32<=(G&63)>>>0?w>>>S|0:((1<<S)-1&w)<<32-S|gt>>>S))<<2)|0,F=A[S|0]),w=(F&255)+N|0,s[ce+44>>2]=w,N=tr[S+2>>1],(w|0)>=32&&he(xe),N>>>0>=4&&(w=N+-2>>1,N=Dn(xe,w)+((N&1|2)<<w)|0);s:{if((N+1|0)>=121){w=N+-119|0;break s}w=A[N+1264|0],w=(W(w>>>4|0,r)-(w&15)|0)+8|0,w=(w|0)>1?w:1}if(s[e+48>>2]|(s[e+44>>2]>64?s[e+40>>2]==s[e+36>>2]:0))break i;if(f-t>>2<(w|0)||(ce=$+1|0,on-f>>2<(ce|0)))break t;if(S=f-(w<<2)|0,!(f&3|(ce|0)<4|(w|0)>2)){s:{if((w|0)==1){N=s[S>>2],F=N,w=F,gt=w;break s}w=s[S+4>>2],gt=s[S>>2],N=gt}s:{if(!(f&4)){$=ce,F=f;break s}s[f>>2]=N,gt=cd(gt,w),w=yr,S=S+4|0,F=f+4|0}for(N=$>>>1|0,G=N>>>0>1?N:1,N=0;Yt=F+(N<<3)|0,s[Yt>>2]=gt,s[Yt+4>>2]=w,N=N+1|0,(G|0)!=(N|0););if(!($&1))break n;w=G<<3,s[w+F>>2]=s[w+S>>2];break n}if((w|0)>=(ce|0))break u;if(N=0,(ce|0)<=0)break n;for(;w=N<<2,s[w+f>>2]=s[w+S>>2],w=(N|0)!=($|0),N=N+1|0,!!w;);break n}if((N|0)>=(Ra|0))break t;if(F=N+-280|0,w=s[Vi>>2],$e>>>0<f>>>0)for(;$=s[$e>>2],s[w+(W($,506832829)>>>s[Vi+4>>2]<<2)>>2]=$,$e=$e+4|0,$e>>>0<f>>>0;);N=s[w+(F<<2)>>2];break l}Sn(f,S,ce<<2)}if(At=ce+At|0,(At|0)>=(r|0))for(;At=At-r|0,w=Ne,Ne=w+1|0,Ne&15|(!v|(w|0)>=(y|0))||Je[v|0](e,Ne),(At|0)>=(r|0););if($=ce<<2,At&jo){w=s[e+168>>2],F=s[e+152>>2],ce=0;n:{if(!F)break n;ce=s[s[e+160>>2]+(W(s[e+156>>2],Ne>>F)+(At>>F)<<2)>>2]}Bt=w+W(ce,548)|0}if(f=f+$|0,(ar|0)<1|$e>>>0>=f>>>0)break r;for(w=s[Vi>>2];F=s[$e>>2],s[w+(W(F,506832829)>>>s[Vi+4>>2]<<2)>>2]=F,$e=$e+4|0,$e>>>0<f>>>0;);break r}s[f>>2]=N}if(w=f+4|0,At=At+1|0,(At|0)<(r|0)){f=w;break r}if(F=Ne+1|0,F&15|(!v|(Ne|0)>=(y|0))||Je[v|0](e,F),At=0,!((ar|0)<1|$e>>>0>=w>>>0)){for($=s[Vi>>2];Ne=s[$e>>2],s[$+(W(Ne,506832829)>>>s[Vi+4>>2]<<2)>>2]=Ne,ce=$e>>>0<f>>>0,Ne=$e+4|0,$e=Ne,!!ce;);$e=Ne}f=w,Ne=F}if(!(f>>>0<fu>>>0))break}}w=e,r=1;i:{if(s[e+48>>2]||(r=0,s[e+40>>2]!=s[e+36>>2]))break i;r=s[e+44>>2]>64}if(s[w+48>>2]=r,!(!s[e+56>>2]|(!r|f>>>0>=on>>>0))){if(s[e>>2]=5,t=s[e+68>>2],s[xe>>2]=s[e+64>>2],s[xe+4>>2]=t,t=s[e+92>>2],s[xe+24>>2]=s[e+88>>2],s[xe+28>>2]=t,t=s[e+84>>2],s[xe+16>>2]=s[e+80>>2],s[xe+20>>2]=t,t=s[e+76>>2],s[xe+8>>2]=s[e+72>>2],s[xe+12>>2]=t,s[e+112>>2]=s[e+96>>2],t=1,s[e+120>>2]<1)break e;return yh(e+136|0,qr),1}if(r)break t;return v&&Je[v|0](e,(Ne|0)>(y|0)?y:Ne),s[e>>2]=0,s[e+112>>2]=f-t>>2,1}s[e>>2]=3,t=0}return t}function Us(e){e=e|0;var t=0,r=0;r=Jr(A[e+31|0],0,16843009,16843009),t=r,c[e+32|0]=t,c[e+33|0]=t>>>8,c[e+34|0]=t>>>16,c[e+35|0]=t>>>24,t=yr,c[e+36|0]=t,c[e+37|0]=t>>>8,c[e+38|0]=t>>>16,c[e+39|0]=t>>>24,c[e+40|0]=r,c[e+41|0]=r>>>8,c[e+42|0]=r>>>16,c[e+43|0]=r>>>24,c[e+44|0]=t,c[e+45|0]=t>>>8,c[e+46|0]=t>>>16,c[e+47|0]=t>>>24,r=Jr(A[e+63|0],0,16843009,16843009),t=r,c[e+64|0]=t,c[e+65|0]=t>>>8,c[e+66|0]=t>>>16,c[e+67|0]=t>>>24,t=yr,c[e+68|0]=t,c[e+69|0]=t>>>8,c[e+70|0]=t>>>16,c[e+71|0]=t>>>24,c[e+72|0]=r,c[e+73|0]=r>>>8,c[e+74|0]=r>>>16,c[e+75|0]=r>>>24,c[e+76|0]=t,c[e+77|0]=t>>>8,c[e+78|0]=t>>>16,c[e+79|0]=t>>>24,r=Jr(A[e+95|0],0,16843009,16843009),t=r,c[e+96|0]=t,c[e+97|0]=t>>>8,c[e+98|0]=t>>>16,c[e+99|0]=t>>>24,t=yr,c[e+100|0]=t,c[e+101|0]=t>>>8,c[e+102|0]=t>>>16,c[e+103|0]=t>>>24,c[e+104|0]=r,c[e+105|0]=r>>>8,c[e+106|0]=r>>>16,c[e+107|0]=r>>>24,c[e+108|0]=t,c[e+109|0]=t>>>8,c[e+110|0]=t>>>16,c[e+111|0]=t>>>24,r=Jr(A[e+127|0],0,16843009,16843009),t=r,c[e+128|0]=t,c[e+129|0]=t>>>8,c[e+130|0]=t>>>16,c[e+131|0]=t>>>24,t=yr,c[e+132|0]=t,c[e+133|0]=t>>>8,c[e+134|0]=t>>>16,c[e+135|0]=t>>>24,c[e+136|0]=r,c[e+137|0]=r>>>8,c[e+138|0]=r>>>16,c[e+139|0]=r>>>24,c[e+140|0]=t,c[e+141|0]=t>>>8,c[e+142|0]=t>>>16,c[e+143|0]=t>>>24,r=Jr(A[e+159|0],0,16843009,16843009),t=r,c[e+168|0]=t,c[e+169|0]=t>>>8,c[e+170|0]=t>>>16,c[e+171|0]=t>>>24,t=yr,c[e+172|0]=t,c[e+173|0]=t>>>8,c[e+174|0]=t>>>16,c[e+175|0]=t>>>24,c[e+160|0]=r,c[e+161|0]=r>>>8,c[e+162|0]=r>>>16,c[e+163|0]=r>>>24,c[e+164|0]=t,c[e+165|0]=t>>>8,c[e+166|0]=t>>>16,c[e+167|0]=t>>>24,r=Jr(A[e+-1|0],0,16843009,16843009),t=r,c[e|0]=t,c[e+1|0]=t>>>8,c[e+2|0]=t>>>16,c[e+3|0]=t>>>24,t=yr,c[e+4|0]=t,c[e+5|0]=t>>>8,c[e+6|0]=t>>>16,c[e+7|0]=t>>>24,c[e+8|0]=r,c[e+9|0]=r>>>8,c[e+10|0]=r>>>16,c[e+11|0]=r>>>24,c[e+12|0]=t,c[e+13|0]=t>>>8,c[e+14|0]=t>>>16,c[e+15|0]=t>>>24,r=Jr(A[e+191|0],0,16843009,16843009),t=r,c[e+200|0]=t,c[e+201|0]=t>>>8,c[e+202|0]=t>>>16,c[e+203|0]=t>>>24,t=yr,c[e+204|0]=t,c[e+205|0]=t>>>8,c[e+206|0]=t>>>16,c[e+207|0]=t>>>24,c[e+192|0]=r,c[e+193|0]=r>>>8,c[e+194|0]=r>>>16,c[e+195|0]=r>>>24,c[e+196|0]=t,c[e+197|0]=t>>>8,c[e+198|0]=t>>>16,c[e+199|0]=t>>>24,r=Jr(A[e+223|0],0,16843009,16843009),t=r,c[e+232|0]=t,c[e+233|0]=t>>>8,c[e+234|0]=t>>>16,c[e+235|0]=t>>>24,t=yr,c[e+236|0]=t,c[e+237|0]=t>>>8,c[e+238|0]=t>>>16,c[e+239|0]=t>>>24,c[e+224|0]=r,c[e+225|0]=r>>>8,c[e+226|0]=r>>>16,c[e+227|0]=r>>>24,c[e+228|0]=t,c[e+229|0]=t>>>8,c[e+230|0]=t>>>16,c[e+231|0]=t>>>24,r=Jr(A[e+255|0],0,16843009,16843009),t=r,c[e+264|0]=t,c[e+265|0]=t>>>8,c[e+266|0]=t>>>16,c[e+267|0]=t>>>24,t=yr,c[e+268|0]=t,c[e+269|0]=t>>>8,c[e+270|0]=t>>>16,c[e+271|0]=t>>>24,c[e+256|0]=r,c[e+257|0]=r>>>8,c[e+258|0]=r>>>16,c[e+259|0]=r>>>24,c[e+260|0]=t,c[e+261|0]=t>>>8,c[e+262|0]=t>>>16,c[e+263|0]=t>>>24,r=Jr(A[e+287|0],0,16843009,16843009),t=r,c[e+296|0]=t,c[e+297|0]=t>>>8,c[e+298|0]=t>>>16,c[e+299|0]=t>>>24,t=yr,c[e+300|0]=t,c[e+301|0]=t>>>8,c[e+302|0]=t>>>16,c[e+303|0]=t>>>24,c[e+288|0]=r,c[e+289|0]=r>>>8,c[e+290|0]=r>>>16,c[e+291|0]=r>>>24,c[e+292|0]=t,c[e+293|0]=t>>>8,c[e+294|0]=t>>>16,c[e+295|0]=t>>>24,r=Jr(A[e+319|0],0,16843009,16843009),t=r,c[e+328|0]=t,c[e+329|0]=t>>>8,c[e+330|0]=t>>>16,c[e+331|0]=t>>>24,t=yr,c[e+332|0]=t,c[e+333|0]=t>>>8,c[e+334|0]=t>>>16,c[e+335|0]=t>>>24,c[e+320|0]=r,c[e+321|0]=r>>>8,c[e+322|0]=r>>>16,c[e+323|0]=r>>>24,c[e+324|0]=t,c[e+325|0]=t>>>8,c[e+326|0]=t>>>16,c[e+327|0]=t>>>24,r=Jr(A[e+351|0],0,16843009,16843009),t=r,c[e+360|0]=t,c[e+361|0]=t>>>8,c[e+362|0]=t>>>16,c[e+363|0]=t>>>24,t=yr,c[e+364|0]=t,c[e+365|0]=t>>>8,c[e+366|0]=t>>>16,c[e+367|0]=t>>>24,c[e+352|0]=r,c[e+353|0]=r>>>8,c[e+354|0]=r>>>16,c[e+355|0]=r>>>24,c[e+356|0]=t,c[e+357|0]=t>>>8,c[e+358|0]=t>>>16,c[e+359|0]=t>>>24,r=Jr(A[e+383|0],0,16843009,16843009),t=r,c[e+392|0]=t,c[e+393|0]=t>>>8,c[e+394|0]=t>>>16,c[e+395|0]=t>>>24,t=yr,c[e+396|0]=t,c[e+397|0]=t>>>8,c[e+398|0]=t>>>16,c[e+399|0]=t>>>24,c[e+384|0]=r,c[e+385|0]=r>>>8,c[e+386|0]=r>>>16,c[e+387|0]=r>>>24,c[e+388|0]=t,c[e+389|0]=t>>>8,c[e+390|0]=t>>>16,c[e+391|0]=t>>>24,r=Jr(A[e+415|0],0,16843009,16843009),t=r,c[e+424|0]=t,c[e+425|0]=t>>>8,c[e+426|0]=t>>>16,c[e+427|0]=t>>>24,t=yr,c[e+428|0]=t,c[e+429|0]=t>>>8,c[e+430|0]=t>>>16,c[e+431|0]=t>>>24,c[e+416|0]=r,c[e+417|0]=r>>>8,c[e+418|0]=r>>>16,c[e+419|0]=r>>>24,c[e+420|0]=t,c[e+421|0]=t>>>8,c[e+422|0]=t>>>16,c[e+423|0]=t>>>24,r=Jr(A[e+447|0],0,16843009,16843009),t=r,c[e+456|0]=t,c[e+457|0]=t>>>8,c[e+458|0]=t>>>16,c[e+459|0]=t>>>24,t=yr,c[e+460|0]=t,c[e+461|0]=t>>>8,c[e+462|0]=t>>>16,c[e+463|0]=t>>>24,c[e+448|0]=r,c[e+449|0]=r>>>8,c[e+450|0]=r>>>16,c[e+451|0]=r>>>24,c[e+452|0]=t,c[e+453|0]=t>>>8,c[e+454|0]=t>>>16,c[e+455|0]=t>>>24,r=Jr(A[e+479|0],0,16843009,16843009),t=r,c[e+488|0]=t,c[e+489|0]=t>>>8,c[e+490|0]=t>>>16,c[e+491|0]=t>>>24,t=yr,c[e+492|0]=t,c[e+493|0]=t>>>8,c[e+494|0]=t>>>16,c[e+495|0]=t>>>24,c[e+480|0]=r,c[e+481|0]=r>>>8,c[e+482|0]=r>>>16,c[e+483|0]=r>>>24,c[e+484|0]=t,c[e+485|0]=t>>>8,c[e+486|0]=t>>>16,c[e+487|0]=t>>>24}function Hn(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;S=s[e+4>>2],v=A[t+3|0],r=s[e+8>>2];e:{if((r|0)>-1)break e;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){w=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),s[e+12>>2]=y+3,r=r+24|0,s[e+8>>2]=r,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break e}hn(e),r=s[e+8>>2]}w=e,N=r,f=s[e>>2],F=f>>>r|0,v=W(v,S)>>>8|0;e:{if(F>>>0>v>>>0){f=((v^-1)<<r)+f|0,s[e>>2]=f,S=S-v|0;break e}S=v+1|0}y=fn(S)^24,r=N-y|0,s[w+8>>2]=r,S=(S<<y)+-1|0,s[e+4>>2]=S;e:{if(F>>>0<=v>>>0){v=A[t+4|0];t:{if((r|0)>-1)break t;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){w=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=y+3,f=f<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}w=e,N=r,v=W(v,S)>>>8|0,F=f>>>r>>>0<=v>>>0;t:{if(!F){f=((v^-1)<<r)+f|0,s[e>>2]=f,v=S-v|0;break t}v=v+1|0}if(y=fn(v)^24,r=N-y|0,s[w+8>>2]=r,S=(v<<y)+-1|0,s[e+4>>2]=S,v=2,F)break e;w=A[t+5|0];t:{if((r|0)>-1)break t;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}N=e,y=r,v=W(w,S)>>>8|0;t:{if(f>>>r>>>0>v>>>0){s[e>>2]=((v^-1)<<r)+f,w=4,r=S-v|0;break t}w=3,r=v+1|0}return t=fn(r)^24,s[N+8>>2]=y-t,s[e+4>>2]=(r<<t)+-1,w}v=A[t+6|0];t:{if((r|0)>-1)break t;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){w=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=y+3,f=f<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}w=e,N=r,F=f>>>r|0,v=W(v,S)>>>8|0;t:{if(F>>>0>v>>>0){f=((v^-1)<<r)+f|0,s[e>>2]=f,S=S-v|0;break t}S=v+1|0}if(y=fn(S)^24,r=N-y|0,s[w+8>>2]=r,S=(S<<y)+-1|0,s[e+4>>2]=S,F>>>0<=v>>>0){w=A[t+7|0];t:{if((r|0)>-1)break t;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}N=e,y=r,F=f>>>r|0,w=W(w,S)>>>8|0;t:{if(F>>>0>w>>>0){f=((w^-1)<<r)+f|0,s[e>>2]=f,v=S-w|0;break t}v=w+1|0}if(t=fn(v)^24,r=y-t|0,s[N+8>>2]=r,S=(v<<t)+-1|0,s[e+4>>2]=S,F>>>0<=w>>>0){t:{if((r|0)>-1)break t;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}t=W(S,159)>>>8|0;t:{if(f>>>r>>>0>t>>>0){s[e>>2]=((t^-1)<<r)+f,f=S-t|0,t=6;break t}f=t+1|0,t=5}return v=r,r=fn(f)^24,s[e+8>>2]=v-r,s[e+4>>2]=(f<<r)+-1,t}t:{if((r|0)>-1)break t;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}N=e,y=r,w=W(S,165)>>>8|0;t:{if(f>>>r>>>0>w>>>0){f=((w^-1)<<r)+f|0,s[e>>2]=f,v=9,w=S-w|0;break t}v=7,w=w+1|0}t=fn(w)^24,r=y-t|0,s[N+8>>2]=r,S=(w<<t)+-1|0,s[e+4>>2]=S;t:{if((r|0)>-1)break t;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}N=e,y=r,F=f>>>r|0,w=W(S,145)>>>8|0;t:{if(F>>>0>w>>>0){s[e>>2]=((w^-1)<<r)+f,r=S-w|0;break t}r=w+1|0}return t=fn(r)^24,s[N+8>>2]=y-t,s[e+4>>2]=(r<<t)+-1,(F>>>0>w>>>0)+v|0}v=A[t+8|0];t:{if((r|0)>-1)break t;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){w=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=y+3,f=f<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}w=e,N=r,G=f>>>r|0,F=W(v,S)>>>8|0;t:{if(G>>>0>F>>>0){f=((F^-1)<<r)+f|0,s[e>>2]=f,$=10,v=S-F|0;break t}$=9,v=F+1|0}y=fn(v)^24,r=N-y|0,s[w+8>>2]=r,v=(v<<y)+-1|0,s[e+4>>2]=v,w=A[t+$|0];t:{if((r|0)>-1)break t;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break t}hn(e),f=s[e>>2],r=s[e+8>>2]}N=e,y=r,S=f>>>r|0,w=W(w,v)>>>8|0;t:{if(S>>>0>w>>>0){f=((w^-1)<<r)+f|0,s[e>>2]=f,v=v-w|0;break t}v=w+1|0}t=fn(v)^24,r=y-t|0,s[N+8>>2]=r,v=(v<<t)+-1|0,s[e+4>>2]=v,$=(G>>>0>F>>>0)<<1|S>>>0>w>>>0,w=s[($<<2)+10160>>2],t=A[w|0];t:{if(!t){S=0;break t}for(S=0;;){F=t&255;i:{if((r|0)>-1)break i;if(t=s[e+12>>2],t>>>0<zr[e+20>>2]){y=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=t+3,f=f<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8,s[e>>2]=f;break i}hn(e),f=s[e>>2],r=s[e+8>>2]}N=e,y=r,G=f>>>r|0,F=W(v,F)>>>8|0;i:{if(G>>>0>F>>>0){f=((F^-1)<<r)+f|0,s[e>>2]=f,v=v-F|0;break i}v=F+1|0}if(t=fn(v)^24,r=y-t|0,s[N+8>>2]=r,v=(v<<t)+-1|0,s[e+4>>2]=v,S=S<<1|G>>>0>F>>>0,t=A[w+1|0],w=w+1|0,!t)break}}v=(8<<$|3)+S|0}return v}function X(e){e=e|0,c[e|0]=-2139062144,c[e+1|0]=8421504,c[e+2|0]=32896,c[e+3|0]=128,c[e+4|0]=-2139062144,c[e+5|0]=8421504,c[e+6|0]=32896,c[e+7|0]=128,c[e+32|0]=-2139062144,c[e+33|0]=8421504,c[e+34|0]=32896,c[e+35|0]=128,c[e+36|0]=-2139062144,c[e+37|0]=8421504,c[e+38|0]=32896,c[e+39|0]=128,c[e+64|0]=-2139062144,c[e+65|0]=8421504,c[e+66|0]=32896,c[e+67|0]=128,c[e+68|0]=-2139062144,c[e+69|0]=8421504,c[e+70|0]=32896,c[e+71|0]=128,c[e+96|0]=-2139062144,c[e+97|0]=8421504,c[e+98|0]=32896,c[e+99|0]=128,c[e+100|0]=-2139062144,c[e+101|0]=8421504,c[e+102|0]=32896,c[e+103|0]=128,c[e+128|0]=-2139062144,c[e+129|0]=8421504,c[e+130|0]=32896,c[e+131|0]=128,c[e+132|0]=-2139062144,c[e+133|0]=8421504,c[e+134|0]=32896,c[e+135|0]=128,c[e+160|0]=-2139062144,c[e+161|0]=8421504,c[e+162|0]=32896,c[e+163|0]=128,c[e+164|0]=-2139062144,c[e+165|0]=8421504,c[e+166|0]=32896,c[e+167|0]=128,c[e+192|0]=-2139062144,c[e+193|0]=8421504,c[e+194|0]=32896,c[e+195|0]=128,c[e+196|0]=-2139062144,c[e+197|0]=8421504,c[e+198|0]=32896,c[e+199|0]=128,c[e+224|0]=-2139062144,c[e+225|0]=8421504,c[e+226|0]=32896,c[e+227|0]=128,c[e+228|0]=-2139062144,c[e+229|0]=8421504,c[e+230|0]=32896,c[e+231|0]=128,c[e+256|0]=-2139062144,c[e+257|0]=8421504,c[e+258|0]=32896,c[e+259|0]=128,c[e+260|0]=-2139062144,c[e+261|0]=8421504,c[e+262|0]=32896,c[e+263|0]=128,c[e+8|0]=-2139062144,c[e+9|0]=8421504,c[e+10|0]=32896,c[e+11|0]=128,c[e+12|0]=-2139062144,c[e+13|0]=8421504,c[e+14|0]=32896,c[e+15|0]=128,c[e+40|0]=-2139062144,c[e+41|0]=8421504,c[e+42|0]=32896,c[e+43|0]=128,c[e+44|0]=-2139062144,c[e+45|0]=8421504,c[e+46|0]=32896,c[e+47|0]=128,c[e+72|0]=-2139062144,c[e+73|0]=8421504,c[e+74|0]=32896,c[e+75|0]=128,c[e+76|0]=-2139062144,c[e+77|0]=8421504,c[e+78|0]=32896,c[e+79|0]=128,c[e+104|0]=-2139062144,c[e+105|0]=8421504,c[e+106|0]=32896,c[e+107|0]=128,c[e+108|0]=-2139062144,c[e+109|0]=8421504,c[e+110|0]=32896,c[e+111|0]=128,c[e+136|0]=-2139062144,c[e+137|0]=8421504,c[e+138|0]=32896,c[e+139|0]=128,c[e+140|0]=-2139062144,c[e+141|0]=8421504,c[e+142|0]=32896,c[e+143|0]=128,c[e+168|0]=-2139062144,c[e+169|0]=8421504,c[e+170|0]=32896,c[e+171|0]=128,c[e+172|0]=-2139062144,c[e+173|0]=8421504,c[e+174|0]=32896,c[e+175|0]=128,c[e+200|0]=-2139062144,c[e+201|0]=8421504,c[e+202|0]=32896,c[e+203|0]=128,c[e+204|0]=-2139062144,c[e+205|0]=8421504,c[e+206|0]=32896,c[e+207|0]=128,c[e+232|0]=-2139062144,c[e+233|0]=8421504,c[e+234|0]=32896,c[e+235|0]=128,c[e+236|0]=-2139062144,c[e+237|0]=8421504,c[e+238|0]=32896,c[e+239|0]=128,c[e+264|0]=-2139062144,c[e+265|0]=8421504,c[e+266|0]=32896,c[e+267|0]=128,c[e+268|0]=-2139062144,c[e+269|0]=8421504,c[e+270|0]=32896,c[e+271|0]=128,c[e+296|0]=-2139062144,c[e+297|0]=8421504,c[e+298|0]=32896,c[e+299|0]=128,c[e+300|0]=-2139062144,c[e+301|0]=8421504,c[e+302|0]=32896,c[e+303|0]=128,c[e+288|0]=-2139062144,c[e+289|0]=8421504,c[e+290|0]=32896,c[e+291|0]=128,c[e+292|0]=-2139062144,c[e+293|0]=8421504,c[e+294|0]=32896,c[e+295|0]=128,c[e+328|0]=-2139062144,c[e+329|0]=8421504,c[e+330|0]=32896,c[e+331|0]=128,c[e+332|0]=-2139062144,c[e+333|0]=8421504,c[e+334|0]=32896,c[e+335|0]=128,c[e+320|0]=-2139062144,c[e+321|0]=8421504,c[e+322|0]=32896,c[e+323|0]=128,c[e+324|0]=-2139062144,c[e+325|0]=8421504,c[e+326|0]=32896,c[e+327|0]=128,c[e+360|0]=-2139062144,c[e+361|0]=8421504,c[e+362|0]=32896,c[e+363|0]=128,c[e+364|0]=-2139062144,c[e+365|0]=8421504,c[e+366|0]=32896,c[e+367|0]=128,c[e+352|0]=-2139062144,c[e+353|0]=8421504,c[e+354|0]=32896,c[e+355|0]=128,c[e+356|0]=-2139062144,c[e+357|0]=8421504,c[e+358|0]=32896,c[e+359|0]=128,c[e+392|0]=-2139062144,c[e+393|0]=8421504,c[e+394|0]=32896,c[e+395|0]=128,c[e+396|0]=-2139062144,c[e+397|0]=8421504,c[e+398|0]=32896,c[e+399|0]=128,c[e+384|0]=-2139062144,c[e+385|0]=8421504,c[e+386|0]=32896,c[e+387|0]=128,c[e+388|0]=-2139062144,c[e+389|0]=8421504,c[e+390|0]=32896,c[e+391|0]=128,c[e+424|0]=-2139062144,c[e+425|0]=8421504,c[e+426|0]=32896,c[e+427|0]=128,c[e+428|0]=-2139062144,c[e+429|0]=8421504,c[e+430|0]=32896,c[e+431|0]=128,c[e+416|0]=-2139062144,c[e+417|0]=8421504,c[e+418|0]=32896,c[e+419|0]=128,c[e+420|0]=-2139062144,c[e+421|0]=8421504,c[e+422|0]=32896,c[e+423|0]=128,c[e+456|0]=-2139062144,c[e+457|0]=8421504,c[e+458|0]=32896,c[e+459|0]=128,c[e+460|0]=-2139062144,c[e+461|0]=8421504,c[e+462|0]=32896,c[e+463|0]=128,c[e+448|0]=-2139062144,c[e+449|0]=8421504,c[e+450|0]=32896,c[e+451|0]=128,c[e+452|0]=-2139062144,c[e+453|0]=8421504,c[e+454|0]=32896,c[e+455|0]=128,c[e+488|0]=-2139062144,c[e+489|0]=8421504,c[e+490|0]=32896,c[e+491|0]=128,c[e+492|0]=-2139062144,c[e+493|0]=8421504,c[e+494|0]=32896,c[e+495|0]=128,c[e+480|0]=-2139062144,c[e+481|0]=8421504,c[e+482|0]=32896,c[e+483|0]=128,c[e+484|0]=-2139062144,c[e+485|0]=8421504,c[e+486|0]=32896,c[e+487|0]=128}function Ie(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0;t=e,v=t+-32|0,f=v,y=A[f+4|0]|A[f+5|0]<<8|(A[f+6|0]<<16|A[f+7|0]<<24),e=A[f|0]|A[f+1|0]<<8|(A[f+2|0]<<16|A[f+3|0]<<24),r=e,c[t|0]=r,c[t+1|0]=r>>>8,c[t+2|0]=r>>>16,c[t+3|0]=r>>>24,c[t+4|0]=y,c[t+5|0]=y>>>8,c[t+6|0]=y>>>16,c[t+7|0]=y>>>24,c[t+32|0]=r,c[t+33|0]=r>>>8,c[t+34|0]=r>>>16,c[t+35|0]=r>>>24,c[t+36|0]=y,c[t+37|0]=y>>>8,c[t+38|0]=y>>>16,c[t+39|0]=y>>>24,c[t+64|0]=r,c[t+65|0]=r>>>8,c[t+66|0]=r>>>16,c[t+67|0]=r>>>24,c[t+68|0]=y,c[t+69|0]=y>>>8,c[t+70|0]=y>>>16,c[t+71|0]=y>>>24,c[t+96|0]=r,c[t+97|0]=r>>>8,c[t+98|0]=r>>>16,c[t+99|0]=r>>>24,c[t+100|0]=y,c[t+101|0]=y>>>8,c[t+102|0]=y>>>16,c[t+103|0]=y>>>24,c[t+128|0]=r,c[t+129|0]=r>>>8,c[t+130|0]=r>>>16,c[t+131|0]=r>>>24,c[t+132|0]=y,c[t+133|0]=y>>>8,c[t+134|0]=y>>>16,c[t+135|0]=y>>>24,c[t+160|0]=r,c[t+161|0]=r>>>8,c[t+162|0]=r>>>16,c[t+163|0]=r>>>24,c[t+164|0]=y,c[t+165|0]=y>>>8,c[t+166|0]=y>>>16,c[t+167|0]=y>>>24,c[t+192|0]=r,c[t+193|0]=r>>>8,c[t+194|0]=r>>>16,c[t+195|0]=r>>>24,c[t+196|0]=y,c[t+197|0]=y>>>8,c[t+198|0]=y>>>16,c[t+199|0]=y>>>24,c[t+224|0]=r,c[t+225|0]=r>>>8,c[t+226|0]=r>>>16,c[t+227|0]=r>>>24,c[t+228|0]=y,c[t+229|0]=y>>>8,c[t+230|0]=y>>>16,c[t+231|0]=y>>>24,y=f+8|0,f=A[y+4|0]|A[y+5|0]<<8|(A[y+6|0]<<16|A[y+7|0]<<24),e=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),r=e,c[t+8|0]=r,c[t+9|0]=r>>>8,c[t+10|0]=r>>>16,c[t+11|0]=r>>>24,c[t+12|0]=f,c[t+13|0]=f>>>8,c[t+14|0]=f>>>16,c[t+15|0]=f>>>24,c[t+40|0]=r,c[t+41|0]=r>>>8,c[t+42|0]=r>>>16,c[t+43|0]=r>>>24,c[t+44|0]=f,c[t+45|0]=f>>>8,c[t+46|0]=f>>>16,c[t+47|0]=f>>>24,c[t+72|0]=r,c[t+73|0]=r>>>8,c[t+74|0]=r>>>16,c[t+75|0]=r>>>24,c[t+76|0]=f,c[t+77|0]=f>>>8,c[t+78|0]=f>>>16,c[t+79|0]=f>>>24,c[t+104|0]=r,c[t+105|0]=r>>>8,c[t+106|0]=r>>>16,c[t+107|0]=r>>>24,c[t+108|0]=f,c[t+109|0]=f>>>8,c[t+110|0]=f>>>16,c[t+111|0]=f>>>24,c[t+136|0]=r,c[t+137|0]=r>>>8,c[t+138|0]=r>>>16,c[t+139|0]=r>>>24,c[t+140|0]=f,c[t+141|0]=f>>>8,c[t+142|0]=f>>>16,c[t+143|0]=f>>>24,c[t+168|0]=r,c[t+169|0]=r>>>8,c[t+170|0]=r>>>16,c[t+171|0]=r>>>24,c[t+172|0]=f,c[t+173|0]=f>>>8,c[t+174|0]=f>>>16,c[t+175|0]=f>>>24,c[t+200|0]=r,c[t+201|0]=r>>>8,c[t+202|0]=r>>>16,c[t+203|0]=r>>>24,c[t+204|0]=f,c[t+205|0]=f>>>8,c[t+206|0]=f>>>16,c[t+207|0]=f>>>24,c[t+232|0]=r,c[t+233|0]=r>>>8,c[t+234|0]=r>>>16,c[t+235|0]=r>>>24,c[t+236|0]=f,c[t+237|0]=f>>>8,c[t+238|0]=f>>>16,c[t+239|0]=f>>>24,f=A[y+4|0]|A[y+5|0]<<8|(A[y+6|0]<<16|A[y+7|0]<<24),w=f,r=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),c[t+264|0]=r,c[t+265|0]=r>>>8,c[t+266|0]=r>>>16,c[t+267|0]=r>>>24,c[t+268|0]=f,c[t+269|0]=f>>>8,c[t+270|0]=f>>>16,c[t+271|0]=f>>>24,f=A[v+4|0]|A[v+5|0]<<8|(A[v+6|0]<<16|A[v+7|0]<<24),e=A[v|0]|A[v+1|0]<<8|(A[v+2|0]<<16|A[v+3|0]<<24),v=e,c[t+256|0]=v,c[t+257|0]=v>>>8,c[t+258|0]=v>>>16,c[t+259|0]=v>>>24,c[t+260|0]=f,c[t+261|0]=f>>>8,c[t+262|0]=f>>>16,c[t+263|0]=f>>>24,c[t+296|0]=r,c[t+297|0]=r>>>8,c[t+298|0]=r>>>16,c[t+299|0]=r>>>24,c[t+300|0]=w,c[t+301|0]=w>>>8,c[t+302|0]=w>>>16,c[t+303|0]=w>>>24,c[t+288|0]=v,c[t+289|0]=v>>>8,c[t+290|0]=v>>>16,c[t+291|0]=v>>>24,c[t+292|0]=f,c[t+293|0]=f>>>8,c[t+294|0]=f>>>16,c[t+295|0]=f>>>24,c[t+328|0]=r,c[t+329|0]=r>>>8,c[t+330|0]=r>>>16,c[t+331|0]=r>>>24,c[t+332|0]=w,c[t+333|0]=w>>>8,c[t+334|0]=w>>>16,c[t+335|0]=w>>>24,c[t+320|0]=v,c[t+321|0]=v>>>8,c[t+322|0]=v>>>16,c[t+323|0]=v>>>24,c[t+324|0]=f,c[t+325|0]=f>>>8,c[t+326|0]=f>>>16,c[t+327|0]=f>>>24,c[t+360|0]=r,c[t+361|0]=r>>>8,c[t+362|0]=r>>>16,c[t+363|0]=r>>>24,c[t+364|0]=w,c[t+365|0]=w>>>8,c[t+366|0]=w>>>16,c[t+367|0]=w>>>24,c[t+352|0]=v,c[t+353|0]=v>>>8,c[t+354|0]=v>>>16,c[t+355|0]=v>>>24,c[t+356|0]=f,c[t+357|0]=f>>>8,c[t+358|0]=f>>>16,c[t+359|0]=f>>>24,c[t+384|0]=v,c[t+385|0]=v>>>8,c[t+386|0]=v>>>16,c[t+387|0]=v>>>24,c[t+388|0]=f,c[t+389|0]=f>>>8,c[t+390|0]=f>>>16,c[t+391|0]=f>>>24,c[t+392|0]=r,c[t+393|0]=r>>>8,c[t+394|0]=r>>>16,c[t+395|0]=r>>>24,c[t+396|0]=w,c[t+397|0]=w>>>8,c[t+398|0]=w>>>16,c[t+399|0]=w>>>24,c[t+424|0]=r,c[t+425|0]=r>>>8,c[t+426|0]=r>>>16,c[t+427|0]=r>>>24,c[t+428|0]=w,c[t+429|0]=w>>>8,c[t+430|0]=w>>>16,c[t+431|0]=w>>>24,c[t+416|0]=v,c[t+417|0]=v>>>8,c[t+418|0]=v>>>16,c[t+419|0]=v>>>24,c[t+420|0]=f,c[t+421|0]=f>>>8,c[t+422|0]=f>>>16,c[t+423|0]=f>>>24,c[t+448|0]=v,c[t+449|0]=v>>>8,c[t+450|0]=v>>>16,c[t+451|0]=v>>>24,c[t+452|0]=f,c[t+453|0]=f>>>8,c[t+454|0]=f>>>16,c[t+455|0]=f>>>24,c[t+456|0]=r,c[t+457|0]=r>>>8,c[t+458|0]=r>>>16,c[t+459|0]=r>>>24,c[t+460|0]=w,c[t+461|0]=w>>>8,c[t+462|0]=w>>>16,c[t+463|0]=w>>>24,c[t+488|0]=r,c[t+489|0]=r>>>8,c[t+490|0]=r>>>16,c[t+491|0]=r>>>24,c[t+492|0]=w,c[t+493|0]=w>>>8,c[t+494|0]=w>>>16,c[t+495|0]=w>>>24,c[t+480|0]=v,c[t+481|0]=v>>>8,c[t+482|0]=v>>>16,c[t+483|0]=v>>>24,c[t+484|0]=f,c[t+485|0]=f>>>8,c[t+486|0]=f>>>16,c[t+487|0]=f>>>24}function lt(e,t,r,f,y){var v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0;v=br-80|0,br=v,s[v+76>>2]=t,Yt=v+55|0,gt=v+56|0,t=0;e:{t:for(;;){i:{if((xe|0)<0)break i;if((t|0)>(2147483647-xe|0)){s[2865]=61,xe=-1;break i}xe=t+xe|0}i:{r:{o:{if(F=s[v+76>>2],t=F,w=A[t|0],w)for(;;){l:{w=w&255;n:{if(!w){w=t;break n}if((w|0)!=37)break l;for(w=t;;){if(A[t+1|0]!=37)break n;if(S=t+2|0,s[v+76>>2]=S,w=w+1|0,N=A[t+2|0],t=S,(N|0)!=37)break}}if(t=w-F|0,e&&n0(e,F,t),t)continue t;w=v,S=!F0(c[s[v+76>>2]+1|0]),t=s[v+76>>2];n:{if(!(S|A[t+2|0]!=36)){$e=c[t+1|0]+-48|0,At=1,t=t+3|0;break n}$e=-1,t=t+1|0}s[w+76>>2]=t,G=0,Ne=c[t|0],S=Ne+-32|0;n:{if(S>>>0>31){w=t;break n}if(w=t,S=1<<S,!(S&75913))break n;for(;;){if(w=t+1|0,s[v+76>>2]=w,G=S|G,Ne=c[t+1|0],S=Ne+-32|0,S>>>0>=32)break n;if(t=w,S=1<<S,!(S&75913))break}}n:{if((Ne|0)==42){S=v;u:{s:{if(!F0(c[w+1|0])||(t=s[v+76>>2],A[t+2|0]!=36))break s;s[((c[t+1|0]<<2)+y|0)+-192>>2]=10,$=s[((c[t+1|0]<<3)+f|0)+-384>>2],At=1,t=t+3|0;break u}if(At)break o;At=0,$=0,e&&(t=s[r>>2],s[r>>2]=t+4,$=s[t>>2]),t=s[v+76>>2]+1|0}if(s[S+76>>2]=t,($|0)>-1)break n;$=0-$|0,G=G|8192;break n}if($=ks(v+76|0),($|0)<0)break o;t=s[v+76>>2]}N=-1;n:{if(A[t|0]!=46)break n;if(A[t+1|0]==42){u:{if(!F0(c[t+2|0])||(t=s[v+76>>2],A[t+3|0]!=36))break u;s[((c[t+2|0]<<2)+y|0)+-192>>2]=10,N=s[((c[t+2|0]<<3)+f|0)+-384>>2],t=t+4|0,s[v+76>>2]=t;break n}if(At)break o;e?(t=s[r>>2],s[r>>2]=t+4,N=s[t>>2]):N=0,t=s[v+76>>2]+2|0,s[v+76>>2]=t;break n}s[v+76>>2]=t+1,N=ks(v+76|0),t=s[v+76>>2]}for(w=0;;){if(Bt=w,ce=-1,c[t|0]+-65>>>0>57)break e;if(Ne=t+1|0,s[v+76>>2]=Ne,w=c[t|0],t=Ne,w=A[(w+W(Bt,58)|0)+9599|0],!(w+-1>>>0<8))break}n:{u:{if((w|0)!=19){if(!w)break e;if(($e|0)>=0){s[($e<<2)+y>>2]=w,t=($e<<3)+f|0,w=s[t+4>>2],s[v+64>>2]=s[t>>2],s[v+68>>2]=w;break u}if(!e)break i;Ul(v- -64|0,w,r),Ne=s[v+76>>2];break n}if(($e|0)>-1)break e}if(t=0,!e)continue t}S=G&-65537,w=G&8192?S:G,ce=0,$e=9644,G=gt;n:{u:{s:{a:{f:{c:{h:{d:{p:{m:{v:{_:{b:{g:{w:{y:switch(t=c[Ne+-1|0],t=Bt&&(t&15)==3?t&-33:t,t+-88|0){case 11:break n;case 9:case 13:case 14:case 15:break u;case 27:break h;case 12:case 17:break m;case 23:break v;case 0:case 32:break _;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break r;default:break y}y:switch(t+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break r;default:break y}if((t|0)==83)break c;break r}t=s[v+64>>2],F=s[v+68>>2],$e=9644;break p}t=0;g:switch(Bt&255){case 0:s[s[v+64>>2]>>2]=xe;continue t;case 1:s[s[v+64>>2]>>2]=xe;continue t;case 2:w=s[v+64>>2],s[w>>2]=xe,s[w+4>>2]=xe>>31;continue t;case 3:_i[s[v+64>>2]>>1]=xe;continue t;case 4:c[s[v+64>>2]]=xe;continue t;case 6:s[s[v+64>>2]>>2]=xe;continue t;case 7:break g;default:continue t}w=s[v+64>>2],s[w>>2]=xe,s[w+4>>2]=xe>>31;continue t}N=N>>>0>8?N:8,w=w|8,t=120}if(F=Lc(s[v+64>>2],s[v+68>>2],gt,t&32),!(w&8)|!(s[v+64>>2]|s[v+68>>2]))break d;$e=(t>>>4|0)+9644|0,ce=2;break d}if(F=hh(s[v+64>>2],s[v+68>>2],gt),!(w&8))break d;t=gt-F|0,N=(N|0)>(t|0)?N:t+1|0;break d}if(S=s[v+68>>2],F=S,t=s[v+64>>2],(S|0)<-1||(S|0)<=-1){F=0-(F+(0<t>>>0)|0)|0,t=0-t|0,s[v+64>>2]=t,s[v+68>>2]=F,ce=1,$e=9644;break p}if(w&2048){ce=1,$e=9645;break p}ce=w&1,$e=ce?9646:9644}F=Pi(t,F,gt)}if(w=(N|0)>-1?w&-65537:w,t=s[v+64>>2],S=s[v+68>>2],!(!!(t|S)|N)){N=0,F=gt;break r}t=!(t|S)+(gt-F|0)|0,N=(N|0)>(t|0)?N:t;break r}t=s[v+64>>2],F=t||9654,t=ui(F,N),G=t||N+F|0,w=S,N=t?t-F|0:N;break r}if(S=s[v+64>>2],N)break a;t=0,so(e,32,$,0,w);break s}s[v+12>>2]=0,s[v+8>>2]=s[v+64>>2],s[v+64>>2]=v+8,N=-1,S=v+8|0}t=0;a:{for(;;){if(F=s[S>>2],!F)break a;if(F=sd(v+4|0,F),G=(F|0)<0,!(G|F>>>0>N-t>>>0)){if(S=S+4|0,t=t+F|0,N>>>0>t>>>0)continue;break a}break}if(ce=-1,G)break e}if(so(e,32,$,t,w),!t){t=0;break s}for(Ne=0,S=s[v+64>>2];;){if(F=s[S>>2],!F||(F=sd(v+4|0,F),Ne=F+Ne|0,(Ne|0)>(t|0)))break s;if(n0(e,v+4|0,F),S=S+4|0,!(Ne>>>0<t>>>0))break}}so(e,32,$,t,w^8192),t=($|0)>(t|0)?$:t;continue t}t=Je[0](e,Gn[v+64>>3],$,N,w,t)|0;continue t}c[v+55|0]=s[v+64>>2],N=1,F=Yt,w=S;break r}S=t+1|0,s[v+76>>2]=S,w=A[t+1|0],t=S}if(ce=xe,e)break e;if(!At)break i;for(t=1;;){if(e=s[(t<<2)+y>>2],e){if(Ul((t<<3)+f|0,e,r),ce=1,t=t+1|0,(t|0)!=10)continue;break e}break}if(ce=1,t>>>0>=10)break e;for(;;){if(s[(t<<2)+y>>2])break o;if(t=t+1|0,(t|0)==10)break}break e}ce=-1;break e}G=G-F|0,N=(N|0)<(G|0)?G:N,S=N+ce|0,t=($|0)<(S|0)?S:$,so(e,32,t,S,w),n0(e,$e,ce),so(e,48,t,S,w^65536),so(e,48,N,G,0),n0(e,F,G),so(e,32,t,S,w^8192);continue}break}ce=0}return br=v+80|0,ce}function zt(e){e=e|0;var t=0,r=0;t=e,e=Jr((A[t+-17|0]+(A[t+-18|0]+(A[t+-19|0]+(A[t+-20|0]+(A[t+-21|0]+(A[t+-22|0]+(A[t+-23|0]+(A[t+-24|0]+(A[t+-25|0]+(A[t+-26|0]+(A[t+-27|0]+(A[t+-28|0]+(A[t+-29|0]+(A[t+-30|0]+(A[t+-32|0]+A[t+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),c[t|0]=e,c[t+1|0]=e>>>8,c[t+2|0]=e>>>16,c[t+3|0]=e>>>24,r=yr,c[t+4|0]=r,c[t+5|0]=r>>>8,c[t+6|0]=r>>>16,c[t+7|0]=r>>>24,c[t+8|0]=e,c[t+9|0]=e>>>8,c[t+10|0]=e>>>16,c[t+11|0]=e>>>24,c[t+12|0]=r,c[t+13|0]=r>>>8,c[t+14|0]=r>>>16,c[t+15|0]=r>>>24,c[t+40|0]=e,c[t+41|0]=e>>>8,c[t+42|0]=e>>>16,c[t+43|0]=e>>>24,c[t+44|0]=r,c[t+45|0]=r>>>8,c[t+46|0]=r>>>16,c[t+47|0]=r>>>24,c[t+32|0]=e,c[t+33|0]=e>>>8,c[t+34|0]=e>>>16,c[t+35|0]=e>>>24,c[t+36|0]=r,c[t+37|0]=r>>>8,c[t+38|0]=r>>>16,c[t+39|0]=r>>>24,c[t+72|0]=e,c[t+73|0]=e>>>8,c[t+74|0]=e>>>16,c[t+75|0]=e>>>24,c[t+76|0]=r,c[t+77|0]=r>>>8,c[t+78|0]=r>>>16,c[t+79|0]=r>>>24,c[t+64|0]=e,c[t+65|0]=e>>>8,c[t+66|0]=e>>>16,c[t+67|0]=e>>>24,c[t+68|0]=r,c[t+69|0]=r>>>8,c[t+70|0]=r>>>16,c[t+71|0]=r>>>24,c[t+104|0]=e,c[t+105|0]=e>>>8,c[t+106|0]=e>>>16,c[t+107|0]=e>>>24,c[t+108|0]=r,c[t+109|0]=r>>>8,c[t+110|0]=r>>>16,c[t+111|0]=r>>>24,c[t+96|0]=e,c[t+97|0]=e>>>8,c[t+98|0]=e>>>16,c[t+99|0]=e>>>24,c[t+100|0]=r,c[t+101|0]=r>>>8,c[t+102|0]=r>>>16,c[t+103|0]=r>>>24,c[t+136|0]=e,c[t+137|0]=e>>>8,c[t+138|0]=e>>>16,c[t+139|0]=e>>>24,c[t+140|0]=r,c[t+141|0]=r>>>8,c[t+142|0]=r>>>16,c[t+143|0]=r>>>24,c[t+128|0]=e,c[t+129|0]=e>>>8,c[t+130|0]=e>>>16,c[t+131|0]=e>>>24,c[t+132|0]=r,c[t+133|0]=r>>>8,c[t+134|0]=r>>>16,c[t+135|0]=r>>>24,c[t+168|0]=e,c[t+169|0]=e>>>8,c[t+170|0]=e>>>16,c[t+171|0]=e>>>24,c[t+172|0]=r,c[t+173|0]=r>>>8,c[t+174|0]=r>>>16,c[t+175|0]=r>>>24,c[t+160|0]=e,c[t+161|0]=e>>>8,c[t+162|0]=e>>>16,c[t+163|0]=e>>>24,c[t+164|0]=r,c[t+165|0]=r>>>8,c[t+166|0]=r>>>16,c[t+167|0]=r>>>24,c[t+200|0]=e,c[t+201|0]=e>>>8,c[t+202|0]=e>>>16,c[t+203|0]=e>>>24,c[t+204|0]=r,c[t+205|0]=r>>>8,c[t+206|0]=r>>>16,c[t+207|0]=r>>>24,c[t+192|0]=e,c[t+193|0]=e>>>8,c[t+194|0]=e>>>16,c[t+195|0]=e>>>24,c[t+196|0]=r,c[t+197|0]=r>>>8,c[t+198|0]=r>>>16,c[t+199|0]=r>>>24,c[t+232|0]=e,c[t+233|0]=e>>>8,c[t+234|0]=e>>>16,c[t+235|0]=e>>>24,c[t+236|0]=r,c[t+237|0]=r>>>8,c[t+238|0]=r>>>16,c[t+239|0]=r>>>24,c[t+224|0]=e,c[t+225|0]=e>>>8,c[t+226|0]=e>>>16,c[t+227|0]=e>>>24,c[t+228|0]=r,c[t+229|0]=r>>>8,c[t+230|0]=r>>>16,c[t+231|0]=r>>>24,c[t+264|0]=e,c[t+265|0]=e>>>8,c[t+266|0]=e>>>16,c[t+267|0]=e>>>24,c[t+268|0]=r,c[t+269|0]=r>>>8,c[t+270|0]=r>>>16,c[t+271|0]=r>>>24,c[t+256|0]=e,c[t+257|0]=e>>>8,c[t+258|0]=e>>>16,c[t+259|0]=e>>>24,c[t+260|0]=r,c[t+261|0]=r>>>8,c[t+262|0]=r>>>16,c[t+263|0]=r>>>24,c[t+296|0]=e,c[t+297|0]=e>>>8,c[t+298|0]=e>>>16,c[t+299|0]=e>>>24,c[t+300|0]=r,c[t+301|0]=r>>>8,c[t+302|0]=r>>>16,c[t+303|0]=r>>>24,c[t+288|0]=e,c[t+289|0]=e>>>8,c[t+290|0]=e>>>16,c[t+291|0]=e>>>24,c[t+292|0]=r,c[t+293|0]=r>>>8,c[t+294|0]=r>>>16,c[t+295|0]=r>>>24,c[t+328|0]=e,c[t+329|0]=e>>>8,c[t+330|0]=e>>>16,c[t+331|0]=e>>>24,c[t+332|0]=r,c[t+333|0]=r>>>8,c[t+334|0]=r>>>16,c[t+335|0]=r>>>24,c[t+320|0]=e,c[t+321|0]=e>>>8,c[t+322|0]=e>>>16,c[t+323|0]=e>>>24,c[t+324|0]=r,c[t+325|0]=r>>>8,c[t+326|0]=r>>>16,c[t+327|0]=r>>>24,c[t+360|0]=e,c[t+361|0]=e>>>8,c[t+362|0]=e>>>16,c[t+363|0]=e>>>24,c[t+364|0]=r,c[t+365|0]=r>>>8,c[t+366|0]=r>>>16,c[t+367|0]=r>>>24,c[t+352|0]=e,c[t+353|0]=e>>>8,c[t+354|0]=e>>>16,c[t+355|0]=e>>>24,c[t+356|0]=r,c[t+357|0]=r>>>8,c[t+358|0]=r>>>16,c[t+359|0]=r>>>24,c[t+392|0]=e,c[t+393|0]=e>>>8,c[t+394|0]=e>>>16,c[t+395|0]=e>>>24,c[t+396|0]=r,c[t+397|0]=r>>>8,c[t+398|0]=r>>>16,c[t+399|0]=r>>>24,c[t+384|0]=e,c[t+385|0]=e>>>8,c[t+386|0]=e>>>16,c[t+387|0]=e>>>24,c[t+388|0]=r,c[t+389|0]=r>>>8,c[t+390|0]=r>>>16,c[t+391|0]=r>>>24,c[t+424|0]=e,c[t+425|0]=e>>>8,c[t+426|0]=e>>>16,c[t+427|0]=e>>>24,c[t+428|0]=r,c[t+429|0]=r>>>8,c[t+430|0]=r>>>16,c[t+431|0]=r>>>24,c[t+416|0]=e,c[t+417|0]=e>>>8,c[t+418|0]=e>>>16,c[t+419|0]=e>>>24,c[t+420|0]=r,c[t+421|0]=r>>>8,c[t+422|0]=r>>>16,c[t+423|0]=r>>>24,c[t+456|0]=e,c[t+457|0]=e>>>8,c[t+458|0]=e>>>16,c[t+459|0]=e>>>24,c[t+460|0]=r,c[t+461|0]=r>>>8,c[t+462|0]=r>>>16,c[t+463|0]=r>>>24,c[t+448|0]=e,c[t+449|0]=e>>>8,c[t+450|0]=e>>>16,c[t+451|0]=e>>>24,c[t+452|0]=r,c[t+453|0]=r>>>8,c[t+454|0]=r>>>16,c[t+455|0]=r>>>24,c[t+488|0]=e,c[t+489|0]=e>>>8,c[t+490|0]=e>>>16,c[t+491|0]=e>>>24,c[t+492|0]=r,c[t+493|0]=r>>>8,c[t+494|0]=r>>>16,c[t+495|0]=r>>>24,c[t+480|0]=e,c[t+481|0]=e>>>8,c[t+482|0]=e>>>16,c[t+483|0]=e>>>24,c[t+484|0]=r,c[t+485|0]=r>>>8,c[t+486|0]=r>>>16,c[t+487|0]=r>>>24}function Kt(e){e=e|0;var t=0,r=0;t=e,e=Jr((A[t+479|0]+(A[t+447|0]+(A[t+415|0]+(A[t+383|0]+(A[t+351|0]+(A[t+319|0]+(A[t+287|0]+(A[t+255|0]+(A[t+223|0]+(A[t+191|0]+(A[t+159|0]+(A[t+127|0]+(A[t+95|0]+(A[t+63|0]+(A[t+-1|0]+A[t+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),c[t|0]=e,c[t+1|0]=e>>>8,c[t+2|0]=e>>>16,c[t+3|0]=e>>>24,r=yr,c[t+4|0]=r,c[t+5|0]=r>>>8,c[t+6|0]=r>>>16,c[t+7|0]=r>>>24,c[t+8|0]=e,c[t+9|0]=e>>>8,c[t+10|0]=e>>>16,c[t+11|0]=e>>>24,c[t+12|0]=r,c[t+13|0]=r>>>8,c[t+14|0]=r>>>16,c[t+15|0]=r>>>24,c[t+40|0]=e,c[t+41|0]=e>>>8,c[t+42|0]=e>>>16,c[t+43|0]=e>>>24,c[t+44|0]=r,c[t+45|0]=r>>>8,c[t+46|0]=r>>>16,c[t+47|0]=r>>>24,c[t+32|0]=e,c[t+33|0]=e>>>8,c[t+34|0]=e>>>16,c[t+35|0]=e>>>24,c[t+36|0]=r,c[t+37|0]=r>>>8,c[t+38|0]=r>>>16,c[t+39|0]=r>>>24,c[t+72|0]=e,c[t+73|0]=e>>>8,c[t+74|0]=e>>>16,c[t+75|0]=e>>>24,c[t+76|0]=r,c[t+77|0]=r>>>8,c[t+78|0]=r>>>16,c[t+79|0]=r>>>24,c[t+64|0]=e,c[t+65|0]=e>>>8,c[t+66|0]=e>>>16,c[t+67|0]=e>>>24,c[t+68|0]=r,c[t+69|0]=r>>>8,c[t+70|0]=r>>>16,c[t+71|0]=r>>>24,c[t+104|0]=e,c[t+105|0]=e>>>8,c[t+106|0]=e>>>16,c[t+107|0]=e>>>24,c[t+108|0]=r,c[t+109|0]=r>>>8,c[t+110|0]=r>>>16,c[t+111|0]=r>>>24,c[t+96|0]=e,c[t+97|0]=e>>>8,c[t+98|0]=e>>>16,c[t+99|0]=e>>>24,c[t+100|0]=r,c[t+101|0]=r>>>8,c[t+102|0]=r>>>16,c[t+103|0]=r>>>24,c[t+136|0]=e,c[t+137|0]=e>>>8,c[t+138|0]=e>>>16,c[t+139|0]=e>>>24,c[t+140|0]=r,c[t+141|0]=r>>>8,c[t+142|0]=r>>>16,c[t+143|0]=r>>>24,c[t+128|0]=e,c[t+129|0]=e>>>8,c[t+130|0]=e>>>16,c[t+131|0]=e>>>24,c[t+132|0]=r,c[t+133|0]=r>>>8,c[t+134|0]=r>>>16,c[t+135|0]=r>>>24,c[t+168|0]=e,c[t+169|0]=e>>>8,c[t+170|0]=e>>>16,c[t+171|0]=e>>>24,c[t+172|0]=r,c[t+173|0]=r>>>8,c[t+174|0]=r>>>16,c[t+175|0]=r>>>24,c[t+160|0]=e,c[t+161|0]=e>>>8,c[t+162|0]=e>>>16,c[t+163|0]=e>>>24,c[t+164|0]=r,c[t+165|0]=r>>>8,c[t+166|0]=r>>>16,c[t+167|0]=r>>>24,c[t+200|0]=e,c[t+201|0]=e>>>8,c[t+202|0]=e>>>16,c[t+203|0]=e>>>24,c[t+204|0]=r,c[t+205|0]=r>>>8,c[t+206|0]=r>>>16,c[t+207|0]=r>>>24,c[t+192|0]=e,c[t+193|0]=e>>>8,c[t+194|0]=e>>>16,c[t+195|0]=e>>>24,c[t+196|0]=r,c[t+197|0]=r>>>8,c[t+198|0]=r>>>16,c[t+199|0]=r>>>24,c[t+232|0]=e,c[t+233|0]=e>>>8,c[t+234|0]=e>>>16,c[t+235|0]=e>>>24,c[t+236|0]=r,c[t+237|0]=r>>>8,c[t+238|0]=r>>>16,c[t+239|0]=r>>>24,c[t+224|0]=e,c[t+225|0]=e>>>8,c[t+226|0]=e>>>16,c[t+227|0]=e>>>24,c[t+228|0]=r,c[t+229|0]=r>>>8,c[t+230|0]=r>>>16,c[t+231|0]=r>>>24,c[t+264|0]=e,c[t+265|0]=e>>>8,c[t+266|0]=e>>>16,c[t+267|0]=e>>>24,c[t+268|0]=r,c[t+269|0]=r>>>8,c[t+270|0]=r>>>16,c[t+271|0]=r>>>24,c[t+256|0]=e,c[t+257|0]=e>>>8,c[t+258|0]=e>>>16,c[t+259|0]=e>>>24,c[t+260|0]=r,c[t+261|0]=r>>>8,c[t+262|0]=r>>>16,c[t+263|0]=r>>>24,c[t+296|0]=e,c[t+297|0]=e>>>8,c[t+298|0]=e>>>16,c[t+299|0]=e>>>24,c[t+300|0]=r,c[t+301|0]=r>>>8,c[t+302|0]=r>>>16,c[t+303|0]=r>>>24,c[t+288|0]=e,c[t+289|0]=e>>>8,c[t+290|0]=e>>>16,c[t+291|0]=e>>>24,c[t+292|0]=r,c[t+293|0]=r>>>8,c[t+294|0]=r>>>16,c[t+295|0]=r>>>24,c[t+328|0]=e,c[t+329|0]=e>>>8,c[t+330|0]=e>>>16,c[t+331|0]=e>>>24,c[t+332|0]=r,c[t+333|0]=r>>>8,c[t+334|0]=r>>>16,c[t+335|0]=r>>>24,c[t+320|0]=e,c[t+321|0]=e>>>8,c[t+322|0]=e>>>16,c[t+323|0]=e>>>24,c[t+324|0]=r,c[t+325|0]=r>>>8,c[t+326|0]=r>>>16,c[t+327|0]=r>>>24,c[t+360|0]=e,c[t+361|0]=e>>>8,c[t+362|0]=e>>>16,c[t+363|0]=e>>>24,c[t+364|0]=r,c[t+365|0]=r>>>8,c[t+366|0]=r>>>16,c[t+367|0]=r>>>24,c[t+352|0]=e,c[t+353|0]=e>>>8,c[t+354|0]=e>>>16,c[t+355|0]=e>>>24,c[t+356|0]=r,c[t+357|0]=r>>>8,c[t+358|0]=r>>>16,c[t+359|0]=r>>>24,c[t+392|0]=e,c[t+393|0]=e>>>8,c[t+394|0]=e>>>16,c[t+395|0]=e>>>24,c[t+396|0]=r,c[t+397|0]=r>>>8,c[t+398|0]=r>>>16,c[t+399|0]=r>>>24,c[t+384|0]=e,c[t+385|0]=e>>>8,c[t+386|0]=e>>>16,c[t+387|0]=e>>>24,c[t+388|0]=r,c[t+389|0]=r>>>8,c[t+390|0]=r>>>16,c[t+391|0]=r>>>24,c[t+424|0]=e,c[t+425|0]=e>>>8,c[t+426|0]=e>>>16,c[t+427|0]=e>>>24,c[t+428|0]=r,c[t+429|0]=r>>>8,c[t+430|0]=r>>>16,c[t+431|0]=r>>>24,c[t+416|0]=e,c[t+417|0]=e>>>8,c[t+418|0]=e>>>16,c[t+419|0]=e>>>24,c[t+420|0]=r,c[t+421|0]=r>>>8,c[t+422|0]=r>>>16,c[t+423|0]=r>>>24,c[t+456|0]=e,c[t+457|0]=e>>>8,c[t+458|0]=e>>>16,c[t+459|0]=e>>>24,c[t+460|0]=r,c[t+461|0]=r>>>8,c[t+462|0]=r>>>16,c[t+463|0]=r>>>24,c[t+448|0]=e,c[t+449|0]=e>>>8,c[t+450|0]=e>>>16,c[t+451|0]=e>>>24,c[t+452|0]=r,c[t+453|0]=r>>>8,c[t+454|0]=r>>>16,c[t+455|0]=r>>>24,c[t+488|0]=e,c[t+489|0]=e>>>8,c[t+490|0]=e>>>16,c[t+491|0]=e>>>24,c[t+492|0]=r,c[t+493|0]=r>>>8,c[t+494|0]=r>>>16,c[t+495|0]=r>>>24,c[t+480|0]=e,c[t+481|0]=e>>>8,c[t+482|0]=e>>>16,c[t+483|0]=e>>>24,c[t+484|0]=r,c[t+485|0]=r>>>8,c[t+486|0]=r>>>16,c[t+487|0]=r>>>24}function Li(e){e=e|0;var t=0,r=0;for(r=16;r=A[(e+t|0)+-32|0]+(A[((t<<5)+e|0)+-1|0]+r|0)|0,t=t+1|0,(t|0)!=16;);t=e,e=Jr(r>>>5&255,0,16843009,16843009),r=e,c[t+8|0]=r,c[t+9|0]=r>>>8,c[t+10|0]=r>>>16,c[t+11|0]=r>>>24,e=yr,c[t+12|0]=e,c[t+13|0]=e>>>8,c[t+14|0]=e>>>16,c[t+15|0]=e>>>24,c[t|0]=r,c[t+1|0]=r>>>8,c[t+2|0]=r>>>16,c[t+3|0]=r>>>24,c[t+4|0]=e,c[t+5|0]=e>>>8,c[t+6|0]=e>>>16,c[t+7|0]=e>>>24,c[t+32|0]=r,c[t+33|0]=r>>>8,c[t+34|0]=r>>>16,c[t+35|0]=r>>>24,c[t+36|0]=e,c[t+37|0]=e>>>8,c[t+38|0]=e>>>16,c[t+39|0]=e>>>24,c[t+40|0]=r,c[t+41|0]=r>>>8,c[t+42|0]=r>>>16,c[t+43|0]=r>>>24,c[t+44|0]=e,c[t+45|0]=e>>>8,c[t+46|0]=e>>>16,c[t+47|0]=e>>>24,c[t+64|0]=r,c[t+65|0]=r>>>8,c[t+66|0]=r>>>16,c[t+67|0]=r>>>24,c[t+68|0]=e,c[t+69|0]=e>>>8,c[t+70|0]=e>>>16,c[t+71|0]=e>>>24,c[t+72|0]=r,c[t+73|0]=r>>>8,c[t+74|0]=r>>>16,c[t+75|0]=r>>>24,c[t+76|0]=e,c[t+77|0]=e>>>8,c[t+78|0]=e>>>16,c[t+79|0]=e>>>24,c[t+96|0]=r,c[t+97|0]=r>>>8,c[t+98|0]=r>>>16,c[t+99|0]=r>>>24,c[t+100|0]=e,c[t+101|0]=e>>>8,c[t+102|0]=e>>>16,c[t+103|0]=e>>>24,c[t+104|0]=r,c[t+105|0]=r>>>8,c[t+106|0]=r>>>16,c[t+107|0]=r>>>24,c[t+108|0]=e,c[t+109|0]=e>>>8,c[t+110|0]=e>>>16,c[t+111|0]=e>>>24,c[t+128|0]=r,c[t+129|0]=r>>>8,c[t+130|0]=r>>>16,c[t+131|0]=r>>>24,c[t+132|0]=e,c[t+133|0]=e>>>8,c[t+134|0]=e>>>16,c[t+135|0]=e>>>24,c[t+136|0]=r,c[t+137|0]=r>>>8,c[t+138|0]=r>>>16,c[t+139|0]=r>>>24,c[t+140|0]=e,c[t+141|0]=e>>>8,c[t+142|0]=e>>>16,c[t+143|0]=e>>>24,c[t+160|0]=r,c[t+161|0]=r>>>8,c[t+162|0]=r>>>16,c[t+163|0]=r>>>24,c[t+164|0]=e,c[t+165|0]=e>>>8,c[t+166|0]=e>>>16,c[t+167|0]=e>>>24,c[t+168|0]=r,c[t+169|0]=r>>>8,c[t+170|0]=r>>>16,c[t+171|0]=r>>>24,c[t+172|0]=e,c[t+173|0]=e>>>8,c[t+174|0]=e>>>16,c[t+175|0]=e>>>24,c[t+192|0]=r,c[t+193|0]=r>>>8,c[t+194|0]=r>>>16,c[t+195|0]=r>>>24,c[t+196|0]=e,c[t+197|0]=e>>>8,c[t+198|0]=e>>>16,c[t+199|0]=e>>>24,c[t+200|0]=r,c[t+201|0]=r>>>8,c[t+202|0]=r>>>16,c[t+203|0]=r>>>24,c[t+204|0]=e,c[t+205|0]=e>>>8,c[t+206|0]=e>>>16,c[t+207|0]=e>>>24,c[t+232|0]=r,c[t+233|0]=r>>>8,c[t+234|0]=r>>>16,c[t+235|0]=r>>>24,c[t+236|0]=e,c[t+237|0]=e>>>8,c[t+238|0]=e>>>16,c[t+239|0]=e>>>24,c[t+224|0]=r,c[t+225|0]=r>>>8,c[t+226|0]=r>>>16,c[t+227|0]=r>>>24,c[t+228|0]=e,c[t+229|0]=e>>>8,c[t+230|0]=e>>>16,c[t+231|0]=e>>>24,c[t+264|0]=r,c[t+265|0]=r>>>8,c[t+266|0]=r>>>16,c[t+267|0]=r>>>24,c[t+268|0]=e,c[t+269|0]=e>>>8,c[t+270|0]=e>>>16,c[t+271|0]=e>>>24,c[t+256|0]=r,c[t+257|0]=r>>>8,c[t+258|0]=r>>>16,c[t+259|0]=r>>>24,c[t+260|0]=e,c[t+261|0]=e>>>8,c[t+262|0]=e>>>16,c[t+263|0]=e>>>24,c[t+296|0]=r,c[t+297|0]=r>>>8,c[t+298|0]=r>>>16,c[t+299|0]=r>>>24,c[t+300|0]=e,c[t+301|0]=e>>>8,c[t+302|0]=e>>>16,c[t+303|0]=e>>>24,c[t+288|0]=r,c[t+289|0]=r>>>8,c[t+290|0]=r>>>16,c[t+291|0]=r>>>24,c[t+292|0]=e,c[t+293|0]=e>>>8,c[t+294|0]=e>>>16,c[t+295|0]=e>>>24,c[t+328|0]=r,c[t+329|0]=r>>>8,c[t+330|0]=r>>>16,c[t+331|0]=r>>>24,c[t+332|0]=e,c[t+333|0]=e>>>8,c[t+334|0]=e>>>16,c[t+335|0]=e>>>24,c[t+320|0]=r,c[t+321|0]=r>>>8,c[t+322|0]=r>>>16,c[t+323|0]=r>>>24,c[t+324|0]=e,c[t+325|0]=e>>>8,c[t+326|0]=e>>>16,c[t+327|0]=e>>>24,c[t+360|0]=r,c[t+361|0]=r>>>8,c[t+362|0]=r>>>16,c[t+363|0]=r>>>24,c[t+364|0]=e,c[t+365|0]=e>>>8,c[t+366|0]=e>>>16,c[t+367|0]=e>>>24,c[t+352|0]=r,c[t+353|0]=r>>>8,c[t+354|0]=r>>>16,c[t+355|0]=r>>>24,c[t+356|0]=e,c[t+357|0]=e>>>8,c[t+358|0]=e>>>16,c[t+359|0]=e>>>24,c[t+392|0]=r,c[t+393|0]=r>>>8,c[t+394|0]=r>>>16,c[t+395|0]=r>>>24,c[t+396|0]=e,c[t+397|0]=e>>>8,c[t+398|0]=e>>>16,c[t+399|0]=e>>>24,c[t+384|0]=r,c[t+385|0]=r>>>8,c[t+386|0]=r>>>16,c[t+387|0]=r>>>24,c[t+388|0]=e,c[t+389|0]=e>>>8,c[t+390|0]=e>>>16,c[t+391|0]=e>>>24,c[t+424|0]=r,c[t+425|0]=r>>>8,c[t+426|0]=r>>>16,c[t+427|0]=r>>>24,c[t+428|0]=e,c[t+429|0]=e>>>8,c[t+430|0]=e>>>16,c[t+431|0]=e>>>24,c[t+416|0]=r,c[t+417|0]=r>>>8,c[t+418|0]=r>>>16,c[t+419|0]=r>>>24,c[t+420|0]=e,c[t+421|0]=e>>>8,c[t+422|0]=e>>>16,c[t+423|0]=e>>>24,c[t+456|0]=r,c[t+457|0]=r>>>8,c[t+458|0]=r>>>16,c[t+459|0]=r>>>24,c[t+460|0]=e,c[t+461|0]=e>>>8,c[t+462|0]=e>>>16,c[t+463|0]=e>>>24,c[t+448|0]=r,c[t+449|0]=r>>>8,c[t+450|0]=r>>>16,c[t+451|0]=r>>>24,c[t+452|0]=e,c[t+453|0]=e>>>8,c[t+454|0]=e>>>16,c[t+455|0]=e>>>24,c[t+488|0]=r,c[t+489|0]=r>>>8,c[t+490|0]=r>>>16,c[t+491|0]=r>>>24,c[t+492|0]=e,c[t+493|0]=e>>>8,c[t+494|0]=e>>>16,c[t+495|0]=e>>>24,c[t+480|0]=r,c[t+481|0]=r>>>8,c[t+482|0]=r>>>16,c[t+483|0]=r>>>24,c[t+484|0]=e,c[t+485|0]=e>>>8,c[t+486|0]=e>>>16,c[t+487|0]=e>>>24}function Xi(e,t,r,f,y){var v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0,jo=0,Zs=0,Ra=0,fu=0,s0=0;Bt=br-16|0,br=Bt,$e=f+120|0,$=f+24|0;e:{t:{i:{r:{o:{l:{n:{if(!r)break n;for(;;){if(!Dn($,1))break n;if(v=s[f+176>>2],Ne=Dn($,2),N=s[f+260>>2],S=1<<Ne,N&S)break l;s[f+260>>2]=S|N,v=W(v,20)+f|0,G=v+196|0,s[G>>2]=0,N=v+192|0,s[N>>2]=t,S=v+188|0,s[S>>2]=e,s[v+180>>2]=Ne,ce=1,s[f+176>>2]=s[f+176>>2]+1;u:switch(Ne|0){case 0:case 1:if(hi=v,v=Dn($,3)+2|0,s[hi+184>>2]=v,hi=s[S>>2],S=-1<<v^-1,Xi(hi+S>>>v|0,S+s[N>>2]>>>v|0,0,f,G))continue;break l;case 3:w=Dn($,8)+1|0,e=0;s:{if((w|0)>16||(e=1,(w|0)>4))break s;e=(w|0)>2?2:3}if(N=s[S>>2],S=v+184|0,s[S>>2]=e,!Xi(w,1,0,f,G))break l;if(Ne=(N+(1<<e)|0)+-1|0,v=1<<(8>>>s[S>>2]),F=ts(v,0,4),F){if(N=s[G>>2],s[F>>2]=s[N>>2],ce=4,(w|0)>=2)for(S=w<<2,ce=(S|0)>5?S:5,w=4;S=w+F|0,c[S|0]=A[S+-4|0]+A[w+N|0],w=w+1|0,(ce|0)!=(w|0););S=v<<2,(S|0)>(ce|0)&&yo(F+ce|0,0,S-ce|0),gn(s[G>>2]),s[G>>2]=F}e=Ne>>>e|0,ce=(F|0)!=0;break;default:break u}if(!ce)break}break l}n:{if(!Dn($,1)||(Yt=Dn($,4),Yt+-1>>>0<11))break n;s[f>>2]=3,w=0;break r}s[Bt+12>>2]=0;n:{u:{s:{if(!r){Ne=1,S=1;break s}if(Ne=1,S=1,!Dn($,1))break s;if(yi=1,v=Dn($,3)+2|0,S=1<<v,N=(S+e|0)+-1>>>v|0,S=(t+S|0)+-1>>>v|0,!Xi(N,S,0,f,Bt+12|0))break u;if(s[f+152>>2]=v,gt=W(S,N),(gt|0)>=1)for(w=0,S=s[Bt+12>>2];N=S+(w<<2)|0,v=A[N+1|0]|A[N+2|0]<<8,s[N>>2]=v,Ne=(v|0)<(Ne|0)?Ne:v+1|0,w=w+1|0,(gt|0)!=(w|0););if(!((Ne|0)>1e3|(Ne|0)>(W(e,t)|0))){S=Ne;break s}if(ar=ts(Ne,0,4),!ar){s[f>>2]=1,ar=0;break u}if($=yo(ar,255,Ne<<2),(gt|0)<1){S=0;break s}for(w=0,G=s[Bt+12>>2],S=0;F=G+(w<<2)|0,N=$+(s[F>>2]<<2)|0,v=s[N>>2],(v|0)==-1&&(s[N>>2]=S,v=S,S=v+1|0),s[F>>2]=v,w=w+1|0,(gt|0)!=(w|0););}if(s[f+48>>2]){yi=1;break u}if(yi=1,s0=1<<Yt,fu=(Yt|0)>0?s0+280|0:280,ce=bl((fu|0)>256?fu:256,0,4),Mi=W(tr[(Yt<<1)+1184>>1],S),Mi=ts(Mi,Mi>>31,4),Ra=ts(S,S>>31,548),!(!Ra|(!Mi|!ce))){for(N=Mi;;){w=qr;s:{a:{if(!ar||(w=s[(qr<<2)+ar>>2],(w|0)!=-1))break a;if(yi=1,!Ms(fu,f,ce,0)||!Ms(256,f,ce,0)||!Ms(256,f,ce,0)||!Ms(256,f,ce,0))break n;if(Ms(40,f,ce,0))break s;break n}for(xe=W(w,548)+Ra|0,yi=1,At=0,on=0,Vi=1,jo=0;;){if(s[(At<<2)+xe>>2]=N,gt=tr[(At<<1)+1208>>1]+((Yt|0)>0?At?0:s0:0)|0,v=Ms(gt,f,ce,N),!v)break n;a:{if(!Vi){Vi=0;break a}if(!(At&2147483643))break a;Vi=!A[N|0]}if($=v<<2,G=A[N|0],At>>>0<=3){if(w=s[ce>>2],v=1,(gt|0)>=2)for(;F=s[(v<<2)+ce>>2],w=(F|0)>(w|0)?F:w,v=v+1|0,(gt|0)!=(v|0););on=w+on|0}if(N=N+$|0,jo=G+jo|0,At=At+1|0,(At|0)==5)break}s[xe+28>>2]=0,s[xe+20>>2]=Vi;a:{if(!Vi||(w=tr[s[xe+8>>2]+2>>1]|tr[s[xe+4>>2]+2>>1]<<16|tr[s[xe+12>>2]+2>>1]<<24,s[xe+24>>2]=w,jo)||(v=tr[s[xe>>2]+2>>1],v>>>0>255))break a;s[xe+28>>2]=1,s[xe+24>>2]=w|v<<8,s[xe+32>>2]=0;break s}if(s[xe+32>>2]=(on|0)<6,(on|0)>5)break s;for(yi=xe+12|0,Vi=xe+8|0,on=xe+4|0,jo=s[xe>>2],w=0;;){G=(w<<3)+xe|0,Zs=G+36|0,v=jo+(w<<2)|0,F=tr[v>>1]|tr[v+2>>1]<<16,v=F>>>16|0;a:{if(v>>>0>=256){s[Zs>>2]=F&255|256,s[G+40>>2]=v;break a}F=F&255,s[Zs>>2]=F,At=G+40|0,gt=v<<8,s[At>>2]=gt,$=w>>>F|0,v=s[on>>2]+($<<2)|0,G=A[v+2|0]|A[v+3|0]<<8,hi=F,F=A[v|0],v=hi+F|0,s[Zs>>2]=v,gt=gt|G<<16,s[At>>2]=gt,$=$>>>F|0,G=s[Vi>>2]+($<<2)|0,F=A[G+2|0]|A[G+3|0]<<8,hi=v,v=A[G|0],G=hi+v|0,s[Zs>>2]=G,F=F|gt,s[At>>2]=F,$=s[yi>>2]+($>>>v<<2)|0,v=A[$+2|0]|A[$+3|0]<<8,s[Zs>>2]=G+A[$|0],s[At>>2]=F|v<<24}if(w=w+1|0,(w|0)==64)break}}if(qr=qr+1|0,(qr|0)==(Ne|0))break}qr=s[Bt+12>>2],s[f+172>>2]=Mi,s[f+168>>2]=Ra,s[f+164>>2]=S,s[f+160>>2]=qr,yi=0;break n}s[f>>2]=1;break n}ce=0}if(gn(ce),gn(ar),!yi)break o;gn(s[Bt+12>>2]),gn(Mi),B0(Ra)}s[f>>2]=3,w=0;break r}o:{if((Yt|0)>=1){if(s[f+120>>2]=1<<Yt,wl(f+124|0,Yt))break o;s[f>>2]=1,w=0;break r}s[$e>>2]=0}if(s[f+104>>2]=t,s[f+100>>2]=e,S=s[f+152>>2],s[f+148>>2]=S?-1<<S^-1:-1,s[f+156>>2]=((1<<S)+e|0)+-1>>>S,r){s[f+4>>2]=1,w=0;break i}if(w=ts(Jr(e,e>>31,t,t>>31),yr,4),!w){s[f>>2]=1,w=0;break r}if(!hl(f,w,e,t,t,0))break r;if(!s[f+48>>2])break i}gn(w),w=0;break t}if(y&&(s[y>>2]=w),s[f+112>>2]=0,w=1,r)break e}gn(s[f+160>>2]),gn(s[f+172>>2]),B0(s[f+168>>2]),zu(f+124|0),zu(f+136|0),s[$e+48>>2]=0,s[$e+52>>2]=0,s[$e+40>>2]=0,s[$e+44>>2]=0,s[$e+32>>2]=0,s[$e+36>>2]=0,s[$e+24>>2]=0,s[$e+28>>2]=0,s[$e+16>>2]=0,s[$e+20>>2]=0,s[$e+8>>2]=0,s[$e+12>>2]=0,s[$e>>2]=0,s[$e+4>>2]=0}return br=Bt+16|0,w}function Mr(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;$=A[e|0],G=A[r|0],ce=A[f|0],xe=A[y|0],gt=A[v|0],c[w|0]=255,$=W($,19077)>>>8|0,xe=xe|gt<<16,G=G|ce<<16,ce=(xe+W(G,3)|0)+131074|0,gt=ce>>>2&255,At=$+(W(gt,33050)>>>8|0)|0,N=At+-17685|0,c[w+3|0]=N>>>0<16384?N>>>6|0:At>>>0<17685?0:255,ce=ce>>>18&255,At=$+(W(ce,26149)>>>8|0)|0,N=At+-14234|0,c[w+1|0]=N>>>0<16384?N>>>6|0:At>>>0<14234?0:255,$=$-(W(gt,6419)>>>8|0)-(W(ce,13320)>>>8)|0,ce=$+8708|0,c[w+2|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255,t&&($=A[t|0],c[S|0]=255,$=W($,19077)>>>8|0,ce=(W(xe,3)+G|0)+131074|0,gt=ce>>>2&255,At=$+(W(gt,33050)>>>8|0)|0,N=At+-17685|0,c[S+3|0]=N>>>0<16384?N>>>6|0:At>>>0<17685?0:255,ce=ce>>>18&255,At=$+(W(ce,26149)>>>8|0)|0,N=At+-14234|0,c[S+1|0]=N>>>0<16384?N>>>6|0:At>>>0<14234?0:255,$=$-(W(gt,6419)>>>8|0)-(W(ce,13320)>>>8)|0,ce=$+8708|0,c[S+2|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255),At=F+-1|0;e:{if((F|0)<3){$=xe,ce=G;break e}for($=At>>1,on=($|0)>1?$:1,gt=1;ar=gt<<1,Yt=ar+-1|0,Ne=A[Yt+e|0],ce=A[r+gt|0],Bt=A[f+gt|0],$=A[y+gt|0],Vi=A[v+gt|0],qr=Yt<<2,N=qr+w|0,c[N|0]=255,$=$|Vi<<16,ce=ce|Bt<<16,Vi=xe+ce|0,Bt=($+(Vi+G|0)|0)+524296|0,Ne=W(Ne,19077)>>>8|0,Vi=Bt+(Vi<<1)>>>3|0,yi=Vi+G|0,hi=yi>>>1&255,Mi=Ne+(W(hi,33050)>>>8|0)|0,$e=Mi+-17685|0,c[N+3|0]=$e>>>0<16384?$e>>>6|0:Mi>>>0<17685?0:255,yi=yi>>>17&255,Mi=Ne+(W(yi,26149)>>>8|0)|0,$e=Mi+-14234|0,c[N+1|0]=$e>>>0<16384?$e>>>6|0:Mi>>>0<14234?0:255,$e=N,N=Ne-(W(hi,6419)>>>8|0)-(W(yi,13320)>>>8)|0,Ne=N+8708|0,c[$e+2|0]=Ne>>>0<16384?Ne>>>6|0:(N|0)<-8708?0:255,Ne=A[e+ar|0],yi=gt<<3,N=yi+w|0,c[N|0]=255,Bt=Bt+(G+$<<1)>>>3|0,hi=Bt+ce|0,Mi=hi>>>1&255,G=W(Ne,19077)>>>8|0,Ne=(W(Mi,33050)>>>8|0)+G|0,$e=Ne+-17685|0,c[N+3|0]=$e>>>0<16384?$e>>>6|0:Ne>>>0<17685?0:255,Ne=hi>>>17&255,hi=G+(W(Ne,26149)>>>8|0)|0,$e=hi+-14234|0,c[N+1|0]=$e>>>0<16384?$e>>>6|0:hi>>>0<14234?0:255,$e=N,G=G-(W(Mi,6419)>>>8|0)-(W(Ne,13320)>>>8)|0,N=G+8708|0,c[$e+2|0]=N>>>0<16384?N>>>6|0:(G|0)<-8708?0:255,t&&(N=A[t+Yt|0],G=S+qr|0,c[G|0]=255,Yt=xe+Bt|0,Bt=Yt>>>1&255,xe=W(N,19077)>>>8|0,N=(W(Bt,33050)>>>8|0)+xe|0,Ne=N+-17685|0,c[G+3|0]=Ne>>>0<16384?Ne>>>6|0:N>>>0<17685?0:255,N=Yt>>>17&255,Yt=xe+(W(N,26149)>>>8|0)|0,Ne=Yt+-14234|0,c[G+1|0]=Ne>>>0<16384?Ne>>>6|0:Yt>>>0<14234?0:255,$e=G,G=xe-(W(Bt,6419)>>>8|0)-(W(N,13320)>>>8)|0,xe=G+8708|0,c[$e+2|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255,xe=A[t+ar|0],G=S+yi|0,c[G|0]=255,xe=W(xe,19077)>>>8|0,N=$+Vi|0,ar=N>>>1&255,Yt=xe+(W(ar,33050)>>>8|0)|0,Bt=Yt+-17685|0,c[G+3|0]=Bt>>>0<16384?Bt>>>6|0:Yt>>>0<17685?0:255,N=N>>>17&255,Yt=xe+(W(N,26149)>>>8|0)|0,Bt=Yt+-14234|0,c[G+1|0]=Bt>>>0<16384?Bt>>>6|0:Yt>>>0<14234?0:255,$e=G,G=xe-(W(ar,6419)>>>8|0)-(W(N,13320)>>>8)|0,xe=G+8708|0,c[$e+2|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255),N=(gt|0)!=(on|0),gt=gt+1|0,G=ce,xe=$,!!N;);}e:{if(F&1||(r=A[e+At|0],f=At<<2,e=f+w|0,c[e|0]=255,r=W(r,19077)>>>8|0,y=(W(ce,3)+$|0)+131074|0,v=y>>>2&255,w=r+(W(v,33050)>>>8|0)|0,F=w+-17685|0,c[e+3|0]=F>>>0<16384?F>>>6|0:w>>>0<17685?0:255,y=y>>>18&255,w=r+(W(y,26149)>>>8|0)|0,F=w+-14234|0,c[e+1|0]=F>>>0<16384?F>>>6|0:w>>>0<14234?0:255,w=e,e=r-(W(v,6419)>>>8|0)-(W(y,13320)>>>8)|0,r=e+8708|0,c[w+2|0]=r>>>0<16384?r>>>6|0:(e|0)<-8708?0:255,!t))break e;t=A[t+At|0],e=f+S|0,c[e|0]=255,t=W(t,19077)>>>8|0,r=(W($,3)+ce|0)+131074|0,f=r>>>2&255,y=t+(W(f,33050)>>>8|0)|0,v=y+-17685|0,c[e+3|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,r=r>>>18&255,y=t+(W(r,26149)>>>8|0)|0,v=y+-14234|0,c[e+1|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,y=e,e=t-(W(f,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[y+2|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255}}function en(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;$=A[e|0],G=A[r|0],ce=A[f|0],xe=A[y|0],gt=A[v|0],c[w+3|0]=255,$=W($,19077)>>>8|0,xe=xe|gt<<16,G=G|ce<<16,ce=(xe+W(G,3)|0)+131074|0,gt=ce>>>2&255,At=$+(W(gt,33050)>>>8|0)|0,N=At+-17685|0,c[w+2|0]=N>>>0<16384?N>>>6|0:At>>>0<17685?0:255,ce=ce>>>18&255,At=$+(W(ce,26149)>>>8|0)|0,N=At+-14234|0,c[w|0]=N>>>0<16384?N>>>6|0:At>>>0<14234?0:255,$=$-(W(gt,6419)>>>8|0)-(W(ce,13320)>>>8)|0,ce=$+8708|0,c[w+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255,t&&($=A[t|0],c[S+3|0]=255,$=W($,19077)>>>8|0,ce=(W(xe,3)+G|0)+131074|0,gt=ce>>>2&255,At=$+(W(gt,33050)>>>8|0)|0,N=At+-17685|0,c[S+2|0]=N>>>0<16384?N>>>6|0:At>>>0<17685?0:255,ce=ce>>>18&255,At=$+(W(ce,26149)>>>8|0)|0,N=At+-14234|0,c[S|0]=N>>>0<16384?N>>>6|0:At>>>0<14234?0:255,$=$-(W(gt,6419)>>>8|0)-(W(ce,13320)>>>8)|0,ce=$+8708|0,c[S+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255),At=F+-1|0;e:{if((F|0)<3){$=xe,ce=G;break e}for($=At>>1,on=($|0)>1?$:1,gt=1;ar=gt<<1,Yt=ar+-1|0,Ne=A[Yt+e|0],ce=A[r+gt|0],Bt=A[f+gt|0],$=A[y+gt|0],Vi=A[v+gt|0],qr=Yt<<2,N=qr+w|0,c[N+3|0]=255,$=$|Vi<<16,ce=ce|Bt<<16,Vi=xe+ce|0,Bt=($+(Vi+G|0)|0)+524296|0,Ne=W(Ne,19077)>>>8|0,Vi=Bt+(Vi<<1)>>>3|0,yi=Vi+G|0,hi=yi>>>1&255,Mi=Ne+(W(hi,33050)>>>8|0)|0,$e=Mi+-17685|0,c[N+2|0]=$e>>>0<16384?$e>>>6|0:Mi>>>0<17685?0:255,yi=yi>>>17&255,Mi=Ne+(W(yi,26149)>>>8|0)|0,$e=Mi+-14234|0,c[N|0]=$e>>>0<16384?$e>>>6|0:Mi>>>0<14234?0:255,$e=N,N=Ne-(W(hi,6419)>>>8|0)-(W(yi,13320)>>>8)|0,Ne=N+8708|0,c[$e+1|0]=Ne>>>0<16384?Ne>>>6|0:(N|0)<-8708?0:255,Ne=A[e+ar|0],yi=gt<<3,N=yi+w|0,c[N+3|0]=255,Bt=Bt+(G+$<<1)>>>3|0,hi=Bt+ce|0,Mi=hi>>>1&255,G=W(Ne,19077)>>>8|0,Ne=(W(Mi,33050)>>>8|0)+G|0,$e=Ne+-17685|0,c[N+2|0]=$e>>>0<16384?$e>>>6|0:Ne>>>0<17685?0:255,Ne=hi>>>17&255,hi=G+(W(Ne,26149)>>>8|0)|0,$e=hi+-14234|0,c[N|0]=$e>>>0<16384?$e>>>6|0:hi>>>0<14234?0:255,$e=N,G=G-(W(Mi,6419)>>>8|0)-(W(Ne,13320)>>>8)|0,N=G+8708|0,c[$e+1|0]=N>>>0<16384?N>>>6|0:(G|0)<-8708?0:255,t&&(N=A[t+Yt|0],G=S+qr|0,c[G+3|0]=255,Yt=xe+Bt|0,Bt=Yt>>>1&255,xe=W(N,19077)>>>8|0,N=(W(Bt,33050)>>>8|0)+xe|0,Ne=N+-17685|0,c[G+2|0]=Ne>>>0<16384?Ne>>>6|0:N>>>0<17685?0:255,N=Yt>>>17&255,Yt=xe+(W(N,26149)>>>8|0)|0,Ne=Yt+-14234|0,c[G|0]=Ne>>>0<16384?Ne>>>6|0:Yt>>>0<14234?0:255,$e=G,G=xe-(W(Bt,6419)>>>8|0)-(W(N,13320)>>>8)|0,xe=G+8708|0,c[$e+1|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255,xe=A[t+ar|0],G=S+yi|0,c[G+3|0]=255,xe=W(xe,19077)>>>8|0,N=$+Vi|0,ar=N>>>1&255,Yt=xe+(W(ar,33050)>>>8|0)|0,Bt=Yt+-17685|0,c[G+2|0]=Bt>>>0<16384?Bt>>>6|0:Yt>>>0<17685?0:255,N=N>>>17&255,Yt=xe+(W(N,26149)>>>8|0)|0,Bt=Yt+-14234|0,c[G|0]=Bt>>>0<16384?Bt>>>6|0:Yt>>>0<14234?0:255,$e=G,G=xe-(W(ar,6419)>>>8|0)-(W(N,13320)>>>8)|0,xe=G+8708|0,c[$e+1|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255),N=(gt|0)!=(on|0),gt=gt+1|0,G=ce,xe=$,!!N;);}e:{if(F&1||(r=A[e+At|0],f=At<<2,e=f+w|0,c[e+3|0]=255,r=W(r,19077)>>>8|0,y=(W(ce,3)+$|0)+131074|0,v=y>>>2&255,w=r+(W(v,33050)>>>8|0)|0,F=w+-17685|0,c[e+2|0]=F>>>0<16384?F>>>6|0:w>>>0<17685?0:255,y=y>>>18&255,w=r+(W(y,26149)>>>8|0)|0,F=w+-14234|0,c[e|0]=F>>>0<16384?F>>>6|0:w>>>0<14234?0:255,w=e,e=r-(W(v,6419)>>>8|0)-(W(y,13320)>>>8)|0,r=e+8708|0,c[w+1|0]=r>>>0<16384?r>>>6|0:(e|0)<-8708?0:255,!t))break e;t=A[t+At|0],e=f+S|0,c[e+3|0]=255,t=W(t,19077)>>>8|0,r=(W($,3)+ce|0)+131074|0,f=r>>>2&255,y=t+(W(f,33050)>>>8|0)|0,v=y+-17685|0,c[e+2|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,r=r>>>18&255,y=t+(W(r,26149)>>>8|0)|0,v=y+-14234|0,c[e|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,y=e,e=t-(W(f,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[y+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255}}function mn(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;$=A[e|0],G=A[r|0],ce=A[f|0],xe=A[y|0],gt=A[v|0],c[w+3|0]=255,$=W($,19077)>>>8|0,xe=xe|gt<<16,G=G|ce<<16,ce=(xe+W(G,3)|0)+131074|0,gt=ce>>>18&255,At=$+(W(gt,26149)>>>8|0)|0,N=At+-14234|0,c[w+2|0]=N>>>0<16384?N>>>6|0:At>>>0<14234?0:255,ce=ce>>>2&255,At=$+(W(ce,33050)>>>8|0)|0,N=At+-17685|0,c[w|0]=N>>>0<16384?N>>>6|0:At>>>0<17685?0:255,$=$-(W(ce,6419)>>>8|0)-(W(gt,13320)>>>8)|0,ce=$+8708|0,c[w+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255,t&&($=A[t|0],c[S+3|0]=255,$=W($,19077)>>>8|0,ce=(W(xe,3)+G|0)+131074|0,gt=ce>>>18&255,At=$+(W(gt,26149)>>>8|0)|0,N=At+-14234|0,c[S+2|0]=N>>>0<16384?N>>>6|0:At>>>0<14234?0:255,ce=ce>>>2&255,At=$+(W(ce,33050)>>>8|0)|0,N=At+-17685|0,c[S|0]=N>>>0<16384?N>>>6|0:At>>>0<17685?0:255,$=$-(W(ce,6419)>>>8|0)-(W(gt,13320)>>>8)|0,ce=$+8708|0,c[S+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255),At=F+-1|0;e:{if((F|0)<3){$=xe,ce=G;break e}for($=At>>1,on=($|0)>1?$:1,gt=1;ar=gt<<1,Yt=ar+-1|0,Ne=A[Yt+e|0],ce=A[r+gt|0],Bt=A[f+gt|0],$=A[y+gt|0],Vi=A[v+gt|0],qr=Yt<<2,N=qr+w|0,c[N+3|0]=255,$=$|Vi<<16,ce=ce|Bt<<16,Vi=xe+ce|0,Bt=($+(Vi+G|0)|0)+524296|0,Ne=W(Ne,19077)>>>8|0,Vi=Bt+(Vi<<1)>>>3|0,yi=Vi+G|0,hi=yi>>>17&255,Mi=Ne+(W(hi,26149)>>>8|0)|0,$e=Mi+-14234|0,c[N+2|0]=$e>>>0<16384?$e>>>6|0:Mi>>>0<14234?0:255,yi=yi>>>1&255,Mi=Ne+(W(yi,33050)>>>8|0)|0,$e=Mi+-17685|0,c[N|0]=$e>>>0<16384?$e>>>6|0:Mi>>>0<17685?0:255,$e=N,N=Ne-(W(yi,6419)>>>8|0)-(W(hi,13320)>>>8)|0,Ne=N+8708|0,c[$e+1|0]=Ne>>>0<16384?Ne>>>6|0:(N|0)<-8708?0:255,Ne=A[e+ar|0],yi=gt<<3,N=yi+w|0,c[N+3|0]=255,Bt=Bt+(G+$<<1)>>>3|0,hi=Bt+ce|0,Mi=hi>>>17&255,G=W(Ne,19077)>>>8|0,Ne=(W(Mi,26149)>>>8|0)+G|0,$e=Ne+-14234|0,c[N+2|0]=$e>>>0<16384?$e>>>6|0:Ne>>>0<14234?0:255,Ne=hi>>>1&255,hi=G+(W(Ne,33050)>>>8|0)|0,$e=hi+-17685|0,c[N|0]=$e>>>0<16384?$e>>>6|0:hi>>>0<17685?0:255,$e=N,G=G-(W(Ne,6419)>>>8|0)-(W(Mi,13320)>>>8)|0,N=G+8708|0,c[$e+1|0]=N>>>0<16384?N>>>6|0:(G|0)<-8708?0:255,t&&(N=A[t+Yt|0],G=S+qr|0,c[G+3|0]=255,Yt=xe+Bt|0,Bt=Yt>>>17&255,xe=W(N,19077)>>>8|0,N=(W(Bt,26149)>>>8|0)+xe|0,Ne=N+-14234|0,c[G+2|0]=Ne>>>0<16384?Ne>>>6|0:N>>>0<14234?0:255,N=Yt>>>1&255,Yt=xe+(W(N,33050)>>>8|0)|0,Ne=Yt+-17685|0,c[G|0]=Ne>>>0<16384?Ne>>>6|0:Yt>>>0<17685?0:255,$e=G,G=xe-(W(N,6419)>>>8|0)-(W(Bt,13320)>>>8)|0,xe=G+8708|0,c[$e+1|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255,xe=A[t+ar|0],G=S+yi|0,c[G+3|0]=255,xe=W(xe,19077)>>>8|0,N=$+Vi|0,ar=N>>>17&255,Yt=xe+(W(ar,26149)>>>8|0)|0,Bt=Yt+-14234|0,c[G+2|0]=Bt>>>0<16384?Bt>>>6|0:Yt>>>0<14234?0:255,N=N>>>1&255,Yt=xe+(W(N,33050)>>>8|0)|0,Bt=Yt+-17685|0,c[G|0]=Bt>>>0<16384?Bt>>>6|0:Yt>>>0<17685?0:255,$e=G,G=xe-(W(N,6419)>>>8|0)-(W(ar,13320)>>>8)|0,xe=G+8708|0,c[$e+1|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255),N=(gt|0)!=(on|0),gt=gt+1|0,G=ce,xe=$,!!N;);}e:{if(F&1||(r=A[e+At|0],f=At<<2,e=f+w|0,c[e+3|0]=255,r=W(r,19077)>>>8|0,y=(W(ce,3)+$|0)+131074|0,v=y>>>18&255,w=r+(W(v,26149)>>>8|0)|0,F=w+-14234|0,c[e+2|0]=F>>>0<16384?F>>>6|0:w>>>0<14234?0:255,y=y>>>2&255,w=r+(W(y,33050)>>>8|0)|0,F=w+-17685|0,c[e|0]=F>>>0<16384?F>>>6|0:w>>>0<17685?0:255,w=e,e=r-(W(y,6419)>>>8|0)-(W(v,13320)>>>8)|0,r=e+8708|0,c[w+1|0]=r>>>0<16384?r>>>6|0:(e|0)<-8708?0:255,!t))break e;t=A[t+At|0],e=f+S|0,c[e+3|0]=255,t=W(t,19077)>>>8|0,r=(W($,3)+ce|0)+131074|0,f=r>>>18&255,y=t+(W(f,26149)>>>8|0)|0,v=y+-14234|0,c[e+2|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,r=r>>>2&255,y=t+(W(r,33050)>>>8|0)|0,v=y+-17685|0,c[e|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,y=e,e=t-(W(r,6419)>>>8|0)-(W(f,13320)>>>8)|0,t=e+8708|0,c[y+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255}}function En(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;ce=W(A[e|0],19077)>>>8|0,xe=A[y|0]|A[v|0]<<16,N=A[r|0]|A[f|0]<<16,$=(xe+W(N,3)|0)+131074|0,gt=$>>>2&255,$=$>>>18|0,$e=ce-(W(gt,6419)>>>8|0)-(W($,13320)>>>8)|0,G=$e+8708|0,$e=G>>>0<16384?G>>6:($e|0)<-8708?0:255,$=ce+(W($,26149)>>>8|0)|0,G=$+-14234|0,c[w|0]=$e>>>5|(G>>>0<16384?G>>>6|0:$>>>0<14234?0:248)&248,ce=ce+(W(gt,33050)>>>8|0)|0,$=ce+-17685|0,c[w+1|0]=$e<<3&224|($>>>0<16384?$>>>9|0:ce>>>0<17685?0:31),t&&(ce=W(A[t|0],19077)>>>8|0,$=(W(xe,3)+N|0)+131074|0,gt=$>>>2&255,$=$>>>18|0,$e=ce-(W(gt,6419)>>>8|0)-(W($,13320)>>>8)|0,G=$e+8708|0,$e=G>>>0<16384?G>>6:($e|0)<-8708?0:255,$=ce+(W($,26149)>>>8|0)|0,G=$+-14234|0,c[S|0]=$e>>>5|(G>>>0<16384?G>>>6|0:$>>>0<14234?0:248)&248,ce=ce+(W(gt,33050)>>>8|0)|0,$=ce+-17685|0,c[S+1|0]=$e<<3&224|($>>>0<16384?$>>>9|0:ce>>>0<17685?0:31)),$e=F+-1|0;e:{if((F|0)<3){ce=xe,$=N;break e}for(ce=$e>>1,on=(ce|0)>1?ce:1,gt=1;ce=A[y+gt|0]|A[v+gt|0]<<16,$=A[r+gt|0]|A[f+gt|0]<<16,ar=$+xe|0,G=(ce+(ar+N|0)|0)+524296|0,Vi=gt<<1,At=Vi+-1|0,hi=At<<1,Mi=hi+w|0,Ne=W(A[e+At|0],19077)>>>8|0,ar=G+(ar<<1)>>>3|0,Yt=ar+N|0,qr=Yt>>>1&255,Yt=Yt>>>17|0,yi=Ne-(W(qr,6419)>>>8|0)-(W(Yt,13320)>>>8)|0,Bt=yi+8708|0,yi=Bt>>>0<16384?Bt>>6:(yi|0)<-8708?0:255,Yt=Ne+(W(Yt,26149)>>>8|0)|0,Bt=Yt+-14234|0,c[Mi|0]=yi>>>5|(Bt>>>0<16384?Bt>>>6|0:Yt>>>0<14234?0:248)&248,Bt=Mi,Ne=Ne+(W(qr,33050)>>>8|0)|0,Mi=Ne+-17685|0,c[Bt+1|0]=yi<<3&224|(Mi>>>0<16384?Mi>>>9|0:Ne>>>0<17685?0:31),Mi=gt<<2,Yt=Mi+w|0,Ne=W(A[e+Vi|0],19077)>>>8|0,G=G+(N+ce<<1)>>>3|0,N=G+$|0,qr=N>>>1&255,N=N>>>17|0,yi=Ne-(W(qr,6419)>>>8|0)-(W(N,13320)>>>8)|0,Bt=yi+8708|0,yi=Bt>>>0<16384?Bt>>6:(yi|0)<-8708?0:255,N=Ne+(W(N,26149)>>>8|0)|0,Bt=N+-14234|0,c[Yt|0]=yi>>>5|(Bt>>>0<16384?Bt>>>6|0:N>>>0<14234?0:248)&248,N=Ne+(W(qr,33050)>>>8|0)|0,Ne=N+-17685|0,c[Yt+1|0]=yi<<3&224|(Ne>>>0<16384?Ne>>>9|0:N>>>0<17685?0:31),t&&(Ne=S+hi|0,N=W(A[t+At|0],19077)>>>8|0,xe=G+xe|0,G=xe>>>1&255,xe=xe>>>17|0,At=N-(W(G,6419)>>>8|0)-(W(xe,13320)>>>8)|0,hi=At+8708|0,At=hi>>>0<16384?hi>>6:(At|0)<-8708?0:255,xe=N+(W(xe,26149)>>>8|0)|0,hi=xe+-14234|0,c[Ne|0]=At>>>5|(hi>>>0<16384?hi>>>6|0:xe>>>0<14234?0:248)&248,N=N+(W(G,33050)>>>8|0)|0,xe=N+-17685|0,c[Ne+1|0]=At<<3&224|(xe>>>0<16384?xe>>>9|0:N>>>0<17685?0:31),xe=S+Mi|0,N=W(A[t+Vi|0],19077)>>>8|0,G=ce+ar|0,Vi=G>>>1&255,G=G>>>17|0,At=N-(W(Vi,6419)>>>8|0)-(W(G,13320)>>>8)|0,Ne=At+8708|0,At=Ne>>>0<16384?Ne>>6:(At|0)<-8708?0:255,G=N+(W(G,26149)>>>8|0)|0,Ne=G+-14234|0,c[xe|0]=At>>>5|(Ne>>>0<16384?Ne>>>6|0:G>>>0<14234?0:248)&248,Bt=xe,N=N+(W(Vi,33050)>>>8|0)|0,xe=N+-17685|0,c[Bt+1|0]=At<<3&224|(xe>>>0<16384?xe>>>9|0:N>>>0<17685?0:31)),G=(gt|0)!=(on|0),gt=gt+1|0,N=$,xe=ce,!!G;);}e:{if(F&1||(r=$e<<1,f=r+w|0,e=W(A[e+$e|0],19077)>>>8|0,y=(W($,3)+ce|0)+131074|0,v=y>>>2&255,y=y>>>18|0,w=e-(W(v,6419)>>>8|0)-(W(y,13320)>>>8)|0,F=w+8708|0,w=F>>>0<16384?F>>6:(w|0)<-8708?0:255,y=e+(W(y,26149)>>>8|0)|0,F=y+-14234|0,c[f|0]=w>>>5|(F>>>0<16384?F>>>6|0:y>>>0<14234?0:248)&248,y=f,e=e+(W(v,33050)>>>8|0)|0,f=e+-17685|0,c[y+1|0]=w<<3&224|(f>>>0<16384?f>>>9|0:e>>>0<17685?0:31),!t))break e;r=r+S|0,e=W(A[t+$e|0],19077)>>>8|0,t=(W(ce,3)+$|0)+131074|0,f=t>>>2&255,t=t>>>18|0,y=e-(W(f,6419)>>>8|0)-(W(t,13320)>>>8)|0,v=y+8708|0,y=v>>>0<16384?v>>6:(y|0)<-8708?0:255,t=e+(W(t,26149)>>>8|0)|0,v=t+-14234|0,c[r|0]=y>>>5|(v>>>0<16384?v>>>6|0:t>>>0<14234?0:248)&248,e=e+(W(f,33050)>>>8|0)|0,t=e+-17685|0,c[r+1|0]=y<<3&224|(t>>>0<16384?t>>>9|0:e>>>0<17685?0:31)}}function Mn(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;$=W(A[e|0],19077)>>>8|0,ce=A[y|0]|A[v|0]<<16,N=A[r|0]|A[f|0]<<16,xe=(ce+W(N,3)|0)+131074|0,$e=xe>>>2&255,gt=$+(W($e,33050)>>>8|0)|0,G=gt+-17685|0,c[w+1|0]=(G>>>0<16384?G>>>6|0:gt>>>0<17685?0:240)|15,xe=xe>>>18|0,$e=$-(W($e,6419)>>>8|0)-(W(xe,13320)>>>8)|0,gt=$e+8708|0,$=$+(W(xe,26149)>>>8|0)|0,xe=$+-14234|0,c[w|0]=(gt>>>0<16384?gt>>>10|0:($e|0)<-8708?0:15)|(xe>>>0<16384?xe>>>6|0:$>>>0<14234?0:240)&240,t&&($=W(A[t|0],19077)>>>8|0,xe=(W(ce,3)+N|0)+131074|0,$e=xe>>>2&255,gt=$+(W($e,33050)>>>8|0)|0,G=gt+-17685|0,c[S+1|0]=(G>>>0<16384?G>>>6|0:gt>>>0<17685?0:240)|15,xe=xe>>>18|0,gt=$+(W(xe,26149)>>>8|0)|0,G=gt+-14234|0,$=$-(W($e,6419)>>>8|0)-(W(xe,13320)>>>8)|0,xe=$+8708|0,c[S|0]=(G>>>0<16384?G>>>6|0:gt>>>0<14234?0:240)&240|(xe>>>0<16384?xe>>>10|0:($|0)<-8708?0:15)),gt=F+-1|0;e:{if((F|0)<3){$=ce,xe=N;break e}for($=gt>>1,on=($|0)>1?$:1,$e=1;$=A[y+$e|0]|A[v+$e|0]<<16,xe=A[r+$e|0]|A[f+$e|0]<<16,At=xe+ce|0,G=($+(At+N|0)|0)+524296|0,hi=$e<<1,Bt=hi+-1|0,Vi=Bt<<1,Ne=Vi+w|0,qr=G+(At<<1)>>>3|0,Yt=qr+N|0,yi=Yt>>>1&255,At=W(A[e+Bt|0],19077)>>>8|0,ar=(W(yi,33050)>>>8|0)+At|0,Mi=ar+-17685|0,c[Ne+1|0]=(Mi>>>0<16384?Mi>>>6|0:ar>>>0<17685?0:240)|15,Mi=Ne,Ne=Yt>>>17|0,Yt=At-(W(yi,6419)>>>8|0)-(W(Ne,13320)>>>8)|0,yi=Yt+8708|0,At=At+(W(Ne,26149)>>>8|0)|0,Ne=At+-14234|0,c[Mi|0]=(yi>>>0<16384?yi>>>10|0:(Yt|0)<-8708?0:15)|(Ne>>>0<16384?Ne>>>6|0:At>>>0<14234?0:240)&240,At=$e<<2,Ne=At+w|0,G=G+(N+$<<1)>>>3|0,Yt=G+xe|0,yi=Yt>>>1&255,N=W(A[e+hi|0],19077)>>>8|0,ar=(W(yi,33050)>>>8|0)+N|0,Mi=ar+-17685|0,c[Ne+1|0]=(Mi>>>0<16384?Mi>>>6|0:ar>>>0<17685?0:240)|15,Mi=Ne,Ne=Yt>>>17|0,Yt=N-(W(yi,6419)>>>8|0)-(W(Ne,13320)>>>8)|0,yi=Yt+8708|0,N=N+(W(Ne,26149)>>>8|0)|0,Ne=N+-14234|0,c[Mi|0]=(yi>>>0<16384?yi>>>10|0:(Yt|0)<-8708?0:15)|(Ne>>>0<16384?Ne>>>6|0:N>>>0<14234?0:240)&240,t&&(Vi=S+Vi|0,N=W(A[t+Bt|0],19077)>>>8|0,ce=G+ce|0,G=ce>>>1&255,Bt=N+(W(G,33050)>>>8|0)|0,Ne=Bt+-17685|0,c[Vi+1|0]=(Ne>>>0<16384?Ne>>>6|0:Bt>>>0<17685?0:240)|15,Ne=Vi,ce=ce>>>17|0,Bt=N+(W(ce,26149)>>>8|0)|0,Vi=Bt+-14234|0,N=N-(W(G,6419)>>>8|0)-(W(ce,13320)>>>8)|0,ce=N+8708|0,c[Ne|0]=(Vi>>>0<16384?Vi>>>6|0:Bt>>>0<14234?0:240)&240|(ce>>>0<16384?ce>>>10|0:(N|0)<-8708?0:15),ce=S+At|0,N=W(A[t+hi|0],19077)>>>8|0,G=$+qr|0,Bt=G>>>1&255,hi=N+(W(Bt,33050)>>>8|0)|0,At=hi+-17685|0,c[ce+1|0]=(At>>>0<16384?At>>>6|0:hi>>>0<17685?0:240)|15,Ne=ce,ce=G>>>17|0,G=N+(W(ce,26149)>>>8|0)|0,hi=G+-14234|0,N=N-(W(Bt,6419)>>>8|0)-(W(ce,13320)>>>8)|0,ce=N+8708|0,c[Ne|0]=(hi>>>0<16384?hi>>>6|0:G>>>0<14234?0:240)&240|(ce>>>0<16384?ce>>>10|0:(N|0)<-8708?0:15)),G=($e|0)!=(on|0),$e=$e+1|0,N=xe,ce=$,!!G;);}e:{if(F&1||(r=gt<<1,f=r+w|0,e=W(A[e+gt|0],19077)>>>8|0,y=(W(xe,3)+$|0)+131074|0,v=y>>>2&255,w=e+(W(v,33050)>>>8|0)|0,F=w+-17685|0,c[f+1|0]=(F>>>0<16384?F>>>6|0:w>>>0<17685?0:240)|15,F=f,f=y>>>18|0,y=e+(W(f,26149)>>>8|0)|0,w=y+-14234|0,e=e-(W(v,6419)>>>8|0)-(W(f,13320)>>>8)|0,f=e+8708|0,c[F|0]=(w>>>0<16384?w>>>6|0:y>>>0<14234?0:240)&240|(f>>>0<16384?f>>>10|0:(e|0)<-8708?0:15),!t))break e;r=r+S|0,e=W(A[t+gt|0],19077)>>>8|0,f=(W($,3)+xe|0)+131074|0,y=f>>>2&255,t=e+(W(y,33050)>>>8|0)|0,v=t+-17685|0,c[r+1|0]=(v>>>0<16384?v>>>6|0:t>>>0<17685?0:240)|15,v=r,t=f>>>18|0,r=e+(W(t,26149)>>>8|0)|0,f=r+-14234|0,e=e-(W(y,6419)>>>8|0)-(W(t,13320)>>>8)|0,t=e+8708|0,c[v|0]=(f>>>0<16384?f>>>6|0:r>>>0<14234?0:240)&240|(t>>>0<16384?t>>>10|0:(e|0)<-8708?0:15)}}function ro(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;$=W(A[e|0],19077)>>>8|0,Ne=A[y|0]|A[v|0]<<16,G=A[r|0]|A[f|0]<<16,ce=(Ne+W(G,3)|0)+131074|0,At=ce>>>18|0,gt=$+(W(At,26149)>>>8|0)|0,N=gt+-14234|0,c[w|0]=N>>>0<16384?N>>>6|0:gt>>>0<14234?0:255,ce=ce>>>2&255,gt=$+(W(ce,33050)>>>8|0)|0,N=gt+-17685|0,c[w+2|0]=N>>>0<16384?N>>>6|0:gt>>>0<17685?0:255,$=$-(W(ce,6419)>>>8|0)-(W(At,13320)>>>8)|0,ce=$+8708|0,c[w+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255,t&&($=W(A[t|0],19077)>>>8|0,ce=(W(Ne,3)+G|0)+131074|0,At=ce>>>18|0,gt=$+(W(At,26149)>>>8|0)|0,N=gt+-14234|0,c[S|0]=N>>>0<16384?N>>>6|0:gt>>>0<14234?0:255,ce=ce>>>2&255,gt=$+(W(ce,33050)>>>8|0)|0,N=gt+-17685|0,c[S+2|0]=N>>>0<16384?N>>>6|0:gt>>>0<17685?0:255,$=$-(W(ce,6419)>>>8|0)-(W(At,13320)>>>8)|0,ce=$+8708|0,c[S+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255),gt=F+-1|0;e:{if((F|0)<3){$=Ne,ce=G;break e}for($=gt>>1,on=($|0)>1?$:1,At=1;$=A[y+At|0]|A[v+At|0]<<16,ce=A[r+At|0]|A[f+At|0]<<16,Bt=ce+Ne|0,N=($+(Bt+G|0)|0)+524296|0,Mi=At<<1,Yt=Mi+-1|0,Vi=W(Yt,3),xe=Vi+w|0,qr=N+(Bt<<1)>>>3|0,yi=qr+G|0,ar=yi>>>17|0,Bt=W(A[e+Yt|0],19077)>>>8|0,$e=(W(ar,26149)>>>8|0)+Bt|0,hi=$e+-14234|0,c[xe|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<14234?0:255,yi=yi>>>1&255,$e=Bt+(W(yi,33050)>>>8|0)|0,hi=$e+-17685|0,c[xe+2|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<17685?0:255,$e=xe,xe=Bt-(W(yi,6419)>>>8|0)-(W(ar,13320)>>>8)|0,Bt=xe+8708|0,c[$e+1|0]=Bt>>>0<16384?Bt>>>6|0:(xe|0)<-8708?0:255,Bt=W(At,6),xe=Bt+w|0,N=N+(G+$<<1)>>>3|0,yi=N+ce|0,ar=yi>>>1&255,G=W(A[e+Mi|0],19077)>>>8|0,$e=(W(ar,33050)>>>8|0)+G|0,hi=$e+-17685|0,c[xe+2|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<17685?0:255,yi=yi>>>17|0,$e=G+(W(yi,26149)>>>8|0)|0,hi=$e+-14234|0,c[xe|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<14234?0:255,$e=xe,G=G-(W(ar,6419)>>>8|0)-(W(yi,13320)>>>8)|0,xe=G+8708|0,c[$e+1|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255,t&&(G=S+Vi|0,N=N+Ne|0,xe=N>>>17|0,Ne=W(A[t+Yt|0],19077)>>>8|0,Yt=(W(xe,26149)>>>8|0)+Ne|0,Vi=Yt+-14234|0,c[G|0]=Vi>>>0<16384?Vi>>>6|0:Yt>>>0<14234?0:255,N=N>>>1&255,Yt=Ne+(W(N,33050)>>>8|0)|0,Vi=Yt+-17685|0,c[G+2|0]=Vi>>>0<16384?Vi>>>6|0:Yt>>>0<17685?0:255,$e=G,G=Ne-(W(N,6419)>>>8|0)-(W(xe,13320)>>>8)|0,Ne=G+8708|0,c[$e+1|0]=Ne>>>0<16384?Ne>>>6|0:(G|0)<-8708?0:255,G=S+Bt|0,Ne=W(A[t+Mi|0],19077)>>>8|0,N=$+qr|0,Yt=N>>>1&255,Mi=Ne+(W(Yt,33050)>>>8|0)|0,xe=Mi+-17685|0,c[G+2|0]=xe>>>0<16384?xe>>>6|0:Mi>>>0<17685?0:255,N=N>>>17|0,Mi=Ne+(W(N,26149)>>>8|0)|0,xe=Mi+-14234|0,c[G|0]=xe>>>0<16384?xe>>>6|0:Mi>>>0<14234?0:255,xe=G,G=Ne-(W(Yt,6419)>>>8|0)-(W(N,13320)>>>8)|0,Ne=G+8708|0,c[xe+1|0]=Ne>>>0<16384?Ne>>>6|0:(G|0)<-8708?0:255),N=(At|0)!=(on|0),At=At+1|0,G=ce,Ne=$,!!N;);}e:{if(F&1||(f=W(gt,3),r=f+w|0,e=W(A[e+gt|0],19077)>>>8|0,y=(W(ce,3)+$|0)+131074|0,v=y>>>18|0,w=e+(W(v,26149)>>>8|0)|0,F=w+-14234|0,c[r|0]=F>>>0<16384?F>>>6|0:w>>>0<14234?0:255,y=y>>>2&255,w=e+(W(y,33050)>>>8|0)|0,F=w+-17685|0,c[r+2|0]=F>>>0<16384?F>>>6|0:w>>>0<17685?0:255,w=r,e=e-(W(y,6419)>>>8|0)-(W(v,13320)>>>8)|0,r=e+8708|0,c[w+1|0]=r>>>0<16384?r>>>6|0:(e|0)<-8708?0:255,!t))break e;e=f+S|0,t=W(A[t+gt|0],19077)>>>8|0,r=(W($,3)+ce|0)+131074|0,f=r>>>18|0,y=t+(W(f,26149)>>>8|0)|0,v=y+-14234|0,c[e|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,r=r>>>2&255,y=t+(W(r,33050)>>>8|0)|0,v=y+-17685|0,c[e+2|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,y=e,e=t-(W(r,6419)>>>8|0)-(W(f,13320)>>>8)|0,t=e+8708|0,c[y+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255}}function lo(e,t,r,f,y,v,w,S,F){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0;var N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;$=W(A[e|0],19077)>>>8|0,Ne=A[y|0]|A[v|0]<<16,G=A[r|0]|A[f|0]<<16,ce=(Ne+W(G,3)|0)+131074|0,At=ce>>>18|0,gt=$+(W(At,26149)>>>8|0)|0,N=gt+-14234|0,c[w+2|0]=N>>>0<16384?N>>>6|0:gt>>>0<14234?0:255,ce=ce>>>2&255,gt=$+(W(ce,33050)>>>8|0)|0,N=gt+-17685|0,c[w|0]=N>>>0<16384?N>>>6|0:gt>>>0<17685?0:255,$=$-(W(ce,6419)>>>8|0)-(W(At,13320)>>>8)|0,ce=$+8708|0,c[w+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255,t&&($=W(A[t|0],19077)>>>8|0,ce=(W(Ne,3)+G|0)+131074|0,At=ce>>>18|0,gt=$+(W(At,26149)>>>8|0)|0,N=gt+-14234|0,c[S+2|0]=N>>>0<16384?N>>>6|0:gt>>>0<14234?0:255,ce=ce>>>2&255,gt=$+(W(ce,33050)>>>8|0)|0,N=gt+-17685|0,c[S|0]=N>>>0<16384?N>>>6|0:gt>>>0<17685?0:255,$=$-(W(ce,6419)>>>8|0)-(W(At,13320)>>>8)|0,ce=$+8708|0,c[S+1|0]=ce>>>0<16384?ce>>>6|0:($|0)<-8708?0:255),gt=F+-1|0;e:{if((F|0)<3){$=Ne,ce=G;break e}for($=gt>>1,on=($|0)>1?$:1,At=1;$=A[y+At|0]|A[v+At|0]<<16,ce=A[r+At|0]|A[f+At|0]<<16,Bt=ce+Ne|0,N=($+(Bt+G|0)|0)+524296|0,Mi=At<<1,Yt=Mi+-1|0,Vi=W(Yt,3),xe=Vi+w|0,qr=N+(Bt<<1)>>>3|0,yi=qr+G|0,ar=yi>>>17|0,Bt=W(A[e+Yt|0],19077)>>>8|0,$e=(W(ar,26149)>>>8|0)+Bt|0,hi=$e+-14234|0,c[xe+2|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<14234?0:255,yi=yi>>>1&255,$e=Bt+(W(yi,33050)>>>8|0)|0,hi=$e+-17685|0,c[xe|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<17685?0:255,$e=xe,xe=Bt-(W(yi,6419)>>>8|0)-(W(ar,13320)>>>8)|0,Bt=xe+8708|0,c[$e+1|0]=Bt>>>0<16384?Bt>>>6|0:(xe|0)<-8708?0:255,Bt=W(At,6),xe=Bt+w|0,N=N+(G+$<<1)>>>3|0,yi=N+ce|0,ar=yi>>>17|0,G=W(A[e+Mi|0],19077)>>>8|0,$e=(W(ar,26149)>>>8|0)+G|0,hi=$e+-14234|0,c[xe+2|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<14234?0:255,yi=yi>>>1&255,$e=G+(W(yi,33050)>>>8|0)|0,hi=$e+-17685|0,c[xe|0]=hi>>>0<16384?hi>>>6|0:$e>>>0<17685?0:255,$e=xe,G=G-(W(yi,6419)>>>8|0)-(W(ar,13320)>>>8)|0,xe=G+8708|0,c[$e+1|0]=xe>>>0<16384?xe>>>6|0:(G|0)<-8708?0:255,t&&(G=S+Vi|0,N=N+Ne|0,xe=N>>>17|0,Ne=W(A[t+Yt|0],19077)>>>8|0,Yt=(W(xe,26149)>>>8|0)+Ne|0,Vi=Yt+-14234|0,c[G+2|0]=Vi>>>0<16384?Vi>>>6|0:Yt>>>0<14234?0:255,N=N>>>1&255,Yt=Ne+(W(N,33050)>>>8|0)|0,Vi=Yt+-17685|0,c[G|0]=Vi>>>0<16384?Vi>>>6|0:Yt>>>0<17685?0:255,$e=G,G=Ne-(W(N,6419)>>>8|0)-(W(xe,13320)>>>8)|0,Ne=G+8708|0,c[$e+1|0]=Ne>>>0<16384?Ne>>>6|0:(G|0)<-8708?0:255,G=S+Bt|0,Ne=W(A[t+Mi|0],19077)>>>8|0,N=$+qr|0,Yt=N>>>17|0,Mi=Ne+(W(Yt,26149)>>>8|0)|0,xe=Mi+-14234|0,c[G+2|0]=xe>>>0<16384?xe>>>6|0:Mi>>>0<14234?0:255,N=N>>>1&255,Mi=Ne+(W(N,33050)>>>8|0)|0,xe=Mi+-17685|0,c[G|0]=xe>>>0<16384?xe>>>6|0:Mi>>>0<17685?0:255,xe=G,G=Ne-(W(N,6419)>>>8|0)-(W(Yt,13320)>>>8)|0,Ne=G+8708|0,c[xe+1|0]=Ne>>>0<16384?Ne>>>6|0:(G|0)<-8708?0:255),N=(At|0)!=(on|0),At=At+1|0,G=ce,Ne=$,!!N;);}e:{if(F&1||(f=W(gt,3),r=f+w|0,e=W(A[e+gt|0],19077)>>>8|0,y=(W(ce,3)+$|0)+131074|0,v=y>>>18|0,w=e+(W(v,26149)>>>8|0)|0,F=w+-14234|0,c[r+2|0]=F>>>0<16384?F>>>6|0:w>>>0<14234?0:255,y=y>>>2&255,w=e+(W(y,33050)>>>8|0)|0,F=w+-17685|0,c[r|0]=F>>>0<16384?F>>>6|0:w>>>0<17685?0:255,w=r,e=e-(W(y,6419)>>>8|0)-(W(v,13320)>>>8)|0,r=e+8708|0,c[w+1|0]=r>>>0<16384?r>>>6|0:(e|0)<-8708?0:255,!t))break e;e=f+S|0,t=W(A[t+gt|0],19077)>>>8|0,r=(W($,3)+ce|0)+131074|0,f=r>>>18|0,y=t+(W(f,26149)>>>8|0)|0,v=y+-14234|0,c[e+2|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,r=r>>>2&255,y=t+(W(r,33050)>>>8|0)|0,v=y+-17685|0,c[e|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,y=e,e=t-(W(r,6419)>>>8|0)-(W(f,13320)>>>8)|0,t=e+8708|0,c[y+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255}}function ho(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0;e:{if(!e)break e;if(s[e>>2]=0,s[e+8>>2]=5010,!t){s[e>>2]=2,s[e+4>>2]=0,s[e+8>>2]=5013;break e}if(S=s[t+60>>2],S>>>0<=3){s[e>>2]=7,s[e+4>>2]=0,s[e+8>>2]=5050;break e}if(r=s[t+64>>2],y=A[r+1|0],v=A[r+2|0],f=A[r|0],w=f>>>4&1,c[e+42|0]=w,F=f>>>1&7,c[e+41|0]=F,N=(f^-1)&1,c[e+40|0]=N,f=(f|y<<8|v<<16)>>>5|0,s[e+44>>2]=f,F>>>0>=4){s[e>>2]=3,s[e+4>>2]=0,s[e+8>>2]=5068;break e}if(!w){s[e>>2]=4,s[e+4>>2]=0,s[e+8>>2]=5099;break e}if(y=S+-3|0,v=r+3|0,N){if(y>>>0<=6){s[e>>2]=7,s[e+4>>2]=0,s[e+8>>2]=5122;break e}if(!(A[r+5|0]==42&&!(A[v|0]!=157|A[r+4|0]!=1))){s[e>>2]=3,s[e+4>>2]=0,s[e+8>>2]=5150;break e}f=A[r+6|0]|A[r+7|0]<<8&16128,_i[e+48>>1]=f,c[e+52|0]=A[r+7|0]>>>6,y=A[r+8|0]|A[r+9|0]<<8&16128,_i[e+50>>1]=y,v=A[r+9|0],s[e+292>>2]=y+15>>>4,s[e+288>>2]=f+15>>>4,c[e+53|0]=v>>>6,s[t+84>>2]=0,s[t+4>>2]=y,s[t>>2]=f,s[t+100>>2]=y,s[t+96>>2]=f,s[t+92>>2]=0,s[t+88>>2]=y,s[t+80>>2]=f,s[t+72>>2]=0,s[t+76>>2]=0,s[t+16>>2]=y,s[t+12>>2]=f,t=e+904|0,_i[t>>1]=-1,c[t+2|0]=-1,s[e+120>>2]=0,s[e+112>>2]=1,s[e+116>>2]=0,s[e+104>>2]=0,s[e+108>>2]=0,y=S+-10|0,v=r+10|0,f=s[e+44>>2]}t:{if(f>>>0>y>>>0){if(t=0,s[e>>2])break t;s[e>>2]=7,s[e+4>>2]=0,s[e+8>>2]=5164;break e}r=e+12|0,nn(r,v,f),w=s[e+44>>2],A[e+40|0]&&($=e,ce=an(r,1),c[$+54|0]=ce,$=e,ce=an(r,1),c[$+55|0]=ce),t=an(r,1),s[e+104>>2]=t;i:{if(t){if($=e,ce=an(r,1),s[$+108>>2]=ce,an(r,1)&&($=e,ce=an(r,1),s[$+112>>2]=ce,t=e,an(r,1)?f=hs(r,7):f=0,c[t+116|0]=f,t=e,an(r,1)?f=hs(r,7):f=0,c[t+117|0]=f,t=e,an(r,1)?f=hs(r,7):f=0,c[t+118|0]=f,t=e,an(r,1)?f=hs(r,7):f=0,c[t+119|0]=f,t=e,an(r,1)?f=hs(r,6):f=0,c[t+120|0]=f,t=e,an(r,1)?f=hs(r,6):f=0,c[t+121|0]=f,t=e,an(r,1)?f=hs(r,6):f=0,c[t+122|0]=f,t=e,an(r,1)?f=hs(r,6):f=0,c[t+123|0]=f),!s[e+108>>2])break i;t=e,an(r,1)?f=an(r,8):f=255,c[t+904|0]=f,t=e,an(r,1)?f=an(r,8):f=255,c[t+905|0]=f,t=e,f=255;r:{if(!an(r,1))break r;f=an(r,8)}c[t+906|0]=f;break i}s[e+108>>2]=0}if(s[e+36>>2]){if(t=0,s[e>>2])break t;s[e>>2]=3,s[e+4>>2]=0,s[e+8>>2]=5185;break e}$=e,ce=an(r,1),s[$+56>>2]=ce,$=e,ce=an(r,6),s[$+60>>2]=ce,$=e- -64|0,ce=an(r,3),s[$>>2]=ce,t=an(r,1),s[e+68>>2]=t;i:{if(!t||!an(r,1)||(an(r,1)&&($=e,ce=hs(r,6),s[$+72>>2]=ce),an(r,1)&&($=e,ce=hs(r,6),s[$+76>>2]=ce),an(r,1)&&($=e,ce=hs(r,6),s[$+80>>2]=ce),an(r,1)&&($=e,ce=hs(r,6),s[$+84>>2]=ce),an(r,1)&&($=e,ce=hs(r,6),s[$+88>>2]=ce),an(r,1)&&($=e,ce=hs(r,6),s[$+92>>2]=ce),an(r,1)&&($=e,ce=hs(r,6),s[$+96>>2]=ce),!an(r,1)))break i;$=e,ce=hs(r,6),s[$+100>>2]=ce}if(t=e,s[e+60>>2]?f=s[e+56>>2]?1:2:f=0,s[t+2308>>2]=f,s[e+36>>2]){if(t=0,s[e>>2])break t;s[e>>2]=3,s[e+4>>2]=0,s[e+8>>2]=5213;break e}N=an(r,2),S=-1<<N^-1,s[e+312>>2]=S,f=7;i:{if(t=y-w|0,F=W(S,3),t>>>0>=F>>>0){if(G=y+v|0,f=t-F|0,t=v+w|0,v=F+t|0,N)for(F=S>>>0>1?S:1,y=0;w=A[t|0]|A[t+1|0]<<8|A[t+2|0]<<16,w=w>>>0>f>>>0?f:w,nn((W(y,28)+e|0)+316|0,v,w),f=f-w|0,v=v+w|0,t=t+3|0,y=y+1|0,(F|0)!=(y|0););if(nn((W(S,28)+e|0)+316|0,v,f),f=5,v>>>0<G>>>0)break i}if(t=0,s[e>>2])break t;s[e>>2]=f,s[e+4>>2]=0,s[e+8>>2]=5240;break e}if(Ol(e),!A[e+40|0]){if(t=0,s[e>>2])break t;s[e>>2]=4,s[e+4>>2]=0,s[e+8>>2]=5264;break e}an(r,1),ia(r,e),s[e+4>>2]=1,t=1}return t}return 0}function Ko(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0;if(y=s[e+20>>2],s[y+108>>2]<(t|0)){e:{if(!s[e+132>>2]&&(Eu(),!s[e+132>>2]))break e;ce=s[y+100>>2],Yt=W(ce,s[y+104>>2]),F=s[y+112>>2],e=(F|0)/(ce|0)|0,Bt=W(t,ce);t:{i:{if((F|0)>=(Bt|0)){Ne=y+48|0;break i}N=F-W(e,ce)|0,w=s[y+152>>2],v=0;r:{if(!w)break r;v=s[s[y+160>>2]+(W(s[y+156>>2],e>>w)+(N>>w)<<2)>>2]}if(Ne=y+48|0,s[Ne>>2])break i;for(yi=s[y+148>>2],hi=s[y+16>>2],$e=y+24|0,At=s[y+168>>2]+W(v,548)|0;;){if(!(N&yi)){r=s[y+168>>2],w=s[y+152>>2],v=0;r:{if(!w)break r;v=s[s[y+160>>2]+(W(s[y+156>>2],e>>w)+(N>>w)<<2)>>2]}At=r+W(v,548)|0}f=s[y+44>>2],(f|0)>=32&&(he($e),f=s[y+44>>2]),G=y,v=s[$e+4>>2],r=v,S=f&63,w=S&31,gt=s[$e>>2],r=s[At>>2]+(((32<=(S&63)>>>0?r>>>w|0:((1<<w)-1&r)<<32-w|gt>>>w)&255)<<2)|0,w=A[r|0],w>>>0>=9&&(f=f+8|0,s[y+44>>2]=f,S=(tr[r+2>>1]<<2)+r|0,r=v,xe=f&63,$=xe&31,r=S+(((-1<<w+-8^-1)&(32<=xe>>>0?r>>>$|0:((1<<$)-1&r)<<32-$|gt>>>$))<<2)|0,w=A[r|0]),S=(w&255)+f|0,s[G+44>>2]=S,r=tr[r+2>>1];r:{if(r>>>0<=255){if(c[F+hi|0]=r,F=F+1|0,N=N+1|0,(N|0)<(ce|0))break r;if(v=e+1|0,N=0,(e|0)>=(t|0)){e=v;break r}if(v&15){e=v;break r}I(y,v),e=v;break r}if(G=1,r>>>0>279)break t;w=r+-256|0,r>>>0>=260&&(v=r+-258>>1,w=Dn($e,v)+((w&1|2)<<v)|0,gt=s[y+24>>2],S=s[y+44>>2],v=s[y+28>>2]),$=y,r=v,xe=S&63,f=xe&31,f=s[At+16>>2]+(((32<=xe>>>0?r>>>f|0:((1<<f)-1&r)<<32-f|gt>>>f)&255)<<2)|0,r=A[f|0],r>>>0>=9&&(S=S+8|0,s[y+44>>2]=S,Mi=(tr[f+2>>1]<<2)+f|0,xe=S&63,f=xe&31,f=Mi+(((-1<<r+-8^-1)&(32<=xe>>>0?v>>>f|0:((1<<f)-1&v)<<32-f|gt>>>f))<<2)|0,r=A[f|0]),v=(r&255)+S|0,s[$+44>>2]=v,f=tr[f+2>>1],(v|0)>=32&&he($e),v=w+1|0,f>>>0>=4&&(r=f+-2>>1,f=Dn($e,r)+((f&1|2)<<r)|0);o:{if((f+1|0)>=121){r=f+-119|0;break o}r=A[f+1264|0],r=(W(r>>>4|0,ce)-(r&15)|0)+8|0,r=(r|0)>1?r:1}if((Yt-F|0)<(v|0)|(F|0)<(r|0))break t;f=F+hi|0,S=f-r|0;o:{l:{if((v|0)<8)break l;n:{u:switch(r+-1|0){case 0:r=A[S|0],G=W(r,16843009);break n;case 1:r=A[S|0]|A[S+1|0]<<8,G=W(r,65537);break n;case 3:break u;default:break l}r=A[S|0]|A[S+1|0]<<8|(A[S+2|0]<<16|A[S+3|0]<<24),G=r}n:{u:{s:{if(f&3){if(c[f|0]=r,G=Ws(G,24),S=S+1|0,f=f+1|0,f&3)break s;r=w>>>2|0;break u}w=v,r=w>>>2|0;break u}for(;c[f|0]=A[S|0],$=w,w=w+-1|0,G=Ws(G,24),S=S+1|0,f=f+1|0,!!(f&3););if(r=0,($|0)<5)break n;r=w>>2}for($=(r|0)>1?r:1,r=0;s[(r<<2)+f>>2]=G,r=r+1|0,($|0)!=(r|0););r=$<<2}if((r|0)>=(w|0))break o;for(;c[r+f|0]=A[r+S|0],r=r+1|0,(w|0)!=(r|0););break o}if((r|0)<(v|0)){if(r=0,(v|0)<=0)break o;for(;c[r+f|0]=A[r+S|0],G=(r|0)!=(w|0),r=r+1|0,!!G;);break o}Sn(f,S,v)}if(F=v+F|0,N=v+N|0,(N|0)>=(ce|0))for(;N=N-ce|0,v=e,e=v+1|0,e&15|(v|0)>=(t|0)||I(y,e),(N|0)>=(ce|0););if(!(N&yi)|(F|0)>=(Bt|0))break r;r=s[y+168>>2],w=s[y+152>>2],v=0;o:{if(!w)break o;v=s[s[y+160>>2]+(W(s[y+156>>2],e>>w)+(N>>w)<<2)>>2]}At=r+W(v,548)|0}if(s[Ne>>2]){s[Ne>>2]=1;break i}if(f=0,f=s[y+40>>2]==s[y+36>>2]?s[y+44>>2]>64:f,s[Ne>>2]=f,(F|0)>=(Bt|0))break i;if(!!f)break}}I(y,(e|0)>(t|0)?t:e),G=0}t=Ne,v=t,e=1;t:{if(s[t>>2]||(e=0,s[y+40>>2]!=s[y+36>>2]))break t;e=s[y+44>>2]>64}return s[v>>2]=e,!e|(Yt|0)<=(F|0)&&!G?(s[y+112>>2]=F,1):(s[y>>2]=e?5:3,0)}e=hl(y,s[y+16>>2],s[y+100>>2],s[y+104>>2],t,1)}else e=1;return e}function Bo(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0;Yt=br+-64|0,br=Yt,y=s[e+2280>>2],ar=s[e+160>>2],gt=s[e+2268>>2],v=s[e+2284>>2],Mi=A[s[e+2308>>2]+4863|0],r=Mi>>>1|0,xe=s[e+2276>>2],yi=s[e+2272>>2],on=s[e+308>>2],Vi=s[e+164>>2],s[e+148>>2]==2&&eu(e,e+160|0),w=W(y,ar),qr=W(y,Mi),f=W(v,ar),hi=W(r,v);e:{if(!s[e+168>>2]||(r=s[e+296>>2],(r|0)>=s[e+304>>2]))break e;for(Ne=s[e+164>>2];;){$=s[e+172>>2]+(r<<2)|0,S=A[$|0];t:{if(!S)break t;if(v=s[e+160>>2],N=s[e+2280>>2],F=(s[e+2268>>2]+(W(v,N)<<4)|0)+(r<<4)|0,s[e+2308>>2]==1){if((r|0)>=1&&Je[s[2717]](F,N,S+4|0),A[$+2|0]&&Je[s[2719]](F,N,S),v=$+2|0,(Ne|0)>=1&&Je[s[2716]](F,N,S+4|0),!A[v|0])break t;Je[s[2718]](F,N,S);break t}if(G=A[$+1|0],At=s[e+2284>>2],y=W(At,v)<<3,v=r<<3,Bt=(y+s[e+2276>>2]|0)+v|0,$e=v+(y+s[e+2272>>2]|0)|0,ce=A[$+3|0],(r|0)>=1&&(v=S+4|0,Je[s[2709]](F,N,v,G,ce),Je[s[2711]]($e,Bt,At,v,G,ce)),A[$+2|0]&&(Je[s[2713]](F,N,S,G,ce),Je[s[2715]]($e,Bt,At,S,G,ce)),y=$+2|0,(Ne|0)>=1&&(v=S+4|0,Je[s[2708]](F,N,v,G,ce),Je[s[2710]]($e,Bt,At,v,G,ce)),!A[y|0])break t;Je[s[2712]](F,N,S,G,ce),Je[s[2714]]($e,Bt,At,S,G,ce)}if(r=r+1|0,!((r|0)<s[e+304>>2]))break}}ce=w<<4,$e=gt-qr|0,N=f<<3,Ne=xe-hi|0,gt=yi-hi|0;e:{if(!s[e+540>>2]||(F=s[e+296>>2],f=s[e+304>>2],(F|0)>=(f|0)))break e;for(G=e+552|0;;){if(r=s[e+176>>2]+W(F,800)|0,y=A[r+796|0],y>>>0>=4){for(xe=r+796|0,$=s[e+2284>>2],At=W($,s[e+160>>2])<<3,yi=s[e+2276>>2],v=s[e+2272>>2],S=s[e+548>>2],w=s[e+544>>2],f=0;r=G+(w<<2)|0,Bt=s[r>>2]-s[G+(S<<2)>>2]|0,s[r>>2]=Bt&2147483647,r=s[e+544>>2]+1|0,w=(r|0)==55?0:r,s[e+544>>2]=w,r=s[e+548>>2]+1|0,S=(r|0)==55?0:r,s[e+548>>2]=S,c[f+Yt|0]=W(y,Bt<<1>>24)>>>8^128,f=f+1|0,(f|0)!=64;);for(y=F<<3,Je[s[2720]](Yt,y+(v+At|0)|0,$),v=A[xe|0],S=s[e+548>>2],w=s[e+544>>2],f=0;r=G+(w<<2)|0,xe=s[r>>2]-s[G+(S<<2)>>2]|0,s[r>>2]=xe&2147483647,r=s[e+544>>2]+1|0,w=(r|0)==55?0:r,s[e+544>>2]=w,r=s[e+548>>2]+1|0,S=(r|0)==55?0:r,s[e+548>>2]=S,c[f+Yt|0]=W(v,xe<<1>>24)>>>8^128,f=f+1|0,(f|0)!=64;);Je[s[2720]](Yt,y+(At+yi|0)|0,$),f=s[e+304>>2]}if(F=F+1|0,!((F|0)<(f|0)))break}}$e=ce+$e|0,v=N+Ne|0,xe=N+gt|0,yi=on+-1|0;e:{t:{f=1;i:{if(!s[t+44>>2])break i;r=Vi<<4,y=r+16|0;r:{if(Vi){s[t+24>>2]=xe,s[t+20>>2]=$e,w=v,r=r-Mi|0;break r}s[t+20>>2]=ce+s[e+2268>>2],s[t+24>>2]=N+s[e+2272>>2],w=N+s[e+2276>>2]|0,r=0}if(s[t+28>>2]=w,w=0,s[t+104>>2]=0,f=s[t+88>>2],y=y-((Vi|0)>=(yi|0)?0:Mi)|0,Ne=(y|0)>(f|0)?f:y,!(!s[e+2348>>2]|(Ne|0)<=(r|0))&&(w=ss(e,t,r,Ne-r|0),s[t+104>>2]=w,!w))break t;if(y=s[t+84>>2],(y|0)>(r|0)){f=y-r|0,s[t+20>>2]=s[t+20>>2]+W(f,s[e+2280>>2]),r=W(s[e+2284>>2],f>>1),s[t+24>>2]=r+s[t+24>>2],s[t+28>>2]=r+s[t+28>>2];r:{if(!w){w=0;break r}w=W(f,s[t>>2])+w|0,s[t+104>>2]=w}r=y}if(f=1,(Ne|0)<=(r|0))break i;gt=s[t+76>>2],s[t+20>>2]=gt+s[t+20>>2],f=gt>>1,s[t+24>>2]=f+s[t+24>>2],s[t+28>>2]=f+s[t+28>>2],w&&(s[t+104>>2]=w+gt),s[t+8>>2]=r-y,s[t+16>>2]=Ne-r,s[t+12>>2]=s[t+80>>2]-gt,f=Je[s[t+44>>2]](t)|0}if(s[e+156>>2]!=(ar+1|0)|(Vi|0)>=(yi|0))break e;Sn(s[e+2268>>2]-qr|0,$e+(s[e+2280>>2]<<4)|0,qr),t=0-hi|0,Sn(t+s[e+2272>>2]|0,xe+(s[e+2284>>2]<<3)|0,hi),Sn(t+s[e+2276>>2]|0,v+(s[e+2284>>2]<<3)|0,hi);break e}f=vo(e,3,4912)}return br=Yt- -64|0,f|0}function gn(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0;e:{if(!e)break e;f=e+-8|0,r=s[e+-4>>2],e=r&-8,v=f+e|0;t:{if(r&1)break t;if(!(r&3)||(r=s[f>>2],f=f-r|0,f>>>0<zr[2888]))break e;if(e=e+r|0,s[2889]!=(f|0)){if(r>>>0<=255){if(y=s[f+8>>2],r=r>>>3|0,t=s[f+12>>2],(t|0)==(y|0)){F=11536,N=s[2884]&Ws(-2,r),s[F>>2]=N;break t}s[y+12>>2]=t,s[t+8>>2]=y;break t}S=s[f+24>>2],r=s[f+12>>2];i:{if((r|0)!=(f|0)){t=s[f+8>>2],s[t+12>>2]=r,s[r+8>>2]=t;break i}r:{if(y=f+20|0,t=s[y>>2],t||(y=f+16|0,t=s[y>>2],t))break r;r=0;break i}for(;w=y,r=t,y=r+20|0,t=s[y>>2],!(!t&&(y=r+16|0,t=s[r+16>>2],!t)););s[w>>2]=0}if(!S)break t;y=s[f+28>>2],t=(y<<2)+11840|0;i:{if(s[t>>2]==(f|0)){if(s[t>>2]=r,r)break i;F=11540,N=s[2885]&Ws(-2,y),s[F>>2]=N;break t}if(s[S+(s[S+16>>2]==(f|0)?16:20)>>2]=r,!r)break t}if(s[r+24>>2]=S,t=s[f+16>>2],t&&(s[r+16>>2]=t,s[t+24>>2]=r),t=s[f+20>>2],!t)break t;s[r+20>>2]=t,s[t+24>>2]=r;break t}if(r=s[v+4>>2],(r&3)!=3)break t;s[2886]=e,s[v+4>>2]=r&-2,s[f+4>>2]=e|1,s[e+f>>2]=e;return}if(v>>>0<=f>>>0||(r=s[v+4>>2],!(r&1)))break e;t:{if(!(r&2)){if((v|0)==s[2890]){if(s[2890]=f,e=s[2887]+e|0,s[2887]=e,s[f+4>>2]=e|1,s[2889]!=(f|0))break e;s[2886]=0,s[2889]=0;return}if((v|0)==s[2889]){s[2889]=f,e=s[2886]+e|0,s[2886]=e,s[f+4>>2]=e|1,s[e+f>>2]=e;return}e=(r&-8)+e|0;i:{if(r>>>0<=255){if(t=s[v+8>>2],r=r>>>3|0,y=s[v+12>>2],(t|0)==(y|0)){F=11536,N=s[2884]&Ws(-2,r),s[F>>2]=N;break i}s[t+12>>2]=y,s[y+8>>2]=t;break i}S=s[v+24>>2],r=s[v+12>>2];r:{if((v|0)!=(r|0)){t=s[v+8>>2],s[t+12>>2]=r,s[r+8>>2]=t;break r}o:{if(y=v+20|0,t=s[y>>2],t||(y=v+16|0,t=s[y>>2],t))break o;r=0;break r}for(;w=y,r=t,y=r+20|0,t=s[y>>2],!(!t&&(y=r+16|0,t=s[r+16>>2],!t)););s[w>>2]=0}if(!S)break i;y=s[v+28>>2],t=(y<<2)+11840|0;r:{if((v|0)==s[t>>2]){if(s[t>>2]=r,r)break r;F=11540,N=s[2885]&Ws(-2,y),s[F>>2]=N;break i}if(s[S+((v|0)==s[S+16>>2]?16:20)>>2]=r,!r)break i}if(s[r+24>>2]=S,t=s[v+16>>2],t&&(s[r+16>>2]=t,s[t+24>>2]=r),t=s[v+20>>2],!t)break i;s[r+20>>2]=t,s[t+24>>2]=r}if(s[f+4>>2]=e|1,s[e+f>>2]=e,s[2889]!=(f|0))break t;s[2886]=e;return}s[v+4>>2]=r&-2,s[f+4>>2]=e|1,s[e+f>>2]=e}if(e>>>0<=255){e=e>>>3|0,r=(e<<3)+11576|0,t=s[2884],e=1<<e;t:{if(!(t&e)){s[2884]=e|t,e=r;break t}e=s[r+8>>2]}s[r+8>>2]=f,s[e+12>>2]=f,s[f+12>>2]=r,s[f+8>>2]=e;return}s[f+16>>2]=0,s[f+20>>2]=0,v=f,y=e>>>8|0,t=0;t:{if(!y||(t=31,e>>>0>16777215))break t;r=y,y=y+1048320>>>16&8,t=r<<y,S=t+520192>>>16&4,t=t<<S,w=t+245760>>>16&2,t=(t<<w>>>15|0)-(w|(y|S))|0,t=(t<<1|e>>>t+21&1)+28|0}s[v+28>>2]=t,w=(t<<2)+11840|0;t:{i:{y=s[2885],r=1<<t;r:{if(!(y&r)){s[2885]=r|y,s[w>>2]=f,s[f+24>>2]=w;break r}for(y=e<<((t|0)==31?0:25-(t>>>1|0)|0),r=s[w>>2];;){if(t=r,(s[r+4>>2]&-8)==(e|0))break i;if(r=y>>>29|0,y=y<<1,w=(t+(r&4)|0)+16|0,r=s[w>>2],!r)break}s[w>>2]=f,s[f+24>>2]=t}s[f+12>>2]=f,s[f+8>>2]=f;break t}e=s[t+8>>2],s[e+12>>2]=f,s[t+8>>2]=f,s[f+24>>2]=0,s[f+12>>2]=t,s[f+8>>2]=e}if(e=s[2892]+-1|0,s[2892]=e,e)break e;for(f=11992;e=s[f>>2],f=e+8|0,!!e;);s[2892]=-1}}function Qo(e,t,r,f,y){var v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0;S=br-128|0,s[S+120>>2]=0,s[S+124>>2]=0,s[S+112>>2]=0,s[S+116>>2]=0,s[S+104>>2]=0,s[S+108>>2]=0,s[S+96>>2]=0,s[S+100>>2]=0,s[S+88>>2]=0,s[S+92>>2]=0,s[S+80>>2]=0,s[S+84>>2]=0,s[S+72>>2]=0,s[S+76>>2]=0,s[S+64>>2]=0,s[S+68>>2]=0;e:{if((f|0)>=1){for(;;){if(w=s[(v<<2)+r>>2],(w|0)>15)break e;if(w=(S- -64|0)+(w<<2)|0,s[w>>2]=s[w>>2]+1,v=v+1|0,(v|0)==(f|0))break}v=s[S+64>>2]}else v=0;if((v|0)==(f|0)||(s[S+4>>2]=0,v=s[S+68>>2],(v|0)>2)||(s[S+8>>2]=v,w=s[S+72>>2],(w|0)>4)||(v=v+w|0,s[S+12>>2]=v,w=s[S+76>>2],(w|0)>8)||(v=v+w|0,s[S+16>>2]=v,w=s[S+80>>2],(w|0)>16)||(v=v+w|0,s[S+20>>2]=v,w=s[S+84>>2],(w|0)>32)||(v=v+w|0,s[S+24>>2]=v,w=s[S+88>>2],(w|0)>64)||(v=v+w|0,s[S+28>>2]=v,w=s[S+92>>2],(w|0)>128)||(v=v+w|0,s[S+32>>2]=v,w=s[S+96>>2],(w|0)>256)||(v=v+w|0,s[S+36>>2]=v,w=s[S+100>>2],(w|0)>512)||(v=v+w|0,s[S+40>>2]=v,w=s[S+104>>2],(w|0)>1024)||(v=v+w|0,s[S+44>>2]=v,w=s[S+108>>2],(w|0)>2048)||(v=v+w|0,s[S+48>>2]=v,w=s[S+112>>2],(w|0)>4096)||(v=v+w|0,s[S+52>>2]=v,w=s[S+116>>2],(w|0)>8192)||(v=v+w|0,s[S+56>>2]=v,w=s[S+120>>2],(w|0)>16384))break e;if(s[S+60>>2]=v+w,v=0,(f|0)>0)for(;;){w=s[(v<<2)+r>>2];t:{if((w|0)<1)break t;if(y){F=S+(w<<2)|0,w=s[F>>2],s[F>>2]=w+1,_i[(w<<1)+y>>1]=v;break t}w=S+(w<<2)|0,s[w>>2]=s[w>>2]+1}if(v=v+1|0,(v|0)==(f|0))break}if(w=1<<t,$e=1,$=s[S+60>>2],($|0)==1){if(!y)return w;for(r=tr[y>>1]<<16,v=w;t=v+-1|0,f=(t<<2)+e|0,_i[f>>1]=r,_i[f+2>>1]=r>>>16,f=(v|0)>1,v=t,!!f;);return w}Bt=1;t:{i:{if((t|0)<1)break i;for(xe=2,v=1;;){if(Ne=$e<<1,Yt=(S- -64|0)+(v<<2)|0,f=s[Yt>>2],$e=Ne-f|0,($e|0)<0)break e;if(r=v,!(!e|(f|0)<1)){for(F=f+ce|0,yi=r&255,G=1<<r+-1;;){for(hi=(N<<2)+e|0,f=yi|tr[(ce<<1)+y>>1]<<16,v=w;v=v-xe|0,gt=hi+(v<<2)|0,_i[gt>>1]=f,_i[gt+2>>1]=f>>>16,(v|0)>0;);for(f=G;v=f,f=v>>>1|0,!!(v&N););if(N=v?v+(v+-1&N)|0:N,ce=ce+1|0,(F|0)==(ce|0))break}s[Yt>>2]=0,ce=F}if(Bt=Ne+Bt|0,xe=xe<<1,v=r+1|0,(t|0)==(r|0))break}if((t|0)<=14)break i;Ne=w;break t}for(ar=w+-1|0,F=t,G=-1,xe=2,$=e,Ne=w;;){if(At=0,Yt=F,Mi=$e<<1,F=F+1|0,gt=(S- -64|0)+(F<<2)|0,r=s[gt>>2],$e=Mi-r|0,($e|0)<0)break e;if(!(!e|(r|0)<1))for(hi=1<<Yt,At=F-t|0,qr=At&255,yi=1<<At,v=G;;){G=N&ar;i:{if((G|0)==(v|0)){G=v;break i}if($=(w<<2)+$|0,w=yi,v=At,(Yt|0)<=13){v=F,f=v,r=yi-r|0;r:{if((r|0)<1)break r;for(;;){if(f=15,v=v+1|0,(v|0)==15)break r;if(f=v,r=(r<<1)-s[(S- -64|0)+(v<<2)>>2]|0,!((r|0)>0))break}}v=f-t|0,w=1<<v}r=(G<<2)+e|0,c[r|0]=t+v,_i[r+2>>1]=($-e>>>2|0)-G,Ne=w+Ne|0}for(f=(N>>>t<<2)+$|0,r=qr|tr[(ce<<1)+y>>1]<<16,v=w;v=v-xe|0,Vi=f+(v<<2)|0,_i[Vi>>1]=r,_i[Vi+2>>1]=r>>>16,(v|0)>0;);for(f=hi;v=f,f=v>>>1|0,!!(v&N););if(f=s[gt>>2],r=f+-1|0,s[gt>>2]=r,N=v?v+(v+-1&N)|0:N,ce=ce+1|0,v=G,!((f|0)>1))break}if(Bt=Bt+Mi|0,xe=xe<<1,(F|0)==15)break}$=s[S+60>>2]}At=(($<<1)+-1|0)==(Bt|0)?Ne:0}return At}function Go(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0;At=br-32|0,br=At,w=s[e+2256>>2],$=s[e+2296>>2],Bt=w+($<<1)|0,$e=s[e+2304>>2];e:{t:{if(s[e+2236>>2]&&(r=W($,800)+$e|0,A[r+797|0]))break t;if(y=W($,800)+$e|0,Yt=A[y+798|0],F=3,f=yo(y,0,768),!A[f+768|0]){r=At,s[r+24>>2]=0,s[r+28>>2]=0,s[r+16>>2]=0,s[r+20>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0,s[r>>2]=0,s[r+4>>2]=0,v=w+-1|0,F=w+($<<1)|0,N=Je[s[2661]](t,e+2032|0,A[v|0]+A[F+1|0]|0,((Yt<<5)+e|0)+784|0,0,r)|0,r=(N|0)>0,c[v|0]=r,c[F+1|0]=r;i:{if((N|0)>=2){Je[s[2674]](At,f);break i}r=W($,800)+$e|0,f=_i[At>>1]+3>>>3|0,_i[r+480>>1]=f,_i[r+448>>1]=f,_i[r+416>>1]=f,_i[r+384>>1]=f,_i[r+352>>1]=f,_i[r+320>>1]=f,_i[r+288>>1]=f,_i[r+256>>1]=f,_i[r+224>>1]=f,_i[r+192>>1]=f,_i[r+160>>1]=f,_i[r+128>>1]=f,_i[r+96>>1]=f,_i[r+64>>1]=f,_i[r+32>>1]=f,_i[r>>1]=f}F=0,v=1}for(r=A[Bt|0]&15,f=((Yt<<5)+e|0)+776|0,hi=w+-2|0,w=A[hi|0]&15,F=(W(F,68)+e|0)+1964|0;N=Je[s[2661]](t,F,(w&1)+(r&1)|0,f,v,y)|0,ce=tr[y>>1],S=(N|0)>(v|0),G=r>>>1|0,r=Je[s[2661]](t,F,S+(G&1)|0,f,v,y+32|0)|0,xe=tr[y+32>>1],Ne=(r|0)>(v|0),S=(G&126|S<<7)>>>1|0,G=Je[s[2661]](t,F,Ne+(S&1)|0,f,v,y- -64|0)|0,Mi=tr[y+64>>1],yi=(G|0)>(v|0),Ne=(S|Ne<<7)>>>1|0,S=Je[s[2661]](t,F,yi+(Ne&1)|0,f,v,y+96|0)|0,Vi=(((r|0)>3?3:(r|0)<2?(xe|0)!=0:2)|((N|0)>3?12:(N|0)<2?((ce|0)!=0)<<2:8))<<4|Vi<<8|((G|0)>3?12:(G|0)<2?((Mi|0)!=0)<<2:8)|((S|0)>3?3:(S|0)<2?tr[y+96>>1]!=0:2),N=(S|0)>(v|0),r=N<<3|(Ne|yi<<7)>>>5,w=N<<7|(w&254)>>>1,y=y+128|0,gt=gt+1|0,(gt|0)!=4;);for(F=e+2100|0,gt=w>>>4|0,G=r&255,N=((Yt<<5)+e|0)+792|0,w=0,r=1,v=0;f=v|4,ce=A[hi|0]>>>f|0,S=A[Bt|0]>>>f|0,f=Je[s[2661]](t,F,(ce&1)+(S&1)|0,N,0,y)|0,Ne=tr[y>>1],xe=(f|0)>0,S=Je[s[2661]](t,F,xe+(S>>>1&1)|0,N,0,y+32|0)|0,Mi=tr[y+32>>1],ce=Je[s[2661]](t,F,xe+(ce>>>1&1)|0,N,0,y- -64|0)|0,yi=tr[y+64>>1],ar=(ce|0)>0,qr=(S|0)>0,xe=Je[s[2661]](t,F,ar+qr|0,N,0,y+96|0)|0,w=((((S|0)>3?3:(S|0)<2?(Mi|0)!=0:2)|((f|0)>3?12:(f|0)<2?((Ne|0)!=0)<<2:8))<<4|((ce|0)>3?12:(ce|0)<2?((yi|0)!=0)<<2:8)|((xe|0)>3?3:(xe|0)<2?tr[y+96>>1]!=0:2))<<(v<<2)|w,f=(xe|0)>0,gt=(f<<5|qr<<4)<<v|gt,G=(f<<1|ar)<<4<<v|G,y=y+128|0,f=r,r=0,v=2,!!f;);c[Bt|0]=G,c[hi|0]=gt,r=W($,800)+$e|0,s[r+792>>2]=w,s[r+788>>2]=Vi,c[r+796|0]=w&43690?0:s[((Yt<<5)+e|0)+804>>2],v=(w|Vi)!=0;break e}c[Bt|0]=0,c[w+-2|0]=0,A[r+768|0]||(c[(w+($<<1)|0)+1|0]=0,c[w+-1|0]=0),r=W($,800)+$e|0,s[r+788>>2]=0,s[r+792>>2]=0,c[r+796|0]=0}return s[e+2308>>2]>=1&&(r=s[e+2260>>2]+(s[e+2296>>2]<<2)|0,f=e,e=W($,800)+$e|0,e=s[((f+(A[e+798|0]<<3)|0)+(A[e+768|0]<<2)|0)+2312>>2],c[r|0]=e,c[r+1|0]=e>>>8,c[r+2|0]=e>>>16,c[r+3|0]=e>>>24,c[r+2|0]=A[r+2|0]|v),br=At+32|0,!s[t+24>>2]}function fl(e,t,r,f,y){var v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0;xe=br-16|0,br=xe,w=s[e+8>>2];e:{t:switch(s[e>>2]){case 2:Je[s[2733]](f,W(w,r-t|0),y);break e;case 0:i:{if(t){$=w+-1|0,G=y,v=t;break i}if(v=s[f>>2],v=v+-16777216&-16711936|v&16711935,s[y>>2]=v,$=w+-1|0,(w|0)>=2)for(G=y+4|0,N=f+4|0;ce=F<<2,S=s[ce+N>>2],v=(S&-16711936)+(v&-16711936)&-16711936|(S&16711935)+(v&16711935)&16711935,s[G+ce>>2]=v,F=F+1|0,($|0)!=(F|0););v=w<<2,G=v+y|0,f=f+v|0,v=1}if(N=v,(N|0)<(r|0))for(v=s[e+4>>2],At=1<<v,yi=At+-1|0,Ne=0-At|0,$e=0-w|0,gt=$+At>>>v|0,ce=s[e+16>>2]+(W(gt,N>>v)<<2)|0;;){if(S=s[f>>2],$=$e<<2,v=s[$+G>>2],s[G>>2]=(S&-16711936)+(v&-16711936)&-16711936|(S&16711935)+(v&16711935)&16711935,v=1,F=ce,(w|0)>=2)for(;S=v<<2,Yt=S+G|0,hi=f+S|0,Bt=At+(v&Ne)|0,S=(Bt|0)>(w|0)?w:Bt,Je[s[(s[F>>2]>>>6&60)+10960>>2]](hi,$+Yt|0,S-v|0,Yt),F=F+4|0,v=S,(w|0)>(Bt|0););if(N=N+1|0,ce=yi&N?ce:(gt<<2)+ce|0,v=w<<2,G=v+G|0,f=f+v|0,(r|0)==(N|0))break}if(s[e+12>>2]==(r|0))break e;e=w<<2,Sn(y-e|0,(W(w,(t^-1)+r|0)<<2)+y|0,e);break e;case 1:if((r|0)<=(t|0))break e;for(v=s[e+4>>2],Ne=1<<v,$e=w&0-Ne,gt=w-$e|0,$=Ne+-1|0,F=$+w>>>v|0,e=s[e+16>>2]+(W(F,t>>v)<<2)|0,G=($e|0)<1;;){c[xe+10|0]=0,_i[xe+8>>1]=0,N=(w<<2)+f|0;i:{if(G){v=e;break i}for(ce=($e<<2)+f|0,v=e;S=s[v>>2],c[xe+8|0]=S,c[xe+10|0]=S>>>16,c[xe+9|0]=S>>>8,Je[s[2804]](xe+8|0,f,Ne,y),v=v+4|0,S=Ne<<2,y=S+y|0,f=f+S|0,f>>>0<ce>>>0;);}if(f>>>0<N>>>0&&(v=s[v>>2],c[xe+8|0]=v,c[xe+10|0]=v>>>16,c[xe+9|0]=v>>>8,Je[s[2804]](xe+8|0,f,gt,y),v=gt<<2,y=v+y|0,f=f+v|0),t=t+1|0,e=$&t?e:(F<<2)+e|0,(t|0)==(r|0))break}break e;case 3:break t;default:break e}if(v=s[e+4>>2],!((f|0)!=(y|0)|(v|0)<1)){if(y=r-t|0,v=W(y,(w+(1<<v)|0)+-1>>>v|0)<<2,F=((W(y,w)<<2)+f|0)-v|0,y=rc(F,f,v),G=s[e+16>>2],$=s[e+8>>2],e=s[e+4>>2],N=8>>>e|0,(N|0)<=7){if((r|0)<=(t|0))break e;for(ce=-1<<N^-1,S=-1<<e^-1,e=($|0)<1;;){if(v=0,y=0,!e)for(;v&S||(y=A[F+1|0],F=F+4|0),s[f>>2]=s[G+((y&ce)<<2)>>2],y=y>>>N|0,f=f+4|0,v=v+1|0,($|0)!=(v|0););if(t=t+1|0,(r|0)==(t|0))break}break e}Je[s[2805]](y,G,f,t,r,$);break e}if(G=s[e+16>>2],N=8>>>v|0,(N|0)<=7){if((r|0)<=(t|0))break e;for(ce=-1<<N^-1,S=-1<<v^-1,e=(w|0)<1;;){if(F=0,v=0,!e)for(;F&S||(v=A[f+1|0],f=f+4|0),s[y>>2]=s[G+((v&ce)<<2)>>2],v=v>>>N|0,y=y+4|0,F=F+1|0,(w|0)!=(F|0););if(t=t+1|0,(r|0)==(t|0))break}break e}Je[s[2805]](f,G,y,t,r,w)}br=xe+16|0}function Xa(e,t,r,f,y,v,w,S){var F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0;$=br-16|0,br=$,s[$+12>>2]=0,s[$+8>>2]=0,Mi=S?s[S+8>>2]:0;e:{if(!e){G=7;break e}if(t>>>0<12){G=7;break e}if(N=t,F=e,gt=ac(F,5463),!gt){if(G=3,(A[e+8|0]|A[e+9|0]<<8|(A[e+10|0]<<16|A[e+11|0]<<24))!=1346520407||(Ne=A[e+4|0]|A[e+5|0]<<8|(A[e+6|0]<<16|A[e+7|0]<<24),Ne+-12>>>0>4294967274))break e;if(!(!Mi|Ne>>>0<=t+-8>>>0)){G=7;break e}if(N=t+-12|0,N>>>0<8){G=7;break e}F=e+12|0}$e=ac(F,5468);t:{if($e){G=0;break t}if(G=3,(A[F+4|0]|A[F+5|0]<<8|(A[F+6|0]<<16|A[F+7|0]<<24))!=10)break e;if(N>>>0<18){G=7;break e}if(ce=1,Bt=(A[F+12|0]|A[F+13|0]<<8|A[F+14|0]<<16)+1|0,Yt=(A[F+15|0]|A[F+16|0]<<8|A[F+17|0]<<16)+1|0,Jr(Bt,0,Yt,0),gt|yr)break e;G=A[F+8|0],N=N+-18|0,F=F+18|0,yi=(G&2)>>>1|0}y&&(s[y>>2]=G>>>4&1),v&&(s[v>>2]=yi),w&&(s[w>>2]=0),s[$+8>>2]=Yt,s[$+12>>2]=Bt;t:{if(!S&&(v=0,!$e&yi))break t;v=0;i:{if(N>>>0<4)break i;r:{if(ce|Ne|(A[F|0]|A[F+1|0]<<8|(A[F+2|0]<<16|A[F+3|0]<<24))!=1213221953&&$e|gt)break r;if(N>>>0<8)break i;for(hi=22;;){if(G=3,xe=A[F+4|0]|A[F+5|0]<<8|(A[F+6|0]<<16|A[F+7|0]<<24),xe>>>0>4294967286||(At=xe+9&-2,hi=At+hi|0,hi>>>0>Ne>>>0&&!gt))break e;if((A[F|0]|A[F+1|0]<<8|(A[F+2|0]<<16|A[F+3|0]<<24))==540561494|(A[F|0]|A[F+1|0]<<8|(A[F+2|0]<<16|A[F+3|0]<<24))==1278758998)break r;if(N>>>0<At>>>0)break i;if(ce=(A[F|0]|A[F+1|0]<<8|(A[F+2|0]<<16|A[F+3|0]<<24))==1213221953,v=ce?F+8|0:v,Vi=ce?xe:Vi,F=F+At|0,N=N-At|0,!(N>>>0>=8))break}break i}if(N>>>0<8)break i;xe=A[F|0]|A[F+1|0]<<8|(A[F+2|0]<<16|A[F+3|0]<<24);r:{if(!((A[F|0]|A[F+1|0]<<8|(A[F+2|0]<<16|A[F+3|0]<<24))!=540561494&&(xe|0)!=1278758998)){if(ce=A[F+4|0]|A[F+5|0]<<8|(A[F+6|0]<<16|A[F+7|0]<<24),Ne>>>0>=12&&(G=3,ce>>>0>Ne+-12>>>0))break e;if(N=N+-8|0,ce>>>0>N>>>0&&Mi)break i;F=F+8|0,xe=(xe|0)==1278758998;break r}ce=N,xe=A[F|0]!=47|N>>>0<5?0:A[F+4|0]<32}if(G=3,ce>>>0>4294967286)break e;yi|!w||(s[w>>2]=xe?2:1);r:{if(!xe){if(N>>>0<10)break i;if(ct(F,N,ce,$+12|0,$+8|0))break r;break e}if(N>>>0<5)break i;if(!Ci(F,N,$+12|0,$+8|0,y))break e}if(s[$+12>>2]!=(Bt|0)|s[$+8>>2]!=(Yt|0)&&!$e)break e;if(!S)break t;s[S+8>>2]=0,s[S+12>>2]=0,s[S+4>>2]=t,s[S>>2]=e,s[S+32>>2]=xe,s[S+28>>2]=Ne,s[S+24>>2]=ce,s[S+20>>2]=Vi,s[S+16>>2]=v,s[S+12>>2]=F-e;break t}if(S){G=7;break e}if(G=7,$e)break e}if(y&&(s[y>>2]=s[y>>2]|(v|0)!=0),r&&(s[r>>2]=s[$+12>>2]),G=0,!f)break e;s[f>>2]=s[$+8>>2]}return br=$+16|0,G}function tu(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;e:{S=s[e+108>>2],r=t-S|0;t:{if((r|0)<1)break t;w=s[e+8>>2],xe=s[w>>2],f=s[e+100>>2],N=s[e+16>>2]+(W(f,S)<<2)|0,F=s[e+20>>2],$=s[e+176>>2];i:{if(($|0)>=1){if(r=$+-1|0,fl((W(r,20)+e|0)+180|0,S,t,N,F),($|0)<2)break i;for(;f=r+-1|0,fl((W(f,20)+e|0)+180|0,S,t,F,F),$=(r|0)>1,r=f,!!$;);break i}if((F|0)==(N|0))break i;Sn(F,N,W(r,f)<<2)}if(S=s[w+84>>2],N=s[e+108>>2],$=(S|0)>(N|0),f=s[w+88>>2],f=(f|0)<(t|0)?f:t,r=$?S:N,(f|0)<=(r|0))break t;if(f=f-r|0,s[w+16>>2]=f,s[w+8>>2]=r-S,r=s[w+76>>2],y=s[w+80>>2]-r|0,s[w+12>>2]=y,Ne=xe<<2,ce=(r<<2)+($?F+W(Ne,S-N|0)|0:F)|0,r=s[e+12>>2],S=s[r>>2],S>>>0>10)break e;F=s[r+20>>2],$e=s[r+16>>2]+W(F,s[e+116>>2])|0;i:{if(s[w+92>>2]){if((f|0)<1)break i;for(;;){xe=f-G|0,$=Mu(s[e+268>>2],xe),r=W(G,Ne)+ce|0,Pu(r,Ne,s[s[e+268>>2]+44>>2],$),G=Ho(s[e+268>>2],xe,r,Ne)+G|0,r=0,y=s[e+268>>2];r:{if(s[y+64>>2]>=s[y+56>>2])break r;for($=W(v,F)+$e|0,N=s[y+52>>2],xe=s[y+68>>2];;){if(s[y+24>>2]>0)break r;if(Si(y),Je[s[2662]](xe,N,1),Jn(xe,N,S,$+W(r,F)|0),r=r+1|0,!(s[y+64>>2]<s[y+56>>2]))break}}if(v=r+v|0,!((G|0)<(f|0)))break}break i}if((f|0)>=1)for(r=f;Jn(ce,y,S,$e),$e=F+$e|0,ce=ce+Ne|0,v=(r|0)>1,r=r+-1|0,!!v;);v=f}s[e+116>>2]=s[e+116>>2]+v}s[e+108>>2]=t;return}G=s[e+116>>2];e:{if(s[w+92>>2]){if((f|0)<1)break e;for(;;){r=f-$e|0,v=Mu(s[e+268>>2],r),Pu(ce,Ne,s[s[e+268>>2]+44>>2],v),xe=W(v,Ne),$e=Ho(s[e+268>>2],r,ce,Ne)+$e|0,S=0,w=s[e+268>>2];t:{if(s[w+64>>2]>=s[w+56>>2])break t;for(F=s[w+52>>2],N=s[w+68>>2],$=N+3|0,r=G;;){if(s[w+24>>2]>0)break t;if(Si(w),Je[s[2662]](N,F,1),y=s[e+12>>2],Je[s[2860]](N,s[y+16>>2]+W(s[y+32>>2],r)|0,F),v=r>>1,Je[s[2861]](N,s[y+20>>2]+W(v,s[y+36>>2])|0,s[y+24>>2]+W(v,s[y+40>>2])|0,F,(r^-1)&1),v=s[y+28>>2],v&&Je[s[2668]]($,0,F,1,v+W(s[y+44>>2],r)|0,0)|0,S=S+1|0,r=r+1|0,!(s[w+64>>2]<s[w+56>>2]))break}}if(ce=ce+xe|0,G=G+S|0,!(($e|0)<(f|0)))break}break e}if((f|0)<1)break e;for(;;){if(Je[s[2860]](ce,s[r+16>>2]+W(s[r+32>>2],G)|0,y),v=G>>1,Je[s[2861]](ce,s[r+20>>2]+W(v,s[r+36>>2])|0,s[r+24>>2]+W(v,s[r+40>>2])|0,y,(G^-1)&1),v=s[r+28>>2],v&&Je[s[2668]](ce+3|0,0,y,1,v+W(s[r+44>>2],G)|0,0)|0,G=G+1|0,(f|0)<2)break e;f=f+-1|0,ce=ce+Ne|0,r=s[e+12>>2]}}s[e+116>>2]=G,s[e+108>>2]=t}function ta(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;t=s[e+40>>2],f=s[s[t>>2]>>2],y=f+-1|0;e:{if(y>>>0<12&&(r=0,2077>>>(y&65535)&1))break e;r=f+-7>>>0>3}s[t+40>>2]=0,s[t+44>>2]=0,s[t+48>>2]=0,s[t+52>>2]=0;e:{if(!sa(s[t+20>>2],e,r?12:11))break e;r|f+-7>>>0>3||Ba(),v=t+40|0;t:{i:{r:{o:{l:{if(s[e+92>>2]){if(r=s[t>>2],S=s[r>>2],w=S+-1|0,f>>>0<=10){if(w>>>0>=12||(y=0,!(2077>>>(w&65535)&1)))break r;break i}if(w>>>0>=12||(f=0,!(2077>>>(w&65535)&1)))break l;break o}n:{if(f>>>0<=10){if(vl(),s[t+44>>2]=6,!s[e+56>>2])break n;if(y=s[e+12>>2],w=y+1|0,y=ts(1,0,(w&-2)+y|0),s[v>>2]=y,!y)break e;s[t+4>>2]=y,e=s[e+12>>2],s[t+44>>2]=7,e=e+y|0,s[t+8>>2]=e,s[t+12>>2]=e+(w>>1),Ba();break n}s[t+44>>2]=8}if(F=1,r)break e;e=9;n:switch(f+-5|0){default:e=f>>>0<11?10:11;break;case 0:case 5:break n}if(s[t+48>>2]=e,f>>>0>10)break e;break t}f=S+-7>>>0>3}if(S=s[e+100>>2],N=s[e+12>>2],G=s[e+16>>2],$=v,y=s[e+96>>2],v=y+1|0,ce=v&-2,xe=ce<<1,Ne=y<<1,$e=(xe+Ne<<2)+(f?0:y<<3)|0,w=ts(1,0,$e+(f?283:367)|0),s[$>>2]=w,!w||(F=(w+$e|0)+31&-32,s[t+24>>2]=F,s[t+32>>2]=F+168,s[t+28>>2]=F+84,s[t+36>>2]=f?0:F+252|0,Da(F,s[e+12>>2],s[e+16>>2],s[r+16>>2],y,S,s[r+32>>2],1,w),F=N+1>>1,N=G+1>>1,v=v>>1,G=S+1>>1,w=w+(Ne<<2)|0,Da(s[t+28>>2],F,N,s[r+20>>2],v,G,s[r+36>>2],1,w),Da(s[t+32>>2],F,N,s[r+24>>2],v,G,s[r+40>>2],1,w+(ce<<2)|0),s[t+44>>2]=12,F=1,f))break e;Da(s[t+36>>2],s[e+12>>2],s[e+16>>2],s[r+28>>2],y,S,s[r+44>>2],1,w+(xe<<2)|0),s[t+48>>2]=13;break t}y=S+-7>>>0>3}if(w=s[e+100>>2],N=s[e+12>>2],G=s[e+16>>2],r=s[e+96>>2],ce=W(r,6),S=(y?ce:r<<3)<<2,$=v,xe=W(r,3),Ne=r<<2,v=S+(y?xe:Ne)|0,f=ts(1,0,v+(y?283:367)|0),s[$>>2]=f,!f||(F=1,v=(f+v|0)+31&-32,s[t+24>>2]=v,s[t+32>>2]=v+168,s[t+28>>2]=v+84,s[t+36>>2]=y?0:v+252|0,$=v,v=f+S|0,Da($,s[e+12>>2],s[e+16>>2],v,r,w,0,1,f),S=N+1>>1,N=G+1>>1,G=r<<1,Da(s[t+28>>2],S,N,r+v|0,r,w,0,1,f+(G<<2)|0),Da(s[t+32>>2],S,N,v+G|0,r,w,0,1,f+(Ne<<2)|0),s[t+44>>2]=14,ya(),y))break e;Da(s[t+36>>2],s[e+12>>2],s[e+16>>2],v+xe|0,r,w,0,1,f+(ce<<2)|0),s[t+48>>2]=15,e=16;i:switch(s[s[t>>2]>>2]+-5|0){default:e=17;break;case 0:case 5:break i}s[t+52>>2]=e}Eu()}return F|0}function Ya(e,t,r,f,y){var v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0,jo=0,Zs=0,Ra=0;Mi=br-256|0,br=Mi,v=(y|0)/25|0;e:{if(!e|y>>>0>100|((t|0)<1|(r|0)<1)||(w=1,qr=r+-1|0,Ne=t+-1|0,y=(v<<1|1)>(t|0)?Ne>>1:v,G=(y<<1|1)>(r|0)?qr>>1:y,(G|0)<1)||(w=0,N=t<<1,v=G<<1,y=W(N,v+2|0),Yt=ts(1,0,(y+N|0)+4094|0),!Yt))break e;for(At=0-G|0,v=v|1,ce=(W(v,t)<<1)+Yt|0,F=ce-N|0,yo(F,0,N),$e=yo(Mi,0,256),hi=y+Yt|0,yi=W(v,v),Vi=255,$=255,v=e;;){for(w=0;y=A[w+v|0],c[y+$e|0]=1,xe=(S|0)<(y|0),S=xe?y:S,on=xe?y:on,xe=($|0)>(y|0),$=xe?y:$,Vi=xe?y:Vi,w=w+1|0,(w|0)!=(t|0););if(v=f+v|0,gt=gt+1|0,(gt|0)==(r|0))break}for(S=S-$|0,xe=262144/(yi>>>0)|0,v=N+hi|0,w=-1,$=0,y=0;A[y+$e|0]&&($=$+1|0,(w|0)>=0&&(w=y-w|0,S=(w|0)<(S|0)?w:S),w=y),y=y+1|0,(y|0)!=256;);for(w=S<<2,$e=W(S,12)>>2,S=w-$e|0,yi=v+2046|0,y=1;;){gt=y<<1,Bt=gt+yi|0,v=y;t:{if((y|0)<=($e|0)||(v=0,(w|0)<=(y|0)))break t;v=(W($e,w-y|0)|0)/(S|0)|0}if(v=v>>>2|0,_i[Bt>>1]=v,_i[yi-gt>>1]=0-v,y=y+1|0,(y|0)==1024)break}if(_i[yi>>1]=0,!(($|0)<3|(At|0)>=(r|0)))for(gt=G^-1,$=t-G|0,$e=G+1|0,jo=G+-1|0,Zs=(N-G|0)+-2|0,Ra=(Ne<<1)+ce|0,w=Yt,v=e;;){if(S=0,y=0,Bt=(t|0)<1,!Bt)for(;S=A[y+v|0]+(S&65535)|0,N=y<<1,Ne=S+tr[N+F>>1]|0,ar=N+ce|0,N=w+N|0,_i[ar>>1]=Ne-tr[N>>1],_i[N>>1]=Ne,y=y+1|0,(y|0)!=(t|0););if(S=(At|0)<(qr|0)?f+v|0:v,N=(At|0)>-1,Ne=(t<<1)+w|0,ar=(Ne|0)==(ce|0),(At|0)>=(G|0)){if(y=0,(G|0)>-1){for(;_i[(y<<1)+hi>>1]=W(xe,tr[(G-y<<1)+ce>>1]+tr[(y+jo<<1)+ce>>1]&65535)>>>16,F=(y|0)==(G|0),y=y+1|0,!F;);y=$e}if((y|0)<($|0)){for(;_i[(y<<1)+hi>>1]=W(xe,tr[(y+G<<1)+ce>>1]-tr[(y+gt<<1)+ce>>1]&65535)>>>16,y=y+1|0,($|0)!=(y|0););y=$}if((y|0)<(t|0))for(;_i[(y<<1)+hi>>1]=W(xe,((tr[Ra>>1]<<1)-tr[(Zs-y<<1)+ce>>1]|0)-tr[(y+gt<<1)+ce>>1]&65535)>>>16,y=y+1|0,(y|0)!=(t|0););if(y=0,!Bt)for(;Bt=e+y|0,F=A[Bt|0],(on|0)<=(F|0)|(Vi|0)>=(F|0)||(F=F+_i[(tr[(y<<1)+hi>>1]-(F<<2)<<1)+yi>>1]|0,F=(F|0)>0?F:0,c[Bt|0]=(F|0)<255?F:255),y=y+1|0,(y|0)!=(t|0););e=e+f|0}if(v=N?S:v,F=w,w=ar?Yt:Ne,At=At+1|0,(At|0)==(r|0))break}gn(Yt),w=1}return br=Mi+256|0,w}function La(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;e:{if((y|0)<=15)for(xe=s[(y<<2)+t>>2]+W(r,11)|0,r=s[e+8>>2],F=s[e+4>>2];;){w=A[xe|0];t:{if((r|0)>-1)break t;if($=s[e+12>>2],$>>>0<zr[e+20>>2]){S=A[$|0]|A[$+1|0]<<8|(A[$+2|0]<<16|A[$+3|0]<<24),s[e+12>>2]=$+3,r=r+24|0,s[e+8>>2]=r,s[e>>2]=s[e>>2]<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8;break t}hn(e),r=s[e+8>>2]}ce=e,S=r,N=s[e>>2],G=N>>>r|0,w=W(w,F)>>>8|0;t:{if(G>>>0>w>>>0){N=((w^-1)<<r)+N|0,s[e>>2]=N,F=F-w|0;break t}F=w+1|0}if($=fn(F)^24,r=S-$|0,s[ce+8>>2]=r,F=(F<<$)+-1|0,s[e+4>>2]=F,$=y,ce=y,G>>>0<=w>>>0)break e;for(;;){w=A[xe+1|0];t:{if((r|0)>-1)break t;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){S=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=y+3,N=N<<24|(S>>>8&65280|(S<<8&16711680|S<<24))>>>8,s[e>>2]=N;break t}hn(e),N=s[e>>2],r=s[e+8>>2]}ce=e,S=r,G=N>>>r|0,w=W(w,F)>>>8|0;t:{if(G>>>0>w>>>0){N=((w^-1)<<r)+N|0,s[e>>2]=N,F=F-w|0;break t}F=w+1|0}if(y=fn(F)^24,r=S-y|0,s[ce+8>>2]=r,F=(F<<y)+-1|0,s[e+4>>2]=F,y=$+1|0,G>>>0<=w>>>0){if(ce=16,(y|0)==16)break e;xe=s[(y<<2)+t>>2],$=y;continue}break}Ne=s[(y<<2)+t>>2],G=A[xe+2|0];t:{if((r|0)>-1)break t;if(S=s[e+12>>2],S>>>0<zr[e+20>>2]){w=A[S|0]|A[S+1|0]<<8|(A[S+2|0]<<16|A[S+3|0]<<24),r=r+24|0,s[e+8>>2]=r,s[e+12>>2]=S+3,N=N<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=N;break t}hn(e),N=s[e>>2],r=s[e+8>>2]}ce=e,S=r,$e=N>>>r|0,G=W(F,G)>>>8|0;t:{if($e>>>0>G>>>0){s[e>>2]=((G^-1)<<r)+N,r=F-G|0;break t}r=G+1|0}w=fn(r)^24,S=S-w|0,s[ce+8>>2]=S,s[e+4>>2]=(r<<w)+-1;t:{if($e>>>0<=G>>>0){N=1,xe=Ne+11|0;break t}N=Hn(e,xe),S=s[e+8>>2],xe=Ne+22|0}t:{if((S|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,S=S+24|0,s[e+8>>2]=S,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break t}hn(e),S=s[e+8>>2]}if(r=S+-1|0,s[e+8>>2]=r,F=s[e+4>>2],G=F>>>1|0,Ne=s[e>>2],w=G-(Ne>>>S|0)>>31,F=w+F|1,s[e+4>>2]=F,s[e>>2]=Ne-((w&G+1)<<S),_i[(A[$+5328|0]<<1)+v>>1]=W(s[((($|0)>0)<<2)+f>>2],(w^N)-w|0),!(($|0)<15))break}ce=16}return ce|0}function iu(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;e:{if((y|0)<=15)for(xe=s[(y<<2)+t>>2]+W(r,11)|0,S=s[e+8>>2],w=s[e+4>>2];;){N=A[xe|0];t:{if((S|0)>-1)break t;if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){$=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,S=S+24|0,s[e+8>>2]=S,s[e>>2]=s[e>>2]<<24|($>>>8&65280|($<<8&16711680|$<<24))>>>8;break t}hn(e),S=s[e+8>>2]}if(F=s[e>>2],r=W(w,N)>>>8|0,N=F>>>S>>>0<=r>>>0,N||(r=r+1|0,F=F-(r<<S)|0,s[e>>2]=F,r=w-r|0),r>>>0<=126&&(S=S-A[r+9056|0]|0,s[e+8>>2]=S,r=A[r+9184|0]),s[e+4>>2]=r,$=y,w=y,N)break e;for(;;){N=A[xe+1|0];t:{if((S|0)>-1)break t;if(y=s[e+12>>2],y>>>0<zr[e+20>>2]){w=A[y|0]|A[y+1|0]<<8|(A[y+2|0]<<16|A[y+3|0]<<24),S=S+24|0,s[e+8>>2]=S,s[e+12>>2]=y+3,F=F<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,s[e>>2]=F;break t}hn(e),F=s[e>>2],S=s[e+8>>2]}G=F>>>S|0,w=W(r,N)>>>8|0;t:{if(G>>>0<=w>>>0){r=w;break t}y=w+1|0,F=F-(y<<S)|0,s[e>>2]=F,r=r-y|0}if(r>>>0<=126&&(S=S-A[r+9056|0]|0,s[e+8>>2]=S,r=A[r+9184|0]),s[e+4>>2]=r,y=$+1|0,N=s[(y<<2)+t>>2],G>>>0<=w>>>0){if(w=16,$=y,xe=N,(y|0)!=16)continue;break e}break}ce=A[xe+2|0];t:{if((S|0)>-1)break t;if(w=s[e+12>>2],w>>>0<zr[e+20>>2]){G=A[w|0]|A[w+1|0]<<8|(A[w+2|0]<<16|A[w+3|0]<<24),S=S+24|0,s[e+8>>2]=S,s[e+12>>2]=w+3,F=F<<24|(G>>>8&65280|(G<<8&16711680|G<<24))>>>8,s[e>>2]=F;break t}hn(e),F=s[e>>2],S=s[e+8>>2]}G=e,Ne=F>>>S|0,ce=W(r,ce)>>>8|0,w=ce,Ne>>>0>w>>>0&&(w=ce+1|0,s[e>>2]=F-(w<<S),w=r-w|0),w>>>0<=126&&(S=S-A[w+9056|0]|0,s[e+8>>2]=S,w=A[w+9184|0]),s[G+4>>2]=w;t:{if(Ne>>>0<=ce>>>0){G=1,xe=N+11|0;break t}G=Hn(e,xe),S=s[e+8>>2],xe=N+22|0}t:{if((S|0)>-1){r=S;break t}if(r=s[e+12>>2],r>>>0<zr[e+20>>2]){w=A[r|0]|A[r+1|0]<<8|(A[r+2|0]<<16|A[r+3|0]<<24),s[e+12>>2]=r+3,r=S+24|0,s[e+8>>2]=r,s[e>>2]=s[e>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break t}hn(e),r=s[e+8>>2]}if(S=r+-1|0,s[e+8>>2]=S,w=s[e+4>>2],F=w>>>1|0,ce=s[e>>2],N=F-(ce>>>r|0)>>31,w=w+N|1,s[e+4>>2]=w,s[e>>2]=ce-((N&F+1)<<r),_i[(A[$+5328|0]<<1)+v>>1]=W(s[((($|0)>0)<<2)+f>>2],(N^G)-N|0),!(($|0)<15))break}w=16}return w|0}function ss(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;e:{if((r|0)<0|(f|0)<1||(F=s[t+88>>2],(r+f|0)>(F|0)))break e;G=s[t>>2];t:{i:{if(s[e+2356>>2])break i;v=s[e+2344>>2];r:{if(v)break r;if(y=bl(1,0,144),s[e+2344>>2]=y,!y)break e;if(y=s[t+88>>2],w=y,v=y>>31,y=s[t>>2],v=ts(Jr(w,v,y,y>>31),yr,1),s[e+2360>>2]=v,!v||(s[e+2368>>2]=0,s[e+2364>>2]=v,w=s[e+2348>>2],S=s[e+2352>>2],y=s[e+2344>>2],uh(),s[y+136>>2]=v,s[y>>2]=s[t>>2],s[y+4>>2]=s[t+4>>2],S>>>0<2)||(v=A[w|0]&3,s[y+8>>2]=v,s[y+12>>2]=A[w|0]>>>2&3,N=A[w|0]>>>4&3,s[y+16>>2]=N,v>>>0>1|N>>>0>1|A[w|0]>63)||(v=S+-1|0,S=y+24|0,ud(S),r0(0,S),s[y- -64>>2]=y,s[y+24>>2]=s[t>>2],s[y+28>>2]=s[t+4>>2],s[y+96>>2]=s[t+72>>2],s[y+100>>2]=s[t+76>>2],s[y+104>>2]=s[t+80>>2],s[y+108>>2]=s[t+84>>2],s[y+112>>2]=s[t+88>>2],s[y+8>>2]?y=$a(y,w+1|0,v):y=v>>>0>=W(s[y+4>>2],s[y>>2])>>>0,!y))break t;if(v=s[e+2344>>2],s[v+16>>2]!=1){s[e+2372>>2]=0;break r}f=F-r|0}$=s[v+112>>2];r:{if(!s[v+8>>2]){S=s[v>>2],w=W(S,r),y=w+s[e+2364>>2]|0,F=(w+s[e+2348>>2]|0)+1|0,w=s[e+2368>>2];o:{l:{if(N=s[v+12>>2],N){if((f|0)<1)break o;if(Je[s[(N<<2)+10912>>2]](w,F,y,S),N=1,(f|0)!=1)break l;w=y;break o}if(v=0,(f|0)<=0)break o;for(;w=y,y=Sn(y,F,S),F=S+F|0,y=y+S|0,v=v+1|0,(v|0)!=(f|0););break o}for(;F=S+F|0,w=y+S|0,Je[s[(s[v+12>>2]<<2)+10912>>2]](y,F,w,S),y=w,N=N+1|0,(N|0)!=(f|0););}s[e+2368>>2]=w,f=r+f|0;break r}if(f=r+f|0,!Ko(v,f))break t}r:{if((f|0)>=($|0)){s[e+2356>>2]=1;break r}if(!s[e+2356>>2])break i}if(f=s[e+2344>>2],f&&(vh(s[f+20>>2]),s[f+20>>2]=0,gn(f)),s[e+2344>>2]=0,f=s[e+2372>>2],(f|0)<1)break i;if(w=s[t+76>>2],y=s[t+84>>2],!Ya(w+(s[e+2364>>2]+W(y,G)|0)|0,s[t+80>>2]-w|0,s[t+88>>2]-y|0,G,f))break t}return s[e+2364>>2]+W(r,G)|0}gn(s[e+2360>>2]),s[e+2360>>2]=0,s[e+2364>>2]=0,t=s[e+2344>>2],t&&(vh(s[t+20>>2]),s[t+20>>2]=0,gn(t)),s[e+2344>>2]=0}return 0}function Fl(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0;s[e+152>>2]=0,F=1;e:{t:{if(s[e+148>>2]>=1){if(!(Je[s[2558]](e+124|0)|0))break t;s[e+140>>2]=e+180,s[e+136>>2]=e,s[e+132>>2]=18,F=s[e+2308>>2]>0?3:2}s[e+156>>2]=F;break e}if(!vo(e,1,4941))return 0}w=s[e+288>>2],G=w<<2,r=s[e+148>>2],N=s[e+2308>>2],ce=(N|0)>0?W(G,(r|0)<1?1:2):0,xe=w<<5,$e=F<<4,gt=W(xe,(W($e+A[N+4863|0]|0,3)|0)/2|0),Ne=(w<<1)+2|0,At=W(W(w,(r|0)==2?2:1),800),v=0;e:{if(!s[e+2348>>2])break e;Bt=Jr(tr[e+50>>1],0,tr[e+48>>1],0),v=yr}Yt=v,r=0,f=G,y=f+xe|0,y>>>0<f>>>0&&(r=1),f=y,y=f+Ne|0,y>>>0<f>>>0&&(r=r+1|0),f=y,y=f+ce|0,y>>>0<f>>>0&&(r=r+1|0),f=y,y=f+At|0,y>>>0<f>>>0&&(r=r+1|0),f=y,y=f+gt|0,y>>>0<f>>>0&&(r=r+1|0),f=y,y=f+Bt|0,r=r+v|0,v=y,r=y>>>0<f>>>0?r+1|0:r,f=r,y=y+832|0,y>>>0<832&&(r=r+1|0);e:{if(!r&y>>>0>4294967264|r>>>0>0)break e;S=s[e+2288>>2];t:{i:{if(r=f,f=v+863|0,f>>>0<863&&(r=r+1|0),v=f,y=f,f=r,!r&y>>>0>zr[e+2292>>2]|r>>>0>0){if(gn(S),s[e+2292>>2]=0,S=ts(v,f,1),s[e+2288>>2]=S,!S)break i;s[e+2292>>2]=v,N=s[e+2308>>2]}s[e+2244>>2]=S,s[e+160>>2]=0,r=S+G|0,s[e+2252>>2]=r,r=r+xe|0,$=r+2|0,s[e+2256>>2]=$,r=r+Ne|0,y=ce?r:0,s[e+2260>>2]=y,s[e+172>>2]=y,r=r+ce|0,f=s[e+148>>2],(N|0)<1|(f|0)<1||(s[e+172>>2]=y+(w<<2)),r=r+31&-32,s[e+2264>>2]=r,r=r+832|0,s[e+2304>>2]=r,s[e+176>>2]=r,(f|0)==2&&(s[e+176>>2]=r+W(w,800)),s[e+152>>2]=0,v=w<<3,s[e+2284>>2]=v,y=w<<4,s[e+2280>>2]=y,r=r+At|0,s[e+2364>>2]=Bt|Yt?r+gt|0:0,f=A[N+4863|0],r=r+W(f,y)|0,s[e+2268>>2]=r,f=W(v,f>>>1|0),r=f+(r+W(y,$e)|0)|0,s[e+2272>>2]=r,s[e+2276>>2]=f+(r+(W(v,F)<<3)|0),yo($+-2|0,0,Ne),r=s[e+2256>>2]+-2|0,c[r|0]=0,c[r+1|0]=0,s[e+2296>>2]=0,s[e+2248>>2]=0,yo(s[e+2244>>2],0,G);break t}if(!vo(e,1,4971))break e}s[t+8>>2]=0,s[t+20>>2]=s[e+2268>>2],s[t+24>>2]=s[e+2272>>2],s[t+28>>2]=s[e+2276>>2],s[t+32>>2]=s[e+2280>>2],e=s[e+2284>>2],s[t+104>>2]=0,s[t+36>>2]=e,gl(),$=1}return $}function dl(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;F=br-16|0,br=F,N=2;e:{if(!f|((t|0)<1|(e|0)<1))break e;t:{if(!r)break t;i:{if(!s[r+8>>2]){y=t,v=e;break i}if(y=s[r+24>>2],(y|0)<1||(v=s[r+20>>2],(v|0)<1)||(w=s[r+16>>2],S=s[r+12>>2],(w|S)<0|((S&-2)+v|0)>(e|0)|((w&-2)+y|0)>(t|0)))break e}if(!s[r+28>>2]){t=y,e=v;break t}if(s[F+12>>2]=s[r+32>>2],s[F+8>>2]=s[r+36>>2],!Oe(v,y,F+12|0,F+8|0))break e;t=s[F+8>>2],e=s[F+12>>2]}if(s[f+8>>2]=t,s[f+4>>2]=e,(t|0)<1|(e|0)<1||(S=s[f>>2],S>>>0>12))break e;t:{if(s[f+80>>2]|s[f+12>>2]>0)break t;if(v=e,y=A[S+1157|0],Jr(e,0,y,0),yr)break e;w=t,xe=W(e,y),y=xe,y=Jr(t,0,y,y>>31),G=yr,N=1;i:{if(S>>>0<11){t=0,w=0,e=0;break i}v=Jr(v,0,w,0),w=(S|0)==12,$e=w?v:0,$=w?yr:0,Ne=(e+1|0)/2|0,v=Ne,t=(t+1|0)/2|0,t=Jr(v,v>>31,t,t>>31),w=w?e:0,e=yr}if(ce=t,e=e<<1|t>>>31,$=$+G|0,G=y+$e|0,G>>>0<y>>>0&&($=$+1|0),ce=ce<<1,v=ce+G|0,e=e+$|0,e=ts(v,v>>>0<G>>>0?e+1|0:e,1),!e)break e;if(s[f+16>>2]=e,s[f+80>>2]=e,S>>>0>=11){s[f+48>>2]=y,s[f+32>>2]=xe,s[f+52>>2]=t,s[f+36>>2]=Ne,s[f+56>>2]=t,s[f+40>>2]=Ne,e=e+y|0,s[f+20>>2]=e,s[f+24>>2]=e+t,(S|0)==12&&(s[f+28>>2]=e+ce),s[f+44>>2]=w,s[f+60>>2]=$e;break t}s[f+24>>2]=y,s[f+20>>2]=xe}if(N=go(f),N|!r)break e;if(!s[r+48>>2]){N=0;break e}if(e=s[f+8>>2]+-1|0,zr[f>>2]<=10){N=0,r=f+20|0,t=s[r>>2],s[r>>2]=0-t,s[f+16>>2]=s[f+16>>2]+W(e,t);break e}if(N=0,r=f+32|0,t=s[r>>2],s[r>>2]=0-t,y=f+36|0,r=s[y>>2],s[y>>2]=0-r,v=f+40|0,y=s[v>>2],s[v>>2]=0-y,s[f+16>>2]=s[f+16>>2]+W(e,t),t=f+20|0,v=t,w=s[t>>2],t=e>>1,s[v>>2]=w+W(t,r),r=f+24|0,s[r>>2]=s[r>>2]+W(t,y),r=s[f+28>>2],!r)break e;y=f+44|0,t=s[y>>2],s[y>>2]=0-t,s[f+28>>2]=r+W(e,t)}return br=F+16|0,N}function pa(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0;for(w=br+-64|0,y=_i[e+16>>1],v=_i[e>>1],S=y+v|0,r=_i[e+8>>1],f=_i[e+24>>1],F=((W(r,20091)>>16)+r|0)+(W(f,35468)>>16)|0,s[w+12>>2]=S-F,y=v-y|0,r=((W(r,35468)>>16)-f|0)-(W(f,20091)>>16)|0,s[w+8>>2]=y-r,s[w+4>>2]=r+y,s[w>>2]=S+F,y=_i[e+18>>1],v=_i[e+2>>1],S=y+v|0,r=_i[e+10>>1],f=_i[e+26>>1],F=((W(r,20091)>>16)+r|0)+(W(f,35468)>>16)|0,s[w+28>>2]=S-F,y=v-y|0,r=((W(r,35468)>>16)-f|0)-(W(f,20091)>>16)|0,s[w+24>>2]=y-r,s[w+20>>2]=r+y,r=S+F|0,s[w+16>>2]=r,v=_i[e+20>>1],S=_i[e+4>>1],F=v+S|0,f=_i[e+12>>1],y=_i[e+28>>1],N=((W(f,20091)>>16)+f|0)+(W(y,35468)>>16)|0,s[w+44>>2]=F-N,v=S-v|0,f=((W(f,35468)>>16)-y|0)-(W(y,20091)>>16)|0,s[w+40>>2]=v-f,s[w+36>>2]=f+v,s[w+32>>2]=F+N,y=_i[e+22>>1],v=_i[e+6>>1],S=y+v|0,f=_i[e+14>>1],e=_i[e+30>>1],F=((W(f,20091)>>16)+f|0)+(W(e,35468)>>16)|0,s[w+60>>2]=S-F,y=v-y|0,e=((W(f,35468)>>16)-e|0)-(W(e,20091)>>16)|0,s[w+56>>2]=y-e,s[w+52>>2]=e+y,s[w+48>>2]=S+F,e=w,w=0;;){if(f=s[e+48>>2],y=((W(r,20091)>>16)+r|0)+(W(f,35468)>>16)|0,v=s[e>>2]+4|0,S=s[e+32>>2],F=v+S|0,N=A[t|0]+(y+F>>3)|0,N=(N|0)>0?N:0,c[t|0]=(N|0)<255?N:255,r=((W(r,35468)>>16)-f|0)-(W(f,20091)>>16)|0,f=v-S|0,v=A[t+1|0]+(r+f>>3)|0,v=(v|0)>0?v:0,c[t+1|0]=(v|0)<255?v:255,r=A[t+2|0]+(f-r>>3)|0,r=(r|0)>0?r:0,c[t+2|0]=(r|0)<255?r:255,r=A[t+3|0]+(F-y>>3)|0,r=(r|0)>0?r:0,c[t+3|0]=(r|0)<255?r:255,w=w+1|0,(w|0)!=4){t=t+32|0,r=s[e+20>>2],e=e+4|0;continue}break}}function Bl(e){e=e|0;var t=0;t=Jr(A[e+31|0],0,16843009,16843009),c[e+32|0]=t,c[e+33|0]=t>>>8,c[e+34|0]=t>>>16,c[e+35|0]=t>>>24,t=yr,c[e+36|0]=t,c[e+37|0]=t>>>8,c[e+38|0]=t>>>16,c[e+39|0]=t>>>24,t=Jr(A[e+63|0],0,16843009,16843009),c[e+64|0]=t,c[e+65|0]=t>>>8,c[e+66|0]=t>>>16,c[e+67|0]=t>>>24,t=yr,c[e+68|0]=t,c[e+69|0]=t>>>8,c[e+70|0]=t>>>16,c[e+71|0]=t>>>24,t=Jr(A[e+95|0],0,16843009,16843009),c[e+96|0]=t,c[e+97|0]=t>>>8,c[e+98|0]=t>>>16,c[e+99|0]=t>>>24,t=yr,c[e+100|0]=t,c[e+101|0]=t>>>8,c[e+102|0]=t>>>16,c[e+103|0]=t>>>24,t=Jr(A[e+127|0],0,16843009,16843009),c[e+128|0]=t,c[e+129|0]=t>>>8,c[e+130|0]=t>>>16,c[e+131|0]=t>>>24,t=yr,c[e+132|0]=t,c[e+133|0]=t>>>8,c[e+134|0]=t>>>16,c[e+135|0]=t>>>24,t=Jr(A[e+159|0],0,16843009,16843009),c[e+160|0]=t,c[e+161|0]=t>>>8,c[e+162|0]=t>>>16,c[e+163|0]=t>>>24,t=yr,c[e+164|0]=t,c[e+165|0]=t>>>8,c[e+166|0]=t>>>16,c[e+167|0]=t>>>24,t=Jr(A[e+191|0],0,16843009,16843009),c[e+192|0]=t,c[e+193|0]=t>>>8,c[e+194|0]=t>>>16,c[e+195|0]=t>>>24,t=yr,c[e+196|0]=t,c[e+197|0]=t>>>8,c[e+198|0]=t>>>16,c[e+199|0]=t>>>24,t=Jr(A[e+223|0],0,16843009,16843009),c[e+224|0]=t,c[e+225|0]=t>>>8,c[e+226|0]=t>>>16,c[e+227|0]=t>>>24,t=yr,c[e+228|0]=t,c[e+229|0]=t>>>8,c[e+230|0]=t>>>16,c[e+231|0]=t>>>24,t=Jr(A[e+-1|0],0,16843009,16843009),c[e|0]=t,c[e+1|0]=t>>>8,c[e+2|0]=t>>>16,c[e+3|0]=t>>>24,t=yr,c[e+4|0]=t,c[e+5|0]=t>>>8,c[e+6|0]=t>>>16,c[e+7|0]=t>>>24}function as(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0;e:{if((r|0)!=1){for(;f=A[t|0]+(A[e|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t|0]=(f|0)<255?f:255,f=A[t+1|0]+(A[e+1|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+1|0]=(f|0)<255?f:255,f=A[t+2|0]+(A[e+2|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+2|0]=(f|0)<255?f:255,f=A[t+3|0]+(A[e+3|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+3|0]=(f|0)<255?f:255,f=A[t+4|0]+(A[e+4|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+4|0]=(f|0)<255?f:255,f=A[t+5|0]+(A[e+5|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+5|0]=(f|0)<255?f:255,f=A[t+6|0]+(A[e+6|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+6|0]=(f|0)<255?f:255,f=A[t+7|0]+(A[e+7|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+7|0]=(f|0)<255?f:255,e=e+8|0,t=t+r|0,y=y+1|0,(y|0)!=8;);break e}for(y=A[t+6|0];f=A[t|0]+(A[e|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t|0]=(f|0)<255?f:255,f=A[t+1|0]+(A[e+1|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+1|0]=(f|0)<255?f:255,f=A[t+2|0]+(A[e+2|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+2|0]=(f|0)<255?f:255,f=A[t+3|0]+(A[e+3|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+3|0]=(f|0)<255?f:255,f=A[t+4|0]+(A[e+4|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+4|0]=(f|0)<255?f:255,f=A[t+5|0]+(A[e+5|0]+-120>>4)|0,f=(f|0)>0?f:0,c[t+5|0]=(f|0)<255?f:255,y=(y&255)+(A[e+6|0]+-120>>4)|0,y=(y|0)>0?y:0,c[t+6|0]=(y|0)<255?y:255,y=A[t+7|0]+(A[e+7|0]+-120>>4)|0,y=(y|0)>0?y:0,y=(y|0)<255?y:255,c[t+7|0]=y,e=e+8|0,t=t+r|0,v=v+1|0,(v|0)!=8;);}}function Rl(e){e=e|0;var t=0,r=0;t=Jr((A[e+223|0]+(A[e+-25|0]+(A[e+191|0]+(A[e+-26|0]+(A[e+159|0]+(A[e+-27|0]+(A[e+127|0]+(A[e+-28|0]+(A[e+95|0]+(A[e+-29|0]+(A[e+63|0]+(A[e+-30|0]+(A[e+31|0]+(A[e+-31|0]+(A[e+-32|0]+A[e+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),c[e+224|0]=t,c[e+225|0]=t>>>8,c[e+226|0]=t>>>16,c[e+227|0]=t>>>24,r=yr,c[e+228|0]=r,c[e+229|0]=r>>>8,c[e+230|0]=r>>>16,c[e+231|0]=r>>>24,c[e+192|0]=t,c[e+193|0]=t>>>8,c[e+194|0]=t>>>16,c[e+195|0]=t>>>24,c[e+196|0]=r,c[e+197|0]=r>>>8,c[e+198|0]=r>>>16,c[e+199|0]=r>>>24,c[e+160|0]=t,c[e+161|0]=t>>>8,c[e+162|0]=t>>>16,c[e+163|0]=t>>>24,c[e+164|0]=r,c[e+165|0]=r>>>8,c[e+166|0]=r>>>16,c[e+167|0]=r>>>24,c[e+128|0]=t,c[e+129|0]=t>>>8,c[e+130|0]=t>>>16,c[e+131|0]=t>>>24,c[e+132|0]=r,c[e+133|0]=r>>>8,c[e+134|0]=r>>>16,c[e+135|0]=r>>>24,c[e+96|0]=t,c[e+97|0]=t>>>8,c[e+98|0]=t>>>16,c[e+99|0]=t>>>24,c[e+100|0]=r,c[e+101|0]=r>>>8,c[e+102|0]=r>>>16,c[e+103|0]=r>>>24,c[e+64|0]=t,c[e+65|0]=t>>>8,c[e+66|0]=t>>>16,c[e+67|0]=t>>>24,c[e+68|0]=r,c[e+69|0]=r>>>8,c[e+70|0]=r>>>16,c[e+71|0]=r>>>24,c[e+32|0]=t,c[e+33|0]=t>>>8,c[e+34|0]=t>>>16,c[e+35|0]=t>>>24,c[e+36|0]=r,c[e+37|0]=r>>>8,c[e+38|0]=r>>>16,c[e+39|0]=r>>>24,c[e|0]=t,c[e+1|0]=t>>>8,c[e+2|0]=t>>>16,c[e+3|0]=t>>>24,c[e+4|0]=r,c[e+5|0]=r>>>8,c[e+6|0]=r>>>16,c[e+7|0]=r>>>24}function Pa(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0;e:{if(r=s[t+48>>2],!r||Je[r|0](t)|0)break e;return vo(e,6,4844),s[e>>2]}e:{t:{i:{r:{if(s[t+68>>2]){s[e+2308>>2]=0,r=0;break r}if(r=2,v=s[e+2308>>2],f=A[v+4863|0],(v|0)==2)break i;r=v}if(v=s[t+76>>2]-f|0,s[e+296>>2]=v>>4,y=s[t+84>>2]-f|0,s[e+300>>2]=y>>4,(v|0)<=-1&&(s[e+296>>2]=0),(y|0)>-1)break e;v=e+300|0;break t}s[e+296>>2]=0,v=e+300|0}s[v>>2]=0}if(f=f+15|0,v=f+s[t+88>>2]>>4,s[e+308>>2]=v,y=s[e+288>>2],t=f+s[t+80>>2]>>4,s[e+304>>2]=(t|0)>(y|0)?y:t,t=s[e+292>>2],(v|0)>(t|0)&&(s[e+308>>2]=t),(r|0)>=1)for(N=s[e+68>>2],G=s[e+104>>2],v=0;;){t=(v<<3)+e|0;e:{if(G){if(r=c[(e+v|0)+120|0],f=r,s[e+112>>2])break e;f=r+s[e+60>>2]|0;break e}f=s[e+60>>2]}r=f,w=t+2312|0,r=N?s[e+72>>2]+r|0:r;e:{if((r|0)>=1){y=(r|0)<63?r:63,r=(r|0)>0?y:0,F=t+2313|0,S=s[e+64>>2],(S|0)>=1&&(y=9-S|0,S=r>>>((S|0)>4?2:1)|0,y=(S|0)>(y|0)?y:S),y=(y|0)>1?y:1,c[F|0]=y,c[w|0]=y+(r<<1),c[t+2315|0]=(r|0)>39?2:(r|0)>14;break e}c[w|0]=0}c[t+2314|0]=0,y=t+2316|0,f=N?s[e+88>>2]+(s[e+72>>2]+f|0)|0:f,w=(f|0)>0;e:{if(!w){c[y|0]=0;break e}r=(f|0)<63?f:63,f=w?r:0,F=t+2317|0,w=s[e+64>>2],(w|0)>=1&&(r=9-w|0,w=f>>>((w|0)>4?2:1)|0,r=(w|0)>(r|0)?r:w),r=(r|0)>1?r:1,c[F|0]=r,c[y|0]=r+(f<<1),c[t+2319|0]=(f|0)>39?2:(f|0)>14}if(c[t+2318|0]=1,v=v+1|0,(v|0)==4)break}return 0}function pl(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;f=br+-64|0,y=_i[e+24>>1],r=_i[e>>1],v=y+r|0,S=_i[e+16>>1],F=_i[e+8>>1],w=S+F|0,s[f+32>>2]=v-w,y=r-y|0,r=F-S|0,s[f+48>>2]=y-r,s[f+16>>2]=r+y,ce=v+w|0,s[f>>2]=ce,y=_i[e+26>>1],r=_i[e+2>>1],v=y+r|0,S=_i[e+18>>1],F=_i[e+10>>1],w=S+F|0,s[f+36>>2]=v-w,y=r-y|0,r=F-S|0,s[f+52>>2]=y-r,y=r+y|0,s[f+20>>2]=y,r=v+w|0,s[f+4>>2]=r,v=_i[e+4>>1],S=_i[e+28>>1],F=v-S|0,w=_i[e+12>>1],N=_i[e+20>>1],G=w-N|0,s[f+56>>2]=F-G,w=w+N|0,S=v+S|0,v=w+S|0,s[f+8>>2]=v,S=S-w|0,s[f+40>>2]=S,F=F+G|0,s[f+24>>2]=F,w=_i[e+30>>1],N=_i[e+6>>1],G=w+N|0,$=_i[e+22>>1],xe=_i[e+14>>1],Ne=$+xe|0,e=G+Ne|0,s[f+12>>2]=e,$e=N-w|0,$=xe-$|0,w=$e-$|0,s[f+60>>2]=w,N=G-Ne|0,s[f+44>>2]=N,G=$+$e|0,s[f+28>>2]=G,ce=ce+3|0,$=ce-e|0,xe=r-v|0,_i[t+96>>1]=$-xe>>>3,e=e+ce|0,r=r+v|0,_i[t+64>>1]=e-r>>>3,_i[t+32>>1]=$+xe>>>3,_i[t>>1]=e+r>>>3,e=s[f+16>>2]+3|0,r=e-G|0,v=y-F|0,_i[t+224>>1]=r-v>>>3,e=e+G|0,y=y+F|0,_i[t+192>>1]=e-y>>>3,_i[t+160>>1]=r+v>>>3,_i[t+128>>1]=e+y>>>3,e=s[f+32>>2]+3|0,y=e-N|0,r=s[f+36>>2],v=r-S|0,_i[t+352>>1]=y-v>>>3,e=e+N|0,r=r+S|0,_i[t+320>>1]=e-r>>>3,_i[t+288>>1]=y+v>>>3,_i[t+256>>1]=e+r>>>3,e=s[f+48>>2]+3|0,y=e-w|0,r=s[f+52>>2],f=s[f+56>>2],v=r-f|0,_i[t+480>>1]=y-v>>>3,e=e+w|0,f=f+r|0,_i[t+448>>1]=e-f>>>3,_i[t+416>>1]=y+v>>>3,_i[t+384>>1]=e+f>>>3}function ia(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0;for(Ne=t+904|0;;){for(S=0;;){for(F=0;;){for(v=0;;){$=W(F,11),ce=W(S,33),G=W(N,264),w=A[($+(ce+(G+1392|0)|0)|0)+v|0],$e=s[e+4>>2],r=s[e+8>>2];e:{if((r|0)>-1)break e;if(f=s[e+12>>2],f>>>0<zr[e+20>>2]){y=A[f|0]|A[f+1|0]<<8|(A[f+2|0]<<16|A[f+3|0]<<24),s[e+12>>2]=f+3,r=r+24|0,s[e+8>>2]=r,s[e>>2]=s[e>>2]<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8;break e}hn(e),r=s[e+8>>2]}xe=e,gt=r,f=s[e>>2],w=W(w,$e)>>>8|0,y=f>>>r>>>0<=w>>>0;e:{if(!y){s[e>>2]=f+((w^-1)<<r),r=$e-w|0;break e}r=w+1|0}f=fn(r)^24,s[xe+8>>2]=gt-f,s[e+4>>2]=(r<<f)+-1,xe=(((t+G|0)+ce|0)+$|0)+v|0;e:{if(!y){r=an(e,8);break e}r=A[(((G+2448|0)+ce|0)+$|0)+v|0]}if(c[xe+907|0]=r,v=v+1|0,(v|0)==11)break}if(F=F+1|0,(F|0)==3)break}if(S=S+1|0,(S|0)==8)break}if(r=W(N,68)+Ne|0,y=G+Ne|0,v=y+3|0,s[r+1124>>2]=v,s[r+1120>>2]=y+234,f=y+201|0,s[r+1116>>2]=f,s[r+1112>>2]=f,s[r+1108>>2]=f,s[r+1104>>2]=f,s[r+1100>>2]=f,s[r+1096>>2]=f,s[r+1092>>2]=f,s[r+1088>>2]=f,s[r+1084>>2]=y+168,s[r+1080>>2]=y+135,s[r+1076>>2]=f,s[r+1072>>2]=y+102,s[r+1068>>2]=y+69,s[r+1064>>2]=y+36,s[r+1060>>2]=v,N=N+1|0,(N|0)==4)break}r=an(e,1),s[t+2236>>2]=r,r&&(At=t,Bt=an(e,8),c[At+2240|0]=Bt)}function Ja(e){e=e|0;var t=0,r=0;t=e,e=Jr((A[t+-25|0]+(A[t+-26|0]+(A[t+-27|0]+(A[t+-28|0]+(A[t+-29|0]+(A[t+-30|0]+(A[t+-32|0]+A[t+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),c[t+224|0]=e,c[t+225|0]=e>>>8,c[t+226|0]=e>>>16,c[t+227|0]=e>>>24,r=yr,c[t+228|0]=r,c[t+229|0]=r>>>8,c[t+230|0]=r>>>16,c[t+231|0]=r>>>24,c[t+192|0]=e,c[t+193|0]=e>>>8,c[t+194|0]=e>>>16,c[t+195|0]=e>>>24,c[t+196|0]=r,c[t+197|0]=r>>>8,c[t+198|0]=r>>>16,c[t+199|0]=r>>>24,c[t+160|0]=e,c[t+161|0]=e>>>8,c[t+162|0]=e>>>16,c[t+163|0]=e>>>24,c[t+164|0]=r,c[t+165|0]=r>>>8,c[t+166|0]=r>>>16,c[t+167|0]=r>>>24,c[t+128|0]=e,c[t+129|0]=e>>>8,c[t+130|0]=e>>>16,c[t+131|0]=e>>>24,c[t+132|0]=r,c[t+133|0]=r>>>8,c[t+134|0]=r>>>16,c[t+135|0]=r>>>24,c[t+96|0]=e,c[t+97|0]=e>>>8,c[t+98|0]=e>>>16,c[t+99|0]=e>>>24,c[t+100|0]=r,c[t+101|0]=r>>>8,c[t+102|0]=r>>>16,c[t+103|0]=r>>>24,c[t+64|0]=e,c[t+65|0]=e>>>8,c[t+66|0]=e>>>16,c[t+67|0]=e>>>24,c[t+68|0]=r,c[t+69|0]=r>>>8,c[t+70|0]=r>>>16,c[t+71|0]=r>>>24,c[t+32|0]=e,c[t+33|0]=e>>>8,c[t+34|0]=e>>>16,c[t+35|0]=e>>>24,c[t+36|0]=r,c[t+37|0]=r>>>8,c[t+38|0]=r>>>16,c[t+39|0]=r>>>24,c[t|0]=e,c[t+1|0]=e>>>8,c[t+2|0]=e>>>16,c[t+3|0]=e>>>24,c[t+4|0]=r,c[t+5|0]=r>>>8,c[t+6|0]=r>>>16,c[t+7|0]=r>>>24}function ec(e){e=e|0;var t=0,r=0;t=e,e=Jr((A[t+223|0]+(A[t+191|0]+(A[t+159|0]+(A[t+127|0]+(A[t+95|0]+(A[t+63|0]+(A[t+-1|0]+A[t+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),c[t+224|0]=e,c[t+225|0]=e>>>8,c[t+226|0]=e>>>16,c[t+227|0]=e>>>24,r=yr,c[t+228|0]=r,c[t+229|0]=r>>>8,c[t+230|0]=r>>>16,c[t+231|0]=r>>>24,c[t+192|0]=e,c[t+193|0]=e>>>8,c[t+194|0]=e>>>16,c[t+195|0]=e>>>24,c[t+196|0]=r,c[t+197|0]=r>>>8,c[t+198|0]=r>>>16,c[t+199|0]=r>>>24,c[t+160|0]=e,c[t+161|0]=e>>>8,c[t+162|0]=e>>>16,c[t+163|0]=e>>>24,c[t+164|0]=r,c[t+165|0]=r>>>8,c[t+166|0]=r>>>16,c[t+167|0]=r>>>24,c[t+128|0]=e,c[t+129|0]=e>>>8,c[t+130|0]=e>>>16,c[t+131|0]=e>>>24,c[t+132|0]=r,c[t+133|0]=r>>>8,c[t+134|0]=r>>>16,c[t+135|0]=r>>>24,c[t+96|0]=e,c[t+97|0]=e>>>8,c[t+98|0]=e>>>16,c[t+99|0]=e>>>24,c[t+100|0]=r,c[t+101|0]=r>>>8,c[t+102|0]=r>>>16,c[t+103|0]=r>>>24,c[t+64|0]=e,c[t+65|0]=e>>>8,c[t+66|0]=e>>>16,c[t+67|0]=e>>>24,c[t+68|0]=r,c[t+69|0]=r>>>8,c[t+70|0]=r>>>16,c[t+71|0]=r>>>24,c[t+32|0]=e,c[t+33|0]=e>>>8,c[t+34|0]=e>>>16,c[t+35|0]=e>>>24,c[t+36|0]=r,c[t+37|0]=r>>>8,c[t+38|0]=r>>>16,c[t+39|0]=r>>>24,c[t|0]=e,c[t+1|0]=e>>>8,c[t+2|0]=e>>>16,c[t+3|0]=e>>>24,c[t+4|0]=r,c[t+5|0]=r>>>8,c[t+6|0]=r>>>16,c[t+7|0]=r>>>24}function tc(e){var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;e:{t:{if(e){if(v=s[e+8>>2],G=s[v+40>>2],s[e+4>>2]){if(s[e+12>>2]=s[G>>2],!sa(s[G+20>>2],v,3))return s[e>>2]=2,uo(e),0;if(t=s[e+104>>2],r=t,y=t>>31,t=s[e+100>>2],w=Jr(r,y,t,t>>31),r=yr,F=s[v>>2],y=F,t=y>>31,t=t<<4|y>>>28,y=y<<4,N=e,S=t,t=y,y=F&65535,f=y,t=t+f|0,t>>>0<f>>>0&&(S=S+1|0),f=t+w|0,r=r+S|0,t=ts(f,f>>>0<t>>>0?r+1|0:r,4),s[N+16>>2]=t,!t){s[e+20>>2]=0;break e}s[e+20>>2]=(t+(w<<2)|0)+(y<<2);i:{r:{if(s[v+92>>2]){if($=s[v+100>>2],F=s[v+16>>2],y=s[v+12>>2],w=s[v+96>>2],r=w,t=r>>31,f=r,r=t,t=t<<5|f>>>27,S=r<<2|f>>>30,N=f<<5,r=f<<2,f=N+r|0,t=t+S|0,t=f>>>0<r>>>0?t+1|0:t,r=f+84|0,r>>>0<84&&(t=t+1|0),t=ts(r,t,1),!t){s[e>>2]=1;break t}if(s[e+268>>2]=t,s[e+264>>2]=t,r=t,t=t+84|0,Da(r,y,F,t+N|0,w,$,0,4,t),s[v+92>>2])break r}if(t=s[s[e+12>>2]>>2],t+-7>>>0>3)break i}Eu(),t=s[s[e+12>>2]>>2]}i:{if(t>>>0<11||(zs(),!s[s[e+12>>2]+28>>2]))break i;Eu()}i:{if(!s[e+56>>2]|s[e+120>>2]<1||(t=e+136|0,s[t>>2])||wl(t,s[e+132>>2]))break i;break e}s[e+4>>2]=0}if(!hl(e,s[e+16>>2],s[e+100>>2],s[e+104>>2],s[v+88>>2],2))break t;s[G+16>>2]=s[e+116>>2],e=1}else e=0;return e}return uo(e),0}return s[e>>2]=1,uo(e),0}function Ka(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0;y=_i[e+2>>1],w=(W(y,20091)>>16)+y|0,f=_i[e+8>>1],S=W(f,35468)>>16,v=_i[e>>1]+4|0,r=S+v|0,e=A[t+32|0]+(w+r>>3)|0,e=(e|0)>0?e:0,c[t+32|0]=(e|0)<255?e:255,e=W(y,35468)>>16,y=A[t+33|0]+(e+r>>3)|0,y=(y|0)>0?y:0,c[t+33|0]=(y|0)<255?y:255,y=A[t+34|0]+(r-e>>3)|0,y=(y|0)>0?y:0,c[t+34|0]=(y|0)<255?y:255,r=A[t+35|0]+(r-w>>3)|0,r=(r|0)>0?r:0,c[t+35|0]=(r|0)<255?r:255,y=f+(W(f,20091)>>16)|0,r=y+v|0,f=A[t|0]+(r+w>>3)|0,f=(f|0)>0?f:0,c[t|0]=(f|0)<255?f:255,f=A[t+1|0]+(e+r>>3)|0,f=(f|0)>0?f:0,c[t+1|0]=(f|0)<255?f:255,f=A[t+2|0]+(r-e>>3)|0,f=(f|0)>0?f:0,c[t+2|0]=(f|0)<255?f:255,r=A[t+3|0]+(r-w>>3)|0,r=(r|0)>0?r:0,c[t+3|0]=(r|0)<255?r:255,r=v-S|0,f=A[t+64|0]+(r+w>>3)|0,f=(f|0)>0?f:0,c[t+64|0]=(f|0)<255?f:255,f=A[t+65|0]+(e+r>>3)|0,f=(f|0)>0?f:0,c[t+65|0]=(f|0)<255?f:255,f=A[t+66|0]+(r-e>>3)|0,f=(f|0)>0?f:0,c[t+66|0]=(f|0)<255?f:255,r=A[t+67|0]+(r-w>>3)|0,r=(r|0)>0?r:0,c[t+67|0]=(r|0)<255?r:255,v=v-y|0,r=A[t+96|0]+(v+w>>3)|0,r=(r|0)>0?r:0,c[t+96|0]=(r|0)<255?r:255,r=A[t+97|0]+(e+v>>3)|0,r=(r|0)>0?r:0,c[t+97|0]=(r|0)<255?r:255,e=A[t+98|0]+(v-e>>3)|0,e=(e|0)>0?e:0,c[t+98|0]=(e|0)<255?e:255,e=A[t+99|0]+(v-w>>3)|0,e=(e|0)>0?e:0,c[t+99|0]=(e|0)<255?e:255}function ls(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(N=y<<1&-4,N){for(N=f+N|0;S=W(A[e|0],19077)>>>8|0,v=A[r|0],F=S+(W(v,26149)>>>8|0)|0,w=F+-14234|0,G=(w>>>0<16384?w>>>6|0:F>>>0<14234?0:248)&248,F=A[t|0],v=S-(W(F,6419)>>>8|0)-(W(v,13320)>>>8)|0,w=v+8708|0,v=w>>>0<16384?w>>6:(v|0)<-8708?0:255,c[f|0]=G|v>>>5,w=v<<3&224,S=S+(W(F,33050)>>>8|0)|0,v=S+-17685|0,c[f+1|0]=w|(v>>>0<16384?v>>>9|0:S>>>0<17685?0:31),S=W(A[e+1|0],19077)>>>8|0,v=A[r|0],F=S+(W(v,26149)>>>8|0)|0,w=F+-14234|0,G=(w>>>0<16384?w>>>6|0:F>>>0<14234?0:248)&248,F=A[t|0],v=S-(W(F,6419)>>>8|0)-(W(v,13320)>>>8)|0,w=v+8708|0,v=w>>>0<16384?w>>6:(v|0)<-8708?0:255,c[f+2|0]=G|v>>>5,w=v<<3&224,S=S+(W(F,33050)>>>8|0)|0,v=S+-17685|0,c[f+3|0]=w|(v>>>0<16384?v>>>9|0:S>>>0<17685?0:31),r=r+1|0,t=t+1|0,e=e+2|0,f=f+4|0,(N|0)!=(f|0););f=N}y&1&&(e=W(A[e|0],19077)>>>8|0,r=A[r|0],y=e+(W(r,26149)>>>8|0)|0,N=y+-14234|0,N=(N>>>0<16384?N>>>6|0:y>>>0<14234?0:248)&248,t=A[t|0],r=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,y=r+8708|0,r=y>>>0<16384?y>>6:(r|0)<-8708?0:255,c[f|0]=N|r>>>5,e=e+(W(t,33050)>>>8|0)|0,t=e+-17685|0,c[f+1|0]=r<<3&224|(t>>>0<16384?t>>>9|0:e>>>0<17685?0:31))}function ra(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(v=y<<2&-8,v){for(v=f+v|0;w=A[r|0],S=A[t|0],F=A[e|0],c[f+3|0]=255,F=W(F,19077)>>>8|0,N=F+(W(S,33050)>>>8|0)|0,G=N+-17685|0,c[f+2|0]=G>>>0<16384?G>>>6|0:N>>>0<17685?0:255,N=F+(W(w,26149)>>>8|0)|0,G=N+-14234|0,c[f|0]=G>>>0<16384?G>>>6|0:N>>>0<14234?0:255,w=F-(W(S,6419)>>>8|0)-(W(w,13320)>>>8)|0,S=w+8708|0,c[f+1|0]=S>>>0<16384?S>>>6|0:(w|0)<-8708?0:255,w=A[r|0],S=A[t|0],F=A[e+1|0],c[f+7|0]=255,F=W(F,19077)>>>8|0,N=F+(W(S,33050)>>>8|0)|0,G=N+-17685|0,c[f+6|0]=G>>>0<16384?G>>>6|0:N>>>0<17685?0:255,N=F+(W(w,26149)>>>8|0)|0,G=N+-14234|0,c[f+4|0]=G>>>0<16384?G>>>6|0:N>>>0<14234?0:255,w=F-(W(S,6419)>>>8|0)-(W(w,13320)>>>8)|0,S=w+8708|0,c[f+5|0]=S>>>0<16384?S>>>6|0:(w|0)<-8708?0:255,r=r+1|0,t=t+1|0,e=e+2|0,f=f+8|0,(v|0)!=(f|0););f=v}y&1&&(r=A[r|0],t=A[t|0],e=A[e|0],c[f+3|0]=255,e=W(e,19077)>>>8|0,y=e+(W(t,33050)>>>8|0)|0,v=y+-17685|0,c[f+2|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,y=e+(W(r,26149)>>>8|0)|0,v=y+-14234|0,c[f|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,e=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[f+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255)}function na(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(v=y<<2&-8,v){for(v=f+v|0;w=A[t|0],S=A[r|0],F=A[e|0],c[f+3|0]=255,F=W(F,19077)>>>8|0,N=F+(W(S,26149)>>>8|0)|0,G=N+-14234|0,c[f+2|0]=G>>>0<16384?G>>>6|0:N>>>0<14234?0:255,N=F+(W(w,33050)>>>8|0)|0,G=N+-17685|0,c[f|0]=G>>>0<16384?G>>>6|0:N>>>0<17685?0:255,w=F-(W(w,6419)>>>8|0)-(W(S,13320)>>>8)|0,S=w+8708|0,c[f+1|0]=S>>>0<16384?S>>>6|0:(w|0)<-8708?0:255,w=A[t|0],S=A[r|0],F=A[e+1|0],c[f+7|0]=255,F=W(F,19077)>>>8|0,N=F+(W(S,26149)>>>8|0)|0,G=N+-14234|0,c[f+6|0]=G>>>0<16384?G>>>6|0:N>>>0<14234?0:255,N=F+(W(w,33050)>>>8|0)|0,G=N+-17685|0,c[f+4|0]=G>>>0<16384?G>>>6|0:N>>>0<17685?0:255,w=F-(W(w,6419)>>>8|0)-(W(S,13320)>>>8)|0,S=w+8708|0,c[f+5|0]=S>>>0<16384?S>>>6|0:(w|0)<-8708?0:255,r=r+1|0,t=t+1|0,e=e+2|0,f=f+8|0,(v|0)!=(f|0););f=v}y&1&&(t=A[t|0],r=A[r|0],e=A[e|0],c[f+3|0]=255,e=W(e,19077)>>>8|0,y=e+(W(r,26149)>>>8|0)|0,v=y+-14234|0,c[f+2|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,y=e+(W(t,33050)>>>8|0)|0,v=y+-17685|0,c[f|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,e=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[f+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255)}function Ps(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(v=y<<2&-8,v){for(v=f+v|0;w=A[r|0],S=A[t|0],F=A[e|0],c[f|0]=255,F=W(F,19077)>>>8|0,N=F+(W(S,33050)>>>8|0)|0,G=N+-17685|0,c[f+3|0]=G>>>0<16384?G>>>6|0:N>>>0<17685?0:255,N=F+(W(w,26149)>>>8|0)|0,G=N+-14234|0,c[f+1|0]=G>>>0<16384?G>>>6|0:N>>>0<14234?0:255,w=F-(W(S,6419)>>>8|0)-(W(w,13320)>>>8)|0,S=w+8708|0,c[f+2|0]=S>>>0<16384?S>>>6|0:(w|0)<-8708?0:255,w=A[r|0],S=A[t|0],F=A[e+1|0],c[f+4|0]=255,F=W(F,19077)>>>8|0,N=F+(W(S,33050)>>>8|0)|0,G=N+-17685|0,c[f+7|0]=G>>>0<16384?G>>>6|0:N>>>0<17685?0:255,N=F+(W(w,26149)>>>8|0)|0,G=N+-14234|0,c[f+5|0]=G>>>0<16384?G>>>6|0:N>>>0<14234?0:255,w=F-(W(S,6419)>>>8|0)-(W(w,13320)>>>8)|0,S=w+8708|0,c[f+6|0]=S>>>0<16384?S>>>6|0:(w|0)<-8708?0:255,r=r+1|0,t=t+1|0,e=e+2|0,f=f+8|0,(v|0)!=(f|0););f=v}y&1&&(r=A[r|0],t=A[t|0],e=A[e|0],c[f|0]=255,e=W(e,19077)>>>8|0,y=e+(W(t,33050)>>>8|0)|0,v=y+-17685|0,c[f+3|0]=v>>>0<16384?v>>>6|0:y>>>0<17685?0:255,y=e+(W(r,26149)>>>8|0)|0,v=y+-14234|0,c[f+1|0]=v>>>0<16384?v>>>6|0:y>>>0<14234?0:255,e=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[f+2|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255)}function Do(e){e=e|0,c[e+224|0]=-2139062144,c[e+225|0]=8421504,c[e+226|0]=32896,c[e+227|0]=128,c[e+228|0]=-2139062144,c[e+229|0]=8421504,c[e+230|0]=32896,c[e+231|0]=128,c[e+192|0]=-2139062144,c[e+193|0]=8421504,c[e+194|0]=32896,c[e+195|0]=128,c[e+196|0]=-2139062144,c[e+197|0]=8421504,c[e+198|0]=32896,c[e+199|0]=128,c[e+160|0]=-2139062144,c[e+161|0]=8421504,c[e+162|0]=32896,c[e+163|0]=128,c[e+164|0]=-2139062144,c[e+165|0]=8421504,c[e+166|0]=32896,c[e+167|0]=128,c[e+128|0]=-2139062144,c[e+129|0]=8421504,c[e+130|0]=32896,c[e+131|0]=128,c[e+132|0]=-2139062144,c[e+133|0]=8421504,c[e+134|0]=32896,c[e+135|0]=128,c[e+96|0]=-2139062144,c[e+97|0]=8421504,c[e+98|0]=32896,c[e+99|0]=128,c[e+100|0]=-2139062144,c[e+101|0]=8421504,c[e+102|0]=32896,c[e+103|0]=128,c[e+64|0]=-2139062144,c[e+65|0]=8421504,c[e+66|0]=32896,c[e+67|0]=128,c[e+68|0]=-2139062144,c[e+69|0]=8421504,c[e+70|0]=32896,c[e+71|0]=128,c[e+32|0]=-2139062144,c[e+33|0]=8421504,c[e+34|0]=32896,c[e+35|0]=128,c[e+36|0]=-2139062144,c[e+37|0]=8421504,c[e+38|0]=32896,c[e+39|0]=128,c[e|0]=-2139062144,c[e+1|0]=8421504,c[e+2|0]=32896,c[e+3|0]=128,c[e+4|0]=-2139062144,c[e+5|0]=8421504,c[e+6|0]=32896,c[e+7|0]=128}function Ma(e){e=e|0;var t=0,r=0;t=e,e=t+-32|0,r=A[e|0]|A[e+1|0]<<8|(A[e+2|0]<<16|A[e+3|0]<<24),e=A[e+4|0]|A[e+5|0]<<8|(A[e+6|0]<<16|A[e+7|0]<<24),c[t+224|0]=r,c[t+225|0]=r>>>8,c[t+226|0]=r>>>16,c[t+227|0]=r>>>24,c[t+228|0]=e,c[t+229|0]=e>>>8,c[t+230|0]=e>>>16,c[t+231|0]=e>>>24,c[t+192|0]=r,c[t+193|0]=r>>>8,c[t+194|0]=r>>>16,c[t+195|0]=r>>>24,c[t+196|0]=e,c[t+197|0]=e>>>8,c[t+198|0]=e>>>16,c[t+199|0]=e>>>24,c[t+160|0]=r,c[t+161|0]=r>>>8,c[t+162|0]=r>>>16,c[t+163|0]=r>>>24,c[t+164|0]=e,c[t+165|0]=e>>>8,c[t+166|0]=e>>>16,c[t+167|0]=e>>>24,c[t+128|0]=r,c[t+129|0]=r>>>8,c[t+130|0]=r>>>16,c[t+131|0]=r>>>24,c[t+132|0]=e,c[t+133|0]=e>>>8,c[t+134|0]=e>>>16,c[t+135|0]=e>>>24,c[t+96|0]=r,c[t+97|0]=r>>>8,c[t+98|0]=r>>>16,c[t+99|0]=r>>>24,c[t+100|0]=e,c[t+101|0]=e>>>8,c[t+102|0]=e>>>16,c[t+103|0]=e>>>24,c[t+64|0]=r,c[t+65|0]=r>>>8,c[t+66|0]=r>>>16,c[t+67|0]=r>>>24,c[t+68|0]=e,c[t+69|0]=e>>>8,c[t+70|0]=e>>>16,c[t+71|0]=e>>>24,c[t+32|0]=r,c[t+33|0]=r>>>8,c[t+34|0]=r>>>16,c[t+35|0]=r>>>24,c[t+36|0]=e,c[t+37|0]=e>>>8,c[t+38|0]=e>>>16,c[t+39|0]=e>>>24,c[t|0]=r,c[t+1|0]=r>>>8,c[t+2|0]=r>>>16,c[t+3|0]=r>>>24,c[t+4|0]=e,c[t+5|0]=e>>>8,c[t+6|0]=e>>>16,c[t+7|0]=e>>>24}function go(e){var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0;ce=2,F=s[e>>2];e:{if(F>>>0>12)break e;w=s[e+8>>2],y=s[e+4>>2];t:{i:{if(F>>>0>=11){if(r=s[e+40>>2],f=r>>31,S=s[e+36>>2],t=S>>31,G=s[e+32>>2],v=G>>31,xe=f^r+f,r=(y+1|0)/2|0,At=(xe|0)>=(r|0),S=t^t+S,Bt=(S|0)>=(r|0),t=v^v+G,Yt=(t|0)>=(y|0),f=y,v=w+-1|0,G=v,Ne=v>>31,N=Jr(v,Ne,t,0),v=f+N|0,$e=f>>31,t=$e+yr|0,t=v>>>0<N>>>0?t+1|0:t,$=!t&v>>>0<=zr[e+48>>2]|t>>>0<0,t=r,w=((w+1|0)/2|0)+-1|0,v=w,N=v>>31,S=Jr(v,N,S,0),w=t+S|0,gt=t>>31,r=gt+yr|0,r=w>>>0<S>>>0?r+1|0:r,$=$&(!r&w>>>0<=zr[e+52>>2]|r>>>0<0),w=Jr(xe,0,v,N)+t|0,r=gt+yr|0,r=w>>>0<t>>>0?r+1|0:r,t=w,t=At&(Bt&(Yt&($&(!r&t>>>0<=zr[e+56>>2]|r>>>0<0))))&s[e+16>>2]!=0&s[e+20>>2]!=0&s[e+24>>2]!=0,(F|0)!=12)break i;if(!s[e+28>>2]||(F=s[e+44>>2],r=F>>31,r=r^r+F,!(t&(r|0)>=(y|0))))break e;if(y=Jr(r,0,G,Ne)+f|0,t=$e+yr|0,t=y>>>0<f>>>0?t+1|0:t,f=y,!t&f>>>0<=zr[e+60>>2]|t>>>0<0)break t;break e}if(!s[e+16>>2]||(t=s[e+20>>2],f=t>>31,t=f^t+f,f=W(A[F+1157|0],y),(t|0)<(f|0)))break e;if(y=w+-1|0,y=Jr(y,y>>31,t,0),t=y+f|0,f=yr+(f>>31)|0,f=t>>>0<y>>>0?f+1|0:f,!f&t>>>0<=zr[e+24>>2]|f>>>0<0)break t;break e}if(!t)break e}ce=0}return ce}function ru(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;e:{t:{i:{r:{o:{l:{n:{u:{s:{a:{if(w=t,w){if(y=r,!y)break a;if(v=f,!v)break s;if(v=fn(v)-fn(w)|0,v>>>0<=31)break u;break t}if((f|0)==1&r>>>0>=0|f>>>0>1)break t;return t=(e>>>0)/(r>>>0)|0,yr=0,t}if(y=f,!e)break n;if(!y||y+-1&y)break l;return e=w>>>(od(y)&31)|0,yr=0,e}if(!(y+-1&y))break o;N=(fn(y)+33|0)-fn(w)|0,S=0-N|0;break i}N=v+1|0,S=63-v|0;break i}return e=(w>>>0)/(y>>>0)|0,yr=0,e}if(v=fn(y)-fn(w)|0,v>>>0<31)break r;break t}if((y|0)==1)break e;return r=e,e=od(y),f=e&31,32<=(e&63)>>>0?(v=0,e=t>>>f|0):(v=t>>>f|0,e=((1<<f)-1&t)<<32-f|r>>>f),yr=v,e}N=v+1|0,S=63-v|0}if(y=t,w=e,v=N&63,F=v&31,32<=(v&63)>>>0?(v=0,$=y>>>F|0):(v=y>>>F|0,$=((1<<F)-1&y)<<32-F|w>>>F),e=S&63,S=e&31,32<=(e&63)>>>0?(y=w<<S,e=0):(y=(1<<S)-1&w>>>32-S|t<<S,e=w<<S),t=y,N)for(w=f+-1|0,y=r+-1|0,(y|0)!=-1&&(w=w+1|0),S=y;y=$,G=v<<1|y>>>31,v=y<<1|t>>>31,ce=G,y=G,G=v,F=w-((S>>>0<v>>>0)+y|0)|0,y=F>>31,F=F>>31,v=r&F,$=G-v|0,v=ce-((f&y)+(G>>>0<v>>>0)|0)|0,y=t<<1|e>>>31,e=xe|e<<1,t=y|Ne,ce=0,G=F&1,xe=G,N=N+-1|0,!!N;);return yr=ce|(t<<1|e>>>31),G|e<<1}e=0,t=0}return yr=t,e}function oa(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(N=y<<1&-4,N){for(N=f+N|0;w=A[r|0],v=W(A[e|0],19077)>>>8|0,G=A[t|0],S=v+(W(G,33050)>>>8|0)|0,F=S+-17685|0,c[f+1|0]=(F>>>0<16384?F>>>6|0:S>>>0<17685?0:240)|15,S=v+(W(w,26149)>>>8|0)|0,F=S+-14234|0,w=v-(W(G,6419)>>>8|0)-(W(w,13320)>>>8)|0,v=w+8708|0,c[f|0]=(F>>>0<16384?F>>>6|0:S>>>0<14234?0:240)&240|(v>>>0<16384?v>>>10|0:(w|0)<-8708?0:15),w=A[r|0],v=W(A[e+1|0],19077)>>>8|0,G=A[t|0],S=v+(W(G,33050)>>>8|0)|0,F=S+-17685|0,c[f+3|0]=(F>>>0<16384?F>>>6|0:S>>>0<17685?0:240)|15,S=v+(W(w,26149)>>>8|0)|0,F=S+-14234|0,w=v-(W(G,6419)>>>8|0)-(W(w,13320)>>>8)|0,v=w+8708|0,c[f+2|0]=(F>>>0<16384?F>>>6|0:S>>>0<14234?0:240)&240|(v>>>0<16384?v>>>10|0:(w|0)<-8708?0:15),r=r+1|0,t=t+1|0,e=e+2|0,f=f+4|0,(N|0)!=(f|0););f=N}y&1&&(r=A[r|0],e=W(A[e|0],19077)>>>8|0,t=A[t|0],y=e+(W(t,33050)>>>8|0)|0,N=y+-17685|0,c[f+1|0]=(N>>>0<16384?N>>>6|0:y>>>0<17685?0:240)|15,N=f,f=e+(W(r,26149)>>>8|0)|0,y=f+-14234|0,e=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[N|0]=(y>>>0<16384?y>>>6|0:f>>>0<14234?0:240)&240|(t>>>0<16384?t>>>10|0:(e|0)<-8708?0:15))}function Ms(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;$=br-592|0,br=$,v=t+24|0,w=Dn(v,1),F=yo(r,0,e<<2);e:{t:{i:{r:{if(w){if(r=Dn(v,1),Ne=(Dn(v,Dn(v,1)?8:1)<<2)+F|0,$e=1,s[Ne>>2]=$e,(r|0)!=1)break r;Ne=(Dn(v,8)<<2)+F|0,$e=1,s[Ne>>2]=$e;break r}if(G=yo($,0,76),w=Dn(v,4)+4|0,(w|0)>19)break t;if(r=0,(w|0)>0)for(;Ne=(A[r+1232|0]<<2)+G|0,$e=Dn(v,3),s[Ne>>2]=$e,r=r+1|0,(w|0)!=(r|0););if(!Wo(G+80|0,7,G,19)||(w=e,Dn(v,1)&&(w=Dn(v,(Dn(v,3)<<1)+2|0)+2|0,(w|0)>(e|0))))break i;if((e|0)<1)break r;for(ce=8,r=0;;){if(!w)break r;y=s[t+44>>2],(y|0)>=32&&(he(v),y=s[t+44>>2]),xe=y,S=s[t+28>>2],N=y&63,y=N&31,y=(G+80|0)+(((32<=(N&63)>>>0?S>>>y|0:((1<<y)-1&S)<<32-y|s[t+24>>2]>>>y)&127)<<2)|0,s[t+44>>2]=xe+A[y|0],S=tr[y+2>>1];o:{if(S>>>0<=15){s[(r<<2)+F>>2]=S,ce=S||ce,r=r+1|0;break o}if(y=S+-16|0,N=Dn(v,A[y+1251|0])+A[y+1254|0]|0,y=N+r|0,(y|0)>(e|0))break i;if((N|0)<1)break o;for(S=(S|0)==16?ce:0;s[(r<<2)+F>>2]=S,r=r+1|0,(y|0)!=(r|0););r=y}if(w=w+-1|0,!((r|0)<(e|0)))break}}if(s[t+48>>2])break t;if(r=Wo(f,8,F,e),r)break e;break t}s[t>>2]=3}s[t>>2]=3,r=0}return br=$+592|0,r}function Sn(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0;if(r>>>0>=512)return zl(e|0,t|0,r|0)|0,e|0;y=e+r|0;e:{if(!((e^t)&3)){t:{if((r|0)<1){r=e;break t}if(!(e&3)){r=e;break t}for(r=e;;){if(c[r|0]=A[t|0],t=t+1|0,r=r+1|0,r>>>0>=y>>>0)break t;if(!(r&3))break}}f=y&-4;t:{if(f>>>0<64||(v=f+-64|0,r>>>0>v>>>0))break t;for(;s[r>>2]=s[t>>2],s[r+4>>2]=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[r+12>>2]=s[t+12>>2],s[r+16>>2]=s[t+16>>2],s[r+20>>2]=s[t+20>>2],s[r+24>>2]=s[t+24>>2],s[r+28>>2]=s[t+28>>2],s[r+32>>2]=s[t+32>>2],s[r+36>>2]=s[t+36>>2],s[r+40>>2]=s[t+40>>2],s[r+44>>2]=s[t+44>>2],s[r+48>>2]=s[t+48>>2],s[r+52>>2]=s[t+52>>2],s[r+56>>2]=s[t+56>>2],s[r+60>>2]=s[t+60>>2],t=t- -64|0,r=r- -64|0,r>>>0<=v>>>0;);}if(r>>>0>=f>>>0)break e;for(;s[r>>2]=s[t>>2],t=t+4|0,r=r+4|0,r>>>0<f>>>0;);break e}if(y>>>0<4){r=e;break e}if(f=y+-4|0,f>>>0<e>>>0){r=e;break e}for(r=e;c[r|0]=A[t|0],c[r+1|0]=A[t+1|0],c[r+2|0]=A[t+2|0],c[r+3|0]=A[t+3|0],t=t+4|0,r=r+4|0,r>>>0<=f>>>0;);}if(r>>>0<y>>>0)for(;c[r|0]=A[t|0],t=t+1|0,r=r+1|0,(y|0)!=(r|0););return e|0}function qs(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(w=y&-2,w){for(w=W(w,3)+f|0;S=A[r|0],v=W(A[e|0],19077)>>>8|0,G=A[t|0],F=v+(W(G,33050)>>>8|0)|0,N=F+-17685|0,c[f+2|0]=N>>>0<16384?N>>>6|0:F>>>0<17685?0:255,F=v+(W(S,26149)>>>8|0)|0,N=F+-14234|0,c[f|0]=N>>>0<16384?N>>>6|0:F>>>0<14234?0:255,S=v-(W(G,6419)>>>8|0)-(W(S,13320)>>>8)|0,v=S+8708|0,c[f+1|0]=v>>>0<16384?v>>>6|0:(S|0)<-8708?0:255,S=A[r|0],v=W(A[e+1|0],19077)>>>8|0,G=A[t|0],F=v+(W(G,33050)>>>8|0)|0,N=F+-17685|0,c[f+5|0]=N>>>0<16384?N>>>6|0:F>>>0<17685?0:255,F=v+(W(S,26149)>>>8|0)|0,N=F+-14234|0,c[f+3|0]=N>>>0<16384?N>>>6|0:F>>>0<14234?0:255,S=v-(W(G,6419)>>>8|0)-(W(S,13320)>>>8)|0,v=S+8708|0,c[f+4|0]=v>>>0<16384?v>>>6|0:(S|0)<-8708?0:255,r=r+1|0,t=t+1|0,e=e+2|0,f=f+6|0,(w|0)!=(f|0););f=w}y&1&&(r=A[r|0],e=W(A[e|0],19077)>>>8|0,t=A[t|0],y=e+(W(t,33050)>>>8|0)|0,w=y+-17685|0,c[f+2|0]=w>>>0<16384?w>>>6|0:y>>>0<17685?0:255,y=e+(W(r,26149)>>>8|0)|0,w=y+-14234|0,c[f|0]=w>>>0<16384?w>>>6|0:y>>>0<14234?0:255,e=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[f+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255)}function Qa(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if(w=y&-2,w){for(w=W(w,3)+f|0;S=A[t|0],v=W(A[e|0],19077)>>>8|0,G=A[r|0],F=v+(W(G,26149)>>>8|0)|0,N=F+-14234|0,c[f+2|0]=N>>>0<16384?N>>>6|0:F>>>0<14234?0:255,F=v+(W(S,33050)>>>8|0)|0,N=F+-17685|0,c[f|0]=N>>>0<16384?N>>>6|0:F>>>0<17685?0:255,S=v-(W(S,6419)>>>8|0)-(W(G,13320)>>>8)|0,v=S+8708|0,c[f+1|0]=v>>>0<16384?v>>>6|0:(S|0)<-8708?0:255,S=A[t|0],v=W(A[e+1|0],19077)>>>8|0,G=A[r|0],F=v+(W(G,26149)>>>8|0)|0,N=F+-14234|0,c[f+5|0]=N>>>0<16384?N>>>6|0:F>>>0<14234?0:255,F=v+(W(S,33050)>>>8|0)|0,N=F+-17685|0,c[f+3|0]=N>>>0<16384?N>>>6|0:F>>>0<17685?0:255,S=v-(W(S,6419)>>>8|0)-(W(G,13320)>>>8)|0,v=S+8708|0,c[f+4|0]=v>>>0<16384?v>>>6|0:(S|0)<-8708?0:255,r=r+1|0,t=t+1|0,e=e+2|0,f=f+6|0,(w|0)!=(f|0););f=w}y&1&&(t=A[t|0],e=W(A[e|0],19077)>>>8|0,r=A[r|0],y=e+(W(r,26149)>>>8|0)|0,w=y+-14234|0,c[f+2|0]=w>>>0<16384?w>>>6|0:y>>>0<14234?0:255,y=e+(W(t,33050)>>>8|0)|0,w=y+-17685|0,c[f|0]=w>>>0<16384?w>>>6|0:y>>>0<17685?0:255,e=e-(W(t,6419)>>>8|0)-(W(r,13320)>>>8)|0,t=e+8708|0,c[f+1|0]=t>>>0<16384?t>>>6|0:(e|0)<-8708?0:255)}function nu(e,t){var r=0,f=0,y=0;e:{if(!e)break e;if(!t){if(s[e>>2])break e;return s[e>>2]=2,s[e+4>>2]=0,s[e+8>>2]=5281,0}if(!s[e+4>>2]&&!ho(e,t))break e;t:{if(!Pa(e,t)){i:{if(!Fl(e,t))break i;s[e+2300>>2]=0;r:{if(s[e+308>>2]>=1)for(y=e+12|0;;){if(f=s[e+312>>2],!js(y,e))break r;if(s[e+2296>>2]<s[e+288>>2])for(r=(W(r&f,28)+e|0)+316|0;;){if(!Go(e,r)){if(r=0,s[e>>2])break i;s[e>>2]=7,s[e+4>>2]=0,s[e+8>>2]=5412;break i}if(f=s[e+2296>>2]+1|0,s[e+2296>>2]=f,!((f|0)<s[e+288>>2]))break}if(r=s[e+2256>>2]+-2|0,c[r|0]=0,c[r+1|0]=0,s[e+2296>>2]=0,s[e+2248>>2]=0,!nc(e,t)){if(r=0,s[e>>2])break i;s[e>>2]=6,s[e+4>>2]=0,s[e+8>>2]=5447;break i}if(r=s[e+2300>>2]+1|0,s[e+2300>>2]=r,!((r|0)<s[e+308>>2]))break}o:{if(s[e+148>>2]<1||Je[s[2559]](e+124|0)|0)break o;r=0;break i}r=1;break i}if(r=0,s[e>>2])break i;s[e>>2]=7,s[e+4>>2]=0,s[e+8>>2]=5371}if(fh(e,t)&r)break t}return Je[s[2562]](e+124|0),ch(e),gn(s[e+2288>>2]),s[e+2288>>2]=0,s[e+2292>>2]=0,s[e+12>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+24>>2]=0,s[e+28>>2]=0,s[e+32>>2]=0,s[e+36>>2]=0,s[e+4>>2]=0,0}s[e+4>>2]=0,r=1}return r}function Ol(e){var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0;for(t=e+12|0,S=an(t,7),an(t,1)&&($=hs(t,4)),an(t,1)&&(ce=hs(t,4)),an(t,1)&&(xe=hs(t,4)),an(t,1)&&(Ne=hs(t,4)),an(t,1)&&($e=hs(t,4)),gt=s[e+104>>2],w=e+776|0,F=w+24|0,N=w+16|0,G=w+8|0;;){e:{t:{if(gt){t=c[(e+v|0)+116|0]+(s[e+112>>2]?0:S)|0;break t}if(t=S,!v)break t;r=s[F+4>>2],t=(v<<5)+e|0,s[t+800>>2]=s[F>>2],s[t+804>>2]=r,r=s[N+4>>2],s[t+792>>2]=s[N>>2],s[t+796>>2]=r,r=s[G+4>>2],s[t+784>>2]=s[G>>2],s[t+788>>2]=r,r=s[w+4>>2],s[t+776>>2]=s[w>>2],s[t+780>>2]=r;break e}r=(v<<5)+e|0,y=t+$e|0,s[r+800>>2]=y,f=t+Ne|0,f=(f|0)<117?f:117,s[r+792>>2]=A[((f|0)>0?f:0)+4448|0],f=(t|0)<127?t:127,s[r+780>>2]=tr[(((f|0)>0?f:0)<<1)+4576>>1],f=t+$|0,f=(f|0)<127?f:127,s[r+776>>2]=A[((f|0)>0?f:0)+4448|0],y=(y|0)<127?y:127,s[r+796>>2]=tr[(((y|0)>0?y:0)<<1)+4576>>1],y=t+ce|0,y=(y|0)<127?y:127,s[r+784>>2]=A[((y|0)>0?y:0)+4448|0]<<1,t=t+xe|0,t=(t|0)<127?t:127,t=W(tr[(((t|0)>0?t:0)<<1)+4576>>1],101581),s[r+788>>2]=t>>>0<524288?8:t>>>16|0}if(v=v+1|0,(v|0)==4)break}}function ms(e,t,r,f,y,v,w){var S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0,jo=0,Zs=0,Ra=0,fu=0;if((f|0)>=1)for(qr=y<<1|1,on=W(t,3),jo=0-t|0,Zs=W(t,-3),Ra=0-(t<<2)|0,At=t<<1,fu=0-At|0,Bt=s[2547],N=s[2548],Yt=s[2546],G=s[2549];;){y=f,yi=e+fu|0,F=A[yi|0],hi=e+t|0,Ne=A[hi|0],S=F-Ne|0,$e=e+jo|0,f=A[$e|0],xe=A[e|0];e:{if((A[S+G|0]+(A[G+(f-xe|0)|0]<<2)|0)>(qr|0)||(Mi=e+Zs|0,ce=A[Mi|0],A[G+(A[e+Ra|0]-ce|0)|0]>(v|0)|A[G+(ce-F|0)|0]>(v|0))||($=A[G+(F-f|0)|0],($|0)>(v|0))||(Vi=e+At|0,gt=A[Vi|0],A[G+(A[e+on|0]-gt|0)|0]>(v|0)|A[G+(gt-Ne|0)|0]>(v|0))||(ar=A[G+(Ne-xe|0)|0],(ar|0)>(v|0)))break e;if(S=c[S+Yt|0]+W(xe-f|0,3)|0,!((ar|0)<=(w|0)&&($|0)<=(w|0))){F=c[(S+4>>3)+Bt|0],c[$e|0]=A[(c[(S+3>>3)+Bt|0]+f|0)+N|0],c[e|0]=A[(xe-F|0)+N|0];break e}$=ce,S=c[S+Yt|0],ce=W(S,9)+63>>7,c[Mi|0]=A[($+ce|0)+N|0],$=F,F=W(S,18)+63>>7,c[yi|0]=A[($+F|0)+N|0],$=f,f=W(S,27)+63>>7,c[$e|0]=A[($+f|0)+N|0],c[e|0]=A[(xe-f|0)+N|0],c[hi|0]=A[(Ne-F|0)+N|0],c[Vi|0]=A[(gt-ce|0)+N|0]}if(f=y+-1|0,e=e+r|0,!((y|0)>1))break}}function $a(e,t,r){var f=0,y=0,v=0,w=0,S=0,F=0;if(f=bl(1,0,272),!f)return 0;s[f>>2]=0,s[f+4>>2]=2,ir(),v=s[e>>2],s[f+100>>2]=v,y=s[e+4>>2],s[f+8>>2]=e+24,s[f+104>>2]=y,s[e+28>>2]=y,s[e+24>>2]=v,s[e- -64>>2]=e,s[f>>2]=0,le(f+24|0,t,r);e:{t:{i:{if(!Xi(s[e>>2],s[e+4>>2],1,f,0))break i;r:{o:{if(s[f+176>>2]!=1|s[f+180>>2]!=3|s[f+120>>2]>0)break o;if(r=s[f+164>>2],(r|0)<1)break r;for(t=s[f+168>>2],y=0;;){if(v=t+W(y,548)|0,A[s[v+4>>2]]|A[s[v+8>>2]]|A[s[v+12>>2]])break o;if(y=y+1|0,(r|0)==(y|0))break}break r}if(s[e+132>>2]=0,t=s[f+104>>2],r=t,y=t>>31,t=s[f+100>>2],w=Jr(r,y,t,t>>31),r=yr,F=f,y=s[e>>2],t=y>>31,t=t<<4|y>>>28,v=y<<4,S=y&65535,y=S,v=v+y|0,v>>>0<y>>>0&&(t=t+1|0),y=v+w|0,t=t+r|0,t=ts(y,y>>>0<v>>>0?t+1|0:t,4),s[F+16>>2]=t,t)break t;s[f+20>>2]=0,s[f>>2]=1;break i}if(s[e+132>>2]=1,s[f+20>>2]=0,t=s[f+104>>2],r=t,y=t>>31,t=s[f+100>>2],t=ts(Jr(r,y,t,t>>31),yr,1),s[f+16>>2]=t,t)break e;s[f>>2]=1}return uo(f),gn(f),0}s[f+20>>2]=(t+(w<<2)|0)+(S<<2)}return s[e+20>>2]=f,1}function Ro(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0;for(ce=0-t|0,G=t<<2,F=G+e|0,xe=0-(t<<1)|0,Ne=r<<1|1,e=s[2548],r=s[2547],$e=s[2546],$=s[2549];f=y+F|0,w=f+ce|0,N=A[w|0],S=A[f|0],v=A[f+xe|0]-A[t+f|0]|0,((A[$+(N-S|0)|0]<<2)+A[v+$|0]|0)<=(Ne|0)&&(v=c[v+$e|0]+W(S-N|0,3)|0,gt=c[(v+4>>3)+r|0],c[w|0]=A[(N+c[(v+3>>3)+r|0]|0)+e|0],c[f|0]=A[(S-gt|0)+e|0]),y=y+1|0,(y|0)!=16;);for(F=F+G|0,y=0;f=y+F|0,w=f+ce|0,N=A[w|0],S=A[f|0],v=A[f+xe|0]-A[t+f|0]|0,((A[$+(N-S|0)|0]<<2)+A[v+$|0]|0)<=(Ne|0)&&(v=c[v+$e|0]+W(S-N|0,3)|0,gt=c[(v+4>>3)+r|0],c[w|0]=A[(N+c[(v+3>>3)+r|0]|0)+e|0],c[f|0]=A[(S-gt|0)+e|0]),y=y+1|0,(y|0)!=16;);for(N=F+G|0,y=0;f=y+N|0,S=f+ce|0,G=A[S|0],F=A[f|0],w=A[f+xe|0]-A[t+f|0]|0,((A[$+(G-F|0)|0]<<2)+A[w+$|0]|0)<=(Ne|0)&&(w=c[w+$e|0]+W(F-G|0,3)|0,v=c[(w+4>>3)+r|0],c[S|0]=A[(G+c[(w+3>>3)+r|0]|0)+e|0],c[f|0]=A[(F-v|0)+e|0]),y=y+1|0,(y|0)!=16;);}function dr(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;for(N=e+4|0,ce=r<<1|1,r=s[2548],G=s[2547],xe=s[2546],$=s[2549];f=N+W(t,y)|0,w=f+-1|0,S=A[w|0],F=A[f|0],v=A[f+-2|0]-A[f+1|0]|0,((A[$+(S-F|0)|0]<<2)+A[v+$|0]|0)<=(ce|0)&&(v=c[v+xe|0]+W(F-S|0,3)|0,Ne=c[(v+4>>3)+G|0],c[w|0]=A[(S+c[(v+3>>3)+G|0]|0)+r|0],c[f|0]=A[(F-Ne|0)+r|0]),y=y+1|0,(y|0)!=16;);for(N=e+8|0,y=0;f=N+W(t,y)|0,w=f+-1|0,S=A[w|0],F=A[f|0],v=A[f+-2|0]-A[f+1|0]|0,((A[$+(S-F|0)|0]<<2)+A[v+$|0]|0)<=(ce|0)&&(v=c[v+xe|0]+W(F-S|0,3)|0,Ne=c[(v+4>>3)+G|0],c[w|0]=A[(S+c[(v+3>>3)+G|0]|0)+r|0],c[f|0]=A[(F-Ne|0)+r|0]),y=y+1|0,(y|0)!=16;);for(F=e+12|0,y=0;e=F+W(t,y)|0,N=e+-1|0,f=A[N|0],S=A[e|0],w=A[e+-2|0]-A[e+1|0]|0,((A[$+(f-S|0)|0]<<2)+A[w+$|0]|0)<=(ce|0)&&(w=c[w+xe|0]+W(S-f|0,3)|0,v=c[(w+4>>3)+G|0],c[N|0]=A[(f+c[(w+3>>3)+G|0]|0)+r|0],c[e|0]=A[(S-v|0)+r|0]),y=y+1|0,(y|0)!=16;);}function no(e,t){e=e|0,t=t|0;var r=0;e=_i[e>>1]+4>>3,r=e+A[t|0]|0,r=(r|0)>0?r:0,c[t|0]=(r|0)<255?r:255,r=e+A[t+1|0]|0,r=(r|0)>0?r:0,c[t+1|0]=(r|0)<255?r:255,r=e+A[t+2|0]|0,r=(r|0)>0?r:0,c[t+2|0]=(r|0)<255?r:255,r=e+A[t+3|0]|0,r=(r|0)>0?r:0,c[t+3|0]=(r|0)<255?r:255,r=e+A[t+32|0]|0,r=(r|0)>0?r:0,c[t+32|0]=(r|0)<255?r:255,r=e+A[t+33|0]|0,r=(r|0)>0?r:0,c[t+33|0]=(r|0)<255?r:255,r=e+A[t+34|0]|0,r=(r|0)>0?r:0,c[t+34|0]=(r|0)<255?r:255,r=e+A[t+35|0]|0,r=(r|0)>0?r:0,c[t+35|0]=(r|0)<255?r:255,r=e+A[t+64|0]|0,r=(r|0)>0?r:0,c[t+64|0]=(r|0)<255?r:255,r=e+A[t+65|0]|0,r=(r|0)>0?r:0,c[t+65|0]=(r|0)<255?r:255,r=e+A[t+66|0]|0,r=(r|0)>0?r:0,c[t+66|0]=(r|0)<255?r:255,r=e+A[t+67|0]|0,r=(r|0)>0?r:0,c[t+67|0]=(r|0)<255?r:255,r=e+A[t+96|0]|0,r=(r|0)>0?r:0,c[t+96|0]=(r|0)<255?r:255,r=e+A[t+97|0]|0,r=(r|0)>0?r:0,c[t+97|0]=(r|0)<255?r:255,r=e+A[t+98|0]|0,r=(r|0)>0?r:0,c[t+98|0]=(r|0)<255?r:255,e=e+A[t+99|0]|0,e=(e|0)>0?e:0,c[t+99|0]=(e|0)<255?e:255}function kn(e,t,r,f,y,v,w){var S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0,hi=0,Mi=0,Vi=0,ar=0,qr=0,on=0,jo=0;if((f|0)>=1)for(hi=y<<1|1,Mi=W(t,3),Vi=0-t|0,ar=W(t,-3),qr=0-(t<<2)|0,At=t<<1,on=0-At|0,jo=s[2546],G=s[2548],xe=s[2547],N=s[2549];;){y=f,Bt=e+on|0,F=A[Bt|0],Yt=e+t|0,$=A[Yt|0],Ne=F-$|0,gt=e+Vi|0,f=A[gt|0],ce=A[e|0];e:{if((A[Ne+N|0]+(A[N+(f-ce|0)|0]<<2)|0)>(hi|0)||(S=A[e+ar|0],A[N+(A[e+qr|0]-S|0)|0]>(v|0)|A[N+(S-F|0)|0]>(v|0))||($e=A[N+(F-f|0)|0],($e|0)>(v|0))||(S=A[e+At|0],A[N+(A[e+Mi|0]-S|0)|0]>(v|0)|A[N+(S-$|0)|0]>(v|0))||(yi=A[N+($-ce|0)|0],(yi|0)>(v|0)))break e;if(S=W(ce-f|0,3),!((yi|0)<=(w|0)&&($e|0)<=(w|0))){F=c[Ne+jo|0]+S|0,$=c[(F+4>>3)+xe|0],c[gt|0]=A[(c[(F+3>>3)+xe|0]+f|0)+G|0],c[e|0]=A[(ce-$|0)+G|0];break e}Ne=c[(S+3>>3)+xe|0],$e=F,F=c[(S+4>>3)+xe|0],S=F+1>>1,c[Bt|0]=A[($e+S|0)+G|0],c[gt|0]=A[(f+Ne|0)+G|0],c[e|0]=A[(ce-F|0)+G|0],c[Yt|0]=A[($-S|0)+G|0]}if(f=y+-1|0,e=e+r|0,!((y|0)>1))break}}function Jn(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;e:{t:switch(r|0){case 0:Je[s[2734]](e,t,f);return;case 1:Je[s[2735]](e,t,f);return;case 7:Je[s[2735]](e,t,f),Je[s[2664]](f,0,t,1,0);return;case 2:Je[s[2736]](e,t,f);return;case 3:Sn(f,e,t<<2);return;case 8:S=Sn(f,e,t<<2),F=0,N=t,G=1,$=0,w=s[2664],Je[w](S|0,F|0,N|0,G|0,$|0);return;case 4:if((t|0)<1)break e;for(r=(t<<2)+e|0;t=s[e>>2],t=t<<24|t<<8&16711680|(t>>>8&65280|t>>>24),c[f|0]=t,c[f+1|0]=t>>>8,c[f+2|0]=t>>>16,c[f+3|0]=t>>>24,f=f+4|0,e=e+4|0,e>>>0<r>>>0;);break e;case 9:if((t|0)>=1)for(v=(t<<2)+e|0,r=f;y=s[e>>2],y=y<<24|y<<8&16711680|(y>>>8&65280|y>>>24),c[r|0]=y,c[r+1|0]=y>>>8,c[r+2|0]=y>>>16,c[r+3|0]=y>>>24,r=r+4|0,e=e+4|0,e>>>0<v>>>0;);Je[s[2664]](f,1,t,1,0);return;case 5:Je[s[2737]](e,t,f);return;case 10:Je[s[2737]](e,t,f),Je[s[2665]](f,t,1,0);return;case 6:break t;default:break e}Je[s[2738]](e,t,f)}}function Co(e,t,r){var f=0,y=0,v=0;f=br-160|0,br=f,s[f+16>>2]=1,s[f+12>>2]=t,s[f+8>>2]=e,s[f+156>>2]=0,y=f,v=Xa(e,t,0,0,0,f+156|0,0,f+8|0),s[y+48>>2]=v,!s[f+156>>2]|(s[f+48>>2]!=7?s[f+48>>2]:0)||(s[f+48>>2]=4),e=s[f+48>>2];e:{if(e)break e;ud(f+48|0),e=s[f+20>>2],s[f+112>>2]=e+s[f+8>>2],s[f+108>>2]=s[f+12>>2]-e,r0(r,f+48|0);t:{if(!s[f+40>>2]){if(t=Zn(),!t){e=1;break e}s[t+2348>>2]=s[f+24>>2],s[t+2352>>2]=s[f+28>>2];i:{if(ho(t,f+48|0)&&(e=dl(s[f+48>>2],s[f+52>>2],s[r+20>>2],s[r>>2]),e||(s[t+148>>2]=0,Xc(s[r+20>>2],t),e=0,nu(t,f+48|0))))break i;e=s[t>>2]}cs(t);break t}t=bl(1,0,272),e=0;i:{if(!t)break i;s[t>>2]=0,s[t+4>>2]=2,ir(),e=t}if(t=e,!t){e=1;break e}i:{if(Ae(t,f+48|0)&&(e=dl(s[f+48>>2],s[f+52>>2],s[r+20>>2],s[r>>2]),e||(e=0,tc(t))))break i;e=s[t>>2]}vh(t)}if(e){D0(s[r>>2]);break e}if(e=0,t=s[r+20>>2],!t|!s[t+48>>2])break e;e=Be(s[r>>2])}return br=f+160|0,e}function ir(){var e=0;e=s[2673],(e|0)!=s[2551]&&(s[2771]=81,s[2770]=81,s[2769]=82,s[2768]=83,s[2767]=84,s[2766]=85,s[2765]=86,s[2764]=87,s[2763]=88,s[2762]=89,s[2761]=90,s[2760]=91,s[2759]=92,s[2758]=93,s[2757]=94,s[2756]=81,s[2803]=81,s[2802]=81,s[2801]=82,s[2800]=83,s[2799]=84,s[2798]=85,s[2797]=86,s[2796]=87,s[2795]=88,s[2794]=89,s[2793]=90,s[2792]=91,s[2791]=92,s[2790]=93,s[2789]=94,s[2788]=81,s[2755]=95,s[2754]=95,s[2753]=96,s[2752]=97,s[2751]=98,s[2750]=99,s[2749]=100,s[2748]=101,s[2747]=102,s[2746]=103,s[2745]=104,s[2744]=105,s[2743]=106,s[2742]=107,s[2741]=108,s[2740]=95,s[2787]=95,s[2786]=95,s[2785]=96,s[2784]=97,s[2783]=98,s[2782]=99,s[2781]=100,s[2780]=101,s[2779]=102,s[2778]=103,s[2777]=104,s[2776]=105,s[2775]=106,s[2774]=107,s[2773]=108,s[2772]=95,s[2733]=109,s[2804]=110,s[2735]=111,s[2734]=112,s[2736]=113,s[2737]=114,s[2738]=115,s[2805]=116,s[2732]=117,s[2551]=e)}function sa(e,t,r){var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0;y=br-16|0,br=y,F=s[t+4>>2],N=s[t>>2];e:{t:{if(!e){s[t+72>>2]=0,f=N,v=F;break t}if(w=s[e+8>>2],s[t+72>>2]=(w|0)>0,f=N,v=F,(w|0)<1)break t;if(w=0,f=s[e+16>>2],r=r>>>0>10,S=r?f&-2:f,v=s[e+24>>2],(S+v|0)>(F|0)||(f=s[e+12>>2],G=r?f&-2:f,f=s[e+20>>2],(v|0)<1|(G+f|0)>(N|0)|((f|0)<1|(S|G)<0)))break e}if(s[t+84>>2]=S,s[t+76>>2]=G,s[t+16>>2]=v,s[t+12>>2]=f,s[t+88>>2]=S+v,s[t+80>>2]=f+G,e){r=s[e+28>>2],s[t+92>>2]=(r|0)>0,w=1,S=1;t:{if((r|0)>=1){if(s[y+12>>2]=s[e+32>>2],s[y+8>>2]=s[e+36>>2],!Oe(f,v,y+12|0,y+8|0))break t;s[t+96>>2]=s[y+12>>2],s[t+100>>2]=s[y+8>>2],S=!s[t+92>>2]}if(s[t+68>>2]=s[e>>2]!=0,s[t+56>>2]=!s[e+4>>2],S)break e;e=0,e=s[t+96>>2]<((W(N,3)|0)/4|0)?s[t+100>>2]<((W(F,3)|0)/4|0):e,s[t+56>>2]=0,s[t+68>>2]=e;break e}w=0;break e}s[t+68>>2]=0,s[t+92>>2]=0,w=1,s[t+56>>2]=1}return br=y+16|0,w}function ou(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;if(f=s[e+108>>2],w=t-f|0,(w|0)>=1)for(r=s[e+100>>2],N=s[e+16>>2]+(W(r,f)<<2)|0;;){S=(w|0)<16?w:16,ce=S+f|0,y=s[e+8>>2],G=s[y>>2],xe=W(G,S),$=s[y+40>>2],y=s[$+136>>2]+W(f,G)|0,F=s[e+20>>2],v=s[e+176>>2];e:{if((v|0)>=1){if(r=v+-1|0,fl((W(r,20)+e|0)+180|0,f,ce,N,F),(v|0)<2)break e;for(;v=r+-1|0,fl((W(v,20)+e|0)+180|0,f,ce,F,F),Ne=(r|0)>1,r=v,!!Ne;);break e}if((F|0)==(N|0))break e;Sn(F,N,W(r,S)<<2)}if(Je[s[2669]](F,y,xe),v=s[$+12>>2],v){r=s[$+140>>2];e:{if((w|0)<1)break e;if(Je[s[(v<<2)+10912>>2]](r,y,y,G),(S|0)==1){r=y;break e}for(f=f+1|0;r=y+G|0,Je[s[(s[$+12>>2]<<2)+10912>>2]](y,r,r,G),y=r,f=f+1|0,(ce|0)!=(f|0););}s[$+140>>2]=r}if(r=s[e+100>>2],N=(W(r,S)<<2)+N|0,f=ce,w=w-S|0,!((w|0)>0))break}s[e+108>>2]=t,s[e+116>>2]=t}function su(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0;if(w=s[e+16>>2],(w|0)<1)return 0;for($=w+1>>1,r=s[t+24>>2];;){f=r,r=s[e+32>>2],v=Ho(f,w-S|0,s[e+20>>2]+W(r,S)|0,r),r=$-F|0,Mu(s[t+28>>2],r)&&(y=s[e+36>>2],y=Ho(s[t+28>>2],r,s[e+24>>2]+W(y,F)|0,y),f=r,r=s[e+36>>2],Ho(s[t+32>>2],f,s[e+28>>2]+W(r,F)|0,r),F=y+F|0),S=v+S|0,v=s[t>>2],f=s[v>>2],y=0,r=s[t+24>>2];e:{if(s[r+64>>2]>=s[r+56>>2])break e;for(ce=s[(f<<2)+11312>>2],f=s[v+16>>2]+W(s[v+20>>2],s[t+16>>2]+N|0)|0;;){if(s[r+24>>2]>0||(G=s[t+28>>2],s[G+64>>2]>=s[G+56>>2]|s[G+24>>2]>0))break e;if(Si(r),Si(s[t+28>>2]),Si(s[t+32>>2]),r=s[t+24>>2],Je[ce|0](s[r+68>>2],s[s[t+28>>2]+68>>2],s[s[t+32>>2]+68>>2],f,s[r+52>>2]),y=y+1|0,f=s[v+20>>2]+f|0,r=s[t+24>>2],!(s[r+64>>2]<s[r+56>>2]))break}}if(N=y+N|0,!((w|0)>(S|0)))break}return N|0}function ic(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0;r=br-240|0,br=r,y=r+40|0,y?(o0(yo(y,0,200)+40|0),y=1):y=0;e:{if(!y){t0(s[2536]);break e}A[10640]||(fa(32)|0,c[10640]=1),y=r+80|0;t:{if(An(e,t,r+40|0))break t;if(v=$u(s[r+40>>2],s[r+44>>2],32,0)|0,!v){e=s[r+44>>2],s[r>>2]=s[r+40>>2],s[r+4>>2]=e,hu(s[2536],1051,r),v=0;break t}if(f=Za(0,s[r+40>>2],s[r+44>>2],32,255,65280,16711680,-16777216)|0,!f){e=s[r+44>>2],s[r+16>>2]=s[r+40>>2],s[r+20>>2]=e,hu(s[2536],1092,r+16|0),f=0;break t}if(ps(f|0)|0,s[r+80>>2]=1,s[r+84>>2]=s[f+8>>2],s[r+88>>2]=s[f+12>>2],s[r+96>>2]=s[f+20>>2],s[r+100>>2]=s[f+16>>2],w=s[f+12>>2],S=s[f+16>>2],s[r+92>>2]=1,s[r+104>>2]=W(w,S),e=xs(e,t,r+40|0),e){s[r+32>>2]=e,w=0,hu(s[2536],1130,r+32|0);break t}if(bu(f|0),w=0,Pl(f|0,0,v|0,0)|0)break t;w=!(Ac(v|0)|0)}Ml(f|0),Ml(v|0),D0(y)}return br=r+240|0,w|0}function Sc(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0;if((f|0)>=2)for(w=f>>1,F=(w|0)>1?w:1,w=0;;){v=w<<3,S=s[(v|4)+e>>2],v=s[e+v>>2],N=(S>>>7&510)+(v>>>7&510)|0,G=(S>>>15&510)+(v>>>15&510)|0,v=(S<<1&510)+(v<<1&510)|0,S=((W(N,-24116)+W(G,28800)|0)+W(v,-4684)|0)+33685504>>18,v=((W(N,-19081)+W(G,-9719)|0)+W(v,28800)|0)+33685504>>18;e:{if(y){c[t+w|0]=v,c[r+w|0]=S;break e}N=t+w|0,c[N|0]=(v+A[N|0]|0)+1>>>1,v=r+w|0,c[v|0]=(S+A[v|0]|0)+1>>>1}if(w=w+1|0,(F|0)==(w|0))break}if(f&1){if(e=s[(F<<3)+e>>2],f=e>>>6&1020,w=e>>>14&1020,S=e<<2&1020,e=((W(f,-24116)+W(w,28800)|0)+W(S,-4684)|0)+33685504>>18,f=((W(f,-19081)+W(w,-9719)|0)+W(S,28800)|0)+33685504>>18,y){c[t+F|0]=f,c[r+F|0]=e;return}t=t+F|0,c[t|0]=(f+A[t|0]|0)+1>>>1,t=r+F|0,c[t|0]=(e+A[t|0]|0)+1>>>1}}function Ic(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0;y=s[e+16>>2],N=s[e+12>>2],xe=(N+1|0)/2|0,G=s[t>>2],r=s[G+20>>2],w=s[e+8>>2],S=s[G+16>>2]+W(w,r)|0,$=s[(s[G>>2]<<2)+11248>>2],f=s[e+28>>2],v=s[e+24>>2],F=s[e+20>>2];e:{if(!w){Je[$|0](F,0,v,f,v,f,S,0,N),r=y;break e}Je[$|0](s[t+4>>2],F,s[t+8>>2],s[t+12>>2],v,f,S-r|0,S,N),r=y+1|0}Ne=r,ce=y+w|0;e:{if((y|0)<3){r=v,y=f;break e}for(w=w+2|0;r=s[e+32>>2],F=(r<<1)+F|0,gt=F-r|0,$e=v,At=f,v=s[e+36>>2],r=$e+v|0,y=f+v|0,f=s[G+20>>2],S=(f<<1)+S|0,Je[$|0](gt,F,$e,At,r,y,S-f|0,S,N),f=y,v=r,w=w+2|0,(w|0)<(ce|0););}return f=s[e+32>>2]+F|0,(s[e+84>>2]+ce|0)<s[e+88>>2]?(Sn(s[t+4>>2],f,N),Sn(s[t+8>>2],r,xe),Sn(s[t+12>>2],y,xe),Ne+-1|0):(ce&1||Je[$|0](f,0,r,y,r,y,s[G+20>>2]+S|0,0,N),Ne|0)}function Xc(e,t){var r=0,f=0,y=0;e:{if(!e)break e;r=s[e+44>>2];t:{if((r|0)<0||(f=255,(r|0)<=100&&(r=W(r,255),f=(r|0)/100|0,(r|0)<100)))break t;r=s[t+800>>2];i:{if((r|0)>=12){y=s[t+804>>2];break i}y=W(A[((r|0)>0?r:0)+4832|0],f)>>3,s[t+804>>2]=y}r=s[t+832>>2];i:{if((r|0)>=12){r=s[t+836>>2];break i}r=W(A[((r|0)>0?r:0)+4832|0],f)>>3,s[t+836>>2]=r}y=r|y,r=s[t+864>>2];i:{if((r|0)>=12){r=s[t+868>>2];break i}r=W(A[((r|0)>0?r:0)+4832|0],f)>>3,s[t+868>>2]=r}y=r|y,r=s[t+896>>2];i:{if((r|0)>=12){f=s[t+900>>2];break i}f=W(A[((r|0)>0?r:0)+4832|0],f)>>3,s[t+900>>2]=f}if(!(f|y))break t;f=t+544|0,Sn(f+8|0,9424,220),s[f>>2]=0,s[f+4>>2]=31,s[f+228>>2]=256,s[t+540>>2]=1}if(e=s[e+52>>2],s[t+2372>>2]=e,(e|0)>=101){s[t+2372>>2]=100;return}if((e|0)>-1)break e;s[t+2372>>2]=0}}function an(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((t|0)<1)return 0;for(r=s[e+8>>2],S=s[e+4>>2];;){e:{if((r|0)>-1)break e;if(f=s[e+12>>2],f>>>0<zr[e+20>>2]){y=A[f|0]|A[f+1|0]<<8|(A[f+2|0]<<16|A[f+3|0]<<24),s[e+12>>2]=f+3,r=r+24|0,s[e+8>>2]=r,s[e>>2]=s[e>>2]<<24|(y>>>8&65280|(y<<8&16711680|y<<24))>>>8;break e}if(f>>>0<zr[e+16>>2]){s[e+12>>2]=f+1,r=r+8|0,s[e+8>>2]=r,s[e>>2]=A[f|0]|s[e>>2]<<8;break e}if(!s[e+24>>2]){s[e+24>>2]=1,r=r+8|0,s[e+8>>2]=r,s[e>>2]=s[e>>2]<<8;break e}r=0,s[e+8>>2]=0}f=t+-1|0,G=e,$=r,v=s[e>>2],F=v>>>r|0,w=S>>>1&16777215;e:{if(F>>>0>w>>>0){s[e>>2]=v+((w^-1)<<r),v=S-w|0;break e}v=w+1|0}if(y=fn(v)^24,r=$-y|0,s[G+8>>2]=r,S=(v<<y)+-1|0,s[e+4>>2]=S,N=(F>>>0>w>>>0)<<f|N,y=(t|0)>1,t=f,!y)break}return N}function rc(e,t,r){var f=0;e:{if((e|0)==(t|0))break e;if((t-e|0)-r>>>0<=0-(r<<1)>>>0)return Sn(e,t,r);f=(e^t)&3;t:{i:{if(e>>>0<t>>>0){if(f){f=e;break t}if(!(e&3)){f=e;break i}for(f=e;;){if(!r)break e;if(c[f|0]=A[t|0],t=t+1|0,r=r+-1|0,f=f+1|0,!(f&3))break}break i}r:{if(f)break r;if(e+r&3)for(;;){if(!r)break e;if(r=r+-1|0,f=r+e|0,c[f|0]=A[t+r|0],!(f&3))break}if(r>>>0<=3)break r;for(;r=r+-4|0,s[r+e>>2]=s[t+r>>2],r>>>0>3;);}if(!r)break e;for(;r=r+-1|0,c[r+e|0]=A[t+r|0],!!r;);break e}if(r>>>0<=3)break t;for(;s[f>>2]=s[t>>2],t=t+4|0,f=f+4|0,r=r+-4|0,r>>>0>3;);}if(!r)break e;for(;c[f|0]=A[t|0],f=f+1|0,t=t+1|0,r=r+-1|0,!!r;);}return e}function wu(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0;for(f=e+-17|0,y=e+-18|0,v=e+-19|0,w=e+-20|0,S=e+-21|0,F=e+-22|0,N=e+-23|0,G=e+-24|0,$=e+-25|0,ce=e+-26|0,xe=e+-27|0,Ne=e+-28|0,$e=e+-29|0,gt=e+-30|0,At=e+-31|0,Bt=e+-32|0,Yt=s[2548]-A[e+-33|0]|0;t=A[e+-1|0]+Yt|0,c[e|0]=A[t+A[Bt|0]|0],c[e+1|0]=A[A[At|0]+t|0],c[e+2|0]=A[A[gt|0]+t|0],c[e+3|0]=A[A[$e|0]+t|0],c[e+4|0]=A[A[Ne|0]+t|0],c[e+5|0]=A[A[xe|0]+t|0],c[e+6|0]=A[A[ce|0]+t|0],c[e+7|0]=A[A[$|0]+t|0],c[e+8|0]=A[A[G|0]+t|0],c[e+9|0]=A[A[N|0]+t|0],c[e+10|0]=A[A[F|0]+t|0],c[e+11|0]=A[A[S|0]+t|0],c[e+12|0]=A[A[w|0]+t|0],c[e+13|0]=A[A[v|0]+t|0],c[e+14|0]=A[A[y|0]+t|0],c[e+15|0]=A[A[f|0]+t|0],e=e+32|0,r=r+1|0,(r|0)!=16;);}function yo(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0;e:{if(!r||(f=e+r|0,c[f+-1|0]=t,c[e|0]=t,r>>>0<3)||(c[f+-2|0]=t,c[e+1|0]=t,c[f+-3|0]=t,c[e+2|0]=t,r>>>0<7)||(c[f+-4|0]=t,c[e+3|0]=t,r>>>0<9)||(f=0-e&3,y=f+e|0,t=W(t&255,16843009),s[y>>2]=t,r=r-f&-4,f=r+y|0,s[f+-4>>2]=t,r>>>0<9)||(s[y+8>>2]=t,s[y+4>>2]=t,s[f+-8>>2]=t,s[f+-12>>2]=t,r>>>0<25)||(s[y+24>>2]=t,s[y+20>>2]=t,s[y+16>>2]=t,s[y+12>>2]=t,s[f+-16>>2]=t,s[f+-20>>2]=t,s[f+-24>>2]=t,s[f+-28>>2]=t,w=y&4|24,r=r-w|0,r>>>0<32))break e;for(f=t,v=t,t=y+w|0;s[t+24>>2]=v,s[t+28>>2]=f,s[t+16>>2]=v,s[t+20>>2]=f,s[t+8>>2]=v,s[t+12>>2]=f,s[t>>2]=v,s[t+4>>2]=f,t=t+32|0,r=r+-32|0,r>>>0>31;);}return e|0}function xs(e,t,r){var f=0,y=0,v=0,w=0;f=br-144|0,br=f;e:{if(!r){v=2;break e}t:{if(!e){y=2;break t}s[r>>2]=0,s[r+4>>2]=0,s[r+32>>2]=0,s[r+36>>2]=0,s[r+24>>2]=0,s[r+28>>2]=0,w=r+16|0,v=w,s[v>>2]=0,s[v+4>>2]=0,y=r+8|0,s[y>>2]=0,s[y+4>>2]=0,v=3;i:switch(y=Xa(e,t,r,r+4|0,y,r+12|0,w,0),y|0){case 7:break e;case 0:break i;default:break t}if(s[f+140>>2]=0,s[f+132>>2]=0,s[f+136>>2]=0,s[f+124>>2]=0,s[f+128>>2]=0,s[f+116>>2]=0,s[f+120>>2]=0,s[f+100>>2]=0,s[f+104>>2]=0,s[f+108>>2]=0,s[f+112>>2]=0,s[f+92>>2]=0,s[f+96>>2]=0,s[f+108>>2]=r+124,y=r+40|0,s[f+88>>2]=y,sf(y,r)){o0(f),s[f>>2]=s[r+40>>2],s[f+4>>2]=s[r>>2],s[f+8>>2]=s[r+4>>2],s[f+88>>2]=f,v=Co(e,t,f+88|0),v||(v=Vl(f,y)),D0(f);break e}v=Co(e,t,f+88|0);break e}v=y}return br=f+144|0,v}function fo(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0;f=br-32|0,br=f,y=s[e+28>>2],s[f+16>>2]=y,v=s[e+20>>2],s[f+28>>2]=r,s[f+24>>2]=t,t=v-y|0,s[f+20>>2]=t,y=t+r|0,N=2,t=f+16|0;e:{t:{i:{if(!N0($l(s[e+60>>2],f+16|0,2,f+12|0)|0))for(;;){if(v=s[f+12>>2],(v|0)==(y|0))break i;if((v|0)<=-1)break t;if(w=s[t+4>>2],S=v>>>0>w>>>0,F=(S<<3)+t|0,w=v-(S?w:0)|0,s[F>>2]=w+s[F>>2],F=(S?12:4)+t|0,s[F>>2]=s[F>>2]-w,y=y-v|0,t=S?t+8|0:t,N=N-S|0,!!N0($l(s[e+60>>2],t|0,N|0,f+12|0)|0))break}if(s[f+12>>2]=-1,(y|0)!=-1)break t}t=s[e+44>>2],s[e+28>>2]=t,s[e+20>>2]=t,s[e+16>>2]=t+s[e+48>>2],e=r;break e}if(s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e>>2]=s[e>>2]|32,e=0,(N|0)==2)break e;e=r-s[t+4>>2]|0}return br=f+32|0,e|0}function ma(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;v=W(s[e+8>>2],s[e+52>>2]),w=s[e+80>>2],S=s[e+68>>2],t=s[e+24>>2];e:{if(!t){if((v|0)<1)break e;for(;r=Jr(s[e+16>>2],0,s[(f<<2)+w>>2],0)+-2147483648|0,t=yr,t=r>>>0<2147483648?t+1|0:t,c[f+S|0]=(t|0)>255?-1:t,f=f+1|0,(v|0)!=(f|0););break e}if(r=0-t|0,t=s[e+32>>2],t=Du(0,r,t,t>>31),(v|0)<1)break e;for(F=s[e+76>>2],N=t,G=0-t|0;t=s[e+16>>2],r=f<<2,y=Jr(G,xe,s[r+w>>2],0),$=yr,ce=t,t=y,y=Jr(N,Ne,s[r+F>>2],0),r=t+y|0,t=yr+$|0,t=r>>>0<y>>>0?t+1|0:t,y=r+-2147483648|0,r=Jr(ce,0,y>>>0<2147483648?t+1|0:t,0)+-2147483648|0,t=yr,t=r>>>0<2147483648?t+1|0:t,c[f+S|0]=(t|0)>255?-1:t,f=f+1|0,(v|0)!=(f|0););}}function xu(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0,gt=0,At=0,Bt=0,Yt=0,yi=0;if((r|0)>=1)for(y=s[f+-4>>2];G=N<<2,v=G+t|0,w=s[v>>2],v=s[v+-4>>2],F=v&255,$=(w&255)-F|0,ce=(y&255)-F|0,F=ce>>31,xe=v>>>24|0,Ne=(y>>>24|0)-xe|0,$e=Ne>>31,gt=v>>>8&255,At=(y>>>8&255)-gt|0,S=At>>31,Bt=v>>>16&255,Yt=(y>>>16&255)-Bt|0,v=Yt>>31,yi=y,y=(w>>>24|0)-xe|0,S=((((F^F+ce)+(($|0)<0?$:0-$|0)|0)+($e^$e+Ne)|0)+((y|0)<0?y:0-y|0)|0)+(S^S+At)|0,y=(w>>>8&255)-gt|0,S=(S+((y|0)<0?y:0-y|0)|0)+(v^v+Yt)|0,y=(w>>>16&255)-Bt|0,y=(S+((y|0)<0?y:0-y|0)|0)<1?w:yi,w=s[e+G>>2],y=(y&-16711936)+(w&-16711936)&-16711936|(y&16711935)+(w&16711935)&16711935,s[f+G>>2]=y,N=N+1|0,(N|0)!=(r|0););}function jl(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0;v=s[e+104>>2];e:{if(!v)break e;y=s[e+16>>2],f=s[e+8>>2],w=s[t>>2];t:{if(!s[e+56>>2]){t=f;break t}i:{if(!f){r=y+-1|0,t=0;break i}v=v-s[e>>2]|0,r=y,t=f+-1|0}if(f=f+y|0,y=s[e+84>>2],f=f+y|0,(f|0)!=s[e+88>>2]){y=r;break t}y=f-(t+y|0)|0}if((y|0)<1)break e;for(S=s[e+12>>2],$=s[w>>2],r=s[w+20>>2],N=s[w+16>>2]+W(r,t)|0,F=N+1|0,t=15;;){if(f=0,(S|0)>=1){for(;r=(f<<1)+F|0,ce=r,xe=A[r|0]&240,r=A[f+v|0]>>>4|0,c[ce|0]=xe|r,t=t&r,f=f+1|0,(S|0)!=(f|0););r=s[w+20>>2]}if(F=r+F|0,v=s[e>>2]+v|0,G=G+1|0,(G|0)==(y|0))break}if((t|0)==15|$+-7>>>0>3)break e;Je[s[2665]](N,S,y,r)}return 0}function Ul(e,t,r){e:{t:{if(t>>>0>20)break t;i:switch(t+-9|0){case 0:t=s[r>>2],s[r>>2]=t+4,s[e>>2]=s[t>>2];return;case 1:t=s[r>>2],s[r>>2]=t+4,t=s[t>>2],s[e>>2]=t,s[e+4>>2]=t>>31;return;case 2:t=s[r>>2],s[r>>2]=t+4,s[e>>2]=s[t>>2],s[e+4>>2]=0;return;case 4:t=s[r>>2],s[r>>2]=t+4,t=_i[t>>1],s[e>>2]=t,s[e+4>>2]=t>>31;return;case 5:t=s[r>>2],s[r>>2]=t+4,s[e>>2]=tr[t>>1],s[e+4>>2]=0;return;case 6:t=s[r>>2],s[r>>2]=t+4,t=c[t|0],s[e>>2]=t,s[e+4>>2]=t>>31;return;case 7:t=s[r>>2],s[r>>2]=t+4,s[e>>2]=A[t|0],s[e+4>>2]=0;return;case 3:case 8:break e;case 9:break i;default:break t}Je[0](e,r)}return}t=s[r>>2]+7&-8,s[r>>2]=t+8,r=s[t+4>>2],s[e>>2]=s[t>>2],s[e+4>>2]=r}function ml(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0;y=s[e+16>>2],v=s[t+24>>2],r=s[s[t>>2]>>2];e:{if(r+-7>>>0>3&&!(1<<r&4154&&r>>>0<=12)||(r=s[e+104>>2],!r))break e;lc(s[e+20>>2],s[e+32>>2],r,s[e>>2],s[e+12>>2],y,0)}if((y|0)<1)return 0;for(w=y+1>>1,S=s[e+32>>2],f=s[e+20>>2],r=y;F=Ho(v,r,f,S),f=W(F,S)+f|0,N=Lu(v)+N|0,r=r-F|0,(r|0)>0;);if((y|0)>=1){for(y=s[t+28>>2],v=s[e+36>>2],f=s[e+24>>2],r=w;S=Ho(y,r,f,v),Lu(y),f=W(v,S)+f|0,r=r-S|0,(r|0)>0;);for(f=s[e+28>>2],t=s[t+32>>2],e=s[e+36>>2];r=Ho(t,w,f,e),Lu(t),f=W(e,r)+f|0,w=w-r|0,(w|0)>0;);}return N|0}function Dn(e,t){var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0;e:{if(!(s[e+24>>2]|(t|0)>24)){if(r=s[e+20>>2],y=r+t|0,s[e+20>>2]=y,S=s[(t<<2)+9312>>2],w=s[e+4>>2],f=w,t=r&63,r=t&31,v=s[e>>2],N=S&(32<=(t&63)>>>0?f>>>r|0:((1<<r)-1&f)<<32-r|v>>>r),(y|0)<8)break e;for(t=s[e+16>>2],F=s[e+12>>2],S=t>>>0>F>>>0?t:F;;){t:{if((t|0)==(S|0)){t=S,f=y;break t}if(f=w,v=(f&255)<<24|v>>>8,f=f>>>8|0,w=f,s[e>>2]=v,s[e+4>>2]=f,r=A[s[e+8>>2]+t|0],f=y+-8|0,s[e+20>>2]=f,t=t+1|0,s[e+16>>2]=t,r=w|r<<24,w=r,s[e>>2]=v,s[e+4>>2]=r,r=(y|0)>15,y=f,r)continue}break}if((t|0)!=(F|0)|(f|0)<65)break e;return s[e+20>>2]=0,s[e+24>>2]=1,N}s[e+20>>2]=0,s[e+24>>2]=1}return N}function Vs(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;y=W(s[e+8>>2],s[e+52>>2]),w=s[e+76>>2],S=s[e+68>>2],t=W(s[e+24>>2],s[e+16>>2]);e:{if(t){if((y|0)<1)break e;for(v=s[e+80>>2],G=0-t|0,t=0;f=s[e+20>>2],r=t<<2,F=r+w|0,$=s[F>>2],Jr(s[r+v>>2],0,G,0),N=yr,f=Jr(f,0,$-N|0,0)+-2147483648|0,r=yr,r=f>>>0<2147483648?r+1|0:r,c[t+S|0]=(r|0)>255?-1:r,s[F>>2]=N,t=t+1|0,(y|0)!=(t|0););break e}if((y|0)<1)break e;for(t=0;v=(t<<2)+w|0,f=Jr(s[e+20>>2],0,s[v>>2],0)+-2147483648|0,r=yr,r=f>>>0<2147483648?r+1|0:r,c[t+S|0]=(r|0)>255?-1:r,s[v>>2]=0,t=t+1|0,(y|0)!=(t|0););}}function oo(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0;if((r|0)>=1)for(v=s[f+-4>>2];F=S<<2,w=F+t|0,y=s[w>>2],v=((y^v)>>>1&2139062143)+(y&v)|0,y=v&255,w=s[w+-4>>2],y=((y-(w&255)|0)/2|0)+y|0,N=y>>>0<256?y:(y^-1)>>>24|0,y=v>>>24|0,y=((y-(w>>>24|0)|0)/2|0)+y|0,N=N|(y>>>0<256?y:y>>>24^-1)<<24,y=v>>>16&255,y=((y-(w>>>16&255)|0)/2|0)+y|0,v=v>>>8&255,v=((v-(w>>>8&255)|0)/2|0)+v|0,v=N|(y>>>0<256?y:(y^-1)>>>24|0)<<16|(v>>>0<256?v:(v^-1)>>>24|0)<<8,w=s[e+F>>2],v=(v&-16711936)+(w&-16711936)&-16711936|(v&16711935)+(w&16711935)&16711935,s[f+F>>2]=v,S=S+1|0,(S|0)!=(r|0););}function ql(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0;f=s[e+36>>2];e:{if(s[f+64>>2]>=s[f+56>>2])break e;v=s[e>>2],G=s[v>>2]+-7|0,y=s[v+20>>2],N=s[v+16>>2]+W(y,t)|0,S=s[f+52>>2],t=15;t:{if((r|0)<1|s[f+24>>2]>0)break t;for(F=N+1|0;;){if(Si(f),f=0,(S|0)>=1)for(;y=(f<<1)+F|0,$=y,ce=A[y|0]&240,y=A[s[s[e+36>>2]+68>>2]+f|0]>>>4|0,c[$|0]=ce|y,t=t&y,f=f+1|0,(S|0)!=(f|0););if(y=s[v+20>>2],f=s[e+36>>2],w=w+1|0,s[f+64>>2]>=s[f+56>>2]|(w|0)>=(r|0))break t;if(F=y+F|0,!(s[f+24>>2]<=0))break}}if((t|0)==15|G>>>0>3)break e;Je[s[2665]](N,S,w,y)}return w|0}function Vl(e,t){var r=0,f=0;s[t+4>>2]=s[e+4>>2],s[t+8>>2]=s[e+8>>2],r=2;e:{if(go(t))break e;r=s[e+16>>2],f=s[e>>2];t:{if(f>>>0<=10){el(r,s[e+20>>2],s[t+16>>2],s[t+20>>2],W(s[e+4>>2],A[f+1157|0]),s[e+8>>2]);break t}if(el(r,s[e+32>>2],s[t+16>>2],s[t+32>>2],s[e+4>>2],s[e+8>>2]),el(s[e+20>>2],s[e+36>>2],s[t+20>>2],s[t+36>>2],(s[e+4>>2]+1|0)/2|0,(s[e+8>>2]+1|0)/2|0),el(s[e+24>>2],s[e+40>>2],s[t+24>>2],s[t+40>>2],(s[e+4>>2]+1|0)/2|0,(s[e+8>>2]+1|0)/2|0),f=s[e>>2],!(1<<f&4154&&f>>>0<=12)&&(r=0,f+-7>>>0>3))break e;el(s[e+28>>2],s[e+44>>2],s[t+28>>2],s[t+44>>2],s[e+4>>2],s[e+8>>2])}r=0}return r}function nc(e,t){var r=0,f=0,y=0,v=0;e:{if(s[e+2308>>2]<1||(r=s[e+2300>>2],(r|0)<s[e+300>>2]))break e;f=(r|0)<=s[e+308>>2]}r=e+160|0;e:{if(!s[e+148>>2]){s[e+168>>2]=f,s[e+164>>2]=s[e+2300>>2],eu(e,r),v=Bo(e,t);break e}if(y=e+124|0,!(Je[s[2559]](y)&1))break e;Sn(e+180|0,t,108),s[e+168>>2]=f,s[e+160>>2]=s[e+152>>2],s[e+164>>2]=s[e+2300>>2];t:{if(s[e+148>>2]==2){t=s[e+2304>>2],r=e+176|0,s[e+2304>>2]=s[r>>2],s[r>>2]=t;break t}eu(e,r)}return f&&(t=s[e+2260>>2],f=e+172|0,s[e+2260>>2]=s[f>>2],s[f>>2]=t),Je[s[2560]](y),t=s[e+152>>2]+1|0,s[e+152>>2]=(t|0)==s[e+156>>2]?0:t,1}return v}function Yc(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0,G=0;if((r|0)>=1)for(y=s[f+-4>>2];N=F<<2,w=N+t|0,S=s[w>>2],w=s[w+-4>>2],v=((S&255)+(y&255)|0)-(w&255)|0,G=v>>>0<256?v:(v^-1)>>>24|0,v=(S>>>24)+(y>>>24)-(w>>>24)|0,G=G|(v>>>0<256?v:v>>>24^-1)<<24,v=((S>>>16&255)+(y>>>16&255)|0)-(w>>>16&255)|0,y=((S>>>8&255)+(y>>>8&255)|0)-(w>>>8&255)|0,y=G|(v>>>0<256?v:(v^-1)>>>24|0)<<16|(y>>>0<256?y:(y^-1)>>>24|0)<<8,S=s[e+N>>2],y=(y&-16711936)+(S&-16711936)&-16711936|(y&16711935)+(S&16711935)&16711935,s[f+N>>2]=y,F=F+1|0,(F|0)!=(r|0););}function Da(e,t,r,f,y,v,w,S,F){var N=0,G=0,$=0,ce=0;s[e+72>>2]=w,s[e+68>>2]=f,s[e+60>>2]=0,s[e+64>>2]=0,s[e+56>>2]=v,s[e+52>>2]=y,s[e+48>>2]=r,s[e+44>>2]=t,s[e+8>>2]=S,w=(r|0)<(v|0),s[e+4>>2]=w,N=(t|0)<(y|0),s[e>>2]=N,G=N?t+-1|0:y,s[e+40>>2]=G,f=N?y+-1|0:t,s[e+36>>2]=f,N||($=e,ce=Du(0,1,G,G>>31),s[$+12>>2]=ce),t=v-w|0,s[e+32>>2]=t,r=r-w|0,s[e+28>>2]=r;e:{if(!w){s[e+24>>2]=r,r=W(r,f),r=Du(0,v,r,r>>31),f=yr,s[e+20>>2]=(f|0)==1&r>>>0<0|f>>>0<1?r:0;break e}s[e+24>>2]=t,t=f}s[e+76>>2]=F,$=e,ce=Du(0,1,t,t>>31),s[$+16>>2]=ce,t=e,e=W(y,S),s[t+80>>2]=(e<<2)+F,yo(F,0,e<<3),Hs()}function Jc(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0;v=A[e+-31|0],t=v+1|0,r=A[e+-30|0],y=t+r>>>1|0,c[e+64|0]=y,S=A[e+-32|0],c[e|0]=S+t>>>1,t=A[e+-29|0],f=(t+r|0)+1>>>1|0,c[e+65|0]=f,c[e+1|0]=y,y=A[e+-28|0],w=(y+t|0)+1>>>1|0,c[e+66|0]=w,c[e+2|0]=f,c[e+3|0]=w,f=t+2|0,w=(f+v|0)+(r<<1)>>>2|0,c[e+96|0]=w,r=r+2|0,c[e+32|0]=(r+S|0)+(v<<1)>>>2,v=y+(r+(t<<1)|0)>>>2|0,c[e+97|0]=v,c[e+33|0]=w,S=A[e+-25|0],r=A[e+-26|0],t=A[e+-27|0],f=t+(f+(y<<1)|0)>>>2|0,c[e+98|0]=f,c[e+34|0]=v,c[e+99|0]=(S+(t+(r<<1)|0)|0)+2>>>2,c[e+67|0]=(r+(y+(t<<1)|0)|0)+2>>>2,c[e+35|0]=f}function za(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0;w=A[e+63|0],f=A[e+31|0],r=(w+f|0)+1>>>1|0,c[e+98|0]=r,S=A[e+95|0],c[e+96|0]=(S+w|0)+1>>>1,c[e+64|0]=r,y=A[e+-1|0],t=y+1|0,r=A[e+-33|0],v=t+r>>>1|0,c[e+34|0]=v,t=t+f>>>1|0,c[e+66|0]=t,c[e|0]=v,c[e+32|0]=t,t=A[e+-32|0],v=y+2|0,F=t+(v+(r<<1)|0)>>>2|0,c[e+35|0]=F,N=A[e+-31|0],c[e+3|0]=(A[e+-30|0]+(t+(N<<1)|0)|0)+2>>>2,c[e+2|0]=((r+(t<<1)|0)+N|0)+2>>>2,t=y<<1,y=f+2|0,r=r+(t+y|0)>>>2|0,c[e+67|0]=r,c[e+1|0]=F,f=(w+v|0)+(f<<1)>>>2|0,c[e+99|0]=f,c[e+33|0]=r,c[e+97|0]=(y+S|0)+(w<<1)>>>2,c[e+65|0]=f}function ku(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0;f=A[e+-32|0],y=f+1|0,t=A[e+-33|0],r=y+t>>>1|0,c[e+65|0]=r,v=A[e+-31|0],w=y+v>>>1|0,c[e+66|0]=w,c[e|0]=r,y=A[e+-30|0],r=(y+v|0)+1>>>1|0,c[e+67|0]=r,c[e+1|0]=w,w=A[e+-29|0],c[e+3|0]=(w+y|0)+1>>>1,c[e+2|0]=r,r=A[e+-1|0],S=r+2|0,F=A[e+31|0],c[e+96|0]=(S+A[e+63|0]|0)+(F<<1)>>>2,S=f+(S+(t<<1)|0)>>>2|0,c[e+97|0]=S,t=t+2|0,c[e+64|0]=(t+F|0)+(r<<1)>>>2,t=(t+(f<<1)|0)+v>>>2|0,c[e+98|0]=t,c[e+32|0]=S,f=(y+(f+(v<<1)|0)|0)+2>>>2|0,c[e+99|0]=f,c[e+33|0]=t,c[e+35|0]=(w+((y<<1)+v|0)|0)+2>>>2,c[e+34|0]=f}function Rr(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;f=s[e+36>>2];e:{if(s[f+64>>2]>=s[f+56>>2])break e;v=s[e>>2],y=s[v>>2],S=(y|0)==4|(y|0)==9,$=y+-7|0,w=s[v+20>>2],F=s[v+16>>2]+W(w,t)|0,N=s[f+52>>2],y=0,t=0;t:{if((r|0)<1||(t=0,s[f+24>>2]>0))break t;for(t=(S?0:3)+F|0;;){i:{if(Si(f),G=Je[s[2666]](s[s[e+36>>2]+68>>2],0,N,1,t,0)|G,w=s[v+20>>2],f=s[e+36>>2],y=y+1|0,s[f+64>>2]>=s[f+56>>2]|(y|0)>=(r|0))break i;if(t=t+w|0,s[f+24>>2]<=0)continue}break}t=(G|0)!=0}if(!t|$>>>0>3)break e;Je[s[2664]](F,S,N,y,w)}return y|0}function Yr(e,t,r){var f=0,y=0,v=0;f=br-208|0,br=f,s[f+204>>2]=r,r=0,yo(f+160|0,0,40),s[f+200>>2]=s[f+204>>2];e:{if((lt(0,t,f+200|0,f+80|0,f+160|0)|0)<0)break e;r=s[e+76>>2]>=0?1:r,y=s[e>>2],c[e+74|0]<=0&&(s[e>>2]=y&-33),v=y&32;t:{if(s[e+48>>2]){lt(e,t,f+200|0,f+80|0,f+160|0);break t}if(s[e+48>>2]=80,s[e+16>>2]=f+80,s[e+28>>2]=f,s[e+20>>2]=f,y=s[e+44>>2],s[e+44>>2]=f,lt(e,t,f+200|0,f+80|0,f+160|0),!y)break t;Je[s[e+36>>2]](e,0,0)|0,s[e+48>>2]=0,s[e+44>>2]=y,s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0}if(s[e>>2]=v|s[e>>2],!r)break e}br=f+208|0}function au(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;y=s[t>>2],v=s[y+28>>2],F=s[t+16>>2],w=s[y+44>>2],S=v+W(F,w)|0,f=s[e+104>>2];e:{if(f){if(r=s[e+16>>2],(r|0)<1)break e;for(G=s[y+32>>2],v=s[t+36>>2],w=s[e>>2],$=s[y+16>>2],e=0;N=Ho(v,r,f,w),f=W(w,N)+f|0,e=Lu(v)+e|0,r=r-N|0,(r|0)>0;);if((e|0)<1)break e;return lc(W(F,G)+$|0,s[y+32>>2],S,s[y+44>>2],s[s[t+36>>2]+52>>2],e,1),0}if(!v|(r|0)<1)break e;for(e=s[e+96>>2],f=0;S=yo(S,255,e)+w|0,f=f+1|0,(f|0)!=(r|0););}return 0}function Au(e){e=e|0;var t=0,r=0,f=0,y=0,v=0;r=A[e+31|0],f=r+2|0,t=A[e+63|0],c[e+96|0]=A[e+95|0]+(f+(t<<1)|0)>>>2,v=r<<1,r=A[e+-1|0],y=r+2|0,t=t+(v+y|0)>>>2|0,c[e+97|0]=t,c[e+64|0]=t,t=f+(r<<1)|0,r=A[e+-33|0],t=t+r>>>2|0,c[e+98|0]=t,c[e+65|0]=t,c[e+32|0]=t,f=A[e+-32|0],t=(f+y|0)+(r<<1)>>>2|0,c[e+99|0]=t,c[e+66|0]=t,c[e+33|0]=t,c[e|0]=t,v=A[e+-29|0],t=A[e+-30|0],y=r,r=A[e+-31|0],y=((y+r|0)+(f<<1)|0)+2>>>2|0,c[e+67|0]=y,c[e+34|0]=y,c[e+1|0]=y,f=((t+f|0)+(r<<1)|0)+2>>>2|0,c[e+35|0]=f,c[e+2|0]=f,c[e+3|0]=((r+v|0)+(t<<1)|0)+2>>>2}function Ho(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;e:{if((t|0)<1)break e;for(;;){if(s[e+24>>2]<1&&s[e+64>>2]<s[e+56>>2])break e;if(s[e+4>>2]&&(G=e,$=cd(s[e+76>>2],s[e+80>>2]),s[G+76>>2]=$,s[e+80>>2]=yr),id(e,r),!(s[e+4>>2]|(W(s[e+52>>2],s[e+8>>2])|0)<1))for(F=s[e+76>>2],N=s[e+80>>2],y=0;w=y<<2,S=w+F|0,s[S>>2]=s[S>>2]+s[N+w>>2],y=y+1|0,(y|0)<(W(s[e+52>>2],s[e+8>>2])|0););if(s[e+60>>2]=s[e+60>>2]+1,s[e+24>>2]=s[e+24>>2]-s[e+32>>2],r=r+f|0,v=v+1|0,(v|0)==(t|0))break}v=t}return v}function uo(e){var t=0,r=0,f=0;if(e){if(t=e+160|0,gn(s[t>>2]),gn(s[e+172>>2]),r=e+168|0,B0(s[r>>2]),zu(e+124|0),f=e+136|0,zu(f),s[r>>2]=0,s[r+4>>2]=0,s[t>>2]=0,s[t+4>>2]=0,s[e+152>>2]=0,s[e+156>>2]=0,s[e+144>>2]=0,s[e+148>>2]=0,s[f>>2]=0,s[f+4>>2]=0,s[e+128>>2]=0,s[e+132>>2]=0,s[e+120>>2]=0,s[e+124>>2]=0,gn(s[e+16>>2]),t=0,s[e+16>>2]=0,s[e+176>>2]>=1)for(;r=(W(t,20)+e|0)+196|0,gn(s[r>>2]),s[r>>2]=0,t=t+1|0,(t|0)<s[e+176>>2];);s[e+260>>2]=0,s[e+176>>2]=0,gn(s[e+264>>2]),s[e+12>>2]=0,s[e+264>>2]=0}}function gl(){s[2545]!=s[2673]&&(s[2703]=32,s[2674]=33,s[2706]=34,s[2704]=35,s[2705]=36,s[2707]=37,s[2708]=38,s[2712]=39,s[2709]=40,s[2710]=41,s[2714]=42,s[2716]=43,s[2717]=44,s[2718]=45,s[2719]=46,s[2713]=47,s[2711]=48,s[2715]=49,s[2690]=50,s[2688]=51,s[2686]=52,s[2685]=53,s[2684]=54,s[2693]=55,s[2692]=56,s[2691]=57,s[2689]=58,s[2687]=59,s[2682]=60,s[2681]=61,s[2680]=62,s[2679]=63,s[2678]=64,s[2677]=65,s[2676]=66,s[2702]=67,s[2701]=68,s[2700]=69,s[2699]=70,s[2698]=71,s[2697]=72,s[2696]=73,s[2720]=74,s[2545]=s[2673])}function Na(e){e=e|0;var t=0,r=0,f=0,y=0,v=0;t=A[e+-29|0],y=t+2|0,f=A[e+-31|0],r=A[e+-30|0],v=(y+f|0)+(r<<1)>>>2|0,c[e+32|0]=v,r=r+2|0,c[e|0]=(r+A[e+-32|0]|0)+(f<<1)>>>2,f=A[e+-28|0],r=f+(r+(t<<1)|0)>>>2|0,c[e+64|0]=r,c[e+1|0]=v,c[e+33|0]=r,t=y+(f<<1)|0,y=A[e+-27|0],t=t+y>>>2|0,c[e+96|0]=t,c[e+2|0]=r,c[e+65|0]=t,c[e+34|0]=t,c[e+3|0]=t,t=A[e+-26|0],f=(t+(f+(y<<1)|0)|0)+2>>>2|0,c[e+97|0]=f,r=A[e+-25|0],y=(r+(y+(t<<1)|0)|0)+2>>>2|0,c[e+98|0]=y,c[e+35|0]=f,c[e+66|0]=f,c[e+99|0]=((r+t|0)+(r<<1)|0)+2>>>2,c[e+67|0]=y}function Cc(e){e=e|0;var t=0,r=0,f=0,y=0,v=0;r=A[e+63|0],t=r+2|0,v=A[e+95|0],f=W((t+v|0)+(v<<1)>>>2|0,16843009),c[e+96|0]=f,c[e+97|0]=f>>>8,c[e+98|0]=f>>>16,c[e+99|0]=f>>>24,y=A[e+31|0],f=y+2|0,r=W(v+(f+(r<<1)|0)>>>2|0,16843009),c[e+64|0]=r,c[e+65|0]=r>>>8,c[e+66|0]=r>>>16,c[e+67|0]=r>>>24,v=t,t=A[e+-1|0],y=W((v+t|0)+(y<<1)>>>2|0,16843009),c[e+32|0]=y,c[e+33|0]=y>>>8,c[e+34|0]=y>>>16,c[e+35|0]=y>>>24,t=W((A[e+-33|0]+f|0)+(t<<1)>>>2|0,16843009),c[e|0]=t,c[e+1|0]=t>>>8,c[e+2|0]=t>>>16,c[e+3|0]=t>>>24}function yl(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if(c[y|0]=A[e|0],(t|0)>=2)for(S=t+-1|0,F=y+1|0,w=e+1|0;c[v+F|0]=A[v+w|0]-A[e+v|0],v=v+1|0,(S|0)!=(v|0););if((r|0)>=2)for(G=f^-1,$=(t|0)<2,F=1;;){if(y=f+y|0,S=e+f|0,c[y|0]=A[S|0]-A[e|0],v=1,!$)for(;N=v+S|0,w=(A[e+v|0]+A[N+-1|0]|0)-A[S+(v+G|0)|0]|0,w=(w|0)>0?w:0,c[y+v|0]=A[N|0]-((w|0)<255?w:255),v=v+1|0,(v|0)!=(t|0););if(e=S,F=F+1|0,(F|0)==(r|0))break}}function To(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;F=A[r+S|0],$=A[t+S|0],N=A[e+S|0],v=(S<<2)+f|0,c[v|0]=255,N=W(N,19077)>>>8|0,G=N+(W($,33050)>>>8|0)|0,w=G+-17685|0,c[v+3|0]=w>>>0<16384?w>>>6|0:G>>>0<17685?0:255,G=N+(W(F,26149)>>>8|0)|0,w=G+-14234|0,c[v+1|0]=w>>>0<16384?w>>>6|0:G>>>0<14234?0:255,w=v,v=N-(W($,6419)>>>8|0)-(W(F,13320)>>>8)|0,F=v+8708|0,c[w+2|0]=F>>>0<16384?F>>>6|0:(v|0)<-8708?0:255,S=S+1|0,(S|0)!=(y|0););}function Oo(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;F=A[t+S|0],$=A[r+S|0],N=A[e+S|0],v=(S<<2)+f|0,c[v+3|0]=255,N=W(N,19077)>>>8|0,G=N+(W($,26149)>>>8|0)|0,w=G+-14234|0,c[v+2|0]=w>>>0<16384?w>>>6|0:G>>>0<14234?0:255,G=N+(W(F,33050)>>>8|0)|0,w=G+-17685|0,c[v|0]=w>>>0<16384?w>>>6|0:G>>>0<17685?0:255,w=v,v=N-(W(F,6419)>>>8|0)-(W($,13320)>>>8)|0,F=v+8708|0,c[w+1|0]=F>>>0<16384?F>>>6|0:(v|0)<-8708?0:255,S=S+1|0,(S|0)!=(y|0););}function Tc(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;F=A[r+S|0],$=A[t+S|0],N=A[e+S|0],v=(S<<2)+f|0,c[v+3|0]=255,N=W(N,19077)>>>8|0,G=N+(W($,33050)>>>8|0)|0,w=G+-17685|0,c[v+2|0]=w>>>0<16384?w>>>6|0:G>>>0<17685?0:255,G=N+(W(F,26149)>>>8|0)|0,w=G+-14234|0,c[v|0]=w>>>0<16384?w>>>6|0:G>>>0<14234?0:255,w=v,v=N-(W($,6419)>>>8|0)-(W(F,13320)>>>8)|0,F=v+8708|0,c[w+1|0]=F>>>0<16384?F>>>6|0:(v|0)<-8708?0:255,S=S+1|0,(S|0)!=(y|0););}function Ds(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;N=(S<<1)+f|0,F=W(A[e+S|0],19077)>>>8|0,v=A[r+S|0],G=F+(W(v,26149)>>>8|0)|0,w=G+-14234|0,$=(w>>>0<16384?w>>>6|0:G>>>0<14234?0:248)&248,G=A[t+S|0],v=F-(W(G,6419)>>>8|0)-(W(v,13320)>>>8)|0,w=v+8708|0,v=w>>>0<16384?w>>6:(v|0)<-8708?0:255,c[N|0]=$|v>>>5,w=N,F=F+(W(G,33050)>>>8|0)|0,N=F+-17685|0,c[w+1|0]=v<<3&224|(N>>>0<16384?N>>>9|0:F>>>0<17685?0:31),S=S+1|0,(S|0)!=(y|0););}function I(e,t){var r=0,f=0,y=0,v=0,w=0;f=s[e+8>>2],w=s[f+40>>2],r=s[(zr[w+12>>2]<2?f+84|0:e+108|0)>>2],y=s[e+108>>2],r=(y|0)<(r|0)?r:y;e:{if((r|0)>=(t|0)||(y=s[f>>2],f=s[w+136>>2]+W(y,r)|0,Ai(e+180|0,r,t,s[e+16>>2]+W(r,s[e+100>>2])|0,f),v=s[w+12>>2],!v))break e;Je[s[(v<<2)+10912>>2]](s[w+140>>2],f,f,y),v=r+1|0;t:{if((v|0)==(t|0)){r=f;break t}for(;r=f+y|0,Je[s[(s[w+12>>2]<<2)+10912>>2]](f,r,r,y),f=r,v=v+1|0,(v|0)!=(t|0););}s[w+140>>2]=r}s[e+108>>2]=t,s[e+116>>2]=t}function u(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0;if(v=s[e+8>>2],(v|0)>=1)for(G=W(s[e+52>>2],v);;){if((w|0)<(G|0))for(ce=s[e+80>>2],f=0,y=0,S=w,F=w;;){if($=s[e+40>>2],N=0,f=s[e+36>>2]+f|0,(f|0)>=1){for(;N=A[t+F|0],y=N+y|0,r=F+v|0,F=r,f=f-$|0,(f|0)>0;);F=r}if(r=W(f,N),s[(S<<2)+ce>>2]=r+W(y,$),y=Jr(s[e+12>>2],0,0-r|0,0)+-2147483648|0,r=yr,y=y>>>0<2147483648?r+1|0:r,S=v+S|0,!((S|0)<(G|0)))break}if(w=w+1|0,(v|0)==(w|0))break}}function _(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0;r=A[e+-32|0],f=s[2548]-A[e+-33|0]|0,t=f+A[e+-1|0]|0,c[e|0]=A[r+t|0],y=A[e+-31|0],c[e+1|0]=A[t+y|0],v=A[e+-30|0],c[e+2|0]=A[t+v|0],w=A[e+-29|0],c[e+3|0]=A[t+w|0],t=f+A[e+31|0]|0,c[e+32|0]=A[t+r|0],c[e+33|0]=A[t+y|0],c[e+34|0]=A[t+v|0],c[e+35|0]=A[t+w|0],t=f+A[e+63|0]|0,c[e+64|0]=A[t+r|0],c[e+65|0]=A[t+y|0],c[e+66|0]=A[t+v|0],c[e+67|0]=A[t+w|0],t=r,r=f+A[e+95|0]|0,c[e+96|0]=A[t+r|0],c[e+97|0]=A[r+y|0],c[e+98|0]=A[r+v|0],c[e+99|0]=A[r+w|0]}function k(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;S=A[r+v|0],F=(v<<1)+f|0,w=W(A[e+v|0],19077)>>>8|0,$=A[t+v|0],N=w+(W($,33050)>>>8|0)|0,G=N+-17685|0,c[F+1|0]=(G>>>0<16384?G>>>6|0:N>>>0<17685?0:240)|15,G=F,F=w+(W(S,26149)>>>8|0)|0,N=F+-14234|0,S=w-(W($,6419)>>>8|0)-(W(S,13320)>>>8)|0,w=S+8708|0,c[G|0]=(N>>>0<16384?N>>>6|0:F>>>0<14234?0:240)&240|(w>>>0<16384?w>>>10|0:(S|0)<-8708?0:15),v=v+1|0,(v|0)!=(y|0););}function C(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0;y=s[e+104>>2];e:{if(!y)break e;v=s[t>>2],w=s[v>>2],F=(w|0)==4|(w|0)==9,t=s[e+16>>2],f=s[e+8>>2],N=s[e+12>>2];t:{if(!s[e+56>>2]){S=f;break t}if(f?(S=f+-1|0,y=y-s[e>>2]|0,r=t):r=t+-1|0,t=t+f|0,f=s[e+84>>2],t=t+f|0,(t|0)!=s[e+88>>2]){t=r;break t}t=t-(f+S|0)|0}if(f=s[e>>2],e=s[v+20>>2],r=s[v+16>>2]+W(e,S)|0,!(Je[s[2666]](y,f,N,t,r+(F?0:3)|0,e)|0)|w+-7>>>0>3)break e;Je[s[2664]](r,F,N,t,s[v+20>>2])}return 0}function R(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;F=A[t+w|0],S=W(w,3)+f|0,G=W(A[e+w|0],19077)>>>8|0,$=A[r+w|0],v=G+(W($,26149)>>>8|0)|0,N=v+-14234|0,c[S+2|0]=N>>>0<16384?N>>>6|0:v>>>0<14234?0:255,v=G+(W(F,33050)>>>8|0)|0,N=v+-17685|0,c[S|0]=N>>>0<16384?N>>>6|0:v>>>0<17685?0:255,v=S,F=G-(W(F,6419)>>>8|0)-(W($,13320)>>>8)|0,S=F+8708|0,c[v+1|0]=S>>>0<16384?S>>>6|0:(F|0)<-8708?0:255,w=w+1|0,(w|0)!=(y|0););}function H(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((y|0)>=1)for(;F=A[r+w|0],S=W(w,3)+f|0,G=W(A[e+w|0],19077)>>>8|0,$=A[t+w|0],v=G+(W($,33050)>>>8|0)|0,N=v+-17685|0,c[S+2|0]=N>>>0<16384?N>>>6|0:v>>>0<17685?0:255,v=G+(W(F,26149)>>>8|0)|0,N=v+-14234|0,c[S|0]=N>>>0<16384?N>>>6|0:v>>>0<14234?0:255,v=S,F=G-(W($,6419)>>>8|0)-(W(F,13320)>>>8)|0,S=F+8708|0,c[v+1|0]=S>>>0<16384?S>>>6|0:(F|0)<-8708?0:255,w=w+1|0,(w|0)!=(y|0););}function ie(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0;return f=s[t>>2],t=s[t+-4>>2],r=t&255,y=(f&255)-r|0,v=(e&255)-r|0,r=v>>31,w=t>>>24|0,S=(e>>>24|0)-w|0,F=S>>31,N=t>>>8&255,G=(e>>>8&255)-N|0,$=G>>31,ce=t>>>16&255,xe=(e>>>16&255)-ce|0,t=xe>>31,Ne=e,e=(f>>>24|0)-w|0,r=((((r^r+v)+((y|0)<0?y:0-y|0)|0)+(F^F+S)|0)+((e|0)<0?e:0-e|0)|0)+($^$+G)|0,e=(f>>>8&255)-N|0,t=(r+((e|0)<0?e:0-e|0)|0)+(t^t+xe)|0,e=(f>>>16&255)-ce|0,((t+((e|0)<0?e:0-e|0)|0)<1?f:Ne)|0}function ae(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;if(y=s[e+8>>2],(y|0)>=1)for(G=W(s[e+52>>2],y),$=s[e+80>>2];;){if(r=y+w|0,f=s[e+36>>2],S=A[t+w|0],v=S,v=s[e+44>>2]>=2?A[t+r|0]:v,s[(w<<2)+$>>2]=W(f,S),F=r,(r|0)<(G|0))for(;;){f=f-s[e+40>>2]|0;e:{if((f|0)>=0){N=s[e+36>>2];break e}N=s[e+36>>2],f=N+f|0,S=v,F=y+F|0,v=A[F+t|0]}if(s[(r<<2)+$>>2]=W(v,N)+W(S-v|0,f),r=r+y|0,!((r|0)<(G|0)))break}if(w=w+1|0,(w|0)==(y|0))break}}function he(e){var t=0,r=0,f=0,y=0,v=0,w=0,S=0;f=s[e+20>>2];e:{if((f|0)<8){t=f;break e}for(r=s[e+16>>2],t=s[e+12>>2],S=r>>>0>t>>>0?r:t;;){if((r|0)==(S|0)){t=f;break e}if(v=s[e+4>>2],y=v>>>8|0,w=(v&255)<<24|s[e>>2]>>>8,v=y,s[e>>2]=w,s[e+4>>2]=y,y=A[s[e+8>>2]+r|0],t=f+-8|0,s[e+20>>2]=t,r=r+1|0,s[e+16>>2]=r,s[e>>2]=w,s[e+4>>2]=v|y<<24,y=(f|0)>15,f=t,!y)break}}s[e+16>>2]!=s[e+12>>2]|(t|0)<65&&!s[e+24>>2]||(s[e+20>>2]=0,s[e+24>>2]=1)}function we(e,t){e:{if(e){if(t>>>0<=127)break e;t:{if(!s[s[2607]>>2]){if((t&-128)==57216)break e;break t}if(t>>>0<=2047)return c[e+1|0]=t&63|128,c[e|0]=t>>>6|192,2;if(!((t&-8192)!=57344&&t>>>0>=55296))return c[e+2|0]=t&63|128,c[e|0]=t>>>12|224,c[e+1|0]=t>>>6&63|128,3;if(t+-65536>>>0<=1048575)return c[e+3|0]=t&63|128,c[e|0]=t>>>18|240,c[e+2|0]=t>>>6&63|128,c[e+1|0]=t>>>12&63|128,4}s[2865]=25,e=-1}else e=1;return e}return c[e|0]=t,1}function Be(e){var t=0,r=0,f=0,y=0,v=0,w=0;return e?(y=s[e+8>>2]+-1|0,zr[e>>2]<=10?(t=e+20|0,r=s[t>>2],s[t>>2]=0-r,s[e+16>>2]=s[e+16>>2]+W(r,y),0):(t=e+32|0,r=s[t>>2],s[t>>2]=0-r,f=e+36|0,t=s[f>>2],s[f>>2]=0-t,v=e+40|0,f=s[v>>2],s[v>>2]=0-f,s[e+16>>2]=s[e+16>>2]+W(r,y),r=e+20|0,v=r,w=s[r>>2],r=y>>1,s[v>>2]=w+W(r,t),t=e+24|0,s[t>>2]=s[t>>2]+W(r,f),t=s[e+28>>2],t&&(f=e+44|0,r=s[f>>2],s[f>>2]=0-r,s[e+28>>2]=t+W(r,y)),0)):2}function Ve(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;for(f=e+-25|0,y=e+-26|0,v=e+-27|0,w=e+-28|0,S=e+-29|0,F=e+-30|0,N=e+-31|0,G=e+-32|0,$=s[2548]-A[e+-33|0]|0;t=A[e+-1|0]+$|0,c[e|0]=A[t+A[G|0]|0],c[e+1|0]=A[A[N|0]+t|0],c[e+2|0]=A[A[F|0]+t|0],c[e+3|0]=A[A[S|0]+t|0],c[e+4|0]=A[A[w|0]+t|0],c[e+5|0]=A[A[v|0]+t|0],c[e+6|0]=A[A[y|0]+t|0],c[e+7|0]=A[A[f|0]+t|0],e=e+32|0,r=r+1|0,(r|0)!=8;);}function vt(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0;r=A[e+95|0],c[e+67|0]=r,c[e+66|0]=r,t=W(r,16843009),c[e+96|0]=t,c[e+97|0]=t>>>8,c[e+98|0]=t>>>16,c[e+99|0]=t>>>24,y=A[e+31|0],f=y+1|0,t=A[e+63|0],v=f+t>>>1|0,c[e+32|0]=v,w=A[e+-1|0],c[e|0]=f+w>>>1,f=(t+r|0)+1>>>1|0,c[e+64|0]=f,c[e+2|0]=v,c[e+34|0]=f,f=((r+y|0)+(t<<1)|0)+2>>>2|0,c[e+33|0]=f,t=t+2|0,c[e+1|0]=(t+w|0)+(y<<1)>>>2,r=(t+r|0)+(r<<1)>>>2|0,c[e+65|0]=r,c[e+3|0]=f,c[e+35|0]=r}function ut(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0;if(c[y|0]=A[e|0],N=t+-1|0,w=1,(t|0)>=2)for(S=y+1|0,F=e+1|0;c[v+S|0]=A[v+F|0]-A[e+v|0],v=v+1|0,(N|0)!=(v|0););if((r|0)>=2)for(S=(t|0)<2;;){if(y=f+y|0,t=e+f|0,c[y|0]=A[t|0]-A[e|0],!S)for(e=y+1|0,F=t+1|0,v=0;c[e+v|0]=A[v+F|0]-A[t+v|0],v=v+1|0,(N|0)!=(v|0););if(e=t,w=w+1|0,(w|0)==(r|0))break}}function dt(e){e=e|0;var t=0,r=0,f=0,y=0,v=0,w=0;r=A[e+-30|0],t=r+2|0,f=A[e+-29|0],y=A[e+-28|0]+(t+(f<<1)|0)>>>2|0,c[e+99|0]=y,v=A[e+-31|0],w=v+2|0,f=f+(w+(r<<1)|0)>>>2|0,c[e+98|0]=f,r=t,t=A[e+-32|0],r=(r+t|0)+(v<<1)>>>2|0,c[e+97|0]=r,t=(A[e+-33|0]+w|0)+(t<<1)>>>2|0,c[e+96|0]=t,c[e+67|0]=y,c[e+66|0]=f,c[e+65|0]=r,c[e+64|0]=t,c[e+35|0]=y,c[e+34|0]=f,c[e+33|0]=r,c[e+32|0]=t,c[e+3|0]=y,c[e+2|0]=f,c[e+1|0]=r,c[e|0]=t}function Rt(e,t){e=e|0,t=t|0;var r=0,f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;return t=s[t>>2],N=s[t+24>>2],v=t+40|0,G=s[v>>2],f=s[t+20>>2],w=t+36|0,y=s[w>>2],r=s[t+16>>2],S=s[e+8>>2],t=s[t+32>>2],$=r+W(S,t)|0,r=t,t=s[e+12>>2],F=s[e+16>>2],el(s[e+20>>2],s[e+32>>2],$,r,t,F),r=y,y=S>>1,r=f+W(r,y)|0,t=(t+1|0)/2|0,f=(F+1|0)/2|0,el(s[e+24>>2],s[e+36>>2],r,s[w>>2],t,f),el(s[e+28>>2],s[e+36>>2],W(y,G)+N|0,s[v>>2],t,f),s[e+16>>2]}function $t(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0;if((f|0)>=1)for(N=t?0:3,G=(t|0)!=0,$=(r|0)<1;;){if(!$)for(ce=e+N|0,F=e+G|0,t=0;v=t<<2,w=A[v+ce|0],(w|0)!=255&&(S=v+F|0,w=W(w,32897),c[S|0]=W(w,A[S|0])>>>23,S=(v|1)+F|0,c[S|0]=W(w,A[S|0])>>>23,v=(v|2)+F|0,c[v|0]=W(w,A[v|0])>>>23),t=t+1|0,(r|0)!=(t|0););if(e=e+y|0,t=(f|0)>1,f=f+-1|0,!t)break}}function ui(e,t){var r=0;r=(t|0)!=0;e:{t:{i:{if(!t|!(e&3))break i;for(;;){if(!A[e|0])break t;if(e=e+1|0,t=t+-1|0,r=(t|0)!=0,!t)break i;if(!(e&3))break}}if(!r)break e}t:{if(!A[e|0]|t>>>0<4)break t;for(;;){if(r=s[e>>2],(r^-1)&r+-16843009&-2139062144)break t;if(e=e+4|0,t=t+-4|0,!(t>>>0>3))break}}if(!t)break e;for(;;){if(!A[e|0])return e;if(e=e+1|0,t=t+-1|0,!t)break}}return 0}function It(e){e=e|0;var t=0;t=W((A[e+95|0]+(A[e+-29|0]+(A[e+63|0]+(A[e+-30|0]+(A[e+31|0]+(A[e+-31|0]+(A[e+-32|0]+A[e+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),c[e+96|0]=t,c[e+97|0]=t>>>8,c[e+98|0]=t>>>16,c[e+99|0]=t>>>24,c[e+64|0]=t,c[e+65|0]=t>>>8,c[e+66|0]=t>>>16,c[e+67|0]=t>>>24,c[e+32|0]=t,c[e+33|0]=t>>>8,c[e+34|0]=t>>>16,c[e+35|0]=t>>>24,c[e|0]=t,c[e+1|0]=t>>>8,c[e+2|0]=t>>>16,c[e+3|0]=t>>>24}function gi(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0,G=0;if((r|0)>=1)for(y=s[f+-4>>2];v=F<<2,w=v+t|0,S=s[w+4>>2],G=f+v|0,N=s[w>>2],S=((S^N)>>>1&2139062143)+(S&N)|0,w=s[w+-4>>2],y=((w^y)>>>1&2139062143)+(y&w)|0,y=((S^y)>>>1&2139062143)+(y&S)|0,v=s[e+v>>2],y=(y&-16711936)+(v&-16711936)&-16711936|(y&16711935)+(v&16711935)&16711935,s[G>>2]=y,F=F+1|0,(F|0)!=(r|0););}function fi(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0,Ne=0,$e=0;for($=0-t|0,ce=0-(t<<1)|0,xe=r<<1|1,S=s[2548],F=s[2547],Ne=s[2546],N=s[2549];r=e+y|0,G=r+$|0,v=A[G|0],w=A[r|0],f=A[r+ce|0]-A[t+r|0]|0,((A[(v-w|0)+N|0]<<2)+A[f+N|0]|0)<=(xe|0)&&(f=c[f+Ne|0]+W(w-v|0,3)|0,$e=c[(f+4>>3)+F|0],c[G|0]=A[(c[(f+3>>3)+F|0]+v|0)+S|0],c[r|0]=A[(w-$e|0)+S|0]),y=y+1|0,(y|0)!=16;);}function Ti(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((r|0)>=1)for(;v=S<<2,F=_i[t+2>>1],N=_i[e>>1],G=_i[t>>1],$=_i[e+2>>1],w=tr[v+f>>1]+(((F+W(N,9)|0)+W(G+$|0,3)|0)+8>>4)|0,w=(w|0)<1023?w:1023,_i[y+v>>1]=(w|0)>0?w:0,w=v|2,v=tr[w+f>>1]+(((W($,9)+G|0)+W(F+N|0,3)|0)+8>>4)|0,v=(v|0)<1023?v:1023,_i[y+w>>1]=(v|0)>0?v:0,t=t+2|0,e=e+2|0,S=S+1|0,(S|0)!=(r|0););}function Si(e){var t=0,r=0,f=0;if(s[e+24>>2]<=0){e:{if(s[e+4>>2]){Je[s[2808]](e);break e}if(!s[e+20>>2]){if((W(s[e+52>>2],s[e+8>>2])|0)<1)break e;for(r=s[e+76>>2];f=t<<2,c[s[e+68>>2]+t|0]=s[f+r>>2],r=s[e+76>>2],s[f+r>>2]=0,t=t+1|0,(t|0)<(W(s[e+52>>2],s[e+8>>2])|0););break e}Je[s[2809]](e)}s[e+24>>2]=s[e+24>>2]+s[e+28>>2],s[e+68>>2]=s[e+68>>2]+s[e+72>>2],s[e+64>>2]=s[e+64>>2]+1}}function Zi(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0;if((f|0)>=1)for(;y=tr[e+2>>1],v=tr[e>>1],S=tr[e+4>>1],F=(W(y,-19081)+W(v,-9719)|0)+W(S,28800)|0,N=F+33685504>>18,c[t+w|0]=N>>>0<256?N:(F|0)<-33685504?-33685504:255,y=(W(y,-24116)+W(v,28800)|0)+W(S,-4684)|0,v=y+33685504>>18,c[r+w|0]=v>>>0<256?v:(y|0)<-33685504?-33685504:255,e=e+8|0,w=w+1|0,(w|0)!=(f|0););}function Ai(e,t,r,f,y){var v=0,w=0,S=0,F=0,N=0,G=0,$=0;F=s[e+16>>2],w=s[e+8>>2],e=s[e+4>>2],S=8>>>e|0;e:{if((S|0)<=7){if((t|0)>=(r|0))break e;for(N=-1<<S^-1,G=-1<<e^-1,$=(w|0)<1;;){if(v=0,e=0,!$)for(;v&G||(e=A[f|0],f=f+1|0),c[y|0]=s[((e&N)<<2)+F>>2]>>>8,e=e>>>S|0,y=y+1|0,v=v+1|0,(v|0)!=(w|0););if(t=t+1|0,(r|0)==(t|0))break}break e}Je[s[2732]](f,F,y,t,r,w)}}function vr(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0;v=s[t>>2],r=s[v+28>>2],w=s[v+44>>2],f=r+W(w,s[e+8>>2])|0,y=s[e+16>>2],S=s[e+12>>2],t=s[e+104>>2];e:{if(t){if((y|0)<1)break e;for(r=0;f=Sn(f,t,S)+s[v+44>>2]|0,t=s[e>>2]+t|0,r=r+1|0,(y|0)!=(r|0););break e}if(!r|(y|0)<1)break e;for(t=0;f=yo(f,255,S)+w|0,t=t+1|0,(y|0)!=(t|0););}return 0}function sr(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0,ce=0,xe=0;for($=r<<1|1,S=s[2548],F=s[2547],ce=s[2546],N=s[2549];r=W(t,y)+e|0,G=r+-1|0,v=A[G|0],w=A[r|0],f=A[r+-2|0]-A[r+1|0]|0,((A[(v-w|0)+N|0]<<2)+A[f+N|0]|0)<=($|0)&&(f=c[f+ce|0]+W(w-v|0,3)|0,xe=c[(f+4>>3)+F|0],c[G|0]=A[(c[(f+3>>3)+F|0]+v|0)+S|0],c[r|0]=A[(w-xe|0)+S|0]),y=y+1|0,(y|0)!=16;);}function Ir(e,t){e=e|0,t=t|0;var r=0,f=0;return r=s[t>>2],e=((r^e)>>>1&2139062143)+(e&r)|0,r=e&255,t=s[t+-4>>2],r=((r-(t&255)|0)/2|0)+r|0,f=r>>>0<256?r:(r^-1)>>>24|0,r=e>>>24|0,r=((r-(t>>>24|0)|0)/2|0)+r|0,f=f|(r>>>0<256?r:r>>>24^-1)<<24,r=e>>>16&255,r=((r-(t>>>16&255)|0)/2|0)+r|0,e=e>>>8&255,e=((e-(t>>>8&255)|0)/2|0)+e|0,f|(r>>>0<256?r:(r^-1)>>>24|0)<<16|(e>>>0<256?e:(e^-1)>>>24|0)<<8}function nn(e,t,r){var f=0;if(s[e+24>>2]=0,s[e+8>>2]=-8,s[e>>2]=0,s[e+4>>2]=254,s[e+12>>2]=t,f=t+r|0,s[e+16>>2]=f,f=r>>>0>3?f+-3|0:t,s[e+20>>2]=f,f>>>0>t>>>0){r=A[t|0]|A[t+1|0]<<8|(A[t+2|0]<<16|A[t+3|0]<<24),s[e+8>>2]=16,s[e+12>>2]=t+3,s[e>>2]=(r>>>8&65280|(r<<8&16711680|r<<24))>>>8;return}if((r|0)>=1){s[e+8>>2]=0,s[e+12>>2]=t+1,s[e>>2]=A[t|0];return}s[e+24>>2]=1,s[e+8>>2]=0,s[e>>2]=0}function cn(e,t,r){var f=0,y=0,v=0,w=0;f=s[r+16>>2];e:{if(!f){if(Po(r))break e;f=s[r+16>>2]}if(v=s[r+20>>2],f-v>>>0<t>>>0)return Je[s[r+36>>2]](r,e,t)|0;t:{if(c[r+75|0]<0)break t;for(y=t;;){if(f=y,!f)break t;if(y=f+-1|0,A[y+e|0]==10)break}if(y=Je[s[r+36>>2]](r,e,f)|0,y>>>0<f>>>0)break e;e=e+f|0,t=t-f|0,v=s[r+20>>2],w=f}Sn(v,e,t),s[r+20>>2]=s[r+20>>2]+t,y=t+w|0}return y}function P(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;if((r|0)>=1)for(G=(t|0)<1;;){if(w=0,!G)for(;y=w<<1,v=y+e|0,$=v,N=(y|1)+e|0,S=A[N|0],y=S&15,F=W(y,4369),v=A[v|0],c[$|0]=W(F,v&240|v>>>4)>>>16&240|W((v&15|v<<4)&255,F)>>>20,c[N|0]=W(S&240|S>>>4,F)>>>16&240|y,w=w+1|0,(w|0)!=(t|0););if(e=e+f|0,y=(r|0)>1,r=r+-1|0,!y)break}}function j(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0,w=0,S=0,F=0;if(c[y|0]=A[e|0],(t|0)>=2)for(S=t+-1|0,w=y+1|0,F=e+1|0;c[v+w|0]=A[v+F|0]-A[e+v|0],v=v+1|0,(S|0)!=(v|0););if((r|0)>=2)for(w=1;;){if(y=f+y|0,S=e+f|0,v=0,(t|0)>=1)for(;c[y+v|0]=A[v+S|0]-A[e+v|0],v=v+1|0,(v|0)!=(t|0););if(e=S,w=w+1|0,(w|0)==(r|0))break}}function Q(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0;if((t|0)>=1)for(;f=(v<<2)+e|0,y=s[f>>2],y>>>0<=4278190079&&(w=f,y>>>0>=16777216?(f=y>>>24|0,r?f=4278190080/(f>>>0)|0:f=W(f,65793),f=W(f,y>>>16&255)+8388608>>>8&16711680|(W(f,y>>>8&255)+8388608>>>16&65280|(y&-16777216|W(f,y&255)+8388608>>>24))):f=0,s[w>>2]=f),v=v+1|0,(v|0)!=(t|0););}function le(e,t,r){var f=0,y=0,v=0,w=0,S=0,F=0,N=0,G=0,$=0;if(s[e+20>>2]=0,s[e+24>>2]=0,s[e>>2]=0,s[e+4>>2]=0,s[e+12>>2]=r,v=r>>>0<8?r:8,v)for($=v,r=0;w=A[t+r|0],y=S<<3,f=y&31,32<=(y&63)>>>0?(y=w<<f,f=0):(y=(1<<f)-1&w>>>32-f,f=w<<f),F=f|F,N=y|N,r=r+1|0,f=S+1|0,f>>>0<1&&(G=G+1|0),S=f,!!(($|0)!=(f|0)|G););s[e+16>>2]=v,s[e>>2]=F,s[e+4>>2]=N,s[e+8>>2]=t}function Ae(e,t){var r=0,f=0,y=0;r=0;e:{if(!e)break e;if(!t)return s[e>>2]=2,0;s[e>>2]=0,s[e+8>>2]=t,r=e+24|0,le(r,s[t+64>>2],s[t+60>>2]);t:{i:{r:{if((Dn(r,8)|0)!=47||(y=Dn(r,14),f=Dn(r,14),Dn(r,1),Dn(r,3)))break r;if(!s[e+48>>2])break i}s[e>>2]=3;break t}if(s[e+4>>2]=2,f=f+1|0,s[t+4>>2]=f,r=t,t=y+1|0,s[r>>2]=t,r=1,Xi(t,f,1,e,0))break e}uo(e),r=0}return r}function Fe(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;e:{if(!e){if((f|0)<1)break e;for(;y=A[t+v|0]+y|0,c[r+v|0]=y,v=v+1|0,(v|0)!=(f|0););break e}if((f|0)<1)break e;for(y=A[e|0],w=y,S=y;;){if(w=(w&255)-(S&255)|0,S=y,y=(y&255)+w|0,y=(y|0)>0?y:0,w=A[t+v|0]+((y|0)<255?y:255)|0,c[r+v|0]=w,v=v+1|0,(v|0)==(f|0))break e;y=A[e+v|0]}}}function Oe(e,t,r,f){var y=0,v=0,w=0,S=0;return y=s[f>>2],v=s[r>>2],v|(t|0)<1||(S=Jr(y,y>>31,e,e>>31),v=t+S|0,w=yr,w=v>>>0<S>>>0?w+1|0:w,v=v+-1|0,w=w+-1|0,v=Du(v,(v|0)!=-1?w+1|0:w,t,0)),y|(e|0)<1||(w=Jr(v,v>>31,t,t>>31),y=w+e|0,t=yr,t=y>>>0<w>>>0?t+1|0:t,y=y+-1|0,t=t+-1|0,y=Du(y,(y|0)!=-1?t+1|0:t,e,0)),e=0,(v|0)<1|(y|0)<1||(s[r>>2]=v,s[f>>2]=y,e=1),e}function He(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0;if((r|0)>=1)for(y=s[f+-4>>2];v=F<<2,w=v+t|0,S=s[w+4>>2],y=((S^y)>>>1&2139062143)+(y&S)|0,S=f+v|0,w=s[w>>2],y=((w^y)>>>1&2139062143)+(y&w)|0,v=s[e+v>>2],y=(y&-16711936)+(v&-16711936)&-16711936|(y&16711935)+(v&16711935)&16711935,s[S>>2]=y,F=F+1|0,(F|0)!=(r|0););}function Qe(e,t){e=e|0,t=t|0;var r=0,f=0,y=0;return f=s[t>>2],t=s[t+-4>>2],r=((f&255)+(e&255)|0)-(t&255)|0,y=r>>>0<256?r:(r^-1)>>>24|0,r=(f>>>24)+(e>>>24)-(t>>>24)|0,y=y|(r>>>0<256?r:r>>>24^-1)<<24,r=((f>>>16&255)+(e>>>16&255)|0)-(t>>>16&255)|0,e=((f>>>8&255)+(e>>>8&255)|0)-(t>>>8&255)|0,y|(r>>>0<256?r:(r^-1)>>>24|0)<<16|(e>>>0<256?e:(e^-1)>>>24|0)<<8}function ct(e,t,r,f,y){var v=0;e:{if(!e|t>>>0<10|(A[e+3|0]!=157|A[e+4|0]!=1)||A[e+5|0]!=42||(t=A[e|0],(t&25)!=16|(t|A[e+1|0]<<8|A[e+2|0]<<16)>>>5>>>0>=r>>>0)||(t=A[e+6|0]|A[e+7|0]<<8&16128,!t)||(e=A[e+8|0]|A[e+9|0]<<8&16128,!e)||(f&&(s[f>>2]=t),v=1,!y))break e;s[y>>2]=e}return v}function Ut(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0,S=0,F=0;e:{if(f=s[e+104>>2],!f|(r|0)<1)break e;for(S=s[t+16>>2]+r|0,y=s[t+36>>2];;){if(v=s[e+8>>2],w=s[y+60>>2],F=f,f=s[e>>2],Ho(y,s[e+16>>2]+(v-w|0)|0,F+W(f,w-v|0)|0,f),r=r-(Je[s[t+52>>2]](t,S-r|0,r)|0)|0,(r|0)<1)break e;f=s[e+104>>2]}}return 0}function ci(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0,G=0;if((r|0)>=1)for(F=c[e+2|0],N=c[e+1|0],G=c[e|0];v=y<<2,e=s[v+t>>2],w=e<<16>>24,S=(W(w,G)>>5)+(e>>>16|0)|0,s[f+v>>2]=e+(W(N,w)>>>5|0)+(W(S<<24>>24,F)>>>5)&255|(S<<16&16711680|e&-16711936),y=y+1|0,(y|0)!=(r|0););}function li(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;if((r|0)>=1)for(S=t+-4|0,t=s[f+-4>>2];y=w<<2,v=s[y+S>>2],t=((v^t)>>>1&2139062143)+(t&v)|0,v=f+y|0,y=s[e+y>>2],t=(t&-16711936)+(y&-16711936)&-16711936|(t&16711935)+(y&16711935)&16711935,s[v>>2]=t,w=w+1|0,(w|0)!=(r|0););}function ei(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0;if((r|0)>=1)for(;y=S<<2,v=y+t|0,w=s[v>>2],F=f+y|0,v=s[v+-4>>2],w=((v^w)>>>1&2139062143)+(w&v)|0,y=s[e+y>>2],s[F>>2]=(w&-16711936)+(y&-16711936)&-16711936|(w&16711935)+(y&16711935)&16711935,S=S+1|0,(S|0)!=(r|0););}function qi(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0;if((r|0)>=1)for(;y=S<<2,v=y+t|0,w=s[v+4>>2],F=f+y|0,v=s[v>>2],w=((v^w)>>>1&2139062143)+(w&v)|0,y=s[e+y>>2],s[F>>2]=(w&-16711936)+(y&-16711936)&-16711936|(w&16711935)+(y&16711935)&16711935,S=S+1|0,(S|0)!=(r|0););}function bi(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;if((r|0)>=1)for(y=s[f+-4>>2];v=S<<2,w=s[v+t>>2],y=((w^y)>>>1&2139062143)+(y&w)|0,w=f+v|0,v=s[e+v>>2],y=(y&-16711936)+(v&-16711936)&-16711936|(y&16711935)+(v&16711935)&16711935,s[w>>2]=y,S=S+1|0,(S|0)!=(r|0););}function Pt(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0,F=0,N=0;if((f|0)>=1)for(;v=w<<1,y=v+r|0,N=y,v=tr[e+v>>1]-tr[t+v>>1]|0,y=v+tr[y>>1]|0,y=(y|0)<1023?y:1023,_i[N>>1]=(y|0)>0?y:0,y=v>>31,v=y+v^y,y=S+v|0,y>>>0<v>>>0&&(F=F+1|0),S=y,w=w+1|0,(w|0)!=(f|0););return yr=F,S|0}function Ft(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0,F=0,N=0,G=0;if(S=255,(f|0)>=1)for(G=(r|0)<1;;){if(w=0,!G)for(;F=A[(w<<2)+e|0],c[y+w|0]=F,S=S&F,w=w+1|0,(w|0)!=(r|0););if(y=y+v|0,e=e+t|0,N=N+1|0,(N|0)==(f|0))break}return(S&255)==255|0}function Pi(e,t,r){var f=0,y=0,v=0;e:{if((t|0)==1&e>>>0<0|t>>>0<1){f=e;break e}for(;f=Du(e,t,10,0),y=yr,v=y,y=Jr(f,y,10,0),r=r+-1|0,c[r|0]=e-y|48,y=t>>>0>9,e=f,t=v,!!y;);}if(f)for(;r=r+-1|0,e=(f>>>0)/10|0,c[r|0]=f-W(e,10)|48,t=f>>>0>9,f=e,!!t;);return r}function Ni(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0,F=0,N=0,G=0;if(S=255,(f|0)>=1)for(G=(r|0)<1;;){if(w=0,!G)for(;F=A[e+w|0],c[(w<<2)+y|0]=F,S=S&F,w=w+1|0,(w|0)!=(r|0););if(y=y+v|0,e=e+t|0,N=N+1|0,(N|0)==(f|0))break}return(S|0)!=255|0}function Ci(e,t,r,f,y){var v=0,w=0,S=0;v=br-32|0,br=v;e:{if(!e|t>>>0<5|(A[e|0]!=47|A[e+4|0]>31)||(le(v,e,t),(Dn(v,8)|0)!=47)||(e=Dn(v,14),t=Dn(v,14),w=Dn(v,1),Dn(v,3)|s[v+24>>2])||(r&&(s[r>>2]=e+1),f&&(s[f>>2]=t+1),S=1,!y))break e;s[y>>2]=w}return br=v+32|0,S}function mr(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;if((r|0)>=1)for(;;){y=A[t+v|0];e:{if((y|0)==255)break e;if(!y){c[e+v|0]=0;break e}w=e+v|0,S=w,f?y=4278190080/(y>>>0)|0:y=W(y,65793),c[S|0]=W(y,A[w|0])+8388608>>>24}if(v=v+1|0,(v|0)==(r|0))break}}function cr(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0;e:{if(e){if((f|0)<=0)break e;for(;c[r+y|0]=A[t+y|0]+A[e+y|0],y=y+1|0,(y|0)!=(f|0););break e}if((f|0)<1)break e;for(e=0;e=A[t+y|0]+e|0,c[r+y|0]=e,y=y+1|0,(y|0)!=(f|0););}}function tn(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;if((r|0)>=1)for(w=t+-4|0,t=0;y=t<<2,v=s[y+e>>2],S=f+y|0,y=s[y+w>>2],s[S>>2]=(v&-16711936)+(y&-16711936)&-16711936|(v&16711935)+(y&16711935)&16711935,t=t+1|0,(r|0)!=(t|0););}function gr(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0,F=0;if((f|0)>=1)for(S=(r|0)<1,F=v<<2;;){if(v=0,!S)for(;s[(v<<2)+y>>2]=A[e+v|0]<<8,v=v+1|0,(v|0)!=(r|0););if(e=e+t|0,y=y+F|0,w=w+1|0,(w|0)==(f|0))break}}function Vn(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0;if((f|0)<(y|0))for(S=(v|0)<1;;){if(w=0,!S)for(;s[r>>2]=s[(s[e>>2]>>>6&1020)+t>>2],r=r+4|0,e=e+4|0,w=w+1|0,(w|0)!=(v|0););if(f=f+1|0,(y|0)==(f|0))break}}function Wn(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;if((r|0)>=1)for(w=t+4|0,t=0;y=t<<2,v=s[y+e>>2],S=f+y|0,y=s[y+w>>2],s[S>>2]=(v&-16711936)+(y&-16711936)&-16711936|(v&16711935)+(y&16711935)&16711935,t=t+1|0,(r|0)!=(t|0););}function In(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0;if((f|0)<(y|0))for(S=(v|0)<1;;){if(w=0,!S)for(;c[r|0]=s[(A[e|0]<<2)+t>>2]>>>8,r=r+1|0,e=e+1|0,w=w+1|0,(w|0)!=(v|0););if(f=f+1|0,(y|0)==(f|0))break}}function xn(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0,S=0;if((r|0)>=1)for(;y=v<<2,w=s[y+e>>2],S=f+y|0,y=s[t+y>>2],s[S>>2]=(w&-16711936)+(y&-16711936)&-16711936|(w&16711935)+(y&16711935)&16711935,v=v+1|0,(v|0)!=(r|0););}function jn(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0;if((r|0)>=1)for(t=s[f+-4>>2];v=y<<2,w=s[v+e>>2],t=(w&-16711936)+(t&-16711936)&-16711936|(w&16711935)+(t&16711935)&16711935,s[f+v>>2]=t,y=y+1|0,(y|0)!=(r|0););}function Zn(){var e=0,t=0;e=bl(1,0,2376);e:{if(!e||(s[e>>2]=0,s[e+8>>2]=5010,Je[s[2557]](e+124|0),s[e+312>>2]=0,s[e+4>>2]=0,s[2661]))break e;t:{if(t=s[2673],!t||!(Je[t|0](2)|0))break t;return s[2661]=19,e}s[2661]=20}return e}function An(e,t,r){var f=0,y=0;return f=2,!e|!r||(s[r>>2]=0,s[r+4>>2]=0,s[r+32>>2]=0,s[r+36>>2]=0,s[r+24>>2]=0,s[r+28>>2]=0,y=r+16|0,f=y,s[f>>2]=0,s[f+4>>2]=0,f=r+8|0,s[f>>2]=0,s[f+4>>2]=0,f=Xa(e,t,r,r+4|0,f,r+12|0,y,0)),f}function $o(e,t,r,f){var y=0,v=0,w=0,S=0,F=0,N=0;return y=r>>>16|0,v=e>>>16|0,N=W(y,v),w=r&65535,S=e&65535,F=W(w,S),v=(F>>>16|0)+W(v,w)|0,y=(v&65535)+W(y,S)|0,e=(W(t,r)+N|0)+W(e,f)+(v>>>16)+(y>>>16)|0,t=F&65535|y<<16,yr=e,t}function hn(e){var t=0;if(t=s[e+12>>2],t>>>0<zr[e+16>>2]){s[e+12>>2]=t+1,s[e+8>>2]=s[e+8>>2]+8,s[e>>2]=A[t|0]|s[e>>2]<<8;return}if(!s[e+24>>2]){s[e+24>>2]=1,s[e>>2]=s[e>>2]<<8,s[e+8>>2]=s[e+8>>2]+8;return}s[e+8>>2]=0}function Lo(e,t){e=e|0,t=t|0;var r=0;return t=s[t>>2],r=s[t+20>>2],$c(s[e+20>>2],s[e+32>>2],s[e+24>>2],s[e+28>>2],s[e+36>>2],W(r,s[e+8>>2])+s[t+16>>2]|0,r,s[e+12>>2],s[e+16>>2],s[(s[t>>2]<<2)+11376>>2]),s[e+16>>2]}function us(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0;if((r|0)>=1)for(;y=s[(f<<2)+e>>2],c[t+f|0]=((W(y&255,6420)+W(y>>>16&255,16839)|0)+W(y>>>8&255,33059)|0)+1081344>>>16,f=f+1|0,(f|0)!=(r|0););}function Bn(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0;y=br-16|0,br=y;e:{if(!N0(Nl(s[e+60>>2],t|0,r|0,f&255,y+8|0)|0)){t=s[y+12>>2],e=s[y+8>>2];break e}s[y+8>>2]=-1,s[y+12>>2]=-1,t=-1,e=-1}return br=y+16|0,yr=t,e|0}function zo(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0,S=0;if((f|0)>=1)for(;s[(S<<2)+v>>2]=A[r+w|0]|(A[e+w|0]<<16|A[t+w|0]<<8)|-16777216,w=y+w|0,S=S+1|0,(S|0)!=(f|0););}function es(e,t,r){e=e|0,t=t|0,r=r|0;var f=0,y=0,v=0,w=0;if((t|0)>=1)for(;v=f<<2,y=s[v+e>>2],w=y>>>8&255,s[r+v>>2]=(y&16711935)+(w<<16|w)&16711935|y&-16711936,f=f+1|0,(f|0)!=(t|0););}function cs(e){e&&(Je[s[2562]](e+124|0),ch(e),gn(s[e+2288>>2]),s[e+2288>>2]=0,s[e+2292>>2]=0,s[e+12>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+24>>2]=0,s[e+28>>2]=0,s[e+32>>2]=0,s[e+36>>2]=0,s[e+4>>2]=0,gn(e))}function so(e,t,r,f,y){var v=0;if(v=br-256|0,br=v,!(y&73728|(r|0)<=(f|0))){if(r=r-f|0,f=r>>>0<256,yo(v,t&255,f?r:256),!f)for(;n0(e,v,256),r=r+-256|0,r>>>0>255;);n0(e,v,r)}br=v+256|0}function Gs(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((r|0)>=1)for(;c[t+f|0]=((W(A[e+2|0],16839)+W(A[e+1|0],33059)|0)+W(A[e|0],6420)|0)+1081344>>>16,e=e+3|0,f=f+1|0,(f|0)!=(r|0););}function ga(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((r|0)>=1)for(;c[t+f|0]=((W(A[e|0],16839)+W(A[e+1|0],33059)|0)+W(A[e+2|0],6420)|0)+1081344>>>16,e=e+3|0,f=f+1|0,(f|0)!=(r|0););}function Qn(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((t|0)>=1)for(f=(t<<2)+e|0;t=s[e>>2],c[r+2|0]=t,c[r+3|0]=t>>>24,c[r+1|0]=t>>>8,c[r|0]=t>>>16,r=r+4|0,e=e+4|0,e>>>0<f>>>0;);}function Wo(e,t,r,f){var y=0,v=0;y=br-1024|0,br=y;e:{if(!e){f=Qo(0,t,r,f,0);break e}if((f|0)<=512){f=Qo(e,t,r,f,y);break e}if(v=ts(f,0,2),!v){f=0;break e}f=Qo(e,t,r,f,v),gn(v)}return br=y+1024|0,f}function vl(){var e=0;e=s[2673],(e|0)!=s[2555]&&(s[2854]=136,s[2853]=137,s[2852]=138,s[2851]=139,s[2850]=140,s[2849]=136,s[2848]=137,s[2847]=138,s[2846]=141,s[2845]=139,s[2844]=142,s[2555]=e)}function ya(){var e=0;e=s[2673],(e|0)!=s[2553]&&(s[2831]=129,s[2829]=130,s[2838]=131,s[2837]=132,s[2836]=129,s[2835]=130,s[2834]=133,s[2833]=131,s[2832]=132,s[2830]=134,s[2828]=135,s[2553]=e)}function Fa(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((t|0)>=1)for(f=(t<<2)+e|0;t=s[e>>2],c[r+1|0]=t>>>5&224|t>>>3&31,c[r|0]=t>>>16&248|t>>>13&7,r=r+2|0,e=e+4|0,e>>>0<f>>>0;);}function Ba(){var e=0;e=s[2673],(e|0)!=s[2554]&&(s[2820]=122,s[2819]=123,s[2815]=122,s[2813]=123,s[2822]=124,s[2821]=125,s[2818]=126,s[2817]=124,s[2816]=125,s[2814]=127,s[2812]=128,s[2554]=e)}function Po(e){var t=0;return t=A[e+74|0],c[e+74|0]=t+-1|t,t=s[e>>2],t&8?(s[e>>2]=t|32,-1):(s[e+4>>2]=0,s[e+8>>2]=0,t=s[e+44>>2],s[e+28>>2]=t,s[e+20>>2]=t,s[e+16>>2]=t+s[e+48>>2],0)}function Kc(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((t|0)>=1)for(f=(t<<2)+e|0;t=s[e>>2],c[r+1|0]=t&240|t>>>28,c[r|0]=t>>>16&240|t>>>12&15,r=r+2|0,e=e+4|0,e>>>0<f>>>0;);}function lh(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0;if((r|0)>=1)for(t=0;y=t<<2,v=s[y+e>>2],s[f+y>>2]=v+-16777216&-16711936|v&16711935,t=t+1|0,(r|0)!=(t|0););}function S0(e,t){e=e|0,t=t|0,tr[e>>1]&&Je[s[2706]](e,t),tr[e+32>>1]&&Je[s[2706]](e+32|0,t+4|0),tr[e+64>>1]&&Je[s[2706]](e- -64|0,t+128|0),tr[e+96>>1]&&Je[s[2706]](e+96|0,t+132|0)}function Eu(){var e=0;e=s[2673],(e|0)!=s[2544]&&(s[2663]=21,s[2662]=22,s[2665]=23,s[2670]=24,s[2664]=25,s[2666]=26,s[2667]=27,s[2668]=28,s[2669]=29,s[2671]=30,s[2672]=31,s[2544]=e)}function Su(e,t){e=e|0,t=t|0;var r=0,f=0;return r=s[t>>2],f=s[t+4>>2],r=((r^f)>>>1&2139062143)+(r&f)|0,t=s[t+-4>>2],e=((t^e)>>>1&2139062143)+(e&t)|0,((r^e)>>>1&2139062143)+(e&r)|0}function Qc(e){e=e|0;var t=0,r=0,f=0;return s[e+12>>2]<1|s[e+16>>2]<1||(t=s[e+40>>2],r=Je[s[t+44>>2]](e,t)|0,f=s[t+48>>2],f&&Je[f|0](e,t,r)|0,s[t+16>>2]=s[t+16>>2]+r,t=1),t|0}function va(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0,w=0;if((f|0)>=1)for(;v=y<<1,w=v+r|0,_i[w>>1]=tr[w>>1]+(tr[e+v>>1]-tr[t+v>>1]|0),y=y+1|0,(y|0)!=(f|0););}function _a(e){var t=0,r=0;t=s[3008],r=e+3&-4,e=t+r|0;e:{if(e>>>0<=t>>>0&&(r|0)>=1||e>>>0>fd()<<16>>>0&&!(Dl(e|0)|0))break e;return s[3008]=e,t}return s[2865]=48,-1}function Iu(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((t|0)>=1)for(f=(t<<2)+e|0;t=s[e>>2],c[r|0]=t,c[r+2|0]=t>>>16,c[r+1|0]=t>>>8,r=r+3|0,e=e+4|0,e>>>0<f>>>0;);}function Cu(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((t|0)>=1)for(f=(t<<2)+e|0;t=s[e>>2],c[r+2|0]=t,c[r+1|0]=t>>>8,c[r|0]=t>>>16,r=r+3|0,e=e+4|0,e>>>0<f>>>0;);}function $c(e,t,r,f,y,v,w,S,F,N){var G=0,$=0;if((F|0)>=1)for(;Je[N|0](e,r,f,v,S),$=G&1,r=$?r+y|0:r,f=$?f+y|0:f,v=v+w|0,e=e+t|0,G=G+1|0,(G|0)!=(F|0););}function oc(e,t){var r=0,f=0,y=0;r=0;e:{if(!e||(f=Jr(e,0,t,0),y=yr,r=f,(e|t)>>>0<65536))break e;r=y?-1:f}return t=r,e=da(t),!e|!(A[e+-4|0]&3)||yo(e,0,t),e}function Tu(e,t){e=e|0,t=t|0;var r=0,f=0,y=0;e:{if((t|0)<=0)break e;for(;;){if(A[e+r|0]==255){if(r=r+4|0,f=(t|0)<2,t=t+-1|0,!f)continue;break e}break}y=1}return y|0}function sc(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0;var y=0,v=0;if(y=e?A[e|0]:y,(f|0)>=1)for(;y=A[t+v|0]+y|0,c[r+v|0]=y,v=v+1|0,(v|0)!=(f|0););}function Lu(e){var t=0;e:{if(s[e+64>>2]>=s[e+56>>2])break e;for(;;){if(s[e+24>>2]>0)break e;if(t=t+1|0,Si(e),!(s[e+64>>2]<s[e+56>>2]))break}}return t}function ac(e,t){var r=0,f=0,y=0,v=0;r=4;e:{for(;;){if(f=A[e|0],y=A[t|0],(f|0)==(y|0)){if(t=t+1|0,e=e+1|0,r=r+-1|0,r)continue;break e}break}v=f-y|0}return v}function zs(){var e=0;e=s[2673],(e|0)!=s[2556]&&(s[2861]=143,s[2860]=144,s[2857]=145,s[2858]=146,s[2859]=147,s[2862]=148,s[2863]=149,s[2864]=150,s[2556]=e)}function ks(e){var t=0,r=0,f=0;if(F0(c[s[e>>2]]))for(;t=s[e>>2],f=c[t|0],s[e>>2]=t+1,r=(W(r,10)+f|0)+-48|0,!!F0(c[t+1|0]););return r}function ts(e,t,r){var f=0,y=0,v=0;e:{if(e|t&&(y=Du(2147418112,0,e,t),f=yr,Jr(r,0,e,t),!f&y>>>0<r>>>0|f>>>0<0|yr>>>0>0))break e;v=da(W(e,r))}return v}function _l(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0;var v=0;v=e,e=t<<2,v=v+e|0,kn(v,t,1,16,r,f,y),v=e+v|0,kn(v,t,1,16,r,f,y),kn(e+v|0,t,1,16,r,f,y)}function uh(){var e=0;e=s[2673],(e|0)!=s[2550]&&(s[2731]=75,s[2730]=76,s[2729]=77,s[2728]=0,s[2727]=78,s[2726]=79,s[2725]=80,s[2724]=0,s[2550]=e)}function bl(e,t,r){var f=0,y=0,v=0;e:{if(e|t&&(y=Du(2147418112,0,e,t),f=yr,Jr(r,0,e,t),!f&y>>>0<r>>>0|f>>>0<0|yr>>>0>0))break e;v=oc(e,r)}return v}function ch(e){var t=0;gn(s[e+2360>>2]),s[e+2360>>2]=0,s[e+2364>>2]=0,t=s[e+2344>>2],t&&(vh(s[t+20>>2]),s[t+20>>2]=0,gn(t)),s[e+2344>>2]=0}function I0(e,t,r){e=e|0,t=t|0,r=r|0;var f=0;if((r|0)>=1)for(;c[t+f|0]=s[(f<<2)+e>>2]>>>8,f=f+1|0,(f|0)!=(r|0););}function Lc(e,t,r,f){if(e|t)for(;r=r+-1|0,c[r|0]=A[(e&15)+10128|0]|f,e=(t&15)<<28|e>>>4,t=t>>>4|0,!!(e|t););return r}function lc(e,t,r,f,y,v,w){var S=0;if((v|0)>=1)for(;Je[s[2663]](e,r,y,w),r=r+f|0,e=e+t|0,S=S+1|0,(S|0)!=(v|0););}function C0(e,t){e=e|0,t=t|0;for(var r=0;;){if((t|0)<1)return 0;if(t=t+-1|0,r=A[e|0],e=e+1|0,(r|0)!=255)break}return 1}function Pc(e,t){e=e|0,t=t|0;var r=0;return r=s[t+4>>2],e=((r^e)>>>1&2139062143)+(e&r)|0,t=s[t>>2],((e^t)>>>1&2139062143)+(e&t)|0}function e0(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0;var w=0;w=e,e=r<<2,kn(w+e|0,r,1,8,f,y,v),kn(e+t|0,r,1,8,f,y,v)}function Mc(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,kn(e+4|0,1,t,16,r,f,y),kn(e+8|0,1,t,16,r,f,y),kn(e+12|0,1,t,16,r,f,y)}function el(e,t,r,f,y,v){var w=0;if((v|0)>=1)for(;r=Sn(r,e,y)+f|0,e=e+t|0,w=(v|0)>1,v=v+-1|0,!!w;);}function hh(e,t,r){if(e|t)for(;r=r+-1|0,c[r|0]=e&7|48,e=(t&7)<<29|e>>>3,t=t>>>3|0,!!(e|t););return r}function uc(e,t,r,f,y,v,w,S,F,N){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,S=S|0,F=F|0,N=N|0,Je[e|0](t,r,f,y,v,w,S,F,N)}function Pu(e,t,r,f){var y=0;if((f|0)>=1)for(;Je[s[2662]](e,r,0),e=e+t|0,y=y+1|0,(y|0)!=(f|0););}function Hs(){var e=0;e=s[2673],(e|0)!=s[2552]&&(s[2809]=118,s[2808]=119,s[2807]=120,s[2806]=121,s[2552]=e)}function wl(e,t){var r=0;return r=1<<t,r=bl(r,r>>31,4),s[e>>2]=r,r?(s[e+8>>2]=t,s[e+4>>2]=32-t,1):0}function fh(e,t){var r=0;return r=1,s[e+148>>2]>=1&&(r=Je[s[2559]](e+124|0)|0),e=s[t+52>>2],e&&Je[e|0](t),r}function T0(e){e=e|0;var t=0;t=s[e+8>>2],t&&(t=Je[t|0](s[e+12>>2],s[e+16>>2])|0,s[e+20>>2]=s[e+20>>2]|!t)}function of(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,kn(e+4|0,1,r,8,f,y,v),kn(t+4|0,1,r,8,f,y,v)}function Mu(e,t){var r=0;return r=s[e+24>>2],e=s[e+32>>2],e=((r+e|0)+-1|0)/(e|0)|0,(e|0)>(t|0)?t:e}function Gl(e,t,r,f,y,v,w){return e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,Je[e|0](t,r,f,y,v,w)|0}function dh(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,ms(e,1,r,8,f,y,v),ms(t,1,r,8,f,y,v)}function lu(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,ms(e,r,1,8,f,y,v),ms(t,r,1,8,f,y,v)}function Dc(e){e=e|0,s[e>>2]=0,s[e+4>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0}function L0(e,t,r,f,y){return e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,e=Je[e|0](t,r,f,y)|0,cl(yr|0),e|0}function sf(e,t){var r=0;return!t|s[e+12>>2]<2|s[e>>2]+-7>>>0>3||(r=s[t+8>>2]!=0),r}function zc(e,t){return e=e|0,t=t|0,e=s[t>>2],t=s[t+-4>>2],((e^t)>>>1&2139062143)+(e&t)|0}function P0(e,t,r,f,y,v,w){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,w=w|0,Je[e|0](t,r,f,y,v,w)}function Ws(e,t){var r=0,f=0;return r=t&31,f=(-1>>>r&e)<<r,r=e,e=0-t&31,f|(r&-1<<e)>>>e}function Hl(e,t){return e=e|0,t=t|0,e=s[t+4>>2],t=s[t>>2],((e^t)>>>1&2139062143)+(e&t)|0}function uu(e,t){return e=e|0,t=t|0,t=s[t+-4>>2],((t^e)>>>1&2139062143)+(e&t)|0}function xl(e,t,r,f,y,v){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,v=v|0,Je[e|0](t,r,f,y,v)}function t0(e){e:{if(s[e+76>>2]<=-1){e=cn(1024,26,e);break e}e=cn(1024,26,e)}}function cu(e,t){e=e|0,t=t|0,Je[s[2703]](e,t,1),Je[s[2703]](e- -64|0,t+128|0,1)}function ph(e,t){return e=e|0,t=t|0,t=s[t>>2],((t^e)>>>1&2139062143)+(e&t)|0}function vo(e,t,r){return s[e>>2]||(s[e+8>>2]=r,s[e>>2]=t,s[e+4>>2]=0),0}function hu(e,t,r){var f=0;f=br-16|0,br=f,s[f+12>>2]=r,Yr(e,t,r),br=f+16|0}function i0(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,ms(e,1,t,16,r,f,y)}function mh(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,ms(e,t,1,16,r,f,y)}function gh(e){return e=e|0,s[e+20>>2]=0,s[e+4>>2]||(s[e+4>>2]=1),1}function r0(e,t){s[t+40>>2]=e,s[t+52>>2]=3,s[t+48>>2]=4,s[t+44>>2]=5}function id(e,t){if(!s[e>>2]){Je[s[2806]](e,t);return}Je[s[2807]](e,t)}function rd(e,t,r,f,y){e=e|0,t=t|0,r=r|0,f=f|0,y=y|0,Je[e|0](t,r,f,y)}function M0(e,t,r){e=e|0,t=t|0,r=r|0,pa(e,t),r&&pa(e+32|0,t+4|0)}function af(e,t,r,f){return e=e|0,t=t|0,r=r|0,f=f|0,Je[e|0](t,r,f)|0}function D0(e){e&&(s[e+12>>2]<=0&&gn(s[e+80>>2]),s[e+80>>2]=0)}function zp(e){e=e|0,e=s[e+40>>2],gn(s[e+40>>2]),s[e+40>>2]=0}function nd(e,t,r,f){e=e|0,t=t|0,r=r|0,f=f|0,Je[e|0](t,r,f)}function z0(e,t,r){return e=e|0,t=t|0,r=r|0,Je[e|0](t,r)|0}function od(e){return e?31-fn(e+-1^e)|0:32}function yh(e,t){Sn(s[t>>2],s[e>>2],4<<s[t+8>>2])}function hs(e,t){return t=an(e,t),an(e,1)?0-t|0:t}function N0(e){return e?(s[2865]=e,-1):0}function lf(e,t,r){e=e|0,t=t|0,r=r|0,Je[e|0](t,r)}function uf(e,t){return e=e|0,t=t|0,Je[e|0](t)|0}function Np(e,t){return t=t|0,s[t+-4>>2]}function sd(e,t){return e?we(e,t):0}function n0(e,t,r){A[e|0]&32||cn(t,r,e)}function Fp(e){return e=e|0,e=br-e&-16,br=e,e|0}function Bp(e,t){return t=t|0,s[t+4>>2]}function cc(e,t){return-16777216}function Du(e,t,r,f){return e=ru(e,t,r,f),e}function Jr(e,t,r,f){return e=$o(e,t,r,f),e}function zu(e){e&&(gn(s[e>>2]),s[e>>2]=0)}function Rp(e,t){return t=t|0,s[t>>2]}function Op(e){return e=e|0,Ec(s[e+60>>2])|0}function jp(e){return e=e|0,!s[e+20>>2]|0}function ad(e,t){return e=e|0,e|0}function ld(e,t){e=e|0,t=t|0,Je[e|0](t)}function Up(e){return e=e|0,Gp(e|0)|0}function F0(e){return e+-48>>>0<10}function vh(e){e&&(uo(e),gn(e))}function ud(e){e&&yo(e,0,108)}function cf(e){e=e|0,s[e+4>>2]=0}function o0(e){e&&yo(e,0,84)}function B0(e){e&&gn(e)}function cd(e,t){return yr=e,t}function qp(){return 11460}function Vp(e){e=e|0,br=e}function R0(){return br|0}function hd(){}Je[1]=ou,Je[2]=tu,Je[3]=zp,Je[4]=ta,Je[5]=Qc,Je[6]=Lo,Je[7]=Ic,Je[8]=Rt,Je[9]=jl,Je[10]=C,Je[11]=vr,Je[12]=ml,Je[13]=au,Je[14]=su,Je[15]=Ut,Je[16]=ql,Je[17]=Rr,Je[18]=Bo,Je[19]=iu,Je[20]=La,Je[21]=mr,Je[22]=Q,Je[23]=P,Je[24]=zo,Je[25]=$t,Je[26]=Ni,Je[27]=gr,Je[28]=Ft,Je[29]=I0,Je[30]=C0,Je[31]=Tu,Je[32]=M0,Je[33]=pl,Je[34]=no,Je[35]=Ka,Je[36]=cu,Je[37]=S0,Je[38]=mh,Je[39]=_l,Je[40]=i0,Je[41]=lu,Je[42]=e0,Je[43]=fi,Je[44]=sr,Je[45]=Ro,Je[46]=dr,Je[47]=Mc,Je[48]=dh,Je[49]=of,Je[50]=Na,Je[51]=Au,Je[52]=dt,Je[53]=_,Je[54]=It,Je[55]=vt,Je[56]=za,Je[57]=Jc,Je[58]=ku,Je[59]=Cc,Je[60]=X,Je[61]=zt,Je[62]=Kt,Je[63]=Us,Je[64]=Ie,Je[65]=wu,Je[66]=Li,Je[67]=Do,Je[68]=Ja,Je[69]=ec,Je[70]=Bl,Je[71]=Ma,Je[72]=Ve,Je[73]=Rl,Je[74]=as,Je[75]=Fe,Je[76]=cr,Je[77]=sc,Je[78]=yl,Je[79]=j,Je[80]=ut,Je[81]=cc,Je[82]=Ir,Je[83]=Qe,Je[84]=ie,Je[85]=Su,Je[86]=Hl,Je[87]=zc,Je[88]=ph,Je[89]=uu,Je[90]=Pc,Je[91]=Np,Je[92]=Bp,Je[93]=Rp,Je[94]=ad,Je[95]=lh,Je[96]=oo,Je[97]=Yc,Je[98]=xu,Je[99]=gi,Je[100]=qi,Je[101]=ei,Je[102]=bi,Je[103]=li,Je[104]=He,Je[105]=tn,Je[106]=Wn,Je[107]=xn,Je[108]=jn,Je[109]=es,Je[110]=ci,Je[111]=Qn,Je[112]=Cu,Je[113]=Iu,Je[114]=Kc,Je[115]=Fa,Je[116]=Vn,Je[117]=In,Je[118]=Vs,Je[119]=ma,Je[120]=ae,Je[121]=u,Je[122]=mn,Je[123]=en,Je[124]=Mn,Je[125]=Mr,Je[126]=En,Je[127]=lo,Je[128]=ro,Je[129]=Oo,Je[130]=Tc,Je[131]=k,Je[132]=To,Je[133]=Ds,Je[134]=R,Je[135]=H,Je[136]=oa,Je[137]=Ps,Je[138]=na,Je[139]=ra,Je[140]=ls,Je[141]=Qa,Je[142]=qs,Je[143]=Sc,Je[144]=us,Je[145]=ga,Je[146]=Gs,Je[147]=Zi,Je[148]=Pt,Je[149]=va,Je[150]=Ti,Je[151]=Dc,Je[152]=gh,Je[153]=jp,Je[154]=T0,Je[155]=T0,Je[156]=cf,Je[157]=Op,Je[158]=fo,Je[159]=Bn;function fd(){return Gi.byteLength/65536|0}function Gp(e){e=e|0;var t=fd()|0,r=t+e|0;if(t<r&&r<65536){var f=new ArrayBuffer(W(r,65536)),y=new Vt.Int8Array(f);y.set(c),c=y,c=new Vt.Int8Array(f),_i=new Vt.Int16Array(f),s=new Vt.Int32Array(f),A=new Vt.Uint8Array(f),tr=new Vt.Uint16Array(f),zr=new Vt.Uint32Array(f),new Vt.Float32Array(f),Gn=new Vt.Float64Array(f),Gi=f,fr.buffer=f}return t}return{__wasm_call_ctors:hd,WebpToSDL:ic,memset:yo,memcpy:Sn,malloc:da,free:gn,__errno_location:qp,stackSave:R0,stackRestore:Vp,stackAlloc:Fp,dynCall_vii:lf,dynCall_vi:ld,dynCall_ii:uf,dynCall_iii:z0,dynCall_iiii:af,dynCall_iiiiiii:Gl,dynCall_viiii:rd,dynCall_viii:nd,dynCall_viiiiii:P0,dynCall_viiiii:xl,dynCall_viiiiiiiii:uc,dynCall_jiiii:L0,dynCall_jiji:L0,__growWasmMemory:Up}}for(var Et=new Uint8Array(qe.buffer),ai=new Uint8Array(123),ii=25;ii>=0;--ii)ai[48+ii]=52+ii,ai[65+ii]=ii,ai[97+ii]=26+ii;ai[43]=62,ai[47]=63;function ni(Vt,Ii,Gi){for(var fr,Je,c=0,_i=Ii,s=Gi.length,A=Ii+(s*3>>2)-(Gi[s-2]=="=")-(Gi[s-1]=="=");c<s;c+=4)fr=ai[Gi.charCodeAt(c+1)],Je=ai[Gi.charCodeAt(c+2)],Vt[_i++]=ai[Gi.charCodeAt(c)]<<2|fr>>4,_i<A&&(Vt[_i++]=fr<<4|Je>>2),_i<A&&(Vt[_i++]=Je<<6|ai[Gi.charCodeAt(c+3)])}return ni(Et,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),ni(Et,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),ni(Et,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),ni(Et,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),ni(Et,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),ni(Et,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),ni(Et,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),ni(Et,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),ni(Et,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),ni(Et,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),ni(Et,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),ni(Et,9803,"DA=="),ni(Et,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),ni(Et,9861,"Dg=="),ni(Et,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),ni(Et,9919,"EA=="),ni(Et,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),ni(Et,9986,"EgAAABISEgAAAAAAAAk="),ni(Et,10035,"Cw=="),ni(Et,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),ni(Et,10093,"DA=="),ni(Et,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),ni(Et,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),ni(Et,10428,"8Cw="),ni(Et,10488,"BQ=="),ni(Et,10500,"nQ=="),ni(Et,10524,"ngAAAJ8AAAAQLQ=="),ni(Et,10548,"Ag=="),ni(Et,10563,"//////8="),St({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},ge,qe.buffer)}(Vo,Pe,be)},instantiate:function(M,V){return{then:function(oe){var ge=new ke.Module(M);oe({instance:new ke.Instance(ge)})}}},RuntimeError:Error};re=[],typeof ke!="object"&&mt("no native wasm support detected");var Pe,be=new ke.Table({initial:160,maximum:160,element:"anyfunc"}),pe=!1;function ye(M,V){M||mt("Assertion failed: "+V)}function me(M){var V=n["_"+M];return ye(V,"Cannot call unknown function "+M+", make sure it is exported"),V}function tt(M,V,oe,ge,qe){var ht={string:function(Gi){var fr=0;if(Gi!=null&&Gi!==0){var Je=(Gi.length<<2)+1;fr=Ll(Je),_t(Gi,fr,Je)}return fr},array:function(Gi){var fr=Ll(Gi.length);return Gt(Gi,fr),fr}};function St(Gi){return V==="string"?Ge(Gi):V==="boolean"?Boolean(Gi):Gi}var Et=me(M),ai=[],ii=0;if(ge)for(var ni=0;ni<ge.length;ni++){var Vt=ht[oe[ni]];Vt?(ii===0&&(ii=Tl()),ai[ni]=Vt(ge[ni])):ai[ni]=ge[ni]}var Ii=Et.apply(null,ai);return Ii=St(Ii),ii!==0&&Wa(ii),Ii}function nt(M,V,oe,ge){oe=oe||[];var qe=oe.every(function(St){return St==="number"}),ht=V!=="string";return ht&&qe&&!ge?me(M):function(){return tt(M,V,oe,arguments)}}var Se=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Me(M,V,oe){for(var ge=V+oe,qe=V;M[qe]&&!(qe>=ge);)++qe;if(qe-V>16&&M.subarray&&Se)return Se.decode(M.subarray(V,qe));for(var ht="";V<qe;){var St=M[V++];if(!(St&128)){ht+=String.fromCharCode(St);continue}var Et=M[V++]&63;if((St&224)==192){ht+=String.fromCharCode((St&31)<<6|Et);continue}var ai=M[V++]&63;if((St&240)==224?St=(St&15)<<12|Et<<6|ai:St=(St&7)<<18|Et<<12|ai<<6|M[V++]&63,St<65536)ht+=String.fromCharCode(St);else{var ii=St-65536;ht+=String.fromCharCode(55296|ii>>10,56320|ii&1023)}}return ht}function Ge(M,V){return M?Me(ve,M,V):""}function Xe(M,V,oe,ge){if(!(ge>0))return 0;for(var qe=oe,ht=oe+ge-1,St=0;St<M.length;++St){var Et=M.charCodeAt(St);if(Et>=55296&&Et<=57343){var ai=M.charCodeAt(++St);Et=65536+((Et&1023)<<10)|ai&1023}if(Et<=127){if(oe>=ht)break;V[oe++]=Et}else if(Et<=2047){if(oe+1>=ht)break;V[oe++]=192|Et>>6,V[oe++]=128|Et&63}else if(Et<=65535){if(oe+2>=ht)break;V[oe++]=224|Et>>12,V[oe++]=128|Et>>6&63,V[oe++]=128|Et&63}else{if(oe+3>=ht)break;V[oe++]=240|Et>>18,V[oe++]=128|Et>>12&63,V[oe++]=128|Et>>6&63,V[oe++]=128|Et&63}}return V[oe]=0,oe-qe}function _t(M,V,oe){return Xe(M,ve,V,oe)}function pt(M){for(var V=0,oe=0;oe<M.length;++oe){var ge=M.charCodeAt(oe);ge>=55296&&ge<=57343&&(ge=65536+((ge&1023)<<10)|M.charCodeAt(++oe)&1023),ge<=127?++V:ge<=2047?V+=2:ge<=65535?V+=3:V+=4}return V}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Gt(M,V){qt.set(M,V)}var kt=65536;function Xt(M,V){return M%V>0&&(M+=V-M%V),M}var Mt,qt,ve,it,Re,bt,Ct;function Ot(M){Mt=M,n.HEAP8=qt=new Int8Array(M),n.HEAP16=it=new Int16Array(M),n.HEAP32=Re=new Int32Array(M),n.HEAPU8=ve=new Uint8Array(M),n.HEAPU16=new Uint16Array(M),n.HEAPU32=bt=new Uint32Array(M),n.HEAPF32=Ct=new Float32Array(M),n.HEAPF64=new Float64Array(M)}var Ht=5255072,Wt=12032,si=n.INITIAL_MEMORY||67108864;n.wasmMemory?Pe=n.wasmMemory:Pe=new ke.Memory({initial:si/kt,maximum:2147483648/kt}),Pe&&(Mt=Pe.buffer),si=Mt.byteLength,Ot(Mt),Re[Wt>>2]=Ht;function ri(M){for(;M.length>0;){var V=M.shift();if(typeof V=="function"){V(n);continue}var oe=V.func;typeof oe=="number"?V.arg===void 0?n.dynCall_v(oe):n.dynCall_vi(oe,V.arg):oe(V.arg===void 0?null:V.arg)}}var zi=[],Di=[],er=[],Zt=[];function yt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Hi(n.preRun.shift());ri(zi)}function $i(){!n.noFSInit&&!Le.init.initialized&&Le.init(),ri(Di)}function nr(){Le.ignorePermissions=!1,ri(er)}function di(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Ki(n.postRun.shift());ri(Zt)}function Hi(M){zi.unshift(M)}function Ki(M){Zt.unshift(M)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(V,oe){var ge=V>>>16,qe=V&65535,ht=oe>>>16,St=oe&65535;return qe*St+(ge*St+qe*ht<<16)|0}),!Math.fround){var Ui=new Float32Array(1);Math.fround=function(M){return Ui[0]=M,Ui[0]}}Math.clz32||(Math.clz32=function(M){var V=32,oe=M>>16;return oe&&(V-=16,M=oe),oe=M>>8,oe&&(V-=8,M=oe),oe=M>>4,oe&&(V-=4,M=oe),oe=M>>2,oe&&(V-=2,M=oe),oe=M>>1,oe?V-2:V-M}),Math.trunc||(Math.trunc=function(M){return M<0?Math.ceil(M):Math.floor(M)});var Qt=Math.abs,lr=Math.ceil,pi=Math.floor,Dr=Math.min,ze=0,Y=null;function te(M){return M}function je(M){ze++,n.monitorRunDependencies&&n.monitorRunDependencies(ze)}function ot(M){if(ze--,n.monitorRunDependencies&&n.monitorRunDependencies(ze),ze==0&&Y){var V=Y;Y=null,V()}}n.preloadedImages={},n.preloadedAudios={};function mt(M){n.onAbort&&n.onAbort(M),M+="",U(M),pe=!0,M="abort("+M+"). Build with -s ASSERTIONS=1 for more info.";var V=new ke.RuntimeError(M);throw V}function Jt(M,V){return String.prototype.startsWith?M.startsWith(V):M.indexOf(V)===0}var hr="data:application/octet-stream;base64,";function xr(M){return Jt(M,hr)}var or="webp.wasm";xr(or)||(or=b(or));function Ei(){try{if(re)return new Uint8Array(re);var M=fs(or);if(M)return M;if(!L)throw"both async and sync fetching of the wasm failed"}catch(V){mt(V)}}function Wi(){return!re&&p&&typeof fetch=="function"?fetch(or,{credentials:"same-origin"}).then(function(M){if(!M.ok)throw"failed to load wasm binary file at '"+or+"'";return M.arrayBuffer()}).catch(function(){return Ei()}):i.resolve().then(Ei)}function Br(){var M={env:Vo,wasi_snapshot_preview1:Vo};function V(St,Et){var ai=St.exports;n.asm=ai,ot()}je();function oe(St){V(St.instance)}function ge(St){return Wi().then(function(Et){return ke.instantiate(Et,M)}).then(St,function(Et){U("failed to asynchronously prepare wasm: "+Et),mt(Et)})}function qe(){if(!re&&typeof ke.instantiateStreaming=="function"&&!xr(or)&&typeof fetch=="function")fetch(or,{credentials:"same-origin"}).then(function(St){var Et=ke.instantiateStreaming(St,M);return Et.then(oe,function(ai){return U("wasm streaming compile failed: "+ai),U("falling back to ArrayBuffer instantiation"),ge(oe)})});else return ge(oe)}if(n.instantiateWasm)try{var ht=n.instantiateWasm(M,V);return ht}catch(St){return U("Module.instantiateWasm callback failed with error: "+St),!1}return qe(),{}}var Zr,Pn;Di.push({func:function(){$s()}});function Vr(M){return M}function vn(M){var V=/\b_Z[\w\d_]+/g;return M.replace(V,function(oe){var ge=oe;return oe===ge?oe:ge+" ["+oe+"]"})}function Pr(){var M=new Error;if(!M.stack){try{throw new Error}catch(V){M=V}if(!M.stack)return"(no stack trace available)"}return M.stack.toString()}function _n(){var M=Pr();return n.extraStackTrace&&(M+=`
`+n.extraStackTrace()),vn(M)}function Tn(M){return Re[Ha()>>2]=M,M}var Tr={splitPath:function(M){var V=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return V.exec(M).slice(1)},normalizeArray:function(M,V){for(var oe=0,ge=M.length-1;ge>=0;ge--){var qe=M[ge];qe==="."?M.splice(ge,1):qe===".."?(M.splice(ge,1),oe++):oe&&(M.splice(ge,1),oe--)}if(V)for(;oe;oe--)M.unshift("..");return M},normalize:function(M){var V=M.charAt(0)==="/",oe=M.substr(-1)==="/";return M=Tr.normalizeArray(M.split("/").filter(function(ge){return!!ge}),!V).join("/"),!M&&!V&&(M="."),M&&oe&&(M+="/"),(V?"/":"")+M},dirname:function(M){var V=Tr.splitPath(M),oe=V[0],ge=V[1];return!oe&&!ge?".":(ge&&(ge=ge.substr(0,ge.length-1)),oe+ge)},basename:function(M){if(M==="/")return"/";M=Tr.normalize(M),M=M.replace(/\/$/,"");var V=M.lastIndexOf("/");return V===-1?M:M.substr(V+1)},extname:function(M){return Tr.splitPath(M)[3]},join:function(){var M=Array.prototype.slice.call(arguments,0);return Tr.normalize(M.join("/"))},join2:function(M,V){return Tr.normalize(M+"/"+V)}},Qr={resolve:function(){for(var M="",V=!1,oe=arguments.length-1;oe>=-1&&!V;oe--){var ge=oe>=0?arguments[oe]:Le.cwd();if(typeof ge!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!ge)return"";M=ge+"/"+M,V=ge.charAt(0)==="/"}return M=Tr.normalizeArray(M.split("/").filter(function(qe){return!!qe}),!V).join("/"),(V?"/":"")+M||"."},relative:function(M,V){M=Qr.resolve(M).substr(1),V=Qr.resolve(V).substr(1);function oe(ii){for(var ni=0;ni<ii.length&&ii[ni]==="";ni++);for(var Vt=ii.length-1;Vt>=0&&ii[Vt]==="";Vt--);return ni>Vt?[]:ii.slice(ni,Vt-ni+1)}for(var ge=oe(M.split("/")),qe=oe(V.split("/")),ht=Math.min(ge.length,qe.length),St=ht,Et=0;Et<ht;Et++)if(ge[Et]!==qe[Et]){St=Et;break}for(var ai=[],Et=St;Et<ge.length;Et++)ai.push("..");return ai=ai.concat(qe.slice(St)),ai.join("/")}},Un={ttys:[],init:function(){},shutdown:function(){},register:function(M,V){Un.ttys[M]={input:[],output:[],ops:V},Le.registerDevice(M,Un.stream_ops)},stream_ops:{open:function(M){var V=Un.ttys[M.node.rdev];if(!V)throw new Le.ErrnoError(43);M.tty=V,M.seekable=!1},close:function(M){M.tty.ops.flush(M.tty)},flush:function(M){M.tty.ops.flush(M.tty)},read:function(M,V,oe,ge,qe){if(!M.tty||!M.tty.ops.get_char)throw new Le.ErrnoError(60);for(var ht=0,St=0;St<ge;St++){var Et;try{Et=M.tty.ops.get_char(M.tty)}catch{throw new Le.ErrnoError(29)}if(Et===void 0&&ht===0)throw new Le.ErrnoError(6);if(Et==null)break;ht++,V[oe+St]=Et}return ht&&(M.node.timestamp=Date.now()),ht},write:function(M,V,oe,ge,qe){if(!M.tty||!M.tty.ops.put_char)throw new Le.ErrnoError(60);try{for(var ht=0;ht<ge;ht++)M.tty.ops.put_char(M.tty,V[oe+ht])}catch{throw new Le.ErrnoError(29)}return ge&&(M.node.timestamp=Date.now()),ht}},default_tty_ops:{get_char:function(M){if(!M.input.length){var V=null;if(typeof window<"u"&&typeof window.prompt=="function"?(V=window.prompt("Input: "),V!==null&&(V+=`
`)):typeof readline=="function"&&(V=readline(),V!==null&&(V+=`
`)),!V)return null;M.input=mo(V,!0)}return M.input.shift()},put_char:function(M,V){V===null||V===10?(z(Me(M.output,0)),M.output=[]):V!=0&&M.output.push(V)},flush:function(M){M.output&&M.output.length>0&&(z(Me(M.output,0)),M.output=[])}},default_tty1_ops:{put_char:function(M,V){V===null||V===10?(U(Me(M.output,0)),M.output=[]):V!=0&&M.output.push(V)},flush:function(M){M.output&&M.output.length>0&&(U(Me(M.output,0)),M.output=[])}}},Bi={ops_table:null,mount:function(M){return Bi.createNode(null,"/",16895,0)},createNode:function(M,V,oe,ge){if(Le.isBlkdev(oe)||Le.isFIFO(oe))throw new Le.ErrnoError(63);Bi.ops_table||(Bi.ops_table={dir:{node:{getattr:Bi.node_ops.getattr,setattr:Bi.node_ops.setattr,lookup:Bi.node_ops.lookup,mknod:Bi.node_ops.mknod,rename:Bi.node_ops.rename,unlink:Bi.node_ops.unlink,rmdir:Bi.node_ops.rmdir,readdir:Bi.node_ops.readdir,symlink:Bi.node_ops.symlink},stream:{llseek:Bi.stream_ops.llseek}},file:{node:{getattr:Bi.node_ops.getattr,setattr:Bi.node_ops.setattr},stream:{llseek:Bi.stream_ops.llseek,read:Bi.stream_ops.read,write:Bi.stream_ops.write,allocate:Bi.stream_ops.allocate,mmap:Bi.stream_ops.mmap,msync:Bi.stream_ops.msync}},link:{node:{getattr:Bi.node_ops.getattr,setattr:Bi.node_ops.setattr,readlink:Bi.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Bi.node_ops.getattr,setattr:Bi.node_ops.setattr},stream:Le.chrdev_stream_ops}});var qe=Le.createNode(M,V,oe,ge);return Le.isDir(qe.mode)?(qe.node_ops=Bi.ops_table.dir.node,qe.stream_ops=Bi.ops_table.dir.stream,qe.contents={}):Le.isFile(qe.mode)?(qe.node_ops=Bi.ops_table.file.node,qe.stream_ops=Bi.ops_table.file.stream,qe.usedBytes=0,qe.contents=null):Le.isLink(qe.mode)?(qe.node_ops=Bi.ops_table.link.node,qe.stream_ops=Bi.ops_table.link.stream):Le.isChrdev(qe.mode)&&(qe.node_ops=Bi.ops_table.chrdev.node,qe.stream_ops=Bi.ops_table.chrdev.stream),qe.timestamp=Date.now(),M&&(M.contents[V]=qe),qe},getFileDataAsRegularArray:function(M){if(M.contents&&M.contents.subarray){for(var V=[],oe=0;oe<M.usedBytes;++oe)V.push(M.contents[oe]);return V}return M.contents},getFileDataAsTypedArray:function(M){return M.contents?M.contents.subarray?M.contents.subarray(0,M.usedBytes):new Uint8Array(M.contents):new Uint8Array(0)},expandFileStorage:function(M,V){var oe=M.contents?M.contents.length:0;if(!(oe>=V)){var ge=1024*1024;V=Math.max(V,oe*(oe<ge?2:1.125)>>>0),oe!=0&&(V=Math.max(V,256));var qe=M.contents;M.contents=new Uint8Array(V),M.usedBytes>0&&M.contents.set(qe.subarray(0,M.usedBytes),0)}},resizeFileStorage:function(M,V){if(M.usedBytes!=V){if(V==0){M.contents=null,M.usedBytes=0;return}if(!M.contents||M.contents.subarray){var oe=M.contents;M.contents=new Uint8Array(V),oe&&M.contents.set(oe.subarray(0,Math.min(V,M.usedBytes))),M.usedBytes=V;return}if(M.contents||(M.contents=[]),M.contents.length>V)M.contents.length=V;else for(;M.contents.length<V;)M.contents.push(0);M.usedBytes=V}},node_ops:{getattr:function(M){var V={};return V.dev=Le.isChrdev(M.mode)?M.id:1,V.ino=M.id,V.mode=M.mode,V.nlink=1,V.uid=0,V.gid=0,V.rdev=M.rdev,Le.isDir(M.mode)?V.size=4096:Le.isFile(M.mode)?V.size=M.usedBytes:Le.isLink(M.mode)?V.size=M.link.length:V.size=0,V.atime=new Date(M.timestamp),V.mtime=new Date(M.timestamp),V.ctime=new Date(M.timestamp),V.blksize=4096,V.blocks=Math.ceil(V.size/V.blksize),V},setattr:function(M,V){V.mode!==void 0&&(M.mode=V.mode),V.timestamp!==void 0&&(M.timestamp=V.timestamp),V.size!==void 0&&Bi.resizeFileStorage(M,V.size)},lookup:function(M,V){throw Le.genericErrors[44]},mknod:function(M,V,oe,ge){return Bi.createNode(M,V,oe,ge)},rename:function(M,V,oe){if(Le.isDir(M.mode)){var ge;try{ge=Le.lookupNode(V,oe)}catch{}if(ge)for(var qe in ge.contents)throw new Le.ErrnoError(55)}delete M.parent.contents[M.name],M.name=oe,V.contents[oe]=M,M.parent=V},unlink:function(M,V){delete M.contents[V]},rmdir:function(M,V){var oe=Le.lookupNode(M,V);for(var ge in oe.contents)throw new Le.ErrnoError(55);delete M.contents[V]},readdir:function(M){var V=[".",".."];for(var oe in M.contents)!M.contents.hasOwnProperty(oe)||V.push(oe);return V},symlink:function(M,V,oe){var ge=Bi.createNode(M,V,41471,0);return ge.link=oe,ge},readlink:function(M){if(!Le.isLink(M.mode))throw new Le.ErrnoError(28);return M.link}},stream_ops:{read:function(M,V,oe,ge,qe){var ht=M.node.contents;if(qe>=M.node.usedBytes)return 0;var St=Math.min(M.node.usedBytes-qe,ge);if(St>8&&ht.subarray)V.set(ht.subarray(qe,qe+St),oe);else for(var Et=0;Et<St;Et++)V[oe+Et]=ht[qe+Et];return St},write:function(M,V,oe,ge,qe,ht){if(V.buffer===qt.buffer&&(ht=!1),!ge)return 0;var St=M.node;if(St.timestamp=Date.now(),V.subarray&&(!St.contents||St.contents.subarray)){if(ht)return St.contents=V.subarray(oe,oe+ge),St.usedBytes=ge,ge;if(St.usedBytes===0&&qe===0)return St.contents=V.slice(oe,oe+ge),St.usedBytes=ge,ge;if(qe+ge<=St.usedBytes)return St.contents.set(V.subarray(oe,oe+ge),qe),ge}if(Bi.expandFileStorage(St,qe+ge),St.contents.subarray&&V.subarray)St.contents.set(V.subarray(oe,oe+ge),qe);else for(var Et=0;Et<ge;Et++)St.contents[qe+Et]=V[oe+Et];return St.usedBytes=Math.max(St.usedBytes,qe+ge),ge},llseek:function(M,V,oe){var ge=V;if(oe===1?ge+=M.position:oe===2&&Le.isFile(M.node.mode)&&(ge+=M.node.usedBytes),ge<0)throw new Le.ErrnoError(28);return ge},allocate:function(M,V,oe){Bi.expandFileStorage(M.node,V+oe),M.node.usedBytes=Math.max(M.node.usedBytes,V+oe)},mmap:function(M,V,oe,ge,qe,ht){if(ye(V===0),!Le.isFile(M.node.mode))throw new Le.ErrnoError(43);var St,Et,ai=M.node.contents;if(!(ht&2)&&ai.buffer===Mt)Et=!1,St=ai.byteOffset;else{if((ge>0||ge+oe<ai.length)&&(ai.subarray?ai=ai.subarray(ge,ge+oe):ai=Array.prototype.slice.call(ai,ge,ge+oe)),Et=!0,St=Le.mmapAlloc(oe),!St)throw new Le.ErrnoError(48);qt.set(ai,St)}return{ptr:St,allocated:Et}},msync:function(M,V,oe,ge,qe){if(!Le.isFile(M.node.mode))throw new Le.ErrnoError(43);return qe&2||Bi.stream_ops.write(M,V,0,ge,oe,!1),0}}},Le={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(M){if(!(M instanceof Le.ErrnoError))throw M+" : "+_n();return Tn(M.errno)},lookupPath:function(M,V){if(M=Qr.resolve(Le.cwd(),M),V=V||{},!M)return{path:"",node:null};var oe={follow_mount:!0,recurse_count:0};for(var ge in oe)V[ge]===void 0&&(V[ge]=oe[ge]);if(V.recurse_count>8)throw new Le.ErrnoError(32);for(var qe=Tr.normalizeArray(M.split("/").filter(function(Ii){return!!Ii}),!1),ht=Le.root,St="/",Et=0;Et<qe.length;Et++){var ai=Et===qe.length-1;if(ai&&V.parent)break;if(ht=Le.lookupNode(ht,qe[Et]),St=Tr.join2(St,qe[Et]),Le.isMountpoint(ht)&&(!ai||ai&&V.follow_mount)&&(ht=ht.mounted.root),!ai||V.follow)for(var ii=0;Le.isLink(ht.mode);){var ni=Le.readlink(St);St=Qr.resolve(Tr.dirname(St),ni);var Vt=Le.lookupPath(St,{recurse_count:V.recurse_count});if(ht=Vt.node,ii++>40)throw new Le.ErrnoError(32)}}return{path:St,node:ht}},getPath:function(M){for(var V;;){if(Le.isRoot(M)){var oe=M.mount.mountpoint;return V?oe[oe.length-1]!=="/"?oe+"/"+V:oe+V:oe}V=V?M.name+"/"+V:M.name,M=M.parent}},hashName:function(M,V){for(var oe=0,ge=0;ge<V.length;ge++)oe=(oe<<5)-oe+V.charCodeAt(ge)|0;return(M+oe>>>0)%Le.nameTable.length},hashAddNode:function(M){var V=Le.hashName(M.parent.id,M.name);M.name_next=Le.nameTable[V],Le.nameTable[V]=M},hashRemoveNode:function(M){var V=Le.hashName(M.parent.id,M.name);if(Le.nameTable[V]===M)Le.nameTable[V]=M.name_next;else for(var oe=Le.nameTable[V];oe;){if(oe.name_next===M){oe.name_next=M.name_next;break}oe=oe.name_next}},lookupNode:function(M,V){var oe=Le.mayLookup(M);if(oe)throw new Le.ErrnoError(oe,M);for(var ge=Le.hashName(M.id,V),qe=Le.nameTable[ge];qe;qe=qe.name_next){var ht=qe.name;if(qe.parent.id===M.id&&ht===V)return qe}return Le.lookup(M,V)},createNode:function(M,V,oe,ge){var qe=new Le.FSNode(M,V,oe,ge);return Le.hashAddNode(qe),qe},destroyNode:function(M){Le.hashRemoveNode(M)},isRoot:function(M){return M===M.parent},isMountpoint:function(M){return!!M.mounted},isFile:function(M){return(M&61440)===32768},isDir:function(M){return(M&61440)===16384},isLink:function(M){return(M&61440)===40960},isChrdev:function(M){return(M&61440)===8192},isBlkdev:function(M){return(M&61440)===24576},isFIFO:function(M){return(M&61440)===4096},isSocket:function(M){return(M&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(M){var V=Le.flagModes[M];if(typeof V>"u")throw new Error("Unknown file open mode: "+M);return V},flagsToPermissionString:function(M){var V=["r","w","rw"][M&3];return M&512&&(V+="w"),V},nodePermissions:function(M,V){return Le.ignorePermissions?0:V.indexOf("r")!==-1&&!(M.mode&292)||V.indexOf("w")!==-1&&!(M.mode&146)||V.indexOf("x")!==-1&&!(M.mode&73)?2:0},mayLookup:function(M){var V=Le.nodePermissions(M,"x");return V||(M.node_ops.lookup?0:2)},mayCreate:function(M,V){try{var oe=Le.lookupNode(M,V);return 20}catch{}return Le.nodePermissions(M,"wx")},mayDelete:function(M,V,oe){var ge;try{ge=Le.lookupNode(M,V)}catch(ht){return ht.errno}var qe=Le.nodePermissions(M,"wx");if(qe)return qe;if(oe){if(!Le.isDir(ge.mode))return 54;if(Le.isRoot(ge)||Le.getPath(ge)===Le.cwd())return 10}else if(Le.isDir(ge.mode))return 31;return 0},mayOpen:function(M,V){return M?Le.isLink(M.mode)?32:Le.isDir(M.mode)&&(Le.flagsToPermissionString(V)!=="r"||V&512)?31:Le.nodePermissions(M,Le.flagsToPermissionString(V)):44},MAX_OPEN_FDS:4096,nextfd:function(M,V){M=M||0,V=V||Le.MAX_OPEN_FDS;for(var oe=M;oe<=V;oe++)if(!Le.streams[oe])return oe;throw new Le.ErrnoError(33)},getStream:function(M){return Le.streams[M]},createStream:function(M,V,oe){Le.FSStream||(Le.FSStream=function(){},Le.FSStream.prototype={object:{get:function(){return this.node},set:function(St){this.node=St}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var ge=new Le.FSStream;for(var qe in M)ge[qe]=M[qe];M=ge;var ht=Le.nextfd(V,oe);return M.fd=ht,Le.streams[ht]=M,M},closeStream:function(M){Le.streams[M]=null},chrdev_stream_ops:{open:function(M){var V=Le.getDevice(M.node.rdev);M.stream_ops=V.stream_ops,M.stream_ops.open&&M.stream_ops.open(M)},llseek:function(){throw new Le.ErrnoError(70)}},major:function(M){return M>>8},minor:function(M){return M&255},makedev:function(M,V){return M<<8|V},registerDevice:function(M,V){Le.devices[M]={stream_ops:V}},getDevice:function(M){return Le.devices[M]},getMounts:function(M){for(var V=[],oe=[M];oe.length;){var ge=oe.pop();V.push(ge),oe.push.apply(oe,ge.mounts)}return V},syncfs:function(M,V){typeof M=="function"&&(V=M,M=!1),Le.syncFSRequests++,Le.syncFSRequests>1&&U("warning: "+Le.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var oe=Le.getMounts(Le.root.mount),ge=0;function qe(St){return Le.syncFSRequests--,V(St)}function ht(St){if(St)return ht.errored?void 0:(ht.errored=!0,qe(St));++ge>=oe.length&&qe(null)}oe.forEach(function(St){if(!St.type.syncfs)return ht(null);St.type.syncfs(St,M,ht)})},mount:function(M,V,oe){var ge=oe==="/",qe=!oe,ht;if(ge&&Le.root)throw new Le.ErrnoError(10);if(!ge&&!qe){var St=Le.lookupPath(oe,{follow_mount:!1});if(oe=St.path,ht=St.node,Le.isMountpoint(ht))throw new Le.ErrnoError(10);if(!Le.isDir(ht.mode))throw new Le.ErrnoError(54)}var Et={type:M,opts:V,mountpoint:oe,mounts:[]},ai=M.mount(Et);return ai.mount=Et,Et.root=ai,ge?Le.root=ai:ht&&(ht.mounted=Et,ht.mount&&ht.mount.mounts.push(Et)),ai},unmount:function(M){var V=Le.lookupPath(M,{follow_mount:!1});if(!Le.isMountpoint(V.node))throw new Le.ErrnoError(28);var oe=V.node,ge=oe.mounted,qe=Le.getMounts(ge);Object.keys(Le.nameTable).forEach(function(St){for(var Et=Le.nameTable[St];Et;){var ai=Et.name_next;qe.indexOf(Et.mount)!==-1&&Le.destroyNode(Et),Et=ai}}),oe.mounted=null;var ht=oe.mount.mounts.indexOf(ge);oe.mount.mounts.splice(ht,1)},lookup:function(M,V){return M.node_ops.lookup(M,V)},mknod:function(M,V,oe){var ge=Le.lookupPath(M,{parent:!0}),qe=ge.node,ht=Tr.basename(M);if(!ht||ht==="."||ht==="..")throw new Le.ErrnoError(28);var St=Le.mayCreate(qe,ht);if(St)throw new Le.ErrnoError(St);if(!qe.node_ops.mknod)throw new Le.ErrnoError(63);return qe.node_ops.mknod(qe,ht,V,oe)},create:function(M,V){return V=V!==void 0?V:438,V&=4095,V|=32768,Le.mknod(M,V,0)},mkdir:function(M,V){return V=V!==void 0?V:511,V&=1023,V|=16384,Le.mknod(M,V,0)},mkdirTree:function(M,V){for(var oe=M.split("/"),ge="",qe=0;qe<oe.length;++qe)if(!!oe[qe]){ge+="/"+oe[qe];try{Le.mkdir(ge,V)}catch(ht){if(ht.errno!=20)throw ht}}},mkdev:function(M,V,oe){return typeof oe>"u"&&(oe=V,V=438),V|=8192,Le.mknod(M,V,oe)},symlink:function(M,V){if(!Qr.resolve(M))throw new Le.ErrnoError(44);var oe=Le.lookupPath(V,{parent:!0}),ge=oe.node;if(!ge)throw new Le.ErrnoError(44);var qe=Tr.basename(V),ht=Le.mayCreate(ge,qe);if(ht)throw new Le.ErrnoError(ht);if(!ge.node_ops.symlink)throw new Le.ErrnoError(63);return ge.node_ops.symlink(ge,qe,M)},rename:function(M,V){var oe=Tr.dirname(M),ge=Tr.dirname(V),qe=Tr.basename(M),ht=Tr.basename(V),St,Et,ai;if(St=Le.lookupPath(M,{parent:!0}),Et=St.node,St=Le.lookupPath(V,{parent:!0}),ai=St.node,!Et||!ai)throw new Le.ErrnoError(44);if(Et.mount!==ai.mount)throw new Le.ErrnoError(75);var ii=Le.lookupNode(Et,qe),ni=Qr.relative(M,ge);if(ni.charAt(0)!==".")throw new Le.ErrnoError(28);if(ni=Qr.relative(V,oe),ni.charAt(0)!==".")throw new Le.ErrnoError(55);var Vt;try{Vt=Le.lookupNode(ai,ht)}catch{}if(ii!==Vt){var Ii=Le.isDir(ii.mode),Gi=Le.mayDelete(Et,qe,Ii);if(Gi)throw new Le.ErrnoError(Gi);if(Gi=Vt?Le.mayDelete(ai,ht,Ii):Le.mayCreate(ai,ht),Gi)throw new Le.ErrnoError(Gi);if(!Et.node_ops.rename)throw new Le.ErrnoError(63);if(Le.isMountpoint(ii)||Vt&&Le.isMountpoint(Vt))throw new Le.ErrnoError(10);if(ai!==Et&&(Gi=Le.nodePermissions(Et,"w"),Gi))throw new Le.ErrnoError(Gi);try{Le.trackingDelegate.willMovePath&&Le.trackingDelegate.willMovePath(M,V)}catch(fr){U("FS.trackingDelegate['willMovePath']('"+M+"', '"+V+"') threw an exception: "+fr.message)}Le.hashRemoveNode(ii);try{Et.node_ops.rename(ii,ai,ht)}catch(fr){throw fr}finally{Le.hashAddNode(ii)}try{Le.trackingDelegate.onMovePath&&Le.trackingDelegate.onMovePath(M,V)}catch(fr){U("FS.trackingDelegate['onMovePath']('"+M+"', '"+V+"') threw an exception: "+fr.message)}}},rmdir:function(M){var V=Le.lookupPath(M,{parent:!0}),oe=V.node,ge=Tr.basename(M),qe=Le.lookupNode(oe,ge),ht=Le.mayDelete(oe,ge,!0);if(ht)throw new Le.ErrnoError(ht);if(!oe.node_ops.rmdir)throw new Le.ErrnoError(63);if(Le.isMountpoint(qe))throw new Le.ErrnoError(10);try{Le.trackingDelegate.willDeletePath&&Le.trackingDelegate.willDeletePath(M)}catch(St){U("FS.trackingDelegate['willDeletePath']('"+M+"') threw an exception: "+St.message)}oe.node_ops.rmdir(oe,ge),Le.destroyNode(qe);try{Le.trackingDelegate.onDeletePath&&Le.trackingDelegate.onDeletePath(M)}catch(St){U("FS.trackingDelegate['onDeletePath']('"+M+"') threw an exception: "+St.message)}},readdir:function(M){var V=Le.lookupPath(M,{follow:!0}),oe=V.node;if(!oe.node_ops.readdir)throw new Le.ErrnoError(54);return oe.node_ops.readdir(oe)},unlink:function(M){var V=Le.lookupPath(M,{parent:!0}),oe=V.node,ge=Tr.basename(M),qe=Le.lookupNode(oe,ge),ht=Le.mayDelete(oe,ge,!1);if(ht)throw new Le.ErrnoError(ht);if(!oe.node_ops.unlink)throw new Le.ErrnoError(63);if(Le.isMountpoint(qe))throw new Le.ErrnoError(10);try{Le.trackingDelegate.willDeletePath&&Le.trackingDelegate.willDeletePath(M)}catch(St){U("FS.trackingDelegate['willDeletePath']('"+M+"') threw an exception: "+St.message)}oe.node_ops.unlink(oe,ge),Le.destroyNode(qe);try{Le.trackingDelegate.onDeletePath&&Le.trackingDelegate.onDeletePath(M)}catch(St){U("FS.trackingDelegate['onDeletePath']('"+M+"') threw an exception: "+St.message)}},readlink:function(M){var V=Le.lookupPath(M),oe=V.node;if(!oe)throw new Le.ErrnoError(44);if(!oe.node_ops.readlink)throw new Le.ErrnoError(28);return Qr.resolve(Le.getPath(oe.parent),oe.node_ops.readlink(oe))},stat:function(M,V){var oe=Le.lookupPath(M,{follow:!V}),ge=oe.node;if(!ge)throw new Le.ErrnoError(44);if(!ge.node_ops.getattr)throw new Le.ErrnoError(63);return ge.node_ops.getattr(ge)},lstat:function(M){return Le.stat(M,!0)},chmod:function(M,V,oe){var ge;if(typeof M=="string"){var qe=Le.lookupPath(M,{follow:!oe});ge=qe.node}else ge=M;if(!ge.node_ops.setattr)throw new Le.ErrnoError(63);ge.node_ops.setattr(ge,{mode:V&4095|ge.mode&-4096,timestamp:Date.now()})},lchmod:function(M,V){Le.chmod(M,V,!0)},fchmod:function(M,V){var oe=Le.getStream(M);if(!oe)throw new Le.ErrnoError(8);Le.chmod(oe.node,V)},chown:function(M,V,oe,ge){var qe;if(typeof M=="string"){var ht=Le.lookupPath(M,{follow:!ge});qe=ht.node}else qe=M;if(!qe.node_ops.setattr)throw new Le.ErrnoError(63);qe.node_ops.setattr(qe,{timestamp:Date.now()})},lchown:function(M,V,oe){Le.chown(M,V,oe,!0)},fchown:function(M,V,oe){var ge=Le.getStream(M);if(!ge)throw new Le.ErrnoError(8);Le.chown(ge.node,V,oe)},truncate:function(M,V){if(V<0)throw new Le.ErrnoError(28);var oe;if(typeof M=="string"){var ge=Le.lookupPath(M,{follow:!0});oe=ge.node}else oe=M;if(!oe.node_ops.setattr)throw new Le.ErrnoError(63);if(Le.isDir(oe.mode))throw new Le.ErrnoError(31);if(!Le.isFile(oe.mode))throw new Le.ErrnoError(28);var qe=Le.nodePermissions(oe,"w");if(qe)throw new Le.ErrnoError(qe);oe.node_ops.setattr(oe,{size:V,timestamp:Date.now()})},ftruncate:function(M,V){var oe=Le.getStream(M);if(!oe)throw new Le.ErrnoError(8);if((oe.flags&2097155)===0)throw new Le.ErrnoError(28);Le.truncate(oe.node,V)},utime:function(M,V,oe){var ge=Le.lookupPath(M,{follow:!0}),qe=ge.node;qe.node_ops.setattr(qe,{timestamp:Math.max(V,oe)})},open:function(M,V,oe,ge,qe){if(M==="")throw new Le.ErrnoError(44);V=typeof V=="string"?Le.modeStringToFlags(V):V,oe=typeof oe>"u"?438:oe,V&64?oe=oe&4095|32768:oe=0;var ht;if(typeof M=="object")ht=M;else{M=Tr.normalize(M);try{var St=Le.lookupPath(M,{follow:!(V&131072)});ht=St.node}catch{}}var Et=!1;if(V&64)if(ht){if(V&128)throw new Le.ErrnoError(20)}else ht=Le.mknod(M,oe,0),Et=!0;if(!ht)throw new Le.ErrnoError(44);if(Le.isChrdev(ht.mode)&&(V&=-513),V&65536&&!Le.isDir(ht.mode))throw new Le.ErrnoError(54);if(!Et){var ai=Le.mayOpen(ht,V);if(ai)throw new Le.ErrnoError(ai)}V&512&&Le.truncate(ht,0),V&=-131713;var ii=Le.createStream({node:ht,path:Le.getPath(ht),flags:V,seekable:!0,position:0,stream_ops:ht.stream_ops,ungotten:[],error:!1},ge,qe);ii.stream_ops.open&&ii.stream_ops.open(ii),n.logReadFiles&&!(V&1)&&(Le.readFiles||(Le.readFiles={}),M in Le.readFiles||(Le.readFiles[M]=1,U("FS.trackingDelegate error on read file: "+M)));try{if(Le.trackingDelegate.onOpenFile){var ni=0;(V&2097155)!==1&&(ni|=Le.tracking.openFlags.READ),(V&2097155)!==0&&(ni|=Le.tracking.openFlags.WRITE),Le.trackingDelegate.onOpenFile(M,ni)}}catch(Vt){U("FS.trackingDelegate['onOpenFile']('"+M+"', flags) threw an exception: "+Vt.message)}return ii},close:function(M){if(Le.isClosed(M))throw new Le.ErrnoError(8);M.getdents&&(M.getdents=null);try{M.stream_ops.close&&M.stream_ops.close(M)}catch(V){throw V}finally{Le.closeStream(M.fd)}M.fd=null},isClosed:function(M){return M.fd===null},llseek:function(M,V,oe){if(Le.isClosed(M))throw new Le.ErrnoError(8);if(!M.seekable||!M.stream_ops.llseek)throw new Le.ErrnoError(70);if(oe!=0&&oe!=1&&oe!=2)throw new Le.ErrnoError(28);return M.position=M.stream_ops.llseek(M,V,oe),M.ungotten=[],M.position},read:function(M,V,oe,ge,qe){if(ge<0||qe<0)throw new Le.ErrnoError(28);if(Le.isClosed(M))throw new Le.ErrnoError(8);if((M.flags&2097155)===1)throw new Le.ErrnoError(8);if(Le.isDir(M.node.mode))throw new Le.ErrnoError(31);if(!M.stream_ops.read)throw new Le.ErrnoError(28);var ht=typeof qe<"u";if(!ht)qe=M.position;else if(!M.seekable)throw new Le.ErrnoError(70);var St=M.stream_ops.read(M,V,oe,ge,qe);return ht||(M.position+=St),St},write:function(M,V,oe,ge,qe,ht){if(ge<0||qe<0)throw new Le.ErrnoError(28);if(Le.isClosed(M))throw new Le.ErrnoError(8);if((M.flags&2097155)===0)throw new Le.ErrnoError(8);if(Le.isDir(M.node.mode))throw new Le.ErrnoError(31);if(!M.stream_ops.write)throw new Le.ErrnoError(28);M.seekable&&M.flags&1024&&Le.llseek(M,0,2);var St=typeof qe<"u";if(!St)qe=M.position;else if(!M.seekable)throw new Le.ErrnoError(70);var Et=M.stream_ops.write(M,V,oe,ge,qe,ht);St||(M.position+=Et);try{M.path&&Le.trackingDelegate.onWriteToFile&&Le.trackingDelegate.onWriteToFile(M.path)}catch(ai){U("FS.trackingDelegate['onWriteToFile']('"+M.path+"') threw an exception: "+ai.message)}return Et},allocate:function(M,V,oe){if(Le.isClosed(M))throw new Le.ErrnoError(8);if(V<0||oe<=0)throw new Le.ErrnoError(28);if((M.flags&2097155)===0)throw new Le.ErrnoError(8);if(!Le.isFile(M.node.mode)&&!Le.isDir(M.node.mode))throw new Le.ErrnoError(43);if(!M.stream_ops.allocate)throw new Le.ErrnoError(138);M.stream_ops.allocate(M,V,oe)},mmap:function(M,V,oe,ge,qe,ht){if((qe&2)!==0&&(ht&2)===0&&(M.flags&2097155)!==2)throw new Le.ErrnoError(2);if((M.flags&2097155)===1)throw new Le.ErrnoError(2);if(!M.stream_ops.mmap)throw new Le.ErrnoError(43);return M.stream_ops.mmap(M,V,oe,ge,qe,ht)},msync:function(M,V,oe,ge,qe){return!M||!M.stream_ops.msync?0:M.stream_ops.msync(M,V,oe,ge,qe)},munmap:function(M){return 0},ioctl:function(M,V,oe){if(!M.stream_ops.ioctl)throw new Le.ErrnoError(59);return M.stream_ops.ioctl(M,V,oe)},readFile:function(M,V){if(V=V||{},V.flags=V.flags||"r",V.encoding=V.encoding||"binary",V.encoding!=="utf8"&&V.encoding!=="binary")throw new Error('Invalid encoding type "'+V.encoding+'"');var oe,ge=Le.open(M,V.flags),qe=Le.stat(M),ht=qe.size,St=new Uint8Array(ht);return Le.read(ge,St,0,ht,0),V.encoding==="utf8"?oe=Me(St,0):V.encoding==="binary"&&(oe=St),Le.close(ge),oe},writeFile:function(M,V,oe){oe=oe||{},oe.flags=oe.flags||"w";var ge=Le.open(M,oe.flags,oe.mode);if(typeof V=="string"){var qe=new Uint8Array(pt(V)+1),ht=Xe(V,qe,0,qe.length);Le.write(ge,qe,0,ht,void 0,oe.canOwn)}else if(ArrayBuffer.isView(V))Le.write(ge,V,0,V.byteLength,void 0,oe.canOwn);else throw new Error("Unsupported data type");Le.close(ge)},cwd:function(){return Le.currentPath},chdir:function(M){var V=Le.lookupPath(M,{follow:!0});if(V.node===null)throw new Le.ErrnoError(44);if(!Le.isDir(V.node.mode))throw new Le.ErrnoError(54);var oe=Le.nodePermissions(V.node,"x");if(oe)throw new Le.ErrnoError(oe);Le.currentPath=V.path},createDefaultDirectories:function(){Le.mkdir("/tmp"),Le.mkdir("/home"),Le.mkdir("/home/web_user")},createDefaultDevices:function(){Le.mkdir("/dev"),Le.registerDevice(Le.makedev(1,3),{read:function(){return 0},write:function(oe,ge,qe,ht,St){return ht}}),Le.mkdev("/dev/null",Le.makedev(1,3)),Un.register(Le.makedev(5,0),Un.default_tty_ops),Un.register(Le.makedev(6,0),Un.default_tty1_ops),Le.mkdev("/dev/tty",Le.makedev(5,0)),Le.mkdev("/dev/tty1",Le.makedev(6,0));var M;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var V=new Uint8Array(1);M=function(){return crypto.getRandomValues(V),V[0]}}M||(M=function(){mt("random_device")}),Le.createDevice("/dev","random",M),Le.createDevice("/dev","urandom",M),Le.mkdir("/dev/shm"),Le.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Le.mkdir("/proc"),Le.mkdir("/proc/self"),Le.mkdir("/proc/self/fd"),Le.mount({mount:function(){var M=Le.createNode("/proc/self","fd",16895,73);return M.node_ops={lookup:function(V,oe){var ge=+oe,qe=Le.getStream(ge);if(!qe)throw new Le.ErrnoError(8);var ht={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return qe.path}}};return ht.parent=ht,ht}},M}},{},"/proc/self/fd")},createStandardStreams:function(){n.stdin?Le.createDevice("/dev","stdin",n.stdin):Le.symlink("/dev/tty","/dev/stdin"),n.stdout?Le.createDevice("/dev","stdout",null,n.stdout):Le.symlink("/dev/tty","/dev/stdout"),n.stderr?Le.createDevice("/dev","stderr",null,n.stderr):Le.symlink("/dev/tty1","/dev/stderr"),Le.open("/dev/stdin","r"),Le.open("/dev/stdout","w"),Le.open("/dev/stderr","w")},ensureErrnoError:function(){Le.ErrnoError||(Le.ErrnoError=function(V,oe){this.node=oe,this.setErrno=function(ge){this.errno=ge},this.setErrno(V),this.message="FS error"},Le.ErrnoError.prototype=new Error,Le.ErrnoError.prototype.constructor=Le.ErrnoError,[44].forEach(function(M){Le.genericErrors[M]=new Le.ErrnoError(M),Le.genericErrors[M].stack="<generic error, no stack>"}))},staticInit:function(){Le.ensureErrnoError(),Le.nameTable=new Array(4096),Le.mount(Bi,{},"/"),Le.createDefaultDirectories(),Le.createDefaultDevices(),Le.createSpecialDirectories(),Le.filesystems={MEMFS:Bi}},init:function(M,V,oe){Le.init.initialized=!0,Le.ensureErrnoError(),n.stdin=M||n.stdin,n.stdout=V||n.stdout,n.stderr=oe||n.stderr,Le.createStandardStreams()},quit:function(){Le.init.initialized=!1;var M=n._fflush;M&&M(0);for(var V=0;V<Le.streams.length;V++){var oe=Le.streams[V];!oe||Le.close(oe)}},getMode:function(M,V){var oe=0;return M&&(oe|=365),V&&(oe|=146),oe},joinPath:function(M,V){var oe=Tr.join.apply(null,M);return V&&oe[0]=="/"&&(oe=oe.substr(1)),oe},absolutePath:function(M,V){return Qr.resolve(V,M)},standardizePath:function(M){return Tr.normalize(M)},findObject:function(M,V){var oe=Le.analyzePath(M,V);return oe.exists?oe.object:(Tn(oe.error),null)},analyzePath:function(M,V){try{var oe=Le.lookupPath(M,{follow:!V});M=oe.path}catch{}var ge={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var oe=Le.lookupPath(M,{parent:!0});ge.parentExists=!0,ge.parentPath=oe.path,ge.parentObject=oe.node,ge.name=Tr.basename(M),oe=Le.lookupPath(M,{follow:!V}),ge.exists=!0,ge.path=oe.path,ge.object=oe.node,ge.name=oe.node.name,ge.isRoot=oe.path==="/"}catch(qe){ge.error=qe.errno}return ge},createFolder:function(M,V,oe,ge){var qe=Tr.join2(typeof M=="string"?M:Le.getPath(M),V),ht=Le.getMode(oe,ge);return Le.mkdir(qe,ht)},createPath:function(M,V,oe,ge){M=typeof M=="string"?M:Le.getPath(M);for(var qe=V.split("/").reverse();qe.length;){var ht=qe.pop();if(!!ht){var St=Tr.join2(M,ht);try{Le.mkdir(St)}catch{}M=St}}return St},createFile:function(M,V,oe,ge,qe){var ht=Tr.join2(typeof M=="string"?M:Le.getPath(M),V),St=Le.getMode(ge,qe);return Le.create(ht,St)},createDataFile:function(M,V,oe,ge,qe,ht){var St=V?Tr.join2(typeof M=="string"?M:Le.getPath(M),V):M,Et=Le.getMode(ge,qe),ai=Le.create(St,Et);if(oe){if(typeof oe=="string"){for(var ii=new Array(oe.length),ni=0,Vt=oe.length;ni<Vt;++ni)ii[ni]=oe.charCodeAt(ni);oe=ii}Le.chmod(ai,Et|146);var Ii=Le.open(ai,"w");Le.write(Ii,oe,0,oe.length,0,ht),Le.close(Ii),Le.chmod(ai,Et)}return ai},createDevice:function(M,V,oe,ge){var qe=Tr.join2(typeof M=="string"?M:Le.getPath(M),V),ht=Le.getMode(!!oe,!!ge);Le.createDevice.major||(Le.createDevice.major=64);var St=Le.makedev(Le.createDevice.major++,0);return Le.registerDevice(St,{open:function(Et){Et.seekable=!1},close:function(Et){ge&&ge.buffer&&ge.buffer.length&&ge(10)},read:function(Et,ai,ii,ni,Vt){for(var Ii=0,Gi=0;Gi<ni;Gi++){var fr;try{fr=oe()}catch{throw new Le.ErrnoError(29)}if(fr===void 0&&Ii===0)throw new Le.ErrnoError(6);if(fr==null)break;Ii++,ai[ii+Gi]=fr}return Ii&&(Et.node.timestamp=Date.now()),Ii},write:function(Et,ai,ii,ni,Vt){for(var Ii=0;Ii<ni;Ii++)try{ge(ai[ii+Ii])}catch{throw new Le.ErrnoError(29)}return ni&&(Et.node.timestamp=Date.now()),Ii}}),Le.mkdev(qe,ht,St)},createLink:function(M,V,oe,ge,qe){var ht=Tr.join2(typeof M=="string"?M:Le.getPath(M),V);return Le.symlink(oe,ht)},forceLoadFile:function(M){if(M.isDevice||M.isFolder||M.link||M.contents)return!0;var V=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(h)try{M.contents=mo(h(M.url),!0),M.usedBytes=M.contents.length}catch{V=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return V||Tn(29),V},createLazyFile:function(M,V,oe,ge,qe){function ht(){this.lengthKnown=!1,this.chunks=[]}if(ht.prototype.get=function(Ii){if(!(Ii>this.length-1||Ii<0)){var Gi=Ii%this.chunkSize,fr=Ii/this.chunkSize|0;return this.getter(fr)[Gi]}},ht.prototype.setDataGetter=function(Ii){this.getter=Ii},ht.prototype.cacheLength=function(){var Ii=new XMLHttpRequest;if(Ii.open("HEAD",oe,!1),Ii.send(null),!(Ii.status>=200&&Ii.status<300||Ii.status===304))throw new Error("Couldn't load "+oe+". Status: "+Ii.status);var Gi=Number(Ii.getResponseHeader("Content-length")),fr,Je=(fr=Ii.getResponseHeader("Accept-Ranges"))&&fr==="bytes",c=(fr=Ii.getResponseHeader("Content-Encoding"))&&fr==="gzip",_i=1024*1024;Je||(_i=Gi);var s=function(tr,zr){if(tr>zr)throw new Error("invalid range ("+tr+", "+zr+") or no bytes requested!");if(zr>Gi-1)throw new Error("only "+Gi+" bytes available! programmer error!");var Gn=new XMLHttpRequest;if(Gn.open("GET",oe,!1),Gi!==_i&&Gn.setRequestHeader("Range","bytes="+tr+"-"+zr),typeof Uint8Array<"u"&&(Gn.responseType="arraybuffer"),Gn.overrideMimeType&&Gn.overrideMimeType("text/plain; charset=x-user-defined"),Gn.send(null),!(Gn.status>=200&&Gn.status<300||Gn.status===304))throw new Error("Couldn't load "+oe+". Status: "+Gn.status);return Gn.response!==void 0?new Uint8Array(Gn.response||[]):mo(Gn.responseText||"",!0)},A=this;A.setDataGetter(function(tr){var zr=tr*_i,Gn=(tr+1)*_i-1;if(Gn=Math.min(Gn,Gi-1),typeof A.chunks[tr]>"u"&&(A.chunks[tr]=s(zr,Gn)),typeof A.chunks[tr]>"u")throw new Error("doXHR failed!");return A.chunks[tr]}),(c||!Gi)&&(_i=Gi=1,Gi=this.getter(0).length,_i=Gi,z("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Gi,this._chunkSize=_i,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var St,Et}else var Et={isDevice:!1,url:oe};var ai=Le.createFile(M,V,Et,ge,qe);Et.contents?ai.contents=Et.contents:Et.url&&(ai.contents=null,ai.url=Et.url),Object.defineProperties(ai,{usedBytes:{get:function(){return this.contents.length}}});var ii={},ni=Object.keys(ai.stream_ops);return ni.forEach(function(Vt){var Ii=ai.stream_ops[Vt];ii[Vt]=function(){if(!Le.forceLoadFile(ai))throw new Le.ErrnoError(29);return Ii.apply(null,arguments)}}),ii.read=function(Ii,Gi,fr,Je,c){if(!Le.forceLoadFile(ai))throw new Le.ErrnoError(29);var _i=Ii.node.contents;if(c>=_i.length)return 0;var s=Math.min(_i.length-c,Je);if(_i.slice)for(var A=0;A<s;A++)Gi[fr+A]=_i[c+A];else for(var A=0;A<s;A++)Gi[fr+A]=_i.get(c+A);return s},ai.stream_ops=ii,ai},createPreloadedFile:function(M,V,oe,ge,qe,ht,St,Et,ai,ii){de.init();var ni=V?Qr.resolve(Tr.join2(M,V)):M;function Vt(Ii){function Gi(Je){ii&&ii(),Et||Le.createDataFile(M,V,Je,ge,qe,ai),ht&&ht(),ot()}var fr=!1;n.preloadPlugins.forEach(function(Je){fr||Je.canHandle(ni)&&(Je.handle(Ii,ni,Gi,function(){St&&St(),ot()}),fr=!0)}),fr||Gi(Ii)}je(),typeof oe=="string"?de.asyncLoad(oe,function(Ii){Vt(Ii)},St):Vt(oe)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(M,V,oe){V=V||function(){},oe=oe||function(){};var ge=Le.indexedDB();try{var qe=ge.open(Le.DB_NAME(),Le.DB_VERSION)}catch(ht){return oe(ht)}qe.onupgradeneeded=function(){z("creating db");var St=qe.result;St.createObjectStore(Le.DB_STORE_NAME)},qe.onsuccess=function(){var St=qe.result,Et=St.transaction([Le.DB_STORE_NAME],"readwrite"),ai=Et.objectStore(Le.DB_STORE_NAME),ii=0,ni=0,Vt=M.length;function Ii(){ni==0?V():oe()}M.forEach(function(Gi){var fr=ai.put(Le.analyzePath(Gi).object.contents,Gi);fr.onsuccess=function(){ii++,ii+ni==Vt&&Ii()},fr.onerror=function(){ni++,ii+ni==Vt&&Ii()}}),Et.onerror=oe},qe.onerror=oe},loadFilesFromDB:function(M,V,oe){V=V||function(){},oe=oe||function(){};var ge=Le.indexedDB();try{var qe=ge.open(Le.DB_NAME(),Le.DB_VERSION)}catch(ht){return oe(ht)}qe.onupgradeneeded=oe,qe.onsuccess=function(){var St=qe.result;try{var Et=St.transaction([Le.DB_STORE_NAME],"readonly")}catch(Gi){oe(Gi);return}var ai=Et.objectStore(Le.DB_STORE_NAME),ii=0,ni=0,Vt=M.length;function Ii(){ni==0?V():oe()}M.forEach(function(Gi){var fr=ai.get(Gi);fr.onsuccess=function(){Le.analyzePath(Gi).exists&&Le.unlink(Gi),Le.createDataFile(Tr.dirname(Gi),Tr.basename(Gi),fr.result,!0,!0,!0),ii++,ii+ni==Vt&&Ii()},fr.onerror=function(){ni++,ii+ni==Vt&&Ii()}}),Et.onerror=oe},qe.onerror=oe},mmapAlloc:function(M){for(var V=B(M,16384),oe=ds(V);M<V;)qt[oe+M++]=0;return oe}};function $n(M,V){if(de.mainLoop.timingMode=M,de.mainLoop.timingValue=V,!de.mainLoop.func)return 1;if(M==0)de.mainLoop.scheduler=function(){var St=Math.max(0,de.mainLoop.tickStartTime+V-eo())|0;setTimeout(de.mainLoop.runner,St)},de.mainLoop.method="timeout";else if(M==1)de.mainLoop.scheduler=function(){de.requestAnimationFrame(de.mainLoop.runner)},de.mainLoop.method="rAF";else if(M==2){if(typeof setImmediate>"u"){var oe=[],ge="setimmediate",qe=function(ht){(ht.data===ge||ht.data.target===ge)&&(ht.stopPropagation(),oe.shift()())};addEventListener("message",qe,!0),setImmediate=function(St){oe.push(St),postMessage(ge,"*")}}de.mainLoop.scheduler=function(){setImmediate(de.mainLoop.runner)},de.mainLoop.method="immediate"}return 0}var eo;typeof performance<"u"&&performance.now?eo=function(){return performance.now()}:eo=Date.now;function Xn(M,V,oe,ge,qe){ye(!de.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),de.mainLoop.func=M,de.mainLoop.arg=ge;var ht;typeof ge<"u"?ht=function(){n.dynCall_vi(M,ge)}:ht=function(){n.dynCall_v(M)};var St=de.mainLoop.currentlyRunningMainloop;if(de.mainLoop.runner=function(){if(!pe){if(de.mainLoop.queue.length>0){var ai=Date.now(),ii=de.mainLoop.queue.shift();if(ii.func(ii.arg),de.mainLoop.remainingBlockers){var ni=de.mainLoop.remainingBlockers,Vt=ni%1==0?ni-1:Math.floor(ni);ii.counted?de.mainLoop.remainingBlockers=Vt:(Vt=Vt+.5,de.mainLoop.remainingBlockers=(8*ni+Vt)/9)}if(console.log('main loop blocker "'+ii.name+'" took '+(Date.now()-ai)+" ms"),de.mainLoop.updateStatus(),St<de.mainLoop.currentlyRunningMainloop)return;setTimeout(de.mainLoop.runner,0);return}if(!(St<de.mainLoop.currentlyRunningMainloop)){if(de.mainLoop.currentFrameNumber=de.mainLoop.currentFrameNumber+1|0,de.mainLoop.timingMode==1&&de.mainLoop.timingValue>1&&de.mainLoop.currentFrameNumber%de.mainLoop.timingValue!=0){de.mainLoop.scheduler();return}else de.mainLoop.timingMode==0&&(de.mainLoop.tickStartTime=eo());de.mainLoop.runIter(ht),!(St<de.mainLoop.currentlyRunningMainloop)&&(typeof De=="object"&&De.audio&&De.audio.queueNewAudioData&&De.audio.queueNewAudioData(),de.mainLoop.scheduler())}}},qe||(V&&V>0?$n(0,1e3/V):$n(1,1),de.mainLoop.scheduler()),oe)throw"unwind"}var de={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){de.mainLoop.scheduler=null,de.mainLoop.currentlyRunningMainloop++},resume:function(){de.mainLoop.currentlyRunningMainloop++;var M=de.mainLoop.timingMode,V=de.mainLoop.timingValue,oe=de.mainLoop.func;de.mainLoop.func=null,Xn(oe,0,!1,de.mainLoop.arg,!0),$n(M,V),de.mainLoop.scheduler()},updateStatus:function(){if(n.setStatus){var M=n.statusMessage||"Please wait...",V=de.mainLoop.remainingBlockers,oe=de.mainLoop.expectedBlockers;V?V<oe?n.setStatus(M+" ("+(oe-V)+"/"+oe+")"):n.setStatus(M):n.setStatus("")}},runIter:function(M){if(!pe){if(n.preMainLoop){var V=n.preMainLoop();if(V===!1)return}try{M()}catch(oe){if(oe instanceof Yn)return;if(oe=="unwind")return;throw oe&&typeof oe=="object"&&oe.stack&&U("exception thrown: "+[oe,oe.stack]),oe}n.postMainLoop&&n.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(n.preloadPlugins||(n.preloadPlugins=[]),de.initted)return;de.initted=!0;try{new Blob,de.hasBlobConstructor=!0}catch{de.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}de.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:de.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),de.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!n.noImageDecoding&&typeof de.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),n.noImageDecoding=!0);var M={};M.canHandle=function(ht){return!n.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(ht)},M.handle=function(ht,St,Et,ai){var ii=null;if(de.hasBlobConstructor)try{ii=new Blob([ht],{type:de.getMimetype(St)}),ii.size!==ht.length&&(ii=new Blob([new Uint8Array(ht).buffer],{type:de.getMimetype(St)}))}catch(Gi){K("Blob constructor present but fails: "+Gi+"; falling back to blob builder")}if(!ii){var ni=new de.BlobBuilder;ni.append(new Uint8Array(ht).buffer),ii=ni.getBlob()}var Vt=de.URLObject.createObjectURL(ii),Ii=new Image;Ii.onload=function(){ye(Ii.complete,"Image "+St+" could not be decoded");var fr=document.createElement("canvas");fr.width=Ii.width,fr.height=Ii.height;var Je=fr.getContext("2d");Je.drawImage(Ii,0,0),n.preloadedImages[St]=fr,de.URLObject.revokeObjectURL(Vt),Et&&Et(ht)},Ii.onerror=function(fr){console.log("Image "+Vt+" could not be decoded"),ai&&ai()},Ii.src=Vt},n.preloadPlugins.push(M);var V={};V.canHandle=function(ht){return!n.noAudioDecoding&&ht.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},V.handle=function(ht,St,Et,ai){var ii=!1;function ni(Je){ii||(ii=!0,n.preloadedAudios[St]=Je,Et&&Et(ht))}function Vt(){ii||(ii=!0,n.preloadedAudios[St]=new Audio,ai&&ai())}if(de.hasBlobConstructor){try{var Ii=new Blob([ht],{type:de.getMimetype(St)})}catch{return Vt()}var Gi=de.URLObject.createObjectURL(Ii),fr=new Audio;fr.addEventListener("canplaythrough",function(){ni(fr)},!1),fr.onerror=function(c){if(ii)return;console.log("warning: browser could not fully decode audio "+St+", trying slower base64 approach");function _i(s){for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tr="=",zr="",Gn=0,W=0,fn=0;fn<s.length;fn++)for(Gn=Gn<<8|s[fn],W+=8;W>=6;){var Os=Gn>>W-6&63;W-=6,zr+=A[Os]}return W==2?(zr+=A[(Gn&3)<<4],zr+=tr+tr):W==4&&(zr+=A[(Gn&15)<<2],zr+=tr),zr}fr.src="data:audio/x-"+St.substr(-3)+";base64,"+_i(ht),ni(fr)},fr.src=Gi,de.safeSetTimeout(function(){ni(fr)},1e4)}else return Vt()},n.preloadPlugins.push(V);function oe(){de.pointerLock=document.pointerLockElement===n.canvas||document.mozPointerLockElement===n.canvas||document.webkitPointerLockElement===n.canvas||document.msPointerLockElement===n.canvas}var ge=n.canvas;ge&&(ge.requestPointerLock=ge.requestPointerLock||ge.mozRequestPointerLock||ge.webkitRequestPointerLock||ge.msRequestPointerLock||function(){},ge.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},ge.exitPointerLock=ge.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",oe,!1),document.addEventListener("mozpointerlockchange",oe,!1),document.addEventListener("webkitpointerlockchange",oe,!1),document.addEventListener("mspointerlockchange",oe,!1),n.elementPointerLock&&ge.addEventListener("click",function(qe){!de.pointerLock&&n.canvas.requestPointerLock&&(n.canvas.requestPointerLock(),qe.preventDefault())},!1))},createContext:function(M,V,oe,ge){if(V&&n.ctx&&M==n.canvas)return n.ctx;var qe,ht;if(V){var St={antialias:!1,alpha:!1,majorVersion:1};if(ge)for(var Et in ge)St[Et]=ge[Et];typeof ji<"u"&&(ht=ji.createContext(M,St),ht&&(qe=ji.getContext(ht).GLctx))}else qe=M.getContext("2d");return qe?(oe&&(V||ye(typeof pn>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),n.ctx=qe,V&&ji.makeContextCurrent(ht),n.useWebGL=V,de.moduleContextCreatedCallbacks.forEach(function(ai){ai()}),de.init()),qe):null},destroyContext:function(M,V,oe){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(M,V){de.lockPointer=M,de.resizeCanvas=V,typeof de.lockPointer>"u"&&(de.lockPointer=!0),typeof de.resizeCanvas>"u"&&(de.resizeCanvas=!1);var oe=n.canvas;function ge(){de.isFullscreen=!1;var ht=oe.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===ht?(oe.exitFullscreen=de.exitFullscreen,de.lockPointer&&oe.requestPointerLock(),de.isFullscreen=!0,de.resizeCanvas?de.setFullscreenCanvasSize():de.updateCanvasDimensions(oe)):(ht.parentNode.insertBefore(oe,ht),ht.parentNode.removeChild(ht),de.resizeCanvas?de.setWindowedCanvasSize():de.updateCanvasDimensions(oe)),n.onFullScreen&&n.onFullScreen(de.isFullscreen),n.onFullscreen&&n.onFullscreen(de.isFullscreen)}de.fullscreenHandlersInstalled||(de.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",ge,!1),document.addEventListener("mozfullscreenchange",ge,!1),document.addEventListener("webkitfullscreenchange",ge,!1),document.addEventListener("MSFullscreenChange",ge,!1));var qe=document.createElement("div");oe.parentNode.insertBefore(qe,oe),qe.appendChild(oe),qe.requestFullscreen=qe.requestFullscreen||qe.mozRequestFullScreen||qe.msRequestFullscreen||(qe.webkitRequestFullscreen?function(){qe.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(qe.webkitRequestFullScreen?function(){qe.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),qe.requestFullscreen()},exitFullscreen:function(){if(!de.isFullscreen)return!1;var M=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return M.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(M){var V=Date.now();if(de.nextRAF===0)de.nextRAF=V+1e3/60;else for(;V+2>=de.nextRAF;)de.nextRAF+=1e3/60;var oe=Math.max(de.nextRAF-V,0);setTimeout(M,oe)},requestAnimationFrame:function(M){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(M);return}var V=de.fakeRequestAnimationFrame;typeof window<"u"&&(V=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||V),V(M)},safeCallback:function(M){return function(){if(!pe)return M.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){de.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(de.allowAsyncCallbacks=!0,de.queuedAsyncCallbacks.length>0){var M=de.queuedAsyncCallbacks;de.queuedAsyncCallbacks=[],M.forEach(function(V){V()})}},safeRequestAnimationFrame:function(M){return de.requestAnimationFrame(function(){pe||(de.allowAsyncCallbacks?M():de.queuedAsyncCallbacks.push(M))})},safeSetTimeout:function(M,V){return setTimeout(function(){pe||(de.allowAsyncCallbacks?M():de.queuedAsyncCallbacks.push(M))},V)},safeSetInterval:function(M,V){return setInterval(function(){pe||de.allowAsyncCallbacks&&M()},V)},getMimetype:function(M){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[M.substr(M.lastIndexOf(".")+1)]},getUserMedia:function(M){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(M)},getMovementX:function(M){return M.movementX||M.mozMovementX||M.webkitMovementX||0},getMovementY:function(M){return M.movementY||M.mozMovementY||M.webkitMovementY||0},getMouseWheelDelta:function(M){var V=0;switch(M.type){case"DOMMouseScroll":V=M.detail/3;break;case"mousewheel":V=M.wheelDelta/120;break;case"wheel":switch(V=M.deltaY,M.deltaMode){case 0:V/=100;break;case 1:V/=3;break;case 2:V*=80;break;default:throw"unrecognized mouse wheel delta mode: "+M.deltaMode}break;default:throw"unrecognized mouse wheel event: "+M.type}return V},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(M){if(de.pointerLock)M.type!="mousemove"&&"mozMovementX"in M?de.mouseMovementX=de.mouseMovementY=0:(de.mouseMovementX=de.getMovementX(M),de.mouseMovementY=de.getMovementY(M)),typeof De<"u"?(de.mouseX=De.mouseX+de.mouseMovementX,de.mouseY=De.mouseY+de.mouseMovementY):(de.mouseX+=de.mouseMovementX,de.mouseY+=de.mouseMovementY);else{var V=n.canvas.getBoundingClientRect(),oe=n.canvas.width,ge=n.canvas.height,qe=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,ht=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(M.type==="touchstart"||M.type==="touchend"||M.type==="touchmove"){var St=M.touch;if(St===void 0)return;var Et=St.pageX-(qe+V.left),ai=St.pageY-(ht+V.top);Et=Et*(oe/V.width),ai=ai*(ge/V.height);var ii={x:Et,y:ai};if(M.type==="touchstart")de.lastTouches[St.identifier]=ii,de.touches[St.identifier]=ii;else if(M.type==="touchend"||M.type==="touchmove"){var ni=de.touches[St.identifier];ni||(ni=ii),de.lastTouches[St.identifier]=ni,de.touches[St.identifier]=ii}return}var Vt=M.pageX-(qe+V.left),Ii=M.pageY-(ht+V.top);Vt=Vt*(oe/V.width),Ii=Ii*(ge/V.height),de.mouseMovementX=Vt-de.mouseX,de.mouseMovementY=Ii-de.mouseY,de.mouseX=Vt,de.mouseY=Ii}},asyncLoad:function(M,V,oe,ge){var qe=ge?"":"al "+M;E(M,function(ht){ye(ht,'Loading data file "'+M+'" failed (no arrayBuffer).'),V(new Uint8Array(ht)),qe&&ot()},function(ht){if(oe)oe();else throw'Loading data file "'+M+'" failed.'}),qe&&je()},resizeListeners:[],updateResizeListeners:function(){var M=n.canvas;de.resizeListeners.forEach(function(V){V(M.width,M.height)})},setCanvasSize:function(M,V,oe){var ge=n.canvas;de.updateCanvasDimensions(ge,M,V),oe||de.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof De<"u"){var M=bt[De.screen>>2];M=M|8388608,Re[De.screen>>2]=M}de.updateCanvasDimensions(n.canvas),de.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof De<"u"){var M=bt[De.screen>>2];M=M&-8388609,Re[De.screen>>2]=M}de.updateCanvasDimensions(n.canvas),de.updateResizeListeners()},updateCanvasDimensions:function(M,V,oe){V&&oe?(M.widthNative=V,M.heightNative=oe):(V=M.widthNative,oe=M.heightNative);var ge=V,qe=oe;if(n.forcedAspectRatio&&n.forcedAspectRatio>0&&(ge/qe<n.forcedAspectRatio?ge=Math.round(qe*n.forcedAspectRatio):qe=Math.round(ge/n.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===M.parentNode&&typeof screen<"u"){var ht=Math.min(screen.width/ge,screen.height/qe);ge=Math.round(ge*ht),qe=Math.round(qe*ht)}de.resizeCanvas?(M.width!=ge&&(M.width=ge),M.height!=qe&&(M.height=qe),typeof M.style<"u"&&(M.style.removeProperty("width"),M.style.removeProperty("height"))):(M.width!=V&&(M.width=V),M.height!=oe&&(M.height=oe),typeof M.style<"u"&&(ge!=V||qe!=oe?(M.style.setProperty("width",ge+"px","important"),M.style.setProperty("height",qe+"px","important")):(M.style.removeProperty("width"),M.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var M=de.nextWgetRequestHandle;return de.nextWgetRequestHandle++,M}};function fe(){return Date.now()-De.startTime|0}function Te(M){var V=De.surfaces[M];if(V.locked++,V.locked>1||(V.buffer||(V.buffer=ds(V.width*V.height*4),Re[M+20>>2]=V.buffer),Re[M+20>>2]=V.buffer,M==De.screen&&n.screenIsReadOnly&&V.image))return 0;if(V.image=V.ctx.getImageData(0,0,V.width,V.height),M==De.screen&&De.defaults.opaqueFrontBuffer)for(var oe=V.image.data,ge=oe.length,qe=0;qe<ge/4;qe++)oe[qe*4+3]=255;{if(V.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;ve.set(V.image.data,V.buffer)}return 0}function Ke(){return De.unicode}function et(){return De.ttfContext}function wt(){return De.audio}var De={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(M){return{x:Re[M+0>>2],y:Re[M+4>>2],w:Re[M+8>>2],h:Re[M+12>>2]}},updateRect:function(M,V){Re[M>>2]=V.x,Re[M+4>>2]=V.y,Re[M+8>>2]=V.w,Re[M+12>>2]=V.h},intersectionOfRects:function(M,V){var oe=Math.max(M.x,V.x),ge=Math.max(M.y,V.y),qe=Math.min(M.x+M.w,V.x+V.w),ht=Math.min(M.y+M.h,V.y+V.h);return{x:oe,y:ge,w:Math.max(oe,qe)-oe,h:Math.max(ge,ht)-ge}},checkPixelFormat:function(M){},loadColorToCSSRGB:function(M){var V=Re[M>>2];return"rgb("+(V&255)+","+(V>>8&255)+","+(V>>16&255)+")"},loadColorToCSSRGBA:function(M){var V=Re[M>>2];return"rgba("+(V&255)+","+(V>>8&255)+","+(V>>16&255)+","+(V>>24&255)/255+")"},translateColorToCSSRGBA:function(M){return"rgba("+(M&255)+","+(M>>8&255)+","+(M>>16&255)+","+(M>>>24)/255+")"},translateRGBAToCSSRGBA:function(M,V,oe,ge){return"rgba("+(M&255)+","+(V&255)+","+(oe&255)+","+(ge&255)/255+")"},translateRGBAToColor:function(M,V,oe,ge){return M|V<<8|oe<<16|ge<<24},makeSurface:function(M,V,oe,ge,qe,ht,St,Et,ai){oe=oe||0;var ii=oe&1,ni=oe&2097152,Vt=oe&67108864,Ii=ds(60),Gi=ds(44),fr=ni?1:4,Je=0;!ii&&!Vt&&(Je=ds(M*V*4)),Re[Ii>>2]=oe,Re[Ii+4>>2]=Gi,Re[Ii+8>>2]=M,Re[Ii+12>>2]=V,Re[Ii+16>>2]=M*fr,Re[Ii+20>>2]=Je,Re[Ii+36>>2]=0,Re[Ii+40>>2]=0,Re[Ii+44>>2]=n.canvas.width,Re[Ii+48>>2]=n.canvas.height,Re[Ii+56>>2]=1,Re[Gi>>2]=-2042224636,Re[Gi+4>>2]=0,qt[Gi+8>>0]=fr*8,qt[Gi+9>>0]=fr,Re[Gi+12>>2]=ht||255,Re[Gi+16>>2]=St||65280,Re[Gi+20>>2]=Et||16711680,Re[Gi+24>>2]=ai||4278190080,De.GL=De.GL||Vt;var c;ge?c=n.canvas:(De.canvasPool.length>0?c=De.canvasPool.pop():c=document.createElement("canvas"),c.width=M,c.height=V);var _i={antialias:De.glAttributes[13]!=0,depth:De.glAttributes[6]>0,stencil:De.glAttributes[7]>0,alpha:De.glAttributes[3]>0},s=de.createContext(c,Vt,ge,_i);return De.surfaces[Ii]={width:M,height:V,canvas:c,ctx:s,surf:Ii,buffer:Je,pixelFormat:Gi,alpha:255,flags:oe,locked:0,usePageCanvas:ge,source:qe,isFlagSet:function(A){return oe&A}},Ii},copyIndexedColorData:function(M,V,oe,ge,qe){if(!!M.colors){var ht=n.canvas.width,St=n.canvas.height,Et=V||0,ai=oe||0,ii=(ge||ht-Et)+Et,ni=(qe||St-ai)+ai,Vt=M.buffer;M.image.data32||(M.image.data32=new Uint32Array(M.image.data.buffer));for(var Ii=M.image.data32,Gi=M.colors32,fr=ai;fr<ni;++fr)for(var Je=fr*ht,c=Et;c<ii;++c)Ii[Je+c]=Gi[ve[Vt+Je+c>>0]]}},freeSurface:function(M){var V=M+56,oe=Re[V>>2];if(oe>1){Re[V>>2]=oe-1;return}var ge=De.surfaces[M];!ge.usePageCanvas&&ge.canvas&&De.canvasPool.push(ge.canvas),ge.buffer&&ea(ge.buffer),ea(ge.pixelFormat),ea(M),De.surfaces[M]=null,M===De.screen&&(De.screen=null)},blitSurface:function(M,V,oe,ge,qe){var ht=De.surfaces[M],St=De.surfaces[oe],Et,ai;if(V?Et=De.loadRect(V):Et={x:0,y:0,w:ht.width,h:ht.height},ge?ai=De.loadRect(ge):ai={x:0,y:0,w:ht.width,h:ht.height},St.clipRect){var ii=!qe||Et.w===0?1:Et.w/ai.w,ni=!qe||Et.h===0?1:Et.h/ai.h;ai=De.intersectionOfRects(St.clipRect,ai),Et.w=ai.w*ii,Et.h=ai.h*ni,ge&&De.updateRect(ge,ai)}var Vt,Ii;if(qe?(Vt=ai.w,Ii=ai.h):(Vt=Et.w,Ii=Et.h),Et.w===0||Et.h===0||Vt===0||Ii===0)return 0;var Gi=St.ctx.globalAlpha;return St.ctx.globalAlpha=ht.alpha/255,St.ctx.drawImage(ht.canvas,Et.x,Et.y,Et.w,Et.h,ai.x,ai.y,Vt,Ii),St.ctx.globalAlpha=Gi,oe!=De.screen&&(K("WARNING: copying canvas data to memory for compatibility"),Te(oe),St.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(M){function V(){for(var ni in De.keyboardMap)De.events.push({type:"keyup",keyCode:De.keyboardMap[ni]})}switch(M.type){case"touchstart":case"touchmove":{M.preventDefault();var oe=[];if(M.type==="touchstart")for(var ge=0;ge<M.touches.length;ge++){var qe=M.touches[ge];De.downFingers[qe.identifier]!=!0&&(De.downFingers[qe.identifier]=!0,oe.push(qe))}else oe=M.touches;var ht=oe[0];if(ht){M.type=="touchstart"&&(De.DOMButtons[0]=1);var St;switch(M.type){case"touchstart":St="mousedown";break;case"touchmove":St="mousemove";break}var Et={type:St,button:0,pageX:ht.clientX,pageY:ht.clientY};De.events.push(Et)}for(var ge=0;ge<oe.length;ge++){var qe=oe[ge];De.events.push({type:M.type,touch:qe})}break}case"touchend":{M.preventDefault();for(var ge=0;ge<M.changedTouches.length;ge++){var qe=M.changedTouches[ge];De.downFingers[qe.identifier]===!0&&delete De.downFingers[qe.identifier]}var Et={type:"mouseup",button:0,pageX:M.changedTouches[0].clientX,pageY:M.changedTouches[0].clientY};De.DOMButtons[0]=0,De.events.push(Et);for(var ge=0;ge<M.changedTouches.length;ge++){var qe=M.changedTouches[ge];De.events.push({type:"touchend",touch:qe})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var ai=-de.getMouseWheelDelta(M);ai=ai==0?0:ai>0?Math.max(ai,1):Math.min(ai,-1);var ii=ai>0?3:4;De.events.push({type:"mousedown",button:ii,pageX:M.pageX,pageY:M.pageY}),De.events.push({type:"mouseup",button:ii,pageX:M.pageX,pageY:M.pageY}),De.events.push({type:"wheel",deltaX:0,deltaY:ai}),M.preventDefault();break;case"mousemove":if(De.DOMButtons[0]===1&&De.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:M.pageX,pageY:M.pageY}}),de.pointerLock&&("mozMovementX"in M&&(M.movementX=M.mozMovementX,M.movementY=M.mozMovementY),M.movementX==0&&M.movementY==0)){M.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((M.type!=="keydown"||!Ke()&&!De.textInput||M.keyCode===8||M.keyCode===9)&&M.preventDefault(),M.type=="mousedown")De.DOMButtons[M.button]=1,De.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:M.pageX,pageY:M.pageY}});else if(M.type=="mouseup"){if(!De.DOMButtons[M.button])return;De.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:M.pageX,pageY:M.pageY}}),De.DOMButtons[M.button]=0}M.type==="keydown"||M.type==="mousedown"?De.canRequestFullscreen=!0:(M.type==="keyup"||M.type==="mouseup")&&(De.canRequestFullscreen=!1),M.type==="keypress"&&De.savedKeydown?(De.savedKeydown.keypressCharCode=M.charCode,De.savedKeydown=null):M.type==="keydown"&&(De.savedKeydown=M),(M.type!=="keypress"||De.textInput)&&De.events.push(M);break;case"mouseout":for(var ge=0;ge<3;ge++)De.DOMButtons[ge]&&(De.events.push({type:"mouseup",button:ge,pageX:M.pageX,pageY:M.pageY}),De.DOMButtons[ge]=0);M.preventDefault();break;case"focus":De.events.push(M),M.preventDefault();break;case"blur":De.events.push(M),V(),M.preventDefault();break;case"visibilitychange":De.events.push({type:"visibilitychange",visible:!document.hidden}),V(),M.preventDefault();break;case"unload":de.mainLoop.runner&&(De.events.push(M),de.mainLoop.runner());return;case"resize":De.events.push(M),M.preventDefault&&M.preventDefault();break}De.events.length>=1e4&&(U("SDL event queue full, dropping events"),De.events=De.events.slice(0,1e4))},lookupKeyCodeForEvent:function(M){var V=M.keyCode;return V>=65&&V<=90?V+=32:(V=De.keyCodes[M.keyCode]||M.keyCode,M.location===2&&V>=(224|1<<10)&&V<=(227|1<<10)&&(V+=4)),V},handleEvent:function(M){if(!M.handled)switch(M.handled=!0,M.type){case"touchstart":case"touchend":case"touchmove":{de.calculateMouseEvent(M);break}case"keydown":case"keyup":{var V=M.type==="keydown",oe=De.lookupKeyCodeForEvent(M);qt[De.keyboardState+oe>>0]=V,De.modState=(qt[De.keyboardState+1248>>0]?64:0)|(qt[De.keyboardState+1249>>0]?1:0)|(qt[De.keyboardState+1250>>0]?256:0)|(qt[De.keyboardState+1252>>0]?128:0)|(qt[De.keyboardState+1253>>0]?2:0)|(qt[De.keyboardState+1254>>0]?512:0),V?De.keyboardMap[oe]=M.keyCode:delete De.keyboardMap[oe];break}case"mousedown":case"mouseup":M.type=="mousedown"?De.buttonState|=1<<M.button:M.type=="mouseup"&&(De.buttonState&=~(1<<M.button));case"mousemove":{de.calculateMouseEvent(M);break}}},flushEventsToHandler:function(){},pollEvent:function(M){if(De.initFlags&512&&De.joystickEventState&&De.queryJoysticks(),M){for(;De.events.length>0;)if(De.makeCEvent(De.events.shift(),M)!==!1)return 1;return 0}else return De.events.length>0},makeCEvent:function(M,V){if(typeof M=="number"){ws(V,M,28),ea(M);return}switch(De.handleEvent(M),M.type){case"keydown":case"keyup":{var oe=M.type==="keydown",ge=De.lookupKeyCodeForEvent(M),qe;ge>=1024?qe=ge-1024:qe=De.scanCodes[ge]||ge,Re[V>>2]=De.DOMEventToSDLEvent[M.type],qt[V+8>>0]=oe?1:0,qt[V+9>>0]=0,Re[V+12>>2]=qe,Re[V+16>>2]=ge,it[V+20>>1]=De.modState,Re[V+24>>2]=M.keypressCharCode||ge;break}case"keypress":{Re[V>>2]=De.DOMEventToSDLEvent[M.type];for(var ht=mo(String.fromCharCode(M.charCode)),St=0;St<ht.length;++St)qt[V+(8+St)>>0]=ht[St];break}case"mousedown":case"mouseup":case"mousemove":{if(M.type!="mousemove"){var oe=M.type==="mousedown";Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=0,Re[V+8>>2]=0,Re[V+12>>2]=0,qt[V+16>>0]=M.button+1,qt[V+17>>0]=oe?1:0,Re[V+20>>2]=de.mouseX,Re[V+24>>2]=de.mouseY}else Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=0,Re[V+8>>2]=0,Re[V+12>>2]=0,Re[V+16>>2]=De.buttonState,Re[V+20>>2]=de.mouseX,Re[V+24>>2]=de.mouseY,Re[V+28>>2]=de.mouseMovementX,Re[V+32>>2]=de.mouseMovementY;break}case"wheel":{Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+16>>2]=M.deltaX,Re[V+20>>2]=M.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Et=M.touch;if(!de.touches[Et.identifier])break;var ai=n.canvas.width,ii=n.canvas.height,ni=de.touches[Et.identifier].x/ai,Vt=de.touches[Et.identifier].y/ii,Ii=de.lastTouches[Et.identifier].x/ai,Gi=de.lastTouches[Et.identifier].y/ii,fr=ni-Ii,Je=Vt-Gi;if(Et.deviceID===void 0&&(Et.deviceID=De.TOUCH_DEFAULT_ID),fr===0&&Je===0&&M.type==="touchmove")return!1;Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=fe(),Pn=[Et.deviceID>>>0,(Zr=Et.deviceID,+Qt(Zr)>=1?Zr>0?(Dr(+pi(Zr/4294967296),4294967295)|0)>>>0:~~+lr((Zr-+(~~Zr>>>0))/4294967296)>>>0:0)],Re[V+8>>2]=Pn[0],Re[V+12>>2]=Pn[1],Pn=[Et.identifier>>>0,(Zr=Et.identifier,+Qt(Zr)>=1?Zr>0?(Dr(+pi(Zr/4294967296),4294967295)|0)>>>0:~~+lr((Zr-+(~~Zr>>>0))/4294967296)>>>0:0)],Re[V+16>>2]=Pn[0],Re[V+20>>2]=Pn[1],Ct[V+24>>2]=ni,Ct[V+28>>2]=Vt,Ct[V+32>>2]=fr,Ct[V+36>>2]=Je,Et.force!==void 0?Ct[V+40>>2]=Et.force:Ct[V+40>>2]=M.type=="touchend"?0:1;break}case"unload":{Re[V>>2]=De.DOMEventToSDLEvent[M.type];break}case"resize":{Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=M.w,Re[V+8>>2]=M.h;break}case"joystick_button_up":case"joystick_button_down":{var c=M.type==="joystick_button_up"?0:1;Re[V>>2]=De.DOMEventToSDLEvent[M.type],qt[V+4>>0]=M.index,qt[V+5>>0]=M.button,qt[V+6>>0]=c;break}case"joystick_axis_motion":{Re[V>>2]=De.DOMEventToSDLEvent[M.type],qt[V+4>>0]=M.index,qt[V+5>>0]=M.axis,Re[V+8>>2]=De.joystickAxisValueConversion(M.value);break}case"focus":{var _i=12;Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=0,qt[V+8>>0]=_i;break}case"blur":{var s=13;Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=0,qt[V+8>>0]=s;break}case"visibilitychange":{var A=1,tr=2,zr=M.visible?A:tr;Re[V>>2]=De.DOMEventToSDLEvent[M.type],Re[V+4>>2]=0,qt[V+8>>0]=zr;break}default:throw"Unhandled SDL event: "+M.type}},makeFontString:function(M,V){return V.charAt(0)!="'"&&V.charAt(0)!='"'&&(V='"'+V+'"'),M+"px "+V+", serif"},estimateTextWidth:function(M,V){var oe=M.size,ge=De.makeFontString(oe,M.name),qe=et();qe.font=ge;var ht=qe.measureText(V).width|0;return ht},allocateChannels:function(M){if(!(De.numChannels&&De.numChannels>=M&&M!=0)){De.numChannels=M,De.channels=[];for(var V=0;V<M;V++)De.channels[V]={audio:null,volume:1}}},setGetVolume:function(M,V){if(!M)return 0;var oe=M.volume*128;if(V!=-1&&(M.volume=Math.min(Math.max(V,0),128)/128,M.audio))try{M.audio.volume=M.volume,M.audio.webAudioGainNode&&(M.audio.webAudioGainNode.gain.value=M.volume)}catch(ge){U("setGetVolume failed to set audio volume: "+ge)}return oe},setPannerPosition:function(M,V,oe,ge){!M||M.audio&&M.audio.webAudioPannerNode&&M.audio.webAudioPannerNode.setPosition(V,oe,ge)},playWebAudio:function(M){if(!!M&&!M.webAudioNode&&!!De.webAudioAvailable())try{var V=M.resource.webAudio;if(M.paused=!1,!V.decodedBuffer){V.onDecodeComplete===void 0&&mt("Cannot play back audio object that was not loaded"),V.onDecodeComplete.push(function(){M.paused||De.playWebAudio(M)});return}M.webAudioNode=De.audioContext.createBufferSource(),M.webAudioNode.buffer=V.decodedBuffer,M.webAudioNode.loop=M.loop,M.webAudioNode.onended=function(){M.onended()},M.webAudioPannerNode=De.audioContext.createPanner(),M.webAudioPannerNode.setPosition(0,0,-.5),M.webAudioPannerNode.panningModel="equalpower",M.webAudioGainNode=De.audioContext.createGain(),M.webAudioGainNode.gain.value=M.volume,M.webAudioNode.connect(M.webAudioPannerNode),M.webAudioPannerNode.connect(M.webAudioGainNode),M.webAudioGainNode.connect(De.audioContext.destination),M.webAudioNode.start(0,M.currentPosition),M.startTime=De.audioContext.currentTime-M.currentPosition}catch(oe){U("playWebAudio failed: "+oe)}},pauseWebAudio:function(M){if(!!M){if(M.webAudioNode)try{M.currentPosition=(De.audioContext.currentTime-M.startTime)%M.resource.webAudio.decodedBuffer.duration,M.webAudioNode.onended=void 0,M.webAudioNode.stop(0),M.webAudioNode=void 0}catch(V){U("pauseWebAudio failed: "+V)}M.paused=!0}},openAudioContext:function(){De.audioContext||(typeof AudioContext<"u"?De.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(De.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!De.audioContext},fillWebAudioBufferFromHeap:function(M,V,oe){for(var ge=wt(),qe=ge.channels,ht=0;ht<qe;++ht){var St=oe.getChannelData(ht);if(St.length!=V)throw"Web Audio output buffer length mismatch! Destination size: "+St.length+" samples vs expected "+V+" samples!";if(ge.format==32784)for(var Et=0;Et<V;++Et)St[Et]=it[M+(Et*qe+ht)*2>>1]/32768;else if(ge.format==8)for(var Et=0;Et<V;++Et){var ai=qt[M+(Et*qe+ht)>>0];St[Et]=(ai>=0?ai-128:ai+128)/128}else if(ge.format==33056)for(var Et=0;Et<V;++Et)St[Et]=Ct[M+(Et*qe+ht)*4>>2];else throw"Invalid SDL audio format "+ge.format+"!"}},debugSurface:function(M){console.log("dumping surface "+[M.surf,M.source,M.width,M.height]);for(var V=M.ctx.getImageData(0,0,M.width,M.height),oe=V.data,ge=Math.min(M.width,M.height),qe=0;qe<ge;qe++)console.log("   diagonal "+qe+":"+[oe[qe*M.width*4+qe*4+0],oe[qe*M.width*4+qe*4+1],oe[qe*M.width*4+qe*4+2],oe[qe*M.width*4+qe*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(M,V){for(var oe=new Array(V.buttons.length),ge=0;ge<V.buttons.length;ge++)oe[ge]=De.getJoystickButtonState(V.buttons[ge]);De.lastJoystickState[M]={buttons:oe,axes:V.axes.slice(0),timestamp:V.timestamp,index:V.index,id:V.id}},getJoystickButtonState:function(M){return typeof M=="object"?M.pressed:M>0},queryJoysticks:function(){for(var M in De.lastJoystickState){var V=De.getGamepad(M-1),oe=De.lastJoystickState[M];if(typeof V>"u"||V===null)return;if(typeof V.timestamp!="number"||V.timestamp!==oe.timestamp||!V.timestamp){var ge;for(ge=0;ge<V.buttons.length;ge++){var qe=De.getJoystickButtonState(V.buttons[ge]);qe!==oe.buttons[ge]&&De.events.push({type:qe?"joystick_button_down":"joystick_button_up",joystick:M,index:M-1,button:ge})}for(ge=0;ge<V.axes.length;ge++)V.axes[ge]!==oe.axes[ge]&&De.events.push({type:"joystick_axis_motion",joystick:M,index:M-1,axis:ge,value:V.axes[ge]});De.recordJoystickState(M,V)}}},joystickAxisValueConversion:function(M){return M=Math.min(1,Math.max(M,-1)),Math.ceil((M+1)*32767.5-32768)},getGamepads:function(){var M=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return M!==void 0?M.apply(navigator):[]},getGamepad:function(M){var V=De.getGamepads();return V.length>M&&M>=0?V[M]:null}};function Nt(M,V,oe,ge,qe,ht,St,Et){return De.makeSurface(V,oe,M,!1,"CreateRGBSurface",qe,ht,St,Et)}function Tt(M){}function jt(M){M&&De.freeSurface(M)}function ki(M){if(De.startTime=Date.now(),De.initFlags=M,!n.doNotCaptureKeyboard){var V=n.keyboardListeningElement||document;V.addEventListener("keydown",De.receiveEvent),V.addEventListener("keyup",De.receiveEvent),V.addEventListener("keypress",De.receiveEvent),window.addEventListener("focus",De.receiveEvent),window.addEventListener("blur",De.receiveEvent),document.addEventListener("visibilitychange",De.receiveEvent)}return window.addEventListener("unload",De.receiveEvent),De.keyboardState=ds(65536),Jo(De.keyboardState,0,65536),De.DOMEventToSDLEvent.keydown=768,De.DOMEventToSDLEvent.keyup=769,De.DOMEventToSDLEvent.keypress=771,De.DOMEventToSDLEvent.mousedown=1025,De.DOMEventToSDLEvent.mouseup=1026,De.DOMEventToSDLEvent.mousemove=1024,De.DOMEventToSDLEvent.wheel=1027,De.DOMEventToSDLEvent.touchstart=1792,De.DOMEventToSDLEvent.touchend=1793,De.DOMEventToSDLEvent.touchmove=1794,De.DOMEventToSDLEvent.unload=256,De.DOMEventToSDLEvent.resize=28673,De.DOMEventToSDLEvent.visibilitychange=512,De.DOMEventToSDLEvent.focus=512,De.DOMEventToSDLEvent.blur=512,De.DOMEventToSDLEvent.joystick_axis_motion=1536,De.DOMEventToSDLEvent.joystick_button_down=1539,De.DOMEventToSDLEvent.joystick_button_up=1540,0}function Ri(M){var V=M.getExtension("ANGLE_instanced_arrays");if(V)return M.vertexAttribDivisor=function(oe,ge){V.vertexAttribDivisorANGLE(oe,ge)},M.drawArraysInstanced=function(oe,ge,qe,ht){V.drawArraysInstancedANGLE(oe,ge,qe,ht)},M.drawElementsInstanced=function(oe,ge,qe,ht,St){V.drawElementsInstancedANGLE(oe,ge,qe,ht,St)},1}function wi(M){var V=M.getExtension("OES_vertex_array_object");if(V)return M.createVertexArray=function(){return V.createVertexArrayOES()},M.deleteVertexArray=function(oe){V.deleteVertexArrayOES(oe)},M.bindVertexArray=function(oe){V.bindVertexArrayOES(oe)},M.isVertexArray=function(oe){return V.isVertexArrayOES(oe)},1}function kr(M){var V=M.getExtension("WEBGL_draw_buffers");if(V)return M.drawBuffers=function(oe,ge){V.drawBuffersWEBGL(oe,ge)},1}function Sr(M){return!!(M.multiDrawWebgl=M.getExtension("WEBGL_multi_draw"))}var ji={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(V){ji.lastError||(ji.lastError=V)},getNewId:function(M){for(var V=ji.counter++,oe=M.length;oe<V;oe++)M[oe]=null;return V},getSource:function(M,V,oe,ge){for(var qe="",ht=0;ht<V;++ht){var St=ge?Re[ge+ht*4>>2]:-1;qe+=Ge(Re[oe+ht*4>>2],St<0?void 0:St)}return qe},createContext:function(M,V){var oe=M.getContext("webgl",V)||M.getContext("experimental-webgl",V);if(!oe)return 0;var ge=ji.registerContext(oe,V);return ge},registerContext:function(M,V){var oe=ji.getNewId(ji.contexts),ge={handle:oe,attributes:V,version:V.majorVersion,GLctx:M};return ge.cannotHandleOffsetsInUniformArrayViews=function(qe){function ht(ii,ni){var Vt=qe.createShader(ni);return qe.shaderSource(Vt,ii),qe.compileShader(Vt),Vt}try{var St=qe.createProgram();qe.attachShader(St,ht("attribute vec4 p;void main(){gl_Position=p;}",35633)),qe.attachShader(St,ht("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),qe.linkProgram(St);var Et=new Float32Array(8);Et[4]=1,qe.useProgram(St);var ai=qe.getUniformLocation(St,"u");return qe.uniform4fv(ai,Et.subarray(4,8)),!qe.getUniform(St,ai)[0]}catch{return!1}}(),M.canvas&&(M.canvas.GLctxObject=ge),ji.contexts[oe]=ge,(typeof V.enableExtensionsByDefault>"u"||V.enableExtensionsByDefault)&&ji.initExtensions(ge),oe},makeContextCurrent:function(M){return ji.currentContext=ji.contexts[M],n.ctx=pn=ji.currentContext&&ji.currentContext.GLctx,!(M&&!pn)},getContext:function(M){return ji.contexts[M]},deleteContext:function(M){ji.currentContext===ji.contexts[M]&&(ji.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(ji.contexts[M].GLctx.canvas),ji.contexts[M]&&ji.contexts[M].GLctx.canvas&&(ji.contexts[M].GLctx.canvas.GLctxObject=void 0),ji.contexts[M]=null},initExtensions:function(M){if(M||(M=ji.currentContext),!M.initExtensionsDone){M.initExtensionsDone=!0;var V=M.GLctx;Ri(V),wi(V),kr(V),V.disjointTimerQueryExt=V.getExtension("EXT_disjoint_timer_query"),Sr(V);var oe=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],ge=V.getSupportedExtensions()||[];ge.forEach(function(qe){oe.indexOf(qe)!=-1&&V.getExtension(qe)})}},populateUniformTable:function(M){for(var V=ji.programs[M],oe=ji.programInfos[M]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},ge=oe.uniforms,qe=pn.getProgramParameter(V,35718),ht=0;ht<qe;++ht){var St=pn.getActiveUniform(V,ht),Et=St.name;oe.maxUniformLength=Math.max(oe.maxUniformLength,Et.length+1),Et.slice(-1)=="]"&&(Et=Et.slice(0,Et.lastIndexOf("[")));var ai=pn.getUniformLocation(V,Et);if(ai){var ii=ji.getNewId(ji.uniforms);ge[Et]=[St.size,ii],ji.uniforms[ii]=ai;for(var ni=1;ni<St.size;++ni){var Vt=Et+"["+ni+"]";ai=pn.getUniformLocation(V,Vt),ii=ji.getNewId(ji.uniforms),ji.uniforms[ii]=ai}}}}};function Gr(M,V,oe,ge){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(ht){n.canvas.addEventListener(ht,De.receiveEvent,!0)});var qe=n.canvas;return M==0&&V==0&&(M=qe.width,V=qe.height),De.addedResizeListener||(De.addedResizeListener=!0,de.resizeListeners.push(function(ht,St){De.settingVideoMode||De.receiveEvent({type:"resize",w:ht,h:St})})),De.settingVideoMode=!0,de.setCanvasSize(M,V),De.settingVideoMode=!1,De.screen&&(De.freeSurface(De.screen),ye(!De.screen)),De.GL&&(ge=ge|67108864),De.screen=De.makeSurface(M,V,ge,!0,"screen"),De.screen}function jr(M){ye(!De.GL);var V=De.surfaces[M];if(!(!V.locked||--V.locked>0)){if(V.isFlagSet(2097152))De.copyIndexedColorData(V);else if(V.colors)for(var Gi=n.canvas.width,fr=n.canvas.height,Je=V.buffer,oe=V.image.data,c=V.colors,_i=0;_i<fr;_i++){for(var s=_i*Gi*4,A=0;A<Gi;A++){var ai=ve[Je++>>0]*4,tr=s+A*4;oe[tr]=c[ai],oe[tr+1]=c[ai+1],oe[tr+2]=c[ai+2]}Je+=Gi*3}else{var oe=V.image.data,ge=V.buffer;ye(ge%4==0,"Invalid buffer offset: "+ge);var qe=ge>>2,ht=0,St=M==De.screen,Et;if(typeof CanvasPixelArray<"u"&&oe instanceof CanvasPixelArray)for(Et=oe.length;ht<Et;){var ai=Re[qe];oe[ht]=ai&255,oe[ht+1]=ai>>8&255,oe[ht+2]=ai>>16&255,oe[ht+3]=St?255:ai>>24&255,qe++,ht+=4}else{var ii=new Uint32Array(oe.buffer);if(St&&De.defaults.opaqueFrontBuffer){Et=ii.length,ii.set(Re.subarray(qe,qe+Et));var ni=new Uint8Array(oe.buffer),Vt=3,Ii=Vt+4*Et;if(Et%8==0)for(;Vt<Ii;)ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0,ni[Vt]=255,Vt=Vt+4|0;else for(;Vt<Ii;)ni[Vt]=255,Vt=Vt+4|0}else ii.set(Re.subarray(qe,qe+ii.length))}}V.ctx.putImageData(V.image,0,0)}}function dn(M,V,oe,ge){return De.blitSurface(M,V,oe,ge,!1)}function $r(){return 12032}var un=Uint8Array.prototype.copyWithin?function(M,V,oe){ve.copyWithin(M,V,V+oe)}:function(M,V,oe){ve.set(ve.subarray(V,V+oe),M)};function bn(){return ve.length}function On(M){try{return Pe.grow(M-Mt.byteLength+65535>>>16),Ot(Pe.buffer),1}catch{}}function _o(M){M=M>>>0;var V=bn(),oe=65536,ge=2147483648;if(M>ge)return!1;for(var qe=16777216,ht=1;ht<=4;ht*=2){var St=V*(1+.2/ht);St=Math.min(St,M+100663296);var Et=Math.min(ge,Xt(Math.max(qe,M,St),oe)),ai=On(Et);if(ai)return!0}return!1}var qn={mappings:{},buffers:[null,[],[]],printChar:function(M,V){var oe=qn.buffers[M];V===0||V===10?((M===1?z:U)(Me(oe,0)),oe.length=0):oe.push(V)},varargs:void 0,get:function(){qn.varargs+=4;var M=Re[qn.varargs-4>>2];return M},getStr:function(M){var V=Ge(M);return V},get64:function(M,V){return M}};function bo(M){return 0}function Ca(M,V,oe,ge,qe){}function to(M,V,oe,ge){for(var qe=0,ht=0;ht<oe;ht++){for(var St=Re[V+ht*8>>2],Et=Re[V+(ht*8+4)>>2],ai=0;ai<Et;ai++)qn.printChar(M,ve[St+ai]);qe+=Et}return Re[ge>>2]=qe,0}var xt=function(M,V,oe,ge){M||(M=this),this.parent=M,this.mount=M.mount,this.mounted=null,this.id=Le.nextInode++,this.name=V,this.mode=oe,this.node_ops={},this.stream_ops={},this.rdev=ge},Ur=365,Wr=146;Object.defineProperties(xt.prototype,{read:{get:function(){return(this.mode&Ur)===Ur},set:function(M){M?this.mode|=Ur:this.mode&=~Ur}},write:{get:function(){return(this.mode&Wr)===Wr},set:function(M){M?this.mode|=Wr:this.mode&=~Wr}},isFolder:{get:function(){return Le.isDir(this.mode)}},isDevice:{get:function(){return Le.isChrdev(this.mode)}}}),Le.FSNode=xt,Le.staticInit(),n.requestFullscreen=function(V,oe){de.requestFullscreen(V,oe)},n.requestAnimationFrame=function(V){de.requestAnimationFrame(V)},n.setCanvasSize=function(V,oe,ge){de.setCanvasSize(V,oe,ge)},n.pauseMainLoop=function(){de.mainLoop.pause()},n.resumeMainLoop=function(){de.mainLoop.resume()},n.getUserMedia=function(){de.getUserMedia()},n.createContext=function(V,oe,ge,qe){return de.createContext(V,oe,ge,qe)};var pn;function mo(M,V,oe){var ge=oe>0?oe:pt(M)+1,qe=new Array(ge),ht=Xe(M,qe,0,qe.length);return V&&(qe.length=ht),qe}function io(M){for(var V=[],oe=0;oe<M.length;oe++){var ge=M[oe];ge>255&&(ge&=255),V.push(String.fromCharCode(ge))}return V.join("")}var Qs=typeof atob=="function"?atob:function(M){var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",oe="",ge,qe,ht,St,Et,ai,ii,ni=0;M=M.replace(/[^A-Za-z0-9\+\/\=]/g,"");do St=V.indexOf(M.charAt(ni++)),Et=V.indexOf(M.charAt(ni++)),ai=V.indexOf(M.charAt(ni++)),ii=V.indexOf(M.charAt(ni++)),ge=St<<2|Et>>4,qe=(Et&15)<<4|ai>>2,ht=(ai&3)<<6|ii,oe=oe+String.fromCharCode(ge),ai!==64&&(oe=oe+String.fromCharCode(qe)),ii!==64&&(oe=oe+String.fromCharCode(ht));while(ni<M.length);return oe};function Io(M){try{for(var V=Qs(M),oe=new Uint8Array(V.length),ge=0;ge<V.length;++ge)oe[ge]=V.charCodeAt(ge);return oe}catch{throw new Error("Converting base64 string to bytes failed.")}}function fs(M){if(!!xr(M))return Io(M.slice(hr.length))}var Vo={SDL_CreateRGBSurface:Nt,SDL_Flip:Tt,SDL_FreeSurface:jt,SDL_Init:ki,SDL_LockSurface:Te,SDL_SetVideoMode:Gr,SDL_UnlockSurface:jr,SDL_UpperBlit:dn,emscripten_get_sbrk_ptr:$r,emscripten_memcpy_big:un,emscripten_resize_heap:_o,fd_close:bo,fd_seek:Ca,fd_write:to,getTempRet0:ne,memory:Pe,setTempRet0:se,table:be};Br();var $s=n.___wasm_call_ctors=function(){return($s=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)};n._WebpToSDL=function(){return(n._WebpToSDL=n.asm.WebpToSDL).apply(null,arguments)};var Jo=n._memset=function(){return(Jo=n._memset=n.asm.memset).apply(null,arguments)},ws=n._memcpy=function(){return(ws=n._memcpy=n.asm.memcpy).apply(null,arguments)},ds=n._malloc=function(){return(ds=n._malloc=n.asm.malloc).apply(null,arguments)},ea=n._free=function(){return(ea=n._free=n.asm.free).apply(null,arguments)},Ha=n.___errno_location=function(){return(Ha=n.___errno_location=n.asm.__errno_location).apply(null,arguments)},Tl=n.stackSave=function(){return(Tl=n.stackSave=n.asm.stackSave).apply(null,arguments)},Wa=n.stackRestore=function(){return(Wa=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},Ll=n.stackAlloc=function(){return(Ll=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)};n.dynCall_vii=function(){return(n.dynCall_vii=n.asm.dynCall_vii).apply(null,arguments)},n.dynCall_vi=function(){return(n.dynCall_vi=n.asm.dynCall_vi).apply(null,arguments)},n.dynCall_ii=function(){return(n.dynCall_ii=n.asm.dynCall_ii).apply(null,arguments)},n.dynCall_iii=function(){return(n.dynCall_iii=n.asm.dynCall_iii).apply(null,arguments)},n.dynCall_iiii=function(){return(n.dynCall_iiii=n.asm.dynCall_iiii).apply(null,arguments)},n.dynCall_iiiiiii=function(){return(n.dynCall_iiiiiii=n.asm.dynCall_iiiiiii).apply(null,arguments)},n.dynCall_viiii=function(){return(n.dynCall_viiii=n.asm.dynCall_viiii).apply(null,arguments)},n.dynCall_viii=function(){return(n.dynCall_viii=n.asm.dynCall_viii).apply(null,arguments)},n.dynCall_viiiiii=function(){return(n.dynCall_viiiiii=n.asm.dynCall_viiiiii).apply(null,arguments)},n.dynCall_viiiii=function(){return(n.dynCall_viiiii=n.asm.dynCall_viiiii).apply(null,arguments)},n.dynCall_viiiiiiiii=function(){return(n.dynCall_viiiiiiiii=n.asm.dynCall_viiiiiiiii).apply(null,arguments)},n.dynCall_jiiii=function(){return(n.dynCall_jiiii=n.asm.dynCall_jiiii).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.dynCall_jiji).apply(null,arguments)};var Bs=n.__growWasmMemory=function(){return(Bs=n.__growWasmMemory=n.asm.__growWasmMemory).apply(null,arguments)};n.cwrap=nt;var Rs;function Yn(M){this.name="ExitStatus",this.message="Program terminated with exit("+M+")",this.status=M}Y=function M(){Rs||Ta(),Rs||(Y=M)};function Ta(M){if(ze>0||(yt(),ze>0))return;function V(){Rs||(Rs=!0,n.calledRun=!0,!pe&&($i(),nr(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),di()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),V()},1)):V()}if(n.run=Ta,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();Ta(),this.Module=n,this.webpToSdl=n.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(M){n.canvas=M},this.Module.doNotCaptureKeyboard=!0}const AE=()=>new Promise(n=>requestAnimationFrame(n));class Bd extends Error{}const EE=n=>/\.webp.*$/i.test(n.src);class SE{constructor({webp:i=new kE,webpSupport:o=wE(),detectWebpImage:l=EE}={}){this.busy=!1,this.cache={},this.webp=i,this.webpSupport=o,this.detectWebpImage=l}async decode(i){if(this.busy)throw new Bd("cannot decode when already busy");this.busy=!0;try{await AE();const o=document.createElement("canvas");return this.webp.setCanvas(o),this.webp.webpToSdl(i,i.length),this.busy=!1,o.toDataURL()}catch(o){throw this.busy=!1,o.name=Bd.name,o.message=`failed to decode webp image: ${o.message}`,o}}async polyfillImage(i){if(await this.webpSupport)return;const{src:o}=i;if(this.detectWebpImage(i)){if(this.cache[o]){i.src=this.cache[o];return}try{const l=_E(o)?bE(o):await Kb(o),p=await this.decode(l);i.src=this.cache[o]=p}catch(l){throw l.name=Bd.name,l.message=`failed to polyfill image "${o}": ${l.message}`,l}}}async polyfillDocument({document:i=window.document}={}){if(await this.webpSupport)return null;for(const o of Array.from(i.querySelectorAll("img")))try{await this.polyfillImage(o)}catch(l){throw l.name=Bd.name,l.message=`webp image polyfill failed for url "${o.src}": ${l}`,l}}clearCache(){this.cache={}}}var Qb={},Dp={};Dp.byteLength=TE;Dp.toByteArray=PE;Dp.fromByteArray=zE;var vc=[],mu=[],IE=typeof Uint8Array<"u"?Uint8Array:Array,r2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Th=0,CE=r2.length;Th<CE;++Th)vc[Th]=r2[Th],mu[r2.charCodeAt(Th)]=Th;mu["-".charCodeAt(0)]=62;mu["_".charCodeAt(0)]=63;function $b(n){var i=n.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=n.indexOf("=");o===-1&&(o=i);var l=o===i?0:4-o%4;return[o,l]}function TE(n){var i=$b(n),o=i[0],l=i[1];return(o+l)*3/4-l}function LE(n,i,o){return(i+o)*3/4-o}function PE(n){var i,o=$b(n),l=o[0],p=o[1],m=new IE(LE(n,l,p)),b=0,h=p>0?l-4:l,E;for(E=0;E<h;E+=4)i=mu[n.charCodeAt(E)]<<18|mu[n.charCodeAt(E+1)]<<12|mu[n.charCodeAt(E+2)]<<6|mu[n.charCodeAt(E+3)],m[b++]=i>>16&255,m[b++]=i>>8&255,m[b++]=i&255;return p===2&&(i=mu[n.charCodeAt(E)]<<2|mu[n.charCodeAt(E+1)]>>4,m[b++]=i&255),p===1&&(i=mu[n.charCodeAt(E)]<<10|mu[n.charCodeAt(E+1)]<<4|mu[n.charCodeAt(E+2)]>>2,m[b++]=i>>8&255,m[b++]=i&255),m}function ME(n){return vc[n>>18&63]+vc[n>>12&63]+vc[n>>6&63]+vc[n&63]}function DE(n,i,o){for(var l,p=[],m=i;m<o;m+=3)l=(n[m]<<16&16711680)+(n[m+1]<<8&65280)+(n[m+2]&255),p.push(ME(l));return p.join("")}function zE(n){for(var i,o=n.length,l=o%3,p=[],m=16383,b=0,h=o-l;b<h;b+=m)p.push(DE(n,b,b+m>h?h:b+m));return l===1?(i=n[o-1],p.push(vc[i>>2]+vc[i<<4&63]+"==")):l===2&&(i=(n[o-2]<<8)+n[o-1],p.push(vc[i>>10]+vc[i>>4&63]+vc[i<<2&63]+"=")),p.join("")}var Pm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Pm.read=function(n,i,o,l,p){var m,b,h=p*8-l-1,E=(1<<h)-1,L=E>>1,z=-7,U=o?p-1:0,q=o?-1:1,B=n[i+U];for(U+=q,m=B&(1<<-z)-1,B>>=-z,z+=h;z>0;m=m*256+n[i+U],U+=q,z-=8);for(b=m&(1<<-z)-1,m>>=-z,z+=l;z>0;b=b*256+n[i+U],U+=q,z-=8);if(m===0)m=1-L;else{if(m===E)return b?NaN:(B?-1:1)*(1/0);b=b+Math.pow(2,l),m=m-L}return(B?-1:1)*b*Math.pow(2,m-l)};Pm.write=function(n,i,o,l,p,m){var b,h,E,L=m*8-p-1,z=(1<<L)-1,U=z>>1,q=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=l?0:m-1,K=l?1:-1,J=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,b=z):(b=Math.floor(Math.log(i)/Math.LN2),i*(E=Math.pow(2,-b))<1&&(b--,E*=2),b+U>=1?i+=q/E:i+=q*Math.pow(2,1-U),i*E>=2&&(b++,E/=2),b+U>=z?(h=0,b=z):b+U>=1?(h=(i*E-1)*Math.pow(2,p),b=b+U):(h=i*Math.pow(2,U-1)*Math.pow(2,p),b=0));p>=8;n[o+B]=h&255,B+=K,h/=256,p-=8);for(b=b<<p|h,L+=p;L>0;n[o+B]=b&255,B+=K,b/=256,L-=8);n[o+B-K]|=J*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const i=Dp,o=Pm,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=h,n.SlowBuffer=re,n.INSPECT_MAX_BYTES=50;const p=2147483647;n.kMaxLength=p,h.TYPED_ARRAY_SUPPORT=m(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const ze=new Uint8Array(1),Y={foo:function(){return 42}};return Object.setPrototypeOf(Y,Uint8Array.prototype),Object.setPrototypeOf(ze,Y),ze.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function b(ze){if(ze>p)throw new RangeError('The value "'+ze+'" is invalid for option "size"');const Y=new Uint8Array(ze);return Object.setPrototypeOf(Y,h.prototype),Y}function h(ze,Y,te){if(typeof ze=="number"){if(typeof Y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return U(ze)}return E(ze,Y,te)}h.poolSize=8192;function E(ze,Y,te){if(typeof ze=="string")return q(ze,Y);if(ArrayBuffer.isView(ze))return K(ze);if(ze==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze);if(Ui(ze,ArrayBuffer)||ze&&Ui(ze.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ui(ze,SharedArrayBuffer)||ze&&Ui(ze.buffer,SharedArrayBuffer)))return J(ze,Y,te);if(typeof ze=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const je=ze.valueOf&&ze.valueOf();if(je!=null&&je!==ze)return h.from(je,Y,te);const ot=se(ze);if(ot)return ot;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ze[Symbol.toPrimitive]=="function")return h.from(ze[Symbol.toPrimitive]("string"),Y,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze)}h.from=function(ze,Y,te){return E(ze,Y,te)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function L(ze){if(typeof ze!="number")throw new TypeError('"size" argument must be of type number');if(ze<0)throw new RangeError('The value "'+ze+'" is invalid for option "size"')}function z(ze,Y,te){return L(ze),ze<=0?b(ze):Y!==void 0?typeof te=="string"?b(ze).fill(Y,te):b(ze).fill(Y):b(ze)}h.alloc=function(ze,Y,te){return z(ze,Y,te)};function U(ze){return L(ze),b(ze<0?0:ne(ze)|0)}h.allocUnsafe=function(ze){return U(ze)},h.allocUnsafeSlow=function(ze){return U(ze)};function q(ze,Y){if((typeof Y!="string"||Y==="")&&(Y="utf8"),!h.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);const te=ke(ze,Y)|0;let je=b(te);const ot=je.write(ze,Y);return ot!==te&&(je=je.slice(0,ot)),je}function B(ze){const Y=ze.length<0?0:ne(ze.length)|0,te=b(Y);for(let je=0;je<Y;je+=1)te[je]=ze[je]&255;return te}function K(ze){if(Ui(ze,Uint8Array)){const Y=new Uint8Array(ze);return J(Y.buffer,Y.byteOffset,Y.byteLength)}return B(ze)}function J(ze,Y,te){if(Y<0||ze.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if(ze.byteLength<Y+(te||0))throw new RangeError('"length" is outside of buffer bounds');let je;return Y===void 0&&te===void 0?je=new Uint8Array(ze):te===void 0?je=new Uint8Array(ze,Y):je=new Uint8Array(ze,Y,te),Object.setPrototypeOf(je,h.prototype),je}function se(ze){if(h.isBuffer(ze)){const Y=ne(ze.length)|0,te=b(Y);return te.length===0||ze.copy(te,0,0,Y),te}if(ze.length!==void 0)return typeof ze.length!="number"||Qt(ze.length)?b(0):B(ze);if(ze.type==="Buffer"&&Array.isArray(ze.data))return B(ze.data)}function ne(ze){if(ze>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return ze|0}function re(ze){return+ze!=ze&&(ze=0),h.alloc(+ze)}h.isBuffer=function(Y){return Y!=null&&Y._isBuffer===!0&&Y!==h.prototype},h.compare=function(Y,te){if(Ui(Y,Uint8Array)&&(Y=h.from(Y,Y.offset,Y.byteLength)),Ui(te,Uint8Array)&&(te=h.from(te,te.offset,te.byteLength)),!h.isBuffer(Y)||!h.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Y===te)return 0;let je=Y.length,ot=te.length;for(let mt=0,Jt=Math.min(je,ot);mt<Jt;++mt)if(Y[mt]!==te[mt]){je=Y[mt],ot=te[mt];break}return je<ot?-1:ot<je?1:0},h.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(Y,te){if(!Array.isArray(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(Y.length===0)return h.alloc(0);let je;if(te===void 0)for(te=0,je=0;je<Y.length;++je)te+=Y[je].length;const ot=h.allocUnsafe(te);let mt=0;for(je=0;je<Y.length;++je){let Jt=Y[je];if(Ui(Jt,Uint8Array))mt+Jt.length>ot.length?(h.isBuffer(Jt)||(Jt=h.from(Jt)),Jt.copy(ot,mt)):Uint8Array.prototype.set.call(ot,Jt,mt);else if(h.isBuffer(Jt))Jt.copy(ot,mt);else throw new TypeError('"list" argument must be an Array of Buffers');mt+=Jt.length}return ot};function ke(ze,Y){if(h.isBuffer(ze))return ze.length;if(ArrayBuffer.isView(ze)||Ui(ze,ArrayBuffer))return ze.byteLength;if(typeof ze!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ze);const te=ze.length,je=arguments.length>2&&arguments[2]===!0;if(!je&&te===0)return 0;let ot=!1;for(;;)switch(Y){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return $i(ze).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te*2;case"hex":return te>>>1;case"base64":return Hi(ze).length;default:if(ot)return je?-1:$i(ze).length;Y=(""+Y).toLowerCase(),ot=!0}}h.byteLength=ke;function Pe(ze,Y,te){let je=!1;if((Y===void 0||Y<0)&&(Y=0),Y>this.length||((te===void 0||te>this.length)&&(te=this.length),te<=0)||(te>>>=0,Y>>>=0,te<=Y))return"";for(ze||(ze="utf8");;)switch(ze){case"hex":return Xt(this,Y,te);case"utf8":case"utf-8":return Xe(this,Y,te);case"ascii":return Gt(this,Y,te);case"latin1":case"binary":return kt(this,Y,te);case"base64":return Ge(this,Y,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mt(this,Y,te);default:if(je)throw new TypeError("Unknown encoding: "+ze);ze=(ze+"").toLowerCase(),je=!0}}h.prototype._isBuffer=!0;function be(ze,Y,te){const je=ze[Y];ze[Y]=ze[te],ze[te]=je}h.prototype.swap16=function(){const Y=this.length;if(Y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let te=0;te<Y;te+=2)be(this,te,te+1);return this},h.prototype.swap32=function(){const Y=this.length;if(Y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let te=0;te<Y;te+=4)be(this,te,te+3),be(this,te+1,te+2);return this},h.prototype.swap64=function(){const Y=this.length;if(Y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let te=0;te<Y;te+=8)be(this,te,te+7),be(this,te+1,te+6),be(this,te+2,te+5),be(this,te+3,te+4);return this},h.prototype.toString=function(){const Y=this.length;return Y===0?"":arguments.length===0?Xe(this,0,Y):Pe.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(Y){if(!h.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y?!0:h.compare(this,Y)===0},h.prototype.inspect=function(){let Y="";const te=n.INSPECT_MAX_BYTES;return Y=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(Y+=" ... "),"<Buffer "+Y+">"},l&&(h.prototype[l]=h.prototype.inspect),h.prototype.compare=function(Y,te,je,ot,mt){if(Ui(Y,Uint8Array)&&(Y=h.from(Y,Y.offset,Y.byteLength)),!h.isBuffer(Y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Y);if(te===void 0&&(te=0),je===void 0&&(je=Y?Y.length:0),ot===void 0&&(ot=0),mt===void 0&&(mt=this.length),te<0||je>Y.length||ot<0||mt>this.length)throw new RangeError("out of range index");if(ot>=mt&&te>=je)return 0;if(ot>=mt)return-1;if(te>=je)return 1;if(te>>>=0,je>>>=0,ot>>>=0,mt>>>=0,this===Y)return 0;let Jt=mt-ot,hr=je-te;const xr=Math.min(Jt,hr),or=this.slice(ot,mt),Ei=Y.slice(te,je);for(let Wi=0;Wi<xr;++Wi)if(or[Wi]!==Ei[Wi]){Jt=or[Wi],hr=Ei[Wi];break}return Jt<hr?-1:hr<Jt?1:0};function pe(ze,Y,te,je,ot){if(ze.length===0)return-1;if(typeof te=="string"?(je=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),te=+te,Qt(te)&&(te=ot?0:ze.length-1),te<0&&(te=ze.length+te),te>=ze.length){if(ot)return-1;te=ze.length-1}else if(te<0)if(ot)te=0;else return-1;if(typeof Y=="string"&&(Y=h.from(Y,je)),h.isBuffer(Y))return Y.length===0?-1:ye(ze,Y,te,je,ot);if(typeof Y=="number")return Y=Y&255,typeof Uint8Array.prototype.indexOf=="function"?ot?Uint8Array.prototype.indexOf.call(ze,Y,te):Uint8Array.prototype.lastIndexOf.call(ze,Y,te):ye(ze,[Y],te,je,ot);throw new TypeError("val must be string, number or Buffer")}function ye(ze,Y,te,je,ot){let mt=1,Jt=ze.length,hr=Y.length;if(je!==void 0&&(je=String(je).toLowerCase(),je==="ucs2"||je==="ucs-2"||je==="utf16le"||je==="utf-16le")){if(ze.length<2||Y.length<2)return-1;mt=2,Jt/=2,hr/=2,te/=2}function xr(Ei,Wi){return mt===1?Ei[Wi]:Ei.readUInt16BE(Wi*mt)}let or;if(ot){let Ei=-1;for(or=te;or<Jt;or++)if(xr(ze,or)===xr(Y,Ei===-1?0:or-Ei)){if(Ei===-1&&(Ei=or),or-Ei+1===hr)return Ei*mt}else Ei!==-1&&(or-=or-Ei),Ei=-1}else for(te+hr>Jt&&(te=Jt-hr),or=te;or>=0;or--){let Ei=!0;for(let Wi=0;Wi<hr;Wi++)if(xr(ze,or+Wi)!==xr(Y,Wi)){Ei=!1;break}if(Ei)return or}return-1}h.prototype.includes=function(Y,te,je){return this.indexOf(Y,te,je)!==-1},h.prototype.indexOf=function(Y,te,je){return pe(this,Y,te,je,!0)},h.prototype.lastIndexOf=function(Y,te,je){return pe(this,Y,te,je,!1)};function me(ze,Y,te,je){te=Number(te)||0;const ot=ze.length-te;je?(je=Number(je),je>ot&&(je=ot)):je=ot;const mt=Y.length;je>mt/2&&(je=mt/2);let Jt;for(Jt=0;Jt<je;++Jt){const hr=parseInt(Y.substr(Jt*2,2),16);if(Qt(hr))return Jt;ze[te+Jt]=hr}return Jt}function tt(ze,Y,te,je){return Ki($i(Y,ze.length-te),ze,te,je)}function nt(ze,Y,te,je){return Ki(nr(Y),ze,te,je)}function Se(ze,Y,te,je){return Ki(Hi(Y),ze,te,je)}function Me(ze,Y,te,je){return Ki(di(Y,ze.length-te),ze,te,je)}h.prototype.write=function(Y,te,je,ot){if(te===void 0)ot="utf8",je=this.length,te=0;else if(je===void 0&&typeof te=="string")ot=te,je=this.length,te=0;else if(isFinite(te))te=te>>>0,isFinite(je)?(je=je>>>0,ot===void 0&&(ot="utf8")):(ot=je,je=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const mt=this.length-te;if((je===void 0||je>mt)&&(je=mt),Y.length>0&&(je<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");ot||(ot="utf8");let Jt=!1;for(;;)switch(ot){case"hex":return me(this,Y,te,je);case"utf8":case"utf-8":return tt(this,Y,te,je);case"ascii":case"latin1":case"binary":return nt(this,Y,te,je);case"base64":return Se(this,Y,te,je);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,Y,te,je);default:if(Jt)throw new TypeError("Unknown encoding: "+ot);ot=(""+ot).toLowerCase(),Jt=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ge(ze,Y,te){return Y===0&&te===ze.length?i.fromByteArray(ze):i.fromByteArray(ze.slice(Y,te))}function Xe(ze,Y,te){te=Math.min(ze.length,te);const je=[];let ot=Y;for(;ot<te;){const mt=ze[ot];let Jt=null,hr=mt>239?4:mt>223?3:mt>191?2:1;if(ot+hr<=te){let xr,or,Ei,Wi;switch(hr){case 1:mt<128&&(Jt=mt);break;case 2:xr=ze[ot+1],(xr&192)===128&&(Wi=(mt&31)<<6|xr&63,Wi>127&&(Jt=Wi));break;case 3:xr=ze[ot+1],or=ze[ot+2],(xr&192)===128&&(or&192)===128&&(Wi=(mt&15)<<12|(xr&63)<<6|or&63,Wi>2047&&(Wi<55296||Wi>57343)&&(Jt=Wi));break;case 4:xr=ze[ot+1],or=ze[ot+2],Ei=ze[ot+3],(xr&192)===128&&(or&192)===128&&(Ei&192)===128&&(Wi=(mt&15)<<18|(xr&63)<<12|(or&63)<<6|Ei&63,Wi>65535&&Wi<1114112&&(Jt=Wi))}}Jt===null?(Jt=65533,hr=1):Jt>65535&&(Jt-=65536,je.push(Jt>>>10&1023|55296),Jt=56320|Jt&1023),je.push(Jt),ot+=hr}return pt(je)}const _t=4096;function pt(ze){const Y=ze.length;if(Y<=_t)return String.fromCharCode.apply(String,ze);let te="",je=0;for(;je<Y;)te+=String.fromCharCode.apply(String,ze.slice(je,je+=_t));return te}function Gt(ze,Y,te){let je="";te=Math.min(ze.length,te);for(let ot=Y;ot<te;++ot)je+=String.fromCharCode(ze[ot]&127);return je}function kt(ze,Y,te){let je="";te=Math.min(ze.length,te);for(let ot=Y;ot<te;++ot)je+=String.fromCharCode(ze[ot]);return je}function Xt(ze,Y,te){const je=ze.length;(!Y||Y<0)&&(Y=0),(!te||te<0||te>je)&&(te=je);let ot="";for(let mt=Y;mt<te;++mt)ot+=lr[ze[mt]];return ot}function Mt(ze,Y,te){const je=ze.slice(Y,te);let ot="";for(let mt=0;mt<je.length-1;mt+=2)ot+=String.fromCharCode(je[mt]+je[mt+1]*256);return ot}h.prototype.slice=function(Y,te){const je=this.length;Y=~~Y,te=te===void 0?je:~~te,Y<0?(Y+=je,Y<0&&(Y=0)):Y>je&&(Y=je),te<0?(te+=je,te<0&&(te=0)):te>je&&(te=je),te<Y&&(te=Y);const ot=this.subarray(Y,te);return Object.setPrototypeOf(ot,h.prototype),ot};function qt(ze,Y,te){if(ze%1!==0||ze<0)throw new RangeError("offset is not uint");if(ze+Y>te)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(Y,te,je){Y=Y>>>0,te=te>>>0,je||qt(Y,te,this.length);let ot=this[Y],mt=1,Jt=0;for(;++Jt<te&&(mt*=256);)ot+=this[Y+Jt]*mt;return ot},h.prototype.readUintBE=h.prototype.readUIntBE=function(Y,te,je){Y=Y>>>0,te=te>>>0,je||qt(Y,te,this.length);let ot=this[Y+--te],mt=1;for(;te>0&&(mt*=256);)ot+=this[Y+--te]*mt;return ot},h.prototype.readUint8=h.prototype.readUInt8=function(Y,te){return Y=Y>>>0,te||qt(Y,1,this.length),this[Y]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(Y,te){return Y=Y>>>0,te||qt(Y,2,this.length),this[Y]|this[Y+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(Y,te){return Y=Y>>>0,te||qt(Y,2,this.length),this[Y]<<8|this[Y+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(Y,te){return Y=Y>>>0,te||qt(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+this[Y+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(Y,te){return Y=Y>>>0,te||qt(Y,4,this.length),this[Y]*16777216+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},h.prototype.readBigUInt64LE=pi(function(Y){Y=Y>>>0,Di(Y,"offset");const te=this[Y],je=this[Y+7];(te===void 0||je===void 0)&&er(Y,this.length-8);const ot=te+this[++Y]*2**8+this[++Y]*2**16+this[++Y]*2**24,mt=this[++Y]+this[++Y]*2**8+this[++Y]*2**16+je*2**24;return BigInt(ot)+(BigInt(mt)<<BigInt(32))}),h.prototype.readBigUInt64BE=pi(function(Y){Y=Y>>>0,Di(Y,"offset");const te=this[Y],je=this[Y+7];(te===void 0||je===void 0)&&er(Y,this.length-8);const ot=te*2**24+this[++Y]*2**16+this[++Y]*2**8+this[++Y],mt=this[++Y]*2**24+this[++Y]*2**16+this[++Y]*2**8+je;return(BigInt(ot)<<BigInt(32))+BigInt(mt)}),h.prototype.readIntLE=function(Y,te,je){Y=Y>>>0,te=te>>>0,je||qt(Y,te,this.length);let ot=this[Y],mt=1,Jt=0;for(;++Jt<te&&(mt*=256);)ot+=this[Y+Jt]*mt;return mt*=128,ot>=mt&&(ot-=Math.pow(2,8*te)),ot},h.prototype.readIntBE=function(Y,te,je){Y=Y>>>0,te=te>>>0,je||qt(Y,te,this.length);let ot=te,mt=1,Jt=this[Y+--ot];for(;ot>0&&(mt*=256);)Jt+=this[Y+--ot]*mt;return mt*=128,Jt>=mt&&(Jt-=Math.pow(2,8*te)),Jt},h.prototype.readInt8=function(Y,te){return Y=Y>>>0,te||qt(Y,1,this.length),this[Y]&128?(255-this[Y]+1)*-1:this[Y]},h.prototype.readInt16LE=function(Y,te){Y=Y>>>0,te||qt(Y,2,this.length);const je=this[Y]|this[Y+1]<<8;return je&32768?je|4294901760:je},h.prototype.readInt16BE=function(Y,te){Y=Y>>>0,te||qt(Y,2,this.length);const je=this[Y+1]|this[Y]<<8;return je&32768?je|4294901760:je},h.prototype.readInt32LE=function(Y,te){return Y=Y>>>0,te||qt(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},h.prototype.readInt32BE=function(Y,te){return Y=Y>>>0,te||qt(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},h.prototype.readBigInt64LE=pi(function(Y){Y=Y>>>0,Di(Y,"offset");const te=this[Y],je=this[Y+7];(te===void 0||je===void 0)&&er(Y,this.length-8);const ot=this[Y+4]+this[Y+5]*2**8+this[Y+6]*2**16+(je<<24);return(BigInt(ot)<<BigInt(32))+BigInt(te+this[++Y]*2**8+this[++Y]*2**16+this[++Y]*2**24)}),h.prototype.readBigInt64BE=pi(function(Y){Y=Y>>>0,Di(Y,"offset");const te=this[Y],je=this[Y+7];(te===void 0||je===void 0)&&er(Y,this.length-8);const ot=(te<<24)+this[++Y]*2**16+this[++Y]*2**8+this[++Y];return(BigInt(ot)<<BigInt(32))+BigInt(this[++Y]*2**24+this[++Y]*2**16+this[++Y]*2**8+je)}),h.prototype.readFloatLE=function(Y,te){return Y=Y>>>0,te||qt(Y,4,this.length),o.read(this,Y,!0,23,4)},h.prototype.readFloatBE=function(Y,te){return Y=Y>>>0,te||qt(Y,4,this.length),o.read(this,Y,!1,23,4)},h.prototype.readDoubleLE=function(Y,te){return Y=Y>>>0,te||qt(Y,8,this.length),o.read(this,Y,!0,52,8)},h.prototype.readDoubleBE=function(Y,te){return Y=Y>>>0,te||qt(Y,8,this.length),o.read(this,Y,!1,52,8)};function ve(ze,Y,te,je,ot,mt){if(!h.isBuffer(ze))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>ot||Y<mt)throw new RangeError('"value" argument is out of bounds');if(te+je>ze.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(Y,te,je,ot){if(Y=+Y,te=te>>>0,je=je>>>0,!ot){const hr=Math.pow(2,8*je)-1;ve(this,Y,te,je,hr,0)}let mt=1,Jt=0;for(this[te]=Y&255;++Jt<je&&(mt*=256);)this[te+Jt]=Y/mt&255;return te+je},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(Y,te,je,ot){if(Y=+Y,te=te>>>0,je=je>>>0,!ot){const hr=Math.pow(2,8*je)-1;ve(this,Y,te,je,hr,0)}let mt=je-1,Jt=1;for(this[te+mt]=Y&255;--mt>=0&&(Jt*=256);)this[te+mt]=Y/Jt&255;return te+je},h.prototype.writeUint8=h.prototype.writeUInt8=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,1,255,0),this[te]=Y&255,te+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,2,65535,0),this[te]=Y&255,this[te+1]=Y>>>8,te+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,2,65535,0),this[te]=Y>>>8,this[te+1]=Y&255,te+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,4,4294967295,0),this[te+3]=Y>>>24,this[te+2]=Y>>>16,this[te+1]=Y>>>8,this[te]=Y&255,te+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,4,4294967295,0),this[te]=Y>>>24,this[te+1]=Y>>>16,this[te+2]=Y>>>8,this[te+3]=Y&255,te+4};function it(ze,Y,te,je,ot){zi(Y,je,ot,ze,te,7);let mt=Number(Y&BigInt(4294967295));ze[te++]=mt,mt=mt>>8,ze[te++]=mt,mt=mt>>8,ze[te++]=mt,mt=mt>>8,ze[te++]=mt;let Jt=Number(Y>>BigInt(32)&BigInt(4294967295));return ze[te++]=Jt,Jt=Jt>>8,ze[te++]=Jt,Jt=Jt>>8,ze[te++]=Jt,Jt=Jt>>8,ze[te++]=Jt,te}function Re(ze,Y,te,je,ot){zi(Y,je,ot,ze,te,7);let mt=Number(Y&BigInt(4294967295));ze[te+7]=mt,mt=mt>>8,ze[te+6]=mt,mt=mt>>8,ze[te+5]=mt,mt=mt>>8,ze[te+4]=mt;let Jt=Number(Y>>BigInt(32)&BigInt(4294967295));return ze[te+3]=Jt,Jt=Jt>>8,ze[te+2]=Jt,Jt=Jt>>8,ze[te+1]=Jt,Jt=Jt>>8,ze[te]=Jt,te+8}h.prototype.writeBigUInt64LE=pi(function(Y,te=0){return it(this,Y,te,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=pi(function(Y,te=0){return Re(this,Y,te,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(Y,te,je,ot){if(Y=+Y,te=te>>>0,!ot){const xr=Math.pow(2,8*je-1);ve(this,Y,te,je,xr-1,-xr)}let mt=0,Jt=1,hr=0;for(this[te]=Y&255;++mt<je&&(Jt*=256);)Y<0&&hr===0&&this[te+mt-1]!==0&&(hr=1),this[te+mt]=(Y/Jt>>0)-hr&255;return te+je},h.prototype.writeIntBE=function(Y,te,je,ot){if(Y=+Y,te=te>>>0,!ot){const xr=Math.pow(2,8*je-1);ve(this,Y,te,je,xr-1,-xr)}let mt=je-1,Jt=1,hr=0;for(this[te+mt]=Y&255;--mt>=0&&(Jt*=256);)Y<0&&hr===0&&this[te+mt+1]!==0&&(hr=1),this[te+mt]=(Y/Jt>>0)-hr&255;return te+je},h.prototype.writeInt8=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,1,127,-128),Y<0&&(Y=255+Y+1),this[te]=Y&255,te+1},h.prototype.writeInt16LE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,2,32767,-32768),this[te]=Y&255,this[te+1]=Y>>>8,te+2},h.prototype.writeInt16BE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,2,32767,-32768),this[te]=Y>>>8,this[te+1]=Y&255,te+2},h.prototype.writeInt32LE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,4,2147483647,-2147483648),this[te]=Y&255,this[te+1]=Y>>>8,this[te+2]=Y>>>16,this[te+3]=Y>>>24,te+4},h.prototype.writeInt32BE=function(Y,te,je){return Y=+Y,te=te>>>0,je||ve(this,Y,te,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),this[te]=Y>>>24,this[te+1]=Y>>>16,this[te+2]=Y>>>8,this[te+3]=Y&255,te+4},h.prototype.writeBigInt64LE=pi(function(Y,te=0){return it(this,Y,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=pi(function(Y,te=0){return Re(this,Y,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function bt(ze,Y,te,je,ot,mt){if(te+je>ze.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function Ct(ze,Y,te,je,ot){return Y=+Y,te=te>>>0,ot||bt(ze,Y,te,4),o.write(ze,Y,te,je,23,4),te+4}h.prototype.writeFloatLE=function(Y,te,je){return Ct(this,Y,te,!0,je)},h.prototype.writeFloatBE=function(Y,te,je){return Ct(this,Y,te,!1,je)};function Ot(ze,Y,te,je,ot){return Y=+Y,te=te>>>0,ot||bt(ze,Y,te,8),o.write(ze,Y,te,je,52,8),te+8}h.prototype.writeDoubleLE=function(Y,te,je){return Ot(this,Y,te,!0,je)},h.prototype.writeDoubleBE=function(Y,te,je){return Ot(this,Y,te,!1,je)},h.prototype.copy=function(Y,te,je,ot){if(!h.isBuffer(Y))throw new TypeError("argument should be a Buffer");if(je||(je=0),!ot&&ot!==0&&(ot=this.length),te>=Y.length&&(te=Y.length),te||(te=0),ot>0&&ot<je&&(ot=je),ot===je||Y.length===0||this.length===0)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(je<0||je>=this.length)throw new RangeError("Index out of range");if(ot<0)throw new RangeError("sourceEnd out of bounds");ot>this.length&&(ot=this.length),Y.length-te<ot-je&&(ot=Y.length-te+je);const mt=ot-je;return this===Y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(te,je,ot):Uint8Array.prototype.set.call(Y,this.subarray(je,ot),te),mt},h.prototype.fill=function(Y,te,je,ot){if(typeof Y=="string"){if(typeof te=="string"?(ot=te,te=0,je=this.length):typeof je=="string"&&(ot=je,je=this.length),ot!==void 0&&typeof ot!="string")throw new TypeError("encoding must be a string");if(typeof ot=="string"&&!h.isEncoding(ot))throw new TypeError("Unknown encoding: "+ot);if(Y.length===1){const Jt=Y.charCodeAt(0);(ot==="utf8"&&Jt<128||ot==="latin1")&&(Y=Jt)}}else typeof Y=="number"?Y=Y&255:typeof Y=="boolean"&&(Y=Number(Y));if(te<0||this.length<te||this.length<je)throw new RangeError("Out of range index");if(je<=te)return this;te=te>>>0,je=je===void 0?this.length:je>>>0,Y||(Y=0);let mt;if(typeof Y=="number")for(mt=te;mt<je;++mt)this[mt]=Y;else{const Jt=h.isBuffer(Y)?Y:h.from(Y,ot),hr=Jt.length;if(hr===0)throw new TypeError('The value "'+Y+'" is invalid for argument "value"');for(mt=0;mt<je-te;++mt)this[mt+te]=Jt[mt%hr]}return this};const Ht={};function Wt(ze,Y,te){Ht[ze]=class extends te{constructor(){super(),Object.defineProperty(this,"message",{value:Y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ze}]`,this.stack,delete this.name}get code(){return ze}set code(ot){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ot,writable:!0})}toString(){return`${this.name} [${ze}]: ${this.message}`}}}Wt("ERR_BUFFER_OUT_OF_BOUNDS",function(ze){return ze?`${ze} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Wt("ERR_INVALID_ARG_TYPE",function(ze,Y){return`The "${ze}" argument must be of type number. Received type ${typeof Y}`},TypeError),Wt("ERR_OUT_OF_RANGE",function(ze,Y,te){let je=`The value of "${ze}" is out of range.`,ot=te;return Number.isInteger(te)&&Math.abs(te)>2**32?ot=si(String(te)):typeof te=="bigint"&&(ot=String(te),(te>BigInt(2)**BigInt(32)||te<-(BigInt(2)**BigInt(32)))&&(ot=si(ot)),ot+="n"),je+=` It must be ${Y}. Received ${ot}`,je},RangeError);function si(ze){let Y="",te=ze.length;const je=ze[0]==="-"?1:0;for(;te>=je+4;te-=3)Y=`_${ze.slice(te-3,te)}${Y}`;return`${ze.slice(0,te)}${Y}`}function ri(ze,Y,te){Di(Y,"offset"),(ze[Y]===void 0||ze[Y+te]===void 0)&&er(Y,ze.length-(te+1))}function zi(ze,Y,te,je,ot,mt){if(ze>te||ze<Y){const Jt=typeof Y=="bigint"?"n":"";let hr;throw mt>3?Y===0||Y===BigInt(0)?hr=`>= 0${Jt} and < 2${Jt} ** ${(mt+1)*8}${Jt}`:hr=`>= -(2${Jt} ** ${(mt+1)*8-1}${Jt}) and < 2 ** ${(mt+1)*8-1}${Jt}`:hr=`>= ${Y}${Jt} and <= ${te}${Jt}`,new Ht.ERR_OUT_OF_RANGE("value",hr,ze)}ri(je,ot,mt)}function Di(ze,Y){if(typeof ze!="number")throw new Ht.ERR_INVALID_ARG_TYPE(Y,"number",ze)}function er(ze,Y,te){throw Math.floor(ze)!==ze?(Di(ze,te),new Ht.ERR_OUT_OF_RANGE(te||"offset","an integer",ze)):Y<0?new Ht.ERR_BUFFER_OUT_OF_BOUNDS:new Ht.ERR_OUT_OF_RANGE(te||"offset",`>= ${te?1:0} and <= ${Y}`,ze)}const Zt=/[^+/0-9A-Za-z-_]/g;function yt(ze){if(ze=ze.split("=")[0],ze=ze.trim().replace(Zt,""),ze.length<2)return"";for(;ze.length%4!==0;)ze=ze+"=";return ze}function $i(ze,Y){Y=Y||1/0;let te;const je=ze.length;let ot=null;const mt=[];for(let Jt=0;Jt<je;++Jt){if(te=ze.charCodeAt(Jt),te>55295&&te<57344){if(!ot){if(te>56319){(Y-=3)>-1&&mt.push(239,191,189);continue}else if(Jt+1===je){(Y-=3)>-1&&mt.push(239,191,189);continue}ot=te;continue}if(te<56320){(Y-=3)>-1&&mt.push(239,191,189),ot=te;continue}te=(ot-55296<<10|te-56320)+65536}else ot&&(Y-=3)>-1&&mt.push(239,191,189);if(ot=null,te<128){if((Y-=1)<0)break;mt.push(te)}else if(te<2048){if((Y-=2)<0)break;mt.push(te>>6|192,te&63|128)}else if(te<65536){if((Y-=3)<0)break;mt.push(te>>12|224,te>>6&63|128,te&63|128)}else if(te<1114112){if((Y-=4)<0)break;mt.push(te>>18|240,te>>12&63|128,te>>6&63|128,te&63|128)}else throw new Error("Invalid code point")}return mt}function nr(ze){const Y=[];for(let te=0;te<ze.length;++te)Y.push(ze.charCodeAt(te)&255);return Y}function di(ze,Y){let te,je,ot;const mt=[];for(let Jt=0;Jt<ze.length&&!((Y-=2)<0);++Jt)te=ze.charCodeAt(Jt),je=te>>8,ot=te%256,mt.push(ot),mt.push(je);return mt}function Hi(ze){return i.toByteArray(yt(ze))}function Ki(ze,Y,te,je){let ot;for(ot=0;ot<je&&!(ot+te>=Y.length||ot>=ze.length);++ot)Y[ot+te]=ze[ot];return ot}function Ui(ze,Y){return ze instanceof Y||ze!=null&&ze.constructor!=null&&ze.constructor.name!=null&&ze.constructor.name===Y.name}function Qt(ze){return ze!==ze}const lr=function(){const ze="0123456789abcdef",Y=new Array(256);for(let te=0;te<16;++te){const je=te*16;for(let ot=0;ot<16;++ot)Y[je+ot]=ze[te]+ze[ot]}return Y}();function pi(ze){return typeof BigInt>"u"?Dr:ze}function Dr(){throw new Error("BigInt not supported")}})(Qb);const NE=Math.PI/180,FE=180/Math.PI,BE=n=>{const i=l_(n[0]+1,n[2]),o=l_(n[0],n[2]),l=u_(n[1]+1,n[2]),p=u_(n[1],n[2]);return[o,l,i,p]},l_=(n,i)=>n/Math.pow(2,i)*360-180,u_=(n,i)=>{const o=Math.PI-2*Math.PI*n/Math.pow(2,i);return FE*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))},RE=(n,i,o)=>{const l=OE(n,i,o);return l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l},OE=(n,i,o)=>{const l=Math.sin(i*NE),p=Math.pow(2,o);let m=p*(n/360+.5);const b=p*(.5-.25*Math.log((1+l)/(1-l))/Math.PI);return m=m%p,m<0&&(m=m+p),[m,b,o]};class jE{constructor(i,o,l,p){this.url=i,this.tileSize=o,this.minzoom=l,this.maxzoom=p}getValue(i,o){return new Promise((l,p)=>{const m=i[0],b=i[1];let h=o;o>this.maxzoom?h=this.maxzoom:o<this.minzoom&&(h=this.minzoom);const E=RE(m,b,h),L=this.url.replace(/{x}/g,E[0].toString()).replace(/{y}/g,E[1].toString()).replace(/{z}/g,E[2].toString());let z=this.getUrlExtension(L);switch(z||(z="png"),z){case"png":EA.get(L,{responseType:"arraybuffer"}).then(U=>{const q=Qb.Buffer.from(U.data,"binary"),B=this.getValueFromPNG(q,E,m,b);l(B)}).catch(U=>p(U));break;case"webp":Kb(L).then(U=>{this.getValueFromWEBP(U,E,m,b).then(q=>{l(q)}).catch(q=>p(q))}).catch(U=>p(U));break;default:p(new Error(`Invalid file extension: ${z}`));break}})}getValueFromPNG(i,o,l,p){const b=vE.load(i).decodePixels(),h=this.pixels2rgba(b,o,l,p);return this.calc(h[0],h[1],h[2],h[3])}getValueFromWEBP(i,o,l,p){return new Promise((m,b)=>{new SE().decode(i).then(E=>{const L=this.dataURIConverter(E),z=this.getValueFromPNG(L,o,l,p);m(z)}).catch(E=>b(E))})}pixels2rgba(i,o,l,p){const m=[];for(let z=0;z<i.length;z+=4){const U=i[z],q=i[z+1],B=i[z+2],K=i[z+3],J=[U,q,B,K];m.push(J)}const b=BE(o),h=this.getPixelPosition(l,p,b),E=h[0]+h[1]*this.tileSize;return m[E]}getPixelPosition(i,o,l){const p=this.tileSize,m=this.tileSize,b=l[2]-l[0],h=l[3]-l[1],E=(i-l[0])/b,L=(o-l[1])/h,z=Math.floor(p*E),U=Math.floor(m*(1-L));return[z,U]}getUrlExtension(i){let o=i.split(/[#?]/)[0].split(".").pop();return o&&(o=o.trim()),o}dataURIConverter(i){const o=atob(i.split(",")[1]),l=new Uint8Array(o.length);for(let p=0;p<o.length;p+=1)l[p]=o.charCodeAt(p);return l}}var UE=globalThis&&globalThis.__awaiter||function(n,i,o,l){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function h(z){try{L(l.next(z))}catch(U){b(U)}}function E(z){try{L(l.throw(z))}catch(U){b(U)}}function L(z){z.done?m(z.value):p(z.value).then(h,E)}L((l=l.apply(n,i||[])).next())})};class qE extends jE{constructor(i,o,l=5,p=15){super(i,o,l,p)}getElevation(i,o){return UE(this,void 0,void 0,function*(){return yield this.getValue(i,o)})}calc(i,o,l){return-1e4+(i*256*256+o*256+l)*.1}}var Al=63710088e-1,VE={centimeters:Al*100,centimetres:Al*100,degrees:Al/111325,feet:Al*3.28084,inches:Al*39.37,kilometers:Al/1e3,kilometres:Al/1e3,meters:Al,metres:Al,miles:Al/1609.344,millimeters:Al*1e3,millimetres:Al*1e3,nauticalmiles:Al/1852,radians:1,yards:Al*1.0936};function GE(n,i){i===void 0&&(i="kilometers");var o=VE[i];if(!o)throw new Error(i+" units is invalid");return n*o}function Rd(n){var i=n%360;return i*Math.PI/180}function c_(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function HE(n,i,o){o===void 0&&(o={});var l=c_(n),p=c_(i),m=Rd(p[1]-l[1]),b=Rd(p[0]-l[0]),h=Rd(l[1]),E=Rd(p[1]),L=Math.pow(Math.sin(m/2),2)+Math.pow(Math.sin(b/2),2)*Math.cos(h)*Math.cos(E);return GE(2*Math.atan2(Math.sqrt(L),Math.sqrt(1-L)),o.units)}function WE(n){let i,o,l,p,m,b,h,E,L,z;function U(re,ke){return re[0]?XE:ZE}let q=U(n),B=q(n);function K(re,ke){return re[0]?JE:YE}let J=K(n),se=J(n),ne=n[1]&&h_(n);return{c(){i=st("div"),o=st("div"),l=st("button"),p=st("span"),B.c(),m=Yi(),b=st("span"),se.c(),h=Yi(),ne&&ne.c(),E=ln(),this.h()},l(re){i=at(re,"DIV",{class:!0});var ke=ft(i);o=at(ke,"DIV",{class:!0});var Pe=ft(o);l=at(Pe,"BUTTON",{class:!0});var be=ft(l);p=at(be,"SPAN",{class:!0});var pe=ft(p);B.l(pe),pe.forEach(Ee),m=Ji(be),b=at(be,"SPAN",{});var ye=ft(b);se.l(ye),ye.forEach(Ee),be.forEach(Ee),Pe.forEach(Ee),ke.forEach(Ee),h=Ji(re),ne&&ne.l(re),E=ln(),this.h()},h(){rt(p,"class","icon is-small"),rt(l,"class","button is-fullwidth is-link"),rt(o,"class","column"),rt(i,"class","columns is-vcentered")},m(re,ke){vi(re,i,ke),We(i,o),We(o,l),We(l,p),B.m(p,null),We(l,m),We(l,b),se.m(b,null),vi(re,h,ke),ne&&ne.m(re,ke),vi(re,E,ke),L||(z=rn(l,"click",n[5]),L=!0)},p(re,ke){q!==(q=U(re))&&(B.d(1),B=q(re),B&&(B.c(),B.m(p,null))),J!==(J=K(re))&&(se.d(1),se=J(re),se&&(se.c(),se.m(b,null))),re[1]?ne?ne.p(re,ke):(ne=h_(re),ne.c(),ne.m(E.parentNode,E)):ne&&(ne.d(1),ne=null)},d(re){re&&Ee(i),B.d(),se.d(),re&&Ee(h),ne&&ne.d(re),re&&Ee(E),L=!1,z()}}}function ZE(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-ruler")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function XE(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-stop")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function YE(n){let i;return{c(){i=Nr("Start measure")},l(o){i=Fr(o,"Start measure")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function JE(n){let i;return{c(){i=Nr("Stop measure")},l(o){i=Fr(o,"Stop measure")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function h_(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re;return{c(){i=st("div"),o=st("div"),l=st("button"),p=st("span"),m=st("i"),b=Yi(),h=st("span"),E=Nr("Clear"),L=Yi(),z=st("div"),U=st("button"),q=st("span"),B=st("i"),K=Yi(),J=st("span"),se=Nr("GeoJSON"),this.h()},l(ke){i=at(ke,"DIV",{class:!0});var Pe=ft(i);o=at(Pe,"DIV",{class:!0});var be=ft(o);l=at(be,"BUTTON",{class:!0});var pe=ft(l);p=at(pe,"SPAN",{class:!0});var ye=ft(p);m=at(ye,"I",{class:!0}),ft(m).forEach(Ee),ye.forEach(Ee),b=Ji(pe),h=at(pe,"SPAN",{});var me=ft(h);E=Fr(me,"Clear"),me.forEach(Ee),pe.forEach(Ee),be.forEach(Ee),L=Ji(Pe),z=at(Pe,"DIV",{class:!0});var tt=ft(z);U=at(tt,"BUTTON",{class:!0});var nt=ft(U);q=at(nt,"SPAN",{class:!0});var Se=ft(q);B=at(Se,"I",{class:!0}),ft(B).forEach(Ee),Se.forEach(Ee),K=Ji(nt),J=at(nt,"SPAN",{});var Me=ft(J);se=Fr(Me,"GeoJSON"),Me.forEach(Ee),nt.forEach(Ee),tt.forEach(Ee),Pe.forEach(Ee),this.h()},h(){rt(m,"class","fas fa-trash"),rt(p,"class","icon is-small"),rt(l,"class","button is-fullwidth is-link is-light"),rt(o,"class","column is-half py-0"),rt(B,"class","fas fa-download"),rt(q,"class","icon is-small"),rt(U,"class","button is-fullwidth is-link is-light"),rt(z,"class","column is-half py-0"),rt(i,"class","columns is-vcentered pb-3")},m(ke,Pe){vi(ke,i,Pe),We(i,o),We(o,l),We(l,p),We(p,m),We(l,b),We(l,h),We(h,E),We(i,L),We(i,z),We(z,U),We(U,q),We(q,B),We(U,K),We(U,J),We(J,se),ne||(re=[rn(l,"click",n[6]),rn(U,"click",n[7])],ne=!0)},p:ao,d(ke){ke&&Ee(i),ne=!1,th(re)}}}function KE(n){let i,o=sn.elevation&&WE(n);return{c(){o&&o.c(),i=ln()},l(l){o&&o.l(l),i=ln()},m(l,p){o&&o.m(l,p),vi(l,i,p)},p(l,[p]){sn.elevation&&o.p(l,p)},i:ao,o:ao,d(l){o&&o.d(l),l&&Ee(i)}}}const Lh="elev-controls-source-line",n2="elev-controls-layer-line",o2="elev-controls-layer-symbol",Ph="elev-controls-source-symbol";function QE(n,i,o){let l,p;ul(n,yf,pe=>o(8,l=pe)),ul(n,El,pe=>o(9,p=pe));let m,b=sn.elevation.options.units||"kilometers",h=!1;E0(()=>{if(l)l.coordinates.length>0&&o(1,h=!0);else{const pe={markers:[],coordinates:[],elevations:[]};yf.update(()=>pe)}}),J_(()=>{m===!0&&z()});const E=()=>{m?z():L()},L=()=>{p&&(p.getCanvas().style.cursor="crosshair",o(0,m=!0),p.on("click",q),p.fire("elevation.on"))},z=()=>{o(0,m=!1),p&&(p.getCanvas().style.cursor="",p.off("click",q),p.fire("elevation.off"))},U=()=>{p&&(p.getLayer(n2)&&p.removeLayer(n2),p.getLayer(o2)&&p.removeLayer(o2),p.getSource(Lh)&&p.removeSource(Lh),p.getSource(Ph)&&p.removeSource(Ph)),l.markers.forEach(pe=>pe.remove()),o(1,h=!1)},q=pe=>{(!(p!=null&&p.getSource(Lh))||!(p!=null&&p.getSource(Ph)))&&(U(),B());let ye=p==null?void 0:p.getZoom();ye||(ye=15),ye=Math.round(ye);const me=[pe.lngLat.lng,pe.lngLat.lat];new qE(sn.elevation.url,sn.elevation.options.tileSize).getElevation(me,ye).then(nt=>{if(nt||(nt=-1),p){const Se=new Yl.exports.Marker({draggable:!0}).setLngLat(pe.lngLat).addTo(p);l.markers.push(Se),l.coordinates.push([me[0],me[1],nt]),l.elevations.push(nt),p.getSource(Lh).setData(J(l.coordinates)),p.getSource(Ph).setData(se(l.coordinates)),o(1,h=!0)}})},B=()=>{Cf(yf,l.markers=[],l),Cf(yf,l.coordinates=[],l),Cf(yf,l.elevations=[],l),p&&(p.addSource(Lh,{type:"geojson",data:J(l.coordinates)}),p.addSource(Ph,{type:"geojson",data:se(l.coordinates)}),p.addLayer({id:n2,type:"line",source:Lh,paint:{"line-color":sn.elevation.options.mainColor,"line-width":2}}),p.addLayer({id:o2,type:"symbol",source:Ph,layout:{"text-field":"{text}","text-font":sn.elevation.options.font,"text-size":sn.elevation.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":sn.elevation.options.mainColor,"text-halo-color":sn.elevation.options.haloColor,"text-halo-width":sn.elevation.options.fontHalo}}))},K=(pe,ye)=>{let me=`${pe.toFixed(2)} km`;pe<1&&(me=`${(pe*1e3).toFixed()} m`);let tt="";return ye>0&&(tt=`
alt.${ye}m`),`${me}${tt}`},J=(pe=[])=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:pe}}),se=(pe=[])=>{let ye=0;return{type:"FeatureCollection",features:pe.map((me,tt)=>(tt>0&&(ye+=HE(pe[tt-1],pe[tt],{units:b})),{type:"Feature",properties:{id:tt+1,text:K(ye,me[2]),elevation:me[2],length:(ye*1e3).toFixed()},geometry:{type:"Point",coordinates:me}}))}},ne=()=>{if(l.coordinates.length===0)return;const pe=se(l.coordinates);if(pe.features.forEach(tt=>{delete tt.properties.text}),l.coordinates.length>1){const tt=J(l.coordinates);pe.features.push(tt)}const ye="measure_result.geojson",me=JSON.stringify(pe);re(ye,me)},re=(pe,ye)=>{const me=new Blob([ye],{type:"text/plain"}),tt=document.createElement("a");tt.href=URL.createObjectURL(me),tt.setAttribute("download",pe),tt.dispatchEvent(new MouseEvent("click"))};return[m,h,E,U,ne,()=>E(),()=>U(),()=>ne()]}class $E extends Xo{constructor(i){super(),Yo(this,i,QE,KE,qo,{})}}const{Marker:eS}=Y4,s2={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},Xu={Time:"time",Distance:"distance"};class tS{constructor(i,o,l){wo(this,"map");wo(this,"url");wo(this,"contourSources",[]);wo(this,"contourLayers",[]);wo(this,"contourMaker");wo(this,"contours",[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);this.map=i,this.url=o,l&&(this.contours=l)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(i=>{var o;(o=this.map)==null||o.removeLayer(i)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(i=>{var o;(o=this.map)==null||o.removeSource(i)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(i,o,l,p,m){this.clearFeatures();let b=JSON.parse(JSON.stringify(this.contours));m&&(b=m),b.forEach(E=>{l===Xu.Time?delete E.distance:delete E.time});let h="km";return l===Xu.Time&&(h="min"),new Promise((E,L)=>{const z={locations:[{lat:o,lon:i}],costing:p,contours:b,polygons:!0},U=`${this.url}/isochrone?json=${JSON.stringify(z)}`;fetch(U).then(q=>q.json()).then(q=>{q.features.forEach(B=>{var J,se,ne,re;const K=`isochrone-${B.properties.contour}-${l}`;(J=this.map)==null||J.addSource(K,{type:"geojson",data:B}),this.contourSources.push(K),(se=this.map)==null||se.addLayer({id:`pg-${K}-${l}`,type:"fill",source:K,layout:{},paint:{"fill-color":B.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${K}-${l}`),(ne=this.map)==null||ne.addLayer({id:`ls-${K}-${l}`,type:"line",source:K,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":B.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${K}-${l}`),(re=this.map)==null||re.addLayer({id:`symbol-${K}-${l}`,type:"symbol",source:K,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${h}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${K}-${l}`)}),this.map&&(this.contourMaker=new eS().setLngLat([i,o]).addTo(this.map)),E()}).catch(q=>L(q))})}getContoursOption(){return this.contours}}var G0=(n=>(n.LAYERS="Layers",n.SEARCH="Search",n.ADVANCED="Advanced",n))(G0||{});const Kh=[{value:s2.Walking,label:"Walking",icon:"fa-person-walking"},{value:s2.Bicycle,label:"Bicycle",icon:"fa-bicycle"},{value:s2.Car,label:"Car",icon:"fa-car"}];function f_(n,i,o){const l=n.slice();return l[14]=i[o],l[15]=i,l[16]=o,l}function d_(n,i,o){const l=n.slice();return l[17]=i[o],l}function p_(n,i,o){const l=n.slice();return l[20]=i[o],l}function iS(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t,pt,Gt,kt,Xt,Mt,qt,ve,it,Re,bt,Ct,Ot,Ht,Wt,si,ri,zi,Di,er=Object.keys(Xu),Zt=[];for(let Qt=0;Qt<er.length;Qt+=1)Zt[Qt]=m_(p_(n,er,Qt));let yt=Kh,$i=[];for(let Qt=0;Qt<yt.length;Qt+=1)$i[Qt]=g_(d_(n,yt,Qt));let nr=n[3],di=[];for(let Qt=0;Qt<nr.length;Qt+=1)di[Qt]=y_(f_(n,nr,Qt));function Hi(Qt,lr){return Qt[0]===Xu.Time?cS:uS}let Ki=Hi(n),Ui=Ki(n);return{c(){i=st("div"),o=st("div"),l=st("label"),p=Nr("Type of Isochrone"),m=Yi(),b=st("div");for(let Qt=0;Qt<Zt.length;Qt+=1)Zt[Qt].c();h=Yi(),E=st("div"),L=st("label"),z=Nr("Means of Transport"),U=Yi(),q=st("div");for(let Qt=0;Qt<$i.length;Qt+=1)$i[Qt].c();B=Yi(),K=st("div"),J=st("div"),se=st("label"),ne=Nr("From"),re=Yi(),ke=st("div"),Pe=st("div"),be=st("div"),pe=st("div"),ye=st("input"),tt=Yi(),nt=st("div"),Se=st("input"),Ge=Yi(),Xe=st("div"),_t=st("div");for(let Qt=0;Qt<di.length;Qt+=1)di[Qt].c();pt=Yi(),Gt=st("div"),kt=st("div"),Xt=st("button"),Mt=st("span"),Ui.c(),qt=Yi(),ve=st("span"),it=Nr("Calculate"),Re=Yi(),bt=st("div"),Ct=st("button"),Ot=st("span"),Ht=st("i"),Wt=Yi(),si=st("span"),ri=Nr("Clear"),this.h()},l(Qt){i=at(Qt,"DIV",{class:!0});var lr=ft(i);o=at(lr,"DIV",{class:!0});var pi=ft(o);l=at(pi,"LABEL",{class:!0});var Dr=ft(l);p=Fr(Dr,"Type of Isochrone"),Dr.forEach(Ee),m=Ji(pi),b=at(pi,"DIV",{class:!0});var ze=ft(b);for(let Bi=0;Bi<Zt.length;Bi+=1)Zt[Bi].l(ze);ze.forEach(Ee),pi.forEach(Ee),h=Ji(lr),E=at(lr,"DIV",{class:!0});var Y=ft(E);L=at(Y,"LABEL",{class:!0});var te=ft(L);z=Fr(te,"Means of Transport"),te.forEach(Ee),U=Ji(Y),q=at(Y,"DIV",{class:!0});var je=ft(q);for(let Bi=0;Bi<$i.length;Bi+=1)$i[Bi].l(je);je.forEach(Ee),Y.forEach(Ee),B=Ji(lr),K=at(lr,"DIV",{class:!0});var ot=ft(K);J=at(ot,"DIV",{class:!0});var mt=ft(J);se=at(mt,"LABEL",{class:!0});var Jt=ft(se);ne=Fr(Jt,"From"),Jt.forEach(Ee),mt.forEach(Ee),re=Ji(ot),ke=at(ot,"DIV",{class:!0});var hr=ft(ke);Pe=at(hr,"DIV",{class:!0});var xr=ft(Pe);be=at(xr,"DIV",{class:!0});var or=ft(be);pe=at(or,"DIV",{class:!0});var Ei=ft(pe);ye=at(Ei,"INPUT",{class:!0,type:!0,placeholder:!0}),Ei.forEach(Ee),tt=Ji(or),nt=at(or,"DIV",{class:!0});var Wi=ft(nt);Se=at(Wi,"INPUT",{class:!0,type:!0,placeholder:!0}),Wi.forEach(Ee),or.forEach(Ee),xr.forEach(Ee),hr.forEach(Ee),ot.forEach(Ee),lr.forEach(Ee),Ge=Ji(Qt),Xe=at(Qt,"DIV",{style:!0});var Br=ft(Xe);_t=at(Br,"DIV",{class:!0});var Zr=ft(_t);for(let Bi=0;Bi<di.length;Bi+=1)di[Bi].l(Zr);Zr.forEach(Ee),Br.forEach(Ee),pt=Ji(Qt),Gt=at(Qt,"DIV",{class:!0});var Pn=ft(Gt);kt=at(Pn,"DIV",{class:!0});var Vr=ft(kt);Xt=at(Vr,"BUTTON",{class:!0});var vn=ft(Xt);Mt=at(vn,"SPAN",{class:!0});var Pr=ft(Mt);Ui.l(Pr),Pr.forEach(Ee),qt=Ji(vn),ve=at(vn,"SPAN",{});var _n=ft(ve);it=Fr(_n,"Calculate"),_n.forEach(Ee),vn.forEach(Ee),Vr.forEach(Ee),Re=Ji(Pn),bt=at(Pn,"DIV",{class:!0});var Tn=ft(bt);Ct=at(Tn,"BUTTON",{class:!0});var Tr=ft(Ct);Ot=at(Tr,"SPAN",{class:!0});var Qr=ft(Ot);Ht=at(Qr,"I",{class:!0}),ft(Ht).forEach(Ee),Qr.forEach(Ee),Wt=Ji(Tr),si=at(Tr,"SPAN",{});var Un=ft(si);ri=Fr(Un,"Clear"),Un.forEach(Ee),Tr.forEach(Ee),Tn.forEach(Ee),Pn.forEach(Ee),this.h()},h(){rt(l,"class","label"),rt(b,"class","control"),rt(o,"class","field"),rt(L,"class","label"),rt(q,"class","control"),rt(E,"class","field"),rt(se,"class","label"),rt(J,"class","field-label is-normal"),rt(ye,"class","input is-small"),rt(ye,"type","text"),rt(ye,"placeholder","Name"),ye.value=me=`${n[1].toFixed(6)}`,ye.readOnly=!0,rt(pe,"class","column is-half px-0"),rt(Se,"class","input is-small"),rt(Se,"type","text"),rt(Se,"placeholder","Name"),Se.value=Me=`${n[2].toFixed(6)}`,Se.readOnly=!0,rt(nt,"class","column is-half px-0"),rt(be,"class","columns pt-1 px-3 is-mobile"),rt(Pe,"class","field"),rt(ke,"class","field-body"),rt(K,"class","field is-horizontal"),rt(i,"class","transport-select svelte-1dgq3qf"),rt(_t,"class","columns px-3 is-mobile"),ih(Xe,"display","inline-flex"),rt(Mt,"class","icon is-small"),rt(Xt,"class","button is-fullwidth is-link"),rt(kt,"class","column is-half px-1 py-4"),rt(Ht,"class","fas fa-trash"),rt(Ot,"class","icon is-small"),rt(Ct,"class","button is-fullwidth is-link is-light"),rt(bt,"class","column is-half px-1 py-4"),rt(Gt,"class","columns is-vcentered pt-2")},m(Qt,lr){vi(Qt,i,lr),We(i,o),We(o,l),We(l,p),We(o,m),We(o,b);for(let pi=0;pi<Zt.length;pi+=1)Zt[pi].m(b,null);We(i,h),We(i,E),We(E,L),We(L,z),We(E,U),We(E,q);for(let pi=0;pi<$i.length;pi+=1)$i[pi].m(q,null);We(i,B),We(i,K),We(K,J),We(J,se),We(se,ne),We(K,re),We(K,ke),We(ke,Pe),We(Pe,be),We(be,pe),We(pe,ye),We(be,tt),We(be,nt),We(nt,Se),vi(Qt,Ge,lr),vi(Qt,Xe,lr),We(Xe,_t);for(let pi=0;pi<di.length;pi+=1)di[pi].m(_t,null);vi(Qt,pt,lr),vi(Qt,Gt,lr),We(Gt,kt),We(kt,Xt),We(Xt,Mt),Ui.m(Mt,null),We(Xt,qt),We(Xt,ve),We(ve,it),We(Gt,Re),We(Gt,bt),We(bt,Ct),We(Ct,Ot),We(Ot,Ht),We(Ct,Wt),We(Ct,si),We(si,ri),zi||(Di=[rn(Xt,"click",n[13]),rn(Ct,"click",n[6])],zi=!0)},p(Qt,lr){if(lr&1){er=Object.keys(Xu);let pi;for(pi=0;pi<er.length;pi+=1){const Dr=p_(Qt,er,pi);Zt[pi]?Zt[pi].p(Dr,lr):(Zt[pi]=m_(Dr),Zt[pi].c(),Zt[pi].m(b,null))}for(;pi<Zt.length;pi+=1)Zt[pi].d(1);Zt.length=er.length}if(lr&17){yt=Kh;let pi;for(pi=0;pi<yt.length;pi+=1){const Dr=d_(Qt,yt,pi);$i[pi]?$i[pi].p(Dr,lr):($i[pi]=g_(Dr),$i[pi].c(),$i[pi].m(q,null))}for(;pi<$i.length;pi+=1)$i[pi].d(1);$i.length=yt.length}if(lr&2&&me!==(me=`${Qt[1].toFixed(6)}`)&&ye.value!==me&&(ye.value=me),lr&4&&Me!==(Me=`${Qt[2].toFixed(6)}`)&&Se.value!==Me&&(Se.value=Me),lr&9){nr=Qt[3];let pi;for(pi=0;pi<nr.length;pi+=1){const Dr=f_(Qt,nr,pi);di[pi]?di[pi].p(Dr,lr):(di[pi]=y_(Dr),di[pi].c(),di[pi].m(_t,null))}for(;pi<di.length;pi+=1)di[pi].d(1);di.length=nr.length}Ki!==(Ki=Hi(Qt))&&(Ui.d(1),Ui=Ki(Qt),Ui&&(Ui.c(),Ui.m(Mt,null)))},d(Qt){Qt&&Ee(i),bs(Zt,Qt),bs($i,Qt),Qt&&Ee(Ge),Qt&&Ee(Xe),bs(di,Qt),Qt&&Ee(pt),Qt&&Ee(Gt),Ui.d(),zi=!1,th(Di)}}}function rS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-ruler")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function nS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-clock")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function m_(n){let i,o,l,p,m,b,h=n[20]+"",E,L,z,U;function q(){return n[9](n[20])}function B(se,ne){return se[20]==="Time"?nS:rS}let J=B(n)(n);return{c(){i=st("label"),o=st("input"),p=Yi(),m=st("div"),J.c(),b=Yi(),E=Nr(h),L=Yi(),this.h()},l(se){i=at(se,"LABEL",{class:!0,style:!0});var ne=ft(i);o=at(ne,"INPUT",{type:!0,name:!0}),p=Ji(ne),m=at(ne,"DIV",{class:!0});var re=ft(m);J.l(re),re.forEach(Ee),b=Ji(ne),E=Fr(ne,h),L=Ji(ne),ne.forEach(Ee),this.h()},h(){rt(o,"type","radio"),rt(o,"name","isochrone-"+n[20]),o.checked=l=n[0]===Xu[n[20]],rt(m,"class","icon is-small is-left pl-3 pr-3"),rt(i,"class","radio"),ih(i,"color","black")},m(se,ne){vi(se,i,ne),We(i,o),We(i,p),We(i,m),J.m(m,null),We(i,b),We(i,E),We(i,L),z||(U=rn(o,"click",q),z=!0)},p(se,ne){n=se,ne&1&&l!==(l=n[0]===Xu[n[20]])&&(o.checked=l)},d(se){se&&Ee(i),J.d(),z=!1,U()}}}function g_(n){let i,o,l,p,m,b,h,E,L=n[17].label+"",z,U,q,B;function K(){return n[10](n[17])}return{c(){i=st("label"),o=st("input"),m=Yi(),b=st("div"),h=st("i"),E=Yi(),z=Nr(L),U=Yi(),this.h()},l(J){i=at(J,"LABEL",{class:!0,style:!0});var se=ft(i);o=at(se,"INPUT",{type:!0,name:!0}),m=Ji(se),b=at(se,"DIV",{class:!0});var ne=ft(b);h=at(ne,"I",{class:!0}),ft(h).forEach(Ee),ne.forEach(Ee),E=Ji(se),z=Fr(se,L),U=Ji(se),se.forEach(Ee),this.h()},h(){rt(o,"type","radio"),rt(o,"name",l="transport-"+n[0]),o.checked=p=n[4]===n[17].value,rt(h,"class","fas "+n[17].icon+" svelte-1dgq3qf"),rt(b,"class","icon is-small is-left pl-3 pr-3"),rt(i,"class","radio"),ih(i,"color","black")},m(J,se){vi(J,i,se),We(i,o),We(i,m),We(i,b),We(b,h),We(i,E),We(i,z),We(i,U),q||(B=rn(o,"click",K),q=!0)},p(J,se){n=J,se&1&&l!==(l="transport-"+n[0])&&rt(o,"name",l),se&16&&p!==(p=n[4]===n[17].value)&&(o.checked=p)},d(J){J&&Ee(i),q=!1,B()}}}function oS(n){let i=n[14].distance+"",o,l;return{c(){o=Nr(i),l=Nr(" km")},l(p){o=Fr(p,i),l=Fr(p," km")},m(p,m){vi(p,o,m),vi(p,l,m)},p(p,m){m&8&&i!==(i=p[14].distance+"")&&os(o,i)},d(p){p&&Ee(o),p&&Ee(l)}}}function sS(n){let i=n[14].time+"",o,l;return{c(){o=Nr(i),l=Nr(" min")},l(p){o=Fr(p,i),l=Fr(p," min")},m(p,m){vi(p,o,m),vi(p,l,m)},p(p,m){m&8&&i!==(i=p[14].time+"")&&os(o,i)},d(p){p&&Ee(o),p&&Ee(l)}}}function aS(n){let i,o,l;function p(){n[12].call(i,n[15],n[16])}return{c(){i=st("input"),this.h()},l(m){i=at(m,"INPUT",{class:!0,type:!0}),this.h()},h(){rt(i,"class","input is-small"),rt(i,"type","number")},m(m,b){vi(m,i,b),x0(i,n[14].distance),o||(l=rn(i,"input",p),o=!0)},p(m,b){n=m,b&8&&ep(i.value)!==n[14].distance&&x0(i,n[14].distance)},d(m){m&&Ee(i),o=!1,l()}}}function lS(n){let i,o,l;function p(){n[11].call(i,n[15],n[16])}return{c(){i=st("input"),this.h()},l(m){i=at(m,"INPUT",{class:!0,type:!0}),this.h()},h(){rt(i,"class","input is-small"),rt(i,"type","number")},m(m,b){vi(m,i,b),x0(i,n[14].time),o||(l=rn(i,"input",p),o=!0)},p(m,b){n=m,b&8&&ep(i.value)!==n[14].time&&x0(i,n[14].time)},d(m){m&&Ee(i),o=!1,l()}}}function y_(n){let i,o,l,p,m,b;function h(B,K){return B[0]===Xu.Time?sS:oS}let E=h(n),L=E(n);function z(B,K){return B[0]===Xu.Time?lS:aS}let U=z(n),q=U(n);return{c(){i=st("div"),o=st("div"),l=st("label"),L.c(),p=Yi(),m=st("div"),q.c(),b=Yi(),this.h()},l(B){i=at(B,"DIV",{class:!0});var K=ft(i);o=at(K,"DIV",{class:!0});var J=ft(o);l=at(J,"LABEL",{class:!0});var se=ft(l);L.l(se),se.forEach(Ee),p=Ji(J),m=at(J,"DIV",{class:!0});var ne=ft(m);q.l(ne),ne.forEach(Ee),J.forEach(Ee),b=Ji(K),K.forEach(Ee),this.h()},h(){rt(l,"class","label is-small"),rt(m,"class","control"),rt(o,"class","field"),rt(i,"class","column is-one-quarter px-0")},m(B,K){vi(B,i,K),We(i,o),We(o,l),L.m(l,null),We(o,p),We(o,m),q.m(m,null),We(i,b)},p(B,K){E===(E=h(B))&&L?L.p(B,K):(L.d(1),L=E(B),L&&(L.c(),L.m(l,null))),U===(U=z(B))&&q?q.p(B,K):(q.d(1),q=U(B),q&&(q.c(),q.m(m,null)))},d(B){B&&Ee(i),L.d(),q.d()}}}function uS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-ruler")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function cS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-clock")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function hS(n){let i,o=sn.valhalla&&iS(n);return{c(){o&&o.c(),i=ln()},l(l){o&&o.l(l),i=ln()},m(l,p){o&&o.m(l,p),vi(l,i,p)},p(l,[p]){sn.valhalla&&o.p(l,p)},i:ao,o:ao,d(l){o&&o.d(l),l&&Ee(i)}}}function fS(n,i,o){var ne;let l,p;ul(n,u1,re=>o(7,l=re)),ul(n,El,re=>o(8,p=re));let m=Xu.Time,b,h,E=(ne=sn.valhalla)==null?void 0:ne.options.Contours;E||(E=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);let L=Kh[0].value;const z=re=>{l.getIsochrone(Number(b),Number(h),re,L,JSON.parse(JSON.stringify(E)))},U=()=>{l.clearFeatures()},q=re=>{o(0,m=Xu[re])},B=re=>{o(4,L=re.value)};function K(re,ke){re[ke].time=ep(this.value),o(3,E)}function J(re,ke){re[ke].distance=ep(this.value),o(3,E)}const se=()=>z(m);return n.$$.update=()=>{n.$$.dirty&384&&p&&(l||u1.update(()=>{}),l||Cf(u1,l=new tS(p,sn.valhalla.url),l),o(1,b=p.getCenter().lng),o(2,h=p.getCenter().lat),p.on("moveend",()=>{o(1,b=p.getCenter().lng),o(2,h=p.getCenter().lat)}))},[m,b,h,E,L,z,U,l,p,q,B,K,J,se]}class dS extends Xo{constructor(i){super(),Yo(this,i,fS,hS,qo,{})}}function v_(n,i,o){const l=n.slice();return l[18]=i[o],l}function pS(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne=Kh,re=[];for(let nt=0;nt<ne.length;nt+=1)re[nt]=__(v_(n,ne,nt));function ke(nt,Se){return nt[2]?gS:mS}let Pe=ke(n),be=Pe(n);function pe(nt,Se){return nt[2]?vS:yS}let ye=pe(n),me=ye(n),tt=n[1]&&n[1].length>0&&b_(n);return{c(){i=st("div"),o=st("label"),l=Nr("Means of Transport"),p=Yi(),m=st("div");for(let nt=0;nt<re.length;nt+=1)re[nt].c();b=Yi(),h=st("div"),E=st("div"),L=st("button"),z=st("span"),be.c(),U=Yi(),q=st("span"),me.c(),B=Yi(),tt&&tt.c(),K=ln(),this.h()},l(nt){i=at(nt,"DIV",{class:!0});var Se=ft(i);o=at(Se,"LABEL",{class:!0});var Me=ft(o);l=Fr(Me,"Means of Transport"),Me.forEach(Ee),p=Ji(Se),m=at(Se,"DIV",{class:!0});var Ge=ft(m);for(let Xt=0;Xt<re.length;Xt+=1)re[Xt].l(Ge);Ge.forEach(Ee),Se.forEach(Ee),b=Ji(nt),h=at(nt,"DIV",{class:!0});var Xe=ft(h);E=at(Xe,"DIV",{class:!0});var _t=ft(E);L=at(_t,"BUTTON",{class:!0});var pt=ft(L);z=at(pt,"SPAN",{class:!0});var Gt=ft(z);be.l(Gt),Gt.forEach(Ee),U=Ji(pt),q=at(pt,"SPAN",{});var kt=ft(q);me.l(kt),kt.forEach(Ee),pt.forEach(Ee),_t.forEach(Ee),Xe.forEach(Ee),B=Ji(nt),tt&&tt.l(nt),K=ln(),this.h()},h(){rt(o,"class","label"),rt(m,"class","control"),rt(i,"class","field"),rt(z,"class","icon is-small"),rt(L,"class","button is-fullwidth is-link"),rt(E,"class","column"),rt(h,"class","columns is-vcentered")},m(nt,Se){vi(nt,i,Se),We(i,o),We(o,l),We(i,p),We(i,m);for(let Me=0;Me<re.length;Me+=1)re[Me].m(m,null);vi(nt,b,Se),vi(nt,h,Se),We(h,E),We(E,L),We(L,z),be.m(z,null),We(L,U),We(L,q),me.m(q,null),vi(nt,B,Se),tt&&tt.m(nt,Se),vi(nt,K,Se),J||(se=rn(L,"click",n[5]),J=!0)},p(nt,Se){if(Se&1){ne=Kh;let Me;for(Me=0;Me<ne.length;Me+=1){const Ge=v_(nt,ne,Me);re[Me]?re[Me].p(Ge,Se):(re[Me]=__(Ge),re[Me].c(),re[Me].m(m,null))}for(;Me<re.length;Me+=1)re[Me].d(1);re.length=ne.length}Pe!==(Pe=ke(nt))&&(be.d(1),be=Pe(nt),be&&(be.c(),be.m(z,null))),ye!==(ye=pe(nt))&&(me.d(1),me=ye(nt),me&&(me.c(),me.m(q,null))),nt[1]&&nt[1].length>0?tt?tt.p(nt,Se):(tt=b_(nt),tt.c(),tt.m(K.parentNode,K)):tt&&(tt.d(1),tt=null)},d(nt){nt&&Ee(i),bs(re,nt),nt&&Ee(b),nt&&Ee(h),be.d(),me.d(),nt&&Ee(B),tt&&tt.d(nt),nt&&Ee(K),J=!1,se()}}}function __(n){let i,o,l,p,m,b,h,E=n[18].label+"",L,z,U,q;function B(){return n[7](n[18])}return{c(){i=st("label"),o=st("input"),p=Yi(),m=st("div"),b=st("i"),h=Yi(),L=Nr(E),z=Yi(),this.h()},l(K){i=at(K,"LABEL",{class:!0,style:!0});var J=ft(i);o=at(J,"INPUT",{type:!0,name:!0}),p=Ji(J),m=at(J,"DIV",{class:!0});var se=ft(m);b=at(se,"I",{class:!0}),ft(b).forEach(Ee),se.forEach(Ee),h=Ji(J),L=Fr(J,E),z=Ji(J),J.forEach(Ee),this.h()},h(){rt(o,"type","radio"),rt(o,"name","transport-routing"),o.checked=l=n[0]===n[18].value,rt(b,"class","fas "+n[18].icon),rt(m,"class","icon is-small is-left pl-3 pr-3"),rt(i,"class","radio"),ih(i,"color","black")},m(K,J){vi(K,i,J),We(i,o),We(i,p),We(i,m),We(m,b),We(i,h),We(i,L),We(i,z),U||(q=rn(o,"click",B),U=!0)},p(K,J){n=K,J&1&&l!==(l=n[0]===n[18].value)&&(o.checked=l)},d(K){K&&Ee(i),U=!1,q()}}}function mS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-route")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function gS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-stop")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function yS(n){let i;return{c(){i=Nr("Start routing")},l(o){i=Fr(o,"Start routing")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function vS(n){let i;return{c(){i=Nr("Stop routing")},l(o){i=Fr(o,"Stop routing")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function b_(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re,ke,Pe,be,pe,ye,me,tt,nt,Se,Me,Ge,Xe,_t=n[1].length>1&&w_(n),pt=n[3]&&x_(n),Gt=n[4]&&k_(n);return{c(){i=st("div"),o=st("div"),l=st("button"),p=st("span"),m=st("i"),b=Yi(),h=st("span"),E=Nr("Clear"),L=Yi(),z=st("div"),U=st("div"),q=st("label"),B=Nr("From"),K=Yi(),J=st("div"),se=st("div"),ne=st("div"),re=st("div"),ke=st("input"),be=Yi(),pe=st("div"),ye=st("input"),tt=Yi(),_t&&_t.c(),nt=Yi(),pt&&pt.c(),Se=Yi(),Gt&&Gt.c(),Me=ln(),this.h()},l(kt){i=at(kt,"DIV",{class:!0});var Xt=ft(i);o=at(Xt,"DIV",{class:!0});var Mt=ft(o);l=at(Mt,"BUTTON",{class:!0});var qt=ft(l);p=at(qt,"SPAN",{class:!0});var ve=ft(p);m=at(ve,"I",{class:!0}),ft(m).forEach(Ee),ve.forEach(Ee),b=Ji(qt),h=at(qt,"SPAN",{});var it=ft(h);E=Fr(it,"Clear"),it.forEach(Ee),qt.forEach(Ee),Mt.forEach(Ee),Xt.forEach(Ee),L=Ji(kt),z=at(kt,"DIV",{class:!0});var Re=ft(z);U=at(Re,"DIV",{class:!0});var bt=ft(U);q=at(bt,"LABEL",{class:!0});var Ct=ft(q);B=Fr(Ct,"From"),Ct.forEach(Ee),bt.forEach(Ee),K=Ji(Re),J=at(Re,"DIV",{class:!0});var Ot=ft(J);se=at(Ot,"DIV",{class:!0});var Ht=ft(se);ne=at(Ht,"DIV",{class:!0});var Wt=ft(ne);re=at(Wt,"DIV",{class:!0});var si=ft(re);ke=at(si,"INPUT",{class:!0,type:!0,placeholder:!0}),si.forEach(Ee),be=Ji(Wt),pe=at(Wt,"DIV",{class:!0});var ri=ft(pe);ye=at(ri,"INPUT",{class:!0,type:!0,placeholder:!0}),ri.forEach(Ee),Wt.forEach(Ee),Ht.forEach(Ee),Ot.forEach(Ee),Re.forEach(Ee),tt=Ji(kt),_t&&_t.l(kt),nt=Ji(kt),pt&&pt.l(kt),Se=Ji(kt),Gt&&Gt.l(kt),Me=ln(),this.h()},h(){rt(m,"class","fas fa-trash"),rt(p,"class","icon is-small"),rt(l,"class","button is-fullwidth is-link is-light"),rt(o,"class","column py-0"),rt(i,"class","columns is-vcentered"),rt(q,"class","label"),rt(U,"class","field-label is-normal"),rt(ke,"class","input is-small"),rt(ke,"type","text"),rt(ke,"placeholder","Name"),ke.value=Pe=`${n[1][0].lng.toFixed(6)}`,ke.readOnly=!0,rt(re,"class","column is-half px-0"),rt(ye,"class","input is-small"),rt(ye,"type","text"),rt(ye,"placeholder","Name"),ye.value=me=`${n[1][0].lat.toFixed(6)}`,ye.readOnly=!0,rt(pe,"class","column is-half px-0"),rt(ne,"class","columns pt-1"),rt(se,"class","field"),rt(J,"class","field-body"),rt(z,"class","field is-horizontal px-3")},m(kt,Xt){vi(kt,i,Xt),We(i,o),We(o,l),We(l,p),We(p,m),We(l,b),We(l,h),We(h,E),vi(kt,L,Xt),vi(kt,z,Xt),We(z,U),We(U,q),We(q,B),We(z,K),We(z,J),We(J,se),We(se,ne),We(ne,re),We(re,ke),We(ne,be),We(ne,pe),We(pe,ye),vi(kt,tt,Xt),_t&&_t.m(kt,Xt),vi(kt,nt,Xt),pt&&pt.m(kt,Xt),vi(kt,Se,Xt),Gt&&Gt.m(kt,Xt),vi(kt,Me,Xt),Ge||(Xe=rn(l,"click",n[6]),Ge=!0)},p(kt,Xt){Xt&2&&Pe!==(Pe=`${kt[1][0].lng.toFixed(6)}`)&&ke.value!==Pe&&(ke.value=Pe),Xt&2&&me!==(me=`${kt[1][0].lat.toFixed(6)}`)&&ye.value!==me&&(ye.value=me),kt[1].length>1?_t?_t.p(kt,Xt):(_t=w_(kt),_t.c(),_t.m(nt.parentNode,nt)):_t&&(_t.d(1),_t=null),kt[3]?pt?pt.p(kt,Xt):(pt=x_(kt),pt.c(),pt.m(Se.parentNode,Se)):pt&&(pt.d(1),pt=null),kt[4]?Gt?Gt.p(kt,Xt):(Gt=k_(kt),Gt.c(),Gt.m(Me.parentNode,Me)):Gt&&(Gt.d(1),Gt=null)},d(kt){kt&&Ee(i),kt&&Ee(L),kt&&Ee(z),kt&&Ee(tt),_t&&_t.d(kt),kt&&Ee(nt),pt&&pt.d(kt),kt&&Ee(Se),Gt&&Gt.d(kt),kt&&Ee(Me),Ge=!1,Xe()}}}function w_(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J;return{c(){i=st("div"),o=st("div"),l=st("label"),p=Nr("To"),m=Yi(),b=st("div"),h=st("div"),E=st("div"),L=st("div"),z=st("input"),q=Yi(),B=st("div"),K=st("input"),this.h()},l(se){i=at(se,"DIV",{class:!0});var ne=ft(i);o=at(ne,"DIV",{class:!0});var re=ft(o);l=at(re,"LABEL",{class:!0});var ke=ft(l);p=Fr(ke,"To"),ke.forEach(Ee),re.forEach(Ee),m=Ji(ne),b=at(ne,"DIV",{class:!0});var Pe=ft(b);h=at(Pe,"DIV",{class:!0});var be=ft(h);E=at(be,"DIV",{class:!0});var pe=ft(E);L=at(pe,"DIV",{class:!0});var ye=ft(L);z=at(ye,"INPUT",{class:!0,type:!0,placeholder:!0}),ye.forEach(Ee),q=Ji(pe),B=at(pe,"DIV",{class:!0});var me=ft(B);K=at(me,"INPUT",{class:!0,type:!0,placeholder:!0}),me.forEach(Ee),pe.forEach(Ee),be.forEach(Ee),Pe.forEach(Ee),ne.forEach(Ee),this.h()},h(){rt(l,"class","label"),rt(o,"class","field-label is-normal"),rt(z,"class","input is-small"),rt(z,"type","text"),rt(z,"placeholder","Name"),z.value=U=`${n[1][n[1].length-1].lng.toFixed(6)}`,z.readOnly=!0,rt(L,"class","column is-half px-0"),rt(K,"class","input is-small"),rt(K,"type","text"),rt(K,"placeholder","Name"),K.value=J=`${n[1][n[1].length-1].lat.toFixed(6)}`,K.readOnly=!0,rt(B,"class","column is-half px-0"),rt(E,"class","columns pt-1 is-mobile"),rt(h,"class","field"),rt(b,"class","field-body"),rt(i,"class","field is-horizontal px-3")},m(se,ne){vi(se,i,ne),We(i,o),We(o,l),We(l,p),We(i,m),We(i,b),We(b,h),We(h,E),We(E,L),We(L,z),We(E,q),We(E,B),We(B,K)},p(se,ne){ne&2&&U!==(U=`${se[1][se[1].length-1].lng.toFixed(6)}`)&&z.value!==U&&(z.value=U),ne&2&&J!==(J=`${se[1][se[1].length-1].lat.toFixed(6)}`)&&K.value!==J&&(K.value=J)},d(se){se&&Ee(i)}}}function x_(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J,se,ne,re;return{c(){i=st("div"),o=st("div"),l=st("div"),p=st("label"),m=Nr("Length"),b=Yi(),h=st("div"),E=st("input"),z=Yi(),U=st("div"),q=st("div"),B=st("label"),K=Nr("Time"),J=Yi(),se=st("div"),ne=st("input"),this.h()},l(ke){i=at(ke,"DIV",{class:!0});var Pe=ft(i);o=at(Pe,"DIV",{class:!0});var be=ft(o);l=at(be,"DIV",{class:!0});var pe=ft(l);p=at(pe,"LABEL",{class:!0});var ye=ft(p);m=Fr(ye,"Length"),ye.forEach(Ee),b=Ji(pe),h=at(pe,"DIV",{class:!0});var me=ft(h);E=at(me,"INPUT",{class:!0,type:!0}),me.forEach(Ee),pe.forEach(Ee),be.forEach(Ee),z=Ji(Pe),U=at(Pe,"DIV",{class:!0});var tt=ft(U);q=at(tt,"DIV",{class:!0});var nt=ft(q);B=at(nt,"LABEL",{class:!0});var Se=ft(B);K=Fr(Se,"Time"),Se.forEach(Ee),J=Ji(nt),se=at(nt,"DIV",{class:!0});var Me=ft(se);ne=at(Me,"INPUT",{class:!0,type:!0}),Me.forEach(Ee),nt.forEach(Ee),tt.forEach(Ee),Pe.forEach(Ee),this.h()},h(){rt(p,"class","label is-small"),rt(E,"class","input is-small"),rt(E,"type","text"),E.value=L=`${n[3].length} km`,E.readOnly=!0,rt(h,"class","control"),rt(l,"class","field"),rt(o,"class","column is-half px-0"),rt(B,"class","label is-small"),rt(ne,"class","input is-small"),rt(ne,"type","text"),ne.value=re=`${n[3].time} min`,ne.readOnly=!0,rt(se,"class","control"),rt(q,"class","field"),rt(U,"class","column is-half px-0 is-mobile"),rt(i,"class","columns px-3 is-mobile")},m(ke,Pe){vi(ke,i,Pe),We(i,o),We(o,l),We(l,p),We(p,m),We(l,b),We(l,h),We(h,E),We(i,z),We(i,U),We(U,q),We(q,B),We(B,K),We(q,J),We(q,se),We(se,ne)},p(ke,Pe){Pe&8&&L!==(L=`${ke[3].length} km`)&&E.value!==L&&(E.value=L),Pe&8&&re!==(re=`${ke[3].time} min`)&&ne.value!==re&&(ne.value=re)},d(ke){ke&&Ee(i)}}}function k_(n){let i,o,l,p,m,b;return{c(){i=st("div"),o=st("button"),l=Yi(),p=Nr(n[4]),this.h()},l(h){i=at(h,"DIV",{class:!0});var E=ft(i);o=at(E,"BUTTON",{class:!0}),ft(o).forEach(Ee),l=Ji(E),p=Fr(E,n[4]),E.forEach(Ee),this.h()},h(){rt(o,"class","delete"),rt(i,"class","notification is-warning")},m(h,E){vi(h,i,E),We(i,o),We(i,l),We(i,p),m||(b=rn(o,"click",n[8]),m=!0)},p(h,E){E&16&&os(p,h[4])},d(h){h&&Ee(i),m=!1,b()}}}function _S(n){let i,o=sn.valhalla&&pS(n);return{c(){o&&o.c(),i=ln()},l(l){o&&o.l(l),i=ln()},m(l,p){o&&o.m(l,p),vi(l,i,p)},p(l,[p]){sn.valhalla&&o.p(l,p)},i:ao,o:ao,d(l){o&&o.d(l),l&&Ee(i)}}}const q0="routing-controls-source-line",a2="routing-controls-layer-line",l2="routing-controls-layer-line-label",u2="routing-controls-layer-symbol",kf="routing-controls-source-symbol";function bS(n,i,o){let l,p;ul(n,El,be=>o(9,l=be)),ul(n,vf,be=>o(1,p=be));const m=sn.valhalla.options.routing;let b=!1,h=Kh[0].value,E,L="";E0(()=>{p||vf.update(()=>[])}),J_(()=>{b===!0&&q()});const z=()=>{b?q():U()},U=()=>{l&&(l.getCanvas().style.cursor="crosshair",o(2,b=!0),l.on("click",B),l.fire("routing.on"))},q=()=>{o(2,b=!1),l&&(l.getCanvas().style.cursor="",l.off("click",B),l.fire("routing.off"))},B=be=>{const pe=be.lngLat;p||vf.update(()=>[]),vf.update(()=>[...p,pe])},K=()=>{l&&(l.getLayer(a2)&&l.removeLayer(a2),l.getLayer(l2)&&l.removeLayer(l2),l.getLayer(u2)&&l.removeLayer(u2),l.getSource(q0)&&l.removeSource(q0),l.getSource(kf)&&l.removeSource(kf)),vf.update(()=>[]),o(4,L="")},J=()=>{if(!p||p&&p.length<2){o(3,E=void 0);return}o(4,L="");const be=`${sn.valhalla.url}/route`,pe={locations:p.map(me=>({lon:me.lng,lat:me.lat})),costing:h,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},ye=`${be}?json=${JSON.stringify(pe)}`;fetch(ye).then(me=>me.json()).then(me=>{if("error"in me)throw p.pop(),new Error(`${me.status} (${me.status_code}): ${me.error} (${me.error_code})`);let tt=me.trip.legs.map(Ge=>re(Ge.shape)),nt=[];tt.forEach(Ge=>{nt=[...nt,...Ge]}),o(3,E=me.trip.summary),o(3,E.length=Number(E.length.toFixed(2)),E),o(3,E.time=Number((E.time/60).toFixed()),E);const Se={type:"FeatureCollection",features:me.trip.legs.map(Ge=>{const Xe=re(Ge.shape),_t={length:Number(Ge.summary.length.toFixed(2)),time:Number((Ge.summary.time/60).toFixed())};return se(Xe,_t)})},Me=ne(p.map(Ge=>[Ge.lng,Ge.lat]));l&&(l.getSource(q0)?(l.getSource(q0).setData(Se),l.getSource(kf).setData(Me)):(l.addSource(q0,{type:"geojson",data:Se}),l.addSource(kf,{type:"geojson",data:Me}),l.addLayer({id:a2,type:"line",source:q0,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),l.addLayer({id:l2,type:"symbol",source:q0,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":m.font,"text-size":m.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}}),l.addLayer({id:u2,type:"symbol",source:kf,layout:{"icon-image":m.iconImage,"icon-size":m.iconSize,"text-field":["get","text"],"text-font":m.font,"text-size":m.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}})))}).catch(me=>{o(4,L=me.message)})},se=(be=[],pe={})=>({type:"Feature",properties:pe,geometry:{type:"LineString",coordinates:be}}),ne=(be=[])=>({type:"FeatureCollection",features:be.map((pe,ye)=>{let me=(ye+1).toString();return ye===0?me="From":ye===be.length-1&&(me="To"),{type:"Feature",properties:{text:me},geometry:{type:"Point",coordinates:pe}}})}),re=(be,pe=6)=>{let ye=0,me=0,tt=0,nt=[],Se=0,Me=0,Ge=null,Xe,_t,pt=Math.pow(10,pe||6);for(;ye<be.length;){Ge=null,Se=0,Me=0;do Ge=be.charCodeAt(ye++)-63,Me|=(Ge&31)<<Se,Se+=5;while(Ge>=32);Xe=Me&1?~(Me>>1):Me>>1,Se=Me=0;do Ge=be.charCodeAt(ye++)-63,Me|=(Ge&31)<<Se,Se+=5;while(Ge>=32);_t=Me&1?~(Me>>1):Me>>1,me+=Xe,tt+=_t,nt.push([tt/pt,me/pt])}return nt},ke=be=>{o(0,h=be.value)},Pe=()=>o(4,L="");return n.$$.update=()=>{n.$$.dirty&2&&J(),n.$$.dirty&1&&J()},[h,p,b,E,L,z,K,ke,Pe]}class wS extends Xo{constructor(i){super(),Yo(this,i,bS,_S,qo,{})}}function xS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0,"aria-hidden":!0,style:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-angle-up"),rt(i,"aria-hidden","true"),ih(i,"color","white")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function kS(n){let i;return{c(){i=st("i"),this.h()},l(o){i=at(o,"I",{class:!0,"aria-hidden":!0,style:!0}),ft(i).forEach(Ee),this.h()},h(){rt(i,"class","fas fa-angle-down"),rt(i,"aria-hidden","true"),ih(i,"color","white")},m(o,l){vi(o,i,l)},d(o){o&&Ee(i)}}}function A_(n){let i,o;const l=n[3].default,p=qu(l,n,n[2],null);return{c(){i=st("div"),p&&p.c(),this.h()},l(m){i=at(m,"DIV",{class:!0});var b=ft(i);p&&p.l(b),b.forEach(Ee),this.h()},h(){rt(i,"class","container m-2")},m(m,b){vi(m,i,b),p&&p.m(i,null),o=!0},p(m,b){p&&p.p&&(!o||b&4)&&Vu(p,l,m,m[2],o?Hu(l,m[2],b,null):Gu(m[2]),null)},i(m){o||(rr(p,m),o=!0)},o(m){Cr(p,m),o=!1},d(m){m&&Ee(i),p&&p.d(m)}}}function AS(n){let i,o,l,p,m,b,h,E,L;function z(K,J){return K[0]?kS:xS}let U=z(n),q=U(n),B=n[0]&&A_(n);return{c(){i=st("nav"),o=st("p"),l=st("span"),q.c(),p=Yi(),m=Nr(n[1]),b=Yi(),B&&B.c(),this.h()},l(K){i=at(K,"NAV",{class:!0});var J=ft(i);o=at(J,"P",{class:!0});var se=ft(o);l=at(se,"SPAN",{class:!0});var ne=ft(l);q.l(ne),ne.forEach(Ee),p=Ji(se),m=Fr(se,n[1]),se.forEach(Ee),b=Ji(J),B&&B.l(J),J.forEach(Ee),this.h()},h(){rt(l,"class","panel-icon mt-1"),rt(o,"class","panel-heading p-2 header-menu svelte-n9a8yy"),rt(i,"class","panel is-info my-1 mx-1")},m(K,J){vi(K,i,J),We(i,o),We(o,l),q.m(l,null),We(o,p),We(o,m),We(i,b),B&&B.m(i,null),h=!0,E||(L=rn(o,"click",n[4]),E=!0)},p(K,[J]){U!==(U=z(K))&&(q.d(1),q=U(K),q&&(q.c(),q.m(l,null))),(!h||J&2)&&os(m,K[1]),K[0]?B?(B.p(K,J),J&1&&rr(B,1)):(B=A_(K),B.c(),rr(B,1),B.m(i,null)):B&&(Js(),Cr(B,1,1,()=>{B=null}),Ks())},i(K){h||(rr(B),h=!0)},o(K){Cr(B),h=!1},d(K){K&&Ee(i),q.d(),B&&B.d(),E=!1,L()}}}function ES(n,i,o){let{$$slots:l={},$$scope:p}=i,{title:m}=i,{isPanelOpen:b=!1}=i;const h=()=>o(0,b=!b);return n.$$set=E=>{"title"in E&&o(1,m=E.title),"isPanelOpen"in E&&o(0,b=E.isPanelOpen),"$$scope"in E&&o(2,p=E.$$scope)},[b,m,p,l,h]}class U2 extends Xo{constructor(i){super(),Yo(this,i,ES,AS,qo,{title:1,isPanelOpen:0})}}function E_(n){let i,o,l,p=sn.elevation&&SS(n),m=sn.valhalla&&CS(n);return{c(){p&&p.c(),i=Yi(),m&&m.c(),o=ln()},l(b){p&&p.l(b),i=Ji(b),m&&m.l(b),o=ln()},m(b,h){p&&p.m(b,h),vi(b,i,h),m&&m.m(b,h),vi(b,o,h),l=!0},p(b,h){sn.elevation&&p.p(b,h),sn.valhalla&&m.p(b,h)},i(b){l||(rr(p),rr(m),l=!0)},o(b){Cr(p),Cr(m),l=!1},d(b){p&&p.d(b),b&&Ee(i),m&&m.d(b),b&&Ee(o)}}}function SS(n){let i,o,l;function p(b){n[4](b)}let m={title:"Measuring tool",$$slots:{default:[IS]},$$scope:{ctx:n}};return n[1]!==void 0&&(m.isPanelOpen=n[1]),i=new U2({props:m}),po.push(()=>Ts(i,"isPanelOpen",p)),{c(){ko(i.$$.fragment)},l(b){Ao(i.$$.fragment,b)},m(b,h){Eo(i,b,h),l=!0},p(b,h){const E={};h&128&&(E.$$scope={dirty:h,ctx:b}),!o&&h&2&&(o=!0,E.isPanelOpen=b[1],Ls(()=>o=!1)),i.$set(E)},i(b){l||(rr(i.$$.fragment,b),l=!0)},o(b){Cr(i.$$.fragment,b),l=!1},d(b){So(i,b)}}}function IS(n){let i,o;return i=new $E({}),{c(){ko(i.$$.fragment)},l(l){Ao(i.$$.fragment,l)},m(l,p){Eo(i,l,p),o=!0},i(l){o||(rr(i.$$.fragment,l),o=!0)},o(l){Cr(i.$$.fragment,l),o=!1},d(l){So(i,l)}}}function CS(n){let i,o,l,p,m,b;function h(U){n[5](U)}let E={title:"Routing tool",$$slots:{default:[TS]},$$scope:{ctx:n}};n[2]!==void 0&&(E.isPanelOpen=n[2]),i=new U2({props:E}),po.push(()=>Ts(i,"isPanelOpen",h));function L(U){n[6](U)}let z={title:"Isochrone analysis",$$slots:{default:[LS]},$$scope:{ctx:n}};return n[3]!==void 0&&(z.isPanelOpen=n[3]),p=new U2({props:z}),po.push(()=>Ts(p,"isPanelOpen",L)),{c(){ko(i.$$.fragment),l=Yi(),ko(p.$$.fragment)},l(U){Ao(i.$$.fragment,U),l=Ji(U),Ao(p.$$.fragment,U)},m(U,q){Eo(i,U,q),vi(U,l,q),Eo(p,U,q),b=!0},p(U,q){const B={};q&128&&(B.$$scope={dirty:q,ctx:U}),!o&&q&4&&(o=!0,B.isPanelOpen=U[2],Ls(()=>o=!1)),i.$set(B);const K={};q&128&&(K.$$scope={dirty:q,ctx:U}),!m&&q&8&&(m=!0,K.isPanelOpen=U[3],Ls(()=>m=!1)),p.$set(K)},i(U){b||(rr(i.$$.fragment,U),rr(p.$$.fragment,U),b=!0)},o(U){Cr(i.$$.fragment,U),Cr(p.$$.fragment,U),b=!1},d(U){So(i,U),U&&Ee(l),So(p,U)}}}function TS(n){let i,o;return i=new wS({}),{c(){ko(i.$$.fragment)},l(l){Ao(i.$$.fragment,l)},m(l,p){Eo(i,l,p),o=!0},i(l){o||(rr(i.$$.fragment,l),o=!0)},o(l){Cr(i.$$.fragment,l),o=!1},d(l){So(i,l)}}}function LS(n){let i,o;return i=new dS({}),{c(){ko(i.$$.fragment)},l(l){Ao(i.$$.fragment,l)},m(l,p){Eo(i,l,p),o=!0},i(l){o||(rr(i.$$.fragment,l),o=!0)},o(l){Cr(i.$$.fragment,l),o=!1},d(l){So(i,l)}}}function PS(n){let i,o,l=n[0]&&E_(n);return{c(){i=st("div"),l&&l.c(),this.h()},l(p){i=at(p,"DIV",{class:!0});var m=ft(i);l&&l.l(m),m.forEach(Ee),this.h()},h(){rt(i,"class","panel-content svelte-1i87d9t")},m(p,m){vi(p,i,m),l&&l.m(i,null),o=!0},p(p,[m]){p[0]?l?(l.p(p,m),m&1&&rr(l,1)):(l=E_(p),l.c(),rr(l,1),l.m(i,null)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){p&&Ee(i),l&&l.d()}}}function MS(n,i,o){let{isAdvancedTabVisible:l=!1}=i,p=!0,m=!0,b=!1;function h(z){p=z,o(1,p)}function E(z){m=z,o(2,m)}function L(z){b=z,o(3,b)}return n.$$set=z=>{"isAdvancedTabVisible"in z&&o(0,l=z.isAdvancedTabVisible)},[l,p,m,b,h,E,L]}class DS extends Xo{constructor(i){super(),Yo(this,i,MS,PS,qo,{isAdvancedTabVisible:0})}}function S_(n,i,o){const l=n.slice();return l[19]=i[o],l}function I_(n,i,o){const l=n.slice();return l[19]=i[o],l}function C_(n,i,o){const l=n.slice();return l[19]=i[o],l}function T_(n,i,o){const l=n.slice();return l[19]=i[o],l}function L_(n,i,o){const l=n.slice();return l[19]=i[o],l}function P_(n){let i,o=n[19].properties.name+"",l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[19].properties.id,i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&32&&o!==(o=m[19].properties.name+"")&&os(l,o),b&32&&p!==(p=m[19].properties.id)&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function M_(n){let i,o,l,p,m,b,h,E,L=n[6],z=[];for(let U=0;U<L.length;U+=1)z[U]=D_(T_(n,L,U));return{c(){i=st("div"),o=st("div"),l=st("div"),p=st("select"),m=st("option"),b=Nr("Select district...");for(let U=0;U<z.length;U+=1)z[U].c();this.h()},l(U){i=at(U,"DIV",{class:!0});var q=ft(i);o=at(q,"DIV",{class:!0});var B=ft(o);l=at(B,"DIV",{class:!0});var K=ft(l);p=at(K,"SELECT",{});var J=ft(p);m=at(J,"OPTION",{});var se=ft(m);b=Fr(se,"Select district..."),se.forEach(Ee);for(let ne=0;ne<z.length;ne+=1)z[ne].l(J);J.forEach(Ee),K.forEach(Ee),B.forEach(Ee),q.forEach(Ee),this.h()},h(){m.__value="",m.value=m.__value,n[1]===void 0&&Aa(()=>n[11].call(p)),rt(l,"class","select is-fullwidth"),rt(o,"class","column is-full p-2"),rt(i,"class","columns")},m(U,q){vi(U,i,q),We(i,o),We(o,l),We(l,p),We(p,m),We(m,b);for(let B=0;B<z.length;B+=1)z[B].m(p,null);_s(p,n[1]),h||(E=rn(p,"change",n[11]),h=!0)},p(U,q){if(q&64){L=U[6];let B;for(B=0;B<L.length;B+=1){const K=T_(U,L,B);z[B]?z[B].p(K,q):(z[B]=D_(K),z[B].c(),z[B].m(p,null))}for(;B<z.length;B+=1)z[B].d(1);z.length=L.length}q&66&&_s(p,U[1])},d(U){U&&Ee(i),bs(z,U),h=!1,E()}}}function D_(n){let i,o=n[19].properties.name+"",l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[19].properties.id,i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&64&&o!==(o=m[19].properties.name+"")&&os(l,o),b&64&&p!==(p=m[19].properties.id)&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function z_(n){let i,o,l,p,m,b,h,E,L=n[7],z=[];for(let U=0;U<L.length;U+=1)z[U]=N_(C_(n,L,U));return{c(){i=st("div"),o=st("div"),l=st("div"),p=st("select"),m=st("option"),b=Nr("Select sector...");for(let U=0;U<z.length;U+=1)z[U].c();this.h()},l(U){i=at(U,"DIV",{class:!0});var q=ft(i);o=at(q,"DIV",{class:!0});var B=ft(o);l=at(B,"DIV",{class:!0});var K=ft(l);p=at(K,"SELECT",{});var J=ft(p);m=at(J,"OPTION",{});var se=ft(m);b=Fr(se,"Select sector..."),se.forEach(Ee);for(let ne=0;ne<z.length;ne+=1)z[ne].l(J);J.forEach(Ee),K.forEach(Ee),B.forEach(Ee),q.forEach(Ee),this.h()},h(){m.__value="",m.value=m.__value,n[2]===void 0&&Aa(()=>n[12].call(p)),rt(l,"class","select is-fullwidth"),rt(o,"class","column is-full p-2"),rt(i,"class","columns")},m(U,q){vi(U,i,q),We(i,o),We(o,l),We(l,p),We(p,m),We(m,b);for(let B=0;B<z.length;B+=1)z[B].m(p,null);_s(p,n[2]),h||(E=rn(p,"change",n[12]),h=!0)},p(U,q){if(q&128){L=U[7];let B;for(B=0;B<L.length;B+=1){const K=C_(U,L,B);z[B]?z[B].p(K,q):(z[B]=N_(K),z[B].c(),z[B].m(p,null))}for(;B<z.length;B+=1)z[B].d(1);z.length=L.length}q&132&&_s(p,U[2])},d(U){U&&Ee(i),bs(z,U),h=!1,E()}}}function N_(n){let i,o=n[19].properties.name+"",l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[19].properties.id,i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&128&&o!==(o=m[19].properties.name+"")&&os(l,o),b&128&&p!==(p=m[19].properties.id)&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function F_(n){let i,o,l,p,m,b,h,E,L=n[8],z=[];for(let U=0;U<L.length;U+=1)z[U]=B_(I_(n,L,U));return{c(){i=st("div"),o=st("div"),l=st("div"),p=st("select"),m=st("option"),b=Nr("Select cell...");for(let U=0;U<z.length;U+=1)z[U].c();this.h()},l(U){i=at(U,"DIV",{class:!0});var q=ft(i);o=at(q,"DIV",{class:!0});var B=ft(o);l=at(B,"DIV",{class:!0});var K=ft(l);p=at(K,"SELECT",{});var J=ft(p);m=at(J,"OPTION",{});var se=ft(m);b=Fr(se,"Select cell..."),se.forEach(Ee);for(let ne=0;ne<z.length;ne+=1)z[ne].l(J);J.forEach(Ee),K.forEach(Ee),B.forEach(Ee),q.forEach(Ee),this.h()},h(){m.__value="",m.value=m.__value,n[3]===void 0&&Aa(()=>n[13].call(p)),rt(l,"class","select is-fullwidth"),rt(o,"class","column is-full p-2"),rt(i,"class","columns")},m(U,q){vi(U,i,q),We(i,o),We(o,l),We(l,p),We(p,m),We(m,b);for(let B=0;B<z.length;B+=1)z[B].m(p,null);_s(p,n[3]),h||(E=rn(p,"change",n[13]),h=!0)},p(U,q){if(q&256){L=U[8];let B;for(B=0;B<L.length;B+=1){const K=I_(U,L,B);z[B]?z[B].p(K,q):(z[B]=B_(K),z[B].c(),z[B].m(p,null))}for(;B<z.length;B+=1)z[B].d(1);z.length=L.length}q&264&&_s(p,U[3])},d(U){U&&Ee(i),bs(z,U),h=!1,E()}}}function B_(n){let i,o=n[19].properties.name+"",l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[19].properties.id,i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&256&&o!==(o=m[19].properties.name+"")&&os(l,o),b&256&&p!==(p=m[19].properties.id)&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function R_(n){let i,o,l,p,m,b,h,E,L=n[9],z=[];for(let U=0;U<L.length;U+=1)z[U]=O_(S_(n,L,U));return{c(){i=st("div"),o=st("div"),l=st("div"),p=st("select"),m=st("option"),b=Nr("Select village...");for(let U=0;U<z.length;U+=1)z[U].c();this.h()},l(U){i=at(U,"DIV",{class:!0});var q=ft(i);o=at(q,"DIV",{class:!0});var B=ft(o);l=at(B,"DIV",{class:!0});var K=ft(l);p=at(K,"SELECT",{});var J=ft(p);m=at(J,"OPTION",{});var se=ft(m);b=Fr(se,"Select village..."),se.forEach(Ee);for(let ne=0;ne<z.length;ne+=1)z[ne].l(J);J.forEach(Ee),K.forEach(Ee),B.forEach(Ee),q.forEach(Ee),this.h()},h(){m.__value="",m.value=m.__value,n[4]===void 0&&Aa(()=>n[14].call(p)),rt(l,"class","select is-fullwidth"),rt(o,"class","column is-full p-2"),rt(i,"class","columns")},m(U,q){vi(U,i,q),We(i,o),We(o,l),We(l,p),We(p,m),We(m,b);for(let B=0;B<z.length;B+=1)z[B].m(p,null);_s(p,n[4]),h||(E=rn(p,"change",n[14]),h=!0)},p(U,q){if(q&512){L=U[9];let B;for(B=0;B<L.length;B+=1){const K=S_(U,L,B);z[B]?z[B].p(K,q):(z[B]=O_(K),z[B].c(),z[B].m(p,null))}for(;B<z.length;B+=1)z[B].d(1);z.length=L.length}q&528&&_s(p,U[4])},d(U){U&&Ee(i),bs(z,U),h=!1,E()}}}function O_(n){let i,o=n[19].properties.name+"",l,p;return{c(){i=st("option"),l=Nr(o),this.h()},l(m){i=at(m,"OPTION",{});var b=ft(i);l=Fr(b,o),b.forEach(Ee),this.h()},h(){i.__value=p=n[19].properties.id,i.value=i.__value},m(m,b){vi(m,i,b),We(i,l)},p(m,b){b&512&&o!==(o=m[19].properties.name+"")&&os(l,o),b&512&&p!==(p=m[19].properties.id)&&(i.__value=p,i.value=i.__value)},d(m){m&&Ee(i)}}}function zS(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K=n[5],J=[];for(let Pe=0;Pe<K.length;Pe+=1)J[Pe]=P_(L_(n,K,Pe));let se=n[0]&&M_(n),ne=n[0]&&n[1]&&z_(n),re=n[0]&&n[1]&&n[2]&&F_(n),ke=n[0]&&n[1]&&n[2]&&n[3]&&R_(n);return{c(){i=st("div"),o=st("div"),l=st("div"),p=st("select"),m=st("option"),b=Nr("Select province...");for(let Pe=0;Pe<J.length;Pe+=1)J[Pe].c();h=Yi(),se&&se.c(),E=Yi(),ne&&ne.c(),L=Yi(),re&&re.c(),z=Yi(),ke&&ke.c(),U=ln(),this.h()},l(Pe){i=at(Pe,"DIV",{class:!0});var be=ft(i);o=at(be,"DIV",{class:!0});var pe=ft(o);l=at(pe,"DIV",{class:!0});var ye=ft(l);p=at(ye,"SELECT",{});var me=ft(p);m=at(me,"OPTION",{});var tt=ft(m);b=Fr(tt,"Select province..."),tt.forEach(Ee);for(let nt=0;nt<J.length;nt+=1)J[nt].l(me);me.forEach(Ee),ye.forEach(Ee),pe.forEach(Ee),be.forEach(Ee),h=Ji(Pe),se&&se.l(Pe),E=Ji(Pe),ne&&ne.l(Pe),L=Ji(Pe),re&&re.l(Pe),z=Ji(Pe),ke&&ke.l(Pe),U=ln(),this.h()},h(){m.__value="",m.value=m.__value,n[0]===void 0&&Aa(()=>n[10].call(p)),rt(l,"class","select is-fullwidth"),rt(o,"class","column is-full p-2"),rt(i,"class","columns")},m(Pe,be){vi(Pe,i,be),We(i,o),We(o,l),We(l,p),We(p,m),We(m,b);for(let pe=0;pe<J.length;pe+=1)J[pe].m(p,null);_s(p,n[0]),vi(Pe,h,be),se&&se.m(Pe,be),vi(Pe,E,be),ne&&ne.m(Pe,be),vi(Pe,L,be),re&&re.m(Pe,be),vi(Pe,z,be),ke&&ke.m(Pe,be),vi(Pe,U,be),q||(B=rn(p,"change",n[10]),q=!0)},p(Pe,[be]){if(be&32){K=Pe[5];let pe;for(pe=0;pe<K.length;pe+=1){const ye=L_(Pe,K,pe);J[pe]?J[pe].p(ye,be):(J[pe]=P_(ye),J[pe].c(),J[pe].m(p,null))}for(;pe<J.length;pe+=1)J[pe].d(1);J.length=K.length}be&33&&_s(p,Pe[0]),Pe[0]?se?se.p(Pe,be):(se=M_(Pe),se.c(),se.m(E.parentNode,E)):se&&(se.d(1),se=null),Pe[0]&&Pe[1]?ne?ne.p(Pe,be):(ne=z_(Pe),ne.c(),ne.m(L.parentNode,L)):ne&&(ne.d(1),ne=null),Pe[0]&&Pe[1]&&Pe[2]?re?re.p(Pe,be):(re=F_(Pe),re.c(),re.m(z.parentNode,z)):re&&(re.d(1),re=null),Pe[0]&&Pe[1]&&Pe[2]&&Pe[3]?ke?ke.p(Pe,be):(ke=R_(Pe),ke.c(),ke.m(U.parentNode,U)):ke&&(ke.d(1),ke=null)},i:ao,o:ao,d(Pe){Pe&&Ee(i),bs(J,Pe),Pe&&Ee(h),se&&se.d(Pe),Pe&&Ee(E),ne&&ne.d(Pe),Pe&&Ee(L),re&&re.d(Pe),Pe&&Ee(z),ke&&ke.d(Pe),Pe&&Ee(U),q=!1,B()}}}function NS(n,i,o){let l;ul(n,El,pe=>o(15,l=pe));let p,m,b,h,E,L=[],z=[],U=[],q=[],B=[];const K=async pe=>{let ye;switch(pe){case"province":p&&(ye=L.filter(me=>me.properties.id===Number(p))[0]);break;case"district":m&&(ye=z.filter(me=>me.properties.id===Number(m))[0]);break;case"sector":b&&(ye=U.filter(me=>me.properties.id===Number(b))[0]);break;case"cell":h&&(ye=q.filter(me=>me.properties.id===Number(h))[0]);break;case"village":E&&(ye=B.filter(me=>me.properties.id===Number(E))[0]);break}if(se(ye),pe!=="village"){if(pe==="cell"&&p&&m&&b&&h){const me=`${sn.adminBoundary.url}/${p}/${m}/${b}/${h}/village.geojson`;o(9,B=await J(me)),o(4,E="")}else if(pe==="sector"&&p&&m&&b){const me=`${sn.adminBoundary.url}/${p}/${m}/${b}/cell.geojson`;o(8,q=await J(me)),o(9,B=[]),o(3,h=""),o(4,E="")}else if(pe==="district"&&p&&m){const me=`${sn.adminBoundary.url}/${p}/${m}/sector.geojson`;o(7,U=await J(me)),o(8,q=[]),o(9,B=[]),o(2,b=""),o(3,h=""),o(4,E="")}else if(pe==="province"&&p){const me=`${sn.adminBoundary.url}/${p}/district.geojson`;o(6,z=await J(me)),o(7,U=[]),o(8,q=[]),o(9,B=[]),o(1,m=""),o(2,b=""),o(3,h=""),o(4,E="")}else if(L.length===0){const me=`${sn.adminBoundary.url}/province.geojson`;o(5,L=await J(me)),o(6,z=[]),o(7,U=[]),o(8,q=[]),o(9,B=[]),o(0,p=""),o(1,m=""),o(2,b=""),o(3,h=""),o(4,E="")}}},J=async pe=>(await(await fetch(pe)).json()).features,se=pe=>{if(!pe)return;const ye="selected-boundary";"bbox"in pe&&l.fitBounds(pe.bbox);const me={type:"FeatureCollection",features:[pe]};l.getLayer(ye)?l.getSource(ye).setData(me):(l.addSource(ye,{type:"geojson",data:me}),l.addLayer({id:ye,type:"fill",source:ye,paint:{"fill-color":"rgba(255, 0, 0, 1)","fill-outline-color":"rgba(255, 0, 0, 1)","fill-opacity":.1},filter:["==","$type","Polygon"]}))};function ne(){p=Uu(this),o(0,p),o(5,L)}function re(){m=Uu(this),o(1,m),o(6,z)}function ke(){b=Uu(this),o(2,b),o(7,U)}function Pe(){h=Uu(this),o(3,h),o(8,q)}function be(){E=Uu(this),o(4,E),o(9,B)}return n.$$.update=()=>{n.$$.dirty&1&&K("province"),n.$$.dirty&2&&K("district"),n.$$.dirty&4&&K("sector"),n.$$.dirty&8&&K("cell"),n.$$.dirty&16&&K("village")},[p,m,b,h,E,L,z,U,q,B,ne,re,ke,Pe,be]}class FS extends Xo{constructor(i){super(),Yo(this,i,NS,zS,qo,{})}}function j_(n){let i,o,l=sn.adminBoundary&&BS();return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p:ao,i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function BS(n){let i,o,l,p,m,b,h,E;return h=new FS({}),{c(){i=st("div"),o=st("div"),l=st("p"),p=Nr("Zoom to admin"),m=Yi(),b=st("div"),ko(h.$$.fragment),this.h()},l(L){i=at(L,"DIV",{class:!0});var z=ft(i);o=at(z,"DIV",{class:!0});var U=ft(o);l=at(U,"P",{class:!0});var q=ft(l);p=Fr(q,"Zoom to admin"),q.forEach(Ee),U.forEach(Ee),m=Ji(z),b=at(z,"DIV",{class:!0});var B=ft(b);Ao(h.$$.fragment,B),B.forEach(Ee),z.forEach(Ee),this.h()},h(){rt(l,"class","title is-6"),rt(o,"class","card-content"),rt(b,"class","content mx-4 mb-4"),rt(i,"class","card")},m(L,z){vi(L,i,z),We(i,o),We(o,l),We(l,p),We(i,m),We(i,b),Eo(h,b,null),E=!0},i(L){E||(rr(h.$$.fragment,L),E=!0)},o(L){Cr(h.$$.fragment,L),E=!1},d(L){L&&Ee(i),So(h)}}}function RS(n){let i,o,l=n[0]&&j_();return{c(){l&&l.c(),i=ln()},l(p){l&&l.l(p),i=ln()},m(p,m){l&&l.m(p,m),vi(p,i,m),o=!0},p(p,[m]){p[0]?l?(l.p(p,m),m&1&&rr(l,1)):(l=j_(),l.c(),rr(l,1),l.m(i.parentNode,i)):l&&(Js(),Cr(l,1,1,()=>{l=null}),Ks())},i(p){o||(rr(l),o=!0)},o(p){Cr(l),o=!1},d(p){l&&l.d(p),p&&Ee(i)}}}function OS(n,i,o){let{isSearchTabVisible:l=!1}=i;return n.$$set=p=>{"isSearchTabVisible"in p&&o(0,l=p.isSearchTabVisible)},[l]}class jS extends Xo{constructor(i){super(),Yo(this,i,OS,RS,qo,{isSearchTabVisible:0})}}function U_(n,i,o){const l=n.slice();return l[7]=i[o],l}function q_(n){let i,o,l,p,m,b,h=n[7].label+"",E,L,z,U,q,B;function K(){return n[5](n[7])}return{c(){i=st("li"),o=st("a"),l=st("span"),p=st("i"),m=Yi(),b=st("span"),E=Nr(h),z=Yi(),U=st("li"),this.h()},l(J){i=at(J,"LI",{class:!0});var se=ft(i);o=at(se,"A",{});var ne=ft(o);l=at(ne,"SPAN",{class:!0});var re=ft(l);p=at(re,"I",{class:!0,"aria-hidden":!0}),ft(p).forEach(Ee),re.forEach(Ee),m=Ji(ne),b=at(ne,"SPAN",{});var ke=ft(b);E=Fr(ke,h),ke.forEach(Ee),ne.forEach(Ee),se.forEach(Ee),z=Ji(J),U=at(J,"LI",{}),ft(U).forEach(Ee),this.h()},h(){rt(p,"class",Bf(n[7].icon)+" svelte-l2fxy3"),rt(p,"aria-hidden","true"),rt(l,"class","icon ml-2"),rt(i,"class",L=n[0].label===n[7].label?"is-active":"")},m(J,se){vi(J,i,se),We(i,o),We(o,l),We(l,p),We(o,m),We(o,b),We(b,E),vi(J,z,se),vi(J,U,se),q||(B=rn(i,"click",K),q=!0)},p(J,se){n=J,se&1&&L!==(L=n[0].label===n[7].label?"is-active":"")&&rt(i,"class",L)},d(J){J&&Ee(i),J&&Ee(z),J&&Ee(U),q=!1,B()}}}function US(n){let i,o,l,p,m,b,h,E,L,z,U,q,B,K,J=n[4],se=[];for(let ne=0;ne<J.length;ne+=1)se[ne]=q_(U_(n,J,ne));return L=new hk({props:{isLayersTabVisible:n[1]}}),U=new jS({props:{isSearchTabVisible:n[2]}}),B=new DS({props:{isAdvancedTabVisible:n[3]}}),{c(){i=st("div"),o=st("a"),l=st("img"),m=Yi(),b=st("div"),h=st("ul");for(let ne=0;ne<se.length;ne+=1)se[ne].c();E=Yi(),ko(L.$$.fragment),z=Yi(),ko(U.$$.fragment),q=Yi(),ko(B.$$.fragment),this.h()},l(ne){i=at(ne,"DIV",{class:!0});var re=ft(i);o=at(re,"A",{class:!0,href:!0});var ke=ft(o);l=at(ke,"IMG",{src:!0,alt:!0}),ke.forEach(Ee),m=Ji(re),b=at(re,"DIV",{class:!0});var Pe=ft(b);h=at(Pe,"UL",{});var be=ft(h);for(let pe=0;pe<se.length;pe+=1)se[pe].l(be);be.forEach(Ee),Pe.forEach(Ee),E=Ji(re),Ao(L.$$.fragment,re),z=Ji(re),Ao(U.$$.fragment,re),q=Ji(re),Ao(B.$$.fragment,re),re.forEach(Ee),this.h()},h(){K_(l.src,p=sn.logo)||rt(l,"src",p),rt(l,"alt","logo"),rt(o,"class","icon is-medium logo svelte-l2fxy3"),rt(o,"href",sn.url),rt(b,"class","tabs is-centered is-small mb-0"),rt(i,"class","drawer-content")},m(ne,re){vi(ne,i,re),We(i,o),We(o,l),We(i,m),We(i,b),We(b,h);for(let ke=0;ke<se.length;ke+=1)se[ke].m(h,null);We(i,E),Eo(L,i,null),We(i,z),Eo(U,i,null),We(i,q),Eo(B,i,null),K=!0},p(ne,[re]){if(re&17){J=ne[4];let pe;for(pe=0;pe<J.length;pe+=1){const ye=U_(ne,J,pe);se[pe]?se[pe].p(ye,re):(se[pe]=q_(ye),se[pe].c(),se[pe].m(h,null))}for(;pe<se.length;pe+=1)se[pe].d(1);se.length=J.length}const ke={};re&2&&(ke.isLayersTabVisible=ne[1]),L.$set(ke);const Pe={};re&4&&(Pe.isSearchTabVisible=ne[2]),U.$set(Pe);const be={};re&8&&(be.isAdvancedTabVisible=ne[3]),B.$set(be)},i(ne){K||(rr(L.$$.fragment,ne),rr(U.$$.fragment,ne),rr(B.$$.fragment,ne),K=!0)},o(ne){Cr(L.$$.fragment,ne),Cr(U.$$.fragment,ne),Cr(B.$$.fragment,ne),K=!1},d(ne){ne&&Ee(i),bs(se,ne),So(L),So(U),So(B)}}}function qS(n,i,o){let l=[{icon:"fas fa-layer-group",label:G0.LAYERS},{icon:"fas fa-search",label:G0.SEARCH},{icon:"fas fa-chart-simple",label:G0.ADVANCED}],p=l[0],m=!1,b=!1,h=!1;const E=()=>{switch(o(1,m=!1),o(2,b=!1),o(3,h=!1),p.label){case G0.LAYERS:o(1,m=!0);break;case G0.SEARCH:o(2,b=!0);break;case G0.ADVANCED:o(3,h=!0);break}},L=z=>o(0,p=z);return n.$$.update=()=>{n.$$.dirty&1&&E()},[p,m,b,h,l,L]}class VS extends Xo{constructor(i){super(),Yo(this,i,qS,US,qo,{})}}function GS(n){let i,o,l;return o=new VS({}),{c(){i=st("div"),ko(o.$$.fragment),this.h()},l(p){i=at(p,"DIV",{slot:!0});var m=ft(i);Ao(o.$$.fragment,m),m.forEach(Ee),this.h()},h(){rt(i,"slot","primary")},m(p,m){vi(p,i,m),Eo(o,i,null),l=!0},p:ao,i(p){l||(rr(o.$$.fragment,p),l=!0)},o(p){Cr(o.$$.fragment,p),l=!1},d(p){p&&Ee(i),So(o)}}}function V_(n){let i,o,l,p,m,b,h,E,L,z,U,q,B=n[0].search&&G_(n);function K(pe){n[8](pe)}function J(pe){n[9](pe)}let se={position:"top-right"};n[4]!==void 0&&(se.map=n[4]),n[3]!==void 0&&(se.customiseUrl=n[3]),o=new Zw({props:se}),po.push(()=>Ts(o,"map",K)),po.push(()=>Ts(o,"customiseUrl",J));function ne(pe){n[10](pe)}let re={showPrintableArea:!0,showCrosshair:!0,position:"top-right"};n[4]!==void 0&&(re.map=n[4]),b=new jw({props:re}),po.push(()=>Ts(b,"map",ne));function ke(pe){n[11](pe)}function Pe(pe){n[12](pe)}let be={};return n[4]!==void 0&&(be.map=n[4]),n[0].popup.target!==void 0&&(be.targetLayers=n[0].popup.target),L=new T3({props:be}),po.push(()=>Ts(L,"map",ke)),po.push(()=>Ts(L,"targetLayers",Pe)),{c(){B&&B.c(),i=Yi(),ko(o.$$.fragment),m=Yi(),ko(b.$$.fragment),E=Yi(),ko(L.$$.fragment)},l(pe){B&&B.l(pe),i=Ji(pe),Ao(o.$$.fragment,pe),m=Ji(pe),Ao(b.$$.fragment,pe),E=Ji(pe),Ao(L.$$.fragment,pe)},m(pe,ye){B&&B.m(pe,ye),vi(pe,i,ye),Eo(o,pe,ye),vi(pe,m,ye),Eo(b,pe,ye),vi(pe,E,ye),Eo(L,pe,ye),q=!0},p(pe,ye){pe[0].search?B?(B.p(pe,ye),ye&1&&rr(B,1)):(B=G_(pe),B.c(),rr(B,1),B.m(i.parentNode,i)):B&&(Js(),Cr(B,1,1,()=>{B=null}),Ks());const me={};!l&&ye&16&&(l=!0,me.map=pe[4],Ls(()=>l=!1)),!p&&ye&8&&(p=!0,me.customiseUrl=pe[3],Ls(()=>p=!1)),o.$set(me);const tt={};!h&&ye&16&&(h=!0,tt.map=pe[4],Ls(()=>h=!1)),b.$set(tt);const nt={};!z&&ye&16&&(z=!0,nt.map=pe[4],Ls(()=>z=!1)),!U&&ye&1&&(U=!0,nt.targetLayers=pe[0].popup.target,Ls(()=>U=!1)),L.$set(nt)},i(pe){q||(rr(B),rr(o.$$.fragment,pe),rr(b.$$.fragment,pe),rr(L.$$.fragment,pe),q=!0)},o(pe){Cr(B),Cr(o.$$.fragment,pe),Cr(b.$$.fragment,pe),Cr(L.$$.fragment,pe),q=!1},d(pe){B&&B.d(pe),pe&&Ee(i),So(o,pe),pe&&Ee(m),So(b,pe),pe&&Ee(E),So(L,pe)}}}function G_(n){let i,o,l,p;function m(E){n[6](E)}function b(E){n[7](E)}let h={position:"top-left"};return n[4]!==void 0&&(h.map=n[4]),n[0].search!==void 0&&(h.searchOption=n[0].search),i=new w3({props:h}),po.push(()=>Ts(i,"map",m)),po.push(()=>Ts(i,"searchOption",b)),{c(){ko(i.$$.fragment)},l(E){Ao(i.$$.fragment,E)},m(E,L){Eo(i,E,L),p=!0},p(E,L){const z={};!o&&L&16&&(o=!0,z.map=E[4],Ls(()=>o=!1)),!l&&L&1&&(l=!0,z.searchOption=E[0].search,Ls(()=>l=!1)),i.$set(z)},i(E){p||(rr(i.$$.fragment,E),p=!0)},o(E){Cr(i.$$.fragment,E),p=!1},d(E){So(i,E)}}}function HS(n){let i,o,l,p,m=n[2]&&V_(n);return{c(){i=st("div"),o=st("div"),l=Yi(),m&&m.c(),this.h()},l(b){i=at(b,"DIV",{slot:!0});var h=ft(i);o=at(h,"DIV",{class:!0,id:!0}),ft(o).forEach(Ee),l=Ji(h),m&&m.l(h),h.forEach(Ee),this.h()},h(){rt(o,"class","map svelte-dd1wie"),rt(o,"id","map"),rt(i,"slot","secondary")},m(b,h){vi(b,i,h),We(i,o),n[5](o),We(i,l),m&&m.m(i,null),p=!0},p(b,h){b[2]?m?(m.p(b,h),h&4&&rr(m,1)):(m=V_(b),m.c(),rr(m,1),m.m(i,null)):m&&(Js(),Cr(m,1,1,()=>{m=null}),Ks())},i(b){p||(rr(m),p=!0)},o(b){Cr(m),p=!1},d(b){b&&Ee(i),n[5](null),m&&m.d()}}}function WS(n){let i,o,l;function p(b){n[13](b)}let m={position:"top-right",$$slots:{secondary:[HS],primary:[GS]},$$scope:{ctx:n}};return n[4]!==void 0&&(m.map=n[4]),i=new fx({props:m}),po.push(()=>Ts(i,"map",p)),{c(){ko(i.$$.fragment)},l(b){Ao(i.$$.fragment,b)},m(b,h){Eo(i,b,h),l=!0},p(b,[h]){const E={};h&65567&&(E.$$scope={dirty:h,ctx:b}),!o&&h&16&&(o=!0,E.map=b[4],Ls(()=>o=!1)),i.$set(E)},i(b){l||(rr(i.$$.fragment,b),l=!0)},o(b){Cr(i.$$.fragment,b),l=!1},d(b){So(i,b)}}}function ZS(n,i,o){let l,p;ul(n,Rf,re=>o(15,l=re)),ul(n,El,re=>o(4,p=re));let m,b,h=!1;E0(async()=>{const re=new $_,ke=sn.styles[0],Pe=re.get();let be=ke;if(Pe){const nt=re.getMatchedStyleByTitle(sn.styles,Pe);nt&&(be=nt)}Rf.update(()=>be);const pe=new Yl.exports.Map({container:m,style:be.uri,center:sn.center,zoom:sn.zoom,hash:!0,attributionControl:!1});pe.addControl(new Yl.exports.AttributionControl({compact:!0}),"bottom-right");const ye=()=>{pe.loadImage(`${sn.basePath}/map-center.png`,(nt,Se)=>{if(nt)throw nt;pe.hasImage("map-center")||pe.addImage("map-center",Se),pe.getSource("center")||(b={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[pe.getCenter().lng,pe.getCenter().lat]}}]}},pe.addSource("center",b)),pe.getLayer("points")||pe.addLayer({id:"points",type:"symbol",source:"center",layout:{"icon-image":"map-center","icon-size":.3}})})};pe.on("load",()=>{o(2,h=!0),ye(),pe.addControl(new Yl.exports.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"top-right"),pe.addControl(new Yl.exports.FullscreenControl({container:document.querySelector("body")}),"top-right"),pe.addControl(new Yl.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),sn.terrain&&(pe.setMaxPitch(85),pe.addControl(new Yl.exports.TerrainControl(sn.terrain),"top-right")),pe.addControl(new Yl.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),sn.areaSwitcher&&pe.addControl(new x3(sn.areaSwitcher.areas),"top-right"),pe.on("moveend",()=>{pe.getSource("center")?(b.data.features[0].geometry.coordinates=[pe.getCenter().lng,pe.getCenter().lat],pe.getSource("center").setData(b.data)):ye()})});let me=["wss","pipeline","watersource"],tt;pe.on("mousemove","wss",function(nt){nt.features.length>0&&(tt&&me.forEach(Se=>{p.setFeatureState({source:"assets",sourceLayer:Se,id:tt},{hover:!1})}),tt=nt.features[0].id,me.forEach(Se=>{p.setFeatureState({source:"assets",sourceLayer:Se,id:tt},{hover:!0})}))}),pe.on("mouseleave","wss",function(){tt&&me.forEach(nt=>{p.setFeatureState({source:"assets",sourceLayer:nt,id:tt},{hover:!1})}),tt=null}),El.update(()=>pe)});let E=re=>{const ke=new URL(re);return ke.searchParams.set("style",l.title),ke.toString()};function L(re){po[re?"unshift":"push"](()=>{m=re,o(1,m)})}function z(re){p=re,El.set(p)}function U(re){n.$$.not_equal(sn.search,re)&&(sn.search=re,o(0,sn))}function q(re){p=re,El.set(p)}function B(re){E=re,o(3,E)}function K(re){p=re,El.set(p)}function J(re){p=re,El.set(p)}function se(re){n.$$.not_equal(sn.popup.target,re)&&(sn.popup.target=re,o(0,sn))}function ne(re){p=re,El.set(p)}return[sn,m,h,E,p,L,z,U,q,B,K,J,se,ne]}class XS extends Xo{constructor(i){super(),Yo(this,i,ZS,WS,qo,{})}}function YS(n){let i,o,l=sn.title+"",p,m,b,h,E,L,z,U,q,B,K,J;return K=new XS({}),{c(){i=st("sveltekit:head"),o=st("title"),p=Nr(l),m=Yi(),b=st("script"),E=Yi(),L=st("script"),z=Nr(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-3');`),U=Yi(),q=st("link"),B=Yi(),ko(K.$$.fragment),this.h()},l(se){i=at(se,"SVELTEKIT:HEAD",{});var ne=ft(i);o=at(ne,"TITLE",{});var re=ft(o);p=Fr(re,l),re.forEach(Ee),m=Ji(ne),b=at(ne,"SCRIPT",{src:!0});var ke=ft(b);ke.forEach(Ee),E=Ji(ne),L=at(ne,"SCRIPT",{});var Pe=ft(L);z=Fr(Pe,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-3');`),Pe.forEach(Ee),U=Ji(ne),q=at(ne,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0,referrerpolicy:!0}),ne.forEach(Ee),B=Ji(se),Ao(K.$$.fragment,se),this.h()},h(){b.async=!0,K_(b.src,h="https://www.googletagmanager.com/gtag/js?id=UA-170080825-3")||rt(b,"src",h),rt(q,"rel","stylesheet"),rt(q,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"),rt(q,"integrity","sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="),rt(q,"crossorigin","anonymous"),rt(q,"referrerpolicy","no-referrer")},m(se,ne){vi(se,i,ne),We(i,o),We(o,p),We(i,m),We(i,b),We(i,E),We(i,L),We(L,z),We(i,U),We(i,q),vi(se,B,ne),Eo(K,se,ne),J=!0},p:ao,i(se){J||(rr(K.$$.fragment,se),J=!0)},o(se){Cr(K.$$.fragment,se),J=!1},d(se){se&&Ee(i),se&&Ee(B),So(K,se)}}}function JS(n){const i=sn.styles[0];return Rf.update(()=>i),[]}class rI extends Xo{constructor(i){super(),Yo(this,i,JS,YS,qo,{})}}export{rI as P,Z4 as c};
