var X7=Object.defineProperty;var Y7=(t,e,r)=>e in t?X7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var li=(t,e,r)=>(Y7(t,typeof e!="symbol"?e+"":e,r),r);import{_ as Ip}from"./preload-helper.a4192956.js";import{y as mi,A as K7,B as J7,C as T1,D as Q7,E as oo,s as hi,f as Je,a as ir,g as Qe,h as vt,c as nr,d as he,i as dt,x as Ke,o as sh,j as ge,F as na,l as Fi,m as Bi,n as Dn,G as Vc,p as Ut,H as Ha,I as ka,J as Dr,K as mo,e as pn,L as pd,M as md,N as ui,O as vo,P as Ih,Q as Lp,k as Nn,R as er,S as Ks,T as Pf,U as e9,z as Ga,r as wl,u as xl,v as kl,w as Al,V as t9,W as zh,X as R2,Y as Tp,Z as Pp,_ as uc,$ as a8,q as Wa,a0 as Lh,a1 as f2,a2 as s8,a3 as P0,a4 as pc,a5 as mc,a6 as r9}from"./scheduler.f1554297.js";import{g as gn,t as et,c as yn,a as We,S as di,i as pi,b as Ht,d as Yt,m as $t,e as Gt,f as Xt}from"./index.a0125d55.js";import{w as zs,d as L0}from"./index.b2d4e7d3.js";const l8=typeof window<"u";let kb=l8?()=>window.performance.now():()=>Date.now(),u8=l8?t=>requestAnimationFrame(t):mi;const gd=new Set;function c8(t){gd.forEach(e=>{e.c(t)||(gd.delete(e),e.f())}),gd.size!==0&&u8(c8)}function i9(t){let e;return gd.size===0&&u8(c8),{promise:new Promise(r=>{gd.add(e={c:t,f:r})}),abort(){gd.delete(e)}}}const u_=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ab(t,e){const r=e.token={};function i(o,u,c,s){if(e.token!==r)return;e.resolved=s;let f=e.ctx;c!==void 0&&(f=f.slice(),f[c]=s);const y=o&&(e.current=o)(f);let b=!1;e.block&&(e.blocks?e.blocks.forEach((A,I)=>{I!==u&&A&&(gn(),et(A,1,1,()=>{e.blocks[I]===A&&(e.blocks[I]=null)}),yn())}):e.block.d(1),y.c(),We(y,1),y.m(e.mount(),e.anchor),b=!0),e.block=y,e.blocks&&(e.blocks[u]=y),b&&Q7()}if(K7(t)){const o=J7();if(t.then(u=>{T1(o),i(e.then,1,e.value,u),T1(null)},u=>{if(T1(o),i(e.catch,2,e.error,u),T1(null),!e.hasCatch)throw u}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function n9(t,e,r){const i=e.slice(),{resolved:o}=t;t.current===t.then&&(i[t.value]=o),t.current===t.catch&&(i[t.error]=o),t.block.p(i,r)}function dn(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function o9(t,e){et(t,1,1,()=>{e.delete(t.key)})}function a9(t,e,r,i,o,u,c,s,f,y,b,A){let I=t.length,C=u.length,N=I;const O={};for(;N--;)O[t[N].key]=N;const $=[],G=new Map,Z=new Map,ee=[];for(N=C;N--;){const we=A(o,u,N),ue=r(we);let ze=c.get(ue);ze?i&&ee.push(()=>ze.p(we,e)):(ze=y(ue,we),ze.c()),G.set(ue,$[N]=ze),ue in O&&Z.set(ue,Math.abs(N-O[ue]))}const te=new Set,_e=new Set;function le(we){We(we,1),we.m(s,b),c.set(we.key,we),b=we.first,C--}for(;I&&C;){const we=$[C-1],ue=t[I-1],ze=we.key,Ue=ue.key;we===ue?(b=we.first,I--,C--):G.has(Ue)?!c.has(ze)||te.has(ze)?le(we):_e.has(Ue)?I--:Z.get(ze)>Z.get(Ue)?(_e.add(ze),le(we)):(te.add(Ue),I--):(f(ue,c),I--)}for(;I--;){const we=t[I];G.has(we.key)||f(we,c)}for(;C;)le($[C-1]);return oo(ee),$}const s9=!0,l9=!1,rZ=Object.freeze(Object.defineProperty({__proto__:null,prerender:s9,ssr:l9},Symbol.toStringTag,{value:"Module"}));var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f8={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(bh,function(){var r,i,o;function u(s,f){if(!r)r=f;else if(!i)i=f;else{var y="var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk);",b={};r(b),o=f(b),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([y],{type:"text/javascript"})))}}u(["exports"],function(s){function f(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var y=b;function b(_,d){this.x=_,this.y=d}b.prototype={clone:function(){return new b(this.x,this.y)},add:function(_){return this.clone()._add(_)},sub:function(_){return this.clone()._sub(_)},multByPoint:function(_){return this.clone()._multByPoint(_)},divByPoint:function(_){return this.clone()._divByPoint(_)},mult:function(_){return this.clone()._mult(_)},div:function(_){return this.clone()._div(_)},rotate:function(_){return this.clone()._rotate(_)},rotateAround:function(_,d){return this.clone()._rotateAround(_,d)},matMult:function(_){return this.clone()._matMult(_)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(_){return this.x===_.x&&this.y===_.y},dist:function(_){return Math.sqrt(this.distSqr(_))},distSqr:function(_){var d=_.x-this.x,v=_.y-this.y;return d*d+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(_){return Math.atan2(this.y-_.y,this.x-_.x)},angleWith:function(_){return this.angleWithSep(_.x,_.y)},angleWithSep:function(_,d){return Math.atan2(this.x*d-this.y*_,this.x*_+this.y*d)},_matMult:function(_){var d=_[2]*this.x+_[3]*this.y;return this.x=_[0]*this.x+_[1]*this.y,this.y=d,this},_add:function(_){return this.x+=_.x,this.y+=_.y,this},_sub:function(_){return this.x-=_.x,this.y-=_.y,this},_mult:function(_){return this.x*=_,this.y*=_,this},_div:function(_){return this.x/=_,this.y/=_,this},_multByPoint:function(_){return this.x*=_.x,this.y*=_.y,this},_divByPoint:function(_){return this.x/=_.x,this.y/=_.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var _=this.y;return this.y=this.x,this.x=-_,this},_rotate:function(_){var d=Math.cos(_),v=Math.sin(_),S=v*this.x+d*this.y;return this.x=d*this.x-v*this.y,this.y=S,this},_rotateAround:function(_,d){var v=Math.cos(_),S=Math.sin(_),M=d.y+S*(this.x-d.x)+v*(this.y-d.y);return this.x=d.x+v*(this.x-d.x)-S*(this.y-d.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},b.convert=function(_){return _ instanceof b?_:Array.isArray(_)?new b(_[0],_[1]):_};var A=f(y),I=C;function C(_,d,v,S){this.cx=3*_,this.bx=3*(v-_)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(S-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=_,this.p1y=d,this.p2x=v,this.p2y=S}C.prototype={sampleCurveX:function(_){return((this.ax*_+this.bx)*_+this.cx)*_},sampleCurveY:function(_){return((this.ay*_+this.by)*_+this.cy)*_},sampleCurveDerivativeX:function(_){return(3*this.ax*_+2*this.bx)*_+this.cx},solveCurveX:function(_,d){if(d===void 0&&(d=1e-6),_<0)return 0;if(_>1)return 1;for(var v=_,S=0;S<8;S++){var M=this.sampleCurveX(v)-_;if(Math.abs(M)<d)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=M/U}var q=0,Y=1;for(v=_,S=0;S<20&&(M=this.sampleCurveX(v),!(Math.abs(M-_)<d));S++)_>M?q=v:Y=v,v=.5*(Y-q)+q;return v},solve:function(_,d){return this.sampleCurveY(this.solveCurveX(_,d))}};var N=f(I);function O(_,d,v,S){const M=new N(_,d,v,S);return function(U){return M.solve(U)}}const $=O(.25,.1,.25,1);function G(_,d,v){return Math.min(v,Math.max(d,_))}function Z(_,d,v){const S=v-d,M=((_-d)%S+S)%S+d;return M===d?v:M}function ee(_,...d){for(const v of d)for(const S in v)_[S]=v[S];return _}let te=1;function _e(_,d,v){const S={};for(const M in _)S[M]=d.call(v||this,_[M],M,_);return S}function le(_,d,v){const S={};for(const M in _)d.call(v||this,_[M],M,_)&&(S[M]=_[M]);return S}function we(_){return Array.isArray(_)?_.map(we):typeof _=="object"&&_?_e(_,we):_}const ue={};function ze(_){ue[_]||(typeof console<"u"&&console.warn(_),ue[_]=!0)}function Ue(_,d,v){return(v.y-_.y)*(d.x-_.x)>(d.y-_.y)*(v.x-_.x)}function Ce(_){let d=0;for(let v,S,M=0,U=_.length,q=U-1;M<U;q=M++)v=_[M],S=_[q],d+=(S.x-v.x)*(v.y+S.y);return d}function Me(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let qe=null;function it(_){if(qe==null){const d=_.navigator?_.navigator.userAgent:null;qe=!!_.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return qe}function xt(_){return typeof ImageBitmap<"u"&&_ instanceof ImageBitmap}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let $e,at;const mt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_){const d=requestAnimationFrame(_);return{cancel:()=>cancelAnimationFrame(d)}},getImageData(_,d=0){return this.getImageCanvasContext(_).getImageData(-d,-d,_.width+2*d,_.height+2*d)},getImageCanvasContext(_){const d=window.document.createElement("canvas"),v=d.getContext("2d",{willReadFrequently:!0});if(!v)throw new Error("failed to create canvas 2d context");return d.width=_.width,d.height=_.height,v.drawImage(_,0,0,_.width,_.height),v},resolveURL:_=>($e||($e=document.createElement("a")),$e.href=_,$e.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(at==null&&(at=matchMedia("(prefers-reduced-motion: reduce)")),at.matches)}},Xe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class wt extends Error{constructor(d,v,S,M){super(`AJAXError: ${v} (${d}): ${S}`),this.status=d,this.statusText=v,this.url=S,this.body=M}}const be=Me()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Be=_=>Xe.REGISTERED_PROTOCOLS[_.substring(0,_.indexOf("://"))];function Ae(_,d){const v=new AbortController,S=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:be(),signal:v.signal});let M=!1,U=!1;return _.type==="json"&&S.headers.set("Accept","application/json"),U||fetch(S).then(q=>q.ok?(Y=>{(_.type==="arrayBuffer"||_.type==="image"?Y.arrayBuffer():_.type==="json"?Y.json():Y.text()).then(oe=>{U||(M=!0,d(null,oe,Y.headers.get("Cache-Control"),Y.headers.get("Expires")))}).catch(oe=>{U||d(new Error(oe.message))})})(q):q.blob().then(Y=>d(new wt(q.status,q.statusText,_.url,Y)))).catch(q=>{q.code!==20&&d(new Error(q.message))}),{cancel:()=>{U=!0,M||v.abort()}}}const ht=function(_,d){if(/:\/\//.test(_.url)&&!/^https?:|^file:/.test(_.url)){if(Me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",_,d);if(!Me())return(Be(_.url)||Ae)(_,d)}if(!(/^file:/.test(v=_.url)||/^file:/.test(be())&&!/^\w+:/.test(v))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ae(_,d);if(Me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",_,d,void 0,!0)}var v;return function(S,M){const U=new XMLHttpRequest;U.open(S.method||"GET",S.url,!0),S.type!=="arrayBuffer"&&S.type!=="image"||(U.responseType="arraybuffer");for(const q in S.headers)U.setRequestHeader(q,S.headers[q]);return S.type==="json"&&(U.responseType="text",U.setRequestHeader("Accept","application/json")),U.withCredentials=S.credentials==="include",U.onerror=()=>{M(new Error(U.statusText))},U.onload=()=>{if((U.status>=200&&U.status<300||U.status===0)&&U.response!==null){let q=U.response;if(S.type==="json")try{q=JSON.parse(U.response)}catch(Y){return M(Y)}M(null,q,U.getResponseHeader("Cache-Control"),U.getResponseHeader("Expires"))}else{const q=new Blob([U.response],{type:U.getResponseHeader("Content-Type")});M(new wt(U.status,U.statusText,S.url,q))}},U.send(S.body),{cancel:()=>U.abort()}}(_,d)},Nt=function(_,d){return ht(ee(_,{type:"arrayBuffer"}),d)};function zt(_){if(!_||_.indexOf("://")<=0||_.indexOf("data:image/")===0||_.indexOf("blob:")===0)return!0;const d=new URL(_),v=window.location;return d.protocol===v.protocol&&d.host===v.host}function Mt(_,d,v){v[_]&&v[_].indexOf(d)!==-1||(v[_]=v[_]||[],v[_].push(d))}function Kt(_,d,v){if(v&&v[_]){const S=v[_].indexOf(d);S!==-1&&v[_].splice(S,1)}}class yr{constructor(d,v={}){ee(this,v),this.type=d}}class Er extends yr{constructor(d,v={}){super("error",ee({error:d},v))}}class Jt{on(d,v){return this._listeners=this._listeners||{},Mt(d,v,this._listeners),this}off(d,v){return Kt(d,v,this._listeners),Kt(d,v,this._oneTimeListeners),this}once(d,v){return v?(this._oneTimeListeners=this._oneTimeListeners||{},Mt(d,v,this._oneTimeListeners),this):new Promise(S=>this.once(d,S))}fire(d,v){typeof d=="string"&&(d=new yr(d,v||{}));const S=d.type;if(this.listens(S)){d.target=this;const M=this._listeners&&this._listeners[S]?this._listeners[S].slice():[];for(const Y of M)Y.call(this,d);const U=this._oneTimeListeners&&this._oneTimeListeners[S]?this._oneTimeListeners[S].slice():[];for(const Y of U)Kt(S,Y,this._oneTimeListeners),Y.call(this,d);const q=this._eventedParent;q&&(ee(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),q.fire(d))}else d instanceof Er&&console.error(d.error);return this}listens(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)}setEventedParent(d,v){return this._eventedParent=d,this._eventedParentData=v,this}}var It={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Fr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ft(_,d){const v={};for(const S in _)S!=="ref"&&(v[S]=_[S]);return Fr.forEach(S=>{S in d&&(v[S]=d[S])}),v}function ct(_,d){if(Array.isArray(_)){if(!Array.isArray(d)||_.length!==d.length)return!1;for(let v=0;v<_.length;v++)if(!ct(_[v],d[v]))return!1;return!0}if(typeof _=="object"&&_!==null&&d!==null){if(typeof d!="object"||Object.keys(_).length!==Object.keys(d).length)return!1;for(const v in _)if(!ct(_[v],d[v]))return!1;return!0}return _===d}const mr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Jr(_,d,v){v.push({command:mr.addSource,args:[_,d[_]]})}function dr(_,d,v){d.push({command:mr.removeSource,args:[_]}),v[_]=!0}function zr(_,d,v,S){dr(_,v,S),Jr(_,d,v)}function ri(_,d,v){let S;for(S in _[v])if(Object.prototype.hasOwnProperty.call(_[v],S)&&S!=="data"&&!ct(_[v][S],d[v][S]))return!1;for(S in d[v])if(Object.prototype.hasOwnProperty.call(d[v],S)&&S!=="data"&&!ct(_[v][S],d[v][S]))return!1;return!0}function Vr(_,d,v,S,M,U){let q;for(q in d=d||{},_=_||{})Object.prototype.hasOwnProperty.call(_,q)&&(ct(_[q],d[q])||v.push({command:U,args:[S,q,d[q],M]}));for(q in d)Object.prototype.hasOwnProperty.call(d,q)&&!Object.prototype.hasOwnProperty.call(_,q)&&(ct(_[q],d[q])||v.push({command:U,args:[S,q,d[q],M]}))}function _i(_){return _.id}function Hi(_,d){return _[d.id]=d,_}class Nr{constructor(d,v,S,M){this.message=(d?`${d}: `:"")+S,M&&(this.identifier=M),v!=null&&v.__line__&&(this.line=v.__line__)}}function ji(_,...d){for(const v of d)for(const S in v)_[S]=v[S];return _}class Ui extends Error{constructor(d,v){super(v),this.message=v,this.key=d}}class an{constructor(d,v=[]){this.parent=d,this.bindings={};for(const[S,M]of v)this.bindings[S]=M}concat(d){return new an(this,d)}get(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(`${d} not found in scope.`)}has(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)}}const Gi={kind:"null"},Or={kind:"number"},Br={kind:"string"},Ni={kind:"boolean"},qi={kind:"color"},kt={kind:"object"},fr={kind:"value"},Qr={kind:"collator"},Ei={kind:"formatted"},ki={kind:"padding"},Zn={kind:"resolvedImage"},un={kind:"variableAnchorOffsetCollection"};function Rn(_,d){return{kind:"array",itemType:_,N:d}}function Xn(_){if(_.kind==="array"){const d=Xn(_.itemType);return typeof _.N=="number"?`array<${d}, ${_.N}>`:_.itemType.kind==="value"?"array":`array<${d}>`}return _.kind}const so=[Gi,Or,Br,Ni,qi,Ei,kt,Rn(fr),ki,Zn,un];function on(_,d){if(d.kind==="error")return null;if(_.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!on(_.itemType,d.itemType))&&(typeof _.N!="number"||_.N===d.N))return null}else{if(_.kind===d.kind)return null;if(_.kind==="value"){for(const v of so)if(!on(v,d))return null}}return`Expected ${Xn(_)} but found ${Xn(d)} instead.`}function gt(_,d){return d.some(v=>v.kind===_.kind)}function Ne(_,d){return d.some(v=>v==="null"?_===null:v==="array"?Array.isArray(_):v==="object"?_&&!Array.isArray(_)&&typeof _=="object":v===typeof _)}function Fe(_,d){return _.kind==="array"&&d.kind==="array"?_.itemType.kind===d.itemType.kind&&typeof _.N=="number":_.kind===d.kind}const lt=.96422,Lt=.82521,ft=4/29,pe=6/29,Qt=3*pe*pe,Vt=pe*pe*pe,lr=Math.PI/180,pt=180/Math.PI;function jr(_){return(_%=360)<0&&(_+=360),_}function $r([_,d,v,S]){let M,U;const q=Qi((.2225045*(_=$i(_))+.7168786*(d=$i(d))+.0606169*(v=$i(v)))/1);_===d&&d===v?M=U=q:(M=Qi((.4360747*_+.3850649*d+.1430804*v)/lt),U=Qi((.0139322*_+.0971045*d+.7141733*v)/Lt));const Y=116*q-16;return[Y<0?0:Y,500*(M-q),200*(q-U),S]}function $i(_){return _<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function Qi(_){return _>Vt?Math.pow(_,1/3):_/Qt+ft}function Ci([_,d,v,S]){let M=(_+16)/116,U=isNaN(d)?M:M+d/500,q=isNaN(v)?M:M-v/200;return M=1*en(M),U=lt*en(U),q=Lt*en(q),[Et(3.1338561*U-1.6168667*M-.4906146*q),Et(-.9787684*U+1.9161415*M+.033454*q),Et(.0719453*U-.2289914*M+1.4052427*q),S]}function Et(_){return(_=_<=.00304?12.92*_:1.055*Math.pow(_,1/2.4)-.055)<0?0:_>1?1:_}function en(_){return _>pe?_*_*_:Qt*(_-ft)}function Sn(_){return parseInt(_.padEnd(2,_),16)/255}function Vn(_,d){return En(d?_/100:_,0,1)}function En(_,d,v){return Math.min(Math.max(d,_),v)}function On(_){return!_.some(Number.isNaN)}const sa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class tn{constructor(d,v,S,M=1,U=!0){this.r=d,this.g=v,this.b=S,this.a=M,U||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[d,v,S,M]))}static parse(d){if(d instanceof tn)return d;if(typeof d!="string")return;const v=function(S){if((S=S.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=sa[S];if(M){const[q,Y,oe]=M;return[q/255,Y/255,oe/255,1]}if(S.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(S)){const q=S.length<6?1:2;let Y=1;return[Sn(S.slice(Y,Y+=q)),Sn(S.slice(Y,Y+=q)),Sn(S.slice(Y,Y+=q)),Sn(S.slice(Y,Y+q)||"ff")]}if(S.startsWith("rgb")){const q=S.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(q){const[Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt,gr]=q,or=[Ie||" ",rt||" ",qt].join("");if(or==="  "||or==="  /"||or===",,"||or===",,,"){const Sr=[ye,Ge,St].join(""),Tr=Sr==="%%%"?100:Sr===""?255:0;if(Tr){const Kr=[En(+oe/Tr,0,1),En(+Re/Tr,0,1),En(+nt/Tr,0,1),Zt?Vn(+Zt,gr):1];if(On(Kr))return Kr}}return}}const U=S.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(U){const[q,Y,oe,ye,Ie,Re,Ge,rt,nt]=U,St=[oe||" ",Ie||" ",Ge].join("");if(St==="  "||St==="  /"||St===",,"||St===",,,"){const qt=[+Y,En(+ye,0,100),En(+Re,0,100),rt?Vn(+rt,nt):1];if(On(qt))return function([Zt,gr,or,Sr]){function Tr(Kr){const Pi=(Kr+Zt/30)%12,Xi=gr*Math.min(or,1-or);return or-Xi*Math.max(-1,Math.min(Pi-3,9-Pi,1))}return Zt=jr(Zt),gr/=100,or/=100,[Tr(0),Tr(8),Tr(4),Sr]}(qt)}}}(d);return v?new tn(...v,!1):void 0}get rgb(){const{r:d,g:v,b:S,a:M}=this,U=M||1/0;return this.overwriteGetter("rgb",[d/U,v/U,S/U,M])}get hcl(){return this.overwriteGetter("hcl",function(d){const[v,S,M,U]=$r(d),q=Math.sqrt(S*S+M*M);return[Math.round(1e4*q)?jr(Math.atan2(M,S)*pt):NaN,q,v,U]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$r(this.rgb))}overwriteGetter(d,v){return Object.defineProperty(this,d,{value:v}),v}toString(){const[d,v,S,M]=this.rgb;return`rgba(${[d,v,S].map(U=>Math.round(255*U)).join(",")},${M})`}}tn.black=new tn(0,0,0,1),tn.white=new tn(1,1,1,1),tn.transparent=new tn(0,0,0,0),tn.red=new tn(1,0,0,1);class Bo{constructor(d,v,S){this.sensitivity=d?v?"variant":"case":v?"accent":"base",this.locale=S,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(d,v){return this.collator.compare(d,v)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fn{constructor(d,v,S,M,U){this.text=d,this.image=v,this.scale=S,this.fontStack=M,this.textColor=U}}class Ko{constructor(d){this.sections=d}static fromString(d){return new Ko([new fn(d,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(d=>d.text.length!==0||d.image&&d.image.name.length!==0)}static factory(d){return d instanceof Ko?d:Ko.fromString(d)}toString(){return this.sections.length===0?"":this.sections.map(d=>d.text).join("")}}class Xa{constructor(d){this.values=d.slice()}static parse(d){if(d instanceof Xa)return d;if(typeof d=="number")return new Xa([d,d,d,d]);if(Array.isArray(d)&&!(d.length<1||d.length>4)){for(const v of d)if(typeof v!="number")return;switch(d.length){case 1:d=[d[0],d[0],d[0],d[0]];break;case 2:d=[d[0],d[1],d[0],d[1]];break;case 3:d=[d[0],d[1],d[2],d[1]]}return new Xa(d)}}toString(){return JSON.stringify(this.values)}}const qu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pa{constructor(d){this.values=d.slice()}static parse(d){if(d instanceof pa)return d;if(Array.isArray(d)&&!(d.length<1)&&d.length%2==0){for(let v=0;v<d.length;v+=2){const S=d[v],M=d[v+1];if(typeof S!="string"||!qu.has(S)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new pa(d)}}toString(){return JSON.stringify(this.values)}}class ts{constructor(d){this.name=d.name,this.available=d.available}toString(){return this.name}static fromString(d){return d?new ts({name:d,available:!1}):null}}function Vu(_,d,v,S){return typeof _=="number"&&_>=0&&_<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof v=="number"&&v>=0&&v<=255?S===void 0||typeof S=="number"&&S>=0&&S<=1?null:`Invalid rgba value [${[_,d,v,S].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof S=="number"?[_,d,v,S]:[_,d,v]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Gl(_){if(_===null||typeof _=="string"||typeof _=="boolean"||typeof _=="number"||_ instanceof tn||_ instanceof Bo||_ instanceof Ko||_ instanceof Xa||_ instanceof pa||_ instanceof ts)return!0;if(Array.isArray(_)){for(const d of _)if(!Gl(d))return!1;return!0}if(typeof _=="object"){for(const d in _)if(!Gl(_[d]))return!1;return!0}return!1}function Ao(_){if(_===null)return Gi;if(typeof _=="string")return Br;if(typeof _=="boolean")return Ni;if(typeof _=="number")return Or;if(_ instanceof tn)return qi;if(_ instanceof Bo)return Qr;if(_ instanceof Ko)return Ei;if(_ instanceof Xa)return ki;if(_ instanceof pa)return un;if(_ instanceof ts)return Zn;if(Array.isArray(_)){const d=_.length;let v;for(const S of _){const M=Ao(S);if(v){if(v===M)continue;v=fr;break}v=M}return Rn(v||fr,d)}return kt}function Ya(_){const d=typeof _;return _===null?"":d==="string"||d==="number"||d==="boolean"?String(_):_ instanceof tn||_ instanceof Ko||_ instanceof Xa||_ instanceof pa||_ instanceof ts?_.toString():JSON.stringify(_)}class Aa{constructor(d,v){this.type=d,this.value=v}static parse(d,v){if(d.length!==2)return v.error(`'literal' expression requires exactly one argument, but found ${d.length-1} instead.`);if(!Gl(d[1]))return v.error("invalid value");const S=d[1];let M=Ao(S);const U=v.expectedType;return M.kind!=="array"||M.N!==0||!U||U.kind!=="array"||typeof U.N=="number"&&U.N!==0||(M=U),new Aa(M,S)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Jo{constructor(d){this.name="ExpressionEvaluationError",this.message=d}toJSON(){return this.message}}const Go={string:Br,number:Or,boolean:Ni,object:kt};class la{constructor(d,v){this.type=d,this.args=v}static parse(d,v){if(d.length<2)return v.error("Expected at least one argument.");let S,M=1;const U=d[0];if(U==="array"){let Y,oe;if(d.length>2){const ye=d[1];if(typeof ye!="string"||!(ye in Go)||ye==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);Y=Go[ye],M++}else Y=fr;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return v.error('The length argument to "array" must be a positive integer literal',2);oe=d[2],M++}S=Rn(Y,oe)}else{if(!Go[U])throw new Error(`Types doesn't contain name = ${U}`);S=Go[U]}const q=[];for(;M<d.length;M++){const Y=v.parse(d[M],M,fr);if(!Y)return null;q.push(Y)}return new la(S,q)}evaluate(d){for(let v=0;v<this.args.length;v++){const S=this.args[v].evaluate(d);if(!on(this.type,Ao(S)))return S;if(v===this.args.length-1)throw new Jo(`Expected value to be of type ${Xn(this.type)}, but found ${Xn(Ao(S))} instead.`)}throw new Error}eachChild(d){this.args.forEach(d)}outputDefined(){return this.args.every(d=>d.outputDefined())}}const Js={"to-boolean":Ni,"to-color":qi,"to-number":Or,"to-string":Br};class Ma{constructor(d,v){this.type=d,this.args=v}static parse(d,v){if(d.length<2)return v.error("Expected at least one argument.");const S=d[0];if(!Js[S])throw new Error(`Can't parse ${S} as it is not part of the known types`);if((S==="to-boolean"||S==="to-string")&&d.length!==2)return v.error("Expected one argument.");const M=Js[S],U=[];for(let q=1;q<d.length;q++){const Y=v.parse(d[q],q,fr);if(!Y)return null;U.push(Y)}return new Ma(M,U)}evaluate(d){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(d);case"color":{let v,S;for(const M of this.args){if(v=M.evaluate(d),S=null,v instanceof tn)return v;if(typeof v=="string"){const U=d.parseColor(v);if(U)return U}else if(Array.isArray(v)&&(S=v.length<3||v.length>4?`Invalid rbga value ${JSON.stringify(v)}: expected an array containing either three or four numeric values.`:Vu(v[0],v[1],v[2],v[3]),!S))return new tn(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new Jo(S||`Could not parse color from value '${typeof v=="string"?v:JSON.stringify(v)}'`)}case"padding":{let v;for(const S of this.args){v=S.evaluate(d);const M=Xa.parse(v);if(M)return M}throw new Jo(`Could not parse padding from value '${typeof v=="string"?v:JSON.stringify(v)}'`)}case"variableAnchorOffsetCollection":{let v;for(const S of this.args){v=S.evaluate(d);const M=pa.parse(v);if(M)return M}throw new Jo(`Could not parse variableAnchorOffsetCollection from value '${typeof v=="string"?v:JSON.stringify(v)}'`)}case"number":{let v=null;for(const S of this.args){if(v=S.evaluate(d),v===null)return 0;const M=Number(v);if(!isNaN(M))return M}throw new Jo(`Could not convert ${JSON.stringify(v)} to number.`)}case"formatted":return Ko.fromString(Ya(this.args[0].evaluate(d)));case"resolvedImage":return ts.fromString(Ya(this.args[0].evaluate(d)));default:return Ya(this.args[0].evaluate(d))}}eachChild(d){this.args.forEach(d)}outputDefined(){return this.args.every(d=>d.outputDefined())}}const Da=["Unknown","Point","LineString","Polygon"];class Kn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Da[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(d){let v=this._parseColorCache[d];return v||(v=this._parseColorCache[d]=tn.parse(d)),v}}class rs{constructor(d,v,S=[],M,U=new an,q=[]){this.registry=d,this.path=S,this.key=S.map(Y=>`[${Y}]`).join(""),this.scope=U,this.errors=q,this.expectedType=M,this._isConstant=v}parse(d,v,S,M,U={}){return v?this.concat(v,S,M)._parse(d,U):this._parse(d,U)}_parse(d,v){function S(M,U,q){return q==="assert"?new la(U,[M]):q==="coerce"?new Ma(U,[M]):M}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=d[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const U=this.registry[M];if(U){let q=U.parse(d,this);if(!q)return null;if(this.expectedType){const Y=this.expectedType,oe=q.type;if(Y.kind!=="string"&&Y.kind!=="number"&&Y.kind!=="boolean"&&Y.kind!=="object"&&Y.kind!=="array"||oe.kind!=="value")if(Y.kind!=="color"&&Y.kind!=="formatted"&&Y.kind!=="resolvedImage"||oe.kind!=="value"&&oe.kind!=="string")if(Y.kind!=="padding"||oe.kind!=="value"&&oe.kind!=="number"&&oe.kind!=="array")if(Y.kind!=="variableAnchorOffsetCollection"||oe.kind!=="value"&&oe.kind!=="array"){if(this.checkSubtype(Y,oe))return null}else q=S(q,Y,v.typeAnnotation||"coerce");else q=S(q,Y,v.typeAnnotation||"coerce");else q=S(q,Y,v.typeAnnotation||"coerce");else q=S(q,Y,v.typeAnnotation||"assert")}if(!(q instanceof Aa)&&q.type.kind!=="resolvedImage"&&this._isConstant(q)){const Y=new Kn;try{q=new Aa(q.type,q.evaluate(Y))}catch(oe){return this.error(oe.message),null}}return q}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof d} instead.`)}concat(d,v,S){const M=typeof d=="number"?this.path.concat(d):this.path,U=S?this.scope.concat(S):this.scope;return new rs(this.registry,this._isConstant,M,v||null,U,this.errors)}error(d,...v){const S=`${this.key}${v.map(M=>`[${M}]`).join("")}`;this.errors.push(new Ui(S,d))}checkSubtype(d,v){const S=on(d,v);return S&&this.error(S),S}}class Rs{constructor(d,v,S){this.type=Qr,this.locale=S,this.caseSensitive=d,this.diacriticSensitive=v}static parse(d,v){if(d.length!==2)return v.error("Expected one argument.");const S=d[1];if(typeof S!="object"||Array.isArray(S))return v.error("Collator options argument must be an object.");const M=v.parse(S["case-sensitive"]!==void 0&&S["case-sensitive"],1,Ni);if(!M)return null;const U=v.parse(S["diacritic-sensitive"]!==void 0&&S["diacritic-sensitive"],1,Ni);if(!U)return null;let q=null;return S.locale&&(q=v.parse(S.locale,1,Br),!q)?null:new Rs(M,U,q)}evaluate(d){return new Bo(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)}eachChild(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)}outputDefined(){return!1}}const oa=8192;function Qs(_,d){_[0]=Math.min(_[0],d[0]),_[1]=Math.min(_[1],d[1]),_[2]=Math.max(_[2],d[0]),_[3]=Math.max(_[3],d[1])}function Os(_,d){return!(_[0]<=d[0]||_[2]>=d[2]||_[1]<=d[1]||_[3]>=d[3])}function bc(_,d){const v=(180+_[0])/360,S=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_[1]*Math.PI/360)))/360,M=Math.pow(2,d.z);return[Math.round(v*M*oa),Math.round(S*M*oa)]}function Hu(_,d,v){const S=_[0]-d[0],M=_[1]-d[1],U=_[0]-v[0],q=_[1]-v[1];return S*q-U*M==0&&S*U<=0&&M*q<=0}function bu(_,d){let v=!1;for(let q=0,Y=d.length;q<Y;q++){const oe=d[q];for(let ye=0,Ie=oe.length;ye<Ie-1;ye++){if(Hu(_,oe[ye],oe[ye+1]))return!1;(M=oe[ye])[1]>(S=_)[1]!=(U=oe[ye+1])[1]>S[1]&&S[0]<(U[0]-M[0])*(S[1]-M[1])/(U[1]-M[1])+M[0]&&(v=!v)}}var S,M,U;return v}function el(_,d){for(let v=0;v<d.length;v++)if(bu(_,d[v]))return!0;return!1}function Wl(_,d,v,S){const M=S[0]-v[0],U=S[1]-v[1],q=(_[0]-v[0])*U-M*(_[1]-v[1]),Y=(d[0]-v[0])*U-M*(d[1]-v[1]);return q>0&&Y<0||q<0&&Y>0}function $u(_,d,v){for(const ye of v)for(let Ie=0;Ie<ye.length-1;++Ie)if((Y=[(q=ye[Ie+1])[0]-(U=ye[Ie])[0],q[1]-U[1]])[0]*(oe=[(M=d)[0]-(S=_)[0],M[1]-S[1]])[1]-Y[1]*oe[0]!=0&&Wl(S,M,U,q)&&Wl(U,q,S,M))return!0;var S,M,U,q,Y,oe;return!1}function wc(_,d){for(let v=0;v<_.length;++v)if(!bu(_[v],d))return!1;for(let v=0;v<_.length-1;++v)if($u(_[v],_[v+1],d))return!1;return!0}function xc(_,d){for(let v=0;v<d.length;v++)if(wc(_,d[v]))return!0;return!1}function Zl(_,d,v){const S=[];for(let M=0;M<_.length;M++){const U=[];for(let q=0;q<_[M].length;q++){const Y=bc(_[M][q],v);Qs(d,Y),U.push(Y)}S.push(U)}return S}function Fs(_,d,v){const S=[];for(let M=0;M<_.length;M++){const U=Zl(_[M],d,v);S.push(U)}return S}function tl(_,d,v,S){if(_[0]<v[0]||_[0]>v[2]){const M=.5*S;let U=_[0]-v[0]>M?-S:v[0]-_[0]>M?S:0;U===0&&(U=_[0]-v[2]>M?-S:v[2]-_[0]>M?S:0),_[0]+=U}Qs(d,_)}function Sl(_,d,v,S){const M=Math.pow(2,S.z)*oa,U=[S.x*oa,S.y*oa],q=[];for(const Y of _)for(const oe of Y){const ye=[oe.x+U[0],oe.y+U[1]];tl(ye,d,v,M),q.push(ye)}return q}function wu(_,d,v,S){const M=Math.pow(2,S.z)*oa,U=[S.x*oa,S.y*oa],q=[];for(const oe of _){const ye=[];for(const Ie of oe){const Re=[Ie.x+U[0],Ie.y+U[1]];Qs(d,Re),ye.push(Re)}q.push(ye)}if(d[2]-d[0]<=M/2){(Y=d)[0]=Y[1]=1/0,Y[2]=Y[3]=-1/0;for(const oe of q)for(const ye of oe)tl(ye,d,v,M)}var Y;return q}class F{constructor(d,v){this.type=Ni,this.geojson=d,this.geometries=v}static parse(d,v){if(d.length!==2)return v.error(`'within' expression requires exactly one argument, but found ${d.length-1} instead.`);if(Gl(d[1])){const S=d[1];if(S.type==="FeatureCollection")for(let M=0;M<S.features.length;++M){const U=S.features[M].geometry.type;if(U==="Polygon"||U==="MultiPolygon")return new F(S,S.features[M].geometry)}else if(S.type==="Feature"){const M=S.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new F(S,S.geometry)}else if(S.type==="Polygon"||S.type==="MultiPolygon")return new F(S,S)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(v,S){const M=[1/0,1/0,-1/0,-1/0],U=[1/0,1/0,-1/0,-1/0],q=v.canonicalID();if(S.type==="Polygon"){const Y=Zl(S.coordinates,U,q),oe=Sl(v.geometry(),M,U,q);if(!Os(M,U))return!1;for(const ye of oe)if(!bu(ye,Y))return!1}if(S.type==="MultiPolygon"){const Y=Fs(S.coordinates,U,q),oe=Sl(v.geometry(),M,U,q);if(!Os(M,U))return!1;for(const ye of oe)if(!el(ye,Y))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(v,S){const M=[1/0,1/0,-1/0,-1/0],U=[1/0,1/0,-1/0,-1/0],q=v.canonicalID();if(S.type==="Polygon"){const Y=Zl(S.coordinates,U,q),oe=wu(v.geometry(),M,U,q);if(!Os(M,U))return!1;for(const ye of oe)if(!wc(ye,Y))return!1}if(S.type==="MultiPolygon"){const Y=Fs(S.coordinates,U,q),oe=wu(v.geometry(),M,U,q);if(!Os(M,U))return!1;for(const ye of oe)if(!xc(ye,Y))return!1}return!0}(d,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class X{constructor(d,v){this.type=v.type,this.name=d,this.boundExpression=v}static parse(d,v){if(d.length!==2||typeof d[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");const S=d[1];return v.scope.has(S)?new X(S,v.scope.get(S)):v.error(`Unknown variable "${S}". Make sure "${S}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(d){return this.boundExpression.evaluate(d)}eachChild(){}outputDefined(){return!1}}class ce{constructor(d,v,S,M){this.name=d,this.type=v,this._evaluate=S,this.args=M}evaluate(d){return this._evaluate(d,this.args)}eachChild(d){this.args.forEach(d)}outputDefined(){return!1}static parse(d,v){const S=d[0],M=ce.definitions[S];if(!M)return v.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0);const U=Array.isArray(M)?M[0]:M.type,q=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,Y=q.filter(([ye])=>!Array.isArray(ye)||ye.length===d.length-1);let oe=null;for(const[ye,Ie]of Y){oe=new rs(v.registry,Pe,v.path,null,v.scope);const Re=[];let Ge=!1;for(let rt=1;rt<d.length;rt++){const nt=d[rt],St=Array.isArray(ye)?ye[rt-1]:ye.type,qt=oe.parse(nt,1+Re.length,St);if(!qt){Ge=!0;break}Re.push(qt)}if(!Ge)if(Array.isArray(ye)&&ye.length!==Re.length)oe.error(`Expected ${ye.length} arguments, but found ${Re.length} instead.`);else{for(let rt=0;rt<Re.length;rt++){const nt=Array.isArray(ye)?ye[rt]:ye.type,St=Re[rt];oe.concat(rt+1).checkSubtype(nt,St.type)}if(oe.errors.length===0)return new ce(S,U,Ie,Re)}}if(Y.length===1)v.errors.push(...oe.errors);else{const ye=(Y.length?Y:q).map(([Re])=>{return Ge=Re,Array.isArray(Ge)?`(${Ge.map(Xn).join(", ")})`:`(${Xn(Ge.type)}...)`;var Ge}).join(" | "),Ie=[];for(let Re=1;Re<d.length;Re++){const Ge=v.parse(d[Re],1+Ie.length);if(!Ge)return null;Ie.push(Xn(Ge.type))}v.error(`Expected arguments of type ${ye}, but found (${Ie.join(", ")}) instead.`)}return null}static register(d,v){ce.definitions=v;for(const S in v)d[S]=ce}}function Pe(_){if(_ instanceof X)return Pe(_.boundExpression);if(_ instanceof ce&&_.name==="error"||_ instanceof Rs||_ instanceof F)return!1;const d=_ instanceof Ma||_ instanceof la;let v=!0;return _.eachChild(S=>{v=d?v&&Pe(S):v&&S instanceof Aa}),!!v&&tt(_)&&Bt(_,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tt(_){if(_ instanceof ce&&(_.name==="get"&&_.args.length===1||_.name==="feature-state"||_.name==="has"&&_.args.length===1||_.name==="properties"||_.name==="geometry-type"||_.name==="id"||/^filter-/.test(_.name))||_ instanceof F)return!1;let d=!0;return _.eachChild(v=>{d&&!tt(v)&&(d=!1)}),d}function bt(_){if(_ instanceof ce&&_.name==="feature-state")return!1;let d=!0;return _.eachChild(v=>{d&&!bt(v)&&(d=!1)}),d}function Bt(_,d){if(_ instanceof ce&&d.indexOf(_.name)>=0)return!1;let v=!0;return _.eachChild(S=>{v&&!Bt(S,d)&&(v=!1)}),v}function Ot(_,d){const v=_.length-1;let S,M,U=0,q=v,Y=0;for(;U<=q;)if(Y=Math.floor((U+q)/2),S=_[Y],M=_[Y+1],S<=d){if(Y===v||d<M)return Y;U=Y+1}else{if(!(S>d))throw new Jo("Input is not a number.");q=Y-1}return 0}class wr{constructor(d,v,S){this.type=d,this.input=v,this.labels=[],this.outputs=[];for(const[M,U]of S)this.labels.push(M),this.outputs.push(U)}static parse(d,v){if(d.length-1<4)return v.error(`Expected at least 4 arguments, but found only ${d.length-1}.`);if((d.length-1)%2!=0)return v.error("Expected an even number of arguments.");const S=v.parse(d[1],1,Or);if(!S)return null;const M=[];let U=null;v.expectedType&&v.expectedType.kind!=="value"&&(U=v.expectedType);for(let q=1;q<d.length;q+=2){const Y=q===1?-1/0:d[q],oe=d[q+1],ye=q,Ie=q+1;if(typeof Y!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(M.length&&M[M.length-1][0]>=Y)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ye);const Re=v.parse(oe,Ie,U);if(!Re)return null;U=U||Re.type,M.push([Y,Re])}return new wr(U,S,M)}evaluate(d){const v=this.labels,S=this.outputs;if(v.length===1)return S[0].evaluate(d);const M=this.input.evaluate(d);if(M<=v[0])return S[0].evaluate(d);const U=v.length;return M>=v[U-1]?S[U-1].evaluate(d):S[Ot(v,M)].evaluate(d)}eachChild(d){d(this.input);for(const v of this.outputs)d(v)}outputDefined(){return this.outputs.every(d=>d.outputDefined())}}function pr(_,d,v){return _+v*(d-_)}function vr(_,d,v){return _.map((S,M)=>pr(S,d[M],v))}const _r={number:pr,color:function(_,d,v,S="rgb"){switch(S){case"rgb":{const[M,U,q,Y]=vr(_.rgb,d.rgb,v);return new tn(M,U,q,Y,!1)}case"hcl":{const[M,U,q,Y]=_.hcl,[oe,ye,Ie,Re]=d.hcl;let Ge,rt;if(isNaN(M)||isNaN(oe))isNaN(M)?isNaN(oe)?Ge=NaN:(Ge=oe,q!==1&&q!==0||(rt=ye)):(Ge=M,Ie!==1&&Ie!==0||(rt=U));else{let gr=oe-M;oe>M&&gr>180?gr-=360:oe<M&&M-oe>180&&(gr+=360),Ge=M+v*gr}const[nt,St,qt,Zt]=function([gr,or,Sr,Tr]){return gr=isNaN(gr)?0:gr*lr,Ci([Sr,Math.cos(gr)*or,Math.sin(gr)*or,Tr])}([Ge,rt??pr(U,ye,v),pr(q,Ie,v),pr(Y,Re,v)]);return new tn(nt,St,qt,Zt,!1)}case"lab":{const[M,U,q,Y]=Ci(vr(_.lab,d.lab,v));return new tn(M,U,q,Y,!1)}}},array:vr,padding:function(_,d,v){return new Xa(vr(_.values,d.values,v))},variableAnchorOffsetCollection:function(_,d,v){const S=_.values,M=d.values;if(S.length!==M.length)throw new Jo(`Cannot interpolate values of different length. from: ${_.toString()}, to: ${d.toString()}`);const U=[];for(let q=0;q<S.length;q+=2){if(S[q]!==M[q])throw new Jo(`Cannot interpolate values containing mismatched anchors. from[${q}]: ${S[q]}, to[${q}]: ${M[q]}`);U.push(S[q]);const[Y,oe]=S[q+1],[ye,Ie]=M[q+1];U.push([pr(Y,ye,v),pr(oe,Ie,v)])}return new pa(U)}};class Mr{constructor(d,v,S,M,U){this.type=d,this.operator=v,this.interpolation=S,this.input=M,this.labels=[],this.outputs=[];for(const[q,Y]of U)this.labels.push(q),this.outputs.push(Y)}static interpolationFactor(d,v,S,M){let U=0;if(d.name==="exponential")U=Yr(v,d.base,S,M);else if(d.name==="linear")U=Yr(v,1,S,M);else if(d.name==="cubic-bezier"){const q=d.controlPoints;U=new N(q[0],q[1],q[2],q[3]).solve(Yr(v,1,S,M))}return U}static parse(d,v){let[S,M,U,...q]=d;if(!Array.isArray(M)||M.length===0)return v.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const ye=M[1];if(typeof ye!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:ye}}else{if(M[0]!=="cubic-bezier")return v.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const ye=M.slice(1);if(ye.length!==4||ye.some(Ie=>typeof Ie!="number"||Ie<0||Ie>1))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ye}}}if(d.length-1<4)return v.error(`Expected at least 4 arguments, but found only ${d.length-1}.`);if((d.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(U=v.parse(U,2,Or),!U)return null;const Y=[];let oe=null;S==="interpolate-hcl"||S==="interpolate-lab"?oe=qi:v.expectedType&&v.expectedType.kind!=="value"&&(oe=v.expectedType);for(let ye=0;ye<q.length;ye+=2){const Ie=q[ye],Re=q[ye+1],Ge=ye+3,rt=ye+4;if(typeof Ie!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ge);if(Y.length&&Y[Y.length-1][0]>=Ie)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ge);const nt=v.parse(Re,rt,oe);if(!nt)return null;oe=oe||nt.type,Y.push([Ie,nt])}return Fe(oe,Or)||Fe(oe,qi)||Fe(oe,ki)||Fe(oe,un)||Fe(oe,Rn(Or))?new Mr(oe,S,M,U,Y):v.error(`Type ${Xn(oe)} is not interpolatable.`)}evaluate(d){const v=this.labels,S=this.outputs;if(v.length===1)return S[0].evaluate(d);const M=this.input.evaluate(d);if(M<=v[0])return S[0].evaluate(d);const U=v.length;if(M>=v[U-1])return S[U-1].evaluate(d);const q=Ot(v,M),Y=Mr.interpolationFactor(this.interpolation,M,v[q],v[q+1]),oe=S[q].evaluate(d),ye=S[q+1].evaluate(d);switch(this.operator){case"interpolate":return _r[this.type.kind](oe,ye,Y);case"interpolate-hcl":return _r.color(oe,ye,Y,"hcl");case"interpolate-lab":return _r.color(oe,ye,Y,"lab")}}eachChild(d){d(this.input);for(const v of this.outputs)d(v)}outputDefined(){return this.outputs.every(d=>d.outputDefined())}}function Yr(_,d,v,S){const M=S-v,U=_-v;return M===0?0:d===1?U/M:(Math.pow(d,U)-1)/(Math.pow(d,M)-1)}class wi{constructor(d,v){this.type=d,this.args=v}static parse(d,v){if(d.length<2)return v.error("Expectected at least one argument.");let S=null;const M=v.expectedType;M&&M.kind!=="value"&&(S=M);const U=[];for(const Y of d.slice(1)){const oe=v.parse(Y,1+U.length,S,void 0,{typeAnnotation:"omit"});if(!oe)return null;S=S||oe.type,U.push(oe)}if(!S)throw new Error("No output type");const q=M&&U.some(Y=>on(M,Y.type));return new wi(q?fr:S,U)}evaluate(d){let v,S=null,M=0;for(const U of this.args)if(M++,S=U.evaluate(d),S&&S instanceof ts&&!S.available&&(v||(v=S.name),S=null,M===this.args.length&&(S=v)),S!==null)break;return S}eachChild(d){this.args.forEach(d)}outputDefined(){return this.args.every(d=>d.outputDefined())}}class ot{constructor(d,v){this.type=v.type,this.bindings=[].concat(d),this.result=v}evaluate(d){return this.result.evaluate(d)}eachChild(d){for(const v of this.bindings)d(v[1]);d(this.result)}static parse(d,v){if(d.length<4)return v.error(`Expected at least 3 arguments, but found ${d.length-1} instead.`);const S=[];for(let U=1;U<d.length-1;U+=2){const q=d[U];if(typeof q!="string")return v.error(`Expected string, but found ${typeof q} instead.`,U);if(/[^a-zA-Z0-9_]/.test(q))return v.error("Variable names must contain only alphanumeric characters or '_'.",U);const Y=v.parse(d[U+1],U+1);if(!Y)return null;S.push([q,Y])}const M=v.parse(d[d.length-1],d.length-1,v.expectedType,S);return M?new ot(S,M):null}outputDefined(){return this.result.outputDefined()}}class m{constructor(d,v,S){this.type=d,this.index=v,this.input=S}static parse(d,v){if(d.length!==3)return v.error(`Expected 2 arguments, but found ${d.length-1} instead.`);const S=v.parse(d[1],1,Or),M=v.parse(d[2],2,Rn(v.expectedType||fr));return S&&M?new m(M.type.itemType,S,M):null}evaluate(d){const v=this.index.evaluate(d),S=this.input.evaluate(d);if(v<0)throw new Jo(`Array index out of bounds: ${v} < 0.`);if(v>=S.length)throw new Jo(`Array index out of bounds: ${v} > ${S.length-1}.`);if(v!==Math.floor(v))throw new Jo(`Array index must be an integer, but found ${v} instead.`);return S[v]}eachChild(d){d(this.index),d(this.input)}outputDefined(){return!1}}class xr{constructor(d,v){this.type=Ni,this.needle=d,this.haystack=v}static parse(d,v){if(d.length!==3)return v.error(`Expected 2 arguments, but found ${d.length-1} instead.`);const S=v.parse(d[1],1,fr),M=v.parse(d[2],2,fr);return S&&M?gt(S.type,[Ni,Br,Or,Gi,fr])?new xr(S,M):v.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(S.type)} instead`):null}evaluate(d){const v=this.needle.evaluate(d),S=this.haystack.evaluate(d);if(!S)return!1;if(!Ne(v,["boolean","string","number","null"]))throw new Jo(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(Ao(v))} instead.`);if(!Ne(S,["string","array"]))throw new Jo(`Expected second argument to be of type array or string, but found ${Xn(Ao(S))} instead.`);return S.indexOf(v)>=0}eachChild(d){d(this.needle),d(this.haystack)}outputDefined(){return!0}}class h{constructor(d,v,S){this.type=Or,this.needle=d,this.haystack=v,this.fromIndex=S}static parse(d,v){if(d.length<=2||d.length>=5)return v.error(`Expected 3 or 4 arguments, but found ${d.length-1} instead.`);const S=v.parse(d[1],1,fr),M=v.parse(d[2],2,fr);if(!S||!M)return null;if(!gt(S.type,[Ni,Br,Or,Gi,fr]))return v.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(S.type)} instead`);if(d.length===4){const U=v.parse(d[3],3,Or);return U?new h(S,M,U):null}return new h(S,M)}evaluate(d){const v=this.needle.evaluate(d),S=this.haystack.evaluate(d);if(!Ne(v,["boolean","string","number","null"]))throw new Jo(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(Ao(v))} instead.`);if(!Ne(S,["string","array"]))throw new Jo(`Expected second argument to be of type array or string, but found ${Xn(Ao(S))} instead.`);if(this.fromIndex){const M=this.fromIndex.evaluate(d);return S.indexOf(v,M)}return S.indexOf(v)}eachChild(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)}outputDefined(){return!1}}class P{constructor(d,v,S,M,U,q){this.inputType=d,this.type=v,this.input=S,this.cases=M,this.outputs=U,this.otherwise=q}static parse(d,v){if(d.length<5)return v.error(`Expected at least 4 arguments, but found only ${d.length-1}.`);if(d.length%2!=1)return v.error("Expected an even number of arguments.");let S,M;v.expectedType&&v.expectedType.kind!=="value"&&(M=v.expectedType);const U={},q=[];for(let ye=2;ye<d.length-1;ye+=2){let Ie=d[ye];const Re=d[ye+1];Array.isArray(Ie)||(Ie=[Ie]);const Ge=v.concat(ye);if(Ie.length===0)return Ge.error("Expected at least one branch label.");for(const nt of Ie){if(typeof nt!="number"&&typeof nt!="string")return Ge.error("Branch labels must be numbers or strings.");if(typeof nt=="number"&&Math.abs(nt)>Number.MAX_SAFE_INTEGER)return Ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof nt=="number"&&Math.floor(nt)!==nt)return Ge.error("Numeric branch labels must be integer values.");if(S){if(Ge.checkSubtype(S,Ao(nt)))return null}else S=Ao(nt);if(U[String(nt)]!==void 0)return Ge.error("Branch labels must be unique.");U[String(nt)]=q.length}const rt=v.parse(Re,ye,M);if(!rt)return null;M=M||rt.type,q.push(rt)}const Y=v.parse(d[1],1,fr);if(!Y)return null;const oe=v.parse(d[d.length-1],d.length-1,M);return oe?Y.type.kind!=="value"&&v.concat(1).checkSubtype(S,Y.type)?null:new P(S,M,Y,U,q,oe):null}evaluate(d){const v=this.input.evaluate(d);return(Ao(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(d)}eachChild(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)}outputDefined(){return this.outputs.every(d=>d.outputDefined())&&this.otherwise.outputDefined()}}class ci{constructor(d,v,S){this.type=d,this.branches=v,this.otherwise=S}static parse(d,v){if(d.length<4)return v.error(`Expected at least 3 arguments, but found only ${d.length-1}.`);if(d.length%2!=0)return v.error("Expected an odd number of arguments.");let S;v.expectedType&&v.expectedType.kind!=="value"&&(S=v.expectedType);const M=[];for(let q=1;q<d.length-1;q+=2){const Y=v.parse(d[q],q,Ni);if(!Y)return null;const oe=v.parse(d[q+1],q+1,S);if(!oe)return null;M.push([Y,oe]),S=S||oe.type}const U=v.parse(d[d.length-1],d.length-1,S);if(!U)return null;if(!S)throw new Error("Can't infer output type");return new ci(S,M,U)}evaluate(d){for(const[v,S]of this.branches)if(v.evaluate(d))return S.evaluate(d);return this.otherwise.evaluate(d)}eachChild(d){for(const[v,S]of this.branches)d(v),d(S);d(this.otherwise)}outputDefined(){return this.branches.every(([d,v])=>v.outputDefined())&&this.otherwise.outputDefined()}}class Oi{constructor(d,v,S,M){this.type=d,this.input=v,this.beginIndex=S,this.endIndex=M}static parse(d,v){if(d.length<=2||d.length>=5)return v.error(`Expected 3 or 4 arguments, but found ${d.length-1} instead.`);const S=v.parse(d[1],1,fr),M=v.parse(d[2],2,Or);if(!S||!M)return null;if(!gt(S.type,[Rn(fr),Br,fr]))return v.error(`Expected first argument to be of type array or string, but found ${Xn(S.type)} instead`);if(d.length===4){const U=v.parse(d[3],3,Or);return U?new Oi(S.type,S,M,U):null}return new Oi(S.type,S,M)}evaluate(d){const v=this.input.evaluate(d),S=this.beginIndex.evaluate(d);if(!Ne(v,["string","array"]))throw new Jo(`Expected first argument to be of type array or string, but found ${Xn(Ao(v))} instead.`);if(this.endIndex){const M=this.endIndex.evaluate(d);return v.slice(S,M)}return v.slice(S)}eachChild(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)}outputDefined(){return!1}}function wo(_,d){return _==="=="||_==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function ie(_,d,v,S){return S.compare(d,v)===0}function wn(_,d,v){const S=_!=="=="&&_!=="!=";return class h8{constructor(U,q,Y){this.type=Ni,this.lhs=U,this.rhs=q,this.collator=Y,this.hasUntypedArgument=U.type.kind==="value"||q.type.kind==="value"}static parse(U,q){if(U.length!==3&&U.length!==4)return q.error("Expected two or three arguments.");const Y=U[0];let oe=q.parse(U[1],1,fr);if(!oe)return null;if(!wo(Y,oe.type))return q.concat(1).error(`"${Y}" comparisons are not supported for type '${Xn(oe.type)}'.`);let ye=q.parse(U[2],2,fr);if(!ye)return null;if(!wo(Y,ye.type))return q.concat(2).error(`"${Y}" comparisons are not supported for type '${Xn(ye.type)}'.`);if(oe.type.kind!==ye.type.kind&&oe.type.kind!=="value"&&ye.type.kind!=="value")return q.error(`Cannot compare types '${Xn(oe.type)}' and '${Xn(ye.type)}'.`);S&&(oe.type.kind==="value"&&ye.type.kind!=="value"?oe=new la(ye.type,[oe]):oe.type.kind!=="value"&&ye.type.kind==="value"&&(ye=new la(oe.type,[ye])));let Ie=null;if(U.length===4){if(oe.type.kind!=="string"&&ye.type.kind!=="string"&&oe.type.kind!=="value"&&ye.type.kind!=="value")return q.error("Cannot use collator to compare non-string types.");if(Ie=q.parse(U[3],3,Qr),!Ie)return null}return new h8(oe,ye,Ie)}evaluate(U){const q=this.lhs.evaluate(U),Y=this.rhs.evaluate(U);if(S&&this.hasUntypedArgument){const oe=Ao(q),ye=Ao(Y);if(oe.kind!==ye.kind||oe.kind!=="string"&&oe.kind!=="number")throw new Jo(`Expected arguments for "${_}" to be (string, string) or (number, number), but found (${oe.kind}, ${ye.kind}) instead.`)}if(this.collator&&!S&&this.hasUntypedArgument){const oe=Ao(q),ye=Ao(Y);if(oe.kind!=="string"||ye.kind!=="string")return d(U,q,Y)}return this.collator?v(U,q,Y,this.collator.evaluate(U)):d(U,q,Y)}eachChild(U){U(this.lhs),U(this.rhs),this.collator&&U(this.collator)}outputDefined(){return!0}}}const Bs=wn("==",function(_,d,v){return d===v},ie),Xl=wn("!=",function(_,d,v){return d!==v},function(_,d,v,S){return!ie(0,d,v,S)}),p0=wn("<",function(_,d,v){return d<v},function(_,d,v,S){return S.compare(d,v)<0}),Yl=wn(">",function(_,d,v){return d>v},function(_,d,v,S){return S.compare(d,v)>0}),js=wn("<=",function(_,d,v){return d<=v},function(_,d,v,S){return S.compare(d,v)<=0}),kc=wn(">=",function(_,d,v){return d>=v},function(_,d,v,S){return S.compare(d,v)>=0});class El{constructor(d,v,S,M,U){this.type=Br,this.number=d,this.locale=v,this.currency=S,this.minFractionDigits=M,this.maxFractionDigits=U}static parse(d,v){if(d.length!==3)return v.error("Expected two arguments.");const S=v.parse(d[1],1,Or);if(!S)return null;const M=d[2];if(typeof M!="object"||Array.isArray(M))return v.error("NumberFormat options argument must be an object.");let U=null;if(M.locale&&(U=v.parse(M.locale,1,Br),!U))return null;let q=null;if(M.currency&&(q=v.parse(M.currency,1,Br),!q))return null;let Y=null;if(M["min-fraction-digits"]&&(Y=v.parse(M["min-fraction-digits"],1,Or),!Y))return null;let oe=null;return M["max-fraction-digits"]&&(oe=v.parse(M["max-fraction-digits"],1,Or),!oe)?null:new El(S,U,q,Y,oe)}evaluate(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))}eachChild(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)}outputDefined(){return!1}}class xu{constructor(d){this.type=Ei,this.sections=d}static parse(d,v){if(d.length<2)return v.error("Expected at least one argument.");const S=d[1];if(!Array.isArray(S)&&typeof S=="object")return v.error("First argument must be an image or text section.");const M=[];let U=!1;for(let q=1;q<=d.length-1;++q){const Y=d[q];if(U&&typeof Y=="object"&&!Array.isArray(Y)){U=!1;let oe=null;if(Y["font-scale"]&&(oe=v.parse(Y["font-scale"],1,Or),!oe))return null;let ye=null;if(Y["text-font"]&&(ye=v.parse(Y["text-font"],1,Rn(Br)),!ye))return null;let Ie=null;if(Y["text-color"]&&(Ie=v.parse(Y["text-color"],1,qi),!Ie))return null;const Re=M[M.length-1];Re.scale=oe,Re.font=ye,Re.textColor=Ie}else{const oe=v.parse(d[q],1,fr);if(!oe)return null;const ye=oe.type.kind;if(ye!=="string"&&ye!=="value"&&ye!=="null"&&ye!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");U=!0,M.push({content:oe,scale:null,font:null,textColor:null})}}return new xu(M)}evaluate(d){return new Ko(this.sections.map(v=>{const S=v.content.evaluate(d);return Ao(S)===Zn?new fn("",S,null,null,null):new fn(Ya(S),null,v.scale?v.scale.evaluate(d):null,v.font?v.font.evaluate(d).join(","):null,v.textColor?v.textColor.evaluate(d):null)}))}eachChild(d){for(const v of this.sections)d(v.content),v.scale&&d(v.scale),v.font&&d(v.font),v.textColor&&d(v.textColor)}outputDefined(){return!1}}class Cl{constructor(d){this.type=Zn,this.input=d}static parse(d,v){if(d.length!==2)return v.error("Expected two arguments.");const S=v.parse(d[1],1,Br);return S?new Cl(S):v.error("No image name provided.")}evaluate(d){const v=this.input.evaluate(d),S=ts.fromString(v);return S&&d.availableImages&&(S.available=d.availableImages.indexOf(v)>-1),S}eachChild(d){d(this.input)}outputDefined(){return!1}}class Ac{constructor(d){this.type=Or,this.input=d}static parse(d,v){if(d.length!==2)return v.error(`Expected 1 argument, but found ${d.length-1} instead.`);const S=v.parse(d[1],1);return S?S.type.kind!=="array"&&S.type.kind!=="string"&&S.type.kind!=="value"?v.error(`Expected argument of type string or array, but found ${Xn(S.type)} instead.`):new Ac(S):null}evaluate(d){const v=this.input.evaluate(d);if(typeof v=="string"||Array.isArray(v))return v.length;throw new Jo(`Expected value to be of type string or array, but found ${Xn(Ao(v))} instead.`)}eachChild(d){d(this.input)}outputDefined(){return!1}}const Us={"==":Bs,"!=":Xl,">":Yl,"<":p0,">=":kc,"<=":js,array:la,at:m,boolean:la,case:ci,coalesce:wi,collator:Rs,format:xu,image:Cl,in:xr,"index-of":h,interpolate:Mr,"interpolate-hcl":Mr,"interpolate-lab":Mr,length:Ac,let:ot,literal:Aa,match:P,number:la,"number-format":El,object:la,slice:Oi,step:wr,string:la,"to-boolean":Ma,"to-color":Ma,"to-number":Ma,"to-string":Ma,var:X,within:F};function Gu(_,[d,v,S,M]){d=d.evaluate(_),v=v.evaluate(_),S=S.evaluate(_);const U=M?M.evaluate(_):1,q=Vu(d,v,S,U);if(q)throw new Jo(q);return new tn(d/255,v/255,S/255,U,!1)}function Sc(_,d){return _ in d}function Kl(_,d){const v=d[_];return v===void 0?null:v}function qs(_){return{type:_}}function Mi(_){return{result:"success",value:_}}function bi(_){return{result:"error",value:_}}function rl(_){return _["property-type"]==="data-driven"||_["property-type"]==="cross-faded-data-driven"}function il(_){return!!_.expression&&_.expression.parameters.indexOf("zoom")>-1}function Il(_){return!!_.expression&&_.expression.interpolated}function Hn(_){return _ instanceof Number?"number":_ instanceof String?"string":_ instanceof Boolean?"boolean":Array.isArray(_)?"array":_===null?"null":typeof _}function Vs(_){return typeof _=="object"&&_!==null&&!Array.isArray(_)}function Wu(_){return _}function ne(_,d){const v=d.type==="color",S=_.stops&&typeof _.stops[0][0]=="object",M=S||!(S||_.property!==void 0),U=_.type||(Il(d)?"exponential":"interval");if(v||d.type==="padding"){const Ie=v?tn.parse:Xa.parse;(_=ji({},_)).stops&&(_.stops=_.stops.map(Re=>[Re[0],Ie(Re[1])])),_.default=Ie(_.default?_.default:d.default)}if(_.colorSpace&&(q=_.colorSpace)!=="rgb"&&q!=="hcl"&&q!=="lab")throw new Error(`Unknown color space: "${_.colorSpace}"`);var q;let Y,oe,ye;if(U==="exponential")Y=Ar;else if(U==="interval")Y=ar;else if(U==="categorical"){Y=Rt,oe=Object.create(null);for(const Ie of _.stops)oe[Ie[0]]=Ie[1];ye=typeof _.stops[0][0]}else{if(U!=="identity")throw new Error(`Unknown function type "${U}"`);Y=Hr}if(S){const Ie={},Re=[];for(let nt=0;nt<_.stops.length;nt++){const St=_.stops[nt],qt=St[0].zoom;Ie[qt]===void 0&&(Ie[qt]={zoom:qt,type:_.type,property:_.property,default:_.default,stops:[]},Re.push(qt)),Ie[qt].stops.push([St[0].value,St[1]])}const Ge=[];for(const nt of Re)Ge.push([Ie[nt].zoom,ne(Ie[nt],d)]);const rt={name:"linear"};return{kind:"composite",interpolationType:rt,interpolationFactor:Mr.interpolationFactor.bind(void 0,rt),zoomStops:Ge.map(nt=>nt[0]),evaluate:({zoom:nt},St)=>Ar({stops:Ge,base:_.base},d,nt).evaluate(nt,St)}}if(M){const Ie=U==="exponential"?{name:"exponential",base:_.base!==void 0?_.base:1}:null;return{kind:"camera",interpolationType:Ie,interpolationFactor:Mr.interpolationFactor.bind(void 0,Ie),zoomStops:_.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>Y(_,d,Re,oe,ye)}}return{kind:"source",evaluate(Ie,Re){const Ge=Re&&Re.properties?Re.properties[_.property]:void 0;return Ge===void 0?Ve(_.default,d.default):Y(_,d,Ge,oe,ye)}}}function Ve(_,d,v){return _!==void 0?_:d!==void 0?d:v!==void 0?v:void 0}function Rt(_,d,v,S,M){return Ve(typeof v===M?S[v]:void 0,_.default,d.default)}function ar(_,d,v){if(Hn(v)!=="number")return Ve(_.default,d.default);const S=_.stops.length;if(S===1||v<=_.stops[0][0])return _.stops[0][1];if(v>=_.stops[S-1][0])return _.stops[S-1][1];const M=Ot(_.stops.map(U=>U[0]),v);return _.stops[M][1]}function Ar(_,d,v){const S=_.base!==void 0?_.base:1;if(Hn(v)!=="number")return Ve(_.default,d.default);const M=_.stops.length;if(M===1||v<=_.stops[0][0])return _.stops[0][1];if(v>=_.stops[M-1][0])return _.stops[M-1][1];const U=Ot(_.stops.map(Ie=>Ie[0]),v),q=function(Ie,Re,Ge,rt){const nt=rt-Ge,St=Ie-Ge;return nt===0?0:Re===1?St/nt:(Math.pow(Re,St)-1)/(Math.pow(Re,nt)-1)}(v,S,_.stops[U][0],_.stops[U+1][0]),Y=_.stops[U][1],oe=_.stops[U+1][1],ye=_r[d.type]||Wu;return typeof Y.evaluate=="function"?{evaluate(...Ie){const Re=Y.evaluate.apply(void 0,Ie),Ge=oe.evaluate.apply(void 0,Ie);if(Re!==void 0&&Ge!==void 0)return ye(Re,Ge,q,_.colorSpace)}}:ye(Y,oe,q,_.colorSpace)}function Hr(_,d,v){switch(d.type){case"color":v=tn.parse(v);break;case"formatted":v=Ko.fromString(v.toString());break;case"resolvedImage":v=ts.fromString(v.toString());break;case"padding":v=Xa.parse(v);break;default:Hn(v)===d.type||d.type==="enum"&&d.values[v]||(v=void 0)}return Ve(v,_.default,d.default)}ce.register(Us,{error:[{kind:"error"},[Br],(_,[d])=>{throw new Jo(d.evaluate(_))}],typeof:[Br,[fr],(_,[d])=>Xn(Ao(d.evaluate(_)))],"to-rgba":[Rn(Or,4),[qi],(_,[d])=>{const[v,S,M,U]=d.evaluate(_).rgb;return[255*v,255*S,255*M,U]}],rgb:[qi,[Or,Or,Or],Gu],rgba:[qi,[Or,Or,Or,Or],Gu],has:{type:Ni,overloads:[[[Br],(_,[d])=>Sc(d.evaluate(_),_.properties())],[[Br,kt],(_,[d,v])=>Sc(d.evaluate(_),v.evaluate(_))]]},get:{type:fr,overloads:[[[Br],(_,[d])=>Kl(d.evaluate(_),_.properties())],[[Br,kt],(_,[d,v])=>Kl(d.evaluate(_),v.evaluate(_))]]},"feature-state":[fr,[Br],(_,[d])=>Kl(d.evaluate(_),_.featureState||{})],properties:[kt,[],_=>_.properties()],"geometry-type":[Br,[],_=>_.geometryType()],id:[fr,[],_=>_.id()],zoom:[Or,[],_=>_.globals.zoom],"heatmap-density":[Or,[],_=>_.globals.heatmapDensity||0],"line-progress":[Or,[],_=>_.globals.lineProgress||0],accumulated:[fr,[],_=>_.globals.accumulated===void 0?null:_.globals.accumulated],"+":[Or,qs(Or),(_,d)=>{let v=0;for(const S of d)v+=S.evaluate(_);return v}],"*":[Or,qs(Or),(_,d)=>{let v=1;for(const S of d)v*=S.evaluate(_);return v}],"-":{type:Or,overloads:[[[Or,Or],(_,[d,v])=>d.evaluate(_)-v.evaluate(_)],[[Or],(_,[d])=>-d.evaluate(_)]]},"/":[Or,[Or,Or],(_,[d,v])=>d.evaluate(_)/v.evaluate(_)],"%":[Or,[Or,Or],(_,[d,v])=>d.evaluate(_)%v.evaluate(_)],ln2:[Or,[],()=>Math.LN2],pi:[Or,[],()=>Math.PI],e:[Or,[],()=>Math.E],"^":[Or,[Or,Or],(_,[d,v])=>Math.pow(d.evaluate(_),v.evaluate(_))],sqrt:[Or,[Or],(_,[d])=>Math.sqrt(d.evaluate(_))],log10:[Or,[Or],(_,[d])=>Math.log(d.evaluate(_))/Math.LN10],ln:[Or,[Or],(_,[d])=>Math.log(d.evaluate(_))],log2:[Or,[Or],(_,[d])=>Math.log(d.evaluate(_))/Math.LN2],sin:[Or,[Or],(_,[d])=>Math.sin(d.evaluate(_))],cos:[Or,[Or],(_,[d])=>Math.cos(d.evaluate(_))],tan:[Or,[Or],(_,[d])=>Math.tan(d.evaluate(_))],asin:[Or,[Or],(_,[d])=>Math.asin(d.evaluate(_))],acos:[Or,[Or],(_,[d])=>Math.acos(d.evaluate(_))],atan:[Or,[Or],(_,[d])=>Math.atan(d.evaluate(_))],min:[Or,qs(Or),(_,d)=>Math.min(...d.map(v=>v.evaluate(_)))],max:[Or,qs(Or),(_,d)=>Math.max(...d.map(v=>v.evaluate(_)))],abs:[Or,[Or],(_,[d])=>Math.abs(d.evaluate(_))],round:[Or,[Or],(_,[d])=>{const v=d.evaluate(_);return v<0?-Math.round(-v):Math.round(v)}],floor:[Or,[Or],(_,[d])=>Math.floor(d.evaluate(_))],ceil:[Or,[Or],(_,[d])=>Math.ceil(d.evaluate(_))],"filter-==":[Ni,[Br,fr],(_,[d,v])=>_.properties()[d.value]===v.value],"filter-id-==":[Ni,[fr],(_,[d])=>_.id()===d.value],"filter-type-==":[Ni,[Br],(_,[d])=>_.geometryType()===d.value],"filter-<":[Ni,[Br,fr],(_,[d,v])=>{const S=_.properties()[d.value],M=v.value;return typeof S==typeof M&&S<M}],"filter-id-<":[Ni,[fr],(_,[d])=>{const v=_.id(),S=d.value;return typeof v==typeof S&&v<S}],"filter->":[Ni,[Br,fr],(_,[d,v])=>{const S=_.properties()[d.value],M=v.value;return typeof S==typeof M&&S>M}],"filter-id->":[Ni,[fr],(_,[d])=>{const v=_.id(),S=d.value;return typeof v==typeof S&&v>S}],"filter-<=":[Ni,[Br,fr],(_,[d,v])=>{const S=_.properties()[d.value],M=v.value;return typeof S==typeof M&&S<=M}],"filter-id-<=":[Ni,[fr],(_,[d])=>{const v=_.id(),S=d.value;return typeof v==typeof S&&v<=S}],"filter->=":[Ni,[Br,fr],(_,[d,v])=>{const S=_.properties()[d.value],M=v.value;return typeof S==typeof M&&S>=M}],"filter-id->=":[Ni,[fr],(_,[d])=>{const v=_.id(),S=d.value;return typeof v==typeof S&&v>=S}],"filter-has":[Ni,[fr],(_,[d])=>d.value in _.properties()],"filter-has-id":[Ni,[],_=>_.id()!==null&&_.id()!==void 0],"filter-type-in":[Ni,[Rn(Br)],(_,[d])=>d.value.indexOf(_.geometryType())>=0],"filter-id-in":[Ni,[Rn(fr)],(_,[d])=>d.value.indexOf(_.id())>=0],"filter-in-small":[Ni,[Br,Rn(fr)],(_,[d,v])=>v.value.indexOf(_.properties()[d.value])>=0],"filter-in-large":[Ni,[Br,Rn(fr)],(_,[d,v])=>function(S,M,U,q){for(;U<=q;){const Y=U+q>>1;if(M[Y]===S)return!0;M[Y]>S?q=Y-1:U=Y+1}return!1}(_.properties()[d.value],v.value,0,v.value.length-1)],all:{type:Ni,overloads:[[[Ni,Ni],(_,[d,v])=>d.evaluate(_)&&v.evaluate(_)],[qs(Ni),(_,d)=>{for(const v of d)if(!v.evaluate(_))return!1;return!0}]]},any:{type:Ni,overloads:[[[Ni,Ni],(_,[d,v])=>d.evaluate(_)||v.evaluate(_)],[qs(Ni),(_,d)=>{for(const v of d)if(v.evaluate(_))return!0;return!1}]]},"!":[Ni,[Ni],(_,[d])=>!d.evaluate(_)],"is-supported-script":[Ni,[Br],(_,[d])=>{const v=_.globals&&_.globals.isSupportedScript;return!v||v(d.evaluate(_))}],upcase:[Br,[Br],(_,[d])=>d.evaluate(_).toUpperCase()],downcase:[Br,[Br],(_,[d])=>d.evaluate(_).toLowerCase()],concat:[Br,qs(fr),(_,d)=>d.map(v=>Ya(v.evaluate(_))).join("")],"resolved-locale":[Br,[Qr],(_,[d])=>d.evaluate(_).resolvedLocale()]});class Wr{constructor(d,v){var S;this.expression=d,this._warningHistory={},this._evaluator=new Kn,this._defaultValue=v?(S=v).type==="color"&&Vs(S.default)?new tn(0,0,0,0):S.type==="color"?tn.parse(S.default)||null:S.type==="padding"?Xa.parse(S.default)||null:S.type==="variableAnchorOffsetCollection"?pa.parse(S.default)||null:S.default===void 0?null:S.default:null,this._enumValues=v&&v.type==="enum"?v.values:null}evaluateWithoutErrorHandling(d,v,S,M,U,q){return this._evaluator.globals=d,this._evaluator.feature=v,this._evaluator.featureState=S,this._evaluator.canonical=M,this._evaluator.availableImages=U||null,this._evaluator.formattedSection=q,this.expression.evaluate(this._evaluator)}evaluate(d,v,S,M,U,q){this._evaluator.globals=d,this._evaluator.feature=v||null,this._evaluator.featureState=S||null,this._evaluator.canonical=M,this._evaluator.availableImages=U||null,this._evaluator.formattedSection=q||null;try{const Y=this.expression.evaluate(this._evaluator);if(Y==null||typeof Y=="number"&&Y!=Y)return this._defaultValue;if(this._enumValues&&!(Y in this._enumValues))throw new Jo(`Expected value to be one of ${Object.keys(this._enumValues).map(oe=>JSON.stringify(oe)).join(", ")}, but found ${JSON.stringify(Y)} instead.`);return Y}catch(Y){return this._warningHistory[Y.message]||(this._warningHistory[Y.message]=!0,typeof console<"u"&&console.warn(Y.message)),this._defaultValue}}}function Di(_){return Array.isArray(_)&&_.length>0&&typeof _[0]=="string"&&_[0]in Us}function fi(_,d){const v=new rs(Us,Pe,[],d?function(M){const U={color:qi,string:Br,number:Or,enum:Br,boolean:Ni,formatted:Ei,padding:ki,resolvedImage:Zn,variableAnchorOffsetCollection:un};return M.type==="array"?Rn(U[M.value]||fr,M.length):U[M.type]}(d):void 0),S=v.parse(_,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return S?Mi(new Wr(S,d)):bi(v.errors)}class xn{constructor(d,v){this.kind=d,this._styleExpression=v,this.isStateDependent=d!=="constant"&&!bt(v.expression)}evaluateWithoutErrorHandling(d,v,S,M,U,q){return this._styleExpression.evaluateWithoutErrorHandling(d,v,S,M,U,q)}evaluate(d,v,S,M,U,q){return this._styleExpression.evaluate(d,v,S,M,U,q)}}class Wi{constructor(d,v,S,M){this.kind=d,this.zoomStops=S,this._styleExpression=v,this.isStateDependent=d!=="camera"&&!bt(v.expression),this.interpolationType=M}evaluateWithoutErrorHandling(d,v,S,M,U,q){return this._styleExpression.evaluateWithoutErrorHandling(d,v,S,M,U,q)}evaluate(d,v,S,M,U,q){return this._styleExpression.evaluate(d,v,S,M,U,q)}interpolationFactor(d,v,S){return this.interpolationType?Mr.interpolationFactor(this.interpolationType,d,v,S):0}}function nn(_,d){const v=fi(_,d);if(v.result==="error")return v;const S=v.value.expression,M=tt(S);if(!M&&!rl(d))return bi([new Ui("","data expressions not supported")]);const U=Bt(S,["zoom"]);if(!U&&!il(d))return bi([new Ui("","zoom expressions not supported")]);const q=Oo(S);return q||U?q instanceof Ui?bi([q]):q instanceof Mr&&!Il(d)?bi([new Ui("",'"interpolate" expressions cannot be used with this property')]):Mi(q?new Wi(M?"camera":"composite",v.value,q.labels,q instanceof Mr?q.interpolation:void 0):new xn(M?"constant":"source",v.value)):bi([new Ui("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class xo{constructor(d,v){this._parameters=d,this._specification=v,ji(this,ne(this._parameters,this._specification))}static deserialize(d){return new xo(d._parameters,d._specification)}static serialize(d){return{_parameters:d._parameters,_specification:d._specification}}}function Oo(_){let d=null;if(_ instanceof ot)d=Oo(_.result);else if(_ instanceof wi){for(const v of _.args)if(d=Oo(v),d)break}else(_ instanceof wr||_ instanceof Mr)&&_.input instanceof ce&&_.input.name==="zoom"&&(d=_);return d instanceof Ui||_.eachChild(v=>{const S=Oo(v);S instanceof Ui?d=S:!d&&S?d=new Ui("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):d&&S&&d!==S&&(d=new Ui("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),d}function Wo(_){if(_===!0||_===!1)return!0;if(!Array.isArray(_)||_.length===0)return!1;switch(_[0]){case"has":return _.length>=2&&_[1]!=="$id"&&_[1]!=="$type";case"in":return _.length>=3&&(typeof _[1]!="string"||Array.isArray(_[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return _.length!==3||Array.isArray(_[1])||Array.isArray(_[2]);case"any":case"all":for(const d of _.slice(1))if(!Wo(d)&&typeof d!="boolean")return!1;return!0;default:return!0}}const za={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function jo(_){if(_==null)return{filter:()=>!0,needGeometry:!1};Wo(_)||(_=cs(_));const d=fi(_,za);if(d.result==="error")throw new Error(d.value.map(v=>`${v.key}: ${v.message}`).join(", "));return{filter:(v,S,M)=>d.value.evaluate(v,S,{},M),needGeometry:Sa(_)}}function Fn(_,d){return _<d?-1:_>d?1:0}function Sa(_){if(!Array.isArray(_))return!1;if(_[0]==="within")return!0;for(let d=1;d<_.length;d++)if(Sa(_[d]))return!0;return!1}function cs(_){if(!_)return!0;const d=_[0];return _.length<=1?d!=="any":d==="=="?nl(_[1],_[2],"=="):d==="!="?Tl(nl(_[1],_[2],"==")):d==="<"||d===">"||d==="<="||d===">="?nl(_[1],_[2],d):d==="any"?(v=_.slice(1),["any"].concat(v.map(cs))):d==="all"?["all"].concat(_.slice(1).map(cs)):d==="none"?["all"].concat(_.slice(1).map(cs).map(Tl)):d==="in"?Ll(_[1],_.slice(2)):d==="!in"?Tl(Ll(_[1],_.slice(2))):d==="has"?Jl(_[1]):d==="!has"?Tl(Jl(_[1])):d!=="within"||_;var v}function nl(_,d,v){switch(_){case"$type":return[`filter-type-${v}`,d];case"$id":return[`filter-id-${v}`,d];default:return[`filter-${v}`,_,d]}}function Ll(_,d){if(d.length===0)return!1;switch(_){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(v=>typeof v!=typeof d[0])?["filter-in-large",_,["literal",d.sort(Fn)]]:["filter-in-small",_,["literal",d]]}}function Jl(_){switch(_){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",_]}}function Tl(_){return["!",_]}function ku(_){const d=typeof _;if(d==="number"||d==="boolean"||d==="string"||_==null)return JSON.stringify(_);if(Array.isArray(_)){let M="[";for(const U of _)M+=`${ku(U)},`;return`${M}]`}const v=Object.keys(_).sort();let S="{";for(let M=0;M<v.length;M++)S+=`${JSON.stringify(v[M])}:${ku(_[v[M]])},`;return`${S}}`}function Ec(_){let d="";for(const v of Fr)d+=`/${ku(_[v])}`;return d}function Ql(_){const d=_.value;return d?[new Nr(_.key,d,"constants have been deprecated as of v8")]:[]}function ao(_){return _ instanceof Number||_ instanceof String||_ instanceof Boolean?_.valueOf():_}function ks(_){if(Array.isArray(_))return _.map(ks);if(_ instanceof Object&&!(_ instanceof Number||_ instanceof String||_ instanceof Boolean)){const d={};for(const v in _)d[v]=ks(_[v]);return d}return ao(_)}function va(_){const d=_.key,v=_.value,S=_.valueSpec||{},M=_.objectElementValidators||{},U=_.style,q=_.styleSpec,Y=_.validateSpec;let oe=[];const ye=Hn(v);if(ye!=="object")return[new Nr(d,v,`object expected, ${ye} found`)];for(const Ie in v){const Re=Ie.split(".")[0],Ge=S[Re]||S["*"];let rt;if(M[Re])rt=M[Re];else if(S[Re])rt=Y;else if(M["*"])rt=M["*"];else{if(!S["*"]){oe.push(new Nr(d,v[Ie],`unknown property "${Ie}"`));continue}rt=Y}oe=oe.concat(rt({key:(d&&`${d}.`)+Ie,value:v[Ie],valueSpec:Ge,style:U,styleSpec:q,object:v,objectKey:Ie,validateSpec:Y},v))}for(const Ie in S)M[Ie]||S[Ie].required&&S[Ie].default===void 0&&v[Ie]===void 0&&oe.push(new Nr(d,v,`missing required property "${Ie}"`));return oe}function Pl(_){const d=_.value,v=_.valueSpec,S=_.style,M=_.styleSpec,U=_.key,q=_.arrayElementValidator||_.validateSpec;if(Hn(d)!=="array")return[new Nr(U,d,`array expected, ${Hn(d)} found`)];if(v.length&&d.length!==v.length)return[new Nr(U,d,`array length ${v.length} expected, length ${d.length} found`)];if(v["min-length"]&&d.length<v["min-length"])return[new Nr(U,d,`array length at least ${v["min-length"]} expected, length ${d.length} found`)];let Y={type:v.value,values:v.values};M.$version<7&&(Y.function=v.function),Hn(v.value)==="object"&&(Y=v.value);let oe=[];for(let ye=0;ye<d.length;ye++)oe=oe.concat(q({array:d,arrayIndex:ye,value:d[ye],valueSpec:Y,validateSpec:_.validateSpec,style:S,styleSpec:M,key:`${U}[${ye}]`}));return oe}function ol(_){const d=_.key,v=_.value,S=_.valueSpec;let M=Hn(v);return M==="number"&&v!=v&&(M="NaN"),M!=="number"?[new Nr(d,v,`number expected, ${M} found`)]:"minimum"in S&&v<S.minimum?[new Nr(d,v,`${v} is less than the minimum value ${S.minimum}`)]:"maximum"in S&&v>S.maximum?[new Nr(d,v,`${v} is greater than the maximum value ${S.maximum}`)]:[]}function Ea(_){const d=_.valueSpec,v=ao(_.value.type);let S,M,U,q={};const Y=v!=="categorical"&&_.value.property===void 0,oe=!Y,ye=Hn(_.value.stops)==="array"&&Hn(_.value.stops[0])==="array"&&Hn(_.value.stops[0][0])==="object",Ie=va({key:_.key,value:_.value,valueSpec:_.styleSpec.function,validateSpec:_.validateSpec,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{stops:function(rt){if(v==="identity")return[new Nr(rt.key,rt.value,'identity function may not have a "stops" property')];let nt=[];const St=rt.value;return nt=nt.concat(Pl({key:rt.key,value:St,valueSpec:rt.valueSpec,validateSpec:rt.validateSpec,style:rt.style,styleSpec:rt.styleSpec,arrayElementValidator:Re})),Hn(St)==="array"&&St.length===0&&nt.push(new Nr(rt.key,St,"array must have at least one stop")),nt},default:function(rt){return rt.validateSpec({key:rt.key,value:rt.value,valueSpec:d,validateSpec:rt.validateSpec,style:rt.style,styleSpec:rt.styleSpec})}}});return v==="identity"&&Y&&Ie.push(new Nr(_.key,_.value,'missing required property "property"')),v==="identity"||_.value.stops||Ie.push(new Nr(_.key,_.value,'missing required property "stops"')),v==="exponential"&&_.valueSpec.expression&&!Il(_.valueSpec)&&Ie.push(new Nr(_.key,_.value,"exponential functions not supported")),_.styleSpec.$version>=8&&(oe&&!rl(_.valueSpec)?Ie.push(new Nr(_.key,_.value,"property functions not supported")):Y&&!il(_.valueSpec)&&Ie.push(new Nr(_.key,_.value,"zoom functions not supported"))),v!=="categorical"&&!ye||_.value.property!==void 0||Ie.push(new Nr(_.key,_.value,'"property" property is required')),Ie;function Re(rt){let nt=[];const St=rt.value,qt=rt.key;if(Hn(St)!=="array")return[new Nr(qt,St,`array expected, ${Hn(St)} found`)];if(St.length!==2)return[new Nr(qt,St,`array length 2 expected, length ${St.length} found`)];if(ye){if(Hn(St[0])!=="object")return[new Nr(qt,St,`object expected, ${Hn(St[0])} found`)];if(St[0].zoom===void 0)return[new Nr(qt,St,"object stop key must have zoom")];if(St[0].value===void 0)return[new Nr(qt,St,"object stop key must have value")];if(U&&U>ao(St[0].zoom))return[new Nr(qt,St[0].zoom,"stop zoom values must appear in ascending order")];ao(St[0].zoom)!==U&&(U=ao(St[0].zoom),M=void 0,q={}),nt=nt.concat(va({key:`${qt}[0]`,value:St[0],valueSpec:{zoom:{}},validateSpec:rt.validateSpec,style:rt.style,styleSpec:rt.styleSpec,objectElementValidators:{zoom:ol,value:Ge}}))}else nt=nt.concat(Ge({key:`${qt}[0]`,value:St[0],valueSpec:{},validateSpec:rt.validateSpec,style:rt.style,styleSpec:rt.styleSpec},St));return Di(ks(St[1]))?nt.concat([new Nr(`${qt}[1]`,St[1],"expressions are not allowed in function stops.")]):nt.concat(rt.validateSpec({key:`${qt}[1]`,value:St[1],valueSpec:d,validateSpec:rt.validateSpec,style:rt.style,styleSpec:rt.styleSpec}))}function Ge(rt,nt){const St=Hn(rt.value),qt=ao(rt.value),Zt=rt.value!==null?rt.value:nt;if(S){if(St!==S)return[new Nr(rt.key,Zt,`${St} stop domain type must match previous stop domain type ${S}`)]}else S=St;if(St!=="number"&&St!=="string"&&St!=="boolean")return[new Nr(rt.key,Zt,"stop domain value must be a number, string, or boolean")];if(St!=="number"&&v!=="categorical"){let gr=`number expected, ${St} found`;return rl(d)&&v===void 0&&(gr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Nr(rt.key,Zt,gr)]}return v!=="categorical"||St!=="number"||isFinite(qt)&&Math.floor(qt)===qt?v!=="categorical"&&St==="number"&&M!==void 0&&qt<M?[new Nr(rt.key,Zt,"stop domain values must appear in ascending order")]:(M=qt,v==="categorical"&&qt in q?[new Nr(rt.key,Zt,"stop domain values must be unique")]:(q[qt]=!0,[])):[new Nr(rt.key,Zt,`integer expected, found ${qt}`)]}}function As(_){const d=(_.expressionContext==="property"?nn:fi)(ks(_.value),_.valueSpec);if(d.result==="error")return d.value.map(S=>new Nr(`${_.key}${S.key}`,_.value,S.message));const v=d.value.expression||d.value._styleExpression.expression;if(_.expressionContext==="property"&&_.propertyKey==="text-font"&&!v.outputDefined())return[new Nr(_.key,_.value,`Invalid data expression for "${_.propertyKey}". Output values must be contained as literals within the expression.`)];if(_.expressionContext==="property"&&_.propertyType==="layout"&&!bt(v))return[new Nr(_.key,_.value,'"feature-state" data expressions are not supported with layout properties.')];if(_.expressionContext==="filter"&&!bt(v))return[new Nr(_.key,_.value,'"feature-state" data expressions are not supported with filters.')];if(_.expressionContext&&_.expressionContext.indexOf("cluster")===0){if(!Bt(v,["zoom","feature-state"]))return[new Nr(_.key,_.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(_.expressionContext==="cluster-initial"&&!tt(v))return[new Nr(_.key,_.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function al(_){const d=_.key,v=_.value,S=_.valueSpec,M=[];return Array.isArray(S.values)?S.values.indexOf(ao(v))===-1&&M.push(new Nr(d,v,`expected one of [${S.values.join(", ")}], ${JSON.stringify(v)} found`)):Object.keys(S.values).indexOf(ao(v))===-1&&M.push(new Nr(d,v,`expected one of [${Object.keys(S.values).join(", ")}], ${JSON.stringify(v)} found`)),M}function eu(_){return Wo(ks(_.value))?As(ji({},_,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ka(_)}function Ka(_){const d=_.value,v=_.key;if(Hn(d)!=="array")return[new Nr(v,d,`array expected, ${Hn(d)} found`)];const S=_.styleSpec;let M,U=[];if(d.length<1)return[new Nr(v,d,"filter array must have at least 1 element")];switch(U=U.concat(al({key:`${v}[0]`,value:d[0],valueSpec:S.filter_operator,style:_.style,styleSpec:_.styleSpec})),ao(d[0])){case"<":case"<=":case">":case">=":d.length>=2&&ao(d[1])==="$type"&&U.push(new Nr(v,d,`"$type" cannot be use with operator "${d[0]}"`));case"==":case"!=":d.length!==3&&U.push(new Nr(v,d,`filter array for operator "${d[0]}" must have 3 elements`));case"in":case"!in":d.length>=2&&(M=Hn(d[1]),M!=="string"&&U.push(new Nr(`${v}[1]`,d[1],`string expected, ${M} found`)));for(let q=2;q<d.length;q++)M=Hn(d[q]),ao(d[1])==="$type"?U=U.concat(al({key:`${v}[${q}]`,value:d[q],valueSpec:S.geometry_type,style:_.style,styleSpec:_.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&U.push(new Nr(`${v}[${q}]`,d[q],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let q=1;q<d.length;q++)U=U.concat(Ka({key:`${v}[${q}]`,value:d[q],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":M=Hn(d[1]),d.length!==2?U.push(new Nr(v,d,`filter array for "${d[0]}" operator must have 2 elements`)):M!=="string"&&U.push(new Nr(`${v}[1]`,d[1],`string expected, ${M} found`));break;case"within":M=Hn(d[1]),d.length!==2?U.push(new Nr(v,d,`filter array for "${d[0]}" operator must have 2 elements`)):M!=="object"&&U.push(new Nr(`${v}[1]`,d[1],`object expected, ${M} found`))}return U}function tu(_,d){const v=_.key,S=_.validateSpec,M=_.style,U=_.styleSpec,q=_.value,Y=_.objectKey,oe=U[`${d}_${_.layerType}`];if(!oe)return[];const ye=Y.match(/^(.*)-transition$/);if(d==="paint"&&ye&&oe[ye[1]]&&oe[ye[1]].transition)return S({key:v,value:q,valueSpec:U.transition,style:M,styleSpec:U});const Ie=_.valueSpec||oe[Y];if(!Ie)return[new Nr(v,q,`unknown property "${Y}"`)];let Re;if(Hn(q)==="string"&&rl(Ie)&&!Ie.tokens&&(Re=/^{([^}]+)}$/.exec(q)))return[new Nr(v,q,`"${Y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const Ge=[];return _.layerType==="symbol"&&(Y==="text-field"&&M&&!M.glyphs&&Ge.push(new Nr(v,q,'use of "text-field" requires a style "glyphs" property')),Y==="text-font"&&Vs(ks(q))&&ao(q.type)==="identity"&&Ge.push(new Nr(v,q,'"text-font" does not support identity functions'))),Ge.concat(S({key:_.key,value:q,valueSpec:Ie,style:M,styleSpec:U,expressionContext:"property",propertyType:d,propertyKey:Y}))}function ru(_){return tu(_,"paint")}function Zu(_){return tu(_,"layout")}function Hs(_){let d=[];const v=_.value,S=_.key,M=_.style,U=_.styleSpec;v.type||v.ref||d.push(new Nr(S,v,'either "type" or "ref" is required'));let q=ao(v.type);const Y=ao(v.ref);if(v.id){const oe=ao(v.id);for(let ye=0;ye<_.arrayIndex;ye++){const Ie=M.layers[ye];ao(Ie.id)===oe&&d.push(new Nr(S,v.id,`duplicate layer id "${v.id}", previously used at line ${Ie.id.__line__}`))}}if("ref"in v){let oe;["type","source","source-layer","filter","layout"].forEach(ye=>{ye in v&&d.push(new Nr(S,v[ye],`"${ye}" is prohibited for ref layers`))}),M.layers.forEach(ye=>{ao(ye.id)===Y&&(oe=ye)}),oe?oe.ref?d.push(new Nr(S,v.ref,"ref cannot reference another ref layer")):q=ao(oe.type):d.push(new Nr(S,v.ref,`ref layer "${Y}" not found`))}else if(q!=="background")if(v.source){const oe=M.sources&&M.sources[v.source],ye=oe&&ao(oe.type);oe?ye==="vector"&&q==="raster"?d.push(new Nr(S,v.source,`layer "${v.id}" requires a raster source`)):ye==="raster"&&q!=="raster"?d.push(new Nr(S,v.source,`layer "${v.id}" requires a vector source`)):ye!=="vector"||v["source-layer"]?ye==="raster-dem"&&q!=="hillshade"?d.push(new Nr(S,v.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="line"||!v.paint||!v.paint["line-gradient"]||ye==="geojson"&&oe.lineMetrics||d.push(new Nr(S,v,`layer "${v.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):d.push(new Nr(S,v,`layer "${v.id}" must specify a "source-layer"`)):d.push(new Nr(S,v.source,`source "${v.source}" not found`))}else d.push(new Nr(S,v,'missing required property "source"'));return d=d.concat(va({key:S,value:v,valueSpec:U.layer,style:_.style,styleSpec:_.styleSpec,validateSpec:_.validateSpec,objectElementValidators:{"*":()=>[],type:()=>_.validateSpec({key:`${S}.type`,value:v.type,valueSpec:U.layer.type,style:_.style,styleSpec:_.styleSpec,validateSpec:_.validateSpec,object:v,objectKey:"type"}),filter:eu,layout:oe=>va({layer:v,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,validateSpec:oe.validateSpec,objectElementValidators:{"*":ye=>Zu(ji({layerType:q},ye))}}),paint:oe=>va({layer:v,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,validateSpec:oe.validateSpec,objectElementValidators:{"*":ye=>ru(ji({layerType:q},ye))}})}})),d}function ma(_){const d=_.value,v=_.key,S=Hn(d);return S!=="string"?[new Nr(v,d,`string expected, ${S} found`)]:[]}const Ss={promoteId:function({key:_,value:d}){if(Hn(d)==="string")return ma({key:_,value:d});{const v=[];for(const S in d)v.push(...ma({key:`${_}.${S}`,value:d[S]}));return v}}};function Es(_){const d=_.value,v=_.key,S=_.styleSpec,M=_.style,U=_.validateSpec;if(!d.type)return[new Nr(v,d,'"type" is required')];const q=ao(d.type);let Y;switch(q){case"vector":case"raster":case"raster-dem":return Y=va({key:v,value:d,valueSpec:S[`source_${q.replace("-","_")}`],style:_.style,styleSpec:S,objectElementValidators:Ss,validateSpec:U}),Y;case"geojson":if(Y=va({key:v,value:d,valueSpec:S.source_geojson,style:M,styleSpec:S,validateSpec:U,objectElementValidators:Ss}),d.cluster)for(const oe in d.clusterProperties){const[ye,Ie]=d.clusterProperties[oe],Re=typeof ye=="string"?[ye,["accumulated"],["get",oe]]:ye;Y.push(...As({key:`${v}.${oe}.map`,value:Ie,validateSpec:U,expressionContext:"cluster-map"})),Y.push(...As({key:`${v}.${oe}.reduce`,value:Re,validateSpec:U,expressionContext:"cluster-reduce"}))}return Y;case"video":return va({key:v,value:d,valueSpec:S.source_video,style:M,validateSpec:U,styleSpec:S});case"image":return va({key:v,value:d,valueSpec:S.source_image,style:M,validateSpec:U,styleSpec:S});case"canvas":return[new Nr(v,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return al({key:`${v}.type`,value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,validateSpec:U,styleSpec:S})}}function fs(_){const d=_.value,v=_.styleSpec,S=v.light,M=_.style;let U=[];const q=Hn(d);if(d===void 0)return U;if(q!=="object")return U=U.concat([new Nr("light",d,`object expected, ${q} found`)]),U;for(const Y in d){const oe=Y.match(/^(.*)-transition$/);U=U.concat(oe&&S[oe[1]]&&S[oe[1]].transition?_.validateSpec({key:Y,value:d[Y],valueSpec:v.transition,validateSpec:_.validateSpec,style:M,styleSpec:v}):S[Y]?_.validateSpec({key:Y,value:d[Y],valueSpec:S[Y],validateSpec:_.validateSpec,style:M,styleSpec:v}):[new Nr(Y,d[Y],`unknown property "${Y}"`)])}return U}function hs(_){const d=_.value,v=_.styleSpec,S=v.terrain,M=_.style;let U=[];const q=Hn(d);if(d===void 0)return U;if(q!=="object")return U=U.concat([new Nr("terrain",d,`object expected, ${q} found`)]),U;for(const Y in d)U=U.concat(S[Y]?_.validateSpec({key:Y,value:d[Y],valueSpec:S[Y],validateSpec:_.validateSpec,style:M,styleSpec:v}):[new Nr(Y,d[Y],`unknown property "${Y}"`)]);return U}function Ml(_){let d=[];const v=_.value,S=_.key;if(Array.isArray(v)){const M=[],U=[];for(const q in v)v[q].id&&M.includes(v[q].id)&&d.push(new Nr(S,v,`all the sprites' ids must be unique, but ${v[q].id} is duplicated`)),M.push(v[q].id),v[q].url&&U.includes(v[q].url)&&d.push(new Nr(S,v,`all the sprites' URLs must be unique, but ${v[q].url} is duplicated`)),U.push(v[q].url),d=d.concat(va({key:`${S}[${q}]`,value:v[q],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:_.validateSpec}));return d}return ma({key:S,value:v})}const ds={"*":()=>[],array:Pl,boolean:function(_){const d=_.value,v=_.key,S=Hn(d);return S!=="boolean"?[new Nr(v,d,`boolean expected, ${S} found`)]:[]},number:ol,color:function(_){const d=_.key,v=_.value,S=Hn(v);return S!=="string"?[new Nr(d,v,`color expected, ${S} found`)]:tn.parse(String(v))?[]:[new Nr(d,v,`color expected, "${v}" found`)]},constants:Ql,enum:al,filter:eu,function:Ea,layer:Hs,object:va,source:Es,light:fs,terrain:hs,string:ma,formatted:function(_){return ma(_).length===0?[]:As(_)},resolvedImage:function(_){return ma(_).length===0?[]:As(_)},padding:function(_){const d=_.key,v=_.value;if(Hn(v)==="array"){if(v.length<1||v.length>4)return[new Nr(d,v,`padding requires 1 to 4 values; ${v.length} values found`)];const S={type:"number"};let M=[];for(let U=0;U<v.length;U++)M=M.concat(_.validateSpec({key:`${d}[${U}]`,value:v[U],validateSpec:_.validateSpec,valueSpec:S}));return M}return ol({key:d,value:v,valueSpec:{}})},variableAnchorOffsetCollection:function(_){const d=_.key,v=_.value,S=Hn(v),M=_.styleSpec;if(S!=="array"||v.length<1||v.length%2!=0)return[new Nr(d,v,"variableAnchorOffsetCollection requires a non-empty array of even length")];let U=[];for(let q=0;q<v.length;q+=2)U=U.concat(al({key:`${d}[${q}]`,value:v[q],valueSpec:M.layout_symbol["text-anchor"]})),U=U.concat(Pl({key:`${d}[${q+1}]`,value:v[q+1],valueSpec:{length:2,value:"number"},validateSpec:_.validateSpec,style:_.style,styleSpec:M}));return U},sprite:Ml};function sl(_){const d=_.value,v=_.valueSpec,S=_.styleSpec;return _.validateSpec=sl,v.expression&&Vs(ao(d))?Ea(_):v.expression&&Di(ks(d))?As(_):v.type&&ds[v.type]?ds[v.type](_):va(ji({},_,{valueSpec:v.type?S[v.type]:v}))}function $s(_){const d=_.value,v=_.key,S=ma(_);return S.length||(d.indexOf("{fontstack}")===-1&&S.push(new Nr(v,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&S.push(new Nr(v,d,'"glyphs" url must include a "{range}" token'))),S}function Uo(_,d=It){let v=[];return v=v.concat(sl({key:"",value:_,valueSpec:d.$root,styleSpec:d,style:_,validateSpec:sl,objectElementValidators:{glyphs:$s,"*":()=>[]}})),_.constants&&(v=v.concat(Ql({key:"constants",value:_.constants,style:_,styleSpec:d,validateSpec:sl}))),ps(v)}function _n(_){return function(d){return _({...d,validateSpec:sl})}}function ps(_){return[].concat(_).sort((d,v)=>d.line-v.line)}function Na(_){return function(...d){return ps(_.apply(this,d))}}Uo.source=Na(_n(Es)),Uo.sprite=Na(_n(Ml)),Uo.glyphs=Na(_n($s)),Uo.light=Na(_n(fs)),Uo.terrain=Na(_n(hs)),Uo.layer=Na(_n(Hs)),Uo.filter=Na(_n(eu)),Uo.paintProperty=Na(_n(ru)),Uo.layoutProperty=Na(_n(Zu));const Cs=Uo,Au=Cs.light,ua=Cs.paintProperty,Cc=Cs.layoutProperty;function Ja(_,d){let v=!1;if(d&&d.length)for(const S of d)_.fire(new Er(new Error(S.message))),v=!0;return v}class is{constructor(d,v,S){const M=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;const q=new Int32Array(this.arrayBuffer);d=q[0],this.d=(v=q[1])+2*(S=q[2]);for(let oe=0;oe<this.d*this.d;oe++){const ye=q[3+oe],Ie=q[3+oe+1];M.push(ye===Ie?null:q.subarray(ye,Ie))}const Y=q[3+M.length+1];this.keys=q.subarray(q[3+M.length],Y),this.bboxes=q.subarray(Y),this.insert=this._insertReadonly}else{this.d=v+2*S;for(let q=0;q<this.d*this.d;q++)M.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=d,this.padding=S,this.scale=v/d,this.uid=0;const U=S/v*d;this.min=-U,this.max=d+U}insert(d,v,S,M,U){this._forEachCell(v,S,M,U,this._insertCell,this.uid++,void 0,void 0),this.keys.push(d),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(M),this.bboxes.push(U)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(d,v,S,M,U,q){this.cells[U].push(q)}query(d,v,S,M,U){const q=this.min,Y=this.max;if(d<=q&&v<=q&&Y<=S&&Y<=M&&!U)return Array.prototype.slice.call(this.keys);{const oe=[];return this._forEachCell(d,v,S,M,this._queryCell,oe,{},U),oe}}_queryCell(d,v,S,M,U,q,Y,oe){const ye=this.cells[U];if(ye!==null){const Ie=this.keys,Re=this.bboxes;for(let Ge=0;Ge<ye.length;Ge++){const rt=ye[Ge];if(Y[rt]===void 0){const nt=4*rt;(oe?oe(Re[nt+0],Re[nt+1],Re[nt+2],Re[nt+3]):d<=Re[nt+2]&&v<=Re[nt+3]&&S>=Re[nt+0]&&M>=Re[nt+1])?(Y[rt]=!0,q.push(Ie[rt])):Y[rt]=!1}}}}_forEachCell(d,v,S,M,U,q,Y,oe){const ye=this._convertToCellCoord(d),Ie=this._convertToCellCoord(v),Re=this._convertToCellCoord(S),Ge=this._convertToCellCoord(M);for(let rt=ye;rt<=Re;rt++)for(let nt=Ie;nt<=Ge;nt++){const St=this.d*nt+rt;if((!oe||oe(this._convertFromCellCoord(rt),this._convertFromCellCoord(nt),this._convertFromCellCoord(rt+1),this._convertFromCellCoord(nt+1)))&&U.call(this,d,v,S,M,St,q,Y,oe))return}}_convertFromCellCoord(d){return(d-this.padding)/this.scale}_convertToCellCoord(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const d=this.cells,v=3+this.cells.length+1+1;let S=0;for(let q=0;q<this.cells.length;q++)S+=this.cells[q].length;const M=new Int32Array(v+S+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let U=v;for(let q=0;q<d.length;q++){const Y=d[q];M[3+q]=U,M.set(Y,U),U+=Y.length}return M[3+d.length]=U,M.set(this.keys,U),U+=this.keys.length,M[3+d.length+1]=U,M.set(this.bboxes,U),U+=this.bboxes.length,M.buffer}static serialize(d,v){const S=d.toArrayBuffer();return v&&v.push(S),{buffer:S}}static deserialize(d){return new is(d.buffer)}}const Yn={};function ei(_,d,v={}){if(Yn[_])throw new Error(`${_} is already registered.`);Object.defineProperty(d,"_classRegistryKey",{value:_,writeable:!1}),Yn[_]={klass:d,omit:v.omit||[],shallow:v.shallow||[]}}ei("Object",Object),ei("TransferableGridIndex",is),ei("Color",tn),ei("Error",Error),ei("AJAXError",wt),ei("ResolvedImage",ts),ei("StylePropertyFunction",xo),ei("StyleExpression",Wr,{omit:["_evaluator"]}),ei("ZoomDependentExpression",Wi),ei("ZoomConstantExpression",xn),ei("CompoundExpression",ce,{omit:["_evaluate"]});for(const _ in Us)Us[_]._classRegistryKey||ei(`Expression_${_}`,Us[_]);function zo(_){return _&&typeof ArrayBuffer<"u"&&(_ instanceof ArrayBuffer||_.constructor&&_.constructor.name==="ArrayBuffer")}function Zo(_,d){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp||_ instanceof Blob)return _;if(zo(_)||xt(_))return d&&d.push(_),_;if(ArrayBuffer.isView(_)){const v=_;return d&&d.push(v.buffer),v}if(_ instanceof ImageData)return d&&d.push(_.data.buffer),_;if(Array.isArray(_)){const v=[];for(const S of _)v.push(Zo(S,d));return v}if(typeof _=="object"){const v=_.constructor,S=v._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");if(!Yn[S])throw new Error(`${S} is not registered.`);const M=v.serialize?v.serialize(_,d):{};if(v.serialize){if(d&&M===d[d.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const U in _){if(!_.hasOwnProperty(U)||Yn[S].omit.indexOf(U)>=0)continue;const q=_[U];M[U]=Yn[S].shallow.indexOf(U)>=0?q:Zo(q,d)}_ instanceof Error&&(M.message=_.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(M.$name=S),M}throw new Error("can't serialize object of type "+typeof _)}function Ca(_){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp||_ instanceof Blob||zo(_)||xt(_)||ArrayBuffer.isView(_)||_ instanceof ImageData)return _;if(Array.isArray(_))return _.map(Ca);if(typeof _=="object"){const d=_.$name||"Object";if(!Yn[d])throw new Error(`can't deserialize unregistered class ${d}`);const{klass:v}=Yn[d];if(!v)throw new Error(`can't deserialize unregistered class ${d}`);if(v.deserialize)return v.deserialize(_);const S=Object.create(v.prototype);for(const M of Object.keys(_)){if(M==="$name")continue;const U=_[M];S[M]=Yn[d].shallow.indexOf(M)>=0?U:Ca(U)}return S}throw new Error("can't deserialize object of type "+typeof _)}class Is{constructor(){this.first=!0}update(d,v){const S=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=S,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=S,!0):(this.lastFloorZoom>S?(this.lastIntegerZoom=S+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<S&&(this.lastIntegerZoom=S,this.lastIntegerZoomTime=v),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=S,!0))}}const yi={"Latin-1 Supplement":_=>_>=128&&_<=255,Arabic:_=>_>=1536&&_<=1791,"Arabic Supplement":_=>_>=1872&&_<=1919,"Arabic Extended-A":_=>_>=2208&&_<=2303,"Hangul Jamo":_=>_>=4352&&_<=4607,"Unified Canadian Aboriginal Syllabics":_=>_>=5120&&_<=5759,Khmer:_=>_>=6016&&_<=6143,"Unified Canadian Aboriginal Syllabics Extended":_=>_>=6320&&_<=6399,"General Punctuation":_=>_>=8192&&_<=8303,"Letterlike Symbols":_=>_>=8448&&_<=8527,"Number Forms":_=>_>=8528&&_<=8591,"Miscellaneous Technical":_=>_>=8960&&_<=9215,"Control Pictures":_=>_>=9216&&_<=9279,"Optical Character Recognition":_=>_>=9280&&_<=9311,"Enclosed Alphanumerics":_=>_>=9312&&_<=9471,"Geometric Shapes":_=>_>=9632&&_<=9727,"Miscellaneous Symbols":_=>_>=9728&&_<=9983,"Miscellaneous Symbols and Arrows":_=>_>=11008&&_<=11263,"CJK Radicals Supplement":_=>_>=11904&&_<=12031,"Kangxi Radicals":_=>_>=12032&&_<=12255,"Ideographic Description Characters":_=>_>=12272&&_<=12287,"CJK Symbols and Punctuation":_=>_>=12288&&_<=12351,Hiragana:_=>_>=12352&&_<=12447,Katakana:_=>_>=12448&&_<=12543,Bopomofo:_=>_>=12544&&_<=12591,"Hangul Compatibility Jamo":_=>_>=12592&&_<=12687,Kanbun:_=>_>=12688&&_<=12703,"Bopomofo Extended":_=>_>=12704&&_<=12735,"CJK Strokes":_=>_>=12736&&_<=12783,"Katakana Phonetic Extensions":_=>_>=12784&&_<=12799,"Enclosed CJK Letters and Months":_=>_>=12800&&_<=13055,"CJK Compatibility":_=>_>=13056&&_<=13311,"CJK Unified Ideographs Extension A":_=>_>=13312&&_<=19903,"Yijing Hexagram Symbols":_=>_>=19904&&_<=19967,"CJK Unified Ideographs":_=>_>=19968&&_<=40959,"Yi Syllables":_=>_>=40960&&_<=42127,"Yi Radicals":_=>_>=42128&&_<=42191,"Hangul Jamo Extended-A":_=>_>=43360&&_<=43391,"Hangul Syllables":_=>_>=44032&&_<=55215,"Hangul Jamo Extended-B":_=>_>=55216&&_<=55295,"Private Use Area":_=>_>=57344&&_<=63743,"CJK Compatibility Ideographs":_=>_>=63744&&_<=64255,"Arabic Presentation Forms-A":_=>_>=64336&&_<=65023,"Vertical Forms":_=>_>=65040&&_<=65055,"CJK Compatibility Forms":_=>_>=65072&&_<=65103,"Small Form Variants":_=>_>=65104&&_<=65135,"Arabic Presentation Forms-B":_=>_>=65136&&_<=65279,"Halfwidth and Fullwidth Forms":_=>_>=65280&&_<=65519};function Su(_){for(const d of _)if(Xu(d.charCodeAt(0)))return!0;return!1}function m0(_){for(const d of _)if(!O0(d.charCodeAt(0)))return!1;return!0}function O0(_){return!(yi.Arabic(_)||yi["Arabic Supplement"](_)||yi["Arabic Extended-A"](_)||yi["Arabic Presentation Forms-A"](_)||yi["Arabic Presentation Forms-B"](_))}function Xu(_){return!(_!==746&&_!==747&&(_<4352||!(yi["Bopomofo Extended"](_)||yi.Bopomofo(_)||yi["CJK Compatibility Forms"](_)&&!(_>=65097&&_<=65103)||yi["CJK Compatibility Ideographs"](_)||yi["CJK Compatibility"](_)||yi["CJK Radicals Supplement"](_)||yi["CJK Strokes"](_)||!(!yi["CJK Symbols and Punctuation"](_)||_>=12296&&_<=12305||_>=12308&&_<=12319||_===12336)||yi["CJK Unified Ideographs Extension A"](_)||yi["CJK Unified Ideographs"](_)||yi["Enclosed CJK Letters and Months"](_)||yi["Hangul Compatibility Jamo"](_)||yi["Hangul Jamo Extended-A"](_)||yi["Hangul Jamo Extended-B"](_)||yi["Hangul Jamo"](_)||yi["Hangul Syllables"](_)||yi.Hiragana(_)||yi["Ideographic Description Characters"](_)||yi.Kanbun(_)||yi["Kangxi Radicals"](_)||yi["Katakana Phonetic Extensions"](_)||yi.Katakana(_)&&_!==12540||!(!yi["Halfwidth and Fullwidth Forms"](_)||_===65288||_===65289||_===65293||_>=65306&&_<=65310||_===65339||_===65341||_===65343||_>=65371&&_<=65503||_===65507||_>=65512&&_<=65519)||!(!yi["Small Form Variants"](_)||_>=65112&&_<=65118||_>=65123&&_<=65126)||yi["Unified Canadian Aboriginal Syllabics"](_)||yi["Unified Canadian Aboriginal Syllabics Extended"](_)||yi["Vertical Forms"](_)||yi["Yijing Hexagram Symbols"](_)||yi["Yi Syllables"](_)||yi["Yi Radicals"](_))))}function Yu(_){return!(Xu(_)||function(d){return!!(yi["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||yi["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||yi["Letterlike Symbols"](d)||yi["Number Forms"](d)||yi["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||yi["Control Pictures"](d)&&d!==9251||yi["Optical Character Recognition"](d)||yi["Enclosed Alphanumerics"](d)||yi["Geometric Shapes"](d)||yi["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||yi["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||yi["CJK Symbols and Punctuation"](d)||yi.Katakana(d)||yi["Private Use Area"](d)||yi["CJK Compatibility Forms"](d)||yi["Small Form Variants"](d)||yi["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(_))}function kn(_){return _>=1424&&_<=2303||yi["Arabic Presentation Forms-A"](_)||yi["Arabic Presentation Forms-B"](_)}function F0(_,d){return!(!d&&kn(_)||_>=2304&&_<=3583||_>=3840&&_<=4255||yi.Khmer(_))}function Xc(_){for(const d of _)if(kn(d.charCodeAt(0)))return!0;return!1}const Xo="deferred",Ia="loading",ns="loaded";let Ku=null,La="unavailable",ll=null;const iu=function(_){_&&typeof _=="string"&&_.indexOf("NetworkError")>-1&&(La="error"),Ku&&Ku(_)};function Ju(){$n.fire(new yr("pluginStateChange",{pluginStatus:La,pluginURL:ll}))}const $n=new Jt,Yc=function(){return La},Kc=function(){if(La!==Xo||!ll)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");La=Ia,Ju(),ll&&Nt({url:ll},_=>{_?iu(_):(La=ns,Ju())})},ca={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>La===ns||ca.applyArabicShaping!=null,isLoading:()=>La===Ia,setState(_){if(!Me())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");La=_.pluginStatus,ll=_.pluginURL},isParsed(){if(!Me())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ca.applyArabicShaping!=null&&ca.processBidirectionalText!=null&&ca.processStyledBidirectionalText!=null},getPluginURL(){if(!Me())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ll}};class To{constructor(d,v){this.zoom=d,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Is,this.transition={})}isSupportedScript(d){return function(v,S){for(const M of v)if(!F0(M.charCodeAt(0),S))return!1;return!0}(d,ca.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const d=this.zoom,v=d-Math.floor(d),S=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*S}:{fromScale:.5,toScale:1,t:1-(1-S)*v}}}class Qu{constructor(d,v){this.property=d,this.value=v,this.expression=function(S,M){if(Vs(S))return new xo(S,M);if(Di(S)){const U=nn(S,M);if(U.result==="error")throw new Error(U.value.map(q=>`${q.key}: ${q.message}`).join(", "));return U.value}{let U=S;return M.type==="color"&&typeof S=="string"?U=tn.parse(S):M.type!=="padding"||typeof S!="number"&&!Array.isArray(S)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(S)&&(U=pa.parse(S)):U=Xa.parse(S),{kind:"constant",evaluate:()=>U}}}(v===void 0?d.specification.default:v,d.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(d,v,S){return this.property.possiblyEvaluate(this,d,v,S)}}class Gs{constructor(d){this.property=d,this.value=new Qu(d,void 0)}transitioned(d,v){return new Ic(this.property,this.value,v,ee({},d.transition,this.transition),d.now)}untransitioned(){return new Ic(this.property,this.value,null,{},0)}}class ul{constructor(d){this._properties=d,this._values=Object.create(d.defaultTransitionablePropertyValues)}getValue(d){return we(this._values[d].value.value)}setValue(d,v){Object.prototype.hasOwnProperty.call(this._values,d)||(this._values[d]=new Gs(this._values[d].property)),this._values[d].value=new Qu(this._values[d].property,v===null?void 0:we(v))}getTransition(d){return we(this._values[d].transition)}setTransition(d,v){Object.prototype.hasOwnProperty.call(this._values,d)||(this._values[d]=new Gs(this._values[d].property)),this._values[d].transition=we(v)||void 0}serialize(){const d={};for(const v of Object.keys(this._values)){const S=this.getValue(v);S!==void 0&&(d[v]=S);const M=this.getTransition(v);M!==void 0&&(d[`${v}-transition`]=M)}return d}transitioned(d,v){const S=new B0(this._properties);for(const M of Object.keys(this._values))S._values[M]=this._values[M].transitioned(d,v._values[M]);return S}untransitioned(){const d=new B0(this._properties);for(const v of Object.keys(this._values))d._values[v]=this._values[v].untransitioned();return d}}class Ic{constructor(d,v,S,M,U){this.property=d,this.value=v,this.begin=U+M.delay||0,this.end=this.begin+M.duration||0,d.specification.transition&&(M.delay||M.duration)&&(this.prior=S)}possiblyEvaluate(d,v,S){const M=d.now||0,U=this.value.possiblyEvaluate(d,v,S),q=this.prior;if(q){if(M>this.end)return this.prior=null,U;if(this.value.isDataDriven())return this.prior=null,U;if(M<this.begin)return q.possiblyEvaluate(d,v,S);{const Y=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(q.possiblyEvaluate(d,v,S),U,function(oe){if(oe<=0)return 0;if(oe>=1)return 1;const ye=oe*oe,Ie=ye*oe;return 4*(oe<.5?Ie:3*(oe-ye)+Ie-.75)}(Y))}}return U}}class B0{constructor(d){this._properties=d,this._values=Object.create(d.defaultTransitioningPropertyValues)}possiblyEvaluate(d,v,S){const M=new Eu(this._properties);for(const U of Object.keys(this._values))M._values[U]=this._values[U].possiblyEvaluate(d,v,S);return M}hasTransition(){for(const d of Object.keys(this._values))if(this._values[d].prior)return!0;return!1}}class ff{constructor(d){this._properties=d,this._values=Object.create(d.defaultPropertyValues)}hasValue(d){return this._values[d].value!==void 0}getValue(d){return we(this._values[d].value)}setValue(d,v){this._values[d]=new Qu(this._values[d].property,v===null?void 0:we(v))}serialize(){const d={};for(const v of Object.keys(this._values)){const S=this.getValue(v);S!==void 0&&(d[v]=S)}return d}possiblyEvaluate(d,v,S){const M=new Eu(this._properties);for(const U of Object.keys(this._values))M._values[U]=this._values[U].possiblyEvaluate(d,v,S);return M}}class Ws{constructor(d,v,S){this.property=d,this.value=v,this.parameters=S}isConstant(){return this.value.kind==="constant"}constantOr(d){return this.value.kind==="constant"?this.value.value:d}evaluate(d,v,S,M){return this.property.evaluate(this.value,this.parameters,d,v,S,M)}}class Eu{constructor(d){this._properties=d,this._values=Object.create(d.defaultPossiblyEvaluatedValues)}get(d){return this._values[d]}}class Ii{constructor(d){this.specification=d}possiblyEvaluate(d,v){if(d.isDataDriven())throw new Error("Value should not be data driven");return d.expression.evaluate(v)}interpolate(d,v,S){const M=_r[this.specification.type];return M?M(d,v,S):d}}class rn{constructor(d,v){this.specification=d,this.overrides=v}possiblyEvaluate(d,v,S,M){return new Ws(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(v,null,{},S,M)}:d.expression,v)}interpolate(d,v,S){if(d.value.kind!=="constant"||v.value.kind!=="constant")return d;if(d.value.value===void 0||v.value.value===void 0)return new Ws(this,{kind:"constant",value:void 0},d.parameters);const M=_r[this.specification.type];if(M){const U=M(d.value.value,v.value.value,S);return new Ws(this,{kind:"constant",value:U},d.parameters)}return d}evaluate(d,v,S,M,U,q){return d.kind==="constant"?d.value:d.evaluate(v,S,M,U,q)}}class Ra extends rn{possiblyEvaluate(d,v,S,M){if(d.value===void 0)return new Ws(this,{kind:"constant",value:void 0},v);if(d.expression.kind==="constant"){const U=d.expression.evaluate(v,null,{},S,M),q=d.property.specification.type==="resolvedImage"&&typeof U!="string"?U.name:U,Y=this._calculate(q,q,q,v);return new Ws(this,{kind:"constant",value:Y},v)}if(d.expression.kind==="camera"){const U=this._calculate(d.expression.evaluate({zoom:v.zoom-1}),d.expression.evaluate({zoom:v.zoom}),d.expression.evaluate({zoom:v.zoom+1}),v);return new Ws(this,{kind:"constant",value:U},v)}return new Ws(this,d.expression,v)}evaluate(d,v,S,M,U,q){if(d.kind==="source"){const Y=d.evaluate(v,S,M,U,q);return this._calculate(Y,Y,Y,v)}return d.kind==="composite"?this._calculate(d.evaluate({zoom:Math.floor(v.zoom)-1},S,M),d.evaluate({zoom:Math.floor(v.zoom)},S,M),d.evaluate({zoom:Math.floor(v.zoom)+1},S,M),v):d.value}_calculate(d,v,S,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:d,to:v}:{from:S,to:v}}interpolate(d){return d}}class Qa{constructor(d){this.specification=d}possiblyEvaluate(d,v,S,M){if(d.value!==void 0){if(d.expression.kind==="constant"){const U=d.expression.evaluate(v,null,{},S,M);return this._calculate(U,U,U,v)}return this._calculate(d.expression.evaluate(new To(Math.floor(v.zoom-1),v)),d.expression.evaluate(new To(Math.floor(v.zoom),v)),d.expression.evaluate(new To(Math.floor(v.zoom+1),v)),v)}}_calculate(d,v,S,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:d,to:v}:{from:S,to:v}}interpolate(d){return d}}class Jc{constructor(d){this.specification=d}possiblyEvaluate(d,v,S,M){return!!d.expression.evaluate(v,null,{},S,M)}interpolate(){return!1}}class es{constructor(d){this.properties=d,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const v in d){const S=d[v];S.specification.overridable&&this.overridableProperties.push(v);const M=this.defaultPropertyValues[v]=new Qu(S,void 0),U=this.defaultTransitionablePropertyValues[v]=new Gs(S);this.defaultTransitioningPropertyValues[v]=U.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=M.possiblyEvaluate({})}}}ei("DataDrivenProperty",rn),ei("DataConstantProperty",Ii),ei("CrossFadedDataDrivenProperty",Ra),ei("CrossFadedProperty",Qa),ei("ColorRampProperty",Jc);const nu="-transition";class Zs extends Jt{constructor(d,v){if(super(),this.id=d.id,this.type=d.type,this._featureFilter={filter:()=>!0,needGeometry:!1},d.type!=="custom"&&(this.metadata=d.metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,d.type!=="background"&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),v.layout&&(this._unevaluatedLayout=new ff(v.layout)),v.paint)){this._transitionablePaint=new ul(v.paint);for(const S in d.paint)this.setPaintProperty(S,d.paint[S],{validate:!1});for(const S in d.layout)this.setLayoutProperty(S,d.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Eu(v.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(d){return d==="visibility"?this.visibility:this._unevaluatedLayout.getValue(d)}setLayoutProperty(d,v,S={}){v!=null&&this._validate(Cc,`layers.${this.id}.layout.${d}`,d,v,S)||(d!=="visibility"?this._unevaluatedLayout.setValue(d,v):this.visibility=v)}getPaintProperty(d){return d.endsWith(nu)?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)}setPaintProperty(d,v,S={}){if(v!=null&&this._validate(ua,`layers.${this.id}.paint.${d}`,d,v,S))return!1;if(d.endsWith(nu))return this._transitionablePaint.setTransition(d.slice(0,-11),v||void 0),!1;{const M=this._transitionablePaint._values[d],U=M.property.specification["property-type"]==="cross-faded-data-driven",q=M.value.isDataDriven(),Y=M.value;this._transitionablePaint.setValue(d,v),this._handleSpecialPaintPropertyUpdate(d);const oe=this._transitionablePaint._values[d].value;return oe.isDataDriven()||q||U||this._handleOverridablePaintPropertyUpdate(d,Y,oe)}}_handleSpecialPaintPropertyUpdate(d){}_handleOverridablePaintPropertyUpdate(d,v,S){return!1}isHidden(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||this.visibility==="none"}updateTransitions(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(d,v){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,v)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,v)}serialize(){const d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),le(d,(v,S)=>!(v===void 0||S==="layout"&&!Object.keys(v).length||S==="paint"&&!Object.keys(v).length))}_validate(d,v,S,M,U={}){return(!U||U.validate!==!1)&&Ja(this,d.call(Cs,{key:v,layerType:this.type,objectKey:S,value:M,styleSpec:It,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const d in this.paint._values){const v=this.paint.get(d);if(v instanceof Ws&&rl(v.property.specification)&&(v.value.kind==="source"||v.value.kind==="composite")&&v.value.isStateDependent)return!0}return!1}}const g0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Lc{constructor(d,v){this._structArray=d,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(d,v){return d._trim(),v&&(d.isTransferred=!0,v.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}}static deserialize(d){const v=Object.create(this.prototype);return v.arrayBuffer=d.arrayBuffer,v.length=d.length,v.capacity=d.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(d){this.reserve(d),this.length=d}reserve(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function So(_,d=1){let v=0,S=0;return{members:_.map(M=>{const U=g0[M.type].BYTES_PER_ELEMENT,q=v=os(v,Math.max(d,U)),Y=M.components||1;return S=Math.max(S,U),v+=U*Y,{name:M.name,type:M.type,components:Y,offset:q}}),size:os(v,Math.max(S,d)),alignment:d}}function os(_,d){return Math.ceil(_/d)*d}class fa extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v){const S=this.length;return this.resize(S+1),this.emplace(S,d,v)}emplace(d,v,S){const M=2*d;return this.int16[M+0]=v,this.int16[M+1]=S,d}}fa.prototype.bytesPerElement=4,ei("StructArrayLayout2i4",fa);class Tc extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v,S){const M=this.length;return this.resize(M+1),this.emplace(M,d,v,S)}emplace(d,v,S,M){const U=3*d;return this.int16[U+0]=v,this.int16[U+1]=S,this.int16[U+2]=M,d}}Tc.prototype.bytesPerElement=6,ei("StructArrayLayout3i6",Tc);class ou extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v,S,M){const U=this.length;return this.resize(U+1),this.emplace(U,d,v,S,M)}emplace(d,v,S,M,U){const q=4*d;return this.int16[q+0]=v,this.int16[q+1]=S,this.int16[q+2]=M,this.int16[q+3]=U,d}}ou.prototype.bytesPerElement=8,ei("StructArrayLayout4i8",ou);class Oa extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,d,v,S,M,U,q)}emplace(d,v,S,M,U,q,Y){const oe=6*d;return this.int16[oe+0]=v,this.int16[oe+1]=S,this.int16[oe+2]=M,this.int16[oe+3]=U,this.int16[oe+4]=q,this.int16[oe+5]=Y,d}}Oa.prototype.bytesPerElement=12,ei("StructArrayLayout2i4i12",Oa);class Fa extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,d,v,S,M,U,q)}emplace(d,v,S,M,U,q,Y){const oe=4*d,ye=8*d;return this.int16[oe+0]=v,this.int16[oe+1]=S,this.uint8[ye+4]=M,this.uint8[ye+5]=U,this.uint8[ye+6]=q,this.uint8[ye+7]=Y,d}}Fa.prototype.bytesPerElement=8,ei("StructArrayLayout2i4ub8",Fa);class Pc extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v){const S=this.length;return this.resize(S+1),this.emplace(S,d,v)}emplace(d,v,S){const M=2*d;return this.float32[M+0]=v,this.float32[M+1]=S,d}}Pc.prototype.bytesPerElement=8,ei("StructArrayLayout2f8",Pc);class ec extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q,Y,oe,ye,Ie){const Re=this.length;return this.resize(Re+1),this.emplace(Re,d,v,S,M,U,q,Y,oe,ye,Ie)}emplace(d,v,S,M,U,q,Y,oe,ye,Ie,Re){const Ge=10*d;return this.uint16[Ge+0]=v,this.uint16[Ge+1]=S,this.uint16[Ge+2]=M,this.uint16[Ge+3]=U,this.uint16[Ge+4]=q,this.uint16[Ge+5]=Y,this.uint16[Ge+6]=oe,this.uint16[Ge+7]=ye,this.uint16[Ge+8]=Ie,this.uint16[Ge+9]=Re,d}}ec.prototype.bytesPerElement=20,ei("StructArrayLayout10ui20",ec);class Dl extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge){const rt=this.length;return this.resize(rt+1),this.emplace(rt,d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge)}emplace(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt){const nt=12*d;return this.int16[nt+0]=v,this.int16[nt+1]=S,this.int16[nt+2]=M,this.int16[nt+3]=U,this.uint16[nt+4]=q,this.uint16[nt+5]=Y,this.uint16[nt+6]=oe,this.uint16[nt+7]=ye,this.int16[nt+8]=Ie,this.int16[nt+9]=Re,this.int16[nt+10]=Ge,this.int16[nt+11]=rt,d}}Dl.prototype.bytesPerElement=24,ei("StructArrayLayout4i4ui4i24",Dl);class as extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v,S){const M=this.length;return this.resize(M+1),this.emplace(M,d,v,S)}emplace(d,v,S,M){const U=3*d;return this.float32[U+0]=v,this.float32[U+1]=S,this.float32[U+2]=M,d}}as.prototype.bytesPerElement=12,ei("StructArrayLayout3f12",as);class Mc extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(d){const v=this.length;return this.resize(v+1),this.emplace(v,d)}emplace(d,v){return this.uint32[1*d+0]=v,d}}Mc.prototype.bytesPerElement=4,ei("StructArrayLayout1ul4",Mc);class zl extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q,Y,oe,ye){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,d,v,S,M,U,q,Y,oe,ye)}emplace(d,v,S,M,U,q,Y,oe,ye,Ie){const Re=10*d,Ge=5*d;return this.int16[Re+0]=v,this.int16[Re+1]=S,this.int16[Re+2]=M,this.int16[Re+3]=U,this.int16[Re+4]=q,this.int16[Re+5]=Y,this.uint32[Ge+3]=oe,this.uint16[Re+8]=ye,this.uint16[Re+9]=Ie,d}}zl.prototype.bytesPerElement=20,ei("StructArrayLayout6i1ul2ui20",zl);class y0 extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,d,v,S,M,U,q)}emplace(d,v,S,M,U,q,Y){const oe=6*d;return this.int16[oe+0]=v,this.int16[oe+1]=S,this.int16[oe+2]=M,this.int16[oe+3]=U,this.int16[oe+4]=q,this.int16[oe+5]=Y,d}}y0.prototype.bytesPerElement=12,ei("StructArrayLayout2i2i2i12",y0);class tc extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U){const q=this.length;return this.resize(q+1),this.emplace(q,d,v,S,M,U)}emplace(d,v,S,M,U,q){const Y=4*d,oe=8*d;return this.float32[Y+0]=v,this.float32[Y+1]=S,this.float32[Y+2]=M,this.int16[oe+6]=U,this.int16[oe+7]=q,d}}tc.prototype.bytesPerElement=16,ei("StructArrayLayout2f1f2i16",tc);class Cu extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v,S,M){const U=this.length;return this.resize(U+1),this.emplace(U,d,v,S,M)}emplace(d,v,S,M,U){const q=12*d,Y=3*d;return this.uint8[q+0]=v,this.uint8[q+1]=S,this.float32[Y+1]=M,this.float32[Y+2]=U,d}}Cu.prototype.bytesPerElement=12,ei("StructArrayLayout2ub2f12",Cu);class au extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,v,S){const M=this.length;return this.resize(M+1),this.emplace(M,d,v,S)}emplace(d,v,S,M){const U=3*d;return this.uint16[U+0]=v,this.uint16[U+1]=S,this.uint16[U+2]=M,d}}au.prototype.bytesPerElement=6,ei("StructArrayLayout3ui6",au);class Dc extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt){const gr=this.length;return this.resize(gr+1),this.emplace(gr,d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt)}emplace(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt,gr){const or=24*d,Sr=12*d,Tr=48*d;return this.int16[or+0]=v,this.int16[or+1]=S,this.uint16[or+2]=M,this.uint16[or+3]=U,this.uint32[Sr+2]=q,this.uint32[Sr+3]=Y,this.uint32[Sr+4]=oe,this.uint16[or+10]=ye,this.uint16[or+11]=Ie,this.uint16[or+12]=Re,this.float32[Sr+7]=Ge,this.float32[Sr+8]=rt,this.uint8[Tr+36]=nt,this.uint8[Tr+37]=St,this.uint8[Tr+38]=qt,this.uint32[Sr+10]=Zt,this.int16[or+22]=gr,d}}Dc.prototype.bytesPerElement=48,ei("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Dc);class lo extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt,gr,or,Sr,Tr,Kr,Pi,Xi,Li,Ai,vi,Vi){const xi=this.length;return this.resize(xi+1),this.emplace(xi,d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt,gr,or,Sr,Tr,Kr,Pi,Xi,Li,Ai,vi,Vi)}emplace(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St,qt,Zt,gr,or,Sr,Tr,Kr,Pi,Xi,Li,Ai,vi,Vi,xi){const si=32*d,cn=16*d;return this.int16[si+0]=v,this.int16[si+1]=S,this.int16[si+2]=M,this.int16[si+3]=U,this.int16[si+4]=q,this.int16[si+5]=Y,this.int16[si+6]=oe,this.int16[si+7]=ye,this.uint16[si+8]=Ie,this.uint16[si+9]=Re,this.uint16[si+10]=Ge,this.uint16[si+11]=rt,this.uint16[si+12]=nt,this.uint16[si+13]=St,this.uint16[si+14]=qt,this.uint16[si+15]=Zt,this.uint16[si+16]=gr,this.uint16[si+17]=or,this.uint16[si+18]=Sr,this.uint16[si+19]=Tr,this.uint16[si+20]=Kr,this.uint16[si+21]=Pi,this.uint16[si+22]=Xi,this.uint32[cn+12]=Li,this.float32[cn+13]=Ai,this.float32[cn+14]=vi,this.uint16[si+30]=Vi,this.uint16[si+31]=xi,d}}lo.prototype.bytesPerElement=64,ei("StructArrayLayout8i15ui1ul2f2ui64",lo);class R extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d){const v=this.length;return this.resize(v+1),this.emplace(v,d)}emplace(d,v){return this.float32[1*d+0]=v,d}}R.prototype.bytesPerElement=4,ei("StructArrayLayout1f4",R);class p extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v,S){const M=this.length;return this.resize(M+1),this.emplace(M,d,v,S)}emplace(d,v,S,M){const U=3*d;return this.uint16[6*d+0]=v,this.float32[U+1]=S,this.float32[U+2]=M,d}}p.prototype.bytesPerElement=12,ei("StructArrayLayout1ui2f12",p);class k extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,v,S){const M=this.length;return this.resize(M+1),this.emplace(M,d,v,S)}emplace(d,v,S,M){const U=4*d;return this.uint32[2*d+0]=v,this.uint16[U+2]=S,this.uint16[U+3]=M,d}}k.prototype.bytesPerElement=8,ei("StructArrayLayout1ul2ui8",k);class L extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,v){const S=this.length;return this.resize(S+1),this.emplace(S,d,v)}emplace(d,v,S){const M=2*d;return this.uint16[M+0]=v,this.uint16[M+1]=S,d}}L.prototype.bytesPerElement=4,ei("StructArrayLayout2ui4",L);class z extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d){const v=this.length;return this.resize(v+1),this.emplace(v,d)}emplace(d,v){return this.uint16[1*d+0]=v,d}}z.prototype.bytesPerElement=2,ei("StructArrayLayout1ui2",z);class j extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,v,S,M){const U=this.length;return this.resize(U+1),this.emplace(U,d,v,S,M)}emplace(d,v,S,M,U){const q=4*d;return this.float32[q+0]=v,this.float32[q+1]=S,this.float32[q+2]=M,this.float32[q+3]=U,d}}j.prototype.bytesPerElement=16,ei("StructArrayLayout4f16",j);class K extends Lc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}K.prototype.size=20;class re extends zl{get(d){return new K(this,d)}}ei("CollisionBoxArray",re);class ae extends Lc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(d){this._structArray.uint8[this._pos1+37]=d}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(d){this._structArray.uint8[this._pos1+38]=d}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(d){this._structArray.uint32[this._pos4+10]=d}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class ve extends Dc{get(d){return new ae(this,d)}}ei("PlacedSymbolArray",ve);class Ee extends Lc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(d){this._structArray.uint32[this._pos4+12]=d}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ee.prototype.size=64;class Te extends lo{get(d){return new Ee(this,d)}}ei("SymbolInstanceArray",Te);class Ze extends R{getoffsetX(d){return this.float32[1*d+0]}}ei("GlyphOffsetArray",Ze);class T extends Tc{getx(d){return this.int16[3*d+0]}gety(d){return this.int16[3*d+1]}gettileUnitDistanceFromAnchor(d){return this.int16[3*d+2]}}ei("SymbolLineVertexArray",T);class B extends Lc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}B.prototype.size=12;class W extends p{get(d){return new B(this,d)}}ei("TextAnchorOffsetArray",W);class Q extends Lc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Q.prototype.size=8;class de extends k{get(d){return new Q(this,d)}}ei("FeatureIndexArray",de);class ke extends fa{}class fe extends fa{}class Se extends fa{}class De extends Oa{}class je extends Fa{}class ut extends Pc{}class Dt extends ec{}class Tt extends Dl{}class Ct extends as{}class br extends Mc{}class kr extends y0{}class _t extends Cu{}class jt extends au{}class hr extends L{}const Ur=So([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pr}=Ur;class qr{constructor(d=[]){this.segments=d}prepareSegment(d,v,S,M){let U=this.segments[this.segments.length-1];return d>qr.MAX_VERTEX_ARRAY_LENGTH&&ze(`Max vertices per segment is ${qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${d}`),(!U||U.vertexLength+d>qr.MAX_VERTEX_ARRAY_LENGTH||U.sortKey!==M)&&(U={vertexOffset:v.length,primitiveOffset:S.length,vertexLength:0,primitiveLength:0},M!==void 0&&(U.sortKey=M),this.segments.push(U)),U}get(){return this.segments}destroy(){for(const d of this.segments)for(const v in d.vaos)d.vaos[v].destroy()}static simpleSegment(d,v,S,M){return new qr([{vertexOffset:d,primitiveOffset:v,vertexLength:S,primitiveLength:M,vaos:{},sortKey:0}])}}function Xr(_,d){return 256*(_=G(Math.floor(_),0,255))+G(Math.floor(d),0,255)}qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ei("SegmentVector",qr);const zi=So([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ii={exports:{}},Pn={exports:{}};Pn.exports=function(_,d){var v,S,M,U,q,Y,oe,ye;for(S=_.length-(v=3&_.length),M=d,q=3432918353,Y=461845907,ye=0;ye<S;)oe=255&_.charCodeAt(ye)|(255&_.charCodeAt(++ye))<<8|(255&_.charCodeAt(++ye))<<16|(255&_.charCodeAt(++ye))<<24,++ye,M=27492+(65535&(U=5*(65535&(M=(M^=oe=(65535&(oe=(oe=(65535&oe)*q+(((oe>>>16)*q&65535)<<16)&4294967295)<<15|oe>>>17))*Y+(((oe>>>16)*Y&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(U>>>16)&65535)<<16);switch(oe=0,v){case 3:oe^=(255&_.charCodeAt(ye+2))<<16;case 2:oe^=(255&_.charCodeAt(ye+1))<<8;case 1:M^=oe=(65535&(oe=(oe=(65535&(oe^=255&_.charCodeAt(ye)))*q+(((oe>>>16)*q&65535)<<16)&4294967295)<<15|oe>>>17))*Y+(((oe>>>16)*Y&65535)<<16)&4294967295}return M^=_.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0};var In=Pn.exports,hn={exports:{}};hn.exports=function(_,d){for(var v,S=_.length,M=d^S,U=0;S>=4;)v=1540483477*(65535&(v=255&_.charCodeAt(U)|(255&_.charCodeAt(++U))<<8|(255&_.charCodeAt(++U))<<16|(255&_.charCodeAt(++U))<<24))+((1540483477*(v>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),S-=4,++U;switch(S){case 3:M^=(255&_.charCodeAt(U+2))<<16;case 2:M^=(255&_.charCodeAt(U+1))<<8;case 1:M=1540483477*(65535&(M^=255&_.charCodeAt(U)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0};var vn=In,Jn=hn.exports;ii.exports=vn,ii.exports.murmur3=vn,ii.exports.murmur2=Jn;var Gn=f(ii.exports);class bn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(d,v,S,M){this.ids.push(Vo(d)),this.positions.push(v,S,M)}getPositions(d){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const v=Vo(d);let S=0,M=this.ids.length-1;for(;S<M;){const q=S+M>>1;this.ids[q]>=v?M=q:S=q+1}const U=[];for(;this.ids[S]===v;)U.push({index:this.positions[3*S],start:this.positions[3*S+1],end:this.positions[3*S+2]}),S++;return U}static serialize(d,v){const S=new Float64Array(d.ids),M=new Uint32Array(d.positions);return mn(S,M,0,S.length-1),v&&v.push(S.buffer,M.buffer),{ids:S,positions:M}}static deserialize(d){const v=new bn;return v.ids=d.ids,v.positions=d.positions,v.indexed=!0,v}}function Vo(_){const d=+_;return!isNaN(d)&&d<=Number.MAX_SAFE_INTEGER?d:Gn(String(_))}function mn(_,d,v,S){for(;v<S;){const M=_[v+S>>1];let U=v-1,q=S+1;for(;;){do U++;while(_[U]<M);do q--;while(_[q]>M);if(U>=q)break;Eo(_,U,q),Eo(d,3*U,3*q),Eo(d,3*U+1,3*q+1),Eo(d,3*U+2,3*q+2)}q-v<S-q?(mn(_,d,v,q),v=q+1):(mn(_,d,q+1,S),S=q)}}function Eo(_,d,v){const S=_[d];_[d]=_[v],_[v]=S}ei("FeaturePositionMap",bn);class uo{constructor(d,v){this.gl=d.gl,this.location=v}}class Cn extends uo{constructor(d,v){super(d,v),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class Po extends uo{constructor(d,v){super(d,v),this.current=[0,0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))}}class ba extends uo{constructor(d,v){super(d,v),this.current=tn.transparent}set(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))}}const Qn=new Float32Array(16);function zn(_){return[Xr(255*_.r,255*_.g),Xr(255*_.b,255*_.a)]}class yo{constructor(d,v,S){this.value=d,this.uniformNames=v.map(M=>`u_${M}`),this.type=S}setUniform(d,v,S){d.set(S.constantOr(this.value))}getBinding(d,v,S){return this.type==="color"?new ba(d,v):new Cn(d,v)}}class eo{constructor(d,v){this.uniformNames=v.map(S=>`u_${S}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(d,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=d.tlbr}setUniform(d,v,S,M){const U=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;U&&d.set(U)}getBinding(d,v,S){return S.substr(0,9)==="u_pattern"?new Po(d,v):new Cn(d,v)}}class wa{constructor(d,v,S,M){this.expression=d,this.type=S,this.maxValue=0,this.paintVertexAttributes=v.map(U=>({name:`a_${U}`,type:"Float32",components:S==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(d,v,S,M,U){const q=this.paintVertexArray.length,Y=this.expression.evaluate(new To(0),v,{},M,[],U);this.paintVertexArray.resize(d),this._setPaintValue(q,d,Y)}updatePaintArray(d,v,S,M){const U=this.expression.evaluate({zoom:0},S,M);this._setPaintValue(d,v,U)}_setPaintValue(d,v,S){if(this.type==="color"){const M=zn(S);for(let U=d;U<v;U++)this.paintVertexArray.emplace(U,M[0],M[1])}else{for(let M=d;M<v;M++)this.paintVertexArray.emplace(M,S);this.maxValue=Math.max(this.maxValue,Math.abs(S))}}upload(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Co{constructor(d,v,S,M,U,q){this.expression=d,this.uniformNames=v.map(Y=>`u_${Y}_t`),this.type=S,this.useIntegerZoom=M,this.zoom=U,this.maxValue=0,this.paintVertexAttributes=v.map(Y=>({name:`a_${Y}`,type:"Float32",components:S==="color"?4:2,offset:0})),this.paintVertexArray=new q}populatePaintArray(d,v,S,M,U){const q=this.expression.evaluate(new To(this.zoom),v,{},M,[],U),Y=this.expression.evaluate(new To(this.zoom+1),v,{},M,[],U),oe=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(oe,d,q,Y)}updatePaintArray(d,v,S,M){const U=this.expression.evaluate({zoom:this.zoom},S,M),q=this.expression.evaluate({zoom:this.zoom+1},S,M);this._setPaintValue(d,v,U,q)}_setPaintValue(d,v,S,M){if(this.type==="color"){const U=zn(S),q=zn(M);for(let Y=d;Y<v;Y++)this.paintVertexArray.emplace(Y,U[0],U[1],q[0],q[1])}else{for(let U=d;U<v;U++)this.paintVertexArray.emplace(U,S,M);this.maxValue=Math.max(this.maxValue,Math.abs(S),Math.abs(M))}}upload(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(d,v){const S=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,M=G(this.expression.interpolationFactor(S,this.zoom,this.zoom+1),0,1);d.set(M)}getBinding(d,v,S){return new Cn(d,v)}}class Ba{constructor(d,v,S,M,U,q){this.expression=d,this.type=v,this.useIntegerZoom=S,this.zoom=M,this.layerId=q,this.zoomInPaintVertexArray=new U,this.zoomOutPaintVertexArray=new U}populatePaintArray(d,v,S){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(M,d,v.patterns&&v.patterns[this.layerId],S)}updatePaintArray(d,v,S,M,U){this._setPaintValues(d,v,S.patterns&&S.patterns[this.layerId],U)}_setPaintValues(d,v,S,M){if(!M||!S)return;const{min:U,mid:q,max:Y}=S,oe=M[U],ye=M[q],Ie=M[Y];if(oe&&ye&&Ie)for(let Re=d;Re<v;Re++)this.zoomInPaintVertexArray.emplace(Re,ye.tl[0],ye.tl[1],ye.br[0],ye.br[1],oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],ye.pixelRatio,oe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Re,ye.tl[0],ye.tl[1],ye.br[0],ye.br[1],Ie.tl[0],Ie.tl[1],Ie.br[0],Ie.br[1],ye.pixelRatio,Ie.pixelRatio)}upload(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,zi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,zi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Nl{constructor(d,v,S){this.binders={},this._buffers=[];const M=[];for(const U in d.paint._values){if(!S(U))continue;const q=d.paint.get(U);if(!(q instanceof Ws&&rl(q.property.specification)))continue;const Y=cl(U,d.type),oe=q.value,ye=q.property.specification.type,Ie=q.property.useIntegerZoom,Re=q.property.specification["property-type"],Ge=Re==="cross-faded"||Re==="cross-faded-data-driven";if(oe.kind==="constant")this.binders[U]=Ge?new eo(oe.value,Y):new yo(oe.value,Y,ye),M.push(`/u_${U}`);else if(oe.kind==="source"||Ge){const rt=Io(U,ye,"source");this.binders[U]=Ge?new Ba(oe,ye,Ie,v,rt,d.id):new wa(oe,Y,ye,rt),M.push(`/a_${U}`)}else{const rt=Io(U,ye,"composite");this.binders[U]=new Co(oe,Y,ye,Ie,v,rt),M.push(`/z_${U}`)}}this.cacheKey=M.sort().join("")}getMaxValue(d){const v=this.binders[d];return v instanceof wa||v instanceof Co?v.maxValue:0}populatePaintArrays(d,v,S,M,U){for(const q in this.binders){const Y=this.binders[q];(Y instanceof wa||Y instanceof Co||Y instanceof Ba)&&Y.populatePaintArray(d,v,S,M,U)}}setConstantPatternPositions(d,v){for(const S in this.binders){const M=this.binders[S];M instanceof eo&&M.setConstantPatternPositions(d,v)}}updatePaintArrays(d,v,S,M,U){let q=!1;for(const Y in d){const oe=v.getPositions(Y);for(const ye of oe){const Ie=S.feature(ye.index);for(const Re in this.binders){const Ge=this.binders[Re];if((Ge instanceof wa||Ge instanceof Co||Ge instanceof Ba)&&Ge.expression.isStateDependent===!0){const rt=M.paint.get(Re);Ge.expression=rt.value,Ge.updatePaintArray(ye.start,ye.end,Ie,d[Y],U),q=!0}}}}return q}defines(){const d=[];for(const v in this.binders){const S=this.binders[v];(S instanceof yo||S instanceof eo)&&d.push(...S.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return d}getBinderAttributes(){const d=[];for(const v in this.binders){const S=this.binders[v];if(S instanceof wa||S instanceof Co)for(let M=0;M<S.paintVertexAttributes.length;M++)d.push(S.paintVertexAttributes[M].name);else if(S instanceof Ba)for(let M=0;M<zi.members.length;M++)d.push(zi.members[M].name)}return d}getBinderUniforms(){const d=[];for(const v in this.binders){const S=this.binders[v];if(S instanceof yo||S instanceof eo||S instanceof Co)for(const M of S.uniformNames)d.push(M)}return d}getPaintVertexBuffers(){return this._buffers}getUniforms(d,v){const S=[];for(const M in this.binders){const U=this.binders[M];if(U instanceof yo||U instanceof eo||U instanceof Co){for(const q of U.uniformNames)if(v[q]){const Y=U.getBinding(d,v[q],q);S.push({name:q,property:M,binding:Y})}}}return S}setUniforms(d,v,S,M){for(const{name:U,property:q,binding:Y}of v)this.binders[q].setUniform(Y,M,S.get(q),U)}updatePaintBuffers(d){this._buffers=[];for(const v in this.binders){const S=this.binders[v];if(d&&S instanceof Ba){const M=d.fromScale===2?S.zoomInPaintVertexBuffer:S.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(S instanceof wa||S instanceof Co)&&S.paintVertexBuffer&&this._buffers.push(S.paintVertexBuffer)}}upload(d){for(const v in this.binders){const S=this.binders[v];(S instanceof wa||S instanceof Co||S instanceof Ba)&&S.upload(d)}this.updatePaintBuffers()}destroy(){for(const d in this.binders){const v=this.binders[d];(v instanceof wa||v instanceof Co||v instanceof Ba)&&v.destroy()}}}class ms{constructor(d,v,S=()=>!0){this.programConfigurations={};for(const M of d)this.programConfigurations[M.id]=new Nl(M,v,S);this.needsUpload=!1,this._featureMap=new bn,this._bufferOffset=0}populatePaintArrays(d,v,S,M,U,q){for(const Y in this.programConfigurations)this.programConfigurations[Y].populatePaintArrays(d,v,M,U,q);v.id!==void 0&&this._featureMap.add(v.id,S,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0}updatePaintArrays(d,v,S,M){for(const U of S)this.needsUpload=this.programConfigurations[U.id].updatePaintArrays(d,this._featureMap,v,U,M)||this.needsUpload}get(d){return this.programConfigurations[d]}upload(d){if(this.needsUpload){for(const v in this.programConfigurations)this.programConfigurations[v].upload(d);this.needsUpload=!1}}destroy(){for(const d in this.programConfigurations)this.programConfigurations[d].destroy()}}function cl(_,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[_]||[_.replace(`${d}-`,"").replace(/-/g,"_")]}function Io(_,d,v){const S={color:{source:Pc,composite:j},number:{source:R,composite:Pc}},M=function(U){return{"line-pattern":{source:Dt,composite:Dt},"fill-pattern":{source:Dt,composite:Dt},"fill-extrusion-pattern":{source:Dt,composite:Dt}}[U]}(_);return M&&M[v]||S[d][v]}ei("ConstantBinder",yo),ei("CrossFadedConstantBinder",eo),ei("SourceExpressionBinder",wa),ei("CrossFadedCompositeBinder",Ba),ei("CompositeExpressionBinder",Co),ei("ProgramConfiguration",Nl,{omit:["_buffers"]}),ei("ProgramConfigurationSet",ms);const Ho=8192,rc=Math.pow(2,14)-1,Ls=-rc-1;function co(_){const d=Ho/_.extent,v=_.loadGeometry();for(let S=0;S<v.length;S++){const M=v[S];for(let U=0;U<M.length;U++){const q=M[U],Y=Math.round(q.x*d),oe=Math.round(q.y*d);q.x=G(Y,Ls,rc),q.y=G(oe,Ls,rc),(Y<q.x||Y>q.x+1||oe<q.y||oe>q.y+1)&&ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return v}function Ts(_,d){return{type:_.type,id:_.id,properties:_.properties,geometry:d?co(_):[]}}function Rl(_,d,v,S,M){_.emplaceBack(2*d+(S+1)/2,2*v+(M+1)/2)}class Ps{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(v=>v.id),this.index=d.index,this.hasPattern=!1,this.layoutVertexArray=new fe,this.indexArray=new jt,this.segments=new qr,this.programConfigurations=new ms(d.layers,d.zoom),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id)}populate(d,v,S){const M=this.layers[0],U=[];let q=null,Y=!1;M.type==="circle"&&(q=M.layout.get("circle-sort-key"),Y=!q.isConstant());for(const{feature:oe,id:ye,index:Ie,sourceLayerIndex:Re}of d){const Ge=this.layers[0]._featureFilter.needGeometry,rt=Ts(oe,Ge);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),rt,S))continue;const nt=Y?q.evaluate(rt,{},S):void 0,St={id:ye,properties:oe.properties,type:oe.type,sourceLayerIndex:Re,index:Ie,geometry:Ge?rt.geometry:co(oe),patterns:{},sortKey:nt};U.push(St)}Y&&U.sort((oe,ye)=>oe.sortKey-ye.sortKey);for(const oe of U){const{geometry:ye,index:Ie,sourceLayerIndex:Re}=oe,Ge=d[Ie].feature;this.addFeature(oe,ye,Ie,S),v.featureIndex.insert(Ge,ye,Ie,Re,this.index)}}update(d,v,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,v,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Pr),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(d,v,S,M){for(const U of v)for(const q of U){const Y=q.x,oe=q.y;if(Y<0||Y>=Ho||oe<0||oe>=Ho)continue;const ye=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),Ie=ye.vertexLength;Rl(this.layoutVertexArray,Y,oe,-1,-1),Rl(this.layoutVertexArray,Y,oe,1,-1),Rl(this.layoutVertexArray,Y,oe,1,1),Rl(this.layoutVertexArray,Y,oe,-1,1),this.indexArray.emplaceBack(Ie,Ie+1,Ie+2),this.indexArray.emplaceBack(Ie,Ie+3,Ie+2),ye.vertexLength+=4,ye.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,S,{},M)}}function Ms(_,d){for(let v=0;v<_.length;v++)if(e0(d,_[v]))return!0;for(let v=0;v<d.length;v++)if(e0(_,d[v]))return!0;return!!_0(_,d)}function Iu(_,d,v){return!!e0(_,d)||!!Qc(d,_,v)}function j0(_,d){if(_.length===1)return zc(d,_[0]);for(let v=0;v<d.length;v++){const S=d[v];for(let M=0;M<S.length;M++)if(e0(_,S[M]))return!0}for(let v=0;v<_.length;v++)if(zc(d,_[v]))return!0;for(let v=0;v<d.length;v++)if(_0(_,d[v]))return!0;return!1}function U0(_,d,v){if(_.length>1){if(_0(_,d))return!0;for(let S=0;S<d.length;S++)if(Qc(d[S],_,v))return!0}for(let S=0;S<_.length;S++)if(Qc(_[S],d,v))return!0;return!1}function _0(_,d){if(_.length===0||d.length===0)return!1;for(let v=0;v<_.length-1;v++){const S=_[v],M=_[v+1];for(let U=0;U<d.length-1;U++)if(q0(S,M,d[U],d[U+1]))return!0}return!1}function q0(_,d,v,S){return Ue(_,v,S)!==Ue(d,v,S)&&Ue(_,d,v)!==Ue(_,d,S)}function Qc(_,d,v){const S=v*v;if(d.length===1)return _.distSqr(d[0])<S;for(let M=1;M<d.length;M++)if(ic(_,d[M-1],d[M])<S)return!0;return!1}function ic(_,d,v){const S=d.distSqr(v);if(S===0)return _.distSqr(d);const M=((_.x-d.x)*(v.x-d.x)+(_.y-d.y)*(v.y-d.y))/S;return _.distSqr(M<0?d:M>1?v:v.sub(d)._mult(M)._add(d))}function zc(_,d){let v,S,M,U=!1;for(let q=0;q<_.length;q++){v=_[q];for(let Y=0,oe=v.length-1;Y<v.length;oe=Y++)S=v[Y],M=v[oe],S.y>d.y!=M.y>d.y&&d.x<(M.x-S.x)*(d.y-S.y)/(M.y-S.y)+S.x&&(U=!U)}return U}function e0(_,d){let v=!1;for(let S=0,M=_.length-1;S<_.length;M=S++){const U=_[S],q=_[M];U.y>d.y!=q.y>d.y&&d.x<(q.x-U.x)*(d.y-U.y)/(q.y-U.y)+U.x&&(v=!v)}return v}function hf(_,d,v){const S=v[0],M=v[2];if(_.x<S.x&&d.x<S.x||_.x>M.x&&d.x>M.x||_.y<S.y&&d.y<S.y||_.y>M.y&&d.y>M.y)return!1;const U=Ue(_,d,v[0]);return U!==Ue(_,d,v[1])||U!==Ue(_,d,v[2])||U!==Ue(_,d,v[3])}function ia(_,d,v){const S=d.paint.get(_).value;return S.kind==="constant"?S.value:v.programConfigurations.get(d.id).getMaxValue(_)}function Ol(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function Nc(_,d,v,S,M){if(!d[0]&&!d[1])return _;const U=A.convert(d)._mult(M);v==="viewport"&&U._rotate(-S);const q=[];for(let Y=0;Y<_.length;Y++)q.push(_[Y].sub(U));return q}let Lu,V0;ei("CircleBucket",Ps,{omit:["layers"]});var df={get paint(){return V0=V0||new es({"circle-radius":new rn(It.paint_circle["circle-radius"]),"circle-color":new rn(It.paint_circle["circle-color"]),"circle-blur":new rn(It.paint_circle["circle-blur"]),"circle-opacity":new rn(It.paint_circle["circle-opacity"]),"circle-translate":new Ii(It.paint_circle["circle-translate"]),"circle-translate-anchor":new Ii(It.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ii(It.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ii(It.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new rn(It.paint_circle["circle-stroke-width"]),"circle-stroke-color":new rn(It.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new rn(It.paint_circle["circle-stroke-opacity"])})},get layout(){return Lu=Lu||new es({"circle-sort-key":new rn(It.layout_circle["circle-sort-key"])})}},Ta=1e-6,Qo=typeof Float32Array<"u"?Float32Array:Array;function H0(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=1,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=1,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,_}function me(_,d,v){var S=d[0],M=d[1],U=d[2],q=d[3],Y=d[4],oe=d[5],ye=d[6],Ie=d[7],Re=d[8],Ge=d[9],rt=d[10],nt=d[11],St=d[12],qt=d[13],Zt=d[14],gr=d[15],or=v[0],Sr=v[1],Tr=v[2],Kr=v[3];return _[0]=or*S+Sr*Y+Tr*Re+Kr*St,_[1]=or*M+Sr*oe+Tr*Ge+Kr*qt,_[2]=or*U+Sr*ye+Tr*rt+Kr*Zt,_[3]=or*q+Sr*Ie+Tr*nt+Kr*gr,_[4]=(or=v[4])*S+(Sr=v[5])*Y+(Tr=v[6])*Re+(Kr=v[7])*St,_[5]=or*M+Sr*oe+Tr*Ge+Kr*qt,_[6]=or*U+Sr*ye+Tr*rt+Kr*Zt,_[7]=or*q+Sr*Ie+Tr*nt+Kr*gr,_[8]=(or=v[8])*S+(Sr=v[9])*Y+(Tr=v[10])*Re+(Kr=v[11])*St,_[9]=or*M+Sr*oe+Tr*Ge+Kr*qt,_[10]=or*U+Sr*ye+Tr*rt+Kr*Zt,_[11]=or*q+Sr*Ie+Tr*nt+Kr*gr,_[12]=(or=v[12])*S+(Sr=v[13])*Y+(Tr=v[14])*Re+(Kr=v[15])*St,_[13]=or*M+Sr*oe+Tr*Ge+Kr*qt,_[14]=or*U+Sr*ye+Tr*rt+Kr*Zt,_[15]=or*q+Sr*Ie+Tr*nt+Kr*gr,_}Math.hypot||(Math.hypot=function(){for(var _=0,d=arguments.length;d--;)_+=arguments[d]*arguments[d];return Math.sqrt(_)});var Le,Ye=me;function At(_,d,v){var S=d[0],M=d[1],U=d[2],q=d[3];return _[0]=v[0]*S+v[4]*M+v[8]*U+v[12]*q,_[1]=v[1]*S+v[5]*M+v[9]*U+v[13]*q,_[2]=v[2]*S+v[6]*M+v[10]*U+v[14]*q,_[3]=v[3]*S+v[7]*M+v[11]*U+v[15]*q,_}Le=new Qo(4),Qo!=Float32Array&&(Le[0]=0,Le[1]=0,Le[2]=0,Le[3]=0);class sr extends Zs{constructor(d){super(d,df)}createBucket(d){return new Ps(d)}queryRadius(d){const v=d;return ia("circle-radius",this,v)+ia("circle-stroke-width",this,v)+Ol(this.paint.get("circle-translate"))}queryIntersectsFeature(d,v,S,M,U,q,Y,oe){const ye=Nc(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,Y),Ie=this.paint.get("circle-radius").evaluate(v,S)+this.paint.get("circle-stroke-width").evaluate(v,S),Re=this.paint.get("circle-pitch-alignment")==="map",Ge=Re?ye:function(nt,St){return nt.map(qt=>cr(qt,St))}(ye,oe),rt=Re?Ie*Y:Ie;for(const nt of M)for(const St of nt){const qt=Re?St:cr(St,oe);let Zt=rt;const gr=At([],[St.x,St.y,0,1],oe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Zt*=gr[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Zt*=q.cameraToCenterDistance/gr[3]),Iu(Ge,qt,Zt))return!0}return!1}}function cr(_,d){const v=At([],[_.x,_.y,0,1],d);return new A(v[0]/v[3],v[1]/v[3])}class tr extends Ps{}let Cr;ei("HeatmapBucket",tr,{omit:["layers"]});var Ir={get paint(){return Cr=Cr||new es({"heatmap-radius":new rn(It.paint_heatmap["heatmap-radius"]),"heatmap-weight":new rn(It.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ii(It.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jc(It.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ii(It.paint_heatmap["heatmap-opacity"])})}};function Zr(_,{width:d,height:v},S,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==d*v*S)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${d*v*S}`)}else M=new Uint8Array(d*v*S);return _.width=d,_.height=v,_.data=M,_}function ni(_,{width:d,height:v},S){if(d===_.width&&v===_.height)return;const M=Zr({},{width:d,height:v},S);Ri(_,M,{x:0,y:0},{x:0,y:0},{width:Math.min(_.width,d),height:Math.min(_.height,v)},S),_.width=d,_.height=v,_.data=M.data}function Ri(_,d,v,S,M,U){if(M.width===0||M.height===0)return d;if(M.width>_.width||M.height>_.height||v.x>_.width-M.width||v.y>_.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>d.width||M.height>d.height||S.x>d.width-M.width||S.y>d.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const q=_.data,Y=d.data;if(q===Y)throw new Error("srcData equals dstData, so image is already copied");for(let oe=0;oe<M.height;oe++){const ye=((v.y+oe)*_.width+v.x)*U,Ie=((S.y+oe)*d.width+S.x)*U;for(let Re=0;Re<M.width*U;Re++)Y[Ie+Re]=q[ye+Re]}return d}class oi{constructor(d,v){Zr(this,d,1,v)}resize(d){ni(this,d,1)}clone(){return new oi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(d,v,S,M,U){Ri(d,v,S,M,U,1)}}class Si{constructor(d,v){Zr(this,d,4,v)}resize(d){ni(this,d,4)}replace(d,v){v?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d}clone(){return new Si({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(d,v,S,M,U){Ri(d,v,S,M,U,4)}}function Zi(_){const d={},v=_.resolution||256,S=_.clips?_.clips.length:1,M=_.image||new Si({width:v,height:S});if(Math.log(v)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${v}`);const U=(q,Y,oe)=>{d[_.evaluationKey]=oe;const ye=_.expression.evaluate(d);M.data[q+Y+0]=Math.floor(255*ye.r/ye.a),M.data[q+Y+1]=Math.floor(255*ye.g/ye.a),M.data[q+Y+2]=Math.floor(255*ye.b/ye.a),M.data[q+Y+3]=Math.floor(255*ye.a)};if(_.clips)for(let q=0,Y=0;q<S;++q,Y+=4*v)for(let oe=0,ye=0;oe<v;oe++,ye+=4){const Ie=oe/(v-1),{start:Re,end:Ge}=_.clips[q];U(Y,ye,Re*(1-Ie)+Ge*Ie)}else for(let q=0,Y=0;q<v;q++,Y+=4)U(0,Y,q/(v-1));return M}ei("AlphaImage",oi),ei("RGBAImage",Si);class Wn extends Zs{createBucket(d){return new tr(d)}constructor(d){super(d,Ir),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Zi({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let to;var fo={get paint(){return to=to||new es({"hillshade-illumination-direction":new Ii(It.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ii(It.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ii(It.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ii(It.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ii(It.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ii(It.paint_hillshade["hillshade-accent-color"])})}};class Lo extends Zs{constructor(d){super(d,fo)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const ga=So([{name:"a_pos",components:2,type:"Int16"}],4),{members:xa}=ga;var Mo={exports:{}};function Ln(_,d,v){v=v||2;var S,M,U,q,Y,oe,ye,Ie=d&&d.length,Re=Ie?d[0]*v:_.length,Ge=ai(_,0,Re,v,!0),rt=[];if(!Ge||Ge.next===Ge.prev)return rt;if(Ie&&(Ge=function(St,qt,Zt,gr){var or,Sr,Tr,Kr=[];for(or=0,Sr=qt.length;or<Sr;or++)(Tr=ai(St,qt[or]*gr,or<Sr-1?qt[or+1]*gr:St.length,gr,!1))===Tr.next&&(Tr.steiner=!0),Kr.push(t0(Tr));for(Kr.sort(ko),or=0;or<Kr.length;or++)Zt=Fo(Kr[or],Zt);return Zt}(_,d,Ge,v)),_.length>80*v){S=U=_[0],M=q=_[1];for(var nt=v;nt<Re;nt+=v)(Y=_[nt])<S&&(S=Y),(oe=_[nt+1])<M&&(M=oe),Y>U&&(U=Y),oe>q&&(q=oe);ye=(ye=Math.max(U-S,q-M))!==0?32767/ye:0}return Mn(Ge,rt,v,S,M,ye,0),rt}function ai(_,d,v,S,M){var U,q;if(M===Vd(_,d,v,S)>0)for(U=d;U<v;U+=S)q=Ua(U,_[U],_[U+1],q);else for(U=v-S;U>=d;U-=S)q=Ua(U,_[U],_[U+1],q);return q&&hl(q,q.next)&&(mf(q),q=q.next),q}function Yi(_,d){if(!_)return _;d||(d=_);var v,S=_;do if(v=!1,S.steiner||!hl(S,S.next)&&Yo(S.prev,S,S.next)!==0)S=S.next;else{if(mf(S),(S=d=S.prev)===S.next)break;v=!0}while(v||S!==d);return d}function Mn(_,d,v,S,M,U,q){if(_){!q&&U&&function(Ie,Re,Ge,rt){var nt=Ie;do nt.z===0&&(nt.z=fl(nt.x,nt.y,Re,Ge,rt)),nt.prevZ=nt.prev,nt.nextZ=nt.next,nt=nt.next;while(nt!==Ie);nt.prevZ.nextZ=null,nt.prevZ=null,function(St){var qt,Zt,gr,or,Sr,Tr,Kr,Pi,Xi=1;do{for(Zt=St,St=null,Sr=null,Tr=0;Zt;){for(Tr++,gr=Zt,Kr=0,qt=0;qt<Xi&&(Kr++,gr=gr.nextZ);qt++);for(Pi=Xi;Kr>0||Pi>0&&gr;)Kr!==0&&(Pi===0||!gr||Zt.z<=gr.z)?(or=Zt,Zt=Zt.nextZ,Kr--):(or=gr,gr=gr.nextZ,Pi--),Sr?Sr.nextZ=or:St=or,or.prevZ=Sr,Sr=or;Zt=gr}Sr.nextZ=null,Xi*=2}while(Tr>1)}(nt)}(_,S,M,U);for(var Y,oe,ye=_;_.prev!==_.next;)if(Y=_.prev,oe=_.next,U?ja(_,S,M,U):qn(_))d.push(Y.i/v|0),d.push(_.i/v|0),d.push(oe.i/v|0),mf(_),_=oe.next,ye=oe.next;else if((_=oe)===ye){q?q===1?Mn(_=No(Yi(_),d,v),d,v,S,M,U,2):q===2&&ro(_,d,v,S,M,U):Mn(Yi(_),d,v,S,M,U,1);break}}}function qn(_){var d=_.prev,v=_,S=_.next;if(Yo(d,v,S)>=0)return!1;for(var M=d.x,U=v.x,q=S.x,Y=d.y,oe=v.y,ye=S.y,Ie=M<U?M<q?M:q:U<q?U:q,Re=Y<oe?Y<ye?Y:ye:oe<ye?oe:ye,Ge=M>U?M>q?M:q:U>q?U:q,rt=Y>oe?Y>ye?Y:ye:oe>ye?oe:ye,nt=S.next;nt!==d;){if(nt.x>=Ie&&nt.x<=Ge&&nt.y>=Re&&nt.y<=rt&&Fl(M,Y,U,oe,q,ye,nt.x,nt.y)&&Yo(nt.prev,nt,nt.next)>=0)return!1;nt=nt.next}return!0}function ja(_,d,v,S){var M=_.prev,U=_,q=_.next;if(Yo(M,U,q)>=0)return!1;for(var Y=M.x,oe=U.x,ye=q.x,Ie=M.y,Re=U.y,Ge=q.y,rt=Y<oe?Y<ye?Y:ye:oe<ye?oe:ye,nt=Ie<Re?Ie<Ge?Ie:Ge:Re<Ge?Re:Ge,St=Y>oe?Y>ye?Y:ye:oe>ye?oe:ye,qt=Ie>Re?Ie>Ge?Ie:Ge:Re>Ge?Re:Ge,Zt=fl(rt,nt,d,v,S),gr=fl(St,qt,d,v,S),or=_.prevZ,Sr=_.nextZ;or&&or.z>=Zt&&Sr&&Sr.z<=gr;){if(or.x>=rt&&or.x<=St&&or.y>=nt&&or.y<=qt&&or!==M&&or!==q&&Fl(Y,Ie,oe,Re,ye,Ge,or.x,or.y)&&Yo(or.prev,or,or.next)>=0||(or=or.prevZ,Sr.x>=rt&&Sr.x<=St&&Sr.y>=nt&&Sr.y<=qt&&Sr!==M&&Sr!==q&&Fl(Y,Ie,oe,Re,ye,Ge,Sr.x,Sr.y)&&Yo(Sr.prev,Sr,Sr.next)>=0))return!1;Sr=Sr.nextZ}for(;or&&or.z>=Zt;){if(or.x>=rt&&or.x<=St&&or.y>=nt&&or.y<=qt&&or!==M&&or!==q&&Fl(Y,Ie,oe,Re,ye,Ge,or.x,or.y)&&Yo(or.prev,or,or.next)>=0)return!1;or=or.prevZ}for(;Sr&&Sr.z<=gr;){if(Sr.x>=rt&&Sr.x<=St&&Sr.y>=nt&&Sr.y<=qt&&Sr!==M&&Sr!==q&&Fl(Y,Ie,oe,Re,ye,Ge,Sr.x,Sr.y)&&Yo(Sr.prev,Sr,Sr.next)>=0)return!1;Sr=Sr.nextZ}return!0}function No(_,d,v){var S=_;do{var M=S.prev,U=S.next.next;!hl(M,U)&&r0(M,S,S.next,U)&&n0(M,U)&&n0(U,M)&&(d.push(M.i/v|0),d.push(S.i/v|0),d.push(U.i/v|0),mf(S),mf(S.next),S=_=U),S=S.next}while(S!==_);return Yi(S)}function ro(_,d,v,S,M,U){var q=_;do{for(var Y=q.next.next;Y!==q.prev;){if(q.i!==Y.i&&$0(q,Y)){var oe=pf(q,Y);return q=Yi(q,q.next),oe=Yi(oe,oe.next),Mn(q,d,v,S,M,U,0),void Mn(oe,d,v,S,M,U,0)}Y=Y.next}q=q.next}while(q!==_)}function ko(_,d){return _.x-d.x}function Fo(_,d){var v=function(M,U){var q,Y=U,oe=M.x,ye=M.y,Ie=-1/0;do{if(ye<=Y.y&&ye>=Y.next.y&&Y.next.y!==Y.y){var Re=Y.x+(ye-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(Re<=oe&&Re>Ie&&(Ie=Re,q=Y.x<Y.next.x?Y:Y.next,Re===oe))return q}Y=Y.next}while(Y!==U);if(!q)return null;var Ge,rt=q,nt=q.x,St=q.y,qt=1/0;Y=q;do oe>=Y.x&&Y.x>=nt&&oe!==Y.x&&Fl(ye<St?oe:Ie,ye,nt,St,ye<St?Ie:oe,ye,Y.x,Y.y)&&(Ge=Math.abs(ye-Y.y)/(oe-Y.x),n0(Y,M)&&(Ge<qt||Ge===qt&&(Y.x>q.x||Y.x===q.x&&$o(q,Y)))&&(q=Y,qt=Ge)),Y=Y.next;while(Y!==rt);return q}(_,d);if(!v)return d;var S=pf(v,_);return Yi(S,S.next),Yi(v,v.next)}function $o(_,d){return Yo(_.prev,_,d.prev)<0&&Yo(d.next,_,_.next)<0}function fl(_,d,v,S,M){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=(_-v)*M|0)|_<<8))|_<<4))|_<<2))|_<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-S)*M|0)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function t0(_){var d=_,v=_;do(d.x<v.x||d.x===v.x&&d.y<v.y)&&(v=d),d=d.next;while(d!==_);return v}function Fl(_,d,v,S,M,U,q,Y){return(M-q)*(d-Y)>=(_-q)*(U-Y)&&(_-q)*(S-Y)>=(v-q)*(d-Y)&&(v-q)*(U-Y)>=(M-q)*(S-Y)}function $0(_,d){return _.next.i!==d.i&&_.prev.i!==d.i&&!function(v,S){var M=v;do{if(M.i!==v.i&&M.next.i!==v.i&&M.i!==S.i&&M.next.i!==S.i&&r0(M,M.next,v,S))return!0;M=M.next}while(M!==v);return!1}(_,d)&&(n0(_,d)&&n0(d,_)&&function(v,S){var M=v,U=!1,q=(v.x+S.x)/2,Y=(v.y+S.y)/2;do M.y>Y!=M.next.y>Y&&M.next.y!==M.y&&q<(M.next.x-M.x)*(Y-M.y)/(M.next.y-M.y)+M.x&&(U=!U),M=M.next;while(M!==v);return U}(_,d)&&(Yo(_.prev,_,d.prev)||Yo(_,d.prev,d))||hl(_,d)&&Yo(_.prev,_,_.next)>0&&Yo(d.prev,d,d.next)>0)}function Yo(_,d,v){return(d.y-_.y)*(v.x-d.x)-(d.x-_.x)*(v.y-d.y)}function hl(_,d){return _.x===d.x&&_.y===d.y}function r0(_,d,v,S){var M=nc(Yo(_,d,v)),U=nc(Yo(_,d,S)),q=nc(Yo(v,S,_)),Y=nc(Yo(v,S,d));return M!==U&&q!==Y||!(M!==0||!i0(_,v,d))||!(U!==0||!i0(_,S,d))||!(q!==0||!i0(v,_,S))||!(Y!==0||!i0(v,d,S))}function i0(_,d,v){return d.x<=Math.max(_.x,v.x)&&d.x>=Math.min(_.x,v.x)&&d.y<=Math.max(_.y,v.y)&&d.y>=Math.min(_.y,v.y)}function nc(_){return _>0?1:_<0?-1:0}function n0(_,d){return Yo(_.prev,_,_.next)<0?Yo(_,d,_.next)>=0&&Yo(_,_.prev,d)>=0:Yo(_,d,_.prev)<0||Yo(_,_.next,d)<0}function pf(_,d){var v=new qd(_.i,_.x,_.y),S=new qd(d.i,d.x,d.y),M=_.next,U=d.prev;return _.next=d,d.prev=_,v.next=M,M.prev=v,S.next=v,v.prev=S,U.next=S,S.prev=U,S}function Ua(_,d,v,S){var M=new qd(_,d,v);return S?(M.next=S.next,M.prev=S,S.next.prev=M,S.next=M):(M.prev=M,M.next=M),M}function mf(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function qd(_,d,v){this.i=_,this.x=d,this.y=v,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vd(_,d,v,S){for(var M=0,U=d,q=v-S;U<v;U+=S)M+=(_[q]-_[U])*(_[U+1]+_[q+1]),q=U;return M}Mo.exports=Ln,Mo.exports.default=Ln,Ln.deviation=function(_,d,v,S){var M=d&&d.length,U=Math.abs(Vd(_,0,M?d[0]*v:_.length,v));if(M)for(var q=0,Y=d.length;q<Y;q++)U-=Math.abs(Vd(_,d[q]*v,q<Y-1?d[q+1]*v:_.length,v));var oe=0;for(q=0;q<S.length;q+=3){var ye=S[q]*v,Ie=S[q+1]*v,Re=S[q+2]*v;oe+=Math.abs((_[ye]-_[Re])*(_[Ie+1]-_[ye+1])-(_[ye]-_[Ie])*(_[Re+1]-_[ye+1]))}return U===0&&oe===0?0:Math.abs((oe-U)/U)},Ln.flatten=function(_){for(var d=_[0][0].length,v={vertices:[],holes:[],dimensions:d},S=0,M=0;M<_.length;M++){for(var U=0;U<_[M].length;U++)for(var q=0;q<d;q++)v.vertices.push(_[M][U][q]);M>0&&v.holes.push(S+=_[M-1].length)}return v};var c1=f(Mo.exports);function f1(_,d,v,S,M){gf(_,d,v||0,S||_.length-1,M||am)}function gf(_,d,v,S,M){for(;S>v;){if(S-v>600){var U=S-v+1,q=d-v+1,Y=Math.log(U),oe=.5*Math.exp(2*Y/3),ye=.5*Math.sqrt(Y*oe*(U-oe)/U)*(q-U/2<0?-1:1);gf(_,d,Math.max(v,Math.floor(d-q*oe/U+ye)),Math.min(S,Math.floor(d+(U-q)*oe/U+ye)),M)}var Ie=_[d],Re=v,Ge=S;for(ch(_,v,d),M(_[S],Ie)>0&&ch(_,v,S);Re<Ge;){for(ch(_,Re,Ge),Re++,Ge--;M(_[Re],Ie)<0;)Re++;for(;M(_[Ge],Ie)>0;)Ge--}M(_[v],Ie)===0?ch(_,v,Ge):ch(_,++Ge,S),Ge<=d&&(v=Ge+1),d<=Ge&&(S=Ge-1)}}function ch(_,d,v){var S=_[d];_[d]=_[v],_[v]=S}function am(_,d){return _<d?-1:_>d?1:0}function Hd(_,d){const v=_.length;if(v<=1)return[_];const S=[];let M,U;for(let q=0;q<v;q++){const Y=Ce(_[q]);Y!==0&&(_[q].area=Math.abs(Y),U===void 0&&(U=Y<0),U===Y<0?(M&&S.push(M),M=[_[q]]):M.push(_[q]))}if(M&&S.push(M),d>1)for(let q=0;q<S.length;q++)S[q].length<=d||(f1(S[q],d,1,S[q].length-1,v0),S[q]=S[q].slice(0,d));return S}function v0(_,d){return d.area-_.area}function sn(_,d,v){const S=v.patternDependencies;let M=!1;for(const U of d){const q=U.paint.get(`${_}-pattern`);q.isConstant()||(M=!0);const Y=q.constantOr(null);Y&&(M=!0,S[Y.to]=!0,S[Y.from]=!0)}return M}function Ff(_,d,v,S,M){const U=M.patternDependencies;for(const q of d){const Y=q.paint.get(`${_}-pattern`).value;if(Y.kind!=="constant"){let oe=Y.evaluate({zoom:S-1},v,{},M.availableImages),ye=Y.evaluate({zoom:S},v,{},M.availableImages),Ie=Y.evaluate({zoom:S+1},v,{},M.availableImages);oe=oe&&oe.name?oe.name:oe,ye=ye&&ye.name?ye.name:ye,Ie=Ie&&Ie.name?Ie.name:Ie,U[oe]=!0,U[ye]=!0,U[Ie]=!0,v.patterns[q.id]={min:oe,mid:ye,max:Ie}}}return v}class $d{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(v=>v.id),this.index=d.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Se,this.indexArray=new jt,this.indexArray2=new hr,this.programConfigurations=new ms(d.layers,d.zoom),this.segments=new qr,this.segments2=new qr,this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id)}populate(d,v,S){this.hasPattern=sn("fill",this.layers,v);const M=this.layers[0].layout.get("fill-sort-key"),U=!M.isConstant(),q=[];for(const{feature:Y,id:oe,index:ye,sourceLayerIndex:Ie}of d){const Re=this.layers[0]._featureFilter.needGeometry,Ge=Ts(Y,Re);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),Ge,S))continue;const rt=U?M.evaluate(Ge,{},S,v.availableImages):void 0,nt={id:oe,properties:Y.properties,type:Y.type,sourceLayerIndex:Ie,index:ye,geometry:Re?Ge.geometry:co(Y),patterns:{},sortKey:rt};q.push(nt)}U&&q.sort((Y,oe)=>Y.sortKey-oe.sortKey);for(const Y of q){const{geometry:oe,index:ye,sourceLayerIndex:Ie}=Y;if(this.hasPattern){const Re=Ff("fill",this.layers,Y,this.zoom,v);this.patternFeatures.push(Re)}else this.addFeature(Y,oe,ye,S,{});v.featureIndex.insert(d[ye].feature,oe,ye,Ie,this.index)}}update(d,v,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,v,this.stateDependentLayers,S)}addFeatures(d,v,S){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,v,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,xa),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(d,v,S,M,U){for(const q of Hd(v,500)){let Y=0;for(const rt of q)Y+=rt.length;const oe=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray),ye=oe.vertexLength,Ie=[],Re=[];for(const rt of q){if(rt.length===0)continue;rt!==q[0]&&Re.push(Ie.length/2);const nt=this.segments2.prepareSegment(rt.length,this.layoutVertexArray,this.indexArray2),St=nt.vertexLength;this.layoutVertexArray.emplaceBack(rt[0].x,rt[0].y),this.indexArray2.emplaceBack(St+rt.length-1,St),Ie.push(rt[0].x),Ie.push(rt[0].y);for(let qt=1;qt<rt.length;qt++)this.layoutVertexArray.emplaceBack(rt[qt].x,rt[qt].y),this.indexArray2.emplaceBack(St+qt-1,St+qt),Ie.push(rt[qt].x),Ie.push(rt[qt].y);nt.vertexLength+=rt.length,nt.primitiveLength+=rt.length}const Ge=c1(Ie,Re);for(let rt=0;rt<Ge.length;rt+=3)this.indexArray.emplaceBack(ye+Ge[rt],ye+Ge[rt+1],ye+Ge[rt+2]);oe.vertexLength+=Y,oe.primitiveLength+=Ge.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,S,U,M)}}let h1,d1;ei("FillBucket",$d,{omit:["layers","patternFeatures"]});var sm={get paint(){return d1=d1||new es({"fill-antialias":new Ii(It.paint_fill["fill-antialias"]),"fill-opacity":new rn(It.paint_fill["fill-opacity"]),"fill-color":new rn(It.paint_fill["fill-color"]),"fill-outline-color":new rn(It.paint_fill["fill-outline-color"]),"fill-translate":new Ii(It.paint_fill["fill-translate"]),"fill-translate-anchor":new Ii(It.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ra(It.paint_fill["fill-pattern"])})},get layout(){return h1=h1||new es({"fill-sort-key":new rn(It.layout_fill["fill-sort-key"])})}};class lm extends Zs{constructor(d){super(d,sm)}recalculate(d,v){super.recalculate(d,v);const S=this.paint._values["fill-outline-color"];S.value.kind==="constant"&&S.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new $d(d)}queryRadius(){return Ol(this.paint.get("fill-translate"))}queryIntersectsFeature(d,v,S,M,U,q,Y){return j0(Nc(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,Y),M)}isTileClipped(){return!0}}const um=So([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),fh=So([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Bh}=um;var b0={},cm=y,Gd=G0;function G0(_,d,v,S,M){this.properties={},this.extent=v,this.type=0,this._pbf=_,this._geometry=-1,this._keys=S,this._values=M,_.readFields(p1,this,d)}function p1(_,d,v){_==1?d.id=v.readVarint():_==2?function(S,M){for(var U=S.readVarint()+S.pos;S.pos<U;){var q=M._keys[S.readVarint()],Y=M._values[S.readVarint()];M.properties[q]=Y}}(v,d):_==3?d.type=v.readVarint():_==4&&(d._geometry=v.pos)}function fm(_){for(var d,v,S=0,M=0,U=_.length,q=U-1;M<U;q=M++)S+=((v=_[q]).x-(d=_[M]).x)*(d.y+v.y);return S}G0.types=["Unknown","Point","LineString","Polygon"],G0.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var d,v=_.readVarint()+_.pos,S=1,M=0,U=0,q=0,Y=[];_.pos<v;){if(M<=0){var oe=_.readVarint();S=7&oe,M=oe>>3}if(M--,S===1||S===2)U+=_.readSVarint(),q+=_.readSVarint(),S===1&&(d&&Y.push(d),d=[]),d.push(new cm(U,q));else{if(S!==7)throw new Error("unknown command "+S);d&&d.push(d[0].clone())}}return d&&Y.push(d),Y},G0.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var d=_.readVarint()+_.pos,v=1,S=0,M=0,U=0,q=1/0,Y=-1/0,oe=1/0,ye=-1/0;_.pos<d;){if(S<=0){var Ie=_.readVarint();v=7&Ie,S=Ie>>3}if(S--,v===1||v===2)(M+=_.readSVarint())<q&&(q=M),M>Y&&(Y=M),(U+=_.readSVarint())<oe&&(oe=U),U>ye&&(ye=U);else if(v!==7)throw new Error("unknown command "+v)}return[q,oe,Y,ye]},G0.prototype.toGeoJSON=function(_,d,v){var S,M,U=this.extent*Math.pow(2,v),q=this.extent*_,Y=this.extent*d,oe=this.loadGeometry(),ye=G0.types[this.type];function Ie(rt){for(var nt=0;nt<rt.length;nt++){var St=rt[nt];rt[nt]=[360*(St.x+q)/U-180,360/Math.PI*Math.atan(Math.exp((180-360*(St.y+Y)/U)*Math.PI/180))-90]}}switch(this.type){case 1:var Re=[];for(S=0;S<oe.length;S++)Re[S]=oe[S][0];Ie(oe=Re);break;case 2:for(S=0;S<oe.length;S++)Ie(oe[S]);break;case 3:for(oe=function(rt){var nt=rt.length;if(nt<=1)return[rt];for(var St,qt,Zt=[],gr=0;gr<nt;gr++){var or=fm(rt[gr]);or!==0&&(qt===void 0&&(qt=or<0),qt===or<0?(St&&Zt.push(St),St=[rt[gr]]):St.push(rt[gr]))}return St&&Zt.push(St),Zt}(oe),S=0;S<oe.length;S++)for(M=0;M<oe[S].length;M++)Ie(oe[S][M])}oe.length===1?oe=oe[0]:ye="Multi"+ye;var Ge={type:"Feature",geometry:{type:ye,coordinates:oe},properties:this.properties};return"id"in this&&(Ge.id=this.id),Ge};var hm=Gd,m1=g1;function g1(_,d){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=_,this._keys=[],this._values=[],this._features=[],_.readFields(y1,this,d),this.length=this._features.length}function y1(_,d,v){_===15?d.version=v.readVarint():_===1?d.name=v.readString():_===5?d.extent=v.readVarint():_===2?d._features.push(v.pos):_===3?d._keys.push(v.readString()):_===4&&d._values.push(function(S){for(var M=null,U=S.readVarint()+S.pos;S.pos<U;){var q=S.readVarint()>>3;M=q===1?S.readString():q===2?S.readFloat():q===3?S.readDouble():q===4?S.readVarint64():q===5?S.readVarint():q===6?S.readSVarint():q===7?S.readBoolean():null}return M}(v))}g1.prototype.feature=function(_){if(_<0||_>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[_];var d=this._pbf.readVarint()+this._pbf.pos;return new hm(this._pbf,d,this.extent,this._keys,this._values)};var dm=m1;function n(_,d,v){if(_===3){var S=new dm(v,v.readVarint()+v.pos);S.length&&(d[S.name]=S)}}b0.VectorTile=function(_,d){this.layers=_.readFields(n,{},d)},b0.VectorTileFeature=Gd,b0.VectorTileLayer=m1;const a=b0.VectorTileFeature.types,l=Math.pow(2,13);function g(_,d,v,S,M,U,q,Y){_.emplaceBack(d,v,2*Math.floor(S*l)+q,M*l*2,U*l*2,Math.round(Y))}class w{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(v=>v.id),this.index=d.index,this.hasPattern=!1,this.layoutVertexArray=new De,this.centroidVertexArray=new ke,this.indexArray=new jt,this.programConfigurations=new ms(d.layers,d.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id)}populate(d,v,S){this.features=[],this.hasPattern=sn("fill-extrusion",this.layers,v);for(const{feature:M,id:U,index:q,sourceLayerIndex:Y}of d){const oe=this.layers[0]._featureFilter.needGeometry,ye=Ts(M,oe);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),ye,S))continue;const Ie={id:U,sourceLayerIndex:Y,index:q,geometry:oe?ye.geometry:co(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(Ff("fill-extrusion",this.layers,Ie,this.zoom,v)):this.addFeature(Ie,Ie.geometry,q,S,{}),v.featureIndex.insert(M,Ie.geometry,q,Y,this.index,!0)}}addFeatures(d,v,S){for(const M of this.features){const{geometry:U}=M;this.addFeature(M,U,M.index,v,S)}}update(d,v,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,v,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Bh),this.centroidVertexBuffer=d.createVertexBuffer(this.centroidVertexArray,fh.members,!0),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(d,v,S,M,U){const q={x:0,y:0,vertexCount:0};for(const Y of Hd(v,500)){let oe=0;for(const nt of Y)oe+=nt.length;let ye=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const nt of Y){if(nt.length===0||E(nt))continue;let St=0;for(let qt=0;qt<nt.length;qt++){const Zt=nt[qt];if(qt>=1){const gr=nt[qt-1];if(!x(Zt,gr)){ye.vertexLength+4>qr.MAX_VERTEX_ARRAY_LENGTH&&(ye=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const or=Zt.sub(gr)._perp()._unit(),Sr=gr.dist(Zt);St+Sr>32768&&(St=0),g(this.layoutVertexArray,Zt.x,Zt.y,or.x,or.y,0,0,St),g(this.layoutVertexArray,Zt.x,Zt.y,or.x,or.y,0,1,St),q.x+=2*Zt.x,q.y+=2*Zt.y,q.vertexCount+=2,St+=Sr,g(this.layoutVertexArray,gr.x,gr.y,or.x,or.y,0,0,St),g(this.layoutVertexArray,gr.x,gr.y,or.x,or.y,0,1,St),q.x+=2*gr.x,q.y+=2*gr.y,q.vertexCount+=2;const Tr=ye.vertexLength;this.indexArray.emplaceBack(Tr,Tr+2,Tr+1),this.indexArray.emplaceBack(Tr+1,Tr+2,Tr+3),ye.vertexLength+=4,ye.primitiveLength+=2}}}}if(ye.vertexLength+oe>qr.MAX_VERTEX_ARRAY_LENGTH&&(ye=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray)),a[d.type]!=="Polygon")continue;const Ie=[],Re=[],Ge=ye.vertexLength;for(const nt of Y)if(nt.length!==0){nt!==Y[0]&&Re.push(Ie.length/2);for(let St=0;St<nt.length;St++){const qt=nt[St];g(this.layoutVertexArray,qt.x,qt.y,0,0,1,1,0),q.x+=qt.x,q.y+=qt.y,q.vertexCount+=1,Ie.push(qt.x),Ie.push(qt.y)}}const rt=c1(Ie,Re);for(let nt=0;nt<rt.length;nt+=3)this.indexArray.emplaceBack(Ge+rt[nt],Ge+rt[nt+2],Ge+rt[nt+1]);ye.primitiveLength+=rt.length/3,ye.vertexLength+=oe}for(let Y=0;Y<q.vertexCount;Y++)this.centroidVertexArray.emplaceBack(Math.floor(q.x/q.vertexCount),Math.floor(q.y/q.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,S,U,M)}}function x(_,d){return _.x===d.x&&(_.x<0||_.x>Ho)||_.y===d.y&&(_.y<0||_.y>Ho)}function E(_){return _.every(d=>d.x<0)||_.every(d=>d.x>Ho)||_.every(d=>d.y<0)||_.every(d=>d.y>Ho)}let D;ei("FillExtrusionBucket",w,{omit:["layers","features"]});var H={get paint(){return D=D||new es({"fill-extrusion-opacity":new Ii(It["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new rn(It["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ii(It["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ii(It["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ra(It["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new rn(It["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new rn(It["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ii(It["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class V extends Zs{constructor(d){super(d,H)}createBucket(d){return new w(d)}queryRadius(){return Ol(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(d,v,S,M,U,q,Y,oe){const ye=Nc(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,Y),Ie=this.paint.get("fill-extrusion-height").evaluate(v,S),Re=this.paint.get("fill-extrusion-base").evaluate(v,S),Ge=function(nt,St,qt,Zt){const gr=[];for(const or of nt){const Sr=[or.x,or.y,0,1];At(Sr,Sr,St),gr.push(new A(Sr[0]/Sr[3],Sr[1]/Sr[3]))}return gr}(ye,oe),rt=function(nt,St,qt,Zt){const gr=[],or=[],Sr=Zt[8]*St,Tr=Zt[9]*St,Kr=Zt[10]*St,Pi=Zt[11]*St,Xi=Zt[8]*qt,Li=Zt[9]*qt,Ai=Zt[10]*qt,vi=Zt[11]*qt;for(const Vi of nt){const xi=[],si=[];for(const cn of Vi){const Ji=cn.x,io=cn.y,ha=Zt[0]*Ji+Zt[4]*io+Zt[12],ya=Zt[1]*Ji+Zt[5]*io+Zt[13],_s=Zt[2]*Ji+Zt[6]*io+Zt[14],oc=Zt[3]*Ji+Zt[7]*io+Zt[15],lu=_s+Kr,ss=oc+Pi,Ds=ha+Xi,ml=ya+Li,Pu=_s+Ai,uu=oc+vi,ls=new A((ha+Sr)/ss,(ya+Tr)/ss);ls.z=lu/ss,xi.push(ls);const vs=new A(Ds/uu,ml/uu);vs.z=Pu/uu,si.push(vs)}gr.push(xi),or.push(si)}return[gr,or]}(M,Re,Ie,oe);return function(nt,St,qt){let Zt=1/0;j0(qt,St)&&(Zt=se(qt,St[0]));for(let gr=0;gr<St.length;gr++){const or=St[gr],Sr=nt[gr];for(let Tr=0;Tr<or.length-1;Tr++){const Kr=or[Tr],Pi=[Kr,or[Tr+1],Sr[Tr+1],Sr[Tr],Kr];Ms(qt,Pi)&&(Zt=Math.min(Zt,se(qt,Pi)))}}return Zt!==1/0&&Zt}(rt[0],rt[1],Ge)}}function J(_,d){return _.x*d.x+_.y*d.y}function se(_,d){if(_.length===1){let v=0;const S=d[v++];let M;for(;!M||S.equals(M);)if(M=d[v++],!M)return 1/0;for(;v<d.length;v++){const U=d[v],q=_[0],Y=M.sub(S),oe=U.sub(S),ye=q.sub(S),Ie=J(Y,Y),Re=J(Y,oe),Ge=J(oe,oe),rt=J(ye,Y),nt=J(ye,oe),St=Ie*Ge-Re*Re,qt=(Ge*rt-Re*nt)/St,Zt=(Ie*nt-Re*rt)/St,gr=S.z*(1-qt-Zt)+M.z*qt+U.z*Zt;if(isFinite(gr))return gr}return 1/0}{let v=1/0;for(const S of d)v=Math.min(v,S.z);return v}}const xe=So([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Oe}=xe,He=So([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:st}=He,Pt=b0.VectorTileFeature.types,Wt=Math.cos(Math.PI/180*37.5),rr=Math.pow(2,14)/.5;class ur{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(v=>v.id),this.index=d.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(v=>{this.gradients[v.id]={}}),this.layoutVertexArray=new je,this.layoutVertexArray2=new ut,this.indexArray=new jt,this.programConfigurations=new ms(d.layers,d.zoom),this.segments=new qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id)}populate(d,v,S){this.hasPattern=sn("line",this.layers,v);const M=this.layers[0].layout.get("line-sort-key"),U=!M.isConstant(),q=[];for(const{feature:Y,id:oe,index:ye,sourceLayerIndex:Ie}of d){const Re=this.layers[0]._featureFilter.needGeometry,Ge=Ts(Y,Re);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),Ge,S))continue;const rt=U?M.evaluate(Ge,{},S):void 0,nt={id:oe,properties:Y.properties,type:Y.type,sourceLayerIndex:Ie,index:ye,geometry:Re?Ge.geometry:co(Y),patterns:{},sortKey:rt};q.push(nt)}U&&q.sort((Y,oe)=>Y.sortKey-oe.sortKey);for(const Y of q){const{geometry:oe,index:ye,sourceLayerIndex:Ie}=Y;if(this.hasPattern){const Re=Ff("line",this.layers,Y,this.zoom,v);this.patternFeatures.push(Re)}else this.addFeature(Y,oe,ye,S,{});v.featureIndex.insert(d[ye].feature,oe,ye,Ie,this.index)}}update(d,v,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,v,this.stateDependentLayers,S)}addFeatures(d,v,S){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,v,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,st)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Oe),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(d){if(d.properties&&Object.prototype.hasOwnProperty.call(d.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(d.properties,"mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}}addFeature(d,v,S,M,U){const q=this.layers[0].layout,Y=q.get("line-join").evaluate(d,{}),oe=q.get("line-cap"),ye=q.get("line-miter-limit"),Ie=q.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(const Re of v)this.addLine(Re,d,Y,oe,ye,Ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,S,U,M)}addLine(d,v,S,M,U,q){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Zt=0;Zt<d.length-1;Zt++)this.totalDistance+=d[Zt].dist(d[Zt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Y=Pt[v.type]==="Polygon";let oe=d.length;for(;oe>=2&&d[oe-1].equals(d[oe-2]);)oe--;let ye=0;for(;ye<oe-1&&d[ye].equals(d[ye+1]);)ye++;if(oe<(Y?3:2))return;S==="bevel"&&(U=1.05);const Ie=this.overscaling<=16?15*Ho/(512*this.overscaling):0,Re=this.segments.prepareSegment(10*oe,this.layoutVertexArray,this.indexArray);let Ge,rt,nt,St,qt;this.e1=this.e2=-1,Y&&(Ge=d[oe-2],qt=d[ye].sub(Ge)._unit()._perp());for(let Zt=ye;Zt<oe;Zt++){if(nt=Zt===oe-1?Y?d[ye+1]:void 0:d[Zt+1],nt&&d[Zt].equals(nt))continue;qt&&(St=qt),Ge&&(rt=Ge),Ge=d[Zt],qt=nt?nt.sub(Ge)._unit()._perp():St,St=St||qt;let gr=St.add(qt);gr.x===0&&gr.y===0||gr._unit();const or=St.x*qt.x+St.y*qt.y,Sr=gr.x*qt.x+gr.y*qt.y,Tr=Sr!==0?1/Sr:1/0,Kr=2*Math.sqrt(2-2*Sr),Pi=Sr<Wt&&rt&&nt,Xi=St.x*qt.y-St.y*qt.x>0;if(Pi&&Zt>ye){const vi=Ge.dist(rt);if(vi>2*Ie){const Vi=Ge.sub(Ge.sub(rt)._mult(Ie/vi)._round());this.updateDistance(rt,Vi),this.addCurrentVertex(Vi,St,0,0,Re),rt=Vi}}const Li=rt&&nt;let Ai=Li?S:Y?"butt":M;if(Li&&Ai==="round"&&(Tr<q?Ai="miter":Tr<=2&&(Ai="fakeround")),Ai==="miter"&&Tr>U&&(Ai="bevel"),Ai==="bevel"&&(Tr>2&&(Ai="flipbevel"),Tr<U&&(Ai="miter")),rt&&this.updateDistance(rt,Ge),Ai==="miter")gr._mult(Tr),this.addCurrentVertex(Ge,gr,0,0,Re);else if(Ai==="flipbevel"){if(Tr>100)gr=qt.mult(-1);else{const vi=Tr*St.add(qt).mag()/St.sub(qt).mag();gr._perp()._mult(vi*(Xi?-1:1))}this.addCurrentVertex(Ge,gr,0,0,Re),this.addCurrentVertex(Ge,gr.mult(-1),0,0,Re)}else if(Ai==="bevel"||Ai==="fakeround"){const vi=-Math.sqrt(Tr*Tr-1),Vi=Xi?vi:0,xi=Xi?0:vi;if(rt&&this.addCurrentVertex(Ge,St,Vi,xi,Re),Ai==="fakeround"){const si=Math.round(180*Kr/Math.PI/20);for(let cn=1;cn<si;cn++){let Ji=cn/si;if(Ji!==.5){const ha=Ji-.5;Ji+=Ji*ha*(Ji-1)*((1.0904+or*(or*(3.55645-1.43519*or)-3.2452))*ha*ha+(.848013+or*(.215638*or-1.06021)))}const io=qt.sub(St)._mult(Ji)._add(St)._unit()._mult(Xi?-1:1);this.addHalfVertex(Ge,io.x,io.y,!1,Xi,0,Re)}}nt&&this.addCurrentVertex(Ge,qt,-Vi,-xi,Re)}else if(Ai==="butt")this.addCurrentVertex(Ge,gr,0,0,Re);else if(Ai==="square"){const vi=rt?1:-1;this.addCurrentVertex(Ge,gr,vi,vi,Re)}else Ai==="round"&&(rt&&(this.addCurrentVertex(Ge,St,0,0,Re),this.addCurrentVertex(Ge,St,1,1,Re,!0)),nt&&(this.addCurrentVertex(Ge,qt,-1,-1,Re,!0),this.addCurrentVertex(Ge,qt,0,0,Re)));if(Pi&&Zt<oe-1){const vi=Ge.dist(nt);if(vi>2*Ie){const Vi=Ge.add(nt.sub(Ge)._mult(Ie/vi)._round());this.updateDistance(Ge,Vi),this.addCurrentVertex(Vi,qt,0,0,Re),Ge=Vi}}}}addCurrentVertex(d,v,S,M,U,q=!1){const Y=v.y*M-v.x,oe=-v.y-v.x*M;this.addHalfVertex(d,v.x+v.y*S,v.y-v.x*S,q,!1,S,U),this.addHalfVertex(d,Y,oe,q,!0,-M,U),this.distance>rr/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(d,v,S,M,U,q))}addHalfVertex({x:d,y:v},S,M,U,q,Y,oe){const ye=.5*(this.lineClips?this.scaledDistance*(rr-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d<<1)+(U?1:0),(v<<1)+(q?1:0),Math.round(63*S)+128,Math.round(63*M)+128,1+(Y===0?0:Y<0?-1:1)|(63&ye)<<2,ye>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ie=oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ie),oe.primitiveLength++),q?this.e2=Ie:this.e1=Ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(d,v){this.distance+=d.dist(v),this.updateScaledDistance()}}let Lr,Rr;ei("LineBucket",ur,{omit:["layers","patternFeatures"]});var Gr={get paint(){return Rr=Rr||new es({"line-opacity":new rn(It.paint_line["line-opacity"]),"line-color":new rn(It.paint_line["line-color"]),"line-translate":new Ii(It.paint_line["line-translate"]),"line-translate-anchor":new Ii(It.paint_line["line-translate-anchor"]),"line-width":new rn(It.paint_line["line-width"]),"line-gap-width":new rn(It.paint_line["line-gap-width"]),"line-offset":new rn(It.paint_line["line-offset"]),"line-blur":new rn(It.paint_line["line-blur"]),"line-dasharray":new Qa(It.paint_line["line-dasharray"]),"line-pattern":new Ra(It.paint_line["line-pattern"]),"line-gradient":new Jc(It.paint_line["line-gradient"])})},get layout(){return Lr=Lr||new es({"line-cap":new Ii(It.layout_line["line-cap"]),"line-join":new rn(It.layout_line["line-join"]),"line-miter-limit":new Ii(It.layout_line["line-miter-limit"]),"line-round-limit":new Ii(It.layout_line["line-round-limit"]),"line-sort-key":new rn(It.layout_line["line-sort-key"])})}};class ti extends rn{possiblyEvaluate(d,v){return v=new To(Math.floor(v.zoom),{now:v.now,fadeDuration:v.fadeDuration,zoomHistory:v.zoomHistory,transition:v.transition}),super.possiblyEvaluate(d,v)}evaluate(d,v,S,M){return v=ee({},v,{zoom:Math.floor(v.zoom)}),super.evaluate(d,v,S,M)}}let gi;class Ki extends Zs{constructor(d){super(d,Gr),this.gradientVersion=0,gi||(gi=new ti(Gr.paint.properties["line-width"].specification),gi.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(d){d==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof wr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(d,v){super.recalculate(d,v),this.paint._values["line-floorwidth"]=gi.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new ur(d)}queryRadius(d){const v=d,S=Un(ia("line-width",this,v),ia("line-gap-width",this,v)),M=ia("line-offset",this,v);return S/2+Math.abs(M)+Ol(this.paint.get("line-translate"))}queryIntersectsFeature(d,v,S,M,U,q,Y){const oe=Nc(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,Y),ye=Y/2*Un(this.paint.get("line-width").evaluate(v,S),this.paint.get("line-gap-width").evaluate(v,S)),Ie=this.paint.get("line-offset").evaluate(v,S);return Ie&&(M=function(Re,Ge){const rt=[];for(let nt=0;nt<Re.length;nt++){const St=Re[nt],qt=[];for(let Zt=0;Zt<St.length;Zt++){const gr=St[Zt-1],or=St[Zt],Sr=St[Zt+1],Tr=Zt===0?new A(0,0):or.sub(gr)._unit()._perp(),Kr=Zt===St.length-1?new A(0,0):Sr.sub(or)._unit()._perp(),Pi=Tr._add(Kr)._unit(),Xi=Pi.x*Kr.x+Pi.y*Kr.y;Xi!==0&&Pi._mult(1/Xi),qt.push(Pi._mult(Ge)._add(or))}rt.push(qt)}return rt}(M,Ie*Y)),function(Re,Ge,rt){for(let nt=0;nt<Ge.length;nt++){const St=Ge[nt];if(Re.length>=3){for(let qt=0;qt<St.length;qt++)if(e0(Re,St[qt]))return!0}if(U0(Re,St,rt))return!0}return!1}(oe,M,ye)}isTileClipped(){return!0}}function Un(_,d){return d>0?d+2*_:_}const gs=So([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dl=So([{name:"a_projected_pos",components:3,type:"Float32"}],4);So([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const su=So([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);So([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rc=So([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Bf=So([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function r7(_,d,v){return _.sections.forEach(S=>{S.text=function(M,U,q){const Y=U.layout.get("text-transform").evaluate(q,{});return Y==="uppercase"?M=M.toLocaleUpperCase():Y==="lowercase"&&(M=M.toLocaleLowerCase()),ca.applyArabicShaping&&(M=ca.applyArabicShaping(M)),M}(S.text,d,v)}),_}So([{name:"triangle",components:3,type:"Uint16"}]),So([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),So([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),So([{type:"Float32",name:"offsetX"}]),So([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),So([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ys=24,Av=ea,Sv=function(_,d,v,S,M){var U,q,Y=8*M-S-1,oe=(1<<Y)-1,ye=oe>>1,Ie=-7,Re=v?M-1:0,Ge=v?-1:1,rt=_[d+Re];for(Re+=Ge,U=rt&(1<<-Ie)-1,rt>>=-Ie,Ie+=Y;Ie>0;U=256*U+_[d+Re],Re+=Ge,Ie-=8);for(q=U&(1<<-Ie)-1,U>>=-Ie,Ie+=S;Ie>0;q=256*q+_[d+Re],Re+=Ge,Ie-=8);if(U===0)U=1-ye;else{if(U===oe)return q?NaN:1/0*(rt?-1:1);q+=Math.pow(2,S),U-=ye}return(rt?-1:1)*q*Math.pow(2,U-S)},Ev=function(_,d,v,S,M,U){var q,Y,oe,ye=8*U-M-1,Ie=(1<<ye)-1,Re=Ie>>1,Ge=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,rt=S?0:U-1,nt=S?1:-1,St=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(Y=isNaN(d)?1:0,q=Ie):(q=Math.floor(Math.log(d)/Math.LN2),d*(oe=Math.pow(2,-q))<1&&(q--,oe*=2),(d+=q+Re>=1?Ge/oe:Ge*Math.pow(2,1-Re))*oe>=2&&(q++,oe/=2),q+Re>=Ie?(Y=0,q=Ie):q+Re>=1?(Y=(d*oe-1)*Math.pow(2,M),q+=Re):(Y=d*Math.pow(2,Re-1)*Math.pow(2,M),q=0));M>=8;_[v+rt]=255&Y,rt+=nt,Y/=256,M-=8);for(q=q<<M|Y,ye+=M;ye>0;_[v+rt]=255&q,rt+=nt,q/=256,ye-=8);_[v+rt-nt]|=128*St};function ea(_){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(_)?_:new Uint8Array(_||0),this.pos=0,this.type=0,this.length=this.buf.length}ea.Varint=0,ea.Fixed64=1,ea.Bytes=2,ea.Fixed32=5;var pm=4294967296,Cv=1/pm,Iv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function yf(_){return _.type===ea.Bytes?_.readVarint()+_.pos:_.pos+1}function jh(_,d,v){return v?4294967296*d+(_>>>0):4294967296*(d>>>0)+(_>>>0)}function Lv(_,d,v){var S=d<=16383?1:d<=2097151?2:d<=268435455?3:Math.floor(Math.log(d)/(7*Math.LN2));v.realloc(S);for(var M=v.pos-1;M>=_;M--)v.buf[M+S]=v.buf[M]}function i7(_,d){for(var v=0;v<_.length;v++)d.writeVarint(_[v])}function n7(_,d){for(var v=0;v<_.length;v++)d.writeSVarint(_[v])}function o7(_,d){for(var v=0;v<_.length;v++)d.writeFloat(_[v])}function a7(_,d){for(var v=0;v<_.length;v++)d.writeDouble(_[v])}function s7(_,d){for(var v=0;v<_.length;v++)d.writeBoolean(_[v])}function l7(_,d){for(var v=0;v<_.length;v++)d.writeFixed32(_[v])}function u7(_,d){for(var v=0;v<_.length;v++)d.writeSFixed32(_[v])}function c7(_,d){for(var v=0;v<_.length;v++)d.writeFixed64(_[v])}function f7(_,d){for(var v=0;v<_.length;v++)d.writeSFixed64(_[v])}function _1(_,d){return(_[d]|_[d+1]<<8|_[d+2]<<16)+16777216*_[d+3]}function Uh(_,d,v){_[v]=d,_[v+1]=d>>>8,_[v+2]=d>>>16,_[v+3]=d>>>24}function Tv(_,d){return(_[d]|_[d+1]<<8|_[d+2]<<16)+(_[d+3]<<24)}ea.prototype={destroy:function(){this.buf=null},readFields:function(_,d,v){for(v=v||this.length;this.pos<v;){var S=this.readVarint(),M=S>>3,U=this.pos;this.type=7&S,_(M,d,this),this.pos===U&&this.skip(S)}return d},readMessage:function(_,d){return this.readFields(_,d,this.readVarint()+this.pos)},readFixed32:function(){var _=_1(this.buf,this.pos);return this.pos+=4,_},readSFixed32:function(){var _=Tv(this.buf,this.pos);return this.pos+=4,_},readFixed64:function(){var _=_1(this.buf,this.pos)+_1(this.buf,this.pos+4)*pm;return this.pos+=8,_},readSFixed64:function(){var _=_1(this.buf,this.pos)+Tv(this.buf,this.pos+4)*pm;return this.pos+=8,_},readFloat:function(){var _=Sv(this.buf,this.pos,!0,23,4);return this.pos+=4,_},readDouble:function(){var _=Sv(this.buf,this.pos,!0,52,8);return this.pos+=8,_},readVarint:function(_){var d,v,S=this.buf;return d=127&(v=S[this.pos++]),v<128?d:(d|=(127&(v=S[this.pos++]))<<7,v<128?d:(d|=(127&(v=S[this.pos++]))<<14,v<128?d:(d|=(127&(v=S[this.pos++]))<<21,v<128?d:function(M,U,q){var Y,oe,ye=q.buf;if(Y=(112&(oe=ye[q.pos++]))>>4,oe<128||(Y|=(127&(oe=ye[q.pos++]))<<3,oe<128)||(Y|=(127&(oe=ye[q.pos++]))<<10,oe<128)||(Y|=(127&(oe=ye[q.pos++]))<<17,oe<128)||(Y|=(127&(oe=ye[q.pos++]))<<24,oe<128)||(Y|=(1&(oe=ye[q.pos++]))<<31,oe<128))return jh(M,Y,U);throw new Error("Expected varint not more than 10 bytes")}(d|=(15&(v=S[this.pos]))<<28,_,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var _=this.readVarint();return _%2==1?(_+1)/-2:_/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var _=this.readVarint()+this.pos,d=this.pos;return this.pos=_,_-d>=12&&Iv?function(v,S,M){return Iv.decode(v.subarray(S,M))}(this.buf,d,_):function(v,S,M){for(var U="",q=S;q<M;){var Y,oe,ye,Ie=v[q],Re=null,Ge=Ie>239?4:Ie>223?3:Ie>191?2:1;if(q+Ge>M)break;Ge===1?Ie<128&&(Re=Ie):Ge===2?(192&(Y=v[q+1]))==128&&(Re=(31&Ie)<<6|63&Y)<=127&&(Re=null):Ge===3?(oe=v[q+2],(192&(Y=v[q+1]))==128&&(192&oe)==128&&((Re=(15&Ie)<<12|(63&Y)<<6|63&oe)<=2047||Re>=55296&&Re<=57343)&&(Re=null)):Ge===4&&(oe=v[q+2],ye=v[q+3],(192&(Y=v[q+1]))==128&&(192&oe)==128&&(192&ye)==128&&((Re=(15&Ie)<<18|(63&Y)<<12|(63&oe)<<6|63&ye)<=65535||Re>=1114112)&&(Re=null)),Re===null?(Re=65533,Ge=1):Re>65535&&(Re-=65536,U+=String.fromCharCode(Re>>>10&1023|55296),Re=56320|1023&Re),U+=String.fromCharCode(Re),q+=Ge}return U}(this.buf,d,_)},readBytes:function(){var _=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,_);return this.pos=_,d},readPackedVarint:function(_,d){if(this.type!==ea.Bytes)return _.push(this.readVarint(d));var v=yf(this);for(_=_||[];this.pos<v;)_.push(this.readVarint(d));return _},readPackedSVarint:function(_){if(this.type!==ea.Bytes)return _.push(this.readSVarint());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readSVarint());return _},readPackedBoolean:function(_){if(this.type!==ea.Bytes)return _.push(this.readBoolean());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readBoolean());return _},readPackedFloat:function(_){if(this.type!==ea.Bytes)return _.push(this.readFloat());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readFloat());return _},readPackedDouble:function(_){if(this.type!==ea.Bytes)return _.push(this.readDouble());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readDouble());return _},readPackedFixed32:function(_){if(this.type!==ea.Bytes)return _.push(this.readFixed32());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readFixed32());return _},readPackedSFixed32:function(_){if(this.type!==ea.Bytes)return _.push(this.readSFixed32());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readSFixed32());return _},readPackedFixed64:function(_){if(this.type!==ea.Bytes)return _.push(this.readFixed64());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readFixed64());return _},readPackedSFixed64:function(_){if(this.type!==ea.Bytes)return _.push(this.readSFixed64());var d=yf(this);for(_=_||[];this.pos<d;)_.push(this.readSFixed64());return _},skip:function(_){var d=7&_;if(d===ea.Varint)for(;this.buf[this.pos++]>127;);else if(d===ea.Bytes)this.pos=this.readVarint()+this.pos;else if(d===ea.Fixed32)this.pos+=4;else{if(d!==ea.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(_,d){this.writeVarint(_<<3|d)},realloc:function(_){for(var d=this.length||16;d<this.pos+_;)d*=2;if(d!==this.length){var v=new Uint8Array(d);v.set(this.buf),this.buf=v,this.length=d}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(_){this.realloc(4),Uh(this.buf,_,this.pos),this.pos+=4},writeSFixed32:function(_){this.realloc(4),Uh(this.buf,_,this.pos),this.pos+=4},writeFixed64:function(_){this.realloc(8),Uh(this.buf,-1&_,this.pos),Uh(this.buf,Math.floor(_*Cv),this.pos+4),this.pos+=8},writeSFixed64:function(_){this.realloc(8),Uh(this.buf,-1&_,this.pos),Uh(this.buf,Math.floor(_*Cv),this.pos+4),this.pos+=8},writeVarint:function(_){(_=+_||0)>268435455||_<0?function(d,v){var S,M;if(d>=0?(S=d%4294967296|0,M=d/4294967296|0):(M=~(-d/4294967296),4294967295^(S=~(-d%4294967296))?S=S+1|0:(S=0,M=M+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");v.realloc(10),function(U,q,Y){Y.buf[Y.pos++]=127&U|128,U>>>=7,Y.buf[Y.pos++]=127&U|128,U>>>=7,Y.buf[Y.pos++]=127&U|128,U>>>=7,Y.buf[Y.pos++]=127&U|128,Y.buf[Y.pos]=127&(U>>>=7)}(S,0,v),function(U,q){var Y=(7&U)<<4;q.buf[q.pos++]|=Y|((U>>>=3)?128:0),U&&(q.buf[q.pos++]=127&U|((U>>>=7)?128:0),U&&(q.buf[q.pos++]=127&U|((U>>>=7)?128:0),U&&(q.buf[q.pos++]=127&U|((U>>>=7)?128:0),U&&(q.buf[q.pos++]=127&U|((U>>>=7)?128:0),U&&(q.buf[q.pos++]=127&U)))))}(M,v)}(_,this):(this.realloc(4),this.buf[this.pos++]=127&_|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=_>>>7&127))))},writeSVarint:function(_){this.writeVarint(_<0?2*-_-1:2*_)},writeBoolean:function(_){this.writeVarint(!!_)},writeString:function(_){_=String(_),this.realloc(4*_.length),this.pos++;var d=this.pos;this.pos=function(S,M,U){for(var q,Y,oe=0;oe<M.length;oe++){if((q=M.charCodeAt(oe))>55295&&q<57344){if(!Y){q>56319||oe+1===M.length?(S[U++]=239,S[U++]=191,S[U++]=189):Y=q;continue}if(q<56320){S[U++]=239,S[U++]=191,S[U++]=189,Y=q;continue}q=Y-55296<<10|q-56320|65536,Y=null}else Y&&(S[U++]=239,S[U++]=191,S[U++]=189,Y=null);q<128?S[U++]=q:(q<2048?S[U++]=q>>6|192:(q<65536?S[U++]=q>>12|224:(S[U++]=q>>18|240,S[U++]=q>>12&63|128),S[U++]=q>>6&63|128),S[U++]=63&q|128)}return U}(this.buf,_,this.pos);var v=this.pos-d;v>=128&&Lv(d,v,this),this.pos=d-1,this.writeVarint(v),this.pos+=v},writeFloat:function(_){this.realloc(4),Ev(this.buf,_,this.pos,!0,23,4),this.pos+=4},writeDouble:function(_){this.realloc(8),Ev(this.buf,_,this.pos,!0,52,8),this.pos+=8},writeBytes:function(_){var d=_.length;this.writeVarint(d),this.realloc(d);for(var v=0;v<d;v++)this.buf[this.pos++]=_[v]},writeRawMessage:function(_,d){this.pos++;var v=this.pos;_(d,this);var S=this.pos-v;S>=128&&Lv(v,S,this),this.pos=v-1,this.writeVarint(S),this.pos+=S},writeMessage:function(_,d,v){this.writeTag(_,ea.Bytes),this.writeRawMessage(d,v)},writePackedVarint:function(_,d){d.length&&this.writeMessage(_,i7,d)},writePackedSVarint:function(_,d){d.length&&this.writeMessage(_,n7,d)},writePackedBoolean:function(_,d){d.length&&this.writeMessage(_,s7,d)},writePackedFloat:function(_,d){d.length&&this.writeMessage(_,o7,d)},writePackedDouble:function(_,d){d.length&&this.writeMessage(_,a7,d)},writePackedFixed32:function(_,d){d.length&&this.writeMessage(_,l7,d)},writePackedSFixed32:function(_,d){d.length&&this.writeMessage(_,u7,d)},writePackedFixed64:function(_,d){d.length&&this.writeMessage(_,c7,d)},writePackedSFixed64:function(_,d){d.length&&this.writeMessage(_,f7,d)},writeBytesField:function(_,d){this.writeTag(_,ea.Bytes),this.writeBytes(d)},writeFixed32Field:function(_,d){this.writeTag(_,ea.Fixed32),this.writeFixed32(d)},writeSFixed32Field:function(_,d){this.writeTag(_,ea.Fixed32),this.writeSFixed32(d)},writeFixed64Field:function(_,d){this.writeTag(_,ea.Fixed64),this.writeFixed64(d)},writeSFixed64Field:function(_,d){this.writeTag(_,ea.Fixed64),this.writeSFixed64(d)},writeVarintField:function(_,d){this.writeTag(_,ea.Varint),this.writeVarint(d)},writeSVarintField:function(_,d){this.writeTag(_,ea.Varint),this.writeSVarint(d)},writeStringField:function(_,d){this.writeTag(_,ea.Bytes),this.writeString(d)},writeFloatField:function(_,d){this.writeTag(_,ea.Fixed32),this.writeFloat(d)},writeDoubleField:function(_,d){this.writeTag(_,ea.Fixed64),this.writeDouble(d)},writeBooleanField:function(_,d){this.writeVarintField(_,!!d)}};var mm=f(Av);const gm=3;function h7(_,d,v){_===1&&v.readMessage(d7,d)}function d7(_,d,v){if(_===3){const{id:S,bitmap:M,width:U,height:q,left:Y,top:oe,advance:ye}=v.readMessage(p7,{});d.push({id:S,bitmap:new oi({width:U+2*gm,height:q+2*gm},M),metrics:{width:U,height:q,left:Y,top:oe,advance:ye}})}}function p7(_,d,v){_===1?d.id=v.readVarint():_===2?d.bitmap=v.readBytes():_===3?d.width=v.readVarint():_===4?d.height=v.readVarint():_===5?d.left=v.readSVarint():_===6?d.top=v.readSVarint():_===7&&(d.advance=v.readVarint())}const Pv=gm;function Mv(_){let d=0,v=0;for(const q of _)d+=q.w*q.h,v=Math.max(v,q.w);_.sort((q,Y)=>Y.h-q.h);const S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),v),h:1/0}];let M=0,U=0;for(const q of _)for(let Y=S.length-1;Y>=0;Y--){const oe=S[Y];if(!(q.w>oe.w||q.h>oe.h)){if(q.x=oe.x,q.y=oe.y,U=Math.max(U,q.y+q.h),M=Math.max(M,q.x+q.w),q.w===oe.w&&q.h===oe.h){const ye=S.pop();Y<S.length&&(S[Y]=ye)}else q.h===oe.h?(oe.x+=q.w,oe.w-=q.w):q.w===oe.w?(oe.y+=q.h,oe.h-=q.h):(S.push({x:oe.x+q.w,y:oe.y,w:oe.w-q.w,h:q.h}),oe.y+=q.h,oe.h-=q.h);break}}return{w:M,h:U,fill:d/(M*U)||0}}const Tu=1;class ym{constructor(d,{pixelRatio:v,version:S,stretchX:M,stretchY:U,content:q}){this.paddedRect=d,this.pixelRatio=v,this.stretchX=M,this.stretchY=U,this.content=q,this.version=S}get tl(){return[this.paddedRect.x+Tu,this.paddedRect.y+Tu]}get br(){return[this.paddedRect.x+this.paddedRect.w-Tu,this.paddedRect.y+this.paddedRect.h-Tu]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Tu)/this.pixelRatio,(this.paddedRect.h-2*Tu)/this.pixelRatio]}}class Dv{constructor(d,v){const S={},M={};this.haveRenderCallbacks=[];const U=[];this.addImages(d,S,U),this.addImages(v,M,U);const{w:q,h:Y}=Mv(U),oe=new Si({width:q||1,height:Y||1});for(const ye in d){const Ie=d[ye],Re=S[ye].paddedRect;Si.copy(Ie.data,oe,{x:0,y:0},{x:Re.x+Tu,y:Re.y+Tu},Ie.data)}for(const ye in v){const Ie=v[ye],Re=M[ye].paddedRect,Ge=Re.x+Tu,rt=Re.y+Tu,nt=Ie.data.width,St=Ie.data.height;Si.copy(Ie.data,oe,{x:0,y:0},{x:Ge,y:rt},Ie.data),Si.copy(Ie.data,oe,{x:0,y:St-1},{x:Ge,y:rt-1},{width:nt,height:1}),Si.copy(Ie.data,oe,{x:0,y:0},{x:Ge,y:rt+St},{width:nt,height:1}),Si.copy(Ie.data,oe,{x:nt-1,y:0},{x:Ge-1,y:rt},{width:1,height:St}),Si.copy(Ie.data,oe,{x:0,y:0},{x:Ge+nt,y:rt},{width:1,height:St})}this.image=oe,this.iconPositions=S,this.patternPositions=M}addImages(d,v,S){for(const M in d){const U=d[M],q={x:0,y:0,w:U.data.width+2*Tu,h:U.data.height+2*Tu};S.push(q),v[M]=new ym(q,U),U.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(d,v){d.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const S in d.updatedImages)this.patchUpdatedImage(this.iconPositions[S],d.getImage(S),v),this.patchUpdatedImage(this.patternPositions[S],d.getImage(S),v)}patchUpdatedImage(d,v,S){if(!d||!v||d.version===v.version)return;d.version=v.version;const[M,U]=d.tl;S.update(v.data,void 0,{x:M,y:U})}}var jf;ei("ImagePosition",ym),ei("ImageAtlas",Dv),s.WritingMode=void 0,(jf=s.WritingMode||(s.WritingMode={}))[jf.none=0]="none",jf[jf.horizontal=1]="horizontal",jf[jf.vertical=2]="vertical",jf[jf.horizontalOnly=3]="horizontalOnly";const Zd=-17;class Xd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(d,v){const S=new Xd;return S.scale=d||1,S.fontStack=v,S}static forImage(d){const v=new Xd;return v.imageName=d,v}}class qh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(d,v){const S=new qh;for(let M=0;M<d.sections.length;M++){const U=d.sections[M];U.image?S.addImageSection(U):S.addTextSection(U,v)}return S}length(){return this.text.length}getSection(d){return this.sections[this.sectionIndex[d]]}getSectionIndex(d){return this.sectionIndex[d]}getCharCode(d){return this.text.charCodeAt(d)}verticalizePunctuation(){this.text=function(d){let v="";for(let S=0;S<d.length;S++){const M=d.charCodeAt(S+1)||null,U=d.charCodeAt(S-1)||null;v+=M&&Yu(M)&&!Wd[d[S+1]]||U&&Yu(U)&&!Wd[d[S-1]]||!Wd[d[S]]?d[S]:Wd[d[S]]}return v}(this.text)}trim(){let d=0;for(let S=0;S<this.text.length&&b1[this.text.charCodeAt(S)];S++)d++;let v=this.text.length;for(let S=this.text.length-1;S>=0&&S>=d&&b1[this.text.charCodeAt(S)];S--)v--;this.text=this.text.substring(d,v),this.sectionIndex=this.sectionIndex.slice(d,v)}substring(d,v){const S=new qh;return S.text=this.text.substring(d,v),S.sectionIndex=this.sectionIndex.slice(d,v),S.sections=this.sections,S}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((d,v)=>Math.max(d,this.sections[v].scale),0)}addTextSection(d,v){this.text+=d.text,this.sections.push(Xd.forText(d.scale,d.fontStack||v));const S=this.sections.length-1;for(let M=0;M<d.text.length;++M)this.sectionIndex.push(S)}addImageSection(d){const v=d.image?d.image.name:"";if(v.length===0)return void ze("Can't add FormattedSection with an empty image.");const S=this.getNextImageSectionCharCode();S?(this.text+=String.fromCharCode(S),this.sections.push(Xd.forImage(v)),this.sectionIndex.push(this.sections.length-1)):ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function v1(_,d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St){const qt=qh.fromFeature(_,M);let Zt;Re===s.WritingMode.vertical&&qt.verticalizePunctuation();const{processBidirectionalText:gr,processStyledBidirectionalText:or}=ca;if(gr&&qt.sections.length===1){Zt=[];const Kr=gr(qt.toString(),_m(qt,ye,U,d,S,rt,nt));for(const Pi of Kr){const Xi=new qh;Xi.text=Pi,Xi.sections=qt.sections;for(let Li=0;Li<Pi.length;Li++)Xi.sectionIndex.push(0);Zt.push(Xi)}}else if(or){Zt=[];const Kr=or(qt.text,qt.sectionIndex,_m(qt,ye,U,d,S,rt,nt));for(const Pi of Kr){const Xi=new qh;Xi.text=Pi[0],Xi.sectionIndex=Pi[1],Xi.sections=qt.sections,Zt.push(Xi)}}else Zt=function(Kr,Pi){const Xi=[],Li=Kr.text;let Ai=0;for(const vi of Pi)Xi.push(Kr.substring(Ai,vi)),Ai=vi;return Ai<Li.length&&Xi.push(Kr.substring(Ai,Li.length)),Xi}(qt,_m(qt,ye,U,d,S,rt,nt));const Sr=[],Tr={positionedLines:Sr,text:qt.toString(),top:Ie[1],bottom:Ie[1],left:Ie[0],right:Ie[0],writingMode:Re,iconsInText:!1,verticalizable:!1};return function(Kr,Pi,Xi,Li,Ai,vi,Vi,xi,si,cn,Ji,io){let ha=0,ya=Zd,_s=0,oc=0;const lu=xi==="right"?1:xi==="left"?0:.5;let ss=0;for(const ls of Ai){ls.trim();const vs=ls.getMaxScale(),Bl=(vs-1)*ys,cu={positionedGlyphs:[],lineOffset:0};Kr.positionedLines[ss]=cu;const Mu=cu.positionedGlyphs;let Du=0;if(!ls.length()){ya+=vi,++ss;continue}for(let gl=0;gl<ls.length();gl++){const go=ls.getSection(gl),ac=ls.getSectionIndex(gl),yl=ls.getCharCode(gl);let fu=0,o0=null,w0=null,x0=null,_f=ys;const a0=!(si===s.WritingMode.horizontal||!Ji&&!Xu(yl)||Ji&&(b1[yl]||(Ds=yl,yi.Arabic(Ds)||yi["Arabic Supplement"](Ds)||yi["Arabic Extended-A"](Ds)||yi["Arabic Presentation Forms-A"](Ds)||yi["Arabic Presentation Forms-B"](Ds))));if(go.imageName){const Fc=Li[go.imageName];if(!Fc)continue;x0=go.imageName,Kr.iconsInText=Kr.iconsInText||!0,w0=Fc.paddedRect;const zu=Fc.displaySize;go.scale=go.scale*ys/io,o0={width:zu[0],height:zu[1],left:Tu,top:-Pv,advance:a0?zu[1]:zu[0]},fu=Bl+(ys-zu[1]*go.scale),_f=o0.advance;const vf=a0?zu[0]*go.scale-ys*vs:zu[1]*go.scale-ys*vs;vf>0&&vf>Du&&(Du=vf)}else{const Fc=Xi[go.fontStack],zu=Fc&&Fc[yl];if(zu&&zu.rect)w0=zu.rect,o0=zu.metrics;else{const vf=Pi[go.fontStack],ep=vf&&vf[yl];if(!ep)continue;o0=ep.metrics}fu=(vs-go.scale)*ys}a0?(Kr.verticalizable=!0,Mu.push({glyph:yl,imageName:x0,x:ha,y:ya+fu,vertical:a0,scale:go.scale,fontStack:go.fontStack,sectionIndex:ac,metrics:o0,rect:w0}),ha+=_f*go.scale+cn):(Mu.push({glyph:yl,imageName:x0,x:ha,y:ya+fu,vertical:a0,scale:go.scale,fontStack:go.fontStack,sectionIndex:ac,metrics:o0,rect:w0}),ha+=o0.advance*go.scale+cn)}Mu.length!==0&&(_s=Math.max(ha-cn,_s),y7(Mu,0,Mu.length-1,lu,Du)),ha=0;const qa=vi*vs+Du;cu.lineOffset=Math.max(Du,Bl),ya+=qa,oc=Math.max(qa,oc),++ss}var Ds;const ml=ya-Zd,{horizontalAlign:Pu,verticalAlign:uu}=vm(Vi);(function(ls,vs,Bl,cu,Mu,Du,qa,gl,go){const ac=(vs-Bl)*Mu;let yl=0;yl=Du!==qa?-gl*cu-Zd:(-cu*go+.5)*qa;for(const fu of ls)for(const o0 of fu.positionedGlyphs)o0.x+=ac,o0.y+=yl})(Kr.positionedLines,lu,Pu,uu,_s,oc,vi,ml,Ai.length),Kr.top+=-uu*ml,Kr.bottom=Kr.top+ml,Kr.left+=-Pu*_s,Kr.right=Kr.left+_s}(Tr,d,v,S,Zt,q,Y,oe,Re,ye,Ge,St),!function(Kr){for(const Pi of Kr)if(Pi.positionedGlyphs.length!==0)return!1;return!0}(Sr)&&Tr}const b1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},m7={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zv(_,d,v,S,M,U){if(d.imageName){const q=S[d.imageName];return q?q.displaySize[0]*d.scale*ys/U+M:0}{const q=v[d.fontStack],Y=q&&q[_];return Y?Y.metrics.advance*d.scale+M:0}}function Nv(_,d,v,S){const M=Math.pow(_-d,2);return S?_<d?M/2:2*M:M+Math.abs(v)*v}function g7(_,d,v){let S=0;return _===10&&(S-=1e4),v&&(S+=150),_!==40&&_!==65288||(S+=50),d!==41&&d!==65289||(S+=50),S}function Rv(_,d,v,S,M,U){let q=null,Y=Nv(d,v,M,U);for(const oe of S){const ye=Nv(d-oe.x,v,M,U)+oe.badness;ye<=Y&&(q=oe,Y=ye)}return{index:_,x:d,priorBreak:q,badness:Y}}function Ov(_){return _?Ov(_.priorBreak).concat(_.index):[]}function _m(_,d,v,S,M,U,q){if(U!=="point")return[];if(!_)return[];const Y=[],oe=function(Ge,rt,nt,St,qt,Zt){let gr=0;for(let or=0;or<Ge.length();or++){const Sr=Ge.getSection(or);gr+=zv(Ge.getCharCode(or),Sr,St,qt,rt,Zt)}return gr/Math.max(1,Math.ceil(gr/nt))}(_,d,v,S,M,q),ye=_.text.indexOf("​")>=0;let Ie=0;for(let Ge=0;Ge<_.length();Ge++){const rt=_.getSection(Ge),nt=_.getCharCode(Ge);if(b1[nt]||(Ie+=zv(nt,rt,S,M,d,q)),Ge<_.length()-1){const St=!((Re=nt)<11904||!(yi["Bopomofo Extended"](Re)||yi.Bopomofo(Re)||yi["CJK Compatibility Forms"](Re)||yi["CJK Compatibility Ideographs"](Re)||yi["CJK Compatibility"](Re)||yi["CJK Radicals Supplement"](Re)||yi["CJK Strokes"](Re)||yi["CJK Symbols and Punctuation"](Re)||yi["CJK Unified Ideographs Extension A"](Re)||yi["CJK Unified Ideographs"](Re)||yi["Enclosed CJK Letters and Months"](Re)||yi["Halfwidth and Fullwidth Forms"](Re)||yi.Hiragana(Re)||yi["Ideographic Description Characters"](Re)||yi["Kangxi Radicals"](Re)||yi["Katakana Phonetic Extensions"](Re)||yi.Katakana(Re)||yi["Vertical Forms"](Re)||yi["Yi Radicals"](Re)||yi["Yi Syllables"](Re)));(m7[nt]||St||rt.imageName)&&Y.push(Rv(Ge+1,Ie,oe,Y,g7(nt,_.getCharCode(Ge+1),St&&ye),!1))}}var Re;return Ov(Rv(_.length(),Ie,oe,Y,0,!0))}function vm(_){let d=.5,v=.5;switch(_){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(_){case"bottom":case"bottom-right":case"bottom-left":v=1;break;case"top":case"top-right":case"top-left":v=0}return{horizontalAlign:d,verticalAlign:v}}function y7(_,d,v,S,M){if(!S&&!M)return;const U=_[v],q=(_[v].x+U.metrics.advance*U.scale)*S;for(let Y=d;Y<=v;Y++)_[Y].x-=q,_[Y].y+=M}function _7(_,d,v){const{horizontalAlign:S,verticalAlign:M}=vm(v),U=d[0]-_.displaySize[0]*S,q=d[1]-_.displaySize[1]*M;return{image:_,top:q,bottom:q+_.displaySize[1],left:U,right:U+_.displaySize[0]}}function Fv(_,d,v,S,M,U){const q=_.image;let Y;if(q.content){const qt=q.content,Zt=q.pixelRatio||1;Y=[qt[0]/Zt,qt[1]/Zt,q.displaySize[0]-qt[2]/Zt,q.displaySize[1]-qt[3]/Zt]}const oe=d.left*U,ye=d.right*U;let Ie,Re,Ge,rt;v==="width"||v==="both"?(rt=M[0]+oe-S[3],Re=M[0]+ye+S[1]):(rt=M[0]+(oe+ye-q.displaySize[0])/2,Re=rt+q.displaySize[0]);const nt=d.top*U,St=d.bottom*U;return v==="height"||v==="both"?(Ie=M[1]+nt-S[0],Ge=M[1]+St+S[2]):(Ie=M[1]+(nt+St-q.displaySize[1])/2,Ge=Ie+q.displaySize[1]),{image:q,top:Ie,right:Re,bottom:Ge,left:rt,collisionPadding:Y}}const Yd=255,W0=128,Uf=Yd*W0;function Bv(_,d){const{expression:v}=d;if(v.kind==="constant")return{kind:"constant",layoutSize:v.evaluate(new To(_+1))};if(v.kind==="source")return{kind:"source"};{const{zoomStops:S,interpolationType:M}=v;let U=0;for(;U<S.length&&S[U]<=_;)U++;U=Math.max(0,U-1);let q=U;for(;q<S.length&&S[q]<_+1;)q++;q=Math.min(S.length-1,q);const Y=S[U],oe=S[q];return v.kind==="composite"?{kind:"composite",minZoom:Y,maxZoom:oe,interpolationType:M}:{kind:"camera",minZoom:Y,maxZoom:oe,minSize:v.evaluate(new To(Y)),maxSize:v.evaluate(new To(oe)),interpolationType:M}}}function bm(_,d,v){let S="never";const M=_.get(d);return M?S=M:_.get(v)&&(S="always"),S}const v7=b0.VectorTileFeature.types,b7=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function w1(_,d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge){const rt=Y?Math.min(Uf,Math.round(Y[0])):0,nt=Y?Math.min(Uf,Math.round(Y[1])):0;_.emplaceBack(d,v,Math.round(32*S),Math.round(32*M),U,q,(rt<<1)+(oe?1:0),nt,16*ye,16*Ie,256*Re,256*Ge)}function wm(_,d,v){_.emplaceBack(d.x,d.y,v),_.emplaceBack(d.x,d.y,v),_.emplaceBack(d.x,d.y,v),_.emplaceBack(d.x,d.y,v)}function w7(_){for(const d of _.sections)if(Xc(d.text))return!0;return!1}class xm{constructor(d){this.layoutVertexArray=new Tt,this.indexArray=new jt,this.programConfigurations=d,this.segments=new qr,this.dynamicLayoutVertexArray=new Ct,this.opacityVertexArray=new br,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(d,v,S,M){this.isEmpty()||(S&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,gs.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,dl.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,b7,!0),this.opacityVertexBuffer.itemSize=1),(S||M)&&this.programConfigurations.upload(d))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ei("SymbolBuffers",xm);class km{constructor(d,v,S){this.layoutVertexArray=new d,this.layoutAttributes=v,this.indexArray=new S,this.segments=new qr,this.collisionVertexArray=new _t}upload(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,su.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ei("CollisionBuffers",km);class Vh{constructor(d){this.collisionBoxArray=d.collisionBoxArray,this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(q=>q.id),this.index=d.index,this.pixelRatio=d.pixelRatio,this.sourceLayerIndex=d.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=H0([]),this.placementViewportMatrix=H0([]);const v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bv(this.zoom,v["text-size"]),this.iconSizeData=Bv(this.zoom,v["icon-size"]);const S=this.layers[0].layout,M=S.get("symbol-sort-key"),U=S.get("symbol-z-order");this.canOverlap=bm(S,"text-overlap","text-allow-overlap")!=="never"||bm(S,"icon-overlap","icon-allow-overlap")!=="never"||S.get("text-ignore-placement")||S.get("icon-ignore-placement"),this.sortFeaturesByKey=U!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(U==="viewport-y"||U==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,S.get("symbol-placement")==="point"&&(this.writingModes=S.get("text-writing-mode").map(q=>s.WritingMode[q])),this.stateDependentLayerIds=this.layers.filter(q=>q.isStateDependent()).map(q=>q.id),this.sourceID=d.sourceID}createArrays(){this.text=new xm(new ms(this.layers,this.zoom,d=>/^text/.test(d))),this.icon=new xm(new ms(this.layers,this.zoom,d=>/^icon/.test(d))),this.glyphOffsetArray=new Ze,this.lineVertexArray=new T,this.symbolInstances=new Te,this.textAnchorOffsets=new W}calculateGlyphDependencies(d,v,S,M,U){for(let q=0;q<d.length;q++)if(v[d.charCodeAt(q)]=!0,(S||M)&&U){const Y=Wd[d.charAt(q)];Y&&(v[Y.charCodeAt(0)]=!0)}}populate(d,v,S){const M=this.layers[0],U=M.layout,q=U.get("text-font"),Y=U.get("text-field"),oe=U.get("icon-image"),ye=(Y.value.kind!=="constant"||Y.value.value instanceof Ko&&!Y.value.value.isEmpty()||Y.value.value.toString().length>0)&&(q.value.kind!=="constant"||q.value.value.length>0),Ie=oe.value.kind!=="constant"||!!oe.value.value||Object.keys(oe.parameters).length>0,Re=U.get("symbol-sort-key");if(this.features=[],!ye&&!Ie)return;const Ge=v.iconDependencies,rt=v.glyphDependencies,nt=v.availableImages,St=new To(this.zoom);for(const{feature:qt,id:Zt,index:gr,sourceLayerIndex:or}of d){const Sr=M._featureFilter.needGeometry,Tr=Ts(qt,Sr);if(!M._featureFilter.filter(St,Tr,S))continue;let Kr,Pi;if(Sr||(Tr.geometry=co(qt)),ye){const Li=M.getValueAndResolveTokens("text-field",Tr,S,nt),Ai=Ko.factory(Li);w7(Ai)&&(this.hasRTLText=!0),(!this.hasRTLText||Yc()==="unavailable"||this.hasRTLText&&ca.isParsed())&&(Kr=r7(Ai,M,Tr))}if(Ie){const Li=M.getValueAndResolveTokens("icon-image",Tr,S,nt);Pi=Li instanceof ts?Li:ts.fromString(Li)}if(!Kr&&!Pi)continue;const Xi=this.sortFeaturesByKey?Re.evaluate(Tr,{},S):void 0;if(this.features.push({id:Zt,text:Kr,icon:Pi,index:gr,sourceLayerIndex:or,geometry:Tr.geometry,properties:qt.properties,type:v7[qt.type],sortKey:Xi}),Pi&&(Ge[Pi.name]=!0),Kr){const Li=q.evaluate(Tr,{},S).join(","),Ai=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const vi of Kr.sections)if(vi.image)Ge[vi.image.name]=!0;else{const Vi=Su(Kr.toString()),xi=vi.fontStack||Li,si=rt[xi]=rt[xi]||{};this.calculateGlyphDependencies(vi.text,si,Ai,this.allowVerticalPlacement,Vi)}}}U.get("symbol-placement")==="line"&&(this.features=function(qt){const Zt={},gr={},or=[];let Sr=0;function Tr(Li){or.push(qt[Li]),Sr++}function Kr(Li,Ai,vi){const Vi=gr[Li];return delete gr[Li],gr[Ai]=Vi,or[Vi].geometry[0].pop(),or[Vi].geometry[0]=or[Vi].geometry[0].concat(vi[0]),Vi}function Pi(Li,Ai,vi){const Vi=Zt[Ai];return delete Zt[Ai],Zt[Li]=Vi,or[Vi].geometry[0].shift(),or[Vi].geometry[0]=vi[0].concat(or[Vi].geometry[0]),Vi}function Xi(Li,Ai,vi){const Vi=vi?Ai[0][Ai[0].length-1]:Ai[0][0];return`${Li}:${Vi.x}:${Vi.y}`}for(let Li=0;Li<qt.length;Li++){const Ai=qt[Li],vi=Ai.geometry,Vi=Ai.text?Ai.text.toString():null;if(!Vi){Tr(Li);continue}const xi=Xi(Vi,vi),si=Xi(Vi,vi,!0);if(xi in gr&&si in Zt&&gr[xi]!==Zt[si]){const cn=Pi(xi,si,vi),Ji=Kr(xi,si,or[cn].geometry);delete Zt[xi],delete gr[si],gr[Xi(Vi,or[Ji].geometry,!0)]=Ji,or[cn].geometry=null}else xi in gr?Kr(xi,si,vi):si in Zt?Pi(xi,si,vi):(Tr(Li),Zt[xi]=Sr-1,gr[si]=Sr-1)}return or.filter(Li=>Li.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qt,Zt)=>qt.sortKey-Zt.sortKey)}update(d,v,S){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,v,this.layers,S),this.icon.programConfigurations.updatePaintArrays(d,v,this.layers,S))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(d,v){const S=this.lineVertexArray.length;if(d.segment!==void 0){let M=d.dist(v[d.segment+1]),U=d.dist(v[d.segment]);const q={};for(let Y=d.segment+1;Y<v.length;Y++)q[Y]={x:v[Y].x,y:v[Y].y,tileUnitDistanceFromAnchor:M},Y<v.length-1&&(M+=v[Y+1].dist(v[Y]));for(let Y=d.segment||0;Y>=0;Y--)q[Y]={x:v[Y].x,y:v[Y].y,tileUnitDistanceFromAnchor:U},Y>0&&(U+=v[Y-1].dist(v[Y]));for(let Y=0;Y<v.length;Y++){const oe=q[Y];this.lineVertexArray.emplaceBack(oe.x,oe.y,oe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:S,lineLength:this.lineVertexArray.length-S}}addSymbols(d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge){const rt=d.indexArray,nt=d.layoutVertexArray,St=d.segments.prepareSegment(4*v.length,nt,rt,this.canOverlap?q.sortKey:void 0),qt=this.glyphOffsetArray.length,Zt=St.vertexLength,gr=this.allowVerticalPlacement&&Y===s.WritingMode.vertical?Math.PI/2:0,or=q.text&&q.text.sections;for(let Sr=0;Sr<v.length;Sr++){const{tl:Tr,tr:Kr,bl:Pi,br:Xi,tex:Li,pixelOffsetTL:Ai,pixelOffsetBR:vi,minFontScaleX:Vi,minFontScaleY:xi,glyphOffset:si,isSDF:cn,sectionIndex:Ji}=v[Sr],io=St.vertexLength,ha=si[1];w1(nt,oe.x,oe.y,Tr.x,ha+Tr.y,Li.x,Li.y,S,cn,Ai.x,Ai.y,Vi,xi),w1(nt,oe.x,oe.y,Kr.x,ha+Kr.y,Li.x+Li.w,Li.y,S,cn,vi.x,Ai.y,Vi,xi),w1(nt,oe.x,oe.y,Pi.x,ha+Pi.y,Li.x,Li.y+Li.h,S,cn,Ai.x,vi.y,Vi,xi),w1(nt,oe.x,oe.y,Xi.x,ha+Xi.y,Li.x+Li.w,Li.y+Li.h,S,cn,vi.x,vi.y,Vi,xi),wm(d.dynamicLayoutVertexArray,oe,gr),rt.emplaceBack(io,io+1,io+2),rt.emplaceBack(io+1,io+2,io+3),St.vertexLength+=4,St.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(si[0]),Sr!==v.length-1&&Ji===v[Sr+1].sectionIndex||d.programConfigurations.populatePaintArrays(nt.length,q,q.index,{},Ge,or&&or[Ji])}d.placedSymbolArray.emplaceBack(oe.x,oe.y,qt,this.glyphOffsetArray.length-qt,Zt,ye,Ie,oe.segment,S?S[0]:0,S?S[1]:0,M[0],M[1],Y,0,!1,0,Re)}_addCollisionDebugVertex(d,v,S,M,U,q){return v.emplaceBack(0,0),d.emplaceBack(S.x,S.y,M,U,Math.round(q.x),Math.round(q.y))}addCollisionDebugVertices(d,v,S,M,U,q,Y){const oe=U.segments.prepareSegment(4,U.layoutVertexArray,U.indexArray),ye=oe.vertexLength,Ie=U.layoutVertexArray,Re=U.collisionVertexArray,Ge=Y.anchorX,rt=Y.anchorY;this._addCollisionDebugVertex(Ie,Re,q,Ge,rt,new A(d,v)),this._addCollisionDebugVertex(Ie,Re,q,Ge,rt,new A(S,v)),this._addCollisionDebugVertex(Ie,Re,q,Ge,rt,new A(S,M)),this._addCollisionDebugVertex(Ie,Re,q,Ge,rt,new A(d,M)),oe.vertexLength+=4;const nt=U.indexArray;nt.emplaceBack(ye,ye+1),nt.emplaceBack(ye+1,ye+2),nt.emplaceBack(ye+2,ye+3),nt.emplaceBack(ye+3,ye),oe.primitiveLength+=4}addDebugCollisionBoxes(d,v,S,M){for(let U=d;U<v;U++){const q=this.collisionBoxArray.get(U);this.addCollisionDebugVertices(q.x1,q.y1,q.x2,q.y2,M?this.textCollisionBox:this.iconCollisionBox,q.anchorPoint,S)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new km(kr,Rc.members,hr),this.iconCollisionBox=new km(kr,Rc.members,hr);for(let d=0;d<this.symbolInstances.length;d++){const v=this.symbolInstances.get(d);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}}_deserializeCollisionBoxesForSymbol(d,v,S,M,U,q,Y,oe,ye){const Ie={};for(let Re=v;Re<S;Re++){const Ge=d.get(Re);Ie.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ie.textFeatureIndex=Ge.featureIndex;break}for(let Re=M;Re<U;Re++){const Ge=d.get(Re);Ie.verticalTextBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ie.verticalTextFeatureIndex=Ge.featureIndex;break}for(let Re=q;Re<Y;Re++){const Ge=d.get(Re);Ie.iconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ie.iconFeatureIndex=Ge.featureIndex;break}for(let Re=oe;Re<ye;Re++){const Ge=d.get(Re);Ie.verticalIconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ie.verticalIconFeatureIndex=Ge.featureIndex;break}return Ie}deserializeCollisionBoxes(d){this.collisionArrays=[];for(let v=0;v<this.symbolInstances.length;v++){const S=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,S.textBoxStartIndex,S.textBoxEndIndex,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S.iconBoxStartIndex,S.iconBoxEndIndex,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(d,v){const S=d.placedSymbolArray.get(v),M=S.vertexStartIndex+4*S.numGlyphs;for(let U=S.vertexStartIndex;U<M;U+=4)d.indexArray.emplaceBack(U,U+1,U+2),d.indexArray.emplaceBack(U+1,U+2,U+3)}getSortedSymbolIndexes(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const v=Math.sin(d),S=Math.cos(d),M=[],U=[],q=[];for(let Y=0;Y<this.symbolInstances.length;++Y){q.push(Y);const oe=this.symbolInstances.get(Y);M.push(0|Math.round(v*oe.anchorX+S*oe.anchorY)),U.push(oe.featureIndex)}return q.sort((Y,oe)=>M[Y]-M[oe]||U[oe]-U[Y]),q}addToSortKeyRanges(d,v){const S=this.sortKeyRanges[this.sortKeyRanges.length-1];S&&S.sortKey===v?S.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:d,symbolInstanceEnd:d+1})}sortFeatures(d){if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const v of this.symbolInstanceIndexes){const S=this.symbolInstances.get(v);this.featureSortOrder.push(S.featureIndex),[S.rightJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.leftJustifiedTextSymbolIndex].forEach((M,U,q)=>{M>=0&&q.indexOf(M)===U&&this.addIndicesForPlacedSymbol(this.text,M)}),S.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,S.verticalPlacedTextSymbolIndex),S.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.placedIconSymbolIndex),S.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let jv,Uv;ei("SymbolBucket",Vh,{omit:["layers","collisionBoxArray","features","compareText"]}),Vh.MAX_GLYPHS=65535,Vh.addDynamicAttributes=wm;var Am={get paint(){return Uv=Uv||new es({"icon-opacity":new rn(It.paint_symbol["icon-opacity"]),"icon-color":new rn(It.paint_symbol["icon-color"]),"icon-halo-color":new rn(It.paint_symbol["icon-halo-color"]),"icon-halo-width":new rn(It.paint_symbol["icon-halo-width"]),"icon-halo-blur":new rn(It.paint_symbol["icon-halo-blur"]),"icon-translate":new Ii(It.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ii(It.paint_symbol["icon-translate-anchor"]),"text-opacity":new rn(It.paint_symbol["text-opacity"]),"text-color":new rn(It.paint_symbol["text-color"],{runtimeType:qi,getOverride:_=>_.textColor,hasOverride:_=>!!_.textColor}),"text-halo-color":new rn(It.paint_symbol["text-halo-color"]),"text-halo-width":new rn(It.paint_symbol["text-halo-width"]),"text-halo-blur":new rn(It.paint_symbol["text-halo-blur"]),"text-translate":new Ii(It.paint_symbol["text-translate"]),"text-translate-anchor":new Ii(It.paint_symbol["text-translate-anchor"])})},get layout(){return jv=jv||new es({"symbol-placement":new Ii(It.layout_symbol["symbol-placement"]),"symbol-spacing":new Ii(It.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ii(It.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new rn(It.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ii(It.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ii(It.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ii(It.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ii(It.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ii(It.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ii(It.layout_symbol["icon-rotation-alignment"]),"icon-size":new rn(It.layout_symbol["icon-size"]),"icon-text-fit":new Ii(It.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ii(It.layout_symbol["icon-text-fit-padding"]),"icon-image":new rn(It.layout_symbol["icon-image"]),"icon-rotate":new rn(It.layout_symbol["icon-rotate"]),"icon-padding":new rn(It.layout_symbol["icon-padding"]),"icon-keep-upright":new Ii(It.layout_symbol["icon-keep-upright"]),"icon-offset":new rn(It.layout_symbol["icon-offset"]),"icon-anchor":new rn(It.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ii(It.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ii(It.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ii(It.layout_symbol["text-rotation-alignment"]),"text-field":new rn(It.layout_symbol["text-field"]),"text-font":new rn(It.layout_symbol["text-font"]),"text-size":new rn(It.layout_symbol["text-size"]),"text-max-width":new rn(It.layout_symbol["text-max-width"]),"text-line-height":new Ii(It.layout_symbol["text-line-height"]),"text-letter-spacing":new rn(It.layout_symbol["text-letter-spacing"]),"text-justify":new rn(It.layout_symbol["text-justify"]),"text-radial-offset":new rn(It.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ii(It.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new rn(It.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new rn(It.layout_symbol["text-anchor"]),"text-max-angle":new Ii(It.layout_symbol["text-max-angle"]),"text-writing-mode":new Ii(It.layout_symbol["text-writing-mode"]),"text-rotate":new rn(It.layout_symbol["text-rotate"]),"text-padding":new Ii(It.layout_symbol["text-padding"]),"text-keep-upright":new Ii(It.layout_symbol["text-keep-upright"]),"text-transform":new rn(It.layout_symbol["text-transform"]),"text-offset":new rn(It.layout_symbol["text-offset"]),"text-allow-overlap":new Ii(It.layout_symbol["text-allow-overlap"]),"text-overlap":new Ii(It.layout_symbol["text-overlap"]),"text-ignore-placement":new Ii(It.layout_symbol["text-ignore-placement"]),"text-optional":new Ii(It.layout_symbol["text-optional"])})}};class qv{constructor(d){if(d.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=d.property.overrides?d.property.overrides.runtimeType:Gi,this.defaultValue=d}evaluate(d){if(d.formattedSection){const v=this.defaultValue.property.overrides;if(v&&v.hasOverride(d.formattedSection))return v.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default}eachChild(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ei("FormatSectionOverride",qv,{omit:["defaultValue"]});class x1 extends Zs{constructor(d){super(d,Am)}recalculate(d,v){if(super.recalculate(d,v),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const S=this.layout.get("text-writing-mode");if(S){const M=[];for(const U of S)M.indexOf(U)<0&&M.push(U);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(d,v,S,M){const U=this.layout.get(d).evaluate(v,{},S,M),q=this._unevaluatedLayout._values[d];return q.isDataDriven()||Di(q.value)||!U?U:function(Y,oe){return oe.replace(/{([^{}]+)}/g,(ye,Ie)=>Ie in Y?String(Y[Ie]):"")}(v.properties,U)}createBucket(d){return new Vh(d)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const d of Am.paint.overridableProperties){if(!x1.hasPaintOverride(this.layout,d))continue;const v=this.paint.get(d),S=new qv(v),M=new Wr(S,v.property.specification);let U=null;U=v.value.kind==="constant"||v.value.kind==="source"?new xn("source",M):new Wi("composite",M,v.value.zoomStops),this.paint._values[d]=new Ws(v.property,U,v.parameters)}}_handleOverridablePaintPropertyUpdate(d,v,S){return!(!this.layout||v.isDataDriven()||S.isDataDriven())&&x1.hasPaintOverride(this.layout,d)}static hasPaintOverride(d,v){const S=d.get("text-field"),M=Am.paint.properties[v];let U=!1;const q=Y=>{for(const oe of Y)if(M.overrides&&M.overrides.hasOverride(oe))return void(U=!0)};if(S.value.kind==="constant"&&S.value.value instanceof Ko)q(S.value.value.sections);else if(S.value.kind==="source"){const Y=ye=>{U||(ye instanceof Aa&&Ao(ye.value)===Ei?q(ye.value.sections):ye instanceof xu?q(ye.sections):ye.eachChild(Y))},oe=S.value;oe._styleExpression&&Y(oe._styleExpression.expression)}return U}}let Vv;var x7={get paint(){return Vv=Vv||new es({"background-color":new Ii(It.paint_background["background-color"]),"background-pattern":new Qa(It.paint_background["background-pattern"]),"background-opacity":new Ii(It.paint_background["background-opacity"])})}};class k7 extends Zs{constructor(d){super(d,x7)}}let Hv;var A7={get paint(){return Hv=Hv||new es({"raster-opacity":new Ii(It.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ii(It.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ii(It.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ii(It.paint_raster["raster-brightness-max"]),"raster-saturation":new Ii(It.paint_raster["raster-saturation"]),"raster-contrast":new Ii(It.paint_raster["raster-contrast"]),"raster-resampling":new Ii(It.paint_raster["raster-resampling"]),"raster-fade-duration":new Ii(It.paint_raster["raster-fade-duration"])})}};class S7 extends Zs{constructor(d){super(d,A7)}}class E7 extends Zs{constructor(d){super(d,{}),this.onAdd=v=>{this.implementation.onAdd&&this.implementation.onAdd(v,v.painter.context.gl)},this.onRemove=v=>{this.implementation.onRemove&&this.implementation.onRemove(v,v.painter.context.gl)},this.implementation=d}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class C7{constructor(d){this._callback=d,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Sm=63710088e-1;class qf{constructor(d,v){if(isNaN(d)||isNaN(v))throw new Error(`Invalid LngLat object: (${d}, ${v})`);if(this.lng=+d,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qf(Z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(d){const v=Math.PI/180,S=this.lat*v,M=d.lat*v,U=Math.sin(S)*Math.sin(M)+Math.cos(S)*Math.cos(M)*Math.cos((d.lng-this.lng)*v);return Sm*Math.acos(Math.min(U,1))}static convert(d){if(d instanceof qf)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new qf(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new qf(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const $v=2*Math.PI*Sm;function Gv(_){return $v*Math.cos(_*Math.PI/180)}function Wv(_){return(180+_)/360}function Zv(_){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_*Math.PI/360)))/360}function Xv(_,d){return _/Gv(d)}function Em(_){return 360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90}class k1{constructor(d,v,S=0){this.x=+d,this.y=+v,this.z=+S}static fromLngLat(d,v=0){const S=qf.convert(d);return new k1(Wv(S.lng),Zv(S.lat),Xv(v,S.lat))}toLngLat(){return new qf(360*this.x-180,Em(this.y))}toAltitude(){return this.z*Gv(Em(this.y))}meterInMercatorCoordinateUnits(){return 1/$v*(d=Em(this.y),1/Math.cos(d*Math.PI/180));var d}}function Yv(_,d,v){var S=2*Math.PI*6378137/256/Math.pow(2,v);return[_*S-2*Math.PI*6378137/2,d*S-2*Math.PI*6378137/2]}class Cm{constructor(d,v,S){if(d<0||d>25||S<0||S>=Math.pow(2,d)||v<0||v>=Math.pow(2,d))throw new Error(`x=${v}, y=${S}, z=${d} outside of bounds. 0<=x<${Math.pow(2,d)}, 0<=y<${Math.pow(2,d)} 0<=z<=25 `);this.z=d,this.x=v,this.y=S,this.key=Kd(0,d,d,v,S)}equals(d){return this.z===d.z&&this.x===d.x&&this.y===d.y}url(d,v,S){const M=(q=this.y,Y=this.z,oe=Yv(256*(U=this.x),256*(q=Math.pow(2,Y)-q-1),Y),ye=Yv(256*(U+1),256*(q+1),Y),oe[0]+","+oe[1]+","+ye[0]+","+ye[1]);var U,q,Y,oe,ye;const Ie=function(Re,Ge,rt){let nt,St="";for(let qt=Re;qt>0;qt--)nt=1<<qt-1,St+=(Ge&nt?1:0)+(rt&nt?2:0);return St}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(S==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,v>1?"@2x":"").replace(/{quadkey}/g,Ie).replace(/{bbox-epsg-3857}/g,M)}isChildOf(d){const v=this.z-d.z;return v>0&&d.x===this.x>>v&&d.y===this.y>>v}getTilePoint(d){const v=Math.pow(2,this.z);return new A((d.x*v-this.x)*Ho,(d.y*v-this.y)*Ho)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kv{constructor(d,v){this.wrap=d,this.canonical=v,this.key=Kd(d,v.z,v.z,v.x,v.y)}}class Oc{constructor(d,v,S,M,U){if(d<S)throw new Error(`overscaledZ should be >= z; overscaledZ = ${d}; z = ${S}`);this.overscaledZ=d,this.wrap=v,this.canonical=new Cm(S,+M,+U),this.key=Kd(v,d,S,M,U)}clone(){return new Oc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)}scaledTo(d){if(d>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${d}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-d;return d>this.canonical.z?new Oc(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oc(d,this.wrap,d,this.canonical.x>>v,this.canonical.y>>v)}calculateScaledKey(d,v){if(d>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${d}; overscaledZ = ${this.overscaledZ}`);const S=this.canonical.z-d;return d>this.canonical.z?Kd(this.wrap*+v,d,this.canonical.z,this.canonical.x,this.canonical.y):Kd(this.wrap*+v,d,d,this.canonical.x>>S,this.canonical.y>>S)}isChildOf(d){if(d.wrap!==this.wrap)return!1;const v=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>v&&d.canonical.y===this.canonical.y>>v}children(d){if(this.overscaledZ>=d)return[new Oc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const v=this.canonical.z+1,S=2*this.canonical.x,M=2*this.canonical.y;return[new Oc(v,this.wrap,v,S,M),new Oc(v,this.wrap,v,S+1,M),new Oc(v,this.wrap,v,S,M+1),new Oc(v,this.wrap,v,S+1,M+1)]}isLessThan(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))}wrapped(){return new Oc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(d){return new Oc(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(d){return this.canonical.getTilePoint(new k1(d.x-this.wrap,d.y))}}function Kd(_,d,v,S,M){(_*=2)<0&&(_=-1*_-1);const U=1<<v;return(U*U*_+U*M+S).toString(36)+v.toString(36)+d.toString(36)}ei("CanonicalTileID",Cm),ei("OverscaledTileID",Oc,{omit:["posMatrix"]});class Jv{constructor(d,v,S){if(this.uid=d,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(S&&S!=="mapbox"&&S!=="terrarium")return void ze(`"${S}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=v.height;const M=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=S||"mapbox";for(let U=0;U<M;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(M,U)]=this.data[this._idx(M-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,M)]=this.data[this._idx(U,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<M;U++)for(let q=0;q<M;q++){const Y=this.get(U,q);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(d,v){const S=new Uint8Array(this.data.buffer),M=4*this._idx(d,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(S[M],S[M+1],S[M+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(d,v){if(d<-1||d>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(d+1)}_unpackMapbox(d,v,S){return(256*d*256+256*v+S)/10-1e4}_unpackTerrarium(d,v,S){return 256*d+v+S/256-32768}getPixels(){return new Si({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(d,v,S){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");let M=v*this.dim,U=v*this.dim+this.dim,q=S*this.dim,Y=S*this.dim+this.dim;switch(v){case-1:M=U-1;break;case 1:U=M+1}switch(S){case-1:q=Y-1;break;case 1:Y=q+1}const oe=-v*this.dim,ye=-S*this.dim;for(let Ie=q;Ie<Y;Ie++)for(let Re=M;Re<U;Re++)this.data[this._idx(Re,Ie)]=d.data[this._idx(Re+oe,Ie+ye)]}}ei("DEMData",Jv);class Qv{constructor(d){this._stringToNumber={},this._numberToString=[];for(let v=0;v<d.length;v++){const S=d[v];this._stringToNumber[S]=v,this._numberToString[v]=S}}encode(d){return this._stringToNumber[d]}decode(d){if(d>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${d} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[d]}}class eb{constructor(d,v,S,M,U){this.type="Feature",this._vectorTileFeature=d,d._z=v,d._x=S,d._y=M,this.properties=d.properties,this.id=U}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(d){this._geometry=d}toJSON(){const d={geometry:this.geometry};for(const v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(d[v]=this[v]);return d}}class tb{constructor(d,v){this.tileID=d,this.x=d.canonical.x,this.y=d.canonical.y,this.z=d.canonical.z,this.grid=new is(Ho,16,0),this.grid3D=new is(Ho,16,0),this.featureIndexArray=new de,this.promoteId=v}insert(d,v,S,M,U,q){const Y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(S,M,U);const oe=q?this.grid3D:this.grid;for(let ye=0;ye<v.length;ye++){const Ie=v[ye],Re=[1/0,1/0,-1/0,-1/0];for(let Ge=0;Ge<Ie.length;Ge++){const rt=Ie[Ge];Re[0]=Math.min(Re[0],rt.x),Re[1]=Math.min(Re[1],rt.y),Re[2]=Math.max(Re[2],rt.x),Re[3]=Math.max(Re[3],rt.y)}Re[0]<Ho&&Re[1]<Ho&&Re[2]>=0&&Re[3]>=0&&oe.insert(Y,Re[0],Re[1],Re[2],Re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new b0.VectorTile(new mm(this.rawTileData)).layers,this.sourceLayerCoder=new Qv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(d,v,S,M){this.loadVTLayers();const U=d.params||{},q=Ho/d.tileSize/d.scale,Y=jo(U.filter),oe=d.queryGeometry,ye=d.queryPadding*q,Ie=ib(oe),Re=this.grid.query(Ie.minX-ye,Ie.minY-ye,Ie.maxX+ye,Ie.maxY+ye),Ge=ib(d.cameraQueryGeometry),rt=this.grid3D.query(Ge.minX-ye,Ge.minY-ye,Ge.maxX+ye,Ge.maxY+ye,(qt,Zt,gr,or)=>function(Sr,Tr,Kr,Pi,Xi){for(const Ai of Sr)if(Tr<=Ai.x&&Kr<=Ai.y&&Pi>=Ai.x&&Xi>=Ai.y)return!0;const Li=[new A(Tr,Kr),new A(Tr,Xi),new A(Pi,Xi),new A(Pi,Kr)];if(Sr.length>2){for(const Ai of Li)if(e0(Sr,Ai))return!0}for(let Ai=0;Ai<Sr.length-1;Ai++)if(hf(Sr[Ai],Sr[Ai+1],Li))return!0;return!1}(d.cameraQueryGeometry,qt-ye,Zt-ye,gr+ye,or+ye));for(const qt of rt)Re.push(qt);Re.sort(I7);const nt={};let St;for(let qt=0;qt<Re.length;qt++){const Zt=Re[qt];if(Zt===St)continue;St=Zt;const gr=this.featureIndexArray.get(Zt);let or=null;this.loadMatchingFeature(nt,gr.bucketIndex,gr.sourceLayerIndex,gr.featureIndex,Y,U.layers,U.availableImages,v,S,M,(Sr,Tr,Kr)=>(or||(or=co(Sr)),Tr.queryIntersectsFeature(oe,Sr,Kr,or,this.z,d.transform,q,d.pixelPosMatrix)))}return nt}loadMatchingFeature(d,v,S,M,U,q,Y,oe,ye,Ie,Re){const Ge=this.bucketLayerIDs[v];if(q&&!function(qt,Zt){for(let gr=0;gr<qt.length;gr++)if(Zt.indexOf(qt[gr])>=0)return!0;return!1}(q,Ge))return;const rt=this.sourceLayerCoder.decode(S),nt=this.vtLayers[rt].feature(M);if(U.needGeometry){const qt=Ts(nt,!0);if(!U.filter(new To(this.tileID.overscaledZ),qt,this.tileID.canonical))return}else if(!U.filter(new To(this.tileID.overscaledZ),nt))return;const St=this.getId(nt,rt);for(let qt=0;qt<Ge.length;qt++){const Zt=Ge[qt];if(q&&q.indexOf(Zt)<0)continue;const gr=oe[Zt];if(!gr)continue;let or={};St&&Ie&&(or=Ie.getState(gr.sourceLayer||"_geojsonTileLayer",St));const Sr=ee({},ye[Zt]);Sr.paint=rb(Sr.paint,gr.paint,nt,or,Y),Sr.layout=rb(Sr.layout,gr.layout,nt,or,Y);const Tr=!Re||Re(nt,gr,or);if(!Tr)continue;const Kr=new eb(nt,this.z,this.x,this.y,St);Kr.layer=Sr;let Pi=d[Zt];Pi===void 0&&(Pi=d[Zt]=[]),Pi.push({featureIndex:M,feature:Kr,intersectionZ:Tr})}}lookupSymbolFeatures(d,v,S,M,U,q,Y,oe){const ye={};this.loadVTLayers();const Ie=jo(U);for(const Re of d)this.loadMatchingFeature(ye,S,M,Re,Ie,q,Y,oe,v);return ye}hasLayer(d){for(const v of this.bucketLayerIDs)for(const S of v)if(d===S)return!0;return!1}getId(d,v){let S=d.id;return this.promoteId&&(S=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]],typeof S=="boolean"&&(S=Number(S))),S}}function rb(_,d,v,S,M){return _e(_,(U,q)=>{const Y=d instanceof Eu?d.get(q):null;return Y&&Y.evaluate?Y.evaluate(v,S,M):Y})}function ib(_){let d=1/0,v=1/0,S=-1/0,M=-1/0;for(const U of _)d=Math.min(d,U.x),v=Math.min(v,U.y),S=Math.max(S,U.x),M=Math.max(M,U.y);return{minX:d,minY:v,maxX:S,maxY:M}}function I7(_,d){return d-_}function nb(_,d,v,S,M){const U=[];for(let q=0;q<_.length;q++){const Y=_[q];let oe;for(let ye=0;ye<Y.length-1;ye++){let Ie=Y[ye],Re=Y[ye+1];Ie.x<d&&Re.x<d||(Ie.x<d?Ie=new A(d,Ie.y+(d-Ie.x)/(Re.x-Ie.x)*(Re.y-Ie.y))._round():Re.x<d&&(Re=new A(d,Ie.y+(d-Ie.x)/(Re.x-Ie.x)*(Re.y-Ie.y))._round()),Ie.y<v&&Re.y<v||(Ie.y<v?Ie=new A(Ie.x+(v-Ie.y)/(Re.y-Ie.y)*(Re.x-Ie.x),v)._round():Re.y<v&&(Re=new A(Ie.x+(v-Ie.y)/(Re.y-Ie.y)*(Re.x-Ie.x),v)._round()),Ie.x>=S&&Re.x>=S||(Ie.x>=S?Ie=new A(S,Ie.y+(S-Ie.x)/(Re.x-Ie.x)*(Re.y-Ie.y))._round():Re.x>=S&&(Re=new A(S,Ie.y+(S-Ie.x)/(Re.x-Ie.x)*(Re.y-Ie.y))._round()),Ie.y>=M&&Re.y>=M||(Ie.y>=M?Ie=new A(Ie.x+(M-Ie.y)/(Re.y-Ie.y)*(Re.x-Ie.x),M)._round():Re.y>=M&&(Re=new A(Ie.x+(M-Ie.y)/(Re.y-Ie.y)*(Re.x-Ie.x),M)._round()),oe&&Ie.equals(oe[oe.length-1])||(oe=[Ie],U.push(oe)),oe.push(Re)))))}}return U}ei("FeatureIndex",tb,{omit:["rawTileData","sourceLayerCoder"]});class Vf extends A{constructor(d,v,S,M){super(d,v),this.angle=S,M!==void 0&&(this.segment=M)}clone(){return new Vf(this.x,this.y,this.angle,this.segment)}}function ob(_,d,v,S,M){if(d.segment===void 0||v===0)return!0;let U=d,q=d.segment+1,Y=0;for(;Y>-v/2;){if(q--,q<0)return!1;Y-=_[q].dist(U),U=_[q]}Y+=_[q].dist(_[q+1]),q++;const oe=[];let ye=0;for(;Y<v/2;){const Ie=_[q],Re=_[q+1];if(!Re)return!1;let Ge=_[q-1].angleTo(Ie)-Ie.angleTo(Re);for(Ge=Math.abs((Ge+3*Math.PI)%(2*Math.PI)-Math.PI),oe.push({distance:Y,angleDelta:Ge}),ye+=Ge;Y-oe[0].distance>S;)ye-=oe.shift().angleDelta;if(ye>M)return!1;q++,Y+=Ie.dist(Re)}return!0}function ab(_){let d=0;for(let v=0;v<_.length-1;v++)d+=_[v].dist(_[v+1]);return d}function sb(_,d,v){return _?.6*d*v:0}function lb(_,d){return Math.max(_?_.right-_.left:0,d?d.right-d.left:0)}function L7(_,d,v,S,M,U){const q=sb(v,M,U),Y=lb(v,S)*U;let oe=0;const ye=ab(_)/2;for(let Ie=0;Ie<_.length-1;Ie++){const Re=_[Ie],Ge=_[Ie+1],rt=Re.dist(Ge);if(oe+rt>ye){const nt=(ye-oe)/rt,St=_r.number(Re.x,Ge.x,nt),qt=_r.number(Re.y,Ge.y,nt),Zt=new Vf(St,qt,Ge.angleTo(Re),Ie);return Zt._round(),!q||ob(_,Zt,Y,q,d)?Zt:void 0}oe+=rt}}function T7(_,d,v,S,M,U,q,Y,oe){const ye=sb(S,U,q),Ie=lb(S,M),Re=Ie*q,Ge=_[0].x===0||_[0].x===oe||_[0].y===0||_[0].y===oe;return d-Re<d/4&&(d=Re+d/4),ub(_,Ge?d/2*Y%d:(Ie/2+2*U)*q*Y%d,d,ye,v,Re,Ge,!1,oe)}function ub(_,d,v,S,M,U,q,Y,oe){const ye=U/2,Ie=ab(_);let Re=0,Ge=d-v,rt=[];for(let nt=0;nt<_.length-1;nt++){const St=_[nt],qt=_[nt+1],Zt=St.dist(qt),gr=qt.angleTo(St);for(;Ge+v<Re+Zt;){Ge+=v;const or=(Ge-Re)/Zt,Sr=_r.number(St.x,qt.x,or),Tr=_r.number(St.y,qt.y,or);if(Sr>=0&&Sr<oe&&Tr>=0&&Tr<oe&&Ge-ye>=0&&Ge+ye<=Ie){const Kr=new Vf(Sr,Tr,gr,nt);Kr._round(),S&&!ob(_,Kr,U,S,M)||rt.push(Kr)}}Re+=Zt}return Y||rt.length||q||(rt=ub(_,Re/2,v,S,M,U,q,!0,oe)),rt}ei("Anchor",Vf);const Hh=Tu;function cb(_,d,v,S){const M=[],U=_.image,q=U.pixelRatio,Y=U.paddedRect.w-2*Hh,oe=U.paddedRect.h-2*Hh,ye=_.right-_.left,Ie=_.bottom-_.top,Re=U.stretchX||[[0,Y]],Ge=U.stretchY||[[0,oe]],rt=(vi,Vi)=>vi+Vi[1]-Vi[0],nt=Re.reduce(rt,0),St=Ge.reduce(rt,0),qt=Y-nt,Zt=oe-St;let gr=0,or=nt,Sr=0,Tr=St,Kr=0,Pi=qt,Xi=0,Li=Zt;if(U.content&&S){const vi=U.content;gr=A1(Re,0,vi[0]),Sr=A1(Ge,0,vi[1]),or=A1(Re,vi[0],vi[2]),Tr=A1(Ge,vi[1],vi[3]),Kr=vi[0]-gr,Xi=vi[1]-Sr,Pi=vi[2]-vi[0]-or,Li=vi[3]-vi[1]-Tr}const Ai=(vi,Vi,xi,si)=>{const cn=S1(vi.stretch-gr,or,ye,_.left),Ji=E1(vi.fixed-Kr,Pi,vi.stretch,nt),io=S1(Vi.stretch-Sr,Tr,Ie,_.top),ha=E1(Vi.fixed-Xi,Li,Vi.stretch,St),ya=S1(xi.stretch-gr,or,ye,_.left),_s=E1(xi.fixed-Kr,Pi,xi.stretch,nt),oc=S1(si.stretch-Sr,Tr,Ie,_.top),lu=E1(si.fixed-Xi,Li,si.stretch,St),ss=new A(cn,io),Ds=new A(ya,io),ml=new A(ya,oc),Pu=new A(cn,oc),uu=new A(Ji/q,ha/q),ls=new A(_s/q,lu/q),vs=d*Math.PI/180;if(vs){const Mu=Math.sin(vs),Du=Math.cos(vs),qa=[Du,-Mu,Mu,Du];ss._matMult(qa),Ds._matMult(qa),Pu._matMult(qa),ml._matMult(qa)}const Bl=vi.stretch+vi.fixed,cu=Vi.stretch+Vi.fixed;return{tl:ss,tr:Ds,bl:Pu,br:ml,tex:{x:U.paddedRect.x+Hh+Bl,y:U.paddedRect.y+Hh+cu,w:xi.stretch+xi.fixed-Bl,h:si.stretch+si.fixed-cu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:uu,pixelOffsetBR:ls,minFontScaleX:Pi/q/ye,minFontScaleY:Li/q/Ie,isSDF:v}};if(S&&(U.stretchX||U.stretchY)){const vi=fb(Re,qt,nt),Vi=fb(Ge,Zt,St);for(let xi=0;xi<vi.length-1;xi++){const si=vi[xi],cn=vi[xi+1];for(let Ji=0;Ji<Vi.length-1;Ji++)M.push(Ai(si,Vi[Ji],cn,Vi[Ji+1]))}}else M.push(Ai({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Y+1},{fixed:0,stretch:oe+1}));return M}function A1(_,d,v){let S=0;for(const M of _)S+=Math.max(d,Math.min(v,M[1]))-Math.max(d,Math.min(v,M[0]));return S}function fb(_,d,v){const S=[{fixed:-Hh,stretch:0}];for(const[M,U]of _){const q=S[S.length-1];S.push({fixed:M-q.stretch,stretch:q.stretch}),S.push({fixed:M-q.stretch,stretch:q.stretch+(U-M)})}return S.push({fixed:d+Hh,stretch:v}),S}function S1(_,d,v,S){return _/d*v+S}function E1(_,d,v,S){return _-d*v/S}class C1{constructor(d,v,S,M,U,q,Y,oe,ye,Ie){if(this.boxStartIndex=d.length,ye){let Re=q.top,Ge=q.bottom;const rt=q.collisionPadding;rt&&(Re-=rt[1],Ge+=rt[3]);let nt=Ge-Re;nt>0&&(nt=Math.max(10,nt),this.circleDiameter=nt)}else{let Re=q.top*Y-oe[0],Ge=q.bottom*Y+oe[2],rt=q.left*Y-oe[3],nt=q.right*Y+oe[1];const St=q.collisionPadding;if(St&&(rt-=St[0]*Y,Re-=St[1]*Y,nt+=St[2]*Y,Ge+=St[3]*Y),Ie){const qt=new A(rt,Re),Zt=new A(nt,Re),gr=new A(rt,Ge),or=new A(nt,Ge),Sr=Ie*Math.PI/180;qt._rotate(Sr),Zt._rotate(Sr),gr._rotate(Sr),or._rotate(Sr),rt=Math.min(qt.x,Zt.x,gr.x,or.x),nt=Math.max(qt.x,Zt.x,gr.x,or.x),Re=Math.min(qt.y,Zt.y,gr.y,or.y),Ge=Math.max(qt.y,Zt.y,gr.y,or.y)}d.emplaceBack(v.x,v.y,rt,Re,nt,Ge,S,M,U)}this.boxEndIndex=d.length}}class P7{constructor(d=[],v=M7){if(this.data=d,this.length=this.data.length,this.compare=v,this.length>0)for(let S=(this.length>>1)-1;S>=0;S--)this._down(S)}push(d){this.data.push(d),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const d=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:v,compare:S}=this,M=v[d];for(;d>0;){const U=d-1>>1,q=v[U];if(S(M,q)>=0)break;v[d]=q,d=U}v[d]=M}_down(d){const{data:v,compare:S}=this,M=this.length>>1,U=v[d];for(;d<M;){let q=1+(d<<1),Y=v[q];const oe=q+1;if(oe<this.length&&S(v[oe],Y)<0&&(q=oe,Y=v[oe]),S(Y,U)>=0)break;v[d]=Y,d=q}v[d]=U}}function M7(_,d){return _<d?-1:_>d?1:0}function D7(_,d=1,v=!1){let S=1/0,M=1/0,U=-1/0,q=-1/0;const Y=_[0];for(let rt=0;rt<Y.length;rt++){const nt=Y[rt];(!rt||nt.x<S)&&(S=nt.x),(!rt||nt.y<M)&&(M=nt.y),(!rt||nt.x>U)&&(U=nt.x),(!rt||nt.y>q)&&(q=nt.y)}const oe=Math.min(U-S,q-M);let ye=oe/2;const Ie=new P7([],z7);if(oe===0)return new A(S,M);for(let rt=S;rt<U;rt+=oe)for(let nt=M;nt<q;nt+=oe)Ie.push(new $h(rt+ye,nt+ye,ye,_));let Re=function(rt){let nt=0,St=0,qt=0;const Zt=rt[0];for(let gr=0,or=Zt.length,Sr=or-1;gr<or;Sr=gr++){const Tr=Zt[gr],Kr=Zt[Sr],Pi=Tr.x*Kr.y-Kr.x*Tr.y;St+=(Tr.x+Kr.x)*Pi,qt+=(Tr.y+Kr.y)*Pi,nt+=3*Pi}return new $h(St/nt,qt/nt,0,rt)}(_),Ge=Ie.length;for(;Ie.length;){const rt=Ie.pop();(rt.d>Re.d||!Re.d)&&(Re=rt,v&&console.log("found best %d after %d probes",Math.round(1e4*rt.d)/1e4,Ge)),rt.max-Re.d<=d||(ye=rt.h/2,Ie.push(new $h(rt.p.x-ye,rt.p.y-ye,ye,_)),Ie.push(new $h(rt.p.x+ye,rt.p.y-ye,ye,_)),Ie.push(new $h(rt.p.x-ye,rt.p.y+ye,ye,_)),Ie.push(new $h(rt.p.x+ye,rt.p.y+ye,ye,_)),Ge+=4)}return v&&(console.log(`num probes: ${Ge}`),console.log(`best distance: ${Re.d}`)),Re.p}function z7(_,d){return d.max-_.max}function $h(_,d,v,S){this.p=new A(_,d),this.h=v,this.d=function(M,U){let q=!1,Y=1/0;for(let oe=0;oe<U.length;oe++){const ye=U[oe];for(let Ie=0,Re=ye.length,Ge=Re-1;Ie<Re;Ge=Ie++){const rt=ye[Ie],nt=ye[Ge];rt.y>M.y!=nt.y>M.y&&M.x<(nt.x-rt.x)*(M.y-rt.y)/(nt.y-rt.y)+rt.x&&(q=!q),Y=Math.min(Y,ic(M,rt,nt))}}return(q?1:-1)*Math.sqrt(Y)}(this.p,S),this.max=this.d+this.h*Math.SQRT2}var pl;s.TextAnchorEnum=void 0,(pl=s.TextAnchorEnum||(s.TextAnchorEnum={}))[pl.center=1]="center",pl[pl.left=2]="left",pl[pl.right=3]="right",pl[pl.top=4]="top",pl[pl.bottom=5]="bottom",pl[pl["top-left"]=6]="top-left",pl[pl["top-right"]=7]="top-right",pl[pl["bottom-left"]=8]="bottom-left",pl[pl["bottom-right"]=9]="bottom-right";const Hf=7,Im=Number.POSITIVE_INFINITY;function hb(_,d){return d[1]!==Im?function(v,S,M){let U=0,q=0;switch(S=Math.abs(S),M=Math.abs(M),v){case"top-right":case"top-left":case"top":q=M-Hf;break;case"bottom-right":case"bottom-left":case"bottom":q=-M+Hf}switch(v){case"top-right":case"bottom-right":case"right":U=-S;break;case"top-left":case"bottom-left":case"left":U=S}return[U,q]}(_,d[0],d[1]):function(v,S){let M=0,U=0;S<0&&(S=0);const q=S/Math.SQRT2;switch(v){case"top-right":case"top-left":U=q-Hf;break;case"bottom-right":case"bottom-left":U=-q+Hf;break;case"bottom":U=-S+Hf;break;case"top":U=S-Hf}switch(v){case"top-right":case"bottom-right":M=-q;break;case"top-left":case"bottom-left":M=q;break;case"left":M=S;break;case"right":M=-S}return[M,U]}(_,d[0])}function db(_,d,v){var S;const M=_.layout,U=(S=M.get("text-variable-anchor-offset"))===null||S===void 0?void 0:S.evaluate(d,{},v);if(U){const Y=U.values,oe=[];for(let ye=0;ye<Y.length;ye+=2){const Ie=oe[ye]=Y[ye],Re=Y[ye+1].map(Ge=>Ge*ys);Ie.startsWith("top")?Re[1]-=Hf:Ie.startsWith("bottom")&&(Re[1]+=Hf),oe[ye+1]=Re}return new pa(oe)}const q=M.get("text-variable-anchor");if(q){let Y;Y=_._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(d,{},v)*ys,Im]:M.get("text-offset").evaluate(d,{},v).map(ye=>ye*ys);const oe=[];for(const ye of q)oe.push(ye,hb(ye,Y));return new pa(oe)}return null}function Lm(_){switch(_){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function N7(_,d,v,S,M,U,q,Y,oe,ye,Ie){let Re=U.textMaxSize.evaluate(d,{});Re===void 0&&(Re=q);const Ge=_.layers[0].layout,rt=Ge.get("icon-offset").evaluate(d,{},Ie),nt=mb(v.horizontal),St=q/24,qt=_.tilePixelRatio*St,Zt=_.tilePixelRatio*Re/24,gr=_.tilePixelRatio*Y,or=_.tilePixelRatio*Ge.get("symbol-spacing"),Sr=Ge.get("text-padding")*_.tilePixelRatio,Tr=function(si,cn,Ji,io=1){const ha=si.get("icon-padding").evaluate(cn,{},Ji),ya=ha&&ha.values;return[ya[0]*io,ya[1]*io,ya[2]*io,ya[3]*io]}(Ge,d,Ie,_.tilePixelRatio),Kr=Ge.get("text-max-angle")/180*Math.PI,Pi=Ge.get("text-rotation-alignment")!=="viewport"&&Ge.get("symbol-placement")!=="point",Xi=Ge.get("icon-rotation-alignment")==="map"&&Ge.get("symbol-placement")!=="point",Li=Ge.get("symbol-placement"),Ai=or/2,vi=Ge.get("icon-text-fit");let Vi;S&&vi!=="none"&&(_.allowVerticalPlacement&&v.vertical&&(Vi=Fv(S,v.vertical,vi,Ge.get("icon-text-fit-padding"),rt,St)),nt&&(S=Fv(S,nt,vi,Ge.get("icon-text-fit-padding"),rt,St)));const xi=(si,cn)=>{cn.x<0||cn.x>=Ho||cn.y<0||cn.y>=Ho||function(Ji,io,ha,ya,_s,oc,lu,ss,Ds,ml,Pu,uu,ls,vs,Bl,cu,Mu,Du,qa,gl,go,ac,yl,fu,o0){const w0=Ji.addToLineVertexArray(io,ha);let x0,_f,a0,Fc,zu=0,vf=0,ep=0,vb=0,Om=-1,Fm=-1;const bf={};let bb=Gn("");if(Ji.allowVerticalPlacement&&ya.vertical){const jl=ss.layout.get("text-rotate").evaluate(go,{},fu)+90;a0=new C1(Ds,io,ml,Pu,uu,ya.vertical,ls,vs,Bl,jl),lu&&(Fc=new C1(Ds,io,ml,Pu,uu,lu,Mu,Du,Bl,jl))}if(_s){const jl=ss.layout.get("icon-rotate").evaluate(go,{}),Bc=ss.layout.get("icon-text-fit")!=="none",hh=cb(_s,jl,yl,Bc),A0=lu?cb(lu,jl,yl,Bc):void 0;_f=new C1(Ds,io,ml,Pu,uu,_s,Mu,Du,!1,jl),zu=4*hh.length;const dh=Ji.iconSizeData;let Z0=null;dh.kind==="source"?(Z0=[W0*ss.layout.get("icon-size").evaluate(go,{})],Z0[0]>Uf&&ze(`${Ji.layerIds[0]}: Value for "icon-size" is >= ${Yd}. Reduce your "icon-size".`)):dh.kind==="composite"&&(Z0=[W0*ac.compositeIconSizes[0].evaluate(go,{},fu),W0*ac.compositeIconSizes[1].evaluate(go,{},fu)],(Z0[0]>Uf||Z0[1]>Uf)&&ze(`${Ji.layerIds[0]}: Value for "icon-size" is >= ${Yd}. Reduce your "icon-size".`)),Ji.addSymbols(Ji.icon,hh,Z0,gl,qa,go,s.WritingMode.none,io,w0.lineStartIndex,w0.lineLength,-1,fu),Om=Ji.icon.placedSymbolArray.length-1,A0&&(vf=4*A0.length,Ji.addSymbols(Ji.icon,A0,Z0,gl,qa,go,s.WritingMode.vertical,io,w0.lineStartIndex,w0.lineLength,-1,fu),Fm=Ji.icon.placedSymbolArray.length-1)}const wb=Object.keys(ya.horizontal);for(const jl of wb){const Bc=ya.horizontal[jl];if(!x0){bb=Gn(Bc.text);const A0=ss.layout.get("text-rotate").evaluate(go,{},fu);x0=new C1(Ds,io,ml,Pu,uu,Bc,ls,vs,Bl,A0)}const hh=Bc.positionedLines.length===1;if(ep+=pb(Ji,io,Bc,oc,ss,Bl,go,cu,w0,ya.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,hh?wb:[jl],bf,Om,ac,fu),hh)break}ya.vertical&&(vb+=pb(Ji,io,ya.vertical,oc,ss,Bl,go,cu,w0,s.WritingMode.vertical,["vertical"],bf,Fm,ac,fu));const F7=x0?x0.boxStartIndex:Ji.collisionBoxArray.length,B7=x0?x0.boxEndIndex:Ji.collisionBoxArray.length,j7=a0?a0.boxStartIndex:Ji.collisionBoxArray.length,U7=a0?a0.boxEndIndex:Ji.collisionBoxArray.length,q7=_f?_f.boxStartIndex:Ji.collisionBoxArray.length,V7=_f?_f.boxEndIndex:Ji.collisionBoxArray.length,H7=Fc?Fc.boxStartIndex:Ji.collisionBoxArray.length,$7=Fc?Fc.boxEndIndex:Ji.collisionBoxArray.length;let k0=-1;const L1=(jl,Bc)=>jl&&jl.circleDiameter?Math.max(jl.circleDiameter,Bc):Bc;k0=L1(x0,k0),k0=L1(a0,k0),k0=L1(_f,k0),k0=L1(Fc,k0);const xb=k0>-1?1:0;xb&&(k0*=o0/ys),Ji.glyphOffsetArray.length>=Vh.MAX_GLYPHS&&ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),go.sortKey!==void 0&&Ji.addToSortKeyRanges(Ji.symbolInstances.length,go.sortKey);const G7=db(ss,go,fu),[W7,Z7]=function(jl,Bc){const hh=jl.length,A0=Bc==null?void 0:Bc.values;if((A0==null?void 0:A0.length)>0)for(let dh=0;dh<A0.length;dh+=2){const Z0=A0[dh+1];jl.emplaceBack(s.TextAnchorEnum[A0[dh]],Z0[0],Z0[1])}return[hh,jl.length]}(Ji.textAnchorOffsets,G7);Ji.symbolInstances.emplaceBack(io.x,io.y,bf.right>=0?bf.right:-1,bf.center>=0?bf.center:-1,bf.left>=0?bf.left:-1,bf.vertical||-1,Om,Fm,bb,F7,B7,j7,U7,q7,V7,H7,$7,ml,ep,vb,zu,vf,xb,0,ls,k0,W7,Z7)}(_,cn,si,v,S,M,Vi,_.layers[0],_.collisionBoxArray,d.index,d.sourceLayerIndex,_.index,qt,[Sr,Sr,Sr,Sr],Pi,oe,gr,Tr,Xi,rt,d,U,ye,Ie,q)};if(Li==="line")for(const si of nb(d.geometry,0,0,Ho,Ho)){const cn=T7(si,or,Kr,v.vertical||nt,S,24,Zt,_.overscaling,Ho);for(const Ji of cn)nt&&R7(_,nt.text,Ai,Ji)||xi(si,Ji)}else if(Li==="line-center"){for(const si of d.geometry)if(si.length>1){const cn=L7(si,Kr,v.vertical||nt,S,24,Zt);cn&&xi(si,cn)}}else if(d.type==="Polygon")for(const si of Hd(d.geometry,0)){const cn=D7(si,16);xi(si[0],new Vf(cn.x,cn.y,0))}else if(d.type==="LineString")for(const si of d.geometry)xi(si,new Vf(si[0].x,si[0].y,0));else if(d.type==="Point")for(const si of d.geometry)for(const cn of si)xi([cn],new Vf(cn.x,cn.y,0))}function pb(_,d,v,S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt){const St=function(gr,or,Sr,Tr,Kr,Pi,Xi,Li){const Ai=Tr.layout.get("text-rotate").evaluate(Pi,{})*Math.PI/180,vi=[];for(const Vi of or.positionedLines)for(const xi of Vi.positionedGlyphs){if(!xi.rect)continue;const si=xi.rect||{};let cn=Pv+1,Ji=!0,io=1,ha=0;const ya=(Kr||Li)&&xi.vertical,_s=xi.metrics.advance*xi.scale/2;if(Li&&or.verticalizable&&(ha=Vi.lineOffset/2-(xi.imageName?-(ys-xi.metrics.width*xi.scale)/2:(xi.scale-1)*ys)),xi.imageName){const qa=Xi[xi.imageName];Ji=qa.sdf,io=qa.pixelRatio,cn=Tu/io}const oc=Kr?[xi.x+_s,xi.y]:[0,0];let lu=Kr?[0,0]:[xi.x+_s+Sr[0],xi.y+Sr[1]-ha],ss=[0,0];ya&&(ss=lu,lu=[0,0]);const Ds=(xi.metrics.left-cn)*xi.scale-_s+lu[0],ml=(-xi.metrics.top-cn)*xi.scale+lu[1],Pu=Ds+si.w*xi.scale/io,uu=ml+si.h*xi.scale/io,ls=new A(Ds,ml),vs=new A(Pu,ml),Bl=new A(Ds,uu),cu=new A(Pu,uu);if(ya){const qa=new A(-_s,_s-Zd),gl=-Math.PI/2,go=ys/2-_s,ac=new A(5-Zd-go,-(xi.imageName?go:0)),yl=new A(...ss);ls._rotateAround(gl,qa)._add(ac)._add(yl),vs._rotateAround(gl,qa)._add(ac)._add(yl),Bl._rotateAround(gl,qa)._add(ac)._add(yl),cu._rotateAround(gl,qa)._add(ac)._add(yl)}if(Ai){const qa=Math.sin(Ai),gl=Math.cos(Ai),go=[gl,-qa,qa,gl];ls._matMult(go),vs._matMult(go),Bl._matMult(go),cu._matMult(go)}const Mu=new A(0,0),Du=new A(0,0);vi.push({tl:ls,tr:vs,bl:Bl,br:cu,tex:si,writingMode:or.writingMode,glyphOffset:oc,sectionIndex:xi.sectionIndex,isSDF:Ji,pixelOffsetTL:Mu,pixelOffsetBR:Du,minFontScaleX:0,minFontScaleY:0})}return vi}(0,v,Y,M,U,q,S,_.allowVerticalPlacement),qt=_.textSizeData;let Zt=null;qt.kind==="source"?(Zt=[W0*M.layout.get("text-size").evaluate(q,{})],Zt[0]>Uf&&ze(`${_.layerIds[0]}: Value for "text-size" is >= ${Yd}. Reduce your "text-size".`)):qt.kind==="composite"&&(Zt=[W0*rt.compositeTextSizes[0].evaluate(q,{},nt),W0*rt.compositeTextSizes[1].evaluate(q,{},nt)],(Zt[0]>Uf||Zt[1]>Uf)&&ze(`${_.layerIds[0]}: Value for "text-size" is >= ${Yd}. Reduce your "text-size".`)),_.addSymbols(_.text,St,Zt,Y,U,q,ye,d,oe.lineStartIndex,oe.lineLength,Ge,nt);for(const gr of Ie)Re[gr]=_.text.placedSymbolArray.length-1;return 4*St.length}function mb(_){for(const d in _)return _[d];return null}function R7(_,d,v,S){const M=_.compareText;if(d in M){const U=M[d];for(let q=U.length-1;q>=0;q--)if(S.dist(U[q])<v)return!0}else M[d]=[];return M[d].push(S),!1}const gb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Tm{static from(d){if(!(d instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[v,S]=new Uint8Array(d,0,2);if(v!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=S>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const U=gb[15&S];if(!U)throw new Error("Unrecognized array type.");const[q]=new Uint16Array(d,2,1),[Y]=new Uint32Array(d,4,1);return new Tm(Y,q,U,d)}constructor(d,v=64,S=Float64Array,M){if(isNaN(d)||d<0)throw new Error(`Unpexpected numItems value: ${d}.`);this.numItems=+d,this.nodeSize=Math.min(Math.max(+v,2),65535),this.ArrayType=S,this.IndexArrayType=d<65536?Uint16Array:Uint32Array;const U=gb.indexOf(this.ArrayType),q=2*d*this.ArrayType.BYTES_PER_ELEMENT,Y=d*this.IndexArrayType.BYTES_PER_ELEMENT,oe=(8-Y%8)%8;if(U<0)throw new Error(`Unexpected typed array class: ${S}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,d),this.coords=new this.ArrayType(this.data,8+Y+oe,2*d),this._pos=2*d,this._finished=!0):(this.data=new ArrayBuffer(8+q+Y+oe),this.ids=new this.IndexArrayType(this.data,8,d),this.coords=new this.ArrayType(this.data,8+Y+oe,2*d),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+U]),new Uint16Array(this.data,2,1)[0]=v,new Uint32Array(this.data,4,1)[0]=d)}add(d,v){const S=this._pos>>1;return this.ids[S]=S,this.coords[this._pos++]=d,this.coords[this._pos++]=v,S}finish(){const d=this._pos>>1;if(d!==this.numItems)throw new Error(`Added ${d} items when expected ${this.numItems}.`);return Pm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(d,v,S,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:U,coords:q,nodeSize:Y}=this,oe=[0,U.length-1,0],ye=[];for(;oe.length;){const Ie=oe.pop()||0,Re=oe.pop()||0,Ge=oe.pop()||0;if(Re-Ge<=Y){for(let qt=Ge;qt<=Re;qt++){const Zt=q[2*qt],gr=q[2*qt+1];Zt>=d&&Zt<=S&&gr>=v&&gr<=M&&ye.push(U[qt])}continue}const rt=Ge+Re>>1,nt=q[2*rt],St=q[2*rt+1];nt>=d&&nt<=S&&St>=v&&St<=M&&ye.push(U[rt]),(Ie===0?d<=nt:v<=St)&&(oe.push(Ge),oe.push(rt-1),oe.push(1-Ie)),(Ie===0?S>=nt:M>=St)&&(oe.push(rt+1),oe.push(Re),oe.push(1-Ie))}return ye}within(d,v,S){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:U,nodeSize:q}=this,Y=[0,M.length-1,0],oe=[],ye=S*S;for(;Y.length;){const Ie=Y.pop()||0,Re=Y.pop()||0,Ge=Y.pop()||0;if(Re-Ge<=q){for(let qt=Ge;qt<=Re;qt++)_b(U[2*qt],U[2*qt+1],d,v)<=ye&&oe.push(M[qt]);continue}const rt=Ge+Re>>1,nt=U[2*rt],St=U[2*rt+1];_b(nt,St,d,v)<=ye&&oe.push(M[rt]),(Ie===0?d-S<=nt:v-S<=St)&&(Y.push(Ge),Y.push(rt-1),Y.push(1-Ie)),(Ie===0?d+S>=nt:v+S>=St)&&(Y.push(rt+1),Y.push(Re),Y.push(1-Ie))}return oe}}function Pm(_,d,v,S,M,U){if(M-S<=v)return;const q=S+M>>1;yb(_,d,q,S,M,U),Pm(_,d,v,S,q-1,1-U),Pm(_,d,v,q+1,M,1-U)}function yb(_,d,v,S,M,U){for(;M>S;){if(M-S>600){const ye=M-S+1,Ie=v-S+1,Re=Math.log(ye),Ge=.5*Math.exp(2*Re/3),rt=.5*Math.sqrt(Re*Ge*(ye-Ge)/ye)*(Ie-ye/2<0?-1:1);yb(_,d,v,Math.max(S,Math.floor(v-Ie*Ge/ye+rt)),Math.min(M,Math.floor(v+(ye-Ie)*Ge/ye+rt)),U)}const q=d[2*v+U];let Y=S,oe=M;for(Jd(_,d,S,v),d[2*M+U]>q&&Jd(_,d,S,M);Y<oe;){for(Jd(_,d,Y,oe),Y++,oe--;d[2*Y+U]<q;)Y++;for(;d[2*oe+U]>q;)oe--}d[2*S+U]===q?Jd(_,d,S,oe):(oe++,Jd(_,d,oe,M)),oe<=v&&(S=oe+1),v<=oe&&(M=oe-1)}}function Jd(_,d,v,S){Mm(_,v,S),Mm(d,2*v,2*S),Mm(d,2*v+1,2*S+1)}function Mm(_,d,v){const S=_[d];_[d]=_[v],_[v]=S}function _b(_,d,v,S){const M=_-v,U=d-S;return M*M+U*U}var Dm;s.PerformanceMarkers=void 0,(Dm=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",Dm.load="load",Dm.fullLoad="fullLoad";let I1=null,Qd=[];const zm=1e3/60,Nm="loadTime",Rm="fullLoadTime",O7={mark(_){performance.mark(_)},frame(_){const d=_;I1!=null&&Qd.push(d-I1),I1=d},clearMetrics(){I1=null,Qd=[],performance.clearMeasures(Nm),performance.clearMeasures(Rm);for(const _ in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[_])},getPerformanceMetrics(){performance.measure(Nm,s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure(Rm,s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const _=performance.getEntriesByName(Nm)[0].duration,d=performance.getEntriesByName(Rm)[0].duration,v=Qd.length,S=1/(Qd.reduce((U,q)=>U+q,0)/v/1e3),M=Qd.filter(U=>U>zm).reduce((U,q)=>U+(q-zm)/zm,0);return{loadTime:_,fullLoadTime:d,fps:S,percentDroppedFrames:M/(v+M)*100,totalFrames:v}}};s.AJAXError=wt,s.ARRAY_TYPE=Qo,s.Actor=class{constructor(_,d,v){this.receive=S=>{const M=S.data,U=M.id;if(U&&(!M.targetMapId||this.mapId===M.targetMapId))if(M.type==="<cancel>"){delete this.tasks[U];const q=this.cancelCallbacks[U];delete this.cancelCallbacks[U],q&&q()}else Me()||M.mustQueue?(this.tasks[U]=M,this.taskQueue.push(U),this.invoker.trigger()):this.processTask(U,M)},this.process=()=>{if(!this.taskQueue.length)return;const S=this.taskQueue.shift(),M=this.tasks[S];delete this.tasks[S],this.taskQueue.length&&this.invoker.trigger(),M&&this.processTask(S,M)},this.target=_,this.parent=d,this.mapId=v,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new C7(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Me()?_:window}send(_,d,v,S,M=!1){const U=Math.round(1e18*Math.random()).toString(36).substring(0,10);v&&(this.callbacks[U]=v);const q=it(this.globalScope)?void 0:[];return this.target.postMessage({id:U,type:_,hasCallback:!!v,targetMapId:S,mustQueue:M,sourceMapId:this.mapId,data:Zo(d,q)},q),{cancel:()=>{v&&delete this.callbacks[U],this.target.postMessage({id:U,type:"<cancel>",targetMapId:S,sourceMapId:this.mapId})}}}processTask(_,d){if(d.type==="<response>"){const v=this.callbacks[_];delete this.callbacks[_],v&&(d.error?v(Ca(d.error)):v(null,Ca(d.data)))}else{let v=!1;const S=it(this.globalScope)?void 0:[],M=d.hasCallback?(Y,oe)=>{v=!0,delete this.cancelCallbacks[_],this.target.postMessage({id:_,type:"<response>",sourceMapId:this.mapId,error:Y?Zo(Y):null,data:Zo(oe,S)},S)}:Y=>{v=!0};let U=null;const q=Ca(d.data);if(this.parent[d.type])U=this.parent[d.type](d.sourceMapId,q,M);else if(this.parent.getWorkerSource){const Y=d.type.split(".");U=this.parent.getWorkerSource(d.sourceMapId,Y[0],q.source)[Y[1]](q,M)}else M(new Error(`Could not find function ${d.type}`));!v&&U&&U.cancel&&(this.cancelCallbacks[_]=U.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=oi,s.CanonicalTileID=Cm,s.CollisionBoxArray=re,s.CollisionCircleLayoutArray=class extends tc{},s.Color=tn,s.DEMData=Jv,s.DataConstantProperty=Ii,s.DictionaryCoder=Qv,s.EXTENT=Ho,s.ErrorEvent=Er,s.EvaluationParameters=To,s.Event=yr,s.Evented=Jt,s.FeatureIndex=tb,s.FillBucket=$d,s.FillExtrusionBucket=w,s.GeoJSONFeature=eb,s.ImageAtlas=Dv,s.ImagePosition=ym,s.KDBush=Tm,s.LineBucket=ur,s.LineStripIndexArray=class extends z{},s.LngLat=qf,s.MercatorCoordinate=k1,s.ONE_EM=ys,s.OverscaledTileID=Oc,s.PerformanceUtils=O7,s.Point=A,s.Pos3dArray=class extends Tc{},s.PosArray=ke,s.Properties=es,s.Protobuf=mm,s.QuadTriangleArray=class extends au{},s.RGBAImage=Si,s.RasterBoundsArray=class extends ou{},s.RequestPerformance=class{constructor(_){this._marks={start:[_.url,"start"].join("#"),end:[_.url,"end"].join("#"),measure:_.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let _=performance.getEntriesByName(this._marks.measure);return _.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),_=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),_}},s.SegmentVector=qr,s.SymbolBucket=Vh,s.Transitionable=ul,s.TriangleIndexArray=jt,s.Uniform1f=Cn,s.Uniform1i=class extends uo{constructor(_,d){super(_,d),this.current=0}set(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))}},s.Uniform2f=class extends uo{constructor(_,d){super(_,d),this.current=[0,0]}set(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))}},s.Uniform3f=class extends uo{constructor(_,d){super(_,d),this.current=[0,0,0]}set(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))}},s.Uniform4f=Po,s.UniformColor=ba,s.UniformMatrix4f=class extends uo{constructor(_,d){super(_,d),this.current=Qn}set(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(let d=1;d<16;d++)if(_[d]!==this.current[d]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}}},s.UnwrappedTileID=Kv,s.ValidationError=Nr,s.ZoomHistory=Is,s.addDynamicAttributes=wm,s.arrayBufferToImage=function(_,d){const v=new Image;v.onload=()=>{d(null,v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=yt})},v.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const S=new Blob([new Uint8Array(_)],{type:"image/png"});v.src=_.byteLength?URL.createObjectURL(S):yt},s.arrayBufferToImageBitmap=function(_,d){const v=new Blob([new Uint8Array(_)],{type:"image/png"});createImageBitmap(v).then(S=>{d(null,S)}).catch(S=>{d(new Error(`Could not load image because of ${S.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},s.asyncAll=function(_,d,v){if(!_.length)return v(null,[]);let S=_.length;const M=new Array(_.length);let U=null;_.forEach((q,Y)=>{d(q,(oe,ye)=>{oe&&(U=oe),M[Y]=ye,--S==0&&v(U,M)})})},s.bezier=O,s.browser=mt,s.clamp=G,s.clipLine=nb,s.clone=function(_){var d=new Qo(16);return d[0]=_[0],d[1]=_[1],d[2]=_[2],d[3]=_[3],d[4]=_[4],d[5]=_[5],d[6]=_[6],d[7]=_[7],d[8]=_[8],d[9]=_[9],d[10]=_[10],d[11]=_[11],d[12]=_[12],d[13]=_[13],d[14]=_[14],d[15]=_[15],d},s.clone$1=we,s.collisionCircleLayout=Bf,s.config=Xe,s.copy=function(_,d){return _[0]=d[0],_[1]=d[1],_[2]=d[2],_[3]=d[3],_[4]=d[4],_[5]=d[5],_[6]=d[6],_[7]=d[7],_[8]=d[8],_[9]=d[9],_[10]=d[10],_[11]=d[11],_[12]=d[12],_[13]=d[13],_[14]=d[14],_[15]=d[15],_},s.create=function(){var _=new Qo(16);return Qo!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=0,_[12]=0,_[13]=0,_[14]=0),_[0]=1,_[5]=1,_[10]=1,_[15]=1,_},s.createExpression=fi,s.createFilter=jo,s.createLayout=So,s.createStyleLayer=function(_){if(_.type==="custom")return new E7(_);switch(_.type){case"background":return new k7(_);case"circle":return new sr(_);case"fill":return new lm(_);case"fill-extrusion":return new V(_);case"heatmap":return new Wn(_);case"hillshade":return new Lo(_);case"line":return new Ki(_);case"raster":return new S7(_);case"symbol":return new x1(_)}},s.deepEqual=function _(d,v){if(Array.isArray(d)){if(!Array.isArray(v)||d.length!==v.length)return!1;for(let S=0;S<d.length;S++)if(!_(d[S],v[S]))return!1;return!0}if(typeof d=="object"&&d!==null&&v!==null){if(typeof v!="object"||Object.keys(d).length!==Object.keys(v).length)return!1;for(const S in d)if(!_(d[S],v[S]))return!1;return!0}return d===v},s.defaultEasing=$,s.derefLayers=function(_){_=_.slice();const d=Object.create(null);for(let v=0;v<_.length;v++)d[_[v].id]=_[v];for(let v=0;v<_.length;v++)"ref"in _[v]&&(_[v]=Ft(_[v],d[_[v].ref]));return _},s.diffStyles=function(_,d){if(!_)return[{command:mr.setStyle,args:[d]}];let v=[];try{if(!ct(_.version,d.version))return[{command:mr.setStyle,args:[d]}];ct(_.center,d.center)||v.push({command:mr.setCenter,args:[d.center]}),ct(_.zoom,d.zoom)||v.push({command:mr.setZoom,args:[d.zoom]}),ct(_.bearing,d.bearing)||v.push({command:mr.setBearing,args:[d.bearing]}),ct(_.pitch,d.pitch)||v.push({command:mr.setPitch,args:[d.pitch]}),ct(_.sprite,d.sprite)||v.push({command:mr.setSprite,args:[d.sprite]}),ct(_.glyphs,d.glyphs)||v.push({command:mr.setGlyphs,args:[d.glyphs]}),ct(_.transition,d.transition)||v.push({command:mr.setTransition,args:[d.transition]}),ct(_.light,d.light)||v.push({command:mr.setLight,args:[d.light]});const S={},M=[];(function(q,Y,oe,ye){let Ie;for(Ie in Y=Y||{},q=q||{})Object.prototype.hasOwnProperty.call(q,Ie)&&(Object.prototype.hasOwnProperty.call(Y,Ie)||dr(Ie,oe,ye));for(Ie in Y)Object.prototype.hasOwnProperty.call(Y,Ie)&&(Object.prototype.hasOwnProperty.call(q,Ie)?ct(q[Ie],Y[Ie])||(q[Ie].type==="geojson"&&Y[Ie].type==="geojson"&&ri(q,Y,Ie)?oe.push({command:mr.setGeoJSONSourceData,args:[Ie,Y[Ie].data]}):zr(Ie,Y,oe,ye)):Jr(Ie,Y,oe))})(_.sources,d.sources,M,S);const U=[];_.layers&&_.layers.forEach(q=>{S[q.source]?v.push({command:mr.removeLayer,args:[q.id]}):U.push(q)}),v=v.concat(M),function(q,Y,oe){Y=Y||[];const ye=(q=q||[]).map(_i),Ie=Y.map(_i),Re=q.reduce(Hi,{}),Ge=Y.reduce(Hi,{}),rt=ye.slice(),nt=Object.create(null);let St,qt,Zt,gr,or,Sr,Tr;for(St=0,qt=0;St<ye.length;St++)Zt=ye[St],Object.prototype.hasOwnProperty.call(Ge,Zt)?qt++:(oe.push({command:mr.removeLayer,args:[Zt]}),rt.splice(rt.indexOf(Zt,qt),1));for(St=0,qt=0;St<Ie.length;St++)Zt=Ie[Ie.length-1-St],rt[rt.length-1-St]!==Zt&&(Object.prototype.hasOwnProperty.call(Re,Zt)?(oe.push({command:mr.removeLayer,args:[Zt]}),rt.splice(rt.lastIndexOf(Zt,rt.length-qt),1)):qt++,Sr=rt[rt.length-St],oe.push({command:mr.addLayer,args:[Ge[Zt],Sr]}),rt.splice(rt.length-St,0,Zt),nt[Zt]=!0);for(St=0;St<Ie.length;St++)if(Zt=Ie[St],gr=Re[Zt],or=Ge[Zt],!nt[Zt]&&!ct(gr,or))if(ct(gr.source,or.source)&&ct(gr["source-layer"],or["source-layer"])&&ct(gr.type,or.type)){for(Tr in Vr(gr.layout,or.layout,oe,Zt,null,mr.setLayoutProperty),Vr(gr.paint,or.paint,oe,Zt,null,mr.setPaintProperty),ct(gr.filter,or.filter)||oe.push({command:mr.setFilter,args:[Zt,or.filter]}),ct(gr.minzoom,or.minzoom)&&ct(gr.maxzoom,or.maxzoom)||oe.push({command:mr.setLayerZoomRange,args:[Zt,or.minzoom,or.maxzoom]}),gr)Object.prototype.hasOwnProperty.call(gr,Tr)&&Tr!=="layout"&&Tr!=="paint"&&Tr!=="filter"&&Tr!=="metadata"&&Tr!=="minzoom"&&Tr!=="maxzoom"&&(Tr.indexOf("paint.")===0?Vr(gr[Tr],or[Tr],oe,Zt,Tr.slice(6),mr.setPaintProperty):ct(gr[Tr],or[Tr])||oe.push({command:mr.setLayerProperty,args:[Zt,Tr,or[Tr]]}));for(Tr in or)Object.prototype.hasOwnProperty.call(or,Tr)&&!Object.prototype.hasOwnProperty.call(gr,Tr)&&Tr!=="layout"&&Tr!=="paint"&&Tr!=="filter"&&Tr!=="metadata"&&Tr!=="minzoom"&&Tr!=="maxzoom"&&(Tr.indexOf("paint.")===0?Vr(gr[Tr],or[Tr],oe,Zt,Tr.slice(6),mr.setPaintProperty):ct(gr[Tr],or[Tr])||oe.push({command:mr.setLayerProperty,args:[Zt,Tr,or[Tr]]}))}else oe.push({command:mr.removeLayer,args:[Zt]}),Sr=rt[rt.lastIndexOf(Zt)+1],oe.push({command:mr.addLayer,args:[or,Sr]})}(U,d.layers,v)}catch(S){console.warn("Unable to compute style diff:",S),v=[{command:mr.setStyle,args:[d]}]}return v},s.dot=function(_,d){return _[0]*d[0]+_[1]*d[1]+_[2]*d[2]+_[3]*d[3]},s.earthRadius=Sm,s.emitValidationErrors=Ja,s.emptyStyle=function(){const _={},d=It.$version;for(const v in It.$root){const S=It.$root[v];if(S.required){let M=null;M=v==="version"?d:S.type==="array"?[]:{},M!=null&&(_[v]=M)}}return _},s.equals=function(_,d){var v=_[0],S=_[1],M=_[2],U=_[3],q=_[4],Y=_[5],oe=_[6],ye=_[7],Ie=_[8],Re=_[9],Ge=_[10],rt=_[11],nt=_[12],St=_[13],qt=_[14],Zt=_[15],gr=d[0],or=d[1],Sr=d[2],Tr=d[3],Kr=d[4],Pi=d[5],Xi=d[6],Li=d[7],Ai=d[8],vi=d[9],Vi=d[10],xi=d[11],si=d[12],cn=d[13],Ji=d[14],io=d[15];return Math.abs(v-gr)<=Ta*Math.max(1,Math.abs(v),Math.abs(gr))&&Math.abs(S-or)<=Ta*Math.max(1,Math.abs(S),Math.abs(or))&&Math.abs(M-Sr)<=Ta*Math.max(1,Math.abs(M),Math.abs(Sr))&&Math.abs(U-Tr)<=Ta*Math.max(1,Math.abs(U),Math.abs(Tr))&&Math.abs(q-Kr)<=Ta*Math.max(1,Math.abs(q),Math.abs(Kr))&&Math.abs(Y-Pi)<=Ta*Math.max(1,Math.abs(Y),Math.abs(Pi))&&Math.abs(oe-Xi)<=Ta*Math.max(1,Math.abs(oe),Math.abs(Xi))&&Math.abs(ye-Li)<=Ta*Math.max(1,Math.abs(ye),Math.abs(Li))&&Math.abs(Ie-Ai)<=Ta*Math.max(1,Math.abs(Ie),Math.abs(Ai))&&Math.abs(Re-vi)<=Ta*Math.max(1,Math.abs(Re),Math.abs(vi))&&Math.abs(Ge-Vi)<=Ta*Math.max(1,Math.abs(Ge),Math.abs(Vi))&&Math.abs(rt-xi)<=Ta*Math.max(1,Math.abs(rt),Math.abs(xi))&&Math.abs(nt-si)<=Ta*Math.max(1,Math.abs(nt),Math.abs(si))&&Math.abs(St-cn)<=Ta*Math.max(1,Math.abs(St),Math.abs(cn))&&Math.abs(qt-Ji)<=Ta*Math.max(1,Math.abs(qt),Math.abs(Ji))&&Math.abs(Zt-io)<=Ta*Math.max(1,Math.abs(Zt),Math.abs(io))},s.evaluateSizeForFeature=function(_,{uSize:d,uSizeT:v},{lowerSize:S,upperSize:M}){return _.kind==="source"?S/W0:_.kind==="composite"?_r.number(S/W0,M/W0,v):d},s.evaluateSizeForZoom=function(_,d){let v=0,S=0;if(_.kind==="constant")S=_.layoutSize;else if(_.kind!=="source"){const{interpolationType:M,minZoom:U,maxZoom:q}=_,Y=M?G(Mr.interpolationFactor(M,d,U,q),0,1):0;_.kind==="camera"?S=_r.number(_.minSize,_.maxSize,Y):v=Y}return{uSizeT:v,uSize:S}},s.evented=$n,s.extend=ee,s.filterObject=le,s.findLineIntersection=function(_,d,v,S){const M=d.y-_.y,U=d.x-_.x,q=S.y-v.y,Y=S.x-v.x,oe=q*U-Y*M;if(oe===0)return null;const ye=(Y*(_.y-v.y)-q*(_.x-v.x))/oe;return new A(_.x+ye*U,_.y+ye*M)},s.fromScaling=function(_,d){return _[0]=d[0],_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=d[1],_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=d[2],_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,_},s.getAnchorAlignment=vm,s.getAnchorJustification=Lm,s.getArrayBuffer=Nt,s.getDefaultExportFromCjs=f,s.getJSON=function(_,d){return ht(ee(_,{type:"json"}),d)},s.getOverlapMode=bm,s.getProtocolAction=Be,s.getRTLTextPluginStatus=Yc,s.getReferrer=be,s.getVideo=function(_,d){const v=window.document.createElement("video");v.muted=!0,v.onloadstart=function(){d(null,v)};for(let S=0;S<_.length;S++){const M=window.document.createElement("source");zt(_[S])||(v.crossOrigin="Anonymous"),M.src=_[S],v.appendChild(M)}return{cancel:()=>{}}},s.groupByLayout=function(_,d){const v={};for(let M=0;M<_.length;M++){const U=d&&d[_[M].id]||Ec(_[M]);d&&(d[_[M].id]=U);let q=v[U];q||(q=v[U]=[]),q.push(_[M])}const S=[];for(const M in v)S.push(v[M]);return S},s.identity=H0,s.interpolate=_r,s.invert=function(_,d){var v=d[0],S=d[1],M=d[2],U=d[3],q=d[4],Y=d[5],oe=d[6],ye=d[7],Ie=d[8],Re=d[9],Ge=d[10],rt=d[11],nt=d[12],St=d[13],qt=d[14],Zt=d[15],gr=v*Y-S*q,or=v*oe-M*q,Sr=v*ye-U*q,Tr=S*oe-M*Y,Kr=S*ye-U*Y,Pi=M*ye-U*oe,Xi=Ie*St-Re*nt,Li=Ie*qt-Ge*nt,Ai=Ie*Zt-rt*nt,vi=Re*qt-Ge*St,Vi=Re*Zt-rt*St,xi=Ge*Zt-rt*qt,si=gr*xi-or*Vi+Sr*vi+Tr*Ai-Kr*Li+Pi*Xi;return si?(_[0]=(Y*xi-oe*Vi+ye*vi)*(si=1/si),_[1]=(M*Vi-S*xi-U*vi)*si,_[2]=(St*Pi-qt*Kr+Zt*Tr)*si,_[3]=(Ge*Kr-Re*Pi-rt*Tr)*si,_[4]=(oe*Ai-q*xi-ye*Li)*si,_[5]=(v*xi-M*Ai+U*Li)*si,_[6]=(qt*Sr-nt*Pi-Zt*or)*si,_[7]=(Ie*Pi-Ge*Sr+rt*or)*si,_[8]=(q*Vi-Y*Ai+ye*Xi)*si,_[9]=(S*Ai-v*Vi-U*Xi)*si,_[10]=(nt*Kr-St*Sr+Zt*gr)*si,_[11]=(Re*Sr-Ie*Kr-rt*gr)*si,_[12]=(Y*Li-q*vi-oe*Xi)*si,_[13]=(v*vi-S*Li+M*Xi)*si,_[14]=(St*or-nt*Tr-qt*gr)*si,_[15]=(Ie*Tr-Re*or+Ge*gr)*si,_):null},s.isImageBitmap=xt,s.isSafari=it,s.isWorker=Me,s.keysDifference=function(_,d){const v=[];for(const S in _)S in d||v.push(S);return v},s.lazyLoadRTLTextPlugin=function(){ca.isLoading()||ca.isLoaded()||Yc()!=="deferred"||Kc()},s.makeRequest=ht,s.mapObject=_e,s.mercatorXfromLng=Wv,s.mercatorYfromLat=Zv,s.mercatorZfromAltitude=Xv,s.mul=Ye,s.mul$1=function(_,d,v){return _[0]=d[0]*v[0],_[1]=d[1]*v[1],_[2]=d[2]*v[2],_[3]=d[3]*v[3],_},s.multiply=me,s.nextPowerOfTwo=function(_){return _<=1?1:Math.pow(2,Math.ceil(Math.log(_)/Math.LN2))},s.operations=mr,s.ortho=function(_,d,v,S,M,U,q){var Y=1/(d-v),oe=1/(S-M),ye=1/(U-q);return _[0]=-2*Y,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=-2*oe,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=2*ye,_[11]=0,_[12]=(d+v)*Y,_[13]=(M+S)*oe,_[14]=(q+U)*ye,_[15]=1,_},s.parseCacheControl=function(_){const d={};if(_.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(v,S,M,U)=>{const q=M||U;return d[S]=!q||q.toLowerCase(),""}),d["max-age"]){const v=parseInt(d["max-age"],10);isNaN(v)?delete d["max-age"]:d["max-age"]=v}return d},s.parseGlyphPbf=function(_){return new mm(_).readFields(h7,[])},s.pbf=Av,s.performSymbolLayout=function(_){_.bucket.createArrays(),_.bucket.tilePixelRatio=Ho/(512*_.bucket.overscaling),_.bucket.compareText={},_.bucket.iconsNeedLinear=!1;const d=_.bucket.layers[0],v=d.layout,S=d._unevaluatedLayout._values,M={layoutIconSize:S["icon-size"].possiblyEvaluate(new To(_.bucket.zoom+1),_.canonical),layoutTextSize:S["text-size"].possiblyEvaluate(new To(_.bucket.zoom+1),_.canonical),textMaxSize:S["text-size"].possiblyEvaluate(new To(18))};if(_.bucket.textSizeData.kind==="composite"){const{minZoom:ye,maxZoom:Ie}=_.bucket.textSizeData;M.compositeTextSizes=[S["text-size"].possiblyEvaluate(new To(ye),_.canonical),S["text-size"].possiblyEvaluate(new To(Ie),_.canonical)]}if(_.bucket.iconSizeData.kind==="composite"){const{minZoom:ye,maxZoom:Ie}=_.bucket.iconSizeData;M.compositeIconSizes=[S["icon-size"].possiblyEvaluate(new To(ye),_.canonical),S["icon-size"].possiblyEvaluate(new To(Ie),_.canonical)]}const U=v.get("text-line-height")*ys,q=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point",Y=v.get("text-keep-upright"),oe=v.get("text-size");for(const ye of _.bucket.features){const Ie=v.get("text-font").evaluate(ye,{},_.canonical).join(","),Re=oe.evaluate(ye,{},_.canonical),Ge=M.layoutTextSize.evaluate(ye,{},_.canonical),rt=M.layoutIconSize.evaluate(ye,{},_.canonical),nt={horizontal:{},vertical:void 0},St=ye.text;let qt,Zt=[0,0];if(St){const Sr=St.toString(),Tr=v.get("text-letter-spacing").evaluate(ye,{},_.canonical)*ys,Kr=m0(Sr)?Tr:0,Pi=v.get("text-anchor").evaluate(ye,{},_.canonical),Xi=db(d,ye,_.canonical);if(!Xi){const xi=v.get("text-radial-offset").evaluate(ye,{},_.canonical);Zt=xi?hb(Pi,[xi*ys,Im]):v.get("text-offset").evaluate(ye,{},_.canonical).map(si=>si*ys)}let Li=q?"center":v.get("text-justify").evaluate(ye,{},_.canonical);const Ai=v.get("symbol-placement"),vi=Ai==="point"?v.get("text-max-width").evaluate(ye,{},_.canonical)*ys:0,Vi=()=>{_.bucket.allowVerticalPlacement&&Su(Sr)&&(nt.vertical=v1(St,_.glyphMap,_.glyphPositions,_.imagePositions,Ie,vi,U,Pi,"left",Kr,Zt,s.WritingMode.vertical,!0,Ai,Ge,Re))};if(!q&&Xi){const xi=new Set;if(Li==="auto")for(let cn=0;cn<Xi.values.length;cn+=2)xi.add(Lm(Xi.values[cn]));else xi.add(Li);let si=!1;for(const cn of xi)if(!nt.horizontal[cn])if(si)nt.horizontal[cn]=nt.horizontal[0];else{const Ji=v1(St,_.glyphMap,_.glyphPositions,_.imagePositions,Ie,vi,U,"center",cn,Kr,Zt,s.WritingMode.horizontal,!1,Ai,Ge,Re);Ji&&(nt.horizontal[cn]=Ji,si=Ji.positionedLines.length===1)}Vi()}else{Li==="auto"&&(Li=Lm(Pi));const xi=v1(St,_.glyphMap,_.glyphPositions,_.imagePositions,Ie,vi,U,Pi,Li,Kr,Zt,s.WritingMode.horizontal,!1,Ai,Ge,Re);xi&&(nt.horizontal[Li]=xi),Vi(),Su(Sr)&&q&&Y&&(nt.vertical=v1(St,_.glyphMap,_.glyphPositions,_.imagePositions,Ie,vi,U,Pi,Li,Kr,Zt,s.WritingMode.vertical,!1,Ai,Ge,Re))}}let gr=!1;if(ye.icon&&ye.icon.name){const Sr=_.imageMap[ye.icon.name];Sr&&(qt=_7(_.imagePositions[ye.icon.name],v.get("icon-offset").evaluate(ye,{},_.canonical),v.get("icon-anchor").evaluate(ye,{},_.canonical)),gr=!!Sr.sdf,_.bucket.sdfIcons===void 0?_.bucket.sdfIcons=gr:_.bucket.sdfIcons!==gr&&ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Sr.pixelRatio!==_.bucket.pixelRatio||v.get("icon-rotate").constantOr(1)!==0)&&(_.bucket.iconsNeedLinear=!0))}const or=mb(nt.horizontal)||nt.vertical;_.bucket.iconsInText=!!or&&or.iconsInText,(or||qt)&&N7(_.bucket,ye,nt,qt,_.imageMap,M,Ge,rt,Zt,gr,_.canonical)}_.showCollisionBoxes&&_.bucket.generateCollisionDebugBuffers()},s.perspective=function(_,d,v,S,M){var U,q=1/Math.tan(d/2);return _[0]=q/v,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=q,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=-1,_[12]=0,_[13]=0,_[15]=0,M!=null&&M!==1/0?(_[10]=(M+S)*(U=1/(S-M)),_[14]=2*M*S*U):(_[10]=-1,_[14]=-2*S),_},s.pick=function(_,d){const v={};for(let S=0;S<d.length;S++){const M=d[S];M in _&&(v[M]=_[M])}return v},s.plugin=ca,s.pointGeometry=y,s.polygonIntersectsPolygon=Ms,s.potpack=Mv,s.register=ei,s.registerForPluginStateChange=function(_){return _({pluginStatus:La,pluginURL:ll}),$n.on("pluginStateChange",_),_},s.renderColorRamp=Zi,s.rotateX=function(_,d,v){var S=Math.sin(v),M=Math.cos(v),U=d[4],q=d[5],Y=d[6],oe=d[7],ye=d[8],Ie=d[9],Re=d[10],Ge=d[11];return d!==_&&(_[0]=d[0],_[1]=d[1],_[2]=d[2],_[3]=d[3],_[12]=d[12],_[13]=d[13],_[14]=d[14],_[15]=d[15]),_[4]=U*M+ye*S,_[5]=q*M+Ie*S,_[6]=Y*M+Re*S,_[7]=oe*M+Ge*S,_[8]=ye*M-U*S,_[9]=Ie*M-q*S,_[10]=Re*M-Y*S,_[11]=Ge*M-oe*S,_},s.rotateZ=function(_,d,v){var S=Math.sin(v),M=Math.cos(v),U=d[0],q=d[1],Y=d[2],oe=d[3],ye=d[4],Ie=d[5],Re=d[6],Ge=d[7];return d!==_&&(_[8]=d[8],_[9]=d[9],_[10]=d[10],_[11]=d[11],_[12]=d[12],_[13]=d[13],_[14]=d[14],_[15]=d[15]),_[0]=U*M+ye*S,_[1]=q*M+Ie*S,_[2]=Y*M+Re*S,_[3]=oe*M+Ge*S,_[4]=ye*M-U*S,_[5]=Ie*M-q*S,_[6]=Re*M-Y*S,_[7]=Ge*M-oe*S,_},s.sameOrigin=zt,s.scale=function(_,d,v){var S=v[0],M=v[1],U=v[2];return _[0]=d[0]*S,_[1]=d[1]*S,_[2]=d[2]*S,_[3]=d[3]*S,_[4]=d[4]*M,_[5]=d[5]*M,_[6]=d[6]*M,_[7]=d[7]*M,_[8]=d[8]*U,_[9]=d[9]*U,_[10]=d[10]*U,_[11]=d[11]*U,_[12]=d[12],_[13]=d[13],_[14]=d[14],_[15]=d[15],_},s.setRTLTextPlugin=function(_,d,v=!1){if(La===Xo||La===Ia||La===ns)throw new Error("setRTLTextPlugin cannot be called multiple times.");ll=mt.resolveURL(_),La=Xo,Ku=d,Ju(),v||Kc()},s.sphericalToCartesian=function([_,d,v]){return d+=90,d*=Math.PI/180,v*=Math.PI/180,{x:_*Math.cos(d)*Math.sin(v),y:_*Math.sin(d)*Math.sin(v),z:_*Math.cos(v)}},s.toEvaluationFeature=Ts,s.transformMat4=At,s.translate=function(_,d,v){var S,M,U,q,Y,oe,ye,Ie,Re,Ge,rt,nt,St=v[0],qt=v[1],Zt=v[2];return d===_?(_[12]=d[0]*St+d[4]*qt+d[8]*Zt+d[12],_[13]=d[1]*St+d[5]*qt+d[9]*Zt+d[13],_[14]=d[2]*St+d[6]*qt+d[10]*Zt+d[14],_[15]=d[3]*St+d[7]*qt+d[11]*Zt+d[15]):(M=d[1],U=d[2],q=d[3],Y=d[4],oe=d[5],ye=d[6],Ie=d[7],Re=d[8],Ge=d[9],rt=d[10],nt=d[11],_[0]=S=d[0],_[1]=M,_[2]=U,_[3]=q,_[4]=Y,_[5]=oe,_[6]=ye,_[7]=Ie,_[8]=Re,_[9]=Ge,_[10]=rt,_[11]=nt,_[12]=S*St+Y*qt+Re*Zt+d[12],_[13]=M*St+oe*qt+Ge*Zt+d[13],_[14]=U*St+ye*qt+rt*Zt+d[14],_[15]=q*St+Ie*qt+nt*Zt+d[15]),_},s.triggerPluginCompletionEvent=iu,s.unicodeBlockLookup=yi,s.uniqueId=function(){return te++},s.v8Spec=It,s.validateCustomStyleLayer=function(_){const d=[],v=_.id;return v===void 0&&d.push({message:`layers.${v}: missing required property "id"`}),_.render===void 0&&d.push({message:`layers.${v}: missing required method "render"`}),_.renderingMode&&_.renderingMode!=="2d"&&_.renderingMode!=="3d"&&d.push({message:`layers.${v}: property "renderingMode" must be either "2d" or "3d"`}),d},s.validateLight=Au,s.validateStyle=Cs,s.vectorTile=b0,s.warnOnce=ze,s.wrap=Z}),u(["./shared"],function(s){class f{constructor(Ne){this.keyCache={},Ne&&this.replace(Ne)}replace(Ne){this._layerConfigs={},this._layers={},this.update(Ne,[])}update(Ne,Fe){for(const Lt of Ne){this._layerConfigs[Lt.id]=Lt;const ft=this._layers[Lt.id]=s.createStyleLayer(Lt);ft._featureFilter=s.createFilter(ft.filter),this.keyCache[Lt.id]&&delete this.keyCache[Lt.id]}for(const Lt of Fe)delete this.keyCache[Lt],delete this._layerConfigs[Lt],delete this._layers[Lt];this.familiesBySource={};const lt=s.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Lt of lt){const ft=Lt.map(jr=>this._layers[jr.id]),pe=ft[0];if(pe.visibility==="none")continue;const Qt=pe.source||"";let Vt=this.familiesBySource[Qt];Vt||(Vt=this.familiesBySource[Qt]={});const lr=pe.sourceLayer||"_geojsonTileLayer";let pt=Vt[lr];pt||(pt=Vt[lr]=[]),pt.push(ft)}}}class y{constructor(Ne){const Fe={},lt=[];for(const Qt in Ne){const Vt=Ne[Qt],lr=Fe[Qt]={};for(const pt in Vt){const jr=Vt[+pt];if(!jr||jr.bitmap.width===0||jr.bitmap.height===0)continue;const $r={x:0,y:0,w:jr.bitmap.width+2,h:jr.bitmap.height+2};lt.push($r),lr[pt]={rect:$r,metrics:jr.metrics}}}const{w:Lt,h:ft}=s.potpack(lt),pe=new s.AlphaImage({width:Lt||1,height:ft||1});for(const Qt in Ne){const Vt=Ne[Qt];for(const lr in Vt){const pt=Vt[+lr];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const jr=Fe[Qt][lr].rect;s.AlphaImage.copy(pt.bitmap,pe,{x:0,y:0},{x:jr.x+1,y:jr.y+1},pt.bitmap)}}this.image=pe,this.positions=Fe}}s.register("GlyphAtlas",y);class b{constructor(Ne){this.tileID=new s.OverscaledTileID(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.uid=Ne.uid,this.zoom=Ne.zoom,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ne.showCollisionBoxes,this.collectResourceTiming=!!Ne.collectResourceTiming,this.returnDependencies=!!Ne.returnDependencies,this.promoteId=Ne.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Ne,Fe,lt,Lt,ft){this.status="parsing",this.data=Ne,this.collisionBoxArray=new s.CollisionBoxArray;const pe=new s.DictionaryCoder(Object.keys(Ne.layers).sort()),Qt=new s.FeatureIndex(this.tileID,this.promoteId);Qt.bucketLayerIDs=[];const Vt={},lr={featureIndex:Qt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:lt},pt=Fe.familiesBySource[this.source];for(const En in pt){const On=Ne.layers[En];if(!On)continue;On.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${En}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const sa=pe.encode(En),tn=[];for(let Bo=0;Bo<On.length;Bo++){const fn=On.feature(Bo),Ko=Qt.getId(fn,En);tn.push({feature:fn,id:Ko,index:Bo,sourceLayerIndex:sa})}for(const Bo of pt[En]){const fn=Bo[0];fn.source!==this.source&&s.warnOnce(`layer.source = ${fn.source} does not equal this.source = ${this.source}`),fn.minzoom&&this.zoom<Math.floor(fn.minzoom)||fn.maxzoom&&this.zoom>=fn.maxzoom||fn.visibility!=="none"&&(A(Bo,this.zoom,lt),(Vt[fn.id]=fn.createBucket({index:Qt.bucketLayerIDs.length,layers:Bo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sa,sourceID:this.source})).populate(tn,lr,this.tileID.canonical),Qt.bucketLayerIDs.push(Bo.map(Ko=>Ko.id)))}}let jr,$r,$i,Qi;const Ci=s.mapObject(lr.glyphDependencies,En=>Object.keys(En).map(Number));this.inFlightDependencies.forEach(En=>En==null?void 0:En.cancel()),this.inFlightDependencies=[];const Et=++this.dependencySentinel;Object.keys(Ci).length?this.inFlightDependencies.push(Lt.send("getGlyphs",{uid:this.uid,stacks:Ci,source:this.source,tileID:this.tileID,type:"glyphs"},(En,On)=>{Et===this.dependencySentinel&&(jr||(jr=En,$r=On,Vn.call(this)))})):$r={};const en=Object.keys(lr.iconDependencies);en.length?this.inFlightDependencies.push(Lt.send("getImages",{icons:en,source:this.source,tileID:this.tileID,type:"icons"},(En,On)=>{Et===this.dependencySentinel&&(jr||(jr=En,$i=On,Vn.call(this)))})):$i={};const Sn=Object.keys(lr.patternDependencies);function Vn(){if(jr)return ft(jr);if($r&&$i&&Qi){const En=new y($r),On=new s.ImageAtlas($i,Qi);for(const sa in Vt){const tn=Vt[sa];tn instanceof s.SymbolBucket?(A(tn.layers,this.zoom,lt),s.performSymbolLayout({bucket:tn,glyphMap:$r,glyphPositions:En.positions,imageMap:$i,imagePositions:On.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):tn.hasPattern&&(tn instanceof s.LineBucket||tn instanceof s.FillBucket||tn instanceof s.FillExtrusionBucket)&&(A(tn.layers,this.zoom,lt),tn.addFeatures(lr,this.tileID.canonical,On.patternPositions))}this.status="done",ft(null,{buckets:Object.values(Vt).filter(sa=>!sa.isEmpty()),featureIndex:Qt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:En.image,imageAtlas:On,glyphMap:this.returnDependencies?$r:null,iconMap:this.returnDependencies?$i:null,glyphPositions:this.returnDependencies?En.positions:null})}}Sn.length?this.inFlightDependencies.push(Lt.send("getImages",{icons:Sn,source:this.source,tileID:this.tileID,type:"patterns"},(En,On)=>{Et===this.dependencySentinel&&(jr||(jr=En,Qi=On,Vn.call(this)))})):Qi={},Vn.call(this)}}function A(gt,Ne,Fe){const lt=new s.EvaluationParameters(Ne);for(const Lt of gt)Lt.recalculate(lt,Fe)}function I(gt,Ne){const Fe=s.getArrayBuffer(gt.request,(lt,Lt,ft,pe)=>{lt?Ne(lt):Lt&&Ne(null,{vectorTile:new s.vectorTile.VectorTile(new s.Protobuf(Lt)),rawData:Lt,cacheControl:ft,expires:pe})});return()=>{Fe.cancel(),Ne()}}class C{constructor(Ne,Fe,lt,Lt){this.actor=Ne,this.layerIndex=Fe,this.availableImages=lt,this.loadVectorData=Lt||I,this.fetching={},this.loading={},this.loaded={}}loadTile(Ne,Fe){const lt=Ne.uid;this.loading||(this.loading={});const Lt=!!(Ne&&Ne.request&&Ne.request.collectResourceTiming)&&new s.RequestPerformance(Ne.request),ft=this.loading[lt]=new b(Ne);ft.abort=this.loadVectorData(Ne,(pe,Qt)=>{if(delete this.loading[lt],pe||!Qt)return ft.status="done",this.loaded[lt]=ft,Fe(pe);const Vt=Qt.rawData,lr={};Qt.expires&&(lr.expires=Qt.expires),Qt.cacheControl&&(lr.cacheControl=Qt.cacheControl);const pt={};if(Lt){const jr=Lt.finish();jr&&(pt.resourceTiming=JSON.parse(JSON.stringify(jr)))}ft.vectorTile=Qt.vectorTile,ft.parse(Qt.vectorTile,this.layerIndex,this.availableImages,this.actor,(jr,$r)=>{if(delete this.fetching[lt],jr||!$r)return Fe(jr);Fe(null,s.extend({rawTileData:Vt.slice(0)},$r,lr,pt))}),this.loaded=this.loaded||{},this.loaded[lt]=ft,this.fetching[lt]={rawTileData:Vt,cacheControl:lr,resourceTiming:pt}})}reloadTile(Ne,Fe){const lt=this.loaded,Lt=Ne.uid;if(lt&&lt[Lt]){const ft=lt[Lt];ft.showCollisionBoxes=Ne.showCollisionBoxes,ft.status==="parsing"?ft.parse(ft.vectorTile,this.layerIndex,this.availableImages,this.actor,(pe,Qt)=>{if(pe||!Qt)return Fe(pe,Qt);let Vt;if(this.fetching[Lt]){const{rawTileData:lr,cacheControl:pt,resourceTiming:jr}=this.fetching[Lt];delete this.fetching[Lt],Vt=s.extend({rawTileData:lr.slice(0)},Qt,pt,jr)}else Vt=Qt;Fe(null,Vt)}):ft.status==="done"&&(ft.vectorTile?ft.parse(ft.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}}abortTile(Ne,Fe){const lt=this.loading,Lt=Ne.uid;lt&&lt[Lt]&&lt[Lt].abort&&(lt[Lt].abort(),delete lt[Lt]),Fe()}removeTile(Ne,Fe){const lt=this.loaded,Lt=Ne.uid;lt&&lt[Lt]&&delete lt[Lt],Fe()}}class N{constructor(){this.loaded={}}loadTile(Ne,Fe){const{uid:lt,encoding:Lt,rawImageData:ft}=Ne,pe=s.isImageBitmap(ft)?this.getImageData(ft):ft,Qt=new s.DEMData(lt,pe,Lt);this.loaded=this.loaded||{},this.loaded[lt]=Qt,Fe(null,Qt)}getImageData(Ne){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ne.width,Ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ne.width,this.offscreenCanvas.height=Ne.height,this.offscreenCanvasContext.drawImage(Ne,0,0,Ne.width,Ne.height);const Fe=this.offscreenCanvasContext.getImageData(-1,-1,Ne.width+2,Ne.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:Fe.width,height:Fe.height},Fe.data)}removeTile(Ne){const Fe=this.loaded,lt=Ne.uid;Fe&&Fe[lt]&&delete Fe[lt]}}function O(gt,Ne){if(gt.length!==0){$(gt[0],Ne);for(var Fe=1;Fe<gt.length;Fe++)$(gt[Fe],!Ne)}}function $(gt,Ne){for(var Fe=0,lt=0,Lt=0,ft=gt.length,pe=ft-1;Lt<ft;pe=Lt++){var Qt=(gt[Lt][0]-gt[pe][0])*(gt[pe][1]+gt[Lt][1]),Vt=Fe+Qt;lt+=Math.abs(Fe)>=Math.abs(Qt)?Fe-Vt+Qt:Qt-Vt+Fe,Fe=Vt}Fe+lt>=0!=!!Ne&&gt.reverse()}var G=s.getDefaultExportFromCjs(function gt(Ne,Fe){var lt,Lt=Ne&&Ne.type;if(Lt==="FeatureCollection")for(lt=0;lt<Ne.features.length;lt++)gt(Ne.features[lt],Fe);else if(Lt==="GeometryCollection")for(lt=0;lt<Ne.geometries.length;lt++)gt(Ne.geometries[lt],Fe);else if(Lt==="Feature")gt(Ne.geometry,Fe);else if(Lt==="Polygon")O(Ne.coordinates,Fe);else if(Lt==="MultiPolygon")for(lt=0;lt<Ne.coordinates.length;lt++)O(Ne.coordinates[lt],Fe);return Ne});const Z=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;var ee={exports:{}},te=s.pointGeometry,_e=s.vectorTile.VectorTileFeature,le=we;function we(gt,Ne){this.options=Ne||{},this.features=gt,this.length=gt.length}function ue(gt,Ne){this.id=typeof gt.id=="number"?gt.id:void 0,this.type=gt.type,this.rawGeometry=gt.type===1?[gt.geometry]:gt.geometry,this.properties=gt.tags,this.extent=Ne||4096}we.prototype.feature=function(gt){return new ue(this.features[gt],this.options.extent)},ue.prototype.loadGeometry=function(){var gt=this.rawGeometry;this.geometry=[];for(var Ne=0;Ne<gt.length;Ne++){for(var Fe=gt[Ne],lt=[],Lt=0;Lt<Fe.length;Lt++)lt.push(new te(Fe[Lt][0],Fe[Lt][1]));this.geometry.push(lt)}return this.geometry},ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var gt=this.geometry,Ne=1/0,Fe=-1/0,lt=1/0,Lt=-1/0,ft=0;ft<gt.length;ft++)for(var pe=gt[ft],Qt=0;Qt<pe.length;Qt++){var Vt=pe[Qt];Ne=Math.min(Ne,Vt.x),Fe=Math.max(Fe,Vt.x),lt=Math.min(lt,Vt.y),Lt=Math.max(Lt,Vt.y)}return[Ne,lt,Fe,Lt]},ue.prototype.toGeoJSON=_e.prototype.toGeoJSON;var ze=s.pbf,Ue=le;function Ce(gt){var Ne=new ze;return function(Fe,lt){for(var Lt in Fe.layers)lt.writeMessage(3,Me,Fe.layers[Lt])}(gt,Ne),Ne.finish()}function Me(gt,Ne){var Fe;Ne.writeVarintField(15,gt.version||1),Ne.writeStringField(1,gt.name||""),Ne.writeVarintField(5,gt.extent||4096);var lt={keys:[],values:[],keycache:{},valuecache:{}};for(Fe=0;Fe<gt.length;Fe++)lt.feature=gt.feature(Fe),Ne.writeMessage(2,qe,lt);var Lt=lt.keys;for(Fe=0;Fe<Lt.length;Fe++)Ne.writeStringField(3,Lt[Fe]);var ft=lt.values;for(Fe=0;Fe<ft.length;Fe++)Ne.writeMessage(4,at,ft[Fe])}function qe(gt,Ne){var Fe=gt.feature;Fe.id!==void 0&&Ne.writeVarintField(1,Fe.id),Ne.writeMessage(2,it,gt),Ne.writeVarintField(3,Fe.type),Ne.writeMessage(4,$e,Fe)}function it(gt,Ne){var Fe=gt.feature,lt=gt.keys,Lt=gt.values,ft=gt.keycache,pe=gt.valuecache;for(var Qt in Fe.properties){var Vt=Fe.properties[Qt],lr=ft[Qt];if(Vt!==null){lr===void 0&&(lt.push(Qt),ft[Qt]=lr=lt.length-1),Ne.writeVarint(lr);var pt=typeof Vt;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(Vt=JSON.stringify(Vt));var jr=pt+":"+Vt,$r=pe[jr];$r===void 0&&(Lt.push(Vt),pe[jr]=$r=Lt.length-1),Ne.writeVarint($r)}}}function xt(gt,Ne){return(Ne<<3)+(7&gt)}function yt(gt){return gt<<1^gt>>31}function $e(gt,Ne){for(var Fe=gt.loadGeometry(),lt=gt.type,Lt=0,ft=0,pe=Fe.length,Qt=0;Qt<pe;Qt++){var Vt=Fe[Qt],lr=1;lt===1&&(lr=Vt.length),Ne.writeVarint(xt(1,lr));for(var pt=lt===3?Vt.length-1:Vt.length,jr=0;jr<pt;jr++){jr===1&&lt!==1&&Ne.writeVarint(xt(2,pt-1));var $r=Vt[jr].x-Lt,$i=Vt[jr].y-ft;Ne.writeVarint(yt($r)),Ne.writeVarint(yt($i)),Lt+=$r,ft+=$i}lt===3&&Ne.writeVarint(xt(7,1))}}function at(gt,Ne){var Fe=typeof gt;Fe==="string"?Ne.writeStringField(1,gt):Fe==="boolean"?Ne.writeBooleanField(7,gt):Fe==="number"&&(gt%1!=0?Ne.writeDoubleField(3,gt):gt<0?Ne.writeSVarintField(6,gt):Ne.writeVarintField(5,gt))}ee.exports=Ce,ee.exports.fromVectorTileJs=Ce,ee.exports.fromGeojsonVt=function(gt,Ne){Ne=Ne||{};var Fe={};for(var lt in gt)Fe[lt]=new Ue(gt[lt].features,Ne),Fe[lt].name=lt,Fe[lt].version=Ne.version,Fe[lt].extent=Ne.extent;return Ce({layers:Fe})},ee.exports.GeoJSONWrapper=Ue;var mt=s.getDefaultExportFromCjs(ee.exports);const Xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:gt=>gt},wt=Math.fround||(be=new Float32Array(1),gt=>(be[0]=+gt,be[0]));var be;const Be=3,Ae=5,ht=6;class Nt{constructor(Ne){this.options=Object.assign(Object.create(Xe),Ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ne){const{log:Fe,minZoom:lt,maxZoom:Lt}=this.options;Fe&&console.time("total time");const ft=`prepare ${Ne.length} points`;Fe&&console.time(ft),this.points=Ne;const pe=[];for(let Vt=0;Vt<Ne.length;Vt++){const lr=Ne[Vt];if(!lr.geometry)continue;const[pt,jr]=lr.geometry.coordinates,$r=wt(Kt(pt)),$i=wt(yr(jr));pe.push($r,$i,1/0,Vt,-1,1),this.options.reduce&&pe.push(0)}let Qt=this.trees[Lt+1]=this._createTree(pe);Fe&&console.timeEnd(ft);for(let Vt=Lt;Vt>=lt;Vt--){const lr=+Date.now();Qt=this.trees[Vt]=this._createTree(this._cluster(Qt,Vt)),Fe&&console.log("z%d: %d clusters in %dms",Vt,Qt.numItems,+Date.now()-lr)}return Fe&&console.timeEnd("total time"),this}getClusters(Ne,Fe){let lt=((Ne[0]+180)%360+360)%360-180;const Lt=Math.max(-90,Math.min(90,Ne[1]));let ft=Ne[2]===180?180:((Ne[2]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,Ne[3]));if(Ne[2]-Ne[0]>=360)lt=-180,ft=180;else if(lt>ft){const jr=this.getClusters([lt,Lt,180,pe],Fe),$r=this.getClusters([-180,Lt,ft,pe],Fe);return jr.concat($r)}const Qt=this.trees[this._limitZoom(Fe)],Vt=Qt.range(Kt(lt),yr(pe),Kt(ft),yr(Lt)),lr=Qt.data,pt=[];for(const jr of Vt){const $r=this.stride*jr;pt.push(lr[$r+Ae]>1?zt(lr,$r,this.clusterProps):this.points[lr[$r+Be]])}return pt}getChildren(Ne){const Fe=this._getOriginId(Ne),lt=this._getOriginZoom(Ne),Lt="No cluster with the specified id.",ft=this.trees[lt];if(!ft)throw new Error(Lt);const pe=ft.data;if(Fe*this.stride>=pe.length)throw new Error(Lt);const Qt=this.options.radius/(this.options.extent*Math.pow(2,lt-1)),Vt=ft.within(pe[Fe*this.stride],pe[Fe*this.stride+1],Qt),lr=[];for(const pt of Vt){const jr=pt*this.stride;pe[jr+4]===Ne&&lr.push(pe[jr+Ae]>1?zt(pe,jr,this.clusterProps):this.points[pe[jr+Be]])}if(lr.length===0)throw new Error(Lt);return lr}getLeaves(Ne,Fe,lt){const Lt=[];return this._appendLeaves(Lt,Ne,Fe=Fe||10,lt=lt||0,0),Lt}getTile(Ne,Fe,lt){const Lt=this.trees[this._limitZoom(Ne)],ft=Math.pow(2,Ne),{extent:pe,radius:Qt}=this.options,Vt=Qt/pe,lr=(lt-Vt)/ft,pt=(lt+1+Vt)/ft,jr={features:[]};return this._addTileFeatures(Lt.range((Fe-Vt)/ft,lr,(Fe+1+Vt)/ft,pt),Lt.data,Fe,lt,ft,jr),Fe===0&&this._addTileFeatures(Lt.range(1-Vt/ft,lr,1,pt),Lt.data,ft,lt,ft,jr),Fe===ft-1&&this._addTileFeatures(Lt.range(0,lr,Vt/ft,pt),Lt.data,-1,lt,ft,jr),jr.features.length?jr:null}getClusterExpansionZoom(Ne){let Fe=this._getOriginZoom(Ne)-1;for(;Fe<=this.options.maxZoom;){const lt=this.getChildren(Ne);if(Fe++,lt.length!==1)break;Ne=lt[0].properties.cluster_id}return Fe}_appendLeaves(Ne,Fe,lt,Lt,ft){const pe=this.getChildren(Fe);for(const Qt of pe){const Vt=Qt.properties;if(Vt&&Vt.cluster?ft+Vt.point_count<=Lt?ft+=Vt.point_count:ft=this._appendLeaves(Ne,Vt.cluster_id,lt,Lt,ft):ft<Lt?ft++:Ne.push(Qt),Ne.length===lt)break}return ft}_createTree(Ne){const Fe=new s.KDBush(Ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let lt=0;lt<Ne.length;lt+=this.stride)Fe.add(Ne[lt],Ne[lt+1]);return Fe.finish(),Fe.data=Ne,Fe}_addTileFeatures(Ne,Fe,lt,Lt,ft,pe){for(const Qt of Ne){const Vt=Qt*this.stride,lr=Fe[Vt+Ae]>1;let pt,jr,$r;if(lr)pt=Mt(Fe,Vt,this.clusterProps),jr=Fe[Vt],$r=Fe[Vt+1];else{const Ci=this.points[Fe[Vt+Be]];pt=Ci.properties;const[Et,en]=Ci.geometry.coordinates;jr=Kt(Et),$r=yr(en)}const $i={type:1,geometry:[[Math.round(this.options.extent*(jr*ft-lt)),Math.round(this.options.extent*($r*ft-Lt))]],tags:pt};let Qi;Qi=lr||this.options.generateId?Fe[Vt+Be]:this.points[Fe[Vt+Be]].id,Qi!==void 0&&($i.id=Qi),pe.features.push($i)}}_limitZoom(Ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ne),this.options.maxZoom+1))}_cluster(Ne,Fe){const{radius:lt,extent:Lt,reduce:ft,minPoints:pe}=this.options,Qt=lt/(Lt*Math.pow(2,Fe)),Vt=Ne.data,lr=[],pt=this.stride;for(let jr=0;jr<Vt.length;jr+=pt){if(Vt[jr+2]<=Fe)continue;Vt[jr+2]=Fe;const $r=Vt[jr],$i=Vt[jr+1],Qi=Ne.within(Vt[jr],Vt[jr+1],Qt),Ci=Vt[jr+Ae];let Et=Ci;for(const en of Qi){const Sn=en*pt;Vt[Sn+2]>Fe&&(Et+=Vt[Sn+Ae])}if(Et>Ci&&Et>=pe){let en,Sn=$r*Ci,Vn=$i*Ci,En=-1;const On=((jr/pt|0)<<5)+(Fe+1)+this.points.length;for(const sa of Qi){const tn=sa*pt;if(Vt[tn+2]<=Fe)continue;Vt[tn+2]=Fe;const Bo=Vt[tn+Ae];Sn+=Vt[tn]*Bo,Vn+=Vt[tn+1]*Bo,Vt[tn+4]=On,ft&&(en||(en=this._map(Vt,jr,!0),En=this.clusterProps.length,this.clusterProps.push(en)),ft(en,this._map(Vt,tn)))}Vt[jr+4]=On,lr.push(Sn/Et,Vn/Et,1/0,On,-1,Et),ft&&lr.push(En)}else{for(let en=0;en<pt;en++)lr.push(Vt[jr+en]);if(Et>1)for(const en of Qi){const Sn=en*pt;if(!(Vt[Sn+2]<=Fe)){Vt[Sn+2]=Fe;for(let Vn=0;Vn<pt;Vn++)lr.push(Vt[Sn+Vn])}}}}return lr}_getOriginId(Ne){return Ne-this.points.length>>5}_getOriginZoom(Ne){return(Ne-this.points.length)%32}_map(Ne,Fe,lt){if(Ne[Fe+Ae]>1){const pe=this.clusterProps[Ne[Fe+ht]];return lt?Object.assign({},pe):pe}const Lt=this.points[Ne[Fe+Be]].properties,ft=this.options.map(Lt);return lt&&ft===Lt?Object.assign({},ft):ft}}function zt(gt,Ne,Fe){return{type:"Feature",id:gt[Ne+Be],properties:Mt(gt,Ne,Fe),geometry:{type:"Point",coordinates:[(lt=gt[Ne],360*(lt-.5)),Er(gt[Ne+1])]}};var lt}function Mt(gt,Ne,Fe){const lt=gt[Ne+Ae],Lt=lt>=1e4?`${Math.round(lt/1e3)}k`:lt>=1e3?Math.round(lt/100)/10+"k":lt,ft=gt[Ne+ht],pe=ft===-1?{}:Object.assign({},Fe[ft]);return Object.assign(pe,{cluster:!0,cluster_id:gt[Ne+Be],point_count:lt,point_count_abbreviated:Lt})}function Kt(gt){return gt/360+.5}function yr(gt){const Ne=Math.sin(gt*Math.PI/180),Fe=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function Er(gt){const Ne=(180-360*gt)*Math.PI/180;return 360*Math.atan(Math.exp(Ne))/Math.PI-90}function Jt(gt,Ne,Fe,lt){for(var Lt,ft=lt,pe=Fe-Ne>>1,Qt=Fe-Ne,Vt=gt[Ne],lr=gt[Ne+1],pt=gt[Fe],jr=gt[Fe+1],$r=Ne+3;$r<Fe;$r+=3){var $i=It(gt[$r],gt[$r+1],Vt,lr,pt,jr);if($i>ft)Lt=$r,ft=$i;else if($i===ft){var Qi=Math.abs($r-pe);Qi<Qt&&(Lt=$r,Qt=Qi)}}ft>lt&&(Lt-Ne>3&&Jt(gt,Ne,Lt,lt),gt[Lt+2]=ft,Fe-Lt>3&&Jt(gt,Lt,Fe,lt))}function It(gt,Ne,Fe,lt,Lt,ft){var pe=Lt-Fe,Qt=ft-lt;if(pe!==0||Qt!==0){var Vt=((gt-Fe)*pe+(Ne-lt)*Qt)/(pe*pe+Qt*Qt);Vt>1?(Fe=Lt,lt=ft):Vt>0&&(Fe+=pe*Vt,lt+=Qt*Vt)}return(pe=gt-Fe)*pe+(Qt=Ne-lt)*Qt}function Fr(gt,Ne,Fe,lt){var Lt={id:gt===void 0?null:gt,type:Ne,geometry:Fe,tags:lt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ft){var pe=ft.geometry,Qt=ft.type;if(Qt==="Point"||Qt==="MultiPoint"||Qt==="LineString")Ft(ft,pe);else if(Qt==="Polygon"||Qt==="MultiLineString")for(var Vt=0;Vt<pe.length;Vt++)Ft(ft,pe[Vt]);else if(Qt==="MultiPolygon")for(Vt=0;Vt<pe.length;Vt++)for(var lr=0;lr<pe[Vt].length;lr++)Ft(ft,pe[Vt][lr])}(Lt),Lt}function Ft(gt,Ne){for(var Fe=0;Fe<Ne.length;Fe+=3)gt.minX=Math.min(gt.minX,Ne[Fe]),gt.minY=Math.min(gt.minY,Ne[Fe+1]),gt.maxX=Math.max(gt.maxX,Ne[Fe]),gt.maxY=Math.max(gt.maxY,Ne[Fe+1])}function ct(gt,Ne,Fe,lt){if(Ne.geometry){var Lt=Ne.geometry.coordinates,ft=Ne.geometry.type,pe=Math.pow(Fe.tolerance/((1<<Fe.maxZoom)*Fe.extent),2),Qt=[],Vt=Ne.id;if(Fe.promoteId?Vt=Ne.properties[Fe.promoteId]:Fe.generateId&&(Vt=lt||0),ft==="Point")mr(Lt,Qt);else if(ft==="MultiPoint")for(var lr=0;lr<Lt.length;lr++)mr(Lt[lr],Qt);else if(ft==="LineString")Jr(Lt,Qt,pe,!1);else if(ft==="MultiLineString"){if(Fe.lineMetrics){for(lr=0;lr<Lt.length;lr++)Jr(Lt[lr],Qt=[],pe,!1),gt.push(Fr(Vt,"LineString",Qt,Ne.properties));return}dr(Lt,Qt,pe,!1)}else if(ft==="Polygon")dr(Lt,Qt,pe,!0);else{if(ft!=="MultiPolygon"){if(ft==="GeometryCollection"){for(lr=0;lr<Ne.geometry.geometries.length;lr++)ct(gt,{id:Vt,geometry:Ne.geometry.geometries[lr],properties:Ne.properties},Fe,lt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(lr=0;lr<Lt.length;lr++){var pt=[];dr(Lt[lr],pt,pe,!0),Qt.push(pt)}}gt.push(Fr(Vt,ft,Qt,Ne.properties))}}function mr(gt,Ne){Ne.push(zr(gt[0])),Ne.push(ri(gt[1])),Ne.push(0)}function Jr(gt,Ne,Fe,lt){for(var Lt,ft,pe=0,Qt=0;Qt<gt.length;Qt++){var Vt=zr(gt[Qt][0]),lr=ri(gt[Qt][1]);Ne.push(Vt),Ne.push(lr),Ne.push(0),Qt>0&&(pe+=lt?(Lt*lr-Vt*ft)/2:Math.sqrt(Math.pow(Vt-Lt,2)+Math.pow(lr-ft,2))),Lt=Vt,ft=lr}var pt=Ne.length-3;Ne[2]=1,Jt(Ne,0,pt,Fe),Ne[pt+2]=1,Ne.size=Math.abs(pe),Ne.start=0,Ne.end=Ne.size}function dr(gt,Ne,Fe,lt){for(var Lt=0;Lt<gt.length;Lt++){var ft=[];Jr(gt[Lt],ft,Fe,lt),Ne.push(ft)}}function zr(gt){return gt/360+.5}function ri(gt){var Ne=Math.sin(gt*Math.PI/180),Fe=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function Vr(gt,Ne,Fe,lt,Lt,ft,pe,Qt){if(lt/=Ne,ft>=(Fe/=Ne)&&pe<lt)return gt;if(pe<Fe||ft>=lt)return null;for(var Vt=[],lr=0;lr<gt.length;lr++){var pt=gt[lr],jr=pt.geometry,$r=pt.type,$i=Lt===0?pt.minX:pt.minY,Qi=Lt===0?pt.maxX:pt.maxY;if($i>=Fe&&Qi<lt)Vt.push(pt);else if(!(Qi<Fe||$i>=lt)){var Ci=[];if($r==="Point"||$r==="MultiPoint")_i(jr,Ci,Fe,lt,Lt);else if($r==="LineString")Hi(jr,Ci,Fe,lt,Lt,!1,Qt.lineMetrics);else if($r==="MultiLineString")ji(jr,Ci,Fe,lt,Lt,!1);else if($r==="Polygon")ji(jr,Ci,Fe,lt,Lt,!0);else if($r==="MultiPolygon")for(var Et=0;Et<jr.length;Et++){var en=[];ji(jr[Et],en,Fe,lt,Lt,!0),en.length&&Ci.push(en)}if(Ci.length){if(Qt.lineMetrics&&$r==="LineString"){for(Et=0;Et<Ci.length;Et++)Vt.push(Fr(pt.id,$r,Ci[Et],pt.tags));continue}$r!=="LineString"&&$r!=="MultiLineString"||(Ci.length===1?($r="LineString",Ci=Ci[0]):$r="MultiLineString"),$r!=="Point"&&$r!=="MultiPoint"||($r=Ci.length===3?"Point":"MultiPoint"),Vt.push(Fr(pt.id,$r,Ci,pt.tags))}}}return Vt.length?Vt:null}function _i(gt,Ne,Fe,lt,Lt){for(var ft=0;ft<gt.length;ft+=3){var pe=gt[ft+Lt];pe>=Fe&&pe<=lt&&(Ne.push(gt[ft]),Ne.push(gt[ft+1]),Ne.push(gt[ft+2]))}}function Hi(gt,Ne,Fe,lt,Lt,ft,pe){for(var Qt,Vt,lr=Nr(gt),pt=Lt===0?an:Gi,jr=gt.start,$r=0;$r<gt.length-3;$r+=3){var $i=gt[$r],Qi=gt[$r+1],Ci=gt[$r+2],Et=gt[$r+3],en=gt[$r+4],Sn=Lt===0?$i:Qi,Vn=Lt===0?Et:en,En=!1;pe&&(Qt=Math.sqrt(Math.pow($i-Et,2)+Math.pow(Qi-en,2))),Sn<Fe?Vn>Fe&&(Vt=pt(lr,$i,Qi,Et,en,Fe),pe&&(lr.start=jr+Qt*Vt)):Sn>lt?Vn<lt&&(Vt=pt(lr,$i,Qi,Et,en,lt),pe&&(lr.start=jr+Qt*Vt)):Ui(lr,$i,Qi,Ci),Vn<Fe&&Sn>=Fe&&(Vt=pt(lr,$i,Qi,Et,en,Fe),En=!0),Vn>lt&&Sn<=lt&&(Vt=pt(lr,$i,Qi,Et,en,lt),En=!0),!ft&&En&&(pe&&(lr.end=jr+Qt*Vt),Ne.push(lr),lr=Nr(gt)),pe&&(jr+=Qt)}var On=gt.length-3;$i=gt[On],Qi=gt[On+1],Ci=gt[On+2],(Sn=Lt===0?$i:Qi)>=Fe&&Sn<=lt&&Ui(lr,$i,Qi,Ci),On=lr.length-3,ft&&On>=3&&(lr[On]!==lr[0]||lr[On+1]!==lr[1])&&Ui(lr,lr[0],lr[1],lr[2]),lr.length&&Ne.push(lr)}function Nr(gt){var Ne=[];return Ne.size=gt.size,Ne.start=gt.start,Ne.end=gt.end,Ne}function ji(gt,Ne,Fe,lt,Lt,ft){for(var pe=0;pe<gt.length;pe++)Hi(gt[pe],Ne,Fe,lt,Lt,ft,!1)}function Ui(gt,Ne,Fe,lt){gt.push(Ne),gt.push(Fe),gt.push(lt)}function an(gt,Ne,Fe,lt,Lt,ft){var pe=(ft-Ne)/(lt-Ne);return gt.push(ft),gt.push(Fe+(Lt-Fe)*pe),gt.push(1),pe}function Gi(gt,Ne,Fe,lt,Lt,ft){var pe=(ft-Fe)/(Lt-Fe);return gt.push(Ne+(lt-Ne)*pe),gt.push(ft),gt.push(1),pe}function Or(gt,Ne){for(var Fe=[],lt=0;lt<gt.length;lt++){var Lt,ft=gt[lt],pe=ft.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")Lt=Br(ft.geometry,Ne);else if(pe==="MultiLineString"||pe==="Polygon"){Lt=[];for(var Qt=0;Qt<ft.geometry.length;Qt++)Lt.push(Br(ft.geometry[Qt],Ne))}else if(pe==="MultiPolygon")for(Lt=[],Qt=0;Qt<ft.geometry.length;Qt++){for(var Vt=[],lr=0;lr<ft.geometry[Qt].length;lr++)Vt.push(Br(ft.geometry[Qt][lr],Ne));Lt.push(Vt)}Fe.push(Fr(ft.id,pe,Lt,ft.tags))}return Fe}function Br(gt,Ne){var Fe=[];Fe.size=gt.size,gt.start!==void 0&&(Fe.start=gt.start,Fe.end=gt.end);for(var lt=0;lt<gt.length;lt+=3)Fe.push(gt[lt]+Ne,gt[lt+1],gt[lt+2]);return Fe}function Ni(gt,Ne){if(gt.transformed)return gt;var Fe,lt,Lt,ft=1<<gt.z,pe=gt.x,Qt=gt.y;for(Fe=0;Fe<gt.features.length;Fe++){var Vt=gt.features[Fe],lr=Vt.geometry,pt=Vt.type;if(Vt.geometry=[],pt===1)for(lt=0;lt<lr.length;lt+=2)Vt.geometry.push(qi(lr[lt],lr[lt+1],Ne,ft,pe,Qt));else for(lt=0;lt<lr.length;lt++){var jr=[];for(Lt=0;Lt<lr[lt].length;Lt+=2)jr.push(qi(lr[lt][Lt],lr[lt][Lt+1],Ne,ft,pe,Qt));Vt.geometry.push(jr)}}return gt.transformed=!0,gt}function qi(gt,Ne,Fe,lt,Lt,ft){return[Math.round(Fe*(gt*lt-Lt)),Math.round(Fe*(Ne*lt-ft))]}function kt(gt,Ne,Fe,lt,Lt){for(var ft=Ne===Lt.maxZoom?0:Lt.tolerance/((1<<Ne)*Lt.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Fe,y:lt,z:Ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Qt=0;Qt<gt.length;Qt++){pe.numFeatures++,fr(pe,gt[Qt],ft,Lt);var Vt=gt[Qt].minX,lr=gt[Qt].minY,pt=gt[Qt].maxX,jr=gt[Qt].maxY;Vt<pe.minX&&(pe.minX=Vt),lr<pe.minY&&(pe.minY=lr),pt>pe.maxX&&(pe.maxX=pt),jr>pe.maxY&&(pe.maxY=jr)}return pe}function fr(gt,Ne,Fe,lt){var Lt=Ne.geometry,ft=Ne.type,pe=[];if(ft==="Point"||ft==="MultiPoint")for(var Qt=0;Qt<Lt.length;Qt+=3)pe.push(Lt[Qt]),pe.push(Lt[Qt+1]),gt.numPoints++,gt.numSimplified++;else if(ft==="LineString")Qr(pe,Lt,gt,Fe,!1,!1);else if(ft==="MultiLineString"||ft==="Polygon")for(Qt=0;Qt<Lt.length;Qt++)Qr(pe,Lt[Qt],gt,Fe,ft==="Polygon",Qt===0);else if(ft==="MultiPolygon")for(var Vt=0;Vt<Lt.length;Vt++){var lr=Lt[Vt];for(Qt=0;Qt<lr.length;Qt++)Qr(pe,lr[Qt],gt,Fe,!0,Qt===0)}if(pe.length){var pt=Ne.tags||null;if(ft==="LineString"&&lt.lineMetrics){for(var jr in pt={},Ne.tags)pt[jr]=Ne.tags[jr];pt.mapbox_clip_start=Lt.start/Lt.size,pt.mapbox_clip_end=Lt.end/Lt.size}var $r={geometry:pe,type:ft==="Polygon"||ft==="MultiPolygon"?3:ft==="LineString"||ft==="MultiLineString"?2:1,tags:pt};Ne.id!==null&&($r.id=Ne.id),gt.features.push($r)}}function Qr(gt,Ne,Fe,lt,Lt,ft){var pe=lt*lt;if(lt>0&&Ne.size<(Lt?pe:lt))Fe.numPoints+=Ne.length/3;else{for(var Qt=[],Vt=0;Vt<Ne.length;Vt+=3)(lt===0||Ne[Vt+2]>pe)&&(Fe.numSimplified++,Qt.push(Ne[Vt]),Qt.push(Ne[Vt+1])),Fe.numPoints++;Lt&&function(lr,pt){for(var jr=0,$r=0,$i=lr.length,Qi=$i-2;$r<$i;Qi=$r,$r+=2)jr+=(lr[$r]-lr[Qi])*(lr[$r+1]+lr[Qi+1]);if(jr>0===pt)for($r=0,$i=lr.length;$r<$i/2;$r+=2){var Ci=lr[$r],Et=lr[$r+1];lr[$r]=lr[$i-2-$r],lr[$r+1]=lr[$i-1-$r],lr[$i-2-$r]=Ci,lr[$i-1-$r]=Et}}(Qt,ft),gt.push(Qt)}}function Ei(gt,Ne){var Fe=(Ne=this.options=function(Lt,ft){for(var pe in ft)Lt[pe]=ft[pe];return Lt}(Object.create(this.options),Ne)).debug;if(Fe&&console.time("preprocess data"),Ne.maxZoom<0||Ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ne.promoteId&&Ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var lt=function(Lt,ft){var pe=[];if(Lt.type==="FeatureCollection")for(var Qt=0;Qt<Lt.features.length;Qt++)ct(pe,Lt.features[Qt],ft,Qt);else ct(pe,Lt.type==="Feature"?Lt:{geometry:Lt},ft);return pe}(gt,Ne);this.tiles={},this.tileCoords=[],Fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ne.indexMaxZoom,Ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),lt=function(Lt,ft){var pe=ft.buffer/ft.extent,Qt=Lt,Vt=Vr(Lt,1,-1-pe,pe,0,-1,2,ft),lr=Vr(Lt,1,1-pe,2+pe,0,-1,2,ft);return(Vt||lr)&&(Qt=Vr(Lt,1,-pe,1+pe,0,-1,2,ft)||[],Vt&&(Qt=Or(Vt,1).concat(Qt)),lr&&(Qt=Qt.concat(Or(lr,-1)))),Qt}(lt,Ne),lt.length&&this.splitTile(lt,0,0,0),Fe&&(lt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ki(gt,Ne,Fe){return 32*((1<<gt)*Fe+Ne)+gt}function Zn(gt,Ne){return Ne?gt.properties[Ne]:gt.id}function un(gt,Ne){if(gt==null)return!0;if(gt.type==="Feature")return Zn(gt,Ne)!=null;if(gt.type==="FeatureCollection"){const Fe=new Set;for(const lt of gt.features){const Lt=Zn(lt,Ne);if(Lt==null||Fe.has(Lt))return!1;Fe.add(Lt)}return!0}return!1}function Rn(gt,Ne){const Fe=new Map;if(gt!=null)if(gt.type==="Feature")Fe.set(Zn(gt,Ne),gt);else for(const lt of gt.features)Fe.set(Zn(lt,Ne),lt);return Fe}function Xn(gt,Ne){const Fe=gt.tileID.canonical;if(!this._geoJSONIndex)return Ne(null,null);const lt=this._geoJSONIndex.getTile(Fe.z,Fe.x,Fe.y);if(!lt)return Ne(null,null);const Lt=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(Qt){this._feature=Qt,this.extent=s.EXTENT,this.type=Qt.type,this.properties=Qt.tags,"id"in Qt&&!isNaN(Qt.id)&&(this.id=parseInt(Qt.id,10))}loadGeometry(){if(this._feature.type===1){const Qt=[];for(const Vt of this._feature.geometry)Qt.push([new s.Point(Vt[0],Vt[1])]);return Qt}{const Qt=[];for(const Vt of this._feature.geometry){const lr=[];for(const pt of Vt)lr.push(new s.Point(pt[0],pt[1]));Qt.push(lr)}return Qt}}toGeoJSON(Qt,Vt,lr){return Z.call(this,Qt,Vt,lr)}}(this._features[pe])}}(lt.features);let ft=mt(Lt);ft.byteOffset===0&&ft.byteLength===ft.buffer.byteLength||(ft=new Uint8Array(ft)),Ne(null,{vectorTile:Lt,rawData:ft.buffer})}Ei.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ei.prototype.splitTile=function(gt,Ne,Fe,lt,Lt,ft,pe){for(var Qt=[gt,Ne,Fe,lt],Vt=this.options,lr=Vt.debug;Qt.length;){lt=Qt.pop(),Fe=Qt.pop(),Ne=Qt.pop(),gt=Qt.pop();var pt=1<<Ne,jr=ki(Ne,Fe,lt),$r=this.tiles[jr];if(!$r&&(lr>1&&console.time("creation"),$r=this.tiles[jr]=kt(gt,Ne,Fe,lt,Vt),this.tileCoords.push({z:Ne,x:Fe,y:lt}),lr)){lr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ne,Fe,lt,$r.numFeatures,$r.numPoints,$r.numSimplified),console.timeEnd("creation"));var $i="z"+Ne;this.stats[$i]=(this.stats[$i]||0)+1,this.total++}if($r.source=gt,Lt){if(Ne===Vt.maxZoom||Ne===Lt)continue;var Qi=1<<Lt-Ne;if(Fe!==Math.floor(ft/Qi)||lt!==Math.floor(pe/Qi))continue}else if(Ne===Vt.indexMaxZoom||$r.numPoints<=Vt.indexMaxPoints)continue;if($r.source=null,gt.length!==0){lr>1&&console.time("clipping");var Ci,Et,en,Sn,Vn,En,On=.5*Vt.buffer/Vt.extent,sa=.5-On,tn=.5+On,Bo=1+On;Ci=Et=en=Sn=null,Vn=Vr(gt,pt,Fe-On,Fe+tn,0,$r.minX,$r.maxX,Vt),En=Vr(gt,pt,Fe+sa,Fe+Bo,0,$r.minX,$r.maxX,Vt),gt=null,Vn&&(Ci=Vr(Vn,pt,lt-On,lt+tn,1,$r.minY,$r.maxY,Vt),Et=Vr(Vn,pt,lt+sa,lt+Bo,1,$r.minY,$r.maxY,Vt),Vn=null),En&&(en=Vr(En,pt,lt-On,lt+tn,1,$r.minY,$r.maxY,Vt),Sn=Vr(En,pt,lt+sa,lt+Bo,1,$r.minY,$r.maxY,Vt),En=null),lr>1&&console.timeEnd("clipping"),Qt.push(Ci||[],Ne+1,2*Fe,2*lt),Qt.push(Et||[],Ne+1,2*Fe,2*lt+1),Qt.push(en||[],Ne+1,2*Fe+1,2*lt),Qt.push(Sn||[],Ne+1,2*Fe+1,2*lt+1)}}},Ei.prototype.getTile=function(gt,Ne,Fe){var lt=this.options,Lt=lt.extent,ft=lt.debug;if(gt<0||gt>24)return null;var pe=1<<gt,Qt=ki(gt,Ne=(Ne%pe+pe)%pe,Fe);if(this.tiles[Qt])return Ni(this.tiles[Qt],Lt);ft>1&&console.log("drilling down to z%d-%d-%d",gt,Ne,Fe);for(var Vt,lr=gt,pt=Ne,jr=Fe;!Vt&&lr>0;)lr--,pt=Math.floor(pt/2),jr=Math.floor(jr/2),Vt=this.tiles[ki(lr,pt,jr)];return Vt&&Vt.source?(ft>1&&console.log("found parent tile z%d-%d-%d",lr,pt,jr),ft>1&&console.time("drilling down"),this.splitTile(Vt.source,lr,pt,jr,gt,Ne,Fe),ft>1&&console.timeEnd("drilling down"),this.tiles[Qt]?Ni(this.tiles[Qt],Lt):null):null};class so extends C{constructor(Ne,Fe,lt,Lt){super(Ne,Fe,lt,Xn),this._dataUpdateable=new Map,this.loadGeoJSON=(ft,pe)=>{const{promoteId:Qt}=ft;if(ft.request)return s.getJSON(ft.request,(Vt,lr,pt,jr)=>{this._dataUpdateable=un(lr,Qt)?Rn(lr,Qt):void 0,pe(Vt,lr,pt,jr)});if(typeof ft.data=="string")try{const Vt=JSON.parse(ft.data);this._dataUpdateable=un(Vt,Qt)?Rn(Vt,Qt):void 0,pe(null,Vt)}catch{pe(new Error(`Input data given to '${ft.source}' is not a valid GeoJSON object.`))}else ft.dataDiff?this._dataUpdateable?(function(Vt,lr,pt){var jr,$r,$i,Qi;if(lr.removeAll&&Vt.clear(),lr.remove)for(const Ci of lr.remove)Vt.delete(Ci);if(lr.add)for(const Ci of lr.add){const Et=Zn(Ci,pt);Et!=null&&Vt.set(Et,Ci)}if(lr.update)for(const Ci of lr.update){let Et=Vt.get(Ci.id);if(Et==null)continue;const en=!Ci.removeAllProperties&&(((jr=Ci.removeProperties)===null||jr===void 0?void 0:jr.length)>0||(($r=Ci.addOrUpdateProperties)===null||$r===void 0?void 0:$r.length)>0);if((Ci.newGeometry||Ci.removeAllProperties||en)&&(Et={...Et},Vt.set(Ci.id,Et),en&&(Et.properties={...Et.properties})),Ci.newGeometry&&(Et.geometry=Ci.newGeometry),Ci.removeAllProperties)Et.properties={};else if((($i=Ci.removeProperties)===null||$i===void 0?void 0:$i.length)>0)for(const Sn of Ci.removeProperties)Object.prototype.hasOwnProperty.call(Et.properties,Sn)&&delete Et.properties[Sn];if(((Qi=Ci.addOrUpdateProperties)===null||Qi===void 0?void 0:Qi.length)>0)for(const{key:Sn,value:Vn}of Ci.addOrUpdateProperties)Et.properties[Sn]=Vn}}(this._dataUpdateable,ft.dataDiff,Qt),pe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):pe(new Error(`Cannot update existing geojson data in ${ft.source}`)):pe(new Error(`Input data given to '${ft.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Lt&&(this.loadGeoJSON=Lt)}loadData(Ne,Fe){var lt;(lt=this._pendingRequest)===null||lt===void 0||lt.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Lt=!!(Ne&&Ne.request&&Ne.request.collectResourceTiming)&&new s.RequestPerformance(Ne.request);this._pendingCallback=Fe,this._pendingRequest=this.loadGeoJSON(Ne,(ft,pe)=>{if(delete this._pendingCallback,delete this._pendingRequest,ft||!pe)return Fe(ft);if(typeof pe!="object")return Fe(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));{G(pe,!0);try{if(Ne.filter){const Vt=s.createExpression(Ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Vt.result==="error")throw new Error(Vt.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(pt=>Vt.value.evaluate({zoom:0},pt))}}this._geoJSONIndex=Ne.cluster?new Nt(function({superclusterOptions:Vt,clusterProperties:lr}){if(!lr||!Vt)return Vt;const pt={},jr={},$r={accumulated:null,zoom:0},$i={properties:null},Qi=Object.keys(lr);for(const Ci of Qi){const[Et,en]=lr[Ci],Sn=s.createExpression(en),Vn=s.createExpression(typeof Et=="string"?[Et,["accumulated"],["get",Ci]]:Et);pt[Ci]=Sn.value,jr[Ci]=Vn.value}return Vt.map=Ci=>{$i.properties=Ci;const Et={};for(const en of Qi)Et[en]=pt[en].evaluate($r,$i);return Et},Vt.reduce=(Ci,Et)=>{$i.properties=Et;for(const en of Qi)$r.accumulated=Ci[en],Ci[en]=jr[en].evaluate($r,$i)},Vt}(Ne)).load(pe.features):function(Vt,lr){return new Ei(Vt,lr)}(pe,Ne.geojsonVtOptions)}catch(Vt){return Fe(Vt)}this.loaded={};const Qt={};if(Lt){const Vt=Lt.finish();Vt&&(Qt.resourceTiming={},Qt.resourceTiming[Ne.source]=JSON.parse(JSON.stringify(Vt)))}Fe(null,Qt)}})}reloadTile(Ne,Fe){const lt=this.loaded;return lt&&lt[Ne.uid]?super.reloadTile(Ne,Fe):this.loadTile(Ne,Fe)}removeSource(Ne,Fe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Fe()}getClusterExpansionZoom(Ne,Fe){try{Fe(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(lt){Fe(lt)}}getClusterChildren(Ne,Fe){try{Fe(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(lt){Fe(lt)}}getClusterLeaves(Ne,Fe){try{Fe(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(lt){Fe(lt)}}}class on{constructor(Ne){this.self=Ne,this.actor=new s.Actor(Ne,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:C,geojson:so},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Fe,lt)=>{if(this.workerSourceTypes[Fe])throw new Error(`Worker source with name "${Fe}" already registered.`);this.workerSourceTypes[Fe]=lt},this.self.registerRTLTextPlugin=Fe=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Fe.applyArabicShaping,s.plugin.processBidirectionalText=Fe.processBidirectionalText,s.plugin.processStyledBidirectionalText=Fe.processStyledBidirectionalText}}setReferrer(Ne,Fe){this.referrer=Fe}setImages(Ne,Fe,lt){this.availableImages[Ne]=Fe;for(const Lt in this.workerSources[Ne]){const ft=this.workerSources[Ne][Lt];for(const pe in ft)ft[pe].availableImages=Fe}lt()}setLayers(Ne,Fe,lt){this.getLayerIndex(Ne).replace(Fe),lt()}updateLayers(Ne,Fe,lt){this.getLayerIndex(Ne).update(Fe.layers,Fe.removedIds),lt()}loadTile(Ne,Fe,lt){this.getWorkerSource(Ne,Fe.type,Fe.source).loadTile(Fe,lt)}loadDEMTile(Ne,Fe,lt){this.getDEMWorkerSource(Ne,Fe.source).loadTile(Fe,lt)}reloadTile(Ne,Fe,lt){this.getWorkerSource(Ne,Fe.type,Fe.source).reloadTile(Fe,lt)}abortTile(Ne,Fe,lt){this.getWorkerSource(Ne,Fe.type,Fe.source).abortTile(Fe,lt)}removeTile(Ne,Fe,lt){this.getWorkerSource(Ne,Fe.type,Fe.source).removeTile(Fe,lt)}removeDEMTile(Ne,Fe){this.getDEMWorkerSource(Ne,Fe.source).removeTile(Fe)}removeSource(Ne,Fe,lt){if(!this.workerSources[Ne]||!this.workerSources[Ne][Fe.type]||!this.workerSources[Ne][Fe.type][Fe.source])return;const Lt=this.workerSources[Ne][Fe.type][Fe.source];delete this.workerSources[Ne][Fe.type][Fe.source],Lt.removeSource!==void 0?Lt.removeSource(Fe,lt):lt()}loadWorkerSource(Ne,Fe,lt){try{this.self.importScripts(Fe.url),lt()}catch(Lt){lt(Lt.toString())}}syncRTLPluginState(Ne,Fe,lt){try{s.plugin.setState(Fe);const Lt=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Lt!=null){this.self.importScripts(Lt);const ft=s.plugin.isParsed();lt(ft?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Lt}`),ft)}}catch(Lt){lt(Lt.toString())}}getAvailableImages(Ne){let Fe=this.availableImages[Ne];return Fe||(Fe=[]),Fe}getLayerIndex(Ne){let Fe=this.layerIndexes[Ne];return Fe||(Fe=this.layerIndexes[Ne]=new f),Fe}getWorkerSource(Ne,Fe,lt){if(this.workerSources[Ne]||(this.workerSources[Ne]={}),this.workerSources[Ne][Fe]||(this.workerSources[Ne][Fe]={}),!this.workerSources[Ne][Fe][lt]){const Lt={send:(ft,pe,Qt)=>{this.actor.send(ft,pe,Qt,Ne)}};this.workerSources[Ne][Fe][lt]=new this.workerSourceTypes[Fe](Lt,this.getLayerIndex(Ne),this.getAvailableImages(Ne))}return this.workerSources[Ne][Fe][lt]}getDEMWorkerSource(Ne,Fe){return this.demWorkerSources[Ne]||(this.demWorkerSources[Ne]={}),this.demWorkerSources[Ne][Fe]||(this.demWorkerSources[Ne][Fe]=new N),this.demWorkerSources[Ne][Fe]}}return s.isWorker()&&(self.worker=new on(self)),on}),u(["./shared"],function(s){var f="3.3.1";class y{static testProp(p){if(!y.docStyle)return p[0];for(let k=0;k<p.length;k++)if(p[k]in y.docStyle)return p[k];return p[0]}static create(p,k,L){const z=window.document.createElement(p);return k!==void 0&&(z.className=k),L&&L.appendChild(z),z}static createNS(p,k){return window.document.createElementNS(p,k)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(p,k){p.style[y.transformProp]=k}static addEventListener(p,k,L,z={}){p.addEventListener(k,L,"passive"in z?z:z.capture)}static removeEventListener(p,k,L,z={}){p.removeEventListener(k,L,"passive"in z?z:z.capture)}static suppressClickInternal(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(p,k){const L=p.getBoundingClientRect();return new s.Point(k.clientX-L.left-p.clientLeft,k.clientY-L.top-p.clientTop)}static touchPos(p,k){const L=p.getBoundingClientRect(),z=[];for(let j=0;j<k.length;j++)z.push(new s.Point(k[j].clientX-L.left-p.clientLeft,k[j].clientY-L.top-p.clientTop));return z}static mouseButton(p){return p.button}static remove(p){p.parentNode&&p.parentNode.removeChild(p)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);const b={supported:!1,testSupport:function(R){!C&&I&&(N?O(R):A=R)}};let A,I,C=!1,N=!1;function O(R){const p=R.createTexture();R.bindTexture(R.TEXTURE_2D,p);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,I),R.isContextLost())return;b.supported=!0}catch{}R.deleteTexture(p),C=!0}var $,G;typeof document<"u"&&(I=document.createElement("img"),I.onload=function(){A&&O(A),A=null,N=!0},I.onerror=function(){C=!0,A=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(R){let p,k,L,z;R.resetRequestQueue=()=>{p=[],k=0,L=0,z={}},R.addThrottleControl=ve=>{const Ee=L++;return z[Ee]=ve,Ee},R.removeThrottleControl=ve=>{delete z[ve],re()},R.getImage=(ve,Ee,Te=!0)=>{b.supported&&(ve.headers||(ve.headers={}),ve.headers.accept="image/webp,*/*");const Ze={requestParameters:ve,supportImageRefresh:Te,callback:Ee,cancelled:!1,completed:!1,cancel:()=>{Ze.completed||Ze.cancelled||(Ze.cancelled=!0,Ze.innerRequest&&(Ze.innerRequest.cancel(),k--),re())}};return p.push(Ze),re(),Ze};const j=ve=>{const{requestParameters:Ee,supportImageRefresh:Te,callback:Ze}=ve;return s.extend(Ee,{type:"image"}),(Te!==!1||s.isWorker()||s.getProtocolAction(Ee.url)||Ee.headers&&!Object.keys(Ee.headers).reduce((T,B)=>T&&B==="accept",!0)?s.makeRequest:ae)(Ee,(T,B,W,Q)=>{K(ve,Ze,T,B,W,Q)})},K=(ve,Ee,Te,Ze,T,B)=>{Te?Ee(Te):Ze instanceof HTMLImageElement||s.isImageBitmap(Ze)?Ee(null,Ze):Ze&&((W,Q)=>{typeof createImageBitmap=="function"?s.arrayBufferToImageBitmap(W,Q):s.arrayBufferToImage(W,Q)})(Ze,(W,Q)=>{W!=null?Ee(W):Q!=null&&Ee(null,Q,{cacheControl:T,expires:B})}),ve.cancelled||(ve.completed=!0,k--,re())},re=()=>{const ve=(()=>{const Ee=Object.keys(z);let Te=!1;if(Ee.length>0){for(const Ze of Ee)if(Te=z[Ze](),Te)break}return Te})()?s.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Ee=k;Ee<ve&&p.length>0;Ee++){const Te=p.shift();if(Te.cancelled){Ee--;continue}const Ze=j(Te);k++,Te.innerRequest=Ze}},ae=(ve,Ee)=>{const Te=new Image,Ze=ve.url;let T=!1;const B=ve.credentials;return B&&B==="include"?Te.crossOrigin="use-credentials":(B&&B==="same-origin"||!s.sameOrigin(Ze))&&(Te.crossOrigin="anonymous"),Te.fetchPriority="high",Te.onload=()=>{Ee(null,Te),Te.onerror=Te.onload=null},Te.onerror=()=>{T||Ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Te.onerror=Te.onload=null},Te.src=Ze,{cancel:()=>{T=!0,Te.src=""}}}}($||($={})),$.resetRequestQueue(),function(R){R.Glyphs="Glyphs",R.Image="Image",R.Source="Source",R.SpriteImage="SpriteImage",R.SpriteJSON="SpriteJSON",R.Style="Style",R.Tile="Tile",R.Unknown="Unknown"}(G||(G={}));class Z{constructor(p){this._transformRequestFn=p}transformRequest(p,k){return this._transformRequestFn&&this._transformRequestFn(p,k)||{url:p}}normalizeSpriteURL(p,k,L){const z=function(j){const K=j.match(ee);if(!K)throw new Error(`Unable to parse URL "${j}"`);return{protocol:K[1],authority:K[2],path:K[3]||"/",params:K[4]?K[4].split("&"):[]}}(p);return z.path+=`${k}${L}`,function(j){const K=j.params.length?`?${j.params.join("&")}`:"";return`${j.protocol}://${j.authority}${j.path}${K}`}(z)}setTransformRequest(p){this._transformRequestFn=p}}const ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(R){var p=new s.ARRAY_TYPE(3);return p[0]=R[0],p[1]=R[1],p[2]=R[2],p}var _e,le=function(R,p,k){return R[0]=p[0]-k[0],R[1]=p[1]-k[1],R[2]=p[2]-k[2],R};_e=new s.ARRAY_TYPE(3),s.ARRAY_TYPE!=Float32Array&&(_e[0]=0,_e[1]=0,_e[2]=0);var we=function(R){var p=R[0],k=R[1];return p*p+k*k};function ue(R){const p=[];if(typeof R=="string")p.push({id:"default",url:R});else if(R&&R.length>0){const k=[];for(const{id:L,url:z}of R){const j=`${L}${z}`;k.indexOf(j)===-1&&(k.push(j),p.push({id:L,url:z}))}}return p}function ze(R,p,k,L,z){if(L)return void R(L);if(z!==Object.values(p).length||z!==Object.values(k).length)return;const j={};for(const K in p){j[K]={};const re=s.browser.getImageCanvasContext(k[K]),ae=p[K];for(const ve in ae){const{width:Ee,height:Te,x:Ze,y:T,sdf:B,pixelRatio:W,stretchX:Q,stretchY:de,content:ke}=ae[ve];j[K][ve]={data:null,pixelRatio:W,sdf:B,stretchX:Q,stretchY:de,content:ke,spriteData:{width:Ee,height:Te,x:Ze,y:T,context:re}}}}R(null,j)}(function(){var R=new s.ARRAY_TYPE(2);s.ARRAY_TYPE!=Float32Array&&(R[0]=0,R[1]=0)})();class Ue{constructor(p,k,L,z){this.context=p,this.format=L,this.texture=p.gl.createTexture(),this.update(k,z)}update(p,k,L){const{width:z,height:j}=p,K=!(this.size&&this.size[0]===z&&this.size[1]===j||L),{context:re}=this,{gl:ae}=re;if(this.useMipmap=!!(k&&k.useMipmap),ae.bindTexture(ae.TEXTURE_2D,this.texture),re.pixelStoreUnpackFlipY.set(!1),re.pixelStoreUnpack.set(1),re.pixelStoreUnpackPremultiplyAlpha.set(this.format===ae.RGBA&&(!k||k.premultiply!==!1)),K)this.size=[z,j],p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof HTMLVideoElement||p instanceof ImageData||s.isImageBitmap(p)?ae.texImage2D(ae.TEXTURE_2D,0,this.format,this.format,ae.UNSIGNED_BYTE,p):ae.texImage2D(ae.TEXTURE_2D,0,this.format,z,j,0,this.format,ae.UNSIGNED_BYTE,p.data);else{const{x:ve,y:Ee}=L||{x:0,y:0};p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof HTMLVideoElement||p instanceof ImageData||s.isImageBitmap(p)?ae.texSubImage2D(ae.TEXTURE_2D,0,ve,Ee,ae.RGBA,ae.UNSIGNED_BYTE,p):ae.texSubImage2D(ae.TEXTURE_2D,0,ve,Ee,z,j,ae.RGBA,ae.UNSIGNED_BYTE,p.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ae.generateMipmap(ae.TEXTURE_2D)}bind(p,k,L){const{context:z}=this,{gl:j}=z;j.bindTexture(j.TEXTURE_2D,this.texture),L!==j.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(L=j.LINEAR),p!==this.filter&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,p),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,L||p),this.filter=p),k!==this.wrap&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,k),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,k),this.wrap=k)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:p}=this.context;p.deleteTexture(this.texture),this.texture=null}}function Ce(R){const{userImage:p}=R;return!!(p&&p.render&&p.render())&&(R.data.replace(new Uint8Array(p.data.buffer)),!0)}class Me extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(p){if(this.loaded!==p&&(this.loaded=p,p)){for(const{ids:k,callback:L}of this.requestors)this._notify(k,L);this.requestors=[]}}getImage(p){const k=this.images[p];if(k&&!k.data&&k.spriteData){const L=k.spriteData;k.data=new s.RGBAImage({width:L.width,height:L.height},L.context.getImageData(L.x,L.y,L.width,L.height).data),k.spriteData=null}return k}addImage(p,k){if(this.images[p])throw new Error(`Image id ${p} already exist, use updateImage instead`);this._validate(p,k)&&(this.images[p]=k)}_validate(p,k){let L=!0;const z=k.data||k.spriteData;return this._validateStretch(k.stretchX,z&&z.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${p}" has invalid "stretchX" value`))),L=!1),this._validateStretch(k.stretchY,z&&z.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${p}" has invalid "stretchY" value`))),L=!1),this._validateContent(k.content,k)||(this.fire(new s.ErrorEvent(new Error(`Image "${p}" has invalid "content" value`))),L=!1),L}_validateStretch(p,k){if(!p)return!0;let L=0;for(const z of p){if(z[0]<L||z[1]<z[0]||k<z[1])return!1;L=z[1]}return!0}_validateContent(p,k){if(!p)return!0;if(p.length!==4)return!1;const L=k.spriteData,z=L&&L.width||k.data.width,j=L&&L.height||k.data.height;return!(p[0]<0||z<p[0]||p[1]<0||j<p[1]||p[2]<0||z<p[2]||p[3]<0||j<p[3]||p[2]<p[0]||p[3]<p[1])}updateImage(p,k,L=!0){const z=this.getImage(p);if(L&&(z.data.width!==k.data.width||z.data.height!==k.data.height))throw new Error(`size mismatch between old image (${z.data.width}x${z.data.height}) and new image (${k.data.width}x${k.data.height}).`);k.version=z.version+1,this.images[p]=k,this.updatedImages[p]=!0}removeImage(p){const k=this.images[p];delete this.images[p],delete this.patterns[p],k.userImage&&k.userImage.onRemove&&k.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(p,k){let L=!0;if(!this.isLoaded())for(const z of p)this.images[z]||(L=!1);this.isLoaded()||L?this._notify(p,k):this.requestors.push({ids:p,callback:k})}_notify(p,k){const L={};for(const z of p){let j=this.getImage(z);j||(this.fire(new s.Event("styleimagemissing",{id:z})),j=this.getImage(z)),j?L[z]={data:j.data.clone(),pixelRatio:j.pixelRatio,sdf:j.sdf,version:j.version,stretchX:j.stretchX,stretchY:j.stretchY,content:j.content,hasRenderCallback:!!(j.userImage&&j.userImage.render)}:s.warnOnce(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}k(null,L)}getPixelSize(){const{width:p,height:k}=this.atlasImage;return{width:p,height:k}}getPattern(p){const k=this.patterns[p],L=this.getImage(p);if(!L)return null;if(k&&k.position.version===L.version)return k.position;if(k)k.position.version=L.version;else{const z={w:L.data.width+2,h:L.data.height+2,x:0,y:0},j=new s.ImagePosition(z,L);this.patterns[p]={bin:z,position:j}}return this._updatePatternAtlas(),this.patterns[p].position}bind(p){const k=p.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ue(p,this.atlasImage,k.RGBA),this.atlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE)}_updatePatternAtlas(){const p=[];for(const j in this.patterns)p.push(this.patterns[j].bin);const{w:k,h:L}=s.potpack(p),z=this.atlasImage;z.resize({width:k||1,height:L||1});for(const j in this.patterns){const{bin:K}=this.patterns[j],re=K.x+1,ae=K.y+1,ve=this.getImage(j).data,Ee=ve.width,Te=ve.height;s.RGBAImage.copy(ve,z,{x:0,y:0},{x:re,y:ae},{width:Ee,height:Te}),s.RGBAImage.copy(ve,z,{x:0,y:Te-1},{x:re,y:ae-1},{width:Ee,height:1}),s.RGBAImage.copy(ve,z,{x:0,y:0},{x:re,y:ae+Te},{width:Ee,height:1}),s.RGBAImage.copy(ve,z,{x:Ee-1,y:0},{x:re-1,y:ae},{width:1,height:Te}),s.RGBAImage.copy(ve,z,{x:0,y:0},{x:re+Ee,y:ae},{width:1,height:Te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(p){for(const k of p){if(this.callbackDispatchedThisFrame[k])continue;this.callbackDispatchedThisFrame[k]=!0;const L=this.getImage(k);L||s.warnOnce(`Image with ID: "${k}" was not found`),Ce(L)&&this.updateImage(k,L)}}}const qe=1e20;function it(R,p,k,L,z,j,K,re,ae){for(let ve=p;ve<p+L;ve++)xt(R,k*j+ve,j,z,K,re,ae);for(let ve=k;ve<k+z;ve++)xt(R,ve*j+p,1,L,K,re,ae)}function xt(R,p,k,L,z,j,K){j[0]=0,K[0]=-qe,K[1]=qe,z[0]=R[p];for(let re=1,ae=0,ve=0;re<L;re++){z[re]=R[p+re*k];const Ee=re*re;do{const Te=j[ae];ve=(z[re]-z[Te]+Ee-Te*Te)/(re-Te)/2}while(ve<=K[ae]&&--ae>-1);ae++,j[ae]=re,K[ae]=ve,K[ae+1]=qe}for(let re=0,ae=0;re<L;re++){for(;K[ae+1]<re;)ae++;const ve=j[ae],Ee=re-ve;R[p+re*k]=z[ve]+Ee*Ee}}class yt{constructor(p,k){this.requestManager=p,this.localIdeographFontFamily=k,this.entries={}}setURL(p){this.url=p}getGlyphs(p,k){const L=[];for(const z in p)for(const j of p[z])L.push({stack:z,id:j});s.asyncAll(L,({stack:z,id:j},K)=>{let re=this.entries[z];re||(re=this.entries[z]={glyphs:{},requests:{},ranges:{}});let ae=re.glyphs[j];if(ae!==void 0)return void K(null,{stack:z,id:j,glyph:ae});if(ae=this._tinySDF(re,z,j),ae)return re.glyphs[j]=ae,void K(null,{stack:z,id:j,glyph:ae});const ve=Math.floor(j/256);if(256*ve>65535)return void K(new Error("glyphs > 65535 not supported"));if(re.ranges[ve])return void K(null,{stack:z,id:j,glyph:ae});if(!this.url)return void K(new Error("glyphsUrl is not set"));let Ee=re.requests[ve];Ee||(Ee=re.requests[ve]=[],yt.loadGlyphRange(z,ve,this.url,this.requestManager,(Te,Ze)=>{if(Ze){for(const T in Ze)this._doesCharSupportLocalGlyph(+T)||(re.glyphs[+T]=Ze[+T]);re.ranges[ve]=!0}for(const T of Ee)T(Te,Ze);delete re.requests[ve]})),Ee.push((Te,Ze)=>{Te?K(Te):Ze&&K(null,{stack:z,id:j,glyph:Ze[j]||null})})},(z,j)=>{if(z)k(z);else if(j){const K={};for(const{stack:re,id:ae,glyph:ve}of j)(K[re]||(K[re]={}))[ae]=ve&&{id:ve.id,bitmap:ve.bitmap.clone(),metrics:ve.metrics};k(null,K)}})}_doesCharSupportLocalGlyph(p){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](p)||s.unicodeBlockLookup["Hangul Syllables"](p)||s.unicodeBlockLookup.Hiragana(p)||s.unicodeBlockLookup.Katakana(p))}_tinySDF(p,k,L){const z=this.localIdeographFontFamily;if(!z||!this._doesCharSupportLocalGlyph(L))return;let j=p.tinySDF;if(!j){let re="400";/bold/i.test(k)?re="900":/medium/i.test(k)?re="500":/light/i.test(k)&&(re="200"),j=p.tinySDF=new yt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:z,fontWeight:re})}const K=j.draw(String.fromCharCode(L));return{id:L,bitmap:new s.AlphaImage({width:K.width||30,height:K.height||30},K.data),metrics:{width:K.glyphWidth||24,height:K.glyphHeight||24,left:K.glyphLeft||0,top:K.glyphTop-27||-8,advance:K.glyphAdvance||24}}}}yt.loadGlyphRange=function(R,p,k,L,z){const j=256*p,K=j+255,re=L.transformRequest(k.replace("{fontstack}",R).replace("{range}",`${j}-${K}`),G.Glyphs);s.getArrayBuffer(re,(ae,ve)=>{if(ae)z(ae);else if(ve){const Ee={};for(const Te of s.parseGlyphPbf(ve))Ee[Te.id]=Te;z(null,Ee)}})},yt.TinySDF=class{constructor({fontSize:R=24,buffer:p=3,radius:k=8,cutoff:L=.25,fontFamily:z="sans-serif",fontWeight:j="normal",fontStyle:K="normal"}={}){this.buffer=p,this.cutoff=L,this.radius=k;const re=this.size=R+4*p,ae=this._createCanvas(re),ve=this.ctx=ae.getContext("2d",{willReadFrequently:!0});ve.font=`${K} ${j} ${R}px ${z}`,ve.textBaseline="alphabetic",ve.textAlign="left",ve.fillStyle="black",this.gridOuter=new Float64Array(re*re),this.gridInner=new Float64Array(re*re),this.f=new Float64Array(re),this.z=new Float64Array(re+1),this.v=new Uint16Array(re)}_createCanvas(R){const p=document.createElement("canvas");return p.width=p.height=R,p}draw(R){const{width:p,actualBoundingBoxAscent:k,actualBoundingBoxDescent:L,actualBoundingBoxLeft:z,actualBoundingBoxRight:j}=this.ctx.measureText(R),K=Math.ceil(k),re=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(j-z))),ae=Math.min(this.size-this.buffer,K+Math.ceil(L)),ve=re+2*this.buffer,Ee=ae+2*this.buffer,Te=Math.max(ve*Ee,0),Ze=new Uint8ClampedArray(Te),T={data:Ze,width:ve,height:Ee,glyphWidth:re,glyphHeight:ae,glyphTop:K,glyphLeft:0,glyphAdvance:p};if(re===0||ae===0)return T;const{ctx:B,buffer:W,gridInner:Q,gridOuter:de}=this;B.clearRect(W,W,re,ae),B.fillText(R,W,W+K);const ke=B.getImageData(W,W,re,ae);de.fill(qe,0,Te),Q.fill(0,0,Te);for(let fe=0;fe<ae;fe++)for(let Se=0;Se<re;Se++){const De=ke.data[4*(fe*re+Se)+3]/255;if(De===0)continue;const je=(fe+W)*ve+Se+W;if(De===1)de[je]=0,Q[je]=qe;else{const ut=.5-De;de[je]=ut>0?ut*ut:0,Q[je]=ut<0?ut*ut:0}}it(de,0,0,ve,Ee,ve,this.f,this.v,this.z),it(Q,W,W,re,ae,ve,this.f,this.v,this.z);for(let fe=0;fe<Te;fe++){const Se=Math.sqrt(de[fe])-Math.sqrt(Q[fe]);Ze[fe]=Math.round(255-255*(Se/this.radius+this.cutoff))}return T}};class $e{constructor(){this.specification=s.v8Spec.light.position}possiblyEvaluate(p,k){return s.sphericalToCartesian(p.expression.evaluate(k))}interpolate(p,k,L){return{x:s.interpolate.number(p.x,k.x,L),y:s.interpolate.number(p.y,k.y,L),z:s.interpolate.number(p.z,k.z,L)}}}let at,mt;class Xe extends s.Evented{constructor(p){super(),at=at||new s.Properties({anchor:new s.DataConstantProperty(s.v8Spec.light.anchor),position:new $e,color:new s.DataConstantProperty(s.v8Spec.light.color),intensity:new s.DataConstantProperty(s.v8Spec.light.intensity)}),this._transitionable=new s.Transitionable(at),this.setLight(p),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(p,k={}){if(!this._validate(s.validateLight,p,k))for(const L in p){const z=p[L];L.endsWith("-transition")?this._transitionable.setTransition(L.slice(0,-11),z):this._transitionable.setValue(L,z)}}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,k,L){return(!L||L.validate!==!1)&&s.emitValidationErrors(this,p.call(s.validateStyle,s.extend({value:k,style:{glyphs:!0,sprite:!0},styleSpec:s.v8Spec})))}}class wt{constructor(p,k){this.width=p,this.height=k,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(p,k){const L=p.join(",")+String(k);return this.dashEntry[L]||(this.dashEntry[L]=this.addDash(p,k)),this.dashEntry[L]}getDashRanges(p,k,L){const z=[];let j=p.length%2==1?-p[p.length-1]*L:0,K=p[0]*L,re=!0;z.push({left:j,right:K,isDash:re,zeroLength:p[0]===0});let ae=p[0];for(let ve=1;ve<p.length;ve++){re=!re;const Ee=p[ve];j=ae*L,ae+=Ee,K=ae*L,z.push({left:j,right:K,isDash:re,zeroLength:Ee===0})}return z}addRoundDash(p,k,L){const z=k/2;for(let j=-L;j<=L;j++){const K=this.width*(this.nextRow+L+j);let re=0,ae=p[re];for(let ve=0;ve<this.width;ve++){ve/ae.right>1&&(ae=p[++re]);const Ee=Math.abs(ve-ae.left),Te=Math.abs(ve-ae.right),Ze=Math.min(Ee,Te);let T;const B=j/L*(z+1);if(ae.isDash){const W=z-Math.abs(B);T=Math.sqrt(Ze*Ze+W*W)}else T=z-Math.sqrt(Ze*Ze+B*B);this.data[K+ve]=Math.max(0,Math.min(255,T+128))}}}addRegularDash(p){for(let re=p.length-1;re>=0;--re){const ae=p[re],ve=p[re+1];ae.zeroLength?p.splice(re,1):ve&&ve.isDash===ae.isDash&&(ve.left=ae.left,p.splice(re,1))}const k=p[0],L=p[p.length-1];k.isDash===L.isDash&&(k.left=L.left-this.width,L.right=k.right+this.width);const z=this.width*this.nextRow;let j=0,K=p[j];for(let re=0;re<this.width;re++){re/K.right>1&&(K=p[++j]);const ae=Math.abs(re-K.left),ve=Math.abs(re-K.right),Ee=Math.min(ae,ve);this.data[z+re]=Math.max(0,Math.min(255,(K.isDash?Ee:-Ee)+128))}}addDash(p,k){const L=k?7:0,z=2*L+1;if(this.nextRow+z>this.height)return s.warnOnce("LineAtlas out of space"),null;let j=0;for(let re=0;re<p.length;re++)j+=p[re];if(j!==0){const re=this.width/j,ae=this.getDashRanges(p,this.width,re);k?this.addRoundDash(ae,re,L):this.addRegularDash(ae)}const K={y:(this.nextRow+L+.5)/this.height,height:2*L/this.height,width:j};return this.nextRow+=z,this.dirty=!0,K}bind(p){const k=p.gl;this.texture?(k.bindTexture(k.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,k.texSubImage2D(k.TEXTURE_2D,0,0,0,this.width,this.height,k.ALPHA,k.UNSIGNED_BYTE,this.data))):(this.texture=k.createTexture(),k.bindTexture(k.TEXTURE_2D,this.texture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR),k.texImage2D(k.TEXTURE_2D,0,k.ALPHA,this.width,this.height,0,k.ALPHA,k.UNSIGNED_BYTE,this.data))}}class be{constructor(p,k,L){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=L;const z=this.workerPool.acquire(L);for(let j=0;j<z.length;j++){const K=new be.Actor(z[j],k,L);K.name=`Worker ${j}`,this.actors.push(K)}if(!this.actors.length)throw new Error("No actors found")}broadcast(p,k,L){s.asyncAll(this.actors,(z,j)=>{z.send(p,k,j)},L=L||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(p=!0){this.actors.forEach(k=>{k.remove()}),this.actors=[],p&&this.workerPool.release(this.id)}}function Be(R,p,k){const L=function(z,j){if(z)return k(z);if(j){const K=s.pick(s.extend(j,R),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(K.vectorLayers=j.vector_layers,K.vectorLayerIds=K.vectorLayers.map(re=>re.id)),k(null,K)}};return R.url?s.getJSON(p.transformRequest(R.url,G.Source),L):s.browser.frame(()=>L(null,R))}be.Actor=s.Actor;class Ae{constructor(p,k){p&&(k?this.setSouthWest(p).setNorthEast(k):Array.isArray(p)&&(p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1])))}setNorthEast(p){return this._ne=p instanceof s.LngLat?new s.LngLat(p.lng,p.lat):s.LngLat.convert(p),this}setSouthWest(p){return this._sw=p instanceof s.LngLat?new s.LngLat(p.lng,p.lat):s.LngLat.convert(p),this}extend(p){const k=this._sw,L=this._ne;let z,j;if(p instanceof s.LngLat)z=p,j=p;else{if(!(p instanceof Ae))return Array.isArray(p)?p.length===4||p.every(Array.isArray)?this.extend(Ae.convert(p)):this.extend(s.LngLat.convert(p)):p&&("lng"in p||"lon"in p)&&"lat"in p?this.extend(s.LngLat.convert(p)):this;if(z=p._sw,j=p._ne,!z||!j)return this}return k||L?(k.lng=Math.min(z.lng,k.lng),k.lat=Math.min(z.lat,k.lat),L.lng=Math.max(j.lng,L.lng),L.lat=Math.max(j.lat,L.lat)):(this._sw=new s.LngLat(z.lng,z.lat),this._ne=new s.LngLat(j.lng,j.lat)),this}getCenter(){return new s.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new s.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(p){const{lng:k,lat:L}=s.LngLat.convert(p);let z=this._sw.lng<=k&&k<=this._ne.lng;return this._sw.lng>this._ne.lng&&(z=this._sw.lng>=k&&k>=this._ne.lng),this._sw.lat<=L&&L<=this._ne.lat&&z}static convert(p){return p instanceof Ae?p:p&&new Ae(p)}static fromLngLat(p,k=0){const L=360*k/40075017,z=L/Math.cos(Math.PI/180*p.lat);return new Ae(new s.LngLat(p.lng-z,p.lat-L),new s.LngLat(p.lng+z,p.lat+L))}}class ht{constructor(p,k,L){this.bounds=Ae.convert(this.validateBounds(p)),this.minzoom=k||0,this.maxzoom=L||24}validateBounds(p){return Array.isArray(p)&&p.length===4?[Math.max(-180,p[0]),Math.max(-90,p[1]),Math.min(180,p[2]),Math.min(90,p[3])]:[-180,-90,180,90]}contains(p){const k=Math.pow(2,p.z),L=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*k),z=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*k),j=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*k),K=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*k);return p.x>=L&&p.x<j&&p.y>=z&&p.y<K}}class Nt extends s.Evented{constructor(p,k,L,z){if(super(),this.load=()=>{this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,(j,K)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),j?this.fire(new s.ErrorEvent(j)):K&&(s.extend(this,K),K.bounds&&(this.tileBounds=new ht(K.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>s.extend({},this._options),this.id=p,this.dispatcher=L,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(k,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},k),this._collectResourceTiming=k.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z)}loaded(){return this._loaded}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}onAdd(p){this.map=p,this.load()}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.load()}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}setUrl(p){return this.setSourceProperty(()=>{this.url=p,this._options.url=p}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(p,k){const L=p.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z={request:this.map._requestManager.transformRequest(L,G.Tile),uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function j(K,re){return delete p.request,p.aborted?k(null):K&&K.status!==404?k(K):(re&&re.resourceTiming&&(p.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&p.setExpiryData(re),p.loadVectorData(re,this.map.painter),k(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}z.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired"?p.state==="loading"?p.reloadCallback=k:p.request=p.actor.send("reloadTile",z,j.bind(this)):(p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",z,j.bind(this)))}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id},void 0)}unloadTile(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class zt extends s.Evented{constructor(p,k,L,z){super(),this.id=p,this.dispatcher=L,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},k),s.extend(this,s.pick(k,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,(p,k)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new s.ErrorEvent(p)):k&&(s.extend(this,k),k.bounds&&(this.tileBounds=new ht(k.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(p){this.map=p,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,k){const L=p.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);p.request=$.getImage(this.map._requestManager.transformRequest(L,G.Tile),(z,j,K)=>{if(delete p.request,p.aborted)p.state="unloaded",k(null);else if(z)p.state="errored",k(z);else if(j){this.map._refreshExpiredTiles&&K&&p.setExpiryData(K);const re=this.map.painter.context,ae=re.gl;p.texture=this.map.painter.getTileTexture(j.width),p.texture?p.texture.update(j,{useMipmap:!0}):(p.texture=new Ue(re,j,ae.RGBA,{useMipmap:!0}),p.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),re.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,re.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,re.extTextureFilterAnisotropicMax)),p.state="loaded",k(null)}},this.map._refreshExpiredTiles)}abortTile(p,k){p.request&&(p.request.cancel(),delete p.request),k()}unloadTile(p,k){p.texture&&this.map.painter.saveTileTexture(p.texture),k()}hasTransition(){return!1}}class Mt extends zt{constructor(p,k,L,z){super(p,k,L,z),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},k),this.encoding=k.encoding||"mapbox"}loadTile(p,k){const L=p.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function z(j,K){j&&(p.state="errored",k(j)),K&&(p.dem=K,p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0,p.state="loaded",k(null))}p.request=$.getImage(this.map._requestManager.transformRequest(L,G.Tile),(function(j,K){if(delete p.request,p.aborted)p.state="unloaded",k(null);else if(j)p.state="errored",k(j);else if(K){this.map._refreshExpiredTiles&&p.setExpiryData(K),delete K.cacheControl,delete K.expires;const re=s.isImageBitmap(K)&&(mt==null&&(mt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),mt)?K:s.browser.getImageData(K,1),ae={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:re,encoding:this.encoding};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",ae,z.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),p.neighboringTiles=this._getNeighboringTiles(p.tileID)}_getNeighboringTiles(p){const k=p.canonical,L=Math.pow(2,k.z),z=(k.x-1+L)%L,j=k.x===0?p.wrap-1:p.wrap,K=(k.x+1+L)%L,re=k.x+1===L?p.wrap+1:p.wrap,ae={};return ae[new s.OverscaledTileID(p.overscaledZ,j,k.z,z,k.y).key]={backfilled:!1},ae[new s.OverscaledTileID(p.overscaledZ,re,k.z,K,k.y).key]={backfilled:!1},k.y>0&&(ae[new s.OverscaledTileID(p.overscaledZ,j,k.z,z,k.y-1).key]={backfilled:!1},ae[new s.OverscaledTileID(p.overscaledZ,p.wrap,k.z,k.x,k.y-1).key]={backfilled:!1},ae[new s.OverscaledTileID(p.overscaledZ,re,k.z,K,k.y-1).key]={backfilled:!1}),k.y+1<L&&(ae[new s.OverscaledTileID(p.overscaledZ,j,k.z,z,k.y+1).key]={backfilled:!1},ae[new s.OverscaledTileID(p.overscaledZ,p.wrap,k.z,k.x,k.y+1).key]={backfilled:!1},ae[new s.OverscaledTileID(p.overscaledZ,re,k.z,K,k.y+1).key]={backfilled:!1}),ae}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded",p.actor&&p.actor.send("removeDEMTile",{uid:p.uid,source:this.id})}}class Kt extends s.Evented{constructor(p,k,L,z){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>s.extend({},this._options,{type:this.type,data:this._data}),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=L.getActor(),this.setEventedParent(z),this._data=k.data,this._options=s.extend({},k),this._collectResourceTiming=k.collectResourceTiming,k.maxzoom!==void 0&&(this.maxzoom=k.maxzoom),k.type&&(this.type=k.type),k.attribution&&(this.attribution=k.attribution),this.promoteId=k.promoteId;const j=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:k.cluster||!1,geojsonVtOptions:{buffer:(k.buffer!==void 0?k.buffer:128)*j,tolerance:(k.tolerance!==void 0?k.tolerance:.375)*j,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:k.lineMetrics||!1,generateId:k.generateId||!1},superclusterOptions:{maxZoom:k.clusterMaxZoom!==void 0?k.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,k.clusterMinPoints||2),extent:s.EXTENT,radius:(k.clusterRadius||50)*j,log:!1,generateId:k.generateId||!1},clusterProperties:k.clusterProperties,filter:k.filter},k.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(p){this.map=p,this.load()}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){return this._updateWorkerData(p),this}setClusterOptions(p){return this.workerOptions.cluster=p.cluster,p&&(p.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=p.clusterRadius),p.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=p.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(p,k){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},k),this}getClusterChildren(p,k){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},k),this}getClusterLeaves(p,k,L,z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:k,offset:L},z),this}_updateWorkerData(p){const k=s.extend({},this.workerOptions);p?k.dataDiff=p:typeof this._data=="string"?(k.request=this.map._requestManager.transformRequest(s.browser.resolveURL(this._data),G.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,k,(L,z)=>{if(this._pendingLoads--,this._removed||z&&z.abandoned)return void this.fire(new s.Event("dataabort",{dataType:"source"}));let j=null;if(z&&z.resourceTiming&&z.resourceTiming[this.id]&&(j=z.resourceTiming[this.id].slice(0)),L)return void this.fire(new s.ErrorEvent(L));const K={dataType:"source"};this._collectResourceTiming&&j&&j.length>0&&s.extend(K,{resourceTiming:j}),this.fire(new s.Event("data",{...K,sourceDataType:"metadata"})),this.fire(new s.Event("data",{...K,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(p,k){const L=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const z={type:this.type,uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request=this.actor.send(L,z,(j,K)=>(delete p.request,p.unloadVectorData(),p.aborted?k(null):j?k(j):(p.loadVectorData(K,this.map.painter,L==="reloadTile"),k(null))))}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var yr=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Er extends s.Evented{constructor(p,k,L,z){super(),this.load=(j,K)=>{this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(re,ae)=>{this._request=null,this._loaded=!0,re?this.fire(new s.ErrorEvent(re)):ae&&(this.image=ae,j&&(this.coordinates=j),K&&K(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const j=this.map.painter.context,K=j.gl;this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,yr.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ue(j,this.image,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE));let re=!1;for(const ae in this.tiles){const ve=this.tiles[ae];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture,re=!0)}re&&this.fire(new s.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=p,this.dispatcher=L,this.coordinates=k.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=k}loaded(){return this._loaded}updateImage(p){return p.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=p.url,this.load(p.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(p){this.map=p,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(p){this.coordinates=p;const k=p.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(z){let j=1/0,K=1/0,re=-1/0,ae=-1/0;for(const Ze of z)j=Math.min(j,Ze.x),K=Math.min(K,Ze.y),re=Math.max(re,Ze.x),ae=Math.max(ae,Ze.y);const ve=Math.max(re-j,ae-K),Ee=Math.max(0,Math.floor(-Math.log(ve)/Math.LN2)),Te=Math.pow(2,Ee);return new s.CanonicalTileID(Ee,Math.floor((j+re)/2*Te),Math.floor((K+ae)/2*Te))}(k),this.minzoom=this.maxzoom=this.tileID.z;const L=k.map(z=>this.tileID.getTilePoint(z)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(L[0].x,L[0].y,0,0),this._boundsArray.emplaceBack(L[1].x,L[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(L[3].x,L[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(L[2].x,L[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(p,k){this.tileID&&this.tileID.equals(p.tileID.canonical)?(this.tiles[String(p.tileID.wrap)]=p,p.buckets={},k(null)):(p.state="errored",k(null))}hasTransition(){return!1}}class Jt extends Er{constructor(p,k,L,z){super(p,k,L,z),this.load=()=>{this._loaded=!1;const j=this.options;this.urls=[];for(const K of j.urls)this.urls.push(this.map._requestManager.transformRequest(K,G.Source).url);s.getVideo(this.urls,(K,re)=>{this._loaded=!0,K?this.fire(new s.ErrorEvent(K)):re&&(this.video=re,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const j=this.map.painter.context,K=j.gl;this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,yr.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE),K.texSubImage2D(K.TEXTURE_2D,0,0,0,K.RGBA,K.UNSIGNED_BYTE,this.video)):(this.texture=new Ue(j,this.video,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE));let re=!1;for(const ae in this.tiles){const ve=this.tiles[ae];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture,re=!0)}re&&this.fire(new s.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=k}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const k=this.video.seekable;p<k.start(0)||p>k.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${k.start(0)} and ${k.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class It extends Er{constructor(p,k,L,z){super(p,k,L,z),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let j=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,j=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,j=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const K=this.map.painter.context,re=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,yr.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(j||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ue(K,this.canvas,re.RGBA,{premultiply:!0});let ae=!1;for(const ve in this.tiles){const Ee=this.tiles[ve];Ee.state!=="loaded"&&(Ee.state="loaded",Ee.texture=this.texture,ae=!0)}ae&&this.fire(new s.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),k.coordinates?Array.isArray(k.coordinates)&&k.coordinates.length===4&&!k.coordinates.some(j=>!Array.isArray(j)||j.length!==2||j.some(K=>typeof K!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),k.animate&&typeof k.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),k.canvas?typeof k.canvas=="string"||k.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=k,this.animate=k.animate===void 0||k.animate}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}}const Fr={},Ft=R=>{switch(R){case"geojson":return Kt;case"image":return Er;case"raster":return zt;case"raster-dem":return Mt;case"vector":return Nt;case"video":return Jt;case"canvas":return It}return Fr[R]};function ct(R,p){const k=s.create();return s.translate(k,k,[1,1,0]),s.scale(k,k,[.5*R.width,.5*R.height,1]),s.multiply(k,k,R.calculatePosMatrix(p.toUnwrapped()))}function mr(R,p,k,L,z,j){const K=function(Te,Ze,T){if(Te)for(const B of Te){const W=Ze[B];if(W&&W.source===T&&W.type==="fill-extrusion")return!0}else for(const B in Ze){const W=Ze[B];if(W.source===T&&W.type==="fill-extrusion")return!0}return!1}(z&&z.layers,p,R.id),re=j.maxPitchScaleFactor(),ae=R.tilesIn(L,re,K);ae.sort(Jr);const ve=[];for(const Te of ae)ve.push({wrappedTileID:Te.tileID.wrapped().key,queryResults:Te.tile.queryRenderedFeatures(p,k,R._state,Te.queryGeometry,Te.cameraQueryGeometry,Te.scale,z,j,re,ct(R.transform,Te.tileID))});const Ee=function(Te){const Ze={},T={};for(const B of Te){const W=B.queryResults,Q=B.wrappedTileID,de=T[Q]=T[Q]||{};for(const ke in W){const fe=W[ke],Se=de[ke]=de[ke]||{},De=Ze[ke]=Ze[ke]||[];for(const je of fe)Se[je.featureIndex]||(Se[je.featureIndex]=!0,De.push(je))}}return Ze}(ve);for(const Te in Ee)Ee[Te].forEach(Ze=>{const T=Ze.feature,B=R.getFeatureState(T.layer["source-layer"],T.id);T.source=T.layer.source,T.layer["source-layer"]&&(T.sourceLayer=T.layer["source-layer"]),T.state=B});return Ee}function Jr(R,p){const k=R.tileID,L=p.tileID;return k.overscaledZ-L.overscaledZ||k.canonical.y-L.canonical.y||k.wrap-L.wrap||k.canonical.x-L.canonical.x}class dr{constructor(p,k){this.timeAdded=0,this.fadeEndTime=0,this.tileID=p,this.uid=s.uniqueId(),this.uses=0,this.tileSize=k,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(p){const k=p+this.timeAdded;k<this.fadeEndTime||(this.fadeEndTime=k)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(p){this.demTexture&&p.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(p,k,L){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",p){p.featureIndex&&(this.latestFeatureIndex=p.featureIndex,p.rawTileData?(this.latestRawTileData=p.rawTileData,this.latestFeatureIndex.rawTileData=p.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=p.collisionBoxArray,this.buckets=function(z,j){const K={};if(!j)return K;for(const re of z){const ae=re.layerIds.map(ve=>j.getLayer(ve)).filter(Boolean);if(ae.length!==0){re.layers=ae,re.stateDependentLayerIds&&(re.stateDependentLayers=re.stateDependentLayerIds.map(ve=>ae.filter(Ee=>Ee.id===ve)[0]));for(const ve of ae)K[ve.id]=re}}return K}(p.buckets,k.style),this.hasSymbolBuckets=!1;for(const z in this.buckets){const j=this.buckets[z];if(j instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!L)break;j.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const z in this.buckets){const j=this.buckets[z];if(j instanceof s.SymbolBucket&&j.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const z in this.buckets){const j=this.buckets[z];this.queryPadding=Math.max(this.queryPadding,k.style.getLayer(z).queryRadius(j))}p.imageAtlas&&(this.imageAtlas=p.imageAtlas),p.glyphAtlasImage&&(this.glyphAtlasImage=p.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const p in this.buckets)this.buckets[p].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(p){return this.buckets[p.id]}upload(p){for(const L in this.buckets){const z=this.buckets[L];z.uploadPending()&&z.upload(p)}const k=p.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ue(p,this.imageAtlas.image,k.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ue(p,this.glyphAtlasImage,k.ALPHA),this.glyphAtlasImage=null)}prepare(p){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(p,this.imageAtlasTexture)}queryRenderedFeatures(p,k,L,z,j,K,re,ae,ve,Ee){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:j,scale:K,tileSize:this.tileSize,pixelPosMatrix:Ee,transform:ae,params:re,queryPadding:this.queryPadding*ve},p,k,L):{}}querySourceFeatures(p,k){const L=this.latestFeatureIndex;if(!L||!L.rawTileData)return;const z=L.loadVTLayers(),j=k&&k.sourceLayer?k.sourceLayer:"",K=z._geojsonTileLayer||z[j];if(!K)return;const re=s.createFilter(k&&k.filter),{z:ae,x:ve,y:Ee}=this.tileID.canonical,Te={z:ae,x:ve,y:Ee};for(let Ze=0;Ze<K.length;Ze++){const T=K.feature(Ze);if(re.needGeometry){const Q=s.toEvaluationFeature(T,!0);if(!re.filter(new s.EvaluationParameters(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!re.filter(new s.EvaluationParameters(this.tileID.overscaledZ),T))continue;const B=L.getId(T,j),W=new s.GeoJSONFeature(T,ae,ve,Ee,B);W.tile=Te,p.push(W)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(p){const k=this.expirationTime;if(p.cacheControl){const L=s.parseCacheControl(p.cacheControl);L["max-age"]&&(this.expirationTime=Date.now()+1e3*L["max-age"])}else p.expires&&(this.expirationTime=new Date(p.expires).getTime());if(this.expirationTime){const L=Date.now();let z=!1;if(this.expirationTime>L)z=!1;else if(k)if(this.expirationTime<k)z=!0;else{const j=this.expirationTime-k;j?this.expirationTime=L+Math.max(j,3e4):z=!0}else z=!0;z?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(p,k){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(p).length===0)return;const L=this.latestFeatureIndex.loadVTLayers();for(const z in this.buckets){if(!k.style.hasLayer(z))continue;const j=this.buckets[z],K=j.layers[0].sourceLayer||"_geojsonTileLayer",re=L[K],ae=p[K];if(!re||!ae||Object.keys(ae).length===0)continue;j.update(ae,re,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ve=k&&k.style&&k.style.getLayer(z);ve&&(this.queryPadding=Math.max(this.queryPadding,ve.queryRadius(j)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(p){this.symbolFadeHoldUntil=s.browser.now()+p}setDependencies(p,k){const L={};for(const z of k)L[z]=!0;this.dependencies[p]=L}hasDependency(p,k){for(const L of p){const z=this.dependencies[L];if(z){for(const j of k)if(z[j])return!0}}return!1}}class zr{constructor(p,k){this.max=p,this.onRemove=k,this.reset()}reset(){for(const p in this.data)for(const k of this.data[p])k.timeout&&clearTimeout(k.timeout),this.onRemove(k.value);return this.data={},this.order=[],this}add(p,k,L){const z=p.wrapped().key;this.data[z]===void 0&&(this.data[z]=[]);const j={value:k,timeout:void 0};if(L!==void 0&&(j.timeout=setTimeout(()=>{this.remove(p,j)},L)),this.data[z].push(j),this.order.push(z),this.order.length>this.max){const K=this._getAndRemoveByKey(this.order[0]);K&&this.onRemove(K)}return this}has(p){return p.wrapped().key in this.data}getAndRemove(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null}_getAndRemoveByKey(p){const k=this.data[p].shift();return k.timeout&&clearTimeout(k.timeout),this.data[p].length===0&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),k.value}getByKey(p){const k=this.data[p];return k?k[0].value:null}get(p){return this.has(p)?this.data[p.wrapped().key][0].value:null}remove(p,k){if(!this.has(p))return this;const L=p.wrapped().key,z=k===void 0?0:this.data[L].indexOf(k),j=this.data[L][z];return this.data[L].splice(z,1),j.timeout&&clearTimeout(j.timeout),this.data[L].length===0&&delete this.data[L],this.onRemove(j.value),this.order.splice(this.order.indexOf(L),1),this}setMaxSize(p){for(this.max=p;this.order.length>this.max;){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}filter(p){const k=[];for(const L in this.data)for(const z of this.data[L])p(z.value)||k.push(z);for(const L of k)this.remove(L.value.tileID,L)}}class ri{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(p,k,L){const z=String(k);if(this.stateChanges[p]=this.stateChanges[p]||{},this.stateChanges[p][z]=this.stateChanges[p][z]||{},s.extend(this.stateChanges[p][z],L),this.deletedStates[p]===null){this.deletedStates[p]={};for(const j in this.state[p])j!==z&&(this.deletedStates[p][j]=null)}else if(this.deletedStates[p]&&this.deletedStates[p][z]===null){this.deletedStates[p][z]={};for(const j in this.state[p][z])L[j]||(this.deletedStates[p][z][j]=null)}else for(const j in L)this.deletedStates[p]&&this.deletedStates[p][z]&&this.deletedStates[p][z][j]===null&&delete this.deletedStates[p][z][j]}removeFeatureState(p,k,L){if(this.deletedStates[p]===null)return;const z=String(k);if(this.deletedStates[p]=this.deletedStates[p]||{},L&&k!==void 0)this.deletedStates[p][z]!==null&&(this.deletedStates[p][z]=this.deletedStates[p][z]||{},this.deletedStates[p][z][L]=null);else if(k!==void 0)if(this.stateChanges[p]&&this.stateChanges[p][z])for(L in this.deletedStates[p][z]={},this.stateChanges[p][z])this.deletedStates[p][z][L]=null;else this.deletedStates[p][z]=null;else this.deletedStates[p]=null}getState(p,k){const L=String(k),z=s.extend({},(this.state[p]||{})[L],(this.stateChanges[p]||{})[L]);if(this.deletedStates[p]===null)return{};if(this.deletedStates[p]){const j=this.deletedStates[p][k];if(j===null)return{};for(const K in j)delete z[K]}return z}initializeTileState(p,k){p.setFeatureState(this.state,k)}coalesceChanges(p,k){const L={};for(const z in this.stateChanges){this.state[z]=this.state[z]||{};const j={};for(const K in this.stateChanges[z])this.state[z][K]||(this.state[z][K]={}),s.extend(this.state[z][K],this.stateChanges[z][K]),j[K]=this.state[z][K];L[z]=j}for(const z in this.deletedStates){this.state[z]=this.state[z]||{};const j={};if(this.deletedStates[z]===null)for(const K in this.state[z])j[K]={},this.state[z][K]={};else for(const K in this.deletedStates[z]){if(this.deletedStates[z][K]===null)this.state[z][K]={};else for(const re of Object.keys(this.deletedStates[z][K]))delete this.state[z][K][re];j[K]=this.state[z][K]}L[z]=L[z]||{},s.extend(L[z],j)}if(this.stateChanges={},this.deletedStates={},Object.keys(L).length!==0)for(const z in p)p[z].setFeatureState(L,k)}}class Vr extends s.Evented{constructor(p,k,L){super(),this.id=p,this.dispatcher=L,this.on("data",z=>{z.dataType==="source"&&z.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((z,j,K,re)=>{const ae=new(Ft(j.type))(z,j,K,re);if(ae.id!==z)throw new Error(`Expected Source id to be ${z} instead of ${ae.id}`);return ae})(p,k,L,this),this._tiles={},this._cache=new zr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ri,this._didEmitContent=!1,this._updated=!1}onAdd(p){this.map=p,this._maxTileCacheSize=p?p._maxTileCacheSize:null,this._maxTileCacheZoomLevels=p?p._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(p)}onRemove(p){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(p)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const p in this._tiles){const k=this._tiles[p];if(k.state!=="loaded"&&k.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const p=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,p&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(p,k){return this._source.loadTile(p,k)}_unloadTile(p){if(this._source.unloadTile)return this._source.unloadTile(p,()=>{})}_abortTile(p){this._source.abortTile&&this._source.abortTile(p,()=>{}),this._source.fire(new s.Event("dataabort",{tile:p,coord:p.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(p){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const k in this._tiles){const L=this._tiles[k];L.upload(p),L.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(p=>p.tileID).sort(_i).map(p=>p.key)}getRenderableIds(p){const k=[];for(const L in this._tiles)this._isIdRenderable(L,p)&&k.push(this._tiles[L]);return p?k.sort((L,z)=>{const j=L.tileID,K=z.tileID,re=new s.Point(j.canonical.x,j.canonical.y)._rotate(this.transform.angle),ae=new s.Point(K.canonical.x,K.canonical.y)._rotate(this.transform.angle);return j.overscaledZ-K.overscaledZ||ae.y-re.y||ae.x-re.x}).map(L=>L.tileID.key):k.map(L=>L.tileID).sort(_i).map(L=>L.key)}hasRenderableParent(p){const k=this.findLoadedParent(p,0);return!!k&&this._isIdRenderable(k.tileID.key)}_isIdRenderable(p,k){return this._tiles[p]&&this._tiles[p].hasData()&&!this._coveredTiles[p]&&(k||!this._tiles[p].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(p,k){const L=this._tiles[p];L&&(L.state!=="loading"&&(L.state=k),this._loadTile(L,this._tileLoaded.bind(this,L,p,k)))}_tileLoaded(p,k,L,z){if(z)return p.state="errored",void(z.status!==404?this._source.fire(new s.ErrorEvent(z,{tile:p})):this.update(this.transform,this.terrain));p.timeAdded=s.browser.now(),L==="expired"&&(p.refreshedUponExpiration=!0),this._setTileReloadTimer(k,p),this.getSource().type==="raster-dem"&&p.dem&&this._backfillDEM(p),this._state.initializeTileState(p,this.map?this.map.painter:null),p.aborted||this._source.fire(new s.Event("data",{dataType:"source",tile:p,coord:p.tileID}))}_backfillDEM(p){const k=this.getRenderableIds();for(let z=0;z<k.length;z++){const j=k[z];if(p.neighboringTiles&&p.neighboringTiles[j]){const K=this.getTileByID(j);L(p,K),L(K,p)}}function L(z,j){z.needsHillshadePrepare=!0,z.needsTerrainPrepare=!0;let K=j.tileID.canonical.x-z.tileID.canonical.x;const re=j.tileID.canonical.y-z.tileID.canonical.y,ae=Math.pow(2,z.tileID.canonical.z),ve=j.tileID.key;K===0&&re===0||Math.abs(re)>1||(Math.abs(K)>1&&(Math.abs(K+ae)===1?K+=ae:Math.abs(K-ae)===1&&(K-=ae)),j.dem&&z.dem&&(z.dem.backfillBorder(j.dem,K,re),z.neighboringTiles&&z.neighboringTiles[ve]&&(z.neighboringTiles[ve].backfilled=!0)))}}getTile(p){return this.getTileByID(p.key)}getTileByID(p){return this._tiles[p]}_retainLoadedChildren(p,k,L,z){for(const j in this._tiles){let K=this._tiles[j];if(z[j]||!K.hasData()||K.tileID.overscaledZ<=k||K.tileID.overscaledZ>L)continue;let re=K.tileID;for(;K&&K.tileID.overscaledZ>k+1;){const ve=K.tileID.scaledTo(K.tileID.overscaledZ-1);K=this._tiles[ve.key],K&&K.hasData()&&(re=ve)}let ae=re;for(;ae.overscaledZ>k;)if(ae=ae.scaledTo(ae.overscaledZ-1),p[ae.key]){z[re.key]=re;break}}}findLoadedParent(p,k){if(p.key in this._loadedParentTiles){const L=this._loadedParentTiles[p.key];return L&&L.tileID.overscaledZ>=k?L:null}for(let L=p.overscaledZ-1;L>=k;L--){const z=p.scaledTo(L),j=this._getLoadedTile(z);if(j)return j}}_getLoadedTile(p){const k=this._tiles[p.key];return k&&k.hasData()?k:this._cache.getByKey(p.wrapped().key)}updateCacheSize(p){const k=Math.ceil(p.width/this._source.tileSize)+1,L=Math.ceil(p.height/this._source.tileSize)+1,z=Math.floor(k*L*(this._maxTileCacheZoomLevels===null?s.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),j=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,z):z;this._cache.setMaxSize(j)}handleWrapJump(p){const k=Math.round((p-(this._prevLng===void 0?p:this._prevLng))/360);if(this._prevLng=p,k){const L={};for(const z in this._tiles){const j=this._tiles[z];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+k),L[j.tileID.key]=j}this._tiles=L;for(const z in this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(const z in this._tiles)this._setTileReloadTimer(z,this._tiles[z])}}update(p,k){if(this.transform=p,this.terrain=k,!this._sourceLoaded||this._paused)return;let L;this.updateCacheSize(p),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?L=p.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ee=>new s.OverscaledTileID(Ee.canonical.z,Ee.wrap,Ee.canonical.z,Ee.canonical.x,Ee.canonical.y)):(L=p.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:k}),this._source.hasTile&&(L=L.filter(Ee=>this._source.hasTile(Ee)))):L=[];const z=p.coveringZoomLevel(this._source),j=Math.max(z-Vr.maxOverzooming,this._source.minzoom),K=Math.max(z+Vr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ee={};for(const Te of L)if(Te.canonical.z>this._source.minzoom){const Ze=Te.scaledTo(Te.canonical.z-1);Ee[Ze.key]=Ze;const T=Te.scaledTo(Math.max(this._source.minzoom,Math.min(Te.canonical.z,5)));Ee[T.key]=T}L=L.concat(Object.values(Ee))}const re=L.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,re&&this.fire(new s.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ae=this._updateRetainedTiles(L,z);if(Hi(this._source.type)){const Ee={},Te={},Ze=Object.keys(ae),T=s.browser.now();for(const B of Ze){const W=ae[B],Q=this._tiles[B];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=T)continue;const de=this.findLoadedParent(W,j);de&&(this._addTile(de.tileID),Ee[de.tileID.key]=de.tileID),Te[B]=W}this._retainLoadedChildren(Te,z,K,ae);for(const B in Ee)ae[B]||(this._coveredTiles[B]=!0,ae[B]=Ee[B]);if(k){const B={},W={};for(const Q of L)this._tiles[Q.key].hasData()?B[Q.key]=Q:W[Q.key]=Q;for(const Q in W){const de=W[Q].children(this._source.maxzoom);this._tiles[de[0].key]&&this._tiles[de[1].key]&&this._tiles[de[2].key]&&this._tiles[de[3].key]&&(B[de[0].key]=ae[de[0].key]=de[0],B[de[1].key]=ae[de[1].key]=de[1],B[de[2].key]=ae[de[2].key]=de[2],B[de[3].key]=ae[de[3].key]=de[3],delete W[Q])}for(const Q in W){const de=this.findLoadedParent(W[Q],this._source.minzoom);if(de){B[de.tileID.key]=ae[de.tileID.key]=de.tileID;for(const ke in B)B[ke].isChildOf(de.tileID)&&delete B[ke]}}for(const Q in this._tiles)B[Q]||(this._coveredTiles[Q]=!0)}}for(const Ee in ae)this._tiles[Ee].clearFadeHold();const ve=s.keysDifference(this._tiles,ae);for(const Ee of ve){const Te=this._tiles[Ee];Te.hasSymbolBuckets&&!Te.holdingForFade()?Te.setHoldDuration(this.map._fadeDuration):Te.hasSymbolBuckets&&!Te.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const p in this._tiles)this._tiles[p].holdingForFade()&&this._removeTile(p)}_updateRetainedTiles(p,k){const L={},z={},j=Math.max(k-Vr.maxOverzooming,this._source.minzoom),K=Math.max(k+Vr.maxUnderzooming,this._source.minzoom),re={};for(const ae of p){const ve=this._addTile(ae);L[ae.key]=ae,ve.hasData()||k<this._source.maxzoom&&(re[ae.key]=ae)}this._retainLoadedChildren(re,k,K,L);for(const ae of p){let ve=this._tiles[ae.key];if(ve.hasData())continue;if(k+1>this._source.maxzoom){const Te=ae.children(this._source.maxzoom)[0],Ze=this.getTile(Te);if(Ze&&Ze.hasData()){L[Te.key]=Te;continue}}else{const Te=ae.children(this._source.maxzoom);if(L[Te[0].key]&&L[Te[1].key]&&L[Te[2].key]&&L[Te[3].key])continue}let Ee=ve.wasRequested();for(let Te=ae.overscaledZ-1;Te>=j;--Te){const Ze=ae.scaledTo(Te);if(z[Ze.key])break;if(z[Ze.key]=!0,ve=this.getTile(Ze),!ve&&Ee&&(ve=this._addTile(Ze)),ve){const T=ve.hasData();if((Ee||T)&&(L[Ze.key]=Ze),Ee=ve.wasRequested(),T)break}}}return L}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const p in this._tiles){const k=[];let L,z=this._tiles[p].tileID;for(;z.overscaledZ>0;){if(z.key in this._loadedParentTiles){L=this._loadedParentTiles[z.key];break}k.push(z.key);const j=z.scaledTo(z.overscaledZ-1);if(L=this._getLoadedTile(j),L)break;z=j}for(const j of k)this._loadedParentTiles[j]=L}}_addTile(p){let k=this._tiles[p.key];if(k)return k;k=this._cache.getAndRemove(p),k&&(this._setTileReloadTimer(p.key,k),k.tileID=p,this._state.initializeTileState(k,this.map?this.map.painter:null),this._cacheTimers[p.key]&&(clearTimeout(this._cacheTimers[p.key]),delete this._cacheTimers[p.key],this._setTileReloadTimer(p.key,k)));const L=k;return k||(k=new dr(p,this._source.tileSize*p.overscaleFactor()),this._loadTile(k,this._tileLoaded.bind(this,k,p.key,k.state))),k.uses++,this._tiles[p.key]=k,L||this._source.fire(new s.Event("dataloading",{tile:k,coord:k.tileID,dataType:"source"})),k}_setTileReloadTimer(p,k){p in this._timers&&(clearTimeout(this._timers[p]),delete this._timers[p]);const L=k.getExpiryTimeout();L&&(this._timers[p]=setTimeout(()=>{this._reloadTile(p,"expired"),delete this._timers[p]},L))}_removeTile(p){const k=this._tiles[p];k&&(k.uses--,delete this._tiles[p],this._timers[p]&&(clearTimeout(this._timers[p]),delete this._timers[p]),k.uses>0||(k.hasData()&&k.state!=="reloading"?this._cache.add(k.tileID,k,k.getExpiryTimeout()):(k.aborted=!0,this._abortTile(k),this._unloadTile(k))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const p in this._tiles)this._removeTile(p);this._cache.reset()}tilesIn(p,k,L){const z=[],j=this.transform;if(!j)return z;const K=L?j.getCameraQueryGeometry(p):p,re=p.map(B=>j.pointCoordinate(B,this.terrain)),ae=K.map(B=>j.pointCoordinate(B,this.terrain)),ve=this.getIds();let Ee=1/0,Te=1/0,Ze=-1/0,T=-1/0;for(const B of ae)Ee=Math.min(Ee,B.x),Te=Math.min(Te,B.y),Ze=Math.max(Ze,B.x),T=Math.max(T,B.y);for(let B=0;B<ve.length;B++){const W=this._tiles[ve[B]];if(W.holdingForFade())continue;const Q=W.tileID,de=Math.pow(2,j.zoom-W.tileID.overscaledZ),ke=k*W.queryPadding*s.EXTENT/W.tileSize/de,fe=[Q.getTilePoint(new s.MercatorCoordinate(Ee,Te)),Q.getTilePoint(new s.MercatorCoordinate(Ze,T))];if(fe[0].x-ke<s.EXTENT&&fe[0].y-ke<s.EXTENT&&fe[1].x+ke>=0&&fe[1].y+ke>=0){const Se=re.map(je=>Q.getTilePoint(je)),De=ae.map(je=>Q.getTilePoint(je));z.push({tile:W,tileID:Q,queryGeometry:Se,cameraQueryGeometry:De,scale:de})}}return z}getVisibleCoordinates(p){const k=this.getRenderableIds(p).map(L=>this._tiles[L].tileID);for(const L of k)L.posMatrix=this.transform.calculatePosMatrix(L.toUnwrapped());return k}hasTransition(){if(this._source.hasTransition())return!0;if(Hi(this._source.type)){const p=s.browser.now();for(const k in this._tiles)if(this._tiles[k].fadeEndTime>=p)return!0}return!1}setFeatureState(p,k,L){this._state.updateState(p=p||"_geojsonTileLayer",k,L)}removeFeatureState(p,k,L){this._state.removeFeatureState(p=p||"_geojsonTileLayer",k,L)}getFeatureState(p,k){return this._state.getState(p=p||"_geojsonTileLayer",k)}setDependencies(p,k,L){const z=this._tiles[p];z&&z.setDependencies(k,L)}reloadTilesForDependencies(p,k){for(const L in this._tiles)this._tiles[L].hasDependency(p,k)&&this._reloadTile(L,"reloading");this._cache.filter(L=>!L.hasDependency(p,k))}}function _i(R,p){const k=Math.abs(2*R.wrap)-+(R.wrap<0),L=Math.abs(2*p.wrap)-+(p.wrap<0);return R.overscaledZ-p.overscaledZ||L-k||p.canonical.y-R.canonical.y||p.canonical.x-R.canonical.x}function Hi(R){return R==="raster"||R==="image"||R==="video"}Vr.maxOverzooming=10,Vr.maxUnderzooming=3;const Nr="mapboxgl_preloaded_worker_pool";class ji{constructor(){this.active={}}acquire(p){if(!this.workers)for(this.workers=[];this.workers.length<ji.workerCount;)this.workers.push(new Worker(s.config.WORKER_URL));return this.active[p]=!0,this.workers.slice()}release(p){delete this.active[p],this.numActive()===0&&(this.workers.forEach(k=>{k.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Nr]}numActive(){return Object.keys(this.active).length}}const Ui=Math.floor(s.browser.hardwareConcurrency/2);let an;function Gi(){return an||(an=new ji),an}ji.workerCount=s.isSafari(globalThis)?Math.max(Math.min(Ui,3),1):1;class Or{constructor(p,k){this.reset(p,k)}reset(p,k){this.points=p||[],this._distances=[0];for(let L=1;L<this.points.length;L++)this._distances[L]=this._distances[L-1]+this.points[L].dist(this.points[L-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(k||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(p){if(this.points.length===1)return this.points[0];p=s.clamp(p,0,1);let k=1,L=this._distances[k];const z=p*this.paddedLength+this.padding;for(;L<z&&k<this._distances.length;)L=this._distances[++k];const j=k-1,K=this._distances[j],re=L-K,ae=re>0?(z-K)/re:0;return this.points[j].mult(1-ae).add(this.points[k].mult(ae))}}function Br(R,p){let k=!0;return R==="always"||R!=="never"&&p!=="never"||(k=!1),k}class Ni{constructor(p,k,L){const z=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(p/L),this.yCellCount=Math.ceil(k/L);for(let K=0;K<this.xCellCount*this.yCellCount;K++)z.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=p,this.height=k,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/k,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(p,k,L,z,j){this._forEachCell(k,L,z,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(p),this.bboxes.push(k),this.bboxes.push(L),this.bboxes.push(z),this.bboxes.push(j)}insertCircle(p,k,L,z){this._forEachCell(k-z,L-z,k+z,L+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(p),this.circles.push(k),this.circles.push(L),this.circles.push(z)}_insertBoxCell(p,k,L,z,j,K){this.boxCells[j].push(K)}_insertCircleCell(p,k,L,z,j,K){this.circleCells[j].push(K)}_query(p,k,L,z,j,K,re){if(L<0||p>this.width||z<0||k>this.height)return[];const ae=[];if(p<=0&&k<=0&&this.width<=L&&this.height<=z){if(j)return[{key:null,x1:p,y1:k,x2:L,y2:z}];for(let ve=0;ve<this.boxKeys.length;ve++)ae.push({key:this.boxKeys[ve],x1:this.bboxes[4*ve],y1:this.bboxes[4*ve+1],x2:this.bboxes[4*ve+2],y2:this.bboxes[4*ve+3]});for(let ve=0;ve<this.circleKeys.length;ve++){const Ee=this.circles[3*ve],Te=this.circles[3*ve+1],Ze=this.circles[3*ve+2];ae.push({key:this.circleKeys[ve],x1:Ee-Ze,y1:Te-Ze,x2:Ee+Ze,y2:Te+Ze})}}else this._forEachCell(p,k,L,z,this._queryCell,ae,{hitTest:j,overlapMode:K,seenUids:{box:{},circle:{}}},re);return ae}query(p,k,L,z){return this._query(p,k,L,z,!1,null)}hitTest(p,k,L,z,j,K){return this._query(p,k,L,z,!0,j,K).length>0}hitTestCircle(p,k,L,z,j){const K=p-L,re=p+L,ae=k-L,ve=k+L;if(re<0||K>this.width||ve<0||ae>this.height)return!1;const Ee=[];return this._forEachCell(K,ae,re,ve,this._queryCellCircle,Ee,{hitTest:!0,overlapMode:z,circle:{x:p,y:k,radius:L},seenUids:{box:{},circle:{}}},j),Ee.length>0}_queryCell(p,k,L,z,j,K,re,ae){const{seenUids:ve,hitTest:Ee,overlapMode:Te}=re,Ze=this.boxCells[j];if(Ze!==null){const B=this.bboxes;for(const W of Ze)if(!ve.box[W]){ve.box[W]=!0;const Q=4*W,de=this.boxKeys[W];if(p<=B[Q+2]&&k<=B[Q+3]&&L>=B[Q+0]&&z>=B[Q+1]&&(!ae||ae(de))&&(!Ee||!Br(Te,de.overlapMode))&&(K.push({key:de,x1:B[Q],y1:B[Q+1],x2:B[Q+2],y2:B[Q+3]}),Ee))return!0}}const T=this.circleCells[j];if(T!==null){const B=this.circles;for(const W of T)if(!ve.circle[W]){ve.circle[W]=!0;const Q=3*W,de=this.circleKeys[W];if(this._circleAndRectCollide(B[Q],B[Q+1],B[Q+2],p,k,L,z)&&(!ae||ae(de))&&(!Ee||!Br(Te,de.overlapMode))){const ke=B[Q],fe=B[Q+1],Se=B[Q+2];if(K.push({key:de,x1:ke-Se,y1:fe-Se,x2:ke+Se,y2:fe+Se}),Ee)return!0}}}return!1}_queryCellCircle(p,k,L,z,j,K,re,ae){const{circle:ve,seenUids:Ee,overlapMode:Te}=re,Ze=this.boxCells[j];if(Ze!==null){const B=this.bboxes;for(const W of Ze)if(!Ee.box[W]){Ee.box[W]=!0;const Q=4*W,de=this.boxKeys[W];if(this._circleAndRectCollide(ve.x,ve.y,ve.radius,B[Q+0],B[Q+1],B[Q+2],B[Q+3])&&(!ae||ae(de))&&!Br(Te,de.overlapMode))return K.push(!0),!0}}const T=this.circleCells[j];if(T!==null){const B=this.circles;for(const W of T)if(!Ee.circle[W]){Ee.circle[W]=!0;const Q=3*W,de=this.circleKeys[W];if(this._circlesCollide(B[Q],B[Q+1],B[Q+2],ve.x,ve.y,ve.radius)&&(!ae||ae(de))&&!Br(Te,de.overlapMode))return K.push(!0),!0}}}_forEachCell(p,k,L,z,j,K,re,ae){const ve=this._convertToXCellCoord(p),Ee=this._convertToYCellCoord(k),Te=this._convertToXCellCoord(L),Ze=this._convertToYCellCoord(z);for(let T=ve;T<=Te;T++)for(let B=Ee;B<=Ze;B++)if(j.call(this,p,k,L,z,this.xCellCount*B+T,K,re,ae))return}_convertToXCellCoord(p){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(p*this.xScale)))}_convertToYCellCoord(p){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(p*this.yScale)))}_circlesCollide(p,k,L,z,j,K){const re=z-p,ae=j-k,ve=L+K;return ve*ve>re*re+ae*ae}_circleAndRectCollide(p,k,L,z,j,K,re){const ae=(K-z)/2,ve=Math.abs(p-(z+ae));if(ve>ae+L)return!1;const Ee=(re-j)/2,Te=Math.abs(k-(j+Ee));if(Te>Ee+L)return!1;if(ve<=ae||Te<=Ee)return!0;const Ze=ve-ae,T=Te-Ee;return Ze*Ze+T*T<=L*L}}function qi(R,p,k,L,z){const j=s.create();return p?(s.scale(j,j,[1/z,1/z,1]),k||s.rotateZ(j,j,L.angle)):s.multiply(j,L.labelPlaneMatrix,R),j}function kt(R,p,k,L,z){if(p){const j=s.clone(R);return s.scale(j,j,[z,z,1]),k||s.rotateZ(j,j,-L.angle),j}return L.glCoordMatrix}function fr(R,p,k){let L;k?(L=[R.x,R.y,k(R.x,R.y),1],s.transformMat4(L,L,p)):(L=[R.x,R.y,0,1],Lt(L,L,p));const z=L[3];return{point:new s.Point(L[0]/z,L[1]/z),signedDistanceFromCamera:z}}function Qr(R,p){return .5+R/p*.5}function Ei(R,p){const k=R[0]/R[3],L=R[1]/R[3];return k>=-p[0]&&k<=p[0]&&L>=-p[1]&&L<=p[1]}function ki(R,p,k,L,z,j,K,re,ae,ve){const Ee=L?R.textSizeData:R.iconSizeData,Te=s.evaluateSizeForZoom(Ee,k.transform.zoom),Ze=[256/k.width*2+1,256/k.height*2+1],T=L?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;T.clear();const B=R.lineVertexArray,W=L?R.text.placedSymbolArray:R.icon.placedSymbolArray,Q=k.transform.width/k.transform.height;let de=!1;for(let ke=0;ke<W.length;ke++){const fe=W.get(ke);if(fe.hidden||fe.writingMode===s.WritingMode.vertical&&!de){lt(fe.numGlyphs,T);continue}let Se;if(de=!1,ve?(Se=[fe.anchorX,fe.anchorY,ve(fe.anchorX,fe.anchorY),1],s.transformMat4(Se,Se,p)):(Se=[fe.anchorX,fe.anchorY,0,1],Lt(Se,Se,p)),!Ei(Se,Ze)){lt(fe.numGlyphs,T);continue}const De=Qr(k.transform.cameraToCenterDistance,Se[3]),je=s.evaluateSizeForFeature(Ee,Te,fe),ut=K?je/De:je*De,Dt=new s.Point(fe.anchorX,fe.anchorY),Tt=fr(Dt,z,ve).point,Ct={projections:{},offsets:{}},br=Rn(fe,ut,!1,re,p,z,j,R.glyphOffsetArray,B,T,Tt,Dt,Ct,Q,ae,ve);de=br.useVertical,(br.notEnoughRoom||de||br.needsFlipping&&Rn(fe,ut,!0,re,p,z,j,R.glyphOffsetArray,B,T,Tt,Dt,Ct,Q,ae,ve).notEnoughRoom)&&lt(fe.numGlyphs,T)}L?R.text.dynamicLayoutVertexBuffer.updateData(T):R.icon.dynamicLayoutVertexBuffer.updateData(T)}function Zn(R,p,k,L,z,j,K,re,ae,ve,Ee,Te,Ze){const T=re.glyphStartIndex+re.numGlyphs,B=re.lineStartIndex,W=re.lineStartIndex+re.lineLength,Q=p.getoffsetX(re.glyphStartIndex),de=p.getoffsetX(T-1),ke=Ne(R*Q,k,L,z,j,K,re.segment,B,W,ae,ve,Ee,Te,Ze);if(!ke)return null;const fe=Ne(R*de,k,L,z,j,K,re.segment,B,W,ae,ve,Ee,Te,Ze);return fe?{first:ke,last:fe}:null}function un(R,p,k,L){return R===s.WritingMode.horizontal&&Math.abs(k.y-p.y)>Math.abs(k.x-p.x)*L?{useVertical:!0}:(R===s.WritingMode.vertical?p.y<k.y:p.x>k.x)?{needsFlipping:!0}:null}function Rn(R,p,k,L,z,j,K,re,ae,ve,Ee,Te,Ze,T,B,W){const Q=p/24,de=R.lineOffsetX*Q,ke=R.lineOffsetY*Q;let fe;if(R.numGlyphs>1){const Se=R.glyphStartIndex+R.numGlyphs,De=R.lineStartIndex,je=R.lineStartIndex+R.lineLength,ut=Zn(Q,re,de,ke,k,Ee,Te,R,ae,j,Ze,B,W);if(!ut)return{notEnoughRoom:!0};const Dt=fr(ut.first.point,K,W).point,Tt=fr(ut.last.point,K,W).point;if(L&&!k){const Ct=un(R.writingMode,Dt,Tt,T);if(Ct)return Ct}fe=[ut.first];for(let Ct=R.glyphStartIndex+1;Ct<Se-1;Ct++)fe.push(Ne(Q*re.getoffsetX(Ct),de,ke,k,Ee,Te,R.segment,De,je,ae,j,Ze,B,W));fe.push(ut.last)}else{if(L&&!k){const De=fr(Te,z,W).point,je=R.lineStartIndex+R.segment+1,ut=new s.Point(ae.getx(je),ae.gety(je)),Dt=fr(ut,z,W),Tt=Dt.signedDistanceFromCamera>0?Dt.point:Xn(Te,ut,De,1,z,W),Ct=un(R.writingMode,De,Tt,T);if(Ct)return Ct}const Se=Ne(Q*re.getoffsetX(R.glyphStartIndex),de,ke,k,Ee,Te,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,ae,j,Ze,B,W);if(!Se)return{notEnoughRoom:!0};fe=[Se]}for(const Se of fe)s.addDynamicAttributes(ve,Se.point,Se.angle);return{}}function Xn(R,p,k,L,z,j){const K=fr(R.add(R.sub(p)._unit()),z,j).point,re=k.sub(K);return k.add(re._mult(L/re.mag()))}function so(R,p){const{projectionCache:k,lineVertexArray:L,labelPlaneMatrix:z,tileAnchorPoint:j,distanceFromAnchor:K,getElevation:re,previousVertex:ae,direction:ve,absOffsetX:Ee}=p;if(k.projections[R])return k.projections[R];const Te=new s.Point(L.getx(R),L.gety(R)),Ze=fr(Te,z,re);if(Ze.signedDistanceFromCamera>0)return k.projections[R]=Ze.point,Ze.point;const T=R-ve;return Xn(K===0?j:new s.Point(L.getx(T),L.gety(T)),Te,ae,Ee-K+1,z,re)}function on(R,p,k){return R._unit()._perp()._mult(p*k)}function gt(R,p,k,L,z,j,K,re){const{projectionCache:ae,direction:ve}=re;if(ae.offsets[R])return ae.offsets[R];const Ee=k.add(p);if(R+ve<L||R+ve>=z)return ae.offsets[R]=Ee,Ee;const Te=so(R+ve,re),Ze=on(Te.sub(k),K,ve),T=k.add(Ze),B=Te.add(Ze);return ae.offsets[R]=s.findLineIntersection(j,Ee,T,B)||Ee,ae.offsets[R]}function Ne(R,p,k,L,z,j,K,re,ae,ve,Ee,Te,Ze,T){const B=L?R-p:R+p;let W=B>0?1:-1,Q=0;L&&(W*=-1,Q=Math.PI),W<0&&(Q+=Math.PI);let de,ke,fe=W>0?re+K:re+K+1,Se=z,De=z,je=0,ut=0;const Dt=Math.abs(B),Tt=[];let Ct;for(;je+ut<=Dt;){if(fe+=W,fe<re||fe>=ae)return null;je+=ut,De=Se,ke=de;const _t={projectionCache:Te,lineVertexArray:ve,labelPlaneMatrix:Ee,tileAnchorPoint:j,distanceFromAnchor:je,getElevation:T,previousVertex:De,direction:W,absOffsetX:Dt};if(Se=so(fe,_t),k===0)Tt.push(De),Ct=Se.sub(De);else{let jt;const hr=Se.sub(De);jt=hr.mag()===0?on(so(fe+W,_t).sub(Se),k,W):on(hr,k,W),ke||(ke=De.add(jt)),de=gt(fe,jt,Se,re,ae,ke,k,_t),Tt.push(ke),Ct=de.sub(ke)}ut=Ct.mag()}const br=Ct._mult((Dt-je)/ut)._add(ke||De),kr=Q+Math.atan2(Se.y-De.y,Se.x-De.x);return Tt.push(br),{point:br,angle:Ze?kr:0,path:Tt}}const Fe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function lt(R,p){for(let k=0;k<R;k++){const L=p.length;p.resize(L+4),p.float32.set(Fe,3*L)}}function Lt(R,p,k){const L=p[0],z=p[1];return R[0]=k[0]*L+k[4]*z+k[12],R[1]=k[1]*L+k[5]*z+k[13],R[3]=k[3]*L+k[7]*z+k[15],R}const ft=100;class pe{constructor(p,k=new Ni(p.width+200,p.height+200,25),L=new Ni(p.width+200,p.height+200,25)){this.transform=p,this.grid=k,this.ignoredGrid=L,this.pitchfactor=Math.cos(p._pitch)*p.cameraToCenterDistance,this.screenRightBoundary=p.width+ft,this.screenBottomBoundary=p.height+ft,this.gridRightBoundary=p.width+200,this.gridBottomBoundary=p.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(p,k,L,z,j,K){const re=this.projectAndGetPerspectiveRatio(z,p.anchorPointX,p.anchorPointY,K),ae=L*re.perspectiveRatio,ve=p.x1*ae+re.point.x,Ee=p.y1*ae+re.point.y,Te=p.x2*ae+re.point.x,Ze=p.y2*ae+re.point.y;return!this.isInsideGrid(ve,Ee,Te,Ze)||k!=="always"&&this.grid.hitTest(ve,Ee,Te,Ze,k,j)||re.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ve,Ee,Te,Ze],offscreen:this.isOffscreen(ve,Ee,Te,Ze)}}placeCollisionCircles(p,k,L,z,j,K,re,ae,ve,Ee,Te,Ze,T,B){const W=[],Q=new s.Point(k.anchorX,k.anchorY),de=fr(Q,K,B),ke=Qr(this.transform.cameraToCenterDistance,de.signedDistanceFromCamera),fe=(Ee?j/ke:j*ke)/s.ONE_EM,Se=fr(Q,re,B).point,De=Zn(fe,z,k.lineOffsetX*fe,k.lineOffsetY*fe,!1,Se,Q,k,L,re,{projections:{},offsets:{}},!1,B);let je=!1,ut=!1,Dt=!0;if(De){const Tt=.5*Ze*ke+T,Ct=new s.Point(-100,-100),br=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),kr=new Or,_t=De.first,jt=De.last;let hr=[];for(let qr=_t.path.length-1;qr>=1;qr--)hr.push(_t.path[qr]);for(let qr=1;qr<jt.path.length;qr++)hr.push(jt.path[qr]);const Ur=2.5*Tt;if(ae){const qr=hr.map(Xr=>fr(Xr,ae,B));hr=qr.some(Xr=>Xr.signedDistanceFromCamera<=0)?[]:qr.map(Xr=>Xr.point)}let Pr=[];if(hr.length>0){const qr=hr[0].clone(),Xr=hr[0].clone();for(let zi=1;zi<hr.length;zi++)qr.x=Math.min(qr.x,hr[zi].x),qr.y=Math.min(qr.y,hr[zi].y),Xr.x=Math.max(Xr.x,hr[zi].x),Xr.y=Math.max(Xr.y,hr[zi].y);Pr=qr.x>=Ct.x&&Xr.x<=br.x&&qr.y>=Ct.y&&Xr.y<=br.y?[hr]:Xr.x<Ct.x||qr.x>br.x||Xr.y<Ct.y||qr.y>br.y?[]:s.clipLine([hr],Ct.x,Ct.y,br.x,br.y)}for(const qr of Pr){kr.reset(qr,.25*Tt);let Xr=0;Xr=kr.length<=.5*Tt?1:Math.ceil(kr.paddedLength/Ur)+1;for(let zi=0;zi<Xr;zi++){const ii=zi/Math.max(Xr-1,1),Pn=kr.lerp(ii),In=Pn.x+ft,hn=Pn.y+ft;W.push(In,hn,Tt,0);const vn=In-Tt,Jn=hn-Tt,Gn=In+Tt,bn=hn+Tt;if(Dt=Dt&&this.isOffscreen(vn,Jn,Gn,bn),ut=ut||this.isInsideGrid(vn,Jn,Gn,bn),p!=="always"&&this.grid.hitTestCircle(In,hn,Tt,p,Te)&&(je=!0,!ve))return{circles:[],offscreen:!1,collisionDetected:je}}}}return{circles:!ve&&je||!ut||ke<this.perspectiveRatioCutoff?[]:W,offscreen:Dt,collisionDetected:je}}queryRenderedSymbols(p){if(p.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const k=[];let L=1/0,z=1/0,j=-1/0,K=-1/0;for(const Ee of p){const Te=new s.Point(Ee.x+ft,Ee.y+ft);L=Math.min(L,Te.x),z=Math.min(z,Te.y),j=Math.max(j,Te.x),K=Math.max(K,Te.y),k.push(Te)}const re=this.grid.query(L,z,j,K).concat(this.ignoredGrid.query(L,z,j,K)),ae={},ve={};for(const Ee of re){const Te=Ee.key;if(ae[Te.bucketInstanceId]===void 0&&(ae[Te.bucketInstanceId]={}),ae[Te.bucketInstanceId][Te.featureIndex])continue;const Ze=[new s.Point(Ee.x1,Ee.y1),new s.Point(Ee.x2,Ee.y1),new s.Point(Ee.x2,Ee.y2),new s.Point(Ee.x1,Ee.y2)];s.polygonIntersectsPolygon(k,Ze)&&(ae[Te.bucketInstanceId][Te.featureIndex]=!0,ve[Te.bucketInstanceId]===void 0&&(ve[Te.bucketInstanceId]=[]),ve[Te.bucketInstanceId].push(Te.featureIndex))}return ve}insertCollisionBox(p,k,L,z,j,K){(L?this.ignoredGrid:this.grid).insert({bucketInstanceId:z,featureIndex:j,collisionGroupID:K,overlapMode:k},p[0],p[1],p[2],p[3])}insertCollisionCircles(p,k,L,z,j,K){const re=L?this.ignoredGrid:this.grid,ae={bucketInstanceId:z,featureIndex:j,collisionGroupID:K,overlapMode:k};for(let ve=0;ve<p.length;ve+=4)re.insertCircle(ae,p[ve],p[ve+1],p[ve+2])}projectAndGetPerspectiveRatio(p,k,L,z){let j;return z?(j=[k,L,z(k,L),1],s.transformMat4(j,j,p)):(j=[k,L,0,1],Lt(j,j,p)),{point:new s.Point((j[0]/j[3]+1)/2*this.transform.width+ft,(-j[1]/j[3]+1)/2*this.transform.height+ft),perspectiveRatio:.5+this.transform.cameraToCenterDistance/j[3]*.5}}isOffscreen(p,k,L,z){return L<ft||p>=this.screenRightBoundary||z<ft||k>this.screenBottomBoundary}isInsideGrid(p,k,L,z){return L>=0&&p<this.gridRightBoundary&&z>=0&&k<this.gridBottomBoundary}getViewportMatrix(){const p=s.identity([]);return s.translate(p,p,[-100,-100,0]),p}}function Qt(R,p,k){return p*(s.EXTENT/(R.tileSize*Math.pow(2,k-R.tileID.overscaledZ)))}class Vt{constructor(p,k,L,z){this.opacity=p?Math.max(0,Math.min(1,p.opacity+(p.placed?k:-k))):z&&L?1:0,this.placed=L}isHidden(){return this.opacity===0&&!this.placed}}class lr{constructor(p,k,L,z,j){this.text=new Vt(p?p.text:null,k,L,j),this.icon=new Vt(p?p.icon:null,k,z,j)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pt{constructor(p,k,L){this.text=p,this.icon=k,this.skipFade=L}}class jr{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class $r{constructor(p,k,L,z,j){this.bucketInstanceId=p,this.featureIndex=k,this.sourceLayerIndex=L,this.bucketIndex=z,this.tileID=j}}class $i{constructor(p){this.crossSourceCollisions=p,this.maxGroupID=0,this.collisionGroups={}}get(p){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[p]){const k=++this.maxGroupID;this.collisionGroups[p]={ID:k,predicate:L=>L.collisionGroupID===k}}return this.collisionGroups[p]}}function Qi(R,p,k,L,z){const{horizontalAlign:j,verticalAlign:K}=s.getAnchorAlignment(R);return new s.Point(-(j-.5)*p+L[0]*z,-(K-.5)*k+L[1]*z)}function Ci(R,p,k,L,z,j){const{x1:K,x2:re,y1:ae,y2:ve,anchorPointX:Ee,anchorPointY:Te}=R,Ze=new s.Point(p,k);return L&&Ze._rotate(z?j:-j),{x1:K+Ze.x,y1:ae+Ze.y,x2:re+Ze.x,y2:ve+Ze.y,anchorPointX:Ee,anchorPointY:Te}}class Et{constructor(p,k,L,z,j){this.transform=p.clone(),this.terrain=k,this.collisionIndex=new pe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=L,this.retainedQueryData={},this.collisionGroups=new $i(z),this.collisionCircleArrays={},this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(p,k,L,z){const j=L.getBucket(k),K=L.latestFeatureIndex;if(!j||!K||k.id!==j.layerIds[0])return;const re=L.collisionBoxArray,ae=j.layers[0].layout,ve=Math.pow(2,this.transform.zoom-L.tileID.overscaledZ),Ee=L.tileSize/s.EXTENT,Te=this.transform.calculatePosMatrix(L.tileID.toUnwrapped()),Ze=ae.get("text-pitch-alignment")==="map",T=ae.get("text-rotation-alignment")==="map",B=Qt(L,1,this.transform.zoom),W=qi(Te,Ze,T,this.transform,B);let Q=null;if(Ze){const ke=kt(Te,Ze,T,this.transform,B);Q=s.multiply([],this.transform.labelPlaneMatrix,ke)}this.retainedQueryData[j.bucketInstanceId]=new $r(j.bucketInstanceId,K,j.sourceLayerIndex,j.index,L.tileID);const de={bucket:j,layout:ae,posMatrix:Te,textLabelPlaneMatrix:W,labelToScreenMatrix:Q,scale:ve,textPixelRatio:Ee,holdingForFade:L.holdingForFade(),collisionBoxArray:re,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(j.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(j.sourceID)};if(z)for(const ke of j.sortKeyRanges){const{sortKey:fe,symbolInstanceStart:Se,symbolInstanceEnd:De}=ke;p.push({sortKey:fe,symbolInstanceStart:Se,symbolInstanceEnd:De,parameters:de})}else p.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:de})}attemptAnchorPlacement(p,k,L,z,j,K,re,ae,ve,Ee,Te,Ze,T,B,W,Q){const de=s.TextAnchorEnum[p.textAnchor],ke=[p.textOffset0,p.textOffset1],fe=Qi(de,L,z,ke,j),Se=this.collisionIndex.placeCollisionBox(Ci(k,fe.x,fe.y,K,re,this.transform.angle),Te,ae,ve,Ee.predicate,Q);if((!W||this.collisionIndex.placeCollisionBox(Ci(W,fe.x,fe.y,K,re,this.transform.angle),Te,ae,ve,Ee.predicate,Q).box.length!==0)&&Se.box.length>0){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ze.crossTileID]&&this.prevPlacement.placements[Ze.crossTileID]&&this.prevPlacement.placements[Ze.crossTileID].text&&(De=this.prevPlacement.variableOffsets[Ze.crossTileID].anchor),Ze.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ze.crossTileID]={textOffset:ke,width:L,height:z,anchor:de,textBoxScale:j,prevAnchor:De},this.markUsedJustification(T,de,Ze,B),T.allowVerticalPlacement&&(this.markUsedOrientation(T,B,Ze),this.placedOrientations[Ze.crossTileID]=B),{shift:fe,placedGlyphBoxes:Se}}}placeLayerBucketPart(p,k,L){const{bucket:z,layout:j,posMatrix:K,textLabelPlaneMatrix:re,labelToScreenMatrix:ae,textPixelRatio:ve,holdingForFade:Ee,collisionBoxArray:Te,partiallyEvaluatedTextSize:Ze,collisionGroup:T}=p.parameters,B=j.get("text-optional"),W=j.get("icon-optional"),Q=s.getOverlapMode(j,"text-overlap","text-allow-overlap"),de=Q==="always",ke=s.getOverlapMode(j,"icon-overlap","icon-allow-overlap"),fe=ke==="always",Se=j.get("text-rotation-alignment")==="map",De=j.get("text-pitch-alignment")==="map",je=j.get("icon-text-fit")!=="none",ut=j.get("symbol-z-order")==="viewport-y",Dt=de&&(fe||!z.hasIconData()||W),Tt=fe&&(de||!z.hasTextData()||B);!z.collisionArrays&&Te&&z.deserializeCollisionBoxes(Te);const Ct=this.retainedQueryData[z.bucketInstanceId].tileID,br=this.terrain?(_t,jt)=>this.terrain.getElevation(Ct,_t,jt):null,kr=(_t,jt)=>{var hr,Ur;if(k[_t.crossTileID])return;if(Ee)return void(this.placements[_t.crossTileID]=new pt(!1,!1,!1));let Pr=!1,qr=!1,Xr=!0,zi=null,ii={box:null,offscreen:null},Pn={box:null,offscreen:null},In=null,hn=null,vn=null,Jn=0,Gn=0,bn=0;jt.textFeatureIndex?Jn=jt.textFeatureIndex:_t.useRuntimeCollisionCircles&&(Jn=_t.featureIndex),jt.verticalTextFeatureIndex&&(Gn=jt.verticalTextFeatureIndex);const Vo=jt.textBox;if(Vo){const uo=Qn=>{let zn=s.WritingMode.horizontal;if(z.allowVerticalPlacement&&!Qn&&this.prevPlacement){const yo=this.prevPlacement.placedOrientations[_t.crossTileID];yo&&(this.placedOrientations[_t.crossTileID]=yo,zn=yo,this.markUsedOrientation(z,zn,_t))}return zn},Cn=(Qn,zn)=>{if(z.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const yo of z.writingModes)if(yo===s.WritingMode.vertical?(ii=zn(),Pn=ii):ii=Qn(),ii&&ii.box&&ii.box.length)break}else ii=Qn()},Po=_t.textAnchorOffsetStartIndex,ba=_t.textAnchorOffsetEndIndex;if(ba===Po){const Qn=(zn,yo)=>{const eo=this.collisionIndex.placeCollisionBox(zn,Q,ve,K,T.predicate,br);return eo&&eo.box&&eo.box.length&&(this.markUsedOrientation(z,yo,_t),this.placedOrientations[_t.crossTileID]=yo),eo};Cn(()=>Qn(Vo,s.WritingMode.horizontal),()=>{const zn=jt.verticalTextBox;return z.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&zn?Qn(zn,s.WritingMode.vertical):{box:null,offscreen:null}}),uo(ii&&ii.box&&ii.box.length)}else{let Qn=s.TextAnchorEnum[(Ur=(hr=this.prevPlacement)===null||hr===void 0?void 0:hr.variableOffsets[_t.crossTileID])===null||Ur===void 0?void 0:Ur.anchor];const zn=(eo,wa,Co)=>{const Ba=eo.x2-eo.x1,Nl=eo.y2-eo.y1,ms=_t.textBoxScale,cl=je&&ke==="never"?wa:null;let Io={box:[],offscreen:!1},Ho=Q==="never"?1:2,rc="never";Qn&&Ho++;for(let Ls=0;Ls<Ho;Ls++){for(let co=Po;co<ba;co++){const Ts=z.textAnchorOffsets.get(co);if(Qn&&Ts.textAnchor!==Qn)continue;const Rl=this.attemptAnchorPlacement(Ts,eo,Ba,Nl,ms,Se,De,ve,K,T,rc,_t,z,Co,cl,br);if(Rl&&(Io=Rl.placedGlyphBoxes,Io&&Io.box&&Io.box.length))return Pr=!0,zi=Rl.shift,Io}Qn?Qn=null:rc=Q}return Io};Cn(()=>zn(Vo,jt.iconBox,s.WritingMode.horizontal),()=>{const eo=jt.verticalTextBox;return z.allowVerticalPlacement&&!(ii&&ii.box&&ii.box.length)&&_t.numVerticalGlyphVertices>0&&eo?zn(eo,jt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),ii&&(Pr=ii.box,Xr=ii.offscreen);const yo=uo(ii&&ii.box);if(!Pr&&this.prevPlacement){const eo=this.prevPlacement.variableOffsets[_t.crossTileID];eo&&(this.variableOffsets[_t.crossTileID]=eo,this.markUsedJustification(z,eo.anchor,_t,yo))}}}if(In=ii,Pr=In&&In.box&&In.box.length>0,Xr=In&&In.offscreen,_t.useRuntimeCollisionCircles){const uo=z.text.placedSymbolArray.get(_t.centerJustifiedTextSymbolIndex),Cn=s.evaluateSizeForFeature(z.textSizeData,Ze,uo),Po=j.get("text-padding");hn=this.collisionIndex.placeCollisionCircles(Q,uo,z.lineVertexArray,z.glyphOffsetArray,Cn,K,re,ae,L,De,T.predicate,_t.collisionCircleDiameter,Po,br),hn.circles.length&&hn.collisionDetected&&!L&&s.warnOnce("Collisions detected, but collision boxes are not shown"),Pr=de||hn.circles.length>0&&!hn.collisionDetected,Xr=Xr&&hn.offscreen}if(jt.iconFeatureIndex&&(bn=jt.iconFeatureIndex),jt.iconBox){const uo=Cn=>{const Po=je&&zi?Ci(Cn,zi.x,zi.y,Se,De,this.transform.angle):Cn;return this.collisionIndex.placeCollisionBox(Po,ke,ve,K,T.predicate,br)};Pn&&Pn.box&&Pn.box.length&&jt.verticalIconBox?(vn=uo(jt.verticalIconBox),qr=vn.box.length>0):(vn=uo(jt.iconBox),qr=vn.box.length>0),Xr=Xr&&vn.offscreen}const mn=B||_t.numHorizontalGlyphVertices===0&&_t.numVerticalGlyphVertices===0,Eo=W||_t.numIconVertices===0;if(mn||Eo?Eo?mn||(qr=qr&&Pr):Pr=qr&&Pr:qr=Pr=qr&&Pr,Pr&&In&&In.box&&this.collisionIndex.insertCollisionBox(In.box,Q,j.get("text-ignore-placement"),z.bucketInstanceId,Pn&&Pn.box&&Gn?Gn:Jn,T.ID),qr&&vn&&this.collisionIndex.insertCollisionBox(vn.box,ke,j.get("icon-ignore-placement"),z.bucketInstanceId,bn,T.ID),hn&&(Pr&&this.collisionIndex.insertCollisionCircles(hn.circles,Q,j.get("text-ignore-placement"),z.bucketInstanceId,Jn,T.ID),L)){const uo=z.bucketInstanceId;let Cn=this.collisionCircleArrays[uo];Cn===void 0&&(Cn=this.collisionCircleArrays[uo]=new jr);for(let Po=0;Po<hn.circles.length;Po+=4)Cn.circles.push(hn.circles[Po+0]),Cn.circles.push(hn.circles[Po+1]),Cn.circles.push(hn.circles[Po+2]),Cn.circles.push(hn.collisionDetected?1:0)}if(_t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(z.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_t.crossTileID]=new pt(Pr||Dt,qr||Tt,Xr||z.justReloaded),k[_t.crossTileID]=!0};if(ut){if(p.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _t=z.getSortedSymbolIndexes(this.transform.angle);for(let jt=_t.length-1;jt>=0;--jt){const hr=_t[jt];kr(z.symbolInstances.get(hr),z.collisionArrays[hr])}}else for(let _t=p.symbolInstanceStart;_t<p.symbolInstanceEnd;_t++)kr(z.symbolInstances.get(_t),z.collisionArrays[_t]);if(L&&z.bucketInstanceId in this.collisionCircleArrays){const _t=this.collisionCircleArrays[z.bucketInstanceId];s.invert(_t.invProjMatrix,K),_t.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(p,k,L,z){let j;j=z===s.WritingMode.vertical?L.verticalPlacedTextSymbolIndex:{left:L.leftJustifiedTextSymbolIndex,center:L.centerJustifiedTextSymbolIndex,right:L.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(k)];const K=[L.leftJustifiedTextSymbolIndex,L.centerJustifiedTextSymbolIndex,L.rightJustifiedTextSymbolIndex,L.verticalPlacedTextSymbolIndex];for(const re of K)re>=0&&(p.text.placedSymbolArray.get(re).crossTileID=j>=0&&re!==j?0:L.crossTileID)}markUsedOrientation(p,k,L){const z=k===s.WritingMode.horizontal||k===s.WritingMode.horizontalOnly?k:0,j=k===s.WritingMode.vertical?k:0,K=[L.leftJustifiedTextSymbolIndex,L.centerJustifiedTextSymbolIndex,L.rightJustifiedTextSymbolIndex];for(const re of K)p.text.placedSymbolArray.get(re).placedOrientation=z;L.verticalPlacedTextSymbolIndex&&(p.text.placedSymbolArray.get(L.verticalPlacedTextSymbolIndex).placedOrientation=j)}commit(p){this.commitTime=p,this.zoomAtLastRecencyCheck=this.transform.zoom;const k=this.prevPlacement;let L=!1;this.prevZoomAdjustment=k?k.zoomAdjustment(this.transform.zoom):0;const z=k?k.symbolFadeChange(p):1,j=k?k.opacities:{},K=k?k.variableOffsets:{},re=k?k.placedOrientations:{};for(const ae in this.placements){const ve=this.placements[ae],Ee=j[ae];Ee?(this.opacities[ae]=new lr(Ee,z,ve.text,ve.icon),L=L||ve.text!==Ee.text.placed||ve.icon!==Ee.icon.placed):(this.opacities[ae]=new lr(null,z,ve.text,ve.icon,ve.skipFade),L=L||ve.text||ve.icon)}for(const ae in j){const ve=j[ae];if(!this.opacities[ae]){const Ee=new lr(ve,z,!1,!1);Ee.isHidden()||(this.opacities[ae]=Ee,L=L||ve.text.placed||ve.icon.placed)}}for(const ae in K)this.variableOffsets[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.variableOffsets[ae]=K[ae]);for(const ae in re)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=re[ae]);if(k&&k.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");L?this.lastPlacementChangeTime=p:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=k?k.lastPlacementChangeTime:p)}updateLayerOpacities(p,k){const L={};for(const z of k){const j=z.getBucket(p);j&&z.latestFeatureIndex&&p.id===j.layerIds[0]&&this.updateBucketOpacities(j,L,z.collisionBoxArray)}}updateBucketOpacities(p,k,L){p.hasTextData()&&(p.text.opacityVertexArray.clear(),p.text.hasVisibleVertices=!1),p.hasIconData()&&(p.icon.opacityVertexArray.clear(),p.icon.hasVisibleVertices=!1),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexArray.clear(),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexArray.clear();const z=p.layers[0],j=z.layout,K=new lr(null,0,!1,!1,!0),re=j.get("text-allow-overlap"),ae=j.get("icon-allow-overlap"),ve=z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ee=j.get("text-rotation-alignment")==="map",Te=j.get("text-pitch-alignment")==="map",Ze=j.get("icon-text-fit")!=="none",T=new lr(null,0,re&&(ae||!p.hasIconData()||j.get("icon-optional")),ae&&(re||!p.hasTextData()||j.get("text-optional")),!0);!p.collisionArrays&&L&&(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData())&&p.deserializeCollisionBoxes(L);const B=(W,Q,de)=>{for(let ke=0;ke<Q/4;ke++)W.opacityVertexArray.emplaceBack(de);W.hasVisibleVertices=W.hasVisibleVertices||de!==Ko};for(let W=0;W<p.symbolInstances.length;W++){const Q=p.symbolInstances.get(W),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:ke,crossTileID:fe}=Q;let Se=this.opacities[fe];k[fe]?Se=K:Se||(Se=T,this.opacities[fe]=Se),k[fe]=!0;const De=Q.numIconVertices>0,je=this.placedOrientations[Q.crossTileID],ut=je===s.WritingMode.vertical,Dt=je===s.WritingMode.horizontal||je===s.WritingMode.horizontalOnly;if(de>0||ke>0){const Tt=fn(Se.text);B(p.text,de,ut?Ko:Tt),B(p.text,ke,Dt?Ko:Tt);const Ct=Se.text.isHidden();[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(_t=>{_t>=0&&(p.text.placedSymbolArray.get(_t).hidden=Ct||ut?1:0)}),Q.verticalPlacedTextSymbolIndex>=0&&(p.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).hidden=Ct||Dt?1:0);const br=this.variableOffsets[Q.crossTileID];br&&this.markUsedJustification(p,br.anchor,Q,je);const kr=this.placedOrientations[Q.crossTileID];kr&&(this.markUsedJustification(p,"left",Q,kr),this.markUsedOrientation(p,kr,Q))}if(De){const Tt=fn(Se.icon),Ct=!(Ze&&Q.verticalPlacedIconSymbolIndex&&ut);Q.placedIconSymbolIndex>=0&&(B(p.icon,Q.numIconVertices,Ct?Tt:Ko),p.icon.placedSymbolArray.get(Q.placedIconSymbolIndex).hidden=Se.icon.isHidden()),Q.verticalPlacedIconSymbolIndex>=0&&(B(p.icon,Q.numVerticalIconVertices,Ct?Ko:Tt),p.icon.placedSymbolArray.get(Q.verticalPlacedIconSymbolIndex).hidden=Se.icon.isHidden())}if(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData()){const Tt=p.collisionArrays[W];if(Tt){let Ct=new s.Point(0,0);if(Tt.textBox||Tt.verticalTextBox){let kr=!0;if(ve){const _t=this.variableOffsets[fe];_t?(Ct=Qi(_t.anchor,_t.width,_t.height,_t.textOffset,_t.textBoxScale),Ee&&Ct._rotate(Te?this.transform.angle:-this.transform.angle)):kr=!1}Tt.textBox&&en(p.textCollisionBox.collisionVertexArray,Se.text.placed,!kr||ut,Ct.x,Ct.y),Tt.verticalTextBox&&en(p.textCollisionBox.collisionVertexArray,Se.text.placed,!kr||Dt,Ct.x,Ct.y)}const br=!!(!Dt&&Tt.verticalIconBox);Tt.iconBox&&en(p.iconCollisionBox.collisionVertexArray,Se.icon.placed,br,Ze?Ct.x:0,Ze?Ct.y:0),Tt.verticalIconBox&&en(p.iconCollisionBox.collisionVertexArray,Se.icon.placed,!br,Ze?Ct.x:0,Ze?Ct.y:0)}}}if(p.sortFeatures(this.transform.angle),this.retainedQueryData[p.bucketInstanceId]&&(this.retainedQueryData[p.bucketInstanceId].featureSortOrder=p.featureSortOrder),p.hasTextData()&&p.text.opacityVertexBuffer&&p.text.opacityVertexBuffer.updateData(p.text.opacityVertexArray),p.hasIconData()&&p.icon.opacityVertexBuffer&&p.icon.opacityVertexBuffer.updateData(p.icon.opacityVertexArray),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexBuffer&&p.iconCollisionBox.collisionVertexBuffer.updateData(p.iconCollisionBox.collisionVertexArray),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexBuffer&&p.textCollisionBox.collisionVertexBuffer.updateData(p.textCollisionBox.collisionVertexArray),p.text.opacityVertexArray.length!==p.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${p.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${p.text.layoutVertexArray.length}) / 4`);if(p.icon.opacityVertexArray.length!==p.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${p.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${p.icon.layoutVertexArray.length}) / 4`);if(p.bucketInstanceId in this.collisionCircleArrays){const W=this.collisionCircleArrays[p.bucketInstanceId];p.placementInvProjMatrix=W.invProjMatrix,p.placementViewportMatrix=W.viewportMatrix,p.collisionCircleArray=W.circles,delete this.collisionCircleArrays[p.bucketInstanceId]}}symbolFadeChange(p){return this.fadeDuration===0?1:(p-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(p){return Math.max(0,(this.transform.zoom-p)/1.5)}hasTransitions(p){return this.stale||p-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(p,k){const L=this.zoomAtLastRecencyCheck===k?1-this.zoomAdjustment(k):1;return this.zoomAtLastRecencyCheck=k,this.commitTime+this.fadeDuration*L>p}setStale(){this.stale=!0}}function en(R,p,k,L,z){R.emplaceBack(p?1:0,k?1:0,L||0,z||0),R.emplaceBack(p?1:0,k?1:0,L||0,z||0),R.emplaceBack(p?1:0,k?1:0,L||0,z||0),R.emplaceBack(p?1:0,k?1:0,L||0,z||0)}const Sn=Math.pow(2,25),Vn=Math.pow(2,24),En=Math.pow(2,17),On=Math.pow(2,16),sa=Math.pow(2,9),tn=Math.pow(2,8),Bo=Math.pow(2,1);function fn(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;const p=R.placed?1:0,k=Math.floor(127*R.opacity);return k*Sn+p*Vn+k*En+p*On+k*sa+p*tn+k*Bo+p}const Ko=0;class Xa{constructor(p){this._sortAcrossTiles=p.layout.get("symbol-z-order")!=="viewport-y"&&!p.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(p,k,L,z,j){const K=this._bucketParts;for(;this._currentTileIndex<p.length;)if(k.getBucketParts(K,z,p[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,j())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort((re,ae)=>re.sortKey-ae.sortKey));this._currentPartIndex<K.length;)if(k.placeLayerBucketPart(K[this._currentPartIndex],this._seenCrossTileIDs,L),this._currentPartIndex++,j())return!0;return!1}}class qu{constructor(p,k,L,z,j,K,re,ae){this.placement=new Et(p,k,K,re,ae),this._currentPlacementIndex=L.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=j,this._done=!1}isDone(){return this._done}continuePlacement(p,k,L){const z=s.browser.now(),j=()=>!this._forceFullPlacement&&s.browser.now()-z>2;for(;this._currentPlacementIndex>=0;){const K=k[p[this._currentPlacementIndex]],re=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=re)&&(!K.maxzoom||K.maxzoom>re)){if(this._inProgressLayer||(this._inProgressLayer=new Xa(K)),this._inProgressLayer.continuePlacement(L[K.source],this.placement,this._showCollisionBoxes,K,j))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(p){return this.placement.commit(p),this.placement}}const pa=512/s.EXTENT/2;class ts{constructor(p,k,L){this.tileID=p,this.bucketInstanceId=L,this._symbolsByKey={};const z=new Map;for(let j=0;j<k.length;j++){const K=k.get(j),re=K.key,ae=z.get(re);ae?ae.push(K):z.set(re,[K])}for(const[j,K]of z){const re={positions:K.map(ae=>({x:Math.floor(ae.anchorX*pa),y:Math.floor(ae.anchorY*pa)})),crossTileIDs:K.map(ae=>ae.crossTileID)};if(re.positions.length>128){const ae=new s.KDBush(re.positions.length,16,Uint16Array);for(const{x:ve,y:Ee}of re.positions)ae.add(ve,Ee);ae.finish(),delete re.positions,re.index=ae}this._symbolsByKey[j]=re}}getScaledCoordinates(p,k){const{x:L,y:z,z:j}=this.tileID.canonical,{x:K,y:re,z:ae}=k.canonical,ve=pa/Math.pow(2,ae-j),Ee=(re*s.EXTENT+p.anchorY)*ve,Te=z*s.EXTENT*pa;return{x:Math.floor((K*s.EXTENT+p.anchorX)*ve-L*s.EXTENT*pa),y:Math.floor(Ee-Te)}}findMatches(p,k,L){const z=this.tileID.canonical.z<k.canonical.z?1:Math.pow(2,this.tileID.canonical.z-k.canonical.z);for(let j=0;j<p.length;j++){const K=p.get(j);if(K.crossTileID)continue;const re=this._symbolsByKey[K.key];if(!re)continue;const ae=this.getScaledCoordinates(K,k);if(re.index){const ve=re.index.range(ae.x-z,ae.y-z,ae.x+z,ae.y+z).sort();for(const Ee of ve){const Te=re.crossTileIDs[Ee];if(!L[Te]){L[Te]=!0,K.crossTileID=Te;break}}}else if(re.positions)for(let ve=0;ve<re.positions.length;ve++){const Ee=re.positions[ve],Te=re.crossTileIDs[ve];if(Math.abs(Ee.x-ae.x)<=z&&Math.abs(Ee.y-ae.y)<=z&&!L[Te]){L[Te]=!0,K.crossTileID=Te;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:p})=>p)}}class Vu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(p){const k=Math.round((p-this.lng)/360);if(k!==0)for(const L in this.indexes){const z=this.indexes[L],j={};for(const K in z){const re=z[K];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+k),j[re.tileID.key]=re}this.indexes[L]=j}this.lng=p}addBucket(p,k,L){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===k.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(let j=0;j<k.symbolInstances.length;j++)k.symbolInstances.get(j).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});const z=this.usedCrossTileIDs[p.overscaledZ];for(const j in this.indexes){const K=this.indexes[j];if(Number(j)>p.overscaledZ)for(const re in K){const ae=K[re];ae.tileID.isChildOf(p)&&ae.findMatches(k.symbolInstances,p,z)}else{const re=K[p.scaledTo(Number(j)).key];re&&re.findMatches(k.symbolInstances,p,z)}}for(let j=0;j<k.symbolInstances.length;j++){const K=k.symbolInstances.get(j);K.crossTileID||(K.crossTileID=L.generate(),z[K.crossTileID]=!0)}return this.indexes[p.overscaledZ]===void 0&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new ts(p,k.symbolInstances,k.bucketInstanceId),!0}removeBucketCrossTileIDs(p,k){for(const L of k.getCrossTileIDsLists())for(const z of L)delete this.usedCrossTileIDs[p][z]}removeStaleBuckets(p){let k=!1;for(const L in this.indexes){const z=this.indexes[L];for(const j in z)p[z[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(L,z[j]),delete z[j],k=!0)}return k}}class Ao{constructor(){this.layerIndexes={},this.crossTileIDs=new Vu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(p,k,L){let z=this.layerIndexes[p.id];z===void 0&&(z=this.layerIndexes[p.id]=new Gl);let j=!1;const K={};z.handleWrapJump(L);for(const re of k){const ae=re.getBucket(p);ae&&p.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(re.tileID,ae,this.crossTileIDs)&&(j=!0),K[ae.bucketInstanceId]=!0)}return z.removeStaleBuckets(K)&&(j=!0),j}pruneUnusedLayers(p){const k={};p.forEach(L=>{k[L]=!0});for(const L in this.layerIndexes)k[L]||delete this.layerIndexes[L]}}const Ya=(R,p)=>s.emitValidationErrors(R,p&&p.filter(k=>k.identifier!=="source.canvas")),Aa=s.pick(s.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Jo=s.pick(s.operations,["setCenter","setZoom","setBearing","setPitch"]),Go=s.emptyStyle();class la extends s.Evented{constructor(p,k={}){super(),this.map=p,this.dispatcher=new be(Gi(),this,p._getMapId()),this.imageManager=new Me,this.imageManager.setEventedParent(this),this.glyphManager=new yt(p._requestManager,k.localIdeographFontFamily),this.lineAtlas=new wt(256,512),this.crossTileSymbolIndex=new Ao,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const L=this;this._rtlTextPluginCallback=la.registerForPluginStateChange(z=>{L.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(j,K)=>{if(s.triggerPluginCompletionEvent(j),K&&K.every(re=>re))for(const re in L.sourceCaches){const ae=L.sourceCaches[re].getSource().type;ae!=="vector"&&ae!=="geojson"||L.sourceCaches[re].reload()}})}),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const j=this.sourceCaches[z.sourceId];if(!j)return;const K=j.getSource();if(K&&K.vectorLayerIds)for(const re in this._layers){const ae=this._layers[re];ae.source===K.id&&this._validateLayer(ae)}})}loadURL(p,k={},L){this.fire(new s.Event("dataloading",{dataType:"style"})),k.validate=typeof k.validate!="boolean"||k.validate;const z=this.map._requestManager.transformRequest(p,G.Style);this._request=s.getJSON(z,(j,K)=>{this._request=null,j?this.fire(new s.ErrorEvent(j)):K&&this._load(K,k,L)})}loadJSON(p,k={},L){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.browser.frame(()=>{this._request=null,k.validate=k.validate!==!1,this._load(p,k,L)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Go,{validate:!1})}_load(p,k,L){var z;const j=k.transformStyle?k.transformStyle(L,p):p;if(!k.validate||!Ya(this,s.validateStyle(j))){this._loaded=!0,this.stylesheet=j;for(const K in j.sources)this.addSource(K,j.sources[K],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs),this._createLayers(),this.light=new Xe(this.stylesheet.light),this.map.setTerrain((z=this.stylesheet.terrain)!==null&&z!==void 0?z:null),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}}_createLayers(){const p=s.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",p),this._order=p.map(k=>k.id),this._layers={},this._serializedLayers=null;for(const k of p){const L=s.createStyleLayer(k);L.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=L}}_loadSprite(p,k=!1,L=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(z,j,K,re){const ae=ue(z),ve=ae.length,Ee=K>1?"@2x":"",Te={},Ze={},T={};for(const{id:B,url:W}of ae){const Q=j.transformRequest(j.normalizeSpriteURL(W,Ee,".json"),G.SpriteJSON),de=`${B}_${Q.url}`;Te[de]=s.getJSON(Q,(Se,De)=>{delete Te[de],Ze[B]=De,ze(re,Ze,T,Se,ve)});const ke=j.transformRequest(j.normalizeSpriteURL(W,Ee,".png"),G.SpriteImage),fe=`${B}_${ke.url}`;Te[fe]=$.getImage(ke,(Se,De)=>{delete Te[fe],T[B]=De,ze(re,Ze,T,Se,ve)})}return{cancel(){for(const B of Object.values(Te))B.cancel()}}}(p,this.map._requestManager,this.map.getPixelRatio(),(z,j)=>{if(this._spriteRequest=null,z)this.fire(new s.ErrorEvent(z));else if(j)for(const K in j){this._spritesImagesIds[K]=[];const re=this._spritesImagesIds[K]?this._spritesImagesIds[K].filter(ae=>!(ae in j)):[];for(const ae of re)this.imageManager.removeImage(ae),this._changedImages[ae]=!0;for(const ae in j[K]){const ve=K==="default"?ae:`${K}:${ae}`;this._spritesImagesIds[K].push(ve),ve in this.imageManager.images?this.imageManager.updateImage(ve,j[K][ae],!1):this.imageManager.addImage(ve,j[K][ae]),k&&(this._changedImages[ve]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),k&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"})),L&&L(z)})}_unloadSprite(){for(const p of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(p),this._changedImages[p]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}_validateLayer(p){const k=this.sourceCaches[p.source];if(!k)return;const L=p.sourceLayer;if(!L)return;const z=k.getSource();(z.type==="geojson"||z.vectorLayerIds&&z.vectorLayerIds.indexOf(L)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${L}" does not exist on source "${z.id}" as specified by style layer "${p.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const p in this.sourceCaches)if(!this.sourceCaches[p].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(p){const k=this._serializedAllLayers();if(!p||p.length===0)return Object.values(k);const L=[];for(const z of p)k[z]&&L.push(k[z]);return L}_serializedAllLayers(){let p=this._serializedLayers;if(p)return p;p=this._serializedLayers={};const k=Object.keys(this._layers);for(const L of k){const z=this._layers[L];z.type!=="custom"&&(p[L]=z.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(p){if(!this._loaded)return;const k=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),j=Object.keys(this._removedLayers);(z.length||j.length)&&this._updateWorkerLayers(z,j);for(const K in this._updatedSources){const re=this._updatedSources[K];if(re==="reload")this._reloadSource(K);else{if(re!=="clear")throw new Error(`Invalid action ${re}`);this._clearSource(K)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const K in this._updatedPaintProps)this._layers[K].updateTransitions(p);this.light.updateTransitions(p),this._resetUpdates()}const L={};for(const z in this.sourceCaches){const j=this.sourceCaches[z];L[z]=j.used,j.used=!1}for(const z of this._order){const j=this._layers[z];j.recalculate(p,this._availableImages),!j.isHidden(p.zoom)&&j.source&&(this.sourceCaches[j.source].used=!0)}for(const z in L){const j=this.sourceCaches[z];L[z]!==j.used&&j.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:z}))}this.light.recalculate(p),this.z=p.zoom,k&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const p=Object.keys(this._changedImages);if(p.length){for(const k in this.sourceCaches)this.sourceCaches[k].reloadTilesForDependencies(["icons","patterns"],p);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(p,k){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(p),removedIds:k})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(p,k={}){this._checkLoaded();const L=this.serialize();if(p=k.transformStyle?k.transformStyle(L,p):p,Ya(this,s.validateStyle(p)))return!1;(p=s.clone$1(p)).layers=s.derefLayers(p.layers);const z=s.diffStyles(L,p).filter(K=>!(K.command in Jo));if(z.length===0)return!1;const j=z.filter(K=>!(K.command in Aa));if(j.length>0)throw new Error(`Unimplemented: ${j.map(K=>K.command).join(", ")}.`);for(const K of z)K.command!=="setTransition"&&this[K.command].apply(this,K.args);return this.stylesheet=p,!0}addImage(p,k){if(this.getImage(p))return this.fire(new s.ErrorEvent(new Error(`An image named "${p}" already exists.`)));this.imageManager.addImage(p,k),this._afterImageUpdated(p)}updateImage(p,k){this.imageManager.updateImage(p,k)}getImage(p){return this.imageManager.getImage(p)}removeImage(p){if(!this.getImage(p))return this.fire(new s.ErrorEvent(new Error(`An image named "${p}" does not exist.`)));this.imageManager.removeImage(p),this._afterImageUpdated(p)}_afterImageUpdated(p){this._availableImages=this.imageManager.listImages(),this._changedImages[p]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(p,k,L={}){if(this._checkLoaded(),this.sourceCaches[p]!==void 0)throw new Error(`Source "${p}" already exists.`);if(!k.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(k).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(k.type)>=0&&this._validate(s.validateStyle.source,`sources.${p}`,k,null,L))return;this.map&&this.map._collectResourceTiming&&(k.collectResourceTiming=!0);const z=this.sourceCaches[p]=new Vr(p,k,this.dispatcher);z.style=this,z.setEventedParent(this,()=>({isSourceLoaded:z.loaded(),source:z.serialize(),sourceId:p})),z.onAdd(this.map),this._changed=!0}removeSource(p){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error("There is no source with this ID");for(const L in this._layers)if(this._layers[L].source===p)return this.fire(new s.ErrorEvent(new Error(`Source "${p}" cannot be removed while layer "${L}" is using it.`)));const k=this.sourceCaches[p];delete this.sourceCaches[p],delete this._updatedSources[p],k.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:p})),k.setEventedParent(null),k.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(p,k){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error(`There is no source with this ID=${p}`);const L=this.sourceCaches[p].getSource();if(L.type!=="geojson")throw new Error(`geojsonSource.type is ${L.type}, which is !== 'geojson`);L.setData(k),this._changed=!0}getSource(p){return this.sourceCaches[p]&&this.sourceCaches[p].getSource()}addLayer(p,k,L={}){this._checkLoaded();const z=p.id;if(this.getLayer(z))return void this.fire(new s.ErrorEvent(new Error(`Layer "${z}" already exists on this map.`)));let j;if(p.type==="custom"){if(Ya(this,s.validateCustomStyleLayer(p)))return;j=s.createStyleLayer(p)}else{if("source"in p&&typeof p.source=="object"&&(this.addSource(z,p.source),p=s.clone$1(p),p=s.extend(p,{source:z})),this._validate(s.validateStyle.layer,`layers.${z}`,p,{arrayIndex:-1},L))return;j=s.createStyleLayer(p),this._validateLayer(j),j.setEventedParent(this,{layer:{id:z}})}const K=k?this._order.indexOf(k):this._order.length;if(k&&K===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${z}" before non-existing layer "${k}".`)));else{if(this._order.splice(K,0,z),this._layerOrderChanged=!0,this._layers[z]=j,this._removedLayers[z]&&j.source&&j.type!=="custom"){const re=this._removedLayers[z];delete this._removedLayers[z],re.type!==j.type?this._updatedSources[j.source]="clear":(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause())}this._updateLayer(j),j.onAdd&&j.onAdd(this.map)}}moveLayer(p,k){if(this._checkLoaded(),this._changed=!0,!this._layers[p])return void this.fire(new s.ErrorEvent(new Error(`The layer '${p}' does not exist in the map's style and cannot be moved.`)));if(p===k)return;const L=this._order.indexOf(p);this._order.splice(L,1);const z=k?this._order.indexOf(k):this._order.length;k&&z===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${p}" before non-existing layer "${k}".`))):(this._order.splice(z,0,p),this._layerOrderChanged=!0)}removeLayer(p){this._checkLoaded();const k=this._layers[p];if(!k)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${p}".`)));k.setEventedParent(null);const L=this._order.indexOf(p);this._order.splice(L,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[p]=k,delete this._layers[p],this._serializedLayers&&delete this._serializedLayers[p],delete this._updatedLayers[p],delete this._updatedPaintProps[p],k.onRemove&&k.onRemove(this.map)}getLayer(p){return this._layers[p]}hasLayer(p){return p in this._layers}setLayerZoomRange(p,k,L){this._checkLoaded();const z=this.getLayer(p);z?z.minzoom===k&&z.maxzoom===L||(k!=null&&(z.minzoom=k),L!=null&&(z.maxzoom=L),this._updateLayer(z)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${p}".`)))}setFilter(p,k,L={}){this._checkLoaded();const z=this.getLayer(p);if(z){if(!s.deepEqual(z.filter,k))return k==null?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(s.validateStyle.filter,`layers.${z.id}.filter`,k,null,L)||(z.filter=s.clone$1(k),this._updateLayer(z)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${p}".`)))}getFilter(p){return s.clone$1(this.getLayer(p).filter)}setLayoutProperty(p,k,L,z={}){this._checkLoaded();const j=this.getLayer(p);j?s.deepEqual(j.getLayoutProperty(k),L)||(j.setLayoutProperty(k,L,z),this._updateLayer(j)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${p}".`)))}getLayoutProperty(p,k){const L=this.getLayer(p);if(L)return L.getLayoutProperty(k);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${p}".`)))}setPaintProperty(p,k,L,z={}){this._checkLoaded();const j=this.getLayer(p);j?s.deepEqual(j.getPaintProperty(k),L)||(j.setPaintProperty(k,L,z)&&this._updateLayer(j),this._changed=!0,this._updatedPaintProps[p]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${p}".`)))}getPaintProperty(p,k){return this.getLayer(p).getPaintProperty(k)}setFeatureState(p,k){this._checkLoaded();const L=p.source,z=p.sourceLayer,j=this.sourceCaches[L];if(j===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${L}' does not exist in the map's style.`)));const K=j.getSource().type;K==="geojson"&&z?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):K!=="vector"||z?(p.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),j.setFeatureState(z,p.id,k)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(p,k){this._checkLoaded();const L=p.source,z=this.sourceCaches[L];if(z===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${L}' does not exist in the map's style.`)));const j=z.getSource().type,K=j==="vector"?p.sourceLayer:void 0;j!=="vector"||K?k&&typeof p.id!="string"&&typeof p.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):z.removeFeatureState(K,p.id,k):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(p){this._checkLoaded();const k=p.source,L=p.sourceLayer,z=this.sourceCaches[k];if(z!==void 0)return z.getSource().type!=="vector"||L?(p.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),z.getFeatureState(L,p.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const p=s.mapObject(this.sourceCaches,z=>z.serialize()),k=this._serializeByIds(this._order),L=this.stylesheet;return s.filterObject({version:L.version,name:L.name,metadata:L.metadata,light:L.light,center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,sprite:L.sprite,glyphs:L.glyphs,transition:L.transition,sources:p,layers:k},z=>z!==void 0)}_updateLayer(p){this._updatedLayers[p.id]=!0,p.source&&!this._updatedSources[p.source]&&this.sourceCaches[p.source].getSource().type!=="raster"&&(this._updatedSources[p.source]="reload",this.sourceCaches[p.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(p){const k=K=>this._layers[K].type==="fill-extrusion",L={},z=[];for(let K=this._order.length-1;K>=0;K--){const re=this._order[K];if(k(re)){L[re]=K;for(const ae of p){const ve=ae[re];if(ve)for(const Ee of ve)z.push(Ee)}}}z.sort((K,re)=>re.intersectionZ-K.intersectionZ);const j=[];for(let K=this._order.length-1;K>=0;K--){const re=this._order[K];if(k(re))for(let ae=z.length-1;ae>=0;ae--){const ve=z[ae].feature;if(L[ve.layer.id]<K)break;j.push(ve),z.pop()}else for(const ae of p){const ve=ae[re];if(ve)for(const Ee of ve)j.push(Ee.feature)}}return j}queryRenderedFeatures(p,k,L){k&&k.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",k.filter,null,k);const z={};if(k&&k.layers){if(!Array.isArray(k.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const re of k.layers){const ae=this._layers[re];if(!ae)return this.fire(new s.ErrorEvent(new Error(`The layer '${re}' does not exist in the map's style and cannot be queried for features.`))),[];z[ae.source]=!0}}const j=[];k.availableImages=this._availableImages;const K=this._serializedAllLayers();for(const re in this.sourceCaches)k.layers&&!z[re]||j.push(mr(this.sourceCaches[re],this._layers,K,p,k,L));return this.placement&&j.push(function(re,ae,ve,Ee,Te,Ze,T){const B={},W=Ze.queryRenderedSymbols(Ee),Q=[];for(const de of Object.keys(W).map(Number))Q.push(T[de]);Q.sort(Jr);for(const de of Q){const ke=de.featureIndex.lookupSymbolFeatures(W[de.bucketInstanceId],ae,de.bucketIndex,de.sourceLayerIndex,Te.filter,Te.layers,Te.availableImages,re);for(const fe in ke){const Se=B[fe]=B[fe]||[],De=ke[fe];De.sort((je,ut)=>{const Dt=de.featureSortOrder;if(Dt){const Tt=Dt.indexOf(je.featureIndex);return Dt.indexOf(ut.featureIndex)-Tt}return ut.featureIndex-je.featureIndex});for(const je of De)Se.push(je)}}for(const de in B)B[de].forEach(ke=>{const fe=ke.feature,Se=ve[re[de].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=Se});return B}(this._layers,K,this.sourceCaches,p,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)}querySourceFeatures(p,k){k&&k.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",k.filter,null,k);const L=this.sourceCaches[p];return L?function(z,j){const K=z.getRenderableIds().map(ve=>z.getTileByID(ve)),re=[],ae={};for(let ve=0;ve<K.length;ve++){const Ee=K[ve],Te=Ee.tileID.canonical.key;ae[Te]||(ae[Te]=!0,Ee.querySourceFeatures(re,j))}return re}(L,k):[]}addSourceType(p,k,L){return Ft(p)?L(new Error(`A source type called "${p}" already exists.`)):(((z,j)=>{Fr[z]=j})(p,k),k.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:p,url:k.workerSourceURL},L):L(null,null))}getLight(){return this.light.getLight()}setLight(p,k={}){this._checkLoaded();const L=this.light.getLight();let z=!1;for(const K in p)if(!s.deepEqual(p[K],L[K])){z=!0;break}if(!z)return;const j={now:s.browser.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(p,k),this.light.updateTransitions(j)}_validate(p,k,L,z,j={}){return(!j||j.validate!==!1)&&Ya(this,p.call(s.validateStyle,s.extend({key:k,style:this.serialize(),value:L,styleSpec:s.v8Spec},z)))}_remove(p=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const k in this._layers)this._layers[k].setEventedParent(null);for(const k in this.sourceCaches){const L=this.sourceCaches[k];L.setEventedParent(null),L.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(p)}_clearSource(p){this.sourceCaches[p].clearTiles()}_reloadSource(p){this.sourceCaches[p].resume(),this.sourceCaches[p].reload()}_updateSources(p){for(const k in this.sourceCaches)this.sourceCaches[k].update(p,this.map.terrain)}_generateCollisionBoxes(){for(const p in this.sourceCaches)this._reloadSource(p)}_updatePlacement(p,k,L,z,j=!1){let K=!1,re=!1;const ae={};for(const ve of this._order){const Ee=this._layers[ve];if(Ee.type!=="symbol")continue;if(!ae[Ee.source]){const Ze=this.sourceCaches[Ee.source];ae[Ee.source]=Ze.getRenderableIds(!0).map(T=>Ze.getTileByID(T)).sort((T,B)=>B.tileID.overscaledZ-T.tileID.overscaledZ||(T.tileID.isLessThan(B.tileID)?-1:1))}const Te=this.crossTileSymbolIndex.addLayer(Ee,ae[Ee.source],p.center.lng);K=K||Te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((j=j||this._layerOrderChanged||L===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.browser.now(),p.zoom))&&(this.pauseablePlacement=new qu(p,this.map.terrain,this._order,j,k,L,z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.browser.now()),re=!0),K&&this.pauseablePlacement.placement.setStale()),re||K)for(const ve of this._order){const Ee=this._layers[ve];Ee.type==="symbol"&&this.placement.updateLayerOpacities(Ee,ae[Ee.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.browser.now())}_releaseSymbolFadeTiles(){for(const p in this.sourceCaches)this.sourceCaches[p].releaseSymbolFadeTiles()}getImages(p,k,L){this.imageManager.getImages(k.icons,L),this._updateTilesForChangedImages();const z=this.sourceCaches[k.source];z&&z.setDependencies(k.tileID.key,k.type,k.icons)}getGlyphs(p,k,L){this.glyphManager.getGlyphs(k.stacks,L);const z=this.sourceCaches[k.source];z&&z.setDependencies(k.tileID.key,k.type,[""])}getResource(p,k,L){return s.makeRequest(k,L)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(p,k={}){this._checkLoaded(),p&&this._validate(s.validateStyle.glyphs,"glyphs",p,null,k)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=p,this.glyphManager.entries={},this.glyphManager.setURL(p))}addSprite(p,k,L={},z){this._checkLoaded();const j=[{id:p,url:k}],K=[...ue(this.stylesheet.sprite),...j];this._validate(s.validateStyle.sprite,"sprite",K,null,L)||(this.stylesheet.sprite=K,this._loadSprite(j,!0,z))}removeSprite(p){this._checkLoaded();const k=ue(this.stylesheet.sprite);if(k.find(L=>L.id===p)){if(this._spritesImagesIds[p])for(const L of this._spritesImagesIds[p])this.imageManager.removeImage(L),this._changedImages[L]=!0;k.splice(k.findIndex(L=>L.id===p),1),this.stylesheet.sprite=k.length>0?k:void 0,delete this._spritesImagesIds[p],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}else this.fire(new s.ErrorEvent(new Error(`Sprite "${p}" doesn't exists on this map.`)))}getSprite(){return ue(this.stylesheet.sprite)}setSprite(p,k={},L){this._checkLoaded(),p&&this._validate(s.validateStyle.sprite,"sprite",p,null,k)||(this.stylesheet.sprite=p,p?this._loadSprite(p,!0,L):(this._unloadSprite(),L&&L(null)))}}la.registerForPluginStateChange=s.registerForPluginStateChange;var Js=s.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ma="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Da={prelude:Kn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Kn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Kn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Kn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Kn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Kn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ma),terrainDepth:Kn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ma),terrainCoords:Kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ma)};function Kn(R,p){const k=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=p.match(/attribute ([\w]+) ([\w]+)/g),z=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=j?j.concat(z):z,re={};return{fragmentSource:R=R.replace(k,(ae,ve,Ee,Te,Ze)=>(re[Ze]=!0,ve==="define"?`
#ifndef HAS_UNIFORM_u_${Ze}
varying ${Ee} ${Te} ${Ze};
#else
uniform ${Ee} ${Te} u_${Ze};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ze}
    ${Ee} ${Te} ${Ze} = u_${Ze};
#endif
`)),vertexSource:p=p.replace(k,(ae,ve,Ee,Te,Ze)=>{const T=Te==="float"?"vec2":"vec4",B=Ze.match(/color/)?"color":T;return re[Ze]?ve==="define"?`
#ifndef HAS_UNIFORM_u_${Ze}
uniform lowp float u_${Ze}_t;
attribute ${Ee} ${T} a_${Ze};
varying ${Ee} ${Te} ${Ze};
#else
uniform ${Ee} ${Te} u_${Ze};
#endif
`:B==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ze}
    ${Ze} = a_${Ze};
#else
    ${Ee} ${Te} ${Ze} = u_${Ze};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ze}
    ${Ze} = unpack_mix_${B}(a_${Ze}, u_${Ze}_t);
#else
    ${Ee} ${Te} ${Ze} = u_${Ze};
#endif
`:ve==="define"?`
#ifndef HAS_UNIFORM_u_${Ze}
uniform lowp float u_${Ze}_t;
attribute ${Ee} ${T} a_${Ze};
#else
uniform ${Ee} ${Te} u_${Ze};
#endif
`:B==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ze}
    ${Ee} ${Te} ${Ze} = a_${Ze};
#else
    ${Ee} ${Te} ${Ze} = u_${Ze};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ze}
    ${Ee} ${Te} ${Ze} = unpack_mix_${B}(a_${Ze}, u_${Ze}_t);
#else
    ${Ee} ${Te} ${Ze} = u_${Ze};
#endif
`}),staticAttributes:L,staticUniforms:K}}class rs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(p,k,L,z,j,K,re,ae,ve){this.context=p;let Ee=this.boundPaintVertexBuffers.length!==z.length;for(let Te=0;!Ee&&Te<z.length;Te++)this.boundPaintVertexBuffers[Te]!==z[Te]&&(Ee=!0);!this.vao||this.boundProgram!==k||this.boundLayoutVertexBuffer!==L||Ee||this.boundIndexBuffer!==j||this.boundVertexOffset!==K||this.boundDynamicVertexBuffer!==re||this.boundDynamicVertexBuffer2!==ae||this.boundDynamicVertexBuffer3!==ve?this.freshBind(k,L,z,j,K,re,ae,ve):(p.bindVertexArray.set(this.vao),re&&re.bind(),j&&j.dynamicDraw&&j.bind(),ae&&ae.bind(),ve&&ve.bind())}freshBind(p,k,L,z,j,K,re,ae){const ve=p.numAttributes,Ee=this.context,Te=Ee.gl;this.vao&&this.destroy(),this.vao=Ee.createVertexArray(),Ee.bindVertexArray.set(this.vao),this.boundProgram=p,this.boundLayoutVertexBuffer=k,this.boundPaintVertexBuffers=L,this.boundIndexBuffer=z,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=K,this.boundDynamicVertexBuffer2=re,this.boundDynamicVertexBuffer3=ae,k.enableAttributes(Te,p);for(const Ze of L)Ze.enableAttributes(Te,p);K&&K.enableAttributes(Te,p),re&&re.enableAttributes(Te,p),ae&&ae.enableAttributes(Te,p),k.bind(),k.setVertexAttribPointers(Te,p,j);for(const Ze of L)Ze.bind(),Ze.setVertexAttribPointers(Te,p,j);K&&(K.bind(),K.setVertexAttribPointers(Te,p,j)),z&&z.bind(),re&&(re.bind(),re.setVertexAttribPointers(Te,p,j)),ae&&(ae.bind(),ae.setVertexAttribPointers(Te,p,j)),Ee.currentNumAttributes=ve}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Rs(R){const p=[];for(let k=0;k<R.length;k++){if(R[k]===null)continue;const L=R[k].split(" ");p.push(L.pop())}return p}class oa{constructor(p,k,L,z,j,K){const re=p.gl;this.program=re.createProgram();const ae=Rs(k.staticAttributes),ve=L?L.getBinderAttributes():[],Ee=ae.concat(ve),Te=Da.prelude.staticUniforms?Rs(Da.prelude.staticUniforms):[],Ze=k.staticUniforms?Rs(k.staticUniforms):[],T=L?L.getBinderUniforms():[],B=Te.concat(Ze).concat(T),W=[];for(const je of B)W.indexOf(je)<0&&W.push(je);const Q=L?L.defines():[];j&&Q.push("#define OVERDRAW_INSPECTOR;"),K&&Q.push("#define TERRAIN3D;");const de=Q.concat(Da.prelude.fragmentSource,k.fragmentSource).join(`
`),ke=Q.concat(Da.prelude.vertexSource,k.vertexSource).join(`
`),fe=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(fe,de),re.compileShader(fe),!re.getShaderParameter(fe,re.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${re.getShaderInfoLog(fe)}`);re.attachShader(this.program,fe);const Se=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(Se,ke),re.compileShader(Se),!re.getShaderParameter(Se,re.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${re.getShaderInfoLog(Se)}`);re.attachShader(this.program,Se),this.attributes={};const De={};this.numAttributes=Ee.length;for(let je=0;je<this.numAttributes;je++)Ee[je]&&(re.bindAttribLocation(this.program,je,Ee[je]),this.attributes[Ee[je]]=je);if(re.linkProgram(this.program),!re.getProgramParameter(this.program,re.LINK_STATUS))throw new Error(`Program failed to link: ${re.getProgramInfoLog(this.program)}`);re.deleteShader(Se),re.deleteShader(fe);for(let je=0;je<W.length;je++){const ut=W[je];if(ut&&!De[ut]){const Dt=re.getUniformLocation(this.program,ut);Dt&&(De[ut]=Dt)}}this.fixedUniforms=z(p,De),this.terrainUniforms=((je,ut)=>({u_depth:new s.Uniform1i(je,ut.u_depth),u_terrain:new s.Uniform1i(je,ut.u_terrain),u_terrain_dim:new s.Uniform1f(je,ut.u_terrain_dim),u_terrain_matrix:new s.UniformMatrix4f(je,ut.u_terrain_matrix),u_terrain_unpack:new s.Uniform4f(je,ut.u_terrain_unpack),u_terrain_exaggeration:new s.Uniform1f(je,ut.u_terrain_exaggeration)}))(p,De),this.binderUniforms=L?L.getUniforms(p,De):[]}draw(p,k,L,z,j,K,re,ae,ve,Ee,Te,Ze,T,B,W,Q,de,ke){const fe=p.gl;if(this.failedToCreate)return;if(p.program.set(this.program),p.setDepthMode(L),p.setStencilMode(z),p.setColorMode(j),p.setCullFace(K),ae){p.activeTexture.set(fe.TEXTURE2),fe.bindTexture(fe.TEXTURE_2D,ae.depthTexture),p.activeTexture.set(fe.TEXTURE3),fe.bindTexture(fe.TEXTURE_2D,ae.texture);for(const De in this.terrainUniforms)this.terrainUniforms[De].set(ae[De])}for(const De in this.fixedUniforms)this.fixedUniforms[De].set(re[De]);W&&W.setUniforms(p,this.binderUniforms,T,{zoom:B});let Se=0;switch(k){case fe.LINES:Se=2;break;case fe.TRIANGLES:Se=3;break;case fe.LINE_STRIP:Se=1}for(const De of Ze.get()){const je=De.vaos||(De.vaos={});(je[ve]||(je[ve]=new rs)).bind(p,this,Ee,W?W.getPaintVertexBuffers():[],Te,De.vertexOffset,Q,de,ke),fe.drawElements(k,De.primitiveLength*Se,fe.UNSIGNED_SHORT,De.primitiveOffset*Se*2)}}}function Qs(R,p,k){const L=1/Qt(k,1,p.transform.tileZoom),z=Math.pow(2,k.tileID.overscaledZ),j=k.tileSize*Math.pow(2,p.transform.tileZoom)/z,K=j*(k.tileID.canonical.x+k.tileID.wrap*z),re=j*k.tileID.canonical.y;return{u_image:0,u_texsize:k.imageAtlasTexture.size,u_scale:[L,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[K>>16,re>>16],u_pixel_coord_lower:[65535&K,65535&re]}}const Os=(R,p,k,L)=>{const z=p.style.light,j=z.properties.get("position"),K=[j.x,j.y,j.z],re=function(){var ve=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(ve[1]=0,ve[2]=0,ve[3]=0,ve[5]=0,ve[6]=0,ve[7]=0),ve[0]=1,ve[4]=1,ve[8]=1,ve}();z.properties.get("anchor")==="viewport"&&function(ve,Ee){var Te=Math.sin(Ee),Ze=Math.cos(Ee);ve[0]=Ze,ve[1]=Te,ve[2]=0,ve[3]=-Te,ve[4]=Ze,ve[5]=0,ve[6]=0,ve[7]=0,ve[8]=1}(re,-p.transform.angle),function(ve,Ee,Te){var Ze=Ee[0],T=Ee[1],B=Ee[2];ve[0]=Ze*Te[0]+T*Te[3]+B*Te[6],ve[1]=Ze*Te[1]+T*Te[4]+B*Te[7],ve[2]=Ze*Te[2]+T*Te[5]+B*Te[8]}(K,K,re);const ae=z.properties.get("color");return{u_matrix:R,u_lightpos:K,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+k,u_opacity:L}},bc=(R,p,k,L,z,j,K)=>s.extend(Os(R,p,k,L),Qs(j,p,K),{u_height_factor:-Math.pow(2,z.overscaledZ)/K.tileSize/8}),Hu=R=>({u_matrix:R}),bu=(R,p,k,L)=>s.extend(Hu(R),Qs(k,p,L)),el=(R,p)=>({u_matrix:R,u_world:p}),Wl=(R,p,k,L,z)=>s.extend(bu(R,p,k,L),{u_world:z}),$u=(R,p,k,L)=>{const z=R.transform;let j,K;if(L.paint.get("circle-pitch-alignment")==="map"){const re=Qt(k,1,z.zoom);j=!0,K=[re,re]}else j=!1,K=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:R.translatePosMatrix(p.posMatrix,k,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+j,u_device_pixel_ratio:R.pixelRatio,u_extrude_scale:K}},wc=(R,p,k)=>{const L=Qt(k,1,p.zoom),z=Math.pow(2,p.zoom-k.tileID.overscaledZ),j=k.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[p.pixelsToGLUnits[0]/(L*z),p.pixelsToGLUnits[1]/(L*z)],u_overscale_factor:j}},xc=(R,p,k=1)=>({u_matrix:R,u_color:p,u_overlay:0,u_overlay_scale:k}),Zl=R=>({u_matrix:R}),Fs=(R,p,k,L)=>({u_matrix:R,u_extrude_scale:Qt(p,1,k),u_intensity:L});function tl(R,p){const k=Math.pow(2,p.canonical.z),L=p.canonical.y;return[new s.MercatorCoordinate(0,L/k).toLngLat().lat,new s.MercatorCoordinate(0,(L+1)/k).toLngLat().lat]}const Sl=(R,p,k,L)=>{const z=R.transform;return{u_matrix:Pe(R,p,k,L),u_ratio:1/Qt(p,1,z.zoom),u_device_pixel_ratio:R.pixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},wu=(R,p,k,L,z)=>s.extend(Sl(R,p,k,z),{u_image:0,u_image_height:L}),F=(R,p,k,L,z)=>{const j=R.transform,K=ce(p,j);return{u_matrix:Pe(R,p,k,z),u_texsize:p.imageAtlasTexture.size,u_ratio:1/Qt(p,1,j.zoom),u_device_pixel_ratio:R.pixelRatio,u_image:0,u_scale:[K,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},X=(R,p,k,L,z,j)=>{const K=R.lineAtlas,re=ce(p,R.transform),ae=k.layout.get("line-cap")==="round",ve=K.getDash(L.from,ae),Ee=K.getDash(L.to,ae),Te=ve.width*z.fromScale,Ze=Ee.width*z.toScale;return s.extend(Sl(R,p,k,j),{u_patternscale_a:[re/Te,-ve.height/2],u_patternscale_b:[re/Ze,-Ee.height/2],u_sdfgamma:K.width/(256*Math.min(Te,Ze)*R.pixelRatio)/2,u_image:0,u_tex_y_a:ve.y,u_tex_y_b:Ee.y,u_mix:z.t})};function ce(R,p){return 1/Qt(R,1,p.tileZoom)}function Pe(R,p,k,L){return R.translatePosMatrix(L?L.posMatrix:p.tileID.posMatrix,p,k.paint.get("line-translate"),k.paint.get("line-translate-anchor"))}const tt=(R,p,k,L,z)=>{return{u_matrix:R,u_tl_parent:p,u_scale_parent:k,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(K=z.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(j=z.paint.get("raster-contrast"),j>0?1/(1-j):1+j),u_spin_weights:bt(z.paint.get("raster-hue-rotate"))};var j,K};function bt(R){R*=Math.PI/180;const p=Math.sin(R),k=Math.cos(R);return[(2*k+1)/3,(-Math.sqrt(3)*p-k+1)/3,(Math.sqrt(3)*p-k+1)/3]}const Bt=(R,p,k,L,z,j,K,re,ae,ve)=>{const Ee=z.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:Ee.cameraToCenterDistance,u_pitch:Ee.pitch/360*2*Math.PI,u_rotate_symbol:+k,u_aspect_ratio:Ee.width/Ee.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:j,u_label_plane_matrix:K,u_coord_matrix:re,u_is_text:+ae,u_pitch_with_map:+L,u_texsize:ve,u_texture:0}},Ot=(R,p,k,L,z,j,K,re,ae,ve,Ee)=>{const Te=z.transform;return s.extend(Bt(R,p,k,L,z,j,K,re,ae,ve),{u_gamma_scale:L?Math.cos(Te._pitch)*Te.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:+Ee})},wr=(R,p,k,L,z,j,K,re,ae,ve)=>s.extend(Ot(R,p,k,L,z,j,K,re,!0,ae,!0),{u_texsize_icon:ve,u_texture_icon:1}),pr=(R,p,k)=>({u_matrix:R,u_opacity:p,u_color:k}),vr=(R,p,k,L,z,j)=>s.extend(function(K,re,ae,ve){const Ee=ae.imageManager.getPattern(K.from.toString()),Te=ae.imageManager.getPattern(K.to.toString()),{width:Ze,height:T}=ae.imageManager.getPixelSize(),B=Math.pow(2,ve.tileID.overscaledZ),W=ve.tileSize*Math.pow(2,ae.transform.tileZoom)/B,Q=W*(ve.tileID.canonical.x+ve.tileID.wrap*B),de=W*ve.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ee.tl,u_pattern_br_a:Ee.br,u_pattern_tl_b:Te.tl,u_pattern_br_b:Te.br,u_texsize:[Ze,T],u_mix:re.t,u_pattern_size_a:Ee.displaySize,u_pattern_size_b:Te.displaySize,u_scale_a:re.fromScale,u_scale_b:re.toScale,u_tile_units_to_pixels:1/Qt(ve,1,ae.transform.tileZoom),u_pixel_coord_upper:[Q>>16,de>>16],u_pixel_coord_lower:[65535&Q,65535&de]}}(L,j,k,z),{u_matrix:R,u_opacity:p}),_r={fillExtrusion:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_lightpos:new s.Uniform3f(R,p.u_lightpos),u_lightintensity:new s.Uniform1f(R,p.u_lightintensity),u_lightcolor:new s.Uniform3f(R,p.u_lightcolor),u_vertical_gradient:new s.Uniform1f(R,p.u_vertical_gradient),u_opacity:new s.Uniform1f(R,p.u_opacity)}),fillExtrusionPattern:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_lightpos:new s.Uniform3f(R,p.u_lightpos),u_lightintensity:new s.Uniform1f(R,p.u_lightintensity),u_lightcolor:new s.Uniform3f(R,p.u_lightcolor),u_vertical_gradient:new s.Uniform1f(R,p.u_vertical_gradient),u_height_factor:new s.Uniform1f(R,p.u_height_factor),u_image:new s.Uniform1i(R,p.u_image),u_texsize:new s.Uniform2f(R,p.u_texsize),u_pixel_coord_upper:new s.Uniform2f(R,p.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(R,p.u_pixel_coord_lower),u_scale:new s.Uniform3f(R,p.u_scale),u_fade:new s.Uniform1f(R,p.u_fade),u_opacity:new s.Uniform1f(R,p.u_opacity)}),fill:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix)}),fillPattern:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_image:new s.Uniform1i(R,p.u_image),u_texsize:new s.Uniform2f(R,p.u_texsize),u_pixel_coord_upper:new s.Uniform2f(R,p.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(R,p.u_pixel_coord_lower),u_scale:new s.Uniform3f(R,p.u_scale),u_fade:new s.Uniform1f(R,p.u_fade)}),fillOutline:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_world:new s.Uniform2f(R,p.u_world)}),fillOutlinePattern:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_world:new s.Uniform2f(R,p.u_world),u_image:new s.Uniform1i(R,p.u_image),u_texsize:new s.Uniform2f(R,p.u_texsize),u_pixel_coord_upper:new s.Uniform2f(R,p.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(R,p.u_pixel_coord_lower),u_scale:new s.Uniform3f(R,p.u_scale),u_fade:new s.Uniform1f(R,p.u_fade)}),circle:(R,p)=>({u_camera_to_center_distance:new s.Uniform1f(R,p.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(R,p.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(R,p.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(R,p.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(R,p.u_matrix)}),collisionBox:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_camera_to_center_distance:new s.Uniform1f(R,p.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(R,p.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(R,p.u_extrude_scale),u_overscale_factor:new s.Uniform1f(R,p.u_overscale_factor)}),collisionCircle:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_inv_matrix:new s.UniformMatrix4f(R,p.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(R,p.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(R,p.u_viewport_size)}),debug:(R,p)=>({u_color:new s.UniformColor(R,p.u_color),u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_overlay:new s.Uniform1i(R,p.u_overlay),u_overlay_scale:new s.Uniform1f(R,p.u_overlay_scale)}),clippingMask:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix)}),heatmap:(R,p)=>({u_extrude_scale:new s.Uniform1f(R,p.u_extrude_scale),u_intensity:new s.Uniform1f(R,p.u_intensity),u_matrix:new s.UniformMatrix4f(R,p.u_matrix)}),heatmapTexture:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_world:new s.Uniform2f(R,p.u_world),u_image:new s.Uniform1i(R,p.u_image),u_color_ramp:new s.Uniform1i(R,p.u_color_ramp),u_opacity:new s.Uniform1f(R,p.u_opacity)}),hillshade:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_image:new s.Uniform1i(R,p.u_image),u_latrange:new s.Uniform2f(R,p.u_latrange),u_light:new s.Uniform2f(R,p.u_light),u_shadow:new s.UniformColor(R,p.u_shadow),u_highlight:new s.UniformColor(R,p.u_highlight),u_accent:new s.UniformColor(R,p.u_accent)}),hillshadePrepare:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_image:new s.Uniform1i(R,p.u_image),u_dimension:new s.Uniform2f(R,p.u_dimension),u_zoom:new s.Uniform1f(R,p.u_zoom),u_unpack:new s.Uniform4f(R,p.u_unpack)}),line:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_ratio:new s.Uniform1f(R,p.u_ratio),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(R,p.u_units_to_pixels)}),lineGradient:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_ratio:new s.Uniform1f(R,p.u_ratio),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(R,p.u_units_to_pixels),u_image:new s.Uniform1i(R,p.u_image),u_image_height:new s.Uniform1f(R,p.u_image_height)}),linePattern:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_texsize:new s.Uniform2f(R,p.u_texsize),u_ratio:new s.Uniform1f(R,p.u_ratio),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_image:new s.Uniform1i(R,p.u_image),u_units_to_pixels:new s.Uniform2f(R,p.u_units_to_pixels),u_scale:new s.Uniform3f(R,p.u_scale),u_fade:new s.Uniform1f(R,p.u_fade)}),lineSDF:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_ratio:new s.Uniform1f(R,p.u_ratio),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(R,p.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(R,p.u_patternscale_a),u_patternscale_b:new s.Uniform2f(R,p.u_patternscale_b),u_sdfgamma:new s.Uniform1f(R,p.u_sdfgamma),u_image:new s.Uniform1i(R,p.u_image),u_tex_y_a:new s.Uniform1f(R,p.u_tex_y_a),u_tex_y_b:new s.Uniform1f(R,p.u_tex_y_b),u_mix:new s.Uniform1f(R,p.u_mix)}),raster:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_tl_parent:new s.Uniform2f(R,p.u_tl_parent),u_scale_parent:new s.Uniform1f(R,p.u_scale_parent),u_buffer_scale:new s.Uniform1f(R,p.u_buffer_scale),u_fade_t:new s.Uniform1f(R,p.u_fade_t),u_opacity:new s.Uniform1f(R,p.u_opacity),u_image0:new s.Uniform1i(R,p.u_image0),u_image1:new s.Uniform1i(R,p.u_image1),u_brightness_low:new s.Uniform1f(R,p.u_brightness_low),u_brightness_high:new s.Uniform1f(R,p.u_brightness_high),u_saturation_factor:new s.Uniform1f(R,p.u_saturation_factor),u_contrast_factor:new s.Uniform1f(R,p.u_contrast_factor),u_spin_weights:new s.Uniform3f(R,p.u_spin_weights)}),symbolIcon:(R,p)=>({u_is_size_zoom_constant:new s.Uniform1i(R,p.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(R,p.u_is_size_feature_constant),u_size_t:new s.Uniform1f(R,p.u_size_t),u_size:new s.Uniform1f(R,p.u_size),u_camera_to_center_distance:new s.Uniform1f(R,p.u_camera_to_center_distance),u_pitch:new s.Uniform1f(R,p.u_pitch),u_rotate_symbol:new s.Uniform1i(R,p.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(R,p.u_aspect_ratio),u_fade_change:new s.Uniform1f(R,p.u_fade_change),u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(R,p.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(R,p.u_coord_matrix),u_is_text:new s.Uniform1i(R,p.u_is_text),u_pitch_with_map:new s.Uniform1i(R,p.u_pitch_with_map),u_texsize:new s.Uniform2f(R,p.u_texsize),u_texture:new s.Uniform1i(R,p.u_texture)}),symbolSDF:(R,p)=>({u_is_size_zoom_constant:new s.Uniform1i(R,p.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(R,p.u_is_size_feature_constant),u_size_t:new s.Uniform1f(R,p.u_size_t),u_size:new s.Uniform1f(R,p.u_size),u_camera_to_center_distance:new s.Uniform1f(R,p.u_camera_to_center_distance),u_pitch:new s.Uniform1f(R,p.u_pitch),u_rotate_symbol:new s.Uniform1i(R,p.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(R,p.u_aspect_ratio),u_fade_change:new s.Uniform1f(R,p.u_fade_change),u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(R,p.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(R,p.u_coord_matrix),u_is_text:new s.Uniform1i(R,p.u_is_text),u_pitch_with_map:new s.Uniform1i(R,p.u_pitch_with_map),u_texsize:new s.Uniform2f(R,p.u_texsize),u_texture:new s.Uniform1i(R,p.u_texture),u_gamma_scale:new s.Uniform1f(R,p.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(R,p.u_is_halo)}),symbolTextAndIcon:(R,p)=>({u_is_size_zoom_constant:new s.Uniform1i(R,p.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(R,p.u_is_size_feature_constant),u_size_t:new s.Uniform1f(R,p.u_size_t),u_size:new s.Uniform1f(R,p.u_size),u_camera_to_center_distance:new s.Uniform1f(R,p.u_camera_to_center_distance),u_pitch:new s.Uniform1f(R,p.u_pitch),u_rotate_symbol:new s.Uniform1i(R,p.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(R,p.u_aspect_ratio),u_fade_change:new s.Uniform1f(R,p.u_fade_change),u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(R,p.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(R,p.u_coord_matrix),u_is_text:new s.Uniform1i(R,p.u_is_text),u_pitch_with_map:new s.Uniform1i(R,p.u_pitch_with_map),u_texsize:new s.Uniform2f(R,p.u_texsize),u_texsize_icon:new s.Uniform2f(R,p.u_texsize_icon),u_texture:new s.Uniform1i(R,p.u_texture),u_texture_icon:new s.Uniform1i(R,p.u_texture_icon),u_gamma_scale:new s.Uniform1f(R,p.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(R,p.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(R,p.u_is_halo)}),background:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_opacity:new s.Uniform1f(R,p.u_opacity),u_color:new s.UniformColor(R,p.u_color)}),backgroundPattern:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_opacity:new s.Uniform1f(R,p.u_opacity),u_image:new s.Uniform1i(R,p.u_image),u_pattern_tl_a:new s.Uniform2f(R,p.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(R,p.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(R,p.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(R,p.u_pattern_br_b),u_texsize:new s.Uniform2f(R,p.u_texsize),u_mix:new s.Uniform1f(R,p.u_mix),u_pattern_size_a:new s.Uniform2f(R,p.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(R,p.u_pattern_size_b),u_scale_a:new s.Uniform1f(R,p.u_scale_a),u_scale_b:new s.Uniform1f(R,p.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(R,p.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(R,p.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(R,p.u_tile_units_to_pixels)}),terrain:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_texture:new s.Uniform1i(R,p.u_texture),u_ele_delta:new s.Uniform1f(R,p.u_ele_delta)}),terrainDepth:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_ele_delta:new s.Uniform1f(R,p.u_ele_delta)}),terrainCoords:(R,p)=>({u_matrix:new s.UniformMatrix4f(R,p.u_matrix),u_texture:new s.Uniform1i(R,p.u_texture),u_terrain_coords_id:new s.Uniform1f(R,p.u_terrain_coords_id),u_ele_delta:new s.Uniform1f(R,p.u_ele_delta)})};class Mr{constructor(p,k,L){this.context=p;const z=p.gl;this.buffer=z.createBuffer(),this.dynamicDraw=!!L,this.context.unbindVAO(),p.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,k.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||delete k.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(p){const k=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),k.bufferSubData(k.ELEMENT_ARRAY_BUFFER,0,p.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wi{constructor(p,k,L,z){this.length=k.length,this.attributes=L,this.itemSize=k.bytesPerElement,this.dynamicDraw=z,this.context=p;const j=p.gl;this.buffer=j.createBuffer(),p.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,k.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete k.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(p){if(p.length!==this.length)throw new Error(`Length of new data is ${p.length}, which doesn't match current length of ${this.length}`);const k=this.context.gl;this.bind(),k.bufferSubData(k.ARRAY_BUFFER,0,p.arrayBuffer)}enableAttributes(p,k){for(let L=0;L<this.attributes.length;L++){const z=k.attributes[this.attributes[L].name];z!==void 0&&p.enableVertexAttribArray(z)}}setVertexAttribPointers(p,k,L){for(let z=0;z<this.attributes.length;z++){const j=this.attributes[z],K=k.attributes[j.name];K!==void 0&&p.vertexAttribPointer(K,j.components,p[Yr[j.type]],!1,this.itemSize,j.offset+this.itemSize*(L||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ot=new WeakMap;function m(R){if(ot.has(R))return ot.get(R);{const p=R.getParameter(R.VERSION).startsWith("WebGL 2.0");return ot.set(R,p),p}}class xr{constructor(p){this.gl=p.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(p){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class h extends xr{getDefault(){return s.Color.transparent}set(p){const k=this.current;(p.r!==k.r||p.g!==k.g||p.b!==k.b||p.a!==k.a||this.dirty)&&(this.gl.clearColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)}}class P extends xr{getDefault(){return 1}set(p){(p!==this.current||this.dirty)&&(this.gl.clearDepth(p),this.current=p,this.dirty=!1)}}class ci extends xr{getDefault(){return 0}set(p){(p!==this.current||this.dirty)&&(this.gl.clearStencil(p),this.current=p,this.dirty=!1)}}class Oi extends xr{getDefault(){return[!0,!0,!0,!0]}set(p){const k=this.current;(p[0]!==k[0]||p[1]!==k[1]||p[2]!==k[2]||p[3]!==k[3]||this.dirty)&&(this.gl.colorMask(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)}}class wo extends xr{getDefault(){return!0}set(p){(p!==this.current||this.dirty)&&(this.gl.depthMask(p),this.current=p,this.dirty=!1)}}class ie extends xr{getDefault(){return 255}set(p){(p!==this.current||this.dirty)&&(this.gl.stencilMask(p),this.current=p,this.dirty=!1)}}class wn extends xr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(p){const k=this.current;(p.func!==k.func||p.ref!==k.ref||p.mask!==k.mask||this.dirty)&&(this.gl.stencilFunc(p.func,p.ref,p.mask),this.current=p,this.dirty=!1)}}class Bs extends xr{getDefault(){const p=this.gl;return[p.KEEP,p.KEEP,p.KEEP]}set(p){const k=this.current;(p[0]!==k[0]||p[1]!==k[1]||p[2]!==k[2]||this.dirty)&&(this.gl.stencilOp(p[0],p[1],p[2]),this.current=p,this.dirty=!1)}}class Xl extends xr{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;p?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST),this.current=p,this.dirty=!1}}class p0 extends xr{getDefault(){return[0,1]}set(p){const k=this.current;(p[0]!==k[0]||p[1]!==k[1]||this.dirty)&&(this.gl.depthRange(p[0],p[1]),this.current=p,this.dirty=!1)}}class Yl extends xr{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;p?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST),this.current=p,this.dirty=!1}}class js extends xr{getDefault(){return this.gl.LESS}set(p){(p!==this.current||this.dirty)&&(this.gl.depthFunc(p),this.current=p,this.dirty=!1)}}class kc extends xr{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;p?k.enable(k.BLEND):k.disable(k.BLEND),this.current=p,this.dirty=!1}}class El extends xr{getDefault(){const p=this.gl;return[p.ONE,p.ZERO]}set(p){const k=this.current;(p[0]!==k[0]||p[1]!==k[1]||this.dirty)&&(this.gl.blendFunc(p[0],p[1]),this.current=p,this.dirty=!1)}}class xu extends xr{getDefault(){return s.Color.transparent}set(p){const k=this.current;(p.r!==k.r||p.g!==k.g||p.b!==k.b||p.a!==k.a||this.dirty)&&(this.gl.blendColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)}}class Cl extends xr{getDefault(){return this.gl.FUNC_ADD}set(p){(p!==this.current||this.dirty)&&(this.gl.blendEquation(p),this.current=p,this.dirty=!1)}}class Ac extends xr{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;p?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE),this.current=p,this.dirty=!1}}class Us extends xr{getDefault(){return this.gl.BACK}set(p){(p!==this.current||this.dirty)&&(this.gl.cullFace(p),this.current=p,this.dirty=!1)}}class Gu extends xr{getDefault(){return this.gl.CCW}set(p){(p!==this.current||this.dirty)&&(this.gl.frontFace(p),this.current=p,this.dirty=!1)}}class Sc extends xr{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}}class Kl extends xr{getDefault(){return this.gl.TEXTURE0}set(p){(p!==this.current||this.dirty)&&(this.gl.activeTexture(p),this.current=p,this.dirty=!1)}}class qs extends xr{getDefault(){const p=this.gl;return[0,0,p.drawingBufferWidth,p.drawingBufferHeight]}set(p){const k=this.current;(p[0]!==k[0]||p[1]!==k[1]||p[2]!==k[2]||p[3]!==k[3]||this.dirty)&&(this.gl.viewport(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)}}class Mi extends xr{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,p),this.current=p,this.dirty=!1}}class bi extends xr{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.bindRenderbuffer(k.RENDERBUFFER,p),this.current=p,this.dirty=!1}}class rl extends xr{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.bindTexture(k.TEXTURE_2D,p),this.current=p,this.dirty=!1}}class il extends xr{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.bindBuffer(k.ARRAY_BUFFER,p),this.current=p,this.dirty=!1}}class Il extends xr{getDefault(){return null}set(p){const k=this.gl;k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,p),this.current=p,this.dirty=!1}}class Hn extends xr{getDefault(){return null}set(p){var k;if(p===this.current&&!this.dirty)return;const L=this.gl;m(L)?L.bindVertexArray(p):(k=L.getExtension("OES_vertex_array_object"))===null||k===void 0||k.bindVertexArrayOES(p),this.current=p,this.dirty=!1}}class Vs extends xr{getDefault(){return 4}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_ALIGNMENT,p),this.current=p,this.dirty=!1}}class Wu extends xr{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),this.current=p,this.dirty=!1}}class ne extends xr{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,p),this.current=p,this.dirty=!1}}class Ve extends xr{constructor(p,k){super(p),this.context=p,this.parent=k}getDefault(){return null}}class Rt extends Ve{setDirty(){this.dirty=!0}set(p){if(p===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,p,0),this.current=p,this.dirty=!1}}class ar extends Ve{set(p){if(p===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferRenderbuffer(k.FRAMEBUFFER,k.DEPTH_ATTACHMENT,k.RENDERBUFFER,p),this.current=p,this.dirty=!1}}class Ar extends Ve{set(p){if(p===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferRenderbuffer(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,p),this.current=p,this.dirty=!1}}class Hr{constructor(p,k,L,z,j){this.context=p,this.width=k,this.height=L;const K=p.gl,re=this.framebuffer=K.createFramebuffer();if(this.colorAttachment=new Rt(p,re),z)this.depthAttachment=j?new Ar(p,re):new ar(p,re);else if(j)throw new Error("Stencil cannot be setted without depth");if(K.checkFramebufferStatus(K.FRAMEBUFFER)!==K.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const p=this.context.gl,k=this.colorAttachment.get();if(k&&p.deleteTexture(k),this.depthAttachment){const L=this.depthAttachment.get();L&&p.deleteRenderbuffer(L)}p.deleteFramebuffer(this.framebuffer)}}class Wr{constructor(p,k,L){this.blendFunction=p,this.blendColor=k,this.mask=L}}Wr.Replace=[1,0],Wr.disabled=new Wr(Wr.Replace,s.Color.transparent,[!1,!1,!1,!1]),Wr.unblended=new Wr(Wr.Replace,s.Color.transparent,[!0,!0,!0,!0]),Wr.alphaBlended=new Wr([1,771],s.Color.transparent,[!0,!0,!0,!0]);class Di{constructor(p){var k,L;if(this.gl=p,this.clearColor=new h(this),this.clearDepth=new P(this),this.clearStencil=new ci(this),this.colorMask=new Oi(this),this.depthMask=new wo(this),this.stencilMask=new ie(this),this.stencilFunc=new wn(this),this.stencilOp=new Bs(this),this.stencilTest=new Xl(this),this.depthRange=new p0(this),this.depthTest=new Yl(this),this.depthFunc=new js(this),this.blend=new kc(this),this.blendFunc=new El(this),this.blendColor=new xu(this),this.blendEquation=new Cl(this),this.cullFace=new Ac(this),this.cullFaceSide=new Us(this),this.frontFace=new Gu(this),this.program=new Sc(this),this.activeTexture=new Kl(this),this.viewport=new qs(this),this.bindFramebuffer=new Mi(this),this.bindRenderbuffer=new bi(this),this.bindTexture=new rl(this),this.bindVertexBuffer=new il(this),this.bindElementBuffer=new Il(this),this.bindVertexArray=new Hn(this),this.pixelStoreUnpack=new Vs(this),this.pixelStoreUnpackPremultiplyAlpha=new Wu(this),this.pixelStoreUnpackFlipY=new ne(this),this.extTextureFilterAnisotropic=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=p.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE),m(p)){this.HALF_FLOAT=p.HALF_FLOAT;const z=p.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(k=p.RGBA16F)!==null&&k!==void 0?k:z==null?void 0:z.RGBA16F_EXT,this.RGB16F=(L=p.RGB16F)!==null&&L!==void 0?L:z==null?void 0:z.RGB16F_EXT,p.getExtension("EXT_color_buffer_float")}else{p.getExtension("EXT_color_buffer_half_float"),p.getExtension("OES_texture_half_float_linear");const z=p.getExtension("OES_texture_half_float");this.HALF_FLOAT=z==null?void 0:z.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(p,k){return new Mr(this,p,k)}createVertexBuffer(p,k,L){return new wi(this,p,k,L)}createRenderbuffer(p,k,L){const z=this.gl,j=z.createRenderbuffer();return this.bindRenderbuffer.set(j),z.renderbufferStorage(z.RENDERBUFFER,p,k,L),this.bindRenderbuffer.set(null),j}createFramebuffer(p,k,L,z){return new Hr(this,p,k,L,z)}clear({color:p,depth:k,stencil:L}){const z=this.gl;let j=0;p&&(j|=z.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),k!==void 0&&(j|=z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(k),this.depthMask.set(!0)),L!==void 0&&(j|=z.STENCIL_BUFFER_BIT,this.clearStencil.set(L),this.stencilMask.set(255)),z.clear(j)}setCullFace(p){p.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(p.mode),this.frontFace.set(p.frontFace))}setDepthMode(p){p.func!==this.gl.ALWAYS||p.mask?(this.depthTest.set(!0),this.depthFunc.set(p.func),this.depthMask.set(p.mask),this.depthRange.set(p.range)):this.depthTest.set(!1)}setStencilMode(p){p.test.func!==this.gl.ALWAYS||p.mask?(this.stencilTest.set(!0),this.stencilMask.set(p.mask),this.stencilOp.set([p.fail,p.depthFail,p.pass]),this.stencilFunc.set({func:p.test.func,ref:p.ref,mask:p.test.mask})):this.stencilTest.set(!1)}setColorMode(p){s.deepEqual(p.blendFunction,Wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(p.blendFunction),this.blendColor.set(p.blendColor)),this.colorMask.set(p.mask)}createVertexArray(){var p;return m(this.gl)?this.gl.createVertexArray():(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.createVertexArrayOES()}deleteVertexArray(p){var k;return m(this.gl)?this.gl.deleteVertexArray(p):(k=this.gl.getExtension("OES_vertex_array_object"))===null||k===void 0?void 0:k.deleteVertexArrayOES(p)}unbindVAO(){this.bindVertexArray.set(null)}}class fi{constructor(p,k,L){this.func=p,this.mask=k,this.range=L}}fi.ReadOnly=!1,fi.ReadWrite=!0,fi.disabled=new fi(519,fi.ReadOnly,[0,1]);const xn=7680;class Wi{constructor(p,k,L,z,j,K){this.test=p,this.ref=k,this.mask=L,this.fail=z,this.depthFail=j,this.pass=K}}Wi.disabled=new Wi({func:519,mask:0},0,0,xn,xn,xn);class nn{constructor(p,k,L){this.enable=p,this.mode=k,this.frontFace=L}}let xo;function Oo(R,p,k,L,z,j,K){const re=R.context,ae=re.gl,ve=R.useProgram("collisionBox"),Ee=[];let Te=0,Ze=0;for(let fe=0;fe<L.length;fe++){const Se=L[fe],De=p.getTile(Se),je=De.getBucket(k);if(!je)continue;let ut=Se.posMatrix;z[0]===0&&z[1]===0||(ut=R.translatePosMatrix(Se.posMatrix,De,z,j));const Dt=K?je.textCollisionBox:je.iconCollisionBox,Tt=je.collisionCircleArray;if(Tt.length>0){const Ct=s.create(),br=ut;s.mul(Ct,je.placementInvProjMatrix,R.transform.glCoordMatrix),s.mul(Ct,Ct,je.placementViewportMatrix),Ee.push({circleArray:Tt,circleOffset:Ze,transform:br,invTransform:Ct,coord:Se}),Te+=Tt.length/4,Ze=Te}Dt&&ve.draw(re,ae.LINES,fi.disabled,Wi.disabled,R.colorModeForRenderPass(),nn.disabled,wc(ut,R.transform,De),R.style.map.terrain&&R.style.map.terrain.getTerrainData(Se),k.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,null,R.transform.zoom,null,null,Dt.collisionVertexBuffer)}if(!K||!Ee.length)return;const T=R.useProgram("collisionCircle"),B=new s.CollisionCircleLayoutArray;B.resize(4*Te),B._trim();let W=0;for(const fe of Ee)for(let Se=0;Se<fe.circleArray.length/4;Se++){const De=4*Se,je=fe.circleArray[De+0],ut=fe.circleArray[De+1],Dt=fe.circleArray[De+2],Tt=fe.circleArray[De+3];B.emplace(W++,je,ut,Dt,Tt,0),B.emplace(W++,je,ut,Dt,Tt,1),B.emplace(W++,je,ut,Dt,Tt,2),B.emplace(W++,je,ut,Dt,Tt,3)}(!xo||xo.length<2*Te)&&(xo=function(fe){const Se=2*fe,De=new s.QuadTriangleArray;De.resize(Se),De._trim();for(let je=0;je<Se;je++){const ut=6*je;De.uint16[ut+0]=4*je+0,De.uint16[ut+1]=4*je+1,De.uint16[ut+2]=4*je+2,De.uint16[ut+3]=4*je+2,De.uint16[ut+4]=4*je+3,De.uint16[ut+5]=4*je+0}return De}(Te));const Q=re.createIndexBuffer(xo,!0),de=re.createVertexBuffer(B,s.collisionCircleLayout.members,!0);for(const fe of Ee){const Se={u_matrix:fe.transform,u_inv_matrix:fe.invTransform,u_camera_to_center_distance:(ke=R.transform).cameraToCenterDistance,u_viewport_size:[ke.width,ke.height]};T.draw(re,ae.TRIANGLES,fi.disabled,Wi.disabled,R.colorModeForRenderPass(),nn.disabled,Se,R.style.map.terrain&&R.style.map.terrain.getTerrainData(fe.coord),k.id,de,Q,s.SegmentVector.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,R.transform.zoom,null,null,null)}var ke;de.destroy(),Q.destroy()}nn.disabled=new nn(!1,1029,2305),nn.backCCW=new nn(!0,1029,2305);const Wo=s.identity(new Float32Array(16));function za(R,p,k,L,z,j){const{horizontalAlign:K,verticalAlign:re}=s.getAnchorAlignment(R);return new s.Point((-(K-.5)*p/z+L[0])*j,(-(re-.5)*k/z+L[1])*j)}function jo(R,p,k,L,z,j,K,re,ae,ve,Ee){const Te=R.text.placedSymbolArray,Ze=R.text.dynamicLayoutVertexArray,T=R.icon.dynamicLayoutVertexArray,B={};Ze.clear();for(let W=0;W<Te.length;W++){const Q=Te.get(W),de=Q.hidden||!Q.crossTileID||R.allowVerticalPlacement&&!Q.placedOrientation?null:L[Q.crossTileID];if(de){const ke=new s.Point(Q.anchorX,Q.anchorY),fe=fr(ke,k?K:j,Ee),Se=Qr(z.cameraToCenterDistance,fe.signedDistanceFromCamera);let De=s.evaluateSizeForFeature(R.textSizeData,ae,Q)*Se/s.ONE_EM;k&&(De*=R.tilePixelRatio/re);const{width:je,height:ut,anchor:Dt,textOffset:Tt,textBoxScale:Ct}=de,br=za(Dt,je,ut,Tt,Ct,De),kr=k?fr(ke.add(br),j,Ee).point:fe.point.add(p?br.rotate(-z.angle):br),_t=R.allowVerticalPlacement&&Q.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let jt=0;jt<Q.numGlyphs;jt++)s.addDynamicAttributes(Ze,kr,_t);ve&&Q.associatedIconIndex>=0&&(B[Q.associatedIconIndex]={shiftedAnchor:kr,angle:_t})}else lt(Q.numGlyphs,Ze)}if(ve){T.clear();const W=R.icon.placedSymbolArray;for(let Q=0;Q<W.length;Q++){const de=W.get(Q);if(de.hidden)lt(de.numGlyphs,T);else{const ke=B[Q];if(ke)for(let fe=0;fe<de.numGlyphs;fe++)s.addDynamicAttributes(T,ke.shiftedAnchor,ke.angle);else lt(de.numGlyphs,T)}}R.icon.dynamicLayoutVertexBuffer.updateData(T)}R.text.dynamicLayoutVertexBuffer.updateData(Ze)}function Fn(R,p,k){return k.iconsInText&&p?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function Sa(R,p,k,L,z,j,K,re,ae,ve,Ee,Te){const Ze=R.context,T=Ze.gl,B=R.transform,W=re==="map",Q=ae==="map",de=re!=="viewport"&&k.layout.get("symbol-placement")!=="point",ke=W&&!Q&&!de,fe=!k.layout.get("symbol-sort-key").isConstant();let Se=!1;const De=R.depthModeForSublayer(0,fi.ReadOnly),je=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ut=[];for(const Dt of L){const Tt=p.getTile(Dt),Ct=Tt.getBucket(k);if(!Ct)continue;const br=z?Ct.text:Ct.icon;if(!br||!br.segments.get().length||!br.hasVisibleVertices)continue;const kr=br.programConfigurations.get(k.id),_t=z||Ct.sdfIcons,jt=z?Ct.textSizeData:Ct.iconSizeData,hr=Q||B.pitch!==0,Ur=R.useProgram(Fn(_t,z,Ct),kr),Pr=s.evaluateSizeForZoom(jt,B.zoom),qr=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Dt);let Xr,zi,ii,Pn,In=[0,0],hn=null;if(z)zi=Tt.glyphAtlasTexture,ii=T.LINEAR,Xr=Tt.glyphAtlasTexture.size,Ct.iconsInText&&(In=Tt.imageAtlasTexture.size,hn=Tt.imageAtlasTexture,Pn=hr||R.options.rotating||R.options.zooming||jt.kind==="composite"||jt.kind==="camera"?T.LINEAR:T.NEAREST);else{const Qn=k.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;zi=Tt.imageAtlasTexture,ii=_t||R.options.rotating||R.options.zooming||Qn||hr?T.LINEAR:T.NEAREST,Xr=Tt.imageAtlasTexture.size}const vn=Qt(Tt,1,R.transform.zoom),Jn=qi(Dt.posMatrix,Q,W,R.transform,vn),Gn=kt(Dt.posMatrix,Q,W,R.transform,vn),bn=je&&Ct.hasTextData(),Vo=k.layout.get("icon-text-fit")!=="none"&&bn&&Ct.hasIconData();if(de){const Qn=R.style.map.terrain?(yo,eo)=>R.style.map.terrain.getElevation(Dt,yo,eo):null,zn=k.layout.get("text-rotation-alignment")==="map";ki(Ct,Dt.posMatrix,R,z,Jn,Gn,Q,ve,zn,Qn)}const mn=R.translatePosMatrix(Dt.posMatrix,Tt,j,K),Eo=de||z&&je||Vo?Wo:Jn,uo=R.translatePosMatrix(Gn,Tt,j,K,!0),Cn=_t&&k.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Po;Po=_t?Ct.iconsInText?wr(jt.kind,Pr,ke,Q,R,mn,Eo,uo,Xr,In):Ot(jt.kind,Pr,ke,Q,R,mn,Eo,uo,z,Xr,!0):Bt(jt.kind,Pr,ke,Q,R,mn,Eo,uo,z,Xr);const ba={program:Ur,buffers:br,uniformValues:Po,atlasTexture:zi,atlasTextureIcon:hn,atlasInterpolation:ii,atlasInterpolationIcon:Pn,isSDF:_t,hasHalo:Cn};if(fe&&Ct.canOverlap){Se=!0;const Qn=br.segments.get();for(const zn of Qn)ut.push({segments:new s.SegmentVector([zn]),sortKey:zn.sortKey,state:ba,terrainData:qr})}else ut.push({segments:br.segments,sortKey:0,state:ba,terrainData:qr})}Se&&ut.sort((Dt,Tt)=>Dt.sortKey-Tt.sortKey);for(const Dt of ut){const Tt=Dt.state;if(Ze.activeTexture.set(T.TEXTURE0),Tt.atlasTexture.bind(Tt.atlasInterpolation,T.CLAMP_TO_EDGE),Tt.atlasTextureIcon&&(Ze.activeTexture.set(T.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,T.CLAMP_TO_EDGE)),Tt.isSDF){const Ct=Tt.uniformValues;Tt.hasHalo&&(Ct.u_is_halo=1,cs(Tt.buffers,Dt.segments,k,R,Tt.program,De,Ee,Te,Ct,Dt.terrainData)),Ct.u_is_halo=0}cs(Tt.buffers,Dt.segments,k,R,Tt.program,De,Ee,Te,Tt.uniformValues,Dt.terrainData)}}function cs(R,p,k,L,z,j,K,re,ae,ve){const Ee=L.context;z.draw(Ee,Ee.gl.TRIANGLES,j,K,re,nn.disabled,ae,ve,k.id,R.layoutVertexBuffer,R.indexBuffer,p,k.paint,L.transform.zoom,R.programConfigurations.get(k.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function nl(R,p,k,L,z){if(!k||!L||!L.imageAtlas)return;const j=L.imageAtlas.patternPositions;let K=j[k.to.toString()],re=j[k.from.toString()];if(!K||!re){const ae=z.getPaintProperty(p);K=j[ae],re=j[ae]}K&&re&&R.setConstantPatternPositions(K,re)}function Ll(R,p,k,L,z,j,K){const re=R.context.gl,ae="fill-pattern",ve=k.paint.get(ae),Ee=ve&&ve.constantOr(1),Te=k.getCrossfadeParameters();let Ze,T,B,W,Q;K?(T=Ee&&!k.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ze=re.LINES):(T=Ee?"fillPattern":"fill",Ze=re.TRIANGLES);const de=ve.constantOr(null);for(const ke of L){const fe=p.getTile(ke);if(Ee&&!fe.patternsLoaded())continue;const Se=fe.getBucket(k);if(!Se)continue;const De=Se.programConfigurations.get(k.id),je=R.useProgram(T,De),ut=R.style.map.terrain&&R.style.map.terrain.getTerrainData(ke);Ee&&(R.context.activeTexture.set(re.TEXTURE0),fe.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),De.updatePaintBuffers(Te)),nl(De,ae,de,fe,k);const Dt=ut?ke:null,Tt=R.translatePosMatrix(Dt?Dt.posMatrix:ke.posMatrix,fe,k.paint.get("fill-translate"),k.paint.get("fill-translate-anchor"));if(K){W=Se.indexBuffer2,Q=Se.segments2;const Ct=[re.drawingBufferWidth,re.drawingBufferHeight];B=T==="fillOutlinePattern"&&Ee?Wl(Tt,R,Te,fe,Ct):el(Tt,Ct)}else W=Se.indexBuffer,Q=Se.segments,B=Ee?bu(Tt,R,Te,fe):Hu(Tt);je.draw(R.context,Ze,z,R.stencilModeForClipping(ke),j,nn.disabled,B,ut,k.id,Se.layoutVertexBuffer,W,Q,k.paint,R.transform.zoom,De)}}function Jl(R,p,k,L,z,j,K){const re=R.context,ae=re.gl,ve="fill-extrusion-pattern",Ee=k.paint.get(ve),Te=Ee.constantOr(1),Ze=k.getCrossfadeParameters(),T=k.paint.get("fill-extrusion-opacity"),B=Ee.constantOr(null);for(const W of L){const Q=p.getTile(W),de=Q.getBucket(k);if(!de)continue;const ke=R.style.map.terrain&&R.style.map.terrain.getTerrainData(W),fe=de.programConfigurations.get(k.id),Se=R.useProgram(Te?"fillExtrusionPattern":"fillExtrusion",fe);Te&&(R.context.activeTexture.set(ae.TEXTURE0),Q.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),fe.updatePaintBuffers(Ze)),nl(fe,ve,B,Q,k);const De=R.translatePosMatrix(W.posMatrix,Q,k.paint.get("fill-extrusion-translate"),k.paint.get("fill-extrusion-translate-anchor")),je=k.paint.get("fill-extrusion-vertical-gradient"),ut=Te?bc(De,R,je,T,W,Ze,Q):Os(De,R,je,T);Se.draw(re,re.gl.TRIANGLES,z,j,K,nn.backCCW,ut,ke,k.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,k.paint,R.transform.zoom,fe,R.style.map.terrain&&de.centroidVertexBuffer)}}function Tl(R,p,k,L,z,j,K){const re=R.context,ae=re.gl,ve=k.fbo;if(!ve)return;const Ee=R.useProgram("hillshade"),Te=R.style.map.terrain&&R.style.map.terrain.getTerrainData(p);re.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,ve.colorAttachment.get()),Ee.draw(re,ae.TRIANGLES,z,j,K,nn.disabled,((Ze,T,B,W)=>{const Q=B.paint.get("hillshade-shadow-color"),de=B.paint.get("hillshade-highlight-color"),ke=B.paint.get("hillshade-accent-color");let fe=B.paint.get("hillshade-illumination-direction")*(Math.PI/180);B.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=Ze.transform.angle);const Se=!Ze.options.moving;return{u_matrix:W?W.posMatrix:Ze.transform.calculatePosMatrix(T.tileID.toUnwrapped(),Se),u_image:0,u_latrange:tl(0,T.tileID),u_light:[B.paint.get("hillshade-exaggeration"),fe],u_shadow:Q,u_highlight:de,u_accent:ke}})(R,k,L,Te?p:null),Te,L.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}function ku(R,p,k,L,z,j){const K=R.context,re=K.gl,ae=p.dem;if(ae&&ae.data){const ve=ae.dim,Ee=ae.stride,Te=ae.getPixels();if(K.activeTexture.set(re.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||R.getTileTexture(Ee),p.demTexture){const T=p.demTexture;T.update(Te,{premultiply:!1}),T.bind(re.NEAREST,re.CLAMP_TO_EDGE)}else p.demTexture=new Ue(K,Te,re.RGBA,{premultiply:!1}),p.demTexture.bind(re.NEAREST,re.CLAMP_TO_EDGE);K.activeTexture.set(re.TEXTURE0);let Ze=p.fbo;if(!Ze){const T=new Ue(K,{width:ve,height:ve,data:null},re.RGBA);T.bind(re.LINEAR,re.CLAMP_TO_EDGE),Ze=p.fbo=K.createFramebuffer(ve,ve,!0,!1),Ze.colorAttachment.set(T.texture)}K.bindFramebuffer.set(Ze.framebuffer),K.viewport.set([0,0,ve,ve]),R.useProgram("hillshadePrepare").draw(K,re.TRIANGLES,L,z,j,nn.disabled,((T,B)=>{const W=B.stride,Q=s.create();return s.ortho(Q,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(Q,Q,[0,-s.EXTENT,0]),{u_matrix:Q,u_image:1,u_dimension:[W,W],u_zoom:T.overscaledZ,u_unpack:B.getUnpackVector()}})(p.tileID,ae),null,k.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function Ec(R,p,k,L,z,j){const K=L.paint.get("raster-fade-duration");if(!j&&K>0){const re=s.browser.now(),ae=(re-R.timeAdded)/K,ve=p?(re-p.timeAdded)/K:-1,Ee=k.getSource(),Te=z.coveringZoomLevel({tileSize:Ee.tileSize,roundZoom:Ee.roundZoom}),Ze=!p||Math.abs(p.tileID.overscaledZ-Te)>Math.abs(R.tileID.overscaledZ-Te),T=Ze&&R.refreshedUponExpiration?1:s.clamp(Ze?ae:1-ve,0,1);return R.refreshedUponExpiration&&ae>=1&&(R.refreshedUponExpiration=!1),p?{opacity:1,mix:1-T}:{opacity:T,mix:0}}return{opacity:1,mix:0}}const Ql=new s.Color(1,0,0,1),ao=new s.Color(0,1,0,1),ks=new s.Color(0,0,1,1),va=new s.Color(1,0,1,1),Pl=new s.Color(0,1,1,1);function ol(R,p,k,L){As(R,0,p+k/2,R.transform.width,k,L)}function Ea(R,p,k,L){As(R,p-k/2,0,k,R.transform.height,L)}function As(R,p,k,L,z,j){const K=R.context,re=K.gl;re.enable(re.SCISSOR_TEST),re.scissor(p*R.pixelRatio,k*R.pixelRatio,L*R.pixelRatio,z*R.pixelRatio),K.clear({color:j}),re.disable(re.SCISSOR_TEST)}function al(R,p,k){const L=R.context,z=L.gl,j=k.posMatrix,K=R.useProgram("debug"),re=fi.disabled,ae=Wi.disabled,ve=R.colorModeForRenderPass(),Ee="$debug",Te=R.style.map.terrain&&R.style.map.terrain.getTerrainData(k);L.activeTexture.set(z.TEXTURE0);const Ze=p.getTileByID(k.key).latestRawTileData,T=Math.floor((Ze&&Ze.byteLength||0)/1024),B=p.getTile(k).tileSize,W=512/Math.min(B,512)*(k.overscaledZ/R.transform.zoom)*.5;let Q=k.canonical.toString();k.overscaledZ!==k.canonical.z&&(Q+=` => ${k.overscaledZ}`),function(de,ke){de.initDebugOverlayCanvas();const fe=de.debugOverlayCanvas,Se=de.context.gl,De=de.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,fe.width,fe.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(ke,5,5),De.strokeText(ke,5,5),de.debugOverlayTexture.update(fe),de.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(R,`${Q} ${T}kB`),K.draw(L,z.TRIANGLES,re,ae,Wr.alphaBlended,nn.disabled,xc(j,s.Color.transparent,W),null,Ee,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments),K.draw(L,z.LINE_STRIP,re,ae,ve,nn.disabled,xc(j,s.Color.red),Te,Ee,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments)}function eu(R,p,k){const L=R.context,z=L.gl,j=R.colorModeForRenderPass(),K=new fi(z.LEQUAL,fi.ReadWrite,R.depthRangeFor3D),re=R.useProgram("terrain"),ae=p.getTerrainMesh();L.bindFramebuffer.set(null),L.viewport.set([0,0,R.width,R.height]);for(const ve of k){const Ee=R.renderToTexture.getTexture(ve),Te=p.getTerrainData(ve.tileID);L.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Ee.texture);const Ze={u_matrix:R.transform.calculatePosMatrix(ve.tileID.toUnwrapped()),u_texture:0,u_ele_delta:p.getMeshFrameDelta(R.transform.zoom)};re.draw(L,z.TRIANGLES,K,Wi.disabled,j,nn.backCCW,Ze,Te,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}}class Ka{constructor(p,k){this.context=new Di(p),this.transform=k,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.create(),renderTime:0},this.setup(),this.numSublayers=Vr.maxUnderzooming+Vr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ao}resize(p,k,L){if(this.width=Math.floor(p*L),this.height=Math.floor(k*L),this.pixelRatio=L,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const z of this.style._order)this.style._layers[z].resize()}setup(){const p=this.context,k=new s.PosArray;k.emplaceBack(0,0),k.emplaceBack(s.EXTENT,0),k.emplaceBack(0,s.EXTENT),k.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=p.createVertexBuffer(k,Js.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const L=new s.PosArray;L.emplaceBack(0,0),L.emplaceBack(s.EXTENT,0),L.emplaceBack(0,s.EXTENT),L.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=p.createVertexBuffer(L,Js.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const z=new s.RasterBoundsArray;z.emplaceBack(0,0,0,0),z.emplaceBack(s.EXTENT,0,s.EXTENT,0),z.emplaceBack(0,s.EXTENT,0,s.EXTENT),z.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=p.createVertexBuffer(z,yr.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const j=new s.PosArray;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=p.createVertexBuffer(j,Js.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const K=new s.LineStripIndexArray;K.emplaceBack(0),K.emplaceBack(1),K.emplaceBack(3),K.emplaceBack(2),K.emplaceBack(0),this.tileBorderIndexBuffer=p.createIndexBuffer(K);const re=new s.TriangleIndexArray;re.emplaceBack(0,1,2),re.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=p.createIndexBuffer(re);const ae=this.context.gl;this.stencilClearMode=new Wi({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO)}clearStencil(){const p=this.context,k=p.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const L=s.create();s.ortho(L,0,this.width,this.height,0,0,1),s.scale(L,L,[k.drawingBufferWidth,k.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(p,k.TRIANGLES,fi.disabled,this.stencilClearMode,Wr.disabled,nn.disabled,Zl(L),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(p,k){if(this.currentStencilSource===p.source||!p.isTileClipped()||!k||!k.length)return;this.currentStencilSource=p.source;const L=this.context,z=L.gl;this.nextStencilID+k.length>256&&this.clearStencil(),L.setColorMode(Wr.disabled),L.setDepthMode(fi.disabled);const j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const K of k){const re=this._tileClippingMaskIDs[K.key]=this.nextStencilID++,ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(K);j.draw(L,z.TRIANGLES,fi.disabled,new Wi({func:z.ALWAYS,mask:0},re,255,z.KEEP,z.KEEP,z.REPLACE),Wr.disabled,nn.disabled,Zl(K.posMatrix),ae,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const p=this.nextStencilID++,k=this.context.gl;return new Wi({func:k.NOTEQUAL,mask:255},p,255,k.KEEP,k.KEEP,k.REPLACE)}stencilModeForClipping(p){const k=this.context.gl;return new Wi({func:k.EQUAL,mask:255},this._tileClippingMaskIDs[p.key],0,k.KEEP,k.KEEP,k.REPLACE)}stencilConfigForOverlap(p){const k=this.context.gl,L=p.sort((K,re)=>re.overscaledZ-K.overscaledZ),z=L[L.length-1].overscaledZ,j=L[0].overscaledZ-z+1;if(j>1){this.currentStencilSource=void 0,this.nextStencilID+j>256&&this.clearStencil();const K={};for(let re=0;re<j;re++)K[re+z]=new Wi({func:k.GEQUAL,mask:255},re+this.nextStencilID,255,k.KEEP,k.KEEP,k.REPLACE);return this.nextStencilID+=j,[K,L]}return[{[z]:Wi.disabled},L]}colorModeForRenderPass(){const p=this.context.gl;return this._showOverdrawInspector?new Wr([p.CONSTANT_COLOR,p.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wr.unblended:Wr.alphaBlended}depthModeForSublayer(p,k,L){if(!this.opaquePassEnabledForLayer())return fi.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+p)*this.depthEpsilon;return new fi(L||this.context.gl.LEQUAL,k,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(p,k){this.style=p,this.options=k,this.lineAtlas=p.lineAtlas,this.imageManager=p.imageManager,this.glyphManager=p.glyphManager,this.symbolFadeChange=p.placement.symbolFadeChange(s.browser.now()),this.imageManager.beginFrame();const L=this.style._order,z=this.style.sourceCaches,j={},K={},re={};for(const ae in z){const ve=z[ae];ve.used&&ve.prepare(this.context),j[ae]=ve.getVisibleCoordinates(),K[ae]=j[ae].slice().reverse(),re[ae]=ve.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ae=0;ae<L.length;ae++)if(this.style._layers[L[ae]].is3D()){this.opaquePassCutoff=ae;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const ae=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||ae.length)&&(s.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ve,Ee){const Te=ve.context,Ze=Te.gl,T=Wr.unblended,B=new fi(Ze.LEQUAL,fi.ReadWrite,[0,1]),W=Ee.getTerrainMesh(),Q=Ee.sourceCache.getRenderableTiles(),de=ve.useProgram("terrainDepth");Te.bindFramebuffer.set(Ee.getFramebuffer("depth").framebuffer),Te.viewport.set([0,0,ve.width/devicePixelRatio,ve.height/devicePixelRatio]),Te.clear({color:s.Color.transparent,depth:1});for(const ke of Q){const fe=Ee.getTerrainData(ke.tileID),Se={u_matrix:ve.transform.calculatePosMatrix(ke.tileID.toUnwrapped()),u_ele_delta:Ee.getMeshFrameDelta(ve.transform.zoom)};de.draw(Te,Ze.TRIANGLES,B,Wi.disabled,T,nn.backCCW,Se,fe,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}Te.bindFramebuffer.set(null),Te.viewport.set([0,0,ve.width,ve.height])}(this,this.style.map.terrain),function(ve,Ee){const Te=ve.context,Ze=Te.gl,T=Wr.unblended,B=new fi(Ze.LEQUAL,fi.ReadWrite,[0,1]),W=Ee.getTerrainMesh(),Q=Ee.getCoordsTexture(),de=Ee.sourceCache.getRenderableTiles(),ke=ve.useProgram("terrainCoords");Te.bindFramebuffer.set(Ee.getFramebuffer("coords").framebuffer),Te.viewport.set([0,0,ve.width/devicePixelRatio,ve.height/devicePixelRatio]),Te.clear({color:s.Color.transparent,depth:1}),Ee.coordsIndex=[];for(const fe of de){const Se=Ee.getTerrainData(fe.tileID);Te.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,Q.texture);const De={u_matrix:ve.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_terrain_coords_id:(255-Ee.coordsIndex.length)/255,u_texture:0,u_ele_delta:Ee.getMeshFrameDelta(ve.transform.zoom)};ke.draw(Te,Ze.TRIANGLES,B,Wi.disabled,T,nn.backCCW,De,Se,"terrain",W.vertexBuffer,W.indexBuffer,W.segments),Ee.coordsIndex.push(fe.tileID.key)}Te.bindFramebuffer.set(null),Te.viewport.set([0,0,ve.width,ve.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const ae of L){const ve=this.style._layers[ae];if(!ve.hasOffscreenPass()||ve.isHidden(this.transform.zoom))continue;const Ee=K[ve.source];(ve.type==="custom"||Ee.length)&&this.renderLayer(this,z[ve.source],ve,Ee)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:k.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=k.showOverdrawInspector,this.depthRangeFor3D=[0,1-(p._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const ae=this.style._layers[L[this.currentLayer]],ve=z[ae.source],Ee=j[ae.source];this._renderTileClippingMasks(ae,Ee),this.renderLayer(this,ve,ae,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const ae=this.style._layers[L[this.currentLayer]],ve=z[ae.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ae))continue;const Ee=(ae.type==="symbol"?re:K)[ae.source];this._renderTileClippingMasks(ae,j[ae.source]),this.renderLayer(this,ve,ae,Ee)}if(this.options.showTileBoundaries){const ae=function(ve,Ee){let Te=null;const Ze=Object.values(ve._layers).flatMap(Q=>Q.source&&!Q.isHidden(Ee)?[ve.sourceCaches[Q.source]]:[]),T=Ze.filter(Q=>Q.getSource().type==="vector"),B=Ze.filter(Q=>Q.getSource().type!=="vector"),W=Q=>{(!Te||Te.getSource().maxzoom<Q.getSource().maxzoom)&&(Te=Q)};return T.forEach(Q=>W(Q)),Te||B.forEach(Q=>W(Q)),Te}(this.style,this.transform.zoom);ae&&function(ve,Ee,Te){for(let Ze=0;Ze<Te.length;Ze++)al(ve,Ee,Te[Ze])}(this,ae,ae.getVisibleCoordinates())}this.options.showPadding&&function(ae){const ve=ae.transform.padding;ol(ae,ae.transform.height-(ve.top||0),3,Ql),ol(ae,ve.bottom||0,3,ao),Ea(ae,ve.left||0,3,ks),Ea(ae,ae.transform.width-(ve.right||0),3,va);const Ee=ae.transform.centerPoint;(function(Te,Ze,T,B){As(Te,Ze-1,T-10,2,20,B),As(Te,Ze-10,T-1,20,2,B)})(ae,Ee.x,ae.transform.height-Ee.y,Pl)}(this),this.context.setDefault()}renderLayer(p,k,L,z){if(!L.isHidden(this.transform.zoom)&&(L.type==="background"||L.type==="custom"||(z||[]).length))switch(this.id=L.id,L.type){case"symbol":(function(j,K,re,ae,ve){if(j.renderPass!=="translucent")return;const Ee=Wi.disabled,Te=j.colorModeForRenderPass();(re._unevaluatedLayout.hasValue("text-variable-anchor")||re._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ze,T,B,W,Q,de,ke){const fe=T.transform,Se=Q==="map",De=de==="map";for(const je of Ze){const ut=W.getTile(je),Dt=ut.getBucket(B);if(!Dt||!Dt.text||!Dt.text.segments.get().length)continue;const Tt=s.evaluateSizeForZoom(Dt.textSizeData,fe.zoom),Ct=Qt(ut,1,T.transform.zoom),br=qi(je.posMatrix,De,Se,T.transform,Ct),kr=B.layout.get("icon-text-fit")!=="none"&&Dt.hasIconData();if(Tt){const _t=Math.pow(2,fe.zoom-ut.tileID.overscaledZ);jo(Dt,Se,De,ke,fe,br,je.posMatrix,_t,Tt,kr,T.style.map.terrain?(jt,hr)=>T.style.map.terrain.getElevation(je,jt,hr):null)}}}(ae,j,re,K,re.layout.get("text-rotation-alignment"),re.layout.get("text-pitch-alignment"),ve),re.paint.get("icon-opacity").constantOr(1)!==0&&Sa(j,K,re,ae,!1,re.paint.get("icon-translate"),re.paint.get("icon-translate-anchor"),re.layout.get("icon-rotation-alignment"),re.layout.get("icon-pitch-alignment"),re.layout.get("icon-keep-upright"),Ee,Te),re.paint.get("text-opacity").constantOr(1)!==0&&Sa(j,K,re,ae,!0,re.paint.get("text-translate"),re.paint.get("text-translate-anchor"),re.layout.get("text-rotation-alignment"),re.layout.get("text-pitch-alignment"),re.layout.get("text-keep-upright"),Ee,Te),K.map.showCollisionBoxes&&(Oo(j,K,re,ae,re.paint.get("text-translate"),re.paint.get("text-translate-anchor"),!0),Oo(j,K,re,ae,re.paint.get("icon-translate"),re.paint.get("icon-translate-anchor"),!1))})(p,k,L,z,this.style.placement.variableOffsets);break;case"circle":(function(j,K,re,ae){if(j.renderPass!=="translucent")return;const ve=re.paint.get("circle-opacity"),Ee=re.paint.get("circle-stroke-width"),Te=re.paint.get("circle-stroke-opacity"),Ze=!re.layout.get("circle-sort-key").isConstant();if(ve.constantOr(1)===0&&(Ee.constantOr(1)===0||Te.constantOr(1)===0))return;const T=j.context,B=T.gl,W=j.depthModeForSublayer(0,fi.ReadOnly),Q=Wi.disabled,de=j.colorModeForRenderPass(),ke=[];for(let fe=0;fe<ae.length;fe++){const Se=ae[fe],De=K.getTile(Se),je=De.getBucket(re);if(!je)continue;const ut=je.programConfigurations.get(re.id),Dt=j.useProgram("circle",ut),Tt=je.layoutVertexBuffer,Ct=je.indexBuffer,br=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Se),kr={programConfiguration:ut,program:Dt,layoutVertexBuffer:Tt,indexBuffer:Ct,uniformValues:$u(j,Se,De,re),terrainData:br};if(Ze){const _t=je.segments.get();for(const jt of _t)ke.push({segments:new s.SegmentVector([jt]),sortKey:jt.sortKey,state:kr})}else ke.push({segments:je.segments,sortKey:0,state:kr})}Ze&&ke.sort((fe,Se)=>fe.sortKey-Se.sortKey);for(const fe of ke){const{programConfiguration:Se,program:De,layoutVertexBuffer:je,indexBuffer:ut,uniformValues:Dt,terrainData:Tt}=fe.state;De.draw(T,B.TRIANGLES,W,Q,de,nn.disabled,Dt,Tt,re.id,je,ut,fe.segments,re.paint,j.transform.zoom,Se)}})(p,k,L,z);break;case"heatmap":(function(j,K,re,ae){if(re.paint.get("heatmap-opacity")!==0)if(j.renderPass==="offscreen"){const ve=j.context,Ee=ve.gl,Te=Wi.disabled,Ze=new Wr([Ee.ONE,Ee.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(T,B,W){const Q=T.gl;T.activeTexture.set(Q.TEXTURE1),T.viewport.set([0,0,B.width/4,B.height/4]);let de=W.heatmapFbo;if(de)Q.bindTexture(Q.TEXTURE_2D,de.colorAttachment.get()),T.bindFramebuffer.set(de.framebuffer);else{const ke=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,ke),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),de=W.heatmapFbo=T.createFramebuffer(B.width/4,B.height/4,!1,!1),function(fe,Se,De,je){var ut,Dt;const Tt=fe.gl,Ct=(ut=fe.HALF_FLOAT)!==null&&ut!==void 0?ut:Tt.UNSIGNED_BYTE,br=(Dt=fe.RGBA16F)!==null&&Dt!==void 0?Dt:Tt.RGBA;Tt.texImage2D(Tt.TEXTURE_2D,0,br,Se.width/4,Se.height/4,0,Tt.RGBA,Ct,null),je.colorAttachment.set(De)}(T,B,ke,de)}})(ve,j,re),ve.clear({color:s.Color.transparent});for(let T=0;T<ae.length;T++){const B=ae[T];if(K.hasRenderableParent(B))continue;const W=K.getTile(B),Q=W.getBucket(re);if(!Q)continue;const de=Q.programConfigurations.get(re.id),ke=j.useProgram("heatmap",de),{zoom:fe}=j.transform;ke.draw(ve,Ee.TRIANGLES,fi.disabled,Te,Ze,nn.disabled,Fs(B.posMatrix,W,fe,re.paint.get("heatmap-intensity")),null,re.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,re.paint,j.transform.zoom,de)}ve.viewport.set([0,0,j.width,j.height])}else j.renderPass==="translucent"&&(j.context.setColorMode(j.colorModeForRenderPass()),function(ve,Ee){const Te=ve.context,Ze=Te.gl,T=Ee.heatmapFbo;if(!T)return;Te.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,T.colorAttachment.get()),Te.activeTexture.set(Ze.TEXTURE1);let B=Ee.colorRampTexture;B||(B=Ee.colorRampTexture=new Ue(Te,Ee.colorRamp,Ze.RGBA)),B.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(Te,Ze.TRIANGLES,fi.disabled,Wi.disabled,ve.colorModeForRenderPass(),nn.disabled,((W,Q,de,ke)=>{const fe=s.create();s.ortho(fe,0,W.width,W.height,0,0,1);const Se=W.context.gl;return{u_matrix:fe,u_world:[Se.drawingBufferWidth,Se.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Q.paint.get("heatmap-opacity")}})(ve,Ee),null,Ee.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,Ee.paint,ve.transform.zoom)}(j,re))})(p,k,L,z);break;case"line":(function(j,K,re,ae){if(j.renderPass!=="translucent")return;const ve=re.paint.get("line-opacity"),Ee=re.paint.get("line-width");if(ve.constantOr(1)===0||Ee.constantOr(1)===0)return;const Te=j.depthModeForSublayer(0,fi.ReadOnly),Ze=j.colorModeForRenderPass(),T=re.paint.get("line-dasharray"),B=re.paint.get("line-pattern"),W=B.constantOr(1),Q=re.paint.get("line-gradient"),de=re.getCrossfadeParameters(),ke=W?"linePattern":T?"lineSDF":Q?"lineGradient":"line",fe=j.context,Se=fe.gl;let De=!0;for(const je of ae){const ut=K.getTile(je);if(W&&!ut.patternsLoaded())continue;const Dt=ut.getBucket(re);if(!Dt)continue;const Tt=Dt.programConfigurations.get(re.id),Ct=j.context.program.get(),br=j.useProgram(ke,Tt),kr=De||br.program!==Ct,_t=j.style.map.terrain&&j.style.map.terrain.getTerrainData(je),jt=B.constantOr(null);if(jt&&ut.imageAtlas){const Pr=ut.imageAtlas,qr=Pr.patternPositions[jt.to.toString()],Xr=Pr.patternPositions[jt.from.toString()];qr&&Xr&&Tt.setConstantPatternPositions(qr,Xr)}const hr=_t?je:null,Ur=W?F(j,ut,re,de,hr):T?X(j,ut,re,T,de,hr):Q?wu(j,ut,re,Dt.lineClipsArray.length,hr):Sl(j,ut,re,hr);if(W)fe.activeTexture.set(Se.TEXTURE0),ut.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Tt.updatePaintBuffers(de);else if(T&&(kr||j.lineAtlas.dirty))fe.activeTexture.set(Se.TEXTURE0),j.lineAtlas.bind(fe);else if(Q){const Pr=Dt.gradients[re.id];let qr=Pr.texture;if(re.gradientVersion!==Pr.version){let Xr=256;if(re.stepInterpolant){const zi=K.getSource().maxzoom,ii=je.canonical.z===zi?Math.ceil(1<<j.transform.maxZoom-je.canonical.z):1;Xr=s.clamp(s.nextPowerOfTwo(Dt.maxLineLength/s.EXTENT*1024*ii),256,fe.maxTextureSize)}Pr.gradient=s.renderColorRamp({expression:re.gradientExpression(),evaluationKey:"lineProgress",resolution:Xr,image:Pr.gradient||void 0,clips:Dt.lineClipsArray}),Pr.texture?Pr.texture.update(Pr.gradient):Pr.texture=new Ue(fe,Pr.gradient,Se.RGBA),Pr.version=re.gradientVersion,qr=Pr.texture}fe.activeTexture.set(Se.TEXTURE0),qr.bind(re.stepInterpolant?Se.NEAREST:Se.LINEAR,Se.CLAMP_TO_EDGE)}br.draw(fe,Se.TRIANGLES,Te,j.stencilModeForClipping(je),Ze,nn.disabled,Ur,_t,re.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,re.paint,j.transform.zoom,Tt,Dt.layoutVertexBuffer2),De=!1}})(p,k,L,z);break;case"fill":(function(j,K,re,ae){const ve=re.paint.get("fill-color"),Ee=re.paint.get("fill-opacity");if(Ee.constantOr(1)===0)return;const Te=j.colorModeForRenderPass(),Ze=re.paint.get("fill-pattern"),T=j.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ve.constantOr(s.Color.transparent).a===1&&Ee.constantOr(0)===1?"opaque":"translucent";if(j.renderPass===T){const B=j.depthModeForSublayer(1,j.renderPass==="opaque"?fi.ReadWrite:fi.ReadOnly);Ll(j,K,re,ae,B,Te,!1)}if(j.renderPass==="translucent"&&re.paint.get("fill-antialias")){const B=j.depthModeForSublayer(re.getPaintProperty("fill-outline-color")?2:0,fi.ReadOnly);Ll(j,K,re,ae,B,Te,!0)}})(p,k,L,z);break;case"fill-extrusion":(function(j,K,re,ae){const ve=re.paint.get("fill-extrusion-opacity");if(ve!==0&&j.renderPass==="translucent"){const Ee=new fi(j.context.gl.LEQUAL,fi.ReadWrite,j.depthRangeFor3D);if(ve!==1||re.paint.get("fill-extrusion-pattern").constantOr(1))Jl(j,K,re,ae,Ee,Wi.disabled,Wr.disabled),Jl(j,K,re,ae,Ee,j.stencilModeFor3D(),j.colorModeForRenderPass());else{const Te=j.colorModeForRenderPass();Jl(j,K,re,ae,Ee,Wi.disabled,Te)}}})(p,k,L,z);break;case"hillshade":(function(j,K,re,ae){if(j.renderPass!=="offscreen"&&j.renderPass!=="translucent")return;const ve=j.context,Ee=j.depthModeForSublayer(0,fi.ReadOnly),Te=j.colorModeForRenderPass(),[Ze,T]=j.renderPass==="translucent"?j.stencilConfigForOverlap(ae):[{},ae];for(const B of T){const W=K.getTile(B);W.needsHillshadePrepare!==void 0&&W.needsHillshadePrepare&&j.renderPass==="offscreen"?ku(j,W,re,Ee,Wi.disabled,Te):j.renderPass==="translucent"&&Tl(j,B,W,re,Ee,Ze[B.overscaledZ],Te)}ve.viewport.set([0,0,j.width,j.height])})(p,k,L,z);break;case"raster":(function(j,K,re,ae){if(j.renderPass!=="translucent"||re.paint.get("raster-opacity")===0||!ae.length)return;const ve=j.context,Ee=ve.gl,Te=K.getSource(),Ze=j.useProgram("raster"),T=j.colorModeForRenderPass(),[B,W]=Te instanceof Er?[{},ae]:j.stencilConfigForOverlap(ae),Q=W[W.length-1].overscaledZ,de=!j.options.moving;for(const ke of W){const fe=j.depthModeForSublayer(ke.overscaledZ-Q,re.paint.get("raster-opacity")===1?fi.ReadWrite:fi.ReadOnly,Ee.LESS),Se=K.getTile(ke);Se.registerFadeDuration(re.paint.get("raster-fade-duration"));const De=K.findLoadedParent(ke,0),je=Ec(Se,De,K,re,j.transform,j.style.map.terrain);let ut,Dt;const Tt=re.paint.get("raster-resampling")==="nearest"?Ee.NEAREST:Ee.LINEAR;ve.activeTexture.set(Ee.TEXTURE0),Se.texture.bind(Tt,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ee.TEXTURE1),De?(De.texture.bind(Tt,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ut=Math.pow(2,De.tileID.overscaledZ-Se.tileID.overscaledZ),Dt=[Se.tileID.canonical.x*ut%1,Se.tileID.canonical.y*ut%1]):Se.texture.bind(Tt,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);const Ct=j.style.map.terrain&&j.style.map.terrain.getTerrainData(ke),br=Ct?ke:null,kr=br?br.posMatrix:j.transform.calculatePosMatrix(ke.toUnwrapped(),de),_t=tt(kr,Dt||[0,0],ut||1,je,re);Te instanceof Er?Ze.draw(ve,Ee.TRIANGLES,fe,Wi.disabled,T,nn.disabled,_t,Ct,re.id,Te.boundsBuffer,j.quadTriangleIndexBuffer,Te.boundsSegments):Ze.draw(ve,Ee.TRIANGLES,fe,B[ke.overscaledZ],T,nn.disabled,_t,Ct,re.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}})(p,k,L,z);break;case"background":(function(j,K,re,ae){const ve=re.paint.get("background-color"),Ee=re.paint.get("background-opacity");if(Ee===0)return;const Te=j.context,Ze=Te.gl,T=j.transform,B=T.tileSize,W=re.paint.get("background-pattern");if(j.isPatternMissing(W))return;const Q=!W&&ve.a===1&&Ee===1&&j.opaquePassEnabledForLayer()?"opaque":"translucent";if(j.renderPass!==Q)return;const de=Wi.disabled,ke=j.depthModeForSublayer(0,Q==="opaque"?fi.ReadWrite:fi.ReadOnly),fe=j.colorModeForRenderPass(),Se=j.useProgram(W?"backgroundPattern":"background"),De=ae||T.coveringTiles({tileSize:B,terrain:j.style.map.terrain});W&&(Te.activeTexture.set(Ze.TEXTURE0),j.imageManager.bind(j.context));const je=re.getCrossfadeParameters();for(const ut of De){const Dt=ae?ut.posMatrix:j.transform.calculatePosMatrix(ut.toUnwrapped()),Tt=W?vr(Dt,Ee,j,W,{tileID:ut,tileSize:B},je):pr(Dt,Ee,ve),Ct=j.style.map.terrain&&j.style.map.terrain.getTerrainData(ut);Se.draw(Te,Ze.TRIANGLES,ke,de,fe,nn.disabled,Tt,Ct,re.id,j.tileExtentBuffer,j.quadTriangleIndexBuffer,j.tileExtentSegments)}})(p,0,L,z);break;case"custom":(function(j,K,re){const ae=j.context,ve=re.implementation;if(j.renderPass==="offscreen"){const Ee=ve.prerender;Ee&&(j.setCustomLayerDefaults(),ae.setColorMode(j.colorModeForRenderPass()),Ee.call(ve,ae.gl,j.transform.customLayerMatrix()),ae.setDirty(),j.setBaseState())}else if(j.renderPass==="translucent"){j.setCustomLayerDefaults(),ae.setColorMode(j.colorModeForRenderPass()),ae.setStencilMode(Wi.disabled);const Ee=ve.renderingMode==="3d"?new fi(j.context.gl.LEQUAL,fi.ReadWrite,j.depthRangeFor3D):j.depthModeForSublayer(0,fi.ReadOnly);ae.setDepthMode(Ee),ve.render(ae.gl,j.transform.customLayerMatrix()),ae.setDirty(),j.setBaseState(),ae.bindFramebuffer.set(null)}})(p,0,L)}}translatePosMatrix(p,k,L,z,j){if(!L[0]&&!L[1])return p;const K=j?z==="map"?this.transform.angle:0:z==="viewport"?-this.transform.angle:0;if(K){const ve=Math.sin(K),Ee=Math.cos(K);L=[L[0]*Ee-L[1]*ve,L[0]*ve+L[1]*Ee]}const re=[j?L[0]:Qt(k,L[0],this.transform.zoom),j?L[1]:Qt(k,L[1],this.transform.zoom),0],ae=new Float32Array(16);return s.translate(ae,p,re),ae}saveTileTexture(p){const k=this._tileTextures[p.size[0]];k?k.push(p):this._tileTextures[p.size[0]]=[p]}getTileTexture(p){const k=this._tileTextures[p];return k&&k.length>0?k.pop():null}isPatternMissing(p){if(!p)return!1;if(!p.from||!p.to)return!0;const k=this.imageManager.getPattern(p.from.toString()),L=this.imageManager.getPattern(p.to.toString());return!k||!L}useProgram(p,k){this.cache=this.cache||{};const L=p+(k?k.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[L]||(this.cache[L]=new oa(this.context,Da[p],k,_r[p],this._showOverdrawInspector,this.style.map.terrain)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const p=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(p.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ue(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:p,drawingBufferHeight:k}=this.context.gl;return this.width!==p||this.height!==k}}class tu{constructor(p,k){this.points=p,this.planes=k}static fromInvProjectionMatrix(p,k,L){const z=Math.pow(2,L),j=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(re=>{const ae=1/(re=s.transformMat4([],re,p))[3]/k*z;return s.mul$1(re,re,[ae,ae,1/re[3],ae])}),K=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(re=>{const ae=function(Ze,T){var B=T[0],W=T[1],Q=T[2],de=B*B+W*W+Q*Q;return de>0&&(de=1/Math.sqrt(de)),Ze[0]=T[0]*de,Ze[1]=T[1]*de,Ze[2]=T[2]*de,Ze}([],function(Ze,T,B){var W=T[0],Q=T[1],de=T[2],ke=B[0],fe=B[1],Se=B[2];return Ze[0]=Q*Se-de*fe,Ze[1]=de*ke-W*Se,Ze[2]=W*fe-Q*ke,Ze}([],le([],j[re[0]],j[re[1]]),le([],j[re[2]],j[re[1]]))),ve=-((Ee=ae)[0]*(Te=j[re[1]])[0]+Ee[1]*Te[1]+Ee[2]*Te[2]);var Ee,Te;return ae.concat(ve)});return new tu(j,K)}}class ru{constructor(p,k){this.min=p,this.max=k,this.center=function(L,z,j){return L[0]=.5*z[0],L[1]=.5*z[1],L[2]=.5*z[2],L}([],function(L,z,j){return L[0]=z[0]+j[0],L[1]=z[1]+j[1],L[2]=z[2]+j[2],L}([],this.min,this.max))}quadrant(p){const k=[p%2==0,p<2],L=te(this.min),z=te(this.max);for(let j=0;j<k.length;j++)L[j]=k[j]?this.min[j]:this.center[j],z[j]=k[j]?this.center[j]:this.max[j];return z[2]=this.max[2],new ru(L,z)}distanceX(p){return Math.max(Math.min(this.max[0],p[0]),this.min[0])-p[0]}distanceY(p){return Math.max(Math.min(this.max[1],p[1]),this.min[1])-p[1]}intersects(p){const k=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let L=!0;for(let z=0;z<p.planes.length;z++){const j=p.planes[z];let K=0;for(let re=0;re<k.length;re++)s.dot(j,k[re])>=0&&K++;if(K===0)return 0;K!==k.length&&(L=!1)}if(L)return 2;for(let z=0;z<3;z++){let j=Number.MAX_VALUE,K=-Number.MAX_VALUE;for(let re=0;re<p.points.length;re++){const ae=p.points[re][z]-this.min[z];j=Math.min(j,ae),K=Math.max(K,ae)}if(K<0||j>this.max[z]-this.min[z])return 0}return 1}}class Zu{constructor(p=0,k=0,L=0,z=0){if(isNaN(p)||p<0||isNaN(k)||k<0||isNaN(L)||L<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=p,this.bottom=k,this.left=L,this.right=z}interpolate(p,k,L){return k.top!=null&&p.top!=null&&(this.top=s.interpolate.number(p.top,k.top,L)),k.bottom!=null&&p.bottom!=null&&(this.bottom=s.interpolate.number(p.bottom,k.bottom,L)),k.left!=null&&p.left!=null&&(this.left=s.interpolate.number(p.left,k.left,L)),k.right!=null&&p.right!=null&&(this.right=s.interpolate.number(p.right,k.right,L)),this}getCenter(p,k){const L=s.clamp((this.left+p-this.right)/2,0,p),z=s.clamp((this.top+k-this.bottom)/2,0,k);return new s.Point(L,z)}equals(p){return this.top===p.top&&this.bottom===p.bottom&&this.left===p.left&&this.right===p.right}clone(){return new Zu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Hs{constructor(p,k,L,z,j){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=j===void 0||!!j,this._minZoom=p||0,this._maxZoom=k||22,this._minPitch=L??0,this._maxPitch=z??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zu,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const p=new Hs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return p.apply(this),p}apply(p){this.tileSize=p.tileSize,this.latRange=p.latRange,this.width=p.width,this.height=p.height,this._center=p._center,this._elevation=p._elevation,this._minEleveationForCurrentTile=p._minEleveationForCurrentTile,this.zoom=p.zoom,this.angle=p.angle,this._fov=p._fov,this._pitch=p._pitch,this._unmodified=p._unmodified,this._edgeInsets=p._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(p){this._minZoom!==p&&(this._minZoom=p,this.zoom=Math.max(this.zoom,p))}get maxZoom(){return this._maxZoom}set maxZoom(p){this._maxZoom!==p&&(this._maxZoom=p,this.zoom=Math.min(this.zoom,p))}get minPitch(){return this._minPitch}set minPitch(p){this._minPitch!==p&&(this._minPitch=p,this.pitch=Math.max(this.pitch,p))}get maxPitch(){return this._maxPitch}set maxPitch(p){this._maxPitch!==p&&(this._maxPitch=p,this.pitch=Math.min(this.pitch,p))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(p){p===void 0?p=!0:p===null&&(p=!1),this._renderWorldCopies=p}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(p){const k=-s.wrap(p,-180,180)*Math.PI/180;this.angle!==k&&(this._unmodified=!1,this.angle=k,this._calcMatrices(),this.rotationMatrix=function(){var L=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L}(),function(L,z,j){var K=z[0],re=z[1],ae=z[2],ve=z[3],Ee=Math.sin(j),Te=Math.cos(j);L[0]=K*Te+ae*Ee,L[1]=re*Te+ve*Ee,L[2]=K*-Ee+ae*Te,L[3]=re*-Ee+ve*Te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(p){const k=s.clamp(p,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==k&&(this._unmodified=!1,this._pitch=k,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(p){p=Math.max(.01,Math.min(60,p)),this._fov!==p&&(this._unmodified=!1,this._fov=p/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(p){const k=Math.min(Math.max(p,this.minZoom),this.maxZoom);this._zoom!==k&&(this._unmodified=!1,this._zoom=k,this.tileZoom=Math.max(0,Math.floor(k)),this.scale=this.zoomScale(k),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(p){p.lat===this._center.lat&&p.lng===this._center.lng||(this._unmodified=!1,this._center=p,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(p){p!==this._elevation&&(this._elevation=p,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(p){this._edgeInsets.equals(p)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,p,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(p){return this._edgeInsets.equals(p)}interpolatePadding(p,k,L){this._unmodified=!1,this._edgeInsets.interpolate(p,k,L),this._constrain(),this._calcMatrices()}coveringZoomLevel(p){const k=(p.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/p.tileSize));return Math.max(0,k)}getVisibleUnwrappedCoordinates(p){const k=[new s.UnwrappedTileID(0,p)];if(this._renderWorldCopies){const L=this.pointCoordinate(new s.Point(0,0)),z=this.pointCoordinate(new s.Point(this.width,0)),j=this.pointCoordinate(new s.Point(this.width,this.height)),K=this.pointCoordinate(new s.Point(0,this.height)),re=Math.floor(Math.min(L.x,z.x,j.x,K.x)),ae=Math.floor(Math.max(L.x,z.x,j.x,K.x)),ve=1;for(let Ee=re-ve;Ee<=ae+ve;Ee++)Ee!==0&&k.push(new s.UnwrappedTileID(Ee,p))}return k}coveringTiles(p){var k,L;let z=this.coveringZoomLevel(p);const j=z;if(p.minzoom!==void 0&&z<p.minzoom)return[];p.maxzoom!==void 0&&z>p.maxzoom&&(z=p.maxzoom);const K=this.pointCoordinate(this.getCameraPoint()),re=s.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,z),ve=[ae*K.x,ae*K.y,0],Ee=[ae*re.x,ae*re.y,0],Te=tu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z);let Ze=p.minzoom||0;!p.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ze=z);const T=p.terrain?2/Math.min(this.tileSize,p.tileSize)*this.tileSize:3,B=fe=>({aabb:new ru([fe*ae,0,0],[(fe+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),W=[],Q=[],de=z,ke=p.reparseOverscaled?j:z;if(this._renderWorldCopies)for(let fe=1;fe<=3;fe++)W.push(B(-fe)),W.push(B(fe));for(W.push(B(0));W.length>0;){const fe=W.pop(),Se=fe.x,De=fe.y;let je=fe.fullyVisible;if(!je){const br=fe.aabb.intersects(Te);if(br===0)continue;je=br===2}const ut=p.terrain?ve:Ee,Dt=fe.aabb.distanceX(ut),Tt=fe.aabb.distanceY(ut),Ct=Math.max(Math.abs(Dt),Math.abs(Tt));if(fe.zoom===de||Ct>T+(1<<de-fe.zoom)-2&&fe.zoom>=Ze){const br=de-fe.zoom,kr=ve[0]-.5-(Se<<br),_t=ve[1]-.5-(De<<br);Q.push({tileID:new s.OverscaledTileID(fe.zoom===de?ke:fe.zoom,fe.wrap,fe.zoom,Se,De),distanceSq:we([Ee[0]-.5-Se,Ee[1]-.5-De]),tileDistanceToCamera:Math.sqrt(kr*kr+_t*_t)})}else for(let br=0;br<4;br++){const kr=(Se<<1)+br%2,_t=(De<<1)+(br>>1),jt=fe.zoom+1;let hr=fe.aabb.quadrant(br);if(p.terrain){const Ur=new s.OverscaledTileID(jt,fe.wrap,jt,kr,_t),Pr=p.terrain.getMinMaxElevation(Ur),qr=(k=Pr.minElevation)!==null&&k!==void 0?k:this.elevation,Xr=(L=Pr.maxElevation)!==null&&L!==void 0?L:this.elevation;hr=new ru([hr.min[0],hr.min[1],qr],[hr.max[0],hr.max[1],Xr])}W.push({aabb:hr,zoom:jt,x:kr,y:_t,wrap:fe.wrap,fullyVisible:je})}}return Q.sort((fe,Se)=>fe.distanceSq-Se.distanceSq).map(fe=>fe.tileID)}resize(p,k){this.width=p,this.height=k,this.pixelsToGLUnits=[2/p,-2/k],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(p){return Math.pow(2,p)}scaleZoom(p){return Math.log(p)/Math.LN2}project(p){const k=s.clamp(p.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.Point(s.mercatorXfromLng(p.lng)*this.worldSize,s.mercatorYfromLat(k)*this.worldSize)}unproject(p){return new s.MercatorCoordinate(p.x/this.worldSize,p.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(p){const k=this.pointLocation(this.centerPoint,p),L=p.getElevationForLngLatZoom(k,this.tileZoom);if(!(this.elevation-L))return;const z=this.getCameraPosition(),j=s.MercatorCoordinate.fromLngLat(z.lngLat,z.altitude),K=s.MercatorCoordinate.fromLngLat(k,L),re=j.x-K.x,ae=j.y-K.y,ve=j.z-K.z,Ee=Math.sqrt(re*re+ae*ae+ve*ve),Te=this.scaleZoom(this.cameraToCenterDistance/Ee/this.tileSize);this._elevation=L,this._center=k,this.zoom=Te}setLocationAtPoint(p,k){const L=this.pointCoordinate(k),z=this.pointCoordinate(this.centerPoint),j=this.locationCoordinate(p),K=new s.MercatorCoordinate(j.x-(L.x-z.x),j.y-(L.y-z.y));this.center=this.coordinateLocation(K),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(p,k){return k?this.coordinatePoint(this.locationCoordinate(p),k.getElevationForLngLatZoom(p,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(p))}pointLocation(p,k){return this.coordinateLocation(this.pointCoordinate(p,k))}locationCoordinate(p){return s.MercatorCoordinate.fromLngLat(p)}coordinateLocation(p){return p&&p.toLngLat()}pointCoordinate(p,k){if(k){const Ze=k.pointCoordinate(p);if(Ze!=null)return Ze}const L=[p.x,p.y,0,1],z=[p.x,p.y,1,1];s.transformMat4(L,L,this.pixelMatrixInverse),s.transformMat4(z,z,this.pixelMatrixInverse);const j=L[3],K=z[3],re=L[1]/j,ae=z[1]/K,ve=L[2]/j,Ee=z[2]/K,Te=ve===Ee?0:(0-ve)/(Ee-ve);return new s.MercatorCoordinate(s.interpolate.number(L[0]/j,z[0]/K,Te)/this.worldSize,s.interpolate.number(re,ae,Te)/this.worldSize)}coordinatePoint(p,k=0,L=this.pixelMatrix){const z=[p.x*this.worldSize,p.y*this.worldSize,k,1];return s.transformMat4(z,z,L),new s.Point(z[0]/z[3],z[1]/z[3])}getBounds(){const p=Math.max(0,this.height/2-this.getHorizon());return new Ae().extend(this.pointLocation(new s.Point(0,p))).extend(this.pointLocation(new s.Point(this.width,p))).extend(this.pointLocation(new s.Point(this.width,this.height))).extend(this.pointLocation(new s.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ae([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(p){p?(this.lngRange=[p.getWest(),p.getEast()],this.latRange=[p.getSouth(),p.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(p,k=!1){const L=p.key,z=k?this._alignedPosMatrixCache:this._posMatrixCache;if(z[L])return z[L];const j=p.canonical,K=this.worldSize/this.zoomScale(j.z),re=j.x+Math.pow(2,j.z)*p.wrap,ae=s.identity(new Float64Array(16));return s.translate(ae,ae,[re*K,j.y*K,0]),s.scale(ae,ae,[K/s.EXTENT,K/s.EXTENT,1]),s.multiply(ae,k?this.alignedProjMatrix:this.projMatrix,ae),z[L]=new Float32Array(ae),z[L]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let p,k,L,z,j=-90,K=90,re=-180,ae=180;const ve=this.size,Ee=this._unmodified;if(this.latRange){const T=this.latRange;j=s.mercatorYfromLat(T[1])*this.worldSize,K=s.mercatorYfromLat(T[0])*this.worldSize,p=K-j<ve.y?ve.y/(K-j):0}if(this.lngRange){const T=this.lngRange;re=s.wrap(s.mercatorXfromLng(T[0])*this.worldSize,0,this.worldSize),ae=s.wrap(s.mercatorXfromLng(T[1])*this.worldSize,0,this.worldSize),ae<re&&(ae+=this.worldSize),k=ae-re<ve.x?ve.x/(ae-re):0}const Te=this.point,Ze=Math.max(k||0,p||0);if(Ze)return this.center=this.unproject(new s.Point(k?(ae+re)/2:Te.x,p?(K+j)/2:Te.y)),this.zoom+=this.scaleZoom(Ze),this._unmodified=Ee,void(this._constraining=!1);if(this.latRange){const T=Te.y,B=ve.y/2;T-B<j&&(z=j+B),T+B>K&&(z=K-B)}if(this.lngRange){const T=(re+ae)/2,B=s.wrap(Te.x,T-this.worldSize/2,T+this.worldSize/2),W=ve.x/2;B-W<re&&(L=re+W),B+W>ae&&(L=ae-W)}L===void 0&&z===void 0||(this.center=this.unproject(new s.Point(L!==void 0?L:Te.x,z!==void 0?z:Te.y)).wrap()),this._unmodified=Ee,this._constraining=!1}_calcMatrices(){if(!this.height)return;const p=this.centerOffset,k=this.point.x,L=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let z=s.identity(new Float64Array(16));s.scale(z,z,[this.width/2,-this.height/2,1]),s.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=s.identity(new Float64Array(16)),s.scale(z,z,[1,-1,1]),s.translate(z,z,[-1,-1,0]),s.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z;const j=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),K=Math.min(this.elevation,this._minEleveationForCurrentTile),re=j-K*this._pixelPerMeter/Math.cos(this._pitch),ae=K<0?re:j,ve=Math.PI/2+this._pitch,Ee=this._fov*(.5+p.y/this.height),Te=Math.sin(Ee)*ae/Math.sin(s.clamp(Math.PI-ve-Ee,.01,Math.PI-.01)),Ze=this.getHorizon(),T=2*Math.atan(Ze/this.cameraToCenterDistance)*(.5+p.y/(2*Ze)),B=Math.sin(T)*ae/Math.sin(s.clamp(Math.PI-ve-T,.01,Math.PI-.01)),W=Math.min(Te,B),Q=1.01*(Math.cos(Math.PI/2-this._pitch)*W+ae),de=this.height/50;z=new Float64Array(16),s.perspective(z,this._fov,this.width/this.height,de,Q),z[8]=2*-p.x/this.width,z[9]=2*p.y/this.height,s.scale(z,z,[1,-1,1]),s.translate(z,z,[0,0,-this.cameraToCenterDistance]),s.rotateX(z,z,this._pitch),s.rotateZ(z,z,this.angle),s.translate(z,z,[-k,-L,0]),this.mercatorMatrix=s.scale([],z,[this.worldSize,this.worldSize,this.worldSize]),s.scale(z,z,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,z),s.translate(z,z,[0,0,-this.elevation]),this.projMatrix=z,this.invProjMatrix=s.invert([],z),this.pixelMatrix3D=s.multiply(new Float64Array(16),this.labelPlaneMatrix,z);const ke=this.width%2/2,fe=this.height%2/2,Se=Math.cos(this.angle),De=Math.sin(this.angle),je=k-Math.round(k)+Se*ke+De*fe,ut=L-Math.round(L)+Se*fe+De*ke,Dt=new Float64Array(z);if(s.translate(Dt,Dt,[je>.5?je-1:je,ut>.5?ut-1:ut,0]),this.alignedProjMatrix=Dt,z=s.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const p=this.pointCoordinate(new s.Point(0,0)),k=[p.x*this.worldSize,p.y*this.worldSize,0,1];return s.transformMat4(k,k,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const p=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,p))}getCameraQueryGeometry(p){const k=this.getCameraPoint();if(p.length===1)return[p[0],k];{let L=k.x,z=k.y,j=k.x,K=k.y;for(const re of p)L=Math.min(L,re.x),z=Math.min(z,re.y),j=Math.max(j,re.x),K=Math.max(K,re.y);return[new s.Point(L,z),new s.Point(j,z),new s.Point(j,K),new s.Point(L,K),new s.Point(L,z)]}}}function ma(R,p){let k,L=!1,z=null,j=null;const K=()=>{z=null,L&&(R.apply(j,k),z=setTimeout(K,p),L=!1)};return(...re)=>(L=!0,j=this,k=re,z||K(),z)}class Ss{constructor(p){this._getCurrentHash=()=>{const k=window.location.hash.replace("#","");if(this._hashName){let L;return k.split("&").map(z=>z.split("=")).forEach(z=>{z[0]===this._hashName&&(L=z)}),(L&&L[1]||"").split("/")}return k.split("/")},this._onHashChange=()=>{const k=this._getCurrentHash();if(k.length>=3&&!k.some(L=>isNaN(L))){const L=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(k[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+k[2],+k[1]],zoom:+k[0],bearing:L,pitch:+(k[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const k=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,k)}catch{}},this._updateHash=ma(this._updateHashUnthrottled,300),this._hashName=p&&encodeURIComponent(p)}addTo(p){return this._map=p,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(p){const k=this._map.getCenter(),L=Math.round(100*this._map.getZoom())/100,z=Math.ceil((L*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,z),K=Math.round(k.lng*j)/j,re=Math.round(k.lat*j)/j,ae=this._map.getBearing(),ve=this._map.getPitch();let Ee="";if(Ee+=p?`/${K}/${re}/${L}`:`${L}/${re}/${K}`,(ae||ve)&&(Ee+="/"+Math.round(10*ae)/10),ve&&(Ee+=`/${Math.round(ve)}`),this._hashName){const Te=this._hashName;let Ze=!1;const T=window.location.hash.slice(1).split("&").map(B=>{const W=B.split("=")[0];return W===Te?(Ze=!0,`${W}=${Ee}`):B}).filter(B=>B);return Ze||T.push(`${Te}=${Ee}`),`#${T.join("&")}`}return`#${Ee}`}}const Es={linearity:.3,easing:s.bezier(0,0,.3,1)},fs=s.extend({deceleration:2500,maxSpeed:1400},Es),hs=s.extend({deceleration:20,maxSpeed:1400},Es),Ml=s.extend({deceleration:1e3,maxSpeed:360},Es),ds=s.extend({deceleration:1e3,maxSpeed:90},Es);class sl{constructor(p){this._map=p,this.clear()}clear(){this._inertiaBuffer=[]}record(p){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.browser.now(),settings:p})}_drainInertiaBuffer(){const p=this._inertiaBuffer,k=s.browser.now();for(;p.length>0&&k-p[0].time>160;)p.shift()}_onMoveEnd(p){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const k={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:j}of this._inertiaBuffer)k.zoom+=j.zoomDelta||0,k.bearing+=j.bearingDelta||0,k.pitch+=j.pitchDelta||0,j.panDelta&&k.pan._add(j.panDelta),j.around&&(k.around=j.around),j.pinchAround&&(k.pinchAround=j.pinchAround);const L=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(k.pan.mag()){const j=Uo(k.pan.mag(),L,s.extend({},fs,p||{}));z.offset=k.pan.mult(j.amount/k.pan.mag()),z.center=this._map.transform.center,$s(z,j)}if(k.zoom){const j=Uo(k.zoom,L,hs);z.zoom=this._map.transform.zoom+j.amount,$s(z,j)}if(k.bearing){const j=Uo(k.bearing,L,Ml);z.bearing=this._map.transform.bearing+s.clamp(j.amount,-179,179),$s(z,j)}if(k.pitch){const j=Uo(k.pitch,L,ds);z.pitch=this._map.transform.pitch+j.amount,$s(z,j)}if(z.zoom||z.bearing){const j=k.pinchAround===void 0?k.around:k.pinchAround;z.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),s.extend(z,{noMoveStart:!0})}}function $s(R,p){(!R.duration||R.duration<p.duration)&&(R.duration=p.duration,R.easing=p.easing)}function Uo(R,p,k){const{maxSpeed:L,linearity:z,deceleration:j}=k,K=s.clamp(R*z/(p/1e3),-L,L),re=Math.abs(K)/(j*z);return{easing:k.easing,duration:1e3*re,amount:K*(re/2)}}class _n extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(p,k,L,z={}){const j=y.mousePos(k.getCanvasContainer(),L),K=k.unproject(j);super(p,s.extend({point:j,lngLat:K,originalEvent:L},z)),this._defaultPrevented=!1,this.target=k}}class ps extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(p,k,L){const z=p==="touchend"?L.changedTouches:L.touches,j=y.touchPos(k.getCanvasContainer(),z),K=j.map(ae=>k.unproject(ae)),re=j.reduce((ae,ve,Ee,Te)=>ae.add(ve.div(Te.length)),new s.Point(0,0));super(p,{points:j,point:re,lngLats:K,lngLat:k.unproject(re),originalEvent:L}),this._defaultPrevented=!1}}class Na extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(p,k,L){super(p,{originalEvent:L}),this._defaultPrevented=!1}}class Cs{constructor(p,k){this._map=p,this._clickTolerance=k.clickTolerance}reset(){delete this._mousedownPos}wheel(p){return this._firePreventable(new Na(p.type,this._map,p))}mousedown(p,k){return this._mousedownPos=k,this._firePreventable(new _n(p.type,this._map,p))}mouseup(p){this._map.fire(new _n(p.type,this._map,p))}click(p,k){this._mousedownPos&&this._mousedownPos.dist(k)>=this._clickTolerance||this._map.fire(new _n(p.type,this._map,p))}dblclick(p){return this._firePreventable(new _n(p.type,this._map,p))}mouseover(p){this._map.fire(new _n(p.type,this._map,p))}mouseout(p){this._map.fire(new _n(p.type,this._map,p))}touchstart(p){return this._firePreventable(new ps(p.type,this._map,p))}touchmove(p){this._map.fire(new ps(p.type,this._map,p))}touchend(p){this._map.fire(new ps(p.type,this._map,p))}touchcancel(p){this._map.fire(new ps(p.type,this._map,p))}_firePreventable(p){if(this._map.fire(p),p.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Au{constructor(p){this._map=p}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(p){this._map.fire(new _n(p.type,this._map,p))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _n("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(p){this._delayContextMenu?this._contextMenuEvent=p:this._ignoreContextMenu||this._map.fire(new _n(p.type,this._map,p)),this._map.listens("contextmenu")&&p.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ua{constructor(p){this._map=p}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(p){return this.transform.pointLocation(s.Point.convert(p),this._map.terrain)}}class Cc{constructor(p,k){this._map=p,this._tr=new ua(p),this._el=p.getCanvasContainer(),this._container=p.getContainer(),this._clickTolerance=k.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(p,k){this.isEnabled()&&p.shiftKey&&p.button===0&&(y.disableDrag(),this._startPos=this._lastPos=k,this._active=!0)}mousemoveWindow(p,k){if(!this._active)return;const L=k;if(this._lastPos.equals(L)||!this._box&&L.dist(this._startPos)<this._clickTolerance)return;const z=this._startPos;this._lastPos=L,this._box||(this._box=y.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",p));const j=Math.min(z.x,L.x),K=Math.max(z.x,L.x),re=Math.min(z.y,L.y),ae=Math.max(z.y,L.y);y.setTransform(this._box,`translate(${j}px,${re}px)`),this._box.style.width=K-j+"px",this._box.style.height=ae-re+"px"}mouseupWindow(p,k){if(!this._active||p.button!==0)return;const L=this._startPos,z=k;if(this.reset(),y.suppressClick(),L.x!==z.x||L.y!==z.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:p})),{cameraAnimation:j=>j.fitScreenCoordinates(L,z,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",p)}keydown(p){this._active&&p.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",p))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(p,k){return this._map.fire(new s.Event(p,{originalEvent:k}))}}function Ja(R,p){if(R.length!==p.length)throw new Error(`The number of touches and points are not equal - touches ${R.length}, points ${p.length}`);const k={};for(let L=0;L<R.length;L++)k[R[L].identifier]=p[L];return k}class is{constructor(p){this.reset(),this.numTouches=p.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(p,k,L){(this.centroid||L.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=p.timeStamp),L.length===this.numTouches&&(this.centroid=function(z){const j=new s.Point(0,0);for(const K of z)j._add(K);return j.div(z.length)}(k),this.touches=Ja(L,k)))}touchmove(p,k,L){if(this.aborted||!this.centroid)return;const z=Ja(L,k);for(const j in this.touches){const K=z[j];(!K||K.dist(this.touches[j])>30)&&(this.aborted=!0)}}touchend(p,k,L){if((!this.centroid||p.timeStamp-this.startTime>500)&&(this.aborted=!0),L.length===0){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class Yn{constructor(p){this.singleTap=new is(p),this.numTaps=p.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(p,k,L){this.singleTap.touchstart(p,k,L)}touchmove(p,k,L){this.singleTap.touchmove(p,k,L)}touchend(p,k,L){const z=this.singleTap.touchend(p,k,L);if(z){const j=p.timeStamp-this.lastTime<500,K=!this.lastTap||this.lastTap.dist(z)<30;if(j&&K||this.reset(),this.count++,this.lastTime=p.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class ei{constructor(p){this._tr=new ua(p),this._zoomIn=new Yn({numTouches:1,numTaps:2}),this._zoomOut=new Yn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(p,k,L){this._zoomIn.touchstart(p,k,L),this._zoomOut.touchstart(p,k,L)}touchmove(p,k,L){this._zoomIn.touchmove(p,k,L),this._zoomOut.touchmove(p,k,L)}touchend(p,k,L){const z=this._zoomIn.touchend(p,k,L),j=this._zoomOut.touchend(p,k,L),K=this._tr;return z?(this._active=!0,p.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:re=>re.easeTo({duration:300,zoom:K.zoom+1,around:K.unproject(z)},{originalEvent:p})}):j?(this._active=!0,p.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:re=>re.easeTo({duration:300,zoom:K.zoom-1,around:K.unproject(j)},{originalEvent:p})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zo{constructor(p){this._enabled=!!p.enable,this._moveStateManager=p.moveStateManager,this._clickTolerance=p.clickTolerance||1,this._moveFunction=p.move,this._activateOnStart=!!p.activateOnStart,p.assignEvents(this),this.reset()}reset(p){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(p)}_move(...p){const k=this._moveFunction(...p);if(k.bearingDelta||k.pitchDelta||k.around||k.panDelta)return this._active=!0,k}dragStart(p,k){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(p)&&(this._moveStateManager.startMove(p),this._lastPoint=k.length?k[0]:k,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(p,k){if(!this.isEnabled())return;const L=this._lastPoint;if(!L)return;if(p.preventDefault(),!this._moveStateManager.isValidMoveEvent(p))return void this.reset(p);const z=k.length?k[0]:k;return!this._moved&&z.dist(L)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=z,this._move(L,z))}dragEnd(p){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(p)&&(this._moved&&y.suppressClick(),this.reset(p))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Zo={0:1,2:2};class Ca{constructor(p){this._correctEvent=p.checkCorrectEvent}startMove(p){const k=y.mouseButton(p);this._eventButton=k}endMove(p){delete this._eventButton}isValidStartEvent(p){return this._correctEvent(p)}isValidMoveEvent(p){return!function(k,L){const z=Zo[L];return k.buttons===void 0||(k.buttons&z)!==z}(p,this._eventButton)}isValidEndEvent(p){return y.mouseButton(p)===this._eventButton}}class Is{constructor(){this._firstTouch=void 0}_isOneFingerTouch(p){return p.targetTouches.length===1}_isSameTouchEvent(p){return p.targetTouches[0].identifier===this._firstTouch}startMove(p){this._firstTouch=p.targetTouches[0].identifier}endMove(p){delete this._firstTouch}isValidStartEvent(p){return this._isOneFingerTouch(p)}isValidMoveEvent(p){return this._isOneFingerTouch(p)&&this._isSameTouchEvent(p)}isValidEndEvent(p){return this._isOneFingerTouch(p)&&this._isSameTouchEvent(p)}}const yi=R=>{R.mousedown=R.dragStart,R.mousemoveWindow=R.dragMove,R.mouseup=R.dragEnd,R.contextmenu=function(p){p.preventDefault()}},Su=({enable:R,clickTolerance:p,bearingDegreesPerPixelMoved:k=.8})=>{const L=new Ca({checkCorrectEvent:z=>y.mouseButton(z)===0&&z.ctrlKey||y.mouseButton(z)===2});return new zo({clickTolerance:p,move:(z,j)=>({bearingDelta:(j.x-z.x)*k}),moveStateManager:L,enable:R,assignEvents:yi})},m0=({enable:R,clickTolerance:p,pitchDegreesPerPixelMoved:k=-.5})=>{const L=new Ca({checkCorrectEvent:z=>y.mouseButton(z)===0&&z.ctrlKey||y.mouseButton(z)===2});return new zo({clickTolerance:p,move:(z,j)=>({pitchDelta:(j.y-z.y)*k}),moveStateManager:L,enable:R,assignEvents:yi})};class O0{constructor(p,k){this._minTouches=p.cooperativeGestures?2:1,this._clickTolerance=p.clickTolerance||1,this._map=k,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(p,k,L){return this._calculateTransform(p,k,L)}touchmove(p,k,L){if(this._map._cooperativeGestures&&(this._minTouches===2&&L.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(p,!1,L.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(L.length<this._minTouches))return p.preventDefault(),this._calculateTransform(p,k,L)}touchend(p,k,L){this._calculateTransform(p,k,L),this._active&&L.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(p,k,L){L.length>0&&(this._active=!0);const z=Ja(L,k),j=new s.Point(0,0),K=new s.Point(0,0);let re=0;for(const ve in z){const Ee=z[ve],Te=this._touches[ve];Te&&(j._add(Ee),K._add(Ee.sub(Te)),re++,z[ve]=Ee)}if(this._touches=z,re<this._minTouches||!K.mag())return;const ae=K.div(re);return this._sum._add(ae),this._sum.mag()<this._clickTolerance?void 0:{around:j.div(re),panDelta:ae}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(p,k,L){this._firstTwoTouches||L.length<2||(this._firstTwoTouches=[L[0].identifier,L[1].identifier],this._start([k[0],k[1]]))}touchmove(p,k,L){if(!this._firstTwoTouches)return;p.preventDefault();const[z,j]=this._firstTwoTouches,K=Yu(L,k,z),re=Yu(L,k,j);if(!K||!re)return;const ae=this._aroundCenter?null:K.add(re).div(2);return this._move([K,re],ae,p)}touchend(p,k,L){if(!this._firstTwoTouches)return;const[z,j]=this._firstTwoTouches,K=Yu(L,k,z),re=Yu(L,k,j);K&&re||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(p){this._enabled=!0,this._aroundCenter=!!p&&p.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Yu(R,p,k){for(let L=0;L<R.length;L++)if(R[L].identifier===k)return p[L]}function kn(R,p){return Math.log(R/p)/Math.LN2}class F0 extends Xu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(p){this._startDistance=this._distance=p[0].dist(p[1])}_move(p,k){const L=this._distance;if(this._distance=p[0].dist(p[1]),this._active||!(Math.abs(kn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kn(this._distance,L),pinchAround:k}}}function Xc(R,p){return 180*R.angleWith(p)/Math.PI}class Xo extends Xu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(p){this._startVector=this._vector=p[0].sub(p[1]),this._minDiameter=p[0].dist(p[1])}_move(p,k){const L=this._vector;if(this._vector=p[0].sub(p[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xc(this._vector,L),pinchAround:k}}_isBelowThreshold(p){this._minDiameter=Math.min(this._minDiameter,p.mag());const k=25/(Math.PI*this._minDiameter)*360,L=Xc(p,this._startVector);return Math.abs(L)<k}}function Ia(R){return Math.abs(R.y)>Math.abs(R.x)}class ns extends Xu{constructor(p){super(),this._map=p}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(p,k,L){super.touchstart(p,k,L),this._currentTouchCount=L.length}_start(p){this._lastPoints=p,Ia(p[0].sub(p[1]))&&(this._valid=!1)}_move(p,k,L){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const z=p[0].sub(this._lastPoints[0]),j=p[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(z,j,L.timeStamp),this._valid?(this._lastPoints=p,this._active=!0,{pitchDelta:(z.y+j.y)/2*-.5}):void 0}gestureBeginsVertically(p,k,L){if(this._valid!==void 0)return this._valid;const z=p.mag()>=2,j=k.mag()>=2;if(!z&&!j)return;if(!z||!j)return this._firstMove===void 0&&(this._firstMove=L),L-this._firstMove<100&&void 0;const K=p.y>0==k.y>0;return Ia(p)&&Ia(k)&&K}}const Ku={panStep:100,bearingStep:15,pitchStep:10};class La{constructor(p){this._tr=new ua(p);const k=Ku;this._panStep=k.panStep,this._bearingStep=k.bearingStep,this._pitchStep=k.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(p){if(p.altKey||p.ctrlKey||p.metaKey)return;let k=0,L=0,z=0,j=0,K=0;switch(p.keyCode){case 61:case 107:case 171:case 187:k=1;break;case 189:case 109:case 173:k=-1;break;case 37:p.shiftKey?L=-1:(p.preventDefault(),j=-1);break;case 39:p.shiftKey?L=1:(p.preventDefault(),j=1);break;case 38:p.shiftKey?z=1:(p.preventDefault(),K=-1);break;case 40:p.shiftKey?z=-1:(p.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(L=0,z=0),{cameraAnimation:re=>{const ae=this._tr;re.easeTo({duration:300,easeId:"keyboardHandler",easing:ll,zoom:k?Math.round(ae.zoom)+k*(p.shiftKey?2:1):ae.zoom,bearing:ae.bearing+L*this._bearingStep,pitch:ae.pitch+z*this._pitchStep,offset:[-j*this._panStep,-K*this._panStep],center:ae.center},{originalEvent:p})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ll(R){return R*(2-R)}const iu=4.000244140625;class Ju{constructor(p,k){this._onTimeout=L=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(L)},this._map=p,this._tr=new ua(p),this._el=p.getCanvasContainer(),this._triggerRenderFrame=k,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(p){this._defaultZoomRate=p}setWheelZoomRate(p){this._wheelZoomRate=p}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(p){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!p&&p.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(p){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!p[this._map._metaKey])return;p.preventDefault()}let k=p.deltaMode===WheelEvent.DOM_DELTA_LINE?40*p.deltaY:p.deltaY;const L=s.browser.now(),z=L-(this._lastWheelEventTime||0);this._lastWheelEventTime=L,k!==0&&k%iu==0?this._type="wheel":k!==0&&Math.abs(k)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=k,this._timeout=setTimeout(this._onTimeout,40,p)):this._type||(this._type=Math.abs(z*k)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,k+=this._lastValue)),p.shiftKey&&k&&(k/=4),this._type&&(this._lastWheelEvent=p,this._delta-=k,this._active||this._start(p)),p.preventDefault()}_start(p){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const k=y.mousePos(this._el,p),L=this._tr;this._around=s.LngLat.convert(this._aroundCenter?L.center:L.unproject(k)),this._aroundPoint=L.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const p=this._tr.transform;if(this._delta!==0){const re=this._type==="wheel"&&Math.abs(this._delta)>iu?this._wheelZoomRate:this._defaultZoomRate;let ae=2/(1+Math.exp(-Math.abs(this._delta*re)));this._delta<0&&ae!==0&&(ae=1/ae);const ve=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(ve*ae))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const k=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,L=this._startZoom,z=this._easing;let j,K=!1;if(this._type==="wheel"&&L&&z){const re=Math.min((s.browser.now()-this._lastWheelEventTime)/200,1),ae=z(re);j=s.interpolate.number(L,k,ae),re<1?this._frameId||(this._frameId=!0):K=!0}else j=k,K=!0;return this._active=!0,K&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!K,zoomDelta:j-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(p){let k=s.defaultEasing;if(this._prevEase){const L=this._prevEase,z=(s.browser.now()-L.start)/L.duration,j=L.easing(z+.01)-L.easing(z),K=.27/Math.sqrt(j*j+1e-4)*.01,re=Math.sqrt(.0729-K*K);k=s.bezier(K,re,.25,1)}return this._prevEase={start:s.browser.now(),duration:p,easing:k},k}reset(){this._active=!1}}class $n{constructor(p,k){this._clickZoom=p,this._tapZoom=k}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yc{constructor(p){this._tr=new ua(p),this.reset()}reset(){this._active=!1}dblclick(p,k){return p.preventDefault(),{cameraAnimation:L=>{L.easeTo({duration:300,zoom:this._tr.zoom+(p.shiftKey?-1:1),around:this._tr.unproject(k)},{originalEvent:p})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kc{constructor(){this._tap=new Yn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(p,k,L){if(!this._swipePoint)if(this._tapTime){const z=k[0],j=p.timeStamp-this._tapTime<500,K=this._tapPoint.dist(z)<30;j&&K?L.length>0&&(this._swipePoint=z,this._swipeTouch=L[0].identifier):this.reset()}else this._tap.touchstart(p,k,L)}touchmove(p,k,L){if(this._tapTime){if(this._swipePoint){if(L[0].identifier!==this._swipeTouch)return;const z=k[0],j=z.y-this._swipePoint.y;return this._swipePoint=z,p.preventDefault(),this._active=!0,{zoomDelta:j/128}}}else this._tap.touchmove(p,k,L)}touchend(p,k,L){if(this._tapTime)this._swipePoint&&L.length===0&&this.reset();else{const z=this._tap.touchend(p,k,L);z&&(this._tapTime=p.timeStamp,this._tapPoint=z)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ca{constructor(p,k,L){this._el=p,this._mousePan=k,this._touchPan=L}enable(p){this._inertiaOptions=p||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class To{constructor(p,k,L){this._pitchWithRotate=p.pitchWithRotate,this._mouseRotate=k,this._mousePitch=L}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qu{constructor(p,k,L,z){this._el=p,this._touchZoom=k,this._touchRotate=L,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(p){this._touchZoom.enable(p),this._rotationDisabled||this._touchRotate.enable(p),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Gs=R=>R.zoom||R.drag||R.pitch||R.rotate;class ul extends s.Event{}function Ic(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}class B0{constructor(p,k){this.handleWindowEvent=z=>{this.handleEvent(z,`${z.type}Window`)},this.handleEvent=(z,j)=>{if(z.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const K=z.type==="renderFrame"?void 0:z,re={needsRenderFrame:!1},ae={},ve={},Ee=z.touches,Te=Ee?this._getMapTouches(Ee):void 0,Ze=Te?y.touchPos(this._el,Te):y.mousePos(this._el,z);for(const{handlerName:W,handler:Q,allowed:de}of this._handlers){if(!Q.isEnabled())continue;let ke;this._blockedByActive(ve,de,W)?Q.reset():Q[j||z.type]&&(ke=Q[j||z.type](z,Ze,Te),this.mergeHandlerResult(re,ae,ke,W,K),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()),(ke||Q.isActive())&&(ve[W]=Q)}const T={};for(const W in this._previousActiveHandlers)ve[W]||(T[W]=K);this._previousActiveHandlers=ve,(Object.keys(T).length||Ic(re))&&(this._changes.push([re,ae,T]),this._triggerRenderFrame()),(Object.keys(ve).length||Ic(re))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=re;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))},this._map=p,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sl(p),this._bearingSnap=k.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(k);const L=this._el;this._listeners=[[L,"touchstart",{passive:!0}],[L,"touchmove",{passive:!1}],[L,"touchend",void 0],[L,"touchcancel",void 0],[L,"mousedown",void 0],[L,"mousemove",void 0],[L,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[L,"mouseover",void 0],[L,"mouseout",void 0],[L,"dblclick",void 0],[L,"click",void 0],[L,"keydown",{capture:!1}],[L,"keyup",void 0],[L,"wheel",{passive:!1}],[L,"contextmenu",void 0],[window,"blur",void 0]];for(const[z,j,K]of this._listeners)y.addEventListener(z,j,z===document?this.handleWindowEvent:this.handleEvent,K)}destroy(){for(const[p,k,L]of this._listeners)y.removeEventListener(p,k,p===document?this.handleWindowEvent:this.handleEvent,L)}_addDefaultHandlers(p){const k=this._map,L=k.getCanvasContainer();this._add("mapEvent",new Cs(k,p));const z=k.boxZoom=new Cc(k,p);this._add("boxZoom",z),p.interactive&&p.boxZoom&&z.enable();const j=new ei(k),K=new Yc(k);k.doubleClickZoom=new $n(K,j),this._add("tapZoom",j),this._add("clickZoom",K),p.interactive&&p.doubleClickZoom&&k.doubleClickZoom.enable();const re=new Kc;this._add("tapDragZoom",re);const ae=k.touchPitch=new ns(k);this._add("touchPitch",ae),p.interactive&&p.touchPitch&&k.touchPitch.enable(p.touchPitch);const ve=Su(p),Ee=m0(p);k.dragRotate=new To(p,ve,Ee),this._add("mouseRotate",ve,["mousePitch"]),this._add("mousePitch",Ee,["mouseRotate"]),p.interactive&&p.dragRotate&&k.dragRotate.enable();const Te=(({enable:de,clickTolerance:ke})=>{const fe=new Ca({checkCorrectEvent:Se=>y.mouseButton(Se)===0&&!Se.ctrlKey});return new zo({clickTolerance:ke,move:(Se,De)=>({around:De,panDelta:De.sub(Se)}),activateOnStart:!0,moveStateManager:fe,enable:de,assignEvents:yi})})(p),Ze=new O0(p,k);k.dragPan=new ca(L,Te,Ze),this._add("mousePan",Te),this._add("touchPan",Ze,["touchZoom","touchRotate"]),p.interactive&&p.dragPan&&k.dragPan.enable(p.dragPan);const T=new Xo,B=new F0;k.touchZoomRotate=new Qu(L,B,T,re),this._add("touchRotate",T,["touchPan","touchZoom"]),this._add("touchZoom",B,["touchPan","touchRotate"]),p.interactive&&p.touchZoomRotate&&k.touchZoomRotate.enable(p.touchZoomRotate);const W=k.scrollZoom=new Ju(k,()=>this._triggerRenderFrame());this._add("scrollZoom",W,["mousePan"]),p.interactive&&p.scrollZoom&&k.scrollZoom.enable(p.scrollZoom);const Q=k.keyboard=new La(k);this._add("keyboard",Q),p.interactive&&p.keyboard&&k.keyboard.enable(),this._add("blockableMapEvent",new Au(k))}_add(p,k,L){this._handlers.push({handlerName:p,handler:k,allowed:L}),this._handlersById[p]=k}stop(p){if(!this._updatingCamera){for(const{handler:k}of this._handlers)k.reset();this._inertia.clear(),this._fireEvents({},{},p),this._changes=[]}}isActive(){for(const{handler:p}of this._handlers)if(p.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gs(this._eventsInProgress)||this.isZooming()}_blockedByActive(p,k,L){for(const z in p)if(z!==L&&(!k||k.indexOf(z)<0))return!0;return!1}_getMapTouches(p){const k=[];for(const L of p)this._el.contains(L.target)&&k.push(L);return k}mergeHandlerResult(p,k,L,z,j){if(!L)return;s.extend(p,L);const K={handlerName:z,originalEvent:L.originalEvent||j};L.zoomDelta!==void 0&&(k.zoom=K),L.panDelta!==void 0&&(k.drag=K),L.pitchDelta!==void 0&&(k.pitch=K),L.bearingDelta!==void 0&&(k.rotate=K)}_applyChanges(){const p={},k={},L={};for(const[z,j,K]of this._changes)z.panDelta&&(p.panDelta=(p.panDelta||new s.Point(0,0))._add(z.panDelta)),z.zoomDelta&&(p.zoomDelta=(p.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(p.bearingDelta=(p.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(p.pitchDelta=(p.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(p.around=z.around),z.pinchAround!==void 0&&(p.pinchAround=z.pinchAround),z.noInertia&&(p.noInertia=z.noInertia),s.extend(k,j),s.extend(L,K);this._updateMapTransform(p,k,L),this._changes=[]}_updateMapTransform(p,k,L){const z=this._map,j=z._getTransformForUpdate(),K=z.terrain;if(!(Ic(p)||K&&this._terrainMovement))return this._fireEvents(k,L,!0);let{panDelta:re,zoomDelta:ae,bearingDelta:ve,pitchDelta:Ee,around:Te,pinchAround:Ze}=p;Ze!==void 0&&(Te=Ze),z._stop(!0),Te=Te||z.transform.centerPoint;const T=j.pointLocation(re?Te.sub(re):Te);ve&&(j.bearing+=ve),Ee&&(j.pitch+=Ee),ae&&(j.zoom+=ae),K?this._terrainMovement||!k.drag&&!k.zoom?k.drag&&this._terrainMovement?j.center=j.pointLocation(j.centerPoint.sub(re)):j.setLocationAtPoint(T,Te):(this._terrainMovement=!0,this._map._elevationFreeze=!0,j.setLocationAtPoint(T,Te),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,j.recalculateZoom(z.terrain)})):j.setLocationAtPoint(T,Te),z._applyUpdatedTransform(j),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(k,L,!0)}_fireEvents(p,k,L){const z=Gs(this._eventsInProgress),j=Gs(p),K={};for(const Ee in p){const{originalEvent:Te}=p[Ee];this._eventsInProgress[Ee]||(K[`${Ee}start`]=Te),this._eventsInProgress[Ee]=p[Ee]}!z&&j&&this._fireEvent("movestart",j.originalEvent);for(const Ee in K)this._fireEvent(Ee,K[Ee]);j&&this._fireEvent("move",j.originalEvent);for(const Ee in p){const{originalEvent:Te}=p[Ee];this._fireEvent(Ee,Te)}const re={};let ae;for(const Ee in this._eventsInProgress){const{handlerName:Te,originalEvent:Ze}=this._eventsInProgress[Ee];this._handlersById[Te].isActive()||(delete this._eventsInProgress[Ee],ae=k[Te]||Ze,re[`${Ee}end`]=ae)}for(const Ee in re)this._fireEvent(Ee,re[Ee]);const ve=Gs(this._eventsInProgress);if(L&&(z||j)&&!ve){this._updatingCamera=!0;const Ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Te=Ze=>Ze!==0&&-this._bearingSnap<Ze&&Ze<this._bearingSnap;Ee?(Te(Ee.bearing||this._map.getBearing())&&(Ee.bearing=0),Ee.freezeElevation=!0,this._map.easeTo(Ee,{originalEvent:ae})):(this._map.fire(new s.Event("moveend",{originalEvent:ae})),Te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(p,k){this._map.fire(new s.Event(p,k?{originalEvent:k}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(p=>{delete this._frameId,this.handleEvent(new ul("renderFrame",{timeStamp:p})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ff extends s.Evented{constructor(p,k){super(),this._renderFrameCallback=()=>{const L=Math.min((s.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(L)),L<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=p,this._bearingSnap=k.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(p,k){return this.jumpTo({center:p},k)}panBy(p,k,L){return p=s.Point.convert(p).mult(-1),this.panTo(this.transform.center,s.extend({offset:p},k),L)}panTo(p,k,L){return this.easeTo(s.extend({center:p},k),L)}getZoom(){return this.transform.zoom}setZoom(p,k){return this.jumpTo({zoom:p},k),this}zoomTo(p,k,L){return this.easeTo(s.extend({zoom:p},k),L)}zoomIn(p,k){return this.zoomTo(this.getZoom()+1,p,k),this}zoomOut(p,k){return this.zoomTo(this.getZoom()-1,p,k),this}getBearing(){return this.transform.bearing}setBearing(p,k){return this.jumpTo({bearing:p},k),this}getPadding(){return this.transform.padding}setPadding(p,k){return this.jumpTo({padding:p},k),this}rotateTo(p,k,L){return this.easeTo(s.extend({bearing:p},k),L)}resetNorth(p,k){return this.rotateTo(0,s.extend({duration:1e3},p),k),this}resetNorthPitch(p,k){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},p),k),this}snapToNorth(p,k){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(p,k):this}getPitch(){return this.transform.pitch}setPitch(p,k){return this.jumpTo({pitch:p},k),this}cameraForBounds(p,k){p=Ae.convert(p);const L=k&&k.bearing||0;return this._cameraForBoxAndBearing(p.getNorthWest(),p.getSouthEast(),L,k)}_cameraForBoxAndBearing(p,k,L,z){const j={top:0,bottom:0,right:0,left:0};if(typeof(z=s.extend({padding:j,offset:[0,0],maxZoom:this.transform.maxZoom},z)).padding=="number"){const De=z.padding;z.padding={top:De,bottom:De,right:De,left:De}}z.padding=s.extend(j,z.padding);const K=this.transform,re=K.padding,ae=K.project(s.LngLat.convert(p)),ve=K.project(s.LngLat.convert(k)),Ee=ae.rotate(-L*Math.PI/180),Te=ve.rotate(-L*Math.PI/180),Ze=new s.Point(Math.max(Ee.x,Te.x),Math.max(Ee.y,Te.y)),T=new s.Point(Math.min(Ee.x,Te.x),Math.min(Ee.y,Te.y)),B=Ze.sub(T),W=(K.width-(re.left+re.right+z.padding.left+z.padding.right))/B.x,Q=(K.height-(re.top+re.bottom+z.padding.top+z.padding.bottom))/B.y;if(Q<0||W<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const de=Math.min(K.scaleZoom(K.scale*Math.min(W,Q)),z.maxZoom),ke=s.Point.convert(z.offset),fe=new s.Point((z.padding.left-z.padding.right)/2,(z.padding.top-z.padding.bottom)/2).rotate(L*Math.PI/180),Se=ke.add(fe).mult(K.scale/K.zoomScale(de));return{center:K.unproject(ae.add(ve).div(2).sub(Se)),zoom:de,bearing:L}}fitBounds(p,k,L){return this._fitInternal(this.cameraForBounds(p,k),k,L)}fitScreenCoordinates(p,k,L,z,j){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.Point.convert(p)),this.transform.pointLocation(s.Point.convert(k)),L,z),z,j)}_fitInternal(p,k,L){return p?(delete(k=s.extend(p,k)).padding,k.linear?this.easeTo(k,L):this.flyTo(k,L)):this}jumpTo(p,k){this.stop();const L=this._getTransformForUpdate();let z=!1,j=!1,K=!1;return"zoom"in p&&L.zoom!==+p.zoom&&(z=!0,L.zoom=+p.zoom),p.center!==void 0&&(L.center=s.LngLat.convert(p.center)),"bearing"in p&&L.bearing!==+p.bearing&&(j=!0,L.bearing=+p.bearing),"pitch"in p&&L.pitch!==+p.pitch&&(K=!0,L.pitch=+p.pitch),p.padding==null||L.isPaddingEqual(p.padding)||(L.padding=p.padding),this._applyUpdatedTransform(L),this.fire(new s.Event("movestart",k)).fire(new s.Event("move",k)),z&&this.fire(new s.Event("zoomstart",k)).fire(new s.Event("zoom",k)).fire(new s.Event("zoomend",k)),j&&this.fire(new s.Event("rotatestart",k)).fire(new s.Event("rotate",k)).fire(new s.Event("rotateend",k)),K&&this.fire(new s.Event("pitchstart",k)).fire(new s.Event("pitch",k)).fire(new s.Event("pitchend",k)),this.fire(new s.Event("moveend",k))}calculateCameraOptionsFromTo(p,k,L,z=0){const j=s.MercatorCoordinate.fromLngLat(p,k),K=s.MercatorCoordinate.fromLngLat(L,z),re=K.x-j.x,ae=K.y-j.y,ve=K.z-j.z,Ee=Math.hypot(re,ae,ve);if(Ee===0)throw new Error("Can't calculate camera options with same From and To");const Te=Math.hypot(re,ae),Ze=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ee/this.transform.tileSize),T=180*Math.atan2(re,-ae)/Math.PI;let B=180*Math.acos(Te/Ee)/Math.PI;return B=ve<0?90-B:90+B,{center:K.toLngLat(),zoom:Ze,pitch:B,bearing:T}}easeTo(p,k){this._stop(!1,p.easeId),((p=s.extend({offset:[0,0],duration:500,easing:s.defaultEasing},p)).animate===!1||!p.essential&&s.browser.prefersReducedMotion)&&(p.duration=0);const L=this._getTransformForUpdate(),z=this.getZoom(),j=this.getBearing(),K=this.getPitch(),re=this.getPadding(),ae="zoom"in p?+p.zoom:z,ve="bearing"in p?this._normalizeBearing(p.bearing,j):j,Ee="pitch"in p?+p.pitch:K,Te="padding"in p?p.padding:L.padding,Ze=s.Point.convert(p.offset);let T=L.centerPoint.add(Ze);const B=L.pointLocation(T),W=s.LngLat.convert(p.center||B);this._normalizeCenter(W);const Q=L.project(B),de=L.project(W).sub(Q),ke=L.zoomScale(ae-z);let fe,Se;p.around&&(fe=s.LngLat.convert(p.around),Se=L.locationPoint(fe));const De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ae!==z,this._rotating=this._rotating||j!==ve,this._pitching=this._pitching||Ee!==K,this._padding=!L.isPaddingEqual(Te),this._easeId=p.easeId,this._prepareEase(k,p.noMoveStart,De),this.terrain&&this._prepareElevation(W),this._ease(je=>{if(this._zooming&&(L.zoom=s.interpolate.number(z,ae,je)),this._rotating&&(L.bearing=s.interpolate.number(j,ve,je)),this._pitching&&(L.pitch=s.interpolate.number(K,Ee,je)),this._padding&&(L.interpolatePadding(re,Te,je),T=L.centerPoint.add(Ze)),this.terrain&&!p.freezeElevation&&this._updateElevation(je),fe)L.setLocationAtPoint(fe,Se);else{const ut=L.zoomScale(L.zoom-z),Dt=ae>z?Math.min(2,ke):Math.max(.5,ke),Tt=Math.pow(Dt,1-je),Ct=L.unproject(Q.add(de.mult(je*Tt)).mult(ut));L.setLocationAtPoint(L.renderWorldCopies?Ct.wrap():Ct,T)}this._applyUpdatedTransform(L),this._fireMoveEvents(k)},je=>{this.terrain&&this._finalizeElevation(),this._afterEase(k,je)},p),this}_prepareEase(p,k,L={}){this._moving=!0,k||L.moving||this.fire(new s.Event("movestart",p)),this._zooming&&!L.zooming&&this.fire(new s.Event("zoomstart",p)),this._rotating&&!L.rotating&&this.fire(new s.Event("rotatestart",p)),this._pitching&&!L.pitching&&this.fire(new s.Event("pitchstart",p))}_prepareElevation(p){this._elevationCenter=p,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(p){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const k=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(p<1&&k!==this._elevationTarget){const L=this._elevationTarget-this._elevationStart;this._elevationStart+=p*(L-(k-(L*p+this._elevationStart))/(1-p)),this._elevationTarget=k}this.transform.elevation=s.interpolate.number(this._elevationStart,this._elevationTarget,p)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(p){if(!this.transformCameraUpdate)return;const k=p.clone(),{center:L,zoom:z,pitch:j,bearing:K,elevation:re}=this.transformCameraUpdate(k);L&&(k.center=L),z!==void 0&&(k.zoom=z),j!==void 0&&(k.pitch=j),K!==void 0&&(k.bearing=K),re!==void 0&&(k.elevation=re),this.transform.apply(k)}_fireMoveEvents(p){this.fire(new s.Event("move",p)),this._zooming&&this.fire(new s.Event("zoom",p)),this._rotating&&this.fire(new s.Event("rotate",p)),this._pitching&&this.fire(new s.Event("pitch",p))}_afterEase(p,k){if(this._easeId&&k&&this._easeId===k)return;delete this._easeId;const L=this._zooming,z=this._rotating,j=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,L&&this.fire(new s.Event("zoomend",p)),z&&this.fire(new s.Event("rotateend",p)),j&&this.fire(new s.Event("pitchend",p)),this.fire(new s.Event("moveend",p))}flyTo(p,k){if(!p.essential&&s.browser.prefersReducedMotion){const hr=s.pick(p,["center","zoom","bearing","pitch","around"]);return this.jumpTo(hr,k)}this.stop(),p=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.defaultEasing},p);const L=this._getTransformForUpdate(),z=this.getZoom(),j=this.getBearing(),K=this.getPitch(),re=this.getPadding(),ae="zoom"in p?s.clamp(+p.zoom,L.minZoom,L.maxZoom):z,ve="bearing"in p?this._normalizeBearing(p.bearing,j):j,Ee="pitch"in p?+p.pitch:K,Te="padding"in p?p.padding:L.padding,Ze=L.zoomScale(ae-z),T=s.Point.convert(p.offset);let B=L.centerPoint.add(T);const W=L.pointLocation(B),Q=s.LngLat.convert(p.center||W);this._normalizeCenter(Q);const de=L.project(W),ke=L.project(Q).sub(de);let fe=p.curve;const Se=Math.max(L.width,L.height),De=Se/Ze,je=ke.mag();if("minZoom"in p){const hr=s.clamp(Math.min(p.minZoom,z,ae),L.minZoom,L.maxZoom),Ur=Se/L.zoomScale(hr-z);fe=Math.sqrt(Ur/je*2)}const ut=fe*fe;function Dt(hr){const Ur=(De*De-Se*Se+(hr?-1:1)*ut*ut*je*je)/(2*(hr?De:Se)*ut*je);return Math.log(Math.sqrt(Ur*Ur+1)-Ur)}function Tt(hr){return(Math.exp(hr)-Math.exp(-hr))/2}function Ct(hr){return(Math.exp(hr)+Math.exp(-hr))/2}const br=Dt(!1);let kr=function(hr){return Ct(br)/Ct(br+fe*hr)},_t=function(hr){return Se*((Ct(br)*(Tt(Ur=br+fe*hr)/Ct(Ur))-Tt(br))/ut)/je;var Ur},jt=(Dt(!0)-br)/fe;if(Math.abs(je)<1e-6||!isFinite(jt)){if(Math.abs(Se-De)<1e-6)return this.easeTo(p,k);const hr=De<Se?-1:1;jt=Math.abs(Math.log(De/Se))/fe,_t=function(){return 0},kr=function(Ur){return Math.exp(hr*fe*Ur)}}return p.duration="duration"in p?+p.duration:1e3*jt/("screenSpeed"in p?+p.screenSpeed/fe:+p.speed),p.maxDuration&&p.duration>p.maxDuration&&(p.duration=0),this._zooming=!0,this._rotating=j!==ve,this._pitching=Ee!==K,this._padding=!L.isPaddingEqual(Te),this._prepareEase(k,!1),this.terrain&&this._prepareElevation(Q),this._ease(hr=>{const Ur=hr*jt,Pr=1/kr(Ur);L.zoom=hr===1?ae:z+L.scaleZoom(Pr),this._rotating&&(L.bearing=s.interpolate.number(j,ve,hr)),this._pitching&&(L.pitch=s.interpolate.number(K,Ee,hr)),this._padding&&(L.interpolatePadding(re,Te,hr),B=L.centerPoint.add(T)),this.terrain&&!p.freezeElevation&&this._updateElevation(hr);const qr=hr===1?Q:L.unproject(de.add(ke.mult(_t(Ur))).mult(Pr));L.setLocationAtPoint(L.renderWorldCopies?qr.wrap():qr,B),this._applyUpdatedTransform(L),this._fireMoveEvents(k)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(k)},p),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(p,k){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const L=this._onEaseEnd;delete this._onEaseEnd,L.call(this,k)}if(!p){const L=this.handlers;L&&L.stop(!1)}return this}_ease(p,k,L){L.animate===!1||L.duration===0?(p(1),k()):(this._easeStart=s.browser.now(),this._easeOptions=L,this._onEaseFrame=p,this._onEaseEnd=k,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(p,k){p=s.wrap(p,-180,180);const L=Math.abs(p-k);return Math.abs(p-360-k)<L&&(p-=360),Math.abs(p+360-k)<L&&(p+=360),p}_normalizeCenter(p){const k=this.transform;if(!k.renderWorldCopies||k.lngRange)return;const L=p.lng-k.center.lng;p.lng+=L>180?-360:L<-180?360:0}queryTerrainElevation(p){return this.terrain?this.terrain.getElevationForLngLatZoom(s.LngLat.convert(p),this.transform.tileZoom)-this.transform.elevation:null}}class Ws{constructor(p={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=k=>{!k||k.sourceDataType!=="metadata"&&k.sourceDataType!=="visibility"&&k.dataType!=="style"&&k.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=p}getDefaultPosition(){return"bottom-right"}onAdd(p){return this._map=p,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(p,k){const L=this._map._getUIString(`AttributionControl.${k}`);p.title=L,p.setAttribute("aria-label",L)}_updateAttributions(){if(!this._map.style)return;let p=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?p=p.concat(this.options.customAttribution.map(z=>typeof z!="string"?"":z)):typeof this.options.customAttribution=="string"&&p.push(this.options.customAttribution)),this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const k=this._map.style.sourceCaches;for(const z in k){const j=k[z];if(j.used||j.usedForTerrain){const K=j.getSource();K.attribution&&p.indexOf(K.attribution)<0&&p.push(K.attribution)}}p=p.filter(z=>String(z).trim()),p.sort((z,j)=>z.length-j.length),p=p.filter((z,j)=>{for(let K=j+1;K<p.length;K++)if(p[K].indexOf(z)>=0)return!1;return!0});const L=p.join(" | ");L!==this._attribHTML&&(this._attribHTML=L,p.length?(this._innerContainer.innerHTML=L,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Eu{constructor(p={}){this._updateCompact=()=>{const k=this._container.children;if(k.length){const L=k[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&L.classList.add("maplibregl-compact"):L.classList.remove("maplibregl-compact")}},this.options=p}getDefaultPosition(){return"bottom-left"}onAdd(p){this._map=p,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl");const k=y.create("a","maplibregl-ctrl-logo");return k.target="_blank",k.rel="noopener nofollow",k.href="https://maplibre.org/",k.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),k.setAttribute("rel","noopener nofollow"),this._container.appendChild(k),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ii{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(p){const k=++this._id;return this._queue.push({callback:p,id:k,cancelled:!1}),k}remove(p){const k=this._currentlyRunning,L=k?this._queue.concat(k):this._queue;for(const z of L)if(z.id===p)return void(z.cancelled=!0)}run(p=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const k=this._currentlyRunning=this._queue;this._queue=[];for(const L of k)if(!L.cancelled&&(L.callback(p),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const rn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Ra=s.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Qa extends s.Evented{constructor(p){super(),this.sourceCache=p,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,p.usedForTerrain=!0,p.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(p,k){this.sourceCache.update(p,k),this._renderableTilesKeys=[];const L={};for(const z of p.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:k}))L[z.key]=!0,this._renderableTilesKeys.push(z.key),this._tiles[z.key]||(z.posMatrix=new Float64Array(16),s.ortho(z.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),this._tiles[z.key]=new dr(z,this.tileSize));for(const z in this._tiles)L[z]||delete this._tiles[z]}freeRtt(p){for(const k in this._tiles){const L=this._tiles[k];(!p||L.tileID.equals(p)||L.tileID.isChildOf(p)||p.isChildOf(L.tileID))&&(L.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(p=>this.getTileByID(p))}getTileByID(p){return this._tiles[p]}getTerrainCoords(p){const k={};for(const L of this._renderableTilesKeys){const z=this._tiles[L].tileID;if(z.canonical.equals(p.canonical)){const j=p.clone();j.posMatrix=new Float64Array(16),s.ortho(j.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),k[L]=j}else if(z.canonical.isChildOf(p.canonical)){const j=p.clone();j.posMatrix=new Float64Array(16);const K=z.canonical.z-p.canonical.z,re=z.canonical.x-(z.canonical.x>>K<<K),ae=z.canonical.y-(z.canonical.y>>K<<K),ve=s.EXTENT>>K;s.ortho(j.posMatrix,0,ve,0,ve,0,1),s.translate(j.posMatrix,j.posMatrix,[-re*ve,-ae*ve,0]),k[L]=j}else if(p.canonical.isChildOf(z.canonical)){const j=p.clone();j.posMatrix=new Float64Array(16);const K=p.canonical.z-z.canonical.z,re=p.canonical.x-(p.canonical.x>>K<<K),ae=p.canonical.y-(p.canonical.y>>K<<K),ve=s.EXTENT>>K;s.ortho(j.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),s.translate(j.posMatrix,j.posMatrix,[re*ve,ae*ve,0]),s.scale(j.posMatrix,j.posMatrix,[1/2**K,1/2**K,0]),k[L]=j}}return k}getSourceTile(p,k){const L=this.sourceCache._source;let z=p.overscaledZ-this.deltaZoom;if(z>L.maxzoom&&(z=L.maxzoom),z<L.minzoom)return null;this._sourceTileCache[p.key]||(this._sourceTileCache[p.key]=p.scaledTo(z).key);let j=this.sourceCache.getTileByID(this._sourceTileCache[p.key]);if((!j||!j.dem)&&k)for(;z>=L.minzoom&&(!j||!j.dem);)j=this.sourceCache.getTileByID(p.scaledTo(z--).key);return j}tilesAfterTime(p=Date.now()){return Object.values(this._tiles).filter(k=>k.timeAdded>=p)}}class Jc{constructor(p,k,L){this.painter=p,this.sourceCache=new Qa(k),this.options=L,this.exaggeration=typeof L.exaggeration=="number"?L.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(p,k,L,z=s.EXTENT){var j;if(!(k>=0&&k<z&&L>=0&&L<z))return 0;const K=this.getTerrainData(p),re=(j=K.tile)===null||j===void 0?void 0:j.dem;if(!re)return 0;const ae=function(B,W,Q){var de=W[0],ke=W[1];return B[0]=Q[0]*de+Q[4]*ke+Q[12],B[1]=Q[1]*de+Q[5]*ke+Q[13],B}([],[k/z*s.EXTENT,L/z*s.EXTENT],K.u_terrain_matrix),ve=[ae[0]*re.dim,ae[1]*re.dim],Ee=Math.floor(ve[0]),Te=Math.floor(ve[1]),Ze=ve[0]-Ee,T=ve[1]-Te;return re.get(Ee,Te)*(1-Ze)*(1-T)+re.get(Ee+1,Te)*Ze*(1-T)+re.get(Ee,Te+1)*(1-Ze)*T+re.get(Ee+1,Te+1)*Ze*T}getElevationForLngLatZoom(p,k){const{tileID:L,mercatorX:z,mercatorY:j}=this._getOverscaledTileIDFromLngLatZoom(p,k);return this.getElevation(L,z%s.EXTENT,j%s.EXTENT,s.EXTENT)}getElevation(p,k,L,z=s.EXTENT){return this.getDEMElevation(p,k,L,z)*this.exaggeration}getTerrainData(p){if(!this._emptyDemTexture){const z=this.painter.context,j=new s.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ue(z,j,z.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ue(z,new s.RGBAImage({width:1,height:1}),z.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.identity([])}const k=this.sourceCache.getSourceTile(p,!0);if(k&&k.dem&&(!k.demTexture||k.needsTerrainPrepare)){const z=this.painter.context;k.demTexture=this.painter.getTileTexture(k.dem.stride),k.demTexture?k.demTexture.update(k.dem.getPixels(),{premultiply:!1}):k.demTexture=new Ue(z,k.dem.getPixels(),z.gl.RGBA,{premultiply:!1}),k.demTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),k.needsTerrainPrepare=!1}const L=k&&k+k.tileID.key+p.key;if(L&&!this._demMatrixCache[L]){const z=this.sourceCache.sourceCache._source.maxzoom;let j=p.canonical.z-k.tileID.canonical.z;p.overscaledZ>p.canonical.z&&(p.canonical.z>=z?j=p.canonical.z-z:s.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const K=p.canonical.x-(p.canonical.x>>j<<j),re=p.canonical.y-(p.canonical.y>>j<<j),ae=s.fromScaling(new Float64Array(16),[1/(s.EXTENT<<j),1/(s.EXTENT<<j),0]);s.translate(ae,ae,[K*s.EXTENT,re*s.EXTENT,0]),this._demMatrixCache[p.key]={matrix:ae,coord:p}}return{u_depth:2,u_terrain:3,u_terrain_dim:k&&k.dem&&k.dem.dim||1,u_terrain_matrix:L?this._demMatrixCache[p.key].matrix:this._emptyDemMatrix,u_terrain_unpack:k&&k.dem&&k.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(k&&k.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:k}}getFramebuffer(p){const k=this.painter,L=k.width/devicePixelRatio,z=k.height/devicePixelRatio;return!this._fbo||this._fbo.width===L&&this._fbo.height===z||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ue(k.context,{width:L,height:z,data:null},k.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(k.context.gl.NEAREST,k.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ue(k.context,{width:L,height:z,data:null},k.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(k.context.gl.NEAREST,k.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=k.context.createFramebuffer(L,z,!0,!1),this._fbo.depthAttachment.set(k.context.createRenderbuffer(k.context.gl.DEPTH_COMPONENT16,L,z))),this._fbo.colorAttachment.set(p==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const p=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const k=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let j=0,K=0;j<this._coordsTextureSize;j++)for(let re=0;re<this._coordsTextureSize;re++,K+=4)k[K+0]=255&re,k[K+1]=255&j,k[K+2]=re>>8<<4|j>>8,k[K+3]=0;const L=new s.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(k.buffer)),z=new Ue(p,L,p.gl.RGBA,{premultiply:!1});return z.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._coordsTexture=z,z}pointCoordinate(p){const k=new Uint8Array(4),L=this.painter.context,z=L.gl;L.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),z.readPixels(p.x,this.painter.height/devicePixelRatio-p.y-1,1,1,z.RGBA,z.UNSIGNED_BYTE,k),L.bindFramebuffer.set(null);const j=k[0]+(k[2]>>4<<8),K=k[1]+((15&k[2])<<8),re=this.coordsIndex[255-k[3]],ae=re&&this.sourceCache.getTileByID(re);if(!ae)return null;const ve=this._coordsTextureSize,Ee=(1<<ae.tileID.canonical.z)*ve;return new s.MercatorCoordinate((ae.tileID.canonical.x*ve+j)/Ee,(ae.tileID.canonical.y*ve+K)/Ee,this.getElevation(ae.tileID,j,K,ve))}getTerrainMesh(){if(this._mesh)return this._mesh;const p=this.painter.context,k=new s.Pos3dArray,L=new s.TriangleIndexArray,z=this.meshSize,j=s.EXTENT/z,K=z*z;for(let Te=0;Te<=z;Te++)for(let Ze=0;Ze<=z;Ze++)k.emplaceBack(Ze*j,Te*j,0);for(let Te=0;Te<K;Te+=z+1)for(let Ze=0;Ze<z;Ze++)L.emplaceBack(Ze+Te,z+Ze+Te+1,z+Ze+Te+2),L.emplaceBack(Ze+Te,z+Ze+Te+2,Ze+Te+1);const re=k.length,ae=re+2*(z+1);for(const Te of[0,1])for(let Ze=0;Ze<=z;Ze++)for(const T of[0,1])k.emplaceBack(Ze*j,Te*s.EXTENT,T);for(let Te=0;Te<2*z;Te+=2)L.emplaceBack(ae+Te,ae+Te+1,ae+Te+3),L.emplaceBack(ae+Te,ae+Te+3,ae+Te+2),L.emplaceBack(re+Te,re+Te+3,re+Te+1),L.emplaceBack(re+Te,re+Te+2,re+Te+3);const ve=k.length,Ee=ve+2*(z+1);for(const Te of[0,1])for(let Ze=0;Ze<=z;Ze++)for(const T of[0,1])k.emplaceBack(Te*s.EXTENT,Ze*j,T);for(let Te=0;Te<2*z;Te+=2)L.emplaceBack(ve+Te,ve+Te+1,ve+Te+3),L.emplaceBack(ve+Te,ve+Te+3,ve+Te+2),L.emplaceBack(Ee+Te,Ee+Te+3,Ee+Te+1),L.emplaceBack(Ee+Te,Ee+Te+2,Ee+Te+3);return this._mesh={indexBuffer:p.createIndexBuffer(L),vertexBuffer:p.createVertexBuffer(k,Ra.members),segments:s.SegmentVector.simpleSegment(0,0,k.length,L.length)},this._mesh}getMeshFrameDelta(p){return 2*Math.PI*s.earthRadius/Math.pow(2,p)/5}getMinTileElevationForLngLatZoom(p,k){var L;const{tileID:z}=this._getOverscaledTileIDFromLngLatZoom(p,k);return(L=this.getMinMaxElevation(z).minElevation)!==null&&L!==void 0?L:0}getMinMaxElevation(p){const k=this.getTerrainData(p).tile,L={minElevation:null,maxElevation:null};return k&&k.dem&&(L.minElevation=k.dem.min*this.exaggeration,L.maxElevation=k.dem.max*this.exaggeration),L}_getOverscaledTileIDFromLngLatZoom(p,k){const L=s.MercatorCoordinate.fromLngLat(p.wrap()),z=(1<<k)*s.EXTENT,j=L.x*z,K=L.y*z,re=Math.floor(j/s.EXTENT),ae=Math.floor(K/s.EXTENT);return{tileID:new s.OverscaledTileID(k,0,k,re,ae),mercatorX:j,mercatorY:K}}}class es{constructor(p,k,L){this._context=p,this._size=k,this._tileSize=L,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const p of this._objects)p.texture.destroy(),p.fbo.destroy()}_createObject(p){const k=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),L=new Ue(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return L.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),k.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),k.colorAttachment.set(L.texture),{id:p,fbo:k,texture:L,stamp:-1,inUse:!1}}getObjectForId(p){return this._objects[p]}useObject(p){p.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(k=>p.id!==k),this._recentlyUsed.push(p.id)}stampObject(p){p.stamp=++this._stamp}getOrCreateFreeObject(){for(const k of this._recentlyUsed)if(!this._objects[k].inUse)return this._objects[k];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const p=this._createObject(this._objects.length);return this._objects.push(p),p}freeObject(p){p.inUse=!1}freeAllObjects(){for(const p of this._objects)this.freeObject(p)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(p=>!p.inUse)===!1}}const nu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zs{constructor(p,k){this.painter=p,this.terrain=k,this.pool=new es(p.context,30,k.sourceCache.tileSize*k.qualityFactor)}destruct(){this.pool.destruct()}getTexture(p){return this.pool.getObjectForId(p.rtt[this._stacks.length-1].id).texture}prepareForRender(p,k){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=p._order.filter(L=>!p._layers[L].isHidden(k)),this._coordsDescendingInv={};for(const L in p.sourceCaches){this._coordsDescendingInv[L]={};const z=p.sourceCaches[L].getVisibleCoordinates();for(const j of z){const K=this.terrain.sourceCache.getTerrainCoords(j);for(const re in K)this._coordsDescendingInv[L][re]||(this._coordsDescendingInv[L][re]=[]),this._coordsDescendingInv[L][re].push(K[re])}}this._coordsDescendingInvStr={};for(const L of p._order){const z=p._layers[L],j=z.source;if(nu[z.type]&&!this._coordsDescendingInvStr[j]){this._coordsDescendingInvStr[j]={};for(const K in this._coordsDescendingInv[j])this._coordsDescendingInvStr[j][K]=this._coordsDescendingInv[j][K].map(re=>re.key).sort().join()}}for(const L of this._renderableTiles)for(const z in this._coordsDescendingInvStr){const j=this._coordsDescendingInvStr[z][L.tileID.key];j&&j!==L.rttCoords[z]&&(L.rtt=[])}}renderLayer(p){if(p.isHidden(this.painter.transform.zoom))return!1;const k=p.type,L=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===p.id;if(nu[k]&&(this._prevType&&nu[this._prevType]||this._stacks.push([]),this._prevType=k,this._stacks[this._stacks.length-1].push(p.id),!z))return!0;if(nu[this._prevType]||nu[k]&&z){this._prevType=k;const j=this._stacks.length-1,K=this._stacks[j]||[];for(const re of this._renderableTiles){if(this.pool.isFull()&&(eu(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(re),re.rtt[j]){const ve=this.pool.getObjectForId(re.rtt[j].id);if(ve.stamp===re.rtt[j].stamp){this.pool.useObject(ve);continue}}const ae=this.pool.getOrCreateFreeObject();this.pool.useObject(ae),this.pool.stampObject(ae),re.rtt[j]={id:ae.id,stamp:ae.stamp},L.context.bindFramebuffer.set(ae.fbo.framebuffer),L.context.clear({color:s.Color.transparent,stencil:0}),L.currentStencilSource=void 0;for(let ve=0;ve<K.length;ve++){const Ee=L.style._layers[K[ve]],Te=Ee.source?this._coordsDescendingInv[Ee.source][re.tileID.key]:[re.tileID];L.context.viewport.set([0,0,ae.fbo.width,ae.fbo.height]),L._renderTileClippingMasks(Ee,Te),L.renderLayer(L,L.style.sourceCaches[Ee.source],Ee,Te),Ee.source&&(re.rttCoords[Ee.source]=this._coordsDescendingInvStr[Ee.source][re.tileID.key])}}return eu(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),nu[k]}return!1}}const g0=f,Lc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},qo=R=>{R.touchstart=R.dragStart,R.touchmoveWindow=R.dragMove,R.touchend=R.dragEnd},So={showCompass:!0,showZoom:!0,visualizePitch:!1};class os{constructor(p,k,L=!1){this.mousedown=K=>{this.startMouse(s.extend({},K,{ctrlKey:!0,preventDefault:()=>K.preventDefault()}),y.mousePos(this.element,K)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=K=>{this.moveMouse(K,y.mousePos(this.element,K))},this.mouseup=K=>{this.mouseRotate.dragEnd(K),this.mousePitch&&this.mousePitch.dragEnd(K),this.offTemp()},this.touchstart=K=>{K.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,K.targetTouches)[0],this.startTouch(K,this._startPos),y.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.addEventListener(window,"touchend",this.touchend))},this.touchmove=K=>{K.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,K.targetTouches)[0],this.moveTouch(K,this._lastPos))},this.touchend=K=>{K.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const z=p.dragRotate._mouseRotate.getClickTolerance(),j=p.dragRotate._mousePitch.getClickTolerance();this.element=k,this.mouseRotate=Su({clickTolerance:z,enable:!0}),this.touchRotate=(({enable:K,clickTolerance:re,bearingDegreesPerPixelMoved:ae=.8})=>{const ve=new Is;return new zo({clickTolerance:re,move:(Ee,Te)=>({bearingDelta:(Te.x-Ee.x)*ae}),moveStateManager:ve,enable:K,assignEvents:qo})})({clickTolerance:z,enable:!0}),this.map=p,L&&(this.mousePitch=m0({clickTolerance:j,enable:!0}),this.touchPitch=(({enable:K,clickTolerance:re,pitchDegreesPerPixelMoved:ae=-.5})=>{const ve=new Is;return new zo({clickTolerance:re,move:(Ee,Te)=>({pitchDelta:(Te.y-Ee.y)*ae}),moveStateManager:ve,enable:K,assignEvents:qo})})({clickTolerance:j,enable:!0})),y.addEventListener(k,"mousedown",this.mousedown),y.addEventListener(k,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(k,"touchcancel",this.reset)}startMouse(p,k){this.mouseRotate.dragStart(p,k),this.mousePitch&&this.mousePitch.dragStart(p,k),y.disableDrag()}startTouch(p,k){this.touchRotate.dragStart(p,k),this.touchPitch&&this.touchPitch.dragStart(p,k),y.disableDrag()}moveMouse(p,k){const L=this.map,{bearingDelta:z}=this.mouseRotate.dragMove(p,k)||{};if(z&&L.setBearing(L.getBearing()+z),this.mousePitch){const{pitchDelta:j}=this.mousePitch.dragMove(p,k)||{};j&&L.setPitch(L.getPitch()+j)}}moveTouch(p,k){const L=this.map,{bearingDelta:z}=this.touchRotate.dragMove(p,k)||{};if(z&&L.setBearing(L.getBearing()+z),this.touchPitch){const{pitchDelta:j}=this.touchPitch.dragMove(p,k)||{};j&&L.setPitch(L.getPitch()+j)}}off(){const p=this.element;y.removeEventListener(p,"mousedown",this.mousedown),y.removeEventListener(p,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend),y.removeEventListener(p,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend)}}let fa;function Tc(R,p,k){if(R=new s.LngLat(R.lng,R.lat),p){const L=new s.LngLat(R.lng-360,R.lat),z=new s.LngLat(R.lng+360,R.lat),j=k.locationPoint(R).distSqr(p);k.locationPoint(L).distSqr(p)<j?R=L:k.locationPoint(z).distSqr(p)<j&&(R=z)}for(;Math.abs(R.lng-k.center.lng)>180;){const L=k.locationPoint(R);if(L.x>=0&&L.y>=0&&L.x<=k.width&&L.y<=k.height)break;R.lng>k.center.lng?R.lng-=360:R.lng+=360}return R}const ou={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Oa(R,p,k){const L=R.classList;for(const z in ou)L.remove(`maplibregl-${k}-anchor-${z}`);L.add(`maplibregl-${k}-anchor-${p}`)}class Fa extends s.Evented{constructor(p){if(super(),this._onKeyPress=k=>{const L=k.code,z=k.charCode||k.keyCode;L!=="Space"&&L!=="Enter"&&z!==32&&z!==13||this.togglePopup()},this._onMapClick=k=>{const L=k.originalEvent.target,z=this._element;this._popup&&(L===z||z.contains(L))&&this.togglePopup()},this._update=k=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Tc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(L=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?z="rotateX(0deg)":this._pitchAlignment==="map"&&(z=`rotateX(${this._map.getPitch()}deg)`),k&&k.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${ou[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${z} ${L}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const j=this._map.unproject(this._pos),K=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=j.distanceTo(this._lngLat)>20*K?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=k=>{if(!this._isDragging){const L=this._clickTolerance||this._map._clickTolerance;this._isDragging=k.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=k.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"},this._addDragHandler=k=>{this._element.contains(k.originalEvent.target)&&(k.preventDefault(),this._positionDelta=k.point.sub(this._pos).add(this._offset),this._pointerdownPos=k.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=p&&p.anchor||"center",this._color=p&&p.color||"#3FB1CE",this._scale=p&&p.scale||1,this._draggable=p&&p.draggable||!1,this._clickTolerance=p&&p.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=p&&p.rotation||0,this._rotationAlignment=p&&p.rotationAlignment||"auto",this._pitchAlignment=p&&p.pitchAlignment&&p.pitchAlignment!=="auto"?p.pitchAlignment:this._rotationAlignment,p&&p.element)this._element=p.element,this._offset=s.Point.convert(p&&p.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const k=y.createNS("http://www.w3.org/2000/svg","svg"),L=41,z=27;k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height",`${L}px`),k.setAttributeNS(null,"width",`${z}px`),k.setAttributeNS(null,"viewBox",`0 0 ${z} ${L}`);const j=y.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"stroke","none"),j.setAttributeNS(null,"stroke-width","1"),j.setAttributeNS(null,"fill","none"),j.setAttributeNS(null,"fill-rule","evenodd");const K=y.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");const re=y.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(3.0, 29.0)"),re.setAttributeNS(null,"fill","#000000");const ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of ae){const ke=y.createNS("http://www.w3.org/2000/svg","ellipse");ke.setAttributeNS(null,"opacity","0.04"),ke.setAttributeNS(null,"cx","10.5"),ke.setAttributeNS(null,"cy","5.80029008"),ke.setAttributeNS(null,"rx",de.rx),ke.setAttributeNS(null,"ry",de.ry),re.appendChild(ke)}const ve=y.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"fill",this._color);const Ee=y.createNS("http://www.w3.org/2000/svg","path");Ee.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ve.appendChild(Ee);const Te=y.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"fill","#000000");const Ze=y.createNS("http://www.w3.org/2000/svg","path");Ze.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Te.appendChild(Ze);const T=y.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(6.0, 7.0)"),T.setAttributeNS(null,"fill","#FFFFFF");const B=y.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(8.0, 8.0)");const W=y.createNS("http://www.w3.org/2000/svg","circle");W.setAttributeNS(null,"fill","#000000"),W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"cx","5.5"),W.setAttributeNS(null,"cy","5.5"),W.setAttributeNS(null,"r","5.4999962");const Q=y.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#FFFFFF"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962"),B.appendChild(W),B.appendChild(Q),K.appendChild(re),K.appendChild(ve),K.appendChild(Te),K.appendChild(T),K.appendChild(B),k.appendChild(K),k.setAttributeNS(null,"height",L*this._scale+"px"),k.setAttributeNS(null,"width",z*this._scale+"px"),this._element.appendChild(k),this._offset=s.Point.convert(p&&p.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",k=>{k.preventDefault()}),this._element.addEventListener("mousedown",k=>{k.preventDefault()}),Oa(this._element,this._anchor,"marker"),p&&p.className)for(const k of p.className.split(" "))this._element.classList.add(k);this._popup=null}addTo(p){return this.remove(),this._map=p,p.getCanvasContainer().appendChild(this._element),p.on("move",this._update),p.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=s.LngLat.convert(p),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(p){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),p){if(!("offset"in p.options)){const z=Math.abs(13.5)/Math.SQRT2;p.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(38.1-13.5+z)],"bottom-right":[-z,-1*(38.1-13.5+z)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=p,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const p=this._popup;return p?(p.isOpen()?p.remove():p.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(p){return this._offset=s.Point.convert(p),this._update(),this}addClassName(p){this._element.classList.add(p)}removeClassName(p){this._element.classList.remove(p)}toggleClassName(p){return this._element.classList.toggle(p)}setDraggable(p){return this._draggable=!!p,this._map&&(p?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(p){return this._rotation=p||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(p){return this._rotationAlignment=p||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(p){return this._pitchAlignment=p&&p!=="auto"?p:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Pc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ec=0,Dl=!1;const as={maxWidth:100,unit:"metric"};function Mc(R,p,k){const L=k&&k.maxWidth||100,z=R._container.clientHeight/2,j=R.unproject([0,z]),K=R.unproject([L,z]),re=j.distanceTo(K);if(k&&k.unit==="imperial"){const ae=3.2808*re;ae>5280?zl(p,L,ae/5280,R._getUIString("ScaleControl.Miles")):zl(p,L,ae,R._getUIString("ScaleControl.Feet"))}else k&&k.unit==="nautical"?zl(p,L,re/1852,R._getUIString("ScaleControl.NauticalMiles")):re>=1e3?zl(p,L,re/1e3,R._getUIString("ScaleControl.Kilometers")):zl(p,L,re,R._getUIString("ScaleControl.Meters"))}function zl(R,p,k,L){const z=function(j){const K=Math.pow(10,`${Math.floor(j)}`.length-1);let re=j/K;return re=re>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(ae){const ve=Math.pow(10,Math.ceil(-Math.log(ae)/Math.LN10));return Math.round(ae*ve)/ve}(re),K*re}(k);R.style.width=p*(z/k)+"px",R.innerHTML=`${z}&nbsp;${L}`}const y0={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},tc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Cu(R){if(R){if(typeof R=="number"){const p=Math.round(Math.abs(R)/Math.SQRT2);return{center:new s.Point(0,0),top:new s.Point(0,R),"top-left":new s.Point(p,p),"top-right":new s.Point(-p,p),bottom:new s.Point(0,-R),"bottom-left":new s.Point(p,-p),"bottom-right":new s.Point(-p,-p),left:new s.Point(R,0),right:new s.Point(-R,0)}}if(R instanceof s.Point||Array.isArray(R)){const p=s.Point.convert(R);return{center:p,top:p,"top-left":p,"top-right":p,bottom:p,"bottom-left":p,"bottom-right":p,left:p,right:p}}return{center:s.Point.convert(R.center||[0,0]),top:s.Point.convert(R.top||[0,0]),"top-left":s.Point.convert(R["top-left"]||[0,0]),"top-right":s.Point.convert(R["top-right"]||[0,0]),bottom:s.Point.convert(R.bottom||[0,0]),"bottom-left":s.Point.convert(R["bottom-left"]||[0,0]),"bottom-right":s.Point.convert(R["bottom-right"]||[0,0]),left:s.Point.convert(R.left||[0,0]),right:s.Point.convert(R.right||[0,0])}}return Cu(new s.Point(0,0))}const au={extend:(R,...p)=>s.extend(R,...p),run(R){R()},logToElement(R,p=!1,k="log"){const L=window.document.getElementById(k);L&&(p&&(L.innerHTML=""),L.innerHTML+=`<br>${R}`)}},Dc=f;class lo{static get version(){return Dc}static get workerCount(){return ji.workerCount}static set workerCount(p){ji.workerCount=p}static get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(p){s.config.MAX_PARALLEL_IMAGE_REQUESTS=p}static get workerUrl(){return s.config.WORKER_URL}static set workerUrl(p){s.config.WORKER_URL=p}static addProtocol(p,k){s.config.REGISTERED_PROTOCOLS[p]=k}static removeProtocol(p){delete s.config.REGISTERED_PROTOCOLS[p]}}return lo.Map=class extends ff{constructor(R){if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(R=s.extend({},Lc,R)).minZoom!=null&&R.maxZoom!=null&&R.minZoom>R.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(R.minPitch!=null&&R.maxPitch!=null&&R.minPitch>R.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(R.minPitch!=null&&R.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(R.maxPitch!=null&&R.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Hs(R.minZoom,R.maxZoom,R.minPitch,R.maxPitch,R.renderWorldCopies),{bearingSnap:R.bearingSnap}),this._cooperativeGesturesOnWheel=p=>{this._onCooperativeGesture(p,p[this._metaKey],1)},this._contextLost=p=>{p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:p}))},this._contextRestored=p=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:p}))},this._onMapScroll=p=>{if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=R.interactive,this._cooperativeGestures=R.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=R.maxTileCacheSize,this._maxTileCacheZoomLevels=R.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=R.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=R.preserveDrawingBuffer,this._antialias=R.antialias,this._trackResize=R.trackResize,this._bearingSnap=R.bearingSnap,this._refreshExpiredTiles=R.refreshExpiredTiles,this._fadeDuration=R.fadeDuration,this._crossSourceCollisions=R.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=R.collectResourceTiming,this._renderTaskQueue=new Ii,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},rn,R.locale),this._clickTolerance=R.clickTolerance,this._overridePixelRatio=R.pixelRatio,this._maxCanvasSize=R.maxCanvasSize,this.transformCameraUpdate=R.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new Z(R.transformRequest),typeof R.container=="string"){if(this._container=document.getElementById(R.container),!this._container)throw new Error(`Container '${R.container}' not found.`)}else{if(!(R.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=R.container}if(R.maxBounds&&this.setMaxBounds(R.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let p=!1;const k=ma(L=>{this._trackResize&&!this._removed&&this.resize(L)._update()},50);this._resizeObserver=new ResizeObserver(L=>{p?k(L):p=!0}),this._resizeObserver.observe(this._container)}this.handlers=new B0(this,R),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=R.hash&&new Ss(typeof R.hash=="string"&&R.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:R.center,zoom:R.zoom,bearing:R.bearing,pitch:R.pitch}),R.bounds&&(this.resize(),this.fitBounds(R.bounds,s.extend({},R.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=R.localIdeographFontFamily,this._validateStyle=R.validateStyle,R.style&&this.setStyle(R.style,{localIdeographFontFamily:R.localIdeographFontFamily}),R.attributionControl&&this.addControl(new Ws({customAttribution:R.customAttribution})),R.maplibreLogo&&this.addControl(new Eu,R.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new s.Event(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new s.Event(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new s.Event("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(R,p){if(p===void 0&&(p=R.getDefaultPosition?R.getDefaultPosition():"top-right"),!R||!R.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const k=R.onAdd(this);this._controls.push(R);const L=this._controlPositions[p];return p.indexOf("bottom")!==-1?L.insertBefore(k,L.firstChild):L.appendChild(k),this}removeControl(R){if(!R||!R.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const p=this._controls.indexOf(R);return p>-1&&this._controls.splice(p,1),R.onRemove(this),this}hasControl(R){return this._controls.indexOf(R)>-1}calculateCameraOptionsFromTo(R,p,k,L){return L==null&&this.terrain&&(L=this.terrain.getElevationForLngLatZoom(k,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(R,p,k,L)}resize(R){var p;const k=this._containerDimensions(),L=k[0],z=k[1],j=this._getClampedPixelRatio(L,z);if(this._resizeCanvas(L,z,j),this.painter.resize(L,z,j),this.painter.overLimit()){const re=this.painter.context.gl;this._maxCanvasSize=[re.drawingBufferWidth,re.drawingBufferHeight];const ae=this._getClampedPixelRatio(L,z);this._resizeCanvas(L,z,ae),this.painter.resize(L,z,ae)}this.transform.resize(L,z),(p=this._requestedCameraState)===null||p===void 0||p.resize(L,z);const K=!this._moving;return K&&(this.stop(),this.fire(new s.Event("movestart",R)).fire(new s.Event("move",R))),this.fire(new s.Event("resize",R)),K&&this.fire(new s.Event("moveend",R)),this}_getClampedPixelRatio(R,p){const{0:k,1:L}=this._maxCanvasSize,z=this.getPixelRatio(),j=R*z,K=p*z;return Math.min(j>k?k/j:1,K>L?L/K:1)*z}getPixelRatio(){var R;return(R=this._overridePixelRatio)!==null&&R!==void 0?R:devicePixelRatio}setPixelRatio(R){this._overridePixelRatio=R,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(R){return this.transform.setMaxBounds(Ae.convert(R)),this._update()}setMinZoom(R){if((R=R??-2)>=-2&&R<=this.transform.maxZoom)return this.transform.minZoom=R,this._update(),this.getZoom()<R&&this.setZoom(R),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(R){if((R=R??22)>=this.transform.minZoom)return this.transform.maxZoom=R,this._update(),this.getZoom()>R&&this.setZoom(R),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(R){if((R=R??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(R>=0&&R<=this.transform.maxPitch)return this.transform.minPitch=R,this._update(),this.getPitch()<R&&this.setPitch(R),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(R){if((R=R??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(R>=this.transform.minPitch)return this.transform.maxPitch=R,this._update(),this.getPitch()>R&&this.setPitch(R),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(R){return this.transform.renderWorldCopies=R,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(R){return this._cooperativeGestures=R,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(R){return this.transform.locationPoint(s.LngLat.convert(R),this.style&&this.terrain)}unproject(R){return this.transform.pointLocation(s.Point.convert(R),this.terrain)}isMoving(){var R;return this._moving||((R=this.handlers)===null||R===void 0?void 0:R.isMoving())}isZooming(){var R;return this._zooming||((R=this.handlers)===null||R===void 0?void 0:R.isZooming())}isRotating(){var R;return this._rotating||((R=this.handlers)===null||R===void 0?void 0:R.isRotating())}_createDelegatedListener(R,p,k){if(R==="mouseenter"||R==="mouseover"){let L=!1;return{layer:p,listener:k,delegates:{mousemove:j=>{const K=this.getLayer(p)?this.queryRenderedFeatures(j.point,{layers:[p]}):[];K.length?L||(L=!0,k.call(this,new _n(R,this,j.originalEvent,{features:K}))):L=!1},mouseout:()=>{L=!1}}}}if(R==="mouseleave"||R==="mouseout"){let L=!1;return{layer:p,listener:k,delegates:{mousemove:K=>{(this.getLayer(p)?this.queryRenderedFeatures(K.point,{layers:[p]}):[]).length?L=!0:L&&(L=!1,k.call(this,new _n(R,this,K.originalEvent)))},mouseout:K=>{L&&(L=!1,k.call(this,new _n(R,this,K.originalEvent)))}}}}{const L=z=>{const j=this.getLayer(p)?this.queryRenderedFeatures(z.point,{layers:[p]}):[];j.length&&(z.features=j,k.call(this,z),delete z.features)};return{layer:p,listener:k,delegates:{[R]:L}}}}on(R,p,k){if(k===void 0)return super.on(R,p);const L=this._createDelegatedListener(R,p,k);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[R]=this._delegatedListeners[R]||[],this._delegatedListeners[R].push(L);for(const z in L.delegates)this.on(z,L.delegates[z]);return this}once(R,p,k){if(k===void 0)return super.once(R,p);const L=this._createDelegatedListener(R,p,k);for(const z in L.delegates)this.once(z,L.delegates[z]);return this}off(R,p,k){return k===void 0?super.off(R,p):(this._delegatedListeners&&this._delegatedListeners[R]&&(L=>{const z=this._delegatedListeners[R];for(let j=0;j<z.length;j++){const K=z[j];if(K.layer===p&&K.listener===k){for(const re in K.delegates)this.off(re,K.delegates[re]);return z.splice(j,1),this}}})(),this)}queryRenderedFeatures(R,p){if(!this.style)return[];let k;const L=R instanceof s.Point||Array.isArray(R),z=L?R:[[0,0],[this.transform.width,this.transform.height]];if(p=p||(L?{}:R)||{},z instanceof s.Point||typeof z[0]=="number")k=[s.Point.convert(z)];else{const j=s.Point.convert(z[0]),K=s.Point.convert(z[1]);k=[j,new s.Point(K.x,j.y),K,new s.Point(j.x,K.y),j]}return this.style.queryRenderedFeatures(k,p,this.transform)}querySourceFeatures(R,p){return this.style.querySourceFeatures(R,p)}setStyle(R,p){return(p=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},p)).diff!==!1&&p.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&R?(this._diffStyle(R,p),this):(this._localIdeographFontFamily=p.localIdeographFontFamily,this._updateStyle(R,p))}setTransformRequest(R){return this._requestManager.setTransformRequest(R),this}_getUIString(R){const p=this._locale[R];if(p==null)throw new Error(`Missing UI string '${R}'`);return p}_updateStyle(R,p){if(p.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(R,p));const k=this.style&&p.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!R)),R?(this.style=new la(this,p||{}),this.style.setEventedParent(this,{style:this.style}),typeof R=="string"?this.style.loadURL(R,p,k):this.style.loadJSON(R,p,k),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new la(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(R,p){if(typeof R=="string"){const k=this._requestManager.transformRequest(R,G.Style);s.getJSON(k,(L,z)=>{L?this.fire(new s.ErrorEvent(L)):z&&this._updateDiff(z,p)})}else typeof R=="object"&&this._updateDiff(R,p)}_updateDiff(R,p){try{this.style.setState(R,p)&&this._update(!0)}catch(k){s.warnOnce(`Unable to perform style diff: ${k.message||k.error||k}.  Rebuilding the style from scratch.`),this._updateStyle(R,p)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(R,p){return this._lazyInitEmptyStyle(),this.style.addSource(R,p),this._update(!0)}isSourceLoaded(R){const p=this.style&&this.style.sourceCaches[R];if(p!==void 0)return p.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${R}'`)))}setTerrain(R){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),R){const p=this.style.sourceCaches[R.source];if(!p)throw new Error(`cannot load terrain, because there exists no source with ID: ${R.source}`);for(const k in this.style._layers){const L=this.style._layers[k];L.type==="hillshade"&&L.source===R.source&&s.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Jc(this.painter,p,R),this.painter.renderToTexture=new Zs(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=k=>{k.dataType==="style"?this.terrain.sourceCache.freeRtt():k.dataType==="source"&&k.tile&&(k.sourceId!==R.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(k.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.Event("terrain",{terrain:R})),this}getTerrain(){var R,p;return(p=(R=this.terrain)===null||R===void 0?void 0:R.options)!==null&&p!==void 0?p:null}areTilesLoaded(){const R=this.style&&this.style.sourceCaches;for(const p in R){const k=R[p]._tiles;for(const L in k){const z=k[L];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0}addSourceType(R,p,k){return this._lazyInitEmptyStyle(),this.style.addSourceType(R,p,k)}removeSource(R){return this.style.removeSource(R),this._update(!0)}getSource(R){return this.style.getSource(R)}addImage(R,p,k={}){const{pixelRatio:L=1,sdf:z=!1,stretchX:j,stretchY:K,content:re}=k;if(this._lazyInitEmptyStyle(),!(p instanceof HTMLImageElement||s.isImageBitmap(p))){if(p.width===void 0||p.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ae,height:ve,data:Ee}=p,Te=p;return this.style.addImage(R,{data:new s.RGBAImage({width:ae,height:ve},new Uint8Array(Ee)),pixelRatio:L,stretchX:j,stretchY:K,content:re,sdf:z,version:0,userImage:Te}),Te.onAdd&&Te.onAdd(this,R),this}}{const{width:ae,height:ve,data:Ee}=s.browser.getImageData(p);this.style.addImage(R,{data:new s.RGBAImage({width:ae,height:ve},Ee),pixelRatio:L,stretchX:j,stretchY:K,content:re,sdf:z,version:0})}}updateImage(R,p){const k=this.style.getImage(R);if(!k)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const L=p instanceof HTMLImageElement||s.isImageBitmap(p)?s.browser.getImageData(p):p,{width:z,height:j,data:K}=L;if(z===void 0||j===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(z!==k.data.width||j!==k.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const re=!(p instanceof HTMLImageElement||s.isImageBitmap(p));return k.data.replace(K,re),this.style.updateImage(R,k),this}getImage(R){return this.style.getImage(R)}hasImage(R){return R?!!this.style.getImage(R):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(R){this.style.removeImage(R)}loadImage(R,p){$.getImage(this._requestManager.transformRequest(R,G.Image),p)}listImages(){return this.style.listImages()}addLayer(R,p){return this._lazyInitEmptyStyle(),this.style.addLayer(R,p),this._update(!0)}moveLayer(R,p){return this.style.moveLayer(R,p),this._update(!0)}removeLayer(R){return this.style.removeLayer(R),this._update(!0)}getLayer(R){return this.style.getLayer(R)}setLayerZoomRange(R,p,k){return this.style.setLayerZoomRange(R,p,k),this._update(!0)}setFilter(R,p,k={}){return this.style.setFilter(R,p,k),this._update(!0)}getFilter(R){return this.style.getFilter(R)}setPaintProperty(R,p,k,L={}){return this.style.setPaintProperty(R,p,k,L),this._update(!0)}getPaintProperty(R,p){return this.style.getPaintProperty(R,p)}setLayoutProperty(R,p,k,L={}){return this.style.setLayoutProperty(R,p,k,L),this._update(!0)}getLayoutProperty(R,p){return this.style.getLayoutProperty(R,p)}setGlyphs(R,p={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(R,p),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(R,p,k={}){return this._lazyInitEmptyStyle(),this.style.addSprite(R,p,k,L=>{L||this._update(!0)}),this}removeSprite(R){return this._lazyInitEmptyStyle(),this.style.removeSprite(R),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(R,p={}){return this._lazyInitEmptyStyle(),this.style.setSprite(R,p,k=>{k||this._update(!0)}),this}setLight(R,p={}){return this._lazyInitEmptyStyle(),this.style.setLight(R,p),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(R,p){return this.style.setFeatureState(R,p),this._update()}removeFeatureState(R,p){return this.style.removeFeatureState(R,p),this._update()}getFeatureState(R){return this.style.getFeatureState(R)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let R=0,p=0;return this._container&&(R=this._container.clientWidth||400,p=this._container.clientHeight||300),[R,p]}_setupContainer(){const R=this._container;R.classList.add("maplibregl-map");const p=this._canvasContainer=y.create("div","maplibregl-canvas-container",R);this._interactive&&p.classList.add("maplibregl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas",p),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const k=this._containerDimensions(),L=this._getClampedPixelRatio(k[0],k[1]);this._resizeCanvas(k[0],k[1],L);const z=this._controlContainer=y.create("div","maplibregl-control-container",R),j=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(K=>{j[K]=y.create("div",`maplibregl-ctrl-${K} `,z)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",this._container);let R=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(R=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${R}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){y.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(R,p,k){this._canvas.width=Math.floor(k*R),this._canvas.height=Math.floor(k*p),this._canvas.style.width=`${R}px`,this._canvas.style.height=`${p}px`}_setupPainter(){const R={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let p=null;this._canvas.addEventListener("webglcontextcreationerror",L=>{p={requestedAttributes:R},L&&(p.statusMessage=L.statusMessage,p.type=L.type)},{once:!0});const k=this._canvas.getContext("webgl2",R)||this._canvas.getContext("webgl",R);if(!k){const L="Failed to initialize WebGL";throw p?(p.message=L,new Error(JSON.stringify(p))):new Error(L)}this.painter=new Ka(k,this.transform),b.testSupport(k)}_onCooperativeGesture(R,p,k){return!p&&k<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(R){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||R,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(R){return this._update(),this._renderTaskQueue.add(R)}_cancelRenderFrame(R){this._renderTaskQueue.remove(R)}_render(R){const p=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(R),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,j=s.browser.now();this.style.zoomHistory.update(z,j);const K=new s.EvaluationParameters(z,{now:j,fadeDuration:p,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),re=K.crossFadingFactor();re===1&&re===this._crossFadingFactor||(k=!0,this._crossFadingFactor=re),this.style.update(K)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,p,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:p,showPadding:this.showPadding}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const L=this._sourcesDirty||this._styleDirty||this._placementDirty;return L||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var R;this._hash&&this._hash.remove();for(const k of this._controls)k.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(R=this._resizeObserver)===null||R===void 0||R.disconnect();const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.browser.frame(R=>{s.PerformanceUtils.frame(R),this._frame=null,this._render(R)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(R){this._showTileBoundaries!==R&&(this._showTileBoundaries=R,this._update())}get showPadding(){return!!this._showPadding}set showPadding(R){this._showPadding!==R&&(this._showPadding=R,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(R){this._showCollisionBoxes!==R&&(this._showCollisionBoxes=R,R?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(R){this._showOverdrawInspector!==R&&(this._showOverdrawInspector=R,this._update())}get repaint(){return!!this._repaint}set repaint(R){this._repaint!==R&&(this._repaint=R,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(R){this._vertices=R,this._update()}get version(){return g0}getCameraTargetElevation(){return this.transform.elevation}},lo.NavigationControl=class{constructor(R){this._updateZoomButtons=()=>{const p=this._map.getZoom(),k=p===this._map.getMaxZoom(),L=p===this._map.getMinZoom();this._zoomInButton.disabled=k,this._zoomOutButton.disabled=L,this._zoomInButton.setAttribute("aria-disabled",k.toString()),this._zoomOutButton.setAttribute("aria-disabled",L.toString())},this._rotateCompassArrow=()=>{const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p},this._setButtonTitle=(p,k)=>{const L=this._map._getUIString(`NavigationControl.${k}`);p.title=L,p.setAttribute("aria-label",L)},this.options=s.extend({},So,R),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",p=>p.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",p=>this._map.zoomIn({},{originalEvent:p})),y.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",p=>this._map.zoomOut({},{originalEvent:p})),y.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",p=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:p}):this._map.resetNorth({},{originalEvent:p})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new os(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(R,p){const k=y.create("button",R,this._container);return k.type="button",k.addEventListener("click",p),k}},lo.GeolocateControl=class extends s.Evented{constructor(R){super(),this._onSuccess=p=>{if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.Event("geolocate",p)),this._finish()}},this._updateCamera=p=>{const k=new s.LngLat(p.coords.longitude,p.coords.latitude),L=p.coords.accuracy,z=this._map.getBearing(),j=s.extend({bearing:z},this.options.fitBoundsOptions),K=Ae.fromLngLat(k,L);this._map.fitBounds(K,j,{geolocateSource:!0})},this._updateMarker=p=>{if(p){const k=new s.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(k).addTo(this._map),this._userLocationDotMarker.setLngLat(k).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=p=>{if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Dl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.Event("error",p)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=p=>{if(this._map){if(this._container.addEventListener("contextmenu",k=>k.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}else{const k=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Fa({element:this._dotElement}),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",k=>{k.geolocateSource||this._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}},this.options=s.extend({},Pc,R)}onAdd(R){return this._map=R,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(p,k=!1){fa===void 0||k?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(L=>{fa=L.state!=="denied",p(fa)}).catch(()=>{fa=!!window.navigator.geolocation,p(fa)}):(fa=!!window.navigator.geolocation,p(fa)):p(fa)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ec=0,Dl=!1}_isOutOfMapMaxBounds(R){const p=this._map.getMaxBounds(),k=R.coords;return p&&(k.longitude<p.getWest()||k.longitude>p.getEast()||k.latitude<p.getSouth()||k.latitude>p.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const R=this._map.getBounds(),p=R.getSouthEast(),k=R.getNorthEast(),L=p.distanceTo(k),z=Math.ceil(this._accuracy/(L/this._map._container.clientHeight)*2);this._circleElement.style.width=`${z}px`,this._circleElement.style.height=`${z}px`}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ec--,Dl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let R;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ec++,ec>1?(R={maximumAge:6e5,timeout:0},Dl=!0):(R=this.options.positionOptions,Dl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,R)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},lo.AttributionControl=Ws,lo.LogoControl=Eu,lo.ScaleControl=class{constructor(R){this._onMove=()=>{Mc(this._map,this._container,this.options)},this.setUnit=p=>{this.options.unit=p,Mc(this._map,this._container,this.options)},this.options=s.extend({},as,R)}getDefaultPosition(){return"bottom-left"}onAdd(R){return this._map=R,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},lo.FullscreenControl=class extends s.Evented{constructor(R={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,R&&R.container&&(R.container instanceof HTMLElement?this._container=R.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const R=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon",R).setAttribute("aria-hidden","true"),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new s.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},lo.TerrainControl=class{constructor(R){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=R}onAdd(R){return this._map=R,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},lo.Popup=class extends s.Evented{constructor(R){super(),this.remove=()=>(this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this),this._onMouseUp=p=>{this._update(p.point)},this._onMouseMove=p=>{this._update(p.point)},this._onDrag=p=>{this._update(p.point)},this._update=p=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=y.create("div","maplibregl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const K of this.options.className.split(" "))this._container.classList.add(K);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p)return;const k=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let L=this.options.anchor;const z=Cu(this.options.offset);if(!L){const K=this._container.offsetWidth,re=this._container.offsetHeight;let ae;ae=k.y+z.bottom.y<re?["top"]:k.y>this._map.transform.height-re?["bottom"]:[],k.x<K/2?ae.push("left"):k.x>this._map.transform.width-K/2&&ae.push("right"),L=ae.length===0?"bottom":ae.join("-")}const j=k.add(z[L]).round();y.setTransform(this._container,`${ou[L]} translate(${j.x}px,${j.y}px)`),Oa(this._container,L,"popup")},this._onClose=()=>{this.remove()},this.options=s.extend(Object.create(y0),R)}addTo(R){return this._map&&this.remove(),this._map=R,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(R){return this._lngLat=s.LngLat.convert(R),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(R){return this.setDOMContent(document.createTextNode(R))}setHTML(R){const p=document.createDocumentFragment(),k=document.createElement("body");let L;for(k.innerHTML=R;L=k.firstChild,L;)p.appendChild(L);return this.setDOMContent(p)}getMaxWidth(){var R;return(R=this._container)===null||R===void 0?void 0:R.style.maxWidth}setMaxWidth(R){return this.options.maxWidth=R,this._update(),this}setDOMContent(R){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(R),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(R){this._container&&this._container.classList.add(R)}removeClassName(R){this._container&&this._container.classList.remove(R)}setOffset(R){return this.options.offset=R,this._update(),this}toggleClassName(R){if(this._container)return this._container.classList.toggle(R)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const R=this._container.querySelector(tc);R&&R.focus()}},lo.Marker=Fa,lo.Style=la,lo.LngLat=s.LngLat,lo.LngLatBounds=Ae,lo.Point=s.Point,lo.MercatorCoordinate=s.MercatorCoordinate,lo.Evented=s.Evented,lo.AJAXError=s.AJAXError,lo.config=s.config,lo.CanvasSource=It,lo.GeoJSONSource=Kt,lo.ImageSource=Er,lo.RasterDEMTileSource=Mt,lo.RasterTileSource=zt,lo.VectorTileSource=Nt,lo.VideoSource=Jt,lo.setRTLTextPlugin=s.setRTLTextPlugin,lo.getRTLTextPluginStatus=s.getRTLTextPluginStatus,lo.prewarm=function(){Gi().acquire(Nr)},lo.clearPrewarmedResources=function(){const R=an;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(Nr),an=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},au.extend(lo,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),lo});var c=o;return c})})(f8);var lc=f8.exports;const sy=O2(lc);var Ou=(t,e,r)=>new Promise((i,o)=>{var u=f=>{try{s(r.next(f))}catch(y){o(y)}},c=f=>{try{s(r.throw(f))}catch(y){o(y)}},s=f=>f.done?i(f.value):Promise.resolve(f.value).then(u,c);s((r=r.apply(t,e)).next())}),Hc=Uint8Array,sd=Uint16Array,u9=Int32Array,d8=new Hc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p8=new Hc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c9=new Hc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m8=function(t,e){for(var r=new sd(31),i=0;i<31;++i)r[i]=e+=1<<t[i-1];for(var o=new u9(r[30]),i=1;i<30;++i)for(var u=r[i];u<r[i+1];++u)o[u]=u-r[i]<<5|i;return{b:r,r:o}},g8=m8(d8,2),y8=g8.b,f9=g8.r;y8[28]=258,f9[258]=28;var h9=m8(p8,0),d9=h9.b,ly=new sd(32768);for(ra=0;ra<32768;++ra)wf=(ra&43690)>>1|(ra&21845)<<1,wf=(wf&52428)>>2|(wf&13107)<<2,wf=(wf&61680)>>4|(wf&3855)<<4,ly[ra]=((wf&65280)>>8|(wf&255)<<8)>>1;var wf,ra,gp=function(t,e,r){for(var i=t.length,o=0,u=new sd(e);o<i;++o)t[o]&&++u[t[o]-1];var c=new sd(e);for(o=1;o<e;++o)c[o]=c[o-1]+u[o-1]<<1;var s;if(r){s=new sd(1<<e);var f=15-e;for(o=0;o<i;++o)if(t[o])for(var y=o<<4|t[o],b=e-t[o],A=c[t[o]-1]++<<b,I=A|(1<<b)-1;A<=I;++A)s[ly[A]>>f]=y}else for(s=new sd(i),o=0;o<i;++o)t[o]&&(s[o]=ly[c[t[o]-1]++]>>15-t[o]);return s},Qp=new Hc(288);for(ra=0;ra<144;++ra)Qp[ra]=8;var ra;for(ra=144;ra<256;++ra)Qp[ra]=9;var ra;for(ra=256;ra<280;++ra)Qp[ra]=7;var ra;for(ra=280;ra<288;++ra)Qp[ra]=8;var ra,_8=new Hc(32);for(ra=0;ra<32;++ra)_8[ra]=5;var ra,p9=gp(Qp,9,1),m9=gp(_8,5,1),Bm=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},S0=function(t,e,r){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&r},jm=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},g9=function(t){return(t+7)/8|0},y9=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var i=new Hc(r-e);return i.set(t.subarray(e,r)),i},_9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qc=function(t,e,r){var i=new Error(e||_9[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,qc),!r)throw i;return i},c_=function(t,e,r,i){var o=t.length,u=i?i.length:0;if(!o||e.f&&!e.l)return r||new Hc(0);var c=!r||e.i!=2,s=e.i;r||(r=new Hc(o*3));var f=function(yr){var Er=r.length;if(yr>Er){var Jt=new Hc(Math.max(Er*2,yr));Jt.set(r),r=Jt}},y=e.f||0,b=e.p||0,A=e.b||0,I=e.l,C=e.d,N=e.m,O=e.n,$=o*8;do{if(!I){y=S0(t,b,1);var G=S0(t,b+1,3);if(b+=3,G)if(G==1)I=p9,C=m9,N=9,O=5;else if(G==2){var _e=S0(t,b,31)+257,le=S0(t,b+10,15)+4,we=_e+S0(t,b+5,31)+1;b+=14;for(var ue=new Hc(we),ze=new Hc(19),Ue=0;Ue<le;++Ue)ze[c9[Ue]]=S0(t,b+Ue*3,7);b+=le*3;for(var Ce=Bm(ze),Me=(1<<Ce)-1,qe=gp(ze,Ce,1),Ue=0;Ue<we;){var it=qe[S0(t,b,Me)];b+=it&15;var Z=it>>4;if(Z<16)ue[Ue++]=Z;else{var xt=0,yt=0;for(Z==16?(yt=3+S0(t,b,3),b+=2,xt=ue[Ue-1]):Z==17?(yt=3+S0(t,b,7),b+=3):Z==18&&(yt=11+S0(t,b,127),b+=7);yt--;)ue[Ue++]=xt}}var $e=ue.subarray(0,_e),at=ue.subarray(_e);N=Bm($e),O=Bm(at),I=gp($e,N,1),C=gp(at,O,1)}else qc(1);else{var Z=g9(b)+4,ee=t[Z-4]|t[Z-3]<<8,te=Z+ee;if(te>o){s&&qc(0);break}c&&f(A+ee),r.set(t.subarray(Z,te),A),e.b=A+=ee,e.p=b=te*8,e.f=y;continue}if(b>$){s&&qc(0);break}}c&&f(A+131072);for(var mt=(1<<N)-1,Xe=(1<<O)-1,wt=b;;wt=b){var xt=I[jm(t,b)&mt],be=xt>>4;if(b+=xt&15,b>$){s&&qc(0);break}if(xt||qc(2),be<256)r[A++]=be;else if(be==256){wt=b,I=null;break}else{var Be=be-254;if(be>264){var Ue=be-257,Ae=d8[Ue];Be=S0(t,b,(1<<Ae)-1)+y8[Ue],b+=Ae}var ht=C[jm(t,b)&Xe],Nt=ht>>4;ht||qc(3),b+=ht&15;var at=d9[Nt];if(Nt>3){var Ae=p8[Nt];at+=jm(t,b)&(1<<Ae)-1,b+=Ae}if(b>$){s&&qc(0);break}c&&f(A+131072);var zt=A+Be;if(A<at){var Mt=u-at,Kt=Math.min(at,zt);for(Mt+A<0&&qc(3);A<Kt;++A)r[A]=i[Mt+A]}for(;A<zt;A+=4)r[A]=r[A-at],r[A+1]=r[A+1-at],r[A+2]=r[A+2-at],r[A+3]=r[A+3-at];A=zt}}e.l=I,e.p=wt,e.b=A,e.f=y,I&&(y=1,e.m=N,e.d=C,e.n=O)}while(!y);return A==r.length?r:y9(r,0,A)},v9=new Hc(0),b9=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&qc(6,"invalid gzip data");var e=t[3],r=10;e&4&&(r+=(t[10]|t[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!t[r++]);return r+(e&2)},w9=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},x9=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&qc(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&qc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function k9(t,e){return c_(t,{i:2},e&&e.out,e&&e.dictionary)}function A9(t,e){var r=b9(t);return r+8>t.length&&qc(6,"invalid gzip data"),c_(t.subarray(r,-8),{i:2},e&&e.out||new Hc(w9(t)),e&&e.dictionary)}function S9(t,e){return c_(t.subarray(x9(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function uy(t,e){return t[0]==31&&t[1]==139&&t[2]==8?A9(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?k9(t,e):S9(t,e)}var E9=typeof TextDecoder<"u"&&new TextDecoder,C9=0;try{E9.decode(v9,{stream:!0}),C9=1}catch{}var v8=(t,e)=>t*Math.pow(2,e),tp=(t,e)=>Math.floor(t/Math.pow(2,e)),h2=(t,e)=>v8(t.getUint16(e+1,!0),8)+t.getUint8(e),b8=(t,e)=>v8(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),I9=(t,e,r,i,o)=>{if(t!=i.getUint8(o))return t-i.getUint8(o);const u=h2(i,o+1);if(e!=u)return e-u;const c=h2(i,o+4);return r!=c?r-c:0},L9=(t,e,r,i)=>{const o=w8(t,e|128,r,i);return o?{z:e,x:r,y:i,offset:o[0],length:o[1],is_dir:!0}:null},Sb=(t,e,r,i)=>{const o=w8(t,e,r,i);return o?{z:e,x:r,y:i,offset:o[0],length:o[1],is_dir:!1}:null},w8=(t,e,r,i)=>{let o=0,u=t.byteLength/17-1;for(;o<=u;){const c=u+o>>1,s=I9(e,r,i,t,c*17);if(s>0)o=c+1;else if(s<0)u=c-1;else return[b8(t,c*17+7),t.getUint32(c*17+13,!0)]}return null},T9=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,x8=(t,e)=>{const r=t.getUint8(e*17);return{z:r&127,x:h2(t,e*17+1),y:h2(t,e*17+4),offset:b8(t,e*17+7),length:t.getUint32(e*17+13,!0),is_dir:r>>7===1}},Eb=t=>{const e=[],r=new DataView(t);for(let i=0;i<r.byteLength/17;i++)e.push(x8(r,i));return P9(e)},P9=t=>{t.sort(T9);const e=new ArrayBuffer(17*t.length),r=new Uint8Array(e);for(let i=0;i<t.length;i++){const o=t[i];let u=o.z;o.is_dir&&(u=u|128),r[i*17]=u,r[i*17+1]=o.x&255,r[i*17+2]=o.x>>8&255,r[i*17+3]=o.x>>16&255,r[i*17+4]=o.y&255,r[i*17+5]=o.y>>8&255,r[i*17+6]=o.y>>16&255,r[i*17+7]=o.offset&255,r[i*17+8]=tp(o.offset,8)&255,r[i*17+9]=tp(o.offset,16)&255,r[i*17+10]=tp(o.offset,24)&255,r[i*17+11]=tp(o.offset,32)&255,r[i*17+12]=tp(o.offset,48)&255,r[i*17+13]=o.length&255,r[i*17+14]=o.length>>8&255,r[i*17+15]=o.length>>16&255,r[i*17+16]=o.length>>24&255}return e},M9=(t,e)=>{if(t.byteLength<17)return null;const r=t.byteLength/17,i=x8(t,r-1);if(i.is_dir){const o=i.z,u=e.z-o,c=Math.trunc(e.x/(1<<u)),s=Math.trunc(e.y/(1<<u));return{z:o,x:c,y:s}}return null};function D9(t){return Ou(this,null,function*(){const e=yield t.getBytes(0,512e3),r=new DataView(e.data),i=r.getUint32(4,!0),o=r.getUint16(8,!0),u=new TextDecoder("utf-8"),c=JSON.parse(u.decode(new DataView(e.data,10,i)));let s=0;c.compression==="gzip"&&(s=2);let f=0;"minzoom"in c&&(f=+c.minzoom);let y=0;"maxzoom"in c&&(y=+c.maxzoom);let b=0,A=0,I=0,C=-180,N=-85,O=180,$=85;if(c.bounds){const Z=c.bounds.split(",");C=+Z[0],N=+Z[1],O=+Z[2],$=+Z[3]}if(c.center){const Z=c.center.split(",");b=+Z[0],A=+Z[1],I=+Z[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+i,rootDirectoryLength:o*17,jsonMetadataOffset:10,jsonMetadataLength:i,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:s,tileType:1,minZoom:f,maxZoom:y,minLon:C,minLat:N,maxLon:O,maxLat:$,centerZoom:I,centerLon:b,centerLat:A,etag:e.etag}})}function z9(t,e,r,i,o,u,c){return Ou(this,null,function*(){let s=yield r.getArrayBuffer(e,t.rootDirectoryOffset,t.rootDirectoryLength,t);t.specVersion===1&&(s=Eb(s));const f=Sb(new DataView(s),i,o,u);if(f){let A=(yield e.getBytes(f.offset,f.length,c)).data;const I=new DataView(A);return I.getUint8(0)==31&&I.getUint8(1)==139&&(A=uy(new Uint8Array(A))),{data:A}}const y=M9(new DataView(s),{z:i,x:o,y:u});if(y){const b=L9(new DataView(s),y.z,y.x,y.y);if(b){let A=yield r.getArrayBuffer(e,b.offset,b.length,t);t.specVersion===1&&(A=Eb(A));const I=Sb(new DataView(A),i,o,u);if(I){let N=(yield e.getBytes(I.offset,I.length,c)).data;const O=new DataView(N);return O.getUint8(0)==31&&O.getUint8(1)==139&&(N=uy(new Uint8Array(N))),{data:N}}}}})}var k8={getHeader:D9,getZxy:z9},N9=class{constructor(){this.tile=(t,e)=>{if(t.type=="json"){const r=t.url.substr(10);let i=this.tiles.get(r);return i||(i=new Cb(r),this.tiles.set(r,i)),i.getHeader().then(o=>{const u={tiles:[t.url+"/{z}/{x}/{y}"],minzoom:o.minZoom,maxzoom:o.maxZoom,bounds:[o.minLon,o.minLat,o.maxLon,o.maxLat]};e(null,u,null,null)}).catch(o=>{e(o,null,null,null)}),{cancel:()=>{}}}else{const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=t.url.match(r);if(!i)throw new Error("Invalid PMTiles protocol URL");const o=i[1];let u=this.tiles.get(o);u||(u=new Cb(o),this.tiles.set(o,u));const c=i[2],s=i[3],f=i[4],y=new AbortController,b=y.signal;let A=()=>{y.abort()};return u.getHeader().then(I=>{u.getZxy(+c,+s,+f,b).then(C=>{C?e(null,new Uint8Array(C.data),C.cacheControl,C.expires):I.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(C=>{C.name!=="AbortError"&&e(C,null,null,null)})}),{cancel:A}}},this.tiles=new Map}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};function Gh(t,e){return(e>>>0)*4294967296+(t>>>0)}function R9(t,e){const r=e.buf;let i,o;if(o=r[e.pos++],i=(o&112)>>4,o<128||(o=r[e.pos++],i|=(o&127)<<3,o<128)||(o=r[e.pos++],i|=(o&127)<<10,o<128)||(o=r[e.pos++],i|=(o&127)<<17,o<128)||(o=r[e.pos++],i|=(o&127)<<24,o<128)||(o=r[e.pos++],i|=(o&1)<<31,o<128))return Gh(t,i);throw new Error("Expected varint not more than 10 bytes")}function rp(t){const e=t.buf;let r,i;return i=e[t.pos++],r=i&127,i<128||(i=e[t.pos++],r|=(i&127)<<7,i<128)||(i=e[t.pos++],r|=(i&127)<<14,i<128)||(i=e[t.pos++],r|=(i&127)<<21,i<128)?r:(i=e[t.pos],r|=(i&15)<<28,R9(r,t))}function O9(t,e,r,i){if(i==0){r==1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const o=e[0];e[0]=e[1],e[1]=o}}var F9=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function B9(t,e,r){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||r>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");const i=F9[t],o=Math.pow(2,t);let u=0,c=0,s=0;const f=[e,r];let y=o/2;for(;y>0;)u=(f[0]&y)>0?1:0,c=(f[1]&y)>0?1:0,s+=y*y*(3*u^c),O9(y,f,u,c),y=y/2;return i+s}function A8(t,e){return Ou(this,null,function*(){if(e===1||e===0)return t;if(e===2){if(typeof globalThis.DecompressionStream>"u")return uy(new Uint8Array(t));{let i=new Response(t).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}}else throw Error("Compression method not supported")})}var j9=127;function U9(t,e){let r=0,i=t.length-1;for(;r<=i;){const o=i+r>>1,u=e-t[o].tileId;if(u>0)r=o+1;else if(u<0)i=o-1;else return t[o]}return i>=0&&(t[i].runLength===0||e-t[i].tileId<t[i].runLength)?t[i]:null}var q9=class{constructor(t,e=new Headers){this.url=t,this.customHeaders=e}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,e,r){return Ou(this,null,function*(){let i;r||(i=new AbortController,r=i.signal);const o=new Headers(this.customHeaders);o.set("Range","bytes="+t+"-"+(t+e-1));let u=yield fetch(this.url,{signal:r,headers:o});if(u.status===416&&t===0){const f=u.headers.get("Content-Range");if(!f||!f.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const y=+f.substr(8);u=yield fetch(this.url,{signal:r,headers:{Range:"bytes=0-"+(y-1)}})}if(u.status>=300)throw Error("Bad response code: "+u.status);const c=u.headers.get("Content-Length");if(u.status===200&&(!c||+c>e))throw i&&i.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield u.arrayBuffer(),etag:u.headers.get("ETag")||void 0,cacheControl:u.headers.get("Cache-Control")||void 0,expires:u.headers.get("Expires")||void 0}})}};function E0(t,e){const r=t.getUint32(e+4,!0),i=t.getUint32(e+0,!0);return r*Math.pow(2,32)+i}function V9(t,e){const r=new DataView(t),i=r.getUint8(7);if(i>3)throw Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:E0(r,8),rootDirectoryLength:E0(r,16),jsonMetadataOffset:E0(r,24),jsonMetadataLength:E0(r,32),leafDirectoryOffset:E0(r,40),leafDirectoryLength:E0(r,48),tileDataOffset:E0(r,56),tileDataLength:E0(r,64),numAddressedTiles:E0(r,72),numTileEntries:E0(r,80),numTileContents:E0(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:e}}function S8(t){const e={buf:new Uint8Array(t),pos:0},r=rp(e),i=[];let o=0;for(let u=0;u<r;u++){const c=rp(e);i.push({tileId:o+c,offset:0,length:0,runLength:1}),o+=c}for(let u=0;u<r;u++)i[u].runLength=rp(e);for(let u=0;u<r;u++)i[u].length=rp(e);for(let u=0;u<r;u++){const c=rp(e);c===0&&u>0?i[u].offset=i[u-1].offset+i[u-1].length:i[u].offset=c-1}return i}function H9(t){const e=new DataView(t);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var ld=class extends Error{};function $9(t,e,r,i){return Ou(this,null,function*(){const o=yield t.getBytes(0,16384);if(new DataView(o.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(H9(o.data)<3)return[yield k8.getHeader(t)];const c=o.data.slice(0,j9);let s=o.etag;i&&o.etag!=i&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+t.getKey()),s=void 0);const f=V9(c,s);if(r){const y=o.data.slice(f.rootDirectoryOffset,f.rootDirectoryOffset+f.rootDirectoryLength),b=t.getKey()+"|"+(f.etag||"")+"|"+f.rootDirectoryOffset+"|"+f.rootDirectoryLength,A=S8(yield e(y,f.internalCompression));return[f,[b,A.length,A]]}return[f,void 0]})}function G9(t,e,r,i,o){return Ou(this,null,function*(){const u=yield t.getBytes(r,i);if(o.etag&&o.etag!==u.etag)throw new ld(u.etag);const c=yield e(u.data,o.internalCompression),s=S8(c);if(s.length===0)throw new Error("Empty directory is invalid");return s})}var W9=class{constructor(t=100,e=!0,r=A8){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=r}getHeader(t,e){return Ou(this,null,function*(){const r=t.getKey();if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const i=new Promise((o,u)=>{$9(t,this.decompress,this.prefetch,e).then(c=>{c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:Promise.resolve(c[1][2])}),o(c[0]),this.prune()}).catch(c=>{u(c)})});return this.cache.set(r,{lastUsed:this.counter++,data:i}),i})}getDirectory(t,e,r,i){return Ou(this,null,function*(){const o=t.getKey()+"|"+(i.etag||"")+"|"+e+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const u=new Promise((c,s)=>{G9(t,this.decompress,e,r,i).then(f=>{c(f),this.prune()}).catch(f=>{s(f)})});return this.cache.set(o,{lastUsed:this.counter++,data:u}),u})}getArrayBuffer(t,e,r,i){return Ou(this,null,function*(){const o=t.getKey()+"|"+(i.etag||"")+"|"+e+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const u=new Promise((c,s)=>{t.getBytes(e,r).then(f=>{if(i.etag&&i.etag!==f.etag)throw new ld(f.etag);c(f.data),this.cache.has(o),this.prune()}).catch(f=>{s(f)})});return this.cache.set(o,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,e;this.cache.forEach((r,i)=>{r.lastUsed<t&&(t=r.lastUsed,e=i)}),e&&this.cache.delete(e)}}invalidate(t,e){return Ou(this,null,function*(){this.cache.delete(t.getKey()),yield this.getHeader(t,e)})}},Cb=class{constructor(t,e,r){typeof t=="string"?this.source=new q9(t):this.source=t,r?this.decompress=r:this.decompress=A8,e?this.cache=e:this.cache=new W9}getHeader(){return Ou(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,e,r,i){return Ou(this,null,function*(){const o=B9(t,e,r),u=yield this.cache.getHeader(this.source);if(u.specVersion<3)return k8.getZxy(u,this.source,this.cache,t,e,r,i);if(t<u.minZoom||t>u.maxZoom)return;let c=u.rootDirectoryOffset,s=u.rootDirectoryLength;for(let f=0;f<=3;f++){const y=yield this.cache.getDirectory(this.source,c,s,u),b=U9(y,o);if(b)if(b.runLength>0){const A=yield this.source.getBytes(u.tileDataOffset+b.offset,b.length,i);if(u.etag&&u.etag!==A.etag)throw new ld(A.etag);return{data:yield this.decompress(A.data,u.tileCompression),cacheControl:A.cacheControl,expires:A.expires}}else c=u.leafDirectoryOffset+b.offset,s=b.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(t,e,r,i){return Ou(this,null,function*(){try{return yield this.getZxyAttempt(t,e,r,i)}catch(o){if(o instanceof ld)return this.cache.invalidate(this.source,o.message),yield this.getZxyAttempt(t,e,r,i);throw o}})}getMetadataAttempt(){return Ou(this,null,function*(){const t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new ld(e.etag);const r=yield this.decompress(e.data,t.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return Ou(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof ld)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}})}};const Ru=zs(null),Mp=zs(null),Do={title:"WASAC Rural Water Network",url:"https://wasac.rw",logo:"https://raw.githubusercontent.com/wasac/logo/main/logo.png",basePath:"",attribution:"©<a href='http://wasac.rw'>WASAC,Ltd.</a>",styles:[{title:"OSM",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style.json"},{title:"OSM (Open Building)",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-buildings.json"},{title:"Bing Aerial",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-aerial.json"}],center:[30.0291,-2.0032],zoom:9,search:{url:"https://wasac.github.io/vt/wss.geojson",target:["wss_name","district","po_name"],format:t=>`${t.wss_id}-${t.wss_name}, ${t.po_name}, ${t.district}`,place_type:["wss"],placeholder:"Search WSS/PO/District",limit:10,zoom:13},popup:{target:["handpump","improvedspring","dugwell","solarpump","otherwaterpoint","household","publictap","waterkiosk","industrial","institution","other connection","chamber","reservoir","pumping-station","watersource","pipeline","wss","pg-building","uwss-customers","uwss-fire-hydrant","uwss-manhole","uwss_pipeline_annotation","uwss_pipeline","uwss-pumping-station","uwss-reservoir","uwss-valve","uwss-water-meter","uwss-water-treatment-plant","uwss-watersource","ecd_point","health_facility_point","school_point","office_point"]},legend:{targets:{village:"Village","village-annotation":"Village Label",cell:"Cell","cell-annotation":"Cell Label",sector:"Sector","sector-annotation":"Sector Label",district:"District","district-annotation":"District Label",wss:"WSS","wss-annotation":"WSS Label",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",watersource:"Water Source",reservoir:"Reservoir","pumping-station":"Pumping Station",chamber:"Chamber",household:"Household",publictap:"Public Tap",waterkiosk:"Water Kiosk",industrial:"Industrial",institution:"Institution","other connection":"Other connection",handpump:"Hand Pump",improvedspring:"Improved Spring",dugwell:"Dug well",solarpump:"Solar Pump",otherwaterpoint:"Other water point",parcels:"Parcels",parcels_annotation:"Parcels Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade","uwss-customers":"Customers (Urban)","uwss-fire-hydrant":"Fire hydrant (Urban)","uwss-manhole":"Manhole (Urban)",uwss_pipeline_annotation:"Pipeline Label (Urban)",uwss_pipeline:"Pipeline (Urban)","uwss-pumping-station":"Pump (Urban)","uwss-reservoir":"Reservoir (Urban)","uwss-valve":"Valve (Urban)","uwss-water-meter":"Water meter (Urban)","uwss-water-treatment-plant":"Water treatment plant (Urban)","uwss-watersource":"Water source (Urban)",ecd:"Early Children Development Center (building)",ecd_point:"Early Children Development Center",ecd_point_anotation:"Early Children Development Center (label)",health_facility:"Health facility (building)",health_facility_point:"Health facility",health_facility_point_anotation:"Health facility (label)",school:"School (building)",school_point:"School",school_point_anotation:"School (label)",office:"Office (building)",office_point:"Office",office_point_anotation:"Office (label)"}},elevation:{url:"https://wasac.github.io/rw-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",isoChroneOptions:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],isochrone:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff"}},routingOptions:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}},terrain:{source:"rwanda-dem",exaggeration:1},attributeTable:{rowsPerPage:50,minZoom:14},adminBoundary:{url:"https://wasac.github.io/rw-admin-boundary"}};var Z9=Object.defineProperty,X9=(t,e,r)=>e in t?Z9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,K0=(t,e,r)=>(X9(t,typeof e!="symbol"?e+"":e,r),r);const K1=class{constructor(e,r){K0(this,"controlContainer"),K0(this,"map"),K0(this,"mapAreaContainer"),K0(this,"areaButton"),K0(this,"areas"),K0(this,"select"),K0(this,"limit_no_areas"),this.areas=e||K1.DEFAULT_AREAS,this.limit_no_areas=r||K1.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){if(this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("maplibregl-area-list");for(const r of this.areas){const i=document.createElement("button");i.innerText=r.title,i.classList.add(r.title.replace(/[^a-z0-9-]/gi,"_")),i.value=JSON.stringify({center:r.latlng,zoom:r.zoom}),i.addEventListener("click",o=>{var u;const c=o.srcElement;(u=this.map)==null||u.jumpTo(JSON.parse(c.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const s=this.mapAreaContainer.getElementsByClassName("active");for(;s[0];)s[0].classList.remove("active");c.classList.add("active")}),r.title===K1.DEFAULT_AREA&&i.classList.add("active"),this.mapAreaContainer.appendChild(i)}this.areaButton.classList.add("maplibregl-ctrl-icon"),this.areaButton.classList.add("maplibregl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else{this.controlContainer.classList.add("maplibregl-ctrl-area-switch");const r=document.createElement("select");this.select=r,this.select.setAttribute("type","select"),this.select.addEventListener("change",function(i){i.target&&e.flyTo(JSON.parse(i.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(i){const o=document.createElement("option");o.setAttribute("type","option"),o.text=i.title,o.value=JSON.stringify({center:i.latlng,zoom:i.zoom}),r.appendChild(o)})}return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}};let J1=K1;K0(J1,"DEFAULT_AREA","Narok"),K0(J1,"DEFAULT_AREAS",[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}]),K0(J1,"DEFAULT_NO_AREAS",5);function Ib(t,e,r){const i=t.slice();return i[12]=e[r],i}function Lb(t,e,r){const i=t.slice();return i[15]=e[r],i}function Tb(t,e,r){const i=t.slice();return i[15]=e[r],i}function Pb(t){let e;function r(u,c){return u[3]?K9:Y9}let i=r(t),o=i(t);return{c(){e=Je("div"),o.c(),this.h()},l(u){e=Qe(u,"DIV",{class:!0});var c=vt(e);o.l(c),c.forEach(he),this.h()},h(){ge(e,"class","popup-select svelte-1655iok")},m(u,c){dt(u,e,c),o.m(e,null)},p(u,c){i===(i=r(u))&&o?o.p(u,c):(o.d(1),o=i(u),o&&(o.c(),o.m(e,null)))},d(u){u&&he(e),o.d()}}}function Y9(t){let e,r,i,o=dn(t[0]),u=[];for(let c=0;c<o.length;c+=1)u[c]=Mb(Lb(t,o,c));return{c(){e=Je("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=Qe(c,"SELECT",{class:!0});var s=vt(e);for(let f=0;f<u.length;f+=1)u[f].l(s);s.forEach(he),this.h()},h(){ge(e,"class","is-focused svelte-1655iok"),t[2]===void 0&&Ha(()=>t[8].call(e))},m(c,s){dt(c,e,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null);ka(e,t[2],!0),r||(i=Dr(e,"change",t[8]),r=!0)},p(c,s){if(s&1){o=dn(c[0]);let f;for(f=0;f<o.length;f+=1){const y=Lb(c,o,f);u[f]?u[f].p(y,s):(u[f]=Mb(y),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}s&5&&ka(e,c[2])},d(c){c&&he(e),na(u,c),r=!1,i()}}}function K9(t){let e,r,i,o=dn(t[0]),u=[];for(let c=0;c<o.length;c+=1)u[c]=Db(Tb(t,o,c));return{c(){e=Je("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=Qe(c,"SELECT",{class:!0});var s=vt(e);for(let f=0;f<u.length;f+=1)u[f].l(s);s.forEach(he),this.h()},h(){ge(e,"class","is-focused svelte-1655iok"),e.disabled=!0,t[2]===void 0&&Ha(()=>t[7].call(e))},m(c,s){dt(c,e,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null);ka(e,t[2],!0),r||(i=Dr(e,"change",t[7]),r=!0)},p(c,s){if(s&1){o=dn(c[0]);let f;for(f=0;f<o.length;f+=1){const y=Tb(c,o,f);u[f]?u[f].p(y,s):(u[f]=Db(y),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}s&5&&ka(e,c[2])},d(c){c&&he(e),na(u,c),r=!1,i()}}}function Mb(t){let e,r=`${t[15].sourceLayer} (${t[15].source})`,i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{class:!0});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[15],mo(e,e.__value),ge(e,"class","svelte-1655iok")},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&1&&r!==(r=`${u[15].sourceLayer} (${u[15].source})`)&&Dn(i,r),c&1&&o!==(o=u[15])&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function Db(t){let e,r=`${t[15].sourceLayer} (${t[15].source})`,i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{class:!0});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[15],mo(e,e.__value),ge(e,"class","svelte-1655iok")},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&1&&r!==(r=`${u[15].sourceLayer} (${u[15].source})`)&&Dn(i,r),c&1&&o!==(o=u[15])&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function zb(t){let e,r,i=dn(Object.keys(t[2].properties)),o=[];for(let u=0;u<i.length;u+=1)o[u]=Nb(Ib(t,i,u));return{c(){e=Je("div"),r=Je("table");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=Qe(u,"DIV",{class:!0});var c=vt(e);r=Qe(c,"TABLE",{class:!0});var s=vt(r);for(let f=0;f<o.length;f+=1)o[f].l(s);s.forEach(he),c.forEach(he),this.h()},h(){ge(r,"class","svelte-1655iok"),ge(e,"class","popup-table svelte-1655iok")},m(u,c){dt(u,e,c),Ke(e,r);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(r,null)},p(u,c){if(c&4){i=dn(Object.keys(u[2].properties));let s;for(s=0;s<i.length;s+=1){const f=Ib(u,i,s);o[s]?o[s].p(f,c):(o[s]=Nb(f),o[s].c(),o[s].m(r,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=i.length}},d(u){u&&he(e),na(o,u)}}}function Nb(t){let e,r,i=t[12]+"",o,u,c=t[2].properties[t[12]]+"",s;return{c(){e=Je("tr"),r=Je("th"),o=Fi(i),u=Je("td"),s=Fi(c),this.h()},l(f){e=Qe(f,"TR",{});var y=vt(e);r=Qe(y,"TH",{class:!0});var b=vt(r);o=Bi(b,i),b.forEach(he),u=Qe(y,"TD",{class:!0});var A=vt(u);s=Bi(A,c),A.forEach(he),y.forEach(he),this.h()},h(){ge(r,"class","svelte-1655iok"),ge(u,"class","svelte-1655iok")},m(f,y){dt(f,e,y),Ke(e,r),Ke(r,o),Ke(e,u),Ke(u,s)},p(f,y){y&4&&i!==(i=f[12]+"")&&Dn(o,i),y&4&&c!==(c=f[2].properties[f[12]]+"")&&Dn(s,c)},d(f){f&&he(e)}}}function J9(t){let e,r,i=t[0]&&t[0].length>0&&Pb(t),o=t[2]&&zb(t);return{c(){e=Je("div"),i&&i.c(),r=ir(),o&&o.c()},l(u){e=Qe(u,"DIV",{});var c=vt(e);i&&i.l(c),r=nr(c),o&&o.l(c),c.forEach(he)},m(u,c){dt(u,e,c),i&&i.m(e,null),Ke(e,r),o&&o.m(e,null),t[9](e)},p(u,[c]){u[0]&&u[0].length>0?i?i.p(u,c):(i=Pb(u),i.c(),i.m(e,r)):i&&(i.d(1),i=null),u[2]?o?o.p(u,c):(o=zb(u),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:mi,o:mi,d(u){u&&he(e),i&&i.d(),o&&o.d(),t[9](null)}}}function Q9(t,e,r){let i,{map:o}=e,{targetLayers:u=[]}=e,c,s,f=[],y;function b(){}b.prototype.onAdd=function(O){return this.map=O,this.controlContainer=document.createElement("div"),this.controlContainer.className="maplibregl-ctrl maplibregl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibregl-ctrl-identify maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},b.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),r(0,f=[]),r(2,y=void 0),c&&(c.remove(),c=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},b.prototype.onClick=function(O){if(!this.isActive){r(0,f=[]),r(2,y=void 0);return}let $=[];u.length>0?u.forEach(Z=>{this.map.getLayer(Z)&&$.push(Z)}):$=o.getStyle().layers.map(Z=>Z.id);const G=this.map.queryRenderedFeatures(O.point,{layers:$});r(0,f=G.filter(Z=>Object.keys(Z.properties).length>0)),r(2,y=f.length>0?f[0]:void 0),f.length>0?c=new lc.Popup().setLngLat(O.lngLat).setDOMContent(s).setMaxWidth("300px").addTo(o):c&&(c.remove(),c=void 0)},b.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let A=null;sh(async()=>{r(6,A=new b)});function I(){y=Vc(this),r(2,y),r(0,f)}function C(){y=Vc(this),r(2,y),r(0,f)}function N(O){Ut[O?"unshift":"push"](()=>{s=O,r(1,s)})}return t.$$set=O=>{"map"in O&&r(4,o=O.map),"targetLayers"in O&&r(5,u=O.targetLayers)},t.$$.update=()=>{t.$$.dirty&1&&r(3,i=f.length===1),t.$$.dirty&80&&o&&A!==null&&o.hasControl(A)===!1&&o.addControl(A,"top-right")},[f,s,y,i,o,u,A,I,C,N]}class eS extends di{constructor(e){super(),pi(this,e,Q9,J9,hi,{map:4,targetLayers:5})}}const P1=parseFloat;function cy(t,e=";"){let r;if(Array.isArray(t))r=t.filter(i=>i);else{r=[];for(const i in t)t[i]&&r.push(`${i}:${t[i]}`)}return r.join(e)}function tS(t,e,r,i){let o,u;const c="1em";let s,f,y,b="-.125em";const A="visible";return i&&(y="center",u="1.25em"),r&&(o=r),e&&(e=="lg"?(f="1.33333em",s=".75em",b="-.225em"):e=="xs"?f=".75em":e=="sm"?f=".875em":f=e.replace("x","em")),cy([cy({float:o,width:u,height:c,"line-height":s,"font-size":f,"text-align":y,"vertical-align":b,"transform-origin":"center",overflow:A}),t])}function rS(t,e,r,i,o,u=1,c="",s=""){let f=1,y=1;return o&&(o=="horizontal"?f=-1:o=="vertical"?y=-1:f=y=-1),cy([`translate(${P1(e)*u}${c},${P1(r)*u}${c})`,`scale(${f*P1(t)},${y*P1(t)})`,i&&`rotate(${i}${s})`]," ")}function Rb(t){let e,r,i,o,u,c,s,f;function y(I,C){return typeof I[10][4]=="string"?nS:iS}let b=y(t),A=b(t);return{c(){e=pd("svg"),r=pd("g"),i=pd("g"),A.c(),this.h()},l(I){e=md(I,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var C=vt(e);r=md(C,"g",{transform:!0,"transform-origin":!0});var N=vt(r);i=md(N,"g",{transform:!0});var O=vt(i);A.l(O),O.forEach(he),N.forEach(he),C.forEach(he),this.h()},h(){ge(i,"transform",t[12]),ge(r,"transform",o="translate("+t[10][0]/2+" "+t[10][1]/2+")"),ge(r,"transform-origin",u=t[10][0]/4+" 0"),ge(e,"id",c=t[1]||void 0),ge(e,"class",s="svelte-fa "+t[0]+" svelte-1cj2gr0"),ge(e,"style",t[11]),ge(e,"viewBox",f="0 0 "+t[10][0]+" "+t[10][1]),ge(e,"aria-hidden","true"),ge(e,"role","img"),ge(e,"xmlns","http://www.w3.org/2000/svg"),ui(e,"pulse",t[4]),ui(e,"spin",t[3])},m(I,C){dt(I,e,C),Ke(e,r),Ke(r,i),A.m(i,null)},p(I,C){b===(b=y(I))&&A?A.p(I,C):(A.d(1),A=b(I),A&&(A.c(),A.m(i,null))),C&4096&&ge(i,"transform",I[12]),C&1024&&o!==(o="translate("+I[10][0]/2+" "+I[10][1]/2+")")&&ge(r,"transform",o),C&1024&&u!==(u=I[10][0]/4+" 0")&&ge(r,"transform-origin",u),C&2&&c!==(c=I[1]||void 0)&&ge(e,"id",c),C&1&&s!==(s="svelte-fa "+I[0]+" svelte-1cj2gr0")&&ge(e,"class",s),C&2048&&ge(e,"style",I[11]),C&1024&&f!==(f="0 0 "+I[10][0]+" "+I[10][1])&&ge(e,"viewBox",f),C&17&&ui(e,"pulse",I[4]),C&9&&ui(e,"spin",I[3])},d(I){I&&he(e),A.d()}}}function iS(t){let e,r,i,o,u,c,s,f,y,b;return{c(){e=pd("path"),c=pd("path"),this.h()},l(A){e=md(A,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),vt(e).forEach(he),c=md(A,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),vt(c).forEach(he),this.h()},h(){ge(e,"d",r=t[10][4][0]),ge(e,"fill",i=t[6]||t[2]||"currentColor"),ge(e,"fill-opacity",o=t[9]!=!1?t[7]:t[8]),ge(e,"transform",u="translate("+t[10][0]/-2+" "+t[10][1]/-2+")"),ge(c,"d",s=t[10][4][1]),ge(c,"fill",f=t[5]||t[2]||"currentColor"),ge(c,"fill-opacity",y=t[9]!=!1?t[8]:t[7]),ge(c,"transform",b="translate("+t[10][0]/-2+" "+t[10][1]/-2+")")},m(A,I){dt(A,e,I),dt(A,c,I)},p(A,I){I&1024&&r!==(r=A[10][4][0])&&ge(e,"d",r),I&68&&i!==(i=A[6]||A[2]||"currentColor")&&ge(e,"fill",i),I&896&&o!==(o=A[9]!=!1?A[7]:A[8])&&ge(e,"fill-opacity",o),I&1024&&u!==(u="translate("+A[10][0]/-2+" "+A[10][1]/-2+")")&&ge(e,"transform",u),I&1024&&s!==(s=A[10][4][1])&&ge(c,"d",s),I&36&&f!==(f=A[5]||A[2]||"currentColor")&&ge(c,"fill",f),I&896&&y!==(y=A[9]!=!1?A[8]:A[7])&&ge(c,"fill-opacity",y),I&1024&&b!==(b="translate("+A[10][0]/-2+" "+A[10][1]/-2+")")&&ge(c,"transform",b)},d(A){A&&(he(e),he(c))}}}function nS(t){let e,r,i,o;return{c(){e=pd("path"),this.h()},l(u){e=md(u,"path",{d:!0,fill:!0,transform:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"d",r=t[10][4]),ge(e,"fill",i=t[2]||t[5]||"currentColor"),ge(e,"transform",o="translate("+t[10][0]/-2+" "+t[10][1]/-2+")")},m(u,c){dt(u,e,c)},p(u,c){c&1024&&r!==(r=u[10][4])&&ge(e,"d",r),c&36&&i!==(i=u[2]||u[5]||"currentColor")&&ge(e,"fill",i),c&1024&&o!==(o="translate("+u[10][0]/-2+" "+u[10][1]/-2+")")&&ge(e,"transform",o)},d(u){u&&he(e)}}}function oS(t){let e,r=t[10][4]&&Rb(t);return{c(){r&&r.c(),e=pn()},l(i){r&&r.l(i),e=pn()},m(i,o){r&&r.m(i,o),dt(i,e,o)},p(i,[o]){i[10][4]?r?r.p(i,o):(r=Rb(i),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:mi,o:mi,d(i){i&&he(e),r&&r.d(i)}}}function aS(t,e,r){let{class:i=""}=e,{id:o=""}=e,{style:u=""}=e,{icon:c}=e,{size:s=""}=e,{color:f=""}=e,{fw:y=!1}=e,{pull:b=""}=e,{scale:A=1}=e,{translateX:I=0}=e,{translateY:C=0}=e,{rotate:N=""}=e,{flip:O=!1}=e,{spin:$=!1}=e,{pulse:G=!1}=e,{primaryColor:Z=""}=e,{secondaryColor:ee=""}=e,{primaryOpacity:te=1}=e,{secondaryOpacity:_e=.4}=e,{swapOpacity:le=!1}=e,we,ue,ze;return t.$$set=Ue=>{"class"in Ue&&r(0,i=Ue.class),"id"in Ue&&r(1,o=Ue.id),"style"in Ue&&r(13,u=Ue.style),"icon"in Ue&&r(14,c=Ue.icon),"size"in Ue&&r(15,s=Ue.size),"color"in Ue&&r(2,f=Ue.color),"fw"in Ue&&r(16,y=Ue.fw),"pull"in Ue&&r(17,b=Ue.pull),"scale"in Ue&&r(18,A=Ue.scale),"translateX"in Ue&&r(19,I=Ue.translateX),"translateY"in Ue&&r(20,C=Ue.translateY),"rotate"in Ue&&r(21,N=Ue.rotate),"flip"in Ue&&r(22,O=Ue.flip),"spin"in Ue&&r(3,$=Ue.spin),"pulse"in Ue&&r(4,G=Ue.pulse),"primaryColor"in Ue&&r(5,Z=Ue.primaryColor),"secondaryColor"in Ue&&r(6,ee=Ue.secondaryColor),"primaryOpacity"in Ue&&r(7,te=Ue.primaryOpacity),"secondaryOpacity"in Ue&&r(8,_e=Ue.secondaryOpacity),"swapOpacity"in Ue&&r(9,le=Ue.swapOpacity)},t.$$.update=()=>{t.$$.dirty&16384&&r(10,we=c&&c.icon||[0,0,"",[],""]),t.$$.dirty&237568&&r(11,ue=tS(u,s,b,y)),t.$$.dirty&8126464&&r(12,ze=rS(A,I,C,N,O,512))},[i,o,f,$,G,Z,ee,te,_e,le,we,ue,ze,u,c,s,y,b,A,I,C,N,O]}class bo extends di{constructor(e){super(),pi(this,e,aS,oS,hi,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}var sS={prefix:"fas",iconName:"sort-down",icon:[320,512,["sort-desc"],"f0dd","M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"]},lS={prefix:"fas",iconName:"arrow-down-up-across-line",icon:[576,512,[],"e4af","M137.4 502.6c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V288H544c17.7 0 32-14.3 32-32s-14.3-32-32-32H448V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L384 109.3V224H192 128 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96V402.7L86.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96zM128 192h64V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V192zM448 320H384V448c0 17.7 14.3 32 32 32s32-14.3 32-32V320z"]},uS={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},cS={prefix:"fas",iconName:"share-nodes",icon:[448,512,["share-alt"],"f1e0","M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"]},fS={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},hS={prefix:"fas",iconName:"bicycle",icon:[640,512,[128690],"f206","M312 32c-13.3 0-24 10.7-24 24s10.7 24 24 24h25.7l34.6 64H222.9l-27.4-38C191 99.7 183.7 96 176 96H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h43.7l22.1 30.7-26.6 53.1c-10-2.5-20.5-3.8-31.2-3.8C57.3 224 0 281.3 0 352s57.3 128 128 128c65.3 0 119.1-48.9 127-112h49c8.5 0 16.3-4.5 20.7-11.8l84.8-143.5 21.7 40.1C402.4 276.3 384 312 384 352c0 70.7 57.3 128 128 128s128-57.3 128-128s-57.3-128-128-128c-13.5 0-26.5 2.1-38.7 6L375.4 48.8C369.8 38.4 359 32 347.2 32H312zM458.6 303.7l32.3 59.7c6.3 11.7 20.9 16 32.5 9.7s16-20.9 9.7-32.5l-32.3-59.7c3.6-.6 7.4-.9 11.2-.9c39.8 0 72 32.2 72 72s-32.2 72-72 72s-72-32.2-72-72c0-18.6 7-35.5 18.6-48.3zM133.2 368h65c-7.3 32.1-36 56-70.2 56c-39.8 0-72-32.2-72-72s32.2-72 72-72c1.7 0 3.4 .1 5.1 .2l-24.2 48.5c-9 18.1 4.1 39.4 24.3 39.4zm33.7-48l50.7-101.3 72.9 101.2-.1 .1H166.8zm90.6-128H365.9L317 274.8 257.4 192z"]},dS={prefix:"fas",iconName:"person-walking",icon:[320,512,[128694,"walking"],"f554","M160 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM126.5 199.3c-1 .4-1.9 .8-2.9 1.2l-8 3.5c-16.4 7.3-29 21.2-34.7 38.2l-2.6 7.8c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.5l2.6-7.8c11.4-34.1 36.6-61.9 69.4-76.5l8-3.5c20.8-9.2 43.3-14 66.1-14c44.6 0 84.8 26.8 101.9 67.9L281 232.7l21.4 10.7c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3L247 287.3c-10.3-5.2-18.4-13.8-22.8-24.5l-9.6-23-19.3 65.5 49.5 54c5.4 5.9 9.2 13 11.2 20.8l23 92.1c4.3 17.1-6.1 34.5-23.3 38.8s-34.5-6.1-38.8-23.3l-22-88.1-70.7-77.1c-14.8-16.1-20.3-38.6-14.7-59.7l16.9-63.5zM68.7 398l25-62.4c2.1 3 4.5 5.8 7 8.6l40.7 44.4-14.5 36.2c-2.4 6-6 11.5-10.6 16.1L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L68.7 398z"]},pS={prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},mS={prefix:"fas",iconName:"left-right",icon:[512,512,[8596,"arrows-alt-h"],"f337","M504.3 273.6c4.9-4.5 7.7-10.9 7.7-17.6s-2.8-13-7.7-17.6l-112-104c-7-6.5-17.2-8.2-25.9-4.4s-14.4 12.5-14.4 22l0 56-192 0 0-56c0-9.5-5.7-18.2-14.4-22s-18.9-2.1-25.9 4.4l-112 104C2.8 243 0 249.3 0 256s2.8 13 7.7 17.6l112 104c7 6.5 17.2 8.2 25.9 4.4s14.4-12.5 14.4-22l0-56 192 0 0 56c0 9.5 5.7 18.2 14.4 22s18.9 2.1 25.9-4.4l112-104z"]},gS={prefix:"fas",iconName:"up-down-left-right",icon:[512,512,["arrows-alt"],"f0b2","M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8h32v96H128V192c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V288h96v96H192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8H288V288h96v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6v32H288V128h32c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-64-64z"]},yS={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},_S={prefix:"fas",iconName:"route",icon:[512,512,[],"f4d7","M512 96c0 50.2-59.1 125.1-84.6 155c-3.8 4.4-9.4 6.1-14.5 5H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c53 0 96 43 96 96s-43 96-96 96H139.6c8.7-9.9 19.3-22.6 30-36.8c6.3-8.4 12.8-17.6 19-27.2H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320c-53 0-96-43-96-96s43-96 96-96h39.8c-21-31.5-39.8-67.7-39.8-96c0-53 43-96 96-96s96 43 96 96zM117.1 489.1c-3.8 4.3-7.2 8.1-10.1 11.3l-1.8 2-.2-.2c-6 4.6-14.6 4-20-1.8C59.8 473 0 402.5 0 352c0-53 43-96 96-96s96 43 96 96c0 30-21.1 67-43.5 97.9c-10.7 14.7-21.7 28-30.8 38.5l-.6 .7zM128 352a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM416 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},vS={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},bS={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32H64zm0 96c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},wS={prefix:"fas",iconName:"sort-up",icon:[320,512,["sort-asc"],"f0de","M182.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},f_={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},h_={prefix:"fas",iconName:"ruler",icon:[512,512,[128207],"f545","M177.9 494.1c-18.7 18.7-49.1 18.7-67.9 0L17.9 401.9c-18.7-18.7-18.7-49.1 0-67.9l50.7-50.7 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 50.7-50.7c18.7-18.7 49.1-18.7 67.9 0l92.1 92.1c18.7 18.7 18.7 49.1 0 67.9L177.9 494.1z"]},xS={prefix:"fas",iconName:"file-pdf",icon:[512,512,[],"f1c1","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V304H176c-35.3 0-64 28.7-64 64V512H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z"]},kS={prefix:"fas",iconName:"braille",icon:[640,512,[],"f2a1","M0 96a64 64 0 1 1 128 0A64 64 0 1 1 0 96zM224 272a16 16 0 1 0 0-32 16 16 0 1 0 0 32zm0-80a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM80 416a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zm240 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm-80 0a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM64 192a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM224 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM352 96a64 64 0 1 1 128 0A64 64 0 1 1 352 96zm240 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm-80 0a64 64 0 1 1 128 0A64 64 0 1 1 512 96zm64 176a16 16 0 1 0 0-32 16 16 0 1 0 0 32zm0-80a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm16 224a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm-80 0a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM416 272a16 16 0 1 0 0-32 16 16 0 1 0 0 32zm0-80a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm16 224a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm-80 0a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"]},AS={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},SS={prefix:"fas",iconName:"grip-vertical",icon:[320,512,[],"f58e","M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"]},E8={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},C8={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},I8={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},ES={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},CS={prefix:"fas",iconName:"car",icon:[512,512,[128664,"automobile"],"f1b9","M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2V400v48c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V400H96v48c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V400 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},IS={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"]},LS={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M272 0H396.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128H192v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"]},L8={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},TS={prefix:"fas",iconName:"arrow-down-up-lock",icon:[640,512,[],"e4b0","M150.6 502.6l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 402.7V288H416V272c0-17.2 3.9-33.5 10.8-48H352V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L288 109.3V224l-128 0H96l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32H96V402.7L54.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0zM160 192V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V192h64zM288 320V448c0 17.7 14.3 32 32 32s32-14.3 32-32V320H288zm240-80c17.7 0 32 14.3 32 32v48H496V272c0-17.7 14.3-32 32-32zm-80 32v48c-17.7 0-32 14.3-32 32V480c0 17.7 14.3 32 32 32H608c17.7 0 32-14.3 32-32V352c0-17.7-14.3-32-32-32V272c0-44.2-35.8-80-80-80s-80 35.8-80 80z"]},PS={prefix:"fas",iconName:"angle-up",icon:[448,512,[8963],"f106","M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"]},MS={prefix:"fas",iconName:"up-down",icon:[256,512,[8597,11021,"arrows-alt-v"],"f338","M145.6 7.7C141 2.8 134.7 0 128 0s-13 2.8-17.6 7.7l-104 112c-6.5 7-8.2 17.2-4.4 25.9S14.5 160 24 160H80V352H24c-9.5 0-18.2 5.7-22 14.4s-2.1 18.9 4.4 25.9l104 112c4.5 4.9 10.9 7.7 17.6 7.7s13-2.8 17.6-7.7l104-112c6.5-7 8.2-17.2 4.4-25.9s-12.5-14.4-22-14.4H176V160h56c9.5 0 18.2-5.7 22-14.4s2.1-18.9-4.4-25.9l-104-112z"]},DS={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]};function aa(t){"@babel/helpers - typeof";return aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(t)}var Bu=Uint8Array,ju=Uint16Array,Dp=Uint32Array,F2=new Bu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),B2=new Bu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fy=new Bu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T8=function(t,e){for(var r=new ju(31),i=0;i<31;++i)r[i]=e+=1<<t[i-1];for(var o=new Dp(r[30]),i=1;i<30;++i)for(var u=r[i];u<r[i+1];++u)o[u]=u-r[i]<<5|i;return[r,o]},P8=T8(F2,2),M8=P8[0],hy=P8[1];M8[28]=258,hy[258]=28;var D8=T8(B2,0),zS=D8[0],Ob=D8[1],dy=new ju(32768);for(var Pa=0;Pa<32768;++Pa){var $f=(Pa&43690)>>>1|(Pa&21845)<<1;$f=($f&52428)>>>2|($f&13107)<<2,$f=($f&61680)>>>4|($f&3855)<<4,dy[Pa]=(($f&65280)>>>8|($f&255)<<8)>>>1}var nf=function(t,e,r){for(var i=t.length,o=0,u=new ju(e);o<i;++o)++u[t[o]-1];var c=new ju(e);for(o=0;o<e;++o)c[o]=c[o-1]+u[o-1]<<1;var s;if(r){s=new ju(1<<e);var f=15-e;for(o=0;o<i;++o)if(t[o])for(var y=o<<4|t[o],b=e-t[o],A=c[t[o]-1]++<<b,I=A|(1<<b)-1;A<=I;++A)s[dy[A]>>>f]=y}else for(s=new ju(i),o=0;o<i;++o)s[o]=dy[c[t[o]-1]++]>>>15-t[o];return s},nh=new Bu(288);for(var Pa=0;Pa<144;++Pa)nh[Pa]=8;for(var Pa=144;Pa<256;++Pa)nh[Pa]=9;for(var Pa=256;Pa<280;++Pa)nh[Pa]=7;for(var Pa=280;Pa<288;++Pa)nh[Pa]=8;var zp=new Bu(32);for(var Pa=0;Pa<32;++Pa)zp[Pa]=5;var NS=nf(nh,9,0),RS=nf(nh,9,1),OS=nf(zp,5,0),FS=nf(zp,5,1),Um=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},C0=function(t,e,r){var i=e/8>>0;return(t[i]|t[i+1]<<8)>>>(e&7)&r},qm=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)},d_=function(t){return(t/8>>0)+(t&7&&1)},z8=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var i=new(t instanceof ju?ju:t instanceof Dp?Dp:Bu)(r-e);return i.set(t.subarray(e,r)),i},BS=function(t,e,r){var i=t.length,o=!e||r,u=!r||r.i;r||(r={}),e||(e=new Bu(i*3));var c=function(Nt){var zt=e.length;if(Nt>zt){var Mt=new Bu(Math.max(zt*2,Nt));Mt.set(e),e=Mt}},s=r.f||0,f=r.p||0,y=r.b||0,b=r.l,A=r.d,I=r.m,C=r.n,N=i*8;do{if(!b){r.f=s=C0(t,f,1);var O=C0(t,f+1,3);if(f+=3,O)if(O==1)b=RS,A=FS,I=9,C=5;else if(O==2){var ee=C0(t,f,31)+257,te=C0(t,f+10,15)+4,_e=ee+C0(t,f+5,31)+1;f+=14;for(var le=new Bu(_e),we=new Bu(19),ue=0;ue<te;++ue)we[fy[ue]]=C0(t,f+ue*3,7);f+=te*3;var ze=Um(we),Ue=(1<<ze)-1;if(!u&&f+_e*(ze+7)>N)break;for(var Ce=nf(we,ze,1),ue=0;ue<_e;){var Me=Ce[C0(t,f,Ue)];f+=Me&15;var $=Me>>>4;if($<16)le[ue++]=$;else{var qe=0,it=0;for($==16?(it=3+C0(t,f,3),f+=2,qe=le[ue-1]):$==17?(it=3+C0(t,f,7),f+=3):$==18&&(it=11+C0(t,f,127),f+=7);it--;)le[ue++]=qe}}var xt=le.subarray(0,ee),yt=le.subarray(ee);I=Um(xt),C=Um(yt),b=nf(xt,I,1),A=nf(yt,C,1)}else throw"invalid block type";else{var $=d_(f)+4,G=t[$-4]|t[$-3]<<8,Z=$+G;if(Z>i){if(u)throw"unexpected EOF";break}o&&c(y+G),e.set(t.subarray($,Z),y),r.b=y+=G,r.p=f=Z*8;continue}if(f>N)throw"unexpected EOF"}o&&c(y+131072);for(var $e=(1<<I)-1,at=(1<<C)-1,mt=I+C+18;u||f+mt<N;){var qe=b[qm(t,f)&$e],Xe=qe>>>4;if(f+=qe&15,f>N)throw"unexpected EOF";if(!qe)throw"invalid length/literal";if(Xe<256)e[y++]=Xe;else if(Xe==256){b=null;break}else{var wt=Xe-254;if(Xe>264){var ue=Xe-257,be=F2[ue];wt=C0(t,f,(1<<be)-1)+M8[ue],f+=be}var Be=A[qm(t,f)&at],Ae=Be>>>4;if(!Be)throw"invalid distance";f+=Be&15;var yt=zS[Ae];if(Ae>3){var be=B2[Ae];yt+=qm(t,f)&(1<<be)-1,f+=be}if(f>N)throw"unexpected EOF";o&&c(y+131072);for(var ht=y+wt;y<ht;y+=4)e[y]=e[y-yt],e[y+1]=e[y+1-yt],e[y+2]=e[y+2-yt],e[y+3]=e[y+3-yt];y=ht}}r.l=b,r.p=f,r.b=y,b&&(s=1,r.m=I,r.d=A,r.n=C)}while(!s);return y==e.length?e:z8(e,0,y)},xf=function(t,e,r){r<<=e&7;var i=e/8>>0;t[i]|=r,t[i+1]|=r>>>8},ip=function(t,e,r){r<<=e&7;var i=e/8>>0;t[i]|=r,t[i+1]|=r>>>8,t[i+2]|=r>>>16},Vm=function(t,e){for(var r=[],i=0;i<t.length;++i)t[i]&&r.push({s:i,f:t[i]});var o=r.length,u=r.slice();if(!o)return[new Bu(0),0];if(o==1){var c=new Bu(r[0].s+1);return c[r[0].s]=1,[c,1]}r.sort(function(_e,le){return _e.f-le.f}),r.push({s:-1,f:25001});var s=r[0],f=r[1],y=0,b=1,A=2;for(r[0]={s:-1,f:s.f+f.f,l:s,r:f};b!=o-1;)s=r[r[y].f<r[A].f?y++:A++],f=r[y!=b&&r[y].f<r[A].f?y++:A++],r[b++]={s:-1,f:s.f+f.f,l:s,r:f};for(var I=u[0].s,i=1;i<o;++i)u[i].s>I&&(I=u[i].s);var C=new ju(I+1),N=py(r[b-1],C,0);if(N>e){var i=0,O=0,$=N-e,G=1<<$;for(u.sort(function(le,we){return C[we.s]-C[le.s]||le.f-we.f});i<o;++i){var Z=u[i].s;if(C[Z]>e)O+=G-(1<<N-C[Z]),C[Z]=e;else break}for(O>>>=$;O>0;){var ee=u[i].s;C[ee]<e?O-=1<<e-C[ee]++-1:++i}for(;i>=0&&O;--i){var te=u[i].s;C[te]==e&&(--C[te],++O)}N=e}return[new Bu(C),N]},py=function(t,e,r){return t.s==-1?Math.max(py(t.l,e,r+1),py(t.r,e,r+1)):e[t.s]=r},Fb=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ju(++e),i=0,o=t[0],u=1,c=function(f){r[i++]=f},s=1;s<=e;++s)if(t[s]==o&&s!=e)++u;else{if(!o&&u>2){for(;u>138;u-=138)c(32754);u>2&&(c(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(c(o),--u;u>6;u-=6)c(8304);u>2&&(c(u-3<<5|8208),u=0)}for(;u--;)c(o);u=1,o=t[s]}return[r.subarray(0,i),e]},np=function(t,e){for(var r=0,i=0;i<e.length;++i)r+=t[i]*e[i];return r},Q1=function(t,e,r){var i=r.length,o=d_(e+2);t[o]=i&255,t[o+1]=i>>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var u=0;u<i;++u)t[o+u+4]=r[u];return(o+4+i)*8},Bb=function(t,e,r,i,o,u,c,s,f,y,b){xf(e,b++,r),++o[256];for(var A=Vm(o,15),I=A[0],C=A[1],N=Vm(u,15),O=N[0],$=N[1],G=Fb(I),Z=G[0],ee=G[1],te=Fb(O),_e=te[0],le=te[1],we=new ju(19),ue=0;ue<Z.length;++ue)we[Z[ue]&31]++;for(var ue=0;ue<_e.length;++ue)we[_e[ue]&31]++;for(var ze=Vm(we,7),Ue=ze[0],Ce=ze[1],Me=19;Me>4&&!Ue[fy[Me-1]];--Me);var qe=y+5<<3,it=np(o,nh)+np(u,zp)+c,xt=np(o,I)+np(u,O)+c+14+3*Me+np(we,Ue)+(2*we[16]+3*we[17]+7*we[18]);if(qe<=it&&qe<=xt)return Q1(e,b,t.subarray(f,f+y));var yt,$e,at,mt;if(xf(e,b,1+(xt<it)),b+=2,xt<it){yt=nf(I,C,0),$e=I,at=nf(O,$,0),mt=O;var Xe=nf(Ue,Ce,0);xf(e,b,ee-257),xf(e,b+5,le-1),xf(e,b+10,Me-4),b+=14;for(var ue=0;ue<Me;++ue)xf(e,b+3*ue,Ue[fy[ue]]);b+=3*Me;for(var wt=[Z,_e],be=0;be<2;++be)for(var Be=wt[be],ue=0;ue<Be.length;++ue){var Ae=Be[ue]&31;xf(e,b,Xe[Ae]),b+=Ue[Ae],Ae>15&&(xf(e,b,Be[ue]>>>5&127),b+=Be[ue]>>>12)}}else yt=NS,$e=nh,at=OS,mt=zp;for(var ue=0;ue<s;++ue)if(i[ue]>255){var Ae=i[ue]>>>18&31;ip(e,b,yt[Ae+257]),b+=$e[Ae+257],Ae>7&&(xf(e,b,i[ue]>>>23&31),b+=F2[Ae]);var ht=i[ue]&31;ip(e,b,at[ht]),b+=mt[ht],ht>3&&(ip(e,b,i[ue]>>>5&8191),b+=B2[ht])}else ip(e,b,yt[i[ue]]),b+=$e[i[ue]];return ip(e,b,yt[256]),b+$e[256]},jS=new Dp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),US=new Bu(0),qS=function(t,e,r,i,o,u){var c=t.length,s=new Bu(i+c+5*(1+Math.floor(c/7e3))+o),f=s.subarray(i,s.length-o),y=0;if(!e||c<8)for(var b=0;b<=c;b+=65535){var A=b+65535;A<c?y=Q1(f,y,t.subarray(b,A)):(f[b]=u,y=Q1(f,y,t.subarray(b,c)))}else{for(var I=jS[e-1],C=I>>>13,N=I&8191,O=(1<<r)-1,$=new ju(32768),G=new ju(O+1),Z=Math.ceil(r/3),ee=2*Z,te=function(Fr){return(t[Fr]^t[Fr+1]<<Z^t[Fr+2]<<ee)&O},_e=new Dp(25e3),le=new ju(288),we=new ju(32),ue=0,ze=0,b=0,Ue=0,Ce=0,Me=0;b<c;++b){var qe=te(b),it=b&32767,xt=G[qe];if($[it]=xt,G[qe]=it,Ce<=b){var yt=c-b;if((ue>7e3||Ue>24576)&&yt>423){y=Bb(t,f,0,_e,le,we,ze,Ue,Me,b-Me,y),Ue=ue=ze=0,Me=b;for(var $e=0;$e<286;++$e)le[$e]=0;for(var $e=0;$e<30;++$e)we[$e]=0}var at=2,mt=0,Xe=N,wt=it-xt&32767;if(yt>2&&qe==te(b-wt))for(var be=Math.min(C,yt)-1,Be=Math.min(32767,b),Ae=Math.min(258,yt);wt<=Be&&--Xe&&it!=xt;){if(t[b+at]==t[b+at-wt]){for(var ht=0;ht<Ae&&t[b+ht]==t[b+ht-wt];++ht);if(ht>at){if(at=ht,mt=wt,ht>be)break;for(var Nt=Math.min(wt,ht-2),zt=0,$e=0;$e<Nt;++$e){var Mt=b-wt+$e+32768&32767,Kt=$[Mt],yr=Mt-Kt+32768&32767;yr>zt&&(zt=yr,xt=Mt)}}}it=xt,xt=$[it],wt+=it-xt+32768&32767}if(mt){_e[Ue++]=268435456|hy[at]<<18|Ob[mt];var Er=hy[at]&31,Jt=Ob[mt]&31;ze+=F2[Er]+B2[Jt],++le[257+Er],++we[Jt],Ce=b+at,++ue}else _e[Ue++]=t[b],++le[t[b]]}}y=Bb(t,f,u,_e,le,we,ze,Ue,Me,b-Me,y),u||(y=Q1(f,y,US))}return z8(s,0,i+d_(y)+o)},VS=function(){var t=1,e=0;return{p:function(r){for(var i=t,o=e,u=r.length,c=0;c!=u;){for(var s=Math.min(c+5552,u);c<s;++c)i+=r[c],o+=i;i%=65521,o%=65521}t=i,e=o},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},HS=function(t,e,r,i,o){return qS(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,i,!o)},$S=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},GS=function(t,e){var r=e.level,i=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=i<<6|(i?32-2*i:1)},WS=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function my(t,e){e===void 0&&(e={});var r=VS();r.p(t);var i=HS(t,e,2,4);return GS(i,e),$S(i,i.length-4,r.d()),i}function ZS(t,e){return BS((WS(t),t.subarray(2,-4)),e)}var jn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Hm(){jn.console&&typeof jn.console.log=="function"&&jn.console.log.apply(jn.console,arguments)}var _a={log:Hm,warn:function(t){jn.console&&(typeof jn.console.warn=="function"?jn.console.warn.apply(jn.console,arguments):Hm.call(null,arguments))},error:function(t){jn.console&&(typeof jn.console.error=="function"?jn.console.error.apply(jn.console,arguments):Hm(t))}};function $m(t,e,r){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){yh(i.response,e,r)},i.onerror=function(){_a.error("could not download file")},i.send()}function jb(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function M1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var yp,gy,yh=jn.saveAs||((typeof window>"u"?"undefined":aa(window))!=="object"||window!==jn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var i=jn.URL||jn.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?jb(o.href)?$m(t,e,r):M1(o,o.target="_blank"):M1(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){M1(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(jb(t))$m(t,e,r);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){M1(i)})}else navigator.msSaveOrOpenBlob(function(o,u){return u===void 0?u={autoBom:!1}:aa(u)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob([String.fromCharCode(65279),o],{type:o.type}):o}(t,r),e)}:function(t,e,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return $m(t,e,r);var o=t.type==="application/octet-stream",u=/constructor/i.test(jn.HTMLElement)||jn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&u)&&(typeof FileReader>"u"?"undefined":aa(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var b=s.result;b=c?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=b:location=b,i=null},s.readAsDataURL(t)}else{var f=jn.URL||jn.webkitURL,y=f.createObjectURL(t);i?i.location=y:location.href=y,i=null,setTimeout(function(){f.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function N8(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],i=0;i<r.length;i++){var o=r[i].re,u=r[i].process,c=o.exec(t);c&&(e=u(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),f=this.g.toString(16),y=this.b.toString(16);return s.length==1&&(s="0"+s),f.length==1&&(f="0"+f),y.length==1&&(y="0"+y),"#"+s+f+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Gm(t,e){var r=t[0],i=t[1],o=t[2],u=t[3];r=hu(r,i,o,u,e[0],7,-680876936),u=hu(u,r,i,o,e[1],12,-389564586),o=hu(o,u,r,i,e[2],17,606105819),i=hu(i,o,u,r,e[3],22,-1044525330),r=hu(r,i,o,u,e[4],7,-176418897),u=hu(u,r,i,o,e[5],12,1200080426),o=hu(o,u,r,i,e[6],17,-1473231341),i=hu(i,o,u,r,e[7],22,-45705983),r=hu(r,i,o,u,e[8],7,1770035416),u=hu(u,r,i,o,e[9],12,-1958414417),o=hu(o,u,r,i,e[10],17,-42063),i=hu(i,o,u,r,e[11],22,-1990404162),r=hu(r,i,o,u,e[12],7,1804603682),u=hu(u,r,i,o,e[13],12,-40341101),o=hu(o,u,r,i,e[14],17,-1502002290),r=du(r,i=hu(i,o,u,r,e[15],22,1236535329),o,u,e[1],5,-165796510),u=du(u,r,i,o,e[6],9,-1069501632),o=du(o,u,r,i,e[11],14,643717713),i=du(i,o,u,r,e[0],20,-373897302),r=du(r,i,o,u,e[5],5,-701558691),u=du(u,r,i,o,e[10],9,38016083),o=du(o,u,r,i,e[15],14,-660478335),i=du(i,o,u,r,e[4],20,-405537848),r=du(r,i,o,u,e[9],5,568446438),u=du(u,r,i,o,e[14],9,-1019803690),o=du(o,u,r,i,e[3],14,-187363961),i=du(i,o,u,r,e[8],20,1163531501),r=du(r,i,o,u,e[13],5,-1444681467),u=du(u,r,i,o,e[2],9,-51403784),o=du(o,u,r,i,e[7],14,1735328473),r=pu(r,i=du(i,o,u,r,e[12],20,-1926607734),o,u,e[5],4,-378558),u=pu(u,r,i,o,e[8],11,-2022574463),o=pu(o,u,r,i,e[11],16,1839030562),i=pu(i,o,u,r,e[14],23,-35309556),r=pu(r,i,o,u,e[1],4,-1530992060),u=pu(u,r,i,o,e[4],11,1272893353),o=pu(o,u,r,i,e[7],16,-155497632),i=pu(i,o,u,r,e[10],23,-1094730640),r=pu(r,i,o,u,e[13],4,681279174),u=pu(u,r,i,o,e[0],11,-358537222),o=pu(o,u,r,i,e[3],16,-722521979),i=pu(i,o,u,r,e[6],23,76029189),r=pu(r,i,o,u,e[9],4,-640364487),u=pu(u,r,i,o,e[12],11,-421815835),o=pu(o,u,r,i,e[15],16,530742520),r=mu(r,i=pu(i,o,u,r,e[2],23,-995338651),o,u,e[0],6,-198630844),u=mu(u,r,i,o,e[7],10,1126891415),o=mu(o,u,r,i,e[14],15,-1416354905),i=mu(i,o,u,r,e[5],21,-57434055),r=mu(r,i,o,u,e[12],6,1700485571),u=mu(u,r,i,o,e[3],10,-1894986606),o=mu(o,u,r,i,e[10],15,-1051523),i=mu(i,o,u,r,e[1],21,-2054922799),r=mu(r,i,o,u,e[8],6,1873313359),u=mu(u,r,i,o,e[15],10,-30611744),o=mu(o,u,r,i,e[6],15,-1560198380),i=mu(i,o,u,r,e[13],21,1309151649),r=mu(r,i,o,u,e[4],6,-145523070),u=mu(u,r,i,o,e[11],10,-1120210379),o=mu(o,u,r,i,e[2],15,718787259),i=mu(i,o,u,r,e[9],21,-343485551),t[0]=Xf(r,t[0]),t[1]=Xf(i,t[1]),t[2]=Xf(o,t[2]),t[3]=Xf(u,t[3])}function j2(t,e,r,i,o,u){return e=Xf(Xf(e,t),Xf(i,u)),Xf(e<<o|e>>>32-o,r)}function hu(t,e,r,i,o,u,c){return j2(e&r|~e&i,t,e,o,u,c)}function du(t,e,r,i,o,u,c){return j2(e&i|r&~i,t,e,o,u,c)}function pu(t,e,r,i,o,u,c){return j2(e^r^i,t,e,o,u,c)}function mu(t,e,r,i,o,u,c){return j2(r^(e|~i),t,e,o,u,c)}function R8(t){var e,r=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Gm(i,XS(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Gm(i,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,Gm(i,o),i}function XS(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}yp=jn.atob.bind(jn),gy=jn.btoa.bind(jn);var Ub="0123456789abcdef".split("");function YS(t){for(var e="",r=0;r<4;r++)e+=Ub[t>>8*r+4&15]+Ub[t>>8*r&15];return e}function KS(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function yy(t){return R8(t).map(KS).join("")}var JS=function(t){for(var e=0;e<t.length;e++)t[e]=YS(t[e]);return t.join("")}(R8("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xf(t,e){if(JS){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _y(t,e){var r,i,o,u;if(t!==r){for(var c=(o=t,u=1+(256/t.length>>0),new Array(u+1).join(o)),s=[],f=0;f<256;f++)s[f]=f;var y=0;for(f=0;f<256;f++){var b=s[f];y=(y+b+c.charCodeAt(f))%256,s[f]=s[y],s[y]=b}r=t,i=s}else s=i;var A=e.length,I=0,C=0,N="";for(f=0;f<A;f++)C=(C+(b=s[I=(I+1)%256]))%256,s[I]=s[C],s[C]=b,c=s[(s[I]+s[C])%256],N+=String.fromCharCode(e.charCodeAt(f)^c);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qb={print:4,modify:8,copy:16,"annot-forms":32};function rd(t,e,r,i){this.v=1,this.r=2;var o=192;t.forEach(function(s){if(qb.perm!==void 0)throw new Error("Invalid permission: "+s);o+=qb[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var u=(e+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,c),this.P=-(1+(255^o)),this.encryptionKey=yy(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=_y(this.encryptionKey,this.padding)}function id(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,i=0;i<r;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[i]}return e}function Vb(t){if(aa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,i,o){if(o=o||!1,typeof r!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var u=Math.random().toString(35);return e[r][u]=[i,!!o],u},this.unsubscribe=function(r){for(var i in e)if(e[i][r])return delete e[i][r],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var u in e[r]){var c=e[r][u];try{c[0].apply(t,i)}catch(s){jn.console&&_a.error("jsPDF PubSub Error",s.message,s)}c[1]&&o.push(u)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function d2(t){if(!(this instanceof d2))return new d2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function O8(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function vh(t,e,r,i,o){if(!(this instanceof vh))return new vh(t,e,r,i,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,O8.call(this,i,o)}function ud(t,e,r,i,o){if(!(this instanceof ud))return new ud(t,e,r,i,o);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,O8.call(this,i,o)}function Bn(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],u=arguments[3],c=[],s=1,f=16,y="S",b=null;aa(t=t||{})==="object"&&(r=t.orientation,i=t.unit||i,o=t.format||o,u=t.compress||t.compressPdf||u,(b=t.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(f=t.floatPrecision),y=t.defaultPathOperation||"S"),c=t.filters||(u===!0?["FlateEncode"]:c),i=i||"mm",r=(""+(r||"P")).toLowerCase();var A=t.putOnlyUsedFonts||!1,I={},C={internal:{},__private__:{}};C.__private__.PubSub=Vb;var N="1.3",O=C.__private__.getPdfVersion=function(){return N};C.__private__.setPdfVersion=function(ne){N=ne};var $={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return $};var G=C.__private__.getPageFormat=function(ne){return $[ne]};o=o||"a4";var Z={COMPAT:"compat",ADVANCED:"advanced"},ee=Z.COMPAT;function te(){this.saveGraphicsState(),ct(new ft(Br,0,0,-Br,0,Vs()*Br).toString()+" cm"),this.setFontSize(this.getFontSize()/Br),y="n",ee=Z.ADVANCED}function _e(){this.restoreGraphicsState(),y="S",ee=Z.COMPAT}var le=C.__private__.combineFontStyleAndFontWeight=function(ne,Ve){if(ne=="bold"&&Ve=="normal"||ne=="bold"&&Ve==400||ne=="normal"&&Ve=="italic"||ne=="bold"&&Ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ve&&(ne=Ve==400||Ve==="normal"?ne==="italic"?"italic":"normal":Ve!=700&&Ve!=="bold"||ne!=="normal"?(Ve==700?"bold":Ve)+""+ne:"bold"),ne};C.advancedAPI=function(ne){var Ve=ee===Z.COMPAT;return Ve&&te.call(this),typeof ne!="function"||(ne(this),Ve&&_e.call(this)),this},C.compatAPI=function(ne){var Ve=ee===Z.ADVANCED;return Ve&&_e.call(this),typeof ne!="function"||(ne(this),Ve&&te.call(this)),this},C.isAdvancedAPI=function(){return ee===Z.ADVANCED};var we,ue=function(ne){if(ee!==Z.ADVANCED)throw new Error(ne+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ze=C.roundToPrecision=C.__private__.roundToPrecision=function(ne,Ve){var Rt=e||Ve;if(isNaN(ne)||isNaN(Rt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ne.toFixed(Rt).replace(/0+$/,"")};we=C.hpf=C.__private__.hpf=typeof f=="number"?function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.hpf");return ze(ne,f)}:f==="smart"?function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.hpf");return ze(ne,ne>-1&&ne<1?16:5)}:function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.hpf");return ze(ne,16)};var Ue=C.f2=C.__private__.f2=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.f2");return ze(ne,2)},Ce=C.__private__.f3=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.f3");return ze(ne,3)},Me=C.scale=C.__private__.scale=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.scale");return ee===Z.COMPAT?ne*Br:ee===Z.ADVANCED?ne:void 0},qe=function(ne){return ee===Z.COMPAT?Vs()-ne:ee===Z.ADVANCED?ne:void 0},it=function(ne){return Me(qe(ne))};C.__private__.setPrecision=C.setPrecision=function(ne){typeof parseInt(ne,10)=="number"&&(e=parseInt(ne,10))};var xt,yt="00000000000000000000000000000000",$e=C.__private__.getFileId=function(){return yt},at=C.__private__.setFileId=function(ne){return yt=ne!==void 0&&/^[a-fA-F0-9]{32}$/.test(ne)?ne.toUpperCase():yt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(F=new rd(b.userPermissions,b.userPassword,b.ownerPassword,yt)),yt};C.setFileId=function(ne){return at(ne),this},C.getFileId=function(){return $e()};var mt=C.__private__.convertDateToPDFDate=function(ne){var Ve=ne.getTimezoneOffset(),Rt=Ve<0?"+":"-",ar=Math.floor(Math.abs(Ve/60)),Ar=Math.abs(Ve%60),Hr=[Rt,Ae(ar),"'",Ae(Ar),"'"].join("");return["D:",ne.getFullYear(),Ae(ne.getMonth()+1),Ae(ne.getDate()),Ae(ne.getHours()),Ae(ne.getMinutes()),Ae(ne.getSeconds()),Hr].join("")},Xe=C.__private__.convertPDFDateToDate=function(ne){var Ve=parseInt(ne.substr(2,4),10),Rt=parseInt(ne.substr(6,2),10)-1,ar=parseInt(ne.substr(8,2),10),Ar=parseInt(ne.substr(10,2),10),Hr=parseInt(ne.substr(12,2),10),Wr=parseInt(ne.substr(14,2),10);return new Date(Ve,Rt,ar,Ar,Hr,Wr,0)},wt=C.__private__.setCreationDate=function(ne){var Ve;if(ne===void 0&&(ne=new Date),ne instanceof Date)Ve=mt(ne);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ne))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ve=ne}return xt=Ve},be=C.__private__.getCreationDate=function(ne){var Ve=xt;return ne==="jsDate"&&(Ve=Xe(xt)),Ve};C.setCreationDate=function(ne){return wt(ne),this},C.getCreationDate=function(ne){return be(ne)};var Be,Ae=C.__private__.padd2=function(ne){return("0"+parseInt(ne)).slice(-2)},ht=C.__private__.padd2Hex=function(ne){return("00"+(ne=ne.toString())).substr(ne.length)},Nt=0,zt=[],Mt=[],Kt=0,yr=[],Er=[],Jt=!1,It=Mt,Fr=function(){Nt=0,Kt=0,Mt=[],zt=[],yr=[],$i=pt(),Qi=pt()};C.__private__.setCustomOutputDestination=function(ne){Jt=!0,It=ne};var Ft=function(ne){Jt||(It=ne)};C.__private__.resetCustomOutputDestination=function(){Jt=!1,It=Mt};var ct=C.__private__.out=function(ne){return ne=ne.toString(),Kt+=ne.length+1,It.push(ne),It},mr=C.__private__.write=function(ne){return ct(arguments.length===1?ne.toString():Array.prototype.join.call(arguments," "))},Jr=C.__private__.getArrayBuffer=function(ne){for(var Ve=ne.length,Rt=new ArrayBuffer(Ve),ar=new Uint8Array(Rt);Ve--;)ar[Ve]=ne.charCodeAt(Ve);return Rt},dr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return dr};var zr=t.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(ne){return zr=ee===Z.ADVANCED?ne/Br:ne,this};var ri,Vr=C.__private__.getFontSize=C.getFontSize=function(){return ee===Z.COMPAT?zr:zr*Br},_i=t.R2L||!1;C.__private__.setR2L=C.setR2L=function(ne){return _i=ne,this},C.__private__.getR2L=C.getR2L=function(){return _i};var Hi,Nr=C.__private__.setZoomMode=function(ne){var Ve=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ne))ri=ne;else if(isNaN(ne)){if(Ve.indexOf(ne)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ne+'" is not recognized.');ri=ne}else ri=parseInt(ne,10)};C.__private__.getZoomMode=function(){return ri};var ji,Ui=C.__private__.setPageMode=function(ne){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ne)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ne+'" is not recognized.');Hi=ne};C.__private__.getPageMode=function(){return Hi};var an=C.__private__.setLayoutMode=function(ne){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ne)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ne+'" is not recognized.');ji=ne};C.__private__.getLayoutMode=function(){return ji},C.__private__.setDisplayMode=C.setDisplayMode=function(ne,Ve,Rt){return Nr(ne),an(Ve),Ui(Rt),this};var Gi={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(ne){if(Object.keys(Gi).indexOf(ne)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Gi[ne]},C.__private__.getDocumentProperties=function(){return Gi},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(ne){for(var Ve in Gi)Gi.hasOwnProperty(Ve)&&ne[Ve]&&(Gi[Ve]=ne[Ve]);return this},C.__private__.setDocumentProperty=function(ne,Ve){if(Object.keys(Gi).indexOf(ne)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Gi[ne]=Ve};var Or,Br,Ni,qi,kt,fr={},Qr={},Ei=[],ki={},Zn={},un={},Rn={},Xn=null,so=0,on=[],gt=new Vb(C),Ne=t.hotfixes||[],Fe={},lt={},Lt=[],ft=function ne(Ve,Rt,ar,Ar,Hr,Wr){if(!(this instanceof ne))return new ne(Ve,Rt,ar,Ar,Hr,Wr);isNaN(Ve)&&(Ve=1),isNaN(Rt)&&(Rt=0),isNaN(ar)&&(ar=0),isNaN(Ar)&&(Ar=1),isNaN(Hr)&&(Hr=0),isNaN(Wr)&&(Wr=0),this._matrix=[Ve,Rt,ar,Ar,Hr,Wr]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ne){this._matrix[0]=ne}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ne){this._matrix[1]=ne}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ne){this._matrix[2]=ne}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ne){this._matrix[3]=ne}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ne){this._matrix[4]=ne}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ne){this._matrix[5]=ne}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(ne){this._matrix[0]=ne}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(ne){this._matrix[1]=ne}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(ne){this._matrix[2]=ne}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(ne){this._matrix[3]=ne}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(ne){this._matrix[4]=ne}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(ne){this._matrix[5]=ne}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(ne){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(we).join(ne)},ft.prototype.multiply=function(ne){var Ve=ne.sx*this.sx+ne.shy*this.shx,Rt=ne.sx*this.shy+ne.shy*this.sy,ar=ne.shx*this.sx+ne.sy*this.shx,Ar=ne.shx*this.shy+ne.sy*this.sy,Hr=ne.tx*this.sx+ne.ty*this.shx+this.tx,Wr=ne.tx*this.shy+ne.ty*this.sy+this.ty;return new ft(Ve,Rt,ar,Ar,Hr,Wr)},ft.prototype.decompose=function(){var ne=this.sx,Ve=this.shy,Rt=this.shx,ar=this.sy,Ar=this.tx,Hr=this.ty,Wr=Math.sqrt(ne*ne+Ve*Ve),Di=(ne/=Wr)*Rt+(Ve/=Wr)*ar;Rt-=ne*Di,ar-=Ve*Di;var fi=Math.sqrt(Rt*Rt+ar*ar);return Di/=fi,ne*(ar/=fi)<Ve*(Rt/=fi)&&(ne=-ne,Ve=-Ve,Di=-Di,Wr=-Wr),{scale:new ft(Wr,0,0,fi,0,0),translate:new ft(1,0,0,1,Ar,Hr),rotate:new ft(ne,Ve,-Ve,ne,0,0),skew:new ft(1,0,Di,1,0,0)}},ft.prototype.toString=function(ne){return this.join(" ")},ft.prototype.inversed=function(){var ne=this.sx,Ve=this.shy,Rt=this.shx,ar=this.sy,Ar=this.tx,Hr=this.ty,Wr=1/(ne*ar-Ve*Rt),Di=ar*Wr,fi=-Ve*Wr,xn=-Rt*Wr,Wi=ne*Wr;return new ft(Di,fi,xn,Wi,-Di*Ar-xn*Hr,-fi*Ar-Wi*Hr)},ft.prototype.applyToPoint=function(ne){var Ve=ne.x*this.sx+ne.y*this.shx+this.tx,Rt=ne.x*this.shy+ne.y*this.sy+this.ty;return new Kl(Ve,Rt)},ft.prototype.applyToRectangle=function(ne){var Ve=this.applyToPoint(ne),Rt=this.applyToPoint(new Kl(ne.x+ne.w,ne.y+ne.h));return new qs(Ve.x,Ve.y,Rt.x-Ve.x,Rt.y-Ve.y)},ft.prototype.clone=function(){var ne=this.sx,Ve=this.shy,Rt=this.shx,ar=this.sy,Ar=this.tx,Hr=this.ty;return new ft(ne,Ve,Rt,ar,Ar,Hr)},C.Matrix=ft;var pe=C.matrixMult=function(ne,Ve){return Ve.multiply(ne)},Qt=new ft(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=Qt;var Vt=function(ne,Ve){if(!Zn[ne]){var Rt=(Ve instanceof vh?"Sh":"P")+(Object.keys(ki).length+1).toString(10);Ve.id=Rt,Zn[ne]=Rt,ki[Rt]=Ve,gt.publish("addPattern",Ve)}};C.ShadingPattern=vh,C.TilingPattern=ud,C.addShadingPattern=function(ne,Ve){return ue("addShadingPattern()"),Vt(ne,Ve),this},C.beginTilingPattern=function(ne){ue("beginTilingPattern()"),bi(ne.boundingBox[0],ne.boundingBox[1],ne.boundingBox[2]-ne.boundingBox[0],ne.boundingBox[3]-ne.boundingBox[1],ne.matrix)},C.endTilingPattern=function(ne,Ve){ue("endTilingPattern()"),Ve.stream=Er[Be].join(`
`),Vt(ne,Ve),gt.publish("endTilingPattern",Ve),Lt.pop().restore()};var lr=C.__private__.newObject=function(){var ne=pt();return jr(ne,!0),ne},pt=C.__private__.newObjectDeferred=function(){return Nt++,zt[Nt]=function(){return Kt},Nt},jr=function(ne,Ve){return Ve=typeof Ve=="boolean"&&Ve,zt[ne]=Kt,Ve&&ct(ne+" 0 obj"),ne},$r=C.__private__.newAdditionalObject=function(){var ne={objId:pt(),content:""};return yr.push(ne),ne},$i=pt(),Qi=pt(),Ci=C.__private__.decodeColorString=function(ne){var Ve=ne.split(" ");if(Ve.length!==2||Ve[1]!=="g"&&Ve[1]!=="G")Ve.length===5&&(Ve[4]==="k"||Ve[4]==="K")&&(Ve=[(1-Ve[0])*(1-Ve[3]),(1-Ve[1])*(1-Ve[3]),(1-Ve[2])*(1-Ve[3]),"r"]);else{var Rt=parseFloat(Ve[0]);Ve=[Rt,Rt,Rt,"r"]}for(var ar="#",Ar=0;Ar<3;Ar++)ar+=("0"+Math.floor(255*parseFloat(Ve[Ar])).toString(16)).slice(-2);return ar},Et=C.__private__.encodeColorString=function(ne){var Ve;typeof ne=="string"&&(ne={ch1:ne});var Rt=ne.ch1,ar=ne.ch2,Ar=ne.ch3,Hr=ne.ch4,Wr=ne.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Rt=="string"&&Rt.charAt(0)!=="#"){var Di=new N8(Rt);if(Di.ok)Rt=Di.toHex();else if(!/^\d*\.?\d*$/.test(Rt))throw new Error('Invalid color "'+Rt+'" passed to jsPDF.encodeColorString.')}if(typeof Rt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Rt)&&(Rt="#"+Rt[1]+Rt[1]+Rt[2]+Rt[2]+Rt[3]+Rt[3]),typeof Rt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Rt)){var fi=parseInt(Rt.substr(1),16);Rt=fi>>16&255,ar=fi>>8&255,Ar=255&fi}if(ar===void 0||Hr===void 0&&Rt===ar&&ar===Ar)if(typeof Rt=="string")Ve=Rt+" "+Wr[0];else switch(ne.precision){case 2:Ve=Ue(Rt/255)+" "+Wr[0];break;case 3:default:Ve=Ce(Rt/255)+" "+Wr[0]}else if(Hr===void 0||aa(Hr)==="object"){if(Hr&&!isNaN(Hr.a)&&Hr.a===0)return Ve=["1.","1.","1.",Wr[1]].join(" ");if(typeof Rt=="string")Ve=[Rt,ar,Ar,Wr[1]].join(" ");else switch(ne.precision){case 2:Ve=[Ue(Rt/255),Ue(ar/255),Ue(Ar/255),Wr[1]].join(" ");break;default:case 3:Ve=[Ce(Rt/255),Ce(ar/255),Ce(Ar/255),Wr[1]].join(" ")}}else if(typeof Rt=="string")Ve=[Rt,ar,Ar,Hr,Wr[2]].join(" ");else switch(ne.precision){case 2:Ve=[Ue(Rt),Ue(ar),Ue(Ar),Ue(Hr),Wr[2]].join(" ");break;case 3:default:Ve=[Ce(Rt),Ce(ar),Ce(Ar),Ce(Hr),Wr[2]].join(" ")}return Ve},en=C.__private__.getFilters=function(){return c},Sn=C.__private__.putStream=function(ne){var Ve=(ne=ne||{}).data||"",Rt=ne.filters||en(),ar=ne.alreadyAppliedFilters||[],Ar=ne.addLength1||!1,Hr=Ve.length,Wr=ne.objectId,Di=function(za){return za};if(b!==null&&Wr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(Di=F.encryptor(Wr,0));var fi={};Rt===!0&&(Rt=["FlateEncode"]);var xn=ne.additionalKeyValues||[],Wi=(fi=Bn.API.processDataByFilters!==void 0?Bn.API.processDataByFilters(Ve,Rt):{data:Ve,reverseChain:[]}).reverseChain+(Array.isArray(ar)?ar.join(" "):ar.toString());if(fi.data.length!==0&&(xn.push({key:"Length",value:fi.data.length}),Ar===!0&&xn.push({key:"Length1",value:Hr})),Wi.length!=0)if(Wi.split("/").length-1==1)xn.push({key:"Filter",value:Wi});else{xn.push({key:"Filter",value:"["+Wi+"]"});for(var nn=0;nn<xn.length;nn+=1)if(xn[nn].key==="DecodeParms"){for(var xo=[],Oo=0;Oo<fi.reverseChain.split("/").length-1;Oo+=1)xo.push("null");xo.push(xn[nn].value),xn[nn].value="["+xo.join(" ")+"]"}}ct("<<");for(var Wo=0;Wo<xn.length;Wo++)ct("/"+xn[Wo].key+" "+xn[Wo].value);ct(">>"),fi.data.length!==0&&(ct("stream"),ct(Di(fi.data)),ct("endstream"))},Vn=C.__private__.putPage=function(ne){var Ve=ne.number,Rt=ne.data,ar=ne.objId,Ar=ne.contentsObjId;jr(ar,!0),ct("<</Type /Page"),ct("/Parent "+ne.rootDictionaryObjId+" 0 R"),ct("/Resources "+ne.resourceDictionaryObjId+" 0 R"),ct("/MediaBox ["+parseFloat(we(ne.mediaBox.bottomLeftX))+" "+parseFloat(we(ne.mediaBox.bottomLeftY))+" "+we(ne.mediaBox.topRightX)+" "+we(ne.mediaBox.topRightY)+"]"),ne.cropBox!==null&&ct("/CropBox ["+we(ne.cropBox.bottomLeftX)+" "+we(ne.cropBox.bottomLeftY)+" "+we(ne.cropBox.topRightX)+" "+we(ne.cropBox.topRightY)+"]"),ne.bleedBox!==null&&ct("/BleedBox ["+we(ne.bleedBox.bottomLeftX)+" "+we(ne.bleedBox.bottomLeftY)+" "+we(ne.bleedBox.topRightX)+" "+we(ne.bleedBox.topRightY)+"]"),ne.trimBox!==null&&ct("/TrimBox ["+we(ne.trimBox.bottomLeftX)+" "+we(ne.trimBox.bottomLeftY)+" "+we(ne.trimBox.topRightX)+" "+we(ne.trimBox.topRightY)+"]"),ne.artBox!==null&&ct("/ArtBox ["+we(ne.artBox.bottomLeftX)+" "+we(ne.artBox.bottomLeftY)+" "+we(ne.artBox.topRightX)+" "+we(ne.artBox.topRightY)+"]"),typeof ne.userUnit=="number"&&ne.userUnit!==1&&ct("/UserUnit "+ne.userUnit),gt.publish("putPage",{objId:ar,pageContext:on[Ve],pageNumber:Ve,page:Rt}),ct("/Contents "+Ar+" 0 R"),ct(">>"),ct("endobj");var Hr=Rt.join(`
`);return ee===Z.ADVANCED&&(Hr+=`
Q`),jr(Ar,!0),Sn({data:Hr,filters:en(),objectId:Ar}),ct("endobj"),ar},En=C.__private__.putPages=function(){var ne,Ve,Rt=[];for(ne=1;ne<=so;ne++)on[ne].objId=pt(),on[ne].contentsObjId=pt();for(ne=1;ne<=so;ne++)Rt.push(Vn({number:ne,data:Er[ne],objId:on[ne].objId,contentsObjId:on[ne].contentsObjId,mediaBox:on[ne].mediaBox,cropBox:on[ne].cropBox,bleedBox:on[ne].bleedBox,trimBox:on[ne].trimBox,artBox:on[ne].artBox,userUnit:on[ne].userUnit,rootDictionaryObjId:$i,resourceDictionaryObjId:Qi}));jr($i,!0),ct("<</Type /Pages");var ar="/Kids [";for(Ve=0;Ve<so;Ve++)ar+=Rt[Ve]+" 0 R ";ct(ar+"]"),ct("/Count "+so),ct(">>"),ct("endobj"),gt.publish("postPutPages")},On=function(ne){gt.publish("putFont",{font:ne,out:ct,newObject:lr,putStream:Sn}),ne.isAlreadyPutted!==!0&&(ne.objectNumber=lr(),ct("<<"),ct("/Type /Font"),ct("/BaseFont /"+id(ne.postScriptName)),ct("/Subtype /Type1"),typeof ne.encoding=="string"&&ct("/Encoding /"+ne.encoding),ct("/FirstChar 32"),ct("/LastChar 255"),ct(">>"),ct("endobj"))},sa=function(){for(var ne in fr)fr.hasOwnProperty(ne)&&(A===!1||A===!0&&I.hasOwnProperty(ne))&&On(fr[ne])},tn=function(ne){ne.objectNumber=lr();var Ve=[];Ve.push({key:"Type",value:"/XObject"}),Ve.push({key:"Subtype",value:"/Form"}),Ve.push({key:"BBox",value:"["+[we(ne.x),we(ne.y),we(ne.x+ne.width),we(ne.y+ne.height)].join(" ")+"]"}),Ve.push({key:"Matrix",value:"["+ne.matrix.toString()+"]"});var Rt=ne.pages[1].join(`
`);Sn({data:Rt,additionalKeyValues:Ve,objectId:ne.objectNumber}),ct("endobj")},Bo=function(){for(var ne in Fe)Fe.hasOwnProperty(ne)&&tn(Fe[ne])},fn=function(ne,Ve){var Rt,ar=[],Ar=1/(Ve-1);for(Rt=0;Rt<1;Rt+=Ar)ar.push(Rt);if(ar.push(1),ne[0].offset!=0){var Hr={offset:0,color:ne[0].color};ne.unshift(Hr)}if(ne[ne.length-1].offset!=1){var Wr={offset:1,color:ne[ne.length-1].color};ne.push(Wr)}for(var Di="",fi=0,xn=0;xn<ar.length;xn++){for(Rt=ar[xn];Rt>ne[fi+1].offset;)fi++;var Wi=ne[fi].offset,nn=(Rt-Wi)/(ne[fi+1].offset-Wi),xo=ne[fi].color,Oo=ne[fi+1].color;Di+=ht(Math.round((1-nn)*xo[0]+nn*Oo[0]).toString(16))+ht(Math.round((1-nn)*xo[1]+nn*Oo[1]).toString(16))+ht(Math.round((1-nn)*xo[2]+nn*Oo[2]).toString(16))}return Di.trim()},Ko=function(ne,Ve){Ve||(Ve=21);var Rt=lr(),ar=fn(ne.colors,Ve),Ar=[];Ar.push({key:"FunctionType",value:"0"}),Ar.push({key:"Domain",value:"[0.0 1.0]"}),Ar.push({key:"Size",value:"["+Ve+"]"}),Ar.push({key:"BitsPerSample",value:"8"}),Ar.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ar.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Sn({data:ar,additionalKeyValues:Ar,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Rt}),ct("endobj"),ne.objectNumber=lr(),ct("<< /ShadingType "+ne.type),ct("/ColorSpace /DeviceRGB");var Hr="/Coords ["+we(parseFloat(ne.coords[0]))+" "+we(parseFloat(ne.coords[1]))+" ";ne.type===2?Hr+=we(parseFloat(ne.coords[2]))+" "+we(parseFloat(ne.coords[3])):Hr+=we(parseFloat(ne.coords[2]))+" "+we(parseFloat(ne.coords[3]))+" "+we(parseFloat(ne.coords[4]))+" "+we(parseFloat(ne.coords[5])),ct(Hr+="]"),ne.matrix&&ct("/Matrix ["+ne.matrix.toString()+"]"),ct("/Function "+Rt+" 0 R"),ct("/Extend [true true]"),ct(">>"),ct("endobj")},Xa=function(ne,Ve){var Rt=pt(),ar=lr();Ve.push({resourcesOid:Rt,objectOid:ar}),ne.objectNumber=ar;var Ar=[];Ar.push({key:"Type",value:"/Pattern"}),Ar.push({key:"PatternType",value:"1"}),Ar.push({key:"PaintType",value:"1"}),Ar.push({key:"TilingType",value:"1"}),Ar.push({key:"BBox",value:"["+ne.boundingBox.map(we).join(" ")+"]"}),Ar.push({key:"XStep",value:we(ne.xStep)}),Ar.push({key:"YStep",value:we(ne.yStep)}),Ar.push({key:"Resources",value:Rt+" 0 R"}),ne.matrix&&Ar.push({key:"Matrix",value:"["+ne.matrix.toString()+"]"}),Sn({data:ne.stream,additionalKeyValues:Ar,objectId:ne.objectNumber}),ct("endobj")},qu=function(ne){var Ve;for(Ve in ki)ki.hasOwnProperty(Ve)&&(ki[Ve]instanceof vh?Ko(ki[Ve]):ki[Ve]instanceof ud&&Xa(ki[Ve],ne))},pa=function(ne){for(var Ve in ne.objectNumber=lr(),ct("<<"),ne)switch(Ve){case"opacity":ct("/ca "+Ue(ne[Ve]));break;case"stroke-opacity":ct("/CA "+Ue(ne[Ve]))}ct(">>"),ct("endobj")},ts=function(){var ne;for(ne in un)un.hasOwnProperty(ne)&&pa(un[ne])},Vu=function(){for(var ne in ct("/XObject <<"),Fe)Fe.hasOwnProperty(ne)&&Fe[ne].objectNumber>=0&&ct("/"+ne+" "+Fe[ne].objectNumber+" 0 R");gt.publish("putXobjectDict"),ct(">>")},Gl=function(){F.oid=lr(),ct("<<"),ct("/Filter /Standard"),ct("/V "+F.v),ct("/R "+F.r),ct("/U <"+F.toHexString(F.U)+">"),ct("/O <"+F.toHexString(F.O)+">"),ct("/P "+F.P),ct(">>"),ct("endobj")},Ao=function(){for(var ne in ct("/Font <<"),fr)fr.hasOwnProperty(ne)&&(A===!1||A===!0&&I.hasOwnProperty(ne))&&ct("/"+ne+" "+fr[ne].objectNumber+" 0 R");ct(">>")},Ya=function(){if(Object.keys(ki).length>0){for(var ne in ct("/Shading <<"),ki)ki.hasOwnProperty(ne)&&ki[ne]instanceof vh&&ki[ne].objectNumber>=0&&ct("/"+ne+" "+ki[ne].objectNumber+" 0 R");gt.publish("putShadingPatternDict"),ct(">>")}},Aa=function(ne){if(Object.keys(ki).length>0){for(var Ve in ct("/Pattern <<"),ki)ki.hasOwnProperty(Ve)&&ki[Ve]instanceof C.TilingPattern&&ki[Ve].objectNumber>=0&&ki[Ve].objectNumber<ne&&ct("/"+Ve+" "+ki[Ve].objectNumber+" 0 R");gt.publish("putTilingPatternDict"),ct(">>")}},Jo=function(){if(Object.keys(un).length>0){var ne;for(ne in ct("/ExtGState <<"),un)un.hasOwnProperty(ne)&&un[ne].objectNumber>=0&&ct("/"+ne+" "+un[ne].objectNumber+" 0 R");gt.publish("putGStateDict"),ct(">>")}},Go=function(ne){jr(ne.resourcesOid,!0),ct("<<"),ct("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ao(),Ya(),Aa(ne.objectOid),Jo(),Vu(),ct(">>"),ct("endobj")},la=function(){var ne=[];sa(),ts(),Bo(),qu(ne),gt.publish("putResources"),ne.forEach(Go),Go({resourcesOid:Qi,objectOid:Number.MAX_SAFE_INTEGER}),gt.publish("postPutResources")},Js=function(){gt.publish("putAdditionalObjects");for(var ne=0;ne<yr.length;ne++){var Ve=yr[ne];jr(Ve.objId,!0),ct(Ve.content),ct("endobj")}gt.publish("postPutAdditionalObjects")},Ma=function(ne){Qr[ne.fontName]=Qr[ne.fontName]||{},Qr[ne.fontName][ne.fontStyle]=ne.id},Da=function(ne,Ve,Rt,ar,Ar){var Hr={id:"F"+(Object.keys(fr).length+1).toString(10),postScriptName:ne,fontName:Ve,fontStyle:Rt,encoding:ar,isStandardFont:Ar||!1,metadata:{}};return gt.publish("addFont",{font:Hr,instance:this}),fr[Hr.id]=Hr,Ma(Hr),Hr.id},Kn=function(ne){for(var Ve=0,Rt=dr.length;Ve<Rt;Ve++){var ar=Da.call(this,ne[Ve][0],ne[Ve][1],ne[Ve][2],dr[Ve][3],!0);A===!1&&(I[ar]=!0);var Ar=ne[Ve][0].split("-");Ma({id:ar,fontName:Ar[0],fontStyle:Ar[1]||""})}gt.publish("addFonts",{fonts:fr,dictionary:Qr})},rs=function(ne){return ne.foo=function(){try{return ne.apply(this,arguments)}catch(ar){var Ve=ar.stack||"";~Ve.indexOf(" at ")&&(Ve=Ve.split(" at ")[1]);var Rt="Error in function "+Ve.split(`
`)[0].split("<")[0]+": "+ar.message;if(!jn.console)throw new Error(Rt);jn.console.error(Rt,ar),jn.alert&&alert(Rt)}},ne.foo.bar=ne,ne.foo},Rs=function(ne,Ve){var Rt,ar,Ar,Hr,Wr,Di,fi,xn,Wi;if(Ar=(Ve=Ve||{}).sourceEncoding||"Unicode",Wr=Ve.outputEncoding,(Ve.autoencode||Wr)&&fr[Or].metadata&&fr[Or].metadata[Ar]&&fr[Or].metadata[Ar].encoding&&(Hr=fr[Or].metadata[Ar].encoding,!Wr&&fr[Or].encoding&&(Wr=fr[Or].encoding),!Wr&&Hr.codePages&&(Wr=Hr.codePages[0]),typeof Wr=="string"&&(Wr=Hr[Wr]),Wr)){for(fi=!1,Di=[],Rt=0,ar=ne.length;Rt<ar;Rt++)(xn=Wr[ne.charCodeAt(Rt)])?Di.push(String.fromCharCode(xn)):Di.push(ne[Rt]),Di[Rt].charCodeAt(0)>>8&&(fi=!0);ne=Di.join("")}for(Rt=ne.length;fi===void 0&&Rt!==0;)ne.charCodeAt(Rt-1)>>8&&(fi=!0),Rt--;if(!fi)return ne;for(Di=Ve.noBOM?[]:[254,255],Rt=0,ar=ne.length;Rt<ar;Rt++){if((Wi=(xn=ne.charCodeAt(Rt))>>8)>>8)throw new Error("Character at position "+Rt+" of string '"+ne+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Di.push(Wi),Di.push(xn-(Wi<<8))}return String.fromCharCode.apply(void 0,Di)},oa=C.__private__.pdfEscape=C.pdfEscape=function(ne,Ve){return Rs(ne,Ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qs=C.__private__.beginPage=function(ne){Er[++so]=[],on[so]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ne[0]),topRightY:Number(ne[1])}},Hu(so),Ft(Er[Be])},Os=function(ne,Ve){var Rt,ar,Ar;switch(r=Ve||r,typeof ne=="string"&&(Rt=G(ne.toLowerCase()),Array.isArray(Rt)&&(ar=Rt[0],Ar=Rt[1])),Array.isArray(ne)&&(ar=ne[0]*Br,Ar=ne[1]*Br),isNaN(ar)&&(ar=o[0],Ar=o[1]),(ar>14400||Ar>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ar=Math.min(14400,ar),Ar=Math.min(14400,Ar)),o=[ar,Ar],r.substr(0,1)){case"l":Ar>ar&&(o=[Ar,ar]);break;case"p":ar>Ar&&(o=[Ar,ar])}Qs(o),Oi(P),ct(js),Us!==0&&ct(Us+" J"),Gu!==0&&ct(Gu+" j"),gt.publish("addPage",{pageNumber:so})},bc=function(ne){ne>0&&ne<=so&&(Er.splice(ne,1),on.splice(ne,1),so--,Be>so&&(Be=so),this.setPage(Be))},Hu=function(ne){ne>0&&ne<=so&&(Be=ne)},bu=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return Er.length-1},el=function(ne,Ve,Rt){var ar,Ar=void 0;return Rt=Rt||{},ne=ne!==void 0?ne:fr[Or].fontName,Ve=Ve!==void 0?Ve:fr[Or].fontStyle,ar=ne.toLowerCase(),Qr[ar]!==void 0&&Qr[ar][Ve]!==void 0?Ar=Qr[ar][Ve]:Qr[ne]!==void 0&&Qr[ne][Ve]!==void 0?Ar=Qr[ne][Ve]:Rt.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+ne+"', '"+Ve+"'. Refer to getFontList() for available fonts."),Ar||Rt.noFallback||(Ar=Qr.times[Ve])==null&&(Ar=Qr.times.normal),Ar},Wl=C.__private__.putInfo=function(){var ne=lr(),Ve=function(ar){return ar};for(var Rt in b!==null&&(Ve=F.encryptor(ne,0)),ct("<<"),ct("/Producer ("+oa(Ve("jsPDF "+Bn.version))+")"),Gi)Gi.hasOwnProperty(Rt)&&Gi[Rt]&&ct("/"+Rt.substr(0,1).toUpperCase()+Rt.substr(1)+" ("+oa(Ve(Gi[Rt]))+")");ct("/CreationDate ("+oa(Ve(xt))+")"),ct(">>"),ct("endobj")},$u=C.__private__.putCatalog=function(ne){var Ve=(ne=ne||{}).rootDictionaryObjId||$i;switch(lr(),ct("<<"),ct("/Type /Catalog"),ct("/Pages "+Ve+" 0 R"),ri||(ri="fullwidth"),ri){case"fullwidth":ct("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ct("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ct("/OpenAction [3 0 R /Fit]");break;case"original":ct("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Rt=""+ri;Rt.substr(Rt.length-1)==="%"&&(ri=parseInt(ri)/100),typeof ri=="number"&&ct("/OpenAction [3 0 R /XYZ null null "+Ue(ri)+"]")}switch(ji||(ji="continuous"),ji){case"continuous":ct("/PageLayout /OneColumn");break;case"single":ct("/PageLayout /SinglePage");break;case"two":case"twoleft":ct("/PageLayout /TwoColumnLeft");break;case"tworight":ct("/PageLayout /TwoColumnRight")}Hi&&ct("/PageMode /"+Hi),gt.publish("putCatalog"),ct(">>"),ct("endobj")},wc=C.__private__.putTrailer=function(){ct("trailer"),ct("<<"),ct("/Size "+(Nt+1)),ct("/Root "+Nt+" 0 R"),ct("/Info "+(Nt-1)+" 0 R"),b!==null&&ct("/Encrypt "+F.oid+" 0 R"),ct("/ID [ <"+yt+"> <"+yt+"> ]"),ct(">>")},xc=C.__private__.putHeader=function(){ct("%PDF-"+N),ct("%ºß¬à")},Zl=C.__private__.putXRef=function(){var ne="0000000000";ct("xref"),ct("0 "+(Nt+1)),ct("0000000000 65535 f ");for(var Ve=1;Ve<=Nt;Ve++)typeof zt[Ve]=="function"?ct((ne+zt[Ve]()).slice(-10)+" 00000 n "):zt[Ve]!==void 0?ct((ne+zt[Ve]).slice(-10)+" 00000 n "):ct("0000000000 00000 n ")},Fs=C.__private__.buildDocument=function(){Fr(),Ft(Mt),gt.publish("buildDocument"),xc(),En(),Js(),la(),b!==null&&Gl(),Wl(),$u();var ne=Kt;return Zl(),wc(),ct("startxref"),ct(""+ne),ct("%%EOF"),Ft(Er[Be]),Mt.join(`
`)},tl=C.__private__.getBlob=function(ne){return new Blob([Jr(ne)],{type:"application/pdf"})},Sl=C.output=C.__private__.output=rs(function(ne,Ve){switch(typeof(Ve=Ve||{})=="string"?Ve={filename:Ve}:Ve.filename=Ve.filename||"generated.pdf",ne){case void 0:return Fs();case"save":C.save(Ve.filename);break;case"arraybuffer":return Jr(Fs());case"blob":return tl(Fs());case"bloburi":case"bloburl":if(jn.URL!==void 0&&typeof jn.URL.createObjectURL=="function")return jn.URL&&jn.URL.createObjectURL(tl(Fs()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Rt="",ar=Fs();try{Rt=gy(ar)}catch{Rt=gy(unescape(encodeURIComponent(ar)))}return"data:application/pdf;filename="+Ve.filename+";base64,"+Rt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jn)==="[object Window]"){var Ar="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Hr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ve.pdfObjectUrl&&(Ar=Ve.pdfObjectUrl,Hr="");var Wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ar+'"'+Hr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ve)+");<\/script></body></html>",Di=jn.open();return Di!==null&&Di.document.write(Wr),Di}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jn)==="[object Window]"){var fi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ve.filename+'" width="500px" height="400px" /></body></html>',xn=jn.open();if(xn!==null){xn.document.write(fi);var Wi=this;xn.document.documentElement.querySelector("#pdfViewer").onload=function(){xn.document.title=Ve.filename,xn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wi.output("bloburl"))}}return xn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ve)+'"></iframe></body></html>',xo=jn.open();if(xo!==null&&(xo.document.write(nn),xo.document.title=Ve.filename),xo||typeof safari>"u")return xo;break;case"datauri":case"dataurl":return jn.document.location.href=this.output("datauristring",Ve);default:return null}}),wu=function(ne){return Array.isArray(Ne)===!0&&Ne.indexOf(ne)>-1};switch(i){case"pt":Br=1;break;case"mm":Br=72/25.4;break;case"cm":Br=72/2.54;break;case"in":Br=72;break;case"px":Br=wu("px_scaling")==1?.75:96/72;break;case"pc":case"em":Br=12;break;case"ex":Br=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Br=i}var F=null;wt(),at();var X=function(ne){return b!==null?F.encryptor(ne,0):function(Ve){return Ve}},ce=C.__private__.getPageInfo=C.getPageInfo=function(ne){if(isNaN(ne)||ne%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:on[ne].objId,pageNumber:ne,pageContext:on[ne]}},Pe=C.__private__.getPageInfoByObjId=function(ne){if(isNaN(ne)||ne%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ve in on)if(on[Ve].objId===ne)break;return ce(Ve)},tt=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:on[Be].objId,pageNumber:Be,pageContext:on[Be]}};C.addPage=function(){return Os.apply(this,arguments),this},C.setPage=function(){return Hu.apply(this,arguments),Ft.call(this,Er[Be]),this},C.insertPage=function(ne){return this.addPage(),this.movePage(Be,ne),this},C.movePage=function(ne,Ve){var Rt,ar;if(ne>Ve){Rt=Er[ne],ar=on[ne];for(var Ar=ne;Ar>Ve;Ar--)Er[Ar]=Er[Ar-1],on[Ar]=on[Ar-1];Er[Ve]=Rt,on[Ve]=ar,this.setPage(Ve)}else if(ne<Ve){Rt=Er[ne],ar=on[ne];for(var Hr=ne;Hr<Ve;Hr++)Er[Hr]=Er[Hr+1],on[Hr]=on[Hr+1];Er[Ve]=Rt,on[Ve]=ar,this.setPage(Ve)}return this},C.deletePage=function(){return bc.apply(this,arguments),this},C.__private__.text=C.text=function(ne,Ve,Rt,ar,Ar){var Hr,Wr,Di,fi,xn,Wi,nn,xo,Oo,Wo=(ar=ar||{}).scope||this;if(typeof ne=="number"&&typeof Ve=="number"&&(typeof Rt=="string"||Array.isArray(Rt))){var za=Rt;Rt=Ve,Ve=ne,ne=za}if(arguments[3]instanceof ft?(ue("The transform parameter of text() with a Matrix value"),Oo=Ar):(Di=arguments[4],fi=arguments[5],aa(nn=arguments[3])==="object"&&nn!==null||(typeof Di=="string"&&(fi=Di,Di=null),typeof nn=="string"&&(fi=nn,nn=null),typeof nn=="number"&&(Di=nn,nn=null),ar={flags:nn,angle:Di,align:fi})),isNaN(Ve)||isNaN(Rt)||ne==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ne.length===0)return Wo;var jo="",Fn=!1,Sa=typeof ar.lineHeightFactor=="number"?ar.lineHeightFactor:h,cs=Wo.internal.scaleFactor;function nl(Yn){return Yn=Yn.split("	").join(Array(ar.TabLen||9).join(" ")),oa(Yn,nn)}function Ll(Yn){for(var ei,zo=Yn.concat(),Zo=[],Ca=zo.length;Ca--;)typeof(ei=zo.shift())=="string"?Zo.push(ei):Array.isArray(Yn)&&(ei.length===1||ei[1]===void 0&&ei[2]===void 0)?Zo.push(ei[0]):Zo.push([ei[0],ei[1],ei[2]]);return Zo}function Jl(Yn,ei){var zo;if(typeof Yn=="string")zo=ei(Yn)[0];else if(Array.isArray(Yn)){for(var Zo,Ca,Is=Yn.concat(),yi=[],Su=Is.length;Su--;)typeof(Zo=Is.shift())=="string"?yi.push(ei(Zo)[0]):Array.isArray(Zo)&&typeof Zo[0]=="string"&&(Ca=ei(Zo[0],Zo[1],Zo[2]),yi.push([Ca[0],Ca[1],Ca[2]]));zo=yi}return zo}var Tl=!1,ku=!0;if(typeof ne=="string")Tl=!0;else if(Array.isArray(ne)){var Ec=ne.concat();Wr=[];for(var Ql,ao=Ec.length;ao--;)(typeof(Ql=Ec.shift())!="string"||Array.isArray(Ql)&&typeof Ql[0]!="string")&&(ku=!1);Tl=ku}if(Tl===!1)throw new Error('Type of text must be string or Array. "'+ne+'" is not recognized.');typeof ne=="string"&&(ne=ne.match(/[\r?\n]/)?ne.split(/\r\n|\r|\n/g):[ne]);var ks=zr/Wo.internal.scaleFactor,va=ks*(Sa-1);switch(ar.baseline){case"bottom":Rt-=va;break;case"top":Rt+=ks-va;break;case"hanging":Rt+=ks-2*va;break;case"middle":Rt+=ks/2-va}if((Wi=ar.maxWidth||0)>0&&(typeof ne=="string"?ne=Wo.splitTextToSize(ne,Wi):Object.prototype.toString.call(ne)==="[object Array]"&&(ne=ne.reduce(function(Yn,ei){return Yn.concat(Wo.splitTextToSize(ei,Wi))},[]))),Hr={text:ne,x:Ve,y:Rt,options:ar,mutex:{pdfEscape:oa,activeFontKey:Or,fonts:fr,activeFontSize:zr}},gt.publish("preProcessText",Hr),ne=Hr.text,Di=(ar=Hr.options).angle,!(Oo instanceof ft)&&Di&&typeof Di=="number"){Di*=Math.PI/180,ar.rotationDirection===0&&(Di=-Di),ee===Z.ADVANCED&&(Di=-Di);var Pl=Math.cos(Di),ol=Math.sin(Di);Oo=new ft(Pl,ol,-ol,Pl,0,0)}else Di&&Di instanceof ft&&(Oo=Di);ee!==Z.ADVANCED||Oo||(Oo=Qt),(xn=ar.charSpace||Cl)!==void 0&&(jo+=we(Me(xn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xo=ar.horizontalScale)!==void 0&&(jo+=we(100*xo)+` Tz
`),ar.lang;var Ea=-1,As=ar.renderingMode!==void 0?ar.renderingMode:ar.stroke,al=Wo.internal.getCurrentPageInfo().pageContext;switch(As){case 0:case!1:case"fill":Ea=0;break;case 1:case!0:case"stroke":Ea=1;break;case 2:case"fillThenStroke":Ea=2;break;case 3:case"invisible":Ea=3;break;case 4:case"fillAndAddForClipping":Ea=4;break;case 5:case"strokeAndAddPathForClipping":Ea=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ea=6;break;case 7:case"addToPathForClipping":Ea=7}var eu=al.usedRenderingMode!==void 0?al.usedRenderingMode:-1;Ea!==-1?jo+=Ea+` Tr
`:eu!==-1&&(jo+=`0 Tr
`),Ea!==-1&&(al.usedRenderingMode=Ea),fi=ar.align||"left";var Ka,tu=zr*Sa,ru=Wo.internal.pageSize.getWidth(),Zu=fr[Or];xn=ar.charSpace||Cl,Wi=ar.maxWidth||0,nn=Object.assign({autoencode:!0,noBOM:!0},ar.flags);var Hs=[];if(Object.prototype.toString.call(ne)==="[object Array]"){var ma;Wr=Ll(ne),fi!=="left"&&(Ka=Wr.map(function(Yn){return Wo.getStringUnitWidth(Yn,{font:Zu,charSpace:xn,fontSize:zr,doKerning:!1})*zr/cs}));var Ss,Es=0;if(fi==="right"){Ve-=Ka[0],ne=[],ao=Wr.length;for(var fs=0;fs<ao;fs++)fs===0?(Ss=Bs(Ve),ma=Xl(Rt)):(Ss=Me(Es-Ka[fs]),ma=-tu),ne.push([Wr[fs],Ss,ma]),Es=Ka[fs]}else if(fi==="center"){Ve-=Ka[0]/2,ne=[],ao=Wr.length;for(var hs=0;hs<ao;hs++)hs===0?(Ss=Bs(Ve),ma=Xl(Rt)):(Ss=Me((Es-Ka[hs])/2),ma=-tu),ne.push([Wr[hs],Ss,ma]),Es=Ka[hs]}else if(fi==="left"){ne=[],ao=Wr.length;for(var Ml=0;Ml<ao;Ml++)ne.push(Wr[Ml])}else{if(fi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');ne=[],ao=Wr.length,Wi=Wi!==0?Wi:ru;for(var ds=0;ds<ao;ds++)ma=ds===0?Xl(Rt):-tu,Ss=ds===0?Bs(Ve):0,ds<ao-1?Hs.push(we(Me((Wi-Ka[ds])/(Wr[ds].split(" ").length-1)))):Hs.push(0),ne.push([Wr[ds],Ss,ma])}}var sl=typeof ar.R2L=="boolean"?ar.R2L:_i;sl===!0&&(ne=Jl(ne,function(Yn,ei,zo){return[Yn.split("").reverse().join(""),ei,zo]})),Hr={text:ne,x:Ve,y:Rt,options:ar,mutex:{pdfEscape:oa,activeFontKey:Or,fonts:fr,activeFontSize:zr}},gt.publish("postProcessText",Hr),ne=Hr.text,Fn=Hr.mutex.isHex||!1;var $s=fr[Or].encoding;$s!=="WinAnsiEncoding"&&$s!=="StandardEncoding"||(ne=Jl(ne,function(Yn,ei,zo){return[nl(Yn),ei,zo]})),Wr=Ll(ne),ne=[];for(var Uo,_n,ps,Na=0,Cs=1,Au=Array.isArray(Wr[0])?Cs:Na,ua="",Cc=function(Yn,ei,zo){var Zo="";return zo instanceof ft?(zo=typeof ar.angle=="number"?pe(zo,new ft(1,0,0,1,Yn,ei)):pe(new ft(1,0,0,1,Yn,ei),zo),ee===Z.ADVANCED&&(zo=pe(new ft(1,0,0,-1,0,0),zo)),Zo=zo.join(" ")+` Tm
`):Zo=we(Yn)+" "+we(ei)+` Td
`,Zo},Ja=0;Ja<Wr.length;Ja++){switch(ua="",Au){case Cs:ps=(Fn?"<":"(")+Wr[Ja][0]+(Fn?">":")"),Uo=parseFloat(Wr[Ja][1]),_n=parseFloat(Wr[Ja][2]);break;case Na:ps=(Fn?"<":"(")+Wr[Ja]+(Fn?">":")"),Uo=Bs(Ve),_n=Xl(Rt)}Hs!==void 0&&Hs[Ja]!==void 0&&(ua=Hs[Ja]+` Tw
`),Ja===0?ne.push(ua+Cc(Uo,_n,Oo)+ps):Au===Na?ne.push(ua+ps):Au===Cs&&ne.push(ua+Cc(Uo,_n,Oo)+ps)}ne=Au===Na?ne.join(` Tj
T* `):ne.join(` Tj
`),ne+=` Tj
`;var is=`BT
/`;return is+=Or+" "+zr+` Tf
`,is+=we(zr*Sa)+` TL
`,is+=El+`
`,is+=jo,is+=ne,ct(is+="ET"),I[Or]=!0,Wo};var bt=C.__private__.clip=C.clip=function(ne){return ct(ne==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return bt("evenodd")},C.__private__.discardPath=C.discardPath=function(){return ct("n"),this};var Bt=C.__private__.isValidStyle=function(ne){var Ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ne)!==-1&&(Ve=!0),Ve};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(ne){return Bt(ne)&&(y=ne),this};var Ot=C.__private__.getStyle=C.getStyle=function(ne){var Ve=y;switch(ne){case"D":case"S":Ve="S";break;case"F":Ve="f";break;case"FD":case"DF":Ve="B";break;case"f":case"f*":case"B":case"B*":Ve=ne}return Ve},wr=C.close=function(){return ct("h"),this};C.stroke=function(){return ct("S"),this},C.fill=function(ne){return pr("f",ne),this},C.fillEvenOdd=function(ne){return pr("f*",ne),this},C.fillStroke=function(ne){return pr("B",ne),this},C.fillStrokeEvenOdd=function(ne){return pr("B*",ne),this};var pr=function(ne,Ve){aa(Ve)==="object"?Mr(Ve,ne):ct(ne)},vr=function(ne){ne===null||ee===Z.ADVANCED&&ne===void 0||(ne=Ot(ne),ct(ne))};function _r(ne,Ve,Rt,ar,Ar){var Hr=new ud(Ve||this.boundingBox,Rt||this.xStep,ar||this.yStep,this.gState,Ar||this.matrix);Hr.stream=this.stream;var Wr=ne+"$$"+this.cloneIndex+++"$$";return Vt(Wr,Hr),Hr}var Mr=function(ne,Ve){var Rt=Zn[ne.key],ar=ki[Rt];if(ar instanceof vh)ct("q"),ct(Yr(Ve)),ar.gState&&C.setGState(ar.gState),ct(ne.matrix.toString()+" cm"),ct("/"+Rt+" sh"),ct("Q");else if(ar instanceof ud){var Ar=new ft(1,0,0,-1,0,Vs());ne.matrix&&(Ar=Ar.multiply(ne.matrix||Qt),Rt=_r.call(ar,ne.key,ne.boundingBox,ne.xStep,ne.yStep,Ar).id),ct("q"),ct("/Pattern cs"),ct("/"+Rt+" scn"),ar.gState&&C.setGState(ar.gState),ct(Ve),ct("Q")}},Yr=function(ne){switch(ne){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wi=C.moveTo=function(ne,Ve){return ct(we(Me(ne))+" "+we(it(Ve))+" m"),this},ot=C.lineTo=function(ne,Ve){return ct(we(Me(ne))+" "+we(it(Ve))+" l"),this},m=C.curveTo=function(ne,Ve,Rt,ar,Ar,Hr){return ct([we(Me(ne)),we(it(Ve)),we(Me(Rt)),we(it(ar)),we(Me(Ar)),we(it(Hr)),"c"].join(" ")),this};C.__private__.line=C.line=function(ne,Ve,Rt,ar,Ar){if(isNaN(ne)||isNaN(Ve)||isNaN(Rt)||isNaN(ar)||!Bt(Ar))throw new Error("Invalid arguments passed to jsPDF.line");return ee===Z.COMPAT?this.lines([[Rt-ne,ar-Ve]],ne,Ve,[1,1],Ar||"S"):this.lines([[Rt-ne,ar-Ve]],ne,Ve,[1,1]).stroke()},C.__private__.lines=C.lines=function(ne,Ve,Rt,ar,Ar,Hr){var Wr,Di,fi,xn,Wi,nn,xo,Oo,Wo,za,jo,Fn;if(typeof ne=="number"&&(Fn=Rt,Rt=Ve,Ve=ne,ne=Fn),ar=ar||[1,1],Hr=Hr||!1,isNaN(Ve)||isNaN(Rt)||!Array.isArray(ne)||!Array.isArray(ar)||!Bt(Ar)||typeof Hr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wi(Ve,Rt),Wr=ar[0],Di=ar[1],xn=ne.length,za=Ve,jo=Rt,fi=0;fi<xn;fi++)(Wi=ne[fi]).length===2?(za=Wi[0]*Wr+za,jo=Wi[1]*Di+jo,ot(za,jo)):(nn=Wi[0]*Wr+za,xo=Wi[1]*Di+jo,Oo=Wi[2]*Wr+za,Wo=Wi[3]*Di+jo,za=Wi[4]*Wr+za,jo=Wi[5]*Di+jo,m(nn,xo,Oo,Wo,za,jo));return Hr&&wr(),vr(Ar),this},C.path=function(ne){for(var Ve=0;Ve<ne.length;Ve++){var Rt=ne[Ve],ar=Rt.c;switch(Rt.op){case"m":wi(ar[0],ar[1]);break;case"l":ot(ar[0],ar[1]);break;case"c":m.apply(this,ar);break;case"h":wr()}}return this},C.__private__.rect=C.rect=function(ne,Ve,Rt,ar,Ar){if(isNaN(ne)||isNaN(Ve)||isNaN(Rt)||isNaN(ar)||!Bt(Ar))throw new Error("Invalid arguments passed to jsPDF.rect");return ee===Z.COMPAT&&(ar=-ar),ct([we(Me(ne)),we(it(Ve)),we(Me(Rt)),we(Me(ar)),"re"].join(" ")),vr(Ar),this},C.__private__.triangle=C.triangle=function(ne,Ve,Rt,ar,Ar,Hr,Wr){if(isNaN(ne)||isNaN(Ve)||isNaN(Rt)||isNaN(ar)||isNaN(Ar)||isNaN(Hr)||!Bt(Wr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Rt-ne,ar-Ve],[Ar-Rt,Hr-ar],[ne-Ar,Ve-Hr]],ne,Ve,[1,1],Wr,!0),this},C.__private__.roundedRect=C.roundedRect=function(ne,Ve,Rt,ar,Ar,Hr,Wr){if(isNaN(ne)||isNaN(Ve)||isNaN(Rt)||isNaN(ar)||isNaN(Ar)||isNaN(Hr)||!Bt(Wr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Di=4/3*(Math.SQRT2-1);return Ar=Math.min(Ar,.5*Rt),Hr=Math.min(Hr,.5*ar),this.lines([[Rt-2*Ar,0],[Ar*Di,0,Ar,Hr-Hr*Di,Ar,Hr],[0,ar-2*Hr],[0,Hr*Di,-Ar*Di,Hr,-Ar,Hr],[2*Ar-Rt,0],[-Ar*Di,0,-Ar,-Hr*Di,-Ar,-Hr],[0,2*Hr-ar],[0,-Hr*Di,Ar*Di,-Hr,Ar,-Hr]],ne+Ar,Ve,[1,1],Wr,!0),this},C.__private__.ellipse=C.ellipse=function(ne,Ve,Rt,ar,Ar){if(isNaN(ne)||isNaN(Ve)||isNaN(Rt)||isNaN(ar)||!Bt(Ar))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Hr=4/3*(Math.SQRT2-1)*Rt,Wr=4/3*(Math.SQRT2-1)*ar;return wi(ne+Rt,Ve),m(ne+Rt,Ve-Wr,ne+Hr,Ve-ar,ne,Ve-ar),m(ne-Hr,Ve-ar,ne-Rt,Ve-Wr,ne-Rt,Ve),m(ne-Rt,Ve+Wr,ne-Hr,Ve+ar,ne,Ve+ar),m(ne+Hr,Ve+ar,ne+Rt,Ve+Wr,ne+Rt,Ve),vr(Ar),this},C.__private__.circle=C.circle=function(ne,Ve,Rt,ar){if(isNaN(ne)||isNaN(Ve)||isNaN(Rt)||!Bt(ar))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ne,Ve,Rt,Rt,ar)},C.setFont=function(ne,Ve,Rt){return Rt&&(Ve=le(Ve,Rt)),Or=el(ne,Ve,{disableWarning:!1}),this};var xr=C.__private__.getFont=C.getFont=function(){return fr[el.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var ne,Ve,Rt={};for(ne in Qr)if(Qr.hasOwnProperty(ne))for(Ve in Rt[ne]=[],Qr[ne])Qr[ne].hasOwnProperty(Ve)&&Rt[ne].push(Ve);return Rt},C.addFont=function(ne,Ve,Rt,ar,Ar){var Hr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Hr.indexOf(arguments[3])!==-1?Ar=arguments[3]:arguments[3]&&Hr.indexOf(arguments[3])==-1&&(Rt=le(Rt,ar)),Ar=Ar||"Identity-H",Da.call(this,ne,Ve,Rt,Ar)};var h,P=t.lineWidth||.200025,ci=C.__private__.getLineWidth=C.getLineWidth=function(){return P},Oi=C.__private__.setLineWidth=C.setLineWidth=function(ne){return P=ne,ct(we(Me(ne))+" w"),this};C.__private__.setLineDash=Bn.API.setLineDash=Bn.API.setLineDashPattern=function(ne,Ve){if(ne=ne||[],Ve=Ve||0,isNaN(Ve)||!Array.isArray(ne))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ne=ne.map(function(Rt){return we(Me(Rt))}).join(" "),Ve=we(Me(Ve)),ct("["+ne+"] "+Ve+" d"),this};var wo=C.__private__.getLineHeight=C.getLineHeight=function(){return zr*h};C.__private__.getLineHeight=C.getLineHeight=function(){return zr*h};var ie=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(ne){return typeof(ne=ne||1.15)=="number"&&(h=ne),this},wn=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return h};ie(t.lineHeight);var Bs=C.__private__.getHorizontalCoordinate=function(ne){return Me(ne)},Xl=C.__private__.getVerticalCoordinate=function(ne){return ee===Z.ADVANCED?ne:on[Be].mediaBox.topRightY-on[Be].mediaBox.bottomLeftY-Me(ne)},p0=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(ne){return we(Bs(ne))},Yl=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(ne){return we(Xl(ne))},js=t.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return Ci(js)},C.__private__.setStrokeColor=C.setDrawColor=function(ne,Ve,Rt,ar){return js=Et({ch1:ne,ch2:Ve,ch3:Rt,ch4:ar,pdfColorType:"draw",precision:2}),ct(js),this};var kc=t.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return Ci(kc)},C.__private__.setFillColor=C.setFillColor=function(ne,Ve,Rt,ar){return kc=Et({ch1:ne,ch2:Ve,ch3:Rt,ch4:ar,pdfColorType:"fill",precision:2}),ct(kc),this};var El=t.textColor||"0 g",xu=C.__private__.getTextColor=C.getTextColor=function(){return Ci(El)};C.__private__.setTextColor=C.setTextColor=function(ne,Ve,Rt,ar){return El=Et({ch1:ne,ch2:Ve,ch3:Rt,ch4:ar,pdfColorType:"text",precision:3}),this};var Cl=t.charSpace,Ac=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Cl||0)};C.__private__.setCharSpace=C.setCharSpace=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cl=ne,this};var Us=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(ne){var Ve=C.CapJoinStyles[ne];if(Ve===void 0)throw new Error("Line cap style of '"+ne+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Us=Ve,ct(Ve+" J"),this};var Gu=0;C.__private__.setLineJoin=C.setLineJoin=function(ne){var Ve=C.CapJoinStyles[ne];if(Ve===void 0)throw new Error("Line join style of '"+ne+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gu=Ve,ct(Ve+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(ne){if(ne=ne||0,isNaN(ne))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ct(we(Me(ne))+" M"),this},C.GState=d2,C.setGState=function(ne){(ne=typeof ne=="string"?un[Rn[ne]]:Sc(null,ne)).equals(Xn)||(ct("/"+ne.id+" gs"),Xn=ne)};var Sc=function(ne,Ve){if(!ne||!Rn[ne]){var Rt=!1;for(var ar in un)if(un.hasOwnProperty(ar)&&un[ar].equals(Ve)){Rt=!0;break}if(Rt)Ve=un[ar];else{var Ar="GS"+(Object.keys(un).length+1).toString(10);un[Ar]=Ve,Ve.id=Ar}return ne&&(Rn[ne]=Ve.id),gt.publish("addGState",Ve),Ve}};C.addGState=function(ne,Ve){return Sc(ne,Ve),this},C.saveGraphicsState=function(){return ct("q"),Ei.push({key:Or,size:zr,color:El}),this},C.restoreGraphicsState=function(){ct("Q");var ne=Ei.pop();return Or=ne.key,zr=ne.size,El=ne.color,Xn=null,this},C.setCurrentTransformationMatrix=function(ne){return ct(ne.toString()+" cm"),this},C.comment=function(ne){return ct("#"+ne),this};var Kl=function(ne,Ve){var Rt=ne||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Rt},set:function(Hr){isNaN(Hr)||(Rt=parseFloat(Hr))}});var ar=Ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ar},set:function(Hr){isNaN(Hr)||(ar=parseFloat(Hr))}});var Ar="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ar},set:function(Hr){Ar=Hr.toString()}}),this},qs=function(ne,Ve,Rt,ar){Kl.call(this,ne,Ve),this.type="rect";var Ar=Rt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ar},set:function(Wr){isNaN(Wr)||(Ar=parseFloat(Wr))}});var Hr=ar||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Hr},set:function(Wr){isNaN(Wr)||(Hr=parseFloat(Wr))}}),this},Mi=function(){this.page=so,this.currentPage=Be,this.pages=Er.slice(0),this.pagesContext=on.slice(0),this.x=Ni,this.y=qi,this.matrix=kt,this.width=Il(Be),this.height=Vs(Be),this.outputDestination=It,this.id="",this.objectNumber=-1};Mi.prototype.restore=function(){so=this.page,Be=this.currentPage,on=this.pagesContext,Er=this.pages,Ni=this.x,qi=this.y,kt=this.matrix,Hn(Be,this.width),Wu(Be,this.height),It=this.outputDestination};var bi=function(ne,Ve,Rt,ar,Ar){Lt.push(new Mi),so=Be=0,Er=[],Ni=ne,qi=Ve,kt=Ar,Qs([Rt,ar])},rl=function(ne){if(lt[ne])Lt.pop().restore();else{var Ve=new Mi,Rt="Xo"+(Object.keys(Fe).length+1).toString(10);Ve.id=Rt,lt[ne]=Rt,Fe[Rt]=Ve,gt.publish("addFormObject",Ve),Lt.pop().restore()}};for(var il in C.beginFormObject=function(ne,Ve,Rt,ar,Ar){return bi(ne,Ve,Rt,ar,Ar),this},C.endFormObject=function(ne){return rl(ne),this},C.doFormObject=function(ne,Ve){var Rt=Fe[lt[ne]];return ct("q"),ct(Ve.toString()+" cm"),ct("/"+Rt.id+" Do"),ct("Q"),this},C.getFormObject=function(ne){var Ve=Fe[lt[ne]];return{x:Ve.x,y:Ve.y,width:Ve.width,height:Ve.height,matrix:Ve.matrix}},C.save=function(ne,Ve){return ne=ne||"generated.pdf",(Ve=Ve||{}).returnPromise=Ve.returnPromise||!1,Ve.returnPromise===!1?(yh(tl(Fs()),ne),typeof yh.unload=="function"&&jn.setTimeout&&setTimeout(yh.unload,911),this):new Promise(function(Rt,ar){try{var Ar=yh(tl(Fs()),ne);typeof yh.unload=="function"&&jn.setTimeout&&setTimeout(yh.unload,911),Rt(Ar)}catch(Hr){ar(Hr.message)}})},Bn.API)Bn.API.hasOwnProperty(il)&&(il==="events"&&Bn.API.events.length?function(ne,Ve){var Rt,ar,Ar;for(Ar=Ve.length-1;Ar!==-1;Ar--)Rt=Ve[Ar][0],ar=Ve[Ar][1],ne.subscribe.apply(ne,[Rt].concat(typeof ar=="function"?[ar]:ar))}(gt,Bn.API.events):C[il]=Bn.API[il]);var Il=C.getPageWidth=function(ne){return(on[ne=ne||Be].mediaBox.topRightX-on[ne].mediaBox.bottomLeftX)/Br},Hn=C.setPageWidth=function(ne,Ve){on[ne].mediaBox.topRightX=Ve*Br+on[ne].mediaBox.bottomLeftX},Vs=C.getPageHeight=function(ne){return(on[ne=ne||Be].mediaBox.topRightY-on[ne].mediaBox.bottomLeftY)/Br},Wu=C.setPageHeight=function(ne,Ve){on[ne].mediaBox.topRightY=Ve*Br+on[ne].mediaBox.bottomLeftY};return C.internal={pdfEscape:oa,getStyle:Ot,getFont:xr,getFontSize:Vr,getCharSpace:Ac,getTextColor:xu,getLineHeight:wo,getLineHeightFactor:wn,getLineWidth:ci,write:mr,getHorizontalCoordinate:Bs,getVerticalCoordinate:Xl,getCoordinateString:p0,getVerticalCoordinateString:Yl,collections:{},newObject:lr,newAdditionalObject:$r,newObjectDeferred:pt,newObjectDeferredBegin:jr,getFilters:en,putStream:Sn,events:gt,scaleFactor:Br,pageSize:{getWidth:function(){return Il(Be)},setWidth:function(ne){Hn(Be,ne)},getHeight:function(){return Vs(Be)},setHeight:function(ne){Wu(Be,ne)}},encryptionOptions:b,encryption:F,getEncryptor:X,output:Sl,getNumberOfPages:bu,pages:Er,out:ct,f2:Ue,f3:Ce,getPageInfo:ce,getPageInfoByObjId:Pe,getCurrentPageInfo:tt,getPDFVersion:O,Point:Kl,Rectangle:qs,Matrix:ft,hasHotfix:wu},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return Il(Be)},set:function(ne){Hn(Be,ne)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return Vs(Be)},set:function(ne){Wu(Be,ne)},enumerable:!0,configurable:!0}),Kn.call(C,dr),Or="F1",Os(o,r),gt.publish("initialized"),C}rd.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},rd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rd.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},rd.prototype.processOwnerPassword=function(t,e){return _y(yy(e).substr(0,5),t)},rd.prototype.encryptor=function(t,e){var r=yy(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return _y(r,i)}},d2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||aa(t)!==aa(this))return!1;var i=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&i--;return i===0},Bn.API={events:[]},Bn.version="2.5.1";var us=Bn.API,p_=1,Nh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},no=function(t){return t.toFixed(2)},Gf=function(t){return t.toFixed(5)};us.__acroform__={};var yc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Hb=function(t){return t*p_},Y0=function(t){var e=new B8,r=ln.internal.getHeight(t)||0,i=ln.internal.getWidth(t)||0;return e.BBox=[0,0,Number(no(i)),Number(no(r))],e},QS=us.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},eE=us.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},tE=us.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},bs=us.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return tE(t,e-1)},ws=us.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return QS(t,e-1)},xs=us.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eE(t,e-1)},rE=us.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,o=t[0],u=t[1],c=t[2],s=t[3],f={};return f.lowerLeft_X=r(o)||0,f.lowerLeft_Y=i(u+s)||0,f.upperRight_X=r(o+c)||0,f.upperRight_Y=i(u)||0,[Number(no(f.lowerLeft_X)),Number(no(f.lowerLeft_Y)),Number(no(f.upperRight_X)),Number(no(f.upperRight_Y))]},iE=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,i=vy(t,r),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+no(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=Y0(t);return u.scope=t.scope,u.stream=e.join(`
`),u}},vy=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(Ce){return Ce.split(`
`)}):o.map(function(Ce){return[Ce]});var u=r,c=ln.internal.getHeight(t)||0;c=c<0?-c:c;var s=ln.internal.getWidth(t)||0;s=s<0?-s:s;var f=function(Ce,Me,qe){if(Ce+1<o.length){var it=Me+" "+o[Ce+1][0];return D1(it,t,qe).width<=s-4}return!1};u++;e:for(;u>0;){e="",u--;var y,b,A=D1("3",t,u).height,I=t.multiline?c-u:(c-A)/2,C=I+=2,N=0,O=0,$=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+D1(e,t,u=12).width+", FieldWidth:"+s+`
`;break}for(var G="",Z=0,ee=0;ee<o.length;ee++)if(o.hasOwnProperty(ee)){var te=!1;if(o[ee].length!==1&&$!==o[ee].length-1){if((A+2)*(Z+2)+2>c)continue e;G+=o[ee][$],te=!0,O=ee,ee--}else{G=(G+=o[ee][$]+" ").substr(G.length-1)==" "?G.substr(0,G.length-1):G;var _e=parseInt(ee),le=f(_e,G,u),we=ee>=o.length-1;if(le&&!we){G+=" ",$=0;continue}if(le||we){if(we)O=_e;else if(t.multiline&&(A+2)*(Z+2)+2>c)continue e}else{if(!t.multiline||(A+2)*(Z+2)+2>c)continue e;O=_e}}for(var ue="",ze=N;ze<=O;ze++){var Ue=o[ze];if(t.multiline){if(ze===O){ue+=Ue[$]+" ",$=($+1)%Ue.length;continue}if(ze===N){ue+=Ue[Ue.length-1]+" ";continue}}ue+=Ue[0]+" "}switch(ue=ue.substr(ue.length-1)==" "?ue.substr(0,ue.length-1):ue,b=D1(ue,t,u).width,t.textAlign){case"right":y=s-b-2;break;case"center":y=(s-b)/2;break;case"left":default:y=2}e+=no(y)+" "+no(C)+` Td
`,e+="("+Nh(ue)+`) Tj
`,e+=-no(y)+` 0 Td
`,C=-(u+2),b=0,N=te?O:O+1,Z++,G=""}break}return i.text=e,i.fontSize=u,i},D1=function(t,e,r){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},nE={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},oE=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},aE=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var i=r,o=t[r];e.internal.newObjectDeferredBegin(o.objId,!0),aa(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},sE=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(N0.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(nE)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");p_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new j8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];u.objId=void 0,u.hasAnnotation&&oE(u,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(i,o){var u=!i;for(var c in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(c)){var s=i[c],f=[],y=s.Rect;if(s.Rect&&(s.Rect=rE(s.Rect,o)),o.internal.newObjectDeferredBegin(s.objId,!0),s.DA=ln.createDefaultAppearanceStream(s),aa(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(f=s.getKeyValueListForStream()),s.Rect=y,s.hasAppearanceStream&&!s.appearanceStreamContent){var b=iE(s);f.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(s.appearanceStreamContent){var A="";for(var I in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(I)){var C=s.appearanceStreamContent[I];if(A+="/"+I+" ",A+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var c in C)if(C.hasOwnProperty(c)){var N=C[c];typeof N=="function"&&(N=N.call(o,s)),A+="/"+c+" "+N+" ",o.internal.acroformPlugin.xForms.indexOf(N)>=0||o.internal.acroformPlugin.xForms.push(N)}}else typeof(N=C)=="function"&&(N=N.call(o,s)),A+="/"+c+" "+N,o.internal.acroformPlugin.xForms.indexOf(N)>=0||o.internal.acroformPlugin.xForms.push(N);A+=">>"}f.push({key:"AP",value:`<<
`+A+">>"})}o.internal.putStream({additionalKeyValues:f,objectId:s.objId}),o.internal.out("endobj")}u&&aE(o.internal.acroformPlugin.xForms,o)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},F8=us.__acroform__.arrayToPdfArray=function(t,e,r){var i=function(c){return c};if(Array.isArray(t)){for(var o="[",u=0;u<t.length;u++)switch(u!==0&&(o+=" "),aa(t[u])){case"boolean":case"number":case"object":o+=t[u].toString();break;case"string":t[u].substr(0,1)!=="/"?(e!==void 0&&r&&(i=r.internal.getEncryptor(e)),o+="("+Nh(i(t[u].toString()))+")"):o+=t[u].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Wm=function(t,e,r){var i=function(o){return o};return e!==void 0&&r&&(i=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Nh(i(t))+")"},tf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tf.prototype.toString=function(){return this.objId+" 0 R"},tf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},tf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var i=e[r],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:F8(o,this.objId,this.scope)}):o instanceof tf?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var B8=function(){tf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};yc(B8,tf);var j8=function(){tf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Nh(r(t))+")"}},set:function(r){t=r}})};yc(j8,tf);var N0=function t(){tf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(G){if(isNaN(G))throw new Error('Invalid value "'+G+'" for attribute F supplied.');e=G}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bs(e,3)},set:function(G){G?this.F=ws(e,3):this.F=xs(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(G){if(isNaN(G))throw new Error('Invalid value "'+G+'" for attribute Ff supplied.');r=G}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(G){i=G!==void 0?G:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(G){i[0]=G}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(G){i[1]=G}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(G){i[2]=G}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(G){i[3]=G}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(G){switch(G){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=G;break;default:throw new Error('Invalid value "'+G+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof p2)return;u="FieldObject"+t.FieldNum++}var G=function(Z){return Z};return this.scope&&(G=this.scope.internal.getEncryptor(this.objId)),"("+Nh(G(u))+")"},set:function(G){u=G.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(G){u=G}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(G){c=G}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(G){s=G}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(G){f=G}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/p_:y},set:function(G){y=G}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(G){b=G}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof p2||this instanceof Ah))return Wm(A,this.objId,this.scope)},set:function(G){G=G.toString(),A=G}});var I=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof vl?I:Wm(I,this.objId,this.scope)},set:function(G){G=G.toString(),I=this instanceof vl?G:G.substr(0,1)==="("?Wh(G.substr(1,G.length-2)):Wh(G)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vl?Wh(I.substr(1,I.length-1)):I},set:function(G){G=G.toString(),I=this instanceof vl?"/"+G:G}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(G){this.V=G}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof vl?C:Wm(C,this.objId,this.scope)},set:function(G){G=G.toString(),C=this instanceof vl?G:G.substr(0,1)==="("?Wh(G.substr(1,G.length-2)):Wh(G)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vl?Wh(C.substr(1,C.length-1)):C},set:function(G){G=G.toString(),C=this instanceof vl?"/"+G:G}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(G){G=!!G,O=G}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(G){N=G}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,1)},set:function(G){G?this.Ff=ws(this.Ff,1):this.Ff=xs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,2)},set:function(G){G?this.Ff=ws(this.Ff,2):this.Ff=xs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,3)},set:function(G){G?this.Ff=ws(this.Ff,3):this.Ff=xs(this.Ff,3)}});var $=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if($!==null)return $},set:function(G){if([0,1,2].indexOf(G)===-1)throw new Error('Invalid value "'+G+'" for attribute Q supplied.');$=G}}),Object.defineProperty(this,"textAlign",{get:function(){var G;switch($){case 0:default:G="left";break;case 1:G="center";break;case 2:G="right"}return G},configurable:!0,enumerable:!0,set:function(G){switch(G){case"right":case 2:$=2;break;case"center":case 1:$=1;break;case"left":case 0:default:$=0}}})};yc(N0,tf);var yd=function(){N0.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return F8(e,this.objId,this.scope)},set:function(r){var i,o;o=[],typeof(i=r)=="string"&&(o=function(u,c,s){s||(s=1);for(var f,y=[];f=c.exec(u);)y.push(f[s]);return y}(i,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,18)},set:function(r){r?this.Ff=ws(this.Ff,18):this.Ff=xs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ws(this.Ff,19):this.Ff=xs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,20)},set:function(r){r?(this.Ff=ws(this.Ff,20),e.sort()):this.Ff=xs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,22)},set:function(r){r?this.Ff=ws(this.Ff,22):this.Ff=xs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(r){r?this.Ff=ws(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,27)},set:function(r){r?this.Ff=ws(this.Ff,27):this.Ff=xs(this.Ff,27)}}),this.hasAppearanceStream=!1};yc(yd,N0);var _d=function(){yd.call(this),this.fontName="helvetica",this.combo=!1};yc(_d,yd);var vd=function(){_d.call(this),this.combo=!0};yc(vd,_d);var e2=function(){vd.call(this),this.edit=!0};yc(e2,vd);var vl=function(){N0.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,15)},set:function(r){r?this.Ff=ws(this.Ff,15):this.Ff=xs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,16)},set:function(r){r?this.Ff=ws(this.Ff,16):this.Ff=xs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,17)},set:function(r){r?this.Ff=ws(this.Ff,17):this.Ff=xs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(r){r?this.Ff=ws(this.Ff,26):this.Ff=xs(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,o=[];for(i in o.push("<<"),e)o.push("/"+i+" ("+Nh(r(e[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){aa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};yc(vl,N0);var t2=function(){vl.call(this),this.pushButton=!0};yc(t2,vl);var bd=function(){vl.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};yc(bd,vl);var p2=function(){var t,e;N0.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(s){return s};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var u,c=[];for(u in c.push("<<"),i)c.push("/"+u+" ("+Nh(o(i[u]))+")");return c.push(">>"),c.join(`
`)},set:function(o){aa(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ln.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yc(p2,N0),bd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bd.prototype.createOption=function(t){var e=new p2;return e.Parent=this,e.optionName=t,this.Kids.push(e),lE.call(this.scope,e),e};var r2=function(){vl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ln.CheckBox.createAppearanceStream()};yc(r2,vl);var Ah=function(){N0.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,13)},set:function(e){e?this.Ff=ws(this.Ff,13):this.Ff=xs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,21)},set:function(e){e?this.Ff=ws(this.Ff,21):this.Ff=xs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(e){e?this.Ff=ws(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,24)},set:function(e){e?this.Ff=ws(this.Ff,24):this.Ff=xs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,25)},set:function(e){e?this.Ff=ws(this.Ff,25):this.Ff=xs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(e){e?this.Ff=ws(this.Ff,26):this.Ff=xs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yc(Ah,N0);var i2=function(){Ah.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,14)},set:function(t){t?this.Ff=ws(this.Ff,14):this.Ff=xs(this.Ff,14)}}),this.password=!0};yc(i2,Ah);var ln={CheckBox:{createAppearanceStream:function(){return{N:{On:ln.CheckBox.YesNormal},D:{On:ln.CheckBox.YesPushDown,Off:ln.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Y0(t);e.scope=t.scope;var r=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),u=vy(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+no(ln.internal.getWidth(t))+" "+no(ln.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+no(u.fontSize)+" Tf "+o),r.push("BT"),r.push(u.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Y0(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],u=ln.internal.getHeight(t),c=ln.internal.getWidth(t),s=vy(t,t.caption);return o.push("1 g"),o.push("0 0 "+no(c)+" "+no(u)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+no(c-1)+" "+no(u-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+no(s.fontSize)+" Tf "+i),o.push(s.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=Y0(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+no(ln.internal.getWidth(t))+" "+no(ln.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ln.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ln.RadioButton.Circle.YesNormal,e.D[t]=ln.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Y0(t);e.scope=t.scope;var r=[],i=ln.internal.getWidth(t)<=ln.internal.getHeight(t)?ln.internal.getWidth(t)/4:ln.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=ln.internal.Bezier_C,u=Number((i*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Gf(ln.internal.getWidth(t)/2)+" "+Gf(ln.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),r.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),r.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),r.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Y0(t);e.scope=t.scope;var r=[],i=ln.internal.getWidth(t)<=ln.internal.getHeight(t)?ln.internal.getWidth(t)/4:ln.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),u=Number((o*ln.internal.Bezier_C).toFixed(5)),c=Number((i*ln.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Gf(ln.internal.getWidth(t)/2)+" "+Gf(ln.internal.getHeight(t)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),r.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),r.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),r.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Gf(ln.internal.getWidth(t)/2)+" "+Gf(ln.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),r.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),r.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),r.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Y0(t);e.scope=t.scope;var r=[],i=ln.internal.getWidth(t)<=ln.internal.getHeight(t)?ln.internal.getWidth(t)/4:ln.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),u=Number((o*ln.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Gf(ln.internal.getWidth(t)/2)+" "+Gf(ln.internal.getHeight(t)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),r.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),r.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),r.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ln.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ln.RadioButton.Cross.YesNormal,e.D[t]=ln.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Y0(t);e.scope=t.scope;var r=[],i=ln.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+no(ln.internal.getWidth(t)-2)+" "+no(ln.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(no(i.x1.x)+" "+no(i.x1.y)+" m"),r.push(no(i.x2.x)+" "+no(i.x2.y)+" l"),r.push(no(i.x4.x)+" "+no(i.x4.y)+" m"),r.push(no(i.x3.x)+" "+no(i.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Y0(t);e.scope=t.scope;var r=ln.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+no(ln.internal.getWidth(t))+" "+no(ln.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+no(ln.internal.getWidth(t)-2)+" "+no(ln.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(no(r.x1.x)+" "+no(r.x1.y)+" m"),i.push(no(r.x2.x)+" "+no(r.x2.y)+" l"),i.push(no(r.x4.x)+" "+no(r.x4.y)+" m"),i.push(no(r.x3.x)+" "+no(r.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Y0(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+no(ln.internal.getWidth(t))+" "+no(ln.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};ln.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ln.internal.getWidth(t),r=ln.internal.getHeight(t),i=Math.min(e,r);return{x1:{x:(e-i)/2,y:(r-i)/2+i},x2:{x:(e-i)/2+i,y:(r-i)/2},x3:{x:(e-i)/2,y:(r-i)/2},x4:{x:(e-i)/2+i,y:(r-i)/2+i}}}},ln.internal.getWidth=function(t){var e=0;return aa(t)==="object"&&(e=Hb(t.Rect[2])),e},ln.internal.getHeight=function(t){var e=0;return aa(t)==="object"&&(e=Hb(t.Rect[3])),e};var lE=us.addField=function(t){if(sE(this,t),!(t instanceof N0))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};us.AcroFormChoiceField=yd,us.AcroFormListBox=_d,us.AcroFormComboBox=vd,us.AcroFormEditBox=e2,us.AcroFormButton=vl,us.AcroFormPushButton=t2,us.AcroFormRadioButton=bd,us.AcroFormCheckBox=r2,us.AcroFormTextField=Ah,us.AcroFormPasswordField=i2,us.AcroFormAppearance=ln,us.AcroForm={ChoiceField:yd,ListBox:_d,ComboBox:vd,EditBox:e2,Button:vl,PushButton:t2,RadioButton:bd,CheckBox:r2,TextField:Ah,PasswordField:i2,Appearance:ln},Bn.AcroForm={ChoiceField:yd,ListBox:_d,ComboBox:vd,EditBox:e2,Button:vl,PushButton:t2,RadioButton:bd,CheckBox:r2,TextField:Ah,PasswordField:i2,Appearance:ln};function U8(t){return t.reduce(function(e,r,i){return e[r]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(Ce,Me){var qe,it,xt,yt,$e,at=e;if((Me=Me||e)==="RGBA"||Ce.data!==void 0&&Ce.data instanceof Uint8ClampedArray&&"height"in Ce&&"width"in Ce)return"RGBA";if(le(Ce))for($e in r)for(xt=r[$e],qe=0;qe<xt.length;qe+=1){for(yt=!0,it=0;it<xt[qe].length;it+=1)if(xt[qe][it]!==void 0&&xt[qe][it]!==Ce[it]){yt=!1;break}if(yt===!0){at=$e;break}}else for($e in r)for(xt=r[$e],qe=0;qe<xt.length;qe+=1){for(yt=!0,it=0;it<xt[qe].length;it+=1)if(xt[qe][it]!==void 0&&xt[qe][it]!==Ce.charCodeAt(it)){yt=!1;break}if(yt===!0){at=$e;break}}return at===e&&Me!==e&&(at=Me),at},o=function Ce(Me){for(var qe=this.internal.write,it=this.internal.putStream,xt=(0,this.internal.getFilters)();xt.indexOf("FlateEncode")!==-1;)xt.splice(xt.indexOf("FlateEncode"),1);Me.objectId=this.internal.newObject();var yt=[];if(yt.push({key:"Type",value:"/XObject"}),yt.push({key:"Subtype",value:"/Image"}),yt.push({key:"Width",value:Me.width}),yt.push({key:"Height",value:Me.height}),Me.colorSpace===$.INDEXED?yt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Me.palette.length/3-1)+" "+("sMask"in Me&&Me.sMask!==void 0?Me.objectId+2:Me.objectId+1)+" 0 R]"}):(yt.push({key:"ColorSpace",value:"/"+Me.colorSpace}),Me.colorSpace===$.DEVICE_CMYK&&yt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),yt.push({key:"BitsPerComponent",value:Me.bitsPerComponent}),"decodeParameters"in Me&&Me.decodeParameters!==void 0&&yt.push({key:"DecodeParms",value:"<<"+Me.decodeParameters+">>"}),"transparency"in Me&&Array.isArray(Me.transparency)){for(var $e="",at=0,mt=Me.transparency.length;at<mt;at++)$e+=Me.transparency[at]+" "+Me.transparency[at]+" ";yt.push({key:"Mask",value:"["+$e+"]"})}Me.sMask!==void 0&&yt.push({key:"SMask",value:Me.objectId+1+" 0 R"});var Xe=Me.filter!==void 0?["/"+Me.filter]:void 0;if(it({data:Me.data,additionalKeyValues:yt,alreadyAppliedFilters:Xe,objectId:Me.objectId}),qe("endobj"),"sMask"in Me&&Me.sMask!==void 0){var wt="/Predictor "+Me.predictor+" /Colors 1 /BitsPerComponent "+Me.bitsPerComponent+" /Columns "+Me.width,be={width:Me.width,height:Me.height,colorSpace:"DeviceGray",bitsPerComponent:Me.bitsPerComponent,decodeParameters:wt,data:Me.sMask};"filter"in Me&&(be.filter=Me.filter),Ce.call(this,be)}if(Me.colorSpace===$.INDEXED){var Be=this.internal.newObject();it({data:ue(new Uint8Array(Me.palette)),objectId:Be}),qe("endobj")}},u=function(){var Ce=this.internal.collections.addImage_images;for(var Me in Ce)o.call(this,Ce[Me])},c=function(){var Ce,Me=this.internal.collections.addImage_images,qe=this.internal.write;for(var it in Me)qe("/I"+(Ce=Me[it]).index,Ce.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var Ce=this.internal.collections.addImage_images;return s.call(this),Ce},y=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(Ce){return typeof t["process"+Ce.toUpperCase()]=="function"},A=function(Ce){return aa(Ce)==="object"&&Ce.nodeType===1},I=function(Ce,Me){if(Ce.nodeName==="IMG"&&Ce.hasAttribute("src")){var qe=""+Ce.getAttribute("src");if(qe.indexOf("data:image/")===0)return yp(unescape(qe).split("base64,").pop());var it=t.loadFile(qe,!0);if(it!==void 0)return it}if(Ce.nodeName==="CANVAS"){if(Ce.width===0||Ce.height===0)throw new Error("Given canvas must have data. Canvas width: "+Ce.width+", height: "+Ce.height);var xt;switch(Me){case"PNG":xt="image/png";break;case"WEBP":xt="image/webp";break;case"JPEG":case"JPG":default:xt="image/jpeg"}return yp(Ce.toDataURL(xt,1).split("base64,").pop())}},C=function(Ce){var Me=this.internal.collections.addImage_images;if(Me){for(var qe in Me)if(Ce===Me[qe].alias)return Me[qe]}},N=function(Ce,Me,qe){return Ce||Me||(Ce=-96,Me=-96),Ce<0&&(Ce=-1*qe.width*72/Ce/this.internal.scaleFactor),Me<0&&(Me=-1*qe.height*72/Me/this.internal.scaleFactor),Ce===0&&(Ce=Me*qe.width/qe.height),Me===0&&(Me=Ce*qe.height/qe.width),[Ce,Me]},O=function(Ce,Me,qe,it,xt,yt){var $e=N.call(this,qe,it,xt),at=this.internal.getCoordinateString,mt=this.internal.getVerticalCoordinateString,Xe=f.call(this);if(qe=$e[0],it=$e[1],Xe[xt.index]=xt,yt){yt*=Math.PI/180;var wt=Math.cos(yt),be=Math.sin(yt),Be=function(ht){return ht.toFixed(4)},Ae=[Be(wt),Be(be),Be(-1*be),Be(wt),0,0,"cm"]}this.internal.write("q"),yt?(this.internal.write([1,"0","0",1,at(Ce),mt(Me+it),"cm"].join(" ")),this.internal.write(Ae.join(" ")),this.internal.write([at(qe),"0","0",at(it),"0","0","cm"].join(" "))):this.internal.write([at(qe),"0","0",at(it),at(Ce),mt(Me+it),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+xt.index+" Do"),this.internal.write("Q")},$=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var G=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Z=t.__addimage__.sHashCode=function(Ce){var Me,qe,it=0;if(typeof Ce=="string")for(qe=Ce.length,Me=0;Me<qe;Me++)it=(it<<5)-it+Ce.charCodeAt(Me),it|=0;else if(le(Ce))for(qe=Ce.byteLength/2,Me=0;Me<qe;Me++)it=(it<<5)-it+Ce[Me],it|=0;return it},ee=t.__addimage__.validateStringAsBase64=function(Ce){(Ce=Ce||"").toString().trim();var Me=!0;return Ce.length===0&&(Me=!1),Ce.length%4!=0&&(Me=!1),/^[A-Za-z0-9+/]+$/.test(Ce.substr(0,Ce.length-2))===!1&&(Me=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Ce.substr(-2))===!1&&(Me=!1),Me},te=t.__addimage__.extractImageFromDataUrl=function(Ce){var Me=(Ce=Ce||"").split("base64,"),qe=null;if(Me.length===2){var it=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Me[0]);Array.isArray(it)&&(qe={mimeType:it[1],charset:it[2],data:Me[1]})}return qe},_e=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(Ce){return _e()&&Ce instanceof ArrayBuffer};var le=t.__addimage__.isArrayBufferView=function(Ce){return _e()&&typeof Uint32Array<"u"&&(Ce instanceof Int8Array||Ce instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Ce instanceof Uint8ClampedArray||Ce instanceof Int16Array||Ce instanceof Uint16Array||Ce instanceof Int32Array||Ce instanceof Uint32Array||Ce instanceof Float32Array||Ce instanceof Float64Array)},we=t.__addimage__.binaryStringToUint8Array=function(Ce){for(var Me=Ce.length,qe=new Uint8Array(Me),it=0;it<Me;it++)qe[it]=Ce.charCodeAt(it);return qe},ue=t.__addimage__.arrayBufferToBinaryString=function(Ce){for(var Me="",qe=le(Ce)?Ce:new Uint8Array(Ce),it=0;it<qe.length;it+=8192)Me+=String.fromCharCode.apply(null,qe.subarray(it,it+8192));return Me};t.addImage=function(){var Ce,Me,qe,it,xt,yt,$e,at,mt;if(typeof arguments[1]=="number"?(Me=e,qe=arguments[1],it=arguments[2],xt=arguments[3],yt=arguments[4],$e=arguments[5],at=arguments[6],mt=arguments[7]):(Me=arguments[1],qe=arguments[2],it=arguments[3],xt=arguments[4],yt=arguments[5],$e=arguments[6],at=arguments[7],mt=arguments[8]),aa(Ce=arguments[0])==="object"&&!A(Ce)&&"imageData"in Ce){var Xe=Ce;Ce=Xe.imageData,Me=Xe.format||Me||e,qe=Xe.x||qe||0,it=Xe.y||it||0,xt=Xe.w||Xe.width||xt,yt=Xe.h||Xe.height||yt,$e=Xe.alias||$e,at=Xe.compression||at,mt=Xe.rotation||Xe.angle||mt}var wt=this.internal.getFilters();if(at===void 0&&wt.indexOf("FlateEncode")!==-1&&(at="SLOW"),isNaN(qe)||isNaN(it))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var be=ze.call(this,Ce,Me,$e,at);return O.call(this,qe,it,xt,yt,be,mt),this};var ze=function(Ce,Me,qe,it){var xt,yt,$e;if(typeof Ce=="string"&&i(Ce)===e){Ce=unescape(Ce);var at=Ue(Ce,!1);(at!==""||(at=t.loadFile(Ce,!0))!==void 0)&&(Ce=at)}if(A(Ce)&&(Ce=I(Ce,Me)),Me=i(Ce,Me),!b(Me))throw new Error("addImage does not support files of type '"+Me+"', please ensure that a plugin for '"+Me+"' support is added.");if((($e=qe)==null||$e.length===0)&&(qe=function(mt){return typeof mt=="string"||le(mt)?Z(mt):le(mt.data)?Z(mt.data):null}(Ce)),(xt=C.call(this,qe))||(_e()&&(Ce instanceof Uint8Array||Me==="RGBA"||(yt=Ce,Ce=we(Ce))),xt=this["process"+Me.toUpperCase()](Ce,y.call(this),qe,function(mt){return mt&&typeof mt=="string"&&(mt=mt.toUpperCase()),mt in t.image_compression?mt:G.NONE}(it),yt)),!xt)throw new Error("An unknown error occurred whilst processing the image.");return xt},Ue=t.__addimage__.convertBase64ToBinaryString=function(Ce,Me){var qe;Me=typeof Me!="boolean"||Me;var it,xt="";if(typeof Ce=="string"){it=(qe=te(Ce))!==null?qe.data:Ce;try{xt=yp(it)}catch(yt){if(Me)throw ee(it)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+yt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return xt};t.getImageProperties=function(Ce){var Me,qe,it="";if(A(Ce)&&(Ce=I(Ce)),typeof Ce=="string"&&i(Ce)===e&&((it=Ue(Ce,!1))===""&&(it=t.loadFile(Ce)||""),Ce=it),qe=i(Ce),!b(qe))throw new Error("addImage does not support files of type '"+qe+"', please ensure that a plugin for '"+qe+"' support is added.");if(!_e()||Ce instanceof Uint8Array||(Ce=we(Ce)),!(Me=this["process"+qe.toUpperCase()](Ce)))throw new Error("An unknown error occurred whilst processing the image");return Me.fileType=qe,Me}})(Bn.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Bn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var i,o,u,c=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(r.objId),y=r.pageContext.annotations,b=!1,A=0;A<y.length&&!b;A++)switch((i=y[A]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var I=0;I<y.length;I++){i=y[I];var C=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),$=this.internal.newAdditionalObject(),G=this.internal.getEncryptor(O.objId),Z=i.title||"Note";u="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(i.bounds.x)+" "+s(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y)+"] ")+"/Contents ("+C(G(i.contents))+")",u+=" /Popup "+$.objId+" 0 R",u+=" /P "+f.objId+" 0 R",u+=" /T ("+C(G(Z))+") >>",O.content=u;var ee=O.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(i.bounds.x+30)+" "+s(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w+30)+" "+s(i.bounds.y)+"] ")+" /Parent "+ee,i.open&&(u+=" /Open true"),u+=" >>",$.content=u,this.internal.write(O.objId,"0 R",$.objId,"0 R");break;case"freetext":o="/Rect ["+c(i.bounds.x)+" "+s(i.bounds.y)+" "+c(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y+i.bounds.h)+"] ";var te=i.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+C(N(i.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+te+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(i.options.name){var _e=this.annotations._nameMap[i.options.name];i.options.pageNumber=_e.page,i.options.top=_e.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",u="",i.options.url)u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+C(N(i.options.url))+") >>";else if(i.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,u+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var le=s(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),u+=" /XYZ "+i.options.left+" "+le+" "+i.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},t.link=function(r,i,o,u,c){var s=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:f(r),y:y(i),w:f(r+o),h:y(i+u)},options:c,type:"link"})},t.textWithLink=function(r,i,o,u){var c,s,f=this.getTextWidth(r),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){s=u.maxWidth;var b=this.splitTextToSize(r,s).length;c=Math.ceil(y*b)}else s=f,c=y;return this.text(r,i,o,u),o+=.2*y,u.align==="center"&&(i-=f/2),u.align==="right"&&(i-=f),this.link(i,o-y,s,c,u),f},t.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(Bn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var u=t.__arabicParser__.isInArabicSubstitutionA=function(O){return e[O.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},s=t.__arabicParser__.isArabicEndLetter=function(O){return c(O)&&u(O)&&e[O.charCodeAt(0)].length<=2},f=t.__arabicParser__.isArabicAlfLetter=function(O){return c(O)&&o.indexOf(O.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return c(O)&&u(O)&&e[O.charCodeAt(0)].length>=1};var y=t.__arabicParser__.arabicLetterHasFinalForm=function(O){return c(O)&&u(O)&&e[O.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(O){return c(O)&&u(O)&&e[O.charCodeAt(0)].length>=3};var b=t.__arabicParser__.arabicLetterHasMedialForm=function(O){return c(O)&&u(O)&&e[O.charCodeAt(0)].length==4},A=t.__arabicParser__.resolveLigatures=function(O){var $=0,G=r,Z="",ee=0;for($=0;$<O.length;$+=1)G[O.charCodeAt($)]!==void 0?(ee++,typeof(G=G[O.charCodeAt($)])=="number"&&(Z+=String.fromCharCode(G),G=r,ee=0),$===O.length-1&&(G=r,Z+=O.charAt($-(ee-1)),$-=ee-1,ee=0)):(G=r,Z+=O.charAt($-ee),$-=ee,ee=0);return Z};t.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&i[O.charCodeAt(0)]!==void 0};var I=t.__arabicParser__.getCorrectForm=function(O,$,G){return c(O)?u(O)===!1?-1:!y(O)||!c($)&&!c(G)||!c(G)&&s($)||s(O)&&!c($)||s(O)&&f($)||s(O)&&s($)?0:b(O)&&c($)&&!s($)&&c(G)&&y(G)?3:s(O)||!c(G)?1:2:-1},C=function(O){var $=0,G=0,Z=0,ee="",te="",_e="",le=(O=O||"").split("\\s+"),we=[];for($=0;$<le.length;$+=1){for(we.push(""),G=0;G<le[$].length;G+=1)ee=le[$][G],te=le[$][G-1],_e=le[$][G+1],c(ee)?(Z=I(ee,te,_e),we[$]+=Z!==-1?String.fromCharCode(e[ee.charCodeAt(0)][Z]):ee):we[$]+=ee;we[$]=A(we[$])}return we.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var O,$=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,G=[];if(Array.isArray($)){var Z=0;for(G=[],Z=0;Z<$.length;Z+=1)Array.isArray($[Z])?G.push([C($[Z][0]),$[Z][1],$[Z][2]]):G.push([C($[Z])]);O=G}else O=C($);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};t.events.push(["preProcessText",N])}(Bn.API),Bn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(s){o=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(s){u=s}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(s){c=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,i){var o;if((r=r||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Bn.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(O){f=O}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(O){y=O}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(O){b=O}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(O){A=O}});var I=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return I},set:function(O){I=O}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(O){N=O}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(f){return i.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},t.getTextDimensions=function(f,y){i.call(this);var b=(y=y||{}).fontSize||this.getFontSize(),A=y.font||this.getFont(),I=y.scaleFactor||this.internal.scaleFactor,C=0,N=0,O=0,$=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var G=y.maxWidth;G>0?typeof f=="string"?f=this.splitTextToSize(f,G):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(ee,te){return ee.concat($.splitTextToSize(te,G))},[])):f=Array.isArray(f)?f:[f];for(var Z=0;Z<f.length;Z++)C<(O=this.getStringUnitWidth(f[Z],{font:A})*b)&&(C=O);return C!==0&&(N=f.length),{w:C/=I,h:Math.max((N*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/I,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var f;f=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var y=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,A=this.internal.__cell__.margins||e,I=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===f.lineNumber?(f.x=(y.x||0)+(y.width||0),f.y=y.y||0):y.y+y.height+f.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=A.top,C&&I&&(this.printHeaderRow(f.lineNumber,!0),f.y+=I[0].height)):f.y=y.y+y.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,r===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-b,f.y+b,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+b,{align:"center",baseline:"top",maxWidth:f.width-b-b}):this.text(f.text,f.x+b,f.y+b,{align:"left",baseline:"top",maxWidth:f.width-b-b})),this.internal.__cell__.lastCell=f,this};t.table=function(f,y,b,A,I){if(i.call(this),!b)throw new Error("No data for PDF table.");var C,N,O,$,G=[],Z=[],ee=[],te={},_e={},le=[],we=[],ue=(I=I||{}).autoSize||!1,ze=I.printHeaders!==!1,Ue=I.css&&I.css["font-size"]!==void 0?16*I.css["font-size"]:I.fontSize||12,Ce=I.margins||Object.assign({width:this.getPageWidth()},e),Me=typeof I.padding=="number"?I.padding:3,qe=I.headerBackgroundColor||"#c8c8c8",it=I.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=ze,this.internal.__cell__.margins=Ce,this.internal.__cell__.table_font_size=Ue,this.internal.__cell__.padding=Me,this.internal.__cell__.headerBackgroundColor=qe,this.internal.__cell__.headerTextColor=it,this.setFontSize(Ue),A==null)Z=G=Object.keys(b[0]),ee=G.map(function(){return"left"});else if(Array.isArray(A)&&aa(A[0])==="object")for(G=A.map(function(Xe){return Xe.name}),Z=A.map(function(Xe){return Xe.prompt||Xe.name||""}),ee=A.map(function(Xe){return Xe.align||"left"}),C=0;C<A.length;C+=1)_e[A[C].name]=A[C].width*(19.049976/25.4);else Array.isArray(A)&&typeof A[0]=="string"&&(Z=G=A,ee=G.map(function(){return"left"}));if(ue||Array.isArray(A)&&typeof A[0]=="string")for(C=0;C<G.length;C+=1){for(te[$=G[C]]=b.map(function(Xe){return Xe[$]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(Z[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=te[$],this.setFont(void 0,"normal"),O=0;O<N.length;O+=1)le.push(this.getTextDimensions(N[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_e[$]=Math.max.apply(null,le)+Me+Me,le=[]}if(ze){var xt={};for(C=0;C<G.length;C+=1)xt[G[C]]={},xt[G[C]].text=Z[C],xt[G[C]].align=ee[C];var yt=s.call(this,xt,_e);we=G.map(function(Xe){return new u(f,y,_e[Xe],yt,xt[Xe].text,void 0,xt[Xe].align)}),this.setTableHeaderRow(we),this.printHeaderRow(1,!1)}var $e=A.reduce(function(Xe,wt){return Xe[wt.name]=wt.align,Xe},{});for(C=0;C<b.length;C+=1){"rowStart"in I&&I.rowStart instanceof Function&&I.rowStart({row:C,data:b[C]},this);var at=s.call(this,b[C],_e);for(O=0;O<G.length;O+=1){var mt=b[C][G[O]];"cellStart"in I&&I.cellStart instanceof Function&&I.cellStart({row:C,col:O,data:mt},this),c.call(this,new u(f,y,_e[G[O]],at,mt,C+2,$e[G[O]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=y,this};var s=function(f,y){var b=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,I=this.internal.scaleFactor;return Object.keys(f).map(function(C){var N=f[C];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,y[C]-b-b)},this).map(function(C){return this.getLineHeightFactor()*C.length*A/I+b+b},this).reduce(function(C,N){return Math.max(C,N)},0)};t.setTableHeaderRow=function(f){i.call(this),this.internal.__cell__.tableHeaderRow=f},t.printHeaderRow=function(f,y){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var I=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){b=this.internal.__cell__.tableHeaderRow[C].clone(),y&&(b.y=this.internal.__cell__.margins.top||0,I.push(b)),b.lineNumber=f;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,b),this.setTextColor(N)}I.length>0&&this.setTableHeaderRow(I),this.setFont(void 0,"normal"),r=!1}}(Bn.API);var q8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},V8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],by=U8(V8),H8=[100,200,300,400,500,600,700,800,900],uE=U8(H8);function wy(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(u){return q8[u=u||"normal"]?u:"normal"}(t.style),i=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(u){return typeof by[u=u||"normal"]=="number"?u:"normal"}(t.stretch);return{family:e,style:r,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,r,i].join(" ")}}}function $b(t,e,r,i){var o;for(o=r;o>=0&&o<e.length;o+=i)if(t[e[o]])return t[e[o]];for(o=r;o>=0&&o<e.length;o-=i)if(t[e[o]])return t[e[o]]}var cE={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Gb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Wb(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function fE(t,e,r){for(var i=(r=r||{}).defaultFontFamily||"times",o=Object.assign({},cE,r.genericFontFamilies||{}),u=null,c=null,s=0;s<e.length;++s)if(o[(u=wy(e[s])).family]&&(u.family=o[u.family]),t.hasOwnProperty(u.family)){c=t[u.family];break}if(!(c=c||t[i]))throw new Error("Could not find a font-family for the rule '"+Wb(u)+"' and default family '"+i+"'.");if(c=function(f,y){if(y[f])return y[f];var b=by[f],A=b<=by.normal?-1:1,I=$b(y,V8,b,A);if(!I)throw new Error("Could not find a matching font-stretch value for "+f);return I}(u.stretch,c),c=function(f,y){if(y[f])return y[f];for(var b=q8[f],A=0;A<b.length;++A)if(y[b[A]])return y[b[A]];throw new Error("Could not find a matching font-style for "+f)}(u.style,c),!(c=function(f,y){if(y[f])return y[f];if(f===400&&y[500])return y[500];if(f===500&&y[400])return y[400];var b=uE[f],A=$b(y,H8,b,f<400?-1:1);if(!A)throw new Error("Could not find a matching font-weight for value "+f);return A}(u.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Wb(u)+"'.");return c}function Zb(t){return t.trimLeft()}function hE(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function dE(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var z1,Xb,Yb,Zm=["times"];(function(t){var e,r,i,o,u,c,s,f,y,b=function(be){return be=be||{},this.isStrokeTransparent=be.isStrokeTransparent||!1,this.strokeOpacity=be.strokeOpacity||1,this.strokeStyle=be.strokeStyle||"#000000",this.fillStyle=be.fillStyle||"#000000",this.isFillTransparent=be.isFillTransparent||!1,this.fillOpacity=be.fillOpacity||1,this.font=be.font||"10px sans-serif",this.textBaseline=be.textBaseline||"alphabetic",this.textAlign=be.textAlign||"left",this.lineWidth=be.lineWidth||1,this.lineJoin=be.lineJoin||"miter",this.lineCap=be.lineCap||"butt",this.path=be.path||[],this.transform=be.transform!==void 0?be.transform.clone():new f,this.globalCompositeOperation=be.globalCompositeOperation||"normal",this.globalAlpha=be.globalAlpha||1,this.clip_path=be.clip_path||[],this.currentPoint=be.currentPoint||new c,this.miterLimit=be.miterLimit||10,this.lastPoint=be.lastPoint||new c,this.lineDashOffset=be.lineDashOffset||0,this.lineDash=be.lineDash||[],this.margin=be.margin||[0,0,0,0],this.prevPageLastElemOffset=be.prevPageLastElemOffset||0,this.ignoreClearRect=typeof be.ignoreClearRect!="boolean"||be.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new A(this),e=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,c=this.internal.Point,s=this.internal.Rectangle,f=this.internal.Matrix,y=new b}]);var A=function(be){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Be=be;Object.defineProperty(this,"pdf",{get:function(){return Be}});var Ae=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ae},set:function(Ft){Ae=!!Ft}});var ht=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ht},set:function(Ft){ht=!!Ft}});var Nt=0;Object.defineProperty(this,"posX",{get:function(){return Nt},set:function(Ft){isNaN(Ft)||(Nt=Ft)}});var zt=0;Object.defineProperty(this,"posY",{get:function(){return zt},set:function(Ft){isNaN(Ft)||(zt=Ft)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(Ft){var ct;typeof Ft=="number"?ct=[Ft,Ft,Ft,Ft]:((ct=new Array(4))[0]=Ft[0],ct[1]=Ft.length>=2?Ft[1]:ct[0],ct[2]=Ft.length>=3?Ft[2]:ct[0],ct[3]=Ft.length>=4?Ft[3]:ct[1]),y.margin=ct}});var Mt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Mt},set:function(Ft){Mt=Ft}});var Kt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Kt},set:function(Ft){Kt=Ft}});var yr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return yr},set:function(Ft){yr=Ft}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(Ft){Ft instanceof b&&(y=Ft)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(Ft){y.path=Ft}});var Er=[];Object.defineProperty(this,"ctxStack",{get:function(){return Er},set:function(Ft){Er=Ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ft){var ct;ct=I(Ft),this.ctx.fillStyle=ct.style,this.ctx.isFillTransparent=ct.a===0,this.ctx.fillOpacity=ct.a,this.pdf.setFillColor(ct.r,ct.g,ct.b,{a:ct.a}),this.pdf.setTextColor(ct.r,ct.g,ct.b,{a:ct.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ft){var ct=I(Ft);this.ctx.strokeStyle=ct.style,this.ctx.isStrokeTransparent=ct.a===0,this.ctx.strokeOpacity=ct.a,ct.a===0?this.pdf.setDrawColor(255,255,255):(ct.a,this.pdf.setDrawColor(ct.r,ct.g,ct.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ft){["butt","round","square"].indexOf(Ft)!==-1&&(this.ctx.lineCap=Ft,this.pdf.setLineCap(Ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ft){isNaN(Ft)||(this.ctx.lineWidth=Ft,this.pdf.setLineWidth(Ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ft){["bevel","round","miter"].indexOf(Ft)!==-1&&(this.ctx.lineJoin=Ft,this.pdf.setLineJoin(Ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ft){isNaN(Ft)||(this.ctx.miterLimit=Ft,this.pdf.setMiterLimit(Ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ft){this.ctx.textBaseline=Ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ft){["right","end","center","left","start"].indexOf(Ft)!==-1&&(this.ctx.textAlign=Ft)}});var Jt=null;function It(Ft,ct){if(Jt===null){var mr=function(Jr){var dr=[];return Object.keys(Jr).forEach(function(zr){Jr[zr].forEach(function(ri){var Vr=null;switch(ri){case"bold":Vr={family:zr,weight:"bold"};break;case"italic":Vr={family:zr,style:"italic"};break;case"bolditalic":Vr={family:zr,weight:"bold",style:"italic"};break;case"":case"normal":Vr={family:zr}}Vr!==null&&(Vr.ref={name:zr,style:ri},dr.push(Vr))})}),dr}(Ft.getFontList());Jt=function(Jr){for(var dr={},zr=0;zr<Jr.length;++zr){var ri=wy(Jr[zr]),Vr=ri.family,_i=ri.stretch,Hi=ri.style,Nr=ri.weight;dr[Vr]=dr[Vr]||{},dr[Vr][_i]=dr[Vr][_i]||{},dr[Vr][_i][Hi]=dr[Vr][_i][Hi]||{},dr[Vr][_i][Hi][Nr]=ri}return dr}(mr.concat(ct))}return Jt}var Fr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fr},set:function(Ft){Jt=null,Fr=Ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ft){var ct;if(this.ctx.font=Ft,(ct=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ft))!==null){var mr=ct[1],Jr=(ct[2],ct[3]),dr=ct[4],zr=(ct[5],ct[6]),ri=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(dr)[2];dr=Math.floor(ri==="px"?parseFloat(dr)*this.pdf.internal.scaleFactor:ri==="em"?parseFloat(dr)*this.pdf.getFontSize():parseFloat(dr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(dr);var Vr=function(Gi){var Or,Br,Ni=[],qi=Gi.trim();if(qi==="")return Zm;if(qi in Gb)return[Gb[qi]];for(;qi!=="";){switch(Br=null,Or=(qi=Zb(qi)).charAt(0)){case'"':case"'":Br=hE(qi.substring(1),Or);break;default:Br=dE(qi)}if(Br===null||(Ni.push(Br[0]),(qi=Zb(Br[1]))!==""&&qi.charAt(0)!==","))return Zm;qi=qi.replace(/^,/,"")}return Ni}(zr);if(this.fontFaces){var _i=fE(It(this.pdf,this.fontFaces),Vr.map(function(Gi){return{family:Gi,stretch:"normal",weight:Jr,style:mr}}));this.pdf.setFont(_i.ref.name,_i.ref.style)}else{var Hi="";(Jr==="bold"||parseInt(Jr,10)>=700||mr==="bold")&&(Hi="bold"),mr==="italic"&&(Hi+="italic"),Hi.length===0&&(Hi="normal");for(var Nr="",ji={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ui=0;Ui<Vr.length;Ui++){if(this.pdf.internal.getFont(Vr[Ui],Hi,{noFallback:!0,disableWarning:!0})!==void 0){Nr=Vr[Ui];break}if(Hi==="bolditalic"&&this.pdf.internal.getFont(Vr[Ui],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nr=Vr[Ui],Hi="bold";else if(this.pdf.internal.getFont(Vr[Ui],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nr=Vr[Ui],Hi="normal";break}}if(Nr===""){for(var an=0;an<Vr.length;an++)if(ji[Vr[an]]){Nr=ji[Vr[an]];break}}Nr=Nr===""?"Times":Nr,this.pdf.setFont(Nr,Hi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ft){this.ctx.globalCompositeOperation=Ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ft){this.ctx.globalAlpha=Ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ft){this.ctx.lineDashOffset=Ft,wt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ft){this.ctx.lineDash=Ft,wt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ft){this.ctx.ignoreClearRect=!!Ft}})};A.prototype.setLineDash=function(be){this.lineDash=be},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){te.call(this,"fill",!1)},A.prototype.stroke=function(){te.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(be,Be){if(isNaN(be)||isNaN(Be))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ae=this.ctx.transform.applyToPoint(new c(be,Be));this.path.push({type:"mt",x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new c(be,Be)},A.prototype.closePath=function(){var be=new c(0,0),Be=0;for(Be=this.path.length-1;Be!==-1;Be--)if(this.path[Be].type==="begin"&&aa(this.path[Be+1])==="object"&&typeof this.path[Be+1].x=="number"){be=new c(this.path[Be+1].x,this.path[Be+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(be.x,be.y)},A.prototype.lineTo=function(be,Be){if(isNaN(be)||isNaN(Be))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ae=this.ctx.transform.applyToPoint(new c(be,Be));this.path.push({type:"lt",x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new c(Ae.x,Ae.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),te.call(this,null,!0)},A.prototype.quadraticCurveTo=function(be,Be,Ae,ht){if(isNaN(Ae)||isNaN(ht)||isNaN(be)||isNaN(Be))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Nt=this.ctx.transform.applyToPoint(new c(Ae,ht)),zt=this.ctx.transform.applyToPoint(new c(be,Be));this.path.push({type:"qct",x1:zt.x,y1:zt.y,x:Nt.x,y:Nt.y}),this.ctx.lastPoint=new c(Nt.x,Nt.y)},A.prototype.bezierCurveTo=function(be,Be,Ae,ht,Nt,zt){if(isNaN(Nt)||isNaN(zt)||isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Mt=this.ctx.transform.applyToPoint(new c(Nt,zt)),Kt=this.ctx.transform.applyToPoint(new c(be,Be)),yr=this.ctx.transform.applyToPoint(new c(Ae,ht));this.path.push({type:"bct",x1:Kt.x,y1:Kt.y,x2:yr.x,y2:yr.y,x:Mt.x,y:Mt.y}),this.ctx.lastPoint=new c(Mt.x,Mt.y)},A.prototype.arc=function(be,Be,Ae,ht,Nt,zt){if(isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht)||isNaN(Nt))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(zt=!!zt,!this.ctx.transform.isIdentity){var Mt=this.ctx.transform.applyToPoint(new c(be,Be));be=Mt.x,Be=Mt.y;var Kt=this.ctx.transform.applyToPoint(new c(0,Ae)),yr=this.ctx.transform.applyToPoint(new c(0,0));Ae=Math.sqrt(Math.pow(Kt.x-yr.x,2)+Math.pow(Kt.y-yr.y,2))}Math.abs(Nt-ht)>=2*Math.PI&&(ht=0,Nt=2*Math.PI),this.path.push({type:"arc",x:be,y:Be,radius:Ae,startAngle:ht,endAngle:Nt,counterclockwise:zt})},A.prototype.arcTo=function(be,Be,Ae,ht,Nt){throw new Error("arcTo not implemented.")},A.prototype.rect=function(be,Be,Ae,ht){if(isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(be,Be),this.lineTo(be+Ae,Be),this.lineTo(be+Ae,Be+ht),this.lineTo(be,Be+ht),this.lineTo(be,Be),this.lineTo(be+Ae,Be),this.lineTo(be,Be)},A.prototype.fillRect=function(be,Be,Ae,ht){if(isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var Nt={};this.lineCap!=="butt"&&(Nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(be,Be,Ae,ht),this.fill(),Nt.hasOwnProperty("lineCap")&&(this.lineCap=Nt.lineCap),Nt.hasOwnProperty("lineJoin")&&(this.lineJoin=Nt.lineJoin)}},A.prototype.strokeRect=function(be,Be,Ae,ht){if(isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(be,Be,Ae,ht),this.stroke())},A.prototype.clearRect=function(be,Be,Ae,ht){if(isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(be,Be,Ae,ht))},A.prototype.save=function(be){be=typeof be!="boolean"||be;for(var Be=this.pdf.internal.getCurrentPageInfo().pageNumber,Ae=0;Ae<this.pdf.internal.getNumberOfPages();Ae++)this.pdf.setPage(Ae+1),this.pdf.internal.out("q");if(this.pdf.setPage(Be),be){this.ctx.fontSize=this.pdf.internal.getFontSize();var ht=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ht}},A.prototype.restore=function(be){be=typeof be!="boolean"||be;for(var Be=this.pdf.internal.getCurrentPageInfo().pageNumber,Ae=0;Ae<this.pdf.internal.getNumberOfPages();Ae++)this.pdf.setPage(Ae+1),this.pdf.internal.out("Q");this.pdf.setPage(Be),be&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var I=function(be){var Be,Ae,ht,Nt;if(be.isCanvasGradient===!0&&(be=be.getColor()),!be)return{r:0,g:0,b:0,a:0,style:be};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(be))Be=0,Ae=0,ht=0,Nt=0;else{var zt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(be);if(zt!==null)Be=parseInt(zt[1]),Ae=parseInt(zt[2]),ht=parseInt(zt[3]),Nt=1;else if((zt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(be))!==null)Be=parseInt(zt[1]),Ae=parseInt(zt[2]),ht=parseInt(zt[3]),Nt=parseFloat(zt[4]);else{if(Nt=1,typeof be=="string"&&be.charAt(0)!=="#"){var Mt=new N8(be);be=Mt.ok?Mt.toHex():"#000000"}be.length===4?(Be=be.substring(1,2),Be+=Be,Ae=be.substring(2,3),Ae+=Ae,ht=be.substring(3,4),ht+=ht):(Be=be.substring(1,3),Ae=be.substring(3,5),ht=be.substring(5,7)),Be=parseInt(Be,16),Ae=parseInt(Ae,16),ht=parseInt(ht,16)}}return{r:Be,g:Ae,b:ht,a:Nt,style:be}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(be,Be,Ae,ht){if(isNaN(Be)||isNaN(Ae)||typeof be!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ht=isNaN(ht)?void 0:ht,!C.call(this)){var Nt=at(this.ctx.transform.rotation),zt=this.ctx.transform.scaleX;Me.call(this,{text:be,x:Be,y:Ae,scale:zt,angle:Nt,align:this.textAlign,maxWidth:ht})}},A.prototype.strokeText=function(be,Be,Ae,ht){if(isNaN(Be)||isNaN(Ae)||typeof be!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ht=isNaN(ht)?void 0:ht;var Nt=at(this.ctx.transform.rotation),zt=this.ctx.transform.scaleX;Me.call(this,{text:be,x:Be,y:Ae,scale:zt,renderingMode:"stroke",angle:Nt,align:this.textAlign,maxWidth:ht})}},A.prototype.measureText=function(be){if(typeof be!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Be=this.pdf,Ae=this.pdf.internal.scaleFactor,ht=Be.internal.getFontSize(),Nt=Be.getStringUnitWidth(be)*ht/Be.internal.scaleFactor,zt=function(Mt){var Kt=(Mt=Mt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Kt}}),this};return new zt({width:Nt*=Math.round(96*Ae/72*1e4)/1e4})},A.prototype.scale=function(be,Be){if(isNaN(be)||isNaN(Be))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ae=new f(be,0,0,Be,0,0);this.ctx.transform=this.ctx.transform.multiply(Ae)},A.prototype.rotate=function(be){if(isNaN(be))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Be=new f(Math.cos(be),Math.sin(be),-Math.sin(be),Math.cos(be),0,0);this.ctx.transform=this.ctx.transform.multiply(Be)},A.prototype.translate=function(be,Be){if(isNaN(be)||isNaN(Be))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ae=new f(1,0,0,1,be,Be);this.ctx.transform=this.ctx.transform.multiply(Ae)},A.prototype.transform=function(be,Be,Ae,ht,Nt,zt){if(isNaN(be)||isNaN(Be)||isNaN(Ae)||isNaN(ht)||isNaN(Nt)||isNaN(zt))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Mt=new f(be,Be,Ae,ht,Nt,zt);this.ctx.transform=this.ctx.transform.multiply(Mt)},A.prototype.setTransform=function(be,Be,Ae,ht,Nt,zt){be=isNaN(be)?1:be,Be=isNaN(Be)?0:Be,Ae=isNaN(Ae)?0:Ae,ht=isNaN(ht)?1:ht,Nt=isNaN(Nt)?0:Nt,zt=isNaN(zt)?0:zt,this.ctx.transform=new f(be,Be,Ae,ht,Nt,zt)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(be,Be,Ae,ht,Nt,zt,Mt,Kt,yr){var Er=this.pdf.getImageProperties(be),Jt=1,It=1,Fr=1,Ft=1;ht!==void 0&&Kt!==void 0&&(Fr=Kt/ht,Ft=yr/Nt,Jt=Er.width/ht*Kt/ht,It=Er.height/Nt*yr/Nt),zt===void 0&&(zt=Be,Mt=Ae,Be=0,Ae=0),ht!==void 0&&Kt===void 0&&(Kt=ht,yr=Nt),ht===void 0&&Kt===void 0&&(Kt=Er.width,yr=Er.height);for(var ct,mr=this.ctx.transform.decompose(),Jr=at(mr.rotate.shx),dr=new f,zr=(dr=(dr=(dr=dr.multiply(mr.translate)).multiply(mr.skew)).multiply(mr.scale)).applyToRectangle(new s(zt-Be*Fr,Mt-Ae*Ft,ht*Jt,Nt*It)),ri=$.call(this,zr),Vr=[],_i=0;_i<ri.length;_i+=1)Vr.indexOf(ri[_i])===-1&&Vr.push(ri[_i]);if(ee(Vr),this.autoPaging)for(var Hi=Vr[0],Nr=Vr[Vr.length-1],ji=Hi;ji<Nr+1;ji++){this.pdf.setPage(ji);var Ui=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],an=ji===1?this.posY+this.margin[0]:this.margin[0],Gi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Or=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Br=ji===1?0:Gi+(ji-2)*Or;if(this.ctx.clip_path.length!==0){var Ni=this.path;ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(ct,this.posX+this.margin[3],-Br+an+this.ctx.prevPageLastElemOffset),_e.call(this,"fill",!0),this.path=Ni}var qi=JSON.parse(JSON.stringify(zr));qi=Z([qi],this.posX+this.margin[3],-Br+an+this.ctx.prevPageLastElemOffset)[0];var kt=(ji>Hi||ji<Nr)&&O.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ui,Or,null).clip().discardPath()),this.pdf.addImage(be,"JPEG",qi.x,qi.y,qi.w,qi.h,null,null,Jr),kt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(be,"JPEG",zr.x,zr.y,zr.w,zr.h,null,null,Jr)};var $=function(be,Be,Ae){var ht=[];Be=Be||this.pdf.internal.pageSize.width,Ae=Ae||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Nt=this.posY+this.ctx.prevPageLastElemOffset;switch(be.type){default:case"mt":case"lt":ht.push(Math.floor((be.y+Nt)/Ae)+1);break;case"arc":ht.push(Math.floor((be.y+Nt-be.radius)/Ae)+1),ht.push(Math.floor((be.y+Nt+be.radius)/Ae)+1);break;case"qct":var zt=mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,be.x1,be.y1,be.x,be.y);ht.push(Math.floor((zt.y+Nt)/Ae)+1),ht.push(Math.floor((zt.y+zt.h+Nt)/Ae)+1);break;case"bct":var Mt=Xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,be.x1,be.y1,be.x2,be.y2,be.x,be.y);ht.push(Math.floor((Mt.y+Nt)/Ae)+1),ht.push(Math.floor((Mt.y+Mt.h+Nt)/Ae)+1);break;case"rect":ht.push(Math.floor((be.y+Nt)/Ae)+1),ht.push(Math.floor((be.y+be.h+Nt)/Ae)+1)}for(var Kt=0;Kt<ht.length;Kt+=1)for(;this.pdf.internal.getNumberOfPages()<ht[Kt];)G.call(this);return ht},G=function(){var be=this.fillStyle,Be=this.strokeStyle,Ae=this.font,ht=this.lineCap,Nt=this.lineWidth,zt=this.lineJoin;this.pdf.addPage(),this.fillStyle=be,this.strokeStyle=Be,this.font=Ae,this.lineCap=ht,this.lineWidth=Nt,this.lineJoin=zt},Z=function(be,Be,Ae){for(var ht=0;ht<be.length;ht++)switch(be[ht].type){case"bct":be[ht].x2+=Be,be[ht].y2+=Ae;case"qct":be[ht].x1+=Be,be[ht].y1+=Ae;case"mt":case"lt":case"arc":default:be[ht].x+=Be,be[ht].y+=Ae}return be},ee=function(be){return be.sort(function(Be,Ae){return Be-Ae})},te=function(be,Be){for(var Ae,ht,Nt=this.fillStyle,zt=this.strokeStyle,Mt=this.lineCap,Kt=this.lineWidth,yr=Math.abs(Kt*this.ctx.transform.scaleX),Er=this.lineJoin,Jt=JSON.parse(JSON.stringify(this.path)),It=JSON.parse(JSON.stringify(this.path)),Fr=[],Ft=0;Ft<It.length;Ft++)if(It[Ft].x!==void 0)for(var ct=$.call(this,It[Ft]),mr=0;mr<ct.length;mr+=1)Fr.indexOf(ct[mr])===-1&&Fr.push(ct[mr]);for(var Jr=0;Jr<Fr.length;Jr++)for(;this.pdf.internal.getNumberOfPages()<Fr[Jr];)G.call(this);if(ee(Fr),this.autoPaging)for(var dr=Fr[0],zr=Fr[Fr.length-1],ri=dr;ri<zr+1;ri++){this.pdf.setPage(ri),this.fillStyle=Nt,this.strokeStyle=zt,this.lineCap=Mt,this.lineWidth=yr,this.lineJoin=Er;var Vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_i=ri===1?this.posY+this.margin[0]:this.margin[0],Hi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ji=ri===1?0:Hi+(ri-2)*Nr;if(this.ctx.clip_path.length!==0){var Ui=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(Ae,this.posX+this.margin[3],-ji+_i+this.ctx.prevPageLastElemOffset),_e.call(this,be,!0),this.path=Ui}if(ht=JSON.parse(JSON.stringify(Jt)),this.path=Z(ht,this.posX+this.margin[3],-ji+_i+this.ctx.prevPageLastElemOffset),Be===!1||ri===0){var an=(ri>dr||ri<zr)&&O.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vr,Nr,null).clip().discardPath()),_e.call(this,be,Be),an&&this.pdf.restoreGraphicsState()}this.lineWidth=Kt}else this.lineWidth=yr,_e.call(this,be,Be),this.lineWidth=Kt;this.path=Jt},_e=function(be,Be){if((be!=="stroke"||Be||!N.call(this))&&(be==="stroke"||Be||!C.call(this))){for(var Ae,ht,Nt=[],zt=this.path,Mt=0;Mt<zt.length;Mt++){var Kt=zt[Mt];switch(Kt.type){case"begin":Nt.push({begin:!0});break;case"close":Nt.push({close:!0});break;case"mt":Nt.push({start:Kt,deltas:[],abs:[]});break;case"lt":var yr=Nt.length;if(zt[Mt-1]&&!isNaN(zt[Mt-1].x)&&(Ae=[Kt.x-zt[Mt-1].x,Kt.y-zt[Mt-1].y],yr>0)){for(;yr>=0;yr--)if(Nt[yr-1].close!==!0&&Nt[yr-1].begin!==!0){Nt[yr-1].deltas.push(Ae),Nt[yr-1].abs.push(Kt);break}}break;case"bct":Ae=[Kt.x1-zt[Mt-1].x,Kt.y1-zt[Mt-1].y,Kt.x2-zt[Mt-1].x,Kt.y2-zt[Mt-1].y,Kt.x-zt[Mt-1].x,Kt.y-zt[Mt-1].y],Nt[Nt.length-1].deltas.push(Ae);break;case"qct":var Er=zt[Mt-1].x+2/3*(Kt.x1-zt[Mt-1].x),Jt=zt[Mt-1].y+2/3*(Kt.y1-zt[Mt-1].y),It=Kt.x+2/3*(Kt.x1-Kt.x),Fr=Kt.y+2/3*(Kt.y1-Kt.y),Ft=Kt.x,ct=Kt.y;Ae=[Er-zt[Mt-1].x,Jt-zt[Mt-1].y,It-zt[Mt-1].x,Fr-zt[Mt-1].y,Ft-zt[Mt-1].x,ct-zt[Mt-1].y],Nt[Nt.length-1].deltas.push(Ae);break;case"arc":Nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(Nt[Nt.length-1].abs)&&Nt[Nt.length-1].abs.push(Kt)}}ht=Be?null:be==="stroke"?"stroke":"fill";for(var mr=!1,Jr=0;Jr<Nt.length;Jr++)if(Nt[Jr].arc)for(var dr=Nt[Jr].abs,zr=0;zr<dr.length;zr++){var ri=dr[zr];ri.type==="arc"?ue.call(this,ri.x,ri.y,ri.radius,ri.startAngle,ri.endAngle,ri.counterclockwise,void 0,Be,!mr):qe.call(this,ri.x,ri.y),mr=!0}else if(Nt[Jr].close===!0)this.pdf.internal.out("h"),mr=!1;else if(Nt[Jr].begin!==!0){var Vr=Nt[Jr].start.x,_i=Nt[Jr].start.y;it.call(this,Nt[Jr].deltas,Vr,_i),mr=!0}ht&&ze.call(this,ht),Be&&Ue.call(this)}},le=function(be){var Be=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ae=Be*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return be-Ae;case"top":return be+Be-Ae;case"hanging":return be+Be-2*Ae;case"middle":return be+Be/2-Ae;case"ideographic":return be;case"alphabetic":default:return be}},we=function(be){return be+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var be=function(){};return be.colorStops=[],be.addColorStop=function(Be,Ae){this.colorStops.push([Be,Ae])},be.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},be.isCanvasGradient=!0,be},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ue=function(be,Be,Ae,ht,Nt,zt,Mt,Kt,yr){for(var Er=yt.call(this,Ae,ht,Nt,zt),Jt=0;Jt<Er.length;Jt++){var It=Er[Jt];Jt===0&&(yr?Ce.call(this,It.x1+be,It.y1+Be):qe.call(this,It.x1+be,It.y1+Be)),xt.call(this,be,Be,It.x2,It.y2,It.x3,It.y3,It.x4,It.y4)}Kt?Ue.call(this):ze.call(this,Mt)},ze=function(be){switch(be){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ue=function(){this.pdf.clip(),this.pdf.discardPath()},Ce=function(be,Be){this.pdf.internal.out(r(be)+" "+i(Be)+" m")},Me=function(be){var Be;switch(be.align){case"right":case"end":Be="right";break;case"center":Be="center";break;case"left":case"start":default:Be="left"}var Ae=this.pdf.getTextDimensions(be.text),ht=le.call(this,be.y),Nt=we.call(this,ht)-Ae.h,zt=this.ctx.transform.applyToPoint(new c(be.x,ht)),Mt=this.ctx.transform.decompose(),Kt=new f;Kt=(Kt=(Kt=Kt.multiply(Mt.translate)).multiply(Mt.skew)).multiply(Mt.scale);for(var yr,Er,Jt,It=this.ctx.transform.applyToRectangle(new s(be.x,ht,Ae.w,Ae.h)),Fr=Kt.applyToRectangle(new s(be.x,Nt,Ae.w,Ae.h)),Ft=$.call(this,Fr),ct=[],mr=0;mr<Ft.length;mr+=1)ct.indexOf(Ft[mr])===-1&&ct.push(Ft[mr]);if(ee(ct),this.autoPaging)for(var Jr=ct[0],dr=ct[ct.length-1],zr=Jr;zr<dr+1;zr++){this.pdf.setPage(zr);var ri=zr===1?this.posY+this.margin[0]:this.margin[0],Vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_i=this.pdf.internal.pageSize.height-this.margin[2],Hi=_i-this.margin[0],Nr=this.pdf.internal.pageSize.width-this.margin[1],ji=Nr-this.margin[3],Ui=zr===1?0:Vr+(zr-2)*Hi;if(this.ctx.clip_path.length!==0){var an=this.path;yr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(yr,this.posX+this.margin[3],-1*Ui+ri),_e.call(this,"fill",!0),this.path=an}var Gi=Z([JSON.parse(JSON.stringify(Fr))],this.posX+this.margin[3],-Ui+ri+this.ctx.prevPageLastElemOffset)[0];be.scale>=.01&&(Er=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Er*be.scale),Jt=this.lineWidth,this.lineWidth=Jt*be.scale);var Or=this.autoPaging!=="text";if(Or||Gi.y+Gi.h<=_i){if(Or||Gi.y>=ri&&Gi.x<=Nr){var Br=Or?be.text:this.pdf.splitTextToSize(be.text,be.maxWidth||Nr-Gi.x)[0],Ni=Z([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-Ui+ri+this.ctx.prevPageLastElemOffset)[0],qi=Or&&(zr>Jr||zr<dr)&&O.call(this);qi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ji,Hi,null).clip().discardPath()),this.pdf.text(Br,Ni.x,Ni.y,{angle:be.angle,align:Be,renderingMode:be.renderingMode}),qi&&this.pdf.restoreGraphicsState()}}else Gi.y<_i&&(this.ctx.prevPageLastElemOffset+=_i-Gi.y);be.scale>=.01&&(this.pdf.setFontSize(Er),this.lineWidth=Jt)}else be.scale>=.01&&(Er=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Er*be.scale),Jt=this.lineWidth,this.lineWidth=Jt*be.scale),this.pdf.text(be.text,zt.x+this.posX,zt.y+this.posY,{angle:be.angle,align:Be,renderingMode:be.renderingMode,maxWidth:be.maxWidth}),be.scale>=.01&&(this.pdf.setFontSize(Er),this.lineWidth=Jt)},qe=function(be,Be,Ae,ht){Ae=Ae||0,ht=ht||0,this.pdf.internal.out(r(be+Ae)+" "+i(Be+ht)+" l")},it=function(be,Be,Ae){return this.pdf.lines(be,Be,Ae,null,null)},xt=function(be,Be,Ae,ht,Nt,zt,Mt,Kt){this.pdf.internal.out([e(o(Ae+be)),e(u(ht+Be)),e(o(Nt+be)),e(u(zt+Be)),e(o(Mt+be)),e(u(Kt+Be)),"c"].join(" "))},yt=function(be,Be,Ae,ht){for(var Nt=2*Math.PI,zt=Math.PI/2;Be>Ae;)Be-=Nt;var Mt=Math.abs(Ae-Be);Mt<Nt&&ht&&(Mt=Nt-Mt);for(var Kt=[],yr=ht?-1:1,Er=Be;Mt>1e-5;){var Jt=Er+yr*Math.min(Mt,zt);Kt.push($e.call(this,be,Er,Jt)),Mt-=Math.abs(Jt-Er),Er=Jt}return Kt},$e=function(be,Be,Ae){var ht=(Ae-Be)/2,Nt=be*Math.cos(ht),zt=be*Math.sin(ht),Mt=Nt,Kt=-zt,yr=Mt*Mt+Kt*Kt,Er=yr+Mt*Nt+Kt*zt,Jt=4/3*(Math.sqrt(2*yr*Er)-Er)/(Mt*zt-Kt*Nt),It=Mt-Jt*Kt,Fr=Kt+Jt*Mt,Ft=It,ct=-Fr,mr=ht+Be,Jr=Math.cos(mr),dr=Math.sin(mr);return{x1:be*Math.cos(Be),y1:be*Math.sin(Be),x2:It*Jr-Fr*dr,y2:It*dr+Fr*Jr,x3:Ft*Jr-ct*dr,y3:Ft*dr+ct*Jr,x4:be*Math.cos(Ae),y4:be*Math.sin(Ae)}},at=function(be){return 180*be/Math.PI},mt=function(be,Be,Ae,ht,Nt,zt){var Mt=be+.5*(Ae-be),Kt=Be+.5*(ht-Be),yr=Nt+.5*(Ae-Nt),Er=zt+.5*(ht-zt),Jt=Math.min(be,Nt,Mt,yr),It=Math.max(be,Nt,Mt,yr),Fr=Math.min(Be,zt,Kt,Er),Ft=Math.max(Be,zt,Kt,Er);return new s(Jt,Fr,It-Jt,Ft-Fr)},Xe=function(be,Be,Ae,ht,Nt,zt,Mt,Kt){var yr,Er,Jt,It,Fr,Ft,ct,mr,Jr,dr,zr,ri,Vr,_i,Hi=Ae-be,Nr=ht-Be,ji=Nt-Ae,Ui=zt-ht,an=Mt-Nt,Gi=Kt-zt;for(Er=0;Er<41;Er++)Jr=(ct=(Jt=be+(yr=Er/40)*Hi)+yr*((Fr=Ae+yr*ji)-Jt))+yr*(Fr+yr*(Nt+yr*an-Fr)-ct),dr=(mr=(It=Be+yr*Nr)+yr*((Ft=ht+yr*Ui)-It))+yr*(Ft+yr*(zt+yr*Gi-Ft)-mr),Er==0?(zr=Jr,ri=dr,Vr=Jr,_i=dr):(zr=Math.min(zr,Jr),ri=Math.min(ri,dr),Vr=Math.max(Vr,Jr),_i=Math.max(_i,dr));return new s(Math.round(zr),Math.round(ri),Math.round(Vr-zr),Math.round(_i-ri))},wt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var be,Be,Ae=(be=this.ctx.lineDash,Be=this.ctx.lineDashOffset,JSON.stringify({lineDash:be,lineDashOffset:Be}));this.prevLineDash!==Ae&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ae)}}})(Bn.API),function(t){var e=function(u){var c,s,f,y,b,A,I,C,N,O;for(s=[],f=0,y=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;y>f;f+=4)(b=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(A=(b=((b=((b=((b=(b-(O=b%85))/85)-(N=b%85))/85)-(C=b%85))/85)-(I=b%85))/85)%85,s.push(A+33,I+33,C+33,N+33,O+33)):s.push(122);return function($,G){for(var Z=G;Z>0;Z--)$.pop()}(s,c.length),String.fromCharCode.apply(String,s)+"~>"},r=function(u){var c,s,f,y,b,A=String,I="length",C=255,N="charCodeAt",O="slice",$="replace";for(u[O](-2),u=u[O](0,-2)[$](/\s/g,"")[$]("z","!!!!!"),f=[],y=0,b=(u+=c="uuuuu"[O](u[I]%5||5))[I];b>y;y+=5)s=52200625*(u[N](y)-33)+614125*(u[N](y+1)-33)+7225*(u[N](y+2)-33)+85*(u[N](y+3)-33)+(u[N](y+4)-33),f.push(C&s>>24,C&s>>16,C&s>>8,C&s);return function(G,Z){for(var ee=Z;ee>0;ee--)G.pop()}(f,c[I]),A.fromCharCode.apply(A,f)},i=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var s="",f=0;f<u.length;f+=2)s+=String.fromCharCode("0x"+(u[f]+u[f+1]));return s},o=function(u){for(var c=new Uint8Array(u.length),s=u.length;s--;)c[s]=u.charCodeAt(s);return u=(c=my(c)).reduce(function(f,y){return f+String.fromCharCode(y)},"")};t.processDataByFilters=function(u,c){var s=0,f=u||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),s=0;s<c.length;s+=1)switch(c[s]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[s]+'" is not implemented')}return{data:f,reverseChain:y.reverse().join(" ")}}}(Bn.API),function(t){t.loadFile=function(e,r,i){return function(o,u,c){u=u!==!1,c=typeof c=="function"?c:function(){};var s=void 0;try{s=function(f,y,b){var A=new XMLHttpRequest,I=0,C=function(N){var O=N.length,$=[],G=String.fromCharCode;for(I=0;I<O;I+=1)$.push(G(255&N.charCodeAt(I)));return $.join("")};if(A.open("GET",f,!y),A.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(A.onload=function(){A.status===200?b(C(this.responseText)):b(void 0)}),A.send(null),y&&A.status===200)return C(A.responseText)}(o,u,c)}catch{}return s}(e,r,i)},t.loadImageFile=t.loadFile}(Bn.API),function(t){function e(){return(jn.html2canvas?Promise.resolve(jn.html2canvas):Ip(()=>import("./html2canvas.esm.e0a7d97b.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(jn.DOMPurify?Promise.resolve(jn.DOMPurify):Ip(()=>import("./purify.es.cf254a40.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var i=function(c){var s=aa(c);return s==="undefined"?"undefined":s==="string"||c instanceof String?"string":s==="number"||c instanceof Number?"number":s==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":s==="object"?"object":"unknown"},o=function(c,s){var f=document.createElement(c);for(var y in s.className&&(f.className=s.className),s.innerHTML&&s.dompurify&&(f.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)f.style[y]=s.style[y];return f},u=function c(s){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),f);return y=(y=y.setProgress(1,c,1,[c])).set(s)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,s){return c.__proto__=s||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,s){return this.then(function(){switch(s=s||function(f){switch(i(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(f){return this.set({src:o("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function f(y,b){for(var A=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),I=y.firstChild;I;I=I.nextSibling)b!==!0&&I.nodeType===1&&I.nodeName==="SCRIPT"||A.appendChild(f(I,b));return y.nodeType===1&&(y.nodeName==="CANVAS"?(A.width=y.width,A.height=y.height,A.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(A.value=y.value),A.addEventListener("load",function(){A.scrollTop=y.scrollTop,A.scrollLeft=y.scrollLeft},!0)),A}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(s){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,s(this.prop.container,f)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(s){var f=this.opt.jsPDF,y=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=y,y)for(var I=0;I<y.length;++I){var C=y[I],N=C.src.find(function(O){return O.format==="truetype"});N&&f.addFont(N.url,C.ref.name,C.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,f.context2d.save(!0),s(this.prop.container,A)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,s,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,s):this.outputPdf(c,s)},u.prototype.outputPdf=function(c,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,s)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(i(c)!=="object")return this;var s=Object.keys(c||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(s)})},u.prototype.get=function(c,s){return this.then(function(){var f=c in u.template.prop?this.prop[c]:this.opt[c];return s?s(f):f})},u.prototype.setMargin=function(c){return this.then(function(){switch(i(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function s(f,y){return Math.floor(f*y/72*96)}return this.then(function(){(c=c||Bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:s(c.inner.width,c.k),height:s(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,s,f,y){return c!=null&&(this.progress.val=c),s!=null&&(this.progress.state=s),f!=null&&(this.progress.n=f),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,s,f,y){return this.setProgress(c?this.progress.val+c:null,s||null,f?this.progress.n+f:null,y?this.progress.stack.concat(y):null)},u.prototype.then=function(c,s){var f=this;return this.thenCore(c,s,function(y,b){return f.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(A){return f.updateProgress(null,y),A}).then(y,b).then(function(A){return f.updateProgress(1),A})})},u.prototype.thenCore=function(c,s,f){f=f||Promise.prototype.then,c&&(c=c.bind(this)),s&&(s=s.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),b=f.call(y,c,s);return u.convert(b,this.__proto__)},u.prototype.thenExternal=function(c,s){return Promise.prototype.then.call(this,c,s)},u.prototype.thenList=function(c){var s=this;return c.forEach(function(f){s=s.thenCore(f)}),s},u.prototype.catch=function(c){c&&(c=c.bind(this));var s=Promise.prototype.catch.call(this,c);return u.convert(s,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Bn.getPageSize=function(c,s,f){if(aa(c)==="object"){var y=c;c=y.orientation,s=y.unit||s,f=y.format||f}s=s||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var b,A=(""+f).toLowerCase(),I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+s}var C,N=0,O=0;if(I.hasOwnProperty(A))N=I[A][1]/b,O=I[A][0]/b;else try{N=f[1],O=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",O>N&&(C=O,O=N,N=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>O&&(C=O,O=N,N=C)}return{width:O,height:N,unit:s,k:b,orientation:c}},t.html=function(c,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(wy):null;var f=new u(s);return s.worker?f:f.from(c).doCallback()}}(Bn.API),Bn.API.addJS=function(t){return Yb=t,this.internal.events.subscribe("postPutResources",function(){z1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(z1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Xb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Yb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){z1!==void 0&&Xb!==void 0&&this.internal.out("/Names <</JavaScript "+z1+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),u=0;u<o.length;u++){var c=o[u],s=i.exec(c);if(s!=null){var f=s[1];r.internal.newObjectDeferredBegin(f,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,b=[];for(u=0;u<y;u++){var A=r.internal.newObject();b.push(A);var I=r.internal.getPageInfo(u+1);r.internal.write("<< /D["+I.objId+" 0 R /XYZ null null null]>> endobj")}var C=r.internal.newObject();for(r.internal.write("<< /Names [ "),u=0;u<b.length;u++)r.internal.write("(page_"+(u+1)+")"+b[u]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+C+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,o,u){var c={title:o,options:u,children:[]};return i==null&&(i=this.root),i.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<i.children.length;u++){var c=i.children[u];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(i)),u>0&&this.line("/Prev "+this.makeRef(i.children[u-1])),u<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[u+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var s=this.count=this.count_r({count:0},c);if(s>0&&this.line("/Count "+s),c.options&&c.options.pageNumber){var f=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var y=0;y<i.children.length;y++)this.renderItems(i.children[y])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,o){for(var u=0;u<o.children.length;u++)i.count++,this.count_r(i,o.children[u]);return i.count}}])}(Bn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,i,o,u,c,s){var f,y=this.decode.DCT_DECODE,b=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(f=function(A){for(var I,C=256*A.charCodeAt(4)+A.charCodeAt(5),N=A.length,O={width:0,height:0,numcomponents:1},$=4;$<N;$+=2){if($+=C,e.indexOf(A.charCodeAt($+1))!==-1){I=256*A.charCodeAt($+5)+A.charCodeAt($+6),O={width:256*A.charCodeAt($+7)+A.charCodeAt($+8),height:I,numcomponents:A.charCodeAt($+9)};break}C=256*A.charCodeAt($+2)+A.charCodeAt($+3)}return O}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}b={data:r,width:f.width,height:f.height,colorSpace:s,bitsPerComponent:8,filter:y,index:i,alias:o}}return b}}(Bn.API);var Zh,N1,Kb,Jb,Qb,pE=function(){var t,e,r;function i(u){var c,s,f,y,b,A,I,C,N,O,$,G,Z,ee;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},A=null;;){switch(c=this.readUInt32(),N=(function(){var te,_e;for(_e=[],te=0;te<4;++te)_e.push(String.fromCharCode(this.data[this.pos++]));return _e}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":A&&this.animation.frames.push(A),this.pos+=4,A={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),y=this.readUInt16()||100,A.delay=1e3*b/y,A.disposeOp=this.data[this.pos++],A.blendOp=this.data[this.pos++],A.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,c-=4),u=(A!=null?A.data:void 0)||this.imgData,G=0;0<=c?G<c:G>c;0<=c?++G:--G)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((O=f-this.transparency.indexed.length)>0)for(Z=0;0<=O?Z<O:Z>O;0<=O?++Z:--Z)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":I=($=this.read(c)).indexOf(0),C=String.fromCharCode.apply(String,$.slice(0,I)),this.text[C]=String.fromCharCode.apply(String,$.slice(I+1));break;case"IEND":return A&&this.animation.frames.push(A),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ee=this.colorType)===4||ee===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(u){var c,s;for(s=[],c=0;0<=u?c<u:c>u;0<=u?++c:--c)s.push(this.data[this.pos++]);return s},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(u){var c=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*c),f=0,y=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function b(A,I,C,N){var O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt,yt,$e,at,mt,Xe=Math.ceil((y.width-A)/C),wt=Math.ceil((y.height-I)/N),be=y.width==Xe&&y.height==wt;for(Me=c*Xe,Ue=be?s:new Uint8Array(Me*wt),te=u.length,Ce=0,$=0;Ce<wt&&f<te;){switch(u[f++]){case 0:for(Z=xt=0;xt<Me;Z=xt+=1)Ue[$++]=u[f++];break;case 1:for(Z=yt=0;yt<Me;Z=yt+=1)O=u[f++],ee=Z<c?0:Ue[$-c],Ue[$++]=(O+ee)%256;break;case 2:for(Z=$e=0;$e<Me;Z=$e+=1)O=u[f++],G=(Z-Z%c)/c,qe=Ce&&Ue[(Ce-1)*Me+G*c+Z%c],Ue[$++]=(qe+O)%256;break;case 3:for(Z=at=0;at<Me;Z=at+=1)O=u[f++],G=(Z-Z%c)/c,ee=Z<c?0:Ue[$-c],qe=Ce&&Ue[(Ce-1)*Me+G*c+Z%c],Ue[$++]=(O+Math.floor((ee+qe)/2))%256;break;case 4:for(Z=mt=0;mt<Me;Z=mt+=1)O=u[f++],G=(Z-Z%c)/c,ee=Z<c?0:Ue[$-c],Ce===0?qe=it=0:(qe=Ue[(Ce-1)*Me+G*c+Z%c],it=G&&Ue[(Ce-1)*Me+(G-1)*c+Z%c]),_e=ee+qe-it,le=Math.abs(_e-ee),ue=Math.abs(_e-qe),ze=Math.abs(_e-it),we=le<=ue&&le<=ze?ee:ue<=ze?qe:it,Ue[$++]=(O+we)%256;break;default:throw new Error("Invalid filter algorithm: "+u[f-1])}if(!be){var Be=((I+Ce*N)*y.width+A)*c,Ae=Ce*Me;for(Z=0;Z<Xe;Z+=1){for(var ht=0;ht<c;ht+=1)s[Be++]=Ue[Ae++];Be+=(C-1)*c}}Ce++}}return u=ZS(u),y.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),s},i.prototype.decodePalette=function(){var u,c,s,f,y,b,A,I,C;for(s=this.palette,b=this.transparency.indexed||[],y=new Uint8Array((b.length||0)+s.length),f=0,u=0,c=A=0,I=s.length;A<I;c=A+=3)y[f++]=s[c],y[f++]=s[c+1],y[f++]=s[c+2],y[f++]=(C=b[u++])!=null?C:255;return y},i.prototype.copyToImageData=function(u,c){var s,f,y,b,A,I,C,N,O,$,G;if(f=this.colors,O=null,s=this.hasAlphaChannel,this.palette.length&&(O=(G=this._decodedPalette)!=null?G:this._decodedPalette=this.decodePalette(),f=4,s=!0),N=(y=u.data||u).length,A=O||c,b=I=0,f===1)for(;b<N;)C=O?4*c[b/4]:I,$=A[C++],y[b++]=$,y[b++]=$,y[b++]=$,y[b++]=s?A[C++]:255,I=C;else for(;b<N;)C=O?4*c[b/4]:I,y[b++]=A[C++],y[b++]=A[C++],y[b++]=A[C++],y[b++]=s?A[C++]:255,I=C},i.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var o=function(){if(Object.prototype.toString.call(jn)==="[object Window]"){try{e=jn.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(u){var c;if(o()===!0)return r.width=u.width,r.height=u.height,r.clearRect(0,0,u.width,u.height),r.putImageData(u,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(u){var c,s,f,y,b,A,I,C;if(this.animation){for(C=[],s=b=0,A=(I=this.animation.frames).length;b<A;s=++b)c=I[s],f=u.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(f,y),c.imageData=f,C.push(c.image=t(f));return C}},i.prototype.renderFrame=function(u,c){var s,f,y;return s=(f=this.animation.frames)[c],y=f[c-1],c===0&&u.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?u.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&u.putImageData(y.imageData,y.xOffset,y.yOffset),s.blendOp===0&&u.clearRect(s.xOffset,s.yOffset,s.width,s.height),u.drawImage(s.image,s.xOffset,s.yOffset)},i.prototype.animate=function(u){var c,s,f,y,b,A,I=this;return s=0,A=this.animation,y=A.numFrames,f=A.frames,b=A.numPlays,(c=function(){var C,N;if(C=s++%y,N=f[C],I.renderFrame(u,C),y>1&&s/y<b)return I.animation._timeout=setTimeout(c,N.delay)})()},i.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},i.prototype.render=function(u){var c,s;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,c=u.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(s=c.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),c.putImageData(s,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function mE(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,o=t[e++],u=o>>7,c=1<<(7&o)+1;t[e++],t[e++];var s=null,f=null;u&&(s=e,f=c,e+=3*c);var y=!0,b=[],A=0,I=null,C=0,N=null;for(this.width=r,this.height=i;y&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Ce=t[e++])>=0))throw Error("Invalid block size");if(Ce===0)break;e+=Ce}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var O=t[e++];A=t[e++]|t[e++]<<8,I=t[e++],!(1&O)&&(I=null),C=O>>2&7,e++;break;case 254:for(;;){if(!((Ce=t[e++])>=0))throw Error("Invalid block size");if(Ce===0)break;e+=Ce}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var $=t[e++]|t[e++]<<8,G=t[e++]|t[e++]<<8,Z=t[e++]|t[e++]<<8,ee=t[e++]|t[e++]<<8,te=t[e++],_e=te>>6&1,le=1<<(7&te)+1,we=s,ue=f,ze=!1;te>>7&&(ze=!0,we=e,ue=le,e+=3*le);var Ue=e;for(e++;;){var Ce;if(!((Ce=t[e++])>=0))throw Error("Invalid block size");if(Ce===0)break;e+=Ce}b.push({x:$,y:G,width:Z,height:ee,has_local_palette:ze,palette_offset:we,palette_size:ue,data_offset:Ue,data_length:e-Ue,transparent_index:I,interlaced:!!_e,delay:A,disposal:C});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return N},this.frameInfo=function(Me){if(Me<0||Me>=b.length)throw new Error("Frame index out of range.");return b[Me]},this.decodeAndBlitFrameBGRA=function(Me,qe){var it=this.frameInfo(Me),xt=it.width*it.height,yt=new Uint8Array(xt);e5(t,it.data_offset,yt,xt);var $e=it.palette_offset,at=it.transparent_index;at===null&&(at=256);var mt=it.width,Xe=r-mt,wt=mt,be=4*(it.y*r+it.x),Be=4*((it.y+it.height)*r+it.x),Ae=be,ht=4*Xe;it.interlaced===!0&&(ht+=4*r*7);for(var Nt=8,zt=0,Mt=yt.length;zt<Mt;++zt){var Kt=yt[zt];if(wt===0&&(wt=mt,(Ae+=ht)>=Be&&(ht=4*Xe+4*r*(Nt-1),Ae=be+(mt+Xe)*(Nt<<1),Nt>>=1)),Kt===at)Ae+=4;else{var yr=t[$e+3*Kt],Er=t[$e+3*Kt+1],Jt=t[$e+3*Kt+2];qe[Ae++]=Jt,qe[Ae++]=Er,qe[Ae++]=yr,qe[Ae++]=255}--wt}},this.decodeAndBlitFrameRGBA=function(Me,qe){var it=this.frameInfo(Me),xt=it.width*it.height,yt=new Uint8Array(xt);e5(t,it.data_offset,yt,xt);var $e=it.palette_offset,at=it.transparent_index;at===null&&(at=256);var mt=it.width,Xe=r-mt,wt=mt,be=4*(it.y*r+it.x),Be=4*((it.y+it.height)*r+it.x),Ae=be,ht=4*Xe;it.interlaced===!0&&(ht+=4*r*7);for(var Nt=8,zt=0,Mt=yt.length;zt<Mt;++zt){var Kt=yt[zt];if(wt===0&&(wt=mt,(Ae+=ht)>=Be&&(ht=4*Xe+4*r*(Nt-1),Ae=be+(mt+Xe)*(Nt<<1),Nt>>=1)),Kt===at)Ae+=4;else{var yr=t[$e+3*Kt],Er=t[$e+3*Kt+1],Jt=t[$e+3*Kt+2];qe[Ae++]=yr,qe[Ae++]=Er,qe[Ae++]=Jt,qe[Ae++]=255}--wt}}}function e5(t,e,r,i){for(var o=t[e++],u=1<<o,c=u+1,s=c+1,f=o+1,y=(1<<f)-1,b=0,A=0,I=0,C=t[e++],N=new Int32Array(4096),O=null;;){for(;b<16&&C!==0;)A|=t[e++]<<b,b+=8,C===1?C=t[e++]:--C;if(b<f)break;var $=A&y;if(A>>=f,b-=f,$!==u){if($===c)break;for(var G=$<s?$:O,Z=0,ee=G;ee>u;)ee=N[ee]>>8,++Z;var te=ee;if(I+Z+(G!==$?1:0)>i)return void _a.log("Warning, gif stream longer than expected.");r[I++]=te;var _e=I+=Z;for(G!==$&&(r[I++]=te),ee=G;Z--;)ee=N[ee],r[--_e]=255&ee,ee>>=8;O!==null&&s<4096&&(N[s++]=O<<8|te,s>=y+1&&f<12&&(++f,y=y<<1|1)),O=$}else s=c+1,y=(1<<(f=o+1))-1,O=null}return I!==i&&_a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Xm(t){var e,r,i,o,u,c=Math.floor,s=new Array(64),f=new Array(64),y=new Array(64),b=new Array(64),A=new Array(65535),I=new Array(65535),C=new Array(64),N=new Array(64),O=[],$=0,G=7,Z=new Array(64),ee=new Array(64),te=new Array(64),_e=new Array(256),le=new Array(2048),we=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ue=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ze=[0,1,2,3,4,5,6,7,8,9,10,11],Ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Ce=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Me=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],qe=[0,1,2,3,4,5,6,7,8,9,10,11],it=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],xt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function yt(be,Be){for(var Ae=0,ht=0,Nt=new Array,zt=1;zt<=16;zt++){for(var Mt=1;Mt<=be[zt];Mt++)Nt[Be[ht]]=[],Nt[Be[ht]][0]=Ae,Nt[Be[ht]][1]=zt,ht++,Ae++;Ae*=2}return Nt}function $e(be){for(var Be=be[0],Ae=be[1]-1;Ae>=0;)Be&1<<Ae&&($|=1<<G),Ae--,--G<0&&($==255?(at(255),at(0)):at($),G=7,$=0)}function at(be){O.push(be)}function mt(be){at(be>>8&255),at(255&be)}function Xe(be,Be,Ae,ht,Nt){for(var zt,Mt=Nt[0],Kt=Nt[240],yr=function(dr,zr){var ri,Vr,_i,Hi,Nr,ji,Ui,an,Gi,Or,Br=0;for(Gi=0;Gi<8;++Gi){ri=dr[Br],Vr=dr[Br+1],_i=dr[Br+2],Hi=dr[Br+3],Nr=dr[Br+4],ji=dr[Br+5],Ui=dr[Br+6];var Ni=ri+(an=dr[Br+7]),qi=ri-an,kt=Vr+Ui,fr=Vr-Ui,Qr=_i+ji,Ei=_i-ji,ki=Hi+Nr,Zn=Hi-Nr,un=Ni+ki,Rn=Ni-ki,Xn=kt+Qr,so=kt-Qr;dr[Br]=un+Xn,dr[Br+4]=un-Xn;var on=.707106781*(so+Rn);dr[Br+2]=Rn+on,dr[Br+6]=Rn-on;var gt=.382683433*((un=Zn+Ei)-(so=fr+qi)),Ne=.5411961*un+gt,Fe=1.306562965*so+gt,lt=.707106781*(Xn=Ei+fr),Lt=qi+lt,ft=qi-lt;dr[Br+5]=ft+Ne,dr[Br+3]=ft-Ne,dr[Br+1]=Lt+Fe,dr[Br+7]=Lt-Fe,Br+=8}for(Br=0,Gi=0;Gi<8;++Gi){ri=dr[Br],Vr=dr[Br+8],_i=dr[Br+16],Hi=dr[Br+24],Nr=dr[Br+32],ji=dr[Br+40],Ui=dr[Br+48];var pe=ri+(an=dr[Br+56]),Qt=ri-an,Vt=Vr+Ui,lr=Vr-Ui,pt=_i+ji,jr=_i-ji,$r=Hi+Nr,$i=Hi-Nr,Qi=pe+$r,Ci=pe-$r,Et=Vt+pt,en=Vt-pt;dr[Br]=Qi+Et,dr[Br+32]=Qi-Et;var Sn=.707106781*(en+Ci);dr[Br+16]=Ci+Sn,dr[Br+48]=Ci-Sn;var Vn=.382683433*((Qi=$i+jr)-(en=lr+Qt)),En=.5411961*Qi+Vn,On=1.306562965*en+Vn,sa=.707106781*(Et=jr+lr),tn=Qt+sa,Bo=Qt-sa;dr[Br+40]=Bo+En,dr[Br+24]=Bo-En,dr[Br+8]=tn+On,dr[Br+56]=tn-On,Br++}for(Gi=0;Gi<64;++Gi)Or=dr[Gi]*zr[Gi],C[Gi]=Or>0?Or+.5|0:Or-.5|0;return C}(be,Be),Er=0;Er<64;++Er)N[we[Er]]=yr[Er];var Jt=N[0]-Ae;Ae=N[0],Jt==0?$e(ht[0]):($e(ht[I[zt=32767+Jt]]),$e(A[zt]));for(var It=63;It>0&&N[It]==0;)It--;if(It==0)return $e(Mt),Ae;for(var Fr,Ft=1;Ft<=It;){for(var ct=Ft;N[Ft]==0&&Ft<=It;)++Ft;var mr=Ft-ct;if(mr>=16){Fr=mr>>4;for(var Jr=1;Jr<=Fr;++Jr)$e(Kt);mr&=15}zt=32767+N[Ft],$e(Nt[(mr<<4)+I[zt]]),$e(A[zt]),Ft++}return It!=63&&$e(Mt),Ae}function wt(be){be=Math.min(Math.max(be,1),100),u!=be&&(function(Be){for(var Ae=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ht=0;ht<64;ht++){var Nt=c((Ae[ht]*Be+50)/100);Nt=Math.min(Math.max(Nt,1),255),s[we[ht]]=Nt}for(var zt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Mt=0;Mt<64;Mt++){var Kt=c((zt[Mt]*Be+50)/100);Kt=Math.min(Math.max(Kt,1),255),f[we[Mt]]=Kt}for(var yr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Er=0,Jt=0;Jt<8;Jt++)for(var It=0;It<8;It++)y[Er]=1/(s[we[Er]]*yr[Jt]*yr[It]*8),b[Er]=1/(f[we[Er]]*yr[Jt]*yr[It]*8),Er++}(be<50?Math.floor(5e3/be):Math.floor(200-2*be)),u=be)}this.encode=function(be,Be){Be&&wt(Be),O=new Array,$=0,G=7,mt(65496),mt(65504),mt(16),at(74),at(70),at(73),at(70),at(0),at(1),at(1),at(0),mt(1),mt(1),at(0),at(0),function(){mt(65499),mt(132),at(0);for(var Vr=0;Vr<64;Vr++)at(s[Vr]);at(1);for(var _i=0;_i<64;_i++)at(f[_i])}(),function(Vr,_i){mt(65472),mt(17),at(8),mt(_i),mt(Vr),at(3),at(1),at(17),at(0),at(2),at(17),at(1),at(3),at(17),at(1)}(be.width,be.height),function(){mt(65476),mt(418),at(0);for(var Vr=0;Vr<16;Vr++)at(ue[Vr+1]);for(var _i=0;_i<=11;_i++)at(ze[_i]);at(16);for(var Hi=0;Hi<16;Hi++)at(Ue[Hi+1]);for(var Nr=0;Nr<=161;Nr++)at(Ce[Nr]);at(1);for(var ji=0;ji<16;ji++)at(Me[ji+1]);for(var Ui=0;Ui<=11;Ui++)at(qe[Ui]);at(17);for(var an=0;an<16;an++)at(it[an+1]);for(var Gi=0;Gi<=161;Gi++)at(xt[Gi])}(),mt(65498),mt(12),at(3),at(1),at(0),at(2),at(17),at(3),at(17),at(0),at(63),at(0);var Ae=0,ht=0,Nt=0;$=0,G=7,this.encode.displayName="_encode_";for(var zt,Mt,Kt,yr,Er,Jt,It,Fr,Ft,ct=be.data,mr=be.width,Jr=be.height,dr=4*mr,zr=0;zr<Jr;){for(zt=0;zt<dr;){for(Er=dr*zr+zt,It=-1,Fr=0,Ft=0;Ft<64;Ft++)Jt=Er+(Fr=Ft>>3)*dr+(It=4*(7&Ft)),zr+Fr>=Jr&&(Jt-=dr*(zr+1+Fr-Jr)),zt+It>=dr&&(Jt-=zt+It-dr+4),Mt=ct[Jt++],Kt=ct[Jt++],yr=ct[Jt++],Z[Ft]=(le[Mt]+le[Kt+256>>0]+le[yr+512>>0]>>16)-128,ee[Ft]=(le[Mt+768>>0]+le[Kt+1024>>0]+le[yr+1280>>0]>>16)-128,te[Ft]=(le[Mt+1280>>0]+le[Kt+1536>>0]+le[yr+1792>>0]>>16)-128;Ae=Xe(Z,y,Ae,e,i),ht=Xe(ee,b,ht,r,o),Nt=Xe(te,b,Nt,r,o),zt+=32}zr+=8}if(G>=0){var ri=[];ri[1]=G+1,ri[0]=(1<<G+1)-1,$e(ri)}return mt(65497),new Uint8Array(O)},t=t||50,function(){for(var be=String.fromCharCode,Be=0;Be<256;Be++)_e[Be]=be(Be)}(),e=yt(ue,ze),r=yt(Me,qe),i=yt(Ue,Ce),o=yt(it,xt),function(){for(var be=1,Be=2,Ae=1;Ae<=15;Ae++){for(var ht=be;ht<Be;ht++)I[32767+ht]=Ae,A[32767+ht]=[],A[32767+ht][1]=Ae,A[32767+ht][0]=ht;for(var Nt=-(Be-1);Nt<=-be;Nt++)I[32767+Nt]=Ae,A[32767+Nt]=[],A[32767+Nt][1]=Ae,A[32767+Nt][0]=Be-1+Nt;be<<=1,Be<<=1}}(),function(){for(var be=0;be<256;be++)le[be]=19595*be,le[be+256>>0]=38470*be,le[be+512>>0]=7471*be+32768,le[be+768>>0]=-11059*be,le[be+1024>>0]=-21709*be,le[be+1280>>0]=32768*be+8421375,le[be+1536>>0]=-27439*be,le[be+1792>>0]=-5329*be}(),wt(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function I0(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function t5(t){function e(ue){if(!ue)throw Error("assert :P")}function r(ue,ze,Ue){for(var Ce=0;4>Ce;Ce++)if(ue[ze+Ce]!=Ue.charCodeAt(Ce))return!0;return!1}function i(ue,ze,Ue,Ce,Me){for(var qe=0;qe<Me;qe++)ue[ze+qe]=Ue[Ce+qe]}function o(ue,ze,Ue,Ce){for(var Me=0;Me<Ce;Me++)ue[ze+Me]=Ue}function u(ue){return new Int32Array(ue)}function c(ue,ze){for(var Ue=[],Ce=0;Ce<ue;Ce++)Ue.push(new ze);return Ue}function s(ue,ze){var Ue=[];return function Ce(Me,qe,it){for(var xt=it[qe],yt=0;yt<xt&&(Me.push(it.length>qe+1?[]:new ze),!(it.length<qe+1));yt++)Ce(Me[yt],qe+1,it)}(Ue,0,ue),Ue}var f=function(){var ue=this;function ze(T,B){for(var W=1<<B-1>>>0;T&W;)W>>>=1;return W?(T&W-1)+W:T}function Ue(T,B,W,Q,de){e(!(Q%W));do T[B+(Q-=W)]=de;while(0<Q)}function Ce(T,B,W,Q,de){if(e(2328>=de),512>=de)var ke=u(512);else if((ke=u(de))==null)return 0;return function(fe,Se,De,je,ut,Dt){var Tt,Ct,br=Se,kr=1<<De,_t=u(16),jt=u(16);for(e(ut!=0),e(je!=null),e(fe!=null),e(0<De),Ct=0;Ct<ut;++Ct){if(15<je[Ct])return 0;++_t[je[Ct]]}if(_t[0]==ut)return 0;for(jt[1]=0,Tt=1;15>Tt;++Tt){if(_t[Tt]>1<<Tt)return 0;jt[Tt+1]=jt[Tt]+_t[Tt]}for(Ct=0;Ct<ut;++Ct)Tt=je[Ct],0<je[Ct]&&(Dt[jt[Tt]++]=Ct);if(jt[15]==1)return(je=new Me).g=0,je.value=Dt[0],Ue(fe,br,1,kr,je),kr;var hr,Ur=-1,Pr=kr-1,qr=0,Xr=1,zi=1,ii=1<<De;for(Ct=0,Tt=1,ut=2;Tt<=De;++Tt,ut<<=1){if(Xr+=zi<<=1,0>(zi-=_t[Tt]))return 0;for(;0<_t[Tt];--_t[Tt])(je=new Me).g=Tt,je.value=Dt[Ct++],Ue(fe,br+qr,ut,ii,je),qr=ze(qr,Tt)}for(Tt=De+1,ut=2;15>=Tt;++Tt,ut<<=1){if(Xr+=zi<<=1,0>(zi-=_t[Tt]))return 0;for(;0<_t[Tt];--_t[Tt]){if(je=new Me,(qr&Pr)!=Ur){for(br+=ii,hr=1<<(Ur=Tt)-De;15>Ur&&!(0>=(hr-=_t[Ur]));)++Ur,hr<<=1;kr+=ii=1<<(hr=Ur-De),fe[Se+(Ur=qr&Pr)].g=hr+De,fe[Se+Ur].value=br-Se-Ur}je.g=Tt-De,je.value=Dt[Ct++],Ue(fe,br+(qr>>De),ut,ii,je),qr=ze(qr,Tt)}}return Xr!=2*jt[15]-1?0:kr}(T,B,W,Q,de,ke)}function Me(){this.value=this.g=0}function qe(){this.value=this.g=0}function it(){this.G=c(5,Me),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(ao,qe)}function xt(T,B,W,Q){e(T!=null),e(B!=null),e(2147483648>Q),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=B,T.pa=W,T.Jd=B,T.Yc=W+Q,T.Zc=4<=Q?W+Q-4+1:W,zt(T)}function yt(T,B){for(var W=0;0<B--;)W|=Kt(T,128)<<B;return W}function $e(T,B){var W=yt(T,B);return Mt(T)?-W:W}function at(T,B,W,Q){var de,ke=0;for(e(T!=null),e(B!=null),e(4294967288>Q),T.Sb=Q,T.Ra=0,T.u=0,T.h=0,4<Q&&(Q=4),de=0;de<Q;++de)ke+=B[W+de]<<8*de;T.Ra=ke,T.bb=Q,T.oa=B,T.pa=W}function mt(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<Pl-8>>>0,++T.bb,T.u-=8;Ae(T)&&(T.h=1,T.u=0)}function Xe(T,B){if(e(0<=B),!T.h&&B<=va){var W=Be(T)&ks[B];return T.u+=B,mt(T),W}return T.h=1,T.u=0}function wt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function be(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Be(T){return T.Ra>>>(T.u&Pl-1)>>>0}function Ae(T){return e(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>Pl}function ht(T,B){T.u=B,T.h=Ae(T)}function Nt(T){T.u>=ol&&(e(T.u>=ol),mt(T))}function zt(T){e(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(e(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function Mt(T){return yt(T,1)}function Kt(T,B){var W=T.Ca;0>T.b&&zt(T);var Q=T.b,de=W*B>>>8,ke=(T.I>>>Q>de)+0;for(ke?(W-=de,T.I-=de+1<<Q>>>0):W=de+1,Q=W,de=0;256<=Q;)de+=8,Q>>=8;return Q=7^de+Ea[Q],T.b-=Q,T.Ca=(W<<Q)-1,ke}function yr(T,B,W){T[B+0]=W>>24&255,T[B+1]=W>>16&255,T[B+2]=W>>8&255,T[B+3]=W>>0&255}function Er(T,B){return T[B+0]<<0|T[B+1]<<8}function Jt(T,B){return Er(T,B)|T[B+2]<<16}function It(T,B){return Er(T,B)|Er(T,B+2)<<16}function Fr(T,B){var W=1<<B;return e(T!=null),e(0<B),T.X=u(W),T.X==null?0:(T.Mb=32-B,T.Xa=B,1)}function Ft(T,B){e(T!=null),e(B!=null),e(T.Xa==B.Xa),i(B.X,0,T.X,0,1<<B.Xa)}function ct(){this.X=[],this.Xa=this.Mb=0}function mr(T,B,W,Q){e(W!=null),e(Q!=null);var de=W[0],ke=Q[0];return de==0&&(de=(T*ke+B/2)/B),ke==0&&(ke=(B*de+T/2)/T),0>=de||0>=ke?0:(W[0]=de,Q[0]=ke,1)}function Jr(T,B){return T+(1<<B)-1>>>B}function dr(T,B){return((4278255360&T)+(4278255360&B)>>>0&4278255360)+((16711935&T)+(16711935&B)>>>0&16711935)>>>0}function zr(T,B){ue[B]=function(W,Q,de,ke,fe,Se,De){var je;for(je=0;je<fe;++je){var ut=ue[T](Se[De+je-1],de,ke+je);Se[De+je]=dr(W[Q+je],ut)}}}function ri(){this.ud=this.hd=this.jd=0}function Vr(T,B){return((4278124286&(T^B))>>>1)+(T&B)>>>0}function _i(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Hi(T,B){return _i(T+(T-B+.5>>1))}function Nr(T,B,W){return Math.abs(B-W)-Math.abs(T-W)}function ji(T,B,W,Q,de,ke,fe){for(Q=ke[fe-1],W=0;W<de;++W)ke[fe+W]=Q=dr(T[B+W],Q)}function Ui(T,B,W,Q,de){var ke;for(ke=0;ke<W;++ke){var fe=T[B+ke],Se=fe>>8&255,De=16711935&(De=(De=16711935&fe)+((Se<<16)+Se));Q[de+ke]=(4278255360&fe)+De>>>0}}function an(T,B){B.jd=T>>0&255,B.hd=T>>8&255,B.ud=T>>16&255}function Gi(T,B,W,Q,de,ke){var fe;for(fe=0;fe<Q;++fe){var Se=B[W+fe],De=Se>>>8,je=Se,ut=255&(ut=(ut=Se>>>16)+((T.jd<<24>>24)*(De<<24>>24)>>>5));je=255&(je=(je=je+((T.hd<<24>>24)*(De<<24>>24)>>>5))+((T.ud<<24>>24)*(ut<<24>>24)>>>5)),de[ke+fe]=(4278255360&Se)+(ut<<16)+je}}function Or(T,B,W,Q,de){ue[B]=function(ke,fe,Se,De,je,ut,Dt,Tt,Ct){for(De=Dt;De<Tt;++De)for(Dt=0;Dt<Ct;++Dt)je[ut++]=de(Se[Q(ke[fe++])])},ue[T]=function(ke,fe,Se,De,je,ut,Dt){var Tt=8>>ke.b,Ct=ke.Ea,br=ke.K[0],kr=ke.w;if(8>Tt)for(ke=(1<<ke.b)-1,kr=(1<<Tt)-1;fe<Se;++fe){var _t,jt=0;for(_t=0;_t<Ct;++_t)_t&ke||(jt=Q(De[je++])),ut[Dt++]=de(br[jt&kr]),jt>>=Tt}else ue["VP8LMapColor"+W](De,je,br,kr,ut,Dt,fe,Se,Ct)}}function Br(T,B,W,Q,de){for(W=B+W;B<W;){var ke=T[B++];Q[de++]=ke>>16&255,Q[de++]=ke>>8&255,Q[de++]=ke>>0&255}}function Ni(T,B,W,Q,de){for(W=B+W;B<W;){var ke=T[B++];Q[de++]=ke>>16&255,Q[de++]=ke>>8&255,Q[de++]=ke>>0&255,Q[de++]=ke>>24&255}}function qi(T,B,W,Q,de){for(W=B+W;B<W;){var ke=(fe=T[B++])>>16&240|fe>>12&15,fe=fe>>0&240|fe>>28&15;Q[de++]=ke,Q[de++]=fe}}function kt(T,B,W,Q,de){for(W=B+W;B<W;){var ke=(fe=T[B++])>>16&248|fe>>13&7,fe=fe>>5&224|fe>>3&31;Q[de++]=ke,Q[de++]=fe}}function fr(T,B,W,Q,de){for(W=B+W;B<W;){var ke=T[B++];Q[de++]=ke>>0&255,Q[de++]=ke>>8&255,Q[de++]=ke>>16&255}}function Qr(T,B,W,Q,de,ke){if(ke==0)for(W=B+W;B<W;)yr(Q,((ke=T[B++])[0]>>24|ke[1]>>8&65280|ke[2]<<8&16711680|ke[3]<<24)>>>0),de+=32;else i(Q,de,T,B,W)}function Ei(T,B){ue[B][0]=ue[T+"0"],ue[B][1]=ue[T+"1"],ue[B][2]=ue[T+"2"],ue[B][3]=ue[T+"3"],ue[B][4]=ue[T+"4"],ue[B][5]=ue[T+"5"],ue[B][6]=ue[T+"6"],ue[B][7]=ue[T+"7"],ue[B][8]=ue[T+"8"],ue[B][9]=ue[T+"9"],ue[B][10]=ue[T+"10"],ue[B][11]=ue[T+"11"],ue[B][12]=ue[T+"12"],ue[B][13]=ue[T+"13"],ue[B][14]=ue[T+"0"],ue[B][15]=ue[T+"0"]}function ki(T){return T==Kc||T==ca||T==To||T==Qu}function Zn(){this.eb=[],this.size=this.A=this.fb=0}function un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zn,this.f.kb=new un,this.sd=null}function Xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function so(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function on(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function gt(T,B){var W=T.T,Q=B.ba.f.RGBA,de=Q.eb,ke=Q.fb+T.ka*Q.A,fe=Fa[B.ba.S],Se=T.y,De=T.O,je=T.f,ut=T.N,Dt=T.ea,Tt=T.W,Ct=B.cc,br=B.dc,kr=B.Mc,_t=B.Nc,jt=T.ka,hr=T.ka+T.T,Ur=T.U,Pr=Ur+1>>1;for(jt==0?fe(Se,De,null,null,je,ut,Dt,Tt,je,ut,Dt,Tt,de,ke,null,null,Ur):(fe(B.ec,B.fc,Se,De,Ct,br,kr,_t,je,ut,Dt,Tt,de,ke-Q.A,de,ke,Ur),++W);jt+2<hr;jt+=2)Ct=je,br=ut,kr=Dt,_t=Tt,ut+=T.Rc,Tt+=T.Rc,ke+=2*Q.A,fe(Se,(De+=2*T.fa)-T.fa,Se,De,Ct,br,kr,_t,je,ut,Dt,Tt,de,ke-Q.A,de,ke,Ur);return De+=T.fa,T.j+hr<T.o?(i(B.ec,B.fc,Se,De,Ur),i(B.cc,B.dc,je,ut,Pr),i(B.Mc,B.Nc,Dt,Tt,Pr),W--):1&hr||fe(Se,De,null,null,je,ut,Dt,Tt,je,ut,Dt,Tt,de,ke+Q.A,null,null,Ur),W}function Ne(T,B,W){var Q=T.F,de=[T.J];if(Q!=null){var ke=T.U,fe=B.ba.S,Se=fe==Ju||fe==To;B=B.ba.f.RGBA;var De=[0],je=T.ka;De[0]=T.T,T.Kb&&(je==0?--De[0]:(--je,de[0]-=T.width),T.j+T.ka+T.T==T.o&&(De[0]=T.o-T.j-je));var ut=B.eb;je=B.fb+je*B.A,T=Su(Q,de[0],T.width,ke,De,ut,je+(Se?0:3),B.A),e(W==De),T&&ki(fe)&&Is(ut,je,Se,ke,De,B.A)}return 0}function Fe(T){var B=T.ma,W=B.ba.S,Q=11>W,de=W==La||W==iu||W==Ju||W==$n||W==12||ki(W);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!ku(B.Oa,T,de?11:12))return 0;if(de&&ki(W)&&Wr(),T.da)alert("todo:use_scaling");else{if(Q){if(B.Ib=on,T.Kb){if(W=T.U+1>>1,B.memory=u(T.U+2*W),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+T.U,B.Mc=B.cc,B.Nc=B.dc+W,B.Ib=gt,Wr()}}else alert("todo:EmitYUV");de&&(B.Jb=Ne,Q&&Ar())}if(Q&&!p){for(T=0;256>T;++T)k[T]=89858*(T-128)+Cu>>tc,j[T]=-22014*(T-128)+Cu,z[T]=-45773*(T-128),L[T]=113618*(T-128)+Cu>>tc;for(T=au;T<Dc;++T)B=76283*(T-16)+Cu>>tc,K[T-au]=Sa(B,255),re[T-au]=Sa(B+8>>4,15);p=1}return 1}function lt(T){var B=T.ma,W=T.U,Q=T.T;return e(!(1&T.ka)),0>=W||0>=Q?0:(W=B.Ib(T,B),B.Jb!=null&&B.Jb(T,B,W),B.Dc+=W,1)}function Lt(T){T.ma.memory=null}function ft(T,B,W,Q){return Xe(T,8)!=47?0:(B[0]=Xe(T,14)+1,W[0]=Xe(T,14)+1,Q[0]=Xe(T,1),Xe(T,3)!=0?0:!T.h)}function pe(T,B){if(4>T)return T+1;var W=T-2>>1;return(2+(1&T)<<W)+Xe(B,W)+1}function Qt(T,B){return 120<B?B-120:1<=(W=((W=Ws[B-1])>>4)*T+(8-(15&W)))?W:1;var W}function Vt(T,B,W){var Q=Be(W),de=T[B+=255&Q].g-8;return 0<de&&(ht(W,W.u+8),Q=Be(W),B+=T[B].value,B+=Q&(1<<de)-1),ht(W,W.u+T[B].g),T[B].value}function lr(T,B,W){return W.g+=T.g,W.value+=T.value<<B>>>0,e(8>=W.g),T.g}function pt(T,B,W){var Q=T.xc;return e((B=Q==0?0:T.vc[T.md*(W>>Q)+(B>>Q)])<T.Wb),T.Ya[B]}function jr(T,B,W,Q){var de=T.ab,ke=T.c*B,fe=T.C;B=fe+B;var Se=W,De=Q;for(Q=T.Ta,W=T.Ua;0<de--;){var je=T.gc[de],ut=fe,Dt=B,Tt=Se,Ct=De,br=(De=Q,Se=W,je.Ea);switch(e(ut<Dt),e(Dt<=je.nc),je.hc){case 2:eu(Tt,Ct,(Dt-ut)*br,De,Se);break;case 0:var kr=ut,_t=Dt,jt=De,hr=Se,Ur=(ii=je).Ea;kr==0&&(As(Tt,Ct,null,null,1,jt,hr),ji(Tt,Ct+1,0,0,Ur-1,jt,hr+1),Ct+=Ur,hr+=Ur,++kr);for(var Pr=1<<ii.b,qr=Pr-1,Xr=Jr(Ur,ii.b),zi=ii.K,ii=ii.w+(kr>>ii.b)*Xr;kr<_t;){var Pn=zi,In=ii,hn=1;for(al(Tt,Ct,jt,hr-Ur,1,jt,hr);hn<Ur;){var vn=(hn&~qr)+Pr;vn>Ur&&(vn=Ur),(0,Hs[Pn[In++]>>8&15])(Tt,Ct+ +hn,jt,hr+hn-Ur,vn-hn,jt,hr+hn),hn=vn}Ct+=Ur,hr+=Ur,++kr&qr||(ii+=Xr)}Dt!=je.nc&&i(De,Se-br,De,Se+(Dt-ut-1)*br,br);break;case 1:for(br=Tt,_t=Ct,Ur=(Tt=je.Ea)-(hr=Tt&~(jt=(Ct=1<<je.b)-1)),kr=Jr(Tt,je.b),Pr=je.K,je=je.w+(ut>>je.b)*kr;ut<Dt;){for(qr=Pr,Xr=je,zi=new ri,ii=_t+hr,Pn=_t+Tt;_t<ii;)an(qr[Xr++],zi),ma(zi,br,_t,Ct,De,Se),_t+=Ct,Se+=Ct;_t<Pn&&(an(qr[Xr++],zi),ma(zi,br,_t,Ur,De,Se),_t+=Ur,Se+=Ur),++ut&jt||(je+=kr)}break;case 3:if(Tt==De&&Ct==Se&&0<je.b){for(_t=De,Tt=br=Se+(Dt-ut)*br-(hr=(Dt-ut)*Jr(je.Ea,je.b)),Ct=De,jt=Se,kr=[],hr=(Ur=hr)-1;0<=hr;--hr)kr[hr]=Ct[jt+hr];for(hr=Ur-1;0<=hr;--hr)_t[Tt+hr]=kr[hr];Ka(je,ut,Dt,De,br,De,Se)}else Ka(je,ut,Dt,Tt,Ct,De,Se)}Se=Q,De=W}De!=W&&i(Q,W,Se,De,ke)}function $r(T,B){var W=T.V,Q=T.Ba+T.c*T.C,de=B-T.C;if(e(B<=T.l.o),e(16>=de),0<de){var ke=T.l,fe=T.Ta,Se=T.Ua,De=ke.width;if(jr(T,de,W,Q),de=Se=[Se],e((W=T.C)<(Q=B)),e(ke.v<ke.va),Q>ke.o&&(Q=ke.o),W<ke.j){var je=ke.j-W;W=ke.j,de[0]+=je*De}if(W>=Q?W=0:(de[0]+=4*ke.v,ke.ka=W-ke.j,ke.U=ke.va-ke.v,ke.T=Q-W,W=1),W){if(Se=Se[0],11>(W=T.ca).S){var ut=W.f.RGBA,Dt=(Q=W.S,de=ke.U,ke=ke.T,je=ut.eb,ut.A),Tt=ke;for(ut=ut.fb+T.Ma*ut.A;0<Tt--;){var Ct=fe,br=Se,kr=de,_t=je,jt=ut;switch(Q){case Ku:Ss(Ct,br,kr,_t,jt);break;case La:Es(Ct,br,kr,_t,jt);break;case Kc:Es(Ct,br,kr,_t,jt),Is(_t,jt,0,kr,1,0);break;case ll:Ml(Ct,br,kr,_t,jt);break;case iu:Qr(Ct,br,kr,_t,jt,1);break;case ca:Qr(Ct,br,kr,_t,jt,1),Is(_t,jt,0,kr,1,0);break;case Ju:Qr(Ct,br,kr,_t,jt,0);break;case To:Qr(Ct,br,kr,_t,jt,0),Is(_t,jt,1,kr,1,0);break;case $n:fs(Ct,br,kr,_t,jt);break;case Qu:fs(Ct,br,kr,_t,jt),yi(_t,jt,kr,1,0);break;case Yc:hs(Ct,br,kr,_t,jt);break;default:e(0)}Se+=De,ut+=Dt}T.Ma+=ke}else alert("todo:EmitRescaledRowsYUVA");e(T.Ma<=W.height)}}T.C=B,e(T.C<=T.i)}function $i(T){var B;if(0<T.ua)return 0;for(B=0;B<T.Wb;++B){var W=T.Ya[B].G,Q=T.Ya[B].H;if(0<W[1][Q[1]+0].g||0<W[2][Q[2]+0].g||0<W[3][Q[3]+0].g)return 0}return 1}function Qi(T,B,W,Q,de,ke){if(T.Z!=0){var fe=T.qd,Se=T.rd;for(e(Oa[T.Z]!=null);B<W;++B)Oa[T.Z](fe,Se,Q,de,Q,de,ke),fe=Q,Se=de,de+=ke;T.qd=fe,T.rd=Se}}function Ci(T,B){var W=T.l.ma,Q=W.Z==0||W.Z==1?T.l.j:T.C;if(Q=T.C<Q?Q:T.C,e(B<=T.l.o),B>Q){var de=T.l.width,ke=W.ca,fe=W.tb+de*Q,Se=T.V,De=T.Ba+T.c*Q,je=T.gc;e(T.ab==1),e(je[0].hc==3),ru(je[0],Q,B,Se,De,ke,fe),Qi(W,Q,B,ke,fe,de)}T.C=T.Ma=B}function Et(T,B,W,Q,de,ke,fe){var Se=T.$/Q,De=T.$%Q,je=T.m,ut=T.s,Dt=W+T.$,Tt=Dt;de=W+Q*de;var Ct=W+Q*ke,br=280+ut.ua,kr=T.Pb?Se:16777216,_t=0<ut.ua?ut.Wa:null,jt=ut.wc,hr=Dt<Ct?pt(ut,De,Se):null;e(T.C<ke),e(Ct<=de);var Ur=!1;e:for(;;){for(;Ur||Dt<Ct;){var Pr=0;if(Se>=kr){var qr=Dt-W;e((kr=T).Pb),kr.wd=kr.m,kr.xd=qr,0<kr.s.ua&&Ft(kr.s.Wa,kr.s.vb),kr=Se+Ii}if(De&jt||(hr=pt(ut,De,Se)),e(hr!=null),hr.Qb&&(B[Dt]=hr.qb,Ur=!0),!Ur)if(Nt(je),hr.jc){Pr=je,qr=B;var Xr=Dt,zi=hr.pd[Be(Pr)&ao-1];e(hr.jc),256>zi.g?(ht(Pr,Pr.u+zi.g),qr[Xr]=zi.value,Pr=0):(ht(Pr,Pr.u+zi.g-256),e(256<=zi.value),Pr=zi.value),Pr==0&&(Ur=!0)}else Pr=Vt(hr.G[0],hr.H[0],je);if(je.h)break;if(Ur||256>Pr){if(!Ur)if(hr.nd)B[Dt]=(hr.qb|Pr<<8)>>>0;else{if(Nt(je),Ur=Vt(hr.G[1],hr.H[1],je),Nt(je),qr=Vt(hr.G[2],hr.H[2],je),Xr=Vt(hr.G[3],hr.H[3],je),je.h)break;B[Dt]=(Xr<<24|Ur<<16|Pr<<8|qr)>>>0}if(Ur=!1,++Dt,++De>=Q&&(De=0,++Se,fe!=null&&Se<=ke&&!(Se%16)&&fe(T,Se),_t!=null))for(;Tt<Dt;)Pr=B[Tt++],_t.X[(506832829*Pr&4294967295)>>>_t.Mb]=Pr}else if(280>Pr){if(Pr=pe(Pr-256,je),qr=Vt(hr.G[4],hr.H[4],je),Nt(je),qr=Qt(Q,qr=pe(qr,je)),je.h)break;if(Dt-W<qr||de-Dt<Pr)break e;for(Xr=0;Xr<Pr;++Xr)B[Dt+Xr]=B[Dt+Xr-qr];for(Dt+=Pr,De+=Pr;De>=Q;)De-=Q,++Se,fe!=null&&Se<=ke&&!(Se%16)&&fe(T,Se);if(e(Dt<=de),De&jt&&(hr=pt(ut,De,Se)),_t!=null)for(;Tt<Dt;)Pr=B[Tt++],_t.X[(506832829*Pr&4294967295)>>>_t.Mb]=Pr}else{if(!(Pr<br))break e;for(Ur=Pr-280,e(_t!=null);Tt<Dt;)Pr=B[Tt++],_t.X[(506832829*Pr&4294967295)>>>_t.Mb]=Pr;Pr=Dt,e(!(Ur>>>(qr=_t).Xa)),B[Pr]=qr.X[Ur],Ur=!0}Ur||e(je.h==Ae(je))}if(T.Pb&&je.h&&Dt<de)e(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Ft(T.s.vb,T.s.Wa);else{if(je.h)break e;fe!=null&&fe(T,Se>ke?ke:Se),T.a=0,T.$=Dt-W}return 1}return T.a=3,0}function en(T){e(T!=null),T.vc=null,T.yc=null,T.Ya=null;var B=T.Wa;B!=null&&(B.X=null),T.vb=null,e(T!=null)}function Sn(){var T=new rl;return T==null?null:(T.a=0,T.xb=ou,Ei("Predictor","VP8LPredictors"),Ei("Predictor","VP8LPredictors_C"),Ei("PredictorAdd","VP8LPredictorsAdd"),Ei("PredictorAdd","VP8LPredictorsAdd_C"),eu=Ui,ma=Gi,Ss=Br,Es=Ni,fs=qi,hs=kt,Ml=fr,ue.VP8LMapColor32b=tu,ue.VP8LMapColor8b=Zu,T)}function Vn(T,B,W,Q,de){var ke=1,fe=[T],Se=[B],De=Q.m,je=Q.s,ut=null,Dt=0;e:for(;;){if(W)for(;ke&&Xe(De,1);){var Tt=fe,Ct=Se,br=Q,kr=1,_t=br.m,jt=br.gc[br.ab],hr=Xe(_t,2);if(br.Oc&1<<hr)ke=0;else{switch(br.Oc|=1<<hr,jt.hc=hr,jt.Ea=Tt[0],jt.nc=Ct[0],jt.K=[null],++br.ab,e(4>=br.ab),hr){case 0:case 1:jt.b=Xe(_t,3)+2,kr=Vn(Jr(jt.Ea,jt.b),Jr(jt.nc,jt.b),0,br,jt.K),jt.K=jt.K[0];break;case 3:var Ur,Pr=Xe(_t,8)+1,qr=16<Pr?0:4<Pr?1:2<Pr?2:3;if(Tt[0]=Jr(jt.Ea,qr),jt.b=qr,Ur=kr=Vn(Pr,1,0,br,jt.K)){var Xr,zi=Pr,ii=jt,Pn=1<<(8>>ii.b),In=u(Pn);if(In==null)Ur=0;else{var hn=ii.K[0],vn=ii.w;for(In[0]=ii.K[0][0],Xr=1;Xr<1*zi;++Xr)In[Xr]=dr(hn[vn+Xr],In[Xr-1]);for(;Xr<4*Pn;++Xr)In[Xr]=0;ii.K[0]=null,ii.K[0]=In,Ur=1}}kr=Ur;break;case 2:break;default:e(0)}ke=kr}}if(fe=fe[0],Se=Se[0],ke&&Xe(De,1)&&!(ke=1<=(Dt=Xe(De,4))&&11>=Dt)){Q.a=3;break e}var Jn;if(Jn=ke)t:{var Gn,bn,Vo,mn=Q,Eo=fe,uo=Se,Cn=Dt,Po=W,ba=mn.m,Qn=mn.s,zn=[null],yo=1,eo=0,wa=Eu[Cn];r:for(;;){if(Po&&Xe(ba,1)){var Co=Xe(ba,3)+2,Ba=Jr(Eo,Co),Nl=Jr(uo,Co),ms=Ba*Nl;if(!Vn(Ba,Nl,0,mn,zn))break r;for(zn=zn[0],Qn.xc=Co,Gn=0;Gn<ms;++Gn){var cl=zn[Gn]>>8&65535;zn[Gn]=cl,cl>=yo&&(yo=cl+1)}}if(ba.h)break r;for(bn=0;5>bn;++bn){var Io=Ic[bn];!bn&&0<Cn&&(Io+=1<<Cn),eo<Io&&(eo=Io)}var Ho=c(yo*wa,Me),rc=yo,Ls=c(rc,it);if(Ls==null)var co=null;else e(65536>=rc),co=Ls;var Ts=u(eo);if(co==null||Ts==null||Ho==null){mn.a=1;break r}var Rl=Ho;for(Gn=Vo=0;Gn<yo;++Gn){var Ps=co[Gn],Ms=Ps.G,Iu=Ps.H,j0=0,U0=1,_0=0;for(bn=0;5>bn;++bn){Io=Ic[bn],Ms[bn]=Rl,Iu[bn]=Vo,!bn&&0<Cn&&(Io+=1<<Cn);i:{var q0,Qc=Io,ic=mn,zc=Ts,e0=Rl,hf=Vo,ia=0,Ol=ic.m,Nc=Xe(Ol,1);if(o(zc,0,0,Qc),Nc){var Lu=Xe(Ol,1)+1,V0=Xe(Ol,1),df=Xe(Ol,V0==0?1:8);zc[df]=1,Lu==2&&(zc[df=Xe(Ol,8)]=1);var Ta=1}else{var Qo=u(19),H0=Xe(Ol,4)+4;if(19<H0){ic.a=3;var me=0;break i}for(q0=0;q0<H0;++q0)Qo[ff[q0]]=Xe(Ol,3);var Le=void 0,Ye=void 0,At=ic,sr=Qo,cr=Qc,tr=zc,Cr=0,Ir=At.m,Zr=8,ni=c(128,Me);o:for(;Ce(ni,0,7,sr,19);){if(Xe(Ir,1)){var Ri=2+2*Xe(Ir,3);if((Le=2+Xe(Ir,Ri))>cr)break o}else Le=cr;for(Ye=0;Ye<cr&&Le--;){Nt(Ir);var oi=ni[0+(127&Be(Ir))];ht(Ir,Ir.u+oi.g);var Si=oi.value;if(16>Si)tr[Ye++]=Si,Si!=0&&(Zr=Si);else{var Zi=Si==16,Wn=Si-16,to=ul[Wn],fo=Xe(Ir,Gs[Wn])+to;if(Ye+fo>cr)break o;for(var Lo=Zi?Zr:0;0<fo--;)tr[Ye++]=Lo}}Cr=1;break o}Cr||(At.a=3),Ta=Cr}(Ta=Ta&&!Ol.h)&&(ia=Ce(e0,hf,8,zc,Qc)),Ta&&ia!=0?me=ia:(ic.a=3,me=0)}if(me==0)break r;if(U0&&B0[bn]==1&&(U0=Rl[Vo].g==0),j0+=Rl[Vo].g,Vo+=me,3>=bn){var ga,xa=Ts[0];for(ga=1;ga<Io;++ga)Ts[ga]>xa&&(xa=Ts[ga]);_0+=xa}}if(Ps.nd=U0,Ps.Qb=0,U0&&(Ps.qb=(Ms[3][Iu[3]+0].value<<24|Ms[1][Iu[1]+0].value<<16|Ms[2][Iu[2]+0].value)>>>0,j0==0&&256>Ms[0][Iu[0]+0].value&&(Ps.Qb=1,Ps.qb+=Ms[0][Iu[0]+0].value<<8)),Ps.jc=!Ps.Qb&&6>_0,Ps.jc){var Mo,Ln=Ps;for(Mo=0;Mo<ao;++Mo){var ai=Mo,Yi=Ln.pd[ai],Mn=Ln.G[0][Ln.H[0]+ai];256<=Mn.value?(Yi.g=Mn.g+256,Yi.value=Mn.value):(Yi.g=0,Yi.value=0,ai>>=lr(Mn,8,Yi),ai>>=lr(Ln.G[1][Ln.H[1]+ai],16,Yi),ai>>=lr(Ln.G[2][Ln.H[2]+ai],0,Yi),lr(Ln.G[3][Ln.H[3]+ai],24,Yi))}}}Qn.vc=zn,Qn.Wb=yo,Qn.Ya=co,Qn.yc=Ho,Jn=1;break t}Jn=0}if(!(ke=Jn)){Q.a=3;break e}if(0<Dt){if(je.ua=1<<Dt,!Fr(je.Wa,Dt)){Q.a=1,ke=0;break e}}else je.ua=0;var qn=Q,ja=fe,No=Se,ro=qn.s,ko=ro.xc;if(qn.c=ja,qn.i=No,ro.md=Jr(ja,ko),ro.wc=ko==0?-1:(1<<ko)-1,W){Q.xb=Tc;break e}if((ut=u(fe*Se))==null){Q.a=1,ke=0;break e}ke=(ke=Et(Q,ut,0,fe,Se,Se,null))&&!De.h;break e}return ke?(de!=null?de[0]=ut:(e(ut==null),e(W)),Q.$=0,W||en(je)):en(je),ke}function En(T,B){var W=T.c*T.i,Q=W+B+16*B;return e(T.c<=B),T.V=u(Q),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+W+B,1)}function On(T,B){var W=T.C,Q=B-W,de=T.V,ke=T.Ba+T.c*W;for(e(B<=T.l.o);0<Q;){var fe=16<Q?16:Q,Se=T.l.ma,De=T.l.width,je=De*fe,ut=Se.ca,Dt=Se.tb+De*W,Tt=T.Ta,Ct=T.Ua;jr(T,fe,de,ke),m0(Tt,Ct,ut,Dt,je),Qi(Se,W,W+fe,ut,Dt,De),Q-=fe,de+=fe*T.c,W+=fe}e(W==B),T.C=T.Ma=B}function sa(){this.ub=this.yd=this.td=this.Rb=0}function tn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Bo(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function fn(){this.Yb=function(){var T=[];return function B(W,Q,de){for(var ke=de[Q],fe=0;fe<ke&&(W.push(de.length>Q+1?[]:0),!(de.length<Q+1));fe++)B(W[fe],Q+1,de)}(T,0,[3,11]),T}()}function Ko(){this.jb=u(3),this.Wc=s([4,8],fn),this.Xc=s([4,17],fn)}function Xa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function qu(){this.ld=this.La=this.dd=this.tc=0}function pa(){this.Na=this.la=0}function ts(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vu(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gl(){this.uc=this.M=this.Nb=0,this.wa=Array(new qu),this.Y=0,this.ya=Array(new Vu),this.aa=0,this.l=new Aa}function Ao(){this.y=u(16),this.f=u(8),this.ea=u(8)}function Ya(){this.cb=this.a=0,this.sc="",this.m=new wt,this.Od=new sa,this.Kc=new tn,this.ed=new Xa,this.Qa=new Bo,this.Ic=this.$c=this.Aa=0,this.D=new Gl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,wt),this.ia=0,this.pb=c(4,ts),this.Pa=new Ko,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ao),this.Hd=0,this.rb=Array(new pa),this.sb=0,this.wa=Array(new qu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vu),this.L=this.aa=0,this.gd=s([4,2],qu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Aa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jo(){var T=new Ya;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Qa||(Qa=Ma)),T}function Go(T,B,W){return T.a==0&&(T.a=B,T.sc=W,T.cb=0),0}function la(T,B,W){return 3<=W&&T[B+0]==157&&T[B+1]==1&&T[B+2]==42}function Js(T,B){if(T==null)return 0;if(T.a=0,T.sc="OK",B==null)return Go(T,2,"null VP8Io passed to VP8GetHeaders()");var W=B.data,Q=B.w,de=B.ha;if(4>de)return Go(T,7,"Truncated header.");var ke=W[Q+0]|W[Q+1]<<8|W[Q+2]<<16,fe=T.Od;if(fe.Rb=!(1&ke),fe.td=ke>>1&7,fe.yd=ke>>4&1,fe.ub=ke>>5,3<fe.td)return Go(T,3,"Incorrect keyframe parameters.");if(!fe.yd)return Go(T,4,"Frame not displayable.");Q+=3,de-=3;var Se=T.Kc;if(fe.Rb){if(7>de)return Go(T,7,"cannot parse picture header");if(!la(W,Q,de))return Go(T,3,"Bad code word");Se.c=16383&(W[Q+4]<<8|W[Q+3]),Se.Td=W[Q+4]>>6,Se.i=16383&(W[Q+6]<<8|W[Q+5]),Se.Ud=W[Q+6]>>6,Q+=7,de-=7,T.za=Se.c+15>>4,T.Ub=Se.i+15>>4,B.width=Se.c,B.height=Se.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,o((ke=T.Pa).jb,0,255,ke.jb.length),e((ke=T.Qa)!=null),ke.Cb=0,ke.Bb=0,ke.Fb=1,o(ke.Zb,0,0,ke.Zb.length),o(ke.Lb,0,0,ke.Lb)}if(fe.ub>de)return Go(T,7,"bad partition length");xt(ke=T.m,W,Q,fe.ub),Q+=fe.ub,de-=fe.ub,fe.Rb&&(Se.Ld=Mt(ke),Se.Kd=Mt(ke)),Se=T.Qa;var De,je=T.Pa;if(e(ke!=null),e(Se!=null),Se.Cb=Mt(ke),Se.Cb){if(Se.Bb=Mt(ke),Mt(ke)){for(Se.Fb=Mt(ke),De=0;4>De;++De)Se.Zb[De]=Mt(ke)?$e(ke,7):0;for(De=0;4>De;++De)Se.Lb[De]=Mt(ke)?$e(ke,6):0}if(Se.Bb)for(De=0;3>De;++De)je.jb[De]=Mt(ke)?yt(ke,8):255}else Se.Bb=0;if(ke.Ka)return Go(T,3,"cannot parse segment header");if((Se=T.ed).zd=Mt(ke),Se.Tb=yt(ke,6),Se.wb=yt(ke,3),Se.Pc=Mt(ke),Se.Pc&&Mt(ke)){for(je=0;4>je;++je)Mt(ke)&&(Se.vd[je]=$e(ke,6));for(je=0;4>je;++je)Mt(ke)&&(Se.od[je]=$e(ke,6))}if(T.L=Se.Tb==0?0:Se.zd?1:2,ke.Ka)return Go(T,3,"cannot parse filter header");var ut=de;if(de=De=Q,Q=De+ut,Se=ut,T.Xb=(1<<yt(T.m,2))-1,ut<3*(je=T.Xb))W=7;else{for(De+=3*je,Se-=3*je,ut=0;ut<je;++ut){var Dt=W[de+0]|W[de+1]<<8|W[de+2]<<16;Dt>Se&&(Dt=Se),xt(T.Jc[+ut],W,De,Dt),De+=Dt,Se-=Dt,de+=3}xt(T.Jc[+je],W,De,Se),W=De<Q?0:5}if(W!=0)return Go(T,W,"cannot parse partitions");for(W=yt(De=T.m,7),de=Mt(De)?$e(De,4):0,Q=Mt(De)?$e(De,4):0,Se=Mt(De)?$e(De,4):0,je=Mt(De)?$e(De,4):0,De=Mt(De)?$e(De,4):0,ut=T.Qa,Dt=0;4>Dt;++Dt){if(ut.Cb){var Tt=ut.Zb[Dt];ut.Fb||(Tt+=W)}else{if(0<Dt){T.pb[Dt]=T.pb[0];continue}Tt=W}var Ct=T.pb[Dt];Ct.Sc[0]=rn[Sa(Tt+de,127)],Ct.Sc[1]=Ra[Sa(Tt+0,127)],Ct.Eb[0]=2*rn[Sa(Tt+Q,127)],Ct.Eb[1]=101581*Ra[Sa(Tt+Se,127)]>>16,8>Ct.Eb[1]&&(Ct.Eb[1]=8),Ct.Qc[0]=rn[Sa(Tt+je,117)],Ct.Qc[1]=Ra[Sa(Tt+De,127)],Ct.lc=Tt+De}if(!fe.Rb)return Go(T,4,"Not a key frame.");for(Mt(ke),fe=T.Pa,W=0;4>W;++W){for(de=0;8>de;++de)for(Q=0;3>Q;++Q)for(Se=0;11>Se;++Se)je=Kt(ke,Lc[W][de][Q][Se])?yt(ke,8):Zs[W][de][Q][Se],fe.Wc[W][de].Yb[Q][Se]=je;for(de=0;17>de;++de)fe.Xc[W][de]=fe.Wc[W][qo[de]]}return T.kc=Mt(ke),T.kc&&(T.Bd=yt(ke,8)),T.cb=1}function Ma(T,B,W,Q,de,ke,fe){var Se=B[de].Yb[W];for(W=0;16>de;++de){if(!Kt(T,Se[W+0]))return de;for(;!Kt(T,Se[W+1]);)if(Se=B[++de].Yb[0],W=0,de==16)return 16;var De=B[de+1].Yb;if(Kt(T,Se[W+2])){var je=T,ut=0;if(Kt(je,(Tt=Se)[(Dt=W)+3]))if(Kt(je,Tt[Dt+6])){for(Se=0,Dt=2*(ut=Kt(je,Tt[Dt+8]))+(Tt=Kt(je,Tt[Dt+9+ut])),ut=0,Tt=Jc[Dt];Tt[Se];++Se)ut+=ut+Kt(je,Tt[Se]);ut+=3+(8<<Dt)}else Kt(je,Tt[Dt+7])?(ut=7+2*Kt(je,165),ut+=Kt(je,145)):ut=5+Kt(je,159);else ut=Kt(je,Tt[Dt+4])?3+Kt(je,Tt[Dt+5]):2;Se=De[2]}else ut=1,Se=De[1];De=fe+es[de],0>(je=T).b&&zt(je);var Dt,Tt=je.b,Ct=(Dt=je.Ca>>1)-(je.I>>Tt)>>31;--je.b,je.Ca+=Ct,je.Ca|=1,je.I-=(Dt+1&Ct)<<Tt,ke[De]=((ut^Ct)-Ct)*Q[(0<de)+0]}return 16}function Da(T){var B=T.rb[T.sb-1];B.la=0,B.Na=0,o(T.zc,0,0,T.zc.length),T.ja=0}function Kn(T,B){if(T==null)return 0;if(B==null)return Go(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Js(T,B))return 0;if(e(T.cb),B.ac==null||B.ac(B)){B.ob&&(T.L=0);var W=ve[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=B.v-W>>4,T.zb=B.j-W>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=B.o+15+W>>4,T.Hb=B.va+15+W>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var Q=T.ed;for(W=0;4>W;++W){var de;if(T.Qa.Cb){var ke=T.Qa.Lb[W];T.Qa.Fb||(ke+=Q.Tb)}else ke=Q.Tb;for(de=0;1>=de;++de){var fe=T.gd[W][de],Se=ke;if(Q.Pc&&(Se+=Q.vd[0],de&&(Se+=Q.od[0])),0<(Se=0>Se?0:63<Se?63:Se)){var De=Se;0<Q.wb&&(De=4<Q.wb?De>>2:De>>1)>9-Q.wb&&(De=9-Q.wb),1>De&&(De=1),fe.dd=De,fe.tc=2*Se+De,fe.ld=40<=Se?2:15<=Se?1:0}else fe.tc=0;fe.La=de}}}W=0}else Go(T,6,"Frame setup failed"),W=T.a;if(W=W==0){if(W){T.$c=0,0<T.Aa||(T.Ic=Te);e:{W=T.Ic,Q=4*(De=T.za);var je=32*De,ut=De+1,Dt=0<T.L?De*(0<T.Aa?2:1):0,Tt=(T.Aa==2?2:1)*De;if((fe=Q+832+(de=3*(16*W+ve[T.L])/2*je)+(ke=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=fe)W=0;else{if(fe>T.Vb){if(T.Vb=0,T.Ec=u(fe),T.Fc=0,T.Ec==null){W=Go(T,1,"no memory during frame initialization.");break e}T.Vb=fe}fe=T.Ec,Se=T.Fc,T.Ac=fe,T.Bc=Se,Se+=Q,T.Gd=c(je,Ao),T.Hd=0,T.rb=c(ut+1,pa),T.sb=1,T.wa=Dt?c(Dt,qu):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=De),e(!0),T.oc=fe,T.pc=Se,Se+=832,T.ya=c(Tt,Vu),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=De),T.R=16*De,T.B=8*De,De=(je=ve[T.L])*T.R,je=je/2*T.B,T.sa=fe,T.ta=Se+De,T.qa=T.sa,T.ra=T.ta+16*W*T.R+je,T.Ha=T.qa,T.Ia=T.ra+8*W*T.B+je,T.$c=0,Se+=de,T.mb=ke?fe:null,T.nb=ke?Se:null,e(Se+ke<=T.Fc+T.Vb),Da(T),o(T.Ac,T.Bc,0,Q),W=1}}if(W){if(B.ka=0,B.y=T.sa,B.O=T.ta,B.f=T.qa,B.N=T.ra,B.ea=T.Ha,B.Vd=T.Ia,B.fa=T.R,B.Rc=T.B,B.F=null,B.J=0,!F0){for(W=-255;255>=W;++W)O0[255+W]=0>W?-W:W;for(W=-1020;1020>=W;++W)Xu[1020+W]=-128>W?-128:127<W?127:W;for(W=-112;112>=W;++W)Yu[112+W]=-16>W?-16:15<W?15:W;for(W=-255;510>=W;++W)kn[255+W]=0>W?0:255<W?255:W;F0=1}ds=Wl,sl=bc,Uo=Hu,_n=bu,ps=el,$s=Os,Na=kc,Cs=El,Au=Ac,ua=Us,Cc=xu,Ja=Cl,is=Gu,Yn=Sc,ei=wn,zo=Bs,Zo=Xl,Ca=p0,os[0]=Bt,os[1]=wc,os[2]=tt,os[3]=bt,os[4]=Ot,os[5]=pr,os[6]=wr,os[7]=vr,os[8]=Mr,os[9]=_r,So[0]=wu,So[1]=Zl,So[2]=Fs,So[3]=tl,So[4]=F,So[5]=X,So[6]=ce,fa[0]=m,fa[1]=xc,fa[2]=Yr,fa[3]=wi,fa[4]=h,fa[5]=xr,fa[6]=P,W=1}else W=0}W&&(W=function(Ct,br){for(Ct.M=0;Ct.M<Ct.Va;++Ct.M){var kr,_t=Ct.Jc[Ct.M&Ct.Xb],jt=Ct.m,hr=Ct;for(kr=0;kr<hr.za;++kr){var Ur=jt,Pr=hr,qr=Pr.Ac,Xr=Pr.Bc+4*kr,zi=Pr.zc,ii=Pr.ya[Pr.aa+kr];if(Pr.Qa.Bb?ii.$b=Kt(Ur,Pr.Pa.jb[0])?2+Kt(Ur,Pr.Pa.jb[2]):Kt(Ur,Pr.Pa.jb[1]):ii.$b=0,Pr.kc&&(ii.Ad=Kt(Ur,Pr.Bd)),ii.Za=!Kt(Ur,145)+0,ii.Za){var Pn=ii.Ob,In=0;for(Pr=0;4>Pr;++Pr){var hn,vn=zi[0+Pr];for(hn=0;4>hn;++hn){vn=g0[qr[Xr+hn]][vn];for(var Jn=nu[Kt(Ur,vn[0])];0<Jn;)Jn=nu[2*Jn+Kt(Ur,vn[Jn])];vn=-Jn,qr[Xr+hn]=vn}i(Pn,In,qr,Xr,4),In+=4,zi[0+Pr]=vn}}else vn=Kt(Ur,156)?Kt(Ur,128)?1:3:Kt(Ur,163)?2:0,ii.Ob[0]=vn,o(qr,Xr,vn,4),o(zi,0,vn,4);ii.Dd=Kt(Ur,142)?Kt(Ur,114)?Kt(Ur,183)?1:3:2:0}if(hr.m.Ka)return Go(Ct,7,"Premature end-of-partition0 encountered.");for(;Ct.ja<Ct.za;++Ct.ja){if(hr=_t,Ur=(jt=Ct).rb[jt.sb-1],qr=jt.rb[jt.sb+jt.ja],kr=jt.ya[jt.aa+jt.ja],Xr=jt.kc?kr.Ad:0)Ur.la=qr.la=0,kr.Za||(Ur.Na=qr.Na=0),kr.Hc=0,kr.Gc=0,kr.ia=0;else{var Gn,bn;if(Ur=qr,qr=hr,Xr=jt.Pa.Xc,zi=jt.ya[jt.aa+jt.ja],ii=jt.pb[zi.$b],Pr=zi.ad,Pn=0,In=jt.rb[jt.sb-1],vn=hn=0,o(Pr,Pn,0,384),zi.Za)var Vo=0,mn=Xr[3];else{Jn=u(16);var Eo=Ur.Na+In.Na;if(Eo=Qa(qr,Xr[1],Eo,ii.Eb,0,Jn,0),Ur.Na=In.Na=(0<Eo)+0,1<Eo)ds(Jn,0,Pr,Pn);else{var uo=Jn[0]+3>>3;for(Jn=0;256>Jn;Jn+=16)Pr[Pn+Jn]=uo}Vo=1,mn=Xr[0]}var Cn=15&Ur.la,Po=15&In.la;for(Jn=0;4>Jn;++Jn){var ba=1&Po;for(uo=bn=0;4>uo;++uo)Cn=Cn>>1|(ba=(Eo=Qa(qr,mn,Eo=ba+(1&Cn),ii.Sc,Vo,Pr,Pn))>Vo)<<7,bn=bn<<2|(3<Eo?3:1<Eo?2:Pr[Pn+0]!=0),Pn+=16;Cn>>=4,Po=Po>>1|ba<<7,hn=(hn<<8|bn)>>>0}for(mn=Cn,Vo=Po>>4,Gn=0;4>Gn;Gn+=2){for(bn=0,Cn=Ur.la>>4+Gn,Po=In.la>>4+Gn,Jn=0;2>Jn;++Jn){for(ba=1&Po,uo=0;2>uo;++uo)Eo=ba+(1&Cn),Cn=Cn>>1|(ba=0<(Eo=Qa(qr,Xr[2],Eo,ii.Qc,0,Pr,Pn)))<<3,bn=bn<<2|(3<Eo?3:1<Eo?2:Pr[Pn+0]!=0),Pn+=16;Cn>>=2,Po=Po>>1|ba<<5}vn|=bn<<4*Gn,mn|=Cn<<4<<Gn,Vo|=(240&Po)<<Gn}Ur.la=mn,In.la=Vo,zi.Hc=hn,zi.Gc=vn,zi.ia=43690&vn?0:ii.ia,Xr=!(hn|vn)}if(0<jt.L&&(jt.wa[jt.Y+jt.ja]=jt.gd[kr.$b][kr.Za],jt.wa[jt.Y+jt.ja].La|=!Xr),hr.Ka)return Go(Ct,7,"Premature end-of-file encountered.")}if(Da(Ct),jt=br,hr=1,kr=(_t=Ct).D,Ur=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)e:{if(kr.M=_t.M,kr.uc=Ur,Jl(_t,kr),hr=1,kr=(bn=_t.D).Nb,Ur=(vn=ve[_t.L])*_t.R,qr=vn/2*_t.B,Jn=16*kr*_t.R,uo=8*kr*_t.B,Xr=_t.sa,zi=_t.ta-Ur+Jn,ii=_t.qa,Pr=_t.ra-qr+uo,Pn=_t.Ha,In=_t.Ia-qr+uo,Po=(Cn=bn.M)==0,hn=Cn>=_t.Va-1,_t.Aa==2&&Jl(_t,bn),bn.uc)for(ba=(Eo=_t).D.M,e(Eo.D.uc),bn=Eo.yb;bn<Eo.Hb;++bn){Vo=bn,mn=ba;var Qn=(zn=(Io=Eo).D).Nb;Gn=Io.R;var zn=zn.wa[zn.Y+Vo],yo=Io.sa,eo=Io.ta+16*Qn*Gn+16*Vo,wa=zn.dd,Co=zn.tc;if(Co!=0)if(e(3<=Co),Io.L==1)0<Vo&&zo(yo,eo,Gn,Co+4),zn.La&&Ca(yo,eo,Gn,Co),0<mn&&ei(yo,eo,Gn,Co+4),zn.La&&Zo(yo,eo,Gn,Co);else{var Ba=Io.B,Nl=Io.qa,ms=Io.ra+8*Qn*Ba+8*Vo,cl=Io.Ha,Io=Io.Ia+8*Qn*Ba+8*Vo;Qn=zn.ld,0<Vo&&(Cs(yo,eo,Gn,Co+4,wa,Qn),ua(Nl,ms,cl,Io,Ba,Co+4,wa,Qn)),zn.La&&(Ja(yo,eo,Gn,Co,wa,Qn),Yn(Nl,ms,cl,Io,Ba,Co,wa,Qn)),0<mn&&(Na(yo,eo,Gn,Co+4,wa,Qn),Au(Nl,ms,cl,Io,Ba,Co+4,wa,Qn)),zn.La&&(Cc(yo,eo,Gn,Co,wa,Qn),is(Nl,ms,cl,Io,Ba,Co,wa,Qn))}}if(_t.ia&&alert("todo:DitherRow"),jt.put!=null){if(bn=16*Cn,Cn=16*(Cn+1),Po?(jt.y=_t.sa,jt.O=_t.ta+Jn,jt.f=_t.qa,jt.N=_t.ra+uo,jt.ea=_t.Ha,jt.W=_t.Ia+uo):(bn-=vn,jt.y=Xr,jt.O=zi,jt.f=ii,jt.N=Pr,jt.ea=Pn,jt.W=In),hn||(Cn-=vn),Cn>jt.o&&(Cn=jt.o),jt.F=null,jt.J=null,_t.Fa!=null&&0<_t.Fa.length&&bn<Cn&&(jt.J=Wu(_t,jt,bn,Cn-bn),jt.F=_t.mb,jt.F==null&&jt.F.length==0)){hr=Go(_t,3,"Could not decode alpha data.");break e}bn<jt.j&&(vn=jt.j-bn,bn=jt.j,e(!(1&vn)),jt.O+=_t.R*vn,jt.N+=_t.B*(vn>>1),jt.W+=_t.B*(vn>>1),jt.F!=null&&(jt.J+=jt.width*vn)),bn<Cn&&(jt.O+=jt.v,jt.N+=jt.v>>1,jt.W+=jt.v>>1,jt.F!=null&&(jt.J+=jt.v),jt.ka=bn-jt.j,jt.U=jt.va-jt.v,jt.T=Cn-bn,hr=jt.put(jt))}kr+1!=_t.Ic||hn||(i(_t.sa,_t.ta-Ur,Xr,zi+16*_t.R,Ur),i(_t.qa,_t.ra-qr,ii,Pr+8*_t.B,qr),i(_t.Ha,_t.Ia-qr,Pn,In+8*_t.B,qr))}if(!hr)return Go(Ct,6,"Output aborted.")}return 1}(T,B)),B.bc!=null&&B.bc(B),W&=1}return W?(T.cb=0,W):0}function rs(T,B,W,Q,de){de=T[B+W+32*Q]+(de>>3),T[B+W+32*Q]=-256&de?0>de?0:255:de}function Rs(T,B,W,Q,de,ke){rs(T,B,0,W,Q+de),rs(T,B,1,W,Q+ke),rs(T,B,2,W,Q-ke),rs(T,B,3,W,Q-de)}function oa(T){return(20091*T>>16)+T}function Qs(T,B,W,Q){var de,ke=0,fe=u(16);for(de=0;4>de;++de){var Se=T[B+0]+T[B+8],De=T[B+0]-T[B+8],je=(35468*T[B+4]>>16)-oa(T[B+12]),ut=oa(T[B+4])+(35468*T[B+12]>>16);fe[ke+0]=Se+ut,fe[ke+1]=De+je,fe[ke+2]=De-je,fe[ke+3]=Se-ut,ke+=4,B++}for(de=ke=0;4>de;++de)Se=(T=fe[ke+0]+4)+fe[ke+8],De=T-fe[ke+8],je=(35468*fe[ke+4]>>16)-oa(fe[ke+12]),rs(W,Q,0,0,Se+(ut=oa(fe[ke+4])+(35468*fe[ke+12]>>16))),rs(W,Q,1,0,De+je),rs(W,Q,2,0,De-je),rs(W,Q,3,0,Se-ut),ke++,Q+=32}function Os(T,B,W,Q){var de=T[B+0]+4,ke=35468*T[B+4]>>16,fe=oa(T[B+4]),Se=35468*T[B+1]>>16;Rs(W,Q,0,de+fe,T=oa(T[B+1]),Se),Rs(W,Q,1,de+ke,T,Se),Rs(W,Q,2,de-ke,T,Se),Rs(W,Q,3,de-fe,T,Se)}function bc(T,B,W,Q,de){Qs(T,B,W,Q),de&&Qs(T,B+16,W,Q+4)}function Hu(T,B,W,Q){sl(T,B+0,W,Q,1),sl(T,B+32,W,Q+128,1)}function bu(T,B,W,Q){var de;for(T=T[B+0]+4,de=0;4>de;++de)for(B=0;4>B;++B)rs(W,Q,B,de,T)}function el(T,B,W,Q){T[B+0]&&_n(T,B+0,W,Q),T[B+16]&&_n(T,B+16,W,Q+4),T[B+32]&&_n(T,B+32,W,Q+128),T[B+48]&&_n(T,B+48,W,Q+128+4)}function Wl(T,B,W,Q){var de,ke=u(16);for(de=0;4>de;++de){var fe=T[B+0+de]+T[B+12+de],Se=T[B+4+de]+T[B+8+de],De=T[B+4+de]-T[B+8+de],je=T[B+0+de]-T[B+12+de];ke[0+de]=fe+Se,ke[8+de]=fe-Se,ke[4+de]=je+De,ke[12+de]=je-De}for(de=0;4>de;++de)fe=(T=ke[0+4*de]+3)+ke[3+4*de],Se=ke[1+4*de]+ke[2+4*de],De=ke[1+4*de]-ke[2+4*de],je=T-ke[3+4*de],W[Q+0]=fe+Se>>3,W[Q+16]=je+De>>3,W[Q+32]=fe-Se>>3,W[Q+48]=je-De>>3,Q+=64}function $u(T,B,W){var Q,de=B-32,ke=Ia,fe=255-T[de-1];for(Q=0;Q<W;++Q){var Se,De=ke,je=fe+T[B-1];for(Se=0;Se<W;++Se)T[B+Se]=De[je+T[de+Se]];B+=32}}function wc(T,B){$u(T,B,4)}function xc(T,B){$u(T,B,8)}function Zl(T,B){$u(T,B,16)}function Fs(T,B){var W;for(W=0;16>W;++W)i(T,B+32*W,T,B-32,16)}function tl(T,B){var W;for(W=16;0<W;--W)o(T,B,T[B-1],16),B+=32}function Sl(T,B,W){var Q;for(Q=0;16>Q;++Q)o(B,W+32*Q,T,16)}function wu(T,B){var W,Q=16;for(W=0;16>W;++W)Q+=T[B-1+32*W]+T[B+W-32];Sl(Q>>5,T,B)}function F(T,B){var W,Q=8;for(W=0;16>W;++W)Q+=T[B-1+32*W];Sl(Q>>4,T,B)}function X(T,B){var W,Q=8;for(W=0;16>W;++W)Q+=T[B+W-32];Sl(Q>>4,T,B)}function ce(T,B){Sl(128,T,B)}function Pe(T,B,W){return T+2*B+W+2>>2}function tt(T,B){var W,Q=B-32;for(Q=new Uint8Array([Pe(T[Q-1],T[Q+0],T[Q+1]),Pe(T[Q+0],T[Q+1],T[Q+2]),Pe(T[Q+1],T[Q+2],T[Q+3]),Pe(T[Q+2],T[Q+3],T[Q+4])]),W=0;4>W;++W)i(T,B+32*W,Q,0,Q.length)}function bt(T,B){var W=T[B-1],Q=T[B-1+32],de=T[B-1+64],ke=T[B-1+96];yr(T,B+0,16843009*Pe(T[B-1-32],W,Q)),yr(T,B+32,16843009*Pe(W,Q,de)),yr(T,B+64,16843009*Pe(Q,de,ke)),yr(T,B+96,16843009*Pe(de,ke,ke))}function Bt(T,B){var W,Q=4;for(W=0;4>W;++W)Q+=T[B+W-32]+T[B-1+32*W];for(Q>>=3,W=0;4>W;++W)o(T,B+32*W,Q,4)}function Ot(T,B){var W=T[B-1+0],Q=T[B-1+32],de=T[B-1+64],ke=T[B-1-32],fe=T[B+0-32],Se=T[B+1-32],De=T[B+2-32],je=T[B+3-32];T[B+0+96]=Pe(Q,de,T[B-1+96]),T[B+1+96]=T[B+0+64]=Pe(W,Q,de),T[B+2+96]=T[B+1+64]=T[B+0+32]=Pe(ke,W,Q),T[B+3+96]=T[B+2+64]=T[B+1+32]=T[B+0+0]=Pe(fe,ke,W),T[B+3+64]=T[B+2+32]=T[B+1+0]=Pe(Se,fe,ke),T[B+3+32]=T[B+2+0]=Pe(De,Se,fe),T[B+3+0]=Pe(je,De,Se)}function wr(T,B){var W=T[B+1-32],Q=T[B+2-32],de=T[B+3-32],ke=T[B+4-32],fe=T[B+5-32],Se=T[B+6-32],De=T[B+7-32];T[B+0+0]=Pe(T[B+0-32],W,Q),T[B+1+0]=T[B+0+32]=Pe(W,Q,de),T[B+2+0]=T[B+1+32]=T[B+0+64]=Pe(Q,de,ke),T[B+3+0]=T[B+2+32]=T[B+1+64]=T[B+0+96]=Pe(de,ke,fe),T[B+3+32]=T[B+2+64]=T[B+1+96]=Pe(ke,fe,Se),T[B+3+64]=T[B+2+96]=Pe(fe,Se,De),T[B+3+96]=Pe(Se,De,De)}function pr(T,B){var W=T[B-1+0],Q=T[B-1+32],de=T[B-1+64],ke=T[B-1-32],fe=T[B+0-32],Se=T[B+1-32],De=T[B+2-32],je=T[B+3-32];T[B+0+0]=T[B+1+64]=ke+fe+1>>1,T[B+1+0]=T[B+2+64]=fe+Se+1>>1,T[B+2+0]=T[B+3+64]=Se+De+1>>1,T[B+3+0]=De+je+1>>1,T[B+0+96]=Pe(de,Q,W),T[B+0+64]=Pe(Q,W,ke),T[B+0+32]=T[B+1+96]=Pe(W,ke,fe),T[B+1+32]=T[B+2+96]=Pe(ke,fe,Se),T[B+2+32]=T[B+3+96]=Pe(fe,Se,De),T[B+3+32]=Pe(Se,De,je)}function vr(T,B){var W=T[B+0-32],Q=T[B+1-32],de=T[B+2-32],ke=T[B+3-32],fe=T[B+4-32],Se=T[B+5-32],De=T[B+6-32],je=T[B+7-32];T[B+0+0]=W+Q+1>>1,T[B+1+0]=T[B+0+64]=Q+de+1>>1,T[B+2+0]=T[B+1+64]=de+ke+1>>1,T[B+3+0]=T[B+2+64]=ke+fe+1>>1,T[B+0+32]=Pe(W,Q,de),T[B+1+32]=T[B+0+96]=Pe(Q,de,ke),T[B+2+32]=T[B+1+96]=Pe(de,ke,fe),T[B+3+32]=T[B+2+96]=Pe(ke,fe,Se),T[B+3+64]=Pe(fe,Se,De),T[B+3+96]=Pe(Se,De,je)}function _r(T,B){var W=T[B-1+0],Q=T[B-1+32],de=T[B-1+64],ke=T[B-1+96];T[B+0+0]=W+Q+1>>1,T[B+2+0]=T[B+0+32]=Q+de+1>>1,T[B+2+32]=T[B+0+64]=de+ke+1>>1,T[B+1+0]=Pe(W,Q,de),T[B+3+0]=T[B+1+32]=Pe(Q,de,ke),T[B+3+32]=T[B+1+64]=Pe(de,ke,ke),T[B+3+64]=T[B+2+64]=T[B+0+96]=T[B+1+96]=T[B+2+96]=T[B+3+96]=ke}function Mr(T,B){var W=T[B-1+0],Q=T[B-1+32],de=T[B-1+64],ke=T[B-1+96],fe=T[B-1-32],Se=T[B+0-32],De=T[B+1-32],je=T[B+2-32];T[B+0+0]=T[B+2+32]=W+fe+1>>1,T[B+0+32]=T[B+2+64]=Q+W+1>>1,T[B+0+64]=T[B+2+96]=de+Q+1>>1,T[B+0+96]=ke+de+1>>1,T[B+3+0]=Pe(Se,De,je),T[B+2+0]=Pe(fe,Se,De),T[B+1+0]=T[B+3+32]=Pe(W,fe,Se),T[B+1+32]=T[B+3+64]=Pe(Q,W,fe),T[B+1+64]=T[B+3+96]=Pe(de,Q,W),T[B+1+96]=Pe(ke,de,Q)}function Yr(T,B){var W;for(W=0;8>W;++W)i(T,B+32*W,T,B-32,8)}function wi(T,B){var W;for(W=0;8>W;++W)o(T,B,T[B-1],8),B+=32}function ot(T,B,W){var Q;for(Q=0;8>Q;++Q)o(B,W+32*Q,T,8)}function m(T,B){var W,Q=8;for(W=0;8>W;++W)Q+=T[B+W-32]+T[B-1+32*W];ot(Q>>4,T,B)}function xr(T,B){var W,Q=4;for(W=0;8>W;++W)Q+=T[B+W-32];ot(Q>>3,T,B)}function h(T,B){var W,Q=4;for(W=0;8>W;++W)Q+=T[B-1+32*W];ot(Q>>3,T,B)}function P(T,B){ot(128,T,B)}function ci(T,B,W){var Q=T[B-W],de=T[B+0],ke=3*(de-Q)+Xc[1020+T[B-2*W]-T[B+W]],fe=Xo[112+(ke+4>>3)];T[B-W]=Ia[255+Q+Xo[112+(ke+3>>3)]],T[B+0]=Ia[255+de-fe]}function Oi(T,B,W,Q){var de=T[B+0],ke=T[B+W];return ns[255+T[B-2*W]-T[B-W]]>Q||ns[255+ke-de]>Q}function wo(T,B,W,Q){return 4*ns[255+T[B-W]-T[B+0]]+ns[255+T[B-2*W]-T[B+W]]<=Q}function ie(T,B,W,Q,de){var ke=T[B-3*W],fe=T[B-2*W],Se=T[B-W],De=T[B+0],je=T[B+W],ut=T[B+2*W],Dt=T[B+3*W];return 4*ns[255+Se-De]+ns[255+fe-je]>Q?0:ns[255+T[B-4*W]-ke]<=de&&ns[255+ke-fe]<=de&&ns[255+fe-Se]<=de&&ns[255+Dt-ut]<=de&&ns[255+ut-je]<=de&&ns[255+je-De]<=de}function wn(T,B,W,Q){var de=2*Q+1;for(Q=0;16>Q;++Q)wo(T,B+Q,W,de)&&ci(T,B+Q,W)}function Bs(T,B,W,Q){var de=2*Q+1;for(Q=0;16>Q;++Q)wo(T,B+Q*W,1,de)&&ci(T,B+Q*W,1)}function Xl(T,B,W,Q){var de;for(de=3;0<de;--de)wn(T,B+=4*W,W,Q)}function p0(T,B,W,Q){var de;for(de=3;0<de;--de)Bs(T,B+=4,W,Q)}function Yl(T,B,W,Q,de,ke,fe,Se){for(ke=2*ke+1;0<de--;){if(ie(T,B,W,ke,fe))if(Oi(T,B,W,Se))ci(T,B,W);else{var De=T,je=B,ut=W,Dt=De[je-2*ut],Tt=De[je-ut],Ct=De[je+0],br=De[je+ut],kr=De[je+2*ut],_t=27*(hr=Xc[1020+3*(Ct-Tt)+Xc[1020+Dt-br]])+63>>7,jt=18*hr+63>>7,hr=9*hr+63>>7;De[je-3*ut]=Ia[255+De[je-3*ut]+hr],De[je-2*ut]=Ia[255+Dt+jt],De[je-ut]=Ia[255+Tt+_t],De[je+0]=Ia[255+Ct-_t],De[je+ut]=Ia[255+br-jt],De[je+2*ut]=Ia[255+kr-hr]}B+=Q}}function js(T,B,W,Q,de,ke,fe,Se){for(ke=2*ke+1;0<de--;){if(ie(T,B,W,ke,fe))if(Oi(T,B,W,Se))ci(T,B,W);else{var De=T,je=B,ut=W,Dt=De[je-ut],Tt=De[je+0],Ct=De[je+ut],br=Xo[112+((kr=3*(Tt-Dt))+4>>3)],kr=Xo[112+(kr+3>>3)],_t=br+1>>1;De[je-2*ut]=Ia[255+De[je-2*ut]+_t],De[je-ut]=Ia[255+Dt+kr],De[je+0]=Ia[255+Tt-br],De[je+ut]=Ia[255+Ct-_t]}B+=Q}}function kc(T,B,W,Q,de,ke){Yl(T,B,W,1,16,Q,de,ke)}function El(T,B,W,Q,de,ke){Yl(T,B,1,W,16,Q,de,ke)}function xu(T,B,W,Q,de,ke){var fe;for(fe=3;0<fe;--fe)js(T,B+=4*W,W,1,16,Q,de,ke)}function Cl(T,B,W,Q,de,ke){var fe;for(fe=3;0<fe;--fe)js(T,B+=4,1,W,16,Q,de,ke)}function Ac(T,B,W,Q,de,ke,fe,Se){Yl(T,B,de,1,8,ke,fe,Se),Yl(W,Q,de,1,8,ke,fe,Se)}function Us(T,B,W,Q,de,ke,fe,Se){Yl(T,B,1,de,8,ke,fe,Se),Yl(W,Q,1,de,8,ke,fe,Se)}function Gu(T,B,W,Q,de,ke,fe,Se){js(T,B+4*de,de,1,8,ke,fe,Se),js(W,Q+4*de,de,1,8,ke,fe,Se)}function Sc(T,B,W,Q,de,ke,fe,Se){js(T,B+4,1,de,8,ke,fe,Se),js(W,Q+4,1,de,8,ke,fe,Se)}function Kl(){this.ba=new Rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new so,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function qs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bi(){this.ua=0,this.Wa=new ct,this.vb=new ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new it,this.yc=new Me}function rl(){this.xb=this.a=0,this.l=new Aa,this.ca=new Rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new be,this.Pb=0,this.wd=new be,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bi,this.ab=0,this.gc=c(4,Mi),this.Oc=0}function il(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Aa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Il(T,B,W,Q,de,ke,fe){for(T=T==null?0:T[B+0],B=0;B<fe;++B)de[ke+B]=T+W[Q+B]&255,T=de[ke+B]}function Hn(T,B,W,Q,de,ke,fe){var Se;if(T==null)Il(null,null,W,Q,de,ke,fe);else for(Se=0;Se<fe;++Se)de[ke+Se]=T[B+Se]+W[Q+Se]&255}function Vs(T,B,W,Q,de,ke,fe){if(T==null)Il(null,null,W,Q,de,ke,fe);else{var Se,De=T[B+0],je=De,ut=De;for(Se=0;Se<fe;++Se)je=ut+(De=T[B+Se])-je,ut=W[Q+Se]+(-256&je?0>je?0:255:je)&255,je=De,de[ke+Se]=ut}}function Wu(T,B,W,Q){var de=B.width,ke=B.o;if(e(T!=null&&B!=null),0>W||0>=Q||W+Q>ke)return null;if(!T.Cc){if(T.ga==null){var fe;if(T.ga=new il,(fe=T.ga==null)||(fe=B.width*B.o,e(T.Gb.length==0),T.Gb=u(fe),T.Uc=0,T.Gb==null?fe=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,fe=1),fe=!fe),!fe){fe=T.ga;var Se=T.Fa,De=T.P,je=T.qc,ut=T.mb,Dt=T.nb,Tt=De+1,Ct=je-1,br=fe.l;if(e(Se!=null&&ut!=null&&B!=null),Oa[0]=null,Oa[1]=Il,Oa[2]=Hn,Oa[3]=Vs,fe.ca=ut,fe.tb=Dt,fe.c=B.width,fe.i=B.height,e(0<fe.c&&0<fe.i),1>=je)B=0;else if(fe.$a=Se[De+0]>>0&3,fe.Z=Se[De+0]>>2&3,fe.Lc=Se[De+0]>>4&3,De=Se[De+0]>>6&3,0>fe.$a||1<fe.$a||4<=fe.Z||1<fe.Lc||De)B=0;else if(br.put=lt,br.ac=Fe,br.bc=Lt,br.ma=fe,br.width=B.width,br.height=B.height,br.Da=B.Da,br.v=B.v,br.va=B.va,br.j=B.j,br.o=B.o,fe.$a)e:{e(fe.$a==1),B=Sn();t:for(;;){if(B==null){B=0;break e}if(e(fe!=null),fe.mc=B,B.c=fe.c,B.i=fe.i,B.l=fe.l,B.l.ma=fe,B.l.width=fe.c,B.l.height=fe.i,B.a=0,at(B.m,Se,Tt,Ct),!Vn(fe.c,fe.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&$i(B.s)?(fe.ic=1,Se=B.c*B.i,B.Ta=null,B.Ua=0,B.V=u(Se),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(fe.ic=0,B=En(B,fe.c)),!B))break t;B=1;break e}fe.mc=null,B=0}else B=Ct>=fe.c*fe.i;fe=!B}if(fe)return null;T.ga.Lc!=1?T.Ga=0:Q=ke-W}e(T.ga!=null),e(W+Q<=ke);e:{if(B=(Se=T.ga).c,ke=Se.l.o,Se.$a==0){if(Tt=T.rc,Ct=T.Vc,br=T.Fa,De=T.P+1+W*B,je=T.mb,ut=T.nb+W*B,e(De<=T.P+T.qc),Se.Z!=0)for(e(Oa[Se.Z]!=null),fe=0;fe<Q;++fe)Oa[Se.Z](Tt,Ct,br,De,je,ut,B),Tt=je,Ct=ut,ut+=B,De+=B;else for(fe=0;fe<Q;++fe)i(je,ut,br,De,B),Tt=je,Ct=ut,ut+=B,De+=B;T.rc=Tt,T.Vc=Ct}else{if(e(Se.mc!=null),B=W+Q,e((fe=Se.mc)!=null),e(B<=fe.i),fe.C>=B)B=1;else if(Se.ic||Ar(),Se.ic){Se=fe.V,Tt=fe.Ba,Ct=fe.c;var kr=fe.i,_t=(br=1,De=fe.$/Ct,je=fe.$%Ct,ut=fe.m,Dt=fe.s,fe.$),jt=Ct*kr,hr=Ct*B,Ur=Dt.wc,Pr=_t<hr?pt(Dt,je,De):null;e(_t<=jt),e(B<=kr),e($i(Dt));t:for(;;){for(;!ut.h&&_t<hr;){if(je&Ur||(Pr=pt(Dt,je,De)),e(Pr!=null),Nt(ut),256>(kr=Vt(Pr.G[0],Pr.H[0],ut)))Se[Tt+_t]=kr,++_t,++je>=Ct&&(je=0,++De<=B&&!(De%16)&&Ci(fe,De));else{if(!(280>kr)){br=0;break t}kr=pe(kr-256,ut);var qr,Xr=Vt(Pr.G[4],Pr.H[4],ut);if(Nt(ut),!(_t>=(Xr=Qt(Ct,Xr=pe(Xr,ut)))&&jt-_t>=kr)){br=0;break t}for(qr=0;qr<kr;++qr)Se[Tt+_t+qr]=Se[Tt+_t+qr-Xr];for(_t+=kr,je+=kr;je>=Ct;)je-=Ct,++De<=B&&!(De%16)&&Ci(fe,De);_t<hr&&je&Ur&&(Pr=pt(Dt,je,De))}e(ut.h==Ae(ut))}Ci(fe,De>B?B:De);break t}!br||ut.h&&_t<jt?(br=0,fe.a=ut.h?5:3):fe.$=_t,B=br}else B=Et(fe,fe.V,fe.Ba,fe.c,fe.i,B,On);if(!B){Q=0;break e}}W+Q>=ke&&(T.Cc=1),Q=1}if(!Q)return null;if(T.Cc&&((Q=T.ga)!=null&&(Q.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+W*de}function ne(T,B,W,Q,de,ke){for(;0<de--;){var fe,Se=T,De=B+(W?1:0),je=T,ut=B+(W?0:3);for(fe=0;fe<Q;++fe){var Dt=je[ut+4*fe];Dt!=255&&(Dt*=32897,Se[De+4*fe+0]=Se[De+4*fe+0]*Dt>>23,Se[De+4*fe+1]=Se[De+4*fe+1]*Dt>>23,Se[De+4*fe+2]=Se[De+4*fe+2]*Dt>>23)}B+=ke}}function Ve(T,B,W,Q,de){for(;0<Q--;){var ke;for(ke=0;ke<W;++ke){var fe=T[B+2*ke+0],Se=15&(je=T[B+2*ke+1]),De=4369*Se,je=(240&je|je>>4)*De>>16;T[B+2*ke+0]=(240&fe|fe>>4)*De>>16&240|(15&fe|fe<<4)*De>>16>>4&15,T[B+2*ke+1]=240&je|Se}B+=de}}function Rt(T,B,W,Q,de,ke,fe,Se){var De,je,ut=255;for(je=0;je<de;++je){for(De=0;De<Q;++De){var Dt=T[B+De];ke[fe+4*De]=Dt,ut&=Dt}B+=W,fe+=Se}return ut!=255}function ar(T,B,W,Q,de){var ke;for(ke=0;ke<de;++ke)W[Q+ke]=T[B+ke]>>8}function Ar(){Is=ne,yi=Ve,Su=Rt,m0=ar}function Hr(T,B,W){ue[T]=function(Q,de,ke,fe,Se,De,je,ut,Dt,Tt,Ct,br,kr,_t,jt,hr,Ur){var Pr,qr=Ur-1>>1,Xr=Se[De+0]|je[ut+0]<<16,zi=Dt[Tt+0]|Ct[br+0]<<16;e(Q!=null);var ii=3*Xr+zi+131074>>2;for(B(Q[de+0],255&ii,ii>>16,kr,_t),ke!=null&&(ii=3*zi+Xr+131074>>2,B(ke[fe+0],255&ii,ii>>16,jt,hr)),Pr=1;Pr<=qr;++Pr){var Pn=Se[De+Pr]|je[ut+Pr]<<16,In=Dt[Tt+Pr]|Ct[br+Pr]<<16,hn=Xr+Pn+zi+In+524296,vn=hn+2*(Pn+zi)>>3;ii=vn+Xr>>1,Xr=(hn=hn+2*(Xr+In)>>3)+Pn>>1,B(Q[de+2*Pr-1],255&ii,ii>>16,kr,_t+(2*Pr-1)*W),B(Q[de+2*Pr-0],255&Xr,Xr>>16,kr,_t+(2*Pr-0)*W),ke!=null&&(ii=hn+zi>>1,Xr=vn+In>>1,B(ke[fe+2*Pr-1],255&ii,ii>>16,jt,hr+(2*Pr-1)*W),B(ke[fe+2*Pr+0],255&Xr,Xr>>16,jt,hr+(2*Pr+0)*W)),Xr=Pn,zi=In}1&Ur||(ii=3*Xr+zi+131074>>2,B(Q[de+Ur-1],255&ii,ii>>16,kr,_t+(Ur-1)*W),ke!=null&&(ii=3*zi+Xr+131074>>2,B(ke[fe+Ur-1],255&ii,ii>>16,jt,hr+(Ur-1)*W)))}}function Wr(){Fa[Ku]=Pc,Fa[La]=Dl,Fa[ll]=ec,Fa[iu]=as,Fa[Ju]=Mc,Fa[$n]=zl,Fa[Yc]=y0,Fa[Kc]=Dl,Fa[ca]=as,Fa[To]=Mc,Fa[Qu]=zl}function Di(T){return T&~R?0>T?0:255:T>>lo}function fi(T,B){return Di((19077*T>>8)+(26149*B>>8)-14234)}function xn(T,B,W){return Di((19077*T>>8)-(6419*B>>8)-(13320*W>>8)+8708)}function Wi(T,B){return Di((19077*T>>8)+(33050*B>>8)-17685)}function nn(T,B,W,Q,de){Q[de+0]=fi(T,W),Q[de+1]=xn(T,B,W),Q[de+2]=Wi(T,B)}function xo(T,B,W,Q,de){Q[de+0]=Wi(T,B),Q[de+1]=xn(T,B,W),Q[de+2]=fi(T,W)}function Oo(T,B,W,Q,de){var ke=xn(T,B,W);B=ke<<3&224|Wi(T,B)>>3,Q[de+0]=248&fi(T,W)|ke>>5,Q[de+1]=B}function Wo(T,B,W,Q,de){var ke=240&Wi(T,B)|15;Q[de+0]=240&fi(T,W)|xn(T,B,W)>>4,Q[de+1]=ke}function za(T,B,W,Q,de){Q[de+0]=255,nn(T,B,W,Q,de+1)}function jo(T,B,W,Q,de){xo(T,B,W,Q,de),Q[de+3]=255}function Fn(T,B,W,Q,de){nn(T,B,W,Q,de),Q[de+3]=255}function Sa(T,B){return 0>T?0:T>B?B:T}function cs(T,B,W){ue[T]=function(Q,de,ke,fe,Se,De,je,ut,Dt){for(var Tt=ut+(-2&Dt)*W;ut!=Tt;)B(Q[de+0],ke[fe+0],Se[De+0],je,ut),B(Q[de+1],ke[fe+0],Se[De+0],je,ut+W),de+=2,++fe,++De,ut+=2*W;1&Dt&&B(Q[de+0],ke[fe+0],Se[De+0],je,ut)}}function nl(T,B,W){return W==0?T==0?B==0?6:5:B==0?4:0:W}function Ll(T,B,W,Q,de){switch(T>>>30){case 3:sl(B,W,Q,de,0);break;case 2:$s(B,W,Q,de);break;case 1:_n(B,W,Q,de)}}function Jl(T,B){var W,Q,de=B.M,ke=B.Nb,fe=T.oc,Se=T.pc+40,De=T.oc,je=T.pc+584,ut=T.oc,Dt=T.pc+600;for(W=0;16>W;++W)fe[Se+32*W-1]=129;for(W=0;8>W;++W)De[je+32*W-1]=129,ut[Dt+32*W-1]=129;for(0<de?fe[Se-1-32]=De[je-1-32]=ut[Dt-1-32]=129:(o(fe,Se-32-1,127,21),o(De,je-32-1,127,9),o(ut,Dt-32-1,127,9)),Q=0;Q<T.za;++Q){var Tt=B.ya[B.aa+Q];if(0<Q){for(W=-1;16>W;++W)i(fe,Se+32*W-4,fe,Se+32*W+12,4);for(W=-1;8>W;++W)i(De,je+32*W-4,De,je+32*W+4,4),i(ut,Dt+32*W-4,ut,Dt+32*W+4,4)}var Ct=T.Gd,br=T.Hd+Q,kr=Tt.ad,_t=Tt.Hc;if(0<de&&(i(fe,Se-32,Ct[br].y,0,16),i(De,je-32,Ct[br].f,0,8),i(ut,Dt-32,Ct[br].ea,0,8)),Tt.Za){var jt=fe,hr=Se-32+16;for(0<de&&(Q>=T.za-1?o(jt,hr,Ct[br].y[15],4):i(jt,hr,Ct[br+1].y,0,4)),W=0;4>W;W++)jt[hr+128+W]=jt[hr+256+W]=jt[hr+384+W]=jt[hr+0+W];for(W=0;16>W;++W,_t<<=2)jt=fe,hr=Se+ae[W],os[Tt.Ob[W]](jt,hr),Ll(_t,kr,16*+W,jt,hr)}else if(jt=nl(Q,de,Tt.Ob[0]),So[jt](fe,Se),_t!=0)for(W=0;16>W;++W,_t<<=2)Ll(_t,kr,16*+W,fe,Se+ae[W]);for(W=Tt.Gc,jt=nl(Q,de,Tt.Dd),fa[jt](De,je),fa[jt](ut,Dt),_t=kr,jt=De,hr=je,255&(Tt=W>>0)&&(170&Tt?Uo(_t,256,jt,hr):ps(_t,256,jt,hr)),Tt=ut,_t=Dt,255&(W>>=8)&&(170&W?Uo(kr,320,Tt,_t):ps(kr,320,Tt,_t)),de<T.Ub-1&&(i(Ct[br].y,0,fe,Se+480,16),i(Ct[br].f,0,De,je+224,8),i(Ct[br].ea,0,ut,Dt+224,8)),W=8*ke*T.B,Ct=T.sa,br=T.ta+16*Q+16*ke*T.R,kr=T.qa,Tt=T.ra+8*Q+W,_t=T.Ha,jt=T.Ia+8*Q+W,W=0;16>W;++W)i(Ct,br+W*T.R,fe,Se+32*W,16);for(W=0;8>W;++W)i(kr,Tt+W*T.B,De,je+32*W,8),i(_t,jt+W*T.B,ut,Dt+32*W,8)}}function Tl(T,B,W,Q,de,ke,fe,Se,De){var je=[0],ut=[0],Dt=0,Tt=De!=null?De.kd:0,Ct=De??new qs;if(T==null||12>W)return 7;Ct.data=T,Ct.w=B,Ct.ha=W,B=[B],W=[W],Ct.gb=[Ct.gb];e:{var br=B,kr=W,_t=Ct.gb;if(e(T!=null),e(kr!=null),e(_t!=null),_t[0]=0,12<=kr[0]&&!r(T,br[0],"RIFF")){if(r(T,br[0]+8,"WEBP")){_t=3;break e}var jt=It(T,br[0]+4);if(12>jt||4294967286<jt){_t=3;break e}if(Tt&&jt>kr[0]-8){_t=7;break e}_t[0]=jt,br[0]+=12,kr[0]-=12}_t=0}if(_t!=0)return _t;for(jt=0<Ct.gb[0],W=W[0];;){e:{var hr=T;kr=B,_t=W;var Ur=je,Pr=ut,qr=br=[0];if((ii=Dt=[Dt])[0]=0,8>_t[0])_t=7;else{if(!r(hr,kr[0],"VP8X")){if(It(hr,kr[0]+4)!=10){_t=3;break e}if(18>_t[0]){_t=7;break e}var Xr=It(hr,kr[0]+8),zi=1+Jt(hr,kr[0]+12);if(2147483648<=zi*(hr=1+Jt(hr,kr[0]+15))){_t=3;break e}qr!=null&&(qr[0]=Xr),Ur!=null&&(Ur[0]=zi),Pr!=null&&(Pr[0]=hr),kr[0]+=18,_t[0]-=18,ii[0]=1}_t=0}}if(Dt=Dt[0],br=br[0],_t!=0)return _t;if(kr=!!(2&br),!jt&&Dt)return 3;if(ke!=null&&(ke[0]=!!(16&br)),fe!=null&&(fe[0]=kr),Se!=null&&(Se[0]=0),fe=je[0],br=ut[0],Dt&&kr&&De==null){_t=0;break}if(4>W){_t=7;break}if(jt&&Dt||!jt&&!Dt&&!r(T,B[0],"ALPH")){W=[W],Ct.na=[Ct.na],Ct.P=[Ct.P],Ct.Sa=[Ct.Sa];e:{Xr=T,_t=B,jt=W;var ii=Ct.gb;Ur=Ct.na,Pr=Ct.P,qr=Ct.Sa,zi=22,e(Xr!=null),e(jt!=null),hr=_t[0];var Pn=jt[0];for(e(Ur!=null),e(qr!=null),Ur[0]=null,Pr[0]=null,qr[0]=0;;){if(_t[0]=hr,jt[0]=Pn,8>Pn){_t=7;break e}var In=It(Xr,hr+4);if(4294967286<In){_t=3;break e}var hn=8+In+1&-2;if(zi+=hn,0<ii&&zi>ii){_t=3;break e}if(!r(Xr,hr,"VP8 ")||!r(Xr,hr,"VP8L")){_t=0;break e}if(Pn[0]<hn){_t=7;break e}r(Xr,hr,"ALPH")||(Ur[0]=Xr,Pr[0]=hr+8,qr[0]=In),hr+=hn,Pn-=hn}}if(W=W[0],Ct.na=Ct.na[0],Ct.P=Ct.P[0],Ct.Sa=Ct.Sa[0],_t!=0)break}W=[W],Ct.Ja=[Ct.Ja],Ct.xa=[Ct.xa];e:if(ii=T,_t=B,jt=W,Ur=Ct.gb[0],Pr=Ct.Ja,qr=Ct.xa,Xr=_t[0],hr=!r(ii,Xr,"VP8 "),zi=!r(ii,Xr,"VP8L"),e(ii!=null),e(jt!=null),e(Pr!=null),e(qr!=null),8>jt[0])_t=7;else{if(hr||zi){if(ii=It(ii,Xr+4),12<=Ur&&ii>Ur-12){_t=3;break e}if(Tt&&ii>jt[0]-8){_t=7;break e}Pr[0]=ii,_t[0]+=8,jt[0]-=8,qr[0]=zi}else qr[0]=5<=jt[0]&&ii[Xr+0]==47&&!(ii[Xr+4]>>5),Pr[0]=jt[0];_t=0}if(W=W[0],Ct.Ja=Ct.Ja[0],Ct.xa=Ct.xa[0],B=B[0],_t!=0)break;if(4294967286<Ct.Ja)return 3;if(Se==null||kr||(Se[0]=Ct.xa?2:1),fe=[fe],br=[br],Ct.xa){if(5>W){_t=7;break}Se=fe,Tt=br,kr=ke,T==null||5>W?T=0:5<=W&&T[B+0]==47&&!(T[B+4]>>5)?(jt=[0],ii=[0],Ur=[0],at(Pr=new be,T,B,W),ft(Pr,jt,ii,Ur)?(Se!=null&&(Se[0]=jt[0]),Tt!=null&&(Tt[0]=ii[0]),kr!=null&&(kr[0]=Ur[0]),T=1):T=0):T=0}else{if(10>W){_t=7;break}Se=br,T==null||10>W||!la(T,B+3,W-3)?T=0:(Tt=T[B+0]|T[B+1]<<8|T[B+2]<<16,kr=16383&(T[B+7]<<8|T[B+6]),T=16383&(T[B+9]<<8|T[B+8]),1&Tt||3<(Tt>>1&7)||!(Tt>>4&1)||Tt>>5>=Ct.Ja||!kr||!T?T=0:(fe&&(fe[0]=kr),Se&&(Se[0]=T),T=1))}if(!T||(fe=fe[0],br=br[0],Dt&&(je[0]!=fe||ut[0]!=br)))return 3;De!=null&&(De[0]=Ct,De.offset=B-De.w,e(4294967286>B-De.w),e(De.offset==De.ha-W));break}return _t==0||_t==7&&Dt&&De==null?(ke!=null&&(ke[0]|=Ct.na!=null&&0<Ct.na.length),Q!=null&&(Q[0]=fe),de!=null&&(de[0]=br),0):_t}function ku(T,B,W){var Q=B.width,de=B.height,ke=0,fe=0,Se=Q,De=de;if(B.Da=T!=null&&0<T.Da,B.Da&&(Se=T.cd,De=T.bd,ke=T.v,fe=T.j,11>W||(ke&=-2,fe&=-2),0>ke||0>fe||0>=Se||0>=De||ke+Se>Q||fe+De>de))return 0;if(B.v=ke,B.j=fe,B.va=ke+Se,B.o=fe+De,B.U=Se,B.T=De,B.da=T!=null&&0<T.da,B.da){if(!mr(Se,De,W=[T.ib],ke=[T.hb]))return 0;B.ib=W[0],B.hb=ke[0]}return B.ob=T!=null&&T.ob,B.Kb=T==null||!T.Sd,B.da&&(B.ob=B.ib<3*Q/4&&B.hb<3*de/4,B.Kb=0),1}function Ec(T){if(T==null)return 2;if(11>T.S){var B=T.f.RGBA;B.fb+=(T.height-1)*B.A,B.A=-B.A}else B=T.f.kb,T=T.height,B.O+=(T-1)*B.fa,B.fa=-B.fa,B.N+=(T-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(T-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(T-1)*B.lb,B.lb=-B.lb);return 0}function Ql(T,B,W,Q){if(Q==null||0>=T||0>=B)return 2;if(W!=null){if(W.Da){var de=W.cd,ke=W.bd,fe=-2&W.v,Se=-2&W.j;if(0>fe||0>Se||0>=de||0>=ke||fe+de>T||Se+ke>B)return 2;T=de,B=ke}if(W.da){if(!mr(T,B,de=[W.ib],ke=[W.hb]))return 2;T=de[0],B=ke[0]}}Q.width=T,Q.height=B;e:{var De=Q.width,je=Q.height;if(T=Q.S,0>=De||0>=je||!(T>=Ku&&13>T))T=2;else{if(0>=Q.Rd&&Q.sd==null){fe=ke=de=B=0;var ut=(Se=De*Ze[T])*je;if(11>T||(ke=(je+1)/2*(B=(De+1)/2),T==12&&(fe=(de=De)*je)),(je=u(ut+2*ke+fe))==null){T=1;break e}Q.sd=je,11>T?((De=Q.f.RGBA).eb=je,De.fb=0,De.A=Se,De.size=ut):((De=Q.f.kb).y=je,De.O=0,De.fa=Se,De.Fd=ut,De.f=je,De.N=0+ut,De.Ab=B,De.Cd=ke,De.ea=je,De.W=0+ut+ke,De.Db=B,De.Ed=ke,T==12&&(De.F=je,De.J=0+ut+2*ke),De.Tc=fe,De.lb=de)}if(B=1,de=Q.S,ke=Q.width,fe=Q.height,de>=Ku&&13>de)if(11>de)T=Q.f.RGBA,B&=(Se=Math.abs(T.A))*(fe-1)+ke<=T.size,B&=Se>=ke*Ze[de],B&=T.eb!=null;else{T=Q.f.kb,Se=(ke+1)/2,ut=(fe+1)/2,De=Math.abs(T.fa),je=Math.abs(T.Ab);var Dt=Math.abs(T.Db),Tt=Math.abs(T.lb),Ct=Tt*(fe-1)+ke;B&=De*(fe-1)+ke<=T.Fd,B&=je*(ut-1)+Se<=T.Cd,B=(B&=Dt*(ut-1)+Se<=T.Ed)&De>=ke&je>=Se&Dt>=Se,B&=T.y!=null,B&=T.f!=null,B&=T.ea!=null,de==12&&(B&=Tt>=ke,B&=Ct<=T.Tc,B&=T.F!=null)}else B=0;T=B?0:2}}return T!=0||W!=null&&W.fd&&(T=Ec(Q)),T}var ao=64,ks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],va=24,Pl=32,ol=8,Ea=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];zr("Predictor0","PredictorAdd0"),ue.Predictor0=function(){return 4278190080},ue.Predictor1=function(T){return T},ue.Predictor2=function(T,B,W){return B[W+0]},ue.Predictor3=function(T,B,W){return B[W+1]},ue.Predictor4=function(T,B,W){return B[W-1]},ue.Predictor5=function(T,B,W){return Vr(Vr(T,B[W+1]),B[W+0])},ue.Predictor6=function(T,B,W){return Vr(T,B[W-1])},ue.Predictor7=function(T,B,W){return Vr(T,B[W+0])},ue.Predictor8=function(T,B,W){return Vr(B[W-1],B[W+0])},ue.Predictor9=function(T,B,W){return Vr(B[W+0],B[W+1])},ue.Predictor10=function(T,B,W){return Vr(Vr(T,B[W-1]),Vr(B[W+0],B[W+1]))},ue.Predictor11=function(T,B,W){var Q=B[W+0];return 0>=Nr(Q>>24&255,T>>24&255,(B=B[W-1])>>24&255)+Nr(Q>>16&255,T>>16&255,B>>16&255)+Nr(Q>>8&255,T>>8&255,B>>8&255)+Nr(255&Q,255&T,255&B)?Q:T},ue.Predictor12=function(T,B,W){var Q=B[W+0];return(_i((T>>24&255)+(Q>>24&255)-((B=B[W-1])>>24&255))<<24|_i((T>>16&255)+(Q>>16&255)-(B>>16&255))<<16|_i((T>>8&255)+(Q>>8&255)-(B>>8&255))<<8|_i((255&T)+(255&Q)-(255&B)))>>>0},ue.Predictor13=function(T,B,W){var Q=B[W-1];return(Hi((T=Vr(T,B[W+0]))>>24&255,Q>>24&255)<<24|Hi(T>>16&255,Q>>16&255)<<16|Hi(T>>8&255,Q>>8&255)<<8|Hi(T>>0&255,Q>>0&255))>>>0};var As=ue.PredictorAdd0;ue.PredictorAdd1=ji,zr("Predictor2","PredictorAdd2"),zr("Predictor3","PredictorAdd3"),zr("Predictor4","PredictorAdd4"),zr("Predictor5","PredictorAdd5"),zr("Predictor6","PredictorAdd6"),zr("Predictor7","PredictorAdd7"),zr("Predictor8","PredictorAdd8"),zr("Predictor9","PredictorAdd9"),zr("Predictor10","PredictorAdd10"),zr("Predictor11","PredictorAdd11"),zr("Predictor12","PredictorAdd12"),zr("Predictor13","PredictorAdd13");var al=ue.PredictorAdd2;Or("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Or("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var eu,Ka=ue.ColorIndexInverseTransform,tu=ue.MapARGB,ru=ue.VP8LColorIndexInverseTransformAlpha,Zu=ue.MapAlpha,Hs=ue.VP8LPredictorsAdd=[];Hs.length=16,(ue.VP8LPredictors=[]).length=16,(ue.VP8LPredictorsAdd_C=[]).length=16,(ue.VP8LPredictors_C=[]).length=16;var ma,Ss,Es,fs,hs,Ml,ds,sl,$s,Uo,_n,ps,Na,Cs,Au,ua,Cc,Ja,is,Yn,ei,zo,Zo,Ca,Is,yi,Su,m0,O0=u(511),Xu=u(2041),Yu=u(225),kn=u(767),F0=0,Xc=Xu,Xo=Yu,Ia=kn,ns=O0,Ku=0,La=1,ll=2,iu=3,Ju=4,$n=5,Yc=6,Kc=7,ca=8,To=9,Qu=10,Gs=[2,3,7],ul=[3,3,11],Ic=[280,256,256,256,40],B0=[0,1,1,1,0],ff=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ws=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Eu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ii=8,rn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ra=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qa=null,Jc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],es=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],g0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Lc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qo=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],So=[],os=[],fa=[],Tc=1,ou=2,Oa=[],Fa=[];Hr("UpsampleRgbLinePair",nn,3),Hr("UpsampleBgrLinePair",xo,3),Hr("UpsampleRgbaLinePair",Fn,4),Hr("UpsampleBgraLinePair",jo,4),Hr("UpsampleArgbLinePair",za,4),Hr("UpsampleRgba4444LinePair",Wo,2),Hr("UpsampleRgb565LinePair",Oo,2);var Pc=ue.UpsampleRgbLinePair,ec=ue.UpsampleBgrLinePair,Dl=ue.UpsampleRgbaLinePair,as=ue.UpsampleBgraLinePair,Mc=ue.UpsampleArgbLinePair,zl=ue.UpsampleRgba4444LinePair,y0=ue.UpsampleRgb565LinePair,tc=16,Cu=1<<tc-1,au=-227,Dc=482,lo=6,R=(256<<lo)-1,p=0,k=u(256),L=u(256),z=u(256),j=u(256),K=u(Dc-au),re=u(Dc-au);cs("YuvToRgbRow",nn,3),cs("YuvToBgrRow",xo,3),cs("YuvToRgbaRow",Fn,4),cs("YuvToBgraRow",jo,4),cs("YuvToArgbRow",za,4),cs("YuvToRgba4444Row",Wo,2),cs("YuvToRgb565Row",Oo,2);var ae=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ve=[0,2,8],Ee=[8,7,6,4,4,2,2,2,1,1,1,1],Te=1;this.WebPDecodeRGBA=function(T,B,W,Q,de){var ke=La,fe=new Kl,Se=new Rn;fe.ba=Se,Se.S=ke,Se.width=[Se.width],Se.height=[Se.height];var De=Se.width,je=Se.height,ut=new Xn;if(ut==null||T==null)var Dt=2;else e(ut!=null),Dt=Tl(T,B,W,ut.width,ut.height,ut.Pd,ut.Qd,ut.format,null);if(Dt!=0?De=0:(De!=null&&(De[0]=ut.width[0]),je!=null&&(je[0]=ut.height[0]),De=1),De){Se.width=Se.width[0],Se.height=Se.height[0],Q!=null&&(Q[0]=Se.width),de!=null&&(de[0]=Se.height);e:{if(Q=new Aa,(de=new qs).data=T,de.w=B,de.ha=W,de.kd=1,B=[0],e(de!=null),((T=Tl(de.data,de.w,de.ha,null,null,null,B,null,de))==0||T==7)&&B[0]&&(T=4),(B=T)==0){if(e(fe!=null),Q.data=de.data,Q.w=de.w+de.offset,Q.ha=de.ha-de.offset,Q.put=lt,Q.ac=Fe,Q.bc=Lt,Q.ma=fe,de.xa){if((T=Sn())==null){fe=1;break e}if(function(Tt,Ct){var br=[0],kr=[0],_t=[0];t:for(;;){if(Tt==null)return 0;if(Ct==null)return Tt.a=2,0;if(Tt.l=Ct,Tt.a=0,at(Tt.m,Ct.data,Ct.w,Ct.ha),!ft(Tt.m,br,kr,_t)){Tt.a=3;break t}if(Tt.xb=ou,Ct.width=br[0],Ct.height=kr[0],!Vn(br[0],kr[0],1,Tt,null))break t;return 1}return e(Tt.a!=0),0}(T,Q)){if(Q=(B=Ql(Q.width,Q.height,fe.Oa,fe.ba))==0){t:{Q=T;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((W=Q.l)!=null),e((de=W.ma)!=null),Q.xb!=0){if(Q.ca=de.ba,Q.tb=de.tb,e(Q.ca!=null),!ku(de.Oa,W,iu)){Q.a=2;break r}if(!En(Q,W.width)||W.da)break r;if((W.da||ki(Q.ca.S))&&Ar(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&Ar()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Fr(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Et(Q,Q.V,Q.Ba,Q.c,Q.i,W.o,$r))break r;de.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(B=T.a)}else B=T.a}else{if((T=new Jo)==null){fe=1;break e}if(T.Fa=de.na,T.P=de.P,T.qc=de.Sa,Js(T,Q)){if((B=Ql(Q.width,Q.height,fe.Oa,fe.ba))==0){if(T.Aa=0,W=fe.Oa,e((de=T)!=null),W!=null){if(0<(De=0>(De=W.Md)?0:100<De?255:255*De/100)){for(je=ut=0;4>je;++je)12>(Dt=de.pb[je]).lc&&(Dt.ia=De*Ee[0>Dt.lc?0:Dt.lc]>>3),ut|=Dt.ia;ut&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=W.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}Kn(T,Q)||(B=T.a)}}else B=T.a}B==0&&fe.Oa!=null&&fe.Oa.fd&&(B=Ec(fe.ba))}fe=B}ke=fe!=0?null:11>ke?Se.f.RGBA.eb:Se.f.kb.y}else ke=null;return ke};var Ze=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(ue,ze){for(var Ue="",Ce=0;Ce<4;Ce++)Ue+=String.fromCharCode(ue[ze++]);return Ue}function b(ue,ze){return(ue[ze+0]<<0|ue[ze+1]<<8|ue[ze+2]<<16)>>>0}function A(ue,ze){return(ue[ze+0]<<0|ue[ze+1]<<8|ue[ze+2]<<16|ue[ze+3]<<24)>>>0}new f;var I=[0],C=[0],N=[],O=new f,$=t,G=function(ue,ze){var Ue={},Ce=0,Me=!1,qe=0,it=0;if(Ue.frames=[],!function(Be,Ae,ht,Nt){for(var zt=0;zt<Nt;zt++)if(Be[Ae+zt]!=ht.charCodeAt(zt))return!0;return!1}(ue,ze,"RIFF",4)){var xt,yt;for(A(ue,ze+=4),ze+=8;ze<ue.length;){var $e=y(ue,ze),at=A(ue,ze+=4);ze+=4;var mt=at+(1&at);switch($e){case"VP8 ":case"VP8L":Ue.frames[Ce]===void 0&&(Ue.frames[Ce]={}),(be=Ue.frames[Ce]).src_off=Me?it:ze-8,be.src_size=qe+at+8,Ce++,Me&&(Me=!1,qe=0,it=0);break;case"VP8X":(be=Ue.header={}).feature_flags=ue[ze];var Xe=ze+4;be.canvas_width=1+b(ue,Xe),Xe+=3,be.canvas_height=1+b(ue,Xe),Xe+=3;break;case"ALPH":Me=!0,qe=mt+8,it=ze-8;break;case"ANIM":(be=Ue.header).bgcolor=A(ue,ze),Xe=ze+4,be.loop_count=(xt=ue)[(yt=Xe)+0]<<0|xt[yt+1]<<8,Xe+=2;break;case"ANMF":var wt,be;(be=Ue.frames[Ce]={}).offset_x=2*b(ue,ze),ze+=3,be.offset_y=2*b(ue,ze),ze+=3,be.width=1+b(ue,ze),ze+=3,be.height=1+b(ue,ze),ze+=3,be.duration=b(ue,ze),ze+=3,wt=ue[ze++],be.dispose=1&wt,be.blend=wt>>1&1}$e!="ANMF"&&(ze+=mt)}return Ue}}($,0);G.response=$,G.rgbaoutput=!0,G.dataurl=!1;var Z=G.header?G.header:null,ee=G.frames?G.frames:null;if(Z){Z.loop_counter=Z.loop_count,I=[Z.canvas_height],C=[Z.canvas_width];for(var te=0;te<ee.length&&ee[te].blend!=0;te++);}var _e=ee[0],le=O.WebPDecodeRGBA($,_e.src_off,_e.src_size,C,I);_e.rgba=le,_e.imgwidth=C[0],_e.imgheight=I[0];for(var we=0;we<C[0]*I[0]*4;we++)N[we]=le[we];return this.width=C,this.height=I,this.data=N,this}(function(t){var e=function(){return typeof my=="function"},r=function(I,C,N,O){var $=4,G=c;switch(O){case t.image_compression.FAST:$=1,G=u;break;case t.image_compression.MEDIUM:$=6,G=s;break;case t.image_compression.SLOW:$=9,G=f}I=i(I,C,N,G);var Z=my(I,{level:$});return t.__addimage__.arrayBufferToBinaryString(Z)},i=function(I,C,N,O){for(var $,G,Z,ee=I.length/C,te=new Uint8Array(I.length+ee),_e=b(),le=0;le<ee;le+=1){if(Z=le*C,$=I.subarray(Z,Z+C),O)te.set(O($,N,G),Z+le);else{for(var we,ue=_e.length,ze=[];we<ue;we+=1)ze[we]=_e[we]($,N,G);var Ue=A(ze.concat());te.set(ze[Ue],Z+le)}G=$}return te},o=function(I){var C=Array.apply([],I);return C.unshift(0),C},u=function(I,C){var N,O=[],$=I.length;O[0]=1;for(var G=0;G<$;G+=1)N=I[G-C]||0,O[G+1]=I[G]-N+256&255;return O},c=function(I,C,N){var O,$=[],G=I.length;$[0]=2;for(var Z=0;Z<G;Z+=1)O=N&&N[Z]||0,$[Z+1]=I[Z]-O+256&255;return $},s=function(I,C,N){var O,$,G=[],Z=I.length;G[0]=3;for(var ee=0;ee<Z;ee+=1)O=I[ee-C]||0,$=N&&N[ee]||0,G[ee+1]=I[ee]+256-(O+$>>>1)&255;return G},f=function(I,C,N){var O,$,G,Z,ee=[],te=I.length;ee[0]=4;for(var _e=0;_e<te;_e+=1)O=I[_e-C]||0,$=N&&N[_e]||0,G=N&&N[_e-C]||0,Z=y(O,$,G),ee[_e+1]=I[_e]-Z+256&255;return ee},y=function(I,C,N){if(I===C&&C===N)return I;var O=Math.abs(C-N),$=Math.abs(I-N),G=Math.abs(I+C-N-N);return O<=$&&O<=G?I:$<=G?C:N},b=function(){return[o,u,c,s,f]},A=function(I){var C=I.map(function(N){return N.reduce(function(O,$){return O+Math.abs($)},0)});return C.indexOf(Math.min.apply(null,C))};t.processPNG=function(I,C,N,O){var $,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt=this.decode.FLATE_DECODE,yt="";if(this.__addimage__.isArrayBuffer(I)&&(I=new Uint8Array(I)),this.__addimage__.isArrayBufferView(I)){if(I=(Z=new pE(I)).imgData,G=Z.bits,$=Z.colorSpace,te=Z.colors,[4,6].indexOf(Z.colorType)!==-1){if(Z.bits===8){ue=(we=Z.pixelBitlength==32?new Uint32Array(Z.decodePixels().buffer):Z.pixelBitlength==16?new Uint16Array(Z.decodePixels().buffer):new Uint8Array(Z.decodePixels().buffer)).length,Ue=new Uint8Array(ue*Z.colors),ze=new Uint8Array(ue);var $e,at=Z.pixelBitlength-Z.bits;for(qe=0,it=0;qe<ue;qe++){for(Me=we[qe],$e=0;$e<at;)Ue[it++]=Me>>>$e&255,$e+=Z.bits;ze[qe]=Me>>>$e&255}}if(Z.bits===16){ue=(we=new Uint32Array(Z.decodePixels().buffer)).length,Ue=new Uint8Array(ue*(32/Z.pixelBitlength)*Z.colors),ze=new Uint8Array(ue*(32/Z.pixelBitlength)),Ce=Z.colors>1,qe=0,it=0;for(var mt=0;qe<ue;)Me=we[qe++],Ue[it++]=Me>>>0&255,Ce&&(Ue[it++]=Me>>>16&255,Me=we[qe++],Ue[it++]=Me>>>0&255),ze[mt++]=Me>>>16&255;G=8}O!==t.image_compression.NONE&&e()?(I=r(Ue,Z.width*Z.colors,Z.colors,O),le=r(ze,Z.width,1,O)):(I=Ue,le=ze,xt=void 0)}if(Z.colorType===3&&($=this.color_spaces.INDEXED,_e=Z.palette,Z.transparency.indexed)){var Xe=Z.transparency.indexed,wt=0;for(qe=0,ue=Xe.length;qe<ue;++qe)wt+=Xe[qe];if((wt/=255)===ue-1&&Xe.indexOf(0)!==-1)ee=[Xe.indexOf(0)];else if(wt!==ue){for(we=Z.decodePixels(),ze=new Uint8Array(we.length),qe=0,ue=we.length;qe<ue;qe++)ze[qe]=Xe[we[qe]];le=r(ze,Z.width,1)}}var be=function(Be){var Ae;switch(Be){case t.image_compression.FAST:Ae=11;break;case t.image_compression.MEDIUM:Ae=13;break;case t.image_compression.SLOW:Ae=14;break;default:Ae=12}return Ae}(O);return xt===this.decode.FLATE_DECODE&&(yt="/Predictor "+be+" "),yt+="/Colors "+te+" /BitsPerComponent "+G+" /Columns "+Z.width,(this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),(le&&this.__addimage__.isArrayBuffer(le)||this.__addimage__.isArrayBufferView(le))&&(le=this.__addimage__.arrayBufferToBinaryString(le)),{alias:N,data:I,index:C,filter:xt,decodeParameters:yt,transparency:ee,palette:_e,sMask:le,predictor:be,width:Z.width,height:Z.height,bitsPerComponent:G,colorSpace:$}}}})(Bn.API),function(t){t.processGIF89A=function(e,r,i,o){var u=new mE(e),c=u.width,s=u.height,f=[];u.decodeAndBlitFrameRGBA(0,f);var y={data:f,width:c,height:s},b=new Xm(100).encode(y,100);return t.processJPEG.call(this,b,r,i,o)},t.processGIF87A=t.processGIF89A}(Bn.API),I0.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:i,blue:r,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},I0.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){_a.log("bit decode error:"+r)}},I0.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var u=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+8*o*4,s=0;s<8&&8*o+s<this.width;s++){var f=this.palette[u>>7-s&1];this.data[c+4*s]=f.blue,this.data[c+4*s+1]=f.green,this.data[c+4*s+2]=f.red,this.data[c+4*s+3]=255}r!==0&&(this.pos+=4-r)}},I0.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<t;o++){var u=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+2*o*4,s=u>>4,f=15&u,y=this.palette[s];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*o+1>=this.width)break;y=this.palette[f],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},I0.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*i;if(o<this.palette.length){var c=this.palette[o];this.data[u]=c.red,this.data[u+1]=c.green,this.data[u+2]=c.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}t!==0&&(this.pos+=4-t)}},I0.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,s=(u>>5&e)/e*255|0,f=(u>>10&e)/e*255|0,y=u>>15?255:0,b=i*this.width*4+4*o;this.data[b]=f,this.data[b+1]=s,this.data[b+2]=c,this.data[b+3]=y}this.pos+=t}},I0.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(c&e)/e*255|0,f=(c>>5&r)/r*255|0,y=(c>>11)/e*255|0,b=o*this.width*4+4*u;this.data[b]=y,this.data[b+1]=f,this.data[b+2]=s,this.data[b+3]=255}this.pos+=t}},I0.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=u,this.data[c+1]=o,this.data[c+2]=i,this.data[c+3]=255}this.pos+=this.width%4}},I0.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=u,this.data[s+1]=o,this.data[s+2]=i,this.data[s+3]=c}},I0.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,i,o){var u=new I0(e,!1),c=u.width,s=u.height,f={data:u.getData(),width:c,height:s},y=new Xm(100).encode(f,100);return t.processJPEG.call(this,y,r,i,o)}}(Bn.API),t5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,i,o){var u=new t5(e),c=u.width,s=u.height,f={data:u.getData(),width:c,height:s},y=new Xm(100).encode(f,100);return t.processJPEG.call(this,y,r,i,o)}}(Bn.API),Bn.API.processRGBA=function(t,e,r){for(var i=t.data,o=i.length,u=new Uint8Array(o/4*3),c=new Uint8Array(o/4),s=0,f=0,y=0;y<o;y+=4){var b=i[y],A=i[y+1],I=i[y+2],C=i[y+3];u[s++]=b,u[s++]=A,u[s++]=I,c[f++]=C}var N=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:N,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Bn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zh=Bn.API,N1=Zh.getCharWidthsArray=function(t,e){var r,i,o=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:o.metadata.Unicode.widths,f=s.fof?s.fof:1,y=e.kerning?e.kerning:o.metadata.Unicode.kerning,b=y.fof?y.fof:1,A=e.doKerning!==!1,I=0,C=t.length,N=0,O=s[0]||f,$=[];for(r=0;r<C;r++)i=t.charCodeAt(r),typeof o.metadata.widthOfString=="function"?$.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+c*(1e3/u)||0)/1e3):(I=A&&aa(y[i])==="object"&&!isNaN(parseInt(y[i][N],10))?y[i][N]/b:0,$.push((s[i]||O)/f+I)),N=i;return $},Kb=Zh.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Zh.processArabic&&(t=Zh.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,r,o)/r:N1.apply(this,arguments).reduce(function(u,c){return u+c},0)},Jb=function(t,e,r,i){for(var o=[],u=0,c=t.length,s=0;u!==c&&s+e[u]<r;)s+=e[u],u++;o.push(t.slice(0,u));var f=u;for(s=0;u!==c;)s+e[u]>i&&(o.push(t.slice(f,u)),s=0,f=u),s+=e[u],u++;return f!==u&&o.push(t.slice(f,u)),o},Qb=function(t,e,r){r||(r={});var i,o,u,c,s,f,y,b=[],A=[b],I=r.textIndent||0,C=0,N=0,O=t.split(" "),$=N1.apply(this,[" ",r])[0];if(f=r.lineIndent===-1?O[0].length+2:r.lineIndent||0){var G=Array(f).join(" "),Z=[];O.map(function(te){(te=te.split(/\s*\n/)).length>1?Z=Z.concat(te.map(function(_e,le){return(le&&_e.length?`
`:"")+_e})):Z.push(te[0])}),O=Z,f=Kb.apply(this,[G,r])}for(u=0,c=O.length;u<c;u++){var ee=0;if(i=O[u],f&&i[0]==`
`&&(i=i.substr(1),ee=1),I+C+(N=(o=N1.apply(this,[i,r])).reduce(function(te,_e){return te+_e},0))>e||ee){if(N>e){for(s=Jb.apply(this,[i,o,e-(I+C),e]),b.push(s.shift()),b=[s.pop()];s.length;)A.push([s.shift()]);N=o.slice(i.length-(b[0]?b[0].length:0)).reduce(function(te,_e){return te+_e},0)}else b=[i];A.push(b),I=N+f,C=$}else b.push(i),I+=C+N,C=$}return y=f?function(te,_e){return(_e?G:"")+te.join(" ")}:function(te){return te.join(" ")},A.map(y)},Zh.splitTextToSize=function(t,e,r){var i,o=(r=r||{}).fontSize||this.internal.getFontSize(),u=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var A=this.internal.getFont(b.fontName,b.fontStyle);return A.metadata.Unicode?{widths:A.metadata.Unicode.widths||{0:1},kerning:A.metadata.Unicode.kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/o;u.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,u.lineIndent=r.lineIndent;var s,f,y=[];for(s=0,f=i.length;s<f;s++)y=y.concat(Qb.apply(this,[i[s],c,u]));return y},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},i={},o=0;o<e.length;o++)r[e[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=e[o];var u=function(A){return"0x"+parseInt(A,10).toString(16)},c=t.__fontmetrics__.compress=function(A){var I,C,N,O,$=["{"];for(var G in A){if(I=A[G],isNaN(parseInt(G,10))?C="'"+G+"'":(G=parseInt(G,10),C=(C=u(G).slice(2)).slice(0,-1)+i[C.slice(-1)]),typeof I=="number")I<0?(N=u(I).slice(3),O="-"):(N=u(I).slice(2),O=""),N=O+N.slice(0,-1)+i[N.slice(-1)];else{if(aa(I)!=="object")throw new Error("Don't know what to do with value type "+aa(I)+".");N=c(I)}$.push(C+N)}return $.push("}"),$.join("")},s=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var I,C,N,O,$={},G=1,Z=$,ee=[],te="",_e="",le=A.length-1,we=1;we<le;we+=1)(O=A[we])=="'"?I?(N=I.join(""),I=void 0):I=[]:I?I.push(O):O=="{"?(ee.push([Z,N]),Z={},N=void 0):O=="}"?((C=ee.pop())[0][C[1]]=Z,N=void 0,Z=C[0]):O=="-"?G=-1:N===void 0?r.hasOwnProperty(O)?(te+=r[O],N=parseInt(te,16)*G,G=1,te=""):te+=O:r.hasOwnProperty(O)?(_e+=r[O],Z[N]=parseInt(_e,16)*G,G=1,N=void 0,_e=""):_e+=O;return $},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},b={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var I=A.font,C=b.Unicode[I.postScriptName];C&&(I.metadata.Unicode={},I.metadata.Unicode.widths=C.widths,I.metadata.Unicode.kerning=C.kerning);var N=y.Unicode[I.postScriptName];N&&(I.metadata.Unicode.encoding=N,I.encoding=N.codePages[0])}])}(Bn.API),function(t){var e=function(r){for(var i=r.length,o=new Uint8Array(i),u=0;u<i;u++)o[u]=r.charCodeAt(u);return o};t.API.events.push(["addFont",function(r){var i=void 0,o=r.font,u=r.instance;if(!o.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=u.existsFileInVFS(o.postScriptName)===!1?u.loadFile(o.postScriptName):u.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(yp(s)),c.metadata=t.API.TTFFont.open(s),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,i)}}])}(Bn),function(t){function e(){return(jn.canvg?Promise.resolve(jn.canvg):Ip(()=>import("./index.es.99f6864c.js"),[],import.meta.url)).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Bn.API.addSvgAsImage=function(r,i,o,u,c,s,f,y){if(isNaN(i)||isNaN(o))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(c))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=u,b.height=c;var A=b.getContext("2d");A.fillStyle="#fff",A.fillRect(0,0,b.width,b.height);var I={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return e().then(function(N){return N.fromString(A,r,I)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(I)}).then(function(){C.addImage(b.toDataURL("image/jpeg",1),i,o,u,c,f,y)})}}(),Bn.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(e,r);return this},Bn.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var i,o,u,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(c),f=[],y=0,b=0,A=0;function I(N,O){var $,G=!1;for($=0;$<N.length;$+=1)N[$]===O&&(G=!0);return G}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var C=s.length;for(A=0;A<C;A+=1)r[s[A]].value=r[s[A]].defaultValue,r[s[A]].explicitSet=!1}if(aa(t)==="object"){for(o in t)if(u=t[o],I(s,o)&&u!==void 0){if(r[o].type==="boolean"&&typeof u=="boolean")r[o].value=u;else if(r[o].type==="name"&&I(r[o].valueSet,u))r[o].value=u;else if(r[o].type==="integer"&&Number.isInteger(u))r[o].value=u;else if(r[o].type==="array"){for(y=0;y<u.length;y+=1)if(i=!0,u[y].length===1&&typeof u[y][0]=="number")f.push(String(u[y]-1));else if(u[y].length>1){for(b=0;b<u[y].length;b+=1)typeof u[y][b]!="number"&&(i=!1);i===!0&&f.push([u[y][0]-1,u[y][1]-1].join(" "))}r[o].value="["+f.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,O=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?O.push("/"+N+" /"+r[N].value):O.push("/"+N+" "+r[N].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(i)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),y=u.length+c.length+s.length+o.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(o+u+c+s+f),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Bn.API),function(t){var e=t.API,r=e.pdfEscape16=function(u,c){for(var s,f=c.metadata.Unicode.widths,y=["","0","00","000","0000"],b=[""],A=0,I=u.length;A<I;++A){if(s=c.metadata.characterToGlyph(u.charCodeAt(A)),c.metadata.glyIdsUsed.push(s),c.metadata.toUnicode[s]=u.charCodeAt(A),f.indexOf(s)==-1&&(f.push(s),f.push([parseInt(c.metadata.widthOfGlyph(s),10)])),s=="0")return b.join("");s=s.toString(16),b.push(y[4-s.length],s)}return b.join("")},i=function(u){var c,s,f,y,b,A,I;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],A=0,I=(s=Object.keys(u).sort(function(C,N){return C-N})).length;A<I;A++)c=s[A],f.length>=100&&(b+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),u[c]!==void 0&&u[c]!==null&&typeof u[c].toString=="function"&&(y=("0000"+u[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+y+">"));return f.length&&(b+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(c){var s=c.font,f=c.out,y=c.newObject,b=c.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var A=s.metadata.Unicode.widths,I=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),C="",N=0;N<I.length;N++)C+=String.fromCharCode(I[N]);var O=y();b({data:C,addLength1:!0,objectId:O}),f("endobj");var $=y();b({data:i(s.metadata.toUnicode),addLength1:!0,objectId:$}),f("endobj");var G=y();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+id(s.fontName)),f("/FontFile2 "+O+" 0 R"),f("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),f("/Flags "+s.metadata.flags),f("/StemV "+s.metadata.stemV),f("/ItalicAngle "+s.metadata.italicAngle),f("/Ascent "+s.metadata.ascender),f("/Descent "+s.metadata.decender),f("/CapHeight "+s.metadata.capHeight),f(">>"),f("endobj");var Z=y();f("<<"),f("/Type /Font"),f("/BaseFont /"+id(s.fontName)),f("/FontDescriptor "+G+" 0 R"),f("/W "+t.API.PDFObject.convert(A)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+s.encoding+")"),f(">>"),f(">>"),f("endobj"),s.objectNumber=y(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+$+" 0 R"),f("/BaseFont /"+id(s.fontName)),f("/Encoding /"+s.encoding),f("/DescendantFonts ["+Z+" 0 R]"),f(">>"),f("endobj"),s.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(c){var s=c.font,f=c.out,y=c.newObject,b=c.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var A=s.metadata.rawData,I="",C=0;C<A.length;C++)I+=String.fromCharCode(A[C]);var N=y();b({data:I,addLength1:!0,objectId:N}),f("endobj");var O=y();b({data:i(s.metadata.toUnicode),addLength1:!0,objectId:O}),f("endobj");var $=y();f("<<"),f("/Descent "+s.metadata.decender),f("/CapHeight "+s.metadata.capHeight),f("/StemV "+s.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+N+" 0 R"),f("/Flags 96"),f("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),f("/FontName /"+id(s.fontName)),f("/ItalicAngle "+s.metadata.italicAngle),f("/Ascent "+s.metadata.ascender),f(">>"),f("endobj"),s.objectNumber=y();for(var G=0;G<s.metadata.hmtx.widths.length;G++)s.metadata.hmtx.widths[G]=parseInt(s.metadata.hmtx.widths[G]*(1e3/s.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+id(s.fontName)+"/FontDescriptor "+$+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),f("endobj"),s.isAlreadyPutted=!0}})(u)}]);var o=function(u){var c,s=u.text||"",f=u.x,y=u.y,b=u.options||{},A=u.mutex||{},I=A.pdfEscape,C=A.activeFontKey,N=A.fonts,O=C,$="",G=0,Z="",ee=N[O].encoding;if(N[O].encoding!=="Identity-H")return{text:s,x:f,y,options:b,mutex:A};for(Z=s,O=C,Array.isArray(s)&&(Z=s[0]),G=0;G<Z.length;G+=1)N[O].metadata.hasOwnProperty("cmap")&&(c=N[O].metadata.cmap.unicode.codeMap[Z[G].charCodeAt(0)]),c||Z[G].charCodeAt(0)<256&&N[O].metadata.hasOwnProperty("Unicode")?$+=Z[G]:$+="";var te="";return parseInt(O.slice(1))<14||ee==="WinAnsiEncoding"?te=I($,O).split("").map(function(_e){return _e.charCodeAt(0).toString(16)}).join(""):ee==="Identity-H"&&(te=r($,N[O])),A.isHex=!0,{text:te,x:f,y,options:b,mutex:A}};e.events.push(["postProcessText",function(u){var c=u.text||"",s=[],f={text:c,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?s.push([o(Object.assign({},f,{text:c[y][0]})).text,c[y][1],c[y][2]]):s.push(o(Object.assign({},f,{text:c[y]})).text);u.text=s}else u.text=o(Object.assign({},f,{text:c})).text}])}(Bn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,i){return e.call(this),this.internal.vFS[r]=i,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Bn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,u,c,s,f,y,b,A=e,I=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},$=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],G=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Z=!1,ee=0;this.__bidiEngine__={};var te=function(Ce){var Me=Ce.charCodeAt(),qe=Me>>8,it=O[qe];return it!==void 0?A[256*it+(255&Me)]:qe===252||qe===253?"AL":G.test(qe)?"L":qe===8?"R":"N"},_e=function(Ce){for(var Me,qe=0;qe<Ce.length;qe++){if((Me=te(Ce.charAt(qe)))==="L")return!1;if(Me==="R")return!0}return!1},le=function(Ce,Me,qe,it){var xt,yt,$e,at,mt=Me[it];switch(mt){case"L":case"R":Z=!1;break;case"N":case"AN":break;case"EN":Z&&(mt="AN");break;case"AL":Z=!0,mt="R";break;case"WS":mt="N";break;case"CS":it<1||it+1>=Me.length||(xt=qe[it-1])!=="EN"&&xt!=="AN"||(yt=Me[it+1])!=="EN"&&yt!=="AN"?mt="N":Z&&(yt="AN"),mt=yt===xt?yt:"N";break;case"ES":mt=(xt=it>0?qe[it-1]:"B")==="EN"&&it+1<Me.length&&Me[it+1]==="EN"?"EN":"N";break;case"ET":if(it>0&&qe[it-1]==="EN"){mt="EN";break}if(Z){mt="N";break}for($e=it+1,at=Me.length;$e<at&&Me[$e]==="ET";)$e++;mt=$e<at&&Me[$e]==="EN"?"EN":"N";break;case"NSM":if(c&&!s){for(at=Me.length,$e=it+1;$e<at&&Me[$e]==="NSM";)$e++;if($e<at){var Xe=Ce[it],wt=Xe>=1425&&Xe<=2303||Xe===64286;if(xt=Me[$e],wt&&(xt==="R"||xt==="AL")){mt="R";break}}}mt=it<1||(xt=Me[it-1])==="B"?"N":qe[it-1];break;case"B":Z=!1,o=!0,mt=ee;break;case"S":u=!0,mt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Z=!1;break;case"BN":mt="N"}return mt},we=function(Ce,Me,qe){var it=Ce.split("");return qe&&ue(it,qe,{hiLevel:ee}),it.reverse(),Me&&Me.reverse(),it.join("")},ue=function(Ce,Me,qe){var it,xt,yt,$e,at,mt=-1,Xe=Ce.length,wt=0,be=[],Be=ee?C:I,Ae=[];for(Z=!1,o=!1,u=!1,xt=0;xt<Xe;xt++)Ae[xt]=te(Ce[xt]);for(yt=0;yt<Xe;yt++){if(at=wt,be[yt]=le(Ce,Ae,be,yt),it=240&(wt=Be[at][N[be[yt]]]),wt&=15,Me[yt]=$e=Be[wt][5],it>0)if(it===16){for(xt=mt;xt<yt;xt++)Me[xt]=1;mt=-1}else mt=-1;if(Be[wt][6])mt===-1&&(mt=yt);else if(mt>-1){for(xt=mt;xt<yt;xt++)Me[xt]=$e;mt=-1}Ae[yt]==="B"&&(Me[yt]=0),qe.hiLevel|=$e}u&&function(ht,Nt,zt){for(var Mt=0;Mt<zt;Mt++)if(ht[Mt]==="S"){Nt[Mt]=ee;for(var Kt=Mt-1;Kt>=0&&ht[Kt]==="WS";Kt--)Nt[Kt]=ee}}(Ae,Me,Xe)},ze=function(Ce,Me,qe,it,xt){if(!(xt.hiLevel<Ce)){if(Ce===1&&ee===1&&!o)return Me.reverse(),void(qe&&qe.reverse());for(var yt,$e,at,mt,Xe=Me.length,wt=0;wt<Xe;){if(it[wt]>=Ce){for(at=wt+1;at<Xe&&it[at]>=Ce;)at++;for(mt=wt,$e=at-1;mt<$e;mt++,$e--)yt=Me[mt],Me[mt]=Me[$e],Me[$e]=yt,qe&&(yt=qe[mt],qe[mt]=qe[$e],qe[$e]=yt);wt=at}wt++}}},Ue=function(Ce,Me,qe){var it=Ce.split(""),xt={hiLevel:ee};return qe||(qe=[]),ue(it,qe,xt),function(yt,$e,at){if(at.hiLevel!==0&&b)for(var mt,Xe=0;Xe<yt.length;Xe++)$e[Xe]===1&&(mt=$.indexOf(yt[Xe]))>=0&&(yt[Xe]=$[mt+1])}(it,qe,xt),ze(2,it,Me,qe,xt),ze(1,it,Me,qe,xt),it.join("")};return this.__bidiEngine__.doBidiReorder=function(Ce,Me,qe){if(function(xt,yt){if(yt)for(var $e=0;$e<xt.length;$e++)yt[$e]=$e;s===void 0&&(s=_e(xt)),y===void 0&&(y=_e(xt))}(Ce,Me),c||!f||y)if(c&&f&&s^y)ee=s?1:0,Ce=we(Ce,Me,qe);else if(!c&&f&&y)ee=s?1:0,Ce=Ue(Ce,Me,qe),Ce=we(Ce,Me);else if(!c||s||f||y){if(c&&!f&&s^y)Ce=we(Ce,Me),s?(ee=0,Ce=Ue(Ce,Me,qe)):(ee=1,Ce=Ue(Ce,Me,qe),Ce=we(Ce,Me));else if(c&&s&&!f&&y)ee=1,Ce=Ue(Ce,Me,qe),Ce=we(Ce,Me);else if(!c&&!f&&s^y){var it=b;s?(ee=1,Ce=Ue(Ce,Me,qe),ee=0,b=!1,Ce=Ue(Ce,Me,qe),b=it):(ee=0,Ce=Ue(Ce,Me,qe),Ce=we(Ce,Me),ee=1,b=!1,Ce=Ue(Ce,Me,qe),b=it,Ce=we(Ce,Me))}}else ee=0,Ce=Ue(Ce,Me,qe);else ee=s?1:0,Ce=Ue(Ce,Me,qe);return Ce},this.__bidiEngine__.setOptions=function(Ce){Ce&&(c=Ce.isInputVisual,f=Ce.isOutputVisual,s=Ce.isInputRtl,y=Ce.isOutputRtl,b=Ce.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text,u=(i.x,i.y,i.options||{}),c=(i.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,r.setOptions(u),Object.prototype.toString.call(o)==="[object Array]"){var s=0;for(c=[],s=0;s<o.length;s+=1)Object.prototype.toString.call(o[s])==="[object Array]"?c.push([r.doBidiReorder(o[s][0]),o[s][1],o[s][2]]):c.push([r.doBidiReorder(o[s])]);i.text=c}else i.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])}(Bn),Bn.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new oh(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new TE(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new gE(this.contents),this.head=new _E(this),this.name=new kE(this),this.cmap=new $8(this),this.toUnicode={},this.hhea=new vE(this),this.maxp=new AE(this),this.hmtx=new SE(this),this.post=new wE(this),this.os2=new bE(this),this.loca=new LE(this),this.glyf=new EE(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,i,o,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,s,f,y;for(y=[],c=0,s=(f=this.bbox).length;c<s;c++)e=f[c],y.push(Math.round(e*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(r=o>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,i){var o,u,c,s;for(c=0,u=0,s=(e=""+e).length;0<=s?u<s:u>s;u=0<=s?++u:--u)o=e.charCodeAt(u),c+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/r)||0;return c*(r/1e3)},t.prototype.lineHeight=function(e,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var R0,oh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,i;for(i=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var r,i,o;for(o=[],r=0,i=e.length;0<=i?r<i:r>i;r=0<=i?++r:--r)o.push(this.writeByte(e.charCodeAt(r)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,i,o,u,c,s,f;return e=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),s=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^u)+65536*(255^c)+256*(255^s)+(255^f)+1):72057594037927940*e+281474976710656*r+1099511627776*i+4294967296*o+16777216*u+65536*c+256*s+f},t.prototype.writeLongLong=function(e){var r,i;return r=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,i;for(r=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)r.push(this.readByte());return r},t.prototype.write=function(e){var r,i,o,u;for(u=[],i=0,o=e.length;i<o;i++)r=e[i],u.push(this.writeByte(r));return u},t}(),gE=function(){var t;function e(r){var i,o,u;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,u=this.tableCount;0<=u?o<u:o>u;o=0<=u?++o:--o)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(r){var i,o,u,c,s,f,y,b,A,I,C,N,O;for(O in C=Object.keys(r).length,f=Math.log(2),A=16*Math.floor(Math.log(C)/f),c=Math.floor(A/f),b=16*C-A,(o=new oh).writeInt(this.scalarType),o.writeShort(C),o.writeShort(A),o.writeShort(c),o.writeShort(b),u=16*C,y=o.pos+u,s=null,N=[],r)for(I=r[O],o.writeString(O),o.writeInt(t(I)),o.writeInt(y),o.writeInt(I.length),N=N.concat(I),O==="head"&&(s=y),y+=I.length;y%4;)N.push(0),y++;return o.write(N),i=2981146554-t(o.data),o.pos=s+8,o.writeUInt32(i),o.data},t=function(r){var i,o,u,c;for(r=G8.call(r);r.length%4;)r.push(0);for(u=new oh(r),o=0,i=0,c=r.length;i<c;i=i+=4)o+=u.readUInt32();return 4294967295&o},e}(),yE={}.hasOwnProperty,cf=function(t,e){for(var r in e)yE.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};R0=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var _E=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var i;return(i=new oh).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},e}(),r5=function(){function t(e,r){var i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),A=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(C=e.readUInt16(),I=C/2,e.pos+=6,u=function(){var te,_e;for(_e=[],f=te=0;0<=I?te<I:te>I;f=0<=I?++te:--te)_e.push(e.readUInt16());return _e}(),e.pos+=2,O=function(){var te,_e;for(_e=[],f=te=0;0<=I?te<I:te>I;f=0<=I?++te:--te)_e.push(e.readUInt16());return _e}(),y=function(){var te,_e;for(_e=[],f=te=0;0<=I?te<I:te>I;f=0<=I?++te:--te)_e.push(e.readUInt16());return _e}(),b=function(){var te,_e;for(_e=[],f=te=0;0<=I?te<I:te>I;f=0<=I?++te:--te)_e.push(e.readUInt16());return _e}(),o=(this.length-e.pos+this.offset)/2,s=function(){var te,_e;for(_e=[],f=te=0;0<=o?te<o:te>o;f=0<=o?++te:--te)_e.push(e.readUInt16());return _e}(),f=G=0,ee=u.length;G<ee;f=++G)for($=u[f],i=Z=N=O[f];N<=$?Z<=$:Z>=$;i=N<=$?++Z:--Z)b[f]===0?c=i+y[f]:(c=s[b[f]/2+(i-N)-(I-f)]||0)!==0&&(c+=y[f]),this.codeMap[i]=65535&c}e.pos=A}return t.encode=function(e,r){var i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt,yt,$e,at,mt,Xe,wt,be,Be,Ae,ht,Nt,zt,Mt,Kt,yr,Er,Jt;switch(it=new oh,c=Object.keys(e).sort(function(It,Fr){return It-Fr}),r){case"macroman":for(O=0,$=function(){var It=[];for(N=0;N<256;++N)It.push(0);return It}(),Z={0:0},u={},xt=0,mt=c.length;xt<mt;xt++)Z[Kt=e[o=c[xt]]]==null&&(Z[Kt]=++O),u[o]={old:e[o],new:Z[e[o]]},$[o]=Z[e[o]];return it.writeUInt16(1),it.writeUInt16(0),it.writeUInt32(12),it.writeUInt16(0),it.writeUInt16(262),it.writeUInt16(0),it.write($),{charMap:u,subtable:it.data,maxGlyphID:O+1};case"unicode":for(Me=[],A=[],ee=0,Z={},i={},G=y=null,yt=0,Xe=c.length;yt<Xe;yt++)Z[_e=e[o=c[yt]]]==null&&(Z[_e]=++ee),i[o]={old:_e,new:Z[_e]},s=Z[_e]-o,G!=null&&s===y||(G&&A.push(G),Me.push(o),y=s),G=o;for(G&&A.push(G),A.push(65535),Me.push(65535),Ue=2*(ze=Me.length),ue=2*Math.pow(Math.log(ze)/Math.LN2,2),I=Math.log(ue/2)/Math.LN2,we=2*ze-ue,f=[],le=[],C=[],N=$e=0,wt=Me.length;$e<wt;N=++$e){if(Ce=Me[N],b=A[N],Ce===65535){f.push(0),le.push(0);break}if(Ce-(qe=i[Ce].new)>=32768)for(f.push(0),le.push(2*(C.length+ze-N)),o=at=Ce;Ce<=b?at<=b:at>=b;o=Ce<=b?++at:--at)C.push(i[o].new);else f.push(qe-Ce),le.push(0)}for(it.writeUInt16(3),it.writeUInt16(1),it.writeUInt32(12),it.writeUInt16(4),it.writeUInt16(16+8*ze+2*C.length),it.writeUInt16(0),it.writeUInt16(Ue),it.writeUInt16(ue),it.writeUInt16(I),it.writeUInt16(we),zt=0,be=A.length;zt<be;zt++)o=A[zt],it.writeUInt16(o);for(it.writeUInt16(0),Mt=0,Be=Me.length;Mt<Be;Mt++)o=Me[Mt],it.writeUInt16(o);for(yr=0,Ae=f.length;yr<Ae;yr++)s=f[yr],it.writeUInt16(s);for(Er=0,ht=le.length;Er<ht;Er++)te=le[Er],it.writeUInt16(te);for(Jt=0,Nt=C.length;Jt<Nt;Jt++)O=C[Jt],it.writeUInt16(O);return{charMap:i,subtable:it.data,maxGlyphID:ee+1}}},t}(),$8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="cmap",e.prototype.parse=function(r){var i,o,u;for(r.pos=this.offset,this.version=r.readUInt16(),u=r.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=u?o<u:o>u;o=0<=u?++o:--o)i=new r5(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(r,i){var o,u;return i==null&&(i="macroman"),o=r5.encode(r,i),(u=new oh).writeUInt16(0),u.writeUInt16(1),o.table=u.data.concat(o.subtable),o},e}(),vE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),bE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(r.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(r.readInt());return o}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(r.readInt());return o}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),wE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="post",e.prototype.parse=function(r){var i,o,u;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(o=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],u=[];r.pos<this.offset+this.length;)i=r.readByte(),u.push(this.names.push(r.readString(i)));return u;case 151552:return o=r.readUInt16(),this.offsets=r.read(o);case 196608:break;case 262144:return this.map=(function(){var s,f,y;for(y=[],c=s=0,f=this.file.maxp.numGlyphs;0<=f?s<f:s>f;c=0<=f?++s:--s)y.push(r.readUInt32());return y}).call(this)}},e}(),xE=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},kE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="name",e.prototype.parse=function(r){var i,o,u,c,s,f,y,b,A,I,C;for(r.pos=this.offset,r.readShort(),i=r.readShort(),f=r.readShort(),o=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)o.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+f+r.readShort()});for(y={},c=A=0,I=o.length;A<I;c=++A)u=o[c],r.pos=u.offset,b=r.readString(u.length),s=new xE(b,u),y[C=u.nameID]==null&&(y[C]=[]),y[u.nameID].push(s);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),AE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),SE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="hmtx",e.prototype.parse=function(r){var i,o,u,c,s,f,y;for(r.pos=this.offset,this.metrics=[],i=0,f=this.file.hhea.numberOfMetrics;0<=f?i<f:i>f;i=0<=f?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,A;for(A=[],i=b=0;0<=u?b<u:b>u;i=0<=u?++b:--b)A.push(r.readInt16());return A}(),this.widths=(function(){var b,A,I,C;for(C=[],b=0,A=(I=this.metrics).length;b<A;b++)c=I[b],C.push(c.advance);return C}).call(this),o=this.widths[this.widths.length-1],y=[],i=s=0;0<=u?s<u:s>u;i=0<=u?++s:--s)y.push(this.widths.push(o));return y},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),G8=[].slice,EE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var i,o,u,c,s,f,y,b,A,I;return r in this.cache?this.cache[r]:(c=this.file.loca,i=this.file.contents,o=c.indexOf(r),(u=c.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+o,s=(f=new oh(i.read(u))).readShort(),b=f.readShort(),I=f.readShort(),y=f.readShort(),A=f.readShort(),this.cache[r]=s===-1?new IE(f,b,I,y,A):new CE(f,s,b,I,y,A),this.cache[r]))},e.prototype.encode=function(r,i,o){var u,c,s,f,y;for(s=[],c=[],f=0,y=i.length;f<y;f++)u=r[i[f]],c.push(s.length),u&&(s=s.concat(u.encode(o)));return c.push(s.length),{table:s,offsets:c}},e}(),CE=function(){function t(e,r,i,o,u,c){this.raw=e,this.numberOfContours=r,this.xMin=i,this.yMin=o,this.xMax=u,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),IE=function(){function t(e,r,i,o,u){var c,s;for(this.raw=e,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;s=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&s;)c.pos+=1&s?4:2,128&s?c.pos+=8:64&s?c.pos+=4:8&s&&(c.pos+=2)}return t.prototype.encode=function(){var e,r,i;for(r=new oh(G8.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),LE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return cf(e,R0),e.prototype.tag="loca",e.prototype.parse=function(r){var i,o;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var u,c;for(c=[],o=0,u=this.length;o<u;o+=2)c.push(2*r.readUInt16());return c}).call(this):(function(){var u,c;for(c=[],o=0,u=this.length;o<u;o+=4)c.push(r.readUInt32());return c}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,i){for(var o=new Uint32Array(this.offsets.length),u=0,c=0,s=0;s<o.length;++s)if(o[s]=u,c<i.length&&i[c]==s){++c,o[s]=u;var f=this.offsets[s],y=this.offsets[s+1]-f;y>0&&(u+=y)}for(var b=new Array(4*o.length),A=0;A<o.length;++A)b[4*A+3]=255&o[A],b[4*A+2]=(65280&o[A])>>8,b[4*A+1]=(16711680&o[A])>>16,b[4*A]=(4278190080&o[A])>>24;return b},e}(),TE=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,i,o,u;for(r in o=this.font.cmap.tables[0].codeMap,e={},u=this.subset)i=u[r],e[r]=o[i];return e},t.prototype.glyphsFor=function(e){var r,i,o,u,c,s,f;for(o={},c=0,s=e.length;c<s;c++)o[u=e[c]]=this.font.glyf.glyphFor(u);for(u in r=[],o)(i=o[u])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(u in f=this.glyphsFor(r))i=f[u],o[u]=i;return o},t.prototype.encode=function(e,r){var i,o,u,c,s,f,y,b,A,I,C,N,O,$,G;for(o in i=$8.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),C={0:0},G=i.charMap)C[(f=G[o]).old]=f.new;for(N in I=i.maxGlyphID,c)N in C||(C[N]=I++);return b=function(Z){var ee,te;for(ee in te={},Z)te[Z[ee]]=ee;return te}(C),A=Object.keys(b).sort(function(Z,ee){return Z-ee}),O=function(){var Z,ee,te;for(te=[],Z=0,ee=A.length;Z<ee;Z++)s=A[Z],te.push(b[s]);return te}(),u=this.font.glyf.encode(c,O,C),y=this.font.loca.encode(u.offsets,O),$={cmap:this.font.cmap.raw(),glyf:u.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&($["OS/2"]=this.font.os2.raw()),this.font.directory.encode($)},t}();Bn.API.PDFObject=function(){var t;function e(){}return t=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},e.convert=function(r){var i,o,u,c;if(Array.isArray(r))return"["+function(){var s,f,y;for(y=[],s=0,f=r.length;s<f;s++)i=r[s],y.push(e.convert(i));return y}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in u=["<<"],r)c=r[o],u.push("/"+o+" "+e.convert(c));return u.push(">>"),u.join(`
`)}return""+r},e}();const T0={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},Sh={in:"in",mm:"mm"},Jf={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},rf={Landscape:"landscape",Portrait:"portrait"},Cd={72:72,96:96,200:200,300:300,400:400};class PE{constructor(){li(this,"map");li(this,"width",Jf.A4[0]);li(this,"height",Jf.A4[1]);li(this,"dpi",Cd[96]);li(this,"format",T0.PNG.toString());li(this,"unit",Sh.mm)}generate(e,r=Jf.A4,i=300,o=T0.PNG.toString(),u=Sh.mm){this.map=e,this.width=r[0],this.height=r[1],this.dpi=i,this.format=o,this.unit=u;const c=this,s=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return c.dpi/96}});const f=document.createElement("div");f.className="hidden-map",document.body.appendChild(f);const y=document.createElement("div");y.style.width=this.toPixels(this.width),y.style.height=this.toPixels(this.height),f.appendChild(y);const b=this.map.getStyle();if(b&&b.sources){const I=b.sources;Object.keys(I).forEach(C=>{const N=I[C];Object.keys(N).forEach(O=>{N[O]||delete N[O]})})}const A=new lc.Map({container:y,style:b,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});A.once("idle",()=>{var N;const I=A.getCanvas(),C=`map.${c.format}`;switch(c.format){case T0.PNG:c.toPNG(I,C);break;case T0.JPEG:c.toJPEG(I,C);break;case T0.PDF:c.toPDF(A,C);break;case T0.SVG:c.toSVG(I,C);break;default:console.error(`Invalid file format: ${c.format}`);break}A.remove(),(N=f.parentNode)==null||N.removeChild(f),Object.defineProperty(window,"devicePixelRatio",{get(){return s}})})}toPNG(e,r){const i=document.createElement("a");i.href=e.toDataURL(),i.download=r,i.click(),i.remove()}toJPEG(e,r){const i=e.toDataURL("image/jpeg",.85),o=document.createElement("a");o.href=i,o.download=r,o.click(),o.remove()}toPDF(e,r){const i=e.getCanvas(),o=new Bn({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});o.addImage(i.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:c}=e.getCenter();o.setProperties({title:e.getStyle().name,subject:`center: [${u}, ${c}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),o.save(r)}toSVG(e,r){const i=e.toDataURL("image/png"),o=Number(this.toPixels(this.width,this.dpi).replace("px","")),u=Number(this.toPixels(this.height,this.dpi).replace("px","")),c=`
		<svg xmlns="http://www.w3.org/2000/svg" 
			xmlns:xlink="http://www.w3.org/1999/xlink" 
			version="1.1" 
			width="${o}" 
			height="${u}" 
			viewBox="0 0 ${o} ${u}" 
			xml:space="preserve">
		    <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
			xlink:href="${i}" width="${o}" height="${u}"></image>
		</svg>`,s=document.createElement("a");s.href=`data:application/xml,${encodeURIComponent(c)}`,s.download=r,s.click(),s.remove()}toPixels(e,r=96){return this.unit===Sh.mm&&(r/=25.4),`${r*e}px`}toBlob(e){const r=atob(e.replace(/^.*,/,"")),i=new Uint8Array(r.length);for(let u=0;u<r.length;u+=1)i[u]=r.charCodeAt(u);return new Blob([i.buffer],{type:"image/png"})}}const ME=Object.freeze(Object.defineProperty({__proto__:null,DPI:Cd,Format:T0,PageOrientation:rf,Size:Jf,Unit:Sh,default:PE},Symbol.toStringTag,{value:"Module"}));class DE{constructor(e){li(this,"map");li(this,"width");li(this,"height");li(this,"unit");li(this,"svgCanvas");li(this,"svgPath");var c,s,f;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const r=(c=this.map)==null?void 0:c.getCanvas().clientWidth,i=(s=this.map)==null?void 0:s.getCanvas().clientHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.setAttribute("width",`${r}px`),o.setAttribute("height",`${i}px`);const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("style","fill:#888888;stroke-width:0"),u.setAttribute("fill-opacity","0.5"),o.append(u),(f=this.map)==null||f.getCanvasContainer().appendChild(o),this.svgCanvas=o,this.svgPath=u}mapResize(){this.generateCutOut()}updateArea(e,r){this.width=e,this.height=r,this.unit=Sh.mm,this.generateCutOut()}generateCutOut(){var y,b;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0||!(this.width&&this.height))return;const e=this.toPixels(this.width),r=this.toPixels(this.height),i=(y=this.map)==null?void 0:y.getCanvas().clientWidth,o=(b=this.map)==null?void 0:b.getCanvas().clientHeight,u=i/2-e/2,c=u+e,s=o/2-r/2,f=s+r;this.svgCanvas.setAttribute("width",`${i}px`),this.svgCanvas.setAttribute("height",`${o}px`),this.svgPath.setAttribute("d",`M 0 0 L ${i} 0 L ${i} ${o} L 0 ${o} M ${u} ${s} L ${u} ${f} L ${c} ${f} L ${c} ${s}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e,r=96){return this.unit===Sh.mm&&(r/=25.4),r*e}}class zE{constructor(e){li(this,"map");li(this,"width");li(this,"height");li(this,"svgCanvas");li(this,"xLine");li(this,"yLine");li(this,"color","#535353");this.map=e,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,r;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,r=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${r}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${r}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="relative",r.setAttribute("width",`${this.width}px`),r.setAttribute("height",`${this.height}px`);const i=this.width/2,o=this.height/2;this.yLine=r.appendChild(this.createLine(i.toString(),"0",i.toString(),this.height.toString(),this.color,"2px")),this.xLine=r.appendChild(this.createLine("0",o.toString(),this.width.toString(),o.toString(),this.color,"2px")),e==null||e.appendChild(r),this.svgCanvas=r}}createLine(e,r,i,o,u,c){const s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",e),s.setAttribute("y1",r),s.setAttribute("x2",i),s.setAttribute("y2",o),s.setAttribute("stroke-dasharray","5,5"),s.setAttribute("stroke",u),s.setAttribute("stroke-width",c),s}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}var Ym={dragStart:!0},i5=(t,e,r)=>Math.min(Math.max(t,e),r),Km=t=>typeof t=="string",NE=([t,e],r,i)=>{const o=(u,c)=>c===0?0:Math.ceil(u/c)*c;return[o(r,t),o(i,e)]},n5=(t,e)=>t.some(r=>e.some(i=>r.contains(i)));function Jm(t,e){if(t===void 0)return;if(xy(t))return t.getBoundingClientRect();if(typeof t=="object"){const{top:i=0,left:o=0,right:u=0,bottom:c=0}=t;return{top:i,right:window.innerWidth-u,bottom:window.innerHeight-c,left:o}}if(t==="parent")return e.parentNode.getBoundingClientRect();const r=document.querySelector(t);if(r===null)throw new Error("The selector provided for bound doesn't exists in the document.");return r.getBoundingClientRect()}var R1=(t,e,r)=>t.style.setProperty(e,r),xy=t=>t instanceof HTMLElement,RE=(t,e={})=>{let r,i,{bounds:o,axis:u="both",gpuAcceleration:c=!0,legacyTranslate:s=!0,transform:f,applyUserSelectHack:y=!0,disabled:b=!1,ignoreMultitouch:A=!1,recomputeBounds:I=Ym,grid:C,position:N,cancel:O,handle:$,defaultClass:G="neodrag",defaultClassDragging:Z="neodrag-dragging",defaultClassDragged:ee="neodrag-dragged",defaultPosition:te={x:0,y:0},onDragStart:_e,onDrag:le,onDragEnd:we}=e,ue=!1,ze=0,Ue=0,Ce=0,Me=0,qe=0,it=0,{x:xt,y:yt}=N?{x:(N==null?void 0:N.x)??0,y:(N==null?void 0:N.y)??0}:te;Nt(xt,yt);let $e,at,mt,Xe,wt,be="",Be=!!N;I={...Ym,...I};const Ae=document.body.style,ht=t.classList;function Nt(It=ze,Fr=Ue){if(!f){if(s){let ct=`${+It}px, ${+Fr}px`;return R1(t,"transform",c?`translate3d(${ct}, 0)`:`translate(${ct})`)}return R1(t,"translate",`${+It}px ${+Fr}px ${c?"1px":""}`)}const Ft=f({offsetX:It,offsetY:Fr,rootNode:t});Km(Ft)&&R1(t,"transform",Ft)}const zt=(It,Fr)=>{const Ft={offsetX:ze,offsetY:Ue,rootNode:t,currentNode:wt};t.dispatchEvent(new CustomEvent(It,{detail:Ft})),Fr==null||Fr(Ft)},Mt=addEventListener;Mt("pointerdown",yr,!1),Mt("pointerup",Er,!1),Mt("pointermove",Jt,!1),R1(t,"touch-action","none");const Kt=()=>{let It=t.offsetWidth/at.width;return isNaN(It)&&(It=1),It};function yr(It){if(b||It.button===2||A&&!It.isPrimary)return;if(I.dragStart&&($e=Jm(o,t)),Km($)&&Km(O)&&$===O)throw new Error("`handle` selector can't be same as `cancel` selector");if(ht.add(G),mt=function(Jr,dr){if(!Jr)return[dr];if(xy(Jr))return[Jr];if(Array.isArray(Jr))return Jr;const zr=dr.querySelectorAll(Jr);if(zr===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(zr.values())}($,t),Xe=function(Jr,dr){if(!Jr)return[];if(xy(Jr))return[Jr];if(Array.isArray(Jr))return Jr;const zr=dr.querySelectorAll(Jr);if(zr===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(zr.values())}(O,t),r=/(both|x)/.test(u),i=/(both|y)/.test(u),n5(Xe,mt))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const Fr=It.composedPath()[0];if(!mt.some(Jr=>{var dr;return Jr.contains(Fr)||((dr=Jr.shadowRoot)==null?void 0:dr.contains(Fr))})||n5(Xe,[Fr]))return;wt=mt.length===1?t:mt.find(Jr=>Jr.contains(Fr)),ue=!0,at=t.getBoundingClientRect(),y&&(be=Ae.userSelect,Ae.userSelect="none"),zt("neodrag:start",_e);const{clientX:Ft,clientY:ct}=It,mr=Kt();r&&(Ce=Ft-xt/mr),i&&(Me=ct-yt/mr),$e&&(qe=Ft-at.left,it=ct-at.top)}function Er(){ue&&(I.dragEnd&&($e=Jm(o,t)),ht.remove(Z),ht.add(ee),y&&(Ae.userSelect=be),zt("neodrag:end",we),r&&(Ce=ze),i&&(Me=Ue),ue=!1)}function Jt(It){if(!ue)return;I.drag&&($e=Jm(o,t)),ht.add(Z),It.preventDefault(),at=t.getBoundingClientRect();let Fr=It.clientX,Ft=It.clientY;const ct=Kt();if($e){const mr={left:$e.left+qe,top:$e.top+it,right:$e.right+qe-at.width,bottom:$e.bottom+it-at.height};Fr=i5(Fr,mr.left,mr.right),Ft=i5(Ft,mr.top,mr.bottom)}if(Array.isArray(C)){let[mr,Jr]=C;if(isNaN(+mr)||mr<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+Jr)||Jr<0)throw new Error("2nd argument of `grid` must be a valid positive number");let dr=Fr-Ce,zr=Ft-Me;[dr,zr]=NE([mr/ct,Jr/ct],dr,zr),Fr=Ce+dr,Ft=Me+zr}r&&(ze=Math.round((Fr-Ce)*ct)),i&&(Ue=Math.round((Ft-Me)*ct)),xt=ze,yt=Ue,zt("neodrag",le),Nt()}return{destroy:()=>{const It=removeEventListener;It("pointerdown",yr,!1),It("pointerup",Er,!1),It("pointermove",Jt,!1)},update:It=>{var Ft,ct;u=It.axis||"both",b=It.disabled??!1,A=It.ignoreMultitouch??!1,$=It.handle,o=It.bounds,I=It.recomputeBounds??Ym,O=It.cancel,y=It.applyUserSelectHack??!0,C=It.grid,c=It.gpuAcceleration??!0,s=It.legacyTranslate??!0,f=It.transform;const Fr=ht.contains(ee);ht.remove(G,ee),G=It.defaultClass??"neodrag",Z=It.defaultClassDragging??"neodrag-dragging",ee=It.defaultClassDragged??"neodrag-dragged",ht.add(G),Fr&&ht.add(ee),Be&&(xt=ze=((Ft=It.position)==null?void 0:Ft.x)??ze,yt=Ue=((ct=It.position)==null?void 0:ct.y)??Ue,Nt())}}};function o5(t,e,r){const i=t.slice();return i[30]=e[r],i}function a5(t,e,r){const i=t.slice();return i[30]=e[r],i}function s5(t,e,r){const i=t.slice();return i[30]=e[r],i}function l5(t,e,r){const i=t.slice();return i[30]=e[r],i}function u5(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N,O,$,G="Export",Z,ee,te,_e,le,we,ue,ze,Ue;o=new bo({props:{icon:gS}}),s=new bo({props:{icon:L8}});let Ce=t[4]&&c5(t);return N=new bo({props:{icon:C8,size:"sm"}}),le=new bo({props:{icon:AS,size:"sm"}}),{c(){e=Je("nav"),r=Je("div"),i=Je("span"),Ht(o.$$.fragment),u=Fi(`
			Export tool
			
			`),c=Je("span"),Ht(s.$$.fragment),f=ir(),Ce&&Ce.c(),y=ir(),b=Je("div"),A=Je("div"),I=Je("button"),C=Je("span"),Ht(N.$$.fragment),O=ir(),$=Je("span"),$.textContent=G,Z=ir(),ee=Je("div"),te=Je("button"),_e=Je("span"),Ht(le.$$.fragment),this.h()},l(Me){e=Qe(Me,"NAV",{class:!0});var qe=vt(e);r=Qe(qe,"DIV",{class:!0});var it=vt(r);i=Qe(it,"SPAN",{class:!0});var xt=vt(i);Yt(o.$$.fragment,xt),xt.forEach(he),u=Bi(it,`
			Export tool
			
			`),c=Qe(it,"SPAN",{class:!0,role:!0,tabindex:!0});var yt=vt(c);Yt(s.$$.fragment,yt),yt.forEach(he),it.forEach(he),f=nr(qe),Ce&&Ce.l(qe),y=nr(qe),b=Qe(qe,"DIV",{class:!0});var $e=vt(b);A=Qe($e,"DIV",{class:!0});var at=vt(A);I=Qe(at,"BUTTON",{class:!0});var mt=vt(I);C=Qe(mt,"SPAN",{class:!0});var Xe=vt(C);Yt(N.$$.fragment,Xe),Xe.forEach(he),O=nr(mt),$=Qe(mt,"SPAN",{class:!0,"data-svelte-h":!0}),vo($)!=="svelte-l90c7o"&&($.textContent=G),mt.forEach(he),at.forEach(he),Z=nr($e),ee=Qe($e,"DIV",{class:!0});var wt=vt(ee);te=Qe(wt,"BUTTON",{class:!0});var be=vt(te);_e=Qe(be,"SPAN",{class:!0});var Be=vt(_e);Yt(le.$$.fragment,Be),Be.forEach(he),be.forEach(he),wt.forEach(he),$e.forEach(he),qe.forEach(he),this.h()},h(){ge(i,"class","icon drag-icon svelte-1d9lej7"),ge(c,"class","icon close-icon svelte-1d9lej7"),ge(c,"role","button"),ge(c,"tabindex","0"),ge(r,"class","panel-heading heading-control svelte-1d9lej7"),ge(C,"class","icon svelte-1d9lej7"),ge($,"class","svelte-1d9lej7"),ge(I,"class","button is-fullwidth is-small is-success p-0 m-0 svelte-1d9lej7"),ge(A,"class","column is-10 p-0 m-0 svelte-1d9lej7"),ge(_e,"class","icon svelte-1d9lej7"),ge(te,"class","button is-fullwidth is-small is-light p-0 m-0 svelte-1d9lej7"),ge(ee,"class","column is-2 p-0 m-0 svelte-1d9lej7"),ge(b,"class","columns m-1 is-mobile svelte-1d9lej7"),ge(e,"class","panel is-success export-container svelte-1d9lej7")},m(Me,qe){dt(Me,e,qe),Ke(e,r),Ke(r,i),$t(o,i,null),Ke(r,u),Ke(r,c),$t(s,c,null),Ke(e,f),Ce&&Ce.m(e,null),Ke(e,y),Ke(e,b),Ke(b,A),Ke(A,I),Ke(I,C),$t(N,C,null),Ke(I,O),Ke(I,$),Ke(b,Z),Ke(b,ee),Ke(ee,te),Ke(te,_e),$t(le,_e,null),ue=!0,ze||(Ue=[Dr(c,"click",t[15]),Dr(I,"click",t[8]),Dr(te,"click",t[20]),Ih(we=RE.call(null,e,t[7]))],ze=!0)},p(Me,qe){Me[4]?Ce?(Ce.p(Me,qe),qe[0]&16&&We(Ce,1)):(Ce=c5(Me),Ce.c(),We(Ce,1),Ce.m(e,y)):Ce&&(gn(),et(Ce,1,1,()=>{Ce=null}),yn()),we&&Lp(we.update)&&qe[0]&128&&we.update.call(null,Me[7])},i(Me){ue||(We(o.$$.fragment,Me),We(s.$$.fragment,Me),We(Ce),We(N.$$.fragment,Me),We(le.$$.fragment,Me),ue=!0)},o(Me){et(o.$$.fragment,Me),et(s.$$.fragment,Me),et(Ce),et(N.$$.fragment,Me),et(le.$$.fragment,Me),ue=!1},d(Me){Me&&he(e),Gt(o),Gt(s),Ce&&Ce.d(),Gt(N),Gt(le),ze=!1,oo(Ue)}}}function c5(t){let e,r,i="Paper Size",o,u,c,s,f,y,b,A,I,C,N="Page Orientation",O,$,G,Z,ee,te="Format",_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt="DPI",yt,$e,at,mt,Xe,wt,be,Be,Ae,ht,Nt=dn(Object.keys(Jf)),zt=[];for(let Ft=0;Ft<Nt.length;Ft+=1)zt[Ft]=f5(l5(t,Nt,Ft));b=new bo({props:{icon:IS}});let Mt=dn(Object.keys(rf)),Kt=[];for(let Ft=0;Ft<Mt.length;Ft+=1)Kt[Ft]=h5(s5(t,Mt,Ft));const yr=Ft=>et(Kt[Ft],1,1,()=>{Kt[Ft]=null});let Er=dn(Object.keys(T0)),Jt=[];for(let Ft=0;Ft<Er.length;Ft+=1)Jt[Ft]=d5(a5(t,Er,Ft));Ce=new bo({props:{icon:xS}});let It=dn(Object.keys(Cd)),Fr=[];for(let Ft=0;Ft<It.length;Ft+=1)Fr[Ft]=p5(o5(t,It,Ft));return be=new bo({props:{icon:kS}}),{c(){e=Je("div"),r=Je("label"),r.textContent=i,o=ir(),u=Je("div"),c=Je("div"),s=Je("select");for(let Ft=0;Ft<zt.length;Ft+=1)zt[Ft].c();f=ir(),y=Je("span"),Ht(b.$$.fragment),A=ir(),I=Je("div"),C=Je("label"),C.textContent=N,O=ir(),$=Je("div");for(let Ft=0;Ft<Kt.length;Ft+=1)Kt[Ft].c();G=ir(),Z=Je("div"),ee=Je("label"),ee.textContent=te,_e=ir(),le=Je("div"),we=Je("div"),ue=Je("select");for(let Ft=0;Ft<Jt.length;Ft+=1)Jt[Ft].c();ze=ir(),Ue=Je("span"),Ht(Ce.$$.fragment),Me=ir(),qe=Je("div"),it=Je("label"),it.textContent=xt,yt=ir(),$e=Je("div"),at=Je("div"),mt=Je("select");for(let Ft=0;Ft<Fr.length;Ft+=1)Fr[Ft].c();Xe=ir(),wt=Je("span"),Ht(be.$$.fragment),this.h()},l(Ft){e=Qe(Ft,"DIV",{class:!0});var ct=vt(e);r=Qe(ct,"LABEL",{class:!0,"data-svelte-h":!0}),vo(r)!=="svelte-1h9hnsa"&&(r.textContent=i),o=nr(ct),u=Qe(ct,"DIV",{class:!0});var mr=vt(u);c=Qe(mr,"DIV",{class:!0});var Jr=vt(c);s=Qe(Jr,"SELECT",{class:!0});var dr=vt(s);for(let qi=0;qi<zt.length;qi+=1)zt[qi].l(dr);dr.forEach(he),Jr.forEach(he),f=nr(mr),y=Qe(mr,"SPAN",{class:!0});var zr=vt(y);Yt(b.$$.fragment,zr),zr.forEach(he),mr.forEach(he),ct.forEach(he),A=nr(Ft),I=Qe(Ft,"DIV",{class:!0});var ri=vt(I);C=Qe(ri,"LABEL",{class:!0,"data-svelte-h":!0}),vo(C)!=="svelte-mwzl10"&&(C.textContent=N),O=nr(ri),$=Qe(ri,"DIV",{class:!0});var Vr=vt($);for(let qi=0;qi<Kt.length;qi+=1)Kt[qi].l(Vr);Vr.forEach(he),ri.forEach(he),G=nr(Ft),Z=Qe(Ft,"DIV",{class:!0});var _i=vt(Z);ee=Qe(_i,"LABEL",{class:!0,"data-svelte-h":!0}),vo(ee)!=="svelte-56ddhu"&&(ee.textContent=te),_e=nr(_i),le=Qe(_i,"DIV",{class:!0});var Hi=vt(le);we=Qe(Hi,"DIV",{class:!0});var Nr=vt(we);ue=Qe(Nr,"SELECT",{class:!0});var ji=vt(ue);for(let qi=0;qi<Jt.length;qi+=1)Jt[qi].l(ji);ji.forEach(he),Nr.forEach(he),ze=nr(Hi),Ue=Qe(Hi,"SPAN",{class:!0});var Ui=vt(Ue);Yt(Ce.$$.fragment,Ui),Ui.forEach(he),Hi.forEach(he),_i.forEach(he),Me=nr(Ft),qe=Qe(Ft,"DIV",{class:!0});var an=vt(qe);it=Qe(an,"LABEL",{class:!0,"data-svelte-h":!0}),vo(it)!=="svelte-agw31s"&&(it.textContent=xt),yt=nr(an),$e=Qe(an,"DIV",{class:!0});var Gi=vt($e);at=Qe(Gi,"DIV",{class:!0});var Or=vt(at);mt=Qe(Or,"SELECT",{class:!0});var Br=vt(mt);for(let qi=0;qi<Fr.length;qi+=1)Fr[qi].l(Br);Br.forEach(he),Or.forEach(he),Xe=nr(Gi),wt=Qe(Gi,"SPAN",{class:!0});var Ni=vt(wt);Yt(be.$$.fragment,Ni),Ni.forEach(he),Gi.forEach(he),an.forEach(he),this.h()},h(){ge(r,"class","label is-small svelte-1d9lej7"),ge(s,"class","svelte-1d9lej7"),t[0]===void 0&&Ha(()=>t[16].call(s)),ge(c,"class","select is-small is-fullwidth svelte-1d9lej7"),ge(y,"class","icon is-small is-left svelte-1d9lej7"),ge(u,"class","control has-icons-left svelte-1d9lej7"),ge(e,"class","field svelte-1d9lej7"),ge(C,"class","label is-small svelte-1d9lej7"),ge($,"class","control svelte-1d9lej7"),ge(I,"class","field svelte-1d9lej7"),ge(ee,"class","label is-small svelte-1d9lej7"),ge(ue,"class","svelte-1d9lej7"),t[3]===void 0&&Ha(()=>t[18].call(ue)),ge(we,"class","select is-small is-fullwidth svelte-1d9lej7"),ge(Ue,"class","icon is-small is-left svelte-1d9lej7"),ge(le,"class","control has-icons-left svelte-1d9lej7"),ge(Z,"class","field svelte-1d9lej7"),ge(it,"class","label is-small svelte-1d9lej7"),ge(mt,"class","svelte-1d9lej7"),t[2]===void 0&&Ha(()=>t[19].call(mt)),ge(at,"class","select is-small is-fullwidth svelte-1d9lej7"),ge(wt,"class","icon is-small is-left svelte-1d9lej7"),ge($e,"class","control has-icons-left svelte-1d9lej7"),ge(qe,"class","field svelte-1d9lej7")},m(Ft,ct){dt(Ft,e,ct),Ke(e,r),Ke(e,o),Ke(e,u),Ke(u,c),Ke(c,s);for(let mr=0;mr<zt.length;mr+=1)zt[mr]&&zt[mr].m(s,null);ka(s,t[0],!0),Ke(u,f),Ke(u,y),$t(b,y,null),dt(Ft,A,ct),dt(Ft,I,ct),Ke(I,C),Ke(I,O),Ke(I,$);for(let mr=0;mr<Kt.length;mr+=1)Kt[mr]&&Kt[mr].m($,null);dt(Ft,G,ct),dt(Ft,Z,ct),Ke(Z,ee),Ke(Z,_e),Ke(Z,le),Ke(le,we),Ke(we,ue);for(let mr=0;mr<Jt.length;mr+=1)Jt[mr]&&Jt[mr].m(ue,null);ka(ue,t[3],!0),Ke(le,ze),Ke(le,Ue),$t(Ce,Ue,null),dt(Ft,Me,ct),dt(Ft,qe,ct),Ke(qe,it),Ke(qe,yt),Ke(qe,$e),Ke($e,at),Ke(at,mt);for(let mr=0;mr<Fr.length;mr+=1)Fr[mr]&&Fr[mr].m(mt,null);ka(mt,t[2],!0),Ke($e,Xe),Ke($e,wt),$t(be,wt,null),Be=!0,Ae||(ht=[Dr(s,"change",t[16]),Dr(ue,"change",t[18]),Dr(mt,"change",t[19])],Ae=!0)},p(Ft,ct){if(ct&0){Nt=dn(Object.keys(Jf));let mr;for(mr=0;mr<Nt.length;mr+=1){const Jr=l5(Ft,Nt,mr);zt[mr]?zt[mr].p(Jr,ct):(zt[mr]=f5(Jr),zt[mr].c(),zt[mr].m(s,null))}for(;mr<zt.length;mr+=1)zt[mr].d(1);zt.length=Nt.length}if(ct[0]&1&&ka(s,Ft[0]),ct[0]&2){Mt=dn(Object.keys(rf));let mr;for(mr=0;mr<Mt.length;mr+=1){const Jr=s5(Ft,Mt,mr);Kt[mr]?(Kt[mr].p(Jr,ct),We(Kt[mr],1)):(Kt[mr]=h5(Jr),Kt[mr].c(),We(Kt[mr],1),Kt[mr].m($,null))}for(gn(),mr=Mt.length;mr<Kt.length;mr+=1)yr(mr);yn()}if(ct&0){Er=dn(Object.keys(T0));let mr;for(mr=0;mr<Er.length;mr+=1){const Jr=a5(Ft,Er,mr);Jt[mr]?Jt[mr].p(Jr,ct):(Jt[mr]=d5(Jr),Jt[mr].c(),Jt[mr].m(ue,null))}for(;mr<Jt.length;mr+=1)Jt[mr].d(1);Jt.length=Er.length}if(ct[0]&8&&ka(ue,Ft[3]),ct&0){It=dn(Object.keys(Cd));let mr;for(mr=0;mr<It.length;mr+=1){const Jr=o5(Ft,It,mr);Fr[mr]?Fr[mr].p(Jr,ct):(Fr[mr]=p5(Jr),Fr[mr].c(),Fr[mr].m(mt,null))}for(;mr<Fr.length;mr+=1)Fr[mr].d(1);Fr.length=It.length}ct[0]&4&&ka(mt,Ft[2])},i(Ft){if(!Be){We(b.$$.fragment,Ft);for(let ct=0;ct<Mt.length;ct+=1)We(Kt[ct]);We(Ce.$$.fragment,Ft),We(be.$$.fragment,Ft),Be=!0}},o(Ft){et(b.$$.fragment,Ft),Kt=Kt.filter(Boolean);for(let ct=0;ct<Kt.length;ct+=1)et(Kt[ct]);et(Ce.$$.fragment,Ft),et(be.$$.fragment,Ft),Be=!1},d(Ft){Ft&&(he(e),he(A),he(I),he(G),he(Z),he(Me),he(qe)),na(zt,Ft),Gt(b),na(Kt,Ft),na(Jt,Ft),Gt(Ce),na(Fr,Ft),Gt(be),Ae=!1,oo(ht)}}}function f5(t){let e,r=t[30]+"",i;return{c(){e=Je("option"),i=Fi(r),this.h()},l(o){e=Qe(o,"OPTION",{class:!0});var u=vt(e);i=Bi(u,r),u.forEach(he),this.h()},h(){e.__value=Jf[t[30]],mo(e,e.__value),ge(e,"class","svelte-1d9lej7")},m(o,u){dt(o,e,u),Ke(e,i)},p:mi,d(o){o&&he(e)}}}function h5(t){let e,r,i,o,u,c,s,f=t[30]+"",y,b,A,I,C;function N(){return t[17](t[30])}return c=new bo({props:{icon:rf[t[30]]===rf.Landscape?mS:MS,size:"sm"}}),{c(){e=Je("label"),r=Je("input"),o=ir(),u=Je("span"),Ht(c.$$.fragment),s=ir(),y=Fi(f),b=ir(),this.h()},l(O){e=Qe(O,"LABEL",{class:!0,style:!0});var $=vt(e);r=Qe($,"INPUT",{type:!0,name:!0,class:!0}),o=nr($),u=Qe($,"SPAN",{class:!0});var G=vt(u);Yt(c.$$.fragment,G),G.forEach(he),s=nr($),y=Bi($,f),b=nr($),$.forEach(he),this.h()},h(){ge(r,"type","radio"),ge(r,"name","orientation"),r.checked=i=t[1]===rf[t[30]],ge(r,"class","svelte-1d9lej7"),ge(u,"class","icon svelte-1d9lej7"),ge(e,"class","radio svelte-1d9lej7"),Nn(e,"color","black")},m(O,$){dt(O,e,$),Ke(e,r),Ke(e,o),Ke(e,u),$t(c,u,null),Ke(e,s),Ke(e,y),Ke(e,b),A=!0,I||(C=Dr(r,"click",N),I=!0)},p(O,$){t=O,(!A||$[0]&2&&i!==(i=t[1]===rf[t[30]]))&&(r.checked=i)},i(O){A||(We(c.$$.fragment,O),A=!0)},o(O){et(c.$$.fragment,O),A=!1},d(O){O&&he(e),Gt(c),I=!1,C()}}}function d5(t){let e,r=t[30]+"",i;return{c(){e=Je("option"),i=Fi(r),this.h()},l(o){e=Qe(o,"OPTION",{class:!0});var u=vt(e);i=Bi(u,r),u.forEach(he),this.h()},h(){e.__value=T0[t[30]],mo(e,e.__value),ge(e,"class","svelte-1d9lej7")},m(o,u){dt(o,e,u),Ke(e,i)},p:mi,d(o){o&&he(e)}}}function p5(t){let e,r=t[30]+"",i;return{c(){e=Je("option"),i=Fi(r),this.h()},l(o){e=Qe(o,"OPTION",{class:!0});var u=vt(e);i=Bi(u,r),u.forEach(he),this.h()},h(){e.__value=Cd[t[30]],mo(e,e.__value),ge(e,"class","svelte-1d9lej7")},m(o,u){dt(o,e,u),Ke(e,i)},p:mi,d(o){o&&he(e)}}}function OE(t){let e,r,i,o,u=t[5]&&u5(t);return{c(){e=Je("button"),r=ir(),u&&u.c(),i=pn(),this.h()},l(c){e=Qe(c,"BUTTON",{class:!0}),vt(e).forEach(he),r=nr(c),u&&u.l(c),i=pn(),this.h()},h(){ge(e,"class","maplibregl-ctrl-export maplibre-ctrl-export-icon svelte-1d9lej7")},m(c,s){dt(c,e,s),t[14](e),dt(c,r,s),u&&u.m(c,s),dt(c,i,s),o=!0},p(c,s){c[5]?u?(u.p(c,s),s[0]&32&&We(u,1)):(u=u5(c),u.c(),We(u,1),u.m(i.parentNode,i)):u&&(gn(),et(u,1,1,()=>{u=null}),yn())},i(c){o||(We(u),o=!0)},o(c){et(u),o=!1},d(c){c&&(he(e),he(r),he(i)),t[14](null),u&&u.d(c)}}}function FE(t,e,r){let{map:i}=e,o,u,c,s,{showPrintableArea:f=!0}=e,{showCrosshair:y=!0}=e,{position:b="top-right"}=e,{paperSize:A=Jf.A4}=e,{dpi:I=Cd[96]}=e,{format:C=T0.PNG}=e,{orientation:N=rf.Landscape}=e,{isShownSetting:O=!0}=e,$=!1,G={};function Z(){}Z.prototype.onAdd=function($e){return this.map=$e,this.controlContainer=document.createElement("div"),this.controlContainer.className="maplibregl-ctrl maplibregl-ctrl-group",s.addEventListener("click",()=>{r(5,$=!$)}),this.controlContainer.appendChild(s),this.controlContainer},Z.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let ee=null;sh(async()=>{const{default:$e}=await Ip(()=>Promise.resolve().then(()=>ME),void 0,import.meta.url);c=new $e,r(13,ee=new Z)});const te=()=>{const $e=_e();c.generate(i,$e,I,C,Sh.mm)},_e=()=>{let $e=[A[0],A[1]];return N!==rf.Landscape&&($e=$e.reverse()),$e},le=()=>{s&&($?s.classList.add("maplibre-ctrl-icon-active"):s.classList.remove("maplibre-ctrl-icon-active"),we(f?$:!1),ze(y?$:!1))},we=$e=>{$e===!1?o!==void 0&&(o.destroy(),o=void 0):(o=new DE(i),ue())},ue=()=>{if(o===void 0)return;const $e=_e();o.updateArea($e[0],$e[1])},ze=$e=>{i&&($e===!1?u!==void 0&&(u.destroy(),u=void 0):(u=new zE(i),u.create()))};function Ue($e){Ut[$e?"unshift":"push"](()=>{s=$e,r(6,s)})}const Ce=()=>{r(5,$=!$)};function Me(){A=Vc(this),r(0,A)}const qe=$e=>{r(1,N=rf[$e])};function it(){C=Vc(this),r(3,C)}function xt(){I=Vc(this),r(2,I)}const yt=()=>r(4,O=!O);return t.$$set=$e=>{"map"in $e&&r(9,i=$e.map),"showPrintableArea"in $e&&r(10,f=$e.showPrintableArea),"showCrosshair"in $e&&r(11,y=$e.showCrosshair),"position"in $e&&r(12,b=$e.position),"paperSize"in $e&&r(0,A=$e.paperSize),"dpi"in $e&&r(2,I=$e.dpi),"format"in $e&&r(3,C=$e.format),"orientation"in $e&&r(1,N=$e.orientation),"isShownSetting"in $e&&r(4,O=$e.isShownSetting)},t.$$.update=()=>{t.$$.dirty[0]&1&&ue(),t.$$.dirty[0]&2&&ue(),t.$$.dirty[0]&12800&&i&&(ee!==null&&i.hasControl(ee)===!1&&i.addControl(ee,b),r(7,G.bounds=i.getContainer(),G)),t.$$.dirty[0]&32&&le()},[A,N,I,C,O,$,s,G,te,i,f,y,b,ee,Ue,Ce,Me,qe,it,xt,yt]}class BE extends di{constructor(e){super(),pi(this,e,FE,OE,hi,{map:9,showPrintableArea:10,showCrosshair:11,position:12,paperSize:0,dpi:2,format:3,orientation:1,isShownSetting:4},null,[-1,-1])}}async function jE(t){if("clipboard"in navigator)await navigator.clipboard.writeText(t);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=t,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}const m5=(t,e)=>{async function r(){if(o)try{await jE(o),t.dispatchEvent(new CustomEvent("svelte-copy",{detail:o}))}catch(u){t.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:u}))}}let i=typeof e=="string"?["click"]:[e.events].flat(1),o=typeof e=="string"?e:e.text;return i.forEach(u=>{t.addEventListener(u,r,!0)}),{update:u=>{const c=typeof u=="string"?["click"]:[u.events].flat(1),s=typeof u=="string"?u:u.text,f=c.filter(b=>!i.includes(b)),y=i.filter(b=>!c.includes(b));f.forEach(b=>{t.addEventListener(b,r,!0)}),y.forEach(b=>{t.removeEventListener(b,r,!0)}),i=c,o=s},destroy:()=>{i.forEach(u=>{t.removeEventListener(u,r,!0)})}}};function UE(t){let e,r,i,o,u,c,s="URL to share",f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it="Cancel",xt,yt,$e,at;return Z=new bo({props:{icon:LS}}),Ce=new bo({props:{icon:L8}}),{c(){e=Je("div"),r=Je("div"),i=ir(),o=Je("div"),u=Je("header"),c=Je("p"),c.textContent=s,f=ir(),y=Je("button"),b=ir(),A=Je("section"),I=Je("div"),C=Je("input"),O=ir(),$=Je("button"),G=Je("span"),Ht(Z.$$.fragment),ee=ir(),te=Je("span"),_e=Fi(t[2]),we=ir(),ue=Je("footer"),ze=Je("button"),Ue=Je("span"),Ht(Ce.$$.fragment),Me=ir(),qe=Je("span"),qe.textContent=it,this.h()},l(mt){e=Qe(mt,"DIV",{class:!0});var Xe=vt(e);r=Qe(Xe,"DIV",{class:!0,role:!0,tabindex:!0}),vt(r).forEach(he),i=nr(Xe),o=Qe(Xe,"DIV",{class:!0});var wt=vt(o);u=Qe(wt,"HEADER",{class:!0});var be=vt(u);c=Qe(be,"P",{class:!0,"data-svelte-h":!0}),vo(c)!=="svelte-1y9bhdp"&&(c.textContent=s),f=nr(be),y=Qe(be,"BUTTON",{class:!0,"aria-label":!0}),vt(y).forEach(he),be.forEach(he),b=nr(wt),A=Qe(wt,"SECTION",{class:!0});var Be=vt(A);I=Qe(Be,"DIV",{class:!0});var Ae=vt(I);C=Qe(Ae,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),O=nr(Ae),$=Qe(Ae,"BUTTON",{class:!0});var ht=vt($);G=Qe(ht,"SPAN",{class:!0});var Nt=vt(G);Yt(Z.$$.fragment,Nt),Nt.forEach(he),ee=nr(ht),te=Qe(ht,"SPAN",{class:!0});var zt=vt(te);_e=Bi(zt,t[2]),zt.forEach(he),ht.forEach(he),Ae.forEach(he),Be.forEach(he),we=nr(wt),ue=Qe(wt,"FOOTER",{class:!0});var Mt=vt(ue);ze=Qe(Mt,"BUTTON",{class:!0});var Kt=vt(ze);Ue=Qe(Kt,"SPAN",{class:!0});var yr=vt(Ue);Yt(Ce.$$.fragment,yr),yr.forEach(he),Me=nr(Kt),qe=Qe(Kt,"SPAN",{class:!0,"data-svelte-h":!0}),vo(qe)!=="svelte-2921c8"&&(qe.textContent=it),Kt.forEach(he),Mt.forEach(he),wt.forEach(he),Xe.forEach(he),this.h()},h(){ge(r,"class","modal-background svelte-1x9c4om"),ge(r,"role","button"),ge(r,"tabindex","-1"),ge(c,"class","modal-card-title svelte-1x9c4om"),ge(y,"class","delete svelte-1x9c4om"),ge(y,"aria-label","close"),ge(u,"class","modal-card-head svelte-1x9c4om"),ge(C,"class","input is-success is-small pm-0 svelte-1x9c4om"),ge(C,"type","text"),ge(C,"placeholder","URL to share"),Nn(C,"cursor","pointer"),C.readOnly=!0,ge(G,"class","icon svelte-1x9c4om"),ge(te,"class","svelte-1x9c4om"),ge($,"class","button is-success is-small pm-0 ml-1 svelte-1x9c4om"),ge(I,"class","copy-control svelte-1x9c4om"),ge(A,"class","modal-card-body svelte-1x9c4om"),ge(Ue,"class","icon svelte-1x9c4om"),ge(qe,"class","svelte-1x9c4om"),ge(ze,"class","button is-small pm-0 svelte-1x9c4om"),ge(ue,"class","modal-card-foot svelte-1x9c4om"),ge(o,"class","modal-card svelte-1x9c4om"),ge(e,"class",xt=`modal ${t[0]?"is-active":""} svelte-1x9c4om`)},m(mt,Xe){dt(mt,e,Xe),Ke(e,r),Ke(e,i),Ke(e,o),Ke(o,u),Ke(u,c),Ke(u,f),Ke(u,y),Ke(o,b),Ke(o,A),Ke(A,I),Ke(I,C),mo(C,t[1]),Ke(I,O),Ke(I,$),Ke($,G),$t(Z,G,null),Ke($,ee),Ke($,te),Ke(te,_e),Ke(o,we),Ke(o,ue),Ke(ue,ze),Ke(ze,Ue),$t(Ce,Ue,null),Ke(ze,Me),Ke(ze,qe),yt=!0,$e||(at=[Dr(r,"click",t[4]),Dr(r,"keydown",t[5]),Dr(y,"click",t[4]),Dr(C,"input",t[8]),Ih(N=m5.call(null,C,t[1])),Dr(C,"click",t[3]),Ih(le=m5.call(null,$,t[1])),Dr($,"click",t[3]),Dr(ze,"click",t[4])],$e=!0)},p(mt,[Xe]){Xe&2&&C.value!==mt[1]&&mo(C,mt[1]),N&&Lp(N.update)&&Xe&2&&N.update.call(null,mt[1]),(!yt||Xe&4)&&Dn(_e,mt[2]),le&&Lp(le.update)&&Xe&2&&le.update.call(null,mt[1]),(!yt||Xe&1&&xt!==(xt=`modal ${mt[0]?"is-active":""} svelte-1x9c4om`))&&ge(e,"class",xt)},i(mt){yt||(We(Z.$$.fragment,mt),We(Ce.$$.fragment,mt),yt=!0)},o(mt){et(Z.$$.fragment,mt),et(Ce.$$.fragment,mt),yt=!1},d(mt){mt&&he(e),Gt(Z),Gt(Ce),$e=!1,oo(at)}}}function qE(t,e,r){let{map:i}=e,{isShareModalShown:o}=e,u,c="",s="Copy";sh(()=>{u=new URL(window.location.href)});const f=()=>{r(2,s="copied"),setTimeout(()=>{r(2,s="Copy")},2e3)};let{customiseUrl:y=N=>N}=e;const b=()=>{if(!i||!u)return"";const N=`${u.protocol}//${u.host}`,O=`#${i.getZoom().toFixed(2)}`,$=`/${i.getCenter().lat.toFixed(6)}`,G=`/${i.getCenter().lng.toFixed(6)}`,Z=i.getBearing()!==0?`/${i.getBearing().toFixed(1)}`:"",ee=i.getPitch()!==0?`/${i.getPitch().toFixed()}`:"";r(1,c=y(`${N}${O}${$}${G}${Z}${ee}`))},A=()=>{r(0,o=!1)},I=N=>{N.key==="Enter"&&N.target.click()};function C(){c=this.value,r(1,c)}return t.$$set=N=>{"map"in N&&r(6,i=N.map),"isShareModalShown"in N&&r(0,o=N.isShareModalShown),"customiseUrl"in N&&r(7,y=N.customiseUrl)},t.$$.update=()=>{t.$$.dirty&1&&o===!0&&b()},[o,c,s,f,A,I,i,y,C]}class VE extends di{constructor(e){super(),pi(this,e,qE,UE,hi,{map:6,isShareModalShown:0,customiseUrl:7})}}function HE(t){let e,r,i,o,u,c,s,f;r=new bo({props:{icon:cS}});function y(C){t[7](C)}function b(C){t[8](C)}function A(C){t[9](C)}let I={};return t[0]!==void 0&&(I.map=t[0]),t[3]!==void 0&&(I.isShareModalShown=t[3]),t[1]!==void 0&&(I.customiseUrl=t[1]),o=new VE({props:I}),Ut.push(()=>Xt(o,"map",y)),Ut.push(()=>Xt(o,"isShareModalShown",b)),Ut.push(()=>Xt(o,"customiseUrl",A)),{c(){e=Je("button"),Ht(r.$$.fragment),i=ir(),Ht(o.$$.fragment)},l(C){e=Qe(C,"BUTTON",{});var N=vt(e);Yt(r.$$.fragment,N),N.forEach(he),i=nr(C),Yt(o.$$.fragment,C)},m(C,N){dt(C,e,N),$t(r,e,null),t[6](e),dt(C,i,N),$t(o,C,N),f=!0},p(C,[N]){const O={};!u&&N&1&&(u=!0,O.map=C[0],er(()=>u=!1)),!c&&N&8&&(c=!0,O.isShareModalShown=C[3],er(()=>c=!1)),!s&&N&2&&(s=!0,O.customiseUrl=C[1],er(()=>s=!1)),o.$set(O)},i(C){f||(We(r.$$.fragment,C),We(o.$$.fragment,C),f=!0)},o(C){et(r.$$.fragment,C),et(o.$$.fragment,C),f=!1},d(C){C&&(he(e),he(i)),Gt(r),t[6](null),Gt(o,C)}}}function $E(t,e,r){let{map:i}=e,o,u=!1,{position:c="top-right"}=e,{customiseUrl:s=N=>N}=e;function f(){}f.prototype.onAdd=function(N){return this.map=N,this.controlContainer=document.createElement("div"),this.controlContainer.className="maplibregl-ctrl maplibregl-ctrl-group",r(2,o.className="maplibregl-ctrl-share",o),o.addEventListener("click",()=>{r(3,u=!u)}),this.controlContainer.appendChild(o),this.controlContainer},f.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let y=null;sh(async()=>{r(5,y=new f)});function b(N){Ut[N?"unshift":"push"](()=>{o=N,r(2,o)})}function A(N){i=N,r(0,i)}function I(N){u=N,r(3,u)}function C(N){s=N,r(1,s)}return t.$$set=N=>{"map"in N&&r(0,i=N.map),"position"in N&&r(4,c=N.position),"customiseUrl"in N&&r(1,s=N.customiseUrl)},t.$$.update=()=>{t.$$.dirty&49&&i&&y!==null&&i.hasControl(y)===!1&&i.addControl(y,c)},[i,s,o,u,c,y,b,A,I,C]}class GE extends di{constructor(e){super(),pi(this,e,$E,HE,hi,{map:0,position:4,customiseUrl:1})}}const W8={name:"SplitterContext"};function WE(t){let e,r,i,o;return{c(){e=Je("div"),r=Je("div"),this.h()},l(u){e=Qe(u,"DIV",{class:!0,tabindex:!0});var c=vt(e);r=Qe(c,"DIV",{class:!0,style:!0}),vt(r).forEach(he),c.forEach(he),this.h()},h(){ge(r,"class","line svelte-16wga0t"),ge(r,"style",t[3]),ge(e,"class",i=Ks(t[2])+" svelte-16wga0t"),ge(e,"tabindex","0"),Ha(()=>t[13].call(e))},m(u,c){dt(u,e,c),Ke(e,r),o=Pf(e,t[13].bind(e))},p(u,[c]){c&8&&ge(r,"style",u[3]),c&4&&i!==(i=Ks(u[2])+" svelte-16wga0t")&&ge(e,"class",i)},i:mi,o:mi,d(u){u&&he(e),o()}}}function ZE(t,e,r){let i,o,u,c,s,f,y,{color:b="silver"}=e,{hoverColor:A="gray"}=e,{dragColor:I="black"}=e,C=e9(W8);Ga(t,C,G=>r(12,y=G));let N,O;function $(){N=this.clientWidth,O=this.clientHeight,r(0,N),r(1,O)}return t.$$set=G=>{"color"in G&&r(5,b=G.color),"hoverColor"in G&&r(6,A=G.hoverColor),"dragColor"in G&&r(7,I=G.dragColor)},t.$$.update=()=>{t.$$.dirty&4096&&r(10,i=y.dragging),t.$$.dirty&4096&&r(8,o=y.horizontal),t.$$.dirty&259&&r(11,u=o?O:N),t.$$.dirty&3296&&r(9,c={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":i?I:b,"--splitter-line-hover-color":i?I:A}),t.$$.dirty&512&&r(3,s=Object.entries(c).map(([G,Z])=>`${G}:${Z}`).join(";")),t.$$.dirty&256&&r(2,f=o?"splitter horizontal":"splitter vertical")},[N,O,f,s,C,b,A,I,o,c,i,u,y,$]}class XE extends di{constructor(e){super(),pi(this,e,ZE,WE,hi,{color:5,hoverColor:6,dragColor:7})}}const YE=t=>({}),g5=t=>({}),KE=t=>({}),y5=t=>({}),JE=t=>({}),_5=t=>({});function QE(t){let e,r;return e=new XE({}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function eC(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N;const O=t[33].primary,$=wl(O,t,t[32],_5),G=t[33].splitter,Z=wl(G,t,t[32],y5),ee=Z||QE(),te=t[33].secondary,_e=wl(te,t,t[32],g5);return{c(){e=Je("div"),r=Je("div"),$&&$.c(),o=ir(),u=Je("div"),ee&&ee.c(),s=ir(),f=Je("div"),_e&&_e.c(),this.h()},l(le){e=Qe(le,"DIV",{class:!0,style:!0});var we=vt(e);r=Qe(we,"DIV",{class:!0});var ue=vt(r);$&&$.l(ue),ue.forEach(he),o=nr(we),u=Qe(we,"DIV",{class:!0});var ze=vt(u);ee&&ee.l(ze),ze.forEach(he),s=nr(we),f=Qe(we,"DIV",{class:!0});var Ue=vt(f);_e&&_e.l(Ue),Ue.forEach(he),we.forEach(he),this.h()},h(){ge(r,"class","primary svelte-603y9m"),Ha(()=>t[34].call(r)),ge(u,"class","splitter svelte-603y9m"),Ha(()=>t[35].call(u)),ge(f,"class","secondary svelte-603y9m"),Ha(()=>t[36].call(f)),ge(e,"class",b=Ks(t[8])+" svelte-603y9m"),ge(e,"style",t[9]),Ha(()=>t[37].call(e))},m(le,we){dt(le,e,we),Ke(e,r),$&&$.m(r,null),i=Pf(r,t[34].bind(r)),Ke(e,o),Ke(e,u),ee&&ee.m(u,null),c=Pf(u,t[35].bind(u)),Ke(e,s),Ke(e,f),_e&&_e.m(f,null),y=Pf(f,t[36].bind(f)),A=Pf(e,t[37].bind(e)),I=!0,C||(N=[Dr(u,"pointerdown",t[10]),Dr(u,"pointermove",t[11]),Dr(u,"pointerup",t[12]),Dr(u,"dblclick",t[13]),Dr(u,"keydown",t[14])],C=!0)},p(le,we){$&&$.p&&(!I||we[1]&2)&&xl($,O,le,le[32],I?Al(O,le[32],we,JE):kl(le[32]),_5),Z&&Z.p&&(!I||we[1]&2)&&xl(Z,G,le,le[32],I?Al(G,le[32],we,KE):kl(le[32]),y5),_e&&_e.p&&(!I||we[1]&2)&&xl(_e,te,le,le[32],I?Al(te,le[32],we,YE):kl(le[32]),g5),(!I||we[0]&256&&b!==(b=Ks(le[8])+" svelte-603y9m"))&&ge(e,"class",b),(!I||we[0]&512)&&ge(e,"style",le[9])},i(le){I||(We($,le),We(ee,le),We(_e,le),I=!0)},o(le){et($,le),et(ee,le),et(_e,le),I=!1},d(le){le&&he(e),$&&$.d(le),i(),ee&&ee.d(le),c(),_e&&_e.d(le),y(),A(),C=!1,oo(N)}}}function tC(t,e,r){let i,o,u,c,s,f,y,b,A,{$$slots:I={},$$scope:C}=e,{horizontal:N=!1}=e,{initialPrimarySize:O="50%"}=e,{minPrimarySize:$="0"}=e,{minSecondarySize:G="0"}=e,{splitterSize:Z="7px"}=e,{resetOnDoubleClick:ee=!0}=e,te,_e,le,we,ue,ze,Ue,Ce;const Me=yr=>Math.max(0,Math.min(yr,100));let qe,it,xt,yt=!1;const $e=()=>s,at=yr=>{r(23,qe=Me(yr))},mt=zs({horizontal:N,dragging:yt});t9(W8,mt);const Xe=zh(),wt=yr=>{yr.currentTarget.setPointerCapture(yr.pointerId),it=N?yr.clientY:yr.clientX,xt=o,r(24,yt=!0)},be=yr=>{if(yr.currentTarget.hasPointerCapture(yr.pointerId)){const Er=N?yr.clientY:yr.clientX;let Jt=xt+(Er-it);Jt=Math.max(0,Math.min(Jt,i));const It=Jt/i*100;r(23,qe=It)}},Be=yr=>{yr.currentTarget.releasePointerCapture(yr.pointerId),r(24,yt=!1)},Ae=()=>{ee&&r(23,qe=void 0)},ht=yr=>{const Er=qe||s;if(!yr.ctrlKey&&!yr.shiftKey&&!yr.altKey){switch(yr.code){case"Space":r(23,qe=void 0);return}if(N)switch(yr.code){case"ArrowUp":r(23,qe=Me(Er-1));return;case"ArrowDown":r(23,qe=Me(Er+1));return}else switch(yr.code){case"ArrowLeft":r(23,qe=Me(Er-1));return;case"ArrowRight":r(23,qe=Me(Er+1));return}}};function Nt(){le=this.clientWidth,we=this.clientHeight,r(2,le),r(3,we)}function zt(){ue=this.clientWidth,ze=this.clientHeight,r(4,ue),r(5,ze)}function Mt(){Ue=this.clientWidth,Ce=this.clientHeight,r(6,Ue),r(7,Ce)}function Kt(){te=this.clientWidth,_e=this.clientHeight,r(0,te),r(1,_e)}return t.$$set=yr=>{"horizontal"in yr&&r(15,N=yr.horizontal),"initialPrimarySize"in yr&&r(16,O=yr.initialPrimarySize),"minPrimarySize"in yr&&r(17,$=yr.minPrimarySize),"minSecondarySize"in yr&&r(18,G=yr.minSecondarySize),"splitterSize"in yr&&r(19,Z=yr.splitterSize),"resetOnDoubleClick"in yr&&r(20,ee=yr.resetOnDoubleClick),"$$scope"in yr&&r(32,C=yr.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&32771&&r(26,i=N?_e:te),t.$$.dirty[0]&32780&&r(27,o=N?we:le),t.$$.dirty[0]&32816&&r(31,u=N?ze:ue),t.$$.dirty[0]&32960&&r(30,c=N?Ce:Ue),t.$$.dirty[0]&201326592|t.$$.dirty[1]&1&&r(25,s=Me(Math.ceil((o-u)/(i-u)*100))),t.$$.dirty[0]&16809984&&mt.set({horizontal:N,dragging:yt}),t.$$.dirty[0]&1258291200|t.$$.dirty[1]&1&&Xe("changed",{percent:s,primarySize:o,splitterSize:u,secondarySize:c,dragging:yt}),t.$$.dirty[0]&8454144&&r(29,f=qe!==void 0?`${qe}%`:O),t.$$.dirty[0]&537788416&&r(28,y={"--primary-size":`${f}`,"--min-primary-size":`${$}`,"--min-secondary-size":`${G}`,"--splitter-size":`${Z}`}),t.$$.dirty[0]&268435456&&r(9,b=Object.entries(y).map(([yr,Er])=>`${yr}:${Er}`).join(";")),t.$$.dirty[0]&32768&&r(8,A=N?"split horizontal":"split vertical")},[te,_e,le,we,ue,ze,Ue,Ce,A,b,wt,be,Be,Ae,ht,N,O,$,G,Z,ee,$e,at,qe,yt,s,i,o,y,f,c,u,C,I,Nt,zt,Mt,Kt]}class rC extends di{constructor(e){super(),pi(this,e,tC,eC,hi,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}const iC=t=>({}),v5=t=>({}),nC=t=>({}),b5=t=>({}),oC=t=>({}),w5=t=>({}),aC=t=>({}),x5=t=>({});function k5(t){let e;function r(u,c){return u[0]?lC:sC}let i=r(t),o=i(t);return{c(){e=Je("button"),o.c()},l(u){e=Qe(u,"BUTTON",{});var c=vt(e);o.l(c),c.forEach(he)},m(u,c){dt(u,e,c),o.m(e,null),t[28](e)},p(u,c){i===(i=r(u))&&o?o.p(u,c):(o.d(1),o=i(u),o&&(o.c(),o.m(e,null)))},d(u){u&&he(e),o.d(),t[28](null)}}}function sC(t){let e,r;return{c(){e=Je("i"),this.h()},l(i){e=Qe(i,"I",{class:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class",r="fa-solid "+t[4]+" "+t[5])},m(i,o){dt(i,e,o)},p(i,o){o[0]&48&&r!==(r="fa-solid "+i[4]+" "+i[5])&&ge(e,"class",r)},d(i){i&&he(e)}}}function lC(t){let e;return{c(){e=Je("i"),this.h()},l(r){e=Qe(r,"I",{class:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","fa-solid fa-xmark")},m(r,i){dt(r,e,i)},p:mi,d(r){r&&he(e)}}}function uC(t){let e;const r=t[26].map,i=wl(r,t,t[33],v5);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,u){i&&i.m(o,u),e=!0},p(o,u){i&&i.p&&(!e||u[1]&4)&&xl(i,r,o,o[33],e?Al(r,o[33],u,iC):kl(o[33]),v5)},i(o){e||(We(i,o),e=!0)},o(o){et(i,o),e=!1},d(o){i&&i.d(o)}}}function cC(t){let e,r,i=t[10]&&A5(t);const o=t[26].sidebar,u=wl(o,t,t[33],b5);return{c(){i&&i.c(),e=ir(),u&&u.c()},l(c){i&&i.l(c),e=nr(c),u&&u.l(c)},m(c,s){i&&i.m(c,s),dt(c,e,s),u&&u.m(c,s),r=!0},p(c,s){c[10]?i?i.p(c,s):(i=A5(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u&&u.p&&(!r||s[1]&4)&&xl(u,o,c,c[33],r?Al(o,c[33],s,nC):kl(c[33]),b5)},i(c){r||(We(u,c),r=!0)},o(c){et(u,c),r=!1},d(c){c&&he(e),i&&i.d(c),u&&u.d(c)}}}function A5(t){let e,r='<i class="fa-solid fa-circle-xmark fa-2xl" style="color: #1c1c1c"></i>',i,o;return{c(){e=Je("span"),e.innerHTML=r,this.h()},l(u){e=Qe(u,"SPAN",{class:!0,role:!0,tabindex:!0,"data-svelte-h":!0}),vo(e)!=="svelte-1vnk84a"&&(e.innerHTML=r),this.h()},h(){ge(e,"class","span close-icon svelte-ggkyd1"),ge(e,"role","button"),ge(e,"tabindex","0")},m(u,c){dt(u,e,c),i||(o=[Dr(e,"click",t[17]),Dr(e,"keydown",t[18])],i=!0)},p:mi,d(u){u&&he(e),i=!1,oo(o)}}}function fC(t){let e,r,i,o;const u=[cC,uC],c=[];function s(f,y){return f[2]?0:1}return r=s(t),i=c[r]=u[r](t),{c(){e=Je("div"),i.c(),this.h()},l(f){e=Qe(f,"DIV",{slot:!0,class:!0});var y=vt(e);i.l(y),y.forEach(he),this.h()},h(){ge(e,"slot","primary"),ge(e,"class","primary-content svelte-ggkyd1")},m(f,y){dt(f,e,y),c[r].m(e,null),o=!0},p(f,y){let b=r;r=s(f),r===b?c[r].p(f,y):(gn(),et(c[b],1,1,()=>{c[b]=null}),yn(),i=c[r],i?i.p(f,y):(i=c[r]=u[r](f),i.c()),We(i,1),i.m(e,null))},i(f){o||(We(i),o=!0)},o(f){et(i),o=!1},d(f){f&&he(e),c[r].d()}}}function hC(t){let e,r,i=t[10]&&S5(t);const o=t[26].sidebar,u=wl(o,t,t[33],w5);return{c(){i&&i.c(),e=ir(),u&&u.c()},l(c){i&&i.l(c),e=nr(c),u&&u.l(c)},m(c,s){i&&i.m(c,s),dt(c,e,s),u&&u.m(c,s),r=!0},p(c,s){c[10]?i?i.p(c,s):(i=S5(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u&&u.p&&(!r||s[1]&4)&&xl(u,o,c,c[33],r?Al(o,c[33],s,oC):kl(c[33]),w5)},i(c){r||(We(u,c),r=!0)},o(c){et(u,c),r=!1},d(c){c&&he(e),i&&i.d(c),u&&u.d(c)}}}function dC(t){let e;const r=t[26].map,i=wl(r,t,t[33],x5);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,u){i&&i.m(o,u),e=!0},p(o,u){i&&i.p&&(!e||u[1]&4)&&xl(i,r,o,o[33],e?Al(r,o[33],u,aC):kl(o[33]),x5)},i(o){e||(We(i,o),e=!0)},o(o){et(i,o),e=!1},d(o){i&&i.d(o)}}}function S5(t){let e,r='<i class="fa-solid fa-circle-xmark fa-2xl" style="color: #1c1c1c"></i>',i,o;return{c(){e=Je("span"),e.innerHTML=r,this.h()},l(u){e=Qe(u,"SPAN",{class:!0,role:!0,tabindex:!0,"data-svelte-h":!0}),vo(e)!=="svelte-732g0c"&&(e.innerHTML=r),this.h()},h(){ge(e,"class","span close-icon svelte-ggkyd1"),ge(e,"role","button"),ge(e,"tabindex","0")},m(u,c){dt(u,e,c),i||(o=[Dr(e,"click",t[17]),Dr(e,"keydown",t[18])],i=!0)},p:mi,d(u){u&&he(e),i=!1,oo(o)}}}function pC(t){let e,r,i,o;const u=[dC,hC],c=[];function s(f,y){return f[2]?0:1}return r=s(t),i=c[r]=u[r](t),{c(){e=Je("div"),i.c(),this.h()},l(f){e=Qe(f,"DIV",{slot:!0,class:!0});var y=vt(e);i.l(y),y.forEach(he),this.h()},h(){ge(e,"slot","secondary"),ge(e,"class","secondary-content svelte-ggkyd1")},m(f,y){dt(f,e,y),c[r].m(e,null),o=!0},p(f,y){let b=r;r=s(f),r===b?c[r].p(f,y):(gn(),et(c[b],1,1,()=>{c[b]=null}),yn(),i=c[r],i?i.p(f,y):(i=c[r]=u[r](f),i.c()),We(i,1),i.m(e,null))},i(f){o||(We(i),o=!0)},o(f){et(i),o=!1},d(f){f&&he(e),c[r].d()}}}function mC(t){let e,r,i,o,u,c,s,f,y;Ha(t[27]);let b=t[1]&&k5(t);function A(O){t[29](O)}function I(O){t[30](O)}function C(O){t[31](O)}let N={horizontal:t[3],initialPrimarySize:"0%",$$slots:{secondary:[pC],primary:[fC]},$$scope:{ctx:t}};return t[12]!==void 0&&(N.minPrimarySize=t[12]),t[13]!==void 0&&(N.minSecondarySize=t[13]),t[11]!==void 0&&(N.splitterSize=t[11]),i=new rC({props:N}),Ut.push(()=>Xt(i,"minPrimarySize",A)),Ut.push(()=>Xt(i,"minSecondarySize",I)),Ut.push(()=>Xt(i,"splitterSize",C)),t[32](i),i.$on("changed",t[16]),{c(){b&&b.c(),e=ir(),r=Je("div"),Ht(i.$$.fragment),this.h()},l(O){b&&b.l(O),e=nr(O),r=Qe(O,"DIV",{class:!0,style:!0});var $=vt(r);Yt(i.$$.fragment,$),$.forEach(he),this.h()},h(){ge(r,"class","split-container svelte-ggkyd1"),Nn(r,"height",t[15]+"px"),Nn(r,"width",t[14]+"px")},m(O,$){b&&b.m(O,$),dt(O,e,$),dt(O,r,$),$t(i,r,null),s=!0,f||(y=Dr(window,"resize",t[27]),f=!0)},p(O,$){O[1]?b?b.p(O,$):(b=k5(O),b.c(),b.m(e.parentNode,e)):b&&(b.d(1),b=null);const G={};$[0]&8&&(G.horizontal=O[3]),$[0]&1028|$[1]&4&&(G.$$scope={dirty:$,ctx:O}),!o&&$[0]&4096&&(o=!0,G.minPrimarySize=O[12],er(()=>o=!1)),!u&&$[0]&8192&&(u=!0,G.minSecondarySize=O[13],er(()=>u=!1)),!c&&$[0]&2048&&(c=!0,G.splitterSize=O[11],er(()=>c=!1)),i.$set(G),(!s||$[0]&32768)&&Nn(r,"height",O[15]+"px"),(!s||$[0]&16384)&&Nn(r,"width",O[14]+"px")},i(O){s||(We(i.$$.fragment,O),s=!0)},o(O){et(i.$$.fragment,O),s=!1},d(O){O&&(he(e),he(r)),b&&b.d(O),t[32](null),Gt(i),f=!1,y()}}}function gC(t,e,r){let i,o,u,{$$slots:c={},$$scope:s}=e;const f=zh();let{map:y}=e,{isMenuShown:b=!1}=e,{initialSidebarWidth:A=380}=e,{minSidebarWidth:I="300px"}=e,{minMapWidth:C="50%"}=e,{height:N=0}=e,{width:O=0}=e,{sidebarOnLeft:$=!0}=e,{isHorizontal:G=!1}=e,{faIcon:Z="fa-solid fa-bars"}=e,{faIconSize:ee=""}=e,{controlName:te="menu"}=e,_e,le=0,we=0,ue,ze="0px",Ue=$?I:C,Ce=$?C:I,{position:Me="top-left"}=e;function qe(){}qe.prototype.onAdd=function(Mt){return this.map=Mt,this.controlContainer=document.createElement("div"),this.controlContainer.className="maplibregl-ctrl maplibregl-ctrl-group",r(6,_e.className=`maplibregl-ctrl-${te}`,_e),_e.addEventListener("click",()=>{r(0,b=!b)}),this.controlContainer.appendChild(_e),this.controlContainer},qe.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let it=null;sh(()=>{xt()});const xt=()=>{y&&(it&&y.hasControl(it)||(it=new qe,y.addControl(it,Me)))};R2(()=>{y&&it&&y.hasControl(it)&&y.removeControl(it)});const yt=()=>{y&&(y.triggerRepaint(),y.resize())},$e=()=>{if(ue){if(b===!0)if(i)$?(ue.setPercent(100),r(13,Ce="0px")):(ue.setPercent(0),r(12,Ue="0px")),r(11,ze="0px");else{if($){r(12,Ue=I),r(13,Ce=C);const Mt=A/le*100;ue.setPercent(Mt)}else{r(13,Ce=I),r(12,Ue=C);const Mt=(le-A)/le*100;ue.setPercent(Mt)}r(11,ze="10px")}else $?(r(12,Ue="0px"),ue.setPercent(0)):(r(13,Ce="0px"),ue.setPercent(100)),r(11,ze="0px");yt()}},at=()=>{$e()},mt=Mt=>{yt();const{percent:Kt,primarySize:yr,splitterSize:Er,secondarySize:Jt,dragging:It}=Mt.detail;f("changed",{percent:Kt,primarySize:yr,splitterSize:Er,secondarySize:Jt,dragging:It})},Xe=()=>{r(0,b=!1)},wt=Mt=>{Mt.key==="Enter"&&Mt.target.click()};function be(){r(7,le=window.innerWidth),r(8,we=window.innerHeight)}function Be(Mt){Ut[Mt?"unshift":"push"](()=>{_e=Mt,r(6,_e)})}function Ae(Mt){Ue=Mt,r(12,Ue)}function ht(Mt){Ce=Mt,r(13,Ce)}function Nt(Mt){ze=Mt,r(11,ze)}function zt(Mt){Ut[Mt?"unshift":"push"](()=>{ue=Mt,r(9,ue)})}return t.$$set=Mt=>{"map"in Mt&&r(1,y=Mt.map),"isMenuShown"in Mt&&r(0,b=Mt.isMenuShown),"initialSidebarWidth"in Mt&&r(19,A=Mt.initialSidebarWidth),"minSidebarWidth"in Mt&&r(20,I=Mt.minSidebarWidth),"minMapWidth"in Mt&&r(21,C=Mt.minMapWidth),"height"in Mt&&r(22,N=Mt.height),"width"in Mt&&r(23,O=Mt.width),"sidebarOnLeft"in Mt&&r(2,$=Mt.sidebarOnLeft),"isHorizontal"in Mt&&r(3,G=Mt.isHorizontal),"faIcon"in Mt&&r(4,Z=Mt.faIcon),"faIconSize"in Mt&&r(5,ee=Mt.faIconSize),"controlName"in Mt&&r(24,te=Mt.controlName),"position"in Mt&&r(25,Me=Mt.position),"$$scope"in Mt&&r(33,s=Mt.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&128&&r(10,i=le<768),t.$$.dirty[0]&1024&&$e(),t.$$.dirty[0]&4194560&&r(15,o=N>0?N:we),t.$$.dirty[0]&8388736&&r(14,u=O>0?O:le),t.$$.dirty[0]&256,t.$$.dirty[0]&128,t.$$.dirty[0]&66&&y&&_e&&xt(),t.$$.dirty[0]&1&&at(),t.$$.dirty[0]&512&&ue&&at()},[b,y,$,G,Z,ee,_e,le,we,ue,i,ze,Ue,Ce,u,o,mt,Xe,wt,A,I,C,N,O,te,Me,c,be,Be,Ae,ht,Nt,zt,s]}class Z8 extends di{constructor(e){super(),pi(this,e,gC,mC,hi,{map:1,isMenuShown:0,initialSidebarWidth:19,minSidebarWidth:20,minMapWidth:21,height:22,width:23,sidebarOnLeft:2,isHorizontal:3,faIcon:4,faIconSize:5,controlName:24,position:25},null,[-1,-1])}}var yC=8,_C={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},vC={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},bC=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],wC={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers. If specified as an object only specified source layers will have id overriden, others will fallback to original feature id"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},xC={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},kC={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},AC={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},SC={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},EC={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},CC={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},IC=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],LC={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},TC={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},PC={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},MC={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},DC={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},zC={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},NC={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0",android:"10.0.0",ios:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},RC={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},OC={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},FC={type:"array",value:"*",doc:"A filter selects specific features from a layer."},BC={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},jC={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},UC={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},qC={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},VC={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},HC={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},$C={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},GC={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},WC={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},ZC={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0",android:"10.0.0",ios:"10.0.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `LineString` or `Polygon`. `Multi*` feature types return the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},XC={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},YC={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},KC={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carrée projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},JC={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},QC=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],eI={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},tI={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},rI={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},iI={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},nI={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},oI={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},aI={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},sI={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},lI={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},uI={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},cI={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},fI={$version:yC,$root:_C,sources:vC,source:bC,source_vector:wC,source_raster:xC,source_raster_dem:kC,source_geojson:AC,source_video:SC,source_image:EC,layer:CC,layout:IC,layout_background:LC,layout_sky:TC,layout_fill:PC,layout_circle:MC,layout_heatmap:DC,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0",android:"10.7.0",ios:"10.7.0"}},"property-type":"constant"}},layout_line:zC,layout_symbol:NC,layout_raster:RC,layout_hillshade:OC,filter:FC,filter_symbol:BC,filter_fill:jC,filter_line:UC,filter_circle:qC,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:VC,filter_operator:HC,geometry_type:$C,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:GC,expression:WC,expression_name:ZC,fog:XC,light:YC,projection:KC,terrain:JC,paint:QC,paint_fill:eI,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings.",requires:["fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:tI,paint_circle:rI,paint_heatmap:iI,paint_symbol:nI,paint_raster:oI,paint_hillshade:aI,paint_background:sI,paint_sky:lI,transition:uI,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:cI},Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ky={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var i=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,u=typeof Qm=="object"&&Qm;(u.global===u||u.window===u||u.self===u)&&(r=u);var c,s=2147483647,f=36,y=1,b=26,A=38,I=700,C=72,N=128,O="-",$=/^xn--/,G=/[^\x20-\x7E]/,Z=/[\x2E\u3002\uFF0E\uFF61]/g,ee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=f-y,_e=Math.floor,le=String.fromCharCode,we;function ue(Xe){throw RangeError(ee[Xe])}function ze(Xe,wt){for(var be=Xe.length,Be=[];be--;)Be[be]=wt(Xe[be]);return Be}function Ue(Xe,wt){var be=Xe.split("@"),Be="";be.length>1&&(Be=be[0]+"@",Xe=be[1]),Xe=Xe.replace(Z,".");var Ae=Xe.split("."),ht=ze(Ae,wt).join(".");return Be+ht}function Ce(Xe){for(var wt=[],be=0,Be=Xe.length,Ae,ht;be<Be;)Ae=Xe.charCodeAt(be++),Ae>=55296&&Ae<=56319&&be<Be?(ht=Xe.charCodeAt(be++),(ht&64512)==56320?wt.push(((Ae&1023)<<10)+(ht&1023)+65536):(wt.push(Ae),be--)):wt.push(Ae);return wt}function Me(Xe){return ze(Xe,function(wt){var be="";return wt>65535&&(wt-=65536,be+=le(wt>>>10&1023|55296),wt=56320|wt&1023),be+=le(wt),be}).join("")}function qe(Xe){return Xe-48<10?Xe-22:Xe-65<26?Xe-65:Xe-97<26?Xe-97:f}function it(Xe,wt){return Xe+22+75*(Xe<26)-((wt!=0)<<5)}function xt(Xe,wt,be){var Be=0;for(Xe=be?_e(Xe/I):Xe>>1,Xe+=_e(Xe/wt);Xe>te*b>>1;Be+=f)Xe=_e(Xe/te);return _e(Be+(te+1)*Xe/(Xe+A))}function yt(Xe){var wt=[],be=Xe.length,Be,Ae=0,ht=N,Nt=C,zt,Mt,Kt,yr,Er,Jt,It,Fr,Ft;for(zt=Xe.lastIndexOf(O),zt<0&&(zt=0),Mt=0;Mt<zt;++Mt)Xe.charCodeAt(Mt)>=128&&ue("not-basic"),wt.push(Xe.charCodeAt(Mt));for(Kt=zt>0?zt+1:0;Kt<be;){for(yr=Ae,Er=1,Jt=f;Kt>=be&&ue("invalid-input"),It=qe(Xe.charCodeAt(Kt++)),(It>=f||It>_e((s-Ae)/Er))&&ue("overflow"),Ae+=It*Er,Fr=Jt<=Nt?y:Jt>=Nt+b?b:Jt-Nt,!(It<Fr);Jt+=f)Ft=f-Fr,Er>_e(s/Ft)&&ue("overflow"),Er*=Ft;Be=wt.length+1,Nt=xt(Ae-yr,Be,yr==0),_e(Ae/Be)>s-ht&&ue("overflow"),ht+=_e(Ae/Be),Ae%=Be,wt.splice(Ae++,0,ht)}return Me(wt)}function $e(Xe){var wt,be,Be,Ae,ht,Nt,zt,Mt,Kt,yr,Er,Jt=[],It,Fr,Ft,ct;for(Xe=Ce(Xe),It=Xe.length,wt=N,be=0,ht=C,Nt=0;Nt<It;++Nt)Er=Xe[Nt],Er<128&&Jt.push(le(Er));for(Be=Ae=Jt.length,Ae&&Jt.push(O);Be<It;){for(zt=s,Nt=0;Nt<It;++Nt)Er=Xe[Nt],Er>=wt&&Er<zt&&(zt=Er);for(Fr=Be+1,zt-wt>_e((s-be)/Fr)&&ue("overflow"),be+=(zt-wt)*Fr,wt=zt,Nt=0;Nt<It;++Nt)if(Er=Xe[Nt],Er<wt&&++be>s&&ue("overflow"),Er==wt){for(Mt=be,Kt=f;yr=Kt<=ht?y:Kt>=ht+b?b:Kt-ht,!(Mt<yr);Kt+=f)ct=Mt-yr,Ft=f-yr,Jt.push(le(it(yr+ct%Ft,0))),Mt=_e(ct/Ft);Jt.push(le(it(Mt,0))),ht=xt(be,Fr,Be==Ae),be=0,++Be}++be,++wt}return Jt.join("")}function at(Xe){return Ue(Xe,function(wt){return $.test(wt)?yt(wt.slice(4).toLowerCase()):wt})}function mt(Xe){return Ue(Xe,function(wt){return G.test(wt)?"xn--"+$e(wt):wt})}if(c={version:"1.3.2",ucs2:{decode:Ce,encode:Me},decode:yt,encode:$e,toASCII:mt,toUnicode:at},i&&o)if(t.exports==i)o.exports=c;else for(we in c)c.hasOwnProperty(we)&&(i[we]=c[we]);else r.punycode=c})(Qm)})(ky,ky.exports);var hI={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},Np={};function dI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var pI=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if(typeof t!="string"||t.length===0)return o;var u=/\+/g;t=t.split(e);var c=1e3;i&&typeof i.maxKeys=="number"&&(c=i.maxKeys);var s=t.length;c>0&&s>c&&(s=c);for(var f=0;f<s;++f){var y=t[f].replace(u,"%20"),b=y.indexOf(r),A,I,C,N;b>=0?(A=y.substr(0,b),I=y.substr(b+1)):(A=y,I=""),C=decodeURIComponent(A),N=decodeURIComponent(I),dI(o,C)?Array.isArray(o[C])?o[C].push(N):o[C]=[o[C],N]:o[C]=N}return o},op=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},mI=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(o){var u=encodeURIComponent(op(o))+r;return Array.isArray(t[o])?t[o].map(function(c){return u+encodeURIComponent(op(c))}).join(e):u+encodeURIComponent(op(t[o]))}).join(e):i?encodeURIComponent(op(i))+r+encodeURIComponent(op(t)):""};Np.decode=Np.parse=pI;Np.encode=Np.stringify=mI;var gI=ky.exports,Ef=hI;function Mf(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var yI=/^([a-z0-9.+-]+:)/i,_I=/:[0-9]*$/,vI=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,bI=["<",">",'"',"`"," ","\r",`
`,"	"],wI=["{","}","|","\\","^","`"].concat(bI),Ay=["'"].concat(wI),E5=["%","/","?",";","#"].concat(Ay),C5=["/","?","#"],xI=255,I5=/^[+a-z0-9A-Z_-]{0,63}$/,kI=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,AI={javascript:!0,"javascript:":!0},Sy={javascript:!0,"javascript:":!0},wd={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ey=Np;function SI(t,e,r){if(t&&Ef.isObject(t)&&t instanceof Mf)return t;var i=new Mf;return i.parse(t,e,r),i}Mf.prototype.parse=function(t,e,r){if(!Ef.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=i!==-1&&i<t.indexOf("#")?"?":"#",u=t.split(o),c=/\\/g;u[0]=u[0].replace(c,"/"),t=u.join(o);var s=t;if(s=s.trim(),!r&&t.split("#").length===1){var f=vI.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],e?this.query=Ey.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var y=yI.exec(s);if(y){y=y[0];var b=y.toLowerCase();this.protocol=b,s=s.substr(y.length)}if(r||y||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var A=s.substr(0,2)==="//";A&&!(y&&Sy[y])&&(s=s.substr(2),this.slashes=!0)}if(!Sy[y]&&(A||y&&!wd[y])){for(var I=-1,C=0;C<C5.length;C++){var N=s.indexOf(C5[C]);N!==-1&&(I===-1||N<I)&&(I=N)}var O,$;I===-1?$=s.lastIndexOf("@"):$=s.lastIndexOf("@",I),$!==-1&&(O=s.slice(0,$),s=s.slice($+1),this.auth=decodeURIComponent(O)),I=-1;for(var C=0;C<E5.length;C++){var N=s.indexOf(E5[C]);N!==-1&&(I===-1||N<I)&&(I=N)}I===-1&&(I=s.length),this.host=s.slice(0,I),s=s.slice(I),this.parseHost(),this.hostname=this.hostname||"";var G=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!G)for(var Z=this.hostname.split(/\./),C=0,ee=Z.length;C<ee;C++){var te=Z[C];if(te&&!te.match(I5)){for(var _e="",le=0,we=te.length;le<we;le++)te.charCodeAt(le)>127?_e+="x":_e+=te[le];if(!_e.match(I5)){var ue=Z.slice(0,C),ze=Z.slice(C+1),Ue=te.match(kI);Ue&&(ue.push(Ue[1]),ze.unshift(Ue[2])),ze.length&&(s="/"+ze.join(".")+s),this.hostname=ue.join(".");break}}}this.hostname.length>xI?this.hostname="":this.hostname=this.hostname.toLowerCase(),G||(this.hostname=gI.toASCII(this.hostname));var Ce=this.port?":"+this.port:"",Me=this.hostname||"";this.host=Me+Ce,this.href+=this.host,G&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!AI[b])for(var C=0,ee=Ay.length;C<ee;C++){var qe=Ay[C];if(s.indexOf(qe)!==-1){var it=encodeURIComponent(qe);it===qe&&(it=escape(qe)),s=s.split(qe).join(it)}}var xt=s.indexOf("#");xt!==-1&&(this.hash=s.substr(xt),s=s.slice(0,xt));var yt=s.indexOf("?");if(yt!==-1?(this.search=s.substr(yt),this.query=s.substr(yt+1),e&&(this.query=Ey.parse(this.query)),s=s.slice(0,yt)):e&&(this.search="",this.query={}),s&&(this.pathname=s),wd[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ce=this.pathname||"",$e=this.search||"";this.path=Ce+$e}return this.href=this.format(),this};Mf.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,u="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Ef.isObject(this.query)&&Object.keys(this.query).length&&(u=Ey.stringify(this.query));var c=this.search||u&&"?"+u||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||wd[e])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),c&&c.charAt(0)!=="?"&&(c="?"+c),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),c=c.replace("#","%23"),e+o+r+c+i};Mf.prototype.resolve=function(t){return this.resolveObject(SI(t,!1,!0)).format()};Mf.prototype.resolveObject=function(t){if(Ef.isString(t)){var e=new Mf;e.parse(t,!1,!0),t=e}for(var r=new Mf,i=Object.keys(this),o=0;o<i.length;o++){var u=i[o];r[u]=this[u]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),s=0;s<c.length;s++){var f=c[s];f!=="protocol"&&(r[f]=t[f])}return wd[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!wd[t.protocol]){for(var y=Object.keys(t),b=0;b<y.length;b++){var A=y[b];r[A]=t[A]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Sy[t.protocol]){for(var ee=(t.pathname||"").split("/");ee.length&&!(t.host=ee.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),ee[0]!==""&&ee.unshift(""),ee.length<2&&ee.unshift(""),r.pathname=ee.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var I=r.pathname||"",C=r.search||"";r.path=I+C}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var N=r.pathname&&r.pathname.charAt(0)==="/",O=t.host||t.pathname&&t.pathname.charAt(0)==="/",$=O||N||r.host&&t.pathname,G=$,Z=r.pathname&&r.pathname.split("/")||[],ee=t.pathname&&t.pathname.split("/")||[],te=r.protocol&&!wd[r.protocol];if(te&&(r.hostname="",r.port=null,r.host&&(Z[0]===""?Z[0]=r.host:Z.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(ee[0]===""?ee[0]=t.host:ee.unshift(t.host)),t.host=null),$=$&&(ee[0]===""||Z[0]==="")),O)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,Z=ee;else if(ee.length)Z||(Z=[]),Z.pop(),Z=Z.concat(ee),r.search=t.search,r.query=t.query;else if(!Ef.isNullOrUndefined(t.search)){if(te){r.hostname=r.host=Z.shift();var _e=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;_e&&(r.auth=_e.shift(),r.host=r.hostname=_e.shift())}return r.search=t.search,r.query=t.query,(!Ef.isNull(r.pathname)||!Ef.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!Z.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var le=Z.slice(-1)[0],we=(r.host||t.host||Z.length>1)&&(le==="."||le==="..")||le==="",ue=0,ze=Z.length;ze>=0;ze--)le=Z[ze],le==="."?Z.splice(ze,1):le===".."?(Z.splice(ze,1),ue++):ue&&(Z.splice(ze,1),ue--);if(!$&&!G)for(;ue--;ue)Z.unshift("..");$&&Z[0]!==""&&(!Z[0]||Z[0].charAt(0)!=="/")&&Z.unshift(""),we&&Z.join("/").substr(-1)!=="/"&&Z.push("");var Ue=Z[0]===""||Z[0]&&Z[0].charAt(0)==="/";if(te){r.hostname=r.host=Ue?"":Z.length?Z.shift():"";var _e=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;_e&&(r.auth=_e.shift(),r.host=r.hostname=_e.shift())}return $=$||r.host&&Z.length,$&&!Ue&&Z.unshift(""),Z.length?r.pathname=Z.join("/"):(r.pathname=null,r.path=null),(!Ef.isNull(r.pathname)||!Ef.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Mf.prototype.parseHost=function(){var t=this.host,e=_I.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};function X8(t,...e){for(const r of e)for(const i in r)t[i]=r[i];return t}class EI extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var Q0=EI;class m_{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[i,o]of r)this.bindings[i]=o}concat(e){return new m_(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var CI=m_;const U2={kind:"null"},Ti={kind:"number"},_o={kind:"string"},ho={kind:"boolean"},Df={kind:"color"},xd={kind:"object"},po={kind:"value"},II={kind:"error"},q2={kind:"collator"},V2={kind:"formatted"},e1={kind:"resolvedImage"};function s0(t,e){return{kind:"array",itemType:t,N:e}}function $a(t){if(t.kind==="array"){const e=$a(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}else return t.kind}const LI=[U2,Ti,_o,ho,Df,V2,xd,s0(po),e1];function Rp(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Rp(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const r of LI)if(!Rp(r,e))return null}}return`Expected ${$a(t)} but found ${$a(e)} instead.`}function g_(t,e){return e.some(r=>r.kind===t.kind)}function Op(t,e){return e.some(r=>r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t)}var TI={},Y8,L5={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _p(t){return t=Math.round(t),t<0?0:t>255?255:t}function T5(t){return t<0?0:t>1?1:t}function eg(t){return t[t.length-1]==="%"?_p(parseFloat(t)/100*255):_p(parseInt(t))}function O1(t){return t[t.length-1]==="%"?T5(parseFloat(t)/100):T5(parseFloat(t))}function tg(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function PI(t){var e=t.replace(/ /g,"").toLowerCase();if(e in L5)return L5[e].slice();if(e[0]==="#"){if(e.length===4){var r=parseInt(e.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(e.length===7){var r=parseInt(e.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var i=e.indexOf("("),o=e.indexOf(")");if(i!==-1&&o+1===e.length){var u=e.substr(0,i),c=e.substr(i+1,o-(i+1)).split(","),s=1;switch(u){case"rgba":if(c.length!==4)return null;s=O1(c.pop());case"rgb":return c.length!==3?null:[eg(c[0]),eg(c[1]),eg(c[2]),s];case"hsla":if(c.length!==4)return null;s=O1(c.pop());case"hsl":if(c.length!==3)return null;var f=(parseFloat(c[0])%360+360)%360/360,y=O1(c[1]),b=O1(c[2]),A=b<=.5?b*(y+1):b+y-b*y,I=b*2-A;return[_p(tg(I,A,f+1/3)*255),_p(tg(I,A,f)*255),_p(tg(I,A,f-1/3)*255),s];default:return null}}return null}try{Y8=TI.parseCSSColor=PI}catch{}class gc{constructor(e,r,i,o=1){this.r=e,this.g=r,this.b=i,this.a=o}static parse(e){if(!e)return;if(e instanceof gc)return e;if(typeof e!="string")return;const r=Y8(e);if(r)return new gc(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}toString(){const[e,r,i,o]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(i)},${o})`}toArray(){const{r:e,g:r,b:i,a:o}=this;return o===0?[0,0,0,0]:[e*255/o,r*255/o,i*255/o,o]}toArray01(){const{r:e,g:r,b:i,a:o}=this;return o===0?[0,0,0,0]:[e/o,r/o,i/o,o]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:i,a:o}=this;return[e,r,i,o]}}gc.black=new gc(0,0,0,1);gc.white=new gc(1,1,1,1);gc.transparent=new gc(0,0,0,0);gc.red=new gc(1,0,0,1);gc.blue=new gc(0,0,1,1);var Vl=gc;class y_{constructor(e,r,i){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Cy{constructor(e,r,i,o,u){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=i,this.fontStack=o,this.textColor=u}}class D0{constructor(e){this.sections=e}static fromString(e){return new D0([new Cy(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof D0?e:D0.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}return e}}class Of{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Of({name:e,available:!1}):null}serialize(){return["image",this.name]}}function K8(t,e,r,i){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,r,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[t,e,r,i]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function m2(t){if(t===null)return!0;if(typeof t=="string")return!0;if(typeof t=="boolean")return!0;if(typeof t=="number")return!0;if(t instanceof Vl)return!0;if(t instanceof y_)return!0;if(t instanceof D0)return!0;if(t instanceof Of)return!0;if(Array.isArray(t)){for(const e of t)if(!m2(e))return!1;return!0}else if(typeof t=="object"){for(const e in t)if(!m2(t[e]))return!1;return!0}else return!1}function Ys(t){if(t===null)return U2;if(typeof t=="string")return _o;if(typeof t=="boolean")return ho;if(typeof t=="number")return Ti;if(t instanceof Vl)return Df;if(t instanceof y_)return q2;if(t instanceof D0)return V2;if(t instanceof Of)return e1;if(Array.isArray(t)){const e=t.length;let r;for(const i of t){const o=Ys(i);if(!r)r=o;else{if(r===o)continue;r=po;break}}return s0(r||po,e)}else return xd}function vp(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof Vl||t instanceof D0||t instanceof Of?t.toString():JSON.stringify(t)}class __{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!m2(e[1]))return r.error("invalid value");const i=e[1];let o=Ys(i);const u=r.expectedType;return o.kind==="array"&&o.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(o=u),new __(o,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Vl?["rgba"].concat(this.value.toArray()):this.value instanceof D0?this.value.serialize():this.value}}var g2=__;class MI{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var Hl=MI;const rg={string:_o,number:Ti,boolean:ho,object:xd};class v_{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let i=1,o;const u=e[0];if(u==="array"){let s;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in rg)||y==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);s=rg[y],i++}else s=po;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);f=e[2],i++}o=s0(s,f)}else o=rg[u];const c=[];for(;i<e.length;i++){const s=r.parse(e[i],i,po);if(!s)return null;c.push(s)}return new v_(o,c)}evaluate(e){for(let r=0;r<this.args.length;r++){const i=this.args[r].evaluate(e);if(Rp(this.type,Ys(i))){if(r===this.args.length-1)throw new Hl(`Expected value to be of type ${$a(this.type)}, but found ${$a(Ys(i))} instead.`)}else return i}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);const o=e.N;(typeof o=="number"||this.args.length>1)&&r.push(o)}}return r.concat(this.args.map(i=>i.serialize()))}}var Lf=v_;class H2{constructor(e){this.type=V2,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");const o=[];let u=!1;for(let c=1;c<=e.length-1;++c){const s=e[c];if(u&&typeof s=="object"&&!Array.isArray(s)){u=!1;let f=null;if(s["font-scale"]&&(f=r.parse(s["font-scale"],1,Ti),!f))return null;let y=null;if(s["text-font"]&&(y=r.parse(s["text-font"],1,s0(_o)),!y))return null;let b=null;if(s["text-color"]&&(b=r.parse(s["text-color"],1,Df),!b))return null;const A=o[o.length-1];A.scale=f,A.font=y,A.textColor=b}else{const f=r.parse(e[c],1,po);if(!f)return null;const y=f.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,o.push({content:f,scale:null,font:null,textColor:null})}}return new H2(o)}evaluate(e){const r=i=>{const o=i.content.evaluate(e);return Ys(o)===e1?new Cy("",o,null,null,null):new Cy(vp(o),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)};return new D0(this.sections.map(r))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}return e}}class $2{constructor(e){this.type=e1,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const i=r.parse(e[1],1,_o);return i?new $2(i):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),i=Of.fromString(r);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(r)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const DI={"to-boolean":ho,"to-color":Df,"to-number":Ti,"to-string":_o};class b_{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");const o=DI[i],u=[];for(let c=1;c<e.length;c++){const s=r.parse(e[c],c,po);if(!s)return null;u.push(s)}return new b_(o,u)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,i;for(const o of this.args){if(r=o.evaluate(e),i=null,r instanceof Vl)return r;if(typeof r=="string"){const u=e.parseColor(r);if(u)return u}else if(Array.isArray(r)&&(r.length<3||r.length>4?i=`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:i=K8(r[0],r[1],r[2],r[3]),!i))return new Vl(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Hl(i||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}else if(this.type.kind==="number"){let r=null;for(const i of this.args){if(r=i.evaluate(e),r===null)return 0;const o=Number(r);if(!isNaN(o))return o}throw new Hl(`Could not convert ${JSON.stringify(r)} to number.`)}else return this.type.kind==="formatted"?D0.fromString(vp(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Of.fromString(vp(this.args[0].evaluate(e))):vp(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new H2([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new $2(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var cd=b_;const zI=["Unknown","Point","LineString","Polygon"];class NI{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?zI[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:i,y:o}=this.featureTileCoord,u=i*r-e[0],c=o*r-e[1],s=this.featureDistanceData.bearing[0],f=this.featureDistanceData.bearing[1];return s*u+f*c}return 0}parseColor(e){let r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=Vl.parse(e)),r}}var J8=NI;class fd{constructor(e,r,i,o){this.name=e,this.type=r,this._evaluate=i,this.args=o}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const i=e[0],o=fd.definitions[i];if(!o)return r.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(o)?o[0]:o.type,c=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,s=c.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let f=null;for(const[y,b]of s){f=new ix(r.registry,r.path,null,r.scope);const A=[];let I=!1;for(let C=1;C<e.length;C++){const N=e[C],O=Array.isArray(y)?y[C-1]:y.type,$=f.parse(N,1+A.length,O);if(!$){I=!0;break}A.push($)}if(!I){if(Array.isArray(y)&&y.length!==A.length){f.error(`Expected ${y.length} arguments, but found ${A.length} instead.`);continue}for(let C=0;C<A.length;C++){const N=Array.isArray(y)?y[C]:y.type,O=A[C];f.concat(C+1).checkSubtype(N,O.type)}if(f.errors.length===0)return new fd(i,u,b,A)}}if(s.length===1)r.errors.push(...f.errors);else{const b=(s.length?s:c).map(([I])=>RI(I)).join(" | "),A=[];for(let I=1;I<e.length;I++){const C=r.parse(e[I],1+A.length);if(!C)return null;A.push($a(C.type))}r.error(`Expected arguments of type ${b}, but found (${A.join(", ")}) instead.`)}return null}static register(e,r){fd.definitions=r;for(const i in r)e[i]=fd}}function RI(t){return Array.isArray(t)?`(${t.map($a).join(", ")})`:`(${$a(t.type)}...)`}var Od=fd;class G2{constructor(e,r,i){this.type=q2,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");const o=r.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,ho);if(!o)return null;const u=r.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,ho);if(!u)return null;let c=null;return i.locale&&(c=r.parse(i.locale,1,_o),!c)?null:new G2(o,u,c)}evaluate(e){return new y_(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Qf=8192;function w_(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function OI(t){return(180+t)/360}function FI(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function y2(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function BI(t,e){const r=OI(t[0]),i=FI(t[1]),o=Math.pow(2,e.z);return[Math.round(r*o*Qf),Math.round(i*o*Qf)]}function jI(t,e,r){const i=t[0]-e[0],o=t[1]-e[1],u=t[0]-r[0],c=t[1]-r[1];return i*c-u*o===0&&i*u<=0&&o*c<=0}function UI(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function x_(t,e){let r=!1;for(let i=0,o=e.length;i<o;i++){const u=e[i];for(let c=0,s=u.length;c<s-1;c++){if(jI(t,u[c],u[c+1]))return!1;UI(t,u[c],u[c+1])&&(r=!r)}}return r}function qI(t,e){for(let r=0;r<e.length;r++)if(x_(t,e[r]))return!0;return!1}function VI(t,e){return t[0]*e[1]-t[1]*e[0]}function P5(t,e,r,i){const o=t[0]-r[0],u=t[1]-r[1],c=e[0]-r[0],s=e[1]-r[1],f=i[0]-r[0],y=i[1]-r[1],b=o*y-f*u,A=c*y-f*s;return b>0&&A<0||b<0&&A>0}function HI(t,e,r,i){const o=[e[0]-t[0],e[1]-t[1]],u=[i[0]-r[0],i[1]-r[1]];return VI(u,o)===0?!1:!!(P5(t,e,r,i)&&P5(r,i,t,e))}function $I(t,e,r){for(const i of r)for(let o=0;o<i.length-1;++o)if(HI(t,e,i[o],i[o+1]))return!0;return!1}function Q8(t,e){for(let r=0;r<t.length;++r)if(!x_(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if($I(t[r],t[r+1],e))return!1;return!0}function GI(t,e){for(let r=0;r<e.length;r++)if(Q8(t,e[r]))return!0;return!1}function k_(t,e,r){const i=[];for(let o=0;o<t.length;o++){const u=[];for(let c=0;c<t[o].length;c++){const s=BI(t[o][c],r);w_(e,s),u.push(s)}i.push(u)}return i}function ex(t,e,r){const i=[];for(let o=0;o<t.length;o++){const u=k_(t[o],e,r);i.push(u)}return i}function tx(t,e,r,i){if(t[0]<r[0]||t[0]>r[2]){const o=i*.5;let u=t[0]-r[0]>o?-i:r[0]-t[0]>o?i:0;u===0&&(u=t[0]-r[2]>o?-i:r[2]-t[0]>o?i:0),t[0]+=u}w_(e,t)}function WI(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function M5(t,e,r,i){const o=Math.pow(2,i.z)*Qf,u=[i.x*Qf,i.y*Qf],c=[];if(!t)return c;for(const s of t)for(const f of s){const y=[f.x+u[0],f.y+u[1]];tx(y,e,r,o),c.push(y)}return c}function D5(t,e,r,i){const o=Math.pow(2,i.z)*Qf,u=[i.x*Qf,i.y*Qf],c=[];if(!t)return c;for(const s of t){const f=[];for(const y of s){const b=[y.x+u[0],y.y+u[1]];w_(e,b),f.push(b)}c.push(f)}if(e[2]-e[0]<=o/2){WI(e);for(const s of c)for(const f of s)tx(f,e,r,o)}return c}function ZI(t,e){const r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if(!o)return!1;if(e.type==="Polygon"){const u=k_(e.coordinates,i,o),c=M5(t.geometry(),r,i,o);if(!y2(r,i))return!1;for(const s of c)if(!x_(s,u))return!1}if(e.type==="MultiPolygon"){const u=ex(e.coordinates,i,o),c=M5(t.geometry(),r,i,o);if(!y2(r,i))return!1;for(const s of c)if(!qI(s,u))return!1}return!0}function XI(t,e){const r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if(!o)return!1;if(e.type==="Polygon"){const u=k_(e.coordinates,i,o),c=D5(t.geometry(),r,i,o);if(!y2(r,i))return!1;for(const s of c)if(!Q8(s,u))return!1}if(e.type==="MultiPolygon"){const u=ex(e.coordinates,i,o),c=D5(t.geometry(),r,i,o);if(!y2(r,i))return!1;for(const s of c)if(!GI(s,u))return!1}return!0}class bp{constructor(e,r){this.type=ho,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(m2(e[1])){const i=e[1];if(i.type==="FeatureCollection")for(let o=0;o<i.features.length;++o){const u=i.features[o].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new bp(i,i.features[o].geometry)}else if(i.type==="Feature"){const o=i.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new bp(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new bp(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return ZI(e,this.geometries);if(e.geometryType()==="LineString")return XI(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var A_=bp;function S_(t){if(t instanceof Od){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof A_)return!1;let e=!0;return t.eachChild(r=>{e&&!S_(r)&&(e=!1)}),e}function E_(t){if(t instanceof Od&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(r=>{e&&!E_(r)&&(e=!1)}),e}function C_(t,e){if(t instanceof Od&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(i=>{r&&!C_(i,e)&&(r=!1)}),r}class I_{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const i=e[1];return r.scope.has(i)?new I_(i,r.scope.get(i)):r.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var rx=I_;class L_{constructor(e,r=[],i,o=new CI,u=[]){this.registry=e,this.path=r,this.key=r.map(c=>`[${c}]`).join(""),this.scope=o,this.errors=u,this.expectedType=i}parse(e,r,i,o,u={}){return r?this.concat(r,i,o)._parse(e,u):this._parse(e,u)}_parse(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(o,u,c){return c==="assert"?new Lf(u,[o]):c==="coerce"?new cd(u,[o]):o}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=e[0];if(typeof o!="string")return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[o];if(u){let c=u.parse(e,this);if(!c)return null;if(this.expectedType){const s=this.expectedType,f=c.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&f.kind==="value")c=i(c,s,r.typeAnnotation||"assert");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))c=i(c,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,f))return null}if(!(c instanceof g2)&&c.type.kind!=="resolvedImage"&&Iy(c)){const s=new J8;try{c=new g2(c.type,c.evaluate(s))}catch(f){return this.error(f.message),null}}return c}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,r,i){const o=typeof e=="number"?this.path.concat(e):this.path,u=i?this.scope.concat(i):this.scope;return new L_(this.registry,o,r||null,u,this.errors)}error(e,...r){const i=`${this.key}${r.map(o=>`[${o}]`).join("")}`;this.errors.push(new Q0(i,e))}checkSubtype(e,r){const i=Rp(e,r);return i&&this.error(i),i}}var ix=L_;function Iy(t){if(t instanceof rx)return Iy(t.boundExpression);if(t instanceof Od&&t.name==="error")return!1;if(t instanceof G2)return!1;if(t instanceof A_)return!1;const e=t instanceof cd||t instanceof Lf;let r=!0;return t.eachChild(i=>{e?r=r&&Iy(i):r=r&&i instanceof g2}),r?S_(t)&&C_(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function W2(t,e){const r=t.length-1;let i=0,o=r,u=0,c,s;for(;i<=o;)if(u=Math.floor((i+o)/2),c=t[u],s=t[u+1],c<=e){if(u===r||e<s)return u;i=u+1}else if(c>e)o=u-1;else throw new Hl("Input is not a number.");return 0}class T_{constructor(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[o,u]of i)this.labels.push(o),this.outputs.push(u)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");const i=r.parse(e[1],1,Ti);if(!i)return null;const o=[];let u=null;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);for(let c=1;c<e.length;c+=2){const s=c===1?-1/0:e[c],f=e[c+1],y=c,b=c+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(o.length&&o[o.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const A=r.parse(f,b,u);if(!A)return null;u=u||A.type,o.push([s,A])}return new T_(u,i,o)}evaluate(e){const r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);const o=this.input.evaluate(e);if(o<=r[0])return i[0].evaluate(e);const u=r.length;if(o>=r[u-1])return i[u-1].evaluate(e);const c=W2(r,o);return i[c].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var nx=T_,YI=ox;function ox(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=i}ox.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,i=0;i<8;i++){var o=this.sampleCurveX(r)-t;if(Math.abs(o)<e)return r;var u=this.sampleCurveDerivativeX(r);if(Math.abs(u)<1e-6)break;r=r-o/u}var c=0,s=1;for(r=t,i=0;i<20&&(o=this.sampleCurveX(r),!(Math.abs(o-t)<e));i++)t>o?c=r:s=r,r=(s-c)*.5+c;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};function $c(t,e,r){return t*(1-r)+e*r}function KI(t,e,r){return new Vl($c(t.r,e.r,r),$c(t.g,e.g,r),$c(t.b,e.b,r),$c(t.a,e.a,r))}function JI(t,e,r){return t.map((i,o)=>$c(i,e[o],r))}var ax=Object.freeze({__proto__:null,number:$c,color:KI,array:JI});const sx=.95047,lx=1,ux=1.08883,cx=4/29,kd=6/29,fx=3*kd*kd,QI=kd*kd*kd,eL=Math.PI/180,tL=180/Math.PI;function ig(t){return t>QI?Math.pow(t,1/3):t/fx+cx}function ng(t){return t>kd?t*t*t:fx*(t-cx)}function og(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ag(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hx(t){const e=ag(t.r),r=ag(t.g),i=ag(t.b),o=ig((.4124564*e+.3575761*r+.1804375*i)/sx),u=ig((.2126729*e+.7151522*r+.072175*i)/lx),c=ig((.0193339*e+.119192*r+.9503041*i)/ux);return{l:116*u-16,a:500*(o-u),b:200*(u-c),alpha:t.a}}function dx(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=lx*ng(e),r=sx*ng(r),i=ux*ng(i),new Vl(og(3.2404542*r-1.5371385*e-.4985314*i),og(-.969266*r+1.8760108*e+.041556*i),og(.0556434*r-.2040259*e+1.0572252*i),t.alpha)}function rL(t,e,r){return{l:$c(t.l,e.l,r),a:$c(t.a,e.a,r),b:$c(t.b,e.b,r),alpha:$c(t.alpha,e.alpha,r)}}function iL(t){const{l:e,a:r,b:i}=hx(t),o=Math.atan2(i,r)*tL;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:e,alpha:t.a}}function nL(t){const e=t.h*eL,r=t.c,i=t.l;return dx({l:i,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}function oL(t,e,r){const i=e-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}function aL(t,e,r){return{h:oL(t.h,e.h,r),c:$c(t.c,e.c,r),l:$c(t.l,e.l,r),alpha:$c(t.alpha,e.alpha,r)}}const fp={forward:hx,reverse:dx,interpolate:rL},hp={forward:iL,reverse:nL,interpolate:aL};var px=Object.freeze({__proto__:null,lab:fp,hcl:hp});class _2{constructor(e,r,i,o,u){this.type=e,this.operator=r,this.interpolation=i,this.input=o,this.labels=[],this.outputs=[];for(const[c,s]of u)this.labels.push(c),this.outputs.push(s)}static interpolationFactor(e,r,i,o){let u=0;if(e.name==="exponential")u=sg(r,e.base,i,o);else if(e.name==="linear")u=sg(r,1,i,o);else if(e.name==="cubic-bezier"){const c=e.controlPoints;u=new YI(c[0],c[1],c[2],c[3]).solve(sg(r,1,i,o))}return u}static parse(e,r){let[i,o,u,...c]=e;if(!Array.isArray(o)||o.length===0)return r.error("Expected an interpolation type expression.",1);if(o[0]==="linear")o={name:"linear"};else if(o[0]==="exponential"){const y=o[1];if(typeof y!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:y}}else if(o[0]==="cubic-bezier"){const y=o.slice(1);if(y.length!==4||y.some(b=>typeof b!="number"||b<0||b>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:y}}else return r.error(`Unknown interpolation type ${String(o[0])}`,1,0);if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(u=r.parse(u,2,Ti),!u)return null;const s=[];let f=null;i==="interpolate-hcl"||i==="interpolate-lab"?f=Df:r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);for(let y=0;y<c.length;y+=2){const b=c[y],A=c[y+1],I=y+3,C=y+4;if(typeof b!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(s.length&&s[s.length-1][0]>=b)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const N=r.parse(A,C,f);if(!N)return null;f=f||N.type,s.push([b,N])}return f.kind!=="number"&&f.kind!=="color"&&!(f.kind==="array"&&f.itemType.kind==="number"&&typeof f.N=="number")?r.error(`Type ${$a(f)} is not interpolatable.`):new _2(f,i,o,u,s)}evaluate(e){const r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);const o=this.input.evaluate(e);if(o<=r[0])return i[0].evaluate(e);const u=r.length;if(o>=r[u-1])return i[u-1].evaluate(e);const c=W2(r,o),s=r[c],f=r[c+1],y=_2.interpolationFactor(this.interpolation,o,s,f),b=i[c].evaluate(e),A=i[c+1].evaluate(e);return this.operator==="interpolate"?ax[this.type.kind.toLowerCase()](b,A,y):this.operator==="interpolate-hcl"?hp.reverse(hp.interpolate(hp.forward(b),hp.forward(A),y)):fp.reverse(fp.interpolate(fp.forward(b),fp.forward(A),y))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r}}function sg(t,e,r,i){const o=i-r,u=t-r;return o===0?0:e===1?u/o:(Math.pow(e,u)-1)/(Math.pow(e,o)-1)}var zf=_2;class v2{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let i=null;const o=r.expectedType;o&&o.kind!=="value"&&(i=o);const u=[];for(const s of e.slice(1)){const f=r.parse(s,1+u.length,i,void 0,{typeAnnotation:"omit"});if(!f)return null;i=i||f.type,u.push(f)}return o&&u.some(s=>Rp(o,s.type))?new v2(po,u):new v2(i,u)}evaluate(e){let r=null,i=0,o;for(const u of this.args){if(i++,r=u.evaluate(e),r&&r instanceof Of&&!r.available&&(o||(o=r),r=null,i===this.args.length))return o;if(r!==null)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var mx=v2;class P_{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let u=1;u<e.length-1;u+=2){const c=e[u];if(typeof c!="string")return r.error(`Expected string, but found ${typeof c} instead.`,u);if(/[^a-zA-Z0-9_]/.test(c))return r.error("Variable names must contain only alphanumeric characters or '_'.",u);const s=r.parse(e[u+1],u+1);if(!s)return null;i.push([c,s])}const o=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return o?new P_(i,o):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,i]of this.bindings)e.push(r,i.serialize());return e.push(this.result.serialize()),e}}var gx=P_;class M_{constructor(e,r,i){this.type=e,this.index=r,this.input=i}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,Ti),o=r.parse(e[2],2,s0(r.expectedType||po));if(!i||!o)return null;const u=o.type;return new M_(u.itemType,i,o)}evaluate(e){const r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new Hl(`Array index out of bounds: ${r} < 0.`);if(r>=i.length)throw new Hl(`Array index out of bounds: ${r} > ${i.length-1}.`);if(r!==Math.floor(r))throw new Hl(`Array index must be an integer, but found ${r} instead.`);return i[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var sL=M_;class D_{constructor(e,r){this.type=ho,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,po),o=r.parse(e[2],2,po);return!i||!o?null:g_(i.type,[ho,_o,Ti,U2,po])?new D_(i,o):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${$a(i.type)} instead`)}evaluate(e){const r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(i==null)return!1;if(!Op(r,["boolean","string","number","null"]))throw new Hl(`Expected first argument to be of type boolean, string, number or null, but found ${$a(Ys(r))} instead.`);if(!Op(i,["string","array"]))throw new Hl(`Expected second argument to be of type array or string, but found ${$a(Ys(i))} instead.`);return i.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var lL=D_;class b2{constructor(e,r,i){this.type=Ti,this.needle=e,this.haystack=r,this.fromIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,po),o=r.parse(e[2],2,po);if(!i||!o)return null;if(!g_(i.type,[ho,_o,Ti,U2,po]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${$a(i.type)} instead`);if(e.length===4){const u=r.parse(e[3],3,Ti);return u?new b2(i,o,u):null}else return new b2(i,o)}evaluate(e){const r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Op(r,["boolean","string","number","null"]))throw new Hl(`Expected first argument to be of type boolean, string, number or null, but found ${$a(Ys(r))} instead.`);if(!Op(i,["string","array"]))throw new Hl(`Expected second argument to be of type array or string, but found ${$a(Ys(i))} instead.`);if(this.fromIndex){const o=this.fromIndex.evaluate(e);return i.indexOf(r,o)}return i.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var uL=b2;class z_{constructor(e,r,i,o,u,c){this.inputType=e,this.type=r,this.input=i,this.cases=o,this.outputs=u,this.otherwise=c}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return r.error("Expected an even number of arguments.");let i,o;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);const u={},c=[];for(let y=2;y<e.length-1;y+=2){let b=e[y];const A=e[y+1];Array.isArray(b)||(b=[b]);const I=r.concat(y);if(b.length===0)return I.error("Expected at least one branch label.");for(const N of b){if(typeof N!="number"&&typeof N!="string")return I.error("Branch labels must be numbers or strings.");if(typeof N=="number"&&Math.abs(N)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof N=="number"&&Math.floor(N)!==N)return I.error("Numeric branch labels must be integer values.");if(!i)i=Ys(N);else if(I.checkSubtype(i,Ys(N)))return null;if(typeof u[String(N)]<"u")return I.error("Branch labels must be unique.");u[String(N)]=c.length}const C=r.parse(A,y,o);if(!C)return null;o=o||C.type,c.push(C)}const s=r.parse(e[1],1,po);if(!s)return null;const f=r.parse(e[e.length-1],e.length-1,o);return!f||s.type.kind!=="value"&&r.concat(1).checkSubtype(i,s.type)?null:new z_(i,o,s,u,c,f)}evaluate(e){const r=this.input.evaluate(e);return(Ys(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],o={};for(const c of r){const s=o[this.cases[c]];s===void 0?(o[this.cases[c]]=i.length,i.push([this.cases[c],[c]])):i[s][1].push(c)}const u=c=>this.inputType.kind==="number"?Number(c):c;for(const[c,s]of i)s.length===1?e.push(u(s[0])):e.push(s.map(u)),e.push(this.outputs[c].serialize());return e.push(this.otherwise.serialize()),e}}var cL=z_;class N_{constructor(e,r,i){this.type=e,this.branches=r,this.otherwise=i}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return r.error("Expected an odd number of arguments.");let i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);const o=[];for(let c=1;c<e.length-1;c+=2){const s=r.parse(e[c],c,ho);if(!s)return null;const f=r.parse(e[c+1],c+1,i);if(!f)return null;o.push([s,f]),i=i||f.type}const u=r.parse(e[e.length-1],e.length-1,i);return u?new N_(i,o,u):null}evaluate(e){for(const[r,i]of this.branches)if(r.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,i]of this.branches)e(r),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var fL=N_;class w2{constructor(e,r,i,o){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=o}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,po),o=r.parse(e[2],2,Ti);if(!i||!o)return null;if(!g_(i.type,[s0(po),_o,po]))return r.error(`Expected first argument to be of type array or string, but found ${$a(i.type)} instead`);if(e.length===4){const u=r.parse(e[3],3,Ti);return u?new w2(i.type,i,o,u):null}else return new w2(i.type,i,o)}evaluate(e){const r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Op(r,["string","array"]))throw new Hl(`Expected first argument to be of type array or string, but found ${$a(Ys(r))} instead.`);if(this.endIndex){const o=this.endIndex.evaluate(e);return r.slice(i,o)}return r.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var hL=w2;function z5(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function dL(t,e,r){return e===r}function pL(t,e,r){return e!==r}function mL(t,e,r){return e<r}function gL(t,e,r){return e>r}function yL(t,e,r){return e<=r}function _L(t,e,r){return e>=r}function yx(t,e,r,i){return i.compare(e,r)===0}function vL(t,e,r,i){return!yx(t,e,r,i)}function bL(t,e,r,i){return i.compare(e,r)<0}function wL(t,e,r,i){return i.compare(e,r)>0}function xL(t,e,r,i){return i.compare(e,r)<=0}function kL(t,e,r,i){return i.compare(e,r)>=0}function Fd(t,e,r){const i=t!=="=="&&t!=="!=";return class _x{constructor(u,c,s){this.type=ho,this.lhs=u,this.rhs=c,this.collator=s,this.hasUntypedArgument=u.type.kind==="value"||c.type.kind==="value"}static parse(u,c){if(u.length!==3&&u.length!==4)return c.error("Expected two or three arguments.");const s=u[0];let f=c.parse(u[1],1,po);if(!f)return null;if(!z5(s,f.type))return c.concat(1).error(`"${s}" comparisons are not supported for type '${$a(f.type)}'.`);let y=c.parse(u[2],2,po);if(!y)return null;if(!z5(s,y.type))return c.concat(2).error(`"${s}" comparisons are not supported for type '${$a(y.type)}'.`);if(f.type.kind!==y.type.kind&&f.type.kind!=="value"&&y.type.kind!=="value")return c.error(`Cannot compare types '${$a(f.type)}' and '${$a(y.type)}'.`);i&&(f.type.kind==="value"&&y.type.kind!=="value"?f=new Lf(y.type,[f]):f.type.kind!=="value"&&y.type.kind==="value"&&(y=new Lf(f.type,[y])));let b=null;if(u.length===4){if(f.type.kind!=="string"&&y.type.kind!=="string"&&f.type.kind!=="value"&&y.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(b=c.parse(u[3],3,q2),!b)return null}return new _x(f,y,b)}evaluate(u){const c=this.lhs.evaluate(u),s=this.rhs.evaluate(u);if(i&&this.hasUntypedArgument){const f=Ys(c),y=Ys(s);if(f.kind!==y.kind||!(f.kind==="string"||f.kind==="number"))throw new Hl(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${f.kind}, ${y.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const f=Ys(c),y=Ys(s);if(f.kind!=="string"||y.kind!=="string")return e(u,c,s)}return this.collator?r(u,c,s,this.collator.evaluate(u)):e(u,c,s)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[t];return this.eachChild(c=>{u.push(c.serialize())}),u}}}const AL=Fd("==",dL,yx),SL=Fd("!=",pL,vL),EL=Fd("<",mL,bL),CL=Fd(">",gL,wL),IL=Fd("<=",yL,xL),LL=Fd(">=",_L,kL);class R_{constructor(e,r,i,o,u,c){this.type=_o,this.number=e,this.locale=r,this.currency=i,this.unit=o,this.minFractionDigits=u,this.maxFractionDigits=c}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const i=r.parse(e[1],1,Ti);if(!i)return null;const o=e[2];if(typeof o!="object"||Array.isArray(o))return r.error("NumberFormat options argument must be an object.");let u=null;if(o.locale&&(u=r.parse(o.locale,1,_o),!u))return null;let c=null;if(o.currency&&(c=r.parse(o.currency,1,_o),!c))return null;let s=null;if(o.unit&&(s=r.parse(o.unit,1,_o),!s))return null;let f=null;if(o["min-fraction-digits"]&&(f=r.parse(o["min-fraction-digits"],1,Ti),!f))return null;let y=null;return o["max-fraction-digits"]&&(y=r.parse(o["max-fraction-digits"],1,Ti),!y)?null:new R_(i,u,c,s,f,y)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class O_{constructor(e){this.type=Ti,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${$a(i.type)} instead.`):new O_(i):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new Hl(`Expected value to be of type string or array, but found ${$a(Ys(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var TL=O_;const vx={"==":AL,"!=":SL,">":CL,"<":EL,">=":LL,"<=":IL,array:Lf,at:sL,boolean:Lf,case:fL,coalesce:mx,collator:G2,format:H2,image:$2,in:lL,"index-of":uL,interpolate:zf,"interpolate-hcl":zf,"interpolate-lab":zf,length:TL,let:gx,literal:g2,match:cL,number:Lf,"number-format":R_,object:Lf,slice:hL,step:nx,string:Lf,"to-boolean":cd,"to-color":cd,"to-number":cd,"to-string":cd,var:rx,within:A_};function N5(t,[e,r,i,o]){e=e.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);const u=o?o.evaluate(t):1,c=K8(e,r,i,u);if(c)throw new Hl(c);return new Vl(e/255*u,r/255*u,i/255*u,u)}function R5(t,e){return t in e}function lg(t,e){const r=e[t];return typeof r>"u"?null:r}function PL(t,e,r,i){for(;r<=i;){const o=r+i>>1;if(e[o]===t)return!0;e[o]>t?i=o-1:r=o+1}return!1}function ph(t){return{type:t}}Od.register(vx,{error:[II,[_o],(t,[e])=>{throw new Hl(e.evaluate(t))}],typeof:[_o,[po],(t,[e])=>$a(Ys(e.evaluate(t)))],"to-rgba":[s0(Ti,4),[Df],(t,[e])=>e.evaluate(t).toArray()],rgb:[Df,[Ti,Ti,Ti],N5],rgba:[Df,[Ti,Ti,Ti,Ti],N5],has:{type:ho,overloads:[[[_o],(t,[e])=>R5(e.evaluate(t),t.properties())],[[_o,xd],(t,[e,r])=>R5(e.evaluate(t),r.evaluate(t))]]},get:{type:po,overloads:[[[_o],(t,[e])=>lg(e.evaluate(t),t.properties())],[[_o,xd],(t,[e,r])=>lg(e.evaluate(t),r.evaluate(t))]]},"feature-state":[po,[_o],(t,[e])=>lg(e.evaluate(t),t.featureState||{})],properties:[xd,[],t=>t.properties()],"geometry-type":[_o,[],t=>t.geometryType()],id:[po,[],t=>t.id()],zoom:[Ti,[],t=>t.globals.zoom],pitch:[Ti,[],t=>t.globals.pitch||0],"distance-from-center":[Ti,[],t=>t.distanceFromCenter()],"heatmap-density":[Ti,[],t=>t.globals.heatmapDensity||0],"line-progress":[Ti,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Ti,[],t=>t.globals.skyRadialProgress||0],accumulated:[po,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[Ti,ph(Ti),(t,e)=>{let r=0;for(const i of e)r+=i.evaluate(t);return r}],"*":[Ti,ph(Ti),(t,e)=>{let r=1;for(const i of e)r*=i.evaluate(t);return r}],"-":{type:Ti,overloads:[[[Ti,Ti],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[Ti],(t,[e])=>-e.evaluate(t)]]},"/":[Ti,[Ti,Ti],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[Ti,[Ti,Ti],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[Ti,[],()=>Math.LN2],pi:[Ti,[],()=>Math.PI],e:[Ti,[],()=>Math.E],"^":[Ti,[Ti,Ti],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[Ti,[Ti],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ti,[Ti],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ti,[Ti],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ti,[Ti],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ti,[Ti],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ti,[Ti],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ti,[Ti],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ti,[Ti],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ti,[Ti],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ti,[Ti],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ti,ph(Ti),(t,e)=>Math.min(...e.map(r=>r.evaluate(t)))],max:[Ti,ph(Ti),(t,e)=>Math.max(...e.map(r=>r.evaluate(t)))],abs:[Ti,[Ti],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ti,[Ti],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ti,[Ti],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ti,[Ti],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[ho,[_o,po],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[ho,[po],(t,[e])=>t.id()===e.value],"filter-type-==":[ho,[_o],(t,[e])=>t.geometryType()===e.value],"filter-<":[ho,[_o,po],(t,[e,r])=>{const i=t.properties()[e.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[ho,[po],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r<i}],"filter->":[ho,[_o,po],(t,[e,r])=>{const i=t.properties()[e.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[ho,[po],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r>i}],"filter-<=":[ho,[_o,po],(t,[e,r])=>{const i=t.properties()[e.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[ho,[po],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r<=i}],"filter->=":[ho,[_o,po],(t,[e,r])=>{const i=t.properties()[e.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[ho,[po],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r>=i}],"filter-has":[ho,[po],(t,[e])=>e.value in t.properties()],"filter-has-id":[ho,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[ho,[s0(_o)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[ho,[s0(po)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[ho,[_o,s0(po)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[ho,[_o,s0(po)],(t,[e,r])=>PL(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:ho,overloads:[[[ho,ho],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[ph(ho),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:ho,overloads:[[[ho,ho],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[ph(ho),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[ho,[ho],(t,[e])=>!e.evaluate(t)],"is-supported-script":[ho,[_o],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return r?r(e.evaluate(t)):!0}],upcase:[_o,[_o],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[_o,[_o],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[_o,ph(po),(t,e)=>e.map(r=>vp(r.evaluate(t))).join("")],"resolved-locale":[_o,[q2],(t,[e])=>e.evaluate(t).resolvedLocale()]});var bx=vx;function Ly(t){return{result:"success",value:t}}function nd(t){return{result:"error",value:t}}function ML(t){return t["property-type"]==="data-driven"}function DL(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function wx(t){return!!t.expression&&t.expression.interpolated}function F_(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":t===null?"null":typeof t}function B_(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function zL(t){return t}function j_(t,e){const r=e.type==="color",i=t.stops&&typeof t.stops[0][0]=="object",o=i||t.property!==void 0,u=i||!o,c=t.type||(wx(e)?"exponential":"interval");if(r&&(t=X8({},t),t.stops&&(t.stops=t.stops.map(b=>[b[0],Vl.parse(b[1])])),t.default?t.default=Vl.parse(t.default):t.default=Vl.parse(e.default)),t.colorSpace&&t.colorSpace!=="rgb"&&!px[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,f,y;if(c==="exponential")s=O5;else if(c==="interval")s=RL;else if(c==="categorical"){s=NL,f=Object.create(null);for(const b of t.stops)f[b[0]]=b[1];y=typeof t.stops[0][0]}else if(c==="identity")s=OL;else throw new Error(`Unknown function type "${c}"`);if(i){const b={},A=[];for(let N=0;N<t.stops.length;N++){const O=t.stops[N],$=O[0].zoom;b[$]===void 0&&(b[$]={zoom:$,type:t.type,property:t.property,default:t.default,stops:[]},A.push($)),b[$].stops.push([O[0].value,O[1]])}const I=[];for(const N of A)I.push([b[N].zoom,j_(b[N],e)]);const C={name:"linear"};return{kind:"composite",interpolationType:C,interpolationFactor:zf.interpolationFactor.bind(void 0,C),zoomStops:I.map(N=>N[0]),evaluate({zoom:N},O){return O5({stops:I,base:t.base},e,N).evaluate(N,O)}}}else if(u){const b=c==="exponential"?{name:"exponential",base:t.base!==void 0?t.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:zf.interpolationFactor.bind(void 0,b),zoomStops:t.stops.map(A=>A[0]),evaluate:({zoom:A})=>s(t,e,A,f,y)}}else return{kind:"source",evaluate(b,A){const I=A&&A.properties?A.properties[t.property]:void 0;return I===void 0?t1(t.default,e.default):s(t,e,I,f,y)}}}function t1(t,e,r){if(t!==void 0)return t;if(e!==void 0)return e;if(r!==void 0)return r}function NL(t,e,r,i,o){const u=typeof r===o?i[r]:void 0;return t1(u,t.default,e.default)}function RL(t,e,r){if(F_(r)!=="number")return t1(t.default,e.default);const i=t.stops.length;if(i===1||r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const o=W2(t.stops.map(u=>u[0]),r);return t.stops[o][1]}function O5(t,e,r){const i=t.base!==void 0?t.base:1;if(F_(r)!=="number")return t1(t.default,e.default);const o=t.stops.length;if(o===1||r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[o-1][0])return t.stops[o-1][1];const u=W2(t.stops.map(b=>b[0]),r),c=FL(r,i,t.stops[u][0],t.stops[u+1][0]),s=t.stops[u][1],f=t.stops[u+1][1];let y=ax[e.type]||zL;if(t.colorSpace&&t.colorSpace!=="rgb"){const b=px[t.colorSpace];y=(A,I)=>b.reverse(b.interpolate(b.forward(A),b.forward(I),c))}return typeof s.evaluate=="function"?{evaluate(...b){const A=s.evaluate.apply(void 0,b),I=f.evaluate.apply(void 0,b);if(!(A===void 0||I===void 0))return y(A,I,c)}}:y(s,f,c)}function OL(t,e,r){return e.type==="color"?r=Vl.parse(r):e.type==="formatted"?r=D0.fromString(r.toString()):e.type==="resolvedImage"?r=Of.fromString(r.toString()):F_(r)!==e.type&&(e.type!=="enum"||!e.values[r])&&(r=void 0),t1(r,t.default,e.default)}function FL(t,e,r,i){const o=i-r,u=t-r;return o===0?0:e===1?u/o:(Math.pow(e,u)-1)/(Math.pow(e,o)-1)}class xx{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new J8,this._defaultValue=r?UL(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,i,o,u,c,s,f){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=o||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=c,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=f||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,i,o,u,c,s,f){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=o||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=c||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=f||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!==y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new Hl(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0,typeof console<"u"&&console.warn(y.message)),this._defaultValue}}}function kx(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in bx}function Ax(t,e){const r=new ix(bx,[],e?jL(e):void 0),i=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?Ly(new xx(i,e)):nd(r.errors)}class Ty{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!E_(r.expression)}evaluateWithoutErrorHandling(e,r,i,o,u,c){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,o,u,c)}evaluate(e,r,i,o,u,c){return this._styleExpression.evaluate(e,r,i,o,u,c)}}class Py{constructor(e,r,i,o){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!E_(r.expression),this.interpolationType=o}evaluateWithoutErrorHandling(e,r,i,o,u,c){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,o,u,c)}evaluate(e,r,i,o,u,c){return this._styleExpression.evaluate(e,r,i,o,u,c)}interpolationFactor(e,r,i){return this.interpolationType?zf.interpolationFactor(this.interpolationType,e,r,i):0}}function Sx(t,e){if(t=Ax(t,e),t.result==="error")return t;const r=t.value.expression,i=S_(r);if(!i&&!ML(e))return nd([new Q0("","data expressions not supported")]);const o=C_(r,["zoom","pitch","distance-from-center"]);if(!o&&!DL(e))return nd([new Q0("","zoom expressions not supported")]);const u=n2(r);if(!u&&!o)return nd([new Q0("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof Q0)return nd([u]);if(u instanceof zf&&!wx(e))return nd([new Q0("",'"interpolate" expressions cannot be used with this property')]);if(!u)return Ly(i?new Ty("constant",t.value):new Ty("source",t.value));const c=u instanceof zf?u.interpolation:void 0;return Ly(i?new Py("camera",t.value,u.labels,c):new Py("composite",t.value,u.labels,c))}class Z2{constructor(e,r){this._parameters=e,this._specification=r,X8(this,j_(this._parameters,this._specification))}static deserialize(e){return new Z2(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function BL(t,e){if(B_(t))return new Z2(t,e);if(kx(t)){const r=Sx(t,e);if(r.result==="error")throw new Error(r.value.map(i=>`${i.key}: ${i.message}`).join(", "));return r.value}else{let r=t;return typeof t=="string"&&e.type==="color"&&(r=Vl.parse(t)),{kind:"constant",evaluate:()=>r}}}function n2(t){let e=null;if(t instanceof gx)e=n2(t.result);else if(t instanceof mx){for(const r of t.args)if(e=n2(r),e)break}else(t instanceof nx||t instanceof zf)&&t.input instanceof Od&&t.input.name==="zoom"&&(e=t);return e instanceof Q0||t.eachChild(r=>{const i=n2(r);i instanceof Q0?e=i:!e&&i?e=new Q0("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Q0("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function jL(t){const e={color:Df,string:_o,number:Ti,enum:_o,boolean:ho,formatted:V2,resolvedImage:e1};return t.type==="array"?s0(e[t.value]||po,t.length):e[t.type]}function UL(t){return t.type==="color"&&(B_(t.default)||Array.isArray(t.default))?new Vl(0,0,0,0):t.type==="color"?Vl.parse(t.default)||null:t.default===void 0?null:t.default}function Fp(t){return typeof t=="object"?["literal",t]:t}function qL(t,e){let r=t.stops;if(!r)return VL(t,e);const i=r&&typeof r[0][0]=="object",o=i||t.property!==void 0,u=i||!o;return r=r.map(c=>!o&&e.tokens&&typeof c[1]=="string"?[c[0],WL(c[1])]:[c[0],Fp(c[1])]),i?HL(t,e,r):u?GL(t,e,r):My(t,e,r)}function VL(t,e){const r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];{const i=[e.type==="color"?"to-color":e.type,r,Fp(t.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function U_(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function HL(t,e,r){const i={},o={},u=[];for(let s=0;s<r.length;s++){const f=r[s],y=f[0].zoom;i[y]===void 0&&(i[y]={zoom:y,type:t.type,property:t.property,default:t.default},o[y]=[],u.push(y)),o[y].push([f[0].value,f[1]])}if(V_({},e)==="exponential"){const s=[U_(t),["linear"],["zoom"]];for(const f of u){const y=My(i[f],e,o[f]);Ad(s,f,y,!1)}return s}else{const s=["step",["zoom"]];for(const f of u){const y=My(i[f],e,o[f]);Ad(s,f,y,!0)}return q_(s),s}}function $L(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function F5(t,e){const r=Fp($L(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function My(t,e,r){const i=V_(t,e),o=["get",t.property];if(i==="categorical"&&typeof r[0][0]=="boolean"){const u=["case"];for(const c of r)u.push(["==",o,c[0]],c[1]);return u.push(F5(t,e)),u}else if(i==="categorical"){const u=["match",o];for(const c of r)Ad(u,c[0],c[1],!1);return u.push(F5(t,e)),u}else if(i==="interval"){const u=["step",["number",o]];for(const c of r)Ad(u,c[0],c[1],!0);return q_(u),t.default===void 0?u:["case",["==",["typeof",o],"number"],u,Fp(t.default)]}else if(i==="exponential"){const u=t.base!==void 0?t.base:1,c=[U_(t),u===1?["linear"]:["exponential",u],["number",o]];for(const s of r)Ad(c,s[0],s[1],!1);return t.default===void 0?c:["case",["==",["typeof",o],"number"],c,Fp(t.default)]}else throw new Error(`Unknown property function type ${i}`)}function GL(t,e,r,i=["zoom"]){const o=V_(t,e);let u,c=!1;if(o==="interval")u=["step",i],c=!0;else if(o==="exponential"){const s=t.base!==void 0?t.base:1;u=[U_(t),s===1?["linear"]:["exponential",s],i]}else throw new Error(`Unknown zoom function type "${o}"`);for(const s of r)Ad(u,s[0],s[1],c);return q_(u),u}function q_(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Ad(t,e,r,i){t.length>3&&e===t[t.length-2]||(i&&t.length===2||t.push(e),t.push(r))}function V_(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function WL(t){const e=["concat"],r=/{([^{}]+)}/g;let i=0;for(let o=r.exec(t);o!==null;o=r.exec(t)){const u=t.slice(i,r.lastIndex-o[0].length);i=r.lastIndex,u.length>0&&e.push(u),e.push(["get",o[1]])}if(e.length===1)return t;if(i<t.length)e.push(t.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Ex(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Ex(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function ZL(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var XL={};(function(t){var e=function(){var r=function($,G,Z,ee){for(Z=Z||{},ee=$.length;ee--;Z[$[ee]]=G);return Z},i=[1,12],o=[1,13],u=[1,9],c=[1,10],s=[1,11],f=[1,14],y=[1,15],b=[14,18,22,24],A=[18,22],I=[22,24],C={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(G,Z,ee,te,_e,le,we){var ue=le.length-1;switch(_e){case 1:this.$=new String(G.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(G),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=le[ue-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=le[ue-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[le[ue-2],le[ue]];break;case 16:this.$={},this.$[le[ue][0]]=le[ue][1];break;case 17:this.$=le[ue-2],le[ue-2][le[ue][0]]=le[ue][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[le[ue]];break;case 21:this.$=le[ue-2],le[ue-2].push(le[ue]);break}},table:[{3:5,4:i,5:6,6:o,7:3,8:u,9:4,10:c,11:s,12:1,13:2,15:7,16:8,17:f,23:y},{1:[3]},{14:[1,16]},r(b,[2,7]),r(b,[2,8]),r(b,[2,9]),r(b,[2,10]),r(b,[2,11]),r(b,[2,12]),r(b,[2,3]),r(b,[2,4]),r(b,[2,5]),r([14,18,21,22,24],[2,1]),r(b,[2,2]),{3:20,4:i,18:[1,17],19:18,20:19},{3:5,4:i,5:6,6:o,7:3,8:u,9:4,10:c,11:s,13:23,15:7,16:8,17:f,23:y,24:[1,21],25:22},{1:[2,6]},r(b,[2,13]),{18:[1,24],22:[1,25]},r(A,[2,16]),{21:[1,26]},r(b,[2,18]),{22:[1,28],24:[1,27]},r(I,[2,20]),r(b,[2,14]),{3:20,4:i,20:29},{3:5,4:i,5:6,6:o,7:3,8:u,9:4,10:c,11:s,13:30,15:7,16:8,17:f,23:y},r(b,[2,19]),{3:5,4:i,5:6,6:o,7:3,8:u,9:4,10:c,11:s,13:31,15:7,16:8,17:f,23:y},r(A,[2,17]),r(A,[2,15]),r(I,[2,21])],defaultActions:{16:[2,6]},parseError:function(G,Z){if(Z.recoverable)this.trace(G);else throw new Error(G)},parse:function(G){var Z=this,ee=[0],te=[null],_e=[],le=this.table,we="",ue=0,ze=0,Ue=2,Ce=1,Me=_e.slice.call(arguments,1),qe=Object.create(this.lexer),it={yy:{}};for(var xt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,xt)&&(it.yy[xt]=this.yy[xt]);qe.setInput(G,it.yy),it.yy.lexer=qe,it.yy.parser=this,typeof qe.yylloc>"u"&&(qe.yylloc={});var yt=qe.yylloc;_e.push(yt);var $e=qe.options&&qe.options.ranges;typeof it.yy.parseError=="function"?this.parseError=it.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function at(){var Kt;return Kt=qe.lex()||Ce,typeof Kt!="number"&&(Kt=Z.symbols_[Kt]||Kt),Kt}for(var mt,Xe,wt,be,Be={},Ae,ht,Nt,zt;;){if(Xe=ee[ee.length-1],this.defaultActions[Xe]?wt=this.defaultActions[Xe]:((mt===null||typeof mt>"u")&&(mt=at()),wt=le[Xe]&&le[Xe][mt]),typeof wt>"u"||!wt.length||!wt[0]){var Mt="";zt=[];for(Ae in le[Xe])this.terminals_[Ae]&&Ae>Ue&&zt.push("'"+this.terminals_[Ae]+"'");qe.showPosition?Mt="Parse error on line "+(ue+1)+`:
`+qe.showPosition()+`
Expecting `+zt.join(", ")+", got '"+(this.terminals_[mt]||mt)+"'":Mt="Parse error on line "+(ue+1)+": Unexpected "+(mt==Ce?"end of input":"'"+(this.terminals_[mt]||mt)+"'"),this.parseError(Mt,{text:qe.match,token:this.terminals_[mt]||mt,line:qe.yylineno,loc:yt,expected:zt})}if(wt[0]instanceof Array&&wt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xe+", token: "+mt);switch(wt[0]){case 1:ee.push(mt),te.push(qe.yytext),_e.push(qe.yylloc),ee.push(wt[1]),mt=null,ze=qe.yyleng,we=qe.yytext,ue=qe.yylineno,yt=qe.yylloc;break;case 2:if(ht=this.productions_[wt[1]][1],Be.$=te[te.length-ht],Be._$={first_line:_e[_e.length-(ht||1)].first_line,last_line:_e[_e.length-1].last_line,first_column:_e[_e.length-(ht||1)].first_column,last_column:_e[_e.length-1].last_column},$e&&(Be._$.range=[_e[_e.length-(ht||1)].range[0],_e[_e.length-1].range[1]]),be=this.performAction.apply(Be,[we,ze,ue,it.yy,wt[1],te,_e].concat(Me)),typeof be<"u")return be;ht&&(ee=ee.slice(0,-1*ht*2),te=te.slice(0,-1*ht),_e=_e.slice(0,-1*ht)),ee.push(this.productions_[wt[1]][0]),te.push(Be.$),_e.push(Be._$),Nt=le[ee[ee.length-2]][ee[ee.length-1]],ee.push(Nt);break;case 3:return!0}}return!0}},N=function(){var $={EOF:1,parseError:function(Z,ee){if(this.yy.parser)this.yy.parser.parseError(Z,ee);else throw new Error(Z)},setInput:function(G,Z){return this.yy=Z||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var Z=G.match(/(?:\r\n?|\n).*/g);return Z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var Z=G.length,ee=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Z),this.offset-=Z;var te=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ee.length-1&&(this.yylineno-=ee.length-1);var _e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ee?(ee.length===te.length?this.yylloc.first_column:0)+te[te.length-ee.length].length-ee[0].length:this.yylloc.first_column-Z},this.options.ranges&&(this.yylloc.range=[_e[0],_e[0]+this.yyleng-Z]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),Z=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+Z+"^"},test_match:function(G,Z){var ee,te,_e;if(this.options.backtrack_lexer&&(_e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_e.yylloc.range=this.yylloc.range.slice(0))),te=G[0].match(/(?:\r\n?|\n).*/g),te&&(this.yylineno+=te.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:te?te[te.length-1].length-te[te.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],ee=this.performAction.call(this,this.yy,this,Z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ee)return ee;if(this._backtrack){for(var le in _e)this[le]=_e[le];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,Z,ee,te;this._more||(this.yytext="",this.match="");for(var _e=this._currentRules(),le=0;le<_e.length;le++)if(ee=this._input.match(this.rules[_e[le]]),ee&&(!Z||ee[0].length>Z[0].length)){if(Z=ee,te=le,this.options.backtrack_lexer){if(G=this.test_match(ee,_e[le]),G!==!1)return G;if(this._backtrack){Z=!1;continue}else return!1}else if(!this.options.flex)break}return Z?(G=this.test_match(Z,_e[te]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Z=this.next();return Z||this.lex()},begin:function(Z){this.conditionStack.push(Z)},popState:function(){var Z=this.conditionStack.length-1;return Z>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Z){return Z=this.conditionStack.length-1-Math.abs(Z||0),Z>=0?this.conditionStack[Z]:"INITIAL"},pushState:function(Z){this.begin(Z)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Z,ee,te,_e){switch(te){case 0:break;case 1:return 6;case 2:return ee.yytext=ee.yytext.substr(1,ee.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return $}();C.lexer=N;function O(){this.yy={}}return O.prototype=C,C.Parser=O,new O}();typeof ZL<"u"&&(t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)})})(XL);const YL={StyleExpression:xx,isExpression:kx,isExpressionFilter:Ex,createExpression:Ax,createPropertyExpression:Sx,normalizePropertyExpression:BL,ZoomConstantExpression:Ty,ZoomDependentExpression:Py,StylePropertyFunction:Z2},KL={convertFunction:qL,createFunction:j_,isFunction:B_};function JL(t){var e=t.expr,r=t.layer,i=Math.min(e(r,"paint","circle-radius"),8),o=Math.min(e(r,"paint","circle-stroke-width"),4),u=e(r,"paint","circle-color"),c=e(r,"paint","circle-opacity"),s=e(r,"paint","circle-stroke-color"),f=e(r,"paint","circle-stroke-opacity"),y=i-o/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(r,"paint","circle-blur")*y+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:c,r:y}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:f,r:i,"stroke-width":o,stroke:s}}]}}function QL(t){var e=t.expr,r=t.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,t.image)(e(r,"paint","fill-pattern"))+")",backgroundColor:e(r,"paint","fill-color"),opacity:e(r,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function eT(t){var e=t.layer,r=t.expr,i=(0,t.image)(r(e,"paint","line-pattern")),o={stroke:i?"url(#img1)":r(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(r(e,"paint","line-width"),8)),strokeOpacity:r(e,"paint","line-opacity"),strokeDasharray:r(e,"paint","line-dasharray")},u=o.strokeWidth,c="stroke: "+o.stroke+";";return o.strokeOpacity&&(c+="stroke-opacity: "+o.strokeOpacity+";"),o.strokeDasharray&&(c+="stroke-dasharray: "+o.strokeDasharray+";"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:o.strokeWidth,height:o.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:i,x:0,y:0,width:o.strokeWidth,height:o.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:c,d:"M0 20 L 20 0"}}]}}function tT(t){return function(s){var f=s.image,y=(0,s.expr)(s.layer,"layout","icon-image");if(!y)return null;var b=f(y);return b?{element:"div",attributes:{style:{backgroundImage:"url("+b+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(t)||(o=(r=(e=t).expr)(i=e.layer,"paint","text-color"),u=r(i,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:c="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:r(i,"paint","text-halo-color"),"stroke-width":2*r(i,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:c,fill:"white"}},{element:"path",attributes:{key:"l3",d:c,fill:o,opacity:u}}]});var e,r,i,o,u,c}var rT=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function iT(t){var e,r=t.sprite,i=t.layer,o={circle:JL,symbol:tT,line:eT,fill:QL}[i.type],u=(e=t.zoom,function(c,s,f){var y=function(N){var O=rT.find(function($){return N.startsWith($[0])});return O?O[1]||O[0]:null}(f),b=fI[s+"_"+y][f];if(!c[s])return b.default;var A=c[s][f];if(A===void 0)return b.default;if(typeof A=="object"){var I;if(Array.isArray(A)){if(b.type==="array")return A;I=YL.createExpression(A).value}else I=KL.createFunction(A,b);if(!I.evaluate)return null;var C=I.evaluate({zoom:e},{});return C?C.name||C:null}return A});return o?o({layer:i,expr:u,image:function(c){if(r&&r.json){var s=r.json[c];if(s)return f=r.image,b=(y=s).x,A=y.y,I=y.width,C=y.height,(N=document.createElement("canvas")).width=2*I,N.height=2*C,N.getContext("2d").drawImage(f,2*b,2*A,2*I,2*C,0,0,2*I,2*C),N.toDataURL()}var f,y,b,A,I,C,N;return null}}):null}var Cx={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(t,e){(function(r,i){t.exports=i()})(bh,function(){for(var r=function(me,Le,Ye){return Le===void 0&&(Le=0),Ye===void 0&&(Ye=1),me<Le?Le:me>Ye?Ye:me},i=r,o=function(me){me._clipped=!1,me._unclipped=me.slice(0);for(var Le=0;Le<=3;Le++)Le<3?((me[Le]<0||me[Le]>255)&&(me._clipped=!0),me[Le]=i(me[Le],0,255)):Le===3&&(me[Le]=i(me[Le],0,1));return me},u={},c=0,s=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];c<s.length;c+=1){var f=s[c];u["[object "+f+"]"]=f.toLowerCase()}var y=function(me){return u[Object.prototype.toString.call(me)]||"object"},b=y,A=function(me,Le){return Le===void 0&&(Le=null),me.length>=3?Array.prototype.slice.call(me):b(me[0])=="object"&&Le?Le.split("").filter(function(Ye){return me[0][Ye]!==void 0}).map(function(Ye){return me[0][Ye]}):me[0]},I=y,C=function(me){if(me.length<2)return null;var Le=me.length-1;return I(me[Le])=="string"?me[Le].toLowerCase():null},N=Math.PI,O={clip_rgb:o,limit:r,type:y,unpack:A,last:C,PI:N,TWOPI:N*2,PITHIRD:N/3,DEG2RAD:N/180,RAD2DEG:180/N},$={format:{},autodetect:[]},G=O.last,Z=O.clip_rgb,ee=O.type,te=$,_e=function(){for(var Le=[],Ye=arguments.length;Ye--;)Le[Ye]=arguments[Ye];var At=this;if(ee(Le[0])==="object"&&Le[0].constructor&&Le[0].constructor===this.constructor)return Le[0];var sr=G(Le),cr=!1;if(!sr){cr=!0,te.sorted||(te.autodetect=te.autodetect.sort(function(ni,Ri){return Ri.p-ni.p}),te.sorted=!0);for(var tr=0,Cr=te.autodetect;tr<Cr.length;tr+=1){var Ir=Cr[tr];if(sr=Ir.test.apply(Ir,Le),sr)break}}if(te.format[sr]){var Zr=te.format[sr].apply(null,cr?Le:Le.slice(0,-1));At._rgb=Z(Zr)}else throw new Error("unknown format: "+Le);At._rgb.length===3&&At._rgb.push(1)};_e.prototype.toString=function(){return ee(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var le=_e,we=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(we.Color,[null].concat(me)))};we.Color=le,we.version="2.4.2";var ue=we,ze=O.unpack,Ue=Math.max,Ce=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=ze(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2];At=At/255,sr=sr/255,cr=cr/255;var tr=1-Ue(At,Ue(sr,cr)),Cr=tr<1?1/(1-tr):0,Ir=(1-At-tr)*Cr,Zr=(1-sr-tr)*Cr,ni=(1-cr-tr)*Cr;return[Ir,Zr,ni,tr]},Me=Ce,qe=O.unpack,it=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=qe(me,"cmyk");var Ye=me[0],At=me[1],sr=me[2],cr=me[3],tr=me.length>4?me[4]:1;return cr===1?[0,0,0,tr]:[Ye>=1?0:255*(1-Ye)*(1-cr),At>=1?0:255*(1-At)*(1-cr),sr>=1?0:255*(1-sr)*(1-cr),tr]},xt=it,yt=ue,$e=le,at=$,mt=O.unpack,Xe=O.type,wt=Me;$e.prototype.cmyk=function(){return wt(this._rgb)},yt.cmyk=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply($e,[null].concat(me,["cmyk"])))},at.format.cmyk=xt,at.autodetect.push({p:2,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=mt(me,"cmyk"),Xe(me)==="array"&&me.length===4)return"cmyk"}});var be=O.unpack,Be=O.last,Ae=function(me){return Math.round(me*100)/100},ht=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=be(me,"hsla"),At=Be(me)||"lsa";return Ye[0]=Ae(Ye[0]||0),Ye[1]=Ae(Ye[1]*100)+"%",Ye[2]=Ae(Ye[2]*100)+"%",At==="hsla"||Ye.length>3&&Ye[3]<1?(Ye[3]=Ye.length>3?Ye[3]:1,At="hsla"):Ye.length=3,At+"("+Ye.join(",")+")"},Nt=ht,zt=O.unpack,Mt=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=zt(me,"rgba");var Ye=me[0],At=me[1],sr=me[2];Ye/=255,At/=255,sr/=255;var cr=Math.min(Ye,At,sr),tr=Math.max(Ye,At,sr),Cr=(tr+cr)/2,Ir,Zr;return tr===cr?(Ir=0,Zr=Number.NaN):Ir=Cr<.5?(tr-cr)/(tr+cr):(tr-cr)/(2-tr-cr),Ye==tr?Zr=(At-sr)/(tr-cr):At==tr?Zr=2+(sr-Ye)/(tr-cr):sr==tr&&(Zr=4+(Ye-At)/(tr-cr)),Zr*=60,Zr<0&&(Zr+=360),me.length>3&&me[3]!==void 0?[Zr,Ir,Cr,me[3]]:[Zr,Ir,Cr]},Kt=Mt,yr=O.unpack,Er=O.last,Jt=Nt,It=Kt,Fr=Math.round,Ft=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=yr(me,"rgba"),At=Er(me)||"rgb";return At.substr(0,3)=="hsl"?Jt(It(Ye),At):(Ye[0]=Fr(Ye[0]),Ye[1]=Fr(Ye[1]),Ye[2]=Fr(Ye[2]),(At==="rgba"||Ye.length>3&&Ye[3]<1)&&(Ye[3]=Ye.length>3?Ye[3]:1,At="rgba"),At+"("+Ye.slice(0,At==="rgb"?3:4).join(",")+")")},ct=Ft,mr=O.unpack,Jr=Math.round,dr=function(){for(var me,Le=[],Ye=arguments.length;Ye--;)Le[Ye]=arguments[Ye];Le=mr(Le,"hsl");var At=Le[0],sr=Le[1],cr=Le[2],tr,Cr,Ir;if(sr===0)tr=Cr=Ir=cr*255;else{var Zr=[0,0,0],ni=[0,0,0],Ri=cr<.5?cr*(1+sr):cr+sr-cr*sr,oi=2*cr-Ri,Si=At/360;Zr[0]=Si+1/3,Zr[1]=Si,Zr[2]=Si-1/3;for(var Zi=0;Zi<3;Zi++)Zr[Zi]<0&&(Zr[Zi]+=1),Zr[Zi]>1&&(Zr[Zi]-=1),6*Zr[Zi]<1?ni[Zi]=oi+(Ri-oi)*6*Zr[Zi]:2*Zr[Zi]<1?ni[Zi]=Ri:3*Zr[Zi]<2?ni[Zi]=oi+(Ri-oi)*(2/3-Zr[Zi])*6:ni[Zi]=oi;me=[Jr(ni[0]*255),Jr(ni[1]*255),Jr(ni[2]*255)],tr=me[0],Cr=me[1],Ir=me[2]}return Le.length>3?[tr,Cr,Ir,Le[3]]:[tr,Cr,Ir,1]},zr=dr,ri=zr,Vr=$,_i=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Hi=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Nr=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ji=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Ui=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,an=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Gi=Math.round,Or=function(me){me=me.toLowerCase().trim();var Le;if(Vr.format.named)try{return Vr.format.named(me)}catch{}if(Le=me.match(_i)){for(var Ye=Le.slice(1,4),At=0;At<3;At++)Ye[At]=+Ye[At];return Ye[3]=1,Ye}if(Le=me.match(Hi)){for(var sr=Le.slice(1,5),cr=0;cr<4;cr++)sr[cr]=+sr[cr];return sr}if(Le=me.match(Nr)){for(var tr=Le.slice(1,4),Cr=0;Cr<3;Cr++)tr[Cr]=Gi(tr[Cr]*2.55);return tr[3]=1,tr}if(Le=me.match(ji)){for(var Ir=Le.slice(1,5),Zr=0;Zr<3;Zr++)Ir[Zr]=Gi(Ir[Zr]*2.55);return Ir[3]=+Ir[3],Ir}if(Le=me.match(Ui)){var ni=Le.slice(1,4);ni[1]*=.01,ni[2]*=.01;var Ri=ri(ni);return Ri[3]=1,Ri}if(Le=me.match(an)){var oi=Le.slice(1,4);oi[1]*=.01,oi[2]*=.01;var Si=ri(oi);return Si[3]=+Le[4],Si}};Or.test=function(me){return _i.test(me)||Hi.test(me)||Nr.test(me)||ji.test(me)||Ui.test(me)||an.test(me)};var Br=Or,Ni=ue,qi=le,kt=$,fr=O.type,Qr=ct,Ei=Br;qi.prototype.css=function(me){return Qr(this._rgb,me)},Ni.css=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(qi,[null].concat(me,["css"])))},kt.format.css=Ei,kt.autodetect.push({p:5,test:function(me){for(var Le=[],Ye=arguments.length-1;Ye-- >0;)Le[Ye]=arguments[Ye+1];if(!Le.length&&fr(me)==="string"&&Ei.test(me))return"css"}});var ki=le,Zn=ue,un=$,Rn=O.unpack;un.format.gl=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Rn(me,"rgba");return Ye[0]*=255,Ye[1]*=255,Ye[2]*=255,Ye},Zn.gl=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(ki,[null].concat(me,["gl"])))},ki.prototype.gl=function(){var me=this._rgb;return[me[0]/255,me[1]/255,me[2]/255,me[3]]};var Xn=O.unpack,so=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Xn(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=Math.min(At,sr,cr),Cr=Math.max(At,sr,cr),Ir=Cr-tr,Zr=Ir*100/255,ni=tr/(255-Ir)*100,Ri;return Ir===0?Ri=Number.NaN:(At===Cr&&(Ri=(sr-cr)/Ir),sr===Cr&&(Ri=2+(cr-At)/Ir),cr===Cr&&(Ri=4+(At-sr)/Ir),Ri*=60,Ri<0&&(Ri+=360)),[Ri,Zr,ni]},on=so,gt=O.unpack,Ne=Math.floor,Fe=function(){for(var me,Le,Ye,At,sr,cr,tr=[],Cr=arguments.length;Cr--;)tr[Cr]=arguments[Cr];tr=gt(tr,"hcg");var Ir=tr[0],Zr=tr[1],ni=tr[2],Ri,oi,Si;ni=ni*255;var Zi=Zr*255;if(Zr===0)Ri=oi=Si=ni;else{Ir===360&&(Ir=0),Ir>360&&(Ir-=360),Ir<0&&(Ir+=360),Ir/=60;var Wn=Ne(Ir),to=Ir-Wn,fo=ni*(1-Zr),Lo=fo+Zi*(1-to),ga=fo+Zi*to,xa=fo+Zi;switch(Wn){case 0:me=[xa,ga,fo],Ri=me[0],oi=me[1],Si=me[2];break;case 1:Le=[Lo,xa,fo],Ri=Le[0],oi=Le[1],Si=Le[2];break;case 2:Ye=[fo,xa,ga],Ri=Ye[0],oi=Ye[1],Si=Ye[2];break;case 3:At=[fo,Lo,xa],Ri=At[0],oi=At[1],Si=At[2];break;case 4:sr=[ga,fo,xa],Ri=sr[0],oi=sr[1],Si=sr[2];break;case 5:cr=[xa,fo,Lo],Ri=cr[0],oi=cr[1],Si=cr[2];break}}return[Ri,oi,Si,tr.length>3?tr[3]:1]},lt=Fe,Lt=O.unpack,ft=O.type,pe=ue,Qt=le,Vt=$,lr=on;Qt.prototype.hcg=function(){return lr(this._rgb)},pe.hcg=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(Qt,[null].concat(me,["hcg"])))},Vt.format.hcg=lt,Vt.autodetect.push({p:1,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=Lt(me,"hcg"),ft(me)==="array"&&me.length===3)return"hcg"}});var pt=O.unpack,jr=O.last,$r=Math.round,$i=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=pt(me,"rgba"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=Ye[3],Cr=jr(me)||"auto";tr===void 0&&(tr=1),Cr==="auto"&&(Cr=tr<1?"rgba":"rgb"),At=$r(At),sr=$r(sr),cr=$r(cr);var Ir=At<<16|sr<<8|cr,Zr="000000"+Ir.toString(16);Zr=Zr.substr(Zr.length-6);var ni="0"+$r(tr*255).toString(16);switch(ni=ni.substr(ni.length-2),Cr.toLowerCase()){case"rgba":return"#"+Zr+ni;case"argb":return"#"+ni+Zr;default:return"#"+Zr}},Qi=$i,Ci=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Et=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,en=function(me){if(me.match(Ci)){(me.length===4||me.length===7)&&(me=me.substr(1)),me.length===3&&(me=me.split(""),me=me[0]+me[0]+me[1]+me[1]+me[2]+me[2]);var Le=parseInt(me,16),Ye=Le>>16,At=Le>>8&255,sr=Le&255;return[Ye,At,sr,1]}if(me.match(Et)){(me.length===5||me.length===9)&&(me=me.substr(1)),me.length===4&&(me=me.split(""),me=me[0]+me[0]+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]);var cr=parseInt(me,16),tr=cr>>24&255,Cr=cr>>16&255,Ir=cr>>8&255,Zr=Math.round((cr&255)/255*100)/100;return[tr,Cr,Ir,Zr]}throw new Error("unknown hex color: "+me)},Sn=en,Vn=ue,En=le,On=O.type,sa=$,tn=Qi;En.prototype.hex=function(me){return tn(this._rgb,me)},Vn.hex=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(En,[null].concat(me,["hex"])))},sa.format.hex=Sn,sa.autodetect.push({p:4,test:function(me){for(var Le=[],Ye=arguments.length-1;Ye-- >0;)Le[Ye]=arguments[Ye+1];if(!Le.length&&On(me)==="string"&&[3,4,5,6,7,8,9].indexOf(me.length)>=0)return"hex"}});var Bo=O.unpack,fn=O.TWOPI,Ko=Math.min,Xa=Math.sqrt,qu=Math.acos,pa=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Bo(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2];At/=255,sr/=255,cr/=255;var tr,Cr=Ko(At,sr,cr),Ir=(At+sr+cr)/3,Zr=Ir>0?1-Cr/Ir:0;return Zr===0?tr=NaN:(tr=(At-sr+(At-cr))/2,tr/=Xa((At-sr)*(At-sr)+(At-cr)*(sr-cr)),tr=qu(tr),cr>sr&&(tr=fn-tr),tr/=fn),[tr*360,Zr,Ir]},ts=pa,Vu=O.unpack,Gl=O.limit,Ao=O.TWOPI,Ya=O.PITHIRD,Aa=Math.cos,Jo=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=Vu(me,"hsi");var Ye=me[0],At=me[1],sr=me[2],cr,tr,Cr;return isNaN(Ye)&&(Ye=0),isNaN(At)&&(At=0),Ye>360&&(Ye-=360),Ye<0&&(Ye+=360),Ye/=360,Ye<1/3?(Cr=(1-At)/3,cr=(1+At*Aa(Ao*Ye)/Aa(Ya-Ao*Ye))/3,tr=1-(Cr+cr)):Ye<2/3?(Ye-=1/3,cr=(1-At)/3,tr=(1+At*Aa(Ao*Ye)/Aa(Ya-Ao*Ye))/3,Cr=1-(cr+tr)):(Ye-=2/3,tr=(1-At)/3,Cr=(1+At*Aa(Ao*Ye)/Aa(Ya-Ao*Ye))/3,cr=1-(tr+Cr)),cr=Gl(sr*cr*3),tr=Gl(sr*tr*3),Cr=Gl(sr*Cr*3),[cr*255,tr*255,Cr*255,me.length>3?me[3]:1]},Go=Jo,la=O.unpack,Js=O.type,Ma=ue,Da=le,Kn=$,rs=ts;Da.prototype.hsi=function(){return rs(this._rgb)},Ma.hsi=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(Da,[null].concat(me,["hsi"])))},Kn.format.hsi=Go,Kn.autodetect.push({p:2,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=la(me,"hsi"),Js(me)==="array"&&me.length===3)return"hsi"}});var Rs=O.unpack,oa=O.type,Qs=ue,Os=le,bc=$,Hu=Kt;Os.prototype.hsl=function(){return Hu(this._rgb)},Qs.hsl=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(Os,[null].concat(me,["hsl"])))},bc.format.hsl=zr,bc.autodetect.push({p:2,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=Rs(me,"hsl"),oa(me)==="array"&&me.length===3)return"hsl"}});var bu=O.unpack,el=Math.min,Wl=Math.max,$u=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=bu(me,"rgb");var Ye=me[0],At=me[1],sr=me[2],cr=el(Ye,At,sr),tr=Wl(Ye,At,sr),Cr=tr-cr,Ir,Zr,ni;return ni=tr/255,tr===0?(Ir=Number.NaN,Zr=0):(Zr=Cr/tr,Ye===tr&&(Ir=(At-sr)/Cr),At===tr&&(Ir=2+(sr-Ye)/Cr),sr===tr&&(Ir=4+(Ye-At)/Cr),Ir*=60,Ir<0&&(Ir+=360)),[Ir,Zr,ni]},wc=$u,xc=O.unpack,Zl=Math.floor,Fs=function(){for(var me,Le,Ye,At,sr,cr,tr=[],Cr=arguments.length;Cr--;)tr[Cr]=arguments[Cr];tr=xc(tr,"hsv");var Ir=tr[0],Zr=tr[1],ni=tr[2],Ri,oi,Si;if(ni*=255,Zr===0)Ri=oi=Si=ni;else{Ir===360&&(Ir=0),Ir>360&&(Ir-=360),Ir<0&&(Ir+=360),Ir/=60;var Zi=Zl(Ir),Wn=Ir-Zi,to=ni*(1-Zr),fo=ni*(1-Zr*Wn),Lo=ni*(1-Zr*(1-Wn));switch(Zi){case 0:me=[ni,Lo,to],Ri=me[0],oi=me[1],Si=me[2];break;case 1:Le=[fo,ni,to],Ri=Le[0],oi=Le[1],Si=Le[2];break;case 2:Ye=[to,ni,Lo],Ri=Ye[0],oi=Ye[1],Si=Ye[2];break;case 3:At=[to,fo,ni],Ri=At[0],oi=At[1],Si=At[2];break;case 4:sr=[Lo,to,ni],Ri=sr[0],oi=sr[1],Si=sr[2];break;case 5:cr=[ni,to,fo],Ri=cr[0],oi=cr[1],Si=cr[2];break}}return[Ri,oi,Si,tr.length>3?tr[3]:1]},tl=Fs,Sl=O.unpack,wu=O.type,F=ue,X=le,ce=$,Pe=wc;X.prototype.hsv=function(){return Pe(this._rgb)},F.hsv=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(X,[null].concat(me,["hsv"])))},ce.format.hsv=tl,ce.autodetect.push({p:2,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=Sl(me,"hsv"),wu(me)==="array"&&me.length===3)return"hsv"}});var tt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},bt=tt,Bt=O.unpack,Ot=Math.pow,wr=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Bt(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=_r(At,sr,cr),Cr=tr[0],Ir=tr[1],Zr=tr[2],ni=116*Ir-16;return[ni<0?0:ni,500*(Cr-Ir),200*(Ir-Zr)]},pr=function(me){return(me/=255)<=.04045?me/12.92:Ot((me+.055)/1.055,2.4)},vr=function(me){return me>bt.t3?Ot(me,1/3):me/bt.t2+bt.t0},_r=function(me,Le,Ye){me=pr(me),Le=pr(Le),Ye=pr(Ye);var At=vr((.4124564*me+.3575761*Le+.1804375*Ye)/bt.Xn),sr=vr((.2126729*me+.7151522*Le+.072175*Ye)/bt.Yn),cr=vr((.0193339*me+.119192*Le+.9503041*Ye)/bt.Zn);return[At,sr,cr]},Mr=wr,Yr=tt,wi=O.unpack,ot=Math.pow,m=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=wi(me,"lab");var Ye=me[0],At=me[1],sr=me[2],cr,tr,Cr,Ir,Zr,ni;return tr=(Ye+16)/116,cr=isNaN(At)?tr:tr+At/500,Cr=isNaN(sr)?tr:tr-sr/200,tr=Yr.Yn*h(tr),cr=Yr.Xn*h(cr),Cr=Yr.Zn*h(Cr),Ir=xr(3.2404542*cr-1.5371385*tr-.4985314*Cr),Zr=xr(-.969266*cr+1.8760108*tr+.041556*Cr),ni=xr(.0556434*cr-.2040259*tr+1.0572252*Cr),[Ir,Zr,ni,me.length>3?me[3]:1]},xr=function(me){return 255*(me<=.00304?12.92*me:1.055*ot(me,1/2.4)-.055)},h=function(me){return me>Yr.t1?me*me*me:Yr.t2*(me-Yr.t0)},P=m,ci=O.unpack,Oi=O.type,wo=ue,ie=le,wn=$,Bs=Mr;ie.prototype.lab=function(){return Bs(this._rgb)},wo.lab=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(ie,[null].concat(me,["lab"])))},wn.format.lab=P,wn.autodetect.push({p:2,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=ci(me,"lab"),Oi(me)==="array"&&me.length===3)return"lab"}});var Xl=O.unpack,p0=O.RAD2DEG,Yl=Math.sqrt,js=Math.atan2,kc=Math.round,El=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Xl(me,"lab"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=Yl(sr*sr+cr*cr),Cr=(js(cr,sr)*p0+360)%360;return kc(tr*1e4)===0&&(Cr=Number.NaN),[At,tr,Cr]},xu=El,Cl=O.unpack,Ac=Mr,Us=xu,Gu=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Cl(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=Ac(At,sr,cr),Cr=tr[0],Ir=tr[1],Zr=tr[2];return Us(Cr,Ir,Zr)},Sc=Gu,Kl=O.unpack,qs=O.DEG2RAD,Mi=Math.sin,bi=Math.cos,rl=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Kl(me,"lch"),At=Ye[0],sr=Ye[1],cr=Ye[2];return isNaN(cr)&&(cr=0),cr=cr*qs,[At,bi(cr)*sr,Mi(cr)*sr]},il=rl,Il=O.unpack,Hn=il,Vs=P,Wu=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=Il(me,"lch");var Ye=me[0],At=me[1],sr=me[2],cr=Hn(Ye,At,sr),tr=cr[0],Cr=cr[1],Ir=cr[2],Zr=Vs(tr,Cr,Ir),ni=Zr[0],Ri=Zr[1],oi=Zr[2];return[ni,Ri,oi,me.length>3?me[3]:1]},ne=Wu,Ve=O.unpack,Rt=ne,ar=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Ve(me,"hcl").reverse();return Rt.apply(void 0,Ye)},Ar=ar,Hr=O.unpack,Wr=O.type,Di=ue,fi=le,xn=$,Wi=Sc;fi.prototype.lch=function(){return Wi(this._rgb)},fi.prototype.hcl=function(){return Wi(this._rgb).reverse()},Di.lch=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(fi,[null].concat(me,["lch"])))},Di.hcl=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(fi,[null].concat(me,["hcl"])))},xn.format.lch=ne,xn.format.hcl=Ar,["lch","hcl"].forEach(function(me){return xn.autodetect.push({p:2,test:function(){for(var Le=[],Ye=arguments.length;Ye--;)Le[Ye]=arguments[Ye];if(Le=Hr(Le,me),Wr(Le)==="array"&&Le.length===3)return me}})});var nn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},xo=nn,Oo=le,Wo=$,za=O.type,jo=xo,Fn=Sn,Sa=Qi;Oo.prototype.name=function(){for(var me=Sa(this._rgb,"rgb"),Le=0,Ye=Object.keys(jo);Le<Ye.length;Le+=1){var At=Ye[Le];if(jo[At]===me)return At.toLowerCase()}return me},Wo.format.named=function(me){if(me=me.toLowerCase(),jo[me])return Fn(jo[me]);throw new Error("unknown color name: "+me)},Wo.autodetect.push({p:5,test:function(me){for(var Le=[],Ye=arguments.length-1;Ye-- >0;)Le[Ye]=arguments[Ye+1];if(!Le.length&&za(me)==="string"&&jo[me.toLowerCase()])return"named"}});var cs=O.unpack,nl=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=cs(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2];return(At<<16)+(sr<<8)+cr},Ll=nl,Jl=O.type,Tl=function(me){if(Jl(me)=="number"&&me>=0&&me<=16777215){var Le=me>>16,Ye=me>>8&255,At=me&255;return[Le,Ye,At,1]}throw new Error("unknown num color: "+me)},ku=Tl,Ec=ue,Ql=le,ao=$,ks=O.type,va=Ll;Ql.prototype.num=function(){return va(this._rgb)},Ec.num=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(Ql,[null].concat(me,["num"])))},ao.format.num=ku,ao.autodetect.push({p:5,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me.length===1&&ks(me[0])==="number"&&me[0]>=0&&me[0]<=16777215)return"num"}});var Pl=ue,ol=le,Ea=$,As=O.unpack,al=O.type,eu=Math.round;ol.prototype.rgb=function(me){return me===void 0&&(me=!0),me===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(eu)},ol.prototype.rgba=function(me){return me===void 0&&(me=!0),this._rgb.slice(0,4).map(function(Le,Ye){return Ye<3?me===!1?Le:eu(Le):Le})},Pl.rgb=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(ol,[null].concat(me,["rgb"])))},Ea.format.rgb=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=As(me,"rgba");return Ye[3]===void 0&&(Ye[3]=1),Ye},Ea.autodetect.push({p:3,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=As(me,"rgba"),al(me)==="array"&&(me.length===3||me.length===4&&al(me[3])=="number"&&me[3]>=0&&me[3]<=1))return"rgb"}});var Ka=Math.log,tu=function(me){var Le=me/100,Ye,At,sr;return Le<66?(Ye=255,At=Le<6?0:-155.25485562709179-.44596950469579133*(At=Le-2)+104.49216199393888*Ka(At),sr=Le<20?0:-254.76935184120902+.8274096064007395*(sr=Le-10)+115.67994401066147*Ka(sr)):(Ye=351.97690566805693+.114206453784165*(Ye=Le-55)-40.25366309332127*Ka(Ye),At=325.4494125711974+.07943456536662342*(At=Le-50)-28.0852963507957*Ka(At),sr=255),[Ye,At,sr,1]},ru=tu,Zu=ru,Hs=O.unpack,ma=Math.round,Ss=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];for(var Ye=Hs(me,"rgb"),At=Ye[0],sr=Ye[2],cr=1e3,tr=4e4,Cr=.4,Ir;tr-cr>Cr;){Ir=(tr+cr)*.5;var Zr=Zu(Ir);Zr[2]/Zr[0]>=sr/At?tr=Ir:cr=Ir}return ma(Ir)},Es=Ss,fs=ue,hs=le,Ml=$,ds=Es;hs.prototype.temp=hs.prototype.kelvin=hs.prototype.temperature=function(){return ds(this._rgb)},fs.temp=fs.kelvin=fs.temperature=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(hs,[null].concat(me,["temp"])))},Ml.format.temp=Ml.format.kelvin=Ml.format.temperature=ru;var sl=O.unpack,$s=Math.cbrt,Uo=Math.pow,_n=Math.sign,ps=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=sl(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=[Cs(At/255),Cs(sr/255),Cs(cr/255)],Cr=tr[0],Ir=tr[1],Zr=tr[2],ni=$s(.4122214708*Cr+.5363325363*Ir+.0514459929*Zr),Ri=$s(.2119034982*Cr+.6806995451*Ir+.1073969566*Zr),oi=$s(.0883024619*Cr+.2817188376*Ir+.6299787005*Zr);return[.2104542553*ni+.793617785*Ri-.0040720468*oi,1.9779984951*ni-2.428592205*Ri+.4505937099*oi,.0259040371*ni+.7827717662*Ri-.808675766*oi]},Na=ps;function Cs(me){var Le=Math.abs(me);return Le<.04045?me/12.92:(_n(me)||1)*Uo((Le+.055)/1.055,2.4)}var Au=O.unpack,ua=Math.pow,Cc=Math.sign,Ja=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=Au(me,"lab");var Ye=me[0],At=me[1],sr=me[2],cr=ua(Ye+.3963377774*At+.2158037573*sr,3),tr=ua(Ye-.1055613458*At-.0638541728*sr,3),Cr=ua(Ye-.0894841775*At-1.291485548*sr,3);return[255*Yn(4.0767416621*cr-3.3077115913*tr+.2309699292*Cr),255*Yn(-1.2684380046*cr+2.6097574011*tr-.3413193965*Cr),255*Yn(-.0041960863*cr-.7034186147*tr+1.707614701*Cr),me.length>3?me[3]:1]},is=Ja;function Yn(me){var Le=Math.abs(me);return Le>.0031308?(Cc(me)||1)*(1.055*ua(Le,1/2.4)-.055):me*12.92}var ei=O.unpack,zo=O.type,Zo=ue,Ca=le,Is=$,yi=Na;Ca.prototype.oklab=function(){return yi(this._rgb)},Zo.oklab=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(Ca,[null].concat(me,["oklab"])))},Is.format.oklab=is,Is.autodetect.push({p:3,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=ei(me,"oklab"),zo(me)==="array"&&me.length===3)return"oklab"}});var Su=O.unpack,m0=Na,O0=xu,Xu=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];var Ye=Su(me,"rgb"),At=Ye[0],sr=Ye[1],cr=Ye[2],tr=m0(At,sr,cr),Cr=tr[0],Ir=tr[1],Zr=tr[2];return O0(Cr,Ir,Zr)},Yu=Xu,kn=O.unpack,F0=il,Xc=is,Xo=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];me=kn(me,"lch");var Ye=me[0],At=me[1],sr=me[2],cr=F0(Ye,At,sr),tr=cr[0],Cr=cr[1],Ir=cr[2],Zr=Xc(tr,Cr,Ir),ni=Zr[0],Ri=Zr[1],oi=Zr[2];return[ni,Ri,oi,me.length>3?me[3]:1]},Ia=Xo,ns=O.unpack,Ku=O.type,La=ue,ll=le,iu=$,Ju=Yu;ll.prototype.oklch=function(){return Ju(this._rgb)},La.oklch=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];return new(Function.prototype.bind.apply(ll,[null].concat(me,["oklch"])))},iu.format.oklch=Ia,iu.autodetect.push({p:3,test:function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];if(me=ns(me,"oklch"),Ku(me)==="array"&&me.length===3)return"oklch"}});var $n=le,Yc=O.type;$n.prototype.alpha=function(me,Le){return Le===void 0&&(Le=!1),me!==void 0&&Yc(me)==="number"?Le?(this._rgb[3]=me,this):new $n([this._rgb[0],this._rgb[1],this._rgb[2],me],"rgb"):this._rgb[3]};var Kc=le;Kc.prototype.clipped=function(){return this._rgb._clipped||!1};var ca=le,To=tt;ca.prototype.darken=function(me){me===void 0&&(me=1);var Le=this,Ye=Le.lab();return Ye[0]-=To.Kn*me,new ca(Ye,"lab").alpha(Le.alpha(),!0)},ca.prototype.brighten=function(me){return me===void 0&&(me=1),this.darken(-me)},ca.prototype.darker=ca.prototype.darken,ca.prototype.brighter=ca.prototype.brighten;var Qu=le;Qu.prototype.get=function(me){var Le=me.split("."),Ye=Le[0],At=Le[1],sr=this[Ye]();if(At){var cr=Ye.indexOf(At)-(Ye.substr(0,2)==="ok"?2:0);if(cr>-1)return sr[cr];throw new Error("unknown channel "+At+" in mode "+Ye)}else return sr};var Gs=le,ul=O.type,Ic=Math.pow,B0=1e-7,ff=20;Gs.prototype.luminance=function(me){if(me!==void 0&&ul(me)==="number"){if(me===0)return new Gs([0,0,0,this._rgb[3]],"rgb");if(me===1)return new Gs([255,255,255,this._rgb[3]],"rgb");var Le=this.luminance(),Ye="rgb",At=ff,sr=function(tr,Cr){var Ir=tr.interpolate(Cr,.5,Ye),Zr=Ir.luminance();return Math.abs(me-Zr)<B0||!At--?Ir:Zr>me?sr(tr,Ir):sr(Ir,Cr)},cr=(Le>me?sr(new Gs([0,0,0]),this):sr(this,new Gs([255,255,255]))).rgb();return new Gs(cr.concat([this._rgb[3]]))}return Ws.apply(void 0,this._rgb.slice(0,3))};var Ws=function(me,Le,Ye){return me=Eu(me),Le=Eu(Le),Ye=Eu(Ye),.2126*me+.7152*Le+.0722*Ye},Eu=function(me){return me/=255,me<=.03928?me/12.92:Ic((me+.055)/1.055,2.4)},Ii={},rn=le,Ra=O.type,Qa=Ii,Jc=function(me,Le,Ye){Ye===void 0&&(Ye=.5);for(var At=[],sr=arguments.length-3;sr-- >0;)At[sr]=arguments[sr+3];var cr=At[0]||"lrgb";if(!Qa[cr]&&!At.length&&(cr=Object.keys(Qa)[0]),!Qa[cr])throw new Error("interpolation mode "+cr+" is not defined");return Ra(me)!=="object"&&(me=new rn(me)),Ra(Le)!=="object"&&(Le=new rn(Le)),Qa[cr](me,Le,Ye).alpha(me.alpha()+Ye*(Le.alpha()-me.alpha()))},es=le,nu=Jc;es.prototype.mix=es.prototype.interpolate=function(me,Le){Le===void 0&&(Le=.5);for(var Ye=[],At=arguments.length-2;At-- >0;)Ye[At]=arguments[At+2];return nu.apply(void 0,[this,me,Le].concat(Ye))};var Zs=le;Zs.prototype.premultiply=function(me){me===void 0&&(me=!1);var Le=this._rgb,Ye=Le[3];return me?(this._rgb=[Le[0]*Ye,Le[1]*Ye,Le[2]*Ye,Ye],this):new Zs([Le[0]*Ye,Le[1]*Ye,Le[2]*Ye,Ye],"rgb")};var g0=le,Lc=tt;g0.prototype.saturate=function(me){me===void 0&&(me=1);var Le=this,Ye=Le.lch();return Ye[1]+=Lc.Kn*me,Ye[1]<0&&(Ye[1]=0),new g0(Ye,"lch").alpha(Le.alpha(),!0)},g0.prototype.desaturate=function(me){return me===void 0&&(me=1),this.saturate(-me)};var qo=le,So=O.type;qo.prototype.set=function(me,Le,Ye){Ye===void 0&&(Ye=!1);var At=me.split("."),sr=At[0],cr=At[1],tr=this[sr]();if(cr){var Cr=sr.indexOf(cr)-(sr.substr(0,2)==="ok"?2:0);if(Cr>-1){if(So(Le)=="string")switch(Le.charAt(0)){case"+":tr[Cr]+=+Le;break;case"-":tr[Cr]+=+Le;break;case"*":tr[Cr]*=+Le.substr(1);break;case"/":tr[Cr]/=+Le.substr(1);break;default:tr[Cr]=+Le}else if(So(Le)==="number")tr[Cr]=Le;else throw new Error("unsupported value for Color.set");var Ir=new qo(tr,sr);return Ye?(this._rgb=Ir._rgb,this):Ir}throw new Error("unknown channel "+cr+" in mode "+sr)}else return tr};var os=le,fa=function(me,Le,Ye){var At=me._rgb,sr=Le._rgb;return new os(At[0]+Ye*(sr[0]-At[0]),At[1]+Ye*(sr[1]-At[1]),At[2]+Ye*(sr[2]-At[2]),"rgb")};Ii.rgb=fa;var Tc=le,ou=Math.sqrt,Oa=Math.pow,Fa=function(me,Le,Ye){var At=me._rgb,sr=At[0],cr=At[1],tr=At[2],Cr=Le._rgb,Ir=Cr[0],Zr=Cr[1],ni=Cr[2];return new Tc(ou(Oa(sr,2)*(1-Ye)+Oa(Ir,2)*Ye),ou(Oa(cr,2)*(1-Ye)+Oa(Zr,2)*Ye),ou(Oa(tr,2)*(1-Ye)+Oa(ni,2)*Ye),"rgb")};Ii.lrgb=Fa;var Pc=le,ec=function(me,Le,Ye){var At=me.lab(),sr=Le.lab();return new Pc(At[0]+Ye*(sr[0]-At[0]),At[1]+Ye*(sr[1]-At[1]),At[2]+Ye*(sr[2]-At[2]),"lab")};Ii.lab=ec;var Dl=le,as=function(me,Le,Ye,At){var sr,cr,tr,Cr;At==="hsl"?(tr=me.hsl(),Cr=Le.hsl()):At==="hsv"?(tr=me.hsv(),Cr=Le.hsv()):At==="hcg"?(tr=me.hcg(),Cr=Le.hcg()):At==="hsi"?(tr=me.hsi(),Cr=Le.hsi()):At==="lch"||At==="hcl"?(At="hcl",tr=me.hcl(),Cr=Le.hcl()):At==="oklch"&&(tr=me.oklch().reverse(),Cr=Le.oklch().reverse());var Ir,Zr,ni,Ri,oi,Si;(At.substr(0,1)==="h"||At==="oklch")&&(sr=tr,Ir=sr[0],ni=sr[1],oi=sr[2],cr=Cr,Zr=cr[0],Ri=cr[1],Si=cr[2]);var Zi,Wn,to,fo;return!isNaN(Ir)&&!isNaN(Zr)?(Zr>Ir&&Zr-Ir>180?fo=Zr-(Ir+360):Zr<Ir&&Ir-Zr>180?fo=Zr+360-Ir:fo=Zr-Ir,Wn=Ir+Ye*fo):isNaN(Ir)?isNaN(Zr)?Wn=Number.NaN:(Wn=Zr,(oi==1||oi==0)&&At!="hsv"&&(Zi=Ri)):(Wn=Ir,(Si==1||Si==0)&&At!="hsv"&&(Zi=ni)),Zi===void 0&&(Zi=ni+Ye*(Ri-ni)),to=oi+Ye*(Si-oi),At==="oklch"?new Dl([to,Zi,Wn],At):new Dl([Wn,Zi,to],At)},Mc=as,zl=function(me,Le,Ye){return Mc(me,Le,Ye,"lch")};Ii.lch=zl,Ii.hcl=zl;var y0=le,tc=function(me,Le,Ye){var At=me.num(),sr=Le.num();return new y0(At+Ye*(sr-At),"num")};Ii.num=tc;var Cu=as,au=function(me,Le,Ye){return Cu(me,Le,Ye,"hcg")};Ii.hcg=au;var Dc=as,lo=function(me,Le,Ye){return Dc(me,Le,Ye,"hsi")};Ii.hsi=lo;var R=as,p=function(me,Le,Ye){return R(me,Le,Ye,"hsl")};Ii.hsl=p;var k=as,L=function(me,Le,Ye){return k(me,Le,Ye,"hsv")};Ii.hsv=L;var z=le,j=function(me,Le,Ye){var At=me.oklab(),sr=Le.oklab();return new z(At[0]+Ye*(sr[0]-At[0]),At[1]+Ye*(sr[1]-At[1]),At[2]+Ye*(sr[2]-At[2]),"oklab")};Ii.oklab=j;var K=as,re=function(me,Le,Ye){return K(me,Le,Ye,"oklch")};Ii.oklch=re;var ae=le,ve=O.clip_rgb,Ee=Math.pow,Te=Math.sqrt,Ze=Math.PI,T=Math.cos,B=Math.sin,W=Math.atan2,Q=function(me,Le,Ye){Le===void 0&&(Le="lrgb"),Ye===void 0&&(Ye=null);var At=me.length;Ye||(Ye=Array.from(new Array(At)).map(function(){return 1}));var sr=At/Ye.reduce(function(Wn,to){return Wn+to});if(Ye.forEach(function(Wn,to){Ye[to]*=sr}),me=me.map(function(Wn){return new ae(Wn)}),Le==="lrgb")return de(me,Ye);for(var cr=me.shift(),tr=cr.get(Le),Cr=[],Ir=0,Zr=0,ni=0;ni<tr.length;ni++)if(tr[ni]=(tr[ni]||0)*Ye[0],Cr.push(isNaN(tr[ni])?0:Ye[0]),Le.charAt(ni)==="h"&&!isNaN(tr[ni])){var Ri=tr[ni]/180*Ze;Ir+=T(Ri)*Ye[0],Zr+=B(Ri)*Ye[0]}var oi=cr.alpha()*Ye[0];me.forEach(function(Wn,to){var fo=Wn.get(Le);oi+=Wn.alpha()*Ye[to+1];for(var Lo=0;Lo<tr.length;Lo++)if(!isNaN(fo[Lo]))if(Cr[Lo]+=Ye[to+1],Le.charAt(Lo)==="h"){var ga=fo[Lo]/180*Ze;Ir+=T(ga)*Ye[to+1],Zr+=B(ga)*Ye[to+1]}else tr[Lo]+=fo[Lo]*Ye[to+1]});for(var Si=0;Si<tr.length;Si++)if(Le.charAt(Si)==="h"){for(var Zi=W(Zr/Cr[Si],Ir/Cr[Si])/Ze*180;Zi<0;)Zi+=360;for(;Zi>=360;)Zi-=360;tr[Si]=Zi}else tr[Si]=tr[Si]/Cr[Si];return oi/=At,new ae(tr,Le).alpha(oi>.99999?1:oi,!0)},de=function(me,Le){for(var Ye=me.length,At=[0,0,0,0],sr=0;sr<me.length;sr++){var cr=me[sr],tr=Le[sr]/Ye,Cr=cr._rgb;At[0]+=Ee(Cr[0],2)*tr,At[1]+=Ee(Cr[1],2)*tr,At[2]+=Ee(Cr[2],2)*tr,At[3]+=Cr[3]*tr}return At[0]=Te(At[0]),At[1]=Te(At[1]),At[2]=Te(At[2]),At[3]>.9999999&&(At[3]=1),new ae(ve(At))},ke=ue,fe=O.type,Se=Math.pow,De=function(me){var Le="rgb",Ye=ke("#ccc"),At=0,sr=[0,1],cr=[],tr=[0,0],Cr=!1,Ir=[],Zr=!1,ni=0,Ri=1,oi=!1,Si={},Zi=!0,Wn=1,to=function(ai){if(ai=ai||["#fff","#000"],ai&&fe(ai)==="string"&&ke.brewer&&ke.brewer[ai.toLowerCase()]&&(ai=ke.brewer[ai.toLowerCase()]),fe(ai)==="array"){ai.length===1&&(ai=[ai[0],ai[0]]),ai=ai.slice(0);for(var Yi=0;Yi<ai.length;Yi++)ai[Yi]=ke(ai[Yi]);cr.length=0;for(var Mn=0;Mn<ai.length;Mn++)cr.push(Mn/(ai.length-1))}return Mo(),Ir=ai},fo=function(ai){if(Cr!=null){for(var Yi=Cr.length-1,Mn=0;Mn<Yi&&ai>=Cr[Mn];)Mn++;return Mn-1}return 0},Lo=function(ai){return ai},ga=function(ai){return ai},xa=function(ai,Yi){var Mn,qn;if(Yi==null&&(Yi=!1),isNaN(ai)||ai===null)return Ye;if(Yi)qn=ai;else if(Cr&&Cr.length>2){var ja=fo(ai);qn=ja/(Cr.length-2)}else Ri!==ni?qn=(ai-ni)/(Ri-ni):qn=1;qn=ga(qn),Yi||(qn=Lo(qn)),Wn!==1&&(qn=Se(qn,Wn)),qn=tr[0]+qn*(1-tr[0]-tr[1]),qn=Math.min(1,Math.max(0,qn));var No=Math.floor(qn*1e4);if(Zi&&Si[No])Mn=Si[No];else{if(fe(Ir)==="array")for(var ro=0;ro<cr.length;ro++){var ko=cr[ro];if(qn<=ko){Mn=Ir[ro];break}if(qn>=ko&&ro===cr.length-1){Mn=Ir[ro];break}if(qn>ko&&qn<cr[ro+1]){qn=(qn-ko)/(cr[ro+1]-ko),Mn=ke.interpolate(Ir[ro],Ir[ro+1],qn,Le);break}}else fe(Ir)==="function"&&(Mn=Ir(qn));Zi&&(Si[No]=Mn)}return Mn},Mo=function(){return Si={}};to(me);var Ln=function(ai){var Yi=ke(xa(ai));return Zr&&Yi[Zr]?Yi[Zr]():Yi};return Ln.classes=function(ai){if(ai!=null){if(fe(ai)==="array")Cr=ai,sr=[ai[0],ai[ai.length-1]];else{var Yi=ke.analyze(sr);ai===0?Cr=[Yi.min,Yi.max]:Cr=ke.limits(Yi,"e",ai)}return Ln}return Cr},Ln.domain=function(ai){if(!arguments.length)return sr;ni=ai[0],Ri=ai[ai.length-1],cr=[];var Yi=Ir.length;if(ai.length===Yi&&ni!==Ri)for(var Mn=0,qn=Array.from(ai);Mn<qn.length;Mn+=1){var ja=qn[Mn];cr.push((ja-ni)/(Ri-ni))}else{for(var No=0;No<Yi;No++)cr.push(No/(Yi-1));if(ai.length>2){var ro=ai.map(function(Fo,$o){return $o/(ai.length-1)}),ko=ai.map(function(Fo){return(Fo-ni)/(Ri-ni)});ko.every(function(Fo,$o){return ro[$o]===Fo})||(ga=function(Fo){if(Fo<=0||Fo>=1)return Fo;for(var $o=0;Fo>=ko[$o+1];)$o++;var fl=(Fo-ko[$o])/(ko[$o+1]-ko[$o]),t0=ro[$o]+fl*(ro[$o+1]-ro[$o]);return t0})}}return sr=[ni,Ri],Ln},Ln.mode=function(ai){return arguments.length?(Le=ai,Mo(),Ln):Le},Ln.range=function(ai,Yi){return to(ai),Ln},Ln.out=function(ai){return Zr=ai,Ln},Ln.spread=function(ai){return arguments.length?(At=ai,Ln):At},Ln.correctLightness=function(ai){return ai==null&&(ai=!0),oi=ai,Mo(),oi?Lo=function(Yi){for(var Mn=xa(0,!0).lab()[0],qn=xa(1,!0).lab()[0],ja=Mn>qn,No=xa(Yi,!0).lab()[0],ro=Mn+(qn-Mn)*Yi,ko=No-ro,Fo=0,$o=1,fl=20;Math.abs(ko)>.01&&fl-- >0;)(function(){return ja&&(ko*=-1),ko<0?(Fo=Yi,Yi+=($o-Yi)*.5):($o=Yi,Yi+=(Fo-Yi)*.5),No=xa(Yi,!0).lab()[0],ko=No-ro})();return Yi}:Lo=function(Yi){return Yi},Ln},Ln.padding=function(ai){return ai!=null?(fe(ai)==="number"&&(ai=[ai,ai]),tr=ai,Ln):tr},Ln.colors=function(ai,Yi){arguments.length<2&&(Yi="hex");var Mn=[];if(arguments.length===0)Mn=Ir.slice(0);else if(ai===1)Mn=[Ln(.5)];else if(ai>1){var qn=sr[0],ja=sr[1]-qn;Mn=je(0,ai,!1).map(function($o){return Ln(qn+$o/(ai-1)*ja)})}else{me=[];var No=[];if(Cr&&Cr.length>2)for(var ro=1,ko=Cr.length,Fo=1<=ko;Fo?ro<ko:ro>ko;Fo?ro++:ro--)No.push((Cr[ro-1]+Cr[ro])*.5);else No=sr;Mn=No.map(function($o){return Ln($o)})}return ke[Yi]&&(Mn=Mn.map(function($o){return $o[Yi]()})),Mn},Ln.cache=function(ai){return ai!=null?(Zi=ai,Ln):Zi},Ln.gamma=function(ai){return ai!=null?(Wn=ai,Ln):Wn},Ln.nodata=function(ai){return ai!=null?(Ye=ke(ai),Ln):Ye},Ln};function je(me,Le,Ye){for(var At=[],sr=me<Le,cr=Ye?sr?Le+1:Le-1:Le,tr=me;sr?tr<cr:tr>cr;sr?tr++:tr--)At.push(tr);return At}var ut=le,Dt=De,Tt=function(me){for(var Le=[1,1],Ye=1;Ye<me;Ye++){for(var At=[1],sr=1;sr<=Le.length;sr++)At[sr]=(Le[sr]||0)+Le[sr-1];Le=At}return Le},Ct=function(me){var Le,Ye,At,sr,cr,tr,Cr;if(me=me.map(function(oi){return new ut(oi)}),me.length===2)Le=me.map(function(oi){return oi.lab()}),cr=Le[0],tr=Le[1],sr=function(oi){var Si=[0,1,2].map(function(Zi){return cr[Zi]+oi*(tr[Zi]-cr[Zi])});return new ut(Si,"lab")};else if(me.length===3)Ye=me.map(function(oi){return oi.lab()}),cr=Ye[0],tr=Ye[1],Cr=Ye[2],sr=function(oi){var Si=[0,1,2].map(function(Zi){return(1-oi)*(1-oi)*cr[Zi]+2*(1-oi)*oi*tr[Zi]+oi*oi*Cr[Zi]});return new ut(Si,"lab")};else if(me.length===4){var Ir;At=me.map(function(oi){return oi.lab()}),cr=At[0],tr=At[1],Cr=At[2],Ir=At[3],sr=function(oi){var Si=[0,1,2].map(function(Zi){return(1-oi)*(1-oi)*(1-oi)*cr[Zi]+3*(1-oi)*(1-oi)*oi*tr[Zi]+3*(1-oi)*oi*oi*Cr[Zi]+oi*oi*oi*Ir[Zi]});return new ut(Si,"lab")}}else if(me.length>=5){var Zr,ni,Ri;Zr=me.map(function(oi){return oi.lab()}),Ri=me.length-1,ni=Tt(Ri),sr=function(oi){var Si=1-oi,Zi=[0,1,2].map(function(Wn){return Zr.reduce(function(to,fo,Lo){return to+ni[Lo]*Math.pow(Si,Ri-Lo)*Math.pow(oi,Lo)*fo[Wn]},0)});return new ut(Zi,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return sr},br=function(me){var Le=Ct(me);return Le.scale=function(){return Dt(Le)},Le},kr=ue,_t=function(me,Le,Ye){if(!_t[Ye])throw new Error("unknown blend mode "+Ye);return _t[Ye](me,Le)},jt=function(me){return function(Le,Ye){var At=kr(Ye).rgb(),sr=kr(Le).rgb();return kr.rgb(me(At,sr))}},hr=function(me){return function(Le,Ye){var At=[];return At[0]=me(Le[0],Ye[0]),At[1]=me(Le[1],Ye[1]),At[2]=me(Le[2],Ye[2]),At}},Ur=function(me){return me},Pr=function(me,Le){return me*Le/255},qr=function(me,Le){return me>Le?Le:me},Xr=function(me,Le){return me>Le?me:Le},zi=function(me,Le){return 255*(1-(1-me/255)*(1-Le/255))},ii=function(me,Le){return Le<128?2*me*Le/255:255*(1-2*(1-me/255)*(1-Le/255))},Pn=function(me,Le){return 255*(1-(1-Le/255)/(me/255))},In=function(me,Le){return me===255?255:(me=255*(Le/255)/(1-me/255),me>255?255:me)};_t.normal=jt(hr(Ur)),_t.multiply=jt(hr(Pr)),_t.screen=jt(hr(zi)),_t.overlay=jt(hr(ii)),_t.darken=jt(hr(qr)),_t.lighten=jt(hr(Xr)),_t.dodge=jt(hr(In)),_t.burn=jt(hr(Pn));for(var hn=_t,vn=O.type,Jn=O.clip_rgb,Gn=O.TWOPI,bn=Math.pow,Vo=Math.sin,mn=Math.cos,Eo=ue,uo=function(me,Le,Ye,At,sr){me===void 0&&(me=300),Le===void 0&&(Le=-1.5),Ye===void 0&&(Ye=1),At===void 0&&(At=1),sr===void 0&&(sr=[0,1]);var cr=0,tr;vn(sr)==="array"?tr=sr[1]-sr[0]:(tr=0,sr=[sr,sr]);var Cr=function(Ir){var Zr=Gn*((me+120)/360+Le*Ir),ni=bn(sr[0]+tr*Ir,At),Ri=cr!==0?Ye[0]+Ir*cr:Ye,oi=Ri*ni*(1-ni)/2,Si=mn(Zr),Zi=Vo(Zr),Wn=ni+oi*(-.14861*Si+1.78277*Zi),to=ni+oi*(-.29227*Si-.90649*Zi),fo=ni+oi*(1.97294*Si);return Eo(Jn([Wn*255,to*255,fo*255,1]))};return Cr.start=function(Ir){return Ir==null?me:(me=Ir,Cr)},Cr.rotations=function(Ir){return Ir==null?Le:(Le=Ir,Cr)},Cr.gamma=function(Ir){return Ir==null?At:(At=Ir,Cr)},Cr.hue=function(Ir){return Ir==null?Ye:(Ye=Ir,vn(Ye)==="array"?(cr=Ye[1]-Ye[0],cr===0&&(Ye=Ye[1])):cr=0,Cr)},Cr.lightness=function(Ir){return Ir==null?sr:(vn(Ir)==="array"?(sr=Ir,tr=Ir[1]-Ir[0]):(sr=[Ir,Ir],tr=0),Cr)},Cr.scale=function(){return Eo.scale(Cr)},Cr.hue(Ye),Cr},Cn=le,Po="0123456789abcdef",ba=Math.floor,Qn=Math.random,zn=function(){for(var me="#",Le=0;Le<6;Le++)me+=Po.charAt(ba(Qn()*16));return new Cn(me,"hex")},yo=y,eo=Math.log,wa=Math.pow,Co=Math.floor,Ba=Math.abs,Nl=function(me,Le){Le===void 0&&(Le=null);var Ye={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return yo(me)==="object"&&(me=Object.values(me)),me.forEach(function(At){Le&&yo(At)==="object"&&(At=At[Le]),At!=null&&!isNaN(At)&&(Ye.values.push(At),Ye.sum+=At,At<Ye.min&&(Ye.min=At),At>Ye.max&&(Ye.max=At),Ye.count+=1)}),Ye.domain=[Ye.min,Ye.max],Ye.limits=function(At,sr){return ms(Ye,At,sr)},Ye},ms=function(me,Le,Ye){Le===void 0&&(Le="equal"),Ye===void 0&&(Ye=7),yo(me)=="array"&&(me=Nl(me));var At=me.min,sr=me.max,cr=me.values.sort(function(n0,pf){return n0-pf});if(Ye===1)return[At,sr];var tr=[];if(Le.substr(0,1)==="c"&&(tr.push(At),tr.push(sr)),Le.substr(0,1)==="e"){tr.push(At);for(var Cr=1;Cr<Ye;Cr++)tr.push(At+Cr/Ye*(sr-At));tr.push(sr)}else if(Le.substr(0,1)==="l"){if(At<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Ir=Math.LOG10E*eo(At),Zr=Math.LOG10E*eo(sr);tr.push(At);for(var ni=1;ni<Ye;ni++)tr.push(wa(10,Ir+ni/Ye*(Zr-Ir)));tr.push(sr)}else if(Le.substr(0,1)==="q"){tr.push(At);for(var Ri=1;Ri<Ye;Ri++){var oi=(cr.length-1)*Ri/Ye,Si=Co(oi);if(Si===oi)tr.push(cr[Si]);else{var Zi=oi-Si;tr.push(cr[Si]*(1-Zi)+cr[Si+1]*Zi)}}tr.push(sr)}else if(Le.substr(0,1)==="k"){var Wn,to=cr.length,fo=new Array(to),Lo=new Array(Ye),ga=!0,xa=0,Mo=null;Mo=[],Mo.push(At);for(var Ln=1;Ln<Ye;Ln++)Mo.push(At+Ln/Ye*(sr-At));for(Mo.push(sr);ga;){for(var ai=0;ai<Ye;ai++)Lo[ai]=0;for(var Yi=0;Yi<to;Yi++)for(var Mn=cr[Yi],qn=Number.MAX_VALUE,ja=void 0,No=0;No<Ye;No++){var ro=Ba(Mo[No]-Mn);ro<qn&&(qn=ro,ja=No),Lo[ja]++,fo[Yi]=ja}for(var ko=new Array(Ye),Fo=0;Fo<Ye;Fo++)ko[Fo]=null;for(var $o=0;$o<to;$o++)Wn=fo[$o],ko[Wn]===null?ko[Wn]=cr[$o]:ko[Wn]+=cr[$o];for(var fl=0;fl<Ye;fl++)ko[fl]*=1/Lo[fl];ga=!1;for(var t0=0;t0<Ye;t0++)if(ko[t0]!==Mo[t0]){ga=!0;break}Mo=ko,xa++,xa>200&&(ga=!1)}for(var Fl={},$0=0;$0<Ye;$0++)Fl[$0]=[];for(var Yo=0;Yo<to;Yo++)Wn=fo[Yo],Fl[Wn].push(cr[Yo]);for(var hl=[],r0=0;r0<Ye;r0++)hl.push(Fl[r0][0]),hl.push(Fl[r0][Fl[r0].length-1]);hl=hl.sort(function(n0,pf){return n0-pf}),tr.push(hl[0]);for(var i0=1;i0<hl.length;i0+=2){var nc=hl[i0];!isNaN(nc)&&tr.indexOf(nc)===-1&&tr.push(nc)}}return tr},cl={analyze:Nl,limits:ms},Io=le,Ho=function(me,Le){me=new Io(me),Le=new Io(Le);var Ye=me.luminance(),At=Le.luminance();return Ye>At?(Ye+.05)/(At+.05):(At+.05)/(Ye+.05)},rc=le,Ls=Math.sqrt,co=Math.pow,Ts=Math.min,Rl=Math.max,Ps=Math.atan2,Ms=Math.abs,Iu=Math.cos,j0=Math.sin,U0=Math.exp,_0=Math.PI,q0=function(me,Le,Ye,At,sr){Ye===void 0&&(Ye=1),At===void 0&&(At=1),sr===void 0&&(sr=1);var cr=function(nc){return 360*nc/(2*_0)},tr=function(nc){return 2*_0*nc/360};me=new rc(me),Le=new rc(Le);var Cr=Array.from(me.lab()),Ir=Cr[0],Zr=Cr[1],ni=Cr[2],Ri=Array.from(Le.lab()),oi=Ri[0],Si=Ri[1],Zi=Ri[2],Wn=(Ir+oi)/2,to=Ls(co(Zr,2)+co(ni,2)),fo=Ls(co(Si,2)+co(Zi,2)),Lo=(to+fo)/2,ga=.5*(1-Ls(co(Lo,7)/(co(Lo,7)+co(25,7)))),xa=Zr*(1+ga),Mo=Si*(1+ga),Ln=Ls(co(xa,2)+co(ni,2)),ai=Ls(co(Mo,2)+co(Zi,2)),Yi=(Ln+ai)/2,Mn=cr(Ps(ni,xa)),qn=cr(Ps(Zi,Mo)),ja=Mn>=0?Mn:Mn+360,No=qn>=0?qn:qn+360,ro=Ms(ja-No)>180?(ja+No+360)/2:(ja+No)/2,ko=1-.17*Iu(tr(ro-30))+.24*Iu(tr(2*ro))+.32*Iu(tr(3*ro+6))-.2*Iu(tr(4*ro-63)),Fo=No-ja;Fo=Ms(Fo)<=180?Fo:No<=ja?Fo+360:Fo-360,Fo=2*Ls(Ln*ai)*j0(tr(Fo)/2);var $o=oi-Ir,fl=ai-Ln,t0=1+.015*co(Wn-50,2)/Ls(20+co(Wn-50,2)),Fl=1+.045*Yi,$0=1+.015*Yi*ko,Yo=30*U0(-co((ro-275)/25,2)),hl=2*Ls(co(Yi,7)/(co(Yi,7)+co(25,7))),r0=-hl*j0(2*tr(Yo)),i0=Ls(co($o/(Ye*t0),2)+co(fl/(At*Fl),2)+co(Fo/(sr*$0),2)+r0*(fl/(At*Fl))*(Fo/(sr*$0)));return Rl(0,Ts(100,i0))},Qc=le,ic=function(me,Le,Ye){Ye===void 0&&(Ye="lab"),me=new Qc(me),Le=new Qc(Le);var At=me.get(Ye),sr=Le.get(Ye),cr=0;for(var tr in At){var Cr=(At[tr]||0)-(sr[tr]||0);cr+=Cr*Cr}return Math.sqrt(cr)},zc=le,e0=function(){for(var me=[],Le=arguments.length;Le--;)me[Le]=arguments[Le];try{return new(Function.prototype.bind.apply(zc,[null].concat(me))),!0}catch{return!1}},hf=ue,ia=De,Ol={cool:function(){return ia([hf.hsl(180,1,.9),hf.hsl(250,.7,.4)])},hot:function(){return ia(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Nc={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Lu=0,V0=Object.keys(Nc);Lu<V0.length;Lu+=1){var df=V0[Lu];Nc[df.toLowerCase()]=Nc[df]}var Ta=Nc,Qo=ue;Qo.average=Q,Qo.bezier=br,Qo.blend=hn,Qo.cubehelix=uo,Qo.mix=Qo.interpolate=Jc,Qo.random=zn,Qo.scale=De,Qo.analyze=cl.analyze,Qo.contrast=Ho,Qo.deltaE=q0,Qo.distance=ic,Qo.limits=cl.limits,Qo.valid=e0,Qo.scales=Ol,Qo.colors=xo,Qo.brewer=Ta;var H0=Qo;return H0})})(Cx);var nT=Cx.exports;const Id=O2(nT),x2=t=>{if(t&&Array.isArray(t)){if(t[0]==="rgb")t=Id(t.splice(1,3)).css();else if(t[0]==="rgba")t=Id(t.splice(1,4)).css();else if(t[0]==="match"){const e=t[t.length-1];t=x2(e)}}return t};function oT(t){let e,r,i=t[0].innerHTML+"";return{c(){e=Je("div"),r=new Tp(!1),this.h()},l(o){e=Qe(o,"DIV",{class:!0});var u=vt(e);r=Pp(u,!1),u.forEach(he),this.h()},h(){r.a=null,ge(e,"class","legend svelte-1dizgfa")},m(o,u){dt(o,e,u),r.m(i,e)},p(o,[u]){u&1&&i!==(i=o[0].innerHTML+"")&&r.p(i)},i:mi,o:mi,d(o){o&&he(e)}}}function aT(t,e,r){let{map:i}=e,{layer:o}=e,{spriteLoader:u}=e,c=document.createElement("div");const s=y=>{let b=new Blob([y],{type:"image/svg+xml"}),A=URL.createObjectURL(b),I=document.createElement("img");return I.src=A,I.addEventListener("load",()=>URL.revokeObjectURL(A),{once:!0}),I.height=24,I.width=24,I},f=async()=>{const y=i.getZoom(),b=iT({zoom:y,layer:o});if(r(0,c.innerText="",c),b){let I,C,N;switch(b.element){case"div":if(b.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(b.attributes.style.backgroundImage)){var A=document.createElement("img");A.src=b.attributes.style.backgroundImage.replace("url(","").replace(")",""),A.alt=o.id,A.style.cssText="height: 24px;",c.appendChild(A)}I=document.createElement("div"),I.style.height="24px",I.style.width="50px",I.style.backgroundColor=b.attributes.style.backgroundColor,I.style.backgroundPosition=b.attributes.style.backgroundPosition,I.style.backgroundSize=b.attributes.style.backgroundSize,I.style.backgroundRepeat=b.attributes.style.backgroundRepeat,I.style.opacity=b.attributes.style.opacity,c.appendChild(I);break;case"svg":if(u&&(N=u.getIconDataUrl(o),N)){const O=document.createElement("img");O.src=N,O.alt=o.id,O.style.cssText="height: 24px;",c.appendChild(O);break}C=document.createElementNS("http://www.w3.org/2000/svg","svg"),C.style.cssText="height: 24px;",C.setAttributeNS(null,"version","1.1"),Object.keys(b.attributes).forEach(O=>{C.setAttribute(O,b.attributes[O]);let $=document.createElementNS("http://www.w3.org/2000/svg","g");b.children.forEach(G=>{var Z=document.createElementNS("http://www.w3.org/2000/svg",G.element);Object.keys(G.attributes).forEach(ee=>{Z.setAttributeNS(null,ee,G.attributes[ee])}),$.appendChild(Z)}),C.appendChild($)}),c.appendChild(C);break;default:console.log(b.element);return}}else if(o.type==="hillshade"){const C=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 32c12.5 0 24.1 6.4 30.7 17L503.4 394.4c5.6 8.9 8.6 19.2 8.6 29.7c0 30.9-25 55.9-55.9 55.9H55.9C25 480 0 455 0 424.1c0-10.5 3-20.8 8.6-29.7L225.2 49c6.6-10.6 18.3-17 30.8-17zm65 192L256 120.4 176.9 246.5 208 288l48-64h65z"/></svg>');c.appendChild(C)}else if(o.type==="fill-extrusion"){const C=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M243.583 91.6027L323.695 138.384C326.575 140.026 326.68 144.583 323.695 146.225L228.503 201.854C225.623 203.55 222.22 203.444 219.549 201.854L124.357 146.225C121.425 144.636 121.373 139.973 124.357 138.384L204.417 91.6027V0L0 119.417V358.252L78.3843 312.477V218.914C78.3319 215.576 82.2066 213.192 85.0865 214.993L180.279 270.622C183.159 272.318 184.782 275.338 184.782 278.464V389.669C184.834 393.007 180.959 395.391 178.079 393.589L97.9673 346.808L19.583 392.583L224 512L428.417 392.583L350.033 346.808L269.921 393.589C267.093 395.338 263.114 393.06 263.218 389.669V278.464C263.218 275.126 265.051 272.159 267.721 270.622L362.914 214.993C365.741 213.245 369.72 215.47 369.616 218.914V312.477L448 358.252V119.417L243.583 0V91.6027Z"/></svg>');c.appendChild(C)}else if(o.type==="raster"){const C=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zm48 0c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256z"/></svg>');c.appendChild(C)}else if(o.type==="heatmap"){const I=i.getPaintProperty(o.id,"heatmap-color");if(I&&I[0]==="interpolate"){const C=[];for(let G=4;G<I.length;G=G+2)C.push(I[G]);const O=`height: calc(1px * 24); width: calc(2px * 12); background: linear-gradient(90deg, ${Id.scale(C).mode("lrgb").padding([.25,0]).domain([1,100]).colors(C.length,"rgba")});`,$=document.createElement("div");$.style.cssText=O,c.appendChild($)}else{const N=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zm0-160c-53 0-96-43-96-96s43-96 96-96s96 43 96 96s-43 96-96 96z"/></svg>');c.appendChild(N)}}else{const I=i.getPaintProperty(o.id,"background-color"),C=x2(I)??"#000000",N=i.getPaintProperty(o.id,"background-opacity")??1,O=document.createElement("div");O.style.height="24px",O.style.width="50px",O.style.backgroundColor=C,O.style.opacity=`${N}`,c.appendChild(O)}};return i.on("moveend",f),i.on("zoom",f),t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer),"spriteLoader"in y&&r(3,u=y.spriteLoader)},t.$$.update=()=>{t.$$.dirty&4&&f()},[c,i,o,u]}class Ix extends di{constructor(e){super(),pi(this,e,aT,oT,hi,{map:1,layer:2,spriteLoader:3})}}var Lx={};Object.defineProperty(Lx,"__esModule",{value:!0});function sT(){var t=!1;if("maxTouchPoints"in navigator)t=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)navigator!==null&&(t=navigator.msMaxTouchPoints>0);else{var e=window.matchMedia&&matchMedia("(pointer:coarse)");if(e&&e.media==="(pointer:coarse)")t=!!e.matches;else if("orientation"in window)t=!0;else{var r=navigator.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)}}return t}var lT=Lx.isMobile=sT(),uT=typeof global=="object"&&global&&global.Object===Object&&global;const cT=uT;var fT=typeof self=="object"&&self&&self.Object===Object&&self,hT=cT||fT||Function("return this")();const Tx=hT;var dT=Tx.Symbol;const k2=dT;var Px=Object.prototype,pT=Px.hasOwnProperty,mT=Px.toString,ap=k2?k2.toStringTag:void 0;function gT(t){var e=pT.call(t,ap),r=t[ap];try{t[ap]=void 0;var i=!0}catch{}var o=mT.call(t);return i&&(e?t[ap]=r:delete t[ap]),o}var yT=Object.prototype,_T=yT.toString;function vT(t){return _T.call(t)}var bT="[object Null]",wT="[object Undefined]",B5=k2?k2.toStringTag:void 0;function xT(t){return t==null?t===void 0?wT:bT:B5&&B5 in Object(t)?gT(t):vT(t)}function kT(t){return t!=null&&typeof t=="object"}var AT="[object Symbol]";function ST(t){return typeof t=="symbol"||kT(t)&&xT(t)==AT}var ET=/\s/;function CT(t){for(var e=t.length;e--&&ET.test(t.charAt(e)););return e}var IT=/^\s+/;function LT(t){return t&&t.slice(0,CT(t)+1).replace(IT,"")}function Dy(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var j5=0/0,TT=/^[-+]0x[0-9a-f]+$/i,PT=/^0b[01]+$/i,MT=/^0o[0-7]+$/i,DT=parseInt;function U5(t){if(typeof t=="number")return t;if(ST(t))return j5;if(Dy(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Dy(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=LT(t);var r=PT.test(t);return r||MT.test(t)?DT(t.slice(2),r?2:8):TT.test(t)?j5:+t}var zT=function(){return Tx.Date.now()};const ug=zT;var NT="Expected a function",RT=Math.max,OT=Math.min;function H_(t,e,r){var i,o,u,c,s,f,y=0,b=!1,A=!1,I=!0;if(typeof t!="function")throw new TypeError(NT);e=U5(e)||0,Dy(r)&&(b=!!r.leading,A="maxWait"in r,u=A?RT(U5(r.maxWait)||0,e):u,I="trailing"in r?!!r.trailing:I);function C(le){var we=i,ue=o;return i=o=void 0,y=le,c=t.apply(ue,we),c}function N(le){return y=le,s=setTimeout(G,e),b?C(le):c}function O(le){var we=le-f,ue=le-y,ze=e-we;return A?OT(ze,u-ue):ze}function $(le){var we=le-f,ue=le-y;return f===void 0||we>=e||we<0||A&&ue>=u}function G(){var le=ug();if($(le))return Z(le);s=setTimeout(G,O(le))}function Z(le){return s=void 0,I&&i?C(le):(i=o=void 0,c)}function ee(){s!==void 0&&clearTimeout(s),y=0,i=f=o=s=void 0}function te(){return s===void 0?c:Z(ug())}function _e(){var le=ug(),we=$(le);if(i=arguments,o=this,f=le,we){if(s===void 0)return N(f);if(A)return clearTimeout(s),s=setTimeout(G,e),C(f)}return s===void 0&&(s=setTimeout(G,e)),c}return _e.cancel=ee,_e.flush=te,_e}function q5(t){return Object.prototype.toString.call(t)==="[object Date]"}function zy(t,e,r,i){if(typeof r=="number"||q5(r)){const o=i-r,u=(r-e)/(t.dt||1/60),c=t.opts.stiffness*o,s=t.opts.damping*u,f=(c-s)*t.inv_mass,y=(u+f)*t.dt;return Math.abs(y)<t.opts.precision&&Math.abs(o)<t.opts.precision?i:(t.settled=!1,q5(r)?new Date(r.getTime()+y):r+y)}else{if(Array.isArray(r))return r.map((o,u)=>zy(t,e[u],r[u],i[u]));if(typeof r=="object"){const o={};for(const u in r)o[u]=zy(t,e[u],r[u],i[u]);return o}else throw new Error(`Cannot spring ${typeof r} values`)}}function FT(t,e={}){const r=zs(t),{stiffness:i=.15,damping:o=.8,precision:u=.01}=e;let c,s,f,y=t,b=t,A=1,I=0,C=!1;function N($,G={}){b=$;const Z=f={};return t==null||G.hard||O.stiffness>=1&&O.damping>=1?(C=!0,c=kb(),y=$,r.set(t=b),Promise.resolve()):(G.soft&&(I=1/((G.soft===!0?.5:+G.soft)*60),A=0),s||(c=kb(),C=!1,s=i9(ee=>{if(C)return C=!1,s=null,!1;A=Math.min(A+I,1);const te={inv_mass:A,opts:O,settled:!0,dt:(ee-c)*60/1e3},_e=zy(te,y,t,b);return c=ee,y=t,r.set(t=_e),te.settled&&(s=null),!te.settled})),new Promise(ee=>{s.promise.then(()=>{Z===f&&ee()})}))}const O={set:N,update:($,G)=>N($(b,t),G),subscribe:r.subscribe,stiffness:i,damping:o,precision:u};return O}function V5(t,e,r){const i=t.slice();return i[37]=e[r],i[39]=r,i}function H5(t){let e,r,i,o,u=(t[6]==="label"||t[7]==="label")&&$5(t);return{c(){e=Je("span"),u&&u.c(),this.h()},l(c){e=Qe(c,"SPAN",{class:!0,style:!0});var s=vt(e);u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","pip first"),ge(e,"style",r=t[14]+": 0%;"),ui(e,"selected",t[18](t[0])),ui(e,"in-range",t[17](t[0]))},m(c,s){dt(c,e,s),u&&u.m(e,null),i||(o=[Dr(e,"pointerdown",t[30]),Dr(e,"pointerup",t[31])],i=!0)},p(c,s){c[6]==="label"||c[7]==="label"?u?u.p(c,s):(u=$5(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null),s[0]&16384&&r!==(r=c[14]+": 0%;")&&ge(e,"style",r),s[0]&262145&&ui(e,"selected",c[18](c[0])),s[0]&131073&&ui(e,"in-range",c[17](c[0]))},d(c){c&&he(e),u&&u.d(),i=!1,oo(o)}}}function $5(t){let e,r=t[12](t[16](t[0]),0,0)+"",i,o=t[10]&&G5(t),u=t[11]&&W5(t);return{c(){e=Je("span"),o&&o.c(),i=Fi(r),u&&u.c(),this.h()},l(c){e=Qe(c,"SPAN",{class:!0});var s=vt(e);o&&o.l(s),i=Bi(s,r),u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","pipVal")},m(c,s){dt(c,e,s),o&&o.m(e,null),Ke(e,i),u&&u.m(e,null)},p(c,s){c[10]?o?o.p(c,s):(o=G5(c),o.c(),o.m(e,i)):o&&(o.d(1),o=null),s[0]&69633&&r!==(r=c[12](c[16](c[0]),0,0)+"")&&Dn(i,r),c[11]?u?u.p(c,s):(u=W5(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(c){c&&he(e),o&&o.d(),u&&u.d()}}}function G5(t){let e,r;return{c(){e=Je("span"),r=Fi(t[10]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[10]),o.forEach(he),this.h()},h(){ge(e,"class","pipVal-prefix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&1024&&Dn(r,i[10])},d(i){i&&he(e)}}}function W5(t){let e,r;return{c(){e=Je("span"),r=Fi(t[11]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[11]),o.forEach(he),this.h()},h(){ge(e,"class","pipVal-suffix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&2048&&Dn(r,i[11])},d(i){i&&he(e)}}}function Z5(t){let e,r=dn(Array(t[20]+1)),i=[];for(let o=0;o<r.length;o+=1)i[o]=Q5(V5(t,r,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=pn()},l(o){for(let u=0;u<i.length;u+=1)i[u].l(o);e=pn()},m(o,u){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,u);dt(o,e,u)},p(o,u){if(u[0]&8314435){r=dn(Array(o[20]+1));let c;for(c=0;c<r.length;c+=1){const s=V5(o,r,c);i[c]?i[c].p(s,u):(i[c]=Q5(s),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},d(o){o&&he(e),na(i,o)}}}function X5(t){let e,r,i,o,u,c=(t[6]==="label"||t[9]==="label")&&Y5(t);function s(...f){return t[33](t[39],...f)}return{c(){e=Je("span"),c&&c.c(),r=ir(),this.h()},l(f){e=Qe(f,"SPAN",{class:!0,style:!0});var y=vt(e);c&&c.l(y),r=nr(y),y.forEach(he),this.h()},h(){ge(e,"class","pip"),ge(e,"style",i=t[14]+": "+t[15](t[19](t[39]))+"%;"),ui(e,"selected",t[18](t[19](t[39]))),ui(e,"in-range",t[17](t[19](t[39])))},m(f,y){dt(f,e,y),c&&c.m(e,null),Ke(e,r),o||(u=[Dr(e,"pointerdown",t[32]),Dr(e,"pointerup",s)],o=!0)},p(f,y){t=f,t[6]==="label"||t[9]==="label"?c?c.p(t,y):(c=Y5(t),c.c(),c.m(e,r)):c&&(c.d(1),c=null),y[0]&573440&&i!==(i=t[14]+": "+t[15](t[19](t[39]))+"%;")&&ge(e,"style",i),y[0]&786432&&ui(e,"selected",t[18](t[19](t[39]))),y[0]&655360&&ui(e,"in-range",t[17](t[19](t[39])))},d(f){f&&he(e),c&&c.d(),o=!1,oo(u)}}}function Y5(t){let e,r=t[12](t[19](t[39]),t[39],t[15](t[19](t[39])))+"",i,o=t[10]&&K5(t),u=t[11]&&J5(t);return{c(){e=Je("span"),o&&o.c(),i=Fi(r),u&&u.c(),this.h()},l(c){e=Qe(c,"SPAN",{class:!0});var s=vt(e);o&&o.l(s),i=Bi(s,r),u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","pipVal")},m(c,s){dt(c,e,s),o&&o.m(e,null),Ke(e,i),u&&u.m(e,null)},p(c,s){c[10]?o?o.p(c,s):(o=K5(c),o.c(),o.m(e,i)):o&&(o.d(1),o=null),s[0]&561152&&r!==(r=c[12](c[19](c[39]),c[39],c[15](c[19](c[39])))+"")&&Dn(i,r),c[11]?u?u.p(c,s):(u=J5(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(c){c&&he(e),o&&o.d(),u&&u.d()}}}function K5(t){let e,r;return{c(){e=Je("span"),r=Fi(t[10]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[10]),o.forEach(he),this.h()},h(){ge(e,"class","pipVal-prefix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&1024&&Dn(r,i[10])},d(i){i&&he(e)}}}function J5(t){let e,r;return{c(){e=Je("span"),r=Fi(t[11]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[11]),o.forEach(he),this.h()},h(){ge(e,"class","pipVal-suffix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&2048&&Dn(r,i[11])},d(i){i&&he(e)}}}function Q5(t){let e=t[19](t[39])!==t[0]&&t[19](t[39])!==t[1],r,i=e&&X5(t);return{c(){i&&i.c(),r=pn()},l(o){i&&i.l(o),r=pn()},m(o,u){i&&i.m(o,u),dt(o,r,u)},p(o,u){u[0]&524291&&(e=o[19](o[39])!==o[0]&&o[19](o[39])!==o[1]),e?i?i.p(o,u):(i=X5(o),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(o){o&&he(r),i&&i.d(o)}}}function e4(t){let e,r,i,o,u=(t[6]==="label"||t[8]==="label")&&t4(t);return{c(){e=Je("span"),u&&u.c(),this.h()},l(c){e=Qe(c,"SPAN",{class:!0,style:!0});var s=vt(e);u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","pip last"),ge(e,"style",r=t[14]+": 100%;"),ui(e,"selected",t[18](t[1])),ui(e,"in-range",t[17](t[1]))},m(c,s){dt(c,e,s),u&&u.m(e,null),i||(o=[Dr(e,"pointerdown",t[34]),Dr(e,"pointerup",t[35])],i=!0)},p(c,s){c[6]==="label"||c[8]==="label"?u?u.p(c,s):(u=t4(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null),s[0]&16384&&r!==(r=c[14]+": 100%;")&&ge(e,"style",r),s[0]&262146&&ui(e,"selected",c[18](c[1])),s[0]&131074&&ui(e,"in-range",c[17](c[1]))},d(c){c&&he(e),u&&u.d(),i=!1,oo(o)}}}function t4(t){let e,r=t[12](t[16](t[1]),t[20],100)+"",i,o=t[10]&&r4(t),u=t[11]&&i4(t);return{c(){e=Je("span"),o&&o.c(),i=Fi(r),u&&u.c(),this.h()},l(c){e=Qe(c,"SPAN",{class:!0});var s=vt(e);o&&o.l(s),i=Bi(s,r),u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","pipVal")},m(c,s){dt(c,e,s),o&&o.m(e,null),Ke(e,i),u&&u.m(e,null)},p(c,s){c[10]?o?o.p(c,s):(o=r4(c),o.c(),o.m(e,i)):o&&(o.d(1),o=null),s[0]&1118210&&r!==(r=c[12](c[16](c[1]),c[20],100)+"")&&Dn(i,r),c[11]?u?u.p(c,s):(u=i4(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(c){c&&he(e),o&&o.d(),u&&u.d()}}}function r4(t){let e,r;return{c(){e=Je("span"),r=Fi(t[10]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[10]),o.forEach(he),this.h()},h(){ge(e,"class","pipVal-prefix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&1024&&Dn(r,i[10])},d(i){i&&he(e)}}}function i4(t){let e,r;return{c(){e=Je("span"),r=Fi(t[11]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[11]),o.forEach(he),this.h()},h(){ge(e,"class","pipVal-suffix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&2048&&Dn(r,i[11])},d(i){i&&he(e)}}}function BT(t){let e,r,i,o=(t[6]&&t[7]!==!1||t[7])&&H5(t),u=(t[6]&&t[9]!==!1||t[9])&&Z5(t),c=(t[6]&&t[8]!==!1||t[8])&&e4(t);return{c(){e=Je("div"),o&&o.c(),r=ir(),u&&u.c(),i=ir(),c&&c.c(),this.h()},l(s){e=Qe(s,"DIV",{class:!0});var f=vt(e);o&&o.l(f),r=nr(f),u&&u.l(f),i=nr(f),c&&c.l(f),f.forEach(he),this.h()},h(){ge(e,"class","rangePips"),ui(e,"disabled",t[5]),ui(e,"hoverable",t[4]),ui(e,"vertical",t[2]),ui(e,"reversed",t[3]),ui(e,"focus",t[13])},m(s,f){dt(s,e,f),o&&o.m(e,null),Ke(e,r),u&&u.m(e,null),Ke(e,i),c&&c.m(e,null)},p(s,f){s[6]&&s[7]!==!1||s[7]?o?o.p(s,f):(o=H5(s),o.c(),o.m(e,r)):o&&(o.d(1),o=null),s[6]&&s[9]!==!1||s[9]?u?u.p(s,f):(u=Z5(s),u.c(),u.m(e,i)):u&&(u.d(1),u=null),s[6]&&s[8]!==!1||s[8]?c?c.p(s,f):(c=e4(s),c.c(),c.m(e,null)):c&&(c.d(1),c=null),f[0]&32&&ui(e,"disabled",s[5]),f[0]&16&&ui(e,"hoverable",s[4]),f[0]&4&&ui(e,"vertical",s[2]),f[0]&8&&ui(e,"reversed",s[3]),f[0]&8192&&ui(e,"focus",s[13])},i:mi,o:mi,d(s){s&&he(e),o&&o.d(),u&&u.d(),c&&c.d()}}}function jT(t,e,r){let i,o,u,c,s,{range:f=!1}=e,{min:y=0}=e,{max:b=100}=e,{step:A=1}=e,{values:I=[(b+y)/2]}=e,{vertical:C=!1}=e,{reversed:N=!1}=e,{hoverable:O=!0}=e,{disabled:$=!1}=e,{pipstep:G=void 0}=e,{all:Z=!0}=e,{first:ee=void 0}=e,{last:te=void 0}=e,{rest:_e=void 0}=e,{prefix:le=""}=e,{suffix:we=""}=e,{formatter:ue=(Ae,ht)=>Ae}=e,{focus:ze=void 0}=e,{orientationStart:Ue=void 0}=e,{percentOf:Ce=void 0}=e,{moveHandle:Me=void 0}=e,{fixFloat:qe=void 0}=e,{normalisedClient:it=void 0}=e,xt;function yt(Ae){Ae=it(Ae),xt={x:Ae.clientX,y:Ae.clientY}}function $e(Ae,ht){if(ht=it(ht),!$){const Nt=Math.sqrt(Math.pow(xt.x-ht.clientX,2)+Math.pow(xt.y-ht.clientY,2));xt&&Nt<=5&&Me(void 0,Ae)}}const at=Ae=>{yt(Ae)},mt=Ae=>{$e(u(y),Ae)},Xe=Ae=>{yt(Ae)},wt=(Ae,ht)=>{$e(u(Ae),ht)},be=Ae=>{yt(Ae)},Be=Ae=>{$e(u(b),Ae)};return t.$$set=Ae=>{"range"in Ae&&r(23,f=Ae.range),"min"in Ae&&r(0,y=Ae.min),"max"in Ae&&r(1,b=Ae.max),"step"in Ae&&r(24,A=Ae.step),"values"in Ae&&r(25,I=Ae.values),"vertical"in Ae&&r(2,C=Ae.vertical),"reversed"in Ae&&r(3,N=Ae.reversed),"hoverable"in Ae&&r(4,O=Ae.hoverable),"disabled"in Ae&&r(5,$=Ae.disabled),"pipstep"in Ae&&r(26,G=Ae.pipstep),"all"in Ae&&r(6,Z=Ae.all),"first"in Ae&&r(7,ee=Ae.first),"last"in Ae&&r(8,te=Ae.last),"rest"in Ae&&r(9,_e=Ae.rest),"prefix"in Ae&&r(10,le=Ae.prefix),"suffix"in Ae&&r(11,we=Ae.suffix),"formatter"in Ae&&r(12,ue=Ae.formatter),"focus"in Ae&&r(13,ze=Ae.focus),"orientationStart"in Ae&&r(14,Ue=Ae.orientationStart),"percentOf"in Ae&&r(15,Ce=Ae.percentOf),"moveHandle"in Ae&&r(27,Me=Ae.moveHandle),"fixFloat"in Ae&&r(16,qe=Ae.fixFloat),"normalisedClient"in Ae&&r(28,it=Ae.normalisedClient)},t.$$.update=()=>{t.$$.dirty[0]&83886087&&r(29,i=G||((b-y)/A>=(C?50:100)?(b-y)/(C?10:20):1)),t.$$.dirty[0]&553648131&&r(20,o=parseInt((b-y)/(A*i),10)),t.$$.dirty[0]&553713665&&r(19,u=function(Ae){return qe(y+Ae*A*i)}),t.$$.dirty[0]&33619968&&r(18,c=function(Ae){return I.some(ht=>qe(ht)===qe(Ae))}),t.$$.dirty[0]&41943040&&r(17,s=function(Ae){if(f==="min")return I[0]>Ae;if(f==="max")return I[0]<Ae;if(f)return I[0]<Ae&&I[1]>Ae})},[y,b,C,N,O,$,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,qe,s,c,u,o,yt,$e,f,A,I,G,Me,it,i,at,mt,Xe,wt,be,Be]}class UT extends di{constructor(e){super(),pi(this,e,jT,BT,hi,{range:23,min:0,max:1,step:24,values:25,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:26,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:27,fixFloat:16,normalisedClient:28},null,[-1,-1])}}function n4(t,e,r){const i=t.slice();return i[65]=e[r],i[67]=r,i}function o4(t){let e,r=t[21](t[65],t[67],t[24](t[65]))+"",i,o=t[18]&&a4(t),u=t[19]&&s4(t);return{c(){e=Je("span"),o&&o.c(),i=Fi(r),u&&u.c(),this.h()},l(c){e=Qe(c,"SPAN",{class:!0});var s=vt(e);o&&o.l(s),i=Bi(s,r),u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","rangeFloat")},m(c,s){dt(c,e,s),o&&o.m(e,null),Ke(e,i),u&&u.m(e,null)},p(c,s){c[18]?o?o.p(c,s):(o=a4(c),o.c(),o.m(e,i)):o&&(o.d(1),o=null),s[0]&18874369&&r!==(r=c[21](c[65],c[67],c[24](c[65]))+"")&&Dn(i,r),c[19]?u?u.p(c,s):(u=s4(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(c){c&&he(e),o&&o.d(),u&&u.d()}}}function a4(t){let e,r;return{c(){e=Je("span"),r=Fi(t[18]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[18]),o.forEach(he),this.h()},h(){ge(e,"class","rangeFloat-prefix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&262144&&Dn(r,i[18])},d(i){i&&he(e)}}}function s4(t){let e,r;return{c(){e=Je("span"),r=Fi(t[19]),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Bi(o,t[19]),o.forEach(he),this.h()},h(){ge(e,"class","rangeFloat-suffix")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o[0]&524288&&Dn(r,i[19])},d(i){i&&he(e)}}}function l4(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N=t[7]&&o4(t);return{c(){e=Je("span"),r=Je("span"),i=ir(),N&&N.c(),this.h()},l(O){e=Qe(O,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var $=vt(e);r=Qe($,"SPAN",{class:!0}),vt(r).forEach(he),i=nr($),N&&N.l($),$.forEach(he),this.h()},h(){ge(r,"class","rangeNub"),ge(e,"role","slider"),ge(e,"class","rangeHandle"),ge(e,"data-handle",t[67]),ge(e,"style",o=t[29]+": "+t[30][t[67]]+"%; z-index: "+(t[27]===t[67]?3:2)+";"),ge(e,"aria-label",u=t[22][t[67]]),ge(e,"aria-valuemin",c=t[2]===!0&&t[67]===1?t[0][0]:t[3]),ge(e,"aria-valuemax",s=t[2]===!0&&t[67]===0?t[0][1]:t[4]),ge(e,"aria-valuenow",f=t[65]),ge(e,"aria-valuetext",y=""+(t[18]+t[21](t[65],t[67],t[24](t[65]))+t[19])),ge(e,"aria-orientation",b=t[6]?"vertical":"horizontal"),ge(e,"aria-disabled",t[10]),ge(e,"disabled",t[10]),ge(e,"tabindex",A=t[10]?-1:0),ui(e,"active",t[25]&&t[27]===t[67]),ui(e,"press",t[26]&&t[27]===t[67])},m(O,$){dt(O,e,$),Ke(e,r),Ke(e,i),N&&N.m(e,null),I||(C=[Dr(e,"blur",t[35]),Dr(e,"focus",t[36]),Dr(e,"keydown",t[37])],I=!0)},p(O,$){O[7]?N?N.p(O,$):(N=o4(O),N.c(),N.m(e,null)):N&&(N.d(1),N=null),$[0]&1744830464&&o!==(o=O[29]+": "+O[30][O[67]]+"%; z-index: "+(O[27]===O[67]?3:2)+";")&&ge(e,"style",o),$[0]&4194304&&u!==(u=O[22][O[67]])&&ge(e,"aria-label",u),$[0]&13&&c!==(c=O[2]===!0&&O[67]===1?O[0][0]:O[3])&&ge(e,"aria-valuemin",c),$[0]&21&&s!==(s=O[2]===!0&&O[67]===0?O[0][1]:O[4])&&ge(e,"aria-valuemax",s),$[0]&1&&f!==(f=O[65])&&ge(e,"aria-valuenow",f),$[0]&19660801&&y!==(y=""+(O[18]+O[21](O[65],O[67],O[24](O[65]))+O[19]))&&ge(e,"aria-valuetext",y),$[0]&64&&b!==(b=O[6]?"vertical":"horizontal")&&ge(e,"aria-orientation",b),$[0]&1024&&ge(e,"aria-disabled",O[10]),$[0]&1024&&ge(e,"disabled",O[10]),$[0]&1024&&A!==(A=O[10]?-1:0)&&ge(e,"tabindex",A),$[0]&167772160&&ui(e,"active",O[25]&&O[27]===O[67]),$[0]&201326592&&ui(e,"press",O[26]&&O[27]===O[67])},d(O){O&&he(e),N&&N.d(),I=!1,oo(C)}}}function u4(t){let e,r;return{c(){e=Je("span"),this.h()},l(i){e=Qe(i,"SPAN",{class:!0,style:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","rangeBar"),ge(e,"style",r=t[29]+": "+t[33](t[30])+"%; "+t[28]+": "+t[34](t[30])+"%;")},m(i,o){dt(i,e,o)},p(i,o){o[0]&1879048192&&r!==(r=i[29]+": "+i[33](i[30])+"%; "+i[28]+": "+i[34](i[30])+"%;")&&ge(e,"style",r)},d(i){i&&he(e)}}}function c4(t){let e,r;return e=new UT({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[29],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[25],percentOf:t[24],moveHandle:t[32],fixFloat:t[31],normalisedClient:o2}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o[0]&1&&(u.values=i[0]),o[0]&8&&(u.min=i[3]),o[0]&16&&(u.max=i[4]),o[0]&32&&(u.step=i[5]),o[0]&4&&(u.range=i[2]),o[0]&64&&(u.vertical=i[6]),o[0]&256&&(u.reversed=i[8]),o[0]&536870912&&(u.orientationStart=i[29]),o[0]&512&&(u.hoverable=i[9]),o[0]&1024&&(u.disabled=i[10]),o[0]&8192&&(u.all=i[13]),o[0]&16384&&(u.first=i[14]),o[0]&32768&&(u.last=i[15]),o[0]&65536&&(u.rest=i[16]),o[0]&4096&&(u.pipstep=i[12]),o[0]&262144&&(u.prefix=i[18]),o[0]&524288&&(u.suffix=i[19]),o[0]&1048576&&(u.formatter=i[20]),o[0]&33554432&&(u.focus=i[25]),o[0]&16777216&&(u.percentOf=i[24]),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function qT(t){let e,r,i,o,u,c,s=dn(t[0]),f=[];for(let A=0;A<s.length;A+=1)f[A]=l4(n4(t,s,A));let y=t[2]&&u4(t),b=t[11]&&c4(t);return{c(){e=Je("div");for(let A=0;A<f.length;A+=1)f[A].c();r=ir(),y&&y.c(),i=ir(),b&&b.c(),this.h()},l(A){e=Qe(A,"DIV",{id:!0,class:!0});var I=vt(e);for(let C=0;C<f.length;C+=1)f[C].l(I);r=nr(I),y&&y.l(I),i=nr(I),b&&b.l(I),I.forEach(he),this.h()},h(){ge(e,"id",t[17]),ge(e,"class","rangeSlider"),ui(e,"range",t[2]),ui(e,"disabled",t[10]),ui(e,"hoverable",t[9]),ui(e,"vertical",t[6]),ui(e,"reversed",t[8]),ui(e,"focus",t[25]),ui(e,"min",t[2]==="min"),ui(e,"max",t[2]==="max"),ui(e,"pips",t[11]),ui(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(A,I){dt(A,e,I);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(e,null);Ke(e,r),y&&y.m(e,null),Ke(e,i),b&&b.m(e,null),t[51](e),o=!0,u||(c=[Dr(window,"mousedown",t[40]),Dr(window,"touchstart",t[40]),Dr(window,"mousemove",t[41]),Dr(window,"touchmove",t[41]),Dr(window,"mouseup",t[42]),Dr(window,"touchend",t[43]),Dr(window,"keydown",t[44]),Dr(e,"mousedown",t[38]),Dr(e,"mouseup",t[39]),Dr(e,"touchstart",uc(t[38])),Dr(e,"touchend",uc(t[39]))],u=!0)},p(A,I){if(I[0]&1869350109|I[1]&112){s=dn(A[0]);let C;for(C=0;C<s.length;C+=1){const N=n4(A,s,C);f[C]?f[C].p(N,I):(f[C]=l4(N),f[C].c(),f[C].m(e,r))}for(;C<f.length;C+=1)f[C].d(1);f.length=s.length}A[2]?y?y.p(A,I):(y=u4(A),y.c(),y.m(e,i)):y&&(y.d(1),y=null),A[11]?b?(b.p(A,I),I[0]&2048&&We(b,1)):(b=c4(A),b.c(),We(b,1),b.m(e,null)):b&&(gn(),et(b,1,1,()=>{b=null}),yn()),(!o||I[0]&131072)&&ge(e,"id",A[17]),(!o||I[0]&4)&&ui(e,"range",A[2]),(!o||I[0]&1024)&&ui(e,"disabled",A[10]),(!o||I[0]&512)&&ui(e,"hoverable",A[9]),(!o||I[0]&64)&&ui(e,"vertical",A[6]),(!o||I[0]&256)&&ui(e,"reversed",A[8]),(!o||I[0]&33554432)&&ui(e,"focus",A[25]),(!o||I[0]&4)&&ui(e,"min",A[2]==="min"),(!o||I[0]&4)&&ui(e,"max",A[2]==="max"),(!o||I[0]&2048)&&ui(e,"pips",A[11]),(!o||I[0]&122880)&&ui(e,"pip-labels",A[13]==="label"||A[14]==="label"||A[15]==="label"||A[16]==="label")},i(A){o||(We(b),o=!0)},o(A){et(b),o=!1},d(A){A&&he(e),na(f,A),y&&y.d(),b&&b.d(),t[51](null),u=!1,oo(c)}}}function f4(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function o2(t){return t.type.includes("touch")?t.touches[0]||t.changedTouches[0]:t}function VT(t,e,r){let i,o,u,c,s,f,y=mi,b=()=>(y(),y=a8(yr,kt=>r(30,f=kt)),yr);t.$$.on_destroy.push(()=>y());let{slider:A=void 0}=e,{range:I=!1}=e,{pushy:C=!1}=e,{min:N=0}=e,{max:O=100}=e,{step:$=1}=e,{values:G=[(O+N)/2]}=e,{vertical:Z=!1}=e,{float:ee=!1}=e,{reversed:te=!1}=e,{hoverable:_e=!0}=e,{disabled:le=!1}=e,{pips:we=!1}=e,{pipstep:ue=void 0}=e,{all:ze=void 0}=e,{first:Ue=void 0}=e,{last:Ce=void 0}=e,{rest:Me=void 0}=e,{id:qe=void 0}=e,{prefix:it=""}=e,{suffix:xt=""}=e,{formatter:yt=(kt,fr,Qr)=>kt}=e,{handleFormatter:$e=yt}=e,{ariaLabels:at=[]}=e,{precision:mt=2}=e,{springValues:Xe={stiffness:.15,damping:.4}}=e;const wt=zh();let be=0,Be=!1,Ae=!1,ht=!1,Nt=!1,zt=G.length-1,Mt,Kt,yr;const Er=kt=>parseFloat(kt.toFixed(mt));function Jt(kt){const fr=A.querySelectorAll(".handle"),Qr=Array.prototype.includes.call(fr,kt),Ei=Array.prototype.some.call(fr,ki=>ki.contains(kt));return Qr||Ei}function It(kt){return I==="min"||I==="max"?kt.slice(0,1):I?kt.slice(0,2):kt}function Fr(){return A.getBoundingClientRect()}function Ft(kt){const fr=Fr();let Qr=0,Ei=0,ki=0;Z?(Qr=kt.clientY-fr.top,Ei=Qr/fr.height*100,Ei=te?Ei:100-Ei):(Qr=kt.clientX-fr.left,Ei=Qr/fr.width*100,Ei=te?100-Ei:Ei),ki=(O-N)/100*Ei+N;let Zn;return I===!0&&G[0]===G[1]?ki>G[1]?1:0:(Zn=G.indexOf([...G].sort((un,Rn)=>Math.abs(ki-un)-Math.abs(ki-Rn))[0]),Zn)}function ct(kt){const fr=Fr();let Qr=0,Ei=0,ki=0;Z?(Qr=kt.clientY-fr.top,Ei=Qr/fr.height*100,Ei=te?Ei:100-Ei):(Qr=kt.clientX-fr.left,Ei=Qr/fr.width*100,Ei=te?100-Ei:Ei),ki=(O-N)/100*Ei+N,mr(zt,ki)}function mr(kt,fr){return fr=u(fr),typeof kt>"u"&&(kt=zt),I&&(kt===0&&fr>G[1]?C?r(0,G[1]=fr,G):fr=G[1]:kt===1&&fr<G[0]&&(C?r(0,G[0]=fr,G):fr=G[0])),G[kt]!==fr&&r(0,G[kt]=fr,G),Kt!==fr&&(Ni(),Kt=fr),fr}function Jr(kt){return I==="min"?0:kt[0]}function dr(kt){return I==="max"?0:I==="min"?100-kt[0]:100-kt[1]}function zr(kt){Nt&&(r(25,Be=!1),Ae=!1,r(26,ht=!1))}function ri(kt){le||(r(27,zt=f4(kt.target)),r(25,Be=!0))}function Vr(kt){if(!le){const fr=f4(kt.target);let Qr=kt.ctrlKey||kt.metaKey||kt.shiftKey?$*10:$,Ei=!1;switch(kt.key){case"PageDown":Qr*=10;case"ArrowRight":case"ArrowUp":mr(fr,G[fr]+Qr),Ei=!0;break;case"PageUp":Qr*=10;case"ArrowLeft":case"ArrowDown":mr(fr,G[fr]-Qr),Ei=!0;break;case"Home":mr(fr,N),Ei=!0;break;case"End":mr(fr,O),Ei=!0;break}Ei&&(kt.preventDefault(),kt.stopPropagation())}}function _i(kt){if(!le){const fr=kt.target,Qr=o2(kt);r(25,Be=!0),Ae=!0,r(26,ht=!0),r(27,zt=Ft(Qr)),Mt=Kt=u(G[zt]),Or(),kt.type==="touchstart"&&!fr.matches(".pipVal")&&ct(Qr)}}function Hi(kt){kt.type==="touchend"&&Br(),r(26,ht=!1)}function Nr(kt){Nt=!1,Be&&kt.target!==A&&!A.contains(kt.target)&&r(25,Be=!1)}function ji(kt){le||Ae&&ct(o2(kt))}function Ui(kt){if(!le){const fr=kt.target;Ae&&((fr===A||A.contains(fr))&&(r(25,Be=!0),!Jt(fr)&&!fr.matches(".pipVal")&&ct(o2(kt))),Br())}Ae=!1,r(26,ht=!1)}function an(kt){Ae=!1,r(26,ht=!1)}function Gi(kt){le||(kt.target===A||A.contains(kt.target))&&(Nt=!0)}function Or(){!le&&wt("start",{activeHandle:zt,value:Mt,values:G.map(kt=>u(kt))})}function Br(){!le&&wt("stop",{activeHandle:zt,startValue:Mt,value:G[zt],values:G.map(kt=>u(kt))})}function Ni(){!le&&wt("change",{activeHandle:zt,startValue:Mt,previousValue:typeof Kt>"u"?Mt:Kt,value:G[zt],values:G.map(kt=>u(kt))})}function qi(kt){Ut[kt?"unshift":"push"](()=>{A=kt,r(1,A)})}return t.$$set=kt=>{"slider"in kt&&r(1,A=kt.slider),"range"in kt&&r(2,I=kt.range),"pushy"in kt&&r(45,C=kt.pushy),"min"in kt&&r(3,N=kt.min),"max"in kt&&r(4,O=kt.max),"step"in kt&&r(5,$=kt.step),"values"in kt&&r(0,G=kt.values),"vertical"in kt&&r(6,Z=kt.vertical),"float"in kt&&r(7,ee=kt.float),"reversed"in kt&&r(8,te=kt.reversed),"hoverable"in kt&&r(9,_e=kt.hoverable),"disabled"in kt&&r(10,le=kt.disabled),"pips"in kt&&r(11,we=kt.pips),"pipstep"in kt&&r(12,ue=kt.pipstep),"all"in kt&&r(13,ze=kt.all),"first"in kt&&r(14,Ue=kt.first),"last"in kt&&r(15,Ce=kt.last),"rest"in kt&&r(16,Me=kt.rest),"id"in kt&&r(17,qe=kt.id),"prefix"in kt&&r(18,it=kt.prefix),"suffix"in kt&&r(19,xt=kt.suffix),"formatter"in kt&&r(20,yt=kt.formatter),"handleFormatter"in kt&&r(21,$e=kt.handleFormatter),"ariaLabels"in kt&&r(22,at=kt.ariaLabels),"precision"in kt&&r(46,mt=kt.precision),"springValues"in kt&&r(47,Xe=kt.springValues)},t.$$.update=()=>{t.$$.dirty[0]&24&&r(50,o=function(kt){return kt<=N?N:kt>=O?O:kt}),t.$$.dirty[0]&56|t.$$.dirty[1]&524288&&r(49,u=function(kt){if(kt<=N)return Er(N);if(kt>=O)return Er(O);let fr=(kt-N)%$,Qr=kt-fr;return Math.abs(fr)*2>=$&&(Qr+=fr>0?$:-$),Qr=o(Qr),Er(Qr)}),t.$$.dirty[0]&24&&r(24,i=function(kt){let fr=(kt-N)/(O-N)*100;return isNaN(fr)||fr<=0?0:fr>=100?100:Er(fr)}),t.$$.dirty[0]&29360153|t.$$.dirty[1]&458752&&(Array.isArray(G)||(r(0,G=[(O+N)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),r(0,G=It(G.map(kt=>u(kt)))),be!==G.length?b(r(23,yr=FT(G.map(kt=>i(kt)),Xe))):yr.set(G.map(kt=>i(kt))),r(48,be=G.length),G.length>1&&!Array.isArray(at)&&console.warn("'ariaLabels' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),t.$$.dirty[0]&320&&r(29,c=Z?te?"top":"bottom":te?"right":"left"),t.$$.dirty[0]&320&&r(28,s=Z?te?"bottom":"top":te?"left":"right")},[G,A,I,N,O,$,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt,yt,$e,at,yr,i,Be,ht,zt,s,c,f,Er,mr,Jr,dr,zr,ri,Vr,_i,Hi,Nr,ji,Ui,an,Gi,C,mt,Xe,be,u,o,qi]}class HT extends di{constructor(e){super(),pi(this,e,VT,qT,hi,{slider:1,range:2,pushy:45,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,ariaLabels:22,precision:46,springValues:47},null,[-1,-1,-1])}}function $T(t){let e,r,i,o,u,c,s;function f(C){t[6](C)}function y(C){t[7](C)}function b(C){t[8](C)}function A(C){t[9](C)}let I={float:!0,pips:!0,first:"label",last:"label",rest:!1,suffix:t[3]};return t[4]!==void 0&&(I.values=t[4]),t[0]!==void 0&&(I.min=t[0]),t[1]!==void 0&&(I.max=t[1]),t[2]!==void 0&&(I.step=t[2]),r=new HT({props:I}),Ut.push(()=>Xt(r,"values",f)),Ut.push(()=>Xt(r,"min",y)),Ut.push(()=>Xt(r,"max",b)),Ut.push(()=>Xt(r,"step",A)),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(C){e=Qe(C,"DIV",{class:!0});var N=vt(e);Yt(r.$$.fragment,N),N.forEach(he),this.h()},h(){ge(e,"class","range-slider svelte-1k93vzh")},m(C,N){dt(C,e,N),$t(r,e,null),s=!0},p(C,[N]){const O={};N&8&&(O.suffix=C[3]),!i&&N&16&&(i=!0,O.values=C[4],er(()=>i=!1)),!o&&N&1&&(o=!0,O.min=C[0],er(()=>o=!1)),!u&&N&2&&(u=!0,O.max=C[1],er(()=>u=!1)),!c&&N&4&&(c=!0,O.step=C[2],er(()=>c=!1)),r.$set(O)},i(C){s||(We(r.$$.fragment,C),s=!0)},o(C){et(r.$$.fragment,C),s=!1},d(C){C&&he(e),Gt(r)}}}function GT(t,e,r){let{value:i}=e,{min:o}=e,{max:u}=e,{unit:c}=e,{step:s=1}=e,f=c==="%"?[i*100]:[i];const y=()=>{c==="%"?r(5,i=f[0]/100):r(5,i=f[0])};function b(N){f=N,r(4,f)}function A(N){o=N,r(0,o)}function I(N){u=N,r(1,u)}function C(N){s=N,r(2,s)}return t.$$set=N=>{"value"in N&&r(5,i=N.value),"min"in N&&r(0,o=N.min),"max"in N&&r(1,u=N.max),"unit"in N&&r(3,c=N.unit),"step"in N&&r(2,s=N.step)},t.$$.update=()=>{t.$$.dirty&16&&y()},[o,u,s,c,f,i,b,A,I,C]}let Za=class extends di{constructor(e){super(),pi(this,e,GT,$T,hi,{value:5,min:0,max:1,unit:3,step:2})}};function WT(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:100,step:1,unit:"%"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function ZT(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{const y=i==null?void 0:i.getStyle().layers.find(A=>A.id===o.id);let b;switch(y==null?void 0:y.type){case"background":b=i.getPaintProperty(o.id,"background-opacity");break;case"raster":b=i.getPaintProperty(o.id,"raster-opacity");break;case"symbol":b=i.getPaintProperty(o.id,"icon-opacity");break;case"line":b=i.getPaintProperty(o.id,"line-opacity");break;case"fill":b=i.getPaintProperty(o.id,"fill-opacity");break;case"circle":b=i.getPaintProperty(o.id,"circle-opacity");break;case"heatmap":b=i.getPaintProperty(o.id,"heatmap-opacity");break;case"fill-extrusion":b=i.getPaintProperty(o.id,"fill-extrusion-opacity");break}return b||(b=1),b})();const s=H_(()=>{if(!c)return;const y=i==null?void 0:i.getStyle().layers.find(b=>b.id===o.id);switch(y==null?void 0:y.type){case"background":i.setPaintProperty(o.id,"background-opacity",c);break;case"raster":i.setPaintProperty(o.id,"raster-opacity",c);break;case"symbol":i.setPaintProperty(o.id,"icon-opacity",c),i.setPaintProperty(o.id,"text-opacity",c);break;case"line":i.setPaintProperty(o.id,"line-opacity",c);break;case"fill":i.setPaintProperty(o.id,"fill-opacity",c);break;case"circle":i.setPaintProperty(o.id,"circle-opacity",c);break;case"heatmap":i.setPaintProperty(o.id,"heatmap-opacity",c);break;case"fill-extrusion":i.setPaintProperty(o.id,"fill-extrusion-opacity",c);break}},100);function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class lh extends di{constructor(e){super(),pi(this,e,ZT,WT,hi,{map:1,layer:2})}}var XT={grad:.9,turn:360,rad:360/(2*Math.PI)},kf=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},bl=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},u0=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},Mx=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},h4=function(t){return{r:u0(t.r,0,255),g:u0(t.g,0,255),b:u0(t.b,0,255),a:u0(t.a)}},cg=function(t){return{r:bl(t.r),g:bl(t.g),b:bl(t.b),a:bl(t.a,3)}},YT=/^#([0-9a-f]{3,8})$/i,F1=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Dx=function(t){var e=t.r,r=t.g,i=t.b,o=t.a,u=Math.max(e,r,i),c=u-Math.min(e,r,i),s=c?u===e?(r-i)/c:u===r?2+(i-e)/c:4+(e-r)/c:0;return{h:60*(s<0?s+6:s),s:u?c/u*100:0,v:u/255*100,a:o}},zx=function(t){var e=t.h,r=t.s,i=t.v,o=t.a;e=e/360*6,r/=100,i/=100;var u=Math.floor(e),c=i*(1-r),s=i*(1-(e-u)*r),f=i*(1-(1-e+u)*r),y=u%6;return{r:255*[i,s,c,c,f,i][y],g:255*[f,i,i,s,c,c][y],b:255*[c,c,f,i,i,s][y],a:o}},d4=function(t){return{h:Mx(t.h),s:u0(t.s,0,100),l:u0(t.l,0,100),a:u0(t.a)}},p4=function(t){return{h:bl(t.h),s:bl(t.s),l:bl(t.l),a:bl(t.a,3)}},m4=function(t){return zx((r=(e=t).s,{h:e.h,s:(r*=((i=e.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:e.a}));var e,r,i},wp=function(t){return{h:(e=Dx(t)).h,s:(o=(200-(r=e.s))*(i=e.v)/100)>0&&o<200?r*i/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,r,i,o},KT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,QT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ny={string:[[function(t){var e=YT.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?bl(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?bl(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=QT.exec(t)||eP.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:h4({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=KT.exec(t)||JT.exec(t);if(!e)return null;var r,i,o=d4({h:(r=e[1],i=e[2],i===void 0&&(i="deg"),Number(r)*(XT[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return m4(o)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,i=t.b,o=t.a,u=o===void 0?1:o;return kf(e)&&kf(r)&&kf(i)?h4({r:Number(e),g:Number(r),b:Number(i),a:Number(u)}):null},"rgb"],[function(t){var e=t.h,r=t.s,i=t.l,o=t.a,u=o===void 0?1:o;if(!kf(e)||!kf(r)||!kf(i))return null;var c=d4({h:Number(e),s:Number(r),l:Number(i),a:Number(u)});return m4(c)},"hsl"],[function(t){var e=t.h,r=t.s,i=t.v,o=t.a,u=o===void 0?1:o;if(!kf(e)||!kf(r)||!kf(i))return null;var c=function(s){return{h:Mx(s.h),s:u0(s.s,0,100),v:u0(s.v,0,100),a:u0(s.a)}}({h:Number(e),s:Number(r),v:Number(i),a:Number(u)});return zx(c)},"hsv"]]},g4=function(t,e){for(var r=0;r<e.length;r++){var i=e[r][0](t);if(i)return[i,e[r][1]]}return[null,void 0]},tP=function(t){return typeof t=="string"?g4(t.trim(),Ny.string):typeof t=="object"&&t!==null?g4(t,Ny.object):[null,void 0]},fg=function(t,e){var r=wp(t);return{h:r.h,s:u0(r.s+100*e,0,100),l:r.l,a:r.a}},hg=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},y4=function(t,e){var r=wp(t);return{h:r.h,s:r.s,l:u0(r.l+100*e,0,100),a:r.a}},Ry=function(){function t(e){this.parsed=tP(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return bl(hg(this.rgba),2)},t.prototype.isDark=function(){return hg(this.rgba)<.5},t.prototype.isLight=function(){return hg(this.rgba)>=.5},t.prototype.toHex=function(){return e=cg(this.rgba),r=e.r,i=e.g,o=e.b,c=(u=e.a)<1?F1(bl(255*u)):"","#"+F1(r)+F1(i)+F1(o)+c;var e,r,i,o,u,c},t.prototype.toRgb=function(){return cg(this.rgba)},t.prototype.toRgbString=function(){return e=cg(this.rgba),r=e.r,i=e.g,o=e.b,(u=e.a)<1?"rgba("+r+", "+i+", "+o+", "+u+")":"rgb("+r+", "+i+", "+o+")";var e,r,i,o,u},t.prototype.toHsl=function(){return p4(wp(this.rgba))},t.prototype.toHslString=function(){return e=p4(wp(this.rgba)),r=e.h,i=e.s,o=e.l,(u=e.a)<1?"hsla("+r+", "+i+"%, "+o+"%, "+u+")":"hsl("+r+", "+i+"%, "+o+"%)";var e,r,i,o,u},t.prototype.toHsv=function(){return e=Dx(this.rgba),{h:bl(e.h),s:bl(e.s),v:bl(e.v),a:bl(e.a,3)};var e},t.prototype.invert=function(){return Nu({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Nu(fg(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Nu(fg(this.rgba,-e))},t.prototype.grayscale=function(){return Nu(fg(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Nu(y4(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Nu(y4(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Nu({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):bl(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=wp(this.rgba);return typeof e=="number"?Nu({h:e,s:r.s,l:r.l,a:r.a}):bl(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Nu(e).toHex()},t}(),Nu=function(t){return t instanceof Ry?t:new Ry(t)},_4=[],rP=function(t){t.forEach(function(e){_4.indexOf(e)<0&&(e(Ry,Ny),_4.push(e))})},dg=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},pg=function(t){return .2126*dg(t.r)+.7152*dg(t.g)+.0722*dg(t.b)};function iP(t){t.prototype.luminance=function(){return e=pg(this.rgba),(r=2)===void 0&&(r=0),i===void 0&&(i=Math.pow(10,r)),Math.round(i*e)/i+0;var e,r,i},t.prototype.contrast=function(e){e===void 0&&(e="#FFF");var r,i,o,u,c,s,f,y=e instanceof t?e:new t(e);return u=this.rgba,c=y.toRgb(),s=pg(u),f=pg(c),r=s>f?(s+.05)/(f+.05):(f+.05)/(s+.05),(i=2)===void 0&&(i=0),o===void 0&&(o=Math.pow(10,i)),Math.floor(o*r)/o+0},t.prototype.isReadable=function(e,r){return e===void 0&&(e="#FFF"),r===void 0&&(r={}),this.contrast(e)>=(s=(c=(i=r).size)===void 0?"normal":c,(u=(o=i.level)===void 0?"AA":o)==="AAA"&&s==="normal"?7:u==="AA"&&s==="large"?3:4.5);var i,o,u,c,s}}const Tf=zs({ArrowLeft:0,ArrowUp:0,ArrowRight:0,ArrowDown:0}),$_=L0(Tf,t=>({...t,ArrowV:t.ArrowUp+t.ArrowDown,ArrowH:t.ArrowLeft+t.ArrowRight,ArrowVH:t.ArrowUp+t.ArrowDown+t.ArrowLeft+t.ArrowRight}));function G_(t,e=.001,r=.01){const u=Math.min(1,Math.max(1,t-50)/50);return e+(r-e)/2*(1-Math.cos(Math.PI*u))}const{window:sp}=u_;function nP(t){let e,r,i,o,u,c;var s=t[2].pickerIndicator;function f(y){return{props:{pos:y[9],isDark:y[5],hex:Nu({h:y[3],s:y[0],v:y[1],a:1}).toHex()}}}return s&&(r=Wa(s,f(t))),{c(){e=Je("div"),r&&Ht(r.$$.fragment),this.h()},l(y){e=Qe(y,"DIV",{class:!0,tabindex:!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuetext":!0});var b=vt(e);r&&Yt(r.$$.fragment,b),b.forEach(he),this.h()},h(){var y,b;ge(e,"class","picker svelte-uiwgvv"),ge(e,"tabindex","0"),Nn(e,"--color-bg",t[8]),ge(e,"aria-label","saturation and brightness picker (arrow keyboard navigation)"),ge(e,"aria-valuemin",0),ge(e,"aria-valuemax",100),ge(e,"aria-valuetext",i="saturation "+((y=t[9].x)==null?void 0:y.toFixed())+"%, brightness "+((b=t[9].y)==null?void 0:b.toFixed())+"%")},m(y,b){dt(y,e,b),r&&$t(r,e,null),t[18](e),o=!0,u||(c=[Dr(e,"mousedown",uc(t[10])),Dr(e,"touchstart",t[16]),Dr(e,"touchmove",uc(t[16])),Dr(e,"touchend",t[16])],u=!0)},p(y,b){var I,C;const A={};if(b&512&&(A.pos=y[9]),b&32&&(A.isDark=y[5]),b&11&&(A.hex=Nu({h:y[3],s:y[0],v:y[1],a:1}).toHex()),b&4&&s!==(s=y[2].pickerIndicator)){if(r){gn();const N=r;et(N.$$.fragment,1,0,()=>{Gt(N,1)}),yn()}s?(r=Wa(s,f(y)),Ht(r.$$.fragment),We(r.$$.fragment,1),$t(r,e,null)):r=null}else s&&r.$set(A);(!o||b&256)&&Nn(e,"--color-bg",y[8]),(!o||b&512&&i!==(i="saturation "+((I=y[9].x)==null?void 0:I.toFixed())+"%, brightness "+((C=y[9].y)==null?void 0:C.toFixed())+"%"))&&ge(e,"aria-valuetext",i)},i(y){o||(r&&We(r.$$.fragment,y),o=!0)},o(y){r&&et(r.$$.fragment,y),o=!1},d(y){y&&he(e),r&&Gt(r),t[18](null),u=!1,oo(c)}}}function oP(t){let e,r,i,o,u;var c=t[2].pickerWrapper;function s(f){return{props:{focused:f[7],toRight:f[4],$$slots:{default:[nP]},$$scope:{ctx:f}}}}return c&&(e=Wa(c,s(t))),{c(){e&&Ht(e.$$.fragment),r=pn()},l(f){e&&Yt(e.$$.fragment,f),r=pn()},m(f,y){e&&$t(e,f,y),dt(f,r,y),i=!0,o||(u=[Dr(sp,"mouseup",t[11]),Dr(sp,"mousedown",t[13]),Dr(sp,"mousemove",t[12]),Dr(sp,"keyup",t[14]),Dr(sp,"keydown",t[15])],o=!0)},p(f,[y]){const b={};if(y&128&&(b.focused=f[7]),y&16&&(b.toRight=f[4]),y&67109743&&(b.$$scope={dirty:y,ctx:f}),y&4&&c!==(c=f[2].pickerWrapper)){if(e){gn();const A=e;et(A.$$.fragment,1,0,()=>{Gt(A,1)}),yn()}c?(e=Wa(c,s(f)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,r.parentNode,r)):e=null}else c&&e.$set(b)},i(f){i||(e&&We(e.$$.fragment,f),i=!0)},o(f){e&&et(e.$$.fragment,f),i=!1},d(f){f&&he(r),e&&Gt(e,f),o=!1,oo(u)}}}function v4(t,e,r){return Math.min(Math.max(e,t),r)}function aP(t,e,r){let i,o;Ga(t,Tf,qe=>r(22,i=qe)),Ga(t,$_,qe=>r(23,o=qe));let{components:u}=e,{h:c}=e,{s}=e,{v:f}=e,{isOpen:y}=e,{toRight:b}=e,{isDark:A}=e,I,C=!1,N=!1,O,$,G,Z={x:100,y:0};function ee(qe){let it={x:qe.offsetX,y:qe.offsetY},xt=I.getBoundingClientRect().width,yt=I.getBoundingClientRect().height;r(0,s=v4(it.x/xt,0,1)*100),r(1,f=v4((yt-it.y)/yt,0,1)*100)}function te(qe){qe.button===0&&(C=!0,ee(qe))}function _e(){C=!1}function le(qe){C&&ee({offsetX:Math.max(0,Math.min(I.getBoundingClientRect().width,qe.clientX-I.getBoundingClientRect().left)),offsetY:Math.max(0,Math.min(I.getBoundingClientRect().height,qe.clientY-I.getBoundingClientRect().top))})}function we(qe){qe.target.isSameNode(I)||r(7,N=!1)}function ue(qe){var it;qe.key==="Tab"&&r(7,N=!!((it=document.activeElement)!=null&&it.isSameNode(I))),!qe.repeat&&N&&Ue()}function ze(qe){N&&o.ArrowVH&&(qe.preventDefault(),qe.repeat||Ue())}function Ue(){o.ArrowVH?O||($=0,O=window.setInterval(()=>{let qe=G_(++$);r(0,s=Math.min(100,Math.max(0,s+(i.ArrowRight-i.ArrowLeft)*qe*100))),r(1,f=Math.min(100,Math.max(0,f+(i.ArrowUp-i.ArrowDown)*qe*100)))},10)):O&&(clearInterval(O),O=void 0)}function Ce(qe){qe.preventDefault(),ee({offsetX:qe.changedTouches[0].clientX-I.getBoundingClientRect().left,offsetY:qe.changedTouches[0].clientY-I.getBoundingClientRect().top})}function Me(qe){Ut[qe?"unshift":"push"](()=>{I=qe,r(6,I)})}return t.$$set=qe=>{"components"in qe&&r(2,u=qe.components),"h"in qe&&r(3,c=qe.h),"s"in qe&&r(0,s=qe.s),"v"in qe&&r(1,f=qe.v),"isOpen"in qe&&r(17,y=qe.isOpen),"toRight"in qe&&r(4,b=qe.toRight),"isDark"in qe&&r(5,A=qe.isDark)},t.$$.update=()=>{t.$$.dirty&8&&typeof c=="number"&&r(8,G=Nu({h:c,s:100,v:100,a:1}).toHex()),t.$$.dirty&67&&typeof s=="number"&&typeof f=="number"&&I&&r(9,Z={x:s,y:100-f})},[s,f,u,c,b,A,I,N,G,Z,te,_e,le,we,ue,ze,Ce,y,Me]}class sP extends di{constructor(e){super(),pi(this,e,aP,oP,hi,{components:2,h:3,s:0,v:1,isOpen:17,toRight:4,isDark:5})}}const{window:B1}=u_;function lP(t){let e,r,i,o,u,c;var s=t[1].sliderIndicator;function f(y){return{props:{pos:y[4],toRight:y[2]}}}return s&&(r=Wa(s,f(t))),{c(){e=Je("div"),r&&Ht(r.$$.fragment),this.h()},l(y){e=Qe(y,"DIV",{class:!0,tabindex:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0});var b=vt(e);r&&Yt(r.$$.fragment,b),b.forEach(he),this.h()},h(){ge(e,"class","slider svelte-14nweqy"),ge(e,"tabindex","0"),ge(e,"aria-label","hue picker (arrow keyboard navigation)"),ge(e,"aria-valuemin",0),ge(e,"aria-valuemax",360),ge(e,"aria-valuenow",i=Math.round(t[0])),ui(e,"to-right",t[2])},m(y,b){dt(y,e,b),r&&$t(r,e,null),t[12](e),o=!0,u||(c=[Dr(e,"mousedown",uc(t[6])),Dr(e,"touchstart",t[11]),Dr(e,"touchmove",uc(t[11])),Dr(e,"touchend",t[11])],u=!0)},p(y,b){const A={};if(b&16&&(A.pos=y[4]),b&4&&(A.toRight=y[2]),b&2&&s!==(s=y[1].sliderIndicator)){if(r){gn();const I=r;et(I.$$.fragment,1,0,()=>{Gt(I,1)}),yn()}s?(r=Wa(s,f(y)),Ht(r.$$.fragment),We(r.$$.fragment,1),$t(r,e,null)):r=null}else s&&r.$set(A);(!o||b&1&&i!==(i=Math.round(y[0])))&&ge(e,"aria-valuenow",i),(!o||b&4)&&ui(e,"to-right",y[2])},i(y){o||(r&&We(r.$$.fragment,y),o=!0)},o(y){r&&et(r.$$.fragment,y),o=!1},d(y){y&&he(e),r&&Gt(r),t[12](null),u=!1,oo(c)}}}function uP(t){let e,r,i,o,u;var c=t[1].sliderWrapper;function s(f){return{props:{focused:f[5],toRight:f[2],$$slots:{default:[lP]},$$scope:{ctx:f}}}}return c&&(e=Wa(c,s(t))),{c(){e&&Ht(e.$$.fragment),r=pn()},l(f){e&&Yt(e.$$.fragment,f),r=pn()},m(f,y){e&&$t(e,f,y),dt(f,r,y),i=!0,o||(u=[Dr(B1,"mouseup",t[7]),Dr(B1,"mousemove",t[8]),Dr(B1,"keyup",t[9]),Dr(B1,"keydown",t[10])],o=!0)},p(f,[y]){const b={};if(y&32&&(b.focused=f[5]),y&4&&(b.toRight=f[2]),y&1048607&&(b.$$scope={dirty:y,ctx:f}),y&2&&c!==(c=f[1].sliderWrapper)){if(e){gn();const A=e;et(A.$$.fragment,1,0,()=>{Gt(A,1)}),yn()}c?(e=Wa(c,s(f)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,r.parentNode,r)):e=null}else c&&e.$set(b)},i(f){i||(e&&We(e.$$.fragment,f),i=!0)},o(f){e&&et(e.$$.fragment,f),i=!1},d(f){f&&he(r),e&&Gt(e,f),o=!1,oo(u)}}}function cP(t,e,r){let i,o;Ga(t,Tf,we=>r(16,i=we)),Ga(t,$_,we=>r(17,o=we));let{components:u}=e,{toRight:c}=e,s,f=!1,{h:y}=e,b=0,A=!1,I,C;function N(we){const ue=c?s.getBoundingClientRect().width:s.getBoundingClientRect().height,ze=Math.max(0,Math.min(ue,we));r(0,y=ze/ue*360)}function O(we){we.button===0&&(f=!0,N(c?we.offsetX:we.offsetY))}function $(){f=!1}function G(we){f&&N(c?we.clientX-s.getBoundingClientRect().left:we.clientY-s.getBoundingClientRect().top)}function Z(we){var ue;we.key==="Tab"&&r(5,A=!!((ue=document.activeElement)!=null&&ue.isSameNode(s))),!we.repeat&&A&&te()}function ee(we){A&&o.ArrowVH&&(we.preventDefault(),we.repeat||te())}function te(){o.ArrowVH?I||(C=0,I=window.setInterval(()=>{const we=G_(++C),ue=c?i.ArrowRight-i.ArrowLeft:i.ArrowDown-i.ArrowUp;r(0,y=Math.min(360,Math.max(0,y+ue*360*we)))},10)):I&&(clearInterval(I),I=void 0)}function _e(we){we.preventDefault(),N(c?we.changedTouches[0].clientX-s.getBoundingClientRect().left:we.changedTouches[0].clientY-s.getBoundingClientRect().top)}function le(we){Ut[we?"unshift":"push"](()=>{s=we,r(3,s)})}return t.$$set=we=>{"components"in we&&r(1,u=we.components),"toRight"in we&&r(2,c=we.toRight),"h"in we&&r(0,y=we.h)},t.$$.update=()=>{t.$$.dirty&9&&typeof y=="number"&&s&&r(4,b=100*y/360)},[y,u,c,s,b,A,O,$,G,Z,ee,_e,le]}class fP extends di{constructor(e){super(),pi(this,e,cP,uP,hi,{components:1,toRight:2,h:0})}}const{window:j1}=u_;function hP(t){let e,r,i,o,u,c,s;var f=t[0].alphaIndicator;function y(b){return{props:{pos:b[5],toRight:b[2]}}}return f&&(r=Wa(f,y(t))),{c(){e=Je("div"),r&&Ht(r.$$.fragment),this.h()},l(b){e=Qe(b,"DIV",{class:!0,tabindex:!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0});var A=vt(e);r&&Yt(r.$$.fragment,A),A.forEach(he),this.h()},h(){var b,A;ge(e,"class","alpha svelte-f2vq53"),ge(e,"tabindex","0"),Nn(e,"--alpha-color",(b=t[1])==null?void 0:b.substring(0,7)),ge(e,"aria-label","transparency picker (arrow keyboard navigation)"),ge(e,"aria-valuemin",0),ge(e,"aria-valuemax",100),ge(e,"aria-valuenow",i=Math.round(t[5])),ge(e,"aria-valuetext",o=((A=t[5])==null?void 0:A.toFixed())+"%"),ui(e,"to-right",t[2])},m(b,A){dt(b,e,A),r&&$t(r,e,null),t[14](e),u=!0,c||(s=[Dr(e,"mousedown",uc(t[6])),Dr(e,"touchstart",t[11]),Dr(e,"touchmove",uc(t[11])),Dr(e,"touchend",t[11])],c=!0)},p(b,A){var C,N;const I={};if(A&32&&(I.pos=b[5]),A&4&&(I.toRight=b[2]),A&1&&f!==(f=b[0].alphaIndicator)){if(r){gn();const O=r;et(O.$$.fragment,1,0,()=>{Gt(O,1)}),yn()}f?(r=Wa(f,y(b)),Ht(r.$$.fragment),We(r.$$.fragment,1),$t(r,e,null)):r=null}else f&&r.$set(I);(!u||A&2)&&Nn(e,"--alpha-color",(C=b[1])==null?void 0:C.substring(0,7)),(!u||A&32&&i!==(i=Math.round(b[5])))&&ge(e,"aria-valuenow",i),(!u||A&32&&o!==(o=((N=b[5])==null?void 0:N.toFixed())+"%"))&&ge(e,"aria-valuetext",o),(!u||A&4)&&ui(e,"to-right",b[2])},i(b){u||(r&&We(r.$$.fragment,b),u=!0)},o(b){r&&et(r.$$.fragment,b),u=!1},d(b){b&&he(e),r&&Gt(r),t[14](null),c=!1,oo(s)}}}function dP(t){let e,r,i,o,u;var c=t[0].alphaWrapper;function s(f){return{props:{focused:f[4],toRight:f[2],$$slots:{default:[hP]},$$scope:{ctx:f}}}}return c&&(e=Wa(c,s(t))),{c(){e&&Ht(e.$$.fragment),r=pn()},l(f){e&&Yt(e.$$.fragment,f),r=pn()},m(f,y){e&&$t(e,f,y),dt(f,r,y),i=!0,o||(u=[Dr(j1,"mouseup",t[7]),Dr(j1,"mousemove",t[8]),Dr(j1,"keyup",t[9]),Dr(j1,"keydown",t[10])],o=!0)},p(f,[y]){const b={};if(y&16&&(b.focused=f[4]),y&4&&(b.toRight=f[2]),y&4194351&&(b.$$scope={dirty:y,ctx:f}),y&1&&c!==(c=f[0].alphaWrapper)){if(e){gn();const A=e;et(A.$$.fragment,1,0,()=>{Gt(A,1)}),yn()}c?(e=Wa(c,s(f)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,r.parentNode,r)):e=null}else c&&e.$set(b)},i(f){i||(e&&We(e.$$.fragment,f),i=!0)},o(f){e&&et(e.$$.fragment,f),i=!1},d(f){f&&he(r),e&&Gt(e,f),o=!1,oo(u)}}}function pP(t,e,r){let i,o;Ga(t,Tf,ze=>r(18,i=ze)),Ga(t,$_,ze=>r(19,o=ze));let{components:u}=e,{isOpen:c}=e,{a:s=1}=e,{hex:f}=e,{toRight:y}=e,b,A=!1,I=!1,C,N,O;function $(ze){const Ue=y?b.getBoundingClientRect().width:b.getBoundingClientRect().height,Ce=Math.max(0,Math.min(Ue,ze));r(12,s=Ce/Ue)}function G(ze){ze.button===0&&(A=!0,$(y?ze.offsetX:ze.offsetY))}function Z(){A=!1}function ee(ze){A&&$(y?ze.clientX-b.getBoundingClientRect().left:ze.clientY-b.getBoundingClientRect().top)}function te(ze){var Ue;ze.key==="Tab"&&r(4,I=!!((Ue=document.activeElement)!=null&&Ue.isSameNode(b))),!ze.repeat&&I&&le()}function _e(ze){I&&o.ArrowVH&&(ze.preventDefault(),ze.repeat||le())}function le(){o.ArrowVH?C||(N=0,C=window.setInterval(()=>{const ze=G_(++N),Ue=y?i.ArrowRight-i.ArrowLeft:i.ArrowDown-i.ArrowUp;r(12,s=Math.min(1,Math.max(0,s+Ue*ze)))},10)):C&&(clearInterval(C),C=void 0)}function we(ze){ze.preventDefault(),$(y?ze.changedTouches[0].clientX-b.getBoundingClientRect().left:ze.changedTouches[0].clientY-b.getBoundingClientRect().top)}function ue(ze){Ut[ze?"unshift":"push"](()=>{b=ze,r(3,b)})}return t.$$set=ze=>{"components"in ze&&r(0,u=ze.components),"isOpen"in ze&&r(13,c=ze.isOpen),"a"in ze&&r(12,s=ze.a),"hex"in ze&&r(1,f=ze.hex),"toRight"in ze&&r(2,y=ze.toRight)},t.$$.update=()=>{t.$$.dirty&4104&&typeof s=="number"&&b&&r(5,O=100*s)},[u,f,y,b,I,O,G,Z,ee,te,_e,we,s,c,ue]}class mP extends di{constructor(e){super(),pi(this,e,pP,dP,hi,{components:0,isOpen:13,a:12,hex:1,toRight:2})}}function gP(t){let e,r,i,o,u,c,s,f,y,b=t[2]&&b4(t);return{c(){e=Je("div"),r=Je("input"),i=ir(),o=Je("input"),u=ir(),c=Je("input"),s=ir(),b&&b.c(),this.h()},l(A){e=Qe(A,"DIV",{class:!0});var I=vt(e);r=Qe(I,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),i=nr(I),o=Qe(I,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),u=nr(I),c=Qe(I,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),s=nr(I),b&&b.l(I),I.forEach(he),this.h()},h(){ge(r,"aria-label","hue chanel color"),r.value=t[8],ge(r,"type","number"),ge(r,"min","0"),ge(r,"max","360"),ge(r,"class","svelte-11z4jba"),ge(o,"aria-label","saturation chanel color"),o.value=t[7],ge(o,"type","number"),ge(o,"min","0"),ge(o,"max","100"),ge(o,"class","svelte-11z4jba"),ge(c,"aria-label","brightness chanel color"),c.value=t[6],ge(c,"type","number"),ge(c,"min","0"),ge(c,"max","100"),ge(c,"class","svelte-11z4jba"),ge(e,"class","input-container svelte-11z4jba")},m(A,I){dt(A,e,I),Ke(e,r),Ke(e,i),Ke(e,o),Ke(e,u),Ke(e,c),Ke(e,s),b&&b.m(e,null),f||(y=[Dr(r,"input",t[12]("h")),Dr(o,"input",t[12]("s")),Dr(c,"input",t[12]("v"))],f=!0)},p(A,I){I&256&&r.value!==A[8]&&(r.value=A[8]),I&128&&o.value!==A[7]&&(o.value=A[7]),I&64&&c.value!==A[6]&&(c.value=A[6]),A[2]?b?b.p(A,I):(b=b4(A),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},d(A){A&&he(e),b&&b.d(),f=!1,oo(y)}}}function yP(t){let e,r,i,o,u,c,s,f,y,b,A,I,C=t[2]&&w4(t);return{c(){e=Je("div"),r=Je("input"),o=ir(),u=Je("input"),s=ir(),f=Je("input"),b=ir(),C&&C.c(),this.h()},l(N){e=Qe(N,"DIV",{class:!0});var O=vt(e);r=Qe(O,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),o=nr(O),u=Qe(O,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),s=nr(O),f=Qe(O,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),b=nr(O),C&&C.l(O),O.forEach(he),this.h()},h(){ge(r,"aria-label","red chanel color"),r.value=i=t[0].r,ge(r,"type","number"),ge(r,"min","0"),ge(r,"max","255"),ge(r,"class","svelte-11z4jba"),ge(u,"aria-label","green chanel color"),u.value=c=t[0].g,ge(u,"type","number"),ge(u,"min","0"),ge(u,"max","255"),ge(u,"class","svelte-11z4jba"),ge(f,"aria-label","blue chanel color"),f.value=y=t[0].b,ge(f,"type","number"),ge(f,"min","0"),ge(f,"max","255"),ge(f,"class","svelte-11z4jba"),ge(e,"class","input-container svelte-11z4jba")},m(N,O){dt(N,e,O),Ke(e,r),Ke(e,o),Ke(e,u),Ke(e,s),Ke(e,f),Ke(e,b),C&&C.m(e,null),A||(I=[Dr(r,"input",t[11]("r")),Dr(u,"input",t[11]("g")),Dr(f,"input",t[11]("b"))],A=!0)},p(N,O){O&1&&i!==(i=N[0].r)&&r.value!==i&&(r.value=i),O&1&&c!==(c=N[0].g)&&u.value!==c&&(u.value=c),O&1&&y!==(y=N[0].b)&&f.value!==y&&(f.value=y),N[2]?C?C.p(N,O):(C=w4(N),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},d(N){N&&he(e),C&&C.d(),A=!1,oo(I)}}}function _P(t){let e,r,i,o,u,c=t[2]&&x4(t);return{c(){e=Je("div"),r=Je("input"),i=ir(),c&&c.c(),this.h()},l(s){e=Qe(s,"DIV",{class:!0});var f=vt(e);r=Qe(f,"INPUT",{style:!0,class:!0}),i=nr(f),c&&c.l(f),f.forEach(he),this.h()},h(){r.value=t[1],Nn(r,"flex","3"),ge(r,"class","svelte-11z4jba"),ge(e,"class","input-container svelte-11z4jba")},m(s,f){dt(s,e,f),Ke(e,r),Ke(e,i),c&&c.m(e,null),o||(u=Dr(r,"input",t[10]),o=!0)},p(s,f){f&2&&r.value!==s[1]&&(r.value=s[1]),s[2]?c?c.p(s,f):(c=x4(s),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(s){s&&he(e),c&&c.d(),o=!1,u()}}}function b4(t){let e,r,i;return{c(){e=Je("input"),this.h()},l(o){e=Qe(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ge(e,"aria-label","transparency chanel color"),e.value=t[5],ge(e,"type","number"),ge(e,"min","0"),ge(e,"max","1"),ge(e,"step","0.01"),ge(e,"class","svelte-11z4jba")},m(o,u){dt(o,e,u),r||(i=Dr(e,"input",t[12]("a")),r=!0)},p(o,u){u&32&&e.value!==o[5]&&(e.value=o[5])},d(o){o&&he(e),r=!1,i()}}}function w4(t){let e,r,i;return{c(){e=Je("input"),this.h()},l(o){e=Qe(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ge(e,"aria-label","transparency chanel color"),e.value=t[5],ge(e,"type","number"),ge(e,"min","0"),ge(e,"max","1"),ge(e,"step","0.01"),ge(e,"class","svelte-11z4jba")},m(o,u){dt(o,e,u),r||(i=Dr(e,"input",t[11]("a")),r=!0)},p(o,u){u&32&&e.value!==o[5]&&(e.value=o[5])},d(o){o&&he(e),r=!1,i()}}}function x4(t){let e,r,i;return{c(){e=Je("input"),this.h()},l(o){e=Qe(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ge(e,"aria-label","hexadecimal color"),e.value=t[5],ge(e,"type","number"),ge(e,"min","0"),ge(e,"max","1"),ge(e,"step","0.01"),ge(e,"class","svelte-11z4jba")},m(o,u){dt(o,e,u),r||(i=Dr(e,"input",t[11]("a")),r=!0)},p(o,u){u&32&&e.value!==o[5]&&(e.value=o[5])},d(o){o&&he(e),r=!1,i()}}}function k4(t){let e,r=t[9][t[4]]+"",i,o,u,c;return{c(){e=Je("button"),i=Fi(r),this.h()},l(s){e=Qe(s,"BUTTON",{"aria-label":!0,class:!0});var f=vt(e);i=Bi(f,r),f.forEach(he),this.h()},h(){ge(e,"aria-label",o="change inputs to "+t[9][(t[4]+1)%3]),ge(e,"class","svelte-11z4jba")},m(s,f){dt(s,e,f),Ke(e,i),u||(c=Dr(e,"click",t[14]),u=!0)},p(s,f){f&16&&r!==(r=s[9][s[4]]+"")&&Dn(i,r),f&16&&o!==(o="change inputs to "+s[9][(s[4]+1)%3])&&ge(e,"aria-label",o)},d(s){s&&he(e),u=!1,c()}}}function vP(t){let e,r;function i(s,f){return s[4]===0?_P:s[4]===1?yP:gP}let o=i(t),u=o(t),c=t[3]&&k4(t);return{c(){e=Je("div"),u.c(),r=ir(),c&&c.c(),this.h()},l(s){e=Qe(s,"DIV",{class:!0});var f=vt(e);u.l(f),r=nr(f),c&&c.l(f),f.forEach(he),this.h()},h(){ge(e,"class","text-input svelte-11z4jba")},m(s,f){dt(s,e,f),u.m(e,null),Ke(e,r),c&&c.m(e,null)},p(s,[f]){o===(o=i(s))&&u?u.p(s,f):(u.d(1),u=o(s),u&&(u.c(),u.m(e,r))),s[3]?c?c.p(s,f):(c=k4(s),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:mi,o:mi,d(s){s&&he(e),u.d(),c&&c.d()}}}const bP=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function wP(t,e,r){let i,o,u,c,{isAlpha:s}=e,{rgb:f}=e,{hsv:y}=e,{hex:b}=e,{canChangeMode:A}=e;const I=["HEX","RGB","HSV"];let C=0;function N(Z){const ee=Z.target;bP.test(ee.value)&&r(1,b=ee.value)}function O(Z){return function(ee){r(0,f={...f,[Z]:parseFloat(ee.target.value)})}}function $(Z){return function(ee){r(13,y={...y,[Z]:parseFloat(ee.target.value)})}}const G=()=>r(4,C=(C+1)%3);return t.$$set=Z=>{"isAlpha"in Z&&r(2,s=Z.isAlpha),"rgb"in Z&&r(0,f=Z.rgb),"hsv"in Z&&r(13,y=Z.hsv),"hex"in Z&&r(1,b=Z.hex),"canChangeMode"in Z&&r(3,A=Z.canChangeMode)},t.$$.update=()=>{t.$$.dirty&8192&&r(8,i=Math.round(y.h)),t.$$.dirty&8192&&r(7,o=Math.round(y.s)),t.$$.dirty&8192&&r(6,u=Math.round(y.v)),t.$$.dirty&8192&&r(5,c=y.a===void 0?1:Math.round(y.a*100)/100)},[f,b,s,A,C,c,u,o,i,I,N,O,$,y,G]}class xP extends di{constructor(e){super(),pi(this,e,wP,vP,hi,{isAlpha:2,rgb:0,hsv:13,hex:1,canChangeMode:3})}}function kP(t){let e;return{c(){e=Je("div"),this.h()},l(r){e=Qe(r,"DIV",{class:!0,style:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","slider-indicator svelte-13znx8u"),Nn(e,"top",t[0])},m(r,i){dt(r,e,i)},p(r,[i]){i&1&&Nn(e,"top",r[0])},i:mi,o:mi,d(r){r&&he(e)}}}function AP(t,e,r){let i,{pos:o}=e,{toRight:u}=e;return t.$$set=c=>{"pos"in c&&r(1,o=c.pos),"toRight"in c&&r(2,u=c.toRight)},t.$$.update=()=>{t.$$.dirty&2&&r(0,i=`calc(${o} * (var(--picker-height, 200px) - 14px) / 100 + 2px)`)},[i,o,u]}let A4=class extends di{constructor(e){super(),pi(this,e,AP,kP,hi,{pos:1,toRight:2})}};function SP(t){let e,r;return{c(){e=Je("div"),this.h()},l(i){e=Qe(i,"DIV",{class:!0,style:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","picker-indicator svelte-1nw247x"),ge(e,"style",r=`left: ${t[2]}; top: ${t[1]}; box-shadow: 0 0 4px ${t[0]?"white":"black"};`)},m(i,o){dt(i,e,o)},p(i,[o]){o&7&&r!==(r=`left: ${i[2]}; top: ${i[1]}; box-shadow: 0 0 4px ${i[0]?"white":"black"};`)&&ge(e,"style",r)},i:mi,o:mi,d(i){i&&he(e)}}}function EP(t,e,r){let i,o,{pos:u}=e,{hex:c}=e,{isDark:s}=e;return t.$$set=f=>{"pos"in f&&r(3,u=f.pos),"hex"in f&&r(4,c=f.hex),"isDark"in f&&r(0,s=f.isDark)},t.$$.update=()=>{t.$$.dirty&8&&r(2,i=`calc(${u.x} * (var(--picker-width, 200px) - 14px) / 100 + 2px)`),t.$$.dirty&8&&r(1,o=`calc(${u.y} * (var(--picker-height, 200px) - 14px) / 100 + 2px)`)},[s,o,i,u,c]}let CP=class extends di{constructor(e){super(),pi(this,e,EP,SP,hi,{pos:3,hex:4,isDark:0})}};function IP(t){let e,r;return{c:mi,l:mi,m(i,o){e||(r=[Dr(window,"keyup",t[0]),Dr(window,"keydown",t[1])],e=!0)},p:mi,i:mi,o:mi,d(i){e=!1,oo(r)}}}function LP(t,e,r){let i;Ga(t,Tf,c=>r(2,i=c));function o(c){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(c.key)&&(Lh(Tf,i[c.key]=0,i),Tf.set(i))}function u(c){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(c.key)&&(c.repeat||(Lh(Tf,i[c.key]=1,i),Tf.set(i)))}return[o,u]}class TP extends di{constructor(e){super(),pi(this,e,LP,IP,hi,{})}}function PP(t){let e,r;const i=t[3].default,o=wl(i,t,t[2],null);return{c(){e=Je("div"),o&&o.c(),this.h()},l(u){e=Qe(u,"DIV",{class:!0});var c=vt(e);o&&o.l(c),c.forEach(he),this.h()},h(){ge(e,"class","picker-wrapper svelte-1hhmcjg"),ui(e,"focused",t[0])},m(u,c){dt(u,e,c),o&&o.m(e,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&xl(o,i,u,u[2],r?Al(i,u[2],c,null):kl(u[2]),null),(!r||c&1)&&ui(e,"focused",u[0])},i(u){r||(We(o,u),r=!0)},o(u){et(o,u),r=!1},d(u){u&&he(e),o&&o.d(u)}}}function MP(t,e,r){let{$$slots:i={},$$scope:o}=e,{focused:u}=e,{toRight:c}=e;return t.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,i]}let DP=class extends di{constructor(e){super(),pi(this,e,MP,PP,hi,{focused:0,toRight:1})}};function zP(t){let e,r;const i=t[3].default,o=wl(i,t,t[2],null);return{c(){e=Je("div"),o&&o.c(),this.h()},l(u){e=Qe(u,"DIV",{class:!0});var c=vt(e);o&&o.l(c),c.forEach(he),this.h()},h(){ge(e,"class","slider-wrapper svelte-1udewng"),ui(e,"focused",t[0])},m(u,c){dt(u,e,c),o&&o.m(e,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&xl(o,i,u,u[2],r?Al(i,u[2],c,null):kl(u[2]),null),(!r||c&1)&&ui(e,"focused",u[0])},i(u){r||(We(o,u),r=!0)},o(u){et(o,u),r=!1},d(u){u&&he(e),o&&o.d(u)}}}function NP(t,e,r){let{$$slots:i={},$$scope:o}=e,{focused:u}=e,{toRight:c}=e;return t.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,i]}let S4=class extends di{constructor(e){super(),pi(this,e,NP,zP,hi,{focused:0,toRight:1})}};function RP(t){let e,r,i,o,u,c,s,f,y,b,A;return{c(){e=Je("label"),r=Je("div"),i=Je("input"),o=ir(),u=Je("div"),c=ir(),s=Je("div"),f=ir(),y=Fi(t[2]),this.h()},l(I){e=Qe(I,"LABEL",{class:!0});var C=vt(e);r=Qe(C,"DIV",{class:!0});var N=vt(r);i=Qe(N,"INPUT",{type:!0,"aria-haspopup":!0,class:!0}),o=nr(N),u=Qe(N,"DIV",{class:!0}),vt(u).forEach(he),c=nr(N),s=Qe(N,"DIV",{class:!0,style:!0}),vt(s).forEach(he),N.forEach(he),f=nr(C),y=Bi(C,t[2]),C.forEach(he),this.h()},h(){ge(i,"type","color"),i.value=t[1],ge(i,"aria-haspopup","dialog"),ge(i,"class","svelte-2ybi8r"),ge(u,"class","alpha svelte-2ybi8r"),ge(s,"class","color svelte-2ybi8r"),Nn(s,"background",t[1]),ge(r,"class","container svelte-2ybi8r"),ge(e,"class","svelte-2ybi8r")},m(I,C){dt(I,e,C),Ke(e,r),Ke(r,i),Ke(r,o),Ke(r,u),Ke(r,c),Ke(r,s),Ke(e,f),Ke(e,y),t[4](e),b||(A=[Dr(i,"click",uc(OP)),Dr(i,"mousedown",uc(FP)),Dr(e,"click",uc(BP)),Dr(e,"mousedown",uc(jP))],b=!0)},p(I,[C]){C&2&&(i.value=I[1]),C&2&&Nn(s,"background",I[1]),C&4&&Dn(y,I[2])},i:mi,o:mi,d(I){I&&he(e),t[4](null),b=!1,oo(A)}}}const OP=()=>{},FP=()=>{},BP=()=>{},jP=()=>{};function UP(t,e,r){let{labelWrapper:i}=e,{hex:o}=e,{label:u}=e,{isOpen:c}=e;function s(f){Ut[f?"unshift":"push"](()=>{i=f,r(0,i)})}return t.$$set=f=>{"labelWrapper"in f&&r(0,i=f.labelWrapper),"hex"in f&&r(1,o=f.hex),"label"in f&&r(2,u=f.label),"isOpen"in f&&r(3,c=f.isOpen)},[i,o,u,c,s]}class qP extends di{constructor(e){super(),pi(this,e,UP,RP,hi,{labelWrapper:0,hex:1,label:2,isOpen:3})}}function VP(t){let e,r,i;const o=t[5].default,u=wl(o,t,t[4],null);return{c(){e=Je("div"),u&&u.c(),this.h()},l(c){e=Qe(c,"DIV",{class:!0,role:!0,"aria-label":!0});var s=vt(e);u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","wrapper svelte-6lhts"),ge(e,"role",r=t[2]?"dialog":void 0),ge(e,"aria-label","color picker"),ui(e,"isOpen",t[1]),ui(e,"isPopup",t[2])},m(c,s){dt(c,e,s),u&&u.m(e,null),t[6](e),i=!0},p(c,[s]){u&&u.p&&(!i||s&16)&&xl(u,o,c,c[4],i?Al(o,c[4],s,null):kl(c[4]),null),(!i||s&4&&r!==(r=c[2]?"dialog":void 0))&&ge(e,"role",r),(!i||s&2)&&ui(e,"isOpen",c[1]),(!i||s&4)&&ui(e,"isPopup",c[2])},i(c){i||(We(u,c),i=!0)},o(c){et(u,c),i=!1},d(c){c&&he(e),u&&u.d(c),t[6](null)}}}function HP(t,e,r){let{$$slots:i={},$$scope:o}=e,{wrapper:u}=e,{isOpen:c}=e,{isPopup:s}=e,{toRight:f}=e;function y(b){Ut[b?"unshift":"push"](()=>{u=b,r(0,u)})}return t.$$set=b=>{"wrapper"in b&&r(0,u=b.wrapper),"isOpen"in b&&r(1,c=b.isOpen),"isPopup"in b&&r(2,s=b.isPopup),"toRight"in b&&r(3,f=b.toRight),"$$scope"in b&&r(4,o=b.$$scope)},[u,c,s,f,o,i,y]}let $P=class extends di{constructor(e){super(),pi(this,e,HP,VP,hi,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}};function E4(t,e,r){const i=t.slice();return i[9]=e[r].contrast,i[10]=e[r].hex,i[11]=e[r].placeholder,i[12]=e[r].reverse,i[13]=e[r].size,i}function C4(t){let e,r,i;var o=t[0].a11ySingleNotice;function u(c){return{props:{contrast:c[9],textColor:c[12]?c[10]:c[1],bgColor:c[12]?c[1]:c[10],placeholder:c[11],size:c[13]}}}return o&&(e=Wa(o,u(t))),{c(){e&&Ht(e.$$.fragment),r=pn()},l(c){e&&Yt(e.$$.fragment,c),r=pn()},m(c,s){e&&$t(e,c,s),dt(c,r,s),i=!0},p(c,s){const f={};if(s&16&&(f.contrast=c[9]),s&18&&(f.textColor=c[12]?c[10]:c[1]),s&18&&(f.bgColor=c[12]?c[1]:c[10]),s&16&&(f.placeholder=c[11]),s&16&&(f.size=c[13]),s&1&&o!==(o=c[0].a11ySingleNotice)){if(e){gn();const y=e;et(y.$$.fragment,1,0,()=>{Gt(y,1)}),yn()}o?(e=Wa(o,u(c)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,r.parentNode,r)):e=null}else o&&e.$set(f)},i(c){i||(e&&We(e.$$.fragment,c),i=!0)},o(c){e&&et(e.$$.fragment,c),i=!1},d(c){c&&he(r),e&&Gt(e,c)}}}function I4(t){let e,r;return{c(){e=Je("span"),r=new Tp(!1),this.h()},l(i){e=Qe(i,"SPAN",{class:!0});var o=vt(e);r=Pp(o,!1),o.forEach(he),this.h()},h(){r.a=null,ge(e,"class","svelte-1s4dluu")},m(i,o){dt(i,e,o),r.m(t[2],e)},p(i,o){o&4&&r.p(i[2])},d(i){i&&he(e)}}}function GP(t){let e,r,i,o,u,c,s,f,y;var b=t[0].a11ySummary;function A($){return{props:{a11yColors:$[4],hex:$[1]}}}b&&(i=Wa(b,A(t)));let I=dn(t[4]),C=[];for(let $=0;$<I.length;$+=1)C[$]=C4(E4(t,I,$));const N=$=>et(C[$],1,1,()=>{C[$]=null});let O=t[2]&&I4(t);return{c(){e=Je("details"),r=Je("summary"),i&&Ht(i.$$.fragment),u=ir(),c=Je("div");for(let $=0;$<C.length;$+=1)C[$].c();s=ir(),O&&O.c(),this.h()},l($){e=Qe($,"DETAILS",{class:!0});var G=vt(e);r=Qe(G,"SUMMARY",{tabindex:!0,class:!0});var Z=vt(r);i&&Yt(i.$$.fragment,Z),Z.forEach(he),u=nr(G),c=Qe(G,"DIV",{class:!0});var ee=vt(c);for(let te=0;te<C.length;te+=1)C[te].l(ee);s=nr(ee),O&&O.l(ee),ee.forEach(he),G.forEach(he),this.h()},h(){ge(r,"tabindex",o=t[5]?-1:void 0),ge(r,"class","svelte-1s4dluu"),ge(c,"class","svelte-1s4dluu"),ge(e,"class",f="a11y-notice "+(t[5]?"not-closable":"")+" svelte-1s4dluu"),e.open=t[3]},m($,G){dt($,e,G),Ke(e,r),i&&$t(i,r,null),Ke(e,u),Ke(e,c);for(let Z=0;Z<C.length;Z+=1)C[Z]&&C[Z].m(c,null);Ke(c,s),O&&O.m(c,null),y=!0},p($,[G]){const Z={};if(G&16&&(Z.a11yColors=$[4]),G&2&&(Z.hex=$[1]),G&1&&b!==(b=$[0].a11ySummary)){if(i){gn();const ee=i;et(ee.$$.fragment,1,0,()=>{Gt(ee,1)}),yn()}b?(i=Wa(b,A($)),Ht(i.$$.fragment),We(i.$$.fragment,1),$t(i,r,null)):i=null}else b&&i.$set(Z);if((!y||G&32&&o!==(o=$[5]?-1:void 0))&&ge(r,"tabindex",o),G&19){I=dn($[4]);let ee;for(ee=0;ee<I.length;ee+=1){const te=E4($,I,ee);C[ee]?(C[ee].p(te,G),We(C[ee],1)):(C[ee]=C4(te),C[ee].c(),We(C[ee],1),C[ee].m(c,s))}for(gn(),ee=I.length;ee<C.length;ee+=1)N(ee);yn()}$[2]?O?O.p($,G):(O=I4($),O.c(),O.m(c,null)):O&&(O.d(1),O=null),(!y||G&32&&f!==(f="a11y-notice "+($[5]?"not-closable":"")+" svelte-1s4dluu"))&&ge(e,"class",f),(!y||G&8)&&(e.open=$[3])},i($){if(!y){i&&We(i.$$.fragment,$);for(let G=0;G<I.length;G+=1)We(C[G]);y=!0}},o($){i&&et(i.$$.fragment,$),C=C.filter(Boolean);for(let G=0;G<C.length;G+=1)et(C[G]);y=!1},d($){$&&he(e),i&&Gt(i),na(C,$),O&&O.d()}}}function WP(t,e,r){let i,o,{components:u}=e,{a11yColors:c}=e,{hex:s}=e,{color:f}=e,{a11yGuidelines:y}=e,{isA11yOpen:b}=e,{isA11yClosable:A}=e;return t.$$set=I=>{"components"in I&&r(0,u=I.components),"a11yColors"in I&&r(6,c=I.a11yColors),"hex"in I&&r(1,s=I.hex),"color"in I&&r(7,f=I.color),"a11yGuidelines"in I&&r(2,y=I.a11yGuidelines),"isA11yOpen"in I&&r(3,b=I.isA11yOpen),"isA11yClosable"in I&&r(8,A=I.isA11yClosable)},t.$$.update=()=>{t.$$.dirty&264&&r(5,i=b&&!A),t.$$.dirty&192&&r(4,o=c.map(I=>({...I,contrast:f==null?void 0:f.contrast(I.hex)})))},[u,s,y,b,o,i,c,f,A]}class ZP extends di{constructor(e){super(),pi(this,e,WP,GP,hi,{components:0,a11yColors:6,hex:1,color:7,a11yGuidelines:2,isA11yOpen:3,isA11yClosable:8})}}function XP(t){let e,r,i=(t[2]||"Lorem Ipsum")+"",o,u,c,s,f,y,b=(t[3]>=10?t[3].toFixed(1):t[3])+"",A,I,C,N="AA",O,$,G="AAA";return{c(){e=Je("div"),r=Je("p"),o=Fi(i),c=ir(),s=Je("div"),f=Je("p"),y=Fi("contrast: "),A=Fi(b),I=ir(),C=Je("span"),C.textContent=N,O=ir(),$=Je("span"),$.textContent=G,this.h()},l(Z){e=Qe(Z,"DIV",{class:!0});var ee=vt(e);r=Qe(ee,"P",{class:!0,style:!0});var te=vt(r);o=Bi(te,i),te.forEach(he),c=nr(ee),s=Qe(ee,"DIV",{class:!0});var _e=vt(s);f=Qe(_e,"P",{class:!0});var le=vt(f);y=Bi(le,"contrast: "),A=Bi(le,b),le.forEach(he),I=nr(_e),C=Qe(_e,"SPAN",{class:!0,"data-svelte-h":!0}),vo(C)!=="svelte-16z76xm"&&(C.textContent=N),O=nr(_e),$=Qe(_e,"SPAN",{class:!0,"data-svelte-h":!0}),vo($)!=="svelte-y2ho91"&&($.textContent=G),_e.forEach(he),ee.forEach(he),this.h()},h(){ge(r,"class",u="lorem "+(t[4]==="large"&&"large")+" svelte-obnxge"),Nn(r,"color",t[0]),Nn(r,"background-color",t[1]),ge(f,"class","svelte-obnxge"),ge(C,"class","grade svelte-obnxge"),ui(C,"grade-ok",t[3]>(t[4]==="large"?3:4.5)),ge($,"class","grade svelte-obnxge"),ui($,"grade-ok",t[3]>(t[4]==="large"?4.5:7)),ge(s,"class","score svelte-obnxge"),ge(e,"class","a11y-single-notice svelte-obnxge")},m(Z,ee){dt(Z,e,ee),Ke(e,r),Ke(r,o),Ke(e,c),Ke(e,s),Ke(s,f),Ke(f,y),Ke(f,A),Ke(s,I),Ke(s,C),Ke(s,O),Ke(s,$)},p(Z,[ee]){ee&4&&i!==(i=(Z[2]||"Lorem Ipsum")+"")&&Dn(o,i),ee&16&&u!==(u="lorem "+(Z[4]==="large"&&"large")+" svelte-obnxge")&&ge(r,"class",u),ee&1&&Nn(r,"color",Z[0]),ee&2&&Nn(r,"background-color",Z[1]),ee&8&&b!==(b=(Z[3]>=10?Z[3].toFixed(1):Z[3])+"")&&Dn(A,b),ee&24&&ui(C,"grade-ok",Z[3]>(Z[4]==="large"?3:4.5)),ee&24&&ui($,"grade-ok",Z[3]>(Z[4]==="large"?4.5:7))},i:mi,o:mi,d(Z){Z&&he(e)}}}function YP(t,e,r){let{textColor:i}=e,{bgColor:o}=e,{placeholder:u=void 0}=e,{contrast:c=1}=e,{size:s=void 0}=e;return t.$$set=f=>{"textColor"in f&&r(0,i=f.textColor),"bgColor"in f&&r(1,o=f.bgColor),"placeholder"in f&&r(2,u=f.placeholder),"contrast"in f&&r(3,c=f.contrast),"size"in f&&r(4,s=f.size)},[i,o,u,c,s]}class KP extends di{constructor(e){super(),pi(this,e,YP,XP,hi,{textColor:0,bgColor:1,placeholder:2,contrast:3,size:4})}}function JP(t){let e;return{c(){e=Fi(t[0])},l(r){e=Bi(r,t[0])},m(r,i){dt(r,e,i)},p(r,[i]){i&1&&Dn(e,r[0])},i:mi,o:mi,d(r){r&&he(e)}}}function QP({contrast:t,size:e}){return t?e==="large"?t<3?2:t<4.5?1:0:t<4.5?2:t<7?1:0:1}function eM(t,e,r){let i,o,{a11yColors:u}=e,{hex:c}=e;return t.$$set=s=>{"a11yColors"in s&&r(1,u=s.a11yColors),"hex"in s&&r(2,c=s.hex)},t.$$.update=()=>{t.$$.dirty&2&&r(3,i=u.map(QP).reduce((s,f)=>s+f)),t.$$.dirty&8&&r(0,o=i?`⚠️ ${i} contrast grade${i&&"s"} fail`:"Contrast grade information")},[o,u,c,i]}class tM extends di{constructor(e){super(),pi(this,e,eM,JP,hi,{a11yColors:1,hex:2})}}function rM(t){let e;return{c(){e=Je("input"),this.h()},l(r){e=Qe(r,"INPUT",{type:!0}),this.h()},h(){ge(e,"type","hidden"),e.value=t[2]},m(r,i){dt(r,e,i)},p(r,i){i[0]&4&&(e.value=r[2])},i:mi,o:mi,d(r){r&&he(e)}}}function iM(t){let e,r,i,o,u;function c(b){t[26](b)}function s(b){t[27](b)}var f=t[21]().input;function y(b){let A={hex:b[2],label:b[6]};return b[19]!==void 0&&(A.labelWrapper=b[19]),b[3]!==void 0&&(A.isOpen=b[3]),{props:A}}return f&&(e=Wa(f,y(t)),Ut.push(()=>Xt(e,"labelWrapper",c)),Ut.push(()=>Xt(e,"isOpen",s))),{c(){e&&Ht(e.$$.fragment),o=pn()},l(b){e&&Yt(e.$$.fragment,b),o=pn()},m(b,A){e&&$t(e,b,A),dt(b,o,A),u=!0},p(b,A){const I={};if(A[0]&4&&(I.hex=b[2]),A[0]&64&&(I.label=b[6]),!r&&A[0]&524288&&(r=!0,I.labelWrapper=b[19],er(()=>r=!1)),!i&&A[0]&8&&(i=!0,I.isOpen=b[3],er(()=>i=!1)),f!==(f=b[21]().input)){if(e){gn();const C=e;et(C.$$.fragment,1,0,()=>{Gt(C,1)}),yn()}f?(e=Wa(f,y(b)),Ut.push(()=>Xt(e,"labelWrapper",c)),Ut.push(()=>Xt(e,"isOpen",s)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,o.parentNode,o)):e=null}else f&&e.$set(I)},i(b){u||(e&&We(e.$$.fragment,b),u=!0)},o(b){e&&et(e.$$.fragment,b),u=!1},d(b){b&&he(o),e&&Gt(e,b)}}}function L4(t){let e,r,i,o;function u(f){t[32](f)}function c(f){t[33](f)}let s={components:t[21](),hex:t[2],toRight:t[17]};return t[1].a!==void 0&&(s.a=t[1].a),t[3]!==void 0&&(s.isOpen=t[3]),e=new mP({props:s}),Ut.push(()=>Xt(e,"a",u)),Ut.push(()=>Xt(e,"isOpen",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};y[0]&4&&(b.hex=f[2]),y[0]&131072&&(b.toRight=f[17]),!r&&y[0]&2&&(r=!0,b.a=f[1].a,er(()=>r=!1)),!i&&y[0]&8&&(i=!0,b.isOpen=f[3],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function T4(t){let e,r,i,o,u,c;function s(I){t[34](I)}function f(I){t[35](I)}function y(I){t[36](I)}var b=t[21]().textInput;function A(I){let C={isAlpha:I[7],canChangeMode:I[10]};return I[2]!==void 0&&(C.hex=I[2]),I[0]!==void 0&&(C.rgb=I[0]),I[1]!==void 0&&(C.hsv=I[1]),{props:C}}return b&&(e=Wa(b,A(t)),Ut.push(()=>Xt(e,"hex",s)),Ut.push(()=>Xt(e,"rgb",f)),Ut.push(()=>Xt(e,"hsv",y))),{c(){e&&Ht(e.$$.fragment),u=pn()},l(I){e&&Yt(e.$$.fragment,I),u=pn()},m(I,C){e&&$t(e,I,C),dt(I,u,C),c=!0},p(I,C){const N={};if(C[0]&128&&(N.isAlpha=I[7]),C[0]&1024&&(N.canChangeMode=I[10]),!r&&C[0]&4&&(r=!0,N.hex=I[2],er(()=>r=!1)),!i&&C[0]&1&&(i=!0,N.rgb=I[0],er(()=>i=!1)),!o&&C[0]&2&&(o=!0,N.hsv=I[1],er(()=>o=!1)),b!==(b=I[21]().textInput)){if(e){gn();const O=e;et(O.$$.fragment,1,0,()=>{Gt(O,1)}),yn()}b?(e=Wa(b,A(I)),Ut.push(()=>Xt(e,"hex",s)),Ut.push(()=>Xt(e,"rgb",f)),Ut.push(()=>Xt(e,"hsv",y)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,u.parentNode,u)):e=null}else b&&e.$set(N)},i(I){c||(e&&We(e.$$.fragment,I),c=!0)},o(I){e&&et(e.$$.fragment,I),c=!1},d(I){I&&he(u),e&&Gt(e,I)}}}function P4(t){let e,r,i;var o=t[21]().a11yNotice;function u(c){return{props:{components:c[21](),a11yColors:c[12],color:c[4],hex:c[2],a11yGuidelines:c[13],isA11yOpen:c[14],isA11yClosable:c[15]}}}return o&&(e=Wa(o,u(t))),{c(){e&&Ht(e.$$.fragment),r=pn()},l(c){e&&Yt(e.$$.fragment,c),r=pn()},m(c,s){e&&$t(e,c,s),dt(c,r,s),i=!0},p(c,s){const f={};if(s[0]&4096&&(f.a11yColors=c[12]),s[0]&16&&(f.color=c[4]),s[0]&4&&(f.hex=c[2]),s[0]&8192&&(f.a11yGuidelines=c[13]),s[0]&16384&&(f.isA11yOpen=c[14]),s[0]&32768&&(f.isA11yClosable=c[15]),o!==(o=c[21]().a11yNotice)){if(e){gn();const y=e;et(y.$$.fragment,1,0,()=>{Gt(y,1)}),yn()}o?(e=Wa(o,u(c)),Ht(e.$$.fragment),We(e.$$.fragment,1),$t(e,r.parentNode,r)):e=null}else o&&e.$set(f)},i(c){i||(e&&We(e.$$.fragment,c),i=!0)},o(c){e&&et(e.$$.fragment,c),i=!1},d(c){c&&he(r),e&&Gt(e,c)}}}function nM(t){let e,r,i,o,u,c,s,f,y,b,A,I;function C(le){t[28](le)}function N(le){t[29](le)}function O(le){t[30](le)}let $={components:t[21](),h:t[1].h,toRight:t[17],isDark:t[5]};t[1].s!==void 0&&($.s=t[1].s),t[1].v!==void 0&&($.v=t[1].v),t[3]!==void 0&&($.isOpen=t[3]),e=new sP({props:$}),Ut.push(()=>Xt(e,"s",C)),Ut.push(()=>Xt(e,"v",N)),Ut.push(()=>Xt(e,"isOpen",O));function G(le){t[31](le)}let Z={components:t[21](),toRight:t[17]};t[1].h!==void 0&&(Z.h=t[1].h),c=new fP({props:Z}),Ut.push(()=>Xt(c,"h",G));let ee=t[7]&&L4(t),te=t[9]&&T4(t),_e=t[11]&&P4(t);return{c(){Ht(e.$$.fragment),u=ir(),Ht(c.$$.fragment),f=ir(),ee&&ee.c(),y=ir(),te&&te.c(),b=ir(),_e&&_e.c(),A=pn()},l(le){Yt(e.$$.fragment,le),u=nr(le),Yt(c.$$.fragment,le),f=nr(le),ee&&ee.l(le),y=nr(le),te&&te.l(le),b=nr(le),_e&&_e.l(le),A=pn()},m(le,we){$t(e,le,we),dt(le,u,we),$t(c,le,we),dt(le,f,we),ee&&ee.m(le,we),dt(le,y,we),te&&te.m(le,we),dt(le,b,we),_e&&_e.m(le,we),dt(le,A,we),I=!0},p(le,we){const ue={};we[0]&2&&(ue.h=le[1].h),we[0]&131072&&(ue.toRight=le[17]),we[0]&32&&(ue.isDark=le[5]),!r&&we[0]&2&&(r=!0,ue.s=le[1].s,er(()=>r=!1)),!i&&we[0]&2&&(i=!0,ue.v=le[1].v,er(()=>i=!1)),!o&&we[0]&8&&(o=!0,ue.isOpen=le[3],er(()=>o=!1)),e.$set(ue);const ze={};we[0]&131072&&(ze.toRight=le[17]),!s&&we[0]&2&&(s=!0,ze.h=le[1].h,er(()=>s=!1)),c.$set(ze),le[7]?ee?(ee.p(le,we),we[0]&128&&We(ee,1)):(ee=L4(le),ee.c(),We(ee,1),ee.m(y.parentNode,y)):ee&&(gn(),et(ee,1,1,()=>{ee=null}),yn()),le[9]?te?(te.p(le,we),we[0]&512&&We(te,1)):(te=T4(le),te.c(),We(te,1),te.m(b.parentNode,b)):te&&(gn(),et(te,1,1,()=>{te=null}),yn()),le[11]?_e?(_e.p(le,we),we[0]&2048&&We(_e,1)):(_e=P4(le),_e.c(),We(_e,1),_e.m(A.parentNode,A)):_e&&(gn(),et(_e,1,1,()=>{_e=null}),yn())},i(le){I||(We(e.$$.fragment,le),We(c.$$.fragment,le),We(ee),We(te),We(_e),I=!0)},o(le){et(e.$$.fragment,le),et(c.$$.fragment,le),et(ee),et(te),et(_e),I=!1},d(le){le&&(he(u),he(f),he(y),he(b),he(A)),Gt(e,le),Gt(c,le),ee&&ee.d(le),te&&te.d(le),_e&&_e.d(le)}}}function oM(t){let e,r,i,o,u,c,s,f,y,b,A;e=new TP({});const I=[iM,rM],C=[];function N(Z,ee){return Z[8]?0:1}o=N(t),u=C[o]=I[o](t);function O(Z){t[37](Z)}var $=t[21]().wrapper;function G(Z){let ee={isOpen:Z[3],isPopup:Z[16],toRight:Z[17],$$slots:{default:[nM]},$$scope:{ctx:Z}};return Z[20]!==void 0&&(ee.wrapper=Z[20]),{props:ee}}return $&&(s=Wa($,G(t)),Ut.push(()=>Xt(s,"wrapper",O))),{c(){Ht(e.$$.fragment),r=ir(),i=Je("span"),u.c(),c=ir(),s&&Ht(s.$$.fragment),this.h()},l(Z){Yt(e.$$.fragment,Z),r=nr(Z),i=Qe(Z,"SPAN",{class:!0});var ee=vt(i);u.l(ee),c=nr(ee),s&&Yt(s.$$.fragment,ee),ee.forEach(he),this.h()},h(){ge(i,"class","color-picker svelte-7ntk55")},m(Z,ee){$t(e,Z,ee),dt(Z,r,ee),dt(Z,i,ee),C[o].m(i,null),Ke(i,c),s&&$t(s,i,null),t[38](i),y=!0,b||(A=[Dr(window,"mousedown",t[22]),Dr(window,"keyup",t[23])],b=!0)},p(Z,ee){let te=o;o=N(Z),o===te?C[o].p(Z,ee):(gn(),et(C[te],1,1,()=>{C[te]=null}),yn(),u=C[o],u?u.p(Z,ee):(u=C[o]=I[o](Z),u.c()),We(u,1),u.m(i,c));const _e={};if(ee[0]&8&&(_e.isOpen=Z[3]),ee[0]&65536&&(_e.isPopup=Z[16]),ee[0]&131072&&(_e.toRight=Z[17]),ee[0]&196287|ee[1]&16384&&(_e.$$scope={dirty:ee,ctx:Z}),!f&&ee[0]&1048576&&(f=!0,_e.wrapper=Z[20],er(()=>f=!1)),$!==($=Z[21]().wrapper)){if(s){gn();const le=s;et(le.$$.fragment,1,0,()=>{Gt(le,1)}),yn()}$?(s=Wa($,G(Z)),Ut.push(()=>Xt(s,"wrapper",O)),Ht(s.$$.fragment),We(s.$$.fragment,1),$t(s,i,null)):s=null}else $&&s.$set(_e)},i(Z){y||(We(e.$$.fragment,Z),We(u),s&&We(s.$$.fragment,Z),y=!0)},o(Z){et(e.$$.fragment,Z),et(u),s&&et(s.$$.fragment,Z),y=!1},d(Z){Z&&(he(r),he(i)),Gt(e,Z),C[o].d(),s&&Gt(s),t[38](null),b=!1,oo(A)}}}function aM(t,e,r){rP([iP]);let{components:i={}}=e;const o=zh();let{label:u="Choose a color"}=e,{isAlpha:c=!0}=e,{isInput:s=!0}=e,{isTextInput:f=!0}=e,{canChangeMode:y=!0}=e,{isA11y:b=!1}=e,{a11yColors:A=[{hex:"#ffffff"}]}=e,{a11yGuidelines:I='<p style="margin: 0; font-size: 12px;">Learn more at <a href="https://webaim.org/articles/contrast/" target="_blank">WebAIM contrast guide</a></p>'}=e,{isA11yOpen:C=!1}=e,{isA11yClosable:N=!0}=e,{isPopup:O=s}=e,{isOpen:$=!s}=e,{toRight:G=!1}=e,{disableCloseClickOutside:Z=!1}=e,{rgb:ee={r:255,g:0,b:0,a:1}}=e,{hsv:te={h:0,s:100,v:100,a:1}}=e,{hex:_e="#ff0000"}=e,{color:le=void 0}=e,{isDark:we=!1}=e,ue={r:255,g:0,b:0,a:1},ze={h:0,s:100,v:100,a:1},Ue="#ff0000",Ce;const Me={sliderIndicator:A4,pickerIndicator:CP,alphaIndicator:A4,pickerWrapper:DP,sliderWrapper:S4,alphaWrapper:S4,textInput:xP,a11yNotice:ZP,a11ySingleNotice:KP,a11ySummary:tM,input:qP,wrapper:$P};function qe(){return{...Me,...i}}let it,xt;function yt({target:Jt}){s&&(it.contains(Jt)||it.isSameNode(Jt)?r(3,$=!$):$&&!xt.contains(Jt)&&!Z&&r(3,$=!1))}function $e(Jt){Jt.key==="Tab"&&O&&r(3,$=Ce==null?void 0:Ce.contains(document.activeElement))}function at(){te.h===ze.h&&te.s===ze.s&&te.v===ze.v&&te.a===ze.a&&ee.r===ue.r&&ee.g===ue.g&&ee.b===ue.b&&ee.a===ue.a&&_e===Ue||(te.a===void 0&&r(1,te.a=1,te),ze.a===void 0&&(ze.a=1),ee.a===void 0&&r(0,ee.a=1,ee),ue.a===void 0&&(ue.a=1),(_e==null?void 0:_e.substring(7))==="ff"&&r(2,_e=_e.substring(0,7)),(_e==null?void 0:_e.substring(7))==="ff"&&r(2,_e=_e.substring(0,7)),te.h!==ze.h||te.s!==ze.s||te.v!==ze.v||te.a!==ze.a?(r(4,le=Nu(te)),r(0,ee=le.toRgb()),r(2,_e=le.toHex())):ee.r!==ue.r||ee.g!==ue.g||ee.b!==ue.b||ee.a!==ue.a?(r(4,le=Nu(ee)),r(2,_e=le.toHex()),r(1,te=le.toHsv())):_e!==Ue&&(r(4,le=Nu(_e)),r(0,ee=le.toRgb()),r(1,te=le.toHsv())),le&&r(5,we=le.isDark()),ze=Object.assign({},te),ue=Object.assign({},ee),Ue=_e,o("input",{color:le,hsv:te,rgb:ee,hex:_e}))}function mt(Jt){it=Jt,r(19,it)}function Xe(Jt){$=Jt,r(3,$)}function wt(Jt){t.$$.not_equal(te.s,Jt)&&(te.s=Jt,r(1,te))}function be(Jt){t.$$.not_equal(te.v,Jt)&&(te.v=Jt,r(1,te))}function Be(Jt){$=Jt,r(3,$)}function Ae(Jt){t.$$.not_equal(te.h,Jt)&&(te.h=Jt,r(1,te))}function ht(Jt){t.$$.not_equal(te.a,Jt)&&(te.a=Jt,r(1,te))}function Nt(Jt){$=Jt,r(3,$)}function zt(Jt){_e=Jt,r(2,_e)}function Mt(Jt){ee=Jt,r(0,ee)}function Kt(Jt){te=Jt,r(1,te)}function yr(Jt){xt=Jt,r(20,xt)}function Er(Jt){Ut[Jt?"unshift":"push"](()=>{Ce=Jt,r(18,Ce)})}return t.$$set=Jt=>{"components"in Jt&&r(24,i=Jt.components),"label"in Jt&&r(6,u=Jt.label),"isAlpha"in Jt&&r(7,c=Jt.isAlpha),"isInput"in Jt&&r(8,s=Jt.isInput),"isTextInput"in Jt&&r(9,f=Jt.isTextInput),"canChangeMode"in Jt&&r(10,y=Jt.canChangeMode),"isA11y"in Jt&&r(11,b=Jt.isA11y),"a11yColors"in Jt&&r(12,A=Jt.a11yColors),"a11yGuidelines"in Jt&&r(13,I=Jt.a11yGuidelines),"isA11yOpen"in Jt&&r(14,C=Jt.isA11yOpen),"isA11yClosable"in Jt&&r(15,N=Jt.isA11yClosable),"isPopup"in Jt&&r(16,O=Jt.isPopup),"isOpen"in Jt&&r(3,$=Jt.isOpen),"toRight"in Jt&&r(17,G=Jt.toRight),"disableCloseClickOutside"in Jt&&r(25,Z=Jt.disableCloseClickOutside),"rgb"in Jt&&r(0,ee=Jt.rgb),"hsv"in Jt&&r(1,te=Jt.hsv),"hex"in Jt&&r(2,_e=Jt.hex),"color"in Jt&&r(4,le=Jt.color),"isDark"in Jt&&r(5,we=Jt.isDark)},t.$$.update=()=>{t.$$.dirty[0]&7&&(te||ee||_e)&&at()},[ee,te,_e,$,le,we,u,c,s,f,y,b,A,I,C,N,O,G,Ce,it,xt,qe,yt,$e,i,Z,mt,Xe,wt,be,Be,Ae,ht,Nt,zt,Mt,Kt,yr,Er]}class sM extends di{constructor(e){super(),pi(this,e,aM,oM,hi,{components:24,label:6,isAlpha:7,isInput:8,isTextInput:9,canChangeMode:10,isA11y:11,a11yColors:12,a11yGuidelines:13,isA11yOpen:14,isA11yClosable:15,isPopup:16,isOpen:3,toRight:17,disableCloseClickOutside:25,rgb:0,hsv:1,hex:2,color:4,isDark:5},null,[-1,-1])}}function lM(t){let e,r;return{c(){e=Je("div"),this.h()},l(i){e=Qe(i,"DIV",{class:!0,style:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","picker-indicator svelte-1nw247x"),ge(e,"style",r=`left: ${t[2]}; top: ${t[1]}; box-shadow: 0 0 4px ${t[0]?"white":"black"};`)},m(i,o){dt(i,e,o)},p(i,[o]){o&7&&r!==(r=`left: ${i[2]}; top: ${i[1]}; box-shadow: 0 0 4px ${i[0]?"white":"black"};`)&&ge(e,"style",r)},i:mi,o:mi,d(i){i&&he(e)}}}function uM(t,e,r){let i,o,{pos:u}=e,{hex:c}=e,{isDark:s}=e;return t.$$set=f=>{"pos"in f&&r(3,u=f.pos),"hex"in f&&r(4,c=f.hex),"isDark"in f&&r(0,s=f.isDark)},t.$$.update=()=>{t.$$.dirty&8&&r(2,i=`calc(${u.x} * (var(--picker-width, 260px) - 14px) / 100 + 2px)`),t.$$.dirty&8&&r(1,o=`calc(${u.y} * (var(--picker-height, 200px) - 14px) / 100 + 2px)`)},[s,o,i,u,c]}class cM extends di{constructor(e){super(),pi(this,e,uM,lM,hi,{pos:3,hex:4,isDark:0})}}function fM(t){let e,r;const i=t[3].default,o=wl(i,t,t[2],null);return{c(){e=Je("div"),o&&o.c(),this.h()},l(u){e=Qe(u,"DIV",{class:!0});var c=vt(e);o&&o.l(c),c.forEach(he),this.h()},h(){ge(e,"class","picker-wrapper svelte-607izz"),ui(e,"focused",t[0])},m(u,c){dt(u,e,c),o&&o.m(e,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&xl(o,i,u,u[2],r?Al(i,u[2],c,null):kl(u[2]),null),(!r||c&1)&&ui(e,"focused",u[0])},i(u){r||(We(o,u),r=!0)},o(u){et(o,u),r=!1},d(u){u&&he(e),o&&o.d(u)}}}function hM(t,e,r){let{$$slots:i={},$$scope:o}=e,{focused:u}=e,{toRight:c}=e;return t.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,i]}class dM extends di{constructor(e){super(),pi(this,e,hM,fM,hi,{focused:0,toRight:1})}}function pM(t){let e;return{c(){e=Je("div"),this.h()},l(r){e=Qe(r,"DIV",{class:!0,style:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","slider-indicator svelte-hspaza"),Nn(e,"left",t[0])},m(r,i){dt(r,e,i)},p(r,[i]){i&1&&Nn(e,"left",r[0])},i:mi,o:mi,d(r){r&&he(e)}}}function mM(t,e,r){let i,{pos:o}=e,{toRight:u}=e;return t.$$set=c=>{"pos"in c&&r(1,o=c.pos),"toRight"in c&&r(2,u=c.toRight)},t.$$.update=()=>{t.$$.dirty&2&&r(0,i=`calc(${o} * (var(--picker-width, 260px) - 20px) / 100 + 2px)`)},[i,o,u]}class M4 extends di{constructor(e){super(),pi(this,e,mM,pM,hi,{pos:1,toRight:2})}}function gM(t){let e,r;const i=t[3].default,o=wl(i,t,t[2],null);return{c(){e=Je("div"),o&&o.c(),this.h()},l(u){e=Qe(u,"DIV",{class:!0});var c=vt(e);o&&o.l(c),c.forEach(he),this.h()},h(){ge(e,"class","slider-wrapper svelte-1apx9th"),ui(e,"focused",t[0])},m(u,c){dt(u,e,c),o&&o.m(e,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&xl(o,i,u,u[2],r?Al(i,u[2],c,null):kl(u[2]),null),(!r||c&1)&&ui(e,"focused",u[0])},i(u){r||(We(o,u),r=!0)},o(u){et(o,u),r=!1},d(u){u&&he(e),o&&o.d(u)}}}function yM(t,e,r){let{$$slots:i={},$$scope:o}=e,{focused:u}=e,{toRight:c}=e;return t.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,i]}class D4 extends di{constructor(e){super(),pi(this,e,yM,gM,hi,{focused:0,toRight:1})}}function _M(t){let e,r,i;const o=t[5].default,u=wl(o,t,t[4],null);return{c(){e=Je("div"),u&&u.c(),this.h()},l(c){e=Qe(c,"DIV",{class:!0,role:!0,"aria-label":!0});var s=vt(e);u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","wrapper svelte-13oqf85"),ge(e,"role",r=t[2]?"dialog":void 0),ge(e,"aria-label","color picker"),ui(e,"isOpen",t[1]),ui(e,"isPopup",t[2])},m(c,s){dt(c,e,s),u&&u.m(e,null),t[6](e),i=!0},p(c,[s]){u&&u.p&&(!i||s&16)&&xl(u,o,c,c[4],i?Al(o,c[4],s,null):kl(c[4]),null),(!i||s&4&&r!==(r=c[2]?"dialog":void 0))&&ge(e,"role",r),(!i||s&2)&&ui(e,"isOpen",c[1]),(!i||s&4)&&ui(e,"isPopup",c[2])},i(c){i||(We(u,c),i=!0)},o(c){et(u,c),i=!1},d(c){c&&he(e),u&&u.d(c),t[6](null)}}}function vM(t,e,r){let{$$slots:i={},$$scope:o}=e,{wrapper:u}=e,{isOpen:c}=e,{isPopup:s}=e,{toRight:f}=e;function y(b){Ut[b?"unshift":"push"](()=>{u=b,r(0,u)})}return t.$$set=b=>{"wrapper"in b&&r(0,u=b.wrapper),"isOpen"in b&&r(1,c=b.isOpen),"isPopup"in b&&r(2,s=b.isPopup),"toRight"in b&&r(3,f=b.toRight),"$$scope"in b&&r(4,o=b.$$scope)},[u,c,s,f,o,i,y]}class bM extends di{constructor(e){super(),pi(this,e,vM,_M,hi,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}}const wM={sliderIndicator:M4,pickerIndicator:cM,alphaIndicator:M4,pickerWrapper:dM,sliderWrapper:D4,alphaWrapper:D4,wrapper:bM};var hc="top",f0="bottom",h0="right",dc="left",W_="auto",r1=[hc,f0,h0,dc],Ld="start",Bp="end",xM="clippingParents",Nx="viewport",lp="popper",kM="reference",z4=r1.reduce(function(t,e){return t.concat([e+"-"+Ld,e+"-"+Bp])},[]),Rx=[].concat(r1,[W_]).reduce(function(t,e){return t.concat([e,e+"-"+Ld,e+"-"+Bp])},[]),AM="beforeRead",SM="read",EM="afterRead",CM="beforeMain",IM="main",LM="afterMain",TM="beforeWrite",PM="write",MM="afterWrite",DM=[AM,SM,EM,CM,IM,LM,TM,PM,MM];function uf(t){return t?(t.nodeName||"").toLowerCase():null}function Wc(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Th(t){var e=Wc(t).Element;return t instanceof e||t instanceof Element}function c0(t){var e=Wc(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Z_(t){if(typeof ShadowRoot>"u")return!1;var e=Wc(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function zM(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var i=e.styles[r]||{},o=e.attributes[r]||{},u=e.elements[r];!c0(u)||!uf(u)||(Object.assign(u.style,i),Object.keys(o).forEach(function(c){var s=o[c];s===!1?u.removeAttribute(c):u.setAttribute(c,s===!0?"":s)}))})}function NM(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(i){var o=e.elements[i],u=e.attributes[i]||{},c=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:r[i]),s=c.reduce(function(f,y){return f[y]="",f},{});!c0(o)||!uf(o)||(Object.assign(o.style,s),Object.keys(u).forEach(function(f){o.removeAttribute(f)}))})}}const Ox={name:"applyStyles",enabled:!0,phase:"write",fn:zM,effect:NM,requires:["computeStyles"]};function of(t){return t.split("-")[0]}var Eh=Math.max,A2=Math.min,Td=Math.round;function Oy(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Fx(){return!/^((?!chrome|android).)*safari/i.test(Oy())}function Pd(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=t.getBoundingClientRect(),o=1,u=1;e&&c0(t)&&(o=t.offsetWidth>0&&Td(i.width)/t.offsetWidth||1,u=t.offsetHeight>0&&Td(i.height)/t.offsetHeight||1);var c=Th(t)?Wc(t):window,s=c.visualViewport,f=!Fx()&&r,y=(i.left+(f&&s?s.offsetLeft:0))/o,b=(i.top+(f&&s?s.offsetTop:0))/u,A=i.width/o,I=i.height/u;return{width:A,height:I,top:b,right:y+A,bottom:b+I,left:y,x:y,y:b}}function X_(t){var e=Pd(t),r=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:i}}function Bx(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Z_(r)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Nf(t){return Wc(t).getComputedStyle(t)}function RM(t){return["table","td","th"].indexOf(uf(t))>=0}function uh(t){return((Th(t)?t.ownerDocument:t.document)||window.document).documentElement}function X2(t){return uf(t)==="html"?t:t.assignedSlot||t.parentNode||(Z_(t)?t.host:null)||uh(t)}function N4(t){return!c0(t)||Nf(t).position==="fixed"?null:t.offsetParent}function OM(t){var e=/firefox/i.test(Oy()),r=/Trident/i.test(Oy());if(r&&c0(t)){var i=Nf(t);if(i.position==="fixed")return null}var o=X2(t);for(Z_(o)&&(o=o.host);c0(o)&&["html","body"].indexOf(uf(o))<0;){var u=Nf(o);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||e&&u.willChange==="filter"||e&&u.filter&&u.filter!=="none")return o;o=o.parentNode}return null}function i1(t){for(var e=Wc(t),r=N4(t);r&&RM(r)&&Nf(r).position==="static";)r=N4(r);return r&&(uf(r)==="html"||uf(r)==="body"&&Nf(r).position==="static")?e:r||OM(t)||e}function Y_(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xp(t,e,r){return Eh(t,A2(e,r))}function FM(t,e,r){var i=xp(t,e,r);return i>r?r:i}function jx(){return{top:0,right:0,bottom:0,left:0}}function Ux(t){return Object.assign({},jx(),t)}function qx(t,e){return e.reduce(function(r,i){return r[i]=t,r},{})}var BM=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Ux(typeof e!="number"?e:qx(e,r1))};function jM(t){var e,r=t.state,i=t.name,o=t.options,u=r.elements.arrow,c=r.modifiersData.popperOffsets,s=of(r.placement),f=Y_(s),y=[dc,h0].indexOf(s)>=0,b=y?"height":"width";if(!(!u||!c)){var A=BM(o.padding,r),I=X_(u),C=f==="y"?hc:dc,N=f==="y"?f0:h0,O=r.rects.reference[b]+r.rects.reference[f]-c[f]-r.rects.popper[b],$=c[f]-r.rects.reference[f],G=i1(u),Z=G?f==="y"?G.clientHeight||0:G.clientWidth||0:0,ee=O/2-$/2,te=A[C],_e=Z-I[b]-A[N],le=Z/2-I[b]/2+ee,we=xp(te,le,_e),ue=f;r.modifiersData[i]=(e={},e[ue]=we,e.centerOffset=we-le,e)}}function UM(t){var e=t.state,r=t.options,i=r.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||Bx(e.elements.popper,o)&&(e.elements.arrow=o))}const qM={name:"arrow",enabled:!0,phase:"main",fn:jM,effect:UM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Md(t){return t.split("-")[1]}var VM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function HM(t,e){var r=t.x,i=t.y,o=e.devicePixelRatio||1;return{x:Td(r*o)/o||0,y:Td(i*o)/o||0}}function R4(t){var e,r=t.popper,i=t.popperRect,o=t.placement,u=t.variation,c=t.offsets,s=t.position,f=t.gpuAcceleration,y=t.adaptive,b=t.roundOffsets,A=t.isFixed,I=c.x,C=I===void 0?0:I,N=c.y,O=N===void 0?0:N,$=typeof b=="function"?b({x:C,y:O}):{x:C,y:O};C=$.x,O=$.y;var G=c.hasOwnProperty("x"),Z=c.hasOwnProperty("y"),ee=dc,te=hc,_e=window;if(y){var le=i1(r),we="clientHeight",ue="clientWidth";if(le===Wc(r)&&(le=uh(r),Nf(le).position!=="static"&&s==="absolute"&&(we="scrollHeight",ue="scrollWidth")),le=le,o===hc||(o===dc||o===h0)&&u===Bp){te=f0;var ze=A&&le===_e&&_e.visualViewport?_e.visualViewport.height:le[we];O-=ze-i.height,O*=f?1:-1}if(o===dc||(o===hc||o===f0)&&u===Bp){ee=h0;var Ue=A&&le===_e&&_e.visualViewport?_e.visualViewport.width:le[ue];C-=Ue-i.width,C*=f?1:-1}}var Ce=Object.assign({position:s},y&&VM),Me=b===!0?HM({x:C,y:O},Wc(r)):{x:C,y:O};if(C=Me.x,O=Me.y,f){var qe;return Object.assign({},Ce,(qe={},qe[te]=Z?"0":"",qe[ee]=G?"0":"",qe.transform=(_e.devicePixelRatio||1)<=1?"translate("+C+"px, "+O+"px)":"translate3d("+C+"px, "+O+"px, 0)",qe))}return Object.assign({},Ce,(e={},e[te]=Z?O+"px":"",e[ee]=G?C+"px":"",e.transform="",e))}function $M(t){var e=t.state,r=t.options,i=r.gpuAcceleration,o=i===void 0?!0:i,u=r.adaptive,c=u===void 0?!0:u,s=r.roundOffsets,f=s===void 0?!0:s,y={placement:of(e.placement),variation:Md(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,R4(Object.assign({},y,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,R4(Object.assign({},y,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const GM={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$M,data:{}};var U1={passive:!0};function WM(t){var e=t.state,r=t.instance,i=t.options,o=i.scroll,u=o===void 0?!0:o,c=i.resize,s=c===void 0?!0:c,f=Wc(e.elements.popper),y=[].concat(e.scrollParents.reference,e.scrollParents.popper);return u&&y.forEach(function(b){b.addEventListener("scroll",r.update,U1)}),s&&f.addEventListener("resize",r.update,U1),function(){u&&y.forEach(function(b){b.removeEventListener("scroll",r.update,U1)}),s&&f.removeEventListener("resize",r.update,U1)}}const ZM={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:WM,data:{}};var XM={left:"right",right:"left",bottom:"top",top:"bottom"};function a2(t){return t.replace(/left|right|bottom|top/g,function(e){return XM[e]})}var YM={start:"end",end:"start"};function O4(t){return t.replace(/start|end/g,function(e){return YM[e]})}function K_(t){var e=Wc(t),r=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:r,scrollTop:i}}function J_(t){return Pd(uh(t)).left+K_(t).scrollLeft}function KM(t,e){var r=Wc(t),i=uh(t),o=r.visualViewport,u=i.clientWidth,c=i.clientHeight,s=0,f=0;if(o){u=o.width,c=o.height;var y=Fx();(y||!y&&e==="fixed")&&(s=o.offsetLeft,f=o.offsetTop)}return{width:u,height:c,x:s+J_(t),y:f}}function JM(t){var e,r=uh(t),i=K_(t),o=(e=t.ownerDocument)==null?void 0:e.body,u=Eh(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=Eh(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-i.scrollLeft+J_(t),f=-i.scrollTop;return Nf(o||r).direction==="rtl"&&(s+=Eh(r.clientWidth,o?o.clientWidth:0)-u),{width:u,height:c,x:s,y:f}}function Q_(t){var e=Nf(t),r=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+i)}function Vx(t){return["html","body","#document"].indexOf(uf(t))>=0?t.ownerDocument.body:c0(t)&&Q_(t)?t:Vx(X2(t))}function kp(t,e){var r;e===void 0&&(e=[]);var i=Vx(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),u=Wc(i),c=o?[u].concat(u.visualViewport||[],Q_(i)?i:[]):i,s=e.concat(c);return o?s:s.concat(kp(X2(c)))}function Fy(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function QM(t,e){var r=Pd(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function F4(t,e,r){return e===Nx?Fy(KM(t,r)):Th(e)?QM(e,r):Fy(JM(uh(t)))}function eD(t){var e=kp(X2(t)),r=["absolute","fixed"].indexOf(Nf(t).position)>=0,i=r&&c0(t)?i1(t):t;return Th(i)?e.filter(function(o){return Th(o)&&Bx(o,i)&&uf(o)!=="body"}):[]}function tD(t,e,r,i){var o=e==="clippingParents"?eD(t):[].concat(e),u=[].concat(o,[r]),c=u[0],s=u.reduce(function(f,y){var b=F4(t,y,i);return f.top=Eh(b.top,f.top),f.right=A2(b.right,f.right),f.bottom=A2(b.bottom,f.bottom),f.left=Eh(b.left,f.left),f},F4(t,c,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Hx(t){var e=t.reference,r=t.element,i=t.placement,o=i?of(i):null,u=i?Md(i):null,c=e.x+e.width/2-r.width/2,s=e.y+e.height/2-r.height/2,f;switch(o){case hc:f={x:c,y:e.y-r.height};break;case f0:f={x:c,y:e.y+e.height};break;case h0:f={x:e.x+e.width,y:s};break;case dc:f={x:e.x-r.width,y:s};break;default:f={x:e.x,y:e.y}}var y=o?Y_(o):null;if(y!=null){var b=y==="y"?"height":"width";switch(u){case Ld:f[y]=f[y]-(e[b]/2-r[b]/2);break;case Bp:f[y]=f[y]+(e[b]/2-r[b]/2);break}}return f}function jp(t,e){e===void 0&&(e={});var r=e,i=r.placement,o=i===void 0?t.placement:i,u=r.strategy,c=u===void 0?t.strategy:u,s=r.boundary,f=s===void 0?xM:s,y=r.rootBoundary,b=y===void 0?Nx:y,A=r.elementContext,I=A===void 0?lp:A,C=r.altBoundary,N=C===void 0?!1:C,O=r.padding,$=O===void 0?0:O,G=Ux(typeof $!="number"?$:qx($,r1)),Z=I===lp?kM:lp,ee=t.rects.popper,te=t.elements[N?Z:I],_e=tD(Th(te)?te:te.contextElement||uh(t.elements.popper),f,b,c),le=Pd(t.elements.reference),we=Hx({reference:le,element:ee,strategy:"absolute",placement:o}),ue=Fy(Object.assign({},ee,we)),ze=I===lp?ue:le,Ue={top:_e.top-ze.top+G.top,bottom:ze.bottom-_e.bottom+G.bottom,left:_e.left-ze.left+G.left,right:ze.right-_e.right+G.right},Ce=t.modifiersData.offset;if(I===lp&&Ce){var Me=Ce[o];Object.keys(Ue).forEach(function(qe){var it=[h0,f0].indexOf(qe)>=0?1:-1,xt=[hc,f0].indexOf(qe)>=0?"y":"x";Ue[qe]+=Me[xt]*it})}return Ue}function rD(t,e){e===void 0&&(e={});var r=e,i=r.placement,o=r.boundary,u=r.rootBoundary,c=r.padding,s=r.flipVariations,f=r.allowedAutoPlacements,y=f===void 0?Rx:f,b=Md(i),A=b?s?z4:z4.filter(function(N){return Md(N)===b}):r1,I=A.filter(function(N){return y.indexOf(N)>=0});I.length===0&&(I=A);var C=I.reduce(function(N,O){return N[O]=jp(t,{placement:O,boundary:o,rootBoundary:u,padding:c})[of(O)],N},{});return Object.keys(C).sort(function(N,O){return C[N]-C[O]})}function iD(t){if(of(t)===W_)return[];var e=a2(t);return[O4(t),e,O4(e)]}function nD(t){var e=t.state,r=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var o=r.mainAxis,u=o===void 0?!0:o,c=r.altAxis,s=c===void 0?!0:c,f=r.fallbackPlacements,y=r.padding,b=r.boundary,A=r.rootBoundary,I=r.altBoundary,C=r.flipVariations,N=C===void 0?!0:C,O=r.allowedAutoPlacements,$=e.options.placement,G=of($),Z=G===$,ee=f||(Z||!N?[a2($)]:iD($)),te=[$].concat(ee).reduce(function(Ae,ht){return Ae.concat(of(ht)===W_?rD(e,{placement:ht,boundary:b,rootBoundary:A,padding:y,flipVariations:N,allowedAutoPlacements:O}):ht)},[]),_e=e.rects.reference,le=e.rects.popper,we=new Map,ue=!0,ze=te[0],Ue=0;Ue<te.length;Ue++){var Ce=te[Ue],Me=of(Ce),qe=Md(Ce)===Ld,it=[hc,f0].indexOf(Me)>=0,xt=it?"width":"height",yt=jp(e,{placement:Ce,boundary:b,rootBoundary:A,altBoundary:I,padding:y}),$e=it?qe?h0:dc:qe?f0:hc;_e[xt]>le[xt]&&($e=a2($e));var at=a2($e),mt=[];if(u&&mt.push(yt[Me]<=0),s&&mt.push(yt[$e]<=0,yt[at]<=0),mt.every(function(Ae){return Ae})){ze=Ce,ue=!1;break}we.set(Ce,mt)}if(ue)for(var Xe=N?3:1,wt=function(ht){var Nt=te.find(function(zt){var Mt=we.get(zt);if(Mt)return Mt.slice(0,ht).every(function(Kt){return Kt})});if(Nt)return ze=Nt,"break"},be=Xe;be>0;be--){var Be=wt(be);if(Be==="break")break}e.placement!==ze&&(e.modifiersData[i]._skip=!0,e.placement=ze,e.reset=!0)}}const oD={name:"flip",enabled:!0,phase:"main",fn:nD,requiresIfExists:["offset"],data:{_skip:!1}};function B4(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function j4(t){return[hc,h0,f0,dc].some(function(e){return t[e]>=0})}function aD(t){var e=t.state,r=t.name,i=e.rects.reference,o=e.rects.popper,u=e.modifiersData.preventOverflow,c=jp(e,{elementContext:"reference"}),s=jp(e,{altBoundary:!0}),f=B4(c,i),y=B4(s,o,u),b=j4(f),A=j4(y);e.modifiersData[r]={referenceClippingOffsets:f,popperEscapeOffsets:y,isReferenceHidden:b,hasPopperEscaped:A},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":b,"data-popper-escaped":A})}const sD={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:aD};function lD(t,e,r){var i=of(t),o=[dc,hc].indexOf(i)>=0?-1:1,u=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,c=u[0],s=u[1];return c=c||0,s=(s||0)*o,[dc,h0].indexOf(i)>=0?{x:s,y:c}:{x:c,y:s}}function uD(t){var e=t.state,r=t.options,i=t.name,o=r.offset,u=o===void 0?[0,0]:o,c=Rx.reduce(function(b,A){return b[A]=lD(A,e.rects,u),b},{}),s=c[e.placement],f=s.x,y=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=y),e.modifiersData[i]=c}const cD={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uD};function fD(t){var e=t.state,r=t.name;e.modifiersData[r]=Hx({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const hD={name:"popperOffsets",enabled:!0,phase:"read",fn:fD,data:{}};function dD(t){return t==="x"?"y":"x"}function pD(t){var e=t.state,r=t.options,i=t.name,o=r.mainAxis,u=o===void 0?!0:o,c=r.altAxis,s=c===void 0?!1:c,f=r.boundary,y=r.rootBoundary,b=r.altBoundary,A=r.padding,I=r.tether,C=I===void 0?!0:I,N=r.tetherOffset,O=N===void 0?0:N,$=jp(e,{boundary:f,rootBoundary:y,padding:A,altBoundary:b}),G=of(e.placement),Z=Md(e.placement),ee=!Z,te=Y_(G),_e=dD(te),le=e.modifiersData.popperOffsets,we=e.rects.reference,ue=e.rects.popper,ze=typeof O=="function"?O(Object.assign({},e.rects,{placement:e.placement})):O,Ue=typeof ze=="number"?{mainAxis:ze,altAxis:ze}:Object.assign({mainAxis:0,altAxis:0},ze),Ce=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Me={x:0,y:0};if(le){if(u){var qe,it=te==="y"?hc:dc,xt=te==="y"?f0:h0,yt=te==="y"?"height":"width",$e=le[te],at=$e+$[it],mt=$e-$[xt],Xe=C?-ue[yt]/2:0,wt=Z===Ld?we[yt]:ue[yt],be=Z===Ld?-ue[yt]:-we[yt],Be=e.elements.arrow,Ae=C&&Be?X_(Be):{width:0,height:0},ht=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jx(),Nt=ht[it],zt=ht[xt],Mt=xp(0,we[yt],Ae[yt]),Kt=ee?we[yt]/2-Xe-Mt-Nt-Ue.mainAxis:wt-Mt-Nt-Ue.mainAxis,yr=ee?-we[yt]/2+Xe+Mt+zt+Ue.mainAxis:be+Mt+zt+Ue.mainAxis,Er=e.elements.arrow&&i1(e.elements.arrow),Jt=Er?te==="y"?Er.clientTop||0:Er.clientLeft||0:0,It=(qe=Ce==null?void 0:Ce[te])!=null?qe:0,Fr=$e+Kt-It-Jt,Ft=$e+yr-It,ct=xp(C?A2(at,Fr):at,$e,C?Eh(mt,Ft):mt);le[te]=ct,Me[te]=ct-$e}if(s){var mr,Jr=te==="x"?hc:dc,dr=te==="x"?f0:h0,zr=le[_e],ri=_e==="y"?"height":"width",Vr=zr+$[Jr],_i=zr-$[dr],Hi=[hc,dc].indexOf(G)!==-1,Nr=(mr=Ce==null?void 0:Ce[_e])!=null?mr:0,ji=Hi?Vr:zr-we[ri]-ue[ri]-Nr+Ue.altAxis,Ui=Hi?zr+we[ri]+ue[ri]-Nr-Ue.altAxis:_i,an=C&&Hi?FM(ji,zr,Ui):xp(C?ji:Vr,zr,C?Ui:_i);le[_e]=an,Me[_e]=an-zr}e.modifiersData[i]=Me}}const mD={name:"preventOverflow",enabled:!0,phase:"main",fn:pD,requiresIfExists:["offset"]};function gD(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function yD(t){return t===Wc(t)||!c0(t)?K_(t):gD(t)}function _D(t){var e=t.getBoundingClientRect(),r=Td(e.width)/t.offsetWidth||1,i=Td(e.height)/t.offsetHeight||1;return r!==1||i!==1}function vD(t,e,r){r===void 0&&(r=!1);var i=c0(e),o=c0(e)&&_D(e),u=uh(e),c=Pd(t,o,r),s={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(i||!i&&!r)&&((uf(e)!=="body"||Q_(u))&&(s=yD(e)),c0(e)?(f=Pd(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):u&&(f.x=J_(u))),{x:c.left+s.scrollLeft-f.x,y:c.top+s.scrollTop-f.y,width:c.width,height:c.height}}function bD(t){var e=new Map,r=new Set,i=[];t.forEach(function(u){e.set(u.name,u)});function o(u){r.add(u.name);var c=[].concat(u.requires||[],u.requiresIfExists||[]);c.forEach(function(s){if(!r.has(s)){var f=e.get(s);f&&o(f)}}),i.push(u)}return t.forEach(function(u){r.has(u.name)||o(u)}),i}function wD(t){var e=bD(t);return DM.reduce(function(r,i){return r.concat(e.filter(function(o){return o.phase===i}))},[])}function xD(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function kD(t){var e=t.reduce(function(r,i){var o=r[i.name];return r[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,r},{});return Object.keys(e).map(function(r){return e[r]})}var U4={placement:"bottom",modifiers:[],strategy:"absolute"};function q4(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function AD(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,i=r===void 0?[]:r,o=e.defaultOptions,u=o===void 0?U4:o;return function(s,f,y){y===void 0&&(y=u);var b={placement:"bottom",orderedModifiers:[],options:Object.assign({},U4,u),modifiersData:{},elements:{reference:s,popper:f},attributes:{},styles:{}},A=[],I=!1,C={state:b,setOptions:function(G){var Z=typeof G=="function"?G(b.options):G;O(),b.options=Object.assign({},u,b.options,Z),b.scrollParents={reference:Th(s)?kp(s):s.contextElement?kp(s.contextElement):[],popper:kp(f)};var ee=wD(kD([].concat(i,b.options.modifiers)));return b.orderedModifiers=ee.filter(function(te){return te.enabled}),N(),C.update()},forceUpdate:function(){if(!I){var G=b.elements,Z=G.reference,ee=G.popper;if(q4(Z,ee)){b.rects={reference:vD(Z,i1(ee),b.options.strategy==="fixed"),popper:X_(ee)},b.reset=!1,b.placement=b.options.placement,b.orderedModifiers.forEach(function(Ue){return b.modifiersData[Ue.name]=Object.assign({},Ue.data)});for(var te=0;te<b.orderedModifiers.length;te++){if(b.reset===!0){b.reset=!1,te=-1;continue}var _e=b.orderedModifiers[te],le=_e.fn,we=_e.options,ue=we===void 0?{}:we,ze=_e.name;typeof le=="function"&&(b=le({state:b,options:ue,name:ze,instance:C})||b)}}}},update:xD(function(){return new Promise(function($){C.forceUpdate(),$(b)})}),destroy:function(){O(),I=!0}};if(!q4(s,f))return C;C.setOptions(y).then(function($){!I&&y.onFirstUpdate&&y.onFirstUpdate($)});function N(){b.orderedModifiers.forEach(function($){var G=$.name,Z=$.options,ee=Z===void 0?{}:Z,te=$.effect;if(typeof te=="function"){var _e=te({state:b,name:G,instance:C,options:ee}),le=function(){};A.push(_e||le)}})}function O(){A.forEach(function($){return $()}),A=[]}return C}}var SD=[ZM,hD,GM,Ox,cD,oD,mD,qM,sD],$x=AD({defaultModifiers:SD});function ED(t){let e=null,r,i,o=t;const u=()=>{r!==void 0&&i!==void 0&&(e=$x(r,i,o))},c=()=>{e!==null&&(e.destroy(),e=null)},s=b=>"subscribe"in b?(f(b),{}):(r=b,u(),{destroy(){c()}}),f=b=>{const A=b.subscribe(I=>{r===void 0?(r=I,u()):(Object.assign(r,I),e==null||e.update())});R2(A)};return[s,(b,A)=>(i=b,o={...t,...A},u(),{update(I){o={...t,...I},e==null||e.setOptions(o)},destroy(){c()}}),()=>e]}var ev={};Object.defineProperty(ev,"__esModule",{value:!0});var Gx=ev.clickOutside=void 0;function CD(t,e){var r=function(i){return t&&!t.contains(i.target)&&!i.defaultPrevented&&e()};return document.addEventListener("click",r,!0),{destroy:function(){document.removeEventListener("click",r,!0)}}}Gx=ev.clickOutside=CD;function V4(t){let e,r;return{c(){e=Je("p"),r=Fi(t[1]),this.h()},l(i){e=Qe(i,"P",{class:!0});var o=vt(e);r=Bi(o,t[1]),o.forEach(he),this.h()},h(){ge(e,"class","label svelte-18w7g2m")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o&2&&Dn(r,i[1])},d(i){i&&he(e)}}}function H4(t){let e,r,i,o,u,c,s;function f(b){t[10](b)}let y={components:wM,isPopup:!0,isInput:!1,isTextInput:!1,isAlpha:!0,toRight:!0,isOpen:!0};return t[3]!==void 0&&(y.rgb=t[3]),r=new sM({props:y}),Ut.push(()=>Xt(r,"rgb",f)),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(b){e=Qe(b,"DIV",{id:!0,class:!0});var A=vt(e);Yt(r.$$.fragment,A),A.forEach(he),this.h()},h(){ge(e,"id","tooltip"),ge(e,"class","svelte-18w7g2m")},m(b,A){dt(b,e,A),$t(r,e,null),u=!0,c||(s=[Ih(t[6].call(null,e,t[7])),Ih(o=Gx.call(null,e,t[11]))],c=!0)},p(b,A){const I={};!i&&A&8&&(i=!0,I.rgb=b[3],er(()=>i=!1)),r.$set(I),o&&Lp(o.update)&&A&16&&o.update.call(null,b[11])},i(b){u||(We(r.$$.fragment,b),u=!0)},o(b){et(r.$$.fragment,b),u=!1},d(b){b&&he(e),Gt(r),c=!1,oo(s)}}}function ID(t){let e,r,i,o,u,c,s,f,y=!t[2]&&V4(t),b=t[4]&&H4(t);return{c(){e=Je("span"),r=Je("div"),i=ir(),y&&y.c(),o=ir(),b&&b.c(),u=pn(),this.h()},l(A){e=Qe(A,"SPAN",{class:!0,role:!0,tabindex:!0});var I=vt(e);r=Qe(I,"DIV",{class:!0,title:!0,style:!0}),vt(r).forEach(he),i=nr(I),y&&y.l(I),I.forEach(he),o=nr(A),b&&b.l(A),u=pn(),this.h()},h(){ge(r,"class","color-palette svelte-18w7g2m"),ge(r,"title",t[0]),Nn(r,"background",t[0]),ge(e,"class","paletter-control svelte-18w7g2m"),ge(e,"role","button"),ge(e,"tabindex","0")},m(A,I){dt(A,e,I),Ke(e,r),Ke(e,i),y&&y.m(e,null),dt(A,o,I),b&&b.m(A,I),dt(A,u,I),c=!0,s||(f=[Dr(e,"click",t[9]),Dr(e,"keydown",t[8]),Ih(t[5].call(null,e))],s=!0)},p(A,[I]){(!c||I&1)&&ge(r,"title",A[0]),(!c||I&1)&&Nn(r,"background",A[0]),A[2]?y&&(y.d(1),y=null):y?y.p(A,I):(y=V4(A),y.c(),y.m(e,null)),A[4]?b?(b.p(A,I),I&16&&We(b,1)):(b=H4(A),b.c(),We(b,1),b.m(u.parentNode,u)):b&&(gn(),et(b,1,1,()=>{b=null}),yn())},i(A){c||(We(b),c=!0)},o(A){et(b),c=!1},d(A){A&&(he(e),he(o),he(u)),y&&y.d(),b&&b.d(A),s=!1,oo(f)}}}function LD(t,e,r){let{color:i}=e,{label:o="Choose a color"}=e,{hideLabel:u=!1}=e,c,s=!1;const f=zh(),[y,b]=ED({placement:"bottom",strategy:"fixed"}),A={modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{mainAxis:!0}}]},I=()=>{const Z=Id(i),ee=Z.rgb();r(3,c={r:ee[0],g:ee[1],b:ee[2],a:Z.alpha()})},C=()=>{c&&(r(0,i=Id([c.r,c.g,c.b,c.a]).css()),f("change",{color:i}))},N=Z=>{Z.key==="Enter"&&r(4,s=!s)},O=()=>r(4,s=!s);function $(Z){c=Z,r(3,c)}const G=()=>r(4,s=!1);return t.$$set=Z=>{"color"in Z&&r(0,i=Z.color),"label"in Z&&r(1,o=Z.label),"hideLabel"in Z&&r(2,u=Z.hideLabel)},t.$$.update=()=>{t.$$.dirty&1&&I(),t.$$.dirty&8&&C()},[i,o,u,c,s,y,b,A,N,O,$,G]}class tv extends di{constructor(e){super(),pi(this,e,LD,ID,hi,{color:0,label:1,hideLabel:2})}}function $4(t,e,r){const i=t.slice();return i[8]=e[r],i[9]=e,i[10]=r,i}function TD(t){let e,r,i=dn(t[0].stops),o=[];for(let c=0;c<i.length;c+=1)o[c]=G4($4(t,i,c));const u=c=>et(o[c],1,1,()=>{o[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();e=pn()},l(c){for(let s=0;s<o.length;s+=1)o[s].l(c);e=pn()},m(c,s){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(c,s);dt(c,e,s),r=!0},p(c,s){if(s&3){i=dn(c[0].stops);let f;for(f=0;f<i.length;f+=1){const y=$4(c,i,f);o[f]?(o[f].p(y,s),We(o[f],1)):(o[f]=G4(y),o[f].c(),We(o[f],1),o[f].m(e.parentNode,e))}for(gn(),f=i.length;f<o.length;f+=1)u(f);yn()}},i(c){if(!r){for(let s=0;s<i.length;s+=1)We(o[s]);r=!0}},o(c){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)et(o[s]);r=!1},d(c){c&&he(e),na(o,c)}}}function PD(t){let e,r,i;function o(c){t[5](c)}let u={};return t[0]!==void 0&&(u.color=t[0]),e=new tv({props:u}),Ut.push(()=>Xt(e,"color",o)),e.$on("change",t[1]),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,s){const f={};!r&&s&1&&(r=!0,f.color=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function G4(t){let e,r,i=t[8][0]+"",o,u,c,s,f,y;function b(I){t[6](I,t[8])}let A={};return t[8][1]!==void 0&&(A.color=t[8][1]),c=new tv({props:A}),Ut.push(()=>Xt(c,"color",b)),c.$on("change",t[1]),{c(){e=Je("div"),r=Je("p"),o=Fi(i),u=ir(),Ht(c.$$.fragment),f=ir(),this.h()},l(I){e=Qe(I,"DIV",{class:!0});var C=vt(e);r=Qe(C,"P",{});var N=vt(r);o=Bi(N,i),N.forEach(he),u=nr(C),Yt(c.$$.fragment,C),f=nr(C),C.forEach(he),this.h()},h(){ge(e,"class","stop svelte-40fktp")},m(I,C){dt(I,e,C),Ke(e,r),Ke(r,o),Ke(e,u),$t(c,e,null),Ke(e,f),y=!0},p(I,C){t=I,(!y||C&1)&&i!==(i=t[8][0]+"")&&Dn(o,i);const N={};!s&&C&1&&(s=!0,N.color=t[8][1],er(()=>s=!1)),c.$set(N)},i(I){y||(We(c.$$.fragment,I),y=!0)},o(I){et(c.$$.fragment,I),y=!1},d(I){I&&he(e),Gt(c)}}}function MD(t){let e,r,i,o;const u=[PD,TD],c=[];function s(f,y){return typeof f[0]=="string"?0:"stops"in f[0]?1:-1}return~(e=s(t))&&(r=c[e]=u[e](t)),{c(){r&&r.c(),i=pn()},l(f){r&&r.l(f),i=pn()},m(f,y){~e&&c[e].m(f,y),dt(f,i,y),o=!0},p(f,[y]){let b=e;e=s(f),e===b?~e&&c[e].p(f,y):(r&&(gn(),et(c[b],1,1,()=>{c[b]=null}),yn()),~e?(r=c[e],r?r.p(f,y):(r=c[e]=u[e](f),r.c()),We(r,1),r.m(i.parentNode,i)):r=null)},i(f){o||(We(r),o=!0)},o(f){et(r),o=!1},d(f){f&&he(i),~e&&c[e].d(f)}}}function DD(t,e,r){let{map:i}=e,{layer:o}=e,{propertyName:u}=e,s=(()=>{let A=i.getPaintProperty(o.id,u);if(A=x2(A),A||(A="#000000"),A&&typeof A=="object"&&"stops"in A){const I=A;return I.stops.forEach(N=>{N[1]=x2(N[1])}),I}return A})();const f=H_(A=>{typeof s=="string"&&r(0,s=A.detail.color),i.setPaintProperty(o.id,u,s);const I=i.getStyle().layers.find(C=>C.id===o.id);I&&r(2,o=I)},100);function y(A){s=A,r(0,s)}function b(A,I){t.$$.not_equal(I[1],A)&&(I[1]=A,r(0,s))}return t.$$set=A=>{"map"in A&&r(3,i=A.map),"layer"in A&&r(2,o=A.layer),"propertyName"in A&&r(4,u=A.propertyName)},[s,f,o,i,u,y,b]}class _c extends di{constructor(e){super(),pi(this,e,DD,MD,hi,{map:3,layer:2,propertyName:4})}}function zD(t){let e,r,i;return r=new bo({props:{icon:yS,size:t[0]}}),{c(){e=Je("a"),Ht(r.$$.fragment),this.h()},l(o){e=Qe(o,"A",{class:!0,href:!0,target:!0,rel:!0,role:!0});var u=vt(e);Yt(r.$$.fragment,u),u.forEach(he),this.h()},h(){ge(e,"class","help svelte-big87s"),ge(e,"href",t[1]),ge(e,"target","_blank"),ge(e,"rel","noreferrer"),ge(e,"role","button")},m(o,u){dt(o,e,u),$t(r,e,null),i=!0},p(o,[u]){const c={};u&1&&(c.size=o[0]),r.$set(c),(!i||u&2)&&ge(e,"href",o[1])},i(o){i||(We(r.$$.fragment,o),i=!0)},o(o){et(r.$$.fragment,o),i=!1},d(o){o&&he(e),Gt(r)}}}const mg="https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/";function ND(t,e,r){let{type:i=void 0}=e,{layerType:o}=e,{property:u=void 0}=e,{size:c="sm"}=e,s;return t.$$set=f=>{"type"in f&&r(2,i=f.type),"layerType"in f&&r(3,o=f.layerType),"property"in f&&r(4,u=f.property),"size"in f&&r(0,c=f.size)},t.$$.update=()=>{t.$$.dirty&28&&(i&&o&&u?r(1,s=`${mg}#${i}-${o}-${u}`):o&&!i&&!u?r(1,s=`${mg}#${o}`):r(1,s=mg))},[c,s,i,o,u]}class Wx extends di{constructor(e){super(),pi(this,e,ND,zD,hi,{type:2,layerType:3,property:4,size:0})}}function W4(t){let e,r,i,o,u;function c(b){t[4](b)}function s(b){t[5](b)}function f(b){t[6](b)}let y={};return t[0].type!==void 0&&(y.type=t[0].type),t[0].layerType!==void 0&&(y.layerType=t[0].layerType),t[0].property!==void 0&&(y.property=t[0].property),e=new Wx({props:y}),Ut.push(()=>Xt(e,"type",c)),Ut.push(()=>Xt(e,"layerType",s)),Ut.push(()=>Xt(e,"property",f)),{c(){Ht(e.$$.fragment)},l(b){Yt(e.$$.fragment,b)},m(b,A){$t(e,b,A),u=!0},p(b,A){const I={};!r&&A&1&&(r=!0,I.type=b[0].type,er(()=>r=!1)),!i&&A&1&&(i=!0,I.layerType=b[0].layerType,er(()=>i=!1)),!o&&A&1&&(o=!0,I.property=b[0].property,er(()=>o=!1)),e.$set(I)},i(b){u||(We(e.$$.fragment,b),u=!0)},o(b){et(e.$$.fragment,b),u=!1},d(b){Gt(e,b)}}}function RD(t){let e,r,i,o,u,c,s,f=t[0]&&W4(t);const y=t[3].default,b=wl(y,t,t[2],null);return{c(){e=Je("div"),r=Je("div"),i=Fi(t[1]),o=ir(),f&&f.c(),u=ir(),c=Je("div"),b&&b.c(),this.h()},l(A){e=Qe(A,"DIV",{class:!0});var I=vt(e);r=Qe(I,"DIV",{class:!0});var C=vt(r);i=Bi(C,t[1]),o=nr(C),f&&f.l(C),C.forEach(he),u=nr(I),c=Qe(I,"DIV",{class:!0});var N=vt(c);b&&b.l(N),N.forEach(he),I.forEach(he),this.h()},h(){ge(r,"class","label is-normal svelte-o631vn"),ge(c,"class","control svelte-o631vn"),ge(e,"class","field svelte-o631vn")},m(A,I){dt(A,e,I),Ke(e,r),Ke(r,i),Ke(r,o),f&&f.m(r,null),Ke(e,u),Ke(e,c),b&&b.m(c,null),s=!0},p(A,[I]){(!s||I&2)&&Dn(i,A[1]),A[0]?f?(f.p(A,I),I&1&&We(f,1)):(f=W4(A),f.c(),We(f,1),f.m(r,null)):f&&(gn(),et(f,1,1,()=>{f=null}),yn()),b&&b.p&&(!s||I&4)&&xl(b,y,A,A[2],s?Al(y,A[2],I,null):kl(A[2]),null)},i(A){s||(We(f),We(b,A),s=!0)},o(A){et(f),et(b,A),s=!1},d(A){A&&he(e),f&&f.d(),b&&b.d(A)}}}function OD(t,e,r){let{$$slots:i={},$$scope:o}=e,{title:u}=e,{help:c=void 0}=e;function s(b){t.$$.not_equal(c.type,b)&&(c.type=b,r(0,c))}function f(b){t.$$.not_equal(c.layerType,b)&&(c.layerType=b,r(0,c))}function y(b){t.$$.not_equal(c.property,b)&&(c.property=b,r(0,c))}return t.$$set=b=>{"title"in b&&r(1,u=b.title),"help"in b&&r(0,c=b.help),"$$scope"in b&&r(2,o=b.$$scope)},[c,u,o,i,s,f,y]}class Tn extends di{constructor(e){super(),pi(this,e,OD,RD,hi,{title:1,help:0})}}function FD(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function BD(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={propertyName:"background-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function jD(t){let e,r,i,o;return e=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"background",property:"background-opacity"},$$slots:{default:[FD]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Background color",help:{type:"paint",layerType:"background",property:"background-color"},$$slots:{default:[BD]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment)},l(u){Yt(e.$$.fragment,u),r=nr(u),Yt(i.$$.fragment,u)},m(u,c){$t(e,u,c),dt(u,r,c),$t(i,u,c),o=!0},p(u,[c]){const s={};c&67&&(s.$$scope={dirty:c,ctx:u}),e.$set(s);const f={};c&67&&(f.$$scope={dirty:c,ctx:u}),i.$set(f)},i(u){o||(We(e.$$.fragment,u),We(i.$$.fragment,u),o=!0)},o(u){et(e.$$.fragment,u),et(i.$$.fragment,u),o=!1},d(u){u&&he(r),Gt(e,u),Gt(i,u)}}}function UD(t,e,r){let{map:i}=e,{layer:o}=e;function u(y){i=y,r(0,i)}function c(y){o=y,r(1,o)}function s(y){i=y,r(0,i)}function f(y){o=y,r(1,o)}return t.$$set=y=>{"map"in y&&r(0,i=y.map),"layer"in y&&r(1,o=y.layer)},[i,o,u,c,s,f]}class qD extends di{constructor(e){super(),pi(this,e,UD,jD,hi,{map:0,layer:1})}}function VD(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function HD(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={propertyName:"fill-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function $D(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={propertyName:"fill-outline-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function GD(t){let e,r,i,o,u,c;return e=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"fill",property:"fill-opacity"},$$slots:{default:[VD]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Fill color",help:{type:"paint",layerType:"fill",property:"fill-color"},$$slots:{default:[HD]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Fill outline color",help:{type:"paint",layerType:"fill",property:"fill-outline-color"},$$slots:{default:[$D]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment)},l(s){Yt(e.$$.fragment,s),r=nr(s),Yt(i.$$.fragment,s),o=nr(s),Yt(u.$$.fragment,s)},m(s,f){$t(e,s,f),dt(s,r,f),$t(i,s,f),dt(s,o,f),$t(u,s,f),c=!0},p(s,[f]){const y={};f&259&&(y.$$scope={dirty:f,ctx:s}),e.$set(y);const b={};f&259&&(b.$$scope={dirty:f,ctx:s}),i.$set(b);const A={};f&259&&(A.$$scope={dirty:f,ctx:s}),u.$set(A)},i(s){c||(We(e.$$.fragment,s),We(i.$$.fragment,s),We(u.$$.fragment,s),c=!0)},o(s){et(e.$$.fragment,s),et(i.$$.fragment,s),et(u.$$.fragment,s),c=!1},d(s){s&&(he(r),he(o)),Gt(e,s),Gt(i,s),Gt(u,s)}}}function WD(t,e,r){let{map:i}=e,{layer:o}=e;function u(A){i=A,r(0,i)}function c(A){o=A,r(1,o)}function s(A){i=A,r(0,i)}function f(A){o=A,r(1,o)}function y(A){i=A,r(0,i)}function b(A){o=A,r(1,o)}return t.$$set=A=>{"map"in A&&r(0,i=A.map),"layer"in A&&r(1,o=A.layer)},[i,o,u,c,s,f,y,b]}class ZD extends di{constructor(e){super(),pi(this,e,WD,GD,hi,{map:0,layer:1})}}function XD(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:20,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function YD(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"line-width");return y||(y=1),y})();const s=()=>{c&&(i==null||i.setPaintProperty(o.id,"line-width",c))};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class KD extends di{constructor(e){super(),pi(this,e,YD,XD,hi,{map:1,layer:2})}}function JD(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:20,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function QD(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"line-blur");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"line-blur",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class ez extends di{constructor(e){super(),pi(this,e,QD,JD,hi,{map:1,layer:2})}}function Z4(t,e,r){const i=t.slice();return i[3]=e[r],i}function X4(t){let e,r,i,o=t[3].title+"",u,c,s,f,y;function b(){return t[2](t[3])}return{c(){e=Je("p"),r=Je("button"),i=Je("span"),u=Fi(o),s=ir(),this.h()},l(A){e=Qe(A,"P",{class:!0});var I=vt(e);r=Qe(I,"BUTTON",{class:!0});var C=vt(r);i=Qe(C,"SPAN",{class:!0});var N=vt(i);u=Bi(N,o),N.forEach(he),C.forEach(he),s=nr(I),I.forEach(he),this.h()},h(){ge(i,"class","svelte-1uuxs6l"),ge(r,"class",c=`button is-small ${JSON.stringify(t[3].value)==JSON.stringify(t[0])?"is-info is-light is-active":""} svelte-1uuxs6l`),ge(e,"class","control svelte-1uuxs6l")},m(A,I){dt(A,e,I),Ke(e,r),Ke(r,i),Ke(i,u),Ke(e,s),f||(y=Dr(r,"click",b),f=!0)},p(A,I){t=A,I&2&&o!==(o=t[3].title+"")&&Dn(u,o),I&3&&c!==(c=`button is-small ${JSON.stringify(t[3].value)==JSON.stringify(t[0])?"is-info is-light is-active":""} svelte-1uuxs6l`)&&ge(r,"class",c)},d(A){A&&he(e),f=!1,y()}}}function Y4(t){let e,r=dn(t[1]),i=[];for(let o=0;o<r.length;o+=1)i[o]=X4(Z4(t,r,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=pn()},l(o){for(let u=0;u<i.length;u+=1)i[u].l(o);e=pn()},m(o,u){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,u);dt(o,e,u)},p(o,u){if(u&3){r=dn(o[1]);let c;for(c=0;c<r.length;c+=1){const s=Z4(o,r,c);i[c]?i[c].p(s,u):(i[c]=X4(s),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},d(o){o&&he(e),na(i,o)}}}function tz(t){let e,r=t[0],i=Y4(t);return{c(){e=Je("p"),i.c(),this.h()},l(o){e=Qe(o,"P",{class:!0});var u=vt(e);i.l(u),u.forEach(he),this.h()},h(){ge(e,"class","buttons svelte-1uuxs6l")},m(o,u){dt(o,e,u),i.m(e,null)},p(o,[u]){u&1&&hi(r,r=o[0])?(i.d(1),i=Y4(o),i.c(),i.m(e,null)):i.p(o,u)},i:mi,o:mi,d(o){o&&he(e),i.d(o)}}}function rz(t,e,r){let{options:i}=e,{selectedValue:o}=e;const u=c=>{r(0,o=JSON.parse(JSON.stringify(c.value)))};return t.$$set=c=>{"options"in c&&r(1,i=c.options),"selectedValue"in c&&r(0,o=c.selectedValue)},[o,i,u]}class Y2 extends di{constructor(e){super(),pi(this,e,rz,tz,hi,{options:1,selectedValue:0})}}function iz(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[1]!==void 0&&(s.options=t[1]),t[0]!==void 0&&(s.selectedValue=t[0]),e=new Y2({props:s}),Ut.push(()=>Xt(e,"options",u)),Ut.push(()=>Xt(e,"selectedValue",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,[y]){const b={};!r&&y&2&&(r=!0,b.options=f[1],er(()=>r=!1)),!i&&y&1&&(i=!0,b.selectedValue=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function nz(t,e,r){let{map:i}=e,{layer:o}=e,u=[{title:"Solid",value:""},{title:" dash",value:[10,4]},{title:" dash dot",value:[10,3,2,3]},{title:" dot",value:[1,1]}],s=(()=>{let A=i.getPaintProperty(o.id,"line-dasharray");return A||(A=u[0].value),A})();const f=()=>{s?i==null||i.setPaintProperty(o.id,"line-dasharray",s):i==null||i.setPaintProperty(o.id,"line-dasharray",void 0);const A=i.getStyle().layers.find(I=>I.id===o.id);A&&r(2,o=A)};function y(A){u=A,r(1,u)}function b(A){s=A,r(0,s)}return t.$$set=A=>{"map"in A&&r(3,i=A.map),"layer"in A&&r(2,o=A.layer)},t.$$.update=()=>{t.$$.dirty&1&&f()},[s,u,o,i,y,b]}class oz extends di{constructor(e){super(),pi(this,e,nz,iz,hi,{map:3,layer:2})}}function az(t){let e,r,i,o,u=t[0]?"Delete heatmap":"Create heatmap",c,s,f;return{c(){e=Je("div"),r=Je("input"),i=ir(),o=Je("label"),c=Fi(u),this.h()},l(y){e=Qe(y,"DIV",{class:!0});var b=vt(e);r=Qe(b,"INPUT",{id:!0,type:!0,name:!0,class:!0}),i=nr(b),o=Qe(b,"LABEL",{class:!0,for:!0});var A=vt(o);c=Bi(A,u),A.forEach(he),b.forEach(he),this.h()},h(){ge(r,"id","heatmapToggle"),ge(r,"type","checkbox"),ge(r,"name","heatmapToggle"),ge(r,"class","switch svelte-46p5i7"),ge(o,"class","switch-label svelte-46p5i7"),ge(o,"for","heatmapToggle"),ge(e,"class","field")},m(y,b){dt(y,e,b),Ke(e,r),r.checked=t[0],Ke(e,i),Ke(e,o),Ke(o,c),s||(f=Dr(r,"change",t[3]),s=!0)},p(y,[b]){b&1&&(r.checked=y[0]),b&1&&u!==(u=y[0]?"Delete heatmap":"Create heatmap")&&Dn(c,u)},i:mi,o:mi,d(y){y&&he(e),s=!1,f()}}}function sz(t,e,r){let{map:i}=e,{layer:o}=e,u=`${o.id} heatmap`,c=!!i.getLayer(u);const s=()=>{if(i.getLayer(u))return;const b=o,A={id:u,type:"heatmap",source:b.source,"source-layer":b["source-layer"],layout:{visibility:"visible"},paint:{"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"heatmap-intensity":1,"heatmap-opacity":1,"heatmap-radius":30,"heatmap-weight":1}};A.minzoom=b.maxzoom??0,A.maxzoom=b.maxzoom??24,i.addLayer(A,b.id)},f=()=>{i.getLayer(u)&&i.removeLayer(u)};function y(){c=this.checked,r(0,c)}return t.$$set=b=>{"map"in b&&r(1,i=b.map),"layer"in b&&r(2,o=b.layer)},t.$$.update=()=>{t.$$.dirty&1&&c===!0&&s(),t.$$.dirty&1&&(c||f())},[c,i,o,y]}class rv extends di{constructor(e){super(),pi(this,e,sz,az,hi,{map:1,layer:2})}}function lz(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new rv({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function uz(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function cz(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={propertyName:"line-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function fz(t){let e,r,i,o;function u(f){t[8](f)}function c(f){t[9](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new KD({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function hz(t){let e,r,i,o;function u(f){t[10](f)}function c(f){t[11](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new oz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function dz(t){let e,r,i,o;function u(f){t[12](f)}function c(f){t[13](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new ez({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function pz(t){let e,r,i,o,u,c,s,f,y,b,A,I;return e=new Tn({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[lz]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"line",property:"line-opacity"},$$slots:{default:[uz]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Line color",help:{type:"paint",layerType:"line",property:"line-color"},$$slots:{default:[cz]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Line width",help:{type:"paint",layerType:"line",property:"line-width"},$$slots:{default:[fz]},$$scope:{ctx:t}}}),y=new Tn({props:{title:"Line pattern",help:{type:"paint",layerType:"line",property:"line-dasharray"},$$slots:{default:[hz]},$$scope:{ctx:t}}}),A=new Tn({props:{title:"Line blur",help:{type:"paint",layerType:"line",property:"line-blur"},$$slots:{default:[dz]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment),f=ir(),Ht(y.$$.fragment),b=ir(),Ht(A.$$.fragment)},l(C){Yt(e.$$.fragment,C),r=nr(C),Yt(i.$$.fragment,C),o=nr(C),Yt(u.$$.fragment,C),c=nr(C),Yt(s.$$.fragment,C),f=nr(C),Yt(y.$$.fragment,C),b=nr(C),Yt(A.$$.fragment,C)},m(C,N){$t(e,C,N),dt(C,r,N),$t(i,C,N),dt(C,o,N),$t(u,C,N),dt(C,c,N),$t(s,C,N),dt(C,f,N),$t(y,C,N),dt(C,b,N),$t(A,C,N),I=!0},p(C,[N]){const O={};N&16387&&(O.$$scope={dirty:N,ctx:C}),e.$set(O);const $={};N&16387&&($.$$scope={dirty:N,ctx:C}),i.$set($);const G={};N&16387&&(G.$$scope={dirty:N,ctx:C}),u.$set(G);const Z={};N&16387&&(Z.$$scope={dirty:N,ctx:C}),s.$set(Z);const ee={};N&16387&&(ee.$$scope={dirty:N,ctx:C}),y.$set(ee);const te={};N&16387&&(te.$$scope={dirty:N,ctx:C}),A.$set(te)},i(C){I||(We(e.$$.fragment,C),We(i.$$.fragment,C),We(u.$$.fragment,C),We(s.$$.fragment,C),We(y.$$.fragment,C),We(A.$$.fragment,C),I=!0)},o(C){et(e.$$.fragment,C),et(i.$$.fragment,C),et(u.$$.fragment,C),et(s.$$.fragment,C),et(y.$$.fragment,C),et(A.$$.fragment,C),I=!1},d(C){C&&(he(r),he(o),he(c),he(f),he(b)),Gt(e,C),Gt(i,C),Gt(u,C),Gt(s,C),Gt(y,C),Gt(A,C)}}}function mz(t,e,r){let{map:i}=e,{layer:o}=e;function u(G){i=G,r(0,i)}function c(G){o=G,r(1,o)}function s(G){i=G,r(0,i)}function f(G){o=G,r(1,o)}function y(G){i=G,r(0,i)}function b(G){o=G,r(1,o)}function A(G){i=G,r(0,i)}function I(G){o=G,r(1,o)}function C(G){i=G,r(0,i)}function N(G){o=G,r(1,o)}function O(G){i=G,r(0,i)}function $(G){o=G,r(1,o)}return t.$$set=G=>{"map"in G&&r(0,i=G.map),"layer"in G&&r(1,o=G.layer)},[i,o,u,c,s,f,y,b,A,I,C,N,O,$]}class gz extends di{constructor(e){super(),pi(this,e,mz,pz,hi,{map:0,layer:1})}}function yz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:20,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function _z(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"circle-radius");return y||(y=5),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"circle-radius",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class vz extends di{constructor(e){super(),pi(this,e,_z,yz,hi,{map:1,layer:2})}}function bz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:20,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function wz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"circle-stroke-width");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"circle-stroke-width",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class xz extends di{constructor(e){super(),pi(this,e,wz,bz,hi,{map:1,layer:2})}}function kz(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new rv({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function Az(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function Sz(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new vz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function Ez(t){let e,r,i,o;function u(f){t[8](f)}function c(f){t[9](f)}let s={propertyName:"circle-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function Cz(t){let e,r,i,o;function u(f){t[10](f)}function c(f){t[11](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new xz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function Iz(t){let e,r,i,o;function u(f){t[12](f)}function c(f){t[13](f)}let s={propertyName:"circle-stroke-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function Lz(t){let e,r,i,o,u,c,s,f,y,b,A,I;return e=new Tn({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[kz]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"circle",property:"circle-opacity"},$$slots:{default:[Az]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Circle radius",help:{type:"paint",layerType:"circle",property:"circle-radius"},$$slots:{default:[Sz]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Circle color",help:{type:"paint",layerType:"circle",property:"circle-color"},$$slots:{default:[Ez]},$$scope:{ctx:t}}}),y=new Tn({props:{title:"Circle stroke width",help:{type:"paint",layerType:"circle",property:"circle-stroke-width"},$$slots:{default:[Cz]},$$scope:{ctx:t}}}),A=new Tn({props:{title:"Circle stroke color",help:{type:"paint",layerType:"circle",property:"circle-stroke-color"},$$slots:{default:[Iz]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment),f=ir(),Ht(y.$$.fragment),b=ir(),Ht(A.$$.fragment)},l(C){Yt(e.$$.fragment,C),r=nr(C),Yt(i.$$.fragment,C),o=nr(C),Yt(u.$$.fragment,C),c=nr(C),Yt(s.$$.fragment,C),f=nr(C),Yt(y.$$.fragment,C),b=nr(C),Yt(A.$$.fragment,C)},m(C,N){$t(e,C,N),dt(C,r,N),$t(i,C,N),dt(C,o,N),$t(u,C,N),dt(C,c,N),$t(s,C,N),dt(C,f,N),$t(y,C,N),dt(C,b,N),$t(A,C,N),I=!0},p(C,[N]){const O={};N&16387&&(O.$$scope={dirty:N,ctx:C}),e.$set(O);const $={};N&16387&&($.$$scope={dirty:N,ctx:C}),i.$set($);const G={};N&16387&&(G.$$scope={dirty:N,ctx:C}),u.$set(G);const Z={};N&16387&&(Z.$$scope={dirty:N,ctx:C}),s.$set(Z);const ee={};N&16387&&(ee.$$scope={dirty:N,ctx:C}),y.$set(ee);const te={};N&16387&&(te.$$scope={dirty:N,ctx:C}),A.$set(te)},i(C){I||(We(e.$$.fragment,C),We(i.$$.fragment,C),We(u.$$.fragment,C),We(s.$$.fragment,C),We(y.$$.fragment,C),We(A.$$.fragment,C),I=!0)},o(C){et(e.$$.fragment,C),et(i.$$.fragment,C),et(u.$$.fragment,C),et(s.$$.fragment,C),et(y.$$.fragment,C),et(A.$$.fragment,C),I=!1},d(C){C&&(he(r),he(o),he(c),he(f),he(b)),Gt(e,C),Gt(i,C),Gt(u,C),Gt(s,C),Gt(y,C),Gt(A,C)}}}function Tz(t,e,r){let{map:i}=e,{layer:o}=e;function u(G){i=G,r(0,i)}function c(G){o=G,r(1,o)}function s(G){i=G,r(0,i)}function f(G){o=G,r(1,o)}function y(G){i=G,r(0,i)}function b(G){o=G,r(1,o)}function A(G){i=G,r(0,i)}function I(G){o=G,r(1,o)}function C(G){i=G,r(0,i)}function N(G){o=G,r(1,o)}function O(G){i=G,r(0,i)}function $(G){o=G,r(1,o)}return t.$$set=G=>{"map"in G&&r(0,i=G.map),"layer"in G&&r(1,o=G.layer)},[i,o,u,c,s,f,y,b,A,I,C,N,O,$]}class Pz extends di{constructor(e){super(),pi(this,e,Tz,Lz,hi,{map:0,layer:1})}}function Mz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function Dz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"icon-halo-width");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"icon-halo-width",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class zz extends di{constructor(e){super(),pi(this,e,Dz,Mz,hi,{map:1,layer:2})}}function Nz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function Rz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"icon-halo-blur");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"icon-halo-blur",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class Oz extends di{constructor(e){super(),pi(this,e,Rz,Nz,hi,{map:1,layer:2})}}function Fz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:.1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function Bz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getLayoutProperty(o.id,"icon-size");return y||(y=1),y})();const s=()=>{c&&(i==null||i.setLayoutProperty(o.id,"icon-size",c))};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class jz extends di{constructor(e){super(),pi(this,e,Bz,Fz,hi,{map:1,layer:2})}}function Uz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function qz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"text-halo-width");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"text-halo-width",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class Vz extends di{constructor(e){super(),pi(this,e,qz,Uz,hi,{map:1,layer:2})}}function Hz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function $z(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"text-halo-blur");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"text-halo-blur",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class Gz extends di{constructor(e){super(),pi(this,e,$z,Hz,hi,{map:1,layer:2})}}function Wz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:64,step:.1,unit:"px"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function Zz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getLayoutProperty(o.id,"text-size");return y||(y=16),y})();const s=()=>{c&&(i==null||i.setLayoutProperty(o.id,"text-size",c))};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class Xz extends di{constructor(e){super(),pi(this,e,Zz,Wz,hi,{map:1,layer:2})}}function Yz(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:359,step:1,unit:"°"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function Kz(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getLayoutProperty(o.id,"text-rotate");return y||(y=0),y})();const s=()=>{i==null||i.setLayoutProperty(o.id,"text-rotate",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class Jz extends di{constructor(e){super(),pi(this,e,Kz,Yz,hi,{map:1,layer:2})}}function Qz(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[1]!==void 0&&(s.options=t[1]),t[0]!==void 0&&(s.selectedValue=t[0]),e=new Y2({props:s}),Ut.push(()=>Xt(e,"options",u)),Ut.push(()=>Xt(e,"selectedValue",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,[y]){const b={};!r&&y&2&&(r=!0,b.options=f[1],er(()=>r=!1)),!i&&y&1&&(i=!0,b.selectedValue=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function eN(t,e,r){let{map:i}=e,{layer:o}=e,u=[{title:"Never",value:"never"},{title:"always",value:"always"},{title:"Cooperative",value:"cooperative"}],s=(()=>{let A=i.getLayoutProperty(o.id,"icon-overlap");return A||(A=u[0].value),A})();const f=()=>{i==null||i.setLayoutProperty(o.id,"icon-overlap",s)};function y(A){u=A,r(1,u)}function b(A){s=A,r(0,s)}return t.$$set=A=>{"map"in A&&r(2,i=A.map),"layer"in A&&r(3,o=A.layer)},t.$$.update=()=>{t.$$.dirty&1&&f()},[s,u,i,o,y,b]}class tN extends di{constructor(e){super(),pi(this,e,eN,Qz,hi,{map:2,layer:3})}}function rN(t){let e,r,i,o;function u(f){t[5](f)}function c(f){t[6](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new rv({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function iN(t){let e,r,i,o;function u(f){t[7](f)}function c(f){t[8](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function nN(t){var y;let e,r,i,o,u=(y=t[2])==null?void 0:y.isSdf(t[1]),c,s;e=new Tn({props:{title:"Icon size",help:{type:"layout",layerType:"symbol",property:"icon-size"},$$slots:{default:[oN]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Icon overlap",help:{type:"layout",layerType:"symbol",property:"icon-overlap"},$$slots:{default:[aN]},$$scope:{ctx:t}}});let f=u&&K4(t);return{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),f&&f.c(),c=pn()},l(b){Yt(e.$$.fragment,b),r=nr(b),Yt(i.$$.fragment,b),o=nr(b),f&&f.l(b),c=pn()},m(b,A){$t(e,b,A),dt(b,r,A),$t(i,b,A),dt(b,o,A),f&&f.m(b,A),dt(b,c,A),s=!0},p(b,A){var N;const I={};A[0]&3|A[1]&4&&(I.$$scope={dirty:A,ctx:b}),e.$set(I);const C={};A[0]&3|A[1]&4&&(C.$$scope={dirty:A,ctx:b}),i.$set(C),A[0]&6&&(u=(N=b[2])==null?void 0:N.isSdf(b[1])),u?f?(f.p(b,A),A[0]&6&&We(f,1)):(f=K4(b),f.c(),We(f,1),f.m(c.parentNode,c)):f&&(gn(),et(f,1,1,()=>{f=null}),yn())},i(b){s||(We(e.$$.fragment,b),We(i.$$.fragment,b),We(f),s=!0)},o(b){et(e.$$.fragment,b),et(i.$$.fragment,b),et(f),s=!1},d(b){b&&(he(r),he(o),he(c)),Gt(e,b),Gt(i,b),f&&f.d(b)}}}function oN(t){let e,r,i,o;function u(f){t[9](f)}function c(f){t[10](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new jz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function aN(t){let e,r,i,o;function u(f){t[11](f)}function c(f){t[12](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new tN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function K4(t){let e,r,i,o,u,c,s,f;return e=new Tn({props:{title:"Icon color",help:{type:"paint",layerType:"symbol",property:"icon-color"},$$slots:{default:[sN]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Icon halo color",help:{type:"paint",layerType:"symbol",property:"icon-halo-color"},$$slots:{default:[lN]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Icon halo width",help:{type:"paint",layerType:"symbol",property:"icon-halo-width"},$$slots:{default:[uN]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Icon halo blur",help:{type:"paint",layerType:"symbol",property:"icon-halo-blur"},$$slots:{default:[cN]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment)},l(y){Yt(e.$$.fragment,y),r=nr(y),Yt(i.$$.fragment,y),o=nr(y),Yt(u.$$.fragment,y),c=nr(y),Yt(s.$$.fragment,y)},m(y,b){$t(e,y,b),dt(y,r,b),$t(i,y,b),dt(y,o,b),$t(u,y,b),dt(y,c,b),$t(s,y,b),f=!0},p(y,b){const A={};b[0]&3|b[1]&4&&(A.$$scope={dirty:b,ctx:y}),e.$set(A);const I={};b[0]&3|b[1]&4&&(I.$$scope={dirty:b,ctx:y}),i.$set(I);const C={};b[0]&3|b[1]&4&&(C.$$scope={dirty:b,ctx:y}),u.$set(C);const N={};b[0]&3|b[1]&4&&(N.$$scope={dirty:b,ctx:y}),s.$set(N)},i(y){f||(We(e.$$.fragment,y),We(i.$$.fragment,y),We(u.$$.fragment,y),We(s.$$.fragment,y),f=!0)},o(y){et(e.$$.fragment,y),et(i.$$.fragment,y),et(u.$$.fragment,y),et(s.$$.fragment,y),f=!1},d(y){y&&(he(r),he(o),he(c)),Gt(e,y),Gt(i,y),Gt(u,y),Gt(s,y)}}}function sN(t){let e,r,i,o;function u(f){t[13](f)}function c(f){t[14](f)}let s={propertyName:"icon-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function lN(t){let e,r,i,o;function u(f){t[15](f)}function c(f){t[16](f)}let s={propertyName:"icon-halo-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function uN(t){let e,r,i,o;function u(f){t[17](f)}function c(f){t[18](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new zz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function cN(t){let e,r,i,o;function u(f){t[19](f)}function c(f){t[20](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new Oz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function fN(t){let e,r,i,o,u,c,s,f,y,b,A,I;return e=new Tn({props:{title:"Text size",help:{type:"layout",layerType:"symbol",property:"text-size"},$$slots:{default:[hN]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Text color",help:{type:"paint",layerType:"symbol",property:"text-color"},$$slots:{default:[dN]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Text rotate",help:{type:"layout",layerType:"symbol",property:"text-rotate"},$$slots:{default:[pN]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Text halo color",help:{type:"paint",layerType:"symbol",property:"text-halo-color"},$$slots:{default:[mN]},$$scope:{ctx:t}}}),y=new Tn({props:{title:"Text halo width",help:{type:"paint",layerType:"symbol",property:"text-halo-width"},$$slots:{default:[gN]},$$scope:{ctx:t}}}),A=new Tn({props:{title:"Text halo blur",help:{type:"paint",layerType:"symbol",property:"text-halo-blur"},$$slots:{default:[yN]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment),f=ir(),Ht(y.$$.fragment),b=ir(),Ht(A.$$.fragment)},l(C){Yt(e.$$.fragment,C),r=nr(C),Yt(i.$$.fragment,C),o=nr(C),Yt(u.$$.fragment,C),c=nr(C),Yt(s.$$.fragment,C),f=nr(C),Yt(y.$$.fragment,C),b=nr(C),Yt(A.$$.fragment,C)},m(C,N){$t(e,C,N),dt(C,r,N),$t(i,C,N),dt(C,o,N),$t(u,C,N),dt(C,c,N),$t(s,C,N),dt(C,f,N),$t(y,C,N),dt(C,b,N),$t(A,C,N),I=!0},p(C,N){const O={};N[0]&3|N[1]&4&&(O.$$scope={dirty:N,ctx:C}),e.$set(O);const $={};N[0]&3|N[1]&4&&($.$$scope={dirty:N,ctx:C}),i.$set($);const G={};N[0]&3|N[1]&4&&(G.$$scope={dirty:N,ctx:C}),u.$set(G);const Z={};N[0]&3|N[1]&4&&(Z.$$scope={dirty:N,ctx:C}),s.$set(Z);const ee={};N[0]&3|N[1]&4&&(ee.$$scope={dirty:N,ctx:C}),y.$set(ee);const te={};N[0]&3|N[1]&4&&(te.$$scope={dirty:N,ctx:C}),A.$set(te)},i(C){I||(We(e.$$.fragment,C),We(i.$$.fragment,C),We(u.$$.fragment,C),We(s.$$.fragment,C),We(y.$$.fragment,C),We(A.$$.fragment,C),I=!0)},o(C){et(e.$$.fragment,C),et(i.$$.fragment,C),et(u.$$.fragment,C),et(s.$$.fragment,C),et(y.$$.fragment,C),et(A.$$.fragment,C),I=!1},d(C){C&&(he(r),he(o),he(c),he(f),he(b)),Gt(e,C),Gt(i,C),Gt(u,C),Gt(s,C),Gt(y,C),Gt(A,C)}}}function hN(t){let e,r,i,o;function u(f){t[21](f)}function c(f){t[22](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new Xz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function dN(t){let e,r,i,o;function u(f){t[23](f)}function c(f){t[24](f)}let s={propertyName:"text-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function pN(t){let e,r,i,o;function u(f){t[25](f)}function c(f){t[26](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new Jz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function mN(t){let e,r,i,o;function u(f){t[27](f)}function c(f){t[28](f)}let s={propertyName:"text-halo-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function gN(t){let e,r,i,o;function u(f){t[29](f)}function c(f){t[30](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new Vz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function yN(t){let e,r,i,o;function u(f){t[31](f)}function c(f){t[32](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new Gz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y[0]&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function _N(t){let e,r,i,o,u,c,s;e=new Tn({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[rN]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"symbol",property:"icon-opacity"},$$slots:{default:[iN]},$$scope:{ctx:t}}});let f=t[3]&&nN(t),y=t[4]&&fN(t);return{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),f&&f.c(),u=ir(),y&&y.c(),c=pn()},l(b){Yt(e.$$.fragment,b),r=nr(b),Yt(i.$$.fragment,b),o=nr(b),f&&f.l(b),u=nr(b),y&&y.l(b),c=pn()},m(b,A){$t(e,b,A),dt(b,r,A),$t(i,b,A),dt(b,o,A),f&&f.m(b,A),dt(b,u,A),y&&y.m(b,A),dt(b,c,A),s=!0},p(b,A){const I={};A[0]&3|A[1]&4&&(I.$$scope={dirty:A,ctx:b}),e.$set(I);const C={};A[0]&3|A[1]&4&&(C.$$scope={dirty:A,ctx:b}),i.$set(C),b[3]&&f.p(b,A),b[4]&&y.p(b,A)},i(b){s||(We(e.$$.fragment,b),We(i.$$.fragment,b),We(f),We(y),s=!0)},o(b){et(e.$$.fragment,b),et(i.$$.fragment,b),et(f),et(y),s=!1},d(b){b&&(he(r),he(o),he(u),he(c)),Gt(e,b),Gt(i,b),f&&f.d(b),y&&y.d(b)}}}function vN(t,e,r){let{map:i}=e,{layer:o}=e,{spriteLoader:u}=e,c=i.getLayoutProperty(o.id,"icon-image"),s=i.getLayoutProperty(o.id,"text-field");function f(Xe){i=Xe,r(0,i)}function y(Xe){o=Xe,r(1,o)}function b(Xe){i=Xe,r(0,i)}function A(Xe){o=Xe,r(1,o)}function I(Xe){i=Xe,r(0,i)}function C(Xe){o=Xe,r(1,o)}function N(Xe){i=Xe,r(0,i)}function O(Xe){o=Xe,r(1,o)}function $(Xe){i=Xe,r(0,i)}function G(Xe){o=Xe,r(1,o)}function Z(Xe){i=Xe,r(0,i)}function ee(Xe){o=Xe,r(1,o)}function te(Xe){i=Xe,r(0,i)}function _e(Xe){o=Xe,r(1,o)}function le(Xe){i=Xe,r(0,i)}function we(Xe){o=Xe,r(1,o)}function ue(Xe){i=Xe,r(0,i)}function ze(Xe){o=Xe,r(1,o)}function Ue(Xe){i=Xe,r(0,i)}function Ce(Xe){o=Xe,r(1,o)}function Me(Xe){i=Xe,r(0,i)}function qe(Xe){o=Xe,r(1,o)}function it(Xe){i=Xe,r(0,i)}function xt(Xe){o=Xe,r(1,o)}function yt(Xe){i=Xe,r(0,i)}function $e(Xe){o=Xe,r(1,o)}function at(Xe){i=Xe,r(0,i)}function mt(Xe){o=Xe,r(1,o)}return t.$$set=Xe=>{"map"in Xe&&r(0,i=Xe.map),"layer"in Xe&&r(1,o=Xe.layer),"spriteLoader"in Xe&&r(2,u=Xe.spriteLoader)},[i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt,yt,$e,at,mt]}class bN extends di{constructor(e){super(),pi(this,e,vN,_N,hi,{map:0,layer:1,spriteLoader:2},null,[-1,-1])}}function wN(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:100,step:1,unit:"m"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function xN(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"fill-extrusion-height");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"fill-extrusion-height",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class kN extends di{constructor(e){super(),pi(this,e,xN,wN,hi,{map:1,layer:2})}}function AN(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:100,step:1,unit:"m"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function SN(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"fill-extrusion-base");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"fill-extrusion-base",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class EN extends di{constructor(e){super(),pi(this,e,SN,AN,hi,{map:1,layer:2})}}function CN(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function IN(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={propertyName:"fill-extrusion-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function LN(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new kN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function TN(t){let e,r,i,o;function u(f){t[8](f)}function c(f){t[9](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new EN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function PN(t){let e,r,i,o,u,c,s,f;return e=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-opacity"},$$slots:{default:[CN]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Fill extrusion color",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-color"},$$slots:{default:[IN]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Fill extrusion height",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-height"},$$slots:{default:[LN]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Fill extrusion base",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-base"},$$slots:{default:[TN]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment)},l(y){Yt(e.$$.fragment,y),r=nr(y),Yt(i.$$.fragment,y),o=nr(y),Yt(u.$$.fragment,y),c=nr(y),Yt(s.$$.fragment,y)},m(y,b){$t(e,y,b),dt(y,r,b),$t(i,y,b),dt(y,o,b),$t(u,y,b),dt(y,c,b),$t(s,y,b),f=!0},p(y,[b]){const A={};b&1027&&(A.$$scope={dirty:b,ctx:y}),e.$set(A);const I={};b&1027&&(I.$$scope={dirty:b,ctx:y}),i.$set(I);const C={};b&1027&&(C.$$scope={dirty:b,ctx:y}),u.$set(C);const N={};b&1027&&(N.$$scope={dirty:b,ctx:y}),s.$set(N)},i(y){f||(We(e.$$.fragment,y),We(i.$$.fragment,y),We(u.$$.fragment,y),We(s.$$.fragment,y),f=!0)},o(y){et(e.$$.fragment,y),et(i.$$.fragment,y),et(u.$$.fragment,y),et(s.$$.fragment,y),f=!1},d(y){y&&(he(r),he(o),he(c)),Gt(e,y),Gt(i,y),Gt(u,y),Gt(s,y)}}}function MN(t,e,r){let{map:i}=e,{layer:o}=e;function u(C){i=C,r(0,i)}function c(C){o=C,r(1,o)}function s(C){i=C,r(0,i)}function f(C){o=C,r(1,o)}function y(C){i=C,r(0,i)}function b(C){o=C,r(1,o)}function A(C){i=C,r(0,i)}function I(C){o=C,r(1,o)}return t.$$set=C=>{"map"in C&&r(0,i=C.map),"layer"in C&&r(1,o=C.layer)},[i,o,u,c,s,f,y,b,A,I]}class DN extends di{constructor(e){super(),pi(this,e,MN,PN,hi,{map:0,layer:1})}}function zN(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:100,step:1,unit:"%"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function NN(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"hillshade-exaggeration");return y||(y=.5),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"hillshade-exaggeration",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class RN extends di{constructor(e){super(),pi(this,e,NN,zN,hi,{map:1,layer:2})}}function ON(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:359,step:1,unit:"°"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function FN(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"hillshade-illumination-direction");return y||(y=335),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"hillshade-illumination-direction",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class BN extends di{constructor(e){super(),pi(this,e,FN,ON,hi,{map:1,layer:2})}}function jN(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new RN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function UN(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={propertyName:"hillshade-accent-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function qN(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={propertyName:"hillshade-highlight-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function VN(t){let e,r,i,o;function u(f){t[8](f)}function c(f){t[9](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new BN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function HN(t){let e,r,i,o;function u(f){t[10](f)}function c(f){t[11](f)}let s={propertyName:"hillshade-shadow-color"};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new _c({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function $N(t){let e,r,i,o,u,c,s,f,y,b;return e=new Tn({props:{title:"Hillshade exaggeration",help:{type:"paint",layerType:"hillshade",property:"hillshade-exaggeration"},$$slots:{default:[jN]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Hillshade accent color",help:{type:"paint",layerType:"hillshade",property:"hillshade-accent-color"},$$slots:{default:[UN]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Hillshade highlight color",help:{type:"paint",layerType:"hillshade",property:"hillshade-highlight-color"},$$slots:{default:[qN]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Hillshade illumination direction",help:{type:"paint",layerType:"hillshade",property:"hillshade-illumination-direction"},$$slots:{default:[VN]},$$scope:{ctx:t}}}),y=new Tn({props:{title:"Hillshade shadow color",help:{type:"paint",layerType:"hillshade",property:"hillshade-shadow-color"},$$slots:{default:[HN]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment),f=ir(),Ht(y.$$.fragment)},l(A){Yt(e.$$.fragment,A),r=nr(A),Yt(i.$$.fragment,A),o=nr(A),Yt(u.$$.fragment,A),c=nr(A),Yt(s.$$.fragment,A),f=nr(A),Yt(y.$$.fragment,A)},m(A,I){$t(e,A,I),dt(A,r,I),$t(i,A,I),dt(A,o,I),$t(u,A,I),dt(A,c,I),$t(s,A,I),dt(A,f,I),$t(y,A,I),b=!0},p(A,[I]){const C={};I&4099&&(C.$$scope={dirty:I,ctx:A}),e.$set(C);const N={};I&4099&&(N.$$scope={dirty:I,ctx:A}),i.$set(N);const O={};I&4099&&(O.$$scope={dirty:I,ctx:A}),u.$set(O);const $={};I&4099&&($.$$scope={dirty:I,ctx:A}),s.$set($);const G={};I&4099&&(G.$$scope={dirty:I,ctx:A}),y.$set(G)},i(A){b||(We(e.$$.fragment,A),We(i.$$.fragment,A),We(u.$$.fragment,A),We(s.$$.fragment,A),We(y.$$.fragment,A),b=!0)},o(A){et(e.$$.fragment,A),et(i.$$.fragment,A),et(u.$$.fragment,A),et(s.$$.fragment,A),et(y.$$.fragment,A),b=!1},d(A){A&&(he(r),he(o),he(c),he(f)),Gt(e,A),Gt(i,A),Gt(u,A),Gt(s,A),Gt(y,A)}}}function GN(t,e,r){let{map:i}=e,{layer:o}=e;function u(O){i=O,r(0,i)}function c(O){o=O,r(1,o)}function s(O){i=O,r(0,i)}function f(O){o=O,r(1,o)}function y(O){i=O,r(0,i)}function b(O){o=O,r(1,o)}function A(O){i=O,r(0,i)}function I(O){o=O,r(1,o)}function C(O){i=O,r(0,i)}function N(O){o=O,r(1,o)}return t.$$set=O=>{"map"in O&&r(0,i=O.map),"layer"in O&&r(1,o=O.layer)},[i,o,u,c,s,f,y,b,A,I,C,N]}class WN extends di{constructor(e){super(),pi(this,e,GN,$N,hi,{map:0,layer:1})}}function ZN(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:1,step:.1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function XN(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"raster-brightness-max");return y||(y=1),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"raster-brightness-max",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class YN extends di{constructor(e){super(),pi(this,e,XN,ZN,hi,{map:1,layer:2})}}function KN(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:1,step:.1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function JN(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"raster-brightness-min");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"raster-brightness-min",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class QN extends di{constructor(e){super(),pi(this,e,JN,KN,hi,{map:1,layer:2})}}function eR(t){let e,r,i;function o(c){t[3](c)}let u={min:-1,max:1,step:.1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function tR(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"raster-contrast");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"raster-contrast",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class rR extends di{constructor(e){super(),pi(this,e,tR,eR,hi,{map:1,layer:2})}}function iR(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:359,step:1,unit:"°"};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function nR(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"raster-hue-rotate");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"raster-hue-rotate",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class oR extends di{constructor(e){super(),pi(this,e,nR,iR,hi,{map:1,layer:2})}}function aR(t){let e,r,i;function o(c){t[3](c)}let u={min:-1,max:1,step:.1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function sR(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"raster-saturation");return y||(y=0),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"raster-saturation",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class lR extends di{constructor(e){super(),pi(this,e,sR,aR,hi,{map:1,layer:2})}}function uR(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[1]!==void 0&&(s.options=t[1]),t[0]!==void 0&&(s.selectedValue=t[0]),e=new Y2({props:s}),Ut.push(()=>Xt(e,"options",u)),Ut.push(()=>Xt(e,"selectedValue",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,[y]){const b={};!r&&y&2&&(r=!0,b.options=f[1],er(()=>r=!1)),!i&&y&1&&(i=!0,b.selectedValue=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function cR(t,e,r){let{map:i}=e,{layer:o}=e,u=[{title:"linear",value:"linear"},{title:"nearest",value:"nearest"}],s=(()=>{let A=i.getPaintProperty(o.id,"raster-resampling");return A||(A=u[0].value),A})();const f=()=>{i==null||i.setPaintProperty(o.id,"raster-resampling",s)};function y(A){u=A,r(1,u)}function b(A){s=A,r(0,s)}return t.$$set=A=>{"map"in A&&r(2,i=A.map),"layer"in A&&r(3,o=A.layer)},t.$$.update=()=>{t.$$.dirty&1&&f()},[s,u,i,o,y,b]}class fR extends di{constructor(e){super(),pi(this,e,cR,uR,hi,{map:2,layer:3})}}function hR(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function dR(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new YN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function pR(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new QN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function mR(t){let e,r,i,o;function u(f){t[8](f)}function c(f){t[9](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new rR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function gR(t){let e,r,i,o;function u(f){t[10](f)}function c(f){t[11](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new oR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function yR(t){let e,r,i,o;function u(f){t[12](f)}function c(f){t[13](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new fR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function _R(t){let e,r,i,o;function u(f){t[14](f)}function c(f){t[15](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function vR(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N;return e=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"raster",property:"raster-opacity"},$$slots:{default:[hR]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Raster brightness max",help:{type:"paint",layerType:"raster",property:"raster-brightness-max"},$$slots:{default:[dR]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Raster brightness min",help:{type:"paint",layerType:"raster",property:"raster-brightness-min"},$$slots:{default:[pR]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Raster contrast",help:{type:"paint",layerType:"raster",property:"raster-contrast"},$$slots:{default:[mR]},$$scope:{ctx:t}}}),y=new Tn({props:{title:"Raster hue rotate",help:{type:"paint",layerType:"raster",property:"raster-hue-rotate"},$$slots:{default:[gR]},$$scope:{ctx:t}}}),A=new Tn({props:{title:"Raster resampling",help:{type:"paint",layerType:"raster",property:"raster-resampling"},$$slots:{default:[yR]},$$scope:{ctx:t}}}),C=new Tn({props:{title:"Raster saturation",help:{type:"paint",layerType:"raster",property:"raster-saturation"},$$slots:{default:[_R]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment),f=ir(),Ht(y.$$.fragment),b=ir(),Ht(A.$$.fragment),I=ir(),Ht(C.$$.fragment)},l(O){Yt(e.$$.fragment,O),r=nr(O),Yt(i.$$.fragment,O),o=nr(O),Yt(u.$$.fragment,O),c=nr(O),Yt(s.$$.fragment,O),f=nr(O),Yt(y.$$.fragment,O),b=nr(O),Yt(A.$$.fragment,O),I=nr(O),Yt(C.$$.fragment,O)},m(O,$){$t(e,O,$),dt(O,r,$),$t(i,O,$),dt(O,o,$),$t(u,O,$),dt(O,c,$),$t(s,O,$),dt(O,f,$),$t(y,O,$),dt(O,b,$),$t(A,O,$),dt(O,I,$),$t(C,O,$),N=!0},p(O,[$]){const G={};$&65539&&(G.$$scope={dirty:$,ctx:O}),e.$set(G);const Z={};$&65539&&(Z.$$scope={dirty:$,ctx:O}),i.$set(Z);const ee={};$&65539&&(ee.$$scope={dirty:$,ctx:O}),u.$set(ee);const te={};$&65539&&(te.$$scope={dirty:$,ctx:O}),s.$set(te);const _e={};$&65539&&(_e.$$scope={dirty:$,ctx:O}),y.$set(_e);const le={};$&65539&&(le.$$scope={dirty:$,ctx:O}),A.$set(le);const we={};$&65539&&(we.$$scope={dirty:$,ctx:O}),C.$set(we)},i(O){N||(We(e.$$.fragment,O),We(i.$$.fragment,O),We(u.$$.fragment,O),We(s.$$.fragment,O),We(y.$$.fragment,O),We(A.$$.fragment,O),We(C.$$.fragment,O),N=!0)},o(O){et(e.$$.fragment,O),et(i.$$.fragment,O),et(u.$$.fragment,O),et(s.$$.fragment,O),et(y.$$.fragment,O),et(A.$$.fragment,O),et(C.$$.fragment,O),N=!1},d(O){O&&(he(r),he(o),he(c),he(f),he(b),he(I)),Gt(e,O),Gt(i,O),Gt(u,O),Gt(s,O),Gt(y,O),Gt(A,O),Gt(C,O)}}}function bR(t,e,r){let{map:i}=e,{layer:o}=e;function u(ee){i=ee,r(0,i)}function c(ee){o=ee,r(1,o)}function s(ee){i=ee,r(0,i)}function f(ee){o=ee,r(1,o)}function y(ee){i=ee,r(0,i)}function b(ee){o=ee,r(1,o)}function A(ee){i=ee,r(0,i)}function I(ee){o=ee,r(1,o)}function C(ee){i=ee,r(0,i)}function N(ee){o=ee,r(1,o)}function O(ee){i=ee,r(0,i)}function $(ee){o=ee,r(1,o)}function G(ee){i=ee,r(0,i)}function Z(ee){o=ee,r(1,o)}return t.$$set=ee=>{"map"in ee&&r(0,i=ee.map),"layer"in ee&&r(1,o=ee.layer)},[i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z]}class wR extends di{constructor(e){super(),pi(this,e,bR,vR,hi,{map:0,layer:1})}}function xR(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:.1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function kR(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"heatmap-intensity");return y||(y=1),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"heatmap-intensity",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class AR extends di{constructor(e){super(),pi(this,e,kR,xR,hi,{map:1,layer:2})}}function SR(t){let e,r,i;function o(c){t[3](c)}let u={min:1,max:100,step:1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function ER(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"heatmap-radius");return y||(y=30),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"heatmap-radius",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class CR extends di{constructor(e){super(),pi(this,e,ER,SR,hi,{map:1,layer:2})}}function IR(t){let e,r,i;function o(c){t[3](c)}let u={min:0,max:10,step:.1,unit:""};return t[0]!==void 0&&(u.value=t[0]),e=new Za({props:u}),Ut.push(()=>Xt(e,"value",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function LR(t,e,r){let{map:i}=e,{layer:o}=e,c=(()=>{let y=i.getPaintProperty(o.id,"heatmap-weight");return y||(y=30),y})();const s=()=>{i==null||i.setPaintProperty(o.id,"heatmap-weight",c)};function f(y){c=y,r(0,c)}return t.$$set=y=>{"map"in y&&r(1,i=y.map),"layer"in y&&r(2,o=y.layer)},t.$$.update=()=>{t.$$.dirty&1&&s()},[c,i,o,f]}class TR extends di{constructor(e){super(),pi(this,e,LR,IR,hi,{map:1,layer:2})}}function J4(t,e,r){const i=t.slice();return i[11]=e[r],i[12]=e,i[13]=r,i}function Q4(t){let e,r,i,o,u,c;function s(A){t[6](A,t[11])}function f(A){t[7](A,t[11])}function y(){return t[8](t[13])}let b={};return t[11].color!==void 0&&(b.color=t[11].color),t[11].value!==void 0&&(b.label=t[11].value),r=new tv({props:b}),Ut.push(()=>Xt(r,"color",s)),Ut.push(()=>Xt(r,"label",f)),r.$on("change",y),{c(){e=Je("div"),Ht(r.$$.fragment),u=ir(),this.h()},l(A){e=Qe(A,"DIV",{class:!0});var I=vt(e);Yt(r.$$.fragment,I),u=nr(I),I.forEach(he),this.h()},h(){ge(e,"class","row svelte-zzq0ed")},m(A,I){dt(A,e,I),$t(r,e,null),Ke(e,u),c=!0},p(A,I){t=A;const C={};!i&&I&2&&(i=!0,C.color=t[11].color,er(()=>i=!1)),!o&&I&2&&(o=!0,C.label=t[11].value,er(()=>o=!1)),r.$set(C)},i(A){c||(We(r.$$.fragment,A),c=!0)},o(A){et(r.$$.fragment,A),c=!1},d(A){A&&he(e),Gt(r)}}}function PR(t){let e,r,i,o,u,c,s=dn(t[1]),f=[];for(let b=0;b<s.length;b+=1)f[b]=Q4(J4(t,s,b));const y=b=>et(f[b],1,1,()=>{f[b]=null});return{c(){e=Je("p"),r=Fi("Rendered by "),i=Fi(t[0]),o=ir(),u=Je("div");for(let b=0;b<f.length;b+=1)f[b].c();this.h()},l(b){e=Qe(b,"P",{class:!0});var A=vt(e);r=Bi(A,"Rendered by "),i=Bi(A,t[0]),A.forEach(he),o=nr(b),u=Qe(b,"DIV",{class:!0});var I=vt(u);for(let C=0;C<f.length;C+=1)f[C].l(I);I.forEach(he),this.h()},h(){ge(e,"class","description svelte-zzq0ed"),ge(u,"class","color-table svelte-zzq0ed")},m(b,A){dt(b,e,A),Ke(e,r),Ke(e,i),dt(b,o,A),dt(b,u,A);for(let I=0;I<f.length;I+=1)f[I]&&f[I].m(u,null);c=!0},p(b,[A]){if((!c||A&1)&&Dn(i,b[0]),A&6){s=dn(b[1]);let I;for(I=0;I<s.length;I+=1){const C=J4(b,s,I);f[I]?(f[I].p(C,A),We(f[I],1)):(f[I]=Q4(C),f[I].c(),We(f[I],1),f[I].m(u,null))}for(gn(),I=s.length;I<f.length;I+=1)y(I);yn()}},i(b){if(!c){for(let A=0;A<s.length;A+=1)We(f[A]);c=!0}},o(b){f=f.filter(Boolean);for(let A=0;A<f.length;A+=1)et(f[A]);c=!1},d(b){b&&(he(e),he(o),he(u)),na(f,b)}}}const e3=3;function MR(t,e,r){let{map:i}=e,{layer:o}=e,u,c=[],f=(()=>{let N=i.getPaintProperty(o.id,"heatmap-color");if(N||(N=["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"]),N&&N.length>0&&N[0]!=="interpolate")throw Error("invalid color values");const O=N[2];r(0,u=O[0].replace("-"," ")),r(1,c=[]);for(let $=e3;$<N.length-1;$=$+2){const G=N[$],Z=N[$+1],ee=Id(Z);c.push({color:ee.css(),value:`${G}`})}return N})();const y=()=>{i==null||i.setPaintProperty(o.id,"heatmap-color",f)},b=H_(N=>{const O=c[N];r(5,f[e3+(N+1)*2-1]=O.color,f)},100);function A(N,O){t.$$.not_equal(O.color,N)&&(O.color=N,r(1,c))}function I(N,O){t.$$.not_equal(O.value,N)&&(O.value=N,r(1,c))}const C=N=>b(N);return t.$$set=N=>{"map"in N&&r(3,i=N.map),"layer"in N&&r(4,o=N.layer)},t.$$.update=()=>{t.$$.dirty&32&&y()},[u,c,b,i,o,f,A,I,C]}class DR extends di{constructor(e){super(),pi(this,e,MR,PR,hi,{map:3,layer:4})}}function zR(t){let e,r,i,o;function u(f){t[2](f)}function c(f){t[3](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new lh({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function NR(t){let e,r,i,o;function u(f){t[4](f)}function c(f){t[5](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new DR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function RR(t){let e,r,i,o;function u(f){t[6](f)}function c(f){t[7](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new AR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function OR(t){let e,r,i,o;function u(f){t[8](f)}function c(f){t[9](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new CR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function FR(t){let e,r,i,o;function u(f){t[10](f)}function c(f){t[11](f)}let s={};return t[0]!==void 0&&(s.map=t[0]),t[1]!==void 0&&(s.layer=t[1]),e=new TR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y&1&&(r=!0,b.map=f[0],er(()=>r=!1)),!i&&y&2&&(i=!0,b.layer=f[1],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function BR(t){let e,r,i,o,u,c,s,f,y,b;return e=new Tn({props:{title:"Opacity",help:{type:"paint",layerType:"heatmap",property:"heatmap-opacity"},$$slots:{default:[zR]},$$scope:{ctx:t}}}),i=new Tn({props:{title:"Heatmap color",help:{type:"paint",layerType:"heatmap",property:"heatmap-color"},$$slots:{default:[NR]},$$scope:{ctx:t}}}),u=new Tn({props:{title:"Heatmap intensity",help:{type:"paint",layerType:"heatmap",property:"heatmap-intensity"},$$slots:{default:[RR]},$$scope:{ctx:t}}}),s=new Tn({props:{title:"Heatmap radius",help:{type:"paint",layerType:"heatmap",property:"heatmap-radius"},$$slots:{default:[OR]},$$scope:{ctx:t}}}),y=new Tn({props:{title:"Heatmap weight",help:{type:"paint",layerType:"heatmap",property:"heatmap-weight"},$$slots:{default:[FR]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment),r=ir(),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),c=ir(),Ht(s.$$.fragment),f=ir(),Ht(y.$$.fragment)},l(A){Yt(e.$$.fragment,A),r=nr(A),Yt(i.$$.fragment,A),o=nr(A),Yt(u.$$.fragment,A),c=nr(A),Yt(s.$$.fragment,A),f=nr(A),Yt(y.$$.fragment,A)},m(A,I){$t(e,A,I),dt(A,r,I),$t(i,A,I),dt(A,o,I),$t(u,A,I),dt(A,c,I),$t(s,A,I),dt(A,f,I),$t(y,A,I),b=!0},p(A,[I]){const C={};I&4099&&(C.$$scope={dirty:I,ctx:A}),e.$set(C);const N={};I&4099&&(N.$$scope={dirty:I,ctx:A}),i.$set(N);const O={};I&4099&&(O.$$scope={dirty:I,ctx:A}),u.$set(O);const $={};I&4099&&($.$$scope={dirty:I,ctx:A}),s.$set($);const G={};I&4099&&(G.$$scope={dirty:I,ctx:A}),y.$set(G)},i(A){b||(We(e.$$.fragment,A),We(i.$$.fragment,A),We(u.$$.fragment,A),We(s.$$.fragment,A),We(y.$$.fragment,A),b=!0)},o(A){et(e.$$.fragment,A),et(i.$$.fragment,A),et(u.$$.fragment,A),et(s.$$.fragment,A),et(y.$$.fragment,A),b=!1},d(A){A&&(he(r),he(o),he(c),he(f)),Gt(e,A),Gt(i,A),Gt(u,A),Gt(s,A),Gt(y,A)}}}function jR(t,e,r){let{map:i}=e,{layer:o}=e;function u(O){i=O,r(0,i)}function c(O){o=O,r(1,o)}function s(O){i=O,r(0,i)}function f(O){o=O,r(1,o)}function y(O){i=O,r(0,i)}function b(O){o=O,r(1,o)}function A(O){i=O,r(0,i)}function I(O){o=O,r(1,o)}function C(O){i=O,r(0,i)}function N(O){o=O,r(1,o)}return t.$$set=O=>{"map"in O&&r(0,i=O.map),"layer"in O&&r(1,o=O.layer)},[i,o,u,c,s,f,y,b,A,I,C,N]}class UR extends di{constructor(e){super(),pi(this,e,jR,BR,hi,{map:0,layer:1})}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Zx(t){return typeof t>"u"||t===null}function qR(t){return typeof t=="object"&&t!==null}function VR(t){return Array.isArray(t)?t:Zx(t)?[]:[t]}function HR(t,e){var r,i,o,u;if(e)for(u=Object.keys(e),r=0,i=u.length;r<i;r+=1)o=u[r],t[o]=e[o];return t}function $R(t,e){var r="",i;for(i=0;i<e;i+=1)r+=t;return r}function GR(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var WR=Zx,ZR=qR,XR=VR,YR=$R,KR=GR,JR=HR,Xs={isNothing:WR,isObject:ZR,toArray:XR,repeat:YR,isNegativeZero:KR,extend:JR};function Xx(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),i+" "+r):i}function Up(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Xx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Up.prototype=Object.create(Error.prototype);Up.prototype.constructor=Up;Up.prototype.toString=function(e){return this.name+": "+Xx(this,e)};var Fu=Up;function gg(t,e,r,i,o){var u="",c="",s=Math.floor(o/2)-1;return i-e>s&&(u=" ... ",e=i-s+u.length),r-i>s&&(c=" ...",r=i+s-c.length),{str:u+t.slice(e,r).replace(/\t/g,"→")+c,pos:i-e+u.length}}function yg(t,e){return Xs.repeat(" ",e-t.length)+t}function QR(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],o=[],u,c=-1;u=r.exec(t.buffer);)o.push(u.index),i.push(u.index+u[0].length),t.position<=u.index&&c<0&&(c=i.length-2);c<0&&(c=i.length-1);var s="",f,y,b=Math.min(t.line+e.linesAfter,o.length).toString().length,A=e.maxLength-(e.indent+b+3);for(f=1;f<=e.linesBefore&&!(c-f<0);f++)y=gg(t.buffer,i[c-f],o[c-f],t.position-(i[c]-i[c-f]),A),s=Xs.repeat(" ",e.indent)+yg((t.line-f+1).toString(),b)+" | "+y.str+`
`+s;for(y=gg(t.buffer,i[c],o[c],t.position,A),s+=Xs.repeat(" ",e.indent)+yg((t.line+1).toString(),b)+" | "+y.str+`
`,s+=Xs.repeat("-",e.indent+b+3+y.pos)+`^
`,f=1;f<=e.linesAfter&&!(c+f>=o.length);f++)y=gg(t.buffer,i[c+f],o[c+f],t.position-(i[c]-i[c+f]),A),s+=Xs.repeat(" ",e.indent)+yg((t.line+f+1).toString(),b)+" | "+y.str+`
`;return s.replace(/\n$/,"")}var eO=QR,tO=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],rO=["scalar","sequence","mapping"];function iO(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(i){e[String(i)]=r})}),e}function nO(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(tO.indexOf(r)===-1)throw new Fu('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=iO(e.styleAliases||null),rO.indexOf(this.kind)===-1)throw new Fu('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var $l=nO;function t3(t,e){var r=[];return t[e].forEach(function(i){var o=r.length;r.forEach(function(u,c){u.tag===i.tag&&u.kind===i.kind&&u.multi===i.multi&&(o=c)}),r[o]=i}),r}function oO(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function i(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(i);return t}function By(t){return this.extend(t)}By.prototype.extend=function(e){var r=[],i=[];if(e instanceof $l)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new Fu("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(u){if(!(u instanceof $l))throw new Fu("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new Fu("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new Fu("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(u){if(!(u instanceof $l))throw new Fu("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(By.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=t3(o,"implicit"),o.compiledExplicit=t3(o,"explicit"),o.compiledTypeMap=oO(o.compiledImplicit,o.compiledExplicit),o};var Yx=By,Kx=new $l("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Jx=new $l("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Qx=new $l("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),ek=new Yx({explicit:[Kx,Jx,Qx]});function aO(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function sO(){return null}function lO(t){return t===null}var tk=new $l("tag:yaml.org,2002:null",{kind:"scalar",resolve:aO,construct:sO,predicate:lO,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function uO(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function cO(t){return t==="true"||t==="True"||t==="TRUE"}function fO(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var rk=new $l("tag:yaml.org,2002:bool",{kind:"scalar",resolve:uO,construct:cO,predicate:fO,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function hO(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function dO(t){return 48<=t&&t<=55}function pO(t){return 48<=t&&t<=57}function mO(t){if(t===null)return!1;var e=t.length,r=0,i=!1,o;if(!e)return!1;if(o=t[r],(o==="-"||o==="+")&&(o=t[++r]),o==="0"){if(r+1===e)return!0;if(o=t[++r],o==="b"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;i=!0}return i&&o!=="_"}if(o==="x"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!hO(t.charCodeAt(r)))return!1;i=!0}return i&&o!=="_"}if(o==="o"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!dO(t.charCodeAt(r)))return!1;i=!0}return i&&o!=="_"}}if(o==="_")return!1;for(;r<e;r++)if(o=t[r],o!=="_"){if(!pO(t.charCodeAt(r)))return!1;i=!0}return!(!i||o==="_")}function gO(t){var e=t,r=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function yO(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Xs.isNegativeZero(t)}var ik=new $l("tag:yaml.org,2002:int",{kind:"scalar",resolve:mO,construct:gO,predicate:yO,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),_O=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function vO(t){return!(t===null||!_O.test(t)||t[t.length-1]==="_")}function bO(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var wO=/^[-+]?[0-9]+e/;function xO(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Xs.isNegativeZero(t))return"-0.0";return r=t.toString(10),wO.test(r)?r.replace("e",".e"):r}function kO(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Xs.isNegativeZero(t))}var nk=new $l("tag:yaml.org,2002:float",{kind:"scalar",resolve:vO,construct:bO,predicate:kO,represent:xO,defaultStyle:"lowercase"}),ok=ek.extend({implicit:[tk,rk,ik,nk]}),ak=ok,sk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),lk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function AO(t){return t===null?!1:sk.exec(t)!==null||lk.exec(t)!==null}function SO(t){var e,r,i,o,u,c,s,f=0,y=null,b,A,I;if(e=sk.exec(t),e===null&&(e=lk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],i=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(r,i,o));if(u=+e[4],c=+e[5],s=+e[6],e[7]){for(f=e[7].slice(0,3);f.length<3;)f+="0";f=+f}return e[9]&&(b=+e[10],A=+(e[11]||0),y=(b*60+A)*6e4,e[9]==="-"&&(y=-y)),I=new Date(Date.UTC(r,i,o,u,c,s,f)),y&&I.setTime(I.getTime()-y),I}function EO(t){return t.toISOString()}var uk=new $l("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:AO,construct:SO,instanceOf:Date,represent:EO});function CO(t){return t==="<<"||t===null}var ck=new $l("tag:yaml.org,2002:merge",{kind:"scalar",resolve:CO}),iv=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function IO(t){if(t===null)return!1;var e,r,i=0,o=t.length,u=iv;for(r=0;r<o;r++)if(e=u.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function LO(t){var e,r,i=t.replace(/[\r\n=]/g,""),o=i.length,u=iv,c=0,s=[];for(e=0;e<o;e++)e%4===0&&e&&(s.push(c>>16&255),s.push(c>>8&255),s.push(c&255)),c=c<<6|u.indexOf(i.charAt(e));return r=o%4*6,r===0?(s.push(c>>16&255),s.push(c>>8&255),s.push(c&255)):r===18?(s.push(c>>10&255),s.push(c>>2&255)):r===12&&s.push(c>>4&255),new Uint8Array(s)}function TO(t){var e="",r=0,i,o,u=t.length,c=iv;for(i=0;i<u;i++)i%3===0&&i&&(e+=c[r>>18&63],e+=c[r>>12&63],e+=c[r>>6&63],e+=c[r&63]),r=(r<<8)+t[i];return o=u%3,o===0?(e+=c[r>>18&63],e+=c[r>>12&63],e+=c[r>>6&63],e+=c[r&63]):o===2?(e+=c[r>>10&63],e+=c[r>>4&63],e+=c[r<<2&63],e+=c[64]):o===1&&(e+=c[r>>2&63],e+=c[r<<4&63],e+=c[64],e+=c[64]),e}function PO(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var fk=new $l("tag:yaml.org,2002:binary",{kind:"scalar",resolve:IO,construct:LO,predicate:PO,represent:TO}),MO=Object.prototype.hasOwnProperty,DO=Object.prototype.toString;function zO(t){if(t===null)return!0;var e=[],r,i,o,u,c,s=t;for(r=0,i=s.length;r<i;r+=1){if(o=s[r],c=!1,DO.call(o)!=="[object Object]")return!1;for(u in o)if(MO.call(o,u))if(!c)c=!0;else return!1;if(!c)return!1;if(e.indexOf(u)===-1)e.push(u);else return!1}return!0}function NO(t){return t!==null?t:[]}var hk=new $l("tag:yaml.org,2002:omap",{kind:"sequence",resolve:zO,construct:NO}),RO=Object.prototype.toString;function OO(t){if(t===null)return!0;var e,r,i,o,u,c=t;for(u=new Array(c.length),e=0,r=c.length;e<r;e+=1){if(i=c[e],RO.call(i)!=="[object Object]"||(o=Object.keys(i),o.length!==1))return!1;u[e]=[o[0],i[o[0]]]}return!0}function FO(t){if(t===null)return[];var e,r,i,o,u,c=t;for(u=new Array(c.length),e=0,r=c.length;e<r;e+=1)i=c[e],o=Object.keys(i),u[e]=[o[0],i[o[0]]];return u}var dk=new $l("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:OO,construct:FO}),BO=Object.prototype.hasOwnProperty;function jO(t){if(t===null)return!0;var e,r=t;for(e in r)if(BO.call(r,e)&&r[e]!==null)return!1;return!0}function UO(t){return t!==null?t:{}}var pk=new $l("tag:yaml.org,2002:set",{kind:"mapping",resolve:jO,construct:UO}),nv=ak.extend({implicit:[uk,ck],explicit:[fk,hk,dk,pk]}),ah=Object.prototype.hasOwnProperty,S2=1,mk=2,gk=3,E2=4,_g=1,qO=2,r3=3,VO=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,HO=/[\x85\u2028\u2029]/,$O=/[,\[\]\{\}]/,yk=/^(?:!|!!|![a-z\-]+!)$/i,_k=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function i3(t){return Object.prototype.toString.call(t)}function af(t){return t===10||t===13}function Ch(t){return t===9||t===32}function cc(t){return t===9||t===32||t===10||t===13}function hd(t){return t===44||t===91||t===93||t===123||t===125}function GO(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function WO(t){return t===120?2:t===117?4:t===85?8:0}function ZO(t){return 48<=t&&t<=57?t-48:-1}function n3(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function XO(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var vk=new Array(256),bk=new Array(256);for(var Xh=0;Xh<256;Xh++)vk[Xh]=n3(Xh)?1:0,bk[Xh]=n3(Xh);function YO(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||nv,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=eO(r),new Fu(e,r)}function An(t,e){throw wk(t,e)}function C2(t,e){t.onWarning&&t.onWarning.call(null,wk(t,e))}var o3={YAML:function(e,r,i){var o,u,c;e.version!==null&&An(e,"duplication of %YAML directive"),i.length!==1&&An(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),o===null&&An(e,"ill-formed argument of the YAML directive"),u=parseInt(o[1],10),c=parseInt(o[2],10),u!==1&&An(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=c<2,c!==1&&c!==2&&C2(e,"unsupported YAML version of the document")},TAG:function(e,r,i){var o,u;i.length!==2&&An(e,"TAG directive accepts exactly two arguments"),o=i[0],u=i[1],yk.test(o)||An(e,"ill-formed tag handle (first argument) of the TAG directive"),ah.call(e.tagMap,o)&&An(e,'there is a previously declared suffix for "'+o+'" tag handle'),_k.test(u)||An(e,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{An(e,"tag prefix is malformed: "+u)}e.tagMap[o]=u}};function eh(t,e,r,i){var o,u,c,s;if(e<r){if(s=t.input.slice(e,r),i)for(o=0,u=s.length;o<u;o+=1)c=s.charCodeAt(o),c===9||32<=c&&c<=1114111||An(t,"expected valid JSON character");else VO.test(s)&&An(t,"the stream contains non-printable characters");t.result+=s}}function a3(t,e,r,i){var o,u,c,s;for(Xs.isObject(r)||An(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),c=0,s=o.length;c<s;c+=1)u=o[c],ah.call(e,u)||(e[u]=r[u],i[u]=!0)}function dd(t,e,r,i,o,u,c,s,f){var y,b;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),y=0,b=o.length;y<b;y+=1)Array.isArray(o[y])&&An(t,"nested arrays are not supported inside keys"),typeof o=="object"&&i3(o[y])==="[object Object]"&&(o[y]="[object Object]");if(typeof o=="object"&&i3(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(y=0,b=u.length;y<b;y+=1)a3(t,e,u[y],r);else a3(t,e,u,r);else!t.json&&!ah.call(r,o)&&ah.call(e,o)&&(t.line=c||t.line,t.lineStart=s||t.lineStart,t.position=f||t.position,An(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:u}):e[o]=u,delete r[o];return e}function ov(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):An(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ns(t,e,r){for(var i=0,o=t.input.charCodeAt(t.position);o!==0;){for(;Ch(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(af(o))for(ov(t),o=t.input.charCodeAt(t.position),i++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return r!==-1&&i!==0&&t.lineIndent<r&&C2(t,"deficient indentation"),i}function K2(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||cc(r)))}function av(t,e){e===1?t.result+=" ":e>1&&(t.result+=Xs.repeat(`
`,e-1))}function KO(t,e,r){var i,o,u,c,s,f,y,b,A=t.kind,I=t.result,C;if(C=t.input.charCodeAt(t.position),cc(C)||hd(C)||C===35||C===38||C===42||C===33||C===124||C===62||C===39||C===34||C===37||C===64||C===96||(C===63||C===45)&&(o=t.input.charCodeAt(t.position+1),cc(o)||r&&hd(o)))return!1;for(t.kind="scalar",t.result="",u=c=t.position,s=!1;C!==0;){if(C===58){if(o=t.input.charCodeAt(t.position+1),cc(o)||r&&hd(o))break}else if(C===35){if(i=t.input.charCodeAt(t.position-1),cc(i))break}else{if(t.position===t.lineStart&&K2(t)||r&&hd(C))break;if(af(C))if(f=t.line,y=t.lineStart,b=t.lineIndent,Ns(t,!1,-1),t.lineIndent>=e){s=!0,C=t.input.charCodeAt(t.position);continue}else{t.position=c,t.line=f,t.lineStart=y,t.lineIndent=b;break}}s&&(eh(t,u,c,!1),av(t,t.line-f),u=c=t.position,s=!1),Ch(C)||(c=t.position+1),C=t.input.charCodeAt(++t.position)}return eh(t,u,c,!1),t.result?!0:(t.kind=A,t.result=I,!1)}function JO(t,e){var r,i,o;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=o=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(eh(t,i,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)i=t.position,t.position++,o=t.position;else return!0;else af(r)?(eh(t,i,o,!0),av(t,Ns(t,!1,e)),i=o=t.position):t.position===t.lineStart&&K2(t)?An(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);An(t,"unexpected end of the stream within a single quoted scalar")}function QO(t,e){var r,i,o,u,c,s;if(s=t.input.charCodeAt(t.position),s!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(s=t.input.charCodeAt(t.position))!==0;){if(s===34)return eh(t,r,t.position,!0),t.position++,!0;if(s===92){if(eh(t,r,t.position,!0),s=t.input.charCodeAt(++t.position),af(s))Ns(t,!1,e);else if(s<256&&vk[s])t.result+=bk[s],t.position++;else if((c=WO(s))>0){for(o=c,u=0;o>0;o--)s=t.input.charCodeAt(++t.position),(c=GO(s))>=0?u=(u<<4)+c:An(t,"expected hexadecimal character");t.result+=XO(u),t.position++}else An(t,"unknown escape sequence");r=i=t.position}else af(s)?(eh(t,r,i,!0),av(t,Ns(t,!1,e)),r=i=t.position):t.position===t.lineStart&&K2(t)?An(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}An(t,"unexpected end of the stream within a double quoted scalar")}function eF(t,e){var r=!0,i,o,u,c=t.tag,s,f=t.anchor,y,b,A,I,C,N=Object.create(null),O,$,G,Z;if(Z=t.input.charCodeAt(t.position),Z===91)b=93,C=!1,s=[];else if(Z===123)b=125,C=!0,s={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),Z=t.input.charCodeAt(++t.position);Z!==0;){if(Ns(t,!0,e),Z=t.input.charCodeAt(t.position),Z===b)return t.position++,t.tag=c,t.anchor=f,t.kind=C?"mapping":"sequence",t.result=s,!0;r?Z===44&&An(t,"expected the node content, but found ','"):An(t,"missed comma between flow collection entries"),$=O=G=null,A=I=!1,Z===63&&(y=t.input.charCodeAt(t.position+1),cc(y)&&(A=I=!0,t.position++,Ns(t,!0,e))),i=t.line,o=t.lineStart,u=t.position,Dd(t,e,S2,!1,!0),$=t.tag,O=t.result,Ns(t,!0,e),Z=t.input.charCodeAt(t.position),(I||t.line===i)&&Z===58&&(A=!0,Z=t.input.charCodeAt(++t.position),Ns(t,!0,e),Dd(t,e,S2,!1,!0),G=t.result),C?dd(t,s,N,$,O,G,i,o,u):A?s.push(dd(t,null,N,$,O,G,i,o,u)):s.push(O),Ns(t,!0,e),Z=t.input.charCodeAt(t.position),Z===44?(r=!0,Z=t.input.charCodeAt(++t.position)):r=!1}An(t,"unexpected end of the stream within a flow collection")}function tF(t,e){var r,i,o=_g,u=!1,c=!1,s=e,f=0,y=!1,b,A;if(A=t.input.charCodeAt(t.position),A===124)i=!1;else if(A===62)i=!0;else return!1;for(t.kind="scalar",t.result="";A!==0;)if(A=t.input.charCodeAt(++t.position),A===43||A===45)_g===o?o=A===43?r3:qO:An(t,"repeat of a chomping mode identifier");else if((b=ZO(A))>=0)b===0?An(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?An(t,"repeat of an indentation width identifier"):(s=e+b-1,c=!0);else break;if(Ch(A)){do A=t.input.charCodeAt(++t.position);while(Ch(A));if(A===35)do A=t.input.charCodeAt(++t.position);while(!af(A)&&A!==0)}for(;A!==0;){for(ov(t),t.lineIndent=0,A=t.input.charCodeAt(t.position);(!c||t.lineIndent<s)&&A===32;)t.lineIndent++,A=t.input.charCodeAt(++t.position);if(!c&&t.lineIndent>s&&(s=t.lineIndent),af(A)){f++;continue}if(t.lineIndent<s){o===r3?t.result+=Xs.repeat(`
`,u?1+f:f):o===_g&&u&&(t.result+=`
`);break}for(i?Ch(A)?(y=!0,t.result+=Xs.repeat(`
`,u?1+f:f)):y?(y=!1,t.result+=Xs.repeat(`
`,f+1)):f===0?u&&(t.result+=" "):t.result+=Xs.repeat(`
`,f):t.result+=Xs.repeat(`
`,u?1+f:f),u=!0,c=!0,f=0,r=t.position;!af(A)&&A!==0;)A=t.input.charCodeAt(++t.position);eh(t,r,t.position,!1)}return!0}function s3(t,e){var r,i=t.tag,o=t.anchor,u=[],c,s=!1,f;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),f=t.input.charCodeAt(t.position);f!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,An(t,"tab characters must not be used in indentation")),!(f!==45||(c=t.input.charCodeAt(t.position+1),!cc(c))));){if(s=!0,t.position++,Ns(t,!0,-1)&&t.lineIndent<=e){u.push(null),f=t.input.charCodeAt(t.position);continue}if(r=t.line,Dd(t,e,gk,!1,!0),u.push(t.result),Ns(t,!0,-1),f=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&f!==0)An(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return s?(t.tag=i,t.anchor=o,t.kind="sequence",t.result=u,!0):!1}function rF(t,e,r){var i,o,u,c,s,f,y=t.tag,b=t.anchor,A={},I=Object.create(null),C=null,N=null,O=null,$=!1,G=!1,Z;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=A),Z=t.input.charCodeAt(t.position);Z!==0;){if(!$&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,An(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),u=t.line,(Z===63||Z===58)&&cc(i))Z===63?($&&(dd(t,A,I,C,N,null,c,s,f),C=N=O=null),G=!0,$=!0,o=!0):$?($=!1,o=!0):An(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,Z=i;else{if(c=t.line,s=t.lineStart,f=t.position,!Dd(t,r,mk,!1,!0))break;if(t.line===u){for(Z=t.input.charCodeAt(t.position);Ch(Z);)Z=t.input.charCodeAt(++t.position);if(Z===58)Z=t.input.charCodeAt(++t.position),cc(Z)||An(t,"a whitespace character is expected after the key-value separator within a block mapping"),$&&(dd(t,A,I,C,N,null,c,s,f),C=N=O=null),G=!0,$=!1,o=!1,C=t.tag,N=t.result;else if(G)An(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=y,t.anchor=b,!0}else if(G)An(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=y,t.anchor=b,!0}if((t.line===u||t.lineIndent>e)&&($&&(c=t.line,s=t.lineStart,f=t.position),Dd(t,e,E2,!0,o)&&($?N=t.result:O=t.result),$||(dd(t,A,I,C,N,O,c,s,f),C=N=O=null),Ns(t,!0,-1),Z=t.input.charCodeAt(t.position)),(t.line===u||t.lineIndent>e)&&Z!==0)An(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return $&&dd(t,A,I,C,N,null,c,s,f),G&&(t.tag=y,t.anchor=b,t.kind="mapping",t.result=A),G}function iF(t){var e,r=!1,i=!1,o,u,c;if(c=t.input.charCodeAt(t.position),c!==33)return!1;if(t.tag!==null&&An(t,"duplication of a tag property"),c=t.input.charCodeAt(++t.position),c===60?(r=!0,c=t.input.charCodeAt(++t.position)):c===33?(i=!0,o="!!",c=t.input.charCodeAt(++t.position)):o="!",e=t.position,r){do c=t.input.charCodeAt(++t.position);while(c!==0&&c!==62);t.position<t.length?(u=t.input.slice(e,t.position),c=t.input.charCodeAt(++t.position)):An(t,"unexpected end of the stream within a verbatim tag")}else{for(;c!==0&&!cc(c);)c===33&&(i?An(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),yk.test(o)||An(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),c=t.input.charCodeAt(++t.position);u=t.input.slice(e,t.position),$O.test(u)&&An(t,"tag suffix cannot contain flow indicator characters")}u&&!_k.test(u)&&An(t,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{An(t,"tag name is malformed: "+u)}return r?t.tag=u:ah.call(t.tagMap,o)?t.tag=t.tagMap[o]+u:o==="!"?t.tag="!"+u:o==="!!"?t.tag="tag:yaml.org,2002:"+u:An(t,'undeclared tag handle "'+o+'"'),!0}function nF(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&An(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!cc(r)&&!hd(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&An(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function oF(t){var e,r,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!cc(i)&&!hd(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&An(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ah.call(t.anchorMap,r)||An(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ns(t,!0,-1),!0}function Dd(t,e,r,i,o){var u,c,s,f=1,y=!1,b=!1,A,I,C,N,O,$;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,u=c=s=E2===r||gk===r,i&&Ns(t,!0,-1)&&(y=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),f===1)for(;iF(t)||nF(t);)Ns(t,!0,-1)?(y=!0,s=u,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):s=!1;if(s&&(s=y||o),(f===1||E2===r)&&(S2===r||mk===r?O=e:O=e+1,$=t.position-t.lineStart,f===1?s&&(s3(t,$)||rF(t,$,O))||eF(t,O)?b=!0:(c&&tF(t,O)||JO(t,O)||QO(t,O)?b=!0:oF(t)?(b=!0,(t.tag!==null||t.anchor!==null)&&An(t,"alias node should not have any properties")):KO(t,O,S2===r)&&(b=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):f===0&&(b=s&&s3(t,$))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&An(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),A=0,I=t.implicitTypes.length;A<I;A+=1)if(N=t.implicitTypes[A],N.resolve(t.result)){t.result=N.construct(t.result),t.tag=N.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ah.call(t.typeMap[t.kind||"fallback"],t.tag))N=t.typeMap[t.kind||"fallback"][t.tag];else for(N=null,C=t.typeMap.multi[t.kind||"fallback"],A=0,I=C.length;A<I;A+=1)if(t.tag.slice(0,C[A].tag.length)===C[A].tag){N=C[A];break}N||An(t,"unknown tag !<"+t.tag+">"),t.result!==null&&N.kind!==t.kind&&An(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+N.kind+'", not "'+t.kind+'"'),N.resolve(t.result,t.tag)?(t.result=N.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):An(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||b}function aF(t){var e=t.position,r,i,o,u=!1,c;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(c=t.input.charCodeAt(t.position))!==0&&(Ns(t,!0,-1),c=t.input.charCodeAt(t.position),!(t.lineIndent>0||c!==37));){for(u=!0,c=t.input.charCodeAt(++t.position),r=t.position;c!==0&&!cc(c);)c=t.input.charCodeAt(++t.position);for(i=t.input.slice(r,t.position),o=[],i.length<1&&An(t,"directive name must not be less than one character in length");c!==0;){for(;Ch(c);)c=t.input.charCodeAt(++t.position);if(c===35){do c=t.input.charCodeAt(++t.position);while(c!==0&&!af(c));break}if(af(c))break;for(r=t.position;c!==0&&!cc(c);)c=t.input.charCodeAt(++t.position);o.push(t.input.slice(r,t.position))}c!==0&&ov(t),ah.call(o3,i)?o3[i](t,i,o):C2(t,'unknown document directive "'+i+'"')}if(Ns(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ns(t,!0,-1)):u&&An(t,"directives end mark is expected"),Dd(t,t.lineIndent-1,E2,!1,!0),Ns(t,!0,-1),t.checkLineBreaks&&HO.test(t.input.slice(e,t.position))&&C2(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&K2(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ns(t,!0,-1));return}if(t.position<t.length-1)An(t,"end of the stream or a document separator is expected");else return}function xk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new YO(t,e),i=t.indexOf("\0");for(i!==-1&&(r.position=i,An(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)aF(r);return r.documents}function sF(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var i=xk(t,r);if(typeof e!="function")return i;for(var o=0,u=i.length;o<u;o+=1)e(i[o])}function lF(t,e){var r=xk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Fu("expected a single document in the stream, but found more")}}var uF=sF,cF=lF,kk={loadAll:uF,load:cF},Ak=Object.prototype.toString,Sk=Object.prototype.hasOwnProperty,sv=65279,fF=9,qp=10,hF=13,dF=32,pF=33,mF=34,jy=35,gF=37,yF=38,_F=39,vF=42,Ek=44,bF=45,I2=58,wF=61,xF=62,kF=63,AF=64,Ck=91,Ik=93,SF=96,Lk=123,EF=124,Tk=125,_u={};_u[0]="\\0";_u[7]="\\a";_u[8]="\\b";_u[9]="\\t";_u[10]="\\n";_u[11]="\\v";_u[12]="\\f";_u[13]="\\r";_u[27]="\\e";_u[34]='\\"';_u[92]="\\\\";_u[133]="\\N";_u[160]="\\_";_u[8232]="\\L";_u[8233]="\\P";var CF=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],IF=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function LF(t,e){var r,i,o,u,c,s,f;if(e===null)return{};for(r={},i=Object.keys(e),o=0,u=i.length;o<u;o+=1)c=i[o],s=String(e[c]),c.slice(0,2)==="!!"&&(c="tag:yaml.org,2002:"+c.slice(2)),f=t.compiledTypeMap.fallback[c],f&&Sk.call(f.styleAliases,s)&&(s=f.styleAliases[s]),r[c]=s;return r}function TF(t){var e,r,i;if(e=t.toString(16).toUpperCase(),t<=255)r="x",i=2;else if(t<=65535)r="u",i=4;else if(t<=4294967295)r="U",i=8;else throw new Fu("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Xs.repeat("0",i-e.length)+e}var PF=1,Vp=2;function MF(t){this.schema=t.schema||nv,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Xs.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=LF(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Vp:PF,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function l3(t,e){for(var r=Xs.repeat(" ",e),i=0,o=-1,u="",c,s=t.length;i<s;)o=t.indexOf(`
`,i),o===-1?(c=t.slice(i),i=s):(c=t.slice(i,o+1),i=o+1),c.length&&c!==`
`&&(u+=r),u+=c;return u}function Uy(t,e){return`
`+Xs.repeat(" ",t.indent*e)}function DF(t,e){var r,i,o;for(r=0,i=t.implicitTypes.length;r<i;r+=1)if(o=t.implicitTypes[r],o.resolve(e))return!0;return!1}function L2(t){return t===dF||t===fF}function Hp(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==sv||65536<=t&&t<=1114111}function u3(t){return Hp(t)&&t!==sv&&t!==hF&&t!==qp}function c3(t,e,r){var i=u3(t),o=i&&!L2(t);return(r?i:i&&t!==Ek&&t!==Ck&&t!==Ik&&t!==Lk&&t!==Tk)&&t!==jy&&!(e===I2&&!o)||u3(e)&&!L2(e)&&t===jy||e===I2&&o}function zF(t){return Hp(t)&&t!==sv&&!L2(t)&&t!==bF&&t!==kF&&t!==I2&&t!==Ek&&t!==Ck&&t!==Ik&&t!==Lk&&t!==Tk&&t!==jy&&t!==yF&&t!==vF&&t!==pF&&t!==EF&&t!==wF&&t!==xF&&t!==_F&&t!==mF&&t!==gF&&t!==AF&&t!==SF}function NF(t){return!L2(t)&&t!==I2}function dp(t,e){var r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function Pk(t){var e=/^\n* /;return e.test(t)}var Mk=1,qy=2,Dk=3,zk=4,od=5;function RF(t,e,r,i,o,u,c,s){var f,y=0,b=null,A=!1,I=!1,C=i!==-1,N=-1,O=zF(dp(t,0))&&NF(dp(t,t.length-1));if(e||c)for(f=0;f<t.length;y>=65536?f+=2:f++){if(y=dp(t,f),!Hp(y))return od;O=O&&c3(y,b,s),b=y}else{for(f=0;f<t.length;y>=65536?f+=2:f++){if(y=dp(t,f),y===qp)A=!0,C&&(I=I||f-N-1>i&&t[N+1]!==" ",N=f);else if(!Hp(y))return od;O=O&&c3(y,b,s),b=y}I=I||C&&f-N-1>i&&t[N+1]!==" "}return!A&&!I?O&&!c&&!o(t)?Mk:u===Vp?od:qy:r>9&&Pk(t)?od:c?u===Vp?od:qy:I?zk:Dk}function OF(t,e,r,i,o){t.dump=function(){if(e.length===0)return t.quotingType===Vp?'""':"''";if(!t.noCompatMode&&(CF.indexOf(e)!==-1||IF.test(e)))return t.quotingType===Vp?'"'+e+'"':"'"+e+"'";var u=t.indent*Math.max(1,r),c=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-u),s=i||t.flowLevel>-1&&r>=t.flowLevel;function f(y){return DF(t,y)}switch(RF(e,s,t.indent,c,f,t.quotingType,t.forceQuotes&&!i,o)){case Mk:return e;case qy:return"'"+e.replace(/'/g,"''")+"'";case Dk:return"|"+f3(e,t.indent)+h3(l3(e,u));case zk:return">"+f3(e,t.indent)+h3(l3(FF(e,c),u));case od:return'"'+BF(e)+'"';default:throw new Fu("impossible error: invalid scalar style")}}()}function f3(t,e){var r=Pk(t)?String(e):"",i=t[t.length-1]===`
`,o=i&&(t[t.length-2]===`
`||t===`
`),u=o?"+":i?"":"-";return r+u+`
`}function h3(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function FF(t,e){for(var r=/(\n+)([^\n]*)/g,i=function(){var y=t.indexOf(`
`);return y=y!==-1?y:t.length,r.lastIndex=y,d3(t.slice(0,y),e)}(),o=t[0]===`
`||t[0]===" ",u,c;c=r.exec(t);){var s=c[1],f=c[2];u=f[0]===" ",i+=s+(!o&&!u&&f!==""?`
`:"")+d3(f,e),o=u}return i}function d3(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,i,o=0,u,c=0,s=0,f="";i=r.exec(t);)s=i.index,s-o>e&&(u=c>o?c:s,f+=`
`+t.slice(o,u),o=u+1),c=s;return f+=`
`,t.length-o>e&&c>o?f+=t.slice(o,c)+`
`+t.slice(c+1):f+=t.slice(o),f.slice(1)}function BF(t){for(var e="",r=0,i,o=0;o<t.length;r>=65536?o+=2:o++)r=dp(t,o),i=_u[r],!i&&Hp(r)?(e+=t[o],r>=65536&&(e+=t[o+1])):e+=i||TF(r);return e}function jF(t,e,r){var i="",o=t.tag,u,c,s;for(u=0,c=r.length;u<c;u+=1)s=r[u],t.replacer&&(s=t.replacer.call(r,String(u),s)),(Rf(t,e,s,!1,!1)||typeof s>"u"&&Rf(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=o,t.dump="["+i+"]"}function p3(t,e,r,i){var o="",u=t.tag,c,s,f;for(c=0,s=r.length;c<s;c+=1)f=r[c],t.replacer&&(f=t.replacer.call(r,String(c),f)),(Rf(t,e+1,f,!0,!0,!1,!0)||typeof f>"u"&&Rf(t,e+1,null,!0,!0,!1,!0))&&((!i||o!=="")&&(o+=Uy(t,e)),t.dump&&qp===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=u,t.dump=o||"[]"}function UF(t,e,r){var i="",o=t.tag,u=Object.keys(r),c,s,f,y,b;for(c=0,s=u.length;c<s;c+=1)b="",i!==""&&(b+=", "),t.condenseFlow&&(b+='"'),f=u[c],y=r[f],t.replacer&&(y=t.replacer.call(r,f,y)),Rf(t,e,f,!1,!1)&&(t.dump.length>1024&&(b+="? "),b+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Rf(t,e,y,!1,!1)&&(b+=t.dump,i+=b));t.tag=o,t.dump="{"+i+"}"}function qF(t,e,r,i){var o="",u=t.tag,c=Object.keys(r),s,f,y,b,A,I;if(t.sortKeys===!0)c.sort();else if(typeof t.sortKeys=="function")c.sort(t.sortKeys);else if(t.sortKeys)throw new Fu("sortKeys must be a boolean or a function");for(s=0,f=c.length;s<f;s+=1)I="",(!i||o!=="")&&(I+=Uy(t,e)),y=c[s],b=r[y],t.replacer&&(b=t.replacer.call(r,y,b)),Rf(t,e+1,y,!0,!0,!0)&&(A=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,A&&(t.dump&&qp===t.dump.charCodeAt(0)?I+="?":I+="? "),I+=t.dump,A&&(I+=Uy(t,e)),Rf(t,e+1,b,!0,A)&&(t.dump&&qp===t.dump.charCodeAt(0)?I+=":":I+=": ",I+=t.dump,o+=I));t.tag=u,t.dump=o||"{}"}function m3(t,e,r){var i,o,u,c,s,f;for(o=r?t.explicitTypes:t.implicitTypes,u=0,c=o.length;u<c;u+=1)if(s=o[u],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof e=="object"&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(r?s.multi&&s.representName?t.tag=s.representName(e):t.tag=s.tag:t.tag="?",s.represent){if(f=t.styleMap[s.tag]||s.defaultStyle,Ak.call(s.represent)==="[object Function]")i=s.represent(e,f);else if(Sk.call(s.represent,f))i=s.represent[f](e,f);else throw new Fu("!<"+s.tag+'> tag resolver accepts not "'+f+'" style');t.dump=i}return!0}return!1}function Rf(t,e,r,i,o,u,c){t.tag=null,t.dump=r,m3(t,r,!1)||m3(t,r,!0);var s=Ak.call(t.dump),f=i,y;i&&(i=t.flowLevel<0||t.flowLevel>e);var b=s==="[object Object]"||s==="[object Array]",A,I;if(b&&(A=t.duplicates.indexOf(r),I=A!==-1),(t.tag!==null&&t.tag!=="?"||I||t.indent!==2&&e>0)&&(o=!1),I&&t.usedDuplicates[A])t.dump="*ref_"+A;else{if(b&&I&&!t.usedDuplicates[A]&&(t.usedDuplicates[A]=!0),s==="[object Object]")i&&Object.keys(t.dump).length!==0?(qF(t,e,t.dump,o),I&&(t.dump="&ref_"+A+t.dump)):(UF(t,e,t.dump),I&&(t.dump="&ref_"+A+" "+t.dump));else if(s==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!c&&e>0?p3(t,e-1,t.dump,o):p3(t,e,t.dump,o),I&&(t.dump="&ref_"+A+t.dump)):(jF(t,e,t.dump),I&&(t.dump="&ref_"+A+" "+t.dump));else if(s==="[object String]")t.tag!=="?"&&OF(t,t.dump,e,u,f);else{if(s==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Fu("unacceptable kind of an object to dump "+s)}t.tag!==null&&t.tag!=="?"&&(y=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?y="!"+y:y.slice(0,18)==="tag:yaml.org,2002:"?y="!!"+y.slice(18):y="!<"+y+">",t.dump=y+" "+t.dump)}return!0}function VF(t,e){var r=[],i=[],o,u;for(Vy(t,r,i),o=0,u=i.length;o<u;o+=1)e.duplicates.push(r[i[o]]);e.usedDuplicates=new Array(u)}function Vy(t,e,r){var i,o,u;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(e.push(t),Array.isArray(t))for(o=0,u=t.length;o<u;o+=1)Vy(t[o],e,r);else for(i=Object.keys(t),o=0,u=i.length;o<u;o+=1)Vy(t[i[o]],e,r)}function HF(t,e){e=e||{};var r=new MF(e);r.noRefs||VF(t,r);var i=t;return r.replacer&&(i=r.replacer.call({"":i},"",i)),Rf(r,0,i,!0,!0)?r.dump+`
`:""}var $F=HF,GF={dump:$F};function lv(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var WF=$l,ZF=Yx,XF=ek,YF=ok,KF=ak,JF=nv,QF=kk.load,eB=kk.loadAll,tB=GF.dump,rB=Fu,iB={binary:fk,float:nk,map:Qx,null:tk,pairs:dk,set:pk,timestamp:uk,bool:rk,int:ik,merge:ck,omap:hk,seq:Jx,str:Kx},nB=lv("safeLoad","load"),oB=lv("safeLoadAll","loadAll"),aB=lv("safeDump","dump"),q1={Type:WF,Schema:ZF,FAILSAFE_SCHEMA:XF,JSON_SCHEMA:YF,CORE_SCHEMA:KF,DEFAULT_SCHEMA:JF,load:QF,loadAll:eB,dump:tB,YAMLException:rB,types:iB,safeLoad:nB,safeLoadAll:oB,safeDump:aB};function sB(t){let e,r,i,o,u,c,s,f,y,b="Paint editor",A,I,C,N,O="Layout editor",$,G,Z,ee,te;i=new bo({props:{icon:bS,size:"2x"}});function _e(ue){t[8](ue)}function le(ue){t[9](ue)}let we={};return t[1]!==void 0&&(we.options=t[1]),t[0]!==void 0&&(we.selectedValue=t[0]),u=new Y2({props:we}),Ut.push(()=>Xt(u,"options",_e)),Ut.push(()=>Xt(u,"selectedValue",le)),{c(){e=Je("div"),r=Je("span"),Ht(i.$$.fragment),o=ir(),Ht(u.$$.fragment),f=ir(),y=Je("p"),y.textContent=b,A=ir(),I=Je("textarea"),C=ir(),N=Je("p"),N.textContent=O,$=ir(),G=Je("textarea"),this.h()},l(ue){e=Qe(ue,"DIV",{class:!0});var ze=vt(e);r=Qe(ze,"SPAN",{role:!0,tabindex:!0,class:!0,"data-tooltip":!0});var Ue=vt(r);Yt(i.$$.fragment,Ue),Ue.forEach(he),o=nr(ze),Yt(u.$$.fragment,ze),ze.forEach(he),f=nr(ue),y=Qe(ue,"P",{class:!0,"data-svelte-h":!0}),vo(y)!=="svelte-cr5hqa"&&(y.textContent=b),A=nr(ue),I=Qe(ue,"TEXTAREA",{class:!0}),vt(I).forEach(he),C=nr(ue),N=Qe(ue,"P",{class:!0,"data-svelte-h":!0}),vo(N)!=="svelte-85g6du"&&(N.textContent=O),$=nr(ue),G=Qe(ue,"TEXTAREA",{class:!0}),vt(G).forEach(he),this.h()},h(){ge(r,"role","button"),ge(r,"tabindex","0"),ge(r,"class","menu-button has-tooltip-bottom has-tooltip-arrow svelte-jokktb"),ge(r,"data-tooltip","Apply to map"),ge(e,"class","menu-buttons svelte-jokktb"),ge(y,"class","editor-title svelte-jokktb"),ge(I,"class","manual-editor svelte-jokktb"),ge(N,"class","editor-title svelte-jokktb"),ge(G,"class","manual-editor svelte-jokktb")},m(ue,ze){dt(ue,e,ze),Ke(e,r),$t(i,r,null),Ke(e,o),$t(u,e,null),dt(ue,f,ze),dt(ue,y,ze),dt(ue,A,ze),dt(ue,I,ze),mo(I,t[3]),dt(ue,C,ze),dt(ue,N,ze),dt(ue,$,ze),dt(ue,G,ze),mo(G,t[2]),Z=!0,ee||(te=[Dr(r,"click",t[4]),Dr(r,"keydown",t[5]),Dr(I,"input",t[10]),Dr(G,"input",t[11])],ee=!0)},p(ue,[ze]){const Ue={};!c&&ze&2&&(c=!0,Ue.options=ue[1],er(()=>c=!1)),!s&&ze&1&&(s=!0,Ue.selectedValue=ue[0],er(()=>s=!1)),u.$set(Ue),ze&8&&mo(I,ue[3]),ze&4&&mo(G,ue[2])},i(ue){Z||(We(i.$$.fragment,ue),We(u.$$.fragment,ue),Z=!0)},o(ue){et(i.$$.fragment,ue),et(u.$$.fragment,ue),Z=!1},d(ue){ue&&(he(e),he(f),he(y),he(A),he(I),he(C),he(N),he($),he(G)),Gt(i),Gt(u),ee=!1,oo(te)}}}function lB(t,e,r){let{map:i}=e,{layer:o}=e,u=[{title:"YAML",value:"yaml"},{title:"JSON",value:"json"}],{selectedFormat:c}=e,s="",f="";sh(()=>{r(2,s=y("layout")),r(3,f=y("paint"))});const y=ee=>c==="yaml"?q1.dump(o[ee]):JSON.stringify(o[ee],null,4),b=ee=>{let te=f;if(ee==="layout"&&(te=s),!te)return"";let _e="";return c==="yaml"?_e=q1.dump(JSON.parse(te)):_e=JSON.stringify(q1.load(te),null,4),_e},A=ee=>{let te,_e=s;return ee==="paint"&&(_e=f),c==="yaml"?te=q1.load(_e):te=JSON.parse(_e),te},I=()=>{const ee=A("layout");if(ee){const _e=Object.keys(ee);for(const le of _e)i.setLayoutProperty(o.id,le,ee[le])}r(6,o.layout=ee,o);const te=A("paint");if(te){const _e=Object.keys(te);for(const le of _e)i.setPaintProperty(o.id,le,te[le])}r(6,o.paint=te,o)},C=()=>{r(2,s=b("layout")),r(3,f=b("paint"))},N=ee=>{ee.key==="Enter"&&ee.target.click()};function O(ee){u=ee,r(1,u)}function $(ee){c=ee,r(0,c)}function G(){f=this.value,r(3,f)}function Z(){s=this.value,r(2,s)}return t.$$set=ee=>{"map"in ee&&r(7,i=ee.map),"layer"in ee&&r(6,o=ee.layer),"selectedFormat"in ee&&r(0,c=ee.selectedFormat)},t.$$.update=()=>{t.$$.dirty&1&&C()},[c,u,s,f,I,N,o,i,O,$,G,Z]}class uB extends di{constructor(e){super(),pi(this,e,lB,sB,hi,{map:7,layer:6,selectedFormat:0})}}var cB="tippy-box",Nk="tippy-content",fB="tippy-backdrop",Rk="tippy-arrow",Ok="tippy-svg-arrow",_h={passive:!0,capture:!0},Fk=function(){return document.body};function vg(t,e,r){if(Array.isArray(t)){var i=t[e];return i??(Array.isArray(r)?r[e]:r)}return t}function uv(t,e){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(e+"]")>-1}function Bk(t,e){return typeof t=="function"?t.apply(void 0,e):t}function g3(t,e){if(e===0)return t;var r;return function(i){clearTimeout(r),r=setTimeout(function(){t(i)},e)}}function hB(t){return t.split(/\s+/).filter(Boolean)}function ad(t){return[].concat(t)}function y3(t,e){t.indexOf(e)===-1&&t.push(e)}function dB(t){return t.filter(function(e,r){return t.indexOf(e)===r})}function pB(t){return t.split("-")[0]}function T2(t){return[].slice.call(t)}function _3(t){return Object.keys(t).reduce(function(e,r){return t[r]!==void 0&&(e[r]=t[r]),e},{})}function Ap(){return document.createElement("div")}function J2(t){return["Element","Fragment"].some(function(e){return uv(t,e)})}function mB(t){return uv(t,"NodeList")}function gB(t){return uv(t,"MouseEvent")}function yB(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function _B(t){return J2(t)?[t]:mB(t)?T2(t):Array.isArray(t)?t:T2(document.querySelectorAll(t))}function bg(t,e){t.forEach(function(r){r&&(r.style.transitionDuration=e+"ms")})}function v3(t,e){t.forEach(function(r){r&&r.setAttribute("data-state",e)})}function vB(t){var e,r=ad(t),i=r[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function bB(t,e){var r=e.clientX,i=e.clientY;return t.every(function(o){var u=o.popperRect,c=o.popperState,s=o.props,f=s.interactiveBorder,y=pB(c.placement),b=c.modifiersData.offset;if(!b)return!0;var A=y==="bottom"?b.top.y:0,I=y==="top"?b.bottom.y:0,C=y==="right"?b.left.x:0,N=y==="left"?b.right.x:0,O=u.top-i+A>f,$=i-u.bottom-I>f,G=u.left-r+C>f,Z=r-u.right-N>f;return O||$||G||Z})}function wg(t,e,r){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){t[i](o,r)})}function b3(t,e){for(var r=e;r;){var i;if(t.contains(r))return!0;r=r.getRootNode==null||(i=r.getRootNode())==null?void 0:i.host}return!1}var J0={isTouch:!1},w3=0;function wB(){J0.isTouch||(J0.isTouch=!0,window.performance&&document.addEventListener("mousemove",jk))}function jk(){var t=performance.now();t-w3<20&&(J0.isTouch=!1,document.removeEventListener("mousemove",jk)),w3=t}function xB(){var t=document.activeElement;if(yB(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function kB(){document.addEventListener("touchstart",wB,_h),window.addEventListener("blur",xB)}var AB=typeof window<"u"&&typeof document<"u",SB=AB?!!window.msCrypto:!1,EB={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},CB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},M0=Object.assign({appendTo:Fk,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},EB,CB),IB=Object.keys(M0),LB=function(e){var r=Object.keys(e);r.forEach(function(i){M0[i]=e[i]})};function Uk(t){var e=t.plugins||[],r=e.reduce(function(i,o){var u=o.name,c=o.defaultValue;if(u){var s;i[u]=t[u]!==void 0?t[u]:(s=M0[u])!=null?s:c}return i},{});return Object.assign({},t,r)}function TB(t,e){var r=e?Object.keys(Uk(Object.assign({},M0,{plugins:e}))):IB,i=r.reduce(function(o,u){var c=(t.getAttribute("data-tippy-"+u)||"").trim();if(!c)return o;if(u==="content")o[u]=c;else try{o[u]=JSON.parse(c)}catch{o[u]=c}return o},{});return i}function x3(t,e){var r=Object.assign({},e,{content:Bk(e.content,[t])},e.ignoreAttributes?{}:TB(t,e.plugins));return r.aria=Object.assign({},M0.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?e.interactive:r.aria.expanded,content:r.aria.content==="auto"?e.interactive?null:"describedby":r.aria.content},r}var PB=function(){return"innerHTML"};function Hy(t,e){t[PB()]=e}function k3(t){var e=Ap();return t===!0?e.className=Rk:(e.className=Ok,J2(t)?e.appendChild(t):Hy(e,t)),e}function A3(t,e){J2(e.content)?(Hy(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Hy(t,e.content):t.textContent=e.content)}function $y(t){var e=t.firstElementChild,r=T2(e.children);return{box:e,content:r.find(function(i){return i.classList.contains(Nk)}),arrow:r.find(function(i){return i.classList.contains(Rk)||i.classList.contains(Ok)}),backdrop:r.find(function(i){return i.classList.contains(fB)})}}function qk(t){var e=Ap(),r=Ap();r.className=cB,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var i=Ap();i.className=Nk,i.setAttribute("data-state","hidden"),A3(i,t.props),e.appendChild(r),r.appendChild(i),o(t.props,t.props);function o(u,c){var s=$y(e),f=s.box,y=s.content,b=s.arrow;c.theme?f.setAttribute("data-theme",c.theme):f.removeAttribute("data-theme"),typeof c.animation=="string"?f.setAttribute("data-animation",c.animation):f.removeAttribute("data-animation"),c.inertia?f.setAttribute("data-inertia",""):f.removeAttribute("data-inertia"),f.style.maxWidth=typeof c.maxWidth=="number"?c.maxWidth+"px":c.maxWidth,c.role?f.setAttribute("role",c.role):f.removeAttribute("role"),(u.content!==c.content||u.allowHTML!==c.allowHTML)&&A3(y,t.props),c.arrow?b?u.arrow!==c.arrow&&(f.removeChild(b),f.appendChild(k3(c.arrow))):f.appendChild(k3(c.arrow)):b&&f.removeChild(b)}return{popper:e,onUpdate:o}}qk.$$tippy=!0;var MB=1,V1=[],xg=[];function DB(t,e){var r=x3(t,Object.assign({},M0,Uk(_3(e)))),i,o,u,c=!1,s=!1,f=!1,y=!1,b,A,I,C=[],N=g3(Fr,r.interactiveDebounce),O,$=MB++,G=null,Z=dB(r.plugins),ee={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},te={id:$,reference:t,popper:Ap(),popperInstance:G,props:r,state:ee,plugins:Z,clearDelayTimeouts:ji,setProps:Ui,setContent:an,show:Gi,hide:Or,hideWithInteractivity:Br,enable:Hi,disable:Nr,unmount:Ni,destroy:qi};if(!r.render)return te;var _e=r.render(te),le=_e.popper,we=_e.onUpdate;le.setAttribute("data-tippy-root",""),le.id="tippy-"+te.id,te.popper=le,t._tippy=te,le._tippy=te;var ue=Z.map(function(kt){return kt.fn(te)}),ze=t.hasAttribute("aria-expanded");return Er(),Xe(),$e(),at("onCreate",[te]),r.showOnCreate&&Vr(),le.addEventListener("mouseenter",function(){te.props.interactive&&te.state.isVisible&&te.clearDelayTimeouts()}),le.addEventListener("mouseleave",function(){te.props.interactive&&te.props.trigger.indexOf("mouseenter")>=0&&it().addEventListener("mousemove",N)}),te;function Ue(){var kt=te.props.touch;return Array.isArray(kt)?kt:[kt,0]}function Ce(){return Ue()[0]==="hold"}function Me(){var kt;return!!((kt=te.props.render)!=null&&kt.$$tippy)}function qe(){return O||t}function it(){var kt=qe().parentNode;return kt?vB(kt):document}function xt(){return $y(le)}function yt(kt){return te.state.isMounted&&!te.state.isVisible||J0.isTouch||b&&b.type==="focus"?0:vg(te.props.delay,kt?0:1,M0.delay)}function $e(kt){kt===void 0&&(kt=!1),le.style.pointerEvents=te.props.interactive&&!kt?"":"none",le.style.zIndex=""+te.props.zIndex}function at(kt,fr,Qr){if(Qr===void 0&&(Qr=!0),ue.forEach(function(ki){ki[kt]&&ki[kt].apply(ki,fr)}),Qr){var Ei;(Ei=te.props)[kt].apply(Ei,fr)}}function mt(){var kt=te.props.aria;if(kt.content){var fr="aria-"+kt.content,Qr=le.id,Ei=ad(te.props.triggerTarget||t);Ei.forEach(function(ki){var Zn=ki.getAttribute(fr);if(te.state.isVisible)ki.setAttribute(fr,Zn?Zn+" "+Qr:Qr);else{var un=Zn&&Zn.replace(Qr,"").trim();un?ki.setAttribute(fr,un):ki.removeAttribute(fr)}})}}function Xe(){if(!(ze||!te.props.aria.expanded)){var kt=ad(te.props.triggerTarget||t);kt.forEach(function(fr){te.props.interactive?fr.setAttribute("aria-expanded",te.state.isVisible&&fr===qe()?"true":"false"):fr.removeAttribute("aria-expanded")})}}function wt(){it().removeEventListener("mousemove",N),V1=V1.filter(function(kt){return kt!==N})}function be(kt){if(!(J0.isTouch&&(f||kt.type==="mousedown"))){var fr=kt.composedPath&&kt.composedPath()[0]||kt.target;if(!(te.props.interactive&&b3(le,fr))){if(ad(te.props.triggerTarget||t).some(function(Qr){return b3(Qr,fr)})){if(J0.isTouch||te.state.isVisible&&te.props.trigger.indexOf("click")>=0)return}else at("onClickOutside",[te,kt]);te.props.hideOnClick===!0&&(te.clearDelayTimeouts(),te.hide(),s=!0,setTimeout(function(){s=!1}),te.state.isMounted||Nt())}}}function Be(){f=!0}function Ae(){f=!1}function ht(){var kt=it();kt.addEventListener("mousedown",be,!0),kt.addEventListener("touchend",be,_h),kt.addEventListener("touchstart",Ae,_h),kt.addEventListener("touchmove",Be,_h)}function Nt(){var kt=it();kt.removeEventListener("mousedown",be,!0),kt.removeEventListener("touchend",be,_h),kt.removeEventListener("touchstart",Ae,_h),kt.removeEventListener("touchmove",Be,_h)}function zt(kt,fr){Kt(kt,function(){!te.state.isVisible&&le.parentNode&&le.parentNode.contains(le)&&fr()})}function Mt(kt,fr){Kt(kt,fr)}function Kt(kt,fr){var Qr=xt().box;function Ei(ki){ki.target===Qr&&(wg(Qr,"remove",Ei),fr())}if(kt===0)return fr();wg(Qr,"remove",A),wg(Qr,"add",Ei),A=Ei}function yr(kt,fr,Qr){Qr===void 0&&(Qr=!1);var Ei=ad(te.props.triggerTarget||t);Ei.forEach(function(ki){ki.addEventListener(kt,fr,Qr),C.push({node:ki,eventType:kt,handler:fr,options:Qr})})}function Er(){Ce()&&(yr("touchstart",It,{passive:!0}),yr("touchend",Ft,{passive:!0})),hB(te.props.trigger).forEach(function(kt){if(kt!=="manual")switch(yr(kt,It),kt){case"mouseenter":yr("mouseleave",Ft);break;case"focus":yr(SB?"focusout":"blur",ct);break;case"focusin":yr("focusout",ct);break}})}function Jt(){C.forEach(function(kt){var fr=kt.node,Qr=kt.eventType,Ei=kt.handler,ki=kt.options;fr.removeEventListener(Qr,Ei,ki)}),C=[]}function It(kt){var fr,Qr=!1;if(!(!te.state.isEnabled||mr(kt)||s)){var Ei=((fr=b)==null?void 0:fr.type)==="focus";b=kt,O=kt.currentTarget,Xe(),!te.state.isVisible&&gB(kt)&&V1.forEach(function(ki){return ki(kt)}),kt.type==="click"&&(te.props.trigger.indexOf("mouseenter")<0||c)&&te.props.hideOnClick!==!1&&te.state.isVisible?Qr=!0:Vr(kt),kt.type==="click"&&(c=!Qr),Qr&&!Ei&&_i(kt)}}function Fr(kt){var fr=kt.target,Qr=qe().contains(fr)||le.contains(fr);if(!(kt.type==="mousemove"&&Qr)){var Ei=ri().concat(le).map(function(ki){var Zn,un=ki._tippy,Rn=(Zn=un.popperInstance)==null?void 0:Zn.state;return Rn?{popperRect:ki.getBoundingClientRect(),popperState:Rn,props:r}:null}).filter(Boolean);bB(Ei,kt)&&(wt(),_i(kt))}}function Ft(kt){var fr=mr(kt)||te.props.trigger.indexOf("click")>=0&&c;if(!fr){if(te.props.interactive){te.hideWithInteractivity(kt);return}_i(kt)}}function ct(kt){te.props.trigger.indexOf("focusin")<0&&kt.target!==qe()||te.props.interactive&&kt.relatedTarget&&le.contains(kt.relatedTarget)||_i(kt)}function mr(kt){return J0.isTouch?Ce()!==kt.type.indexOf("touch")>=0:!1}function Jr(){dr();var kt=te.props,fr=kt.popperOptions,Qr=kt.placement,Ei=kt.offset,ki=kt.getReferenceClientRect,Zn=kt.moveTransition,un=Me()?$y(le).arrow:null,Rn=ki?{getBoundingClientRect:ki,contextElement:ki.contextElement||qe()}:t,Xn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(gt){var Ne=gt.state;if(Me()){var Fe=xt(),lt=Fe.box;["placement","reference-hidden","escaped"].forEach(function(Lt){Lt==="placement"?lt.setAttribute("data-placement",Ne.placement):Ne.attributes.popper["data-popper-"+Lt]?lt.setAttribute("data-"+Lt,""):lt.removeAttribute("data-"+Lt)}),Ne.attributes.popper={}}}},so=[{name:"offset",options:{offset:Ei}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Zn}},Xn];Me()&&un&&so.push({name:"arrow",options:{element:un,padding:3}}),so.push.apply(so,(fr==null?void 0:fr.modifiers)||[]),te.popperInstance=$x(Rn,le,Object.assign({},fr,{placement:Qr,onFirstUpdate:I,modifiers:so}))}function dr(){te.popperInstance&&(te.popperInstance.destroy(),te.popperInstance=null)}function zr(){var kt=te.props.appendTo,fr,Qr=qe();te.props.interactive&&kt===Fk||kt==="parent"?fr=Qr.parentNode:fr=Bk(kt,[Qr]),fr.contains(le)||fr.appendChild(le),te.state.isMounted=!0,Jr()}function ri(){return T2(le.querySelectorAll("[data-tippy-root]"))}function Vr(kt){te.clearDelayTimeouts(),kt&&at("onTrigger",[te,kt]),ht();var fr=yt(!0),Qr=Ue(),Ei=Qr[0],ki=Qr[1];J0.isTouch&&Ei==="hold"&&ki&&(fr=ki),fr?i=setTimeout(function(){te.show()},fr):te.show()}function _i(kt){if(te.clearDelayTimeouts(),at("onUntrigger",[te,kt]),!te.state.isVisible){Nt();return}if(!(te.props.trigger.indexOf("mouseenter")>=0&&te.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(kt.type)>=0&&c)){var fr=yt(!1);fr?o=setTimeout(function(){te.state.isVisible&&te.hide()},fr):u=requestAnimationFrame(function(){te.hide()})}}function Hi(){te.state.isEnabled=!0}function Nr(){te.hide(),te.state.isEnabled=!1}function ji(){clearTimeout(i),clearTimeout(o),cancelAnimationFrame(u)}function Ui(kt){if(!te.state.isDestroyed){at("onBeforeUpdate",[te,kt]),Jt();var fr=te.props,Qr=x3(t,Object.assign({},fr,_3(kt),{ignoreAttributes:!0}));te.props=Qr,Er(),fr.interactiveDebounce!==Qr.interactiveDebounce&&(wt(),N=g3(Fr,Qr.interactiveDebounce)),fr.triggerTarget&&!Qr.triggerTarget?ad(fr.triggerTarget).forEach(function(Ei){Ei.removeAttribute("aria-expanded")}):Qr.triggerTarget&&t.removeAttribute("aria-expanded"),Xe(),$e(),we&&we(fr,Qr),te.popperInstance&&(Jr(),ri().forEach(function(Ei){requestAnimationFrame(Ei._tippy.popperInstance.forceUpdate)})),at("onAfterUpdate",[te,kt])}}function an(kt){te.setProps({content:kt})}function Gi(){var kt=te.state.isVisible,fr=te.state.isDestroyed,Qr=!te.state.isEnabled,Ei=J0.isTouch&&!te.props.touch,ki=vg(te.props.duration,0,M0.duration);if(!(kt||fr||Qr||Ei)&&!qe().hasAttribute("disabled")&&(at("onShow",[te],!1),te.props.onShow(te)!==!1)){if(te.state.isVisible=!0,Me()&&(le.style.visibility="visible"),$e(),ht(),te.state.isMounted||(le.style.transition="none"),Me()){var Zn=xt(),un=Zn.box,Rn=Zn.content;bg([un,Rn],0)}I=function(){var so;if(!(!te.state.isVisible||y)){if(y=!0,le.offsetHeight,le.style.transition=te.props.moveTransition,Me()&&te.props.animation){var on=xt(),gt=on.box,Ne=on.content;bg([gt,Ne],ki),v3([gt,Ne],"visible")}mt(),Xe(),y3(xg,te),(so=te.popperInstance)==null||so.forceUpdate(),at("onMount",[te]),te.props.animation&&Me()&&Mt(ki,function(){te.state.isShown=!0,at("onShown",[te])})}},zr()}}function Or(){var kt=!te.state.isVisible,fr=te.state.isDestroyed,Qr=!te.state.isEnabled,Ei=vg(te.props.duration,1,M0.duration);if(!(kt||fr||Qr)&&(at("onHide",[te],!1),te.props.onHide(te)!==!1)){if(te.state.isVisible=!1,te.state.isShown=!1,y=!1,c=!1,Me()&&(le.style.visibility="hidden"),wt(),Nt(),$e(!0),Me()){var ki=xt(),Zn=ki.box,un=ki.content;te.props.animation&&(bg([Zn,un],Ei),v3([Zn,un],"hidden"))}mt(),Xe(),te.props.animation?Me()&&zt(Ei,te.unmount):te.unmount()}}function Br(kt){it().addEventListener("mousemove",N),y3(V1,N),N(kt)}function Ni(){te.state.isVisible&&te.hide(),te.state.isMounted&&(dr(),ri().forEach(function(kt){kt._tippy.unmount()}),le.parentNode&&le.parentNode.removeChild(le),xg=xg.filter(function(kt){return kt!==te}),te.state.isMounted=!1,at("onHidden",[te]))}function qi(){te.state.isDestroyed||(te.clearDelayTimeouts(),te.unmount(),Jt(),delete t._tippy,te.state.isDestroyed=!0,at("onDestroy",[te]))}}function n1(t,e){e===void 0&&(e={});var r=M0.plugins.concat(e.plugins||[]);kB();var i=Object.assign({},e,{plugins:r}),o=_B(t),u=o.reduce(function(c,s){var f=s&&DB(s,i);return f&&c.push(f),c},[]);return J2(t)?u[0]:u}n1.defaultProps=M0;n1.setDefaultProps=LB;n1.currentInput=J0;Object.assign({},Ox,{effect:function(e){var r=e.state,i={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,i.popper),r.styles=i,r.elements.arrow&&Object.assign(r.elements.arrow.style,i.arrow)}});n1.setDefaultProps({render:qk});const zB=(t,e)=>{const{destroy:r,setProps:i}=n1(t,e);return{destroy:r,update:i}},NB=t=>(e,r)=>zB(e,{...r,...t}),RB=t=>{let e={arrow:!0,theme:"light",trigger:"click",hideOnClick:"toggle",interactive:!0,onShow(i){var o;(o=i.popper.querySelector(".close"))==null||o.addEventListener("click",()=>{i.hide()})},onHide(i){var o;(o=i.popper.querySelector(".close"))==null||o.removeEventListener("click",()=>{i.hide()})},onClickOutside(i){i.hide()}};return t&&(e=Object.assign(e,t)),NB(e)};const Vk=t=>t.replace(/[_-]/g," ").replace(/\.[^/.]+$/,"");function OB(t){let e,r,i,o;function u(f){t[32](f)}function c(f){t[33](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new UR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function FB(t){let e,r,i,o;function u(f){t[30](f)}function c(f){t[31](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new wR({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function BB(t){let e,r,i,o;function u(f){t[28](f)}function c(f){t[29](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new WN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function jB(t){let e,r,i,o;function u(f){t[26](f)}function c(f){t[27](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new DN({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function UB(t){let e,r,i,o;function u(f){t[24](f)}function c(f){t[25](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new Pz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function qB(t){let e,r,i,o,u;function c(b){t[21](b)}function s(b){t[22](b)}function f(b){t[23](b)}let y={};return t[1]!==void 0&&(y.map=t[1]),t[0]!==void 0&&(y.layer=t[0]),t[2]!==void 0&&(y.spriteLoader=t[2]),e=new bN({props:y}),Ut.push(()=>Xt(e,"map",c)),Ut.push(()=>Xt(e,"layer",s)),Ut.push(()=>Xt(e,"spriteLoader",f)),{c(){Ht(e.$$.fragment)},l(b){Yt(e.$$.fragment,b)},m(b,A){$t(e,b,A),u=!0},p(b,A){const I={};!r&&A[0]&2&&(r=!0,I.map=b[1],er(()=>r=!1)),!i&&A[0]&1&&(i=!0,I.layer=b[0],er(()=>i=!1)),!o&&A[0]&4&&(o=!0,I.spriteLoader=b[2],er(()=>o=!1)),e.$set(I)},i(b){u||(We(e.$$.fragment,b),u=!0)},o(b){et(e.$$.fragment,b),u=!1},d(b){Gt(e,b)}}}function VB(t){let e,r,i,o;function u(f){t[19](f)}function c(f){t[20](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new gz({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function HB(t){let e,r,i,o;function u(f){t[17](f)}function c(f){t[18](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new ZD({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function $B(t){let e,r,i,o;function u(f){t[15](f)}function c(f){t[16](f)}let s={};return t[1]!==void 0&&(s.map=t[1]),t[0]!==void 0&&(s.layer=t[0]),e=new qD({props:s}),Ut.push(()=>Xt(e,"map",u)),Ut.push(()=>Xt(e,"layer",c)),{c(){Ht(e.$$.fragment)},l(f){Yt(e.$$.fragment,f)},m(f,y){$t(e,f,y),o=!0},p(f,y){const b={};!r&&y[0]&2&&(r=!0,b.map=f[1],er(()=>r=!1)),!i&&y[0]&1&&(i=!0,b.layer=f[0],er(()=>i=!1)),e.$set(b)},i(f){o||(We(e.$$.fragment,f),o=!0)},o(f){et(e.$$.fragment,f),o=!1},d(f){Gt(e,f)}}}function GB(t){let e,r,i,o,u;function c(b){t[12](b)}function s(b){t[13](b)}function f(b){t[14](b)}let y={};return t[1]!==void 0&&(y.map=t[1]),t[0]!==void 0&&(y.layer=t[0]),t[3]!==void 0&&(y.selectedFormat=t[3]),e=new uB({props:y}),Ut.push(()=>Xt(e,"map",c)),Ut.push(()=>Xt(e,"layer",s)),Ut.push(()=>Xt(e,"selectedFormat",f)),{c(){Ht(e.$$.fragment)},l(b){Yt(e.$$.fragment,b)},m(b,A){$t(e,b,A),u=!0},p(b,A){const I={};!r&&A[0]&2&&(r=!0,I.map=b[1],er(()=>r=!1)),!i&&A[0]&1&&(i=!0,I.layer=b[0],er(()=>i=!1)),!o&&A[0]&8&&(o=!0,I.selectedFormat=b[3],er(()=>o=!1)),e.$set(I)},i(b){u||(We(e.$$.fragment,b),u=!0)},o(b){et(e.$$.fragment,b),u=!1},d(b){Gt(e,b)}}}function WB(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt;r=new bo({props:{icon:pS,size:"lg"}}),f=new Ix({props:{map:t[1],layer:t[0],spriteLoader:t[2]}}),O=new bo({props:{icon:uS,size:"lg"}});function yt(wt){t[11](wt)}let $e={size:"lg"};t[0].type!==void 0&&($e.layerType=t[0].type),Z=new Wx({props:$e}),Ut.push(()=>Xt(Z,"layerType",yt)),le=new bo({props:{icon:DS,size:"lg",color:"#1c1c1c"}});const at=[GB,$B,HB,VB,qB,UB,jB,BB,FB,OB],mt=[];function Xe(wt,be){return wt[4]?0:wt[0].type==="background"?1:wt[0].type==="fill"?2:wt[0].type==="line"?3:wt[0].type==="symbol"?4:wt[0].type==="circle"?5:wt[0].type==="fill-extrusion"?6:wt[0].type==="hillshade"?7:wt[0].type==="raster"?8:wt[0].type==="heatmap"?9:-1}return~(ze=Xe(t))&&(Ue=mt[ze]=at[ze](t)),{c(){e=Je("div"),Ht(r.$$.fragment),o=ir(),u=Je("div"),c=Je("div"),s=Je("div"),Ht(f.$$.fragment),y=ir(),b=Je("div"),A=Fi(t[6]),I=ir(),C=Je("div"),N=Je("span"),Ht(O.$$.fragment),$=ir(),G=Je("div"),Ht(Z.$$.fragment),te=ir(),_e=Je("div"),Ht(le.$$.fragment),we=ir(),ue=Je("div"),Ue&&Ue.c(),Ce=ir(),Me=Je("div"),this.h()},l(wt){e=Qe(wt,"DIV",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var be=vt(e);Yt(r.$$.fragment,be),be.forEach(he),o=nr(wt),u=Qe(wt,"DIV",{class:!0});var Be=vt(u);c=Qe(Be,"DIV",{class:!0});var Ae=vt(c);s=Qe(Ae,"DIV",{class:!0});var ht=vt(s);Yt(f.$$.fragment,ht),ht.forEach(he),y=nr(Ae),b=Qe(Ae,"DIV",{class:!0});var Nt=vt(b);A=Bi(Nt,t[6]),Nt.forEach(he),Ae.forEach(he),I=nr(Be),C=Qe(Be,"DIV",{class:!0});var zt=vt(C);N=Qe(zt,"SPAN",{role:!0,tabindex:!0,class:!0,"data-tooltip":!0});var Mt=vt(N);Yt(O.$$.fragment,Mt),Mt.forEach(he),$=nr(zt),G=Qe(zt,"DIV",{class:!0});var Kt=vt(G);Yt(Z.$$.fragment,Kt),Kt.forEach(he),te=nr(zt),_e=Qe(zt,"DIV",{role:!0,class:!0,"data-tooltip":!0});var yr=vt(_e);Yt(le.$$.fragment,yr),yr.forEach(he),zt.forEach(he),we=nr(Be),ue=Qe(Be,"DIV",{class:!0});var Er=vt(ue);Ue&&Ue.l(Er),Er.forEach(he),Ce=nr(Be),Me=Qe(Be,"DIV",{id:!0,"data-popper-arrow":!0}),vt(Me).forEach(he),Be.forEach(he),this.h()},h(){ge(e,"tabindex","0"),ge(e,"role","button"),ge(e,"class","palette-button has-tooltip-left has-tooltip-arrow svelte-1p7qduj"),ge(e,"data-tooltip","Change layer style"),ge(s,"class","legend svelte-1p7qduj"),ge(b,"class","layer-name svelte-1p7qduj"),ge(c,"class","title svelte-1p7qduj"),ge(N,"role","button"),ge(N,"tabindex","0"),ge(N,"class","manual-edit-button has-tooltip-right has-tooltip-arrow svelte-1p7qduj"),ge(N,"data-tooltip","Manual editor"),ge(G,"class","help-button svelte-1p7qduj"),ge(_e,"role","button"),ge(_e,"class","close has-tooltip-bottom has-tooltip-arrow svelte-1p7qduj"),ge(_e,"data-tooltip","Close popup"),ge(C,"class","header-buttons svelte-1p7qduj"),ge(ue,"class","editor-contents svelte-1p7qduj"),ge(Me,"id","arrow"),ge(Me,"data-popper-arrow",""),ge(u,"class","tooltip svelte-1p7qduj")},m(wt,be){dt(wt,e,be),$t(r,e,null),dt(wt,o,be),dt(wt,u,be),Ke(u,c),Ke(c,s),$t(f,s,null),Ke(c,y),Ke(c,b),Ke(b,A),Ke(u,I),Ke(u,C),Ke(C,N),$t(O,N,null),Ke(C,$),Ke(C,G),$t(Z,G,null),Ke(C,te),Ke(C,_e),$t(le,_e,null),Ke(u,we),Ke(u,ue),~ze&&mt[ze].m(ue,null),Ke(u,Ce),Ke(u,Me),t[34](u),qe=!0,it||(xt=[Ih(i=t[7].call(null,e,{content:t[5]})),Dr(N,"click",t[10]),Dr(N,"keydown",t[8])],it=!0)},p(wt,be){i&&Lp(i.update)&&be[0]&32&&i.update.call(null,{content:wt[5]});const Be={};be[0]&2&&(Be.map=wt[1]),be[0]&1&&(Be.layer=wt[0]),be[0]&4&&(Be.spriteLoader=wt[2]),f.$set(Be),(!qe||be[0]&64)&&Dn(A,wt[6]);const Ae={};!ee&&be[0]&1&&(ee=!0,Ae.layerType=wt[0].type,er(()=>ee=!1)),Z.$set(Ae);let ht=ze;ze=Xe(wt),ze===ht?~ze&&mt[ze].p(wt,be):(Ue&&(gn(),et(mt[ht],1,1,()=>{mt[ht]=null}),yn()),~ze?(Ue=mt[ze],Ue?Ue.p(wt,be):(Ue=mt[ze]=at[ze](wt),Ue.c()),We(Ue,1),Ue.m(ue,null)):Ue=null)},i(wt){qe||(We(r.$$.fragment,wt),We(f.$$.fragment,wt),We(O.$$.fragment,wt),We(Z.$$.fragment,wt),We(le.$$.fragment,wt),We(Ue),qe=!0)},o(wt){et(r.$$.fragment,wt),et(f.$$.fragment,wt),et(O.$$.fragment,wt),et(Z.$$.fragment,wt),et(le.$$.fragment,wt),et(Ue),qe=!1},d(wt){wt&&(he(e),he(o),he(u)),Gt(r),Gt(f),Gt(O),Gt(Z),Gt(le),~ze&&mt[ze].d(),t[34](null),it=!1,oo(xt)}}}function ZB(t,e,r){let i,{map:o}=e,{layer:u}=e,{spriteLoader:c}=e,{relativeLayers:s}=e,f=!1,{selectedFormat:y}=e;const b=RB({placement:"left",trigger:"click",appendTo:document.body});let A;const I=be=>{be.key==="Enter"&&be.target.click()},C=()=>r(4,f=!f);function N(be){t.$$.not_equal(u.type,be)&&(u.type=be,r(0,u))}function O(be){o=be,r(1,o)}function $(be){u=be,r(0,u)}function G(be){y=be,r(3,y)}function Z(be){o=be,r(1,o)}function ee(be){u=be,r(0,u)}function te(be){o=be,r(1,o)}function _e(be){u=be,r(0,u)}function le(be){o=be,r(1,o)}function we(be){u=be,r(0,u)}function ue(be){o=be,r(1,o)}function ze(be){u=be,r(0,u)}function Ue(be){c=be,r(2,c)}function Ce(be){o=be,r(1,o)}function Me(be){u=be,r(0,u)}function qe(be){o=be,r(1,o)}function it(be){u=be,r(0,u)}function xt(be){o=be,r(1,o)}function yt(be){u=be,r(0,u)}function $e(be){o=be,r(1,o)}function at(be){u=be,r(0,u)}function mt(be){o=be,r(1,o)}function Xe(be){u=be,r(0,u)}function wt(be){Ut[be?"unshift":"push"](()=>{A=be,r(5,A)})}return t.$$set=be=>{"map"in be&&r(1,o=be.map),"layer"in be&&r(0,u=be.layer),"spriteLoader"in be&&r(2,c=be.spriteLoader),"relativeLayers"in be&&r(9,s=be.relativeLayers),"selectedFormat"in be&&r(3,y=be.selectedFormat)},t.$$.update=()=>{t.$$.dirty[0]&513&&r(6,i=s&&s[u.id]?s[u.id]:Vk(u.id))},[u,o,c,y,f,A,i,b,I,s,C,N,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce,Me,qe,it,xt,yt,$e,at,mt,Xe,wt]}class XB extends di{constructor(e){super(),pi(this,e,ZB,WB,hi,{map:1,layer:0,spriteLoader:2,relativeLayers:9,selectedFormat:3},null,[-1,-1])}}function S3(t){let e,r,i;return r=new bo({props:{icon:SS}}),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(o){e=Qe(o,"DIV",{class:!0,"data-tooltip":!0});var u=vt(e);Yt(r.$$.fragment,u),u.forEach(he),this.h()},h(){ge(e,"class","draggable-icon has-tooltip-right has-tooltip-arrow svelte-5bmqob"),ge(e,"data-tooltip",(lT?"Long press & drag":"Drag")+" to change order")},m(o,u){dt(o,e,u),$t(r,e,null),i=!0},p:mi,i(o){i||(We(r.$$.fragment,o),i=!0)},o(o){et(r.$$.fragment,o),i=!1},d(o){o&&he(e),Gt(r)}}}function E3(t){let e,r,i=!t[5]&&C3(t);return{c(){i&&i.c(),e=pn()},l(o){i&&i.l(o),e=pn()},m(o,u){i&&i.m(o,u),dt(o,e,u),r=!0},p(o,u){o[5]?i&&(gn(),et(i,1,1,()=>{i=null}),yn()):i?(i.p(o,u),u&32&&We(i,1)):(i=C3(o),i.c(),We(i,1),i.m(e.parentNode,e))},i(o){r||(We(i),r=!0)},o(o){et(i),r=!1},d(o){o&&he(e),i&&i.d(o)}}}function C3(t){let e,r,i,o,u,c,s;const f=[KB,YB],y=[];function b(A,I){return A[8]?0:1}return r=b(t),i=y[r]=f[r](t),{c(){e=Je("div"),i.c(),this.h()},l(A){e=Qe(A,"DIV",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var I=vt(e);i.l(I),I.forEach(he),this.h()},h(){ge(e,"tabindex","0"),ge(e,"role","button"),ge(e,"class","visible-button has-tooltip-right has-tooltip-arrow svelte-5bmqob"),ge(e,"data-tooltip",o=(t[8]?"Hide":"Show")+" layer")},m(A,I){dt(A,e,I),y[r].m(e,null),u=!0,c||(s=[Dr(e,"click",t[19]),Dr(e,"keydown",t[12])],c=!0)},p(A,I){let C=r;r=b(A),r===C?y[r].p(A,I):(gn(),et(y[C],1,1,()=>{y[C]=null}),yn(),i=y[r],i?i.p(A,I):(i=y[r]=f[r](A),i.c()),We(i,1),i.m(e,null)),(!u||I&256&&o!==(o=(A[8]?"Hide":"Show")+" layer"))&&ge(e,"data-tooltip",o)},i(A){u||(We(i),u=!0)},o(A){et(i),u=!1},d(A){A&&he(e),y[r].d(),c=!1,oo(s)}}}function YB(t){let e,r;return e=new bo({props:{icon:fS}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function KB(t){let e,r;return e=new bo({props:{icon:vS}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function JB(t){let e,r,i,o,u,c,s;function f(N){t[20](N)}function y(N){t[21](N)}function b(N){t[22](N)}function A(N){t[23](N)}function I(N){t[24](N)}let C={};return t[2]!==void 0&&(C.map=t[2]),t[0]!==void 0&&(C.layer=t[0]),t[3]!==void 0&&(C.spriteLoader=t[3]),t[4]!==void 0&&(C.selectedFormat=t[4]),t[1]!==void 0&&(C.relativeLayers=t[1]),e=new XB({props:C}),Ut.push(()=>Xt(e,"map",f)),Ut.push(()=>Xt(e,"layer",y)),Ut.push(()=>Xt(e,"spriteLoader",b)),Ut.push(()=>Xt(e,"selectedFormat",A)),Ut.push(()=>Xt(e,"relativeLayers",I)),{c(){Ht(e.$$.fragment)},l(N){Yt(e.$$.fragment,N)},m(N,O){$t(e,N,O),s=!0},p(N,O){const $={};!r&&O&4&&(r=!0,$.map=N[2],er(()=>r=!1)),!i&&O&1&&(i=!0,$.layer=N[0],er(()=>i=!1)),!o&&O&8&&(o=!0,$.spriteLoader=N[3],er(()=>o=!1)),!u&&O&16&&(u=!0,$.selectedFormat=N[4],er(()=>u=!1)),!c&&O&2&&(c=!0,$.relativeLayers=N[1],er(()=>c=!1)),e.$set($)},i(N){s||(We(e.$$.fragment,N),s=!0)},o(N){et(e.$$.fragment,N),s=!1},d(N){Gt(e,N)}}}function QB(t){let e,r=t[13]()+1+"",i,o,u=t[14]()+"",c,s,f,y,b,A=!t[9]&&I3(t),I=!t[10]&&L3(t);return{c(){e=Je("div"),i=Fi(r),o=Fi("/"),c=Fi(u),s=ir(),f=Je("div"),A&&A.c(),y=ir(),I&&I.c(),this.h()},l(C){e=Qe(C,"DIV",{class:!0});var N=vt(e);i=Bi(N,r),o=Bi(N,"/"),c=Bi(N,u),N.forEach(he),s=nr(C),f=Qe(C,"DIV",{class:!0});var O=vt(f);A&&A.l(O),y=nr(O),I&&I.l(O),O.forEach(he),this.h()},h(){ge(e,"class","layer-position svelte-5bmqob"),ge(f,"class","layer-order svelte-5bmqob")},m(C,N){dt(C,e,N),Ke(e,i),Ke(e,o),Ke(e,c),dt(C,s,N),dt(C,f,N),A&&A.m(f,null),Ke(f,y),I&&I.m(f,null),b=!0},p(C,N){C[9]?A&&(gn(),et(A,1,1,()=>{A=null}),yn()):A?(A.p(C,N),N&512&&We(A,1)):(A=I3(C),A.c(),We(A,1),A.m(f,y)),C[10]?I&&(gn(),et(I,1,1,()=>{I=null}),yn()):I?(I.p(C,N),N&1024&&We(I,1)):(I=L3(C),I.c(),We(I,1),I.m(f,null))},i(C){b||(We(A),We(I),b=!0)},o(C){et(A),et(I),b=!1},d(C){C&&(he(e),he(s),he(f)),A&&A.d(),I&&I.d()}}}function I3(t){let e,r,i,o,u;return r=new bo({props:{icon:wS,size:"lg"}}),{c(){e=Je("span"),Ht(r.$$.fragment),this.h()},l(c){e=Qe(c,"SPAN",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var s=vt(e);Yt(r.$$.fragment,s),s.forEach(he),this.h()},h(){ge(e,"tabindex","0"),ge(e,"role","button"),ge(e,"class","sort-button has-tooltip-left has-tooltip-arrow svelte-5bmqob"),ge(e,"data-tooltip","Bring backward in map")},m(c,s){dt(c,e,s),$t(r,e,null),i=!0,o||(u=[Dr(e,"click",t[15]),Dr(e,"keydown",t[16])],o=!0)},p:mi,i(c){i||(We(r.$$.fragment,c),i=!0)},o(c){et(r.$$.fragment,c),i=!1},d(c){c&&he(e),Gt(r),o=!1,oo(u)}}}function L3(t){let e,r,i,o,u;return r=new bo({props:{icon:sS,size:"lg"}}),{c(){e=Je("span"),Ht(r.$$.fragment),this.h()},l(c){e=Qe(c,"SPAN",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var s=vt(e);Yt(r.$$.fragment,s),s.forEach(he),this.h()},h(){ge(e,"tabindex","0"),ge(e,"role","button"),ge(e,"class","sort-button has-tooltip-left has-tooltip-arrow svelte-5bmqob"),ge(e,"data-tooltip","Bring forward in map")},m(c,s){dt(c,e,s),$t(r,e,null),i=!0,o||(u=[Dr(e,"click",t[17]),Dr(e,"keydown",t[18])],o=!0)},p:mi,i(c){i||(We(r.$$.fragment,c),i=!0)},o(c){et(r.$$.fragment,c),i=!1},d(c){c&&he(e),Gt(r),o=!1,oo(u)}}}function ej(t){let e,r,i,o,u,c,s,f,y,b,A,I,C=t[5]&&S3(),N=!t[6]&&E3(t);u=new Ix({props:{map:t[2],layer:t[0],spriteLoader:t[3]}});const O=[QB,JB],$=[];function G(Z,ee){return Z[5]?0:Z[7]===!0?1:-1}return~(b=G(t))&&(A=$[b]=O[b](t)),{c(){e=Je("div"),C&&C.c(),r=ir(),N&&N.c(),i=ir(),o=Je("div"),Ht(u.$$.fragment),c=ir(),s=Je("div"),f=Fi(t[11]),y=ir(),A&&A.c(),this.h()},l(Z){e=Qe(Z,"DIV",{class:!0,style:!0});var ee=vt(e);C&&C.l(ee),r=nr(ee),N&&N.l(ee),i=nr(ee),o=Qe(ee,"DIV",{class:!0});var te=vt(o);Yt(u.$$.fragment,te),te.forEach(he),c=nr(ee),s=Qe(ee,"DIV",{class:!0});var _e=vt(s);f=Bi(_e,t[11]),_e.forEach(he),y=nr(ee),A&&A.l(ee),ee.forEach(he),this.h()},h(){ge(o,"class","legend svelte-5bmqob"),ge(s,"class","layer-name svelte-5bmqob"),ge(e,"class","layer-container svelte-5bmqob"),Nn(e,"cursor",t[5]?"grab":"default")},m(Z,ee){dt(Z,e,ee),C&&C.m(e,null),Ke(e,r),N&&N.m(e,null),Ke(e,i),Ke(e,o),$t(u,o,null),Ke(e,c),Ke(e,s),Ke(s,f),Ke(e,y),~b&&$[b].m(e,null),I=!0},p(Z,[ee]){Z[5]?C?(C.p(Z,ee),ee&32&&We(C,1)):(C=S3(),C.c(),We(C,1),C.m(e,r)):C&&(gn(),et(C,1,1,()=>{C=null}),yn()),Z[6]?N&&(gn(),et(N,1,1,()=>{N=null}),yn()):N?(N.p(Z,ee),ee&64&&We(N,1)):(N=E3(Z),N.c(),We(N,1),N.m(e,i));const te={};ee&4&&(te.map=Z[2]),ee&1&&(te.layer=Z[0]),ee&8&&(te.spriteLoader=Z[3]),u.$set(te),(!I||ee&2048)&&Dn(f,Z[11]);let _e=b;b=G(Z),b===_e?~b&&$[b].p(Z,ee):(A&&(gn(),et($[_e],1,1,()=>{$[_e]=null}),yn()),~b?(A=$[b],A?A.p(Z,ee):(A=$[b]=O[b](Z),A.c()),We(A,1),A.m(e,null)):A=null),(!I||ee&32)&&Nn(e,"cursor",Z[5]?"grab":"default")},i(Z){I||(We(C),We(N),We(u.$$.fragment,Z),We(A),I=!0)},o(Z){et(C),et(N),et(u.$$.fragment,Z),et(A),I=!1},d(Z){Z&&he(e),C&&C.d(),N&&N.d(),Gt(u),~b&&$[b].d()}}}function tj(t,e,r){let i;const o=zh();let{map:u}=e,{layer:c}=e,{spriteLoader:s}=e,{relativeLayers:f={}}=e,{enableLayerOrder:y=!1}=e,{disableVisibleButton:b=!1}=e,{enableEditing:A=!0}=e,{selectedFormat:I}=e,N=u.getLayer(c.id).visibility!=="none";const O=()=>{const $e=N===!0?"visible":"none";u.setLayoutProperty(c.id,"visibility",$e),o("visibilityChanged",{layer:c,visibility:$e})},$=$e=>{$e.key==="Enter"&&O()},G=()=>{var mt;const $e=(mt=u==null?void 0:u.getStyle())==null?void 0:mt.layers;return $e==null?void 0:$e.findIndex(Xe=>Xe.id===c.id)},Z=()=>{var $e;return($e=u==null?void 0:u.getStyle())==null?void 0:$e.layers.length},ee=()=>G()===0,te=()=>{var mt;const $e=(mt=u==null?void 0:u.getStyle())==null?void 0:mt.layers;return G()===$e.length-1};let _e=ee(),le=te();const we=()=>{var Xe;const $e=G(),mt=((Xe=u==null?void 0:u.getStyle())==null?void 0:Xe.layers)[$e-1].id;u.moveLayer(c.id,mt),r(9,_e=ee()),r(10,le=te()),o("layerOrderChanged")},ue=$e=>{$e.key==="Enter"&&we()},ze=()=>{var Xe;const $e=G(),mt=((Xe=u==null?void 0:u.getStyle())==null?void 0:Xe.layers)[$e+1].id;u.moveLayer(mt,c.id),r(9,_e=ee()),r(10,le=te()),o("layerOrderChanged")},Ue=$e=>{$e.key==="Enter"&&ze()},Ce=()=>r(8,N=!N);function Me($e){u=$e,r(2,u)}function qe($e){c=$e,r(0,c)}function it($e){s=$e,r(3,s)}function xt($e){I=$e,r(4,I)}function yt($e){f=$e,r(1,f)}return t.$$set=$e=>{"map"in $e&&r(2,u=$e.map),"layer"in $e&&r(0,c=$e.layer),"spriteLoader"in $e&&r(3,s=$e.spriteLoader),"relativeLayers"in $e&&r(1,f=$e.relativeLayers),"enableLayerOrder"in $e&&r(5,y=$e.enableLayerOrder),"disableVisibleButton"in $e&&r(6,b=$e.disableVisibleButton),"enableEditing"in $e&&r(7,A=$e.enableEditing),"selectedFormat"in $e&&r(4,I=$e.selectedFormat)},t.$$.update=()=>{t.$$.dirty&256&&O(),t.$$.dirty&3&&r(11,i=f&&f[c.id]?f[c.id]:Vk(c.id))},[c,f,u,s,I,y,b,A,N,_e,le,i,$,G,Z,we,ue,ze,Ue,Ce,Me,qe,it,xt,yt]}class rj extends di{constructor(e){super(),pi(this,e,tj,ej,hi,{map:2,layer:0,spriteLoader:3,relativeLayers:1,enableLayerOrder:5,disableVisibleButton:6,enableEditing:7,selectedFormat:4})}}class ij{constructor(e){li(this,"spriteUrl");li(this,"sprite");this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let r=!1;const i=new Promise((o,u)=>{const c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{r||o(c)},c.onerror=s=>{r||u(s)},c.src=e});return i.cancel=()=>{r=!0},i}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){var i;let r;if(e.layout&&e.layout["icon-image"]){let o=e.layout["icon-image"];if(Array.isArray(o)&&(o=o[o.length-1]),(i=this.sprite)!=null&&i.json){let u;Object.keys(this.sprite.json).forEach(c=>{c===o&&(u=this.sprite.json[c])}),u&&(r=this.extractPartOfImage(this.sprite.image,u))}}return r}extractPartOfImage(e,r){const o=document.createElement("canvas");return o.width=r.width*1,o.height=r.height*1,o.getContext("2d").drawImage(e,r.x*1,r.y*1,r.width*1,r.height*1,0,0,r.width*1,r.height*1),o.toDataURL()}isSdf(e){var i;let r=!1;if(e.layout&&e.layout["icon-image"]){let o=e.layout["icon-image"];if(Array.isArray(o)&&(o=o[o.length-1]),(i=this.sprite)!=null&&i.json){let u;Object.keys(this.sprite.json).forEach(c=>{c===o&&(u=this.sprite.json[c])}),u!=null&&u.sdf&&(r=u==null?void 0:u.sdf)}}return r}}const T3=zs({}),nj=(t,e,r)=>r.indexOf(t)===e;function P3(t,e,r){const i=t.slice();return i[36]=e[r],i[38]=r,i}function M3(t){let e=t[6],r,i,o=O3(t);return{c(){o.c(),r=pn()},l(u){o.l(u),r=pn()},m(u,c){o.m(u,c),dt(u,r,c),i=!0},p(u,c){c[0]&64&&hi(e,e=u[6])?(gn(),et(o,1,1,mi),yn(),o=O3(u),o.c(),We(o,1),o.m(r.parentNode,r)):o.p(u,c)},i(u){i||(We(o),i=!0)},o(u){et(o),i=!1},d(u){u&&he(r),o.d(u)}}}function D3(t){let e,r,i,o,u,c,s,f,y,b;function A(ee){t[20](ee)}function I(ee){t[21](ee)}function C(ee){t[22](ee)}function N(ee){t[23](ee)}let O={map:t[4],layer:t[36],spriteLoader:t[8],relativeLayers:t[5]};t[0]!==void 0&&(O.enableLayerOrder=t[0]),t[1]!==void 0&&(O.disableVisibleButton=t[1]),t[2]!==void 0&&(O.enableEditing=t[2]),t[3]!==void 0&&(O.selectedFormat=t[3]),i=new rj({props:O}),Ut.push(()=>Xt(i,"enableLayerOrder",A)),Ut.push(()=>Xt(i,"disableVisibleButton",I)),Ut.push(()=>Xt(i,"enableEditing",C)),Ut.push(()=>Xt(i,"selectedFormat",N)),i.$on("visibilityChanged",t[11]),i.$on("layerOrderChanged",t[12]);function $(...ee){return t[24](t[38],...ee)}function G(...ee){return t[25](t[38],t[36],...ee)}function Z(){return t[27](t[38])}return{c(){e=Je("div"),r=Je("li"),Ht(i.$$.fragment),this.h()},l(ee){e=Qe(ee,"DIV",{class:!0,role:!0,draggable:!0});var te=vt(e);r=Qe(te,"LI",{class:!0});var _e=vt(r);Yt(i.$$.fragment,_e),_e.forEach(he),te.forEach(he),this.h()},h(){ge(r,"class","legend-panel-block svelte-11ej6jy"),ge(e,"class","list-item svelte-11ej6jy"),ge(e,"role","listitem"),ge(e,"draggable",t[0]),ui(e,"is-active",t[7]===t[38])},m(ee,te){dt(ee,e,te),Ke(e,r),$t(i,r,null),f=!0,y||(b=[Dr(e,"dragstart",$),Dr(e,"drop",uc(G)),Dr(e,"dragover",t[26]),Dr(e,"dragenter",Z)],y=!0)},p(ee,te){t=ee;const _e={};te[0]&16&&(_e.map=t[4]),te[0]&512&&(_e.layer=t[36]),te[0]&256&&(_e.spriteLoader=t[8]),te[0]&32&&(_e.relativeLayers=t[5]),!o&&te[0]&1&&(o=!0,_e.enableLayerOrder=t[0],er(()=>o=!1)),!u&&te[0]&2&&(u=!0,_e.disableVisibleButton=t[1],er(()=>u=!1)),!c&&te[0]&4&&(c=!0,_e.enableEditing=t[2],er(()=>c=!1)),!s&&te[0]&8&&(s=!0,_e.selectedFormat=t[3],er(()=>s=!1)),i.$set(_e),(!f||te[0]&1)&&ge(e,"draggable",t[0]),(!f||te[0]&640)&&ui(e,"is-active",t[7]===t[38])},i(ee){f||(We(i.$$.fragment,ee),f=!0)},o(ee){et(i.$$.fragment,ee),f=!1},d(ee){ee&&he(e),Gt(i),y=!1,oo(b)}}}function z3(t,e){let r,i=e[17](e[36].id),o,u,c=i&&D3(e);return{key:t,first:null,c(){r=pn(),c&&c.c(),o=pn(),this.h()},l(s){r=pn(),c&&c.l(s),o=pn(),this.h()},h(){this.first=r},m(s,f){dt(s,r,f),c&&c.m(s,f),dt(s,o,f),u=!0},p(s,f){e=s,f[0]&512&&(i=e[17](e[36].id)),i?c?(c.p(e,f),f[0]&512&&We(c,1)):(c=D3(e),c.c(),We(c,1),c.m(o.parentNode,o)):c&&(gn(),et(c,1,1,()=>{c=null}),yn())},i(s){u||(We(c),u=!0)},o(s){et(c),u=!1},d(s){s&&(he(r),he(o)),c&&c.d(s)}}}function N3(t){let e,r,i,o=t[10]&&R3();return{c(){e=Je("div"),o&&o.c(),this.h()},l(u){e=Qe(u,"DIV",{class:!0,role:!0,style:!0,draggable:!0});var c=vt(e);o&&o.l(c),c.forEach(he),this.h()},h(){ge(e,"class","list-item svelte-11ej6jy"),ge(e,"role","listitem"),Nn(e,"height","40px"),ge(e,"draggable",!1),ui(e,"is-active",t[7]===t[16]())},m(u,c){dt(u,e,c),o&&o.m(e,null),r||(i=[Dr(e,"drop",uc(t[28])),Dr(e,"dragover",t[29]),Dr(e,"dragenter",t[30])],r=!0)},p(u,c){u[10]?o||(o=R3(),o.c(),o.m(e,null)):o&&(o.d(1),o=null),c[0]&65664&&ui(e,"is-active",u[7]===u[16]())},d(u){u&&he(e),o&&o.d(),r=!1,oo(i)}}}function R3(t){let e,r="Drag to the last";return{c(){e=Je("div"),e.textContent=r,this.h()},l(i){e=Qe(i,"DIV",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-190r67j"&&(e.textContent=r),this.h()},h(){ge(e,"class","last-drop-area svelte-11ej6jy")},m(i,o){dt(i,e,o)},d(i){i&&he(e)}}}function O3(t){let e=[],r=new Map,i,o,u,c=dn(t[9]);const s=y=>y[36].id;for(let y=0;y<c.length;y+=1){let b=P3(t,c,y),A=s(b);r.set(A,e[y]=z3(A,b))}let f=t[0]&&N3(t);return{c(){for(let y=0;y<e.length;y+=1)e[y].c();i=ir(),f&&f.c(),o=pn()},l(y){for(let b=0;b<e.length;b+=1)e[b].l(y);i=nr(y),f&&f.l(y),o=pn()},m(y,b){for(let A=0;A<e.length;A+=1)e[A]&&e[A].m(y,b);dt(y,i,b),f&&f.m(y,b),dt(y,o,b),u=!0},p(y,b){b[0]&195519&&(c=dn(y[9]),gn(),e=a9(e,b,s,1,y,c,r,i.parentNode,o9,z3,i,P3),yn()),y[0]?f?f.p(y,b):(f=N3(y),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i(y){if(!u){for(let b=0;b<c.length;b+=1)We(e[b]);u=!0}},o(y){for(let b=0;b<e.length;b+=1)et(e[b]);u=!1},d(y){y&&(he(i),he(o));for(let b=0;b<e.length;b+=1)e[b].d(y);f&&f.d(y)}}}function oj(t){let e,r,i=t[8]&&M3(t);return{c(){e=Je("ul"),i&&i.c(),this.h()},l(o){e=Qe(o,"UL",{class:!0});var u=vt(e);i&&i.l(u),u.forEach(he),this.h()},h(){ge(e,"class","legend-panel svelte-11ej6jy")},m(o,u){dt(o,e,u),i&&i.m(e,null),r=!0},p(o,u){o[8]?i?(i.p(o,u),u[0]&256&&We(i,1)):(i=M3(o),i.c(),We(i,1),i.m(e,null)):i&&(gn(),et(i,1,1,()=>{i=null}),yn())},i(o){r||(We(i),r=!0)},o(o){et(i),r=!1},d(o){o&&he(e),i&&i.d()}}}function aj(t,e,r){let i,o,u;Ga(t,T3,Be=>r(32,u=Be));let{map:c}=e,{onlyRendered:s=!0}=e,{onlyRelative:f=!0}=e,{enableLayerOrder:y=!1}=e,{disableVisibleButton:b=!1}=e,{enableEditing:A=!0}=e,I,C,N=!1,{defaultEditorFormat:O="yaml"}=e,$={},{relativeLayers:G={}}=e;const Z=(Be=!0)=>{if(!c||!I)return;const Ae=I.sprite;Ae&&(c.isStyleLoaded()?Be===!0?(r(8,C=new ij(Ae)),C.load().then(ee)):ee():setTimeout(Z,500))},ee=()=>{if(!c||!I)return;$={};const Be=c.getStyle().layers;if(s===!0){Object.keys(u).forEach(zt=>{$[zt]=u[zt]});const ht=c.queryRenderedFeatures().map(zt=>zt.layer.id).filter(nj),Nt=c.getZoom();Be.forEach(zt=>{const Mt=zt.minzoom??0,Kt=zt.maxzoom??24;(ht.indexOf(zt.id)!==-1||["heatmap","hillshade"].includes(zt.type)&&Nt>=Mt&&Nt<=Kt)&&($[zt.id]=zt)})}else Be.forEach(Ae=>{$[Ae.id]=Ae});r(9,o=[...Be])},te=Be=>{const Ae=Be.detail.layer;Be.detail.visibility==="none"?Lh(T3,u[Ae.id]=Ae,u):u[Ae.id]&&delete u[Ae.id]},_e=()=>{r(9,o=c.getStyle().layers),Z(!1)},le=(Be,Ae,ht)=>{Be.dataTransfer.dropEffect="move";const Nt=parseInt(Be.dataTransfer.getData("text/plain")),zt=o;Nt<=Ae?(zt.splice(Ae+1,0,zt[Nt]),zt.splice(Nt,1)):(zt.splice(Ae,0,zt[Nt]),zt.splice(Nt+1,1)),r(9,o=zt),r(7,N=void 0);const Mt=o[Ae];if(ht!=null&&ht.id)c.moveLayer(Mt.id,ht.id);else{const Kt=c.getStyle().layers[Nt];c.moveLayer(Kt.id)}_e()},we=(Be,Ae)=>{Be.dataTransfer.effectAllowed="move",Be.dataTransfer.dropEffect="move";const ht=Ae;Be.dataTransfer.setData("text/plain",ht)},ue=Be=>{Be.preventDefault(),Be.dataTransfer.dropEffect="move"},ze=()=>{let Be=0;return o==null||o.forEach((Ae,ht)=>{s===!0?$[Ae.id]&&(f===!0?G[Ae.id]&&(Be=ht):Be=ht):f===!0?G[Ae.id]&&(Be=ht):Be=ht}),Be+1},Ue=Be=>{let Ae=!1;return(G[Be]||Be.indexOf("heatmap")>0&&G[Be.replace("heatmap","").trim()])&&(Ae=!0),Ae},Ce=Be=>{let Ae=!1;return s===!0?$[Be]&&(f===!0?Ue(Be)&&(Ae=!0):Ae=!0):f===!0?Ue(Be)&&(Ae=!0):Ae=!0,Ae};function Me(Be){y=Be,r(0,y)}function qe(Be){b=Be,r(1,b)}function it(Be){A=Be,r(2,A)}function xt(Be){O=Be,r(3,O)}const yt=(Be,Ae)=>we(Ae,Be),$e=(Be,Ae,ht)=>le(ht,Be,Ae),at=Be=>ue(Be),mt=Be=>{r(7,N=Be)},Xe=Be=>le(Be,ze()),wt=Be=>ue(Be),be=()=>{r(7,N=ze())};return t.$$set=Be=>{"map"in Be&&r(4,c=Be.map),"onlyRendered"in Be&&r(19,s=Be.onlyRendered),"onlyRelative"in Be&&r(18,f=Be.onlyRelative),"enableLayerOrder"in Be&&r(0,y=Be.enableLayerOrder),"disableVisibleButton"in Be&&r(1,b=Be.disableVisibleButton),"enableEditing"in Be&&r(2,A=Be.enableEditing),"defaultEditorFormat"in Be&&r(3,O=Be.defaultEditorFormat),"relativeLayers"in Be&&r(5,G=Be.relativeLayers)},t.$$.update=()=>{t.$$.dirty[0]&128&&r(10,i=N===ze()),t.$$.dirty[0]&48&&(c&&(c.on("moveend",ee),c.on("styledata",ee),c.on("load",()=>{r(6,I=c.getStyle())}),c.on("style:change",Z)),G&&Object.keys(G).length===0&&r(18,f=!1)),t.$$.dirty[0]&64&&r(9,o=I?I.layers:[]),t.$$.dirty[0]&524288&&ee(),t.$$.dirty[0]&262144&&ee(),t.$$.dirty[0]&64&&Z()},[y,b,A,O,c,G,I,N,C,o,i,te,_e,le,we,ue,ze,Ce,f,s,Me,qe,it,xt,yt,$e,at,mt,Xe,wt,be]}class sj extends di{constructor(e){super(),pi(this,e,aj,oj,hi,{map:4,onlyRendered:19,onlyRelative:18,enableLayerOrder:0,disableVisibleButton:1,enableEditing:2,defaultEditorFormat:3,relativeLayers:5},null,[-1,-1])}}function F3(t){let e,r,i,o,u,c,s,f,y,b,A;const I=[uj,lj],C=[];function N(O,$){return O[2]?0:1}return u=N(t),c=C[u]=I[u](t),{c(){e=Je("div"),r=Je("input"),i=ir(),o=Je("label"),c.c(),this.h()},l(O){e=Qe(O,"DIV",{class:!0,"data-tooltip":!0});var $=vt(e);r=Qe($,"INPUT",{id:!0,type:!0,name:!0,class:!0}),i=nr($),o=Qe($,"LABEL",{class:!0,for:!0});var G=vt(o);c.l(G),G.forEach(he),$.forEach(he),this.h()},h(){ge(r,"id","layerorder"),ge(r,"type","checkbox"),ge(r,"name","relative_tab"),r.checked=t[2],ge(r,"class","svelte-1dgwvyy"),ge(o,"class","tab_item layer-order-tab svelte-1dgwvyy"),ge(o,"for","layerorder"),Ha(()=>t[8].call(o)),ge(e,"class","has-tooltip-bottom svelte-1dgwvyy"),ge(e,"data-tooltip",f=(t[2]?"Disable":"Enable")+" changing layer ordering")},m(O,$){dt(O,e,$),Ke(e,r),Ke(e,i),Ke(e,o),C[u].m(o,null),s=Pf(o,t[8].bind(o)),y=!0,b||(A=Dr(r,"click",t[7]),b=!0)},p(O,$){(!y||$&4)&&(r.checked=O[2]);let G=u;u=N(O),u===G?C[u].p(O,$):(gn(),et(C[G],1,1,()=>{C[G]=null}),yn(),c=C[u],c?c.p(O,$):(c=C[u]=I[u](O),c.c()),We(c,1),c.m(o,null)),(!y||$&4&&f!==(f=(O[2]?"Disable":"Enable")+" changing layer ordering"))&&ge(e,"data-tooltip",f)},i(O){y||(We(c),y=!0)},o(O){et(c),y=!1},d(O){O&&he(e),C[u].d(),s(),b=!1,A()}}}function lj(t){let e,r;return e=new bo({props:{icon:TS}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function uj(t){let e,r;return e=new bo({props:{icon:lS}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function cj(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N,O=t[3]&&F3(t);return{c(){e=Je("div"),r=Je("input"),i=ir(),o=Je("label"),u=Fi("Show rendered"),c=ir(),s=Je("input"),f=ir(),y=Je("label"),b=Fi("Show related"),A=ir(),O&&O.c(),this.h()},l($){e=Qe($,"DIV",{class:!0});var G=vt(e);r=Qe(G,"INPUT",{id:!0,type:!0,name:!0,class:!0}),i=nr(G),o=Qe(G,"LABEL",{class:!0,for:!0,style:!0});var Z=vt(o);u=Bi(Z,"Show rendered"),Z.forEach(he),c=nr(G),s=Qe(G,"INPUT",{id:!0,type:!0,name:!0,class:!0}),f=nr(G),y=Qe(G,"LABEL",{class:!0,for:!0,style:!0});var ee=vt(y);b=Bi(ee,"Show related"),ee.forEach(he),A=nr(G),O&&O.l(G),G.forEach(he),this.h()},h(){ge(r,"id","rendered"),ge(r,"type","checkbox"),ge(r,"name","rendered_tab"),r.checked=t[0],ge(r,"class","svelte-1dgwvyy"),ge(o,"class","tab_item svelte-1dgwvyy"),ge(o,"for","rendered"),Nn(o,"width","calc((100% - "+t[4]+"px - 10px)/2)"),ge(s,"id","relative"),ge(s,"type","checkbox"),ge(s,"name","relative_tab"),s.checked=t[1],ge(s,"class","svelte-1dgwvyy"),ge(y,"class","tab_item svelte-1dgwvyy"),ge(y,"for","relative"),Nn(y,"width","calc((100% - "+t[4]+"px - 10px)/2)"),ge(e,"class","tabs svelte-1dgwvyy")},m($,G){dt($,e,G),Ke(e,r),Ke(e,i),Ke(e,o),Ke(o,u),Ke(e,c),Ke(e,s),Ke(e,f),Ke(e,y),Ke(y,b),Ke(e,A),O&&O.m(e,null),I=!0,C||(N=[Dr(r,"click",t[5]),Dr(s,"click",t[6])],C=!0)},p($,[G]){(!I||G&1)&&(r.checked=$[0]),(!I||G&16)&&Nn(o,"width","calc((100% - "+$[4]+"px - 10px)/2)"),(!I||G&2)&&(s.checked=$[1]),(!I||G&16)&&Nn(y,"width","calc((100% - "+$[4]+"px - 10px)/2)"),$[3]?O?(O.p($,G),G&8&&We(O,1)):(O=F3($),O.c(),We(O,1),O.m(e,null)):O&&(gn(),et(O,1,1,()=>{O=null}),yn())},i($){I||(We(O),I=!0)},o($){et(O),I=!1},d($){$&&he(e),O&&O.d(),C=!1,oo(N)}}}function fj(t,e,r){let{onlyRendered:i=!0}=e,{onlyRelative:o=!0}=e,{enableLayerOrder:u=!1}=e,{isLayerOrderShown:c=!1}=e,s=0;const f=()=>r(0,i=!i),y=()=>r(1,o=!o),b=()=>r(2,u=!u);function A(){s=this.clientWidth,r(4,s)}return t.$$set=I=>{"onlyRendered"in I&&r(0,i=I.onlyRendered),"onlyRelative"in I&&r(1,o=I.onlyRelative),"enableLayerOrder"in I&&r(2,u=I.enableLayerOrder),"isLayerOrderShown"in I&&r(3,c=I.isLayerOrderShown)},[i,o,u,c,s,f,y,b,A]}class hj extends di{constructor(e){super(),pi(this,e,fj,cj,hi,{onlyRendered:0,onlyRelative:1,enableLayerOrder:2,isLayerOrderShown:3})}}class Hk{constructor(){li(this,"STYLE_PATHNAME","style")}getUrl(){const e=window.location,r=new URL(e.href);return r.hash=e.hash,r}updateUrl(e){history.replaceState("","",e.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(e){const r=this.getUrl();r.searchParams.set(this.STYLE_PATHNAME,e),this.updateUrl(r)}delete(){const e=this.getUrl();e.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(e)}getMatchedStyleByTitle(e,r){for(const i of e)if(i.title===r)return i}getMatchedStyleByUrl(e,r){for(const i of e)if(i.uri===r)return i}getInitialStyle(e){const r=e[0],i=this.get();let o=r;if(i){const u=this.getMatchedStyleByTitle(e,i);u&&(o=u)}else this.set(o.title);return o}}function B3(t,e,r){const i=t.slice();return i[8]=e[r],i}function j3(t){let e,r=t[8].title+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[8].uri,mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&1&&r!==(r=u[8].title+"")&&Dn(i,r),c&1&&o!==(o=u[8].uri)&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function dj(t){let e,r,i,o=dn(t[0]),u=[];for(let c=0;c<o.length;c+=1)u[c]=j3(B3(t,o,c));return{c(){e=Je("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=Qe(c,"SELECT",{class:!0});var s=vt(e);for(let f=0;f<u.length;f+=1)u[f].l(s);s.forEach(he),this.h()},h(){ge(e,"class","style-select svelte-1t35gnv"),t[1]===void 0&&Ha(()=>t[4].call(e))},m(c,s){dt(c,e,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null);ka(e,t[1],!0),r||(i=Dr(e,"change",t[4]),r=!0)},p(c,[s]){if(s&1){o=dn(c[0]);let f;for(f=0;f<o.length;f+=1){const y=B3(c,o,f);u[f]?u[f].p(y,s):(u[f]=j3(y),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}s&3&&ka(e,c[1])},i:mi,o:mi,d(c){c&&he(e),na(u,c),r=!1,i()}}}function pj(t,e,r){let{map:i}=e,{styles:o}=e,{selectedStyle:u}=e;const c=zh();let s=u.uri;const f=()=>{i&&s!==u.uri&&(i.setStyle(s),i.on("styledata",()=>{const A=new Hk,I=A.getMatchedStyleByUrl(o,s);I?(A.set(I.title),r(2,u=I)):A.delete(),c("change")}))},y=()=>{s!==u.uri&&r(1,s=u.uri)};function b(){s=Vc(this),r(1,s),r(0,o)}return t.$$set=A=>{"map"in A&&r(3,i=A.map),"styles"in A&&r(0,o=A.styles),"selectedStyle"in A&&r(2,u=A.selectedStyle)},t.$$.update=()=>{t.$$.dirty&2&&f(),t.$$.dirty&4&&y()},[o,s,u,i,b]}class mj extends di{constructor(e){super(),pi(this,e,pj,dj,hi,{map:3,styles:0,selectedStyle:2})}}function U3(t,e,r){var i,o,u,c,s;e==null&&(e=100);function f(){var b=Date.now()-c;b<e&&b>=0?i=setTimeout(f,e-b):(i=null,r||(s=t.apply(u,o),u=o=null))}var y=function(){u=this,o=arguments,c=Date.now();var b=r&&!i;return i||(i=setTimeout(f,e)),b&&(s=t.apply(u,o),u=o=null),s};return y.clear=function(){i&&(clearTimeout(i),i=null)},y.flush=function(){i&&(s=t.apply(u,o),u=o=null,clearTimeout(i),i=null)},y}U3.debounce=U3;function gj(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te;function _e(at){t[8](at)}function le(at){t[9](at)}function we(at){t[10](at)}let ue={};t[5]!==void 0&&(ue.map=t[5]),t[6]!==void 0&&(ue.selectedStyle=t[6]),t[0].styles!==void 0&&(ue.styles=t[0].styles),i=new mj({props:ue}),Ut.push(()=>Xt(i,"map",_e)),Ut.push(()=>Xt(i,"selectedStyle",le)),Ut.push(()=>Xt(i,"styles",we)),i.$on("change",t[7]);function ze(at){t[11](at)}function Ue(at){t[12](at)}function Ce(at){t[13](at)}let Me={isLayerOrderShown:!0};t[1]!==void 0&&(Me.onlyRendered=t[1]),t[2]!==void 0&&(Me.onlyRelative=t[2]),t[3]!==void 0&&(Me.enableLayerOrder=t[3]),y=new hj({props:Me}),Ut.push(()=>Xt(y,"onlyRendered",ze)),Ut.push(()=>Xt(y,"onlyRelative",Ue)),Ut.push(()=>Xt(y,"enableLayerOrder",Ce));function qe(at){t[14](at)}function it(at){t[15](at)}function xt(at){t[16](at)}function yt(at){t[17](at)}let $e={relativeLayers:t[4],disableVisibleButton:!1};return t[5]!==void 0&&($e.map=t[5]),t[1]!==void 0&&($e.onlyRendered=t[1]),t[2]!==void 0&&($e.onlyRelative=t[2]),t[3]!==void 0&&($e.enableLayerOrder=t[3]),O=new sj({props:$e}),Ut.push(()=>Xt(O,"map",qe)),Ut.push(()=>Xt(O,"onlyRendered",it)),Ut.push(()=>Xt(O,"onlyRelative",xt)),Ut.push(()=>Xt(O,"enableLayerOrder",yt)),{c(){e=Je("div"),r=Je("div"),Ht(i.$$.fragment),s=ir(),f=Je("div"),Ht(y.$$.fragment),C=ir(),N=Je("div"),Ht(O.$$.fragment),this.h()},l(at){e=Qe(at,"DIV",{class:!0});var mt=vt(e);r=Qe(mt,"DIV",{class:!0});var Xe=vt(r);Yt(i.$$.fragment,Xe),Xe.forEach(he),s=nr(mt),f=Qe(mt,"DIV",{class:!0});var wt=vt(f);Yt(y.$$.fragment,wt),wt.forEach(he),C=nr(mt),N=Qe(mt,"DIV",{class:!0});var be=vt(N);Yt(O.$$.fragment,be),be.forEach(he),mt.forEach(he),this.h()},h(){ge(r,"class","style-header svelte-1b1i5r2"),ge(f,"class","legend-header m-1 svelte-1b1i5r2"),ge(N,"class","legend-content svelte-1b1i5r2"),ge(e,"class","primary-container svelte-1b1i5r2")},m(at,mt){dt(at,e,mt),Ke(e,r),$t(i,r,null),Ke(e,s),Ke(e,f),$t(y,f,null),Ke(e,C),Ke(e,N),$t(O,N,null),te=!0},p(at,[mt]){const Xe={};!o&&mt&32&&(o=!0,Xe.map=at[5],er(()=>o=!1)),!u&&mt&64&&(u=!0,Xe.selectedStyle=at[6],er(()=>u=!1)),!c&&mt&1&&(c=!0,Xe.styles=at[0].styles,er(()=>c=!1)),i.$set(Xe);const wt={};!b&&mt&2&&(b=!0,wt.onlyRendered=at[1],er(()=>b=!1)),!A&&mt&4&&(A=!0,wt.onlyRelative=at[2],er(()=>A=!1)),!I&&mt&8&&(I=!0,wt.enableLayerOrder=at[3],er(()=>I=!1)),y.$set(wt);const be={};mt&16&&(be.relativeLayers=at[4]),!$&&mt&32&&($=!0,be.map=at[5],er(()=>$=!1)),!G&&mt&2&&(G=!0,be.onlyRendered=at[1],er(()=>G=!1)),!Z&&mt&4&&(Z=!0,be.onlyRelative=at[2],er(()=>Z=!1)),!ee&&mt&8&&(ee=!0,be.enableLayerOrder=at[3],er(()=>ee=!1)),O.$set(be)},i(at){te||(We(i.$$.fragment,at),We(y.$$.fragment,at),We(O.$$.fragment,at),te=!0)},o(at){et(i.$$.fragment,at),et(y.$$.fragment,at),et(O.$$.fragment,at),te=!1},d(at){at&&he(e),Gt(i),Gt(y),Gt(O)}}}function yj(t,e,r){let i,o;Ga(t,Ru,te=>r(5,i=te)),Ga(t,Mp,te=>r(6,o=te));let u=!0,c=!0,s=!1,f={};Do.legend&&Do.legend.targets&&(f=Do.legend.targets);const y=()=>{i&&i.fire("style:change")};function b(te){i=te,Ru.set(i)}function A(te){o=te,Mp.set(o)}function I(te){t.$$.not_equal(Do.styles,te)&&(Do.styles=te,r(0,Do))}function C(te){u=te,r(1,u)}function N(te){c=te,r(2,c)}function O(te){s=te,r(3,s)}function $(te){i=te,Ru.set(i)}function G(te){u=te,r(1,u)}function Z(te){c=te,r(2,c)}function ee(te){s=te,r(3,s)}return[Do,u,c,s,f,i,o,y,b,A,I,C,N,O,$,G,Z,ee]}class _j extends di{constructor(e){super(),pi(this,e,yj,gj,hi,{})}}var cv={exports:{}},$k=function(e,r){return function(){for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];return e.apply(r,o)}},vj=$k,Rh=Object.prototype.toString;function fv(t){return Rh.call(t)==="[object Array]"}function Gy(t){return typeof t>"u"}function bj(t){return t!==null&&!Gy(t)&&t.constructor!==null&&!Gy(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function wj(t){return Rh.call(t)==="[object ArrayBuffer]"}function xj(t){return typeof FormData<"u"&&t instanceof FormData}function kj(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Aj(t){return typeof t=="string"}function Sj(t){return typeof t=="number"}function Gk(t){return t!==null&&typeof t=="object"}function s2(t){if(Rh.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Ej(t){return Rh.call(t)==="[object Date]"}function Cj(t){return Rh.call(t)==="[object File]"}function Ij(t){return Rh.call(t)==="[object Blob]"}function Wk(t){return Rh.call(t)==="[object Function]"}function Lj(t){return Gk(t)&&Wk(t.pipe)}function Tj(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Pj(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Mj(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function hv(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),fv(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function Wy(){var t={};function e(o,u){s2(t[u])&&s2(o)?t[u]=Wy(t[u],o):s2(o)?t[u]=Wy({},o):fv(o)?t[u]=o.slice():t[u]=o}for(var r=0,i=arguments.length;r<i;r++)hv(arguments[r],e);return t}function Dj(t,e,r){return hv(e,function(o,u){r&&typeof o=="function"?t[u]=vj(o,r):t[u]=o}),t}function zj(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Zc={isArray:fv,isArrayBuffer:wj,isBuffer:bj,isFormData:xj,isArrayBufferView:kj,isString:Aj,isNumber:Sj,isObject:Gk,isPlainObject:s2,isUndefined:Gy,isDate:Ej,isFile:Cj,isBlob:Ij,isFunction:Wk,isStream:Lj,isURLSearchParams:Tj,isStandardBrowserEnv:Mj,forEach:hv,merge:Wy,extend:Dj,trim:Pj,stripBOM:zj},Yh=Zc;function q3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Zk=function(e,r,i){if(!r)return e;var o;if(i)o=i(r);else if(Yh.isURLSearchParams(r))o=r.toString();else{var u=[];Yh.forEach(r,function(f,y){f===null||typeof f>"u"||(Yh.isArray(f)?y=y+"[]":f=[f],Yh.forEach(f,function(A){Yh.isDate(A)?A=A.toISOString():Yh.isObject(A)&&(A=JSON.stringify(A)),u.push(q3(y)+"="+q3(A))}))}),o=u.join("&")}if(o){var c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},Nj=Zc;function Q2(){this.handlers=[]}Q2.prototype.use=function(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Q2.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Q2.prototype.forEach=function(e){Nj.forEach(this.handlers,function(i){i!==null&&e(i)})};var Rj=Q2,Oj=Zc,Fj=function(e,r){Oj.forEach(e,function(o,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[u])})},Xk=function(e,r,i,o,u){return e.config=r,i&&(e.code=i),e.request=o,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},kg,V3;function Yk(){if(V3)return kg;V3=1;var t=Xk;return kg=function(r,i,o,u,c){var s=new Error(r);return t(s,i,o,u,c)},kg}var Ag,H3;function Bj(){if(H3)return Ag;H3=1;var t=Yk();return Ag=function(r,i,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?r(o):i(t("Request failed with status code "+o.status,o.config,null,o.request,o))},Ag}var Sg,$3;function jj(){if($3)return Sg;$3=1;var t=Zc;return Sg=t.isStandardBrowserEnv()?function(){return{write:function(i,o,u,c,s,f){var y=[];y.push(i+"="+encodeURIComponent(o)),t.isNumber(u)&&y.push("expires="+new Date(u).toGMTString()),t.isString(c)&&y.push("path="+c),t.isString(s)&&y.push("domain="+s),f===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(i){var o=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Sg}var Eg,G3;function Uj(){return G3||(G3=1,Eg=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Eg}var Cg,W3;function qj(){return W3||(W3=1,Cg=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Cg}var Ig,Z3;function Vj(){if(Z3)return Ig;Z3=1;var t=Uj(),e=qj();return Ig=function(i,o){return i&&!t(o)?e(i,o):o},Ig}var Lg,X3;function Hj(){if(X3)return Lg;X3=1;var t=Zc,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Lg=function(i){var o={},u,c,s;return i&&t.forEach(i.split(`
`),function(y){if(s=y.indexOf(":"),u=t.trim(y.substr(0,s)).toLowerCase(),c=t.trim(y.substr(s+1)),u){if(o[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?o[u]=(o[u]?o[u]:[]).concat([c]):o[u]=o[u]?o[u]+", "+c:c}}),o},Lg}var Tg,Y3;function $j(){if(Y3)return Tg;Y3=1;var t=Zc;return Tg=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),o;function u(c){var s=c;return r&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return o=u(window.location.href),function(s){var f=t.isString(s)?u(s):s;return f.protocol===o.protocol&&f.host===o.host}}():function(){return function(){return!0}}(),Tg}var Pg,K3;function J3(){if(K3)return Pg;K3=1;var t=Zc,e=Bj(),r=jj(),i=Zk,o=Vj(),u=Hj(),c=$j(),s=Yk();return Pg=function(y){return new Promise(function(A,I){var C=y.data,N=y.headers,O=y.responseType;t.isFormData(C)&&delete N["Content-Type"];var $=new XMLHttpRequest;if(y.auth){var G=y.auth.username||"",Z=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";N.Authorization="Basic "+btoa(G+":"+Z)}var ee=o(y.baseURL,y.url);$.open(y.method.toUpperCase(),i(ee,y.params,y.paramsSerializer),!0),$.timeout=y.timeout;function te(){if($){var le="getAllResponseHeaders"in $?u($.getAllResponseHeaders()):null,we=!O||O==="text"||O==="json"?$.responseText:$.response,ue={data:we,status:$.status,statusText:$.statusText,headers:le,config:y,request:$};e(A,I,ue),$=null}}if("onloadend"in $?$.onloadend=te:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(te)},$.onabort=function(){$&&(I(s("Request aborted",y,"ECONNABORTED",$)),$=null)},$.onerror=function(){I(s("Network Error",y,null,$)),$=null},$.ontimeout=function(){var we="timeout of "+y.timeout+"ms exceeded";y.timeoutErrorMessage&&(we=y.timeoutErrorMessage),I(s(we,y,y.transitional&&y.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",$)),$=null},t.isStandardBrowserEnv()){var _e=(y.withCredentials||c(ee))&&y.xsrfCookieName?r.read(y.xsrfCookieName):void 0;_e&&(N[y.xsrfHeaderName]=_e)}"setRequestHeader"in $&&t.forEach(N,function(we,ue){typeof C>"u"&&ue.toLowerCase()==="content-type"?delete N[ue]:$.setRequestHeader(ue,we)}),t.isUndefined(y.withCredentials)||($.withCredentials=!!y.withCredentials),O&&O!=="json"&&($.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&$.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&$.upload&&$.upload.addEventListener("progress",y.onUploadProgress),y.cancelToken&&y.cancelToken.promise.then(function(we){$&&($.abort(),I(we),$=null)}),C||(C=null),$.send(C)})},Pg}var ql=Zc,Q3=Fj,Gj=Xk,Wj={"Content-Type":"application/x-www-form-urlencoded"};function ew(t,e){!ql.isUndefined(t)&&ql.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Zj(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=J3()),t}function Xj(t,e,r){if(ql.isString(t))try{return(e||JSON.parse)(t),ql.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}var em={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Zj(),transformRequest:[function(e,r){return Q3(r,"Accept"),Q3(r,"Content-Type"),ql.isFormData(e)||ql.isArrayBuffer(e)||ql.isBuffer(e)||ql.isStream(e)||ql.isFile(e)||ql.isBlob(e)?e:ql.isArrayBufferView(e)?e.buffer:ql.isURLSearchParams(e)?(ew(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ql.isObject(e)||r&&r["Content-Type"]==="application/json"?(ew(r,"application/json"),Xj(e)):e}],transformResponse:[function(e){var r=this.transitional,i=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,u=!i&&this.responseType==="json";if(u||o&&ql.isString(e)&&e.length)try{return JSON.parse(e)}catch(c){if(u)throw c.name==="SyntaxError"?Gj(c,this,"E_JSON_PARSE"):c}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};em.headers={common:{Accept:"application/json, text/plain, */*"}};ql.forEach(["delete","get","head"],function(e){em.headers[e]={}});ql.forEach(["post","put","patch"],function(e){em.headers[e]=ql.merge(Wj)});var dv=em,Yj=Zc,Kj=dv,Jj=function(e,r,i){var o=this||Kj;return Yj.forEach(i,function(c){e=c.call(o,e,r)}),e},Mg,tw;function Kk(){return tw||(tw=1,Mg=function(e){return!!(e&&e.__CANCEL__)}),Mg}var rw=Zc,Dg=Jj,Qj=Kk(),eU=dv;function zg(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var tU=function(e){zg(e),e.headers=e.headers||{},e.data=Dg.call(e,e.data,e.headers,e.transformRequest),e.headers=rw.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),rw.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||eU.adapter;return r(e).then(function(o){return zg(e),o.data=Dg.call(e,o.data,o.headers,e.transformResponse),o},function(o){return Qj(o)||(zg(e),o&&o.response&&(o.response.data=Dg.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},gu=Zc,Jk=function(e,r){r=r||{};var i={},o=["url","method","data"],u=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function f(I,C){return gu.isPlainObject(I)&&gu.isPlainObject(C)?gu.merge(I,C):gu.isPlainObject(C)?gu.merge({},C):gu.isArray(C)?C.slice():C}function y(I){gu.isUndefined(r[I])?gu.isUndefined(e[I])||(i[I]=f(void 0,e[I])):i[I]=f(e[I],r[I])}gu.forEach(o,function(C){gu.isUndefined(r[C])||(i[C]=f(void 0,r[C]))}),gu.forEach(u,y),gu.forEach(c,function(C){gu.isUndefined(r[C])?gu.isUndefined(e[C])||(i[C]=f(void 0,e[C])):i[C]=f(void 0,r[C])}),gu.forEach(s,function(C){C in r?i[C]=f(e[C],r[C]):C in e&&(i[C]=f(void 0,e[C]))});var b=o.concat(u).concat(c).concat(s),A=Object.keys(e).concat(Object.keys(r)).filter(function(C){return b.indexOf(C)===-1});return gu.forEach(A,y),i};const rU="axios",iU="0.21.4",nU="Promise based HTTP client for the browser and node.js",oU="index.js",aU={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},sU={type:"git",url:"https://github.com/axios/axios.git"},lU=["xhr","http","ajax","promise","node"],uU="Matt Zabriskie",cU="MIT",fU={url:"https://github.com/axios/axios/issues"},hU="https://axios-http.com",dU={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},pU={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},mU="dist/axios.min.js",gU="dist/axios.min.js",yU="./index.d.ts",_U={"follow-redirects":"^1.14.0"},vU=[{path:"./dist/axios.min.js",threshold:"5kB"}],bU={name:rU,version:iU,description:nU,main:oU,scripts:aU,repository:sU,keywords:lU,author:uU,license:cU,bugs:fU,homepage:hU,devDependencies:dU,browser:pU,jsdelivr:mU,unpkg:gU,typings:yU,dependencies:_U,bundlesize:vU};var Qk=bU,pv={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){pv[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var iw={},wU=Qk.version.split(".");function eA(t,e){for(var r=e?e.split("."):wU,i=t.split("."),o=0;o<3;o++){if(r[o]>i[o])return!0;if(r[o]<i[o])return!1}return!1}pv.transitional=function(e,r,i){var o=r&&eA(r);function u(c,s){return"[Axios v"+Qk.version+"] Transitional option '"+c+"'"+s+(i?". "+i:"")}return function(c,s,f){if(e===!1)throw new Error(u(s," has been removed in "+r));return o&&!iw[s]&&(iw[s]=!0,console.warn(u(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(c,s,f):!0}};function xU(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),o=i.length;o-- >0;){var u=i[o],c=e[u];if(c){var s=t[u],f=s===void 0||c(s,u,t);if(f!==!0)throw new TypeError("option "+u+" must be "+f);continue}if(r!==!0)throw Error("Unknown option "+u)}}var kU={isOlderVersion:eA,assertOptions:xU,validators:pv},tA=Zc,AU=Zk,nw=Rj,ow=tU,tm=Jk,rA=kU,Kh=rA.validators;function o1(t){this.defaults=t,this.interceptors={request:new nw,response:new nw}}o1.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=tm(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&rA.assertOptions(r,{silentJSONParsing:Kh.transitional(Kh.boolean,"1.0.0"),forcedJSONParsing:Kh.transitional(Kh.boolean,"1.0.0"),clarifyTimeoutError:Kh.transitional(Kh.boolean,"1.0.0")},!1);var i=[],o=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(e)===!1||(o=o&&I.synchronous,i.unshift(I.fulfilled,I.rejected))});var u=[];this.interceptors.response.forEach(function(I){u.push(I.fulfilled,I.rejected)});var c;if(!o){var s=[ow,void 0];for(Array.prototype.unshift.apply(s,i),s=s.concat(u),c=Promise.resolve(e);s.length;)c=c.then(s.shift(),s.shift());return c}for(var f=e;i.length;){var y=i.shift(),b=i.shift();try{f=y(f)}catch(A){b(A);break}}try{c=ow(f)}catch(A){return Promise.reject(A)}for(;u.length;)c=c.then(u.shift(),u.shift());return c};o1.prototype.getUri=function(e){return e=tm(this.defaults,e),AU(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};tA.forEach(["delete","get","head","options"],function(e){o1.prototype[e]=function(r,i){return this.request(tm(i||{},{method:e,url:r,data:(i||{}).data}))}});tA.forEach(["post","put","patch"],function(e){o1.prototype[e]=function(r,i,o){return this.request(tm(o||{},{method:e,url:r,data:i}))}});var SU=o1,Ng,aw;function iA(){if(aw)return Ng;aw=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Ng=t,Ng}var Rg,sw;function EU(){if(sw)return Rg;sw=1;var t=iA();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(c){i=c});var o=this;r(function(c){o.reason||(o.reason=new t(c),i(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var i,o=new e(function(c){i=c});return{token:o,cancel:i}},Rg=e,Rg}var Og,lw;function CU(){return lw||(lw=1,Og=function(e){return function(i){return e.apply(null,i)}}),Og}var Fg,uw;function IU(){return uw||(uw=1,Fg=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Fg}var cw=Zc,LU=$k,l2=SU,TU=Jk,PU=dv;function nA(t){var e=new l2(t),r=LU(l2.prototype.request,e);return cw.extend(r,l2.prototype,e),cw.extend(r,e),r}var z0=nA(PU);z0.Axios=l2;z0.create=function(e){return nA(TU(z0.defaults,e))};z0.Cancel=iA();z0.CancelToken=EU();z0.isCancel=Kk();z0.all=function(e){return Promise.all(e)};z0.spread=CU();z0.isAxiosError=IU();cv.exports=z0;cv.exports.default=z0;var MU=cv.exports,DU=MU;const zU=O2(DU),Zy=";base64,",NU=t=>t.indexOf(Zy)>-1,RU=t=>{const e=t.indexOf(Zy)+Zy.length,r=t.substring(e),i=window.atob(r),o=i.length,u=new Uint8Array(new ArrayBuffer(o));for(let c=0;c<o;c++)u[c]=i.charCodeAt(c);return u};async function OU(){const t=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],e=i=>new Promise((o,u)=>{var c=document.createElement("img");c.onerror=s=>o(!1),c.onload=()=>o(!0),c.src=i});return(await Promise.all(t.map(e))).every(i=>!!i)}class FU extends Error{}async function oA(t){return new Promise((e,r)=>{const i=new XMLHttpRequest;i.open("GET",t),i.responseType="arraybuffer";const o=()=>{r(new FU(`failed to load binary data, code "${i.status}" from "${t}"`))};i.onerror=o,i.onreadystatechange=()=>{i.readyState==4&&(i.status==200?e(new Uint8Array(i.response)):o())},i.send()})}function BU(){var t=typeof t<"u"?t:{},e=function(){function F(){}function X(pr,vr){return function(){pr.apply(vr,arguments)}}function ce(pr){if(!(this instanceof ce))throw new TypeError("Promises must be constructed via new");if(typeof pr!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],wr(pr,this)}function Pe(pr,vr){for(;pr._state===3;)pr=pr._value;if(pr._state===0){pr._deferreds.push(vr);return}pr._handled=!0,ce._immediateFn(function(){var _r=pr._state===1?vr.onFulfilled:vr.onRejected;if(_r===null){(pr._state===1?tt:bt)(vr.promise,pr._value);return}var Mr;try{Mr=_r(pr._value)}catch(Yr){bt(vr.promise,Yr);return}tt(vr.promise,Mr)})}function tt(pr,vr){try{if(vr===pr)throw new TypeError("A promise cannot be resolved with itself.");if(vr&&(typeof vr=="object"||typeof vr=="function")){var _r=vr.then;if(vr instanceof ce){pr._state=3,pr._value=vr,Bt(pr);return}else if(typeof _r=="function"){wr(X(_r,vr),pr);return}}pr._state=1,pr._value=vr,Bt(pr)}catch(Mr){bt(pr,Mr)}}function bt(pr,vr){pr._state=2,pr._value=vr,Bt(pr)}function Bt(pr){pr._state===2&&pr._deferreds.length===0&&ce._immediateFn(function(){pr._handled||ce._unhandledRejectionFn(pr._value)});for(var vr=0,_r=pr._deferreds.length;vr<_r;vr++)Pe(pr,pr._deferreds[vr]);pr._deferreds=null}function Ot(pr,vr,_r){this.onFulfilled=typeof pr=="function"?pr:null,this.onRejected=typeof vr=="function"?vr:null,this.promise=_r}function wr(pr,vr){var _r=!1;try{pr(function(Mr){_r||(_r=!0,tt(vr,Mr))},function(Mr){_r||(_r=!0,bt(vr,Mr))})}catch(Mr){if(_r)return;_r=!0,bt(vr,Mr)}}return ce.prototype.catch=function(pr){return this.then(null,pr)},ce.prototype.then=function(pr,vr){var _r=new this.constructor(F);return Pe(this,new Ot(pr,vr,_r)),_r},ce.all=function(pr){return new ce(function(vr,_r){if(!Array.isArray(pr))return _r(new TypeError("Promise.all accepts an array"));var Mr=Array.prototype.slice.call(pr);if(Mr.length===0)return vr([]);var Yr=Mr.length;function wi(m,xr){try{if(xr&&(typeof xr=="object"||typeof xr=="function")){var h=xr.then;if(typeof h=="function"){h.call(xr,function(P){wi(m,P)},_r);return}}Mr[m]=xr,--Yr===0&&vr(Mr)}catch(P){_r(P)}}for(var ot=0;ot<Mr.length;ot++)wi(ot,Mr[ot])})},ce.resolve=function(pr){return pr&&typeof pr=="object"&&pr.constructor===ce?pr:new ce(function(vr){vr(pr)})},ce.reject=function(pr){return new ce(function(vr,_r){_r(pr)})},ce.race=function(pr){return new ce(function(vr,_r){if(!Array.isArray(pr))return _r(new TypeError("Promise.race accepts an array"));for(var Mr=0,Yr=pr.length;Mr<Yr;Mr++)ce.resolve(pr[Mr]).then(vr,_r)})},ce._immediateFn=typeof setImmediate=="function"&&function(pr){setImmediate(pr)}||function(pr){setTimeout(pr,0)},ce._unhandledRejectionFn=function(vr){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",vr)},ce}(),r={},i;for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var o=!0,u="";function c(F){return t.locateFile?t.locateFile(F,u):u+F}var s,f,y;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",s=function(X){try{var ce=new XMLHttpRequest;return ce.open("GET",X,!1),ce.send(null),ce.responseText}catch(tt){var Pe=Qs(X);if(Pe)return rs(Pe);throw tt}},f=function(X,ce,Pe){var tt=new XMLHttpRequest;tt.open("GET",X,!0),tt.responseType="arraybuffer",tt.onload=function(){if(tt.status==200||tt.status==0&&tt.response){ce(tt.response);return}var Bt=Qs(X);if(Bt){ce(Bt.buffer);return}Pe()},tt.onerror=Pe,tt.send(null)};var b=t.print||console.log.bind(console),A=t.printErr||console.warn.bind(console);for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);r=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit;var I=16;function C(F,X){return X||(X=I),Math.ceil(F/X)*X}function N(F){N.shown||(N.shown={}),N.shown[F]||(N.shown[F]=1,A(F))}var O=0,$=function(F){O=F},G=function(){return O},Z;t.wasmBinary&&(Z=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime;var ee={Memory:function(F){this.buffer=new ArrayBuffer(F.initial*65536),this.grow=function(X){var ce=Fs(X);return ce}},Table:function(F){var X=new Array(F.initial);return X.set=function(ce,Pe){X[ce]=Pe},X.get=function(ce){return X[ce]},X},Module:function(F){},Instance:function(F,X){this.exports=function(Pe,tt,bt){function Bt(_r,Mr,Yr){var wi=Mr.memory,ot=bt,m=new _r.Int8Array(Yr),xr=new _r.Int16Array(Yr),h=new _r.Int32Array(Yr),P=new _r.Uint8Array(Yr),ci=new _r.Uint16Array(Yr),Oi=new _r.Uint32Array(Yr);new _r.Float32Array(Yr);var wo=new _r.Float64Array(Yr),ie=_r.Math.imul;_r.Math.fround,_r.Math.abs;var wn=_r.Math.clz32;_r.Math.min,_r.Math.max,_r.Math.floor,_r.Math.ceil,_r.Math.sqrt;var Bs=Mr.abort;_r.NaN,_r.Infinity;var Xl=Mr.SDL_Init,p0=Mr.SDL_SetVideoMode,Yl=Mr.SDL_CreateRGBSurface,js=Mr.SDL_LockSurface,kc=Mr.SDL_UnlockSurface,El=Mr.SDL_UpperBlit,xu=Mr.SDL_Flip,Cl=Mr.SDL_FreeSurface,Ac=Mr.fd_close,Us=Mr.fd_write,Gu=Mr.emscripten_resize_heap,Sc=Mr.emscripten_memcpy_big,Kl=Mr.setTempRet0,qs=Mr.fd_seek,Mi=5255072,bi=0;function rl(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0;g=h[a>>2],se=h[a+4>>2],l=h[n+2264>>2],m[l+823|0]=129,m[l+807|0]=129,m[l+791|0]=129,m[l+775|0]=129,m[l+759|0]=129,m[l+743|0]=129,m[l+727|0]=129,m[l+711|0]=129,m[l+695|0]=129,m[l+679|0]=129,m[l+663|0]=129,m[l+647|0]=129,m[l+631|0]=129,m[l+615|0]=129,m[l+599|0]=129,m[l+583|0]=129,m[l+519|0]=129,m[l+487|0]=129,m[l+455|0]=129,m[l+423|0]=129,m[l+391|0]=129,m[l+359|0]=129,m[l+327|0]=129,m[l+295|0]=129,m[l+263|0]=129,m[l+231|0]=129,m[l+199|0]=129,m[l+167|0]=129,m[l+135|0]=129,m[l+103|0]=129,m[l+71|0]=129,m[l+39|0]=129;e:{if((se|0)>=1){m[l+551|0]=129,m[l+567|0]=129,m[l+7|0]=129;break e}m[l+7|0]=2139062143,m[l+8|0]=8355711,m[l+9|0]=32639,m[l+10|0]=127,m[l+11|0]=2139062143,m[l+12|0]=8355711,m[l+13|0]=32639,m[l+14|0]=127,m[l+551|0]=2139062143,m[l+552|0]=8355711,m[l+553|0]=32639,m[l+554|0]=127,m[l+555|0]=2139062143,m[l+556|0]=8355711,m[l+557|0]=32639,m[l+558|0]=127,m[l+567|0]=2139062143,m[l+568|0]=8355711,m[l+569|0]=32639,m[l+570|0]=127,m[l+571|0]=2139062143,m[l+572|0]=8355711,m[l+573|0]=32639,m[l+574|0]=127,m[l+20|0]=2139062143,m[l+21|0]=8355711,m[l+22|0]=32639,m[l+23|0]=127,m[l+24|0]=2139062143,m[l+25|0]=8355711,m[l+26|0]=32639,m[l+27|0]=127,m[l+15|0]=2139062143,m[l+16|0]=8355711,m[l+17|0]=32639,m[l+18|0]=127,m[l+19|0]=2139062143,m[l+20|0]=8355711,m[l+21|0]=32639,m[l+22|0]=127,m[l+559|0]=127,m[l+575|0]=127}if(h[n+288>>2]>=1)for(Oe=l+600|0,He=l+584|0,xe=l+40|0,Pt=se?5:6,rr=g<<3,ur=g<<4,Lr=l+520|0,Rr=l+8|0,st=l+24|0,Wt=!se<<2,Gr=(se|0)<1;;){E=h[a+16>>2],J&&(g=P[l+20|0]|P[l+21|0]<<8|(P[l+22|0]<<16|P[l+23|0]<<24),m[l+4|0]=g,m[l+5|0]=g>>>8,m[l+6|0]=g>>>16,m[l+7|0]=g>>>24,g=P[l+52|0]|P[l+53|0]<<8|(P[l+54|0]<<16|P[l+55|0]<<24),m[l+36|0]=g,m[l+37|0]=g>>>8,m[l+38|0]=g>>>16,m[l+39|0]=g>>>24,g=P[l+84|0]|P[l+85|0]<<8|(P[l+86|0]<<16|P[l+87|0]<<24),m[l+68|0]=g,m[l+69|0]=g>>>8,m[l+70|0]=g>>>16,m[l+71|0]=g>>>24,g=P[l+116|0]|P[l+117|0]<<8|(P[l+118|0]<<16|P[l+119|0]<<24),m[l+100|0]=g,m[l+101|0]=g>>>8,m[l+102|0]=g>>>16,m[l+103|0]=g>>>24,g=P[l+148|0]|P[l+149|0]<<8|(P[l+150|0]<<16|P[l+151|0]<<24),m[l+132|0]=g,m[l+133|0]=g>>>8,m[l+134|0]=g>>>16,m[l+135|0]=g>>>24,g=P[l+180|0]|P[l+181|0]<<8|(P[l+182|0]<<16|P[l+183|0]<<24),m[l+164|0]=g,m[l+165|0]=g>>>8,m[l+166|0]=g>>>16,m[l+167|0]=g>>>24,g=P[l+212|0]|P[l+213|0]<<8|(P[l+214|0]<<16|P[l+215|0]<<24),m[l+196|0]=g,m[l+197|0]=g>>>8,m[l+198|0]=g>>>16,m[l+199|0]=g>>>24,g=P[l+244|0]|P[l+245|0]<<8|(P[l+246|0]<<16|P[l+247|0]<<24),m[l+228|0]=g,m[l+229|0]=g>>>8,m[l+230|0]=g>>>16,m[l+231|0]=g>>>24,g=P[l+276|0]|P[l+277|0]<<8|(P[l+278|0]<<16|P[l+279|0]<<24),m[l+260|0]=g,m[l+261|0]=g>>>8,m[l+262|0]=g>>>16,m[l+263|0]=g>>>24,g=P[l+308|0]|P[l+309|0]<<8|(P[l+310|0]<<16|P[l+311|0]<<24),m[l+292|0]=g,m[l+293|0]=g>>>8,m[l+294|0]=g>>>16,m[l+295|0]=g>>>24,g=P[l+340|0]|P[l+341|0]<<8|(P[l+342|0]<<16|P[l+343|0]<<24),m[l+324|0]=g,m[l+325|0]=g>>>8,m[l+326|0]=g>>>16,m[l+327|0]=g>>>24,g=P[l+372|0]|P[l+373|0]<<8|(P[l+374|0]<<16|P[l+375|0]<<24),m[l+356|0]=g,m[l+357|0]=g>>>8,m[l+358|0]=g>>>16,m[l+359|0]=g>>>24,g=P[l+404|0]|P[l+405|0]<<8|(P[l+406|0]<<16|P[l+407|0]<<24),m[l+388|0]=g,m[l+389|0]=g>>>8,m[l+390|0]=g>>>16,m[l+391|0]=g>>>24,g=P[l+436|0]|P[l+437|0]<<8|(P[l+438|0]<<16|P[l+439|0]<<24),m[l+420|0]=g,m[l+421|0]=g>>>8,m[l+422|0]=g>>>16,m[l+423|0]=g>>>24,g=P[l+468|0]|P[l+469|0]<<8|(P[l+470|0]<<16|P[l+471|0]<<24),m[l+452|0]=g,m[l+453|0]=g>>>8,m[l+454|0]=g>>>16,m[l+455|0]=g>>>24,g=P[l+500|0]|P[l+501|0]<<8|(P[l+502|0]<<16|P[l+503|0]<<24),m[l+484|0]=g,m[l+485|0]=g>>>8,m[l+486|0]=g>>>16,m[l+487|0]=g>>>24,g=P[l+532|0]|P[l+533|0]<<8|(P[l+534|0]<<16|P[l+535|0]<<24),m[l+516|0]=g,m[l+517|0]=g>>>8,m[l+518|0]=g>>>16,m[l+519|0]=g>>>24,g=P[l+556|0]|P[l+557|0]<<8|(P[l+558|0]<<16|P[l+559|0]<<24),m[l+548|0]=g,m[l+549|0]=g>>>8,m[l+550|0]=g>>>16,m[l+551|0]=g>>>24,g=P[l+572|0]|P[l+573|0]<<8|(P[l+574|0]<<16|P[l+575|0]<<24),m[l+564|0]=g,m[l+565|0]=g>>>8,m[l+566|0]=g>>>16,m[l+567|0]=g>>>24,g=P[l+588|0]|P[l+589|0]<<8|(P[l+590|0]<<16|P[l+591|0]<<24),m[l+580|0]=g,m[l+581|0]=g>>>8,m[l+582|0]=g>>>16,m[l+583|0]=g>>>24,g=P[l+604|0]|P[l+605|0]<<8|(P[l+606|0]<<16|P[l+607|0]<<24),m[l+596|0]=g,m[l+597|0]=g>>>8,m[l+598|0]=g>>>16,m[l+599|0]=g>>>24,g=P[l+620|0]|P[l+621|0]<<8|(P[l+622|0]<<16|P[l+623|0]<<24),m[l+612|0]=g,m[l+613|0]=g>>>8,m[l+614|0]=g>>>16,m[l+615|0]=g>>>24,g=P[l+636|0]|P[l+637|0]<<8|(P[l+638|0]<<16|P[l+639|0]<<24),m[l+628|0]=g,m[l+629|0]=g>>>8,m[l+630|0]=g>>>16,m[l+631|0]=g>>>24,g=P[l+652|0]|P[l+653|0]<<8|(P[l+654|0]<<16|P[l+655|0]<<24),m[l+644|0]=g,m[l+645|0]=g>>>8,m[l+646|0]=g>>>16,m[l+647|0]=g>>>24,g=P[l+668|0]|P[l+669|0]<<8|(P[l+670|0]<<16|P[l+671|0]<<24),m[l+660|0]=g,m[l+661|0]=g>>>8,m[l+662|0]=g>>>16,m[l+663|0]=g>>>24,g=P[l+684|0]|P[l+685|0]<<8|(P[l+686|0]<<16|P[l+687|0]<<24),m[l+676|0]=g,m[l+677|0]=g>>>8,m[l+678|0]=g>>>16,m[l+679|0]=g>>>24,g=P[l+700|0]|P[l+701|0]<<8|(P[l+702|0]<<16|P[l+703|0]<<24),m[l+692|0]=g,m[l+693|0]=g>>>8,m[l+694|0]=g>>>16,m[l+695|0]=g>>>24,g=P[l+716|0]|P[l+717|0]<<8|(P[l+718|0]<<16|P[l+719|0]<<24),m[l+708|0]=g,m[l+709|0]=g>>>8,m[l+710|0]=g>>>16,m[l+711|0]=g>>>24,g=P[l+732|0]|P[l+733|0]<<8|(P[l+734|0]<<16|P[l+735|0]<<24),m[l+724|0]=g,m[l+725|0]=g>>>8,m[l+726|0]=g>>>16,m[l+727|0]=g>>>24,g=P[l+748|0]|P[l+749|0]<<8|(P[l+750|0]<<16|P[l+751|0]<<24),m[l+740|0]=g,m[l+741|0]=g>>>8,m[l+742|0]=g>>>16,m[l+743|0]=g>>>24,g=P[l+764|0]|P[l+765|0]<<8|(P[l+766|0]<<16|P[l+767|0]<<24),m[l+756|0]=g,m[l+757|0]=g>>>8,m[l+758|0]=g>>>16,m[l+759|0]=g>>>24,g=P[l+780|0]|P[l+781|0]<<8|(P[l+782|0]<<16|P[l+783|0]<<24),m[l+772|0]=g,m[l+773|0]=g>>>8,m[l+774|0]=g>>>16,m[l+775|0]=g>>>24,g=P[l+796|0]|P[l+797|0]<<8|(P[l+798|0]<<16|P[l+799|0]<<24),m[l+788|0]=g,m[l+789|0]=g>>>8,m[l+790|0]=g>>>16,m[l+791|0]=g>>>24,g=P[l+812|0]|P[l+813|0]<<8|(P[l+814|0]<<16|P[l+815|0]<<24),m[l+804|0]=g,m[l+805|0]=g>>>8,m[l+806|0]=g>>>16,m[l+807|0]=g>>>24,g=P[l+828|0]|P[l+829|0]<<8|(P[l+830|0]<<16|P[l+831|0]<<24),m[l+820|0]=g,m[l+821|0]=g>>>8,m[l+822|0]=g>>>16,m[l+823|0]=g>>>24),g=h[n+2252>>2]+(J<<5)|0,x=E+ie(J,800)|0,D=h[x+788>>2];e:{t:{r:{i:{if(!Gr){if(H=P[g+4|0]|P[g+5|0]<<8|(P[g+6|0]<<16|P[g+7|0]<<24),w=Rr,V=P[g|0]|P[g+1|0]<<8|(P[g+2|0]<<16|P[g+3|0]<<24),m[w|0]=V,m[w+1|0]=V>>>8,m[w+2|0]=V>>>16,m[w+3|0]=V>>>24,m[w+4|0]=H,m[w+5|0]=H>>>8,m[w+6|0]=H>>>16,m[w+7|0]=H>>>24,H=P[g+12|0]|P[g+13|0]<<8|(P[g+14|0]<<16|P[g+15|0]<<24),V=P[g+8|0]|P[g+9|0]<<8|(P[g+10|0]<<16|P[g+11|0]<<24),m[w+8|0]=V,m[w+9|0]=V>>>8,m[w+10|0]=V>>>16,m[w+11|0]=V>>>24,m[w+12|0]=H,m[w+13|0]=H>>>8,m[w+14|0]=H>>>16,m[w+15|0]=H>>>24,w=P[g+20|0]|P[g+21|0]<<8|(P[g+22|0]<<16|P[g+23|0]<<24),H=P[g+16|0]|P[g+17|0]<<8|(P[g+18|0]<<16|P[g+19|0]<<24),m[l+552|0]=H,m[l+553|0]=H>>>8,m[l+554|0]=H>>>16,m[l+555|0]=H>>>24,m[l+556|0]=w,m[l+557|0]=w>>>8,m[l+558|0]=w>>>16,m[l+559|0]=w>>>24,w=P[g+28|0]|P[g+29|0]<<8|(P[g+30|0]<<16|P[g+31|0]<<24),E=P[g+24|0]|P[g+25|0]<<8|(P[g+26|0]<<16|P[g+27|0]<<24),m[l+568|0]=E,m[l+569|0]=E>>>8,m[l+570|0]=E>>>16,m[l+571|0]=E>>>24,m[l+572|0]=w,m[l+573|0]=w>>>8,m[l+574|0]=w>>>16,m[l+575|0]=w>>>24,P[x+768|0])break i;break t}if(!P[x+768|0])break t;E=h[st>>2];break r}if((J|0)>=(h[n+288>>2]+-1|0)){E=P[g+15|0],h[st>>2]=ie(E,16843009),E=E|E<<8,E=E<<16|E;break r}E=P[g+32|0]|P[g+33|0]<<8|(P[g+34|0]<<16|P[g+35|0]<<24),h[st>>2]=E}for(h[l+280>>2]=E,h[l+408>>2]=E,h[l+152>>2]=E,E=0;;){w=ci[(E<<1)+4880>>1]+xe|0,ot[h[(P[(x+E|0)+769|0]<<2)+10736>>2]](w),H=x+(E<<5)|0;r:{i:switch((D>>>30|0)+-1|0){case 2:ot[h[2703]](H,w,0);break r;case 1:ot[h[2704]](H,w);break r;case 0:break i;default:break r}ot[h[2706]](H,w)}if(D=D<<2,E=E+1|0,(E|0)==16)break}V=J?Wt:Pt;break e}if(E=P[x+769|0],V=J?Wt:Pt,ot[h[((E||V)<<2)+10704>>2]](xe),E=0,!D)break e;for(;;){w=x+(E<<5)|0,H=ci[(E<<1)+4880>>1]+xe|0;t:{r:switch((D>>>30|0)+-1|0){case 2:ot[h[2703]](w,H,0);break t;case 1:ot[h[2704]](w,H);break t;case 0:break r;default:break t}ot[h[2706]](w,H)}if(D=D<<2,E=E+1|0,(E|0)==16)break}}E=h[x+792>>2],w=P[x+785|0],w=((w||V)<<2)+10784|0,ot[h[w>>2]](He),ot[h[w>>2]](Oe);e:{if(!(E&255))break e;if(w=x+512|0,E&170){ot[h[2705]](w,He);break e}ot[h[2707]](w,He)}e:{if(!(E&65280))break e;if(w=x+640|0,E&43520){ot[h[2705]](w,Oe);break e}ot[h[2707]](w,Oe)}for((se|0)<(h[n+292>>2]+-1|0)&&(E=Lr,w=P[E+4|0]|P[E+5|0]<<8|(P[E+6|0]<<16|P[E+7|0]<<24),x=P[E|0]|P[E+1|0]<<8|(P[E+2|0]<<16|P[E+3|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=w,m[g+5|0]=w>>>8,m[g+6|0]=w>>>16,m[g+7|0]=w>>>24,w=P[E+12|0]|P[E+13|0]<<8|(P[E+14|0]<<16|P[E+15|0]<<24),E=P[E+8|0]|P[E+9|0]<<8|(P[E+10|0]<<16|P[E+11|0]<<24),m[g+8|0]=E,m[g+9|0]=E>>>8,m[g+10|0]=E>>>16,m[g+11|0]=E>>>24,m[g+12|0]=w,m[g+13|0]=w>>>8,m[g+14|0]=w>>>16,m[g+15|0]=w>>>24,E=P[l+812|0]|P[l+813|0]<<8|(P[l+814|0]<<16|P[l+815|0]<<24),w=P[l+808|0]|P[l+809|0]<<8|(P[l+810|0]<<16|P[l+811|0]<<24),m[g+16|0]=w,m[g+17|0]=w>>>8,m[g+18|0]=w>>>16,m[g+19|0]=w>>>24,m[g+20|0]=E,m[g+21|0]=E>>>8,m[g+22|0]=E>>>16,m[g+23|0]=E>>>24,E=P[l+828|0]|P[l+829|0]<<8|(P[l+830|0]<<16|P[l+831|0]<<24),w=P[l+824|0]|P[l+825|0]<<8|(P[l+826|0]<<16|P[l+827|0]<<24),m[g+24|0]=w,m[g+25|0]=w>>>8,m[g+26|0]=w>>>16,m[g+27|0]=w>>>24,m[g+28|0]=E,m[g+29|0]=E>>>8,m[g+30|0]=E>>>16,m[g+31|0]=E>>>24),ti=h[n+2284>>2],H=h[n+2272>>2],V=h[n+2276>>2],g=xe,x=P[g+4|0]|P[g+5|0]<<8|(P[g+6|0]<<16|P[g+7|0]<<24),w=(h[n+2268>>2]+(J<<4)|0)+ie(h[n+2280>>2],ur)|0,D=P[g|0]|P[g+1|0]<<8|(P[g+2|0]<<16|P[g+3|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[g+12|0]|P[g+13|0]<<8|(P[g+14|0]<<16|P[g+15|0]<<24),g=P[g+8|0]|P[g+9|0]<<8|(P[g+10|0]<<16|P[g+11|0]<<24),m[w+8|0]=g,m[w+9|0]=g>>>8,m[w+10|0]=g>>>16,m[w+11|0]=g>>>24,m[w+12|0]=x,m[w+13|0]=x>>>8,m[w+14|0]=x>>>16,m[w+15|0]=x>>>24,g=J<<3,gi=g+V|0,Ki=g+H|0,E=1;x=(E<<5)+xe|0,H=P[x+4|0]|P[x+5|0]<<8|(P[x+6|0]<<16|P[x+7|0]<<24),g=w+ie(h[n+2280>>2],E)|0,V=P[x|0]|P[x+1|0]<<8|(P[x+2|0]<<16|P[x+3|0]<<24),m[g|0]=V,m[g+1|0]=V>>>8,m[g+2|0]=V>>>16,m[g+3|0]=V>>>24,m[g+4|0]=H,m[g+5|0]=H>>>8,m[g+6|0]=H>>>16,m[g+7|0]=H>>>24,D=P[x+12|0]|P[x+13|0]<<8|(P[x+14|0]<<16|P[x+15|0]<<24),x=P[x+8|0]|P[x+9|0]<<8|(P[x+10|0]<<16|P[x+11|0]<<24),m[g+8|0]=x,m[g+9|0]=x>>>8,m[g+10|0]=x>>>16,m[g+11|0]=x>>>24,m[g+12|0]=D,m[g+13|0]=D>>>8,m[g+14|0]=D>>>16,m[g+15|0]=D>>>24,E=E+1|0,(E|0)!=16;);if(w=P[l+588|0]|P[l+589|0]<<8|(P[l+590|0]<<16|P[l+591|0]<<24),D=ie(rr,ti),g=D+Ki|0,x=P[l+584|0]|P[l+585|0]<<8|(P[l+586|0]<<16|P[l+587|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=w,m[g+5|0]=w>>>8,m[g+6|0]=w>>>16,m[g+7|0]=w>>>24,E=D+gi|0,w=E,x=P[l+604|0]|P[l+605|0]<<8|(P[l+606|0]<<16|P[l+607|0]<<24),D=P[l+600|0]|P[l+601|0]<<8|(P[l+602|0]<<16|P[l+603|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+620|0]|P[l+621|0]<<8|(P[l+622|0]<<16|P[l+623|0]<<24),w=g+h[n+2284>>2]|0,D=P[l+616|0]|P[l+617|0]<<8|(P[l+618|0]<<16|P[l+619|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+636|0]|P[l+637|0]<<8|(P[l+638|0]<<16|P[l+639|0]<<24),w=E+h[n+2284>>2]|0,D=P[l+632|0]|P[l+633|0]<<8|(P[l+634|0]<<16|P[l+635|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+652|0]|P[l+653|0]<<8|(P[l+654|0]<<16|P[l+655|0]<<24),w=g+(h[n+2284>>2]<<1)|0,D=P[l+648|0]|P[l+649|0]<<8|(P[l+650|0]<<16|P[l+651|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+668|0]|P[l+669|0]<<8|(P[l+670|0]<<16|P[l+671|0]<<24),w=E+(h[n+2284>>2]<<1)|0,D=P[l+664|0]|P[l+665|0]<<8|(P[l+666|0]<<16|P[l+667|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+684|0]|P[l+685|0]<<8|(P[l+686|0]<<16|P[l+687|0]<<24),w=g+ie(h[n+2284>>2],3)|0,D=P[l+680|0]|P[l+681|0]<<8|(P[l+682|0]<<16|P[l+683|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+700|0]|P[l+701|0]<<8|(P[l+702|0]<<16|P[l+703|0]<<24),w=E+ie(h[n+2284>>2],3)|0,D=P[l+696|0]|P[l+697|0]<<8|(P[l+698|0]<<16|P[l+699|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+716|0]|P[l+717|0]<<8|(P[l+718|0]<<16|P[l+719|0]<<24),w=g+(h[n+2284>>2]<<2)|0,D=P[l+712|0]|P[l+713|0]<<8|(P[l+714|0]<<16|P[l+715|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+732|0]|P[l+733|0]<<8|(P[l+734|0]<<16|P[l+735|0]<<24),w=E+(h[n+2284>>2]<<2)|0,D=P[l+728|0]|P[l+729|0]<<8|(P[l+730|0]<<16|P[l+731|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+748|0]|P[l+749|0]<<8|(P[l+750|0]<<16|P[l+751|0]<<24),w=g+ie(h[n+2284>>2],5)|0,D=P[l+744|0]|P[l+745|0]<<8|(P[l+746|0]<<16|P[l+747|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+764|0]|P[l+765|0]<<8|(P[l+766|0]<<16|P[l+767|0]<<24),w=E+ie(h[n+2284>>2],5)|0,D=P[l+760|0]|P[l+761|0]<<8|(P[l+762|0]<<16|P[l+763|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+780|0]|P[l+781|0]<<8|(P[l+782|0]<<16|P[l+783|0]<<24),w=g+ie(h[n+2284>>2],6)|0,D=P[l+776|0]|P[l+777|0]<<8|(P[l+778|0]<<16|P[l+779|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,x=P[l+796|0]|P[l+797|0]<<8|(P[l+798|0]<<16|P[l+799|0]<<24),w=E+ie(h[n+2284>>2],6)|0,D=P[l+792|0]|P[l+793|0]<<8|(P[l+794|0]<<16|P[l+795|0]<<24),m[w|0]=D,m[w+1|0]=D>>>8,m[w+2|0]=D>>>16,m[w+3|0]=D>>>24,m[w+4|0]=x,m[w+5|0]=x>>>8,m[w+6|0]=x>>>16,m[w+7|0]=x>>>24,w=P[l+812|0]|P[l+813|0]<<8|(P[l+814|0]<<16|P[l+815|0]<<24),g=g+ie(h[n+2284>>2],7)|0,x=P[l+808|0]|P[l+809|0]<<8|(P[l+810|0]<<16|P[l+811|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=w,m[g+5|0]=w>>>8,m[g+6|0]=w>>>16,m[g+7|0]=w>>>24,g=E+ie(h[n+2284>>2],7)|0,E=P[l+828|0]|P[l+829|0]<<8|(P[l+830|0]<<16|P[l+831|0]<<24),w=P[l+824|0]|P[l+825|0]<<8|(P[l+826|0]<<16|P[l+827|0]<<24),m[g|0]=w,m[g+1|0]=w>>>8,m[g+2|0]=w>>>16,m[g+3|0]=w>>>24,m[g+4|0]=E,m[g+5|0]=E>>>8,m[g+6|0]=E>>>16,m[g+7|0]=E>>>24,J=J+1|0,!((J|0)<h[n+288>>2]))break}}function il(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;xe=Mi-16|0,Mi=xe;e:{t:{r:{i:{o:{l:{n:{u:{a:{s:{h:{c:{if(n>>>0<=244){if(E=h[2884],D=n>>>0<11?16:n+11&-8,a=D>>>3|0,n=E>>>a|0,n&3){g=a+((n^-1)&1)|0,a=g<<3,w=h[a+11584>>2],n=w+8|0,l=h[w+8>>2],a=a+11576|0;f:{if((l|0)==(a|0)){Oe=11536,He=Mo(-2,g)&E,h[Oe>>2]=He;break f}h[l+12>>2]=a,h[a+8>>2]=l}a=g<<3,h[w+4>>2]=a|3,a=a+w|0,h[a+4>>2]=h[a+4>>2]|1;break e}if(se=h[2886],D>>>0<=se>>>0)break c;if(n){l=n<<a,n=2<<a,n=l&(0-n|n),a=(0-n&n)+-1|0,n=a>>>12&16,l=n,a=a>>>n|0,n=a>>>5&8,l=l|n,a=a>>>n|0,n=a>>>2&4,l=l|n,a=a>>>n|0,n=a>>>1&2,l=l|n,a=a>>>n|0,n=a>>>1&1,l=(l|n)+(a>>>n|0)|0,n=l<<3,x=h[n+11584>>2],a=h[x+8>>2],n=n+11576|0;f:{if((a|0)==(n|0)){E=Mo(-2,l)&E,h[2884]=E;break f}h[a+12>>2]=n,h[n+8>>2]=a}if(n=x+8|0,h[x+4>>2]=D|3,g=x+D|0,a=l<<3,w=a-D|0,h[g+4>>2]=w|1,h[a+x>>2]=w,se){a=se>>>3|0,l=(a<<3)+11576|0,D=h[2889],a=1<<a;f:{if(!(a&E)){h[2884]=a|E,a=l;break f}a=h[l+8>>2]}h[l+8>>2]=D,h[a+12>>2]=D,h[D+12>>2]=l,h[D+8>>2]=a}h[2889]=g,h[2886]=w;break e}if(H=h[2885],!H)break c;for(a=(H&0-H)+-1|0,n=a>>>12&16,l=n,a=a>>>n|0,n=a>>>5&8,l=l|n,a=a>>>n|0,n=a>>>2&4,l=l|n,a=a>>>n|0,n=a>>>1&2,l=l|n,a=a>>>n|0,n=a>>>1&1,a=h[((l|n)+(a>>>n|0)<<2)+11840>>2],w=(h[a+4>>2]&-8)-D|0,l=a;;){f:{if(n=h[l+16>>2],!n&&(n=h[l+20>>2],!n))break f;l=(h[n+4>>2]&-8)-D|0,g=l>>>0<w>>>0,w=g?l:w,a=g?n:a,l=n;continue}break}if(V=a+D|0,V>>>0<=a>>>0)break h;if(J=h[a+24>>2],g=h[a+12>>2],(g|0)!=(a|0)){n=h[a+8>>2],h[n+12>>2]=g,h[g+8>>2]=n;break t}if(l=a+20|0,n=h[l>>2],!n){if(n=h[a+16>>2],!n)break s;l=a+16|0}for(;x=l,g=n,l=n+20|0,n=h[l>>2],!(!n&&(l=g+16|0,n=h[g+16>>2],!n)););h[x>>2]=0;break t}if(D=-1,n>>>0>4294967231||(n=n+11|0,D=n&-8,H=h[2885],!H))break c;n=n>>>8|0,x=0;f:{if(!n||(x=31,D>>>0>16777215))break f;a=n+1048320>>>16&8,n=n<<a,w=n+520192>>>16&4,n=n<<w,l=n+245760>>>16&2,n=(n<<l>>>15|0)-(l|(a|w))|0,x=(n<<1|D>>>n+21&1)+28|0}w=0-D|0,l=h[(x<<2)+11840>>2];f:{d:{p:{if(!l){n=0;break p}for(n=0,a=D<<((x|0)==31?0:25-(x>>>1|0)|0);;){m:{if(E=(h[l+4>>2]&-8)-D|0,E>>>0>=w>>>0||(g=l,w=E,w))break m;w=0,n=l;break d}if(E=h[l+20>>2],l=h[((a>>>29&4)+l|0)+16>>2],n=E?(E|0)==(l|0)?n:E:n,a=a<<1,!l)break}}if(!(n|g)){if(n=2<<x,n=(0-n|n)&H,!n)break c;a=(n&0-n)+-1|0,n=a>>>12&16,l=n,a=a>>>n|0,n=a>>>5&8,l=l|n,a=a>>>n|0,n=a>>>2&4,l=l|n,a=a>>>n|0,n=a>>>1&2,l=l|n,a=a>>>n|0,n=a>>>1&1,n=h[((l|n)+(a>>>n|0)<<2)+11840>>2]}if(!n)break f}for(;a=(h[n+4>>2]&-8)-D|0,l=a>>>0<w>>>0,w=l?a:w,g=l?n:g,a=h[n+16>>2],a?n=a:n=h[n+20>>2],!!n;);}if(!g|w>>>0>=h[2886]-D>>>0)break c;if(x=g+D|0,x>>>0<=g>>>0)break h;if(V=h[g+24>>2],a=h[g+12>>2],(g|0)!=(a|0)){n=h[g+8>>2],h[n+12>>2]=a,h[a+8>>2]=n;break r}if(l=g+20|0,n=h[l>>2],!n){if(n=h[g+16>>2],!n)break a;l=g+16|0}for(;E=l,a=n,l=n+20|0,n=h[l>>2],!(!n&&(l=a+16|0,n=h[a+16>>2],!n)););h[E>>2]=0;break r}if(l=h[2886],l>>>0>=D>>>0){g=h[2889],a=l-D|0;c:{if(a>>>0>=16){h[2886]=a,n=g+D|0,h[2889]=n,h[n+4>>2]=a|1,h[l+g>>2]=a,h[g+4>>2]=D|3;break c}h[2889]=0,h[2886]=0,h[g+4>>2]=l|3,n=l+g|0,h[n+4>>2]=h[n+4>>2]|1}n=g+8|0;break e}if(H=h[2887],H>>>0>D>>>0){a=H-D|0,h[2887]=a,l=h[2890],n=l+D|0,h[2890]=n,h[n+4>>2]=a|1,h[l+4>>2]=D|3,n=l+8|0;break e}if(n=0,V=D+47|0,a=V,h[3002]?l=h[3004]:(h[3005]=-1,h[3006]=-1,h[3003]=4096,h[3004]=4096,h[3002]=xe+12&-16^1431655768,h[3007]=0,h[2995]=0,l=4096),x=a+l|0,E=0-l|0,l=x&E,l>>>0<=D>>>0||(w=h[2994],w&&(g=h[2992],a=g+l|0,a>>>0<=g>>>0|a>>>0>w>>>0)))break e;if(P[11980]&4)break l;c:{f:{if(g=h[2890],g)for(n=11984;;){if(a=h[n>>2],a+h[n+4>>2]>>>0>g>>>0&&a>>>0<=g>>>0)break f;if(n=h[n+8>>2],!n)break}if(a=Ms(0),(a|0)==-1||(E=l,g=h[3003],n=g+-1|0,n&a&&(E=(l-a|0)+(n+a&0-g)|0),E>>>0<=D>>>0|E>>>0>2147483646)||(w=h[2994],w&&(g=h[2992],n=g+E|0,n>>>0<=g>>>0|n>>>0>w>>>0)))break n;if(n=Ms(E),(a|0)!=(n|0))break c;break o}if(E=E&x-H,E>>>0>2147483646)break n;if(a=Ms(E),(a|0)==(h[n>>2]+h[n+4>>2]|0))break u;n=a}if(!((n|0)==-1|D+48>>>0<=E>>>0)){if(a=h[3004],a=a+(V-E|0)&0-a,a>>>0>2147483646){a=n;break o}if((Ms(a)|0)!=-1){E=a+E|0,a=n;break o}Ms(0-E|0);break n}if(a=n,(n|0)!=-1)break o;break n}Bs()}g=0;break t}a=0;break r}if((a|0)!=-1)break o}h[2995]=h[2995]|4}if(l>>>0>2147483646||(a=Ms(l),n=Ms(0),a>>>0>=n>>>0|(a|0)==-1|(n|0)==-1)||(E=n-a|0,E>>>0<=D+40>>>0))break i}n=h[2992]+E|0,h[2992]=n,n>>>0>Oi[2993]&&(h[2993]=n);o:{l:{n:{if(w=h[2890],w){for(n=11984;;){if(g=h[n>>2],l=h[n+4>>2],(g+l|0)==(a|0))break n;if(n=h[n+8>>2],!n)break}break l}for(n=h[2888],a>>>0>=n>>>0&&n||(h[2888]=a),n=0,h[2997]=E,h[2996]=a,h[2892]=-1,h[2893]=h[3002],h[2999]=0;g=n<<3,l=g+11576|0,h[g+11584>>2]=l,h[g+11588>>2]=l,n=n+1|0,(n|0)!=32;);g=E+-40|0,n=a+8&7?-8-a&7:0,l=g-n|0,h[2887]=l,n=n+a|0,h[2890]=n,h[n+4>>2]=l|1,h[(a+g|0)+4>>2]=40,h[2891]=h[3006];break o}if(P[n+12|0]&8|a>>>0<=w>>>0|g>>>0>w>>>0)break l;h[n+4>>2]=l+E,n=w+8&7?-8-w&7:0,l=n+w|0,h[2890]=l,a=h[2887]+E|0,n=a-n|0,h[2887]=n,h[l+4>>2]=n|1,h[(a+w|0)+4>>2]=40,h[2891]=h[3006];break o}g=h[2888],a>>>0<g>>>0&&(h[2888]=a,g=0),l=a+E|0,n=11984;l:{n:{u:{a:{s:{h:{for(;;){if((l|0)!=h[n>>2]){if(n=h[n+8>>2],n)continue;break h}break}if(!(P[n+12|0]&8))break s}for(n=11984;;){if(l=h[n>>2],l>>>0<=w>>>0&&(x=l+h[n+4>>2]|0,x>>>0>w>>>0))break a;n=h[n+8>>2]}}if(h[n>>2]=a,h[n+4>>2]=h[n+4>>2]+E,H=(a+8&7?-8-a&7:0)+a|0,h[H+4>>2]=D|3,a=l+(l+8&7?-8-l&7:0)|0,n=(a-H|0)-D|0,x=D+H|0,(a|0)==(w|0)){h[2890]=x,n=h[2887]+n|0,h[2887]=n,h[x+4>>2]=n|1;break n}if(h[2889]==(a|0)){h[2889]=x,n=h[2886]+n|0,h[2886]=n,h[x+4>>2]=n|1,h[n+x>>2]=n;break n}if(l=h[a+4>>2],(l&3)==1){V=l&-8;s:{if(l>>>0<=255){if(w=h[a+8>>2],l=l>>>3|0,g=h[a+12>>2],(g|0)==(w|0)){Oe=11536,He=h[2884]&Mo(-2,l),h[Oe>>2]=He;break s}h[w+12>>2]=g,h[g+8>>2]=w;break s}J=h[a+24>>2],E=h[a+12>>2];h:{if((E|0)!=(a|0)){l=h[a+8>>2],h[l+12>>2]=E,h[E+8>>2]=l;break h}c:{if(w=a+20|0,D=h[w>>2],D||(w=a+16|0,D=h[w>>2],D))break c;E=0;break h}for(;l=w,E=D,w=E+20|0,D=h[w>>2],!(!D&&(w=E+16|0,D=h[E+16>>2],!D)););h[l>>2]=0}if(!J)break s;g=h[a+28>>2],l=(g<<2)+11840|0;h:{if(h[l>>2]==(a|0)){if(h[l>>2]=E,E)break h;Oe=11540,He=h[2885]&Mo(-2,g),h[Oe>>2]=He;break s}if(h[J+(h[J+16>>2]==(a|0)?16:20)>>2]=E,!E)break s}if(h[E+24>>2]=J,l=h[a+16>>2],l&&(h[E+16>>2]=l,h[l+24>>2]=E),l=h[a+20>>2],!l)break s;h[E+20>>2]=l,h[l+24>>2]=E}a=a+V|0,n=n+V|0}if(h[a+4>>2]=h[a+4>>2]&-2,h[x+4>>2]=n|1,h[n+x>>2]=n,n>>>0<=255){n=n>>>3|0,a=(n<<3)+11576|0,l=h[2884],n=1<<n;s:{if(!(l&n)){h[2884]=n|l,n=a;break s}n=h[a+8>>2]}h[a+8>>2]=x,h[n+12>>2]=x,h[x+12>>2]=a,h[x+8>>2]=n;break n}a=x,g=n>>>8|0,l=0;s:{if(!g||(l=31,n>>>0>16777215))break s;l=g,g=g+1048320>>>16&8,l=l<<g,E=l+520192>>>16&4,l=l<<E,w=l+245760>>>16&2,l=(l<<w>>>15|0)-(w|(g|E))|0,l=(l<<1|n>>>l+21&1)+28|0}h[a+28>>2]=l,h[x+16>>2]=0,h[x+20>>2]=0,E=(l<<2)+11840|0,g=h[2885],a=1<<l;s:{if(!(g&a)){h[2885]=a|g,h[E>>2]=x,h[x+24>>2]=E;break s}for(w=n<<((l|0)==31?0:25-(l>>>1|0)|0),a=h[E>>2];;){if(l=a,(h[a+4>>2]&-8)==(n|0))break u;if(a=w>>>29|0,w=w<<1,g=(l+(a&4)|0)+16|0,a=h[g>>2],!a)break}h[g>>2]=x,h[x+24>>2]=l}h[x+12>>2]=x,h[x+8>>2]=x;break n}for(g=E+-40|0,n=a+8&7?-8-a&7:0,l=g-n|0,h[2887]=l,n=n+a|0,h[2890]=n,h[n+4>>2]=l|1,h[(a+g|0)+4>>2]=40,h[2891]=h[3006],n=(x+(x+-39&7?39-x&7:0)|0)+-47|0,l=n>>>0<w+16>>>0?w:n,h[l+4>>2]=27,n=h[2999],h[l+16>>2]=h[2998],h[l+20>>2]=n,n=h[2997],h[l+8>>2]=h[2996],h[l+12>>2]=n,h[2998]=l+8,h[2997]=E,h[2996]=a,h[2999]=0,n=l+24|0;h[n+4>>2]=7,a=n+8|0,n=n+4|0,x>>>0>a>>>0;);if((l|0)==(w|0))break o;if(h[l+4>>2]=h[l+4>>2]&-2,x=l-w|0,h[w+4>>2]=x|1,h[l>>2]=x,x>>>0<=255){n=x>>>3|0,a=(n<<3)+11576|0,l=h[2884],n=1<<n;a:{if(!(l&n)){h[2884]=n|l,n=a;break a}n=h[a+8>>2]}h[a+8>>2]=w,h[n+12>>2]=w,h[w+12>>2]=a,h[w+8>>2]=n;break o}h[w+16>>2]=0,h[w+20>>2]=0,n=w,l=x>>>8|0,a=0;a:{if(!l||(a=31,x>>>0>16777215))break a;a=l,l=l+1048320>>>16&8,a=a<<l,E=a+520192>>>16&4,a=a<<E,g=a+245760>>>16&2,a=(a<<g>>>15|0)-(g|(l|E))|0,a=(a<<1|x>>>a+21&1)+28|0}h[n+28>>2]=a,g=(a<<2)+11840|0,l=h[2885],n=1<<a;a:{if(!(l&n)){h[2885]=n|l,h[g>>2]=w,h[w+24>>2]=g;break a}for(n=x<<((a|0)==31?0:25-(a>>>1|0)|0),a=h[g>>2];;){if(l=a,(x|0)==(h[a+4>>2]&-8))break l;if(a=n>>>29|0,n=n<<1,g=(l+(a&4)|0)+16|0,a=h[g>>2],!a)break}h[g>>2]=w,h[w+24>>2]=l}h[w+12>>2]=w,h[w+8>>2]=w;break o}n=h[l+8>>2],h[n+12>>2]=x,h[l+8>>2]=x,h[x+24>>2]=0,h[x+12>>2]=l,h[x+8>>2]=n}n=H+8|0;break e}n=h[l+8>>2],h[n+12>>2]=w,h[l+8>>2]=w,h[w+24>>2]=0,h[w+12>>2]=l,h[w+8>>2]=n}if(n=h[2887],n>>>0<=D>>>0)break i;a=n-D|0,h[2887]=a,l=h[2890],n=l+D|0,h[2890]=n,h[n+4>>2]=a|1,h[l+4>>2]=D|3,n=l+8|0;break e}h[2865]=48,n=0;break e}r:{if(!V)break r;l=h[g+28>>2],n=(l<<2)+11840|0;i:{if(h[n>>2]==(g|0)){if(h[n>>2]=a,a)break i;H=Mo(-2,l)&H,h[2885]=H;break r}if(h[V+(h[V+16>>2]==(g|0)?16:20)>>2]=a,!a)break r}if(h[a+24>>2]=V,n=h[g+16>>2],n&&(h[a+16>>2]=n,h[n+24>>2]=a),n=h[g+20>>2],!n)break r;h[a+20>>2]=n,h[n+24>>2]=a}r:{if(w>>>0<=15){n=w+D|0,h[g+4>>2]=n|3,n=n+g|0,h[n+4>>2]=h[n+4>>2]|1;break r}if(h[g+4>>2]=D|3,h[x+4>>2]=w|1,h[w+x>>2]=w,w>>>0<=255){n=w>>>3|0,a=(n<<3)+11576|0,l=h[2884],n=1<<n;i:{if(!(l&n)){h[2884]=n|l,n=a;break i}n=h[a+8>>2]}h[a+8>>2]=x,h[n+12>>2]=x,h[x+12>>2]=a,h[x+8>>2]=n;break r}n=x,l=w>>>8|0,a=0;i:{if(!l||(a=31,w>>>0>16777215))break i;a=l,l=l+1048320>>>16&8,a=a<<l,D=a+520192>>>16&4,a=a<<D,E=a+245760>>>16&2,a=(a<<E>>>15|0)-(E|(l|D))|0,a=(a<<1|w>>>a+21&1)+28|0}h[n+28>>2]=a,h[x+16>>2]=0,h[x+20>>2]=0,l=(a<<2)+11840|0;i:{n=1<<a;o:{if(!(n&H)){h[2885]=n|H,h[l>>2]=x,h[x+24>>2]=l;break o}for(n=w<<((a|0)==31?0:25-(a>>>1|0)|0),D=h[l>>2];;){if(a=D,(h[a+4>>2]&-8)==(w|0))break i;if(l=n>>>29|0,n=n<<1,l=(a+(l&4)|0)+16|0,D=h[l>>2],!D)break}h[l>>2]=x,h[x+24>>2]=a}h[x+12>>2]=x,h[x+8>>2]=x;break r}n=h[a+8>>2],h[n+12>>2]=x,h[a+8>>2]=x,h[x+24>>2]=0,h[x+12>>2]=a,h[x+8>>2]=n}n=g+8|0;break e}t:{if(!J)break t;l=h[a+28>>2],n=(l<<2)+11840|0;r:{if(h[n>>2]==(a|0)){if(h[n>>2]=g,g)break r;Oe=11540,He=Mo(-2,l)&H,h[Oe>>2]=He;break t}if(h[(h[J+16>>2]==(a|0)?16:20)+J>>2]=g,!g)break t}if(h[g+24>>2]=J,n=h[a+16>>2],n&&(h[g+16>>2]=n,h[n+24>>2]=g),n=h[a+20>>2],!n)break t;h[g+20>>2]=n,h[n+24>>2]=g}t:{if(w>>>0<=15){n=w+D|0,h[a+4>>2]=n|3,n=n+a|0,h[n+4>>2]=h[n+4>>2]|1;break t}if(h[a+4>>2]=D|3,h[V+4>>2]=w|1,h[w+V>>2]=w,se){n=se>>>3|0,l=(n<<3)+11576|0,g=h[2889],n=1<<n;r:{if(!(n&E)){h[2884]=n|E,n=l;break r}n=h[l+8>>2]}h[l+8>>2]=g,h[n+12>>2]=g,h[g+12>>2]=l,h[g+8>>2]=n}h[2889]=V,h[2886]=w}n=a+8|0}return Mi=xe+16|0,n|0}function Il(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0;if(h[a+288>>2]>=1)for(Gr=a+2248|0;;){if(V=h[a+2244>>2],se=h[a+2304>>2],x=0,h[a+108>>2]){D=h[n+4>>2],w=P[a+904|0],g=h[n+8>>2];e:{if((g|0)>-1)break e;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,g=g+24|0,h[n+8>>2]=g,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break e}mn(n),g=h[n+8>>2]}E=n,J=g,x=h[n>>2],H=x>>>g|0,w=ie(w,D)>>>8|0;e:{if(H>>>0>w>>>0){x=((w^-1)<<g)+x|0,h[n>>2]=x,D=D-w|0;break e}D=w+1|0}l=wn(D)^24,g=J-l|0,h[E+8>>2]=g,E=(D<<l)+-1|0,h[n+4>>2]=E;e:{if(H>>>0<=w>>>0){D=P[a+905|0];t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){w=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=x;break t}mn(n),x=h[n>>2],g=h[n+8>>2]}w=x>>>g|0,l=ie(E,D)>>>8|0;t:{if(w>>>0>l>>>0){h[n>>2]=((l^-1)<<g)+x,E=E-l|0;break t}E=l+1|0}x=w>>>0>l>>>0,l=wn(E)^24,g=g-l|0,l=E<<l;break e}D=P[a+906|0];t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){w=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=x;break t}mn(n),x=h[n>>2],g=h[n+8>>2]}l=g,H=l,w=ie(E,D)>>>8|0;t:{if(x>>>l>>>0>w>>>0){h[n>>2]=((w^-1)<<g)+x,x=3,E=E-w|0;break t}x=2,E=w+1|0}l=wn(E)^24,g=H-l|0,l=E<<l}h[n+8>>2]=g,h[n+4>>2]=l+-1}se=se+ie(xe,800)|0,m[se+798|0]=x;e:{if(!h[a+2236>>2]){g=h[n+8>>2],D=h[n+4>>2];break e}w=h[n+4>>2],x=P[a+2240|0],g=h[n+8>>2];t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,g=g+24|0,h[n+8>>2]=g,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}mn(n),g=h[n+8>>2]}E=n,J=g,D=h[n>>2],H=D>>>g|0,x=ie(w,x)>>>8|0;t:{if(H>>>0>x>>>0){h[n>>2]=D+((x^-1)<<g),w=w-x|0;break t}w=x+1|0}l=wn(w)^24,g=J-l|0,h[E+8>>2]=g,D=(w<<l)+-1|0,h[n+4>>2]=D,m[se+797|0]=H>>>0>x>>>0}e:{if((g|0)>-1)break e;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,g=g+24|0,h[n+8>>2]=g,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break e}mn(n),g=h[n+8>>2]}V=V+(xe<<2)|0,E=n,J=g,x=h[n>>2],w=ie(D,145)>>>8|0,H=x>>>g>>>0<=w>>>0;e:{if(!H){x=((w^-1)<<g)+x|0,h[n>>2]=x,w=D-w|0;break e}w=w+1|0}l=wn(w)^24,g=J-l|0,h[E+8>>2]=g,D=(w<<l)+-1|0,h[n+4>>2]=D,m[se+768|0]=H;e:{if(!H){t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=x;break t}mn(n),x=h[n>>2],g=h[n+8>>2]}E=n,J=g,w=ie(D,156)>>>8|0,H=x>>>g>>>0<=w>>>0;t:{if(!H){x=((w^-1)<<g)+x|0,h[n>>2]=x,w=D-w|0;break t}w=w+1|0}l=wn(w)^24,g=J-l|0,h[E+8>>2]=g,E=(w<<l)+-1|0,h[n+4>>2]=E;t:{if(!H){r:{if((g|0)>-1)break r;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){w=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=x;break r}mn(n),x=h[n>>2],g=h[n+8>>2]}l=g,D=l,w=E>>>1&16777215;r:{if(x>>>l>>>0>w>>>0){h[n>>2]=((w^-1)<<g)+x,x=1,E=E-w|0;break r}x=3,E=w+1|0}l=wn(E)^24,g=D-l|0,l=E<<l;break t}r:{if((g|0)>-1)break r;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){w=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=x;break r}mn(n),x=h[n>>2],g=h[n+8>>2]}l=g,D=l,w=ie(E,163)>>>8|0;r:{if(x>>>l>>>0>w>>>0){h[n>>2]=((w^-1)<<g)+x,x=2,E=E-w|0;break r}x=0,E=w+1|0}l=wn(E)^24,g=D-l|0,l=E<<l}h[n+8>>2]=g,h[n+4>>2]=l+-1,m[se+769|0]=x,l=ie(x,16843009),m[V|0]=l,m[V+1|0]=l>>>8,m[V+2|0]=l>>>16,m[V+3|0]=l>>>24,g=Gr,m[g|0]=l,m[g+1|0]=l>>>8,m[g+2|0]=l>>>16,m[g+3|0]=l>>>24;break e}for(E=se+769|0,Oe=0;;){for(Wt=(a+Oe|0)+2248|0,g=P[Wt|0],He=0;;){rr=ie(g,9),ur=V+He|0,Lr=ie(P[ur|0],90),w=P[rr+(Lr+3504|0)|0],H=h[n+4>>2],g=h[n+8>>2];t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){x=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,g=g+24|0,h[n+8>>2]=g,h[n>>2]=h[n>>2]<<24|(x>>>8&65280|(x<<8&16711680|x<<24))>>>8;break t}mn(n),g=h[n+8>>2]}J=n,Pt=g,D=h[n>>2],st=D>>>g|0,w=ie(w,H)>>>8|0;t:{if(st>>>0>w>>>0){D=((w^-1)<<g)+D|0,h[n>>2]=D,H=H-w|0;break t}H=w+1|0}if(l=wn(H)^24,g=Pt-l|0,h[J+8>>2]=g,l=(H<<l)+-1|0,h[n+4>>2]=l,w=st>>>0>w>>>0,x=m[w+4416|0],41706>>>w&1)for(;;){st=P[((Lr+3504|0)+rr|0)+x|0];t:{if((g|0)>-1)break t;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){H=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=w+3,D=D<<24|(H>>>8&65280|(H<<8&16711680|H<<24))>>>8,h[n>>2]=D;break t}mn(n),D=h[n>>2],g=h[n+8>>2]}w=x<<1,J=n,Pt=g,Rr=D>>>g|0,H=ie(l,st)>>>8|0;t:{if(Rr>>>0>H>>>0){D=((H^-1)<<g)+D|0,h[n>>2]=D,l=l-H|0;break t}l=H+1|0}if(x=wn(l)^24,g=Pt-x|0,h[J+8>>2]=g,l=(l<<x)+-1|0,h[n+4>>2]=l,w=w|Rr>>>0>H>>>0,x=m[w+4416|0],!(41706>>>w&1))break}if(g=0-x|0,m[ur|0]=g,He=He+1|0,(He|0)==4)break}if(l=E,E=P[V|0]|P[V+1|0]<<8|(P[V+2|0]<<16|P[V+3|0]<<24),m[l|0]=E,m[l+1|0]=E>>>8,m[l+2|0]=E>>>16,m[l+3|0]=E>>>24,m[Wt|0]=g,E=l+4|0,Oe=Oe+1|0,(Oe|0)==4)break}}D=h[n+4>>2],g=h[n+8>>2];e:{if((g|0)>-1)break e;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,g=g+24|0,h[n+8>>2]=g,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break e}mn(n),g=h[n+8>>2]}E=n,H=g,x=h[n>>2],w=ie(D,142)>>>8|0,V=x>>>g>>>0<=w>>>0;e:{if(!V){x=((w^-1)<<g)+x|0,h[n>>2]=x,w=D-w|0;break e}w=w+1|0}l=wn(w)^24,g=H-l|0,h[E+8>>2]=g,D=(w<<l)+-1|0,h[n+4>>2]=D,l=0;e:{if(V)break e;t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=x;break t}mn(n),x=h[n>>2],g=h[n+8>>2]}E=n,H=g,w=ie(D,114)>>>8|0,V=x>>>g>>>0<=w>>>0;t:{if(!V){x=((w^-1)<<g)+x|0,h[n>>2]=x,w=D-w|0;break t}w=w+1|0}if(l=wn(w)^24,g=H-l|0,h[E+8>>2]=g,w=(w<<l)+-1|0,h[n+4>>2]=w,l=2,V)break e;t:{if((g|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),g=g+24|0,h[n+8>>2]=g,h[n+12>>2]=l+3,x=x<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=x;break t}mn(n),x=h[n>>2],g=h[n+8>>2]}l=ie(w,183)>>>8|0;t:{if(x>>>g>>>0>l>>>0){h[n>>2]=((l^-1)<<g)+x,x=w-l|0,l=1;break t}x=l+1|0,l=3}w=g,g=wn(x)^24,h[n+8>>2]=w-g,h[n+4>>2]=(x<<g)+-1}if(m[se+785|0]=l,xe=xe+1|0,!((xe|0)<h[a+288>>2]))break}return!h[a+36>>2]}function Hn(n,a,l,g,w,x){var E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0,gs=0,dl=0,su=0,Rc=0,Bf=0;Ki=n+124|0,E=h[n+112>>2],He=(E|0)/(l|0)|0,Oe=n+24|0,Un=(ie(l,g)<<2)+a|0,g=(E<<2)+a|0;e:{t:{st=ie(l,w);r:{if((E|0)>=(st|0))break r;for(xe=st<<2,Wt=E-ie(l,He)|0,gs=h[n+148>>2],st=0,gi=h[n+120>>2],ti=(gi|0)>0?Ki:0,dl=h[n+56>>2]?He:16777216,su=gi+280|0,Rc=a+xe|0,se=h[n+168>>2],E=h[n+152>>2],E&&(st=h[h[n+160>>2]+(ie(h[n+156>>2],He>>E)+(Wt>>E)<<2)>>2]),rr=se+ie(st,548)|0,Bf=n+136|0,Rr=n- -64|0,st=g;;){(He|0)>=(dl|0)&&(E=h[Oe+4>>2],h[Rr>>2]=h[Oe>>2],h[Rr+4>>2]=E,E=h[Oe+28>>2],h[Rr+24>>2]=h[Oe+24>>2],h[Rr+28>>2]=E,E=h[Oe+20>>2],h[Rr+16>>2]=h[Oe+16>>2],h[Rr+20>>2]=E,E=h[Oe+12>>2],h[Rr+8>>2]=h[Oe+8>>2],h[Rr+12>>2]=E,h[n+96>>2]=g-a>>2,h[n+120>>2]>=1&&pf(Ki,Bf),dl=He+8|0);i:{o:{l:{if(!(Wt&gs)){E=h[n+168>>2],H=h[n+152>>2],se=0;n:{if(!H)break n;se=h[h[n+160>>2]+(ie(h[n+156>>2],He>>H)+(Wt>>H)<<2)>>2]}rr=E+ie(se,548)|0}if(h[rr+28>>2]){V=h[rr+24>>2];break l}h[n+44>>2]>=32&&as(Oe);n:{if(h[rr+32>>2]){E=h[n+28>>2],V=h[n+44>>2],D=V&63,H=D&31,Pt=h[n+24>>2],xe=(((32<=(D&63)>>>0?E>>>H|0:((1<<H)-1&E)<<32-H|Pt>>>H)&63)<<3)+rr|0,H=h[xe+36>>2],se=V+H|0,V=h[xe+40>>2];u:{if((H|0)<=255){h[n+44>>2]=se,h[g>>2]=V,V=0;break u}h[n+44>>2]=se+-256}if(h[n+48>>2]|(h[n+44>>2]>64?h[n+40>>2]==h[n+36>>2]:0))break r;if(V)break n;break o}if(xe=n,E=h[n+28>>2],V=h[n+44>>2],J=V&63,H=J&31,Pt=h[n+24>>2],D=h[rr>>2]+(((32<=(J&63)>>>0?E>>>H|0:((1<<H)-1&E)<<32-H|Pt>>>H)&255)<<2)|0,H=P[D|0],H>>>0>=9&&(V=V+8|0,h[n+44>>2]=V,se=(ci[D+2>>1]<<2)+D|0,ur=V&63,D=ur&31,D=se+(((-1<<H+-8^-1)&(32<=(ur&63)>>>0?E>>>D|0:((1<<D)-1&E)<<32-D|Pt>>>D))<<2)|0,H=P[D|0]),h[xe+44>>2]=(H&255)+V,h[n+48>>2])break r;V=ci[D+2>>1]}if(h[n+44>>2]>64&&h[n+40>>2]==h[n+36>>2])break r;if((V|0)<=255){if(h[rr+20>>2]){V=h[rr+24>>2]|V<<8;break l}if(xe=n,D=h[n+44>>2],ur=D&63,se=ur&31,J=h[rr+4>>2]+(((32<=(ur&63)>>>0?E>>>se|0:((1<<se)-1&E)<<32-se|Pt>>>se)&255)<<2)|0,H=P[J|0],H>>>0>=9&&(D=D+8|0,h[n+44>>2]=D,se=(ci[J+2>>1]<<2)+J|0,Gr=D&63,J=Gr&31,J=se+(((-1<<H+-8^-1)&(32<=(Gr&63)>>>0?E>>>J|0:((1<<J)-1&E)<<32-J|Pt>>>J))<<2)|0,H=P[J|0]),D=(H&255)+D|0,h[xe+44>>2]=D,ur=ci[J+2>>1],(D|0)>=32&&(as(Oe),Pt=h[n+24>>2],D=h[n+44>>2],E=h[n+28>>2]),Gr=D&63,se=Gr&31,J=h[rr+8>>2]+(((32<=(Gr&63)>>>0?E>>>se|0:((1<<se)-1&E)<<32-se|Pt>>>se)&255)<<2)|0,H=P[J|0],H>>>0>=9&&(D=D+8|0,h[n+44>>2]=D,se=(ci[J+2>>1]<<2)+J|0,Lr=D&63,J=Lr&31,J=se+(((-1<<H+-8^-1)&(32<=Lr>>>0?E>>>J|0:((1<<J)-1&E)<<32-J|Pt>>>J))<<2)|0,H=P[J|0]),D=(H&255)+D|0,h[xe+44>>2]=D,Gr=ci[J+2>>1],se=n,Lr=D&63,xe=Lr&31,J=h[rr+12>>2]+(((32<=Lr>>>0?E>>>xe|0:((1<<xe)-1&E)<<32-xe|Pt>>>xe)&255)<<2)|0,H=P[J|0],H>>>0>=9&&(D=D+8|0,h[n+44>>2]=D,Lr=(ci[J+2>>1]<<2)+J|0,J=D&63,xe=J&31,J=Lr+(((-1<<H+-8^-1)&(32<=(J&63)>>>0?E>>>xe|0:((1<<xe)-1&E)<<32-xe|Pt>>>xe))<<2)|0,H=P[J|0]),E=(H&255)+D|0,h[se+44>>2]=E,h[n+48>>2]||(H=ci[J+2>>1],h[n+40>>2]==h[n+36>>2]&&(E|0)>=65))break r;V=Gr|(ur<<16|V<<8)|H<<24;break l}n:{u:{if((V|0)<=279){se=V+-256|0,(V|0)>=260&&(E=V+-258>>1,se=$n(Oe,E)+((se&1|2)<<E)|0,Pt=h[Oe>>2],E=h[Oe+4>>2]),xe=n,V=h[n+44>>2],ur=V&63,D=ur&31,D=h[rr+16>>2]+(((32<=(ur&63)>>>0?E>>>D|0:((1<<D)-1&E)<<32-D|Pt>>>D)&255)<<2)|0,H=P[D|0],H>>>0>=9&&(V=V+8|0,h[n+44>>2]=V,Lr=(ci[D+2>>1]<<2)+D|0,J=V&63,D=J&31,D=Lr+(((-1<<H+-8^-1)&(32<=(J&63)>>>0?E>>>D|0:((1<<D)-1&E)<<32-D|Pt>>>D))<<2)|0,H=P[D|0]),E=(H&255)+V|0,h[xe+44>>2]=E,V=ci[D+2>>1],(E|0)>=32&&as(Oe),V>>>0>=4&&(E=V+-2>>1,V=$n(Oe,E)+((V&1|2)<<E)|0);a:{if((V+1|0)>=121){E=V+-119|0;break a}E=P[V+1264|0],E=(ie(E>>>4|0,l)-(E&15)|0)+8|0,E=(E|0)>1?E:1}if(h[n+48>>2]|(h[n+44>>2]>64?h[n+40>>2]==h[n+36>>2]:0))break r;if(g-a>>2<(E|0)||(xe=se+1|0,Un-g>>2<(xe|0)))break t;if(D=g-(E<<2)|0,!(g&3|(xe|0)<4|(E|0)>2)){a:{if((E|0)==1){V=h[D>>2],H=V,E=H,Pt=E;break a}E=h[D+4>>2],Pt=h[D>>2],V=Pt}a:{if(!(g&4)){se=xe,H=g;break a}h[g>>2]=V,Pt=p1(Pt,E),E=bi,D=D+4|0,H=g+4|0}for(V=se>>>1|0,J=V>>>0>1?V:1,V=0;ur=H+(V<<3)|0,h[ur>>2]=Pt,h[ur+4>>2]=E,V=V+1|0,(J|0)!=(V|0););if(!(se&1))break n;E=J<<3,h[E+H>>2]=h[E+D>>2];break n}if((E|0)>=(xe|0))break u;if(V=0,(xe|0)<=0)break n;for(;E=V<<2,h[E+g>>2]=h[E+D>>2],E=(V|0)!=(se|0),V=V+1|0,!!E;);break n}if((V|0)>=(su|0))break t;if(H=V+-280|0,E=h[ti>>2],st>>>0<g>>>0)for(;se=h[st>>2],h[E+(ie(se,506832829)>>>h[ti+4>>2]<<2)>>2]=se,st=st+4|0,st>>>0<g>>>0;);V=h[E+(H<<2)>>2];break l}_n(g,D,xe<<2)}if(Wt=xe+Wt|0,(Wt|0)>=(l|0))for(;Wt=Wt-l|0,E=He,He=E+1|0,He&15|(!x|(E|0)>=(w|0))||ot[x|0](n,He),(Wt|0)>=(l|0););if(se=xe<<2,Wt&gs){E=h[n+168>>2],H=h[n+152>>2],xe=0;n:{if(!H)break n;xe=h[h[n+160>>2]+(ie(h[n+156>>2],He>>H)+(Wt>>H)<<2)>>2]}rr=E+ie(xe,548)|0}if(g=g+se|0,(gi|0)<1|st>>>0>=g>>>0)break i;for(E=h[ti>>2];H=h[st>>2],h[E+(ie(H,506832829)>>>h[ti+4>>2]<<2)>>2]=H,st=st+4|0,st>>>0<g>>>0;);break i}h[g>>2]=V}if(E=g+4|0,Wt=Wt+1|0,(Wt|0)<(l|0)){g=E;break i}if(H=He+1|0,H&15|(!x|(He|0)>=(w|0))||ot[x|0](n,H),Wt=0,!((gi|0)<1|st>>>0>=E>>>0)){for(se=h[ti>>2];He=h[st>>2],h[se+(ie(He,506832829)>>>h[ti+4>>2]<<2)>>2]=He,xe=st>>>0<g>>>0,He=st+4|0,st=He,!!xe;);st=He}g=E,He=H}if(!(g>>>0<Rc>>>0))break}}E=n,l=1;r:{if(h[n+48>>2]||(l=0,h[n+40>>2]!=h[n+36>>2]))break r;l=h[n+44>>2]>64}if(h[E+48>>2]=l,!(!h[n+56>>2]|(!l|g>>>0>=Un>>>0))){if(h[n>>2]=5,a=h[n+68>>2],h[Oe>>2]=h[n+64>>2],h[Oe+4>>2]=a,a=h[n+92>>2],h[Oe+24>>2]=h[n+88>>2],h[Oe+28>>2]=a,a=h[n+84>>2],h[Oe+16>>2]=h[n+80>>2],h[Oe+20>>2]=a,a=h[n+76>>2],h[Oe+8>>2]=h[n+72>>2],h[Oe+12>>2]=a,h[n+112>>2]=h[n+96>>2],a=1,h[n+120>>2]<1)break e;return pf(n+136|0,Ki),1}if(l)break t;return x&&ot[x|0](n,(He|0)>(w|0)?w:He),h[n>>2]=0,h[n+112>>2]=g-a>>2,1}h[n>>2]=3,a=0}return a}function Vs(n){n=n|0;var a=0,l=0;l=sn(P[n+31|0],0,16843009,16843009),a=l,m[n+32|0]=a,m[n+33|0]=a>>>8,m[n+34|0]=a>>>16,m[n+35|0]=a>>>24,a=bi,m[n+36|0]=a,m[n+37|0]=a>>>8,m[n+38|0]=a>>>16,m[n+39|0]=a>>>24,m[n+40|0]=l,m[n+41|0]=l>>>8,m[n+42|0]=l>>>16,m[n+43|0]=l>>>24,m[n+44|0]=a,m[n+45|0]=a>>>8,m[n+46|0]=a>>>16,m[n+47|0]=a>>>24,l=sn(P[n+63|0],0,16843009,16843009),a=l,m[n+64|0]=a,m[n+65|0]=a>>>8,m[n+66|0]=a>>>16,m[n+67|0]=a>>>24,a=bi,m[n+68|0]=a,m[n+69|0]=a>>>8,m[n+70|0]=a>>>16,m[n+71|0]=a>>>24,m[n+72|0]=l,m[n+73|0]=l>>>8,m[n+74|0]=l>>>16,m[n+75|0]=l>>>24,m[n+76|0]=a,m[n+77|0]=a>>>8,m[n+78|0]=a>>>16,m[n+79|0]=a>>>24,l=sn(P[n+95|0],0,16843009,16843009),a=l,m[n+96|0]=a,m[n+97|0]=a>>>8,m[n+98|0]=a>>>16,m[n+99|0]=a>>>24,a=bi,m[n+100|0]=a,m[n+101|0]=a>>>8,m[n+102|0]=a>>>16,m[n+103|0]=a>>>24,m[n+104|0]=l,m[n+105|0]=l>>>8,m[n+106|0]=l>>>16,m[n+107|0]=l>>>24,m[n+108|0]=a,m[n+109|0]=a>>>8,m[n+110|0]=a>>>16,m[n+111|0]=a>>>24,l=sn(P[n+127|0],0,16843009,16843009),a=l,m[n+128|0]=a,m[n+129|0]=a>>>8,m[n+130|0]=a>>>16,m[n+131|0]=a>>>24,a=bi,m[n+132|0]=a,m[n+133|0]=a>>>8,m[n+134|0]=a>>>16,m[n+135|0]=a>>>24,m[n+136|0]=l,m[n+137|0]=l>>>8,m[n+138|0]=l>>>16,m[n+139|0]=l>>>24,m[n+140|0]=a,m[n+141|0]=a>>>8,m[n+142|0]=a>>>16,m[n+143|0]=a>>>24,l=sn(P[n+159|0],0,16843009,16843009),a=l,m[n+168|0]=a,m[n+169|0]=a>>>8,m[n+170|0]=a>>>16,m[n+171|0]=a>>>24,a=bi,m[n+172|0]=a,m[n+173|0]=a>>>8,m[n+174|0]=a>>>16,m[n+175|0]=a>>>24,m[n+160|0]=l,m[n+161|0]=l>>>8,m[n+162|0]=l>>>16,m[n+163|0]=l>>>24,m[n+164|0]=a,m[n+165|0]=a>>>8,m[n+166|0]=a>>>16,m[n+167|0]=a>>>24,l=sn(P[n+-1|0],0,16843009,16843009),a=l,m[n|0]=a,m[n+1|0]=a>>>8,m[n+2|0]=a>>>16,m[n+3|0]=a>>>24,a=bi,m[n+4|0]=a,m[n+5|0]=a>>>8,m[n+6|0]=a>>>16,m[n+7|0]=a>>>24,m[n+8|0]=l,m[n+9|0]=l>>>8,m[n+10|0]=l>>>16,m[n+11|0]=l>>>24,m[n+12|0]=a,m[n+13|0]=a>>>8,m[n+14|0]=a>>>16,m[n+15|0]=a>>>24,l=sn(P[n+191|0],0,16843009,16843009),a=l,m[n+200|0]=a,m[n+201|0]=a>>>8,m[n+202|0]=a>>>16,m[n+203|0]=a>>>24,a=bi,m[n+204|0]=a,m[n+205|0]=a>>>8,m[n+206|0]=a>>>16,m[n+207|0]=a>>>24,m[n+192|0]=l,m[n+193|0]=l>>>8,m[n+194|0]=l>>>16,m[n+195|0]=l>>>24,m[n+196|0]=a,m[n+197|0]=a>>>8,m[n+198|0]=a>>>16,m[n+199|0]=a>>>24,l=sn(P[n+223|0],0,16843009,16843009),a=l,m[n+232|0]=a,m[n+233|0]=a>>>8,m[n+234|0]=a>>>16,m[n+235|0]=a>>>24,a=bi,m[n+236|0]=a,m[n+237|0]=a>>>8,m[n+238|0]=a>>>16,m[n+239|0]=a>>>24,m[n+224|0]=l,m[n+225|0]=l>>>8,m[n+226|0]=l>>>16,m[n+227|0]=l>>>24,m[n+228|0]=a,m[n+229|0]=a>>>8,m[n+230|0]=a>>>16,m[n+231|0]=a>>>24,l=sn(P[n+255|0],0,16843009,16843009),a=l,m[n+264|0]=a,m[n+265|0]=a>>>8,m[n+266|0]=a>>>16,m[n+267|0]=a>>>24,a=bi,m[n+268|0]=a,m[n+269|0]=a>>>8,m[n+270|0]=a>>>16,m[n+271|0]=a>>>24,m[n+256|0]=l,m[n+257|0]=l>>>8,m[n+258|0]=l>>>16,m[n+259|0]=l>>>24,m[n+260|0]=a,m[n+261|0]=a>>>8,m[n+262|0]=a>>>16,m[n+263|0]=a>>>24,l=sn(P[n+287|0],0,16843009,16843009),a=l,m[n+296|0]=a,m[n+297|0]=a>>>8,m[n+298|0]=a>>>16,m[n+299|0]=a>>>24,a=bi,m[n+300|0]=a,m[n+301|0]=a>>>8,m[n+302|0]=a>>>16,m[n+303|0]=a>>>24,m[n+288|0]=l,m[n+289|0]=l>>>8,m[n+290|0]=l>>>16,m[n+291|0]=l>>>24,m[n+292|0]=a,m[n+293|0]=a>>>8,m[n+294|0]=a>>>16,m[n+295|0]=a>>>24,l=sn(P[n+319|0],0,16843009,16843009),a=l,m[n+328|0]=a,m[n+329|0]=a>>>8,m[n+330|0]=a>>>16,m[n+331|0]=a>>>24,a=bi,m[n+332|0]=a,m[n+333|0]=a>>>8,m[n+334|0]=a>>>16,m[n+335|0]=a>>>24,m[n+320|0]=l,m[n+321|0]=l>>>8,m[n+322|0]=l>>>16,m[n+323|0]=l>>>24,m[n+324|0]=a,m[n+325|0]=a>>>8,m[n+326|0]=a>>>16,m[n+327|0]=a>>>24,l=sn(P[n+351|0],0,16843009,16843009),a=l,m[n+360|0]=a,m[n+361|0]=a>>>8,m[n+362|0]=a>>>16,m[n+363|0]=a>>>24,a=bi,m[n+364|0]=a,m[n+365|0]=a>>>8,m[n+366|0]=a>>>16,m[n+367|0]=a>>>24,m[n+352|0]=l,m[n+353|0]=l>>>8,m[n+354|0]=l>>>16,m[n+355|0]=l>>>24,m[n+356|0]=a,m[n+357|0]=a>>>8,m[n+358|0]=a>>>16,m[n+359|0]=a>>>24,l=sn(P[n+383|0],0,16843009,16843009),a=l,m[n+392|0]=a,m[n+393|0]=a>>>8,m[n+394|0]=a>>>16,m[n+395|0]=a>>>24,a=bi,m[n+396|0]=a,m[n+397|0]=a>>>8,m[n+398|0]=a>>>16,m[n+399|0]=a>>>24,m[n+384|0]=l,m[n+385|0]=l>>>8,m[n+386|0]=l>>>16,m[n+387|0]=l>>>24,m[n+388|0]=a,m[n+389|0]=a>>>8,m[n+390|0]=a>>>16,m[n+391|0]=a>>>24,l=sn(P[n+415|0],0,16843009,16843009),a=l,m[n+424|0]=a,m[n+425|0]=a>>>8,m[n+426|0]=a>>>16,m[n+427|0]=a>>>24,a=bi,m[n+428|0]=a,m[n+429|0]=a>>>8,m[n+430|0]=a>>>16,m[n+431|0]=a>>>24,m[n+416|0]=l,m[n+417|0]=l>>>8,m[n+418|0]=l>>>16,m[n+419|0]=l>>>24,m[n+420|0]=a,m[n+421|0]=a>>>8,m[n+422|0]=a>>>16,m[n+423|0]=a>>>24,l=sn(P[n+447|0],0,16843009,16843009),a=l,m[n+456|0]=a,m[n+457|0]=a>>>8,m[n+458|0]=a>>>16,m[n+459|0]=a>>>24,a=bi,m[n+460|0]=a,m[n+461|0]=a>>>8,m[n+462|0]=a>>>16,m[n+463|0]=a>>>24,m[n+448|0]=l,m[n+449|0]=l>>>8,m[n+450|0]=l>>>16,m[n+451|0]=l>>>24,m[n+452|0]=a,m[n+453|0]=a>>>8,m[n+454|0]=a>>>16,m[n+455|0]=a>>>24,l=sn(P[n+479|0],0,16843009,16843009),a=l,m[n+488|0]=a,m[n+489|0]=a>>>8,m[n+490|0]=a>>>16,m[n+491|0]=a>>>24,a=bi,m[n+492|0]=a,m[n+493|0]=a>>>8,m[n+494|0]=a>>>16,m[n+495|0]=a>>>24,m[n+480|0]=l,m[n+481|0]=l>>>8,m[n+482|0]=l>>>16,m[n+483|0]=l>>>24,m[n+484|0]=a,m[n+485|0]=a>>>8,m[n+486|0]=a>>>16,m[n+487|0]=a>>>24}function Wu(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;D=h[n+4>>2],x=P[a+3|0],l=h[n+8>>2];e:{if((l|0)>-1)break e;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){E=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),h[n+12>>2]=w+3,l=l+24|0,h[n+8>>2]=l,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break e}mn(n),l=h[n+8>>2]}E=n,V=l,g=h[n>>2],H=g>>>l|0,x=ie(x,D)>>>8|0;e:{if(H>>>0>x>>>0){g=((x^-1)<<l)+g|0,h[n>>2]=g,D=D-x|0;break e}D=x+1|0}w=wn(D)^24,l=V-w|0,h[E+8>>2]=l,D=(D<<w)+-1|0,h[n+4>>2]=D;e:{if(H>>>0<=x>>>0){x=P[a+4|0];t:{if((l|0)>-1)break t;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){E=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=w+3,g=g<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}E=n,V=l,x=ie(x,D)>>>8|0,H=g>>>l>>>0<=x>>>0;t:{if(!H){g=((x^-1)<<l)+g|0,h[n>>2]=g,x=D-x|0;break t}x=x+1|0}if(w=wn(x)^24,l=V-w|0,h[E+8>>2]=l,D=(x<<w)+-1|0,h[n+4>>2]=D,x=2,H)break e;E=P[a+5|0];t:{if((l|0)>-1)break t;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}V=n,w=l,x=ie(E,D)>>>8|0;t:{if(g>>>l>>>0>x>>>0){h[n>>2]=((x^-1)<<l)+g,E=4,l=D-x|0;break t}E=3,l=x+1|0}return a=wn(l)^24,h[V+8>>2]=w-a,h[n+4>>2]=(l<<a)+-1,E}x=P[a+6|0];t:{if((l|0)>-1)break t;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){E=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=w+3,g=g<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}E=n,V=l,H=g>>>l|0,x=ie(x,D)>>>8|0;t:{if(H>>>0>x>>>0){g=((x^-1)<<l)+g|0,h[n>>2]=g,D=D-x|0;break t}D=x+1|0}if(w=wn(D)^24,l=V-w|0,h[E+8>>2]=l,D=(D<<w)+-1|0,h[n+4>>2]=D,H>>>0<=x>>>0){E=P[a+7|0];t:{if((l|0)>-1)break t;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}V=n,w=l,H=g>>>l|0,E=ie(E,D)>>>8|0;t:{if(H>>>0>E>>>0){g=((E^-1)<<l)+g|0,h[n>>2]=g,x=D-E|0;break t}x=E+1|0}if(a=wn(x)^24,l=w-a|0,h[V+8>>2]=l,D=(x<<a)+-1|0,h[n+4>>2]=D,H>>>0<=E>>>0){t:{if((l|0)>-1)break t;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}a=ie(D,159)>>>8|0;t:{if(g>>>l>>>0>a>>>0){h[n>>2]=((a^-1)<<l)+g,g=D-a|0,a=6;break t}g=a+1|0,a=5}return x=l,l=wn(g)^24,h[n+8>>2]=x-l,h[n+4>>2]=(g<<l)+-1,a}t:{if((l|0)>-1)break t;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}V=n,w=l,E=ie(D,165)>>>8|0;t:{if(g>>>l>>>0>E>>>0){g=((E^-1)<<l)+g|0,h[n>>2]=g,x=9,E=D-E|0;break t}x=7,E=E+1|0}a=wn(E)^24,l=w-a|0,h[V+8>>2]=l,D=(E<<a)+-1|0,h[n+4>>2]=D;t:{if((l|0)>-1)break t;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}V=n,w=l,H=g>>>l|0,E=ie(D,145)>>>8|0;t:{if(H>>>0>E>>>0){h[n>>2]=((E^-1)<<l)+g,l=D-E|0;break t}l=E+1|0}return a=wn(l)^24,h[V+8>>2]=w-a,h[n+4>>2]=(l<<a)+-1,(H>>>0>E>>>0)+x|0}x=P[a+8|0];t:{if((l|0)>-1)break t;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){E=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=w+3,g=g<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}E=n,V=l,J=g>>>l|0,H=ie(x,D)>>>8|0;t:{if(J>>>0>H>>>0){g=((H^-1)<<l)+g|0,h[n>>2]=g,se=10,x=D-H|0;break t}se=9,x=H+1|0}w=wn(x)^24,l=V-w|0,h[E+8>>2]=l,x=(x<<w)+-1|0,h[n+4>>2]=x,E=P[a+se|0];t:{if((l|0)>-1)break t;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break t}mn(n),g=h[n>>2],l=h[n+8>>2]}V=n,w=l,D=g>>>l|0,E=ie(E,x)>>>8|0;t:{if(D>>>0>E>>>0){g=((E^-1)<<l)+g|0,h[n>>2]=g,x=x-E|0;break t}x=E+1|0}a=wn(x)^24,l=w-a|0,h[V+8>>2]=l,x=(x<<a)+-1|0,h[n+4>>2]=x,se=(J>>>0>H>>>0)<<1|D>>>0>E>>>0,E=h[(se<<2)+10160>>2],a=P[E|0];t:{if(!a){D=0;break t}for(D=0;;){H=a&255;r:{if((l|0)>-1)break r;if(a=h[n+12>>2],a>>>0<Oi[n+20>>2]){w=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=a+3,g=g<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8,h[n>>2]=g;break r}mn(n),g=h[n>>2],l=h[n+8>>2]}V=n,w=l,J=g>>>l|0,H=ie(x,H)>>>8|0;r:{if(J>>>0>H>>>0){g=((H^-1)<<l)+g|0,h[n>>2]=g,x=x-H|0;break r}x=H+1|0}if(a=wn(x)^24,l=w-a|0,h[V+8>>2]=l,x=(x<<a)+-1|0,h[n+4>>2]=x,D=D<<1|J>>>0>H>>>0,a=P[E+1|0],E=E+1|0,!a)break}}x=(8<<se|3)+D|0}return x}function ne(n){n=n|0,m[n|0]=-2139062144,m[n+1|0]=8421504,m[n+2|0]=32896,m[n+3|0]=128,m[n+4|0]=-2139062144,m[n+5|0]=8421504,m[n+6|0]=32896,m[n+7|0]=128,m[n+32|0]=-2139062144,m[n+33|0]=8421504,m[n+34|0]=32896,m[n+35|0]=128,m[n+36|0]=-2139062144,m[n+37|0]=8421504,m[n+38|0]=32896,m[n+39|0]=128,m[n+64|0]=-2139062144,m[n+65|0]=8421504,m[n+66|0]=32896,m[n+67|0]=128,m[n+68|0]=-2139062144,m[n+69|0]=8421504,m[n+70|0]=32896,m[n+71|0]=128,m[n+96|0]=-2139062144,m[n+97|0]=8421504,m[n+98|0]=32896,m[n+99|0]=128,m[n+100|0]=-2139062144,m[n+101|0]=8421504,m[n+102|0]=32896,m[n+103|0]=128,m[n+128|0]=-2139062144,m[n+129|0]=8421504,m[n+130|0]=32896,m[n+131|0]=128,m[n+132|0]=-2139062144,m[n+133|0]=8421504,m[n+134|0]=32896,m[n+135|0]=128,m[n+160|0]=-2139062144,m[n+161|0]=8421504,m[n+162|0]=32896,m[n+163|0]=128,m[n+164|0]=-2139062144,m[n+165|0]=8421504,m[n+166|0]=32896,m[n+167|0]=128,m[n+192|0]=-2139062144,m[n+193|0]=8421504,m[n+194|0]=32896,m[n+195|0]=128,m[n+196|0]=-2139062144,m[n+197|0]=8421504,m[n+198|0]=32896,m[n+199|0]=128,m[n+224|0]=-2139062144,m[n+225|0]=8421504,m[n+226|0]=32896,m[n+227|0]=128,m[n+228|0]=-2139062144,m[n+229|0]=8421504,m[n+230|0]=32896,m[n+231|0]=128,m[n+256|0]=-2139062144,m[n+257|0]=8421504,m[n+258|0]=32896,m[n+259|0]=128,m[n+260|0]=-2139062144,m[n+261|0]=8421504,m[n+262|0]=32896,m[n+263|0]=128,m[n+8|0]=-2139062144,m[n+9|0]=8421504,m[n+10|0]=32896,m[n+11|0]=128,m[n+12|0]=-2139062144,m[n+13|0]=8421504,m[n+14|0]=32896,m[n+15|0]=128,m[n+40|0]=-2139062144,m[n+41|0]=8421504,m[n+42|0]=32896,m[n+43|0]=128,m[n+44|0]=-2139062144,m[n+45|0]=8421504,m[n+46|0]=32896,m[n+47|0]=128,m[n+72|0]=-2139062144,m[n+73|0]=8421504,m[n+74|0]=32896,m[n+75|0]=128,m[n+76|0]=-2139062144,m[n+77|0]=8421504,m[n+78|0]=32896,m[n+79|0]=128,m[n+104|0]=-2139062144,m[n+105|0]=8421504,m[n+106|0]=32896,m[n+107|0]=128,m[n+108|0]=-2139062144,m[n+109|0]=8421504,m[n+110|0]=32896,m[n+111|0]=128,m[n+136|0]=-2139062144,m[n+137|0]=8421504,m[n+138|0]=32896,m[n+139|0]=128,m[n+140|0]=-2139062144,m[n+141|0]=8421504,m[n+142|0]=32896,m[n+143|0]=128,m[n+168|0]=-2139062144,m[n+169|0]=8421504,m[n+170|0]=32896,m[n+171|0]=128,m[n+172|0]=-2139062144,m[n+173|0]=8421504,m[n+174|0]=32896,m[n+175|0]=128,m[n+200|0]=-2139062144,m[n+201|0]=8421504,m[n+202|0]=32896,m[n+203|0]=128,m[n+204|0]=-2139062144,m[n+205|0]=8421504,m[n+206|0]=32896,m[n+207|0]=128,m[n+232|0]=-2139062144,m[n+233|0]=8421504,m[n+234|0]=32896,m[n+235|0]=128,m[n+236|0]=-2139062144,m[n+237|0]=8421504,m[n+238|0]=32896,m[n+239|0]=128,m[n+264|0]=-2139062144,m[n+265|0]=8421504,m[n+266|0]=32896,m[n+267|0]=128,m[n+268|0]=-2139062144,m[n+269|0]=8421504,m[n+270|0]=32896,m[n+271|0]=128,m[n+296|0]=-2139062144,m[n+297|0]=8421504,m[n+298|0]=32896,m[n+299|0]=128,m[n+300|0]=-2139062144,m[n+301|0]=8421504,m[n+302|0]=32896,m[n+303|0]=128,m[n+288|0]=-2139062144,m[n+289|0]=8421504,m[n+290|0]=32896,m[n+291|0]=128,m[n+292|0]=-2139062144,m[n+293|0]=8421504,m[n+294|0]=32896,m[n+295|0]=128,m[n+328|0]=-2139062144,m[n+329|0]=8421504,m[n+330|0]=32896,m[n+331|0]=128,m[n+332|0]=-2139062144,m[n+333|0]=8421504,m[n+334|0]=32896,m[n+335|0]=128,m[n+320|0]=-2139062144,m[n+321|0]=8421504,m[n+322|0]=32896,m[n+323|0]=128,m[n+324|0]=-2139062144,m[n+325|0]=8421504,m[n+326|0]=32896,m[n+327|0]=128,m[n+360|0]=-2139062144,m[n+361|0]=8421504,m[n+362|0]=32896,m[n+363|0]=128,m[n+364|0]=-2139062144,m[n+365|0]=8421504,m[n+366|0]=32896,m[n+367|0]=128,m[n+352|0]=-2139062144,m[n+353|0]=8421504,m[n+354|0]=32896,m[n+355|0]=128,m[n+356|0]=-2139062144,m[n+357|0]=8421504,m[n+358|0]=32896,m[n+359|0]=128,m[n+392|0]=-2139062144,m[n+393|0]=8421504,m[n+394|0]=32896,m[n+395|0]=128,m[n+396|0]=-2139062144,m[n+397|0]=8421504,m[n+398|0]=32896,m[n+399|0]=128,m[n+384|0]=-2139062144,m[n+385|0]=8421504,m[n+386|0]=32896,m[n+387|0]=128,m[n+388|0]=-2139062144,m[n+389|0]=8421504,m[n+390|0]=32896,m[n+391|0]=128,m[n+424|0]=-2139062144,m[n+425|0]=8421504,m[n+426|0]=32896,m[n+427|0]=128,m[n+428|0]=-2139062144,m[n+429|0]=8421504,m[n+430|0]=32896,m[n+431|0]=128,m[n+416|0]=-2139062144,m[n+417|0]=8421504,m[n+418|0]=32896,m[n+419|0]=128,m[n+420|0]=-2139062144,m[n+421|0]=8421504,m[n+422|0]=32896,m[n+423|0]=128,m[n+456|0]=-2139062144,m[n+457|0]=8421504,m[n+458|0]=32896,m[n+459|0]=128,m[n+460|0]=-2139062144,m[n+461|0]=8421504,m[n+462|0]=32896,m[n+463|0]=128,m[n+448|0]=-2139062144,m[n+449|0]=8421504,m[n+450|0]=32896,m[n+451|0]=128,m[n+452|0]=-2139062144,m[n+453|0]=8421504,m[n+454|0]=32896,m[n+455|0]=128,m[n+488|0]=-2139062144,m[n+489|0]=8421504,m[n+490|0]=32896,m[n+491|0]=128,m[n+492|0]=-2139062144,m[n+493|0]=8421504,m[n+494|0]=32896,m[n+495|0]=128,m[n+480|0]=-2139062144,m[n+481|0]=8421504,m[n+482|0]=32896,m[n+483|0]=128,m[n+484|0]=-2139062144,m[n+485|0]=8421504,m[n+486|0]=32896,m[n+487|0]=128}function Ve(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0;a=n,x=a+-32|0,g=x,w=P[g+4|0]|P[g+5|0]<<8|(P[g+6|0]<<16|P[g+7|0]<<24),n=P[g|0]|P[g+1|0]<<8|(P[g+2|0]<<16|P[g+3|0]<<24),l=n,m[a|0]=l,m[a+1|0]=l>>>8,m[a+2|0]=l>>>16,m[a+3|0]=l>>>24,m[a+4|0]=w,m[a+5|0]=w>>>8,m[a+6|0]=w>>>16,m[a+7|0]=w>>>24,m[a+32|0]=l,m[a+33|0]=l>>>8,m[a+34|0]=l>>>16,m[a+35|0]=l>>>24,m[a+36|0]=w,m[a+37|0]=w>>>8,m[a+38|0]=w>>>16,m[a+39|0]=w>>>24,m[a+64|0]=l,m[a+65|0]=l>>>8,m[a+66|0]=l>>>16,m[a+67|0]=l>>>24,m[a+68|0]=w,m[a+69|0]=w>>>8,m[a+70|0]=w>>>16,m[a+71|0]=w>>>24,m[a+96|0]=l,m[a+97|0]=l>>>8,m[a+98|0]=l>>>16,m[a+99|0]=l>>>24,m[a+100|0]=w,m[a+101|0]=w>>>8,m[a+102|0]=w>>>16,m[a+103|0]=w>>>24,m[a+128|0]=l,m[a+129|0]=l>>>8,m[a+130|0]=l>>>16,m[a+131|0]=l>>>24,m[a+132|0]=w,m[a+133|0]=w>>>8,m[a+134|0]=w>>>16,m[a+135|0]=w>>>24,m[a+160|0]=l,m[a+161|0]=l>>>8,m[a+162|0]=l>>>16,m[a+163|0]=l>>>24,m[a+164|0]=w,m[a+165|0]=w>>>8,m[a+166|0]=w>>>16,m[a+167|0]=w>>>24,m[a+192|0]=l,m[a+193|0]=l>>>8,m[a+194|0]=l>>>16,m[a+195|0]=l>>>24,m[a+196|0]=w,m[a+197|0]=w>>>8,m[a+198|0]=w>>>16,m[a+199|0]=w>>>24,m[a+224|0]=l,m[a+225|0]=l>>>8,m[a+226|0]=l>>>16,m[a+227|0]=l>>>24,m[a+228|0]=w,m[a+229|0]=w>>>8,m[a+230|0]=w>>>16,m[a+231|0]=w>>>24,w=g+8|0,g=P[w+4|0]|P[w+5|0]<<8|(P[w+6|0]<<16|P[w+7|0]<<24),n=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),l=n,m[a+8|0]=l,m[a+9|0]=l>>>8,m[a+10|0]=l>>>16,m[a+11|0]=l>>>24,m[a+12|0]=g,m[a+13|0]=g>>>8,m[a+14|0]=g>>>16,m[a+15|0]=g>>>24,m[a+40|0]=l,m[a+41|0]=l>>>8,m[a+42|0]=l>>>16,m[a+43|0]=l>>>24,m[a+44|0]=g,m[a+45|0]=g>>>8,m[a+46|0]=g>>>16,m[a+47|0]=g>>>24,m[a+72|0]=l,m[a+73|0]=l>>>8,m[a+74|0]=l>>>16,m[a+75|0]=l>>>24,m[a+76|0]=g,m[a+77|0]=g>>>8,m[a+78|0]=g>>>16,m[a+79|0]=g>>>24,m[a+104|0]=l,m[a+105|0]=l>>>8,m[a+106|0]=l>>>16,m[a+107|0]=l>>>24,m[a+108|0]=g,m[a+109|0]=g>>>8,m[a+110|0]=g>>>16,m[a+111|0]=g>>>24,m[a+136|0]=l,m[a+137|0]=l>>>8,m[a+138|0]=l>>>16,m[a+139|0]=l>>>24,m[a+140|0]=g,m[a+141|0]=g>>>8,m[a+142|0]=g>>>16,m[a+143|0]=g>>>24,m[a+168|0]=l,m[a+169|0]=l>>>8,m[a+170|0]=l>>>16,m[a+171|0]=l>>>24,m[a+172|0]=g,m[a+173|0]=g>>>8,m[a+174|0]=g>>>16,m[a+175|0]=g>>>24,m[a+200|0]=l,m[a+201|0]=l>>>8,m[a+202|0]=l>>>16,m[a+203|0]=l>>>24,m[a+204|0]=g,m[a+205|0]=g>>>8,m[a+206|0]=g>>>16,m[a+207|0]=g>>>24,m[a+232|0]=l,m[a+233|0]=l>>>8,m[a+234|0]=l>>>16,m[a+235|0]=l>>>24,m[a+236|0]=g,m[a+237|0]=g>>>8,m[a+238|0]=g>>>16,m[a+239|0]=g>>>24,g=P[w+4|0]|P[w+5|0]<<8|(P[w+6|0]<<16|P[w+7|0]<<24),E=g,l=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),m[a+264|0]=l,m[a+265|0]=l>>>8,m[a+266|0]=l>>>16,m[a+267|0]=l>>>24,m[a+268|0]=g,m[a+269|0]=g>>>8,m[a+270|0]=g>>>16,m[a+271|0]=g>>>24,g=P[x+4|0]|P[x+5|0]<<8|(P[x+6|0]<<16|P[x+7|0]<<24),n=P[x|0]|P[x+1|0]<<8|(P[x+2|0]<<16|P[x+3|0]<<24),x=n,m[a+256|0]=x,m[a+257|0]=x>>>8,m[a+258|0]=x>>>16,m[a+259|0]=x>>>24,m[a+260|0]=g,m[a+261|0]=g>>>8,m[a+262|0]=g>>>16,m[a+263|0]=g>>>24,m[a+296|0]=l,m[a+297|0]=l>>>8,m[a+298|0]=l>>>16,m[a+299|0]=l>>>24,m[a+300|0]=E,m[a+301|0]=E>>>8,m[a+302|0]=E>>>16,m[a+303|0]=E>>>24,m[a+288|0]=x,m[a+289|0]=x>>>8,m[a+290|0]=x>>>16,m[a+291|0]=x>>>24,m[a+292|0]=g,m[a+293|0]=g>>>8,m[a+294|0]=g>>>16,m[a+295|0]=g>>>24,m[a+328|0]=l,m[a+329|0]=l>>>8,m[a+330|0]=l>>>16,m[a+331|0]=l>>>24,m[a+332|0]=E,m[a+333|0]=E>>>8,m[a+334|0]=E>>>16,m[a+335|0]=E>>>24,m[a+320|0]=x,m[a+321|0]=x>>>8,m[a+322|0]=x>>>16,m[a+323|0]=x>>>24,m[a+324|0]=g,m[a+325|0]=g>>>8,m[a+326|0]=g>>>16,m[a+327|0]=g>>>24,m[a+360|0]=l,m[a+361|0]=l>>>8,m[a+362|0]=l>>>16,m[a+363|0]=l>>>24,m[a+364|0]=E,m[a+365|0]=E>>>8,m[a+366|0]=E>>>16,m[a+367|0]=E>>>24,m[a+352|0]=x,m[a+353|0]=x>>>8,m[a+354|0]=x>>>16,m[a+355|0]=x>>>24,m[a+356|0]=g,m[a+357|0]=g>>>8,m[a+358|0]=g>>>16,m[a+359|0]=g>>>24,m[a+384|0]=x,m[a+385|0]=x>>>8,m[a+386|0]=x>>>16,m[a+387|0]=x>>>24,m[a+388|0]=g,m[a+389|0]=g>>>8,m[a+390|0]=g>>>16,m[a+391|0]=g>>>24,m[a+392|0]=l,m[a+393|0]=l>>>8,m[a+394|0]=l>>>16,m[a+395|0]=l>>>24,m[a+396|0]=E,m[a+397|0]=E>>>8,m[a+398|0]=E>>>16,m[a+399|0]=E>>>24,m[a+424|0]=l,m[a+425|0]=l>>>8,m[a+426|0]=l>>>16,m[a+427|0]=l>>>24,m[a+428|0]=E,m[a+429|0]=E>>>8,m[a+430|0]=E>>>16,m[a+431|0]=E>>>24,m[a+416|0]=x,m[a+417|0]=x>>>8,m[a+418|0]=x>>>16,m[a+419|0]=x>>>24,m[a+420|0]=g,m[a+421|0]=g>>>8,m[a+422|0]=g>>>16,m[a+423|0]=g>>>24,m[a+448|0]=x,m[a+449|0]=x>>>8,m[a+450|0]=x>>>16,m[a+451|0]=x>>>24,m[a+452|0]=g,m[a+453|0]=g>>>8,m[a+454|0]=g>>>16,m[a+455|0]=g>>>24,m[a+456|0]=l,m[a+457|0]=l>>>8,m[a+458|0]=l>>>16,m[a+459|0]=l>>>24,m[a+460|0]=E,m[a+461|0]=E>>>8,m[a+462|0]=E>>>16,m[a+463|0]=E>>>24,m[a+488|0]=l,m[a+489|0]=l>>>8,m[a+490|0]=l>>>16,m[a+491|0]=l>>>24,m[a+492|0]=E,m[a+493|0]=E>>>8,m[a+494|0]=E>>>16,m[a+495|0]=E>>>24,m[a+480|0]=x,m[a+481|0]=x>>>8,m[a+482|0]=x>>>16,m[a+483|0]=x>>>24,m[a+484|0]=g,m[a+485|0]=g>>>8,m[a+486|0]=g>>>16,m[a+487|0]=g>>>24}function Rt(n,a,l,g,w){var x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0;x=Mi-80|0,Mi=x,h[x+76>>2]=a,ur=x+55|0,Pt=x+56|0,a=0;e:{t:for(;;){r:{if((Oe|0)<0)break r;if((a|0)>(2147483647-Oe|0)){h[2865]=61,Oe=-1;break r}Oe=a+Oe|0}r:{i:{o:{if(H=h[x+76>>2],a=H,E=P[a|0],E)for(;;){l:{E=E&255;n:{if(!E){E=a;break n}if((E|0)!=37)break l;for(E=a;;){if(P[a+1|0]!=37)break n;if(D=a+2|0,h[x+76>>2]=D,E=E+1|0,V=P[a+2|0],a=D,(V|0)!=37)break}}if(a=E-H|0,n&&gf(n,H,a),a)continue t;E=x,D=!fh(m[h[x+76>>2]+1|0]),a=h[x+76>>2];n:{if(!(D|P[a+2|0]!=36)){st=m[a+1|0]+-48|0,Wt=1,a=a+3|0;break n}st=-1,a=a+1|0}h[E+76>>2]=a,J=0,He=m[a|0],D=He+-32|0;n:{if(D>>>0>31){E=a;break n}if(E=a,D=1<<D,!(D&75913))break n;for(;;){if(E=a+1|0,h[x+76>>2]=E,J=D|J,He=m[a+1|0],D=He+-32|0,D>>>0>=32)break n;if(a=E,D=1<<D,!(D&75913))break}}n:{if((He|0)==42){D=x;u:{a:{if(!fh(m[E+1|0])||(a=h[x+76>>2],P[a+2|0]!=36))break a;h[((m[a+1|0]<<2)+w|0)+-192>>2]=10,se=h[((m[a+1|0]<<3)+g|0)+-384>>2],Wt=1,a=a+3|0;break u}if(Wt)break o;Wt=0,se=0,n&&(a=h[l>>2],h[l>>2]=a+4,se=h[a>>2]),a=h[x+76>>2]+1|0}if(h[D+76>>2]=a,(se|0)>-1)break n;se=0-se|0,J=J|8192;break n}if(se=hf(x+76|0),(se|0)<0)break o;a=h[x+76>>2]}V=-1;n:{if(P[a|0]!=46)break n;if(P[a+1|0]==42){u:{if(!fh(m[a+2|0])||(a=h[x+76>>2],P[a+3|0]!=36))break u;h[((m[a+2|0]<<2)+w|0)+-192>>2]=10,V=h[((m[a+2|0]<<3)+g|0)+-384>>2],a=a+4|0,h[x+76>>2]=a;break n}if(Wt)break o;n?(a=h[l>>2],h[l>>2]=a+4,V=h[a>>2]):V=0,a=h[x+76>>2]+2|0,h[x+76>>2]=a;break n}h[x+76>>2]=a+1,V=hf(x+76|0),a=h[x+76>>2]}for(E=0;;){if(rr=E,xe=-1,m[a|0]+-65>>>0>57)break e;if(He=a+1|0,h[x+76>>2]=He,E=m[a|0],a=He,E=P[(E+ie(rr,58)|0)+9599|0],!(E+-1>>>0<8))break}n:{u:{if((E|0)!=19){if(!E)break e;if((st|0)>=0){h[(st<<2)+w>>2]=E,a=(st<<3)+g|0,E=h[a+4>>2],h[x+64>>2]=h[a>>2],h[x+68>>2]=E;break u}if(!n)break r;iu(x- -64|0,E,l),He=h[x+76>>2];break n}if((st|0)>-1)break e}if(a=0,!n)continue t}D=J&-65537,E=J&8192?D:J,xe=0,st=9644,J=Pt;n:{u:{a:{s:{h:{c:{f:{d:{p:{m:{_:{v:{b:{g:{w:{y:switch(a=m[He+-1|0],a=rr&&(a&15)==3?a&-33:a,a+-88|0){case 11:break n;case 9:case 13:case 14:case 15:break u;case 27:break f;case 12:case 17:break m;case 23:break _;case 0:case 32:break v;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break i;default:break y}y:switch(a+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break h;case 1:case 3:break i;default:break y}if((a|0)==83)break c;break i}a=h[x+64>>2],H=h[x+68>>2],st=9644;break p}a=0;g:switch(rr&255){case 0:h[h[x+64>>2]>>2]=Oe;continue t;case 1:h[h[x+64>>2]>>2]=Oe;continue t;case 2:E=h[x+64>>2],h[E>>2]=Oe,h[E+4>>2]=Oe>>31;continue t;case 3:xr[h[x+64>>2]>>1]=Oe;continue t;case 4:m[h[x+64>>2]]=Oe;continue t;case 6:h[h[x+64>>2]>>2]=Oe;continue t;case 7:break g;default:continue t}E=h[x+64>>2],h[E>>2]=Oe,h[E+4>>2]=Oe>>31;continue t}V=V>>>0>8?V:8,E=E|8,a=120}if(H=Ta(h[x+64>>2],h[x+68>>2],Pt,a&32),!(E&8)|!(h[x+64>>2]|h[x+68>>2]))break d;st=(a>>>4|0)+9644|0,xe=2;break d}if(H=sr(h[x+64>>2],h[x+68>>2],Pt),!(E&8))break d;a=Pt-H|0,V=(V|0)>(a|0)?V:a+1|0;break d}if(D=h[x+68>>2],H=D,a=h[x+64>>2],(D|0)<-1||(D|0)<=-1){H=0-(H+(0<a>>>0)|0)|0,a=0-a|0,h[x+64>>2]=a,h[x+68>>2]=H,xe=1,st=9644;break p}if(E&2048){xe=1,st=9645;break p}xe=E&1,st=xe?9646:9644}H=hr(a,H,Pt)}if(E=(V|0)>-1?E&-65537:E,a=h[x+64>>2],D=h[x+68>>2],!(!!(a|D)|V)){V=0,H=Pt;break i}a=!(a|D)+(Pt-H|0)|0,V=(V|0)>(a|0)?V:a;break i}a=h[x+64>>2],H=a||9654,a=R(H,V),J=a||V+H|0,E=D,V=a?a-H|0:V;break i}if(D=h[x+64>>2],V)break s;a=0,zn(n,32,se,0,E);break a}h[x+12>>2]=0,h[x+8>>2]=h[x+64>>2],h[x+64>>2]=x+8,V=-1,D=x+8|0}a=0;s:{for(;;){if(H=h[D>>2],!H)break s;if(H=f1(x+4|0,H),J=(H|0)<0,!(J|H>>>0>V-a>>>0)){if(D=D+4|0,a=a+H|0,V>>>0>a>>>0)continue;break s}break}if(xe=-1,J)break e}if(zn(n,32,se,a,E),!a){a=0;break a}for(He=0,D=h[x+64>>2];;){if(H=h[D>>2],!H||(H=f1(x+4|0,H),He=H+He|0,(He|0)>(a|0)))break a;if(gf(n,x+4|0,H),D=D+4|0,!(He>>>0<a>>>0))break}}zn(n,32,se,a,E^8192),a=(se|0)>(a|0)?se:a;continue t}a=ot[0](n,wo[x+64>>3],se,V,E,a)|0;continue t}m[x+55|0]=h[x+64>>2],V=1,H=ur,E=D;break i}D=a+1|0,h[x+76>>2]=D,E=P[a+1|0],a=D}if(xe=Oe,n)break e;if(!Wt)break r;for(a=1;;){if(n=h[(a<<2)+w>>2],n){if(iu((a<<3)+g|0,n,l),xe=1,a=a+1|0,(a|0)!=10)continue;break e}break}if(xe=1,a>>>0>=10)break e;for(;;){if(h[(a<<2)+w>>2])break o;if(a=a+1|0,(a|0)==10)break}break e}xe=-1;break e}J=J-H|0,V=(V|0)<(J|0)?J:V,D=V+xe|0,a=(se|0)<(D|0)?D:se,zn(n,32,a,D,E),gf(n,st,xe),zn(n,48,a,D,E^65536),zn(n,48,V,J,0),gf(n,H,J),zn(n,32,a,D,E^8192);continue}break}xe=0}return Mi=x+80|0,xe}function ar(n){n=n|0;var a=0,l=0;a=n,n=sn((P[a+-17|0]+(P[a+-18|0]+(P[a+-19|0]+(P[a+-20|0]+(P[a+-21|0]+(P[a+-22|0]+(P[a+-23|0]+(P[a+-24|0]+(P[a+-25|0]+(P[a+-26|0]+(P[a+-27|0]+(P[a+-28|0]+(P[a+-29|0]+(P[a+-30|0]+(P[a+-32|0]+P[a+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[a|0]=n,m[a+1|0]=n>>>8,m[a+2|0]=n>>>16,m[a+3|0]=n>>>24,l=bi,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24,m[a+8|0]=n,m[a+9|0]=n>>>8,m[a+10|0]=n>>>16,m[a+11|0]=n>>>24,m[a+12|0]=l,m[a+13|0]=l>>>8,m[a+14|0]=l>>>16,m[a+15|0]=l>>>24,m[a+40|0]=n,m[a+41|0]=n>>>8,m[a+42|0]=n>>>16,m[a+43|0]=n>>>24,m[a+44|0]=l,m[a+45|0]=l>>>8,m[a+46|0]=l>>>16,m[a+47|0]=l>>>24,m[a+32|0]=n,m[a+33|0]=n>>>8,m[a+34|0]=n>>>16,m[a+35|0]=n>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a+72|0]=n,m[a+73|0]=n>>>8,m[a+74|0]=n>>>16,m[a+75|0]=n>>>24,m[a+76|0]=l,m[a+77|0]=l>>>8,m[a+78|0]=l>>>16,m[a+79|0]=l>>>24,m[a+64|0]=n,m[a+65|0]=n>>>8,m[a+66|0]=n>>>16,m[a+67|0]=n>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+104|0]=n,m[a+105|0]=n>>>8,m[a+106|0]=n>>>16,m[a+107|0]=n>>>24,m[a+108|0]=l,m[a+109|0]=l>>>8,m[a+110|0]=l>>>16,m[a+111|0]=l>>>24,m[a+96|0]=n,m[a+97|0]=n>>>8,m[a+98|0]=n>>>16,m[a+99|0]=n>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+136|0]=n,m[a+137|0]=n>>>8,m[a+138|0]=n>>>16,m[a+139|0]=n>>>24,m[a+140|0]=l,m[a+141|0]=l>>>8,m[a+142|0]=l>>>16,m[a+143|0]=l>>>24,m[a+128|0]=n,m[a+129|0]=n>>>8,m[a+130|0]=n>>>16,m[a+131|0]=n>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+168|0]=n,m[a+169|0]=n>>>8,m[a+170|0]=n>>>16,m[a+171|0]=n>>>24,m[a+172|0]=l,m[a+173|0]=l>>>8,m[a+174|0]=l>>>16,m[a+175|0]=l>>>24,m[a+160|0]=n,m[a+161|0]=n>>>8,m[a+162|0]=n>>>16,m[a+163|0]=n>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+200|0]=n,m[a+201|0]=n>>>8,m[a+202|0]=n>>>16,m[a+203|0]=n>>>24,m[a+204|0]=l,m[a+205|0]=l>>>8,m[a+206|0]=l>>>16,m[a+207|0]=l>>>24,m[a+192|0]=n,m[a+193|0]=n>>>8,m[a+194|0]=n>>>16,m[a+195|0]=n>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+232|0]=n,m[a+233|0]=n>>>8,m[a+234|0]=n>>>16,m[a+235|0]=n>>>24,m[a+236|0]=l,m[a+237|0]=l>>>8,m[a+238|0]=l>>>16,m[a+239|0]=l>>>24,m[a+224|0]=n,m[a+225|0]=n>>>8,m[a+226|0]=n>>>16,m[a+227|0]=n>>>24,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+264|0]=n,m[a+265|0]=n>>>8,m[a+266|0]=n>>>16,m[a+267|0]=n>>>24,m[a+268|0]=l,m[a+269|0]=l>>>8,m[a+270|0]=l>>>16,m[a+271|0]=l>>>24,m[a+256|0]=n,m[a+257|0]=n>>>8,m[a+258|0]=n>>>16,m[a+259|0]=n>>>24,m[a+260|0]=l,m[a+261|0]=l>>>8,m[a+262|0]=l>>>16,m[a+263|0]=l>>>24,m[a+296|0]=n,m[a+297|0]=n>>>8,m[a+298|0]=n>>>16,m[a+299|0]=n>>>24,m[a+300|0]=l,m[a+301|0]=l>>>8,m[a+302|0]=l>>>16,m[a+303|0]=l>>>24,m[a+288|0]=n,m[a+289|0]=n>>>8,m[a+290|0]=n>>>16,m[a+291|0]=n>>>24,m[a+292|0]=l,m[a+293|0]=l>>>8,m[a+294|0]=l>>>16,m[a+295|0]=l>>>24,m[a+328|0]=n,m[a+329|0]=n>>>8,m[a+330|0]=n>>>16,m[a+331|0]=n>>>24,m[a+332|0]=l,m[a+333|0]=l>>>8,m[a+334|0]=l>>>16,m[a+335|0]=l>>>24,m[a+320|0]=n,m[a+321|0]=n>>>8,m[a+322|0]=n>>>16,m[a+323|0]=n>>>24,m[a+324|0]=l,m[a+325|0]=l>>>8,m[a+326|0]=l>>>16,m[a+327|0]=l>>>24,m[a+360|0]=n,m[a+361|0]=n>>>8,m[a+362|0]=n>>>16,m[a+363|0]=n>>>24,m[a+364|0]=l,m[a+365|0]=l>>>8,m[a+366|0]=l>>>16,m[a+367|0]=l>>>24,m[a+352|0]=n,m[a+353|0]=n>>>8,m[a+354|0]=n>>>16,m[a+355|0]=n>>>24,m[a+356|0]=l,m[a+357|0]=l>>>8,m[a+358|0]=l>>>16,m[a+359|0]=l>>>24,m[a+392|0]=n,m[a+393|0]=n>>>8,m[a+394|0]=n>>>16,m[a+395|0]=n>>>24,m[a+396|0]=l,m[a+397|0]=l>>>8,m[a+398|0]=l>>>16,m[a+399|0]=l>>>24,m[a+384|0]=n,m[a+385|0]=n>>>8,m[a+386|0]=n>>>16,m[a+387|0]=n>>>24,m[a+388|0]=l,m[a+389|0]=l>>>8,m[a+390|0]=l>>>16,m[a+391|0]=l>>>24,m[a+424|0]=n,m[a+425|0]=n>>>8,m[a+426|0]=n>>>16,m[a+427|0]=n>>>24,m[a+428|0]=l,m[a+429|0]=l>>>8,m[a+430|0]=l>>>16,m[a+431|0]=l>>>24,m[a+416|0]=n,m[a+417|0]=n>>>8,m[a+418|0]=n>>>16,m[a+419|0]=n>>>24,m[a+420|0]=l,m[a+421|0]=l>>>8,m[a+422|0]=l>>>16,m[a+423|0]=l>>>24,m[a+456|0]=n,m[a+457|0]=n>>>8,m[a+458|0]=n>>>16,m[a+459|0]=n>>>24,m[a+460|0]=l,m[a+461|0]=l>>>8,m[a+462|0]=l>>>16,m[a+463|0]=l>>>24,m[a+448|0]=n,m[a+449|0]=n>>>8,m[a+450|0]=n>>>16,m[a+451|0]=n>>>24,m[a+452|0]=l,m[a+453|0]=l>>>8,m[a+454|0]=l>>>16,m[a+455|0]=l>>>24,m[a+488|0]=n,m[a+489|0]=n>>>8,m[a+490|0]=n>>>16,m[a+491|0]=n>>>24,m[a+492|0]=l,m[a+493|0]=l>>>8,m[a+494|0]=l>>>16,m[a+495|0]=l>>>24,m[a+480|0]=n,m[a+481|0]=n>>>8,m[a+482|0]=n>>>16,m[a+483|0]=n>>>24,m[a+484|0]=l,m[a+485|0]=l>>>8,m[a+486|0]=l>>>16,m[a+487|0]=l>>>24}function Ar(n){n=n|0;var a=0,l=0;a=n,n=sn((P[a+479|0]+(P[a+447|0]+(P[a+415|0]+(P[a+383|0]+(P[a+351|0]+(P[a+319|0]+(P[a+287|0]+(P[a+255|0]+(P[a+223|0]+(P[a+191|0]+(P[a+159|0]+(P[a+127|0]+(P[a+95|0]+(P[a+63|0]+(P[a+-1|0]+P[a+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[a|0]=n,m[a+1|0]=n>>>8,m[a+2|0]=n>>>16,m[a+3|0]=n>>>24,l=bi,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24,m[a+8|0]=n,m[a+9|0]=n>>>8,m[a+10|0]=n>>>16,m[a+11|0]=n>>>24,m[a+12|0]=l,m[a+13|0]=l>>>8,m[a+14|0]=l>>>16,m[a+15|0]=l>>>24,m[a+40|0]=n,m[a+41|0]=n>>>8,m[a+42|0]=n>>>16,m[a+43|0]=n>>>24,m[a+44|0]=l,m[a+45|0]=l>>>8,m[a+46|0]=l>>>16,m[a+47|0]=l>>>24,m[a+32|0]=n,m[a+33|0]=n>>>8,m[a+34|0]=n>>>16,m[a+35|0]=n>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a+72|0]=n,m[a+73|0]=n>>>8,m[a+74|0]=n>>>16,m[a+75|0]=n>>>24,m[a+76|0]=l,m[a+77|0]=l>>>8,m[a+78|0]=l>>>16,m[a+79|0]=l>>>24,m[a+64|0]=n,m[a+65|0]=n>>>8,m[a+66|0]=n>>>16,m[a+67|0]=n>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+104|0]=n,m[a+105|0]=n>>>8,m[a+106|0]=n>>>16,m[a+107|0]=n>>>24,m[a+108|0]=l,m[a+109|0]=l>>>8,m[a+110|0]=l>>>16,m[a+111|0]=l>>>24,m[a+96|0]=n,m[a+97|0]=n>>>8,m[a+98|0]=n>>>16,m[a+99|0]=n>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+136|0]=n,m[a+137|0]=n>>>8,m[a+138|0]=n>>>16,m[a+139|0]=n>>>24,m[a+140|0]=l,m[a+141|0]=l>>>8,m[a+142|0]=l>>>16,m[a+143|0]=l>>>24,m[a+128|0]=n,m[a+129|0]=n>>>8,m[a+130|0]=n>>>16,m[a+131|0]=n>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+168|0]=n,m[a+169|0]=n>>>8,m[a+170|0]=n>>>16,m[a+171|0]=n>>>24,m[a+172|0]=l,m[a+173|0]=l>>>8,m[a+174|0]=l>>>16,m[a+175|0]=l>>>24,m[a+160|0]=n,m[a+161|0]=n>>>8,m[a+162|0]=n>>>16,m[a+163|0]=n>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+200|0]=n,m[a+201|0]=n>>>8,m[a+202|0]=n>>>16,m[a+203|0]=n>>>24,m[a+204|0]=l,m[a+205|0]=l>>>8,m[a+206|0]=l>>>16,m[a+207|0]=l>>>24,m[a+192|0]=n,m[a+193|0]=n>>>8,m[a+194|0]=n>>>16,m[a+195|0]=n>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+232|0]=n,m[a+233|0]=n>>>8,m[a+234|0]=n>>>16,m[a+235|0]=n>>>24,m[a+236|0]=l,m[a+237|0]=l>>>8,m[a+238|0]=l>>>16,m[a+239|0]=l>>>24,m[a+224|0]=n,m[a+225|0]=n>>>8,m[a+226|0]=n>>>16,m[a+227|0]=n>>>24,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+264|0]=n,m[a+265|0]=n>>>8,m[a+266|0]=n>>>16,m[a+267|0]=n>>>24,m[a+268|0]=l,m[a+269|0]=l>>>8,m[a+270|0]=l>>>16,m[a+271|0]=l>>>24,m[a+256|0]=n,m[a+257|0]=n>>>8,m[a+258|0]=n>>>16,m[a+259|0]=n>>>24,m[a+260|0]=l,m[a+261|0]=l>>>8,m[a+262|0]=l>>>16,m[a+263|0]=l>>>24,m[a+296|0]=n,m[a+297|0]=n>>>8,m[a+298|0]=n>>>16,m[a+299|0]=n>>>24,m[a+300|0]=l,m[a+301|0]=l>>>8,m[a+302|0]=l>>>16,m[a+303|0]=l>>>24,m[a+288|0]=n,m[a+289|0]=n>>>8,m[a+290|0]=n>>>16,m[a+291|0]=n>>>24,m[a+292|0]=l,m[a+293|0]=l>>>8,m[a+294|0]=l>>>16,m[a+295|0]=l>>>24,m[a+328|0]=n,m[a+329|0]=n>>>8,m[a+330|0]=n>>>16,m[a+331|0]=n>>>24,m[a+332|0]=l,m[a+333|0]=l>>>8,m[a+334|0]=l>>>16,m[a+335|0]=l>>>24,m[a+320|0]=n,m[a+321|0]=n>>>8,m[a+322|0]=n>>>16,m[a+323|0]=n>>>24,m[a+324|0]=l,m[a+325|0]=l>>>8,m[a+326|0]=l>>>16,m[a+327|0]=l>>>24,m[a+360|0]=n,m[a+361|0]=n>>>8,m[a+362|0]=n>>>16,m[a+363|0]=n>>>24,m[a+364|0]=l,m[a+365|0]=l>>>8,m[a+366|0]=l>>>16,m[a+367|0]=l>>>24,m[a+352|0]=n,m[a+353|0]=n>>>8,m[a+354|0]=n>>>16,m[a+355|0]=n>>>24,m[a+356|0]=l,m[a+357|0]=l>>>8,m[a+358|0]=l>>>16,m[a+359|0]=l>>>24,m[a+392|0]=n,m[a+393|0]=n>>>8,m[a+394|0]=n>>>16,m[a+395|0]=n>>>24,m[a+396|0]=l,m[a+397|0]=l>>>8,m[a+398|0]=l>>>16,m[a+399|0]=l>>>24,m[a+384|0]=n,m[a+385|0]=n>>>8,m[a+386|0]=n>>>16,m[a+387|0]=n>>>24,m[a+388|0]=l,m[a+389|0]=l>>>8,m[a+390|0]=l>>>16,m[a+391|0]=l>>>24,m[a+424|0]=n,m[a+425|0]=n>>>8,m[a+426|0]=n>>>16,m[a+427|0]=n>>>24,m[a+428|0]=l,m[a+429|0]=l>>>8,m[a+430|0]=l>>>16,m[a+431|0]=l>>>24,m[a+416|0]=n,m[a+417|0]=n>>>8,m[a+418|0]=n>>>16,m[a+419|0]=n>>>24,m[a+420|0]=l,m[a+421|0]=l>>>8,m[a+422|0]=l>>>16,m[a+423|0]=l>>>24,m[a+456|0]=n,m[a+457|0]=n>>>8,m[a+458|0]=n>>>16,m[a+459|0]=n>>>24,m[a+460|0]=l,m[a+461|0]=l>>>8,m[a+462|0]=l>>>16,m[a+463|0]=l>>>24,m[a+448|0]=n,m[a+449|0]=n>>>8,m[a+450|0]=n>>>16,m[a+451|0]=n>>>24,m[a+452|0]=l,m[a+453|0]=l>>>8,m[a+454|0]=l>>>16,m[a+455|0]=l>>>24,m[a+488|0]=n,m[a+489|0]=n>>>8,m[a+490|0]=n>>>16,m[a+491|0]=n>>>24,m[a+492|0]=l,m[a+493|0]=l>>>8,m[a+494|0]=l>>>16,m[a+495|0]=l>>>24,m[a+480|0]=n,m[a+481|0]=n>>>8,m[a+482|0]=n>>>16,m[a+483|0]=n>>>24,m[a+484|0]=l,m[a+485|0]=l>>>8,m[a+486|0]=l>>>16,m[a+487|0]=l>>>24}function Hr(n){n=n|0;var a=0,l=0;for(l=16;l=P[(n+a|0)+-32|0]+(P[((a<<5)+n|0)+-1|0]+l|0)|0,a=a+1|0,(a|0)!=16;);a=n,n=sn(l>>>5&255,0,16843009,16843009),l=n,m[a+8|0]=l,m[a+9|0]=l>>>8,m[a+10|0]=l>>>16,m[a+11|0]=l>>>24,n=bi,m[a+12|0]=n,m[a+13|0]=n>>>8,m[a+14|0]=n>>>16,m[a+15|0]=n>>>24,m[a|0]=l,m[a+1|0]=l>>>8,m[a+2|0]=l>>>16,m[a+3|0]=l>>>24,m[a+4|0]=n,m[a+5|0]=n>>>8,m[a+6|0]=n>>>16,m[a+7|0]=n>>>24,m[a+32|0]=l,m[a+33|0]=l>>>8,m[a+34|0]=l>>>16,m[a+35|0]=l>>>24,m[a+36|0]=n,m[a+37|0]=n>>>8,m[a+38|0]=n>>>16,m[a+39|0]=n>>>24,m[a+40|0]=l,m[a+41|0]=l>>>8,m[a+42|0]=l>>>16,m[a+43|0]=l>>>24,m[a+44|0]=n,m[a+45|0]=n>>>8,m[a+46|0]=n>>>16,m[a+47|0]=n>>>24,m[a+64|0]=l,m[a+65|0]=l>>>8,m[a+66|0]=l>>>16,m[a+67|0]=l>>>24,m[a+68|0]=n,m[a+69|0]=n>>>8,m[a+70|0]=n>>>16,m[a+71|0]=n>>>24,m[a+72|0]=l,m[a+73|0]=l>>>8,m[a+74|0]=l>>>16,m[a+75|0]=l>>>24,m[a+76|0]=n,m[a+77|0]=n>>>8,m[a+78|0]=n>>>16,m[a+79|0]=n>>>24,m[a+96|0]=l,m[a+97|0]=l>>>8,m[a+98|0]=l>>>16,m[a+99|0]=l>>>24,m[a+100|0]=n,m[a+101|0]=n>>>8,m[a+102|0]=n>>>16,m[a+103|0]=n>>>24,m[a+104|0]=l,m[a+105|0]=l>>>8,m[a+106|0]=l>>>16,m[a+107|0]=l>>>24,m[a+108|0]=n,m[a+109|0]=n>>>8,m[a+110|0]=n>>>16,m[a+111|0]=n>>>24,m[a+128|0]=l,m[a+129|0]=l>>>8,m[a+130|0]=l>>>16,m[a+131|0]=l>>>24,m[a+132|0]=n,m[a+133|0]=n>>>8,m[a+134|0]=n>>>16,m[a+135|0]=n>>>24,m[a+136|0]=l,m[a+137|0]=l>>>8,m[a+138|0]=l>>>16,m[a+139|0]=l>>>24,m[a+140|0]=n,m[a+141|0]=n>>>8,m[a+142|0]=n>>>16,m[a+143|0]=n>>>24,m[a+160|0]=l,m[a+161|0]=l>>>8,m[a+162|0]=l>>>16,m[a+163|0]=l>>>24,m[a+164|0]=n,m[a+165|0]=n>>>8,m[a+166|0]=n>>>16,m[a+167|0]=n>>>24,m[a+168|0]=l,m[a+169|0]=l>>>8,m[a+170|0]=l>>>16,m[a+171|0]=l>>>24,m[a+172|0]=n,m[a+173|0]=n>>>8,m[a+174|0]=n>>>16,m[a+175|0]=n>>>24,m[a+192|0]=l,m[a+193|0]=l>>>8,m[a+194|0]=l>>>16,m[a+195|0]=l>>>24,m[a+196|0]=n,m[a+197|0]=n>>>8,m[a+198|0]=n>>>16,m[a+199|0]=n>>>24,m[a+200|0]=l,m[a+201|0]=l>>>8,m[a+202|0]=l>>>16,m[a+203|0]=l>>>24,m[a+204|0]=n,m[a+205|0]=n>>>8,m[a+206|0]=n>>>16,m[a+207|0]=n>>>24,m[a+232|0]=l,m[a+233|0]=l>>>8,m[a+234|0]=l>>>16,m[a+235|0]=l>>>24,m[a+236|0]=n,m[a+237|0]=n>>>8,m[a+238|0]=n>>>16,m[a+239|0]=n>>>24,m[a+224|0]=l,m[a+225|0]=l>>>8,m[a+226|0]=l>>>16,m[a+227|0]=l>>>24,m[a+228|0]=n,m[a+229|0]=n>>>8,m[a+230|0]=n>>>16,m[a+231|0]=n>>>24,m[a+264|0]=l,m[a+265|0]=l>>>8,m[a+266|0]=l>>>16,m[a+267|0]=l>>>24,m[a+268|0]=n,m[a+269|0]=n>>>8,m[a+270|0]=n>>>16,m[a+271|0]=n>>>24,m[a+256|0]=l,m[a+257|0]=l>>>8,m[a+258|0]=l>>>16,m[a+259|0]=l>>>24,m[a+260|0]=n,m[a+261|0]=n>>>8,m[a+262|0]=n>>>16,m[a+263|0]=n>>>24,m[a+296|0]=l,m[a+297|0]=l>>>8,m[a+298|0]=l>>>16,m[a+299|0]=l>>>24,m[a+300|0]=n,m[a+301|0]=n>>>8,m[a+302|0]=n>>>16,m[a+303|0]=n>>>24,m[a+288|0]=l,m[a+289|0]=l>>>8,m[a+290|0]=l>>>16,m[a+291|0]=l>>>24,m[a+292|0]=n,m[a+293|0]=n>>>8,m[a+294|0]=n>>>16,m[a+295|0]=n>>>24,m[a+328|0]=l,m[a+329|0]=l>>>8,m[a+330|0]=l>>>16,m[a+331|0]=l>>>24,m[a+332|0]=n,m[a+333|0]=n>>>8,m[a+334|0]=n>>>16,m[a+335|0]=n>>>24,m[a+320|0]=l,m[a+321|0]=l>>>8,m[a+322|0]=l>>>16,m[a+323|0]=l>>>24,m[a+324|0]=n,m[a+325|0]=n>>>8,m[a+326|0]=n>>>16,m[a+327|0]=n>>>24,m[a+360|0]=l,m[a+361|0]=l>>>8,m[a+362|0]=l>>>16,m[a+363|0]=l>>>24,m[a+364|0]=n,m[a+365|0]=n>>>8,m[a+366|0]=n>>>16,m[a+367|0]=n>>>24,m[a+352|0]=l,m[a+353|0]=l>>>8,m[a+354|0]=l>>>16,m[a+355|0]=l>>>24,m[a+356|0]=n,m[a+357|0]=n>>>8,m[a+358|0]=n>>>16,m[a+359|0]=n>>>24,m[a+392|0]=l,m[a+393|0]=l>>>8,m[a+394|0]=l>>>16,m[a+395|0]=l>>>24,m[a+396|0]=n,m[a+397|0]=n>>>8,m[a+398|0]=n>>>16,m[a+399|0]=n>>>24,m[a+384|0]=l,m[a+385|0]=l>>>8,m[a+386|0]=l>>>16,m[a+387|0]=l>>>24,m[a+388|0]=n,m[a+389|0]=n>>>8,m[a+390|0]=n>>>16,m[a+391|0]=n>>>24,m[a+424|0]=l,m[a+425|0]=l>>>8,m[a+426|0]=l>>>16,m[a+427|0]=l>>>24,m[a+428|0]=n,m[a+429|0]=n>>>8,m[a+430|0]=n>>>16,m[a+431|0]=n>>>24,m[a+416|0]=l,m[a+417|0]=l>>>8,m[a+418|0]=l>>>16,m[a+419|0]=l>>>24,m[a+420|0]=n,m[a+421|0]=n>>>8,m[a+422|0]=n>>>16,m[a+423|0]=n>>>24,m[a+456|0]=l,m[a+457|0]=l>>>8,m[a+458|0]=l>>>16,m[a+459|0]=l>>>24,m[a+460|0]=n,m[a+461|0]=n>>>8,m[a+462|0]=n>>>16,m[a+463|0]=n>>>24,m[a+448|0]=l,m[a+449|0]=l>>>8,m[a+450|0]=l>>>16,m[a+451|0]=l>>>24,m[a+452|0]=n,m[a+453|0]=n>>>8,m[a+454|0]=n>>>16,m[a+455|0]=n>>>24,m[a+488|0]=l,m[a+489|0]=l>>>8,m[a+490|0]=l>>>16,m[a+491|0]=l>>>24,m[a+492|0]=n,m[a+493|0]=n>>>8,m[a+494|0]=n>>>16,m[a+495|0]=n>>>24,m[a+480|0]=l,m[a+481|0]=l>>>8,m[a+482|0]=l>>>16,m[a+483|0]=l>>>24,m[a+484|0]=n,m[a+485|0]=n>>>8,m[a+486|0]=n>>>16,m[a+487|0]=n>>>24}function Wr(n,a,l,g,w){var x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0,gs=0,dl=0,su=0,Rc=0,Bf=0;rr=Mi-16|0,Mi=rr,st=g+120|0,se=g+24|0;e:{t:{r:{i:{o:{l:{n:{if(!l)break n;for(;;){if(!$n(se,1))break n;if(x=h[g+176>>2],He=$n(se,2),V=h[g+260>>2],D=1<<He,V&D)break l;h[g+260>>2]=D|V,x=ie(x,20)+g|0,J=x+196|0,h[J>>2]=0,V=x+192|0,h[V>>2]=a,D=x+188|0,h[D>>2]=n,h[x+180>>2]=He,xe=1,h[g+176>>2]=h[g+176>>2]+1;u:switch(He|0){case 0:case 1:if(Rr=x,x=$n(se,3)+2|0,h[Rr+184>>2]=x,Rr=h[D>>2],D=-1<<x^-1,Wr(Rr+D>>>x|0,D+h[V>>2]>>>x|0,0,g,J))continue;break l;case 3:E=$n(se,8)+1|0,n=0;a:{if((E|0)>16||(n=1,(E|0)>4))break a;n=(E|0)>2?2:3}if(V=h[D>>2],D=x+184|0,h[D>>2]=n,!Wr(E,1,0,g,J))break l;if(He=(V+(1<<n)|0)+-1|0,x=1<<(8>>>h[D>>2]),H=ia(x,0,4),H){if(V=h[J>>2],h[H>>2]=h[V>>2],xe=4,(E|0)>=2)for(D=E<<2,xe=(D|0)>5?D:5,E=4;D=E+H|0,m[D|0]=P[D+-4|0]+P[E+V|0],E=E+1|0,(xe|0)!=(E|0););D=x<<2,(D|0)>(xe|0)&&Xo(H+xe|0,0,D-xe|0),Fn(h[J>>2]),h[J>>2]=H}n=He>>>n|0,xe=(H|0)!=0;break;default:break u}if(!xe)break}break l}n:{if(!$n(se,1)||(ur=$n(se,4),ur+-1>>>0<11))break n;h[g>>2]=3,E=0;break i}h[rr+12>>2]=0;n:{u:{a:{if(!l){He=1,D=1;break a}if(He=1,D=1,!$n(se,1))break a;if(Lr=1,x=$n(se,3)+2|0,D=1<<x,V=(D+n|0)+-1>>>x|0,D=(a+D|0)+-1>>>x|0,!Wr(V,D,0,g,rr+12|0))break u;if(h[g+152>>2]=x,Pt=ie(D,V),(Pt|0)>=1)for(E=0,D=h[rr+12>>2];V=D+(E<<2)|0,x=P[V+1|0]|P[V+2|0]<<8,h[V>>2]=x,He=(x|0)<(He|0)?He:x+1|0,E=E+1|0,(Pt|0)!=(E|0););if(!((He|0)>1e3|(He|0)>(ie(n,a)|0))){D=He;break a}if(gi=ia(He,0,4),!gi){h[g>>2]=1,gi=0;break u}if(se=Xo(gi,255,He<<2),(Pt|0)<1){D=0;break a}for(E=0,J=h[rr+12>>2],D=0;H=J+(E<<2)|0,V=se+(h[H>>2]<<2)|0,x=h[V>>2],(x|0)==-1&&(h[V>>2]=D,x=D,D=x+1|0),h[H>>2]=x,E=E+1|0,(Pt|0)!=(E|0););}if(h[g+48>>2]){Lr=1;break u}if(Lr=1,Bf=1<<ur,Rc=(ur|0)>0?Bf+280|0:280,xe=Lu((Rc|0)>256?Rc:256,0,4),Gr=ie(ci[(ur<<1)+1184>>1],D),Gr=ia(Gr,Gr>>31,4),su=ia(D,D>>31,548),!(!su|(!Gr|!xe))){for(V=Gr;;){E=Ki;a:{s:{if(!gi||(E=h[(Ki<<2)+gi>>2],(E|0)!=-1))break s;if(Lr=1,!Uo(Rc,g,xe,0)||!Uo(256,g,xe,0)||!Uo(256,g,xe,0)||!Uo(256,g,xe,0))break n;if(Uo(40,g,xe,0))break a;break n}for(Oe=ie(E,548)+su|0,Lr=1,Wt=0,Un=0,ti=1,gs=0;;){if(h[(Wt<<2)+Oe>>2]=V,Pt=ci[(Wt<<1)+1208>>1]+((ur|0)>0?Wt?0:Bf:0)|0,x=Uo(Pt,g,xe,V),!x)break n;s:{if(!ti){ti=0;break s}if(!(Wt&2147483643))break s;ti=!P[V|0]}if(se=x<<2,J=P[V|0],Wt>>>0<=3){if(E=h[xe>>2],x=1,(Pt|0)>=2)for(;H=h[(x<<2)+xe>>2],E=(H|0)>(E|0)?H:E,x=x+1|0,(Pt|0)!=(x|0););Un=E+Un|0}if(V=V+se|0,gs=J+gs|0,Wt=Wt+1|0,(Wt|0)==5)break}h[Oe+28>>2]=0,h[Oe+20>>2]=ti;s:{if(!ti||(E=ci[h[Oe+8>>2]+2>>1]|ci[h[Oe+4>>2]+2>>1]<<16|ci[h[Oe+12>>2]+2>>1]<<24,h[Oe+24>>2]=E,gs)||(x=ci[h[Oe>>2]+2>>1],x>>>0>255))break s;h[Oe+28>>2]=1,h[Oe+24>>2]=E|x<<8,h[Oe+32>>2]=0;break a}if(h[Oe+32>>2]=(Un|0)<6,(Un|0)>5)break a;for(Lr=Oe+12|0,ti=Oe+8|0,Un=Oe+4|0,gs=h[Oe>>2],E=0;;){J=(E<<3)+Oe|0,dl=J+36|0,x=gs+(E<<2)|0,H=ci[x>>1]|ci[x+2>>1]<<16,x=H>>>16|0;s:{if(x>>>0>=256){h[dl>>2]=H&255|256,h[J+40>>2]=x;break s}H=H&255,h[dl>>2]=H,Wt=J+40|0,Pt=x<<8,h[Wt>>2]=Pt,se=E>>>H|0,x=h[Un>>2]+(se<<2)|0,J=P[x+2|0]|P[x+3|0]<<8,Rr=H,H=P[x|0],x=Rr+H|0,h[dl>>2]=x,Pt=Pt|J<<16,h[Wt>>2]=Pt,se=se>>>H|0,J=h[ti>>2]+(se<<2)|0,H=P[J+2|0]|P[J+3|0]<<8,Rr=x,x=P[J|0],J=Rr+x|0,h[dl>>2]=J,H=H|Pt,h[Wt>>2]=H,se=h[Lr>>2]+(se>>>x<<2)|0,x=P[se+2|0]|P[se+3|0]<<8,h[dl>>2]=J+P[se|0],h[Wt>>2]=H|x<<24}if(E=E+1|0,(E|0)==64)break}}if(Ki=Ki+1|0,(Ki|0)==(He|0))break}Ki=h[rr+12>>2],h[g+172>>2]=Gr,h[g+168>>2]=su,h[g+164>>2]=D,h[g+160>>2]=Ki,Lr=0;break n}h[g>>2]=1;break n}xe=0}if(Fn(xe),Fn(gi),!Lr)break o;Fn(h[rr+12>>2]),Fn(Gr),G0(su)}h[g>>2]=3,E=0;break i}o:{if((ur|0)>=1){if(h[g+120>>2]=1<<ur,Ir(g+124|0,ur))break o;h[g>>2]=1,E=0;break i}h[st>>2]=0}if(h[g+104>>2]=a,h[g+100>>2]=n,D=h[g+152>>2],h[g+148>>2]=D?-1<<D^-1:-1,h[g+156>>2]=((1<<D)+n|0)+-1>>>D,l){h[g+4>>2]=1,E=0;break r}if(E=ia(sn(n,n>>31,a,a>>31),bi,4),!E){h[g>>2]=1,E=0;break i}if(!Hn(g,E,n,a,a,0))break i;if(!h[g+48>>2])break r}Fn(E),E=0;break t}if(w&&(h[w>>2]=E),h[g+112>>2]=0,E=1,l)break e}Fn(h[g+160>>2]),Fn(h[g+172>>2]),G0(h[g+168>>2]),Ff(g+124|0),Ff(g+136|0),h[st+48>>2]=0,h[st+52>>2]=0,h[st+40>>2]=0,h[st+44>>2]=0,h[st+32>>2]=0,h[st+36>>2]=0,h[st+24>>2]=0,h[st+28>>2]=0,h[st+16>>2]=0,h[st+20>>2]=0,h[st+8>>2]=0,h[st+12>>2]=0,h[st>>2]=0,h[st+4>>2]=0}return Mi=rr+16|0,E}function Di(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;se=P[n|0],J=P[l|0],xe=P[g|0],Oe=P[w|0],Pt=P[x|0],m[E|0]=255,se=ie(se,19077)>>>8|0,Oe=Oe|Pt<<16,J=J|xe<<16,xe=(Oe+ie(J,3)|0)+131074|0,Pt=xe>>>2&255,Wt=se+(ie(Pt,33050)>>>8|0)|0,V=Wt+-17685|0,m[E+3|0]=V>>>0<16384?V>>>6|0:Wt>>>0<17685?0:255,xe=xe>>>18&255,Wt=se+(ie(xe,26149)>>>8|0)|0,V=Wt+-14234|0,m[E+1|0]=V>>>0<16384?V>>>6|0:Wt>>>0<14234?0:255,se=se-(ie(Pt,6419)>>>8|0)-(ie(xe,13320)>>>8)|0,xe=se+8708|0,m[E+2|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255,a&&(se=P[a|0],m[D|0]=255,se=ie(se,19077)>>>8|0,xe=(ie(Oe,3)+J|0)+131074|0,Pt=xe>>>2&255,Wt=se+(ie(Pt,33050)>>>8|0)|0,V=Wt+-17685|0,m[D+3|0]=V>>>0<16384?V>>>6|0:Wt>>>0<17685?0:255,xe=xe>>>18&255,Wt=se+(ie(xe,26149)>>>8|0)|0,V=Wt+-14234|0,m[D+1|0]=V>>>0<16384?V>>>6|0:Wt>>>0<14234?0:255,se=se-(ie(Pt,6419)>>>8|0)-(ie(xe,13320)>>>8)|0,xe=se+8708|0,m[D+2|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255),Wt=H+-1|0;e:{if((H|0)<3){se=Oe,xe=J;break e}for(se=Wt>>1,Un=(se|0)>1?se:1,Pt=1;gi=Pt<<1,ur=gi+-1|0,He=P[ur+n|0],xe=P[l+Pt|0],rr=P[g+Pt|0],se=P[w+Pt|0],ti=P[x+Pt|0],Ki=ur<<2,V=Ki+E|0,m[V|0]=255,se=se|ti<<16,xe=xe|rr<<16,ti=Oe+xe|0,rr=(se+(ti+J|0)|0)+524296|0,He=ie(He,19077)>>>8|0,ti=rr+(ti<<1)>>>3|0,Lr=ti+J|0,Rr=Lr>>>1&255,Gr=He+(ie(Rr,33050)>>>8|0)|0,st=Gr+-17685|0,m[V+3|0]=st>>>0<16384?st>>>6|0:Gr>>>0<17685?0:255,Lr=Lr>>>17&255,Gr=He+(ie(Lr,26149)>>>8|0)|0,st=Gr+-14234|0,m[V+1|0]=st>>>0<16384?st>>>6|0:Gr>>>0<14234?0:255,st=V,V=He-(ie(Rr,6419)>>>8|0)-(ie(Lr,13320)>>>8)|0,He=V+8708|0,m[st+2|0]=He>>>0<16384?He>>>6|0:(V|0)<-8708?0:255,He=P[n+gi|0],Lr=Pt<<3,V=Lr+E|0,m[V|0]=255,rr=rr+(J+se<<1)>>>3|0,Rr=rr+xe|0,Gr=Rr>>>1&255,J=ie(He,19077)>>>8|0,He=(ie(Gr,33050)>>>8|0)+J|0,st=He+-17685|0,m[V+3|0]=st>>>0<16384?st>>>6|0:He>>>0<17685?0:255,He=Rr>>>17&255,Rr=J+(ie(He,26149)>>>8|0)|0,st=Rr+-14234|0,m[V+1|0]=st>>>0<16384?st>>>6|0:Rr>>>0<14234?0:255,st=V,J=J-(ie(Gr,6419)>>>8|0)-(ie(He,13320)>>>8)|0,V=J+8708|0,m[st+2|0]=V>>>0<16384?V>>>6|0:(J|0)<-8708?0:255,a&&(V=P[a+ur|0],J=D+Ki|0,m[J|0]=255,ur=Oe+rr|0,rr=ur>>>1&255,Oe=ie(V,19077)>>>8|0,V=(ie(rr,33050)>>>8|0)+Oe|0,He=V+-17685|0,m[J+3|0]=He>>>0<16384?He>>>6|0:V>>>0<17685?0:255,V=ur>>>17&255,ur=Oe+(ie(V,26149)>>>8|0)|0,He=ur+-14234|0,m[J+1|0]=He>>>0<16384?He>>>6|0:ur>>>0<14234?0:255,st=J,J=Oe-(ie(rr,6419)>>>8|0)-(ie(V,13320)>>>8)|0,Oe=J+8708|0,m[st+2|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255,Oe=P[a+gi|0],J=D+Lr|0,m[J|0]=255,Oe=ie(Oe,19077)>>>8|0,V=se+ti|0,gi=V>>>1&255,ur=Oe+(ie(gi,33050)>>>8|0)|0,rr=ur+-17685|0,m[J+3|0]=rr>>>0<16384?rr>>>6|0:ur>>>0<17685?0:255,V=V>>>17&255,ur=Oe+(ie(V,26149)>>>8|0)|0,rr=ur+-14234|0,m[J+1|0]=rr>>>0<16384?rr>>>6|0:ur>>>0<14234?0:255,st=J,J=Oe-(ie(gi,6419)>>>8|0)-(ie(V,13320)>>>8)|0,Oe=J+8708|0,m[st+2|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255),V=(Pt|0)!=(Un|0),Pt=Pt+1|0,J=xe,Oe=se,!!V;);}e:{if(H&1||(l=P[n+Wt|0],g=Wt<<2,n=g+E|0,m[n|0]=255,l=ie(l,19077)>>>8|0,w=(ie(xe,3)+se|0)+131074|0,x=w>>>2&255,E=l+(ie(x,33050)>>>8|0)|0,H=E+-17685|0,m[n+3|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,w=w>>>18&255,E=l+(ie(w,26149)>>>8|0)|0,H=E+-14234|0,m[n+1|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=n,n=l-(ie(x,6419)>>>8|0)-(ie(w,13320)>>>8)|0,l=n+8708|0,m[E+2|0]=l>>>0<16384?l>>>6|0:(n|0)<-8708?0:255,!a))break e;a=P[a+Wt|0],n=g+D|0,m[n|0]=255,a=ie(a,19077)>>>8|0,l=(ie(se,3)+xe|0)+131074|0,g=l>>>2&255,w=a+(ie(g,33050)>>>8|0)|0,x=w+-17685|0,m[n+3|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,l=l>>>18&255,w=a+(ie(l,26149)>>>8|0)|0,x=w+-14234|0,m[n+1|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,w=n,n=a-(ie(g,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[w+2|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255}}function fi(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;se=P[n|0],J=P[l|0],xe=P[g|0],Oe=P[w|0],Pt=P[x|0],m[E+3|0]=255,se=ie(se,19077)>>>8|0,Oe=Oe|Pt<<16,J=J|xe<<16,xe=(Oe+ie(J,3)|0)+131074|0,Pt=xe>>>2&255,Wt=se+(ie(Pt,33050)>>>8|0)|0,V=Wt+-17685|0,m[E+2|0]=V>>>0<16384?V>>>6|0:Wt>>>0<17685?0:255,xe=xe>>>18&255,Wt=se+(ie(xe,26149)>>>8|0)|0,V=Wt+-14234|0,m[E|0]=V>>>0<16384?V>>>6|0:Wt>>>0<14234?0:255,se=se-(ie(Pt,6419)>>>8|0)-(ie(xe,13320)>>>8)|0,xe=se+8708|0,m[E+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255,a&&(se=P[a|0],m[D+3|0]=255,se=ie(se,19077)>>>8|0,xe=(ie(Oe,3)+J|0)+131074|0,Pt=xe>>>2&255,Wt=se+(ie(Pt,33050)>>>8|0)|0,V=Wt+-17685|0,m[D+2|0]=V>>>0<16384?V>>>6|0:Wt>>>0<17685?0:255,xe=xe>>>18&255,Wt=se+(ie(xe,26149)>>>8|0)|0,V=Wt+-14234|0,m[D|0]=V>>>0<16384?V>>>6|0:Wt>>>0<14234?0:255,se=se-(ie(Pt,6419)>>>8|0)-(ie(xe,13320)>>>8)|0,xe=se+8708|0,m[D+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255),Wt=H+-1|0;e:{if((H|0)<3){se=Oe,xe=J;break e}for(se=Wt>>1,Un=(se|0)>1?se:1,Pt=1;gi=Pt<<1,ur=gi+-1|0,He=P[ur+n|0],xe=P[l+Pt|0],rr=P[g+Pt|0],se=P[w+Pt|0],ti=P[x+Pt|0],Ki=ur<<2,V=Ki+E|0,m[V+3|0]=255,se=se|ti<<16,xe=xe|rr<<16,ti=Oe+xe|0,rr=(se+(ti+J|0)|0)+524296|0,He=ie(He,19077)>>>8|0,ti=rr+(ti<<1)>>>3|0,Lr=ti+J|0,Rr=Lr>>>1&255,Gr=He+(ie(Rr,33050)>>>8|0)|0,st=Gr+-17685|0,m[V+2|0]=st>>>0<16384?st>>>6|0:Gr>>>0<17685?0:255,Lr=Lr>>>17&255,Gr=He+(ie(Lr,26149)>>>8|0)|0,st=Gr+-14234|0,m[V|0]=st>>>0<16384?st>>>6|0:Gr>>>0<14234?0:255,st=V,V=He-(ie(Rr,6419)>>>8|0)-(ie(Lr,13320)>>>8)|0,He=V+8708|0,m[st+1|0]=He>>>0<16384?He>>>6|0:(V|0)<-8708?0:255,He=P[n+gi|0],Lr=Pt<<3,V=Lr+E|0,m[V+3|0]=255,rr=rr+(J+se<<1)>>>3|0,Rr=rr+xe|0,Gr=Rr>>>1&255,J=ie(He,19077)>>>8|0,He=(ie(Gr,33050)>>>8|0)+J|0,st=He+-17685|0,m[V+2|0]=st>>>0<16384?st>>>6|0:He>>>0<17685?0:255,He=Rr>>>17&255,Rr=J+(ie(He,26149)>>>8|0)|0,st=Rr+-14234|0,m[V|0]=st>>>0<16384?st>>>6|0:Rr>>>0<14234?0:255,st=V,J=J-(ie(Gr,6419)>>>8|0)-(ie(He,13320)>>>8)|0,V=J+8708|0,m[st+1|0]=V>>>0<16384?V>>>6|0:(J|0)<-8708?0:255,a&&(V=P[a+ur|0],J=D+Ki|0,m[J+3|0]=255,ur=Oe+rr|0,rr=ur>>>1&255,Oe=ie(V,19077)>>>8|0,V=(ie(rr,33050)>>>8|0)+Oe|0,He=V+-17685|0,m[J+2|0]=He>>>0<16384?He>>>6|0:V>>>0<17685?0:255,V=ur>>>17&255,ur=Oe+(ie(V,26149)>>>8|0)|0,He=ur+-14234|0,m[J|0]=He>>>0<16384?He>>>6|0:ur>>>0<14234?0:255,st=J,J=Oe-(ie(rr,6419)>>>8|0)-(ie(V,13320)>>>8)|0,Oe=J+8708|0,m[st+1|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255,Oe=P[a+gi|0],J=D+Lr|0,m[J+3|0]=255,Oe=ie(Oe,19077)>>>8|0,V=se+ti|0,gi=V>>>1&255,ur=Oe+(ie(gi,33050)>>>8|0)|0,rr=ur+-17685|0,m[J+2|0]=rr>>>0<16384?rr>>>6|0:ur>>>0<17685?0:255,V=V>>>17&255,ur=Oe+(ie(V,26149)>>>8|0)|0,rr=ur+-14234|0,m[J|0]=rr>>>0<16384?rr>>>6|0:ur>>>0<14234?0:255,st=J,J=Oe-(ie(gi,6419)>>>8|0)-(ie(V,13320)>>>8)|0,Oe=J+8708|0,m[st+1|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255),V=(Pt|0)!=(Un|0),Pt=Pt+1|0,J=xe,Oe=se,!!V;);}e:{if(H&1||(l=P[n+Wt|0],g=Wt<<2,n=g+E|0,m[n+3|0]=255,l=ie(l,19077)>>>8|0,w=(ie(xe,3)+se|0)+131074|0,x=w>>>2&255,E=l+(ie(x,33050)>>>8|0)|0,H=E+-17685|0,m[n+2|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,w=w>>>18&255,E=l+(ie(w,26149)>>>8|0)|0,H=E+-14234|0,m[n|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=n,n=l-(ie(x,6419)>>>8|0)-(ie(w,13320)>>>8)|0,l=n+8708|0,m[E+1|0]=l>>>0<16384?l>>>6|0:(n|0)<-8708?0:255,!a))break e;a=P[a+Wt|0],n=g+D|0,m[n+3|0]=255,a=ie(a,19077)>>>8|0,l=(ie(se,3)+xe|0)+131074|0,g=l>>>2&255,w=a+(ie(g,33050)>>>8|0)|0,x=w+-17685|0,m[n+2|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,l=l>>>18&255,w=a+(ie(l,26149)>>>8|0)|0,x=w+-14234|0,m[n|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,w=n,n=a-(ie(g,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[w+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255}}function xn(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;se=P[n|0],J=P[l|0],xe=P[g|0],Oe=P[w|0],Pt=P[x|0],m[E+3|0]=255,se=ie(se,19077)>>>8|0,Oe=Oe|Pt<<16,J=J|xe<<16,xe=(Oe+ie(J,3)|0)+131074|0,Pt=xe>>>18&255,Wt=se+(ie(Pt,26149)>>>8|0)|0,V=Wt+-14234|0,m[E+2|0]=V>>>0<16384?V>>>6|0:Wt>>>0<14234?0:255,xe=xe>>>2&255,Wt=se+(ie(xe,33050)>>>8|0)|0,V=Wt+-17685|0,m[E|0]=V>>>0<16384?V>>>6|0:Wt>>>0<17685?0:255,se=se-(ie(xe,6419)>>>8|0)-(ie(Pt,13320)>>>8)|0,xe=se+8708|0,m[E+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255,a&&(se=P[a|0],m[D+3|0]=255,se=ie(se,19077)>>>8|0,xe=(ie(Oe,3)+J|0)+131074|0,Pt=xe>>>18&255,Wt=se+(ie(Pt,26149)>>>8|0)|0,V=Wt+-14234|0,m[D+2|0]=V>>>0<16384?V>>>6|0:Wt>>>0<14234?0:255,xe=xe>>>2&255,Wt=se+(ie(xe,33050)>>>8|0)|0,V=Wt+-17685|0,m[D|0]=V>>>0<16384?V>>>6|0:Wt>>>0<17685?0:255,se=se-(ie(xe,6419)>>>8|0)-(ie(Pt,13320)>>>8)|0,xe=se+8708|0,m[D+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255),Wt=H+-1|0;e:{if((H|0)<3){se=Oe,xe=J;break e}for(se=Wt>>1,Un=(se|0)>1?se:1,Pt=1;gi=Pt<<1,ur=gi+-1|0,He=P[ur+n|0],xe=P[l+Pt|0],rr=P[g+Pt|0],se=P[w+Pt|0],ti=P[x+Pt|0],Ki=ur<<2,V=Ki+E|0,m[V+3|0]=255,se=se|ti<<16,xe=xe|rr<<16,ti=Oe+xe|0,rr=(se+(ti+J|0)|0)+524296|0,He=ie(He,19077)>>>8|0,ti=rr+(ti<<1)>>>3|0,Lr=ti+J|0,Rr=Lr>>>17&255,Gr=He+(ie(Rr,26149)>>>8|0)|0,st=Gr+-14234|0,m[V+2|0]=st>>>0<16384?st>>>6|0:Gr>>>0<14234?0:255,Lr=Lr>>>1&255,Gr=He+(ie(Lr,33050)>>>8|0)|0,st=Gr+-17685|0,m[V|0]=st>>>0<16384?st>>>6|0:Gr>>>0<17685?0:255,st=V,V=He-(ie(Lr,6419)>>>8|0)-(ie(Rr,13320)>>>8)|0,He=V+8708|0,m[st+1|0]=He>>>0<16384?He>>>6|0:(V|0)<-8708?0:255,He=P[n+gi|0],Lr=Pt<<3,V=Lr+E|0,m[V+3|0]=255,rr=rr+(J+se<<1)>>>3|0,Rr=rr+xe|0,Gr=Rr>>>17&255,J=ie(He,19077)>>>8|0,He=(ie(Gr,26149)>>>8|0)+J|0,st=He+-14234|0,m[V+2|0]=st>>>0<16384?st>>>6|0:He>>>0<14234?0:255,He=Rr>>>1&255,Rr=J+(ie(He,33050)>>>8|0)|0,st=Rr+-17685|0,m[V|0]=st>>>0<16384?st>>>6|0:Rr>>>0<17685?0:255,st=V,J=J-(ie(He,6419)>>>8|0)-(ie(Gr,13320)>>>8)|0,V=J+8708|0,m[st+1|0]=V>>>0<16384?V>>>6|0:(J|0)<-8708?0:255,a&&(V=P[a+ur|0],J=D+Ki|0,m[J+3|0]=255,ur=Oe+rr|0,rr=ur>>>17&255,Oe=ie(V,19077)>>>8|0,V=(ie(rr,26149)>>>8|0)+Oe|0,He=V+-14234|0,m[J+2|0]=He>>>0<16384?He>>>6|0:V>>>0<14234?0:255,V=ur>>>1&255,ur=Oe+(ie(V,33050)>>>8|0)|0,He=ur+-17685|0,m[J|0]=He>>>0<16384?He>>>6|0:ur>>>0<17685?0:255,st=J,J=Oe-(ie(V,6419)>>>8|0)-(ie(rr,13320)>>>8)|0,Oe=J+8708|0,m[st+1|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255,Oe=P[a+gi|0],J=D+Lr|0,m[J+3|0]=255,Oe=ie(Oe,19077)>>>8|0,V=se+ti|0,gi=V>>>17&255,ur=Oe+(ie(gi,26149)>>>8|0)|0,rr=ur+-14234|0,m[J+2|0]=rr>>>0<16384?rr>>>6|0:ur>>>0<14234?0:255,V=V>>>1&255,ur=Oe+(ie(V,33050)>>>8|0)|0,rr=ur+-17685|0,m[J|0]=rr>>>0<16384?rr>>>6|0:ur>>>0<17685?0:255,st=J,J=Oe-(ie(V,6419)>>>8|0)-(ie(gi,13320)>>>8)|0,Oe=J+8708|0,m[st+1|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255),V=(Pt|0)!=(Un|0),Pt=Pt+1|0,J=xe,Oe=se,!!V;);}e:{if(H&1||(l=P[n+Wt|0],g=Wt<<2,n=g+E|0,m[n+3|0]=255,l=ie(l,19077)>>>8|0,w=(ie(xe,3)+se|0)+131074|0,x=w>>>18&255,E=l+(ie(x,26149)>>>8|0)|0,H=E+-14234|0,m[n+2|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,w=w>>>2&255,E=l+(ie(w,33050)>>>8|0)|0,H=E+-17685|0,m[n|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=n,n=l-(ie(w,6419)>>>8|0)-(ie(x,13320)>>>8)|0,l=n+8708|0,m[E+1|0]=l>>>0<16384?l>>>6|0:(n|0)<-8708?0:255,!a))break e;a=P[a+Wt|0],n=g+D|0,m[n+3|0]=255,a=ie(a,19077)>>>8|0,l=(ie(se,3)+xe|0)+131074|0,g=l>>>18&255,w=a+(ie(g,26149)>>>8|0)|0,x=w+-14234|0,m[n+2|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,l=l>>>2&255,w=a+(ie(l,33050)>>>8|0)|0,x=w+-17685|0,m[n|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,w=n,n=a-(ie(l,6419)>>>8|0)-(ie(g,13320)>>>8)|0,a=n+8708|0,m[w+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255}}function Wi(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;xe=ie(P[n|0],19077)>>>8|0,Oe=P[w|0]|P[x|0]<<16,V=P[l|0]|P[g|0]<<16,se=(Oe+ie(V,3)|0)+131074|0,Pt=se>>>2&255,se=se>>>18|0,st=xe-(ie(Pt,6419)>>>8|0)-(ie(se,13320)>>>8)|0,J=st+8708|0,st=J>>>0<16384?J>>6:(st|0)<-8708?0:255,se=xe+(ie(se,26149)>>>8|0)|0,J=se+-14234|0,m[E|0]=st>>>5|(J>>>0<16384?J>>>6|0:se>>>0<14234?0:248)&248,xe=xe+(ie(Pt,33050)>>>8|0)|0,se=xe+-17685|0,m[E+1|0]=st<<3&224|(se>>>0<16384?se>>>9|0:xe>>>0<17685?0:31),a&&(xe=ie(P[a|0],19077)>>>8|0,se=(ie(Oe,3)+V|0)+131074|0,Pt=se>>>2&255,se=se>>>18|0,st=xe-(ie(Pt,6419)>>>8|0)-(ie(se,13320)>>>8)|0,J=st+8708|0,st=J>>>0<16384?J>>6:(st|0)<-8708?0:255,se=xe+(ie(se,26149)>>>8|0)|0,J=se+-14234|0,m[D|0]=st>>>5|(J>>>0<16384?J>>>6|0:se>>>0<14234?0:248)&248,xe=xe+(ie(Pt,33050)>>>8|0)|0,se=xe+-17685|0,m[D+1|0]=st<<3&224|(se>>>0<16384?se>>>9|0:xe>>>0<17685?0:31)),st=H+-1|0;e:{if((H|0)<3){xe=Oe,se=V;break e}for(xe=st>>1,Un=(xe|0)>1?xe:1,Pt=1;xe=P[w+Pt|0]|P[x+Pt|0]<<16,se=P[l+Pt|0]|P[g+Pt|0]<<16,gi=se+Oe|0,J=(xe+(gi+V|0)|0)+524296|0,ti=Pt<<1,Wt=ti+-1|0,Rr=Wt<<1,Gr=Rr+E|0,He=ie(P[n+Wt|0],19077)>>>8|0,gi=J+(gi<<1)>>>3|0,ur=gi+V|0,Ki=ur>>>1&255,ur=ur>>>17|0,Lr=He-(ie(Ki,6419)>>>8|0)-(ie(ur,13320)>>>8)|0,rr=Lr+8708|0,Lr=rr>>>0<16384?rr>>6:(Lr|0)<-8708?0:255,ur=He+(ie(ur,26149)>>>8|0)|0,rr=ur+-14234|0,m[Gr|0]=Lr>>>5|(rr>>>0<16384?rr>>>6|0:ur>>>0<14234?0:248)&248,rr=Gr,He=He+(ie(Ki,33050)>>>8|0)|0,Gr=He+-17685|0,m[rr+1|0]=Lr<<3&224|(Gr>>>0<16384?Gr>>>9|0:He>>>0<17685?0:31),Gr=Pt<<2,ur=Gr+E|0,He=ie(P[n+ti|0],19077)>>>8|0,J=J+(V+xe<<1)>>>3|0,V=J+se|0,Ki=V>>>1&255,V=V>>>17|0,Lr=He-(ie(Ki,6419)>>>8|0)-(ie(V,13320)>>>8)|0,rr=Lr+8708|0,Lr=rr>>>0<16384?rr>>6:(Lr|0)<-8708?0:255,V=He+(ie(V,26149)>>>8|0)|0,rr=V+-14234|0,m[ur|0]=Lr>>>5|(rr>>>0<16384?rr>>>6|0:V>>>0<14234?0:248)&248,V=He+(ie(Ki,33050)>>>8|0)|0,He=V+-17685|0,m[ur+1|0]=Lr<<3&224|(He>>>0<16384?He>>>9|0:V>>>0<17685?0:31),a&&(He=D+Rr|0,V=ie(P[a+Wt|0],19077)>>>8|0,Oe=J+Oe|0,J=Oe>>>1&255,Oe=Oe>>>17|0,Wt=V-(ie(J,6419)>>>8|0)-(ie(Oe,13320)>>>8)|0,Rr=Wt+8708|0,Wt=Rr>>>0<16384?Rr>>6:(Wt|0)<-8708?0:255,Oe=V+(ie(Oe,26149)>>>8|0)|0,Rr=Oe+-14234|0,m[He|0]=Wt>>>5|(Rr>>>0<16384?Rr>>>6|0:Oe>>>0<14234?0:248)&248,V=V+(ie(J,33050)>>>8|0)|0,Oe=V+-17685|0,m[He+1|0]=Wt<<3&224|(Oe>>>0<16384?Oe>>>9|0:V>>>0<17685?0:31),Oe=D+Gr|0,V=ie(P[a+ti|0],19077)>>>8|0,J=xe+gi|0,ti=J>>>1&255,J=J>>>17|0,Wt=V-(ie(ti,6419)>>>8|0)-(ie(J,13320)>>>8)|0,He=Wt+8708|0,Wt=He>>>0<16384?He>>6:(Wt|0)<-8708?0:255,J=V+(ie(J,26149)>>>8|0)|0,He=J+-14234|0,m[Oe|0]=Wt>>>5|(He>>>0<16384?He>>>6|0:J>>>0<14234?0:248)&248,rr=Oe,V=V+(ie(ti,33050)>>>8|0)|0,Oe=V+-17685|0,m[rr+1|0]=Wt<<3&224|(Oe>>>0<16384?Oe>>>9|0:V>>>0<17685?0:31)),J=(Pt|0)!=(Un|0),Pt=Pt+1|0,V=se,Oe=xe,!!J;);}e:{if(H&1||(l=st<<1,g=l+E|0,n=ie(P[n+st|0],19077)>>>8|0,w=(ie(se,3)+xe|0)+131074|0,x=w>>>2&255,w=w>>>18|0,E=n-(ie(x,6419)>>>8|0)-(ie(w,13320)>>>8)|0,H=E+8708|0,E=H>>>0<16384?H>>6:(E|0)<-8708?0:255,w=n+(ie(w,26149)>>>8|0)|0,H=w+-14234|0,m[g|0]=E>>>5|(H>>>0<16384?H>>>6|0:w>>>0<14234?0:248)&248,w=g,n=n+(ie(x,33050)>>>8|0)|0,g=n+-17685|0,m[w+1|0]=E<<3&224|(g>>>0<16384?g>>>9|0:n>>>0<17685?0:31),!a))break e;l=l+D|0,n=ie(P[a+st|0],19077)>>>8|0,a=(ie(xe,3)+se|0)+131074|0,g=a>>>2&255,a=a>>>18|0,w=n-(ie(g,6419)>>>8|0)-(ie(a,13320)>>>8)|0,x=w+8708|0,w=x>>>0<16384?x>>6:(w|0)<-8708?0:255,a=n+(ie(a,26149)>>>8|0)|0,x=a+-14234|0,m[l|0]=w>>>5|(x>>>0<16384?x>>>6|0:a>>>0<14234?0:248)&248,n=n+(ie(g,33050)>>>8|0)|0,a=n+-17685|0,m[l+1|0]=w<<3&224|(a>>>0<16384?a>>>9|0:n>>>0<17685?0:31)}}function nn(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;se=ie(P[n|0],19077)>>>8|0,xe=P[w|0]|P[x|0]<<16,V=P[l|0]|P[g|0]<<16,Oe=(xe+ie(V,3)|0)+131074|0,st=Oe>>>2&255,Pt=se+(ie(st,33050)>>>8|0)|0,J=Pt+-17685|0,m[E+1|0]=(J>>>0<16384?J>>>6|0:Pt>>>0<17685?0:240)|15,Oe=Oe>>>18|0,st=se-(ie(st,6419)>>>8|0)-(ie(Oe,13320)>>>8)|0,Pt=st+8708|0,se=se+(ie(Oe,26149)>>>8|0)|0,Oe=se+-14234|0,m[E|0]=(Pt>>>0<16384?Pt>>>10|0:(st|0)<-8708?0:15)|(Oe>>>0<16384?Oe>>>6|0:se>>>0<14234?0:240)&240,a&&(se=ie(P[a|0],19077)>>>8|0,Oe=(ie(xe,3)+V|0)+131074|0,st=Oe>>>2&255,Pt=se+(ie(st,33050)>>>8|0)|0,J=Pt+-17685|0,m[D+1|0]=(J>>>0<16384?J>>>6|0:Pt>>>0<17685?0:240)|15,Oe=Oe>>>18|0,Pt=se+(ie(Oe,26149)>>>8|0)|0,J=Pt+-14234|0,se=se-(ie(st,6419)>>>8|0)-(ie(Oe,13320)>>>8)|0,Oe=se+8708|0,m[D|0]=(J>>>0<16384?J>>>6|0:Pt>>>0<14234?0:240)&240|(Oe>>>0<16384?Oe>>>10|0:(se|0)<-8708?0:15)),Pt=H+-1|0;e:{if((H|0)<3){se=xe,Oe=V;break e}for(se=Pt>>1,Un=(se|0)>1?se:1,st=1;se=P[w+st|0]|P[x+st|0]<<16,Oe=P[l+st|0]|P[g+st|0]<<16,Wt=Oe+xe|0,J=(se+(Wt+V|0)|0)+524296|0,Rr=st<<1,rr=Rr+-1|0,ti=rr<<1,He=ti+E|0,Ki=J+(Wt<<1)>>>3|0,ur=Ki+V|0,Lr=ur>>>1&255,Wt=ie(P[n+rr|0],19077)>>>8|0,gi=(ie(Lr,33050)>>>8|0)+Wt|0,Gr=gi+-17685|0,m[He+1|0]=(Gr>>>0<16384?Gr>>>6|0:gi>>>0<17685?0:240)|15,Gr=He,He=ur>>>17|0,ur=Wt-(ie(Lr,6419)>>>8|0)-(ie(He,13320)>>>8)|0,Lr=ur+8708|0,Wt=Wt+(ie(He,26149)>>>8|0)|0,He=Wt+-14234|0,m[Gr|0]=(Lr>>>0<16384?Lr>>>10|0:(ur|0)<-8708?0:15)|(He>>>0<16384?He>>>6|0:Wt>>>0<14234?0:240)&240,Wt=st<<2,He=Wt+E|0,J=J+(V+se<<1)>>>3|0,ur=J+Oe|0,Lr=ur>>>1&255,V=ie(P[n+Rr|0],19077)>>>8|0,gi=(ie(Lr,33050)>>>8|0)+V|0,Gr=gi+-17685|0,m[He+1|0]=(Gr>>>0<16384?Gr>>>6|0:gi>>>0<17685?0:240)|15,Gr=He,He=ur>>>17|0,ur=V-(ie(Lr,6419)>>>8|0)-(ie(He,13320)>>>8)|0,Lr=ur+8708|0,V=V+(ie(He,26149)>>>8|0)|0,He=V+-14234|0,m[Gr|0]=(Lr>>>0<16384?Lr>>>10|0:(ur|0)<-8708?0:15)|(He>>>0<16384?He>>>6|0:V>>>0<14234?0:240)&240,a&&(ti=D+ti|0,V=ie(P[a+rr|0],19077)>>>8|0,xe=J+xe|0,J=xe>>>1&255,rr=V+(ie(J,33050)>>>8|0)|0,He=rr+-17685|0,m[ti+1|0]=(He>>>0<16384?He>>>6|0:rr>>>0<17685?0:240)|15,He=ti,xe=xe>>>17|0,rr=V+(ie(xe,26149)>>>8|0)|0,ti=rr+-14234|0,V=V-(ie(J,6419)>>>8|0)-(ie(xe,13320)>>>8)|0,xe=V+8708|0,m[He|0]=(ti>>>0<16384?ti>>>6|0:rr>>>0<14234?0:240)&240|(xe>>>0<16384?xe>>>10|0:(V|0)<-8708?0:15),xe=D+Wt|0,V=ie(P[a+Rr|0],19077)>>>8|0,J=se+Ki|0,rr=J>>>1&255,Rr=V+(ie(rr,33050)>>>8|0)|0,Wt=Rr+-17685|0,m[xe+1|0]=(Wt>>>0<16384?Wt>>>6|0:Rr>>>0<17685?0:240)|15,He=xe,xe=J>>>17|0,J=V+(ie(xe,26149)>>>8|0)|0,Rr=J+-14234|0,V=V-(ie(rr,6419)>>>8|0)-(ie(xe,13320)>>>8)|0,xe=V+8708|0,m[He|0]=(Rr>>>0<16384?Rr>>>6|0:J>>>0<14234?0:240)&240|(xe>>>0<16384?xe>>>10|0:(V|0)<-8708?0:15)),J=(st|0)!=(Un|0),st=st+1|0,V=Oe,xe=se,!!J;);}e:{if(H&1||(l=Pt<<1,g=l+E|0,n=ie(P[n+Pt|0],19077)>>>8|0,w=(ie(Oe,3)+se|0)+131074|0,x=w>>>2&255,E=n+(ie(x,33050)>>>8|0)|0,H=E+-17685|0,m[g+1|0]=(H>>>0<16384?H>>>6|0:E>>>0<17685?0:240)|15,H=g,g=w>>>18|0,w=n+(ie(g,26149)>>>8|0)|0,E=w+-14234|0,n=n-(ie(x,6419)>>>8|0)-(ie(g,13320)>>>8)|0,g=n+8708|0,m[H|0]=(E>>>0<16384?E>>>6|0:w>>>0<14234?0:240)&240|(g>>>0<16384?g>>>10|0:(n|0)<-8708?0:15),!a))break e;l=l+D|0,n=ie(P[a+Pt|0],19077)>>>8|0,g=(ie(se,3)+Oe|0)+131074|0,w=g>>>2&255,a=n+(ie(w,33050)>>>8|0)|0,x=a+-17685|0,m[l+1|0]=(x>>>0<16384?x>>>6|0:a>>>0<17685?0:240)|15,x=l,a=g>>>18|0,l=n+(ie(a,26149)>>>8|0)|0,g=l+-14234|0,n=n-(ie(w,6419)>>>8|0)-(ie(a,13320)>>>8)|0,a=n+8708|0,m[x|0]=(g>>>0<16384?g>>>6|0:l>>>0<14234?0:240)&240|(a>>>0<16384?a>>>10|0:(n|0)<-8708?0:15)}}function xo(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;se=ie(P[n|0],19077)>>>8|0,He=P[w|0]|P[x|0]<<16,J=P[l|0]|P[g|0]<<16,xe=(He+ie(J,3)|0)+131074|0,Wt=xe>>>18|0,Pt=se+(ie(Wt,26149)>>>8|0)|0,V=Pt+-14234|0,m[E|0]=V>>>0<16384?V>>>6|0:Pt>>>0<14234?0:255,xe=xe>>>2&255,Pt=se+(ie(xe,33050)>>>8|0)|0,V=Pt+-17685|0,m[E+2|0]=V>>>0<16384?V>>>6|0:Pt>>>0<17685?0:255,se=se-(ie(xe,6419)>>>8|0)-(ie(Wt,13320)>>>8)|0,xe=se+8708|0,m[E+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255,a&&(se=ie(P[a|0],19077)>>>8|0,xe=(ie(He,3)+J|0)+131074|0,Wt=xe>>>18|0,Pt=se+(ie(Wt,26149)>>>8|0)|0,V=Pt+-14234|0,m[D|0]=V>>>0<16384?V>>>6|0:Pt>>>0<14234?0:255,xe=xe>>>2&255,Pt=se+(ie(xe,33050)>>>8|0)|0,V=Pt+-17685|0,m[D+2|0]=V>>>0<16384?V>>>6|0:Pt>>>0<17685?0:255,se=se-(ie(xe,6419)>>>8|0)-(ie(Wt,13320)>>>8)|0,xe=se+8708|0,m[D+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255),Pt=H+-1|0;e:{if((H|0)<3){se=He,xe=J;break e}for(se=Pt>>1,Un=(se|0)>1?se:1,Wt=1;se=P[w+Wt|0]|P[x+Wt|0]<<16,xe=P[l+Wt|0]|P[g+Wt|0]<<16,rr=xe+He|0,V=(se+(rr+J|0)|0)+524296|0,Gr=Wt<<1,ur=Gr+-1|0,ti=ie(ur,3),Oe=ti+E|0,Ki=V+(rr<<1)>>>3|0,Lr=Ki+J|0,gi=Lr>>>17|0,rr=ie(P[n+ur|0],19077)>>>8|0,st=(ie(gi,26149)>>>8|0)+rr|0,Rr=st+-14234|0,m[Oe|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<14234?0:255,Lr=Lr>>>1&255,st=rr+(ie(Lr,33050)>>>8|0)|0,Rr=st+-17685|0,m[Oe+2|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<17685?0:255,st=Oe,Oe=rr-(ie(Lr,6419)>>>8|0)-(ie(gi,13320)>>>8)|0,rr=Oe+8708|0,m[st+1|0]=rr>>>0<16384?rr>>>6|0:(Oe|0)<-8708?0:255,rr=ie(Wt,6),Oe=rr+E|0,V=V+(J+se<<1)>>>3|0,Lr=V+xe|0,gi=Lr>>>1&255,J=ie(P[n+Gr|0],19077)>>>8|0,st=(ie(gi,33050)>>>8|0)+J|0,Rr=st+-17685|0,m[Oe+2|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<17685?0:255,Lr=Lr>>>17|0,st=J+(ie(Lr,26149)>>>8|0)|0,Rr=st+-14234|0,m[Oe|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<14234?0:255,st=Oe,J=J-(ie(gi,6419)>>>8|0)-(ie(Lr,13320)>>>8)|0,Oe=J+8708|0,m[st+1|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255,a&&(J=D+ti|0,V=V+He|0,Oe=V>>>17|0,He=ie(P[a+ur|0],19077)>>>8|0,ur=(ie(Oe,26149)>>>8|0)+He|0,ti=ur+-14234|0,m[J|0]=ti>>>0<16384?ti>>>6|0:ur>>>0<14234?0:255,V=V>>>1&255,ur=He+(ie(V,33050)>>>8|0)|0,ti=ur+-17685|0,m[J+2|0]=ti>>>0<16384?ti>>>6|0:ur>>>0<17685?0:255,st=J,J=He-(ie(V,6419)>>>8|0)-(ie(Oe,13320)>>>8)|0,He=J+8708|0,m[st+1|0]=He>>>0<16384?He>>>6|0:(J|0)<-8708?0:255,J=D+rr|0,He=ie(P[a+Gr|0],19077)>>>8|0,V=se+Ki|0,ur=V>>>1&255,Gr=He+(ie(ur,33050)>>>8|0)|0,Oe=Gr+-17685|0,m[J+2|0]=Oe>>>0<16384?Oe>>>6|0:Gr>>>0<17685?0:255,V=V>>>17|0,Gr=He+(ie(V,26149)>>>8|0)|0,Oe=Gr+-14234|0,m[J|0]=Oe>>>0<16384?Oe>>>6|0:Gr>>>0<14234?0:255,Oe=J,J=He-(ie(ur,6419)>>>8|0)-(ie(V,13320)>>>8)|0,He=J+8708|0,m[Oe+1|0]=He>>>0<16384?He>>>6|0:(J|0)<-8708?0:255),V=(Wt|0)!=(Un|0),Wt=Wt+1|0,J=xe,He=se,!!V;);}e:{if(H&1||(g=ie(Pt,3),l=g+E|0,n=ie(P[n+Pt|0],19077)>>>8|0,w=(ie(xe,3)+se|0)+131074|0,x=w>>>18|0,E=n+(ie(x,26149)>>>8|0)|0,H=E+-14234|0,m[l|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,w=w>>>2&255,E=n+(ie(w,33050)>>>8|0)|0,H=E+-17685|0,m[l+2|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=l,n=n-(ie(w,6419)>>>8|0)-(ie(x,13320)>>>8)|0,l=n+8708|0,m[E+1|0]=l>>>0<16384?l>>>6|0:(n|0)<-8708?0:255,!a))break e;n=g+D|0,a=ie(P[a+Pt|0],19077)>>>8|0,l=(ie(se,3)+xe|0)+131074|0,g=l>>>18|0,w=a+(ie(g,26149)>>>8|0)|0,x=w+-14234|0,m[n|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,l=l>>>2&255,w=a+(ie(l,33050)>>>8|0)|0,x=w+-17685|0,m[n+2|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,w=n,n=a-(ie(l,6419)>>>8|0)-(ie(g,13320)>>>8)|0,a=n+8708|0,m[w+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255}}function Oo(n,a,l,g,w,x,E,D,H){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0;var V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;se=ie(P[n|0],19077)>>>8|0,He=P[w|0]|P[x|0]<<16,J=P[l|0]|P[g|0]<<16,xe=(He+ie(J,3)|0)+131074|0,Wt=xe>>>18|0,Pt=se+(ie(Wt,26149)>>>8|0)|0,V=Pt+-14234|0,m[E+2|0]=V>>>0<16384?V>>>6|0:Pt>>>0<14234?0:255,xe=xe>>>2&255,Pt=se+(ie(xe,33050)>>>8|0)|0,V=Pt+-17685|0,m[E|0]=V>>>0<16384?V>>>6|0:Pt>>>0<17685?0:255,se=se-(ie(xe,6419)>>>8|0)-(ie(Wt,13320)>>>8)|0,xe=se+8708|0,m[E+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255,a&&(se=ie(P[a|0],19077)>>>8|0,xe=(ie(He,3)+J|0)+131074|0,Wt=xe>>>18|0,Pt=se+(ie(Wt,26149)>>>8|0)|0,V=Pt+-14234|0,m[D+2|0]=V>>>0<16384?V>>>6|0:Pt>>>0<14234?0:255,xe=xe>>>2&255,Pt=se+(ie(xe,33050)>>>8|0)|0,V=Pt+-17685|0,m[D|0]=V>>>0<16384?V>>>6|0:Pt>>>0<17685?0:255,se=se-(ie(xe,6419)>>>8|0)-(ie(Wt,13320)>>>8)|0,xe=se+8708|0,m[D+1|0]=xe>>>0<16384?xe>>>6|0:(se|0)<-8708?0:255),Pt=H+-1|0;e:{if((H|0)<3){se=He,xe=J;break e}for(se=Pt>>1,Un=(se|0)>1?se:1,Wt=1;se=P[w+Wt|0]|P[x+Wt|0]<<16,xe=P[l+Wt|0]|P[g+Wt|0]<<16,rr=xe+He|0,V=(se+(rr+J|0)|0)+524296|0,Gr=Wt<<1,ur=Gr+-1|0,ti=ie(ur,3),Oe=ti+E|0,Ki=V+(rr<<1)>>>3|0,Lr=Ki+J|0,gi=Lr>>>17|0,rr=ie(P[n+ur|0],19077)>>>8|0,st=(ie(gi,26149)>>>8|0)+rr|0,Rr=st+-14234|0,m[Oe+2|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<14234?0:255,Lr=Lr>>>1&255,st=rr+(ie(Lr,33050)>>>8|0)|0,Rr=st+-17685|0,m[Oe|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<17685?0:255,st=Oe,Oe=rr-(ie(Lr,6419)>>>8|0)-(ie(gi,13320)>>>8)|0,rr=Oe+8708|0,m[st+1|0]=rr>>>0<16384?rr>>>6|0:(Oe|0)<-8708?0:255,rr=ie(Wt,6),Oe=rr+E|0,V=V+(J+se<<1)>>>3|0,Lr=V+xe|0,gi=Lr>>>17|0,J=ie(P[n+Gr|0],19077)>>>8|0,st=(ie(gi,26149)>>>8|0)+J|0,Rr=st+-14234|0,m[Oe+2|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<14234?0:255,Lr=Lr>>>1&255,st=J+(ie(Lr,33050)>>>8|0)|0,Rr=st+-17685|0,m[Oe|0]=Rr>>>0<16384?Rr>>>6|0:st>>>0<17685?0:255,st=Oe,J=J-(ie(Lr,6419)>>>8|0)-(ie(gi,13320)>>>8)|0,Oe=J+8708|0,m[st+1|0]=Oe>>>0<16384?Oe>>>6|0:(J|0)<-8708?0:255,a&&(J=D+ti|0,V=V+He|0,Oe=V>>>17|0,He=ie(P[a+ur|0],19077)>>>8|0,ur=(ie(Oe,26149)>>>8|0)+He|0,ti=ur+-14234|0,m[J+2|0]=ti>>>0<16384?ti>>>6|0:ur>>>0<14234?0:255,V=V>>>1&255,ur=He+(ie(V,33050)>>>8|0)|0,ti=ur+-17685|0,m[J|0]=ti>>>0<16384?ti>>>6|0:ur>>>0<17685?0:255,st=J,J=He-(ie(V,6419)>>>8|0)-(ie(Oe,13320)>>>8)|0,He=J+8708|0,m[st+1|0]=He>>>0<16384?He>>>6|0:(J|0)<-8708?0:255,J=D+rr|0,He=ie(P[a+Gr|0],19077)>>>8|0,V=se+Ki|0,ur=V>>>17|0,Gr=He+(ie(ur,26149)>>>8|0)|0,Oe=Gr+-14234|0,m[J+2|0]=Oe>>>0<16384?Oe>>>6|0:Gr>>>0<14234?0:255,V=V>>>1&255,Gr=He+(ie(V,33050)>>>8|0)|0,Oe=Gr+-17685|0,m[J|0]=Oe>>>0<16384?Oe>>>6|0:Gr>>>0<17685?0:255,Oe=J,J=He-(ie(V,6419)>>>8|0)-(ie(ur,13320)>>>8)|0,He=J+8708|0,m[Oe+1|0]=He>>>0<16384?He>>>6|0:(J|0)<-8708?0:255),V=(Wt|0)!=(Un|0),Wt=Wt+1|0,J=xe,He=se,!!V;);}e:{if(H&1||(g=ie(Pt,3),l=g+E|0,n=ie(P[n+Pt|0],19077)>>>8|0,w=(ie(xe,3)+se|0)+131074|0,x=w>>>18|0,E=n+(ie(x,26149)>>>8|0)|0,H=E+-14234|0,m[l+2|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,w=w>>>2&255,E=n+(ie(w,33050)>>>8|0)|0,H=E+-17685|0,m[l|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=l,n=n-(ie(w,6419)>>>8|0)-(ie(x,13320)>>>8)|0,l=n+8708|0,m[E+1|0]=l>>>0<16384?l>>>6|0:(n|0)<-8708?0:255,!a))break e;n=g+D|0,a=ie(P[a+Pt|0],19077)>>>8|0,l=(ie(se,3)+xe|0)+131074|0,g=l>>>18|0,w=a+(ie(g,26149)>>>8|0)|0,x=w+-14234|0,m[n+2|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,l=l>>>2&255,w=a+(ie(l,33050)>>>8|0)|0,x=w+-17685|0,m[n|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,w=n,n=a-(ie(l,6419)>>>8|0)-(ie(g,13320)>>>8)|0,a=n+8708|0,m[w+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255}}function Wo(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0;e:{if(!n)break e;if(h[n>>2]=0,h[n+8>>2]=5010,!a){h[n>>2]=2,h[n+4>>2]=0,h[n+8>>2]=5013;break e}if(D=h[a+60>>2],D>>>0<=3){h[n>>2]=7,h[n+4>>2]=0,h[n+8>>2]=5050;break e}if(l=h[a+64>>2],w=P[l+1|0],x=P[l+2|0],g=P[l|0],E=g>>>4&1,m[n+42|0]=E,H=g>>>1&7,m[n+41|0]=H,V=(g^-1)&1,m[n+40|0]=V,g=(g|w<<8|x<<16)>>>5|0,h[n+44>>2]=g,H>>>0>=4){h[n>>2]=3,h[n+4>>2]=0,h[n+8>>2]=5068;break e}if(!E){h[n>>2]=4,h[n+4>>2]=0,h[n+8>>2]=5099;break e}if(w=D+-3|0,x=l+3|0,V){if(w>>>0<=6){h[n>>2]=7,h[n+4>>2]=0,h[n+8>>2]=5122;break e}if(!(P[l+5|0]==42&&!(P[x|0]!=157|P[l+4|0]!=1))){h[n>>2]=3,h[n+4>>2]=0,h[n+8>>2]=5150;break e}g=P[l+6|0]|P[l+7|0]<<8&16128,xr[n+48>>1]=g,m[n+52|0]=P[l+7|0]>>>6,w=P[l+8|0]|P[l+9|0]<<8&16128,xr[n+50>>1]=w,x=P[l+9|0],h[n+292>>2]=w+15>>>4,h[n+288>>2]=g+15>>>4,m[n+53|0]=x>>>6,h[a+84>>2]=0,h[a+4>>2]=w,h[a>>2]=g,h[a+100>>2]=w,h[a+96>>2]=g,h[a+92>>2]=0,h[a+88>>2]=w,h[a+80>>2]=g,h[a+72>>2]=0,h[a+76>>2]=0,h[a+16>>2]=w,h[a+12>>2]=g,a=n+904|0,xr[a>>1]=-1,m[a+2|0]=-1,h[n+120>>2]=0,h[n+112>>2]=1,h[n+116>>2]=0,h[n+104>>2]=0,h[n+108>>2]=0,w=D+-10|0,x=l+10|0,g=h[n+44>>2]}t:{if(g>>>0>w>>>0){if(a=0,h[n>>2])break t;h[n>>2]=7,h[n+4>>2]=0,h[n+8>>2]=5164;break e}l=n+12|0,Te(l,x,g),E=h[n+44>>2],P[n+40|0]&&(se=n,xe=kn(l,1),m[se+54|0]=xe,se=n,xe=kn(l,1),m[se+55|0]=xe),a=kn(l,1),h[n+104>>2]=a;r:{if(a){if(se=n,xe=kn(l,1),h[se+108>>2]=xe,kn(l,1)&&(se=n,xe=kn(l,1),h[se+112>>2]=xe,a=n,kn(l,1)?g=Ua(l,7):g=0,m[a+116|0]=g,a=n,kn(l,1)?g=Ua(l,7):g=0,m[a+117|0]=g,a=n,kn(l,1)?g=Ua(l,7):g=0,m[a+118|0]=g,a=n,kn(l,1)?g=Ua(l,7):g=0,m[a+119|0]=g,a=n,kn(l,1)?g=Ua(l,6):g=0,m[a+120|0]=g,a=n,kn(l,1)?g=Ua(l,6):g=0,m[a+121|0]=g,a=n,kn(l,1)?g=Ua(l,6):g=0,m[a+122|0]=g,a=n,kn(l,1)?g=Ua(l,6):g=0,m[a+123|0]=g),!h[n+108>>2])break r;a=n,kn(l,1)?g=kn(l,8):g=255,m[a+904|0]=g,a=n,kn(l,1)?g=kn(l,8):g=255,m[a+905|0]=g,a=n,g=255;i:{if(!kn(l,1))break i;g=kn(l,8)}m[a+906|0]=g;break r}h[n+108>>2]=0}if(h[n+36>>2]){if(a=0,h[n>>2])break t;h[n>>2]=3,h[n+4>>2]=0,h[n+8>>2]=5185;break e}se=n,xe=kn(l,1),h[se+56>>2]=xe,se=n,xe=kn(l,6),h[se+60>>2]=xe,se=n- -64|0,xe=kn(l,3),h[se>>2]=xe,a=kn(l,1),h[n+68>>2]=a;r:{if(!a||!kn(l,1)||(kn(l,1)&&(se=n,xe=Ua(l,6),h[se+72>>2]=xe),kn(l,1)&&(se=n,xe=Ua(l,6),h[se+76>>2]=xe),kn(l,1)&&(se=n,xe=Ua(l,6),h[se+80>>2]=xe),kn(l,1)&&(se=n,xe=Ua(l,6),h[se+84>>2]=xe),kn(l,1)&&(se=n,xe=Ua(l,6),h[se+88>>2]=xe),kn(l,1)&&(se=n,xe=Ua(l,6),h[se+92>>2]=xe),kn(l,1)&&(se=n,xe=Ua(l,6),h[se+96>>2]=xe),!kn(l,1)))break r;se=n,xe=Ua(l,6),h[se+100>>2]=xe}if(a=n,h[n+60>>2]?g=h[n+56>>2]?1:2:g=0,h[a+2308>>2]=g,h[n+36>>2]){if(a=0,h[n>>2])break t;h[n>>2]=3,h[n+4>>2]=0,h[n+8>>2]=5213;break e}V=kn(l,2),D=-1<<V^-1,h[n+312>>2]=D,g=7;r:{if(a=w-E|0,H=ie(D,3),a>>>0>=H>>>0){if(J=w+x|0,g=a-H|0,a=x+E|0,x=H+a|0,V)for(H=D>>>0>1?D:1,w=0;E=P[a|0]|P[a+1|0]<<8|P[a+2|0]<<16,E=E>>>0>g>>>0?g:E,Te((ie(w,28)+n|0)+316|0,x,E),g=g-E|0,x=x+E|0,a=a+3|0,w=w+1|0,(H|0)!=(w|0););if(Te((ie(D,28)+n|0)+316|0,x,g),g=5,x>>>0<J>>>0)break r}if(a=0,h[n>>2])break t;h[n>>2]=g,h[n+4>>2]=0,h[n+8>>2]=5240;break e}if(Au(n),!P[n+40|0]){if(a=0,h[n>>2])break t;h[n>>2]=4,h[n+4>>2]=0,h[n+8>>2]=5264;break e}kn(l,1),Ka(l,n),h[n+4>>2]=1,a=1}return a}return 0}function za(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0;if(w=h[n+20>>2],h[w+108>>2]<(a|0)){e:{if(!h[n+132>>2]&&(co(),!h[n+132>>2]))break e;xe=h[w+100>>2],ur=ie(xe,h[w+104>>2]),H=h[w+112>>2],n=(H|0)/(xe|0)|0,rr=ie(a,xe);t:{r:{if((H|0)>=(rr|0)){He=w+48|0;break r}V=H-ie(n,xe)|0,E=h[w+152>>2],x=0;i:{if(!E)break i;x=h[h[w+160>>2]+(ie(h[w+156>>2],n>>E)+(V>>E)<<2)>>2]}if(He=w+48|0,h[He>>2])break r;for(Lr=h[w+148>>2],Rr=h[w+16>>2],st=w+24|0,Wt=h[w+168>>2]+ie(x,548)|0;;){if(!(V&Lr)){l=h[w+168>>2],E=h[w+152>>2],x=0;i:{if(!E)break i;x=h[h[w+160>>2]+(ie(h[w+156>>2],n>>E)+(V>>E)<<2)>>2]}Wt=l+ie(x,548)|0}g=h[w+44>>2],(g|0)>=32&&(as(st),g=h[w+44>>2]),J=w,x=h[st+4>>2],l=x,D=g&63,E=D&31,Pt=h[st>>2],l=h[Wt>>2]+(((32<=(D&63)>>>0?l>>>E|0:((1<<E)-1&l)<<32-E|Pt>>>E)&255)<<2)|0,E=P[l|0],E>>>0>=9&&(g=g+8|0,h[w+44>>2]=g,D=(ci[l+2>>1]<<2)+l|0,l=x,Oe=g&63,se=Oe&31,l=D+(((-1<<E+-8^-1)&(32<=Oe>>>0?l>>>se|0:((1<<se)-1&l)<<32-se|Pt>>>se))<<2)|0,E=P[l|0]),D=(E&255)+g|0,h[J+44>>2]=D,l=ci[l+2>>1];i:{if(l>>>0<=255){if(m[H+Rr|0]=l,H=H+1|0,V=V+1|0,(V|0)<(xe|0))break i;if(x=n+1|0,V=0,(n|0)>=(a|0)){n=x;break i}if(x&15){n=x;break i}os(w,x),n=x;break i}if(J=1,l>>>0>279)break t;E=l+-256|0,l>>>0>=260&&(x=l+-258>>1,E=$n(st,x)+((E&1|2)<<x)|0,Pt=h[w+24>>2],D=h[w+44>>2],x=h[w+28>>2]),se=w,l=x,Oe=D&63,g=Oe&31,g=h[Wt+16>>2]+(((32<=Oe>>>0?l>>>g|0:((1<<g)-1&l)<<32-g|Pt>>>g)&255)<<2)|0,l=P[g|0],l>>>0>=9&&(D=D+8|0,h[w+44>>2]=D,Gr=(ci[g+2>>1]<<2)+g|0,Oe=D&63,g=Oe&31,g=Gr+(((-1<<l+-8^-1)&(32<=Oe>>>0?x>>>g|0:((1<<g)-1&x)<<32-g|Pt>>>g))<<2)|0,l=P[g|0]),x=(l&255)+D|0,h[se+44>>2]=x,g=ci[g+2>>1],(x|0)>=32&&as(st),x=E+1|0,g>>>0>=4&&(l=g+-2>>1,g=$n(st,l)+((g&1|2)<<l)|0);o:{if((g+1|0)>=121){l=g+-119|0;break o}l=P[g+1264|0],l=(ie(l>>>4|0,xe)-(l&15)|0)+8|0,l=(l|0)>1?l:1}if((ur-H|0)<(x|0)|(H|0)<(l|0))break t;g=H+Rr|0,D=g-l|0;o:{l:{if((x|0)<8)break l;n:{u:switch(l+-1|0){case 0:l=P[D|0],J=ie(l,16843009);break n;case 1:l=P[D|0]|P[D+1|0]<<8,J=ie(l,65537);break n;case 3:break u;default:break l}l=P[D|0]|P[D+1|0]<<8|(P[D+2|0]<<16|P[D+3|0]<<24),J=l}n:{u:{a:{if(g&3){if(m[g|0]=l,J=Mo(J,24),D=D+1|0,g=g+1|0,g&3)break a;l=E>>>2|0;break u}E=x,l=E>>>2|0;break u}for(;m[g|0]=P[D|0],se=E,E=E+-1|0,J=Mo(J,24),D=D+1|0,g=g+1|0,!!(g&3););if(l=0,(se|0)<5)break n;l=E>>2}for(se=(l|0)>1?l:1,l=0;h[(l<<2)+g>>2]=J,l=l+1|0,(se|0)!=(l|0););l=se<<2}if((l|0)>=(E|0))break o;for(;m[l+g|0]=P[l+D|0],l=l+1|0,(E|0)!=(l|0););break o}if((l|0)<(x|0)){if(l=0,(x|0)<=0)break o;for(;m[l+g|0]=P[l+D|0],J=(l|0)!=(E|0),l=l+1|0,!!J;);break o}_n(g,D,x)}if(H=x+H|0,V=x+V|0,(V|0)>=(xe|0))for(;V=V-xe|0,x=n,n=x+1|0,n&15|(x|0)>=(a|0)||os(w,n),(V|0)>=(xe|0););if(!(V&Lr)|(H|0)>=(rr|0))break i;l=h[w+168>>2],E=h[w+152>>2],x=0;o:{if(!E)break o;x=h[h[w+160>>2]+(ie(h[w+156>>2],n>>E)+(V>>E)<<2)>>2]}Wt=l+ie(x,548)|0}if(h[He>>2]){h[He>>2]=1;break r}if(g=0,g=h[w+40>>2]==h[w+36>>2]?h[w+44>>2]>64:g,h[He>>2]=g,(H|0)>=(rr|0))break r;if(g)break}}os(w,(n|0)>(a|0)?a:n),J=0}a=He,x=a,n=1;t:{if(h[a>>2]||(n=0,h[w+40>>2]!=h[w+36>>2]))break t;n=h[w+44>>2]>64}return h[x>>2]=n,!n|(ur|0)<=(H|0)&&!J?(h[w+112>>2]=H,1):(h[w>>2]=n?5:3,0)}n=Hn(w,h[w+16>>2],h[w+100>>2],h[w+104>>2],a,1)}else n=1;return n}function jo(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0;ur=Mi+-64|0,Mi=ur,w=h[n+2280>>2],gi=h[n+160>>2],Pt=h[n+2268>>2],x=h[n+2284>>2],Gr=P[h[n+2308>>2]+4863|0],l=Gr>>>1|0,Oe=h[n+2276>>2],Lr=h[n+2272>>2],Un=h[n+308>>2],ti=h[n+164>>2],h[n+148>>2]==2&&rl(n,n+160|0),E=ie(w,gi),Ki=ie(w,Gr),g=ie(x,gi),Rr=ie(l,x);e:{if(!h[n+168>>2]||(l=h[n+296>>2],(l|0)>=h[n+304>>2]))break e;for(He=h[n+164>>2];;){se=h[n+172>>2]+(l<<2)|0,D=P[se|0];t:{if(!D)break t;if(x=h[n+160>>2],V=h[n+2280>>2],H=(h[n+2268>>2]+(ie(x,V)<<4)|0)+(l<<4)|0,h[n+2308>>2]==1){if((l|0)>=1&&ot[h[2717]](H,V,D+4|0),P[se+2|0]&&ot[h[2719]](H,V,D),x=se+2|0,(He|0)>=1&&ot[h[2716]](H,V,D+4|0),!P[x|0])break t;ot[h[2718]](H,V,D);break t}if(J=P[se+1|0],Wt=h[n+2284>>2],w=ie(Wt,x)<<3,x=l<<3,rr=(w+h[n+2276>>2]|0)+x|0,st=x+(w+h[n+2272>>2]|0)|0,xe=P[se+3|0],(l|0)>=1&&(x=D+4|0,ot[h[2709]](H,V,x,J,xe),ot[h[2711]](st,rr,Wt,x,J,xe)),P[se+2|0]&&(ot[h[2713]](H,V,D,J,xe),ot[h[2715]](st,rr,Wt,D,J,xe)),w=se+2|0,(He|0)>=1&&(x=D+4|0,ot[h[2708]](H,V,x,J,xe),ot[h[2710]](st,rr,Wt,x,J,xe)),!P[w|0])break t;ot[h[2712]](H,V,D,J,xe),ot[h[2714]](st,rr,Wt,D,J,xe)}if(l=l+1|0,!((l|0)<h[n+304>>2]))break}}xe=E<<4,st=Pt-Ki|0,V=g<<3,He=Oe-Rr|0,Pt=Lr-Rr|0;e:{if(!h[n+540>>2]||(H=h[n+296>>2],g=h[n+304>>2],(H|0)>=(g|0)))break e;for(J=n+552|0;;){if(l=h[n+176>>2]+ie(H,800)|0,w=P[l+796|0],w>>>0>=4){for(Oe=l+796|0,se=h[n+2284>>2],Wt=ie(se,h[n+160>>2])<<3,Lr=h[n+2276>>2],x=h[n+2272>>2],D=h[n+548>>2],E=h[n+544>>2],g=0;l=J+(E<<2)|0,rr=h[l>>2]-h[J+(D<<2)>>2]|0,h[l>>2]=rr&2147483647,l=h[n+544>>2]+1|0,E=(l|0)==55?0:l,h[n+544>>2]=E,l=h[n+548>>2]+1|0,D=(l|0)==55?0:l,h[n+548>>2]=D,m[g+ur|0]=ie(w,rr<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);for(w=H<<3,ot[h[2720]](ur,w+(x+Wt|0)|0,se),x=P[Oe|0],D=h[n+548>>2],E=h[n+544>>2],g=0;l=J+(E<<2)|0,Oe=h[l>>2]-h[J+(D<<2)>>2]|0,h[l>>2]=Oe&2147483647,l=h[n+544>>2]+1|0,E=(l|0)==55?0:l,h[n+544>>2]=E,l=h[n+548>>2]+1|0,D=(l|0)==55?0:l,h[n+548>>2]=D,m[g+ur|0]=ie(x,Oe<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);ot[h[2720]](ur,w+(Wt+Lr|0)|0,se),g=h[n+304>>2]}if(H=H+1|0,!((H|0)<(g|0)))break}}st=xe+st|0,x=V+He|0,Oe=V+Pt|0,Lr=Un+-1|0;e:{t:{g=1;r:{if(!h[a+44>>2])break r;l=ti<<4,w=l+16|0;i:{if(ti){h[a+24>>2]=Oe,h[a+20>>2]=st,E=x,l=l-Gr|0;break i}h[a+20>>2]=xe+h[n+2268>>2],h[a+24>>2]=V+h[n+2272>>2],E=V+h[n+2276>>2]|0,l=0}if(h[a+28>>2]=E,E=0,h[a+104>>2]=0,g=h[a+88>>2],w=w-((ti|0)>=(Lr|0)?0:Gr)|0,He=(w|0)>(g|0)?g:w,!(!h[n+2348>>2]|(He|0)<=(l|0))&&(E=ao(n,a,l,He-l|0),h[a+104>>2]=E,!E))break t;if(w=h[a+84>>2],(w|0)>(l|0)){g=w-l|0,h[a+20>>2]=h[a+20>>2]+ie(g,h[n+2280>>2]),l=ie(h[n+2284>>2],g>>1),h[a+24>>2]=l+h[a+24>>2],h[a+28>>2]=l+h[a+28>>2];i:{if(!E){E=0;break i}E=ie(g,h[a>>2])+E|0,h[a+104>>2]=E}l=w}if(g=1,(He|0)<=(l|0))break r;Pt=h[a+76>>2],h[a+20>>2]=Pt+h[a+20>>2],g=Pt>>1,h[a+24>>2]=g+h[a+24>>2],h[a+28>>2]=g+h[a+28>>2],E&&(h[a+104>>2]=E+Pt),h[a+8>>2]=l-w,h[a+16>>2]=He-l,h[a+12>>2]=h[a+80>>2]-Pt,g=ot[h[a+44>>2]](a)|0}if(h[n+156>>2]!=(gi+1|0)|(ti|0)>=(Lr|0))break e;_n(h[n+2268>>2]-Ki|0,st+(h[n+2280>>2]<<4)|0,Ki),a=0-Rr|0,_n(a+h[n+2272>>2]|0,Oe+(h[n+2284>>2]<<3)|0,Rr),_n(a+h[n+2276>>2]|0,x+(h[n+2284>>2]<<3)|0,Rr);break e}g=No(n,3,4912)}return Mi=ur- -64|0,g|0}function Fn(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0;e:{if(!n)break e;g=n+-8|0,l=h[n+-4>>2],n=l&-8,x=g+n|0;t:{if(l&1)break t;if(!(l&3)||(l=h[g>>2],g=g-l|0,g>>>0<Oi[2888]))break e;if(n=n+l|0,h[2889]!=(g|0)){if(l>>>0<=255){if(w=h[g+8>>2],l=l>>>3|0,a=h[g+12>>2],(a|0)==(w|0)){H=11536,V=h[2884]&Mo(-2,l),h[H>>2]=V;break t}h[w+12>>2]=a,h[a+8>>2]=w;break t}D=h[g+24>>2],l=h[g+12>>2];r:{if((l|0)!=(g|0)){a=h[g+8>>2],h[a+12>>2]=l,h[l+8>>2]=a;break r}i:{if(w=g+20|0,a=h[w>>2],a||(w=g+16|0,a=h[w>>2],a))break i;l=0;break r}for(;E=w,l=a,w=l+20|0,a=h[w>>2],!(!a&&(w=l+16|0,a=h[l+16>>2],!a)););h[E>>2]=0}if(!D)break t;w=h[g+28>>2],a=(w<<2)+11840|0;r:{if(h[a>>2]==(g|0)){if(h[a>>2]=l,l)break r;H=11540,V=h[2885]&Mo(-2,w),h[H>>2]=V;break t}if(h[D+(h[D+16>>2]==(g|0)?16:20)>>2]=l,!l)break t}if(h[l+24>>2]=D,a=h[g+16>>2],a&&(h[l+16>>2]=a,h[a+24>>2]=l),a=h[g+20>>2],!a)break t;h[l+20>>2]=a,h[a+24>>2]=l;break t}if(l=h[x+4>>2],(l&3)!=3)break t;h[2886]=n,h[x+4>>2]=l&-2,h[g+4>>2]=n|1,h[n+g>>2]=n;return}if(x>>>0<=g>>>0||(l=h[x+4>>2],!(l&1)))break e;t:{if(!(l&2)){if((x|0)==h[2890]){if(h[2890]=g,n=h[2887]+n|0,h[2887]=n,h[g+4>>2]=n|1,h[2889]!=(g|0))break e;h[2886]=0,h[2889]=0;return}if((x|0)==h[2889]){h[2889]=g,n=h[2886]+n|0,h[2886]=n,h[g+4>>2]=n|1,h[n+g>>2]=n;return}n=(l&-8)+n|0;r:{if(l>>>0<=255){if(a=h[x+8>>2],l=l>>>3|0,w=h[x+12>>2],(a|0)==(w|0)){H=11536,V=h[2884]&Mo(-2,l),h[H>>2]=V;break r}h[a+12>>2]=w,h[w+8>>2]=a;break r}D=h[x+24>>2],l=h[x+12>>2];i:{if((x|0)!=(l|0)){a=h[x+8>>2],h[a+12>>2]=l,h[l+8>>2]=a;break i}o:{if(w=x+20|0,a=h[w>>2],a||(w=x+16|0,a=h[w>>2],a))break o;l=0;break i}for(;E=w,l=a,w=l+20|0,a=h[w>>2],!(!a&&(w=l+16|0,a=h[l+16>>2],!a)););h[E>>2]=0}if(!D)break r;w=h[x+28>>2],a=(w<<2)+11840|0;i:{if((x|0)==h[a>>2]){if(h[a>>2]=l,l)break i;H=11540,V=h[2885]&Mo(-2,w),h[H>>2]=V;break r}if(h[D+((x|0)==h[D+16>>2]?16:20)>>2]=l,!l)break r}if(h[l+24>>2]=D,a=h[x+16>>2],a&&(h[l+16>>2]=a,h[a+24>>2]=l),a=h[x+20>>2],!a)break r;h[l+20>>2]=a,h[a+24>>2]=l}if(h[g+4>>2]=n|1,h[n+g>>2]=n,h[2889]!=(g|0))break t;h[2886]=n;return}h[x+4>>2]=l&-2,h[g+4>>2]=n|1,h[n+g>>2]=n}if(n>>>0<=255){n=n>>>3|0,l=(n<<3)+11576|0,a=h[2884],n=1<<n;t:{if(!(a&n)){h[2884]=n|a,n=l;break t}n=h[l+8>>2]}h[l+8>>2]=g,h[n+12>>2]=g,h[g+12>>2]=l,h[g+8>>2]=n;return}h[g+16>>2]=0,h[g+20>>2]=0,x=g,w=n>>>8|0,a=0;t:{if(!w||(a=31,n>>>0>16777215))break t;l=w,w=w+1048320>>>16&8,a=l<<w,D=a+520192>>>16&4,a=a<<D,E=a+245760>>>16&2,a=(a<<E>>>15|0)-(E|(w|D))|0,a=(a<<1|n>>>a+21&1)+28|0}h[x+28>>2]=a,E=(a<<2)+11840|0;t:{r:{w=h[2885],l=1<<a;i:{if(!(w&l)){h[2885]=l|w,h[E>>2]=g,h[g+24>>2]=E;break i}for(w=n<<((a|0)==31?0:25-(a>>>1|0)|0),l=h[E>>2];;){if(a=l,(h[l+4>>2]&-8)==(n|0))break r;if(l=w>>>29|0,w=w<<1,E=(a+(l&4)|0)+16|0,l=h[E>>2],!l)break}h[E>>2]=g,h[g+24>>2]=a}h[g+12>>2]=g,h[g+8>>2]=g;break t}n=h[a+8>>2],h[n+12>>2]=g,h[a+8>>2]=g,h[g+24>>2]=0,h[g+12>>2]=a,h[g+8>>2]=n}if(n=h[2892]+-1|0,h[2892]=n,n)break e;for(g=11992;n=h[g>>2],g=n+8|0,!!n;);h[2892]=-1}}function Sa(n,a,l,g,w){var x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0;D=Mi-128|0,h[D+120>>2]=0,h[D+124>>2]=0,h[D+112>>2]=0,h[D+116>>2]=0,h[D+104>>2]=0,h[D+108>>2]=0,h[D+96>>2]=0,h[D+100>>2]=0,h[D+88>>2]=0,h[D+92>>2]=0,h[D+80>>2]=0,h[D+84>>2]=0,h[D+72>>2]=0,h[D+76>>2]=0,h[D+64>>2]=0,h[D+68>>2]=0;e:{if((g|0)>=1){for(;;){if(E=h[(x<<2)+l>>2],(E|0)>15)break e;if(E=(D- -64|0)+(E<<2)|0,h[E>>2]=h[E>>2]+1,x=x+1|0,(x|0)==(g|0))break}x=h[D+64>>2]}else x=0;if((x|0)==(g|0)||(h[D+4>>2]=0,x=h[D+68>>2],(x|0)>2)||(h[D+8>>2]=x,E=h[D+72>>2],(E|0)>4)||(x=x+E|0,h[D+12>>2]=x,E=h[D+76>>2],(E|0)>8)||(x=x+E|0,h[D+16>>2]=x,E=h[D+80>>2],(E|0)>16)||(x=x+E|0,h[D+20>>2]=x,E=h[D+84>>2],(E|0)>32)||(x=x+E|0,h[D+24>>2]=x,E=h[D+88>>2],(E|0)>64)||(x=x+E|0,h[D+28>>2]=x,E=h[D+92>>2],(E|0)>128)||(x=x+E|0,h[D+32>>2]=x,E=h[D+96>>2],(E|0)>256)||(x=x+E|0,h[D+36>>2]=x,E=h[D+100>>2],(E|0)>512)||(x=x+E|0,h[D+40>>2]=x,E=h[D+104>>2],(E|0)>1024)||(x=x+E|0,h[D+44>>2]=x,E=h[D+108>>2],(E|0)>2048)||(x=x+E|0,h[D+48>>2]=x,E=h[D+112>>2],(E|0)>4096)||(x=x+E|0,h[D+52>>2]=x,E=h[D+116>>2],(E|0)>8192)||(x=x+E|0,h[D+56>>2]=x,E=h[D+120>>2],(E|0)>16384))break e;if(h[D+60>>2]=x+E,x=0,(g|0)>0)for(;;){E=h[(x<<2)+l>>2];t:{if((E|0)<1)break t;if(w){H=D+(E<<2)|0,E=h[H>>2],h[H>>2]=E+1,xr[(E<<1)+w>>1]=x;break t}E=D+(E<<2)|0,h[E>>2]=h[E>>2]+1}if(x=x+1|0,(x|0)==(g|0))break}if(E=1<<a,st=1,se=h[D+60>>2],(se|0)==1){if(!w)return E;for(l=ci[w>>1]<<16,x=E;a=x+-1|0,g=(a<<2)+n|0,xr[g>>1]=l,xr[g+2>>1]=l>>>16,g=(x|0)>1,x=a,!!g;);return E}rr=1;t:{r:{if((a|0)<1)break r;for(Oe=2,x=1;;){if(He=st<<1,ur=(D- -64|0)+(x<<2)|0,g=h[ur>>2],st=He-g|0,(st|0)<0)break e;if(l=x,!(!n|(g|0)<1)){for(H=g+xe|0,Lr=l&255,J=1<<l+-1;;){for(Rr=(V<<2)+n|0,g=Lr|ci[(xe<<1)+w>>1]<<16,x=E;x=x-Oe|0,Pt=Rr+(x<<2)|0,xr[Pt>>1]=g,xr[Pt+2>>1]=g>>>16,(x|0)>0;);for(g=J;x=g,g=x>>>1|0,!!(x&V););if(V=x?x+(x+-1&V)|0:V,xe=xe+1|0,(H|0)==(xe|0))break}h[ur>>2]=0,xe=H}if(rr=He+rr|0,Oe=Oe<<1,x=l+1|0,(a|0)==(l|0))break}if((a|0)<=14)break r;He=E;break t}for(gi=E+-1|0,H=a,J=-1,Oe=2,se=n,He=E;;){if(Wt=0,ur=H,Gr=st<<1,H=H+1|0,Pt=(D- -64|0)+(H<<2)|0,l=h[Pt>>2],st=Gr-l|0,(st|0)<0)break e;if(!(!n|(l|0)<1))for(Rr=1<<ur,Wt=H-a|0,Ki=Wt&255,Lr=1<<Wt,x=J;;){J=V&gi;r:{if((J|0)==(x|0)){J=x;break r}if(se=(E<<2)+se|0,E=Lr,x=Wt,(ur|0)<=13){x=H,g=x,l=Lr-l|0;i:{if((l|0)<1)break i;for(;;){if(g=15,x=x+1|0,(x|0)==15)break i;if(g=x,l=(l<<1)-h[(D- -64|0)+(x<<2)>>2]|0,!((l|0)>0))break}}x=g-a|0,E=1<<x}l=(J<<2)+n|0,m[l|0]=a+x,xr[l+2>>1]=(se-n>>>2|0)-J,He=E+He|0}for(g=(V>>>a<<2)+se|0,l=Ki|ci[(xe<<1)+w>>1]<<16,x=E;x=x-Oe|0,ti=g+(x<<2)|0,xr[ti>>1]=l,xr[ti+2>>1]=l>>>16,(x|0)>0;);for(g=Rr;x=g,g=x>>>1|0,!!(x&V););if(g=h[Pt>>2],l=g+-1|0,h[Pt>>2]=l,V=x?x+(x+-1&V)|0:V,xe=xe+1|0,x=J,!((g|0)>1))break}if(rr=rr+Gr|0,Oe=Oe<<1,(H|0)==15)break}se=h[D+60>>2]}Wt=((se<<1)+-1|0)==(rr|0)?He:0}return Wt}function cs(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0;Wt=Mi-32|0,Mi=Wt,E=h[n+2256>>2],se=h[n+2296>>2],rr=E+(se<<1)|0,st=h[n+2304>>2];e:{t:{if(h[n+2236>>2]&&(l=ie(se,800)+st|0,P[l+797|0]))break t;if(w=ie(se,800)+st|0,ur=P[w+798|0],H=3,g=Xo(w,0,768),!P[g+768|0]){l=Wt,h[l+24>>2]=0,h[l+28>>2]=0,h[l+16>>2]=0,h[l+20>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,h[l>>2]=0,h[l+4>>2]=0,x=E+-1|0,H=E+(se<<1)|0,V=ot[h[2661]](a,n+2032|0,P[x|0]+P[H+1|0]|0,((ur<<5)+n|0)+784|0,0,l)|0,l=(V|0)>0,m[x|0]=l,m[H+1|0]=l;r:{if((V|0)>=2){ot[h[2674]](Wt,g);break r}l=ie(se,800)+st|0,g=xr[Wt>>1]+3>>>3|0,xr[l+480>>1]=g,xr[l+448>>1]=g,xr[l+416>>1]=g,xr[l+384>>1]=g,xr[l+352>>1]=g,xr[l+320>>1]=g,xr[l+288>>1]=g,xr[l+256>>1]=g,xr[l+224>>1]=g,xr[l+192>>1]=g,xr[l+160>>1]=g,xr[l+128>>1]=g,xr[l+96>>1]=g,xr[l+64>>1]=g,xr[l+32>>1]=g,xr[l>>1]=g}H=0,x=1}for(l=P[rr|0]&15,g=((ur<<5)+n|0)+776|0,Rr=E+-2|0,E=P[Rr|0]&15,H=(ie(H,68)+n|0)+1964|0;V=ot[h[2661]](a,H,(E&1)+(l&1)|0,g,x,w)|0,xe=ci[w>>1],D=(V|0)>(x|0),J=l>>>1|0,l=ot[h[2661]](a,H,D+(J&1)|0,g,x,w+32|0)|0,Oe=ci[w+32>>1],He=(l|0)>(x|0),D=(J&126|D<<7)>>>1|0,J=ot[h[2661]](a,H,He+(D&1)|0,g,x,w- -64|0)|0,Gr=ci[w+64>>1],Lr=(J|0)>(x|0),He=(D|He<<7)>>>1|0,D=ot[h[2661]](a,H,Lr+(He&1)|0,g,x,w+96|0)|0,ti=(((l|0)>3?3:(l|0)<2?(Oe|0)!=0:2)|((V|0)>3?12:(V|0)<2?((xe|0)!=0)<<2:8))<<4|ti<<8|((J|0)>3?12:(J|0)<2?((Gr|0)!=0)<<2:8)|((D|0)>3?3:(D|0)<2?ci[w+96>>1]!=0:2),V=(D|0)>(x|0),l=V<<3|(He|Lr<<7)>>>5,E=V<<7|(E&254)>>>1,w=w+128|0,Pt=Pt+1|0,(Pt|0)!=4;);for(H=n+2100|0,Pt=E>>>4|0,J=l&255,V=((ur<<5)+n|0)+792|0,E=0,l=1,x=0;g=x|4,xe=P[Rr|0]>>>g|0,D=P[rr|0]>>>g|0,g=ot[h[2661]](a,H,(xe&1)+(D&1)|0,V,0,w)|0,He=ci[w>>1],Oe=(g|0)>0,D=ot[h[2661]](a,H,Oe+(D>>>1&1)|0,V,0,w+32|0)|0,Gr=ci[w+32>>1],xe=ot[h[2661]](a,H,Oe+(xe>>>1&1)|0,V,0,w- -64|0)|0,Lr=ci[w+64>>1],gi=(xe|0)>0,Ki=(D|0)>0,Oe=ot[h[2661]](a,H,gi+Ki|0,V,0,w+96|0)|0,E=((((D|0)>3?3:(D|0)<2?(Gr|0)!=0:2)|((g|0)>3?12:(g|0)<2?((He|0)!=0)<<2:8))<<4|((xe|0)>3?12:(xe|0)<2?((Lr|0)!=0)<<2:8)|((Oe|0)>3?3:(Oe|0)<2?ci[w+96>>1]!=0:2))<<(x<<2)|E,g=(Oe|0)>0,Pt=(g<<5|Ki<<4)<<x|Pt,J=(g<<1|gi)<<4<<x|J,w=w+128|0,g=l,l=0,x=2,!!g;);m[rr|0]=J,m[Rr|0]=Pt,l=ie(se,800)+st|0,h[l+792>>2]=E,h[l+788>>2]=ti,m[l+796|0]=E&43690?0:h[((ur<<5)+n|0)+804>>2],x=(E|ti)!=0;break e}m[rr|0]=0,m[E+-2|0]=0,P[l+768|0]||(m[(E+(se<<1)|0)+1|0]=0,m[E+-1|0]=0),l=ie(se,800)+st|0,h[l+788>>2]=0,h[l+792>>2]=0,m[l+796|0]=0}return h[n+2308>>2]>=1&&(l=h[n+2260>>2]+(h[n+2296>>2]<<2)|0,g=n,n=ie(se,800)+st|0,n=h[((g+(P[n+798|0]<<3)|0)+(P[n+768|0]<<2)|0)+2312>>2],m[l|0]=n,m[l+1|0]=n>>>8,m[l+2|0]=n>>>16,m[l+3|0]=n>>>24,m[l+2|0]=P[l+2|0]|x),Mi=Wt+32|0,!h[a+24>>2]}function nl(n,a,l,g,w){var x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0;Oe=Mi-16|0,Mi=Oe,E=h[n+8>>2];e:{t:switch(h[n>>2]){case 2:ot[h[2733]](g,ie(E,l-a|0),w);break e;case 0:r:{if(a){se=E+-1|0,J=w,x=a;break r}if(x=h[g>>2],x=x+-16777216&-16711936|x&16711935,h[w>>2]=x,se=E+-1|0,(E|0)>=2)for(J=w+4|0,V=g+4|0;xe=H<<2,D=h[xe+V>>2],x=(D&-16711936)+(x&-16711936)&-16711936|(D&16711935)+(x&16711935)&16711935,h[J+xe>>2]=x,H=H+1|0,(se|0)!=(H|0););x=E<<2,J=x+w|0,g=g+x|0,x=1}if(V=x,(V|0)<(l|0))for(x=h[n+4>>2],Wt=1<<x,Lr=Wt+-1|0,He=0-Wt|0,st=0-E|0,Pt=se+Wt>>>x|0,xe=h[n+16>>2]+(ie(Pt,V>>x)<<2)|0;;){if(D=h[g>>2],se=st<<2,x=h[se+J>>2],h[J>>2]=(D&-16711936)+(x&-16711936)&-16711936|(D&16711935)+(x&16711935)&16711935,x=1,H=xe,(E|0)>=2)for(;D=x<<2,ur=D+J|0,Rr=g+D|0,rr=Wt+(x&He)|0,D=(rr|0)>(E|0)?E:rr,ot[h[(h[H>>2]>>>6&60)+10960>>2]](Rr,se+ur|0,D-x|0,ur),H=H+4|0,x=D,(E|0)>(rr|0););if(V=V+1|0,xe=Lr&V?xe:(Pt<<2)+xe|0,x=E<<2,J=x+J|0,g=g+x|0,(l|0)==(V|0))break}if(h[n+12>>2]==(l|0))break e;n=E<<2,_n(w-n|0,(ie(E,(a^-1)+l|0)<<2)+w|0,n);break e;case 1:if((l|0)<=(a|0))break e;for(x=h[n+4>>2],He=1<<x,st=E&0-He,Pt=E-st|0,se=He+-1|0,H=se+E>>>x|0,n=h[n+16>>2]+(ie(H,a>>x)<<2)|0,J=(st|0)<1;;){m[Oe+10|0]=0,xr[Oe+8>>1]=0,V=(E<<2)+g|0;r:{if(J){x=n;break r}for(xe=(st<<2)+g|0,x=n;D=h[x>>2],m[Oe+8|0]=D,m[Oe+10|0]=D>>>16,m[Oe+9|0]=D>>>8,ot[h[2804]](Oe+8|0,g,He,w),x=x+4|0,D=He<<2,w=D+w|0,g=g+D|0,g>>>0<xe>>>0;);}if(g>>>0<V>>>0&&(x=h[x>>2],m[Oe+8|0]=x,m[Oe+10|0]=x>>>16,m[Oe+9|0]=x>>>8,ot[h[2804]](Oe+8|0,g,Pt,w),x=Pt<<2,w=x+w|0,g=g+x|0),a=a+1|0,n=se&a?n:(H<<2)+n|0,(a|0)==(l|0))break}break e;case 3:break t;default:break e}if(x=h[n+4>>2],!((g|0)!=(w|0)|(x|0)<1)){if(w=l-a|0,x=ie(w,(E+(1<<x)|0)+-1>>>x|0)<<2,H=((ie(w,E)<<2)+g|0)-x|0,w=F0(H,g,x),J=h[n+16>>2],se=h[n+8>>2],n=h[n+4>>2],V=8>>>n|0,(V|0)<=7){if((l|0)<=(a|0))break e;for(xe=-1<<V^-1,D=-1<<n^-1,n=(se|0)<1;;){if(x=0,w=0,!n)for(;x&D||(w=P[H+1|0],H=H+4|0),h[g>>2]=h[J+((w&xe)<<2)>>2],w=w>>>V|0,g=g+4|0,x=x+1|0,(se|0)!=(x|0););if(a=a+1|0,(l|0)==(a|0))break}break e}ot[h[2805]](w,J,g,a,l,se);break e}if(J=h[n+16>>2],V=8>>>x|0,(V|0)<=7){if((l|0)<=(a|0))break e;for(xe=-1<<V^-1,D=-1<<x^-1,n=(E|0)<1;;){if(H=0,x=0,!n)for(;H&D||(x=P[g+1|0],g=g+4|0),h[w>>2]=h[J+((x&xe)<<2)>>2],x=x>>>V|0,w=w+4|0,H=H+1|0,(E|0)!=(H|0););if(a=a+1|0,(l|0)==(a|0))break}break e}ot[h[2805]](g,J,w,a,l,E)}Mi=Oe+16|0}function Ll(n,a,l,g,w,x,E,D){var H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0;se=Mi-16|0,Mi=se,h[se+12>>2]=0,h[se+8>>2]=0,Gr=D?h[D+8>>2]:0;e:{if(!n){J=7;break e}if(a>>>0<12){J=7;break e}if(V=a,H=n,Pt=zc(H,5463),!Pt){if(J=3,(P[n+8|0]|P[n+9|0]<<8|(P[n+10|0]<<16|P[n+11|0]<<24))!=1346520407||(He=P[n+4|0]|P[n+5|0]<<8|(P[n+6|0]<<16|P[n+7|0]<<24),He+-12>>>0>4294967274))break e;if(!(!Gr|He>>>0<=a+-8>>>0)){J=7;break e}if(V=a+-12|0,V>>>0<8){J=7;break e}H=n+12|0}st=zc(H,5468);t:{if(st){J=0;break t}if(J=3,(P[H+4|0]|P[H+5|0]<<8|(P[H+6|0]<<16|P[H+7|0]<<24))!=10)break e;if(V>>>0<18){J=7;break e}if(xe=1,rr=(P[H+12|0]|P[H+13|0]<<8|P[H+14|0]<<16)+1|0,ur=(P[H+15|0]|P[H+16|0]<<8|P[H+17|0]<<16)+1|0,sn(rr,0,ur,0),Pt|bi)break e;J=P[H+8|0],V=V+-18|0,H=H+18|0,Lr=(J&2)>>>1|0}w&&(h[w>>2]=J>>>4&1),x&&(h[x>>2]=Lr),E&&(h[E>>2]=0),h[se+8>>2]=ur,h[se+12>>2]=rr;t:{if(!D&&(x=0,!st&Lr))break t;x=0;r:{if(V>>>0<4)break r;i:{if(xe|He|(P[H|0]|P[H+1|0]<<8|(P[H+2|0]<<16|P[H+3|0]<<24))!=1213221953&&st|Pt)break i;if(V>>>0<8)break r;for(Rr=22;;){if(J=3,Oe=P[H+4|0]|P[H+5|0]<<8|(P[H+6|0]<<16|P[H+7|0]<<24),Oe>>>0>4294967286||(Wt=Oe+9&-2,Rr=Wt+Rr|0,Rr>>>0>He>>>0&&!Pt))break e;if((P[H|0]|P[H+1|0]<<8|(P[H+2|0]<<16|P[H+3|0]<<24))==540561494|(P[H|0]|P[H+1|0]<<8|(P[H+2|0]<<16|P[H+3|0]<<24))==1278758998)break i;if(V>>>0<Wt>>>0)break r;if(xe=(P[H|0]|P[H+1|0]<<8|(P[H+2|0]<<16|P[H+3|0]<<24))==1213221953,x=xe?H+8|0:x,ti=xe?Oe:ti,H=H+Wt|0,V=V-Wt|0,!(V>>>0>=8))break}break r}if(V>>>0<8)break r;Oe=P[H|0]|P[H+1|0]<<8|(P[H+2|0]<<16|P[H+3|0]<<24);i:{if(!((P[H|0]|P[H+1|0]<<8|(P[H+2|0]<<16|P[H+3|0]<<24))!=540561494&&(Oe|0)!=1278758998)){if(xe=P[H+4|0]|P[H+5|0]<<8|(P[H+6|0]<<16|P[H+7|0]<<24),He>>>0>=12&&(J=3,xe>>>0>He+-12>>>0))break e;if(V=V+-8|0,xe>>>0>V>>>0&&Gr)break r;H=H+8|0,Oe=(Oe|0)==1278758998;break i}xe=V,Oe=P[H|0]!=47|V>>>0<5?0:P[H+4|0]<32}if(J=3,xe>>>0>4294967286)break e;Lr|!E||(h[E>>2]=Oe?2:1);i:{if(!Oe){if(V>>>0<10)break r;if(je(H,V,xe,se+12|0,se+8|0))break i;break e}if(V>>>0<5)break r;if(!Pr(H,V,se+12|0,se+8|0,w))break e}if(h[se+12>>2]!=(rr|0)|h[se+8>>2]!=(ur|0)&&!st)break e;if(!D)break t;h[D+8>>2]=0,h[D+12>>2]=0,h[D+4>>2]=a,h[D>>2]=n,h[D+32>>2]=Oe,h[D+28>>2]=He,h[D+24>>2]=xe,h[D+20>>2]=ti,h[D+16>>2]=x,h[D+12>>2]=H-n;break t}if(D){J=7;break e}if(J=7,st)break e}if(w&&(h[w>>2]=h[w>>2]|(x|0)!=0),l&&(h[l>>2]=h[se+12>>2]),J=0,!g)break e;h[g>>2]=h[se+8>>2]}return Mi=se+16|0,J}function Jl(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;e:{D=h[n+108>>2],l=a-D|0;t:{if((l|0)<1)break t;E=h[n+8>>2],Oe=h[E>>2],g=h[n+100>>2],V=h[n+16>>2]+(ie(g,D)<<2)|0,H=h[n+20>>2],se=h[n+176>>2];r:{if((se|0)>=1){if(l=se+-1|0,nl((ie(l,20)+n|0)+180|0,D,a,V,H),(se|0)<2)break r;for(;g=l+-1|0,nl((ie(g,20)+n|0)+180|0,D,a,H,H),se=(l|0)>1,l=g,!!se;);break r}if((H|0)==(V|0))break r;_n(H,V,ie(l,g)<<2)}if(D=h[E+84>>2],V=h[n+108>>2],se=(D|0)>(V|0),g=h[E+88>>2],g=(g|0)<(a|0)?g:a,l=se?D:V,(g|0)<=(l|0))break t;if(g=g-l|0,h[E+16>>2]=g,h[E+8>>2]=l-D,l=h[E+76>>2],w=h[E+80>>2]-l|0,h[E+12>>2]=w,He=Oe<<2,xe=(l<<2)+(se?H+ie(He,D-V|0)|0:H)|0,l=h[n+12>>2],D=h[l>>2],D>>>0>10)break e;H=h[l+20>>2],st=h[l+16>>2]+ie(H,h[n+116>>2])|0;r:{if(h[E+92>>2]){if((g|0)<1)break r;for(;;){Oe=g-J|0,se=oi(h[n+268>>2],Oe),l=ie(J,He)+xe|0,tr(l,He,h[h[n+268>>2]+44>>2],se),J=Ra(h[n+268>>2],Oe,l,He)+J|0,l=0,w=h[n+268>>2];i:{if(h[w+64>>2]>=h[w+56>>2])break i;for(se=ie(x,H)+st|0,V=h[w+52>>2],Oe=h[w+68>>2];;){if(h[w+24>>2]>0)break i;if(j(w),ot[h[2662]](Oe,V,1),zo(Oe,V,D,se+ie(l,H)|0),l=l+1|0,!(h[w+64>>2]<h[w+56>>2]))break}}if(x=l+x|0,!((J|0)<(g|0)))break}break r}if((g|0)>=1)for(l=g;zo(xe,w,D,st),st=H+st|0,xe=xe+He|0,x=(l|0)>1,l=l+-1|0,!!x;);x=g}h[n+116>>2]=h[n+116>>2]+x}h[n+108>>2]=a;return}J=h[n+116>>2];e:{if(h[E+92>>2]){if((g|0)<1)break e;for(;;){l=g-st|0,x=oi(h[n+268>>2],l),tr(xe,He,h[h[n+268>>2]+44>>2],x),Oe=ie(x,He),st=Ra(h[n+268>>2],l,xe,He)+st|0,D=0,E=h[n+268>>2];t:{if(h[E+64>>2]>=h[E+56>>2])break t;for(H=h[E+52>>2],V=h[E+68>>2],se=V+3|0,l=J;;){if(h[E+24>>2]>0)break t;if(j(E),ot[h[2662]](V,H,1),w=h[n+12>>2],ot[h[2860]](V,h[w+16>>2]+ie(h[w+32>>2],l)|0,H),x=l>>1,ot[h[2861]](V,h[w+20>>2]+ie(x,h[w+36>>2])|0,h[w+24>>2]+ie(x,h[w+40>>2])|0,H,(l^-1)&1),x=h[w+28>>2],x&&ot[h[2668]](se,0,H,1,x+ie(h[w+44>>2],l)|0,0)|0,D=D+1|0,l=l+1|0,!(h[E+64>>2]<h[E+56>>2]))break}}if(xe=xe+Oe|0,J=J+D|0,!((st|0)<(g|0)))break}break e}if((g|0)<1)break e;for(;;){if(ot[h[2860]](xe,h[l+16>>2]+ie(h[l+32>>2],J)|0,w),x=J>>1,ot[h[2861]](xe,h[l+20>>2]+ie(x,h[l+36>>2])|0,h[l+24>>2]+ie(x,h[l+40>>2])|0,w,(J^-1)&1),x=h[l+28>>2],x&&ot[h[2668]](xe+3|0,0,w,1,x+ie(h[l+44>>2],J)|0,0)|0,J=J+1|0,(g|0)<2)break e;g=g+-1|0,xe=xe+He|0,l=h[n+12>>2]}}h[n+116>>2]=J,h[n+108>>2]=a}function Tl(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;a=h[n+40>>2],g=h[h[a>>2]>>2],w=g+-1|0;e:{if(w>>>0<12&&(l=0,2077>>>(w&65535)&1))break e;l=g+-7>>>0>3}h[a+40>>2]=0,h[a+44>>2]=0,h[a+48>>2]=0,h[a+52>>2]=0;e:{if(!Is(h[a+20>>2],n,l?12:11))break e;l|g+-7>>>0>3||cl(),x=a+40|0;t:{r:{i:{o:{l:{if(h[n+92>>2]){if(l=h[a>>2],D=h[l>>2],E=D+-1|0,g>>>0<=10){if(E>>>0>=12||(w=0,!(2077>>>(E&65535)&1)))break i;break r}if(E>>>0>=12||(g=0,!(2077>>>(E&65535)&1)))break l;break o}n:{if(g>>>0<=10){if(Ba(),h[a+44>>2]=6,!h[n+56>>2])break n;if(w=h[n+12>>2],E=w+1|0,w=ia(1,0,(E&-2)+w|0),h[x>>2]=w,!w)break e;h[a+4>>2]=w,n=h[n+12>>2],h[a+44>>2]=7,n=n+w|0,h[a+8>>2]=n,h[a+12>>2]=n+(E>>1),cl();break n}h[a+44>>2]=8}if(H=1,l)break e;n=9;n:switch(g+-5|0){default:n=g>>>0<11?10:11;break;case 0:case 5:break n}if(h[a+48>>2]=n,g>>>0>10)break e;break t}g=D+-7>>>0>3}if(D=h[n+100>>2],V=h[n+12>>2],J=h[n+16>>2],se=x,w=h[n+96>>2],x=w+1|0,xe=x&-2,Oe=xe<<1,He=w<<1,st=(Oe+He<<2)+(g?0:w<<3)|0,E=ia(1,0,st+(g?283:367)|0),h[se>>2]=E,!E||(H=(E+st|0)+31&-32,h[a+24>>2]=H,h[a+32>>2]=H+168,h[a+28>>2]=H+84,h[a+36>>2]=g?0:H+252|0,ul(H,h[n+12>>2],h[n+16>>2],h[l+16>>2],w,D,h[l+32>>2],1,E),H=V+1>>1,V=J+1>>1,x=x>>1,J=D+1>>1,E=E+(He<<2)|0,ul(h[a+28>>2],H,V,h[l+20>>2],x,J,h[l+36>>2],1,E),ul(h[a+32>>2],H,V,h[l+24>>2],x,J,h[l+40>>2],1,E+(xe<<2)|0),h[a+44>>2]=12,H=1,g))break e;ul(h[a+36>>2],h[n+12>>2],h[n+16>>2],h[l+28>>2],w,D,h[l+44>>2],1,E+(Oe<<2)|0),h[a+48>>2]=13;break t}w=D+-7>>>0>3}if(E=h[n+100>>2],V=h[n+12>>2],J=h[n+16>>2],l=h[n+96>>2],xe=ie(l,6),D=(w?xe:l<<3)<<2,se=x,Oe=ie(l,3),He=l<<2,x=D+(w?Oe:He)|0,g=ia(1,0,x+(w?283:367)|0),h[se>>2]=g,!g||(H=1,x=(g+x|0)+31&-32,h[a+24>>2]=x,h[a+32>>2]=x+168,h[a+28>>2]=x+84,h[a+36>>2]=w?0:x+252|0,se=x,x=g+D|0,ul(se,h[n+12>>2],h[n+16>>2],x,l,E,0,1,g),D=V+1>>1,V=J+1>>1,J=l<<1,ul(h[a+28>>2],D,V,l+x|0,l,E,0,1,g+(J<<2)|0),ul(h[a+32>>2],D,V,x+J|0,l,E,0,1,g+(He<<2)|0),h[a+44>>2]=14,Nl(),w))break e;ul(h[a+36>>2],h[n+12>>2],h[n+16>>2],x+Oe|0,l,E,0,1,g+(xe<<2)|0),h[a+48>>2]=15,n=16;r:switch(h[h[a>>2]>>2]+-5|0){default:n=17;break;case 0:case 5:break r}h[a+52>>2]=n}co()}return H|0}function ku(n,a,l,g,w){var x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0,gs=0,dl=0,su=0;Gr=Mi-256|0,Mi=Gr,x=(w|0)/25|0;e:{if(!n|w>>>0>100|((a|0)<1|(l|0)<1)||(E=1,Ki=l+-1|0,He=a+-1|0,w=(x<<1|1)>(a|0)?He>>1:x,J=(w<<1|1)>(l|0)?Ki>>1:w,(J|0)<1)||(E=0,V=a<<1,x=J<<1,w=ie(V,x+2|0),ur=ia(1,0,(w+V|0)+4094|0),!ur))break e;for(Wt=0-J|0,x=x|1,xe=(ie(x,a)<<1)+ur|0,H=xe-V|0,Xo(H,0,V),st=Xo(Gr,0,256),Rr=w+ur|0,Lr=ie(x,x),ti=255,se=255,x=n;;){for(E=0;w=P[E+x|0],m[w+st|0]=1,Oe=(D|0)<(w|0),D=Oe?w:D,Un=Oe?w:Un,Oe=(se|0)>(w|0),se=Oe?w:se,ti=Oe?w:ti,E=E+1|0,(E|0)!=(a|0););if(x=g+x|0,Pt=Pt+1|0,(Pt|0)==(l|0))break}for(D=D-se|0,Oe=262144/(Lr>>>0)|0,x=V+Rr|0,E=-1,se=0,w=0;P[w+st|0]&&(se=se+1|0,(E|0)>=0&&(E=w-E|0,D=(E|0)<(D|0)?E:D),E=w),w=w+1|0,(w|0)!=256;);for(E=D<<2,st=ie(D,12)>>2,D=E-st|0,Lr=x+2046|0,w=1;;){Pt=w<<1,rr=Pt+Lr|0,x=w;t:{if((w|0)<=(st|0)||(x=0,(E|0)<=(w|0)))break t;x=(ie(st,E-w|0)|0)/(D|0)|0}if(x=x>>>2|0,xr[rr>>1]=x,xr[Lr-Pt>>1]=0-x,w=w+1|0,(w|0)==1024)break}if(xr[Lr>>1]=0,!((se|0)<3|(Wt|0)>=(l|0)))for(Pt=J^-1,se=a-J|0,st=J+1|0,gs=J+-1|0,dl=(V-J|0)+-2|0,su=(He<<1)+xe|0,E=ur,x=n;;){if(D=0,w=0,rr=(a|0)<1,!rr)for(;D=P[w+x|0]+(D&65535)|0,V=w<<1,He=D+ci[V+H>>1]|0,gi=V+xe|0,V=E+V|0,xr[gi>>1]=He-ci[V>>1],xr[V>>1]=He,w=w+1|0,(w|0)!=(a|0););if(D=(Wt|0)<(Ki|0)?g+x|0:x,V=(Wt|0)>-1,He=(a<<1)+E|0,gi=(He|0)==(xe|0),(Wt|0)>=(J|0)){if(w=0,(J|0)>-1){for(;xr[(w<<1)+Rr>>1]=ie(Oe,ci[(J-w<<1)+xe>>1]+ci[(w+gs<<1)+xe>>1]&65535)>>>16,H=(w|0)==(J|0),w=w+1|0,!H;);w=st}if((w|0)<(se|0)){for(;xr[(w<<1)+Rr>>1]=ie(Oe,ci[(w+J<<1)+xe>>1]-ci[(w+Pt<<1)+xe>>1]&65535)>>>16,w=w+1|0,(se|0)!=(w|0););w=se}if((w|0)<(a|0))for(;xr[(w<<1)+Rr>>1]=ie(Oe,((ci[su>>1]<<1)-ci[(dl-w<<1)+xe>>1]|0)-ci[(w+Pt<<1)+xe>>1]&65535)>>>16,w=w+1|0,(w|0)!=(a|0););if(w=0,!rr)for(;rr=n+w|0,H=P[rr|0],(Un|0)<=(H|0)|(ti|0)>=(H|0)||(H=H+xr[(ci[(w<<1)+Rr>>1]-(H<<2)<<1)+Lr>>1]|0,H=(H|0)>0?H:0,m[rr|0]=(H|0)<255?H:255),w=w+1|0,(w|0)!=(a|0););n=n+g|0}if(x=V?D:x,H=E,E=gi?ur:He,Wt=Wt+1|0,(Wt|0)==(l|0))break}Fn(ur),E=1}return Mi=Gr+256|0,E}function Ec(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;e:{if((w|0)<=15)for(Oe=h[(w<<2)+a>>2]+ie(l,11)|0,l=h[n+8>>2],H=h[n+4>>2];;){E=P[Oe|0];t:{if((l|0)>-1)break t;if(se=h[n+12>>2],se>>>0<Oi[n+20>>2]){D=P[se|0]|P[se+1|0]<<8|(P[se+2|0]<<16|P[se+3|0]<<24),h[n+12>>2]=se+3,l=l+24|0,h[n+8>>2]=l,h[n>>2]=h[n>>2]<<24|(D>>>8&65280|(D<<8&16711680|D<<24))>>>8;break t}mn(n),l=h[n+8>>2]}xe=n,D=l,V=h[n>>2],J=V>>>l|0,E=ie(E,H)>>>8|0;t:{if(J>>>0>E>>>0){V=((E^-1)<<l)+V|0,h[n>>2]=V,H=H-E|0;break t}H=E+1|0}if(se=wn(H)^24,l=D-se|0,h[xe+8>>2]=l,H=(H<<se)+-1|0,h[n+4>>2]=H,se=w,xe=w,J>>>0<=E>>>0)break e;for(;;){E=P[Oe+1|0];t:{if((l|0)>-1)break t;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){D=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=w+3,V=V<<24|(D>>>8&65280|(D<<8&16711680|D<<24))>>>8,h[n>>2]=V;break t}mn(n),V=h[n>>2],l=h[n+8>>2]}xe=n,D=l,J=V>>>l|0,E=ie(E,H)>>>8|0;t:{if(J>>>0>E>>>0){V=((E^-1)<<l)+V|0,h[n>>2]=V,H=H-E|0;break t}H=E+1|0}if(w=wn(H)^24,l=D-w|0,h[xe+8>>2]=l,H=(H<<w)+-1|0,h[n+4>>2]=H,w=se+1|0,J>>>0<=E>>>0){if(xe=16,(w|0)==16)break e;Oe=h[(w<<2)+a>>2],se=w;continue}break}He=h[(w<<2)+a>>2],J=P[Oe+2|0];t:{if((l|0)>-1)break t;if(D=h[n+12>>2],D>>>0<Oi[n+20>>2]){E=P[D|0]|P[D+1|0]<<8|(P[D+2|0]<<16|P[D+3|0]<<24),l=l+24|0,h[n+8>>2]=l,h[n+12>>2]=D+3,V=V<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=V;break t}mn(n),V=h[n>>2],l=h[n+8>>2]}xe=n,D=l,st=V>>>l|0,J=ie(H,J)>>>8|0;t:{if(st>>>0>J>>>0){h[n>>2]=((J^-1)<<l)+V,l=H-J|0;break t}l=J+1|0}E=wn(l)^24,D=D-E|0,h[xe+8>>2]=D,h[n+4>>2]=(l<<E)+-1;t:{if(st>>>0<=J>>>0){V=1,Oe=He+11|0;break t}V=Wu(n,Oe),D=h[n+8>>2],Oe=He+22|0}t:{if((D|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,D=D+24|0,h[n+8>>2]=D,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}mn(n),D=h[n+8>>2]}if(l=D+-1|0,h[n+8>>2]=l,H=h[n+4>>2],J=H>>>1|0,He=h[n>>2],E=J-(He>>>D|0)>>31,H=E+H|1,h[n+4>>2]=H,h[n>>2]=He-((E&J+1)<<D),xr[(P[se+5328|0]<<1)+x>>1]=ie(h[(((se|0)>0)<<2)+g>>2],(E^V)-E|0),!((se|0)<15))break}xe=16}return xe|0}function Ql(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;e:{if((w|0)<=15)for(Oe=h[(w<<2)+a>>2]+ie(l,11)|0,D=h[n+8>>2],E=h[n+4>>2];;){V=P[Oe|0];t:{if((D|0)>-1)break t;if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){se=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,D=D+24|0,h[n+8>>2]=D,h[n>>2]=h[n>>2]<<24|(se>>>8&65280|(se<<8&16711680|se<<24))>>>8;break t}mn(n),D=h[n+8>>2]}if(H=h[n>>2],l=ie(E,V)>>>8|0,V=H>>>D>>>0<=l>>>0,V||(l=l+1|0,H=H-(l<<D)|0,h[n>>2]=H,l=E-l|0),l>>>0<=126&&(D=D-P[l+9056|0]|0,h[n+8>>2]=D,l=P[l+9184|0]),h[n+4>>2]=l,se=w,E=w,V)break e;for(;;){V=P[Oe+1|0];t:{if((D|0)>-1)break t;if(w=h[n+12>>2],w>>>0<Oi[n+20>>2]){E=P[w|0]|P[w+1|0]<<8|(P[w+2|0]<<16|P[w+3|0]<<24),D=D+24|0,h[n+8>>2]=D,h[n+12>>2]=w+3,H=H<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8,h[n>>2]=H;break t}mn(n),H=h[n>>2],D=h[n+8>>2]}J=H>>>D|0,E=ie(l,V)>>>8|0;t:{if(J>>>0<=E>>>0){l=E;break t}w=E+1|0,H=H-(w<<D)|0,h[n>>2]=H,l=l-w|0}if(l>>>0<=126&&(D=D-P[l+9056|0]|0,h[n+8>>2]=D,l=P[l+9184|0]),h[n+4>>2]=l,w=se+1|0,V=h[(w<<2)+a>>2],J>>>0<=E>>>0){if(E=16,se=w,Oe=V,(w|0)!=16)continue;break e}break}xe=P[Oe+2|0];t:{if((D|0)>-1)break t;if(E=h[n+12>>2],E>>>0<Oi[n+20>>2]){J=P[E|0]|P[E+1|0]<<8|(P[E+2|0]<<16|P[E+3|0]<<24),D=D+24|0,h[n+8>>2]=D,h[n+12>>2]=E+3,H=H<<24|(J>>>8&65280|(J<<8&16711680|J<<24))>>>8,h[n>>2]=H;break t}mn(n),H=h[n>>2],D=h[n+8>>2]}J=n,He=H>>>D|0,xe=ie(l,xe)>>>8|0,E=xe,He>>>0>E>>>0&&(E=xe+1|0,h[n>>2]=H-(E<<D),E=l-E|0),E>>>0<=126&&(D=D-P[E+9056|0]|0,h[n+8>>2]=D,E=P[E+9184|0]),h[J+4>>2]=E;t:{if(He>>>0<=xe>>>0){J=1,Oe=V+11|0;break t}J=Wu(n,Oe),D=h[n+8>>2],Oe=V+22|0}t:{if((D|0)>-1){l=D;break t}if(l=h[n+12>>2],l>>>0<Oi[n+20>>2]){E=P[l|0]|P[l+1|0]<<8|(P[l+2|0]<<16|P[l+3|0]<<24),h[n+12>>2]=l+3,l=D+24|0,h[n+8>>2]=l,h[n>>2]=h[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}mn(n),l=h[n+8>>2]}if(D=l+-1|0,h[n+8>>2]=D,E=h[n+4>>2],H=E>>>1|0,xe=h[n>>2],V=H-(xe>>>l|0)>>31,E=E+V|1,h[n+4>>2]=E,h[n>>2]=xe-((V&H+1)<<l),xr[(P[se+5328|0]<<1)+x>>1]=ie(h[(((se|0)>0)<<2)+g>>2],(V^J)-V|0),!((se|0)<15))break}E=16}return E|0}function ao(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;e:{if((l|0)<0|(g|0)<1||(H=h[a+88>>2],(l+g|0)>(H|0)))break e;J=h[a>>2];t:{r:{if(h[n+2356>>2])break r;x=h[n+2344>>2];i:{if(x)break i;if(w=Lu(1,0,144),h[n+2344>>2]=w,!w)break e;if(w=h[a+88>>2],E=w,x=w>>31,w=h[a>>2],x=ia(sn(E,x,w,w>>31),bi,1),h[n+2360>>2]=x,!x||(h[n+2368>>2]=0,h[n+2364>>2]=x,E=h[n+2348>>2],D=h[n+2352>>2],w=h[n+2344>>2],Nc(),h[w+136>>2]=x,h[w>>2]=h[a>>2],h[w+4>>2]=h[a+4>>2],D>>>0<2)||(x=P[E|0]&3,h[w+8>>2]=x,h[w+12>>2]=P[E|0]>>>2&3,V=P[E|0]>>>4&3,h[w+16>>2]=V,x>>>0>1|V>>>0>1|P[E|0]>63)||(x=D+-1|0,D=w+24|0,b0(D),fl(0,D),h[w- -64>>2]=w,h[w+24>>2]=h[a>>2],h[w+28>>2]=h[a+4>>2],h[w+96>>2]=h[a+72>>2],h[w+100>>2]=h[a+76>>2],h[w+104>>2]=h[a+80>>2],h[w+108>>2]=h[a+84>>2],h[w+112>>2]=h[a+88>>2],h[w+8>>2]?w=Cc(w,E+1|0,x):w=x>>>0>=ie(h[w+4>>2],h[w>>2])>>>0,!w))break t;if(x=h[n+2344>>2],h[x+16>>2]!=1){h[n+2372>>2]=0;break i}g=H-l|0}se=h[x+112>>2];i:{if(!h[x+8>>2]){D=h[x>>2],E=ie(D,l),w=E+h[n+2364>>2]|0,H=(E+h[n+2348>>2]|0)+1|0,E=h[n+2368>>2];o:{l:{if(V=h[x+12>>2],V){if((g|0)<1)break o;if(ot[h[(V<<2)+10912>>2]](E,H,w,D),V=1,(g|0)!=1)break l;E=w;break o}if(x=0,(g|0)<=0)break o;for(;E=w,w=_n(w,H,D),H=D+H|0,w=w+D|0,x=x+1|0,(x|0)!=(g|0););break o}for(;H=D+H|0,E=w+D|0,ot[h[(h[x+12>>2]<<2)+10912>>2]](w,H,E,D),w=E,V=V+1|0,(V|0)!=(g|0););}h[n+2368>>2]=E,g=l+g|0;break i}if(g=l+g|0,!za(x,g))break t}i:{if((g|0)>=(se|0)){h[n+2356>>2]=1;break i}if(!h[n+2356>>2])break r}if(g=h[n+2344>>2],g&&(Bh(h[g+20>>2]),h[g+20>>2]=0,Fn(g)),h[n+2344>>2]=0,g=h[n+2372>>2],(g|0)<1)break r;if(E=h[a+76>>2],w=h[a+84>>2],!ku(E+(h[n+2364>>2]+ie(w,J)|0)|0,h[a+80>>2]-E|0,h[a+88>>2]-w|0,J,g))break t}return h[n+2364>>2]+ie(l,J)|0}Fn(h[n+2360>>2]),h[n+2360>>2]=0,h[n+2364>>2]=0,a=h[n+2344>>2],a&&(Bh(h[a+20>>2]),h[a+20>>2]=0,Fn(a)),h[n+2344>>2]=0}return 0}function ks(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0;h[n+152>>2]=0,H=1;e:{t:{if(h[n+148>>2]>=1){if(!(ot[h[2558]](n+124|0)|0))break t;h[n+140>>2]=n+180,h[n+136>>2]=n,h[n+132>>2]=18,H=h[n+2308>>2]>0?3:2}h[n+156>>2]=H;break e}if(!No(n,1,4941))return 0}E=h[n+288>>2],J=E<<2,l=h[n+148>>2],V=h[n+2308>>2],xe=(V|0)>0?ie(J,(l|0)<1?1:2):0,Oe=E<<5,st=H<<4,Pt=ie(Oe,(ie(st+P[V+4863|0]|0,3)|0)/2|0),He=(E<<1)+2|0,Wt=ie(ie(E,(l|0)==2?2:1),800),x=0;e:{if(!h[n+2348>>2])break e;rr=sn(ci[n+50>>1],0,ci[n+48>>1],0),x=bi}ur=x,l=0,g=J,w=g+Oe|0,w>>>0<g>>>0&&(l=1),g=w,w=g+He|0,w>>>0<g>>>0&&(l=l+1|0),g=w,w=g+xe|0,w>>>0<g>>>0&&(l=l+1|0),g=w,w=g+Wt|0,w>>>0<g>>>0&&(l=l+1|0),g=w,w=g+Pt|0,w>>>0<g>>>0&&(l=l+1|0),g=w,w=g+rr|0,l=l+x|0,x=w,l=w>>>0<g>>>0?l+1|0:l,g=l,w=w+832|0,w>>>0<832&&(l=l+1|0);e:{if(!l&w>>>0>4294967264|l>>>0>0)break e;D=h[n+2288>>2];t:{r:{if(l=g,g=x+863|0,g>>>0<863&&(l=l+1|0),x=g,w=g,g=l,!l&w>>>0>Oi[n+2292>>2]|l>>>0>0){if(Fn(D),h[n+2292>>2]=0,D=ia(x,g,1),h[n+2288>>2]=D,!D)break r;h[n+2292>>2]=x,V=h[n+2308>>2]}h[n+2244>>2]=D,h[n+160>>2]=0,l=D+J|0,h[n+2252>>2]=l,l=l+Oe|0,se=l+2|0,h[n+2256>>2]=se,l=l+He|0,w=xe?l:0,h[n+2260>>2]=w,h[n+172>>2]=w,l=l+xe|0,g=h[n+148>>2],(V|0)<1|(g|0)<1||(h[n+172>>2]=w+(E<<2)),l=l+31&-32,h[n+2264>>2]=l,l=l+832|0,h[n+2304>>2]=l,h[n+176>>2]=l,(g|0)==2&&(h[n+176>>2]=l+ie(E,800)),h[n+152>>2]=0,x=E<<3,h[n+2284>>2]=x,w=E<<4,h[n+2280>>2]=w,l=l+Wt|0,h[n+2364>>2]=rr|ur?l+Pt|0:0,g=P[V+4863|0],l=l+ie(g,w)|0,h[n+2268>>2]=l,g=ie(x,g>>>1|0),l=g+(l+ie(w,st)|0)|0,h[n+2272>>2]=l,h[n+2276>>2]=g+(l+(ie(x,H)<<3)|0),Xo(se+-2|0,0,He),l=h[n+2256>>2]+-2|0,m[l|0]=0,m[l+1|0]=0,h[n+2296>>2]=0,h[n+2248>>2]=0,Xo(h[n+2244>>2],0,J);break t}if(!No(n,1,4971))break e}h[a+8>>2]=0,h[a+20>>2]=h[n+2268>>2],h[a+24>>2]=h[n+2272>>2],h[a+28>>2]=h[n+2276>>2],h[a+32>>2]=h[n+2280>>2],n=h[n+2284>>2],h[a+104>>2]=0,h[a+36>>2]=n,Jc(),se=1}return se}function va(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;H=Mi-16|0,Mi=H,V=2;e:{if(!g|((a|0)<1|(n|0)<1))break e;t:{if(!l)break t;r:{if(!h[l+8>>2]){w=a,x=n;break r}if(w=h[l+24>>2],(w|0)<1||(x=h[l+20>>2],(x|0)<1)||(E=h[l+16>>2],D=h[l+12>>2],(E|D)<0|((D&-2)+x|0)>(n|0)|((E&-2)+w|0)>(a|0)))break e}if(!h[l+28>>2]){a=w,n=x;break t}if(h[H+12>>2]=h[l+32>>2],h[H+8>>2]=h[l+36>>2],!fe(x,w,H+12|0,H+8|0))break e;a=h[H+8>>2],n=h[H+12>>2]}if(h[g+8>>2]=a,h[g+4>>2]=n,(a|0)<1|(n|0)<1||(D=h[g>>2],D>>>0>12))break e;t:{if(h[g+80>>2]|h[g+12>>2]>0)break t;if(x=n,w=P[D+1157|0],sn(n,0,w,0),bi)break e;E=a,Oe=ie(n,w),w=Oe,w=sn(a,0,w,w>>31),J=bi,V=1;r:{if(D>>>0<11){a=0,E=0,n=0;break r}x=sn(x,0,E,0),E=(D|0)==12,st=E?x:0,se=E?bi:0,He=(n+1|0)/2|0,x=He,a=(a+1|0)/2|0,a=sn(x,x>>31,a,a>>31),E=E?n:0,n=bi}if(xe=a,n=n<<1|a>>>31,se=se+J|0,J=w+st|0,J>>>0<w>>>0&&(se=se+1|0),xe=xe<<1,x=xe+J|0,n=n+se|0,n=ia(x,x>>>0<J>>>0?n+1|0:n,1),!n)break e;if(h[g+16>>2]=n,h[g+80>>2]=n,D>>>0>=11){h[g+48>>2]=w,h[g+32>>2]=Oe,h[g+52>>2]=a,h[g+36>>2]=He,h[g+56>>2]=a,h[g+40>>2]=He,n=n+w|0,h[g+20>>2]=n,h[g+24>>2]=n+a,(D|0)==12&&(h[g+28>>2]=n+xe),h[g+44>>2]=E,h[g+60>>2]=st;break t}h[g+24>>2]=w,h[g+20>>2]=Oe}if(V=ds(g),V|!l)break e;if(!h[l+48>>2]){V=0;break e}if(n=h[g+8>>2]+-1|0,Oi[g>>2]<=10){V=0,l=g+20|0,a=h[l>>2],h[l>>2]=0-a,h[g+16>>2]=h[g+16>>2]+ie(n,a);break e}if(V=0,l=g+32|0,a=h[l>>2],h[l>>2]=0-a,w=g+36|0,l=h[w>>2],h[w>>2]=0-l,x=g+40|0,w=h[x>>2],h[x>>2]=0-w,h[g+16>>2]=h[g+16>>2]+ie(n,a),a=g+20|0,x=a,E=h[a>>2],a=n>>1,h[x>>2]=E+ie(a,l),l=g+24|0,h[l>>2]=h[l>>2]+ie(a,w),l=h[g+28>>2],!l)break e;w=g+44|0,a=h[w>>2],h[w>>2]=0-a,h[g+28>>2]=l+ie(n,a)}return Mi=H+16|0,V}function Pl(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0;for(E=Mi+-64|0,w=xr[n+16>>1],x=xr[n>>1],D=w+x|0,l=xr[n+8>>1],g=xr[n+24>>1],H=((ie(l,20091)>>16)+l|0)+(ie(g,35468)>>16)|0,h[E+12>>2]=D-H,w=x-w|0,l=((ie(l,35468)>>16)-g|0)-(ie(g,20091)>>16)|0,h[E+8>>2]=w-l,h[E+4>>2]=l+w,h[E>>2]=D+H,w=xr[n+18>>1],x=xr[n+2>>1],D=w+x|0,l=xr[n+10>>1],g=xr[n+26>>1],H=((ie(l,20091)>>16)+l|0)+(ie(g,35468)>>16)|0,h[E+28>>2]=D-H,w=x-w|0,l=((ie(l,35468)>>16)-g|0)-(ie(g,20091)>>16)|0,h[E+24>>2]=w-l,h[E+20>>2]=l+w,l=D+H|0,h[E+16>>2]=l,x=xr[n+20>>1],D=xr[n+4>>1],H=x+D|0,g=xr[n+12>>1],w=xr[n+28>>1],V=((ie(g,20091)>>16)+g|0)+(ie(w,35468)>>16)|0,h[E+44>>2]=H-V,x=D-x|0,g=((ie(g,35468)>>16)-w|0)-(ie(w,20091)>>16)|0,h[E+40>>2]=x-g,h[E+36>>2]=g+x,h[E+32>>2]=H+V,w=xr[n+22>>1],x=xr[n+6>>1],D=w+x|0,g=xr[n+14>>1],n=xr[n+30>>1],H=((ie(g,20091)>>16)+g|0)+(ie(n,35468)>>16)|0,h[E+60>>2]=D-H,w=x-w|0,n=((ie(g,35468)>>16)-n|0)-(ie(n,20091)>>16)|0,h[E+56>>2]=w-n,h[E+52>>2]=n+w,h[E+48>>2]=D+H,n=E,E=0;;){if(g=h[n+48>>2],w=((ie(l,20091)>>16)+l|0)+(ie(g,35468)>>16)|0,x=h[n>>2]+4|0,D=h[n+32>>2],H=x+D|0,V=P[a|0]+(w+H>>3)|0,V=(V|0)>0?V:0,m[a|0]=(V|0)<255?V:255,l=((ie(l,35468)>>16)-g|0)-(ie(g,20091)>>16)|0,g=x-D|0,x=P[a+1|0]+(l+g>>3)|0,x=(x|0)>0?x:0,m[a+1|0]=(x|0)<255?x:255,l=P[a+2|0]+(g-l>>3)|0,l=(l|0)>0?l:0,m[a+2|0]=(l|0)<255?l:255,l=P[a+3|0]+(H-w>>3)|0,l=(l|0)>0?l:0,m[a+3|0]=(l|0)<255?l:255,E=E+1|0,(E|0)!=4){a=a+32|0,l=h[n+20>>2],n=n+4|0;continue}break}}function ol(n){n=n|0;var a=0;a=sn(P[n+31|0],0,16843009,16843009),m[n+32|0]=a,m[n+33|0]=a>>>8,m[n+34|0]=a>>>16,m[n+35|0]=a>>>24,a=bi,m[n+36|0]=a,m[n+37|0]=a>>>8,m[n+38|0]=a>>>16,m[n+39|0]=a>>>24,a=sn(P[n+63|0],0,16843009,16843009),m[n+64|0]=a,m[n+65|0]=a>>>8,m[n+66|0]=a>>>16,m[n+67|0]=a>>>24,a=bi,m[n+68|0]=a,m[n+69|0]=a>>>8,m[n+70|0]=a>>>16,m[n+71|0]=a>>>24,a=sn(P[n+95|0],0,16843009,16843009),m[n+96|0]=a,m[n+97|0]=a>>>8,m[n+98|0]=a>>>16,m[n+99|0]=a>>>24,a=bi,m[n+100|0]=a,m[n+101|0]=a>>>8,m[n+102|0]=a>>>16,m[n+103|0]=a>>>24,a=sn(P[n+127|0],0,16843009,16843009),m[n+128|0]=a,m[n+129|0]=a>>>8,m[n+130|0]=a>>>16,m[n+131|0]=a>>>24,a=bi,m[n+132|0]=a,m[n+133|0]=a>>>8,m[n+134|0]=a>>>16,m[n+135|0]=a>>>24,a=sn(P[n+159|0],0,16843009,16843009),m[n+160|0]=a,m[n+161|0]=a>>>8,m[n+162|0]=a>>>16,m[n+163|0]=a>>>24,a=bi,m[n+164|0]=a,m[n+165|0]=a>>>8,m[n+166|0]=a>>>16,m[n+167|0]=a>>>24,a=sn(P[n+191|0],0,16843009,16843009),m[n+192|0]=a,m[n+193|0]=a>>>8,m[n+194|0]=a>>>16,m[n+195|0]=a>>>24,a=bi,m[n+196|0]=a,m[n+197|0]=a>>>8,m[n+198|0]=a>>>16,m[n+199|0]=a>>>24,a=sn(P[n+223|0],0,16843009,16843009),m[n+224|0]=a,m[n+225|0]=a>>>8,m[n+226|0]=a>>>16,m[n+227|0]=a>>>24,a=bi,m[n+228|0]=a,m[n+229|0]=a>>>8,m[n+230|0]=a>>>16,m[n+231|0]=a>>>24,a=sn(P[n+-1|0],0,16843009,16843009),m[n|0]=a,m[n+1|0]=a>>>8,m[n+2|0]=a>>>16,m[n+3|0]=a>>>24,a=bi,m[n+4|0]=a,m[n+5|0]=a>>>8,m[n+6|0]=a>>>16,m[n+7|0]=a>>>24}function Ea(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0;e:{if((l|0)!=1){for(;g=P[a|0]+(P[n|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=P[a+1|0]+(P[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=P[a+2|0]+(P[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,g=P[a+3|0]+(P[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+3|0]=(g|0)<255?g:255,g=P[a+4|0]+(P[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+4|0]=(g|0)<255?g:255,g=P[a+5|0]+(P[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+5|0]=(g|0)<255?g:255,g=P[a+6|0]+(P[n+6|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+6|0]=(g|0)<255?g:255,g=P[a+7|0]+(P[n+7|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+7|0]=(g|0)<255?g:255,n=n+8|0,a=a+l|0,w=w+1|0,(w|0)!=8;);break e}for(w=P[a+6|0];g=P[a|0]+(P[n|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=P[a+1|0]+(P[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=P[a+2|0]+(P[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,g=P[a+3|0]+(P[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+3|0]=(g|0)<255?g:255,g=P[a+4|0]+(P[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+4|0]=(g|0)<255?g:255,g=P[a+5|0]+(P[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+5|0]=(g|0)<255?g:255,w=(w&255)+(P[n+6|0]+-120>>4)|0,w=(w|0)>0?w:0,m[a+6|0]=(w|0)<255?w:255,w=P[a+7|0]+(P[n+7|0]+-120>>4)|0,w=(w|0)>0?w:0,w=(w|0)<255?w:255,m[a+7|0]=w,n=n+8|0,a=a+l|0,x=x+1|0,(x|0)!=8;);}}function As(n){n=n|0;var a=0,l=0;a=sn((P[n+223|0]+(P[n+-25|0]+(P[n+191|0]+(P[n+-26|0]+(P[n+159|0]+(P[n+-27|0]+(P[n+127|0]+(P[n+-28|0]+(P[n+95|0]+(P[n+-29|0]+(P[n+63|0]+(P[n+-30|0]+(P[n+31|0]+(P[n+-31|0]+(P[n+-32|0]+P[n+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[n+224|0]=a,m[n+225|0]=a>>>8,m[n+226|0]=a>>>16,m[n+227|0]=a>>>24,l=bi,m[n+228|0]=l,m[n+229|0]=l>>>8,m[n+230|0]=l>>>16,m[n+231|0]=l>>>24,m[n+192|0]=a,m[n+193|0]=a>>>8,m[n+194|0]=a>>>16,m[n+195|0]=a>>>24,m[n+196|0]=l,m[n+197|0]=l>>>8,m[n+198|0]=l>>>16,m[n+199|0]=l>>>24,m[n+160|0]=a,m[n+161|0]=a>>>8,m[n+162|0]=a>>>16,m[n+163|0]=a>>>24,m[n+164|0]=l,m[n+165|0]=l>>>8,m[n+166|0]=l>>>16,m[n+167|0]=l>>>24,m[n+128|0]=a,m[n+129|0]=a>>>8,m[n+130|0]=a>>>16,m[n+131|0]=a>>>24,m[n+132|0]=l,m[n+133|0]=l>>>8,m[n+134|0]=l>>>16,m[n+135|0]=l>>>24,m[n+96|0]=a,m[n+97|0]=a>>>8,m[n+98|0]=a>>>16,m[n+99|0]=a>>>24,m[n+100|0]=l,m[n+101|0]=l>>>8,m[n+102|0]=l>>>16,m[n+103|0]=l>>>24,m[n+64|0]=a,m[n+65|0]=a>>>8,m[n+66|0]=a>>>16,m[n+67|0]=a>>>24,m[n+68|0]=l,m[n+69|0]=l>>>8,m[n+70|0]=l>>>16,m[n+71|0]=l>>>24,m[n+32|0]=a,m[n+33|0]=a>>>8,m[n+34|0]=a>>>16,m[n+35|0]=a>>>24,m[n+36|0]=l,m[n+37|0]=l>>>8,m[n+38|0]=l>>>16,m[n+39|0]=l>>>24,m[n|0]=a,m[n+1|0]=a>>>8,m[n+2|0]=a>>>16,m[n+3|0]=a>>>24,m[n+4|0]=l,m[n+5|0]=l>>>8,m[n+6|0]=l>>>16,m[n+7|0]=l>>>24}function al(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0;e:{if(l=h[a+48>>2],!l||ot[l|0](a)|0)break e;return No(n,6,4844),h[n>>2]}e:{t:{r:{i:{if(h[a+68>>2]){h[n+2308>>2]=0,l=0;break i}if(l=2,x=h[n+2308>>2],g=P[x+4863|0],(x|0)==2)break r;l=x}if(x=h[a+76>>2]-g|0,h[n+296>>2]=x>>4,w=h[a+84>>2]-g|0,h[n+300>>2]=w>>4,(x|0)<=-1&&(h[n+296>>2]=0),(w|0)>-1)break e;x=n+300|0;break t}h[n+296>>2]=0,x=n+300|0}h[x>>2]=0}if(g=g+15|0,x=g+h[a+88>>2]>>4,h[n+308>>2]=x,w=h[n+288>>2],a=g+h[a+80>>2]>>4,h[n+304>>2]=(a|0)>(w|0)?w:a,a=h[n+292>>2],(x|0)>(a|0)&&(h[n+308>>2]=a),(l|0)>=1)for(V=h[n+68>>2],J=h[n+104>>2],x=0;;){a=(x<<3)+n|0;e:{if(J){if(l=m[(n+x|0)+120|0],g=l,h[n+112>>2])break e;g=l+h[n+60>>2]|0;break e}g=h[n+60>>2]}l=g,E=a+2312|0,l=V?h[n+72>>2]+l|0:l;e:{if((l|0)>=1){w=(l|0)<63?l:63,l=(l|0)>0?w:0,H=a+2313|0,D=h[n+64>>2],(D|0)>=1&&(w=9-D|0,D=l>>>((D|0)>4?2:1)|0,w=(D|0)>(w|0)?w:D),w=(w|0)>1?w:1,m[H|0]=w,m[E|0]=w+(l<<1),m[a+2315|0]=(l|0)>39?2:(l|0)>14;break e}m[E|0]=0}m[a+2314|0]=0,w=a+2316|0,g=V?h[n+88>>2]+(h[n+72>>2]+g|0)|0:g,E=(g|0)>0;e:{if(!E){m[w|0]=0;break e}l=(g|0)<63?g:63,g=E?l:0,H=a+2317|0,E=h[n+64>>2],(E|0)>=1&&(l=9-E|0,E=g>>>((E|0)>4?2:1)|0,l=(E|0)>(l|0)?l:E),l=(l|0)>1?l:1,m[H|0]=l,m[w|0]=l+(g<<1),m[a+2319|0]=(g|0)>39?2:(g|0)>14}if(m[a+2318|0]=1,x=x+1|0,(x|0)==4)break}return 0}function eu(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;g=Mi+-64|0,w=xr[n+24>>1],l=xr[n>>1],x=w+l|0,D=xr[n+16>>1],H=xr[n+8>>1],E=D+H|0,h[g+32>>2]=x-E,w=l-w|0,l=H-D|0,h[g+48>>2]=w-l,h[g+16>>2]=l+w,xe=x+E|0,h[g>>2]=xe,w=xr[n+26>>1],l=xr[n+2>>1],x=w+l|0,D=xr[n+18>>1],H=xr[n+10>>1],E=D+H|0,h[g+36>>2]=x-E,w=l-w|0,l=H-D|0,h[g+52>>2]=w-l,w=l+w|0,h[g+20>>2]=w,l=x+E|0,h[g+4>>2]=l,x=xr[n+4>>1],D=xr[n+28>>1],H=x-D|0,E=xr[n+12>>1],V=xr[n+20>>1],J=E-V|0,h[g+56>>2]=H-J,E=E+V|0,D=x+D|0,x=E+D|0,h[g+8>>2]=x,D=D-E|0,h[g+40>>2]=D,H=H+J|0,h[g+24>>2]=H,E=xr[n+30>>1],V=xr[n+6>>1],J=E+V|0,se=xr[n+22>>1],Oe=xr[n+14>>1],He=se+Oe|0,n=J+He|0,h[g+12>>2]=n,st=V-E|0,se=Oe-se|0,E=st-se|0,h[g+60>>2]=E,V=J-He|0,h[g+44>>2]=V,J=se+st|0,h[g+28>>2]=J,xe=xe+3|0,se=xe-n|0,Oe=l-x|0,xr[a+96>>1]=se-Oe>>>3,n=n+xe|0,l=l+x|0,xr[a+64>>1]=n-l>>>3,xr[a+32>>1]=se+Oe>>>3,xr[a>>1]=n+l>>>3,n=h[g+16>>2]+3|0,l=n-J|0,x=w-H|0,xr[a+224>>1]=l-x>>>3,n=n+J|0,w=w+H|0,xr[a+192>>1]=n-w>>>3,xr[a+160>>1]=l+x>>>3,xr[a+128>>1]=n+w>>>3,n=h[g+32>>2]+3|0,w=n-V|0,l=h[g+36>>2],x=l-D|0,xr[a+352>>1]=w-x>>>3,n=n+V|0,l=l+D|0,xr[a+320>>1]=n-l>>>3,xr[a+288>>1]=w+x>>>3,xr[a+256>>1]=n+l>>>3,n=h[g+48>>2]+3|0,w=n-E|0,l=h[g+52>>2],g=h[g+56>>2],x=l-g|0,xr[a+480>>1]=w-x>>>3,n=n+E|0,g=g+l|0,xr[a+448>>1]=n-g>>>3,xr[a+416>>1]=w+x>>>3,xr[a+384>>1]=n+g>>>3}function Ka(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0;for(He=a+904|0;;){for(D=0;;){for(H=0;;){for(x=0;;){se=ie(H,11),xe=ie(D,33),J=ie(V,264),E=P[(se+(xe+(J+1392|0)|0)|0)+x|0],st=h[n+4>>2],l=h[n+8>>2];e:{if((l|0)>-1)break e;if(g=h[n+12>>2],g>>>0<Oi[n+20>>2]){w=P[g|0]|P[g+1|0]<<8|(P[g+2|0]<<16|P[g+3|0]<<24),h[n+12>>2]=g+3,l=l+24|0,h[n+8>>2]=l,h[n>>2]=h[n>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break e}mn(n),l=h[n+8>>2]}Oe=n,Pt=l,g=h[n>>2],E=ie(E,st)>>>8|0,w=g>>>l>>>0<=E>>>0;e:{if(!w){h[n>>2]=g+((E^-1)<<l),l=st-E|0;break e}l=E+1|0}g=wn(l)^24,h[Oe+8>>2]=Pt-g,h[n+4>>2]=(l<<g)+-1,Oe=(((a+J|0)+xe|0)+se|0)+x|0;e:{if(!w){l=kn(n,8);break e}l=P[(((J+2448|0)+xe|0)+se|0)+x|0]}if(m[Oe+907|0]=l,x=x+1|0,(x|0)==11)break}if(H=H+1|0,(H|0)==3)break}if(D=D+1|0,(D|0)==8)break}if(l=ie(V,68)+He|0,w=J+He|0,x=w+3|0,h[l+1124>>2]=x,h[l+1120>>2]=w+234,g=w+201|0,h[l+1116>>2]=g,h[l+1112>>2]=g,h[l+1108>>2]=g,h[l+1104>>2]=g,h[l+1100>>2]=g,h[l+1096>>2]=g,h[l+1092>>2]=g,h[l+1088>>2]=g,h[l+1084>>2]=w+168,h[l+1080>>2]=w+135,h[l+1076>>2]=g,h[l+1072>>2]=w+102,h[l+1068>>2]=w+69,h[l+1064>>2]=w+36,h[l+1060>>2]=x,V=V+1|0,(V|0)==4)break}l=kn(n,1),h[a+2236>>2]=l,l&&(Wt=a,rr=kn(n,8),m[Wt+2240|0]=rr)}function tu(n){n=n|0;var a=0,l=0;a=n,n=sn((P[a+-25|0]+(P[a+-26|0]+(P[a+-27|0]+(P[a+-28|0]+(P[a+-29|0]+(P[a+-30|0]+(P[a+-32|0]+P[a+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[a+224|0]=n,m[a+225|0]=n>>>8,m[a+226|0]=n>>>16,m[a+227|0]=n>>>24,l=bi,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+192|0]=n,m[a+193|0]=n>>>8,m[a+194|0]=n>>>16,m[a+195|0]=n>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+160|0]=n,m[a+161|0]=n>>>8,m[a+162|0]=n>>>16,m[a+163|0]=n>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+128|0]=n,m[a+129|0]=n>>>8,m[a+130|0]=n>>>16,m[a+131|0]=n>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+96|0]=n,m[a+97|0]=n>>>8,m[a+98|0]=n>>>16,m[a+99|0]=n>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+64|0]=n,m[a+65|0]=n>>>8,m[a+66|0]=n>>>16,m[a+67|0]=n>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+32|0]=n,m[a+33|0]=n>>>8,m[a+34|0]=n>>>16,m[a+35|0]=n>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a|0]=n,m[a+1|0]=n>>>8,m[a+2|0]=n>>>16,m[a+3|0]=n>>>24,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24}function ru(n){n=n|0;var a=0,l=0;a=n,n=sn((P[a+223|0]+(P[a+191|0]+(P[a+159|0]+(P[a+127|0]+(P[a+95|0]+(P[a+63|0]+(P[a+-1|0]+P[a+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[a+224|0]=n,m[a+225|0]=n>>>8,m[a+226|0]=n>>>16,m[a+227|0]=n>>>24,l=bi,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+192|0]=n,m[a+193|0]=n>>>8,m[a+194|0]=n>>>16,m[a+195|0]=n>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+160|0]=n,m[a+161|0]=n>>>8,m[a+162|0]=n>>>16,m[a+163|0]=n>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+128|0]=n,m[a+129|0]=n>>>8,m[a+130|0]=n>>>16,m[a+131|0]=n>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+96|0]=n,m[a+97|0]=n>>>8,m[a+98|0]=n>>>16,m[a+99|0]=n>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+64|0]=n,m[a+65|0]=n>>>8,m[a+66|0]=n>>>16,m[a+67|0]=n>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+32|0]=n,m[a+33|0]=n>>>8,m[a+34|0]=n>>>16,m[a+35|0]=n>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a|0]=n,m[a+1|0]=n>>>8,m[a+2|0]=n>>>16,m[a+3|0]=n>>>24,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24}function Zu(n){var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;e:{t:{if(n){if(x=h[n+8>>2],J=h[x+40>>2],h[n+4>>2]){if(h[n+12>>2]=h[J>>2],!Is(h[J+20>>2],x,3))return h[n>>2]=2,Qa(n),0;if(a=h[n+104>>2],l=a,w=a>>31,a=h[n+100>>2],E=sn(l,w,a,a>>31),l=bi,H=h[x>>2],w=H,a=w>>31,a=a<<4|w>>>28,w=w<<4,V=n,D=a,a=w,w=H&65535,g=w,a=a+g|0,a>>>0<g>>>0&&(D=D+1|0),g=a+E|0,l=l+D|0,a=ia(g,g>>>0<a>>>0?l+1|0:l,4),h[V+16>>2]=a,!a){h[n+20>>2]=0;break e}h[n+20>>2]=(a+(E<<2)|0)+(w<<2);r:{i:{if(h[x+92>>2]){if(se=h[x+100>>2],H=h[x+16>>2],w=h[x+12>>2],E=h[x+96>>2],l=E,a=l>>31,g=l,l=a,a=a<<5|g>>>27,D=l<<2|g>>>30,V=g<<5,l=g<<2,g=V+l|0,a=a+D|0,a=g>>>0<l>>>0?a+1|0:a,l=g+84|0,l>>>0<84&&(a=a+1|0),a=ia(l,a,1),!a){h[n>>2]=1;break t}if(h[n+268>>2]=a,h[n+264>>2]=a,l=a,a=a+84|0,ul(l,w,H,a+V|0,E,se,0,4,a),h[x+92>>2])break i}if(a=h[h[n+12>>2]>>2],a+-7>>>0>3)break r}co(),a=h[h[n+12>>2]>>2]}r:{if(a>>>0<11||(e0(),!h[h[n+12>>2]+28>>2]))break r;co()}r:{if(!h[n+56>>2]|h[n+120>>2]<1||(a=n+136|0,h[a>>2])||Ir(a,h[n+132>>2]))break r;break e}h[n+4>>2]=0}if(!Hn(n,h[n+16>>2],h[n+100>>2],h[n+104>>2],h[x+88>>2],2))break t;h[J+16>>2]=h[n+116>>2],n=1}else n=0;return n}return Qa(n),0}return h[n>>2]=1,Qa(n),0}function Hs(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0;w=xr[n+2>>1],E=(ie(w,20091)>>16)+w|0,g=xr[n+8>>1],D=ie(g,35468)>>16,x=xr[n>>1]+4|0,l=D+x|0,n=P[a+32|0]+(E+l>>3)|0,n=(n|0)>0?n:0,m[a+32|0]=(n|0)<255?n:255,n=ie(w,35468)>>16,w=P[a+33|0]+(n+l>>3)|0,w=(w|0)>0?w:0,m[a+33|0]=(w|0)<255?w:255,w=P[a+34|0]+(l-n>>3)|0,w=(w|0)>0?w:0,m[a+34|0]=(w|0)<255?w:255,l=P[a+35|0]+(l-E>>3)|0,l=(l|0)>0?l:0,m[a+35|0]=(l|0)<255?l:255,w=g+(ie(g,20091)>>16)|0,l=w+x|0,g=P[a|0]+(l+E>>3)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=P[a+1|0]+(n+l>>3)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=P[a+2|0]+(l-n>>3)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,l=P[a+3|0]+(l-E>>3)|0,l=(l|0)>0?l:0,m[a+3|0]=(l|0)<255?l:255,l=x-D|0,g=P[a+64|0]+(l+E>>3)|0,g=(g|0)>0?g:0,m[a+64|0]=(g|0)<255?g:255,g=P[a+65|0]+(n+l>>3)|0,g=(g|0)>0?g:0,m[a+65|0]=(g|0)<255?g:255,g=P[a+66|0]+(l-n>>3)|0,g=(g|0)>0?g:0,m[a+66|0]=(g|0)<255?g:255,l=P[a+67|0]+(l-E>>3)|0,l=(l|0)>0?l:0,m[a+67|0]=(l|0)<255?l:255,x=x-w|0,l=P[a+96|0]+(x+E>>3)|0,l=(l|0)>0?l:0,m[a+96|0]=(l|0)<255?l:255,l=P[a+97|0]+(n+x>>3)|0,l=(l|0)>0?l:0,m[a+97|0]=(l|0)<255?l:255,n=P[a+98|0]+(x-n>>3)|0,n=(n|0)>0?n:0,m[a+98|0]=(n|0)<255?n:255,n=P[a+99|0]+(x-E>>3)|0,n=(n|0)>0?n:0,m[a+99|0]=(n|0)<255?n:255}function ma(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(V=w<<1&-4,V){for(V=g+V|0;D=ie(P[n|0],19077)>>>8|0,x=P[l|0],H=D+(ie(x,26149)>>>8|0)|0,E=H+-14234|0,J=(E>>>0<16384?E>>>6|0:H>>>0<14234?0:248)&248,H=P[a|0],x=D-(ie(H,6419)>>>8|0)-(ie(x,13320)>>>8)|0,E=x+8708|0,x=E>>>0<16384?E>>6:(x|0)<-8708?0:255,m[g|0]=J|x>>>5,E=x<<3&224,D=D+(ie(H,33050)>>>8|0)|0,x=D+-17685|0,m[g+1|0]=E|(x>>>0<16384?x>>>9|0:D>>>0<17685?0:31),D=ie(P[n+1|0],19077)>>>8|0,x=P[l|0],H=D+(ie(x,26149)>>>8|0)|0,E=H+-14234|0,J=(E>>>0<16384?E>>>6|0:H>>>0<14234?0:248)&248,H=P[a|0],x=D-(ie(H,6419)>>>8|0)-(ie(x,13320)>>>8)|0,E=x+8708|0,x=E>>>0<16384?E>>6:(x|0)<-8708?0:255,m[g+2|0]=J|x>>>5,E=x<<3&224,D=D+(ie(H,33050)>>>8|0)|0,x=D+-17685|0,m[g+3|0]=E|(x>>>0<16384?x>>>9|0:D>>>0<17685?0:31),l=l+1|0,a=a+1|0,n=n+2|0,g=g+4|0,(V|0)!=(g|0););g=V}w&1&&(n=ie(P[n|0],19077)>>>8|0,l=P[l|0],w=n+(ie(l,26149)>>>8|0)|0,V=w+-14234|0,V=(V>>>0<16384?V>>>6|0:w>>>0<14234?0:248)&248,a=P[a|0],l=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,w=l+8708|0,l=w>>>0<16384?w>>6:(l|0)<-8708?0:255,m[g|0]=V|l>>>5,n=n+(ie(a,33050)>>>8|0)|0,a=n+-17685|0,m[g+1|0]=l<<3&224|(a>>>0<16384?a>>>9|0:n>>>0<17685?0:31))}function Ss(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(x=w<<2&-8,x){for(x=g+x|0;E=P[l|0],D=P[a|0],H=P[n|0],m[g+3|0]=255,H=ie(H,19077)>>>8|0,V=H+(ie(D,33050)>>>8|0)|0,J=V+-17685|0,m[g+2|0]=J>>>0<16384?J>>>6|0:V>>>0<17685?0:255,V=H+(ie(E,26149)>>>8|0)|0,J=V+-14234|0,m[g|0]=J>>>0<16384?J>>>6|0:V>>>0<14234?0:255,E=H-(ie(D,6419)>>>8|0)-(ie(E,13320)>>>8)|0,D=E+8708|0,m[g+1|0]=D>>>0<16384?D>>>6|0:(E|0)<-8708?0:255,E=P[l|0],D=P[a|0],H=P[n+1|0],m[g+7|0]=255,H=ie(H,19077)>>>8|0,V=H+(ie(D,33050)>>>8|0)|0,J=V+-17685|0,m[g+6|0]=J>>>0<16384?J>>>6|0:V>>>0<17685?0:255,V=H+(ie(E,26149)>>>8|0)|0,J=V+-14234|0,m[g+4|0]=J>>>0<16384?J>>>6|0:V>>>0<14234?0:255,E=H-(ie(D,6419)>>>8|0)-(ie(E,13320)>>>8)|0,D=E+8708|0,m[g+5|0]=D>>>0<16384?D>>>6|0:(E|0)<-8708?0:255,l=l+1|0,a=a+1|0,n=n+2|0,g=g+8|0,(x|0)!=(g|0););g=x}w&1&&(l=P[l|0],a=P[a|0],n=P[n|0],m[g+3|0]=255,n=ie(n,19077)>>>8|0,w=n+(ie(a,33050)>>>8|0)|0,x=w+-17685|0,m[g+2|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,w=n+(ie(l,26149)>>>8|0)|0,x=w+-14234|0,m[g|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,n=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255)}function Es(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(x=w<<2&-8,x){for(x=g+x|0;E=P[a|0],D=P[l|0],H=P[n|0],m[g+3|0]=255,H=ie(H,19077)>>>8|0,V=H+(ie(D,26149)>>>8|0)|0,J=V+-14234|0,m[g+2|0]=J>>>0<16384?J>>>6|0:V>>>0<14234?0:255,V=H+(ie(E,33050)>>>8|0)|0,J=V+-17685|0,m[g|0]=J>>>0<16384?J>>>6|0:V>>>0<17685?0:255,E=H-(ie(E,6419)>>>8|0)-(ie(D,13320)>>>8)|0,D=E+8708|0,m[g+1|0]=D>>>0<16384?D>>>6|0:(E|0)<-8708?0:255,E=P[a|0],D=P[l|0],H=P[n+1|0],m[g+7|0]=255,H=ie(H,19077)>>>8|0,V=H+(ie(D,26149)>>>8|0)|0,J=V+-14234|0,m[g+6|0]=J>>>0<16384?J>>>6|0:V>>>0<14234?0:255,V=H+(ie(E,33050)>>>8|0)|0,J=V+-17685|0,m[g+4|0]=J>>>0<16384?J>>>6|0:V>>>0<17685?0:255,E=H-(ie(E,6419)>>>8|0)-(ie(D,13320)>>>8)|0,D=E+8708|0,m[g+5|0]=D>>>0<16384?D>>>6|0:(E|0)<-8708?0:255,l=l+1|0,a=a+1|0,n=n+2|0,g=g+8|0,(x|0)!=(g|0););g=x}w&1&&(a=P[a|0],l=P[l|0],n=P[n|0],m[g+3|0]=255,n=ie(n,19077)>>>8|0,w=n+(ie(l,26149)>>>8|0)|0,x=w+-14234|0,m[g+2|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,w=n+(ie(a,33050)>>>8|0)|0,x=w+-17685|0,m[g|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,n=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255)}function fs(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(x=w<<2&-8,x){for(x=g+x|0;E=P[l|0],D=P[a|0],H=P[n|0],m[g|0]=255,H=ie(H,19077)>>>8|0,V=H+(ie(D,33050)>>>8|0)|0,J=V+-17685|0,m[g+3|0]=J>>>0<16384?J>>>6|0:V>>>0<17685?0:255,V=H+(ie(E,26149)>>>8|0)|0,J=V+-14234|0,m[g+1|0]=J>>>0<16384?J>>>6|0:V>>>0<14234?0:255,E=H-(ie(D,6419)>>>8|0)-(ie(E,13320)>>>8)|0,D=E+8708|0,m[g+2|0]=D>>>0<16384?D>>>6|0:(E|0)<-8708?0:255,E=P[l|0],D=P[a|0],H=P[n+1|0],m[g+4|0]=255,H=ie(H,19077)>>>8|0,V=H+(ie(D,33050)>>>8|0)|0,J=V+-17685|0,m[g+7|0]=J>>>0<16384?J>>>6|0:V>>>0<17685?0:255,V=H+(ie(E,26149)>>>8|0)|0,J=V+-14234|0,m[g+5|0]=J>>>0<16384?J>>>6|0:V>>>0<14234?0:255,E=H-(ie(D,6419)>>>8|0)-(ie(E,13320)>>>8)|0,D=E+8708|0,m[g+6|0]=D>>>0<16384?D>>>6|0:(E|0)<-8708?0:255,l=l+1|0,a=a+1|0,n=n+2|0,g=g+8|0,(x|0)!=(g|0););g=x}w&1&&(l=P[l|0],a=P[a|0],n=P[n|0],m[g|0]=255,n=ie(n,19077)>>>8|0,w=n+(ie(a,33050)>>>8|0)|0,x=w+-17685|0,m[g+3|0]=x>>>0<16384?x>>>6|0:w>>>0<17685?0:255,w=n+(ie(l,26149)>>>8|0)|0,x=w+-14234|0,m[g+1|0]=x>>>0<16384?x>>>6|0:w>>>0<14234?0:255,n=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[g+2|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255)}function hs(n){n=n|0,m[n+224|0]=-2139062144,m[n+225|0]=8421504,m[n+226|0]=32896,m[n+227|0]=128,m[n+228|0]=-2139062144,m[n+229|0]=8421504,m[n+230|0]=32896,m[n+231|0]=128,m[n+192|0]=-2139062144,m[n+193|0]=8421504,m[n+194|0]=32896,m[n+195|0]=128,m[n+196|0]=-2139062144,m[n+197|0]=8421504,m[n+198|0]=32896,m[n+199|0]=128,m[n+160|0]=-2139062144,m[n+161|0]=8421504,m[n+162|0]=32896,m[n+163|0]=128,m[n+164|0]=-2139062144,m[n+165|0]=8421504,m[n+166|0]=32896,m[n+167|0]=128,m[n+128|0]=-2139062144,m[n+129|0]=8421504,m[n+130|0]=32896,m[n+131|0]=128,m[n+132|0]=-2139062144,m[n+133|0]=8421504,m[n+134|0]=32896,m[n+135|0]=128,m[n+96|0]=-2139062144,m[n+97|0]=8421504,m[n+98|0]=32896,m[n+99|0]=128,m[n+100|0]=-2139062144,m[n+101|0]=8421504,m[n+102|0]=32896,m[n+103|0]=128,m[n+64|0]=-2139062144,m[n+65|0]=8421504,m[n+66|0]=32896,m[n+67|0]=128,m[n+68|0]=-2139062144,m[n+69|0]=8421504,m[n+70|0]=32896,m[n+71|0]=128,m[n+32|0]=-2139062144,m[n+33|0]=8421504,m[n+34|0]=32896,m[n+35|0]=128,m[n+36|0]=-2139062144,m[n+37|0]=8421504,m[n+38|0]=32896,m[n+39|0]=128,m[n|0]=-2139062144,m[n+1|0]=8421504,m[n+2|0]=32896,m[n+3|0]=128,m[n+4|0]=-2139062144,m[n+5|0]=8421504,m[n+6|0]=32896,m[n+7|0]=128}function Ml(n){n=n|0;var a=0,l=0;a=n,n=a+-32|0,l=P[n|0]|P[n+1|0]<<8|(P[n+2|0]<<16|P[n+3|0]<<24),n=P[n+4|0]|P[n+5|0]<<8|(P[n+6|0]<<16|P[n+7|0]<<24),m[a+224|0]=l,m[a+225|0]=l>>>8,m[a+226|0]=l>>>16,m[a+227|0]=l>>>24,m[a+228|0]=n,m[a+229|0]=n>>>8,m[a+230|0]=n>>>16,m[a+231|0]=n>>>24,m[a+192|0]=l,m[a+193|0]=l>>>8,m[a+194|0]=l>>>16,m[a+195|0]=l>>>24,m[a+196|0]=n,m[a+197|0]=n>>>8,m[a+198|0]=n>>>16,m[a+199|0]=n>>>24,m[a+160|0]=l,m[a+161|0]=l>>>8,m[a+162|0]=l>>>16,m[a+163|0]=l>>>24,m[a+164|0]=n,m[a+165|0]=n>>>8,m[a+166|0]=n>>>16,m[a+167|0]=n>>>24,m[a+128|0]=l,m[a+129|0]=l>>>8,m[a+130|0]=l>>>16,m[a+131|0]=l>>>24,m[a+132|0]=n,m[a+133|0]=n>>>8,m[a+134|0]=n>>>16,m[a+135|0]=n>>>24,m[a+96|0]=l,m[a+97|0]=l>>>8,m[a+98|0]=l>>>16,m[a+99|0]=l>>>24,m[a+100|0]=n,m[a+101|0]=n>>>8,m[a+102|0]=n>>>16,m[a+103|0]=n>>>24,m[a+64|0]=l,m[a+65|0]=l>>>8,m[a+66|0]=l>>>16,m[a+67|0]=l>>>24,m[a+68|0]=n,m[a+69|0]=n>>>8,m[a+70|0]=n>>>16,m[a+71|0]=n>>>24,m[a+32|0]=l,m[a+33|0]=l>>>8,m[a+34|0]=l>>>16,m[a+35|0]=l>>>24,m[a+36|0]=n,m[a+37|0]=n>>>8,m[a+38|0]=n>>>16,m[a+39|0]=n>>>24,m[a|0]=l,m[a+1|0]=l>>>8,m[a+2|0]=l>>>16,m[a+3|0]=l>>>24,m[a+4|0]=n,m[a+5|0]=n>>>8,m[a+6|0]=n>>>16,m[a+7|0]=n>>>24}function ds(n){var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0;xe=2,H=h[n>>2];e:{if(H>>>0>12)break e;E=h[n+8>>2],w=h[n+4>>2];t:{r:{if(H>>>0>=11){if(l=h[n+40>>2],g=l>>31,D=h[n+36>>2],a=D>>31,J=h[n+32>>2],x=J>>31,Oe=g^l+g,l=(w+1|0)/2|0,Wt=(Oe|0)>=(l|0),D=a^a+D,rr=(D|0)>=(l|0),a=x^x+J,ur=(a|0)>=(w|0),g=w,x=E+-1|0,J=x,He=x>>31,V=sn(x,He,a,0),x=g+V|0,st=g>>31,a=st+bi|0,a=x>>>0<V>>>0?a+1|0:a,se=!a&x>>>0<=Oi[n+48>>2]|a>>>0<0,a=l,E=((E+1|0)/2|0)+-1|0,x=E,V=x>>31,D=sn(x,V,D,0),E=a+D|0,Pt=a>>31,l=Pt+bi|0,l=E>>>0<D>>>0?l+1|0:l,se=se&(!l&E>>>0<=Oi[n+52>>2]|l>>>0<0),E=sn(Oe,0,x,V)+a|0,l=Pt+bi|0,l=E>>>0<a>>>0?l+1|0:l,a=E,a=Wt&(rr&(ur&(se&(!l&a>>>0<=Oi[n+56>>2]|l>>>0<0))))&h[n+16>>2]!=0&h[n+20>>2]!=0&h[n+24>>2]!=0,(H|0)!=12)break r;if(!h[n+28>>2]||(H=h[n+44>>2],l=H>>31,l=l^l+H,!(a&(l|0)>=(w|0))))break e;if(w=sn(l,0,J,He)+g|0,a=st+bi|0,a=w>>>0<g>>>0?a+1|0:a,g=w,!a&g>>>0<=Oi[n+60>>2]|a>>>0<0)break t;break e}if(!h[n+16>>2]||(a=h[n+20>>2],g=a>>31,a=g^a+g,g=ie(P[H+1157|0],w),(a|0)<(g|0)))break e;if(w=E+-1|0,w=sn(w,w>>31,a,0),a=w+g|0,g=bi+(g>>31)|0,g=a>>>0<w>>>0?g+1|0:g,!g&a>>>0<=Oi[n+24>>2]|g>>>0<0)break t;break e}if(!a)break e}xe=0}return xe}function sl(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;e:{t:{r:{i:{o:{l:{n:{u:{a:{s:{if(E=a,E){if(w=l,!w)break s;if(x=g,!x)break a;if(x=wn(x)-wn(E)|0,x>>>0<=31)break u;break t}if((g|0)==1&l>>>0>=0|g>>>0>1)break t;return a=(n>>>0)/(l>>>0)|0,bi=0,a}if(w=g,!n)break n;if(!w||w+-1&w)break l;return n=E>>>(n0(w)&31)|0,bi=0,n}if(!(w+-1&w))break o;V=(wn(w)+33|0)-wn(E)|0,D=0-V|0;break r}V=x+1|0,D=63-x|0;break r}return n=(E>>>0)/(w>>>0)|0,bi=0,n}if(x=wn(w)-wn(E)|0,x>>>0<31)break i;break t}if((w|0)==1)break e;return l=n,n=n0(w),g=n&31,32<=(n&63)>>>0?(x=0,n=a>>>g|0):(x=a>>>g|0,n=((1<<g)-1&a)<<32-g|l>>>g),bi=x,n}V=x+1|0,D=63-x|0}if(w=a,E=n,x=V&63,H=x&31,32<=(x&63)>>>0?(x=0,se=w>>>H|0):(x=w>>>H|0,se=((1<<H)-1&w)<<32-H|E>>>H),n=D&63,D=n&31,32<=(n&63)>>>0?(w=E<<D,n=0):(w=(1<<D)-1&E>>>32-D|a<<D,n=E<<D),a=w,V)for(E=g+-1|0,w=l+-1|0,(w|0)!=-1&&(E=E+1|0),D=w;w=se,J=x<<1|w>>>31,x=w<<1|a>>>31,xe=J,w=J,J=x,H=E-((D>>>0<x>>>0)+w|0)|0,w=H>>31,H=H>>31,x=l&H,se=J-x|0,x=xe-((g&w)+(J>>>0<x>>>0)|0)|0,w=a<<1|n>>>31,n=Oe|n<<1,a=w|He,xe=0,J=H&1,Oe=J,V=V+-1|0,!!V;);return bi=xe|(a<<1|n>>>31),J|n<<1}n=0,a=0}return bi=a,n}function $s(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(V=w<<1&-4,V){for(V=g+V|0;E=P[l|0],x=ie(P[n|0],19077)>>>8|0,J=P[a|0],D=x+(ie(J,33050)>>>8|0)|0,H=D+-17685|0,m[g+1|0]=(H>>>0<16384?H>>>6|0:D>>>0<17685?0:240)|15,D=x+(ie(E,26149)>>>8|0)|0,H=D+-14234|0,E=x-(ie(J,6419)>>>8|0)-(ie(E,13320)>>>8)|0,x=E+8708|0,m[g|0]=(H>>>0<16384?H>>>6|0:D>>>0<14234?0:240)&240|(x>>>0<16384?x>>>10|0:(E|0)<-8708?0:15),E=P[l|0],x=ie(P[n+1|0],19077)>>>8|0,J=P[a|0],D=x+(ie(J,33050)>>>8|0)|0,H=D+-17685|0,m[g+3|0]=(H>>>0<16384?H>>>6|0:D>>>0<17685?0:240)|15,D=x+(ie(E,26149)>>>8|0)|0,H=D+-14234|0,E=x-(ie(J,6419)>>>8|0)-(ie(E,13320)>>>8)|0,x=E+8708|0,m[g+2|0]=(H>>>0<16384?H>>>6|0:D>>>0<14234?0:240)&240|(x>>>0<16384?x>>>10|0:(E|0)<-8708?0:15),l=l+1|0,a=a+1|0,n=n+2|0,g=g+4|0,(V|0)!=(g|0););g=V}w&1&&(l=P[l|0],n=ie(P[n|0],19077)>>>8|0,a=P[a|0],w=n+(ie(a,33050)>>>8|0)|0,V=w+-17685|0,m[g+1|0]=(V>>>0<16384?V>>>6|0:w>>>0<17685?0:240)|15,V=g,g=n+(ie(l,26149)>>>8|0)|0,w=g+-14234|0,n=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[V|0]=(w>>>0<16384?w>>>6|0:g>>>0<14234?0:240)&240|(a>>>0<16384?a>>>10|0:(n|0)<-8708?0:15))}function Uo(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;se=Mi-592|0,Mi=se,x=a+24|0,E=$n(x,1),H=Xo(l,0,n<<2);e:{t:{r:{i:{if(E){if(l=$n(x,1),He=($n(x,$n(x,1)?8:1)<<2)+H|0,st=1,h[He>>2]=st,(l|0)!=1)break i;He=($n(x,8)<<2)+H|0,st=1,h[He>>2]=st;break i}if(J=Xo(se,0,76),E=$n(x,4)+4|0,(E|0)>19)break t;if(l=0,(E|0)>0)for(;He=(P[l+1232|0]<<2)+J|0,st=$n(x,3),h[He>>2]=st,l=l+1|0,(E|0)!=(l|0););if(!Co(J+80|0,7,J,19)||(E=n,$n(x,1)&&(E=$n(x,($n(x,3)<<1)+2|0)+2|0,(E|0)>(n|0))))break r;if((n|0)<1)break i;for(xe=8,l=0;;){if(!E)break i;w=h[a+44>>2],(w|0)>=32&&(as(x),w=h[a+44>>2]),Oe=w,D=h[a+28>>2],V=w&63,w=V&31,w=(J+80|0)+(((32<=(V&63)>>>0?D>>>w|0:((1<<w)-1&D)<<32-w|h[a+24>>2]>>>w)&127)<<2)|0,h[a+44>>2]=Oe+P[w|0],D=ci[w+2>>1];o:{if(D>>>0<=15){h[(l<<2)+H>>2]=D,xe=D||xe,l=l+1|0;break o}if(w=D+-16|0,V=$n(x,P[w+1251|0])+P[w+1254|0]|0,w=V+l|0,(w|0)>(n|0))break r;if((V|0)<1)break o;for(D=(D|0)==16?xe:0;h[(l<<2)+H>>2]=D,l=l+1|0,(w|0)!=(l|0););l=w}if(E=E+-1|0,!((l|0)<(n|0)))break}}if(h[a+48>>2])break t;if(l=Co(g,8,H,n),l)break e;break t}h[a>>2]=3}h[a>>2]=3,l=0}return Mi=se+592|0,l}function _n(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0;if(l>>>0>=512)return Sc(n|0,a|0,l|0)|0,n|0;w=n+l|0;e:{if(!((n^a)&3)){t:{if((l|0)<1){l=n;break t}if(!(n&3)){l=n;break t}for(l=n;;){if(m[l|0]=P[a|0],a=a+1|0,l=l+1|0,l>>>0>=w>>>0)break t;if(!(l&3))break}}g=w&-4;t:{if(g>>>0<64||(x=g+-64|0,l>>>0>x>>>0))break t;for(;h[l>>2]=h[a>>2],h[l+4>>2]=h[a+4>>2],h[l+8>>2]=h[a+8>>2],h[l+12>>2]=h[a+12>>2],h[l+16>>2]=h[a+16>>2],h[l+20>>2]=h[a+20>>2],h[l+24>>2]=h[a+24>>2],h[l+28>>2]=h[a+28>>2],h[l+32>>2]=h[a+32>>2],h[l+36>>2]=h[a+36>>2],h[l+40>>2]=h[a+40>>2],h[l+44>>2]=h[a+44>>2],h[l+48>>2]=h[a+48>>2],h[l+52>>2]=h[a+52>>2],h[l+56>>2]=h[a+56>>2],h[l+60>>2]=h[a+60>>2],a=a- -64|0,l=l- -64|0,l>>>0<=x>>>0;);}if(l>>>0>=g>>>0)break e;for(;h[l>>2]=h[a>>2],a=a+4|0,l=l+4|0,l>>>0<g>>>0;);break e}if(w>>>0<4){l=n;break e}if(g=w+-4|0,g>>>0<n>>>0){l=n;break e}for(l=n;m[l|0]=P[a|0],m[l+1|0]=P[a+1|0],m[l+2|0]=P[a+2|0],m[l+3|0]=P[a+3|0],a=a+4|0,l=l+4|0,l>>>0<=g>>>0;);}if(l>>>0<w>>>0)for(;m[l|0]=P[a|0],a=a+1|0,l=l+1|0,(w|0)!=(l|0););return n|0}function ps(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(E=w&-2,E){for(E=ie(E,3)+g|0;D=P[l|0],x=ie(P[n|0],19077)>>>8|0,J=P[a|0],H=x+(ie(J,33050)>>>8|0)|0,V=H+-17685|0,m[g+2|0]=V>>>0<16384?V>>>6|0:H>>>0<17685?0:255,H=x+(ie(D,26149)>>>8|0)|0,V=H+-14234|0,m[g|0]=V>>>0<16384?V>>>6|0:H>>>0<14234?0:255,D=x-(ie(J,6419)>>>8|0)-(ie(D,13320)>>>8)|0,x=D+8708|0,m[g+1|0]=x>>>0<16384?x>>>6|0:(D|0)<-8708?0:255,D=P[l|0],x=ie(P[n+1|0],19077)>>>8|0,J=P[a|0],H=x+(ie(J,33050)>>>8|0)|0,V=H+-17685|0,m[g+5|0]=V>>>0<16384?V>>>6|0:H>>>0<17685?0:255,H=x+(ie(D,26149)>>>8|0)|0,V=H+-14234|0,m[g+3|0]=V>>>0<16384?V>>>6|0:H>>>0<14234?0:255,D=x-(ie(J,6419)>>>8|0)-(ie(D,13320)>>>8)|0,x=D+8708|0,m[g+4|0]=x>>>0<16384?x>>>6|0:(D|0)<-8708?0:255,l=l+1|0,a=a+1|0,n=n+2|0,g=g+6|0,(E|0)!=(g|0););g=E}w&1&&(l=P[l|0],n=ie(P[n|0],19077)>>>8|0,a=P[a|0],w=n+(ie(a,33050)>>>8|0)|0,E=w+-17685|0,m[g+2|0]=E>>>0<16384?E>>>6|0:w>>>0<17685?0:255,w=n+(ie(l,26149)>>>8|0)|0,E=w+-14234|0,m[g|0]=E>>>0<16384?E>>>6|0:w>>>0<14234?0:255,n=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255)}function Na(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if(E=w&-2,E){for(E=ie(E,3)+g|0;D=P[a|0],x=ie(P[n|0],19077)>>>8|0,J=P[l|0],H=x+(ie(J,26149)>>>8|0)|0,V=H+-14234|0,m[g+2|0]=V>>>0<16384?V>>>6|0:H>>>0<14234?0:255,H=x+(ie(D,33050)>>>8|0)|0,V=H+-17685|0,m[g|0]=V>>>0<16384?V>>>6|0:H>>>0<17685?0:255,D=x-(ie(D,6419)>>>8|0)-(ie(J,13320)>>>8)|0,x=D+8708|0,m[g+1|0]=x>>>0<16384?x>>>6|0:(D|0)<-8708?0:255,D=P[a|0],x=ie(P[n+1|0],19077)>>>8|0,J=P[l|0],H=x+(ie(J,26149)>>>8|0)|0,V=H+-14234|0,m[g+5|0]=V>>>0<16384?V>>>6|0:H>>>0<14234?0:255,H=x+(ie(D,33050)>>>8|0)|0,V=H+-17685|0,m[g+3|0]=V>>>0<16384?V>>>6|0:H>>>0<17685?0:255,D=x-(ie(D,6419)>>>8|0)-(ie(J,13320)>>>8)|0,x=D+8708|0,m[g+4|0]=x>>>0<16384?x>>>6|0:(D|0)<-8708?0:255,l=l+1|0,a=a+1|0,n=n+2|0,g=g+6|0,(E|0)!=(g|0););g=E}w&1&&(a=P[a|0],n=ie(P[n|0],19077)>>>8|0,l=P[l|0],w=n+(ie(l,26149)>>>8|0)|0,E=w+-14234|0,m[g+2|0]=E>>>0<16384?E>>>6|0:w>>>0<14234?0:255,w=n+(ie(a,33050)>>>8|0)|0,E=w+-17685|0,m[g|0]=E>>>0<16384?E>>>6|0:w>>>0<17685?0:255,n=n-(ie(a,6419)>>>8|0)-(ie(l,13320)>>>8)|0,a=n+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255)}function Cs(n,a){var l=0,g=0,w=0;e:{if(!n)break e;if(!a){if(h[n>>2])break e;return h[n>>2]=2,h[n+4>>2]=0,h[n+8>>2]=5281,0}if(!h[n+4>>2]&&!Wo(n,a))break e;t:{if(!al(n,a)){r:{if(!ks(n,a))break r;h[n+2300>>2]=0;i:{if(h[n+308>>2]>=1)for(w=n+12|0;;){if(g=h[n+312>>2],!Il(w,n))break i;if(h[n+2296>>2]<h[n+288>>2])for(l=(ie(l&g,28)+n|0)+316|0;;){if(!cs(n,l)){if(l=0,h[n>>2])break r;h[n>>2]=7,h[n+4>>2]=0,h[n+8>>2]=5412;break r}if(g=h[n+2296>>2]+1|0,h[n+2296>>2]=g,!((g|0)<h[n+288>>2]))break}if(l=h[n+2256>>2]+-2|0,m[l|0]=0,m[l+1|0]=0,h[n+2296>>2]=0,h[n+2248>>2]=0,!Qu(n,a)){if(l=0,h[n>>2])break r;h[n>>2]=6,h[n+4>>2]=0,h[n+8>>2]=5447;break r}if(l=h[n+2300>>2]+1|0,h[n+2300>>2]=l,!((l|0)<h[n+308>>2]))break}o:{if(h[n+148>>2]<1||ot[h[2559]](n+124|0)|0)break o;l=0;break r}l=1;break r}if(l=0,h[n>>2])break r;h[n>>2]=7,h[n+4>>2]=0,h[n+8>>2]=5371}if(Zr(n,a)&l)break t}return ot[h[2562]](n+124|0),V0(n),Fn(h[n+2288>>2]),h[n+2288>>2]=0,h[n+2292>>2]=0,h[n+12>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+4>>2]=0,0}h[n+4>>2]=0,l=1}return l}function Au(n){var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0;for(a=n+12|0,D=kn(a,7),kn(a,1)&&(se=Ua(a,4)),kn(a,1)&&(xe=Ua(a,4)),kn(a,1)&&(Oe=Ua(a,4)),kn(a,1)&&(He=Ua(a,4)),kn(a,1)&&(st=Ua(a,4)),Pt=h[n+104>>2],E=n+776|0,H=E+24|0,V=E+16|0,J=E+8|0;;){e:{t:{if(Pt){a=m[(n+x|0)+116|0]+(h[n+112>>2]?0:D)|0;break t}if(a=D,!x)break t;l=h[H+4>>2],a=(x<<5)+n|0,h[a+800>>2]=h[H>>2],h[a+804>>2]=l,l=h[V+4>>2],h[a+792>>2]=h[V>>2],h[a+796>>2]=l,l=h[J+4>>2],h[a+784>>2]=h[J>>2],h[a+788>>2]=l,l=h[E+4>>2],h[a+776>>2]=h[E>>2],h[a+780>>2]=l;break e}l=(x<<5)+n|0,w=a+st|0,h[l+800>>2]=w,g=a+He|0,g=(g|0)<117?g:117,h[l+792>>2]=P[((g|0)>0?g:0)+4448|0],g=(a|0)<127?a:127,h[l+780>>2]=ci[(((g|0)>0?g:0)<<1)+4576>>1],g=a+se|0,g=(g|0)<127?g:127,h[l+776>>2]=P[((g|0)>0?g:0)+4448|0],w=(w|0)<127?w:127,h[l+796>>2]=ci[(((w|0)>0?w:0)<<1)+4576>>1],w=a+xe|0,w=(w|0)<127?w:127,h[l+784>>2]=P[((w|0)>0?w:0)+4448|0]<<1,a=a+Oe|0,a=(a|0)<127?a:127,a=ie(ci[(((a|0)>0?a:0)<<1)+4576>>1],101581),h[l+788>>2]=a>>>0<524288?8:a>>>16|0}if(x=x+1|0,(x|0)==4)break}}function ua(n,a,l,g,w,x,E){var D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0,gs=0,dl=0,su=0,Rc=0;if((g|0)>=1)for(Ki=w<<1|1,Un=ie(a,3),gs=0-a|0,dl=ie(a,-3),su=0-(a<<2)|0,Wt=a<<1,Rc=0-Wt|0,rr=h[2547],V=h[2548],ur=h[2546],J=h[2549];;){w=g,Lr=n+Rc|0,H=P[Lr|0],Rr=n+a|0,He=P[Rr|0],D=H-He|0,st=n+gs|0,g=P[st|0],Oe=P[n|0];e:{if((P[D+J|0]+(P[J+(g-Oe|0)|0]<<2)|0)>(Ki|0)||(Gr=n+dl|0,xe=P[Gr|0],P[J+(P[n+su|0]-xe|0)|0]>(x|0)|P[J+(xe-H|0)|0]>(x|0))||(se=P[J+(H-g|0)|0],(se|0)>(x|0))||(ti=n+Wt|0,Pt=P[ti|0],P[J+(P[n+Un|0]-Pt|0)|0]>(x|0)|P[J+(Pt-He|0)|0]>(x|0))||(gi=P[J+(He-Oe|0)|0],(gi|0)>(x|0)))break e;if(D=m[D+ur|0]+ie(Oe-g|0,3)|0,!((gi|0)<=(E|0)&&(se|0)<=(E|0))){H=m[(D+4>>3)+rr|0],m[st|0]=P[(m[(D+3>>3)+rr|0]+g|0)+V|0],m[n|0]=P[(Oe-H|0)+V|0];break e}se=xe,D=m[D+ur|0],xe=ie(D,9)+63>>7,m[Gr|0]=P[(se+xe|0)+V|0],se=H,H=ie(D,18)+63>>7,m[Lr|0]=P[(se+H|0)+V|0],se=g,g=ie(D,27)+63>>7,m[st|0]=P[(se+g|0)+V|0],m[n|0]=P[(Oe-g|0)+V|0],m[Rr|0]=P[(He-H|0)+V|0],m[ti|0]=P[(Pt-xe|0)+V|0]}if(g=w+-1|0,n=n+l|0,!((w|0)>1))break}}function Cc(n,a,l){var g=0,w=0,x=0,E=0,D=0,H=0;if(g=Lu(1,0,272),!g)return 0;h[g>>2]=0,h[g+4>>2]=2,Ca(),x=h[n>>2],h[g+100>>2]=x,w=h[n+4>>2],h[g+8>>2]=n+24,h[g+104>>2]=w,h[n+28>>2]=w,h[n+24>>2]=x,h[n- -64>>2]=n,h[g>>2]=0,Q(g+24|0,a,l);e:{t:{r:{if(!Wr(h[n>>2],h[n+4>>2],1,g,0))break r;i:{o:{if(h[g+176>>2]!=1|h[g+180>>2]!=3|h[g+120>>2]>0)break o;if(l=h[g+164>>2],(l|0)<1)break i;for(a=h[g+168>>2],w=0;;){if(x=a+ie(w,548)|0,P[h[x+4>>2]]|P[h[x+8>>2]]|P[h[x+12>>2]])break o;if(w=w+1|0,(l|0)==(w|0))break}break i}if(h[n+132>>2]=0,a=h[g+104>>2],l=a,w=a>>31,a=h[g+100>>2],E=sn(l,w,a,a>>31),l=bi,H=g,w=h[n>>2],a=w>>31,a=a<<4|w>>>28,x=w<<4,D=w&65535,w=D,x=x+w|0,x>>>0<w>>>0&&(a=a+1|0),w=x+E|0,a=a+l|0,a=ia(w,w>>>0<x>>>0?a+1|0:a,4),h[H+16>>2]=a,a)break t;h[g+20>>2]=0,h[g>>2]=1;break r}if(h[n+132>>2]=1,h[g+20>>2]=0,a=h[g+104>>2],l=a,w=a>>31,a=h[g+100>>2],a=ia(sn(l,w,a,a>>31),bi,1),h[g+16>>2]=a,a)break e;h[g>>2]=1}return Qa(g),Fn(g),0}h[g+20>>2]=(a+(E<<2)|0)+(D<<2)}return h[n+20>>2]=g,1}function Ja(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0;for(xe=0-a|0,J=a<<2,H=J+n|0,Oe=0-(a<<1)|0,He=l<<1|1,n=h[2548],l=h[2547],st=h[2546],se=h[2549];g=w+H|0,E=g+xe|0,V=P[E|0],D=P[g|0],x=P[g+Oe|0]-P[a+g|0]|0,((P[se+(V-D|0)|0]<<2)+P[x+se|0]|0)<=(He|0)&&(x=m[x+st|0]+ie(D-V|0,3)|0,Pt=m[(x+4>>3)+l|0],m[E|0]=P[(V+m[(x+3>>3)+l|0]|0)+n|0],m[g|0]=P[(D-Pt|0)+n|0]),w=w+1|0,(w|0)!=16;);for(H=H+J|0,w=0;g=w+H|0,E=g+xe|0,V=P[E|0],D=P[g|0],x=P[g+Oe|0]-P[a+g|0]|0,((P[se+(V-D|0)|0]<<2)+P[x+se|0]|0)<=(He|0)&&(x=m[x+st|0]+ie(D-V|0,3)|0,Pt=m[(x+4>>3)+l|0],m[E|0]=P[(V+m[(x+3>>3)+l|0]|0)+n|0],m[g|0]=P[(D-Pt|0)+n|0]),w=w+1|0,(w|0)!=16;);for(V=H+J|0,w=0;g=w+V|0,D=g+xe|0,J=P[D|0],H=P[g|0],E=P[g+Oe|0]-P[a+g|0]|0,((P[se+(J-H|0)|0]<<2)+P[E+se|0]|0)<=(He|0)&&(E=m[E+st|0]+ie(H-J|0,3)|0,x=m[(E+4>>3)+l|0],m[D|0]=P[(J+m[(E+3>>3)+l|0]|0)+n|0],m[g|0]=P[(H-x|0)+n|0]),w=w+1|0,(w|0)!=16;);}function is(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;for(V=n+4|0,xe=l<<1|1,l=h[2548],J=h[2547],Oe=h[2546],se=h[2549];g=V+ie(a,w)|0,E=g+-1|0,D=P[E|0],H=P[g|0],x=P[g+-2|0]-P[g+1|0]|0,((P[se+(D-H|0)|0]<<2)+P[x+se|0]|0)<=(xe|0)&&(x=m[x+Oe|0]+ie(H-D|0,3)|0,He=m[(x+4>>3)+J|0],m[E|0]=P[(D+m[(x+3>>3)+J|0]|0)+l|0],m[g|0]=P[(H-He|0)+l|0]),w=w+1|0,(w|0)!=16;);for(V=n+8|0,w=0;g=V+ie(a,w)|0,E=g+-1|0,D=P[E|0],H=P[g|0],x=P[g+-2|0]-P[g+1|0]|0,((P[se+(D-H|0)|0]<<2)+P[x+se|0]|0)<=(xe|0)&&(x=m[x+Oe|0]+ie(H-D|0,3)|0,He=m[(x+4>>3)+J|0],m[E|0]=P[(D+m[(x+3>>3)+J|0]|0)+l|0],m[g|0]=P[(H-He|0)+l|0]),w=w+1|0,(w|0)!=16;);for(H=n+12|0,w=0;n=H+ie(a,w)|0,V=n+-1|0,g=P[V|0],D=P[n|0],E=P[n+-2|0]-P[n+1|0]|0,((P[se+(g-D|0)|0]<<2)+P[E+se|0]|0)<=(xe|0)&&(E=m[E+Oe|0]+ie(D-g|0,3)|0,x=m[(E+4>>3)+J|0],m[V|0]=P[(g+m[(E+3>>3)+J|0]|0)+l|0],m[n|0]=P[(D-x|0)+l|0]),w=w+1|0,(w|0)!=16;);}function Yn(n,a){n=n|0,a=a|0;var l=0;n=xr[n>>1]+4>>3,l=n+P[a|0]|0,l=(l|0)>0?l:0,m[a|0]=(l|0)<255?l:255,l=n+P[a+1|0]|0,l=(l|0)>0?l:0,m[a+1|0]=(l|0)<255?l:255,l=n+P[a+2|0]|0,l=(l|0)>0?l:0,m[a+2|0]=(l|0)<255?l:255,l=n+P[a+3|0]|0,l=(l|0)>0?l:0,m[a+3|0]=(l|0)<255?l:255,l=n+P[a+32|0]|0,l=(l|0)>0?l:0,m[a+32|0]=(l|0)<255?l:255,l=n+P[a+33|0]|0,l=(l|0)>0?l:0,m[a+33|0]=(l|0)<255?l:255,l=n+P[a+34|0]|0,l=(l|0)>0?l:0,m[a+34|0]=(l|0)<255?l:255,l=n+P[a+35|0]|0,l=(l|0)>0?l:0,m[a+35|0]=(l|0)<255?l:255,l=n+P[a+64|0]|0,l=(l|0)>0?l:0,m[a+64|0]=(l|0)<255?l:255,l=n+P[a+65|0]|0,l=(l|0)>0?l:0,m[a+65|0]=(l|0)<255?l:255,l=n+P[a+66|0]|0,l=(l|0)>0?l:0,m[a+66|0]=(l|0)<255?l:255,l=n+P[a+67|0]|0,l=(l|0)>0?l:0,m[a+67|0]=(l|0)<255?l:255,l=n+P[a+96|0]|0,l=(l|0)>0?l:0,m[a+96|0]=(l|0)<255?l:255,l=n+P[a+97|0]|0,l=(l|0)>0?l:0,m[a+97|0]=(l|0)<255?l:255,l=n+P[a+98|0]|0,l=(l|0)>0?l:0,m[a+98|0]=(l|0)<255?l:255,n=n+P[a+99|0]|0,n=(n|0)>0?n:0,m[a+99|0]=(n|0)<255?n:255}function ei(n,a,l,g,w,x,E){var D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0,Rr=0,Gr=0,ti=0,gi=0,Ki=0,Un=0,gs=0;if((g|0)>=1)for(Rr=w<<1|1,Gr=ie(a,3),ti=0-a|0,gi=ie(a,-3),Ki=0-(a<<2)|0,Wt=a<<1,Un=0-Wt|0,gs=h[2546],J=h[2548],Oe=h[2547],V=h[2549];;){w=g,rr=n+Un|0,H=P[rr|0],ur=n+a|0,se=P[ur|0],He=H-se|0,Pt=n+ti|0,g=P[Pt|0],xe=P[n|0];e:{if((P[He+V|0]+(P[V+(g-xe|0)|0]<<2)|0)>(Rr|0)||(D=P[n+gi|0],P[V+(P[n+Ki|0]-D|0)|0]>(x|0)|P[V+(D-H|0)|0]>(x|0))||(st=P[V+(H-g|0)|0],(st|0)>(x|0))||(D=P[n+Wt|0],P[V+(P[n+Gr|0]-D|0)|0]>(x|0)|P[V+(D-se|0)|0]>(x|0))||(Lr=P[V+(se-xe|0)|0],(Lr|0)>(x|0)))break e;if(D=ie(xe-g|0,3),!((Lr|0)<=(E|0)&&(st|0)<=(E|0))){H=m[He+gs|0]+D|0,se=m[(H+4>>3)+Oe|0],m[Pt|0]=P[(m[(H+3>>3)+Oe|0]+g|0)+J|0],m[n|0]=P[(xe-se|0)+J|0];break e}He=m[(D+3>>3)+Oe|0],st=H,H=m[(D+4>>3)+Oe|0],D=H+1>>1,m[rr|0]=P[(st+D|0)+J|0],m[Pt|0]=P[(g+He|0)+J|0],m[n|0]=P[(xe-H|0)+J|0],m[ur|0]=P[(se-D|0)+J|0]}if(g=w+-1|0,n=n+l|0,!((w|0)>1))break}}function zo(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;e:{t:switch(l|0){case 0:ot[h[2734]](n,a,g);return;case 1:ot[h[2735]](n,a,g);return;case 7:ot[h[2735]](n,a,g),ot[h[2664]](g,0,a,1,0);return;case 2:ot[h[2736]](n,a,g);return;case 3:_n(g,n,a<<2);return;case 8:D=_n(g,n,a<<2),H=0,V=a,J=1,se=0,E=h[2664],ot[E](D|0,H|0,V|0,J|0,se|0);return;case 4:if((a|0)<1)break e;for(l=(a<<2)+n|0;a=h[n>>2],a=a<<24|a<<8&16711680|(a>>>8&65280|a>>>24),m[g|0]=a,m[g+1|0]=a>>>8,m[g+2|0]=a>>>16,m[g+3|0]=a>>>24,g=g+4|0,n=n+4|0,n>>>0<l>>>0;);break e;case 9:if((a|0)>=1)for(x=(a<<2)+n|0,l=g;w=h[n>>2],w=w<<24|w<<8&16711680|(w>>>8&65280|w>>>24),m[l|0]=w,m[l+1|0]=w>>>8,m[l+2|0]=w>>>16,m[l+3|0]=w>>>24,l=l+4|0,n=n+4|0,n>>>0<x>>>0;);ot[h[2664]](g,1,a,1,0);return;case 5:ot[h[2737]](n,a,g);return;case 10:ot[h[2737]](n,a,g),ot[h[2665]](g,a,1,0);return;case 6:break t;default:break e}ot[h[2738]](n,a,g)}}function Zo(n,a,l){var g=0,w=0,x=0;g=Mi-160|0,Mi=g,h[g+16>>2]=1,h[g+12>>2]=a,h[g+8>>2]=n,h[g+156>>2]=0,w=g,x=Ll(n,a,0,0,0,g+156|0,0,g+8|0),h[w+48>>2]=x,!h[g+156>>2]|(h[g+48>>2]!=7?h[g+48>>2]:0)||(h[g+48>>2]=4),n=h[g+48>>2];e:{if(n)break e;b0(g+48|0),n=h[g+20>>2],h[g+112>>2]=n+h[g+8>>2],h[g+108>>2]=h[g+12>>2]-n,fl(l,g+48|0);t:{if(!h[g+40>>2]){if(a=Gn(),!a){n=1;break e}h[a+2348>>2]=h[g+24>>2],h[a+2352>>2]=h[g+28>>2];r:{if(Wo(a,g+48|0)&&(n=va(h[g+48>>2],h[g+52>>2],h[l+20>>2],h[l>>2]),n||(h[a+148>>2]=0,Yu(h[l+20>>2],a),n=0,Cs(a,g+48|0))))break r;n=h[a>>2]}Qn(a);break t}a=Lu(1,0,272),n=0;r:{if(!a)break r;h[a>>2]=0,h[a+4>>2]=2,Ca(),n=a}if(a=n,!a){n=1;break e}r:{if(de(a,g+48|0)&&(n=va(h[g+48>>2],h[g+52>>2],h[l+20>>2],h[l>>2]),n||(n=0,Zu(a))))break r;n=h[a>>2]}Bh(a)}if(n){hl(h[l>>2]);break e}if(n=0,a=h[l+20>>2],!a|!h[a+48>>2])break e;n=zl(h[l>>2])}return Mi=g+160|0,n}function Ca(){var n=0;n=h[2673],(n|0)!=h[2551]&&(h[2771]=81,h[2770]=81,h[2769]=82,h[2768]=83,h[2767]=84,h[2766]=85,h[2765]=86,h[2764]=87,h[2763]=88,h[2762]=89,h[2761]=90,h[2760]=91,h[2759]=92,h[2758]=93,h[2757]=94,h[2756]=81,h[2803]=81,h[2802]=81,h[2801]=82,h[2800]=83,h[2799]=84,h[2798]=85,h[2797]=86,h[2796]=87,h[2795]=88,h[2794]=89,h[2793]=90,h[2792]=91,h[2791]=92,h[2790]=93,h[2789]=94,h[2788]=81,h[2755]=95,h[2754]=95,h[2753]=96,h[2752]=97,h[2751]=98,h[2750]=99,h[2749]=100,h[2748]=101,h[2747]=102,h[2746]=103,h[2745]=104,h[2744]=105,h[2743]=106,h[2742]=107,h[2741]=108,h[2740]=95,h[2787]=95,h[2786]=95,h[2785]=96,h[2784]=97,h[2783]=98,h[2782]=99,h[2781]=100,h[2780]=101,h[2779]=102,h[2778]=103,h[2777]=104,h[2776]=105,h[2775]=106,h[2774]=107,h[2773]=108,h[2772]=95,h[2733]=109,h[2804]=110,h[2735]=111,h[2734]=112,h[2736]=113,h[2737]=114,h[2738]=115,h[2805]=116,h[2732]=117,h[2551]=n)}function Is(n,a,l){var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0;w=Mi-16|0,Mi=w,H=h[a+4>>2],V=h[a>>2];e:{t:{if(!n){h[a+72>>2]=0,g=V,x=H;break t}if(E=h[n+8>>2],h[a+72>>2]=(E|0)>0,g=V,x=H,(E|0)<1)break t;if(E=0,g=h[n+16>>2],l=l>>>0>10,D=l?g&-2:g,x=h[n+24>>2],(D+x|0)>(H|0)||(g=h[n+12>>2],J=l?g&-2:g,g=h[n+20>>2],(x|0)<1|(J+g|0)>(V|0)|((g|0)<1|(D|J)<0)))break e}if(h[a+84>>2]=D,h[a+76>>2]=J,h[a+16>>2]=x,h[a+12>>2]=g,h[a+88>>2]=D+x,h[a+80>>2]=g+J,n){l=h[n+28>>2],h[a+92>>2]=(l|0)>0,E=1,D=1;t:{if((l|0)>=1){if(h[w+12>>2]=h[n+32>>2],h[w+8>>2]=h[n+36>>2],!fe(g,x,w+12|0,w+8|0))break t;h[a+96>>2]=h[w+12>>2],h[a+100>>2]=h[w+8>>2],D=!h[a+92>>2]}if(h[a+68>>2]=h[n>>2]!=0,h[a+56>>2]=!h[n+4>>2],D)break e;n=0,n=h[a+96>>2]<((ie(V,3)|0)/4|0)?h[a+100>>2]<((ie(H,3)|0)/4|0):n,h[a+56>>2]=0,h[a+68>>2]=n;break e}E=0;break e}h[a+68>>2]=0,h[a+92>>2]=0,E=1,h[a+56>>2]=1}return Mi=w+16|0,E}function yi(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;if(g=h[n+108>>2],E=a-g|0,(E|0)>=1)for(l=h[n+100>>2],V=h[n+16>>2]+(ie(l,g)<<2)|0;;){D=(E|0)<16?E:16,xe=D+g|0,w=h[n+8>>2],J=h[w>>2],Oe=ie(J,D),se=h[w+40>>2],w=h[se+136>>2]+ie(g,J)|0,H=h[n+20>>2],x=h[n+176>>2];e:{if((x|0)>=1){if(l=x+-1|0,nl((ie(l,20)+n|0)+180|0,g,xe,V,H),(x|0)<2)break e;for(;x=l+-1|0,nl((ie(x,20)+n|0)+180|0,g,xe,H,H),He=(l|0)>1,l=x,!!He;);break e}if((H|0)==(V|0))break e;_n(H,V,ie(l,D)<<2)}if(ot[h[2669]](H,w,Oe),x=h[se+12>>2],x){l=h[se+140>>2];e:{if((E|0)<1)break e;if(ot[h[(x<<2)+10912>>2]](l,w,w,J),(D|0)==1){l=w;break e}for(g=g+1|0;l=w+J|0,ot[h[(h[se+12>>2]<<2)+10912>>2]](w,l,l,J),w=l,g=g+1|0,(xe|0)!=(g|0););}h[se+140>>2]=l}if(l=h[n+100>>2],V=(ie(l,D)<<2)+V|0,g=xe,E=E-D|0,!((E|0)>0))break}h[n+108>>2]=a,h[n+116>>2]=a}function Su(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0;if(E=h[n+16>>2],(E|0)<1)return 0;for(se=E+1>>1,l=h[a+24>>2];;){g=l,l=h[n+32>>2],x=Ra(g,E-D|0,h[n+20>>2]+ie(l,D)|0,l),l=se-H|0,oi(h[a+28>>2],l)&&(w=h[n+36>>2],w=Ra(h[a+28>>2],l,h[n+24>>2]+ie(w,H)|0,w),g=l,l=h[n+36>>2],Ra(h[a+32>>2],g,h[n+28>>2]+ie(l,H)|0,l),H=w+H|0),D=x+D|0,x=h[a>>2],g=h[x>>2],w=0,l=h[a+24>>2];e:{if(h[l+64>>2]>=h[l+56>>2])break e;for(xe=h[(g<<2)+11312>>2],g=h[x+16>>2]+ie(h[x+20>>2],h[a+16>>2]+V|0)|0;;){if(h[l+24>>2]>0||(J=h[a+28>>2],h[J+64>>2]>=h[J+56>>2]|h[J+24>>2]>0))break e;if(j(l),j(h[a+28>>2]),j(h[a+32>>2]),l=h[a+24>>2],ot[xe|0](h[l+68>>2],h[h[a+28>>2]+68>>2],h[h[a+32>>2]+68>>2],g,h[l+52>>2]),w=w+1|0,g=h[x+20>>2]+g|0,l=h[a+24>>2],!(h[l+64>>2]<h[l+56>>2]))break}}if(V=w+V|0,!((E|0)>(D|0)))break}return V|0}function m0(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0;l=Mi-240|0,Mi=l,w=l+40|0,w?(Gd(Xo(w,0,200)+40|0),w=1):w=0;e:{if(!w){Mn(h[2536]);break e}P[10640]||(Xl(32)|0,m[10640]=1),w=l+80|0;t:{if(bn(n,a,l+40|0))break t;if(x=p0(h[l+40>>2],h[l+44>>2],32,0)|0,!x){n=h[l+44>>2],h[l>>2]=h[l+40>>2],h[l+4>>2]=n,ro(h[2536],1051,l),x=0;break t}if(g=Yl(0,h[l+40>>2],h[l+44>>2],32,255,65280,16711680,-16777216)|0,!g){n=h[l+44>>2],h[l+16>>2]=h[l+40>>2],h[l+20>>2]=n,ro(h[2536],1092,l+16|0),g=0;break t}if(js(g|0)|0,h[l+80>>2]=1,h[l+84>>2]=h[g+8>>2],h[l+88>>2]=h[g+12>>2],h[l+96>>2]=h[g+20>>2],h[l+100>>2]=h[g+16>>2],E=h[g+12>>2],D=h[g+16>>2],h[l+92>>2]=1,h[l+104>>2]=ie(E,D),n=Ia(n,a,l+40|0),n){h[l+32>>2]=n,E=0,ro(h[2536],1130,l+32|0);break t}if(kc(g|0),E=0,El(g|0,0,x|0,0)|0)break t;E=!(xu(x|0)|0)}Cl(g|0),Cl(x|0),hl(w)}return Mi=l+240|0,E|0}function O0(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0;if((g|0)>=2)for(E=g>>1,H=(E|0)>1?E:1,E=0;;){x=E<<3,D=h[(x|4)+n>>2],x=h[n+x>>2],V=(D>>>7&510)+(x>>>7&510)|0,J=(D>>>15&510)+(x>>>15&510)|0,x=(D<<1&510)+(x<<1&510)|0,D=((ie(V,-24116)+ie(J,28800)|0)+ie(x,-4684)|0)+33685504>>18,x=((ie(V,-19081)+ie(J,-9719)|0)+ie(x,28800)|0)+33685504>>18;e:{if(w){m[a+E|0]=x,m[l+E|0]=D;break e}V=a+E|0,m[V|0]=(x+P[V|0]|0)+1>>>1,x=l+E|0,m[x|0]=(D+P[x|0]|0)+1>>>1}if(E=E+1|0,(H|0)==(E|0))break}if(g&1){if(n=h[(H<<3)+n>>2],g=n>>>6&1020,E=n>>>14&1020,D=n<<2&1020,n=((ie(g,-24116)+ie(E,28800)|0)+ie(D,-4684)|0)+33685504>>18,g=((ie(g,-19081)+ie(E,-9719)|0)+ie(D,28800)|0)+33685504>>18,w){m[a+H|0]=g,m[l+H|0]=n;return}a=a+H|0,m[a|0]=(g+P[a|0]|0)+1>>>1,a=l+H|0,m[a|0]=(n+P[a|0]|0)+1>>>1}}function Xu(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0;w=h[n+16>>2],V=h[n+12>>2],Oe=(V+1|0)/2|0,J=h[a>>2],l=h[J+20>>2],E=h[n+8>>2],D=h[J+16>>2]+ie(E,l)|0,se=h[(h[J>>2]<<2)+11248>>2],g=h[n+28>>2],x=h[n+24>>2],H=h[n+20>>2];e:{if(!E){ot[se|0](H,0,x,g,x,g,D,0,V),l=w;break e}ot[se|0](h[a+4>>2],H,h[a+8>>2],h[a+12>>2],x,g,D-l|0,D,V),l=w+1|0}He=l,xe=w+E|0;e:{if((w|0)<3){l=x,w=g;break e}for(E=E+2|0;l=h[n+32>>2],H=(l<<1)+H|0,Pt=H-l|0,st=x,Wt=g,x=h[n+36>>2],l=st+x|0,w=g+x|0,g=h[J+20>>2],D=(g<<1)+D|0,ot[se|0](Pt,H,st,Wt,l,w,D-g|0,D,V),g=w,x=l,E=E+2|0,(E|0)<(xe|0););}return g=h[n+32>>2]+H|0,(h[n+84>>2]+xe|0)<h[n+88>>2]?(_n(h[a+4>>2],g,V),_n(h[a+8>>2],l,Oe),_n(h[a+12>>2],w,Oe),He+-1|0):(xe&1||ot[se|0](g,0,l,w,l,w,h[J+20>>2]+D|0,0,V),He|0)}function Yu(n,a){var l=0,g=0,w=0;e:{if(!n)break e;l=h[n+44>>2];t:{if((l|0)<0||(g=255,(l|0)<=100&&(l=ie(l,255),g=(l|0)/100|0,(l|0)<100)))break t;l=h[a+800>>2];r:{if((l|0)>=12){w=h[a+804>>2];break r}w=ie(P[((l|0)>0?l:0)+4832|0],g)>>3,h[a+804>>2]=w}l=h[a+832>>2];r:{if((l|0)>=12){l=h[a+836>>2];break r}l=ie(P[((l|0)>0?l:0)+4832|0],g)>>3,h[a+836>>2]=l}w=l|w,l=h[a+864>>2];r:{if((l|0)>=12){l=h[a+868>>2];break r}l=ie(P[((l|0)>0?l:0)+4832|0],g)>>3,h[a+868>>2]=l}w=l|w,l=h[a+896>>2];r:{if((l|0)>=12){g=h[a+900>>2];break r}g=ie(P[((l|0)>0?l:0)+4832|0],g)>>3,h[a+900>>2]=g}if(!(g|w))break t;g=a+544|0,_n(g+8|0,9424,220),h[g>>2]=0,h[g+4>>2]=31,h[g+228>>2]=256,h[a+540>>2]=1}if(n=h[n+52>>2],h[a+2372>>2]=n,(n|0)>=101){h[a+2372>>2]=100;return}if((n|0)>-1)break e;h[a+2372>>2]=0}}function kn(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((a|0)<1)return 0;for(l=h[n+8>>2],D=h[n+4>>2];;){e:{if((l|0)>-1)break e;if(g=h[n+12>>2],g>>>0<Oi[n+20>>2]){w=P[g|0]|P[g+1|0]<<8|(P[g+2|0]<<16|P[g+3|0]<<24),h[n+12>>2]=g+3,l=l+24|0,h[n+8>>2]=l,h[n>>2]=h[n>>2]<<24|(w>>>8&65280|(w<<8&16711680|w<<24))>>>8;break e}if(g>>>0<Oi[n+16>>2]){h[n+12>>2]=g+1,l=l+8|0,h[n+8>>2]=l,h[n>>2]=P[g|0]|h[n>>2]<<8;break e}if(!h[n+24>>2]){h[n+24>>2]=1,l=l+8|0,h[n+8>>2]=l,h[n>>2]=h[n>>2]<<8;break e}l=0,h[n+8>>2]=0}g=a+-1|0,J=n,se=l,x=h[n>>2],H=x>>>l|0,E=D>>>1&16777215;e:{if(H>>>0>E>>>0){h[n>>2]=x+((E^-1)<<l),x=D-E|0;break e}x=E+1|0}if(w=wn(x)^24,l=se-w|0,h[J+8>>2]=l,D=(x<<w)+-1|0,h[n+4>>2]=D,V=(H>>>0>E>>>0)<<g|V,w=(a|0)>1,a=g,!w)break}return V}function F0(n,a,l){var g=0;e:{if((n|0)==(a|0))break e;if((a-n|0)-l>>>0<=0-(l<<1)>>>0)return _n(n,a,l);g=(n^a)&3;t:{r:{if(n>>>0<a>>>0){if(g){g=n;break t}if(!(n&3)){g=n;break r}for(g=n;;){if(!l)break e;if(m[g|0]=P[a|0],a=a+1|0,l=l+-1|0,g=g+1|0,!(g&3))break}break r}i:{if(g)break i;if(n+l&3)for(;;){if(!l)break e;if(l=l+-1|0,g=l+n|0,m[g|0]=P[a+l|0],!(g&3))break}if(l>>>0<=3)break i;for(;l=l+-4|0,h[l+n>>2]=h[a+l>>2],l>>>0>3;);}if(!l)break e;for(;l=l+-1|0,m[l+n|0]=P[a+l|0],!!l;);break e}if(l>>>0<=3)break t;for(;h[g>>2]=h[a>>2],a=a+4|0,g=g+4|0,l=l+-4|0,l>>>0>3;);}if(!l)break e;for(;m[g|0]=P[a|0],g=g+1|0,a=a+1|0,l=l+-1|0,!!l;);}return n}function Xc(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0;for(g=n+-17|0,w=n+-18|0,x=n+-19|0,E=n+-20|0,D=n+-21|0,H=n+-22|0,V=n+-23|0,J=n+-24|0,se=n+-25|0,xe=n+-26|0,Oe=n+-27|0,He=n+-28|0,st=n+-29|0,Pt=n+-30|0,Wt=n+-31|0,rr=n+-32|0,ur=h[2548]-P[n+-33|0]|0;a=P[n+-1|0]+ur|0,m[n|0]=P[a+P[rr|0]|0],m[n+1|0]=P[P[Wt|0]+a|0],m[n+2|0]=P[P[Pt|0]+a|0],m[n+3|0]=P[P[st|0]+a|0],m[n+4|0]=P[P[He|0]+a|0],m[n+5|0]=P[P[Oe|0]+a|0],m[n+6|0]=P[P[xe|0]+a|0],m[n+7|0]=P[P[se|0]+a|0],m[n+8|0]=P[P[J|0]+a|0],m[n+9|0]=P[P[V|0]+a|0],m[n+10|0]=P[P[H|0]+a|0],m[n+11|0]=P[P[D|0]+a|0],m[n+12|0]=P[P[E|0]+a|0],m[n+13|0]=P[P[x|0]+a|0],m[n+14|0]=P[P[w|0]+a|0],m[n+15|0]=P[P[g|0]+a|0],n=n+32|0,l=l+1|0,(l|0)!=16;);}function Xo(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0;e:{if(!l||(g=n+l|0,m[g+-1|0]=a,m[n|0]=a,l>>>0<3)||(m[g+-2|0]=a,m[n+1|0]=a,m[g+-3|0]=a,m[n+2|0]=a,l>>>0<7)||(m[g+-4|0]=a,m[n+3|0]=a,l>>>0<9)||(g=0-n&3,w=g+n|0,a=ie(a&255,16843009),h[w>>2]=a,l=l-g&-4,g=l+w|0,h[g+-4>>2]=a,l>>>0<9)||(h[w+8>>2]=a,h[w+4>>2]=a,h[g+-8>>2]=a,h[g+-12>>2]=a,l>>>0<25)||(h[w+24>>2]=a,h[w+20>>2]=a,h[w+16>>2]=a,h[w+12>>2]=a,h[g+-16>>2]=a,h[g+-20>>2]=a,h[g+-24>>2]=a,h[g+-28>>2]=a,E=w&4|24,l=l-E|0,l>>>0<32))break e;for(g=a,x=a,a=w+E|0;h[a+24>>2]=x,h[a+28>>2]=g,h[a+16>>2]=x,h[a+20>>2]=g,h[a+8>>2]=x,h[a+12>>2]=g,h[a>>2]=x,h[a+4>>2]=g,a=a+32|0,l=l+-32|0,l>>>0>31;);}return n|0}function Ia(n,a,l){var g=0,w=0,x=0,E=0;g=Mi-144|0,Mi=g;e:{if(!l){x=2;break e}t:{if(!n){w=2;break t}h[l>>2]=0,h[l+4>>2]=0,h[l+32>>2]=0,h[l+36>>2]=0,h[l+24>>2]=0,h[l+28>>2]=0,E=l+16|0,x=E,h[x>>2]=0,h[x+4>>2]=0,w=l+8|0,h[w>>2]=0,h[w+4>>2]=0,x=3;r:switch(w=Ll(n,a,l,l+4|0,w,l+12|0,E,0),w|0){case 7:break e;case 0:break r;default:break t}if(h[g+140>>2]=0,h[g+132>>2]=0,h[g+136>>2]=0,h[g+124>>2]=0,h[g+128>>2]=0,h[g+116>>2]=0,h[g+120>>2]=0,h[g+100>>2]=0,h[g+104>>2]=0,h[g+108>>2]=0,h[g+112>>2]=0,h[g+92>>2]=0,h[g+96>>2]=0,h[g+108>>2]=l+124,w=l+40|0,h[g+88>>2]=w,Lo(w,l)){Gd(g),h[g>>2]=h[l+40>>2],h[g+4>>2]=h[l>>2],h[g+8>>2]=h[l+4>>2],h[g+88>>2]=g,x=Zo(n,a,g+88|0),x||(x=To(g,w)),hl(g);break e}x=Zo(n,a,g+88|0);break e}x=w}return Mi=g+144|0,x}function ns(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0;g=Mi-32|0,Mi=g,w=h[n+28>>2],h[g+16>>2]=w,x=h[n+20>>2],h[g+28>>2]=l,h[g+24>>2]=a,a=x-w|0,h[g+20>>2]=a,w=a+l|0,V=2,a=g+16|0;e:{t:{r:{if(!mf(Us(h[n+60>>2],g+16|0,2,g+12|0)|0))for(;;){if(x=h[g+12>>2],(x|0)==(w|0))break r;if((x|0)<=-1)break t;if(E=h[a+4>>2],D=x>>>0>E>>>0,H=(D<<3)+a|0,E=x-(D?E:0)|0,h[H>>2]=E+h[H>>2],H=(D?12:4)+a|0,h[H>>2]=h[H>>2]-E,w=w-x|0,a=D?a+8|0:a,V=V-D|0,!!mf(Us(h[n+60>>2],a|0,V|0,g+12|0)|0))break}if(h[g+12>>2]=-1,(w|0)!=-1)break t}a=h[n+44>>2],h[n+28>>2]=a,h[n+20>>2]=a,h[n+16>>2]=a+h[n+48>>2],n=l;break e}if(h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n>>2]=h[n>>2]|32,n=0,(V|0)==2)break e;n=l-h[a+4>>2]|0}return Mi=g+32|0,n|0}function Ku(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;x=ie(h[n+8>>2],h[n+52>>2]),E=h[n+80>>2],D=h[n+68>>2],a=h[n+24>>2];e:{if(!a){if((x|0)<1)break e;for(;l=sn(h[n+16>>2],0,h[(g<<2)+E>>2],0)+-2147483648|0,a=bi,a=l>>>0<2147483648?a+1|0:a,m[g+D|0]=(a|0)>255?-1:a,g=g+1|0,(x|0)!=(g|0););break e}if(l=0-a|0,a=h[n+32>>2],a=v0(0,l,a,a>>31),(x|0)<1)break e;for(H=h[n+76>>2],V=a,J=0-a|0;a=h[n+16>>2],l=g<<2,w=sn(J,Oe,h[l+E>>2],0),se=bi,xe=a,a=w,w=sn(V,He,h[l+H>>2],0),l=a+w|0,a=bi+se|0,a=l>>>0<w>>>0?a+1|0:a,w=l+-2147483648|0,l=sn(xe,0,w>>>0<2147483648?a+1|0:a,0)+-2147483648|0,a=bi,a=l>>>0<2147483648?a+1|0:a,m[g+D|0]=(a|0)>255?-1:a,g=g+1|0,(x|0)!=(g|0););}}function La(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0,Pt=0,Wt=0,rr=0,ur=0,Lr=0;if((l|0)>=1)for(w=h[g+-4>>2];J=V<<2,x=J+a|0,E=h[x>>2],x=h[x+-4>>2],H=x&255,se=(E&255)-H|0,xe=(w&255)-H|0,H=xe>>31,Oe=x>>>24|0,He=(w>>>24|0)-Oe|0,st=He>>31,Pt=x>>>8&255,Wt=(w>>>8&255)-Pt|0,D=Wt>>31,rr=x>>>16&255,ur=(w>>>16&255)-rr|0,x=ur>>31,Lr=w,w=(E>>>24|0)-Oe|0,D=((((H^H+xe)+((se|0)<0?se:0-se|0)|0)+(st^st+He)|0)+((w|0)<0?w:0-w|0)|0)+(D^D+Wt)|0,w=(E>>>8&255)-Pt|0,D=(D+((w|0)<0?w:0-w|0)|0)+(x^x+ur)|0,w=(E>>>16&255)-rr|0,w=(D+((w|0)<0?w:0-w|0)|0)<1?E:Lr,E=h[n+J>>2],w=(w&-16711936)+(E&-16711936)&-16711936|(w&16711935)+(E&16711935)&16711935,h[g+J>>2]=w,V=V+1|0,(V|0)!=(l|0););}function ll(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0;x=h[n+104>>2];e:{if(!x)break e;w=h[n+16>>2],g=h[n+8>>2],E=h[a>>2];t:{if(!h[n+56>>2]){a=g;break t}r:{if(!g){l=w+-1|0,a=0;break r}x=x-h[n>>2]|0,l=w,a=g+-1|0}if(g=g+w|0,w=h[n+84>>2],g=g+w|0,(g|0)!=h[n+88>>2]){w=l;break t}w=g-(a+w|0)|0}if((w|0)<1)break e;for(D=h[n+12>>2],se=h[E>>2],l=h[E+20>>2],V=h[E+16>>2]+ie(l,a)|0,H=V+1|0,a=15;;){if(g=0,(D|0)>=1){for(;l=(g<<1)+H|0,xe=l,Oe=P[l|0]&240,l=P[g+x|0]>>>4|0,m[xe|0]=Oe|l,a=a&l,g=g+1|0,(D|0)!=(g|0););l=h[E+20>>2]}if(H=l+H|0,x=h[n>>2]+x|0,J=J+1|0,(J|0)==(w|0))break}if((a|0)==15|se+-7>>>0>3)break e;ot[h[2665]](V,D,w,l)}return 0}function iu(n,a,l){e:{t:{if(a>>>0>20)break t;r:switch(a+-9|0){case 0:a=h[l>>2],h[l>>2]=a+4,h[n>>2]=h[a>>2];return;case 1:a=h[l>>2],h[l>>2]=a+4,a=h[a>>2],h[n>>2]=a,h[n+4>>2]=a>>31;return;case 2:a=h[l>>2],h[l>>2]=a+4,h[n>>2]=h[a>>2],h[n+4>>2]=0;return;case 4:a=h[l>>2],h[l>>2]=a+4,a=xr[a>>1],h[n>>2]=a,h[n+4>>2]=a>>31;return;case 5:a=h[l>>2],h[l>>2]=a+4,h[n>>2]=ci[a>>1],h[n+4>>2]=0;return;case 6:a=h[l>>2],h[l>>2]=a+4,a=m[a|0],h[n>>2]=a,h[n+4>>2]=a>>31;return;case 7:a=h[l>>2],h[l>>2]=a+4,h[n>>2]=P[a|0],h[n+4>>2]=0;return;case 3:case 8:break e;case 9:break r;default:break t}ot[0](n,l)}return}a=h[l>>2]+7&-8,h[l>>2]=a+8,l=h[a+4>>2],h[n>>2]=h[a>>2],h[n+4>>2]=l}function Ju(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0;w=h[n+16>>2],x=h[a+24>>2],l=h[h[a>>2]>>2];e:{if(l+-7>>>0>3&&!(1<<l&4154&&l>>>0<=12)||(l=h[n+104>>2],!l))break e;Qo(h[n+20>>2],h[n+32>>2],l,h[n>>2],h[n+12>>2],w,0)}if((w|0)<1)return 0;for(E=w+1>>1,D=h[n+32>>2],g=h[n+20>>2],l=w;H=Ra(x,l,g,D),g=ie(H,D)+g|0,V=ic(x)+V|0,l=l-H|0,(l|0)>0;);if((w|0)>=1){for(w=h[a+28>>2],x=h[n+36>>2],g=h[n+24>>2],l=E;D=Ra(w,l,g,x),ic(w),g=ie(x,D)+g|0,l=l-D|0,(l|0)>0;);for(g=h[n+28>>2],a=h[a+32>>2],n=h[n+36>>2];l=Ra(a,E,g,n),ic(a),g=ie(n,l)+g|0,E=E-l|0,(E|0)>0;);}return V|0}function $n(n,a){var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0;e:{if(!(h[n+24>>2]|(a|0)>24)){if(l=h[n+20>>2],w=l+a|0,h[n+20>>2]=w,D=h[(a<<2)+9312>>2],E=h[n+4>>2],g=E,a=l&63,l=a&31,x=h[n>>2],V=D&(32<=(a&63)>>>0?g>>>l|0:((1<<l)-1&g)<<32-l|x>>>l),(w|0)<8)break e;for(a=h[n+16>>2],H=h[n+12>>2],D=a>>>0>H>>>0?a:H;;){t:{if((a|0)==(D|0)){a=D,g=w;break t}if(g=E,x=(g&255)<<24|x>>>8,g=g>>>8|0,E=g,h[n>>2]=x,h[n+4>>2]=g,l=P[h[n+8>>2]+a|0],g=w+-8|0,h[n+20>>2]=g,a=a+1|0,h[n+16>>2]=a,l=E|l<<24,E=l,h[n>>2]=x,h[n+4>>2]=l,l=(w|0)>15,w=g,l)continue}break}if((a|0)!=(H|0)|(g|0)<65)break e;return h[n+20>>2]=0,h[n+24>>2]=1,V}h[n+20>>2]=0,h[n+24>>2]=1}return V}function Yc(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;w=ie(h[n+8>>2],h[n+52>>2]),E=h[n+76>>2],D=h[n+68>>2],a=ie(h[n+24>>2],h[n+16>>2]);e:{if(a){if((w|0)<1)break e;for(x=h[n+80>>2],J=0-a|0,a=0;g=h[n+20>>2],l=a<<2,H=l+E|0,se=h[H>>2],sn(h[l+x>>2],0,J,0),V=bi,g=sn(g,0,se-V|0,0)+-2147483648|0,l=bi,l=g>>>0<2147483648?l+1|0:l,m[a+D|0]=(l|0)>255?-1:l,h[H>>2]=V,a=a+1|0,(w|0)!=(a|0););break e}if((w|0)<1)break e;for(a=0;x=(a<<2)+E|0,g=sn(h[n+20>>2],0,h[x>>2],0)+-2147483648|0,l=bi,l=g>>>0<2147483648?l+1|0:l,m[a+D|0]=(l|0)>255?-1:l,h[x>>2]=0,a=a+1|0,(w|0)!=(a|0););}}function Kc(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0;if((l|0)>=1)for(x=h[g+-4>>2];H=D<<2,E=H+a|0,w=h[E>>2],x=((w^x)>>>1&2139062143)+(w&x)|0,w=x&255,E=h[E+-4>>2],w=((w-(E&255)|0)/2|0)+w|0,V=w>>>0<256?w:(w^-1)>>>24|0,w=x>>>24|0,w=((w-(E>>>24|0)|0)/2|0)+w|0,V=V|(w>>>0<256?w:w>>>24^-1)<<24,w=x>>>16&255,w=((w-(E>>>16&255)|0)/2|0)+w|0,x=x>>>8&255,x=((x-(E>>>8&255)|0)/2|0)+x|0,x=V|(w>>>0<256?w:(w^-1)>>>24|0)<<16|(x>>>0<256?x:(x^-1)>>>24|0)<<8,E=h[n+H>>2],x=(x&-16711936)+(E&-16711936)&-16711936|(x&16711935)+(E&16711935)&16711935,h[g+H>>2]=x,D=D+1|0,(D|0)!=(l|0););}function ca(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0;g=h[n+36>>2];e:{if(h[g+64>>2]>=h[g+56>>2])break e;x=h[n>>2],J=h[x>>2]+-7|0,w=h[x+20>>2],V=h[x+16>>2]+ie(w,a)|0,D=h[g+52>>2],a=15;t:{if((l|0)<1|h[g+24>>2]>0)break t;for(H=V+1|0;;){if(j(g),g=0,(D|0)>=1)for(;w=(g<<1)+H|0,se=w,xe=P[w|0]&240,w=P[h[h[n+36>>2]+68>>2]+g|0]>>>4|0,m[se|0]=xe|w,a=a&w,g=g+1|0,(D|0)!=(g|0););if(w=h[x+20>>2],g=h[n+36>>2],E=E+1|0,h[g+64>>2]>=h[g+56>>2]|(E|0)>=(l|0))break t;if(H=w+H|0,!(h[g+24>>2]<=0))break}}if((a|0)==15|J>>>0>3)break e;ot[h[2665]](V,D,E,w)}return E|0}function To(n,a){var l=0,g=0;h[a+4>>2]=h[n+4>>2],h[a+8>>2]=h[n+8>>2],l=2;e:{if(ds(a))break e;l=h[n+16>>2],g=h[n>>2];t:{if(g>>>0<=10){At(l,h[n+20>>2],h[a+16>>2],h[a+20>>2],ie(h[n+4>>2],P[g+1157|0]),h[n+8>>2]);break t}if(At(l,h[n+32>>2],h[a+16>>2],h[a+32>>2],h[n+4>>2],h[n+8>>2]),At(h[n+20>>2],h[n+36>>2],h[a+20>>2],h[a+36>>2],(h[n+4>>2]+1|0)/2|0,(h[n+8>>2]+1|0)/2|0),At(h[n+24>>2],h[n+40>>2],h[a+24>>2],h[a+40>>2],(h[n+4>>2]+1|0)/2|0,(h[n+8>>2]+1|0)/2|0),g=h[n>>2],!(1<<g&4154&&g>>>0<=12)&&(l=0,g+-7>>>0>3))break e;At(h[n+28>>2],h[n+44>>2],h[a+28>>2],h[a+44>>2],h[n+4>>2],h[n+8>>2])}l=0}return l}function Qu(n,a){var l=0,g=0,w=0,x=0;e:{if(h[n+2308>>2]<1||(l=h[n+2300>>2],(l|0)<h[n+300>>2]))break e;g=(l|0)<=h[n+308>>2]}l=n+160|0;e:{if(!h[n+148>>2]){h[n+168>>2]=g,h[n+164>>2]=h[n+2300>>2],rl(n,l),x=jo(n,a);break e}if(w=n+124|0,!(ot[h[2559]](w)&1))break e;_n(n+180|0,a,108),h[n+168>>2]=g,h[n+160>>2]=h[n+152>>2],h[n+164>>2]=h[n+2300>>2];t:{if(h[n+148>>2]==2){a=h[n+2304>>2],l=n+176|0,h[n+2304>>2]=h[l>>2],h[l>>2]=a;break t}rl(n,l)}return g&&(a=h[n+2260>>2],g=n+172|0,h[n+2260>>2]=h[g>>2],h[g>>2]=a),ot[h[2560]](w),a=h[n+152>>2]+1|0,h[n+152>>2]=(a|0)==h[n+156>>2]?0:a,1}return x}function Gs(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0,J=0;if((l|0)>=1)for(w=h[g+-4>>2];V=H<<2,E=V+a|0,D=h[E>>2],E=h[E+-4>>2],x=((D&255)+(w&255)|0)-(E&255)|0,J=x>>>0<256?x:(x^-1)>>>24|0,x=(D>>>24)+(w>>>24)-(E>>>24)|0,J=J|(x>>>0<256?x:x>>>24^-1)<<24,x=((D>>>16&255)+(w>>>16&255)|0)-(E>>>16&255)|0,w=((D>>>8&255)+(w>>>8&255)|0)-(E>>>8&255)|0,w=J|(x>>>0<256?x:(x^-1)>>>24|0)<<16|(w>>>0<256?w:(w^-1)>>>24|0)<<8,D=h[n+V>>2],w=(w&-16711936)+(D&-16711936)&-16711936|(w&16711935)+(D&16711935)&16711935,h[g+V>>2]=w,H=H+1|0,(H|0)!=(l|0););}function ul(n,a,l,g,w,x,E,D,H){var V=0,J=0,se=0,xe=0;h[n+72>>2]=E,h[n+68>>2]=g,h[n+60>>2]=0,h[n+64>>2]=0,h[n+56>>2]=x,h[n+52>>2]=w,h[n+48>>2]=l,h[n+44>>2]=a,h[n+8>>2]=D,E=(l|0)<(x|0),h[n+4>>2]=E,V=(a|0)<(w|0),h[n>>2]=V,J=V?a+-1|0:w,h[n+40>>2]=J,g=V?w+-1|0:a,h[n+36>>2]=g,V||(se=n,xe=v0(0,1,J,J>>31),h[se+12>>2]=xe),a=x-E|0,h[n+32>>2]=a,l=l-E|0,h[n+28>>2]=l;e:{if(!E){h[n+24>>2]=l,l=ie(l,g),l=v0(0,x,l,l>>31),g=bi,h[n+20>>2]=(g|0)==1&l>>>0<0|g>>>0<1?l:0;break e}h[n+24>>2]=a,a=g}h[n+76>>2]=H,se=n,xe=v0(0,1,a,a>>31),h[se+16>>2]=xe,a=n,n=ie(w,D),h[a+80>>2]=(n<<2)+H,Xo(H,0,n<<3),Cr()}function Ic(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0;x=P[n+-31|0],a=x+1|0,l=P[n+-30|0],w=a+l>>>1|0,m[n+64|0]=w,D=P[n+-32|0],m[n|0]=D+a>>>1,a=P[n+-29|0],g=(a+l|0)+1>>>1|0,m[n+65|0]=g,m[n+1|0]=w,w=P[n+-28|0],E=(w+a|0)+1>>>1|0,m[n+66|0]=E,m[n+2|0]=g,m[n+3|0]=E,g=a+2|0,E=(g+x|0)+(l<<1)>>>2|0,m[n+96|0]=E,l=l+2|0,m[n+32|0]=(l+D|0)+(x<<1)>>>2,x=w+(l+(a<<1)|0)>>>2|0,m[n+97|0]=x,m[n+33|0]=E,D=P[n+-25|0],l=P[n+-26|0],a=P[n+-27|0],g=a+(g+(w<<1)|0)>>>2|0,m[n+98|0]=g,m[n+34|0]=x,m[n+99|0]=(D+(a+(l<<1)|0)|0)+2>>>2,m[n+67|0]=(l+(w+(a<<1)|0)|0)+2>>>2,m[n+35|0]=g}function B0(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0;E=P[n+63|0],g=P[n+31|0],l=(E+g|0)+1>>>1|0,m[n+98|0]=l,D=P[n+95|0],m[n+96|0]=(D+E|0)+1>>>1,m[n+64|0]=l,w=P[n+-1|0],a=w+1|0,l=P[n+-33|0],x=a+l>>>1|0,m[n+34|0]=x,a=a+g>>>1|0,m[n+66|0]=a,m[n|0]=x,m[n+32|0]=a,a=P[n+-32|0],x=w+2|0,H=a+(x+(l<<1)|0)>>>2|0,m[n+35|0]=H,V=P[n+-31|0],m[n+3|0]=(P[n+-30|0]+(a+(V<<1)|0)|0)+2>>>2,m[n+2|0]=((l+(a<<1)|0)+V|0)+2>>>2,a=w<<1,w=g+2|0,l=l+(a+w|0)>>>2|0,m[n+67|0]=l,m[n+1|0]=H,g=(E+x|0)+(g<<1)>>>2|0,m[n+99|0]=g,m[n+33|0]=l,m[n+97|0]=(w+D|0)+(E<<1)>>>2,m[n+65|0]=g}function ff(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0;g=P[n+-32|0],w=g+1|0,a=P[n+-33|0],l=w+a>>>1|0,m[n+65|0]=l,x=P[n+-31|0],E=w+x>>>1|0,m[n+66|0]=E,m[n|0]=l,w=P[n+-30|0],l=(w+x|0)+1>>>1|0,m[n+67|0]=l,m[n+1|0]=E,E=P[n+-29|0],m[n+3|0]=(E+w|0)+1>>>1,m[n+2|0]=l,l=P[n+-1|0],D=l+2|0,H=P[n+31|0],m[n+96|0]=(D+P[n+63|0]|0)+(H<<1)>>>2,D=g+(D+(a<<1)|0)>>>2|0,m[n+97|0]=D,a=a+2|0,m[n+64|0]=(a+H|0)+(l<<1)>>>2,a=(a+(g<<1)|0)+x>>>2|0,m[n+98|0]=a,m[n+32|0]=D,g=(w+(g+(x<<1)|0)|0)+2>>>2|0,m[n+99|0]=g,m[n+33|0]=a,m[n+35|0]=(E+((w<<1)+x|0)|0)+2>>>2,m[n+34|0]=g}function Ws(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;g=h[n+36>>2];e:{if(h[g+64>>2]>=h[g+56>>2])break e;x=h[n>>2],w=h[x>>2],D=(w|0)==4|(w|0)==9,se=w+-7|0,E=h[x+20>>2],H=h[x+16>>2]+ie(E,a)|0,V=h[g+52>>2],w=0,a=0;t:{if((l|0)<1||(a=0,h[g+24>>2]>0))break t;for(a=(D?0:3)+H|0;;){r:{if(j(g),J=ot[h[2666]](h[h[n+36>>2]+68>>2],0,V,1,a,0)|J,E=h[x+20>>2],g=h[n+36>>2],w=w+1|0,h[g+64>>2]>=h[g+56>>2]|(w|0)>=(l|0))break r;if(a=a+E|0,h[g+24>>2]<=0)continue}break}a=(J|0)!=0}if(!a|se>>>0>3)break e;ot[h[2664]](H,D,V,w,E)}return w|0}function Eu(n,a,l){var g=0,w=0,x=0;g=Mi-208|0,Mi=g,h[g+204>>2]=l,l=0,Xo(g+160|0,0,40),h[g+200>>2]=h[g+204>>2];e:{if((Rt(0,a,g+200|0,g+80|0,g+160|0)|0)<0)break e;l=h[n+76>>2]>=0?1:l,w=h[n>>2],m[n+74|0]<=0&&(h[n>>2]=w&-33),x=w&32;t:{if(h[n+48>>2]){Rt(n,a,g+200|0,g+80|0,g+160|0);break t}if(h[n+48>>2]=80,h[n+16>>2]=g+80,h[n+28>>2]=g,h[n+20>>2]=g,w=h[n+44>>2],h[n+44>>2]=g,Rt(n,a,g+200|0,g+80|0,g+160|0),!w)break t;ot[h[n+36>>2]](n,0,0)|0,h[n+48>>2]=0,h[n+44>>2]=w,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0}if(h[n>>2]=x|h[n>>2],!l)break e}Mi=g+208|0}function Ii(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;w=h[a>>2],x=h[w+28>>2],H=h[a+16>>2],E=h[w+44>>2],D=x+ie(H,E)|0,g=h[n+104>>2];e:{if(g){if(l=h[n+16>>2],(l|0)<1)break e;for(J=h[w+32>>2],x=h[a+36>>2],E=h[n>>2],se=h[w+16>>2],n=0;V=Ra(x,l,g,E),g=ie(E,V)+g|0,n=ic(x)+n|0,l=l-V|0,(l|0)>0;);if((n|0)<1)break e;return Qo(ie(H,J)+se|0,h[w+32>>2],D,h[w+44>>2],h[h[a+36>>2]+52>>2],n,1),0}if(!x|(l|0)<1)break e;for(n=h[n+96>>2],g=0;D=Xo(D,255,n)+E|0,g=g+1|0,(g|0)!=(l|0););}return 0}function rn(n){n=n|0;var a=0,l=0,g=0,w=0,x=0;l=P[n+31|0],g=l+2|0,a=P[n+63|0],m[n+96|0]=P[n+95|0]+(g+(a<<1)|0)>>>2,x=l<<1,l=P[n+-1|0],w=l+2|0,a=a+(x+w|0)>>>2|0,m[n+97|0]=a,m[n+64|0]=a,a=g+(l<<1)|0,l=P[n+-33|0],a=a+l>>>2|0,m[n+98|0]=a,m[n+65|0]=a,m[n+32|0]=a,g=P[n+-32|0],a=(g+w|0)+(l<<1)>>>2|0,m[n+99|0]=a,m[n+66|0]=a,m[n+33|0]=a,m[n|0]=a,x=P[n+-29|0],a=P[n+-30|0],w=l,l=P[n+-31|0],w=((w+l|0)+(g<<1)|0)+2>>>2|0,m[n+67|0]=w,m[n+34|0]=w,m[n+1|0]=w,g=((a+g|0)+(l<<1)|0)+2>>>2|0,m[n+35|0]=g,m[n+2|0]=g,m[n+3|0]=((l+x|0)+(a<<1)|0)+2>>>2}function Ra(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;e:{if((a|0)<1)break e;for(;;){if(h[n+24>>2]<1&&h[n+64>>2]<h[n+56>>2])break e;if(h[n+4>>2]&&(J=n,se=p1(h[n+76>>2],h[n+80>>2]),h[J+76>>2]=se,h[n+80>>2]=bi),t0(n,l),!(h[n+4>>2]|(ie(h[n+52>>2],h[n+8>>2])|0)<1))for(H=h[n+76>>2],V=h[n+80>>2],w=0;E=w<<2,D=E+H|0,h[D>>2]=h[D>>2]+h[V+E>>2],w=w+1|0,(w|0)<(ie(h[n+52>>2],h[n+8>>2])|0););if(h[n+60>>2]=h[n+60>>2]+1,h[n+24>>2]=h[n+24>>2]-h[n+32>>2],l=l+g|0,x=x+1|0,(x|0)==(a|0))break}x=a}return x}function Qa(n){var a=0,l=0,g=0;if(n){if(a=n+160|0,Fn(h[a>>2]),Fn(h[n+172>>2]),l=n+168|0,G0(h[l>>2]),Ff(n+124|0),g=n+136|0,Ff(g),h[l>>2]=0,h[l+4>>2]=0,h[a>>2]=0,h[a+4>>2]=0,h[n+152>>2]=0,h[n+156>>2]=0,h[n+144>>2]=0,h[n+148>>2]=0,h[g>>2]=0,h[g+4>>2]=0,h[n+128>>2]=0,h[n+132>>2]=0,h[n+120>>2]=0,h[n+124>>2]=0,Fn(h[n+16>>2]),a=0,h[n+16>>2]=0,h[n+176>>2]>=1)for(;l=(ie(a,20)+n|0)+196|0,Fn(h[l>>2]),h[l>>2]=0,a=a+1|0,(a|0)<h[n+176>>2];);h[n+260>>2]=0,h[n+176>>2]=0,Fn(h[n+264>>2]),h[n+12>>2]=0,h[n+264>>2]=0}}function Jc(){h[2545]!=h[2673]&&(h[2703]=32,h[2674]=33,h[2706]=34,h[2704]=35,h[2705]=36,h[2707]=37,h[2708]=38,h[2712]=39,h[2709]=40,h[2710]=41,h[2714]=42,h[2716]=43,h[2717]=44,h[2718]=45,h[2719]=46,h[2713]=47,h[2711]=48,h[2715]=49,h[2690]=50,h[2688]=51,h[2686]=52,h[2685]=53,h[2684]=54,h[2693]=55,h[2692]=56,h[2691]=57,h[2689]=58,h[2687]=59,h[2682]=60,h[2681]=61,h[2680]=62,h[2679]=63,h[2678]=64,h[2677]=65,h[2676]=66,h[2702]=67,h[2701]=68,h[2700]=69,h[2699]=70,h[2698]=71,h[2697]=72,h[2696]=73,h[2720]=74,h[2545]=h[2673])}function es(n){n=n|0;var a=0,l=0,g=0,w=0,x=0;a=P[n+-29|0],w=a+2|0,g=P[n+-31|0],l=P[n+-30|0],x=(w+g|0)+(l<<1)>>>2|0,m[n+32|0]=x,l=l+2|0,m[n|0]=(l+P[n+-32|0]|0)+(g<<1)>>>2,g=P[n+-28|0],l=g+(l+(a<<1)|0)>>>2|0,m[n+64|0]=l,m[n+1|0]=x,m[n+33|0]=l,a=w+(g<<1)|0,w=P[n+-27|0],a=a+w>>>2|0,m[n+96|0]=a,m[n+2|0]=l,m[n+65|0]=a,m[n+34|0]=a,m[n+3|0]=a,a=P[n+-26|0],g=(a+(g+(w<<1)|0)|0)+2>>>2|0,m[n+97|0]=g,l=P[n+-25|0],w=(l+(w+(a<<1)|0)|0)+2>>>2|0,m[n+98|0]=w,m[n+35|0]=g,m[n+66|0]=g,m[n+99|0]=((l+a|0)+(l<<1)|0)+2>>>2,m[n+67|0]=w}function nu(n){n=n|0;var a=0,l=0,g=0,w=0,x=0;l=P[n+63|0],a=l+2|0,x=P[n+95|0],g=ie((a+x|0)+(x<<1)>>>2|0,16843009),m[n+96|0]=g,m[n+97|0]=g>>>8,m[n+98|0]=g>>>16,m[n+99|0]=g>>>24,w=P[n+31|0],g=w+2|0,l=ie(x+(g+(l<<1)|0)>>>2|0,16843009),m[n+64|0]=l,m[n+65|0]=l>>>8,m[n+66|0]=l>>>16,m[n+67|0]=l>>>24,x=a,a=P[n+-1|0],w=ie((x+a|0)+(w<<1)>>>2|0,16843009),m[n+32|0]=w,m[n+33|0]=w>>>8,m[n+34|0]=w>>>16,m[n+35|0]=w>>>24,a=ie((P[n+-33|0]+g|0)+(a<<1)>>>2|0,16843009),m[n|0]=a,m[n+1|0]=a>>>8,m[n+2|0]=a>>>16,m[n+3|0]=a>>>24}function Zs(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if(m[w|0]=P[n|0],(a|0)>=2)for(D=a+-1|0,H=w+1|0,E=n+1|0;m[x+H|0]=P[x+E|0]-P[n+x|0],x=x+1|0,(D|0)!=(x|0););if((l|0)>=2)for(J=g^-1,se=(a|0)<2,H=1;;){if(w=g+w|0,D=n+g|0,m[w|0]=P[D|0]-P[n|0],x=1,!se)for(;V=x+D|0,E=(P[n+x|0]+P[V+-1|0]|0)-P[D+(x+J|0)|0]|0,E=(E|0)>0?E:0,m[w+x|0]=P[V|0]-((E|0)<255?E:255),x=x+1|0,(x|0)!=(a|0););if(n=D,H=H+1|0,(H|0)==(l|0))break}}function g0(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;H=P[l+D|0],se=P[a+D|0],V=P[n+D|0],x=(D<<2)+g|0,m[x|0]=255,V=ie(V,19077)>>>8|0,J=V+(ie(se,33050)>>>8|0)|0,E=J+-17685|0,m[x+3|0]=E>>>0<16384?E>>>6|0:J>>>0<17685?0:255,J=V+(ie(H,26149)>>>8|0)|0,E=J+-14234|0,m[x+1|0]=E>>>0<16384?E>>>6|0:J>>>0<14234?0:255,E=x,x=V-(ie(se,6419)>>>8|0)-(ie(H,13320)>>>8)|0,H=x+8708|0,m[E+2|0]=H>>>0<16384?H>>>6|0:(x|0)<-8708?0:255,D=D+1|0,(D|0)!=(w|0););}function Lc(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;H=P[a+D|0],se=P[l+D|0],V=P[n+D|0],x=(D<<2)+g|0,m[x+3|0]=255,V=ie(V,19077)>>>8|0,J=V+(ie(se,26149)>>>8|0)|0,E=J+-14234|0,m[x+2|0]=E>>>0<16384?E>>>6|0:J>>>0<14234?0:255,J=V+(ie(H,33050)>>>8|0)|0,E=J+-17685|0,m[x|0]=E>>>0<16384?E>>>6|0:J>>>0<17685?0:255,E=x,x=V-(ie(H,6419)>>>8|0)-(ie(se,13320)>>>8)|0,H=x+8708|0,m[E+1|0]=H>>>0<16384?H>>>6|0:(x|0)<-8708?0:255,D=D+1|0,(D|0)!=(w|0););}function qo(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;H=P[l+D|0],se=P[a+D|0],V=P[n+D|0],x=(D<<2)+g|0,m[x+3|0]=255,V=ie(V,19077)>>>8|0,J=V+(ie(se,33050)>>>8|0)|0,E=J+-17685|0,m[x+2|0]=E>>>0<16384?E>>>6|0:J>>>0<17685?0:255,J=V+(ie(H,26149)>>>8|0)|0,E=J+-14234|0,m[x|0]=E>>>0<16384?E>>>6|0:J>>>0<14234?0:255,E=x,x=V-(ie(se,6419)>>>8|0)-(ie(H,13320)>>>8)|0,H=x+8708|0,m[E+1|0]=H>>>0<16384?H>>>6|0:(x|0)<-8708?0:255,D=D+1|0,(D|0)!=(w|0););}function So(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;V=(D<<1)+g|0,H=ie(P[n+D|0],19077)>>>8|0,x=P[l+D|0],J=H+(ie(x,26149)>>>8|0)|0,E=J+-14234|0,se=(E>>>0<16384?E>>>6|0:J>>>0<14234?0:248)&248,J=P[a+D|0],x=H-(ie(J,6419)>>>8|0)-(ie(x,13320)>>>8)|0,E=x+8708|0,x=E>>>0<16384?E>>6:(x|0)<-8708?0:255,m[V|0]=se|x>>>5,E=V,H=H+(ie(J,33050)>>>8|0)|0,V=H+-17685|0,m[E+1|0]=x<<3&224|(V>>>0<16384?V>>>9|0:H>>>0<17685?0:31),D=D+1|0,(D|0)!=(w|0););}function os(n,a){var l=0,g=0,w=0,x=0,E=0;g=h[n+8>>2],E=h[g+40>>2],l=h[(Oi[E+12>>2]<2?g+84|0:n+108|0)>>2],w=h[n+108>>2],l=(w|0)<(l|0)?l:w;e:{if((l|0)>=(a|0)||(w=h[g>>2],g=h[E+136>>2]+ie(w,l)|0,re(n+180|0,l,a,h[n+16>>2]+ie(l,h[n+100>>2])|0,g),x=h[E+12>>2],!x))break e;ot[h[(x<<2)+10912>>2]](h[E+140>>2],g,g,w),x=l+1|0;t:{if((x|0)==(a|0)){l=g;break t}for(;l=g+w|0,ot[h[(h[E+12>>2]<<2)+10912>>2]](g,l,l,w),g=l,x=x+1|0,(x|0)!=(a|0););}h[E+140>>2]=l}h[n+108>>2]=a,h[n+116>>2]=a}function fa(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0;if(x=h[n+8>>2],(x|0)>=1)for(J=ie(h[n+52>>2],x);;){if((E|0)<(J|0))for(xe=h[n+80>>2],g=0,w=0,D=E,H=E;;){if(se=h[n+40>>2],V=0,g=h[n+36>>2]+g|0,(g|0)>=1){for(;V=P[a+H|0],w=V+w|0,l=H+x|0,H=l,g=g-se|0,(g|0)>0;);H=l}if(l=ie(g,V),h[(D<<2)+xe>>2]=l+ie(w,se),w=sn(h[n+12>>2],0,0-l|0,0)+-2147483648|0,l=bi,w=w>>>0<2147483648?l+1|0:l,D=x+D|0,!((D|0)<(J|0)))break}if(E=E+1|0,(x|0)==(E|0))break}}function Tc(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0;l=P[n+-32|0],g=h[2548]-P[n+-33|0]|0,a=g+P[n+-1|0]|0,m[n|0]=P[l+a|0],w=P[n+-31|0],m[n+1|0]=P[a+w|0],x=P[n+-30|0],m[n+2|0]=P[a+x|0],E=P[n+-29|0],m[n+3|0]=P[a+E|0],a=g+P[n+31|0]|0,m[n+32|0]=P[a+l|0],m[n+33|0]=P[a+w|0],m[n+34|0]=P[a+x|0],m[n+35|0]=P[a+E|0],a=g+P[n+63|0]|0,m[n+64|0]=P[a+l|0],m[n+65|0]=P[a+w|0],m[n+66|0]=P[a+x|0],m[n+67|0]=P[a+E|0],a=l,l=g+P[n+95|0]|0,m[n+96|0]=P[a+l|0],m[n+97|0]=P[l+w|0],m[n+98|0]=P[l+x|0],m[n+99|0]=P[l+E|0]}function ou(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;D=P[l+x|0],H=(x<<1)+g|0,E=ie(P[n+x|0],19077)>>>8|0,se=P[a+x|0],V=E+(ie(se,33050)>>>8|0)|0,J=V+-17685|0,m[H+1|0]=(J>>>0<16384?J>>>6|0:V>>>0<17685?0:240)|15,J=H,H=E+(ie(D,26149)>>>8|0)|0,V=H+-14234|0,D=E-(ie(se,6419)>>>8|0)-(ie(D,13320)>>>8)|0,E=D+8708|0,m[J|0]=(V>>>0<16384?V>>>6|0:H>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(D|0)<-8708?0:15),x=x+1|0,(x|0)!=(w|0););}function Oa(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0;w=h[n+104>>2];e:{if(!w)break e;x=h[a>>2],E=h[x>>2],H=(E|0)==4|(E|0)==9,a=h[n+16>>2],g=h[n+8>>2],V=h[n+12>>2];t:{if(!h[n+56>>2]){D=g;break t}if(g?(D=g+-1|0,w=w-h[n>>2]|0,l=a):l=a+-1|0,a=a+g|0,g=h[n+84>>2],a=a+g|0,(a|0)!=h[n+88>>2]){a=l;break t}a=a-(g+D|0)|0}if(g=h[n>>2],n=h[x+20>>2],l=h[x+16>>2]+ie(n,D)|0,!(ot[h[2666]](w,g,V,a,l+(H?0:3)|0,n)|0)|E+-7>>>0>3)break e;ot[h[2664]](l,H,V,a,h[x+20>>2])}return 0}function Fa(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;H=P[a+E|0],D=ie(E,3)+g|0,J=ie(P[n+E|0],19077)>>>8|0,se=P[l+E|0],x=J+(ie(se,26149)>>>8|0)|0,V=x+-14234|0,m[D+2|0]=V>>>0<16384?V>>>6|0:x>>>0<14234?0:255,x=J+(ie(H,33050)>>>8|0)|0,V=x+-17685|0,m[D|0]=V>>>0<16384?V>>>6|0:x>>>0<17685?0:255,x=D,H=J-(ie(H,6419)>>>8|0)-(ie(se,13320)>>>8)|0,D=H+8708|0,m[x+1|0]=D>>>0<16384?D>>>6|0:(H|0)<-8708?0:255,E=E+1|0,(E|0)!=(w|0););}function Pc(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((w|0)>=1)for(;H=P[l+E|0],D=ie(E,3)+g|0,J=ie(P[n+E|0],19077)>>>8|0,se=P[a+E|0],x=J+(ie(se,33050)>>>8|0)|0,V=x+-17685|0,m[D+2|0]=V>>>0<16384?V>>>6|0:x>>>0<17685?0:255,x=J+(ie(H,26149)>>>8|0)|0,V=x+-14234|0,m[D|0]=V>>>0<16384?V>>>6|0:x>>>0<14234?0:255,x=D,H=J-(ie(se,6419)>>>8|0)-(ie(H,13320)>>>8)|0,D=H+8708|0,m[x+1|0]=D>>>0<16384?D>>>6|0:(H|0)<-8708?0:255,E=E+1|0,(E|0)!=(w|0););}function ec(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0;return g=h[a>>2],a=h[a+-4>>2],l=a&255,w=(g&255)-l|0,x=(n&255)-l|0,l=x>>31,E=a>>>24|0,D=(n>>>24|0)-E|0,H=D>>31,V=a>>>8&255,J=(n>>>8&255)-V|0,se=J>>31,xe=a>>>16&255,Oe=(n>>>16&255)-xe|0,a=Oe>>31,He=n,n=(g>>>24|0)-E|0,l=((((l^l+x)+((w|0)<0?w:0-w|0)|0)+(H^H+D)|0)+((n|0)<0?n:0-n|0)|0)+(se^se+J)|0,n=(g>>>8&255)-V|0,a=(l+((n|0)<0?n:0-n|0)|0)+(a^a+Oe)|0,n=(g>>>16&255)-xe|0,((a+((n|0)<0?n:0-n|0)|0)<1?g:He)|0}function Dl(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;if(w=h[n+8>>2],(w|0)>=1)for(J=ie(h[n+52>>2],w),se=h[n+80>>2];;){if(l=w+E|0,g=h[n+36>>2],D=P[a+E|0],x=D,x=h[n+44>>2]>=2?P[a+l|0]:x,h[(E<<2)+se>>2]=ie(g,D),H=l,(l|0)<(J|0))for(;;){g=g-h[n+40>>2]|0;e:{if((g|0)>=0){V=h[n+36>>2];break e}V=h[n+36>>2],g=V+g|0,D=x,H=w+H|0,x=P[H+a|0]}if(h[(l<<2)+se>>2]=ie(x,V)+ie(D-x|0,g),l=l+w|0,!((l|0)<(J|0)))break}if(E=E+1|0,(E|0)==(w|0))break}}function as(n){var a=0,l=0,g=0,w=0,x=0,E=0,D=0;g=h[n+20>>2];e:{if((g|0)<8){a=g;break e}for(l=h[n+16>>2],a=h[n+12>>2],D=l>>>0>a>>>0?l:a;;){if((l|0)==(D|0)){a=g;break e}if(x=h[n+4>>2],w=x>>>8|0,E=(x&255)<<24|h[n>>2]>>>8,x=w,h[n>>2]=E,h[n+4>>2]=w,w=P[h[n+8>>2]+l|0],a=g+-8|0,h[n+20>>2]=a,l=l+1|0,h[n+16>>2]=l,h[n>>2]=E,h[n+4>>2]=x|w<<24,w=(g|0)>15,g=a,!w)break}}h[n+16>>2]!=h[n+12>>2]|(a|0)<65&&!h[n+24>>2]||(h[n+20>>2]=0,h[n+24>>2]=1)}function Mc(n,a){e:{if(n){if(a>>>0<=127)break e;t:{if(!h[h[2607]>>2]){if((a&-128)==57216)break e;break t}if(a>>>0<=2047)return m[n+1|0]=a&63|128,m[n|0]=a>>>6|192,2;if(!((a&-8192)!=57344&&a>>>0>=55296))return m[n+2|0]=a&63|128,m[n|0]=a>>>12|224,m[n+1|0]=a>>>6&63|128,3;if(a+-65536>>>0<=1048575)return m[n+3|0]=a&63|128,m[n|0]=a>>>18|240,m[n+2|0]=a>>>6&63|128,m[n+1|0]=a>>>12&63|128,4}h[2865]=25,n=-1}else n=1;return n}return m[n|0]=a,1}function zl(n){var a=0,l=0,g=0,w=0,x=0,E=0;return n?(w=h[n+8>>2]+-1|0,Oi[n>>2]<=10?(a=n+20|0,l=h[a>>2],h[a>>2]=0-l,h[n+16>>2]=h[n+16>>2]+ie(l,w),0):(a=n+32|0,l=h[a>>2],h[a>>2]=0-l,g=n+36|0,a=h[g>>2],h[g>>2]=0-a,x=n+40|0,g=h[x>>2],h[x>>2]=0-g,h[n+16>>2]=h[n+16>>2]+ie(l,w),l=n+20|0,x=l,E=h[l>>2],l=w>>1,h[x>>2]=E+ie(l,a),a=n+24|0,h[a>>2]=h[a>>2]+ie(l,g),a=h[n+28>>2],a&&(g=n+44|0,l=h[g>>2],h[g>>2]=0-l,h[n+28>>2]=a+ie(l,w)),0)):2}function y0(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;for(g=n+-25|0,w=n+-26|0,x=n+-27|0,E=n+-28|0,D=n+-29|0,H=n+-30|0,V=n+-31|0,J=n+-32|0,se=h[2548]-P[n+-33|0]|0;a=P[n+-1|0]+se|0,m[n|0]=P[a+P[J|0]|0],m[n+1|0]=P[P[V|0]+a|0],m[n+2|0]=P[P[H|0]+a|0],m[n+3|0]=P[P[D|0]+a|0],m[n+4|0]=P[P[E|0]+a|0],m[n+5|0]=P[P[x|0]+a|0],m[n+6|0]=P[P[w|0]+a|0],m[n+7|0]=P[P[g|0]+a|0],n=n+32|0,l=l+1|0,(l|0)!=8;);}function tc(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0;l=P[n+95|0],m[n+67|0]=l,m[n+66|0]=l,a=ie(l,16843009),m[n+96|0]=a,m[n+97|0]=a>>>8,m[n+98|0]=a>>>16,m[n+99|0]=a>>>24,w=P[n+31|0],g=w+1|0,a=P[n+63|0],x=g+a>>>1|0,m[n+32|0]=x,E=P[n+-1|0],m[n|0]=g+E>>>1,g=(a+l|0)+1>>>1|0,m[n+64|0]=g,m[n+2|0]=x,m[n+34|0]=g,g=((l+w|0)+(a<<1)|0)+2>>>2|0,m[n+33|0]=g,a=a+2|0,m[n+1|0]=(a+E|0)+(w<<1)>>>2,l=(a+l|0)+(l<<1)>>>2|0,m[n+65|0]=l,m[n+3|0]=g,m[n+35|0]=l}function Cu(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0;if(m[w|0]=P[n|0],V=a+-1|0,E=1,(a|0)>=2)for(D=w+1|0,H=n+1|0;m[x+D|0]=P[x+H|0]-P[n+x|0],x=x+1|0,(V|0)!=(x|0););if((l|0)>=2)for(D=(a|0)<2;;){if(w=g+w|0,a=n+g|0,m[w|0]=P[a|0]-P[n|0],!D)for(n=w+1|0,H=a+1|0,x=0;m[n+x|0]=P[x+H|0]-P[a+x|0],x=x+1|0,(V|0)!=(x|0););if(n=a,E=E+1|0,(E|0)==(l|0))break}}function au(n){n=n|0;var a=0,l=0,g=0,w=0,x=0,E=0;l=P[n+-30|0],a=l+2|0,g=P[n+-29|0],w=P[n+-28|0]+(a+(g<<1)|0)>>>2|0,m[n+99|0]=w,x=P[n+-31|0],E=x+2|0,g=g+(E+(l<<1)|0)>>>2|0,m[n+98|0]=g,l=a,a=P[n+-32|0],l=(l+a|0)+(x<<1)>>>2|0,m[n+97|0]=l,a=(P[n+-33|0]+E|0)+(a<<1)>>>2|0,m[n+96|0]=a,m[n+67|0]=w,m[n+66|0]=g,m[n+65|0]=l,m[n+64|0]=a,m[n+35|0]=w,m[n+34|0]=g,m[n+33|0]=l,m[n+32|0]=a,m[n+3|0]=w,m[n+2|0]=g,m[n+1|0]=l,m[n|0]=a}function Dc(n,a){n=n|0,a=a|0;var l=0,g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;return a=h[a>>2],V=h[a+24>>2],x=a+40|0,J=h[x>>2],g=h[a+20>>2],E=a+36|0,w=h[E>>2],l=h[a+16>>2],D=h[n+8>>2],a=h[a+32>>2],se=l+ie(D,a)|0,l=a,a=h[n+12>>2],H=h[n+16>>2],At(h[n+20>>2],h[n+32>>2],se,l,a,H),l=w,w=D>>1,l=g+ie(l,w)|0,a=(a+1|0)/2|0,g=(H+1|0)/2|0,At(h[n+24>>2],h[n+36>>2],l,h[E>>2],a,g),At(h[n+28>>2],h[n+36>>2],ie(w,J)+V|0,h[x>>2],a,g),h[n+16>>2]}function lo(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0;if((g|0)>=1)for(V=a?0:3,J=(a|0)!=0,se=(l|0)<1;;){if(!se)for(xe=n+V|0,H=n+J|0,a=0;x=a<<2,E=P[x+xe|0],(E|0)!=255&&(D=x+H|0,E=ie(E,32897),m[D|0]=ie(E,P[D|0])>>>23,D=(x|1)+H|0,m[D|0]=ie(E,P[D|0])>>>23,x=(x|2)+H|0,m[x|0]=ie(E,P[x|0])>>>23),a=a+1|0,(l|0)!=(a|0););if(n=n+w|0,a=(g|0)>1,g=g+-1|0,!a)break}}function R(n,a){var l=0;l=(a|0)!=0;e:{t:{r:{if(!a|!(n&3))break r;for(;;){if(!P[n|0])break t;if(n=n+1|0,a=a+-1|0,l=(a|0)!=0,!a)break r;if(!(n&3))break}}if(!l)break e}t:{if(!P[n|0]|a>>>0<4)break t;for(;;){if(l=h[n>>2],(l^-1)&l+-16843009&-2139062144)break t;if(n=n+4|0,a=a+-4|0,!(a>>>0>3))break}}if(!a)break e;for(;;){if(!P[n|0])return n;if(n=n+1|0,a=a+-1|0,!a)break}}return 0}function p(n){n=n|0;var a=0;a=ie((P[n+95|0]+(P[n+-29|0]+(P[n+63|0]+(P[n+-30|0]+(P[n+31|0]+(P[n+-31|0]+(P[n+-32|0]+P[n+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),m[n+96|0]=a,m[n+97|0]=a>>>8,m[n+98|0]=a>>>16,m[n+99|0]=a>>>24,m[n+64|0]=a,m[n+65|0]=a>>>8,m[n+66|0]=a>>>16,m[n+67|0]=a>>>24,m[n+32|0]=a,m[n+33|0]=a>>>8,m[n+34|0]=a>>>16,m[n+35|0]=a>>>24,m[n|0]=a,m[n+1|0]=a>>>8,m[n+2|0]=a>>>16,m[n+3|0]=a>>>24}function k(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0,J=0;if((l|0)>=1)for(w=h[g+-4>>2];x=H<<2,E=x+a|0,D=h[E+4>>2],J=g+x|0,V=h[E>>2],D=((D^V)>>>1&2139062143)+(D&V)|0,E=h[E+-4>>2],w=((E^w)>>>1&2139062143)+(w&E)|0,w=((D^w)>>>1&2139062143)+(w&D)|0,x=h[n+x>>2],w=(w&-16711936)+(x&-16711936)&-16711936|(w&16711935)+(x&16711935)&16711935,h[J>>2]=w,H=H+1|0,(H|0)!=(l|0););}function L(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0,He=0,st=0;for(se=0-a|0,xe=0-(a<<1)|0,Oe=l<<1|1,D=h[2548],H=h[2547],He=h[2546],V=h[2549];l=n+w|0,J=l+se|0,x=P[J|0],E=P[l|0],g=P[l+xe|0]-P[a+l|0]|0,((P[(x-E|0)+V|0]<<2)+P[g+V|0]|0)<=(Oe|0)&&(g=m[g+He|0]+ie(E-x|0,3)|0,st=m[(g+4>>3)+H|0],m[J|0]=P[(m[(g+3>>3)+H|0]+x|0)+D|0],m[l|0]=P[(E-st|0)+D|0]),w=w+1|0,(w|0)!=16;);}function z(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((l|0)>=1)for(;x=D<<2,H=xr[a+2>>1],V=xr[n>>1],J=xr[a>>1],se=xr[n+2>>1],E=ci[x+g>>1]+(((H+ie(V,9)|0)+ie(J+se|0,3)|0)+8>>4)|0,E=(E|0)<1023?E:1023,xr[w+x>>1]=(E|0)>0?E:0,E=x|2,x=ci[E+g>>1]+(((ie(se,9)+J|0)+ie(H+V|0,3)|0)+8>>4)|0,x=(x|0)<1023?x:1023,xr[w+E>>1]=(x|0)>0?x:0,a=a+2|0,n=n+2|0,D=D+1|0,(D|0)!=(l|0););}function j(n){var a=0,l=0,g=0;if(h[n+24>>2]<=0){e:{if(h[n+4>>2]){ot[h[2808]](n);break e}if(!h[n+20>>2]){if((ie(h[n+52>>2],h[n+8>>2])|0)<1)break e;for(l=h[n+76>>2];g=a<<2,m[h[n+68>>2]+a|0]=h[g+l>>2],l=h[n+76>>2],h[g+l>>2]=0,a=a+1|0,(a|0)<(ie(h[n+52>>2],h[n+8>>2])|0););break e}ot[h[2809]](n)}h[n+24>>2]=h[n+24>>2]+h[n+28>>2],h[n+68>>2]=h[n+68>>2]+h[n+72>>2],h[n+64>>2]=h[n+64>>2]+1}}function K(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0;if((g|0)>=1)for(;w=ci[n+2>>1],x=ci[n>>1],D=ci[n+4>>1],H=(ie(w,-19081)+ie(x,-9719)|0)+ie(D,28800)|0,V=H+33685504>>18,m[a+E|0]=V>>>0<256?V:(H|0)<-33685504?-33685504:255,w=(ie(w,-24116)+ie(x,28800)|0)+ie(D,-4684)|0,x=w+33685504>>18,m[l+E|0]=x>>>0<256?x:(w|0)<-33685504?-33685504:255,n=n+8|0,E=E+1|0,(E|0)!=(g|0););}function re(n,a,l,g,w){var x=0,E=0,D=0,H=0,V=0,J=0,se=0;H=h[n+16>>2],E=h[n+8>>2],n=h[n+4>>2],D=8>>>n|0;e:{if((D|0)<=7){if((a|0)>=(l|0))break e;for(V=-1<<D^-1,J=-1<<n^-1,se=(E|0)<1;;){if(x=0,n=0,!se)for(;x&J||(n=P[g|0],g=g+1|0),m[w|0]=h[((n&V)<<2)+H>>2]>>>8,n=n>>>D|0,w=w+1|0,x=x+1|0,(x|0)!=(E|0););if(a=a+1|0,(l|0)==(a|0))break}break e}ot[h[2732]](g,H,w,a,l,E)}}function ae(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0;x=h[a>>2],l=h[x+28>>2],E=h[x+44>>2],g=l+ie(E,h[n+8>>2])|0,w=h[n+16>>2],D=h[n+12>>2],a=h[n+104>>2];e:{if(a){if((w|0)<1)break e;for(l=0;g=_n(g,a,D)+h[x+44>>2]|0,a=h[n>>2]+a|0,l=l+1|0,(w|0)!=(l|0););break e}if(!l|(w|0)<1)break e;for(a=0;g=Xo(g,255,D)+E|0,a=a+1|0,(w|0)!=(a|0););}return 0}function ve(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0,xe=0,Oe=0;for(se=l<<1|1,D=h[2548],H=h[2547],xe=h[2546],V=h[2549];l=ie(a,w)+n|0,J=l+-1|0,x=P[J|0],E=P[l|0],g=P[l+-2|0]-P[l+1|0]|0,((P[(x-E|0)+V|0]<<2)+P[g+V|0]|0)<=(se|0)&&(g=m[g+xe|0]+ie(E-x|0,3)|0,Oe=m[(g+4>>3)+H|0],m[J|0]=P[(m[(g+3>>3)+H|0]+x|0)+D|0],m[l|0]=P[(E-Oe|0)+D|0]),w=w+1|0,(w|0)!=16;);}function Ee(n,a){n=n|0,a=a|0;var l=0,g=0;return l=h[a>>2],n=((l^n)>>>1&2139062143)+(n&l)|0,l=n&255,a=h[a+-4>>2],l=((l-(a&255)|0)/2|0)+l|0,g=l>>>0<256?l:(l^-1)>>>24|0,l=n>>>24|0,l=((l-(a>>>24|0)|0)/2|0)+l|0,g=g|(l>>>0<256?l:l>>>24^-1)<<24,l=n>>>16&255,l=((l-(a>>>16&255)|0)/2|0)+l|0,n=n>>>8&255,n=((n-(a>>>8&255)|0)/2|0)+n|0,g|(l>>>0<256?l:(l^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function Te(n,a,l){var g=0;if(h[n+24>>2]=0,h[n+8>>2]=-8,h[n>>2]=0,h[n+4>>2]=254,h[n+12>>2]=a,g=a+l|0,h[n+16>>2]=g,g=l>>>0>3?g+-3|0:a,h[n+20>>2]=g,g>>>0>a>>>0){l=P[a|0]|P[a+1|0]<<8|(P[a+2|0]<<16|P[a+3|0]<<24),h[n+8>>2]=16,h[n+12>>2]=a+3,h[n>>2]=(l>>>8&65280|(l<<8&16711680|l<<24))>>>8;return}if((l|0)>=1){h[n+8>>2]=0,h[n+12>>2]=a+1,h[n>>2]=P[a|0];return}h[n+24>>2]=1,h[n+8>>2]=0,h[n>>2]=0}function Ze(n,a,l){var g=0,w=0,x=0,E=0;g=h[l+16>>2];e:{if(!g){if(Io(l))break e;g=h[l+16>>2]}if(x=h[l+20>>2],g-x>>>0<a>>>0)return ot[h[l+36>>2]](l,n,a)|0;t:{if(m[l+75|0]<0)break t;for(w=a;;){if(g=w,!g)break t;if(w=g+-1|0,P[w+n|0]==10)break}if(w=ot[h[l+36>>2]](l,n,g)|0,w>>>0<g>>>0)break e;n=n+g|0,a=a-g|0,x=h[l+20>>2],E=g}_n(x,n,a),h[l+20>>2]=h[l+20>>2]+a,w=a+E|0}return w}function T(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;if((l|0)>=1)for(J=(a|0)<1;;){if(E=0,!J)for(;w=E<<1,x=w+n|0,se=x,V=(w|1)+n|0,D=P[V|0],w=D&15,H=ie(w,4369),x=P[x|0],m[se|0]=ie(H,x&240|x>>>4)>>>16&240|ie((x&15|x<<4)&255,H)>>>20,m[V|0]=ie(D&240|D>>>4,H)>>>16&240|w,E=E+1|0,(E|0)!=(a|0););if(n=n+g|0,w=(l|0)>1,l=l+-1|0,!w)break}}function B(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0,E=0,D=0,H=0;if(m[w|0]=P[n|0],(a|0)>=2)for(D=a+-1|0,E=w+1|0,H=n+1|0;m[x+E|0]=P[x+H|0]-P[n+x|0],x=x+1|0,(D|0)!=(x|0););if((l|0)>=2)for(E=1;;){if(w=g+w|0,D=n+g|0,x=0,(a|0)>=1)for(;m[w+x|0]=P[x+D|0]-P[n+x|0],x=x+1|0,(x|0)!=(a|0););if(n=D,E=E+1|0,(E|0)==(l|0))break}}function W(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0;if((a|0)>=1)for(;g=(x<<2)+n|0,w=h[g>>2],w>>>0<=4278190079&&(E=g,w>>>0>=16777216?(g=w>>>24|0,l?g=4278190080/(g>>>0)|0:g=ie(g,65793),g=ie(g,w>>>16&255)+8388608>>>8&16711680|(ie(g,w>>>8&255)+8388608>>>16&65280|(w&-16777216|ie(g,w&255)+8388608>>>24))):g=0,h[E>>2]=g),x=x+1|0,(x|0)!=(a|0););}function Q(n,a,l){var g=0,w=0,x=0,E=0,D=0,H=0,V=0,J=0,se=0;if(h[n+20>>2]=0,h[n+24>>2]=0,h[n>>2]=0,h[n+4>>2]=0,h[n+12>>2]=l,x=l>>>0<8?l:8,x)for(se=x,l=0;E=P[a+l|0],w=D<<3,g=w&31,32<=(w&63)>>>0?(w=E<<g,g=0):(w=(1<<g)-1&E>>>32-g,g=E<<g),H=g|H,V=w|V,l=l+1|0,g=D+1|0,g>>>0<1&&(J=J+1|0),D=g,!!((se|0)!=(g|0)|J););h[n+16>>2]=x,h[n>>2]=H,h[n+4>>2]=V,h[n+8>>2]=a}function de(n,a){var l=0,g=0,w=0;l=0;e:{if(!n)break e;if(!a)return h[n>>2]=2,0;h[n>>2]=0,h[n+8>>2]=a,l=n+24|0,Q(l,h[a+64>>2],h[a+60>>2]);t:{r:{i:{if(($n(l,8)|0)!=47||(w=$n(l,14),g=$n(l,14),$n(l,1),$n(l,3)))break i;if(!h[n+48>>2])break r}h[n>>2]=3;break t}if(h[n+4>>2]=2,g=g+1|0,h[a+4>>2]=g,l=a,a=w+1|0,h[l>>2]=a,l=1,Wr(a,g,1,n,0))break e}Qa(n),l=0}return l}function ke(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;e:{if(!n){if((g|0)<1)break e;for(;w=P[a+x|0]+w|0,m[l+x|0]=w,x=x+1|0,(x|0)!=(g|0););break e}if((g|0)<1)break e;for(w=P[n|0],E=w,D=w;;){if(E=(E&255)-(D&255)|0,D=w,w=(w&255)+E|0,w=(w|0)>0?w:0,E=P[a+x|0]+((w|0)<255?w:255)|0,m[l+x|0]=E,x=x+1|0,(x|0)==(g|0))break e;w=P[n+x|0]}}}function fe(n,a,l,g){var w=0,x=0,E=0,D=0;return w=h[g>>2],x=h[l>>2],x|(a|0)<1||(D=sn(w,w>>31,n,n>>31),x=a+D|0,E=bi,E=x>>>0<D>>>0?E+1|0:E,x=x+-1|0,E=E+-1|0,x=v0(x,(x|0)!=-1?E+1|0:E,a,0)),w|(n|0)<1||(E=sn(x,x>>31,a,a>>31),w=E+n|0,a=bi,a=w>>>0<E>>>0?a+1|0:a,w=w+-1|0,a=a+-1|0,w=v0(w,(w|0)!=-1?a+1|0:a,n,0)),n=0,(x|0)<1|(w|0)<1||(h[l>>2]=x,h[g>>2]=w,n=1),n}function Se(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0;if((l|0)>=1)for(w=h[g+-4>>2];x=H<<2,E=x+a|0,D=h[E+4>>2],w=((D^w)>>>1&2139062143)+(w&D)|0,D=g+x|0,E=h[E>>2],w=((E^w)>>>1&2139062143)+(w&E)|0,x=h[n+x>>2],w=(w&-16711936)+(x&-16711936)&-16711936|(w&16711935)+(x&16711935)&16711935,h[D>>2]=w,H=H+1|0,(H|0)!=(l|0););}function De(n,a){n=n|0,a=a|0;var l=0,g=0,w=0;return g=h[a>>2],a=h[a+-4>>2],l=((g&255)+(n&255)|0)-(a&255)|0,w=l>>>0<256?l:(l^-1)>>>24|0,l=(g>>>24)+(n>>>24)-(a>>>24)|0,w=w|(l>>>0<256?l:l>>>24^-1)<<24,l=((g>>>16&255)+(n>>>16&255)|0)-(a>>>16&255)|0,n=((g>>>8&255)+(n>>>8&255)|0)-(a>>>8&255)|0,w|(l>>>0<256?l:(l^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function je(n,a,l,g,w){var x=0;e:{if(!n|a>>>0<10|(P[n+3|0]!=157|P[n+4|0]!=1)||P[n+5|0]!=42||(a=P[n|0],(a&25)!=16|(a|P[n+1|0]<<8|P[n+2|0]<<16)>>>5>>>0>=l>>>0)||(a=P[n+6|0]|P[n+7|0]<<8&16128,!a)||(n=P[n+8|0]|P[n+9|0]<<8&16128,!n)||(g&&(h[g>>2]=a),x=1,!w))break e;h[w>>2]=n}return x}function ut(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0,D=0,H=0;e:{if(g=h[n+104>>2],!g|(l|0)<1)break e;for(D=h[a+16>>2]+l|0,w=h[a+36>>2];;){if(x=h[n+8>>2],E=h[w+60>>2],H=g,g=h[n>>2],Ra(w,h[n+16>>2]+(x-E|0)|0,H+ie(g,E-x|0)|0,g),l=l-(ot[h[a+52>>2]](a,D-l|0,l)|0)|0,(l|0)<1)break e;g=h[n+104>>2]}}return 0}function Dt(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0,J=0;if((l|0)>=1)for(H=m[n+2|0],V=m[n+1|0],J=m[n|0];x=w<<2,n=h[x+a>>2],E=n<<16>>24,D=(ie(E,J)>>5)+(n>>>16|0)|0,h[g+x>>2]=n+(ie(V,E)>>>5|0)+(ie(D<<24>>24,H)>>>5)&255|(D<<16&16711680|n&-16711936),w=w+1|0,(w|0)!=(l|0););}function Tt(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;if((l|0)>=1)for(D=a+-4|0,a=h[g+-4>>2];w=E<<2,x=h[w+D>>2],a=((x^a)>>>1&2139062143)+(a&x)|0,x=g+w|0,w=h[n+w>>2],a=(a&-16711936)+(w&-16711936)&-16711936|(a&16711935)+(w&16711935)&16711935,h[x>>2]=a,E=E+1|0,(E|0)!=(l|0););}function Ct(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0;if((l|0)>=1)for(;w=D<<2,x=w+a|0,E=h[x>>2],H=g+w|0,x=h[x+-4>>2],E=((x^E)>>>1&2139062143)+(E&x)|0,w=h[n+w>>2],h[H>>2]=(E&-16711936)+(w&-16711936)&-16711936|(E&16711935)+(w&16711935)&16711935,D=D+1|0,(D|0)!=(l|0););}function br(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0;if((l|0)>=1)for(;w=D<<2,x=w+a|0,E=h[x+4>>2],H=g+w|0,x=h[x>>2],E=((x^E)>>>1&2139062143)+(E&x)|0,w=h[n+w>>2],h[H>>2]=(E&-16711936)+(w&-16711936)&-16711936|(E&16711935)+(w&16711935)&16711935,D=D+1|0,(D|0)!=(l|0););}function kr(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;if((l|0)>=1)for(w=h[g+-4>>2];x=D<<2,E=h[x+a>>2],w=((E^w)>>>1&2139062143)+(w&E)|0,E=g+x|0,x=h[n+x>>2],w=(w&-16711936)+(x&-16711936)&-16711936|(w&16711935)+(x&16711935)&16711935,h[E>>2]=w,D=D+1|0,(D|0)!=(l|0););}function _t(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0,H=0,V=0;if((g|0)>=1)for(;x=E<<1,w=x+l|0,V=w,x=ci[n+x>>1]-ci[a+x>>1]|0,w=x+ci[w>>1]|0,w=(w|0)<1023?w:1023,xr[V>>1]=(w|0)>0?w:0,w=x>>31,x=w+x^w,w=D+x|0,w>>>0<x>>>0&&(H=H+1|0),D=w,E=E+1|0,(E|0)!=(g|0););return bi=H,D|0}function jt(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0,H=0,V=0,J=0;if(D=255,(g|0)>=1)for(J=(l|0)<1;;){if(E=0,!J)for(;H=P[(E<<2)+n|0],m[w+E|0]=H,D=D&H,E=E+1|0,(E|0)!=(l|0););if(w=w+x|0,n=n+a|0,V=V+1|0,(V|0)==(g|0))break}return(D&255)==255|0}function hr(n,a,l){var g=0,w=0,x=0;e:{if((a|0)==1&n>>>0<0|a>>>0<1){g=n;break e}for(;g=v0(n,a,10,0),w=bi,x=w,w=sn(g,w,10,0),l=l+-1|0,m[l|0]=n-w|48,w=a>>>0>9,n=g,a=x,!!w;);}if(g)for(;l=l+-1|0,n=(g>>>0)/10|0,m[l|0]=g-ie(n,10)|48,a=g>>>0>9,g=n,!!a;);return l}function Ur(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0,H=0,V=0,J=0;if(D=255,(g|0)>=1)for(J=(l|0)<1;;){if(E=0,!J)for(;H=P[n+E|0],m[(E<<2)+w|0]=H,D=D&H,E=E+1|0,(E|0)!=(l|0););if(w=w+x|0,n=n+a|0,V=V+1|0,(V|0)==(g|0))break}return(D|0)!=255|0}function Pr(n,a,l,g,w){var x=0,E=0,D=0;x=Mi-32|0,Mi=x;e:{if(!n|a>>>0<5|(P[n|0]!=47|P[n+4|0]>31)||(Q(x,n,a),($n(x,8)|0)!=47)||(n=$n(x,14),a=$n(x,14),E=$n(x,1),$n(x,3)|h[x+24>>2])||(l&&(h[l>>2]=n+1),g&&(h[g>>2]=a+1),D=1,!w))break e;h[w>>2]=E}return Mi=x+32|0,D}function qr(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;if((l|0)>=1)for(;;){w=P[a+x|0];e:{if((w|0)==255)break e;if(!w){m[n+x|0]=0;break e}E=n+x|0,D=E,g?w=4278190080/(w>>>0)|0:w=ie(w,65793),m[D|0]=ie(w,P[E|0])+8388608>>>24}if(x=x+1|0,(x|0)==(l|0))break}}function Xr(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0;e:{if(n){if((g|0)<=0)break e;for(;m[l+w|0]=P[a+w|0]+P[n+w|0],w=w+1|0,(w|0)!=(g|0););break e}if((g|0)<1)break e;for(n=0;n=P[a+w|0]+n|0,m[l+w|0]=n,w=w+1|0,(w|0)!=(g|0););}}function zi(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;if((l|0)>=1)for(E=a+-4|0,a=0;w=a<<2,x=h[w+n>>2],D=g+w|0,w=h[w+E>>2],h[D>>2]=(x&-16711936)+(w&-16711936)&-16711936|(x&16711935)+(w&16711935)&16711935,a=a+1|0,(l|0)!=(a|0););}function ii(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0,H=0;if((g|0)>=1)for(D=(l|0)<1,H=x<<2;;){if(x=0,!D)for(;h[(x<<2)+w>>2]=P[n+x|0]<<8,x=x+1|0,(x|0)!=(l|0););if(n=n+a|0,w=w+H|0,E=E+1|0,(E|0)==(g|0))break}}function Pn(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0;if((g|0)<(w|0))for(D=(x|0)<1;;){if(E=0,!D)for(;h[l>>2]=h[(h[n>>2]>>>6&1020)+a>>2],l=l+4|0,n=n+4|0,E=E+1|0,(E|0)!=(x|0););if(g=g+1|0,(w|0)==(g|0))break}}function In(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;if((l|0)>=1)for(E=a+4|0,a=0;w=a<<2,x=h[w+n>>2],D=g+w|0,w=h[w+E>>2],h[D>>2]=(x&-16711936)+(w&-16711936)&-16711936|(x&16711935)+(w&16711935)&16711935,a=a+1|0,(l|0)!=(a|0););}function hn(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0;if((g|0)<(w|0))for(D=(x|0)<1;;){if(E=0,!D)for(;m[l|0]=h[(P[n|0]<<2)+a>>2]>>>8,l=l+1|0,n=n+1|0,E=E+1|0,(E|0)!=(x|0););if(g=g+1|0,(w|0)==(g|0))break}}function vn(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0,D=0;if((l|0)>=1)for(;w=x<<2,E=h[w+n>>2],D=g+w|0,w=h[a+w>>2],h[D>>2]=(E&-16711936)+(w&-16711936)&-16711936|(E&16711935)+(w&16711935)&16711935,x=x+1|0,(x|0)!=(l|0););}function Jn(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0;if((l|0)>=1)for(a=h[g+-4>>2];x=w<<2,E=h[x+n>>2],a=(E&-16711936)+(a&-16711936)&-16711936|(E&16711935)+(a&16711935)&16711935,h[g+x>>2]=a,w=w+1|0,(w|0)!=(l|0););}function Gn(){var n=0,a=0;n=Lu(1,0,2376);e:{if(!n||(h[n>>2]=0,h[n+8>>2]=5010,ot[h[2557]](n+124|0),h[n+312>>2]=0,h[n+4>>2]=0,h[2661]))break e;t:{if(a=h[2673],!a||!(ot[a|0](2)|0))break t;return h[2661]=19,n}h[2661]=20}return n}function bn(n,a,l){var g=0,w=0;return g=2,!n|!l||(h[l>>2]=0,h[l+4>>2]=0,h[l+32>>2]=0,h[l+36>>2]=0,h[l+24>>2]=0,h[l+28>>2]=0,w=l+16|0,g=w,h[g>>2]=0,h[g+4>>2]=0,g=l+8|0,h[g>>2]=0,h[g+4>>2]=0,g=Ll(n,a,l,l+4|0,g,l+12|0,w,0)),g}function Vo(n,a,l,g){var w=0,x=0,E=0,D=0,H=0,V=0;return w=l>>>16|0,x=n>>>16|0,V=ie(w,x),E=l&65535,D=n&65535,H=ie(E,D),x=(H>>>16|0)+ie(x,E)|0,w=(x&65535)+ie(w,D)|0,n=(ie(a,l)+V|0)+ie(n,g)+(x>>>16)+(w>>>16)|0,a=H&65535|w<<16,bi=n,a}function mn(n){var a=0;if(a=h[n+12>>2],a>>>0<Oi[n+16>>2]){h[n+12>>2]=a+1,h[n+8>>2]=h[n+8>>2]+8,h[n>>2]=P[a|0]|h[n>>2]<<8;return}if(!h[n+24>>2]){h[n+24>>2]=1,h[n>>2]=h[n>>2]<<8,h[n+8>>2]=h[n+8>>2]+8;return}h[n+8>>2]=0}function Eo(n,a){n=n|0,a=a|0;var l=0;return a=h[a>>2],l=h[a+20>>2],U0(h[n+20>>2],h[n+32>>2],h[n+24>>2],h[n+28>>2],h[n+36>>2],ie(l,h[n+8>>2])+h[a+16>>2]|0,l,h[n+12>>2],h[n+16>>2],h[(h[a>>2]<<2)+11376>>2]),h[n+16>>2]}function uo(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0;if((l|0)>=1)for(;w=h[(g<<2)+n>>2],m[a+g|0]=((ie(w&255,6420)+ie(w>>>16&255,16839)|0)+ie(w>>>8&255,33059)|0)+1081344>>>16,g=g+1|0,(g|0)!=(l|0););}function Cn(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0;w=Mi-16|0,Mi=w;e:{if(!mf(qs(h[n+60>>2],a|0,l|0,g&255,w+8|0)|0)){a=h[w+12>>2],n=h[w+8>>2];break e}h[w+8>>2]=-1,h[w+12>>2]=-1,a=-1,n=-1}return Mi=w+16|0,bi=a,n|0}function Po(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0,D=0;if((g|0)>=1)for(;h[(D<<2)+x>>2]=P[l+E|0]|(P[n+E|0]<<16|P[a+E|0]<<8)|-16777216,E=w+E|0,D=D+1|0,(D|0)!=(g|0););}function ba(n,a,l){n=n|0,a=a|0,l=l|0;var g=0,w=0,x=0,E=0;if((a|0)>=1)for(;x=g<<2,w=h[x+n>>2],E=w>>>8&255,h[l+x>>2]=(w&16711935)+(E<<16|E)&16711935|w&-16711936,g=g+1|0,(g|0)!=(a|0););}function Qn(n){n&&(ot[h[2562]](n+124|0),V0(n),Fn(h[n+2288>>2]),h[n+2288>>2]=0,h[n+2292>>2]=0,h[n+12>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+4>>2]=0,Fn(n))}function zn(n,a,l,g,w){var x=0;if(x=Mi-256|0,Mi=x,!(w&73728|(l|0)<=(g|0))){if(l=l-g|0,g=l>>>0<256,Xo(x,a&255,g?l:256),!g)for(;gf(n,x,256),l=l+-256|0,l>>>0>255;);gf(n,x,l)}Mi=x+256|0}function yo(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((l|0)>=1)for(;m[a+g|0]=((ie(P[n+2|0],16839)+ie(P[n+1|0],33059)|0)+ie(P[n|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(l|0););}function eo(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((l|0)>=1)for(;m[a+g|0]=((ie(P[n|0],16839)+ie(P[n+1|0],33059)|0)+ie(P[n+2|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(l|0););}function wa(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+n|0;a=h[n>>2],m[l+2|0]=a,m[l+3|0]=a>>>24,m[l+1|0]=a>>>8,m[l|0]=a>>>16,l=l+4|0,n=n+4|0,n>>>0<g>>>0;);}function Co(n,a,l,g){var w=0,x=0;w=Mi-1024|0,Mi=w;e:{if(!n){g=Sa(0,a,l,g,0);break e}if((g|0)<=512){g=Sa(n,a,l,g,w);break e}if(x=ia(g,0,2),!x){g=0;break e}g=Sa(n,a,l,g,x),Fn(x)}return Mi=w+1024|0,g}function Ba(){var n=0;n=h[2673],(n|0)!=h[2555]&&(h[2854]=136,h[2853]=137,h[2852]=138,h[2851]=139,h[2850]=140,h[2849]=136,h[2848]=137,h[2847]=138,h[2846]=141,h[2845]=139,h[2844]=142,h[2555]=n)}function Nl(){var n=0;n=h[2673],(n|0)!=h[2553]&&(h[2831]=129,h[2829]=130,h[2838]=131,h[2837]=132,h[2836]=129,h[2835]=130,h[2834]=133,h[2833]=131,h[2832]=132,h[2830]=134,h[2828]=135,h[2553]=n)}function ms(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+n|0;a=h[n>>2],m[l+1|0]=a>>>5&224|a>>>3&31,m[l|0]=a>>>16&248|a>>>13&7,l=l+2|0,n=n+4|0,n>>>0<g>>>0;);}function cl(){var n=0;n=h[2673],(n|0)!=h[2554]&&(h[2820]=122,h[2819]=123,h[2815]=122,h[2813]=123,h[2822]=124,h[2821]=125,h[2818]=126,h[2817]=124,h[2816]=125,h[2814]=127,h[2812]=128,h[2554]=n)}function Io(n){var a=0;return a=P[n+74|0],m[n+74|0]=a+-1|a,a=h[n>>2],a&8?(h[n>>2]=a|32,-1):(h[n+4>>2]=0,h[n+8>>2]=0,a=h[n+44>>2],h[n+28>>2]=a,h[n+20>>2]=a,h[n+16>>2]=a+h[n+48>>2],0)}function Ho(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+n|0;a=h[n>>2],m[l+1|0]=a&240|a>>>28,m[l|0]=a>>>16&240|a>>>12&15,l=l+2|0,n=n+4|0,n>>>0<g>>>0;);}function rc(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0;if((l|0)>=1)for(a=0;w=a<<2,x=h[w+n>>2],h[g+w>>2]=x+-16777216&-16711936|x&16711935,a=a+1|0,(l|0)!=(a|0););}function Ls(n,a){n=n|0,a=a|0,ci[n>>1]&&ot[h[2706]](n,a),ci[n+32>>1]&&ot[h[2706]](n+32|0,a+4|0),ci[n+64>>1]&&ot[h[2706]](n- -64|0,a+128|0),ci[n+96>>1]&&ot[h[2706]](n+96|0,a+132|0)}function co(){var n=0;n=h[2673],(n|0)!=h[2544]&&(h[2663]=21,h[2662]=22,h[2665]=23,h[2670]=24,h[2664]=25,h[2666]=26,h[2667]=27,h[2668]=28,h[2669]=29,h[2671]=30,h[2672]=31,h[2544]=n)}function Ts(n,a){n=n|0,a=a|0;var l=0,g=0;return l=h[a>>2],g=h[a+4>>2],l=((l^g)>>>1&2139062143)+(l&g)|0,a=h[a+-4>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,((l^n)>>>1&2139062143)+(n&l)|0}function Rl(n){n=n|0;var a=0,l=0,g=0;return h[n+12>>2]<1|h[n+16>>2]<1||(a=h[n+40>>2],l=ot[h[a+44>>2]](n,a)|0,g=h[a+48>>2],g&&ot[g|0](n,a,l)|0,h[a+16>>2]=h[a+16>>2]+l,a=1),a|0}function Ps(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0,E=0;if((g|0)>=1)for(;x=w<<1,E=x+l|0,xr[E>>1]=ci[E>>1]+(ci[n+x>>1]-ci[a+x>>1]|0),w=w+1|0,(w|0)!=(g|0););}function Ms(n){var a=0,l=0;a=h[3008],l=n+3&-4,n=a+l|0;e:{if(n>>>0<=a>>>0&&(l|0)>=1||n>>>0>y1()<<16>>>0&&!(Gu(n|0)|0))break e;return h[3008]=n,a}return h[2865]=48,-1}function Iu(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+n|0;a=h[n>>2],m[l|0]=a,m[l+2|0]=a>>>16,m[l+1|0]=a>>>8,l=l+3|0,n=n+4|0,n>>>0<g>>>0;);}function j0(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+n|0;a=h[n>>2],m[l+2|0]=a,m[l+1|0]=a>>>8,m[l|0]=a>>>16,l=l+3|0,n=n+4|0,n>>>0<g>>>0;);}function U0(n,a,l,g,w,x,E,D,H,V){var J=0,se=0;if((H|0)>=1)for(;ot[V|0](n,l,g,x,D),se=J&1,l=se?l+w|0:l,g=se?g+w|0:g,x=x+E|0,n=n+a|0,J=J+1|0,(J|0)!=(H|0););}function _0(n,a){var l=0,g=0,w=0;l=0;e:{if(!n||(g=sn(n,0,a,0),w=bi,l=g,(n|a)>>>0<65536))break e;l=w?-1:g}return a=l,n=il(a),!n|!(P[n+-4|0]&3)||Xo(n,0,a),n}function q0(n,a){n=n|0,a=a|0;var l=0,g=0,w=0;e:{if((a|0)<=0)break e;for(;;){if(P[n+l|0]==255){if(l=l+4|0,g=(a|0)<2,a=a+-1|0,!g)continue;break e}break}w=1}return w|0}function Qc(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0;var w=0,x=0;if(w=n?P[n|0]:w,(g|0)>=1)for(;w=P[a+x|0]+w|0,m[l+x|0]=w,x=x+1|0,(x|0)!=(g|0););}function ic(n){var a=0;e:{if(h[n+64>>2]>=h[n+56>>2])break e;for(;;){if(h[n+24>>2]>0)break e;if(a=a+1|0,j(n),!(h[n+64>>2]<h[n+56>>2]))break}}return a}function zc(n,a){var l=0,g=0,w=0,x=0;l=4;e:{for(;;){if(g=P[n|0],w=P[a|0],(g|0)==(w|0)){if(a=a+1|0,n=n+1|0,l=l+-1|0,l)continue;break e}break}x=g-w|0}return x}function e0(){var n=0;n=h[2673],(n|0)!=h[2556]&&(h[2861]=143,h[2860]=144,h[2857]=145,h[2858]=146,h[2859]=147,h[2862]=148,h[2863]=149,h[2864]=150,h[2556]=n)}function hf(n){var a=0,l=0,g=0;if(fh(m[h[n>>2]]))for(;a=h[n>>2],g=m[a|0],h[n>>2]=a+1,l=(ie(l,10)+g|0)+-48|0,!!fh(m[a+1|0]););return l}function ia(n,a,l){var g=0,w=0,x=0;e:{if(n|a&&(w=v0(2147418112,0,n,a),g=bi,sn(l,0,n,a),!g&w>>>0<l>>>0|g>>>0<0|bi>>>0>0))break e;x=il(ie(n,l))}return x}function Ol(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0;var x=0;x=n,n=a<<2,x=x+n|0,ei(x,a,1,16,l,g,w),x=n+x|0,ei(x,a,1,16,l,g,w),ei(n+x|0,a,1,16,l,g,w)}function Nc(){var n=0;n=h[2673],(n|0)!=h[2550]&&(h[2731]=75,h[2730]=76,h[2729]=77,h[2728]=0,h[2727]=78,h[2726]=79,h[2725]=80,h[2724]=0,h[2550]=n)}function Lu(n,a,l){var g=0,w=0,x=0;e:{if(n|a&&(w=v0(2147418112,0,n,a),g=bi,sn(l,0,n,a),!g&w>>>0<l>>>0|g>>>0<0|bi>>>0>0))break e;x=_0(n,l)}return x}function V0(n){var a=0;Fn(h[n+2360>>2]),h[n+2360>>2]=0,h[n+2364>>2]=0,a=h[n+2344>>2],a&&(Bh(h[a+20>>2]),h[a+20>>2]=0,Fn(a)),h[n+2344>>2]=0}function df(n,a,l){n=n|0,a=a|0,l=l|0;var g=0;if((l|0)>=1)for(;m[a+g|0]=h[(g<<2)+n>>2]>>>8,g=g+1|0,(g|0)!=(l|0););}function Ta(n,a,l,g){if(n|a)for(;l=l+-1|0,m[l|0]=P[(n&15)+10128|0]|g,n=(a&15)<<28|n>>>4,a=a>>>4|0,!!(n|a););return l}function Qo(n,a,l,g,w,x,E){var D=0;if((x|0)>=1)for(;ot[h[2663]](n,l,w,E),l=l+g|0,n=n+a|0,D=D+1|0,(D|0)!=(x|0););}function H0(n,a){n=n|0,a=a|0;for(var l=0;;){if((a|0)<1)return 0;if(a=a+-1|0,l=P[n|0],n=n+1|0,(l|0)!=255)break}return 1}function me(n,a){n=n|0,a=a|0;var l=0;return l=h[a+4>>2],n=((l^n)>>>1&2139062143)+(n&l)|0,a=h[a>>2],((n^a)>>>1&2139062143)+(n&a)|0}function Le(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0;var E=0;E=n,n=l<<2,ei(E+n|0,l,1,8,g,w,x),ei(n+a|0,l,1,8,g,w,x)}function Ye(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,ei(n+4|0,1,a,16,l,g,w),ei(n+8|0,1,a,16,l,g,w),ei(n+12|0,1,a,16,l,g,w)}function At(n,a,l,g,w,x){var E=0;if((x|0)>=1)for(;l=_n(l,n,w)+g|0,n=n+a|0,E=(x|0)>1,x=x+-1|0,!!E;);}function sr(n,a,l){if(n|a)for(;l=l+-1|0,m[l|0]=n&7|48,n=(a&7)<<29|n>>>3,a=a>>>3|0,!!(n|a););return l}function cr(n,a,l,g,w,x,E,D,H,V){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,D=D|0,H=H|0,V=V|0,ot[n|0](a,l,g,w,x,E,D,H,V)}function tr(n,a,l,g){var w=0;if((g|0)>=1)for(;ot[h[2662]](n,l,0),n=n+a|0,w=w+1|0,(w|0)!=(g|0););}function Cr(){var n=0;n=h[2673],(n|0)!=h[2552]&&(h[2809]=118,h[2808]=119,h[2807]=120,h[2806]=121,h[2552]=n)}function Ir(n,a){var l=0;return l=1<<a,l=Lu(l,l>>31,4),h[n>>2]=l,l?(h[n+8>>2]=a,h[n+4>>2]=32-a,1):0}function Zr(n,a){var l=0;return l=1,h[n+148>>2]>=1&&(l=ot[h[2559]](n+124|0)|0),n=h[a+52>>2],n&&ot[n|0](a),l}function ni(n){n=n|0;var a=0;a=h[n+8>>2],a&&(a=ot[a|0](h[n+12>>2],h[n+16>>2])|0,h[n+20>>2]=h[n+20>>2]|!a)}function Ri(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,ei(n+4|0,1,l,8,g,w,x),ei(a+4|0,1,l,8,g,w,x)}function oi(n,a){var l=0;return l=h[n+24>>2],n=h[n+32>>2],n=((l+n|0)+-1|0)/(n|0)|0,(n|0)>(a|0)?a:n}function Si(n,a,l,g,w,x,E){return n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,ot[n|0](a,l,g,w,x,E)|0}function Zi(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,ua(n,1,l,8,g,w,x),ua(a,1,l,8,g,w,x)}function Wn(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,ua(n,l,1,8,g,w,x),ua(a,l,1,8,g,w,x)}function to(n){n=n|0,h[n>>2]=0,h[n+4>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0}function fo(n,a,l,g,w){return n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,n=ot[n|0](a,l,g,w)|0,Kl(bi|0),n|0}function Lo(n,a){var l=0;return!a|h[n+12>>2]<2|h[n>>2]+-7>>>0>3||(l=h[a+8>>2]!=0),l}function ga(n,a){return n=n|0,a=a|0,n=h[a>>2],a=h[a+-4>>2],((n^a)>>>1&2139062143)+(n&a)|0}function xa(n,a,l,g,w,x,E){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,E=E|0,ot[n|0](a,l,g,w,x,E)}function Mo(n,a){var l=0,g=0;return l=a&31,g=(-1>>>l&n)<<l,l=n,n=0-a&31,g|(l&-1<<n)>>>n}function Ln(n,a){return n=n|0,a=a|0,n=h[a+4>>2],a=h[a>>2],((n^a)>>>1&2139062143)+(n&a)|0}function ai(n,a){return n=n|0,a=a|0,a=h[a+-4>>2],((a^n)>>>1&2139062143)+(n&a)|0}function Yi(n,a,l,g,w,x){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,x=x|0,ot[n|0](a,l,g,w,x)}function Mn(n){e:{if(h[n+76>>2]<=-1){n=Ze(1024,26,n);break e}n=Ze(1024,26,n)}}function qn(n,a){n=n|0,a=a|0,ot[h[2703]](n,a,1),ot[h[2703]](n- -64|0,a+128|0,1)}function ja(n,a){return n=n|0,a=a|0,a=h[a>>2],((a^n)>>>1&2139062143)+(n&a)|0}function No(n,a,l){return h[n>>2]||(h[n+8>>2]=l,h[n>>2]=a,h[n+4>>2]=0),0}function ro(n,a,l){var g=0;g=Mi-16|0,Mi=g,h[g+12>>2]=l,Eu(n,a,l),Mi=g+16|0}function ko(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,ua(n,1,a,16,l,g,w)}function Fo(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,ua(n,a,1,16,l,g,w)}function $o(n){return n=n|0,h[n+20>>2]=0,h[n+4>>2]||(h[n+4>>2]=1),1}function fl(n,a){h[a+40>>2]=n,h[a+52>>2]=3,h[a+48>>2]=4,h[a+44>>2]=5}function t0(n,a){if(!h[n>>2]){ot[h[2806]](n,a);return}ot[h[2807]](n,a)}function Fl(n,a,l,g,w){n=n|0,a=a|0,l=l|0,g=g|0,w=w|0,ot[n|0](a,l,g,w)}function $0(n,a,l){n=n|0,a=a|0,l=l|0,Pl(n,a),l&&Pl(n+32|0,a+4|0)}function Yo(n,a,l,g){return n=n|0,a=a|0,l=l|0,g=g|0,ot[n|0](a,l,g)|0}function hl(n){n&&(h[n+12>>2]<=0&&Fn(h[n+80>>2]),h[n+80>>2]=0)}function r0(n){n=n|0,n=h[n+40>>2],Fn(h[n+40>>2]),h[n+40>>2]=0}function i0(n,a,l,g){n=n|0,a=a|0,l=l|0,g=g|0,ot[n|0](a,l,g)}function nc(n,a,l){return n=n|0,a=a|0,l=l|0,ot[n|0](a,l)|0}function n0(n){return n?31-wn(n+-1^n)|0:32}function pf(n,a){_n(h[a>>2],h[n>>2],4<<h[a+8>>2])}function Ua(n,a){return a=kn(n,a),kn(n,1)?0-a|0:a}function mf(n){return n?(h[2865]=n,-1):0}function qd(n,a,l){n=n|0,a=a|0,l=l|0,ot[n|0](a,l)}function Vd(n,a){return n=n|0,a=a|0,ot[n|0](a)|0}function c1(n,a){return a=a|0,h[a+-4>>2]}function f1(n,a){return n?Mc(n,a):0}function gf(n,a,l){P[n|0]&32||Ze(a,l,n)}function ch(n){return n=n|0,n=Mi-n&-16,Mi=n,n|0}function am(n,a){return a=a|0,h[a+4>>2]}function Hd(n,a){return-16777216}function v0(n,a,l,g){return n=sl(n,a,l,g),n}function sn(n,a,l,g){return n=Vo(n,a,l,g),n}function Ff(n){n&&(Fn(h[n>>2]),h[n>>2]=0)}function $d(n,a){return a=a|0,h[a>>2]}function h1(n){return n=n|0,Ac(h[n+60>>2])|0}function d1(n){return n=n|0,!h[n+20>>2]|0}function sm(n,a){return n=n|0,n|0}function lm(n,a){n=n|0,a=a|0,ot[n|0](a)}function um(n){return n=n|0,dm(n|0)|0}function fh(n){return n+-48>>>0<10}function Bh(n){n&&(Qa(n),Fn(n))}function b0(n){n&&Xo(n,0,108)}function cm(n){n=n|0,h[n+4>>2]=0}function Gd(n){n&&Xo(n,0,84)}function G0(n){n&&Fn(n)}function p1(n,a){return bi=n,a}function fm(){return 11460}function hm(n){n=n|0,Mi=n}function m1(){return Mi|0}function g1(){}ot[1]=yi,ot[2]=Jl,ot[3]=r0,ot[4]=Tl,ot[5]=Rl,ot[6]=Eo,ot[7]=Xu,ot[8]=Dc,ot[9]=ll,ot[10]=Oa,ot[11]=ae,ot[12]=Ju,ot[13]=Ii,ot[14]=Su,ot[15]=ut,ot[16]=ca,ot[17]=Ws,ot[18]=jo,ot[19]=Ql,ot[20]=Ec,ot[21]=qr,ot[22]=W,ot[23]=T,ot[24]=Po,ot[25]=lo,ot[26]=Ur,ot[27]=ii,ot[28]=jt,ot[29]=df,ot[30]=H0,ot[31]=q0,ot[32]=$0,ot[33]=eu,ot[34]=Yn,ot[35]=Hs,ot[36]=qn,ot[37]=Ls,ot[38]=Fo,ot[39]=Ol,ot[40]=ko,ot[41]=Wn,ot[42]=Le,ot[43]=L,ot[44]=ve,ot[45]=Ja,ot[46]=is,ot[47]=Ye,ot[48]=Zi,ot[49]=Ri,ot[50]=es,ot[51]=rn,ot[52]=au,ot[53]=Tc,ot[54]=p,ot[55]=tc,ot[56]=B0,ot[57]=Ic,ot[58]=ff,ot[59]=nu,ot[60]=ne,ot[61]=ar,ot[62]=Ar,ot[63]=Vs,ot[64]=Ve,ot[65]=Xc,ot[66]=Hr,ot[67]=hs,ot[68]=tu,ot[69]=ru,ot[70]=ol,ot[71]=Ml,ot[72]=y0,ot[73]=As,ot[74]=Ea,ot[75]=ke,ot[76]=Xr,ot[77]=Qc,ot[78]=Zs,ot[79]=B,ot[80]=Cu,ot[81]=Hd,ot[82]=Ee,ot[83]=De,ot[84]=ec,ot[85]=Ts,ot[86]=Ln,ot[87]=ga,ot[88]=ja,ot[89]=ai,ot[90]=me,ot[91]=c1,ot[92]=am,ot[93]=$d,ot[94]=sm,ot[95]=rc,ot[96]=Kc,ot[97]=Gs,ot[98]=La,ot[99]=k,ot[100]=br,ot[101]=Ct,ot[102]=kr,ot[103]=Tt,ot[104]=Se,ot[105]=zi,ot[106]=In,ot[107]=vn,ot[108]=Jn,ot[109]=ba,ot[110]=Dt,ot[111]=wa,ot[112]=j0,ot[113]=Iu,ot[114]=Ho,ot[115]=ms,ot[116]=Pn,ot[117]=hn,ot[118]=Yc,ot[119]=Ku,ot[120]=Dl,ot[121]=fa,ot[122]=xn,ot[123]=fi,ot[124]=nn,ot[125]=Di,ot[126]=Wi,ot[127]=Oo,ot[128]=xo,ot[129]=Lc,ot[130]=qo,ot[131]=ou,ot[132]=g0,ot[133]=So,ot[134]=Fa,ot[135]=Pc,ot[136]=$s,ot[137]=fs,ot[138]=Es,ot[139]=Ss,ot[140]=ma,ot[141]=Na,ot[142]=ps,ot[143]=O0,ot[144]=uo,ot[145]=eo,ot[146]=yo,ot[147]=K,ot[148]=_t,ot[149]=Ps,ot[150]=z,ot[151]=to,ot[152]=$o,ot[153]=d1,ot[154]=ni,ot[155]=ni,ot[156]=cm,ot[157]=h1,ot[158]=ns,ot[159]=Cn;function y1(){return Yr.byteLength/65536|0}function dm(n){n=n|0;var a=y1()|0,l=a+n|0;if(a<l&&l<65536){var g=new ArrayBuffer(ie(l,65536)),w=new _r.Int8Array(g);w.set(m),m=w,m=new _r.Int8Array(g),xr=new _r.Int16Array(g),h=new _r.Int32Array(g),P=new _r.Uint8Array(g),ci=new _r.Uint16Array(g),Oi=new _r.Uint32Array(g),new _r.Float32Array(g),wo=new _r.Float64Array(g),Yr=g,wi.buffer=g}return a}return{__wasm_call_ctors:g1,WebpToSDL:m0,memset:Xo,memcpy:_n,malloc:il,free:Fn,__errno_location:fm,stackSave:m1,stackRestore:hm,stackAlloc:ch,dynCall_vii:qd,dynCall_vi:lm,dynCall_ii:Vd,dynCall_iii:nc,dynCall_iiii:Yo,dynCall_iiiiiii:Si,dynCall_viiii:Fl,dynCall_viii:i0,dynCall_viiiiii:xa,dynCall_viiiii:Yi,dynCall_viiiiiiiii:cr,dynCall_jiiii:fo,dynCall_jiji:fo,__growWasmMemory:um}}for(var Ot=new Uint8Array(tt.buffer),wr=new Uint8Array(123),pr=25;pr>=0;--pr)wr[48+pr]=52+pr,wr[65+pr]=pr,wr[97+pr]=26+pr;wr[43]=62,wr[47]=63;function vr(_r,Mr,Yr){for(var wi,ot,m=0,xr=Mr,h=Yr.length,P=Mr+(h*3>>2)-(Yr[h-2]=="=")-(Yr[h-1]=="=");m<h;m+=4)wi=wr[Yr.charCodeAt(m+1)],ot=wr[Yr.charCodeAt(m+2)],_r[xr++]=wr[Yr.charCodeAt(m)]<<2|wi>>4,xr<P&&(_r[xr++]=wi<<4|ot>>2),xr<P&&(_r[xr++]=ot<<6|wr[Yr.charCodeAt(m+3)])}return vr(Ot,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),vr(Ot,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),vr(Ot,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),vr(Ot,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),vr(Ot,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),vr(Ot,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),vr(Ot,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),vr(Ot,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),vr(Ot,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),vr(Ot,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),vr(Ot,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),vr(Ot,9803,"DA=="),vr(Ot,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),vr(Ot,9861,"Dg=="),vr(Ot,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),vr(Ot,9919,"EA=="),vr(Ot,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),vr(Ot,9986,"EgAAABISEgAAAAAAAAk="),vr(Ot,10035,"Cw=="),vr(Ot,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),vr(Ot,10093,"DA=="),vr(Ot,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),vr(Ot,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),vr(Ot,10428,"8Cw="),vr(Ot,10488,"BQ=="),vr(Ot,10500,"nQ=="),vr(Ot,10524,"ngAAAJ8AAAAQLQ=="),vr(Ot,10548,"Ag=="),vr(Ot,10563,"//////8="),Bt({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},Pe,tt.buffer)}(Os,te,_e)},instantiate:function(F,X){return{then:function(ce){var Pe=new ee.Module(F);ce({instance:new ee.Instance(Pe)})}}},RuntimeError:Error};Z=[],typeof ee!="object"&&Ni("no native wasm support detected");var te,_e=new ee.Table({initial:160,maximum:160,element:"anyfunc"}),le=!1;function we(F,X){F||Ni("Assertion failed: "+X)}function ue(F){var X=t["_"+F];return we(X,"Cannot call unknown function "+F+", make sure it is exported"),X}function ze(F,X,ce,Pe,tt){var bt={string:function(Yr){var wi=0;if(Yr!=null&&Yr!==0){var ot=(Yr.length<<2)+1;wi=Zl(ot),xt(Yr,wi,ot)}return wi},array:function(Yr){var wi=Zl(Yr.length);return $e(Yr,wi),wi}};function Bt(Yr){return X==="string"?qe(Yr):X==="boolean"?!!Yr:Yr}var Ot=ue(F),wr=[],pr=0;if(Pe)for(var vr=0;vr<Pe.length;vr++){var _r=bt[ce[vr]];_r?(pr===0&&(pr=wc()),wr[vr]=_r(Pe[vr])):wr[vr]=Pe[vr]}var Mr=Ot.apply(null,wr);return Mr=Bt(Mr),pr!==0&&xc(pr),Mr}function Ue(F,X,ce,Pe){ce=ce||[];var tt=ce.every(function(Bt){return Bt==="number"}),bt=X!=="string";return bt&&tt&&!Pe?ue(F):function(){return ze(F,X,ce,arguments)}}var Ce=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Me(F,X,ce){for(var Pe=X+ce,tt=X;F[tt]&&!(tt>=Pe);)++tt;if(tt-X>16&&F.subarray&&Ce)return Ce.decode(F.subarray(X,tt));for(var bt="";X<tt;){var Bt=F[X++];if(!(Bt&128)){bt+=String.fromCharCode(Bt);continue}var Ot=F[X++]&63;if((Bt&224)==192){bt+=String.fromCharCode((Bt&31)<<6|Ot);continue}var wr=F[X++]&63;if((Bt&240)==224?Bt=(Bt&15)<<12|Ot<<6|wr:Bt=(Bt&7)<<18|Ot<<12|wr<<6|F[X++]&63,Bt<65536)bt+=String.fromCharCode(Bt);else{var pr=Bt-65536;bt+=String.fromCharCode(55296|pr>>10,56320|pr&1023)}}return bt}function qe(F,X){return F?Me(be,F,X):""}function it(F,X,ce,Pe){if(!(Pe>0))return 0;for(var tt=ce,bt=ce+Pe-1,Bt=0;Bt<F.length;++Bt){var Ot=F.charCodeAt(Bt);if(Ot>=55296&&Ot<=57343){var wr=F.charCodeAt(++Bt);Ot=65536+((Ot&1023)<<10)|wr&1023}if(Ot<=127){if(ce>=bt)break;X[ce++]=Ot}else if(Ot<=2047){if(ce+1>=bt)break;X[ce++]=192|Ot>>6,X[ce++]=128|Ot&63}else if(Ot<=65535){if(ce+2>=bt)break;X[ce++]=224|Ot>>12,X[ce++]=128|Ot>>6&63,X[ce++]=128|Ot&63}else{if(ce+3>=bt)break;X[ce++]=240|Ot>>18,X[ce++]=128|Ot>>12&63,X[ce++]=128|Ot>>6&63,X[ce++]=128|Ot&63}}return X[ce]=0,ce-tt}function xt(F,X,ce){return it(F,be,X,ce)}function yt(F){for(var X=0,ce=0;ce<F.length;++ce){var Pe=F.charCodeAt(ce);Pe>=55296&&Pe<=57343&&(Pe=65536+((Pe&1023)<<10)|F.charCodeAt(++ce)&1023),Pe<=127?++X:Pe<=2047?X+=2:Pe<=65535?X+=3:X+=4}return X}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function $e(F,X){wt.set(F,X)}var at=65536;function mt(F,X){return F%X>0&&(F+=X-F%X),F}var Xe,wt,be,Be,Ae,ht,Nt;function zt(F){Xe=F,t.HEAP8=wt=new Int8Array(F),t.HEAP16=Be=new Int16Array(F),t.HEAP32=Ae=new Int32Array(F),t.HEAPU8=be=new Uint8Array(F),t.HEAPU16=new Uint16Array(F),t.HEAPU32=ht=new Uint32Array(F),t.HEAPF32=Nt=new Float32Array(F),t.HEAPF64=new Float64Array(F)}var Mt=5255072,Kt=12032,yr=t.INITIAL_MEMORY||67108864;t.wasmMemory?te=t.wasmMemory:te=new ee.Memory({initial:yr/at,maximum:2147483648/at}),te&&(Xe=te.buffer),yr=Xe.byteLength,zt(Xe),Ae[Kt>>2]=Mt;function Er(F){for(;F.length>0;){var X=F.shift();if(typeof X=="function"){X(t);continue}var ce=X.func;typeof ce=="number"?X.arg===void 0?t.dynCall_v(ce):t.dynCall_vi(ce,X.arg):ce(X.arg===void 0?null:X.arg)}}var Jt=[],It=[],Fr=[],Ft=[];function ct(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)zr(t.preRun.shift());Er(Jt)}function mr(){!t.noFSInit&&!pe.init.initialized&&pe.init(),Er(It)}function Jr(){pe.ignorePermissions=!1,Er(Fr)}function dr(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)ri(t.postRun.shift());Er(Ft)}function zr(F){Jt.unshift(F)}function ri(F){Ft.unshift(F)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(X,ce){var Pe=X>>>16,tt=X&65535,bt=ce>>>16,Bt=ce&65535;return tt*Bt+(Pe*Bt+tt*bt<<16)|0}),!Math.fround){var Vr=new Float32Array(1);Math.fround=function(F){return Vr[0]=F,Vr[0]}}Math.clz32||(Math.clz32=function(F){var X=32,ce=F>>16;return ce&&(X-=16,F=ce),ce=F>>8,ce&&(X-=8,F=ce),ce=F>>4,ce&&(X-=4,F=ce),ce=F>>2,ce&&(X-=2,F=ce),ce=F>>1,ce?X-2:X-F}),Math.trunc||(Math.trunc=function(F){return F<0?Math.ceil(F):Math.floor(F)});var _i=Math.abs,Hi=Math.ceil,Nr=Math.floor,ji=Math.min,Ui=0,an=null;function Gi(F){return F}function Or(F){Ui++,t.monitorRunDependencies&&t.monitorRunDependencies(Ui)}function Br(F){if(Ui--,t.monitorRunDependencies&&t.monitorRunDependencies(Ui),Ui==0&&an){var X=an;an=null,X()}}t.preloadedImages={},t.preloadedAudios={};function Ni(F){t.onAbort&&t.onAbort(F),F+="",A(F),le=!0,F="abort("+F+"). Build with -s ASSERTIONS=1 for more info.";var X=new ee.RuntimeError(F);throw X}function qi(F,X){return String.prototype.startsWith?F.startsWith(X):F.indexOf(X)===0}var kt="data:application/octet-stream;base64,";function fr(F){return qi(F,kt)}var Qr="webp.wasm";fr(Qr)||(Qr=c(Qr));function Ei(){try{if(Z)return new Uint8Array(Z);var F=Qs(Qr);if(F)return F;if(!y)throw"both async and sync fetching of the wasm failed"}catch(X){Ni(X)}}function ki(){return!Z&&o&&typeof fetch=="function"?fetch(Qr,{credentials:"same-origin"}).then(function(F){if(!F.ok)throw"failed to load wasm binary file at '"+Qr+"'";return F.arrayBuffer()}).catch(function(){return Ei()}):e.resolve().then(Ei)}function Zn(){var F={env:Os,wasi_snapshot_preview1:Os};function X(Bt,Ot){var wr=Bt.exports;t.asm=wr,Br()}Or();function ce(Bt){X(Bt.instance)}function Pe(Bt){return ki().then(function(Ot){return ee.instantiate(Ot,F)}).then(Bt,function(Ot){A("failed to asynchronously prepare wasm: "+Ot),Ni(Ot)})}function tt(){if(!Z&&typeof ee.instantiateStreaming=="function"&&!fr(Qr)&&typeof fetch=="function")fetch(Qr,{credentials:"same-origin"}).then(function(Bt){var Ot=ee.instantiateStreaming(Bt,F);return Ot.then(ce,function(wr){return A("wasm streaming compile failed: "+wr),A("falling back to ArrayBuffer instantiation"),Pe(ce)})});else return Pe(ce)}if(t.instantiateWasm)try{var bt=t.instantiateWasm(F,X);return bt}catch(Bt){return A("Module.instantiateWasm callback failed with error: "+Bt),!1}return tt(),{}}var un,Rn;It.push({func:function(){bc()}});function Xn(F){return F}function so(F){var X=/\b_Z[\w\d_]+/g;return F.replace(X,function(ce){var Pe=ce;return ce===Pe?ce:Pe+" ["+ce+"]"})}function on(){var F=new Error;if(!F.stack){try{throw new Error}catch(X){F=X}if(!F.stack)return"(no stack trace available)"}return F.stack.toString()}function gt(){var F=on();return t.extraStackTrace&&(F+=`
`+t.extraStackTrace()),so(F)}function Ne(F){return Ae[$u()>>2]=F,F}var Fe={splitPath:function(F){var X=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return X.exec(F).slice(1)},normalizeArray:function(F,X){for(var ce=0,Pe=F.length-1;Pe>=0;Pe--){var tt=F[Pe];tt==="."?F.splice(Pe,1):tt===".."?(F.splice(Pe,1),ce++):ce&&(F.splice(Pe,1),ce--)}if(X)for(;ce;ce--)F.unshift("..");return F},normalize:function(F){var X=F.charAt(0)==="/",ce=F.substr(-1)==="/";return F=Fe.normalizeArray(F.split("/").filter(function(Pe){return!!Pe}),!X).join("/"),!F&&!X&&(F="."),F&&ce&&(F+="/"),(X?"/":"")+F},dirname:function(F){var X=Fe.splitPath(F),ce=X[0],Pe=X[1];return!ce&&!Pe?".":(Pe&&(Pe=Pe.substr(0,Pe.length-1)),ce+Pe)},basename:function(F){if(F==="/")return"/";F=Fe.normalize(F),F=F.replace(/\/$/,"");var X=F.lastIndexOf("/");return X===-1?F:F.substr(X+1)},extname:function(F){return Fe.splitPath(F)[3]},join:function(){var F=Array.prototype.slice.call(arguments,0);return Fe.normalize(F.join("/"))},join2:function(F,X){return Fe.normalize(F+"/"+X)}},lt={resolve:function(){for(var F="",X=!1,ce=arguments.length-1;ce>=-1&&!X;ce--){var Pe=ce>=0?arguments[ce]:pe.cwd();if(typeof Pe!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!Pe)return"";F=Pe+"/"+F,X=Pe.charAt(0)==="/"}return F=Fe.normalizeArray(F.split("/").filter(function(tt){return!!tt}),!X).join("/"),(X?"/":"")+F||"."},relative:function(F,X){F=lt.resolve(F).substr(1),X=lt.resolve(X).substr(1);function ce(pr){for(var vr=0;vr<pr.length&&pr[vr]==="";vr++);for(var _r=pr.length-1;_r>=0&&pr[_r]==="";_r--);return vr>_r?[]:pr.slice(vr,_r-vr+1)}for(var Pe=ce(F.split("/")),tt=ce(X.split("/")),bt=Math.min(Pe.length,tt.length),Bt=bt,Ot=0;Ot<bt;Ot++)if(Pe[Ot]!==tt[Ot]){Bt=Ot;break}for(var wr=[],Ot=Bt;Ot<Pe.length;Ot++)wr.push("..");return wr=wr.concat(tt.slice(Bt)),wr.join("/")}},Lt={ttys:[],init:function(){},shutdown:function(){},register:function(F,X){Lt.ttys[F]={input:[],output:[],ops:X},pe.registerDevice(F,Lt.stream_ops)},stream_ops:{open:function(F){var X=Lt.ttys[F.node.rdev];if(!X)throw new pe.ErrnoError(43);F.tty=X,F.seekable=!1},close:function(F){F.tty.ops.flush(F.tty)},flush:function(F){F.tty.ops.flush(F.tty)},read:function(F,X,ce,Pe,tt){if(!F.tty||!F.tty.ops.get_char)throw new pe.ErrnoError(60);for(var bt=0,Bt=0;Bt<Pe;Bt++){var Ot;try{Ot=F.tty.ops.get_char(F.tty)}catch{throw new pe.ErrnoError(29)}if(Ot===void 0&&bt===0)throw new pe.ErrnoError(6);if(Ot==null)break;bt++,X[ce+Bt]=Ot}return bt&&(F.node.timestamp=Date.now()),bt},write:function(F,X,ce,Pe,tt){if(!F.tty||!F.tty.ops.put_char)throw new pe.ErrnoError(60);try{for(var bt=0;bt<Pe;bt++)F.tty.ops.put_char(F.tty,X[ce+bt])}catch{throw new pe.ErrnoError(29)}return Pe&&(F.node.timestamp=Date.now()),bt}},default_tty_ops:{get_char:function(F){if(!F.input.length){var X=null;if(typeof window<"u"&&typeof window.prompt=="function"?(X=window.prompt("Input: "),X!==null&&(X+=`
`)):typeof readline=="function"&&(X=readline(),X!==null&&(X+=`
`)),!X)return null;F.input=Kn(X,!0)}return F.input.shift()},put_char:function(F,X){X===null||X===10?(b(Me(F.output,0)),F.output=[]):X!=0&&F.output.push(X)},flush:function(F){F.output&&F.output.length>0&&(b(Me(F.output,0)),F.output=[])}},default_tty1_ops:{put_char:function(F,X){X===null||X===10?(A(Me(F.output,0)),F.output=[]):X!=0&&F.output.push(X)},flush:function(F){F.output&&F.output.length>0&&(A(Me(F.output,0)),F.output=[])}}},ft={ops_table:null,mount:function(F){return ft.createNode(null,"/",16895,0)},createNode:function(F,X,ce,Pe){if(pe.isBlkdev(ce)||pe.isFIFO(ce))throw new pe.ErrnoError(63);ft.ops_table||(ft.ops_table={dir:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr,lookup:ft.node_ops.lookup,mknod:ft.node_ops.mknod,rename:ft.node_ops.rename,unlink:ft.node_ops.unlink,rmdir:ft.node_ops.rmdir,readdir:ft.node_ops.readdir,symlink:ft.node_ops.symlink},stream:{llseek:ft.stream_ops.llseek}},file:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr},stream:{llseek:ft.stream_ops.llseek,read:ft.stream_ops.read,write:ft.stream_ops.write,allocate:ft.stream_ops.allocate,mmap:ft.stream_ops.mmap,msync:ft.stream_ops.msync}},link:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr,readlink:ft.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr},stream:pe.chrdev_stream_ops}});var tt=pe.createNode(F,X,ce,Pe);return pe.isDir(tt.mode)?(tt.node_ops=ft.ops_table.dir.node,tt.stream_ops=ft.ops_table.dir.stream,tt.contents={}):pe.isFile(tt.mode)?(tt.node_ops=ft.ops_table.file.node,tt.stream_ops=ft.ops_table.file.stream,tt.usedBytes=0,tt.contents=null):pe.isLink(tt.mode)?(tt.node_ops=ft.ops_table.link.node,tt.stream_ops=ft.ops_table.link.stream):pe.isChrdev(tt.mode)&&(tt.node_ops=ft.ops_table.chrdev.node,tt.stream_ops=ft.ops_table.chrdev.stream),tt.timestamp=Date.now(),F&&(F.contents[X]=tt),tt},getFileDataAsRegularArray:function(F){if(F.contents&&F.contents.subarray){for(var X=[],ce=0;ce<F.usedBytes;++ce)X.push(F.contents[ce]);return X}return F.contents},getFileDataAsTypedArray:function(F){return F.contents?F.contents.subarray?F.contents.subarray(0,F.usedBytes):new Uint8Array(F.contents):new Uint8Array(0)},expandFileStorage:function(F,X){var ce=F.contents?F.contents.length:0;if(!(ce>=X)){var Pe=1024*1024;X=Math.max(X,ce*(ce<Pe?2:1.125)>>>0),ce!=0&&(X=Math.max(X,256));var tt=F.contents;F.contents=new Uint8Array(X),F.usedBytes>0&&F.contents.set(tt.subarray(0,F.usedBytes),0)}},resizeFileStorage:function(F,X){if(F.usedBytes!=X){if(X==0){F.contents=null,F.usedBytes=0;return}if(!F.contents||F.contents.subarray){var ce=F.contents;F.contents=new Uint8Array(X),ce&&F.contents.set(ce.subarray(0,Math.min(X,F.usedBytes))),F.usedBytes=X;return}if(F.contents||(F.contents=[]),F.contents.length>X)F.contents.length=X;else for(;F.contents.length<X;)F.contents.push(0);F.usedBytes=X}},node_ops:{getattr:function(F){var X={};return X.dev=pe.isChrdev(F.mode)?F.id:1,X.ino=F.id,X.mode=F.mode,X.nlink=1,X.uid=0,X.gid=0,X.rdev=F.rdev,pe.isDir(F.mode)?X.size=4096:pe.isFile(F.mode)?X.size=F.usedBytes:pe.isLink(F.mode)?X.size=F.link.length:X.size=0,X.atime=new Date(F.timestamp),X.mtime=new Date(F.timestamp),X.ctime=new Date(F.timestamp),X.blksize=4096,X.blocks=Math.ceil(X.size/X.blksize),X},setattr:function(F,X){X.mode!==void 0&&(F.mode=X.mode),X.timestamp!==void 0&&(F.timestamp=X.timestamp),X.size!==void 0&&ft.resizeFileStorage(F,X.size)},lookup:function(F,X){throw pe.genericErrors[44]},mknod:function(F,X,ce,Pe){return ft.createNode(F,X,ce,Pe)},rename:function(F,X,ce){if(pe.isDir(F.mode)){var Pe;try{Pe=pe.lookupNode(X,ce)}catch{}if(Pe)for(var tt in Pe.contents)throw new pe.ErrnoError(55)}delete F.parent.contents[F.name],F.name=ce,X.contents[ce]=F,F.parent=X},unlink:function(F,X){delete F.contents[X]},rmdir:function(F,X){var ce=pe.lookupNode(F,X);for(var Pe in ce.contents)throw new pe.ErrnoError(55);delete F.contents[X]},readdir:function(F){var X=[".",".."];for(var ce in F.contents)F.contents.hasOwnProperty(ce)&&X.push(ce);return X},symlink:function(F,X,ce){var Pe=ft.createNode(F,X,41471,0);return Pe.link=ce,Pe},readlink:function(F){if(!pe.isLink(F.mode))throw new pe.ErrnoError(28);return F.link}},stream_ops:{read:function(F,X,ce,Pe,tt){var bt=F.node.contents;if(tt>=F.node.usedBytes)return 0;var Bt=Math.min(F.node.usedBytes-tt,Pe);if(Bt>8&&bt.subarray)X.set(bt.subarray(tt,tt+Bt),ce);else for(var Ot=0;Ot<Bt;Ot++)X[ce+Ot]=bt[tt+Ot];return Bt},write:function(F,X,ce,Pe,tt,bt){if(X.buffer===wt.buffer&&(bt=!1),!Pe)return 0;var Bt=F.node;if(Bt.timestamp=Date.now(),X.subarray&&(!Bt.contents||Bt.contents.subarray)){if(bt)return Bt.contents=X.subarray(ce,ce+Pe),Bt.usedBytes=Pe,Pe;if(Bt.usedBytes===0&&tt===0)return Bt.contents=X.slice(ce,ce+Pe),Bt.usedBytes=Pe,Pe;if(tt+Pe<=Bt.usedBytes)return Bt.contents.set(X.subarray(ce,ce+Pe),tt),Pe}if(ft.expandFileStorage(Bt,tt+Pe),Bt.contents.subarray&&X.subarray)Bt.contents.set(X.subarray(ce,ce+Pe),tt);else for(var Ot=0;Ot<Pe;Ot++)Bt.contents[tt+Ot]=X[ce+Ot];return Bt.usedBytes=Math.max(Bt.usedBytes,tt+Pe),Pe},llseek:function(F,X,ce){var Pe=X;if(ce===1?Pe+=F.position:ce===2&&pe.isFile(F.node.mode)&&(Pe+=F.node.usedBytes),Pe<0)throw new pe.ErrnoError(28);return Pe},allocate:function(F,X,ce){ft.expandFileStorage(F.node,X+ce),F.node.usedBytes=Math.max(F.node.usedBytes,X+ce)},mmap:function(F,X,ce,Pe,tt,bt){if(we(X===0),!pe.isFile(F.node.mode))throw new pe.ErrnoError(43);var Bt,Ot,wr=F.node.contents;if(!(bt&2)&&wr.buffer===Xe)Ot=!1,Bt=wr.byteOffset;else{if((Pe>0||Pe+ce<wr.length)&&(wr.subarray?wr=wr.subarray(Pe,Pe+ce):wr=Array.prototype.slice.call(wr,Pe,Pe+ce)),Ot=!0,Bt=pe.mmapAlloc(ce),!Bt)throw new pe.ErrnoError(48);wt.set(wr,Bt)}return{ptr:Bt,allocated:Ot}},msync:function(F,X,ce,Pe,tt){if(!pe.isFile(F.node.mode))throw new pe.ErrnoError(43);return tt&2||ft.stream_ops.write(F,X,0,Pe,ce,!1),0}}},pe={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(F){if(!(F instanceof pe.ErrnoError))throw F+" : "+gt();return Ne(F.errno)},lookupPath:function(F,X){if(F=lt.resolve(pe.cwd(),F),X=X||{},!F)return{path:"",node:null};var ce={follow_mount:!0,recurse_count:0};for(var Pe in ce)X[Pe]===void 0&&(X[Pe]=ce[Pe]);if(X.recurse_count>8)throw new pe.ErrnoError(32);for(var tt=Fe.normalizeArray(F.split("/").filter(function(Mr){return!!Mr}),!1),bt=pe.root,Bt="/",Ot=0;Ot<tt.length;Ot++){var wr=Ot===tt.length-1;if(wr&&X.parent)break;if(bt=pe.lookupNode(bt,tt[Ot]),Bt=Fe.join2(Bt,tt[Ot]),pe.isMountpoint(bt)&&(!wr||wr&&X.follow_mount)&&(bt=bt.mounted.root),!wr||X.follow)for(var pr=0;pe.isLink(bt.mode);){var vr=pe.readlink(Bt);Bt=lt.resolve(Fe.dirname(Bt),vr);var _r=pe.lookupPath(Bt,{recurse_count:X.recurse_count});if(bt=_r.node,pr++>40)throw new pe.ErrnoError(32)}}return{path:Bt,node:bt}},getPath:function(F){for(var X;;){if(pe.isRoot(F)){var ce=F.mount.mountpoint;return X?ce[ce.length-1]!=="/"?ce+"/"+X:ce+X:ce}X=X?F.name+"/"+X:F.name,F=F.parent}},hashName:function(F,X){for(var ce=0,Pe=0;Pe<X.length;Pe++)ce=(ce<<5)-ce+X.charCodeAt(Pe)|0;return(F+ce>>>0)%pe.nameTable.length},hashAddNode:function(F){var X=pe.hashName(F.parent.id,F.name);F.name_next=pe.nameTable[X],pe.nameTable[X]=F},hashRemoveNode:function(F){var X=pe.hashName(F.parent.id,F.name);if(pe.nameTable[X]===F)pe.nameTable[X]=F.name_next;else for(var ce=pe.nameTable[X];ce;){if(ce.name_next===F){ce.name_next=F.name_next;break}ce=ce.name_next}},lookupNode:function(F,X){var ce=pe.mayLookup(F);if(ce)throw new pe.ErrnoError(ce,F);for(var Pe=pe.hashName(F.id,X),tt=pe.nameTable[Pe];tt;tt=tt.name_next){var bt=tt.name;if(tt.parent.id===F.id&&bt===X)return tt}return pe.lookup(F,X)},createNode:function(F,X,ce,Pe){var tt=new pe.FSNode(F,X,ce,Pe);return pe.hashAddNode(tt),tt},destroyNode:function(F){pe.hashRemoveNode(F)},isRoot:function(F){return F===F.parent},isMountpoint:function(F){return!!F.mounted},isFile:function(F){return(F&61440)===32768},isDir:function(F){return(F&61440)===16384},isLink:function(F){return(F&61440)===40960},isChrdev:function(F){return(F&61440)===8192},isBlkdev:function(F){return(F&61440)===24576},isFIFO:function(F){return(F&61440)===4096},isSocket:function(F){return(F&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(F){var X=pe.flagModes[F];if(typeof X>"u")throw new Error("Unknown file open mode: "+F);return X},flagsToPermissionString:function(F){var X=["r","w","rw"][F&3];return F&512&&(X+="w"),X},nodePermissions:function(F,X){return pe.ignorePermissions?0:X.indexOf("r")!==-1&&!(F.mode&292)||X.indexOf("w")!==-1&&!(F.mode&146)||X.indexOf("x")!==-1&&!(F.mode&73)?2:0},mayLookup:function(F){var X=pe.nodePermissions(F,"x");return X||(F.node_ops.lookup?0:2)},mayCreate:function(F,X){try{var ce=pe.lookupNode(F,X);return 20}catch{}return pe.nodePermissions(F,"wx")},mayDelete:function(F,X,ce){var Pe;try{Pe=pe.lookupNode(F,X)}catch(bt){return bt.errno}var tt=pe.nodePermissions(F,"wx");if(tt)return tt;if(ce){if(!pe.isDir(Pe.mode))return 54;if(pe.isRoot(Pe)||pe.getPath(Pe)===pe.cwd())return 10}else if(pe.isDir(Pe.mode))return 31;return 0},mayOpen:function(F,X){return F?pe.isLink(F.mode)?32:pe.isDir(F.mode)&&(pe.flagsToPermissionString(X)!=="r"||X&512)?31:pe.nodePermissions(F,pe.flagsToPermissionString(X)):44},MAX_OPEN_FDS:4096,nextfd:function(F,X){F=F||0,X=X||pe.MAX_OPEN_FDS;for(var ce=F;ce<=X;ce++)if(!pe.streams[ce])return ce;throw new pe.ErrnoError(33)},getStream:function(F){return pe.streams[F]},createStream:function(F,X,ce){pe.FSStream||(pe.FSStream=function(){},pe.FSStream.prototype={object:{get:function(){return this.node},set:function(Bt){this.node=Bt}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var Pe=new pe.FSStream;for(var tt in F)Pe[tt]=F[tt];F=Pe;var bt=pe.nextfd(X,ce);return F.fd=bt,pe.streams[bt]=F,F},closeStream:function(F){pe.streams[F]=null},chrdev_stream_ops:{open:function(F){var X=pe.getDevice(F.node.rdev);F.stream_ops=X.stream_ops,F.stream_ops.open&&F.stream_ops.open(F)},llseek:function(){throw new pe.ErrnoError(70)}},major:function(F){return F>>8},minor:function(F){return F&255},makedev:function(F,X){return F<<8|X},registerDevice:function(F,X){pe.devices[F]={stream_ops:X}},getDevice:function(F){return pe.devices[F]},getMounts:function(F){for(var X=[],ce=[F];ce.length;){var Pe=ce.pop();X.push(Pe),ce.push.apply(ce,Pe.mounts)}return X},syncfs:function(F,X){typeof F=="function"&&(X=F,F=!1),pe.syncFSRequests++,pe.syncFSRequests>1&&A("warning: "+pe.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ce=pe.getMounts(pe.root.mount),Pe=0;function tt(Bt){return pe.syncFSRequests--,X(Bt)}function bt(Bt){if(Bt)return bt.errored?void 0:(bt.errored=!0,tt(Bt));++Pe>=ce.length&&tt(null)}ce.forEach(function(Bt){if(!Bt.type.syncfs)return bt(null);Bt.type.syncfs(Bt,F,bt)})},mount:function(F,X,ce){var Pe=ce==="/",tt=!ce,bt;if(Pe&&pe.root)throw new pe.ErrnoError(10);if(!Pe&&!tt){var Bt=pe.lookupPath(ce,{follow_mount:!1});if(ce=Bt.path,bt=Bt.node,pe.isMountpoint(bt))throw new pe.ErrnoError(10);if(!pe.isDir(bt.mode))throw new pe.ErrnoError(54)}var Ot={type:F,opts:X,mountpoint:ce,mounts:[]},wr=F.mount(Ot);return wr.mount=Ot,Ot.root=wr,Pe?pe.root=wr:bt&&(bt.mounted=Ot,bt.mount&&bt.mount.mounts.push(Ot)),wr},unmount:function(F){var X=pe.lookupPath(F,{follow_mount:!1});if(!pe.isMountpoint(X.node))throw new pe.ErrnoError(28);var ce=X.node,Pe=ce.mounted,tt=pe.getMounts(Pe);Object.keys(pe.nameTable).forEach(function(Bt){for(var Ot=pe.nameTable[Bt];Ot;){var wr=Ot.name_next;tt.indexOf(Ot.mount)!==-1&&pe.destroyNode(Ot),Ot=wr}}),ce.mounted=null;var bt=ce.mount.mounts.indexOf(Pe);ce.mount.mounts.splice(bt,1)},lookup:function(F,X){return F.node_ops.lookup(F,X)},mknod:function(F,X,ce){var Pe=pe.lookupPath(F,{parent:!0}),tt=Pe.node,bt=Fe.basename(F);if(!bt||bt==="."||bt==="..")throw new pe.ErrnoError(28);var Bt=pe.mayCreate(tt,bt);if(Bt)throw new pe.ErrnoError(Bt);if(!tt.node_ops.mknod)throw new pe.ErrnoError(63);return tt.node_ops.mknod(tt,bt,X,ce)},create:function(F,X){return X=X!==void 0?X:438,X&=4095,X|=32768,pe.mknod(F,X,0)},mkdir:function(F,X){return X=X!==void 0?X:511,X&=1023,X|=16384,pe.mknod(F,X,0)},mkdirTree:function(F,X){for(var ce=F.split("/"),Pe="",tt=0;tt<ce.length;++tt)if(ce[tt]){Pe+="/"+ce[tt];try{pe.mkdir(Pe,X)}catch(bt){if(bt.errno!=20)throw bt}}},mkdev:function(F,X,ce){return typeof ce>"u"&&(ce=X,X=438),X|=8192,pe.mknod(F,X,ce)},symlink:function(F,X){if(!lt.resolve(F))throw new pe.ErrnoError(44);var ce=pe.lookupPath(X,{parent:!0}),Pe=ce.node;if(!Pe)throw new pe.ErrnoError(44);var tt=Fe.basename(X),bt=pe.mayCreate(Pe,tt);if(bt)throw new pe.ErrnoError(bt);if(!Pe.node_ops.symlink)throw new pe.ErrnoError(63);return Pe.node_ops.symlink(Pe,tt,F)},rename:function(F,X){var ce=Fe.dirname(F),Pe=Fe.dirname(X),tt=Fe.basename(F),bt=Fe.basename(X),Bt,Ot,wr;if(Bt=pe.lookupPath(F,{parent:!0}),Ot=Bt.node,Bt=pe.lookupPath(X,{parent:!0}),wr=Bt.node,!Ot||!wr)throw new pe.ErrnoError(44);if(Ot.mount!==wr.mount)throw new pe.ErrnoError(75);var pr=pe.lookupNode(Ot,tt),vr=lt.relative(F,Pe);if(vr.charAt(0)!==".")throw new pe.ErrnoError(28);if(vr=lt.relative(X,ce),vr.charAt(0)!==".")throw new pe.ErrnoError(55);var _r;try{_r=pe.lookupNode(wr,bt)}catch{}if(pr!==_r){var Mr=pe.isDir(pr.mode),Yr=pe.mayDelete(Ot,tt,Mr);if(Yr)throw new pe.ErrnoError(Yr);if(Yr=_r?pe.mayDelete(wr,bt,Mr):pe.mayCreate(wr,bt),Yr)throw new pe.ErrnoError(Yr);if(!Ot.node_ops.rename)throw new pe.ErrnoError(63);if(pe.isMountpoint(pr)||_r&&pe.isMountpoint(_r))throw new pe.ErrnoError(10);if(wr!==Ot&&(Yr=pe.nodePermissions(Ot,"w"),Yr))throw new pe.ErrnoError(Yr);try{pe.trackingDelegate.willMovePath&&pe.trackingDelegate.willMovePath(F,X)}catch(wi){A("FS.trackingDelegate['willMovePath']('"+F+"', '"+X+"') threw an exception: "+wi.message)}pe.hashRemoveNode(pr);try{Ot.node_ops.rename(pr,wr,bt)}catch(wi){throw wi}finally{pe.hashAddNode(pr)}try{pe.trackingDelegate.onMovePath&&pe.trackingDelegate.onMovePath(F,X)}catch(wi){A("FS.trackingDelegate['onMovePath']('"+F+"', '"+X+"') threw an exception: "+wi.message)}}},rmdir:function(F){var X=pe.lookupPath(F,{parent:!0}),ce=X.node,Pe=Fe.basename(F),tt=pe.lookupNode(ce,Pe),bt=pe.mayDelete(ce,Pe,!0);if(bt)throw new pe.ErrnoError(bt);if(!ce.node_ops.rmdir)throw new pe.ErrnoError(63);if(pe.isMountpoint(tt))throw new pe.ErrnoError(10);try{pe.trackingDelegate.willDeletePath&&pe.trackingDelegate.willDeletePath(F)}catch(Bt){A("FS.trackingDelegate['willDeletePath']('"+F+"') threw an exception: "+Bt.message)}ce.node_ops.rmdir(ce,Pe),pe.destroyNode(tt);try{pe.trackingDelegate.onDeletePath&&pe.trackingDelegate.onDeletePath(F)}catch(Bt){A("FS.trackingDelegate['onDeletePath']('"+F+"') threw an exception: "+Bt.message)}},readdir:function(F){var X=pe.lookupPath(F,{follow:!0}),ce=X.node;if(!ce.node_ops.readdir)throw new pe.ErrnoError(54);return ce.node_ops.readdir(ce)},unlink:function(F){var X=pe.lookupPath(F,{parent:!0}),ce=X.node,Pe=Fe.basename(F),tt=pe.lookupNode(ce,Pe),bt=pe.mayDelete(ce,Pe,!1);if(bt)throw new pe.ErrnoError(bt);if(!ce.node_ops.unlink)throw new pe.ErrnoError(63);if(pe.isMountpoint(tt))throw new pe.ErrnoError(10);try{pe.trackingDelegate.willDeletePath&&pe.trackingDelegate.willDeletePath(F)}catch(Bt){A("FS.trackingDelegate['willDeletePath']('"+F+"') threw an exception: "+Bt.message)}ce.node_ops.unlink(ce,Pe),pe.destroyNode(tt);try{pe.trackingDelegate.onDeletePath&&pe.trackingDelegate.onDeletePath(F)}catch(Bt){A("FS.trackingDelegate['onDeletePath']('"+F+"') threw an exception: "+Bt.message)}},readlink:function(F){var X=pe.lookupPath(F),ce=X.node;if(!ce)throw new pe.ErrnoError(44);if(!ce.node_ops.readlink)throw new pe.ErrnoError(28);return lt.resolve(pe.getPath(ce.parent),ce.node_ops.readlink(ce))},stat:function(F,X){var ce=pe.lookupPath(F,{follow:!X}),Pe=ce.node;if(!Pe)throw new pe.ErrnoError(44);if(!Pe.node_ops.getattr)throw new pe.ErrnoError(63);return Pe.node_ops.getattr(Pe)},lstat:function(F){return pe.stat(F,!0)},chmod:function(F,X,ce){var Pe;if(typeof F=="string"){var tt=pe.lookupPath(F,{follow:!ce});Pe=tt.node}else Pe=F;if(!Pe.node_ops.setattr)throw new pe.ErrnoError(63);Pe.node_ops.setattr(Pe,{mode:X&4095|Pe.mode&-4096,timestamp:Date.now()})},lchmod:function(F,X){pe.chmod(F,X,!0)},fchmod:function(F,X){var ce=pe.getStream(F);if(!ce)throw new pe.ErrnoError(8);pe.chmod(ce.node,X)},chown:function(F,X,ce,Pe){var tt;if(typeof F=="string"){var bt=pe.lookupPath(F,{follow:!Pe});tt=bt.node}else tt=F;if(!tt.node_ops.setattr)throw new pe.ErrnoError(63);tt.node_ops.setattr(tt,{timestamp:Date.now()})},lchown:function(F,X,ce){pe.chown(F,X,ce,!0)},fchown:function(F,X,ce){var Pe=pe.getStream(F);if(!Pe)throw new pe.ErrnoError(8);pe.chown(Pe.node,X,ce)},truncate:function(F,X){if(X<0)throw new pe.ErrnoError(28);var ce;if(typeof F=="string"){var Pe=pe.lookupPath(F,{follow:!0});ce=Pe.node}else ce=F;if(!ce.node_ops.setattr)throw new pe.ErrnoError(63);if(pe.isDir(ce.mode))throw new pe.ErrnoError(31);if(!pe.isFile(ce.mode))throw new pe.ErrnoError(28);var tt=pe.nodePermissions(ce,"w");if(tt)throw new pe.ErrnoError(tt);ce.node_ops.setattr(ce,{size:X,timestamp:Date.now()})},ftruncate:function(F,X){var ce=pe.getStream(F);if(!ce)throw new pe.ErrnoError(8);if(!(ce.flags&2097155))throw new pe.ErrnoError(28);pe.truncate(ce.node,X)},utime:function(F,X,ce){var Pe=pe.lookupPath(F,{follow:!0}),tt=Pe.node;tt.node_ops.setattr(tt,{timestamp:Math.max(X,ce)})},open:function(F,X,ce,Pe,tt){if(F==="")throw new pe.ErrnoError(44);X=typeof X=="string"?pe.modeStringToFlags(X):X,ce=typeof ce>"u"?438:ce,X&64?ce=ce&4095|32768:ce=0;var bt;if(typeof F=="object")bt=F;else{F=Fe.normalize(F);try{var Bt=pe.lookupPath(F,{follow:!(X&131072)});bt=Bt.node}catch{}}var Ot=!1;if(X&64)if(bt){if(X&128)throw new pe.ErrnoError(20)}else bt=pe.mknod(F,ce,0),Ot=!0;if(!bt)throw new pe.ErrnoError(44);if(pe.isChrdev(bt.mode)&&(X&=-513),X&65536&&!pe.isDir(bt.mode))throw new pe.ErrnoError(54);if(!Ot){var wr=pe.mayOpen(bt,X);if(wr)throw new pe.ErrnoError(wr)}X&512&&pe.truncate(bt,0),X&=-131713;var pr=pe.createStream({node:bt,path:pe.getPath(bt),flags:X,seekable:!0,position:0,stream_ops:bt.stream_ops,ungotten:[],error:!1},Pe,tt);pr.stream_ops.open&&pr.stream_ops.open(pr),t.logReadFiles&&!(X&1)&&(pe.readFiles||(pe.readFiles={}),F in pe.readFiles||(pe.readFiles[F]=1,A("FS.trackingDelegate error on read file: "+F)));try{if(pe.trackingDelegate.onOpenFile){var vr=0;(X&2097155)!==1&&(vr|=pe.tracking.openFlags.READ),X&2097155&&(vr|=pe.tracking.openFlags.WRITE),pe.trackingDelegate.onOpenFile(F,vr)}}catch(_r){A("FS.trackingDelegate['onOpenFile']('"+F+"', flags) threw an exception: "+_r.message)}return pr},close:function(F){if(pe.isClosed(F))throw new pe.ErrnoError(8);F.getdents&&(F.getdents=null);try{F.stream_ops.close&&F.stream_ops.close(F)}catch(X){throw X}finally{pe.closeStream(F.fd)}F.fd=null},isClosed:function(F){return F.fd===null},llseek:function(F,X,ce){if(pe.isClosed(F))throw new pe.ErrnoError(8);if(!F.seekable||!F.stream_ops.llseek)throw new pe.ErrnoError(70);if(ce!=0&&ce!=1&&ce!=2)throw new pe.ErrnoError(28);return F.position=F.stream_ops.llseek(F,X,ce),F.ungotten=[],F.position},read:function(F,X,ce,Pe,tt){if(Pe<0||tt<0)throw new pe.ErrnoError(28);if(pe.isClosed(F))throw new pe.ErrnoError(8);if((F.flags&2097155)===1)throw new pe.ErrnoError(8);if(pe.isDir(F.node.mode))throw new pe.ErrnoError(31);if(!F.stream_ops.read)throw new pe.ErrnoError(28);var bt=typeof tt<"u";if(!bt)tt=F.position;else if(!F.seekable)throw new pe.ErrnoError(70);var Bt=F.stream_ops.read(F,X,ce,Pe,tt);return bt||(F.position+=Bt),Bt},write:function(F,X,ce,Pe,tt,bt){if(Pe<0||tt<0)throw new pe.ErrnoError(28);if(pe.isClosed(F))throw new pe.ErrnoError(8);if(!(F.flags&2097155))throw new pe.ErrnoError(8);if(pe.isDir(F.node.mode))throw new pe.ErrnoError(31);if(!F.stream_ops.write)throw new pe.ErrnoError(28);F.seekable&&F.flags&1024&&pe.llseek(F,0,2);var Bt=typeof tt<"u";if(!Bt)tt=F.position;else if(!F.seekable)throw new pe.ErrnoError(70);var Ot=F.stream_ops.write(F,X,ce,Pe,tt,bt);Bt||(F.position+=Ot);try{F.path&&pe.trackingDelegate.onWriteToFile&&pe.trackingDelegate.onWriteToFile(F.path)}catch(wr){A("FS.trackingDelegate['onWriteToFile']('"+F.path+"') threw an exception: "+wr.message)}return Ot},allocate:function(F,X,ce){if(pe.isClosed(F))throw new pe.ErrnoError(8);if(X<0||ce<=0)throw new pe.ErrnoError(28);if(!(F.flags&2097155))throw new pe.ErrnoError(8);if(!pe.isFile(F.node.mode)&&!pe.isDir(F.node.mode))throw new pe.ErrnoError(43);if(!F.stream_ops.allocate)throw new pe.ErrnoError(138);F.stream_ops.allocate(F,X,ce)},mmap:function(F,X,ce,Pe,tt,bt){if(tt&2&&!(bt&2)&&(F.flags&2097155)!==2)throw new pe.ErrnoError(2);if((F.flags&2097155)===1)throw new pe.ErrnoError(2);if(!F.stream_ops.mmap)throw new pe.ErrnoError(43);return F.stream_ops.mmap(F,X,ce,Pe,tt,bt)},msync:function(F,X,ce,Pe,tt){return!F||!F.stream_ops.msync?0:F.stream_ops.msync(F,X,ce,Pe,tt)},munmap:function(F){return 0},ioctl:function(F,X,ce){if(!F.stream_ops.ioctl)throw new pe.ErrnoError(59);return F.stream_ops.ioctl(F,X,ce)},readFile:function(F,X){if(X=X||{},X.flags=X.flags||"r",X.encoding=X.encoding||"binary",X.encoding!=="utf8"&&X.encoding!=="binary")throw new Error('Invalid encoding type "'+X.encoding+'"');var ce,Pe=pe.open(F,X.flags),tt=pe.stat(F),bt=tt.size,Bt=new Uint8Array(bt);return pe.read(Pe,Bt,0,bt,0),X.encoding==="utf8"?ce=Me(Bt,0):X.encoding==="binary"&&(ce=Bt),pe.close(Pe),ce},writeFile:function(F,X,ce){ce=ce||{},ce.flags=ce.flags||"w";var Pe=pe.open(F,ce.flags,ce.mode);if(typeof X=="string"){var tt=new Uint8Array(yt(X)+1),bt=it(X,tt,0,tt.length);pe.write(Pe,tt,0,bt,void 0,ce.canOwn)}else if(ArrayBuffer.isView(X))pe.write(Pe,X,0,X.byteLength,void 0,ce.canOwn);else throw new Error("Unsupported data type");pe.close(Pe)},cwd:function(){return pe.currentPath},chdir:function(F){var X=pe.lookupPath(F,{follow:!0});if(X.node===null)throw new pe.ErrnoError(44);if(!pe.isDir(X.node.mode))throw new pe.ErrnoError(54);var ce=pe.nodePermissions(X.node,"x");if(ce)throw new pe.ErrnoError(ce);pe.currentPath=X.path},createDefaultDirectories:function(){pe.mkdir("/tmp"),pe.mkdir("/home"),pe.mkdir("/home/web_user")},createDefaultDevices:function(){pe.mkdir("/dev"),pe.registerDevice(pe.makedev(1,3),{read:function(){return 0},write:function(ce,Pe,tt,bt,Bt){return bt}}),pe.mkdev("/dev/null",pe.makedev(1,3)),Lt.register(pe.makedev(5,0),Lt.default_tty_ops),Lt.register(pe.makedev(6,0),Lt.default_tty1_ops),pe.mkdev("/dev/tty",pe.makedev(5,0)),pe.mkdev("/dev/tty1",pe.makedev(6,0));var F;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var X=new Uint8Array(1);F=function(){return crypto.getRandomValues(X),X[0]}}F||(F=function(){Ni("random_device")}),pe.createDevice("/dev","random",F),pe.createDevice("/dev","urandom",F),pe.mkdir("/dev/shm"),pe.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){pe.mkdir("/proc"),pe.mkdir("/proc/self"),pe.mkdir("/proc/self/fd"),pe.mount({mount:function(){var F=pe.createNode("/proc/self","fd",16895,73);return F.node_ops={lookup:function(X,ce){var Pe=+ce,tt=pe.getStream(Pe);if(!tt)throw new pe.ErrnoError(8);var bt={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return tt.path}}};return bt.parent=bt,bt}},F}},{},"/proc/self/fd")},createStandardStreams:function(){t.stdin?pe.createDevice("/dev","stdin",t.stdin):pe.symlink("/dev/tty","/dev/stdin"),t.stdout?pe.createDevice("/dev","stdout",null,t.stdout):pe.symlink("/dev/tty","/dev/stdout"),t.stderr?pe.createDevice("/dev","stderr",null,t.stderr):pe.symlink("/dev/tty1","/dev/stderr"),pe.open("/dev/stdin","r"),pe.open("/dev/stdout","w"),pe.open("/dev/stderr","w")},ensureErrnoError:function(){pe.ErrnoError||(pe.ErrnoError=function(X,ce){this.node=ce,this.setErrno=function(Pe){this.errno=Pe},this.setErrno(X),this.message="FS error"},pe.ErrnoError.prototype=new Error,pe.ErrnoError.prototype.constructor=pe.ErrnoError,[44].forEach(function(F){pe.genericErrors[F]=new pe.ErrnoError(F),pe.genericErrors[F].stack="<generic error, no stack>"}))},staticInit:function(){pe.ensureErrnoError(),pe.nameTable=new Array(4096),pe.mount(ft,{},"/"),pe.createDefaultDirectories(),pe.createDefaultDevices(),pe.createSpecialDirectories(),pe.filesystems={MEMFS:ft}},init:function(F,X,ce){pe.init.initialized=!0,pe.ensureErrnoError(),t.stdin=F||t.stdin,t.stdout=X||t.stdout,t.stderr=ce||t.stderr,pe.createStandardStreams()},quit:function(){pe.init.initialized=!1;var F=t._fflush;F&&F(0);for(var X=0;X<pe.streams.length;X++){var ce=pe.streams[X];ce&&pe.close(ce)}},getMode:function(F,X){var ce=0;return F&&(ce|=365),X&&(ce|=146),ce},joinPath:function(F,X){var ce=Fe.join.apply(null,F);return X&&ce[0]=="/"&&(ce=ce.substr(1)),ce},absolutePath:function(F,X){return lt.resolve(X,F)},standardizePath:function(F){return Fe.normalize(F)},findObject:function(F,X){var ce=pe.analyzePath(F,X);return ce.exists?ce.object:(Ne(ce.error),null)},analyzePath:function(F,X){try{var ce=pe.lookupPath(F,{follow:!X});F=ce.path}catch{}var Pe={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ce=pe.lookupPath(F,{parent:!0});Pe.parentExists=!0,Pe.parentPath=ce.path,Pe.parentObject=ce.node,Pe.name=Fe.basename(F),ce=pe.lookupPath(F,{follow:!X}),Pe.exists=!0,Pe.path=ce.path,Pe.object=ce.node,Pe.name=ce.node.name,Pe.isRoot=ce.path==="/"}catch(tt){Pe.error=tt.errno}return Pe},createFolder:function(F,X,ce,Pe){var tt=Fe.join2(typeof F=="string"?F:pe.getPath(F),X),bt=pe.getMode(ce,Pe);return pe.mkdir(tt,bt)},createPath:function(F,X,ce,Pe){F=typeof F=="string"?F:pe.getPath(F);for(var tt=X.split("/").reverse();tt.length;){var bt=tt.pop();if(bt){var Bt=Fe.join2(F,bt);try{pe.mkdir(Bt)}catch{}F=Bt}}return Bt},createFile:function(F,X,ce,Pe,tt){var bt=Fe.join2(typeof F=="string"?F:pe.getPath(F),X),Bt=pe.getMode(Pe,tt);return pe.create(bt,Bt)},createDataFile:function(F,X,ce,Pe,tt,bt){var Bt=X?Fe.join2(typeof F=="string"?F:pe.getPath(F),X):F,Ot=pe.getMode(Pe,tt),wr=pe.create(Bt,Ot);if(ce){if(typeof ce=="string"){for(var pr=new Array(ce.length),vr=0,_r=ce.length;vr<_r;++vr)pr[vr]=ce.charCodeAt(vr);ce=pr}pe.chmod(wr,Ot|146);var Mr=pe.open(wr,"w");pe.write(Mr,ce,0,ce.length,0,bt),pe.close(Mr),pe.chmod(wr,Ot)}return wr},createDevice:function(F,X,ce,Pe){var tt=Fe.join2(typeof F=="string"?F:pe.getPath(F),X),bt=pe.getMode(!!ce,!!Pe);pe.createDevice.major||(pe.createDevice.major=64);var Bt=pe.makedev(pe.createDevice.major++,0);return pe.registerDevice(Bt,{open:function(Ot){Ot.seekable=!1},close:function(Ot){Pe&&Pe.buffer&&Pe.buffer.length&&Pe(10)},read:function(Ot,wr,pr,vr,_r){for(var Mr=0,Yr=0;Yr<vr;Yr++){var wi;try{wi=ce()}catch{throw new pe.ErrnoError(29)}if(wi===void 0&&Mr===0)throw new pe.ErrnoError(6);if(wi==null)break;Mr++,wr[pr+Yr]=wi}return Mr&&(Ot.node.timestamp=Date.now()),Mr},write:function(Ot,wr,pr,vr,_r){for(var Mr=0;Mr<vr;Mr++)try{Pe(wr[pr+Mr])}catch{throw new pe.ErrnoError(29)}return vr&&(Ot.node.timestamp=Date.now()),Mr}}),pe.mkdev(tt,bt,Bt)},createLink:function(F,X,ce,Pe,tt){var bt=Fe.join2(typeof F=="string"?F:pe.getPath(F),X);return pe.symlink(ce,bt)},forceLoadFile:function(F){if(F.isDevice||F.isFolder||F.link||F.contents)return!0;var X=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(s)try{F.contents=Kn(s(F.url),!0),F.usedBytes=F.contents.length}catch{X=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return X||Ne(29),X},createLazyFile:function(F,X,ce,Pe,tt){function bt(){this.lengthKnown=!1,this.chunks=[]}if(bt.prototype.get=function(Mr){if(!(Mr>this.length-1||Mr<0)){var Yr=Mr%this.chunkSize,wi=Mr/this.chunkSize|0;return this.getter(wi)[Yr]}},bt.prototype.setDataGetter=function(Mr){this.getter=Mr},bt.prototype.cacheLength=function(){var Mr=new XMLHttpRequest;if(Mr.open("HEAD",ce,!1),Mr.send(null),!(Mr.status>=200&&Mr.status<300||Mr.status===304))throw new Error("Couldn't load "+ce+". Status: "+Mr.status);var Yr=Number(Mr.getResponseHeader("Content-length")),wi,ot=(wi=Mr.getResponseHeader("Accept-Ranges"))&&wi==="bytes",m=(wi=Mr.getResponseHeader("Content-Encoding"))&&wi==="gzip",xr=1024*1024;ot||(xr=Yr);var h=function(ci,Oi){if(ci>Oi)throw new Error("invalid range ("+ci+", "+Oi+") or no bytes requested!");if(Oi>Yr-1)throw new Error("only "+Yr+" bytes available! programmer error!");var wo=new XMLHttpRequest;if(wo.open("GET",ce,!1),Yr!==xr&&wo.setRequestHeader("Range","bytes="+ci+"-"+Oi),typeof Uint8Array<"u"&&(wo.responseType="arraybuffer"),wo.overrideMimeType&&wo.overrideMimeType("text/plain; charset=x-user-defined"),wo.send(null),!(wo.status>=200&&wo.status<300||wo.status===304))throw new Error("Couldn't load "+ce+". Status: "+wo.status);return wo.response!==void 0?new Uint8Array(wo.response||[]):Kn(wo.responseText||"",!0)},P=this;P.setDataGetter(function(ci){var Oi=ci*xr,wo=(ci+1)*xr-1;if(wo=Math.min(wo,Yr-1),typeof P.chunks[ci]>"u"&&(P.chunks[ci]=h(Oi,wo)),typeof P.chunks[ci]>"u")throw new Error("doXHR failed!");return P.chunks[ci]}),(m||!Yr)&&(xr=Yr=1,Yr=this.getter(0).length,xr=Yr,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Yr,this._chunkSize=xr,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Bt,Ot}else var Ot={isDevice:!1,url:ce};var wr=pe.createFile(F,X,Ot,Pe,tt);Ot.contents?wr.contents=Ot.contents:Ot.url&&(wr.contents=null,wr.url=Ot.url),Object.defineProperties(wr,{usedBytes:{get:function(){return this.contents.length}}});var pr={},vr=Object.keys(wr.stream_ops);return vr.forEach(function(_r){var Mr=wr.stream_ops[_r];pr[_r]=function(){if(!pe.forceLoadFile(wr))throw new pe.ErrnoError(29);return Mr.apply(null,arguments)}}),pr.read=function(Mr,Yr,wi,ot,m){if(!pe.forceLoadFile(wr))throw new pe.ErrnoError(29);var xr=Mr.node.contents;if(m>=xr.length)return 0;var h=Math.min(xr.length-m,ot);if(xr.slice)for(var P=0;P<h;P++)Yr[wi+P]=xr[m+P];else for(var P=0;P<h;P++)Yr[wi+P]=xr.get(m+P);return h},wr.stream_ops=pr,wr},createPreloadedFile:function(F,X,ce,Pe,tt,bt,Bt,Ot,wr,pr){pt.init();var vr=X?lt.resolve(Fe.join2(F,X)):F;function _r(Mr){function Yr(ot){pr&&pr(),Ot||pe.createDataFile(F,X,ot,Pe,tt,wr),bt&&bt(),Br()}var wi=!1;t.preloadPlugins.forEach(function(ot){wi||ot.canHandle(vr)&&(ot.handle(Mr,vr,Yr,function(){Bt&&Bt(),Br()}),wi=!0)}),wi||Yr(Mr)}Or(),typeof ce=="string"?pt.asyncLoad(ce,function(Mr){_r(Mr)},Bt):_r(ce)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(F,X,ce){X=X||function(){},ce=ce||function(){};var Pe=pe.indexedDB();try{var tt=Pe.open(pe.DB_NAME(),pe.DB_VERSION)}catch(bt){return ce(bt)}tt.onupgradeneeded=function(){b("creating db");var Bt=tt.result;Bt.createObjectStore(pe.DB_STORE_NAME)},tt.onsuccess=function(){var Bt=tt.result,Ot=Bt.transaction([pe.DB_STORE_NAME],"readwrite"),wr=Ot.objectStore(pe.DB_STORE_NAME),pr=0,vr=0,_r=F.length;function Mr(){vr==0?X():ce()}F.forEach(function(Yr){var wi=wr.put(pe.analyzePath(Yr).object.contents,Yr);wi.onsuccess=function(){pr++,pr+vr==_r&&Mr()},wi.onerror=function(){vr++,pr+vr==_r&&Mr()}}),Ot.onerror=ce},tt.onerror=ce},loadFilesFromDB:function(F,X,ce){X=X||function(){},ce=ce||function(){};var Pe=pe.indexedDB();try{var tt=Pe.open(pe.DB_NAME(),pe.DB_VERSION)}catch(bt){return ce(bt)}tt.onupgradeneeded=ce,tt.onsuccess=function(){var Bt=tt.result;try{var Ot=Bt.transaction([pe.DB_STORE_NAME],"readonly")}catch(Yr){ce(Yr);return}var wr=Ot.objectStore(pe.DB_STORE_NAME),pr=0,vr=0,_r=F.length;function Mr(){vr==0?X():ce()}F.forEach(function(Yr){var wi=wr.get(Yr);wi.onsuccess=function(){pe.analyzePath(Yr).exists&&pe.unlink(Yr),pe.createDataFile(Fe.dirname(Yr),Fe.basename(Yr),wi.result,!0,!0,!0),pr++,pr+vr==_r&&Mr()},wi.onerror=function(){vr++,pr+vr==_r&&Mr()}}),Ot.onerror=ce},tt.onerror=ce},mmapAlloc:function(F){for(var X=C(F,16384),ce=el(X);F<X;)wt[ce+F++]=0;return ce}};function Qt(F,X){if(pt.mainLoop.timingMode=F,pt.mainLoop.timingValue=X,!pt.mainLoop.func)return 1;if(F==0)pt.mainLoop.scheduler=function(){var Bt=Math.max(0,pt.mainLoop.tickStartTime+X-Vt())|0;setTimeout(pt.mainLoop.runner,Bt)},pt.mainLoop.method="timeout";else if(F==1)pt.mainLoop.scheduler=function(){pt.requestAnimationFrame(pt.mainLoop.runner)},pt.mainLoop.method="rAF";else if(F==2){if(typeof setImmediate>"u"){var ce=[],Pe="setimmediate",tt=function(bt){(bt.data===Pe||bt.data.target===Pe)&&(bt.stopPropagation(),ce.shift()())};addEventListener("message",tt,!0),setImmediate=function(Bt){ce.push(Bt),postMessage(Pe,"*")}}pt.mainLoop.scheduler=function(){setImmediate(pt.mainLoop.runner)},pt.mainLoop.method="immediate"}return 0}var Vt;typeof performance<"u"&&performance.now?Vt=function(){return performance.now()}:Vt=Date.now;function lr(F,X,ce,Pe,tt){we(!pt.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),pt.mainLoop.func=F,pt.mainLoop.arg=Pe;var bt;typeof Pe<"u"?bt=function(){t.dynCall_vi(F,Pe)}:bt=function(){t.dynCall_v(F)};var Bt=pt.mainLoop.currentlyRunningMainloop;if(pt.mainLoop.runner=function(){if(!le){if(pt.mainLoop.queue.length>0){var wr=Date.now(),pr=pt.mainLoop.queue.shift();if(pr.func(pr.arg),pt.mainLoop.remainingBlockers){var vr=pt.mainLoop.remainingBlockers,_r=vr%1==0?vr-1:Math.floor(vr);pr.counted?pt.mainLoop.remainingBlockers=_r:(_r=_r+.5,pt.mainLoop.remainingBlockers=(8*vr+_r)/9)}if(console.log('main loop blocker "'+pr.name+'" took '+(Date.now()-wr)+" ms"),pt.mainLoop.updateStatus(),Bt<pt.mainLoop.currentlyRunningMainloop)return;setTimeout(pt.mainLoop.runner,0);return}if(!(Bt<pt.mainLoop.currentlyRunningMainloop)){if(pt.mainLoop.currentFrameNumber=pt.mainLoop.currentFrameNumber+1|0,pt.mainLoop.timingMode==1&&pt.mainLoop.timingValue>1&&pt.mainLoop.currentFrameNumber%pt.mainLoop.timingValue!=0){pt.mainLoop.scheduler();return}else pt.mainLoop.timingMode==0&&(pt.mainLoop.tickStartTime=Vt());pt.mainLoop.runIter(bt),!(Bt<pt.mainLoop.currentlyRunningMainloop)&&(typeof Et=="object"&&Et.audio&&Et.audio.queueNewAudioData&&Et.audio.queueNewAudioData(),pt.mainLoop.scheduler())}}},tt||(X&&X>0?Qt(0,1e3/X):Qt(1,1),pt.mainLoop.scheduler()),ce)throw"unwind"}var pt={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){pt.mainLoop.scheduler=null,pt.mainLoop.currentlyRunningMainloop++},resume:function(){pt.mainLoop.currentlyRunningMainloop++;var F=pt.mainLoop.timingMode,X=pt.mainLoop.timingValue,ce=pt.mainLoop.func;pt.mainLoop.func=null,lr(ce,0,!1,pt.mainLoop.arg,!0),Qt(F,X),pt.mainLoop.scheduler()},updateStatus:function(){if(t.setStatus){var F=t.statusMessage||"Please wait...",X=pt.mainLoop.remainingBlockers,ce=pt.mainLoop.expectedBlockers;X?X<ce?t.setStatus(F+" ("+(ce-X)+"/"+ce+")"):t.setStatus(F):t.setStatus("")}},runIter:function(F){if(!le){if(t.preMainLoop){var X=t.preMainLoop();if(X===!1)return}try{F()}catch(ce){if(ce instanceof Sl)return;if(ce=="unwind")return;throw ce&&typeof ce=="object"&&ce.stack&&A("exception thrown: "+[ce,ce.stack]),ce}t.postMainLoop&&t.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(t.preloadPlugins||(t.preloadPlugins=[]),pt.initted)return;pt.initted=!0;try{new Blob,pt.hasBlobConstructor=!0}catch{pt.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}pt.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:pt.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),pt.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!t.noImageDecoding&&typeof pt.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),t.noImageDecoding=!0);var F={};F.canHandle=function(bt){return!t.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(bt)},F.handle=function(bt,Bt,Ot,wr){var pr=null;if(pt.hasBlobConstructor)try{pr=new Blob([bt],{type:pt.getMimetype(Bt)}),pr.size!==bt.length&&(pr=new Blob([new Uint8Array(bt).buffer],{type:pt.getMimetype(Bt)}))}catch(Yr){N("Blob constructor present but fails: "+Yr+"; falling back to blob builder")}if(!pr){var vr=new pt.BlobBuilder;vr.append(new Uint8Array(bt).buffer),pr=vr.getBlob()}var _r=pt.URLObject.createObjectURL(pr),Mr=new Image;Mr.onload=function(){we(Mr.complete,"Image "+Bt+" could not be decoded");var wi=document.createElement("canvas");wi.width=Mr.width,wi.height=Mr.height;var ot=wi.getContext("2d");ot.drawImage(Mr,0,0),t.preloadedImages[Bt]=wi,pt.URLObject.revokeObjectURL(_r),Ot&&Ot(bt)},Mr.onerror=function(wi){console.log("Image "+_r+" could not be decoded"),wr&&wr()},Mr.src=_r},t.preloadPlugins.push(F);var X={};X.canHandle=function(bt){return!t.noAudioDecoding&&bt.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},X.handle=function(bt,Bt,Ot,wr){var pr=!1;function vr(ot){pr||(pr=!0,t.preloadedAudios[Bt]=ot,Ot&&Ot(bt))}function _r(){pr||(pr=!0,t.preloadedAudios[Bt]=new Audio,wr&&wr())}if(pt.hasBlobConstructor){try{var Mr=new Blob([bt],{type:pt.getMimetype(Bt)})}catch{return _r()}var Yr=pt.URLObject.createObjectURL(Mr),wi=new Audio;wi.addEventListener("canplaythrough",function(){vr(wi)},!1),wi.onerror=function(m){if(pr)return;console.log("warning: browser could not fully decode audio "+Bt+", trying slower base64 approach");function xr(h){for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ci="=",Oi="",wo=0,ie=0,wn=0;wn<h.length;wn++)for(wo=wo<<8|h[wn],ie+=8;ie>=6;){var Bs=wo>>ie-6&63;ie-=6,Oi+=P[Bs]}return ie==2?(Oi+=P[(wo&3)<<4],Oi+=ci+ci):ie==4&&(Oi+=P[(wo&15)<<2],Oi+=ci),Oi}wi.src="data:audio/x-"+Bt.substr(-3)+";base64,"+xr(bt),vr(wi)},wi.src=Yr,pt.safeSetTimeout(function(){vr(wi)},1e4)}else return _r()},t.preloadPlugins.push(X);function ce(){pt.pointerLock=document.pointerLockElement===t.canvas||document.mozPointerLockElement===t.canvas||document.webkitPointerLockElement===t.canvas||document.msPointerLockElement===t.canvas}var Pe=t.canvas;Pe&&(Pe.requestPointerLock=Pe.requestPointerLock||Pe.mozRequestPointerLock||Pe.webkitRequestPointerLock||Pe.msRequestPointerLock||function(){},Pe.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},Pe.exitPointerLock=Pe.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ce,!1),document.addEventListener("mozpointerlockchange",ce,!1),document.addEventListener("webkitpointerlockchange",ce,!1),document.addEventListener("mspointerlockchange",ce,!1),t.elementPointerLock&&Pe.addEventListener("click",function(tt){!pt.pointerLock&&t.canvas.requestPointerLock&&(t.canvas.requestPointerLock(),tt.preventDefault())},!1))},createContext:function(F,X,ce,Pe){if(X&&t.ctx&&F==t.canvas)return t.ctx;var tt,bt;if(X){var Bt={antialias:!1,alpha:!1,majorVersion:1};if(Pe)for(var Ot in Pe)Bt[Ot]=Pe[Ot];typeof fn<"u"&&(bt=fn.createContext(F,Bt),bt&&(tt=fn.getContext(bt).GLctx))}else tt=F.getContext("2d");return tt?(ce&&(X||we(typeof Da>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),t.ctx=tt,X&&fn.makeContextCurrent(bt),t.useWebGL=X,pt.moduleContextCreatedCallbacks.forEach(function(wr){wr()}),pt.init()),tt):null},destroyContext:function(F,X,ce){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(F,X){pt.lockPointer=F,pt.resizeCanvas=X,typeof pt.lockPointer>"u"&&(pt.lockPointer=!0),typeof pt.resizeCanvas>"u"&&(pt.resizeCanvas=!1);var ce=t.canvas;function Pe(){pt.isFullscreen=!1;var bt=ce.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===bt?(ce.exitFullscreen=pt.exitFullscreen,pt.lockPointer&&ce.requestPointerLock(),pt.isFullscreen=!0,pt.resizeCanvas?pt.setFullscreenCanvasSize():pt.updateCanvasDimensions(ce)):(bt.parentNode.insertBefore(ce,bt),bt.parentNode.removeChild(bt),pt.resizeCanvas?pt.setWindowedCanvasSize():pt.updateCanvasDimensions(ce)),t.onFullScreen&&t.onFullScreen(pt.isFullscreen),t.onFullscreen&&t.onFullscreen(pt.isFullscreen)}pt.fullscreenHandlersInstalled||(pt.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",Pe,!1),document.addEventListener("mozfullscreenchange",Pe,!1),document.addEventListener("webkitfullscreenchange",Pe,!1),document.addEventListener("MSFullscreenChange",Pe,!1));var tt=document.createElement("div");ce.parentNode.insertBefore(tt,ce),tt.appendChild(ce),tt.requestFullscreen=tt.requestFullscreen||tt.mozRequestFullScreen||tt.msRequestFullscreen||(tt.webkitRequestFullscreen?function(){tt.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(tt.webkitRequestFullScreen?function(){tt.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),tt.requestFullscreen()},exitFullscreen:function(){if(!pt.isFullscreen)return!1;var F=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return F.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(F){var X=Date.now();if(pt.nextRAF===0)pt.nextRAF=X+1e3/60;else for(;X+2>=pt.nextRAF;)pt.nextRAF+=1e3/60;var ce=Math.max(pt.nextRAF-X,0);setTimeout(F,ce)},requestAnimationFrame:function(F){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(F);return}var X=pt.fakeRequestAnimationFrame;typeof window<"u"&&(X=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||X),X(F)},safeCallback:function(F){return function(){if(!le)return F.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){pt.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(pt.allowAsyncCallbacks=!0,pt.queuedAsyncCallbacks.length>0){var F=pt.queuedAsyncCallbacks;pt.queuedAsyncCallbacks=[],F.forEach(function(X){X()})}},safeRequestAnimationFrame:function(F){return pt.requestAnimationFrame(function(){le||(pt.allowAsyncCallbacks?F():pt.queuedAsyncCallbacks.push(F))})},safeSetTimeout:function(F,X){return setTimeout(function(){le||(pt.allowAsyncCallbacks?F():pt.queuedAsyncCallbacks.push(F))},X)},safeSetInterval:function(F,X){return setInterval(function(){le||pt.allowAsyncCallbacks&&F()},X)},getMimetype:function(F){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[F.substr(F.lastIndexOf(".")+1)]},getUserMedia:function(F){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(F)},getMovementX:function(F){return F.movementX||F.mozMovementX||F.webkitMovementX||0},getMovementY:function(F){return F.movementY||F.mozMovementY||F.webkitMovementY||0},getMouseWheelDelta:function(F){var X=0;switch(F.type){case"DOMMouseScroll":X=F.detail/3;break;case"mousewheel":X=F.wheelDelta/120;break;case"wheel":switch(X=F.deltaY,F.deltaMode){case 0:X/=100;break;case 1:X/=3;break;case 2:X*=80;break;default:throw"unrecognized mouse wheel delta mode: "+F.deltaMode}break;default:throw"unrecognized mouse wheel event: "+F.type}return X},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(F){if(pt.pointerLock)F.type!="mousemove"&&"mozMovementX"in F?pt.mouseMovementX=pt.mouseMovementY=0:(pt.mouseMovementX=pt.getMovementX(F),pt.mouseMovementY=pt.getMovementY(F)),typeof Et<"u"?(pt.mouseX=Et.mouseX+pt.mouseMovementX,pt.mouseY=Et.mouseY+pt.mouseMovementY):(pt.mouseX+=pt.mouseMovementX,pt.mouseY+=pt.mouseMovementY);else{var X=t.canvas.getBoundingClientRect(),ce=t.canvas.width,Pe=t.canvas.height,tt=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,bt=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(F.type==="touchstart"||F.type==="touchend"||F.type==="touchmove"){var Bt=F.touch;if(Bt===void 0)return;var Ot=Bt.pageX-(tt+X.left),wr=Bt.pageY-(bt+X.top);Ot=Ot*(ce/X.width),wr=wr*(Pe/X.height);var pr={x:Ot,y:wr};if(F.type==="touchstart")pt.lastTouches[Bt.identifier]=pr,pt.touches[Bt.identifier]=pr;else if(F.type==="touchend"||F.type==="touchmove"){var vr=pt.touches[Bt.identifier];vr||(vr=pr),pt.lastTouches[Bt.identifier]=vr,pt.touches[Bt.identifier]=pr}return}var _r=F.pageX-(tt+X.left),Mr=F.pageY-(bt+X.top);_r=_r*(ce/X.width),Mr=Mr*(Pe/X.height),pt.mouseMovementX=_r-pt.mouseX,pt.mouseMovementY=Mr-pt.mouseY,pt.mouseX=_r,pt.mouseY=Mr}},asyncLoad:function(F,X,ce,Pe){var tt=Pe?"":"al "+F;f(F,function(bt){we(bt,'Loading data file "'+F+'" failed (no arrayBuffer).'),X(new Uint8Array(bt)),tt&&Br()},function(bt){if(ce)ce();else throw'Loading data file "'+F+'" failed.'}),tt&&Or()},resizeListeners:[],updateResizeListeners:function(){var F=t.canvas;pt.resizeListeners.forEach(function(X){X(F.width,F.height)})},setCanvasSize:function(F,X,ce){var Pe=t.canvas;pt.updateCanvasDimensions(Pe,F,X),ce||pt.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Et<"u"){var F=ht[Et.screen>>2];F=F|8388608,Ae[Et.screen>>2]=F}pt.updateCanvasDimensions(t.canvas),pt.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Et<"u"){var F=ht[Et.screen>>2];F=F&-8388609,Ae[Et.screen>>2]=F}pt.updateCanvasDimensions(t.canvas),pt.updateResizeListeners()},updateCanvasDimensions:function(F,X,ce){X&&ce?(F.widthNative=X,F.heightNative=ce):(X=F.widthNative,ce=F.heightNative);var Pe=X,tt=ce;if(t.forcedAspectRatio&&t.forcedAspectRatio>0&&(Pe/tt<t.forcedAspectRatio?Pe=Math.round(tt*t.forcedAspectRatio):tt=Math.round(Pe/t.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===F.parentNode&&typeof screen<"u"){var bt=Math.min(screen.width/Pe,screen.height/tt);Pe=Math.round(Pe*bt),tt=Math.round(tt*bt)}pt.resizeCanvas?(F.width!=Pe&&(F.width=Pe),F.height!=tt&&(F.height=tt),typeof F.style<"u"&&(F.style.removeProperty("width"),F.style.removeProperty("height"))):(F.width!=X&&(F.width=X),F.height!=ce&&(F.height=ce),typeof F.style<"u"&&(Pe!=X||tt!=ce?(F.style.setProperty("width",Pe+"px","important"),F.style.setProperty("height",tt+"px","important")):(F.style.removeProperty("width"),F.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var F=pt.nextWgetRequestHandle;return pt.nextWgetRequestHandle++,F}};function jr(){return Date.now()-Et.startTime|0}function $r(F){var X=Et.surfaces[F];if(X.locked++,X.locked>1||(X.buffer||(X.buffer=el(X.width*X.height*4),Ae[F+20>>2]=X.buffer),Ae[F+20>>2]=X.buffer,F==Et.screen&&t.screenIsReadOnly&&X.image))return 0;if(X.image=X.ctx.getImageData(0,0,X.width,X.height),F==Et.screen&&Et.defaults.opaqueFrontBuffer)for(var ce=X.image.data,Pe=ce.length,tt=0;tt<Pe/4;tt++)ce[tt*4+3]=255;{if(X.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;be.set(X.image.data,X.buffer)}return 0}function $i(){return Et.unicode}function Qi(){return Et.ttfContext}function Ci(){return Et.audio}var Et={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(F){return{x:Ae[F+0>>2],y:Ae[F+4>>2],w:Ae[F+8>>2],h:Ae[F+12>>2]}},updateRect:function(F,X){Ae[F>>2]=X.x,Ae[F+4>>2]=X.y,Ae[F+8>>2]=X.w,Ae[F+12>>2]=X.h},intersectionOfRects:function(F,X){var ce=Math.max(F.x,X.x),Pe=Math.max(F.y,X.y),tt=Math.min(F.x+F.w,X.x+X.w),bt=Math.min(F.y+F.h,X.y+X.h);return{x:ce,y:Pe,w:Math.max(ce,tt)-ce,h:Math.max(Pe,bt)-Pe}},checkPixelFormat:function(F){},loadColorToCSSRGB:function(F){var X=Ae[F>>2];return"rgb("+(X&255)+","+(X>>8&255)+","+(X>>16&255)+")"},loadColorToCSSRGBA:function(F){var X=Ae[F>>2];return"rgba("+(X&255)+","+(X>>8&255)+","+(X>>16&255)+","+(X>>24&255)/255+")"},translateColorToCSSRGBA:function(F){return"rgba("+(F&255)+","+(F>>8&255)+","+(F>>16&255)+","+(F>>>24)/255+")"},translateRGBAToCSSRGBA:function(F,X,ce,Pe){return"rgba("+(F&255)+","+(X&255)+","+(ce&255)+","+(Pe&255)/255+")"},translateRGBAToColor:function(F,X,ce,Pe){return F|X<<8|ce<<16|Pe<<24},makeSurface:function(F,X,ce,Pe,tt,bt,Bt,Ot,wr){ce=ce||0;var pr=ce&1,vr=ce&2097152,_r=ce&67108864,Mr=el(60),Yr=el(44),wi=vr?1:4,ot=0;!pr&&!_r&&(ot=el(F*X*4)),Ae[Mr>>2]=ce,Ae[Mr+4>>2]=Yr,Ae[Mr+8>>2]=F,Ae[Mr+12>>2]=X,Ae[Mr+16>>2]=F*wi,Ae[Mr+20>>2]=ot,Ae[Mr+36>>2]=0,Ae[Mr+40>>2]=0,Ae[Mr+44>>2]=t.canvas.width,Ae[Mr+48>>2]=t.canvas.height,Ae[Mr+56>>2]=1,Ae[Yr>>2]=-2042224636,Ae[Yr+4>>2]=0,wt[Yr+8>>0]=wi*8,wt[Yr+9>>0]=wi,Ae[Yr+12>>2]=bt||255,Ae[Yr+16>>2]=Bt||65280,Ae[Yr+20>>2]=Ot||16711680,Ae[Yr+24>>2]=wr||4278190080,Et.GL=Et.GL||_r;var m;Pe?m=t.canvas:(Et.canvasPool.length>0?m=Et.canvasPool.pop():m=document.createElement("canvas"),m.width=F,m.height=X);var xr={antialias:Et.glAttributes[13]!=0,depth:Et.glAttributes[6]>0,stencil:Et.glAttributes[7]>0,alpha:Et.glAttributes[3]>0},h=pt.createContext(m,_r,Pe,xr);return Et.surfaces[Mr]={width:F,height:X,canvas:m,ctx:h,surf:Mr,buffer:ot,pixelFormat:Yr,alpha:255,flags:ce,locked:0,usePageCanvas:Pe,source:tt,isFlagSet:function(P){return ce&P}},Mr},copyIndexedColorData:function(F,X,ce,Pe,tt){if(F.colors){var bt=t.canvas.width,Bt=t.canvas.height,Ot=X||0,wr=ce||0,pr=(Pe||bt-Ot)+Ot,vr=(tt||Bt-wr)+wr,_r=F.buffer;F.image.data32||(F.image.data32=new Uint32Array(F.image.data.buffer));for(var Mr=F.image.data32,Yr=F.colors32,wi=wr;wi<vr;++wi)for(var ot=wi*bt,m=Ot;m<pr;++m)Mr[ot+m]=Yr[be[_r+ot+m>>0]]}},freeSurface:function(F){var X=F+56,ce=Ae[X>>2];if(ce>1){Ae[X>>2]=ce-1;return}var Pe=Et.surfaces[F];!Pe.usePageCanvas&&Pe.canvas&&Et.canvasPool.push(Pe.canvas),Pe.buffer&&Wl(Pe.buffer),Wl(Pe.pixelFormat),Wl(F),Et.surfaces[F]=null,F===Et.screen&&(Et.screen=null)},blitSurface:function(F,X,ce,Pe,tt){var bt=Et.surfaces[F],Bt=Et.surfaces[ce],Ot,wr;if(X?Ot=Et.loadRect(X):Ot={x:0,y:0,w:bt.width,h:bt.height},Pe?wr=Et.loadRect(Pe):wr={x:0,y:0,w:bt.width,h:bt.height},Bt.clipRect){var pr=!tt||Ot.w===0?1:Ot.w/wr.w,vr=!tt||Ot.h===0?1:Ot.h/wr.h;wr=Et.intersectionOfRects(Bt.clipRect,wr),Ot.w=wr.w*pr,Ot.h=wr.h*vr,Pe&&Et.updateRect(Pe,wr)}var _r,Mr;if(tt?(_r=wr.w,Mr=wr.h):(_r=Ot.w,Mr=Ot.h),Ot.w===0||Ot.h===0||_r===0||Mr===0)return 0;var Yr=Bt.ctx.globalAlpha;return Bt.ctx.globalAlpha=bt.alpha/255,Bt.ctx.drawImage(bt.canvas,Ot.x,Ot.y,Ot.w,Ot.h,wr.x,wr.y,_r,Mr),Bt.ctx.globalAlpha=Yr,ce!=Et.screen&&(N("WARNING: copying canvas data to memory for compatibility"),$r(ce),Bt.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(F){function X(){for(var vr in Et.keyboardMap)Et.events.push({type:"keyup",keyCode:Et.keyboardMap[vr]})}switch(F.type){case"touchstart":case"touchmove":{F.preventDefault();var ce=[];if(F.type==="touchstart")for(var Pe=0;Pe<F.touches.length;Pe++){var tt=F.touches[Pe];Et.downFingers[tt.identifier]!=!0&&(Et.downFingers[tt.identifier]=!0,ce.push(tt))}else ce=F.touches;var bt=ce[0];if(bt){F.type=="touchstart"&&(Et.DOMButtons[0]=1);var Bt;switch(F.type){case"touchstart":Bt="mousedown";break;case"touchmove":Bt="mousemove";break}var Ot={type:Bt,button:0,pageX:bt.clientX,pageY:bt.clientY};Et.events.push(Ot)}for(var Pe=0;Pe<ce.length;Pe++){var tt=ce[Pe];Et.events.push({type:F.type,touch:tt})}break}case"touchend":{F.preventDefault();for(var Pe=0;Pe<F.changedTouches.length;Pe++){var tt=F.changedTouches[Pe];Et.downFingers[tt.identifier]===!0&&delete Et.downFingers[tt.identifier]}var Ot={type:"mouseup",button:0,pageX:F.changedTouches[0].clientX,pageY:F.changedTouches[0].clientY};Et.DOMButtons[0]=0,Et.events.push(Ot);for(var Pe=0;Pe<F.changedTouches.length;Pe++){var tt=F.changedTouches[Pe];Et.events.push({type:"touchend",touch:tt})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var wr=-pt.getMouseWheelDelta(F);wr=wr==0?0:wr>0?Math.max(wr,1):Math.min(wr,-1);var pr=wr>0?3:4;Et.events.push({type:"mousedown",button:pr,pageX:F.pageX,pageY:F.pageY}),Et.events.push({type:"mouseup",button:pr,pageX:F.pageX,pageY:F.pageY}),Et.events.push({type:"wheel",deltaX:0,deltaY:wr}),F.preventDefault();break;case"mousemove":if(Et.DOMButtons[0]===1&&Et.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:F.pageX,pageY:F.pageY}}),pt.pointerLock&&("mozMovementX"in F&&(F.movementX=F.mozMovementX,F.movementY=F.mozMovementY),F.movementX==0&&F.movementY==0)){F.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((F.type!=="keydown"||!$i()&&!Et.textInput||F.keyCode===8||F.keyCode===9)&&F.preventDefault(),F.type=="mousedown")Et.DOMButtons[F.button]=1,Et.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:F.pageX,pageY:F.pageY}});else if(F.type=="mouseup"){if(!Et.DOMButtons[F.button])return;Et.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:F.pageX,pageY:F.pageY}}),Et.DOMButtons[F.button]=0}F.type==="keydown"||F.type==="mousedown"?Et.canRequestFullscreen=!0:(F.type==="keyup"||F.type==="mouseup")&&(Et.canRequestFullscreen=!1),F.type==="keypress"&&Et.savedKeydown?(Et.savedKeydown.keypressCharCode=F.charCode,Et.savedKeydown=null):F.type==="keydown"&&(Et.savedKeydown=F),(F.type!=="keypress"||Et.textInput)&&Et.events.push(F);break;case"mouseout":for(var Pe=0;Pe<3;Pe++)Et.DOMButtons[Pe]&&(Et.events.push({type:"mouseup",button:Pe,pageX:F.pageX,pageY:F.pageY}),Et.DOMButtons[Pe]=0);F.preventDefault();break;case"focus":Et.events.push(F),F.preventDefault();break;case"blur":Et.events.push(F),X(),F.preventDefault();break;case"visibilitychange":Et.events.push({type:"visibilitychange",visible:!document.hidden}),X(),F.preventDefault();break;case"unload":pt.mainLoop.runner&&(Et.events.push(F),pt.mainLoop.runner());return;case"resize":Et.events.push(F),F.preventDefault&&F.preventDefault();break}Et.events.length>=1e4&&(A("SDL event queue full, dropping events"),Et.events=Et.events.slice(0,1e4))},lookupKeyCodeForEvent:function(F){var X=F.keyCode;return X>=65&&X<=90?X+=32:(X=Et.keyCodes[F.keyCode]||F.keyCode,F.location===2&&X>=1248&&X<=1251&&(X+=4)),X},handleEvent:function(F){if(!F.handled)switch(F.handled=!0,F.type){case"touchstart":case"touchend":case"touchmove":{pt.calculateMouseEvent(F);break}case"keydown":case"keyup":{var X=F.type==="keydown",ce=Et.lookupKeyCodeForEvent(F);wt[Et.keyboardState+ce>>0]=X,Et.modState=(wt[Et.keyboardState+1248>>0]?64:0)|(wt[Et.keyboardState+1249>>0]?1:0)|(wt[Et.keyboardState+1250>>0]?256:0)|(wt[Et.keyboardState+1252>>0]?128:0)|(wt[Et.keyboardState+1253>>0]?2:0)|(wt[Et.keyboardState+1254>>0]?512:0),X?Et.keyboardMap[ce]=F.keyCode:delete Et.keyboardMap[ce];break}case"mousedown":case"mouseup":F.type=="mousedown"?Et.buttonState|=1<<F.button:F.type=="mouseup"&&(Et.buttonState&=~(1<<F.button));case"mousemove":{pt.calculateMouseEvent(F);break}}},flushEventsToHandler:function(){},pollEvent:function(F){if(Et.initFlags&512&&Et.joystickEventState&&Et.queryJoysticks(),F){for(;Et.events.length>0;)if(Et.makeCEvent(Et.events.shift(),F)!==!1)return 1;return 0}else return Et.events.length>0},makeCEvent:function(F,X){if(typeof F=="number"){bu(X,F,28),Wl(F);return}switch(Et.handleEvent(F),F.type){case"keydown":case"keyup":{var ce=F.type==="keydown",Pe=Et.lookupKeyCodeForEvent(F),tt;Pe>=1024?tt=Pe-1024:tt=Et.scanCodes[Pe]||Pe,Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],wt[X+8>>0]=ce?1:0,wt[X+9>>0]=0,Ae[X+12>>2]=tt,Ae[X+16>>2]=Pe,Be[X+20>>1]=Et.modState,Ae[X+24>>2]=F.keypressCharCode||Pe;break}case"keypress":{Ae[X>>2]=Et.DOMEventToSDLEvent[F.type];for(var bt=Kn(String.fromCharCode(F.charCode)),Bt=0;Bt<bt.length;++Bt)wt[X+(8+Bt)>>0]=bt[Bt];break}case"mousedown":case"mouseup":case"mousemove":{if(F.type!="mousemove"){var ce=F.type==="mousedown";Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=0,Ae[X+8>>2]=0,Ae[X+12>>2]=0,wt[X+16>>0]=F.button+1,wt[X+17>>0]=ce?1:0,Ae[X+20>>2]=pt.mouseX,Ae[X+24>>2]=pt.mouseY}else Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=0,Ae[X+8>>2]=0,Ae[X+12>>2]=0,Ae[X+16>>2]=Et.buttonState,Ae[X+20>>2]=pt.mouseX,Ae[X+24>>2]=pt.mouseY,Ae[X+28>>2]=pt.mouseMovementX,Ae[X+32>>2]=pt.mouseMovementY;break}case"wheel":{Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+16>>2]=F.deltaX,Ae[X+20>>2]=F.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Ot=F.touch;if(!pt.touches[Ot.identifier])break;var wr=t.canvas.width,pr=t.canvas.height,vr=pt.touches[Ot.identifier].x/wr,_r=pt.touches[Ot.identifier].y/pr,Mr=pt.lastTouches[Ot.identifier].x/wr,Yr=pt.lastTouches[Ot.identifier].y/pr,wi=vr-Mr,ot=_r-Yr;if(Ot.deviceID===void 0&&(Ot.deviceID=Et.TOUCH_DEFAULT_ID),wi===0&&ot===0&&F.type==="touchmove")return!1;Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=jr(),Rn=[Ot.deviceID>>>0,(un=Ot.deviceID,+_i(un)>=1?un>0?(ji(+Nr(un/4294967296),4294967295)|0)>>>0:~~+Hi((un-+(~~un>>>0))/4294967296)>>>0:0)],Ae[X+8>>2]=Rn[0],Ae[X+12>>2]=Rn[1],Rn=[Ot.identifier>>>0,(un=Ot.identifier,+_i(un)>=1?un>0?(ji(+Nr(un/4294967296),4294967295)|0)>>>0:~~+Hi((un-+(~~un>>>0))/4294967296)>>>0:0)],Ae[X+16>>2]=Rn[0],Ae[X+20>>2]=Rn[1],Nt[X+24>>2]=vr,Nt[X+28>>2]=_r,Nt[X+32>>2]=wi,Nt[X+36>>2]=ot,Ot.force!==void 0?Nt[X+40>>2]=Ot.force:Nt[X+40>>2]=F.type=="touchend"?0:1;break}case"unload":{Ae[X>>2]=Et.DOMEventToSDLEvent[F.type];break}case"resize":{Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=F.w,Ae[X+8>>2]=F.h;break}case"joystick_button_up":case"joystick_button_down":{var m=F.type==="joystick_button_up"?0:1;Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],wt[X+4>>0]=F.index,wt[X+5>>0]=F.button,wt[X+6>>0]=m;break}case"joystick_axis_motion":{Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],wt[X+4>>0]=F.index,wt[X+5>>0]=F.axis,Ae[X+8>>2]=Et.joystickAxisValueConversion(F.value);break}case"focus":{var xr=12;Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=0,wt[X+8>>0]=xr;break}case"blur":{var h=13;Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=0,wt[X+8>>0]=h;break}case"visibilitychange":{var P=1,ci=2,Oi=F.visible?P:ci;Ae[X>>2]=Et.DOMEventToSDLEvent[F.type],Ae[X+4>>2]=0,wt[X+8>>0]=Oi;break}default:throw"Unhandled SDL event: "+F.type}},makeFontString:function(F,X){return X.charAt(0)!="'"&&X.charAt(0)!='"'&&(X='"'+X+'"'),F+"px "+X+", serif"},estimateTextWidth:function(F,X){var ce=F.size,Pe=Et.makeFontString(ce,F.name),tt=Qi();tt.font=Pe;var bt=tt.measureText(X).width|0;return bt},allocateChannels:function(F){if(!(Et.numChannels&&Et.numChannels>=F&&F!=0)){Et.numChannels=F,Et.channels=[];for(var X=0;X<F;X++)Et.channels[X]={audio:null,volume:1}}},setGetVolume:function(F,X){if(!F)return 0;var ce=F.volume*128;if(X!=-1&&(F.volume=Math.min(Math.max(X,0),128)/128,F.audio))try{F.audio.volume=F.volume,F.audio.webAudioGainNode&&(F.audio.webAudioGainNode.gain.value=F.volume)}catch(Pe){A("setGetVolume failed to set audio volume: "+Pe)}return ce},setPannerPosition:function(F,X,ce,Pe){F&&F.audio&&F.audio.webAudioPannerNode&&F.audio.webAudioPannerNode.setPosition(X,ce,Pe)},playWebAudio:function(F){if(F&&!F.webAudioNode&&Et.webAudioAvailable())try{var X=F.resource.webAudio;if(F.paused=!1,!X.decodedBuffer){X.onDecodeComplete===void 0&&Ni("Cannot play back audio object that was not loaded"),X.onDecodeComplete.push(function(){F.paused||Et.playWebAudio(F)});return}F.webAudioNode=Et.audioContext.createBufferSource(),F.webAudioNode.buffer=X.decodedBuffer,F.webAudioNode.loop=F.loop,F.webAudioNode.onended=function(){F.onended()},F.webAudioPannerNode=Et.audioContext.createPanner(),F.webAudioPannerNode.setPosition(0,0,-.5),F.webAudioPannerNode.panningModel="equalpower",F.webAudioGainNode=Et.audioContext.createGain(),F.webAudioGainNode.gain.value=F.volume,F.webAudioNode.connect(F.webAudioPannerNode),F.webAudioPannerNode.connect(F.webAudioGainNode),F.webAudioGainNode.connect(Et.audioContext.destination),F.webAudioNode.start(0,F.currentPosition),F.startTime=Et.audioContext.currentTime-F.currentPosition}catch(ce){A("playWebAudio failed: "+ce)}},pauseWebAudio:function(F){if(F){if(F.webAudioNode)try{F.currentPosition=(Et.audioContext.currentTime-F.startTime)%F.resource.webAudio.decodedBuffer.duration,F.webAudioNode.onended=void 0,F.webAudioNode.stop(0),F.webAudioNode=void 0}catch(X){A("pauseWebAudio failed: "+X)}F.paused=!0}},openAudioContext:function(){Et.audioContext||(typeof AudioContext<"u"?Et.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Et.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Et.audioContext},fillWebAudioBufferFromHeap:function(F,X,ce){for(var Pe=Ci(),tt=Pe.channels,bt=0;bt<tt;++bt){var Bt=ce.getChannelData(bt);if(Bt.length!=X)throw"Web Audio output buffer length mismatch! Destination size: "+Bt.length+" samples vs expected "+X+" samples!";if(Pe.format==32784)for(var Ot=0;Ot<X;++Ot)Bt[Ot]=Be[F+(Ot*tt+bt)*2>>1]/32768;else if(Pe.format==8)for(var Ot=0;Ot<X;++Ot){var wr=wt[F+(Ot*tt+bt)>>0];Bt[Ot]=(wr>=0?wr-128:wr+128)/128}else if(Pe.format==33056)for(var Ot=0;Ot<X;++Ot)Bt[Ot]=Nt[F+(Ot*tt+bt)*4>>2];else throw"Invalid SDL audio format "+Pe.format+"!"}},debugSurface:function(F){console.log("dumping surface "+[F.surf,F.source,F.width,F.height]);for(var X=F.ctx.getImageData(0,0,F.width,F.height),ce=X.data,Pe=Math.min(F.width,F.height),tt=0;tt<Pe;tt++)console.log("   diagonal "+tt+":"+[ce[tt*F.width*4+tt*4+0],ce[tt*F.width*4+tt*4+1],ce[tt*F.width*4+tt*4+2],ce[tt*F.width*4+tt*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(F,X){for(var ce=new Array(X.buttons.length),Pe=0;Pe<X.buttons.length;Pe++)ce[Pe]=Et.getJoystickButtonState(X.buttons[Pe]);Et.lastJoystickState[F]={buttons:ce,axes:X.axes.slice(0),timestamp:X.timestamp,index:X.index,id:X.id}},getJoystickButtonState:function(F){return typeof F=="object"?F.pressed:F>0},queryJoysticks:function(){for(var F in Et.lastJoystickState){var X=Et.getGamepad(F-1),ce=Et.lastJoystickState[F];if(typeof X>"u"||X===null)return;if(typeof X.timestamp!="number"||X.timestamp!==ce.timestamp||!X.timestamp){var Pe;for(Pe=0;Pe<X.buttons.length;Pe++){var tt=Et.getJoystickButtonState(X.buttons[Pe]);tt!==ce.buttons[Pe]&&Et.events.push({type:tt?"joystick_button_down":"joystick_button_up",joystick:F,index:F-1,button:Pe})}for(Pe=0;Pe<X.axes.length;Pe++)X.axes[Pe]!==ce.axes[Pe]&&Et.events.push({type:"joystick_axis_motion",joystick:F,index:F-1,axis:Pe,value:X.axes[Pe]});Et.recordJoystickState(F,X)}}},joystickAxisValueConversion:function(F){return F=Math.min(1,Math.max(F,-1)),Math.ceil((F+1)*32767.5-32768)},getGamepads:function(){var F=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return F!==void 0?F.apply(navigator):[]},getGamepad:function(F){var X=Et.getGamepads();return X.length>F&&F>=0?X[F]:null}};function en(F,X,ce,Pe,tt,bt,Bt,Ot){return Et.makeSurface(X,ce,F,!1,"CreateRGBSurface",tt,bt,Bt,Ot)}function Sn(F){}function Vn(F){F&&Et.freeSurface(F)}function En(F){if(Et.startTime=Date.now(),Et.initFlags=F,!t.doNotCaptureKeyboard){var X=t.keyboardListeningElement||document;X.addEventListener("keydown",Et.receiveEvent),X.addEventListener("keyup",Et.receiveEvent),X.addEventListener("keypress",Et.receiveEvent),window.addEventListener("focus",Et.receiveEvent),window.addEventListener("blur",Et.receiveEvent),document.addEventListener("visibilitychange",Et.receiveEvent)}return window.addEventListener("unload",Et.receiveEvent),Et.keyboardState=el(65536),Hu(Et.keyboardState,0,65536),Et.DOMEventToSDLEvent.keydown=768,Et.DOMEventToSDLEvent.keyup=769,Et.DOMEventToSDLEvent.keypress=771,Et.DOMEventToSDLEvent.mousedown=1025,Et.DOMEventToSDLEvent.mouseup=1026,Et.DOMEventToSDLEvent.mousemove=1024,Et.DOMEventToSDLEvent.wheel=1027,Et.DOMEventToSDLEvent.touchstart=1792,Et.DOMEventToSDLEvent.touchend=1793,Et.DOMEventToSDLEvent.touchmove=1794,Et.DOMEventToSDLEvent.unload=256,Et.DOMEventToSDLEvent.resize=28673,Et.DOMEventToSDLEvent.visibilitychange=512,Et.DOMEventToSDLEvent.focus=512,Et.DOMEventToSDLEvent.blur=512,Et.DOMEventToSDLEvent.joystick_axis_motion=1536,Et.DOMEventToSDLEvent.joystick_button_down=1539,Et.DOMEventToSDLEvent.joystick_button_up=1540,0}function On(F){var X=F.getExtension("ANGLE_instanced_arrays");if(X)return F.vertexAttribDivisor=function(ce,Pe){X.vertexAttribDivisorANGLE(ce,Pe)},F.drawArraysInstanced=function(ce,Pe,tt,bt){X.drawArraysInstancedANGLE(ce,Pe,tt,bt)},F.drawElementsInstanced=function(ce,Pe,tt,bt,Bt){X.drawElementsInstancedANGLE(ce,Pe,tt,bt,Bt)},1}function sa(F){var X=F.getExtension("OES_vertex_array_object");if(X)return F.createVertexArray=function(){return X.createVertexArrayOES()},F.deleteVertexArray=function(ce){X.deleteVertexArrayOES(ce)},F.bindVertexArray=function(ce){X.bindVertexArrayOES(ce)},F.isVertexArray=function(ce){return X.isVertexArrayOES(ce)},1}function tn(F){var X=F.getExtension("WEBGL_draw_buffers");if(X)return F.drawBuffers=function(ce,Pe){X.drawBuffersWEBGL(ce,Pe)},1}function Bo(F){return!!(F.multiDrawWebgl=F.getExtension("WEBGL_multi_draw"))}var fn={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(X){fn.lastError||(fn.lastError=X)},getNewId:function(F){for(var X=fn.counter++,ce=F.length;ce<X;ce++)F[ce]=null;return X},getSource:function(F,X,ce,Pe){for(var tt="",bt=0;bt<X;++bt){var Bt=Pe?Ae[Pe+bt*4>>2]:-1;tt+=qe(Ae[ce+bt*4>>2],Bt<0?void 0:Bt)}return tt},createContext:function(F,X){var ce=F.getContext("webgl",X)||F.getContext("experimental-webgl",X);if(!ce)return 0;var Pe=fn.registerContext(ce,X);return Pe},registerContext:function(F,X){var ce=fn.getNewId(fn.contexts),Pe={handle:ce,attributes:X,version:X.majorVersion,GLctx:F};return Pe.cannotHandleOffsetsInUniformArrayViews=function(tt){function bt(pr,vr){var _r=tt.createShader(vr);return tt.shaderSource(_r,pr),tt.compileShader(_r),_r}try{var Bt=tt.createProgram();tt.attachShader(Bt,bt("attribute vec4 p;void main(){gl_Position=p;}",35633)),tt.attachShader(Bt,bt("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),tt.linkProgram(Bt);var Ot=new Float32Array(8);Ot[4]=1,tt.useProgram(Bt);var wr=tt.getUniformLocation(Bt,"u");return tt.uniform4fv(wr,Ot.subarray(4,8)),!tt.getUniform(Bt,wr)[0]}catch{return!1}}(),F.canvas&&(F.canvas.GLctxObject=Pe),fn.contexts[ce]=Pe,(typeof X.enableExtensionsByDefault>"u"||X.enableExtensionsByDefault)&&fn.initExtensions(Pe),ce},makeContextCurrent:function(F){return fn.currentContext=fn.contexts[F],t.ctx=Da=fn.currentContext&&fn.currentContext.GLctx,!(F&&!Da)},getContext:function(F){return fn.contexts[F]},deleteContext:function(F){fn.currentContext===fn.contexts[F]&&(fn.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(fn.contexts[F].GLctx.canvas),fn.contexts[F]&&fn.contexts[F].GLctx.canvas&&(fn.contexts[F].GLctx.canvas.GLctxObject=void 0),fn.contexts[F]=null},initExtensions:function(F){if(F||(F=fn.currentContext),!F.initExtensionsDone){F.initExtensionsDone=!0;var X=F.GLctx;On(X),sa(X),tn(X),X.disjointTimerQueryExt=X.getExtension("EXT_disjoint_timer_query"),Bo(X);var ce=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],Pe=X.getSupportedExtensions()||[];Pe.forEach(function(tt){ce.indexOf(tt)!=-1&&X.getExtension(tt)})}},populateUniformTable:function(F){for(var X=fn.programs[F],ce=fn.programInfos[F]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},Pe=ce.uniforms,tt=Da.getProgramParameter(X,35718),bt=0;bt<tt;++bt){var Bt=Da.getActiveUniform(X,bt),Ot=Bt.name;ce.maxUniformLength=Math.max(ce.maxUniformLength,Ot.length+1),Ot.slice(-1)=="]"&&(Ot=Ot.slice(0,Ot.lastIndexOf("[")));var wr=Da.getUniformLocation(X,Ot);if(wr){var pr=fn.getNewId(fn.uniforms);Pe[Ot]=[Bt.size,pr],fn.uniforms[pr]=wr;for(var vr=1;vr<Bt.size;++vr){var _r=Ot+"["+vr+"]";wr=Da.getUniformLocation(X,_r),pr=fn.getNewId(fn.uniforms),fn.uniforms[pr]=wr}}}}};function Ko(F,X,ce,Pe){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(bt){t.canvas.addEventListener(bt,Et.receiveEvent,!0)});var tt=t.canvas;return F==0&&X==0&&(F=tt.width,X=tt.height),Et.addedResizeListener||(Et.addedResizeListener=!0,pt.resizeListeners.push(function(bt,Bt){Et.settingVideoMode||Et.receiveEvent({type:"resize",w:bt,h:Bt})})),Et.settingVideoMode=!0,pt.setCanvasSize(F,X),Et.settingVideoMode=!1,Et.screen&&(Et.freeSurface(Et.screen),we(!Et.screen)),Et.GL&&(Pe=Pe|67108864),Et.screen=Et.makeSurface(F,X,Pe,!0,"screen"),Et.screen}function Xa(F){we(!Et.GL);var X=Et.surfaces[F];if(!(!X.locked||--X.locked>0)){if(X.isFlagSet(2097152))Et.copyIndexedColorData(X);else if(X.colors)for(var Yr=t.canvas.width,wi=t.canvas.height,ot=X.buffer,ce=X.image.data,m=X.colors,xr=0;xr<wi;xr++){for(var h=xr*Yr*4,P=0;P<Yr;P++){var wr=be[ot++>>0]*4,ci=h+P*4;ce[ci]=m[wr],ce[ci+1]=m[wr+1],ce[ci+2]=m[wr+2]}ot+=Yr*3}else{var ce=X.image.data,Pe=X.buffer;we(Pe%4==0,"Invalid buffer offset: "+Pe);var tt=Pe>>2,bt=0,Bt=F==Et.screen,Ot;if(typeof CanvasPixelArray<"u"&&ce instanceof CanvasPixelArray)for(Ot=ce.length;bt<Ot;){var wr=Ae[tt];ce[bt]=wr&255,ce[bt+1]=wr>>8&255,ce[bt+2]=wr>>16&255,ce[bt+3]=Bt?255:wr>>24&255,tt++,bt+=4}else{var pr=new Uint32Array(ce.buffer);if(Bt&&Et.defaults.opaqueFrontBuffer){Ot=pr.length,pr.set(Ae.subarray(tt,tt+Ot));var vr=new Uint8Array(ce.buffer),_r=3,Mr=_r+4*Ot;if(Ot%8==0)for(;_r<Mr;)vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0,vr[_r]=255,_r=_r+4|0;else for(;_r<Mr;)vr[_r]=255,_r=_r+4|0}else pr.set(Ae.subarray(tt,tt+pr.length))}}X.ctx.putImageData(X.image,0,0)}}function qu(F,X,ce,Pe){return Et.blitSurface(F,X,ce,Pe,!1)}function pa(){return 12032}var ts=Uint8Array.prototype.copyWithin?function(F,X,ce){be.copyWithin(F,X,X+ce)}:function(F,X,ce){be.set(be.subarray(X,X+ce),F)};function Vu(){return be.length}function Gl(F){try{return te.grow(F-Xe.byteLength+65535>>>16),zt(te.buffer),1}catch{}}function Ao(F){F=F>>>0;var X=Vu(),ce=65536,Pe=2147483648;if(F>Pe)return!1;for(var tt=16777216,bt=1;bt<=4;bt*=2){var Bt=X*(1+.2/bt);Bt=Math.min(Bt,F+100663296);var Ot=Math.min(Pe,mt(Math.max(tt,F,Bt),ce)),wr=Gl(Ot);if(wr)return!0}return!1}var Ya={mappings:{},buffers:[null,[],[]],printChar:function(F,X){var ce=Ya.buffers[F];X===0||X===10?((F===1?b:A)(Me(ce,0)),ce.length=0):ce.push(X)},varargs:void 0,get:function(){Ya.varargs+=4;var F=Ae[Ya.varargs-4>>2];return F},getStr:function(F){var X=qe(F);return X},get64:function(F,X){return F}};function Aa(F){return 0}function Jo(F,X,ce,Pe,tt){}function Go(F,X,ce,Pe){for(var tt=0,bt=0;bt<ce;bt++){for(var Bt=Ae[X+bt*8>>2],Ot=Ae[X+(bt*8+4)>>2],wr=0;wr<Ot;wr++)Ya.printChar(F,be[Bt+wr]);tt+=Ot}return Ae[Pe>>2]=tt,0}var la=function(F,X,ce,Pe){F||(F=this),this.parent=F,this.mount=F.mount,this.mounted=null,this.id=pe.nextInode++,this.name=X,this.mode=ce,this.node_ops={},this.stream_ops={},this.rdev=Pe},Js=365,Ma=146;Object.defineProperties(la.prototype,{read:{get:function(){return(this.mode&Js)===Js},set:function(F){F?this.mode|=Js:this.mode&=~Js}},write:{get:function(){return(this.mode&Ma)===Ma},set:function(F){F?this.mode|=Ma:this.mode&=~Ma}},isFolder:{get:function(){return pe.isDir(this.mode)}},isDevice:{get:function(){return pe.isChrdev(this.mode)}}}),pe.FSNode=la,pe.staticInit(),t.requestFullscreen=function(X,ce){pt.requestFullscreen(X,ce)},t.requestAnimationFrame=function(X){pt.requestAnimationFrame(X)},t.setCanvasSize=function(X,ce,Pe){pt.setCanvasSize(X,ce,Pe)},t.pauseMainLoop=function(){pt.mainLoop.pause()},t.resumeMainLoop=function(){pt.mainLoop.resume()},t.getUserMedia=function(){pt.getUserMedia()},t.createContext=function(X,ce,Pe,tt){return pt.createContext(X,ce,Pe,tt)};var Da;function Kn(F,X,ce){var Pe=ce>0?ce:yt(F)+1,tt=new Array(Pe),bt=it(F,tt,0,tt.length);return X&&(tt.length=bt),tt}function rs(F){for(var X=[],ce=0;ce<F.length;ce++){var Pe=F[ce];Pe>255&&(Pe&=255),X.push(String.fromCharCode(Pe))}return X.join("")}var Rs=typeof atob=="function"?atob:function(F){var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ce="",Pe,tt,bt,Bt,Ot,wr,pr,vr=0;F=F.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Bt=X.indexOf(F.charAt(vr++)),Ot=X.indexOf(F.charAt(vr++)),wr=X.indexOf(F.charAt(vr++)),pr=X.indexOf(F.charAt(vr++)),Pe=Bt<<2|Ot>>4,tt=(Ot&15)<<4|wr>>2,bt=(wr&3)<<6|pr,ce=ce+String.fromCharCode(Pe),wr!==64&&(ce=ce+String.fromCharCode(tt)),pr!==64&&(ce=ce+String.fromCharCode(bt));while(vr<F.length);return ce};function oa(F){try{for(var X=Rs(F),ce=new Uint8Array(X.length),Pe=0;Pe<X.length;++Pe)ce[Pe]=X.charCodeAt(Pe);return ce}catch{throw new Error("Converting base64 string to bytes failed.")}}function Qs(F){if(fr(F))return oa(F.slice(kt.length))}var Os={SDL_CreateRGBSurface:en,SDL_Flip:Sn,SDL_FreeSurface:Vn,SDL_Init:En,SDL_LockSurface:$r,SDL_SetVideoMode:Ko,SDL_UnlockSurface:Xa,SDL_UpperBlit:qu,emscripten_get_sbrk_ptr:pa,emscripten_memcpy_big:ts,emscripten_resize_heap:Ao,fd_close:Aa,fd_seek:Jo,fd_write:Go,getTempRet0:G,memory:te,setTempRet0:$,table:_e};Zn();var bc=t.___wasm_call_ctors=function(){return(bc=t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)};t._WebpToSDL=function(){return(t._WebpToSDL=t.asm.WebpToSDL).apply(null,arguments)};var Hu=t._memset=function(){return(Hu=t._memset=t.asm.memset).apply(null,arguments)},bu=t._memcpy=function(){return(bu=t._memcpy=t.asm.memcpy).apply(null,arguments)},el=t._malloc=function(){return(el=t._malloc=t.asm.malloc).apply(null,arguments)},Wl=t._free=function(){return(Wl=t._free=t.asm.free).apply(null,arguments)},$u=t.___errno_location=function(){return($u=t.___errno_location=t.asm.__errno_location).apply(null,arguments)},wc=t.stackSave=function(){return(wc=t.stackSave=t.asm.stackSave).apply(null,arguments)},xc=t.stackRestore=function(){return(xc=t.stackRestore=t.asm.stackRestore).apply(null,arguments)},Zl=t.stackAlloc=function(){return(Zl=t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)};t.dynCall_vii=function(){return(t.dynCall_vii=t.asm.dynCall_vii).apply(null,arguments)},t.dynCall_vi=function(){return(t.dynCall_vi=t.asm.dynCall_vi).apply(null,arguments)},t.dynCall_ii=function(){return(t.dynCall_ii=t.asm.dynCall_ii).apply(null,arguments)},t.dynCall_iii=function(){return(t.dynCall_iii=t.asm.dynCall_iii).apply(null,arguments)},t.dynCall_iiii=function(){return(t.dynCall_iiii=t.asm.dynCall_iiii).apply(null,arguments)},t.dynCall_iiiiiii=function(){return(t.dynCall_iiiiiii=t.asm.dynCall_iiiiiii).apply(null,arguments)},t.dynCall_viiii=function(){return(t.dynCall_viiii=t.asm.dynCall_viiii).apply(null,arguments)},t.dynCall_viii=function(){return(t.dynCall_viii=t.asm.dynCall_viii).apply(null,arguments)},t.dynCall_viiiiii=function(){return(t.dynCall_viiiiii=t.asm.dynCall_viiiiii).apply(null,arguments)},t.dynCall_viiiii=function(){return(t.dynCall_viiiii=t.asm.dynCall_viiiii).apply(null,arguments)},t.dynCall_viiiiiiiii=function(){return(t.dynCall_viiiiiiiii=t.asm.dynCall_viiiiiiiii).apply(null,arguments)},t.dynCall_jiiii=function(){return(t.dynCall_jiiii=t.asm.dynCall_jiiii).apply(null,arguments)},t.dynCall_jiji=function(){return(t.dynCall_jiji=t.asm.dynCall_jiji).apply(null,arguments)};var Fs=t.__growWasmMemory=function(){return(Fs=t.__growWasmMemory=t.asm.__growWasmMemory).apply(null,arguments)};t.cwrap=Ue;var tl;function Sl(F){this.name="ExitStatus",this.message="Program terminated with exit("+F+")",this.status=F}an=function F(){tl||wu(),tl||(an=F)};function wu(F){if(Ui>0||(ct(),Ui>0))return;function X(){tl||(tl=!0,t.calledRun=!0,!le&&(mr(),Jr(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),dr()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),X()},1)):X()}if(t.run=wu,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();wu(),this.Module=t,this.webpToSdl=t.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(F){t.canvas=F},this.Module.doNotCaptureKeyboard=!0}const jU=()=>new Promise(t=>requestAnimationFrame(t));class H1 extends Error{}const UU=t=>/\.webp.*$/i.test(t.src);class qU{constructor({webp:e=new BU,webpSupport:r=OU(),detectWebpImage:i=UU}={}){this.busy=!1,this.cache={},this.webp=e,this.webpSupport=r,this.detectWebpImage=i}async decode(e){if(this.busy)throw new H1("cannot decode when already busy");this.busy=!0;try{await jU();const r=document.createElement("canvas");return this.webp.setCanvas(r),this.webp.webpToSdl(e,e.length),this.busy=!1,r.toDataURL()}catch(r){throw this.busy=!1,r.name=H1.name,r.message=`failed to decode webp image: ${r.message}`,r}}async polyfillImage(e){if(await this.webpSupport)return;const{src:r}=e;if(this.detectWebpImage(e)){if(this.cache[r]){e.src=this.cache[r];return}try{const i=NU(r)?RU(r):await oA(r),o=await this.decode(i);e.src=this.cache[r]=o}catch(i){throw i.name=H1.name,i.message=`failed to polyfill image "${r}": ${i.message}`,i}}}async polyfillDocument({document:e=window.document}={}){if(await this.webpSupport)return null;for(const r of Array.from(e.querySelectorAll("img")))try{await this.polyfillImage(r)}catch(i){throw i.name=H1.name,i.message=`webp image polyfill failed for url "${r.src}": ${i}`,i}}clearCache(){this.cache={}}}var P2=2*Math.PI*6378137/2;function VU(t){return t=t||256,2*Math.PI*6378137/t}function HU(t,e,r={enable:!0,decimal:1}){t=mv(t,e);var i=t[0],o=t[1],u=i*P2/180,c=Math.log(Math.tan((90+o)*Math.PI/360))/(Math.PI/180);return c=c*P2/180,r.enable&&(u=Number(u.toFixed(r.decimal)),c=Number(c.toFixed(r.decimal))),[u,c]}function $U(t,e,r){var i=t[0],o=t[1],u=JU(e,r),c=(i+P2)/u,s=(o+P2)/u;return[c,s,e]}function GU(t,e,r){t=mv(t,r);var i=HU(t),o=$U(i,e);return ZU(o)}function WU(t,e,r){if(t=mv(t,r),e===0)return[0,0,0];var i=GU(t,e);return XU(i)}function ZU(t,e,r){e=e||256;var i=t[0],o=t[1],u=t[2];if(u===0)return[0,0,0];aA(u);var c=Math.ceil(i/e)-1,s=Math.ceil(o/e)-1;return c<0&&(c=0),s<0&&(s=0),[c,s,u]}function XU(t,e){YU(t,e);var r=t[0],i=t[1],o=t[2];if(o===0)return[0,0,0];var u=r,c=Math.pow(2,o)-1-i;return[u,c,o]}function YU(t,e){var r=t[0],i=t[1],o=t[2];if(e===!1)return t;if(o==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(i==null)throw new Error("<y> is required");return o=aA(o),t=KU(t),t}function KU(t){var e=t[0],r=t[1],i=t[2],o=Math.pow(2,i);return e=e%o,e<0&&(e=e+o),[e,r,i]}function aA(t){if(t===!1)return t;if(t==null)throw new Error("<zoom> is required");if(t<0)throw new Error("<zoom> cannot be less than 0");if(t>32)throw new Error("<zoom> cannot be greater than 32");return t}function mv(t,e){if(e===!1)return t;var r=eq(t[0]),i=QU(t[1]);return i>85&&(i=85),i<-85&&(i=-85),[r,i]}function JU(t,e){return VU(e)/Math.pow(2,t)}function QU(t){if(t==null)throw new Error("lat is required");return(t>90||t<-90)&&(t=t%180,t>90&&(t=-180+t),t<-90&&(t=180+t),t===0&&(t=0)),t}function eq(t){if(t==null)throw new Error("lng is required");return(t>180||t<-180)&&(t=t%360,t>180&&(t=-360+t),t<-180&&(t=360+t),t===0&&(t=0)),t}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const tq=4,fw=0,hw=1,rq=2;function Bd(t){let e=t.length;for(;--e>=0;)t[e]=0}const iq=0,sA=1,nq=2,oq=3,aq=258,gv=29,a1=256,$p=a1+1+gv,Sd=30,yv=19,lA=2*$p+1,wh=15,Bg=16,sq=7,_v=256,uA=16,cA=17,fA=18,Xy=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lq=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),hA=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uq=512,Cf=new Array(($p+2)*2);Bd(Cf);const Sp=new Array(Sd*2);Bd(Sp);const Gp=new Array(uq);Bd(Gp);const Wp=new Array(aq-oq+1);Bd(Wp);const vv=new Array(gv);Bd(vv);const M2=new Array(Sd);Bd(M2);function jg(t,e,r,i,o){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=o,this.has_stree=t&&t.length}let dA,pA,mA;function Ug(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const gA=t=>t<256?Gp[t]:Gp[256+(t>>>7)],Zp=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},fc=(t,e,r)=>{t.bi_valid>Bg-r?(t.bi_buf|=e<<t.bi_valid&65535,Zp(t,t.bi_buf),t.bi_buf=e>>Bg-t.bi_valid,t.bi_valid+=r-Bg):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},ef=(t,e,r)=>{fc(t,r[e*2],r[e*2+1])},yA=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},cq=t=>{t.bi_valid===16?(Zp(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},fq=(t,e)=>{const r=e.dyn_tree,i=e.max_code,o=e.stat_desc.static_tree,u=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,f=e.stat_desc.max_length;let y,b,A,I,C,N,O=0;for(I=0;I<=wh;I++)t.bl_count[I]=0;for(r[t.heap[t.heap_max]*2+1]=0,y=t.heap_max+1;y<lA;y++)b=t.heap[y],I=r[r[b*2+1]*2+1]+1,I>f&&(I=f,O++),r[b*2+1]=I,!(b>i)&&(t.bl_count[I]++,C=0,b>=s&&(C=c[b-s]),N=r[b*2],t.opt_len+=N*(I+C),u&&(t.static_len+=N*(o[b*2+1]+C)));if(O!==0){do{for(I=f-1;t.bl_count[I]===0;)I--;t.bl_count[I]--,t.bl_count[I+1]+=2,t.bl_count[f]--,O-=2}while(O>0);for(I=f;I!==0;I--)for(b=t.bl_count[I];b!==0;)A=t.heap[--y],!(A>i)&&(r[A*2+1]!==I&&(t.opt_len+=(I-r[A*2+1])*r[A*2],r[A*2+1]=I),b--)}},_A=(t,e,r)=>{const i=new Array(wh+1);let o=0,u,c;for(u=1;u<=wh;u++)o=o+r[u-1]<<1,i[u]=o;for(c=0;c<=e;c++){let s=t[c*2+1];s!==0&&(t[c*2]=yA(i[s]++,s))}},hq=()=>{let t,e,r,i,o;const u=new Array(wh+1);for(r=0,i=0;i<gv-1;i++)for(vv[i]=r,t=0;t<1<<Xy[i];t++)Wp[r++]=i;for(Wp[r-1]=i,o=0,i=0;i<16;i++)for(M2[i]=o,t=0;t<1<<u2[i];t++)Gp[o++]=i;for(o>>=7;i<Sd;i++)for(M2[i]=o<<7,t=0;t<1<<u2[i]-7;t++)Gp[256+o++]=i;for(e=0;e<=wh;e++)u[e]=0;for(t=0;t<=143;)Cf[t*2+1]=8,t++,u[8]++;for(;t<=255;)Cf[t*2+1]=9,t++,u[9]++;for(;t<=279;)Cf[t*2+1]=7,t++,u[7]++;for(;t<=287;)Cf[t*2+1]=8,t++,u[8]++;for(_A(Cf,$p+1,u),t=0;t<Sd;t++)Sp[t*2+1]=5,Sp[t*2]=yA(t,5);dA=new jg(Cf,Xy,a1+1,$p,wh),pA=new jg(Sp,u2,0,Sd,wh),mA=new jg(new Array(0),lq,0,yv,sq)},vA=t=>{let e;for(e=0;e<$p;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Sd;e++)t.dyn_dtree[e*2]=0;for(e=0;e<yv;e++)t.bl_tree[e*2]=0;t.dyn_ltree[_v*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bA=t=>{t.bi_valid>8?Zp(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},dw=(t,e,r,i)=>{const o=e*2,u=r*2;return t[o]<t[u]||t[o]===t[u]&&i[e]<=i[r]},qg=(t,e,r)=>{const i=t.heap[r];let o=r<<1;for(;o<=t.heap_len&&(o<t.heap_len&&dw(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!dw(e,i,t.heap[o],t.depth));)t.heap[r]=t.heap[o],r=o,o<<=1;t.heap[r]=i},pw=(t,e,r)=>{let i,o,u=0,c,s;if(t.sym_next!==0)do i=t.pending_buf[t.sym_buf+u++]&255,i+=(t.pending_buf[t.sym_buf+u++]&255)<<8,o=t.pending_buf[t.sym_buf+u++],i===0?ef(t,o,e):(c=Wp[o],ef(t,c+a1+1,e),s=Xy[c],s!==0&&(o-=vv[c],fc(t,o,s)),i--,c=gA(i),ef(t,c,r),s=u2[c],s!==0&&(i-=M2[c],fc(t,i,s)));while(u<t.sym_next);ef(t,_v,e)},Yy=(t,e)=>{const r=e.dyn_tree,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems;let c,s,f=-1,y;for(t.heap_len=0,t.heap_max=lA,c=0;c<u;c++)r[c*2]!==0?(t.heap[++t.heap_len]=f=c,t.depth[c]=0):r[c*2+1]=0;for(;t.heap_len<2;)y=t.heap[++t.heap_len]=f<2?++f:0,r[y*2]=1,t.depth[y]=0,t.opt_len--,o&&(t.static_len-=i[y*2+1]);for(e.max_code=f,c=t.heap_len>>1;c>=1;c--)qg(t,r,c);y=u;do c=t.heap[1],t.heap[1]=t.heap[t.heap_len--],qg(t,r,1),s=t.heap[1],t.heap[--t.heap_max]=c,t.heap[--t.heap_max]=s,r[y*2]=r[c*2]+r[s*2],t.depth[y]=(t.depth[c]>=t.depth[s]?t.depth[c]:t.depth[s])+1,r[c*2+1]=r[s*2+1]=y,t.heap[1]=y++,qg(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],fq(t,e),_A(r,f,t.bl_count)},mw=(t,e,r)=>{let i,o=-1,u,c=e[0*2+1],s=0,f=7,y=4;for(c===0&&(f=138,y=3),e[(r+1)*2+1]=65535,i=0;i<=r;i++)u=c,c=e[(i+1)*2+1],!(++s<f&&u===c)&&(s<y?t.bl_tree[u*2]+=s:u!==0?(u!==o&&t.bl_tree[u*2]++,t.bl_tree[uA*2]++):s<=10?t.bl_tree[cA*2]++:t.bl_tree[fA*2]++,s=0,o=u,c===0?(f=138,y=3):u===c?(f=6,y=3):(f=7,y=4))},gw=(t,e,r)=>{let i,o=-1,u,c=e[0*2+1],s=0,f=7,y=4;for(c===0&&(f=138,y=3),i=0;i<=r;i++)if(u=c,c=e[(i+1)*2+1],!(++s<f&&u===c)){if(s<y)do ef(t,u,t.bl_tree);while(--s!==0);else u!==0?(u!==o&&(ef(t,u,t.bl_tree),s--),ef(t,uA,t.bl_tree),fc(t,s-3,2)):s<=10?(ef(t,cA,t.bl_tree),fc(t,s-3,3)):(ef(t,fA,t.bl_tree),fc(t,s-11,7));s=0,o=u,c===0?(f=138,y=3):u===c?(f=6,y=3):(f=7,y=4)}},dq=t=>{let e;for(mw(t,t.dyn_ltree,t.l_desc.max_code),mw(t,t.dyn_dtree,t.d_desc.max_code),Yy(t,t.bl_desc),e=yv-1;e>=3&&t.bl_tree[hA[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},pq=(t,e,r,i)=>{let o;for(fc(t,e-257,5),fc(t,r-1,5),fc(t,i-4,4),o=0;o<i;o++)fc(t,t.bl_tree[hA[o]*2+1],3);gw(t,t.dyn_ltree,e-1),gw(t,t.dyn_dtree,r-1)},mq=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return fw;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return hw;for(r=32;r<a1;r++)if(t.dyn_ltree[r*2]!==0)return hw;return fw};let yw=!1;const gq=t=>{yw||(hq(),yw=!0),t.l_desc=new Ug(t.dyn_ltree,dA),t.d_desc=new Ug(t.dyn_dtree,pA),t.bl_desc=new Ug(t.bl_tree,mA),t.bi_buf=0,t.bi_valid=0,vA(t)},wA=(t,e,r,i)=>{fc(t,(iq<<1)+(i?1:0),3),bA(t),Zp(t,r),Zp(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},yq=t=>{fc(t,sA<<1,3),ef(t,_v,Cf),cq(t)},_q=(t,e,r,i)=>{let o,u,c=0;t.level>0?(t.strm.data_type===rq&&(t.strm.data_type=mq(t)),Yy(t,t.l_desc),Yy(t,t.d_desc),c=dq(t),o=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=o&&(o=u)):o=u=r+5,r+4<=o&&e!==-1?wA(t,e,r,i):t.strategy===tq||u===o?(fc(t,(sA<<1)+(i?1:0),3),pw(t,Cf,Sp)):(fc(t,(nq<<1)+(i?1:0),3),pq(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),pw(t,t.dyn_ltree,t.dyn_dtree)),vA(t),i&&bA(t)},vq=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Wp[r]+a1+1)*2]++,t.dyn_dtree[gA(e)*2]++),t.sym_next===t.sym_end);var bq=gq,wq=wA,xq=_q,kq=vq,Aq=yq,Sq={_tr_init:bq,_tr_stored_block:wq,_tr_flush_block:xq,_tr_tally:kq,_tr_align:Aq};const Eq=(t,e,r,i)=>{let o=t&65535|0,u=t>>>16&65535|0,c=0;for(;r!==0;){c=r>2e3?2e3:r,r-=c;do o=o+e[i++]|0,u=u+o|0;while(--c);o%=65521,u%=65521}return o|u<<16|0};var Xp=Eq;const Cq=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},Iq=new Uint32Array(Cq()),Lq=(t,e,r,i)=>{const o=Iq,u=i+r;t^=-1;for(let c=i;c<u;c++)t=t>>>8^o[(t^e[c])&255];return t^-1};var _l=Lq,Ph={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Oh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Tq,_tr_stored_block:Ky,_tr_flush_block:Pq,_tr_tally:th,_tr_align:Mq}=Sq,{Z_NO_FLUSH:rh,Z_PARTIAL_FLUSH:Dq,Z_FULL_FLUSH:zq,Z_FINISH:l0,Z_BLOCK:_w,Z_OK:Ul,Z_STREAM_END:vw,Z_STREAM_ERROR:sf,Z_DATA_ERROR:Nq,Z_BUF_ERROR:Vg,Z_DEFAULT_COMPRESSION:Rq,Z_FILTERED:Oq,Z_HUFFMAN_ONLY:$1,Z_RLE:Fq,Z_FIXED:Bq,Z_DEFAULT_STRATEGY:jq,Z_UNKNOWN:Uq,Z_DEFLATED:rm}=Oh,qq=9,Vq=15,Hq=8,$q=29,Gq=256,Jy=Gq+1+$q,Wq=30,Zq=19,Xq=2*Jy+1,Yq=15,Ro=3,Yf=258,lf=Yf+Ro+1,Kq=32,zd=42,bv=57,Qy=69,e_=73,t_=91,r_=103,xh=113,pp=666,Uu=1,jd=2,Mh=3,Ud=4,Jq=3,kh=(t,e)=>(t.msg=Ph[e],e),bw=t=>t*2-(t>4?9:0),Zf=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Qq=t=>{let e,r,i,o=t.w_size;e=t.hash_size,i=e;do r=t.head[--i],t.head[i]=r>=o?r-o:0;while(--e);e=o,i=e;do r=t.prev[--i],t.prev[i]=r>=o?r-o:0;while(--e)};let eV=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,ih=eV;const Uc=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},Gc=(t,e)=>{Pq(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Uc(t.strm)},ta=(t,e)=>{t.pending_buf[t.pending++]=e},up=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},i_=(t,e,r,i)=>{let o=t.avail_in;return o>i&&(o=i),o===0?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),r),t.state.wrap===1?t.adler=Xp(t.adler,e,o,r):t.state.wrap===2&&(t.adler=_l(t.adler,e,o,r)),t.next_in+=o,t.total_in+=o,o)},xA=(t,e)=>{let r=t.max_chain_length,i=t.strstart,o,u,c=t.prev_length,s=t.nice_match;const f=t.strstart>t.w_size-lf?t.strstart-(t.w_size-lf):0,y=t.window,b=t.w_mask,A=t.prev,I=t.strstart+Yf;let C=y[i+c-1],N=y[i+c];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do if(o=e,!(y[o+c]!==N||y[o+c-1]!==C||y[o]!==y[i]||y[++o]!==y[i+1])){i+=2,o++;do;while(y[++i]===y[++o]&&y[++i]===y[++o]&&y[++i]===y[++o]&&y[++i]===y[++o]&&y[++i]===y[++o]&&y[++i]===y[++o]&&y[++i]===y[++o]&&y[++i]===y[++o]&&i<I);if(u=Yf-(I-i),i=I-Yf,u>c){if(t.match_start=e,c=u,u>=s)break;C=y[i+c-1],N=y[i+c]}}while((e=A[e&b])>f&&--r!==0);return c<=t.lookahead?c:t.lookahead},Nd=t=>{const e=t.w_size;let r,i,o;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-lf)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Qq(t),i+=e),t.strm.avail_in===0)break;if(r=i_(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=Ro)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=ih(t,t.ins_h,t.window[o+1]);t.insert&&(t.ins_h=ih(t,t.ins_h,t.window[o+Ro-1]),t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Ro)););}while(t.lookahead<lf&&t.strm.avail_in!==0)},kA=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,i,o,u,c=0,s=t.strm.avail_in;do{if(i=65535,u=t.bi_valid+42>>3,t.strm.avail_out<u||(u=t.strm.avail_out-u,o=t.strstart-t.block_start,i>o+t.strm.avail_in&&(i=o+t.strm.avail_in),i>u&&(i=u),i<r&&(i===0&&e!==l0||e===rh||i!==o+t.strm.avail_in)))break;c=e===l0&&i===o+t.strm.avail_in?1:0,Ky(t,0,0,c),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,Uc(t.strm),o&&(o>i&&(o=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+o),t.strm.next_out),t.strm.next_out+=o,t.strm.avail_out-=o,t.strm.total_out+=o,t.block_start+=o,i-=o),i&&(i_(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(c===0);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),c?Ud:e!==rh&&e!==l0&&t.strm.avail_in===0&&t.strstart===t.block_start?jd:(u=t.window_size-t.strstart,t.strm.avail_in>u&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,u+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),u>t.strm.avail_in&&(u=t.strm.avail_in),u&&(i_(t.strm,t.window,t.strstart,u),t.strstart+=u,t.insert+=u>t.w_size-t.insert?t.w_size-t.insert:u),t.high_water<t.strstart&&(t.high_water=t.strstart),u=t.bi_valid+42>>3,u=t.pending_buf_size-u>65535?65535:t.pending_buf_size-u,r=u>t.w_size?t.w_size:u,o=t.strstart-t.block_start,(o>=r||(o||e===l0)&&e!==rh&&t.strm.avail_in===0&&o<=u)&&(i=o>u?u:o,c=e===l0&&t.strm.avail_in===0&&i===o?1:0,Ky(t,t.block_start,i,c),t.block_start+=i,Uc(t.strm)),c?Mh:Uu)},Hg=(t,e)=>{let r,i;for(;;){if(t.lookahead<lf){if(Nd(t),t.lookahead<lf&&e===rh)return Uu;if(t.lookahead===0)break}if(r=0,t.lookahead>=Ro&&(t.ins_h=ih(t,t.ins_h,t.window[t.strstart+Ro-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-lf&&(t.match_length=xA(t,r)),t.match_length>=Ro)if(i=th(t,t.strstart-t.match_start,t.match_length-Ro),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Ro){t.match_length--;do t.strstart++,t.ins_h=ih(t,t.ins_h,t.window[t.strstart+Ro-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ih(t,t.ins_h,t.window[t.strstart+1]);else i=th(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(Gc(t,!1),t.strm.avail_out===0))return Uu}return t.insert=t.strstart<Ro-1?t.strstart:Ro-1,e===l0?(Gc(t,!0),t.strm.avail_out===0?Mh:Ud):t.sym_next&&(Gc(t,!1),t.strm.avail_out===0)?Uu:jd},Jh=(t,e)=>{let r,i,o;for(;;){if(t.lookahead<lf){if(Nd(t),t.lookahead<lf&&e===rh)return Uu;if(t.lookahead===0)break}if(r=0,t.lookahead>=Ro&&(t.ins_h=ih(t,t.ins_h,t.window[t.strstart+Ro-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Ro-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-lf&&(t.match_length=xA(t,r),t.match_length<=5&&(t.strategy===Oq||t.match_length===Ro&&t.strstart-t.match_start>4096)&&(t.match_length=Ro-1)),t.prev_length>=Ro&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-Ro,i=th(t,t.strstart-1-t.prev_match,t.prev_length-Ro),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=o&&(t.ins_h=ih(t,t.ins_h,t.window[t.strstart+Ro-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Ro-1,t.strstart++,i&&(Gc(t,!1),t.strm.avail_out===0))return Uu}else if(t.match_available){if(i=th(t,0,t.window[t.strstart-1]),i&&Gc(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Uu}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=th(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Ro-1?t.strstart:Ro-1,e===l0?(Gc(t,!0),t.strm.avail_out===0?Mh:Ud):t.sym_next&&(Gc(t,!1),t.strm.avail_out===0)?Uu:jd},tV=(t,e)=>{let r,i,o,u;const c=t.window;for(;;){if(t.lookahead<=Yf){if(Nd(t),t.lookahead<=Yf&&e===rh)return Uu;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Ro&&t.strstart>0&&(o=t.strstart-1,i=c[o],i===c[++o]&&i===c[++o]&&i===c[++o])){u=t.strstart+Yf;do;while(i===c[++o]&&i===c[++o]&&i===c[++o]&&i===c[++o]&&i===c[++o]&&i===c[++o]&&i===c[++o]&&i===c[++o]&&o<u);t.match_length=Yf-(u-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Ro?(r=th(t,1,t.match_length-Ro),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=th(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Gc(t,!1),t.strm.avail_out===0))return Uu}return t.insert=0,e===l0?(Gc(t,!0),t.strm.avail_out===0?Mh:Ud):t.sym_next&&(Gc(t,!1),t.strm.avail_out===0)?Uu:jd},rV=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(Nd(t),t.lookahead===0)){if(e===rh)return Uu;break}if(t.match_length=0,r=th(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Gc(t,!1),t.strm.avail_out===0))return Uu}return t.insert=0,e===l0?(Gc(t,!0),t.strm.avail_out===0?Mh:Ud):t.sym_next&&(Gc(t,!1),t.strm.avail_out===0)?Uu:jd};function X0(t,e,r,i,o){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=o}const mp=[new X0(0,0,0,0,kA),new X0(4,4,8,4,Hg),new X0(4,5,16,8,Hg),new X0(4,6,32,32,Hg),new X0(4,4,16,16,Jh),new X0(8,16,32,32,Jh),new X0(8,16,128,128,Jh),new X0(8,32,128,256,Jh),new X0(32,128,258,1024,Jh),new X0(32,258,258,4096,Jh)],iV=t=>{t.window_size=2*t.w_size,Zf(t.head),t.max_lazy_match=mp[t.level].max_lazy,t.good_match=mp[t.level].good_length,t.nice_match=mp[t.level].nice_length,t.max_chain_length=mp[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Ro-1,t.match_available=0,t.ins_h=0};function nV(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Xq*2),this.dyn_dtree=new Uint16Array((2*Wq+1)*2),this.bl_tree=new Uint16Array((2*Zq+1)*2),Zf(this.dyn_ltree),Zf(this.dyn_dtree),Zf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Yq+1),this.heap=new Uint16Array(2*Jy+1),Zf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Jy+1),Zf(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const s1=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==zd&&e.status!==bv&&e.status!==Qy&&e.status!==e_&&e.status!==t_&&e.status!==r_&&e.status!==xh&&e.status!==pp?1:0},AA=t=>{if(s1(t))return kh(t,sf);t.total_in=t.total_out=0,t.data_type=Uq;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?bv:e.wrap?zd:xh,t.adler=e.wrap===2?0:1,e.last_flush=-2,Tq(e),Ul},SA=t=>{const e=AA(t);return e===Ul&&iV(t.state),e},oV=(t,e)=>s1(t)||t.state.wrap!==2?sf:(t.state.gzhead=e,Ul),EA=(t,e,r,i,o,u)=>{if(!t)return sf;let c=1;if(e===Rq&&(e=6),i<0?(c=0,i=-i):i>15&&(c=2,i-=16),o<1||o>qq||r!==rm||i<8||i>15||e<0||e>9||u<0||u>Bq||i===8&&c!==1)return kh(t,sf);i===8&&(i=9);const s=new nV;return t.state=s,s.strm=t,s.status=zd,s.wrap=c,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Ro-1)/Ro),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=e,s.strategy=u,s.method=r,SA(t)},aV=(t,e)=>EA(t,e,rm,Vq,Hq,jq),sV=(t,e)=>{if(s1(t)||e>_w||e<0)return t?kh(t,sf):sf;const r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===pp&&e!==l0)return kh(t,t.avail_out===0?Vg:sf);const i=r.last_flush;if(r.last_flush=e,r.pending!==0){if(Uc(t),t.avail_out===0)return r.last_flush=-1,Ul}else if(t.avail_in===0&&bw(e)<=bw(i)&&e!==l0)return kh(t,Vg);if(r.status===pp&&t.avail_in!==0)return kh(t,Vg);if(r.status===zd&&r.wrap===0&&(r.status=xh),r.status===zd){let o=rm+(r.w_bits-8<<4)<<8,u=-1;if(r.strategy>=$1||r.level<2?u=0:r.level<6?u=1:r.level===6?u=2:u=3,o|=u<<6,r.strstart!==0&&(o|=Kq),o+=31-o%31,up(r,o),r.strstart!==0&&(up(r,t.adler>>>16),up(r,t.adler&65535)),t.adler=1,r.status=xh,Uc(t),r.pending!==0)return r.last_flush=-1,Ul}if(r.status===bv){if(t.adler=0,ta(r,31),ta(r,139),ta(r,8),r.gzhead)ta(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ta(r,r.gzhead.time&255),ta(r,r.gzhead.time>>8&255),ta(r,r.gzhead.time>>16&255),ta(r,r.gzhead.time>>24&255),ta(r,r.level===9?2:r.strategy>=$1||r.level<2?4:0),ta(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(ta(r,r.gzhead.extra.length&255),ta(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=_l(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Qy;else if(ta(r,0),ta(r,0),ta(r,0),ta(r,0),ta(r,0),ta(r,r.level===9?2:r.strategy>=$1||r.level<2?4:0),ta(r,Jq),r.status=xh,Uc(t),r.pending!==0)return r.last_flush=-1,Ul}if(r.status===Qy){if(r.gzhead.extra){let o=r.pending,u=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+u>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>o&&(t.adler=_l(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex+=s,Uc(t),r.pending!==0)return r.last_flush=-1,Ul;o=0,u-=s}let c=new Uint8Array(r.gzhead.extra);r.pending_buf.set(c.subarray(r.gzindex,r.gzindex+u),r.pending),r.pending+=u,r.gzhead.hcrc&&r.pending>o&&(t.adler=_l(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=e_}if(r.status===e_){if(r.gzhead.name){let o=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(t.adler=_l(t.adler,r.pending_buf,r.pending-o,o)),Uc(t),r.pending!==0)return r.last_flush=-1,Ul;o=0}r.gzindex<r.gzhead.name.length?u=r.gzhead.name.charCodeAt(r.gzindex++)&255:u=0,ta(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>o&&(t.adler=_l(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=t_}if(r.status===t_){if(r.gzhead.comment){let o=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(t.adler=_l(t.adler,r.pending_buf,r.pending-o,o)),Uc(t),r.pending!==0)return r.last_flush=-1,Ul;o=0}r.gzindex<r.gzhead.comment.length?u=r.gzhead.comment.charCodeAt(r.gzindex++)&255:u=0,ta(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>o&&(t.adler=_l(t.adler,r.pending_buf,r.pending-o,o))}r.status=r_}if(r.status===r_){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Uc(t),r.pending!==0))return r.last_flush=-1,Ul;ta(r,t.adler&255),ta(r,t.adler>>8&255),t.adler=0}if(r.status=xh,Uc(t),r.pending!==0)return r.last_flush=-1,Ul}if(t.avail_in!==0||r.lookahead!==0||e!==rh&&r.status!==pp){let o=r.level===0?kA(r,e):r.strategy===$1?rV(r,e):r.strategy===Fq?tV(r,e):mp[r.level].func(r,e);if((o===Mh||o===Ud)&&(r.status=pp),o===Uu||o===Mh)return t.avail_out===0&&(r.last_flush=-1),Ul;if(o===jd&&(e===Dq?Mq(r):e!==_w&&(Ky(r,0,0,!1),e===zq&&(Zf(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Uc(t),t.avail_out===0))return r.last_flush=-1,Ul}return e!==l0?Ul:r.wrap<=0?vw:(r.wrap===2?(ta(r,t.adler&255),ta(r,t.adler>>8&255),ta(r,t.adler>>16&255),ta(r,t.adler>>24&255),ta(r,t.total_in&255),ta(r,t.total_in>>8&255),ta(r,t.total_in>>16&255),ta(r,t.total_in>>24&255)):(up(r,t.adler>>>16),up(r,t.adler&65535)),Uc(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ul:vw)},lV=t=>{if(s1(t))return sf;const e=t.state.status;return t.state=null,e===xh?kh(t,Nq):Ul},uV=(t,e)=>{let r=e.length;if(s1(t))return sf;const i=t.state,o=i.wrap;if(o===2||o===1&&i.status!==zd||i.lookahead)return sf;if(o===1&&(t.adler=Xp(t.adler,e,r,0)),i.wrap=0,r>=i.w_size){o===0&&(Zf(i.head),i.strstart=0,i.block_start=0,i.insert=0);let f=new Uint8Array(i.w_size);f.set(e.subarray(r-i.w_size,r),0),e=f,r=i.w_size}const u=t.avail_in,c=t.next_in,s=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Nd(i);i.lookahead>=Ro;){let f=i.strstart,y=i.lookahead-(Ro-1);do i.ins_h=ih(i,i.ins_h,i.window[f+Ro-1]),i.prev[f&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=f,f++;while(--y);i.strstart=f,i.lookahead=Ro-1,Nd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Ro-1,i.match_available=0,t.next_in=c,t.input=s,t.avail_in=u,i.wrap=o,Ul};var cV=aV,fV=EA,hV=SA,dV=AA,pV=oV,mV=sV,gV=lV,yV=uV,_V="pako deflate (from Nodeca project)",Ep={deflateInit:cV,deflateInit2:fV,deflateReset:hV,deflateResetKeep:dV,deflateSetHeader:pV,deflate:mV,deflateEnd:gV,deflateSetDictionary:yV,deflateInfo:_V};const vV=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var bV=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const i in r)vV(r,i)&&(t[i]=r[i])}}return t},wV=t=>{let e=0;for(let i=0,o=t.length;i<o;i++)e+=t[i].length;const r=new Uint8Array(e);for(let i=0,o=0,u=t.length;i<u;i++){let c=t[i];r.set(c,o),o+=c.length}return r},im={assign:bV,flattenChunks:wV};let CA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{CA=!1}const Yp=new Uint8Array(256);for(let t=0;t<256;t++)Yp[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Yp[254]=Yp[254]=1;var xV=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,i,o,u,c=t.length,s=0;for(o=0;o<c;o++)r=t.charCodeAt(o),(r&64512)===55296&&o+1<c&&(i=t.charCodeAt(o+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),o++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(s),u=0,o=0;u<s;o++)r=t.charCodeAt(o),(r&64512)===55296&&o+1<c&&(i=t.charCodeAt(o+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),o++)),r<128?e[u++]=r:r<2048?(e[u++]=192|r>>>6,e[u++]=128|r&63):r<65536?(e[u++]=224|r>>>12,e[u++]=128|r>>>6&63,e[u++]=128|r&63):(e[u++]=240|r>>>18,e[u++]=128|r>>>12&63,e[u++]=128|r>>>6&63,e[u++]=128|r&63);return e};const kV=(t,e)=>{if(e<65534&&t.subarray&&CA)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r};var AV=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let i,o;const u=new Array(r*2);for(o=0,i=0;i<r;){let c=t[i++];if(c<128){u[o++]=c;continue}let s=Yp[c];if(s>4){u[o++]=65533,i+=s-1;continue}for(c&=s===2?31:s===3?15:7;s>1&&i<r;)c=c<<6|t[i++]&63,s--;if(s>1){u[o++]=65533;continue}c<65536?u[o++]=c:(c-=65536,u[o++]=55296|c>>10&1023,u[o++]=56320|c&1023)}return kV(u,o)},SV=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Yp[t[r]]>e?r:e},Kp={string2buf:xV,buf2string:AV,utf8border:SV};function EV(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var IA=EV;const LA=Object.prototype.toString,{Z_NO_FLUSH:CV,Z_SYNC_FLUSH:IV,Z_FULL_FLUSH:LV,Z_FINISH:TV,Z_OK:D2,Z_STREAM_END:PV,Z_DEFAULT_COMPRESSION:MV,Z_DEFAULT_STRATEGY:DV,Z_DEFLATED:zV}=Oh;function l1(t){this.options=im.assign({level:MV,method:zV,chunkSize:16384,windowBits:15,memLevel:8,strategy:DV},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new IA,this.strm.avail_out=0;let r=Ep.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==D2)throw new Error(Ph[r]);if(e.header&&Ep.deflateSetHeader(this.strm,e.header),e.dictionary){let i;if(typeof e.dictionary=="string"?i=Kp.string2buf(e.dictionary):LA.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,r=Ep.deflateSetDictionary(this.strm,i),r!==D2)throw new Error(Ph[r]);this._dict_set=!0}}l1.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize;let o,u;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?TV:CV,typeof t=="string"?r.input=Kp.string2buf(t):LA.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(u===IV||u===LV)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(o=Ep.deflate(r,u),o===PV)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),o=Ep.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===D2;if(r.avail_out===0){this.onData(r.output);continue}if(u>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};l1.prototype.onData=function(t){this.chunks.push(t)};l1.prototype.onEnd=function(t){t===D2&&(this.result=im.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function wv(t,e){const r=new l1(e);if(r.push(t,!0),r.err)throw r.msg||Ph[r.err];return r.result}function NV(t,e){return e=e||{},e.raw=!0,wv(t,e)}function RV(t,e){return e=e||{},e.gzip=!0,wv(t,e)}var OV=l1,FV=wv,BV=NV,jV=RV,UV=Oh,qV={Deflate:OV,deflate:FV,deflateRaw:BV,gzip:jV,constants:UV};const G1=16209,VV=16191;var HV=function(e,r){let i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue;const Ce=e.state;i=e.next_in,ze=e.input,o=i+(e.avail_in-5),u=e.next_out,Ue=e.output,c=u-(r-e.avail_out),s=u+(e.avail_out-257),f=Ce.dmax,y=Ce.wsize,b=Ce.whave,A=Ce.wnext,I=Ce.window,C=Ce.hold,N=Ce.bits,O=Ce.lencode,$=Ce.distcode,G=(1<<Ce.lenbits)-1,Z=(1<<Ce.distbits)-1;e:do{N<15&&(C+=ze[i++]<<N,N+=8,C+=ze[i++]<<N,N+=8),ee=O[C&G];t:for(;;){if(te=ee>>>24,C>>>=te,N-=te,te=ee>>>16&255,te===0)Ue[u++]=ee&65535;else if(te&16){_e=ee&65535,te&=15,te&&(N<te&&(C+=ze[i++]<<N,N+=8),_e+=C&(1<<te)-1,C>>>=te,N-=te),N<15&&(C+=ze[i++]<<N,N+=8,C+=ze[i++]<<N,N+=8),ee=$[C&Z];r:for(;;){if(te=ee>>>24,C>>>=te,N-=te,te=ee>>>16&255,te&16){if(le=ee&65535,te&=15,N<te&&(C+=ze[i++]<<N,N+=8,N<te&&(C+=ze[i++]<<N,N+=8)),le+=C&(1<<te)-1,le>f){e.msg="invalid distance too far back",Ce.mode=G1;break e}if(C>>>=te,N-=te,te=u-c,le>te){if(te=le-te,te>b&&Ce.sane){e.msg="invalid distance too far back",Ce.mode=G1;break e}if(we=0,ue=I,A===0){if(we+=y-te,te<_e){_e-=te;do Ue[u++]=I[we++];while(--te);we=u-le,ue=Ue}}else if(A<te){if(we+=y+A-te,te-=A,te<_e){_e-=te;do Ue[u++]=I[we++];while(--te);if(we=0,A<_e){te=A,_e-=te;do Ue[u++]=I[we++];while(--te);we=u-le,ue=Ue}}}else if(we+=A-te,te<_e){_e-=te;do Ue[u++]=I[we++];while(--te);we=u-le,ue=Ue}for(;_e>2;)Ue[u++]=ue[we++],Ue[u++]=ue[we++],Ue[u++]=ue[we++],_e-=3;_e&&(Ue[u++]=ue[we++],_e>1&&(Ue[u++]=ue[we++]))}else{we=u-le;do Ue[u++]=Ue[we++],Ue[u++]=Ue[we++],Ue[u++]=Ue[we++],_e-=3;while(_e>2);_e&&(Ue[u++]=Ue[we++],_e>1&&(Ue[u++]=Ue[we++]))}}else if(te&64){e.msg="invalid distance code",Ce.mode=G1;break e}else{ee=$[(ee&65535)+(C&(1<<te)-1)];continue r}break}}else if(te&64)if(te&32){Ce.mode=VV;break e}else{e.msg="invalid literal/length code",Ce.mode=G1;break e}else{ee=O[(ee&65535)+(C&(1<<te)-1)];continue t}break}}while(i<o&&u<s);_e=N>>3,i-=_e,N-=_e<<3,C&=(1<<N)-1,e.next_in=i,e.next_out=u,e.avail_in=i<o?5+(o-i):5-(i-o),e.avail_out=u<s?257+(s-u):257-(u-s),Ce.hold=C,Ce.bits=N};const Qh=15,ww=852,xw=592,kw=0,$g=1,Aw=2,$V=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),GV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),WV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ZV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),XV=(t,e,r,i,o,u,c,s)=>{const f=s.bits;let y=0,b=0,A=0,I=0,C=0,N=0,O=0,$=0,G=0,Z=0,ee,te,_e,le,we,ue=null,ze;const Ue=new Uint16Array(Qh+1),Ce=new Uint16Array(Qh+1);let Me=null,qe,it,xt;for(y=0;y<=Qh;y++)Ue[y]=0;for(b=0;b<i;b++)Ue[e[r+b]]++;for(C=f,I=Qh;I>=1&&Ue[I]===0;I--);if(C>I&&(C=I),I===0)return o[u++]=1<<24|64<<16|0,o[u++]=1<<24|64<<16|0,s.bits=1,0;for(A=1;A<I&&Ue[A]===0;A++);for(C<A&&(C=A),$=1,y=1;y<=Qh;y++)if($<<=1,$-=Ue[y],$<0)return-1;if($>0&&(t===kw||I!==1))return-1;for(Ce[1]=0,y=1;y<Qh;y++)Ce[y+1]=Ce[y]+Ue[y];for(b=0;b<i;b++)e[r+b]!==0&&(c[Ce[e[r+b]]++]=b);if(t===kw?(ue=Me=c,ze=20):t===$g?(ue=$V,Me=GV,ze=257):(ue=WV,Me=ZV,ze=0),Z=0,b=0,y=A,we=u,N=C,O=0,_e=-1,G=1<<C,le=G-1,t===$g&&G>ww||t===Aw&&G>xw)return 1;for(;;){qe=y-O,c[b]+1<ze?(it=0,xt=c[b]):c[b]>=ze?(it=Me[c[b]-ze],xt=ue[c[b]-ze]):(it=32+64,xt=0),ee=1<<y-O,te=1<<N,A=te;do te-=ee,o[we+(Z>>O)+te]=qe<<24|it<<16|xt|0;while(te!==0);for(ee=1<<y-1;Z&ee;)ee>>=1;if(ee!==0?(Z&=ee-1,Z+=ee):Z=0,b++,--Ue[y]===0){if(y===I)break;y=e[r+c[b]]}if(y>C&&(Z&le)!==_e){for(O===0&&(O=C),we+=A,N=y-O,$=1<<N;N+O<I&&($-=Ue[N+O],!($<=0));)N++,$<<=1;if(G+=1<<N,t===$g&&G>ww||t===Aw&&G>xw)return 1;_e=Z&le,o[_e]=C<<24|N<<16|we-u|0}}return Z!==0&&(o[we+Z]=y-O<<24|64<<16|0),s.bits=C,0};var Cp=XV;const YV=0,TA=1,PA=2,{Z_FINISH:Sw,Z_BLOCK:KV,Z_TREES:W1,Z_OK:Dh,Z_STREAM_END:JV,Z_NEED_DICT:QV,Z_STREAM_ERROR:d0,Z_DATA_ERROR:MA,Z_MEM_ERROR:DA,Z_BUF_ERROR:eH,Z_DEFLATED:Ew}=Oh,nm=16180,Cw=16181,Iw=16182,Lw=16183,Tw=16184,Pw=16185,Mw=16186,Dw=16187,zw=16188,Nw=16189,z2=16190,Af=16191,Gg=16192,Rw=16193,Wg=16194,Ow=16195,Fw=16196,Bw=16197,jw=16198,Z1=16199,X1=16200,Uw=16201,qw=16202,Vw=16203,Hw=16204,$w=16205,Zg=16206,Gw=16207,Ww=16208,Va=16209,zA=16210,NA=16211,tH=852,rH=592,iH=15,nH=iH,Zw=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function oH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<nm||e.mode>NA?1:0},RA=t=>{if(Fh(t))return d0;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=nm,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(tH),e.distcode=e.distdyn=new Int32Array(rH),e.sane=1,e.back=-1,Dh},OA=t=>{if(Fh(t))return d0;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,RA(t)},FA=(t,e)=>{let r;if(Fh(t))return d0;const i=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?d0:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,OA(t))},BA=(t,e)=>{if(!t)return d0;const r=new oH;t.state=r,r.strm=t,r.window=null,r.mode=nm;const i=FA(t,e);return i!==Dh&&(t.state=null),i},aH=t=>BA(t,nH);let Xw=!0,Xg,Yg;const sH=t=>{if(Xw){Xg=new Int32Array(512),Yg=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Cp(TA,t.lens,0,288,Xg,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Cp(PA,t.lens,0,32,Yg,0,t.work,{bits:5}),Xw=!1}t.lencode=Xg,t.lenbits=9,t.distcode=Yg,t.distbits=5},jA=(t,e,r,i)=>{let o;const u=t.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),i>=u.wsize?(u.window.set(e.subarray(r-u.wsize,r),0),u.wnext=0,u.whave=u.wsize):(o=u.wsize-u.wnext,o>i&&(o=i),u.window.set(e.subarray(r-i,r-i+o),u.wnext),i-=o,i?(u.window.set(e.subarray(r-i,r),0),u.wnext=i,u.whave=u.wsize):(u.wnext+=o,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=o))),0},lH=(t,e)=>{let r,i,o,u,c,s,f,y,b,A,I,C,N,O,$=0,G,Z,ee,te,_e,le,we,ue;const ze=new Uint8Array(4);let Ue,Ce;const Me=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Fh(t)||!t.output||!t.input&&t.avail_in!==0)return d0;r=t.state,r.mode===Af&&(r.mode=Gg),c=t.next_out,o=t.output,f=t.avail_out,u=t.next_in,i=t.input,s=t.avail_in,y=r.hold,b=r.bits,A=s,I=f,ue=Dh;e:for(;;)switch(r.mode){case nm:if(r.wrap===0){r.mode=Gg;break}for(;b<16;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(r.wrap&2&&y===35615){r.wbits===0&&(r.wbits=15),r.check=0,ze[0]=y&255,ze[1]=y>>>8&255,r.check=_l(r.check,ze,2,0),y=0,b=0,r.mode=Cw;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((y&255)<<8)+(y>>8))%31){t.msg="incorrect header check",r.mode=Va;break}if((y&15)!==Ew){t.msg="unknown compression method",r.mode=Va;break}if(y>>>=4,b-=4,we=(y&15)+8,r.wbits===0&&(r.wbits=we),we>15||we>r.wbits){t.msg="invalid window size",r.mode=Va;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=y&512?Nw:Af,y=0,b=0;break;case Cw:for(;b<16;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(r.flags=y,(r.flags&255)!==Ew){t.msg="unknown compression method",r.mode=Va;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Va;break}r.head&&(r.head.text=y>>8&1),r.flags&512&&r.wrap&4&&(ze[0]=y&255,ze[1]=y>>>8&255,r.check=_l(r.check,ze,2,0)),y=0,b=0,r.mode=Iw;case Iw:for(;b<32;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}r.head&&(r.head.time=y),r.flags&512&&r.wrap&4&&(ze[0]=y&255,ze[1]=y>>>8&255,ze[2]=y>>>16&255,ze[3]=y>>>24&255,r.check=_l(r.check,ze,4,0)),y=0,b=0,r.mode=Lw;case Lw:for(;b<16;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}r.head&&(r.head.xflags=y&255,r.head.os=y>>8),r.flags&512&&r.wrap&4&&(ze[0]=y&255,ze[1]=y>>>8&255,r.check=_l(r.check,ze,2,0)),y=0,b=0,r.mode=Tw;case Tw:if(r.flags&1024){for(;b<16;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}r.length=y,r.head&&(r.head.extra_len=y),r.flags&512&&r.wrap&4&&(ze[0]=y&255,ze[1]=y>>>8&255,r.check=_l(r.check,ze,2,0)),y=0,b=0}else r.head&&(r.head.extra=null);r.mode=Pw;case Pw:if(r.flags&1024&&(C=r.length,C>s&&(C=s),C&&(r.head&&(we=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(u,u+C),we)),r.flags&512&&r.wrap&4&&(r.check=_l(r.check,i,C,u)),s-=C,u+=C,r.length-=C),r.length))break e;r.length=0,r.mode=Mw;case Mw:if(r.flags&2048){if(s===0)break e;C=0;do we=i[u+C++],r.head&&we&&r.length<65536&&(r.head.name+=String.fromCharCode(we));while(we&&C<s);if(r.flags&512&&r.wrap&4&&(r.check=_l(r.check,i,C,u)),s-=C,u+=C,we)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Dw;case Dw:if(r.flags&4096){if(s===0)break e;C=0;do we=i[u+C++],r.head&&we&&r.length<65536&&(r.head.comment+=String.fromCharCode(we));while(we&&C<s);if(r.flags&512&&r.wrap&4&&(r.check=_l(r.check,i,C,u)),s-=C,u+=C,we)break e}else r.head&&(r.head.comment=null);r.mode=zw;case zw:if(r.flags&512){for(;b<16;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(r.wrap&4&&y!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Va;break}y=0,b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Af;break;case Nw:for(;b<32;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}t.adler=r.check=Zw(y),y=0,b=0,r.mode=z2;case z2:if(r.havedict===0)return t.next_out=c,t.avail_out=f,t.next_in=u,t.avail_in=s,r.hold=y,r.bits=b,QV;t.adler=r.check=1,r.mode=Af;case Af:if(e===KV||e===W1)break e;case Gg:if(r.last){y>>>=b&7,b-=b&7,r.mode=Zg;break}for(;b<3;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}switch(r.last=y&1,y>>>=1,b-=1,y&3){case 0:r.mode=Rw;break;case 1:if(sH(r),r.mode=Z1,e===W1){y>>>=2,b-=2;break e}break;case 2:r.mode=Fw;break;case 3:t.msg="invalid block type",r.mode=Va}y>>>=2,b-=2;break;case Rw:for(y>>>=b&7,b-=b&7;b<32;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if((y&65535)!==(y>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Va;break}if(r.length=y&65535,y=0,b=0,r.mode=Wg,e===W1)break e;case Wg:r.mode=Ow;case Ow:if(C=r.length,C){if(C>s&&(C=s),C>f&&(C=f),C===0)break e;o.set(i.subarray(u,u+C),c),s-=C,u+=C,f-=C,c+=C,r.length-=C;break}r.mode=Af;break;case Fw:for(;b<14;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(r.nlen=(y&31)+257,y>>>=5,b-=5,r.ndist=(y&31)+1,y>>>=5,b-=5,r.ncode=(y&15)+4,y>>>=4,b-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Va;break}r.have=0,r.mode=Bw;case Bw:for(;r.have<r.ncode;){for(;b<3;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}r.lens[Me[r.have++]]=y&7,y>>>=3,b-=3}for(;r.have<19;)r.lens[Me[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ue={bits:r.lenbits},ue=Cp(YV,r.lens,0,19,r.lencode,0,r.work,Ue),r.lenbits=Ue.bits,ue){t.msg="invalid code lengths set",r.mode=Va;break}r.have=0,r.mode=jw;case jw:for(;r.have<r.nlen+r.ndist;){for(;$=r.lencode[y&(1<<r.lenbits)-1],G=$>>>24,Z=$>>>16&255,ee=$&65535,!(G<=b);){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(ee<16)y>>>=G,b-=G,r.lens[r.have++]=ee;else{if(ee===16){for(Ce=G+2;b<Ce;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(y>>>=G,b-=G,r.have===0){t.msg="invalid bit length repeat",r.mode=Va;break}we=r.lens[r.have-1],C=3+(y&3),y>>>=2,b-=2}else if(ee===17){for(Ce=G+3;b<Ce;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}y>>>=G,b-=G,we=0,C=3+(y&7),y>>>=3,b-=3}else{for(Ce=G+7;b<Ce;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}y>>>=G,b-=G,we=0,C=11+(y&127),y>>>=7,b-=7}if(r.have+C>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Va;break}for(;C--;)r.lens[r.have++]=we}}if(r.mode===Va)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Va;break}if(r.lenbits=9,Ue={bits:r.lenbits},ue=Cp(TA,r.lens,0,r.nlen,r.lencode,0,r.work,Ue),r.lenbits=Ue.bits,ue){t.msg="invalid literal/lengths set",r.mode=Va;break}if(r.distbits=6,r.distcode=r.distdyn,Ue={bits:r.distbits},ue=Cp(PA,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ue),r.distbits=Ue.bits,ue){t.msg="invalid distances set",r.mode=Va;break}if(r.mode=Z1,e===W1)break e;case Z1:r.mode=X1;case X1:if(s>=6&&f>=258){t.next_out=c,t.avail_out=f,t.next_in=u,t.avail_in=s,r.hold=y,r.bits=b,HV(t,I),c=t.next_out,o=t.output,f=t.avail_out,u=t.next_in,i=t.input,s=t.avail_in,y=r.hold,b=r.bits,r.mode===Af&&(r.back=-1);break}for(r.back=0;$=r.lencode[y&(1<<r.lenbits)-1],G=$>>>24,Z=$>>>16&255,ee=$&65535,!(G<=b);){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(Z&&!(Z&240)){for(te=G,_e=Z,le=ee;$=r.lencode[le+((y&(1<<te+_e)-1)>>te)],G=$>>>24,Z=$>>>16&255,ee=$&65535,!(te+G<=b);){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}y>>>=te,b-=te,r.back+=te}if(y>>>=G,b-=G,r.back+=G,r.length=ee,Z===0){r.mode=$w;break}if(Z&32){r.back=-1,r.mode=Af;break}if(Z&64){t.msg="invalid literal/length code",r.mode=Va;break}r.extra=Z&15,r.mode=Uw;case Uw:if(r.extra){for(Ce=r.extra;b<Ce;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=qw;case qw:for(;$=r.distcode[y&(1<<r.distbits)-1],G=$>>>24,Z=$>>>16&255,ee=$&65535,!(G<=b);){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(!(Z&240)){for(te=G,_e=Z,le=ee;$=r.distcode[le+((y&(1<<te+_e)-1)>>te)],G=$>>>24,Z=$>>>16&255,ee=$&65535,!(te+G<=b);){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}y>>>=te,b-=te,r.back+=te}if(y>>>=G,b-=G,r.back+=G,Z&64){t.msg="invalid distance code",r.mode=Va;break}r.offset=ee,r.extra=Z&15,r.mode=Vw;case Vw:if(r.extra){for(Ce=r.extra;b<Ce;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Va;break}r.mode=Hw;case Hw:if(f===0)break e;if(C=I-f,r.offset>C){if(C=r.offset-C,C>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Va;break}C>r.wnext?(C-=r.wnext,N=r.wsize-C):N=r.wnext-C,C>r.length&&(C=r.length),O=r.window}else O=o,N=c-r.offset,C=r.length;C>f&&(C=f),f-=C,r.length-=C;do o[c++]=O[N++];while(--C);r.length===0&&(r.mode=X1);break;case $w:if(f===0)break e;o[c++]=r.length,f--,r.mode=X1;break;case Zg:if(r.wrap){for(;b<32;){if(s===0)break e;s--,y|=i[u++]<<b,b+=8}if(I-=f,t.total_out+=I,r.total+=I,r.wrap&4&&I&&(t.adler=r.check=r.flags?_l(r.check,o,I,c-I):Xp(r.check,o,I,c-I)),I=f,r.wrap&4&&(r.flags?y:Zw(y))!==r.check){t.msg="incorrect data check",r.mode=Va;break}y=0,b=0}r.mode=Gw;case Gw:if(r.wrap&&r.flags){for(;b<32;){if(s===0)break e;s--,y+=i[u++]<<b,b+=8}if(r.wrap&4&&y!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Va;break}y=0,b=0}r.mode=Ww;case Ww:ue=JV;break e;case Va:ue=MA;break e;case zA:return DA;case NA:default:return d0}return t.next_out=c,t.avail_out=f,t.next_in=u,t.avail_in=s,r.hold=y,r.bits=b,(r.wsize||I!==t.avail_out&&r.mode<Va&&(r.mode<Zg||e!==Sw))&&jA(t,t.output,t.next_out,I-t.avail_out),A-=t.avail_in,I-=t.avail_out,t.total_in+=A,t.total_out+=I,r.total+=I,r.wrap&4&&I&&(t.adler=r.check=r.flags?_l(r.check,o,I,t.next_out-I):Xp(r.check,o,I,t.next_out-I)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Af?128:0)+(r.mode===Z1||r.mode===Wg?256:0),(A===0&&I===0||e===Sw)&&ue===Dh&&(ue=eH),ue},uH=t=>{if(Fh(t))return d0;let e=t.state;return e.window&&(e.window=null),t.state=null,Dh},cH=(t,e)=>{if(Fh(t))return d0;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Dh):d0},fH=(t,e)=>{const r=e.length;let i,o,u;return Fh(t)||(i=t.state,i.wrap!==0&&i.mode!==z2)?d0:i.mode===z2&&(o=1,o=Xp(o,e,r,0),o!==i.check)?MA:(u=jA(t,e,r,r),u?(i.mode=zA,DA):(i.havedict=1,Dh))};var hH=OA,dH=FA,pH=RA,mH=aH,gH=BA,yH=lH,_H=uH,vH=cH,bH=fH,wH="pako inflate (from Nodeca project)",If={inflateReset:hH,inflateReset2:dH,inflateResetKeep:pH,inflateInit:mH,inflateInit2:gH,inflate:yH,inflateEnd:_H,inflateGetHeader:vH,inflateSetDictionary:bH,inflateInfo:wH};function xH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var kH=xH;const UA=Object.prototype.toString,{Z_NO_FLUSH:AH,Z_FINISH:SH,Z_OK:Jp,Z_STREAM_END:Kg,Z_NEED_DICT:Jg,Z_STREAM_ERROR:EH,Z_DATA_ERROR:Yw,Z_MEM_ERROR:CH}=Oh;function u1(t){this.options=im.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new IA,this.strm.avail_out=0;let r=If.inflateInit2(this.strm,e.windowBits);if(r!==Jp)throw new Error(Ph[r]);if(this.header=new kH,If.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Kp.string2buf(e.dictionary):UA.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=If.inflateSetDictionary(this.strm,e.dictionary),r!==Jp)))throw new Error(Ph[r])}u1.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let u,c,s;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?SH:AH,UA.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),u=If.inflate(r,c),u===Jg&&o&&(u=If.inflateSetDictionary(r,o),u===Jp?u=If.inflate(r,c):u===Yw&&(u=Jg));r.avail_in>0&&u===Kg&&r.state.wrap>0&&t[r.next_in]!==0;)If.inflateReset(r),u=If.inflate(r,c);switch(u){case EH:case Yw:case Jg:case CH:return this.onEnd(u),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||u===Kg))if(this.options.to==="string"){let f=Kp.utf8border(r.output,r.next_out),y=r.next_out-f,b=Kp.buf2string(r.output,f);r.next_out=y,r.avail_out=i-y,y&&r.output.set(r.output.subarray(f,f+y),0),this.onData(b)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(u===Jp&&s===0)){if(u===Kg)return u=If.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};u1.prototype.onData=function(t){this.chunks.push(t)};u1.prototype.onEnd=function(t){t===Jp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=im.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function xv(t,e){const r=new u1(e);if(r.push(t),r.err)throw r.msg||Ph[r.err];return r.result}function IH(t,e){return e=e||{},e.raw=!0,xv(t,e)}var LH=u1,TH=xv,PH=IH,MH=xv,DH=Oh,zH={Inflate:LH,inflate:TH,inflateRaw:PH,ungzip:MH,constants:DH};const{Deflate:NH,deflate:RH,deflateRaw:OH,gzip:FH}=qV,{Inflate:BH,inflate:jH,inflateRaw:UH,ungzip:qH}=zH;var VH=NH,HH=RH,$H=OH,GH=FH,WH=BH,ZH=jH,XH=UH,YH=qH,KH=Oh,JH={Deflate:VH,deflate:HH,deflateRaw:$H,gzip:GH,Inflate:WH,inflate:ZH,inflateRaw:XH,ungzip:YH,constants:KH};class n_{constructor(e){this.decode=()=>{const i=new Uint8Array(this.width*this.height*4),o=this.decodePixels();return this.copyImageDataToBuffer(i,o),i},this.copyImageDataToBuffer=(i,o)=>{let u=this.colors,c,s=this.hasAlphaChannel;this.palette.length&&(c=this.decodePalette(),u=4,s=!0);const f=i,y=f.length,b=c||o;let A=0,I=0;if(u===1)for(;A<y;){let C=c?o[A/4]*4:I;const N=b[C++];f[A++]=N,f[A++]=N,f[A++]=N,f[A++]=s?b[C++]:255,I=C}else for(;A<y;){let C=c?o[A/4]*4:I;f[A++]=b[C++],f[A++]=b[C++],f[A++]=b[C++],f[A++]=s?b[C++]:255,I=C}},this.decodePixels=()=>{const i=JH.inflate(this.imgData),o=this.pixelBitlength/8,u=o*this.width,c=new Uint8Array(u*this.height),s=i.length;let f=0,y=0,b=0;for(;y<s;){switch(i[y++]){case 0:{for(let A=0;A<u;A++)c[b++]=i[y++];break}case 1:{for(let A=0;A<u;A++){const I=i[y++],C=A<o?0:c[b-o];c[b++]=(I+C)%256}break}case 2:{for(let A=0;A<u;A++){const I=i[y++],C=(A-A%o)/o,N=(f-1)*u+C*o+A%o,O=f&&c[N];c[b++]=(O+I)%256}break}case 3:{for(let A=0;A<u;A++){const I=i[y++],C=(A-A%o)/o,N=A<o?0:c[b-o],O=(f-1)*u+C*o+A%o,$=f&&c[O];c[b++]=(I+Math.floor((N+$)/2))%256}break}case 4:{for(let A=0;A<u;A++){const I=i[y++],C=(A-A%o)/o,N=A<o?0:c[b-o];let O,$;if(f===0)O=$=0;else{const le=(f-1)*u+C*o+A%o,we=(f-1)*u+(C-1)*o+A%o;O=c[le],$=C&&c[we]}const G=N+O-$,Z=Math.abs(G-N),ee=Math.abs(G-O),te=Math.abs(G-$);let _e;Z<=ee&&Z<=te?_e=N:ee<=te?_e=O:_e=$,c[b++]=(I+_e)%256}break}default:throw new Error(`Invalid filter algorithm: ${i[y-1]}`)}f++}return c},this.read=i=>{const o=[];for(let u=0;u<i;u++)o[u]=this.data[this.pos++];return o},this.readUInt32=()=>{const i=this.data[this.pos++]<<24,o=this.data[this.pos++]<<16,u=this.data[this.pos++]<<8,c=this.data[this.pos++];return i|o|u|c},this.decodePalette=()=>{const i=this.palette,o=this.transparency.indexed||[],u=new Uint8Array(o.length+i.length);let c=0,s=0;for(let f=0;f<i.length;f++){u[c++]=i[f],u[c++]=i[f+1],u[c++]=i[f+2];const y=o[s++];u[c++]=y!==void 0?y:255}return u},this.data=e,this.pos=8,this.palette=[];const r=[];for(this.transparency={},this.text={};;){const i=this.readUInt32();let o="";for(let u=0;u<4;u++)o+=String.fromCharCode(this.data[this.pos++]);switch(o){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(i);break}case"IDAT":{for(let u=0;u<i;u++)r.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{if(this.transparency.indexed=this.read(i),255-this.transparency.indexed.length>0)for(let c=0;c<255;c++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(i)[0];break}case 2:{this.transparency.rgb=this.read(i);break}}break}case"tEXt":{const u=this.read(i),c=u.indexOf(0),s=String.fromCharCode(...u.slice(0,c));this.text[s]=String.fromCharCode(...u.slice(c+1));break}case"IEND":{const u={0:1,3:1,4:1,2:3,6:3};this.colors=u[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);const c=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*c,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(r);return}default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}}n_.load=t=>new n_(t);class QH{constructor(e,r,i,o){this.url=e,this.tileSize=r,this.minzoom=i,this.maxzoom=o}getValue(e,r){return new Promise((i,o)=>{const u=e[0],c=e[1];let s=r;r>this.maxzoom?s=this.maxzoom:r<this.minzoom&&(s=this.minzoom);const f=WU([u,c],s),y=this.url.replace(/{x}/g,f[0].toString()).replace(/{y}/g,f[1].toString()).replace(/{z}/g,f[2].toString());let b=this.getUrlExtension(y);switch(b||(b="png"),b){case"png":zU.get(y,{responseType:"arraybuffer"}).then(A=>{const I=Buffer.from(A.data,"binary"),C=this.getValueFromPNG(I,f,u,c);i(C)}).catch(A=>o(A));break;case"webp":oA(y).then(A=>{this.getValueFromWEBP(A,f,u,c).then(I=>{i(I)}).catch(I=>o(I))}).catch(A=>o(A));break;default:o(new Error(`Invalid file extension: ${b}`));break}})}getValueFromPNG(e,r,i,o){const c=n_.load(e).decode(),s=this.pixels2rgba(c,r,i,o);return this.calc(s[0],s[1],s[2],s[3])}getValueFromWEBP(e,r,i,o){return new Promise((u,c)=>{new qU().decode(e).then(f=>{const y=this.dataURIConverter(f),b=this.getValueFromPNG(y,r,i,o);u(b)}).catch(f=>c(f))})}pixels2rgba(e,r,i,o){const u=[];for(let b=0;b<e.length;b+=4){const A=e[b],I=e[b+1],C=e[b+2],N=e[b+3],O=[A,I,C,N];u.push(O)}const c=this.tileToBBOX(r),s=this.getPixelPosition(i,o,c),f=s[0]+s[1]*this.tileSize;return u[f]}getPixelPosition(e,r,i){const o=this.tileSize,u=this.tileSize,c=i[2]-i[0],s=i[3]-i[1],f=(e-i[0])/c,y=(r-i[1])/s,b=Math.floor(o*f),A=Math.floor(u*(1-y));return[b,A]}getUrlExtension(e){let r=e.split(/[#?]/)[0].split(".").pop();return r&&(r=r.trim()),r}dataURIConverter(e){const r=atob(e.split(",")[1]),i=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)i[o]=r.charCodeAt(o);return i}tileToBBOX(e){const r=this.tile2lon(e[0]+1,e[2]),i=this.tile2lon(e[0],e[2]),o=this.tile2lat(e[1]+1,e[2]),u=this.tile2lat(e[1],e[2]);return[i,o,r,u]}tile2lon(e,r){return e/Math.pow(2,r)*360-180}tile2lat(e,r){const i=180/Math.PI,o=Math.PI-2*Math.PI*e/Math.pow(2,r);return i*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))}}var e$=globalThis&&globalThis.__awaiter||function(t,e,r,i){function o(u){return u instanceof r?u:new r(function(c){c(u)})}return new(r||(r=Promise))(function(u,c){function s(b){try{y(i.next(b))}catch(A){c(A)}}function f(b){try{y(i.throw(b))}catch(A){c(A)}}function y(b){b.done?u(b.value):o(b.value).then(s,f)}y((i=i.apply(t,e||[])).next())})};class t$ extends QH{constructor(e,r,i=5,o=15){super(e,r,i,o)}getElevation(e,r){return e$(this,void 0,void 0,function*(){return yield this.getValue(e,r)})}calc(e,r,i){return-1e4+(e*256*256+r*256+i)*.1}}var sc=63710088e-1,r$={centimeters:sc*100,centimetres:sc*100,degrees:sc/111325,feet:sc*3.28084,inches:sc*39.37,kilometers:sc/1e3,kilometres:sc/1e3,meters:sc,metres:sc,miles:sc/1609.344,millimeters:sc*1e3,millimetres:sc*1e3,nauticalmiles:sc/1852,radians:1,yards:sc*1.0936};function i$(t,e){e===void 0&&(e="kilometers");var r=r$[e];if(!r)throw new Error(e+" units is invalid");return t*r}function Y1(t){var e=t%360;return e*Math.PI/180}function Kw(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function n$(t,e,r){r===void 0&&(r={});var i=Kw(t),o=Kw(e),u=Y1(o[1]-i[1]),c=Y1(o[0]-i[0]),s=Y1(i[1]),f=Y1(o[1]),y=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(s)*Math.cos(f);return i$(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),r.units)}const ed="elev-controls-source-line",Qg="elev-controls-layer-line",ey="elev-controls-layer-symbol",td="elev-controls-source-symbol",o$={tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff"};class a${constructor(e,r,i){li(this,"map");li(this,"measureOption",Object.assign({},o$));li(this,"terrainRgbUrl");li(this,"units","kilometers");li(this,"measureControlData");li(this,"isMeasure",!1);li(this,"isClickListenerAdded",!1);this.map=e,this.terrainRgbUrl=r,this.measureOption=Object.assign(this.measureOption,i),this.measureControlData={markers:[],coordinates:[],elevations:[]}}hasData(){return this.measureControlData&&this.measureControlData.coordinates.length>0}measuringOn(){this.map&&(this.map.getCanvas().style.cursor="crosshair",this.isClickListenerAdded||(this.map.on("click",this.mapClickListener.bind(this)),this.isClickListenerAdded=!0),this.map.fire("measure.on"),this.isMeasure=!0)}measuringOff(){this.map&&(this.map.getCanvas().style.cursor="",this.map.off("click",this.mapClickListener.bind(this)),this.map.fire("measure.off"),this.isMeasure=!1)}clearFeatures(){this.map&&(this.map.getLayer(Qg)&&this.map.removeLayer(Qg),this.map.getLayer(ey)&&this.map.removeLayer(ey),this.map.getSource(ed)&&this.map.removeSource(ed),this.map.getSource(td)&&this.map.removeSource(td)),this.measureControlData.markers.forEach(e=>e.remove()),this.map.fire("measure.clear")}mapClickListener(e){if(!this.isMeasure)return;(!this.map.getSource(ed)||!this.map.getSource(td))&&(this.clearFeatures(),this.initFeatures());let r=this.map.getZoom();r||(r=15),r=Math.round(r);const i=[e.lngLat.lng,e.lngLat.lat],o=this.measureOption.tileSize?this.measureOption.tileSize:512;this.terrainRgbUrl?new t$(this.terrainRgbUrl,o).getElevation(i,r).then(c=>{c||(c=-1),this.addPoint(e.lngLat,c)}):this.addPoint(e.lngLat)}addPoint(e,r){const i=new lc.Marker({draggable:!0}).setLngLat(e).addTo(this.map);this.measureControlData.markers.push(i),r?(this.measureControlData.coordinates.push([e.lng,e.lat,r]),this.measureControlData.elevations.push(r)):this.measureControlData.coordinates.push([e.lng,e.lat]),this.map.getSource(ed).setData(this.geoLineString(this.measureControlData.coordinates)),this.map.getSource(td).setData(this.geoPoint(this.measureControlData.coordinates)),this.map.fire("measure.add",{lnglat:e,elevation:r})}initFeatures(){this.measureControlData.markers=[],this.measureControlData.coordinates=[],this.measureControlData.elevations=[],this.map&&(this.map.addSource(ed,{type:"geojson",data:this.geoLineString(this.measureControlData.coordinates)}),this.map.addSource(td,{type:"geojson",data:this.geoPoint(this.measureControlData.coordinates)}),this.map.addLayer({id:Qg,type:"line",source:ed,paint:{"line-color":this.measureOption.mainColor,"line-width":2}}),this.map.addLayer({id:ey,type:"symbol",source:td,layout:{"text-field":"{text}","text-font":this.measureOption.font,"text-size":this.measureOption.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":this.measureOption.mainColor,"text-halo-color":this.measureOption.haloColor,"text-halo-width":this.measureOption.fontHalo}}))}labelFormat(e,r){let i=`${e.toFixed(2)} km`;e<1&&(i=`${(e*1e3).toFixed()} m`);let o="";return r&&r>0&&(o=`
alt.${r}m`),`${i}${o}`}geoLineString(e=[]){return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}}geoPoint(e=[]){let r=0;return{type:"FeatureCollection",features:e.map((i,o)=>(o>0&&(r+=n$(e[o-1],e[o],{units:this.units})),{type:"Feature",properties:{id:o+1,text:this.labelFormat(r,i[2]),elevation:i[2],length:(r*1e3).toFixed()},geometry:{type:"Point",coordinates:i}}))}}downloadGeoJSON(){if(this.measureControlData.coordinates.length===0)return;const e=this.geoPoint(this.measureControlData.coordinates);if(e.features.forEach(o=>{delete o.properties.text}),this.measureControlData.coordinates.length>1){const o=this.geoLineString(this.measureControlData.coordinates);e.features.push(o)}const r="measure_result.geojson",i=JSON.stringify(e);this.download(r,i)}download(e,r){const i=new Blob([r],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(i),o.setAttribute("download",e),o.dispatchEvent(new MouseEvent("click"))}}const Jw=zs(void 0);function Qw(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te;const _e=[l$,s$],le=[];function we(Ce,Me){return Ce[2]?0:1}o=we(t),u=le[o]=_e[o](t);function ue(Ce,Me){return Ce[2]?c$:u$}let ze=ue(t),Ue=ze(t);return A=new bo({props:{icon:f_}}),$=new bo({props:{icon:C8}}),{c(){e=Je("div"),r=Je("button"),i=Je("span"),u.c(),c=ir(),s=Je("span"),Ue.c(),f=ir(),y=Je("button"),b=Je("span"),Ht(A.$$.fragment),C=ir(),N=Je("button"),O=Je("span"),Ht($.$$.fragment),this.h()},l(Ce){e=Qe(Ce,"DIV",{class:!0});var Me=vt(e);r=Qe(Me,"BUTTON",{class:!0});var qe=vt(r);i=Qe(qe,"SPAN",{class:!0});var it=vt(i);u.l(it),it.forEach(he),c=nr(qe),s=Qe(qe,"SPAN",{});var xt=vt(s);Ue.l(xt),xt.forEach(he),qe.forEach(he),f=nr(Me),y=Qe(Me,"BUTTON",{class:!0});var yt=vt(y);b=Qe(yt,"SPAN",{});var $e=vt(b);Yt(A.$$.fragment,$e),$e.forEach(he),yt.forEach(he),C=nr(Me),N=Qe(Me,"BUTTON",{class:!0});var at=vt(N);O=Qe(at,"SPAN",{});var mt=vt(O);Yt($.$$.fragment,mt),mt.forEach(he),at.forEach(he),Me.forEach(he),this.h()},h(){ge(i,"class","control-icon svelte-1bv29kx"),ge(r,"class","control-button svelte-1bv29kx"),ge(y,"class","setting-button svelte-1bv29kx"),y.disabled=I=!t[3],ge(N,"class","setting-button svelte-1bv29kx"),N.disabled=G=!t[3],ge(e,"class","measure-container svelte-1bv29kx")},m(Ce,Me){dt(Ce,e,Me),Ke(e,r),Ke(r,i),le[o].m(i,null),Ke(r,c),Ke(r,s),Ue.m(s,null),Ke(e,f),Ke(e,y),Ke(y,b),$t(A,b,null),Ke(e,C),Ke(e,N),Ke(N,O),$t($,O,null),Z=!0,ee||(te=[Dr(r,"click",t[7]),Dr(y,"click",t[8]),Dr(N,"click",t[9])],ee=!0)},p(Ce,Me){let qe=o;o=we(Ce),o===qe?le[o].p(Ce,Me):(gn(),et(le[qe],1,1,()=>{le[qe]=null}),yn(),u=le[o],u?u.p(Ce,Me):(u=le[o]=_e[o](Ce),u.c()),We(u,1),u.m(i,null)),ze!==(ze=ue(Ce))&&(Ue.d(1),Ue=ze(Ce),Ue&&(Ue.c(),Ue.m(s,null))),(!Z||Me&8&&I!==(I=!Ce[3]))&&(y.disabled=I),(!Z||Me&8&&G!==(G=!Ce[3]))&&(N.disabled=G)},i(Ce){Z||(We(u),We(A.$$.fragment,Ce),We($.$$.fragment,Ce),Z=!0)},o(Ce){et(u),et(A.$$.fragment,Ce),et($.$$.fragment,Ce),Z=!1},d(Ce){Ce&&he(e),le[o].d(),Ue.d(),Gt(A),Gt($),ee=!1,oo(te)}}}function s$(t){let e,r;return e=new bo({props:{icon:h_}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function l$(t){let e,r;return e=new bo({props:{icon:I8}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function u$(t){let e;return{c(){e=Fi("Start measure")},l(r){e=Bi(r,"Start measure")},m(r,i){dt(r,e,i)},d(r){r&&he(e)}}}function c$(t){let e;return{c(){e=Fi("Stop measure")},l(r){e=Bi(r,"Stop measure")},m(r,i){dt(r,e,i)},d(r){r&&he(e)}}}function f$(t){let e,r,i=t[0]&&Qw(t);return{c(){i&&i.c(),e=pn()},l(o){i&&i.l(o),e=pn()},m(o,u){i&&i.m(o,u),dt(o,e,u),r=!0},p(o,[u]){o[0]?i?(i.p(o,u),u&1&&We(i,1)):(i=Qw(o),i.c(),We(i,1),i.m(e.parentNode,e)):i&&(gn(),et(i,1,1,()=>{i=null}),yn())},i(o){r||(We(i),r=!0)},o(o){et(i),r=!1},d(o){o&&he(e),i&&i.d(o)}}}function h$(t,e,r){let i;Ga(t,Jw,C=>r(1,i=C));let{map:o}=e,{terrainRgbUrl:u=void 0}=e,{measureOption:c}=e,s,f=!1;R2(()=>{s===!0&&i.measuringOff()});const y=()=>{s?i.measuringOff():i.measuringOn()},b=()=>y(),A=()=>i.clearFeatures(),I=()=>i.downloadGeoJSON();return t.$$set=C=>{"map"in C&&r(0,o=C.map),"terrainRgbUrl"in C&&r(5,u=C.terrainRgbUrl),"measureOption"in C&&r(6,c=C.measureOption)},t.$$.update=()=>{t.$$.dirty&99&&o&&(i||Lh(Jw,i=new a$(o,u,c),i),o.on("measure.on",()=>{r(2,s=!0)}),o.on("measure.off",()=>{r(2,s=!1)}),o.on("measure.add",()=>{r(3,f=i.hasData())}),o.on("measure.clear",()=>{r(3,f=!1)}))},[o,i,s,f,y,u,c,b,A,I]}class d$ extends di{constructor(e){super(),pi(this,e,h$,f$,hi,{map:0,terrainRgbUrl:5,measureOption:6})}}const ty=zs(void 0),ry=zs(void 0),{Marker:p$}=sy;var yu;(function(t){t.Time="time",t.Distance="distance"})(yu||(yu={}));class m${constructor(e,r,i,o){li(this,"map");li(this,"url");li(this,"contourSources",[]);li(this,"contourLayers",[]);li(this,"contourMaker");li(this,"contours",[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]);li(this,"isochroneStyle",{font:["Roboto Bold"],fontSize:16,fontHalo:1,fontColor:"#000000",fontHaloColor:"#fff"});this.map=e,this.url=r,i&&(this.contours=i),o&&(this.isochroneStyle=Object.assign(this.isochroneStyle,o))}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(e=>{var r;(r=this.map)==null||r.removeLayer(e)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(e=>{var r;(r=this.map)==null||r.removeSource(e)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(e,r,i,o,u){this.clearFeatures();let c=JSON.parse(JSON.stringify(this.contours));u&&(c=u),c.forEach(f=>{i===yu.Time?delete f.distance:delete f.time});let s="km";return i===yu.Time&&(s="min"),new Promise((f,y)=>{const b={locations:[{lat:r,lon:e}],costing:o,contours:c,polygons:!0},A=`${this.url}/isochrone?json=${JSON.stringify(b)}`;fetch(A).then(I=>I.json()).then(I=>{I.features.forEach(C=>{var O,$,G,Z;const N=`isochrone-${C.properties.contour}-${i}`;(O=this.map)==null||O.addSource(N,{type:"geojson",data:C}),this.contourSources.push(N),($=this.map)==null||$.addLayer({id:`pg-${N}-${i}`,type:"fill",source:N,layout:{},paint:{"fill-color":C.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${N}-${i}`),(G=this.map)==null||G.addLayer({id:`ls-${N}-${i}`,type:"line",source:N,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":C.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${N}-${i}`),(Z=this.map)==null||Z.addLayer({id:`symbol-${N}-${i}`,type:"symbol",source:N,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":this.isochroneStyle.font,"text-field":["concat",["get","contour"],` ${s}`],"text-size":this.isochroneStyle.fontSize},paint:{"text-color":this.isochroneStyle.fontColor,"text-halo-width":this.isochroneStyle.fontHalo,"text-halo-color":this.isochroneStyle.fontHaloColor}}),this.contourLayers.push(`symbol-${N}-${i}`)}),this.map&&(this.contourMaker=new p$().setLngLat([e,r]).addTo(this.map)),f()}).catch(I=>y(I))})}getContoursOption(){return this.contours}}const Rd=[{value:"pedestrian",label:"Walking",icon:dS},{value:"bicycle",label:"Bicycle",icon:hS},{value:"auto",label:"Car",icon:CS}];function e6(t,e,r){const i=t.slice();return i[17]=e[r],i[18]=e,i[19]=r,i}function t6(t,e,r){const i=t.slice();return i[20]=e[r],i}function r6(t){let e,r,i,o,u,c,s,f=t[20].label+"",y,b,A,I,C;function N(){return t[13](t[20])}return c=new bo({props:{icon:t[20].icon}}),{c(){e=Je("label"),r=Je("input"),o=ir(),u=Je("span"),Ht(c.$$.fragment),s=ir(),y=Fi(f),b=ir(),this.h()},l(O){e=Qe(O,"LABEL",{class:!0,style:!0});var $=vt(e);r=Qe($,"INPUT",{type:!0,name:!0}),o=nr($),u=Qe($,"SPAN",{class:!0});var G=vt(u);Yt(c.$$.fragment,G),G.forEach(he),s=nr($),y=Bi($,f),b=nr($),$.forEach(he),this.h()},h(){ge(r,"type","radio"),ge(r,"name","transport-isocrhone"),r.checked=i=t[4]===t[20].value,ge(u,"class","icon svelte-1u6mi4u"),ge(e,"class","radio-transport svelte-1u6mi4u"),Nn(e,"color","black")},m(O,$){dt(O,e,$),Ke(e,r),Ke(e,o),Ke(e,u),$t(c,u,null),Ke(e,s),Ke(e,y),Ke(e,b),A=!0,I||(C=Dr(r,"click",N),I=!0)},p(O,$){t=O,(!A||$&16&&i!==(i=t[4]===t[20].value))&&(r.checked=i)},i(O){A||(We(c.$$.fragment,O),A=!0)},o(O){et(c.$$.fragment,O),A=!1},d(O){O&&he(e),Gt(c),I=!1,C()}}}function i6(t){let e,r="From",i,o,u,c,s,f,y;return{c(){e=Je("label"),e.textContent=r,i=ir(),o=Je("div"),u=Je("input"),s=ir(),f=Je("input"),this.h()},l(b){e=Qe(b,"LABEL",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-yx15fj"&&(e.textContent=r),i=nr(b),o=Qe(b,"DIV",{class:!0});var A=vt(o);u=Qe(A,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),s=nr(A),f=Qe(A,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),A.forEach(he),this.h()},h(){ge(e,"class","control-label svelte-1u6mi4u"),ge(u,"class","input-text svelte-1u6mi4u"),ge(u,"type","text"),ge(u,"placeholder","Name"),u.value=c=`${t[1].toFixed(6)}`,u.readOnly=!0,Nn(u,"width","50%"),ge(f,"class","input-text svelte-1u6mi4u"),ge(f,"type","text"),ge(f,"placeholder","Name"),f.value=y=`${t[2].toFixed(6)}`,f.readOnly=!0,Nn(f,"width","50%"),ge(o,"class","flex-container svelte-1u6mi4u")},m(b,A){dt(b,e,A),dt(b,i,A),dt(b,o,A),Ke(o,u),Ke(o,s),Ke(o,f)},p(b,A){A&2&&c!==(c=`${b[1].toFixed(6)}`)&&u.value!==c&&(u.value=c),A&4&&y!==(y=`${b[2].toFixed(6)}`)&&f.value!==y&&(f.value=y)},d(b){b&&(he(e),he(i),he(o))}}}function n6(t){let e,r=dn(t[3]),i=[];for(let o=0;o<r.length;o+=1)i[o]=o6(e6(t,r,o));return{c(){e=Je("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=Qe(o,"DIV",{class:!0});var u=vt(e);for(let c=0;c<i.length;c+=1)i[c].l(u);u.forEach(he),this.h()},h(){ge(e,"class","flex-container svelte-1u6mi4u")},m(o,u){dt(o,e,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null)},p(o,u){if(u&9){r=dn(o[3]);let c;for(c=0;c<r.length;c+=1){const s=e6(o,r,c);i[c]?i[c].p(s,u):(i[c]=o6(s),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},d(o){o&&he(e),na(i,o)}}}function g$(t){let e=t[17].distance+"",r,i;return{c(){r=Fi(e),i=Fi(" km")},l(o){r=Bi(o,e),i=Bi(o," km")},m(o,u){dt(o,r,u),dt(o,i,u)},p(o,u){u&8&&e!==(e=o[17].distance+"")&&Dn(r,e)},d(o){o&&(he(r),he(i))}}}function y$(t){let e=t[17].time+"",r,i;return{c(){r=Fi(e),i=Fi(" min")},l(o){r=Bi(o,e),i=Bi(o," min")},m(o,u){dt(o,r,u),dt(o,i,u)},p(o,u){u&8&&e!==(e=o[17].time+"")&&Dn(r,e)},d(o){o&&(he(r),he(i))}}}function _$(t){let e,r,i;function o(){t[15].call(e,t[18],t[19])}return{c(){e=Je("input"),this.h()},l(u){e=Qe(u,"INPUT",{class:!0,type:!0}),this.h()},h(){ge(e,"class","input-text svelte-1u6mi4u"),ge(e,"type","number")},m(u,c){dt(u,e,c),mo(e,t[17].distance),r||(i=Dr(e,"input",o),r=!0)},p(u,c){t=u,c&8&&f2(e.value)!==t[17].distance&&mo(e,t[17].distance)},d(u){u&&he(e),r=!1,i()}}}function v$(t){let e,r,i;function o(){t[14].call(e,t[18],t[19])}return{c(){e=Je("input"),this.h()},l(u){e=Qe(u,"INPUT",{class:!0,type:!0}),this.h()},h(){ge(e,"class","input-text svelte-1u6mi4u"),ge(e,"type","number")},m(u,c){dt(u,e,c),mo(e,t[17].time),r||(i=Dr(e,"input",o),r=!0)},p(u,c){t=u,c&8&&f2(e.value)!==t[17].time&&mo(e,t[17].time)},d(u){u&&he(e),r=!1,i()}}}function o6(t){let e,r,i,o;function u(A,I){return A[0]===yu.Time?y$:g$}let c=u(t),s=c(t);function f(A,I){return A[0]===yu.Time?v$:_$}let y=f(t),b=y(t);return{c(){e=Je("div"),r=Je("label"),s.c(),i=ir(),b.c(),o=ir(),this.h()},l(A){e=Qe(A,"DIV",{class:!0,style:!0});var I=vt(e);r=Qe(I,"LABEL",{class:!0});var C=vt(r);s.l(C),C.forEach(he),i=nr(I),b.l(I),o=nr(I),I.forEach(he),this.h()},h(){ge(r,"class","control-label svelte-1u6mi4u"),ge(e,"class","flex-vertical-container svelte-1u6mi4u"),Nn(e,"width","25%")},m(A,I){dt(A,e,I),Ke(e,r),s.m(r,null),Ke(e,i),b.m(e,null),Ke(e,o)},p(A,I){c===(c=u(A))&&s?s.p(A,I):(s.d(1),s=c(A),s&&(s.c(),s.m(r,null))),y===(y=f(A))&&b?b.p(A,I):(b.d(1),b=y(A),b&&(b.c(),b.m(e,o)))},d(A){A&&he(e),s.d(),b.d()}}}function b$(t){let e,r;return e=new bo({props:{icon:h_}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function w$(t){let e,r;return e=new bo({props:{icon:E8}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function x$(t){let e,r="Type of Isochrone",i,o,u,c,s,f,y,b,A,I="Time",C,N,O,$,G,Z,ee,te,_e,le="Distance",we,ue,ze,Ue="Means of Transport",Ce,Me,qe,it,xt,yt,$e,at,mt,Xe,wt,be,Be="Calculate",Ae,ht,Nt,zt,Mt,Kt,yr;b=new bo({props:{icon:E8}}),te=new bo({props:{icon:h_}});let Er=dn(Rd),Jt=[];for(let dr=0;dr<Er.length;dr+=1)Jt[dr]=r6(t6(t,Er,dr));const It=dr=>et(Jt[dr],1,1,()=>{Jt[dr]=null});let Fr=t[1]&&t[2]&&i6(t),Ft=t[3]&&n6(t);const ct=[w$,b$],mr=[];function Jr(dr,zr){return dr[0]===yu.Time?0:1}return mt=Jr(t),Xe=mr[mt]=ct[mt](t),zt=new bo({props:{icon:f_}}),{c(){e=Je("label"),e.textContent=r,i=ir(),o=Je("div"),u=Je("label"),c=Je("input"),f=ir(),y=Je("div"),Ht(b.$$.fragment),A=ir(),C=Fi(I),N=ir(),O=Je("label"),$=Je("input"),Z=ir(),ee=Je("div"),Ht(te.$$.fragment),_e=ir(),we=Fi(le),ue=ir(),ze=Je("label"),ze.textContent=Ue,Ce=ir(),Me=Je("div");for(let dr=0;dr<Jt.length;dr+=1)Jt[dr].c();qe=ir(),Fr&&Fr.c(),it=ir(),Ft&&Ft.c(),xt=ir(),yt=Je("div"),$e=Je("button"),at=Je("span"),Xe.c(),wt=ir(),be=Je("span"),be.textContent=Be,Ae=ir(),ht=Je("button"),Nt=Je("span"),Ht(zt.$$.fragment),this.h()},l(dr){e=Qe(dr,"LABEL",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-a1mmyq"&&(e.textContent=r),i=nr(dr),o=Qe(dr,"DIV",{class:!0});var zr=vt(o);u=Qe(zr,"LABEL",{class:!0,style:!0});var ri=vt(u);c=Qe(ri,"INPUT",{type:!0,name:!0}),f=nr(ri),y=Qe(ri,"DIV",{class:!0});var Vr=vt(y);Yt(b.$$.fragment,Vr),Vr.forEach(he),A=nr(ri),C=Bi(ri,I),ri.forEach(he),N=nr(zr),O=Qe(zr,"LABEL",{class:!0,style:!0});var _i=vt(O);$=Qe(_i,"INPUT",{type:!0,name:!0}),Z=nr(_i),ee=Qe(_i,"DIV",{class:!0});var Hi=vt(ee);Yt(te.$$.fragment,Hi),Hi.forEach(he),_e=nr(_i),we=Bi(_i,le),_i.forEach(he),zr.forEach(he),ue=nr(dr),ze=Qe(dr,"LABEL",{class:!0,"data-svelte-h":!0}),vo(ze)!=="svelte-a1rqcx"&&(ze.textContent=Ue),Ce=nr(dr),Me=Qe(dr,"DIV",{class:!0});var Nr=vt(Me);for(let Br=0;Br<Jt.length;Br+=1)Jt[Br].l(Nr);Nr.forEach(he),qe=nr(dr),Fr&&Fr.l(dr),it=nr(dr),Ft&&Ft.l(dr),xt=nr(dr),yt=Qe(dr,"DIV",{class:!0});var ji=vt(yt);$e=Qe(ji,"BUTTON",{class:!0});var Ui=vt($e);at=Qe(Ui,"SPAN",{class:!0});var an=vt(at);Xe.l(an),an.forEach(he),wt=nr(Ui),be=Qe(Ui,"SPAN",{"data-svelte-h":!0}),vo(be)!=="svelte-tdh5yu"&&(be.textContent=Be),Ui.forEach(he),Ae=nr(ji),ht=Qe(ji,"BUTTON",{class:!0});var Gi=vt(ht);Nt=Qe(Gi,"SPAN",{});var Or=vt(Nt);Yt(zt.$$.fragment,Or),Or.forEach(he),Gi.forEach(he),ji.forEach(he),this.h()},h(){ge(e,"class","control-label svelte-1u6mi4u"),ge(c,"type","radio"),ge(c,"name","isochrone-"+yu.Time),c.checked=s=t[0]===yu.Time,ge(y,"class","icon is-small is-left pl-3 pr-3 svelte-1u6mi4u"),ge(u,"class","radio-transport svelte-1u6mi4u"),Nn(u,"color","black"),ge($,"type","radio"),ge($,"name","isochrone-"+yu.Distance),$.checked=G=t[0]===yu.Distance,ge(ee,"class","icon is-small is-left pl-3 pr-3 svelte-1u6mi4u"),ge(O,"class","radio-transport svelte-1u6mi4u"),Nn(O,"color","black"),ge(o,"class","transport-select-container svelte-1u6mi4u"),ge(ze,"class","control-label svelte-1u6mi4u"),ge(Me,"class","transport-select-container svelte-1u6mi4u"),ge(at,"class","control-icon svelte-1u6mi4u"),ge($e,"class","control-button svelte-1u6mi4u"),ge(ht,"class","setting-button svelte-1u6mi4u"),ge(yt,"class","valhalla-container svelte-1u6mi4u")},m(dr,zr){dt(dr,e,zr),dt(dr,i,zr),dt(dr,o,zr),Ke(o,u),Ke(u,c),Ke(u,f),Ke(u,y),$t(b,y,null),Ke(u,A),Ke(u,C),Ke(o,N),Ke(o,O),Ke(O,$),Ke(O,Z),Ke(O,ee),$t(te,ee,null),Ke(O,_e),Ke(O,we),dt(dr,ue,zr),dt(dr,ze,zr),dt(dr,Ce,zr),dt(dr,Me,zr);for(let ri=0;ri<Jt.length;ri+=1)Jt[ri]&&Jt[ri].m(Me,null);dt(dr,qe,zr),Fr&&Fr.m(dr,zr),dt(dr,it,zr),Ft&&Ft.m(dr,zr),dt(dr,xt,zr),dt(dr,yt,zr),Ke(yt,$e),Ke($e,at),mr[mt].m(at,null),Ke($e,wt),Ke($e,be),Ke(yt,Ae),Ke(yt,ht),Ke(ht,Nt),$t(zt,Nt,null),Mt=!0,Kt||(yr=[Dr(c,"click",t[11]),Dr($,"click",t[12]),Dr($e,"click",t[16]),Dr(ht,"click",t[6])],Kt=!0)},p(dr,[zr]){if((!Mt||zr&1&&s!==(s=dr[0]===yu.Time))&&(c.checked=s),(!Mt||zr&1&&G!==(G=dr[0]===yu.Distance))&&($.checked=G),zr&16){Er=dn(Rd);let Vr;for(Vr=0;Vr<Er.length;Vr+=1){const _i=t6(dr,Er,Vr);Jt[Vr]?(Jt[Vr].p(_i,zr),We(Jt[Vr],1)):(Jt[Vr]=r6(_i),Jt[Vr].c(),We(Jt[Vr],1),Jt[Vr].m(Me,null))}for(gn(),Vr=Er.length;Vr<Jt.length;Vr+=1)It(Vr);yn()}dr[1]&&dr[2]?Fr?Fr.p(dr,zr):(Fr=i6(dr),Fr.c(),Fr.m(it.parentNode,it)):Fr&&(Fr.d(1),Fr=null),dr[3]?Ft?Ft.p(dr,zr):(Ft=n6(dr),Ft.c(),Ft.m(xt.parentNode,xt)):Ft&&(Ft.d(1),Ft=null);let ri=mt;mt=Jr(dr),mt===ri?mr[mt].p(dr,zr):(gn(),et(mr[ri],1,1,()=>{mr[ri]=null}),yn(),Xe=mr[mt],Xe?Xe.p(dr,zr):(Xe=mr[mt]=ct[mt](dr),Xe.c()),We(Xe,1),Xe.m(at,null))},i(dr){if(!Mt){We(b.$$.fragment,dr),We(te.$$.fragment,dr);for(let zr=0;zr<Er.length;zr+=1)We(Jt[zr]);We(Xe),We(zt.$$.fragment,dr),Mt=!0}},o(dr){et(b.$$.fragment,dr),et(te.$$.fragment,dr),Jt=Jt.filter(Boolean);for(let zr=0;zr<Jt.length;zr+=1)et(Jt[zr]);et(Xe),et(zt.$$.fragment,dr),Mt=!1},d(dr){dr&&(he(e),he(i),he(o),he(ue),he(ze),he(Ce),he(Me),he(qe),he(it),he(xt),he(yt)),Gt(b),Gt(te),na(Jt,dr),Fr&&Fr.d(dr),Ft&&Ft.d(dr),mr[mt].d(),Gt(zt),Kt=!1,oo(yr)}}}function k$(t,e,r){let i;Ga(t,ty,te=>r(10,i=te));let{map:o}=e,{url:u}=e,{options:c}=e,s=yu.Time,f,y,b=c.Contours;b||(b=[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]);let A=Rd[0].value;const I=te=>{i==null||i.getIsochrone(Number(f),Number(y),te,A,JSON.parse(JSON.stringify(b)))},C=()=>{i==null||i.clearFeatures()},N=()=>{r(0,s=yu.Time)},O=()=>{r(0,s=yu.Distance)},$=te=>{r(4,A=te.value)};function G(te,_e){te[_e].time=f2(this.value),r(3,b)}function Z(te,_e){te[_e].distance=f2(this.value),r(3,b)}const ee=()=>I(s);return t.$$set=te=>{"map"in te&&r(7,o=te.map),"url"in te&&r(8,u=te.url),"options"in te&&r(9,c=te.options)},t.$$.update=()=>{t.$$.dirty&1408&&o&&(i||ty.update(()=>{}),i||Lh(ty,i=new m$(o,u),i),r(1,f=o.getCenter().lng),r(2,y=o.getCenter().lat),o.on("moveend",()=>{r(1,f=o.getCenter().lng),r(2,y=o.getCenter().lat)}))},[s,f,y,b,A,I,C,o,u,c,i,N,O,$,G,Z,ee]}class A$ extends di{constructor(e){super(),pi(this,e,k$,x$,hi,{map:7,url:8,options:9})}}const mh="routing-controls-source-line",iy="routing-controls-layer-line",ny="routing-controls-layer-line-label",oy="routing-controls-layer-symbol",cp="routing-controls-source-symbol";class S${constructor(e,r,i){li(this,"map");li(this,"tripData",[]);li(this,"url");li(this,"options",{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1});li(this,"tripSummary");li(this,"isRouting",!1);li(this,"isClickListenerAdded",!1);this.map=e,this.url=r,i&&(this.options=Object.assign(this.options,i))}getTripData(){return this.tripData}getTripSummary(){return this.tripSummary}clearFeatures(){this.map&&(this.map.getLayer(iy)&&this.map.removeLayer(iy),this.map.getLayer(ny)&&this.map.removeLayer(ny),this.map.getLayer(oy)&&this.map.removeLayer(oy),this.map.getSource(mh)&&this.map.removeSource(mh),this.map.getSource(cp)&&this.map.removeSource(cp)),this.tripData=[],this.tripSummary=void 0,this.map.fire("routing.clear")}addingPointOn(){this.map.getCanvas().style.cursor="crosshair",this.isClickListenerAdded||(this.map.on("click",this.mapClickListener.bind(this)),this.isClickListenerAdded=!0),this.map.fire("routing.on"),this.isRouting=!0}addingPointOff(){this.map.getCanvas().style.cursor="",this.map.off("click",this.mapClickListener.bind(this)),this.map.fire("routing.off"),this.isRouting=!1}mapClickListener(e){if(!this.isRouting)return;const r=e.lngLat;this.tripData||(this.tripData=[]),this.tripData=[...this.tripData,r],this.map.fire("routing.point.added")}calcRoute(e){if(!this.tripData||this.tripData&&this.tripData.length<2){this.tripSummary=void 0;return}this.map.fire("routing.error",{message:""});const r=`${this.url}/route`,i={locations:this.tripData.map(u=>({lon:u.lng,lat:u.lat})),costing:e,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},o=`${r}?json=${JSON.stringify(i)}`;fetch(o).then(u=>u.json()).then(u=>{if("error"in u)throw this.tripData.pop(),new Error(`${u.status} (${u.status_code}): ${u.error} (${u.error_code})`);const c=u.trip.legs.map(b=>this.decodeShape(b.shape));let s=[];c.forEach(b=>{s=[...s,...b]}),this.tripSummary=u.trip.summary,this.tripSummary.length=Number(this.tripSummary.length.toFixed(2)),this.tripSummary.time=Number((this.tripSummary.time/60).toFixed());const f={type:"FeatureCollection",features:u.trip.legs.map(b=>{const A=this.decodeShape(b.shape),I={length:Number(b.summary.length.toFixed(2)),time:Number((b.summary.time/60).toFixed())};return this.geoLineString(A,I)})},y=this.geoPoint(this.tripData.map(b=>[b.lng,b.lat]));this.map.fire("routing.calc.done"),this.map&&(this.map.getSource(mh)?(this.map.getSource(mh).setData(f),this.map.getSource(cp).setData(y)):(this.map.addSource(mh,{type:"geojson",data:f}),this.map.addSource(cp,{type:"geojson",data:y}),this.map.addLayer({id:iy,type:"line",source:mh,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),this.map.addLayer({id:ny,type:"symbol",source:mh,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":this.options.font,"text-size":this.options.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":this.options.fontColor,"text-halo-color":this.options.fontHaloColor,"text-halo-width":this.options.fontHalo}}),this.map.addLayer({id:oy,type:"symbol",source:cp,layout:{"icon-image":this.options.iconImage,"icon-size":this.options.iconSize,"text-field":["get","text"],"text-font":this.options.font,"text-size":this.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":this.options.fontColor,"text-halo-color":this.options.fontHaloColor,"text-halo-width":this.options.fontHalo}})))}).catch(u=>{console.error(u),this.map.fire("routing.error",{message:u.message})})}geoLineString(e=[],r={}){return{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:e}}}geoPoint(e=[]){return{type:"FeatureCollection",features:e.map((r,i)=>{let o=(i+1).toString();return i===0?o="From":i===e.length-1&&(o="To"),{type:"Feature",properties:{text:o},geometry:{type:"Point",coordinates:r}}})}}decodeShape(e,r=6){let i=0,o=0,u=0,c=[],s=0,f=0,y=null,b,A,I=Math.pow(10,r||6);for(;i<e.length;){y=null,s=0,f=0;do y=e.charCodeAt(i++)-63,f|=(y&31)<<s,s+=5;while(y>=32);b=f&1?~(f>>1):f>>1,s=f=0;do y=e.charCodeAt(i++)-63,f|=(y&31)<<s,s+=5;while(y>=32);A=f&1?~(f>>1):f>>1,o+=b,u+=A,c.push([u/I,o/I])}return c}}function a6(t,e,r){const i=t.slice();return i[14]=e[r],i}function s6(t){let e,r,i,o,u,c,s,f=t[14].label+"",y,b,A,I,C;function N(){return t[12](t[14])}return c=new bo({props:{icon:t[14].icon}}),{c(){e=Je("label"),r=Je("input"),o=ir(),u=Je("span"),Ht(c.$$.fragment),s=ir(),y=Fi(f),b=ir(),this.h()},l(O){e=Qe(O,"LABEL",{class:!0,style:!0});var $=vt(e);r=Qe($,"INPUT",{type:!0,name:!0}),o=nr($),u=Qe($,"SPAN",{class:!0});var G=vt(u);Yt(c.$$.fragment,G),G.forEach(he),s=nr($),y=Bi($,f),b=nr($),$.forEach(he),this.h()},h(){ge(r,"type","radio"),ge(r,"name","transport-routing"),r.checked=i=t[0]===t[14].value,ge(u,"class","icon svelte-18sva3g"),ge(e,"class","radio-transport svelte-18sva3g"),Nn(e,"color","black")},m(O,$){dt(O,e,$),Ke(e,r),Ke(e,o),Ke(e,u),$t(c,u,null),Ke(e,s),Ke(e,y),Ke(e,b),A=!0,I||(C=Dr(r,"click",N),I=!0)},p(O,$){t=O,(!A||$&1&&i!==(i=t[0]===t[14].value))&&(r.checked=i)},i(O){A||(We(c.$$.fragment,O),A=!0)},o(O){et(c.$$.fragment,O),A=!1},d(O){O&&he(e),Gt(c),I=!1,C()}}}function E$(t){let e,r;return e=new bo({props:{icon:_S}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function C$(t){let e,r;return e=new bo({props:{icon:I8}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function I$(t){let e;return{c(){e=Fi("Start routing")},l(r){e=Bi(r,"Start routing")},m(r,i){dt(r,e,i)},d(r){r&&he(e)}}}function L$(t){let e;return{c(){e=Fi("Stop routing")},l(r){e=Bi(r,"Stop routing")},m(r,i){dt(r,e,i)},d(r){r&&he(e)}}}function l6(t){let e,r="From",i,o,u,c,s,f,y,b,A,I,C,N=t[1].length>1&&u6(t),O=t[3]&&c6(t),$=t[4]&&f6(t);return{c(){e=Je("label"),e.textContent=r,i=ir(),o=Je("div"),u=Je("input"),s=ir(),f=Je("input"),b=ir(),N&&N.c(),A=ir(),O&&O.c(),I=ir(),$&&$.c(),C=pn(),this.h()},l(G){e=Qe(G,"LABEL",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-yx15fj"&&(e.textContent=r),i=nr(G),o=Qe(G,"DIV",{class:!0});var Z=vt(o);u=Qe(Z,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),s=nr(Z),f=Qe(Z,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),Z.forEach(he),b=nr(G),N&&N.l(G),A=nr(G),O&&O.l(G),I=nr(G),$&&$.l(G),C=pn(),this.h()},h(){ge(e,"class","control-label svelte-18sva3g"),ge(u,"class","input-text svelte-18sva3g"),ge(u,"type","text"),ge(u,"placeholder","Name"),u.value=c=`${t[1][0].lng.toFixed(6)}`,u.readOnly=!0,Nn(u,"width","50%"),ge(f,"class","input-text svelte-18sva3g"),ge(f,"type","text"),ge(f,"placeholder","Name"),f.value=y=`${t[1][0].lat.toFixed(6)}`,f.readOnly=!0,Nn(f,"width","50%"),ge(o,"class","flex-container svelte-18sva3g")},m(G,Z){dt(G,e,Z),dt(G,i,Z),dt(G,o,Z),Ke(o,u),Ke(o,s),Ke(o,f),dt(G,b,Z),N&&N.m(G,Z),dt(G,A,Z),O&&O.m(G,Z),dt(G,I,Z),$&&$.m(G,Z),dt(G,C,Z)},p(G,Z){Z&2&&c!==(c=`${G[1][0].lng.toFixed(6)}`)&&u.value!==c&&(u.value=c),Z&2&&y!==(y=`${G[1][0].lat.toFixed(6)}`)&&f.value!==y&&(f.value=y),G[1].length>1?N?N.p(G,Z):(N=u6(G),N.c(),N.m(A.parentNode,A)):N&&(N.d(1),N=null),G[3]?O?O.p(G,Z):(O=c6(G),O.c(),O.m(I.parentNode,I)):O&&(O.d(1),O=null),G[4]?$?$.p(G,Z):($=f6(G),$.c(),$.m(C.parentNode,C)):$&&($.d(1),$=null)},d(G){G&&(he(e),he(i),he(o),he(b),he(A),he(I),he(C)),N&&N.d(G),O&&O.d(G),$&&$.d(G)}}}function u6(t){let e,r="To",i,o,u,c,s,f,y;return{c(){e=Je("label"),e.textContent=r,i=ir(),o=Je("div"),u=Je("input"),s=ir(),f=Je("input"),this.h()},l(b){e=Qe(b,"LABEL",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-18n534k"&&(e.textContent=r),i=nr(b),o=Qe(b,"DIV",{class:!0});var A=vt(o);u=Qe(A,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),s=nr(A),f=Qe(A,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),A.forEach(he),this.h()},h(){ge(e,"class","control-label svelte-18sva3g"),ge(u,"class","input-text svelte-18sva3g"),ge(u,"type","text"),ge(u,"placeholder","Name"),u.value=c=`${t[1][t[1].length-1].lng.toFixed(6)}`,u.readOnly=!0,Nn(u,"width","50%"),ge(f,"class","input-text svelte-18sva3g"),ge(f,"type","text"),ge(f,"placeholder","Name"),f.value=y=`${t[1][t[1].length-1].lat.toFixed(6)}`,f.readOnly=!0,Nn(f,"width","50%"),ge(o,"class","flex-container svelte-18sva3g")},m(b,A){dt(b,e,A),dt(b,i,A),dt(b,o,A),Ke(o,u),Ke(o,s),Ke(o,f)},p(b,A){A&2&&c!==(c=`${b[1][b[1].length-1].lng.toFixed(6)}`)&&u.value!==c&&(u.value=c),A&2&&y!==(y=`${b[1][b[1].length-1].lat.toFixed(6)}`)&&f.value!==y&&(f.value=y)},d(b){b&&(he(e),he(i),he(o))}}}function c6(t){let e,r,i,o="Length",u,c,s,f,y,b,A="Time",I,C,N;return{c(){e=Je("div"),r=Je("div"),i=Je("label"),i.textContent=o,u=ir(),c=Je("input"),f=ir(),y=Je("div"),b=Je("label"),b.textContent=A,I=ir(),C=Je("input"),this.h()},l(O){e=Qe(O,"DIV",{class:!0});var $=vt(e);r=Qe($,"DIV",{class:!0,style:!0});var G=vt(r);i=Qe(G,"LABEL",{class:!0,"data-svelte-h":!0}),vo(i)!=="svelte-upj207"&&(i.textContent=o),u=nr(G),c=Qe(G,"INPUT",{class:!0,type:!0}),G.forEach(he),f=nr($),y=Qe($,"DIV",{class:!0,style:!0});var Z=vt(y);b=Qe(Z,"LABEL",{class:!0,"data-svelte-h":!0}),vo(b)!=="svelte-19nds9k"&&(b.textContent=A),I=nr(Z),C=Qe(Z,"INPUT",{class:!0,type:!0}),Z.forEach(he),$.forEach(he),this.h()},h(){ge(i,"class","control-label svelte-18sva3g"),ge(c,"class","input-text svelte-18sva3g"),ge(c,"type","text"),c.value=s=`${t[3].length} km`,c.readOnly=!0,ge(r,"class","flex-vertical-container svelte-18sva3g"),Nn(r,"width","50%"),ge(b,"class","control-label svelte-18sva3g"),ge(C,"class","input-text svelte-18sva3g"),ge(C,"type","text"),C.value=N=`${t[3].time} min`,C.readOnly=!0,ge(y,"class","flex-vertical-container svelte-18sva3g"),Nn(y,"width","50%"),ge(e,"class","flex-container svelte-18sva3g")},m(O,$){dt(O,e,$),Ke(e,r),Ke(r,i),Ke(r,u),Ke(r,c),Ke(e,f),Ke(e,y),Ke(y,b),Ke(y,I),Ke(y,C)},p(O,$){$&8&&s!==(s=`${O[3].length} km`)&&c.value!==s&&(c.value=s),$&8&&N!==(N=`${O[3].time} min`)&&C.value!==N&&(C.value=N)},d(O){O&&he(e)}}}function f6(t){let e,r;return{c(){e=Je("div"),r=Fi(t[4]),this.h()},l(i){e=Qe(i,"DIV",{class:!0});var o=vt(e);r=Bi(o,t[4]),o.forEach(he),this.h()},h(){ge(e,"class","notification svelte-18sva3g")},m(i,o){dt(i,e,o),Ke(e,r)},p(i,o){o&16&&Dn(r,i[4])},d(i){i&&he(e)}}}function T$(t){let e,r="Means of Transport",i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le,we=dn(Rd),ue=[];for(let $e=0;$e<we.length;$e+=1)ue[$e]=s6(a6(t,we,$e));const ze=$e=>et(ue[$e],1,1,()=>{ue[$e]=null}),Ue=[C$,E$],Ce=[];function Me($e,at){return $e[2]?0:1}y=Me(t),b=Ce[y]=Ue[y](t);function qe($e,at){return $e[2]?L$:I$}let it=qe(t),xt=it(t);$=new bo({props:{icon:f_}});let yt=t[1]&&t[1].length>0&&l6(t);return{c(){e=Je("label"),e.textContent=r,i=ir(),o=Je("div");for(let $e=0;$e<ue.length;$e+=1)ue[$e].c();u=ir(),c=Je("div"),s=Je("button"),f=Je("span"),b.c(),A=ir(),I=Je("span"),xt.c(),C=ir(),N=Je("button"),O=Je("span"),Ht($.$$.fragment),Z=ir(),yt&&yt.c(),ee=pn(),this.h()},l($e){e=Qe($e,"LABEL",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-a1rqcx"&&(e.textContent=r),i=nr($e),o=Qe($e,"DIV",{class:!0});var at=vt(o);for(let ht=0;ht<ue.length;ht+=1)ue[ht].l(at);at.forEach(he),u=nr($e),c=Qe($e,"DIV",{class:!0});var mt=vt(c);s=Qe(mt,"BUTTON",{class:!0});var Xe=vt(s);f=Qe(Xe,"SPAN",{class:!0});var wt=vt(f);b.l(wt),wt.forEach(he),A=nr(Xe),I=Qe(Xe,"SPAN",{});var be=vt(I);xt.l(be),be.forEach(he),Xe.forEach(he),C=nr(mt),N=Qe(mt,"BUTTON",{class:!0});var Be=vt(N);O=Qe(Be,"SPAN",{});var Ae=vt(O);Yt($.$$.fragment,Ae),Ae.forEach(he),Be.forEach(he),mt.forEach(he),Z=nr($e),yt&&yt.l($e),ee=pn(),this.h()},h(){ge(e,"class","control-label svelte-18sva3g"),ge(o,"class","transport-select-container svelte-18sva3g"),ge(f,"class","control-icon svelte-18sva3g"),ge(s,"class","control-button svelte-18sva3g"),ge(N,"class","setting-button svelte-18sva3g"),N.disabled=G=!t[5],ge(c,"class","valhalla-container svelte-18sva3g")},m($e,at){dt($e,e,at),dt($e,i,at),dt($e,o,at);for(let mt=0;mt<ue.length;mt+=1)ue[mt]&&ue[mt].m(o,null);dt($e,u,at),dt($e,c,at),Ke(c,s),Ke(s,f),Ce[y].m(f,null),Ke(s,A),Ke(s,I),xt.m(I,null),Ke(c,C),Ke(c,N),Ke(N,O),$t($,O,null),dt($e,Z,at),yt&&yt.m($e,at),dt($e,ee,at),te=!0,_e||(le=[Dr(s,"click",t[6]),Dr(N,"click",t[7])],_e=!0)},p($e,[at]){if(at&1){we=dn(Rd);let Xe;for(Xe=0;Xe<we.length;Xe+=1){const wt=a6($e,we,Xe);ue[Xe]?(ue[Xe].p(wt,at),We(ue[Xe],1)):(ue[Xe]=s6(wt),ue[Xe].c(),We(ue[Xe],1),ue[Xe].m(o,null))}for(gn(),Xe=we.length;Xe<ue.length;Xe+=1)ze(Xe);yn()}let mt=y;y=Me($e),y===mt?Ce[y].p($e,at):(gn(),et(Ce[mt],1,1,()=>{Ce[mt]=null}),yn(),b=Ce[y],b?b.p($e,at):(b=Ce[y]=Ue[y]($e),b.c()),We(b,1),b.m(f,null)),it!==(it=qe($e))&&(xt.d(1),xt=it($e),xt&&(xt.c(),xt.m(I,null))),(!te||at&32&&G!==(G=!$e[5]))&&(N.disabled=G),$e[1]&&$e[1].length>0?yt?yt.p($e,at):(yt=l6($e),yt.c(),yt.m(ee.parentNode,ee)):yt&&(yt.d(1),yt=null)},i($e){if(!te){for(let at=0;at<we.length;at+=1)We(ue[at]);We(b),We($.$$.fragment,$e),te=!0}},o($e){ue=ue.filter(Boolean);for(let at=0;at<ue.length;at+=1)et(ue[at]);et(b),et($.$$.fragment,$e),te=!1},d($e){$e&&(he(e),he(i),he(o),he(u),he(c),he(Z),he(ee)),na(ue,$e),Ce[y].d(),xt.d(),Gt($),yt&&yt.d($e),_e=!1,oo(le)}}}function P$(t,e,r){let i,o;Ga(t,ry,G=>r(11,o=G));let{map:u}=e,{url:c}=e,{options:s}=e,f=!1,y=Rd[0].value,b,A=[],I="";R2(()=>{o&&f===!0&&o.addingPointOff()});const C=()=>{o&&(f?o.addingPointOff():o.addingPointOn())},N=()=>{o&&o.calcRoute(y)},O=()=>{o&&o.clearFeatures()},$=G=>{r(0,y=G.value)};return t.$$set=G=>{"map"in G&&r(8,u=G.map),"url"in G&&r(9,c=G.url),"options"in G&&r(10,s=G.options)},t.$$.update=()=>{t.$$.dirty&3840&&u&&(o||ry.update(()=>{}),o||Lh(ry,o=new S$(u,c,s),o),u.on("routing.on",()=>{r(2,f=!0)}),u.on("routing.off",()=>{r(2,f=!1),o&&(r(3,b=o.getTripSummary()),r(1,A=o.getTripData()))}),u.on("routing.point.added",()=>{o&&r(1,A=o.getTripData())}),u.on("routing.calc.done",()=>{o&&r(3,b=o.getTripSummary())}),u.on("routing.clear",()=>{o&&(r(3,b=o.getTripSummary()),r(1,A=o.getTripData()))}),u.on("routing.error",G=>{r(4,I=G.message)})),t.$$.dirty&2&&r(5,i=A&&A.length>0),t.$$.dirty&2&&N(),t.$$.dirty&1&&N()},[y,A,f,b,I,i,C,O,u,c,s,o,$]}class M$ extends di{constructor(e){super(),pi(this,e,P$,T$,hi,{map:8,url:9,options:10})}}function D$(t){let e,r;return e=new bo({props:{icon:PS,color:"white"}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function z$(t){let e,r;return e=new bo({props:{icon:ES,color:"white"}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p:mi,i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function N$(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N;const O=[z$,D$],$=[];function G(te,_e){return te[0]?0:1}o=G(t),u=$[o]=O[o](t);const Z=t[5].default,ee=wl(Z,t,t[4],null);return{c(){e=Je("nav"),r=Je("div"),i=Je("span"),u.c(),c=ir(),s=Fi(t[1]),f=ir(),y=Je("div"),ee&&ee.c(),this.h()},l(te){e=Qe(te,"NAV",{class:!0});var _e=vt(e);r=Qe(_e,"DIV",{class:!0,role:!0,tabindex:!0});var le=vt(r);i=Qe(le,"SPAN",{class:!0});var we=vt(i);u.l(we),we.forEach(he),c=nr(le),s=Bi(le,t[1]),le.forEach(he),f=nr(_e),y=Qe(_e,"DIV",{class:!0});var ue=vt(y);ee&&ee.l(ue),ue.forEach(he),_e.forEach(he),this.h()},h(){ge(i,"class","panel-icon mt-1 svelte-ybxbti"),ge(r,"class","panel-heading p-2 header-menu svelte-ybxbti"),ge(r,"role","button"),ge(r,"tabindex","0"),ge(y,"class","container m-2 svelte-ybxbti"),y.hidden=b=!t[0],ge(e,"class",A="panel "+t[2]+" my-1 mx-1 svelte-ybxbti")},m(te,_e){dt(te,e,_e),Ke(e,r),Ke(r,i),$[o].m(i,null),Ke(r,c),Ke(r,s),Ke(e,f),Ke(e,y),ee&&ee.m(y,null),I=!0,C||(N=[Dr(r,"click",t[6]),Dr(r,"keydown",t[3])],C=!0)},p(te,[_e]){let le=o;o=G(te),o===le?$[o].p(te,_e):(gn(),et($[le],1,1,()=>{$[le]=null}),yn(),u=$[o],u?u.p(te,_e):(u=$[o]=O[o](te),u.c()),We(u,1),u.m(i,null)),(!I||_e&2)&&Dn(s,te[1]),ee&&ee.p&&(!I||_e&16)&&xl(ee,Z,te,te[4],I?Al(Z,te[4],_e,null):kl(te[4]),null),(!I||_e&1&&b!==(b=!te[0]))&&(y.hidden=b),(!I||_e&4&&A!==(A="panel "+te[2]+" my-1 mx-1 svelte-ybxbti"))&&ge(e,"class",A)},i(te){I||(We(u),We(ee,te),I=!0)},o(te){et(u),et(ee,te),I=!1},d(te){te&&he(e),$[o].d(),ee&&ee.d(te),C=!1,oo(N)}}}function R$(t,e,r){let{$$slots:i={},$$scope:o}=e,{title:u}=e,{isPanelOpen:c=!1}=e,{color:s=""}=e;const f=b=>{b.key==="Enter"&&b.target.click()},y=()=>r(0,c=!c);return t.$$set=b=>{"title"in b&&r(1,u=b.title),"isPanelOpen"in b&&r(0,c=b.isPanelOpen),"color"in b&&r(2,s=b.color),"$$scope"in b&&r(4,o=b.$$scope)},[c,u,s,f,o,i,y]}class o_ extends di{constructor(e){super(),pi(this,e,R$,N$,hi,{title:1,isPanelOpen:0,color:2})}}function h6(t){let e,r,i;function o(c){t[9](c)}let u={title:"Measuring tool",color:a_,$$slots:{default:[O$]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.isPanelOpen=t[0]),e=new o_({props:u}),Ut.push(()=>Xt(e,"isPanelOpen",o)),{c(){Ht(e.$$.fragment)},l(c){Yt(e.$$.fragment,c)},m(c,s){$t(e,c,s),i=!0},p(c,s){const f={};s&524312&&(f.$$scope={dirty:s,ctx:c}),!r&&s&1&&(r=!0,f.isPanelOpen=c[0],er(()=>r=!1)),e.$set(f)},i(c){i||(We(e.$$.fragment,c),i=!0)},o(c){et(e.$$.fragment,c),i=!1},d(c){Gt(e,c)}}}function O$(t){let e,r,i,o,u,c;function s(A){t[6](A)}function f(A){t[7](A)}function y(A){t[8](A)}let b={};return t[4]!==void 0&&(b.map=t[4]),t[3].elevation.options!==void 0&&(b.measureOption=t[3].elevation.options),t[3].elevation.url!==void 0&&(b.terrainRgbUrl=t[3].elevation.url),r=new d$({props:b}),Ut.push(()=>Xt(r,"map",s)),Ut.push(()=>Xt(r,"measureOption",f)),Ut.push(()=>Xt(r,"terrainRgbUrl",y)),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(A){e=Qe(A,"DIV",{class:!0});var I=vt(e);Yt(r.$$.fragment,I),I.forEach(he),this.h()},h(){ge(e,"class","accordion-content svelte-1toti4c")},m(A,I){dt(A,e,I),$t(r,e,null),c=!0},p(A,I){const C={};!i&&I&16&&(i=!0,C.map=A[4],er(()=>i=!1)),!o&&I&8&&(o=!0,C.measureOption=A[3].elevation.options,er(()=>o=!1)),!u&&I&8&&(u=!0,C.terrainRgbUrl=A[3].elevation.url,er(()=>u=!1)),r.$set(C)},i(A){c||(We(r.$$.fragment,A),c=!0)},o(A){et(r.$$.fragment,A),c=!1},d(A){A&&he(e),Gt(r)}}}function d6(t){let e,r,i,o,u,c;function s(A){t[13](A)}let f={title:"Routing tool",color:a_,$$slots:{default:[F$]},$$scope:{ctx:t}};t[1]!==void 0&&(f.isPanelOpen=t[1]),e=new o_({props:f}),Ut.push(()=>Xt(e,"isPanelOpen",s));function y(A){t[17](A)}let b={title:"Isochrone analysis",color:a_,$$slots:{default:[B$]},$$scope:{ctx:t}};return t[2]!==void 0&&(b.isPanelOpen=t[2]),o=new o_({props:b}),Ut.push(()=>Xt(o,"isPanelOpen",y)),{c(){Ht(e.$$.fragment),i=ir(),Ht(o.$$.fragment)},l(A){Yt(e.$$.fragment,A),i=nr(A),Yt(o.$$.fragment,A)},m(A,I){$t(e,A,I),dt(A,i,I),$t(o,A,I),c=!0},p(A,I){const C={};I&524312&&(C.$$scope={dirty:I,ctx:A}),!r&&I&2&&(r=!0,C.isPanelOpen=A[1],er(()=>r=!1)),e.$set(C);const N={};I&524312&&(N.$$scope={dirty:I,ctx:A}),!u&&I&4&&(u=!0,N.isPanelOpen=A[2],er(()=>u=!1)),o.$set(N)},i(A){c||(We(e.$$.fragment,A),We(o.$$.fragment,A),c=!0)},o(A){et(e.$$.fragment,A),et(o.$$.fragment,A),c=!1},d(A){A&&he(i),Gt(e,A),Gt(o,A)}}}function F$(t){let e,r,i,o,u,c;function s(A){t[10](A)}function f(A){t[11](A)}function y(A){t[12](A)}let b={};return t[4]!==void 0&&(b.map=t[4]),t[3].valhalla.url!==void 0&&(b.url=t[3].valhalla.url),t[3].valhalla.routingOptions!==void 0&&(b.options=t[3].valhalla.routingOptions),r=new M$({props:b}),Ut.push(()=>Xt(r,"map",s)),Ut.push(()=>Xt(r,"url",f)),Ut.push(()=>Xt(r,"options",y)),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(A){e=Qe(A,"DIV",{class:!0});var I=vt(e);Yt(r.$$.fragment,I),I.forEach(he),this.h()},h(){ge(e,"class","accordion-content svelte-1toti4c")},m(A,I){dt(A,e,I),$t(r,e,null),c=!0},p(A,I){const C={};!i&&I&16&&(i=!0,C.map=A[4],er(()=>i=!1)),!o&&I&8&&(o=!0,C.url=A[3].valhalla.url,er(()=>o=!1)),!u&&I&8&&(u=!0,C.options=A[3].valhalla.routingOptions,er(()=>u=!1)),r.$set(C)},i(A){c||(We(r.$$.fragment,A),c=!0)},o(A){et(r.$$.fragment,A),c=!1},d(A){A&&he(e),Gt(r)}}}function B$(t){let e,r,i,o,u,c;function s(A){t[14](A)}function f(A){t[15](A)}function y(A){t[16](A)}let b={};return t[4]!==void 0&&(b.map=t[4]),t[3].valhalla.url!==void 0&&(b.url=t[3].valhalla.url),t[3].valhalla.isoChroneOptions!==void 0&&(b.options=t[3].valhalla.isoChroneOptions),r=new A$({props:b}),Ut.push(()=>Xt(r,"map",s)),Ut.push(()=>Xt(r,"url",f)),Ut.push(()=>Xt(r,"options",y)),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(A){e=Qe(A,"DIV",{class:!0});var I=vt(e);Yt(r.$$.fragment,I),I.forEach(he),this.h()},h(){ge(e,"class","accordion-content svelte-1toti4c")},m(A,I){dt(A,e,I),$t(r,e,null),c=!0},p(A,I){const C={};!i&&I&16&&(i=!0,C.map=A[4],er(()=>i=!1)),!o&&I&8&&(o=!0,C.url=A[3].valhalla.url,er(()=>o=!1)),!u&&I&8&&(u=!0,C.options=A[3].valhalla.isoChroneOptions,er(()=>u=!1)),r.$set(C)},i(A){c||(We(r.$$.fragment,A),c=!0)},o(A){et(r.$$.fragment,A),c=!1},d(A){A&&he(e),Gt(r)}}}function j$(t){let e,r,i,o=t[3].elevation&&h6(t),u=t[3].valhalla&&d6(t);return{c(){e=Je("div"),o&&o.c(),r=ir(),u&&u.c(),this.h()},l(c){e=Qe(c,"DIV",{class:!0});var s=vt(e);o&&o.l(s),r=nr(s),u&&u.l(s),s.forEach(he),this.h()},h(){ge(e,"class","panel-content svelte-1toti4c")},m(c,s){dt(c,e,s),o&&o.m(e,null),Ke(e,r),u&&u.m(e,null),i=!0},p(c,[s]){c[3].elevation?o?(o.p(c,s),s&8&&We(o,1)):(o=h6(c),o.c(),We(o,1),o.m(e,r)):o&&(gn(),et(o,1,1,()=>{o=null}),yn()),c[3].valhalla?u?(u.p(c,s),s&8&&We(u,1)):(u=d6(c),u.c(),We(u,1),u.m(e,null)):u&&(gn(),et(u,1,1,()=>{u=null}),yn())},i(c){i||(We(o),We(u),i=!0)},o(c){et(o),et(u),i=!1},d(c){c&&he(e),o&&o.d(),u&&u.d()}}}let a_="is-link";function U$(t,e,r){let i;Ga(t,Ru,le=>r(4,i=le));const o=Do;let u="measure",c=!1,s=!1,f=!1;const y=()=>{switch(u){case"measure":r(0,c=!0),r(1,s=!1),r(2,f=!1);break;case"routing":r(0,c=!1),r(1,s=!0),r(2,f=!1);break;case"isochrone":r(0,c=!1),r(1,s=!1),r(2,f=!0);break}};function b(le){i=le,Ru.set(i)}function A(le){t.$$.not_equal(o.elevation.options,le)&&(o.elevation.options=le,r(3,o))}function I(le){t.$$.not_equal(o.elevation.url,le)&&(o.elevation.url=le,r(3,o))}function C(le){c=le,r(0,c)}function N(le){i=le,Ru.set(i)}function O(le){t.$$.not_equal(o.valhalla.url,le)&&(o.valhalla.url=le,r(3,o))}function $(le){t.$$.not_equal(o.valhalla.routingOptions,le)&&(o.valhalla.routingOptions=le,r(3,o))}function G(le){s=le,r(1,s)}function Z(le){i=le,Ru.set(i)}function ee(le){t.$$.not_equal(o.valhalla.url,le)&&(o.valhalla.url=le,r(3,o))}function te(le){t.$$.not_equal(o.valhalla.isoChroneOptions,le)&&(o.valhalla.isoChroneOptions=le,r(3,o))}function _e(le){f=le,r(2,f)}return t.$$.update=()=>{t.$$.dirty&1&&c&&r(5,u="measure"),t.$$.dirty&2&&s&&r(5,u="routing"),t.$$.dirty&4&&f&&r(5,u="isochrone"),t.$$.dirty&32&&y()},[c,s,f,o,i,u,b,A,I,C,N,O,$,G,Z,ee,te,_e]}class q$ extends di{constructor(e){super(),pi(this,e,U$,j$,hi,{})}}function p6(t,e,r){const i=t.slice();return i[20]=e[r],i}function m6(t,e,r){const i=t.slice();return i[20]=e[r],i}function g6(t,e,r){const i=t.slice();return i[20]=e[r],i}function y6(t,e,r){const i=t.slice();return i[20]=e[r],i}function _6(t,e,r){const i=t.slice();return i[20]=e[r],i}function v6(t){let e,r=t[20].properties.name+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[20].properties.id,mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&32&&r!==(r=u[20].properties.name+"")&&Dn(i,r),c&32&&o!==(o=u[20].properties.id)&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function b6(t){let e,r,i="Select district...",o,u,c=dn(t[6]),s=[];for(let f=0;f<c.length;f+=1)s[f]=w6(y6(t,c,f));return{c(){e=Je("select"),r=Je("option"),r.textContent=i;for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=Qe(f,"SELECT",{class:!0});var y=vt(e);r=Qe(y,"OPTION",{"data-svelte-h":!0}),vo(r)!=="svelte-1wv9syy"&&(r.textContent=i);for(let b=0;b<s.length;b+=1)s[b].l(y);y.forEach(he),this.h()},h(){r.__value="",mo(r,r.__value),ge(e,"class","admin-select svelte-1u6mis3"),t[1]===void 0&&Ha(()=>t[11].call(e))},m(f,y){dt(f,e,y),Ke(e,r);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);ka(e,t[1],!0),o||(u=Dr(e,"change",t[11]),o=!0)},p(f,y){if(y&64){c=dn(f[6]);let b;for(b=0;b<c.length;b+=1){const A=y6(f,c,b);s[b]?s[b].p(A,y):(s[b]=w6(A),s[b].c(),s[b].m(e,null))}for(;b<s.length;b+=1)s[b].d(1);s.length=c.length}y&66&&ka(e,f[1])},d(f){f&&he(e),na(s,f),o=!1,u()}}}function w6(t){let e,r=t[20].properties.name+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[20].properties.id,mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&64&&r!==(r=u[20].properties.name+"")&&Dn(i,r),c&64&&o!==(o=u[20].properties.id)&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function x6(t){let e,r,i="Select sector...",o,u,c=dn(t[7]),s=[];for(let f=0;f<c.length;f+=1)s[f]=k6(g6(t,c,f));return{c(){e=Je("select"),r=Je("option"),r.textContent=i;for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=Qe(f,"SELECT",{class:!0});var y=vt(e);r=Qe(y,"OPTION",{"data-svelte-h":!0}),vo(r)!=="svelte-1sbngq2"&&(r.textContent=i);for(let b=0;b<s.length;b+=1)s[b].l(y);y.forEach(he),this.h()},h(){r.__value="",mo(r,r.__value),ge(e,"class","admin-select svelte-1u6mis3"),t[2]===void 0&&Ha(()=>t[12].call(e))},m(f,y){dt(f,e,y),Ke(e,r);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);ka(e,t[2],!0),o||(u=Dr(e,"change",t[12]),o=!0)},p(f,y){if(y&128){c=dn(f[7]);let b;for(b=0;b<c.length;b+=1){const A=g6(f,c,b);s[b]?s[b].p(A,y):(s[b]=k6(A),s[b].c(),s[b].m(e,null))}for(;b<s.length;b+=1)s[b].d(1);s.length=c.length}y&132&&ka(e,f[2])},d(f){f&&he(e),na(s,f),o=!1,u()}}}function k6(t){let e,r=t[20].properties.name+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[20].properties.id,mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&128&&r!==(r=u[20].properties.name+"")&&Dn(i,r),c&128&&o!==(o=u[20].properties.id)&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function A6(t){let e,r,i="Select cell...",o,u,c=dn(t[8]),s=[];for(let f=0;f<c.length;f+=1)s[f]=S6(m6(t,c,f));return{c(){e=Je("select"),r=Je("option"),r.textContent=i;for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=Qe(f,"SELECT",{class:!0});var y=vt(e);r=Qe(y,"OPTION",{"data-svelte-h":!0}),vo(r)!=="svelte-i2vn2o"&&(r.textContent=i);for(let b=0;b<s.length;b+=1)s[b].l(y);y.forEach(he),this.h()},h(){r.__value="",mo(r,r.__value),ge(e,"class","admin-select svelte-1u6mis3"),t[3]===void 0&&Ha(()=>t[13].call(e))},m(f,y){dt(f,e,y),Ke(e,r);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);ka(e,t[3],!0),o||(u=Dr(e,"change",t[13]),o=!0)},p(f,y){if(y&256){c=dn(f[8]);let b;for(b=0;b<c.length;b+=1){const A=m6(f,c,b);s[b]?s[b].p(A,y):(s[b]=S6(A),s[b].c(),s[b].m(e,null))}for(;b<s.length;b+=1)s[b].d(1);s.length=c.length}y&264&&ka(e,f[3])},d(f){f&&he(e),na(s,f),o=!1,u()}}}function S6(t){let e,r=t[20].properties.name+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[20].properties.id,mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&256&&r!==(r=u[20].properties.name+"")&&Dn(i,r),c&256&&o!==(o=u[20].properties.id)&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function E6(t){let e,r,i="Select village...",o,u,c=dn(t[9]),s=[];for(let f=0;f<c.length;f+=1)s[f]=C6(p6(t,c,f));return{c(){e=Je("select"),r=Je("option"),r.textContent=i;for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=Qe(f,"SELECT",{class:!0});var y=vt(e);r=Qe(y,"OPTION",{"data-svelte-h":!0}),vo(r)!=="svelte-rq34a"&&(r.textContent=i);for(let b=0;b<s.length;b+=1)s[b].l(y);y.forEach(he),this.h()},h(){r.__value="",mo(r,r.__value),ge(e,"class","admin-select svelte-1u6mis3"),t[4]===void 0&&Ha(()=>t[14].call(e))},m(f,y){dt(f,e,y),Ke(e,r);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);ka(e,t[4],!0),o||(u=Dr(e,"change",t[14]),o=!0)},p(f,y){if(y&512){c=dn(f[9]);let b;for(b=0;b<c.length;b+=1){const A=p6(f,c,b);s[b]?s[b].p(A,y):(s[b]=C6(A),s[b].c(),s[b].m(e,null))}for(;b<s.length;b+=1)s[b].d(1);s.length=c.length}y&528&&ka(e,f[4])},d(f){f&&he(e),na(s,f),o=!1,u()}}}function C6(t){let e,r=t[20].properties.name+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[20].properties.id,mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c&512&&r!==(r=u[20].properties.name+"")&&Dn(i,r),c&512&&o!==(o=u[20].properties.id)&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function V$(t){let e,r,i,o="Select province...",u,c,s,f,y,b,A=dn(t[5]),I=[];for(let G=0;G<A.length;G+=1)I[G]=v6(_6(t,A,G));let C=t[0]&&b6(t),N=t[0]&&t[1]&&x6(t),O=t[0]&&t[1]&&t[2]&&A6(t),$=t[0]&&t[1]&&t[2]&&t[3]&&E6(t);return{c(){e=Je("div"),r=Je("select"),i=Je("option"),i.textContent=o;for(let G=0;G<I.length;G+=1)I[G].c();u=ir(),C&&C.c(),c=ir(),N&&N.c(),s=ir(),O&&O.c(),f=ir(),$&&$.c(),this.h()},l(G){e=Qe(G,"DIV",{class:!0});var Z=vt(e);r=Qe(Z,"SELECT",{class:!0});var ee=vt(r);i=Qe(ee,"OPTION",{"data-svelte-h":!0}),vo(i)!=="svelte-259cy0"&&(i.textContent=o);for(let te=0;te<I.length;te+=1)I[te].l(ee);ee.forEach(he),u=nr(Z),C&&C.l(Z),c=nr(Z),N&&N.l(Z),s=nr(Z),O&&O.l(Z),f=nr(Z),$&&$.l(Z),Z.forEach(he),this.h()},h(){i.__value="",mo(i,i.__value),ge(r,"class","admin-select svelte-1u6mis3"),t[0]===void 0&&Ha(()=>t[10].call(r)),ge(e,"class","admin-container svelte-1u6mis3")},m(G,Z){dt(G,e,Z),Ke(e,r),Ke(r,i);for(let ee=0;ee<I.length;ee+=1)I[ee]&&I[ee].m(r,null);ka(r,t[0],!0),Ke(e,u),C&&C.m(e,null),Ke(e,c),N&&N.m(e,null),Ke(e,s),O&&O.m(e,null),Ke(e,f),$&&$.m(e,null),y||(b=Dr(r,"change",t[10]),y=!0)},p(G,[Z]){if(Z&32){A=dn(G[5]);let ee;for(ee=0;ee<A.length;ee+=1){const te=_6(G,A,ee);I[ee]?I[ee].p(te,Z):(I[ee]=v6(te),I[ee].c(),I[ee].m(r,null))}for(;ee<I.length;ee+=1)I[ee].d(1);I.length=A.length}Z&33&&ka(r,G[0]),G[0]?C?C.p(G,Z):(C=b6(G),C.c(),C.m(e,c)):C&&(C.d(1),C=null),G[0]&&G[1]?N?N.p(G,Z):(N=x6(G),N.c(),N.m(e,s)):N&&(N.d(1),N=null),G[0]&&G[1]&&G[2]?O?O.p(G,Z):(O=A6(G),O.c(),O.m(e,f)):O&&(O.d(1),O=null),G[0]&&G[1]&&G[2]&&G[3]?$?$.p(G,Z):($=E6(G),$.c(),$.m(e,null)):$&&($.d(1),$=null)},i:mi,o:mi,d(G){G&&he(e),na(I,G),C&&C.d(),N&&N.d(),O&&O.d(),$&&$.d(),y=!1,b()}}}const Sf="selected-boundary";function H$(t,e,r){let i;Ga(t,Ru,we=>r(15,i=we));let o,u,c,s,f,y=[],b=[],A=[],I=[],C=[];const N=async we=>{let ue;switch(we){case"province":o?ue=y.filter(ze=>ze.properties.id===Number(o))[0]:G();break;case"district":u&&(ue=b.filter(ze=>ze.properties.id===Number(u))[0]);break;case"sector":c&&(ue=A.filter(ze=>ze.properties.id===Number(c))[0]);break;case"cell":s&&(ue=I.filter(ze=>ze.properties.id===Number(s))[0]);break;case"village":f&&(ue=C.filter(ze=>ze.properties.id===Number(f))[0]);break}if($(ue),we!=="village"){if(we==="cell"&&o&&u&&c&&s){const ze=`${Do.adminBoundary.url}/${o}/${u}/${c}/${s}/village.geojson`;r(9,C=await O(ze)),r(4,f="")}else if(we==="sector"&&o&&u&&c){const ze=`${Do.adminBoundary.url}/${o}/${u}/${c}/cell.geojson`;r(8,I=await O(ze)),r(9,C=[]),r(3,s=""),r(4,f="")}else if(we==="district"&&o&&u){const ze=`${Do.adminBoundary.url}/${o}/${u}/sector.geojson`;r(7,A=await O(ze)),r(8,I=[]),r(9,C=[]),r(2,c=""),r(3,s=""),r(4,f="")}else if(we==="province"&&o){const ze=`${Do.adminBoundary.url}/${o}/district.geojson`;r(6,b=await O(ze)),r(7,A=[]),r(8,I=[]),r(9,C=[]),r(1,u=""),r(2,c=""),r(3,s=""),r(4,f="")}else if(y.length===0){const ze=`${Do.adminBoundary.url}/province.geojson`;r(5,y=await O(ze)),r(6,b=[]),r(7,A=[]),r(8,I=[]),r(9,C=[]),r(0,o=""),r(1,u=""),r(2,c=""),r(3,s=""),r(4,f="")}}},O=async we=>(await(await fetch(we)).json()).features,$=we=>{if(!we)return;"bbox"in we&&i.fitBounds(we.bbox);const ue={type:"FeatureCollection",features:[we]};i.getLayer(Sf)?i.getSource(Sf).setData(ue):(i.addSource(Sf,{type:"geojson",data:ue}),i.addLayer({id:Sf,type:"fill",source:Sf,paint:{"fill-color":"rgba(255, 0, 0, 1)","fill-outline-color":"rgba(255, 0, 0, 1)","fill-opacity":.1},filter:["==","$type","Polygon"]}))},G=()=>{i!=null&&i.getLayer(Sf)&&i.removeLayer(Sf),i!=null&&i.getSource(Sf)&&i.removeSource(Sf)};function Z(){o=Vc(this),r(0,o),r(5,y)}function ee(){u=Vc(this),r(1,u),r(6,b)}function te(){c=Vc(this),r(2,c),r(7,A)}function _e(){s=Vc(this),r(3,s),r(8,I)}function le(){f=Vc(this),r(4,f),r(9,C)}return t.$$.update=()=>{t.$$.dirty&1&&N("province"),t.$$.dirty&2&&N("district"),t.$$.dirty&4&&N("sector"),t.$$.dirty&8&&N("cell"),t.$$.dirty&16&&N("village")},[o,u,c,s,f,y,b,A,I,C,Z,ee,te,_e,le]}class $$ extends di{constructor(e){super(),pi(this,e,H$,V$,hi,{})}}function G$(t){let e,r,i="Zoom to admin",o,u,c,s;return c=new $$({}),{c(){e=Je("div"),r=Je("div"),r.textContent=i,o=ir(),u=Je("div"),Ht(c.$$.fragment),this.h()},l(f){e=Qe(f,"DIV",{class:!0});var y=vt(e);r=Qe(y,"DIV",{class:!0,"data-svelte-h":!0}),vo(r)!=="svelte-1h3w96r"&&(r.textContent=i),o=nr(y),u=Qe(y,"DIV",{class:!0});var b=vt(u);Yt(c.$$.fragment,b),b.forEach(he),y.forEach(he),this.h()},h(){ge(r,"class","panel-title svelte-q5yctq"),ge(u,"class","panel-contents svelte-q5yctq"),ge(e,"class","search-panel svelte-q5yctq")},m(f,y){dt(f,e,y),Ke(e,r),Ke(e,o),Ke(e,u),$t(c,u,null),s=!0},i(f){s||(We(c.$$.fragment,f),s=!0)},o(f){et(c.$$.fragment,f),s=!1},d(f){f&&he(e),Gt(c)}}}function W$(t){let e,r,i=Do.adminBoundary&&G$();return{c(){i&&i.c(),e=pn()},l(o){i&&i.l(o),e=pn()},m(o,u){i&&i.m(o,u),dt(o,e,u),r=!0},p:mi,i(o){r||(We(i),r=!0)},o(o){et(i),r=!1},d(o){o&&he(e),i&&i.d(o)}}}class Z$ extends di{constructor(e){super(),pi(this,e,null,W$,hi,{})}}function I6(t,e,r){const i=t.slice();return i[4]=e[r],i}function L6(t){let e,r,i,o,u,c,s=t[4].label+"",f,y,b,A,I,C;function N(){return t[3](t[4])}return{c(){e=Je("li"),r=Je("a"),i=Je("span"),o=Je("i"),u=ir(),c=Je("span"),f=Fi(s),b=ir(),A=Je("li"),this.h()},l(O){e=Qe(O,"LI",{class:!0});var $=vt(e);r=Qe($,"A",{});var G=vt(r);i=Qe(G,"SPAN",{class:!0});var Z=vt(i);o=Qe(Z,"I",{class:!0,"aria-hidden":!0}),vt(o).forEach(he),Z.forEach(he),u=nr(G),c=Qe(G,"SPAN",{});var ee=vt(c);f=Bi(ee,s),ee.forEach(he),G.forEach(he),$.forEach(he),b=nr(O),A=Qe(O,"LI",{}),vt(A).forEach(he),this.h()},h(){ge(o,"class",Ks(t[4].icon)+" svelte-sgzujs"),ge(o,"aria-hidden","true"),ge(i,"class","icon is-small"),ge(e,"class",y=t[1].label===t[4].label?"is-active":"")},m(O,$){dt(O,e,$),Ke(e,r),Ke(r,i),Ke(i,o),Ke(r,u),Ke(r,c),Ke(c,f),dt(O,b,$),dt(O,A,$),I||(C=Dr(e,"click",N),I=!0)},p(O,$){t=O,$&2&&y!==(y=t[1].label===t[4].label?"is-active":"")&&ge(e,"class",y)},d(O){O&&(he(e),he(b),he(A)),I=!1,C()}}}function X$(t){let e,r,i,o,u,c,s,f,y,b,A,I,C,N,O,$,G,Z,ee,te,_e,le=dn(t[2]),we=[];for(let ue=0;ue<le.length;ue+=1)we[ue]=L6(I6(t,le,ue));return A=new _j({}),O=new Z$({}),ee=new q$({}),{c(){e=Je("div"),r=Je("div"),i=Je("a"),o=Je("img"),c=ir(),s=Je("div"),f=Je("ul");for(let ue=0;ue<we.length;ue+=1)we[ue].c();y=ir(),b=Je("div"),Ht(A.$$.fragment),C=ir(),N=Je("div"),Ht(O.$$.fragment),G=ir(),Z=Je("div"),Ht(ee.$$.fragment),this.h()},l(ue){e=Qe(ue,"DIV",{class:!0});var ze=vt(e);r=Qe(ze,"DIV",{class:!0});var Ue=vt(r);i=Qe(Ue,"A",{class:!0,href:!0});var Ce=vt(i);o=Qe(Ce,"IMG",{src:!0,alt:!0}),Ce.forEach(he),c=nr(Ue),s=Qe(Ue,"DIV",{class:!0});var Me=vt(s);f=Qe(Me,"UL",{});var qe=vt(f);for(let $e=0;$e<we.length;$e+=1)we[$e].l(qe);qe.forEach(he),Me.forEach(he),Ue.forEach(he),y=nr(ze),b=Qe(ze,"DIV",{});var it=vt(b);Yt(A.$$.fragment,it),it.forEach(he),C=nr(ze),N=Qe(ze,"DIV",{});var xt=vt(N);Yt(O.$$.fragment,xt),xt.forEach(he),G=nr(ze),Z=Qe(ze,"DIV",{});var yt=vt(Z);Yt(ee.$$.fragment,yt),yt.forEach(he),ze.forEach(he),this.h()},h(){s8(o.src,u=Do.logo)||ge(o,"src",u),ge(o,"alt","logo"),ge(i,"class","icon logo svelte-sgzujs"),ge(i,"href",Do.url),ge(s,"class","tabs is-centered is-small"),ge(r,"class","header svelte-sgzujs"),b.hidden=I=t[1].label!==t[0].LAYERS,N.hidden=$=t[1].label!==t[0].SEARCH,Z.hidden=te=t[1].label!==t[0].ADVANCED,ge(e,"class","drawer-content svelte-sgzujs")},m(ue,ze){dt(ue,e,ze),Ke(e,r),Ke(r,i),Ke(i,o),Ke(r,c),Ke(r,s),Ke(s,f);for(let Ue=0;Ue<we.length;Ue+=1)we[Ue]&&we[Ue].m(f,null);Ke(e,y),Ke(e,b),$t(A,b,null),Ke(e,C),Ke(e,N),$t(O,N,null),Ke(e,G),Ke(e,Z),$t(ee,Z,null),_e=!0},p(ue,[ze]){if(ze&6){le=dn(ue[2]);let Ue;for(Ue=0;Ue<le.length;Ue+=1){const Ce=I6(ue,le,Ue);we[Ue]?we[Ue].p(Ce,ze):(we[Ue]=L6(Ce),we[Ue].c(),we[Ue].m(f,null))}for(;Ue<we.length;Ue+=1)we[Ue].d(1);we.length=le.length}(!_e||ze&3&&I!==(I=ue[1].label!==ue[0].LAYERS))&&(b.hidden=I),(!_e||ze&3&&$!==($=ue[1].label!==ue[0].SEARCH))&&(N.hidden=$),(!_e||ze&3&&te!==(te=ue[1].label!==ue[0].ADVANCED))&&(Z.hidden=te)},i(ue){_e||(We(A.$$.fragment,ue),We(O.$$.fragment,ue),We(ee.$$.fragment,ue),_e=!0)},o(ue){et(A.$$.fragment,ue),et(O.$$.fragment,ue),et(ee.$$.fragment,ue),_e=!1},d(ue){ue&&he(e),na(we,ue),Gt(A),Gt(O),Gt(ee)}}}function Y$(t,e,r){var i;(function(s){s.LAYERS="Layers",s.SEARCH="Search",s.ADVANCED="Advanced"})(i||(i={}));let o=[{icon:"fa-solid fa-layer-group",label:i.LAYERS},{icon:"fa-solid fa-search",label:i.SEARCH},{icon:"fa-solid fa-chart-simple",label:i.ADVANCED}],u=o[0];return[i,u,o,s=>r(1,u=s)]}class K$ extends di{constructor(e){super(),pi(this,e,Y$,X$,hi,{})}}class J${constructor(e,r=20,i=20,o="#000000",u=4){li(this,"map");li(this,"width");li(this,"height");li(this,"svgCanvas");li(this,"xLine");li(this,"yLine");li(this,"color");li(this,"iconWidth");li(this,"iconHeight");li(this,"lineWidth");this.map=e,this.mapResize=this.mapResize.bind(this),this.iconWidth=r,this.iconHeight=i,this.color=o,this.lineWidth=u}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,r;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.iconWidth}px`),this.svgCanvas.setAttribute("height",`${this.iconHeight}px`);const e=this.width/2,r=this.height/2,i=this.iconWidth/2,o=this.iconHeight/2;this.svgCanvas.style.top=`${r-o}px`,this.svgCanvas.style.left=`${e-i}px`,this.yLine.setAttribute("x1",`${i}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${i}px`),this.yLine.setAttribute("y2",`${this.iconHeight}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${o}px`),this.xLine.setAttribute("x2",`${this.iconWidth}px`),this.xLine.setAttribute("y2",`${o}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.setAttribute("width",`${this.iconWidth}px`),r.setAttribute("height",`${this.iconHeight}px`);const i=this.width/2,o=this.height/2,u=this.iconWidth/2,c=this.iconHeight/2;r.style.top=`${o-c}px`,r.style.left=`${i-u}px`,this.yLine=r.appendChild(this.createLine(u.toString(),"0",u.toString(),this.iconHeight.toString(),this.color,`${this.lineWidth}px`)),this.xLine=r.appendChild(this.createLine("0",c.toString(),this.iconWidth.toString(),c.toString(),this.color,`${this.lineWidth}px`)),e==null||e.appendChild(r),this.svgCanvas=r}}createLine(e,r,i,o,u,c){const s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",e),s.setAttribute("y1",r),s.setAttribute("x2",i),s.setAttribute("y2",o),s.setAttribute("stroke",u),s.setAttribute("stroke-width",c),s}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}var qA=eG,Q$=Object.prototype.hasOwnProperty;function eG(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)Q$.call(r,i)&&(t[i]=r[i])}return t}var VA={exports:{}};(function(t,e){(function(){var r={};t.exports=r,r.simpleFilter=function(i,o){return o.filter(function(u){return r.test(i,u)})},r.test=function(i,o){return r.match(i,o)!==null},r.match=function(i,o,u){u=u||{};var c=0,s=[],f=o.length,y=0,b=0,A=u.pre||"",I=u.post||"",C=u.caseSensitive&&o||o.toLowerCase(),N;i=u.caseSensitive&&i||i.toLowerCase();for(var O=0;O<f;O++)N=o[O],C[O]===i[c]?(N=A+N+I,c+=1,b+=1+b):b=0,y+=b,s[s.length]=N;return c===i.length?(y=C===i?1/0:y,{rendered:s.join(""),score:y}):null},r.filter=function(i,o,u){return!o||o.length===0?[]:typeof i!="string"?o:(u=u||{},o.reduce(function(c,s,f,y){var b=s;u.extract&&(b=u.extract(s));var A=r.match(i,b,u);return A!=null&&(c[c.length]={string:A.rendered,score:A.score,index:f,original:s}),c},[]).sort(function(c,s){var f=s.score-c.score;return f||c.index-s.index}))}})()})(VA);var tG=VA.exports,vc=function(t){return this.component=t,this.items=[],this.active=t.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};vc.prototype.show=function(){this.element.style.display="block"};vc.prototype.hide=function(){this.element.style.display="none"};vc.prototype.add=function(t){this.items.push(t)};vc.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0};vc.prototype.isEmpty=function(){return!this.items.length};vc.prototype.isVisible=function(){return this.element.style.display==="block"};vc.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};vc.prototype.drawItem=function(t,e){var r=document.createElement("li"),i=document.createElement("a");e&&(r.className+=" active"),i.innerHTML=t.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))};vc.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};vc.prototype.move=function(t){this.active=t,this.draw()};vc.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)};vc.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)};vc.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()};var rG=vc,iG=qA,nG=tG,oG=rG,vu=function(t,e,r){return r=r||{},this.options=iG({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},r),this.el=t,this.data=e||[],this.list=new oG(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(i){this.handleKeyUp(i.keyCode,i)}).bind(this),!1),this.el.addEventListener("keydown",(function(i){this.handleKeyDown(i)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(i){this.handlePaste(i)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};vu.prototype.handleKeyUp=function(t,e){if(!(t===40||t===38||t===27||t===9)){if(t===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),e.stopPropagation());return}this.handleInputChange(this.el.value)}};vu.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};vu.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};vu.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}};vu.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var r=0;r<e.length&&(this.list.add(e[r]),r!==this.options.limit-1);r++);this.list.draw()}).bind(this))};vu.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};vu.prototype.update=function(t){this.data=t,this.handleKeyUp()};vu.prototype.clear=function(){this.data=[],this.list.clear()};vu.prototype.normalize=function(t){return t=t.toLowerCase(),t};vu.prototype.match=function(t,e){return t.indexOf(e)>-1};vu.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t||{place_name:this.query}),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};vu.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(i){return this.getItemValue(i)}).bind(this)},r;this.options.filter?(r=nG.filter(this.query,this.data,e),r=r.map((function(i){return{original:i.original,string:this.render(i.original,i.string)}}).bind(this))):r=this.data.map((function(i){var o=this.render(i);return{original:i,string:o}}).bind(this)),t(r)};vu.prototype.getItemValue=function(t){return t};vu.prototype.render=function(t,e){if(e)return e;for(var r=t.original?this.getItemValue(t.original):this.getItemValue(t),i=this.normalize(r),o=i.lastIndexOf(this.query);o>-1;){var u=o+this.query.length;r=r.slice(0,o)+"<strong>"+r.slice(o,u)+"</strong>"+r.slice(u),o=i.slice(0,o).lastIndexOf(this.query)}return r};vu.prototype.renderError=function(t){this.list.drawError(t)};var aG=vu,HA=aG,sG=HA;typeof window<"u"&&(window.Suggestions=HA);var lG="Expected a function",T6=0/0,uG="[object Symbol]",cG=/^\s+|\s+$/g,fG=/^[-+]0x[0-9a-f]+$/i,hG=/^0b[01]+$/i,dG=/^0o[0-7]+$/i,pG=parseInt,mG=typeof bh=="object"&&bh&&bh.Object===Object&&bh,gG=typeof self=="object"&&self&&self.Object===Object&&self,yG=mG||gG||Function("return this")(),_G=Object.prototype,vG=_G.toString,bG=Math.max,wG=Math.min,ay=function(){return yG.Date.now()};function xG(t,e,r){var i,o,u,c,s,f,y=0,b=!1,A=!1,I=!0;if(typeof t!="function")throw new TypeError(lG);e=P6(e)||0,s_(r)&&(b=!!r.leading,A="maxWait"in r,u=A?bG(P6(r.maxWait)||0,e):u,I="trailing"in r?!!r.trailing:I);function C(le){var we=i,ue=o;return i=o=void 0,y=le,c=t.apply(ue,we),c}function N(le){return y=le,s=setTimeout(G,e),b?C(le):c}function O(le){var we=le-f,ue=le-y,ze=e-we;return A?wG(ze,u-ue):ze}function $(le){var we=le-f,ue=le-y;return f===void 0||we>=e||we<0||A&&ue>=u}function G(){var le=ay();if($(le))return Z(le);s=setTimeout(G,O(le))}function Z(le){return s=void 0,I&&i?C(le):(i=o=void 0,c)}function ee(){s!==void 0&&clearTimeout(s),y=0,i=f=o=s=void 0}function te(){return s===void 0?c:Z(ay())}function _e(){var le=ay(),we=$(le);if(i=arguments,o=this,f=le,we){if(s===void 0)return N(f);if(A)return s=setTimeout(G,e),C(f)}return s===void 0&&(s=setTimeout(G,e)),c}return _e.cancel=ee,_e.flush=te,_e}function s_(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function kG(t){return!!t&&typeof t=="object"}function AG(t){return typeof t=="symbol"||kG(t)&&vG.call(t)==uG}function P6(t){if(typeof t=="number")return t;if(AG(t))return T6;if(s_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=s_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(cG,"");var r=hG.test(t);return r||dG.test(t)?pG(t.slice(2),r?2:8):fG.test(t)?T6:+t}var SG=xG,kv={exports:{}},Ed=typeof Reflect=="object"?Reflect:null,M6=Ed&&typeof Ed.apply=="function"?Ed.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},c2;Ed&&typeof Ed.ownKeys=="function"?c2=Ed.ownKeys:Object.getOwnPropertySymbols?c2=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:c2=function(e){return Object.getOwnPropertyNames(e)};function EG(t){console&&console.warn&&console.warn(t)}var $A=Number.isNaN||function(e){return e!==e};function da(){da.init.call(this)}kv.exports=da;kv.exports.once=TG;da.EventEmitter=da;da.prototype._events=void 0;da.prototype._eventsCount=0;da.prototype._maxListeners=void 0;var D6=10;function om(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(da,"defaultMaxListeners",{enumerable:!0,get:function(){return D6},set:function(t){if(typeof t!="number"||t<0||$A(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");D6=t}});da.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};da.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||$A(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function GA(t){return t._maxListeners===void 0?da.defaultMaxListeners:t._maxListeners}da.prototype.getMaxListeners=function(){return GA(this)};da.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var f=u[e];if(f===void 0)return!1;if(typeof f=="function")M6(f,this,r);else for(var y=f.length,b=KA(f,y),i=0;i<y;++i)M6(b[i],this,r);return!0};function WA(t,e,r,i){var o,u,c;if(om(r),u=t._events,u===void 0?(u=t._events=Object.create(null),t._eventsCount=0):(u.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),u=t._events),c=u[e]),c===void 0)c=u[e]=r,++t._eventsCount;else if(typeof c=="function"?c=u[e]=i?[r,c]:[c,r]:i?c.unshift(r):c.push(r),o=GA(t),o>0&&c.length>o&&!c.warned){c.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=c.length,EG(s)}return t}da.prototype.addListener=function(e,r){return WA(this,e,r,!1)};da.prototype.on=da.prototype.addListener;da.prototype.prependListener=function(e,r){return WA(this,e,r,!0)};function CG(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ZA(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=CG.bind(i);return o.listener=r,i.wrapFn=o,o}da.prototype.once=function(e,r){return om(r),this.on(e,ZA(this,e,r)),this};da.prototype.prependOnceListener=function(e,r){return om(r),this.prependListener(e,ZA(this,e,r)),this};da.prototype.removeListener=function(e,r){var i,o,u,c,s;if(om(r),o=this._events,o===void 0)return this;if(i=o[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(u=-1,c=i.length-1;c>=0;c--)if(i[c]===r||i[c].listener===r){s=i[c].listener,u=c;break}if(u<0)return this;u===0?i.shift():IG(i,u),i.length===1&&(o[e]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};da.prototype.off=da.prototype.removeListener;da.prototype.removeAllListeners=function(e){var r,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var u=Object.keys(i),c;for(o=0;o<u.length;++o)c=u[o],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function XA(t,e,r){var i=t._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?LG(o):KA(o,o.length)}da.prototype.listeners=function(e){return XA(this,e,!0)};da.prototype.rawListeners=function(e){return XA(this,e,!1)};da.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):YA.call(t,e)};da.prototype.listenerCount=YA;function YA(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}da.prototype.eventNames=function(){return this._eventsCount>0?c2(this._events):[]};function KA(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function IG(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function LG(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function TG(t,e){return new Promise(function(r,i){function o(c){t.removeListener(e,u),i(c)}function u(){typeof t.removeListener=="function"&&t.removeListener("error",o),r([].slice.call(arguments))}JA(t,e,u,{once:!0}),e!=="error"&&PG(t,o,{once:!0})})}function PG(t,e,r){typeof t.on=="function"&&JA(t,"error",e,r)}function JA(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(u){i.once&&t.removeEventListener(e,o),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var MG=kv.exports,DG={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},zG={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},NG={placeholder:zG},QA={exports:{}};(function(t){(function(e,r,i){t.exports?t.exports=i():e[r]=i()})(bh,"subtag",function(){var e="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(f){return f.match(r)||[]}function o(f){return i(f).filter(function(y,b){return y&&b})}function u(f){return f=i(f),{language:f[1]||e,extlang:f[2]||e,script:f[3]||e,region:f[4]||e}}function c(f,y,b){Object.defineProperty(f,y,{value:b,enumerable:!0})}function s(f,y,b){function A(I){return i(I)[f]||e}c(A,"pattern",y),c(u,b,A)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(u,"split",o),u})})(QA);var RG=QA.exports,OG=sG,FG=SG,jc=qA,BG=MG.EventEmitter,z6=DG,jG=NG,UG=RG;function e7(t,e){this._eventEmitter=new BG,this.options=jc({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=t}e7.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(t){return t.text!==void 0?t.text:t.place_name},render:function(t){if(t.geometry){var s=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+s[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+s.splice(1,s.length).join(",")+"</div></div></div>"}else{var e=t.text,r=e.toLowerCase().indexOf(this.query.toLowerCase()),i=this.query.length,o=e.substring(0,r),u=e.substring(r,r+i),c=e.substring(r+i);return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+o+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+u+"</span>"+c+"</div></div></div>"}},popupRender:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},addTo:function(t){function e(i,o){if(!document.body.contains(o))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var u=i.onAdd();o.appendChild(u)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else if(typeof t=="string"){var r=document.querySelectorAll(t);if(r.length===0)throw new Error("Element ",t,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,r[0])}else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",FG(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var i=document.createElement("div");i.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),e.appendChild(r),e.appendChild(this._inputEl),e.appendChild(i),this._typeahead=new OG(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),e},createIcon:function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+t),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),"innerHTML"in r)r.innerHTML=e;else{var i=document.createElement("div");i.innerHTML="<svg>"+e.valueOf().toString()+"</svg>";var o=i.firstChild,u=o.firstChild;r.appendChild(u)}return r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e)},_onKeyDown:function(t){var e=27,r=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var i=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,o=i?i.value:"";if(!o)return this.fresh=!0,t.keyCode!==r&&this.clear(t),this._clearEl.style.display="none";if(!(t.metaKey||[r,e,37,39,38,40].indexOf(t.keyCode)!==-1)){if(t.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(i.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(i.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}i.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(i.value)}},_showButton:function(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;if(t&&!t.geometry)t.placeId?this._geocode(t.placeId,!0,!0):this._geocode(t.text,!0);else if(t&&JSON.stringify(t)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){var e;if(this._removeResultMarkers(),t.properties&&z6[t.properties.short_code])e=jc({},this.options.flyTo),this._map&&this._map.fitBounds(z6[t.properties.short_code].bbox,e);else if(t.bbox){var r=t.bbox;e=jc({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],e)}else{var i={zoom:this.options.zoom};e=jc({},i,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}}this.options.marker&&this._maplibregl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:t})}},_getConfigForRequest:function(){var t=["bbox","limit","proximity","countries","types","language","reverseMode"],e=this,r=t.reduce(function(i,o){return e.options[o]&&(["countries","types","language"].indexOf(o)>-1?i[o]=e.options[o].split(/[\s,]+/):i[o]=e.options[o],o==="proximity"&&e.options[o]&&typeof e.options[o].longitude=="number"&&typeof e.options[o].latitude=="number"&&(i[o]=[e.options[o].longitude,e.options[o].latitude])),i},{});return r},_geocode:function(t,e,r){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t}),this.inputString=t;var i=null,o=this._getConfigForRequest(),u;if(this.options.localGeocoderOnly)u=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){var c=t.split(/[\s(,)?]+/).map(function(y){return parseFloat(y,10)}).reverse();o.types&&o.types[0],o=jc(o,{query:c,limit:1}),"proximity"in o&&delete o.proximity,u=this.geocoderApi.reverseGeocode(o)}else o=jc(o,{query:t}),this.geocoderApi.getSuggestions?e?this.geocoderApi.searchByPlaceId&&r?u=this.geocoderApi.searchByPlaceId(o):u=this.geocoderApi.forwardGeocode(o):u=this.geocoderApi.getSuggestions(o):u=this.geocoderApi.forwardGeocode(o);var s=[];this.options.localGeocoder&&(s=this.options.localGeocoder(t),s||(s=[]));var f=[];return u.catch((function(y){i=y}).bind(this)).then((function(y){this._loadingEl.style.display="none";var b={};return y?b=y:b={type:"FeatureCollection",features:[]},b.config=o,this.fresh&&(this.fresh=!1),b.features=b.features?s.concat(b.features):s,this.options.externalGeocoder?(f=this.options.externalGeocoder(t,b.features,o)||[],f.then(function(A){return b.features=b.features?A.concat(b.features):A,b},function(){return b})):b}).bind(this)).then((function(y){if(i)throw i;this.options.filter&&y.features.length&&(y.features=y.features.filter(this.options.filter));var b=[];y.suggestions?b=y.suggestions:y.place?b=[y.place]:b=y.features,b.length?(this._clearEl.style.display="block",this._typeahead.update(b),(!this.options.showResultsWhileTyping||e)&&this.options.showResultMarkers&&(y.features.length>0||y.place)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",y)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",y))}).bind(this)).catch((function(y){this._loadingEl.style.display="none",s.length&&this.options.localGeocoder||f.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:s}),this._eventEmitter.emit("error",{error:y})}).bind(this)),u},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var e=this;t.relatedTarget&&e._clear(t)},_onQueryResult:function(t){var e=t;if(e.features.length){var r=e.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=UG.language(t),r=jG.placeholder[e];if(r)return r}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var t=this._typeahead.data.filter(function(o){return typeof o!="string"}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var e={padding:100},r=jc({},e,this.options.flyTo),i=new this._maplibregl.LngLatBounds;t.forEach(function(o){i.extend(o.geometry.coordinates)}),this._map.fitBounds(i.toArray(),r)}return t.length>0&&this._maplibregl&&this._handleResultMarkers(t),this}},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setGeocoderApi:function(t){return this.geocoderApi=t,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(t){if(this._map){this._removeMarker();var e={color:"#4668F2"},r=jc({},e,this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);var i;if(this.options.popup){var o={},u=jc({},o,this.options.popup);i=new this._maplibregl.Popup(u).setHTML(this.options.popupRender(t))}return t.center?(this.mapMarker.setLngLat(t.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(t){if(this._map){this._removeResultMarkers();var e={color:"#4668F2"},r=jc({},e,this.options.showResultMarkers);return t.forEach((function(i){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var o=this.options.showResultMarkers.element.cloneNode(!0);r=jc(r,{element:o})}var u=new this._maplibregl.Marker(jc({},r,{element:o})),c;if(this.options.popup){var s={},f=jc({},s,this.options.popup);c=new this._maplibregl.Popup(f).setHTML(this.options.popupRender(i))}i.center?(u.setLngLat(i.center).addTo(this._map),this.options.popup&&u.setPopup(c)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(u.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&u.setPopup(c)),this.resultMarkers.push(u)}).bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(t){t.remove()}),this.resultMarkers=[])},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}};var qG=e7;const VG=O2(qG);const N6=(t,e,r)=>r.indexOf(t)===e,t7=t=>t==null||t==="",R6=t=>!t7(t),Kf=t=>{const e=t.toString();if(typeof t=="string")return{callback:r=>r[t],identifier:e};if(typeof t=="function")return{callback:t,identifier:e};throw new Error(`Invalid field argument: ${String(t)}`)},N2={contains:(t,e)=>Wf(t).indexOf(Wf(e))>-1,startsWith:(t,e)=>Wf(t).startsWith(Wf(e)),endsWith:(t,e)=>Wf(t).endsWith(Wf(e)),isEqualTo:(t,e)=>Wf(t)===Wf(e),isGreaterThan:(t,e)=>gh(t)?!1:t>e,isGreaterThanOrEqualTo:(t,e)=>gh(t)?!1:t>=e,isLessThan:(t,e)=>gh(t)?!1:t<e,isLessThanOrEqualTo:(t,e)=>gh(t)?!1:t<=e,isBetween:(t,e)=>{if(gh(t))return!1;const[r,i]=e;return t>=r&&t<=i},isStrictlyBetween:(t,e)=>{if(gh(t))return!1;const[r,i]=e;return t>r&&t<i},isTrue:(t,e)=>t===!0,isFalse:(t,e)=>t===!1,isNull:(t,e)=>t==null,isNotNull:(t,e)=>t!=null,whereIn:(t,e=[])=>{if(gh(t)||e.length===0)return!1;for(const{value:r,comparator:i}of e)if(i(t,r))return!0;return!1}};function Wf(t=null){return String(t).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function gh(t){if(t==null)return!0}class HG{constructor(){li(this,"events",{change:[],clearFilters:[],clearSearch:[]});li(this,"triggerChange",zs(0))}add(e,r){this.events[e].push(r)}trigger(e){for(const r of this.events[e])r();e==="change"&&this.triggerChange.update(r=>r+1)}}class $G{constructor(e,r){li(this,"event");li(this,"rowsPerPage");li(this,"pageNumber");li(this,"search");li(this,"filters");li(this,"filterCount");li(this,"rawRows");li(this,"filteredRows");li(this,"pagedRows");li(this,"rowCount");li(this,"pages");li(this,"pagesWithEllipsis");li(this,"pageCount");li(this,"sort");li(this,"selected");li(this,"selectScope");li(this,"isAllSelected");this.event=new HG,this.rowsPerPage=zs(r.rowsPerPage),this.pageNumber=zs(1),this.search=zs({}),this.filters=zs([]),this.filterCount=this.createFilterCount(),this.rawRows=zs(e),this.filteredRows=this.createFilteredRows(),this.pagedRows=this.createPagedRows(),this.rowCount=this.createRowCount(),this.pages=this.createPages(),this.pagesWithEllipsis=this.createPagesWithEllipsis(),this.pageCount=this.createPageCount(),this.sort=zs({}),this.selected=zs([]),this.selectScope=zs("all"),this.isAllSelected=this.createIsAllSelected()}createFilterCount(){return L0(this.filters,e=>e.length)}createFilteredRows(){return L0([this.rawRows,this.search,this.filters],([e,r,i])=>(r.value&&(e=e.filter(o=>(r.scope??Object.keys(o)).map(s=>{const{callback:f}=Kf(s);return f}).some(s=>this.match(s(o),r.value))),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),i.length>0&&(i.forEach(o=>e=e.filter(u=>{const c=o.callback(u);return this.match(c,o.value,o.comparator)})),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),e))}match(e,r,i=null){if(t7(r))return!0;if(!e&&i)return i(e,r);if(e){if(typeof e=="object")return Object.keys(e).some(o=>this.match(e[o],r,i))}else return N2.contains(e,r);return i?i(e,r):N2.contains(e,r)}createPagedRows(){return L0([this.filteredRows,this.rowsPerPage,this.pageNumber],([e,r,i])=>r?e.slice((i-1)*r,i*r):e)}createRowCount(){return L0([this.filteredRows,this.pageNumber,this.rowsPerPage],([e,r,i])=>{const o=e.length;return i?{total:o,start:r*i-i+1,end:Math.min(r*i,e.length)}:{total:o,start:1,end:o}})}createPages(){return L0([this.rowsPerPage,this.filteredRows],([e,r])=>e?Array.from(Array(Math.ceil(r.length/e))).map((o,u)=>u+1):[1])}createPagesWithEllipsis(){return L0([this.pages,this.pageNumber],([e,r])=>{if(e.length<=7)return e;const i=null,o=1,u=e.length;return r<=4?[...e.slice(0,5),i,u]:r<e.length-3?[o,i,...e.slice(r-2,r+1),i,u]:[o,i,...e.slice(e.length-5,e.length)]})}createPageCount(){return L0(this.pages,e=>e.length)}createIsAllSelected(){return L0([this.selected,this.pagedRows,this.filteredRows,this.selectScope],([e,r,i,o])=>{const u=o==="currentPage"?r.length:i.length;return u===e.length&&u!==0})}}class GG{constructor(e){li(this,"rawRows");li(this,"event");li(this,"sort");li(this,"backup");this.rawRows=e.rawRows,this.event=e.event,this.sort=e.sort,this.backup=[]}set(e=null){if(!e)return;const r=P0(this.sort),{identifier:i}=Kf(e);r.identifier!==i&&this.sort.update(o=>o.direction=null),r.direction===null||r.direction==="desc"?this.asc(e):r.direction==="asc"&&this.desc(e)}asc(e,r="asc"){if(!e)return;const{identifier:i,callback:o}=Kf(e);this.sort.set({identifier:i,callback:o,direction:r}),this.rawRows.update(u=>(u.sort((c,s)=>{const[f,y]=[o(c),o(s)];return f===y?0:f===null?1:y===null?-1:typeof f=="boolean"?f===!1?1:-1:typeof f=="string"?f.localeCompare(y):typeof f=="number"?f-y:typeof f=="object"?JSON.stringify(f).localeCompare(JSON.stringify(y)):String(f).localeCompare(String(y))}),u)),this.log({identifier:i,callback:o,direction:r}),this.event.trigger("change")}desc(e,r="desc"){if(!e)return;const{identifier:i,callback:o}=Kf(e);this.sort.set({identifier:i,callback:o,direction:r}),this.rawRows.update(u=>(u.sort((c,s)=>{const[f,y]=[o(c),o(s)];return f===y?0:f===null?1:y===null?-1:typeof y=="boolean"?y===!1?1:-1:typeof y=="string"?y.localeCompare(f):typeof y=="number"?y-f:typeof y=="object"?JSON.stringify(y).localeCompare(JSON.stringify(f)):String(y).localeCompare(String(f))}),u)),this.log({identifier:i,callback:o,direction:r}),this.event.trigger("change")}apply(e=null){if(e)switch(e.direction){case"asc":return this.asc(e.orderBy);case"desc":return this.desc(e.orderBy);default:return this.set(e.orderBy)}else this.restore()}clear(){this.backup=[],this.sort.set({})}define(e,r="asc"){if(!e)return;const{identifier:i,callback:o}=Kf(e);this.sort.set({identifier:i,callback:o,direction:r})}restore(){for(const e of this.backup){const{identifier:r,callback:i,direction:o}=e,u=r.includes("=>")?i:r;this[o](u)}}log(e){if(this.backup=this.backup.filter(r=>r.identifier!==e.identifier),this.backup.length>=3){const[r,i,o]=this.backup;this.backup=[i,o,e]}else this.backup=[...this.backup,e]}}class WG{constructor(e){li(this,"filteredRows");li(this,"pagedRows");li(this,"selected");li(this,"scope");li(this,"isAllSelected");li(this,"event");this.filteredRows=e.filteredRows,this.pagedRows=e.pagedRows,this.selected=e.selected,this.scope=e.selectScope,this.isAllSelected=e.isAllSelected,this.event=e.event}set(e){const r=P0(this.selected);r.includes(e)?this.selected.set(r.filter(i=>i!==e)):this.selected.set([e,...r])}all(e=null){if(P0(this.isAllSelected))return this.clear();const i=P0(this.scope),o=i==="currentPage"?P0(this.pagedRows):P0(this.filteredRows);i==="currentPage"&&this.event.add("change",()=>this.clear()),e?this.selected.set(o.map(u=>u[e])):this.selected.set(o)}clear(){this.selected.set([])}}class ZG{constructor(e){li(this,"pageNumber");li(this,"rowCount");li(this,"rowsPerPage");li(this,"event");this.pageNumber=e.pageNumber,this.rowCount=e.rowCount,this.rowsPerPage=e.rowsPerPage,this.event=e.event}goto(e){this.pageNumber.update(r=>{const i=P0(this.rowsPerPage);if(i){const o=P0(this.rowCount).total;e>=1&&e<=Math.ceil(o/i)&&(r=e,this.event.trigger("change"))}return r})}previous(){const e=P0(this.pageNumber)-1;this.goto(e)}next(){const e=P0(this.pageNumber)+1;this.goto(e)}}class XG{constructor(e){li(this,"search");li(this,"event");this.search=e.search,this.event=e.event}set(e,r=null){this.search.update(i=>(i={value:e??"",scope:r??null},i))}remove(){this.search.set({value:null,scope:null}),this.event.trigger("change"),this.event.trigger("clearSearch")}}class YG{constructor(e){li(this,"filters");li(this,"event");this.filters=e.filters,this.event=e.event}set(e,r,i=null){const{callback:o,identifier:u}=Kf(r),c={value:e,identifier:u,callback:o,comparator:i};this.filters.update(s=>(s=s.filter(f=>f.identifier!==u&&R6(e)),R6(e)&&s.push(c),s))}clear(){this.filters.set([]),this.event.trigger("change"),this.event.trigger("clearFilters")}}class KG{constructor(e,r){li(this,"filters");li(this,"event");li(this,"criteria");li(this,"filterBy");li(this,"selected");this.filterBy=r,this.criteria=[],this.selected=zs([]),this.filters=e.filters,this.event=e.event}set(e,r=N2.contains){this.criteria.find(i=>i.value===e)?this.criteria=this.criteria.filter(i=>i.value!==e):this.criteria=[{value:e,comparator:r},...this.criteria],this.update(),this.event.trigger("change"),this.selected.set(this.criteria.map(i=>i.value))}update(){const{callback:e,identifier:r}=Kf(this.filterBy),i={value:this.criteria,comparator:N2.whereIn,identifier:r,callback:e};this.filters.update(o=>(o=o.filter(u=>u.identifier!==r&&this.criteria.length>0),this.criteria.length>0&&o.push(i),o))}getSelected(){return this.selected}clear(){this.criteria=[],this.selected.set([]),this.update(),this.event.trigger("change")}}class JG{constructor(e,r,i){li(this,"rawRows");li(this,"filteredRows");li(this,"callback");li(this,"precision");this.rawRows=e.rawRows,this.filteredRows=e.filteredRows,this.callback=Kf(r).callback,this.precision=i.precision}distinct(e=null){const i=P0(this.rawRows).map(c=>this.callback(c)),u=(e?e(i):i).reduce((c,s)=>(c[s]=(c[s]??0)+1,c),{});return Object.entries(u).map(([c,s])=>({value:c,count:s}))}avg(e=null){return L0(this.filteredRows,r=>{if(r.length===0)return 0;const i=r.map(u=>this.callback(u)).filter(Boolean),o=e?e(i):i;return this.round(o.reduce((u,c)=>u+c,0)/o.length)})}sum(e=null){return L0(this.filteredRows,r=>{const i=r.map(u=>this.callback(u)),o=e?e(i):i;return this.round(o.reduce((u,c)=>u+c,0))})}setPrecision(e){this.precision=e}round(e){if(this.precision===0)return Math.round(e);const r=Math.pow(10,this.precision);return Math.round((e+Number.EPSILON)*r)/r}}class QG{constructor(e=[],r={rowsPerPage:null}){li(this,"context");li(this,"sortHandler");li(this,"selectHandler");li(this,"pageHandler");li(this,"searchHandler");li(this,"filterHandler");li(this,"i18n");this.i18n=this.translate(r.i18n),this.context=new $G(e,r),this.sortHandler=new GG(this.context),this.selectHandler=new WG(this.context),this.pageHandler=new ZG(this.context),this.searchHandler=new XG(this.context),this.filterHandler=new YG(this.context)}setRows(e){this.context.rawRows.set(e),this.applySort()}getRows(){return this.context.pagedRows}select(e){this.selectHandler.set(e)}getSelected(){return this.context.selected}selectAll(e={}){this.context.selectScope.set(e.scope==="currentPage"?"currentPage":"all"),this.selectHandler.all(e.selectBy??null)}isAllSelected(){return this.context.isAllSelected}getRowCount(){return this.context.rowCount}getRowsPerPage(){return this.context.rowsPerPage}sort(e){this.setPage(1),this.sortHandler.set(e)}applySort(e=null){this.sortHandler.apply(e)}sortAsc(e){this.setPage(1),this.sortHandler.asc(e)}sortDesc(e){this.setPage(1),this.sortHandler.desc(e)}getSort(){return this.context.sort}clearSort(){this.sortHandler.clear()}defineSort(e,r){this.sortHandler.define(e,r)}search(e,r=null){this.searchHandler.set(e,r)}clearSearch(){this.searchHandler.remove()}filter(e,r,i=null){this.filterHandler.set(e,r,i)}createAdvancedFilter(e){return new KG(this.context,e)}getFilterCount(){return this.context.filterCount}clearFilters(){this.filterHandler.clear()}getPages(e={ellipsis:!1}){return e.ellipsis?this.context.pagesWithEllipsis:this.context.pages}getPageCount(){return this.context.pageCount}getPageNumber(){return this.context.pageNumber}setPage(e){switch(e){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();default:return this.pageHandler.goto(e)}}getTriggerChange(){return this.context.event.triggerChange}on(e,r){this.context.event.add(e,r)}createCalculation(e,r=null){return new JG(this.context,e,{precision:(r==null?void 0:r.precision)??2})}translate(e){return{search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...e}}update(e){console.log("%c%s","color:#e65100;background:#fff3e0;font-size:12px;border-radius:4px;padding:4px;text-align:center;","DataHandler.update(data) method is deprecated. Please use DataHandler.setRows(data) instead"),this.context.rawRows.set(e)}applySorting(e=null){this.applySort(e)}getSorted(){return this.getSort()}}function eW(t){let e,r,i,o,u,c,s,f,y;const b=t[8].default,A=wl(b,t,t[7],null);return{c(){e=Je("th"),r=Je("div"),i=Je("strong"),A&&A.c(),o=ir(),u=Je("span"),this.h()},l(I){e=Qe(I,"TH",{class:!0});var C=vt(e);r=Qe(C,"DIV",{class:!0});var N=vt(r);i=Qe(N,"STRONG",{class:!0});var O=vt(i);A&&A.l(O),O.forEach(he),o=nr(N),u=Qe(N,"SPAN",{class:!0}),vt(u).forEach(he),N.forEach(he),C.forEach(he),this.h()},h(){ge(i,"class","svelte-1311rr9"),ge(u,"class","svelte-1311rr9"),ui(u,"asc",t[3].direction==="asc"),ui(u,"desc",t[3].direction==="desc"),ge(r,"class","flex svelte-1311rr9"),Nn(r,"justify-content",t[2]==="left"?"flex-start":t[2]==="right"?"flex-end":"center"),ge(e,"class",c=Ks(t[6].class??"")+" svelte-1311rr9"),ui(e,"sortable",t[1]),ui(e,"active",t[3].identifier===t[4])},m(I,C){dt(I,e,C),Ke(e,r),Ke(r,i),A&&A.m(i,null),Ke(r,o),Ke(r,u),s=!0,f||(y=Dr(e,"click",t[9]),f=!0)},p(I,[C]){A&&A.p&&(!s||C&128)&&xl(A,b,I,I[7],s?Al(b,I[7],C,null):kl(I[7]),null),(!s||C&8)&&ui(u,"asc",I[3].direction==="asc"),(!s||C&8)&&ui(u,"desc",I[3].direction==="desc"),C&4&&Nn(r,"justify-content",I[2]==="left"?"flex-start":I[2]==="right"?"flex-end":"center"),(!s||C&64&&c!==(c=Ks(I[6].class??"")+" svelte-1311rr9"))&&ge(e,"class",c),(!s||C&66)&&ui(e,"sortable",I[1]),(!s||C&88)&&ui(e,"active",I[3].identifier===I[4])},i(I){s||(We(A,I),s=!0)},o(I){et(A,I),s=!1},d(I){I&&he(e),A&&A.d(I),f=!1,y()}}}function tW(t,e,r){let i,{$$slots:o={},$$scope:u}=e,{handler:c}=e,{orderBy:s}=e,{align:f="left"}=e;const y=s==null?void 0:s.toString(),b=c.getSort();Ga(t,b,I=>r(3,i=I));const A=()=>c.sort(s);return t.$$set=I=>{r(6,e=pc(pc({},e),mc(I))),"handler"in I&&r(0,c=I.handler),"orderBy"in I&&r(1,s=I.orderBy),"align"in I&&r(2,f=I.align),"$$scope"in I&&r(7,u=I.$$scope)},e=mc(e),[c,s,f,i,y,b,e,u,o,A]}class l_ extends di{constructor(e){super(),pi(this,e,tW,eW,hi,{handler:0,orderBy:1,align:2})}}function rW(t){let e,r,i,o,u,c;return{c(){e=Je("th"),r=Je("input"),this.h()},l(s){e=Qe(s,"TH",{class:!0});var f=vt(e);r=Qe(f,"INPUT",{type:!0,placeholder:!0,spellcheck:!0,class:!0}),f.forEach(he),this.h()},h(){ge(r,"type","text"),ge(r,"placeholder",i=t[0].i18n.filter),ge(r,"spellcheck","false"),ge(r,"class","svelte-11i3j5h"),Nn(r,"text-align",t[2]),ge(e,"class",o=Ks(t[5].class??"")+" svelte-11i3j5h")},m(s,f){dt(s,e,f),Ke(e,r),mo(r,t[4]),u||(c=[Dr(r,"input",t[6]),Dr(r,"input",t[7])],u=!0)},p(s,[f]){f&1&&i!==(i=s[0].i18n.filter)&&ge(r,"placeholder",i),f&16&&r.value!==s[4]&&mo(r,s[4]),f&4&&Nn(r,"text-align",s[2]),f&32&&o!==(o=Ks(s[5].class??"")+" svelte-11i3j5h")&&ge(e,"class",o)},i:mi,o:mi,d(s){s&&he(e),u=!1,oo(c)}}}function iW(t,e,r){let{handler:i}=e,{filterBy:o}=e,{align:u="left"}=e,{comparator:c=null}=e,s="";i.on("clearFilters",()=>r(4,s=""));function f(){s=this.value,r(4,s)}const y=()=>i.filter(s,o,c);return t.$$set=b=>{r(5,e=pc(pc({},e),mc(b))),"handler"in b&&r(0,i=b.handler),"filterBy"in b&&r(1,o=b.filterBy),"align"in b&&r(2,u=b.align),"comparator"in b&&r(3,c=b.comparator)},e=mc(e),[i,o,u,c,s,e,f,y]}class nW extends di{constructor(e){super(),pi(this,e,iW,rW,hi,{handler:0,filterBy:1,align:2,comparator:3})}}function O6(t,e,r){const i=t.slice();return i[16]=e[r],i}function oW(t){let e,r,i=t[0].i18n.previous+"",o,u,c,s,f=t[0].i18n.next+"",y,b,A=dn(t[4]),I=[];for(let C=0;C<A.length;C+=1)I[C]=F6(O6(t,A,C));return{c(){e=Je("button"),r=new Tp(!1),o=ir();for(let C=0;C<I.length;C+=1)I[C].c();u=ir(),c=Je("button"),s=new Tp(!1),this.h()},l(C){e=Qe(C,"BUTTON",{type:!0,class:!0});var N=vt(e);r=Pp(N,!1),N.forEach(he),o=nr(C);for(let $=0;$<I.length;$+=1)I[$].l(C);u=nr(C),c=Qe(C,"BUTTON",{type:!0,class:!0});var O=vt(c);s=Pp(O,!1),O.forEach(he),this.h()},h(){r.a=null,ge(e,"type","button"),ge(e,"class","svelte-9sqfh3"),ui(e,"disabled",t[2]===1),s.a=null,ge(c,"type","button"),ge(c,"class","svelte-9sqfh3"),ui(c,"disabled",t[2]===t[3])},m(C,N){dt(C,e,N),r.m(i,e),dt(C,o,N);for(let O=0;O<I.length;O+=1)I[O]&&I[O].m(C,N);dt(C,u,N),dt(C,c,N),s.m(f,c),y||(b=[Dr(e,"click",t[13]),Dr(c,"click",t[15])],y=!0)},p(C,N){if(N&1&&i!==(i=C[0].i18n.previous+"")&&r.p(i),N&4&&ui(e,"disabled",C[2]===1),N&21){A=dn(C[4]);let O;for(O=0;O<A.length;O+=1){const $=O6(C,A,O);I[O]?I[O].p($,N):(I[O]=F6($),I[O].c(),I[O].m(u.parentNode,u))}for(;O<I.length;O+=1)I[O].d(1);I.length=A.length}N&1&&f!==(f=C[0].i18n.next+"")&&s.p(f),N&12&&ui(c,"disabled",C[2]===C[3])},d(C){C&&(he(e),he(o),he(u),he(c)),na(I,C),y=!1,oo(b)}}}function aW(t){let e,r="❬❬",i,o,u="❮",c,s,f="❯",y,b,A="❭❭",I,C;return{c(){e=Je("button"),e.textContent=r,i=ir(),o=Je("button"),o.textContent=u,c=ir(),s=Je("button"),s.textContent=f,y=ir(),b=Je("button"),b.textContent=A,this.h()},l(N){e=Qe(N,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-16n9ron"&&(e.textContent=r),i=nr(N),o=Qe(N,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),vo(o)!=="svelte-1phz6f1"&&(o.textContent=u),c=nr(N),s=Qe(N,"BUTTON",{class:!0,"data-svelte-h":!0}),vo(s)!=="svelte-d0zv7q"&&(s.textContent=f),y=nr(N),b=Qe(N,"BUTTON",{class:!0,"data-svelte-h":!0}),vo(b)!=="svelte-1rg1h5c"&&(b.textContent=A),this.h()},h(){ge(e,"type","button"),ge(e,"class","small svelte-9sqfh3"),ui(e,"disabled",t[2]===1),ge(o,"type","button"),ge(o,"class","svelte-9sqfh3"),ui(o,"disabled",t[2]===1),ge(s,"class","svelte-9sqfh3"),ui(s,"disabled",t[2]===t[3]),ge(b,"class","small svelte-9sqfh3"),ui(b,"disabled",t[2]===t[3])},m(N,O){dt(N,e,O),dt(N,i,O),dt(N,o,O),dt(N,c,O),dt(N,s,O),dt(N,y,O),dt(N,b,O),I||(C=[Dr(e,"click",t[9]),Dr(o,"click",t[10]),Dr(s,"click",t[11]),Dr(b,"click",t[12])],I=!0)},p(N,O){O&4&&ui(e,"disabled",N[2]===1),O&4&&ui(o,"disabled",N[2]===1),O&12&&ui(s,"disabled",N[2]===N[3]),O&12&&ui(b,"disabled",N[2]===N[3])},d(N){N&&(he(e),he(i),he(o),he(c),he(s),he(y),he(b)),I=!1,oo(C)}}}function F6(t){let e,r=(t[16]??"...")+"",i,o,u;function c(){return t[14](t[16])}return{c(){e=Je("button"),i=Fi(r),this.h()},l(s){e=Qe(s,"BUTTON",{type:!0,class:!0});var f=vt(e);i=Bi(f,r),f.forEach(he),this.h()},h(){ge(e,"type","button"),ge(e,"class","svelte-9sqfh3"),ui(e,"active",t[2]===t[16]),ui(e,"ellipse",t[16]===null)},m(s,f){dt(s,e,f),Ke(e,i),o||(u=Dr(e,"click",c),o=!0)},p(s,f){t=s,f&16&&r!==(r=(t[16]??"...")+"")&&Dn(i,r),f&20&&ui(e,"active",t[2]===t[16]),f&16&&ui(e,"ellipse",t[16]===null)},d(s){s&&he(e),o=!1,u()}}}function sW(t){let e,r;function i(c,s){return c[1]?aW:oW}let o=i(t),u=o(t);return{c(){e=Je("section"),u.c(),this.h()},l(c){e=Qe(c,"SECTION",{class:!0});var s=vt(e);u.l(s),s.forEach(he),this.h()},h(){ge(e,"class",r=Ks(t[8].class??"")+" svelte-9sqfh3")},m(c,s){dt(c,e,s),u.m(e,null)},p(c,[s]){o===(o=i(c))&&u?u.p(c,s):(u.d(1),u=o(c),u&&(u.c(),u.m(e,null))),s&256&&r!==(r=Ks(c[8].class??"")+" svelte-9sqfh3")&&ge(e,"class",r)},i:mi,o:mi,d(c){c&&he(e),u.d()}}}function lW(t,e,r){let i,o,u,{handler:c}=e,{small:s=!1}=e;const f=c.getPageNumber();Ga(t,f,Z=>r(2,i=Z));const y=c.getPageCount();Ga(t,y,Z=>r(3,o=Z));const b=c.getPages({ellipsis:!0});Ga(t,b,Z=>r(4,u=Z));const A=()=>c.setPage(1),I=()=>c.setPage("previous"),C=()=>c.setPage("next"),N=()=>c.setPage(o),O=()=>c.setPage("previous"),$=Z=>c.setPage(Z),G=()=>c.setPage("next");return t.$$set=Z=>{r(8,e=pc(pc({},e),mc(Z))),"handler"in Z&&r(0,c=Z.handler),"small"in Z&&r(1,s=Z.small)},e=mc(e),[c,s,i,o,u,f,y,b,e,A,I,C,N,O,$,G]}class uW extends di{constructor(e){super(),pi(this,e,lW,sW,hi,{handler:0,small:1})}}function cW(t){let e=t[0].i18n.noRows+"",r;return{c(){r=Fi(e)},l(i){r=Bi(i,e)},m(i,o){dt(i,r,o)},p(i,o){o&1&&e!==(e=i[0].i18n.noRows+"")&&Dn(r,e)},d(i){i&&he(r)}}}function fW(t){let e,r=t[0].i18n.rowCount.replace("{start}",`<b>${t[2].start}</b>`).replace("{end}",`<b>${t[2].end}</b>`).replace("{total}",`<b>${t[2].total}</b>`)+"",i;return{c(){e=new Tp(!1),i=pn(),this.h()},l(o){e=Pp(o,!1),i=pn(),this.h()},h(){e.a=i},m(o,u){e.m(r,o,u),dt(o,i,u)},p(o,u){u&5&&r!==(r=o[0].i18n.rowCount.replace("{start}",`<b>${o[2].start}</b>`).replace("{end}",`<b>${o[2].end}</b>`).replace("{total}",`<b>${o[2].total}</b>`)+"")&&e.p(r)},d(o){o&&(he(i),e.d())}}}function hW(t){let e;function r(u,c){return u[2].total>0?pW:dW}let i=r(t),o=i(t);return{c(){o.c(),e=pn()},l(u){o.l(u),e=pn()},m(u,c){o.m(u,c),dt(u,e,c)},p(u,c){i===(i=r(u))&&o?o.p(u,c):(o.d(1),o=i(u),o&&(o.c(),o.m(e.parentNode,e)))},d(u){u&&he(e),o.d(u)}}}function dW(t){let e=t[0].i18n.noRows+"",r;return{c(){r=Fi(e)},l(i){r=Bi(i,e)},m(i,o){dt(i,r,o)},p(i,o){o&1&&e!==(e=i[0].i18n.noRows+"")&&Dn(r,e)},d(i){i&&he(r)}}}function pW(t){let e,r=t[2].start+"",i,o,u,c=t[2].end+"",s,f,y,b=t[2].total+"",A;return{c(){e=Je("b"),i=Fi(r),o=Fi(`-\r
            `),u=Je("b"),s=Fi(c),f=Fi(`/\r
            `),y=Je("b"),A=Fi(b)},l(I){e=Qe(I,"B",{});var C=vt(e);i=Bi(C,r),C.forEach(he),o=Bi(I,`-\r
            `),u=Qe(I,"B",{});var N=vt(u);s=Bi(N,c),N.forEach(he),f=Bi(I,`/\r
            `),y=Qe(I,"B",{});var O=vt(y);A=Bi(O,b),O.forEach(he)},m(I,C){dt(I,e,C),Ke(e,i),dt(I,o,C),dt(I,u,C),Ke(u,s),dt(I,f,C),dt(I,y,C),Ke(y,A)},p(I,C){C&4&&r!==(r=I[2].start+"")&&Dn(i,r),C&4&&c!==(c=I[2].end+"")&&Dn(s,c),C&4&&b!==(b=I[2].total+"")&&Dn(A,b)},d(I){I&&(he(e),he(o),he(u),he(f),he(y))}}}function mW(t){let e,r;function i(c,s){return c[1]?hW:c[2].total>0?fW:cW}let o=i(t),u=o(t);return{c(){e=Je("aside"),u.c(),this.h()},l(c){e=Qe(c,"ASIDE",{class:!0});var s=vt(e);u.l(s),s.forEach(he),this.h()},h(){ge(e,"class",r=Ks(t[4].class??"")+" svelte-1tjrquk")},m(c,s){dt(c,e,s),u.m(e,null)},p(c,[s]){o===(o=i(c))&&u?u.p(c,s):(u.d(1),u=o(c),u&&(u.c(),u.m(e,null))),s&16&&r!==(r=Ks(c[4].class??"")+" svelte-1tjrquk")&&ge(e,"class",r)},i:mi,o:mi,d(c){c&&he(e),u.d()}}}function gW(t,e,r){let i,{handler:o}=e,{small:u=!1}=e;const c=o.getRowCount();return Ga(t,c,s=>r(2,i=s)),t.$$set=s=>{r(4,e=pc(pc({},e),mc(s))),"handler"in s&&r(0,o=s.handler),"small"in s&&r(1,u=s.small)},e=mc(e),[o,u,i,c,e]}class yW extends di{constructor(e){super(),pi(this,e,gW,mW,hi,{handler:0,small:1})}}function B6(t,e,r){const i=t.slice();return i[8]=e[r],i}function j6(t){let e,r=t[0].i18n.show+"",i;return{c(){e=Je("span"),i=Fi(r)},l(o){e=Qe(o,"SPAN",{});var u=vt(e);i=Bi(u,r),u.forEach(he)},m(o,u){dt(o,e,u),Ke(e,i)},p(o,u){u&1&&r!==(r=o[0].i18n.show+"")&&Dn(i,r)},d(o){o&&he(e)}}}function U6(t){let e,r=t[8]+"",i,o;return{c(){e=Je("option"),i=Fi(r),o=ir(),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),o=nr(c),c.forEach(he),this.h()},h(){e.__value=t[8],mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i),Ke(e,o)},p:mi,d(u){u&&he(e)}}}function q6(t){let e,r=t[0].i18n.entries+"",i;return{c(){e=Je("span"),i=Fi(r)},l(o){e=Qe(o,"SPAN",{});var u=vt(e);i=Bi(u,r),u.forEach(he)},m(o,u){dt(o,e,u),Ke(e,i)},p(o,u){u&1&&r!==(r=o[0].i18n.entries+"")&&Dn(i,r)},d(o){o&&he(e)}}}function _W(t){let e,r,i,o,u,c,s,f=!t[1]&&j6(t),y=dn(t[4]),b=[];for(let I=0;I<y.length;I+=1)b[I]=U6(B6(t,y,I));let A=!t[1]&&q6(t);return{c(){e=Je("aside"),f&&f.c(),r=ir(),i=Je("select");for(let I=0;I<b.length;I+=1)b[I].c();o=ir(),A&&A.c(),this.h()},l(I){e=Qe(I,"ASIDE",{class:!0});var C=vt(e);f&&f.l(C),r=nr(C),i=Qe(C,"SELECT",{class:!0});var N=vt(i);for(let O=0;O<b.length;O+=1)b[O].l(N);N.forEach(he),o=nr(C),A&&A.l(C),C.forEach(he),this.h()},h(){ge(i,"class","svelte-18tth2v"),t[2]===void 0&&Ha(()=>t[6].call(i)),ge(e,"class",u=Ks(t[5].class??"")+" svelte-18tth2v")},m(I,C){dt(I,e,C),f&&f.m(e,null),Ke(e,r),Ke(e,i);for(let N=0;N<b.length;N+=1)b[N]&&b[N].m(i,null);ka(i,t[2],!0),Ke(e,o),A&&A.m(e,null),c||(s=[Dr(i,"change",t[6]),Dr(i,"change",t[7])],c=!0)},p(I,[C]){if(I[1]?f&&(f.d(1),f=null):f?f.p(I,C):(f=j6(I),f.c(),f.m(e,r)),C&16){y=dn(I[4]);let N;for(N=0;N<y.length;N+=1){const O=B6(I,y,N);b[N]?b[N].p(O,C):(b[N]=U6(O),b[N].c(),b[N].m(i,null))}for(;N<b.length;N+=1)b[N].d(1);b.length=y.length}C&20&&ka(i,I[2]),I[1]?A&&(A.d(1),A=null):A?A.p(I,C):(A=q6(I),A.c(),A.m(e,null)),C&32&&u!==(u=Ks(I[5].class??"")+" svelte-18tth2v")&&ge(e,"class",u)},i:mi,o:mi,d(I){I&&he(e),f&&f.d(),na(b,I),A&&A.d(),c=!1,oo(s)}}}function vW(t,e,r){let i,{handler:o}=e,{small:u=!1}=e;const c=o.getRowsPerPage();Ga(t,c,b=>r(2,i=b));const s=[5,10,20,50,100];function f(){i=Vc(this),c.set(i),r(4,s)}const y=()=>o.setPage(1);return t.$$set=b=>{r(5,e=pc(pc({},e),mc(b))),"handler"in b&&r(0,o=b.handler),"small"in b&&r(1,u=b.small)},e=mc(e),[o,u,i,c,s,e,f,y]}class bW extends di{constructor(e){super(),pi(this,e,vW,_W,hi,{handler:0,small:1})}}function wW(t){let e,r,i,o,u;return{c(){e=Je("input"),this.h()},l(c){e=Qe(c,"INPUT",{class:!0,placeholder:!0,spellcheck:!0}),this.h()},h(){ge(e,"class",r=Ks(t[2].class??"")+" svelte-ykkz3r"),ge(e,"placeholder",i=t[0].i18n.search),ge(e,"spellcheck","false")},m(c,s){dt(c,e,s),mo(e,t[1]),o||(u=[Dr(e,"input",t[3]),Dr(e,"input",t[4])],o=!0)},p(c,[s]){s&4&&r!==(r=Ks(c[2].class??"")+" svelte-ykkz3r")&&ge(e,"class",r),s&1&&i!==(i=c[0].i18n.search)&&ge(e,"placeholder",i),s&2&&e.value!==c[1]&&mo(e,c[1])},i:mi,o:mi,d(c){c&&he(e),o=!1,oo(u)}}}function xW(t,e,r){let{handler:i}=e,o="";i.on("clearSearch",()=>r(1,o=""));function u(){o=this.value,r(1,o)}const c=()=>i.search(o);return t.$$set=s=>{r(2,e=pc(pc({},e),mc(s))),"handler"in s&&r(0,i=s.handler)},e=mc(e),[i,o,e,u,c]}class kW extends di{constructor(e){super(),pi(this,e,xW,wW,hi,{handler:0})}}function V6(t){let e,r;return e=new kW({props:{handler:t[0]}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o&1&&(u.handler=i[0]),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function H6(t){let e,r;return e=new bW({props:{handler:t[0],small:t[6]<600}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o&1&&(u.handler=i[0]),o&64&&(u.small=i[6]<600),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function $6(t){let e,r;return e=new yW({props:{handler:t[0],small:t[6]<600}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o&1&&(u.handler=i[0]),o&64&&(u.small=i[6]<600),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function G6(t){let e,r;return e=new uW({props:{handler:t[0],small:t[6]<600}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o&1&&(u.handler=i[0]),o&64&&(u.small=i[6]<600),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function AW(t){let e,r,i,o,u,c,s,f,y,b,A,I=t[1]&&V6(t),C=t[2]&&H6(t);const N=t[10].default,O=wl(N,t,t[9],null);let $=t[3]&&$6(t),G=t[4]&&G6(t);return{c(){e=Je("section"),r=Je("header"),I&&I.c(),i=ir(),C&&C.c(),o=ir(),u=Je("article"),O&&O.c(),c=ir(),s=Je("footer"),$&&$.c(),f=ir(),G&&G.c(),this.h()},l(Z){e=Qe(Z,"SECTION",{class:!0});var ee=vt(e);r=Qe(ee,"HEADER",{class:!0});var te=vt(r);I&&I.l(te),i=nr(te),C&&C.l(te),te.forEach(he),o=nr(ee),u=Qe(ee,"ARTICLE",{style:!0,class:!0});var _e=vt(u);O&&O.l(_e),_e.forEach(he),c=nr(ee),s=Qe(ee,"FOOTER",{class:!0});var le=vt(s);$&&$.l(le),f=nr(le),G&&G.l(le),le.forEach(he),ee.forEach(he),this.h()},h(){ge(r,"class","svelte-1ere01f"),ui(r,"container",t[1]||t[2]),Nn(u,"height","calc(100% - "+t[7]+"px)"),ge(u,"class","svelte-1ere01f"),ge(s,"class","svelte-1ere01f"),ui(s,"container",t[3]||t[4]),ge(e,"class",y=Ks(t[8].class??"")+" svelte-1ere01f"),Ha(()=>t[12].call(e))},m(Z,ee){dt(Z,e,ee),Ke(e,r),I&&I.m(r,null),Ke(r,i),C&&C.m(r,null),Ke(e,o),Ke(e,u),O&&O.m(u,null),t[11](u),Ke(e,c),Ke(e,s),$&&$.m(s,null),Ke(s,f),G&&G.m(s,null),b=Pf(e,t[12].bind(e)),A=!0},p(Z,[ee]){Z[1]?I?(I.p(Z,ee),ee&2&&We(I,1)):(I=V6(Z),I.c(),We(I,1),I.m(r,i)):I&&(gn(),et(I,1,1,()=>{I=null}),yn()),Z[2]?C?(C.p(Z,ee),ee&4&&We(C,1)):(C=H6(Z),C.c(),We(C,1),C.m(r,null)):C&&(gn(),et(C,1,1,()=>{C=null}),yn()),(!A||ee&6)&&ui(r,"container",Z[1]||Z[2]),O&&O.p&&(!A||ee&512)&&xl(O,N,Z,Z[9],A?Al(N,Z[9],ee,null):kl(Z[9]),null),Z[3]?$?($.p(Z,ee),ee&8&&We($,1)):($=$6(Z),$.c(),We($,1),$.m(s,f)):$&&(gn(),et($,1,1,()=>{$=null}),yn()),Z[4]?G?(G.p(Z,ee),ee&16&&We(G,1)):(G=G6(Z),G.c(),We(G,1),G.m(s,null)):G&&(gn(),et(G,1,1,()=>{G=null}),yn()),(!A||ee&24)&&ui(s,"container",Z[3]||Z[4]),(!A||ee&256&&y!==(y=Ks(Z[8].class??"")+" svelte-1ere01f"))&&ge(e,"class",y)},i(Z){A||(We(I),We(C),We(O,Z),We($),We(G),A=!0)},o(Z){et(I),et(C),et(O,Z),et($),et(G),A=!1},d(Z){Z&&he(e),I&&I.d(),C&&C.d(),O&&O.d(Z),t[11](null),$&&$.d(),G&&G.d(),b()}}}function SW(t,e,r){let{$$slots:i={},$$scope:o}=e,{handler:u}=e,{search:c=!0}=e,{rowsPerPage:s=!0}=e,{rowCount:f=!0}=e,{pagination:y=!0}=e,b,A=1e3;const I=(c||s?48:8)+(f||y?48:8);u.on("change",()=>{b&&r(5,b.scrollTop=0,b)});function C(O){Ut[O?"unshift":"push"](()=>{b=O,r(5,b)})}function N(){A=this.clientWidth,r(6,A)}return t.$$set=O=>{r(8,e=pc(pc({},e),mc(O))),"handler"in O&&r(0,u=O.handler),"search"in O&&r(1,c=O.search),"rowsPerPage"in O&&r(2,s=O.rowsPerPage),"rowCount"in O&&r(3,f=O.rowCount),"pagination"in O&&r(4,y=O.pagination),"$$scope"in O&&r(9,o=O.$$scope)},e=mc(e),[u,c,s,f,y,b,A,I,e,o,i,C,N]}class EW extends di{constructor(e){super(),pi(this,e,SW,AW,hi,{handler:0,search:1,rowsPerPage:2,rowCount:3,pagination:4})}}function W6(t,e,r){const i=t.slice();i[26]=e[r];const o=i[4].find(function(...c){return t[21](i[26],...c)});return i[27]=o,i}function Z6(t,e,r){const i=t.slice();return i[30]=e[r],i}function X6(t,e,r){const i=t.slice();return i[30]=e[r],i}function Y6(t,e,r){const i=t.slice();return i[30]=e[r],i}function K6(t,e,r){const i=t.slice();return i[37]=e[r],i}function J6(t){let e,r=dn(t[1]),i=[];for(let o=0;o<r.length;o+=1)i[o]=Q6(K6(t,r,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=pn()},l(o){for(let u=0;u<i.length;u+=1)i[u].l(o);e=pn()},m(o,u){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,u);dt(o,e,u)},p(o,u){if(u[0]&2){r=dn(o[1]);let c;for(c=0;c<r.length;c+=1){const s=K6(o,r,c);i[c]?i[c].p(s,u):(i[c]=Q6(s),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},d(o){o&&he(e),na(i,o)}}}function Q6(t){let e,r=t[37]+"",i,o;return{c(){e=Je("option"),i=Fi(r),this.h()},l(u){e=Qe(u,"OPTION",{});var c=vt(e);i=Bi(c,r),c.forEach(he),this.h()},h(){e.__value=o=t[37],mo(e,e.__value)},m(u,c){dt(u,e,c),Ke(e,i)},p(u,c){c[0]&2&&r!==(r=u[37]+"")&&Dn(i,r),c[0]&2&&o!==(o=u[37])&&(e.__value=o,mo(e,e.__value))},d(u){u&&he(e)}}}function CW(t){let e=t[5],r,i,o=o8(t);return{c(){o.c(),r=pn()},l(u){o.l(u),r=pn()},m(u,c){o.m(u,c),dt(u,r,c),i=!0},p(u,c){c[0]&32&&hi(e,e=u[5])?(gn(),et(o,1,1,mi),yn(),o=o8(u),o.c(),We(o,1),o.m(r.parentNode,r)):o.p(u,c)},i(u){i||(We(o),i=!0)},o(u){et(o),i=!1},d(u){u&&he(r),o.d(u)}}}function IW(t){let e,r=`No data to be shown in the selected layer and rendered area. Please select another layer or
				move the map.`;return{c(){e=Je("p"),e.textContent=r,this.h()},l(i){e=Qe(i,"P",{class:!0,"data-svelte-h":!0}),vo(e)!=="svelte-1rw5oay"&&(e.textContent=r),this.h()},h(){ge(e,"class","no-data svelte-150ykwa")},m(i,o){dt(i,e,o)},p:mi,i:mi,o:mi,d(i){i&&he(e)}}}function LW(t){let e;return{c(){e=Fi("Operation")},l(r){e=Bi(r,"Operation")},m(r,i){dt(r,e,i)},d(r){r&&he(e)}}}function TW(t){let e=t[30].label+"",r;return{c(){r=Fi(e)},l(i){r=Bi(i,e)},m(i,o){dt(i,r,o)},p(i,o){o[0]&128&&e!==(e=i[30].label+"")&&Dn(r,e)},d(i){i&&he(r)}}}function e8(t){let e,r;return e=new l_({props:{handler:t[10],orderBy:t[30].id,$$slots:{default:[TW]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o[0]&128&&(u.orderBy=i[30].id),o[0]&128|o[1]&512&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function t8(t){let e,r;return e=new nW({props:{handler:t[10],filterBy:t[30].id}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o[0]&128&&(u.filterBy=i[30].id),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function r8(t){let e=t[26][t[30].id]+"",r;return{c(){r=Fi(e)},l(i){r=Bi(i,e)},m(i,o){dt(i,r,o)},p(i,o){o[0]&640&&e!==(e=i[26][i[30].id]+"")&&Dn(r,e)},d(i){i&&he(r)}}}function i8(t){let e,r=t[26][t[30].id]&&r8(t);return{c(){e=Je("td"),r&&r.c(),this.h()},l(i){e=Qe(i,"TD",{class:!0});var o=vt(e);r&&r.l(o),o.forEach(he),this.h()},h(){ge(e,"class","svelte-150ykwa")},m(i,o){dt(i,e,o),r&&r.m(e,null)},p(i,o){i[26][i[30].id]?r?r.p(i,o):(r=r8(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(i){i&&he(e),r&&r.d()}}}function n8(t){let e,r,i,o,u='<i class="fa-solid fa-magnifying-glass fa-lg"></i>',c,s,f='<i class="fa-solid fa-up-down-left-right fa-lg"></i>',y,b,A,I;function C(){return t[19](t[27])}function N(){return t[20](t[27])}let O=dn(t[7]),$=[];for(let G=0;G<O.length;G+=1)$[G]=i8(Z6(t,O,G));return{c(){e=Je("tr"),r=Je("td"),i=Je("div"),o=Je("button"),o.innerHTML=u,c=ir(),s=Je("button"),s.innerHTML=f,y=ir();for(let G=0;G<$.length;G+=1)$[G].c();b=ir(),this.h()},l(G){e=Qe(G,"TR",{class:!0});var Z=vt(e);r=Qe(Z,"TD",{class:!0});var ee=vt(r);i=Qe(ee,"DIV",{class:!0});var te=vt(i);o=Qe(te,"BUTTON",{class:!0,"data-svelte-h":!0}),vo(o)!=="svelte-1bloo2z"&&(o.innerHTML=u),c=nr(te),s=Qe(te,"BUTTON",{class:!0,"data-svelte-h":!0}),vo(s)!=="svelte-sg7khs"&&(s.innerHTML=f),te.forEach(he),ee.forEach(he),y=nr(Z);for(let _e=0;_e<$.length;_e+=1)$[_e].l(Z);b=nr(Z),Z.forEach(he),this.h()},h(){ge(o,"class","operation-button svelte-150ykwa"),ge(s,"class","operation-button svelte-150ykwa"),ge(i,"class","ope-col svelte-150ykwa"),ge(r,"class","svelte-150ykwa"),ge(e,"class","svelte-150ykwa")},m(G,Z){dt(G,e,Z),Ke(e,r),Ke(r,i),Ke(i,o),Ke(i,c),Ke(i,s),Ke(e,y);for(let ee=0;ee<$.length;ee+=1)$[ee]&&$[ee].m(e,null);Ke(e,b),A||(I=[Dr(o,"click",C),Dr(s,"click",N)],A=!0)},p(G,Z){if(t=G,Z[0]&640){O=dn(t[7]);let ee;for(ee=0;ee<O.length;ee+=1){const te=Z6(t,O,ee);$[ee]?$[ee].p(te,Z):($[ee]=i8(te),$[ee].c(),$[ee].m(e,b))}for(;ee<$.length;ee+=1)$[ee].d(1);$.length=O.length}},d(G){G&&he(e),na($,G),A=!1,oo(I)}}}function PW(t){let e,r,i,o,u,c,s,f,y,b,A,I;o=new l_({props:{handler:t[10],$$slots:{default:[LW]},$$scope:{ctx:t}}});let C=dn(t[7]),N=[];for(let _e=0;_e<C.length;_e+=1)N[_e]=e8(Y6(t,C,_e));const O=_e=>et(N[_e],1,1,()=>{N[_e]=null});f=new l_({props:{handler:t[10]}});let $=dn(t[7]),G=[];for(let _e=0;_e<$.length;_e+=1)G[_e]=t8(X6(t,$,_e));const Z=_e=>et(G[_e],1,1,()=>{G[_e]=null});let ee=dn(t[9]),te=[];for(let _e=0;_e<ee.length;_e+=1)te[_e]=n8(W6(t,ee,_e));return{c(){e=Je("table"),r=Je("thead"),i=Je("tr"),Ht(o.$$.fragment),u=ir();for(let _e=0;_e<N.length;_e+=1)N[_e].c();c=ir(),s=Je("tr"),Ht(f.$$.fragment),y=ir();for(let _e=0;_e<G.length;_e+=1)G[_e].c();b=ir(),A=Je("tbody");for(let _e=0;_e<te.length;_e+=1)te[_e].c();this.h()},l(_e){e=Qe(_e,"TABLE",{});var le=vt(e);r=Qe(le,"THEAD",{class:!0});var we=vt(r);i=Qe(we,"TR",{class:!0});var ue=vt(i);Yt(o.$$.fragment,ue),u=nr(ue);for(let Ce=0;Ce<N.length;Ce+=1)N[Ce].l(ue);ue.forEach(he),c=nr(we),s=Qe(we,"TR",{class:!0});var ze=vt(s);Yt(f.$$.fragment,ze),y=nr(ze);for(let Ce=0;Ce<G.length;Ce+=1)G[Ce].l(ze);ze.forEach(he),we.forEach(he),b=nr(le),A=Qe(le,"TBODY",{});var Ue=vt(A);for(let Ce=0;Ce<te.length;Ce+=1)te[Ce].l(Ue);Ue.forEach(he),le.forEach(he),this.h()},h(){ge(i,"class","svelte-150ykwa"),ge(s,"class","svelte-150ykwa"),ge(r,"class","svelte-150ykwa")},m(_e,le){dt(_e,e,le),Ke(e,r),Ke(r,i),$t(o,i,null),Ke(i,u);for(let we=0;we<N.length;we+=1)N[we]&&N[we].m(i,null);Ke(r,c),Ke(r,s),$t(f,s,null),Ke(s,y);for(let we=0;we<G.length;we+=1)G[we]&&G[we].m(s,null);Ke(e,b),Ke(e,A);for(let we=0;we<te.length;we+=1)te[we]&&te[we].m(A,null);I=!0},p(_e,le){const we={};if(le[1]&512&&(we.$$scope={dirty:le,ctx:_e}),o.$set(we),le[0]&1152){C=dn(_e[7]);let ue;for(ue=0;ue<C.length;ue+=1){const ze=Y6(_e,C,ue);N[ue]?(N[ue].p(ze,le),We(N[ue],1)):(N[ue]=e8(ze),N[ue].c(),We(N[ue],1),N[ue].m(i,null))}for(gn(),ue=C.length;ue<N.length;ue+=1)O(ue);yn()}if(le[0]&1152){$=dn(_e[7]);let ue;for(ue=0;ue<$.length;ue+=1){const ze=X6(_e,$,ue);G[ue]?(G[ue].p(ze,le),We(G[ue],1)):(G[ue]=t8(ze),G[ue].c(),We(G[ue],1),G[ue].m(s,null))}for(gn(),ue=$.length;ue<G.length;ue+=1)Z(ue);yn()}if(le[0]&4752){ee=dn(_e[9]);let ue;for(ue=0;ue<ee.length;ue+=1){const ze=W6(_e,ee,ue);te[ue]?te[ue].p(ze,le):(te[ue]=n8(ze),te[ue].c(),te[ue].m(A,null))}for(;ue<te.length;ue+=1)te[ue].d(1);te.length=ee.length}},i(_e){if(!I){We(o.$$.fragment,_e);for(let le=0;le<C.length;le+=1)We(N[le]);We(f.$$.fragment,_e);for(let le=0;le<$.length;le+=1)We(G[le]);I=!0}},o(_e){et(o.$$.fragment,_e),N=N.filter(Boolean);for(let le=0;le<N.length;le+=1)et(N[le]);et(f.$$.fragment,_e),G=G.filter(Boolean);for(let le=0;le<G.length;le+=1)et(G[le]);I=!1},d(_e){_e&&he(e),Gt(o),na(N,_e),Gt(f),na(G,_e),na(te,_e)}}}function o8(t){let e,r;return e=new EW({props:{handler:t[10],$$slots:{default:[PW]},$$scope:{ctx:t}}}),{c(){Ht(e.$$.fragment)},l(i){Yt(e.$$.fragment,i)},m(i,o){$t(e,i,o),r=!0},p(i,o){const u={};o[0]&656|o[1]&512&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(We(e.$$.fragment,i),r=!0)},o(i){et(e.$$.fragment,i),r=!1},d(i){Gt(e,i)}}}function MW(t){let e,r,i,o,u="Select a layer",c,s,f,y,b,A,I,C,N,O,$,G,Z,ee=t[1]&&t[1].length>0&&J6(t);const te=[IW,CW],_e=[];function le(we,ue){return we[5].length===0?0:1}return C=le(t),N=_e[C]=te[C](t),{c(){e=Je("div"),r=Je("header"),i=Je("select"),o=Je("option"),o.textContent=u,ee&&ee.c(),c=ir(),s=Je("button"),f=Je("i"),A=ir(),I=Je("div"),N.c(),this.h()},l(we){e=Qe(we,"DIV",{class:!0});var ue=vt(e);r=Qe(ue,"HEADER",{class:!0});var ze=vt(r);i=Qe(ze,"SELECT",{class:!0});var Ue=vt(i);o=Qe(Ue,"OPTION",{"data-svelte-h":!0}),vo(o)!=="svelte-edc77m"&&(o.textContent=u),ee&&ee.l(Ue),Ue.forEach(he),c=nr(ze),s=Qe(ze,"BUTTON",{class:!0});var Ce=vt(s);f=Qe(Ce,"I",{class:!0}),vt(f).forEach(he),Ce.forEach(he),ze.forEach(he),A=nr(ue),I=Qe(ue,"DIV",{class:!0,style:!0});var Me=vt(I);N.l(Me),Me.forEach(he),ue.forEach(he),this.h()},h(){o.__value="Select a layer",mo(o,o.__value),ge(i,"class","layer-select svelte-150ykwa"),t[0]===void 0&&Ha(()=>t[17].call(i)),ge(f,"class","fa-solid fa-rotate"),ge(s,"class","reload-button svelte-150ykwa"),s.disabled=y=t[0]&&!t[8],ge(r,"class","header svelte-150ykwa"),Ha(()=>t[18].call(r)),ge(I,"class","attribute-table"),Nn(I,"height",t[2]-t[3]-20+"px"),ge(e,"class","attribute-table-container svelte-150ykwa"),Ha(()=>t[22].call(e))},m(we,ue){dt(we,e,ue),Ke(e,r),Ke(r,i),Ke(i,o),ee&&ee.m(i,null),ka(i,t[0],!0),Ke(r,c),Ke(r,s),Ke(s,f),b=Pf(r,t[18].bind(r)),Ke(e,A),Ke(e,I),_e[C].m(I,null),O=Pf(e,t[22].bind(e)),$=!0,G||(Z=[Dr(i,"change",t[17]),Dr(s,"click",t[11])],G=!0)},p(we,ue){we[1]&&we[1].length>0?ee?ee.p(we,ue):(ee=J6(we),ee.c(),ee.m(i,null)):ee&&(ee.d(1),ee=null),ue[0]&3&&ka(i,we[0]),(!$||ue[0]&259&&y!==(y=we[0]&&!we[8]))&&(s.disabled=y);let ze=C;C=le(we),C===ze?_e[C].p(we,ue):(gn(),et(_e[ze],1,1,()=>{_e[ze]=null}),yn(),N=_e[C],N?N.p(we,ue):(N=_e[C]=te[C](we),N.c()),We(N,1),N.m(I,null)),(!$||ue[0]&12)&&Nn(I,"height",we[2]-we[3]-20+"px")},i(we){$||(We(N),$=!0)},o(we){et(N),$=!1},d(we){we&&he(e),ee&&ee.d(),b(),_e[C].d(),O(),G=!1,oo(Z)}}}function DW(t,e,r){let i,o=mi,u=()=>(o(),o=a8($,xt=>r(9,i=xt)),$);t.$$.on_destroy.push(()=>o());let{map:c}=e,{rowsPerPage:s=50}=e,{minZoom:f=14}=e,y,b,A=0,I=0,C=[],N=[];const O=new QG(N,{rowsPerPage:s});let $=zs([]);u();let G=[],Z,ee=!1;const te=()=>{const xt=[],yt=c.getStyle(),$e=c.getZoom();yt.layers.forEach(at=>{if(!["symbol","line","fill","heatmap"].includes(at.type))return;const mt=at,Xe=mt["source-layer"];if(!Xe)return;const wt=yt.sources[mt.source];let be=mt.minzoom;be||(be=wt.minzoom??0),!(!(be<=$e)||c.queryRenderedFeatures(void 0,{layers:[at.id]}).length===0)&&xt.push(Xe)}),r(1,y=xt.map(at=>at).filter(N6))},_e=xt=>c.getStyle().layers.filter(mt=>mt["source-layer"]===xt).map(mt=>mt.id),le=()=>{if(!b||!c)return;r(8,ee=!1);const xt=_e(b);if(xt.length>0&&(r(4,C=c.queryRenderedFeatures(void 0,{layers:xt})),r(5,N=[]),C.forEach(yt=>{const $e=yt.properties;N.find(mt=>{let Xe=!0;if(Object.keys(mt).forEach(wt=>{$e[wt]&&mt[wt]===$e[wt]||(Xe=!1)}),Xe)return mt})||N.push($e)}),N.length>0)){let yt=N.flatMap($e=>Object.keys($e));yt=yt.map($e=>$e).filter(N6),r(7,G=yt.map($e=>{const at=$e.toLowerCase().replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(mt){return mt.toUpperCase()});return{id:$e,label:at}})),O.setRows(N),u(r(6,$=O.getRows()));return}},we=()=>{te(),le(),r(8,ee=!1)},ue=(xt,yt=!1)=>{if(!xt)return;const $e=xt.geometry,at=$e.type.toLowerCase();let mt;if(at==="point"){const Xe=$e.coordinates;mt=[Xe[0],Xe[1]];let wt=c.getZoom();yt||wt<f&&(wt=f),c.flyTo({center:mt,zoom:wt})}else if(at==="linestring"){const Xe=$e.coordinates,wt=Xe.reduce(function(be,Be){return be.extend(Be)},new lc.LngLatBounds(Xe[0],Xe[0]));yt||c.fitBounds(wt,{padding:20}),mt=Xe[parseInt(`${Xe.length/2}`)],yt&&c.flyTo({center:mt,zoom:c.getZoom()})}else if(at==="polygon"){const Xe=$e.coordinates[0],wt=Xe.reduce(function(be,Be){return be.extend(Be)},new lc.LngLatBounds(Xe[0],Xe[0]));yt||c.fitBounds(wt,{padding:20}),mt=[(wt._ne.lng+wt._sw.lng)/2,(wt._ne.lat+wt._sw.lat)/2],yt&&c.flyTo({center:mt,zoom:c.getZoom()})}Z&&Z.remove(),Z=new lc.Marker().setLngLat(mt).addTo(c)};function ze(){b=Vc(this),r(0,b),r(1,y)}function Ue(){I=this.clientHeight,r(3,I)}const Ce=xt=>{ue(xt)},Me=xt=>{ue(xt,!0)},qe=(xt,yt)=>yt.properties===xt;function it(){A=this.clientHeight,r(2,A)}return t.$$set=xt=>{"map"in xt&&r(13,c=xt.map),"rowsPerPage"in xt&&r(14,s=xt.rowsPerPage),"minZoom"in xt&&r(15,f=xt.minZoom)},t.$$.update=()=>{t.$$.dirty[0]&8192&&c&&(c.on("sourcedata",xt=>{xt.isSourceLoaded&&te()}),c.on("zoomend",()=>{r(8,ee=!0)}),c.on("moveend",()=>{r(8,ee=!0)})),t.$$.dirty[0]&1&&le()},[b,y,A,I,C,N,$,G,ee,i,O,we,ue,c,s,f,te,ze,Ue,Ce,Me,qe,it]}class zW extends di{constructor(e){super(),pi(this,e,DW,MW,hi,{map:13,rowsPerPage:14,minZoom:15,getLayerList:16},null,[-1,-1])}get getLayerList(){return this.$$.ctx[16]}}function NW(t){let e,r,i,o,u,c,s;function f(C){t[9](C)}function y(C){t[10](C)}function b(C){t[11](C)}function A(C){t[12](C)}let I={};return t[0]!==void 0&&(I.map=t[0]),t[2]!==void 0&&(I.rowsPerPage=t[2]),t[3]!==void 0&&(I.minZoom=t[3]),t[7]!==void 0&&(I.getLayerList=t[7]),r=new zW({props:I}),Ut.push(()=>Xt(r,"map",f)),Ut.push(()=>Xt(r,"rowsPerPage",y)),Ut.push(()=>Xt(r,"minZoom",b)),Ut.push(()=>Xt(r,"getLayerList",A)),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(C){e=Qe(C,"DIV",{slot:!0,class:!0});var N=vt(e);Yt(r.$$.fragment,N),N.forEach(he),this.h()},h(){ge(e,"slot","sidebar"),ge(e,"class","primary-container svelte-1omflid")},m(C,N){dt(C,e,N),$t(r,e,null),s=!0},p(C,N){const O={};!i&&N&1&&(i=!0,O.map=C[0],er(()=>i=!1)),!o&&N&4&&(o=!0,O.rowsPerPage=C[2],er(()=>o=!1)),!u&&N&8&&(u=!0,O.minZoom=C[3],er(()=>u=!1)),!c&&N&128&&(c=!0,O.getLayerList=C[7],er(()=>c=!1)),r.$set(O)},i(C){s||(We(r.$$.fragment,C),s=!0)},o(C){et(r.$$.fragment,C),s=!1},d(C){C&&he(e),Gt(r)}}}function RW(t){let e,r;const i=t[8].default,o=wl(i,t,t[18],null);return{c(){e=Je("div"),o&&o.c(),this.h()},l(u){e=Qe(u,"DIV",{slot:!0,class:!0});var c=vt(e);o&&o.l(c),c.forEach(he),this.h()},h(){ge(e,"slot","map"),ge(e,"class","secondary-container svelte-1omflid")},m(u,c){dt(u,e,c),o&&o.m(e,null),r=!0},p(u,c){o&&o.p&&(!r||c&262144)&&xl(o,i,u,u[18],r?Al(i,u[18],c,null):kl(u[18]),null)},i(u){r||(We(o,u),r=!0)},o(u){et(o,u),r=!1},d(u){u&&he(e),o&&o.d(u)}}}function OW(t){let e,r,i,o,u,c,s;function f(N){t[13](N)}function y(N){t[14](N)}function b(N){t[15](N)}function A(N){t[16](N)}function I(N){t[17](N)}let C={isHorizontal:!0,sidebarOnLeft:!1,faIcon:"fa-table",faIconSize:"lg",minSidebarWidth:"40%",controlName:"attribute-table",$$slots:{map:[RW],sidebar:[NW]},$$scope:{ctx:t}};return t[0]!==void 0&&(C.map=t[0]),t[1]!==void 0&&(C.position=t[1]),t[6]!==void 0&&(C.isMenuShown=t[6]),t[4]!==void 0&&(C.width=t[4]),t[5]!==void 0&&(C.height=t[5]),e=new Z8({props:C}),Ut.push(()=>Xt(e,"map",f)),Ut.push(()=>Xt(e,"position",y)),Ut.push(()=>Xt(e,"isMenuShown",b)),Ut.push(()=>Xt(e,"width",A)),Ut.push(()=>Xt(e,"height",I)),{c(){Ht(e.$$.fragment)},l(N){Yt(e.$$.fragment,N)},m(N,O){$t(e,N,O),s=!0},p(N,[O]){const $={};O&262285&&($.$$scope={dirty:O,ctx:N}),!r&&O&1&&(r=!0,$.map=N[0],er(()=>r=!1)),!i&&O&2&&(i=!0,$.position=N[1],er(()=>i=!1)),!o&&O&64&&(o=!0,$.isMenuShown=N[6],er(()=>o=!1)),!u&&O&16&&(u=!0,$.width=N[4],er(()=>u=!1)),!c&&O&32&&(c=!0,$.height=N[5],er(()=>c=!1)),e.$set($)},i(N){s||(We(e.$$.fragment,N),s=!0)},o(N){et(e.$$.fragment,N),s=!1},d(N){Gt(e,N)}}}function FW(t,e,r){let{$$slots:i={},$$scope:o}=e,{map:u}=e,{position:c="top-right"}=e,{rowsPerPage:s=50}=e,{minZoom:f=14}=e,{width:y=0}=e,{height:b=0}=e,A=!1,I;function C(le){u=le,r(0,u)}function N(le){s=le,r(2,s)}function O(le){f=le,r(3,f)}function $(le){I=le,r(7,I)}function G(le){u=le,r(0,u)}function Z(le){c=le,r(1,c)}function ee(le){A=le,r(6,A)}function te(le){y=le,r(4,y)}function _e(le){b=le,r(5,b)}return t.$$set=le=>{"map"in le&&r(0,u=le.map),"position"in le&&r(1,c=le.position),"rowsPerPage"in le&&r(2,s=le.rowsPerPage),"minZoom"in le&&r(3,f=le.minZoom),"width"in le&&r(4,y=le.width),"height"in le&&r(5,b=le.height),"$$scope"in le&&r(18,o=le.$$scope)},t.$$.update=()=>{t.$$.dirty&192&&A&&I()},[u,c,s,f,y,b,A,I,i,C,N,O,$,G,Z,ee,te,_e,o]}class BW extends di{constructor(e){super(),pi(this,e,FW,OW,hi,{map:0,position:1,rowsPerPage:2,minZoom:3,width:4,height:5})}}function jW(t){let e,r,i;return r=new K$({}),{c(){e=Je("div"),Ht(r.$$.fragment),this.h()},l(o){e=Qe(o,"DIV",{slot:!0});var u=vt(e);Yt(r.$$.fragment,u),u.forEach(he),this.h()},h(){ge(e,"slot","sidebar")},m(o,u){dt(o,e,u),$t(r,e,null),i=!0},p:mi,i(o){i||(We(r.$$.fragment,o),i=!0)},o(o){et(r.$$.fragment,o),i=!1},d(o){o&&he(e),Gt(r)}}}function UW(t){let e;return{c(){e=Je("div"),this.h()},l(r){e=Qe(r,"DIV",{class:!0,id:!0}),vt(e).forEach(he),this.h()},h(){ge(e,"class","map svelte-1eiu92k"),ge(e,"id","map")},m(r,i){dt(r,e,i),t[10](e)},p:mi,d(r){r&&he(e),t[10](null)}}}function qW(t){return{c:mi,l:mi,m:mi,p:mi,i:mi,o:mi,d:mi}}function VW(t){let e,r,i,o,u,c,s,f,y,b,A;function I(te){t[14](te)}function C(te){t[15](te)}let N={};t[7]!==void 0&&(N.map=t[7]),t[0].popup.target!==void 0&&(N.targetLayers=t[0].popup.target),e=new eS({props:N}),Ut.push(()=>Xt(e,"map",I)),Ut.push(()=>Xt(e,"targetLayers",C));function O(te){t[16](te)}function $(te){t[17](te)}let G={position:"top-right"};t[7]!==void 0&&(G.map=t[7]),t[6]!==void 0&&(G.customiseUrl=t[6]),u=new GE({props:G}),Ut.push(()=>Xt(u,"map",O)),Ut.push(()=>Xt(u,"customiseUrl",$));function Z(te){t[18](te)}let ee={showPrintableArea:!0,showCrosshair:!0,position:"top-right"};return t[7]!==void 0&&(ee.map=t[7]),y=new BE({props:ee}),Ut.push(()=>Xt(y,"map",Z)),{c(){Ht(e.$$.fragment),o=ir(),Ht(u.$$.fragment),f=ir(),Ht(y.$$.fragment)},l(te){Yt(e.$$.fragment,te),o=nr(te),Yt(u.$$.fragment,te),f=nr(te),Yt(y.$$.fragment,te)},m(te,_e){$t(e,te,_e),dt(te,o,_e),$t(u,te,_e),dt(te,f,_e),$t(y,te,_e),A=!0},p(te,_e){const le={};!r&&_e&128&&(r=!0,le.map=te[7],er(()=>r=!1)),!i&&_e&1&&(i=!0,le.targetLayers=te[0].popup.target,er(()=>i=!1)),e.$set(le);const we={};!c&&_e&128&&(c=!0,we.map=te[7],er(()=>c=!1)),!s&&_e&64&&(s=!0,we.customiseUrl=te[6],er(()=>s=!1)),u.$set(we);const ue={};!b&&_e&128&&(b=!0,ue.map=te[7],er(()=>b=!1)),y.$set(ue)},i(te){A||(We(e.$$.fragment,te),We(u.$$.fragment,te),We(y.$$.fragment,te),A=!0)},o(te){et(e.$$.fragment,te),et(u.$$.fragment,te),et(y.$$.fragment,te),A=!1},d(te){te&&(he(o),he(f)),Gt(e,te),Gt(u,te),Gt(y,te)}}}function HW(t){return{c:mi,l:mi,m:mi,p:mi,i:mi,o:mi,d:mi}}function $W(t){let e,r,i,o,u,c,s,f;function y(N){t[11](N)}function b(N){t[12](N)}function A(N){t[13](N)}let I={position:"top-right",rowsPerPage:t[0].attributeTable.rowsPerPage,minZoom:t[0].attributeTable.minZoom,$$slots:{default:[UW]},$$scope:{ctx:t}};t[7]!==void 0&&(I.map=t[7]),t[4]!==void 0&&(I.width=t[4]),t[5]!==void 0&&(I.height=t[5]),r=new BW({props:I}),Ut.push(()=>Xt(r,"map",y)),Ut.push(()=>Xt(r,"width",b)),Ut.push(()=>Xt(r,"height",A));let C={ctx:t,current:null,token:null,hasCatch:!1,pending:HW,then:VW,catch:qW,blocks:[,,,]};return Ab(s=t[3],C),{c(){e=Je("div"),Ht(r.$$.fragment),c=ir(),C.block.c(),this.h()},l(N){e=Qe(N,"DIV",{slot:!0});var O=vt(e);Yt(r.$$.fragment,O),c=nr(O),C.block.l(O),O.forEach(he),this.h()},h(){ge(e,"slot","map")},m(N,O){dt(N,e,O),$t(r,e,null),Ke(e,c),C.block.m(e,C.anchor=null),C.mount=()=>e,C.anchor=null,f=!0},p(N,O){t=N;const $={};O&1&&($.rowsPerPage=t[0].attributeTable.rowsPerPage),O&1&&($.minZoom=t[0].attributeTable.minZoom),O&67108866&&($.$$scope={dirty:O,ctx:t}),!i&&O&128&&(i=!0,$.map=t[7],er(()=>i=!1)),!o&&O&16&&(o=!0,$.width=t[4],er(()=>o=!1)),!u&&O&32&&(u=!0,$.height=t[5],er(()=>u=!1)),r.$set($),C.ctx=t,O&8&&s!==(s=t[3])&&Ab(s,C)||n9(C,t,O)},i(N){f||(We(r.$$.fragment,N),We(C.block),f=!0)},o(N){et(r.$$.fragment,N);for(let O=0;O<3;O+=1){const $=C.blocks[O];et($)}f=!1},d(N){N&&he(e),Gt(r),C.block.d(),C.token=null,C=null}}}function GW(t){let e,r,i,o,u,c;Ha(t[9]);function s(b){t[19](b)}function f(b){t[20](b)}let y={position:"top-right",$$slots:{map:[$W],sidebar:[jW]},$$scope:{ctx:t}};return t[7]!==void 0&&(y.map=t[7]),t[2]!==void 0&&(y.isMenuShown=t[2]),e=new Z8({props:y}),Ut.push(()=>Xt(e,"map",s)),Ut.push(()=>Xt(e,"isMenuShown",f)),e.$on("changed",t[8]),{c(){Ht(e.$$.fragment)},l(b){Yt(e.$$.fragment,b)},m(b,A){$t(e,b,A),o=!0,u||(c=Dr(window,"resize",t[9]),u=!0)},p(b,[A]){const I={};A&67109115&&(I.$$scope={dirty:A,ctx:b}),!r&&A&128&&(r=!0,I.map=b[7],er(()=>r=!1)),!i&&A&4&&(i=!0,I.isMenuShown=b[2],er(()=>i=!1)),e.$set(I)},i(b){o||(We(e.$$.fragment,b),o=!0)},o(b){et(e.$$.fragment,b),o=!1},d(b){Gt(e,b),u=!1,c()}}}function WW(t,e,r){let i,o;Ga(t,Mp,Me=>r(21,i=Me)),Ga(t,Ru,Me=>r(7,o=Me));let u=new N9;sy.addProtocol("pmtiles",u.tile);let c,s=!1,f,y,b;const I=new Hk().getInitialStyle(Do.styles);Mp.update(()=>I);const C=()=>{if(c)return new Promise(Me=>{Lh(Ru,o=new lc.Map({container:c,style:I.uri,center:Do.center,zoom:Do.zoom,hash:!0,attributionControl:!1}),o),o.addControl(new lc.AttributionControl({compact:!0}),"bottom-right"),o.addControl(new lc.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),o.addControl(new lc.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"bottom-right"),Do.terrain&&(o.setMaxPitch(85),o.addControl(new lc.TerrainControl(Do.terrain),"bottom-right")),Do.areaSwitcher&&o.addControl(new J1(Do.areaSwitcher.areas),"bottom-right"),o.addControl(new lc.FullscreenControl({container:document.querySelector("body")}),"bottom-right"),o.addControl(new lc.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),new J$(o).create(),Do.search&&fetch(Do.search.url).then(yt=>yt.json()).then(yt=>{const $e=async mt=>{for(var Xe=[],wt=0;wt<yt.features.length;wt++){var be=yt.features[wt];Do.search.target.forEach(Be=>{var Ae=be.properties[Be];Ae&&Ae.toString().toLowerCase().search(mt.toString().toLowerCase())!==-1&&(be.place_name=Do.search.format(be.properties),be.center=be.geometry.coordinates,be.place_type=Do.search.place_type,Xe.push(be))})}return Xe};var at={forwardGeocode:async({query:mt})=>({features:await $e(mt)})};o.addControl(new VG(at,{zoom:Do.search.zoom,placeholder:Do.search.placeholder,limit:Do.search.limit,maplibregl:sy,collapsed:!0,showResultsWhileTyping:!0}),"top-left")}),o.on("load",()=>{Me()});let it=["wss","pipeline","watersource"],xt;o.on("mousemove","wss",function(yt){yt.features.length>0&&(xt&&it.forEach($e=>{o.setFeatureState({source:"assets",sourceLayer:$e,id:xt},{hover:!1})}),xt=yt.features[0].id,it.forEach($e=>{o.setFeatureState({source:"assets",sourceLayer:$e,id:xt},{hover:!0})}))}),o.on("mouseleave","wss",function(){xt&&it.forEach(yt=>{o.setFeatureState({source:"assets",sourceLayer:yt,id:xt},{hover:!1})}),xt=null})})};let N=Me=>{const qe=new URL(Me);return qe.searchParams.set("style",i.title),qe.toString()};sh(()=>{r(3,f=C())});const O=Me=>{r(4,y=Me.detail.secondarySize)};function $(){r(5,b=window.innerHeight)}function G(Me){Ut[Me?"unshift":"push"](()=>{c=Me,r(1,c)})}function Z(Me){o=Me,Ru.set(o)}function ee(Me){y=Me,r(4,y)}function te(Me){b=Me,r(5,b)}function _e(Me){o=Me,Ru.set(o)}function le(Me){t.$$.not_equal(Do.popup.target,Me)&&(Do.popup.target=Me,r(0,Do))}function we(Me){o=Me,Ru.set(o)}function ue(Me){N=Me,r(6,N)}function ze(Me){o=Me,Ru.set(o)}function Ue(Me){o=Me,Ru.set(o)}function Ce(Me){s=Me,r(2,s)}return[Do,c,s,f,y,b,N,o,O,$,G,Z,ee,te,_e,le,we,ue,ze,Ue,Ce]}class ZW extends di{constructor(e){super(),pi(this,e,WW,GW,hi,{})}}function XW(t){let e,r="",i,o,u=`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'G-872N8T6TQJ');
	`,c,s,f,y;return f=new ZW({}),{c(){e=Je("script"),e.innerHTML=r,o=Je("script"),o.textContent=u,c=Je("link"),s=ir(),Ht(f.$$.fragment),this.h()},l(b){const A=r9("svelte-9rh23o",document.head);e=Qe(A,"SCRIPT",{src:!0,"data-svelte-h":!0}),vo(e)!=="svelte-1gozs3b"&&(e.innerHTML=r),o=Qe(A,"SCRIPT",{"data-svelte-h":!0}),vo(o)!=="svelte-5m2xc5"&&(o.textContent=u),c=Qe(A,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0,referrerpolicy:!0}),A.forEach(he),s=nr(b),Yt(f.$$.fragment,b),this.h()},h(){e.async=!0,s8(e.src,i="https://www.googletagmanager.com/gtag/js?id=G-872N8T6TQJ")||ge(e,"src",i),ge(c,"rel","stylesheet"),ge(c,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"),ge(c,"integrity","sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="),ge(c,"crossorigin","anonymous"),ge(c,"referrerpolicy","no-referrer")},m(b,A){Ke(document.head,e),Ke(document.head,o),Ke(document.head,c),dt(b,s,A),$t(f,b,A),y=!0},p:mi,i(b){y||(We(f.$$.fragment,b),y=!0)},o(b){et(f.$$.fragment,b),y=!1},d(b){b&&he(s),he(e),he(o),he(c),Gt(f,b)}}}function YW(t){const e=Do.styles[0];return Mp.update(()=>e),sh(async()=>{window.global=window;const r=await(await Ip(()=>import("./index.63e035dc.js").then(i=>i.i),[],import.meta.url)).Buffer;window.Buffer=r}),[]}class cZ extends di{constructor(e){super(),pi(this,e,YW,XW,hi,{})}}export{cZ as P,aa as _,rZ as a,bh as c,O2 as g};
