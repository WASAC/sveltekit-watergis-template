var Zb=Object.defineProperty;var j_=Object.getOwnPropertySymbols;var Wb=Object.prototype.hasOwnProperty,Xb=Object.prototype.propertyIsEnumerable;var q_=(o,e,n)=>e in o?Zb(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,tr=(o,e)=>{for(var n in e||(e={}))Wb.call(e,n)&&q_(o,n,e[n]);if(j_)for(var n of j_(e))Xb.call(e,n)&&q_(o,n,e[n]);return o};import{F as An,G as pf,H as Kb,I as Jb,S as wn,i as En,s as bn,J as pn,C as Ct,e as yi,c as _i,a as pi,d as We,K as hi,g as Dt,L as Ei,M as fn,N as mn,O as gn,z as en,P as zn,q as tt,o as at,Q as xr,R as bi,T as Jn,v as Po,U as Yn,V as K0,W as qi,w as Li,l as cn,x as Wi,y as zi,A as Xr,p as Ar,B as Di,X as Or,r as sr,Y as eh,n as Cr,Z as Ql,_ as $l,$ as G_,a0 as Yb,E as Vo,b as ii,k as Bn,m as Fn,a1 as Qb,a2 as sn,a3 as $b,t as Io,h as So,j as Fs,a4 as ex,a5 as tx,a6 as jo,a7 as Cl,f as H_,a8 as kl,a9 as ky,aa as Oh,ab as ix,ac as _f,ad as Z_}from"./index-261df066.js";import{r as nx,w as eu,_ as W_}from"./preload-helper-c22bda32.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var my=function(o,e){return my=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var p in a)Object.prototype.hasOwnProperty.call(a,p)&&(n[p]=a[p])},my(o,e)};function co(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");my(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var cr=function(){return cr=Object.assign||function(e){for(var n,a=1,p=arguments.length;a<p;a++){n=arguments[a];for(var _ in n)Object.prototype.hasOwnProperty.call(n,_)&&(e[_]=n[_])}return e},cr.apply(this,arguments)};function rx(o,e,n,a){function p(_){return _ instanceof n?_:new n(function(c){c(_)})}return new(n||(n=Promise))(function(_,c){function h(z){try{L(a.next(z))}catch(R){c(R)}}function I(z){try{L(a.throw(z))}catch(R){c(R)}}function L(z){z.done?_(z.value):p(z.value).then(h,I)}L((a=a.apply(o,e||[])).next())})}function ox(o,e){var n={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,p,_,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(L){return function(z){return I([L,z])}}function I(L){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,p&&(_=L[0]&2?p.return:L[0]?p.throw||((_=p.return)&&_.call(p),0):p.next)&&!(_=_.call(p,L[1])).done)return _;switch(p=0,_&&(L=[L[0]&2,_.value]),L[0]){case 0:case 1:_=L;break;case 4:return n.label++,{value:L[1],done:!1};case 5:n.label++,p=L[1],L=[0];continue;case 7:L=n.ops.pop(),n.trys.pop();continue;default:if(_=n.trys,!(_=_.length>0&&_[_.length-1])&&(L[0]===6||L[0]===2)){n=0;continue}if(L[0]===3&&(!_||L[1]>_[0]&&L[1]<_[3])){n.label=L[1];break}if(L[0]===6&&n.label<_[1]){n.label=_[1],_=L;break}if(_&&n.label<_[2]){n.label=_[2],n.ops.push(L);break}_[2]&&n.ops.pop(),n.trys.pop();continue}L=e.call(o,n)}catch(z){L=[6,z],p=0}finally{a=_=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}}function Ed(o){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&o[e],a=0;if(n)return n.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&a>=o.length&&(o=void 0),{value:o&&o[a++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ax(o,e){var n=typeof Symbol=="function"&&o[Symbol.iterator];if(!n)return o;var a=n.call(o),p,_=[],c;try{for(;(e===void 0||e-- >0)&&!(p=a.next()).done;)_.push(p.value)}catch(h){c={error:h}}finally{try{p&&!p.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return _}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ma=function(){function o(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(o,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.destroy=function(){},o}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function sx(o){return o===void 0&&(o=window),lx(o)?{passive:!0}:!1}function lx(o){o===void 0&&(o=window);var e=!1;try{var n={get passive(){return e=!0,!1}},a=function(){};o.document.addEventListener("test",a,n),o.document.removeEventListener("test",a,n)}catch{e=!1}return e}var ux=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:sx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function cx(o,e){if(o.closest)return o.closest(e);for(var n=o;n;){if(J0(n,e))return n;n=n.parentElement}return null}function J0(o,e){var n=o.matches||o.webkitMatchesSelector||o.msMatchesSelector;return n.call(o,e)}function hx(o){var e=o;if(e.offsetParent!==null)return e.scrollWidth;var n=e.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var a=n.scrollWidth;return document.documentElement.removeChild(n),a}var vf=Object.freeze(Object.defineProperty({__proto__:null,closest:cx,matches:J0,estimateScrollWidth:hx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dx={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},px={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},X_={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},om;function fx(o,e){e===void 0&&(e=!1);var n=o.CSS,a=om;if(typeof om=="boolean"&&!e)return om;var p=n&&typeof n.supports=="function";if(!p)return!1;var _=n.supports("--css-vars","yes"),c=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return a=_||c,e||(om=a),a}function mx(o,e,n){if(!o)return{x:0,y:0};var a=e.x,p=e.y,_=a+n.left,c=p+n.top,h,I;if(o.type==="touchstart"){var L=o;h=L.changedTouches[0].pageX-_,I=L.changedTouches[0].pageY-c}else{var z=o;h=z.pageX-_,I=z.pageY-c}return{x:h,y:I}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var K_=["touchstart","pointerdown","mousedown","keydown"],J_=["touchend","pointerup","mouseup","contextmenu"],am=[],gx=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.activationAnimationHasEnded=!1,a.activationTimer=0,a.fgDeactivationRemovalTimer=0,a.fgScale="0",a.frame={width:0,height:0},a.initialSize=0,a.layoutFrame=0,a.maxRadius=0,a.unboundedCoords={left:0,top:0},a.activationState=a.defaultActivationState(),a.activationTimerCallback=function(){a.activationAnimationHasEnded=!0,a.runDeactivationUXLogicIfReady()},a.activateHandler=function(p){a.activateImpl(p)},a.deactivateHandler=function(){a.deactivateImpl()},a.focusHandler=function(){a.handleFocus()},a.blurHandler=function(){a.handleBlur()},a.resizeHandler=function(){a.layout()},a}return Object.defineProperty(e,"cssClasses",{get:function(){return dx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return px},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return X_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this,a=this.supportsPressRipple();if(this.registerRootHandlers(a),a){var p=e.cssClasses,_=p.ROOT,c=p.UNBOUNDED;requestAnimationFrame(function(){n.adapter.addClass(_),n.adapter.isUnbounded()&&(n.adapter.addClass(c),n.layoutInternal())})}},e.prototype.destroy=function(){var n=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var a=e.cssClasses,p=a.ROOT,_=a.UNBOUNDED;requestAnimationFrame(function(){n.adapter.removeClass(p),n.adapter.removeClass(_),n.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(n){this.activateImpl(n)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var n=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){n.layoutInternal(),n.layoutFrame=0})},e.prototype.setUnbounded=function(n){var a=e.cssClasses.UNBOUNDED;n?this.adapter.addClass(a):this.adapter.removeClass(a)},e.prototype.handleFocus=function(){var n=this;requestAnimationFrame(function(){return n.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var n=this;requestAnimationFrame(function(){return n.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(n){var a,p;if(n){try{for(var _=Ed(K_),c=_.next();!c.done;c=_.next()){var h=c.value;this.adapter.registerInteractionHandler(h,this.activateHandler)}}catch(I){a={error:I}}finally{try{c&&!c.done&&(p=_.return)&&p.call(_)}finally{if(a)throw a.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(n){var a,p;if(n.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var _=Ed(J_),c=_.next();!c.done;c=_.next()){var h=c.value;this.adapter.registerDocumentInteractionHandler(h,this.deactivateHandler)}}catch(I){a={error:I}}finally{try{c&&!c.done&&(p=_.return)&&p.call(_)}finally{if(a)throw a.error}}},e.prototype.deregisterRootHandlers=function(){var n,a;try{for(var p=Ed(K_),_=p.next();!_.done;_=p.next()){var c=_.value;this.adapter.deregisterInteractionHandler(c,this.activateHandler)}}catch(h){n={error:h}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var n,a;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var p=Ed(J_),_=p.next();!_.done;_=p.next()){var c=_.value;this.adapter.deregisterDocumentInteractionHandler(c,this.deactivateHandler)}}catch(h){n={error:h}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}},e.prototype.removeCssVars=function(){var n=this,a=e.strings,p=Object.keys(a);p.forEach(function(_){_.indexOf("VAR_")===0&&n.adapter.updateCssVariable(a[_],null)})},e.prototype.activateImpl=function(n){var a=this;if(!this.adapter.isSurfaceDisabled()){var p=this.activationState;if(!p.isActivated){var _=this.previousActivationEvent,c=_&&n!==void 0&&_.type!==n.type;if(!c){p.isActivated=!0,p.isProgrammatic=n===void 0,p.activationEvent=n,p.wasActivatedByPointer=p.isProgrammatic?!1:n!==void 0&&(n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown");var h=n!==void 0&&am.length>0&&am.some(function(I){return a.adapter.containsEventTarget(I)});if(h){this.resetActivationState();return}n!==void 0&&(am.push(n.target),this.registerDeactivationHandlers(n)),p.wasElementMadeActive=this.checkElementMadeActive(n),p.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){am=[],!p.wasElementMadeActive&&n!==void 0&&(n.key===" "||n.keyCode===32)&&(p.wasElementMadeActive=a.checkElementMadeActive(n),p.wasElementMadeActive&&a.animateActivation()),p.wasElementMadeActive||(a.activationState=a.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(n){return n!==void 0&&n.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var n=this,a=e.strings,p=a.VAR_FG_TRANSLATE_START,_=a.VAR_FG_TRANSLATE_END,c=e.cssClasses,h=c.FG_DEACTIVATION,I=c.FG_ACTIVATION,L=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var z="",R="";if(!this.adapter.isUnbounded()){var O=this.getFgTranslationCoordinates(),Y=O.startPoint,ee=O.endPoint;z=Y.x+"px, "+Y.y+"px",R=ee.x+"px, "+ee.y+"px"}this.adapter.updateCssVariable(p,z),this.adapter.updateCssVariable(_,R),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(h),this.adapter.computeBoundingRect(),this.adapter.addClass(I),this.activationTimer=setTimeout(function(){n.activationTimerCallback()},L)},e.prototype.getFgTranslationCoordinates=function(){var n=this.activationState,a=n.activationEvent,p=n.wasActivatedByPointer,_;p?_=mx(a,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):_={x:this.frame.width/2,y:this.frame.height/2},_={x:_.x-this.initialSize/2,y:_.y-this.initialSize/2};var c={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:_,endPoint:c}},e.prototype.runDeactivationUXLogicIfReady=function(){var n=this,a=e.cssClasses.FG_DEACTIVATION,p=this.activationState,_=p.hasDeactivationUXRun,c=p.isActivated,h=_||!c;h&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(a),this.fgDeactivationRemovalTimer=setTimeout(function(){n.adapter.removeClass(a)},X_.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var n=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(n),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var n=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return n.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var n=this,a=this.activationState;if(!!a.isActivated){var p=cr({},a);a.isProgrammatic?(requestAnimationFrame(function(){n.animateDeactivation(p)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){n.activationState.hasDeactivationUXRun=!0,n.animateDeactivation(p),n.resetActivationState()}))}},e.prototype.animateDeactivation=function(n){var a=n.wasActivatedByPointer,p=n.wasElementMadeActive;(a||p)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var n=this;this.frame=this.adapter.computeBoundingRect();var a=Math.max(this.frame.height,this.frame.width),p=function(){var c=Math.sqrt(Math.pow(n.frame.width,2)+Math.pow(n.frame.height,2));return c+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?a:p();var _=Math.floor(a*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&_%2!==0?this.initialSize=_-1:this.initialSize=_,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var n=e.strings,a=n.VAR_FG_SIZE,p=n.VAR_LEFT,_=n.VAR_TOP,c=n.VAR_FG_SCALE;this.adapter.updateCssVariable(a,this.initialSize+"px"),this.adapter.updateCssVariable(c,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(p,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(_,this.unboundedCoords.top+"px"))},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Id={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},ym={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},yx={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var My=function(o){co(e,o);function e(n){return o.call(this,cr(cr({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"strings",{get:function(){return yx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Id},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ym},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.handleTargetScroll=function(){},e.prototype.handleWindowResize=function(){},e.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sm=0,Y0=function(o){co(e,o);function e(n){var a=o.call(this,n)||this;return a.wasDocked=!0,a.isDockedShowing=!0,a.currentAppBarOffsetTop=0,a.isCurrentlyBeingResized=!1,a.resizeThrottleId=sm,a.resizeDebounceId=sm,a.lastScrollPosition=a.adapter.getViewportScrollY(),a.topAppBarHeight=a.adapter.getTopAppBarHeight(),a}return e.prototype.destroy=function(){o.prototype.destroy.call(this),this.adapter.setStyle("top","")},e.prototype.handleTargetScroll=function(){var n=Math.max(this.adapter.getViewportScrollY(),0),a=n-this.lastScrollPosition;this.lastScrollPosition=n,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=a,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},e.prototype.handleWindowResize=function(){var n=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){n.resizeThrottleId=sm,n.throttledResizeHandler()},ym.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){n.handleTargetScroll(),n.isCurrentlyBeingResized=!1,n.resizeDebounceId=sm},ym.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},e.prototype.checkForUpdate=function(){var n=-this.topAppBarHeight,a=this.currentAppBarOffsetTop<0,p=this.currentAppBarOffsetTop>n,_=a&&p;if(_)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==p)return this.isDockedShowing=p,!0}else return this.wasDocked=!0,!0;return _},e.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var n=this.currentAppBarOffsetTop;Math.abs(n)>=this.topAppBarHeight&&(n=-ym.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",n+"px")}},e.prototype.throttledResizeHandler=function(){var n=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==n&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-n,this.topAppBarHeight=n),this.handleTargetScroll()},e}(My);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _x=function(o){co(e,o);function e(){var n=o!==null&&o.apply(this,arguments)||this;return n.wasScrolled=!1,n}return e.prototype.handleTargetScroll=function(){var n=this.adapter.getViewportScrollY();n<=0?this.wasScrolled&&(this.adapter.removeClass(Id.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(Id.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},e}(Y0);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vx=function(o){co(e,o);function e(n){var a=o.call(this,n)||this;return a.collapsed=!1,a.isAlwaysCollapsed=!1,a}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),e.prototype.init=function(){o.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Id.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Id.SHORT_COLLAPSED_CLASS))},e.prototype.setAlwaysCollapsed=function(n){this.isAlwaysCollapsed=!!n,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},e.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},e.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},e.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var n=this.adapter.getViewportScrollY();n<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},e.prototype.uncollapse=function(){this.adapter.removeClass(Id.SHORT_COLLAPSED_CLASS),this.collapsed=!1},e.prototype.collapse=function(){this.adapter.addClass(Id.SHORT_COLLAPSED_CLASS),this.collapsed=!0},e}(My);function wi(o){return Object.entries(o).filter(([e,n])=>e!==""&&n).map(([e])=>e).join(" ")}function Pn(o,e,n,a={bubbles:!0},p=!1){if(typeof Event!="undefined"&&o){const _=new CustomEvent(e,Object.assign(Object.assign({},a),{detail:n}));if(o==null||o.dispatchEvent(_),p&&e.startsWith("SMUI")){const c=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},a),{detail:n}));o==null||o.dispatchEvent(c),c.defaultPrevented&&_.preventDefault()}return _}}function _s(o,e){let n=Object.getOwnPropertyNames(o);const a={};for(let p=0;p<n.length;p++){const _=n[p],c=_.indexOf("$");c!==-1&&e.indexOf(_.substring(0,c+1))!==-1||e.indexOf(_)===-1&&(a[_]=o[_])}return a}const Y_=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,bx=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function Qn(o){let e,n=[];o.$on=(p,_)=>{let c=p,h=()=>{};return e?h=e(c,_):n.push([c,_]),c.match(Y_)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',c),()=>{h()}};function a(p){pf(o,p)}return p=>{const _=[],c={};e=(h,I)=>{let L=h,z=I,R=!1;const O=L.match(Y_),Y=L.match(bx),ee=O||Y;if(L.match(/^SMUI:\w+:/)){const de=L.split(":");let oe="";for(let be=0;be<de.length;be++)oe+=be===de.length-1?":"+de[be]:de[be].split("-").map(qe=>qe.slice(0,1).toUpperCase()+qe.slice(1)).join("");console.warn(`The event ${L.split("$")[0]} has been renamed to ${oe.split("$")[0]}.`),L=oe}if(ee){const de=L.split(O?":":"$");L=de[0];const oe=Object.fromEntries(de.slice(1).map(be=>[be,!0]));oe.passive&&(R=R||{},R.passive=!0),oe.nonpassive&&(R=R||{},R.passive=!1),oe.capture&&(R=R||{},R.capture=!0),oe.once&&(R=R||{},R.once=!0),oe.preventDefault&&(z=Kb(z)),oe.stopPropagation&&(z=Jb(z))}const ue=An(p,L,z,R),te=()=>{ue();const de=_.indexOf(te);de>-1&&_.splice(de,1)};return _.push(te),L in c||(c[L]=An(p,L,a)),te};for(let h=0;h<n.length;h++)e(n[h][0],n[h][1]);return{destroy:()=>{for(let h=0;h<_.length;h++)_[h]();for(let h of Object.entries(c))h[1]()}}}}function rr(o,e){let n=Object.getOwnPropertyNames(o);const a={};for(let p=0;p<n.length;p++){const _=n[p];_.substring(0,e.length)===e&&(a[_.substring(e.length)]=o[_])}return a}function qn(o,e){let n=[];if(e)for(let a=0;a<e.length;a++){const p=e[a],_=Array.isArray(p)?p[0]:p;Array.isArray(p)&&p.length>1?n.push(_(o,p[1])):n.push(_(o))}return{update(a){if((a&&a.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(a)for(let p=0;p<a.length;p++){const _=n[p];if(_&&_.update){const c=a[p];Array.isArray(c)&&c.length>1?_.update(c[1]):_.update()}}},destroy(){for(let a=0;a<n.length;a++){const p=n[a];p&&p.destroy&&p.destroy()}}}}const{window:Q_}=K0;function xx(o){let e,n,a,p,_,c,h;const I=o[22].default,L=pn(I,o,o[21],null);let z=[{class:n=wi(tr({[o[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":o[4]==="short","mdc-top-app-bar--short-collapsed":o[0],"mdc-top-app-bar--fixed":o[4]==="fixed","smui-top-app-bar--static":o[4]==="static","smui-top-app-bar--color-secondary":o[5]==="secondary","mdc-top-app-bar--prominent":o[6],"mdc-top-app-bar--dense":o[7]},o[11]))},{style:a=Object.entries(o[12]).map($_).concat([o[3]]).join(" ")},o[15]],R={};for(let O=0;O<z.length;O+=1)R=Ct(R,z[O]);return{c(){e=yi("header"),L&&L.c(),this.h()},l(O){e=_i(O,"HEADER",{class:!0,style:!0});var Y=pi(e);L&&L.l(Y),Y.forEach(We),this.h()},h(){hi(e,R)},m(O,Y){Dt(O,e,Y),L&&L.m(e,null),o[25](e),_=!0,c||(h=[An(Q_,"resize",o[23]),An(Q_,"scroll",o[24]),Ei(p=qn.call(null,e,o[1])),Ei(o[13].call(null,e)),An(e,"SMUITopAppBarIconButton:nav",o[26])],c=!0)},p(O,Y){L&&L.p&&(!_||Y[0]&2097152)&&fn(L,I,O,O[21],_?gn(I,O[21],Y,null):mn(O[21]),null),hi(e,R=en(z,[(!_||Y[0]&2293&&n!==(n=wi(tr({[O[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":O[4]==="short","mdc-top-app-bar--short-collapsed":O[0],"mdc-top-app-bar--fixed":O[4]==="fixed","smui-top-app-bar--static":O[4]==="static","smui-top-app-bar--color-secondary":O[5]==="secondary","mdc-top-app-bar--prominent":O[6],"mdc-top-app-bar--dense":O[7]},O[11]))))&&{class:n},(!_||Y[0]&4104&&a!==(a=Object.entries(O[12]).map($_).concat([O[3]]).join(" ")))&&{style:a},Y[0]&32768&&O[15]])),p&&zn(p.update)&&Y[0]&2&&p.update.call(null,O[1])},i(O){_||(tt(L,O),_=!0)},o(O){at(L,O),_=!1},d(O){O&&We(e),L&&L.d(O),o[25](null),c=!1,xr(h)}}}const $_=([o,e])=>`${o}: ${e};`;function wx(o,e,n){const a=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let I=()=>{};function L(ei){return ei===I}let{use:z=[]}=e,{class:R=""}=e,{style:O=""}=e,{variant:Y="standard"}=e,{color:ee="primary"}=e,{collapsed:ue=I}=e;const te=!L(ue)&&!!ue;L(ue)&&(ue=!1);let{prominent:de=!1}=e,{dense:oe=!1}=e,{scrollTarget:be=void 0}=e,qe,Ne,De={},fe={},ct,st=nx({variant:Y,prominent:de,dense:oe},ei=>{n(18,ct=ei)}),Ge,Ue=Y;Po(()=>(n(9,Ne=Rt()),Ne.init(),()=>{Ne.destroy()}));function Rt(){const ei={static:My,short:vx,fixed:_x}[Y]||Y0;return new ei({hasClass:He,addClass:Mt,removeClass:li,setStyle:Et,getTopAppBarHeight:()=>qe.clientHeight,notifyNavigationIconClicked:()=>Pn(qe,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>be==null?window.pageYOffset:be.scrollTop,getTotalActionItems:()=>qe.querySelectorAll(".mdc-top-app-bar__action-item").length})}function He(ei){return ei in De?De[ei]:wt().classList.contains(ei)}function Mt(ei){De[ei]||n(11,De[ei]=!0,De)}function li(ei){(!(ei in De)||De[ei])&&n(11,De[ei]=!1,De)}function Et(ei,Jt){fe[ei]!=Jt&&(Jt===""||Jt==null?(delete fe[ei],n(12,fe),n(20,Ue),n(4,Y),n(9,Ne)):n(12,fe[ei]=Jt,fe))}function Gt(){Ne&&(Ne.handleTargetScroll(),Y==="short"&&n(0,ue="isCollapsed"in Ne&&Ne.isCollapsed))}function Ye(){return st}function wt(){return qe}const Lt=()=>Y!=="short"&&Y!=="fixed"&&Ne&&Ne.handleWindowResize(),ni=()=>be==null&&Gt();function Xt(ei){qi[ei?"unshift":"push"](()=>{qe=ei,n(10,qe)})}const Ki=()=>Ne&&Ne.handleNavigationClick();return o.$$set=ei=>{e=Ct(Ct({},e),Yn(ei)),n(15,p=bi(e,a)),"use"in ei&&n(1,z=ei.use),"class"in ei&&n(2,R=ei.class),"style"in ei&&n(3,O=ei.style),"variant"in ei&&n(4,Y=ei.variant),"color"in ei&&n(5,ee=ei.color),"collapsed"in ei&&n(0,ue=ei.collapsed),"prominent"in ei&&n(6,de=ei.prominent),"dense"in ei&&n(7,oe=ei.dense),"scrollTarget"in ei&&n(8,be=ei.scrollTarget),"$$scope"in ei&&n(21,c=ei.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&262352&&ct&&ct({variant:Y,prominent:de,dense:oe}),o.$$.dirty[0]&1049104&&Ue!==Y&&Ne&&(n(20,Ue=Y),Ne.destroy(),n(11,De={}),n(12,fe={}),n(9,Ne=Rt()),Ne.init()),o.$$.dirty[0]&528&&Ne&&Y==="short"&&"setAlwaysCollapsed"in Ne&&Ne.setAlwaysCollapsed(te),o.$$.dirty[0]&524544&&Ge!==be&&(Ge&&Ge.removeEventListener("scroll",Gt),be&&be.addEventListener("scroll",Gt),n(19,Ge=be))},[ue,z,R,O,Y,ee,de,oe,be,Ne,qe,De,fe,h,Gt,p,Ye,wt,ct,Ge,Ue,c,_,Lt,ni,Xt,Ki]}class Ex extends wn{constructor(e){super(),En(this,e,wx,xx,bn,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function Ix(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("div"),h&&h.c(),this.h()},l(z){e=_i(z,"DIV",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Sx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Q0 extends wn{constructor(e){super(),En(this,e,Sx,Ix,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Tx(o){let e;const n=o[10].default,a=pn(n,o,o[12],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&4096)&&fn(a,n,p,p[12],e?gn(n,p[12],_,null):mn(p[12]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function Ax(o){let e,n,a;const p=[{use:[o[7],...o[0]]},{class:wi(tr({[o[1]]:!0,[o[5]]:!0},o[4]))},o[6],o[8]];var _=o[2];function c(h){let I={$$slots:{default:[Tx]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[11](e)),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,[I]){const L=I&499?en(p,[I&129&&{use:[h[7],...h[0]]},I&50&&{class:wi(tr({[h[1]]:!0,[h[5]]:!0},h[4]))},I&64&&Xr(h[6]),I&256&&Xr(h[8])]):{};if(I&4096&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[2])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[11](e),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[11](null),h&&We(n),e&&Di(e,h)}}}const Dh={component:Q0,class:"",classMap:{},contexts:{},props:{}};function Cx(o,e,n){const a=["use","class","component","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e,{class:I=""}=e,L;const z=Dh.class,R={},O=[],Y=Dh.contexts,ee=Dh.props;let{component:ue=Dh.component}=e;Object.entries(Dh.classMap).forEach(([be,qe])=>{const Ne=Or(qe);Ne&&"subscribe"in Ne&&O.push(Ne.subscribe(De=>{n(4,R[be]=De,R)}))});const te=Qn(Jn());for(let be in Y)Y.hasOwnProperty(be)&&sr(be,Y[be]);eh(()=>{for(const be of O)be()});function de(){return L.getElement()}function oe(be){qi[be?"unshift":"push"](()=>{L=be,n(3,L)})}return o.$$set=be=>{e=Ct(Ct({},e),Yn(be)),n(8,p=bi(e,a)),"use"in be&&n(0,h=be.use),"class"in be&&n(1,I=be.class),"component"in be&&n(2,ue=be.component),"$$scope"in be&&n(12,c=be.$$scope)},[h,I,ue,L,R,z,ee,te,p,de,_,oe,c]}class kx extends wn{constructor(e){super(),En(this,e,Cx,Ax,bn,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const ev=Object.assign({},Dh);function ns(o){return new Proxy(kx,{construct:function(e,n){return Object.assign(Dh,ev,o),new e(...n)},get:function(e,n){return Object.assign(Dh,ev,o),e[n]}})}function Mx(o){let e,n,a,p,_;const c=o[7].default,h=pn(c,o,o[6],null);let I=[{href:o[1]},o[4]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("a"),h&&h.c(),this.h()},l(z){e=_i(z,"A",{href:!0});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[8](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[3].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&64)&&fn(h,c,z,z[6],a?gn(c,z[6],R,null):mn(z[6]),null),hi(e,L=en(I,[(!a||R&2)&&{href:z[1]},R&16&&z[4]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[8](null),p=!1,xr(_)}}}function Px(o,e,n){const a=["use","href","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e,{href:I="javascript:void(0);"}=e;const L=Qn(Jn());let z;function R(){return z}function O(Y){qi[Y?"unshift":"push"](()=>{z=Y,n(2,z)})}return o.$$set=Y=>{e=Ct(Ct({},e),Yn(Y)),n(4,p=bi(e,a)),"use"in Y&&n(0,h=Y.use),"href"in Y&&n(1,I=Y.href),"$$scope"in Y&&n(6,c=Y.$$scope)},[h,I,z,L,p,R,c,_,O]}class Lx extends wn{constructor(e){super(),En(this,e,Px,Mx,bn,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function zx(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("button"),h&&h.c(),this.h()},l(z){e=_i(z,"BUTTON",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),e.autofocus&&e.focus(),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Dx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Rx extends wn{constructor(e){super(),En(this,e,Dx,zx,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Ox(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("h1"),h&&h.c(),this.h()},l(z){e=_i(z,"H1",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Bx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Fx extends wn{constructor(e){super(),En(this,e,Bx,Ox,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Ux(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("h2"),h&&h.c(),this.h()},l(z){e=_i(z,"H2",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Nx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Vx extends wn{constructor(e){super(),En(this,e,Nx,Ux,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function jx(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("h3"),h&&h.c(),this.h()},l(z){e=_i(z,"H3",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function qx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Gx extends wn{constructor(e){super(),En(this,e,qx,jx,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Hx(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("h5"),h&&h.c(),this.h()},l(z){e=_i(z,"H5",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Zx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Wx extends wn{constructor(e){super(),En(this,e,Zx,Hx,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Xx(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("h6"),h&&h.c(),this.h()},l(z){e=_i(z,"H6",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Kx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class Jx extends wn{constructor(e){super(),En(this,e,Kx,Xx,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Yx(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("i"),h&&h.c(),this.h()},l(z){e=_i(z,"I",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function Qx(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class $x extends wn{constructor(e){super(),En(this,e,Qx,Yx,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function ew(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("li"),h&&h.c(),this.h()},l(z){e=_i(z,"LI",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function tw(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class iw extends wn{constructor(e){super(),En(this,e,tw,ew,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function nw(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("main"),h&&h.c(),this.h()},l(z){e=_i(z,"MAIN",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function rw(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class ow extends wn{constructor(e){super(),En(this,e,rw,nw,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function aw(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("nav"),h&&h.c(),this.h()},l(z){e=_i(z,"NAV",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function sw(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class lw extends wn{constructor(e){super(),En(this,e,sw,aw,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function uw(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("span"),h&&h.c(),this.h()},l(z){e=_i(z,"SPAN",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function cw(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class $0 extends wn{constructor(e){super(),En(this,e,cw,uw,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function hw(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=Ql("svg"),h&&h.c(),this.h()},l(z){e=$l(z,"svg",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){G_(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),G_(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function dw(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class tv extends wn{constructor(e){super(),En(this,e,dw,hw,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function pw(o){let e,n,a,p,_;const c=o[6].default,h=pn(c,o,o[5],null);let I=[o[3]],L={};for(let z=0;z<I.length;z+=1)L=Ct(L,I[z]);return{c(){e=yi("ul"),h&&h.c(),this.h()},l(z){e=_i(z,"UL",{});var R=pi(e);h&&h.l(R),R.forEach(We),this.h()},h(){hi(e,L)},m(z,R){Dt(z,e,R),h&&h.m(e,null),o[7](e),a=!0,p||(_=[Ei(n=qn.call(null,e,o[0])),Ei(o[2].call(null,e))],p=!0)},p(z,[R]){h&&h.p&&(!a||R&32)&&fn(h,c,z,z[5],a?gn(c,z[5],R,null):mn(z[5]),null),hi(e,L=en(I,[R&8&&z[3]])),n&&zn(n.update)&&R&1&&n.update.call(null,z[0])},i(z){a||(tt(h,z),a=!0)},o(z){at(h,z),a=!1},d(z){z&&We(e),h&&h.d(z),o[7](null),p=!1,xr(_)}}}function fw(o,e,n){const a=["use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e,{use:h=[]}=e;const I=Qn(Jn());let L;function z(){return L}function R(O){qi[O?"unshift":"push"](()=>{L=O,n(1,L)})}return o.$$set=O=>{e=Ct(Ct({},e),Yn(O)),n(3,p=bi(e,a)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,L,I,p,z,c,_,R]}class mw extends wn{constructor(e){super(),En(this,e,fw,pw,bn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const Py=Lx,e1=Rx,_p=Q0,gw=Fx,yw=Vx,_w=Gx,vw=Wx,bw=Jx,xw=iw,ww=ow,Ew=lw,vp=$0,Iw=mw;var Sw=ns({class:"mdc-top-app-bar__row",component:_p});function Tw(o){let e,n,a,p,_,c;const h=o[9].default,I=pn(h,o,o[8],null);let L=[{class:n=wi({[o[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":o[2]==="start","mdc-top-app-bar__section--align-end":o[2]==="end"})},o[3]?{role:"toolbar"}:{},o[6]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("section"),I&&I.c(),this.h()},l(R){e=_i(R,"SECTION",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[10](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[5].call(null,e))],_=!0)},p(R,[O]){I&&I.p&&(!p||O&256)&&fn(I,h,R,R[8],p?gn(h,R[8],O,null):mn(R[8]),null),hi(e,z=en(L,[(!p||O&6&&n!==(n=wi({[R[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":R[2]==="start","mdc-top-app-bar__section--align-end":R[2]==="end"})))&&{class:n},O&8&&(R[3]?{role:"toolbar"}:{}),O&64&&R[6]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[10](null),_=!1,xr(c)}}}function Aw(o,e,n){const a=["use","class","align","toolbar","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{align:z="start"}=e,{toolbar:R=!1}=e,O;sr("SMUI:icon-button:context",R?"top-app-bar:action":"top-app-bar:navigation"),sr("SMUI:button:context",R?"top-app-bar:action":"top-app-bar:navigation");function Y(){return O}function ee(ue){qi[ue?"unshift":"push"](()=>{O=ue,n(4,O)})}return o.$$set=ue=>{e=Ct(Ct({},e),Yn(ue)),n(6,p=bi(e,a)),"use"in ue&&n(0,I=ue.use),"class"in ue&&n(1,L=ue.class),"align"in ue&&n(2,z=ue.align),"toolbar"in ue&&n(3,R=ue.toolbar),"$$scope"in ue&&n(8,c=ue.$$scope)},[I,L,z,R,O,h,p,Y,c,_,ee]}class Cw extends wn{constructor(e){super(),En(this,e,Aw,Tw,bn,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}var kw=ns({class:"mdc-top-app-bar__title",component:vp});function Mw(o){let e;const n=o[11].default,a=pn(n,o,o[13],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&8192)&&fn(a,n,p,p[13],e?gn(n,p[13],_,null):mn(p[13]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function Pw(o){let e,n,a;const p=[{use:[o[6],...o[0]]},{class:wi({[o[1]]:!0,[o[5]]:!0})},o[7]];var _=o[2];function c(h){let I={$$slots:{default:[Mw]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[12](e)),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,[I]){const L=I&227?en(p,[I&65&&{use:[h[6],...h[0]]},I&34&&{class:wi({[h[1]]:!0,[h[5]]:!0})},I&128&&Xr(h[7])]):{};if(I&8192&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[2])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[12](e),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[12](null),h&&We(n),e&&Di(e,h)}}}function Lw(o,e,n){let a,p;const _=["use","class","topAppBar","component","getElement"];let c=bi(e,_),h,I=Vo,L=()=>(I(),I=Yb(a,qe=>n(10,h=qe)),a);o.$$.on_destroy.push(()=>I());let{$$slots:z={},$$scope:R}=e;const O=Qn(Jn());let{use:Y=[]}=e,{class:ee=""}=e,{topAppBar:ue}=e,te,{component:de=ww}=e;function oe(){return te.getElement()}function be(qe){qi[qe?"unshift":"push"](()=>{te=qe,n(4,te)})}return o.$$set=qe=>{e=Ct(Ct({},e),Yn(qe)),n(7,c=bi(e,_)),"use"in qe&&n(0,Y=qe.use),"class"in qe&&n(1,ee=qe.class),"topAppBar"in qe&&n(8,ue=qe.topAppBar),"component"in qe&&n(2,de=qe.component),"$$scope"in qe&&n(13,R=qe.$$scope)},o.$$.update=()=>{o.$$.dirty&256&&L(n(3,a=ue&&ue.getPropStore())),o.$$.dirty&1032&&n(5,p=(()=>!a||h.variant==="static"?"":h.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":h.prominent&&h.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":h.prominent?"mdc-top-app-bar--prominent-fixed-adjust":h.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[Y,ee,de,a,te,p,O,c,ue,oe,h,z,be,R]}class zw extends wn{constructor(e){super(),En(this,e,Lw,Pw,bn,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const iv=Cw,Dw=zw;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lm={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},Kc={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Rw=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.hasToggledAriaLabel=!1,a}return Object.defineProperty(e,"cssClasses",{get:function(){return lm},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Kc},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this.adapter.getAttr(Kc.DATA_ARIA_LABEL_ON),a=this.adapter.getAttr(Kc.DATA_ARIA_LABEL_OFF);if(n&&a){if(this.adapter.getAttr(Kc.ARIA_PRESSED)!==null)throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(Kc.ARIA_PRESSED,String(this.isOn()))},e.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},e.prototype.isOn=function(){return this.adapter.hasClass(lm.ICON_BUTTON_ON)},e.prototype.toggle=function(n){if(n===void 0&&(n=!this.isOn()),n?this.adapter.addClass(lm.ICON_BUTTON_ON):this.adapter.removeClass(lm.ICON_BUTTON_ON),this.hasToggledAriaLabel){var a=n?this.adapter.getAttr(Kc.DATA_ARIA_LABEL_ON):this.adapter.getAttr(Kc.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(Kc.ARIA_LABEL,a||"")}else this.adapter.setAttr(Kc.ARIA_PRESSED,""+n)},e}(Ma);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zg="mdc-dom-focus-sentinel",Ow=function(){function o(e,n){n===void 0&&(n={}),this.root=e,this.options=n,this.elFocusedBeforeTrapFocus=null}return o.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(e.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},o.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Zg)).forEach(function(e){e.parentElement.removeChild(e)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},o.prototype.wrapTabFocus=function(e){var n=this,a=this.createSentinel(),p=this.createSentinel();a.addEventListener("focus",function(){var _=n.getFocusableElements(e);_.length>0&&_[_.length-1].focus()}),p.addEventListener("focus",function(){var _=n.getFocusableElements(e);_.length>0&&_[0].focus()}),e.insertBefore(a,e.children[0]),e.appendChild(p)},o.prototype.focusInitialElement=function(e,n){var a=0;n&&(a=Math.max(e.indexOf(n),0)),e[a].focus()},o.prototype.getFocusableElements=function(e){var n=[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return n.filter(function(a){var p=a.getAttribute("aria-disabled")==="true"||a.getAttribute("disabled")!=null||a.getAttribute("hidden")!=null||a.getAttribute("aria-hidden")==="true",_=a.tabIndex>=0&&a.getBoundingClientRect().width>0&&!a.classList.contains(Zg)&&!p,c=!1;if(_){var h=getComputedStyle(a);c=h.display==="none"||h.visibility==="hidden"}return _&&!c})},o.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(Zg),e},o}(),Bw=Object.freeze(Object.defineProperty({__proto__:null,FocusTrap:Ow},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _r={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Us=new Set;Us.add(_r.BACKSPACE);Us.add(_r.ENTER);Us.add(_r.SPACEBAR);Us.add(_r.PAGE_UP);Us.add(_r.PAGE_DOWN);Us.add(_r.END);Us.add(_r.HOME);Us.add(_r.ARROW_LEFT);Us.add(_r.ARROW_UP);Us.add(_r.ARROW_RIGHT);Us.add(_r.ARROW_DOWN);Us.add(_r.DELETE);Us.add(_r.ESCAPE);Us.add(_r.TAB);var ol={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Ns=new Map;Ns.set(ol.BACKSPACE,_r.BACKSPACE);Ns.set(ol.ENTER,_r.ENTER);Ns.set(ol.SPACEBAR,_r.SPACEBAR);Ns.set(ol.PAGE_UP,_r.PAGE_UP);Ns.set(ol.PAGE_DOWN,_r.PAGE_DOWN);Ns.set(ol.END,_r.END);Ns.set(ol.HOME,_r.HOME);Ns.set(ol.ARROW_LEFT,_r.ARROW_LEFT);Ns.set(ol.ARROW_UP,_r.ARROW_UP);Ns.set(ol.ARROW_RIGHT,_r.ARROW_RIGHT);Ns.set(ol.ARROW_DOWN,_r.ARROW_DOWN);Ns.set(ol.DELETE,_r.DELETE);Ns.set(ol.ESCAPE,_r.ESCAPE);Ns.set(ol.TAB,_r.TAB);var Nh=new Set;Nh.add(_r.PAGE_UP);Nh.add(_r.PAGE_DOWN);Nh.add(_r.END);Nh.add(_r.HOME);Nh.add(_r.ARROW_LEFT);Nh.add(_r.ARROW_UP);Nh.add(_r.ARROW_RIGHT);Nh.add(_r.ARROW_DOWN);function Ca(o){var e=o.key;if(Us.has(e))return e;var n=Ns.get(o.keyCode);return n||_r.UNKNOWN}const{applyPassive:um}=ux,{matches:Fw}=vf;function $c(o,{ripple:e=!0,surface:n=!1,unbounded:a=!1,disabled:p=!1,color:_,active:c,rippleElement:h,eventTarget:I,activeTarget:L,addClass:z=ee=>o.classList.add(ee),removeClass:R=ee=>o.classList.remove(ee),addStyle:O=(ee,ue)=>o.style.setProperty(ee,ue),initPromise:Y=Promise.resolve()}={}){let ee,ue=Or("SMUI:addLayoutListener"),te,de=c,oe=I,be=L;function qe(){n?(z("mdc-ripple-surface"),_==="primary"?(z("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary")):_==="secondary"?(R("smui-ripple-surface--primary"),z("smui-ripple-surface--secondary")):(R("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary"))):(R("mdc-ripple-surface"),R("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary")),ee&&de!==c&&(de=c,c?ee.activate():c===!1&&ee.deactivate()),e&&!ee?(ee=new gx({addClass:z,browserSupportsCssVars:()=>fx(window),computeBoundingRect:()=>(h||o).getBoundingClientRect(),containsEventTarget:De=>o.contains(De),deregisterDocumentInteractionHandler:(De,fe)=>document.documentElement.removeEventListener(De,fe,um()),deregisterInteractionHandler:(De,fe)=>(I||o).removeEventListener(De,fe,um()),deregisterResizeHandler:De=>window.removeEventListener("resize",De),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>c==null?Fw(L||o,":active"):c,isSurfaceDisabled:()=>!!p,isUnbounded:()=>!!a,registerDocumentInteractionHandler:(De,fe)=>document.documentElement.addEventListener(De,fe,um()),registerInteractionHandler:(De,fe)=>(I||o).addEventListener(De,fe,um()),registerResizeHandler:De=>window.addEventListener("resize",De),removeClass:R,updateCssVariable:O}),Y.then(()=>{ee&&(ee.init(),ee.setUnbounded(a))})):ee&&!e&&Y.then(()=>{ee&&(ee.destroy(),ee=void 0)}),ee&&(oe!==I||be!==L)&&(oe=I,be=L,ee.destroy(),requestAnimationFrame(()=>{ee&&(ee.init(),ee.setUnbounded(a))})),!e&&a&&z("mdc-ripple-upgraded--unbounded")}qe(),ue&&(te=ue(Ne));function Ne(){ee&&ee.layout()}return{update(De){({ripple:e,surface:n,unbounded:a,disabled:p,color:_,active:c,rippleElement:h,eventTarget:I,activeTarget:L,addClass:z,removeClass:R,addStyle:O,initPromise:Y}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:fe=>o.classList.add(fe),removeClass:fe=>o.classList.remove(fe),addStyle:(fe,ct)=>o.style.setProperty(fe,ct),initPromise:Promise.resolve()},De)),qe()},destroy(){ee&&(ee.destroy(),ee=void 0,R("mdc-ripple-surface"),R("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary")),te&&te()}}}function nv(o){let e;return{c(){e=yi("div"),this.h()},l(n){e=_i(n,"DIV",{class:!0}),pi(e).forEach(We),this.h()},h(){ii(e,"class","mdc-icon-button__touch")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function Uw(o){let e,n,a,p;const _=o[32].default,c=pn(_,o,o[36],null);let h=o[8]&&nv();return{c(){e=yi("div"),n=Bn(),c&&c.c(),h&&h.c(),a=cn(),this.h()},l(I){e=_i(I,"DIV",{class:!0}),pi(e).forEach(We),n=Fn(I),c&&c.l(I),h&&h.l(I),a=cn(),this.h()},h(){ii(e,"class","mdc-icon-button__ripple")},m(I,L){Dt(I,e,L),Dt(I,n,L),c&&c.m(I,L),h&&h.m(I,L),Dt(I,a,L),p=!0},p(I,L){c&&c.p&&(!p||L[1]&32)&&fn(c,_,I,I[36],p?gn(_,I[36],L,null):mn(I[36]),null),I[8]?h||(h=nv(),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null)},i(I){p||(tt(c,I),p=!0)},o(I){at(c,I),p=!1},d(I){I&&We(e),I&&We(n),c&&c.d(I),h&&h.d(I),I&&We(a)}}}function Nw(o){let e,n,a;const p=[{use:[[$c,{ripple:o[4],unbounded:!0,color:o[5],disabled:!!o[28].disabled,addClass:o[25],removeClass:o[26],addStyle:o[27]}],o[21],...o[1]]},{class:wi(tr({[o[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!o[22](o[0])&&o[0],"mdc-icon-button--touch":o[8],"mdc-icon-button--display-flex":o[9],"smui-icon-button--size-button":o[10]==="button","mdc-icon-button--reduced-size":o[10]==="mini"||o[10]==="button","mdc-card__action":o[23]==="card:action","mdc-card__action--icon":o[23]==="card:action","mdc-top-app-bar__navigation-icon":o[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[23]==="top-app-bar:action","mdc-snackbar__dismiss":o[23]==="snackbar:actions","mdc-data-table__pagination-button":o[23]==="data-table:pagination","mdc-data-table__sort-icon-button":o[23]==="data-table:sortable-header-cell","mdc-dialog__close":o[23]==="dialog:header"&&o[12]==="close"},o[17]))},{style:Object.entries(o[18]).map(rv).concat([o[3]]).join(" ")},{"aria-pressed":o[22](o[0])?null:o[0]?"true":"false"},{"aria-label":o[0]?o[6]:o[7]},{"data-aria-label-on":o[6]},{"data-aria-label-off":o[7]},{"aria-describedby":o[24]},{href:o[11]},o[20],o[19],o[28]];var _=o[13];function c(h){let I={$$slots:{default:[Uw]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[33](e),e.$on("click",o[34]),e.$on("click",o[35])),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,I){const L=I[0]&536748031?en(p,[I[0]&505413682&&{use:[[$c,{ripple:h[4],unbounded:!0,color:h[5],disabled:!!h[28].disabled,addClass:h[25],removeClass:h[26],addStyle:h[27]}],h[21],...h[1]]},I[0]&12719877&&{class:wi(tr({[h[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!h[22](h[0])&&h[0],"mdc-icon-button--touch":h[8],"mdc-icon-button--display-flex":h[9],"smui-icon-button--size-button":h[10]==="button","mdc-icon-button--reduced-size":h[10]==="mini"||h[10]==="button","mdc-card__action":h[23]==="card:action","mdc-card__action--icon":h[23]==="card:action","mdc-top-app-bar__navigation-icon":h[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":h[23]==="top-app-bar:action","mdc-snackbar__dismiss":h[23]==="snackbar:actions","mdc-data-table__pagination-button":h[23]==="data-table:pagination","mdc-data-table__sort-icon-button":h[23]==="data-table:sortable-header-cell","mdc-dialog__close":h[23]==="dialog:header"&&h[12]==="close"},h[17]))},I[0]&262152&&{style:Object.entries(h[18]).map(rv).concat([h[3]]).join(" ")},I[0]&4194305&&{"aria-pressed":h[22](h[0])?null:h[0]?"true":"false"},I[0]&193&&{"aria-label":h[0]?h[6]:h[7]},I[0]&64&&{"data-aria-label-on":h[6]},I[0]&128&&{"data-aria-label-off":h[7]},I[0]&16777216&&{"aria-describedby":h[24]},I[0]&2048&&{href:h[11]},I[0]&1048576&&Xr(h[20]),I[0]&524288&&Xr(h[19]),I[0]&268435456&&Xr(h[28])]):{};if(I[0]&256|I[1]&32&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[13])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[33](e),e.$on("click",h[34]),e.$on("click",h[35]),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[33](null),h&&We(n),e&&Di(e,h)}}}const rv=([o,e])=>`${o}: ${e};`;function Vw(o,e,n){let a;const p=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","touch","displayFlex","size","href","action","component","getElement"];let _=bi(e,p),{$$slots:c={},$$scope:h}=e;const I=Qn(Jn());let L=()=>{};function z(St){return St===L}let{use:R=[]}=e,{class:O=""}=e,{style:Y=""}=e,{ripple:ee=!0}=e,{color:ue=void 0}=e,{toggle:te=!1}=e,{pressed:de=L}=e,{ariaLabelOn:oe=void 0}=e,{ariaLabelOff:be=void 0}=e,{touch:qe=!1}=e,{displayFlex:Ne=!0}=e,{size:De="normal"}=e,{href:fe=void 0}=e,{action:ct=void 0}=e,st,Ge,Ue={},Rt={},He={},Mt=Or("SMUI:icon-button:context"),li=Or("SMUI:icon-button:aria-describedby"),{component:Et=fe==null?e1:Py}=e,Gt=_.disabled;sr("SMUI:icon:context","icon-button");let Ye=null;eh(()=>{Ge&&Ge.destroy()});function wt(St){return St in Ue?Ue[St]:xi().classList.contains(St)}function Lt(St){Ue[St]||n(17,Ue[St]=!0,Ue)}function ni(St){(!(St in Ue)||Ue[St])&&n(17,Ue[St]=!1,Ue)}function Xt(St,Yi){Rt[St]!=Yi&&(Yi===""||Yi==null?(delete Rt[St],n(18,Rt)):n(18,Rt[St]=Yi,Rt))}function Ki(St){var Yi;return St in He?(Yi=He[St])!==null&&Yi!==void 0?Yi:null:xi().getAttribute(St)}function ei(St,Yi){He[St]!==Yi&&n(19,He[St]=Yi,He)}function Jt(St){n(0,de=St.isOn)}function xi(){return st.getElement()}function ai(St){qi[St?"unshift":"push"](()=>{st=St,n(15,st)})}const dt=()=>Ge&&Ge.handleClick(),It=()=>Mt==="top-app-bar:navigation"&&Pn(xi(),"SMUITopAppBarIconButton:nav");return o.$$set=St=>{e=Ct(Ct({},e),Yn(St)),n(28,_=bi(e,p)),"use"in St&&n(1,R=St.use),"class"in St&&n(2,O=St.class),"style"in St&&n(3,Y=St.style),"ripple"in St&&n(4,ee=St.ripple),"color"in St&&n(5,ue=St.color),"toggle"in St&&n(29,te=St.toggle),"pressed"in St&&n(0,de=St.pressed),"ariaLabelOn"in St&&n(6,oe=St.ariaLabelOn),"ariaLabelOff"in St&&n(7,be=St.ariaLabelOff),"touch"in St&&n(8,qe=St.touch),"displayFlex"in St&&n(9,Ne=St.displayFlex),"size"in St&&n(10,De=St.size),"href"in St&&n(11,fe=St.href),"action"in St&&n(12,ct=St.action),"component"in St&&n(13,Et=St.component),"$$scope"in St&&n(36,h=St.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&4096&&n(20,a=(()=>{if(Mt==="data-table:pagination")switch(ct){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}else return Mt==="dialog:header"?{"data-mdc-dialog-action":ct}:{action:ct}})()),Gt!==_.disabled){const St=xi();"blur"in St&&St.blur(),n(30,Gt=_.disabled)}o.$$.dirty[0]&536969216|o.$$.dirty[1]&1&&st&&xi()&&te!==Ye&&(te&&!Ge?(n(16,Ge=new Rw({addClass:Lt,hasClass:wt,notifyChange:St=>{Jt(St),Pn(xi(),"SMUIIconButtonToggle:change",St,void 0,!0)},removeClass:ni,getAttr:Ki,setAttr:ei})),Ge.init()):!te&&Ge&&(Ge.destroy(),n(16,Ge=void 0),n(17,Ue={}),n(19,He={})),n(31,Ye=te)),o.$$.dirty[0]&65537&&Ge&&!z(de)&&Ge.isOn()!==de&&Ge.toggle(de)},[de,R,O,Y,ee,ue,oe,be,qe,Ne,De,fe,ct,Et,xi,st,Ge,Ue,Rt,He,a,I,z,Mt,li,Lt,ni,Xt,_,te,Gt,Ye,c,ai,dt,It,h]}class wm extends wn{constructor(e){super(),En(this,e,Vw,Nw,bn,{use:1,class:2,style:3,ripple:4,color:5,toggle:29,pressed:0,ariaLabelOn:6,ariaLabelOff:7,touch:8,displayFlex:9,size:10,href:11,action:12,component:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}function jw(o){let e;const n=o[9].default,a=pn(n,o,o[11],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&2048)&&fn(a,n,p,p[11],e?gn(n,p[11],_,null):mn(p[11]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function qw(o){let e,n,a;const p=[{use:[o[4],...o[0]]},{class:wi({[o[1]]:!0,"mdc-button__label":o[5]==="button","mdc-fab__label":o[5]==="fab","mdc-tab__text-label":o[5]==="tab","mdc-image-list__label":o[5]==="image-list","mdc-snackbar__label":o[5]==="snackbar","mdc-banner__text":o[5]==="banner","mdc-segmented-button__label":o[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":o[5]==="data-table:pagination","mdc-data-table__header-cell-label":o[5]==="data-table:sortable-header-cell"})},o[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:o[6]},o[7]];var _=o[2];function c(h){let I={$$slots:{default:[jw]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[10](e)),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,[I]){const L=I&243?en(p,[I&17&&{use:[h[4],...h[0]]},I&34&&{class:wi({[h[1]]:!0,"mdc-button__label":h[5]==="button","mdc-fab__label":h[5]==="fab","mdc-tab__text-label":h[5]==="tab","mdc-image-list__label":h[5]==="image-list","mdc-snackbar__label":h[5]==="snackbar","mdc-banner__text":h[5]==="banner","mdc-segmented-button__label":h[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":h[5]==="data-table:pagination","mdc-data-table__header-cell-label":h[5]==="data-table:sortable-header-cell"})},I&32&&Xr(h[5]==="snackbar"?{"aria-atomic":"false"}:{}),I&64&&{tabindex:h[6]},I&128&&Xr(h[7])]):{};if(I&2048&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[2])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[10](e),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[10](null),h&&We(n),e&&Di(e,h)}}}function Gw(o,e,n){const a=["use","class","component","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,z,{component:R=$0}=e;const O=Or("SMUI:label:context"),Y=Or("SMUI:label:tabindex");function ee(){return z.getElement()}function ue(te){qi[te?"unshift":"push"](()=>{z=te,n(3,z)})}return o.$$set=te=>{e=Ct(Ct({},e),Yn(te)),n(7,p=bi(e,a)),"use"in te&&n(0,I=te.use),"class"in te&&n(1,L=te.class),"component"in te&&n(2,R=te.component),"$$scope"in te&&n(11,c=te.$$scope)},[I,L,R,z,h,O,Y,p,ee,_,ue,c]}class Hw extends wn{constructor(e){super(),En(this,e,Gw,qw,bn,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function Zw(o){let e;const n=o[9].default,a=pn(n,o,o[11],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&2048)&&fn(a,n,p,p[11],e?gn(n,p[11],_,null):mn(p[11]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function Ww(o){let e,n,a;const p=[{use:[o[5],...o[0]]},{class:wi({[o[1]]:!0,"mdc-button__icon":o[6]==="button","mdc-fab__icon":o[6]==="fab","mdc-icon-button__icon":o[6]==="icon-button","mdc-icon-button__icon--on":o[6]==="icon-button"&&o[2],"mdc-tab__icon":o[6]==="tab","mdc-banner__icon":o[6]==="banner","mdc-segmented-button__icon":o[6]==="segmented-button"})},{"aria-hidden":"true"},o[3]===tv?{focusable:"false",tabindex:"-1"}:{},o[7]];var _=o[3];function c(h){let I={$$slots:{default:[Zw]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[10](e)),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,[I]){const L=I&239?en(p,[I&33&&{use:[h[5],...h[0]]},I&70&&{class:wi({[h[1]]:!0,"mdc-button__icon":h[6]==="button","mdc-fab__icon":h[6]==="fab","mdc-icon-button__icon":h[6]==="icon-button","mdc-icon-button__icon--on":h[6]==="icon-button"&&h[2],"mdc-tab__icon":h[6]==="tab","mdc-banner__icon":h[6]==="banner","mdc-segmented-button__icon":h[6]==="segmented-button"})},p[2],I&8&&Xr(h[3]===tv?{focusable:"false",tabindex:"-1"}:{}),I&128&&Xr(h[7])]):{};if(I&2048&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[3])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[10](e),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[10](null),h&&We(n),e&&Di(e,h)}}}function Xw(o,e,n){const a=["use","class","on","component","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{on:z=!1}=e,R,{component:O=$x}=e;const Y=Or("SMUI:icon:context");function ee(){return R.getElement()}function ue(te){qi[te?"unshift":"push"](()=>{R=te,n(4,R)})}return o.$$set=te=>{e=Ct(Ct({},e),Yn(te)),n(7,p=bi(e,a)),"use"in te&&n(0,I=te.use),"class"in te&&n(1,L=te.class),"on"in te&&n(2,z=te.on),"component"in te&&n(3,O=te.component),"$$scope"in te&&n(11,c=te.$$scope)},[I,L,z,O,R,h,Y,p,ee,_,ue,c]}class Kw extends wn{constructor(e){super(),En(this,e,Xw,Ww,bn,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}const Jw=Hw,gy=Kw,Tr={title:"GIS for Water",url:"https://water-gis.com",logo:"https://raw.githubusercontent.com/watergis/logo/main/logo.svg",basePath:"/sveltekit-watergis-template",attribution:"\xA9NARWASSCO",styles:[{title:"UNVT(Water)",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style.json"},{title:"UNVT(Sewer)",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style-sewer.json"}],center:{lng:35.87063,lat:-1.08551},zoom:13,search:{url:"https://narwassco.github.io/vt/meter.geojson",target:["connno","serialno"],format:o=>`${o.customer}, ${o.connno}, ${o.serialno}, ${o.village}`,place_type:["meter"],placeholder:"Search CONN NO or S/N",zoom:17},popup:{target:["meter","flow meter","valve","washout","firehydrant","tank","pipeline","pg-building","sewer-connection","sewer_commercial","sewer_institution","sewer_public_toilet","sewer_pipeline","sewer_treatment_plant","manhole"]},areaSwitcher:{areas:[{title:"Narok",latlng:[35.87063,-1.08551],zoom:14},{title:"Ololulung'a",latlng:[35.65072,-1.0085],zoom:13},{title:"Kilgoris",latlng:[34.87533,-1.00278],zoom:14},{title:"Suswa",latlng:[36.33078,-1.05307],zoom:13}]},legend:{targets:{pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",meter:"Water Meter","flow meter":"Flow Meter",valve:"Valve",firehydrant:"Fire Hydrant",washout:"Washout",tank:"Tank",tank_annotation:"Tank Label",wtp:"WTP",wtp_annotation:"WTP Label",intake:"Intake",intake_annotation:"Intake Label",parcels:"Parcels",parcels_annotation:"Parcels Label",village:"Village",village_annotation:"Village Label",dma:"DMA","dma-annotation":"DMA Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade",sewer_connection:"Households (Sewer)",sewer_commercial:"Commecial (Sewer)",sewer_institution:"Institution (Sewer)",sewer_public_toilet:"Public Toilet (Sewer)",manhole:"Manhole",sewer_pipeline:"Sewer pipeline",sewer_treatment_plant:"Wastewater treatment plant"}},elevation:{url:"https://narwassco.github.io/narok-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]}}};function Yw(o){let e;return{c(){e=yi("link"),this.h()},l(n){e=_i(n,"LINK",{rel:!0,href:!0}),this.h()},h(){ii(e,"rel","stylesheet"),ii(e,"href",Tr.basePath+"/smui.css")},m(n,a){Dt(n,e,a)},p:Vo,d(n){n&&We(e)}}}function Qw(o){let e,n,a;return{c(){e=yi("link"),n=Bn(),a=yi("link"),this.h()},l(p){e=_i(p,"LINK",{rel:!0,href:!0,media:!0}),n=Fn(p),a=_i(p,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){ii(e,"rel","stylesheet"),ii(e,"href",Tr.basePath+"/smui.css"),ii(e,"media","print"),ii(a,"rel","stylesheet"),ii(a,"href",Tr.basePath+"/smui-dark.css"),ii(a,"media","screen")},m(p,_){Dt(p,e,_),Dt(p,n,_),Dt(p,a,_)},p:Vo,d(p){p&&We(e),p&&We(n),p&&We(a)}}}function $w(o){let e,n,a;return{c(){e=yi("link"),n=Bn(),a=yi("link"),this.h()},l(p){e=_i(p,"LINK",{rel:!0,href:!0,media:!0}),n=Fn(p),a=_i(p,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){ii(e,"rel","stylesheet"),ii(e,"href",Tr.basePath+"/smui.css"),ii(e,"media","(prefers-color-scheme: light)"),ii(a,"rel","stylesheet"),ii(a,"href",Tr.basePath+"/smui-dark.css"),ii(a,"media","screen and (prefers-color-scheme: dark)")},m(p,_){Dt(p,e,_),Dt(p,n,_),Dt(p,a,_)},p:Vo,d(p){p&&We(e),p&&We(n),p&&We(a)}}}function e2(o){let e;return{c(){e=Io("menu")},l(n){e=So(n,"menu")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function t2(o){let e=Tr.title+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p:Vo,d(a){a&&We(n)}}}function i2(o){let e,n,a,p,_,c,h,I;return e=new wm({props:{class:"material-icons",$$slots:{default:[e2]},$$scope:{ctx:o}}}),e.$on("click",o[6]),h=new kw({props:{$$slots:{default:[t2]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),a=yi("a"),p=yi("img"),c=Bn(),Li(h.$$.fragment),this.h()},l(L){Wi(e.$$.fragment,L),n=Fn(L),a=_i(L,"A",{href:!0});var z=pi(a);p=_i(z,"IMG",{src:!0,alt:!0,class:!0}),z.forEach(We),c=Fn(L),Wi(h.$$.fragment,L),this.h()},h(){$b(p.src,_=Tr.logo)||ii(p,"src",_),ii(p,"alt","logo"),ii(p,"class","logo svelte-1cnjkz4"),ii(a,"href",Tr.url)},m(L,z){zi(e,L,z),Dt(L,n,z),Dt(L,a,z),sn(a,p),Dt(L,c,z),zi(h,L,z),I=!0},p(L,z){const R={};z&256&&(R.$$scope={dirty:z,ctx:L}),e.$set(R);const O={};z&256&&(O.$$scope={dirty:z,ctx:L}),h.$set(O)},i(L){I||(tt(e.$$.fragment,L),tt(h.$$.fragment,L),I=!0)},o(L){at(e.$$.fragment,L),at(h.$$.fragment,L),I=!1},d(L){Di(e,L),L&&We(n),L&&We(a),L&&We(c),Di(h,L)}}}function n2(o){let e;return{c(){e=Io("print")},l(n){e=So(n,"print")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function r2(o){let e;return{c(){e=Io(o[3])},l(n){e=So(n,o[3])},m(n,a){Dt(n,e,a)},p(n,a){a&8&&Fs(e,n[3])},d(n){n&&We(e)}}}function o2(o){let e,n,a,p;return e=new wm({props:{class:"material-icons","aria-label":"Print",$$slots:{default:[n2]},$$scope:{ctx:o}}}),a=new wm({props:{"aria-label":o[4],class:"material-icons",title:o[4],$$slots:{default:[r2]},$$scope:{ctx:o}}}),a.$on("click",o[5]),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment)},l(_){Wi(e.$$.fragment,_),n=Fn(_),Wi(a.$$.fragment,_)},m(_,c){zi(e,_,c),Dt(_,n,c),zi(a,_,c),p=!0},p(_,c){const h={};c&256&&(h.$$scope={dirty:c,ctx:_}),e.$set(h);const I={};c&16&&(I["aria-label"]=_[4]),c&16&&(I.title=_[4]),c&264&&(I.$$scope={dirty:c,ctx:_}),a.$set(I)},i(_){p||(tt(e.$$.fragment,_),tt(a.$$.fragment,_),p=!0)},o(_){at(e.$$.fragment,_),at(a.$$.fragment,_),p=!1},d(_){Di(e,_),_&&We(n),Di(a,_)}}}function a2(o){let e,n,a,p,_,c;return e=new iv({props:{$$slots:{default:[i2]},$$scope:{ctx:o}}}),_=new iv({props:{align:"end",toolbar:!0,$$slots:{default:[o2]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),a=yi("section"),p=Bn(),Li(_.$$.fragment)},l(h){Wi(e.$$.fragment,h),n=Fn(h),a=_i(h,"SECTION",{}),pi(a).forEach(We),p=Fn(h),Wi(_.$$.fragment,h)},m(h,I){zi(e,h,I),Dt(h,n,I),Dt(h,a,I),Dt(h,p,I),zi(_,h,I),c=!0},p(h,I){const L={};I&257&&(L.$$scope={dirty:I,ctx:h}),e.$set(L);const z={};I&280&&(z.$$scope={dirty:I,ctx:h}),_.$set(z)},i(h){c||(tt(e.$$.fragment,h),tt(_.$$.fragment,h),c=!0)},o(h){at(e.$$.fragment,h),at(_.$$.fragment,h),c=!1},d(h){Di(e,h),h&&We(n),h&&We(a),h&&We(p),Di(_,h)}}}function s2(o){let e,n;return e=new Sw({props:{$$slots:{default:[a2]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&281&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function l2(o){let e,n,a,p,_,c;function h(R,O){return R[1]===void 0?$w:R[1]?Qw:Yw}let I=h(o),L=I(o),z={variant:"fixed",$$slots:{default:[s2]},$$scope:{ctx:o}};return a=new Ex({props:z}),o[7](a),_=new Dw({props:{topAppBar:o[2]}}),{c(){L.c(),e=cn(),n=Bn(),Li(a.$$.fragment),p=Bn(),Li(_.$$.fragment)},l(R){const O=Qb('[data-svelte="svelte-7r4yyr"]',document.head);L.l(O),e=cn(),O.forEach(We),n=Fn(R),Wi(a.$$.fragment,R),p=Fn(R),Wi(_.$$.fragment,R)},m(R,O){L.m(document.head,null),sn(document.head,e),Dt(R,n,O),zi(a,R,O),Dt(R,p,O),zi(_,R,O),c=!0},p(R,[O]){I===(I=h(R))&&L?L.p(R,O):(L.d(1),L=I(R),L&&(L.c(),L.m(e.parentNode,e)));const Y={};O&281&&(Y.$$scope={dirty:O,ctx:R}),a.$set(Y);const ee={};O&4&&(ee.topAppBar=R[2]),_.$set(ee)},i(R){c||(tt(a.$$.fragment,R),tt(_.$$.fragment,R),c=!0)},o(R){at(a.$$.fragment,R),at(_.$$.fragment,R),c=!1},d(R){L.d(R),We(e),R&&We(n),o[7](null),Di(a,R),R&&We(p),Di(_,R)}}}function u2(o,e,n){let a,p,{drawerOpen:_=!1}=e,c,h;Po(()=>{n(1,c=window.matchMedia("(prefers-color-scheme: dark)").matches)});const I=()=>n(1,c=!c),L=()=>n(0,_=!_);function z(R){qi[R?"unshift":"push"](()=>{h=R,n(2,h)})}return o.$$set=R=>{"drawerOpen"in R&&n(0,_=R.drawerOpen)},o.$$.update=()=>{o.$$.dirty&2&&n(4,a=`switch to ${c?"light":"dark"} mode`),o.$$.dirty&2&&n(3,p=c?"light_mode":"dark_mode")},[_,c,h,p,a,I,L,z]}class c2 extends wn{constructor(e){super(),En(this,e,u2,l2,bn,{drawerOpen:0})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ph,Jc,yr={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};Ph={},Ph[""+yr.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",Ph[""+yr.LIST_ITEM_CLASS]="mdc-list-item",Ph[""+yr.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",Ph[""+yr.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",Ph[""+yr.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",Ph[""+yr.ROOT]="mdc-list";var rp=(Jc={},Jc[""+yr.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Jc[""+yr.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Jc[""+yr.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Jc[""+yr.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Jc[""+yr.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Jc[""+yr.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Jc[""+yr.ROOT]="mdc-deprecated-list",Jc),Lh={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+yr.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+yr.LIST_ITEM_CLASS+` a,
    .`+rp[yr.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+rp[yr.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+yr.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+yr.LIST_ITEM_CLASS+` a,
    .`+yr.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+yr.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+rp[yr.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+rp[yr.LIST_ITEM_CLASS]+` a,
    .`+rp[yr.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+rp[yr.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},Ua={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var h2=["input","button","textarea","select"],xd=function(o){var e=o.target;if(!!e){var n=(""+e.tagName).toLowerCase();h2.indexOf(n)===-1&&o.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function d2(){var o={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return o}function p2(o,e){for(var n=new Map,a=0;a<o;a++){var p=e(a).trim();if(!!p){var _=p[0].toLowerCase();n.has(_)||n.set(_,[]),n.get(_).push({text:p.toLowerCase(),index:a})}}return n.forEach(function(c){c.sort(function(h,I){return h.index-I.index})}),n}function yy(o,e){var n=o.nextChar,a=o.focusItemAtIndex,p=o.sortedIndexByFirstChar,_=o.focusedItemIndex,c=o.skipFocus,h=o.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){i1(e)},Ua.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+n;var I;return e.typeaheadBuffer.length===1?I=f2(p,_,h,e):I=m2(p,h,e),I!==-1&&!c&&a(I),I}function f2(o,e,n,a){var p=a.typeaheadBuffer[0],_=o.get(p);if(!_)return-1;if(p===a.currentFirstChar&&_[a.sortedIndexCursor].index===e){a.sortedIndexCursor=(a.sortedIndexCursor+1)%_.length;var c=_[a.sortedIndexCursor].index;if(!n(c))return c}a.currentFirstChar=p;var h=-1,I;for(I=0;I<_.length;I++)if(!n(_[I].index)){h=I;break}for(;I<_.length;I++)if(_[I].index>e&&!n(_[I].index)){h=I;break}return h!==-1?(a.sortedIndexCursor=h,_[a.sortedIndexCursor].index):-1}function m2(o,e,n){var a=n.typeaheadBuffer[0],p=o.get(a);if(!p)return-1;var _=p[n.sortedIndexCursor];if(_.text.lastIndexOf(n.typeaheadBuffer,0)===0&&!e(_.index))return _.index;for(var c=(n.sortedIndexCursor+1)%p.length,h=-1;c!==n.sortedIndexCursor;){var I=p[c],L=I.text.lastIndexOf(n.typeaheadBuffer,0)===0,z=!e(I.index);if(L&&z){h=c;break}c=(c+1)%p.length}return h!==-1?(n.sortedIndexCursor=h,p[n.sortedIndexCursor].index):-1}function t1(o){return o.typeaheadBuffer.length>0}function i1(o){o.typeaheadBuffer=""}function ov(o,e){var n=o.event,a=o.isTargetListItem,p=o.focusedItemIndex,_=o.focusItemAtIndex,c=o.sortedIndexByFirstChar,h=o.isItemAtIndexDisabled,I=Ca(n)==="ArrowLeft",L=Ca(n)==="ArrowUp",z=Ca(n)==="ArrowRight",R=Ca(n)==="ArrowDown",O=Ca(n)==="Home",Y=Ca(n)==="End",ee=Ca(n)==="Enter",ue=Ca(n)==="Spacebar";if(n.ctrlKey||n.metaKey||I||L||z||R||O||Y||ee)return-1;var te=!ue&&n.key.length===1;if(te){xd(n);var de={focusItemAtIndex:_,focusedItemIndex:p,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:c,skipFocus:!1,isItemAtIndexDisabled:h};return yy(de,e)}if(!ue)return-1;a&&xd(n);var oe=a&&t1(e);if(oe){var de={focusItemAtIndex:_,focusedItemIndex:p,nextChar:" ",sortedIndexByFirstChar:c,skipFocus:!1,isItemAtIndexDisabled:h};return yy(de,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function g2(o){return o instanceof Array}var y2=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.wrapFocus=!1,a.isVertical=!0,a.isSingleSelectionList=!1,a.selectedIndex=Ua.UNSET_INDEX,a.focusedItemIndex=Ua.UNSET_INDEX,a.useActivatedClass=!1,a.useSelectedAttr=!1,a.ariaCurrentAttrValue=null,a.isCheckboxList=!1,a.isRadioList=!1,a.hasTypeahead=!1,a.typeaheadState=d2(),a.sortedIndexByFirstChar=new Map,a}return Object.defineProperty(e,"strings",{get:function(){return Lh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return yr},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Ua},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(n){this.wrapFocus=n},e.prototype.setVerticalOrientation=function(n){this.isVertical=n},e.prototype.setSingleSelection=function(n){this.isSingleSelectionList=n,n&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var n=this.getSelectedIndexFromDOM();if(n!==Ua.UNSET_INDEX){var a=this.adapter.listItemAtIndexHasClass(n,yr.LIST_ITEM_ACTIVATED_CLASS);a&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=n}},e.prototype.getSelectedIndexFromDOM=function(){for(var n=Ua.UNSET_INDEX,a=this.adapter.getListItemCount(),p=0;p<a;p++){var _=this.adapter.listItemAtIndexHasClass(p,yr.LIST_ITEM_SELECTED_CLASS),c=this.adapter.listItemAtIndexHasClass(p,yr.LIST_ITEM_ACTIVATED_CLASS);if(!!(_||c)){n=p;break}}return n},e.prototype.setHasTypeahead=function(n){this.hasTypeahead=n,n&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&t1(this.typeaheadState)},e.prototype.setUseActivatedClass=function(n){this.useActivatedClass=n},e.prototype.setUseSelectedAttribute=function(n){this.useSelectedAttr=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n,a){var p=a===void 0?{}:a,_=p.forceUpdate;!this.isIndexValid(n)||(this.isCheckboxList?this.setCheckboxAtIndex(n):this.isRadioList?this.setRadioAtIndex(n):this.setSingleSelectionAtIndex(n,{forceUpdate:_}))},e.prototype.handleFocusIn=function(n){n>=0&&(this.focusedItemIndex=n,this.adapter.setAttributeForElementIndex(n,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(n,"0"))},e.prototype.handleFocusOut=function(n){var a=this;n>=0&&(this.adapter.setAttributeForElementIndex(n,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(n,"-1")),setTimeout(function(){a.adapter.isFocusInsideList()||a.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(n,a,p){var _=this,c=Ca(n)==="ArrowLeft",h=Ca(n)==="ArrowUp",I=Ca(n)==="ArrowRight",L=Ca(n)==="ArrowDown",z=Ca(n)==="Home",R=Ca(n)==="End",O=Ca(n)==="Enter",Y=Ca(n)==="Spacebar",ee=n.key==="A"||n.key==="a";if(this.adapter.isRootFocused()){if(h||R?(n.preventDefault(),this.focusLastElement()):(L||z)&&(n.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var ue={event:n,focusItemAtIndex:function(oe){_.focusItemAtIndex(oe)},focusedItemIndex:-1,isTargetListItem:a,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(oe){return _.adapter.listItemAtIndexHasClass(oe,yr.LIST_ITEM_DISABLED_CLASS)}};ov(ue,this.typeaheadState)}return}var te=this.adapter.getFocusedElementIndex();if(!(te===-1&&(te=p,te<0))){if(this.isVertical&&L||!this.isVertical&&I)xd(n),this.focusNextElement(te);else if(this.isVertical&&h||!this.isVertical&&c)xd(n),this.focusPrevElement(te);else if(z)xd(n),this.focusFirstElement();else if(R)xd(n),this.focusLastElement();else if(ee&&n.ctrlKey&&this.isCheckboxList)n.preventDefault(),this.toggleAll(this.selectedIndex===Ua.UNSET_INDEX?[]:this.selectedIndex);else if((O||Y)&&a){var de=n.target;if(de&&de.tagName==="A"&&O||(xd(n),this.adapter.listItemAtIndexHasClass(te,yr.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(te),this.adapter.notifyAction(te))}if(this.hasTypeahead){var ue={event:n,focusItemAtIndex:function(be){_.focusItemAtIndex(be)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:a,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(be){return _.adapter.listItemAtIndexHasClass(be,yr.LIST_ITEM_DISABLED_CLASS)}};ov(ue,this.typeaheadState)}}},e.prototype.handleClick=function(n,a){n!==Ua.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(n,yr.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(n,a),this.adapter.notifyAction(n)))},e.prototype.focusNextElement=function(n){var a=this.adapter.getListItemCount(),p=n+1;if(p>=a)if(this.wrapFocus)p=0;else return n;return this.focusItemAtIndex(p),p},e.prototype.focusPrevElement=function(n){var a=n-1;if(a<0)if(this.wrapFocus)a=this.adapter.getListItemCount()-1;else return n;return this.focusItemAtIndex(a),a},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var n=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(n),n},e.prototype.focusInitialElement=function(){var n=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(n),n},e.prototype.setEnabled=function(n,a){!this.isIndexValid(n)||(a?(this.adapter.removeClassForElementIndex(n,yr.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,Lh.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(n,yr.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,Lh.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(n,a){var p=a===void 0?{}:a,_=p.forceUpdate;if(!(this.selectedIndex===n&&!_)){var c=yr.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(c=yr.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==Ua.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,c),this.setAriaForSingleSelectionAtIndex(n),this.setTabindexAtIndex(n),n!==Ua.UNSET_INDEX&&this.adapter.addClassForElementIndex(n,c),this.selectedIndex=n}},e.prototype.setAriaForSingleSelectionAtIndex=function(n){this.selectedIndex===Ua.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(n,Lh.ARIA_CURRENT));var a=this.ariaCurrentAttrValue!==null,p=a?Lh.ARIA_CURRENT:Lh.ARIA_SELECTED;if(this.selectedIndex!==Ua.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,p,"false"),n!==Ua.UNSET_INDEX){var _=a?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(n,p,_)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?Lh.ARIA_SELECTED:Lh.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(n){var a=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(n,!0),this.selectedIndex!==Ua.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,a,"false"),this.adapter.setAttributeForElementIndex(n,a,"true"),this.selectedIndex=n},e.prototype.setCheckboxAtIndex=function(n){for(var a=this.getSelectionAttribute(),p=0;p<this.adapter.getListItemCount();p++){var _=!1;n.indexOf(p)>=0&&(_=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(p,_),this.adapter.setAttributeForElementIndex(p,a,_?"true":"false")}this.selectedIndex=n},e.prototype.setTabindexAtIndex=function(n){this.focusedItemIndex===Ua.UNSET_INDEX&&n!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==n&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==n&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),n!==Ua.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(n,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var n=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(n)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==Ua.UNSET_INDEX?this.selectedIndex:g2(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(n,a){return Math.min(n,a)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(n){var a=this;if(n instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return n.length===0?!0:n.some(function(p){return a.isIndexInRange(p)})}else if(typeof n=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+n);return this.isIndexInRange(n)||this.isSingleSelectionList&&n===Ua.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(n){var a=this.adapter.getListItemCount();return n>=0&&n<a},e.prototype.setSelectedIndexOnAction=function(n,a){a===void 0&&(a=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(n,a):this.setSelectedIndex(n)},e.prototype.toggleCheckboxAtIndex=function(n,a){var p=this.getSelectionAttribute(),_=this.adapter.isCheckboxCheckedAtIndex(n);a&&(_=!_,this.adapter.setCheckedCheckboxOrRadioAtIndex(n,_)),this.adapter.setAttributeForElementIndex(n,p,_?"true":"false");var c=this.selectedIndex===Ua.UNSET_INDEX?[]:this.selectedIndex.slice();_?c.push(n):c=c.filter(function(h){return h!==n}),this.selectedIndex=c},e.prototype.focusItemAtIndex=function(n){this.adapter.focusItemAtIndex(n),this.focusedItemIndex=n},e.prototype.toggleAll=function(n){var a=this.adapter.getListItemCount();if(n.length===a)this.setCheckboxAtIndex([]);else{for(var p=[],_=0;_<a;_++)(!this.adapter.listItemAtIndexHasClass(_,yr.LIST_ITEM_DISABLED_CLASS)||n.indexOf(_)>-1)&&p.push(_);this.setCheckboxAtIndex(p)}},e.prototype.typeaheadMatchItem=function(n,a,p){var _=this;p===void 0&&(p=!1);var c={focusItemAtIndex:function(h){_.focusItemAtIndex(h)},focusedItemIndex:a||this.focusedItemIndex,nextChar:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:p,isItemAtIndexDisabled:function(h){return _.adapter.listItemAtIndexHasClass(h,yr.LIST_ITEM_DISABLED_CLASS)}};return yy(c,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return p2(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){i1(this.typeaheadState)},e}(Ma);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rl={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},_2={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim",LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",LIST_ITEM_ACTIVATED_SELECTOR:".mdc-list-item--activated,.mdc-deprecated-list-item--activated"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var n1=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.animationFrame=0,a.animationTimer=0,a}return Object.defineProperty(e,"strings",{get:function(){return _2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return rl},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.animationTimer&&clearTimeout(this.animationTimer)},e.prototype.open=function(){var n=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(rl.OPEN),this.adapter.addClass(rl.ANIMATE),this.runNextAnimationFrame(function(){n.adapter.addClass(rl.OPENING)}),this.adapter.saveFocus())},e.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(rl.CLOSING)},e.prototype.isOpen=function(){return this.adapter.hasClass(rl.OPEN)},e.prototype.isOpening=function(){return this.adapter.hasClass(rl.OPENING)||this.adapter.hasClass(rl.ANIMATE)},e.prototype.isClosing=function(){return this.adapter.hasClass(rl.CLOSING)},e.prototype.handleKeydown=function(n){var a=n.keyCode,p=n.key,_=p==="Escape"||a===27;_&&this.close()},e.prototype.handleTransitionEnd=function(n){var a=rl.OPENING,p=rl.CLOSING,_=rl.OPEN,c=rl.ANIMATE,h=rl.ROOT,I=this.isElement(n.target)&&this.adapter.elementHasClass(n.target,h);!I||(this.isClosing()?(this.adapter.removeClass(_),this.closed(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened(),this.adapter.notifyOpen()),this.adapter.removeClass(c),this.adapter.removeClass(a),this.adapter.removeClass(p))},e.prototype.opened=function(){},e.prototype.closed=function(){},e.prototype.runNextAnimationFrame=function(n){var a=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){a.animationFrame=0,clearTimeout(a.animationTimer),a.animationTimer=setTimeout(n,0)})},e.prototype.isElement=function(n){return Boolean(n.classList)},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var v2=function(o){co(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.handleScrimClick=function(){this.close()},e.prototype.opened=function(){this.adapter.trapFocus()},e.prototype.closed=function(){this.adapter.releaseFocus()},e}(n1);function b2(o){let e,n,a,p,_,c;const h=o[15].default,I=pn(h,o,o[14],null);let L=[{class:n=wi(tr({[o[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":o[2]==="dismissible","mdc-drawer--modal":o[2]==="modal","smui-drawer__absolute":o[2]==="modal"&&!o[3]},o[6]))},o[8]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("aside"),I&&I.c(),this.h()},l(R){e=_i(R,"ASIDE",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[16](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[7].call(null,e)),An(e,"keydown",o[17]),An(e,"transitionend",o[18])],_=!0)},p(R,[O]){I&&I.p&&(!p||O&16384)&&fn(I,h,R,R[14],p?gn(h,R[14],O,null):mn(R[14]),null),hi(e,z=en(L,[(!p||O&78&&n!==(n=wi(tr({[R[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":R[2]==="dismissible","mdc-drawer--modal":R[2]==="modal","smui-drawer__absolute":R[2]==="modal"&&!R[3]},R[6]))))&&{class:n},O&256&&R[8]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[16](null),_=!1,xr(c)}}}function x2(o,e,n){const a=["use","class","variant","open","fixed","setOpen","isOpen","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const{FocusTrap:h}=Bw,I=Qn(Jn());let{use:L=[]}=e,{class:z=""}=e,{variant:R=void 0}=e,{open:O=!1}=e,{fixed:Y=!0}=e,ee,ue,te={},de=null,oe,be=!1;sr("SMUI:list:nav",!0),sr("SMUI:list:item:nav",!0),sr("SMUI:list:wrapFocus",!0);let qe=R;Po(()=>{oe=new h(ee,{skipInitialFocus:!0}),n(4,ue=Ne()),ue&&ue.init()}),eh(()=>{ue&&ue.destroy(),be&&be.removeEventListener("SMUIDrawerScrim:click",st)});function Ne(){var Et,Gt;be&&be.removeEventListener("SMUIDrawerScrim:click",st),R==="modal"&&(be=(Gt=(Et=ee.parentNode)===null||Et===void 0?void 0:Et.querySelector(".mdc-drawer-scrim"))!==null&&Gt!==void 0?Gt:!1,be&&be.addEventListener("SMUIDrawerScrim:click",st));const Ye=R==="dismissible"?n1:R==="modal"?v2:void 0;return Ye?new Ye({addClass:fe,removeClass:ct,hasClass:De,elementHasClass:(wt,Lt)=>wt.classList.contains(Lt),saveFocus:()=>de=document.activeElement,restoreFocus:()=>{de&&"focus"in de&&ee.contains(document.activeElement)&&de.focus()},focusActiveNavigationItem:()=>{const wt=ee.querySelector(".mdc-list-item--activated,.mdc-deprecated-list-item--activated");wt&&wt.focus()},notifyClose:()=>{n(9,O=!1),Pn(ee,"SMUIDrawer:closed",void 0,void 0,!0)},notifyOpen:()=>{n(9,O=!0),Pn(ee,"SMUIDrawer:opened",void 0,void 0,!0)},trapFocus:()=>oe.trapFocus(),releaseFocus:()=>oe.releaseFocus()}):void 0}function De(Et){return Et in te?te[Et]:Rt().classList.contains(Et)}function fe(Et){te[Et]||n(6,te[Et]=!0,te)}function ct(Et){(!(Et in te)||te[Et])&&n(6,te[Et]=!1,te)}function st(){ue&&"handleScrimClick"in ue&&ue.handleScrimClick()}function Ge(Et){n(9,O=Et)}function Ue(){return O}function Rt(){return ee}function He(Et){qi[Et?"unshift":"push"](()=>{ee=Et,n(5,ee)})}const Mt=Et=>ue&&ue.handleKeydown(Et),li=Et=>ue&&ue.handleTransitionEnd(Et);return o.$$set=Et=>{e=Ct(Ct({},e),Yn(Et)),n(8,p=bi(e,a)),"use"in Et&&n(0,L=Et.use),"class"in Et&&n(1,z=Et.class),"variant"in Et&&n(2,R=Et.variant),"open"in Et&&n(9,O=Et.open),"fixed"in Et&&n(3,Y=Et.fixed),"$$scope"in Et&&n(14,c=Et.$$scope)},o.$$.update=()=>{o.$$.dirty&8212&&qe!==R&&(n(13,qe=R),ue&&ue.destroy(),n(6,te={}),n(4,ue=Ne()),ue&&ue.init()),o.$$.dirty&528&&ue&&ue.isOpen()!==O&&(O?ue.open():ue.close())},[L,z,R,Y,ue,ee,te,I,p,O,Ge,Ue,Rt,qe,c,_,He,Mt,li]}class w2 extends wn{constructor(e){super(),En(this,e,x2,b2,bn,{use:0,class:1,variant:2,open:9,fixed:3,setOpen:10,isOpen:11,getElement:12})}get setOpen(){return this.$$.ctx[10]}get isOpen(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}var E2=ns({class:"mdc-drawer-app-content",component:_p}),I2=ns({class:"mdc-drawer__content",component:_p}),r1=ns({class:"mdc-drawer__header",component:_p});ns({class:"mdc-drawer__title",component:gw});ns({class:"mdc-drawer__subtitle",component:yw});/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var S2={ACTIVE:"mdc-tab-indicator--active",FADE:"mdc-tab-indicator--fade",NO_TRANSITION:"mdc-tab-indicator--no-transition"},T2={CONTENT_SELECTOR:".mdc-tab-indicator__content"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yc=function(o){co(e,o);function e(n){return o.call(this,cr(cr({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return S2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return T2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},computeContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setContentStyleProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.computeContentClientRect=function(){return this.adapter.computeContentClientRect()},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var A2=function(o){co(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.activate=function(){this.adapter.addClass(Yc.cssClasses.ACTIVE)},e.prototype.deactivate=function(){this.adapter.removeClass(Yc.cssClasses.ACTIVE)},e}(Yc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var av=function(o){co(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.activate=function(n){if(!n){this.adapter.addClass(Yc.cssClasses.ACTIVE);return}var a=this.computeContentClientRect(),p=n.width/a.width,_=n.left-a.left;this.adapter.addClass(Yc.cssClasses.NO_TRANSITION),this.adapter.setContentStyleProperty("transform","translateX("+_+"px) scaleX("+p+")"),this.computeContentClientRect(),this.adapter.removeClass(Yc.cssClasses.NO_TRANSITION),this.adapter.addClass(Yc.cssClasses.ACTIVE),this.adapter.setContentStyleProperty("transform","")},e.prototype.deactivate=function(){this.adapter.removeClass(Yc.cssClasses.ACTIVE)},e}(Yc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cm={ACTIVE:"mdc-tab--active"},af={ARIA_SELECTED:"aria-selected",CONTENT_SELECTOR:".mdc-tab__content",INTERACTED_EVENT:"MDCTab:interacted",RIPPLE_SELECTOR:".mdc-tab__ripple",TABINDEX:"tabIndex",TAB_INDICATOR_SELECTOR:".mdc-tab-indicator"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var C2=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.focusOnActivate=!0,a}return Object.defineProperty(e,"cssClasses",{get:function(){return cm},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return af},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},activateIndicator:function(){},deactivateIndicator:function(){},notifyInteracted:function(){},getOffsetLeft:function(){return 0},getOffsetWidth:function(){return 0},getContentOffsetLeft:function(){return 0},getContentOffsetWidth:function(){return 0},focus:function(){}}},enumerable:!1,configurable:!0}),e.prototype.handleClick=function(){this.adapter.notifyInteracted()},e.prototype.isActive=function(){return this.adapter.hasClass(cm.ACTIVE)},e.prototype.setFocusOnActivate=function(n){this.focusOnActivate=n},e.prototype.activate=function(n){this.adapter.addClass(cm.ACTIVE),this.adapter.setAttr(af.ARIA_SELECTED,"true"),this.adapter.setAttr(af.TABINDEX,"0"),this.adapter.activateIndicator(n),this.focusOnActivate&&this.adapter.focus()},e.prototype.deactivate=function(){!this.isActive()||(this.adapter.removeClass(cm.ACTIVE),this.adapter.setAttr(af.ARIA_SELECTED,"false"),this.adapter.setAttr(af.TABINDEX,"-1"),this.adapter.deactivateIndicator())},e.prototype.computeDimensions=function(){var n=this.adapter.getOffsetWidth(),a=this.adapter.getOffsetLeft(),p=this.adapter.getContentOffsetWidth(),_=this.adapter.getContentOffsetLeft();return{contentLeft:a+_,contentRight:a+_+p,rootLeft:a,rootRight:a+n}},e}(Ma);function k2(o){let e,n,a,p,_,c,h,I,L,z,R;const O=o[21].default,Y=pn(O,o,o[20],null);let ee=[{class:a=wi({[o[6]]:!0,"mdc-tab-indicator__content":!0,"mdc-tab-indicator__content--underline":o[3]==="underline","mdc-tab-indicator__content--icon":o[3]==="icon"})},{style:p=Object.entries(o[10]).map(sv).join(" ")},{"aria-hidden":_=o[3]==="icon"?"true":void 0},rr(o[12],"content$")],ue={};for(let oe=0;oe<ee.length;oe+=1)ue=Ct(ue,ee[oe]);let te=[{class:h=wi(tr({[o[2]]:!0,"mdc-tab-indicator":!0,"mdc-tab-indicator--active":o[0],"mdc-tab-indicator--fade":o[4]==="fade"},o[9]))},_s(o[12],["content$"])],de={};for(let oe=0;oe<te.length;oe+=1)de=Ct(de,te[oe]);return{c(){e=yi("span"),n=yi("span"),Y&&Y.c(),this.h()},l(oe){e=_i(oe,"SPAN",{class:!0});var be=pi(e);n=_i(be,"SPAN",{class:!0,style:!0,"aria-hidden":!0});var qe=pi(n);Y&&Y.l(qe),qe.forEach(We),be.forEach(We),this.h()},h(){hi(n,ue),hi(e,de)},m(oe,be){Dt(oe,e,be),sn(e,n),Y&&Y.m(n,null),o[22](n),o[23](e),L=!0,z||(R=[Ei(c=qn.call(null,n,o[5])),Ei(I=qn.call(null,e,o[1])),Ei(o[11].call(null,e))],z=!0)},p(oe,[be]){Y&&Y.p&&(!L||be&1048576)&&fn(Y,O,oe,oe[20],L?gn(O,oe[20],be,null):mn(oe[20]),null),hi(n,ue=en(ee,[(!L||be&72&&a!==(a=wi({[oe[6]]:!0,"mdc-tab-indicator__content":!0,"mdc-tab-indicator__content--underline":oe[3]==="underline","mdc-tab-indicator__content--icon":oe[3]==="icon"})))&&{class:a},(!L||be&1024&&p!==(p=Object.entries(oe[10]).map(sv).join(" ")))&&{style:p},(!L||be&8&&_!==(_=oe[3]==="icon"?"true":void 0))&&{"aria-hidden":_},be&4096&&rr(oe[12],"content$")])),c&&zn(c.update)&&be&32&&c.update.call(null,oe[5]),hi(e,de=en(te,[(!L||be&533&&h!==(h=wi(tr({[oe[2]]:!0,"mdc-tab-indicator":!0,"mdc-tab-indicator--active":oe[0],"mdc-tab-indicator--fade":oe[4]==="fade"},oe[9]))))&&{class:h},be&4096&&_s(oe[12],["content$"])])),I&&zn(I.update)&&be&2&&I.update.call(null,oe[1])},i(oe){L||(tt(Y,oe),L=!0)},o(oe){at(Y,oe),L=!1},d(oe){oe&&We(e),Y&&Y.d(oe),o[22](null),o[23](null),z=!1,xr(R)}}}const sv=([o,e])=>`${o}: ${e};`;function M2(o,e,n){const a=["use","class","active","type","transition","content$use","content$class","activate","deactivate","computeContentClientRect","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{active:z=!1}=e,{type:R="underline"}=e,{transition:O="slide"}=e,{content$use:Y=[]}=e,{content$class:ee=""}=e,ue,te,de,oe={},be={},qe=[],Ne=O;Po(()=>(n(17,te=De()),te.init(),()=>{te.destroy()}));function De(){const Gt={fade:A2,slide:av}[O]||av;return new Gt({addClass:(...Ye)=>fe(()=>ct(...Ye)),removeClass:(...Ye)=>fe(()=>st(...Ye)),computeContentClientRect:He,setContentStyleProperty:(...Ye)=>fe(()=>Ge(...Ye))})}function fe(Gt){qe.length?qe[qe.length-1].push(Gt):Gt()}function ct(Gt){oe[Gt]||n(9,oe[Gt]=!0,oe)}function st(Gt){(!(Gt in oe)||oe[Gt])&&n(9,oe[Gt]=!1,oe)}function Ge(Gt,Ye){be[Gt]!=Ye&&(Ye===""||Ye==null?(delete be[Gt],n(10,be),n(19,Ne),n(4,O),n(17,te)):n(10,be[Gt]=Ye,be))}function Ue(Gt){n(0,z=!0),te.activate(Gt)}function Rt(){n(0,z=!1),te.deactivate()}function He(){return qe.push([]),n(18,qe),de.getBoundingClientRect()}function Mt(){return ue}function li(Gt){qi[Gt?"unshift":"push"](()=>{de=Gt,n(8,de)})}function Et(Gt){qi[Gt?"unshift":"push"](()=>{ue=Gt,n(7,ue)})}return o.$$set=Gt=>{e=Ct(Ct({},e),Yn(Gt)),n(12,p=bi(e,a)),"use"in Gt&&n(1,I=Gt.use),"class"in Gt&&n(2,L=Gt.class),"active"in Gt&&n(0,z=Gt.active),"type"in Gt&&n(3,R=Gt.type),"transition"in Gt&&n(4,O=Gt.transition),"content$use"in Gt&&n(5,Y=Gt.content$use),"content$class"in Gt&&n(6,ee=Gt.content$class),"$$scope"in Gt&&n(20,c=Gt.$$scope)},o.$$.update=()=>{o.$$.dirty&655376&&Ne!==O&&(n(19,Ne=O),te&&te.destroy(),n(9,oe={}),n(10,be={}),n(17,te=De()),te.init()),o.$$.dirty&262144&&qe.length&&requestAnimationFrame(()=>{var Gt;const Ye=(Gt=qe.shift())!==null&&Gt!==void 0?Gt:[];n(18,qe);for(const wt of Ye)wt()})},[z,I,L,R,O,Y,ee,ue,de,oe,be,h,p,Ue,Rt,He,Mt,te,qe,Ne,c,_,li,Et]}class o1 extends wn{constructor(e){super(),En(this,e,M2,k2,bn,{use:1,class:2,active:0,type:3,transition:4,content$use:5,content$class:6,activate:13,deactivate:14,computeContentClientRect:15,getElement:16})}get activate(){return this.$$.ctx[13]}get deactivate(){return this.$$.ctx[14]}get computeContentClientRect(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}const P2=o=>({}),lv=o=>({}),L2=o=>({}),uv=o=>({});function cv(o){let e,n;const a=[{active:o[18]},rr(o[24],"tabIndicator$")];let p={$$slots:{default:[z2]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new o1({props:p}),o[31](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[0]&17039360?en(a,[c[0]&262144&&{active:_[18]},c[0]&16777216&&Xr(rr(_[24],"tabIndicator$"))]):{};c[1]&32&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[31](null),Di(e,_)}}}function z2(o){let e;const n=o[30]["tab-indicator"],a=pn(n,o,o[36],uv);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_[1]&32)&&fn(a,n,p,p[36],e?gn(n,p[36],_,L2):mn(p[36]),uv)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function hv(o){let e,n;const a=[{active:o[18]},rr(o[24],"tabIndicator$")];let p={$$slots:{default:[D2]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new o1({props:p}),o[33](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[0]&17039360?en(a,[c[0]&262144&&{active:_[18]},c[0]&16777216&&Xr(rr(_[24],"tabIndicator$"))]):{};c[1]&32&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[33](null),Di(e,_)}}}function D2(o){let e;const n=o[30]["tab-indicator"],a=pn(n,o,o[36],lv);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_[1]&32)&&fn(a,n,p,p[36],e?gn(n,p[36],_,P2):mn(p[36]),lv)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function R2(o){let e,n,a,p,_,c,h,I,L,z;const R=o[30].default,O=pn(R,o,o[36],null);let Y=o[6]&&cv(o),ee=[{class:a=wi({[o[9]]:!0,"mdc-tab__content":!0})},rr(o[24],"content$")],ue={};for(let de=0;de<ee.length;de+=1)ue=Ct(ue,ee[de]);let te=!o[6]&&hv(o);return{c(){e=yi("span"),O&&O.c(),n=Bn(),Y&&Y.c(),_=Bn(),te&&te.c(),c=Bn(),h=yi("span"),this.h()},l(de){e=_i(de,"SPAN",{class:!0});var oe=pi(e);O&&O.l(oe),n=Fn(oe),Y&&Y.l(oe),oe.forEach(We),_=Fn(de),te&&te.l(de),c=Fn(de),h=_i(de,"SPAN",{class:!0}),pi(h).forEach(We),this.h()},h(){hi(e,ue),ii(h,"class","mdc-tab__ripple")},m(de,oe){Dt(de,e,oe),O&&O.m(e,null),sn(e,n),Y&&Y.m(e,null),o[32](e),Dt(de,_,oe),te&&te.m(de,oe),Dt(de,c,oe),Dt(de,h,oe),I=!0,L||(z=Ei(p=qn.call(null,e,o[8])),L=!0)},p(de,oe){O&&O.p&&(!I||oe[1]&32)&&fn(O,R,de,de[36],I?gn(R,de[36],oe,null):mn(de[36]),null),de[6]?Y?(Y.p(de,oe),oe[0]&64&&tt(Y,1)):(Y=cv(de),Y.c(),tt(Y,1),Y.m(e,null)):Y&&(Cr(),at(Y,1,1,()=>{Y=null}),Ar()),hi(e,ue=en(ee,[(!I||oe[0]&512&&a!==(a=wi({[de[9]]:!0,"mdc-tab__content":!0})))&&{class:a},oe[0]&16777216&&rr(de[24],"content$")])),p&&zn(p.update)&&oe[0]&256&&p.update.call(null,de[8]),de[6]?te&&(Cr(),at(te,1,1,()=>{te=null}),Ar()):te?(te.p(de,oe),oe[0]&64&&tt(te,1)):(te=hv(de),te.c(),tt(te,1),te.m(c.parentNode,c))},i(de){I||(tt(O,de),tt(Y),tt(te),I=!0)},o(de){at(O,de),at(Y),at(te),I=!1},d(de){de&&We(e),O&&O.d(de),Y&&Y.d(),o[32](null),de&&We(_),te&&te.d(de),de&&We(c),de&&We(h),L=!1,z()}}}function O2(o){let e,n,a;const p=[{use:[[$c,{ripple:o[3],unbounded:!1,addClass:o[21],removeClass:o[22],addStyle:o[23]}],o[20],...o[0]]},{class:wi(tr({[o[1]]:!0,"mdc-tab":!0,"mdc-tab--active":o[18],"mdc-tab--stacked":o[4],"mdc-tab--min-width":o[5]},o[15]))},{style:Object.entries(o[16]).map(dv).concat([o[2]]).join(" ")},{role:"tab"},{"aria-selected":o[18]?"true":"false"},{tabindex:o[18]||o[19]?"0":"-1"},{href:o[7]},o[17],_s(o[24],["content$","tabIndicator$"])];var _=o[10];function c(h){let I={$$slots:{default:[R2]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[34](e),e.$on("click",o[35])),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,I){const L=I[0]&33521855?en(p,[I[0]&15728649&&{use:[[$c,{ripple:h[3],unbounded:!1,addClass:h[21],removeClass:h[22],addStyle:h[23]}],h[20],...h[0]]},I[0]&294962&&{class:wi(tr({[h[1]]:!0,"mdc-tab":!0,"mdc-tab--active":h[18],"mdc-tab--stacked":h[4],"mdc-tab--min-width":h[5]},h[15]))},I[0]&65540&&{style:Object.entries(h[16]).map(dv).concat([h[2]]).join(" ")},p[3],I[0]&262144&&{"aria-selected":h[18]?"true":"false"},I[0]&786432&&{tabindex:h[18]||h[19]?"0":"-1"},I[0]&128&&{href:h[7]},I[0]&131072&&Xr(h[17]),I[0]&16777216&&Xr(_s(h[24],["content$","tabIndicator$"]))]):{};if(I[0]&17064768|I[1]&32&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[10])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[34](e),e.$on("click",h[35]),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[34](null),h&&We(n),e&&Di(e,h)}}}const dv=([o,e])=>`${o}: ${e};`;function B2(o,e,n){const a=["use","class","style","tab","ripple","stacked","minWidth","indicatorSpanOnlyContent","href","content$use","content$class","component","activate","deactivate","focus","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{style:z=""}=e,{tab:R}=e,{ripple:O=!0}=e,{stacked:Y=!1}=e,{minWidth:ee=!1}=e,{indicatorSpanOnlyContent:ue=!1}=e,{href:te=void 0}=e,{content$use:de=[]}=e,{content$class:oe=""}=e,be,qe,Ne,De,fe={},ct={},st={},Ge=Or("SMUI:tab:focusOnActivate"),Ue=R===Or("SMUI:tab:initialActive"),Rt=!1,{component:He=te==null?e1:Py}=e;if(sr("SMUI:label:context","tab"),sr("SMUI:icon:context","tab"),!R)throw new Error("The tab property is required! It should be passed down from the TabBar to the Tab.");Po(()=>{n(11,qe=new C2({setAttr:Ye,addClass:li,removeClass:Et,hasClass:Mt,activateIndicator:It=>De.activate(It),deactivateIndicator:()=>De.deactivate(),notifyInteracted:()=>Pn(Xt(),"SMUITab:interacted",{tabId:R},void 0,!0),getOffsetLeft:()=>Xt().offsetLeft,getOffsetWidth:()=>Xt().offsetWidth,getContentOffsetLeft:()=>Ne.offsetLeft,getContentOffsetWidth:()=>Ne.offsetWidth,focus:ni}));const dt={tabId:R,get element(){return Xt()},get active(){return Ue},forceAccessible(It){n(19,Rt=It)},computeIndicatorClientRect:()=>De.computeContentClientRect(),computeDimensions:()=>qe.computeDimensions(),focus:ni,activate:wt,deactivate:Lt};return Pn(Xt(),"SMUITab:mount",dt),qe.init(),()=>{Pn(Xt(),"SMUITab:unmount",dt),qe.destroy()}});function Mt(dt){return dt in fe?fe[dt]:Xt().classList.contains(dt)}function li(dt){fe[dt]||n(15,fe[dt]=!0,fe)}function Et(dt){(!(dt in fe)||fe[dt])&&n(15,fe[dt]=!1,fe)}function Gt(dt,It){ct[dt]!=It&&(It===""||It==null?(delete ct[dt],n(16,ct)):n(16,ct[dt]=It,ct))}function Ye(dt,It){st[dt]!==It&&n(17,st[dt]=It,st)}function wt(dt,It){n(18,Ue=!0),It&&qe.setFocusOnActivate(!1),qe.activate(dt),It&&qe.setFocusOnActivate(Ge)}function Lt(){n(18,Ue=!1),qe.deactivate()}function ni(){Xt().focus()}function Xt(){return be.getElement()}function Ki(dt){qi[dt?"unshift":"push"](()=>{De=dt,n(14,De)})}function ei(dt){qi[dt?"unshift":"push"](()=>{Ne=dt,n(13,Ne)})}function Jt(dt){qi[dt?"unshift":"push"](()=>{De=dt,n(14,De)})}function xi(dt){qi[dt?"unshift":"push"](()=>{be=dt,n(12,be)})}const ai=()=>qe&&qe.handleClick();return o.$$set=dt=>{e=Ct(Ct({},e),Yn(dt)),n(24,p=bi(e,a)),"use"in dt&&n(0,I=dt.use),"class"in dt&&n(1,L=dt.class),"style"in dt&&n(2,z=dt.style),"tab"in dt&&n(25,R=dt.tab),"ripple"in dt&&n(3,O=dt.ripple),"stacked"in dt&&n(4,Y=dt.stacked),"minWidth"in dt&&n(5,ee=dt.minWidth),"indicatorSpanOnlyContent"in dt&&n(6,ue=dt.indicatorSpanOnlyContent),"href"in dt&&n(7,te=dt.href),"content$use"in dt&&n(8,de=dt.content$use),"content$class"in dt&&n(9,oe=dt.content$class),"component"in dt&&n(10,He=dt.component),"$$scope"in dt&&n(36,c=dt.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&2048&&qe&&qe.setFocusOnActivate(Ge)},[I,L,z,O,Y,ee,ue,te,de,oe,He,qe,be,Ne,De,fe,ct,st,Ue,Rt,h,li,Et,Gt,p,R,wt,Lt,ni,Xt,_,Ki,ei,Jt,xi,ai,c]}class F2 extends wn{constructor(e){super(),En(this,e,B2,O2,bn,{use:0,class:1,style:2,tab:25,ripple:3,stacked:4,minWidth:5,indicatorSpanOnlyContent:6,href:7,content$use:8,content$class:9,component:10,activate:26,deactivate:27,focus:28,getElement:29},null,[-1,-1])}get activate(){return this.$$.ctx[26]}get deactivate(){return this.$$.ctx[27]}get focus(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var a1={ANIMATING:"mdc-tab-scroller--animating",SCROLL_AREA_SCROLL:"mdc-tab-scroller__scroll-area--scroll",SCROLL_TEST:"mdc-tab-scroller__test"},U2={AREA_SELECTOR:".mdc-tab-scroller__scroll-area",CONTENT_SELECTOR:".mdc-tab-scroller__scroll-content"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ly=function(){function o(e){this.adapter=e}return o}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var N2=function(o){co(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getScrollPositionRTL=function(){var n=this.adapter.getScrollAreaScrollLeft(),a=this.calculateScrollEdges().right;return Math.round(a-n)},e.prototype.scrollToRTL=function(n){var a=this.calculateScrollEdges(),p=this.adapter.getScrollAreaScrollLeft(),_=this.clampScrollValue(a.right-n);return{finalScrollPosition:_,scrollDelta:_-p}},e.prototype.incrementScrollRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft(),p=this.clampScrollValue(a-n);return{finalScrollPosition:p,scrollDelta:p-a}},e.prototype.getAnimatingScrollPosition=function(n){return n},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),a=this.adapter.getScrollAreaOffsetWidth();return{left:0,right:n-a}},e.prototype.clampScrollValue=function(n){var a=this.calculateScrollEdges();return Math.min(Math.max(a.left,n),a.right)},e}(Ly);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var V2=function(o){co(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getScrollPositionRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft();return Math.round(n-a)},e.prototype.scrollToRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft(),p=this.clampScrollValue(-n);return{finalScrollPosition:p,scrollDelta:p-a}},e.prototype.incrementScrollRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft(),p=this.clampScrollValue(a-n);return{finalScrollPosition:p,scrollDelta:p-a}},e.prototype.getAnimatingScrollPosition=function(n,a){return n-a},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),a=this.adapter.getScrollAreaOffsetWidth();return{left:a-n,right:0}},e.prototype.clampScrollValue=function(n){var a=this.calculateScrollEdges();return Math.max(Math.min(a.right,n),a.left)},e}(Ly);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var j2=function(o){co(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getScrollPositionRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft();return Math.round(a-n)},e.prototype.scrollToRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft(),p=this.clampScrollValue(n);return{finalScrollPosition:p,scrollDelta:a-p}},e.prototype.incrementScrollRTL=function(n){var a=this.adapter.getScrollAreaScrollLeft(),p=this.clampScrollValue(a+n);return{finalScrollPosition:p,scrollDelta:a-p}},e.prototype.getAnimatingScrollPosition=function(n,a){return n+a},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),a=this.adapter.getScrollAreaOffsetWidth();return{left:n-a,right:0}},e.prototype.clampScrollValue=function(n){var a=this.calculateScrollEdges();return Math.min(Math.max(a.right,n),a.left)},e}(Ly);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var q2=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.isAnimating=!1,a}return Object.defineProperty(e,"cssClasses",{get:function(){return a1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return U2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{eventTargetMatchesSelector:function(){return!1},addClass:function(){},removeClass:function(){},addScrollAreaClass:function(){},setScrollAreaStyleProperty:function(){},setScrollContentStyleProperty:function(){},getScrollContentStyleValue:function(){return""},setScrollAreaScrollLeft:function(){},getScrollAreaScrollLeft:function(){return 0},getScrollContentOffsetWidth:function(){return 0},getScrollAreaOffsetWidth:function(){return 0},computeScrollAreaClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeScrollContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeHorizontalScrollbarHeight:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this.adapter.computeHorizontalScrollbarHeight();this.adapter.setScrollAreaStyleProperty("margin-bottom",-n+"px"),this.adapter.addScrollAreaClass(e.cssClasses.SCROLL_AREA_SCROLL)},e.prototype.getScrollPosition=function(){if(this.isRTL())return this.computeCurrentScrollPositionRTL();var n=this.calculateCurrentTranslateX(),a=this.adapter.getScrollAreaScrollLeft();return a-n},e.prototype.handleInteraction=function(){!this.isAnimating||this.stopScrollAnimation()},e.prototype.handleTransitionEnd=function(n){var a=n.target;!this.isAnimating||!this.adapter.eventTargetMatchesSelector(a,e.strings.CONTENT_SELECTOR)||(this.isAnimating=!1,this.adapter.removeClass(e.cssClasses.ANIMATING))},e.prototype.incrementScroll=function(n){n!==0&&this.animate(this.getIncrementScrollOperation(n))},e.prototype.incrementScrollImmediate=function(n){if(n!==0){var a=this.getIncrementScrollOperation(n);a.scrollDelta!==0&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(a.finalScrollPosition))}},e.prototype.scrollTo=function(n){if(this.isRTL()){this.scrollToImplRTL(n);return}this.scrollToImpl(n)},e.prototype.getRTLScroller=function(){return this.rtlScrollerInstance||(this.rtlScrollerInstance=this.rtlScrollerFactory()),this.rtlScrollerInstance},e.prototype.calculateCurrentTranslateX=function(){var n=this.adapter.getScrollContentStyleValue("transform");if(n==="none")return 0;var a=/\((.+?)\)/.exec(n);if(!a)return 0;var p=a[1],_=ax(p.split(","),6);_[0],_[1],_[2],_[3];var c=_[4];return _[5],parseFloat(c)},e.prototype.clampScrollValue=function(n){var a=this.calculateScrollEdges();return Math.min(Math.max(a.left,n),a.right)},e.prototype.computeCurrentScrollPositionRTL=function(){var n=this.calculateCurrentTranslateX();return this.getRTLScroller().getScrollPositionRTL(n)},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),a=this.adapter.getScrollAreaOffsetWidth();return{left:0,right:n-a}},e.prototype.scrollToImpl=function(n){var a=this.getScrollPosition(),p=this.clampScrollValue(n),_=p-a;this.animate({finalScrollPosition:p,scrollDelta:_})},e.prototype.scrollToImplRTL=function(n){var a=this.getRTLScroller().scrollToRTL(n);this.animate(a)},e.prototype.getIncrementScrollOperation=function(n){if(this.isRTL())return this.getRTLScroller().incrementScrollRTL(n);var a=this.getScrollPosition(),p=n+a,_=this.clampScrollValue(p),c=_-a;return{finalScrollPosition:_,scrollDelta:c}},e.prototype.animate=function(n){var a=this;n.scrollDelta!==0&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(n.finalScrollPosition),this.adapter.setScrollContentStyleProperty("transform","translateX("+n.scrollDelta+"px)"),this.adapter.computeScrollAreaClientRect(),requestAnimationFrame(function(){a.adapter.addClass(e.cssClasses.ANIMATING),a.adapter.setScrollContentStyleProperty("transform","none")}),this.isAnimating=!0)},e.prototype.stopScrollAnimation=function(){this.isAnimating=!1;var n=this.getAnimatingScrollPosition();this.adapter.removeClass(e.cssClasses.ANIMATING),this.adapter.setScrollContentStyleProperty("transform","translateX(0px)"),this.adapter.setScrollAreaScrollLeft(n)},e.prototype.getAnimatingScrollPosition=function(){var n=this.calculateCurrentTranslateX(),a=this.adapter.getScrollAreaScrollLeft();return this.isRTL()?this.getRTLScroller().getAnimatingScrollPosition(a,n):a-n},e.prototype.rtlScrollerFactory=function(){var n=this.adapter.getScrollAreaScrollLeft();this.adapter.setScrollAreaScrollLeft(n-1);var a=this.adapter.getScrollAreaScrollLeft();if(a<0)return this.adapter.setScrollAreaScrollLeft(n),new V2(this.adapter);var p=this.adapter.computeScrollAreaClientRect(),_=this.adapter.computeScrollContentClientRect(),c=Math.round(_.right-p.right);return this.adapter.setScrollAreaScrollLeft(n),c===a?new j2(this.adapter):new N2(this.adapter)},e.prototype.isRTL=function(){return this.adapter.getScrollContentStyleValue("direction")==="rtl"},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wg;function G2(o,e){if(e===void 0&&(e=!0),e&&typeof Wg!="undefined")return Wg;var n=o.createElement("div");n.classList.add(a1.SCROLL_TEST),o.body.appendChild(n);var a=n.offsetHeight-n.clientHeight;return o.body.removeChild(n),e&&(Wg=a),a}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ka={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_ACTIVATED_EVENT:"MDCTabBar:activated",TAB_SCROLLER_SELECTOR:".mdc-tab-scroller",TAB_SELECTOR:".mdc-tab"},Ou={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,ENTER_KEYCODE:13,EXTRA_SCROLL_AMOUNT:20,HOME_KEYCODE:36,SPACE_KEYCODE:32};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Cd=new Set;Cd.add(ka.ARROW_LEFT_KEY);Cd.add(ka.ARROW_RIGHT_KEY);Cd.add(ka.END_KEY);Cd.add(ka.HOME_KEY);Cd.add(ka.ENTER_KEY);Cd.add(ka.SPACE_KEY);var kd=new Map;kd.set(Ou.ARROW_LEFT_KEYCODE,ka.ARROW_LEFT_KEY);kd.set(Ou.ARROW_RIGHT_KEYCODE,ka.ARROW_RIGHT_KEY);kd.set(Ou.END_KEYCODE,ka.END_KEY);kd.set(Ou.HOME_KEYCODE,ka.HOME_KEY);kd.set(Ou.ENTER_KEYCODE,ka.ENTER_KEY);kd.set(Ou.SPACE_KEYCODE,ka.SPACE_KEY);var H2=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.useAutomaticActivation=!1,a}return Object.defineProperty(e,"strings",{get:function(){return ka},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Ou},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{scrollTo:function(){},incrementScroll:function(){},getScrollPosition:function(){return 0},getScrollContentWidth:function(){return 0},getOffsetWidth:function(){return 0},isRTL:function(){return!1},setActiveTab:function(){},activateTabAtIndex:function(){},deactivateTabAtIndex:function(){},focusTabAtIndex:function(){},getTabIndicatorClientRectAtIndex:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabDimensionsAtIndex:function(){return{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:function(){return-1},getFocusedTabIndex:function(){return-1},getIndexOfTabById:function(){return-1},getTabListLength:function(){return 0},notifyTabActivated:function(){}}},enumerable:!1,configurable:!0}),e.prototype.setUseAutomaticActivation=function(n){this.useAutomaticActivation=n},e.prototype.activateTab=function(n){var a=this.adapter.getPreviousActiveTabIndex();if(!(!this.indexIsInRange(n)||n===a)){var p;a!==-1&&(this.adapter.deactivateTabAtIndex(a),p=this.adapter.getTabIndicatorClientRectAtIndex(a)),this.adapter.activateTabAtIndex(n,p),this.scrollIntoView(n),this.adapter.notifyTabActivated(n)}},e.prototype.handleKeyDown=function(n){var a=this.getKeyFromEvent(n);if(a!==void 0)if(this.isActivationKey(a)||n.preventDefault(),this.useAutomaticActivation){if(this.isActivationKey(a))return;var p=this.determineTargetFromKey(this.adapter.getPreviousActiveTabIndex(),a);this.adapter.setActiveTab(p),this.scrollIntoView(p)}else{var _=this.adapter.getFocusedTabIndex();if(this.isActivationKey(a))this.adapter.setActiveTab(_);else{var p=this.determineTargetFromKey(_,a);this.adapter.focusTabAtIndex(p),this.scrollIntoView(p)}}},e.prototype.handleTabInteraction=function(n){this.adapter.setActiveTab(this.adapter.getIndexOfTabById(n.detail.tabId))},e.prototype.scrollIntoView=function(n){if(!!this.indexIsInRange(n)){if(n===0){this.adapter.scrollTo(0);return}if(n===this.adapter.getTabListLength()-1){this.adapter.scrollTo(this.adapter.getScrollContentWidth());return}if(this.isRTL()){this.scrollIntoViewImplRTL(n);return}this.scrollIntoViewImpl(n)}},e.prototype.determineTargetFromKey=function(n,a){var p=this.isRTL(),_=this.adapter.getTabListLength()-1,c=a===ka.END_KEY,h=a===ka.ARROW_LEFT_KEY&&!p||a===ka.ARROW_RIGHT_KEY&&p,I=a===ka.ARROW_RIGHT_KEY&&!p||a===ka.ARROW_LEFT_KEY&&p,L=n;return c?L=_:h?L-=1:I?L+=1:L=0,L<0?L=_:L>_&&(L=0),L},e.prototype.calculateScrollIncrement=function(n,a,p,_){var c=this.adapter.getTabDimensionsAtIndex(a),h=c.contentLeft-p-_,I=c.contentRight-p,L=I-Ou.EXTRA_SCROLL_AMOUNT,z=h+Ou.EXTRA_SCROLL_AMOUNT;return a<n?Math.min(L,0):Math.max(z,0)},e.prototype.calculateScrollIncrementRTL=function(n,a,p,_,c){var h=this.adapter.getTabDimensionsAtIndex(a),I=c-h.contentLeft-p,L=c-h.contentRight-p-_,z=L+Ou.EXTRA_SCROLL_AMOUNT,R=I-Ou.EXTRA_SCROLL_AMOUNT;return a>n?Math.max(z,0):Math.min(R,0)},e.prototype.findAdjacentTabIndexClosestToEdge=function(n,a,p,_){var c=a.rootLeft-p,h=a.rootRight-p-_,I=c+h,L=c<0||I<0,z=h>0||I>0;return L?n-1:z?n+1:-1},e.prototype.findAdjacentTabIndexClosestToEdgeRTL=function(n,a,p,_,c){var h=c-a.rootLeft-_-p,I=c-a.rootRight-p,L=h+I,z=h>0||L>0,R=I<0||L<0;return z?n+1:R?n-1:-1},e.prototype.getKeyFromEvent=function(n){return Cd.has(n.key)?n.key:kd.get(n.keyCode)},e.prototype.isActivationKey=function(n){return n===ka.SPACE_KEY||n===ka.ENTER_KEY},e.prototype.indexIsInRange=function(n){return n>=0&&n<this.adapter.getTabListLength()},e.prototype.isRTL=function(){return this.adapter.isRTL()},e.prototype.scrollIntoViewImpl=function(n){var a=this.adapter.getScrollPosition(),p=this.adapter.getOffsetWidth(),_=this.adapter.getTabDimensionsAtIndex(n),c=this.findAdjacentTabIndexClosestToEdge(n,_,a,p);if(!!this.indexIsInRange(c)){var h=this.calculateScrollIncrement(n,c,a,p);this.adapter.incrementScroll(h)}},e.prototype.scrollIntoViewImplRTL=function(n){var a=this.adapter.getScrollPosition(),p=this.adapter.getOffsetWidth(),_=this.adapter.getTabDimensionsAtIndex(n),c=this.adapter.getScrollContentWidth(),h=this.findAdjacentTabIndexClosestToEdgeRTL(n,_,a,p,c);if(!!this.indexIsInRange(h)){var I=this.calculateScrollIncrementRTL(n,h,a,p,c);this.adapter.incrementScroll(I)}},e}(Ma);function Z2(o){let e,n,a,p,_,c,h,I,L,z,R,O,Y,ee;const ue=o[23].default,te=pn(ue,o,o[22],null);let de=[{class:p=wi({[o[6]]:!0,"mdc-tab-scroller__scroll-content":!0})},{style:_=Object.entries(o[14]).map(pv).join(" ")},rr(o[16],"scrollContent$")],oe={};for(let fe=0;fe<de.length;fe+=1)oe=Ct(oe,de[fe]);let be=[{class:h=wi(tr({[o[4]]:!0,"mdc-tab-scroller__scroll-area":!0},o[12]))},{style:I=Object.entries(o[13]).map(fv).join(" ")},rr(o[16],"scrollArea$")],qe={};for(let fe=0;fe<be.length;fe+=1)qe=Ct(qe,be[fe]);let Ne=[{class:z=wi(tr({[o[1]]:!0,"mdc-tab-scroller":!0,"mdc-tab-scroller--align-start":o[2]==="start","mdc-tab-scroller--align-end":o[2]==="end","mdc-tab-scroller--align-center":o[2]==="center"},o[11]))},_s(o[16],["scrollArea$","scrollContent$"])],De={};for(let fe=0;fe<Ne.length;fe+=1)De=Ct(De,Ne[fe]);return{c(){e=yi("div"),n=yi("div"),a=yi("div"),te&&te.c(),this.h()},l(fe){e=_i(fe,"DIV",{class:!0});var ct=pi(e);n=_i(ct,"DIV",{class:!0,style:!0});var st=pi(n);a=_i(st,"DIV",{class:!0,style:!0});var Ge=pi(a);te&&te.l(Ge),Ge.forEach(We),st.forEach(We),ct.forEach(We),this.h()},h(){hi(a,oe),hi(n,qe),hi(e,De)},m(fe,ct){Dt(fe,e,ct),sn(e,n),sn(n,a),te&&te.m(a,null),o[24](a),o[26](n),o[32](e),O=!0,Y||(ee=[Ei(c=qn.call(null,a,o[5])),An(a,"transitionend",o[25]),Ei(L=qn.call(null,n,o[3])),An(n,"wheel",o[27],{passive:!0}),An(n,"touchstart",o[28],{passive:!0}),An(n,"pointerdown",o[29]),An(n,"mousedown",o[30]),An(n,"keydown",o[31]),Ei(R=qn.call(null,e,o[0])),Ei(o[15].call(null,e))],Y=!0)},p(fe,ct){te&&te.p&&(!O||ct[0]&4194304)&&fn(te,ue,fe,fe[22],O?gn(ue,fe[22],ct,null):mn(fe[22]),null),hi(a,oe=en(de,[(!O||ct[0]&64&&p!==(p=wi({[fe[6]]:!0,"mdc-tab-scroller__scroll-content":!0})))&&{class:p},(!O||ct[0]&16384&&_!==(_=Object.entries(fe[14]).map(pv).join(" ")))&&{style:_},ct[0]&65536&&rr(fe[16],"scrollContent$")])),c&&zn(c.update)&&ct[0]&32&&c.update.call(null,fe[5]),hi(n,qe=en(be,[(!O||ct[0]&4112&&h!==(h=wi(tr({[fe[4]]:!0,"mdc-tab-scroller__scroll-area":!0},fe[12]))))&&{class:h},(!O||ct[0]&8192&&I!==(I=Object.entries(fe[13]).map(fv).join(" ")))&&{style:I},ct[0]&65536&&rr(fe[16],"scrollArea$")])),L&&zn(L.update)&&ct[0]&8&&L.update.call(null,fe[3]),hi(e,De=en(Ne,[(!O||ct[0]&2054&&z!==(z=wi(tr({[fe[1]]:!0,"mdc-tab-scroller":!0,"mdc-tab-scroller--align-start":fe[2]==="start","mdc-tab-scroller--align-end":fe[2]==="end","mdc-tab-scroller--align-center":fe[2]==="center"},fe[11]))))&&{class:z},ct[0]&65536&&_s(fe[16],["scrollArea$","scrollContent$"])])),R&&zn(R.update)&&ct[0]&1&&R.update.call(null,fe[0])},i(fe){O||(tt(te,fe),O=!0)},o(fe){at(te,fe),O=!1},d(fe){fe&&We(e),te&&te.d(fe),o[24](null),o[26](null),o[32](null),Y=!1,xr(ee)}}}const pv=([o,e])=>`${o}: ${e};`,fv=([o,e])=>`${o}: ${e};`;function W2(o,e,n){const a=["use","class","align","scrollArea$use","scrollArea$class","scrollContent$use","scrollContent$class","getScrollPosition","getScrollContentWidth","incrementScroll","scrollTo","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const{matches:h}=vf,I=Qn(Jn());let{use:L=[]}=e,{class:z=""}=e,{align:R=void 0}=e,{scrollArea$use:O=[]}=e,{scrollArea$class:Y=""}=e,{scrollContent$use:ee=[]}=e,{scrollContent$class:ue=""}=e,te,de,oe,be,qe={},Ne={},De={},fe={};Po(()=>(n(8,de=new q2({eventTargetMatchesSelector:(dt,It)=>h(dt,It),addClass:ct,removeClass:st,addScrollAreaClass:Ge,setScrollAreaStyleProperty:Ue,setScrollContentStyleProperty:Rt,getScrollContentStyleValue:He,setScrollAreaScrollLeft:dt=>n(9,oe.scrollLeft=dt,oe),getScrollAreaScrollLeft:()=>oe.scrollLeft,getScrollContentOffsetWidth:()=>be.offsetWidth,getScrollAreaOffsetWidth:()=>oe.offsetWidth,computeScrollAreaClientRect:()=>oe.getBoundingClientRect(),computeScrollContentClientRect:()=>be.getBoundingClientRect(),computeHorizontalScrollbarHeight:()=>G2(document)})),de.init(),()=>{de.destroy()}));function ct(dt){qe[dt]||n(11,qe[dt]=!0,qe)}function st(dt){(!(dt in qe)||qe[dt])&&n(11,qe[dt]=!1,qe)}function Ge(dt){Ne[dt]||n(12,Ne[dt]=!0,Ne)}function Ue(dt,It){De[dt]!=It&&(It===""||It==null?(delete De[dt],n(13,De)):n(13,De[dt]=It,De))}function Rt(dt,It){fe[dt]!=It&&(It===""||It==null?(delete fe[dt],n(14,fe)):n(14,fe[dt]=It,fe))}function He(dt){return dt in fe?fe[dt]:getComputedStyle(be).getPropertyValue(dt)}function Mt(){return de.getScrollPosition()}function li(){return be.offsetWidth}function Et(dt){de.incrementScroll(dt)}function Gt(dt){de.scrollTo(dt)}function Ye(){return te}function wt(dt){qi[dt?"unshift":"push"](()=>{be=dt,n(10,be)})}const Lt=dt=>de&&de.handleTransitionEnd(dt);function ni(dt){qi[dt?"unshift":"push"](()=>{oe=dt,n(9,oe)})}const Xt=()=>de&&de.handleInteraction(),Ki=()=>de&&de.handleInteraction(),ei=()=>de&&de.handleInteraction(),Jt=()=>de&&de.handleInteraction(),xi=()=>de&&de.handleInteraction();function ai(dt){qi[dt?"unshift":"push"](()=>{te=dt,n(7,te)})}return o.$$set=dt=>{e=Ct(Ct({},e),Yn(dt)),n(16,p=bi(e,a)),"use"in dt&&n(0,L=dt.use),"class"in dt&&n(1,z=dt.class),"align"in dt&&n(2,R=dt.align),"scrollArea$use"in dt&&n(3,O=dt.scrollArea$use),"scrollArea$class"in dt&&n(4,Y=dt.scrollArea$class),"scrollContent$use"in dt&&n(5,ee=dt.scrollContent$use),"scrollContent$class"in dt&&n(6,ue=dt.scrollContent$class),"$$scope"in dt&&n(22,c=dt.$$scope)},[L,z,R,O,Y,ee,ue,te,de,oe,be,qe,Ne,De,fe,I,p,Mt,li,Et,Gt,Ye,c,_,wt,Lt,ni,Xt,Ki,ei,Jt,xi,ai]}class X2 extends wn{constructor(e){super(),En(this,e,W2,Z2,bn,{use:0,class:1,align:2,scrollArea$use:3,scrollArea$class:4,scrollContent$use:5,scrollContent$class:6,getScrollPosition:17,getScrollContentWidth:18,incrementScroll:19,scrollTo:20,getElement:21},null,[-1,-1])}get getScrollPosition(){return this.$$.ctx[17]}get getScrollContentWidth(){return this.$$.ctx[18]}get incrementScroll(){return this.$$.ctx[19]}get scrollTo(){return this.$$.ctx[20]}get getElement(){return this.$$.ctx[21]}}function mv(o,e,n){const a=o.slice();return a[30]=e[n],a}const K2=o=>({tab:o[0]&4}),gv=o=>({tab:o[30]});function yv(o,e){let n,a;const p=e[20].default,_=pn(p,e,e[25],gv);return{key:o,first:null,c(){n=cn(),_&&_.c(),this.h()},l(c){n=cn(),_&&_.l(c),this.h()},h(){this.first=n},m(c,h){Dt(c,n,h),_&&_.m(c,h),a=!0},p(c,h){e=c,_&&_.p&&(!a||h[0]&33554436)&&fn(_,p,e,e[25],a?gn(p,e[25],h,K2):mn(e[25]),gv)},i(c){a||(tt(_,c),a=!0)},o(c){at(_,c),a=!1},d(c){c&&We(n),_&&_.d(c)}}}function J2(o){let e=[],n=new Map,a,p,_=o[2];const c=h=>h[3](h[30]);for(let h=0;h<_.length;h+=1){let I=mv(o,_,h),L=c(I);n.set(L,e[h]=yv(L,I))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();a=cn()},l(h){for(let I=0;I<e.length;I+=1)e[I].l(h);a=cn()},m(h,I){for(let L=0;L<e.length;L+=1)e[L].m(h,I);Dt(h,a,I),p=!0},p(h,I){I[0]&33554444&&(_=h[2],Cr(),e=ex(e,I,c,1,h,_,n,a.parentNode,tx,yv,a,mv),Ar())},i(h){if(!p){for(let I=0;I<_.length;I+=1)tt(e[I]);p=!0}},o(h){for(let I=0;I<e.length;I+=1)at(e[I]);p=!1},d(h){for(let I=0;I<e.length;I+=1)e[I].d(h);h&&We(a)}}}function Y2(o){let e,n,a,p,_,c,h;const I=[rr(o[10],"tabScroller$")];let L={$$slots:{default:[J2]},$$scope:{ctx:o}};for(let O=0;O<I.length;O+=1)L=Ct(L,I[O]);n=new X2({props:L}),o[21](n);let z=[{class:a=wi({[o[1]]:!0,"mdc-tab-bar":!0})},{role:"tablist"},_s(o[10],["tabScroller$"])],R={};for(let O=0;O<z.length;O+=1)R=Ct(R,z[O]);return{c(){e=yi("div"),Li(n.$$.fragment),this.h()},l(O){e=_i(O,"DIV",{class:!0,role:!0});var Y=pi(e);Wi(n.$$.fragment,Y),Y.forEach(We),this.h()},h(){hi(e,R)},m(O,Y){Dt(O,e,Y),zi(n,e,null),o[22](e),_=!0,c||(h=[Ei(p=qn.call(null,e,o[0])),Ei(o[7].call(null,e)),An(e,"SMUITab:mount",o[8]),An(e,"SMUITab:unmount",o[9]),An(e,"SMUITab:interacted",o[23]),An(e,"keydown",o[24])],c=!0)},p(O,Y){const ee=Y[0]&1024?en(I,[Xr(rr(O[10],"tabScroller$"))]):{};Y[0]&33554436&&(ee.$$scope={dirty:Y,ctx:O}),n.$set(ee),hi(e,R=en(z,[(!_||Y[0]&2&&a!==(a=wi({[O[1]]:!0,"mdc-tab-bar":!0})))&&{class:a},{role:"tablist"},Y[0]&1024&&_s(O[10],["tabScroller$"])])),p&&zn(p.update)&&Y[0]&1&&p.update.call(null,O[0])},i(O){_||(tt(n.$$.fragment,O),_=!0)},o(O){at(n.$$.fragment,O),_=!1},d(O){O&&We(e),o[21](null),Di(n),o[22](null),c=!1,xr(h)}}}function Q2(o,e,n){const a=["use","class","tabs","key","focusOnActivate","focusOnProgrammatic","useAutomaticActivation","active","scrollIntoView","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{tabs:z=[]}=e,{key:R=Ye=>Ye}=e,{focusOnActivate:O=!0}=e,{focusOnProgrammatic:Y=!1}=e,{useAutomaticActivation:ee=!0}=e,{active:ue=void 0}=e,te,de,oe,be=z.indexOf(ue),qe={},Ne=new WeakMap,De=!1;sr("SMUI:tab:focusOnActivate",O),sr("SMUI:tab:initialActive",ue),Po(()=>(n(4,de=new H2({scrollTo:Ye=>oe.scrollTo(Ye),incrementScroll:Ye=>oe.incrementScroll(Ye),getScrollPosition:()=>oe.getScrollPosition(),getScrollContentWidth:()=>oe.getScrollContentWidth(),getOffsetWidth:()=>He().offsetWidth,isRTL:()=>getComputedStyle(He()).getPropertyValue("direction")==="rtl",setActiveTab:Ye=>{n(11,ue=z[Ye]),n(17,be=Ye),de.activateTab(Ye)},activateTabAtIndex:(Ye,wt)=>{var Lt;return(Lt=st(z[Ye]))===null||Lt===void 0?void 0:Lt.activate(wt,De)},deactivateTabAtIndex:Ye=>{var wt;return(wt=st(z[Ye]))===null||wt===void 0?void 0:wt.deactivate()},focusTabAtIndex:Ye=>{var wt;return(wt=st(z[Ye]))===null||wt===void 0?void 0:wt.focus()},getTabIndicatorClientRectAtIndex:Ye=>{var wt,Lt;return(Lt=(wt=st(z[Ye]))===null||wt===void 0?void 0:wt.computeIndicatorClientRect())!==null&&Lt!==void 0?Lt:new DOMRect},getTabDimensionsAtIndex:Ye=>{var wt,Lt;return(Lt=(wt=st(z[Ye]))===null||wt===void 0?void 0:wt.computeDimensions())!==null&&Lt!==void 0?Lt:{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:()=>{var Ye;for(let wt=0;wt<z.length;wt++)if(!((Ye=st(z[wt]))===null||Ye===void 0)&&Ye.active)return wt;return-1},getFocusedTabIndex:()=>{const Ye=z.map(Lt=>{var ni;return(ni=st(Lt))===null||ni===void 0?void 0:ni.element}),wt=document.activeElement;return Ye.indexOf(wt)},getIndexOfTabById:Ye=>z.indexOf(Ye),getTabListLength:()=>z.length,notifyTabActivated:Ye=>Pn(He(),"SMUITabBar:activated",{index:Ye},void 0,!0)})),de.init(),()=>{de.destroy()}));function fe(Ye){const wt=Ye.detail;Ge(wt.tabId,wt)}function ct(Ye){const wt=Ye.detail;Ue(wt.tabId)}function st(Ye){return Ye instanceof Object?Ne.get(Ye):qe[Ye]}function Ge(Ye,wt){Ye instanceof Object?(Ne.set(Ye,wt),n(19,Ne)):(n(18,qe[Ye]=wt,qe),n(18,qe))}function Ue(Ye){Ye instanceof Object?(Ne.delete(Ye),n(19,Ne)):(delete qe[Ye],n(18,qe))}function Rt(Ye){de.scrollIntoView(Ye)}function He(){return te}function Mt(Ye){qi[Ye?"unshift":"push"](()=>{oe=Ye,n(6,oe)})}function li(Ye){qi[Ye?"unshift":"push"](()=>{te=Ye,n(5,te)})}const Et=Ye=>de&&de.handleTabInteraction(Ye),Gt=Ye=>de&&de.handleKeyDown(Ye);return o.$$set=Ye=>{e=Ct(Ct({},e),Yn(Ye)),n(10,p=bi(e,a)),"use"in Ye&&n(0,I=Ye.use),"class"in Ye&&n(1,L=Ye.class),"tabs"in Ye&&n(2,z=Ye.tabs),"key"in Ye&&n(3,R=Ye.key),"focusOnActivate"in Ye&&n(12,O=Ye.focusOnActivate),"focusOnProgrammatic"in Ye&&n(13,Y=Ye.focusOnProgrammatic),"useAutomaticActivation"in Ye&&n(14,ee=Ye.useAutomaticActivation),"active"in Ye&&n(11,ue=Ye.active),"$$scope"in Ye&&n(25,c=Ye.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&141332&&ue!==z[be]&&(n(17,be=z.indexOf(ue)),de&&(De=!Y,de.activateTab(be),De=!1)),o.$$.dirty[0]&917508&&z.length){const Ye=z[0]instanceof Object?Ne.get(z[0]):qe[z[0]];Ye&&Ye.forceAccessible(be===-1)}o.$$.dirty[0]&16400&&de&&de.setUseAutomaticActivation(ee)},[I,L,z,R,de,te,oe,h,fe,ct,p,ue,O,Y,ee,Rt,He,be,qe,Ne,_,Mt,li,Et,Gt,c]}class $2 extends wn{constructor(e){super(),En(this,e,Q2,Y2,bn,{use:0,class:1,tabs:2,key:3,focusOnActivate:12,focusOnProgrammatic:13,useAutomaticActivation:14,active:11,scrollIntoView:15,getElement:16},null,[-1,-1])}get scrollIntoView(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}const bp=eu(null),_v=eu(null),zy=eu(null),Dy=eu(null);function eE(o){let e;const n=o[37].default,a=pn(n,o,o[43],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_[1]&4096)&&fn(a,n,p,p[43],e?gn(n,p[43],_,null):mn(p[43]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function tE(o){let e,n,a;const p=[{use:[o[17],...o[0]]},{class:wi({[o[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":o[2],"mdc-deprecated-list--dense":o[3],"mdc-deprecated-list--textual-list":o[4],"mdc-deprecated-list--avatar-list":o[5]||o[18],"mdc-deprecated-list--icon-list":o[6],"mdc-deprecated-list--image-list":o[7],"mdc-deprecated-list--thumbnail-list":o[8],"mdc-deprecated-list--video-list":o[9],"mdc-deprecated-list--two-line":o[10],"smui-list--three-line":o[11]&&!o[10]})},{role:o[15]},o[23]];var _=o[12];function c(h){let I={$$slots:{default:[eE]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[38](e),e.$on("keydown",o[39]),e.$on("focusin",o[40]),e.$on("focusout",o[41]),e.$on("click",o[42]),e.$on("SMUIListItem:mount",o[19]),e.$on("SMUIListItem:unmount",o[20]),e.$on("SMUI:action",o[21])),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,I){const L=I[0]&8818687?en(p,[I[0]&131073&&{use:[h[17],...h[0]]},I[0]&266238&&{class:wi({[h[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":h[2],"mdc-deprecated-list--dense":h[3],"mdc-deprecated-list--textual-list":h[4],"mdc-deprecated-list--avatar-list":h[5]||h[18],"mdc-deprecated-list--icon-list":h[6],"mdc-deprecated-list--image-list":h[7],"mdc-deprecated-list--thumbnail-list":h[8],"mdc-deprecated-list--video-list":h[9],"mdc-deprecated-list--two-line":h[10],"smui-list--three-line":h[11]&&!h[10]})},I[0]&32768&&{role:h[15]},I[0]&8388608&&Xr(h[23])]):{};if(I[1]&4096&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[12])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[38](e),e.$on("keydown",h[39]),e.$on("focusin",h[40]),e.$on("focusout",h[41]),e.$on("click",h[42]),e.$on("SMUIListItem:mount",h[19]),e.$on("SMUIListItem:unmount",h[20]),e.$on("SMUI:action",h[21]),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[38](null),h&&We(n),e&&Di(e,h)}}}function iE(o,e,n){const a=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;var h;const{closest:I,matches:L}=vf,z=Qn(Jn());let{use:R=[]}=e,{class:O=""}=e,{nonInteractive:Y=!1}=e,{dense:ee=!1}=e,{textualList:ue=!1}=e,{avatarList:te=!1}=e,{iconList:de=!1}=e,{imageList:oe=!1}=e,{thumbnailList:be=!1}=e,{videoList:qe=!1}=e,{twoLine:Ne=!1}=e,{threeLine:De=!1}=e,{vertical:fe=!0}=e,{wrapFocus:ct=(h=Or("SMUI:list:wrapFocus"))!==null&&h!==void 0?h:!1}=e,{singleSelection:st=!1}=e,{selectedIndex:Ge=-1}=e,{radioList:Ue=!1}=e,{checkList:Rt=!1}=e,{hasTypeahead:He=!1}=e,Mt,li,Et=[],Gt=Or("SMUI:list:role"),Ye=Or("SMUI:list:nav");const wt=new WeakMap;let Lt=Or("SMUI:dialog:selection"),ni=Or("SMUI:addLayoutListener"),Xt,{component:Ki=Ye?Ew:Iw}=e;sr("SMUI:list:nonInteractive",Y),sr("SMUI:separator:context","list"),Gt||(st?(Gt="listbox",sr("SMUI:list:item:role","option")):Ue?(Gt="radiogroup",sr("SMUI:list:item:role","radio")):Rt?(Gt="group",sr("SMUI:list:item:role","checkbox")):(Gt="list",sr("SMUI:list:item:role",void 0))),ni&&(Xt=ni(Zn)),Po(()=>{n(13,li=new y2({addClassForElementIndex:St,focusItemAtIndex:dt,getAttributeForElementIndex:(Ft,Ji)=>{var Gn,Wn;return(Wn=(Gn=ai()[Ft])===null||Gn===void 0?void 0:Gn.getAttr(Ji))!==null&&Wn!==void 0?Wn:null},getFocusedElementIndex:()=>document.activeElement?ai().map(Ft=>Ft.element).indexOf(document.activeElement):-1,getListItemCount:()=>Et.length,getPrimaryTextAtIndex:ln,hasCheckboxAtIndex:Ft=>{var Ji,Gn;return(Gn=(Ji=ai()[Ft])===null||Ji===void 0?void 0:Ji.hasCheckbox)!==null&&Gn!==void 0?Gn:!1},hasRadioAtIndex:Ft=>{var Ji,Gn;return(Gn=(Ji=ai()[Ft])===null||Ji===void 0?void 0:Ji.hasRadio)!==null&&Gn!==void 0?Gn:!1},isCheckboxCheckedAtIndex:Ft=>{var Ji;const Gn=ai()[Ft];return(Ji=(Gn==null?void 0:Gn.hasCheckbox)&&Gn.checked)!==null&&Ji!==void 0?Ji:!1},isFocusInsideList:()=>Mt!=null&&jn()!==document.activeElement&&jn().contains(document.activeElement),isRootFocused:()=>Mt!=null&&document.activeElement===jn(),listItemAtIndexHasClass:It,notifyAction:Ft=>{n(24,Ge=Ft),Mt!=null&&Pn(jn(),"SMUIList:action",{index:Ft},void 0,!0)},removeClassForElementIndex:Yi,setAttributeForElementIndex:Qt,setCheckedCheckboxOrRadioAtIndex:(Ft,Ji)=>{ai()[Ft].checked=Ji},setTabIndexForListItemChildren:(Ft,Ji)=>{const Gn=ai()[Ft],Wn="button:not(:disabled), a";Array.prototype.forEach.call(Gn.element.querySelectorAll(Wn),_o=>{_o.setAttribute("tabindex",Ji)})}}));const Ze={get element(){return jn()},get items(){return Et},get typeaheadInProgress(){return li.isTypeaheadInProgress()},typeaheadMatchItem(Ft,Ji){return li.typeaheadMatchItem(Ft,Ji,!0)},getOrderedList:ai,focusItemAtIndex:dt,addClassForElementIndex:St,removeClassForElementIndex:Yi,setAttributeForElementIndex:Qt,removeAttributeForElementIndex:gt,getAttributeFromElementIndex:Oi,getPrimaryTextAtIndex:ln};return Pn(jn(),"SMUIList:mount",Ze),li.init(),()=>{li.destroy()}}),eh(()=>{Xt&&Xt()});function ei(Ze){Et.push(Ze.detail),wt.set(Ze.detail.element,Ze.detail),st&&Ze.detail.selected&&n(24,Ge=Cn(Ze.detail.element)),Ze.stopPropagation()}function Jt(Ze){var Ft;const Ji=(Ft=Ze.detail&&Et.indexOf(Ze.detail))!==null&&Ft!==void 0?Ft:-1;Ji!==-1&&(Et.splice(Ji,1),Et=Et,wt.delete(Ze.detail.element)),Ze.stopPropagation()}function xi(Ze){if(Ue||Rt){const Ft=Cn(Ze.target);if(Ft!==-1){const Ji=ai()[Ft];Ji&&(Ue&&!Ji.checked||Rt)&&(Ji.checked=!Ji.checked,Ji.activateRipple(),window.requestAnimationFrame(()=>{Ji.deactivateRipple()}))}}}function ai(){return Mt==null?[]:[...jn().children].map(Ze=>wt.get(Ze)).filter(Ze=>Ze&&Ze._smui_list_item_accessor)}function dt(Ze){const Ft=ai()[Ze];Ft&&"focus"in Ft.element&&Ft.element.focus()}function It(Ze,Ft){var Ji;const Gn=ai()[Ze];return(Ji=Gn&&Gn.hasClass(Ft))!==null&&Ji!==void 0?Ji:!1}function St(Ze,Ft){const Ji=ai()[Ze];Ji&&Ji.addClass(Ft)}function Yi(Ze,Ft){const Ji=ai()[Ze];Ji&&Ji.removeClass(Ft)}function Qt(Ze,Ft,Ji){const Gn=ai()[Ze];Gn&&Gn.addAttr(Ft,Ji)}function gt(Ze,Ft){const Ji=ai()[Ze];Ji&&Ji.removeAttr(Ft)}function Oi(Ze,Ft){const Ji=ai()[Ze];return Ji?Ji.getAttr(Ft):null}function ln(Ze){var Ft;const Ji=ai()[Ze];return(Ft=Ji&&Ji.getPrimaryText())!==null&&Ft!==void 0?Ft:""}function Cn(Ze){const Ft=I(Ze,".mdc-deprecated-list-item, .mdc-deprecated-list");return Ft&&L(Ft,".mdc-deprecated-list-item")?ai().map(Ji=>Ji==null?void 0:Ji.element).indexOf(Ft):-1}function Zn(){return li.layout()}function Nr(Ze,Ft){return li.setEnabled(Ze,Ft)}function Kr(){return li.isTypeaheadInProgress()}function At(){return li.getSelectedIndex()}function Ni(){return li.getFocusedItemIndex()}function jn(){return Mt.getElement()}function rn(Ze){qi[Ze?"unshift":"push"](()=>{Mt=Ze,n(14,Mt)})}const $n=Ze=>li&&li.handleKeydown(Ze,Ze.target.classList.contains("mdc-deprecated-list-item"),Cn(Ze.target)),Ln=Ze=>li&&li.handleFocusIn(Cn(Ze.target)),zt=Ze=>li&&li.handleFocusOut(Cn(Ze.target)),Ui=Ze=>li&&li.handleClick(Cn(Ze.target),!L(Ze.target,'input[type="checkbox"], input[type="radio"]'));return o.$$set=Ze=>{e=Ct(Ct({},e),Yn(Ze)),n(23,p=bi(e,a)),"use"in Ze&&n(0,R=Ze.use),"class"in Ze&&n(1,O=Ze.class),"nonInteractive"in Ze&&n(2,Y=Ze.nonInteractive),"dense"in Ze&&n(3,ee=Ze.dense),"textualList"in Ze&&n(4,ue=Ze.textualList),"avatarList"in Ze&&n(5,te=Ze.avatarList),"iconList"in Ze&&n(6,de=Ze.iconList),"imageList"in Ze&&n(7,oe=Ze.imageList),"thumbnailList"in Ze&&n(8,be=Ze.thumbnailList),"videoList"in Ze&&n(9,qe=Ze.videoList),"twoLine"in Ze&&n(10,Ne=Ze.twoLine),"threeLine"in Ze&&n(11,De=Ze.threeLine),"vertical"in Ze&&n(25,fe=Ze.vertical),"wrapFocus"in Ze&&n(26,ct=Ze.wrapFocus),"singleSelection"in Ze&&n(27,st=Ze.singleSelection),"selectedIndex"in Ze&&n(24,Ge=Ze.selectedIndex),"radioList"in Ze&&n(28,Ue=Ze.radioList),"checkList"in Ze&&n(29,Rt=Ze.checkList),"hasTypeahead"in Ze&&n(30,He=Ze.hasTypeahead),"component"in Ze&&n(12,Ki=Ze.component),"$$scope"in Ze&&n(43,c=Ze.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&33562624&&li&&li.setVerticalOrientation(fe),o.$$.dirty[0]&67117056&&li&&li.setWrapFocus(ct),o.$$.dirty[0]&1073750016&&li&&li.setHasTypeahead(He),o.$$.dirty[0]&134225920&&li&&li.setSingleSelection(st),o.$$.dirty[0]&151003136&&li&&st&&At()!==Ge&&li.setSelectedIndex(Ge)},[R,O,Y,ee,ue,te,de,oe,be,qe,Ne,De,Ki,li,Mt,Gt,L,z,Lt,ei,Jt,xi,Cn,p,Ge,fe,ct,st,Ue,Rt,He,Zn,Nr,Kr,At,Ni,jn,_,rn,$n,Ln,zt,Ui,c]}class s1 extends wn{constructor(e){super(),En(this,e,iE,tE,bn,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function vv(o){let e;return{c(){e=yi("span"),this.h()},l(n){e=_i(n,"SPAN",{class:!0}),pi(e).forEach(We),this.h()},h(){ii(e,"class","mdc-deprecated-list-item__ripple")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function nE(o){let e,n,a=o[7]&&vv();const p=o[32].default,_=pn(p,o,o[35],null);return{c(){a&&a.c(),e=cn(),_&&_.c()},l(c){a&&a.l(c),e=cn(),_&&_.l(c)},m(c,h){a&&a.m(c,h),Dt(c,e,h),_&&_.m(c,h),n=!0},p(c,h){c[7]?a||(a=vv(),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),_&&_.p&&(!n||h[1]&16)&&fn(_,p,c,c[35],n?gn(p,c[35],h,null):mn(c[35]),null)},i(c){n||(tt(_,c),n=!0)},o(c){at(_,c),n=!1},d(c){a&&a.d(c),c&&We(e),_&&_.d(c)}}}function rE(o){let e,n,a;const p=[{use:[...o[6]?[]:[[$c,{ripple:!o[14],unbounded:!1,color:(o[1]||o[0])&&o[5]==null?"primary":o[5],disabled:o[9],addClass:o[22],removeClass:o[23],addStyle:o[24]}]],o[20],...o[2]]},{class:wi(tr({[o[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":o[1],"mdc-deprecated-list-item--selected":o[0],"mdc-deprecated-list-item--disabled":o[9],"mdc-menu-item--selected":!o[21]&&o[8]==="menuitem"&&o[0],"smui-menu-item--non-interactive":o[6]},o[16]))},{style:Object.entries(o[17]).map(bv).concat([o[4]]).join(" ")},o[21]&&o[1]?{"aria-current":"page"}:{},o[21]?{}:{role:o[8]},!o[21]&&o[8]==="option"?{"aria-selected":o[0]?"true":"false"}:{},!o[21]&&(o[8]==="radio"||o[8]==="checkbox")?{"aria-checked":o[14]&&o[14].checked?"true":"false"}:{},o[21]?{}:{"aria-disabled":o[9]?"true":"false"},{"data-menu-item-skip-restore-focus":o[10]||void 0},{tabindex:o[19]},{href:o[11]},o[18],o[27]];var _=o[12];function c(h){let I={$$slots:{default:[nE]},$$scope:{ctx:h}};for(let L=0;L<p.length;L+=1)I=Ct(I,p[L]);return{props:I}}return _&&(e=new _(c(o)),o[33](e),e.$on("click",o[13]),e.$on("keydown",o[25]),e.$on("SMUIGenericInput:mount",o[26]),e.$on("SMUIGenericInput:unmount",o[34])),{c(){e&&Li(e.$$.fragment),n=cn()},l(h){e&&Wi(e.$$.fragment,h),n=cn()},m(h,I){e&&zi(e,h,I),Dt(h,n,I),a=!0},p(h,I){const L=I[0]&167726975?en(p,[I[0]&30425703&&{use:[...h[6]?[]:[[$c,{ripple:!h[14],unbounded:!1,color:(h[1]||h[0])&&h[5]==null?"primary":h[5],disabled:h[9],addClass:h[22],removeClass:h[23],addStyle:h[24]}]],h[20],...h[2]]},I[0]&2163531&&{class:wi(tr({[h[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":h[1],"mdc-deprecated-list-item--selected":h[0],"mdc-deprecated-list-item--disabled":h[9],"mdc-menu-item--selected":!h[21]&&h[8]==="menuitem"&&h[0],"smui-menu-item--non-interactive":h[6]},h[16]))},I[0]&131088&&{style:Object.entries(h[17]).map(bv).concat([h[4]]).join(" ")},I[0]&2097154&&Xr(h[21]&&h[1]?{"aria-current":"page"}:{}),I[0]&2097408&&Xr(h[21]?{}:{role:h[8]}),I[0]&2097409&&Xr(!h[21]&&h[8]==="option"?{"aria-selected":h[0]?"true":"false"}:{}),I[0]&2113792&&Xr(!h[21]&&(h[8]==="radio"||h[8]==="checkbox")?{"aria-checked":h[14]&&h[14].checked?"true":"false"}:{}),I[0]&2097664&&Xr(h[21]?{}:{"aria-disabled":h[9]?"true":"false"}),I[0]&1024&&{"data-menu-item-skip-restore-focus":h[10]||void 0},I[0]&524288&&{tabindex:h[19]},I[0]&2048&&{href:h[11]},I[0]&262144&&Xr(h[18]),I[0]&134217728&&Xr(h[27])]):{};if(I[0]&128|I[1]&16&&(L.$$scope={dirty:I,ctx:h}),_!==(_=h[12])){if(e){Cr();const z=e;at(z.$$.fragment,1,0,()=>{Di(z,1)}),Ar()}_?(e=new _(c(h)),h[33](e),e.$on("click",h[13]),e.$on("keydown",h[25]),e.$on("SMUIGenericInput:mount",h[26]),e.$on("SMUIGenericInput:unmount",h[34]),Li(e.$$.fragment),tt(e.$$.fragment,1),zi(e,n.parentNode,n)):e=null}else _&&e.$set(L)},i(h){a||(e&&tt(e.$$.fragment,h),a=!0)},o(h){e&&at(e.$$.fragment,h),a=!1},d(h){o[33](null),h&&We(n),e&&Di(e,h)}}}let oE=0;const bv=([o,e])=>`${o}: ${e};`;function aE(o,e,n){let a;const p=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let _=bi(e,p),{$$slots:c={},$$scope:h}=e;var I;const L=Qn(Jn());let z=()=>{};function R(gt){return gt===z}let{use:O=[]}=e,{class:Y=""}=e,{style:ee=""}=e,{color:ue=void 0}=e,{nonInteractive:te=(I=Or("SMUI:list:nonInteractive"))!==null&&I!==void 0?I:!1}=e;sr("SMUI:list:nonInteractive",void 0);let{ripple:de=!te}=e,{activated:oe=!1}=e,{role:be=Or("SMUI:list:item:role")}=e;sr("SMUI:list:item:role",void 0);let{selected:qe=!1}=e,{disabled:Ne=!1}=e,{skipRestoreFocus:De=!1}=e,{tabindex:fe=z}=e,{inputId:ct="SMUI-form-field-list-"+oE++}=e,{href:st=void 0}=e,Ge,Ue={},Rt={},He={},Mt,li,Et=Or("SMUI:list:item:nav"),{component:Gt=Et?st?Py:vp:xw}=e;sr("SMUI:generic:input:props",{id:ct}),sr("SMUI:separator:context",void 0),Po(()=>{if(!qe&&!te){let Oi=!0,ln=Ge;for(;ln.previousSibling;)if(ln=ln.previousSibling,ln.nodeType===1&&ln.classList.contains("mdc-deprecated-list-item")&&!ln.classList.contains("mdc-deprecated-list-item--disabled")){Oi=!1;break}Oi&&(li=window.requestAnimationFrame(Jt))}const gt={_smui_list_item_accessor:!0,get element(){return St()},get selected(){return qe},set selected(Oi){n(0,qe=Oi)},hasClass:Ye,addClass:wt,removeClass:Lt,getAttr:Xt,addAttr:Ki,removeAttr:ei,getPrimaryText:It,get checked(){var Oi;return(Oi=Mt&&Mt.checked)!==null&&Oi!==void 0?Oi:!1},set checked(Oi){Mt&&n(14,Mt.checked=!!Oi,Mt)},get hasCheckbox(){return!!(Mt&&"_smui_checkbox_accessor"in Mt)},get hasRadio(){return!!(Mt&&"_smui_radio_accessor"in Mt)},activateRipple(){Mt&&Mt.activateRipple()},deactivateRipple(){Mt&&Mt.deactivateRipple()},getValue(){return _.value},action:dt,get tabindex(){return a},set tabindex(Oi){n(28,fe=Oi)},get disabled(){return Ne},get activated(){return oe},set activated(Oi){n(1,oe=Oi)}};return Pn(St(),"SMUIListItem:mount",gt),()=>{Pn(St(),"SMUIListItem:unmount",gt)}}),eh(()=>{li&&window.cancelAnimationFrame(li)});function Ye(gt){return gt in Ue?Ue[gt]:St().classList.contains(gt)}function wt(gt){Ue[gt]||n(16,Ue[gt]=!0,Ue)}function Lt(gt){(!(gt in Ue)||Ue[gt])&&n(16,Ue[gt]=!1,Ue)}function ni(gt,Oi){Rt[gt]!=Oi&&(Oi===""||Oi==null?(delete Rt[gt],n(17,Rt)):n(17,Rt[gt]=Oi,Rt))}function Xt(gt){var Oi;return gt in He?(Oi=He[gt])!==null&&Oi!==void 0?Oi:null:St().getAttribute(gt)}function Ki(gt,Oi){He[gt]!==Oi&&n(18,He[gt]=Oi,He)}function ei(gt){(!(gt in He)||He[gt]!=null)&&n(18,He[gt]=void 0,He)}function Jt(){let gt=!0,Oi=Ge.getElement();for(;Oi.nextElementSibling;)if(Oi=Oi.nextElementSibling,Oi.nodeType===1&&Oi.classList.contains("mdc-deprecated-list-item")){const ln=Oi.attributes.getNamedItem("tabindex");if(ln&&ln.value==="0"){gt=!1;break}}gt&&n(19,a=0)}function xi(gt){const Oi=gt.key==="Enter",ln=gt.key==="Space";(Oi||ln)&&dt(gt)}function ai(gt){("_smui_checkbox_accessor"in gt.detail||"_smui_radio_accessor"in gt.detail)&&n(14,Mt=gt.detail)}function dt(gt){Ne||Pn(St(),"SMUI:action",gt)}function It(){var gt,Oi,ln;const Cn=St(),Zn=Cn.querySelector(".mdc-deprecated-list-item__primary-text");if(Zn)return(gt=Zn.textContent)!==null&&gt!==void 0?gt:"";const Nr=Cn.querySelector(".mdc-deprecated-list-item__text");return Nr?(Oi=Nr.textContent)!==null&&Oi!==void 0?Oi:"":(ln=Cn.textContent)!==null&&ln!==void 0?ln:""}function St(){return Ge.getElement()}function Yi(gt){qi[gt?"unshift":"push"](()=>{Ge=gt,n(15,Ge)})}const Qt=()=>n(14,Mt=void 0);return o.$$set=gt=>{e=Ct(Ct({},e),Yn(gt)),n(27,_=bi(e,p)),"use"in gt&&n(2,O=gt.use),"class"in gt&&n(3,Y=gt.class),"style"in gt&&n(4,ee=gt.style),"color"in gt&&n(5,ue=gt.color),"nonInteractive"in gt&&n(6,te=gt.nonInteractive),"ripple"in gt&&n(7,de=gt.ripple),"activated"in gt&&n(1,oe=gt.activated),"role"in gt&&n(8,be=gt.role),"selected"in gt&&n(0,qe=gt.selected),"disabled"in gt&&n(9,Ne=gt.disabled),"skipRestoreFocus"in gt&&n(10,De=gt.skipRestoreFocus),"tabindex"in gt&&n(28,fe=gt.tabindex),"inputId"in gt&&n(29,ct=gt.inputId),"href"in gt&&n(11,st=gt.href),"component"in gt&&n(12,Gt=gt.component),"$$scope"in gt&&n(35,h=gt.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&268452417&&n(19,a=R(fe)?!te&&!Ne&&(qe||Mt&&Mt.checked)?0:-1:fe)},[qe,oe,O,Y,ee,ue,te,de,be,Ne,De,st,Gt,dt,Mt,Ge,Ue,Rt,He,a,L,Et,wt,Lt,ni,xi,ai,_,fe,ct,It,St,c,Yi,Qt,h]}class sE extends wn{constructor(e){super(),En(this,e,aE,rE,bn,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}ns({class:"mdc-deprecated-list-item__text",component:vp});ns({class:"mdc-deprecated-list-item__primary-text",component:vp});ns({class:"mdc-deprecated-list-item__secondary-text",component:vp});function lE(o){let e,n,a,p,_,c;const h=o[8].default,I=pn(h,o,o[7],null);let L=[{class:n=wi({[o[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":o[4]})},o[5]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("span"),I&&I.c(),this.h()},l(R){e=_i(R,"SPAN",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[9](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[3].call(null,e))],_=!0)},p(R,[O]){I&&I.p&&(!p||O&128)&&fn(I,h,R,R[7],p?gn(h,R[7],O,null):mn(R[7]),null),hi(e,z=en(L,[(!p||O&2&&n!==(n=wi({[R[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":R[4]})))&&{class:n},O&32&&R[5]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[9](null),_=!1,xr(c)}}}function uE(o,e,n){const a=["use","class","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,z,R=Or("SMUI:list:graphic:menu-selection-group");function O(){return z}function Y(ee){qi[ee?"unshift":"push"](()=>{z=ee,n(2,z)})}return o.$$set=ee=>{e=Ct(Ct({},e),Yn(ee)),n(5,p=bi(e,a)),"use"in ee&&n(0,I=ee.use),"class"in ee&&n(1,L=ee.class),"$$scope"in ee&&n(7,c=ee.$$scope)},[I,L,z,h,R,p,O,c,_,Y]}class cE extends wn{constructor(e){super(),En(this,e,uE,lE,bn,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}ns({class:"mdc-deprecated-list-item__meta",component:vp});ns({class:"mdc-deprecated-list-group",component:_p});ns({class:"mdc-deprecated-list-group__subheader",component:_w});const bf=sE,hE=cE;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dE={ROOT:"mdc-form-field"},pE={LABEL_SELECTOR:".mdc-form-field > label"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var fE=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.click=function(){a.handleClick()},a}return Object.defineProperty(e,"cssClasses",{get:function(){return dE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return pE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},e.prototype.handleClick=function(){var n=this;this.adapter.activateInputRipple(),requestAnimationFrame(function(){n.adapter.deactivateInputRipple()})},e}(Ma);const mE=o=>({}),xv=o=>({});function gE(o){let e,n,a,p,_,c,h,I,L;const z=o[13].default,R=pn(z,o,o[12],null),O=o[13].label,Y=pn(O,o,o[12],xv);let ee=[{for:o[4]},rr(o[10],"label$")],ue={};for(let oe=0;oe<ee.length;oe+=1)ue=Ct(ue,ee[oe]);let te=[{class:_=wi({[o[1]]:!0,"mdc-form-field":!0,"mdc-form-field--align-end":o[2]==="end","mdc-form-field--nowrap":o[3]})},_s(o[10],["label$"])],de={};for(let oe=0;oe<te.length;oe+=1)de=Ct(de,te[oe]);return{c(){e=yi("div"),R&&R.c(),n=Bn(),a=yi("label"),Y&&Y.c(),this.h()},l(oe){e=_i(oe,"DIV",{class:!0});var be=pi(e);R&&R.l(be),n=Fn(be),a=_i(be,"LABEL",{for:!0});var qe=pi(a);Y&&Y.l(qe),qe.forEach(We),be.forEach(We),this.h()},h(){hi(a,ue),hi(e,de)},m(oe,be){Dt(oe,e,be),R&&R.m(e,null),sn(e,n),sn(e,a),Y&&Y.m(a,null),o[14](a),o[15](e),h=!0,I||(L=[Ei(p=qn.call(null,a,o[5])),Ei(c=qn.call(null,e,o[0])),Ei(o[9].call(null,e)),An(e,"SMUIGenericInput:mount",o[16]),An(e,"SMUIGenericInput:unmount",o[17])],I=!0)},p(oe,[be]){R&&R.p&&(!h||be&4096)&&fn(R,z,oe,oe[12],h?gn(z,oe[12],be,null):mn(oe[12]),null),Y&&Y.p&&(!h||be&4096)&&fn(Y,O,oe,oe[12],h?gn(O,oe[12],be,mE):mn(oe[12]),xv),hi(a,ue=en(ee,[(!h||be&16)&&{for:oe[4]},be&1024&&rr(oe[10],"label$")])),p&&zn(p.update)&&be&32&&p.update.call(null,oe[5]),hi(e,de=en(te,[(!h||be&14&&_!==(_=wi({[oe[1]]:!0,"mdc-form-field":!0,"mdc-form-field--align-end":oe[2]==="end","mdc-form-field--nowrap":oe[3]})))&&{class:_},be&1024&&_s(oe[10],["label$"])])),c&&zn(c.update)&&be&1&&c.update.call(null,oe[0])},i(oe){h||(tt(R,oe),tt(Y,oe),h=!0)},o(oe){at(R,oe),at(Y,oe),h=!1},d(oe){oe&&We(e),R&&R.d(oe),Y&&Y.d(oe),o[14](null),o[15](null),I=!1,xr(L)}}}let yE=0;function _E(o,e,n){const a=["use","class","align","noWrap","inputId","label$use","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{align:z="start"}=e,{noWrap:R=!1}=e,{inputId:O="SMUI-form-field-"+yE++}=e,{label$use:Y=[]}=e,ee,ue,te,de;sr("SMUI:generic:input:props",{id:O}),Po(()=>(ue=new fE({activateInputRipple:()=>{de&&de.activateRipple()},deactivateInputRipple:()=>{de&&de.deactivateRipple()},deregisterInteractionHandler:(fe,ct)=>{te.removeEventListener(fe,ct)},registerInteractionHandler:(fe,ct)=>{te.addEventListener(fe,ct)}}),ue.init(),()=>{ue.destroy()}));function oe(){return ee}function be(fe){qi[fe?"unshift":"push"](()=>{te=fe,n(7,te)})}function qe(fe){qi[fe?"unshift":"push"](()=>{ee=fe,n(6,ee)})}const Ne=fe=>n(8,de=fe.detail),De=()=>n(8,de=void 0);return o.$$set=fe=>{e=Ct(Ct({},e),Yn(fe)),n(10,p=bi(e,a)),"use"in fe&&n(0,I=fe.use),"class"in fe&&n(1,L=fe.class),"align"in fe&&n(2,z=fe.align),"noWrap"in fe&&n(3,R=fe.noWrap),"inputId"in fe&&n(4,O=fe.inputId),"label$use"in fe&&n(5,Y=fe.label$use),"$$scope"in fe&&n(12,c=fe.$$scope)},[I,L,z,R,O,Y,ee,te,de,h,p,oe,c,_,be,qe,Ne,De]}class _y extends wn{constructor(e){super(),En(this,e,_E,gE,bn,{use:0,class:1,align:2,noWrap:3,inputId:4,label$use:5,getElement:11})}get getElement(){return this.$$.ctx[11]}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sf={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},Kl={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",DATA_INDETERMINATE_ATTR:"data-indeterminate",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},wv={ANIM_END_LATCH_MS:250};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vE=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.currentCheckState=Kl.TRANSITION_STATE_INIT,a.currentAnimationClass="",a.animEndLatchTimer=0,a.enableAnimationEndHandler=!1,a}return Object.defineProperty(e,"cssClasses",{get:function(){return sf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Kl},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return wv},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.currentCheckState=this.determineCheckState(),this.updateAriaChecked(),this.adapter.addClass(sf.UPGRADED)},e.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer)},e.prototype.setDisabled=function(n){this.adapter.setNativeControlDisabled(n),n?this.adapter.addClass(sf.DISABLED):this.adapter.removeClass(sf.DISABLED)},e.prototype.handleAnimationEnd=function(){var n=this;!this.enableAnimationEndHandler||(clearTimeout(this.animEndLatchTimer),this.animEndLatchTimer=setTimeout(function(){n.adapter.removeClass(n.currentAnimationClass),n.enableAnimationEndHandler=!1},wv.ANIM_END_LATCH_MS))},e.prototype.handleChange=function(){this.transitionCheckState()},e.prototype.transitionCheckState=function(){if(!!this.adapter.hasNativeControl()){var n=this.currentCheckState,a=this.determineCheckState();if(n!==a){this.updateAriaChecked();var p=Kl.TRANSITION_STATE_UNCHECKED,_=sf.SELECTED;a===p?this.adapter.removeClass(_):this.adapter.addClass(_),this.currentAnimationClass.length>0&&(clearTimeout(this.animEndLatchTimer),this.adapter.forceLayout(),this.adapter.removeClass(this.currentAnimationClass)),this.currentAnimationClass=this.getTransitionAnimationClass(n,a),this.currentCheckState=a,this.adapter.isAttachedToDOM()&&this.currentAnimationClass.length>0&&(this.adapter.addClass(this.currentAnimationClass),this.enableAnimationEndHandler=!0)}}},e.prototype.determineCheckState=function(){var n=Kl.TRANSITION_STATE_INDETERMINATE,a=Kl.TRANSITION_STATE_CHECKED,p=Kl.TRANSITION_STATE_UNCHECKED;return this.adapter.isIndeterminate()?n:this.adapter.isChecked()?a:p},e.prototype.getTransitionAnimationClass=function(n,a){var p=Kl.TRANSITION_STATE_INIT,_=Kl.TRANSITION_STATE_CHECKED,c=Kl.TRANSITION_STATE_UNCHECKED,h=e.cssClasses,I=h.ANIM_UNCHECKED_CHECKED,L=h.ANIM_UNCHECKED_INDETERMINATE,z=h.ANIM_CHECKED_UNCHECKED,R=h.ANIM_CHECKED_INDETERMINATE,O=h.ANIM_INDETERMINATE_CHECKED,Y=h.ANIM_INDETERMINATE_UNCHECKED;switch(n){case p:return a===c?"":a===_?O:Y;case c:return a===_?I:L;case _:return a===c?z:R;default:return a===_?O:Y}},e.prototype.updateAriaChecked=function(){this.adapter.isIndeterminate()?this.adapter.setNativeControlAttr(Kl.ARIA_CHECKED_ATTR,Kl.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter.removeNativeControlAttr(Kl.ARIA_CHECKED_ATTR)},e}(Ma);function bE(o){let e,n,a,p,_,c,h,I,L,z,R,O,Y,ee,ue,te,de,oe,be,qe,Ne=[{class:a=wi({[o[9]]:!0,"mdc-checkbox__native-control":!0})},{type:"checkbox"},o[20],{disabled:o[1]},{__value:p=o[19](o[7])?o[6]:o[7]},{"data-indeterminate":_=!o[19](o[0])&&o[0]?"true":void 0},o[16],rr(o[26],"input$")],De={};for(let st=0;st<Ne.length;st+=1)De=Ct(De,Ne[st]);let fe=[{class:ue=wi(tr({[o[3]]:!0,"mdc-checkbox":!0,"mdc-checkbox--disabled":o[1],"mdc-checkbox--touch":o[5],"mdc-data-table__header-row-checkbox":o[21]==="data-table"&&o[22],"mdc-data-table__row-checkbox":o[21]==="data-table"&&!o[22]},o[14]))},{style:te=Object.entries(o[15]).map(Ev).concat([o[4]]).join(" ")},_s(o[26],["input$"])],ct={};for(let st=0;st<fe.length;st+=1)ct=Ct(ct,fe[st]);return{c(){e=yi("div"),n=yi("input"),h=Bn(),I=yi("div"),L=Ql("svg"),z=Ql("path"),R=Bn(),O=yi("div"),Y=Bn(),ee=yi("div"),this.h()},l(st){e=_i(st,"DIV",{class:!0,style:!0});var Ge=pi(e);n=_i(Ge,"INPUT",{class:!0,type:!0,"data-indeterminate":!0}),h=Fn(Ge),I=_i(Ge,"DIV",{class:!0});var Ue=pi(I);L=$l(Ue,"svg",{class:!0,viewBox:!0});var Rt=pi(L);z=$l(Rt,"path",{class:!0,fill:!0,d:!0}),pi(z).forEach(We),Rt.forEach(We),R=Fn(Ue),O=_i(Ue,"DIV",{class:!0}),pi(O).forEach(We),Ue.forEach(We),Y=Fn(Ge),ee=_i(Ge,"DIV",{class:!0}),pi(ee).forEach(We),Ge.forEach(We),this.h()},h(){hi(n,De),ii(z,"class","mdc-checkbox__checkmark-path"),ii(z,"fill","none"),ii(z,"d","M1.73,12.91 8.1,19.28 22.79,4.59"),ii(L,"class","mdc-checkbox__checkmark"),ii(L,"viewBox","0 0 24 24"),ii(O,"class","mdc-checkbox__mixedmark"),ii(I,"class","mdc-checkbox__background"),ii(ee,"class","mdc-checkbox__ripple"),hi(e,ct)},m(st,Ge){Dt(st,e,Ge),sn(e,n),n.autofocus&&n.focus(),o[36](n),n.checked=o[12],sn(e,h),sn(e,I),sn(I,L),sn(L,z),sn(I,R),sn(I,O),sn(e,Y),sn(e,ee),o[38](e),be||(qe=[Ei(c=qn.call(null,n,o[8])),An(n,"change",o[37]),An(n,"blur",o[34]),An(n,"focus",o[35]),Ei(de=qn.call(null,e,o[2])),Ei(o[18].call(null,e)),Ei(oe=$c.call(null,e,{unbounded:!0,addClass:o[23],removeClass:o[24],addStyle:o[25],active:o[17],eventTarget:o[11]})),An(e,"animationend",o[39])],be=!0)},p(st,Ge){hi(n,De=en(Ne,[Ge[0]&512&&a!==(a=wi({[st[9]]:!0,"mdc-checkbox__native-control":!0}))&&{class:a},{type:"checkbox"},st[20],Ge[0]&2&&{disabled:st[1]},Ge[0]&192&&p!==(p=st[19](st[7])?st[6]:st[7])&&{__value:p},Ge[0]&1&&_!==(_=!st[19](st[0])&&st[0]?"true":void 0)&&{"data-indeterminate":_},Ge[0]&65536&&st[16],Ge[0]&67108864&&rr(st[26],"input$")])),c&&zn(c.update)&&Ge[0]&256&&c.update.call(null,st[8]),Ge[0]&4096&&(n.checked=st[12]),hi(e,ct=en(fe,[Ge[0]&16426&&ue!==(ue=wi(tr({[st[3]]:!0,"mdc-checkbox":!0,"mdc-checkbox--disabled":st[1],"mdc-checkbox--touch":st[5],"mdc-data-table__header-row-checkbox":st[21]==="data-table"&&st[22],"mdc-data-table__row-checkbox":st[21]==="data-table"&&!st[22]},st[14])))&&{class:ue},Ge[0]&32784&&te!==(te=Object.entries(st[15]).map(Ev).concat([st[4]]).join(" "))&&{style:te},Ge[0]&67108864&&_s(st[26],["input$"])])),de&&zn(de.update)&&Ge[0]&4&&de.update.call(null,st[2]),oe&&zn(oe.update)&&Ge[0]&133120&&oe.update.call(null,{unbounded:!0,addClass:st[23],removeClass:st[24],addStyle:st[25],active:st[17],eventTarget:st[11]})},i:Vo,o:Vo,d(st){st&&We(e),o[36](null),o[38](null),be=!1,xr(qe)}}}const Ev=([o,e])=>`${o}: ${e};`;function xE(o,e,n){const a=["use","class","style","disabled","touch","indeterminate","group","checked","value","valueKey","input$use","input$class","getId","getElement"];let p=bi(e,a);var _;const c=Qn(Jn());let h=()=>{};function I(Qt){return Qt===h}let{use:L=[]}=e,{class:z=""}=e,{style:R=""}=e,{disabled:O=!1}=e,{touch:Y=!1}=e,{indeterminate:ee=h}=e,{group:ue=h}=e,{checked:te=h}=e,{value:de=null}=e,{valueKey:oe=h}=e,{input$use:be=[]}=e,{input$class:qe=""}=e,Ne,De,fe,ct={},st={},Ge={},Ue=!1,Rt=(_=Or("SMUI:generic:input:props"))!==null&&_!==void 0?_:{},He=I(ue)?I(te)?!1:te!=null?te:void 0:ue.indexOf(de)!==-1,Mt=Or("SMUI:checkbox:context"),li=Or("SMUI:data-table:row:header"),Et=te,Gt=I(ue)?[]:[...ue],Ye=He;Po(()=>{n(11,fe.indeterminate=!I(ee)&&ee,fe),n(10,De=new vE({addClass:wt,forceLayout:()=>Ne.offsetWidth,hasNativeControl:()=>!0,isAttachedToDOM:()=>Boolean(Ne.parentNode),isChecked:()=>He!=null?He:!1,isIndeterminate:()=>I(ee)?!1:ee,removeClass:Lt,removeNativeControlAttr:Ki,setNativeControlAttr:Xt,setNativeControlDisabled:gt=>n(1,O=gt)}));const Qt={_smui_checkbox_accessor:!0,get element(){return Jt()},get checked(){return He!=null?He:!1},set checked(gt){He!==gt&&n(12,He=gt)},get indeterminate(){return I(ee)?!1:ee},set indeterminate(gt){n(0,ee=gt)},activateRipple(){O||n(17,Ue=!0)},deactivateRipple(){n(17,Ue=!1)}};return Pn(Ne,"SMUIGenericInput:mount",Qt),Pn(Ne,"SMUICheckbox:mount",Qt),De.init(),()=>{Pn(Ne,"SMUIGenericInput:unmount",Qt),Pn(Ne,"SMUICheckbox:unmount",Qt),De.destroy()}});function wt(Qt){ct[Qt]||n(14,ct[Qt]=!0,ct)}function Lt(Qt){(!(Qt in ct)||ct[Qt])&&n(14,ct[Qt]=!1,ct)}function ni(Qt,gt){st[Qt]!=gt&&(gt===""||gt==null?(delete st[Qt],n(15,st)):n(15,st[Qt]=gt,st))}function Xt(Qt,gt){Ge[Qt]!==gt&&n(16,Ge[Qt]=gt,Ge)}function Ki(Qt){(!(Qt in Ge)||Ge[Qt]!=null)&&n(16,Ge[Qt]=void 0,Ge)}function ei(){return Rt&&Rt.id}function Jt(){return Ne}function xi(Qt){pf.call(this,o,Qt)}function ai(Qt){pf.call(this,o,Qt)}function dt(Qt){qi[Qt?"unshift":"push"](()=>{fe=Qt,n(11,fe),n(27,ue),n(33,Ye),n(12,He),n(6,de),n(32,Gt),n(28,te),n(31,Et),n(0,ee),n(10,De)})}function It(){He=this.checked,n(12,He),n(27,ue),n(33,Ye),n(6,de),n(32,Gt),n(28,te),n(31,Et),n(0,ee),n(11,fe),n(10,De)}function St(Qt){qi[Qt?"unshift":"push"](()=>{Ne=Qt,n(13,Ne)})}const Yi=()=>De&&De.handleAnimationEnd();return o.$$set=Qt=>{e=Ct(Ct({},e),Yn(Qt)),n(26,p=bi(e,a)),"use"in Qt&&n(2,L=Qt.use),"class"in Qt&&n(3,z=Qt.class),"style"in Qt&&n(4,R=Qt.style),"disabled"in Qt&&n(1,O=Qt.disabled),"touch"in Qt&&n(5,Y=Qt.touch),"indeterminate"in Qt&&n(0,ee=Qt.indeterminate),"group"in Qt&&n(27,ue=Qt.group),"checked"in Qt&&n(28,te=Qt.checked),"value"in Qt&&n(6,de=Qt.value),"valueKey"in Qt&&n(7,oe=Qt.valueKey),"input$use"in Qt&&n(8,be=Qt.input$use),"input$class"in Qt&&n(9,qe=Qt.input$class)},o.$$.update=()=>{if(o.$$.dirty[0]&402660417|o.$$.dirty[1]&7){let Qt=!1;if(!I(ue))if(Ye!==He){const gt=ue.indexOf(de);He&&gt===-1?(ue.push(de),n(27,ue),n(33,Ye),n(12,He),n(6,de),n(32,Gt),n(28,te),n(31,Et),n(0,ee),n(11,fe),n(10,De)):!He&&gt!==-1&&(ue.splice(gt,1),n(27,ue),n(33,Ye),n(12,He),n(6,de),n(32,Gt),n(28,te),n(31,Et),n(0,ee),n(11,fe),n(10,De)),Qt=!0}else{const gt=Gt.indexOf(de),Oi=ue.indexOf(de);gt>-1&&Oi===-1?(n(12,He=!1),Qt=!0):Oi>-1&&gt===-1&&(n(12,He=!0),Qt=!0)}I(te)?!!Ye!=!!He&&(Qt=!0):te!==(He!=null?He:null)&&(te===Et?(n(28,te=He!=null?He:null),I(ee)||n(0,ee=!1)):n(12,He=te!=null?te:void 0),Qt=!0),fe&&(I(ee)?fe.indeterminate&&(n(11,fe.indeterminate=!1,fe),Qt=!0):!ee&&fe.indeterminate?(n(11,fe.indeterminate=!1,fe),Qt=!0):ee&&!fe.indeterminate&&(n(11,fe.indeterminate=!0,fe),Qt=!0)),n(31,Et=te),n(32,Gt=I(ue)?[]:[...ue]),n(33,Ye=He),Qt&&De&&De.handleChange()}},[ee,O,L,z,R,Y,de,oe,be,qe,De,fe,He,Ne,ct,st,Ge,Ue,c,I,Rt,Mt,li,wt,Lt,ni,p,ue,te,ei,Jt,Et,Gt,Ye,xi,ai,dt,It,St,Yi]}class l1 extends wn{constructor(e){super(),En(this,e,xE,bE,bn,{use:2,class:3,style:4,disabled:1,touch:5,indeterminate:0,group:27,checked:28,value:6,valueKey:7,input$use:8,input$class:9,getId:29,getElement:30},null,[-1,-1])}get getId(){return this.$$.ctx[29]}get getElement(){return this.$$.ctx[30]}}var wE=8,EE={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Mercator, Natural Earth, and Winkel Tripel. Terrain, fog, sky and CustomLayerInterface are not supported for projections other than mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},IE={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},SE=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],TE={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},AE={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},CE={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},kE={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},ME={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},PE={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},LE={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},zE=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],DE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},RE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},OE={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},BE={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},FE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},UE={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},NE={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},VE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},jE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},qE={type:"array",value:"*",doc:"A filter selects specific features from a layer."},GE={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},HE={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},ZE={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},WE={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},XE={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},KE={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},JE={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},YE={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},QE={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},$E={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},eI={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},tI={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},iI={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},nI={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},rI=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],oI={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},aI={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},sI={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},lI={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},uI={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},cI={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hI={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dI={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pI={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fI={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},mI={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},gI={$version:wE,$root:EE,sources:IE,source:SE,source_vector:TE,source_raster:AE,source_raster_dem:CE,source_geojson:kE,source_video:ME,source_image:PE,layer:LE,layout:zE,layout_background:DE,layout_sky:RE,layout_fill:OE,layout_circle:BE,layout_heatmap:FE,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:UE,layout_symbol:NE,layout_raster:VE,layout_hillshade:jE,filter:qE,filter_symbol:GE,filter_fill:HE,filter_line:ZE,filter_circle:WE,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:XE,filter_operator:KE,geometry_type:JE,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:YE,expression:QE,expression_name:$E,fog:eI,light:tI,projection:iI,terrain:nI,paint:rI,paint_fill:oI,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:aI,paint_circle:sI,paint_heatmap:lI,paint_symbol:uI,paint_raster:cI,paint_hillshade:hI,paint_background:dI,paint_sky:pI,transition:fI,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:mI},Xg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Pm(o){var e={exports:{}};return o(e,e.exports),e.exports}function yI(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */Pm(function(o,e){(function(n){var a=e&&!e.nodeType&&e,p=o&&!o.nodeType&&o,_=typeof Xg=="object"&&Xg;(_.global===_||_.window===_||_.self===_)&&(n=_);var c,h=2147483647,I=36,L=1,z=26,R=38,O=700,Y=72,ee=128,ue="-",te=/^xn--/,de=/[^\x20-\x7E]/,oe=/[\x2E\u3002\uFF0E\uFF61]/g,be={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},qe=I-L,Ne=Math.floor,De=String.fromCharCode,fe;function ct(Lt){throw RangeError(be[Lt])}function st(Lt,ni){for(var Xt=Lt.length,Ki=[];Xt--;)Ki[Xt]=ni(Lt[Xt]);return Ki}function Ge(Lt,ni){var Xt=Lt.split("@"),Ki="";Xt.length>1&&(Ki=Xt[0]+"@",Lt=Xt[1]),Lt=Lt.replace(oe,".");var ei=Lt.split("."),Jt=st(ei,ni).join(".");return Ki+Jt}function Ue(Lt){for(var ni=[],Xt=0,Ki=Lt.length,ei,Jt;Xt<Ki;)ei=Lt.charCodeAt(Xt++),ei>=55296&&ei<=56319&&Xt<Ki?(Jt=Lt.charCodeAt(Xt++),(Jt&64512)==56320?ni.push(((ei&1023)<<10)+(Jt&1023)+65536):(ni.push(ei),Xt--)):ni.push(ei);return ni}function Rt(Lt){return st(Lt,function(ni){var Xt="";return ni>65535&&(ni-=65536,Xt+=De(ni>>>10&1023|55296),ni=56320|ni&1023),Xt+=De(ni),Xt}).join("")}function He(Lt){return Lt-48<10?Lt-22:Lt-65<26?Lt-65:Lt-97<26?Lt-97:I}function Mt(Lt,ni){return Lt+22+75*(Lt<26)-((ni!=0)<<5)}function li(Lt,ni,Xt){var Ki=0;for(Lt=Xt?Ne(Lt/O):Lt>>1,Lt+=Ne(Lt/ni);Lt>qe*z>>1;Ki+=I)Lt=Ne(Lt/qe);return Ne(Ki+(qe+1)*Lt/(Lt+R))}function Et(Lt){var ni=[],Xt=Lt.length,Ki,ei=0,Jt=ee,xi=Y,ai,dt,It,St,Yi,Qt,gt,Oi,ln;for(ai=Lt.lastIndexOf(ue),ai<0&&(ai=0),dt=0;dt<ai;++dt)Lt.charCodeAt(dt)>=128&&ct("not-basic"),ni.push(Lt.charCodeAt(dt));for(It=ai>0?ai+1:0;It<Xt;){for(St=ei,Yi=1,Qt=I;It>=Xt&&ct("invalid-input"),gt=He(Lt.charCodeAt(It++)),(gt>=I||gt>Ne((h-ei)/Yi))&&ct("overflow"),ei+=gt*Yi,Oi=Qt<=xi?L:Qt>=xi+z?z:Qt-xi,!(gt<Oi);Qt+=I)ln=I-Oi,Yi>Ne(h/ln)&&ct("overflow"),Yi*=ln;Ki=ni.length+1,xi=li(ei-St,Ki,St==0),Ne(ei/Ki)>h-Jt&&ct("overflow"),Jt+=Ne(ei/Ki),ei%=Ki,ni.splice(ei++,0,Jt)}return Rt(ni)}function Gt(Lt){var ni,Xt,Ki,ei,Jt,xi,ai,dt,It,St,Yi,Qt=[],gt,Oi,ln,Cn;for(Lt=Ue(Lt),gt=Lt.length,ni=ee,Xt=0,Jt=Y,xi=0;xi<gt;++xi)Yi=Lt[xi],Yi<128&&Qt.push(De(Yi));for(Ki=ei=Qt.length,ei&&Qt.push(ue);Ki<gt;){for(ai=h,xi=0;xi<gt;++xi)Yi=Lt[xi],Yi>=ni&&Yi<ai&&(ai=Yi);for(Oi=Ki+1,ai-ni>Ne((h-Xt)/Oi)&&ct("overflow"),Xt+=(ai-ni)*Oi,ni=ai,xi=0;xi<gt;++xi)if(Yi=Lt[xi],Yi<ni&&++Xt>h&&ct("overflow"),Yi==ni){for(dt=Xt,It=I;St=It<=Jt?L:It>=Jt+z?z:It-Jt,!(dt<St);It+=I)Cn=dt-St,ln=I-St,Qt.push(De(Mt(St+Cn%ln,0))),dt=Ne(Cn/ln);Qt.push(De(Mt(dt,0))),Jt=li(Xt,Oi,Ki==ei),Xt=0,++Ki}++Xt,++ni}return Qt.join("")}function Ye(Lt){return Ge(Lt,function(ni){return te.test(ni)?Et(ni.slice(4).toLowerCase()):ni})}function wt(Lt){return Ge(Lt,function(ni){return de.test(ni)?"xn--"+Gt(ni):ni})}if(c={version:"1.3.2",ucs2:{decode:Ue,encode:Rt},decode:Et,encode:Gt,toASCII:wt,toUnicode:Ye},a&&p)if(o.exports==a)p.exports=c;else for(fe in c)c.hasOwnProperty(fe)&&(a[fe]=c[fe]);else n.punycode=c})(Xg)});function _I(o,e){return Object.prototype.hasOwnProperty.call(o,e)}var vI=function(o,e,n,a){e=e||"&",n=n||"=";var p={};if(typeof o!="string"||o.length===0)return p;var _=/\+/g;o=o.split(e);var c=1e3;a&&typeof a.maxKeys=="number"&&(c=a.maxKeys);var h=o.length;c>0&&h>c&&(h=c);for(var I=0;I<h;++I){var L=o[I].replace(_,"%20"),z=L.indexOf(n),R,O,Y,ee;z>=0?(R=L.substr(0,z),O=L.substr(z+1)):(R=L,O=""),Y=decodeURIComponent(R),ee=decodeURIComponent(O),_I(p,Y)?Array.isArray(p[Y])?p[Y].push(ee):p[Y]=[p[Y],ee]:p[Y]=ee}return p},lf=function(o){switch(typeof o){case"string":return o;case"boolean":return o?"true":"false";case"number":return isFinite(o)?o:"";default:return""}},bI=function(o,e,n,a){return e=e||"&",n=n||"=",o===null&&(o=void 0),typeof o=="object"?Object.keys(o).map(function(p){var _=encodeURIComponent(lf(p))+n;return Array.isArray(o[p])?o[p].map(function(c){return _+encodeURIComponent(lf(c))}).join(e):_+encodeURIComponent(lf(o[p]))}).join(e):a?encodeURIComponent(lf(a))+n+encodeURIComponent(lf(o)):""};Pm(function(o,e){e.decode=e.parse=vI,e.encode=e.stringify=bI});function u1(o,...e){for(const n of e)for(const a in n)o[a]=n[a];return o}class yc extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class Ry{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[a,p]of n)this.bindings[a]=p}concat(e){return new Ry(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Lm={kind:"null"},Fi={kind:"number"},Sr={kind:"string"},dr={kind:"boolean"},Qc={kind:"color"},cp={kind:"object"},pr={kind:"value"},xI={kind:"error"},zm={kind:"collator"},Dm={kind:"formatted"},xf={kind:"resolvedImage"};function Jl(o,e){return{kind:"array",itemType:o,N:e}}function Xo(o){if(o.kind==="array"){const e=Xo(o.itemType);return typeof o.N=="number"?`array<${e}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${e}>`}else return o.kind}const wI=[Lm,Fi,Sr,dr,Qc,Dm,cp,Jl(pr),xf];function ff(o,e){if(e.kind==="error")return null;if(o.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!ff(o.itemType,e.itemType))&&(typeof o.N!="number"||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if(o.kind==="value"){for(const n of wI)if(!ff(n,e))return null}}return`Expected ${Xo(o)} but found ${Xo(e)} instead.`}function Oy(o,e){return e.some(n=>n.kind===o.kind)}function mf(o,e){return e.some(n=>n==="null"?o===null:n==="array"?Array.isArray(o):n==="object"?o&&!Array.isArray(o)&&typeof o=="object":n===typeof o)}var EI=Pm(function(o,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(L){return L=Math.round(L),L<0?0:L>255?255:L}function p(L){return L<0?0:L>1?1:L}function _(L){return L[L.length-1]==="%"?a(parseFloat(L)/100*255):a(parseInt(L))}function c(L){return L[L.length-1]==="%"?p(parseFloat(L)/100):p(parseFloat(L))}function h(L,z,R){return R<0?R+=1:R>1&&(R-=1),R*6<1?L+(z-L)*R*6:R*2<1?z:R*3<2?L+(z-L)*(2/3-R)*6:L}function I(L){var z=L.replace(/ /g,"").toLowerCase();if(z in n)return n[z].slice();if(z[0]==="#"){if(z.length===4){var R=parseInt(z.substr(1),16);return R>=0&&R<=4095?[(R&3840)>>4|(R&3840)>>8,R&240|(R&240)>>4,R&15|(R&15)<<4,1]:null}else if(z.length===7){var R=parseInt(z.substr(1),16);return R>=0&&R<=16777215?[(R&16711680)>>16,(R&65280)>>8,R&255,1]:null}return null}var O=z.indexOf("("),Y=z.indexOf(")");if(O!==-1&&Y+1===z.length){var ee=z.substr(0,O),ue=z.substr(O+1,Y-(O+1)).split(","),te=1;switch(ee){case"rgba":if(ue.length!==4)return null;te=c(ue.pop());case"rgb":return ue.length!==3?null:[_(ue[0]),_(ue[1]),_(ue[2]),te];case"hsla":if(ue.length!==4)return null;te=c(ue.pop());case"hsl":if(ue.length!==3)return null;var de=(parseFloat(ue[0])%360+360)%360/360,oe=c(ue[1]),be=c(ue[2]),qe=be<=.5?be*(oe+1):be+oe-be*oe,Ne=be*2-qe;return[a(h(Ne,qe,de+1/3)*255),a(h(Ne,qe,de)*255),a(h(Ne,qe,de-1/3)*255),te];default:return null}}return null}try{e.parseCSSColor=I}catch{}});class no{constructor(e,n,a,p=1){this.r=e,this.g=n,this.b=a,this.a=p}static parse(e){if(!e)return;if(e instanceof no)return e;if(typeof e!="string")return;const n=EI.parseCSSColor(e);if(!!n)return new no(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}toString(){const[e,n,a,p]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(a)},${p})`}toArray(){const{r:e,g:n,b:a,a:p}=this;return p===0?[0,0,0,0]:[e*255/p,n*255/p,a*255/p,p]}}no.black=new no(0,0,0,1);no.white=new no(1,1,1,1);no.transparent=new no(0,0,0,0);no.red=new no(1,0,0,1);no.blue=new no(0,0,1,1);class By{constructor(e,n,a){e?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class vy{constructor(e,n,a,p,_){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=a,this.fontStack=p,this.textColor=_}}class Uu{constructor(e){this.sections=e}static fromString(e){return new Uu([new vy(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Uu?e:Uu.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.name]);continue}e.push(n.text);const a={};n.fontStack&&(a["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(a["font-scale"]=n.scale),n.textColor&&(a["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(a)}return e}}class th{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new th({name:e,available:!1}):null}serialize(){return["image",this.name]}}function c1(o,e,n,a){return typeof o=="number"&&o>=0&&o<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?typeof a=="undefined"||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[o,e,n,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[o,e,n,a]:[o,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Em(o){if(o===null)return!0;if(typeof o=="string")return!0;if(typeof o=="boolean")return!0;if(typeof o=="number")return!0;if(o instanceof no)return!0;if(o instanceof By)return!0;if(o instanceof Uu)return!0;if(o instanceof th)return!0;if(Array.isArray(o)){for(const e of o)if(!Em(e))return!1;return!0}else if(typeof o=="object"){for(const e in o)if(!Em(o[e]))return!1;return!0}else return!1}function Na(o){if(o===null)return Lm;if(typeof o=="string")return Sr;if(typeof o=="boolean")return dr;if(typeof o=="number")return Fi;if(o instanceof no)return Qc;if(o instanceof By)return zm;if(o instanceof Uu)return Dm;if(o instanceof th)return xf;if(Array.isArray(o)){const e=o.length;let n;for(const a of o){const p=Na(a);if(!n)n=p;else{if(n===p)continue;n=pr;break}}return Jl(n||pr,e)}else return cp}function df(o){const e=typeof o;return o===null?"":e==="string"||e==="number"||e==="boolean"?String(o):o instanceof no||o instanceof Uu||o instanceof th?o.toString():JSON.stringify(o)}class gp{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Em(e[1]))return n.error("invalid value");const a=e[1];let p=Na(a);const _=n.expectedType;return p.kind==="array"&&p.N===0&&_&&_.kind==="array"&&(typeof _.N!="number"||_.N===0)&&(p=_),new gp(p,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof no?["rgba"].concat(this.value.toArray()):this.value instanceof Uu?this.value.serialize():this.value}}class is{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Kg={string:Sr,number:Fi,boolean:dr,object:cp};class Bu{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let a=1,p;const _=e[0];if(_==="array"){let h;if(e.length>2){const L=e[1];if(typeof L!="string"||!(L in Kg)||L==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);h=Kg[L],a++}else h=pr;let I;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);I=e[2],a++}p=Jl(h,I)}else p=Kg[_];const c=[];for(;a<e.length;a++){const h=n.parse(e[a],a,pr);if(!h)return null;c.push(h)}return new Bu(p,c)}evaluate(e){for(let n=0;n<this.args.length;n++){const a=this.args[n].evaluate(e);if(ff(this.type,Na(a))){if(n===this.args.length-1)throw new is(`Expected value to be of type ${Xo(this.type)}, but found ${Xo(Na(a))} instead.`)}else return a}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){n.push(a.kind);const p=e.N;(typeof p=="number"||this.args.length>1)&&n.push(p)}}return n.concat(this.args.map(a=>a.serialize()))}}class Rm{constructor(e){this.type=Dm,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return n.error("First argument must be an image or text section.");const p=[];let _=!1;for(let c=1;c<=e.length-1;++c){const h=e[c];if(_&&typeof h=="object"&&!Array.isArray(h)){_=!1;let I=null;if(h["font-scale"]&&(I=n.parse(h["font-scale"],1,Fi),!I))return null;let L=null;if(h["text-font"]&&(L=n.parse(h["text-font"],1,Jl(Sr)),!L))return null;let z=null;if(h["text-color"]&&(z=n.parse(h["text-color"],1,Qc),!z))return null;const R=p[p.length-1];R.scale=I,R.font=L,R.textColor=z}else{const I=n.parse(e[c],1,pr);if(!I)return null;const L=I.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,p.push({content:I,scale:null,font:null,textColor:null})}}return new Rm(p)}evaluate(e){const n=a=>{const p=a.content.evaluate(e);return Na(p)===xf?new vy("",p,null,null,null):new vy(df(p),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null)};return new Uu(this.sections.map(n))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const a={};n.scale&&(a["font-scale"]=n.scale.serialize()),n.font&&(a["text-font"]=n.font.serialize()),n.textColor&&(a["text-color"]=n.textColor.serialize()),e.push(a)}return e}}class Om{constructor(e){this.type=xf,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const a=n.parse(e[1],1,Sr);return a?new Om(a):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),a=th.fromString(n);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(n)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const II={"to-boolean":dr,"to-color":Qc,"to-number":Fi,"to-string":Sr};class Rh{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const a=e[0];if((a==="to-boolean"||a==="to-string")&&e.length!==2)return n.error("Expected one argument.");const p=II[a],_=[];for(let c=1;c<e.length;c++){const h=n.parse(e[c],c,pr);if(!h)return null;_.push(h)}return new Rh(p,_)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let n,a;for(const p of this.args){if(n=p.evaluate(e),a=null,n instanceof no)return n;if(typeof n=="string"){const _=e.parseColor(n);if(_)return _}else if(Array.isArray(n)&&(n.length<3||n.length>4?a=`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:a=c1(n[0],n[1],n[2],n[3]),!a))return new no(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new is(a||`Could not parse color from value '${typeof n=="string"?n:String(JSON.stringify(n))}'`)}else if(this.type.kind==="number"){let n=null;for(const a of this.args){if(n=a.evaluate(e),n===null)return 0;const p=Number(n);if(!isNaN(p))return p}throw new is(`Could not convert ${JSON.stringify(n)} to number.`)}else return this.type.kind==="formatted"?Uu.fromString(df(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?th.fromString(df(this.args[0].evaluate(e))):df(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Rm([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Om(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}const SI=["Unknown","Point","LineString","Polygon"];class h1{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?SI[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:a,y:p}=this.featureTileCoord,_=a*n-e[0],c=p*n-e[1],h=this.featureDistanceData.bearing[0],I=this.featureDistanceData.bearing[1];return h*_+I*c}return 0}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=no.parse(e)),n}}class Fu{constructor(e,n,a,p){this.name=e,this.type=n,this._evaluate=a,this.args=p}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const a=e[0],p=Fu.definitions[a];if(!p)return n.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(p)?p[0]:p.type,c=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,h=c.filter(([L])=>!Array.isArray(L)||L.length===e.length-1);let I=null;for(const[L,z]of h){I=new Um(n.registry,n.path,null,n.scope);const R=[];let O=!1;for(let Y=1;Y<e.length;Y++){const ee=e[Y],ue=Array.isArray(L)?L[Y-1]:L.type,te=I.parse(ee,1+R.length,ue);if(!te){O=!0;break}R.push(te)}if(!O){if(Array.isArray(L)&&L.length!==R.length){I.error(`Expected ${L.length} arguments, but found ${R.length} instead.`);continue}for(let Y=0;Y<R.length;Y++){const ee=Array.isArray(L)?L[Y]:L.type,ue=R[Y];I.concat(Y+1).checkSubtype(ee,ue.type)}if(I.errors.length===0)return new Fu(a,_,z,R)}}if(h.length===1)n.errors.push(...I.errors);else{const z=(h.length?h:c).map(([O])=>TI(O)).join(" | "),R=[];for(let O=1;O<e.length;O++){const Y=n.parse(e[O],1+R.length);if(!Y)return null;R.push(Xo(Y.type))}n.error(`Expected arguments of type ${z}, but found (${R.join(", ")}) instead.`)}return null}static register(e,n){Fu.definitions=n;for(const a in n)e[a]=Fu}}function TI(o){return Array.isArray(o)?`(${o.map(Xo).join(", ")})`:`(${Xo(o.type)}...)`}class Bm{constructor(e,n,a){this.type=zm,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return n.error("Collator options argument must be an object.");const p=n.parse(a["case-sensitive"]===void 0?!1:a["case-sensitive"],1,dr);if(!p)return null;const _=n.parse(a["diacritic-sensitive"]===void 0?!1:a["diacritic-sensitive"],1,dr);if(!_)return null;let c=null;return a.locale&&(c=n.parse(a.locale,1,Sr),!c)?null:new Bm(p,_,c)}evaluate(e){return new By(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Bh=8192;function Fy(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function AI(o){return(180+o)/360}function CI(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Im(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function kI(o,e){const n=AI(o[0]),a=CI(o[1]),p=Math.pow(2,e.z);return[Math.round(n*p*Bh),Math.round(a*p*Bh)]}function MI(o,e,n){const a=o[0]-e[0],p=o[1]-e[1],_=o[0]-n[0],c=o[1]-n[1];return a*c-_*p===0&&a*_<=0&&p*c<=0}function PI(o,e,n){return e[1]>o[1]!=n[1]>o[1]&&o[0]<(n[0]-e[0])*(o[1]-e[1])/(n[1]-e[1])+e[0]}function Uy(o,e){let n=!1;for(let a=0,p=e.length;a<p;a++){const _=e[a];for(let c=0,h=_.length;c<h-1;c++){if(MI(o,_[c],_[c+1]))return!1;PI(o,_[c],_[c+1])&&(n=!n)}}return n}function LI(o,e){for(let n=0;n<e.length;n++)if(Uy(o,e[n]))return!0;return!1}function zI(o,e){return o[0]*e[1]-o[1]*e[0]}function Iv(o,e,n,a){const p=o[0]-n[0],_=o[1]-n[1],c=e[0]-n[0],h=e[1]-n[1],I=a[0]-n[0],L=a[1]-n[1],z=p*L-I*_,R=c*L-I*h;return z>0&&R<0||z<0&&R>0}function DI(o,e,n,a){const p=[e[0]-o[0],e[1]-o[1]],_=[a[0]-n[0],a[1]-n[1]];return zI(_,p)===0?!1:!!(Iv(o,e,n,a)&&Iv(n,a,o,e))}function RI(o,e,n){for(const a of n)for(let p=0;p<a.length-1;++p)if(DI(o,e,a[p],a[p+1]))return!0;return!1}function d1(o,e){for(let n=0;n<o.length;++n)if(!Uy(o[n],e))return!1;for(let n=0;n<o.length-1;++n)if(RI(o[n],o[n+1],e))return!1;return!0}function OI(o,e){for(let n=0;n<e.length;n++)if(d1(o,e[n]))return!0;return!1}function Ny(o,e,n){const a=[];for(let p=0;p<o.length;p++){const _=[];for(let c=0;c<o[p].length;c++){const h=kI(o[p][c],n);Fy(e,h),_.push(h)}a.push(_)}return a}function p1(o,e,n){const a=[];for(let p=0;p<o.length;p++){const _=Ny(o[p],e,n);a.push(_)}return a}function f1(o,e,n,a){if(o[0]<n[0]||o[0]>n[2]){const p=a*.5;let _=o[0]-n[0]>p?-a:n[0]-o[0]>p?a:0;_===0&&(_=o[0]-n[2]>p?-a:n[2]-o[0]>p?a:0),o[0]+=_}Fy(e,o)}function BI(o){o[0]=o[1]=1/0,o[2]=o[3]=-1/0}function Sv(o,e,n,a){const p=Math.pow(2,a.z)*Bh,_=[a.x*Bh,a.y*Bh],c=[];if(!o)return c;for(const h of o)for(const I of h){const L=[I.x+_[0],I.y+_[1]];f1(L,e,n,p),c.push(L)}return c}function Tv(o,e,n,a){const p=Math.pow(2,a.z)*Bh,_=[a.x*Bh,a.y*Bh],c=[];if(!o)return c;for(const h of o){const I=[];for(const L of h){const z=[L.x+_[0],L.y+_[1]];Fy(e,z),I.push(z)}c.push(I)}if(e[2]-e[0]<=p/2){BI(e);for(const h of c)for(const I of h)f1(I,e,n,p)}return c}function FI(o,e){const n=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],p=o.canonicalID();if(!p)return!1;if(e.type==="Polygon"){const _=Ny(e.coordinates,a,p),c=Sv(o.geometry(),n,a,p);if(!Im(n,a))return!1;for(const h of c)if(!Uy(h,_))return!1}if(e.type==="MultiPolygon"){const _=p1(e.coordinates,a,p),c=Sv(o.geometry(),n,a,p);if(!Im(n,a))return!1;for(const h of c)if(!LI(h,_))return!1}return!0}function UI(o,e){const n=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],p=o.canonicalID();if(!p)return!1;if(e.type==="Polygon"){const _=Ny(e.coordinates,a,p),c=Tv(o.geometry(),n,a,p);if(!Im(n,a))return!1;for(const h of c)if(!d1(h,_))return!1}if(e.type==="MultiPolygon"){const _=p1(e.coordinates,a,p),c=Tv(o.geometry(),n,a,p);if(!Im(n,a))return!1;for(const h of c)if(!OI(h,_))return!1}return!0}class Sd{constructor(e,n){this.type=dr,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Em(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let p=0;p<a.features.length;++p){const _=a.features[p].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Sd(a,a.features[p].geometry)}else if(a.type==="Feature"){const p=a.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Sd(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new Sd(a,a)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return FI(e,this.geometries);if(e.geometryType()==="LineString")return UI(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Vy(o){if(o instanceof Fu){if(o.name==="get"&&o.args.length===1)return!1;if(o.name==="feature-state")return!1;if(o.name==="has"&&o.args.length===1)return!1;if(o.name==="properties"||o.name==="geometry-type"||o.name==="id")return!1;if(/^filter-/.test(o.name))return!1}if(o instanceof Sd)return!1;let e=!0;return o.eachChild(n=>{e&&!Vy(n)&&(e=!1)}),e}function jy(o){if(o instanceof Fu&&o.name==="feature-state")return!1;let e=!0;return o.eachChild(n=>{e&&!jy(n)&&(e=!1)}),e}function qy(o,e){if(o instanceof Fu&&e.indexOf(o.name)>=0)return!1;let n=!0;return o.eachChild(a=>{n&&!qy(a,e)&&(n=!1)}),n}class Fm{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const a=e[1];return n.scope.has(a)?new Fm(a,n.scope.get(a)):n.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Um{constructor(e,n=[],a,p=new Ry,_=[]){this.registry=e,this.path=n,this.key=n.map(c=>`[${c}]`).join(""),this.scope=p,this.errors=_,this.expectedType=a}parse(e,n,a,p,_={}){return n?this.concat(n,a,p)._parse(e,_):this._parse(e,_)}_parse(e,n){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function a(p,_,c){return c==="assert"?new Bu(_,[p]):c==="coerce"?new Rh(_,[p]):p}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=e[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[p];if(_){let c=_.parse(e,this);if(!c)return null;if(this.expectedType){const h=this.expectedType,I=c.type;if((h.kind==="string"||h.kind==="number"||h.kind==="boolean"||h.kind==="object"||h.kind==="array")&&I.kind==="value")c=a(c,h,n.typeAnnotation||"assert");else if((h.kind==="color"||h.kind==="formatted"||h.kind==="resolvedImage")&&(I.kind==="value"||I.kind==="string"))c=a(c,h,n.typeAnnotation||"coerce");else if(this.checkSubtype(h,I))return null}if(!(c instanceof gp)&&c.type.kind!=="resolvedImage"&&by(c)){const h=new h1;try{c=new gp(c.type,c.evaluate(h))}catch(I){return this.error(I.message),null}}return c}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,n,a){const p=typeof e=="number"?this.path.concat(e):this.path,_=a?this.scope.concat(a):this.scope;return new Um(this.registry,p,n||null,_,this.errors)}error(e,...n){const a=`${this.key}${n.map(p=>`[${p}]`).join("")}`;this.errors.push(new yc(a,e))}checkSubtype(e,n){const a=ff(e,n);return a&&this.error(a),a}}function by(o){if(o instanceof Fm)return by(o.boundExpression);if(o instanceof Fu&&o.name==="error")return!1;if(o instanceof Bm)return!1;if(o instanceof Sd)return!1;const e=o instanceof Rh||o instanceof Bu;let n=!0;return o.eachChild(a=>{e?n=n&&by(a):n=n&&a instanceof gp}),n?Vy(o)&&qy(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Nm(o,e){const n=o.length-1;let a=0,p=n,_=0,c,h;for(;a<=p;)if(_=Math.floor((a+p)/2),c=o[_],h=o[_+1],c<=e){if(_===n||e<h)return _;a=_+1}else if(c>e)p=_-1;else throw new is("Input is not a number.");return 0}class Vm{constructor(e,n,a){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[p,_]of a)this.labels.push(p),this.outputs.push(_)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");const a=n.parse(e[1],1,Fi);if(!a)return null;const p=[];let _=null;n.expectedType&&n.expectedType.kind!=="value"&&(_=n.expectedType);for(let c=1;c<e.length;c+=2){const h=c===1?-1/0:e[c],I=e[c+1],L=c,z=c+1;if(typeof h!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(p.length&&p[p.length-1][0]>=h)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const R=n.parse(I,z,_);if(!R)return null;_=_||R.type,p.push([h,R])}return new Vm(_,a,p)}evaluate(e){const n=this.labels,a=this.outputs;if(n.length===1)return a[0].evaluate(e);const p=this.input.evaluate(e);if(p<=n[0])return a[0].evaluate(e);const _=n.length;if(p>=n[_-1])return a[_-1].evaluate(e);const c=Nm(n,p);return a[c].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}var NI=xp;function xp(o,e,n,a){this.cx=3*o,this.bx=3*(n-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=n,this.p2y=a}xp.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o};xp.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o};xp.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx};xp.prototype.solveCurveX=function(o,e){typeof e=="undefined"&&(e=1e-6);var n,a,p,_,c;for(p=o,c=0;c<8;c++){if(_=this.sampleCurveX(p)-o,Math.abs(_)<e)return p;var h=this.sampleCurveDerivativeX(p);if(Math.abs(h)<1e-6)break;p=p-_/h}if(n=0,a=1,p=o,p<n)return n;if(p>a)return a;for(;n<a;){if(_=this.sampleCurveX(p),Math.abs(_-o)<e)return p;o>_?n=p:a=p,p=(a-n)*.5+n}return p};xp.prototype.solve=function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))};function Al(o,e,n){return o*(1-n)+e*n}function VI(o,e,n){return new no(Al(o.r,e.r,n),Al(o.g,e.g,n),Al(o.b,e.b,n),Al(o.a,e.a,n))}function jI(o,e,n){return o.map((a,p)=>Al(a,e[p],n))}var m1=Object.freeze({__proto__:null,number:Al,color:VI,array:jI});const g1=.95047,y1=1,_1=1.08883,v1=4/29,hp=6/29,b1=3*hp*hp,qI=hp*hp*hp,GI=Math.PI/180,HI=180/Math.PI;function Jg(o){return o>qI?Math.pow(o,1/3):o/b1+v1}function Yg(o){return o>hp?o*o*o:b1*(o-v1)}function Qg(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function $g(o){return o/=255,o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function x1(o){const e=$g(o.r),n=$g(o.g),a=$g(o.b),p=Jg((.4124564*e+.3575761*n+.1804375*a)/g1),_=Jg((.2126729*e+.7151522*n+.072175*a)/y1),c=Jg((.0193339*e+.119192*n+.9503041*a)/_1);return{l:116*_-16,a:500*(p-_),b:200*(_-c),alpha:o.a}}function w1(o){let e=(o.l+16)/116,n=isNaN(o.a)?e:e+o.a/500,a=isNaN(o.b)?e:e-o.b/200;return e=y1*Yg(e),n=g1*Yg(n),a=_1*Yg(a),new no(Qg(3.2404542*n-1.5371385*e-.4985314*a),Qg(-.969266*n+1.8760108*e+.041556*a),Qg(.0556434*n-.2040259*e+1.0572252*a),o.alpha)}function ZI(o,e,n){return{l:Al(o.l,e.l,n),a:Al(o.a,e.a,n),b:Al(o.b,e.b,n),alpha:Al(o.alpha,e.alpha,n)}}function WI(o){const{l:e,a:n,b:a}=x1(o),p=Math.atan2(a,n)*HI;return{h:p<0?p+360:p,c:Math.sqrt(n*n+a*a),l:e,alpha:o.a}}function XI(o){const e=o.h*GI,n=o.c,a=o.l;return w1({l:a,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:o.alpha})}function KI(o,e,n){const a=e-o;return o+n*(a>180||a<-180?a-360*Math.round(a/360):a)}function JI(o,e,n){return{h:KI(o.h,e.h,n),c:Al(o.c,e.c,n),l:Al(o.l,e.l,n),alpha:Al(o.alpha,e.alpha,n)}}const cf={forward:x1,reverse:w1,interpolate:ZI},hf={forward:WI,reverse:XI,interpolate:JI};var E1=Object.freeze({__proto__:null,lab:cf,hcl:hf});class tu{constructor(e,n,a,p,_){this.type=e,this.operator=n,this.interpolation=a,this.input=p,this.labels=[],this.outputs=[];for(const[c,h]of _)this.labels.push(c),this.outputs.push(h)}static interpolationFactor(e,n,a,p){let _=0;if(e.name==="exponential")_=ey(n,e.base,a,p);else if(e.name==="linear")_=ey(n,1,a,p);else if(e.name==="cubic-bezier"){const c=e.controlPoints;_=new NI(c[0],c[1],c[2],c[3]).solve(ey(n,1,a,p))}return _}static parse(e,n){let[a,p,_,...c]=e;if(!Array.isArray(p)||p.length===0)return n.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const L=p[1];if(typeof L!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:L}}else if(p[0]==="cubic-bezier"){const L=p.slice(1);if(L.length!==4||L.some(z=>typeof z!="number"||z<0||z>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:L}}else return n.error(`Unknown interpolation type ${String(p[0])}`,1,0);if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(_=n.parse(_,2,Fi),!_)return null;const h=[];let I=null;a==="interpolate-hcl"||a==="interpolate-lab"?I=Qc:n.expectedType&&n.expectedType.kind!=="value"&&(I=n.expectedType);for(let L=0;L<c.length;L+=2){const z=c[L],R=c[L+1],O=L+3,Y=L+4;if(typeof z!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(h.length&&h[h.length-1][0]>=z)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const ee=n.parse(R,Y,I);if(!ee)return null;I=I||ee.type,h.push([z,ee])}return I.kind!=="number"&&I.kind!=="color"&&!(I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number")?n.error(`Type ${Xo(I)} is not interpolatable.`):new tu(I,a,p,_,h)}evaluate(e){const n=this.labels,a=this.outputs;if(n.length===1)return a[0].evaluate(e);const p=this.input.evaluate(e);if(p<=n[0])return a[0].evaluate(e);const _=n.length;if(p>=n[_-1])return a[_-1].evaluate(e);const c=Nm(n,p),h=n[c],I=n[c+1],L=tu.interpolationFactor(this.interpolation,p,h,I),z=a[c].evaluate(e),R=a[c+1].evaluate(e);return this.operator==="interpolate"?m1[this.type.kind.toLowerCase()](z,R,L):this.operator==="interpolate-hcl"?hf.reverse(hf.interpolate(hf.forward(z),hf.forward(R),L)):cf.reverse(cf.interpolate(cf.forward(z),cf.forward(R),L))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)n.push(this.labels[a],this.outputs[a].serialize());return n}}function ey(o,e,n,a){const p=a-n,_=o-n;return p===0?0:e===1?_/p:(Math.pow(e,_)-1)/(Math.pow(e,p)-1)}class gf{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let a=null;const p=n.expectedType;p&&p.kind!=="value"&&(a=p);const _=[];for(const h of e.slice(1)){const I=n.parse(h,1+_.length,a,void 0,{typeAnnotation:"omit"});if(!I)return null;a=a||I.type,_.push(I)}return p&&_.some(h=>ff(p,h.type))?new gf(pr,_):new gf(a,_)}evaluate(e){let n=null,a=0,p;for(const _ of this.args){if(a++,n=_.evaluate(e),n&&n instanceof th&&!n.available&&(p||(p=n),n=null,a===this.args.length))return p;if(n!==null)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class jm{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let _=1;_<e.length-1;_+=2){const c=e[_];if(typeof c!="string")return n.error(`Expected string, but found ${typeof c} instead.`,_);if(/[^a-zA-Z0-9_]/.test(c))return n.error("Variable names must contain only alphanumeric characters or '_'.",_);const h=n.parse(e[_+1],_+1);if(!h)return null;a.push([c,h])}const p=n.parse(e[e.length-1],e.length-1,n.expectedType,a);return p?new jm(a,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,a]of this.bindings)e.push(n,a.serialize());return e.push(this.result.serialize()),e}}class Gy{constructor(e,n,a){this.type=e,this.index=n,this.input=a}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=n.parse(e[1],1,Fi),p=n.parse(e[2],2,Jl(n.expectedType||pr));if(!a||!p)return null;const _=p.type;return new Gy(_.itemType,a,p)}evaluate(e){const n=this.index.evaluate(e),a=this.input.evaluate(e);if(n<0)throw new is(`Array index out of bounds: ${n} < 0.`);if(n>=a.length)throw new is(`Array index out of bounds: ${n} > ${a.length-1}.`);if(n!==Math.floor(n))throw new is(`Array index must be an integer, but found ${n} instead.`);return a[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Hy{constructor(e,n){this.type=dr,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=n.parse(e[1],1,pr),p=n.parse(e[2],2,pr);return!a||!p?null:Oy(a.type,[dr,Sr,Fi,Lm,pr])?new Hy(a,p):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xo(a.type)} instead`)}evaluate(e){const n=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!mf(n,["boolean","string","number","null"]))throw new is(`Expected first argument to be of type boolean, string, number or null, but found ${Xo(Na(n))} instead.`);if(!mf(a,["string","array"]))throw new is(`Expected second argument to be of type array or string, but found ${Xo(Na(a))} instead.`);return a.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Sm{constructor(e,n,a){this.type=Fi,this.needle=e,this.haystack=n,this.fromIndex=a}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=n.parse(e[1],1,pr),p=n.parse(e[2],2,pr);if(!a||!p)return null;if(!Oy(a.type,[dr,Sr,Fi,Lm,pr]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xo(a.type)} instead`);if(e.length===4){const _=n.parse(e[3],3,Fi);return _?new Sm(a,p,_):null}else return new Sm(a,p)}evaluate(e){const n=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!mf(n,["boolean","string","number","null"]))throw new is(`Expected first argument to be of type boolean, string, number or null, but found ${Xo(Na(n))} instead.`);if(!mf(a,["string","array"]))throw new is(`Expected second argument to be of type array or string, but found ${Xo(Na(a))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(e);return a.indexOf(n,p)}return a.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Zy{constructor(e,n,a,p,_,c){this.inputType=e,this.type=n,this.input=a,this.cases=p,this.outputs=_,this.otherwise=c}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return n.error("Expected an even number of arguments.");let a,p;n.expectedType&&n.expectedType.kind!=="value"&&(p=n.expectedType);const _={},c=[];for(let L=2;L<e.length-1;L+=2){let z=e[L];const R=e[L+1];Array.isArray(z)||(z=[z]);const O=n.concat(L);if(z.length===0)return O.error("Expected at least one branch label.");for(const ee of z){if(typeof ee!="number"&&typeof ee!="string")return O.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return O.error("Numeric branch labels must be integer values.");if(!a)a=Na(ee);else if(O.checkSubtype(a,Na(ee)))return null;if(typeof _[String(ee)]!="undefined")return O.error("Branch labels must be unique.");_[String(ee)]=c.length}const Y=n.parse(R,L,p);if(!Y)return null;p=p||Y.type,c.push(Y)}const h=n.parse(e[1],1,pr);if(!h)return null;const I=n.parse(e[e.length-1],e.length-1,p);return!I||h.type.kind!=="value"&&n.concat(1).checkSubtype(a,h.type)?null:new Zy(a,p,h,_,c,I)}evaluate(e){const n=this.input.evaluate(e);return(Na(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),a=[],p={};for(const c of n){const h=p[this.cases[c]];h===void 0?(p[this.cases[c]]=a.length,a.push([this.cases[c],[c]])):a[h][1].push(c)}const _=c=>this.inputType.kind==="number"?Number(c):c;for(const[c,h]of a)h.length===1?e.push(_(h[0])):e.push(h.map(_)),e.push(this.outputs[c].serialize());return e.push(this.otherwise.serialize()),e}}class Wy{constructor(e,n,a){this.type=e,this.branches=n,this.otherwise=a}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return n.error("Expected an odd number of arguments.");let a;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);const p=[];for(let c=1;c<e.length-1;c+=2){const h=n.parse(e[c],c,dr);if(!h)return null;const I=n.parse(e[c+1],c+1,a);if(!I)return null;p.push([h,I]),a=a||I.type}const _=n.parse(e[e.length-1],e.length-1,a);return _?new Wy(a,p,_):null}evaluate(e){for(const[n,a]of this.branches)if(n.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,a]of this.branches)e(n),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class Tm{constructor(e,n,a,p){this.type=e,this.input=n,this.beginIndex=a,this.endIndex=p}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=n.parse(e[1],1,pr),p=n.parse(e[2],2,Fi);if(!a||!p)return null;if(!Oy(a.type,[Jl(pr),Sr,pr]))return n.error(`Expected first argument to be of type array or string, but found ${Xo(a.type)} instead`);if(e.length===4){const _=n.parse(e[3],3,Fi);return _?new Tm(a.type,a,p,_):null}else return new Tm(a.type,a,p)}evaluate(e){const n=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!mf(n,["string","array"]))throw new is(`Expected first argument to be of type array or string, but found ${Xo(Na(n))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(e);return n.slice(a,p)}return n.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Av(o,e){return o==="=="||o==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function YI(o,e,n){return e===n}function QI(o,e,n){return e!==n}function $I(o,e,n){return e<n}function eS(o,e,n){return e>n}function tS(o,e,n){return e<=n}function iS(o,e,n){return e>=n}function I1(o,e,n,a){return a.compare(e,n)===0}function nS(o,e,n,a){return!I1(o,e,n,a)}function rS(o,e,n,a){return a.compare(e,n)<0}function oS(o,e,n,a){return a.compare(e,n)>0}function aS(o,e,n,a){return a.compare(e,n)<=0}function sS(o,e,n,a){return a.compare(e,n)>=0}function wp(o,e,n){const a=o!=="=="&&o!=="!=";return class S1{constructor(_,c,h){this.type=dr,this.lhs=_,this.rhs=c,this.collator=h,this.hasUntypedArgument=_.type.kind==="value"||c.type.kind==="value"}static parse(_,c){if(_.length!==3&&_.length!==4)return c.error("Expected two or three arguments.");const h=_[0];let I=c.parse(_[1],1,pr);if(!I)return null;if(!Av(h,I.type))return c.concat(1).error(`"${h}" comparisons are not supported for type '${Xo(I.type)}'.`);let L=c.parse(_[2],2,pr);if(!L)return null;if(!Av(h,L.type))return c.concat(2).error(`"${h}" comparisons are not supported for type '${Xo(L.type)}'.`);if(I.type.kind!==L.type.kind&&I.type.kind!=="value"&&L.type.kind!=="value")return c.error(`Cannot compare types '${Xo(I.type)}' and '${Xo(L.type)}'.`);a&&(I.type.kind==="value"&&L.type.kind!=="value"?I=new Bu(L.type,[I]):I.type.kind!=="value"&&L.type.kind==="value"&&(L=new Bu(I.type,[L])));let z=null;if(_.length===4){if(I.type.kind!=="string"&&L.type.kind!=="string"&&I.type.kind!=="value"&&L.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(z=c.parse(_[3],3,zm),!z)return null}return new S1(I,L,z)}evaluate(_){const c=this.lhs.evaluate(_),h=this.rhs.evaluate(_);if(a&&this.hasUntypedArgument){const I=Na(c),L=Na(h);if(I.kind!==L.kind||!(I.kind==="string"||I.kind==="number"))throw new is(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${I.kind}, ${L.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const I=Na(c),L=Na(h);if(I.kind!=="string"||L.kind!=="string")return e(_,c,h)}return this.collator?n(_,c,h,this.collator.evaluate(_)):e(_,c,h)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}serialize(){const _=[o];return this.eachChild(c=>{_.push(c.serialize())}),_}}}const lS=wp("==",YI,I1),uS=wp("!=",QI,nS),cS=wp("<",$I,rS),hS=wp(">",eS,oS),dS=wp("<=",tS,aS),pS=wp(">=",iS,sS);class Xy{constructor(e,n,a,p,_){this.type=Sr,this.number=e,this.locale=n,this.currency=a,this.minFractionDigits=p,this.maxFractionDigits=_}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const a=n.parse(e[1],1,Fi);if(!a)return null;const p=e[2];if(typeof p!="object"||Array.isArray(p))return n.error("NumberFormat options argument must be an object.");let _=null;if(p.locale&&(_=n.parse(p.locale,1,Sr),!_))return null;let c=null;if(p.currency&&(c=n.parse(p.currency,1,Sr),!c))return null;let h=null;if(p["min-fraction-digits"]&&(h=n.parse(p["min-fraction-digits"],1,Fi),!h))return null;let I=null;return p["max-fraction-digits"]&&(I=n.parse(p["max-fraction-digits"],1,Fi),!I)?null:new Xy(a,_,c,h,I)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Ky{constructor(e){this.type=Fi,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=n.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Xo(a.type)} instead.`):new Ky(a):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string")return n.length;if(Array.isArray(n))return n.length;throw new is(`Expected value to be of type string or array, but found ${Xo(Na(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}const Jy={"==":lS,"!=":uS,">":hS,"<":cS,">=":pS,"<=":dS,array:Bu,at:Gy,boolean:Bu,case:Wy,coalesce:gf,collator:Bm,format:Rm,image:Om,in:Hy,"index-of":Sm,interpolate:tu,"interpolate-hcl":tu,"interpolate-lab":tu,length:Ky,let:jm,literal:gp,match:Zy,number:Bu,"number-format":Xy,object:Bu,slice:Tm,step:Vm,string:Bu,"to-boolean":Rh,"to-color":Rh,"to-number":Rh,"to-string":Rh,var:Fm,within:Sd};function Cv(o,[e,n,a,p]){e=e.evaluate(o),n=n.evaluate(o),a=a.evaluate(o);const _=p?p.evaluate(o):1,c=c1(e,n,a,_);if(c)throw new is(c);return new no(e/255*_,n/255*_,a/255*_,_)}function kv(o,e){return o in e}function ty(o,e){const n=e[o];return typeof n=="undefined"?null:n}function fS(o,e,n,a){for(;n<=a;){const p=n+a>>1;if(e[p]===o)return!0;e[p]>o?a=p-1:n=p+1}return!1}function dd(o){return{type:o}}Fu.register(Jy,{error:[xI,[Sr],(o,[e])=>{throw new is(e.evaluate(o))}],typeof:[Sr,[pr],(o,[e])=>Xo(Na(e.evaluate(o)))],"to-rgba":[Jl(Fi,4),[Qc],(o,[e])=>e.evaluate(o).toArray()],rgb:[Qc,[Fi,Fi,Fi],Cv],rgba:[Qc,[Fi,Fi,Fi,Fi],Cv],has:{type:dr,overloads:[[[Sr],(o,[e])=>kv(e.evaluate(o),o.properties())],[[Sr,cp],(o,[e,n])=>kv(e.evaluate(o),n.evaluate(o))]]},get:{type:pr,overloads:[[[Sr],(o,[e])=>ty(e.evaluate(o),o.properties())],[[Sr,cp],(o,[e,n])=>ty(e.evaluate(o),n.evaluate(o))]]},"feature-state":[pr,[Sr],(o,[e])=>ty(e.evaluate(o),o.featureState||{})],properties:[cp,[],o=>o.properties()],"geometry-type":[Sr,[],o=>o.geometryType()],id:[pr,[],o=>o.id()],zoom:[Fi,[],o=>o.globals.zoom],pitch:[Fi,[],o=>o.globals.pitch||0],"distance-from-center":[Fi,[],o=>o.distanceFromCenter()],"heatmap-density":[Fi,[],o=>o.globals.heatmapDensity||0],"line-progress":[Fi,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[Fi,[],o=>o.globals.skyRadialProgress||0],accumulated:[pr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Fi,dd(Fi),(o,e)=>{let n=0;for(const a of e)n+=a.evaluate(o);return n}],"*":[Fi,dd(Fi),(o,e)=>{let n=1;for(const a of e)n*=a.evaluate(o);return n}],"-":{type:Fi,overloads:[[[Fi,Fi],(o,[e,n])=>e.evaluate(o)-n.evaluate(o)],[[Fi],(o,[e])=>-e.evaluate(o)]]},"/":[Fi,[Fi,Fi],(o,[e,n])=>e.evaluate(o)/n.evaluate(o)],"%":[Fi,[Fi,Fi],(o,[e,n])=>e.evaluate(o)%n.evaluate(o)],ln2:[Fi,[],()=>Math.LN2],pi:[Fi,[],()=>Math.PI],e:[Fi,[],()=>Math.E],"^":[Fi,[Fi,Fi],(o,[e,n])=>Math.pow(e.evaluate(o),n.evaluate(o))],sqrt:[Fi,[Fi],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[Fi,[Fi],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[Fi,[Fi],(o,[e])=>Math.log(e.evaluate(o))],log2:[Fi,[Fi],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[Fi,[Fi],(o,[e])=>Math.sin(e.evaluate(o))],cos:[Fi,[Fi],(o,[e])=>Math.cos(e.evaluate(o))],tan:[Fi,[Fi],(o,[e])=>Math.tan(e.evaluate(o))],asin:[Fi,[Fi],(o,[e])=>Math.asin(e.evaluate(o))],acos:[Fi,[Fi],(o,[e])=>Math.acos(e.evaluate(o))],atan:[Fi,[Fi],(o,[e])=>Math.atan(e.evaluate(o))],min:[Fi,dd(Fi),(o,e)=>Math.min(...e.map(n=>n.evaluate(o)))],max:[Fi,dd(Fi),(o,e)=>Math.max(...e.map(n=>n.evaluate(o)))],abs:[Fi,[Fi],(o,[e])=>Math.abs(e.evaluate(o))],round:[Fi,[Fi],(o,[e])=>{const n=e.evaluate(o);return n<0?-Math.round(-n):Math.round(n)}],floor:[Fi,[Fi],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[Fi,[Fi],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[dr,[Sr,pr],(o,[e,n])=>o.properties()[e.value]===n.value],"filter-id-==":[dr,[pr],(o,[e])=>o.id()===e.value],"filter-type-==":[dr,[Sr],(o,[e])=>o.geometryType()===e.value],"filter-<":[dr,[Sr,pr],(o,[e,n])=>{const a=o.properties()[e.value],p=n.value;return typeof a==typeof p&&a<p}],"filter-id-<":[dr,[pr],(o,[e])=>{const n=o.id(),a=e.value;return typeof n==typeof a&&n<a}],"filter->":[dr,[Sr,pr],(o,[e,n])=>{const a=o.properties()[e.value],p=n.value;return typeof a==typeof p&&a>p}],"filter-id->":[dr,[pr],(o,[e])=>{const n=o.id(),a=e.value;return typeof n==typeof a&&n>a}],"filter-<=":[dr,[Sr,pr],(o,[e,n])=>{const a=o.properties()[e.value],p=n.value;return typeof a==typeof p&&a<=p}],"filter-id-<=":[dr,[pr],(o,[e])=>{const n=o.id(),a=e.value;return typeof n==typeof a&&n<=a}],"filter->=":[dr,[Sr,pr],(o,[e,n])=>{const a=o.properties()[e.value],p=n.value;return typeof a==typeof p&&a>=p}],"filter-id->=":[dr,[pr],(o,[e])=>{const n=o.id(),a=e.value;return typeof n==typeof a&&n>=a}],"filter-has":[dr,[pr],(o,[e])=>e.value in o.properties()],"filter-has-id":[dr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[dr,[Jl(Sr)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[dr,[Jl(pr)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[dr,[Sr,Jl(pr)],(o,[e,n])=>n.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[dr,[Sr,Jl(pr)],(o,[e,n])=>fS(o.properties()[e.value],n.value,0,n.value.length-1)],all:{type:dr,overloads:[[[dr,dr],(o,[e,n])=>e.evaluate(o)&&n.evaluate(o)],[dd(dr),(o,e)=>{for(const n of e)if(!n.evaluate(o))return!1;return!0}]]},any:{type:dr,overloads:[[[dr,dr],(o,[e,n])=>e.evaluate(o)||n.evaluate(o)],[dd(dr),(o,e)=>{for(const n of e)if(n.evaluate(o))return!0;return!1}]]},"!":[dr,[dr],(o,[e])=>!e.evaluate(o)],"is-supported-script":[dr,[Sr],(o,[e])=>{const n=o.globals&&o.globals.isSupportedScript;return n?n(e.evaluate(o)):!0}],upcase:[Sr,[Sr],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[Sr,[Sr],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[Sr,dd(pr),(o,e)=>e.map(n=>df(n.evaluate(o))).join("")],"resolved-locale":[Sr,[zm],(o,[e])=>e.evaluate(o).resolvedLocale()]});function xy(o){return{result:"success",value:o}}function lp(o){return{result:"error",value:o}}function mS(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function gS(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function T1(o){return!!o.expression&&o.expression.interpolated}function Yy(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Qy(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function yS(o){return o}function $y(o,e){const n=e.type==="color",a=o.stops&&typeof o.stops[0][0]=="object",p=a||o.property!==void 0,_=a||!p,c=o.type||(T1(e)?"exponential":"interval");if(n&&(o=u1({},o),o.stops&&(o.stops=o.stops.map(z=>[z[0],no.parse(z[1])])),o.default?o.default=no.parse(o.default):o.default=no.parse(e.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!E1[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let h,I,L;if(c==="exponential")h=Mv;else if(c==="interval")h=vS;else if(c==="categorical"){h=_S,I=Object.create(null);for(const z of o.stops)I[z[0]]=z[1];L=typeof o.stops[0][0]}else if(c==="identity")h=bS;else throw new Error(`Unknown function type "${c}"`);if(a){const z={},R=[];for(let ee=0;ee<o.stops.length;ee++){const ue=o.stops[ee],te=ue[0].zoom;z[te]===void 0&&(z[te]={zoom:te,type:o.type,property:o.property,default:o.default,stops:[]},R.push(te)),z[te].stops.push([ue[0].value,ue[1]])}const O=[];for(const ee of R)O.push([z[ee].zoom,$y(z[ee],e)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:tu.interpolationFactor.bind(void 0,Y),zoomStops:O.map(ee=>ee[0]),evaluate({zoom:ee},ue){return Mv({stops:O,base:o.base},e,ee).evaluate(ee,ue)}}}else if(_){const z=c==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:tu.interpolationFactor.bind(void 0,z),zoomStops:o.stops.map(R=>R[0]),evaluate:({zoom:R})=>h(o,e,R,I,L)}}else return{kind:"source",evaluate(z,R){const O=R&&R.properties?R.properties[o.property]:void 0;return O===void 0?wf(o.default,e.default):h(o,e,O,I,L)}}}function wf(o,e,n){if(o!==void 0)return o;if(e!==void 0)return e;if(n!==void 0)return n}function _S(o,e,n,a,p){const _=typeof n===p?a[n]:void 0;return wf(_,o.default,e.default)}function vS(o,e,n){if(Yy(n)!=="number")return wf(o.default,e.default);const a=o.stops.length;if(a===1||n<=o.stops[0][0])return o.stops[0][1];if(n>=o.stops[a-1][0])return o.stops[a-1][1];const p=Nm(o.stops.map(_=>_[0]),n);return o.stops[p][1]}function Mv(o,e,n){const a=o.base!==void 0?o.base:1;if(Yy(n)!=="number")return wf(o.default,e.default);const p=o.stops.length;if(p===1||n<=o.stops[0][0])return o.stops[0][1];if(n>=o.stops[p-1][0])return o.stops[p-1][1];const _=Nm(o.stops.map(z=>z[0]),n),c=xS(n,a,o.stops[_][0],o.stops[_+1][0]),h=o.stops[_][1],I=o.stops[_+1][1];let L=m1[e.type]||yS;if(o.colorSpace&&o.colorSpace!=="rgb"){const z=E1[o.colorSpace];L=(R,O)=>z.reverse(z.interpolate(z.forward(R),z.forward(O),c))}return typeof h.evaluate=="function"?{evaluate(...z){const R=h.evaluate.apply(void 0,z),O=I.evaluate.apply(void 0,z);if(!(R===void 0||O===void 0))return L(R,O,c)}}:L(h,I,c)}function bS(o,e,n){return e.type==="color"?n=no.parse(n):e.type==="formatted"?n=Uu.fromString(n.toString()):e.type==="resolvedImage"?n=th.fromString(n.toString()):Yy(n)!==e.type&&(e.type!=="enum"||!e.values[n])&&(n=void 0),wf(n,o.default,e.default)}function xS(o,e,n,a){const p=a-n,_=o-n;return p===0?0:e===1?_/p:(Math.pow(e,_)-1)/(Math.pow(e,p)-1)}class A1{constructor(e,n){this.expression=e,this._warningHistory={},this._evaluator=new h1,this._defaultValue=n?IS(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,a,p,_,c,h,I){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=a,this._evaluator.canonical=p||null,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=c,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,a,p,_,c,h,I){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=a||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=c||null,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=I||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!==L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new is(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console!="undefined"&&console.warn(L.message)),this._defaultValue}}}function C1(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Jy}function k1(o,e){const n=new Um(Jy,[],e?ES(e):void 0),a=n.parse(o,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?xy(new A1(a,e)):lp(n.errors)}class wy{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!jy(n.expression)}evaluateWithoutErrorHandling(e,n,a,p,_,c){return this._styleExpression.evaluateWithoutErrorHandling(e,n,a,p,_,c)}evaluate(e,n,a,p,_,c){return this._styleExpression.evaluate(e,n,a,p,_,c)}}class Ey{constructor(e,n,a,p){this.kind=e,this.zoomStops=a,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!jy(n.expression),this.interpolationType=p}evaluateWithoutErrorHandling(e,n,a,p,_,c){return this._styleExpression.evaluateWithoutErrorHandling(e,n,a,p,_,c)}evaluate(e,n,a,p,_,c){return this._styleExpression.evaluate(e,n,a,p,_,c)}interpolationFactor(e,n,a){return this.interpolationType?tu.interpolationFactor(this.interpolationType,e,n,a):0}}function M1(o,e){if(o=k1(o,e),o.result==="error")return o;const n=o.value.expression,a=Vy(n);if(!a&&!mS(e))return lp([new yc("","data expressions not supported")]);const p=qy(n,["zoom","pitch","distance-from-center"]);if(!p&&!gS(e))return lp([new yc("","zoom expressions not supported")]);const _=_m(n);if(!_&&!p)return lp([new yc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(_ instanceof yc)return lp([_]);if(_ instanceof tu&&!T1(e))return lp([new yc("",'"interpolate" expressions cannot be used with this property')]);if(!_)return xy(a?new wy("constant",o.value):new wy("source",o.value));const c=_ instanceof tu?_.interpolation:void 0;return xy(a?new Ey("camera",o.value,_.labels,c):new Ey("composite",o.value,_.labels,c))}class qm{constructor(e,n){this._parameters=e,this._specification=n,u1(this,$y(this._parameters,this._specification))}static deserialize(e){return new qm(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function wS(o,e){if(Qy(o))return new qm(o,e);if(C1(o)){const n=M1(o,e);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return n.value}else{let n=o;return typeof o=="string"&&e.type==="color"&&(n=no.parse(o)),{kind:"constant",evaluate:()=>n}}}function _m(o){let e=null;if(o instanceof jm)e=_m(o.result);else if(o instanceof gf){for(const n of o.args)if(e=_m(n),e)break}else(o instanceof Vm||o instanceof tu)&&o.input instanceof Fu&&o.input.name==="zoom"&&(e=o);return e instanceof yc||o.eachChild(n=>{const a=_m(n);a instanceof yc?e=a:!e&&a?e=new yc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new yc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function ES(o){const e={color:Qc,string:Sr,number:Fi,enum:Sr,boolean:dr,formatted:Dm,resolvedImage:xf};return o.type==="array"?Jl(e[o.value]||pr,o.length):e[o.type]}function IS(o){return o.type==="color"&&Qy(o.default)?new no(0,0,0,0):o.type==="color"?no.parse(o.default)||null:o.default===void 0?null:o.default}function yf(o){return typeof o=="object"?["literal",o]:o}function SS(o,e){let n=o.stops;if(!n)return TS(o,e);const a=n&&typeof n[0][0]=="object",p=a||o.property!==void 0,_=a||!p;return n=n.map(c=>!p&&e.tokens&&typeof c[1]=="string"?[c[0],MS(c[1])]:[c[0],yf(c[1])]),a?AS(o,e,n):_?kS(o,e,n):Iy(o,e,n)}function TS(o,e){const n=["get",o.property];if(o.default===void 0)return e.type==="string"?["string",n]:n;if(e.type==="enum")return["match",n,Object.keys(e.values),n,o.default];{const a=[e.type==="color"?"to-color":e.type,n,yf(o.default)];return e.type==="array"&&a.splice(1,0,e.value,e.length||null),a}}function e_(o){switch(o.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function AS(o,e,n){const a={},p={},_=[];for(let h=0;h<n.length;h++){const I=n[h],L=I[0].zoom;a[L]===void 0&&(a[L]={zoom:L,type:o.type,property:o.property,default:o.default},p[L]=[],_.push(L)),p[L].push([I[0].value,I[1]])}if(i_({},e)==="exponential"){const h=[e_(o),["linear"],["zoom"]];for(const I of _){const L=Iy(a[I],e,p[I]);dp(h,I,L,!1)}return h}else{const h=["step",["zoom"]];for(const I of _){const L=Iy(a[I],e,p[I]);dp(h,I,L,!0)}return t_(h),h}}function CS(o,e){if(o!==void 0)return o;if(e!==void 0)return e}function Pv(o,e){const n=yf(CS(o.default,e.default));return n===void 0&&e.type==="resolvedImage"?"":n}function Iy(o,e,n){const a=i_(o,e),p=["get",o.property];if(a==="categorical"&&typeof n[0][0]=="boolean"){const _=["case"];for(const c of n)_.push(["==",p,c[0]],c[1]);return _.push(Pv(o,e)),_}else if(a==="categorical"){const _=["match",p];for(const c of n)dp(_,c[0],c[1],!1);return _.push(Pv(o,e)),_}else if(a==="interval"){const _=["step",["number",p]];for(const c of n)dp(_,c[0],c[1],!0);return t_(_),o.default===void 0?_:["case",["==",["typeof",p],"number"],_,yf(o.default)]}else if(a==="exponential"){const _=o.base!==void 0?o.base:1,c=[e_(o),_===1?["linear"]:["exponential",_],["number",p]];for(const h of n)dp(c,h[0],h[1],!1);return o.default===void 0?c:["case",["==",["typeof",p],"number"],c,yf(o.default)]}else throw new Error(`Unknown property function type ${a}`)}function kS(o,e,n,a=["zoom"]){const p=i_(o,e);let _,c=!1;if(p==="interval")_=["step",a],c=!0;else if(p==="exponential"){const h=o.base!==void 0?o.base:1;_=[e_(o),h===1?["linear"]:["exponential",h],a]}else throw new Error(`Unknown zoom function type "${p}"`);for(const h of n)dp(_,h[0],h[1],c);return t_(_),_}function t_(o){o[0]==="step"&&o.length===3&&(o.push(0),o.push(o[3]))}function dp(o,e,n,a){o.length>3&&e===o[o.length-2]||(a&&o.length===2||o.push(e),o.push(n))}function i_(o,e){return o.type?o.type:e.expression.interpolated?"exponential":"interval"}function MS(o){const e=["concat"],n=/{([^{}]+)}/g;let a=0;for(let p=n.exec(o);p!==null;p=n.exec(o)){const _=o.slice(a,n.lastIndex-p[0].length);a=n.lastIndex,_.length>0&&e.push(_),e.push(["get",p[1]])}if(e.length===1)return o;if(a<o.length)e.push(o.slice(a));else if(e.length===2)return["to-string",e[1]];return e}function P1(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!P1(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}Pm(function(o,e){var n=function(){var a=function(de,oe,be,qe){for(be=be||{},qe=de.length;qe--;be[de[qe]]=oe);return be},p=[1,12],_=[1,13],c=[1,9],h=[1,10],I=[1,11],L=[1,14],z=[1,15],R=[14,18,22,24],O=[18,22],Y=[22,24],ee={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(oe,be,qe,Ne,De,fe,ct){var st=fe.length-1;switch(De){case 1:this.$=new String(oe.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(oe),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=fe[st-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=fe[st-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[fe[st-2],fe[st]];break;case 16:this.$={},this.$[fe[st][0]]=fe[st][1];break;case 17:this.$=fe[st-2],fe[st-2][fe[st][0]]=fe[st][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[fe[st]];break;case 21:this.$=fe[st-2],fe[st-2].push(fe[st]);break}},table:[{3:5,4:p,5:6,6:_,7:3,8:c,9:4,10:h,11:I,12:1,13:2,15:7,16:8,17:L,23:z},{1:[3]},{14:[1,16]},a(R,[2,7]),a(R,[2,8]),a(R,[2,9]),a(R,[2,10]),a(R,[2,11]),a(R,[2,12]),a(R,[2,3]),a(R,[2,4]),a(R,[2,5]),a([14,18,21,22,24],[2,1]),a(R,[2,2]),{3:20,4:p,18:[1,17],19:18,20:19},{3:5,4:p,5:6,6:_,7:3,8:c,9:4,10:h,11:I,13:23,15:7,16:8,17:L,23:z,24:[1,21],25:22},{1:[2,6]},a(R,[2,13]),{18:[1,24],22:[1,25]},a(O,[2,16]),{21:[1,26]},a(R,[2,18]),{22:[1,28],24:[1,27]},a(Y,[2,20]),a(R,[2,14]),{3:20,4:p,20:29},{3:5,4:p,5:6,6:_,7:3,8:c,9:4,10:h,11:I,13:30,15:7,16:8,17:L,23:z},a(R,[2,19]),{3:5,4:p,5:6,6:_,7:3,8:c,9:4,10:h,11:I,13:31,15:7,16:8,17:L,23:z},a(O,[2,17]),a(O,[2,15]),a(Y,[2,21])],defaultActions:{16:[2,6]},parseError:function(oe,be){if(be.recoverable)this.trace(oe);else throw new Error(oe)},parse:function(oe){var be=this,qe=[0],Ne=[null],De=[],fe=this.table,ct="",st=0,Ge=0,Ue=2,Rt=1,He=De.slice.call(arguments,1),Mt=Object.create(this.lexer),li={yy:{}};for(var Et in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Et)&&(li.yy[Et]=this.yy[Et]);Mt.setInput(oe,li.yy),li.yy.lexer=Mt,li.yy.parser=this,typeof Mt.yylloc=="undefined"&&(Mt.yylloc={});var Gt=Mt.yylloc;De.push(Gt);var Ye=Mt.options&&Mt.options.ranges;typeof li.yy.parseError=="function"?this.parseError=li.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function wt(){var St;return St=Mt.lex()||Rt,typeof St!="number"&&(St=be.symbols_[St]||St),St}for(var Lt,ni,Xt,Ki,ei={},Jt,xi,ai,dt;;){if(ni=qe[qe.length-1],this.defaultActions[ni]?Xt=this.defaultActions[ni]:((Lt===null||typeof Lt=="undefined")&&(Lt=wt()),Xt=fe[ni]&&fe[ni][Lt]),typeof Xt=="undefined"||!Xt.length||!Xt[0]){var It="";dt=[];for(Jt in fe[ni])this.terminals_[Jt]&&Jt>Ue&&dt.push("'"+this.terminals_[Jt]+"'");Mt.showPosition?It="Parse error on line "+(st+1)+`:
`+Mt.showPosition()+`
Expecting `+dt.join(", ")+", got '"+(this.terminals_[Lt]||Lt)+"'":It="Parse error on line "+(st+1)+": Unexpected "+(Lt==Rt?"end of input":"'"+(this.terminals_[Lt]||Lt)+"'"),this.parseError(It,{text:Mt.match,token:this.terminals_[Lt]||Lt,line:Mt.yylineno,loc:Gt,expected:dt})}if(Xt[0]instanceof Array&&Xt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ni+", token: "+Lt);switch(Xt[0]){case 1:qe.push(Lt),Ne.push(Mt.yytext),De.push(Mt.yylloc),qe.push(Xt[1]),Lt=null,Ge=Mt.yyleng,ct=Mt.yytext,st=Mt.yylineno,Gt=Mt.yylloc;break;case 2:if(xi=this.productions_[Xt[1]][1],ei.$=Ne[Ne.length-xi],ei._$={first_line:De[De.length-(xi||1)].first_line,last_line:De[De.length-1].last_line,first_column:De[De.length-(xi||1)].first_column,last_column:De[De.length-1].last_column},Ye&&(ei._$.range=[De[De.length-(xi||1)].range[0],De[De.length-1].range[1]]),Ki=this.performAction.apply(ei,[ct,Ge,st,li.yy,Xt[1],Ne,De].concat(He)),typeof Ki!="undefined")return Ki;xi&&(qe=qe.slice(0,-1*xi*2),Ne=Ne.slice(0,-1*xi),De=De.slice(0,-1*xi)),qe.push(this.productions_[Xt[1]][0]),Ne.push(ei.$),De.push(ei._$),ai=fe[qe[qe.length-2]][qe[qe.length-1]],qe.push(ai);break;case 3:return!0}}return!0}},ue=function(){var de={EOF:1,parseError:function(be,qe){if(this.yy.parser)this.yy.parser.parseError(be,qe);else throw new Error(be)},setInput:function(oe,be){return this.yy=be||this.yy||{},this._input=oe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var oe=this._input[0];this.yytext+=oe,this.yyleng++,this.offset++,this.match+=oe,this.matched+=oe;var be=oe.match(/(?:\r\n?|\n).*/g);return be?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),oe},unput:function(oe){var be=oe.length,qe=oe.split(/(?:\r\n?|\n)/g);this._input=oe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-be),this.offset-=be;var Ne=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),qe.length-1&&(this.yylineno-=qe.length-1);var De=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:qe?(qe.length===Ne.length?this.yylloc.first_column:0)+Ne[Ne.length-qe.length].length-qe[0].length:this.yylloc.first_column-be},this.options.ranges&&(this.yylloc.range=[De[0],De[0]+this.yyleng-be]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(oe){this.unput(this.match.slice(oe))},pastInput:function(){var oe=this.matched.substr(0,this.matched.length-this.match.length);return(oe.length>20?"...":"")+oe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var oe=this.match;return oe.length<20&&(oe+=this._input.substr(0,20-oe.length)),(oe.substr(0,20)+(oe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var oe=this.pastInput(),be=new Array(oe.length+1).join("-");return oe+this.upcomingInput()+`
`+be+"^"},test_match:function(oe,be){var qe,Ne,De;if(this.options.backtrack_lexer&&(De={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(De.yylloc.range=this.yylloc.range.slice(0))),Ne=oe[0].match(/(?:\r\n?|\n).*/g),Ne&&(this.yylineno+=Ne.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ne?Ne[Ne.length-1].length-Ne[Ne.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+oe[0].length},this.yytext+=oe[0],this.match+=oe[0],this.matches=oe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(oe[0].length),this.matched+=oe[0],qe=this.performAction.call(this,this.yy,this,be,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),qe)return qe;if(this._backtrack){for(var fe in De)this[fe]=De[fe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var oe,be,qe,Ne;this._more||(this.yytext="",this.match="");for(var De=this._currentRules(),fe=0;fe<De.length;fe++)if(qe=this._input.match(this.rules[De[fe]]),qe&&(!be||qe[0].length>be[0].length)){if(be=qe,Ne=fe,this.options.backtrack_lexer){if(oe=this.test_match(qe,De[fe]),oe!==!1)return oe;if(this._backtrack){be=!1;continue}else return!1}else if(!this.options.flex)break}return be?(oe=this.test_match(be,De[Ne]),oe!==!1?oe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var be=this.next();return be||this.lex()},begin:function(be){this.conditionStack.push(be)},popState:function(){var be=this.conditionStack.length-1;return be>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(be){return be=this.conditionStack.length-1-Math.abs(be||0),be>=0?this.conditionStack[be]:"INITIAL"},pushState:function(be){this.begin(be)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(be,qe,Ne,De){switch(Ne){case 0:break;case 1:return 6;case 2:return qe.yytext=qe.yytext.substr(1,qe.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return de}();ee.lexer=ue;function te(){this.yy={}}return te.prototype=ee,ee.Parser=te,new te}();typeof yI!="undefined"&&(e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)})});const PS={StyleExpression:A1,isExpression:C1,isExpressionFilter:P1,createExpression:k1,createPropertyExpression:M1,normalizePropertyExpression:wS,ZoomConstantExpression:wy,ZoomDependentExpression:Ey,StylePropertyFunction:qm},LS={convertFunction:SS,createFunction:$y,isFunction:Qy};function zS(o){var e=o.expr,n=o.layer,a=Math.min(e(n,"paint","circle-radius"),8),p=Math.min(e(n,"paint","circle-stroke-width"),4),_=e(n,"paint","circle-color"),c=e(n,"paint","circle-opacity"),h=e(n,"paint","circle-stroke-color"),I=e(n,"paint","circle-stroke-opacity"),L=a-p/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(n,"paint","circle-blur")*L+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:_,opacity:c,r:L}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:I,r:a,"stroke-width":p,stroke:h}}]}}function DS(o){var e=o.expr,n=o.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,o.image)(e(n,"paint","fill-pattern"))+")",backgroundColor:e(n,"paint","fill-color"),opacity:e(n,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function RS(o){var e=o.layer,n=o.expr,a=(0,o.image)(n(e,"paint","line-pattern")),p={stroke:a?"url(#img1)":n(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(n(e,"paint","line-width"),8)),strokeOpacity:n(e,"paint","line-opacity")},_=p.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:p.strokeWidth,height:p.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-_/2+" "+-_/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:a,x:0,y:0,width:p.strokeWidth,height:p.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:p,stroke:p.stroke,d:"M0 20 L 20 0"}}]}}function OS(o){return function(h){var I=h.image,L=(0,h.expr)(h.layer,"layout","icon-image");if(!L)return null;var z=I(L);return z?{element:"div",attributes:{style:{backgroundImage:"url("+z+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(o)||(p=(n=(e=o).expr)(a=e.layer,"paint","text-color"),_=n(a,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:c="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:n(a,"paint","text-halo-color"),"stroke-width":2*n(a,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:c,fill:"white"}},{element:"path",attributes:{key:"l3",d:c,fill:p,opacity:_}}]});var e,n,a,p,_,c}var BS=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function FS(o){var e,n=o.sprite,a=o.layer,p={circle:zS,symbol:OS,line:RS,fill:DS}[a.type],_=(e=o.zoom,function(c,h,I){var L=function(ee){var ue=BS.find(function(te){return ee.startsWith(te[0])});return ue?ue[1]||ue[0]:null}(I),z=gI[h+"_"+L][I];if(!c[h])return z.default;var R=c[h][I];if(R===void 0)return z.default;if(typeof R=="object"){var O;if(!(O=Array.isArray(R)?PS.createExpression(R).value:LS.createFunction(R,z)).evaluate)return null;var Y=O.evaluate({zoom:e},{});return Y?Y.name||Y:null}return R});return p?p({layer:a,expr:_,image:function(c){if(n&&n.json){var h=n.json[c];if(h)return I=n.image,z=(L=h).x,R=L.y,O=L.width,Y=L.height,(ee=document.createElement("canvas")).width=2*O,ee.height=2*Y,ee.getContext("2d").drawImage(I,2*z,2*R,2*O,2*Y,0,0,2*O,2*Y),ee.toDataURL()}var I,L,z,R,O,Y,ee;return null}}):null}class US{constructor(e){this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let n=!1;const a=new Promise((p,_)=>{const c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{n||p(c)},c.onerror=h=>{n||_(h)},c.src=e});return a.cancel=()=>{n=!0},a}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){let n;if(e.layout&&e.layout["icon-image"]){let a=e.layout["icon-image"];if(Array.isArray(a)&&(a=a[a.length-1]),this.sprite.json){let p;Object.keys(this.sprite.json).forEach(_=>{_===a&&(p=this.sprite.json[_])}),p&&(n=this.extractPartOfImage(this.sprite.image,p))}}return n}extractPartOfImage(e,n){const p=document.createElement("canvas");return p.width=n.width*1,p.height=n.height*1,p.getContext("2d").drawImage(e,n.x*1,n.y*1,n.width*1,n.height*1,0,0,n.width*1,n.height*1),p.toDataURL()}}function NS(o){let e,n=o[0].innerHTML+"";return{c(){e=yi("div"),this.h()},l(a){e=_i(a,"DIV",{class:!0});var p=pi(e);p.forEach(We),this.h()},h(){ii(e,"class","legend svelte-1dizgfa")},m(a,p){Dt(a,e,p),e.innerHTML=n},p(a,[p]){p&1&&n!==(n=a[0].innerHTML+"")&&(e.innerHTML=n)},i:Vo,o:Vo,d(a){a&&We(e)}}}function VS(o,e,n){let a,p;jo(o,bp,I=>n(2,a=I)),jo(o,_v,I=>n(3,p=I));let{layer:_}=e,c=document.createElement("div");const h=async()=>{if(!p){const R=a.getStyle().sprite,O=new US(R);await O.load(),_v.update(()=>O)}const I=a.getZoom(),L=FS({zoom:I,layer:_});if(n(0,c.innerText="",c),L){let R,O,Y;switch(L.element){case"div":if(L.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(L.attributes.style.backgroundImage)){var z=document.createElement("img");z.src=L.attributes.style.backgroundImage.replace("url(","").replace(")",""),z.alt=_.id,z.style.cssText="height: 24px;",c.appendChild(z)}R=document.createElement("div"),R.style.height="24px",R.style.width="50px",R.style.backgroundColor=L.attributes.style.backgroundColor,R.style.backgroundPosition=L.attributes.style.backgroundPosition,R.style.backgroundSize=L.attributes.style.backgroundSize,R.style.backgroundRepeat=L.attributes.style.backgroundRepeat,R.style.opacity=L.attributes.style.opacity,c.appendChild(R);break;case"svg":if(Y=p.getIconDataUrl(_),Y){const ee=document.createElement("img");ee.src=Y,ee.alt=_.id,ee.style.cssText="height: 24px;",c.appendChild(ee);break}O=document.createElementNS("http://www.w3.org/2000/svg","svg"),O.style.cssText="height: 24px;",O.setAttributeNS(null,"version","1.1"),Object.keys(L.attributes).forEach(ee=>{O.setAttribute(ee,L.attributes[ee]);let ue=document.createElementNS("http://www.w3.org/2000/svg","g");L.children.forEach(te=>{var de=document.createElementNS("http://www.w3.org/2000/svg",te.element);Object.keys(te.attributes).forEach(oe=>{de.setAttributeNS(null,oe,te.attributes[oe])}),ue.appendChild(de)}),O.appendChild(ue)}),c.appendChild(O);break;default:console.log(L.element);return}}else{const R=document.createElementNS("http://www.w3.org/2000/svg","svg"),O=document.createElementNS("http://www.w3.org/2000/svg","path"),Y=document.createElementNS("http://www.w3.org/2000/svg","path");R.setAttribute("fill","none"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("stroke","black"),R.classList.add("post-icon"),O.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),O.setAttribute("stroke-linecap","round"),O.setAttribute("stroke-linejoin","round"),O.setAttribute("stroke-width","2"),Y.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),Y.setAttribute("stroke-linecap","round"),Y.setAttribute("stroke-linejoin","round"),Y.setAttribute("stroke-width","2"),R.appendChild(O),R.appendChild(Y),c.appendChild(R)}};return a.on("moveend",h),a.on("zoom",h),o.$$set=I=>{"layer"in I&&n(1,_=I.layer)},o.$$.update=()=>{o.$$.dirty&2&&h()},[c,_]}class jS extends wn{constructor(e){super(),En(this,e,VS,NS,bn,{layer:1})}}function qS(o){let e;return{c(){e=Io("visibility")},l(n){e=So(n,"visibility")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function GS(o){let e;return{c(){e=Io("visibility_off")},l(n){e=So(n,"visibility_off")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function HS(o){let e,n,a,p;return e=new gy({props:{class:"material-icons",on:!0,$$slots:{default:[qS]},$$scope:{ctx:o}}}),a=new gy({props:{class:"material-icons",$$slots:{default:[GS]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment)},l(_){Wi(e.$$.fragment,_),n=Fn(_),Wi(a.$$.fragment,_)},m(_,c){zi(e,_,c),Dt(_,n,c),zi(a,_,c),p=!0},p(_,c){const h={};c&64&&(h.$$scope={dirty:c,ctx:_}),e.$set(h);const I={};c&64&&(I.$$scope={dirty:c,ctx:_}),a.$set(I)},i(_){p||(tt(e.$$.fragment,_),tt(a.$$.fragment,_),p=!0)},o(_){at(e.$$.fragment,_),at(a.$$.fragment,_),p=!1},d(_){Di(e,_),_&&We(n),Di(a,_)}}}function ZS(o){let e,n,a,p,_,c;function h(L){o[2](L)}let I={toggle:!0,$$slots:{default:[HS]},$$scope:{ctx:o}};return o[1]!==void 0&&(I.pressed=o[1]),n=new wm({props:I}),qi.push(()=>Cl(n,"pressed",h)),_=new jS({props:{layer:o[0]}}),{c(){e=yi("div"),Li(n.$$.fragment),p=Bn(),Li(_.$$.fragment),this.h()},l(L){e=_i(L,"DIV",{style:!0});var z=pi(e);Wi(n.$$.fragment,z),z.forEach(We),p=Fn(L),Wi(_.$$.fragment,L),this.h()},h(){H_(e,"display","flex"),H_(e,"align-items","center")},m(L,z){Dt(L,e,z),zi(n,e,null),Dt(L,p,z),zi(_,L,z),c=!0},p(L,z){const R={};z&64&&(R.$$scope={dirty:z,ctx:L}),!a&&z&2&&(a=!0,R.pressed=L[1],kl(()=>a=!1)),n.$set(R);const O={};z&1&&(O.layer=L[0]),_.$set(O)},i(L){c||(tt(n.$$.fragment,L),tt(_.$$.fragment,L),c=!0)},o(L){at(n.$$.fragment,L),at(_.$$.fragment,L),c=!1},d(L){L&&We(e),Di(n),L&&We(p),Di(_,L)}}}function WS(o){let e,n=(Tr.legend&&Tr.legend.targets&&Tr.legend.targets[o[0].id]?Tr.legend.targets[o[0].id]:o[0].id)+"",a;return{c(){e=yi("span"),a=Io(n),this.h()},l(p){e=_i(p,"SPAN",{slot:!0});var _=pi(e);a=So(_,n),_.forEach(We),this.h()},h(){ii(e,"slot","label")},m(p,_){Dt(p,e,_),sn(e,a)},p(p,_){_&1&&n!==(n=(Tr.legend&&Tr.legend.targets&&Tr.legend.targets[p[0].id]?Tr.legend.targets[p[0].id]:p[0].id)+"")&&Fs(a,n)},d(p){p&&We(e)}}}function XS(o){let e,n,a;return n=new _y({props:{$$slots:{label:[WS],default:[ZS]},$$scope:{ctx:o}}}),{c(){e=yi("div"),Li(n.$$.fragment)},l(p){e=_i(p,"DIV",{});var _=pi(e);Wi(n.$$.fragment,_),_.forEach(We)},m(p,_){Dt(p,e,_),zi(n,e,null),a=!0},p(p,[_]){const c={};_&67&&(c.$$scope={dirty:_,ctx:p}),n.$set(c)},i(p){a||(tt(n.$$.fragment,p),a=!0)},o(p){at(n.$$.fragment,p),a=!1},d(p){p&&We(e),Di(n)}}}function KS(o,e,n){let a;jo(o,bp,L=>n(4,a=L));let{layer:p}=e,_="visible";p.layout&&p.layout.visibility==="none"&&(_="none");let c=_==="visible";const h=()=>{a.setLayoutProperty(p.id,"visibility",c===!0?"visible":"none")};function I(L){c=L,n(1,c)}return o.$$set=L=>{"layer"in L&&n(0,p=L.layer)},o.$$.update=()=>{o.$$.dirty&2&&h()},[p,c,I]}class Gm extends wn{constructor(e){super(),En(this,e,KS,XS,bn,{layer:0})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var JS={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var YS=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.shakeAnimationEndHandler=function(){a.handleShakeAnimationEnd()},a}return Object.defineProperty(e,"cssClasses",{get:function(){return JS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(n){var a=e.cssClasses.LABEL_SHAKE;n?this.adapter.addClass(a):this.adapter.removeClass(a)},e.prototype.float=function(n){var a=e.cssClasses,p=a.LABEL_FLOAT_ABOVE,_=a.LABEL_SHAKE;n?this.adapter.addClass(p):(this.adapter.removeClass(p),this.adapter.removeClass(_))},e.prototype.setRequired=function(n){var a=e.cssClasses.LABEL_REQUIRED;n?this.adapter.addClass(a):this.adapter.removeClass(a)},e.prototype.handleShakeAnimationEnd=function(){var n=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(n)},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pd={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var QS=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.transitionEndHandler=function(p){a.handleTransitionEnd(p)},a}return Object.defineProperty(e,"cssClasses",{get:function(){return pd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(pd.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(pd.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(n){this.adapter.setStyle("transform-origin",n+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(pd.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(n){var a=this.adapter.hasClass(pd.LINE_RIPPLE_DEACTIVATING);n.propertyName==="opacity"&&a&&(this.adapter.removeClass(pd.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(pd.LINE_RIPPLE_DEACTIVATING))},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $S={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},eT={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},uf={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},fa;(function(o){o[o.BOTTOM=1]="BOTTOM",o[o.CENTER=2]="CENTER",o[o.RIGHT=4]="RIGHT",o[o.FLIP_RTL=8]="FLIP_RTL"})(fa||(fa={}));var Td;(function(o){o[o.TOP_LEFT=0]="TOP_LEFT",o[o.TOP_RIGHT=4]="TOP_RIGHT",o[o.BOTTOM_LEFT=1]="BOTTOM_LEFT",o[o.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",o[o.TOP_START=8]="TOP_START",o[o.TOP_END=12]="TOP_END",o[o.BOTTOM_START=9]="BOTTOM_START",o[o.BOTTOM_END=13]="BOTTOM_END"})(Td||(Td={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var L1=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.isSurfaceOpen=!1,a.isQuickOpen=!1,a.isHoistedElement=!1,a.isFixedPosition=!1,a.isHorizontallyCenteredOnViewport=!1,a.maxHeight=0,a.openAnimationEndTimerId=0,a.closeAnimationEndTimerId=0,a.animationRequestId=0,a.anchorCorner=Td.TOP_START,a.originCorner=Td.TOP_START,a.anchorMargin={top:0,right:0,bottom:0,left:0},a.position={x:0,y:0},a}return Object.defineProperty(e,"cssClasses",{get:function(){return $S},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return eT},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return uf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Td},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=e.cssClasses,a=n.ROOT,p=n.OPEN;if(!this.adapter.hasClass(a))throw new Error(a+" class required in root element.");this.adapter.hasClass(p)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(n){this.anchorCorner=n},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^fa.RIGHT},e.prototype.setAnchorMargin=function(n){this.anchorMargin.top=n.top||0,this.anchorMargin.right=n.right||0,this.anchorMargin.bottom=n.bottom||0,this.anchorMargin.left=n.left||0},e.prototype.setIsHoisted=function(n){this.isHoistedElement=n},e.prototype.setFixedPosition=function(n){this.isFixedPosition=n},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(n,a){this.position.x=this.isFinite(n)?n:0,this.position.y=this.isFinite(a)?a:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(n){this.isHorizontallyCenteredOnViewport=n},e.prototype.setQuickOpen=function(n){this.isQuickOpen=n},e.prototype.setMaxHeight=function(n){this.maxHeight=n},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var n=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){n.dimensions=n.adapter.getInnerDimensions(),n.autoposition(),n.adapter.addClass(e.cssClasses.OPEN),n.openAnimationEndTimerId=setTimeout(function(){n.openAnimationEndTimerId=0,n.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),n.adapter.notifyOpen()},uf.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(n){var a=this;if(n===void 0&&(n=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,n||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){a.adapter.removeClass(e.cssClasses.OPEN),a.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),a.closeAnimationEndTimerId=setTimeout(function(){a.closeAnimationEndTimerId=0,a.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),a.adapter.notifyClose()},uf.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,n||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(n){var a=n.target;this.adapter.isElementInContainer(a)||this.close()},e.prototype.handleKeydown=function(n){var a=n.keyCode,p=n.key,_=p==="Escape"||a===27;_&&this.close()},e.prototype.autoposition=function(){var n;this.measurements=this.getAutoLayoutmeasurements();var a=this.getoriginCorner(),p=this.getMenuSurfaceMaxHeight(a),_=this.hasBit(a,fa.BOTTOM)?"bottom":"top",c=this.hasBit(a,fa.RIGHT)?"right":"left",h=this.getHorizontalOriginOffset(a),I=this.getVerticalOriginOffset(a),L=this.measurements,z=L.anchorSize,R=L.surfaceSize,O=(n={},n[c]=h,n[_]=I,n);z.width/R.width>uf.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(c="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(O),this.adapter.setTransformOrigin(c+" "+_),this.adapter.setPosition(O),this.adapter.setMaxHeight(p?p+"px":""),this.hasBit(a,fa.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var n=this.adapter.getAnchorDimensions(),a=this.adapter.getBodyDimensions(),p=this.adapter.getWindowDimensions(),_=this.adapter.getWindowScroll();return n||(n={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:n,bodySize:a,surfaceSize:this.dimensions,viewportDistance:{top:n.top,right:p.width-n.right,bottom:p.height-n.bottom,left:n.left},viewportSize:p,windowScroll:_}},e.prototype.getoriginCorner=function(){var n=this.originCorner,a=this.measurements,p=a.viewportDistance,_=a.anchorSize,c=a.surfaceSize,h=e.numbers.MARGIN_TO_EDGE,I=this.hasBit(this.anchorCorner,fa.BOTTOM),L,z;I?(L=p.top-h+this.anchorMargin.bottom,z=p.bottom-h-this.anchorMargin.bottom):(L=p.top-h+this.anchorMargin.top,z=p.bottom-h+_.height-this.anchorMargin.top);var R=z-c.height>0;!R&&L>z&&(n=this.setBit(n,fa.BOTTOM));var O=this.adapter.isRtl(),Y=this.hasBit(this.anchorCorner,fa.FLIP_RTL),ee=this.hasBit(this.anchorCorner,fa.RIGHT)||this.hasBit(n,fa.RIGHT),ue=!1;O&&Y?ue=!ee:ue=ee;var te,de;ue?(te=p.left+_.width+this.anchorMargin.right,de=p.right-this.anchorMargin.right):(te=p.left+this.anchorMargin.left,de=p.right+_.width-this.anchorMargin.left);var oe=te-c.width>0,be=de-c.width>0,qe=this.hasBit(n,fa.FLIP_RTL)&&this.hasBit(n,fa.RIGHT);return be&&qe&&O||!oe&&qe?n=this.unsetBit(n,fa.RIGHT):(oe&&ue&&O||oe&&!ue&&ee||!be&&te>=de)&&(n=this.setBit(n,fa.RIGHT)),n},e.prototype.getMenuSurfaceMaxHeight=function(n){if(this.maxHeight>0)return this.maxHeight;var a=this.measurements.viewportDistance,p=0,_=this.hasBit(n,fa.BOTTOM),c=this.hasBit(this.anchorCorner,fa.BOTTOM),h=e.numbers.MARGIN_TO_EDGE;return _?(p=a.top+this.anchorMargin.top-h,c||(p+=this.measurements.anchorSize.height)):(p=a.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-h,c&&(p-=this.measurements.anchorSize.height)),p},e.prototype.getHorizontalOriginOffset=function(n){var a=this.measurements.anchorSize,p=this.hasBit(n,fa.RIGHT),_=this.hasBit(this.anchorCorner,fa.RIGHT);if(p){var c=_?a.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?c-(this.measurements.viewportSize.width-this.measurements.bodySize.width):c}return _?a.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(n){var a=this.measurements.anchorSize,p=this.hasBit(n,fa.BOTTOM),_=this.hasBit(this.anchorCorner,fa.BOTTOM),c=0;return p?c=_?a.height-this.anchorMargin.top:-this.anchorMargin.bottom:c=_?a.height+this.anchorMargin.bottom:this.anchorMargin.top,c},e.prototype.adjustPositionForHoistedElement=function(n){var a,p,_=this.measurements,c=_.windowScroll,h=_.viewportDistance,I=_.surfaceSize,L=_.viewportSize,z=Object.keys(n);try{for(var R=Ed(z),O=R.next();!O.done;O=R.next()){var Y=O.value,ee=n[Y]||0;if(this.isHorizontallyCenteredOnViewport&&(Y==="left"||Y==="right")){n[Y]=(L.width-I.width)/2;continue}ee+=h[Y],this.isFixedPosition||(Y==="top"?ee+=c.y:Y==="bottom"?ee-=c.y:Y==="left"?ee+=c.x:ee-=c.x),n[Y]=ee}}catch(ue){a={error:ue}}finally{try{O&&!O.done&&(p=R.return)&&p.call(R)}finally{if(a)throw a.error}}},e.prototype.maybeRestoreFocus=function(){var n=this,a=this.adapter.isFocused(),p=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(a||p)&&setTimeout(function(){n.adapter.restoreFocus()},uf.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(n,a){return Boolean(n&a)},e.prototype.setBit=function(n,a){return n|a},e.prototype.unsetBit=function(n,a){return n^a},e.prototype.isFinite=function(n){return typeof n=="number"&&isFinite(n)},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pp={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},op={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},tT={FOCUS_ROOT_INDEX:-1},up;(function(o){o[o.NONE=0]="NONE",o[o.LIST_ROOT=1]="LIST_ROOT",o[o.FIRST_ITEM=2]="FIRST_ITEM",o[o.LAST_ITEM=3]="LAST_ITEM"})(up||(up={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var iT=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.closeAnimationEndTimerId=0,a.defaultFocusState=up.LIST_ROOT,a.selectedIndex=-1,a}return Object.defineProperty(e,"cssClasses",{get:function(){return pp},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return op},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return tT},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(n){var a=n.key,p=n.keyCode,_=a==="Tab"||p===9;_&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(n){var a=this,p=this.adapter.getElementIndex(n);if(!(p<0)){this.adapter.notifySelected({index:p});var _=this.adapter.getAttributeFromElementAtIndex(p,op.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(_),this.closeAnimationEndTimerId=setTimeout(function(){var c=a.adapter.getElementIndex(n);c>=0&&a.adapter.isSelectableItemAtIndex(c)&&a.setSelectedIndex(c)},L1.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case up.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case up.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case up.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(n){this.defaultFocusState=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n){if(this.validatedIndex(n),!this.adapter.isSelectableItemAtIndex(n))throw new Error("MDCMenuFoundation: No selection group at specified index.");var a=this.adapter.getSelectedSiblingOfItemAtIndex(n);a>=0&&(this.adapter.removeAttributeFromElementAtIndex(a,op.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(a,pp.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(n,pp.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(n,op.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=n},e.prototype.setEnabled=function(n,a){this.validatedIndex(n),a?(this.adapter.removeClassFromElementAtIndex(n,yr.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,op.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(n,yr.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,op.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(n){var a=this.adapter.getMenuItemCount(),p=n>=0&&n<a;if(!p)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nT={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Lv={NOTCH_ELEMENT_PADDING:8},rT={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var oT=function(o){co(e,o);function e(n){return o.call(this,cr(cr({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"strings",{get:function(){return nT},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return rT},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Lv},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(n){var a=e.cssClasses.OUTLINE_NOTCHED;n>0&&(n+=Lv.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(n),this.adapter.addClass(a)},e.prototype.closeNotch=function(){var n=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(n),this.adapter.removeNotchWidthProperty()},e}(Ma);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $o={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},iy={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},fd={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var aT=function(o){co(e,o);function e(n,a){a===void 0&&(a={});var p=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return p.disabled=!1,p.isMenuOpen=!1,p.useDefaultValidation=!0,p.customValidity=!0,p.lastSelectedIndex=fd.UNSET_INDEX,p.clickDebounceTimeout=0,p.recentlyClicked=!1,p.leadingIcon=a.leadingIcon,p.helperText=a.helperText,p}return Object.defineProperty(e,"cssClasses",{get:function(){return $o},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return fd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return iy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(n,a,p){a===void 0&&(a=!1),p===void 0&&(p=!1),!(n>=this.adapter.getMenuItemCount())&&(n===fd.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(n).trim()),this.adapter.setSelectedIndex(n),a&&this.adapter.closeMenu(),!p&&this.lastSelectedIndex!==n&&this.handleChange(),this.lastSelectedIndex=n)},e.prototype.setValue=function(n,a){a===void 0&&(a=!1);var p=this.adapter.getMenuItemValues().indexOf(n);this.setSelectedIndex(p,!1,a)},e.prototype.getValue=function(){var n=this.adapter.getSelectedIndex(),a=this.adapter.getMenuItemValues();return n!==fd.UNSET_INDEX?a[n]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(n){this.disabled=n,this.disabled?(this.adapter.addClass($o.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass($o.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass($o.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(n){this.helperText&&this.helperText.setContent(n)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var n=this.getValue().length>0,a=this.adapter.hasClass($o.FOCUSED),p=n||a,_=this.adapter.hasClass($o.REQUIRED);this.notchOutline(p),this.adapter.floatLabel(p),this.adapter.setLabelRequired(_)}},e.prototype.layoutOptions=function(){var n=this.adapter.getMenuItemValues(),a=n.indexOf(this.getValue());this.setSelectedIndex(a,!1,!0)},e.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var n=this.getSelectedIndex(),a=n>=0?n:0;this.adapter.focusMenuItemAtIndex(a)}},e.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},e.prototype.handleMenuClosed=function(){this.adapter.removeClass($o.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var n=this.adapter.hasClass($o.REQUIRED);n&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(n){this.setSelectedIndex(n,!0)},e.prototype.handleFocus=function(){this.adapter.addClass($o.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(n){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(n),this.openMenu()}},e.prototype.handleKeydown=function(n){if(!(this.isMenuOpen||!this.adapter.hasClass($o.FOCUSED))){var a=Ca(n)===_r.ENTER,p=Ca(n)===_r.SPACEBAR,_=Ca(n)===_r.ARROW_UP,c=Ca(n)===_r.ARROW_DOWN,h=n.ctrlKey||n.metaKey;if(!h&&(!p&&n.key&&n.key.length===1||p&&this.adapter.isTypeaheadInProgress())){var I=p?" ":n.key,L=this.adapter.typeaheadMatchItem(I,this.getSelectedIndex());L>=0&&this.setSelectedIndex(L),n.preventDefault();return}!a&&!p&&!_&&!c||(_&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):c&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),n.preventDefault())}},e.prototype.notchOutline=function(n){if(!!this.adapter.hasOutline()){var a=this.adapter.hasClass($o.FOCUSED);if(n){var p=fd.LABEL_SCALE,_=this.adapter.getLabelWidth()*p;this.adapter.notchOutline(_)}else a||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(n){this.leadingIcon&&this.leadingIcon.setAriaLabel(n)},e.prototype.setLeadingIconContent=function(n){this.leadingIcon&&this.leadingIcon.setContent(n)},e.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},e.prototype.setUseDefaultValidation=function(n){this.useDefaultValidation=n},e.prototype.setValid=function(n){this.useDefaultValidation||(this.customValidity=n),this.adapter.setSelectAnchorAttr("aria-invalid",(!n).toString()),n?(this.adapter.removeClass($o.INVALID),this.adapter.removeMenuClass($o.MENU_INVALID)):(this.adapter.addClass($o.INVALID),this.adapter.addMenuClass($o.MENU_INVALID)),this.syncHelperTextValidity(n)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass($o.REQUIRED)&&!this.adapter.hasClass($o.DISABLED)?this.getSelectedIndex()!==fd.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(n){n?this.adapter.addClass($o.REQUIRED):this.adapter.removeClass($o.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",n.toString()),this.adapter.setLabelRequired(n)},e.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},e.prototype.init=function(){var n=this.adapter.getAnchorElement();n&&(this.adapter.setMenuAnchorElement(n),this.adapter.setMenuAnchorCorner(Td.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass($o.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass($o.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass($o.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var n=this.adapter.hasClass($o.REQUIRED);n&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(n){if(!!this.helperText){this.helperText.setValidity(n);var a=this.helperText.isVisible(),p=this.helperText.getId();a&&p?this.adapter.setSelectAnchorAttr(iy.ARIA_DESCRIBEDBY,p):this.adapter.removeSelectAnchorAttr(iy.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var n=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){n.recentlyClicked=!1},fd.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var md={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},gd={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sT=function(o){co(e,o);function e(n){return o.call(this,cr(cr({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return gd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return md},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(md.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(n){this.adapter.setContent(n)},e.prototype.setValidation=function(n){n?this.adapter.addClass(gd.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(gd.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidationMsgPersistent=function(n){n?this.adapter.addClass(gd.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(gd.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},e.prototype.setValidity=function(n){var a=this.adapter.hasClass(gd.HELPER_TEXT_VALIDATION_MSG);if(!!a){var p=this.adapter.hasClass(gd.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),_=!n||p;if(_){this.showToScreenReader(),n?this.adapter.removeAttr(md.ROLE):this.adapter.setAttr(md.ROLE,"alert");return}this.adapter.removeAttr(md.ROLE),this.hide()}},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(md.ARIA_HIDDEN)},e.prototype.hide=function(){this.adapter.setAttr(md.ARIA_HIDDEN,"true")},e}(Ma);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var zv={ICON_EVENT:"MDCSelect:icon",ICON_ROLE:"button"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Dv=["click","keydown"],lT=function(o){co(e,o);function e(n){var a=o.call(this,cr(cr({},e.defaultAdapter),n))||this;return a.savedTabIndex=null,a.interactionHandler=function(p){a.handleInteraction(p)},a}return Object.defineProperty(e,"strings",{get:function(){return zv},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n,a;this.savedTabIndex=this.adapter.getAttr("tabindex");try{for(var p=Ed(Dv),_=p.next();!_.done;_=p.next()){var c=_.value;this.adapter.registerInteractionHandler(c,this.interactionHandler)}}catch(h){n={error:h}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}},e.prototype.destroy=function(){var n,a;try{for(var p=Ed(Dv),_=p.next();!_.done;_=p.next()){var c=_.value;this.adapter.deregisterInteractionHandler(c,this.interactionHandler)}}catch(h){n={error:h}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}},e.prototype.setDisabled=function(n){!this.savedTabIndex||(n?(this.adapter.setAttr("tabindex","-1"),this.adapter.removeAttr("role")):(this.adapter.setAttr("tabindex",this.savedTabIndex),this.adapter.setAttr("role",zv.ICON_ROLE)))},e.prototype.setAriaLabel=function(n){this.adapter.setAttr("aria-label",n)},e.prototype.setContent=function(n){this.adapter.setContent(n)},e.prototype.handleInteraction=function(n){var a=n.key==="Enter"||n.keyCode===13;(n.type==="click"||a)&&this.adapter.notifyIconAction()},e}(Ma);const{document:uT}=K0;function cT(o){let e,n,a,p,_,c,h,I;const L=o[31].default,z=pn(L,o,o[30],null);let R=[{class:a=wi(tr({[o[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":o[5],"mdc-menu-surface--open":o[4],"smui-menu-surface--static":o[4],"mdc-menu-surface--fullwidth":o[7]},o[10]))},{style:p=Object.entries(o[11]).map(Rv).concat([o[3]]).join(" ")},o[13]],O={};for(let Y=0;Y<R.length;Y+=1)O=Ct(O,R[Y]);return{c(){e=Bn(),n=yi("div"),z&&z.c(),this.h()},l(Y){e=Fn(Y),n=_i(Y,"DIV",{class:!0,style:!0});var ee=pi(n);z&&z.l(ee),ee.forEach(We),this.h()},h(){hi(n,O)},m(Y,ee){Dt(Y,e,ee),Dt(Y,n,ee),z&&z.m(n,null),o[33](n),c=!0,h||(I=[An(uT.body,"click",o[32],!0),Ei(_=qn.call(null,n,o[1])),Ei(o[12].call(null,n)),An(n,"keydown",o[34])],h=!0)},p(Y,ee){z&&z.p&&(!c||ee[0]&1073741824)&&fn(z,L,Y,Y[30],c?gn(L,Y[30],ee,null):mn(Y[30]),null),hi(n,O=en(R,[(!c||ee[0]&1204&&a!==(a=wi(tr({[Y[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":Y[5],"mdc-menu-surface--open":Y[4],"smui-menu-surface--static":Y[4],"mdc-menu-surface--fullwidth":Y[7]},Y[10]))))&&{class:a},(!c||ee[0]&2056&&p!==(p=Object.entries(Y[11]).map(Rv).concat([Y[3]]).join(" ")))&&{style:p},ee[0]&8192&&Y[13]])),_&&zn(_.update)&&ee[0]&2&&_.update.call(null,Y[1])},i(Y){c||(tt(z,Y),c=!0)},o(Y){at(z,Y),c=!1},d(Y){Y&&We(e),Y&&We(n),z&&z.d(Y),o[33](null),h=!1,xr(I)}}}const Rv=([o,e])=>`${o}: ${e};`;function hT(o,e,n){const a=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;var h,I,L;const z=Qn(Jn());let{use:R=[]}=e,{class:O=""}=e,{style:Y=""}=e,{static:ee=!1}=e,{anchor:ue=!0}=e,{fixed:te=!1}=e,{open:de=ee}=e,{managed:oe=!1}=e,{fullWidth:be=!1}=e,{quickOpen:qe=!1}=e,{anchorElement:Ne=void 0}=e,{anchorCorner:De=void 0}=e,{anchorMargin:fe={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:ct=0}=e,{horizontallyCenteredOnViewport:st=!1}=e,Ge,Ue,Rt={},He={},Mt;sr("SMUI:list:role","menu"),sr("SMUI:list:item:role","menuitem");const li=Td;Po(()=>(n(9,Ue=new L1({addClass:Gt,removeClass:Ye,hasClass:Et,hasAnchor:()=>!!Ne,notifyClose:()=>{oe||n(0,de=ee),de||Pn(Ge,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{oe||n(0,de=ee),de||Pn(Ge,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{oe||n(0,de=!0),de&&Pn(Ge,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:St=>Ge.contains(St),isRtl:()=>getComputedStyle(Ge).getPropertyValue("direction")==="rtl",setTransformOrigin:St=>{n(11,He["transform-origin"]=St,He)},isFocused:()=>document.activeElement===Ge,saveFocus:()=>{var St;Mt=(St=document.activeElement)!==null&&St!==void 0?St:void 0},restoreFocus:()=>{(!Ge||Ge.contains(document.activeElement))&&Mt&&document.contains(Mt)&&"focus"in Mt&&Mt.focus()},getInnerDimensions:()=>({width:Ge.offsetWidth,height:Ge.offsetHeight}),getAnchorDimensions:()=>Ne?Ne.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:St=>{n(11,He.left="left"in St?`${St.left}px`:"",He),n(11,He.right="right"in St?`${St.right}px`:"",He),n(11,He.top="top"in St?`${St.top}px`:"",He),n(11,He.bottom="bottom"in St?`${St.bottom}px`:"",He)},setMaxHeight:St=>{n(11,He.maxHeight=St,He)}})),Pn(Ge,"SMUIMenuSurface:mount",{get open(){return de},set open(St){n(0,de=St)},closeProgrammatic:wt}),Ue.init(),()=>{var St;const Yi=Ue.isHoistedElement;Ue.destroy(),Yi&&((St=Ge.parentNode)===null||St===void 0||St.removeChild(Ge))})),eh(()=>{var It;ue&&Ge&&((It=Ge.parentElement)===null||It===void 0||It.classList.remove("mdc-menu-surface--anchor"))});function Et(It){return It in Rt?Rt[It]:Jt().classList.contains(It)}function Gt(It){Rt[It]||n(10,Rt[It]=!0,Rt)}function Ye(It){(!(It in Rt)||Rt[It])&&n(10,Rt[It]=!1,Rt)}function wt(It){Ue.close(It),n(0,de=!1)}function Lt(){return de}function ni(It){n(0,de=It)}function Xt(It,St){return Ue.setAbsolutePosition(It,St)}function Ki(It){return Ue.setIsHoisted(It)}function ei(){return Ue.isFixed()}function Jt(){return Ge}const xi=It=>Ue&&de&&!oe&&Ue.handleBodyClick(It);function ai(It){qi[It?"unshift":"push"](()=>{Ge=It,n(8,Ge)})}const dt=It=>Ue&&Ue.handleKeydown(It);return o.$$set=It=>{e=Ct(Ct({},e),Yn(It)),n(13,p=bi(e,a)),"use"in It&&n(1,R=It.use),"class"in It&&n(2,O=It.class),"style"in It&&n(3,Y=It.style),"static"in It&&n(4,ee=It.static),"anchor"in It&&n(15,ue=It.anchor),"fixed"in It&&n(5,te=It.fixed),"open"in It&&n(0,de=It.open),"managed"in It&&n(6,oe=It.managed),"fullWidth"in It&&n(7,be=It.fullWidth),"quickOpen"in It&&n(16,qe=It.quickOpen),"anchorElement"in It&&n(14,Ne=It.anchorElement),"anchorCorner"in It&&n(17,De=It.anchorCorner),"anchorMargin"in It&&n(18,fe=It.anchorMargin),"maxHeight"in It&&n(19,ct=It.maxHeight),"horizontallyCenteredOnViewport"in It&&n(20,st=It.horizontallyCenteredOnViewport),"$$scope"in It&&n(30,c=It.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&939557120&&Ge&&ue&&!(!(n(27,h=Ge.parentElement)===null||h===void 0)&&h.classList.contains("mdc-menu-surface--anchor"))&&(n(28,I=Ge.parentElement)===null||I===void 0||I.classList.add("mdc-menu-surface--anchor"),n(14,Ne=n(29,L=Ge.parentElement)!==null&&L!==void 0?L:void 0)),o.$$.dirty[0]&513&&Ue&&Ue.isOpen()!==de&&(de?Ue.open():Ue.close()),o.$$.dirty[0]&66048&&Ue&&Ue.setQuickOpen(qe),o.$$.dirty[0]&544&&Ue&&Ue.setFixedPosition(te),o.$$.dirty[0]&524800&&Ue&&ct>0&&Ue.setMaxHeight(ct),o.$$.dirty[0]&1049088&&Ue&&Ue.setIsHorizontallyCenteredOnViewport(st),o.$$.dirty[0]&131584&&Ue&&De!=null&&(typeof De=="string"?Ue.setAnchorCorner(li[De]):Ue.setAnchorCorner(De)),o.$$.dirty[0]&262656&&Ue&&Ue.setAnchorMargin(fe)},[de,R,O,Y,ee,te,oe,be,Ge,Ue,Rt,He,z,p,Ne,ue,qe,De,fe,ct,st,Lt,ni,Xt,Ki,ei,Jt,h,I,L,c,_,xi,ai,dt]}class dT extends wn{constructor(e){super(),En(this,e,hT,cT,bn,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function pT(o,{addClass:e=a=>o.classList.add(a),removeClass:n=a=>o.classList.remove(a)}={}){return e("mdc-menu-surface--anchor"),{destroy(){n("mdc-menu-surface--anchor")}}}function fT(o){let e;const n=o[16].default,a=pn(n,o,o[21],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&2097152)&&fn(a,n,p,p[21],e?gn(n,p[21],_,null):mn(p[21]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function mT(o){let e,n,a;const p=[{use:o[5]},{class:wi({[o[1]]:!0,"mdc-menu":!0})},o[9]];function _(h){o[18](h)}let c={$$slots:{default:[fT]},$$scope:{ctx:o}};for(let h=0;h<p.length;h+=1)c=Ct(c,p[h]);return o[0]!==void 0&&(c.open=o[0]),e=new dT({props:c}),o[17](e),qi.push(()=>Cl(e,"open",_)),e.$on("SMUIMenuSurface:mount",o[7]),e.$on("SMUIList:mount",o[8]),e.$on("SMUIMenuSurface:opened",o[19]),e.$on("keydown",o[6]),e.$on("SMUIList:action",o[20]),{c(){Li(e.$$.fragment)},l(h){Wi(e.$$.fragment,h)},m(h,I){zi(e,h,I),a=!0},p(h,[I]){const L=I&546?en(p,[I&32&&{use:h[5]},I&2&&{class:wi({[h[1]]:!0,"mdc-menu":!0})},I&512&&Xr(h[9])]):{};I&2097152&&(L.$$scope={dirty:I,ctx:h}),!n&&I&1&&(n=!0,L.open=h[0],kl(()=>n=!1)),e.$set(L)},i(h){a||(tt(e.$$.fragment,h),a=!0)},o(h){at(e.$$.fragment,h),a=!1},d(h){o[17](null),Di(e,h)}}}function gT(o,e,n){let a;const p=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getElement"];let _=bi(e,p),{$$slots:c={},$$scope:h}=e;const{closest:I}=vf,L=Qn(Jn());let{use:z=[]}=e,{class:R=""}=e,{open:O=!1}=e,Y,ee,ue,te;Po(()=>(n(3,ee=new iT({addClassToElementAtIndex:(He,Mt)=>{te.addClassForElementIndex(He,Mt)},removeClassFromElementAtIndex:(He,Mt)=>{te.removeClassForElementIndex(He,Mt)},addAttributeToElementAtIndex:(He,Mt,li)=>{te.setAttributeForElementIndex(He,Mt,li)},removeAttributeFromElementAtIndex:(He,Mt)=>{te.removeAttributeForElementIndex(He,Mt)},getAttributeFromElementAtIndex:(He,Mt)=>te.getAttributeFromElementIndex(He,Mt),elementContainsClass:(He,Mt)=>He.classList.contains(Mt),closeSurface:He=>ue.closeProgrammatic(He),getElementIndex:He=>te.getOrderedList().map(Mt=>Mt.element).indexOf(He),notifySelected:He=>Pn(ct(),"SMUIMenu:selected",{index:He.index,item:te.getOrderedList()[He.index].element},void 0,!0),getMenuItemCount:()=>te.items.length,focusItemAtIndex:He=>te.focusItemAtIndex(He),focusListRoot:()=>"focus"in te.element&&te.element.focus(),isSelectableItemAtIndex:He=>!!I(te.getOrderedList()[He].element,`.${pp.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:He=>{const Mt=te.getOrderedList(),li=I(Mt[He].element,`.${pp.MENU_SELECTION_GROUP}`),Et=li==null?void 0:li.querySelector(`.${pp.MENU_SELECTED_LIST_ITEM}`);return Et?Mt.map(Gt=>Gt.element).indexOf(Et):-1}})),Pn(ct(),"SMUIMenu:mount",ee),ee.init(),()=>{ee.destroy()}));function de(He){ee&&ee.handleKeydown(He)}function oe(He){ue||(ue=He.detail)}function be(He){te||n(4,te=He.detail)}function qe(){return O}function Ne(He){n(0,O=He)}function De(He){ee.setDefaultFocusState(He)}function fe(){return ee.getSelectedIndex()}function ct(){return Y.getElement()}function st(He){qi[He?"unshift":"push"](()=>{Y=He,n(2,Y)})}function Ge(He){O=He,n(0,O)}const Ue=()=>ee&&ee.handleMenuSurfaceOpened(),Rt=He=>ee&&ee.handleItemAction(te.getOrderedList()[He.detail.index].element);return o.$$set=He=>{e=Ct(Ct({},e),Yn(He)),n(9,_=bi(e,p)),"use"in He&&n(10,z=He.use),"class"in He&&n(1,R=He.class),"open"in He&&n(0,O=He.open),"$$scope"in He&&n(21,h=He.$$scope)},o.$$.update=()=>{o.$$.dirty&1024&&n(5,a=[L,...z])},[O,R,Y,ee,te,a,de,oe,be,_,z,qe,Ne,De,fe,ct,c,st,Ge,Ue,Rt,h]}class yT extends wn{constructor(e){super(),En(this,e,gT,mT,bn,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getElement:15})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getElement(){return this.$$.ctx[15]}}ns({class:"mdc-menu__selection-group-icon",component:hE});function _T(o){let e,n,a,p,_,c,h,I;const L=o[22].default,z=pn(L,o,o[21],null);let R=[{class:n=wi(tr({[o[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":o[0],"mdc-floating-label--required":o[1]},o[8]))},{style:a=Object.entries(o[9]).map(Bv).concat([o[4]]).join(" ")},{for:p=o[5]||(o[11]?o[11].id:void 0)},o[12]],O={};for(let Y=0;Y<R.length;Y+=1)O=Ct(O,R[Y]);return{c(){e=yi("label"),z&&z.c(),this.h()},l(Y){e=_i(Y,"LABEL",{class:!0,style:!0,for:!0});var ee=pi(e);z&&z.l(ee),ee.forEach(We),this.h()},h(){hi(e,O)},m(Y,ee){Dt(Y,e,ee),z&&z.m(e,null),o[24](e),c=!0,h||(I=[Ei(_=qn.call(null,e,o[2])),Ei(o[10].call(null,e))],h=!0)},p(Y,ee){z&&z.p&&(!c||ee&2097152)&&fn(z,L,Y,Y[21],c?gn(L,Y[21],ee,null):mn(Y[21]),null),hi(e,O=en(R,[(!c||ee&267&&n!==(n=wi(tr({[Y[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":Y[0],"mdc-floating-label--required":Y[1]},Y[8]))))&&{class:n},(!c||ee&528&&a!==(a=Object.entries(Y[9]).map(Bv).concat([Y[4]]).join(" ")))&&{style:a},(!c||ee&32&&p!==(p=Y[5]||(Y[11]?Y[11].id:void 0)))&&{for:p},ee&4096&&Y[12]])),_&&zn(_.update)&&ee&4&&_.update.call(null,Y[2])},i(Y){c||(tt(z,Y),c=!0)},o(Y){at(z,Y),c=!1},d(Y){Y&&We(e),z&&z.d(Y),o[24](null),h=!1,xr(I)}}}function vT(o){let e,n,a,p,_,c,h;const I=o[22].default,L=pn(I,o,o[21],null);let z=[{class:n=wi(tr({[o[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":o[0],"mdc-floating-label--required":o[1]},o[8]))},{style:a=Object.entries(o[9]).map(Ov).concat([o[4]]).join(" ")},o[12]],R={};for(let O=0;O<z.length;O+=1)R=Ct(R,z[O]);return{c(){e=yi("span"),L&&L.c(),this.h()},l(O){e=_i(O,"SPAN",{class:!0,style:!0});var Y=pi(e);L&&L.l(Y),Y.forEach(We),this.h()},h(){hi(e,R)},m(O,Y){Dt(O,e,Y),L&&L.m(e,null),o[23](e),_=!0,c||(h=[Ei(p=qn.call(null,e,o[2])),Ei(o[10].call(null,e))],c=!0)},p(O,Y){L&&L.p&&(!_||Y&2097152)&&fn(L,I,O,O[21],_?gn(I,O[21],Y,null):mn(O[21]),null),hi(e,R=en(z,[(!_||Y&267&&n!==(n=wi(tr({[O[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":O[0],"mdc-floating-label--required":O[1]},O[8]))))&&{class:n},(!_||Y&528&&a!==(a=Object.entries(O[9]).map(Ov).concat([O[4]]).join(" ")))&&{style:a},Y&4096&&O[12]])),p&&zn(p.update)&&Y&4&&p.update.call(null,O[2])},i(O){_||(tt(L,O),_=!0)},o(O){at(L,O),_=!1},d(O){O&&We(e),L&&L.d(O),o[23](null),c=!1,xr(h)}}}function bT(o){let e,n,a,p;const _=[vT,_T],c=[];function h(I,L){return I[6]?0:1}return e=h(o),n=c[e]=_[e](o),{c(){n.c(),a=cn()},l(I){n.l(I),a=cn()},m(I,L){c[e].m(I,L),Dt(I,a,L),p=!0},p(I,[L]){let z=e;e=h(I),e===z?c[e].p(I,L):(Cr(),at(c[z],1,1,()=>{c[z]=null}),Ar(),n=c[e],n?n.p(I,L):(n=c[e]=_[e](I),n.c()),tt(n,1),n.m(a.parentNode,a))},i(I){p||(tt(n),p=!0)},o(I){at(n),p=!1},d(I){c[e].d(I),I&&We(a)}}}const Ov=([o,e])=>`${o}: ${e};`,Bv=([o,e])=>`${o}: ${e};`;function xT(o,e,n){const a=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;var h;const I=Qn(Jn());let{use:L=[]}=e,{class:z=""}=e,{style:R=""}=e,{for:O=void 0}=e,{floatAbove:Y=!1}=e,{required:ee=!1}=e,{wrapped:ue=!1}=e,te,de,oe={},be={},qe=(h=Or("SMUI:generic:input:props"))!==null&&h!==void 0?h:{},Ne=Y,De=ee;Po(()=>{n(18,de=new YS({addClass:fe,removeClass:ct,getWidth:()=>{var wt,Lt;const ni=li(),Xt=ni.cloneNode(!0);(wt=ni.parentNode)===null||wt===void 0||wt.appendChild(Xt),Xt.classList.add("smui-floating-label--remove-transition"),Xt.classList.add("smui-floating-label--force-size"),Xt.classList.remove("mdc-floating-label--float-above");const Ki=Xt.scrollWidth;return(Lt=ni.parentNode)===null||Lt===void 0||Lt.removeChild(Xt),Ki},registerInteractionHandler:(wt,Lt)=>li().addEventListener(wt,Lt),deregisterInteractionHandler:(wt,Lt)=>li().removeEventListener(wt,Lt)}));const Ye={get element(){return li()},addStyle:st,removeStyle:Ge};return Pn(te,"SMUIFloatingLabel:mount",Ye),de.init(),()=>{Pn(te,"SMUIFloatingLabel:unmount",Ye),de.destroy()}});function fe(Ye){oe[Ye]||n(8,oe[Ye]=!0,oe)}function ct(Ye){(!(Ye in oe)||oe[Ye])&&n(8,oe[Ye]=!1,oe)}function st(Ye,wt){be[Ye]!=wt&&(wt===""||wt==null?(delete be[Ye],n(9,be)):n(9,be[Ye]=wt,be))}function Ge(Ye){Ye in be&&(delete be[Ye],n(9,be))}function Ue(Ye){de.shake(Ye)}function Rt(Ye){n(0,Y=Ye)}function He(Ye){n(1,ee=Ye)}function Mt(){return de.getWidth()}function li(){return te}function Et(Ye){qi[Ye?"unshift":"push"](()=>{te=Ye,n(7,te)})}function Gt(Ye){qi[Ye?"unshift":"push"](()=>{te=Ye,n(7,te)})}return o.$$set=Ye=>{e=Ct(Ct({},e),Yn(Ye)),n(12,p=bi(e,a)),"use"in Ye&&n(2,L=Ye.use),"class"in Ye&&n(3,z=Ye.class),"style"in Ye&&n(4,R=Ye.style),"for"in Ye&&n(5,O=Ye.for),"floatAbove"in Ye&&n(0,Y=Ye.floatAbove),"required"in Ye&&n(1,ee=Ye.required),"wrapped"in Ye&&n(6,ue=Ye.wrapped),"$$scope"in Ye&&n(21,c=Ye.$$scope)},o.$$.update=()=>{o.$$.dirty&786433&&de&&Ne!==Y&&(n(19,Ne=Y),de.float(Y)),o.$$.dirty&1310722&&de&&De!==ee&&(n(20,De=ee),de.setRequired(ee))},[Y,ee,L,z,R,O,ue,te,oe,be,I,qe,p,Ue,Rt,He,Mt,li,de,Ne,De,c,_,Et,Gt]}class z1 extends wn{constructor(e){super(),En(this,e,xT,bT,bn,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function wT(o){let e,n,a,p,_,c,h=[{class:n=wi(tr({[o[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":o[3]},o[5]))},{style:a=Object.entries(o[6]).map(Fv).concat([o[2]]).join(" ")},o[8]],I={};for(let L=0;L<h.length;L+=1)I=Ct(I,h[L]);return{c(){e=yi("div"),this.h()},l(L){e=_i(L,"DIV",{class:!0,style:!0}),pi(e).forEach(We),this.h()},h(){hi(e,I)},m(L,z){Dt(L,e,z),o[13](e),_||(c=[Ei(p=qn.call(null,e,o[0])),Ei(o[7].call(null,e))],_=!0)},p(L,[z]){hi(e,I=en(h,[z&42&&n!==(n=wi(tr({[L[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":L[3]},L[5])))&&{class:n},z&68&&a!==(a=Object.entries(L[6]).map(Fv).concat([L[2]]).join(" "))&&{style:a},z&256&&L[8]])),p&&zn(p.update)&&z&1&&p.update.call(null,L[0])},i:Vo,o:Vo,d(L){L&&We(e),o[13](null),_=!1,xr(c)}}}const Fv=([o,e])=>`${o}: ${e};`;function ET(o,e,n){const a=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let p=bi(e,a);const _=Qn(Jn());let{use:c=[]}=e,{class:h=""}=e,{style:I=""}=e,{active:L=!1}=e,z,R,O={},Y={};Po(()=>(R=new QS({addClass:ue,removeClass:te,hasClass:ee,setStyle:de,registerEventHandler:(fe,ct)=>Ne().addEventListener(fe,ct),deregisterEventHandler:(fe,ct)=>Ne().removeEventListener(fe,ct)}),R.init(),()=>{R.destroy()}));function ee(fe){return fe in O?O[fe]:Ne().classList.contains(fe)}function ue(fe){O[fe]||n(5,O[fe]=!0,O)}function te(fe){(!(fe in O)||O[fe])&&n(5,O[fe]=!1,O)}function de(fe,ct){Y[fe]!=ct&&(ct===""||ct==null?(delete Y[fe],n(6,Y)):n(6,Y[fe]=ct,Y))}function oe(){R.activate()}function be(){R.deactivate()}function qe(fe){R.setRippleCenter(fe)}function Ne(){return z}function De(fe){qi[fe?"unshift":"push"](()=>{z=fe,n(4,z)})}return o.$$set=fe=>{e=Ct(Ct({},e),Yn(fe)),n(8,p=bi(e,a)),"use"in fe&&n(0,c=fe.use),"class"in fe&&n(1,h=fe.class),"style"in fe&&n(2,I=fe.style),"active"in fe&&n(3,L=fe.active)},[c,h,I,L,z,O,Y,_,p,oe,be,qe,Ne,De]}class IT extends wn{constructor(e){super(),En(this,e,ET,wT,bn,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function Uv(o){let e,n,a;const p=o[14].default,_=pn(p,o,o[13],null);return{c(){e=yi("div"),_&&_.c(),this.h()},l(c){e=_i(c,"DIV",{class:!0,style:!0});var h=pi(e);_&&_.l(h),h.forEach(We),this.h()},h(){ii(e,"class","mdc-notched-outline__notch"),ii(e,"style",n=Object.entries(o[7]).map(Nv).join(" "))},m(c,h){Dt(c,e,h),_&&_.m(e,null),a=!0},p(c,h){_&&_.p&&(!a||h&8192)&&fn(_,p,c,c[13],a?gn(p,c[13],h,null):mn(c[13]),null),(!a||h&128&&n!==(n=Object.entries(c[7]).map(Nv).join(" ")))&&ii(e,"style",n)},i(c){a||(tt(_,c),a=!0)},o(c){at(_,c),a=!1},d(c){c&&We(e),_&&_.d(c)}}}function ST(o){let e,n,a,p,_,c,h,I,L,z,R=!o[3]&&Uv(o),O=[{class:c=wi(tr({[o[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":o[2],"mdc-notched-outline--no-label":o[3]},o[6]))},o[9]],Y={};for(let ee=0;ee<O.length;ee+=1)Y=Ct(Y,O[ee]);return{c(){e=yi("div"),n=yi("div"),a=Bn(),R&&R.c(),p=Bn(),_=yi("div"),this.h()},l(ee){e=_i(ee,"DIV",{class:!0});var ue=pi(e);n=_i(ue,"DIV",{class:!0}),pi(n).forEach(We),a=Fn(ue),R&&R.l(ue),p=Fn(ue),_=_i(ue,"DIV",{class:!0}),pi(_).forEach(We),ue.forEach(We),this.h()},h(){ii(n,"class","mdc-notched-outline__leading"),ii(_,"class","mdc-notched-outline__trailing"),hi(e,Y)},m(ee,ue){Dt(ee,e,ue),sn(e,n),sn(e,a),R&&R.m(e,null),sn(e,p),sn(e,_),o[15](e),I=!0,L||(z=[Ei(h=qn.call(null,e,o[0])),Ei(o[8].call(null,e)),An(e,"SMUIFloatingLabel:mount",o[16]),An(e,"SMUIFloatingLabel:unmount",o[17])],L=!0)},p(ee,[ue]){ee[3]?R&&(Cr(),at(R,1,1,()=>{R=null}),Ar()):R?(R.p(ee,ue),ue&8&&tt(R,1)):(R=Uv(ee),R.c(),tt(R,1),R.m(e,p)),hi(e,Y=en(O,[(!I||ue&78&&c!==(c=wi(tr({[ee[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":ee[2],"mdc-notched-outline--no-label":ee[3]},ee[6]))))&&{class:c},ue&512&&ee[9]])),h&&zn(h.update)&&ue&1&&h.update.call(null,ee[0])},i(ee){I||(tt(R),I=!0)},o(ee){at(R),I=!1},d(ee){ee&&We(e),R&&R.d(),o[15](null),L=!1,xr(z)}}}const Nv=([o,e])=>`${o}: ${e};`;function TT(o,e,n){const a=["use","class","notched","noLabel","notch","closeNotch","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{notched:z=!1}=e,{noLabel:R=!1}=e,O,Y,ee,ue={},te={};Po(()=>(Y=new oT({addClass:de,removeClass:oe,setNotchWidthProperty:Ue=>be("width",Ue+"px"),removeNotchWidthProperty:()=>qe("width")}),Y.init(),()=>{Y.destroy()}));function de(Ue){ue[Ue]||n(6,ue[Ue]=!0,ue)}function oe(Ue){(!(Ue in ue)||ue[Ue])&&n(6,ue[Ue]=!1,ue)}function be(Ue,Rt){te[Ue]!=Rt&&(Rt===""||Rt==null?(delete te[Ue],n(7,te)):n(7,te[Ue]=Rt,te))}function qe(Ue){Ue in te&&(delete te[Ue],n(7,te))}function Ne(Ue){Y.notch(Ue)}function De(){Y.closeNotch()}function fe(){return O}function ct(Ue){qi[Ue?"unshift":"push"](()=>{O=Ue,n(5,O)})}const st=Ue=>n(4,ee=Ue.detail),Ge=()=>n(4,ee=void 0);return o.$$set=Ue=>{e=Ct(Ct({},e),Yn(Ue)),n(9,p=bi(e,a)),"use"in Ue&&n(0,I=Ue.use),"class"in Ue&&n(1,L=Ue.class),"notched"in Ue&&n(2,z=Ue.notched),"noLabel"in Ue&&n(3,R=Ue.noLabel),"$$scope"in Ue&&n(13,c=Ue.$$scope)},o.$$.update=()=>{o.$$.dirty&16&&(ee?(ee.addStyle("transition-duration","0s"),de("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{ee&&ee.removeStyle("transition-duration")})):oe("mdc-notched-outline--upgraded"))},[I,L,z,R,ee,O,ue,te,h,p,Ne,De,fe,c,_,ct,st,Ge]}class AT extends wn{constructor(e){super(),En(this,e,TT,ST,bn,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function CT(o){let e;return{c(){e=Io(o[8])},l(n){e=So(n,o[8])},m(n,a){Dt(n,e,a)},p(n,a){a&256&&Fs(e,n[8])},i:Vo,o:Vo,d(n){n&&We(e)}}}function kT(o){let e;const n=o[13].default,a=pn(n,o,o[12],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&4096)&&fn(a,n,p,p[12],e?gn(n,p[12],_,null):mn(p[12]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function MT(o){let e,n,a,p,_,c,h,I,L;const z=[kT,CT],R=[];function O(ue,te){return ue[8]==null?0:1}n=O(o),a=R[n]=z[n](o);let Y=[{class:p=wi(tr({[o[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":o[4],"mdc-select-helper-text--validation-msg-persistent":o[3]},o[6]))},{"aria-hidden":_=o[3]?void 0:"true"},{id:o[2]},o[7],o[10]],ee={};for(let ue=0;ue<Y.length;ue+=1)ee=Ct(ee,Y[ue]);return{c(){e=yi("div"),a.c(),this.h()},l(ue){e=_i(ue,"DIV",{class:!0,"aria-hidden":!0,id:!0});var te=pi(e);a.l(te),te.forEach(We),this.h()},h(){hi(e,ee)},m(ue,te){Dt(ue,e,te),R[n].m(e,null),o[14](e),h=!0,I||(L=[Ei(c=qn.call(null,e,o[0])),Ei(o[9].call(null,e))],I=!0)},p(ue,[te]){let de=n;n=O(ue),n===de?R[n].p(ue,te):(Cr(),at(R[de],1,1,()=>{R[de]=null}),Ar(),a=R[n],a?a.p(ue,te):(a=R[n]=z[n](ue),a.c()),tt(a,1),a.m(e,null)),hi(e,ee=en(Y,[(!h||te&90&&p!==(p=wi(tr({[ue[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":ue[4],"mdc-select-helper-text--validation-msg-persistent":ue[3]},ue[6]))))&&{class:p},(!h||te&8&&_!==(_=ue[3]?void 0:"true"))&&{"aria-hidden":_},(!h||te&4)&&{id:ue[2]},te&128&&ue[7],te&1024&&ue[10]])),c&&zn(c.update)&&te&1&&c.update.call(null,ue[0])},i(ue){h||(tt(a),h=!0)},o(ue){at(a),h=!1},d(ue){ue&&We(e),R[n].d(),o[14](null),I=!1,xr(L)}}}let PT=0;function LT(o,e,n){const a=["use","class","id","persistent","validationMsg","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{id:z="SMUI-select-helper-text-"+PT++}=e,{persistent:R=!1}=e,{validationMsg:O=!1}=e,Y,ee,ue={},te={},de;Po(()=>(ee=new sT({addClass:be,removeClass:qe,hasClass:oe,getAttr:Ne,setAttr:De,removeAttr:fe,setContent:Ge=>{n(8,de=Ge)}}),z.startsWith("SMUI-select-helper-text-")&&Pn(ct(),"SMUISelectHelperText:id",z),Pn(ct(),"SMUISelectHelperText:mount",ee),ee.init(),()=>{Pn(ct(),"SMUISelectHelperText:unmount",ee),ee.destroy()}));function oe(Ge){return Ge in ue?ue[Ge]:ct().classList.contains(Ge)}function be(Ge){ue[Ge]||n(6,ue[Ge]=!0,ue)}function qe(Ge){(!(Ge in ue)||ue[Ge])&&n(6,ue[Ge]=!1,ue)}function Ne(Ge){var Ue;return Ge in te?(Ue=te[Ge])!==null&&Ue!==void 0?Ue:null:ct().getAttribute(Ge)}function De(Ge,Ue){te[Ge]!==Ue&&n(7,te[Ge]=Ue,te)}function fe(Ge){(!(Ge in te)||te[Ge]!=null)&&n(7,te[Ge]=void 0,te)}function ct(){return Y}function st(Ge){qi[Ge?"unshift":"push"](()=>{Y=Ge,n(5,Y)})}return o.$$set=Ge=>{e=Ct(Ct({},e),Yn(Ge)),n(10,p=bi(e,a)),"use"in Ge&&n(0,I=Ge.use),"class"in Ge&&n(1,L=Ge.class),"id"in Ge&&n(2,z=Ge.id),"persistent"in Ge&&n(3,R=Ge.persistent),"validationMsg"in Ge&&n(4,O=Ge.validationMsg),"$$scope"in Ge&&n(12,c=Ge.$$scope)},[I,L,z,R,O,Y,ue,te,de,h,p,ct,c,_,st]}class zT extends wn{constructor(e){super(),En(this,e,LT,MT,bn,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const DT=o=>({}),Vv=o=>({}),RT=o=>({}),jv=o=>({}),OT=o=>({}),qv=o=>({}),BT=o=>({}),Gv=o=>({});function Hv(o){let e,n=[{type:"hidden"},{required:o[10]},{disabled:o[6]},{value:o[0]},rr(o[53],"input$")],a={};for(let p=0;p<n.length;p+=1)a=Ct(a,n[p]);return{c(){e=yi("input"),this.h()},l(p){e=_i(p,"INPUT",{type:!0}),this.h()},h(){hi(e,a)},m(p,_){Dt(p,e,_),e.autofocus&&e.focus()},p(p,_){hi(e,a=en(n,[{type:"hidden"},_[0]&1024&&{required:p[10]},_[0]&64&&{disabled:p[6]},_[0]&1&&{value:p[0]},_[1]&4194304&&rr(p[53],"input$")]))},d(p){p&&We(e)}}}function Zv(o){let e;return{c(){e=yi("span"),this.h()},l(n){e=_i(n,"SPAN",{class:!0}),pi(e).forEach(We),this.h()},h(){ii(e,"class","mdc-select__ripple")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function Wv(o){let e,n;const a=[{id:o[11]+"-smui-label"},{floatAbove:o[43]!==""},{required:o[10]},rr(o[53],"label$")];let p={$$slots:{default:[FT]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new z1({props:p}),o[66](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[0]&3072|c[1]&4198400?en(a,[c[0]&2048&&{id:_[11]+"-smui-label"},c[1]&4096&&{floatAbove:_[43]!==""},c[0]&1024&&{required:_[10]},c[1]&4194304&&Xr(rr(_[53],"label$"))]):{};c[0]&512|c[2]&134217728&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[66](null),Di(e,_)}}}function FT(o){let e=(o[9]==null?"":o[9])+"",n,a;const p=o[63].label,_=pn(p,o,o[89],Gv);return{c(){n=Io(e),_&&_.c()},l(c){n=So(c,e),_&&_.l(c)},m(c,h){Dt(c,n,h),_&&_.m(c,h),a=!0},p(c,h){(!a||h[0]&512)&&e!==(e=(c[9]==null?"":c[9])+"")&&Fs(n,e),_&&_.p&&(!a||h[2]&134217728)&&fn(_,p,c,c[89],a?gn(p,c[89],h,BT):mn(c[89]),Gv)},i(c){a||(tt(_,c),a=!0)},o(c){at(_,c),a=!1},d(c){c&&We(n),_&&_.d(c)}}}function Xv(o){let e,n;const a=[{noLabel:o[8]||o[9]==null&&!o[52].label},rr(o[53],"outline$")];let p={$$slots:{default:[NT]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new AT({props:p}),o[68](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[0]&768|c[1]&6291456?en(a,[c[0]&768|c[1]&2097152&&{noLabel:_[8]||_[9]==null&&!_[52].label},c[1]&4194304&&Xr(rr(_[53],"outline$"))]):{};c[0]&3840|c[1]&6296064|c[2]&134217728&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[68](null),Di(e,_)}}}function Kv(o){let e,n;const a=[{id:o[11]+"-smui-label"},{floatAbove:o[43]!==""},{required:o[10]},rr(o[53],"label$")];let p={$$slots:{default:[UT]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new z1({props:p}),o[67](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[0]&3072|c[1]&4198400?en(a,[c[0]&2048&&{id:_[11]+"-smui-label"},c[1]&4096&&{floatAbove:_[43]!==""},c[0]&1024&&{required:_[10]},c[1]&4194304&&Xr(rr(_[53],"label$"))]):{};c[0]&512|c[2]&134217728&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[67](null),Di(e,_)}}}function UT(o){let e=(o[9]==null?"":o[9])+"",n,a;const p=o[63].label,_=pn(p,o,o[89],qv);return{c(){n=Io(e),_&&_.c()},l(c){n=So(c,e),_&&_.l(c)},m(c,h){Dt(c,n,h),_&&_.m(c,h),a=!0},p(c,h){(!a||h[0]&512)&&e!==(e=(c[9]==null?"":c[9])+"")&&Fs(n,e),_&&_.p&&(!a||h[2]&134217728)&&fn(_,p,c,c[89],a?gn(p,c[89],h,OT):mn(c[89]),qv)},i(c){a||(tt(_,c),a=!0)},o(c){at(_,c),a=!1},d(c){c&&We(n),_&&_.d(c)}}}function NT(o){let e,n,a=!o[8]&&(o[9]!=null||o[52].label)&&Kv(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,_){!p[8]&&(p[9]!=null||p[52].label)?a?(a.p(p,_),_[0]&768|_[1]&2097152&&tt(a,1)):(a=Kv(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function Jv(o){let e,n;const a=[rr(o[53],"ripple$")];let p={};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new IT({props:p}),o[70](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[1]&4194304?en(a,[Xr(rr(_[53],"ripple$"))]):{};e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[70](null),Di(e,_)}}}function VT(o){let e;const n=o[63].default,a=pn(n,o,o[89],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_[2]&134217728)&&fn(a,n,p,p[89],e?gn(n,p[89],_,null):mn(p[89]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function jT(o){let e,n,a;const p=[{role:"listbox"},{wrapFocus:o[36]},rr(o[53],"list$")];function _(h){o[76](h)}let c={$$slots:{default:[VT]},$$scope:{ctx:o}};for(let h=0;h<p.length;h+=1)c=Ct(c,p[h]);return o[24]!==void 0&&(c.selectedIndex=o[24]),e=new s1({props:c}),qi.push(()=>Cl(e,"selectedIndex",_)),e.$on("SMUIList:mount",o[77]),{c(){Li(e.$$.fragment)},l(h){Wi(e.$$.fragment,h)},m(h,I){zi(e,h,I),a=!0},p(h,I){const L=I[1]&4194336?en(p,[p[0],I[1]&32&&{wrapFocus:h[36]},I[1]&4194304&&Xr(rr(h[53],"list$"))]):{};I[2]&134217728&&(L.$$scope={dirty:I,ctx:h}),!n&&I[0]&16777216&&(n=!0,L.selectedIndex=h[24],kl(()=>n=!1)),e.$set(L)},i(h){a||(tt(e.$$.fragment,h),a=!0)},o(h){at(e.$$.fragment,h),a=!1},d(h){Di(e,h)}}}function Yv(o){let e,n;const a=[rr(o[53],"helperText$")];let p={$$slots:{default:[qT]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new zT({props:p}),e.$on("SMUISelectHelperText:id",o[86]),e.$on("SMUISelectHelperText:mount",o[87]),e.$on("SMUISelectHelperText:unmount",o[88]),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,c){const h=c[1]&4194304?en(a,[Xr(rr(_[53],"helperText$"))]):{};c[2]&134217728&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){Di(e,_)}}}function qT(o){let e;const n=o[63].helperText,a=pn(n,o,o[89],Vv);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_[2]&134217728)&&fn(a,n,p,p[89],e?gn(n,p[89],_,DT):mn(p[89]),Vv)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function GT(o){let e,n,a,p,_,c,h,I,L,z,R,O,Y,ee,ue,te,de,oe,be,qe,Ne,De,fe,ct,st,Ge,Ue,Rt,He,Mt,li,Et,Gt,Ye,wt,Lt,ni,Xt,Ki,ei,Jt=o[12]&&Hv(o),xi=o[7]==="filled"&&Zv(),ai=o[7]!=="outlined"&&!o[8]&&(o[9]!=null||o[52].label)&&Wv(o),dt=o[7]==="outlined"&&Xv(o);const It=o[63].leadingIcon,St=pn(It,o,o[89],jv);let Yi=[{id:R=o[11]+"-smui-selected-text"},{class:O=wi({[o[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":Y=o[11]+"-smui-label"},rr(o[53],"selectedText$")],Qt={};for(let zt=0;zt<Yi.length;zt+=1)Qt=Ct(Qt,Yi[zt]);let gt=[{class:ue=wi({[o[17]]:!0,"mdc-select__selected-text-container":!0})},rr(o[53],"selectedTextContainer$")],Oi={};for(let zt=0;zt<gt.length;zt+=1)Oi=Ct(Oi,gt[zt]);let ln=[{class:De=wi({[o[21]]:!0,"mdc-select__dropdown-icon":!0})},rr(o[53],"dropdownIcon$")],Cn={};for(let zt=0;zt<ln.length;zt+=1)Cn=Ct(Cn,ln[zt]);let Zn=o[7]!=="outlined"&&o[5]&&Jv(o),Nr=[{class:st=wi({[o[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":Ge=o[10]?"true":void 0},{"aria-disabled":Ue=o[6]?"true":void 0},{"aria-controls":o[31]},{"aria-describedby":o[31]},o[29],rr(o[53],"anchor$")],Kr={};for(let zt=0;zt<Nr.length;zt+=1)Kr=Ct(Kr,Nr[zt]);const At=[{class:wi(tr({[o[22]]:!0,"mdc-select__menu":!0},o[33]))},{fullWidth:!0},{anchor:!1},{anchorElement:o[34]},{anchorCorner:o[35]},rr(o[53],"menu$")];function Ni(zt){o[78](zt)}let jn={$$slots:{default:[jT]},$$scope:{ctx:o}};for(let zt=0;zt<At.length;zt+=1)jn=Ct(jn,At[zt]);o[32]!==void 0&&(jn.open=o[32]),Mt=new yT({props:jn}),qi.push(()=>Cl(Mt,"open",Ni)),Mt.$on("SMUIMenu:selected",o[79]),Mt.$on("SMUIMenuSurface:closing",o[80]),Mt.$on("SMUIMenuSurface:closed",o[81]),Mt.$on("SMUIMenuSurface:opened",o[82]);let rn=[{class:Et=wi(tr({[o[3]]:!0,"mdc-select":!0,"mdc-select--required":o[10],"mdc-select--disabled":o[6],"mdc-select--filled":o[7]==="filled","mdc-select--outlined":o[7]==="outlined","smui-select--standard":o[7]==="standard","mdc-select--with-leading-icon":o[45](o[13])?o[52].leadingIcon:o[13],"mdc-select--no-label":o[8]||o[9]==null&&!o[52].label,"mdc-select--invalid":o[1],"mdc-select--activated":o[32],"mdc-data-table__pagination-rows-per-page-select":o[46]==="data-table:pagination"},o[26]))},{style:Gt=Object.entries(o[27]).map(Qv).concat([o[4]]).join(" ")},_s(o[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],$n={};for(let zt=0;zt<rn.length;zt+=1)$n=Ct($n,rn[zt]);let Ln=o[52].helperText&&Yv(o);return{c(){e=yi("div"),Jt&&Jt.c(),n=Bn(),a=yi("div"),xi&&xi.c(),p=Bn(),ai&&ai.c(),_=Bn(),dt&&dt.c(),c=Bn(),St&&St.c(),h=Bn(),I=yi("span"),L=yi("span"),z=Io(o[43]),de=Bn(),oe=yi("span"),be=Ql("svg"),qe=Ql("polygon"),Ne=Ql("polygon"),ct=Bn(),Zn&&Zn.c(),He=Bn(),Li(Mt.$$.fragment),Lt=Bn(),Ln&&Ln.c(),ni=cn(),this.h()},l(zt){e=_i(zt,"DIV",{class:!0,style:!0});var Ui=pi(e);Jt&&Jt.l(Ui),n=Fn(Ui),a=_i(Ui,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-describedby":!0});var Ze=pi(a);xi&&xi.l(Ze),p=Fn(Ze),ai&&ai.l(Ze),_=Fn(Ze),dt&&dt.l(Ze),c=Fn(Ze),St&&St.l(Ze),h=Fn(Ze),I=_i(Ze,"SPAN",{class:!0});var Ft=pi(I);L=_i(Ft,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var Ji=pi(L);z=So(Ji,o[43]),Ji.forEach(We),Ft.forEach(We),de=Fn(Ze),oe=_i(Ze,"SPAN",{class:!0});var Gn=pi(oe);be=$l(Gn,"svg",{class:!0,viewBox:!0,focusable:!0});var Wn=pi(be);qe=$l(Wn,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),pi(qe).forEach(We),Ne=$l(Wn,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),pi(Ne).forEach(We),Wn.forEach(We),Gn.forEach(We),ct=Fn(Ze),Zn&&Zn.l(Ze),Ze.forEach(We),He=Fn(Ui),Wi(Mt.$$.fragment,Ui),Ui.forEach(We),Lt=Fn(zt),Ln&&Ln.l(zt),ni=cn(),this.h()},h(){hi(L,Qt),hi(I,Oi),ii(qe,"class","mdc-select__dropdown-icon-inactive"),ii(qe,"stroke","none"),ii(qe,"fill-rule","evenodd"),ii(qe,"points","7 10 12 15 17 10"),ii(Ne,"class","mdc-select__dropdown-icon-active"),ii(Ne,"stroke","none"),ii(Ne,"fill-rule","evenodd"),ii(Ne,"points","7 15 12 10 17 15"),ii(be,"class","mdc-select__dropdown-icon-graphic"),ii(be,"viewBox","7 10 10 5"),ii(be,"focusable","false"),hi(oe,Cn),hi(a,Kr),hi(e,$n)},m(zt,Ui){Dt(zt,e,Ui),Jt&&Jt.m(e,null),sn(e,n),sn(e,a),xi&&xi.m(a,null),sn(a,p),ai&&ai.m(a,null),sn(a,_),dt&&dt.m(a,null),sn(a,c),St&&St.m(a,null),sn(a,h),sn(a,I),sn(I,L),sn(L,z),o[69](L),sn(a,de),sn(a,oe),sn(oe,be),sn(be,qe),sn(be,Ne),sn(a,ct),Zn&&Zn.m(a,null),o[71](a),sn(e,He),zi(Mt,e,null),o[83](e),Dt(zt,Lt,Ui),Ln&&Ln.m(zt,Ui),Dt(zt,ni,Ui),Xt=!0,Ki||(ei=[Ei(ee=qn.call(null,L,o[18])),Ei(te=qn.call(null,I,o[16])),Ei(fe=qn.call(null,oe,o[20])),Ei(Rt=qn.call(null,a,o[14])),An(a,"focus",o[72]),An(a,"blur",o[73]),An(a,"click",o[74]),An(a,"keydown",o[75]),An(a,"focus",o[64]),An(a,"blur",o[65]),Ei(Ye=$c.call(null,e,{ripple:o[7]==="filled",unbounded:!1,addClass:o[49],removeClass:o[50],addStyle:o[51]})),Ei(pT.call(null,e,{addClass:o[49],removeClass:o[50]})),Ei(wt=qn.call(null,e,o[2])),Ei(o[44].call(null,e)),An(e,"SMUISelectLeadingIcon:mount",o[84]),An(e,"SMUISelectLeadingIcon:unmount",o[85])],Ki=!0)},p(zt,Ui){zt[12]?Jt?Jt.p(zt,Ui):(Jt=Hv(zt),Jt.c(),Jt.m(e,n)):Jt&&(Jt.d(1),Jt=null),zt[7]==="filled"?xi||(xi=Zv(),xi.c(),xi.m(a,p)):xi&&(xi.d(1),xi=null),zt[7]!=="outlined"&&!zt[8]&&(zt[9]!=null||zt[52].label)?ai?(ai.p(zt,Ui),Ui[0]&896|Ui[1]&2097152&&tt(ai,1)):(ai=Wv(zt),ai.c(),tt(ai,1),ai.m(a,_)):ai&&(Cr(),at(ai,1,1,()=>{ai=null}),Ar()),zt[7]==="outlined"?dt?(dt.p(zt,Ui),Ui[0]&128&&tt(dt,1)):(dt=Xv(zt),dt.c(),tt(dt,1),dt.m(a,c)):dt&&(Cr(),at(dt,1,1,()=>{dt=null}),Ar()),St&&St.p&&(!Xt||Ui[2]&134217728)&&fn(St,It,zt,zt[89],Xt?gn(It,zt[89],Ui,RT):mn(zt[89]),jv),(!Xt||Ui[1]&4096)&&Fs(z,zt[43]),hi(L,Qt=en(Yi,[(!Xt||Ui[0]&2048&&R!==(R=zt[11]+"-smui-selected-text"))&&{id:R},(!Xt||Ui[0]&524288&&O!==(O=wi({[zt[19]]:!0,"mdc-select__selected-text":!0})))&&{class:O},{role:"button"},{"aria-haspopup":"listbox"},(!Xt||Ui[0]&2048&&Y!==(Y=zt[11]+"-smui-label"))&&{"aria-labelledby":Y},Ui[1]&4194304&&rr(zt[53],"selectedText$")])),ee&&zn(ee.update)&&Ui[0]&262144&&ee.update.call(null,zt[18]),hi(I,Oi=en(gt,[(!Xt||Ui[0]&131072&&ue!==(ue=wi({[zt[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:ue},Ui[1]&4194304&&rr(zt[53],"selectedTextContainer$")])),te&&zn(te.update)&&Ui[0]&65536&&te.update.call(null,zt[16]),hi(oe,Cn=en(ln,[(!Xt||Ui[0]&2097152&&De!==(De=wi({[zt[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:De},Ui[1]&4194304&&rr(zt[53],"dropdownIcon$")])),fe&&zn(fe.update)&&Ui[0]&1048576&&fe.update.call(null,zt[20]),zt[7]!=="outlined"&&zt[5]?Zn?(Zn.p(zt,Ui),Ui[0]&160&&tt(Zn,1)):(Zn=Jv(zt),Zn.c(),tt(Zn,1),Zn.m(a,null)):Zn&&(Cr(),at(Zn,1,1,()=>{Zn=null}),Ar()),hi(a,Kr=en(Nr,[(!Xt||Ui[0]&32768&&st!==(st=wi({[zt[15]]:!0,"mdc-select__anchor":!0})))&&{class:st},(!Xt||Ui[0]&1024&&Ge!==(Ge=zt[10]?"true":void 0))&&{"aria-required":Ge},(!Xt||Ui[0]&64&&Ue!==(Ue=zt[6]?"true":void 0))&&{"aria-disabled":Ue},(!Xt||Ui[1]&1)&&{"aria-controls":zt[31]},(!Xt||Ui[1]&1)&&{"aria-describedby":zt[31]},Ui[0]&536870912&&zt[29],Ui[1]&4194304&&rr(zt[53],"anchor$")])),Rt&&zn(Rt.update)&&Ui[0]&16384&&Rt.update.call(null,zt[14]);const Ze=Ui[0]&4194304|Ui[1]&4194332?en(At,[Ui[0]&4194304|Ui[1]&4&&{class:wi(tr({[zt[22]]:!0,"mdc-select__menu":!0},zt[33]))},At[1],At[2],Ui[1]&8&&{anchorElement:zt[34]},Ui[1]&16&&{anchorCorner:zt[35]},Ui[1]&4194304&&Xr(rr(zt[53],"menu$"))]):{};Ui[0]&16777216|Ui[1]&4194400|Ui[2]&134217728&&(Ze.$$scope={dirty:Ui,ctx:zt}),!li&&Ui[1]&2&&(li=!0,Ze.open=zt[32],kl(()=>li=!1)),Mt.$set(Ze),hi(e,$n=en(rn,[(!Xt||Ui[0]&67119050|Ui[1]&2097154&&Et!==(Et=wi(tr({[zt[3]]:!0,"mdc-select":!0,"mdc-select--required":zt[10],"mdc-select--disabled":zt[6],"mdc-select--filled":zt[7]==="filled","mdc-select--outlined":zt[7]==="outlined","smui-select--standard":zt[7]==="standard","mdc-select--with-leading-icon":zt[45](zt[13])?zt[52].leadingIcon:zt[13],"mdc-select--no-label":zt[8]||zt[9]==null&&!zt[52].label,"mdc-select--invalid":zt[1],"mdc-select--activated":zt[32],"mdc-data-table__pagination-rows-per-page-select":zt[46]==="data-table:pagination"},zt[26]))))&&{class:Et},(!Xt||Ui[0]&134217744&&Gt!==(Gt=Object.entries(zt[27]).map(Qv).concat([zt[4]]).join(" ")))&&{style:Gt},Ui[1]&4194304&&_s(zt[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),Ye&&zn(Ye.update)&&Ui[0]&128&&Ye.update.call(null,{ripple:zt[7]==="filled",unbounded:!1,addClass:zt[49],removeClass:zt[50],addStyle:zt[51]}),wt&&zn(wt.update)&&Ui[0]&4&&wt.update.call(null,zt[2]),zt[52].helperText?Ln?(Ln.p(zt,Ui),Ui[1]&2097152&&tt(Ln,1)):(Ln=Yv(zt),Ln.c(),tt(Ln,1),Ln.m(ni.parentNode,ni)):Ln&&(Cr(),at(Ln,1,1,()=>{Ln=null}),Ar())},i(zt){Xt||(tt(ai),tt(dt),tt(St,zt),tt(Zn),tt(Mt.$$.fragment,zt),tt(Ln),Xt=!0)},o(zt){at(ai),at(dt),at(St,zt),at(Zn),at(Mt.$$.fragment,zt),at(Ln),Xt=!1},d(zt){zt&&We(e),Jt&&Jt.d(),xi&&xi.d(),ai&&ai.d(),dt&&dt.d(),St&&St.d(zt),o[69](null),Zn&&Zn.d(),o[71](null),Di(Mt),o[83](null),zt&&We(Lt),Ln&&Ln.d(zt),zt&&We(ni),Ki=!1,xr(ei)}}}let HT=0;function ZT(o){const e=o.currentTarget.getBoundingClientRect();return(WT(o)?o.touches[0].clientX:o.clientX)-e.left}function WT(o){return"touches"in o}const Qv=([o,e])=>`${o}: ${e};`;function XT(o,e,n){const a=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let p=bi(e,a),_,c,{$$slots:h={},$$scope:I}=e;const L=ky(h),z=Qn(Jn());let R=()=>{};function O(Re){return Re===R}let{use:Y=[]}=e,{class:ee=""}=e,{style:ue=""}=e,{ripple:te=!0}=e,{disabled:de=!1}=e,{variant:oe="standard"}=e,{noLabel:be=!1}=e,{label:qe=void 0}=e,{value:Ne=""}=e,{key:De=Re=>Re}=e,{dirty:fe=!1}=e,{invalid:ct=R}=e,{updateInvalid:st=O(ct)}=e;const Ge=O(ct);O(ct)&&(ct=!1);let{required:Ue=!1}=e,{inputId:Rt="SMUI-select-"+HT++}=e,{hiddenInput:He=!1}=e,{withLeadingIcon:Mt=R}=e,{anchor$use:li=[]}=e,{anchor$class:Et=""}=e,{selectedTextContainer$use:Gt=[]}=e,{selectedTextContainer$class:Ye=""}=e,{selectedText$use:wt=[]}=e,{selectedText$class:Lt=""}=e,{dropdownIcon$use:ni=[]}=e,{dropdownIcon$class:Xt=""}=e,{menu$class:Ki=""}=e,ei,Jt,xi={},ai={},dt,It={},St,Yi=-1,Qt,gt=Or("SMUI:addLayoutListener"),Oi,ln=!1,Cn={},Zn,Nr,Kr=!1,At,Ni=Or("SMUI:select:context"),jn,rn,$n,Ln,zt;sr("SMUI:list:role",""),sr("SMUI:list:nav",!1);const Ui=eu("");jo(o,Ui,Re=>n(43,_=Re)),sr("SMUI:select:selectedText",Ui);const Ze=eu(Ne);jo(o,Ze,Re=>n(91,c=Re)),sr("SMUI:select:value",Ze);let Ft=Yi;gt&&(Oi=gt(ua)),Po(()=>(n(23,Jt=new aT({setSelectedText:Re=>{Oh(Ui,_=Re,_)},isSelectAnchorFocused:()=>document.activeElement===dt,getSelectAnchorAttr:kr,setSelectAnchorAttr:vi,removeSelectAnchorAttr:Un,addMenuClass:vo,removeMenuClass:la,openMenu:()=>{n(32,ln=!0)},closeMenu:()=>{n(32,ln=!1)},getAnchorElement:()=>dt,setMenuAnchorElement:Re=>{n(34,Zn=Re)},setMenuAnchorCorner:Re=>{n(35,Nr=Re)},setMenuWrapFocus:Re=>{n(36,Kr=Re)},getSelectedIndex:()=>Yi,setSelectedIndex:Re=>{n(62,Ft=Re),n(24,Yi=Re),n(0,Ne=In()[Yi])},focusMenuItemAtIndex:Re=>{At.focusItemAtIndex(Re)},getMenuItemCount:()=>At.items.length,getMenuItemValues:()=>In().map(De),getMenuItemTextAtIndex:Re=>At.getPrimaryTextAtIndex(Re),isTypeaheadInProgress:()=>At.typeaheadInProgress,typeaheadMatchItem:(Re,Yt)=>At.typeaheadMatchItem(Re,Yt),addClass:Gn,removeClass:Wn,hasClass:Ji,setRippleCenter:Re=>Ln&&Ln.setRippleCenter(Re),activateBottomLine:()=>Ln&&Ln.activate(),deactivateBottomLine:()=>Ln&&Ln.deactivate(),notifyChange:Re=>{n(54,fe=!0),st&&n(1,ct=!Jt.isValid()),Pn(To(),"SMUISelect:change",{value:Ne,index:Yi},void 0,!0)},hasOutline:()=>!!zt,notchOutline:Re=>zt&&zt.notch(Re),closeOutline:()=>zt&&zt.closeNotch(),hasLabel:()=>!!$n,floatLabel:Re=>$n&&$n.float(Re),getLabelWidth:()=>$n?$n.getWidth():0,setLabelRequired:Re=>$n&&$n.setRequired(Re)},{get helperText(){return rn},get leadingIcon(){return jn}})),n(24,Yi=In().indexOf(Ne)),Jt.init(),ho(Ge),()=>{Jt.destroy()})),eh(()=>{Oi&&Oi()});function Ji(Re){return Re in xi?xi[Re]:To().classList.contains(Re)}function Gn(Re){xi[Re]||n(26,xi[Re]=!0,xi)}function Wn(Re){(!(Re in xi)||xi[Re])&&n(26,xi[Re]=!1,xi)}function _o(Re,Yt){ai[Re]!=Yt&&(Yt===""||Yt==null?(delete ai[Re],n(27,ai)):n(27,ai[Re]=Yt,ai))}function vo(Re){Cn[Re]||n(33,Cn[Re]=!0,Cn)}function la(Re){(!(Re in Cn)||Cn[Re])&&n(33,Cn[Re]=!1,Cn)}function kr(Re){var Yt;return Re in It?(Yt=It[Re])!==null&&Yt!==void 0?Yt:null:To().getAttribute(Re)}function vi(Re,Yt){It[Re]!==Yt&&n(29,It[Re]=Yt,It)}function Un(Re){(!(Re in It)||It[Re]!=null)&&n(29,It[Re]=void 0,It)}function In(){return At.getOrderedList().map(Re=>Re.getValue())}function ro(){return Jt.getUseDefaultValidation()}function ho(Re){Jt.setUseDefaultValidation(Re)}function yn(){dt.focus()}function ua(){Jt.layout()}function To(){return ei}function wr(Re){pf.call(this,o,Re)}function re(Re){pf.call(this,o,Re)}function ce(Re){qi[Re?"unshift":"push"](()=>{$n=Re,n(40,$n)})}function me(Re){qi[Re?"unshift":"push"](()=>{$n=Re,n(40,$n)})}function Se(Re){qi[Re?"unshift":"push"](()=>{zt=Re,n(42,zt)})}function ze(Re){qi[Re?"unshift":"push"](()=>{St=Re,n(30,St)})}function $e(Re){qi[Re?"unshift":"push"](()=>{Ln=Re,n(41,Ln)})}function it(Re){qi[Re?"unshift":"push"](()=>{dt=Re,n(28,dt)})}const Ie=()=>Jt&&Jt.handleFocus(),Ve=()=>Jt&&Jt.handleBlur(),mt=Re=>{dt.focus(),Jt&&Jt.handleClick(ZT(Re))},he=Re=>Jt&&Jt.handleKeydown(Re);function W(Re){Yi=Re,n(24,Yi)}const X=Re=>n(37,At=Re.detail);function le(Re){ln=Re,n(32,ln)}const ge=Re=>Jt&&Jt.handleMenuItemAction(Re.detail.index),Te=()=>Jt&&Jt.handleMenuClosing(),we=()=>Jt&&Jt.handleMenuClosed(),Pe=()=>Jt&&Jt.handleMenuOpened();function Me(Re){qi[Re?"unshift":"push"](()=>{ei=Re,n(25,ei)})}const Le=Re=>n(38,jn=Re.detail),yt=()=>n(38,jn=void 0),lt=Re=>n(31,Qt=Re.detail),_t=Re=>n(39,rn=Re.detail),si=()=>{n(31,Qt=void 0),n(39,rn=void 0)};return o.$$set=Re=>{e=Ct(Ct({},e),Yn(Re)),n(53,p=bi(e,a)),"use"in Re&&n(2,Y=Re.use),"class"in Re&&n(3,ee=Re.class),"style"in Re&&n(4,ue=Re.style),"ripple"in Re&&n(5,te=Re.ripple),"disabled"in Re&&n(6,de=Re.disabled),"variant"in Re&&n(7,oe=Re.variant),"noLabel"in Re&&n(8,be=Re.noLabel),"label"in Re&&n(9,qe=Re.label),"value"in Re&&n(0,Ne=Re.value),"key"in Re&&n(55,De=Re.key),"dirty"in Re&&n(54,fe=Re.dirty),"invalid"in Re&&n(1,ct=Re.invalid),"updateInvalid"in Re&&n(56,st=Re.updateInvalid),"required"in Re&&n(10,Ue=Re.required),"inputId"in Re&&n(11,Rt=Re.inputId),"hiddenInput"in Re&&n(12,He=Re.hiddenInput),"withLeadingIcon"in Re&&n(13,Mt=Re.withLeadingIcon),"anchor$use"in Re&&n(14,li=Re.anchor$use),"anchor$class"in Re&&n(15,Et=Re.anchor$class),"selectedTextContainer$use"in Re&&n(16,Gt=Re.selectedTextContainer$use),"selectedTextContainer$class"in Re&&n(17,Ye=Re.selectedTextContainer$class),"selectedText$use"in Re&&n(18,wt=Re.selectedText$use),"selectedText$class"in Re&&n(19,Lt=Re.selectedText$class),"dropdownIcon$use"in Re&&n(20,ni=Re.dropdownIcon$use),"dropdownIcon$class"in Re&&n(21,Xt=Re.dropdownIcon$class),"menu$class"in Re&&n(22,Ki=Re.menu$class),"$$scope"in Re&&n(89,I=Re.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&25165825|o.$$.dirty[2]&1&&Ft!==Yi)if(n(62,Ft=Yi),Jt)Jt.setSelectedIndex(Yi,!1,!0);else{const Re=In();Ne!==Re[Yi]&&n(0,Ne=Re[Yi])}o.$$.dirty[0]&1&&Oh(Ze,c=Ne,c),o.$$.dirty[0]&8388609|o.$$.dirty[1]&16777216&&Jt&&Jt.getValue()!==De(Ne)&&Jt.setValue(De(Ne)),o.$$.dirty[0]&8388672&&Jt&&Jt.getDisabled()!==de&&Jt.setDisabled(de),o.$$.dirty[0]&8388610|o.$$.dirty[1]&41943040&&Jt&&fe&&Jt.isValid()!==!ct&&(st?n(1,ct=!Jt.isValid()):Jt.setValid(!ct)),o.$$.dirty[0]&8389632&&Jt&&Jt.getRequired()!==Ue&&Jt.setRequired(Ue)},[Ne,ct,Y,ee,ue,te,de,oe,be,qe,Ue,Rt,He,Mt,li,Et,Gt,Ye,wt,Lt,ni,Xt,Ki,Jt,Yi,ei,xi,ai,dt,It,St,Qt,ln,Cn,Zn,Nr,Kr,At,jn,rn,$n,Ln,zt,_,z,O,Ni,Ui,Ze,Gn,Wn,_o,L,p,fe,De,st,ro,ho,yn,ua,To,Ft,h,wr,re,ce,me,Se,ze,$e,it,Ie,Ve,mt,he,W,X,le,ge,Te,we,Pe,Me,Le,yt,lt,_t,si,I]}class D1 extends wn{constructor(e){super(),En(this,e,XT,GT,bn,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function KT(o){let e;const n=o[11].default,a=pn(n,o,o[13],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&8192)&&fn(a,n,p,p[13],e?gn(n,p[13],_,null):mn(p[13]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function JT(o){let e,n;const a=[{use:o[3]},{"data-value":o[0]},{value:o[0]},{selected:o[2]},o[6]];let p={$$slots:{default:[KT]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new bf({props:p}),o[12](e),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,[c]){const h=c&77?en(a,[c&8&&{use:_[3]},c&1&&{"data-value":_[0]},c&1&&{value:_[0]},c&4&&{selected:_[2]},c&64&&Xr(_[6])]):{};c&8192&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[12](null),Di(e,_)}}}function YT(o,e,n){let a,p;const _=["use","class","value","getElement"];let c=bi(e,_),h,I,{$$slots:L={},$$scope:z}=e;const R=Qn(Jn());let{use:O=[]}=e;const Y="";let{value:ee=""}=e,ue;const te=Or("SMUI:select:selectedText");jo(o,te,Ne=>n(14,h=Ne));const de=Or("SMUI:select:value");jo(o,de,Ne=>n(10,I=Ne)),sr("SMUI:list:item:role","option"),Po(oe),eh(oe);function oe(){p&&ue&&Oh(te,h=ue.getPrimaryText(),h)}function be(){return ue.getElement()}function qe(Ne){qi[Ne?"unshift":"push"](()=>{ue=Ne,n(1,ue)})}return o.$$set=Ne=>{e=Ct(Ct({},e),Yn(Ne)),n(6,c=bi(e,_)),"use"in Ne&&n(7,O=Ne.use),"value"in Ne&&n(0,ee=Ne.value),"$$scope"in Ne&&n(13,z=Ne.$$scope)},o.$$.update=()=>{o.$$.dirty&128&&n(3,a=[R,...O]),o.$$.dirty&1025&&n(2,p=ee!=null&&ee!==""&&I===ee)},[ee,ue,p,a,te,de,c,O,Y,be,I,L,qe,z]}class QT extends wn{constructor(e){super(),En(this,e,YT,JT,bn,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const n_=QT;function $v(o,e,n){const a=o.slice();return a[6]=e[n],a}function $T(o){let e=o[6].title+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p:Vo,d(a){a&&We(n)}}}function e0(o){let e,n;return e=new n_({props:{value:o[6].uri,$$slots:{default:[$T]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&512&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function eA(o){let e,n,a=Tr.styles,p=[];for(let c=0;c<a.length;c+=1)p[c]=e0($v(o,a,c));const _=c=>at(p[c],1,1,()=>{p[c]=null});return{c(){for(let c=0;c<p.length;c+=1)p[c].c();e=cn()},l(c){for(let h=0;h<p.length;h+=1)p[h].l(c);e=cn()},m(c,h){for(let I=0;I<p.length;I+=1)p[I].m(c,h);Dt(c,e,h),n=!0},p(c,h){if(h&0){a=Tr.styles;let I;for(I=0;I<a.length;I+=1){const L=$v(c,a,I);p[I]?(p[I].p(L,h),tt(p[I],1)):(p[I]=e0(L),p[I].c(),tt(p[I],1),p[I].m(e.parentNode,e))}for(Cr(),I=a.length;I<p.length;I+=1)_(I);Ar()}},i(c){if(!n){for(let h=0;h<a.length;h+=1)tt(p[h]);n=!0}},o(c){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)at(p[h]);n=!1},d(c){_f(p,c),c&&We(e)}}}function tA(o){let e;return{c(){e=Io("Select and change base map")},l(n){e=So(n,"Select and change base map")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function iA(o){let e,n,a,p;function _(h){o[1](h)}let c={label:"Map theme",$$slots:{helperText:[tA],default:[eA]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.value=o[0]),n=new D1({props:c}),qi.push(()=>Cl(n,"value",_)),{c(){e=yi("div"),Li(n.$$.fragment),this.h()},l(h){e=_i(h,"DIV",{class:!0});var I=pi(e);Wi(n.$$.fragment,I),I.forEach(We),this.h()},h(){ii(e,"class","style-switcher svelte-gac6mv")},m(h,I){Dt(h,e,I),zi(n,e,null),p=!0},p(h,[I]){const L={};I&512&&(L.$$scope={dirty:I,ctx:h}),!a&&I&1&&(a=!0,L.value=h[0],kl(()=>a=!1)),n.$set(L)},i(h){p||(tt(n.$$.fragment,h),p=!0)},o(h){at(n.$$.fragment,h),p=!1},d(h){h&&We(e),Di(n)}}}function nA(o,e,n){let a,p;jo(o,bp,L=>n(2,a=L)),jo(o,zy,L=>n(3,p=L));const _=ix();let c=p.uri;const h=()=>{!a||(a.setStyle(c),a.on("styledata",()=>{_("change")}))};function I(L){c=L,n(0,c)}return o.$$.update=()=>{o.$$.dirty&1&&h()},[c,I]}class rA extends wn{constructor(e){super(),En(this,e,nA,iA,bn,{})}}function t0(o,e,n){const a=o.slice();return a[13]=e[n],a}function i0(o){let e,n,a,p;return e=new r1({props:{$$slots:{default:[uA]},$$scope:{ctx:o}}}),a=new I2({props:{$$slots:{default:[bA]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment)},l(_){Wi(e.$$.fragment,_),n=Fn(_),Wi(a.$$.fragment,_)},m(_,c){zi(e,_,c),Dt(_,n,c),zi(a,_,c),p=!0},p(_,c){const h={};c&65548&&(h.$$scope={dirty:c,ctx:_}),e.$set(h);const I={};c&65662&&(I.$$scope={dirty:c,ctx:_}),a.$set(I)},i(_){p||(tt(e.$$.fragment,_),tt(a.$$.fragment,_),p=!0)},o(_){at(e.$$.fragment,_),at(a.$$.fragment,_),p=!1},d(_){Di(e,_),_&&We(n),Di(a,_)}}}function oA(o){let e,n,a;function p(c){o[10](c)}let _={};return o[2]!==void 0&&(_.checked=o[2]),e=new l1({props:_}),qi.push(()=>Cl(e,"checked",p)),{c(){Li(e.$$.fragment)},l(c){Wi(e.$$.fragment,c)},m(c,h){zi(e,c,h),a=!0},p(c,h){const I={};!n&&h&4&&(n=!0,I.checked=c[2],kl(()=>n=!1)),e.$set(I)},i(c){a||(tt(e.$$.fragment,c),a=!0)},o(c){at(e.$$.fragment,c),a=!1},d(c){Di(e,c)}}}function aA(o){let e,n;return{c(){e=yi("span"),n=Io("Show only rendered layers"),this.h()},l(a){e=_i(a,"SPAN",{slot:!0});var p=pi(e);n=So(p,"Show only rendered layers"),p.forEach(We),this.h()},h(){ii(e,"slot","label")},m(a,p){Dt(a,e,p),sn(e,n)},p:Vo,d(a){a&&We(e)}}}function sA(o){let e,n,a;function p(c){o[11](c)}let _={};return o[3]!==void 0&&(_.checked=o[3]),e=new l1({props:_}),qi.push(()=>Cl(e,"checked",p)),{c(){Li(e.$$.fragment)},l(c){Wi(e.$$.fragment,c)},m(c,h){zi(e,c,h),a=!0},p(c,h){const I={};!n&&h&8&&(n=!0,I.checked=c[3],kl(()=>n=!1)),e.$set(I)},i(c){a||(tt(e.$$.fragment,c),a=!0)},o(c){at(e.$$.fragment,c),a=!1},d(c){Di(e,c)}}}function lA(o){let e,n;return{c(){e=yi("span"),n=Io("Show only water layers"),this.h()},l(a){e=_i(a,"SPAN",{slot:!0});var p=pi(e);n=So(p,"Show only water layers"),p.forEach(We),this.h()},h(){ii(e,"slot","label")},m(a,p){Dt(a,e,p),sn(e,n)},p:Vo,d(a){a&&We(e)}}}function uA(o){let e,n,a,p,_,c,h,I;return e=new rA({}),e.$on("change",o[7]),a=new _y({props:{$$slots:{label:[aA],default:[oA]},$$scope:{ctx:o}}}),_=new _y({props:{$$slots:{label:[lA],default:[sA]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment),p=Bn(),Li(_.$$.fragment),c=Bn(),h=yi("hr")},l(L){Wi(e.$$.fragment,L),n=Fn(L),Wi(a.$$.fragment,L),p=Fn(L),Wi(_.$$.fragment,L),c=Fn(L),h=_i(L,"HR",{})},m(L,z){zi(e,L,z),Dt(L,n,z),zi(a,L,z),Dt(L,p,z),zi(_,L,z),Dt(L,c,z),Dt(L,h,z),I=!0},p(L,z){const R={};z&65540&&(R.$$scope={dirty:z,ctx:L}),a.$set(R);const O={};z&65544&&(O.$$scope={dirty:z,ctx:L}),_.$set(O)},i(L){I||(tt(e.$$.fragment,L),tt(a.$$.fragment,L),tt(_.$$.fragment,L),I=!0)},o(L){at(e.$$.fragment,L),at(a.$$.fragment,L),at(_.$$.fragment,L),I=!1},d(L){Di(e,L),L&&We(n),Di(a,L),L&&We(p),Di(_,L),L&&We(c),L&&We(h)}}}function cA(o){let e,n;return e=new bf({props:{$$slots:{default:[pA]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&65552&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function hA(o){let e,n,a=o[6][o[13].id]&&n0(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,_){p[6][p[13].id]?a?(a.p(p,_),_&80&&tt(a,1)):(a=n0(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function dA(o){let e,n,a=o[5][o[13].id]&&r0(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,_){p[5][p[13].id]?a?(a.p(p,_),_&48&&tt(a,1)):(a=r0(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function pA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&16&&(_.layer=a[13]),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function n0(o){let e,n;return e=new bf({props:{$$slots:{default:[fA]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&65552&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function fA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&16&&(_.layer=a[13]),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function r0(o){let e,n,a,p;const _=[gA,mA],c=[];function h(I,L){return I[3]===!0?0:1}return e=h(o),n=c[e]=_[e](o),{c(){n.c(),a=cn()},l(I){n.l(I),a=cn()},m(I,L){c[e].m(I,L),Dt(I,a,L),p=!0},p(I,L){let z=e;e=h(I),e===z?c[e].p(I,L):(Cr(),at(c[z],1,1,()=>{c[z]=null}),Ar(),n=c[e],n?n.p(I,L):(n=c[e]=_[e](I),n.c()),tt(n,1),n.m(a.parentNode,a))},i(I){p||(tt(n),p=!0)},o(I){at(n),p=!1},d(I){c[e].d(I),I&&We(a)}}}function mA(o){let e,n;return e=new bf({props:{$$slots:{default:[yA]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&65552&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function gA(o){let e,n,a=o[6][o[13].id]&&o0(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,_){p[6][p[13].id]?a?(a.p(p,_),_&80&&tt(a,1)):(a=o0(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function yA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&16&&(_.layer=a[13]),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function o0(o){let e,n;return e=new bf({props:{$$slots:{default:[_A]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&65552&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function _A(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&16&&(_.layer=a[13]),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function a0(o){let e,n,a,p;const _=[dA,hA,cA],c=[];function h(I,L){return I[2]===!0?0:I[3]===!0?1:2}return e=h(o),n=c[e]=_[e](o),{c(){n.c(),a=cn()},l(I){n.l(I),a=cn()},m(I,L){c[e].m(I,L),Dt(I,a,L),p=!0},p(I,L){let z=e;e=h(I),e===z?c[e].p(I,L):(Cr(),at(c[z],1,1,()=>{c[z]=null}),Ar(),n=c[e],n?n.p(I,L):(n=c[e]=_[e](I),n.c()),tt(n,1),n.m(a.parentNode,a))},i(I){p||(tt(n),p=!0)},o(I){at(n),p=!1},d(I){c[e].d(I),I&&We(a)}}}function s0(o){let e,n,a=o[4],p=[];for(let c=0;c<a.length;c+=1)p[c]=a0(t0(o,a,c));const _=c=>at(p[c],1,1,()=>{p[c]=null});return{c(){for(let c=0;c<p.length;c+=1)p[c].c();e=cn()},l(c){for(let h=0;h<p.length;h+=1)p[h].l(c);e=cn()},m(c,h){for(let I=0;I<p.length;I+=1)p[I].m(c,h);Dt(c,e,h),n=!0},p(c,h){if(h&124){a=c[4];let I;for(I=0;I<a.length;I+=1){const L=t0(c,a,I);p[I]?(p[I].p(L,h),tt(p[I],1)):(p[I]=a0(L),p[I].c(),tt(p[I],1),p[I].m(e.parentNode,e))}for(Cr(),I=a.length;I<p.length;I+=1)_(I);Ar()}},i(c){if(!n){for(let h=0;h<a.length;h+=1)tt(p[h]);n=!0}},o(c){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)at(p[h]);n=!1},d(c){_f(p,c),c&&We(e)}}}function vA(o){let e=o[1],n,a,p=s0(o);return{c(){p.c(),n=cn()},l(_){p.l(_),n=cn()},m(_,c){p.m(_,c),Dt(_,n,c),a=!0},p(_,c){c&2&&bn(e,e=_[1])?(Cr(),at(p,1,1,Vo),Ar(),p=s0(_),p.c(),tt(p),p.m(n.parentNode,n)):p.p(_,c)},i(_){a||(tt(p),a=!0)},o(_){at(p),a=!1},d(_){_&&We(n),p.d(_)}}}function bA(o){let e,n;return e=new s1({props:{$$slots:{default:[vA]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&65662&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function xA(o){let e,n,a=o[0]&&i0(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,[_]){p[0]?a?(a.p(p,_),_&1&&tt(a,1)):(a=i0(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function wA(o,e,n){let a;jo(o,bp,te=>n(9,a=te));let p,_=!0,c=!0,h=[],I={},L={},{isLayersTabVisible:z=!1}=e;Tr.legend&&Tr.legend.targets&&(L=Tr.legend.targets);const R=()=>{!a||(a.isStyleLoaded()?(n(1,p=a.getStyle()),n(4,h=p.layers),O()):a.on("load",R))},O=()=>{if(n(5,I={}),a&&a.queryRenderedFeatures){const te=a.queryRenderedFeatures();for(let de of te)n(5,I[de.layer.id]=de.layer,I)}},Y=()=>{R()};function ee(te){_=te,n(2,_)}function ue(te){c=te,n(3,c)}return o.$$set=te=>{"isLayersTabVisible"in te&&n(0,z=te.isLayersTabVisible)},o.$$.update=()=>{o.$$.dirty&512&&a&&(a.on("moveend",R),a.on("styledata",R)),o.$$.dirty&2&&R(),o.$$.dirty&4&&R(),o.$$.dirty&8&&R()},[z,p,_,c,h,I,L,Y,R,a,ee,ue]}class EA extends wn{constructor(e){super(),En(this,e,wA,xA,bn,{isLayersTabVisible:0,updateLayers:8})}get updateLayers(){return this.$$.ctx[8]}}function IA(o){let e,n,a,p,_,c;const h=o[13].default,I=pn(h,o,o[12],null);let L=[{class:n=wi({[o[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":o[2],"smui-accordion--with-open-dialog":o[4]})},o[10]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("div"),I&&I.c(),this.h()},l(R){e=_i(R,"DIV",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[14](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[5].call(null,e)),An(e,"SMUIAccordionPanel:mount",o[6]),An(e,"SMUIAccordionPanel:unmount",o[7]),An(e,"SMUIAccordionPanel:activate",o[8]),An(e,"SMUIAccordionPanel:opening",o[9]),An(e,"SMUIDialog:opening",o[15],!0),An(e,"SMUIDialog:closed",o[16],!0)],_=!0)},p(R,[O]){I&&I.p&&(!p||O&4096)&&fn(I,h,R,R[12],p?gn(h,R[12],O,null):mn(R[12]),null),hi(e,z=en(L,[(!p||O&22&&n!==(n=wi({[R[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":R[2],"smui-accordion--with-open-dialog":R[4]})))&&{class:n},O&1024&&R[10]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[14](null),_=!1,xr(c)}}}function SA(o,e,n){const a=["use","class","multiple","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{multiple:z=!1}=e,R,O=new Set,Y=!1;function ee(De){const fe=De.detail;if(De.stopPropagation(),!z&&fe.open){const ct=Array.from(O).find(st=>st.open);ct&&ct.setOpen(!1)}O.add(fe)}function ue(De){const fe=De.detail;De.stopPropagation(),O.delete(fe)}function te(De){const{accessor:fe}=De.detail;if(!z&&!fe.open){const ct=Array.from(O).find(st=>st.open);ct&&ct.setOpen(!1)}fe.setOpen(!fe.open)}function de(De){const{accessor:fe}=De.detail;z||Array.from(O).filter(st=>st!==fe&&st.open).forEach(st=>st.setOpen(!1))}function oe(){return R}function be(De){qi[De?"unshift":"push"](()=>{R=De,n(3,R)})}const qe=()=>n(4,Y=!0),Ne=()=>n(4,Y=!1);return o.$$set=De=>{e=Ct(Ct({},e),Yn(De)),n(10,p=bi(e,a)),"use"in De&&n(0,I=De.use),"class"in De&&n(1,L=De.class),"multiple"in De&&n(2,z=De.multiple),"$$scope"in De&&n(12,c=De.$$scope)},[I,L,z,R,Y,h,ee,ue,te,de,p,oe,c,_,be,qe,Ne]}class TA extends wn{constructor(e){super(),En(this,e,SA,IA,bn,{use:0,class:1,multiple:2,getElement:11})}get getElement(){return this.$$.ctx[11]}}function AA(o){let e,n,a,p,_,c;const h=o[12].default,I=pn(h,o,o[11],null);let L=[{class:n=wi({[o[1]]:!0,"smui-paper":!0,"smui-paper--raised":o[2]==="raised","smui-paper--unelevated":o[2]==="unelevated","smui-paper--outlined":o[2]==="outlined",["smui-paper--elevation-z"+o[5]]:o[5]!==0&&o[2]==="raised","smui-paper--rounded":!o[3],["smui-paper--color-"+o[4]]:o[4]!=="default","smui-paper-transition":o[6]})},o[9]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("div"),I&&I.c(),this.h()},l(R){e=_i(R,"DIV",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[13](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[8].call(null,e))],_=!0)},p(R,[O]){I&&I.p&&(!p||O&2048)&&fn(I,h,R,R[11],p?gn(h,R[11],O,null):mn(R[11]),null),hi(e,z=en(L,[(!p||O&126&&n!==(n=wi({[R[1]]:!0,"smui-paper":!0,"smui-paper--raised":R[2]==="raised","smui-paper--unelevated":R[2]==="unelevated","smui-paper--outlined":R[2]==="outlined",["smui-paper--elevation-z"+R[5]]:R[5]!==0&&R[2]==="raised","smui-paper--rounded":!R[3],["smui-paper--color-"+R[4]]:R[4]!=="default","smui-paper-transition":R[6]})))&&{class:n},O&512&&R[9]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[13](null),_=!1,xr(c)}}}function CA(o,e,n){const a=["use","class","variant","square","color","elevation","transition","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{variant:z="raised"}=e,{square:R=!1}=e,{color:O="default"}=e,{elevation:Y=1}=e,{transition:ee=!1}=e,ue;function te(){return ue}function de(oe){qi[oe?"unshift":"push"](()=>{ue=oe,n(7,ue)})}return o.$$set=oe=>{e=Ct(Ct({},e),Yn(oe)),n(9,p=bi(e,a)),"use"in oe&&n(0,I=oe.use),"class"in oe&&n(1,L=oe.class),"variant"in oe&&n(2,z=oe.variant),"square"in oe&&n(3,R=oe.square),"color"in oe&&n(4,O=oe.color),"elevation"in oe&&n(5,Y=oe.elevation),"transition"in oe&&n(6,ee=oe.transition),"$$scope"in oe&&n(11,c=oe.$$scope)},[I,L,z,R,O,Y,ee,ue,h,p,te,c,_,de]}class kA extends wn{constructor(e){super(),En(this,e,CA,AA,bn,{use:0,class:1,variant:2,square:3,color:4,elevation:5,transition:6,getElement:10})}get getElement(){return this.$$.ctx[10]}}var MA=ns({class:"smui-paper__content",component:_p});ns({class:"smui-paper__title",component:vw});ns({class:"smui-paper__subtitle",component:bw});function PA(o){let e;const n=o[23].default,a=pn(n,o,o[25],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&33554432)&&fn(a,n,p,p[25],e?gn(n,p[25],_,null):mn(p[25]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function LA(o){let e,n;const a=[{use:o[11]},{class:wi({[o[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":o[0],"smui-accordion__panel--opened":o[10],"smui-accordion__panel--disabled":o[5],"smui-accordion__panel--non-interactive":o[6],"smui-accordion__panel--raised":o[2]==="raised","smui-accordion__panel--extend":o[7],["smui-accordion__panel--elevation-z"+(o[7]&&o[0]?o[8]:o[4])]:o[4]!==0&&o[2]==="raised"||o[8]!==0&&o[2]==="raised"&&o[7]&&o[0]})},{color:o[3]},{variant:o[2]==="raised"?"unelevated":o[2]},o[16]];let p={$$slots:{default:[PA]},$$scope:{ctx:o}};for(let _=0;_<a.length;_+=1)p=Ct(p,a[_]);return e=new kA({props:p}),o[24](e),e.$on("SMUIAccordionHeader:activate",o[15]),{c(){Li(e.$$.fragment)},l(_){Wi(e.$$.fragment,_)},m(_,c){zi(e,_,c),n=!0},p(_,[c]){const h=c&69119?en(a,[c&2048&&{use:_[11]},c&1527&&{class:wi({[_[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":_[0],"smui-accordion__panel--opened":_[10],"smui-accordion__panel--disabled":_[5],"smui-accordion__panel--non-interactive":_[6],"smui-accordion__panel--raised":_[2]==="raised","smui-accordion__panel--extend":_[7],["smui-accordion__panel--elevation-z"+(_[7]&&_[0]?_[8]:_[4])]:_[4]!==0&&_[2]==="raised"||_[8]!==0&&_[2]==="raised"&&_[7]&&_[0]})},c&8&&{color:_[3]},c&4&&{variant:_[2]==="raised"?"unelevated":_[2]},c&65536&&Xr(_[16])]):{};c&33554432&&(h.$$scope={dirty:c,ctx:_}),e.$set(h)},i(_){n||(tt(e.$$.fragment,_),n=!0)},o(_){at(e.$$.fragment,_),n=!1},d(_){o[24](null),Di(e,_)}}}function zA(o,e,n){let a;const p=["use","class","variant","color","elevation","open","disabled","nonInteractive","extend","extendedElevation","isOpen","setOpen","getElement"];let _=bi(e,p),c,h,I,{$$slots:L={},$$scope:z}=e;const R=Qn(Jn());let{use:O=[]}=e,{class:Y=""}=e,{variant:ee="raised"}=e,{color:ue="default"}=e,{elevation:te=1}=e,{open:de=!1}=e,{disabled:oe=!1}=e,{nonInteractive:be=!1}=e,{extend:qe=!1}=e,{extendedElevation:Ne=3}=e,De,fe,ct=de;const st=eu(oe);jo(o,st,Ye=>n(28,I=Ye)),sr("SMUI:accordion:panel:disabled",st);const Ge=eu(be);jo(o,Ge,Ye=>n(27,h=Ye)),sr("SMUI:accordion:panel:nonInteractive",Ge);const Ue=eu(de);jo(o,Ue,Ye=>n(26,c=Ye)),sr("SMUI:accordion:panel:open",Ue);let Rt=de;Po(()=>(n(21,fe={get open(){return de},setOpen:li}),Array.from(Et().children).forEach(Ye=>{Ye.classList.contains("smui-paper__content")&&Ye.setAttribute("aria-hidden",de?"false":"true")}),Pn(Et(),"SMUIAccordionPanel:mount",fe),()=>{Pn(Et(),"SMUIAccordionPanel:unmount",fe)}));function He(Ye){Ye.stopPropagation(),!(oe||be)&&Pn(Et(),"SMUIAccordionPanel:activate",{accessor:fe,event:Ye})}function Mt(){return de}function li(Ye){n(0,de=Ye)}function Et(){return De.getElement()}function Gt(Ye){qi[Ye?"unshift":"push"](()=>{De=Ye,n(9,De)})}return o.$$set=Ye=>{e=Ct(Ct({},e),Yn(Ye)),n(16,_=bi(e,p)),"use"in Ye&&n(17,O=Ye.use),"class"in Ye&&n(1,Y=Ye.class),"variant"in Ye&&n(2,ee=Ye.variant),"color"in Ye&&n(3,ue=Ye.color),"elevation"in Ye&&n(4,te=Ye.elevation),"open"in Ye&&n(0,de=Ye.open),"disabled"in Ye&&n(5,oe=Ye.disabled),"nonInteractive"in Ye&&n(6,be=Ye.nonInteractive),"extend"in Ye&&n(7,qe=Ye.extend),"extendedElevation"in Ye&&n(8,Ne=Ye.extendedElevation),"$$scope"in Ye&&n(25,z=Ye.$$scope)},o.$$.update=()=>{o.$$.dirty&131072&&n(11,a=[R,...O]),o.$$.dirty&32&&Oh(st,I=oe,I),o.$$.dirty&64&&Oh(Ge,h=be,h),o.$$.dirty&1&&Oh(Ue,c=de,c),o.$$.dirty&6291457&&Rt!==de&&(n(22,Rt=de),Array.from(Et().children).forEach(Ye=>{if(Ye.classList.contains("smui-paper__content")){const wt=Ye;if(de){wt.classList.add("smui-accordion__content--no-transition"),wt.classList.add("smui-accordion__content--force-open");const{height:Lt}=wt.getBoundingClientRect();wt.classList.remove("smui-accordion__content--force-open"),wt.getBoundingClientRect(),wt.classList.remove("smui-accordion__content--no-transition"),wt.style.height=Lt+"px",wt.addEventListener("transitionend",()=>{wt&&(wt.style.height=""),n(10,ct=!0),Pn(Et(),"SMUIAccordionPanel:opened",{accessor:fe})},{once:!0})}else wt.style.height=wt.getBoundingClientRect().height+"px",wt.getBoundingClientRect(),requestAnimationFrame(()=>{wt&&(wt.style.height=""),Pn(Et(),"SMUIAccordionPanel:closed",{accessor:fe})}),n(10,ct=!1);wt.setAttribute("aria-hidden",de?"false":"true")}}),Pn(Et(),de?"SMUIAccordionPanel:opening":"SMUIAccordionPanel:closing",{accessor:fe}))},[de,Y,ee,ue,te,oe,be,qe,Ne,De,ct,a,st,Ge,Ue,He,_,O,Mt,li,Et,fe,Rt,L,Gt,z]}class DA extends wn{constructor(e){super(),En(this,e,zA,LA,bn,{use:17,class:1,variant:2,color:3,elevation:4,open:0,disabled:5,nonInteractive:6,extend:7,extendedElevation:8,isOpen:18,setOpen:19,getElement:20})}get isOpen(){return this.$$.ctx[18]}get setOpen(){return this.$$.ctx[19]}get getElement(){return this.$$.ctx[20]}}const RA=o=>({}),l0=o=>({}),OA=o=>({}),u0=o=>({});function c0(o){let e;return{c(){e=yi("div"),this.h()},l(n){e=_i(n,"DIV",{class:!0}),pi(e).forEach(We),this.h()},h(){ii(e,"class","smui-accordion__header__ripple")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function h0(o){let e,n;const a=o[23].description,p=pn(a,o,o[22],u0);return{c(){e=yi("div"),p&&p.c(),this.h()},l(_){e=_i(_,"DIV",{class:!0});var c=pi(e);p&&p.l(c),c.forEach(We),this.h()},h(){ii(e,"class","smui-accordion__header__description")},m(_,c){Dt(_,e,c),p&&p.m(e,null),n=!0},p(_,c){p&&p.p&&(!n||c&4194304)&&fn(p,a,_,_[22],n?gn(a,_[22],c,OA):mn(_[22]),u0)},i(_){n||(tt(p,_),n=!0)},o(_){at(p,_),n=!1},d(_){_&&We(e),p&&p.d(_)}}}function d0(o){let e,n;const a=o[23].icon,p=pn(a,o,o[22],l0);return{c(){e=yi("div"),p&&p.c(),this.h()},l(_){e=_i(_,"DIV",{class:!0});var c=pi(e);p&&p.l(c),c.forEach(We),this.h()},h(){ii(e,"class","smui-accordion__header__icon")},m(_,c){Dt(_,e,c),p&&p.m(e,null),n=!0},p(_,c){p&&p.p&&(!n||c&4194304)&&fn(p,a,_,_[22],n?gn(a,_[22],c,RA):mn(_[22]),l0)},i(_){n||(tt(p,_),n=!0)},o(_){at(p,_),n=!1},d(_){_&&We(e),p&&p.d(_)}}}function BA(o){let e,n,a,p,_,c,h,I,L,z,R,O,Y,ee,ue,te=o[3]&&c0();const de=o[23].default,oe=pn(de,o,o[22],null);let be=o[20].description&&h0(o),qe=o[20].icon&&d0(o),Ne=[{class:h=wi(tr({[o[1]]:!0,"smui-accordion__header":!0},o[5]))},{style:I=Object.entries(o[6]).map(p0).concat([o[2]]).join(" ")},{role:"button"},{tabindex:L=o[7]?-1:0},{"aria-expanded":z=o[9]?"true":"false"},o[19]],De={};for(let fe=0;fe<Ne.length;fe+=1)De=Ct(De,Ne[fe]);return{c(){e=yi("div"),te&&te.c(),n=Bn(),a=yi("div"),oe&&oe.c(),_=Bn(),be&&be.c(),c=Bn(),qe&&qe.c(),this.h()},l(fe){e=_i(fe,"DIV",{class:!0,style:!0,role:!0,tabindex:!0,"aria-expanded":!0});var ct=pi(e);te&&te.l(ct),n=Fn(ct),a=_i(ct,"DIV",{class:!0});var st=pi(a);oe&&oe.l(st),st.forEach(We),_=Fn(ct),be&&be.l(ct),c=Fn(ct),qe&&qe.l(ct),ct.forEach(We),this.h()},h(){ii(a,"class",p=wi({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":o[20].description})),hi(e,De)},m(fe,ct){Dt(fe,e,ct),te&&te.m(e,null),sn(e,n),sn(e,a),oe&&oe.m(a,null),sn(e,_),be&&be.m(e,null),sn(e,c),qe&&qe.m(e,null),o[24](e),Y=!0,ee||(ue=[Ei(R=qn.call(null,e,o[0])),Ei(o[10].call(null,e)),Ei(O=$c.call(null,e,{ripple:o[3],unbounded:!1,surface:!o[7],disabled:o[8]||o[7],addClass:o[16],removeClass:o[17],addStyle:o[18]})),An(e,"click",o[14]),An(e,"keydown",o[15])],ee=!0)},p(fe,[ct]){fe[3]?te||(te=c0(),te.c(),te.m(e,n)):te&&(te.d(1),te=null),oe&&oe.p&&(!Y||ct&4194304)&&fn(oe,de,fe,fe[22],Y?gn(de,fe[22],ct,null):mn(fe[22]),null),(!Y||ct&1048576&&p!==(p=wi({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":fe[20].description})))&&ii(a,"class",p),fe[20].description?be?(be.p(fe,ct),ct&1048576&&tt(be,1)):(be=h0(fe),be.c(),tt(be,1),be.m(e,c)):be&&(Cr(),at(be,1,1,()=>{be=null}),Ar()),fe[20].icon?qe?(qe.p(fe,ct),ct&1048576&&tt(qe,1)):(qe=d0(fe),qe.c(),tt(qe,1),qe.m(e,null)):qe&&(Cr(),at(qe,1,1,()=>{qe=null}),Ar()),hi(e,De=en(Ne,[(!Y||ct&34&&h!==(h=wi(tr({[fe[1]]:!0,"smui-accordion__header":!0},fe[5]))))&&{class:h},(!Y||ct&68&&I!==(I=Object.entries(fe[6]).map(p0).concat([fe[2]]).join(" ")))&&{style:I},{role:"button"},(!Y||ct&128&&L!==(L=fe[7]?-1:0))&&{tabindex:L},(!Y||ct&512&&z!==(z=fe[9]?"true":"false"))&&{"aria-expanded":z},ct&524288&&fe[19]])),R&&zn(R.update)&&ct&1&&R.update.call(null,fe[0]),O&&zn(O.update)&&ct&392&&O.update.call(null,{ripple:fe[3],unbounded:!1,surface:!fe[7],disabled:fe[8]||fe[7],addClass:fe[16],removeClass:fe[17],addStyle:fe[18]})},i(fe){Y||(tt(oe,fe),tt(be),tt(qe),Y=!0)},o(fe){at(oe,fe),at(be),at(qe),Y=!1},d(fe){fe&&We(e),te&&te.d(),oe&&oe.d(fe),be&&be.d(),qe&&qe.d(),o[24](null),ee=!1,xr(ue)}}}const p0=([o,e])=>`${o}: ${e};`;function FA(o,e,n){const a=["use","class","style","ripple","getElement"];let p=bi(e,a),_,c,h,{$$slots:I={},$$scope:L}=e;const z=ky(I),R=Qn(Jn());let{use:O=[]}=e,{class:Y=""}=e,{style:ee=""}=e,{ripple:ue=!0}=e,te,de={},oe={};const be=Or("SMUI:accordion:panel:disabled");jo(o,be,He=>n(8,c=He));const qe=Or("SMUI:accordion:panel:nonInteractive");jo(o,qe,He=>n(7,_=He));const Ne=Or("SMUI:accordion:panel:open");jo(o,Ne,He=>n(9,h=He));function De(He){He=He,He.button===0&&Pn(Ue(),"SMUIAccordionHeader:activate",{event:He})}function fe(He){He=He,He.key==="Enter"&&Pn(Ue(),"SMUIAccordionHeader:activate",{event:He})}function ct(He){de[He]||n(5,de[He]=!0,de)}function st(He){(!(He in de)||de[He])&&n(5,de[He]=!1,de)}function Ge(He,Mt){oe[He]!=Mt&&(Mt===""||Mt==null?(delete oe[He],n(6,oe)):n(6,oe[He]=Mt,oe))}function Ue(){return te}function Rt(He){qi[He?"unshift":"push"](()=>{te=He,n(4,te)})}return o.$$set=He=>{e=Ct(Ct({},e),Yn(He)),n(19,p=bi(e,a)),"use"in He&&n(0,O=He.use),"class"in He&&n(1,Y=He.class),"style"in He&&n(2,ee=He.style),"ripple"in He&&n(3,ue=He.ripple),"$$scope"in He&&n(22,L=He.$$scope)},[O,Y,ee,ue,te,de,oe,_,c,h,R,be,qe,Ne,De,fe,ct,st,Ge,p,z,Ue,L,I,Rt]}class UA extends wn{constructor(e){super(),En(this,e,FA,BA,bn,{use:0,class:1,style:2,ripple:3,getElement:21})}get getElement(){return this.$$.ctx[21]}}const NA=DA,VA=UA;/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Aa={CELL:"mdc-data-table__cell",CELL_NUMERIC:"mdc-data-table__cell--numeric",CONTENT:"mdc-data-table__content",HEADER_CELL:"mdc-data-table__header-cell",HEADER_CELL_LABEL:"mdc-data-table__header-cell-label",HEADER_CELL_SORTED:"mdc-data-table__header-cell--sorted",HEADER_CELL_SORTED_DESCENDING:"mdc-data-table__header-cell--sorted-descending",HEADER_CELL_WITH_SORT:"mdc-data-table__header-cell--with-sort",HEADER_CELL_WRAPPER:"mdc-data-table__header-cell-wrapper",HEADER_ROW:"mdc-data-table__header-row",HEADER_ROW_CHECKBOX:"mdc-data-table__header-row-checkbox",IN_PROGRESS:"mdc-data-table--in-progress",LINEAR_PROGRESS:"mdc-data-table__linear-progress",PAGINATION_ROWS_PER_PAGE_LABEL:"mdc-data-table__pagination-rows-per-page-label",PAGINATION_ROWS_PER_PAGE_SELECT:"mdc-data-table__pagination-rows-per-page-select",PROGRESS_INDICATOR:"mdc-data-table__progress-indicator",ROOT:"mdc-data-table",ROW:"mdc-data-table__row",ROW_CHECKBOX:"mdc-data-table__row-checkbox",ROW_SELECTED:"mdc-data-table__row--selected",SORT_ICON_BUTTON:"mdc-data-table__sort-icon-button",SORT_STATUS_LABEL:"mdc-data-table__sort-status-label",TABLE_CONTAINER:"mdc-data-table__table-container"},f0={ARIA_SELECTED:"aria-selected",ARIA_SORT:"aria-sort"},jA={COLUMN_ID:"data-column-id",ROW_ID:"data-row-id"},hm={CONTENT:"."+Aa.CONTENT,HEADER_CELL:"."+Aa.HEADER_CELL,HEADER_CELL_WITH_SORT:"."+Aa.HEADER_CELL_WITH_SORT,HEADER_ROW:"."+Aa.HEADER_ROW,HEADER_ROW_CHECKBOX:"."+Aa.HEADER_ROW_CHECKBOX,PROGRESS_INDICATOR:"."+Aa.PROGRESS_INDICATOR,ROW:"."+Aa.ROW,ROW_CHECKBOX:"."+Aa.ROW_CHECKBOX,ROW_SELECTED:"."+Aa.ROW_SELECTED,SORT_ICON_BUTTON:"."+Aa.SORT_ICON_BUTTON,SORT_STATUS_LABEL:"."+Aa.SORT_STATUS_LABEL},yd={ARIA_SELECTED:f0.ARIA_SELECTED,ARIA_SORT:f0.ARIA_SORT,DATA_ROW_ID_ATTR:jA.ROW_ID,HEADER_ROW_CHECKBOX_SELECTOR:hm.HEADER_ROW_CHECKBOX,ROW_CHECKBOX_SELECTOR:hm.ROW_CHECKBOX,ROW_SELECTED_SELECTOR:hm.ROW_SELECTED,ROW_SELECTOR:hm.ROW},Tl;(function(o){o.ASCENDING="ascending",o.DESCENDING="descending",o.NONE="none",o.OTHER="other"})(Tl||(Tl={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var qA=function(o){co(e,o);function e(n){return o.call(this,cr(cr({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},addClassAtRowIndex:function(){},getAttributeByHeaderCellIndex:function(){return""},getHeaderCellCount:function(){return 0},getHeaderCellElements:function(){return[]},getRowCount:function(){return 0},getRowElements:function(){return[]},getRowIdAtIndex:function(){return""},getRowIndexByChildElement:function(){return 0},getSelectedRowCount:function(){return 0},getTableContainerHeight:function(){return 0},getTableHeaderHeight:function(){return 0},isCheckboxAtRowIndexChecked:function(){return!1},isHeaderRowCheckboxChecked:function(){return!1},isRowsSelectable:function(){return!1},notifyRowSelectionChanged:function(){},notifySelectedAll:function(){},notifySortAction:function(){},notifyUnselectedAll:function(){},notifyRowClick:function(){},registerHeaderRowCheckbox:function(){},registerRowCheckboxes:function(){},removeClass:function(){},removeClassAtRowIndex:function(){},removeClassNameByHeaderCellIndex:function(){},setAttributeAtRowIndex:function(){},setAttributeByHeaderCellIndex:function(){},setClassNameByHeaderCellIndex:function(){},setHeaderRowCheckboxChecked:function(){},setHeaderRowCheckboxIndeterminate:function(){},setProgressIndicatorStyles:function(){},setRowCheckboxCheckedAtIndex:function(){},setSortStatusLabelByHeaderCellIndex:function(){}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.isRowsSelectable()&&(this.adapter.registerHeaderRowCheckbox(),this.adapter.registerRowCheckboxes(),this.setHeaderRowCheckboxState())},e.prototype.layoutAsync=function(){return rx(this,void 0,void 0,function(){return ox(this,function(n){switch(n.label){case 0:return this.adapter.isRowsSelectable()?[4,this.adapter.registerHeaderRowCheckbox()]:[3,3];case 1:return n.sent(),[4,this.adapter.registerRowCheckboxes()];case 2:n.sent(),this.setHeaderRowCheckboxState(),n.label=3;case 3:return[2]}})})},e.prototype.getRows=function(){return this.adapter.getRowElements()},e.prototype.getHeaderCells=function(){return this.adapter.getHeaderCellElements()},e.prototype.setSelectedRowIds=function(n){for(var a=0;a<this.adapter.getRowCount();a++){var p=this.adapter.getRowIdAtIndex(a),_=!1;p&&n.indexOf(p)>=0&&(_=!0),this.adapter.setRowCheckboxCheckedAtIndex(a,_),this.selectRowAtIndex(a,_)}this.setHeaderRowCheckboxState()},e.prototype.getRowIds=function(){for(var n=[],a=0;a<this.adapter.getRowCount();a++)n.push(this.adapter.getRowIdAtIndex(a));return n},e.prototype.getSelectedRowIds=function(){for(var n=[],a=0;a<this.adapter.getRowCount();a++)this.adapter.isCheckboxAtRowIndexChecked(a)&&n.push(this.adapter.getRowIdAtIndex(a));return n},e.prototype.handleHeaderRowCheckboxChange=function(){for(var n=this.adapter.isHeaderRowCheckboxChecked(),a=0;a<this.adapter.getRowCount();a++)this.adapter.setRowCheckboxCheckedAtIndex(a,n),this.selectRowAtIndex(a,n);n?this.adapter.notifySelectedAll():this.adapter.notifyUnselectedAll()},e.prototype.handleRowCheckboxChange=function(n){var a=this.adapter.getRowIndexByChildElement(n.target);if(a!==-1){var p=this.adapter.isCheckboxAtRowIndexChecked(a);this.selectRowAtIndex(a,p),this.setHeaderRowCheckboxState();var _=this.adapter.getRowIdAtIndex(a);this.adapter.notifyRowSelectionChanged({rowId:_,rowIndex:a,selected:p})}},e.prototype.handleSortAction=function(n){for(var a=n.columnId,p=n.columnIndex,_=n.headerCell,c=0;c<this.adapter.getHeaderCellCount();c++)c!==p&&(this.adapter.removeClassNameByHeaderCellIndex(c,Aa.HEADER_CELL_SORTED),this.adapter.removeClassNameByHeaderCellIndex(c,Aa.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(c,yd.ARIA_SORT,Tl.NONE),this.adapter.setSortStatusLabelByHeaderCellIndex(c,Tl.NONE));this.adapter.setClassNameByHeaderCellIndex(p,Aa.HEADER_CELL_SORTED);var h=this.adapter.getAttributeByHeaderCellIndex(p,yd.ARIA_SORT),I=Tl.NONE;h===Tl.ASCENDING?(this.adapter.setClassNameByHeaderCellIndex(p,Aa.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(p,yd.ARIA_SORT,Tl.DESCENDING),I=Tl.DESCENDING):h===Tl.DESCENDING?(this.adapter.removeClassNameByHeaderCellIndex(p,Aa.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(p,yd.ARIA_SORT,Tl.ASCENDING),I=Tl.ASCENDING):(this.adapter.setAttributeByHeaderCellIndex(p,yd.ARIA_SORT,Tl.ASCENDING),I=Tl.ASCENDING),this.adapter.setSortStatusLabelByHeaderCellIndex(p,I),this.adapter.notifySortAction({columnId:a,columnIndex:p,headerCell:_,sortValue:I})},e.prototype.handleRowClick=function(n){var a=n.rowId,p=n.row;this.adapter.notifyRowClick({rowId:a,row:p})},e.prototype.showProgress=function(){var n=this.adapter.getTableHeaderHeight(),a=this.adapter.getTableContainerHeight()-n,p=n;this.adapter.setProgressIndicatorStyles({height:a+"px",top:p+"px"}),this.adapter.addClass(Aa.IN_PROGRESS)},e.prototype.hideProgress=function(){this.adapter.removeClass(Aa.IN_PROGRESS)},e.prototype.setHeaderRowCheckboxState=function(){this.adapter.getSelectedRowCount()===0?(this.adapter.setHeaderRowCheckboxChecked(!1),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):this.adapter.getSelectedRowCount()===this.adapter.getRowCount()?(this.adapter.setHeaderRowCheckboxChecked(!0),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):(this.adapter.setHeaderRowCheckboxIndeterminate(!0),this.adapter.setHeaderRowCheckboxChecked(!1))},e.prototype.selectRowAtIndex=function(n,a){a?(this.adapter.addClassAtRowIndex(n,Aa.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(n,yd.ARIA_SELECTED,"true")):(this.adapter.removeClassAtRowIndex(n,Aa.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(n,yd.ARIA_SELECTED,"false"))},e}(Ma);const GA=o=>({}),m0=o=>({}),HA=o=>({}),g0=o=>({});function y0(o){let e,n,a,p,_;const c=o[33].progress,h=pn(c,o,o[32],g0);return{c(){e=yi("div"),n=yi("div"),a=Bn(),h&&h.c(),this.h()},l(I){e=_i(I,"DIV",{class:!0,style:!0});var L=pi(e);n=_i(L,"DIV",{class:!0}),pi(n).forEach(We),a=Fn(L),h&&h.l(L),L.forEach(We),this.h()},h(){ii(n,"class","mdc-data-table__scrim"),ii(e,"class","mdc-data-table__progress-indicator"),ii(e,"style",p=Object.entries(o[13]).map(_0).join(" "))},m(I,L){Dt(I,e,L),sn(e,n),sn(e,a),h&&h.m(e,null),_=!0},p(I,L){h&&h.p&&(!_||L[1]&2)&&fn(h,c,I,I[32],_?gn(c,I[32],L,HA):mn(I[32]),g0),(!_||L[0]&8192&&p!==(p=Object.entries(I[13]).map(_0).join(" ")))&&ii(e,"style",p)},i(I){_||(tt(h,I),_=!0)},o(I){at(h,I),_=!1},d(I){I&&We(e),h&&h.d(I)}}}function ZA(o){let e,n,a,p,_,c,h,I,L,z,R,O,Y,ee;const ue=o[33].default,te=pn(ue,o,o[32],null);let de=[{class:p=wi({[o[6]]:!0,"mdc-data-table__table":!0})},rr(o[22],"table$")],oe={};for(let Ge=0;Ge<de.length;Ge+=1)oe=Ct(oe,de[Ge]);let be=[{class:c=wi({[o[4]]:!0,"mdc-data-table__table-container":!0})},rr(o[22],"container$")],qe={};for(let Ge=0;Ge<be.length;Ge+=1)qe=Ct(qe,be[Ge]);let Ne=o[21].progress&&y0(o);const De=o[33].paginate,fe=pn(De,o,o[32],m0);let ct=[{class:z=wi(tr({[o[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":o[2]},o[12]))},_s(o[22],["container$","table$"])],st={};for(let Ge=0;Ge<ct.length;Ge+=1)st=Ct(st,ct[Ge]);return{c(){e=yi("div"),n=yi("div"),a=yi("table"),te&&te.c(),I=Bn(),Ne&&Ne.c(),L=Bn(),fe&&fe.c(),this.h()},l(Ge){e=_i(Ge,"DIV",{class:!0});var Ue=pi(e);n=_i(Ue,"DIV",{class:!0});var Rt=pi(n);a=_i(Rt,"TABLE",{class:!0});var He=pi(a);te&&te.l(He),He.forEach(We),Rt.forEach(We),I=Fn(Ue),Ne&&Ne.l(Ue),L=Fn(Ue),fe&&fe.l(Ue),Ue.forEach(We),this.h()},h(){hi(a,oe),hi(n,qe),hi(e,st)},m(Ge,Ue){Dt(Ge,e,Ue),sn(e,n),sn(n,a),te&&te.m(a,null),o[34](n),sn(e,I),Ne&&Ne.m(e,null),sn(e,L),fe&&fe.m(e,null),o[35](e),O=!0,Y||(ee=[Ei(_=qn.call(null,a,o[5])),Ei(h=qn.call(null,n,o[3])),Ei(R=qn.call(null,e,o[0])),Ei(o[15].call(null,e)),An(e,"SMUICheckbox:mount",o[36]),An(e,"SMUIDataTableHeader:mount",o[37]),An(e,"SMUIDataTableHeader:unmount",o[38]),An(e,"SMUIDataTableBody:mount",o[39]),An(e,"SMUIDataTableBody:unmount",o[40]),An(e,"SMUIDataTableHeaderCheckbox:change",o[41]),An(e,"SMUIDataTableHeader:click",o[19]),An(e,"SMUIDataTableRow:click",o[20]),An(e,"SMUIDataTableBodyCheckbox:change",o[42])],Y=!0)},p(Ge,Ue){te&&te.p&&(!O||Ue[1]&2)&&fn(te,ue,Ge,Ge[32],O?gn(ue,Ge[32],Ue,null):mn(Ge[32]),null),hi(a,oe=en(de,[(!O||Ue[0]&64&&p!==(p=wi({[Ge[6]]:!0,"mdc-data-table__table":!0})))&&{class:p},Ue[0]&4194304&&rr(Ge[22],"table$")])),_&&zn(_.update)&&Ue[0]&32&&_.update.call(null,Ge[5]),hi(n,qe=en(be,[(!O||Ue[0]&16&&c!==(c=wi({[Ge[4]]:!0,"mdc-data-table__table-container":!0})))&&{class:c},Ue[0]&4194304&&rr(Ge[22],"container$")])),h&&zn(h.update)&&Ue[0]&8&&h.update.call(null,Ge[3]),Ge[21].progress?Ne?(Ne.p(Ge,Ue),Ue[0]&2097152&&tt(Ne,1)):(Ne=y0(Ge),Ne.c(),tt(Ne,1),Ne.m(e,L)):Ne&&(Cr(),at(Ne,1,1,()=>{Ne=null}),Ar()),fe&&fe.p&&(!O||Ue[1]&2)&&fn(fe,De,Ge,Ge[32],O?gn(De,Ge[32],Ue,GA):mn(Ge[32]),m0),hi(e,st=en(ct,[(!O||Ue[0]&4102&&z!==(z=wi(tr({[Ge[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":Ge[2]},Ge[12]))))&&{class:z},Ue[0]&4194304&&_s(Ge[22],["container$","table$"])])),R&&zn(R.update)&&Ue[0]&1&&R.update.call(null,Ge[0])},i(Ge){O||(tt(te,Ge),tt(Ne),tt(fe,Ge),O=!0)},o(Ge){at(te,Ge),at(Ne),at(fe,Ge),O=!1},d(Ge){Ge&&We(e),te&&te.d(Ge),o[34](null),Ne&&Ne.d(),fe&&fe.d(Ge),o[35](null),Y=!1,xr(ee)}}}const _0=([o,e])=>`${o}: ${e};`;function WA(o,e,n){const a=["use","class","stickyHeader","sortable","sort","sortDirection","sortAscendingAriaLabel","sortDescendingAriaLabel","container$use","container$class","table$use","table$class","layout","getElement"];let p=bi(e,a),_,c,h,{$$slots:I={},$$scope:L}=e;const z=ky(I),{closest:R}=vf,O=Qn(Jn());let{use:Y=[]}=e,{class:ee=""}=e,{stickyHeader:ue=!1}=e,{sortable:te=!1}=e,{sort:de=null}=e,{sortDirection:oe="ascending"}=e,{sortAscendingAriaLabel:be="sorted, ascending"}=e,{sortDescendingAriaLabel:qe="sorted, descending"}=e,{container$use:Ne=[]}=e,{container$class:De=""}=e,{table$use:fe=[]}=e,{table$class:ct=""}=e,st,Ge,Ue,Rt,He,Mt={},li={height:"auto",top:"initial"},Et=Or("SMUI:addLayoutListener"),Gt,Ye=!1,wt=eu(!1);jo(o,wt,At=>n(31,_=At));let Lt=eu(de);jo(o,Lt,At=>n(45,h=At));let ni=eu(oe);jo(o,ni,At=>n(44,c=At)),sr("SMUI:checkbox:context","data-table"),sr("SMUI:linear-progress:context","data-table"),sr("SMUI:linear-progress:closed",wt),sr("SMUI:data-table:sortable",te),sr("SMUI:data-table:sort",Lt),sr("SMUI:data-table:sortDirection",ni),sr("SMUI:data-table:sortAscendingAriaLabel",be),sr("SMUI:data-table:sortDescendingAriaLabel",qe),Et&&(Gt=Et(It));let Xt;Po(()=>(n(7,Ge=new qA({addClass:Ki,removeClass:ei,getHeaderCellElements:()=>{var At;return(At=Rt==null?void 0:Rt.cells.map(Ni=>Ni.element))!==null&&At!==void 0?At:[]},getHeaderCellCount:()=>{var At;return(At=Rt==null?void 0:Rt.cells.length)!==null&&At!==void 0?At:0},getAttributeByHeaderCellIndex:(At,Ni)=>{var jn;return(jn=Rt==null?void 0:Rt.orderedCells[At].getAttr(Ni))!==null&&jn!==void 0?jn:null},setAttributeByHeaderCellIndex:(At,Ni,jn)=>{Rt==null||Rt.orderedCells[At].addAttr(Ni,jn)},setClassNameByHeaderCellIndex:(At,Ni)=>{Rt==null||Rt.orderedCells[At].addClass(Ni)},removeClassNameByHeaderCellIndex:(At,Ni)=>{Rt==null||Rt.orderedCells[At].removeClass(Ni)},notifySortAction:At=>{n(23,de=At.columnId),n(24,oe=At.sortValue),Pn(St(),"SMUIDataTable:sorted",At,void 0,!0)},getTableContainerHeight:()=>Ue.getBoundingClientRect().height,getTableHeaderHeight:()=>{const At=St().querySelector(".mdc-data-table__header-row");if(!At)throw new Error("MDCDataTable: Table header element not found.");return At.getBoundingClientRect().height},setProgressIndicatorStyles:At=>{n(13,li=At)},addClassAtRowIndex:(At,Ni)=>{He==null||He.orderedRows[At].addClass(Ni)},getRowCount:()=>{var At;return(At=He==null?void 0:He.rows.length)!==null&&At!==void 0?At:0},getRowElements:()=>{var At;return(At=He==null?void 0:He.rows.map(Ni=>Ni.element))!==null&&At!==void 0?At:[]},getRowIdAtIndex:At=>{var Ni;return(Ni=He==null?void 0:He.orderedRows[At].rowId)!==null&&Ni!==void 0?Ni:null},getRowIndexByChildElement:At=>{var Ni;return(Ni=He==null?void 0:He.orderedRows.map(jn=>jn.element).indexOf(R(At,".mdc-data-table__row")))!==null&&Ni!==void 0?Ni:-1},getSelectedRowCount:()=>{var At;return(At=He==null?void 0:He.rows.filter(Ni=>Ni.selected).length)!==null&&At!==void 0?At:0},isCheckboxAtRowIndexChecked:At=>{const Ni=He==null?void 0:He.orderedRows[At].checkbox;return Ni?Ni.checked:!1},isHeaderRowCheckboxChecked:()=>{const At=Rt==null?void 0:Rt.checkbox;return At?At.checked:!1},isRowsSelectable:()=>!!St().querySelector(".mdc-data-table__row-checkbox")||!!St().querySelector(".mdc-data-table__header-row-checkbox"),notifyRowSelectionChanged:At=>{const Ni=He==null?void 0:He.orderedRows[At.rowIndex];Ni&&Pn(St(),"SMUIDataTable:rowSelectionChanged",{row:Ni.element,rowId:Ni.rowId,rowIndex:At.rowIndex,selected:At.selected},void 0,!0)},notifySelectedAll:()=>{Jt(!1),Pn(St(),"SMUIDataTable:selectedAll",void 0,void 0,!0)},notifyUnselectedAll:()=>{Jt(!1),Pn(St(),"SMUIDataTable:unselectedAll",void 0,void 0,!0)},notifyRowClick:At=>{Pn(St(),"SMUIDataTable:rowClick",At,void 0,!0)},registerHeaderRowCheckbox:()=>{},registerRowCheckboxes:()=>{},removeClassAtRowIndex:(At,Ni)=>{He==null||He.orderedRows[At].removeClass(Ni)},setAttributeAtRowIndex:(At,Ni,jn)=>{He==null||He.orderedRows[At].addAttr(Ni,jn)},setHeaderRowCheckboxChecked:At=>{const Ni=Rt==null?void 0:Rt.checkbox;Ni&&(Ni.checked=At)},setHeaderRowCheckboxIndeterminate:Jt,setRowCheckboxCheckedAtIndex:(At,Ni)=>{const jn=He==null?void 0:He.orderedRows[At].checkbox;jn&&(jn.checked=Ni)},setSortStatusLabelByHeaderCellIndex:(At,Ni)=>{}})),Ge.init(),Ge.layout(),n(14,Ye=!0),()=>{Ge.destroy()})),eh(()=>{Gt&&Gt()});function Ki(At){Mt[At]||n(12,Mt[At]=!0,Mt)}function ei(At){(!(At in Mt)||Mt[At])&&n(12,Mt[At]=!1,Mt)}function Jt(At){const Ni=Rt==null?void 0:Rt.checkbox;Ni&&(Ni.indeterminate=At)}function xi(At){if(!Ge||!At.detail.target)return;const Ni=R(At.detail.target,".mdc-data-table__header-cell--with-sort");Ni&&dt(Ni)}function ai(At){if(!Ge||!At.detail.target)return;const Ni=R(At.detail.target,".mdc-data-table__row");Ni&&Ge&&Ge.handleRowClick({rowId:At.detail.rowId,row:Ni})}function dt(At){var Ni,jn;const rn=(Ni=Rt==null?void 0:Rt.orderedCells)!==null&&Ni!==void 0?Ni:[],$n=rn.map(zt=>zt.element).indexOf(At);if($n===-1)return;const Ln=(jn=rn[$n].columnId)!==null&&jn!==void 0?jn:null;Ge.handleSortAction({columnId:Ln,columnIndex:$n,headerCell:At})}function It(){return Ge.layout()}function St(){return st}function Yi(At){qi[At?"unshift":"push"](()=>{Ue=At,n(9,Ue)})}function Qt(At){qi[At?"unshift":"push"](()=>{st=At,n(8,st)})}const gt=()=>Ge&&Ye&&Ge.layout(),Oi=At=>n(10,Rt=At.detail),ln=()=>n(10,Rt=void 0),Cn=At=>n(11,He=At.detail),Zn=()=>n(11,He=void 0),Nr=()=>Ge&&Ge.handleHeaderRowCheckboxChange(),Kr=At=>Ge&&Ge.handleRowCheckboxChange(At);return o.$$set=At=>{e=Ct(Ct({},e),Yn(At)),n(22,p=bi(e,a)),"use"in At&&n(0,Y=At.use),"class"in At&&n(1,ee=At.class),"stickyHeader"in At&&n(2,ue=At.stickyHeader),"sortable"in At&&n(25,te=At.sortable),"sort"in At&&n(23,de=At.sort),"sortDirection"in At&&n(24,oe=At.sortDirection),"sortAscendingAriaLabel"in At&&n(26,be=At.sortAscendingAriaLabel),"sortDescendingAriaLabel"in At&&n(27,qe=At.sortDescendingAriaLabel),"container$use"in At&&n(3,Ne=At.container$use),"container$class"in At&&n(4,De=At.container$class),"table$use"in At&&n(5,fe=At.table$use),"table$class"in At&&n(6,ct=At.table$class),"$$scope"in At&&n(32,L=At.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&8388608&&Oh(Lt,h=de,h),o.$$.dirty[0]&16777216&&Oh(ni,c=oe,c),o.$$.dirty[0]&1073741952|o.$$.dirty[1]&1&&z.progress&&Ge&&Xt!==_&&(n(30,Xt=_),_?Ge.hideProgress():Ge.showProgress())},[Y,ee,ue,Ne,De,fe,ct,Ge,st,Ue,Rt,He,Mt,li,Ye,O,wt,Lt,ni,xi,ai,z,p,de,oe,te,be,qe,It,St,Xt,_,L,I,Yi,Qt,gt,Oi,ln,Cn,Zn,Nr,Kr]}class XA extends wn{constructor(e){super(),En(this,e,WA,ZA,bn,{use:0,class:1,stickyHeader:2,sortable:25,sort:23,sortDirection:24,sortAscendingAriaLabel:26,sortDescendingAriaLabel:27,container$use:3,container$class:4,table$use:5,table$class:6,layout:28,getElement:29},null,[-1,-1])}get layout(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}function KA(o){let e,n,a,p,_,c;const h=o[9].default,I=pn(h,o,o[8],null);let L=[{class:n=wi({[o[1]]:!0,"mdc-data-table__content":!0})},o[6]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("tbody"),I&&I.c(),this.h()},l(R){e=_i(R,"TBODY",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[10](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[3].call(null,e)),An(e,"SMUIDataTableRow:mount",o[4]),An(e,"SMUIDataTableRow:unmount",o[5])],_=!0)},p(R,[O]){I&&I.p&&(!p||O&256)&&fn(I,h,R,R[8],p?gn(h,R[8],O,null):mn(R[8]),null),hi(e,z=en(L,[(!p||O&2&&n!==(n=wi({[R[1]]:!0,"mdc-data-table__content":!0})))&&{class:n},O&64&&R[6]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[10](null),_=!1,xr(c)}}}function JA(o,e,n){const a=["use","class","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,z,R=[];const O=new WeakMap;sr("SMUI:data-table:row:header",!1),Po(()=>{const oe={get rows(){return R},get orderedRows(){return ue()}};return Pn(te(),"SMUIDataTableBody:mount",oe),()=>{Pn(te(),"SMUIDataTableBody:unmount",oe)}});function Y(oe){R.push(oe.detail),O.set(oe.detail.element,oe.detail),oe.stopPropagation()}function ee(oe){const be=R.indexOf(oe.detail);be!==-1&&(R.splice(be,1),R=R),O.delete(oe.detail.element),oe.stopPropagation()}function ue(){return[...te().querySelectorAll(".mdc-data-table__row")].map(oe=>O.get(oe)).filter(oe=>oe&&oe._smui_data_table_row_accessor)}function te(){return z}function de(oe){qi[oe?"unshift":"push"](()=>{z=oe,n(2,z)})}return o.$$set=oe=>{e=Ct(Ct({},e),Yn(oe)),n(6,p=bi(e,a)),"use"in oe&&n(0,I=oe.use),"class"in oe&&n(1,L=oe.class),"$$scope"in oe&&n(8,c=oe.$$scope)},[I,L,z,h,Y,ee,p,te,c,_,de]}class YA extends wn{constructor(e){super(),En(this,e,JA,KA,bn,{use:0,class:1,getElement:7})}get getElement(){return this.$$.ctx[7]}}function QA(o){let e,n,a,p,_,c,h;const I=o[14].default,L=pn(I,o,o[13],null);let z=[{class:n=wi(tr({[o[1]]:!0,"mdc-data-table__header-row":o[7],"mdc-data-table__row":!o[7],"mdc-data-table__row--selected":!o[7]&&o[3]&&o[3].checked},o[4]))},{"aria-selected":a=o[3]?o[3].checked?"true":"false":void 0},o[5],o[10]],R={};for(let O=0;O<z.length;O+=1)R=Ct(R,z[O]);return{c(){e=yi("tr"),L&&L.c(),this.h()},l(O){e=_i(O,"TR",{class:!0,"aria-selected":!0});var Y=pi(e);L&&L.l(Y),Y.forEach(We),this.h()},h(){hi(e,R)},m(O,Y){Dt(O,e,Y),L&&L.m(e,null),o[15](e),_=!0,c||(h=[Ei(p=qn.call(null,e,o[0])),Ei(o[6].call(null,e)),An(e,"click",o[16]),An(e,"SMUICheckbox:mount",o[17]),An(e,"SMUICheckbox:unmount",o[18])],c=!0)},p(O,[Y]){L&&L.p&&(!_||Y&8192)&&fn(L,I,O,O[13],_?gn(I,O[13],Y,null):mn(O[13]),null),hi(e,R=en(z,[(!_||Y&26&&n!==(n=wi(tr({[O[1]]:!0,"mdc-data-table__header-row":O[7],"mdc-data-table__row":!O[7],"mdc-data-table__row--selected":!O[7]&&O[3]&&O[3].checked},O[4]))))&&{class:n},(!_||Y&8&&a!==(a=O[3]?O[3].checked?"true":"false":void 0))&&{"aria-selected":a},Y&32&&O[5],Y&1024&&O[10]])),p&&zn(p.update)&&Y&1&&p.update.call(null,O[0])},i(O){_||(tt(L,O),_=!0)},o(O){at(L,O),_=!1},d(O){O&&We(e),L&&L.d(O),o[15](null),c=!1,xr(h)}}}let $A=0;function eC(o,e,n){const a=["use","class","rowId","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{rowId:z="SMUI-data-table-row-"+$A++}=e,R,O,Y={},ee={},ue=Or("SMUI:data-table:row:header");Po(()=>{const Ue=ue?{_smui_data_table_row_accessor:!1,get element(){return De()},get checkbox(){return O},get rowId(){},get selected(){var Rt;return(Rt=O&&O.checked)!==null&&Rt!==void 0?Rt:!1},addClass:te,removeClass:de,getAttr:oe,addAttr:be}:{_smui_data_table_row_accessor:!0,get element(){return De()},get checkbox(){return O},get rowId(){return z},get selected(){var Rt;return(Rt=O&&O.checked)!==null&&Rt!==void 0?Rt:!1},addClass:te,removeClass:de,getAttr:oe,addAttr:be};return Pn(De(),"SMUIDataTableRow:mount",Ue),()=>{Pn(De(),"SMUIDataTableRow:unmount",Ue)}});function te(Ue){Y[Ue]||n(4,Y[Ue]=!0,Y)}function de(Ue){(!(Ue in Y)||Y[Ue])&&n(4,Y[Ue]=!1,Y)}function oe(Ue){var Rt;return Ue in ee?(Rt=ee[Ue])!==null&&Rt!==void 0?Rt:null:De().getAttribute(Ue)}function be(Ue,Rt){ee[Ue]!==Rt&&n(5,ee[Ue]=Rt,ee)}function qe(Ue){Pn(De(),"SMUIDataTableHeader:click",Ue)}function Ne(Ue){Pn(De(),"SMUIDataTableRow:click",{rowId:z,target:Ue.target})}function De(){return R}function fe(Ue){qi[Ue?"unshift":"push"](()=>{R=Ue,n(2,R)})}const ct=Ue=>ue?qe(Ue):Ne(Ue),st=Ue=>n(3,O=Ue.detail),Ge=()=>n(3,O=void 0);return o.$$set=Ue=>{e=Ct(Ct({},e),Yn(Ue)),n(10,p=bi(e,a)),"use"in Ue&&n(0,I=Ue.use),"class"in Ue&&n(1,L=Ue.class),"rowId"in Ue&&n(11,z=Ue.rowId),"$$scope"in Ue&&n(13,c=Ue.$$scope)},[I,L,R,O,Y,ee,h,ue,qe,Ne,p,z,De,c,_,fe,ct,st,Ge]}class tC extends wn{constructor(e){super(),En(this,e,eC,QA,bn,{use:0,class:1,rowId:11,getElement:12})}get getElement(){return this.$$.ctx[12]}}function iC(o){let e,n,a,p,_,c;const h=o[22].default,I=pn(h,o,o[21],null);let L=[{class:n=wi(tr({[o[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":o[2],"mdc-data-table__cell--checkbox":o[3]},o[7]))},o[8],o[19]],z={};for(let R=0;R<L.length;R+=1)z=Ct(z,L[R]);return{c(){e=yi("td"),I&&I.c(),this.h()},l(R){e=_i(R,"TD",{class:!0});var O=pi(e);I&&I.l(O),O.forEach(We),this.h()},h(){hi(e,z)},m(R,O){Dt(R,e,O),I&&I.m(e,null),o[25](e),p=!0,_||(c=[Ei(a=qn.call(null,e,o[0])),Ei(o[11].call(null,e)),An(e,"change",o[26])],_=!0)},p(R,O){I&&I.p&&(!p||O&2097152)&&fn(I,h,R,R[21],p?gn(h,R[21],O,null):mn(R[21]),null),hi(e,z=en(L,[(!p||O&142&&n!==(n=wi(tr({[R[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":R[2],"mdc-data-table__cell--checkbox":R[3]},R[7]))))&&{class:n},O&256&&R[8],O&524288&&R[19]])),a&&zn(a.update)&&O&1&&a.update.call(null,R[0])},i(R){p||(tt(I,R),p=!0)},o(R){at(I,R),p=!1},d(R){R&&We(e),I&&I.d(R),o[25](null),_=!1,xr(c)}}}function nC(o){let e,n,a,p,_,c,h,I,L;const z=[oC,rC],R=[];function O(ue,te){return ue[5]?0:1}n=O(o),a=R[n]=z[n](o);let Y=[{class:p=wi(tr({[o[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":o[2],"mdc-data-table__header-cell--checkbox":o[3],"mdc-data-table__header-cell--with-sort":o[5],"mdc-data-table__header-cell--sorted":o[5]&&o[9]===o[4]},o[7]))},{role:"columnheader"},{scope:"col"},{"data-column-id":o[4]},{"aria-sort":_=o[5]?o[9]===o[4]?o[10]:"none":void 0},o[8],o[19]],ee={};for(let ue=0;ue<Y.length;ue+=1)ee=Ct(ee,Y[ue]);return{c(){e=yi("th"),a.c(),this.h()},l(ue){e=_i(ue,"TH",{class:!0,role:!0,scope:!0,"data-column-id":!0,"aria-sort":!0});var te=pi(e);a.l(te),te.forEach(We),this.h()},h(){hi(e,ee)},m(ue,te){Dt(ue,e,te),R[n].m(e,null),o[23](e),h=!0,I||(L=[Ei(c=qn.call(null,e,o[0])),Ei(o[11].call(null,e)),An(e,"change",o[24])],I=!0)},p(ue,te){let de=n;n=O(ue),n===de?R[n].p(ue,te):(Cr(),at(R[de],1,1,()=>{R[de]=null}),Ar(),a=R[n],a?a.p(ue,te):(a=R[n]=z[n](ue),a.c()),tt(a,1),a.m(e,null)),hi(e,ee=en(Y,[(!h||te&702&&p!==(p=wi(tr({[ue[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":ue[2],"mdc-data-table__header-cell--checkbox":ue[3],"mdc-data-table__header-cell--with-sort":ue[5],"mdc-data-table__header-cell--sorted":ue[5]&&ue[9]===ue[4]},ue[7]))))&&{class:p},{role:"columnheader"},{scope:"col"},(!h||te&16)&&{"data-column-id":ue[4]},(!h||te&1584&&_!==(_=ue[5]?ue[9]===ue[4]?ue[10]:"none":void 0))&&{"aria-sort":_},te&256&&ue[8],te&524288&&ue[19]])),c&&zn(c.update)&&te&1&&c.update.call(null,ue[0])},i(ue){h||(tt(a),h=!0)},o(ue){at(a),h=!1},d(ue){ue&&We(e),R[n].d(),o[23](null),I=!1,xr(L)}}}function rC(o){let e;const n=o[22].default,a=pn(n,o,o[21],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&2097152)&&fn(a,n,p,p[21],e?gn(n,p[21],_,null):mn(p[21]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function oC(o){let e,n,a,p=(o[9]===o[4]?o[10]==="ascending"?o[15]:o[16]:"")+"",_,c,h;const I=o[22].default,L=pn(I,o,o[21],null);return{c(){e=yi("div"),L&&L.c(),n=Bn(),a=yi("div"),_=Io(p),this.h()},l(z){e=_i(z,"DIV",{class:!0});var R=pi(e);L&&L.l(R),n=Fn(R),a=_i(R,"DIV",{class:!0,"aria-hidden":!0,id:!0});var O=pi(a);_=So(O,p),O.forEach(We),R.forEach(We),this.h()},h(){ii(a,"class","mdc-data-table__sort-status-label"),ii(a,"aria-hidden","true"),ii(a,"id",c=o[4]+"-status-label"),ii(e,"class","mdc-data-table__header-cell-wrapper")},m(z,R){Dt(z,e,R),L&&L.m(e,null),sn(e,n),sn(e,a),sn(a,_),h=!0},p(z,R){L&&L.p&&(!h||R&2097152)&&fn(L,I,z,z[21],h?gn(I,z[21],R,null):mn(z[21]),null),(!h||R&1552)&&p!==(p=(z[9]===z[4]?z[10]==="ascending"?z[15]:z[16]:"")+"")&&Fs(_,p),(!h||R&16&&c!==(c=z[4]+"-status-label"))&&ii(a,"id",c)},i(z){h||(tt(L,z),h=!0)},o(z){at(L,z),h=!1},d(z){z&&We(e),L&&L.d(z)}}}function aC(o){let e,n,a,p;const _=[nC,iC],c=[];function h(I,L){return I[12]?0:1}return e=h(o),n=c[e]=_[e](o),{c(){n.c(),a=cn()},l(I){n.l(I),a=cn()},m(I,L){c[e].m(I,L),Dt(I,a,L),p=!0},p(I,[L]){n.p(I,L)},i(I){p||(tt(n),p=!0)},o(I){at(n),p=!1},d(I){c[e].d(I),I&&We(a)}}}let sC=0;function lC(o,e,n){const a=["use","class","numeric","checkbox","columnId","sortable","getElement"];let p=bi(e,a),_,c,{$$slots:h={},$$scope:I}=e;const L=Qn(Jn());let z=Or("SMUI:data-table:row:header"),{use:R=[]}=e,{class:O=""}=e,{numeric:Y=!1}=e,{checkbox:ee=!1}=e,{columnId:ue=z?"SMUI-data-table-column-"+sC++:"SMUI-data-table-unused"}=e,{sortable:te=Or("SMUI:data-table:sortable")}=e,de,oe={},be={},qe=Or("SMUI:data-table:sort");jo(o,qe,wt=>n(9,_=wt));let Ne=Or("SMUI:data-table:sortDirection");jo(o,Ne,wt=>n(10,c=wt));let De=Or("SMUI:data-table:sortAscendingAriaLabel"),fe=Or("SMUI:data-table:sortDescendingAriaLabel");te&&(sr("SMUI:label:context","data-table:sortable-header-cell"),sr("SMUI:icon-button:context","data-table:sortable-header-cell"),sr("SMUI:icon-button:aria-describedby",ue+"-status-label")),Po(()=>{const wt=z?{_smui_data_table_header_cell_accessor:!0,get element(){return Mt()},get columnId(){return ue},addClass:ct,removeClass:st,getAttr:Ge,addAttr:Ue}:{_smui_data_table_header_cell_accessor:!1,get element(){return Mt()},get columnId(){},addClass:ct,removeClass:st,getAttr:Ge,addAttr:Ue};return Pn(Mt(),"SMUIDataTableCell:mount",wt),()=>{Pn(Mt(),"SMUIDataTableCell:unmount",wt)}});function ct(wt){oe[wt]||n(7,oe[wt]=!0,oe)}function st(wt){(!(wt in oe)||oe[wt])&&n(7,oe[wt]=!1,oe)}function Ge(wt){var Lt;return wt in be?(Lt=be[wt])!==null&&Lt!==void 0?Lt:null:Mt().getAttribute(wt)}function Ue(wt,Lt){be[wt]!==Lt&&n(8,be[wt]=Lt,be)}function Rt(wt){Pn(Mt(),"SMUIDataTableHeaderCheckbox:change",wt)}function He(wt){Pn(Mt(),"SMUIDataTableBodyCheckbox:change",wt)}function Mt(){return de}function li(wt){qi[wt?"unshift":"push"](()=>{de=wt,n(6,de)})}const Et=wt=>ee&&Rt(wt);function Gt(wt){qi[wt?"unshift":"push"](()=>{de=wt,n(6,de)})}const Ye=wt=>ee&&He(wt);return o.$$set=wt=>{e=Ct(Ct({},e),Yn(wt)),n(19,p=bi(e,a)),"use"in wt&&n(0,R=wt.use),"class"in wt&&n(1,O=wt.class),"numeric"in wt&&n(2,Y=wt.numeric),"checkbox"in wt&&n(3,ee=wt.checkbox),"columnId"in wt&&n(4,ue=wt.columnId),"sortable"in wt&&n(5,te=wt.sortable),"$$scope"in wt&&n(21,I=wt.$$scope)},[R,O,Y,ee,ue,te,de,oe,be,_,c,L,z,qe,Ne,De,fe,Rt,He,p,Mt,I,h,li,Et,Gt,Ye]}class uC extends wn{constructor(e){super(),En(this,e,lC,aC,bn,{use:0,class:1,numeric:2,checkbox:3,columnId:4,sortable:5,getElement:20})}get getElement(){return this.$$.ctx[20]}}const cC=YA,hC=tC,v0=uC,dm=parseFloat;function Am(o,e=";"){let n;if(Array.isArray(o))n=o.filter(a=>a);else{n=[];for(const a in o)o[a]&&n.push(`${a}:${o[a]}`)}return n.join(e)}function dC(o,e,n,a){let p,_;const c="1em";let h,I,L,z="-.125em";const R="visible";return a&&(L="center",_="1.25em"),n&&(p=n),e&&(e=="lg"?(I="1.33333em",h=".75em",z="-.225em"):e=="xs"?I=".75em":e=="sm"?I=".875em":I=e.replace("x","em")),Am([Am({float:p,width:_,height:c,"line-height":h,"font-size":I,"text-align":L,"vertical-align":z,"transform-origin":"center",overflow:R}),o])}function pC(o,e,n,a,p,_=1,c="",h=""){let I=1,L=1;return p&&(p=="horizontal"?I=-1:p=="vertical"?L=-1:I=L=-1),Am([`translate(${dm(e)*_}${c},${dm(n)*_}${c})`,`scale(${I*dm(o)},${L*dm(o)})`,a&&`rotate(${a}${h})`]," ")}function b0(o){let e,n,a,p,_,c,h;function I(R,O){return typeof R[7][4]=="string"?mC:fC}let L=I(o),z=L(o);return{c(){e=Ql("svg"),n=Ql("g"),a=Ql("g"),z.c(),this.h()},l(R){e=$l(R,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var O=pi(e);n=$l(O,"g",{transform:!0,"transform-origin":!0});var Y=pi(n);a=$l(Y,"g",{transform:!0});var ee=pi(a);z.l(ee),ee.forEach(We),Y.forEach(We),O.forEach(We),this.h()},h(){ii(a,"transform",o[10]),ii(n,"transform",p=`translate(${o[7][0]/2} ${o[7][1]/2})`),ii(n,"transform-origin",_=`${o[7][0]/4} 0`),ii(e,"id",o[0]),ii(e,"class",c=Z_(o[8])+" svelte-1cj2gr0"),ii(e,"style",o[9]),ii(e,"viewBox",h=`0 0 ${o[7][0]} ${o[7][1]}`),ii(e,"aria-hidden","true"),ii(e,"role","img"),ii(e,"xmlns","http://www.w3.org/2000/svg")},m(R,O){Dt(R,e,O),sn(e,n),sn(n,a),z.m(a,null)},p(R,O){L===(L=I(R))&&z?z.p(R,O):(z.d(1),z=L(R),z&&(z.c(),z.m(a,null))),O&1024&&ii(a,"transform",R[10]),O&128&&p!==(p=`translate(${R[7][0]/2} ${R[7][1]/2})`)&&ii(n,"transform",p),O&128&&_!==(_=`${R[7][0]/4} 0`)&&ii(n,"transform-origin",_),O&1&&ii(e,"id",R[0]),O&256&&c!==(c=Z_(R[8])+" svelte-1cj2gr0")&&ii(e,"class",c),O&512&&ii(e,"style",R[9]),O&128&&h!==(h=`0 0 ${R[7][0]} ${R[7][1]}`)&&ii(e,"viewBox",h)},d(R){R&&We(e),z.d()}}}function fC(o){let e,n,a,p,_,c,h,I,L,z;return{c(){e=Ql("path"),c=Ql("path"),this.h()},l(R){e=$l(R,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),pi(e).forEach(We),c=$l(R,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),pi(c).forEach(We),this.h()},h(){ii(e,"d",n=o[7][4][0]),ii(e,"fill",a=o[3]||o[1]||"currentColor"),ii(e,"fill-opacity",p=o[6]!=!1?o[4]:o[5]),ii(e,"transform",_=`translate(${o[7][0]/-2} ${o[7][1]/-2})`),ii(c,"d",h=o[7][4][1]),ii(c,"fill",I=o[2]||o[1]||"currentColor"),ii(c,"fill-opacity",L=o[6]!=!1?o[5]:o[4]),ii(c,"transform",z=`translate(${o[7][0]/-2} ${o[7][1]/-2})`)},m(R,O){Dt(R,e,O),Dt(R,c,O)},p(R,O){O&128&&n!==(n=R[7][4][0])&&ii(e,"d",n),O&10&&a!==(a=R[3]||R[1]||"currentColor")&&ii(e,"fill",a),O&112&&p!==(p=R[6]!=!1?R[4]:R[5])&&ii(e,"fill-opacity",p),O&128&&_!==(_=`translate(${R[7][0]/-2} ${R[7][1]/-2})`)&&ii(e,"transform",_),O&128&&h!==(h=R[7][4][1])&&ii(c,"d",h),O&6&&I!==(I=R[2]||R[1]||"currentColor")&&ii(c,"fill",I),O&112&&L!==(L=R[6]!=!1?R[5]:R[4])&&ii(c,"fill-opacity",L),O&128&&z!==(z=`translate(${R[7][0]/-2} ${R[7][1]/-2})`)&&ii(c,"transform",z)},d(R){R&&We(e),R&&We(c)}}}function mC(o){let e,n,a,p;return{c(){e=Ql("path"),this.h()},l(_){e=$l(_,"path",{d:!0,fill:!0,transform:!0}),pi(e).forEach(We),this.h()},h(){ii(e,"d",n=o[7][4]),ii(e,"fill",a=o[1]||o[2]||"currentColor"),ii(e,"transform",p=`translate(${o[7][0]/-2} ${o[7][1]/-2})`)},m(_,c){Dt(_,e,c)},p(_,c){c&128&&n!==(n=_[7][4])&&ii(e,"d",n),c&6&&a!==(a=_[1]||_[2]||"currentColor")&&ii(e,"fill",a),c&128&&p!==(p=`translate(${_[7][0]/-2} ${_[7][1]/-2})`)&&ii(e,"transform",p)},d(_){_&&We(e)}}}function gC(o){let e,n=o[7][4]&&b0(o);return{c(){n&&n.c(),e=cn()},l(a){n&&n.l(a),e=cn()},m(a,p){n&&n.m(a,p),Dt(a,e,p)},p(a,[p]){a[7][4]?n?n.p(a,p):(n=b0(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Vo,o:Vo,d(a){n&&n.d(a),a&&We(e)}}}function yC(o,e,n){let{class:a=""}=e,{id:p=""}=e,{style:_=""}=e,{icon:c}=e,{size:h=""}=e,{color:I=""}=e,{fw:L=!1}=e,{pull:z=""}=e,{scale:R=1}=e,{translateX:O=0}=e,{translateY:Y=0}=e,{rotate:ee=""}=e,{flip:ue=!1}=e,{spin:te=!1}=e,{pulse:de=!1}=e,{primaryColor:oe=""}=e,{secondaryColor:be=""}=e,{primaryOpacity:qe=1}=e,{secondaryOpacity:Ne=.4}=e,{swapOpacity:De=!1}=e,fe,ct,st,Ge;return o.$$set=Ue=>{"class"in Ue&&n(11,a=Ue.class),"id"in Ue&&n(0,p=Ue.id),"style"in Ue&&n(12,_=Ue.style),"icon"in Ue&&n(13,c=Ue.icon),"size"in Ue&&n(14,h=Ue.size),"color"in Ue&&n(1,I=Ue.color),"fw"in Ue&&n(15,L=Ue.fw),"pull"in Ue&&n(16,z=Ue.pull),"scale"in Ue&&n(17,R=Ue.scale),"translateX"in Ue&&n(18,O=Ue.translateX),"translateY"in Ue&&n(19,Y=Ue.translateY),"rotate"in Ue&&n(20,ee=Ue.rotate),"flip"in Ue&&n(21,ue=Ue.flip),"spin"in Ue&&n(22,te=Ue.spin),"pulse"in Ue&&n(23,de=Ue.pulse),"primaryColor"in Ue&&n(2,oe=Ue.primaryColor),"secondaryColor"in Ue&&n(3,be=Ue.secondaryColor),"primaryOpacity"in Ue&&n(4,qe=Ue.primaryOpacity),"secondaryOpacity"in Ue&&n(5,Ne=Ue.secondaryOpacity),"swapOpacity"in Ue&&n(6,De=Ue.swapOpacity)},o.$$.update=()=>{o.$$.dirty&8192&&n(7,fe=c&&c.icon||[0,0,"",[],""]),o.$$.dirty&12584960&&n(8,ct=Am([a,"svelte-fa",te&&"spin",de&&"pulse"]," ")),o.$$.dirty&118784&&n(9,st=dC(_,h,z,L)),o.$$.dirty&4063232&&n(10,Ge=pC(R,O,Y,ee,ue,512))},[p,I,oe,be,qe,Ne,De,fe,ct,st,Ge,a,_,c,h,L,z,R,O,Y,ee,ue,te,de]}class _C extends wn{constructor(e){super(),En(this,e,yC,gC,bn,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}var Yl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function lz(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function vC(o){if(o.__esModule)return o;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(o).forEach(function(n){var a=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return o[n]}})}),e}var R1={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var e="fas",n="circle-info",a=512,p=512,_=["info-circle"],c="f05a",h="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 128c17.67 0 32 14.33 32 32c0 17.67-14.33 32-32 32S224 177.7 224 160C224 142.3 238.3 128 256 128zM296 384h-80C202.8 384 192 373.3 192 360s10.75-24 24-24h16v-64H224c-13.25 0-24-10.75-24-24S210.8 224 224 224h32c13.25 0 24 10.75 24 24v88h16c13.25 0 24 10.75 24 24S309.3 384 296 384z";o.definition={prefix:e,iconName:n,icon:[a,p,_,c,h]},o.faCircleInfo=o.definition,o.prefix=e,o.iconName=n,o.width=a,o.height=p,o.ligatures=_,o.unicode=c,o.svgPathData=h,o.aliases=_})(R1);function x0(o,e,n){const a=o.slice();return a[3]=e[n],a}function w0(o,e,n){const a=o.slice();return a[6]=e[n],a}function E0(o){let e,n,a,p;const _=[xC,bC],c=[];function h(I,L){var z;return((z=I[1])==null?void 0:z.length)>0?0:1}return n=h(o),a=c[n]=_[n](o),{c(){e=yi("div"),a.c(),this.h()},l(I){e=_i(I,"DIV",{class:!0});var L=pi(e);a.l(L),L.forEach(We),this.h()},h(){ii(e,"class","accordion-container")},m(I,L){Dt(I,e,L),c[n].m(e,null),p=!0},p(I,L){let z=n;n=h(I),n===z?c[n].p(I,L):(Cr(),at(c[z],1,1,()=>{c[z]=null}),Ar(),a=c[n],a?a.p(I,L):(a=c[n]=_[n](I),a.c()),tt(a,1),a.m(e,null))},i(I){p||(tt(a),p=!0)},o(I){at(a),p=!1},d(I){I&&We(e),c[n].d()}}}function bC(o){let e,n,a,p,_,c,h,I;return p=new _C({props:{icon:R1.faCircleInfo,size:"lg",primaryColor:"dodgerblue"}}),{c(){e=yi("ul"),n=yi("li"),a=yi("div"),Li(p.$$.fragment),_=Bn(),c=yi("div"),h=Io("No features identified on the map."),this.h()},l(L){e=_i(L,"UL",{class:!0});var z=pi(e);n=_i(z,"LI",{class:!0});var R=pi(n);a=_i(R,"DIV",{class:!0});var O=pi(a);Wi(p.$$.fragment,O),O.forEach(We),_=Fn(R),c=_i(R,"DIV",{class:!0});var Y=pi(c);h=So(Y,"No features identified on the map."),Y.forEach(We),R.forEach(We),z.forEach(We),this.h()},h(){ii(a,"class","icon"),ii(c,"class","text svelte-1bkk48e"),ii(n,"class","message svelte-1bkk48e"),ii(e,"class","no-data-layers svelte-1bkk48e")},m(L,z){Dt(L,e,z),sn(e,n),sn(n,a),zi(p,a,null),sn(n,_),sn(n,c),sn(c,h),I=!0},p:Vo,i(L){I||(tt(p.$$.fragment,L),I=!0)},o(L){at(p.$$.fragment,L),I=!1},d(L){L&&We(e),Di(p)}}}function xC(o){let e,n;return e=new TA({props:{$$slots:{default:[PC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&514&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function wC(o){let e=o[3].layer.id+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p(a,p){p&2&&e!==(e=a[3].layer.id+"")&&Fs(n,e)},d(a){a&&We(n)}}}function EC(o){let e,n=o[3].source+"",a;return{c(){e=yi("span"),a=Io(n),this.h()},l(p){e=_i(p,"SPAN",{slot:!0});var _=pi(e);a=So(_,n),_.forEach(We),this.h()},h(){ii(e,"slot","description")},m(p,_){Dt(p,e,_),sn(e,a)},p(p,_){_&2&&n!==(n=p[3].source+"")&&Fs(a,n)},d(p){p&&We(e)}}}function IC(o){let e=o[6]+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p(a,p){p&2&&e!==(e=a[6]+"")&&Fs(n,e)},d(a){a&&We(n)}}}function SC(o){let e=o[3].properties[o[6]]+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p(a,p){p&2&&e!==(e=a[3].properties[a[6]]+"")&&Fs(n,e)},d(a){a&&We(n)}}}function TC(o){let e,n,a,p,_;return e=new v0({props:{$$slots:{default:[IC]},$$scope:{ctx:o}}}),a=new v0({props:{$$slots:{default:[SC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment),p=Bn()},l(c){Wi(e.$$.fragment,c),n=Fn(c),Wi(a.$$.fragment,c),p=Fn(c)},m(c,h){zi(e,c,h),Dt(c,n,h),zi(a,c,h),Dt(c,p,h),_=!0},p(c,h){const I={};h&514&&(I.$$scope={dirty:h,ctx:c}),e.$set(I);const L={};h&514&&(L.$$scope={dirty:h,ctx:c}),a.$set(L)},i(c){_||(tt(e.$$.fragment,c),tt(a.$$.fragment,c),_=!0)},o(c){at(e.$$.fragment,c),at(a.$$.fragment,c),_=!1},d(c){Di(e,c),c&&We(n),Di(a,c),c&&We(p)}}}function I0(o){let e,n;return e=new hC({props:{$$slots:{default:[TC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&514&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function AC(o){let e,n,a=Object.keys(o[3].properties),p=[];for(let c=0;c<a.length;c+=1)p[c]=I0(w0(o,a,c));const _=c=>at(p[c],1,1,()=>{p[c]=null});return{c(){for(let c=0;c<p.length;c+=1)p[c].c();e=cn()},l(c){for(let h=0;h<p.length;h+=1)p[h].l(c);e=cn()},m(c,h){for(let I=0;I<p.length;I+=1)p[I].m(c,h);Dt(c,e,h),n=!0},p(c,h){if(h&2){a=Object.keys(c[3].properties);let I;for(I=0;I<a.length;I+=1){const L=w0(c,a,I);p[I]?(p[I].p(L,h),tt(p[I],1)):(p[I]=I0(L),p[I].c(),tt(p[I],1),p[I].m(e.parentNode,e))}for(Cr(),I=a.length;I<p.length;I+=1)_(I);Ar()}},i(c){if(!n){for(let h=0;h<a.length;h+=1)tt(p[h]);n=!0}},o(c){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)at(p[h]);n=!1},d(c){_f(p,c),c&&We(e)}}}function CC(o){let e,n;return e=new cC({props:{$$slots:{default:[AC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&514&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function kC(o){let e,n;return e=new XA({props:{"table$aria-label":o[3].layer.id,style:"width: 100%;",$$slots:{default:[CC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&2&&(_["table$aria-label"]=a[3].layer.id),p&514&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function MC(o){let e,n,a,p,_;return e=new VA({props:{$$slots:{description:[EC],default:[wC]},$$scope:{ctx:o}}}),a=new MA({props:{$$slots:{default:[kC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment),p=Bn()},l(c){Wi(e.$$.fragment,c),n=Fn(c),Wi(a.$$.fragment,c),p=Fn(c)},m(c,h){zi(e,c,h),Dt(c,n,h),zi(a,c,h),Dt(c,p,h),_=!0},p(c,h){const I={};h&514&&(I.$$scope={dirty:h,ctx:c}),e.$set(I);const L={};h&514&&(L.$$scope={dirty:h,ctx:c}),a.$set(L)},i(c){_||(tt(e.$$.fragment,c),tt(a.$$.fragment,c),_=!0)},o(c){at(e.$$.fragment,c),at(a.$$.fragment,c),_=!1},d(c){Di(e,c),c&&We(n),Di(a,c),c&&We(p)}}}function S0(o){let e,n;return e=new NA({props:{$$slots:{default:[MC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&514&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function PC(o){let e,n,a=o[1],p=[];for(let c=0;c<a.length;c+=1)p[c]=S0(x0(o,a,c));const _=c=>at(p[c],1,1,()=>{p[c]=null});return{c(){for(let c=0;c<p.length;c+=1)p[c].c();e=cn()},l(c){for(let h=0;h<p.length;h+=1)p[h].l(c);e=cn()},m(c,h){for(let I=0;I<p.length;I+=1)p[I].m(c,h);Dt(c,e,h),n=!0},p(c,h){if(h&2){a=c[1];let I;for(I=0;I<a.length;I+=1){const L=x0(c,a,I);p[I]?(p[I].p(L,h),tt(p[I],1)):(p[I]=S0(L),p[I].c(),tt(p[I],1),p[I].m(e.parentNode,e))}for(Cr(),I=a.length;I<p.length;I+=1)_(I);Ar()}},i(c){if(!n){for(let h=0;h<a.length;h+=1)tt(p[h]);n=!0}},o(c){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)at(p[h]);n=!1},d(c){_f(p,c),c&&We(e)}}}function LC(o){let e,n,a=o[0]&&E0(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,[_]){p[0]?a?(a.p(p,_),_&1&&tt(a,1)):(a=E0(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function zC(o,e,n){let a,p;jo(o,Dy,c=>n(2,p=c));let{isAttributesTabVisible:_=!1}=e;return o.$$set=c=>{"isAttributesTabVisible"in c&&n(0,_=c.isAttributesTabVisible)},o.$$.update=()=>{o.$$.dirty&4&&n(1,a=p)},[_,a,p]}class DC extends wn{constructor(e){super(),En(this,e,zC,LC,bn,{isAttributesTabVisible:0})}}function RC(o){let e;return{c(){e=Io(o[7])},l(n){e=So(n,o[7])},m(n,a){Dt(n,e,a)},p(n,a){a&128&&Fs(e,n[7])},i:Vo,o:Vo,d(n){n&&We(e)}}}function OC(o){let e;const n=o[12].default,a=pn(n,o,o[11],null);return{c(){a&&a.c()},l(p){a&&a.l(p)},m(p,_){a&&a.m(p,_),e=!0},p(p,_){a&&a.p&&(!e||_&2048)&&fn(a,n,p,p[11],e?gn(n,p[11],_,null):mn(p[11]),null)},i(p){e||(tt(a,p),e=!0)},o(p){at(a,p),e=!1},d(p){a&&a.d(p)}}}function BC(o){let e,n,a,p,_,c,h,I,L,z;const R=[OC,RC],O=[];function Y(te,de){return te[7]==null?0:1}n=Y(o),a=O[n]=R[n](o);let ee=[{class:p=wi({[o[1]]:!0,"mdc-select__icon":!0})},{tabindex:o[3]},{"aria-hidden":_=o[3]===-1?"true":"false"},{"aria-disabled":c=o[2]==="button"?o[4]?"true":"false":void 0},{role:o[2]},o[6],o[9]],ue={};for(let te=0;te<ee.length;te+=1)ue=Ct(ue,ee[te]);return{c(){e=yi("i"),a.c(),this.h()},l(te){e=_i(te,"I",{class:!0,tabindex:!0,"aria-hidden":!0,"aria-disabled":!0,role:!0});var de=pi(e);a.l(de),de.forEach(We),this.h()},h(){hi(e,ue)},m(te,de){Dt(te,e,de),O[n].m(e,null),o[13](e),I=!0,L||(z=[Ei(h=qn.call(null,e,o[0])),Ei(o[8].call(null,e))],L=!0)},p(te,[de]){let oe=n;n=Y(te),n===oe?O[n].p(te,de):(Cr(),at(O[oe],1,1,()=>{O[oe]=null}),Ar(),a=O[n],a?a.p(te,de):(a=O[n]=R[n](te),a.c()),tt(a,1),a.m(e,null)),hi(e,ue=en(ee,[(!I||de&2&&p!==(p=wi({[te[1]]:!0,"mdc-select__icon":!0})))&&{class:p},(!I||de&8)&&{tabindex:te[3]},(!I||de&8&&_!==(_=te[3]===-1?"true":"false"))&&{"aria-hidden":_},(!I||de&20&&c!==(c=te[2]==="button"?te[4]?"true":"false":void 0))&&{"aria-disabled":c},(!I||de&4)&&{role:te[2]},de&64&&te[6],de&512&&te[9]])),h&&zn(h.update)&&de&1&&h.update.call(null,te[0])},i(te){I||(tt(a),I=!0)},o(te){at(a),I=!1},d(te){te&&We(e),O[n].d(),o[13](null),L=!1,xr(z)}}}function FC(o,e,n){const a=["use","class","role","tabindex","disabled","getElement"];let p=bi(e,a),{$$slots:_={},$$scope:c}=e;const h=Qn(Jn());let{use:I=[]}=e,{class:L=""}=e,{role:z=void 0}=e,{tabindex:R=z==="button"?0:-1}=e,{disabled:O=!1}=e,Y,ee,ue={},te;Po(()=>(ee=new lT({getAttr:de,setAttr:oe,removeAttr:be,setContent:De=>{n(7,te=De)},registerInteractionHandler:(De,fe)=>qe().addEventListener(De,fe),deregisterInteractionHandler:(De,fe)=>qe().removeEventListener(De,fe),notifyIconAction:()=>Pn(qe(),"SMUISelect:icon",void 0,void 0,!0)}),Pn(qe(),"SMUISelectLeadingIcon:mount",ee),ee.init(),()=>{Pn(qe(),"SMUISelectLeadingIcon:unmount",ee),ee.destroy()}));function de(De){var fe;return De in ue?(fe=ue[De])!==null&&fe!==void 0?fe:null:qe().getAttribute(De)}function oe(De,fe){ue[De]!==fe&&n(6,ue[De]=fe,ue)}function be(De){(!(De in ue)||ue[De]!=null)&&n(6,ue[De]=void 0,ue)}function qe(){return Y}function Ne(De){qi[De?"unshift":"push"](()=>{Y=De,n(5,Y)})}return o.$$set=De=>{e=Ct(Ct({},e),Yn(De)),n(9,p=bi(e,a)),"use"in De&&n(0,I=De.use),"class"in De&&n(1,L=De.class),"role"in De&&n(2,z=De.role),"tabindex"in De&&n(3,R=De.tabindex),"disabled"in De&&n(4,O=De.disabled),"$$scope"in De&&n(11,c=De.$$scope)},[I,L,z,R,O,Y,ue,te,h,p,qe,c,_,Ne]}class UC extends wn{constructor(e){super(),En(this,e,FC,BC,bn,{use:0,class:1,role:2,tabindex:3,disabled:4,getElement:10})}get getElement(){return this.$$.ctx[10]}}function T0(o,e,n){const a=o.slice();return a[2]=e[n],a}function A0(o){let e,n,a,p;function _(h){o[4](h)}let c={variant:"outlined",label:"Area",$$slots:{helperText:[GC],leadingIcon:[qC],default:[VC]},$$scope:{ctx:o}};return o[1]!==void 0&&(c.value=o[1]),n=new D1({props:c}),qi.push(()=>Cl(n,"value",_)),{c(){e=yi("div"),Li(n.$$.fragment),this.h()},l(h){e=_i(h,"DIV",{class:!0});var I=pi(e);Wi(n.$$.fragment,I),I.forEach(We),this.h()},h(){ii(e,"class","select svelte-17769al")},m(h,I){Dt(h,e,I),zi(n,e,null),p=!0},p(h,I){const L={};I&132&&(L.$$scope={dirty:I,ctx:h}),!a&&I&2&&(a=!0,L.value=h[1],kl(()=>a=!1)),n.$set(L)},i(h){p||(tt(n.$$.fragment,h),p=!0)},o(h){at(n.$$.fragment,h),p=!1},d(h){h&&We(e),Di(n)}}}function NC(o){let e=o[2].title+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p(a,p){p&4&&e!==(e=a[2].title+"")&&Fs(n,e)},d(a){a&&We(n)}}}function C0(o){let e,n;return e=new n_({props:{value:JSON.stringify(o[2]),$$slots:{default:[NC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&4&&(_.value=JSON.stringify(a[2])),p&132&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function VC(o){let e,n,a,p;e=new n_({props:{value:""}});let _=o[2],c=[];for(let I=0;I<_.length;I+=1)c[I]=C0(T0(o,_,I));const h=I=>at(c[I],1,1,()=>{c[I]=null});return{c(){Li(e.$$.fragment),n=Bn();for(let I=0;I<c.length;I+=1)c[I].c();a=cn()},l(I){Wi(e.$$.fragment,I),n=Fn(I);for(let L=0;L<c.length;L+=1)c[L].l(I);a=cn()},m(I,L){zi(e,I,L),Dt(I,n,L);for(let z=0;z<c.length;z+=1)c[z].m(I,L);Dt(I,a,L),p=!0},p(I,L){if(L&4){_=I[2];let z;for(z=0;z<_.length;z+=1){const R=T0(I,_,z);c[z]?(c[z].p(R,L),tt(c[z],1)):(c[z]=C0(R),c[z].c(),tt(c[z],1),c[z].m(a.parentNode,a))}for(Cr(),z=_.length;z<c.length;z+=1)h(z);Ar()}},i(I){if(!p){tt(e.$$.fragment,I);for(let L=0;L<_.length;L+=1)tt(c[L]);p=!0}},o(I){at(e.$$.fragment,I),c=c.filter(Boolean);for(let L=0;L<c.length;L+=1)at(c[L]);p=!1},d(I){Di(e,I),I&&We(n),_f(c,I),I&&We(a)}}}function jC(o){let e;return{c(){e=Io("zoom_in_map")},l(n){e=So(n,"zoom_in_map")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function qC(o){let e,n;return e=new UC({props:{class:"material-icons",slot:"leadingIcon",$$slots:{default:[jC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&128&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function GC(o){let e;return{c(){e=Io("Select the area zooming to.")},l(n){e=So(n,"Select the area zooming to.")},m(n,a){Dt(n,e,a)},d(n){n&&We(e)}}}function HC(o){let e,n,a=o[0]&&A0(o);return{c(){a&&a.c(),e=cn()},l(p){a&&a.l(p),e=cn()},m(p,_){a&&a.m(p,_),Dt(p,e,_),n=!0},p(p,[_]){p[0]?a?(a.p(p,_),_&1&&tt(a,1)):(a=A0(p),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(Cr(),at(a,1,1,()=>{a=null}),Ar())},i(p){n||(tt(a),n=!0)},o(p){at(a),n=!1},d(p){a&&a.d(p),p&&We(e)}}}function ZC(o,e,n){let a,p;jo(o,bp,I=>n(3,p=I));let{isSearchTabVisible:_=!1}=e,c="";function h(I){c=I,n(1,c)}return o.$$set=I=>{"isSearchTabVisible"in I&&n(0,_=I.isSearchTabVisible)},o.$$.update=()=>{if(o.$$.dirty&10&&p&&c!==""){const I=JSON.parse(c);p.flyTo({center:I.latlng,zoom:I.zoom,curve:1})}},n(2,a=Tr.areaSwitcher.areas),[_,c,a,p,h]}class WC extends wn{constructor(e){super(),En(this,e,ZC,HC,bn,{isSearchTabVisible:0})}}var vd=(o=>(o.LAYERS="Layers",o.ATTRIBUTES="Attributes",o.SEARCH="Search",o))(vd||{});function XC(o){let e=o[14].icon+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p(a,p){p&16384&&e!==(e=a[14].icon+"")&&Fs(n,e)},d(a){a&&We(n)}}}function KC(o){let e=o[14].label+"",n;return{c(){n=Io(e)},l(a){n=So(a,e)},m(a,p){Dt(a,n,p)},p(a,p){p&16384&&e!==(e=a[14].label+"")&&Fs(n,e)},d(a){a&&We(n)}}}function JC(o){let e,n,a,p;return e=new gy({props:{class:"material-icons",$$slots:{default:[XC]},$$scope:{ctx:o}}}),a=new Jw({props:{$$slots:{default:[KC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment),n=Bn(),Li(a.$$.fragment)},l(_){Wi(e.$$.fragment,_),n=Fn(_),Wi(a.$$.fragment,_)},m(_,c){zi(e,_,c),Dt(_,n,c),zi(a,_,c),p=!0},p(_,c){const h={};c&24576&&(h.$$scope={dirty:c,ctx:_}),e.$set(h);const I={};c&24576&&(I.$$scope={dirty:c,ctx:_}),a.$set(I)},i(_){p||(tt(e.$$.fragment,_),tt(a.$$.fragment,_),p=!0)},o(_){at(e.$$.fragment,_),at(a.$$.fragment,_),p=!1},d(_){Di(e,_),_&&We(n),Di(a,_)}}}function YC(o){let e,n;return e=new F2({props:{tab:o[14],minWidth:!0,stacked:!0,indicatorSpanOnlyContent:!0,tabIndicator$transition:"fade",$$slots:{default:[JC]},$$scope:{ctx:o}}}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},p(a,p){const _={};p&16384&&(_.tab=a[14]),p&24576&&(_.$$scope={dirty:p,ctx:a}),e.$set(_)},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function QC(o){let e,n,a;function p(c){o[10](c)}let _={tabs:o[6],$$slots:{default:[YC,({tab:c})=>({14:c}),({tab:c})=>c?16384:0]},$$scope:{ctx:o}};return o[1]!==void 0&&(_.active=o[1]),e=new $2({props:_}),qi.push(()=>Cl(e,"active",p)),{c(){Li(e.$$.fragment)},l(c){Wi(e.$$.fragment,c)},m(c,h){zi(e,c,h),a=!0},p(c,h){const I={};h&24576&&(I.$$scope={dirty:h,ctx:c}),!n&&h&2&&(n=!0,I.active=c[1],kl(()=>n=!1)),e.$set(I)},i(c){a||(tt(e.$$.fragment,c),a=!0)},o(c){at(e.$$.fragment,c),a=!1},d(c){Di(e,c)}}}function $C(o){let e,n,a,p,_,c,h,I,L,z;n=new r1({props:{$$slots:{default:[QC]},$$scope:{ctx:o}}});function R(Y){o[11](Y)}let O={isLayersTabVisible:o[3]};return o[2]!==void 0&&(O.updateLayers=o[2]),p=new EA({props:O}),qi.push(()=>Cl(p,"updateLayers",R)),h=new WC({props:{isSearchTabVisible:o[5]}}),L=new DC({props:{isAttributesTabVisible:o[4]}}),{c(){e=yi("div"),Li(n.$$.fragment),a=Bn(),Li(p.$$.fragment),c=Bn(),Li(h.$$.fragment),I=Bn(),Li(L.$$.fragment),this.h()},l(Y){e=_i(Y,"DIV",{class:!0});var ee=pi(e);Wi(n.$$.fragment,ee),a=Fn(ee),Wi(p.$$.fragment,ee),c=Fn(ee),Wi(h.$$.fragment,ee),I=Fn(ee),Wi(L.$$.fragment,ee),ee.forEach(We),this.h()},h(){ii(e,"class","drawer-content svelte-kw9kwo")},m(Y,ee){Dt(Y,e,ee),zi(n,e,null),sn(e,a),zi(p,e,null),sn(e,c),zi(h,e,null),sn(e,I),zi(L,e,null),z=!0},p(Y,ee){const ue={};ee&8194&&(ue.$$scope={dirty:ee,ctx:Y}),n.$set(ue);const te={};ee&8&&(te.isLayersTabVisible=Y[3]),!_&&ee&4&&(_=!0,te.updateLayers=Y[2],kl(()=>_=!1)),p.$set(te);const de={};ee&32&&(de.isSearchTabVisible=Y[5]),h.$set(de);const oe={};ee&16&&(oe.isAttributesTabVisible=Y[4]),L.$set(oe)},i(Y){z||(tt(n.$$.fragment,Y),tt(p.$$.fragment,Y),tt(h.$$.fragment,Y),tt(L.$$.fragment,Y),z=!0)},o(Y){at(n.$$.fragment,Y),at(p.$$.fragment,Y),at(h.$$.fragment,Y),at(L.$$.fragment,Y),z=!1},d(Y){Y&&We(e),Di(n),Di(p),Di(h),Di(L)}}}function ek(o){let e,n;const a=o[9].default,p=pn(a,o,o[13],null);return{c(){e=yi("main"),p&&p.c(),this.h()},l(_){e=_i(_,"MAIN",{class:!0});var c=pi(e);p&&p.l(c),c.forEach(We),this.h()},h(){ii(e,"class","main-content svelte-kw9kwo")},m(_,c){Dt(_,e,c),p&&p.m(e,null),n=!0},p(_,c){p&&p.p&&(!n||c&8192)&&fn(p,a,_,_[13],n?gn(a,_[13],c,null):mn(_[13]),null)},i(_){n||(tt(p,_),n=!0)},o(_){at(p,_),n=!1},d(_){_&&We(e),p&&p.d(_)}}}function tk(o){let e,n,a,p,_,c;function h(L){o[12](L)}let I={variant:"dismissible",$$slots:{default:[$C]},$$scope:{ctx:o}};return o[0]!==void 0&&(I.open=o[0]),n=new w2({props:I}),qi.push(()=>Cl(n,"open",h)),_=new E2({props:{class:"app-content",$$slots:{default:[ek]},$$scope:{ctx:o}}}),{c(){e=yi("div"),Li(n.$$.fragment),p=Bn(),Li(_.$$.fragment),this.h()},l(L){e=_i(L,"DIV",{class:!0});var z=pi(e);Wi(n.$$.fragment,z),p=Fn(z),Wi(_.$$.fragment,z),z.forEach(We),this.h()},h(){ii(e,"class","drawer-container svelte-kw9kwo")},m(L,z){Dt(L,e,z),zi(n,e,null),sn(e,p),zi(_,e,null),c=!0},p(L,[z]){const R={};z&8254&&(R.$$scope={dirty:z,ctx:L}),!a&&z&1&&(a=!0,R.open=L[0],kl(()=>a=!1)),n.$set(R);const O={};z&8192&&(O.$$scope={dirty:z,ctx:L}),_.$set(O)},i(L){c||(tt(n.$$.fragment,L),tt(_.$$.fragment,L),c=!0)},o(L){at(n.$$.fragment,L),at(_.$$.fragment,L),c=!1},d(L){L&&We(e),Di(n),Di(_)}}}function ik(o,e,n){let a,p;jo(o,Dy,de=>n(8,p=de));let{$$slots:_={},$$scope:c}=e,{open:h=!1}=e,I=[{icon:"layers",label:vd.LAYERS},{icon:"search",label:vd.SEARCH},{icon:"info",label:vd.ATTRIBUTES}],L=I[0],z=!1,R=!1,O=!1,Y=()=>{};function ee(de){L=de,n(1,L)}function ue(de){Y=de,n(2,Y)}function te(de){h=de,n(0,h),n(7,a),n(8,p)}return o.$$set=de=>{"open"in de&&n(0,h=de.open),"$$scope"in de&&n(13,c=de.$$scope)},o.$$.update=()=>{if(o.$$.dirty&2)switch(n(3,z=!1),n(4,R=!1),n(5,O=!1),L.label){case vd.LAYERS:n(3,z=!0);break;case vd.ATTRIBUTES:n(4,R=!0);break;case vd.SEARCH:n(5,O=!0);break}o.$$.dirty&256&&n(7,a=p),o.$$.dirty&128&&a&&a.length>0&&n(0,h=!0),o.$$.dirty&5&&Y()},[h,L,Y,z,R,O,I,a,p,_,ee,ue,te,c]}class nk extends wn{constructor(e){super(),En(this,e,ik,tk,bn,{open:0})}}var wd={exports:{}};(function(o,e){(function(n,a){o.exports=a()})(Yl,function(){var n,a,p;function _(h,I){if(!n)n=I;else if(!a)a=I;else{var L="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",z={};n(z),p=I(z),typeof window!="undefined"&&(p.workerUrl=window.URL.createObjectURL(new Blob([L],{type:"text/javascript"})))}}_(["exports"],function(h){var I=L;function L(r,i,u,m){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(m-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=i,this.p2x=u,this.p2y=m}function z(r,i,u,m){const b=new I(r,i,u,m);return function(E){return b.solve(E)}}L.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,i){if(i===void 0&&(i=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,m=0;m<8;m++){var b=this.sampleCurveX(u)-r;if(Math.abs(b)<i)return u;var E=this.sampleCurveDerivativeX(u);if(Math.abs(E)<1e-6)break;u-=b/E}var T=0,D=1;for(u=r,m=0;m<20&&(b=this.sampleCurveX(u),!(Math.abs(b-r)<i));m++)r>b?T=u:D=u,u=.5*(D-T)+T;return u},solve:function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))}};const R=z(.25,.1,.25,1);function O(r,i,u){return Math.min(u,Math.max(i,r))}function Y(r,i,u){const m=u-i,b=((r-i)%m+m)%m+i;return b===i?u:b}function ee(r,...i){for(const u of i)for(const m in u)r[m]=u[m];return r}let ue=1;function te(r,i){r.forEach(u=>{i[u]&&(i[u]=i[u].bind(i))})}function de(r,i,u){const m={};for(const b in r)m[b]=i.call(u||this,r[b],b,r);return m}function oe(r,i,u){const m={};for(const b in r)i.call(u||this,r[b],b,r)&&(m[b]=r[b]);return m}function be(r){return Array.isArray(r)?r.map(be):typeof r=="object"&&r?de(r,be):r}const qe={};function Ne(r){qe[r]||(typeof console!="undefined"&&console.warn(r),qe[r]=!0)}function De(r,i,u){return(u.y-r.y)*(i.x-r.x)>(i.y-r.y)*(u.x-r.x)}function fe(r){let i=0;for(let u,m,b=0,E=r.length,T=E-1;b<E;T=b++)u=r[b],m=r[T],i+=(m.x-u.x)*(u.y+m.y);return i}function ct(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function st(r){const i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,m,b,E)=>{const T=b||E;return i[m]=!T||T.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i}let Ge,Ue,Rt=null;function He(r){if(Rt==null){const i=r.navigator?r.navigator.userAgent:null;Rt=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Rt}function Mt(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}const li={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){const i=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(r,i=0){const u=window.document.createElement("canvas"),m=u.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return u.width=r.width,u.height=r.height,m.drawImage(r,0,0,r.width,r.height),m.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:r=>(Ge||(Ge=document.createElement("a")),Ge.href=r,Ge.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ue==null&&(Ue=matchMedia("(prefers-reduced-motion: reduce)")),Ue.matches)}};var Et=Gt;function Gt(r,i){this.x=r,this.y=i}Gt.prototype={clone:function(){return new Gt(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,u=r.y-this.y;return i*i+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),u=Math.sin(r),m=u*this.x+i*this.y;return this.x=i*this.x-u*this.y,this.y=m,this},_rotateAround:function(r,i){var u=Math.cos(r),m=Math.sin(r),b=i.y+m*(this.x-i.x)+u*(this.y-i.y);return this.x=i.x+u*(this.x-i.x)-m*(this.y-i.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Gt.convert=function(r){return r instanceof Gt?r:Array.isArray(r)?new Gt(r[0],r[1]):r};const Ye={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},wt="mapbox-tiles";let Lt,ni,Xt=500,Ki=50;function ei(){typeof caches=="undefined"||Lt||(Lt=caches.open(wt))}let Jt=1/0;const xi={supported:!1,testSupport:function(r){!It&&dt&&(St?Yi(r):ai=r)}};let ai,dt,It=!1,St=!1;function Yi(r){const i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,dt),r.isContextLost())return;xi.supported=!0}catch{}r.deleteTexture(i),It=!0}typeof document!="undefined"&&(dt=document.createElement("img"),dt.onload=function(){ai&&Yi(ai),ai=null,St=!0},dt.onerror=function(){It=!0,ai=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Qt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qt);class gt extends Error{constructor(i,u,m,b){super(`AJAXError: ${u} (${i}): ${m}`),this.status=i,this.statusText=u,this.url=m,this.body=b}}const Oi=ct()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ln(r,i){const u=new AbortController,m=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:Oi(),signal:u.signal});let b=!1,E=!1;return r.type==="json"&&m.headers.set("Accept","application/json"),((T,D,U)=>{if(E)return;const V=Date.now();fetch(m).then(G=>G.ok?((q,K,$)=>{(r.type==="arrayBuffer"?q.arrayBuffer():r.type==="json"?q.json():q.text()).then(ie=>{E||(K&&$&&function(pe,ve,Be){if(ei(),!Lt)return;const Qe={status:ve.status,statusText:ve.statusText,headers:new Headers};ve.headers.forEach((rt,vt)=>Qe.headers.set(vt,rt));const nt=st(ve.headers.get("Cache-Control")||"");nt["no-store"]||(nt["max-age"]&&Qe.headers.set("Expires",new Date(Be+1e3*nt["max-age"]).toUTCString()),new Date(Qe.headers.get("Expires")).getTime()-Be<42e4||function(rt,vt){if(ni===void 0)try{new Response(new ReadableStream),ni=!0}catch{ni=!1}ni?vt(rt.body):rt.blob().then(vt)}(ve,rt=>{const vt=new Response(rt,Qe);ei(),Lt&&Lt.then(ot=>ot.put(function(Kt){const Wt=Kt.indexOf("?");return Wt<0?Kt:Kt.slice(0,Wt)}(pe.url),vt)).catch(ot=>Ne(ot.message))}))}(m,K,$),b=!0,i(null,ie,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch(ie=>{E||i(new Error(ie.message))})})(G,null,V):G.blob().then(q=>i(new gt(G.status,G.statusText,r.url,q)))).catch(G=>{G.code!==20&&i(new Error(G.message))})})(),{cancel:()=>{E=!0,b||u.abort()}}}const Cn=function(r,i){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i);if(!ct()){const m=r.url.substring(0,r.url.indexOf("://"));return(Ye.REGISTERED_PROTOCOLS[m]||ln)(r,i)}}if(!(/^file:/.test(u=r.url)||/^file:/.test(Oi())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ln(r,i);if(ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var u;return function(m,b){const E=new XMLHttpRequest;E.open(m.method||"GET",m.url,!0),m.type==="arrayBuffer"&&(E.responseType="arraybuffer");for(const T in m.headers)E.setRequestHeader(T,m.headers[T]);return m.type==="json"&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials=m.credentials==="include",E.onerror=()=>{b(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let T=E.response;if(m.type==="json")try{T=JSON.parse(E.response)}catch(D){return b(D)}b(null,T,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else{const T=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});b(new gt(E.status,E.statusText,m.url,T))}},E.send(m.body),{cancel:()=>E.abort()}}(r,i)},Zn=function(r,i){return Cn(ee(r,{type:"arrayBuffer"}),i)};function Nr(r){const i=window.document.createElement("a");return i.href=r,i.protocol===window.document.location.protocol&&i.host===window.document.location.host}const Kr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let At,Ni;At=[],Ni=0;const jn=function(r,i){if(xi.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Ni>=Ye.MAX_PARALLEL_IMAGE_REQUESTS){const E={requestParameters:r,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return At.push(E),E}Ni++;let u=!1;const m=()=>{if(!u)for(u=!0,Ni--;At.length&&Ni<Ye.MAX_PARALLEL_IMAGE_REQUESTS;){const E=At.shift(),{requestParameters:T,callback:D,cancelled:U}=E;U||(E.cancel=jn(T,D).cancel)}},b=Zn(r,(E,T,D,U)=>{m(),E?i(E):T&&function(V,G){typeof createImageBitmap=="function"?function(q,K){const $=new Blob([new Uint8Array(q)],{type:"image/png"});createImageBitmap($).then(ie=>{K(null,ie)}).catch(ie=>{K(new Error(`Could not load image because of ${ie.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(V,G):function(q,K){const $=new Image;$.onload=()=>{K(null,$),URL.revokeObjectURL($.src),$.onload=null,window.requestAnimationFrame(()=>{$.src=Kr})},$.onerror=()=>K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ie=new Blob([new Uint8Array(q)],{type:"image/png"});$.src=q.byteLength?URL.createObjectURL(ie):Kr}(V,G)}(T,(V,G)=>{V!=null?i(V):G!=null&&i(null,G,{cacheControl:D,expires:U})})});return{cancel:()=>{b.cancel(),m()}}};function rn(r,i,u){u[r]&&u[r].indexOf(i)!==-1||(u[r]=u[r]||[],u[r].push(i))}function $n(r,i,u){if(u&&u[r]){const m=u[r].indexOf(i);m!==-1&&u[r].splice(m,1)}}class Ln{constructor(i,u={}){ee(this,u),this.type=i}}class zt extends Ln{constructor(i,u={}){super("error",ee({error:i},u))}}class Ui{on(i,u){return this._listeners=this._listeners||{},rn(i,u,this._listeners),this}off(i,u){return $n(i,u,this._listeners),$n(i,u,this._oneTimeListeners),this}once(i,u){return this._oneTimeListeners=this._oneTimeListeners||{},rn(i,u,this._oneTimeListeners),this}fire(i,u){typeof i=="string"&&(i=new Ln(i,u||{}));const m=i.type;if(this.listens(m)){i.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const D of b)D.call(this,i);const E=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const D of E)$n(m,D,this._oneTimeListeners),D.call(this,i);const T=this._eventedParent;T&&(ee(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(i))}else i instanceof zt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ft{constructor(i,u,m,b){this.message=(i?`${i}: `:"")+m,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function Ji(r){const i=r.value;return i?[new Ft(r.key,i,"constants have been deprecated as of v8")]:[]}function Gn(r,...i){for(const u of i)for(const m in u)r[m]=u[m];return r}function Wn(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function _o(r){if(Array.isArray(r))return r.map(_o);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const i={};for(const u in r)i[u]=_o(r[u]);return i}return Wn(r)}class vo extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class la{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[m,b]of u)this.bindings[m]=b}concat(i){return new la(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const kr={kind:"null"},vi={kind:"number"},Un={kind:"string"},In={kind:"boolean"},ro={kind:"color"},ho={kind:"object"},yn={kind:"value"},ua={kind:"collator"},To={kind:"formatted"},wr={kind:"resolvedImage"};function re(r,i){return{kind:"array",itemType:r,N:i}}function ce(r){if(r.kind==="array"){const i=ce(r.itemType);return typeof r.N=="number"?`array<${i}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${i}>`}return r.kind}const me=[kr,vi,Un,In,ro,To,ho,re(yn),wr];function Se(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Se(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(const u of me)if(!Se(u,i))return null}}return`Expected ${ce(r)} but found ${ce(i)} instead.`}function ze(r,i){return i.some(u=>u.kind===r.kind)}function $e(r,i){return i.some(u=>u==="null"?r===null:u==="array"?Array.isArray(r):u==="object"?r&&!Array.isArray(r)&&typeof r=="object":u===typeof r)}var it,Ie={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ve(r){return(r=Math.round(r))<0?0:r>255?255:r}function mt(r){return Ve(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function he(r){return(i=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:i>1?1:i;var i}function W(r,i,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?r+(i-r)*u*6:2*u<1?i:3*u<2?r+(i-r)*(2/3-u)*6:r}try{it={}.parseCSSColor=function(r){var i,u=r.replace(/ /g,"").toLowerCase();if(u in Ie)return Ie[u].slice();if(u[0]==="#")return u.length===4?(i=parseInt(u.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:u.length===7&&(i=parseInt(u.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var m=u.indexOf("("),b=u.indexOf(")");if(m!==-1&&b+1===u.length){var E=u.substr(0,m),T=u.substr(m+1,b-(m+1)).split(","),D=1;switch(E){case"rgba":if(T.length!==4)return null;D=he(T.pop());case"rgb":return T.length!==3?null:[mt(T[0]),mt(T[1]),mt(T[2]),D];case"hsla":if(T.length!==4)return null;D=he(T.pop());case"hsl":if(T.length!==3)return null;var U=(parseFloat(T[0])%360+360)%360/360,V=he(T[1]),G=he(T[2]),q=G<=.5?G*(V+1):G+V-G*V,K=2*G-q;return[Ve(255*W(K,q,U+1/3)),Ve(255*W(K,q,U)),Ve(255*W(K,q,U-1/3)),D];default:return null}}return null}}catch{}class X{constructor(i,u,m,b=1){this.r=i,this.g=u,this.b=m,this.a=b}static parse(i){if(!i)return;if(i instanceof X)return i;if(typeof i!="string")return;const u=it(i);return u?new X(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[i,u,m,b]=this.toArray();return`rgba(${Math.round(i)},${Math.round(u)},${Math.round(m)},${b})`}toArray(){const{r:i,g:u,b:m,a:b}=this;return b===0?[0,0,0,0]:[255*i/b,255*u/b,255*m/b,b]}}X.black=new X(0,0,0,1),X.white=new X(1,1,1,1),X.transparent=new X(0,0,0,0),X.red=new X(1,0,0,1);class le{constructor(i,u,m){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ge{constructor(i,u,m,b,E){this.text=i,this.image=u,this.scale=m,this.fontStack=b,this.textColor=E}}class Te{constructor(i){this.sections=i}static fromString(i){return new Te([new ge(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Te?i:Te.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const u of this.sections){if(u.image){i.push(["image",u.image.name]);continue}i.push(u.text);const m={};u.fontStack&&(m["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(m["font-scale"]=u.scale),u.textColor&&(m["text-color"]=["rgba"].concat(u.textColor.toArray())),i.push(m)}return i}}class we{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new we({name:i,available:!1}):null}serialize(){return["image",this.name]}}function Pe(r,i,u,m){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[r,i,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[r,i,u,m]:[r,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Me(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof X||r instanceof le||r instanceof Te||r instanceof we)return!0;if(Array.isArray(r)){for(const i of r)if(!Me(i))return!1;return!0}if(typeof r=="object"){for(const i in r)if(!Me(r[i]))return!1;return!0}return!1}function Le(r){if(r===null)return kr;if(typeof r=="string")return Un;if(typeof r=="boolean")return In;if(typeof r=="number")return vi;if(r instanceof X)return ro;if(r instanceof le)return ua;if(r instanceof Te)return To;if(r instanceof we)return wr;if(Array.isArray(r)){const i=r.length;let u;for(const m of r){const b=Le(m);if(u){if(u===b)continue;u=yn;break}u=b}return re(u||yn,i)}return ho}function yt(r){const i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof X||r instanceof Te||r instanceof we?r.toString():JSON.stringify(r)}class lt{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Me(i[1]))return u.error("invalid value");const m=i[1];let b=Le(m);const E=u.expectedType;return b.kind!=="array"||b.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(b=E),new lt(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof X?["rgba"].concat(this.value.toArray()):this.value instanceof Te?this.value.serialize():this.value}}class _t{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const si={string:Un,number:vi,boolean:In,object:ho};class Re{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let m,b=1;const E=i[0];if(E==="array"){let D,U;if(i.length>2){const V=i[1];if(typeof V!="string"||!(V in si)||V==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);D=si[V],b++}else D=yn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);U=i[2],b++}m=re(D,U)}else m=si[E];const T=[];for(;b<i.length;b++){const D=u.parse(i[b],b,yn);if(!D)return null;T.push(D)}return new Re(m,T)}evaluate(i){for(let u=0;u<this.args.length;u++){const m=this.args[u].evaluate(i);if(!Se(this.type,Le(m)))return m;if(u===this.args.length-1)throw new _t(`Expected value to be of type ${ce(this.type)}, but found ${ce(Le(m))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,u=[i.kind];if(i.kind==="array"){const m=i.itemType;if(m.kind==="string"||m.kind==="number"||m.kind==="boolean"){u.push(m.kind);const b=i.N;(typeof b=="number"||this.args.length>1)&&u.push(b)}}return u.concat(this.args.map(m=>m.serialize()))}}class Yt{constructor(i){this.type=To,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const m=i[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");const b=[];let E=!1;for(let T=1;T<=i.length-1;++T){const D=i[T];if(E&&typeof D=="object"&&!Array.isArray(D)){E=!1;let U=null;if(D["font-scale"]&&(U=u.parse(D["font-scale"],1,vi),!U))return null;let V=null;if(D["text-font"]&&(V=u.parse(D["text-font"],1,re(Un)),!V))return null;let G=null;if(D["text-color"]&&(G=u.parse(D["text-color"],1,ro),!G))return null;const q=b[b.length-1];q.scale=U,q.font=V,q.textColor=G}else{const U=u.parse(i[T],1,yn);if(!U)return null;const V=U.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,b.push({content:U,scale:null,font:null,textColor:null})}}return new Yt(b)}evaluate(i){return new Te(this.sections.map(u=>{const m=u.content.evaluate(i);return Le(m)===wr?new ge("",m,null,null,null):new ge(yt(m),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const u of this.sections){i.push(u.content.serialize());const m={};u.scale&&(m["font-scale"]=u.scale.serialize()),u.font&&(m["text-font"]=u.font.serialize()),u.textColor&&(m["text-color"]=u.textColor.serialize()),i.push(m)}return i}}class di{constructor(i){this.type=wr,this.input=i}static parse(i,u){if(i.length!==2)return u.error("Expected two arguments.");const m=u.parse(i[1],1,Un);return m?new di(m):u.error("No image name provided.")}evaluate(i){const u=this.input.evaluate(i),m=we.fromString(u);return m&&i.availableImages&&(m.available=i.availableImages.indexOf(u)>-1),m}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const kn={"to-boolean":In,"to-color":ro,"to-number":vi,"to-string":Un};class Xi{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const m=i[0];if((m==="to-boolean"||m==="to-string")&&i.length!==2)return u.error("Expected one argument.");const b=kn[m],E=[];for(let T=1;T<i.length;T++){const D=u.parse(i[T],T,yn);if(!D)return null;E.push(D)}return new Xi(b,E)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let u,m;for(const b of this.args){if(u=b.evaluate(i),m=null,u instanceof X)return u;if(typeof u=="string"){const E=i.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Pe(u[0],u[1],u[2],u[3]),!m))return new X(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new _t(m||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const m of this.args){if(u=m.evaluate(i),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new _t(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?Te.fromString(yt(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?we.fromString(yt(this.args[0].evaluate(i))):yt(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Yt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new di(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(u=>{i.push(u.serialize())}),i}}const nn=["Unknown","Point","LineString","Polygon"];class Vi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?nn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=X.parse(i)),u}}class Ii{constructor(i,u,m,b){this.name=i,this.type=u,this._evaluate=m,this.args=b}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,u){const m=i[0],b=Ii.definitions[m];if(!b)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(b)?b[0]:b.type,T=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,D=T.filter(([V])=>!Array.isArray(V)||V.length===i.length-1);let U=null;for(const[V,G]of D){U=new rs(u.registry,u.path,null,u.scope);const q=[];let K=!1;for(let $=1;$<i.length;$++){const ie=i[$],pe=Array.isArray(V)?V[$-1]:V.type,ve=U.parse(ie,1+q.length,pe);if(!ve){K=!0;break}q.push(ve)}if(!K)if(Array.isArray(V)&&V.length!==q.length)U.error(`Expected ${V.length} arguments, but found ${q.length} instead.`);else{for(let $=0;$<q.length;$++){const ie=Array.isArray(V)?V[$]:V.type,pe=q[$];U.concat($+1).checkSubtype(ie,pe.type)}if(U.errors.length===0)return new Ii(m,E,G,q)}}if(D.length===1)u.errors.push(...U.errors);else{const V=(D.length?D:T).map(([q])=>{return K=q,Array.isArray(K)?`(${K.map(ce).join(", ")})`:`(${ce(K.type)}...)`;var K}).join(" | "),G=[];for(let q=1;q<i.length;q++){const K=u.parse(i[q],1+G.length);if(!K)return null;G.push(ce(K.type))}u.error(`Expected arguments of type ${V}, but found (${G.join(", ")}) instead.`)}return null}static register(i,u){Ii.definitions=u;for(const m in u)i[m]=Ii}}class dn{constructor(i,u,m){this.type=ua,this.locale=m,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const m=i[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");const b=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,In);if(!b)return null;const E=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,In);if(!E)return null;let T=null;return m.locale&&(T=u.parse(m.locale,1,Un),!T)?null:new dn(b,E,T)}evaluate(i){return new le(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const hr=8192;function po(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function fr(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Ko(r,i){const u=(180+r[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,b=Math.pow(2,i.z);return[Math.round(u*b*hr),Math.round(m*b*hr)]}function iu(r,i,u){const m=r[0]-i[0],b=r[1]-i[1],E=r[0]-u[0],T=r[1]-u[1];return m*T-E*b==0&&m*E<=0&&b*T<=0}function Mr(r,i){let u=!1;for(let T=0,D=i.length;T<D;T++){const U=i[T];for(let V=0,G=U.length;V<G-1;V++){if(iu(r,U[V],U[V+1]))return!1;(b=U[V])[1]>(m=r)[1]!=(E=U[V+1])[1]>m[1]&&m[0]<(E[0]-b[0])*(m[1]-b[1])/(E[1]-b[1])+b[0]&&(u=!u)}}var m,b,E;return u}function oo(r,i){for(let u=0;u<i.length;u++)if(Mr(r,i[u]))return!0;return!1}function sl(r,i,u,m){const b=m[0]-u[0],E=m[1]-u[1],T=(r[0]-u[0])*E-b*(r[1]-u[1]),D=(i[0]-u[0])*E-b*(i[1]-u[1]);return T>0&&D<0||T<0&&D>0}function ea(r,i,u){for(const V of u)for(let G=0;G<V.length-1;++G)if((D=[(T=V[G+1])[0]-(E=V[G])[0],T[1]-E[1]])[0]*(U=[(b=i)[0]-(m=r)[0],b[1]-m[1]])[1]-D[1]*U[0]!=0&&sl(m,b,E,T)&&sl(E,T,m,b))return!0;var m,b,E,T,D,U;return!1}function bo(r,i){for(let u=0;u<r.length;++u)if(!Mr(r[u],i))return!1;for(let u=0;u<r.length-1;++u)if(ea(r[u],r[u+1],i))return!1;return!0}function Pa(r,i){for(let u=0;u<i.length;u++)if(bo(r,i[u]))return!0;return!1}function Br(r,i,u){const m=[];for(let b=0;b<r.length;b++){const E=[];for(let T=0;T<r[b].length;T++){const D=Ko(r[b][T],u);po(i,D),E.push(D)}m.push(E)}return m}function La(r,i,u){const m=[];for(let b=0;b<r.length;b++){const E=Br(r[b],i,u);m.push(E)}return m}function ca(r,i,u,m){if(r[0]<u[0]||r[0]>u[2]){const b=.5*m;let E=r[0]-u[0]>b?-m:u[0]-r[0]>b?m:0;E===0&&(E=r[0]-u[2]>b?-m:u[2]-r[0]>b?m:0),r[0]+=E}po(i,r)}function _c(r,i,u,m){const b=Math.pow(2,m.z)*hr,E=[m.x*hr,m.y*hr],T=[];for(const D of r)for(const U of D){const V=[U.x+E[0],U.y+E[1]];ca(V,i,u,b),T.push(V)}return T}function za(r,i,u,m){const b=Math.pow(2,m.z)*hr,E=[m.x*hr,m.y*hr],T=[];for(const U of r){const V=[];for(const G of U){const q=[G.x+E[0],G.y+E[1]];po(i,q),V.push(q)}T.push(V)}if(i[2]-i[0]<=b/2){(D=i)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const U of T)for(const V of U)ca(V,i,u,b)}var D;return T}class ll{constructor(i,u){this.type=In,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Me(i[1])){const m=i[1];if(m.type==="FeatureCollection")for(let b=0;b<m.features.length;++b){const E=m.features[b].geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new ll(m,m.features[b].geometry)}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new ll(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new ll(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,m){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=u.canonicalID();if(m.type==="Polygon"){const D=Br(m.coordinates,E,T),U=_c(u.geometry(),b,E,T);if(!fr(b,E))return!1;for(const V of U)if(!Mr(V,D))return!1}if(m.type==="MultiPolygon"){const D=La(m.coordinates,E,T),U=_c(u.geometry(),b,E,T);if(!fr(b,E))return!1;for(const V of U)if(!oo(V,D))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,m){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=u.canonicalID();if(m.type==="Polygon"){const D=Br(m.coordinates,E,T),U=za(u.geometry(),b,E,T);if(!fr(b,E))return!1;for(const V of U)if(!bo(V,D))return!1}if(m.type==="MultiPolygon"){const D=La(m.coordinates,E,T),U=za(u.geometry(),b,E,T);if(!fr(b,E))return!1;for(const V of U)if(!Pa(V,D))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Va(r){if(r instanceof Ii&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof ll)return!1;let i=!0;return r.eachChild(u=>{i&&!Va(u)&&(i=!1)}),i}function ao(r){if(r instanceof Ii&&r.name==="feature-state")return!1;let i=!0;return r.eachChild(u=>{i&&!ao(u)&&(i=!1)}),i}function ma(r,i){if(r instanceof Ii&&i.indexOf(r.name)>=0)return!1;let u=!0;return r.eachChild(m=>{u&&!ma(m,i)&&(u=!1)}),u}class Lo{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const m=i[1];return u.scope.has(m)?new Lo(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class rs{constructor(i,u=[],m,b=new la,E=[]){this.registry=i,this.path=u,this.key=u.map(T=>`[${T}]`).join(""),this.scope=b,this.errors=E,this.expectedType=m}parse(i,u,m,b,E={}){return u?this.concat(u,m,b)._parse(i,E):this._parse(i,E)}_parse(i,u){function m(b,E,T){return T==="assert"?new Re(E,[b]):T==="coerce"?new Xi(E,[b]):b}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=i[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[b];if(E){let T=E.parse(i,this);if(!T)return null;if(this.expectedType){const D=this.expectedType,U=T.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||U.kind!=="value")if(D.kind!=="color"&&D.kind!=="formatted"&&D.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string"){if(this.checkSubtype(D,U))return null}else T=m(T,D,u.typeAnnotation||"coerce");else T=m(T,D,u.typeAnnotation||"assert")}if(!(T instanceof lt)&&T.type.kind!=="resolvedImage"&&nu(T)){const D=new Vi;try{T=new lt(T.type,T.evaluate(D))}catch(U){return this.error(U.message),null}}return T}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,m){const b=typeof i=="number"?this.path.concat(i):this.path,E=m?this.scope.concat(m):this.scope;return new rs(this.registry,b,u||null,E,this.errors)}error(i,...u){const m=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new vo(m,i))}checkSubtype(i,u){const m=Se(i,u);return m&&this.error(m),m}}function nu(r){if(r instanceof Lo)return nu(r.boundExpression);if(r instanceof Ii&&r.name==="error"||r instanceof dn||r instanceof ll)return!1;const i=r instanceof Xi||r instanceof Re;let u=!0;return r.eachChild(m=>{u=i?u&&nu(m):u&&m instanceof lt}),!!u&&Va(r)&&ma(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Vu(r,i){const u=r.length-1;let m,b,E=0,T=u,D=0;for(;E<=T;)if(D=Math.floor((E+T)/2),m=r[D],b=r[D+1],m<=i){if(D===u||i<b)return D;E=D+1}else{if(!(m>i))throw new _t("Input is not a number.");T=D-1}return 0}class ul{constructor(i,u,m){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[b,E]of m)this.labels.push(b),this.outputs.push(E)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const m=u.parse(i[1],1,vi);if(!m)return null;const b=[];let E=null;u.expectedType&&u.expectedType.kind!=="value"&&(E=u.expectedType);for(let T=1;T<i.length;T+=2){const D=T===1?-1/0:i[T],U=i[T+1],V=T,G=T+1;if(typeof D!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(b.length&&b[b.length-1][0]>=D)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const q=u.parse(U,G,E);if(!q)return null;E=E||q.type,b.push([D,q])}return new ul(E,m,b)}evaluate(i){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(i);const b=this.input.evaluate(i);if(b<=u[0])return m[0].evaluate(i);const E=u.length;return b>=u[E-1]?m[E-1].evaluate(i):m[Vu(u,b)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&i.push(this.labels[u]),i.push(this.outputs[u].serialize());return i}}function Ao(r,i,u){return r*(1-u)+i*u}var Pl=Object.freeze({__proto__:null,number:Ao,color:function(r,i,u){return new X(Ao(r.r,i.r,u),Ao(r.g,i.g,u),Ao(r.b,i.b,u),Ao(r.a,i.a,u))},array:function(r,i,u){return r.map((m,b)=>Ao(m,i[b],u))}});const vc=.95047,bc=1.08883,xc=4/29,bs=6/29,ru=3*bs*bs,ou=Math.PI/180,ih=180/Math.PI;function Ll(r){return r>.008856451679035631?Math.pow(r,1/3):r/ru+xc}function ga(r){return r>bs?r*r*r:ru*(r-xc)}function os(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function as(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Vs(r){const i=as(r.r),u=as(r.g),m=as(r.b),b=Ll((.4124564*i+.3575761*u+.1804375*m)/vc),E=Ll((.2126729*i+.7151522*u+.072175*m)/1);return{l:116*E-16,a:500*(b-E),b:200*(E-Ll((.0193339*i+.119192*u+.9503041*m)/bc)),alpha:r.a}}function ir(r){let i=(r.l+16)/116,u=isNaN(r.a)?i:i+r.a/500,m=isNaN(r.b)?i:i-r.b/200;return i=1*ga(i),u=vc*ga(u),m=bc*ga(m),new X(os(3.2404542*u-1.5371385*i-.4985314*m),os(-.969266*u+1.8760108*i+.041556*m),os(.0556434*u-.2040259*i+1.0572252*m),r.alpha)}function js(r,i,u){const m=i-r;return r+u*(m>180||m<-180?m-360*Math.round(m/360):m)}const qs={forward:Vs,reverse:ir,interpolate:function(r,i,u){return{l:Ao(r.l,i.l,u),a:Ao(r.a,i.a,u),b:Ao(r.b,i.b,u),alpha:Ao(r.alpha,i.alpha,u)}}},qo={forward:function(r){const{l:i,a:u,b:m}=Vs(r),b=Math.atan2(m,u)*ih;return{h:b<0?b+360:b,c:Math.sqrt(u*u+m*m),l:i,alpha:r.a}},reverse:function(r){const i=r.h*ou,u=r.c;return ir({l:r.l,a:Math.cos(i)*u,b:Math.sin(i)*u,alpha:r.alpha})},interpolate:function(r,i,u){return{h:js(r.h,i.h,u),c:Ao(r.c,i.c,u),l:Ao(r.l,i.l,u),alpha:Ao(r.alpha,i.alpha,u)}}};var so=Object.freeze({__proto__:null,lab:qs,hcl:qo});class Go{constructor(i,u,m,b,E){this.type=i,this.operator=u,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[T,D]of E)this.labels.push(T),this.outputs.push(D)}static interpolationFactor(i,u,m,b){let E=0;if(i.name==="exponential")E=ju(u,i.base,m,b);else if(i.name==="linear")E=ju(u,1,m,b);else if(i.name==="cubic-bezier"){const T=i.controlPoints;E=new I(T[0],T[1],T[2],T[3]).solve(ju(u,1,m,b))}return E}static parse(i,u){let[m,b,E,...T]=i;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const V=b[1];if(typeof V!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:V}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const V=b.slice(1);if(V.length!==4||V.some(G=>typeof G!="number"||G<0||G>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:V}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,vi),!E)return null;const D=[];let U=null;m==="interpolate-hcl"||m==="interpolate-lab"?U=ro:u.expectedType&&u.expectedType.kind!=="value"&&(U=u.expectedType);for(let V=0;V<T.length;V+=2){const G=T[V],q=T[V+1],K=V+3,$=V+4;if(typeof G!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(D.length&&D[D.length-1][0]>=G)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const ie=u.parse(q,$,U);if(!ie)return null;U=U||ie.type,D.push([G,ie])}return U.kind==="number"||U.kind==="color"||U.kind==="array"&&U.itemType.kind==="number"&&typeof U.N=="number"?new Go(U,m,b,E,D):u.error(`Type ${ce(U)} is not interpolatable.`)}evaluate(i){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(i);const b=this.input.evaluate(i);if(b<=u[0])return m[0].evaluate(i);const E=u.length;if(b>=u[E-1])return m[E-1].evaluate(i);const T=Vu(u,b),D=Go.interpolationFactor(this.interpolation,b,u[T],u[T+1]),U=m[T].evaluate(i),V=m[T+1].evaluate(i);return this.operator==="interpolate"?Pl[this.type.kind.toLowerCase()](U,V,D):this.operator==="interpolate-hcl"?qo.reverse(qo.interpolate(qo.forward(U),qo.forward(V),D)):qs.reverse(qs.interpolate(qs.forward(U),qs.forward(V),D))}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,i,this.input.serialize()];for(let m=0;m<this.labels.length;m++)u.push(this.labels[m],this.outputs[m].serialize());return u}}function ju(r,i,u,m){const b=m-u,E=r-u;return b===0?0:i===1?E/b:(Math.pow(i,E)-1)/(Math.pow(i,b)-1)}class qu{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let m=null;const b=u.expectedType;b&&b.kind!=="value"&&(m=b);const E=[];for(const D of i.slice(1)){const U=u.parse(D,1+E.length,m,void 0,{typeAnnotation:"omit"});if(!U)return null;m=m||U.type,E.push(U)}const T=b&&E.some(D=>Se(b,D.type));return new qu(T?yn:m,E)}evaluate(i){let u,m=null,b=0;for(const E of this.args)if(b++,m=E.evaluate(i),m&&m instanceof we&&!m.available&&(u||(u=m.name),m=null,b===this.args.length&&(m=u)),m!==null)break;return m}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class Gu{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const m=[];for(let E=1;E<i.length-1;E+=2){const T=i[E];if(typeof T!="string")return u.error(`Expected string, but found ${typeof T} instead.`,E);if(/[^a-zA-Z0-9_]/.test(T))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const D=u.parse(i[E+1],E+1);if(!D)return null;m.push([T,D])}const b=u.parse(i[i.length-1],i.length-1,u.expectedType,m);return b?new Gu(m,b):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[u,m]of this.bindings)i.push(u,m.serialize());return i.push(this.result.serialize()),i}}class au{constructor(i,u,m){this.type=i,this.index=u,this.input=m}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,vi),b=u.parse(i[2],2,re(u.expectedType||yn));return m&&b?new au(b.type.itemType,m,b):null}evaluate(i){const u=this.index.evaluate(i),m=this.input.evaluate(i);if(u<0)throw new _t(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new _t(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new _t(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class su{constructor(i,u){this.type=In,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,yn),b=u.parse(i[2],2,yn);return m&&b?ze(m.type,[In,Un,vi,kr,yn])?new su(m,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ce(m.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),m=this.haystack.evaluate(i);if(!m)return!1;if(!$e(u,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${ce(Le(u))} instead.`);if(!$e(m,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${ce(Le(m))} instead.`);return m.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class zl{constructor(i,u,m){this.type=vi,this.needle=i,this.haystack=u,this.fromIndex=m}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,yn),b=u.parse(i[2],2,yn);if(!m||!b)return null;if(!ze(m.type,[In,Un,vi,kr,yn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ce(m.type)} instead`);if(i.length===4){const E=u.parse(i[3],3,vi);return E?new zl(m,b,E):null}return new zl(m,b)}evaluate(i){const u=this.needle.evaluate(i),m=this.haystack.evaluate(i);if(!$e(u,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${ce(Le(u))} instead.`);if(!$e(m,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${ce(Le(m))} instead.`);if(this.fromIndex){const b=this.fromIndex.evaluate(i);return m.indexOf(u,b)}return m.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class lu{constructor(i,u,m,b,E,T){this.inputType=i,this.type=u,this.input=m,this.cases=b,this.outputs=E,this.otherwise=T}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let m,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const E={},T=[];for(let V=2;V<i.length-1;V+=2){let G=i[V];const q=i[V+1];Array.isArray(G)||(G=[G]);const K=u.concat(V);if(G.length===0)return K.error("Expected at least one branch label.");for(const ie of G){if(typeof ie!="number"&&typeof ie!="string")return K.error("Branch labels must be numbers or strings.");if(typeof ie=="number"&&Math.abs(ie)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ie=="number"&&Math.floor(ie)!==ie)return K.error("Numeric branch labels must be integer values.");if(m){if(K.checkSubtype(m,Le(ie)))return null}else m=Le(ie);if(E[String(ie)]!==void 0)return K.error("Branch labels must be unique.");E[String(ie)]=T.length}const $=u.parse(q,V,b);if(!$)return null;b=b||$.type,T.push($)}const D=u.parse(i[1],1,yn);if(!D)return null;const U=u.parse(i[i.length-1],i.length-1,b);return U?D.type.kind!=="value"&&u.concat(1).checkSubtype(m,D.type)?null:new lu(m,b,D,E,T,U):null}evaluate(i){const u=this.input.evaluate(i);return(Le(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),m=[],b={};for(const T of u){const D=b[this.cases[T]];D===void 0?(b[this.cases[T]]=m.length,m.push([this.cases[T],[T]])):m[D][1].push(T)}const E=T=>this.inputType.kind==="number"?Number(T):T;for(const[T,D]of m)i.push(D.length===1?E(D[0]):D.map(E)),i.push(this.outputs[T].serialize());return i.push(this.otherwise.serialize()),i}}class Hu{constructor(i,u,m){this.type=i,this.branches=u,this.otherwise=m}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const b=[];for(let T=1;T<i.length-1;T+=2){const D=u.parse(i[T],T,In);if(!D)return null;const U=u.parse(i[T+1],T+1,m);if(!U)return null;b.push([D,U]),m=m||U.type}const E=u.parse(i[i.length-1],i.length-1,m);return E?new Hu(m,b,E):null}evaluate(i){for(const[u,m]of this.branches)if(u.evaluate(i))return m.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,m]of this.branches)i(u),i(m);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class uu{constructor(i,u,m,b){this.type=i,this.input=u,this.beginIndex=m,this.endIndex=b}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,yn),b=u.parse(i[2],2,vi);if(!m||!b)return null;if(!ze(m.type,[re(yn),Un,yn]))return u.error(`Expected first argument to be of type array or string, but found ${ce(m.type)} instead`);if(i.length===4){const E=u.parse(i[3],3,vi);return E?new uu(m.type,m,b,E):null}return new uu(m.type,m,b)}evaluate(i){const u=this.input.evaluate(i),m=this.beginIndex.evaluate(i);if(!$e(u,["string","array"]))throw new _t(`Expected first argument to be of type array or string, but found ${ce(Le(u))} instead.`);if(this.endIndex){const b=this.endIndex.evaluate(i);return u.slice(m,b)}return u.slice(m)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function nh(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Dl(r,i,u,m){return m.compare(i,u)===0}function ss(r,i,u){const m=r!=="=="&&r!=="!=";return class O1{constructor(E,T,D){this.type=In,this.lhs=E,this.rhs=T,this.collator=D,this.hasUntypedArgument=E.type.kind==="value"||T.type.kind==="value"}static parse(E,T){if(E.length!==3&&E.length!==4)return T.error("Expected two or three arguments.");const D=E[0];let U=T.parse(E[1],1,yn);if(!U)return null;if(!nh(D,U.type))return T.concat(1).error(`"${D}" comparisons are not supported for type '${ce(U.type)}'.`);let V=T.parse(E[2],2,yn);if(!V)return null;if(!nh(D,V.type))return T.concat(2).error(`"${D}" comparisons are not supported for type '${ce(V.type)}'.`);if(U.type.kind!==V.type.kind&&U.type.kind!=="value"&&V.type.kind!=="value")return T.error(`Cannot compare types '${ce(U.type)}' and '${ce(V.type)}'.`);m&&(U.type.kind==="value"&&V.type.kind!=="value"?U=new Re(V.type,[U]):U.type.kind!=="value"&&V.type.kind==="value"&&(V=new Re(U.type,[V])));let G=null;if(E.length===4){if(U.type.kind!=="string"&&V.type.kind!=="string"&&U.type.kind!=="value"&&V.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(G=T.parse(E[3],3,ua),!G)return null}return new O1(U,V,G)}evaluate(E){const T=this.lhs.evaluate(E),D=this.rhs.evaluate(E);if(m&&this.hasUntypedArgument){const U=Le(T),V=Le(D);if(U.kind!==V.kind||U.kind!=="string"&&U.kind!=="number")throw new _t(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${U.kind}, ${V.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const U=Le(T),V=Le(D);if(U.kind!=="string"||V.kind!=="string")return i(E,T,D)}return this.collator?u(E,T,D,this.collator.evaluate(E)):i(E,T,D)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}serialize(){const E=[r];return this.eachChild(T=>{E.push(T.serialize())}),E}}}const rh=ss("==",function(r,i,u){return i===u},Dl),Ho=ss("!=",function(r,i,u){return i!==u},function(r,i,u,m){return!Dl(0,i,u,m)}),wc=ss("<",function(r,i,u){return i<u},function(r,i,u,m){return m.compare(i,u)<0}),Gs=ss(">",function(r,i,u){return i>u},function(r,i,u,m){return m.compare(i,u)>0}),Hs=ss("<=",function(r,i,u){return i<=u},function(r,i,u,m){return m.compare(i,u)<=0}),cl=ss(">=",function(r,i,u){return i>=u},function(r,i,u,m){return m.compare(i,u)>=0});class xs{constructor(i,u,m,b,E){this.type=Un,this.number=i,this.locale=u,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=E}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const m=u.parse(i[1],1,vi);if(!m)return null;const b=i[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let E=null;if(b.locale&&(E=u.parse(b.locale,1,Un),!E))return null;let T=null;if(b.currency&&(T=u.parse(b.currency,1,Un),!T))return null;let D=null;if(b["min-fraction-digits"]&&(D=u.parse(b["min-fraction-digits"],1,vi),!D))return null;let U=null;return b["max-fraction-digits"]&&(U=u.parse(b["max-fraction-digits"],1,vi),!U)?null:new xs(m,E,T,D,U)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class ls{constructor(i){this.type=vi,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const m=u.parse(i[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ce(m.type)} instead.`):new ls(m):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new _t(`Expected value to be of type string or array, but found ${ce(Le(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(u=>{i.push(u.serialize())}),i}}const ja={"==":rh,"!=":Ho,">":Gs,"<":wc,">=":cl,"<=":Hs,array:Re,at:au,boolean:Re,case:Hu,coalesce:qu,collator:dn,format:Yt,image:di,in:su,"index-of":zl,interpolate:Go,"interpolate-hcl":Go,"interpolate-lab":Go,length:ls,let:Gu,literal:lt,match:lu,number:Re,"number-format":xs,object:Re,slice:uu,step:ul,string:Re,"to-boolean":Xi,"to-color":Xi,"to-number":Xi,"to-string":Xi,var:Lo,within:ll};function Zs(r,[i,u,m,b]){i=i.evaluate(r),u=u.evaluate(r),m=m.evaluate(r);const E=b?b.evaluate(r):1,T=Pe(i,u,m,E);if(T)throw new _t(T);return new X(i/255*E,u/255*E,m/255*E,E)}function ws(r,i){return r in i}function Zu(r,i){const u=i[r];return u===void 0?null:u}function Ws(r){return{type:r}}function Pr(r){return{result:"success",value:r}}function hl(r){return{result:"error",value:r}}function Es(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ec(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Wu(r){return!!r.expression&&r.expression.interpolated}function Dn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function cu(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function lr(r){return r}function Xa(r,i){const u=i.type==="color",m=r.stops&&typeof r.stops[0][0]=="object",b=m||!(m||r.property!==void 0),E=r.type||(Wu(i)?"exponential":"interval");if(u&&((r=Gn({},r)).stops&&(r.stops=r.stops.map(V=>[V[0],X.parse(V[1])])),r.default=X.parse(r.default?r.default:i.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!so[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let T,D,U;if(E==="exponential")T=du;else if(E==="interval")T=hu;else if(E==="categorical"){T=lo,D=Object.create(null);for(const V of r.stops)D[V[0]]=V[1];U=typeof r.stops[0][0]}else{if(E!=="identity")throw new Error(`Unknown function type "${E}"`);T=dl}if(m){const V={},G=[];for(let $=0;$<r.stops.length;$++){const ie=r.stops[$],pe=ie[0].zoom;V[pe]===void 0&&(V[pe]={zoom:pe,type:r.type,property:r.property,default:r.default,stops:[]},G.push(pe)),V[pe].stops.push([ie[0].value,ie[1]])}const q=[];for(const $ of G)q.push([V[$].zoom,Xa(V[$],i)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Go.interpolationFactor.bind(void 0,K),zoomStops:q.map($=>$[0]),evaluate:({zoom:$},ie)=>du({stops:q,base:r.base},i,$).evaluate($,ie)}}if(b){const V=E==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Go.interpolationFactor.bind(void 0,V),zoomStops:r.stops.map(G=>G[0]),evaluate:({zoom:G})=>T(r,i,G,D,U)}}return{kind:"source",evaluate(V,G){const q=G&&G.properties?G.properties[r.property]:void 0;return q===void 0?Dr(r.default,i.default):T(r,i,q,D,U)}}}function Dr(r,i,u){return r!==void 0?r:i!==void 0?i:u!==void 0?u:void 0}function lo(r,i,u,m,b){return Dr(typeof u===b?m[u]:void 0,r.default,i.default)}function hu(r,i,u){if(Dn(u)!=="number")return Dr(r.default,i.default);const m=r.stops.length;if(m===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[m-1][0])return r.stops[m-1][1];const b=Vu(r.stops.map(E=>E[0]),u);return r.stops[b][1]}function du(r,i,u){const m=r.base!==void 0?r.base:1;if(Dn(u)!=="number")return Dr(r.default,i.default);const b=r.stops.length;if(b===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[b-1][0])return r.stops[b-1][1];const E=Vu(r.stops.map(G=>G[0]),u),T=function(G,q,K,$){const ie=$-K,pe=G-K;return ie===0?0:q===1?pe/ie:(Math.pow(q,pe)-1)/(Math.pow(q,ie)-1)}(u,m,r.stops[E][0],r.stops[E+1][0]),D=r.stops[E][1],U=r.stops[E+1][1];let V=Pl[i.type]||lr;if(r.colorSpace&&r.colorSpace!=="rgb"){const G=so[r.colorSpace];V=(q,K)=>G.reverse(G.interpolate(G.forward(q),G.forward(K),T))}return typeof D.evaluate=="function"?{evaluate(...G){const q=D.evaluate.apply(void 0,G),K=U.evaluate.apply(void 0,G);if(q!==void 0&&K!==void 0)return V(q,K,T)}}:V(D,U,T)}function dl(r,i,u){return i.type==="color"?u=X.parse(u):i.type==="formatted"?u=Te.fromString(u.toString()):i.type==="resolvedImage"?u=we.fromString(u.toString()):Dn(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0),Dr(u,r.default,i.default)}Ii.register(ja,{error:[{kind:"error"},[Un],(r,[i])=>{throw new _t(i.evaluate(r))}],typeof:[Un,[yn],(r,[i])=>ce(Le(i.evaluate(r)))],"to-rgba":[re(vi,4),[ro],(r,[i])=>i.evaluate(r).toArray()],rgb:[ro,[vi,vi,vi],Zs],rgba:[ro,[vi,vi,vi,vi],Zs],has:{type:In,overloads:[[[Un],(r,[i])=>ws(i.evaluate(r),r.properties())],[[Un,ho],(r,[i,u])=>ws(i.evaluate(r),u.evaluate(r))]]},get:{type:yn,overloads:[[[Un],(r,[i])=>Zu(i.evaluate(r),r.properties())],[[Un,ho],(r,[i,u])=>Zu(i.evaluate(r),u.evaluate(r))]]},"feature-state":[yn,[Un],(r,[i])=>Zu(i.evaluate(r),r.featureState||{})],properties:[ho,[],r=>r.properties()],"geometry-type":[Un,[],r=>r.geometryType()],id:[yn,[],r=>r.id()],zoom:[vi,[],r=>r.globals.zoom],"heatmap-density":[vi,[],r=>r.globals.heatmapDensity||0],"line-progress":[vi,[],r=>r.globals.lineProgress||0],accumulated:[yn,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[vi,Ws(vi),(r,i)=>{let u=0;for(const m of i)u+=m.evaluate(r);return u}],"*":[vi,Ws(vi),(r,i)=>{let u=1;for(const m of i)u*=m.evaluate(r);return u}],"-":{type:vi,overloads:[[[vi,vi],(r,[i,u])=>i.evaluate(r)-u.evaluate(r)],[[vi],(r,[i])=>-i.evaluate(r)]]},"/":[vi,[vi,vi],(r,[i,u])=>i.evaluate(r)/u.evaluate(r)],"%":[vi,[vi,vi],(r,[i,u])=>i.evaluate(r)%u.evaluate(r)],ln2:[vi,[],()=>Math.LN2],pi:[vi,[],()=>Math.PI],e:[vi,[],()=>Math.E],"^":[vi,[vi,vi],(r,[i,u])=>Math.pow(i.evaluate(r),u.evaluate(r))],sqrt:[vi,[vi],(r,[i])=>Math.sqrt(i.evaluate(r))],log10:[vi,[vi],(r,[i])=>Math.log(i.evaluate(r))/Math.LN10],ln:[vi,[vi],(r,[i])=>Math.log(i.evaluate(r))],log2:[vi,[vi],(r,[i])=>Math.log(i.evaluate(r))/Math.LN2],sin:[vi,[vi],(r,[i])=>Math.sin(i.evaluate(r))],cos:[vi,[vi],(r,[i])=>Math.cos(i.evaluate(r))],tan:[vi,[vi],(r,[i])=>Math.tan(i.evaluate(r))],asin:[vi,[vi],(r,[i])=>Math.asin(i.evaluate(r))],acos:[vi,[vi],(r,[i])=>Math.acos(i.evaluate(r))],atan:[vi,[vi],(r,[i])=>Math.atan(i.evaluate(r))],min:[vi,Ws(vi),(r,i)=>Math.min(...i.map(u=>u.evaluate(r)))],max:[vi,Ws(vi),(r,i)=>Math.max(...i.map(u=>u.evaluate(r)))],abs:[vi,[vi],(r,[i])=>Math.abs(i.evaluate(r))],round:[vi,[vi],(r,[i])=>{const u=i.evaluate(r);return u<0?-Math.round(-u):Math.round(u)}],floor:[vi,[vi],(r,[i])=>Math.floor(i.evaluate(r))],ceil:[vi,[vi],(r,[i])=>Math.ceil(i.evaluate(r))],"filter-==":[In,[Un,yn],(r,[i,u])=>r.properties()[i.value]===u.value],"filter-id-==":[In,[yn],(r,[i])=>r.id()===i.value],"filter-type-==":[In,[Un],(r,[i])=>r.geometryType()===i.value],"filter-<":[In,[Un,yn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m<b}],"filter-id-<":[In,[yn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u<m}],"filter->":[In,[Un,yn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m>b}],"filter-id->":[In,[yn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u>m}],"filter-<=":[In,[Un,yn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[In,[yn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u<=m}],"filter->=":[In,[Un,yn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[In,[yn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u>=m}],"filter-has":[In,[yn],(r,[i])=>i.value in r.properties()],"filter-has-id":[In,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[In,[re(Un)],(r,[i])=>i.value.indexOf(r.geometryType())>=0],"filter-id-in":[In,[re(yn)],(r,[i])=>i.value.indexOf(r.id())>=0],"filter-in-small":[In,[Un,re(yn)],(r,[i,u])=>u.value.indexOf(r.properties()[i.value])>=0],"filter-in-large":[In,[Un,re(yn)],(r,[i,u])=>function(m,b,E,T){for(;E<=T;){const D=E+T>>1;if(b[D]===m)return!0;b[D]>m?T=D-1:E=D+1}return!1}(r.properties()[i.value],u.value,0,u.value.length-1)],all:{type:In,overloads:[[[In,In],(r,[i,u])=>i.evaluate(r)&&u.evaluate(r)],[Ws(In),(r,i)=>{for(const u of i)if(!u.evaluate(r))return!1;return!0}]]},any:{type:In,overloads:[[[In,In],(r,[i,u])=>i.evaluate(r)||u.evaluate(r)],[Ws(In),(r,i)=>{for(const u of i)if(u.evaluate(r))return!0;return!1}]]},"!":[In,[In],(r,[i])=>!i.evaluate(r)],"is-supported-script":[In,[Un],(r,[i])=>{const u=r.globals&&r.globals.isSupportedScript;return!u||u(i.evaluate(r))}],upcase:[Un,[Un],(r,[i])=>i.evaluate(r).toUpperCase()],downcase:[Un,[Un],(r,[i])=>i.evaluate(r).toLowerCase()],concat:[Un,Ws(yn),(r,i)=>i.map(u=>yt(u.evaluate(r))).join("")],"resolved-locale":[Un,[ua],(r,[i])=>i.evaluate(r).resolvedLocale()]});class Xu{constructor(i,u){this.expression=i,this._warningHistory={},this._evaluator=new Vi,this._defaultValue=u?function(m){return m.type==="color"&&cu(m.default)?new X(0,0,0,0):m.type==="color"?X.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(i,u,m,b,E,T){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(i,u,m,b,E,T){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new _t(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console!="undefined"&&console.warn(D.message)),this._defaultValue}}}function us(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ja}function cs(r,i){const u=new rs(ja,[],i?function(b){const E={color:ro,string:Un,number:vi,enum:Un,boolean:In,formatted:To,resolvedImage:wr};return b.type==="array"?re(E[b.value]||yn,b.length):E[b.type]}(i):void 0),m=u.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Pr(new Xu(m,i)):hl(u.errors)}class pu{constructor(i,u){this.kind=i,this._styleExpression=u,this.isStateDependent=i!=="constant"&&!ao(u.expression)}evaluateWithoutErrorHandling(i,u,m,b,E,T){return this._styleExpression.evaluateWithoutErrorHandling(i,u,m,b,E,T)}evaluate(i,u,m,b,E,T){return this._styleExpression.evaluate(i,u,m,b,E,T)}}class Xs{constructor(i,u,m,b){this.kind=i,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!ao(u.expression),this.interpolationType=b}evaluateWithoutErrorHandling(i,u,m,b,E,T){return this._styleExpression.evaluateWithoutErrorHandling(i,u,m,b,E,T)}evaluate(i,u,m,b,E,T){return this._styleExpression.evaluate(i,u,m,b,E,T)}interpolationFactor(i,u,m){return this.interpolationType?Go.interpolationFactor(this.interpolationType,i,u,m):0}}function Rr(r,i){const u=cs(r,i);if(u.result==="error")return u;const m=u.value.expression,b=Va(m);if(!b&&!Es(i))return hl([new vo("","data expressions not supported")]);const E=ma(m,["zoom"]);if(!E&&!Ec(i))return hl([new vo("","zoom expressions not supported")]);const T=Ku(m);return T||E?T instanceof vo?hl([T]):T instanceof Go&&!Wu(i)?hl([new vo("",'"interpolate" expressions cannot be used with this property')]):Pr(T?new Xs(b?"camera":"composite",u.value,T.labels,T instanceof Go?T.interpolation:void 0):new pu(b?"constant":"source",u.value)):hl([new vo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Is{constructor(i,u){this._parameters=i,this._specification=u,Gn(this,Xa(this._parameters,this._specification))}static deserialize(i){return new Is(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Ku(r){let i=null;if(r instanceof Gu)i=Ku(r.result);else if(r instanceof qu){for(const u of r.args)if(i=Ku(u),i)break}else(r instanceof ul||r instanceof Go)&&r.input instanceof Ii&&r.input.name==="zoom"&&(i=r);return i instanceof vo||r.eachChild(u=>{const m=Ku(u);m instanceof vo?i=m:!i&&m?i=new vo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&m&&i!==m&&(i=new vo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function ta(r){const i=r.key,u=r.value,m=r.valueSpec||{},b=r.objectElementValidators||{},E=r.style,T=r.styleSpec;let D=[];const U=Dn(u);if(U!=="object")return[new Ft(i,u,`object expected, ${U} found`)];for(const V in u){const G=V.split(".")[0],q=m[G]||m["*"];let K;if(b[G])K=b[G];else if(m[G])K=na;else if(b["*"])K=b["*"];else{if(!m["*"]){D.push(new Ft(i,u[V],`unknown property "${V}"`));continue}K=na}D=D.concat(K({key:(i&&`${i}.`)+V,value:u[V],valueSpec:q,style:E,styleSpec:T,object:u,objectKey:V},u))}for(const V in m)b[V]||m[V].required&&m[V].default===void 0&&u[V]===void 0&&D.push(new Ft(i,u,`missing required property "${V}"`));return D}function Ic(r){const i=r.value,u=r.valueSpec,m=r.style,b=r.styleSpec,E=r.key,T=r.arrayElementValidator||na;if(Dn(i)!=="array")return[new Ft(E,i,`array expected, ${Dn(i)} found`)];if(u.length&&i.length!==u.length)return[new Ft(E,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new Ft(E,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let D={type:u.value,values:u.values};b.$version<7&&(D.function=u.function),Dn(u.value)==="object"&&(D=u.value);let U=[];for(let V=0;V<i.length;V++)U=U.concat(T({array:i,arrayIndex:V,value:i[V],valueSpec:D,style:m,styleSpec:b,key:`${E}[${V}]`}));return U}function oh(r){const i=r.key,u=r.value,m=r.valueSpec;let b=Dn(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new Ft(i,u,`number expected, ${b} found`)]:"minimum"in m&&u<m.minimum?[new Ft(i,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new Ft(i,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function Sc(r){const i=r.valueSpec,u=Wn(r.value.type);let m,b,E,T={};const D=u!=="categorical"&&r.value.property===void 0,U=!D,V=Dn(r.value.stops)==="array"&&Dn(r.value.stops[0])==="array"&&Dn(r.value.stops[0][0])==="object",G=ta({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function($){if(u==="identity")return[new Ft($.key,$.value,'identity function may not have a "stops" property')];let ie=[];const pe=$.value;return ie=ie.concat(Ic({key:$.key,value:pe,valueSpec:$.valueSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:q})),Dn(pe)==="array"&&pe.length===0&&ie.push(new Ft($.key,pe,"array must have at least one stop")),ie},default:function($){return na({key:$.key,value:$.value,valueSpec:i,style:$.style,styleSpec:$.styleSpec})}}});return u==="identity"&&D&&G.push(new Ft(r.key,r.value,'missing required property "property"')),u==="identity"||r.value.stops||G.push(new Ft(r.key,r.value,'missing required property "stops"')),u==="exponential"&&r.valueSpec.expression&&!Wu(r.valueSpec)&&G.push(new Ft(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(U&&!Es(r.valueSpec)?G.push(new Ft(r.key,r.value,"property functions not supported")):D&&!Ec(r.valueSpec)&&G.push(new Ft(r.key,r.value,"zoom functions not supported"))),u!=="categorical"&&!V||r.value.property!==void 0||G.push(new Ft(r.key,r.value,'"property" property is required')),G;function q($){let ie=[];const pe=$.value,ve=$.key;if(Dn(pe)!=="array")return[new Ft(ve,pe,`array expected, ${Dn(pe)} found`)];if(pe.length!==2)return[new Ft(ve,pe,`array length 2 expected, length ${pe.length} found`)];if(V){if(Dn(pe[0])!=="object")return[new Ft(ve,pe,`object expected, ${Dn(pe[0])} found`)];if(pe[0].zoom===void 0)return[new Ft(ve,pe,"object stop key must have zoom")];if(pe[0].value===void 0)return[new Ft(ve,pe,"object stop key must have value")];if(E&&E>Wn(pe[0].zoom))return[new Ft(ve,pe[0].zoom,"stop zoom values must appear in ascending order")];Wn(pe[0].zoom)!==E&&(E=Wn(pe[0].zoom),b=void 0,T={}),ie=ie.concat(ta({key:`${ve}[0]`,value:pe[0],valueSpec:{zoom:{}},style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:oh,value:K}}))}else ie=ie.concat(K({key:`${ve}[0]`,value:pe[0],valueSpec:{},style:$.style,styleSpec:$.styleSpec},pe));return us(_o(pe[1]))?ie.concat([new Ft(`${ve}[1]`,pe[1],"expressions are not allowed in function stops.")]):ie.concat(na({key:`${ve}[1]`,value:pe[1],valueSpec:i,style:$.style,styleSpec:$.styleSpec}))}function K($,ie){const pe=Dn($.value),ve=Wn($.value),Be=$.value!==null?$.value:ie;if(m){if(pe!==m)return[new Ft($.key,Be,`${pe} stop domain type must match previous stop domain type ${m}`)]}else m=pe;if(pe!=="number"&&pe!=="string"&&pe!=="boolean")return[new Ft($.key,Be,"stop domain value must be a number, string, or boolean")];if(pe!=="number"&&u!=="categorical"){let Qe=`number expected, ${pe} found`;return Es(i)&&u===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ft($.key,Be,Qe)]}return u!=="categorical"||pe!=="number"||isFinite(ve)&&Math.floor(ve)===ve?u!=="categorical"&&pe==="number"&&b!==void 0&&ve<b?[new Ft($.key,Be,"stop domain values must appear in ascending order")]:(b=ve,u==="categorical"&&ve in T?[new Ft($.key,Be,"stop domain values must be unique")]:(T[ve]=!0,[])):[new Ft($.key,Be,`integer expected, found ${ve}`)]}}function Ss(r){const i=(r.expressionContext==="property"?Rr:cs)(_o(r.value),r.valueSpec);if(i.result==="error")return i.value.map(m=>new Ft(`${r.key}${m.key}`,r.value,m.message));const u=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!u.outputDefined())return[new Ft(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ao(u))return[new Ft(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!ao(u))return[new Ft(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!ma(u,["zoom","feature-state"]))return[new Ft(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Va(u))return[new Ft(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ts(r){const i=r.key,u=r.value,m=r.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(Wn(u))===-1&&b.push(new Ft(i,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(Wn(u))===-1&&b.push(new Ft(i,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function pl(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const i of r.slice(1))if(!pl(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const fu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ks(r){if(r==null)return{filter:()=>!0,needGeometry:!1};pl(r)||(r=hs(r));const i=cs(r,fu);if(i.result==="error")throw new Error(i.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,m,b)=>i.value.evaluate(u,m,{},b),needGeometry:Tc(r)}}function As(r,i){return r<i?-1:r>i?1:0}function Tc(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let i=1;i<r.length;i++)if(Tc(r[i]))return!0;return!1}function hs(r){if(!r)return!0;const i=r[0];return r.length<=1?i!=="any":i==="=="?Da(r[1],r[2],"=="):i==="!="?fl(Da(r[1],r[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Da(r[1],r[2],i):i==="any"?(u=r.slice(1),["any"].concat(u.map(hs))):i==="all"?["all"].concat(r.slice(1).map(hs)):i==="none"?["all"].concat(r.slice(1).map(hs).map(fl)):i==="in"?mu(r[1],r.slice(2)):i==="!in"?fl(mu(r[1],r.slice(2))):i==="has"?gu(r[1]):i==="!has"?fl(gu(r[1])):i!=="within"||r;var u}function Da(r,i,u){switch(r){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,r,i]}}function mu(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",r,["literal",i.sort(As)]]:["filter-in-small",r,["literal",i]]}}function gu(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function fl(r){return["!",r]}function Ka(r){return pl(_o(r.value))?Ss(Gn({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Rl(r)}function Rl(r){const i=r.value,u=r.key;if(Dn(i)!=="array")return[new Ft(u,i,`array expected, ${Dn(i)} found`)];const m=r.styleSpec;let b,E=[];if(i.length<1)return[new Ft(u,i,"filter array must have at least 1 element")];switch(E=E.concat(Ts({key:`${u}[0]`,value:i[0],valueSpec:m.filter_operator,style:r.style,styleSpec:r.styleSpec})),Wn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Wn(i[1])==="$type"&&E.push(new Ft(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&E.push(new Ft(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(b=Dn(i[1]),b!=="string"&&E.push(new Ft(`${u}[1]`,i[1],`string expected, ${b} found`)));for(let T=2;T<i.length;T++)b=Dn(i[T]),Wn(i[1])==="$type"?E=E.concat(Ts({key:`${u}[${T}]`,value:i[T],valueSpec:m.geometry_type,style:r.style,styleSpec:r.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&E.push(new Ft(`${u}[${T}]`,i[T],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let T=1;T<i.length;T++)E=E.concat(Rl({key:`${u}[${T}]`,value:i[T],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":b=Dn(i[1]),i.length!==2?E.push(new Ft(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):b!=="string"&&E.push(new Ft(`${u}[1]`,i[1],`string expected, ${b} found`));break;case"within":b=Dn(i[1]),i.length!==2?E.push(new Ft(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):b!=="object"&&E.push(new Ft(`${u}[1]`,i[1],`object expected, ${b} found`))}return E}function Js(r,i){const u=r.key,m=r.style,b=r.styleSpec,E=r.value,T=r.objectKey,D=b[`${i}_${r.layerType}`];if(!D)return[];const U=T.match(/^(.*)-transition$/);if(i==="paint"&&U&&D[U[1]]&&D[U[1]].transition)return na({key:u,value:E,valueSpec:b.transition,style:m,styleSpec:b});const V=r.valueSpec||D[T];if(!V)return[new Ft(u,E,`unknown property "${T}"`)];let G;if(Dn(E)==="string"&&Es(V)&&!V.tokens&&(G=/^{([^}]+)}$/.exec(E)))return[new Ft(u,E,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const q=[];return r.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&q.push(new Ft(u,E,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&cu(_o(E))&&Wn(E.type)==="identity"&&q.push(new Ft(u,E,'"text-font" does not support identity functions'))),q.concat(na({key:r.key,value:E,valueSpec:V,style:m,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:T}))}function Ju(r){return Js(r,"paint")}function yu(r){return Js(r,"layout")}function ah(r){let i=[];const u=r.value,m=r.key,b=r.style,E=r.styleSpec;u.type||u.ref||i.push(new Ft(m,u,'either "type" or "ref" is required'));let T=Wn(u.type);const D=Wn(u.ref);if(u.id){const U=Wn(u.id);for(let V=0;V<r.arrayIndex;V++){const G=b.layers[V];Wn(G.id)===U&&i.push(new Ft(m,u.id,`duplicate layer id "${u.id}", previously used at line ${G.id.__line__}`))}}if("ref"in u){let U;["type","source","source-layer","filter","layout"].forEach(V=>{V in u&&i.push(new Ft(m,u[V],`"${V}" is prohibited for ref layers`))}),b.layers.forEach(V=>{Wn(V.id)===D&&(U=V)}),U?U.ref?i.push(new Ft(m,u.ref,"ref cannot reference another ref layer")):T=Wn(U.type):i.push(new Ft(m,u.ref,`ref layer "${D}" not found`))}else if(T!=="background")if(u.source){const U=b.sources&&b.sources[u.source],V=U&&Wn(U.type);U?V==="vector"&&T==="raster"?i.push(new Ft(m,u.source,`layer "${u.id}" requires a raster source`)):V==="raster"&&T!=="raster"?i.push(new Ft(m,u.source,`layer "${u.id}" requires a vector source`)):V!=="vector"||u["source-layer"]?V==="raster-dem"&&T!=="hillshade"?i.push(new Ft(m,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!u.paint||!u.paint["line-gradient"]||V==="geojson"&&U.lineMetrics||i.push(new Ft(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ft(m,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new Ft(m,u.source,`source "${u.source}" not found`))}else i.push(new Ft(m,u,'missing required property "source"'));return i=i.concat(ta({key:m,value:u,valueSpec:E.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>na({key:`${m}.type`,value:u.type,valueSpec:E.layer.type,style:r.style,styleSpec:r.styleSpec,object:u,objectKey:"type"}),filter:Ka,layout:U=>ta({layer:u,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":V=>yu(Gn({layerType:T},V))}}),paint:U=>ta({layer:u,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":V=>Ju(Gn({layerType:T},V))}})}})),i}function Cs(r){const i=r.value,u=r.key,m=Dn(i);return m!=="string"?[new Ft(u,i,`string expected, ${m} found`)]:[]}const Yu={promoteId:function({key:r,value:i}){if(Dn(i)==="string")return Cs({key:r,value:i});{const u=[];for(const m in i)u.push(...Cs({key:`${r}.${m}`,value:i[m]}));return u}}};function Ol(r){const i=r.value,u=r.key,m=r.styleSpec,b=r.style;if(!i.type)return[new Ft(u,i,'"type" is required')];const E=Wn(i.type);let T;switch(E){case"vector":case"raster":case"raster-dem":return T=ta({key:u,value:i,valueSpec:m[`source_${E.replace("-","_")}`],style:r.style,styleSpec:m,objectElementValidators:Yu}),T;case"geojson":if(T=ta({key:u,value:i,valueSpec:m.source_geojson,style:b,styleSpec:m,objectElementValidators:Yu}),i.cluster)for(const D in i.clusterProperties){const[U,V]=i.clusterProperties[D],G=typeof U=="string"?[U,["accumulated"],["get",D]]:U;T.push(...Ss({key:`${u}.${D}.map`,value:V,expressionContext:"cluster-map"})),T.push(...Ss({key:`${u}.${D}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return T;case"video":return ta({key:u,value:i,valueSpec:m.source_video,style:b,styleSpec:m});case"image":return ta({key:u,value:i,valueSpec:m.source_image,style:b,styleSpec:m});case"canvas":return[new Ft(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ts({key:`${u}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,styleSpec:m})}}function Bl(r){const i=r.value,u=r.styleSpec,m=u.light,b=r.style;let E=[];const T=Dn(i);if(i===void 0)return E;if(T!=="object")return E=E.concat([new Ft("light",i,`object expected, ${T} found`)]),E;for(const D in i){const U=D.match(/^(.*)-transition$/);E=E.concat(U&&m[U[1]]&&m[U[1]].transition?na({key:D,value:i[D],valueSpec:u.transition,style:b,styleSpec:u}):m[D]?na({key:D,value:i[D],valueSpec:m[D],style:b,styleSpec:u}):[new Ft(D,i[D],`unknown property "${D}"`)])}return E}const ia={"*":()=>[],array:Ic,boolean:function(r){const i=r.value,u=r.key,m=Dn(i);return m!=="boolean"?[new Ft(u,i,`boolean expected, ${m} found`)]:[]},number:oh,color:function(r){const i=r.key,u=r.value,m=Dn(u);return m!=="string"?[new Ft(i,u,`color expected, ${m} found`)]:it(u)===null?[new Ft(i,u,`color expected, "${u}" found`)]:[]},constants:Ji,enum:Ts,filter:Ka,function:Sc,layer:ah,object:ta,source:Ol,light:Bl,string:Cs,formatted:function(r){return Cs(r).length===0?[]:Ss(r)},resolvedImage:function(r){return Cs(r).length===0?[]:Ss(r)}};function na(r){const i=r.value,u=r.valueSpec,m=r.styleSpec;return u.expression&&cu(Wn(i))?Sc(r):u.expression&&us(_o(i))?Ss(r):u.type&&ia[u.type]?ia[u.type](r):ta(Gn({},r,{valueSpec:u.type?m[u.type]:u}))}function Ac(r){const i=r.value,u=r.key,m=Cs(r);return m.length||(i.indexOf("{fontstack}")===-1&&m.push(new Ft(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&m.push(new Ft(u,i,'"glyphs" url must include a "{range}" token'))),m}function ks(r,i=Ze){let u=[];return u=u.concat(na({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:Ac,"*":()=>[]}})),r.constants&&(u=u.concat(Ji({key:"constants",value:r.constants,style:r,styleSpec:i}))),Fl(u)}function Fl(r){return[].concat(r).sort((i,u)=>i.line-u.line)}function ml(r){return function(...i){return Fl(r.apply(this,i))}}ks.source=ml(Ol),ks.light=ml(Bl),ks.layer=ml(ah),ks.filter=ml(Ka),ks.paintProperty=ml(Ju),ks.layoutProperty=ml(yu);const Ra=ks,Gr=Ra.light,Ul=Ra.paintProperty,gl=Ra.layoutProperty;function Ms(r,i){let u=!1;if(i&&i.length)for(const m of i)r.fire(new zt(new Error(m.message))),u=!0;return u}class Nn{constructor(i,u,m){const b=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const T=new Int32Array(this.arrayBuffer);i=T[0],this.d=(u=T[1])+2*(m=T[2]);for(let U=0;U<this.d*this.d;U++){const V=T[3+U],G=T[3+U+1];b.push(V===G?null:T.subarray(V,G))}const D=T[3+b.length+1];this.keys=T.subarray(T[3+b.length],D),this.bboxes=T.subarray(D),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let T=0;T<this.d*this.d;T++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=i,this.padding=m,this.scale=u/i,this.uid=0;const E=m/u*i;this.min=-E,this.max=i+E}insert(i,u,m,b,E){this._forEachCell(u,m,b,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,u,m,b,E,T){this.cells[E].push(T)}query(i,u,m,b,E){const T=this.min,D=this.max;if(i<=T&&u<=T&&D<=m&&D<=b&&!E)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(i,u,m,b,this._queryCell,U,{},E),U}}_queryCell(i,u,m,b,E,T,D,U){const V=this.cells[E];if(V!==null){const G=this.keys,q=this.bboxes;for(let K=0;K<V.length;K++){const $=V[K];if(D[$]===void 0){const ie=4*$;(U?U(q[ie+0],q[ie+1],q[ie+2],q[ie+3]):i<=q[ie+2]&&u<=q[ie+3]&&m>=q[ie+0]&&b>=q[ie+1])?(D[$]=!0,T.push(G[$])):D[$]=!1}}}}_forEachCell(i,u,m,b,E,T,D,U){const V=this._convertToCellCoord(i),G=this._convertToCellCoord(u),q=this._convertToCellCoord(m),K=this._convertToCellCoord(b);for(let $=V;$<=q;$++)for(let ie=G;ie<=K;ie++){const pe=this.d*ie+$;if((!U||U(this._convertFromCellCoord($),this._convertFromCellCoord(ie),this._convertFromCellCoord($+1),this._convertFromCellCoord(ie+1)))&&E.call(this,i,u,m,b,pe,T,D,U))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,u=3+this.cells.length+1+1;let m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;const b=new Int32Array(u+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let E=u;for(let T=0;T<i.length;T++){const D=i[T];b[3+T]=E,b.set(D,E),E+=D.length}return b[3+i.length]=E,b.set(this.keys,E),E+=this.keys.length,b[3+i.length+1]=E,b.set(this.bboxes,E),E+=this.bboxes.length,b.buffer}static serialize(i,u){const m=i.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(i){return new Nn(i.buffer)}}const vr={};function Si(r,i,u={}){Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),vr[r]={klass:i,omit:u.omit||[],shallow:u.shallow||[]}}Si("Object",Object),Si("TransferableGridIndex",Nn),Si("Color",X),Si("Error",Error),Si("AJAXError",gt),Si("ResolvedImage",we),Si("StylePropertyFunction",Is),Si("StyleExpression",Xu,{omit:["_evaluator"]}),Si("ZoomDependentExpression",Xs),Si("ZoomConstantExpression",pu),Si("CompoundExpression",Ii,{omit:["_evaluate"]});for(const r in ja)ja[r]._classRegistryKey||Si(`Expression_${r}`,ja[r]);function yl(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function ds(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob)return r;if(yl(r)||Mt(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){const u=r;return i&&i.push(u.buffer),u}if(r instanceof ImageData)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){const u=[];for(const m of r)u.push(ds(m,i));return u}if(typeof r=="object"){const u=r.constructor,m=u._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");const b=u.serialize?u.serialize(r,i):{};if(!u.serialize){for(const E in r){if(!r.hasOwnProperty(E)||vr[m].omit.indexOf(E)>=0)continue;const T=r[E];b[E]=vr[m].shallow.indexOf(E)>=0?T:ds(T,i)}r instanceof Error&&(b.message=r.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(b.$name=m),b}throw new Error("can't serialize object of type "+typeof r)}function Ja(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||yl(r)||Mt(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(Ja);if(typeof r=="object"){const i=r.$name||"Object";if(!vr[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:u}=vr[i];if(!u)throw new Error(`can't deserialize unregistered class ${i}`);if(u.deserialize)return u.deserialize(r);const m=Object.create(u.prototype);for(const b of Object.keys(r)){if(b==="$name")continue;const E=r[b];m[b]=vr[i].shallow.indexOf(b)>=0?E:Ja(E)}return m}throw new Error("can't deserialize object of type "+typeof r)}class _u{constructor(){this.first=!0}update(i,u){const m=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=m,!0))}}const Mi={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function _l(r){for(const i of r)if(Jr(i.charCodeAt(0)))return!0;return!1}function Nl(r){for(const i of r)if(!Ps(i.charCodeAt(0)))return!1;return!0}function Ps(r){return!(Mi.Arabic(r)||Mi["Arabic Supplement"](r)||Mi["Arabic Extended-A"](r)||Mi["Arabic Presentation Forms-A"](r)||Mi["Arabic Presentation Forms-B"](r))}function Jr(r){return!(r!==746&&r!==747&&(r<4352||!(Mi["Bopomofo Extended"](r)||Mi.Bopomofo(r)||Mi["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||Mi["CJK Compatibility Ideographs"](r)||Mi["CJK Compatibility"](r)||Mi["CJK Radicals Supplement"](r)||Mi["CJK Strokes"](r)||!(!Mi["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||Mi["CJK Unified Ideographs Extension A"](r)||Mi["CJK Unified Ideographs"](r)||Mi["Enclosed CJK Letters and Months"](r)||Mi["Hangul Compatibility Jamo"](r)||Mi["Hangul Jamo Extended-A"](r)||Mi["Hangul Jamo Extended-B"](r)||Mi["Hangul Jamo"](r)||Mi["Hangul Syllables"](r)||Mi.Hiragana(r)||Mi["Ideographic Description Characters"](r)||Mi.Kanbun(r)||Mi["Kangxi Radicals"](r)||Mi["Katakana Phonetic Extensions"](r)||Mi.Katakana(r)&&r!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!Mi["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||Mi["Unified Canadian Aboriginal Syllabics"](r)||Mi["Unified Canadian Aboriginal Syllabics Extended"](r)||Mi["Vertical Forms"](r)||Mi["Yijing Hexagram Symbols"](r)||Mi["Yi Syllables"](r)||Mi["Yi Radicals"](r))))}function Vl(r){return!(Jr(r)||function(i){return!!(Mi["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Mi["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Mi["Letterlike Symbols"](i)||Mi["Number Forms"](i)||Mi["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Mi["Control Pictures"](i)&&i!==9251||Mi["Optical Character Recognition"](i)||Mi["Enclosed Alphanumerics"](i)||Mi["Geometric Shapes"](i)||Mi["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Mi["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Mi["CJK Symbols and Punctuation"](i)||Mi.Katakana(i)||Mi["Private Use Area"](i)||Mi["CJK Compatibility Forms"](i)||Mi["Small Form Variants"](i)||Mi["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function Cc(r){return r>=1424&&r<=2303||Mi["Arabic Presentation Forms-A"](r)||Mi["Arabic Presentation Forms-B"](r)}function fo(r,i){return!(!i&&Cc(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||Mi.Khmer(r))}function Ri(r){for(const i of r)if(Cc(i.charCodeAt(0)))return!0;return!1}const Jo="deferred",jl="loading",Ys="loaded";let Oa=null,Hr="unavailable",ps=null;const fi=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Hr="error"),Oa&&Oa(r)};function vu(){Ls.fire(new Ln("pluginStateChange",{pluginStatus:Hr,pluginURL:ps}))}const Ls=new Ui,bu=function(){return Hr},ha=function(){if(Hr!==Jo||!ps)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hr=jl,vu(),ps&&Zn({url:ps},r=>{r?fi(r):(Hr=Ys,vu())})},Yr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hr===Ys||Yr.applyArabicShaping!=null,isLoading:()=>Hr===jl,setState(r){Hr=r.pluginStatus,ps=r.pluginURL},isParsed:()=>Yr.applyArabicShaping!=null&&Yr.processBidirectionalText!=null&&Yr.processStyledBidirectionalText!=null,getPluginURL:()=>ps};class Vr{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _u,this.transition={})}isSupportedScript(i){return function(u,m){for(const b of u)if(!fo(b.charCodeAt(0),m))return!1;return!0}(i,Yr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,u=i-Math.floor(i),m=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}class vl{constructor(i,u){this.property=i,this.value=u,this.expression=function(m,b){if(cu(m))return new Is(m,b);if(us(m)){const E=Rr(m,b);if(E.result==="error")throw new Error(E.value.map(T=>`${T.key}: ${T.message}`).join(", "));return E.value}{let E=m;return typeof m=="string"&&b.type==="color"&&(E=X.parse(m)),{kind:"constant",evaluate:()=>E}}}(u===void 0?i.specification.default:u,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,m){return this.property.possiblyEvaluate(this,i,u,m)}}class Yo{constructor(i){this.property=i,this.value=new vl(i,void 0)}transitioned(i,u){return new kc(this.property,this.value,u,ee({},i.transition,this.transition),i.now)}untransitioned(){return new kc(this.property,this.value,null,{},0)}}class Ya{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return be(this._values[i].value.value)}setValue(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Yo(this._values[i].property)),this._values[i].value=new vl(this._values[i].property,u===null?void 0:be(u))}getTransition(i){return be(this._values[i].transition)}setTransition(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Yo(this._values[i].property)),this._values[i].transition=be(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(i[u]=m);const b=this.getTransition(u);b!==void 0&&(i[`${u}-transition`]=b)}return i}transitioned(i,u){const m=new ql(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(i,u._values[b]);return m}untransitioned(){const i=new ql(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class kc{constructor(i,u,m,b,E){this.property=i,this.value=u,this.begin=E+b.delay||0,this.end=this.begin+b.duration||0,i.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(i,u,m){const b=i.now||0,E=this.value.possiblyEvaluate(i,u,m),T=this.prior;if(T){if(b>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(b<this.begin)return T.possiblyEvaluate(i,u,m);{const D=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(i,u,m),E,function(U){if(U<=0)return 0;if(U>=1)return 1;const V=U*U,G=V*U;return 4*(U<.5?G:3*(U-V)+G-.75)}(D))}}return E}}class ql{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,m){const b=new ya(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(i,u,m);return b}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Mc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return be(this._values[i].value)}setValue(i,u){this._values[i]=new vl(this._values[i].property,u===null?void 0:be(u))}serialize(){const i={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(i[u]=m)}return i}possiblyEvaluate(i,u,m){const b=new ya(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(i,u,m);return b}}class qa{constructor(i,u,m){this.property=i,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,m,b){return this.property.evaluate(this.value,this.parameters,i,u,m,b)}}class ya{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Bi{constructor(i){this.specification=i}possiblyEvaluate(i,u){return i.expression.evaluate(u)}interpolate(i,u,m){const b=Pl[this.specification.type];return b?b(i,u,m):i}}class ci{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,m,b){return new qa(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},m,b)}:i.expression,u)}interpolate(i,u,m){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new qa(this,{kind:"constant",value:void 0},i.parameters);const b=Pl[this.specification.type];return b?new qa(this,{kind:"constant",value:b(i.value.value,u.value.value,m)},i.parameters):i}evaluate(i,u,m,b,E,T){return i.kind==="constant"?i.value:i.evaluate(u,m,b,E,T)}}class _a extends ci{possiblyEvaluate(i,u,m,b){if(i.value===void 0)return new qa(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){const E=i.expression.evaluate(u,null,{},m,b),T=i.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,D=this._calculate(T,T,T,u);return new qa(this,{kind:"constant",value:D},u)}if(i.expression.kind==="camera"){const E=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new qa(this,{kind:"constant",value:E},u)}return new qa(this,i.expression,u)}evaluate(i,u,m,b,E,T){if(i.kind==="source"){const D=i.evaluate(u,m,b,E,T);return this._calculate(D,D,D,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},m,b),i.evaluate({zoom:Math.floor(u.zoom)},m,b),i.evaluate({zoom:Math.floor(u.zoom)+1},m,b),u):i.value}_calculate(i,u,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:m,to:u}}interpolate(i){return i}}class ra{constructor(i){this.specification=i}possiblyEvaluate(i,u,m,b){if(i.value!==void 0){if(i.expression.kind==="constant"){const E=i.expression.evaluate(u,null,{},m,b);return this._calculate(E,E,E,u)}return this._calculate(i.expression.evaluate(new Vr(Math.floor(u.zoom-1),u)),i.expression.evaluate(new Vr(Math.floor(u.zoom),u)),i.expression.evaluate(new Vr(Math.floor(u.zoom+1),u)),u)}}_calculate(i,u,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:m,to:u}}interpolate(i){return i}}class Co{constructor(i){this.specification=i}possiblyEvaluate(i,u,m,b){return!!i.expression.evaluate(u,null,{},m,b)}interpolate(){return!1}}class Qr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in i){const m=i[u];m.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new vl(m,void 0),E=this.defaultTransitionablePropertyValues[u]=new Yo(m);this.defaultTransitioningPropertyValues[u]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}Si("DataDrivenProperty",ci),Si("DataConstantProperty",Bi),Si("CrossFadedDataDrivenProperty",_a),Si("CrossFadedProperty",ra),Si("ColorRampProperty",Co);const va="-transition";class to extends Ui{constructor(i,u){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new Mc(u.layout)),u.paint)){this._transitionablePaint=new Ya(u.paint);for(const m in i.paint)this.setPaintProperty(m,i.paint[m],{validate:!1});for(const m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ya(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u,m={}){u!=null&&this._validate(gl,`layers.${this.id}.layout.${i}`,i,u,m)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)}getPaintProperty(i){return i.endsWith(va)?this._transitionablePaint.getTransition(i.slice(0,-va.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u,m={}){if(u!=null&&this._validate(Ul,`layers.${this.id}.paint.${i}`,i,u,m))return!1;if(i.endsWith(va))return this._transitionablePaint.setTransition(i.slice(0,-va.length),u||void 0),!1;{const b=this._transitionablePaint._values[i],E=b.property.specification["property-type"]==="cross-faded-data-driven",T=b.value.isDataDriven(),D=b.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);const U=this._transitionablePaint._values[i].value;return U.isDataDriven()||T||E||this._handleOverridablePaintPropertyUpdate(i,D,U)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,u,m){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),oe(i,(u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length))}_validate(i,u,m,b,E={}){return(!E||E.validate!==!1)&&Ms(this,i.call(Ra,{key:u,layerType:this.type,objectKey:m,value:b,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof qa&&Es(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const oa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zs{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function mi(r,i=1){let u=0,m=0;return{members:r.map(b=>{const E=oa[b.type].BYTES_PER_ELEMENT,T=u=xu(u,Math.max(i,E)),D=b.components||1;return m=Math.max(m,E),u+=E*D,{name:b.name,type:b.type,components:D,offset:T}}),size:xu(u,Math.max(m,i)),alignment:i}}function xu(r,i){return Math.ceil(r/i)*i}class xo extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,u)}emplace(i,u,m){const b=2*i;return this.int16[b+0]=u,this.int16[b+1]=m,i}}xo.prototype.bytesPerElement=4,Si("StructArrayLayout2i4",xo);class da extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,m,b)}emplace(i,u,m,b,E){const T=4*i;return this.int16[T+0]=u,this.int16[T+1]=m,this.int16[T+2]=b,this.int16[T+3]=E,i}}da.prototype.bytesPerElement=8,Si("StructArrayLayout4i8",da);class C extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T){const D=this.length;return this.resize(D+1),this.emplace(D,i,u,m,b,E,T)}emplace(i,u,m,b,E,T,D){const U=6*i;return this.int16[U+0]=u,this.int16[U+1]=m,this.int16[U+2]=b,this.int16[U+3]=E,this.int16[U+4]=T,this.int16[U+5]=D,i}}C.prototype.bytesPerElement=12,Si("StructArrayLayout2i4i12",C);class l extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T){const D=this.length;return this.resize(D+1),this.emplace(D,i,u,m,b,E,T)}emplace(i,u,m,b,E,T,D){const U=4*i,V=8*i;return this.int16[U+0]=u,this.int16[U+1]=m,this.uint8[V+4]=b,this.uint8[V+5]=E,this.uint8[V+6]=T,this.uint8[V+7]=D,i}}l.prototype.bytesPerElement=8,Si("StructArrayLayout2i4ub8",l);class v extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,u)}emplace(i,u,m){const b=2*i;return this.float32[b+0]=u,this.float32[b+1]=m,i}}v.prototype.bytesPerElement=8,Si("StructArrayLayout2f8",v);class A extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,D,U,V,G){const q=this.length;return this.resize(q+1),this.emplace(q,i,u,m,b,E,T,D,U,V,G)}emplace(i,u,m,b,E,T,D,U,V,G,q){const K=10*i;return this.uint16[K+0]=u,this.uint16[K+1]=m,this.uint16[K+2]=b,this.uint16[K+3]=E,this.uint16[K+4]=T,this.uint16[K+5]=D,this.uint16[K+6]=U,this.uint16[K+7]=V,this.uint16[K+8]=G,this.uint16[K+9]=q,i}}A.prototype.bytesPerElement=20,Si("StructArrayLayout10ui20",A);class k extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,D,U,V,G,q,K){const $=this.length;return this.resize($+1),this.emplace($,i,u,m,b,E,T,D,U,V,G,q,K)}emplace(i,u,m,b,E,T,D,U,V,G,q,K,$){const ie=12*i;return this.int16[ie+0]=u,this.int16[ie+1]=m,this.int16[ie+2]=b,this.int16[ie+3]=E,this.uint16[ie+4]=T,this.uint16[ie+5]=D,this.uint16[ie+6]=U,this.uint16[ie+7]=V,this.int16[ie+8]=G,this.int16[ie+9]=q,this.int16[ie+10]=K,this.int16[ie+11]=$,i}}k.prototype.bytesPerElement=24,Si("StructArrayLayout4i4ui4i24",k);class B extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=3*i;return this.float32[E+0]=u,this.float32[E+1]=m,this.float32[E+2]=b,i}}B.prototype.bytesPerElement=12,Si("StructArrayLayout3f12",B);class j extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}j.prototype.bytesPerElement=4,Si("StructArrayLayout1ul4",j);class Z extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,D,U,V){const G=this.length;return this.resize(G+1),this.emplace(G,i,u,m,b,E,T,D,U,V)}emplace(i,u,m,b,E,T,D,U,V,G){const q=10*i,K=5*i;return this.int16[q+0]=u,this.int16[q+1]=m,this.int16[q+2]=b,this.int16[q+3]=E,this.int16[q+4]=T,this.int16[q+5]=D,this.uint32[K+3]=U,this.uint16[q+8]=V,this.uint16[q+9]=G,i}}Z.prototype.bytesPerElement=20,Si("StructArrayLayout6i1ul2ui20",Z);class J extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T){const D=this.length;return this.resize(D+1),this.emplace(D,i,u,m,b,E,T)}emplace(i,u,m,b,E,T,D){const U=6*i;return this.int16[U+0]=u,this.int16[U+1]=m,this.int16[U+2]=b,this.int16[U+3]=E,this.int16[U+4]=T,this.int16[U+5]=D,i}}J.prototype.bytesPerElement=12,Si("StructArrayLayout2i2i2i12",J);class ne extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,m,b,E)}emplace(i,u,m,b,E,T){const D=4*i,U=8*i;return this.float32[D+0]=u,this.float32[D+1]=m,this.float32[D+2]=b,this.int16[U+6]=E,this.int16[U+7]=T,i}}ne.prototype.bytesPerElement=16,Si("StructArrayLayout2f1f2i16",ne);class se extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,m,b)}emplace(i,u,m,b,E){const T=12*i,D=3*i;return this.uint8[T+0]=u,this.uint8[T+1]=m,this.float32[D+1]=b,this.float32[D+2]=E,i}}se.prototype.bytesPerElement=12,Si("StructArrayLayout2ub2f12",se);class ye extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=3*i;return this.uint16[E+0]=u,this.uint16[E+1]=m,this.uint16[E+2]=b,i}}ye.prototype.bytesPerElement=6,Si("StructArrayLayout3ui6",ye);class Ae extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be)}emplace(i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe){const nt=24*i,rt=12*i,vt=48*i;return this.int16[nt+0]=u,this.int16[nt+1]=m,this.uint16[nt+2]=b,this.uint16[nt+3]=E,this.uint32[rt+2]=T,this.uint32[rt+3]=D,this.uint32[rt+4]=U,this.uint16[nt+10]=V,this.uint16[nt+11]=G,this.uint16[nt+12]=q,this.float32[rt+7]=K,this.float32[rt+8]=$,this.uint8[vt+36]=ie,this.uint8[vt+37]=pe,this.uint8[vt+38]=ve,this.uint32[rt+10]=Be,this.int16[nt+22]=Qe,i}}Ae.prototype.bytesPerElement=48,Si("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ae);class Je extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe,nt,rt,vt,ot,Kt,Wt,Pt,Zt,Nt,$t){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe,nt,rt,vt,ot,Kt,Wt,Pt,Zt,Nt,$t)}emplace(i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe,nt,rt,vt,ot,Kt,Wt,Pt,Zt,Nt,$t,Bt){const Vt=34*i,ki=17*i;return this.int16[Vt+0]=u,this.int16[Vt+1]=m,this.int16[Vt+2]=b,this.int16[Vt+3]=E,this.int16[Vt+4]=T,this.int16[Vt+5]=D,this.int16[Vt+6]=U,this.int16[Vt+7]=V,this.uint16[Vt+8]=G,this.uint16[Vt+9]=q,this.uint16[Vt+10]=K,this.uint16[Vt+11]=$,this.uint16[Vt+12]=ie,this.uint16[Vt+13]=pe,this.uint16[Vt+14]=ve,this.uint16[Vt+15]=Be,this.uint16[Vt+16]=Qe,this.uint16[Vt+17]=nt,this.uint16[Vt+18]=rt,this.uint16[Vt+19]=vt,this.uint16[Vt+20]=ot,this.uint16[Vt+21]=Kt,this.uint16[Vt+22]=Wt,this.uint32[ki+12]=Pt,this.float32[ki+13]=Zt,this.float32[ki+14]=Nt,this.float32[ki+15]=$t,this.float32[ki+16]=Bt,i}}Je.prototype.bytesPerElement=68,Si("StructArrayLayout8i15ui1ul4f68",Je);class ke extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}ke.prototype.bytesPerElement=4,Si("StructArrayLayout1f4",ke);class Ke extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=3*i;return this.int16[E+0]=u,this.int16[E+1]=m,this.int16[E+2]=b,i}}Ke.prototype.bytesPerElement=6,Si("StructArrayLayout3i6",Ke);class ht extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=4*i;return this.uint32[2*i+0]=u,this.uint16[E+2]=m,this.uint16[E+3]=b,i}}ht.prototype.bytesPerElement=8,Si("StructArrayLayout1ul2ui8",ht);class ut extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,u)}emplace(i,u,m){const b=2*i;return this.uint16[b+0]=u,this.uint16[b+1]=m,i}}ut.prototype.bytesPerElement=4,Si("StructArrayLayout2ui4",ut);class bt extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}bt.prototype.bytesPerElement=2,Si("StructArrayLayout1ui2",bt);class ft extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,m,b)}emplace(i,u,m,b,E){const T=4*i;return this.float32[T+0]=u,this.float32[T+1]=m,this.float32[T+2]=b,this.float32[T+3]=E,i}}ft.prototype.bytesPerElement=16,Si("StructArrayLayout4f16",ft);class jt extends zs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Et(this.anchorPointX,this.anchorPointY)}}jt.prototype.size=20;class Ot extends Z{get(i){return new jt(this,i)}}Si("CollisionBoxArray",Ot);class Ut extends zs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ut.prototype.size=48;class ti extends Ae{get(i){return new Ut(this,i)}}Si("PlacedSymbolArray",ti);class ui extends zs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ui.prototype.size=68;class qt extends Je{get(i){return new ui(this,i)}}Si("SymbolInstanceArray",qt);class Gi extends ke{getoffsetX(i){return this.float32[1*i+0]}}Si("GlyphOffsetArray",Gi);class Ci extends Ke{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Si("SymbolLineVertexArray",Ci);class xn extends zs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xn.prototype.size=8;class f extends ht{get(i){return new xn(this,i)}}Si("FeatureIndexArray",f);class y extends xo{}class g extends xo{}class w extends C{}class P extends l{}class F extends v{}class N extends A{}class H extends k{}class Q extends B{}class ae extends j{}class _e extends J{}class xe extends se{}class Ee extends ye{}class Fe extends ut{}const Oe=mi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xe}=Oe;class Ce{constructor(i=[]){this.segments=i}prepareSegment(i,u,m,b){let E=this.segments[this.segments.length-1];return i>Ce.MAX_VERTEX_ARRAY_LENGTH&&Ne(`Max vertices per segment is ${Ce.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!E||E.vertexLength+i>Ce.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==b)&&(E={vertexOffset:u.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},b!==void 0&&(E.sortKey=b),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,m,b){return new Ce([{vertexOffset:i,primitiveOffset:u,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function je(r,i){return 256*(r=O(Math.floor(r),0,255))+O(Math.floor(i),0,255)}Ce.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Si("SegmentVector",Ce);const et=mi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var pt={exports:{}},xt={exports:{}};xt.exports=function(r,i){var u,m,b,E,T,D,U,V;for(m=r.length-(u=3&r.length),b=i,T=3432918353,D=461845907,V=0;V<m;)U=255&r.charCodeAt(V)|(255&r.charCodeAt(++V))<<8|(255&r.charCodeAt(++V))<<16|(255&r.charCodeAt(++V))<<24,++V,b=27492+(65535&(E=5*(65535&(b=(b^=U=(65535&(U=(U=(65535&U)*T+(((U>>>16)*T&65535)<<16)&4294967295)<<15|U>>>17))*D+(((U>>>16)*D&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(U=0,u){case 3:U^=(255&r.charCodeAt(V+2))<<16;case 2:U^=(255&r.charCodeAt(V+1))<<8;case 1:b^=U=(65535&(U=(U=(65535&(U^=255&r.charCodeAt(V)))*T+(((U>>>16)*T&65535)<<16)&4294967295)<<15|U>>>17))*D+(((U>>>16)*D&65535)<<16)&4294967295}return b^=r.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var Tt={exports:{}};Tt.exports=function(r,i){for(var u,m=r.length,b=i^m,E=0;m>=4;)u=1540483477*(65535&(u=255&r.charCodeAt(E)|(255&r.charCodeAt(++E))<<8|(255&r.charCodeAt(++E))<<16|(255&r.charCodeAt(++E))<<24))+((1540483477*(u>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++E;switch(m){case 3:b^=(255&r.charCodeAt(E+2))<<16;case 2:b^=(255&r.charCodeAt(E+1))<<8;case 1:b=1540483477*(65535&(b^=255&r.charCodeAt(E)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var kt=xt.exports,Ht=Tt.exports;pt.exports=kt,pt.exports.murmur3=kt,pt.exports.murmur2=Ht;var oi=pt.exports;class ri{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,u,m,b){this.ids.push(Ti(i)),this.positions.push(u,m,b)}getPositions(i){const u=Ti(i);let m=0,b=this.ids.length-1;for(;m<b;){const T=m+b>>1;this.ids[T]>=u?b=T:m=T+1}const E=[];for(;this.ids[m]===u;)E.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return E}static serialize(i,u){const m=new Float64Array(i.ids),b=new Uint32Array(i.positions);return Zi(m,b,0,m.length-1),u&&u.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(i){const u=new ri;return u.ids=i.ids,u.positions=i.positions,u.indexed=!0,u}}function Ti(r){const i=+r;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:oi(String(r))}function Zi(r,i,u,m){for(;u<m;){const b=r[u+m>>1];let E=u-1,T=m+1;for(;;){do E++;while(r[E]<b);do T--;while(r[T]>b);if(E>=T)break;$i(r,E,T),$i(i,3*E,3*T),$i(i,3*E+1,3*T+1),$i(i,3*E+2,3*T+2)}T-u<m-T?(Zi(r,i,u,T),u=T+1):(Zi(r,i,T+1,m),m=T)}}function $i(r,i,u){const m=r[i];r[i]=r[u],r[u]=m}Si("FeaturePositionMap",ri);class Hi{constructor(i,u){this.gl=i.gl,this.location=u}}class Xn extends Hi{constructor(i,u){super(i,u),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Pi extends Hi{constructor(i,u){super(i,u),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class _n extends Hi{constructor(i,u){super(i,u),this.current=X.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Vn=new Float32Array(16);function hn(r){return[je(255*r.r,255*r.g),je(255*r.b,255*r.a)]}class an{constructor(i,u,m){this.value=i,this.uniformNames=u.map(b=>`u_${b}`),this.type=m}setUniform(i,u,m){i.set(m.constantOr(this.value))}getBinding(i,u,m){return this.type==="color"?new _n(i,u):new Xn(i,u)}}class Sn{constructor(i,u){this.uniformNames=u.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=i.tlbr}setUniform(i,u,m,b){const E=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&i.set(E)}getBinding(i,u,m){return m.substr(0,9)==="u_pattern"?new Pi(i,u):new Xn(i,u)}}class tn{constructor(i,u,m,b){this.expression=i,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(i,u,m,b,E){const T=this.paintVertexArray.length,D=this.expression.evaluate(new Vr(0),u,{},b,[],E);this.paintVertexArray.resize(i),this._setPaintValue(T,i,D)}updatePaintArray(i,u,m,b){const E=this.expression.evaluate({zoom:0},m,b);this._setPaintValue(i,u,E)}_setPaintValue(i,u,m){if(this.type==="color"){const b=hn(m);for(let E=i;E<u;E++)this.paintVertexArray.emplace(E,b[0],b[1])}else{for(let b=i;b<u;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qi{constructor(i,u,m,b,E,T){this.expression=i,this.uniformNames=u.map(D=>`u_${D}_t`),this.type=m,this.useIntegerZoom=b,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(D=>({name:`a_${D}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(i,u,m,b,E){const T=this.expression.evaluate(new Vr(this.zoom),u,{},b,[],E),D=this.expression.evaluate(new Vr(this.zoom+1),u,{},b,[],E),U=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(U,i,T,D)}updatePaintArray(i,u,m,b){const E=this.expression.evaluate({zoom:this.zoom},m,b),T=this.expression.evaluate({zoom:this.zoom+1},m,b);this._setPaintValue(i,u,E,T)}_setPaintValue(i,u,m,b){if(this.type==="color"){const E=hn(m),T=hn(b);for(let D=i;D<u;D++)this.paintVertexArray.emplace(D,E[0],E[1],T[0],T[1])}else{for(let E=i;E<u;E++)this.paintVertexArray.emplace(E,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u){const m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=O(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);i.set(b)}getBinding(i,u,m){return new Xn(i,u)}}class $r{constructor(i,u,m,b,E,T){this.expression=i,this.type=u,this.useIntegerZoom=m,this.zoom=b,this.layerId=T,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(i,u,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(b,i,u.patterns&&u.patterns[this.layerId],m)}updatePaintArray(i,u,m,b,E){this._setPaintValues(i,u,m.patterns&&m.patterns[this.layerId],E)}_setPaintValues(i,u,m,b){if(!b||!m)return;const{min:E,mid:T,max:D}=m,U=b[E],V=b[T],G=b[D];if(U&&V&&G)for(let q=i;q<u;q++)this.zoomInPaintVertexArray.emplace(q,V.tl[0],V.tl[1],V.br[0],V.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],V.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,V.tl[0],V.tl[1],V.br[0],V.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],V.pixelRatio,G.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,et.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,et.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class uo{constructor(i,u,m){this.binders={},this._buffers=[];const b=[];for(const E in i.paint._values){if(!m(E))continue;const T=i.paint.get(E);if(!(T instanceof qa&&Es(T.property.specification)))continue;const D=Qo(E,i.type),U=T.value,V=T.property.specification.type,G=T.property.useIntegerZoom,q=T.property.specification["property-type"],K=q==="cross-faded"||q==="cross-faded-data-driven";if(U.kind==="constant")this.binders[E]=K?new Sn(U.value,D):new an(U.value,D,V),b.push(`/u_${E}`);else if(U.kind==="source"||K){const $=io(E,V,"source");this.binders[E]=K?new $r(U,V,G,u,$,i.id):new tn(U,D,V,$),b.push(`/a_${E}`)}else{const $=io(E,V,"composite");this.binders[E]=new Qi(U,D,V,G,u,$),b.push(`/z_${E}`)}}this.cacheKey=b.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof tn||u instanceof Qi?u.maxValue:0}populatePaintArrays(i,u,m,b,E){for(const T in this.binders){const D=this.binders[T];(D instanceof tn||D instanceof Qi||D instanceof $r)&&D.populatePaintArray(i,u,m,b,E)}}setConstantPatternPositions(i,u){for(const m in this.binders){const b=this.binders[m];b instanceof Sn&&b.setConstantPatternPositions(i,u)}}updatePaintArrays(i,u,m,b,E){let T=!1;for(const D in i){const U=u.getPositions(D);for(const V of U){const G=m.feature(V.index);for(const q in this.binders){const K=this.binders[q];if((K instanceof tn||K instanceof Qi||K instanceof $r)&&K.expression.isStateDependent===!0){const $=b.paint.get(q);K.expression=$.value,K.updatePaintArray(V.start,V.end,G,i[D],E),T=!0}}}}return T}defines(){const i=[];for(const u in this.binders){const m=this.binders[u];(m instanceof an||m instanceof Sn)&&i.push(...m.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof tn||m instanceof Qi)for(let b=0;b<m.paintVertexAttributes.length;b++)i.push(m.paintVertexAttributes[b].name);else if(m instanceof $r)for(let b=0;b<et.members.length;b++)i.push(et.members[b].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof an||m instanceof Sn||m instanceof Qi)for(const b of m.uniformNames)i.push(b)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,u){const m=[];for(const b in this.binders){const E=this.binders[b];if(E instanceof an||E instanceof Sn||E instanceof Qi){for(const T of E.uniformNames)if(u[T]){const D=E.getBinding(i,u[T],T);m.push({name:T,property:b,binding:D})}}}return m}setUniforms(i,u,m,b){for(const{name:E,property:T,binding:D}of u)this.binders[T].setUniform(D,b,m.get(T),E)}updatePaintBuffers(i){this._buffers=[];for(const u in this.binders){const m=this.binders[u];if(i&&m instanceof $r){const b=i.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof tn||m instanceof Qi)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(i){for(const u in this.binders){const m=this.binders[u];(m instanceof tn||m instanceof Qi||m instanceof $r)&&m.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof tn||u instanceof Qi||u instanceof $r)&&u.destroy()}}}class wo{constructor(i,u,m=()=>!0){this.programConfigurations={};for(const b of i)this.programConfigurations[b.id]=new uo(b,u,m);this.needsUpload=!1,this._featureMap=new ri,this._bufferOffset=0}populatePaintArrays(i,u,m,b,E,T){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(i,u,b,E,T);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,m,b){for(const E of m)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(i,this._featureMap,u,E,b)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Qo(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${i}-`,"").replace(/-/g,"_")]}function io(r,i,u){const m={color:{source:v,composite:ft},number:{source:ke,composite:v}},b=function(E){return{"line-pattern":{source:N,composite:N},"fill-pattern":{source:N,composite:N},"fill-extrusion-pattern":{source:N,composite:N}}[E]}(r);return b&&b[u]||m[i][u]}Si("ConstantBinder",an),Si("CrossFadedConstantBinder",Sn),Si("SourceExpressionBinder",tn),Si("CrossFadedCompositeBinder",$r),Si("CompositeExpressionBinder",Qi),Si("ProgramConfiguration",uo,{omit:["_buffers"]}),Si("ProgramConfigurationSet",wo);var er=8192;const ba=Math.pow(2,14)-1,pa=-ba-1;function Ga(r){const i=er/r.extent,u=r.loadGeometry();for(let m=0;m<u.length;m++){const b=u[m];for(let E=0;E<b.length;E++){const T=b[E],D=Math.round(T.x*i),U=Math.round(T.y*i);T.x=O(D,pa,ba),T.y=O(U,pa,ba),(D<T.x||D>T.x+1||U<T.y||U>T.y+1)&&Ne("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function zo(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?Ga(r):[]}}function Ha(r,i,u,m,b){r.emplaceBack(2*i+(m+1)/2,2*u+(b+1)/2)}class Za{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new y,this.indexArray=new Ee,this.segments=new Ce,this.programConfigurations=new wo(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){const b=this.layers[0],E=[];let T=null,D=!1;b.type==="circle"&&(T=b.layout.get("circle-sort-key"),D=!T.isConstant());for(const{feature:U,id:V,index:G,sourceLayerIndex:q}of i){const K=this.layers[0]._featureFilter.needGeometry,$=zo(U,K);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),$,m))continue;const ie=D?T.evaluate($,{},m):void 0,pe={id:V,properties:U.properties,type:U.type,sourceLayerIndex:q,index:G,geometry:K?$.geometry:Ga(U),patterns:{},sortKey:ie};E.push(pe)}D&&E.sort((U,V)=>U.sortKey-V.sortKey);for(const U of E){const{geometry:V,index:G,sourceLayerIndex:q}=U,K=i[G].feature;this.addFeature(U,V,G,m),u.featureIndex.insert(K,V,G,q,this.index)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Xe),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,m,b){for(const E of u)for(const T of E){const D=T.x,U=T.y;if(D<0||D>=er||U<0||U>=er)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),G=V.vertexLength;Ha(this.layoutVertexArray,D,U,-1,-1),Ha(this.layoutVertexArray,D,U,1,-1),Ha(this.layoutVertexArray,D,U,1,1),Ha(this.layoutVertexArray,D,U,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+3,G+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,{},b)}}function Qu(r,i){for(let u=0;u<r.length;u++)if(Wa(i,r[u]))return!0;for(let u=0;u<i.length;u++)if(Wa(r,i[u]))return!0;return!!wu(r,i)}function $u(r,i,u){return!!Wa(r,i)||!!Eu(i,r,u)}function bl(r,i){if(r.length===1)return Do(i,r[0]);for(let u=0;u<i.length;u++){const m=i[u];for(let b=0;b<m.length;b++)if(Wa(r,m[b]))return!0}for(let u=0;u<r.length;u++)if(Do(i,r[u]))return!0;for(let u=0;u<i.length;u++)if(wu(r,i[u]))return!0;return!1}function ec(r,i,u){if(r.length>1){if(wu(r,i))return!0;for(let m=0;m<i.length;m++)if(Eu(i[m],r,u))return!0}for(let m=0;m<r.length;m++)if(Eu(r[m],i,u))return!0;return!1}function wu(r,i){if(r.length===0||i.length===0)return!1;for(let u=0;u<r.length-1;u++){const m=r[u],b=r[u+1];for(let E=0;E<i.length-1;E++)if(Qs(m,b,i[E],i[E+1]))return!0}return!1}function Qs(r,i,u,m){return De(r,u,m)!==De(i,u,m)&&De(r,i,u)!==De(r,i,m)}function Eu(r,i,u){const m=u*u;if(i.length===1)return r.distSqr(i[0])<m;for(let b=1;b<i.length;b++)if(Ds(r,i[b-1],i[b])<m)return!0;return!1}function Ds(r,i,u){const m=i.distSqr(u);if(m===0)return r.distSqr(i);const b=((r.x-i.x)*(u.x-i.x)+(r.y-i.y)*(u.y-i.y))/m;return r.distSqr(b<0?i:b>1?u:u.sub(i)._mult(b)._add(i))}function Do(r,i){let u,m,b,E=!1;for(let T=0;T<r.length;T++){u=r[T];for(let D=0,U=u.length-1;D<u.length;U=D++)m=u[D],b=u[U],m.y>i.y!=b.y>i.y&&i.x<(b.x-m.x)*(i.y-m.y)/(b.y-m.y)+m.x&&(E=!E)}return E}function Wa(r,i){let u=!1;for(let m=0,b=r.length-1;m<r.length;b=m++){const E=r[m],T=r[b];E.y>i.y!=T.y>i.y&&i.x<(T.x-E.x)*(i.y-E.y)/(T.y-E.y)+E.x&&(u=!u)}return u}function Gl(r,i,u){const m=u[0],b=u[2];if(r.x<m.x&&i.x<m.x||r.x>b.x&&i.x>b.x||r.y<m.y&&i.y<m.y||r.y>b.y&&i.y>b.y)return!1;const E=De(r,i,u[0]);return E!==De(r,i,u[1])||E!==De(r,i,u[2])||E!==De(r,i,u[3])}function Rs(r,i,u){const m=i.paint.get(r).value;return m.kind==="constant"?m.value:u.programConfigurations.get(i.id).getMaxValue(r)}function ur(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function xa(r,i,u,m,b){if(!i[0]&&!i[1])return r;const E=Et.convert(i)._mult(b);u==="viewport"&&E._rotate(-m);const T=[];for(let D=0;D<r.length;D++)T.push(r[D].sub(E));return T}Si("CircleBucket",Za,{omit:["layers"]});const Ba=new Qr({"circle-sort-key":new ci(Ze.layout_circle["circle-sort-key"])});var Iu={paint:new Qr({"circle-radius":new ci(Ze.paint_circle["circle-radius"]),"circle-color":new ci(Ze.paint_circle["circle-color"]),"circle-blur":new ci(Ze.paint_circle["circle-blur"]),"circle-opacity":new ci(Ze.paint_circle["circle-opacity"]),"circle-translate":new Bi(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Bi(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bi(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bi(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ci(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ci(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ci(Ze.paint_circle["circle-stroke-opacity"])}),layout:Ba},tc=typeof Float32Array!="undefined"?Float32Array:Array;function ic(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Pd(r,i,u){var m=i[0],b=i[1],E=i[2],T=i[3],D=i[4],U=i[5],V=i[6],G=i[7],q=i[8],K=i[9],$=i[10],ie=i[11],pe=i[12],ve=i[13],Be=i[14],Qe=i[15],nt=u[0],rt=u[1],vt=u[2],ot=u[3];return r[0]=nt*m+rt*D+vt*q+ot*pe,r[1]=nt*b+rt*U+vt*K+ot*ve,r[2]=nt*E+rt*V+vt*$+ot*Be,r[3]=nt*T+rt*G+vt*ie+ot*Qe,r[4]=(nt=u[4])*m+(rt=u[5])*D+(vt=u[6])*q+(ot=u[7])*pe,r[5]=nt*b+rt*U+vt*K+ot*ve,r[6]=nt*E+rt*V+vt*$+ot*Be,r[7]=nt*T+rt*G+vt*ie+ot*Qe,r[8]=(nt=u[8])*m+(rt=u[9])*D+(vt=u[10])*q+(ot=u[11])*pe,r[9]=nt*b+rt*U+vt*K+ot*ve,r[10]=nt*E+rt*V+vt*$+ot*Be,r[11]=nt*T+rt*G+vt*ie+ot*Qe,r[12]=(nt=u[12])*m+(rt=u[13])*D+(vt=u[14])*q+(ot=u[15])*pe,r[13]=nt*b+rt*U+vt*K+ot*ve,r[14]=nt*E+rt*V+vt*$+ot*Be,r[15]=nt*T+rt*G+vt*ie+ot*Qe,r}Math.hypot||(Math.hypot=function(){for(var r=0,i=arguments.length;i--;)r+=arguments[i]*arguments[i];return Math.sqrt(r)});var xl,Ld=Pd;function wl(r,i,u){var m=i[0],b=i[1],E=i[2],T=i[3];return r[0]=u[0]*m+u[4]*b+u[8]*E+u[12]*T,r[1]=u[1]*m+u[5]*b+u[9]*E+u[13]*T,r[2]=u[2]*m+u[6]*b+u[10]*E+u[14]*T,r[3]=u[3]*m+u[7]*b+u[11]*E+u[15]*T,r}function Pc(r,i){const u=wl([],[r.x,r.y,0,1],i);return new Et(u[0]/u[3],u[1]/u[3])}xl=new tc(4),tc!=Float32Array&&(xl[0]=0,xl[1]=0,xl[2]=0,xl[3]=0);class zd extends Za{}Si("HeatmapBucket",zd,{omit:["layers"]});var Lc={paint:new Qr({"heatmap-radius":new ci(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ci(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bi(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Co(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bi(Ze.paint_heatmap["heatmap-opacity"])})};function wa(r,{width:i,height:u},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==i*u*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${i*u*m}`)}else b=new Uint8Array(i*u*m);return r.width=i,r.height=u,r.data=b,r}function If(r,{width:i,height:u},m){if(i===r.width&&u===r.height)return;const b=wa({},{width:i,height:u},m);Dd(r,b,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,i),height:Math.min(r.height,u)},m),r.width=i,r.height=u,r.data=b.data}function Dd(r,i,u,m,b,E){if(b.width===0||b.height===0)return i;if(b.width>r.width||b.height>r.height||u.x>r.width-b.width||u.y>r.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>i.width||b.height>i.height||m.x>i.width-b.width||m.y>i.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const T=r.data,D=i.data;for(let U=0;U<b.height;U++){const V=((u.y+U)*r.width+u.x)*E,G=((m.y+U)*i.width+m.x)*E;for(let q=0;q<b.width*E;q++)D[G+q]=T[V+q]}return i}class Vh{constructor(i,u){wa(this,i,1,u)}resize(i){If(this,i,1)}clone(){return new Vh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,m,b,E){Dd(i,u,m,b,E,1)}}class Os{constructor(i,u){wa(this,i,4,u)}resize(i){If(this,i,4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Os({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,m,b,E){Dd(i,u,m,b,E,4)}}function Sf(r){const i={},u=r.resolution||256,m=r.clips?r.clips.length:1,b=r.image||new Os({width:u,height:m}),E=(T,D,U)=>{i[r.evaluationKey]=U;const V=r.expression.evaluate(i);b.data[T+D+0]=Math.floor(255*V.r/V.a),b.data[T+D+1]=Math.floor(255*V.g/V.a),b.data[T+D+2]=Math.floor(255*V.b/V.a),b.data[T+D+3]=Math.floor(255*V.a)};if(r.clips)for(let T=0,D=0;T<m;++T,D+=4*u)for(let U=0,V=0;U<u;U++,V+=4){const G=U/(u-1),{start:q,end:K}=r.clips[T];E(D,V,q*(1-G)+K*G)}else for(let T=0,D=0;T<u;T++,D+=4)E(0,D,T/(u-1));return b}Si("AlphaImage",Vh),Si("RGBAImage",Os);var Qm={paint:new Qr({"hillshade-illumination-direction":new Bi(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Bi(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bi(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bi(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bi(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bi(Ze.paint_hillshade["hillshade-accent-color"])})};const Ip=mi([{name:"a_pos",components:2,type:"Int16"}],4),{members:$m}=Ip;var sh={exports:{}};function jh(r,i,u){u=u||2;var m,b,E,T,D,U,V,G=i&&i.length,q=G?i[0]*u:r.length,K=Su(r,0,q,u,!0),$=[];if(!K||K.next===K.prev)return $;if(G&&(K=function(pe,ve,Be,Qe){var nt,rt,vt,ot=[];for(nt=0,rt=ve.length;nt<rt;nt++)(vt=Su(pe,ve[nt]*Qe,nt<rt-1?ve[nt+1]*Qe:pe.length,Qe,!1))===vt.next&&(vt.steiner=!0),ot.push(lh(vt));for(ot.sort(rg),nt=0;nt<ot.length;nt++)Be=$s(Be=og(ot[nt],Be),Be.next);return Be}(r,i,K,u)),r.length>80*u){m=E=r[0],b=T=r[1];for(var ie=u;ie<q;ie+=u)(D=r[ie])<m&&(m=D),(U=r[ie+1])<b&&(b=U),D>E&&(E=D),U>T&&(T=U);V=(V=Math.max(E-m,T-b))!==0?1/V:0}return qh(K,$,u,m,b,V),$}function Su(r,i,u,m,b){var E,T;if(b===Cp(r,i,u,m)>0)for(E=i;E<u;E+=m)T=hh(E,r[E],r[E+1],T);else for(E=u-m;E>=i;E-=m)T=hh(E,r[E],r[E+1],T);return T&&Gh(T,T.next)&&(Dc(T),T=T.next),T}function $s(r,i){if(!r)return r;i||(i=r);var u,m=r;do if(u=!1,m.steiner||!Gh(m,m.next)&&mo(m.prev,m,m.next)!==0)m=m.next;else{if(Dc(m),(m=i=m.prev)===m.next)break;u=!0}while(u||m!==i);return i}function qh(r,i,u,m,b,E,T){if(r){!T&&E&&function(G,q,K,$){var ie=G;do ie.z===null&&(ie.z=Tp(ie.x,ie.y,q,K,$)),ie.prevZ=ie.prev,ie.nextZ=ie.next,ie=ie.next;while(ie!==G);ie.prevZ.nextZ=null,ie.prevZ=null,function(pe){var ve,Be,Qe,nt,rt,vt,ot,Kt,Wt=1;do{for(Be=pe,pe=null,rt=null,vt=0;Be;){for(vt++,Qe=Be,ot=0,ve=0;ve<Wt&&(ot++,Qe=Qe.nextZ);ve++);for(Kt=Wt;ot>0||Kt>0&&Qe;)ot!==0&&(Kt===0||!Qe||Be.z<=Qe.z)?(nt=Be,Be=Be.nextZ,ot--):(nt=Qe,Qe=Qe.nextZ,Kt--),rt?rt.nextZ=nt:pe=nt,nt.prevZ=rt,rt=nt;Be=Qe}rt.nextZ=null,Wt*=2}while(vt>1)}(ie)}(r,m,b,E);for(var D,U,V=r;r.prev!==r.next;)if(D=r.prev,U=r.next,E?tg(r,m,b,E):eg(r))i.push(D.i/u),i.push(r.i/u),i.push(U.i/u),Dc(r),r=U.next,V=U.next;else if((r=U)===V){T?T===1?qh(r=ig($s(r),i,u),i,u,m,b,E,2):T===2&&ng(r,i,u,m,b,E):qh($s(r),i,u,m,b,E,1);break}}}function eg(r){var i=r.prev,u=r,m=r.next;if(mo(i,u,m)>=0)return!1;for(var b=r.next.next;b!==r.prev;){if(uh(i.x,i.y,u.x,u.y,m.x,m.y,b.x,b.y)&&mo(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function tg(r,i,u,m){var b=r.prev,E=r,T=r.next;if(mo(b,E,T)>=0)return!1;for(var D=b.x>E.x?b.x>T.x?b.x:T.x:E.x>T.x?E.x:T.x,U=b.y>E.y?b.y>T.y?b.y:T.y:E.y>T.y?E.y:T.y,V=Tp(b.x<E.x?b.x<T.x?b.x:T.x:E.x<T.x?E.x:T.x,b.y<E.y?b.y<T.y?b.y:T.y:E.y<T.y?E.y:T.y,i,u,m),G=Tp(D,U,i,u,m),q=r.prevZ,K=r.nextZ;q&&q.z>=V&&K&&K.z<=G;){if(q!==r.prev&&q!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,q.x,q.y)&&mo(q.prev,q,q.next)>=0||(q=q.prevZ,K!==r.prev&&K!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,K.x,K.y)&&mo(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;q&&q.z>=V;){if(q!==r.prev&&q!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,q.x,q.y)&&mo(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;K&&K.z<=G;){if(K!==r.prev&&K!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,K.x,K.y)&&mo(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function ig(r,i,u){var m=r;do{var b=m.prev,E=m.next.next;!Gh(b,E)&&Hh(b,m,m.next,E)&&ch(b,E)&&ch(E,b)&&(i.push(b.i/u),i.push(m.i/u),i.push(E.i/u),Dc(m),Dc(m.next),m=r=E),m=m.next}while(m!==r);return $s(m)}function ng(r,i,u,m,b,E){var T=r;do{for(var D=T.next.next;D!==T.prev;){if(T.i!==D.i&&Ro(T,D)){var U=Ap(T,D);return T=$s(T,T.next),U=$s(U,U.next),qh(T,i,u,m,b,E),void qh(U,i,u,m,b,E)}D=D.next}T=T.next}while(T!==r)}function rg(r,i){return r.x-i.x}function og(r,i){var u=function(E,T){var D,U=T,V=E.x,G=E.y,q=-1/0;do{if(G<=U.y&&G>=U.next.y&&U.next.y!==U.y){var K=U.x+(G-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(K<=V&&K>q){if(q=K,K===V){if(G===U.y)return U;if(G===U.next.y)return U.next}D=U.x<U.next.x?U:U.next}}U=U.next}while(U!==T);if(!D)return null;if(V===q)return D;var $,ie=D,pe=D.x,ve=D.y,Be=1/0;U=D;do V>=U.x&&U.x>=pe&&V!==U.x&&uh(G<ve?V:q,G,pe,ve,G<ve?q:V,G,U.x,U.y)&&($=Math.abs(G-U.y)/(V-U.x),ch(U,E)&&($<Be||$===Be&&(U.x>D.x||U.x===D.x&&Sp(D,U)))&&(D=U,Be=$)),U=U.next;while(U!==ie);return D}(r,i);if(!u)return i;var m=Ap(u,r),b=$s(u,u.next);return $s(m,m.next),i===u?b:i}function Sp(r,i){return mo(r.prev,r,i.prev)<0&&mo(i.next,r,r.next)<0}function Tp(r,i,u,m,b){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*b)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-m)*b)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function lh(r){var i=r,u=r;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==r);return u}function uh(r,i,u,m,b,E,T,D){return(b-T)*(i-D)-(r-T)*(E-D)>=0&&(r-T)*(m-D)-(u-T)*(i-D)>=0&&(u-T)*(E-D)-(b-T)*(m-D)>=0}function Ro(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(u,m){var b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==m.i&&b.next.i!==m.i&&Hh(b,b.next,u,m))return!0;b=b.next}while(b!==u);return!1}(r,i)&&(ch(r,i)&&ch(i,r)&&function(u,m){var b=u,E=!1,T=(u.x+m.x)/2,D=(u.y+m.y)/2;do b.y>D!=b.next.y>D&&b.next.y!==b.y&&T<(b.next.x-b.x)*(D-b.y)/(b.next.y-b.y)+b.x&&(E=!E),b=b.next;while(b!==u);return E}(r,i)&&(mo(r.prev,r,i.prev)||mo(r,i.prev,i))||Gh(r,i)&&mo(r.prev,r,r.next)>0&&mo(i.prev,i,i.next)>0)}function mo(r,i,u){return(i.y-r.y)*(u.x-i.x)-(i.x-r.x)*(u.y-i.y)}function Gh(r,i){return r.x===i.x&&r.y===i.y}function Hh(r,i,u,m){var b=nc(mo(r,i,u)),E=nc(mo(r,i,m)),T=nc(mo(u,m,r)),D=nc(mo(u,m,i));return b!==E&&T!==D||!(b!==0||!zc(r,u,i))||!(E!==0||!zc(r,m,i))||!(T!==0||!zc(u,r,m))||!(D!==0||!zc(u,i,m))}function zc(r,i,u){return i.x<=Math.max(r.x,u.x)&&i.x>=Math.min(r.x,u.x)&&i.y<=Math.max(r.y,u.y)&&i.y>=Math.min(r.y,u.y)}function nc(r){return r>0?1:r<0?-1:0}function ch(r,i){return mo(r.prev,r,r.next)<0?mo(r,i,r.next)>=0&&mo(r,r.prev,i)>=0:mo(r,i,r.prev)<0||mo(r,r.next,i)<0}function Ap(r,i){var u=new Zh(r.i,r.x,r.y),m=new Zh(i.i,i.x,i.y),b=r.next,E=i.prev;return r.next=i,i.prev=r,u.next=b,b.prev=u,m.next=u,u.prev=m,E.next=m,m.prev=E,m}function hh(r,i,u,m){var b=new Zh(r,i,u);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function Dc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Zh(r,i,u){this.i=r,this.x=i,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cp(r,i,u,m){for(var b=0,E=i,T=u-m;E<u;E+=m)b+=(r[T]-r[E])*(r[E+1]+r[T+1]),T=E;return b}sh.exports=jh,sh.exports.default=jh,jh.deviation=function(r,i,u,m){var b=i&&i.length,E=Math.abs(Cp(r,0,b?i[0]*u:r.length,u));if(b)for(var T=0,D=i.length;T<D;T++)E-=Math.abs(Cp(r,i[T]*u,T<D-1?i[T+1]*u:r.length,u));var U=0;for(T=0;T<m.length;T+=3){var V=m[T]*u,G=m[T+1]*u,q=m[T+2]*u;U+=Math.abs((r[V]-r[q])*(r[G+1]-r[V+1])-(r[V]-r[G])*(r[q+1]-r[V+1]))}return E===0&&U===0?0:Math.abs((U-E)/E)},jh.flatten=function(r){for(var i=r[0][0].length,u={vertices:[],holes:[],dimensions:i},m=0,b=0;b<r.length;b++){for(var E=0;E<r[b].length;E++)for(var T=0;T<i;T++)u.vertices.push(r[b][E][T]);b>0&&u.holes.push(m+=r[b-1].length)}return u};var dh=sh.exports;function ag(r,i,u,m,b){Rd(r,i,u||0,m||r.length-1,b||kp)}function Rd(r,i,u,m,b){for(;m>u;){if(m-u>600){var E=m-u+1,T=i-u+1,D=Math.log(E),U=.5*Math.exp(2*D/3),V=.5*Math.sqrt(D*U*(E-U)/E)*(T-E/2<0?-1:1);Rd(r,i,Math.max(u,Math.floor(i-T*U/E+V)),Math.min(m,Math.floor(i+(E-T)*U/E+V)),b)}var G=r[i],q=u,K=m;for(Wh(r,u,i),b(r[m],G)>0&&Wh(r,u,m);q<K;){for(Wh(r,q,K),q++,K--;b(r[q],G)<0;)q++;for(;b(r[K],G)>0;)K--}b(r[u],G)===0?Wh(r,u,K):Wh(r,++K,m),K<=i&&(u=K+1),i<=K&&(m=K-1)}}function Wh(r,i,u){var m=r[i];r[i]=r[u],r[u]=m}function kp(r,i){return r<i?-1:r>i?1:0}function Xh(r,i){const u=r.length;if(u<=1)return[r];const m=[];let b,E;for(let T=0;T<u;T++){const D=fe(r[T]);D!==0&&(r[T].area=Math.abs(D),E===void 0&&(E=D<0),E===D<0?(b&&m.push(b),b=[r[T]]):b.push(r[T]))}if(b&&m.push(b),i>1)for(let T=0;T<m.length;T++)m[T].length<=i||(ag(m[T],i,1,m[T].length-1,El),m[T]=m[T].slice(0,i));return m}function El(r,i){return i.area-r.area}function Mp(r,i,u){const m=u.patternDependencies;let b=!1;for(const E of i){const T=E.paint.get(`${r}-pattern`);T.isConstant()||(b=!0);const D=T.constantOr(null);D&&(b=!0,m[D.to]=!0,m[D.from]=!0)}return b}function Pp(r,i,u,m,b){const E=b.patternDependencies;for(const T of i){const D=T.paint.get(`${r}-pattern`).value;if(D.kind!=="constant"){let U=D.evaluate({zoom:m-1},u,{},b.availableImages),V=D.evaluate({zoom:m},u,{},b.availableImages),G=D.evaluate({zoom:m+1},u,{},b.availableImages);U=U&&U.name?U.name:U,V=V&&V.name?V.name:V,G=G&&G.name?G.name:G,E[U]=!0,E[V]=!0,E[G]=!0,u.patterns[T.id]={min:U,mid:V,max:G}}}return u}class Lp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new g,this.indexArray=new Ee,this.indexArray2=new Fe,this.programConfigurations=new wo(i.layers,i.zoom),this.segments=new Ce,this.segments2=new Ce,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){this.hasPattern=Mp("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),E=!b.isConstant(),T=[];for(const{feature:D,id:U,index:V,sourceLayerIndex:G}of i){const q=this.layers[0]._featureFilter.needGeometry,K=zo(D,q);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),K,m))continue;const $=E?b.evaluate(K,{},m,u.availableImages):void 0,ie={id:U,properties:D.properties,type:D.type,sourceLayerIndex:G,index:V,geometry:q?K.geometry:Ga(D),patterns:{},sortKey:$};T.push(ie)}E&&T.sort((D,U)=>D.sortKey-U.sortKey);for(const D of T){const{geometry:U,index:V,sourceLayerIndex:G}=D;if(this.hasPattern){const q=Pp("fill",this.layers,D,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(D,U,V,m,{});u.featureIndex.insert(i[V].feature,U,V,G,this.index)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}addFeatures(i,u,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,$m),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,u,m,b,E){for(const T of Xh(u,500)){let D=0;for(const $ of T)D+=$.length;const U=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),V=U.vertexLength,G=[],q=[];for(const $ of T){if($.length===0)continue;$!==T[0]&&q.push(G.length/2);const ie=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),pe=ie.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(pe+$.length-1,pe),G.push($[0].x),G.push($[0].y);for(let ve=1;ve<$.length;ve++)this.layoutVertexArray.emplaceBack($[ve].x,$[ve].y),this.indexArray2.emplaceBack(pe+ve-1,pe+ve),G.push($[ve].x),G.push($[ve].y);ie.vertexLength+=$.length,ie.primitiveLength+=$.length}const K=dh(G,q);for(let $=0;$<K.length;$+=3)this.indexArray.emplaceBack(V+K[$],V+K[$+1],V+K[$+2]);U.vertexLength+=D,U.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,E,b)}}Si("FillBucket",Lp,{omit:["layers","patternFeatures"]});const sg=new Qr({"fill-sort-key":new ci(Ze.layout_fill["fill-sort-key"])});var Tf={paint:new Qr({"fill-antialias":new Bi(Ze.paint_fill["fill-antialias"]),"fill-opacity":new ci(Ze.paint_fill["fill-opacity"]),"fill-color":new ci(Ze.paint_fill["fill-color"]),"fill-outline-color":new ci(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Bi(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Bi(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new _a(Ze.paint_fill["fill-pattern"])}),layout:sg};const ph=mi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:lg}=ph;var rc={},Af=Et,zp=fh;function fh(r,i,u,m,b){this.properties={},this.extent=u,this.type=0,this._pbf=r,this._geometry=-1,this._keys=m,this._values=b,r.readFields(ug,this,i)}function ug(r,i,u){r==1?i.id=u.readVarint():r==2?function(m,b){for(var E=m.readVarint()+m.pos;m.pos<E;){var T=b._keys[m.readVarint()],D=b._values[m.readVarint()];b.properties[T]=D}}(u,i):r==3?i.type=u.readVarint():r==4&&(i._geometry=u.pos)}function mh(r){for(var i,u,m=0,b=0,E=r.length,T=E-1;b<E;T=b++)m+=((u=r[T]).x-(i=r[b]).x)*(i.y+u.y);return m}fh.types=["Unknown","Point","LineString","Polygon"],fh.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,u=r.readVarint()+r.pos,m=1,b=0,E=0,T=0,D=[];r.pos<u;){if(b<=0){var U=r.readVarint();m=7&U,b=U>>3}if(b--,m===1||m===2)E+=r.readSVarint(),T+=r.readSVarint(),m===1&&(i&&D.push(i),i=[]),i.push(new Af(E,T));else{if(m!==7)throw new Error("unknown command "+m);i&&i.push(i[0].clone())}}return i&&D.push(i),D},fh.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,u=1,m=0,b=0,E=0,T=1/0,D=-1/0,U=1/0,V=-1/0;r.pos<i;){if(m<=0){var G=r.readVarint();u=7&G,m=G>>3}if(m--,u===1||u===2)(b+=r.readSVarint())<T&&(T=b),b>D&&(D=b),(E+=r.readSVarint())<U&&(U=E),E>V&&(V=E);else if(u!==7)throw new Error("unknown command "+u)}return[T,U,D,V]},fh.prototype.toGeoJSON=function(r,i,u){var m,b,E=this.extent*Math.pow(2,u),T=this.extent*r,D=this.extent*i,U=this.loadGeometry(),V=fh.types[this.type];function G($){for(var ie=0;ie<$.length;ie++){var pe=$[ie];$[ie]=[360*(pe.x+T)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(pe.y+D)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(m=0;m<U.length;m++)q[m]=U[m][0];G(U=q);break;case 2:for(m=0;m<U.length;m++)G(U[m]);break;case 3:for(U=function($){var ie=$.length;if(ie<=1)return[$];for(var pe,ve,Be=[],Qe=0;Qe<ie;Qe++){var nt=mh($[Qe]);nt!==0&&(ve===void 0&&(ve=nt<0),ve===nt<0?(pe&&Be.push(pe),pe=[$[Qe]]):pe.push($[Qe]))}return pe&&Be.push(pe),Be}(U),m=0;m<U.length;m++)for(b=0;b<U[m].length;b++)G(U[m][b])}U.length===1?U=U[0]:V="Multi"+V;var K={type:"Feature",geometry:{type:V,coordinates:U},properties:this.properties};return"id"in this&&(K.id=this.id),K};var cg=zp,Od=gh;function gh(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Il,this,i),this.length=this._features.length}function Il(r,i,u){r===15?i.version=u.readVarint():r===1?i.name=u.readString():r===5?i.extent=u.readVarint():r===2?i._features.push(u.pos):r===3?i._keys.push(u.readString()):r===4&&i._values.push(function(m){for(var b=null,E=m.readVarint()+m.pos;m.pos<E;){var T=m.readVarint()>>3;b=T===1?m.readString():T===2?m.readFloat():T===3?m.readDouble():T===4?m.readVarint64():T===5?m.readVarint():T===6?m.readSVarint():T===7?m.readBoolean():null}return b}(u))}gh.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new cg(this._pbf,i,this.extent,this._keys,this._values)};var hg=Od;function dg(r,i,u){if(r===3){var m=new hg(u,u.readVarint()+u.pos);m.length&&(i[m.name]=m)}}rc.VectorTile=function(r,i){this.layers=r.readFields(dg,{},i)},rc.VectorTileFeature=zp,rc.VectorTileLayer=Od;const pg=rc.VectorTileFeature.types,Rc=Math.pow(2,13);function yh(r,i,u,m,b,E,T,D){r.emplaceBack(i,u,2*Math.floor(m*Rc)+T,b*Rc*2,E*Rc*2,Math.round(D))}class Dp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new w,this.indexArray=new Ee,this.programConfigurations=new wo(i.layers,i.zoom),this.segments=new Ce,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){this.features=[],this.hasPattern=Mp("fill-extrusion",this.layers,u);for(const{feature:b,id:E,index:T,sourceLayerIndex:D}of i){const U=this.layers[0]._featureFilter.needGeometry,V=zo(b,U);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),V,m))continue;const G={id:E,sourceLayerIndex:D,index:T,geometry:U?V.geometry:Ga(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(Pp("fill-extrusion",this.layers,G,this.zoom,u)):this.addFeature(G,G.geometry,T,m,{}),u.featureIndex.insert(b,G.geometry,T,D,this.index,!0)}}addFeatures(i,u,m){for(const b of this.features){const{geometry:E}=b;this.addFeature(b,E,b.index,u,m)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lg),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,m,b,E){for(const T of Xh(u,500)){let D=0;for(const $ of T)D+=$.length;let U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const $ of T){if($.length===0||mg($))continue;let ie=0;for(let pe=0;pe<$.length;pe++){const ve=$[pe];if(pe>=1){const Be=$[pe-1];if(!fg(ve,Be)){U.vertexLength+4>Ce.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Qe=ve.sub(Be)._perp()._unit(),nt=Be.dist(ve);ie+nt>32768&&(ie=0),yh(this.layoutVertexArray,ve.x,ve.y,Qe.x,Qe.y,0,0,ie),yh(this.layoutVertexArray,ve.x,ve.y,Qe.x,Qe.y,0,1,ie),ie+=nt,yh(this.layoutVertexArray,Be.x,Be.y,Qe.x,Qe.y,0,0,ie),yh(this.layoutVertexArray,Be.x,Be.y,Qe.x,Qe.y,0,1,ie);const rt=U.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+D>Ce.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),pg[i.type]!=="Polygon")continue;const V=[],G=[],q=U.vertexLength;for(const $ of T)if($.length!==0){$!==T[0]&&G.push(V.length/2);for(let ie=0;ie<$.length;ie++){const pe=$[ie];yh(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),V.push(pe.x),V.push(pe.y)}}const K=dh(V,G);for(let $=0;$<K.length;$+=3)this.indexArray.emplaceBack(q+K[$],q+K[$+2],q+K[$+1]);U.primitiveLength+=K.length/3,U.vertexLength+=D}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,E,b)}}function fg(r,i){return r.x===i.x&&(r.x<0||r.x>er)||r.y===i.y&&(r.y<0||r.y>er)}function mg(r){return r.every(i=>i.x<0)||r.every(i=>i.x>er)||r.every(i=>i.y<0)||r.every(i=>i.y>er)}Si("FillExtrusionBucket",Dp,{omit:["layers","features"]});var gg={paint:new Qr({"fill-extrusion-opacity":new Bi(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ci(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bi(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bi(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _a(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ci(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ci(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bi(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function _h(r,i){return r.x*i.x+r.y*i.y}function Ea(r,i){if(r.length===1){let u=0;const m=i[u++];let b;for(;!b||m.equals(b);)if(b=i[u++],!b)return 1/0;for(;u<i.length;u++){const E=i[u],T=r[0],D=b.sub(m),U=E.sub(m),V=T.sub(m),G=_h(D,D),q=_h(D,U),K=_h(U,U),$=_h(V,D),ie=_h(V,U),pe=G*K-q*q,ve=(K*$-q*ie)/pe,Be=(G*ie-q*$)/pe,Qe=m.z*(1-ve-Be)+b.z*ve+E.z*Be;if(isFinite(Qe))return Qe}return 1/0}{let u=1/0;for(const m of i)u=Math.min(u,m.z);return u}}const yg=mi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Cf}=yg,kf=mi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_g}=kf,Mf=rc.VectorTileFeature.types,vg=Math.cos(Math.PI/180*37.5),Pf=Math.pow(2,14)/.5;class Rp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new P,this.layoutVertexArray2=new F,this.indexArray=new Ee,this.programConfigurations=new wo(i.layers,i.zoom),this.segments=new Ce,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){this.hasPattern=Mp("line",this.layers,u);const b=this.layers[0].layout.get("line-sort-key"),E=!b.isConstant(),T=[];for(const{feature:D,id:U,index:V,sourceLayerIndex:G}of i){const q=this.layers[0]._featureFilter.needGeometry,K=zo(D,q);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),K,m))continue;const $=E?b.evaluate(K,{},m):void 0,ie={id:U,properties:D.properties,type:D.type,sourceLayerIndex:G,index:V,geometry:q?K.geometry:Ga(D),patterns:{},sortKey:$};T.push(ie)}E&&T.sort((D,U)=>D.sortKey-U.sortKey);for(const D of T){const{geometry:U,index:V,sourceLayerIndex:G}=D;if(this.hasPattern){const q=Pp("line",this.layers,D,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(D,U,V,m,{});u.featureIndex.insert(i[V].feature,U,V,G,this.index)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}addFeatures(i,u,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,_g)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Cf),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,m,b,E){const T=this.layers[0].layout,D=T.get("line-join").evaluate(i,{}),U=T.get("line-cap"),V=T.get("line-miter-limit"),G=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const q of u)this.addLine(q,i,D,U,V,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,E,b)}addLine(i,u,m,b,E,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<i.length-1;Be++)this.totalDistance+=i[Be].dist(i[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=Mf[u.type]==="Polygon";let U=i.length;for(;U>=2&&i[U-1].equals(i[U-2]);)U--;let V=0;for(;V<U-1&&i[V].equals(i[V+1]);)V++;if(U<(D?3:2))return;m==="bevel"&&(E=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let K,$,ie,pe,ve;this.e1=this.e2=-1,D&&(K=i[U-2],ve=i[V].sub(K)._unit()._perp());for(let Be=V;Be<U;Be++){if(ie=Be===U-1?D?i[V+1]:void 0:i[Be+1],ie&&i[Be].equals(ie))continue;ve&&(pe=ve),K&&($=K),K=i[Be],ve=ie?ie.sub(K)._unit()._perp():pe,pe=pe||ve;let Qe=pe.add(ve);Qe.x===0&&Qe.y===0||Qe._unit();const nt=pe.x*ve.x+pe.y*ve.y,rt=Qe.x*ve.x+Qe.y*ve.y,vt=rt!==0?1/rt:1/0,ot=2*Math.sqrt(2-2*rt),Kt=rt<vg&&$&&ie,Wt=pe.x*ve.y-pe.y*ve.x>0;if(Kt&&Be>V){const Nt=K.dist($);if(Nt>2*G){const $t=K.sub(K.sub($)._mult(G/Nt)._round());this.updateDistance($,$t),this.addCurrentVertex($t,pe,0,0,q),$=$t}}const Pt=$&&ie;let Zt=Pt?m:D?"butt":b;if(Pt&&Zt==="round"&&(vt<T?Zt="miter":vt<=2&&(Zt="fakeround")),Zt==="miter"&&vt>E&&(Zt="bevel"),Zt==="bevel"&&(vt>2&&(Zt="flipbevel"),vt<E&&(Zt="miter")),$&&this.updateDistance($,K),Zt==="miter")Qe._mult(vt),this.addCurrentVertex(K,Qe,0,0,q);else if(Zt==="flipbevel"){if(vt>100)Qe=ve.mult(-1);else{const Nt=vt*pe.add(ve).mag()/pe.sub(ve).mag();Qe._perp()._mult(Nt*(Wt?-1:1))}this.addCurrentVertex(K,Qe,0,0,q),this.addCurrentVertex(K,Qe.mult(-1),0,0,q)}else if(Zt==="bevel"||Zt==="fakeround"){const Nt=-Math.sqrt(vt*vt-1),$t=Wt?Nt:0,Bt=Wt?0:Nt;if($&&this.addCurrentVertex(K,pe,$t,Bt,q),Zt==="fakeround"){const Vt=Math.round(180*ot/Math.PI/20);for(let ki=1;ki<Vt;ki++){let Ai=ki/Vt;if(Ai!==.5){const un=Ai-.5;Ai+=Ai*un*(Ai-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*un*un+(.848013+nt*(.215638*nt-1.06021)))}const on=ve.sub(pe)._mult(Ai)._add(pe)._unit()._mult(Wt?-1:1);this.addHalfVertex(K,on.x,on.y,!1,Wt,0,q)}}ie&&this.addCurrentVertex(K,ve,-$t,-Bt,q)}else if(Zt==="butt")this.addCurrentVertex(K,Qe,0,0,q);else if(Zt==="square"){const Nt=$?1:-1;this.addCurrentVertex(K,Qe,Nt,Nt,q)}else Zt==="round"&&($&&(this.addCurrentVertex(K,pe,0,0,q),this.addCurrentVertex(K,pe,1,1,q,!0)),ie&&(this.addCurrentVertex(K,ve,-1,-1,q,!0),this.addCurrentVertex(K,ve,0,0,q)));if(Kt&&Be<U-1){const Nt=K.dist(ie);if(Nt>2*G){const $t=K.add(ie.sub(K)._mult(G/Nt)._round());this.updateDistance(K,$t),this.addCurrentVertex($t,ve,0,0,q),K=$t}}}}addCurrentVertex(i,u,m,b,E,T=!1){const D=u.y*b-u.x,U=-u.y-u.x*b;this.addHalfVertex(i,u.x+u.y*m,u.y-u.x*m,T,!1,m,E),this.addHalfVertex(i,D,U,T,!0,-b,E),this.distance>Pf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(i,u,m,b,E,T))}addHalfVertex({x:i,y:u},m,b,E,T,D,U){const V=.5*(this.lineClips?this.scaledDistance*(Pf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(E?1:0),(u<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(D===0?0:D<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=U.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),U.primitiveLength++),T?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,u){this.distance+=i.dist(u),this.updateScaledDistance()}}Si("LineBucket",Rp,{omit:["layers","patternFeatures"]});const Lf=new Qr({"line-cap":new Bi(Ze.layout_line["line-cap"]),"line-join":new ci(Ze.layout_line["line-join"]),"line-miter-limit":new Bi(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Bi(Ze.layout_line["line-round-limit"]),"line-sort-key":new ci(Ze.layout_line["line-sort-key"])});var zf={paint:new Qr({"line-opacity":new ci(Ze.paint_line["line-opacity"]),"line-color":new ci(Ze.paint_line["line-color"]),"line-translate":new Bi(Ze.paint_line["line-translate"]),"line-translate-anchor":new Bi(Ze.paint_line["line-translate-anchor"]),"line-width":new ci(Ze.paint_line["line-width"]),"line-gap-width":new ci(Ze.paint_line["line-gap-width"]),"line-offset":new ci(Ze.paint_line["line-offset"]),"line-blur":new ci(Ze.paint_line["line-blur"]),"line-dasharray":new ra(Ze.paint_line["line-dasharray"]),"line-pattern":new _a(Ze.paint_line["line-pattern"]),"line-gradient":new Co(Ze.paint_line["line-gradient"])}),layout:Lf};const Df=new class extends ci{possiblyEvaluate(r,i){return i=new Vr(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(r,i)}evaluate(r,i,u,m){return i=ee({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(r,i,u,m)}}(zf.paint.properties["line-width"].specification);function vh(r,i){return i>0?i+2*r:r}Df.useIntegerZoom=!0;const Rf=mi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Of=mi([{name:"a_projected_pos",components:3,type:"Float32"}],4);mi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Bd=mi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);mi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jr=mi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Bf=mi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Tu(r,i,u){return r.sections.forEach(m=>{m.text=function(b,E,T){const D=E.layout.get("text-transform").evaluate(T,{});return D==="uppercase"?b=b.toLocaleUpperCase():D==="lowercase"&&(b=b.toLocaleLowerCase()),Yr.applyArabicShaping&&(b=Yr.applyArabicShaping(b)),b}(m.text,i,u)}),r}mi([{name:"triangle",components:3,type:"Uint16"}]),mi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),mi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),mi([{type:"Float32",name:"offsetX"}]),mi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Hl={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var aa=24,Op=Zr,Ff=function(r,i,u,m,b){var E,T,D=8*b-m-1,U=(1<<D)-1,V=U>>1,G=-7,q=u?b-1:0,K=u?-1:1,$=r[i+q];for(q+=K,E=$&(1<<-G)-1,$>>=-G,G+=D;G>0;E=256*E+r[i+q],q+=K,G-=8);for(T=E&(1<<-G)-1,E>>=-G,G+=m;G>0;T=256*T+r[i+q],q+=K,G-=8);if(E===0)E=1-V;else{if(E===U)return T?NaN:1/0*($?-1:1);T+=Math.pow(2,m),E-=V}return($?-1:1)*T*Math.pow(2,E-m)},Uf=function(r,i,u,m,b,E){var T,D,U,V=8*E-b-1,G=(1<<V)-1,q=G>>1,K=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=m?0:E-1,ie=m?1:-1,pe=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(D=isNaN(i)?1:0,T=G):(T=Math.floor(Math.log(i)/Math.LN2),i*(U=Math.pow(2,-T))<1&&(T--,U*=2),(i+=T+q>=1?K/U:K*Math.pow(2,1-q))*U>=2&&(T++,U/=2),T+q>=G?(D=0,T=G):T+q>=1?(D=(i*U-1)*Math.pow(2,b),T+=q):(D=i*Math.pow(2,q-1)*Math.pow(2,b),T=0));b>=8;r[u+$]=255&D,$+=ie,D/=256,b-=8);for(T=T<<b|D,V+=b;V>0;r[u+$]=255&T,$+=ie,T/=256,V-=8);r[u+$-ie]|=128*pe};function Zr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var oc,Bp=4294967296,Nf=1/Bp,Vf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Au(r){return r.type===Zr.Bytes?r.readVarint()+r.pos:r.pos+1}function Cu(r,i,u){return u?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function Oc(r,i,u){var m=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));u.realloc(m);for(var b=u.pos-1;b>=r;b--)u.buf[b+m]=u.buf[b]}function jf(r,i){for(var u=0;u<r.length;u++)i.writeVarint(r[u])}function bg(r,i){for(var u=0;u<r.length;u++)i.writeSVarint(r[u])}function xg(r,i){for(var u=0;u<r.length;u++)i.writeFloat(r[u])}function wg(r,i){for(var u=0;u<r.length;u++)i.writeDouble(r[u])}function qf(r,i){for(var u=0;u<r.length;u++)i.writeBoolean(r[u])}function Fd(r,i){for(var u=0;u<r.length;u++)i.writeFixed32(r[u])}function Kh(r,i){for(var u=0;u<r.length;u++)i.writeSFixed32(r[u])}function Jh(r,i){for(var u=0;u<r.length;u++)i.writeFixed64(r[u])}function fs(r,i){for(var u=0;u<r.length;u++)i.writeSFixed64(r[u])}function ku(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function Oo(r,i,u){r[u]=i,r[u+1]=i>>>8,r[u+2]=i>>>16,r[u+3]=i>>>24}function Yh(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function Ud(r,i,u){r===1&&u.readMessage(Qa,i)}function Qa(r,i,u){if(r===3){const{id:m,bitmap:b,width:E,height:T,left:D,top:U,advance:V}=u.readMessage(Gf,{});i.push({id:m,bitmap:new Vh({width:E+6,height:T+6},b),metrics:{width:E,height:T,left:D,top:U,advance:V}})}}function Gf(r,i,u){r===1?i.id=u.readVarint():r===2?i.bitmap=u.readBytes():r===3?i.width=u.readVarint():r===4?i.height=u.readVarint():r===5?i.left=u.readSVarint():r===6?i.top=u.readSVarint():r===7&&(i.advance=u.readVarint())}function Fp(r){let i=0,u=0;for(const T of r)i+=T.w*T.h,u=Math.max(u,T.w);r.sort((T,D)=>D.h-T.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let b=0,E=0;for(const T of r)for(let D=m.length-1;D>=0;D--){const U=m[D];if(!(T.w>U.w||T.h>U.h)){if(T.x=U.x,T.y=U.y,E=Math.max(E,T.y+T.h),b=Math.max(b,T.x+T.w),T.w===U.w&&T.h===U.h){const V=m.pop();D<m.length&&(m[D]=V)}else T.h===U.h?(U.x+=T.w,U.w-=T.w):T.w===U.w?(U.y+=T.h,U.h-=T.h):(m.push({x:U.x+T.w,y:U.y,w:U.w-T.w,h:T.h}),U.y+=T.h,U.h-=T.h);break}}return{w:b,h:E,fill:i/(b*E)||0}}Zr.prototype={destroy:function(){this.buf=null},readFields:function(r,i,u){for(u=u||this.length;this.pos<u;){var m=this.readVarint(),b=m>>3,E=this.pos;this.type=7&m,r(b,i,this),this.pos===E&&this.skip(m)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=ku(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Yh(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ku(this.buf,this.pos)+ku(this.buf,this.pos+4)*Bp;return this.pos+=8,r},readSFixed64:function(){var r=ku(this.buf,this.pos)+Yh(this.buf,this.pos+4)*Bp;return this.pos+=8,r},readFloat:function(){var r=Ff(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Ff(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,u,m=this.buf;return i=127&(u=m[this.pos++]),u<128?i:(i|=(127&(u=m[this.pos++]))<<7,u<128?i:(i|=(127&(u=m[this.pos++]))<<14,u<128?i:(i|=(127&(u=m[this.pos++]))<<21,u<128?i:function(b,E,T){var D,U,V=T.buf;if(D=(112&(U=V[T.pos++]))>>4,U<128||(D|=(127&(U=V[T.pos++]))<<3,U<128)||(D|=(127&(U=V[T.pos++]))<<10,U<128)||(D|=(127&(U=V[T.pos++]))<<17,U<128)||(D|=(127&(U=V[T.pos++]))<<24,U<128)||(D|=(1&(U=V[T.pos++]))<<31,U<128))return Cu(b,D,E);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(u=m[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&Vf?function(u,m,b){return Vf.decode(u.subarray(m,b))}(this.buf,i,r):function(u,m,b){for(var E="",T=m;T<b;){var D,U,V,G=u[T],q=null,K=G>239?4:G>223?3:G>191?2:1;if(T+K>b)break;K===1?G<128&&(q=G):K===2?(192&(D=u[T+1]))==128&&(q=(31&G)<<6|63&D)<=127&&(q=null):K===3?(U=u[T+2],(192&(D=u[T+1]))==128&&(192&U)==128&&((q=(15&G)<<12|(63&D)<<6|63&U)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(U=u[T+2],V=u[T+3],(192&(D=u[T+1]))==128&&(192&U)==128&&(192&V)==128&&((q=(15&G)<<18|(63&D)<<12|(63&U)<<6|63&V)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,E+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),E+=String.fromCharCode(q),T+=K}return E}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==Zr.Bytes)return r.push(this.readVarint(i));var u=Au(this);for(r=r||[];this.pos<u;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==Zr.Bytes)return r.push(this.readSVarint());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Zr.Bytes)return r.push(this.readBoolean());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Zr.Bytes)return r.push(this.readFloat());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Zr.Bytes)return r.push(this.readDouble());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Zr.Bytes)return r.push(this.readFixed32());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Zr.Bytes)return r.push(this.readSFixed32());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Zr.Bytes)return r.push(this.readFixed64());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Zr.Bytes)return r.push(this.readSFixed64());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Zr.Fixed32)this.pos+=4;else{if(i!==Zr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var u=new Uint8Array(i);u.set(this.buf),this.buf=u,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Oo(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Oo(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Oo(this.buf,-1&r,this.pos),Oo(this.buf,Math.floor(r*Nf),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Oo(this.buf,-1&r,this.pos),Oo(this.buf,Math.floor(r*Nf),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,u){var m,b;if(i>=0?(m=i%4294967296|0,b=i/4294967296|0):(b=~(-i/4294967296),4294967295^(m=~(-i%4294967296))?m=m+1|0:(m=0,b=b+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(E,T,D){D.buf[D.pos++]=127&E|128,E>>>=7,D.buf[D.pos++]=127&E|128,E>>>=7,D.buf[D.pos++]=127&E|128,E>>>=7,D.buf[D.pos++]=127&E|128,D.buf[D.pos]=127&(E>>>=7)}(m,0,u),function(E,T){var D=(7&E)<<4;T.buf[T.pos++]|=D|((E>>>=3)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E)))))}(b,u)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(m,b,E){for(var T,D,U=0;U<b.length;U++){if((T=b.charCodeAt(U))>55295&&T<57344){if(!D){T>56319||U+1===b.length?(m[E++]=239,m[E++]=191,m[E++]=189):D=T;continue}if(T<56320){m[E++]=239,m[E++]=191,m[E++]=189,D=T;continue}T=D-55296<<10|T-56320|65536,D=null}else D&&(m[E++]=239,m[E++]=191,m[E++]=189,D=null);T<128?m[E++]=T:(T<2048?m[E++]=T>>6|192:(T<65536?m[E++]=T>>12|224:(m[E++]=T>>18|240,m[E++]=T>>12&63|128),m[E++]=T>>6&63|128),m[E++]=63&T|128)}return E}(this.buf,r,this.pos);var u=this.pos-i;u>=128&&Oc(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeFloat:function(r){this.realloc(4),Uf(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Uf(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var u=0;u<i;u++)this.buf[this.pos++]=r[u]},writeRawMessage:function(r,i){this.pos++;var u=this.pos;r(i,this);var m=this.pos-u;m>=128&&Oc(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeMessage:function(r,i,u){this.writeTag(r,Zr.Bytes),this.writeRawMessage(i,u)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,jf,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,bg,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,qf,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,xg,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,wg,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,Fd,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,Kh,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,Jh,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,fs,i)},writeBytesField:function(r,i){this.writeTag(r,Zr.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,Zr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,Zr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,Zr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,Zr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,Zr.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,Zr.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,Zr.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,Zr.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,Zr.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,Boolean(i))}};class Up{constructor(i,{pixelRatio:u,version:m,stretchX:b,stretchY:E,content:T}){this.paddedRect=i,this.pixelRatio=u,this.stretchX=b,this.stretchY=E,this.content=T,this.version=m}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Np{constructor(i,u){const m={},b={};this.haveRenderCallbacks=[];const E=[];this.addImages(i,m,E),this.addImages(u,b,E);const{w:T,h:D}=Fp(E),U=new Os({width:T||1,height:D||1});for(const V in i){const G=i[V],q=m[V].paddedRect;Os.copy(G.data,U,{x:0,y:0},{x:q.x+1,y:q.y+1},G.data)}for(const V in u){const G=u[V],q=b[V].paddedRect,K=q.x+1,$=q.y+1,ie=G.data.width,pe=G.data.height;Os.copy(G.data,U,{x:0,y:0},{x:K,y:$},G.data),Os.copy(G.data,U,{x:0,y:pe-1},{x:K,y:$-1},{width:ie,height:1}),Os.copy(G.data,U,{x:0,y:0},{x:K,y:$+pe},{width:ie,height:1}),Os.copy(G.data,U,{x:ie-1,y:0},{x:K-1,y:$},{width:1,height:pe}),Os.copy(G.data,U,{x:0,y:0},{x:K+ie,y:$},{width:1,height:pe})}this.image=U,this.iconPositions=m,this.patternPositions=b}addImages(i,u,m){for(const b in i){const E=i[b],T={x:0,y:0,w:E.data.width+2,h:E.data.height+2};m.push(T),u[b]=new Up(T,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(i,u){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in i.updatedImages)this.patchUpdatedImage(this.iconPositions[m],i.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],i.getImage(m),u)}patchUpdatedImage(i,u,m){if(!i||!u||i.version===u.version)return;i.version=u.version;const[b,E]=i.tl;m.update(u.data,void 0,{x:b,y:E})}}Si("ImagePosition",Up),Si("ImageAtlas",Np),h.WritingMode=void 0,(oc=h.WritingMode||(h.WritingMode={}))[oc.none=0]="none",oc[oc.horizontal=1]="horizontal",oc[oc.vertical=2]="vertical",oc[oc.horizontalOnly=3]="horizontalOnly";const bh=-17;class Bc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,u){const m=new Bc;return m.scale=i||1,m.fontStack=u,m}static forImage(i){const u=new Bc;return u.imageName=i,u}}class xh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u){const m=new xh;for(let b=0;b<i.sections.length;b++){const E=i.sections[b];E.image?m.addImageSection(E):m.addTextSection(E,u)}return m}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let u="";for(let m=0;m<i.length;m++){const b=i.charCodeAt(m+1)||null,E=i.charCodeAt(m-1)||null;u+=b&&Vl(b)&&!Hl[i[m+1]]||E&&Vl(E)&&!Hl[i[m-1]]||!Hl[i[m]]?i[m]:Hl[i[m]]}return u}(this.text)}trim(){let i=0;for(let m=0;m<this.text.length&&Mu[this.text.charCodeAt(m)];m++)i++;let u=this.text.length;for(let m=this.text.length-1;m>=0&&m>=i&&Mu[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const m=new xh;return m.text=this.text.substring(i,u),m.sectionIndex=this.sectionIndex.slice(i,u),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(Bc.forText(i.scale,i.fontStack||u));const m=this.sections.length-1;for(let b=0;b<i.text.length;++b)this.sectionIndex.push(m)}addImageSection(i){const u=i.image?i.image.name:"";if(u.length===0)return void Ne("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Bc.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Ne("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Qh(r,i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe){const ve=xh.fromFeature(r,b);let Be;q===h.WritingMode.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Qe,processStyledBidirectionalText:nt}=Yr;if(Qe&&ve.sections.length===1){Be=[];const ot=Qe(ve.toString(),Nd(ve,V,E,i,m,$,ie));for(const Kt of ot){const Wt=new xh;Wt.text=Kt,Wt.sections=ve.sections;for(let Pt=0;Pt<Kt.length;Pt++)Wt.sectionIndex.push(0);Be.push(Wt)}}else if(nt){Be=[];const ot=nt(ve.text,ve.sectionIndex,Nd(ve,V,E,i,m,$,ie));for(const Kt of ot){const Wt=new xh;Wt.text=Kt[0],Wt.sectionIndex=Kt[1],Wt.sections=ve.sections,Be.push(Wt)}}else Be=function(ot,Kt){const Wt=[],Pt=ot.text;let Zt=0;for(const Nt of Kt)Wt.push(ot.substring(Zt,Nt)),Zt=Nt;return Zt<Pt.length&&Wt.push(ot.substring(Zt,Pt.length)),Wt}(ve,Nd(ve,V,E,i,m,$,ie));const rt=[],vt={positionedLines:rt,text:ve.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(ot,Kt,Wt,Pt,Zt,Nt,$t,Bt,Vt,ki,Ai,on){let un=0,Rn=bh,Kn=0,mr=0;const gr=Bt==="right"?1:Bt==="left"?0:.5;let or=0;for(const Mn of Zt){Mn.trim();const On=Mn.getMaxScale(),Tn=(On-1)*aa,qr={positionedGlyphs:[],lineOffset:0};ot.positionedLines[or]=qr;const Fr=qr.positionedGlyphs;let nr=0;if(!Mn.length()){Rn+=Nt,++or;continue}for(let br=0;br<Mn.length();br++){const ji=Mn.getSection(br),Fo=Mn.getSectionIndex(br),Wr=Mn.getCharCode(br);let go=0,zr=null,sa=null,Wo=null,ms=aa;const Ia=!(Vt===h.WritingMode.horizontal||!Ai&&!Jr(Wr)||Ai&&(Mu[Wr]||(Er=Wr,Mi.Arabic(Er)||Mi["Arabic Supplement"](Er)||Mi["Arabic Extended-A"](Er)||Mi["Arabic Presentation Forms-A"](Er)||Mi["Arabic Presentation Forms-B"](Er))));if(ji.imageName){const Sa=Pt[ji.imageName];if(!Sa)continue;Wo=ji.imageName,ot.iconsInText=ot.iconsInText||!0,sa=Sa.paddedRect;const Uo=Sa.displaySize;ji.scale=ji.scale*aa/on,zr={width:Uo[0],height:Uo[1],left:1,top:-3,advance:Ia?Uo[1]:Uo[0]},go=Tn+(aa-Uo[1]*ji.scale),ms=zr.advance;const gs=Ia?Uo[0]*ji.scale-aa*On:Uo[1]*ji.scale-aa*On;gs>0&&gs>nr&&(nr=gs)}else{const Sa=Wt[ji.fontStack],Uo=Sa&&Sa[Wr];if(Uo&&Uo.rect)sa=Uo.rect,zr=Uo.metrics;else{const gs=Kt[ji.fontStack],dc=gs&&gs[Wr];if(!dc)continue;zr=dc.metrics}go=(On-ji.scale)*aa}Ia?(ot.verticalizable=!0,Fr.push({glyph:Wr,imageName:Wo,x:un,y:Rn+go,vertical:Ia,scale:ji.scale,fontStack:ji.fontStack,sectionIndex:Fo,metrics:zr,rect:sa}),un+=ms*ji.scale+ki):(Fr.push({glyph:Wr,imageName:Wo,x:un,y:Rn+go,vertical:Ia,scale:ji.scale,fontStack:ji.fontStack,sectionIndex:Fo,metrics:zr,rect:sa}),un+=zr.advance*ji.scale+ki)}Fr.length!==0&&(Kn=Math.max(un-ki,Kn),Ig(Fr,0,Fr.length-1,gr,nr)),un=0;const Hn=Nt*On+nr;qr.lineOffset=Math.max(nr,Tn),Rn+=Hn,mr=Math.max(Hn,mr),++or}var Er;const ar=Rn-bh,{horizontalAlign:Ir,verticalAlign:vn}=Vd($t);(function(Mn,On,Tn,qr,Fr,nr,Hn,br,ji){const Fo=(On-Tn)*Fr;let Wr=0;Wr=nr!==Hn?-br*qr-bh:(-qr*ji+.5)*Hn;for(const go of Mn)for(const zr of go.positionedGlyphs)zr.x+=Fo,zr.y+=Wr})(ot.positionedLines,gr,Ir,vn,Kn,mr,Nt,ar,Zt.length),ot.top+=-vn*ar,ot.bottom=ot.top+ar,ot.left+=-Ir*Kn,ot.right=ot.left+Kn}(vt,i,u,m,Be,T,D,U,q,V,K,pe),!function(ot){for(const Kt of ot)if(Kt.positionedGlyphs.length!==0)return!1;return!0}(rt)&&vt}const Mu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vp={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function jp(r,i,u,m,b,E){if(i.imageName){const T=m[i.imageName];return T?T.displaySize[0]*i.scale*aa/E+b:0}{const T=u[i.fontStack],D=T&&T[r];return D?D.metrics.advance*i.scale+b:0}}function qp(r,i,u,m){const b=Math.pow(r-i,2);return m?r<i?b/2:2*b:b+Math.abs(u)*u}function Eg(r,i,u){let m=0;return r===10&&(m-=1e4),u&&(m+=150),r!==40&&r!==65288||(m+=50),i!==41&&i!==65289||(m+=50),m}function Gp(r,i,u,m,b,E){let T=null,D=qp(i,u,b,E);for(const U of m){const V=qp(i-U.x,u,b,E)+U.badness;V<=D&&(T=U,D=V)}return{index:r,x:i,priorBreak:T,badness:D}}function Hp(r){return r?Hp(r.priorBreak).concat(r.index):[]}function Nd(r,i,u,m,b,E,T){if(E!=="point")return[];if(!r)return[];const D=[],U=function(K,$,ie,pe,ve,Be){let Qe=0;for(let nt=0;nt<K.length();nt++){const rt=K.getSection(nt);Qe+=jp(K.getCharCode(nt),rt,pe,ve,$,Be)}return Qe/Math.max(1,Math.ceil(Qe/ie))}(r,i,u,m,b,T),V=r.text.indexOf("\u200B")>=0;let G=0;for(let K=0;K<r.length();K++){const $=r.getSection(K),ie=r.getCharCode(K);if(Mu[ie]||(G+=jp(ie,$,m,b,i,T)),K<r.length()-1){const pe=!((q=ie)<11904||!(Mi["Bopomofo Extended"](q)||Mi.Bopomofo(q)||Mi["CJK Compatibility Forms"](q)||Mi["CJK Compatibility Ideographs"](q)||Mi["CJK Compatibility"](q)||Mi["CJK Radicals Supplement"](q)||Mi["CJK Strokes"](q)||Mi["CJK Symbols and Punctuation"](q)||Mi["CJK Unified Ideographs Extension A"](q)||Mi["CJK Unified Ideographs"](q)||Mi["Enclosed CJK Letters and Months"](q)||Mi["Halfwidth and Fullwidth Forms"](q)||Mi.Hiragana(q)||Mi["Ideographic Description Characters"](q)||Mi["Kangxi Radicals"](q)||Mi["Katakana Phonetic Extensions"](q)||Mi.Katakana(q)||Mi["Vertical Forms"](q)||Mi["Yi Radicals"](q)||Mi["Yi Syllables"](q)));(Vp[ie]||pe||$.imageName)&&D.push(Gp(K+1,G,U,D,Eg(ie,r.getCharCode(K+1),pe&&V),!1))}}var q;return Hp(Gp(r.length(),G,U,D,0,!0))}function Vd(r){let i=.5,u=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function Ig(r,i,u,m,b){if(!m&&!b)return;const E=r[u],T=(r[u].x+E.metrics.advance*E.scale)*m;for(let D=i;D<=u;D++)r[D].x-=T,r[D].y+=b}function Sg(r,i,u){const{horizontalAlign:m,verticalAlign:b}=Vd(u),E=i[0]-r.displaySize[0]*m,T=i[1]-r.displaySize[1]*b;return{image:r,top:T,bottom:T+r.displaySize[1],left:E,right:E+r.displaySize[0]}}function Zp(r,i,u,m,b,E){const T=r.image;let D;if(T.content){const ve=T.content,Be=T.pixelRatio||1;D=[ve[0]/Be,ve[1]/Be,T.displaySize[0]-ve[2]/Be,T.displaySize[1]-ve[3]/Be]}const U=i.left*E,V=i.right*E;let G,q,K,$;u==="width"||u==="both"?($=b[0]+U-m[3],q=b[0]+V+m[1]):($=b[0]+(U+V-T.displaySize[0])/2,q=$+T.displaySize[0]);const ie=i.top*E,pe=i.bottom*E;return u==="height"||u==="both"?(G=b[1]+ie-m[0],K=b[1]+pe+m[2]):(G=b[1]+(ie+pe-T.displaySize[1])/2,K=G+T.displaySize[1]),{image:T,top:G,right:q,bottom:K,left:$,collisionPadding:D}}const Zl=128;function $h(r,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Vr(r+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=u;let E=0;for(;E<m.length&&m[E]<=r;)E++;E=Math.max(0,E-1);let T=E;for(;T<m.length&&m[T]<r+1;)T++;T=Math.min(m.length-1,T);const D=m[E],U=m[T];return u.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:U,interpolationType:b}:{kind:"camera",minZoom:D,maxZoom:U,minSize:u.evaluate(new Vr(D)),maxSize:u.evaluate(new Vr(U)),interpolationType:b}}}class Pu extends Et{constructor(i,u,m,b){super(i,u),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new Pu(this.x,this.y,this.angle,this.segment)}}function ed(r,i,u,m,b){if(i.segment===void 0)return!0;let E=i,T=i.segment+1,D=0;for(;D>-u/2;){if(T--,T<0)return!1;D-=r[T].dist(E),E=r[T]}D+=r[T].dist(r[T+1]),T++;const U=[];let V=0;for(;D<u/2;){const G=r[T],q=r[T+1];if(!q)return!1;let K=r[T-1].angleTo(G)-G.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:D,angleDelta:K}),V+=K;D-U[0].distance>m;)V-=U.shift().angleDelta;if(V>b)return!1;T++,D+=G.dist(q)}return!0}function td(r){let i=0;for(let u=0;u<r.length-1;u++)i+=r[u].dist(r[u+1]);return i}function id(r,i,u){return r?.6*i*u:0}function Fc(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function Tg(r,i,u,m,b,E){const T=id(u,b,E),D=Fc(u,m)*E;let U=0;const V=td(r)/2;for(let G=0;G<r.length-1;G++){const q=r[G],K=r[G+1],$=q.dist(K);if(U+$>V){const ie=(V-U)/$,pe=Ao(q.x,K.x,ie),ve=Ao(q.y,K.y,ie),Be=new Pu(pe,ve,K.angleTo(q),G);return Be._round(),!T||ed(r,Be,D,T,i)?Be:void 0}U+=$}}function Ag(r,i,u,m,b,E,T,D,U){const V=id(m,E,T),G=Fc(m,b),q=G*T,K=r[0].x===0||r[0].x===U||r[0].y===0||r[0].y===U;return i-q<i/4&&(i=q+i/4),Hf(r,K?i/2*D%i:(G/2+2*E)*T*D%i,i,V,u,q,K,!1,U)}function Hf(r,i,u,m,b,E,T,D,U){const V=E/2,G=td(r);let q=0,K=i-u,$=[];for(let ie=0;ie<r.length-1;ie++){const pe=r[ie],ve=r[ie+1],Be=pe.dist(ve),Qe=ve.angleTo(pe);for(;K+u<q+Be;){K+=u;const nt=(K-q)/Be,rt=Ao(pe.x,ve.x,nt),vt=Ao(pe.y,ve.y,nt);if(rt>=0&&rt<U&&vt>=0&&vt<U&&K-V>=0&&K+V<=G){const ot=new Pu(rt,vt,Qe,ie);ot._round(),m&&!ed(r,ot,E,m,b)||$.push(ot)}}q+=Be}return D||$.length||T||($=Hf(r,q/2,u,m,b,E,T,!0,U)),$}function Uc(r,i,u,m,b){const E=[];for(let T=0;T<r.length;T++){const D=r[T];let U;for(let V=0;V<D.length-1;V++){let G=D[V],q=D[V+1];G.x<i&&q.x<i||(G.x<i?G=new Et(i,G.y+(i-G.x)/(q.x-G.x)*(q.y-G.y))._round():q.x<i&&(q=new Et(i,G.y+(i-G.x)/(q.x-G.x)*(q.y-G.y))._round()),G.y<u&&q.y<u||(G.y<u?G=new Et(G.x+(u-G.y)/(q.y-G.y)*(q.x-G.x),u)._round():q.y<u&&(q=new Et(G.x+(u-G.y)/(q.y-G.y)*(q.x-G.x),u)._round()),G.x>=m&&q.x>=m||(G.x>=m?G=new Et(m,G.y+(m-G.x)/(q.x-G.x)*(q.y-G.y))._round():q.x>=m&&(q=new Et(m,G.y+(m-G.x)/(q.x-G.x)*(q.y-G.y))._round()),G.y>=b&&q.y>=b||(G.y>=b?G=new Et(G.x+(b-G.y)/(q.y-G.y)*(q.x-G.x),b)._round():q.y>=b&&(q=new Et(G.x+(b-G.y)/(q.y-G.y)*(q.x-G.x),b)._round()),U&&G.equals(U[U.length-1])||(U=[G],E.push(U)),U.push(q)))))}}return E}function jd(r,i,u,m){const b=[],E=r.image,T=E.pixelRatio,D=E.paddedRect.w-2,U=E.paddedRect.h-2,V=r.right-r.left,G=r.bottom-r.top,q=E.stretchX||[[0,D]],K=E.stretchY||[[0,U]],$=(Nt,$t)=>Nt+$t[1]-$t[0],ie=q.reduce($,0),pe=K.reduce($,0),ve=D-ie,Be=U-pe;let Qe=0,nt=ie,rt=0,vt=pe,ot=0,Kt=ve,Wt=0,Pt=Be;if(E.content&&m){const Nt=E.content;Qe=nd(q,0,Nt[0]),rt=nd(K,0,Nt[1]),nt=nd(q,Nt[0],Nt[2]),vt=nd(K,Nt[1],Nt[3]),ot=Nt[0]-Qe,Wt=Nt[1]-rt,Kt=Nt[2]-Nt[0]-nt,Pt=Nt[3]-Nt[1]-vt}const Zt=(Nt,$t,Bt,Vt)=>{const ki=rd(Nt.stretch-Qe,nt,V,r.left),Ai=od(Nt.fixed-ot,Kt,Nt.stretch,ie),on=rd($t.stretch-rt,vt,G,r.top),un=od($t.fixed-Wt,Pt,$t.stretch,pe),Rn=rd(Bt.stretch-Qe,nt,V,r.left),Kn=od(Bt.fixed-ot,Kt,Bt.stretch,ie),mr=rd(Vt.stretch-rt,vt,G,r.top),gr=od(Vt.fixed-Wt,Pt,Vt.stretch,pe),or=new Et(ki,on),Er=new Et(Rn,on),ar=new Et(Rn,mr),Ir=new Et(ki,mr),vn=new Et(Ai/T,un/T),Mn=new Et(Kn/T,gr/T),On=i*Math.PI/180;if(On){const Fr=Math.sin(On),nr=Math.cos(On),Hn=[nr,-Fr,Fr,nr];or._matMult(Hn),Er._matMult(Hn),Ir._matMult(Hn),ar._matMult(Hn)}const Tn=Nt.stretch+Nt.fixed,qr=$t.stretch+$t.fixed;return{tl:or,tr:Er,bl:Ir,br:ar,tex:{x:E.paddedRect.x+1+Tn,y:E.paddedRect.y+1+qr,w:Bt.stretch+Bt.fixed-Tn,h:Vt.stretch+Vt.fixed-qr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vn,pixelOffsetBR:Mn,minFontScaleX:Kt/T/V,minFontScaleY:Pt/T/G,isSDF:u}};if(m&&(E.stretchX||E.stretchY)){const Nt=qd(q,ve,ie),$t=qd(K,Be,pe);for(let Bt=0;Bt<Nt.length-1;Bt++){const Vt=Nt[Bt],ki=Nt[Bt+1];for(let Ai=0;Ai<$t.length-1;Ai++)b.push(Zt(Vt,$t[Ai],ki,$t[Ai+1]))}}else b.push(Zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:U+1}));return b}function nd(r,i,u){let m=0;for(const b of r)m+=Math.max(i,Math.min(u,b[1]))-Math.max(i,Math.min(u,b[0]));return m}function qd(r,i,u){const m=[{fixed:-1,stretch:0}];for(const[b,E]of r){const T=m[m.length-1];m.push({fixed:b-T.stretch,stretch:T.stretch}),m.push({fixed:b-T.stretch,stretch:T.stretch+(E-b)})}return m.push({fixed:i+1,stretch:u}),m}function rd(r,i,u,m){return r/i*u+m}function od(r,i,u,m){return r-i*u/m}Si("Anchor",Pu);class Gd{constructor(i,u,m,b,E,T,D,U,V,G){if(this.boxStartIndex=i.length,V){let q=T.top,K=T.bottom;const $=T.collisionPadding;$&&(q-=$[1],K+=$[3]);let ie=K-q;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{let q=T.top*D-U,K=T.bottom*D+U,$=T.left*D-U,ie=T.right*D+U;const pe=T.collisionPadding;if(pe&&($-=pe[0]*D,q-=pe[1]*D,ie+=pe[2]*D,K+=pe[3]*D),G){const ve=new Et($,q),Be=new Et(ie,q),Qe=new Et($,K),nt=new Et(ie,K),rt=G*Math.PI/180;ve._rotate(rt),Be._rotate(rt),Qe._rotate(rt),nt._rotate(rt),$=Math.min(ve.x,Be.x,Qe.x,nt.x),ie=Math.max(ve.x,Be.x,Qe.x,nt.x),q=Math.min(ve.y,Be.y,Qe.y,nt.y),K=Math.max(ve.y,Be.y,Qe.y,nt.y)}i.emplaceBack(u.x,u.y,$,q,ie,K,m,b,E)}this.boxEndIndex=i.length}}class Cg{constructor(i=[],u=kg){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:m}=this,b=u[i];for(;i>0;){const E=i-1>>1,T=u[E];if(m(b,T)>=0)break;u[i]=T,i=E}u[i]=b}_down(i){const{data:u,compare:m}=this,b=this.length>>1,E=u[i];for(;i<b;){let T=1+(i<<1),D=u[T];const U=T+1;if(U<this.length&&m(u[U],D)<0&&(T=U,D=u[U]),m(D,E)>=0)break;u[i]=D,i=T}u[i]=E}}function kg(r,i){return r<i?-1:r>i?1:0}function Hd(r,i=1,u=!1){let m=1/0,b=1/0,E=-1/0,T=-1/0;const D=r[0];for(let $=0;$<D.length;$++){const ie=D[$];(!$||ie.x<m)&&(m=ie.x),(!$||ie.y<b)&&(b=ie.y),(!$||ie.x>E)&&(E=ie.x),(!$||ie.y>T)&&(T=ie.y)}const U=Math.min(E-m,T-b);let V=U/2;const G=new Cg([],Wp);if(U===0)return new Et(m,b);for(let $=m;$<E;$+=U)for(let ie=b;ie<T;ie+=U)G.push(new wh($+V,ie+V,V,r));let q=function($){let ie=0,pe=0,ve=0;const Be=$[0];for(let Qe=0,nt=Be.length,rt=nt-1;Qe<nt;rt=Qe++){const vt=Be[Qe],ot=Be[rt],Kt=vt.x*ot.y-ot.x*vt.y;pe+=(vt.x+ot.x)*Kt,ve+=(vt.y+ot.y)*Kt,ie+=3*Kt}return new wh(pe/ie,ve/ie,0,$)}(r),K=G.length;for(;G.length;){const $=G.pop();($.d>q.d||!q.d)&&(q=$,u&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,K)),$.max-q.d<=i||(V=$.h/2,G.push(new wh($.p.x-V,$.p.y-V,V,r)),G.push(new wh($.p.x+V,$.p.y-V,V,r)),G.push(new wh($.p.x-V,$.p.y+V,V,r)),G.push(new wh($.p.x+V,$.p.y+V,V,r)),K+=4)}return u&&(console.log(`num probes: ${K}`),console.log(`best distance: ${q.d}`)),q.p}function Wp(r,i){return i.max-r.max}function wh(r,i,u,m){this.p=new Et(r,i),this.h=u,this.d=function(b,E){let T=!1,D=1/0;for(let U=0;U<E.length;U++){const V=E[U];for(let G=0,q=V.length,K=q-1;G<q;K=G++){const $=V[G],ie=V[K];$.y>b.y!=ie.y>b.y&&b.x<(ie.x-$.x)*(b.y-$.y)/(ie.y-$.y)+$.x&&(T=!T),D=Math.min(D,Ds(b,$,ie))}}return(T?1:-1)*Math.sqrt(D)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}const ac=Number.POSITIVE_INFINITY;function Eh(r,i){return i[1]!==ac?function(u,m,b){let E=0,T=0;switch(m=Math.abs(m),b=Math.abs(b),u){case"top-right":case"top-left":case"top":T=b-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-b}switch(u){case"top-right":case"bottom-right":case"right":E=-m;break;case"top-left":case"bottom-left":case"left":E=m}return[E,T]}(r,i[0],i[1]):function(u,m){let b=0,E=0;m<0&&(m=0);const T=m/Math.sqrt(2);switch(u){case"top-right":case"top-left":E=T-7;break;case"bottom-right":case"bottom-left":E=7-T;break;case"bottom":E=7-m;break;case"top":E=m-7}switch(u){case"top-right":case"bottom-right":b=-T;break;case"top-left":case"bottom-left":b=T;break;case"left":b=m;break;case"right":b=-m}return[b,E]}(r,i[0])}function Lr(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mg(r,i,u,m,b,E,T,D,U,V,G){let q=E.textMaxSize.evaluate(i,{});q===void 0&&(q=T);const K=r.layers[0].layout,$=K.get("icon-offset").evaluate(i,{},G),ie=Zf(u.horizontal),pe=T/24,ve=r.tilePixelRatio*pe,Be=r.tilePixelRatio*q/24,Qe=r.tilePixelRatio*D,nt=r.tilePixelRatio*K.get("symbol-spacing"),rt=K.get("text-padding")*r.tilePixelRatio,vt=K.get("icon-padding")*r.tilePixelRatio,ot=K.get("text-max-angle")/180*Math.PI,Kt=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Wt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Pt=K.get("symbol-placement"),Zt=nt/2,Nt=K.get("icon-text-fit");let $t;m&&Nt!=="none"&&(r.allowVerticalPlacement&&u.vertical&&($t=Zp(m,u.vertical,Nt,K.get("icon-text-fit-padding"),$,pe)),ie&&(m=Zp(m,ie,Nt,K.get("icon-text-fit-padding"),$,pe)));const Bt=(Vt,ki)=>{ki.x<0||ki.x>=er||ki.y<0||ki.y>=er||function(Ai,on,un,Rn,Kn,mr,gr,or,Er,ar,Ir,vn,Mn,On,Tn,qr,Fr,nr,Hn,br,ji,Fo,Wr,go,zr){const sa=Ai.addToLineVertexArray(on,un);let Wo,ms,Ia,Sa,Uo=0,gs=0,dc=0,qc=0,Gc=-1,Ah=-1;const tl={};let Xl=oi(""),Hc=0,pc=0;if(or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Hc,pc]=or.layout.get("text-offset").evaluate(ji,{},go).map(Ta=>Ta*aa):(Hc=or.layout.get("text-radial-offset").evaluate(ji,{},go)*aa,pc=ac),Ai.allowVerticalPlacement&&Rn.vertical){const Ta=or.layout.get("text-rotate").evaluate(ji,{},go)+90;Ia=new Gd(Er,on,ar,Ir,vn,Rn.vertical,Mn,On,Tn,Ta),gr&&(Sa=new Gd(Er,on,ar,Ir,vn,gr,Fr,nr,Tn,Ta))}if(Kn){const Ta=or.layout.get("icon-rotate").evaluate(ji,{}),es=or.layout.get("icon-text-fit")!=="none",Du=jd(Kn,Ta,Wr,es),Sl=gr?jd(gr,Ta,Wr,es):void 0;ms=new Gd(Er,on,ar,Ir,vn,Kn,Fr,nr,!1,Ta),Uo=4*Du.length;const kh=Ai.iconSizeData;let il=null;kh.kind==="source"?(il=[Zl*or.layout.get("icon-size").evaluate(ji,{})],il[0]>Wl&&Ne(`${Ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):kh.kind==="composite"&&(il=[Zl*Fo.compositeIconSizes[0].evaluate(ji,{},go),Zl*Fo.compositeIconSizes[1].evaluate(ji,{},go)],(il[0]>Wl||il[1]>Wl)&&Ne(`${Ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ai.addSymbols(Ai.icon,Du,il,br,Hn,ji,h.WritingMode.none,on,sa.lineStartIndex,sa.lineLength,-1,go),Gc=Ai.icon.placedSymbolArray.length-1,Sl&&(gs=4*Sl.length,Ai.addSymbols(Ai.icon,Sl,il,br,Hn,ji,h.WritingMode.vertical,on,sa.lineStartIndex,sa.lineLength,-1,go),Ah=Ai.icon.placedSymbolArray.length-1)}const zu=Object.keys(Rn.horizontal);for(const Ta of zu){const es=Rn.horizontal[Ta];if(!Wo){Xl=oi(es.text);const Sl=or.layout.get("text-rotate").evaluate(ji,{},go);Wo=new Gd(Er,on,ar,Ir,vn,es,Mn,On,Tn,Sl)}const Du=es.positionedLines.length===1;if(dc+=Nc(Ai,on,es,mr,or,Tn,ji,qr,sa,Rn.vertical?h.WritingMode.horizontal:h.WritingMode.horizontalOnly,Du?zu:[Ta],tl,Gc,Fo,go),Du)break}Rn.vertical&&(qc+=Nc(Ai,on,Rn.vertical,mr,or,Tn,ji,qr,sa,h.WritingMode.vertical,["vertical"],tl,Ah,Fo,go));const Ch=Wo?Wo.boxStartIndex:Ai.collisionBoxArray.length,Yd=Wo?Wo.boxEndIndex:Ai.collisionBoxArray.length,Qd=Ia?Ia.boxStartIndex:Ai.collisionBoxArray.length,sd=Ia?Ia.boxEndIndex:Ai.collisionBoxArray.length,ld=ms?ms.boxStartIndex:Ai.collisionBoxArray.length,$d=ms?ms.boxEndIndex:Ai.collisionBoxArray.length,ud=Sa?Sa.boxStartIndex:Ai.collisionBoxArray.length,cd=Sa?Sa.boxEndIndex:Ai.collisionBoxArray.length;let $a=-1;const Zc=(Ta,es)=>Ta&&Ta.circleDiameter?Math.max(Ta.circleDiameter,es):es;$a=Zc(Wo,$a),$a=Zc(Ia,$a),$a=Zc(ms,$a),$a=Zc(Sa,$a);const Wc=$a>-1?1:0;Wc&&($a*=zr/aa),Ai.glyphOffsetArray.length>=Vc.MAX_GLYPHS&&Ne("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ji.sortKey!==void 0&&Ai.addToSortKeyRanges(Ai.symbolInstances.length,ji.sortKey),Ai.symbolInstances.emplaceBack(on.x,on.y,tl.right>=0?tl.right:-1,tl.center>=0?tl.center:-1,tl.left>=0?tl.left:-1,tl.vertical||-1,Gc,Ah,Xl,Ch,Yd,Qd,sd,ld,$d,ud,cd,ar,dc,qc,Uo,gs,Wc,0,Mn,Hc,pc,$a)}(r,ki,Vt,u,m,b,$t,r.layers[0],r.collisionBoxArray,i.index,i.sourceLayerIndex,r.index,ve,rt,Kt,U,Qe,vt,Wt,$,i,E,V,G,T)};if(Pt==="line")for(const Vt of Uc(i.geometry,0,0,er,er)){const ki=Ag(Vt,nt,ot,u.vertical||ie,m,24,Be,r.overscaling,er);for(const Ai of ki){const on=ie;on&&Pg(r,on.text,Zt,Ai)||Bt(Vt,Ai)}}else if(Pt==="line-center"){for(const Vt of i.geometry)if(Vt.length>1){const ki=Tg(Vt,ot,u.vertical||ie,m,24,Be);ki&&Bt(Vt,ki)}}else if(i.type==="Polygon")for(const Vt of Xh(i.geometry,0)){const ki=Hd(Vt,16);Bt(Vt[0],new Pu(ki.x,ki.y,0))}else if(i.type==="LineString")for(const Vt of i.geometry)Bt(Vt,new Pu(Vt[0].x,Vt[0].y,0));else if(i.type==="Point")for(const Vt of i.geometry)for(const ki of Vt)Bt([ki],new Pu(ki.x,ki.y,0))}const Wl=32640;function Nc(r,i,u,m,b,E,T,D,U,V,G,q,K,$,ie){const pe=function(Qe,nt,rt,vt,ot,Kt,Wt,Pt){const Zt=vt.layout.get("text-rotate").evaluate(Kt,{})*Math.PI/180,Nt=[];for(const $t of nt.positionedLines)for(const Bt of $t.positionedGlyphs){if(!Bt.rect)continue;const Vt=Bt.rect||{};let ki=4,Ai=!0,on=1,un=0;const Rn=(ot||Pt)&&Bt.vertical,Kn=Bt.metrics.advance*Bt.scale/2;if(Pt&&nt.verticalizable){const Hn=(Bt.scale-1)*aa,br=(aa-Bt.metrics.width*Bt.scale)/2;un=$t.lineOffset/2-(Bt.imageName?-br:Hn)}if(Bt.imageName){const Hn=Wt[Bt.imageName];Ai=Hn.sdf,on=Hn.pixelRatio,ki=1/on}const mr=ot?[Bt.x+Kn,Bt.y]:[0,0];let gr=ot?[0,0]:[Bt.x+Kn+rt[0],Bt.y+rt[1]-un],or=[0,0];Rn&&(or=gr,gr=[0,0]);const Er=(Bt.metrics.left-ki)*Bt.scale-Kn+gr[0],ar=(-Bt.metrics.top-ki)*Bt.scale+gr[1],Ir=Er+Vt.w*Bt.scale/on,vn=ar+Vt.h*Bt.scale/on,Mn=new Et(Er,ar),On=new Et(Ir,ar),Tn=new Et(Er,vn),qr=new Et(Ir,vn);if(Rn){const Hn=new Et(-Kn,Kn-bh),br=-Math.PI/2,ji=12-Kn,Fo=new Et(22-ji,-(Bt.imageName?ji:0)),Wr=new Et(...or);Mn._rotateAround(br,Hn)._add(Fo)._add(Wr),On._rotateAround(br,Hn)._add(Fo)._add(Wr),Tn._rotateAround(br,Hn)._add(Fo)._add(Wr),qr._rotateAround(br,Hn)._add(Fo)._add(Wr)}if(Zt){const Hn=Math.sin(Zt),br=Math.cos(Zt),ji=[br,-Hn,Hn,br];Mn._matMult(ji),On._matMult(ji),Tn._matMult(ji),qr._matMult(ji)}const Fr=new Et(0,0),nr=new Et(0,0);Nt.push({tl:Mn,tr:On,bl:Tn,br:qr,tex:Vt,writingMode:nt.writingMode,glyphOffset:mr,sectionIndex:Bt.sectionIndex,isSDF:Ai,pixelOffsetTL:Fr,pixelOffsetBR:nr,minFontScaleX:0,minFontScaleY:0})}return Nt}(0,u,D,b,E,T,m,r.allowVerticalPlacement),ve=r.textSizeData;let Be=null;ve.kind==="source"?(Be=[Zl*b.layout.get("text-size").evaluate(T,{})],Be[0]>Wl&&Ne(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ve.kind==="composite"&&(Be=[Zl*$.compositeTextSizes[0].evaluate(T,{},ie),Zl*$.compositeTextSizes[1].evaluate(T,{},ie)],(Be[0]>Wl||Be[1]>Wl)&&Ne(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,pe,Be,D,E,T,V,i,U.lineStartIndex,U.lineLength,K,ie);for(const Qe of G)q[Qe]=r.text.placedSymbolArray.length-1;return 4*pe.length}function Zf(r){for(const i in r)return r[i];return null}function Pg(r,i,u,m){const b=r.compareText;if(i in b){const E=b[i];for(let T=E.length-1;T>=0;T--)if(m.dist(E[T])<u)return!0}else b[i]=[];return b[i].push(m),!1}const Lg=rc.VectorTileFeature.types,zg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zd(r,i,u,m,b,E,T,D,U,V,G,q,K){const $=D?Math.min(Wl,Math.round(D[0])):0,ie=D?Math.min(Wl,Math.round(D[1])):0;r.emplaceBack(i,u,Math.round(32*m),Math.round(32*b),E,T,($<<1)+(U?1:0),ie,16*V,16*G,256*q,256*K)}function Xp(r,i,u){r.emplaceBack(i.x,i.y,u),r.emplaceBack(i.x,i.y,u),r.emplaceBack(i.x,i.y,u),r.emplaceBack(i.x,i.y,u)}function Dg(r){for(const i of r.sections)if(Ri(i.text))return!0;return!1}class Wd{constructor(i){this.layoutVertexArray=new H,this.indexArray=new Ee,this.programConfigurations=i,this.segments=new Ce,this.dynamicLayoutVertexArray=new Q,this.opacityVertexArray=new ae,this.placedSymbolArray=new ti}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,u,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Rf.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Of.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,zg,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Si("SymbolBuffers",Wd);class Xd{constructor(i,u,m){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new m,this.segments=new Ce,this.collisionVertexArray=new xe}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Bd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Si("CollisionBuffers",Xd);class Vc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(T=>T.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ic([]),this.placementViewportMatrix=ic([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$h(this.zoom,u["text-size"]),this.iconSizeData=$h(this.zoom,u["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),E=m.get("symbol-z-order");this.canOverlap=lc(m,"text-overlap","text-allow-overlap")!=="never"||lc(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(T=>h.WritingMode[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=i.sourceID}createArrays(){this.text=new Wd(new wo(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Wd(new wo(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Gi,this.lineVertexArray=new Ci,this.symbolInstances=new qt}calculateGlyphDependencies(i,u,m,b,E){for(let T=0;T<i.length;T++)if(u[i.charCodeAt(T)]=!0,(m||b)&&E){const D=Hl[i.charAt(T)];D&&(u[D.charCodeAt(0)]=!0)}}populate(i,u,m){const b=this.layers[0],E=b.layout,T=E.get("text-font"),D=E.get("text-field"),U=E.get("icon-image"),V=(D.value.kind!=="constant"||D.value.value instanceof Te&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),G=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,q=E.get("symbol-sort-key");if(this.features=[],!V&&!G)return;const K=u.iconDependencies,$=u.glyphDependencies,ie=u.availableImages,pe=new Vr(this.zoom);for(const{feature:ve,id:Be,index:Qe,sourceLayerIndex:nt}of i){const rt=b._featureFilter.needGeometry,vt=zo(ve,rt);if(!b._featureFilter.filter(pe,vt,m))continue;let ot,Kt;if(rt||(vt.geometry=Ga(ve)),V){const Pt=b.getValueAndResolveTokens("text-field",vt,m,ie),Zt=Te.factory(Pt);Dg(Zt)&&(this.hasRTLText=!0),(!this.hasRTLText||bu()==="unavailable"||this.hasRTLText&&Yr.isParsed())&&(ot=Tu(Zt,b,vt))}if(G){const Pt=b.getValueAndResolveTokens("icon-image",vt,m,ie);Kt=Pt instanceof we?Pt:we.fromString(Pt)}if(!ot&&!Kt)continue;const Wt=this.sortFeaturesByKey?q.evaluate(vt,{},m):void 0;if(this.features.push({id:Be,text:ot,icon:Kt,index:Qe,sourceLayerIndex:nt,geometry:vt.geometry,properties:ve.properties,type:Lg[ve.type],sortKey:Wt}),Kt&&(K[Kt.name]=!0),ot){const Pt=T.evaluate(vt,{},m).join(","),Zt=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.WritingMode.vertical)>=0;for(const Nt of ot.sections)if(Nt.image)K[Nt.image.name]=!0;else{const $t=_l(ot.toString()),Bt=Nt.fontStack||Pt,Vt=$[Bt]=$[Bt]||{};this.calculateGlyphDependencies(Nt.text,Vt,Zt,this.allowVerticalPlacement,$t)}}}E.get("symbol-placement")==="line"&&(this.features=function(ve){const Be={},Qe={},nt=[];let rt=0;function vt(Pt){nt.push(ve[Pt]),rt++}function ot(Pt,Zt,Nt){const $t=Qe[Pt];return delete Qe[Pt],Qe[Zt]=$t,nt[$t].geometry[0].pop(),nt[$t].geometry[0]=nt[$t].geometry[0].concat(Nt[0]),$t}function Kt(Pt,Zt,Nt){const $t=Be[Zt];return delete Be[Zt],Be[Pt]=$t,nt[$t].geometry[0].shift(),nt[$t].geometry[0]=Nt[0].concat(nt[$t].geometry[0]),$t}function Wt(Pt,Zt,Nt){const $t=Nt?Zt[0][Zt[0].length-1]:Zt[0][0];return`${Pt}:${$t.x}:${$t.y}`}for(let Pt=0;Pt<ve.length;Pt++){const Zt=ve[Pt],Nt=Zt.geometry,$t=Zt.text?Zt.text.toString():null;if(!$t){vt(Pt);continue}const Bt=Wt($t,Nt),Vt=Wt($t,Nt,!0);if(Bt in Qe&&Vt in Be&&Qe[Bt]!==Be[Vt]){const ki=Kt(Bt,Vt,Nt),Ai=ot(Bt,Vt,nt[ki].geometry);delete Be[Bt],delete Qe[Vt],Qe[Wt($t,nt[Ai].geometry,!0)]=Ai,nt[ki].geometry=null}else Bt in Qe?ot(Bt,Vt,Nt):Vt in Be?Kt(Bt,Vt,Nt):(vt(Pt),Be[Bt]=rt-1,Qe[Vt]=rt-1)}return nt.filter(Pt=>Pt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,Be)=>ve.sortKey-Be.sortKey)}update(i,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,u,this.layers,m),this.icon.programConfigurations.updatePaintArrays(i,u,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const m=this.lineVertexArray.length;if(i.segment!==void 0){let b=i.dist(u[i.segment+1]),E=i.dist(u[i.segment]);const T={};for(let D=i.segment+1;D<u.length;D++)T[D]={x:u[D].x,y:u[D].y,tileUnitDistanceFromAnchor:b},D<u.length-1&&(b+=u[D+1].dist(u[D]));for(let D=i.segment||0;D>=0;D--)T[D]={x:u[D].x,y:u[D].y,tileUnitDistanceFromAnchor:E},D>0&&(E+=u[D-1].dist(u[D]));for(let D=0;D<u.length;D++){const U=T[D];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(i,u,m,b,E,T,D,U,V,G,q,K){const $=i.indexArray,ie=i.layoutVertexArray,pe=i.segments.prepareSegment(4*u.length,ie,$,this.canOverlap?T.sortKey:void 0),ve=this.glyphOffsetArray.length,Be=pe.vertexLength,Qe=this.allowVerticalPlacement&&D===h.WritingMode.vertical?Math.PI/2:0,nt=T.text&&T.text.sections;for(let rt=0;rt<u.length;rt++){const{tl:vt,tr:ot,bl:Kt,br:Wt,tex:Pt,pixelOffsetTL:Zt,pixelOffsetBR:Nt,minFontScaleX:$t,minFontScaleY:Bt,glyphOffset:Vt,isSDF:ki,sectionIndex:Ai}=u[rt],on=pe.vertexLength,un=Vt[1];Zd(ie,U.x,U.y,vt.x,un+vt.y,Pt.x,Pt.y,m,ki,Zt.x,Zt.y,$t,Bt),Zd(ie,U.x,U.y,ot.x,un+ot.y,Pt.x+Pt.w,Pt.y,m,ki,Nt.x,Zt.y,$t,Bt),Zd(ie,U.x,U.y,Kt.x,un+Kt.y,Pt.x,Pt.y+Pt.h,m,ki,Zt.x,Nt.y,$t,Bt),Zd(ie,U.x,U.y,Wt.x,un+Wt.y,Pt.x+Pt.w,Pt.y+Pt.h,m,ki,Nt.x,Nt.y,$t,Bt),Xp(i.dynamicLayoutVertexArray,U,Qe),$.emplaceBack(on,on+1,on+2),$.emplaceBack(on+1,on+2,on+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),rt!==u.length-1&&Ai===u[rt+1].sectionIndex||i.programConfigurations.populatePaintArrays(ie.length,T,T.index,{},K,nt&&nt[Ai])}i.placedSymbolArray.emplaceBack(U.x,U.y,ve,this.glyphOffsetArray.length-ve,Be,V,G,U.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],D,0,!1,0,q)}_addCollisionDebugVertex(i,u,m,b,E,T){return u.emplaceBack(0,0),i.emplaceBack(m.x,m.y,b,E,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(i,u,m,b,E,T,D){const U=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),V=U.vertexLength,G=E.layoutVertexArray,q=E.collisionVertexArray,K=D.anchorX,$=D.anchorY;this._addCollisionDebugVertex(G,q,T,K,$,new Et(i,u)),this._addCollisionDebugVertex(G,q,T,K,$,new Et(m,u)),this._addCollisionDebugVertex(G,q,T,K,$,new Et(m,b)),this._addCollisionDebugVertex(G,q,T,K,$,new Et(i,b)),U.vertexLength+=4;const ie=E.indexArray;ie.emplaceBack(V,V+1),ie.emplaceBack(V+1,V+2),ie.emplaceBack(V+2,V+3),ie.emplaceBack(V+3,V),U.primitiveLength+=4}addDebugCollisionBoxes(i,u,m,b){for(let E=i;E<u;E++){const T=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,b?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xd(_e,jr.members,Fe),this.iconCollisionBox=new Xd(_e,jr.members,Fe);for(let i=0;i<this.symbolInstances.length;i++){const u=this.symbolInstances.get(i);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(i,u,m,b,E,T,D,U,V){const G={};for(let q=u;q<m;q++){const K=i.get(q);G.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.textFeatureIndex=K.featureIndex;break}for(let q=b;q<E;q++){const K=i.get(q);G.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.verticalTextFeatureIndex=K.featureIndex;break}for(let q=T;q<D;q++){const K=i.get(q);G.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.iconFeatureIndex=K.featureIndex;break}for(let q=U;q<V;q++){const K=i.get(q);G.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.verticalIconFeatureIndex=K.featureIndex;break}return G}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,u){const m=i.placedSymbolArray.get(u),b=m.vertexStartIndex+4*m.numGlyphs;for(let E=m.vertexStartIndex;E<b;E+=4)i.indexArray.emplaceBack(E,E+1,E+2),i.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),m=Math.cos(i),b=[],E=[],T=[];for(let D=0;D<this.symbolInstances.length;++D){T.push(D);const U=this.symbolInstances.get(D);b.push(0|Math.round(u*U.anchorX+m*U.anchorY)),E.push(U.featureIndex)}return T.sort((D,U)=>b[D]-b[U]||E[U]-E[D]),T}addToSortKeyRanges(i,u){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((b,E,T)=>{b>=0&&T.indexOf(b)===E&&this.addIndicesForPlacedSymbol(this.text,b)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Si("SymbolBucket",Vc,{omit:["layers","collisionBoxArray","features","compareText"]}),Vc.MAX_GLYPHS=65535,Vc.addDynamicAttributes=Xp;const Wf=new Qr({"symbol-placement":new Bi(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Bi(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bi(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ci(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bi(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bi(Ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Bi(Ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Bi(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bi(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bi(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new ci(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Bi(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bi(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new ci(Ze.layout_symbol["icon-image"]),"icon-rotate":new ci(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Bi(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Bi(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new ci(Ze.layout_symbol["icon-offset"]),"icon-anchor":new ci(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bi(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bi(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bi(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new ci(Ze.layout_symbol["text-field"]),"text-font":new ci(Ze.layout_symbol["text-font"]),"text-size":new ci(Ze.layout_symbol["text-size"]),"text-max-width":new ci(Ze.layout_symbol["text-max-width"]),"text-line-height":new Bi(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new ci(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new ci(Ze.layout_symbol["text-justify"]),"text-radial-offset":new ci(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bi(Ze.layout_symbol["text-variable-anchor"]),"text-anchor":new ci(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Bi(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Bi(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new ci(Ze.layout_symbol["text-rotate"]),"text-padding":new Bi(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Bi(Ze.layout_symbol["text-keep-upright"]),"text-transform":new ci(Ze.layout_symbol["text-transform"]),"text-offset":new ci(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Bi(Ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Bi(Ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Bi(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Bi(Ze.layout_symbol["text-optional"])});var Ih={paint:new Qr({"icon-opacity":new ci(Ze.paint_symbol["icon-opacity"]),"icon-color":new ci(Ze.paint_symbol["icon-color"]),"icon-halo-color":new ci(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new ci(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ci(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Bi(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bi(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new ci(Ze.paint_symbol["text-opacity"]),"text-color":new ci(Ze.paint_symbol["text-color"],{runtimeType:ro,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new ci(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new ci(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new ci(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Bi(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Bi(Ze.paint_symbol["text-translate-anchor"])}),layout:Wf};class sc{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:kr,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Si("FormatSectionOverride",sc,{omit:["defaultValue"]});class Sh extends to{constructor(i){super(i,Ih)}recalculate(i,u){if(super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const E of m)b.indexOf(E)<0&&b.push(E);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,u,m,b){const E=this.layout.get(i).evaluate(u,{},m,b),T=this._unevaluatedLayout._values[i];return T.isDataDriven()||us(T.value)||!E?E:function(D,U){return U.replace(/{([^{}]+)}/g,(V,G)=>G in D?String(D[G]):"")}(u.properties,E)}createBucket(i){return new Vc(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of Ih.paint.overridableProperties){if(!Sh.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),m=new sc(u),b=new Xu(m,u.property.specification);let E=null;E=u.value.kind==="constant"||u.value.kind==="source"?new pu("source",b):new Xs("composite",b,u.value.zoomStops,u.value._interpolationType),this.paint._values[i]=new qa(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&Sh.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const m=i.get("text-field"),b=Ih.paint.properties[u];let E=!1;const T=D=>{for(const U of D)if(b.overrides&&b.overrides.hasOverride(U))return void(E=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Te)T(m.value.value.sections);else if(m.value.kind==="source"){const D=V=>{E||(V instanceof lt&&Le(V.value)===To?T(V.value.sections):V instanceof Yt?T(V.sections):V.eachChild(D))},U=m.value;U._styleExpression&&D(U._styleExpression.expression)}return E}}function lc(r,i,u){let m="never";const b=r.get(i);return b?m=b:r.get(u)&&(m="always"),m}var Xf={paint:new Qr({"background-color":new Bi(Ze.paint_background["background-color"]),"background-pattern":new ra(Ze.paint_background["background-pattern"]),"background-opacity":new Bi(Ze.paint_background["background-opacity"])})},Bo={paint:new Qr({"raster-opacity":new Bi(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bi(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bi(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bi(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Bi(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Bi(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Bi(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Bi(Ze.paint_raster["raster-fade-duration"])})};class eo extends to{constructor(i){super(i,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Kf={circle:class extends to{constructor(r){super(r,Iu)}createBucket(r){return new Za(r)}queryRadius(r){const i=r;return Rs("circle-radius",this,i)+Rs("circle-stroke-width",this,i)+ur(this.paint.get("circle-translate"))}queryIntersectsFeature(r,i,u,m,b,E,T,D){const U=xa(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,T),V=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u),G=this.paint.get("circle-pitch-alignment")==="map",q=G?U:function($,ie){return $.map(pe=>Pc(pe,ie))}(U,D),K=G?V*T:V;for(const $ of m)for(const ie of $){const pe=G?ie:Pc(ie,D);let ve=K;const Be=wl([],[ie.x,ie.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=Be[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=E.cameraToCenterDistance/Be[3]),$u(q,pe,ve))return!0}return!1}},heatmap:class extends to{constructor(r){super(r,Lc),this._updateColorRamp()}createBucket(r){return new zd(r)}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends to{constructor(r){super(r,Qm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends to{constructor(r){super(r,Tf)}recalculate(r,i){super.recalculate(r,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Lp(r)}queryRadius(){return ur(this.paint.get("fill-translate"))}queryIntersectsFeature(r,i,u,m,b,E,T){return bl(xa(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,T),m)}isTileClipped(){return!0}},"fill-extrusion":class extends to{constructor(r){super(r,gg)}createBucket(r){return new Dp(r)}queryRadius(){return ur(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,i,u,m,b,E,T,D){const U=xa(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,T),V=this.paint.get("fill-extrusion-height").evaluate(i,u),G=this.paint.get("fill-extrusion-base").evaluate(i,u),q=function($,ie,pe,ve){const Be=[];for(const Qe of $){const nt=[Qe.x,Qe.y,0,1];wl(nt,nt,ie),Be.push(new Et(nt[0]/nt[3],nt[1]/nt[3]))}return Be}(U,D),K=function($,ie,pe,ve){const Be=[],Qe=[],nt=ve[8]*ie,rt=ve[9]*ie,vt=ve[10]*ie,ot=ve[11]*ie,Kt=ve[8]*pe,Wt=ve[9]*pe,Pt=ve[10]*pe,Zt=ve[11]*pe;for(const Nt of $){const $t=[],Bt=[];for(const Vt of Nt){const ki=Vt.x,Ai=Vt.y,on=ve[0]*ki+ve[4]*Ai+ve[12],un=ve[1]*ki+ve[5]*Ai+ve[13],Rn=ve[2]*ki+ve[6]*Ai+ve[14],Kn=ve[3]*ki+ve[7]*Ai+ve[15],mr=Rn+vt,gr=Kn+ot,or=on+Kt,Er=un+Wt,ar=Rn+Pt,Ir=Kn+Zt,vn=new Et((on+nt)/gr,(un+rt)/gr);vn.z=mr/gr,$t.push(vn);const Mn=new Et(or/Ir,Er/Ir);Mn.z=ar/Ir,Bt.push(Mn)}Be.push($t),Qe.push(Bt)}return[Be,Qe]}(m,G,V,D);return function($,ie,pe){let ve=1/0;bl(pe,ie)&&(ve=Ea(pe,ie[0]));for(let Be=0;Be<ie.length;Be++){const Qe=ie[Be],nt=$[Be];for(let rt=0;rt<Qe.length-1;rt++){const vt=Qe[rt],ot=[vt,Qe[rt+1],nt[rt+1],nt[rt],vt];Qu(pe,ot)&&(ve=Math.min(ve,Ea(pe,ot)))}}return ve!==1/0&&ve}(K[0],K[1],q)}},line:class extends to{constructor(r){super(r,zf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){r==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ul,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,i){super.recalculate(r,i),this.paint._values["line-floorwidth"]=Df.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Rp(r)}queryRadius(r){const i=r,u=vh(Rs("line-width",this,i),Rs("line-gap-width",this,i)),m=Rs("line-offset",this,i);return u/2+Math.abs(m)+ur(this.paint.get("line-translate"))}queryIntersectsFeature(r,i,u,m,b,E,T){const D=xa(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,T),U=T/2*vh(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),V=this.paint.get("line-offset").evaluate(i,u);return V&&(m=function(G,q){const K=[];for(let $=0;$<G.length;$++){const ie=G[$],pe=[];for(let ve=0;ve<ie.length;ve++){const Be=ie[ve-1],Qe=ie[ve],nt=ie[ve+1],rt=ve===0?new Et(0,0):Qe.sub(Be)._unit()._perp(),vt=ve===ie.length-1?new Et(0,0):nt.sub(Qe)._unit()._perp(),ot=rt._add(vt)._unit(),Kt=ot.x*vt.x+ot.y*vt.y;Kt!==0&&ot._mult(1/Kt),pe.push(ot._mult(q)._add(Qe))}K.push(pe)}return K}(m,V*T)),function(G,q,K){for(let $=0;$<q.length;$++){const ie=q[$];if(G.length>=3){for(let pe=0;pe<ie.length;pe++)if(Wa(G,ie[pe]))return!0}if(ec(G,ie,K))return!0}return!1}(D,m,U)}isTileClipped(){return!0}},symbol:Sh,background:class extends to{constructor(r){super(r,Xf)}},raster:class extends to{constructor(r){super(r,Bo)}}};class Jf{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Kp=63710088e-1;class Eo{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Eo(Y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,m=this.lat*u,b=i.lat*u,E=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((i.lng-this.lng)*u);return Kp*Math.acos(Math.min(E,1))}toBounds(i=0){const u=360*i/40075017,m=u/Math.cos(Math.PI/180*this.lat);return new uc(new Eo(this.lng-m,this.lat-u),new Eo(this.lng+m,this.lat+u))}static convert(i){if(i instanceof Eo)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Eo(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Eo(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class uc{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Eo?new Eo(i.lng,i.lat):Eo.convert(i),this}setSouthWest(i){return this._sw=i instanceof Eo?new Eo(i.lng,i.lat):Eo.convert(i),this}extend(i){const u=this._sw,m=this._ne;let b,E;if(i instanceof Eo)b=i,E=i;else{if(!(i instanceof uc))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(uc.convert(i)):this.extend(Eo.convert(i)):this;if(b=i._sw,E=i._ne,!b||!E)return this}return u||m?(u.lng=Math.min(b.lng,u.lng),u.lat=Math.min(b.lat,u.lat),m.lng=Math.max(E.lng,m.lng),m.lat=Math.max(E.lat,m.lat)):(this._sw=new Eo(b.lng,b.lat),this._ne=new Eo(E.lng,E.lat)),this}getCenter(){return new Eo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Eo(this.getWest(),this.getNorth())}getSouthEast(){return new Eo(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:m}=Eo.convert(i);let b=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}static convert(i){return i instanceof uc?i:i&&new uc(i)}}const Kd=2*Math.PI*Kp;function cc(r){return Kd*Math.cos(r*Math.PI/180)}function hc(r){return(180+r)/360}function Jp(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function ko(r,i){return r/cc(i)}function jc(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class el{constructor(i,u,m=0){this.x=+i,this.y=+u,this.z=+m}static fromLngLat(i,u=0){const m=Eo.convert(i);return new el(hc(m.lng),Jp(m.lat),ko(u,m.lat))}toLngLat(){return new Eo(360*this.x-180,jc(this.y))}toAltitude(){return this.z*cc(jc(this.y))}meterInMercatorCoordinateUnits(){return 1/Kd*(i=jc(this.y),1/Math.cos(i*Math.PI/180));var i}}function ad(r,i,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[r*m-2*Math.PI*6378137/2,i*m-2*Math.PI*6378137/2]}class Th{constructor(i,u,m){this.z=i,this.x=u,this.y=m,this.key=Bs(0,i,i,u,m)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u,m){const b=(T=this.y,D=this.z,U=ad(256*(E=this.x),256*(T=Math.pow(2,D)-T-1),D),V=ad(256*(E+1),256*(T+1),D),U[0]+","+U[1]+","+V[0]+","+V[1]);var E,T,D,U,V;const G=function(q,K,$){let ie,pe="";for(let ve=q;ve>0;ve--)ie=1<<ve-1,pe+=(K&ie?1:0)+($&ie?2:0);return pe}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,b)}getTilePoint(i){const u=Math.pow(2,this.z);return new Et((i.x*u-this.x)*er,(i.y*u-this.y)*er)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Jd{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Bs(i,u.z,u.z,u.x,u.y)}}class Fa{constructor(i,u,m,b,E){this.overscaledZ=i,this.wrap=u,this.canonical=new Th(m,+b,+E),this.key=Bs(u,i,m,b,E)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const u=this.canonical.z-i;return i>this.canonical.z?new Fa(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fa(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u){const m=this.canonical.z-i;return i>this.canonical.z?Bs(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y):Bs(this.wrap*+u,i,i,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new Fa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new Fa(u,this.wrap,u,m,b),new Fa(u,this.wrap,u,m+1,b),new Fa(u,this.wrap,u,m,b+1),new Fa(u,this.wrap,u,m+1,b+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Fa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Fa(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Jd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new el(i.x-this.wrap,i.y))}}function Bs(r,i,u,m,b){(r*=2)<0&&(r=-1*r-1);const E=1<<u;return(E*E*r+E*b+m).toString(36)+u.toString(36)+i.toString(36)}Si("CanonicalTileID",Th),Si("OverscaledTileID",Fa,{omit:["posMatrix"]});class Yp{constructor(i,u,m){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&m!=="mapbox"&&m!=="terrarium")return void Ne(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const b=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=m||"mapbox";for(let E=0;E<b;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(b,E)]=this.data[this._idx(b-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,b)]=this.data[this._idx(E,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)]}get(i,u){const m=new Uint8Array(this.data.buffer),b=4*this._idx(i,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(m[b],m[b+1],m[b+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}_unpackMapbox(i,u,m){return(256*i*256+256*u+m)/10-1e4}_unpackTerrarium(i,u,m){return 256*i+u+m/256-32768}getPixels(){return new Os({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,u,m){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,E=u*this.dim+this.dim,T=m*this.dim,D=m*this.dim+this.dim;switch(u){case-1:b=E-1;break;case 1:E=b+1}switch(m){case-1:T=D-1;break;case 1:D=T+1}const U=-u*this.dim,V=-m*this.dim;for(let G=T;G<D;G++)for(let q=b;q<E;q++)this.data[this._idx(q,G)]=i.data[this._idx(q+U,G+V)]}}Si("DEMData",Yp);class Qp{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const m=i[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}class Yf{constructor(i,u,m,b,E){this.type="Feature",this._vectorTileFeature=i,i._z=u,i._x=m,i._y=b,this.properties=i.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(i[u]=this[u]);return i}}class Zo{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Nn(er,16,0),this.grid3D=new Nn(er,16,0),this.featureIndexArray=new f,this.promoteId=u}insert(i,u,m,b,E,T){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,E);const U=T?this.grid3D:this.grid;for(let V=0;V<u.length;V++){const G=u[V],q=[1/0,1/0,-1/0,-1/0];for(let K=0;K<G.length;K++){const $=G[K];q[0]=Math.min(q[0],$.x),q[1]=Math.min(q[1],$.y),q[2]=Math.max(q[2],$.x),q[3]=Math.max(q[3],$.y)}q[0]<er&&q[1]<er&&q[2]>=0&&q[3]>=0&&U.insert(D,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new rc.VectorTile(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new Qp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,u,m,b){this.loadVTLayers();const E=i.params||{},T=er/i.tileSize/i.scale,D=Ks(E.filter),U=i.queryGeometry,V=i.queryPadding*T,G=$p(U),q=this.grid.query(G.minX-V,G.minY-V,G.maxX+V,G.maxY+V),K=$p(i.cameraQueryGeometry),$=this.grid3D.query(K.minX-V,K.minY-V,K.maxX+V,K.maxY+V,(ve,Be,Qe,nt)=>function(rt,vt,ot,Kt,Wt){for(const Zt of rt)if(vt<=Zt.x&&ot<=Zt.y&&Kt>=Zt.x&&Wt>=Zt.y)return!0;const Pt=[new Et(vt,ot),new Et(vt,Wt),new Et(Kt,Wt),new Et(Kt,ot)];if(rt.length>2){for(const Zt of Pt)if(Wa(rt,Zt))return!0}for(let Zt=0;Zt<rt.length-1;Zt++)if(Gl(rt[Zt],rt[Zt+1],Pt))return!0;return!1}(i.cameraQueryGeometry,ve-V,Be-V,Qe+V,nt+V));for(const ve of $)q.push(ve);q.sort(t);const ie={};let pe;for(let ve=0;ve<q.length;ve++){const Be=q[ve];if(Be===pe)continue;pe=Be;const Qe=this.featureIndexArray.get(Be);let nt=null;this.loadMatchingFeature(ie,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,D,E.layers,E.availableImages,u,m,b,(rt,vt,ot)=>(nt||(nt=Ga(rt)),vt.queryIntersectsFeature(U,rt,ot,nt,this.z,i.transform,T,i.pixelPosMatrix)))}return ie}loadMatchingFeature(i,u,m,b,E,T,D,U,V,G,q){const K=this.bucketLayerIDs[u];if(T&&!function(ve,Be){for(let Qe=0;Qe<ve.length;Qe++)if(Be.indexOf(ve[Qe])>=0)return!0;return!1}(T,K))return;const $=this.sourceLayerCoder.decode(m),ie=this.vtLayers[$].feature(b);if(E.needGeometry){const ve=zo(ie,!0);if(!E.filter(new Vr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!E.filter(new Vr(this.tileID.overscaledZ),ie))return;const pe=this.getId(ie,$);for(let ve=0;ve<K.length;ve++){const Be=K[ve];if(T&&T.indexOf(Be)<0)continue;const Qe=U[Be];if(!Qe)continue;let nt={};pe&&G&&(nt=G.getState(Qe.sourceLayer||"_geojsonTileLayer",pe));const rt=ee({},V[Be]);rt.paint=Lu(rt.paint,Qe.paint,ie,nt,D),rt.layout=Lu(rt.layout,Qe.layout,ie,nt,D);const vt=!q||q(ie,Qe,nt);if(!vt)continue;const ot=new Yf(ie,this.z,this.x,this.y,pe);ot.layer=rt;let Kt=i[Be];Kt===void 0&&(Kt=i[Be]=[]),Kt.push({featureIndex:b,feature:ot,intersectionZ:vt})}}lookupSymbolFeatures(i,u,m,b,E,T,D,U){const V={};this.loadVTLayers();const G=Ks(E);for(const q of i)this.loadMatchingFeature(V,m,b,q,G,T,D,U,u);return V}hasLayer(i){for(const u of this.bucketLayerIDs)for(const m of u)if(i===m)return!0;return!1}getId(i,u){let m=i.id;return this.promoteId&&(m=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof m=="boolean"&&(m=Number(m))),m}}function Lu(r,i,u,m,b){return de(r,(E,T)=>{const D=i instanceof ya?i.get(T):null;return D&&D.evaluate?D.evaluate(u,m,b):D})}function $p(r){let i=1/0,u=1/0,m=-1/0,b=-1/0;for(const E of r)i=Math.min(i,E.x),u=Math.min(u,E.y),m=Math.max(m,E.x),b=Math.max(b,E.y);return{minX:i,minY:u,maxX:m,maxY:b}}function t(r,i){return i-r}var s;Si("FeatureIndex",Zo,{omit:["rawTileData","sourceLayerCoder"]}),h.PerformanceMarkers=void 0,(s=h.PerformanceMarkers||(h.PerformanceMarkers={})).create="create",s.load="load",s.fullLoad="fullLoad";let d=null,x=[];const S=1e3/30,M={mark(r){performance.mark(r)},frame(r){const i=r;d!=null&&x.push(i-d),d=i},clearMetrics(){d=null,x=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const r in h.PerformanceMarkers)performance.clearMarks(h.PerformanceMarkers[r])},getPerformanceMetrics(){performance.measure("loadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.load),performance.measure("fullLoadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.fullLoad);const r=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,u=x.length,m=1/(x.reduce((E,T)=>E+T,0)/u/1e3),b=x.filter(E=>E>S).reduce((E,T)=>E+(T-S)/S,0);return{loadTime:r,fullLoadTime:i,fps:m,percentDroppedFrames:b/(u+b)*100}}};h.AJAXError=gt,h.ARRAY_TYPE=tc,h.Actor=class{constructor(r,i,u){this.target=r,this.parent=i,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},te(["receive","process"],this),this.invoker=new Jf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ct()?r:window}send(r,i,u,m,b=!1){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[E]=u);const T=He(this.globalScope)?void 0:[];return this.target.postMessage({id:E,type:r,hasCallback:!!u,targetMapId:m,mustQueue:b,sourceMapId:this.mapId,data:ds(i,T)},T),{cancel:()=>{u&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(r){const i=r.data,u=i.id;if(u&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[u];const m=this.cancelCallbacks[u];delete this.cancelCallbacks[u],m&&m()}else ct()||i.mustQueue?(this.tasks[u]=i,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,i)}process(){if(!this.taskQueue.length)return;const r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}processTask(r,i){if(i.type==="<response>"){const u=this.callbacks[r];delete this.callbacks[r],u&&(i.error?u(Ja(i.error)):u(null,Ja(i.data)))}else{let u=!1;const m=He(this.globalScope)?void 0:[],b=i.hasCallback?(D,U)=>{u=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:D?ds(D):null,data:ds(U,m)},m)}:D=>{u=!0};let E=null;const T=Ja(i.data);if(this.parent[i.type])E=this.parent[i.type](i.sourceMapId,T,b);else if(this.parent.getWorkerSource){const D=i.type.split(".");E=this.parent.getWorkerSource(i.sourceMapId,D[0],T.source)[D[1]](T,b)}else b(new Error(`Could not find function ${i.type}`));!u&&E&&E.cancel&&(this.cancelCallbacks[r]=E.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.AlphaImage=Vh,h.CanonicalTileID=Th,h.CollisionBoxArray=Ot,h.CollisionCircleLayoutArray=class extends ne{},h.Color=X,h.DEMData=Yp,h.DataConstantProperty=Bi,h.DictionaryCoder=Qp,h.EXTENT=er,h.ErrorEvent=zt,h.EvaluationParameters=Vr,h.Event=Ln,h.Evented=Ui,h.FeatureIndex=Zo,h.FillBucket=Lp,h.FillExtrusionBucket=Dp,h.GeoJSONFeature=Yf,h.ImageAtlas=Np,h.ImagePosition=Up,h.LineBucket=Rp,h.LineStripIndexArray=class extends bt{},h.LngLat=Eo,h.LngLatBounds=uc,h.MercatorCoordinate=el,h.ONE_EM=aa,h.OverscaledTileID=Fa,h.PerformanceUtils=M,h.PosArray=class extends xo{},h.Properties=Qr,h.QuadTriangleArray=class extends ye{},h.RGBAImage=Os,h.RasterBoundsArray=class extends da{},h.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},h.ResourceType=Qt,h.SegmentVector=Ce,h.SymbolBucket=Vc,h.Transitionable=Ya,h.TriangleIndexArray=Ee,h.Uniform1f=Xn,h.Uniform1i=class extends Hi{constructor(r,i){super(r,i),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},h.Uniform2f=class extends Hi{constructor(r,i){super(r,i),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},h.Uniform3f=class extends Hi{constructor(r,i){super(r,i),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},h.Uniform4f=Pi,h.UniformColor=_n,h.UniformMatrix4f=class extends Hi{constructor(r,i){super(r,i),this.current=Vn}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let i=1;i<16;i++)if(r[i]!==this.current[i]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},h.UnwrappedTileID=Jd,h.ValidationError=Ft,h.ZoomHistory=_u,h.addDynamicAttributes=Xp,h.asyncAll=function(r,i,u){if(!r.length)return u(null,[]);let m=r.length;const b=new Array(r.length);let E=null;r.forEach((T,D)=>{i(T,(U,V)=>{U&&(E=U),b[D]=V,--m==0&&u(E,b)})})},h.bezier=z,h.bindAll=te,h.cacheEntryPossiblyAdded=function(r){Jt++,Jt>Ki&&(r.getActor().send("enforceCacheSizeLimit",Xt),Jt=0)},h.clamp=O,h.clearTileCache=function(r){const i=caches.delete(wt);r&&i.catch(r).then(()=>r())},h.clipLine=Uc,h.clone=function(r){var i=new tc(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},h.clone$1=be,h.collisionCircleLayout=Bf,h.config=Ye,h.create=function(){var r=new tc(16);return tc!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},h.createExpression=cs,h.createFilter=Ks,h.createLayout=mi,h.createStyleLayer=function(r){return r.type==="custom"?new eo(r):new Kf[r.type](r)},h.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},h.ease=R,h.emitValidationErrors=Ms,h.enforceCacheSizeLimit=function(r){ei(),Lt&&Lt.then(i=>{i.keys().then(u=>{for(let m=0;m<u.length-r;m++)i.delete(u[m])})})},h.evaluateSizeForFeature=function(r,{uSize:i,uSizeT:u},{lowerSize:m,upperSize:b}){return r.kind==="source"?m/Zl:r.kind==="composite"?Ao(m/Zl,b/Zl,u):i},h.evaluateSizeForZoom=function(r,i){let u=0,m=0;if(r.kind==="constant")m=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:b,minZoom:E,maxZoom:T}=r,D=b?O(Go.interpolationFactor(b,i,E,T),0,1):0;r.kind==="camera"?m=Ao(r.minSize,r.maxSize,D):u=D}return{uSizeT:u,uSize:m}},h.evaluateVariableOffset=Eh,h.evented=Ls,h.exported=li,h.exported$1=xi,h.extend=ee,h.filterObject=oe,h.getAnchorAlignment=Vd,h.getAnchorJustification=Lr,h.getArrayBuffer=Zn,h.getImage=jn,h.getJSON=function(r,i){return Cn(ee(r,{type:"json"}),i)},h.getOverlapMode=lc,h.getRTLTextPluginStatus=bu,h.getReferrer=Oi,h.getVideo=function(r,i){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let m=0;m<r.length;m++){const b=window.document.createElement("source");Nr(r[m])||(u.crossOrigin="Anonymous"),b.src=r[m],u.appendChild(b)}return{cancel:()=>{}}},h.identity=ic,h.invert=function(r,i){var u=i[0],m=i[1],b=i[2],E=i[3],T=i[4],D=i[5],U=i[6],V=i[7],G=i[8],q=i[9],K=i[10],$=i[11],ie=i[12],pe=i[13],ve=i[14],Be=i[15],Qe=u*D-m*T,nt=u*U-b*T,rt=u*V-E*T,vt=m*U-b*D,ot=m*V-E*D,Kt=b*V-E*U,Wt=G*pe-q*ie,Pt=G*ve-K*ie,Zt=G*Be-$*ie,Nt=q*ve-K*pe,$t=q*Be-$*pe,Bt=K*Be-$*ve,Vt=Qe*Bt-nt*$t+rt*Nt+vt*Zt-ot*Pt+Kt*Wt;return Vt?(r[0]=(D*Bt-U*$t+V*Nt)*(Vt=1/Vt),r[1]=(b*$t-m*Bt-E*Nt)*Vt,r[2]=(pe*Kt-ve*ot+Be*vt)*Vt,r[3]=(K*ot-q*Kt-$*vt)*Vt,r[4]=(U*Zt-T*Bt-V*Pt)*Vt,r[5]=(u*Bt-b*Zt+E*Pt)*Vt,r[6]=(ve*rt-ie*Kt-Be*nt)*Vt,r[7]=(G*Kt-K*rt+$*nt)*Vt,r[8]=(T*$t-D*Zt+V*Wt)*Vt,r[9]=(m*Zt-u*$t-E*Wt)*Vt,r[10]=(ie*ot-pe*rt+Be*Qe)*Vt,r[11]=(q*rt-G*ot-$*Qe)*Vt,r[12]=(D*Pt-T*Nt-U*Wt)*Vt,r[13]=(u*Nt-m*Pt+b*Wt)*Vt,r[14]=(pe*nt-ie*vt-ve*Qe)*Vt,r[15]=(G*vt-q*nt+K*Qe)*Vt,r):null},h.isImageBitmap=Mt,h.isSafari=He,h.keysDifference=function(r,i){const u=[];for(const m in r)m in i||u.push(m);return u},h.lazyLoadRTLTextPlugin=function(){Yr.isLoading()||Yr.isLoaded()||bu()!=="deferred"||ha()},h.makeRequest=Cn,h.mapObject=de,h.mercatorXfromLng=hc,h.mercatorYfromLat=Jp,h.mercatorZfromAltitude=ko,h.mul=Ld,h.multiply=Pd,h.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},h.number=Ao,h.ortho=function(r,i,u,m,b,E,T){var D=1/(i-u),U=1/(m-b),V=1/(E-T);return r[0]=-2*D,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*U,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*V,r[11]=0,r[12]=(i+u)*D,r[13]=(b+m)*U,r[14]=(T+E)*V,r[15]=1,r},h.parseCacheControl=st,h.parseGlyphPBF=function(r){return new Op(r).readFields(Ud,[])},h.pbf=Op,h.performSymbolLayout=function(r,i,u,m,b,E,T){r.createArrays(),r.tilePixelRatio=er/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const D=r.layers[0].layout,U=r.layers[0]._unevaluatedLayout._values,V={layoutIconSize:U["icon-size"].possiblyEvaluate(new Vr(r.zoom+1),T),layoutTextSize:U["text-size"].possiblyEvaluate(new Vr(r.zoom+1),T),textMaxSize:U["text-size"].possiblyEvaluate(new Vr(18))};if(r.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:pe}=r.textSizeData;V.compositeTextSizes=[U["text-size"].possiblyEvaluate(new Vr(ie),T),U["text-size"].possiblyEvaluate(new Vr(pe),T)]}if(r.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:pe}=r.iconSizeData;V.compositeIconSizes=[U["icon-size"].possiblyEvaluate(new Vr(ie),T),U["icon-size"].possiblyEvaluate(new Vr(pe),T)]}const G=D.get("text-line-height")*aa,q=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point",K=D.get("text-keep-upright"),$=D.get("text-size");for(const ie of r.features){const pe=D.get("text-font").evaluate(ie,{},T).join(","),ve=$.evaluate(ie,{},T),Be=V.layoutTextSize.evaluate(ie,{},T),Qe=V.layoutIconSize.evaluate(ie,{},T),nt={horizontal:{},vertical:void 0},rt=ie.text;let vt,ot=[0,0];if(rt){const Pt=rt.toString(),Zt=D.get("text-letter-spacing").evaluate(ie,{},T)*aa,Nt=Nl(Pt)?Zt:0,$t=D.get("text-anchor").evaluate(ie,{},T),Bt=D.get("text-variable-anchor");if(!Bt){const un=D.get("text-radial-offset").evaluate(ie,{},T);ot=un?Eh($t,[un*aa,ac]):D.get("text-offset").evaluate(ie,{},T).map(Rn=>Rn*aa)}let Vt=q?"center":D.get("text-justify").evaluate(ie,{},T);const ki=D.get("symbol-placement"),Ai=ki==="point"?D.get("text-max-width").evaluate(ie,{},T)*aa:0,on=()=>{r.allowVerticalPlacement&&_l(Pt)&&(nt.vertical=Qh(rt,i,u,b,pe,Ai,G,$t,"left",Nt,ot,h.WritingMode.vertical,!0,ki,Be,ve))};if(!q&&Bt){const un=Vt==="auto"?Bt.map(Kn=>Lr(Kn)):[Vt];let Rn=!1;for(let Kn=0;Kn<un.length;Kn++){const mr=un[Kn];if(!nt.horizontal[mr])if(Rn)nt.horizontal[mr]=nt.horizontal[0];else{const gr=Qh(rt,i,u,b,pe,Ai,G,"center",mr,Nt,ot,h.WritingMode.horizontal,!1,ki,Be,ve);gr&&(nt.horizontal[mr]=gr,Rn=gr.positionedLines.length===1)}}on()}else{Vt==="auto"&&(Vt=Lr($t));const un=Qh(rt,i,u,b,pe,Ai,G,$t,Vt,Nt,ot,h.WritingMode.horizontal,!1,ki,Be,ve);un&&(nt.horizontal[Vt]=un),on(),_l(Pt)&&q&&K&&(nt.vertical=Qh(rt,i,u,b,pe,Ai,G,$t,Vt,Nt,ot,h.WritingMode.vertical,!1,ki,Be,ve))}}let Kt=!1;if(ie.icon&&ie.icon.name){const Pt=m[ie.icon.name];Pt&&(vt=Sg(b[ie.icon.name],D.get("icon-offset").evaluate(ie,{},T),D.get("icon-anchor").evaluate(ie,{},T)),Kt=!!Pt.sdf,r.sdfIcons===void 0?r.sdfIcons=Kt:r.sdfIcons!==Kt&&Ne("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pt.pixelRatio!==r.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const Wt=Zf(nt.horizontal)||nt.vertical;r.iconsInText=!!Wt&&Wt.iconsInText,(Wt||vt)&&Mg(r,ie,nt,vt,m,V,Be,Qe,ot,Kt,T)}E&&r.generateCollisionDebugBuffers()},h.perspective=function(r,i,u,m,b){var E,T=1/Math.tan(i/2);return r[0]=T/u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=T,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,b!=null&&b!==1/0?(r[10]=(b+m)*(E=1/(m-b)),r[14]=2*b*m*E):(r[10]=-1,r[14]=-2*m),r},h.pick=function(r,i){const u={};for(let m=0;m<i.length;m++){const b=i[m];b in r&&(u[b]=r[b])}return u},h.plugin=Yr,h.pointGeometry=Et,h.polygonIntersectsPolygon=Qu,h.potpack=Fp,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.register=Si,h.registerForPluginStateChange=function(r){return r({pluginStatus:Hr,pluginURL:ps}),Ls.on("pluginStateChange",r),r},h.renderColorRamp=Sf,h.rotateX=function(r,i,u){var m=Math.sin(u),b=Math.cos(u),E=i[4],T=i[5],D=i[6],U=i[7],V=i[8],G=i[9],q=i[10],K=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=E*b+V*m,r[5]=T*b+G*m,r[6]=D*b+q*m,r[7]=U*b+K*m,r[8]=V*b-E*m,r[9]=G*b-T*m,r[10]=q*b-D*m,r[11]=K*b-U*m,r},h.rotateZ=function(r,i,u){var m=Math.sin(u),b=Math.cos(u),E=i[0],T=i[1],D=i[2],U=i[3],V=i[4],G=i[5],q=i[6],K=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=E*b+V*m,r[1]=T*b+G*m,r[2]=D*b+q*m,r[3]=U*b+K*m,r[4]=V*b-E*m,r[5]=G*b-T*m,r[6]=q*b-D*m,r[7]=K*b-U*m,r},h.scale=function(r,i,u){var m=u[0],b=u[1],E=u[2];return r[0]=i[0]*m,r[1]=i[1]*m,r[2]=i[2]*m,r[3]=i[3]*m,r[4]=i[4]*b,r[5]=i[5]*b,r[6]=i[6]*b,r[7]=i[7]*b,r[8]=i[8]*E,r[9]=i[9]*E,r[10]=i[10]*E,r[11]=i[11]*E,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},h.scale$1=function(r,i,u){return r[0]=i[0]*u,r[1]=i[1]*u,r[2]=i[2]*u,r[3]=i[3]*u,r},h.setCacheLimits=function(r,i){Xt=r,Ki=i},h.setRTLTextPlugin=function(r,i,u=!1){if(Hr===Jo||Hr===jl||Hr===Ys)throw new Error("setRTLTextPlugin cannot be called multiple times.");ps=li.resolveURL(r),Hr=Jo,Oa=i,vu(),u||ha()},h.spec=Ze,h.sphericalToCartesian=function([r,i,u]){return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:r*Math.cos(i)*Math.sin(u),y:r*Math.sin(i)*Math.sin(u),z:r*Math.cos(u)}},h.toEvaluationFeature=zo,h.transformMat4=wl,h.translate=function(r,i,u){var m,b,E,T,D,U,V,G,q,K,$,ie,pe=u[0],ve=u[1],Be=u[2];return i===r?(r[12]=i[0]*pe+i[4]*ve+i[8]*Be+i[12],r[13]=i[1]*pe+i[5]*ve+i[9]*Be+i[13],r[14]=i[2]*pe+i[6]*ve+i[10]*Be+i[14],r[15]=i[3]*pe+i[7]*ve+i[11]*Be+i[15]):(b=i[1],E=i[2],T=i[3],D=i[4],U=i[5],V=i[6],G=i[7],q=i[8],K=i[9],$=i[10],ie=i[11],r[0]=m=i[0],r[1]=b,r[2]=E,r[3]=T,r[4]=D,r[5]=U,r[6]=V,r[7]=G,r[8]=q,r[9]=K,r[10]=$,r[11]=ie,r[12]=m*pe+D*ve+q*Be+i[12],r[13]=b*pe+U*ve+K*Be+i[13],r[14]=E*pe+V*ve+$*Be+i[14],r[15]=T*pe+G*ve+ie*Be+i[15]),r},h.triggerPluginCompletionEvent=fi,h.unicodeBlockLookup=Mi,h.uniqueId=function(){return ue++},h.validateCustomStyleLayer=function(r){const i=[],u=r.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),r.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},h.validateLight=Gr,h.validateStyle=Ra,h.vectorTile=rc,h.warnOnce=Ne,h.wrap=Y}),_(["./shared"],function(h){function I(he){const W=typeof he;if(W==="number"||W==="boolean"||W==="string"||he==null)return JSON.stringify(he);if(Array.isArray(he)){let ge="[";for(const Te of he)ge+=`${I(Te)},`;return`${ge}]`}const X=Object.keys(he).sort();let le="{";for(let ge=0;ge<X.length;ge++)le+=`${JSON.stringify(X[ge])}:${I(he[X[ge]])},`;return`${le}}`}function L(he){let W="";for(const X of h.refProperties)W+=`/${I(he[X])}`;return W}class z{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,X){for(const ge of W){this._layerConfigs[ge.id]=ge;const Te=this._layers[ge.id]=h.createStyleLayer(ge);Te._featureFilter=h.createFilter(Te.filter),this.keyCache[ge.id]&&delete this.keyCache[ge.id]}for(const ge of X)delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge];this.familiesBySource={};const le=function(ge,Te){const we={};for(let Me=0;Me<ge.length;Me++){const Le=Te&&Te[ge[Me].id]||L(ge[Me]);Te&&(Te[ge[Me].id]=Le);let yt=we[Le];yt||(yt=we[Le]=[]),yt.push(ge[Me])}const Pe=[];for(const Me in we)Pe.push(we[Me]);return Pe}(Object.values(this._layerConfigs),this.keyCache);for(const ge of le){const Te=ge.map(lt=>this._layers[lt.id]),we=Te[0];if(we.visibility==="none")continue;const Pe=we.source||"";let Me=this.familiesBySource[Pe];Me||(Me=this.familiesBySource[Pe]={});const Le=we.sourceLayer||"_geojsonTileLayer";let yt=Me[Le];yt||(yt=Me[Le]=[]),yt.push(Te)}}}class R{constructor(W){const X={},le=[];for(const Pe in W){const Me=W[Pe],Le=X[Pe]={};for(const yt in Me){const lt=Me[+yt];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const _t={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};le.push(_t),Le[yt]={rect:_t,metrics:lt.metrics}}}const{w:ge,h:Te}=h.potpack(le),we=new h.AlphaImage({width:ge||1,height:Te||1});for(const Pe in W){const Me=W[Pe];for(const Le in Me){const yt=Me[+Le];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const lt=X[Pe][Le].rect;h.AlphaImage.copy(yt.bitmap,we,{x:0,y:0},{x:lt.x+1,y:lt.y+1},yt.bitmap)}}this.image=we,this.positions=X}}h.register("GlyphAtlas",R);class O{constructor(W){this.tileID=new h.OverscaledTileID(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId}parse(W,X,le,ge,Te){this.status="parsing",this.data=W,this.collisionBoxArray=new h.CollisionBoxArray;const we=new h.DictionaryCoder(Object.keys(W.layers).sort()),Pe=new h.FeatureIndex(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];const Me={},Le={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le},yt=X.familiesBySource[this.source];for(const nn in yt){const Vi=W.layers[nn];if(!Vi)continue;Vi.version===1&&h.warnOnce(`Vector tile source "${this.source}" layer "${nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ii=we.encode(nn),dn=[];for(let hr=0;hr<Vi.length;hr++){const po=Vi.feature(hr),fr=Pe.getId(po,nn);dn.push({feature:po,id:fr,index:hr,sourceLayerIndex:Ii})}for(const hr of yt[nn]){const po=hr[0];po.minzoom&&this.zoom<Math.floor(po.minzoom)||po.maxzoom&&this.zoom>=po.maxzoom||po.visibility!=="none"&&(Y(hr,this.zoom,le),(Me[po.id]=po.createBucket({index:Pe.bucketLayerIDs.length,layers:hr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ii,sourceID:this.source})).populate(dn,Le,this.tileID.canonical),Pe.bucketLayerIDs.push(hr.map(fr=>fr.id)))}}let lt,_t,si,Re;const Yt=h.mapObject(Le.glyphDependencies,nn=>Object.keys(nn).map(Number));Object.keys(Yt).length?ge.send("getGlyphs",{uid:this.uid,stacks:Yt},(nn,Vi)=>{lt||(lt=nn,_t=Vi,Xi.call(this))}):_t={};const di=Object.keys(Le.iconDependencies);di.length?ge.send("getImages",{icons:di,source:this.source,tileID:this.tileID,type:"icons"},(nn,Vi)=>{lt||(lt=nn,si=Vi,Xi.call(this))}):si={};const kn=Object.keys(Le.patternDependencies);function Xi(){if(lt)return Te(lt);if(_t&&si&&Re){const nn=new R(_t),Vi=new h.ImageAtlas(si,Re);for(const Ii in Me){const dn=Me[Ii];dn instanceof h.SymbolBucket?(Y(dn.layers,this.zoom,le),h.performSymbolLayout(dn,_t,nn.positions,si,Vi.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):dn.hasPattern&&(dn instanceof h.LineBucket||dn instanceof h.FillBucket||dn instanceof h.FillExtrusionBucket)&&(Y(dn.layers,this.zoom,le),dn.addFeatures(Le,this.tileID.canonical,Vi.patternPositions))}this.status="done",Te(null,{buckets:Object.values(Me).filter(Ii=>!Ii.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nn.image,imageAtlas:Vi,glyphMap:this.returnDependencies?_t:null,iconMap:this.returnDependencies?si:null,glyphPositions:this.returnDependencies?nn.positions:null})}}kn.length?ge.send("getImages",{icons:kn,source:this.source,tileID:this.tileID,type:"patterns"},(nn,Vi)=>{lt||(lt=nn,Re=Vi,Xi.call(this))}):Re={},Xi.call(this)}}function Y(he,W,X){const le=new h.EvaluationParameters(W);for(const ge of he)ge.recalculate(le,X)}function ee(he,W){const X=h.getArrayBuffer(he.request,(le,ge,Te,we)=>{le?W(le):ge&&W(null,{vectorTile:new h.vectorTile.VectorTile(new h.pbf(ge)),rawData:ge,cacheControl:Te,expires:we})});return()=>{X.cancel(),W()}}class ue{constructor(W,X,le,ge){this.actor=W,this.layerIndex=X,this.availableImages=le,this.loadVectorData=ge||ee,this.loading={},this.loaded={}}loadTile(W,X){const le=W.uid;this.loading||(this.loading={});const ge=!!(W&&W.request&&W.request.collectResourceTiming)&&new h.RequestPerformance(W.request),Te=this.loading[le]=new O(W);Te.abort=this.loadVectorData(W,(we,Pe)=>{if(delete this.loading[le],we||!Pe)return Te.status="done",this.loaded[le]=Te,X(we);const Me=Pe.rawData,Le={};Pe.expires&&(Le.expires=Pe.expires),Pe.cacheControl&&(Le.cacheControl=Pe.cacheControl);const yt={};if(ge){const lt=ge.finish();lt&&(yt.resourceTiming=JSON.parse(JSON.stringify(lt)))}Te.vectorTile=Pe.vectorTile,Te.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(lt,_t)=>{if(lt||!_t)return X(lt);X(null,h.extend({rawTileData:Me.slice(0)},_t,Le,yt))}),this.loaded=this.loaded||{},this.loaded[le]=Te})}reloadTile(W,X){const le=this.loaded,ge=W.uid,Te=this;if(le&&le[ge]){const we=le[ge];we.showCollisionBoxes=W.showCollisionBoxes;const Pe=(Me,Le)=>{const yt=we.reloadCallback;yt&&(delete we.reloadCallback,we.parse(we.vectorTile,Te.layerIndex,this.availableImages,Te.actor,yt)),X(Me,Le)};we.status==="parsing"?we.reloadCallback=Pe:we.status==="done"&&(we.vectorTile?we.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor,Pe):Pe())}}abortTile(W,X){const le=this.loading,ge=W.uid;le&&le[ge]&&le[ge].abort&&(le[ge].abort(),delete le[ge]),X()}removeTile(W,X){const le=this.loaded,ge=W.uid;le&&le[ge]&&delete le[ge],X()}}class te{constructor(){this.loaded={}}loadTile(W,X){const{uid:le,encoding:ge,rawImageData:Te}=W,we=h.isImageBitmap(Te)?this.getImageData(Te):Te,Pe=new h.DEMData(le,we,ge);this.loaded=this.loaded||{},this.loaded[le]=Pe,X(null,Pe)}getImageData(W){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const X=this.offscreenCanvasContext.getImageData(-1,-1,W.width+2,W.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new h.RGBAImage({width:X.width,height:X.height},X.data)}removeTile(W){const X=this.loaded,le=W.uid;X&&X[le]&&delete X[le]}}var de=function he(W,X){var le,ge=W&&W.type;if(ge==="FeatureCollection")for(le=0;le<W.features.length;le++)he(W.features[le],X);else if(ge==="GeometryCollection")for(le=0;le<W.geometries.length;le++)he(W.geometries[le],X);else if(ge==="Feature")he(W.geometry,X);else if(ge==="Polygon")oe(W.coordinates,X);else if(ge==="MultiPolygon")for(le=0;le<W.coordinates.length;le++)oe(W.coordinates[le],X);return W};function oe(he,W){if(he.length!==0){be(he[0],W);for(var X=1;X<he.length;X++)be(he[X],!W)}}function be(he,W){for(var X=0,le=0,ge=0,Te=he.length,we=Te-1;ge<Te;we=ge++){var Pe=(he[ge][0]-he[we][0])*(he[we][1]+he[ge][1]),Me=X+Pe;le+=Math.abs(X)>=Math.abs(Pe)?X-Me+Pe:Pe-Me+X,X=Me}X+le>=0!=!!W&&he.reverse()}const qe=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ne{constructor(W){this._feature=W,this.extent=h.EXTENT,this.type=W.type,this.properties=W.tags,"id"in W&&!isNaN(W.id)&&(this.id=parseInt(W.id,10))}loadGeometry(){if(this._feature.type===1){const W=[];for(const X of this._feature.geometry)W.push([new h.pointGeometry(X[0],X[1])]);return W}{const W=[];for(const X of this._feature.geometry){const le=[];for(const ge of X)le.push(new h.pointGeometry(ge[0],ge[1]));W.push(le)}return W}}toGeoJSON(W,X,le){return qe.call(this,W,X,le)}}class De{constructor(W){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=W.length,this._features=W}feature(W){return new Ne(this._features[W])}}var fe={exports:{}},ct=h.pointGeometry,st=h.vectorTile.VectorTileFeature,Ge=Ue;function Ue(he,W){this.options=W||{},this.features=he,this.length=he.length}function Rt(he,W){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=W||4096}Ue.prototype.feature=function(he){return new Rt(this.features[he],this.options.extent)},Rt.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var W=0;W<he.length;W++){for(var X=he[W],le=[],ge=0;ge<X.length;ge++)le.push(new ct(X[ge][0],X[ge][1]));this.geometry.push(le)}return this.geometry},Rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,W=1/0,X=-1/0,le=1/0,ge=-1/0,Te=0;Te<he.length;Te++)for(var we=he[Te],Pe=0;Pe<we.length;Pe++){var Me=we[Pe];W=Math.min(W,Me.x),X=Math.max(X,Me.x),le=Math.min(le,Me.y),ge=Math.max(ge,Me.y)}return[W,le,X,ge]},Rt.prototype.toGeoJSON=st.prototype.toGeoJSON;var He=h.pbf,Mt=Ge;function li(he){var W=new He;return function(X,le){for(var ge in X.layers)le.writeMessage(3,Et,X.layers[ge])}(he,W),W.finish()}function Et(he,W){var X;W.writeVarintField(15,he.version||1),W.writeStringField(1,he.name||""),W.writeVarintField(5,he.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<he.length;X++)le.feature=he.feature(X),W.writeMessage(2,Gt,le);var ge=le.keys;for(X=0;X<ge.length;X++)W.writeStringField(3,ge[X]);var Te=le.values;for(X=0;X<Te.length;X++)W.writeMessage(4,Xt,Te[X])}function Gt(he,W){var X=he.feature;X.id!==void 0&&W.writeVarintField(1,X.id),W.writeMessage(2,Ye,he),W.writeVarintField(3,X.type),W.writeMessage(4,ni,X)}function Ye(he,W){var X=he.feature,le=he.keys,ge=he.values,Te=he.keycache,we=he.valuecache;for(var Pe in X.properties){var Me=X.properties[Pe],Le=Te[Pe];if(Me!==null){Le===void 0&&(le.push(Pe),Te[Pe]=Le=le.length-1),W.writeVarint(Le);var yt=typeof Me;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Me=JSON.stringify(Me));var lt=yt+":"+Me,_t=we[lt];_t===void 0&&(ge.push(Me),we[lt]=_t=ge.length-1),W.writeVarint(_t)}}}function wt(he,W){return(W<<3)+(7&he)}function Lt(he){return he<<1^he>>31}function ni(he,W){for(var X=he.loadGeometry(),le=he.type,ge=0,Te=0,we=X.length,Pe=0;Pe<we;Pe++){var Me=X[Pe],Le=1;le===1&&(Le=Me.length),W.writeVarint(wt(1,Le));for(var yt=le===3?Me.length-1:Me.length,lt=0;lt<yt;lt++){lt===1&&le!==1&&W.writeVarint(wt(2,yt-1));var _t=Me[lt].x-ge,si=Me[lt].y-Te;W.writeVarint(Lt(_t)),W.writeVarint(Lt(si)),ge+=_t,Te+=si}le===3&&W.writeVarint(wt(7,1))}}function Xt(he,W){var X=typeof he;X==="string"?W.writeStringField(1,he):X==="boolean"?W.writeBooleanField(7,he):X==="number"&&(he%1!=0?W.writeDoubleField(3,he):he<0?W.writeSVarintField(6,he):W.writeVarintField(5,he))}fe.exports=li,fe.exports.fromVectorTileJs=li,fe.exports.fromGeojsonVt=function(he,W){W=W||{};var X={};for(var le in he)X[le]=new Mt(he[le].features,W),X[le].name=le,X[le].version=W.version,X[le].extent=W.extent;return li({layers:X})},fe.exports.GeoJSONWrapper=Mt;var Ki=fe.exports;function ei(he,W,X,le,ge,Te){if(ge-le<=X)return;const we=le+ge>>1;Jt(he,W,we,le,ge,Te%2),ei(he,W,X,le,we-1,Te+1),ei(he,W,X,we+1,ge,Te+1)}function Jt(he,W,X,le,ge,Te){for(;ge>le;){if(ge-le>600){const Le=ge-le+1,yt=X-le+1,lt=Math.log(Le),_t=.5*Math.exp(2*lt/3),si=.5*Math.sqrt(lt*_t*(Le-_t)/Le)*(yt-Le/2<0?-1:1);Jt(he,W,X,Math.max(le,Math.floor(X-yt*_t/Le+si)),Math.min(ge,Math.floor(X+(Le-yt)*_t/Le+si)),Te)}const we=W[2*X+Te];let Pe=le,Me=ge;for(xi(he,W,le,X),W[2*ge+Te]>we&&xi(he,W,le,ge);Pe<Me;){for(xi(he,W,Pe,Me),Pe++,Me--;W[2*Pe+Te]<we;)Pe++;for(;W[2*Me+Te]>we;)Me--}W[2*le+Te]===we?xi(he,W,le,Me):(Me++,xi(he,W,Me,ge)),Me<=X&&(le=Me+1),X<=Me&&(ge=Me-1)}}function xi(he,W,X,le){ai(he,X,le),ai(W,2*X,2*le),ai(W,2*X+1,2*le+1)}function ai(he,W,X){const le=he[W];he[W]=he[X],he[X]=le}function dt(he,W,X,le){const ge=he-X,Te=W-le;return ge*ge+Te*Te}const It=he=>he[0],St=he=>he[1];class Yi{constructor(W,X=It,le=St,ge=64,Te=Float64Array){this.nodeSize=ge,this.points=W;const we=W.length<65536?Uint16Array:Uint32Array,Pe=this.ids=new we(W.length),Me=this.coords=new Te(2*W.length);for(let Le=0;Le<W.length;Le++)Pe[Le]=Le,Me[2*Le]=X(W[Le]),Me[2*Le+1]=le(W[Le]);ei(Pe,Me,ge,0,Pe.length-1,0)}range(W,X,le,ge){return function(Te,we,Pe,Me,Le,yt,lt){const _t=[0,Te.length-1,0],si=[];let Re,Yt;for(;_t.length;){const di=_t.pop(),kn=_t.pop(),Xi=_t.pop();if(kn-Xi<=lt){for(let Ii=Xi;Ii<=kn;Ii++)Re=we[2*Ii],Yt=we[2*Ii+1],Re>=Pe&&Re<=Le&&Yt>=Me&&Yt<=yt&&si.push(Te[Ii]);continue}const nn=Math.floor((Xi+kn)/2);Re=we[2*nn],Yt=we[2*nn+1],Re>=Pe&&Re<=Le&&Yt>=Me&&Yt<=yt&&si.push(Te[nn]);const Vi=(di+1)%2;(di===0?Pe<=Re:Me<=Yt)&&(_t.push(Xi),_t.push(nn-1),_t.push(Vi)),(di===0?Le>=Re:yt>=Yt)&&(_t.push(nn+1),_t.push(kn),_t.push(Vi))}return si}(this.ids,this.coords,W,X,le,ge,this.nodeSize)}within(W,X,le){return function(ge,Te,we,Pe,Me,Le){const yt=[0,ge.length-1,0],lt=[],_t=Me*Me;for(;yt.length;){const si=yt.pop(),Re=yt.pop(),Yt=yt.pop();if(Re-Yt<=Le){for(let Vi=Yt;Vi<=Re;Vi++)dt(Te[2*Vi],Te[2*Vi+1],we,Pe)<=_t&&lt.push(ge[Vi]);continue}const di=Math.floor((Yt+Re)/2),kn=Te[2*di],Xi=Te[2*di+1];dt(kn,Xi,we,Pe)<=_t&&lt.push(ge[di]);const nn=(si+1)%2;(si===0?we-Me<=kn:Pe-Me<=Xi)&&(yt.push(Yt),yt.push(di-1),yt.push(nn)),(si===0?we+Me>=kn:Pe+Me>=Xi)&&(yt.push(di+1),yt.push(Re),yt.push(nn))}return lt}(this.ids,this.coords,W,X,le,this.nodeSize)}}const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},gt=Math.fround||(Oi=new Float32Array(1),he=>(Oi[0]=+he,Oi[0]));var Oi;class ln{constructor(W){this.options=rn(Object.create(Qt),W),this.trees=new Array(this.options.maxZoom+1)}load(W){const{log:X,minZoom:le,maxZoom:ge,nodeSize:Te}=this.options;X&&console.time("total time");const we=`prepare ${W.length} points`;X&&console.time(we),this.points=W;let Pe=[];for(let Me=0;Me<W.length;Me++)W[Me].geometry&&Pe.push(Zn(W[Me],Me));this.trees[ge+1]=new Yi(Pe,$n,Ln,Te,Float32Array),X&&console.timeEnd(we);for(let Me=ge;Me>=le;Me--){const Le=+Date.now();Pe=this._cluster(Pe,Me),this.trees[Me]=new Yi(Pe,$n,Ln,Te,Float32Array),X&&console.log("z%d: %d clusters in %dms",Me,Pe.length,+Date.now()-Le)}return X&&console.timeEnd("total time"),this}getClusters(W,X){let le=((W[0]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,W[1]));let Te=W[2]===180?180:((W[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)le=-180,Te=180;else if(le>Te){const yt=this.getClusters([le,ge,180,we],X),lt=this.getClusters([-180,ge,Te,we],X);return yt.concat(lt)}const Pe=this.trees[this._limitZoom(X)],Me=Pe.range(At(le),Ni(we),At(Te),Ni(ge)),Le=[];for(const yt of Me){const lt=Pe.points[yt];Le.push(lt.numPoints?Nr(lt):this.points[lt.index])}return Le}getChildren(W){const X=this._getOriginId(W),le=this._getOriginZoom(W),ge="No cluster with the specified id.",Te=this.trees[le];if(!Te)throw new Error(ge);const we=Te.points[X];if(!we)throw new Error(ge);const Pe=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Me=Te.within(we.x,we.y,Pe),Le=[];for(const yt of Me){const lt=Te.points[yt];lt.parentId===W&&Le.push(lt.numPoints?Nr(lt):this.points[lt.index])}if(Le.length===0)throw new Error(ge);return Le}getLeaves(W,X,le){const ge=[];return this._appendLeaves(ge,W,X=X||10,le=le||0,0),ge}getTile(W,X,le){const ge=this.trees[this._limitZoom(W)],Te=Math.pow(2,W),{extent:we,radius:Pe}=this.options,Me=Pe/we,Le=(le-Me)/Te,yt=(le+1+Me)/Te,lt={features:[]};return this._addTileFeatures(ge.range((X-Me)/Te,Le,(X+1+Me)/Te,yt),ge.points,X,le,Te,lt),X===0&&this._addTileFeatures(ge.range(1-Me/Te,Le,1,yt),ge.points,Te,le,Te,lt),X===Te-1&&this._addTileFeatures(ge.range(0,Le,Me/Te,yt),ge.points,-1,le,Te,lt),lt.features.length?lt:null}getClusterExpansionZoom(W){let X=this._getOriginZoom(W)-1;for(;X<=this.options.maxZoom;){const le=this.getChildren(W);if(X++,le.length!==1)break;W=le[0].properties.cluster_id}return X}_appendLeaves(W,X,le,ge,Te){const we=this.getChildren(X);for(const Pe of we){const Me=Pe.properties;if(Me&&Me.cluster?Te+Me.point_count<=ge?Te+=Me.point_count:Te=this._appendLeaves(W,Me.cluster_id,le,ge,Te):Te<ge?Te++:W.push(Pe),W.length===le)break}return Te}_addTileFeatures(W,X,le,ge,Te,we){for(const Pe of W){const Me=X[Pe],Le=Me.numPoints;let yt,lt,_t;if(Le)yt=Kr(Me),lt=Me.x,_t=Me.y;else{const Yt=this.points[Me.index];yt=Yt.properties,lt=At(Yt.geometry.coordinates[0]),_t=Ni(Yt.geometry.coordinates[1])}const si={type:1,geometry:[[Math.round(this.options.extent*(lt*Te-le)),Math.round(this.options.extent*(_t*Te-ge))]],tags:yt};let Re;Le?Re=Me.id:this.options.generateId?Re=Me.index:this.points[Me.index].id&&(Re=this.points[Me.index].id),Re!==void 0&&(si.id=Re),we.features.push(si)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(+W,this.options.maxZoom+1))}_cluster(W,X){const le=[],{radius:ge,extent:Te,reduce:we,minPoints:Pe}=this.options,Me=ge/(Te*Math.pow(2,X));for(let Le=0;Le<W.length;Le++){const yt=W[Le];if(yt.zoom<=X)continue;yt.zoom=X;const lt=this.trees[X+1],_t=lt.within(yt.x,yt.y,Me),si=yt.numPoints||1;let Re=si;for(const Yt of _t){const di=lt.points[Yt];di.zoom>X&&(Re+=di.numPoints||1)}if(Re>si&&Re>=Pe){let Yt=yt.x*si,di=yt.y*si,kn=we&&si>1?this._map(yt,!0):null;const Xi=(Le<<5)+(X+1)+this.points.length;for(const nn of _t){const Vi=lt.points[nn];if(Vi.zoom<=X)continue;Vi.zoom=X;const Ii=Vi.numPoints||1;Yt+=Vi.x*Ii,di+=Vi.y*Ii,Vi.parentId=Xi,we&&(kn||(kn=this._map(yt,!0)),we(kn,this._map(Vi)))}yt.parentId=Xi,le.push(Cn(Yt/Re,di/Re,Xi,Re,kn))}else if(le.push(yt),Re>1)for(const Yt of _t){const di=lt.points[Yt];di.zoom<=X||(di.zoom=X,le.push(di))}}return le}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,X){if(W.numPoints)return X?rn({},W.properties):W.properties;const le=this.points[W.index].properties,ge=this.options.map(le);return X&&ge===le?rn({},ge):ge}}function Cn(he,W,X,le,ge){return{x:gt(he),y:gt(W),zoom:1/0,id:X,parentId:-1,numPoints:le,properties:ge}}function Zn(he,W){const[X,le]=he.geometry.coordinates;return{x:gt(At(X)),y:gt(Ni(le)),zoom:1/0,index:W,parentId:-1}}function Nr(he){return{type:"Feature",id:he.id,properties:Kr(he),geometry:{type:"Point",coordinates:[(W=he.x,360*(W-.5)),jn(he.y)]}};var W}function Kr(he){const W=he.numPoints,X=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W;return rn(rn({},he.properties),{cluster:!0,cluster_id:he.id,point_count:W,point_count_abbreviated:X})}function At(he){return he/360+.5}function Ni(he){const W=Math.sin(he*Math.PI/180),X=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return X<0?0:X>1?1:X}function jn(he){const W=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function rn(he,W){for(const X in W)he[X]=W[X];return he}function $n(he){return he.x}function Ln(he){return he.y}function zt(he,W,X,le){for(var ge,Te=le,we=X-W>>1,Pe=X-W,Me=he[W],Le=he[W+1],yt=he[X],lt=he[X+1],_t=W+3;_t<X;_t+=3){var si=Ui(he[_t],he[_t+1],Me,Le,yt,lt);if(si>Te)ge=_t,Te=si;else if(si===Te){var Re=Math.abs(_t-we);Re<Pe&&(ge=_t,Pe=Re)}}Te>le&&(ge-W>3&&zt(he,W,ge,le),he[ge+2]=Te,X-ge>3&&zt(he,ge,X,le))}function Ui(he,W,X,le,ge,Te){var we=ge-X,Pe=Te-le;if(we!==0||Pe!==0){var Me=((he-X)*we+(W-le)*Pe)/(we*we+Pe*Pe);Me>1?(X=ge,le=Te):Me>0&&(X+=we*Me,le+=Pe*Me)}return(we=he-X)*we+(Pe=W-le)*Pe}function Ze(he,W,X,le){var ge={id:he===void 0?null:he,type:W,geometry:X,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Te){var we=Te.geometry,Pe=Te.type;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")Ft(Te,we);else if(Pe==="Polygon"||Pe==="MultiLineString")for(var Me=0;Me<we.length;Me++)Ft(Te,we[Me]);else if(Pe==="MultiPolygon")for(Me=0;Me<we.length;Me++)for(var Le=0;Le<we[Me].length;Le++)Ft(Te,we[Me][Le])}(ge),ge}function Ft(he,W){for(var X=0;X<W.length;X+=3)he.minX=Math.min(he.minX,W[X]),he.minY=Math.min(he.minY,W[X+1]),he.maxX=Math.max(he.maxX,W[X]),he.maxY=Math.max(he.maxY,W[X+1])}function Ji(he,W,X,le){if(W.geometry){var ge=W.geometry.coordinates,Te=W.geometry.type,we=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),Pe=[],Me=W.id;if(X.promoteId?Me=W.properties[X.promoteId]:X.generateId&&(Me=le||0),Te==="Point")Gn(ge,Pe);else if(Te==="MultiPoint")for(var Le=0;Le<ge.length;Le++)Gn(ge[Le],Pe);else if(Te==="LineString")Wn(ge,Pe,we,!1);else if(Te==="MultiLineString"){if(X.lineMetrics){for(Le=0;Le<ge.length;Le++)Wn(ge[Le],Pe=[],we,!1),he.push(Ze(Me,"LineString",Pe,W.properties));return}_o(ge,Pe,we,!1)}else if(Te==="Polygon")_o(ge,Pe,we,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(Le=0;Le<W.geometry.geometries.length;Le++)Ji(he,{id:Me,geometry:W.geometry.geometries[Le],properties:W.properties},X,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Le=0;Le<ge.length;Le++){var yt=[];_o(ge[Le],yt,we,!0),Pe.push(yt)}}he.push(Ze(Me,Te,Pe,W.properties))}}function Gn(he,W){W.push(vo(he[0])),W.push(la(he[1])),W.push(0)}function Wn(he,W,X,le){for(var ge,Te,we=0,Pe=0;Pe<he.length;Pe++){var Me=vo(he[Pe][0]),Le=la(he[Pe][1]);W.push(Me),W.push(Le),W.push(0),Pe>0&&(we+=le?(ge*Le-Me*Te)/2:Math.sqrt(Math.pow(Me-ge,2)+Math.pow(Le-Te,2))),ge=Me,Te=Le}var yt=W.length-3;W[2]=1,zt(W,0,yt,X),W[yt+2]=1,W.size=Math.abs(we),W.start=0,W.end=W.size}function _o(he,W,X,le){for(var ge=0;ge<he.length;ge++){var Te=[];Wn(he[ge],Te,X,le),W.push(Te)}}function vo(he){return he/360+.5}function la(he){var W=Math.sin(he*Math.PI/180),X=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return X<0?0:X>1?1:X}function kr(he,W,X,le,ge,Te,we,Pe){if(le/=W,Te>=(X/=W)&&we<le)return he;if(we<X||Te>=le)return null;for(var Me=[],Le=0;Le<he.length;Le++){var yt=he[Le],lt=yt.geometry,_t=yt.type,si=ge===0?yt.minX:yt.minY,Re=ge===0?yt.maxX:yt.maxY;if(si>=X&&Re<le)Me.push(yt);else if(!(Re<X||si>=le)){var Yt=[];if(_t==="Point"||_t==="MultiPoint")vi(lt,Yt,X,le,ge);else if(_t==="LineString")Un(lt,Yt,X,le,ge,!1,Pe.lineMetrics);else if(_t==="MultiLineString")ro(lt,Yt,X,le,ge,!1);else if(_t==="Polygon")ro(lt,Yt,X,le,ge,!0);else if(_t==="MultiPolygon")for(var di=0;di<lt.length;di++){var kn=[];ro(lt[di],kn,X,le,ge,!0),kn.length&&Yt.push(kn)}if(Yt.length){if(Pe.lineMetrics&&_t==="LineString"){for(di=0;di<Yt.length;di++)Me.push(Ze(yt.id,_t,Yt[di],yt.tags));continue}_t!=="LineString"&&_t!=="MultiLineString"||(Yt.length===1?(_t="LineString",Yt=Yt[0]):_t="MultiLineString"),_t!=="Point"&&_t!=="MultiPoint"||(_t=Yt.length===3?"Point":"MultiPoint"),Me.push(Ze(yt.id,_t,Yt,yt.tags))}}}return Me.length?Me:null}function vi(he,W,X,le,ge){for(var Te=0;Te<he.length;Te+=3){var we=he[Te+ge];we>=X&&we<=le&&(W.push(he[Te]),W.push(he[Te+1]),W.push(he[Te+2]))}}function Un(he,W,X,le,ge,Te,we){for(var Pe,Me,Le=In(he),yt=ge===0?yn:ua,lt=he.start,_t=0;_t<he.length-3;_t+=3){var si=he[_t],Re=he[_t+1],Yt=he[_t+2],di=he[_t+3],kn=he[_t+4],Xi=ge===0?si:Re,nn=ge===0?di:kn,Vi=!1;we&&(Pe=Math.sqrt(Math.pow(si-di,2)+Math.pow(Re-kn,2))),Xi<X?nn>X&&(Me=yt(Le,si,Re,di,kn,X),we&&(Le.start=lt+Pe*Me)):Xi>le?nn<le&&(Me=yt(Le,si,Re,di,kn,le),we&&(Le.start=lt+Pe*Me)):ho(Le,si,Re,Yt),nn<X&&Xi>=X&&(Me=yt(Le,si,Re,di,kn,X),Vi=!0),nn>le&&Xi<=le&&(Me=yt(Le,si,Re,di,kn,le),Vi=!0),!Te&&Vi&&(we&&(Le.end=lt+Pe*Me),W.push(Le),Le=In(he)),we&&(lt+=Pe)}var Ii=he.length-3;si=he[Ii],Re=he[Ii+1],Yt=he[Ii+2],(Xi=ge===0?si:Re)>=X&&Xi<=le&&ho(Le,si,Re,Yt),Ii=Le.length-3,Te&&Ii>=3&&(Le[Ii]!==Le[0]||Le[Ii+1]!==Le[1])&&ho(Le,Le[0],Le[1],Le[2]),Le.length&&W.push(Le)}function In(he){var W=[];return W.size=he.size,W.start=he.start,W.end=he.end,W}function ro(he,W,X,le,ge,Te){for(var we=0;we<he.length;we++)Un(he[we],W,X,le,ge,Te,!1)}function ho(he,W,X,le){he.push(W),he.push(X),he.push(le)}function yn(he,W,X,le,ge,Te){var we=(Te-W)/(le-W);return he.push(Te),he.push(X+(ge-X)*we),he.push(1),we}function ua(he,W,X,le,ge,Te){var we=(Te-X)/(ge-X);return he.push(W+(le-W)*we),he.push(Te),he.push(1),we}function To(he,W){for(var X=[],le=0;le<he.length;le++){var ge,Te=he[le],we=Te.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")ge=wr(Te.geometry,W);else if(we==="MultiLineString"||we==="Polygon"){ge=[];for(var Pe=0;Pe<Te.geometry.length;Pe++)ge.push(wr(Te.geometry[Pe],W))}else if(we==="MultiPolygon")for(ge=[],Pe=0;Pe<Te.geometry.length;Pe++){for(var Me=[],Le=0;Le<Te.geometry[Pe].length;Le++)Me.push(wr(Te.geometry[Pe][Le],W));ge.push(Me)}X.push(Ze(Te.id,we,ge,Te.tags))}return X}function wr(he,W){var X=[];X.size=he.size,he.start!==void 0&&(X.start=he.start,X.end=he.end);for(var le=0;le<he.length;le+=3)X.push(he[le]+W,he[le+1],he[le+2]);return X}function re(he,W){if(he.transformed)return he;var X,le,ge,Te=1<<he.z,we=he.x,Pe=he.y;for(X=0;X<he.features.length;X++){var Me=he.features[X],Le=Me.geometry,yt=Me.type;if(Me.geometry=[],yt===1)for(le=0;le<Le.length;le+=2)Me.geometry.push(ce(Le[le],Le[le+1],W,Te,we,Pe));else for(le=0;le<Le.length;le++){var lt=[];for(ge=0;ge<Le[le].length;ge+=2)lt.push(ce(Le[le][ge],Le[le][ge+1],W,Te,we,Pe));Me.geometry.push(lt)}}return he.transformed=!0,he}function ce(he,W,X,le,ge,Te){return[Math.round(X*(he*le-ge)),Math.round(X*(W*le-Te))]}function me(he,W,X,le,ge){for(var Te=W===ge.maxZoom?0:ge.tolerance/((1<<W)*ge.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:X,y:le,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Pe=0;Pe<he.length;Pe++){we.numFeatures++,Se(we,he[Pe],Te,ge);var Me=he[Pe].minX,Le=he[Pe].minY,yt=he[Pe].maxX,lt=he[Pe].maxY;Me<we.minX&&(we.minX=Me),Le<we.minY&&(we.minY=Le),yt>we.maxX&&(we.maxX=yt),lt>we.maxY&&(we.maxY=lt)}return we}function Se(he,W,X,le){var ge=W.geometry,Te=W.type,we=[];if(Te==="Point"||Te==="MultiPoint")for(var Pe=0;Pe<ge.length;Pe+=3)we.push(ge[Pe]),we.push(ge[Pe+1]),he.numPoints++,he.numSimplified++;else if(Te==="LineString")ze(we,ge,he,X,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(Pe=0;Pe<ge.length;Pe++)ze(we,ge[Pe],he,X,Te==="Polygon",Pe===0);else if(Te==="MultiPolygon")for(var Me=0;Me<ge.length;Me++){var Le=ge[Me];for(Pe=0;Pe<Le.length;Pe++)ze(we,Le[Pe],he,X,!0,Pe===0)}if(we.length){var yt=W.tags||null;if(Te==="LineString"&&le.lineMetrics){for(var lt in yt={},W.tags)yt[lt]=W.tags[lt];yt.mapbox_clip_start=ge.start/ge.size,yt.mapbox_clip_end=ge.end/ge.size}var _t={geometry:we,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:yt};W.id!==null&&(_t.id=W.id),he.features.push(_t)}}function ze(he,W,X,le,ge,Te){var we=le*le;if(le>0&&W.size<(ge?we:le))X.numPoints+=W.length/3;else{for(var Pe=[],Me=0;Me<W.length;Me+=3)(le===0||W[Me+2]>we)&&(X.numSimplified++,Pe.push(W[Me]),Pe.push(W[Me+1])),X.numPoints++;ge&&function(Le,yt){for(var lt=0,_t=0,si=Le.length,Re=si-2;_t<si;Re=_t,_t+=2)lt+=(Le[_t]-Le[Re])*(Le[_t+1]+Le[Re+1]);if(lt>0===yt)for(_t=0,si=Le.length;_t<si/2;_t+=2){var Yt=Le[_t],di=Le[_t+1];Le[_t]=Le[si-2-_t],Le[_t+1]=Le[si-1-_t],Le[si-2-_t]=Yt,Le[si-1-_t]=di}}(Pe,Te),he.push(Pe)}}function $e(he,W){var X=(W=this.options=function(ge,Te){for(var we in Te)ge[we]=Te[we];return ge}(Object.create(this.options),W)).debug;if(X&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var le=function(ge,Te){var we=[];if(ge.type==="FeatureCollection")for(var Pe=0;Pe<ge.features.length;Pe++)Ji(we,ge.features[Pe],Te,Pe);else Ji(we,ge.type==="Feature"?ge:{geometry:ge},Te);return we}(he,W);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(ge,Te){var we=Te.buffer/Te.extent,Pe=ge,Me=kr(ge,1,-1-we,we,0,-1,2,Te),Le=kr(ge,1,1-we,2+we,0,-1,2,Te);return(Me||Le)&&(Pe=kr(ge,1,-we,1+we,0,-1,2,Te)||[],Me&&(Pe=To(Me,1).concat(Pe)),Le&&(Pe=Pe.concat(To(Le,-1)))),Pe}(le,W),le.length&&this.splitTile(le,0,0,0),X&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function it(he,W,X){return 32*((1<<he)*X+W)+he}function Ie(he,W){const X=he.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const le=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!le)return W(null,null);const ge=new De(le.features);let Te=Ki(ge);Te.byteOffset===0&&Te.byteLength===Te.buffer.byteLength||(Te=new Uint8Array(Te)),W(null,{vectorTile:ge,rawData:Te.buffer})}$e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$e.prototype.splitTile=function(he,W,X,le,ge,Te,we){for(var Pe=[he,W,X,le],Me=this.options,Le=Me.debug;Pe.length;){le=Pe.pop(),X=Pe.pop(),W=Pe.pop(),he=Pe.pop();var yt=1<<W,lt=it(W,X,le),_t=this.tiles[lt];if(!_t&&(Le>1&&console.time("creation"),_t=this.tiles[lt]=me(he,W,X,le,Me),this.tileCoords.push({z:W,x:X,y:le}),Le)){Le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,X,le,_t.numFeatures,_t.numPoints,_t.numSimplified),console.timeEnd("creation"));var si="z"+W;this.stats[si]=(this.stats[si]||0)+1,this.total++}if(_t.source=he,ge){if(W===Me.maxZoom||W===ge)continue;var Re=1<<ge-W;if(X!==Math.floor(Te/Re)||le!==Math.floor(we/Re))continue}else if(W===Me.indexMaxZoom||_t.numPoints<=Me.indexMaxPoints)continue;if(_t.source=null,he.length!==0){Le>1&&console.time("clipping");var Yt,di,kn,Xi,nn,Vi,Ii=.5*Me.buffer/Me.extent,dn=.5-Ii,hr=.5+Ii,po=1+Ii;Yt=di=kn=Xi=null,nn=kr(he,yt,X-Ii,X+hr,0,_t.minX,_t.maxX,Me),Vi=kr(he,yt,X+dn,X+po,0,_t.minX,_t.maxX,Me),he=null,nn&&(Yt=kr(nn,yt,le-Ii,le+hr,1,_t.minY,_t.maxY,Me),di=kr(nn,yt,le+dn,le+po,1,_t.minY,_t.maxY,Me),nn=null),Vi&&(kn=kr(Vi,yt,le-Ii,le+hr,1,_t.minY,_t.maxY,Me),Xi=kr(Vi,yt,le+dn,le+po,1,_t.minY,_t.maxY,Me),Vi=null),Le>1&&console.timeEnd("clipping"),Pe.push(Yt||[],W+1,2*X,2*le),Pe.push(di||[],W+1,2*X,2*le+1),Pe.push(kn||[],W+1,2*X+1,2*le),Pe.push(Xi||[],W+1,2*X+1,2*le+1)}}},$e.prototype.getTile=function(he,W,X){var le=this.options,ge=le.extent,Te=le.debug;if(he<0||he>24)return null;var we=1<<he,Pe=it(he,W=(W%we+we)%we,X);if(this.tiles[Pe])return re(this.tiles[Pe],ge);Te>1&&console.log("drilling down to z%d-%d-%d",he,W,X);for(var Me,Le=he,yt=W,lt=X;!Me&&Le>0;)Le--,yt=Math.floor(yt/2),lt=Math.floor(lt/2),Me=this.tiles[it(Le,yt,lt)];return Me&&Me.source?(Te>1&&console.log("found parent tile z%d-%d-%d",Le,yt,lt),Te>1&&console.time("drilling down"),this.splitTile(Me.source,Le,yt,lt,he,W,X),Te>1&&console.timeEnd("drilling down"),this.tiles[Pe]?re(this.tiles[Pe],ge):null):null};class Ve extends ue{constructor(W,X,le,ge){super(W,X,le,Ie),ge&&(this.loadGeoJSON=ge)}loadData(W,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=X,this._pendingLoadDataParams=W,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const W=this._pendingCallback,X=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const le=!!(X&&X.request&&X.request.collectResourceTiming)&&new h.RequestPerformance(X.request);this.loadGeoJSON(X,(ge,Te)=>{if(ge||!Te)return W(ge);if(typeof Te!="object")return W(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{de(Te,!0);try{if(X.filter){const Pe=h.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Pe.result==="error")throw new Error(Pe.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));const Me=Te.features.filter(Le=>Pe.value.evaluate({zoom:0},Le));Te={type:"FeatureCollection",features:Me}}this._geoJSONIndex=X.cluster?new ln(function({superclusterOptions:Pe,clusterProperties:Me}){if(!Me||!Pe)return Pe;const Le={},yt={},lt={accumulated:null,zoom:0},_t={properties:null},si=Object.keys(Me);for(const Re of si){const[Yt,di]=Me[Re],kn=h.createExpression(di),Xi=h.createExpression(typeof Yt=="string"?[Yt,["accumulated"],["get",Re]]:Yt);Le[Re]=kn.value,yt[Re]=Xi.value}return Pe.map=Re=>{_t.properties=Re;const Yt={};for(const di of si)Yt[di]=Le[di].evaluate(lt,_t);return Yt},Pe.reduce=(Re,Yt)=>{_t.properties=Yt;for(const di of si)lt.accumulated=Re[di],Re[di]=yt[di].evaluate(lt,_t)},Pe}(X)).load(Te.features):function(Pe,Me){return new $e(Pe,Me)}(Te,X.geojsonVtOptions)}catch(Pe){return W(Pe)}this.loaded={};const we={};if(le){const Pe=le.finish();Pe&&(we.resourceTiming={},we.resourceTiming[X.source]=JSON.parse(JSON.stringify(Pe)))}W(null,we)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(W,X){const le=this.loaded;return le&&le[W.uid]?super.reloadTile(W,X):this.loadTile(W,X)}loadGeoJSON(W,X){if(W.request)h.getJSON(W.request,X);else{if(typeof W.data!="string")return X(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return X(null,JSON.parse(W.data))}catch{return X(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}removeSource(W,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),X()}getClusterExpansionZoom(W,X){try{X(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(le){X(le)}}getClusterChildren(W,X){try{X(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(le){X(le)}}getClusterLeaves(W,X){try{X(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(le){X(le)}}}class mt{constructor(W){this.self=W,this.actor=new h.Actor(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ue,geojson:Ve},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(X,le)=>{if(this.workerSourceTypes[X])throw new Error(`Worker source with name "${X}" already registered.`);this.workerSourceTypes[X]=le},this.self.registerRTLTextPlugin=X=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=X.applyArabicShaping,h.plugin.processBidirectionalText=X.processBidirectionalText,h.plugin.processStyledBidirectionalText=X.processStyledBidirectionalText}}setReferrer(W,X){this.referrer=X}setImages(W,X,le){this.availableImages[W]=X;for(const ge in this.workerSources[W]){const Te=this.workerSources[W][ge];for(const we in Te)Te[we].availableImages=X}le()}setLayers(W,X,le){this.getLayerIndex(W).replace(X),le()}updateLayers(W,X,le){this.getLayerIndex(W).update(X.layers,X.removedIds),le()}loadTile(W,X,le){this.getWorkerSource(W,X.type,X.source).loadTile(X,le)}loadDEMTile(W,X,le){this.getDEMWorkerSource(W,X.source).loadTile(X,le)}reloadTile(W,X,le){this.getWorkerSource(W,X.type,X.source).reloadTile(X,le)}abortTile(W,X,le){this.getWorkerSource(W,X.type,X.source).abortTile(X,le)}removeTile(W,X,le){this.getWorkerSource(W,X.type,X.source).removeTile(X,le)}removeDEMTile(W,X){this.getDEMWorkerSource(W,X.source).removeTile(X)}removeSource(W,X,le){if(!this.workerSources[W]||!this.workerSources[W][X.type]||!this.workerSources[W][X.type][X.source])return;const ge=this.workerSources[W][X.type][X.source];delete this.workerSources[W][X.type][X.source],ge.removeSource!==void 0?ge.removeSource(X,le):le()}loadWorkerSource(W,X,le){try{this.self.importScripts(X.url),le()}catch(ge){le(ge.toString())}}syncRTLPluginState(W,X,le){try{h.plugin.setState(X);const ge=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&ge!=null){this.self.importScripts(ge);const Te=h.plugin.isParsed();le(Te?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ge}`),Te)}}catch(ge){le(ge.toString())}}getAvailableImages(W){let X=this.availableImages[W];return X||(X=[]),X}getLayerIndex(W){let X=this.layerIndexes[W];return X||(X=this.layerIndexes[W]=new z),X}getWorkerSource(W,X,le){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][X]||(this.workerSources[W][X]={}),!this.workerSources[W][X][le]){const ge={send:(Te,we,Pe)=>{this.actor.send(Te,we,Pe,W)}};this.workerSources[W][X][le]=new this.workerSourceTypes[X](ge,this.getLayerIndex(W),this.getAvailableImages(W))}return this.workerSources[W][X][le]}getDEMWorkerSource(W,X){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][X]||(this.demWorkerSources[W][X]=new te),this.demWorkerSources[W][X]}enforceCacheSizeLimit(W,X){h.enforceCacheSizeLimit(X)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new mt(self)),mt}),_(["./shared"],function(h){var I=L;function L(C){return!function(l){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var A,k,B=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(B);try{k=new Worker(j),A=!0}catch{A=!1}return k&&k.terminate(),URL.revokeObjectURL(j),A}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var A=document.createElement("canvas");A.width=A.height=1;var k=A.getContext("2d");if(!k)return!1;var B=k.getImageData(0,0,1,1);return B&&B.width===A.width}()?(z[v=l&&l.failIfMajorPerformanceCaveat]===void 0&&(z[v]=function(A){var k,B=function(j){var Z=document.createElement("canvas"),J=Object.create(L.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=j,Z.getContext("webgl",J)||Z.getContext("experimental-webgl",J)}(A);if(!B)return!1;try{k=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!k||B.isContextLost())&&(B.shaderSource(k,"void main() {}"),B.compileShader(k),B.getShaderParameter(k,B.COMPILE_STATUS)===!0)}(v)),z[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var v}(C)}var z={};function R(C,l){if(Array.isArray(C)){if(!Array.isArray(l)||C.length!==l.length)return!1;for(let v=0;v<C.length;v++)if(!R(C[v],l[v]))return!1;return!0}if(typeof C=="object"&&C!==null&&l!==null){if(typeof l!="object"||Object.keys(C).length!==Object.keys(l).length)return!1;for(const v in C)if(!R(C[v],l[v]))return!1;return!0}return C===l}L.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class O{static testProp(l){if(!O.docStyle)return l[0];for(let v=0;v<l.length;v++)if(l[v]in O.docStyle)return l[v];return l[0]}static create(l,v,A){const k=window.document.createElement(l);return v!==void 0&&(k.className=v),A&&A.appendChild(k),k}static createNS(l,v){return window.document.createElementNS(l,v)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(l,v){l.style[O.transformProp]=v}static addEventListener(l,v,A,k={}){l.addEventListener(v,A,"passive"in k?k:k.capture)}static removeEventListener(l,v,A,k={}){l.removeEventListener(v,A,"passive"in k?k:k.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(l,v){const A=l.getBoundingClientRect();return new h.pointGeometry(v.clientX-A.left-l.clientLeft,v.clientY-A.top-l.clientTop)}static touchPos(l,v){const A=l.getBoundingClientRect(),k=[];for(let B=0;B<v.length;B++)k.push(new h.pointGeometry(v[B].clientX-A.left-l.clientLeft,v[B].clientY-A.top-l.clientTop));return k}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}O.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);class Y{constructor(l){this._transformRequestFn=l}transformRequest(l,v){return this._transformRequestFn&&this._transformRequestFn(l,v)||{url:l}}normalizeSpriteURL(l,v,A){const k=function(B){const j=B.match(ee);if(!j)throw new Error(`Unable to parse URL "${B}"`);return{protocol:j[1],authority:j[2],path:j[3]||"/",params:j[4]?j[4].split("&"):[]}}(l);return k.path+=`${v}${A}`,function(B){const j=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${j}`}(k)}setTransformRequest(l){this._transformRequestFn=l}}const ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ue(C){var l=new h.ARRAY_TYPE(3);return l[0]=C[0],l[1]=C[1],l[2]=C[2],l}var te,de=function(C,l,v){return C[0]=l[0]-v[0],C[1]=l[1]-v[1],C[2]=l[2]-v[2],C};te=new h.ARRAY_TYPE(3),h.ARRAY_TYPE!=Float32Array&&(te[0]=0,te[1]=0,te[2]=0);var oe=function(C){var l=C[0],v=C[1];return l*l+v*v};(function(){var C=new h.ARRAY_TYPE(2);h.ARRAY_TYPE!=Float32Array&&(C[0]=0,C[1]=0)})();class be{constructor(l,v,A,k){this.context=l,this.format=A,this.texture=l.gl.createTexture(),this.update(v,k)}update(l,v,A){const{width:k,height:B}=l,j=!(this.size&&this.size[0]===k&&this.size[1]===B||A),{context:Z}=this,{gl:J}=Z;if(this.useMipmap=Boolean(v&&v.useMipmap),J.bindTexture(J.TEXTURE_2D,this.texture),Z.pixelStoreUnpackFlipY.set(!1),Z.pixelStoreUnpack.set(1),Z.pixelStoreUnpackPremultiplyAlpha.set(this.format===J.RGBA&&(!v||v.premultiply!==!1)),j)this.size=[k,B],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||h.isImageBitmap(l)?J.texImage2D(J.TEXTURE_2D,0,this.format,this.format,J.UNSIGNED_BYTE,l):J.texImage2D(J.TEXTURE_2D,0,this.format,k,B,0,this.format,J.UNSIGNED_BYTE,l.data);else{const{x:ne,y:se}=A||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||h.isImageBitmap(l)?J.texSubImage2D(J.TEXTURE_2D,0,ne,se,J.RGBA,J.UNSIGNED_BYTE,l):J.texSubImage2D(J.TEXTURE_2D,0,ne,se,k,B,J.RGBA,J.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&J.generateMipmap(J.TEXTURE_2D)}bind(l,v,A){const{context:k}=this,{gl:B}=k;B.bindTexture(B.TEXTURE_2D,this.texture),A!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=B.LINEAR),l!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,l),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,A||l),this.filter=l),v!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,v),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,v),this.wrap=v)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function qe(C){const{userImage:l}=C;return!!(l&&l.render&&l.render())&&(C.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ne extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:v,callback:A}of this.requestors)this._notify(v,A);this.requestors=[]}}getImage(l){return this.images[l]}addImage(l,v){this._validate(l,v)&&(this.images[l]=v)}_validate(l,v){let A=!0;return this._validateStretch(v.stretchX,v.data&&v.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),A=!1),this._validateStretch(v.stretchY,v.data&&v.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),A=!1),this._validateContent(v.content,v)||(this.fire(new h.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),A=!1),A}_validateStretch(l,v){if(!l)return!0;let A=0;for(const k of l){if(k[0]<A||k[1]<k[0]||v<k[1])return!1;A=k[1]}return!0}_validateContent(l,v){return!(l&&(l.length!==4||l[0]<0||v.data.width<l[0]||l[1]<0||v.data.height<l[1]||l[2]<0||v.data.width<l[2]||l[3]<0||v.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,v){v.version=this.images[l].version+1,this.images[l]=v,this.updatedImages[l]=!0}removeImage(l){const v=this.images[l];delete this.images[l],delete this.patterns[l],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,v){let A=!0;if(!this.isLoaded())for(const k of l)this.images[k]||(A=!1);this.isLoaded()||A?this._notify(l,v):this.requestors.push({ids:l,callback:v})}_notify(l,v){const A={};for(const k of l){this.images[k]||this.fire(new h.Event("styleimagemissing",{id:k}));const B=this.images[k];B?A[k]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:h.warnOnce(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}v(null,A)}getPixelSize(){const{width:l,height:v}=this.atlasImage;return{width:l,height:v}}getPattern(l){const v=this.patterns[l],A=this.getImage(l);if(!A)return null;if(v&&v.position.version===A.version)return v.position;if(v)v.position.version=A.version;else{const k={w:A.data.width+2,h:A.data.height+2,x:0,y:0},B=new h.ImagePosition(k,A);this.patterns[l]={bin:k,position:B}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const v=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new be(l,this.atlasImage,v.RGBA),this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const B in this.patterns)l.push(this.patterns[B].bin);const{w:v,h:A}=h.potpack(l),k=this.atlasImage;k.resize({width:v||1,height:A||1});for(const B in this.patterns){const{bin:j}=this.patterns[B],Z=j.x+1,J=j.y+1,ne=this.images[B].data,se=ne.width,ye=ne.height;h.RGBAImage.copy(ne,k,{x:0,y:0},{x:Z,y:J},{width:se,height:ye}),h.RGBAImage.copy(ne,k,{x:0,y:ye-1},{x:Z,y:J-1},{width:se,height:1}),h.RGBAImage.copy(ne,k,{x:0,y:0},{x:Z,y:J+ye},{width:se,height:1}),h.RGBAImage.copy(ne,k,{x:se-1,y:0},{x:Z-1,y:J},{width:1,height:ye}),h.RGBAImage.copy(ne,k,{x:0,y:0},{x:Z+se,y:J},{width:1,height:ye})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const v of l){if(this.callbackDispatchedThisFrame[v])continue;this.callbackDispatchedThisFrame[v]=!0;const A=this.images[v];qe(A)&&this.updateImage(v,A)}}}const De=1e20;function fe(C,l,v,A,k,B,j,Z,J){for(let ne=l;ne<l+A;ne++)ct(C,v*B+ne,B,k,j,Z,J);for(let ne=v;ne<v+k;ne++)ct(C,ne*B+l,1,A,j,Z,J)}function ct(C,l,v,A,k,B,j){B[0]=0,j[0]=-De,j[1]=De,k[0]=C[l];for(let Z=1,J=0,ne=0;Z<A;Z++){k[Z]=C[l+Z*v];const se=Z*Z;do{const ye=B[J];ne=(k[Z]-k[ye]+se-ye*ye)/(Z-ye)/2}while(ne<=j[J]&&--J>-1);J++,B[J]=Z,j[J]=ne,j[J+1]=De}for(let Z=0,J=0;Z<A;Z++){for(;j[J+1]<Z;)J++;const ne=B[J],se=Z-ne;C[l+Z*v]=k[ne]+se*se}}class st{constructor(l,v){this.requestManager=l,this.localIdeographFontFamily=v,this.entries={}}setURL(l){this.url=l}getGlyphs(l,v){const A=[];for(const k in l)for(const B of l[k])A.push({stack:k,id:B});h.asyncAll(A,({stack:k,id:B},j)=>{let Z=this.entries[k];Z||(Z=this.entries[k]={glyphs:{},requests:{},ranges:{}});let J=Z.glyphs[B];if(J!==void 0)return void j(null,{stack:k,id:B,glyph:J});if(J=this._tinySDF(Z,k,B),J)return Z.glyphs[B]=J,void j(null,{stack:k,id:B,glyph:J});const ne=Math.floor(B/256);if(256*ne>65535)return void j(new Error("glyphs > 65535 not supported"));if(Z.ranges[ne])return void j(null,{stack:k,id:B,glyph:J});let se=Z.requests[ne];se||(se=Z.requests[ne]=[],st.loadGlyphRange(k,ne,this.url,this.requestManager,(ye,Ae)=>{if(Ae){for(const Je in Ae)this._doesCharSupportLocalGlyph(+Je)||(Z.glyphs[+Je]=Ae[+Je]);Z.ranges[ne]=!0}for(const Je of se)Je(ye,Ae);delete Z.requests[ne]})),se.push((ye,Ae)=>{ye?j(ye):Ae&&j(null,{stack:k,id:B,glyph:Ae[B]||null})})},(k,B)=>{if(k)v(k);else if(B){const j={};for(const{stack:Z,id:J,glyph:ne}of B)(j[Z]||(j[Z]={}))[J]=ne&&{id:ne.id,bitmap:ne.bitmap.clone(),metrics:ne.metrics};v(null,j)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(h.unicodeBlockLookup["CJK Unified Ideographs"](l)||h.unicodeBlockLookup["Hangul Syllables"](l)||h.unicodeBlockLookup.Hiragana(l)||h.unicodeBlockLookup.Katakana(l))}_tinySDF(l,v,A){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(A))return;let B=l.tinySDF;if(!B){let Z="400";/bold/i.test(v)?Z="900":/medium/i.test(v)?Z="500":/light/i.test(v)&&(Z="200"),B=l.tinySDF=new st.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:k,fontWeight:Z})}const j=B.draw(String.fromCharCode(A));return{id:A,bitmap:new h.AlphaImage({width:j.width||30,height:j.height||30},j.data),metrics:{width:j.glyphWidth||24,height:j.glyphHeight||24,left:j.glyphLeft||0,top:j.glyphTop-27||-8,advance:j.glyphAdvance||24}}}}st.loadGlyphRange=function(C,l,v,A,k){const B=256*l,j=B+255,Z=A.transformRequest(v.replace("{fontstack}",C).replace("{range}",`${B}-${j}`),h.ResourceType.Glyphs);h.getArrayBuffer(Z,(J,ne)=>{if(J)k(J);else if(ne){const se={};for(const ye of h.parseGlyphPBF(ne))se[ye.id]=ye;k(null,se)}})},st.TinySDF=class{constructor({fontSize:C=24,buffer:l=3,radius:v=8,cutoff:A=.25,fontFamily:k="sans-serif",fontWeight:B="normal",fontStyle:j="normal"}={}){this.buffer=l,this.cutoff=A,this.radius=v;const Z=this.size=C+4*l,J=this._createCanvas(Z),ne=this.ctx=J.getContext("2d",{willReadFrequently:!0});ne.font=`${j} ${B} ${C}px ${k}`,ne.textBaseline="alphabetic",ne.textAlign="left",ne.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z)}_createCanvas(C){const l=document.createElement("canvas");return l.width=l.height=C,l}draw(C){const{width:l,actualBoundingBoxAscent:v,actualBoundingBoxDescent:A,actualBoundingBoxLeft:k,actualBoundingBoxRight:B}=this.ctx.measureText(C),j=Math.ceil(v),Z=Math.min(this.size-this.buffer,Math.ceil(B-k)),J=Math.min(this.size-this.buffer,j+Math.ceil(A)),ne=Z+2*this.buffer,se=J+2*this.buffer,ye=Math.max(ne*se,0),Ae=new Uint8ClampedArray(ye),Je={data:Ae,width:ne,height:se,glyphWidth:Z,glyphHeight:J,glyphTop:j,glyphLeft:0,glyphAdvance:l};if(Z===0||J===0)return Je;const{ctx:ke,buffer:Ke,gridInner:ht,gridOuter:ut}=this;ke.clearRect(Ke,Ke,Z,J),ke.fillText(C,Ke,Ke+j);const bt=ke.getImageData(Ke,Ke,Z,J);ut.fill(De,0,ye),ht.fill(0,0,ye);for(let ft=0;ft<J;ft++)for(let jt=0;jt<Z;jt++){const Ot=bt.data[4*(ft*Z+jt)+3]/255;if(Ot===0)continue;const Ut=(ft+Ke)*ne+jt+Ke;if(Ot===1)ut[Ut]=0,ht[Ut]=De;else{const ti=.5-Ot;ut[Ut]=ti>0?ti*ti:0,ht[Ut]=ti<0?ti*ti:0}}fe(ut,0,0,ne,se,ne,this.f,this.v,this.z),fe(ht,Ke,Ke,Z,J,ne,this.f,this.v,this.z);for(let ft=0;ft<ye;ft++){const jt=Math.sqrt(ut[ft])-Math.sqrt(ht[ft]);Ae[ft]=Math.round(255-255*(jt/this.radius+this.cutoff))}return Je}};const Ge=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(C,l){return h.sphericalToCartesian(C.expression.evaluate(l))}interpolate(C,l,v){return{x:h.number(C.x,l.x,v),y:h.number(C.y,l.y,v),z:h.number(C.z,l.z,v)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),Ue="-transition";class Rt extends h.Evented{constructor(l){super(),this._transitionable=new h.Transitionable(Ge),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,v={}){if(!this._validate(h.validateLight,l,v))for(const A in l){const k=l[A];A.endsWith(Ue)?this._transitionable.setTransition(A.slice(0,-Ue.length),k):this._transitionable.setValue(A,k)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,v,A){return(!A||A.validate!==!1)&&h.emitValidationErrors(this,l.call(h.validateStyle,h.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class He{constructor(l,v){this.width=l,this.height=v,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,v){const A=l.join(",")+String(v);return this.dashEntry[A]||(this.dashEntry[A]=this.addDash(l,v)),this.dashEntry[A]}getDashRanges(l,v,A){const k=[];let B=l.length%2==1?-l[l.length-1]*A:0,j=l[0]*A,Z=!0;k.push({left:B,right:j,isDash:Z,zeroLength:l[0]===0});let J=l[0];for(let ne=1;ne<l.length;ne++){Z=!Z;const se=l[ne];B=J*A,J+=se,j=J*A,k.push({left:B,right:j,isDash:Z,zeroLength:se===0})}return k}addRoundDash(l,v,A){const k=v/2;for(let B=-A;B<=A;B++){const j=this.width*(this.nextRow+A+B);let Z=0,J=l[Z];for(let ne=0;ne<this.width;ne++){ne/J.right>1&&(J=l[++Z]);const se=Math.abs(ne-J.left),ye=Math.abs(ne-J.right),Ae=Math.min(se,ye);let Je;const ke=B/A*(k+1);if(J.isDash){const Ke=k-Math.abs(ke);Je=Math.sqrt(Ae*Ae+Ke*Ke)}else Je=k-Math.sqrt(Ae*Ae+ke*ke);this.data[j+ne]=Math.max(0,Math.min(255,Je+128))}}}addRegularDash(l){for(let Z=l.length-1;Z>=0;--Z){const J=l[Z],ne=l[Z+1];J.zeroLength?l.splice(Z,1):ne&&ne.isDash===J.isDash&&(ne.left=J.left,l.splice(Z,1))}const v=l[0],A=l[l.length-1];v.isDash===A.isDash&&(v.left=A.left-this.width,A.right=v.right+this.width);const k=this.width*this.nextRow;let B=0,j=l[B];for(let Z=0;Z<this.width;Z++){Z/j.right>1&&(j=l[++B]);const J=Math.abs(Z-j.left),ne=Math.abs(Z-j.right),se=Math.min(J,ne);this.data[k+Z]=Math.max(0,Math.min(255,(j.isDash?se:-se)+128))}}addDash(l,v){const A=v?7:0,k=2*A+1;if(this.nextRow+k>this.height)return h.warnOnce("LineAtlas out of space"),null;let B=0;for(let Z=0;Z<l.length;Z++)B+=l[Z];if(B!==0){const Z=this.width/B,J=this.getDashRanges(l,this.width,Z);v?this.addRoundDash(J,Z,A):this.addRegularDash(J)}const j={y:(this.nextRow+A+.5)/this.height,height:2*A/this.height,width:B};return this.nextRow+=k,this.dirty=!0,j}bind(l){const v=l.gl;this.texture?(v.bindTexture(v.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,v.texSubImage2D(v.TEXTURE_2D,0,0,0,this.width,this.height,v.ALPHA,v.UNSIGNED_BYTE,this.data))):(this.texture=v.createTexture(),v.bindTexture(v.TEXTURE_2D,this.texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texImage2D(v.TEXTURE_2D,0,v.ALPHA,this.width,this.height,0,v.ALPHA,v.UNSIGNED_BYTE,this.data))}}class Mt{constructor(l,v){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const A=this.workerPool.acquire(this.id);for(let k=0;k<A.length;k++){const B=new Mt.Actor(A[k],v,this.id);B.name=`Worker ${k}`,this.actors.push(B)}}broadcast(l,v,A){h.asyncAll(this.actors,(k,B)=>{k.send(l,v,B)},A=A||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function li(C,l,v){const A=function(k,B){if(k)return v(k);if(B){const j=h.pick(h.extend(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(j.vectorLayers=B.vector_layers,j.vectorLayerIds=j.vectorLayers.map(Z=>Z.id)),v(null,j)}};return C.url?h.getJSON(l.transformRequest(C.url,h.ResourceType.Source),A):h.exported.frame(()=>A(null,C))}Mt.Actor=h.Actor;class Et{constructor(l,v,A){this.bounds=h.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=v||0,this.maxzoom=A||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const v=Math.pow(2,l.z),A=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*v),k=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*v),B=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*v),j=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*v);return l.x>=A&&l.x<B&&l.y>=k&&l.y<j}}class Gt extends h.Evented{constructor(l,v,A,k){if(super(),this.id=l,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(v,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,(l,v)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l?this.fire(new h.ErrorEvent(l)):v&&(h.extend(this,v),v.bounds&&(this.tileBounds=new Et(v.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(l,v){const A=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(A,h.ResourceType.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(j,Z){return delete l.request,l.aborted?v(null):j&&j.status!==404?v(j):(Z&&Z.resourceTiming&&(l.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&l.setExpiryData(Z),l.loadVectorData(Z,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),v(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=v:l.request=l.actor.send("reloadTile",k,B.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",k,B.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ye extends h.Evented{constructor(l,v,A,k){super(),this.id=l,this.dispatcher=A,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},v),h.extend(this,h.pick(v,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,(l,v)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new h.ErrorEvent(l)):v&&(h.extend(this,v),v.bounds&&(this.tileBounds=new Et(v.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,v){const A=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=h.getImage(this.map._requestManager.transformRequest(A,h.ResourceType.Tile),(k,B,j)=>{if(delete l.request,l.aborted)l.state="unloaded",v(null);else if(k)l.state="errored",v(k);else if(B){this.map._refreshExpiredTiles&&l.setExpiryData(j);const Z=this.map.painter.context,J=Z.gl;l.texture=this.map.painter.getTileTexture(B.width),l.texture?l.texture.update(B,{useMipmap:!0}):(l.texture=new be(Z,B,J.RGBA,{useMipmap:!0}),l.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),Z.extTextureFilterAnisotropic&&J.texParameterf(J.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax)),l.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),v(null)}})}abortTile(l,v){l.request&&(l.request.cancel(),delete l.request),v()}unloadTile(l,v){l.texture&&this.map.painter.saveTileTexture(l.texture),v()}hasTransition(){return!1}}let wt;class Lt extends Ye{constructor(l,v,A,k){super(l,v,A,k),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},v),this.encoding=v.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(l,v){const A=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function k(B,j){B&&(l.state="errored",v(B)),j&&(l.dem=j,l.needsHillshadePrepare=!0,l.state="loaded",v(null))}l.request=h.getImage(this.map._requestManager.transformRequest(A,h.ResourceType.Tile),function(B,j){if(delete l.request,l.aborted)l.state="unloaded",v(null);else if(B)l.state="errored",v(B);else if(j){this.map._refreshExpiredTiles&&l.setExpiryData(j),delete j.cacheControl,delete j.expires;const Z=h.isImageBitmap(j)&&(wt==null&&(wt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),wt)?j:h.exported.getImageData(j,1),J={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:Z,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",J,k.bind(this)))}}.bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const v=l.canonical,A=Math.pow(2,v.z),k=(v.x-1+A)%A,B=v.x===0?l.wrap-1:l.wrap,j=(v.x+1+A)%A,Z=v.x+1===A?l.wrap+1:l.wrap,J={};return J[new h.OverscaledTileID(l.overscaledZ,B,v.z,k,v.y).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,Z,v.z,j,v.y).key]={backfilled:!1},v.y>0&&(J[new h.OverscaledTileID(l.overscaledZ,B,v.z,k,v.y-1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,l.wrap,v.z,v.x,v.y-1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,Z,v.z,j,v.y-1).key]={backfilled:!1}),v.y+1<A&&(J[new h.OverscaledTileID(l.overscaledZ,B,v.z,k,v.y+1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,l.wrap,v.z,v.x,v.y+1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,Z,v.z,j,v.y+1).key]={backfilled:!1}),J}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class ni extends h.Evented{constructor(l,v,A,k){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=A.getActor(),this.setEventedParent(k),this._data=v.data,this._options=h.extend({},v),this._collectResourceTiming=v.collectResourceTiming,v.maxzoom!==void 0&&(this.maxzoom=v.maxzoom),v.type&&(this.type=v.type),v.attribution&&(this.attribution=v.attribution),this.promoteId=v.promoteId;const B=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:v.cluster||!1,geojsonVtOptions:{buffer:(v.buffer!==void 0?v.buffer:128)*B,tolerance:(v.tolerance!==void 0?v.tolerance:.375)*B,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:v.lineMetrics||!1,generateId:v.generateId||!1},superclusterOptions:{maxZoom:v.clusterMaxZoom!==void 0?v.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,v.clusterMinPoints||2),extent:h.EXTENT,radius:(v.clusterRadius||50)*B,log:!1,generateId:v.generateId||!1},clusterProperties:v.clusterProperties,filter:v.filter},v.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData("content"),this}getClusterExpansionZoom(l,v){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},v),this}getClusterChildren(l,v){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},v),this}getClusterLeaves(l,v,A,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:v,offset:A},k),this}_updateWorkerData(l){const v=h.extend({},this.workerOptions),A=this._data;typeof A=="string"?(v.request=this.map._requestManager.transformRequest(h.exported.resolveURL(A),h.ResourceType.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(A),this._pendingLoads++,this.fire(new h.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,v,(k,B)=>{if(this._pendingLoads--,this._removed||B&&B.abandoned)return;let j=null;if(B&&B.resourceTiming&&B.resourceTiming[this.id]&&(j=B.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:v.source},null),k)return void this.fire(new h.ErrorEvent(k));const Z={dataType:"source",sourceDataType:l};this._collectResourceTiming&&j&&j.length>0&&h.extend(Z,{resourceTiming:j}),this.fire(new h.Event("data",Z))})}loaded(){return this._pendingLoads===0}loadTile(l,v){const A=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const k={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(A,k,(B,j)=>(delete l.request,l.unloadVectorData(),l.aborted?v(null):B?v(B):(l.loadVectorData(j,this.map.painter,A==="reloadTile"),v(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Xt=h.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ki extends h.Evented{constructor(l,v,A,k){super(),this.id=l,this.dispatcher=A,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=v}load(l,v){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(A,k)=>{this._loaded=!0,A?this.fire(new h.ErrorEvent(A)):k&&(this.image=k,l&&(this.coordinates=l),v&&v(),this._finishLoading())})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}setCoordinates(l){this.coordinates=l;const v=l.map(h.MercatorCoordinate.fromLngLat);this.tileID=function(k){let B=1/0,j=1/0,Z=-1/0,J=-1/0;for(const Ae of k)B=Math.min(B,Ae.x),j=Math.min(j,Ae.y),Z=Math.max(Z,Ae.x),J=Math.max(J,Ae.y);const ne=Math.max(Z-B,J-j),se=Math.max(0,Math.floor(-Math.log(ne)/Math.LN2)),ye=Math.pow(2,se);return new h.CanonicalTileID(se,Math.floor((B+Z)/2*ye),Math.floor((j+J)/2*ye))}(v),this.minzoom=this.maxzoom=this.tileID.z;const A=v.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new h.RasterBoundsArray,this._boundsArray.emplaceBack(A[0].x,A[0].y,0,0),this._boundsArray.emplaceBack(A[1].x,A[1].y,h.EXTENT,0),this._boundsArray.emplaceBack(A[3].x,A[3].y,0,h.EXTENT),this._boundsArray.emplaceBack(A[2].x,A[2].y,h.EXTENT,h.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,v=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new be(l,this.image,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE));for(const A in this.tiles){const k=this.tiles[A];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}loadTile(l,v){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},v(null)):(l.state="errored",v(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ei extends Ki{constructor(l,v,A,k){super(l,v,A,k),this.roundZoom=!0,this.type="video",this.options=v}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const v of l.urls)this.urls.push(this.map._requestManager.transformRequest(v,h.ResourceType.Source).url);h.getVideo(this.urls,(v,A)=>{this._loaded=!0,v?this.fire(new h.ErrorEvent(v)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const v=this.video.seekable;l<v.start(0)||l>v.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${v.start(0)} and ${v.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,v=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.texSubImage2D(v.TEXTURE_2D,0,0,0,v.RGBA,v.UNSIGNED_BYTE,this.video)):(this.texture=new be(l,this.video,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE));for(const A in this.tiles){const k=this.tiles[A];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Jt extends Ki{constructor(l,v,A,k){super(l,v,A,k),v.coordinates?Array.isArray(v.coordinates)&&v.coordinates.length===4&&!v.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(j=>typeof j!="number"))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),v.animate&&typeof v.animate!="boolean"&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),v.canvas?typeof v.canvas=="string"||v.canvas instanceof HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=v,this.animate=v.animate===void 0||v.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const v=this.map.painter.context,A=v.gl;this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new be(v,this.canvas,A.RGBA,{premultiply:!0});for(const k in this.tiles){const B=this.tiles[k];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const xi={vector:Gt,raster:Ye,"raster-dem":Lt,geojson:ni,video:ei,image:Ki,canvas:Jt};function ai(C,l){const v=h.create();return h.translate(v,v,[1,1,0]),h.scale(v,v,[.5*C.width,.5*C.height,1]),h.multiply(v,v,C.calculatePosMatrix(l.toUnwrapped()))}function dt(C,l,v,A,k,B){const j=function(ye,Ae,Je){if(ye)for(const ke of ye){const Ke=Ae[ke];if(Ke&&Ke.source===Je&&Ke.type==="fill-extrusion")return!0}else for(const ke in Ae){const Ke=Ae[ke];if(Ke.source===Je&&Ke.type==="fill-extrusion")return!0}return!1}(k&&k.layers,l,C.id),Z=B.maxPitchScaleFactor(),J=C.tilesIn(A,Z,j);J.sort(It);const ne=[];for(const ye of J)ne.push({wrappedTileID:ye.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(l,v,C._state,ye.queryGeometry,ye.cameraQueryGeometry,ye.scale,k,B,Z,ai(C.transform,ye.tileID))});const se=function(ye){const Ae={},Je={};for(const ke of ye){const Ke=ke.queryResults,ht=ke.wrappedTileID,ut=Je[ht]=Je[ht]||{};for(const bt in Ke){const ft=Ke[bt],jt=ut[bt]=ut[bt]||{},Ot=Ae[bt]=Ae[bt]||[];for(const Ut of ft)jt[Ut.featureIndex]||(jt[Ut.featureIndex]=!0,Ot.push(Ut))}}return Ae}(ne);for(const ye in se)se[ye].forEach(Ae=>{const Je=Ae.feature,ke=C.getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=ke});return se}function It(C,l){const v=C.tileID,A=l.tileID;return v.overscaledZ-A.overscaledZ||v.canonical.y-A.canonical.y||v.wrap-A.wrap||v.canonical.x-A.canonical.x}class St{constructor(l,v){this.tileID=l,this.uid=h.uniqueId(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const v=l+this.timeAdded;v<h.exported.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(l,v,A){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(k,B){const j={};if(!B)return j;for(const Z of k){const J=Z.layerIds.map(ne=>B.getLayer(ne)).filter(Boolean);if(J.length!==0){Z.layers=J,Z.stateDependentLayerIds&&(Z.stateDependentLayers=Z.stateDependentLayerIds.map(ne=>J.filter(se=>se.id===ne)[0]));for(const ne of J)j[ne.id]=Z}}return j}(l.buckets,v.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.SymbolBucket){if(this.hasSymbolBuckets=!0,!A)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.SymbolBucket&&B.hasRTLText){this.hasRTLText=!0,h.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const k in this.buckets){const B=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(k).queryRadius(B))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new h.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const A in this.buckets){const k=this.buckets[A];k.uploadPending()&&k.upload(l)}const v=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new be(l,this.imageAtlas.image,v.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new be(l,this.glyphAtlasImage,v.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,v,A,k,B,j,Z,J,ne,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:B,scale:j,tileSize:this.tileSize,pixelPosMatrix:se,transform:J,params:Z,queryPadding:this.queryPadding*ne},l,v,A):{}}querySourceFeatures(l,v){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const k=A.loadVTLayers(),B=v?v.sourceLayer:"",j=k._geojsonTileLayer||k[B];if(!j)return;const Z=h.createFilter(v&&v.filter),{z:J,x:ne,y:se}=this.tileID.canonical,ye={z:J,x:ne,y:se};for(let Ae=0;Ae<j.length;Ae++){const Je=j.feature(Ae);if(Z.needGeometry){const ht=h.toEvaluationFeature(Je,!0);if(!Z.filter(new h.EvaluationParameters(this.tileID.overscaledZ),ht,this.tileID.canonical))continue}else if(!Z.filter(new h.EvaluationParameters(this.tileID.overscaledZ),Je))continue;const ke=A.getId(Je,B),Ke=new h.GeoJSONFeature(Je,J,ne,se,ke);Ke.tile=ye,l.push(Ke)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const v=this.expirationTime;if(l.cacheControl){const A=h.parseCacheControl(l.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const A=Date.now();let k=!1;if(this.expirationTime>A)k=!1;else if(v)if(this.expirationTime<v)k=!0;else{const B=this.expirationTime-v;B?this.expirationTime=A+Math.max(B,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,v){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const A=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!v.style.hasLayer(k))continue;const B=this.buckets[k],j=B.layers[0].sourceLayer||"_geojsonTileLayer",Z=A[j],J=l[j];if(!Z||!J||Object.keys(J).length===0)continue;B.update(J,Z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ne=v&&v.style&&v.style.getLayer(k);ne&&(this.queryPadding=Math.max(this.queryPadding,ne.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=h.exported.now()+l}setDependencies(l,v){const A={};for(const k of v)A[k]=!0;this.dependencies[l]=A}hasDependency(l,v){for(const A of l){const k=this.dependencies[A];if(k){for(const B of v)if(k[B])return!0}}return!1}}class Yi{constructor(l,v){this.max=l,this.onRemove=v,this.reset()}reset(){for(const l in this.data)for(const v of this.data[l])v.timeout&&clearTimeout(v.timeout),this.onRemove(v.value);return this.data={},this.order=[],this}add(l,v,A){const k=l.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const B={value:v,timeout:void 0};if(A!==void 0&&(B.timeout=setTimeout(()=>{this.remove(l,B)},A)),this.data[k].push(B),this.order.push(k),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const v=this.data[l].shift();return v.timeout&&clearTimeout(v.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),v.value}getByKey(l){const v=this.data[l];return v?v[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,v){if(!this.has(l))return this;const A=l.wrapped().key,k=v===void 0?0:this.data[A].indexOf(v),B=this.data[A][k];return this.data[A].splice(k,1),B.timeout&&clearTimeout(B.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(B.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}filter(l){const v=[];for(const A in this.data)for(const k of this.data[A])l(k.value)||v.push(k);for(const A of v)this.remove(A.value.tileID,A)}}class Qt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,v,A){const k=String(v);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][k]=this.stateChanges[l][k]||{},h.extend(this.stateChanges[l][k],A),this.deletedStates[l]===null){this.deletedStates[l]={};for(const B in this.state[l])B!==k&&(this.deletedStates[l][B]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][k]===null){this.deletedStates[l][k]={};for(const B in this.state[l][k])A[B]||(this.deletedStates[l][k][B]=null)}else for(const B in A)this.deletedStates[l]&&this.deletedStates[l][k]&&this.deletedStates[l][k][B]===null&&delete this.deletedStates[l][k][B]}removeFeatureState(l,v,A){if(this.deletedStates[l]===null)return;const k=String(v);if(this.deletedStates[l]=this.deletedStates[l]||{},A&&v!==void 0)this.deletedStates[l][k]!==null&&(this.deletedStates[l][k]=this.deletedStates[l][k]||{},this.deletedStates[l][k][A]=null);else if(v!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][k])for(A in this.deletedStates[l][k]={},this.stateChanges[l][k])this.deletedStates[l][k][A]=null;else this.deletedStates[l][k]=null;else this.deletedStates[l]=null}getState(l,v){const A=String(v),k=h.extend({},(this.state[l]||{})[A],(this.stateChanges[l]||{})[A]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const B=this.deletedStates[l][v];if(B===null)return{};for(const j in B)delete k[j]}return k}initializeTileState(l,v){l.setFeatureState(this.state,v)}coalesceChanges(l,v){const A={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const B={};for(const j in this.stateChanges[k])this.state[k][j]||(this.state[k][j]={}),h.extend(this.state[k][j],this.stateChanges[k][j]),B[j]=this.state[k][j];A[k]=B}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const B={};if(this.deletedStates[k]===null)for(const j in this.state[k])B[j]={},this.state[k][j]={};else for(const j in this.deletedStates[k]){if(this.deletedStates[k][j]===null)this.state[k][j]={};else for(const Z of Object.keys(this.deletedStates[k][j]))delete this.state[k][j][Z];B[j]=this.state[k][j]}A[k]=A[k]||{},h.extend(A[k],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const k in l)l[k].setFeatureState(A,v)}}class gt extends h.Evented{constructor(l,v,A){super(),this.id=l,this.dispatcher=A,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(k,B,j,Z){const J=new xi[B.type](k,B,j,Z);if(J.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${J.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],J),J}(l,v,A,this),this._tiles={},this._cache=new Yi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qt}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const v=this._tiles[l];if(v.state!=="loaded"&&v.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,v){return this._source.loadTile(l,v)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new h.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const v in this._tiles){const A=this._tiles[v];A.upload(l),A.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(Oi).map(l=>l.key)}getRenderableIds(l){const v=[];for(const A in this._tiles)this._isIdRenderable(A,l)&&v.push(this._tiles[A]);return l?v.sort((A,k)=>{const B=A.tileID,j=k.tileID,Z=new h.pointGeometry(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),J=new h.pointGeometry(j.canonical.x,j.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-j.overscaledZ||J.y-Z.y||J.x-Z.x}).map(A=>A.tileID.key):v.map(A=>A.tileID).sort(Oi).map(A=>A.key)}hasRenderableParent(l){const v=this.findLoadedParent(l,0);return!!v&&this._isIdRenderable(v.tileID.key)}_isIdRenderable(l,v){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(v||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,v){const A=this._tiles[l];A&&(A.state!=="loading"&&(A.state=v),this._loadTile(A,this._tileLoaded.bind(this,A,l,v)))}_tileLoaded(l,v,A,k){if(k)return l.state="errored",void(k.status!==404?this._source.fire(new h.ErrorEvent(k,{tile:l})):this.update(this.transform));l.timeAdded=h.exported.now(),A==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(v,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new h.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const v=this.getRenderableIds();for(let k=0;k<v.length;k++){const B=v[k];if(l.neighboringTiles&&l.neighboringTiles[B]){const j=this.getTileByID(B);A(l,j),A(j,l)}}function A(k,B){k.needsHillshadePrepare=!0;let j=B.tileID.canonical.x-k.tileID.canonical.x;const Z=B.tileID.canonical.y-k.tileID.canonical.y,J=Math.pow(2,k.tileID.canonical.z),ne=B.tileID.key;j===0&&Z===0||Math.abs(Z)>1||(Math.abs(j)>1&&(Math.abs(j+J)===1?j+=J:Math.abs(j-J)===1&&(j-=J)),B.dem&&k.dem&&(k.dem.backfillBorder(B.dem,j,Z),k.neighboringTiles&&k.neighboringTiles[ne]&&(k.neighboringTiles[ne].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,v,A,k){for(const B in this._tiles){let j=this._tiles[B];if(k[B]||!j.hasData()||j.tileID.overscaledZ<=v||j.tileID.overscaledZ>A)continue;let Z=j.tileID;for(;j&&j.tileID.overscaledZ>v+1;){const ne=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[ne.key],j&&j.hasData()&&(Z=ne)}let J=Z;for(;J.overscaledZ>v;)if(J=J.scaledTo(J.overscaledZ-1),l[J.key]){k[Z.key]=Z;break}}}findLoadedParent(l,v){if(l.key in this._loadedParentTiles){const A=this._loadedParentTiles[l.key];return A&&A.tileID.overscaledZ>=v?A:null}for(let A=l.overscaledZ-1;A>=v;A--){const k=l.scaledTo(A),B=this._getLoadedTile(k);if(B)return B}}_getLoadedTile(l){const v=this._tiles[l.key];return v&&v.hasData()?v:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const v=Math.ceil(l.width/this._source.tileSize)+1,A=Math.ceil(l.height/this._source.tileSize)+1,k=Math.floor(v*A*5),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(B)}handleWrapJump(l){const v=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,v){const A={};for(const k in this._tiles){const B=this._tiles[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+v),A[B.tileID.key]=B}this._tiles=A;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(l){if(this.transform=l,!this._sourceLoaded||this._paused)return;let v;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?v=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new h.OverscaledTileID(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(v=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(v=v.filter(J=>this._source.hasTile(J)))):v=[];const A=l.coveringZoomLevel(this._source),k=Math.max(A-gt.maxOverzooming,this._source.minzoom),B=Math.max(A+gt.maxUnderzooming,this._source.minzoom),j=this._updateRetainedTiles(v,A);if(ln(this._source.type)){const J={},ne={},se=Object.keys(j);for(const ye of se){const Ae=j[ye],Je=this._tiles[ye];if(!Je||Je.fadeEndTime&&Je.fadeEndTime<=h.exported.now())continue;const ke=this.findLoadedParent(Ae,k);ke&&(this._addTile(ke.tileID),J[ke.tileID.key]=ke.tileID),ne[ye]=Ae}this._retainLoadedChildren(ne,A,B,j);for(const ye in J)j[ye]||(this._coveredTiles[ye]=!0,j[ye]=J[ye])}for(const J in j)this._tiles[J].clearFadeHold();const Z=h.keysDifference(this._tiles,j);for(const J of Z){const ne=this._tiles[J];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,v){const A={},k={},B=Math.max(v-gt.maxOverzooming,this._source.minzoom),j=Math.max(v+gt.maxUnderzooming,this._source.minzoom),Z={};for(const J of l){const ne=this._addTile(J);A[J.key]=J,ne.hasData()||v<this._source.maxzoom&&(Z[J.key]=J)}this._retainLoadedChildren(Z,v,j,A);for(const J of l){let ne=this._tiles[J.key];if(ne.hasData())continue;if(v+1>this._source.maxzoom){const ye=J.children(this._source.maxzoom)[0],Ae=this.getTile(ye);if(Ae&&Ae.hasData()){A[ye.key]=ye;continue}}else{const ye=J.children(this._source.maxzoom);if(A[ye[0].key]&&A[ye[1].key]&&A[ye[2].key]&&A[ye[3].key])continue}let se=ne.wasRequested();for(let ye=J.overscaledZ-1;ye>=B;--ye){const Ae=J.scaledTo(ye);if(k[Ae.key]||(k[Ae.key]=!0,ne=this.getTile(Ae),!ne&&se&&(ne=this._addTile(Ae)),ne&&(A[Ae.key]=Ae,se=ne.wasRequested(),ne.hasData())))break}}return A}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const v=[];let A,k=this._tiles[l].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){A=this._loadedParentTiles[k.key];break}v.push(k.key);const B=k.scaledTo(k.overscaledZ-1);if(A=this._getLoadedTile(B),A)break;k=B}for(const B of v)this._loadedParentTiles[B]=A}}_addTile(l){let v=this._tiles[l.key];if(v)return v;v=this._cache.getAndRemove(l),v&&(this._setTileReloadTimer(l.key,v),v.tileID=l,this._state.initializeTileState(v,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,v)));const A=v;return v||(v=new St(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(v,this._tileLoaded.bind(this,v,l.key,v.state))),v.uses++,this._tiles[l.key]=v,A||this._source.fire(new h.Event("dataloading",{tile:v,coord:v.tileID,dataType:"source"})),v}_setTileReloadTimer(l,v){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const A=v.getExpiryTimeout();A&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},A))}_removeTile(l){const v=this._tiles[l];v&&(v.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),v.uses>0||(v.hasData()&&v.state!=="reloading"?this._cache.add(v.tileID,v,v.getExpiryTimeout()):(v.aborted=!0,this._abortTile(v),this._unloadTile(v))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,v,A){const k=[],B=this.transform;if(!B)return k;const j=A?B.getCameraQueryGeometry(l):l,Z=l.map(ke=>B.pointCoordinate(ke)),J=j.map(ke=>B.pointCoordinate(ke)),ne=this.getIds();let se=1/0,ye=1/0,Ae=-1/0,Je=-1/0;for(const ke of J)se=Math.min(se,ke.x),ye=Math.min(ye,ke.y),Ae=Math.max(Ae,ke.x),Je=Math.max(Je,ke.y);for(let ke=0;ke<ne.length;ke++){const Ke=this._tiles[ne[ke]];if(Ke.holdingForFade())continue;const ht=Ke.tileID,ut=Math.pow(2,B.zoom-Ke.tileID.overscaledZ),bt=v*Ke.queryPadding*h.EXTENT/Ke.tileSize/ut,ft=[ht.getTilePoint(new h.MercatorCoordinate(se,ye)),ht.getTilePoint(new h.MercatorCoordinate(Ae,Je))];if(ft[0].x-bt<h.EXTENT&&ft[0].y-bt<h.EXTENT&&ft[1].x+bt>=0&&ft[1].y+bt>=0){const jt=Z.map(Ut=>ht.getTilePoint(Ut)),Ot=J.map(Ut=>ht.getTilePoint(Ut));k.push({tile:Ke,tileID:ht,queryGeometry:jt,cameraQueryGeometry:Ot,scale:ut})}}return k}getVisibleCoordinates(l){const v=this.getRenderableIds(l).map(A=>this._tiles[A].tileID);for(const A of v)A.posMatrix=this.transform.calculatePosMatrix(A.toUnwrapped());return v}hasTransition(){if(this._source.hasTransition())return!0;if(ln(this._source.type))for(const l in this._tiles){const v=this._tiles[l];if(v.fadeEndTime!==void 0&&v.fadeEndTime>=h.exported.now())return!0}return!1}setFeatureState(l,v,A){this._state.updateState(l=l||"_geojsonTileLayer",v,A)}removeFeatureState(l,v,A){this._state.removeFeatureState(l=l||"_geojsonTileLayer",v,A)}getFeatureState(l,v){return this._state.getState(l=l||"_geojsonTileLayer",v)}setDependencies(l,v,A){const k=this._tiles[l];k&&k.setDependencies(v,A)}reloadTilesForDependencies(l,v){for(const A in this._tiles)this._tiles[A].hasDependency(l,v)&&this._reloadTile(A,"reloading");this._cache.filter(A=>!A.hasDependency(l,v))}}function Oi(C,l){const v=Math.abs(2*C.wrap)-+(C.wrap<0),A=Math.abs(2*l.wrap)-+(l.wrap<0);return C.overscaledZ-l.overscaledZ||A-v||l.canonical.y-C.canonical.y||l.canonical.x-C.canonical.x}function ln(C){return C==="raster"||C==="image"||C==="video"}gt.maxOverzooming=10,gt.maxUnderzooming=3;const Cn="mapboxgl_preloaded_worker_pool";class Zn{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Zn.workerCount;)this.workers.push(new Worker(da.workerUrl));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(v=>{v.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Cn]}numActive(){return Object.keys(this.active).length}}const Nr=Math.floor(h.exported.hardwareConcurrency/2);let Kr;function At(){return Kr||(Kr=new Zn),Kr}function Ni(C,l){const v={};for(const A in C)A!=="ref"&&(v[A]=C[A]);return h.refProperties.forEach(A=>{A in l&&(v[A]=l[A])}),v}function jn(C){C=C.slice();const l=Object.create(null);for(let v=0;v<C.length;v++)l[C[v].id]=C[v];for(let v=0;v<C.length;v++)"ref"in C[v]&&(C[v]=Ni(C[v],l[C[v].ref]));return C}Zn.workerCount=Math.max(Math.min(Nr,6),1);const rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $n(C,l,v){v.push({command:rn.addSource,args:[C,l[C]]})}function Ln(C,l,v){l.push({command:rn.removeSource,args:[C]}),v[C]=!0}function zt(C,l,v,A){Ln(C,v,A),$n(C,l,v)}function Ui(C,l,v){let A;for(A in C[v])if(Object.prototype.hasOwnProperty.call(C[v],A)&&A!=="data"&&!R(C[v][A],l[v][A]))return!1;for(A in l[v])if(Object.prototype.hasOwnProperty.call(l[v],A)&&A!=="data"&&!R(C[v][A],l[v][A]))return!1;return!0}function Ze(C,l,v,A,k,B){let j;for(j in l=l||{},C=C||{})Object.prototype.hasOwnProperty.call(C,j)&&(R(C[j],l[j])||v.push({command:B,args:[A,j,l[j],k]}));for(j in l)Object.prototype.hasOwnProperty.call(l,j)&&!Object.prototype.hasOwnProperty.call(C,j)&&(R(C[j],l[j])||v.push({command:B,args:[A,j,l[j],k]}))}function Ft(C){return C.id}function Ji(C,l){return C[l.id]=l,C}class Gn{constructor(l,v){this.reset(l,v)}reset(l,v){this.points=l||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(v||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=h.clamp(l,0,1);let v=1,A=this._distances[v];const k=l*this.paddedLength+this.padding;for(;A<k&&v<this._distances.length;)A=this._distances[++v];const B=v-1,j=this._distances[B],Z=A-j,J=Z>0?(k-j)/Z:0;return this.points[B].mult(1-J).add(this.points[v].mult(J))}}function Wn(C,l){let v=!0;return C==="always"||C!=="never"&&l!=="never"||(v=!1),v}class _o{constructor(l,v,A){const k=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(l/A),this.yCellCount=Math.ceil(v/A);for(let j=0;j<this.xCellCount*this.yCellCount;j++)k.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=v,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/v,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,v,A,k,B){this._forEachCell(v,A,k,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(v),this.bboxes.push(A),this.bboxes.push(k),this.bboxes.push(B)}insertCircle(l,v,A,k){this._forEachCell(v-k,A-k,v+k,A+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(v),this.circles.push(A),this.circles.push(k)}_insertBoxCell(l,v,A,k,B,j){this.boxCells[B].push(j)}_insertCircleCell(l,v,A,k,B,j){this.circleCells[B].push(j)}_query(l,v,A,k,B,j,Z){if(A<0||l>this.width||k<0||v>this.height)return[];const J=[];if(l<=0&&v<=0&&this.width<=A&&this.height<=k){if(B)return[{key:null,x1:l,y1:v,x2:A,y2:k}];for(let ne=0;ne<this.boxKeys.length;ne++)J.push({key:this.boxKeys[ne],x1:this.bboxes[4*ne],y1:this.bboxes[4*ne+1],x2:this.bboxes[4*ne+2],y2:this.bboxes[4*ne+3]});for(let ne=0;ne<this.circleKeys.length;ne++){const se=this.circles[3*ne],ye=this.circles[3*ne+1],Ae=this.circles[3*ne+2];J.push({key:this.circleKeys[ne],x1:se-Ae,y1:ye-Ae,x2:se+Ae,y2:ye+Ae})}}else this._forEachCell(l,v,A,k,this._queryCell,J,{hitTest:B,overlapMode:j,seenUids:{box:{},circle:{}}},Z);return J}query(l,v,A,k){return this._query(l,v,A,k,!1,null)}hitTest(l,v,A,k,B,j){return this._query(l,v,A,k,!0,B,j).length>0}hitTestCircle(l,v,A,k,B){const j=l-A,Z=l+A,J=v-A,ne=v+A;if(Z<0||j>this.width||ne<0||J>this.height)return!1;const se=[];return this._forEachCell(j,J,Z,ne,this._queryCellCircle,se,{hitTest:!0,overlapMode:k,circle:{x:l,y:v,radius:A},seenUids:{box:{},circle:{}}},B),se.length>0}_queryCell(l,v,A,k,B,j,Z,J){const{seenUids:ne,hitTest:se,overlapMode:ye}=Z,Ae=this.boxCells[B];if(Ae!==null){const ke=this.bboxes;for(const Ke of Ae)if(!ne.box[Ke]){ne.box[Ke]=!0;const ht=4*Ke,ut=this.boxKeys[Ke];if(l<=ke[ht+2]&&v<=ke[ht+3]&&A>=ke[ht+0]&&k>=ke[ht+1]&&(!J||J(ut))&&(!se||!Wn(ye,ut.overlapMode))&&(j.push({key:ut,x1:ke[ht],y1:ke[ht+1],x2:ke[ht+2],y2:ke[ht+3]}),se))return!0}}const Je=this.circleCells[B];if(Je!==null){const ke=this.circles;for(const Ke of Je)if(!ne.circle[Ke]){ne.circle[Ke]=!0;const ht=3*Ke,ut=this.circleKeys[Ke];if(this._circleAndRectCollide(ke[ht],ke[ht+1],ke[ht+2],l,v,A,k)&&(!J||J(ut))&&(!se||!Wn(ye,ut.overlapMode))){const bt=ke[ht],ft=ke[ht+1],jt=ke[ht+2];if(j.push({key:ut,x1:bt-jt,y1:ft-jt,x2:bt+jt,y2:ft+jt}),se)return!0}}}return!1}_queryCellCircle(l,v,A,k,B,j,Z,J){const{circle:ne,seenUids:se,overlapMode:ye}=Z,Ae=this.boxCells[B];if(Ae!==null){const ke=this.bboxes;for(const Ke of Ae)if(!se.box[Ke]){se.box[Ke]=!0;const ht=4*Ke,ut=this.boxKeys[Ke];if(this._circleAndRectCollide(ne.x,ne.y,ne.radius,ke[ht+0],ke[ht+1],ke[ht+2],ke[ht+3])&&(!J||J(ut))&&!Wn(ye,ut.overlapMode))return j.push(!0),!0}}const Je=this.circleCells[B];if(Je!==null){const ke=this.circles;for(const Ke of Je)if(!se.circle[Ke]){se.circle[Ke]=!0;const ht=3*Ke,ut=this.circleKeys[Ke];if(this._circlesCollide(ke[ht],ke[ht+1],ke[ht+2],ne.x,ne.y,ne.radius)&&(!J||J(ut))&&!Wn(ye,ut.overlapMode))return j.push(!0),!0}}}_forEachCell(l,v,A,k,B,j,Z,J){const ne=this._convertToXCellCoord(l),se=this._convertToYCellCoord(v),ye=this._convertToXCellCoord(A),Ae=this._convertToYCellCoord(k);for(let Je=ne;Je<=ye;Je++)for(let ke=se;ke<=Ae;ke++)if(B.call(this,l,v,A,k,this.xCellCount*ke+Je,j,Z,J))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,v,A,k,B,j){const Z=k-l,J=B-v,ne=A+j;return ne*ne>Z*Z+J*J}_circleAndRectCollide(l,v,A,k,B,j,Z){const J=(j-k)/2,ne=Math.abs(l-(k+J));if(ne>J+A)return!1;const se=(Z-B)/2,ye=Math.abs(v-(B+se));if(ye>se+A)return!1;if(ne<=J||ye<=se)return!0;const Ae=ne-J,Je=ye-se;return Ae*Ae+Je*Je<=A*A}}function vo(C,l,v,A,k){const B=h.create();return l?(h.scale(B,B,[1/k,1/k,1]),v||h.rotateZ(B,B,A.angle)):h.multiply(B,A.labelPlaneMatrix,C),B}function la(C,l,v,A,k){if(l){const B=h.clone(C);return h.scale(B,B,[k,k,1]),v||h.rotateZ(B,B,-A.angle),B}return A.glCoordMatrix}function kr(C,l){const v=[C.x,C.y,0,1];ce(v,v,l);const A=v[3];return{point:new h.pointGeometry(v[0]/A,v[1]/A),signedDistanceFromCamera:A}}function vi(C,l){return .5+C/l*.5}function Un(C,l){const v=C[0]/C[3],A=C[1]/C[3];return v>=-l[0]&&v<=l[0]&&A>=-l[1]&&A<=l[1]}function In(C,l,v,A,k,B,j,Z,J){const ne=A?C.textSizeData:C.iconSizeData,se=h.evaluateSizeForZoom(ne,v.transform.zoom),ye=[256/v.width*2+1,256/v.height*2+1],Ae=A?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;Ae.clear();const Je=C.lineVertexArray,ke=A?C.text.placedSymbolArray:C.icon.placedSymbolArray,Ke=v.transform.width/v.transform.height;let ht=!1;for(let ut=0;ut<ke.length;ut++){const bt=ke.get(ut);if(bt.hidden||bt.writingMode===h.WritingMode.vertical&&!ht){re(bt.numGlyphs,Ae);continue}ht=!1;const ft=[bt.anchorX,bt.anchorY,0,1];if(h.transformMat4(ft,ft,l),!Un(ft,ye)){re(bt.numGlyphs,Ae);continue}const jt=vi(v.transform.cameraToCenterDistance,ft[3]),Ot=h.evaluateSizeForFeature(ne,se,bt),Ut=j?Ot/jt:Ot*jt,ti=new h.pointGeometry(bt.anchorX,bt.anchorY),ui=kr(ti,k).point,qt={},Gi=yn(bt,Ut,!1,Z,l,k,B,C.glyphOffsetArray,Je,Ae,ui,ti,qt,Ke,J);ht=Gi.useVertical,(Gi.notEnoughRoom||ht||Gi.needsFlipping&&yn(bt,Ut,!0,Z,l,k,B,C.glyphOffsetArray,Je,Ae,ui,ti,qt,Ke,J).notEnoughRoom)&&re(bt.numGlyphs,Ae)}A?C.text.dynamicLayoutVertexBuffer.updateData(Ae):C.icon.dynamicLayoutVertexBuffer.updateData(Ae)}function ro(C,l,v,A,k,B,j,Z,J,ne,se,ye){const Ae=Z.glyphStartIndex+Z.numGlyphs,Je=Z.lineStartIndex,ke=Z.lineStartIndex+Z.lineLength,Ke=l.getoffsetX(Z.glyphStartIndex),ht=l.getoffsetX(Ae-1),ut=To(C*Ke,v,A,k,B,j,Z.segment,Je,ke,J,ne,se,ye);if(!ut)return null;const bt=To(C*ht,v,A,k,B,j,Z.segment,Je,ke,J,ne,se,ye);return bt?{first:ut,last:bt}:null}function ho(C,l,v,A){return C===h.WritingMode.horizontal&&Math.abs(v.y-l.y)>Math.abs(v.x-l.x)*A?{useVertical:!0}:(C===h.WritingMode.vertical?l.y<v.y:l.x>v.x)?{needsFlipping:!0}:null}function yn(C,l,v,A,k,B,j,Z,J,ne,se,ye,Ae,Je,ke){const Ke=l/24,ht=C.lineOffsetX*Ke,ut=C.lineOffsetY*Ke;let bt;if(C.numGlyphs>1){const ft=C.glyphStartIndex+C.numGlyphs,jt=C.lineStartIndex,Ot=C.lineStartIndex+C.lineLength,Ut=ro(Ke,Z,ht,ut,v,se,ye,C,J,B,Ae,ke);if(!Ut)return{notEnoughRoom:!0};const ti=kr(Ut.first.point,j).point,ui=kr(Ut.last.point,j).point;if(A&&!v){const qt=ho(C.writingMode,ti,ui,Je);if(qt)return qt}bt=[Ut.first];for(let qt=C.glyphStartIndex+1;qt<ft-1;qt++)bt.push(To(Ke*Z.getoffsetX(qt),ht,ut,v,se,ye,C.segment,jt,Ot,J,B,Ae,ke));bt.push(Ut.last)}else{if(A&&!v){const jt=kr(ye,k).point,Ot=C.lineStartIndex+C.segment+1,Ut=new h.pointGeometry(J.getx(Ot),J.gety(Ot)),ti=kr(Ut,k),ui=ti.signedDistanceFromCamera>0?ti.point:ua(ye,Ut,jt,1,k),qt=ho(C.writingMode,jt,ui,Je);if(qt)return qt}const ft=To(Ke*Z.getoffsetX(C.glyphStartIndex),ht,ut,v,se,ye,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,J,B,Ae,ke);if(!ft)return{notEnoughRoom:!0};bt=[ft]}for(const ft of bt)h.addDynamicAttributes(ne,ft.point,ft.angle);return{}}function ua(C,l,v,A,k){const B=kr(C.add(C.sub(l)._unit()),k).point,j=v.sub(B);return v.add(j._mult(A/j.mag()))}function To(C,l,v,A,k,B,j,Z,J,ne,se,ye,Ae){const Je=A?C-l:C+l;let ke=Je>0?1:-1,Ke=0;A&&(ke*=-1,Ke=Math.PI),ke<0&&(Ke+=Math.PI);let ht=ke>0?Z+j:Z+j+1,ut=k,bt=k,ft=0,jt=0;const Ot=Math.abs(Je),Ut=[];for(;ft+jt<=Ot;){if(ht+=ke,ht<Z||ht>=J)return null;if(bt=ut,Ut.push(ut),ut=ye[ht],ut===void 0){const Ci=new h.pointGeometry(ne.getx(ht),ne.gety(ht)),xn=kr(Ci,se);if(xn.signedDistanceFromCamera>0)ut=ye[ht]=xn.point;else{const f=ht-ke;ut=ua(ft===0?B:new h.pointGeometry(ne.getx(f),ne.gety(f)),Ci,bt,Ot-ft+1,se)}}ft+=jt,jt=bt.dist(ut)}const ti=(Ot-ft)/jt,ui=ut.sub(bt),qt=ui.mult(ti)._add(bt);qt._add(ui._unit()._perp()._mult(v*ke));const Gi=Ke+Math.atan2(ut.y-bt.y,ut.x-bt.x);return Ut.push(qt),{point:qt,angle:Ae?Gi:0,path:Ut}}const wr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function re(C,l){for(let v=0;v<C;v++){const A=l.length;l.resize(A+4),l.float32.set(wr,3*A)}}function ce(C,l,v){const A=l[0],k=l[1];return C[0]=v[0]*A+v[4]*k+v[12],C[1]=v[1]*A+v[5]*k+v[13],C[3]=v[3]*A+v[7]*k+v[15],C}const me=100;class Se{constructor(l,v=new _o(l.width+200,l.height+200,25),A=new _o(l.width+200,l.height+200,25)){this.transform=l,this.grid=v,this.ignoredGrid=A,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+me,this.screenBottomBoundary=l.height+me,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200}placeCollisionBox(l,v,A,k,B){const j=this.projectAndGetPerspectiveRatio(k,l.anchorPointX,l.anchorPointY),Z=A*j.perspectiveRatio,J=l.x1*Z+j.point.x,ne=l.y1*Z+j.point.y,se=l.x2*Z+j.point.x,ye=l.y2*Z+j.point.y;return!this.isInsideGrid(J,ne,se,ye)||v!=="always"&&this.grid.hitTest(J,ne,se,ye,v,B)?{box:[],offscreen:!1}:{box:[J,ne,se,ye],offscreen:this.isOffscreen(J,ne,se,ye)}}placeCollisionCircles(l,v,A,k,B,j,Z,J,ne,se,ye,Ae,Je){const ke=[],Ke=new h.pointGeometry(v.anchorX,v.anchorY),ht=kr(Ke,j),ut=vi(this.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),bt=(se?B/ut:B*ut)/h.ONE_EM,ft=kr(Ke,Z).point,jt=ro(bt,k,v.lineOffsetX*bt,v.lineOffsetY*bt,!1,ft,Ke,v,A,Z,{},!1);let Ot=!1,Ut=!1,ti=!0;if(jt){const ui=.5*Ae*ut+Je,qt=new h.pointGeometry(-100,-100),Gi=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ci=new Gn,xn=jt.first,f=jt.last;let y=[];for(let P=xn.path.length-1;P>=1;P--)y.push(xn.path[P]);for(let P=1;P<f.path.length;P++)y.push(f.path[P]);const g=2.5*ui;if(J){const P=y.map(F=>kr(F,J));y=P.some(F=>F.signedDistanceFromCamera<=0)?[]:P.map(F=>F.point)}let w=[];if(y.length>0){const P=y[0].clone(),F=y[0].clone();for(let N=1;N<y.length;N++)P.x=Math.min(P.x,y[N].x),P.y=Math.min(P.y,y[N].y),F.x=Math.max(F.x,y[N].x),F.y=Math.max(F.y,y[N].y);w=P.x>=qt.x&&F.x<=Gi.x&&P.y>=qt.y&&F.y<=Gi.y?[y]:F.x<qt.x||P.x>Gi.x||F.y<qt.y||P.y>Gi.y?[]:h.clipLine([y],qt.x,qt.y,Gi.x,Gi.y)}for(const P of w){Ci.reset(P,.25*ui);let F=0;F=Ci.length<=.5*ui?1:Math.ceil(Ci.paddedLength/g)+1;for(let N=0;N<F;N++){const H=N/Math.max(F-1,1),Q=Ci.lerp(H),ae=Q.x+me,_e=Q.y+me;ke.push(ae,_e,ui,0);const xe=ae-ui,Ee=_e-ui,Fe=ae+ui,Oe=_e+ui;if(ti=ti&&this.isOffscreen(xe,Ee,Fe,Oe),Ut=Ut||this.isInsideGrid(xe,Ee,Fe,Oe),l!=="always"&&this.grid.hitTestCircle(ae,_e,ui,l,ye)&&(Ot=!0,!ne))return{circles:[],offscreen:!1,collisionDetected:Ot}}}}return{circles:!ne&&Ot||!Ut?[]:ke,offscreen:ti,collisionDetected:Ot}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const v=[];let A=1/0,k=1/0,B=-1/0,j=-1/0;for(const se of l){const ye=new h.pointGeometry(se.x+me,se.y+me);A=Math.min(A,ye.x),k=Math.min(k,ye.y),B=Math.max(B,ye.x),j=Math.max(j,ye.y),v.push(ye)}const Z=this.grid.query(A,k,B,j).concat(this.ignoredGrid.query(A,k,B,j)),J={},ne={};for(const se of Z){const ye=se.key;if(J[ye.bucketInstanceId]===void 0&&(J[ye.bucketInstanceId]={}),J[ye.bucketInstanceId][ye.featureIndex])continue;const Ae=[new h.pointGeometry(se.x1,se.y1),new h.pointGeometry(se.x2,se.y1),new h.pointGeometry(se.x2,se.y2),new h.pointGeometry(se.x1,se.y2)];h.polygonIntersectsPolygon(v,Ae)&&(J[ye.bucketInstanceId][ye.featureIndex]=!0,ne[ye.bucketInstanceId]===void 0&&(ne[ye.bucketInstanceId]=[]),ne[ye.bucketInstanceId].push(ye.featureIndex))}return ne}insertCollisionBox(l,v,A,k,B,j){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:B,collisionGroupID:j,overlapMode:v},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,v,A,k,B,j){const Z=A?this.ignoredGrid:this.grid,J={bucketInstanceId:k,featureIndex:B,collisionGroupID:j,overlapMode:v};for(let ne=0;ne<l.length;ne+=4)Z.insertCircle(J,l[ne],l[ne+1],l[ne+2])}projectAndGetPerspectiveRatio(l,v,A){const k=[v,A,0,1];return ce(k,k,l),{point:new h.pointGeometry((k[0]/k[3]+1)/2*this.transform.width+me,(-k[1]/k[3]+1)/2*this.transform.height+me),perspectiveRatio:.5+this.transform.cameraToCenterDistance/k[3]*.5}}isOffscreen(l,v,A,k){return A<me||l>=this.screenRightBoundary||k<me||v>this.screenBottomBoundary}isInsideGrid(l,v,A,k){return A>=0&&l<this.gridRightBoundary&&k>=0&&v<this.gridBottomBoundary}getViewportMatrix(){const l=h.identity([]);return h.translate(l,l,[-100,-100,0]),l}}function ze(C,l,v){return l*(h.EXTENT/(C.tileSize*Math.pow(2,v-C.tileID.overscaledZ)))}class $e{constructor(l,v,A,k){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?v:-v))):k&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class it{constructor(l,v,A,k,B){this.text=new $e(l?l.text:null,v,A,B),this.icon=new $e(l?l.icon:null,v,k,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ie{constructor(l,v,A){this.text=l,this.icon=v,this.skipFade=A}}class Ve{constructor(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]}}class mt{constructor(l,v,A,k,B){this.bucketInstanceId=l,this.featureIndex=v,this.sourceLayerIndex=A,this.bucketIndex=k,this.tileID=B}}class he{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const v=++this.maxGroupID;this.collisionGroups[l]={ID:v,predicate:A=>A.collisionGroupID===v}}return this.collisionGroups[l]}}function W(C,l,v,A,k){const{horizontalAlign:B,verticalAlign:j}=h.getAnchorAlignment(C),Z=-(B-.5)*l,J=-(j-.5)*v,ne=h.evaluateVariableOffset(C,A);return new h.pointGeometry(Z+ne[0]*k,J+ne[1]*k)}function X(C,l,v,A,k,B){const{x1:j,x2:Z,y1:J,y2:ne,anchorPointX:se,anchorPointY:ye}=C,Ae=new h.pointGeometry(l,v);return A&&Ae._rotate(k?B:-B),{x1:j+Ae.x,y1:J+Ae.y,x2:Z+Ae.x,y2:ne+Ae.y,anchorPointX:se,anchorPointY:ye}}class le{constructor(l,v,A,k){this.transform=l.clone(),this.collisionIndex=new Se(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new he(A),this.collisionCircleArrays={},this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,v,A,k){const B=A.getBucket(v),j=A.latestFeatureIndex;if(!B||!j||v.id!==B.layerIds[0])return;const Z=A.collisionBoxArray,J=B.layers[0].layout,ne=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),se=A.tileSize/h.EXTENT,ye=this.transform.calculatePosMatrix(A.tileID.toUnwrapped()),Ae=J.get("text-pitch-alignment")==="map",Je=J.get("text-rotation-alignment")==="map",ke=ze(A,1,this.transform.zoom),Ke=vo(ye,Ae,Je,this.transform,ke);let ht=null;if(Ae){const bt=la(ye,Ae,Je,this.transform,ke);ht=h.multiply([],this.transform.labelPlaneMatrix,bt)}this.retainedQueryData[B.bucketInstanceId]=new mt(B.bucketInstanceId,j,B.sourceLayerIndex,B.index,A.tileID);const ut={bucket:B,layout:J,posMatrix:ye,textLabelPlaneMatrix:Ke,labelToScreenMatrix:ht,scale:ne,textPixelRatio:se,holdingForFade:A.holdingForFade(),collisionBoxArray:Z,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(k)for(const bt of B.sortKeyRanges){const{sortKey:ft,symbolInstanceStart:jt,symbolInstanceEnd:Ot}=bt;l.push({sortKey:ft,symbolInstanceStart:jt,symbolInstanceEnd:Ot,parameters:ut})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:ut})}attemptAnchorPlacement(l,v,A,k,B,j,Z,J,ne,se,ye,Ae,Je,ke,Ke){const ht=[Ae.textOffset0,Ae.textOffset1],ut=W(l,A,k,ht,B),bt=this.collisionIndex.placeCollisionBox(X(v,ut.x,ut.y,j,Z,this.transform.angle),ye,J,ne,se.predicate);if((!Ke||this.collisionIndex.placeCollisionBox(X(Ke,ut.x,ut.y,j,Z,this.transform.angle),ye,J,ne,se.predicate).box.length!==0)&&bt.box.length>0){let ft;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),this.variableOffsets[Ae.crossTileID]={textOffset:ht,width:A,height:k,anchor:l,textBoxScale:B,prevAnchor:ft},this.markUsedJustification(Je,l,Ae,ke),Je.allowVerticalPlacement&&(this.markUsedOrientation(Je,ke,Ae),this.placedOrientations[Ae.crossTileID]=ke),{shift:ut,placedGlyphBoxes:bt}}}placeLayerBucketPart(l,v,A){const{bucket:k,layout:B,posMatrix:j,textLabelPlaneMatrix:Z,labelToScreenMatrix:J,textPixelRatio:ne,holdingForFade:se,collisionBoxArray:ye,partiallyEvaluatedTextSize:Ae,collisionGroup:Je}=l.parameters,ke=B.get("text-optional"),Ke=B.get("icon-optional"),ht=h.getOverlapMode(B,"text-overlap","text-allow-overlap"),ut=ht==="always",bt=h.getOverlapMode(B,"icon-overlap","icon-allow-overlap"),ft=bt==="always",jt=B.get("text-rotation-alignment")==="map",Ot=B.get("text-pitch-alignment")==="map",Ut=B.get("icon-text-fit")!=="none",ti=B.get("symbol-z-order")==="viewport-y",ui=ut&&(ft||!k.hasIconData()||Ke),qt=ft&&(ut||!k.hasTextData()||ke);!k.collisionArrays&&ye&&k.deserializeCollisionBoxes(ye);const Gi=(Ci,xn)=>{if(v[Ci.crossTileID])return;if(se)return void(this.placements[Ci.crossTileID]=new Ie(!1,!1,!1));let f=!1,y=!1,g=!0,w=null,P={box:null,offscreen:null},F={box:null,offscreen:null},N=null,H=null,Q=null,ae=0,_e=0,xe=0;xn.textFeatureIndex?ae=xn.textFeatureIndex:Ci.useRuntimeCollisionCircles&&(ae=Ci.featureIndex),xn.verticalTextFeatureIndex&&(_e=xn.verticalTextFeatureIndex);const Ee=xn.textBox;if(Ee){const Xe=je=>{let et=h.WritingMode.horizontal;if(k.allowVerticalPlacement&&!je&&this.prevPlacement){const pt=this.prevPlacement.placedOrientations[Ci.crossTileID];pt&&(this.placedOrientations[Ci.crossTileID]=pt,et=pt,this.markUsedOrientation(k,et,Ci))}return et},Ce=(je,et)=>{if(k.allowVerticalPlacement&&Ci.numVerticalGlyphVertices>0&&xn.verticalTextBox){for(const pt of k.writingModes)if(pt===h.WritingMode.vertical?(P=et(),F=P):P=je(),P&&P.box&&P.box.length)break}else P=je()};if(B.get("text-variable-anchor")){let je=B.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ci.crossTileID]){const xt=this.prevPlacement.variableOffsets[Ci.crossTileID];je.indexOf(xt.anchor)>0&&(je=je.filter(Tt=>Tt!==xt.anchor),je.unshift(xt.anchor))}const et=(xt,Tt,kt)=>{const Ht=xt.x2-xt.x1,oi=xt.y2-xt.y1,ri=Ci.textBoxScale,Ti=Ut&&bt==="never"?Tt:null;let Zi={box:[],offscreen:!1};const $i=ht!=="never"?2*je.length:je.length;for(let Hi=0;Hi<$i;++Hi){const Xn=this.attemptAnchorPlacement(je[Hi%je.length],xt,Ht,oi,ri,jt,Ot,ne,j,Je,Hi>=je.length?ht:"never",Ci,k,kt,Ti);if(Xn&&(Zi=Xn.placedGlyphBoxes,Zi&&Zi.box&&Zi.box.length)){f=!0,w=Xn.shift;break}}return Zi};Ce(()=>et(Ee,xn.iconBox,h.WritingMode.horizontal),()=>{const xt=xn.verticalTextBox;return k.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&Ci.numVerticalGlyphVertices>0&&xt?et(xt,xn.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null}}),P&&(f=P.box,g=P.offscreen);const pt=Xe(P&&P.box);if(!f&&this.prevPlacement){const xt=this.prevPlacement.variableOffsets[Ci.crossTileID];xt&&(this.variableOffsets[Ci.crossTileID]=xt,this.markUsedJustification(k,xt.anchor,Ci,pt))}}else{const je=(et,pt)=>{const xt=this.collisionIndex.placeCollisionBox(et,ht,ne,j,Je.predicate);return xt&&xt.box&&xt.box.length&&(this.markUsedOrientation(k,pt,Ci),this.placedOrientations[Ci.crossTileID]=pt),xt};Ce(()=>je(Ee,h.WritingMode.horizontal),()=>{const et=xn.verticalTextBox;return k.allowVerticalPlacement&&Ci.numVerticalGlyphVertices>0&&et?je(et,h.WritingMode.vertical):{box:null,offscreen:null}}),Xe(P&&P.box&&P.box.length)}}if(N=P,f=N&&N.box&&N.box.length>0,g=N&&N.offscreen,Ci.useRuntimeCollisionCircles){const Xe=k.text.placedSymbolArray.get(Ci.centerJustifiedTextSymbolIndex),Ce=h.evaluateSizeForFeature(k.textSizeData,Ae,Xe),je=B.get("text-padding");H=this.collisionIndex.placeCollisionCircles(ht,Xe,k.lineVertexArray,k.glyphOffsetArray,Ce,j,Z,J,A,Ot,Je.predicate,Ci.collisionCircleDiameter,je),f=ut||H.circles.length>0&&!H.collisionDetected,g=g&&H.offscreen}if(xn.iconFeatureIndex&&(xe=xn.iconFeatureIndex),xn.iconBox){const Xe=Ce=>{const je=Ut&&w?X(Ce,w.x,w.y,jt,Ot,this.transform.angle):Ce;return this.collisionIndex.placeCollisionBox(je,bt,ne,j,Je.predicate)};F&&F.box&&F.box.length&&xn.verticalIconBox?(Q=Xe(xn.verticalIconBox),y=Q.box.length>0):(Q=Xe(xn.iconBox),y=Q.box.length>0),g=g&&Q.offscreen}const Fe=ke||Ci.numHorizontalGlyphVertices===0&&Ci.numVerticalGlyphVertices===0,Oe=Ke||Ci.numIconVertices===0;if(Fe||Oe?Oe?Fe||(y=y&&f):f=y&&f:y=f=y&&f,f&&N&&N.box&&this.collisionIndex.insertCollisionBox(N.box,ht,B.get("text-ignore-placement"),k.bucketInstanceId,F&&F.box&&_e?_e:ae,Je.ID),y&&Q&&this.collisionIndex.insertCollisionBox(Q.box,bt,B.get("icon-ignore-placement"),k.bucketInstanceId,xe,Je.ID),H&&(f&&this.collisionIndex.insertCollisionCircles(H.circles,ht,B.get("text-ignore-placement"),k.bucketInstanceId,ae,Je.ID),A)){const Xe=k.bucketInstanceId;let Ce=this.collisionCircleArrays[Xe];Ce===void 0&&(Ce=this.collisionCircleArrays[Xe]=new Ve);for(let je=0;je<H.circles.length;je+=4)Ce.circles.push(H.circles[je+0]),Ce.circles.push(H.circles[je+1]),Ce.circles.push(H.circles[je+2]),Ce.circles.push(H.collisionDetected?1:0)}this.placements[Ci.crossTileID]=new Ie(f||ui,y||qt,g||k.justReloaded),v[Ci.crossTileID]=!0};if(ti){const Ci=k.getSortedSymbolIndexes(this.transform.angle);for(let xn=Ci.length-1;xn>=0;--xn){const f=Ci[xn];Gi(k.symbolInstances.get(f),k.collisionArrays[f])}}else for(let Ci=l.symbolInstanceStart;Ci<l.symbolInstanceEnd;Ci++)Gi(k.symbolInstances.get(Ci),k.collisionArrays[Ci]);if(A&&k.bucketInstanceId in this.collisionCircleArrays){const Ci=this.collisionCircleArrays[k.bucketInstanceId];h.invert(Ci.invProjMatrix,j),Ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(l,v,A,k){let B;B=k===h.WritingMode.vertical?A.verticalPlacedTextSymbolIndex:{left:A.leftJustifiedTextSymbolIndex,center:A.centerJustifiedTextSymbolIndex,right:A.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(v)];const j=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex,A.verticalPlacedTextSymbolIndex];for(const Z of j)Z>=0&&(l.text.placedSymbolArray.get(Z).crossTileID=B>=0&&Z!==B?0:A.crossTileID)}markUsedOrientation(l,v,A){const k=v===h.WritingMode.horizontal||v===h.WritingMode.horizontalOnly?v:0,B=v===h.WritingMode.vertical?v:0,j=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex];for(const Z of j)l.text.placedSymbolArray.get(Z).placedOrientation=k;A.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(A.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const v=this.prevPlacement;let A=!1;this.prevZoomAdjustment=v?v.zoomAdjustment(this.transform.zoom):0;const k=v?v.symbolFadeChange(l):1,B=v?v.opacities:{},j=v?v.variableOffsets:{},Z=v?v.placedOrientations:{};for(const J in this.placements){const ne=this.placements[J],se=B[J];se?(this.opacities[J]=new it(se,k,ne.text,ne.icon),A=A||ne.text!==se.text.placed||ne.icon!==se.icon.placed):(this.opacities[J]=new it(null,k,ne.text,ne.icon,ne.skipFade),A=A||ne.text||ne.icon)}for(const J in B){const ne=B[J];if(!this.opacities[J]){const se=new it(ne,k,!1,!1);se.isHidden()||(this.opacities[J]=se,A=A||ne.text.placed||ne.icon.placed)}}for(const J in j)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=j[J]);for(const J in Z)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=Z[J]);A?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=v?v.lastPlacementChangeTime:l)}updateLayerOpacities(l,v){const A={};for(const k of v){const B=k.getBucket(l);B&&k.latestFeatureIndex&&l.id===B.layerIds[0]&&this.updateBucketOpacities(B,A,k.collisionBoxArray)}}updateBucketOpacities(l,v,A){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const k=l.layers[0].layout,B=new it(null,0,!1,!1,!0),j=k.get("text-allow-overlap"),Z=k.get("icon-allow-overlap"),J=k.get("text-variable-anchor"),ne=k.get("text-rotation-alignment")==="map",se=k.get("text-pitch-alignment")==="map",ye=k.get("icon-text-fit")!=="none",Ae=new it(null,0,j&&(Z||!l.hasIconData()||k.get("icon-optional")),Z&&(j||!l.hasTextData()||k.get("text-optional")),!0);!l.collisionArrays&&A&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(A);const Je=(ke,Ke,ht)=>{for(let ut=0;ut<Ke/4;ut++)ke.opacityVertexArray.emplaceBack(ht)};for(let ke=0;ke<l.symbolInstances.length;ke++){const Ke=l.symbolInstances.get(ke),{numHorizontalGlyphVertices:ht,numVerticalGlyphVertices:ut,crossTileID:bt}=Ke;let ft=this.opacities[bt];v[bt]?ft=B:ft||(ft=Ae,this.opacities[bt]=ft),v[bt]=!0;const jt=Ke.numIconVertices>0,Ot=this.placedOrientations[Ke.crossTileID],Ut=Ot===h.WritingMode.vertical,ti=Ot===h.WritingMode.horizontal||Ot===h.WritingMode.horizontalOnly;if(ht>0||ut>0){const ui=_t(ft.text);Je(l.text,ht,Ut?si:ui),Je(l.text,ut,ti?si:ui);const qt=ft.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach(xn=>{xn>=0&&(l.text.placedSymbolArray.get(xn).hidden=qt||Ut?1:0)}),Ke.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=qt||ti?1:0);const Gi=this.variableOffsets[Ke.crossTileID];Gi&&this.markUsedJustification(l,Gi.anchor,Ke,Ot);const Ci=this.placedOrientations[Ke.crossTileID];Ci&&(this.markUsedJustification(l,"left",Ke,Ci),this.markUsedOrientation(l,Ci,Ke))}if(jt){const ui=_t(ft.icon),qt=!(ye&&Ke.verticalPlacedIconSymbolIndex&&Ut);Ke.placedIconSymbolIndex>=0&&(Je(l.icon,Ke.numIconVertices,qt?ui:si),l.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=ft.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(Je(l.icon,Ke.numVerticalIconVertices,qt?si:ui),l.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=ft.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const ui=l.collisionArrays[ke];if(ui){let qt=new h.pointGeometry(0,0);if(ui.textBox||ui.verticalTextBox){let Ci=!0;if(J){const xn=this.variableOffsets[bt];xn?(qt=W(xn.anchor,xn.width,xn.height,xn.textOffset,xn.textBoxScale),ne&&qt._rotate(se?this.transform.angle:-this.transform.angle)):Ci=!1}ui.textBox&&ge(l.textCollisionBox.collisionVertexArray,ft.text.placed,!Ci||Ut,qt.x,qt.y),ui.verticalTextBox&&ge(l.textCollisionBox.collisionVertexArray,ft.text.placed,!Ci||ti,qt.x,qt.y)}const Gi=Boolean(!ti&&ui.verticalIconBox);ui.iconBox&&ge(l.iconCollisionBox.collisionVertexArray,ft.icon.placed,Gi,ye?qt.x:0,ye?qt.y:0),ui.verticalIconBox&&ge(l.iconCollisionBox.collisionVertexArray,ft.icon.placed,!Gi,ye?qt.x:0,ye?qt.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ke=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ke.invProjMatrix,l.placementViewportMatrix=ke.viewportMatrix,l.collisionCircleArray=ke.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,v){const A=this.zoomAtLastRecencyCheck===v?1-this.zoomAdjustment(v):1;return this.zoomAtLastRecencyCheck=v,this.commitTime+this.fadeDuration*A>l}setStale(){this.stale=!0}}function ge(C,l,v,A,k){C.emplaceBack(l?1:0,v?1:0,A||0,k||0),C.emplaceBack(l?1:0,v?1:0,A||0,k||0),C.emplaceBack(l?1:0,v?1:0,A||0,k||0),C.emplaceBack(l?1:0,v?1:0,A||0,k||0)}const Te=Math.pow(2,25),we=Math.pow(2,24),Pe=Math.pow(2,17),Me=Math.pow(2,16),Le=Math.pow(2,9),yt=Math.pow(2,8),lt=Math.pow(2,1);function _t(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const l=C.placed?1:0,v=Math.floor(127*C.opacity);return v*Te+l*we+v*Pe+l*Me+v*Le+l*yt+v*lt+l}const si=0;class Re{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,v,A,k,B){const j=this._bucketParts;for(;this._currentTileIndex<l.length;)if(v.getBucketParts(j,k,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((Z,J)=>Z.sortKey-J.sortKey));this._currentPartIndex<j.length;)if(v.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,A),this._currentPartIndex++,B())return!0;return!1}}class Yt{constructor(l,v,A,k,B,j,Z){this.placement=new le(l,B,j,Z),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(l,v,A){const k=h.exported.now(),B=()=>{const j=h.exported.now()-k;return!this._forceFullPlacement&&j>2};for(;this._currentPlacementIndex>=0;){const j=v[l[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=Z)&&(!j.maxzoom||j.maxzoom>Z)){if(this._inProgressLayer||(this._inProgressLayer=new Re(j)),this._inProgressLayer.continuePlacement(A[j.source],this.placement,this._showCollisionBoxes,j,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const di=512/h.EXTENT/2;class kn{constructor(l,v,A){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=A;for(let k=0;k<v.length;k++){const B=v.get(k),j=B.key;this.indexedSymbolInstances[j]||(this.indexedSymbolInstances[j]=[]),this.indexedSymbolInstances[j].push({crossTileID:B.crossTileID,coord:this.getScaledCoordinates(B,l)})}}getScaledCoordinates(l,v){const A=di/Math.pow(2,v.canonical.z-this.tileID.canonical.z);return{x:Math.floor((v.canonical.x*h.EXTENT+l.anchorX)*A),y:Math.floor((v.canonical.y*h.EXTENT+l.anchorY)*A)}}findMatches(l,v,A){const k=this.tileID.canonical.z<v.canonical.z?1:Math.pow(2,this.tileID.canonical.z-v.canonical.z);for(let B=0;B<l.length;B++){const j=l.get(B);if(j.crossTileID)continue;const Z=this.indexedSymbolInstances[j.key];if(!Z)continue;const J=this.getScaledCoordinates(j,v);for(const ne of Z)if(Math.abs(ne.coord.x-J.x)<=k&&Math.abs(ne.coord.y-J.y)<=k&&!A[ne.crossTileID]){A[ne.crossTileID]=!0,j.crossTileID=ne.crossTileID;break}}}}class Xi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const v=Math.round((l-this.lng)/360);if(v!==0)for(const A in this.indexes){const k=this.indexes[A],B={};for(const j in k){const Z=k[j];Z.tileID=Z.tileID.unwrapTo(Z.tileID.wrap+v),B[Z.tileID.key]=Z}this.indexes[A]=B}this.lng=l}addBucket(l,v,A){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===v.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let B=0;B<v.symbolInstances.length;B++)v.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const k=this.usedCrossTileIDs[l.overscaledZ];for(const B in this.indexes){const j=this.indexes[B];if(Number(B)>l.overscaledZ)for(const Z in j){const J=j[Z];J.tileID.isChildOf(l)&&J.findMatches(v.symbolInstances,l,k)}else{const Z=j[l.scaledTo(Number(B)).key];Z&&Z.findMatches(v.symbolInstances,l,k)}}for(let B=0;B<v.symbolInstances.length;B++){const j=v.symbolInstances.get(B);j.crossTileID||(j.crossTileID=A.generate(),k[j.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new kn(l,v.symbolInstances,v.bucketInstanceId),!0}removeBucketCrossTileIDs(l,v){for(const A in v.indexedSymbolInstances)for(const k of v.indexedSymbolInstances[A])delete this.usedCrossTileIDs[l][k.crossTileID]}removeStaleBuckets(l){let v=!1;for(const A in this.indexes){const k=this.indexes[A];for(const B in k)l[k[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,k[B]),delete k[B],v=!0)}return v}}class Vi{constructor(){this.layerIndexes={},this.crossTileIDs=new Xi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,v,A){let k=this.layerIndexes[l.id];k===void 0&&(k=this.layerIndexes[l.id]=new nn);let B=!1;const j={};k.handleWrapJump(A);for(const Z of v){const J=Z.getBucket(l);J&&l.id===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(Z.tileID,J,this.crossTileIDs)&&(B=!0),j[J.bucketInstanceId]=!0)}return k.removeStaleBuckets(j)&&(B=!0),B}pruneUnusedLayers(l){const v={};l.forEach(A=>{v[A]=!0});for(const A in this.layerIndexes)v[A]||delete this.layerIndexes[A]}}const Ii=(C,l)=>h.emitValidationErrors(C,l&&l.filter(v=>v.identifier!=="source.canvas")),dn=h.pick(rn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hr=h.pick(rn,["setCenter","setZoom","setBearing","setPitch"]),po=function(){const C={},l=h.spec.$version;for(const v in h.spec.$root){const A=h.spec.$root[v];if(A.required){let k=null;k=v==="version"?l:A.type==="array"?[]:{},k!=null&&(C[v]=k)}}return C}();class fr extends h.Evented{constructor(l,v={}){super(),this.map=l,this.dispatcher=new Mt(At(),this),this.imageManager=new Ne,this.imageManager.setEventedParent(this),this.glyphManager=new st(l._requestManager,v.localIdeographFontFamily),this.lineAtlas=new He(256,512),this.crossTileSymbolIndex=new Vi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const A=this;this._rtlTextPluginCallback=fr.registerForPluginStateChange(k=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(B,j)=>{if(h.triggerPluginCompletionEvent(B),j&&j.every(Z=>Z))for(const Z in A.sourceCaches)A.sourceCaches[Z].reload()})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const B=this.sourceCaches[k.sourceId];if(!B)return;const j=B.getSource();if(j&&j.vectorLayerIds)for(const Z in this._layers){const J=this._layers[Z];J.source===j.id&&this._validateLayer(J)}})}loadURL(l,v={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const A=typeof v.validate!="boolean"||v.validate,k=this.map._requestManager.transformRequest(l,h.ResourceType.Style);this._request=h.getJSON(k,(B,j)=>{this._request=null,B?this.fire(new h.ErrorEvent(B)):j&&this._load(j,A)})}loadJSON(l,v={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(l,v.validate!==!1)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(po,!1)}_load(l,v){if(v&&Ii(this,h.validateStyle(l)))return;this._loaded=!0,this.stylesheet=l;for(const k in l.sources)this.addSource(k,l.sources[k],{validate:!1});l.sprite?this._loadSprite(l.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(l.glyphs);const A=jn(this.stylesheet.layers);this._order=A.map(k=>k.id),this._layers={},this._serializedLayers={};for(let k of A)k=h.createStyleLayer(k),k.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Rt(this.stylesheet.light),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}_loadSprite(l){this._spriteRequest=function(v,A,k,B){let j,Z,J;const ne=k>1?"@2x":"";let se=h.getJSON(A.transformRequest(A.normalizeSpriteURL(v,ne,".json"),h.ResourceType.SpriteJSON),(Je,ke)=>{se=null,J||(J=Je,j=ke,Ae())}),ye=h.getImage(A.transformRequest(A.normalizeSpriteURL(v,ne,".png"),h.ResourceType.SpriteImage),(Je,ke)=>{ye=null,J||(J=Je,Z=ke,Ae())});function Ae(){if(J)B(J);else if(j&&Z){const Je=h.exported.getImageData(Z),ke={};for(const Ke in j){const{width:ht,height:ut,x:bt,y:ft,sdf:jt,pixelRatio:Ot,stretchX:Ut,stretchY:ti,content:ui}=j[Ke],qt=new h.RGBAImage({width:ht,height:ut});h.RGBAImage.copy(Je,qt,{x:bt,y:ft},{x:0,y:0},{width:ht,height:ut}),ke[Ke]={data:qt,pixelRatio:Ot,sdf:jt,stretchX:Ut,stretchY:ti,content:ui}}B(null,ke)}}return{cancel(){se&&(se.cancel(),se=null),ye&&(ye.cancel(),ye=null)}}}(l,this.map._requestManager,this.map.getPixelRatio(),(v,A)=>{if(this._spriteRequest=null,v)this.fire(new h.ErrorEvent(v));else if(A)for(const k in A)this.imageManager.addImage(k,A[k]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(l){const v=this.sourceCaches[l.source];if(!v)return;const A=l.sourceLayer;if(!A)return;const k=v.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(A)===-1)&&this.fire(new h.ErrorEvent(new Error(`Source layer "${A}" does not exist on source "${k.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const v=[];for(const A of l){const k=this._layers[A];k.type!=="custom"&&v.push(k.serialize())}return v}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const v=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(k.length||B.length)&&this._updateWorkerLayers(k,B);for(const j in this._updatedSources){const Z=this._updatedSources[j];Z==="reload"?this._reloadSource(j):Z==="clear"&&this._clearSource(j)}this._updateTilesForChangedImages();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const A={};for(const k in this.sourceCaches){const B=this.sourceCaches[k];A[k]=B.used,B.used=!1}for(const k of this._order){const B=this._layers[k];B.recalculate(l,this._availableImages),!B.isHidden(l.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const k in A){const B=this.sourceCaches[k];A[k]!==B.used&&B.fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(l),this.z=l.zoom,v&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const v in this.sourceCaches)this.sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:v})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),Ii(this,h.validateStyle(l)))return!1;(l=h.clone$1(l)).layers=jn(l.layers);const v=function(k,B){if(!k)return[{command:rn.setStyle,args:[B]}];let j=[];try{if(!R(k.version,B.version))return[{command:rn.setStyle,args:[B]}];R(k.center,B.center)||j.push({command:rn.setCenter,args:[B.center]}),R(k.zoom,B.zoom)||j.push({command:rn.setZoom,args:[B.zoom]}),R(k.bearing,B.bearing)||j.push({command:rn.setBearing,args:[B.bearing]}),R(k.pitch,B.pitch)||j.push({command:rn.setPitch,args:[B.pitch]}),R(k.sprite,B.sprite)||j.push({command:rn.setSprite,args:[B.sprite]}),R(k.glyphs,B.glyphs)||j.push({command:rn.setGlyphs,args:[B.glyphs]}),R(k.transition,B.transition)||j.push({command:rn.setTransition,args:[B.transition]}),R(k.light,B.light)||j.push({command:rn.setLight,args:[B.light]});const Z={},J=[];(function(se,ye,Ae,Je){let ke;for(ke in ye=ye||{},se=se||{})Object.prototype.hasOwnProperty.call(se,ke)&&(Object.prototype.hasOwnProperty.call(ye,ke)||Ln(ke,Ae,Je));for(ke in ye)Object.prototype.hasOwnProperty.call(ye,ke)&&(Object.prototype.hasOwnProperty.call(se,ke)?R(se[ke],ye[ke])||(se[ke].type==="geojson"&&ye[ke].type==="geojson"&&Ui(se,ye,ke)?Ae.push({command:rn.setGeoJSONSourceData,args:[ke,ye[ke].data]}):zt(ke,ye,Ae,Je)):$n(ke,ye,Ae))})(k.sources,B.sources,J,Z);const ne=[];k.layers&&k.layers.forEach(se=>{Z[se.source]?j.push({command:rn.removeLayer,args:[se.id]}):ne.push(se)}),j=j.concat(J),function(se,ye,Ae){ye=ye||[];const Je=(se=se||[]).map(Ft),ke=ye.map(Ft),Ke=se.reduce(Ji,{}),ht=ye.reduce(Ji,{}),ut=Je.slice(),bt=Object.create(null);let ft,jt,Ot,Ut,ti,ui,qt;for(ft=0,jt=0;ft<Je.length;ft++)Ot=Je[ft],Object.prototype.hasOwnProperty.call(ht,Ot)?jt++:(Ae.push({command:rn.removeLayer,args:[Ot]}),ut.splice(ut.indexOf(Ot,jt),1));for(ft=0,jt=0;ft<ke.length;ft++)Ot=ke[ke.length-1-ft],ut[ut.length-1-ft]!==Ot&&(Object.prototype.hasOwnProperty.call(Ke,Ot)?(Ae.push({command:rn.removeLayer,args:[Ot]}),ut.splice(ut.lastIndexOf(Ot,ut.length-jt),1)):jt++,ui=ut[ut.length-ft],Ae.push({command:rn.addLayer,args:[ht[Ot],ui]}),ut.splice(ut.length-ft,0,Ot),bt[Ot]=!0);for(ft=0;ft<ke.length;ft++)if(Ot=ke[ft],Ut=Ke[Ot],ti=ht[Ot],!bt[Ot]&&!R(Ut,ti))if(R(Ut.source,ti.source)&&R(Ut["source-layer"],ti["source-layer"])&&R(Ut.type,ti.type)){for(qt in Ze(Ut.layout,ti.layout,Ae,Ot,null,rn.setLayoutProperty),Ze(Ut.paint,ti.paint,Ae,Ot,null,rn.setPaintProperty),R(Ut.filter,ti.filter)||Ae.push({command:rn.setFilter,args:[Ot,ti.filter]}),R(Ut.minzoom,ti.minzoom)&&R(Ut.maxzoom,ti.maxzoom)||Ae.push({command:rn.setLayerZoomRange,args:[Ot,ti.minzoom,ti.maxzoom]}),Ut)Object.prototype.hasOwnProperty.call(Ut,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?Ze(Ut[qt],ti[qt],Ae,Ot,qt.slice(6),rn.setPaintProperty):R(Ut[qt],ti[qt])||Ae.push({command:rn.setLayerProperty,args:[Ot,qt,ti[qt]]}));for(qt in ti)Object.prototype.hasOwnProperty.call(ti,qt)&&!Object.prototype.hasOwnProperty.call(Ut,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?Ze(Ut[qt],ti[qt],Ae,Ot,qt.slice(6),rn.setPaintProperty):R(Ut[qt],ti[qt])||Ae.push({command:rn.setLayerProperty,args:[Ot,qt,ti[qt]]}))}else Ae.push({command:rn.removeLayer,args:[Ot]}),ui=ut[ut.lastIndexOf(Ot)+1],Ae.push({command:rn.addLayer,args:[ti,ui]})}(ne,B.layers,j)}catch(Z){console.warn("Unable to compute style diff:",Z),j=[{command:rn.setStyle,args:[B]}]}return j}(this.serialize(),l).filter(k=>!(k.command in hr));if(v.length===0)return!1;const A=v.filter(k=>!(k.command in dn));if(A.length>0)throw new Error(`Unimplemented: ${A.map(k=>k.command).join(", ")}.`);return v.forEach(k=>{k.command!=="setTransition"&&this[k.command].apply(this,k.args)}),this.stylesheet=l,!0}addImage(l,v){if(this.getImage(l))return this.fire(new h.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,v),this._afterImageUpdated(l)}updateImage(l,v){this.imageManager.updateImage(l,v)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new h.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,v,A={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!v.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(v).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(h.validateStyle.source,`sources.${l}`,v,null,A))return;this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);const k=this.sourceCaches[l]=new gt(l,v,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:k.serialize(),sourceId:l})),k.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const A in this._layers)if(this._layers[A].source===l)return this.fire(new h.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${A}" is using it.`)));const v=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],v.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),v.setEventedParent(null),v.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,v){this._checkLoaded(),this.sourceCaches[l].getSource().setData(v),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,v,A={}){this._checkLoaded();const k=l.id;if(this.getLayer(k))return void this.fire(new h.ErrorEvent(new Error(`Layer "${k}" already exists on this map.`)));let B;if(l.type==="custom"){if(Ii(this,h.validateCustomStyleLayer(l)))return;B=h.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(k,l.source),l=h.clone$1(l),l=h.extend(l,{source:k})),this._validate(h.validateStyle.layer,`layers.${k}`,l,{arrayIndex:-1},A))return;B=h.createStyleLayer(l),this._validateLayer(B),B.setEventedParent(this,{layer:{id:k}}),this._serializedLayers[B.id]=B.serialize()}const j=v?this._order.indexOf(v):this._order.length;if(v&&j===-1)this.fire(new h.ErrorEvent(new Error(`Cannot add layer "${k}" before non-existing layer "${v}".`)));else{if(this._order.splice(j,0,k),this._layerOrderChanged=!0,this._layers[k]=B,this._removedLayers[k]&&B.source&&B.type!=="custom"){const Z=this._removedLayers[k];delete this._removedLayers[k],Z.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(l,v){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new h.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===v)return;const A=this._order.indexOf(l);this._order.splice(A,1);const k=v?this._order.indexOf(v):this._order.length;v&&k===-1?this.fire(new h.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${v}".`))):(this._order.splice(k,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const v=this._layers[l];if(!v)return void this.fire(new h.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));v.setEventedParent(null);const A=this._order.indexOf(l);this._order.splice(A,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=v,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],v.onRemove&&v.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,v,A){this._checkLoaded();const k=this.getLayer(l);k?k.minzoom===v&&k.maxzoom===A||(v!=null&&(k.minzoom=v),A!=null&&(k.maxzoom=A),this._updateLayer(k)):this.fire(new h.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,v,A={}){this._checkLoaded();const k=this.getLayer(l);if(k){if(!R(k.filter,v))return v==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(h.validateStyle.filter,`layers.${k.id}.filter`,v,null,A)||(k.filter=h.clone$1(v),this._updateLayer(k)))}else this.fire(new h.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return h.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,v,A,k={}){this._checkLoaded();const B=this.getLayer(l);B?R(B.getLayoutProperty(v),A)||(B.setLayoutProperty(v,A,k),this._updateLayer(B)):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,v){const A=this.getLayer(l);if(A)return A.getLayoutProperty(v);this.fire(new h.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,v,A,k={}){this._checkLoaded();const B=this.getLayer(l);B?R(B.getPaintProperty(v),A)||(B.setPaintProperty(v,A,k)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,v){return this.getLayer(l).getPaintProperty(v)}setFeatureState(l,v){this._checkLoaded();const A=l.source,k=l.sourceLayer,B=this.sourceCaches[A];if(B===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${A}' does not exist in the map's style.`)));const j=B.getSource().type;j==="geojson"&&k?this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||k?(l.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),B.setFeatureState(k,l.id,v)):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,v){this._checkLoaded();const A=l.source,k=this.sourceCaches[A];if(k===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${A}' does not exist in the map's style.`)));const B=k.getSource().type,j=B==="vector"?l.sourceLayer:void 0;B!=="vector"||j?v&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(j,l.id,v):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const v=l.source,A=l.sourceLayer,k=this.sourceCaches[v];if(k!==void 0)return k.getSource().type!=="vector"||A?(l.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),k.getFeatureState(A,l.id)):void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:h.mapObject(this.sourceCaches,l=>l.serialize()),layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(l){const v=j=>this._layers[j].type==="fill-extrusion",A={},k=[];for(let j=this._order.length-1;j>=0;j--){const Z=this._order[j];if(v(Z)){A[Z]=j;for(const J of l){const ne=J[Z];if(ne)for(const se of ne)k.push(se)}}}k.sort((j,Z)=>Z.intersectionZ-j.intersectionZ);const B=[];for(let j=this._order.length-1;j>=0;j--){const Z=this._order[j];if(v(Z))for(let J=k.length-1;J>=0;J--){const ne=k[J].feature;if(A[ne.layer.id]<j)break;B.push(ne),k.pop()}else for(const J of l){const ne=J[Z];if(ne)for(const se of ne)B.push(se.feature)}}return B}queryRenderedFeatures(l,v,A){v&&v.filter&&this._validate(h.validateStyle.filter,"queryRenderedFeatures.filter",v.filter,null,v);const k={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const j of v.layers){const Z=this._layers[j];if(!Z)return this.fire(new h.ErrorEvent(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];k[Z.source]=!0}}const B=[];v.availableImages=this._availableImages;for(const j in this.sourceCaches)v.layers&&!k[j]||B.push(dt(this.sourceCaches[j],this._layers,this._serializedLayers,l,v,A));return this.placement&&B.push(function(j,Z,J,ne,se,ye,Ae){const Je={},ke=ye.queryRenderedSymbols(ne),Ke=[];for(const ht of Object.keys(ke).map(Number))Ke.push(Ae[ht]);Ke.sort(It);for(const ht of Ke){const ut=ht.featureIndex.lookupSymbolFeatures(ke[ht.bucketInstanceId],Z,ht.bucketIndex,ht.sourceLayerIndex,se.filter,se.layers,se.availableImages,j);for(const bt in ut){const ft=Je[bt]=Je[bt]||[],jt=ut[bt];jt.sort((Ot,Ut)=>{const ti=ht.featureSortOrder;if(ti){const ui=ti.indexOf(Ot.featureIndex);return ti.indexOf(Ut.featureIndex)-ui}return Ut.featureIndex-Ot.featureIndex});for(const Ot of jt)ft.push(Ot)}}for(const ht in Je)Je[ht].forEach(ut=>{const bt=ut.feature,ft=J[j[ht].source].getFeatureState(bt.layer["source-layer"],bt.id);bt.source=bt.layer.source,bt.layer["source-layer"]&&(bt.sourceLayer=bt.layer["source-layer"]),bt.state=ft});return Je}(this._layers,this._serializedLayers,this.sourceCaches,l,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(l,v){v&&v.filter&&this._validate(h.validateStyle.filter,"querySourceFeatures.filter",v.filter,null,v);const A=this.sourceCaches[l];return A?function(k,B){const j=k.getRenderableIds().map(ne=>k.getTileByID(ne)),Z=[],J={};for(let ne=0;ne<j.length;ne++){const se=j[ne],ye=se.tileID.canonical.key;J[ye]||(J[ye]=!0,se.querySourceFeatures(Z,B))}return Z}(A,v):[]}addSourceType(l,v,A){return fr.getSourceType(l)?A(new Error(`A source type called "${l}" already exists.`)):(fr.setSourceType(l,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:v.workerSourceURL},A):A(null,null))}getLight(){return this.light.getLight()}setLight(l,v={}){this._checkLoaded();const A=this.light.getLight();let k=!1;for(const j in l)if(!R(l[j],A[j])){k=!0;break}if(!k)return;const B={now:h.exported.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,v),this.light.updateTransitions(B)}_validate(l,v,A,k,B={}){return(!B||B.validate!==!1)&&Ii(this,l.call(h.validateStyle,h.extend({key:v,style:this.serialize(),value:A,styleSpec:h.spec},k)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const v=this.sourceCaches[l];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const v in this.sourceCaches)this.sourceCaches[v].update(l)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,v,A,k,B=!1){let j=!1,Z=!1;const J={};for(const ne of this._order){const se=this._layers[ne];if(se.type!=="symbol")continue;if(!J[se.source]){const Ae=this.sourceCaches[se.source];J[se.source]=Ae.getRenderableIds(!0).map(Je=>Ae.getTileByID(Je)).sort((Je,ke)=>ke.tileID.overscaledZ-Je.tileID.overscaledZ||(Je.tileID.isLessThan(ke.tileID)?-1:1))}const ye=this.crossTileSymbolIndex.addLayer(se,J[se.source],l.center.lng);j=j||ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||A===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),l.zoom))&&(this.pauseablePlacement=new Yt(l,this._order,B,v,A,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),Z=!0),j&&this.pauseablePlacement.placement.setStale()),Z||j)for(const ne of this._order){const se=this._layers[ne];se.type==="symbol"&&this.placement.updateLayerOpacities(se,J[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,v,A){this.imageManager.getImages(v.icons,A),this._updateTilesForChangedImages();const k=this.sourceCaches[v.source];k&&k.setDependencies(v.tileID.key,v.type,v.icons)}getGlyphs(l,v,A){this.glyphManager.getGlyphs(v.stacks,A)}getResource(l,v,A){return h.makeRequest(v,A)}}fr.getSourceType=function(C){return xi[C]},fr.setSourceType=function(C,l){xi[C]=l},fr.registerForPluginStateChange=h.registerForPluginStateChange;var Ko=h.createLayout([{name:"a_pos",type:"Int16",components:2}]),iu={prelude:Mr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Mr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Mr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Mr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Mr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Mr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Mr(C,l){const v=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,A=l.match(/attribute ([\w]+) ([\w]+)/g),k=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=B?B.concat(k):k,Z={};return{fragmentSource:C=C.replace(v,(J,ne,se,ye,Ae)=>(Z[Ae]=!0,ne==="define"?`
#ifndef HAS_UNIFORM_u_${Ae}
varying ${se} ${ye} ${Ae};
#else
uniform ${se} ${ye} u_${Ae};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ae}
    ${se} ${ye} ${Ae} = u_${Ae};
#endif
`)),vertexSource:l=l.replace(v,(J,ne,se,ye,Ae)=>{const Je=ye==="float"?"vec2":"vec4",ke=Ae.match(/color/)?"color":Je;return Z[Ae]?ne==="define"?`
#ifndef HAS_UNIFORM_u_${Ae}
uniform lowp float u_${Ae}_t;
attribute ${se} ${Je} a_${Ae};
varying ${se} ${ye} ${Ae};
#else
uniform ${se} ${ye} u_${Ae};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ae}
    ${Ae} = a_${Ae};
#else
    ${se} ${ye} ${Ae} = u_${Ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ae}
    ${Ae} = unpack_mix_${ke}(a_${Ae}, u_${Ae}_t);
#else
    ${se} ${ye} ${Ae} = u_${Ae};
#endif
`:ne==="define"?`
#ifndef HAS_UNIFORM_u_${Ae}
uniform lowp float u_${Ae}_t;
attribute ${se} ${Je} a_${Ae};
#else
uniform ${se} ${ye} u_${Ae};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ae}
    ${se} ${ye} ${Ae} = a_${Ae};
#else
    ${se} ${ye} ${Ae} = u_${Ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ae}
    ${se} ${ye} ${Ae} = unpack_mix_${ke}(a_${Ae}, u_${Ae}_t);
#else
    ${se} ${ye} ${Ae} = u_${Ae};
#endif
`}),staticAttributes:A,staticUniforms:j}}class oo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,v,A,k,B,j,Z,J){this.context=l;let ne=this.boundPaintVertexBuffers.length!==k.length;for(let se=0;!ne&&se<k.length;se++)this.boundPaintVertexBuffers[se]!==k[se]&&(ne=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===v&&this.boundLayoutVertexBuffer===A&&!ne&&this.boundIndexBuffer===B&&this.boundVertexOffset===j&&this.boundDynamicVertexBuffer===Z&&this.boundDynamicVertexBuffer2===J?(l.bindVertexArrayOES.set(this.vao),Z&&Z.bind(),B&&B.dynamicDraw&&B.bind(),J&&J.bind()):this.freshBind(v,A,k,B,j,Z,J)}freshBind(l,v,A,k,B,j,Z){let J;const ne=l.numAttributes,se=this.context,ye=se.gl;if(se.extVertexArrayObject)this.vao&&this.destroy(),this.vao=se.extVertexArrayObject.createVertexArrayOES(),se.bindVertexArrayOES.set(this.vao),J=0,this.boundProgram=l,this.boundLayoutVertexBuffer=v,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=k,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=Z;else{J=se.currentNumAttributes||0;for(let Ae=ne;Ae<J;Ae++)ye.disableVertexAttribArray(Ae)}v.enableAttributes(ye,l);for(const Ae of A)Ae.enableAttributes(ye,l);j&&j.enableAttributes(ye,l),Z&&Z.enableAttributes(ye,l),v.bind(),v.setVertexAttribPointers(ye,l,B);for(const Ae of A)Ae.bind(),Ae.setVertexAttribPointers(ye,l,B);j&&(j.bind(),j.setVertexAttribPointers(ye,l,B)),k&&k.bind(),Z&&(Z.bind(),Z.setVertexAttribPointers(ye,l,B)),se.currentNumAttributes=ne}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function sl(C){const l=[];for(let v=0;v<C.length;v++){if(C[v]===null)continue;const A=C[v].split(" ");l.push(A.pop())}return l}class ea{constructor(l,v,A,k,B,j){const Z=l.gl;this.program=Z.createProgram();const J=sl(A.staticAttributes),ne=k?k.getBinderAttributes():[],se=J.concat(ne),ye=A.staticUniforms?sl(A.staticUniforms):[],Ae=k?k.getBinderUniforms():[],Je=ye.concat(Ae),ke=[];for(const Ot of Je)ke.indexOf(Ot)<0&&ke.push(Ot);const Ke=k?k.defines():[];j&&Ke.push("#define OVERDRAW_INSPECTOR;");const ht=Ke.concat(iu.prelude.fragmentSource,A.fragmentSource).join(`
`),ut=Ke.concat(iu.prelude.vertexSource,A.vertexSource).join(`
`),bt=Z.createShader(Z.FRAGMENT_SHADER);if(Z.isContextLost())return void(this.failedToCreate=!0);Z.shaderSource(bt,ht),Z.compileShader(bt),Z.attachShader(this.program,bt);const ft=Z.createShader(Z.VERTEX_SHADER);if(Z.isContextLost())return void(this.failedToCreate=!0);Z.shaderSource(ft,ut),Z.compileShader(ft),Z.attachShader(this.program,ft),this.attributes={};const jt={};this.numAttributes=se.length;for(let Ot=0;Ot<this.numAttributes;Ot++)se[Ot]&&(Z.bindAttribLocation(this.program,Ot,se[Ot]),this.attributes[se[Ot]]=Ot);Z.linkProgram(this.program),Z.deleteShader(ft),Z.deleteShader(bt);for(let Ot=0;Ot<ke.length;Ot++){const Ut=ke[Ot];if(Ut&&!jt[Ut]){const ti=Z.getUniformLocation(this.program,Ut);ti&&(jt[Ut]=ti)}}this.fixedUniforms=B(l,jt),this.binderUniforms=k?k.getUniforms(l,jt):[]}draw(l,v,A,k,B,j,Z,J,ne,se,ye,Ae,Je,ke,Ke,ht){const ut=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(A),l.setStencilMode(k),l.setColorMode(B),l.setCullFace(j);for(const ft in this.fixedUniforms)this.fixedUniforms[ft].set(Z[ft]);ke&&ke.setUniforms(l,this.binderUniforms,Ae,{zoom:Je});const bt={[ut.LINES]:2,[ut.TRIANGLES]:3,[ut.LINE_STRIP]:1}[v];for(const ft of ye.get()){const jt=ft.vaos||(ft.vaos={});(jt[J]||(jt[J]=new oo)).bind(l,this,ne,ke?ke.getPaintVertexBuffers():[],se,ft.vertexOffset,Ke,ht),ut.drawElements(v,ft.primitiveLength*bt,ut.UNSIGNED_SHORT,ft.primitiveOffset*bt*2)}}}function bo(C,l,v){const A=1/ze(v,1,l.transform.tileZoom),k=Math.pow(2,v.tileID.overscaledZ),B=v.tileSize*Math.pow(2,l.transform.tileZoom)/k,j=B*(v.tileID.canonical.x+v.tileID.wrap*k),Z=B*v.tileID.canonical.y;return{u_image:0,u_texsize:v.imageAtlasTexture.size,u_scale:[A,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[j>>16,Z>>16],u_pixel_coord_lower:[65535&j,65535&Z]}}const Pa=(C,l,v,A)=>{const k=l.style.light,B=k.properties.get("position"),j=[B.x,B.y,B.z],Z=function(){var ne=new h.ARRAY_TYPE(9);return h.ARRAY_TYPE!=Float32Array&&(ne[1]=0,ne[2]=0,ne[3]=0,ne[5]=0,ne[6]=0,ne[7]=0),ne[0]=1,ne[4]=1,ne[8]=1,ne}();k.properties.get("anchor")==="viewport"&&function(ne,se){var ye=Math.sin(se),Ae=Math.cos(se);ne[0]=Ae,ne[1]=ye,ne[2]=0,ne[3]=-ye,ne[4]=Ae,ne[5]=0,ne[6]=0,ne[7]=0,ne[8]=1}(Z,-l.transform.angle),function(ne,se,ye){var Ae=se[0],Je=se[1],ke=se[2];ne[0]=Ae*ye[0]+Je*ye[3]+ke*ye[6],ne[1]=Ae*ye[1]+Je*ye[4]+ke*ye[7],ne[2]=Ae*ye[2]+Je*ye[5]+ke*ye[8]}(j,j,Z);const J=k.properties.get("color");return{u_matrix:C,u_lightpos:j,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[J.r,J.g,J.b],u_vertical_gradient:+v,u_opacity:A}},Br=(C,l,v,A,k,B,j)=>h.extend(Pa(C,l,v,A),bo(B,l,j),{u_height_factor:-Math.pow(2,k.overscaledZ)/j.tileSize/8}),La=C=>({u_matrix:C}),ca=(C,l,v,A)=>h.extend(La(C),bo(v,l,A)),_c=(C,l)=>({u_matrix:C,u_world:l}),za=(C,l,v,A,k)=>h.extend(ca(C,l,v,A),{u_world:k}),ll=(C,l,v,A)=>{const k=C.transform;let B,j;if(A.paint.get("circle-pitch-alignment")==="map"){const Z=ze(v,1,k.zoom);B=!0,j=[Z,Z]}else B=!1,j=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(A.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(l.posMatrix,v,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:j}},Va=(C,l,v)=>{const A=ze(v,1,l.zoom),k=Math.pow(2,l.zoom-v.tileID.overscaledZ),B=v.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:A,u_extrude_scale:[l.pixelsToGLUnits[0]/(A*k),l.pixelsToGLUnits[1]/(A*k)],u_overscale_factor:B}},ao=(C,l,v=1)=>({u_matrix:C,u_color:l,u_overlay:0,u_overlay_scale:v}),ma=C=>({u_matrix:C}),Lo=(C,l,v,A)=>({u_matrix:C,u_extrude_scale:ze(l,1,v),u_intensity:A});function rs(C,l){const v=Math.pow(2,l.canonical.z),A=l.canonical.y;return[new h.MercatorCoordinate(0,A/v).toLngLat().lat,new h.MercatorCoordinate(0,(A+1)/v).toLngLat().lat]}const nu=(C,l,v)=>{const A=C.transform;return{u_matrix:vc(C,l,v),u_ratio:1/ze(l,1,A.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},Vu=(C,l,v,A)=>h.extend(nu(C,l,v),{u_image:0,u_image_height:A}),ul=(C,l,v,A)=>{const k=C.transform,B=Pl(l,k);return{u_matrix:vc(C,l,v),u_texsize:l.imageAtlasTexture.size,u_ratio:1/ze(l,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[B,A.fromScale,A.toScale],u_fade:A.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Ao=(C,l,v,A,k)=>{const B=C.lineAtlas,j=Pl(l,C.transform),Z=v.layout.get("line-cap")==="round",J=B.getDash(A.from,Z),ne=B.getDash(A.to,Z),se=J.width*k.fromScale,ye=ne.width*k.toScale;return h.extend(nu(C,l,v),{u_patternscale_a:[j/se,-J.height/2],u_patternscale_b:[j/ye,-ne.height/2],u_sdfgamma:B.width/(256*Math.min(se,ye)*C.pixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:ne.y,u_mix:k.t})};function Pl(C,l){return 1/ze(C,1,l.tileZoom)}function vc(C,l,v){return C.translatePosMatrix(l.tileID.posMatrix,l,v.paint.get("line-translate"),v.paint.get("line-translate-anchor"))}const bc=(C,l,v,A,k)=>{return{u_matrix:C,u_tl_parent:l,u_scale_parent:v,u_buffer_scale:1,u_fade_t:A.mix,u_opacity:A.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(j=k.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(B=k.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:xc(k.paint.get("raster-hue-rotate"))};var B,j};function xc(C){C*=Math.PI/180;const l=Math.sin(C),v=Math.cos(C);return[(2*v+1)/3,(-Math.sqrt(3)*l-v+1)/3,(Math.sqrt(3)*l-v+1)/3]}const bs=(C,l,v,A,k,B,j,Z,J,ne)=>{const se=k.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+v,u_aspect_ratio:se.width/se.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:j,u_coord_matrix:Z,u_is_text:+J,u_pitch_with_map:+A,u_texsize:ne,u_texture:0}},ru=(C,l,v,A,k,B,j,Z,J,ne,se)=>{const ye=k.transform;return h.extend(bs(C,l,v,A,k,B,j,Z,J,ne),{u_gamma_scale:A?Math.cos(ye._pitch)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+se})},ou=(C,l,v,A,k,B,j,Z,J,ne)=>h.extend(ru(C,l,v,A,k,B,j,Z,!0,J,!0),{u_texsize_icon:ne,u_texture_icon:1}),ih=(C,l,v)=>({u_matrix:C,u_opacity:l,u_color:v}),Ll=(C,l,v,A,k,B)=>h.extend(function(j,Z,J,ne){const se=J.imageManager.getPattern(j.from.toString()),ye=J.imageManager.getPattern(j.to.toString()),{width:Ae,height:Je}=J.imageManager.getPixelSize(),ke=Math.pow(2,ne.tileID.overscaledZ),Ke=ne.tileSize*Math.pow(2,J.transform.tileZoom)/ke,ht=Ke*(ne.tileID.canonical.x+ne.tileID.wrap*ke),ut=Ke*ne.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ye.tl,u_pattern_br_b:ye.br,u_texsize:[Ae,Je],u_mix:Z.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ye.displaySize,u_scale_a:Z.fromScale,u_scale_b:Z.toScale,u_tile_units_to_pixels:1/ze(ne,1,J.transform.tileZoom),u_pixel_coord_upper:[ht>>16,ut>>16],u_pixel_coord_lower:[65535&ht,65535&ut]}}(A,B,v,k),{u_matrix:C,u_opacity:l}),ga={fillExtrusion:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_lightpos:new h.Uniform3f(C,l.u_lightpos),u_lightintensity:new h.Uniform1f(C,l.u_lightintensity),u_lightcolor:new h.Uniform3f(C,l.u_lightcolor),u_vertical_gradient:new h.Uniform1f(C,l.u_vertical_gradient),u_opacity:new h.Uniform1f(C,l.u_opacity)}),fillExtrusionPattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_lightpos:new h.Uniform3f(C,l.u_lightpos),u_lightintensity:new h.Uniform1f(C,l.u_lightintensity),u_lightcolor:new h.Uniform3f(C,l.u_lightcolor),u_vertical_gradient:new h.Uniform1f(C,l.u_vertical_gradient),u_height_factor:new h.Uniform1f(C,l.u_height_factor),u_image:new h.Uniform1i(C,l.u_image),u_texsize:new h.Uniform2f(C,l.u_texsize),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade),u_opacity:new h.Uniform1f(C,l.u_opacity)}),fill:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),fillPattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_image:new h.Uniform1i(C,l.u_image),u_texsize:new h.Uniform2f(C,l.u_texsize),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade)}),fillOutline:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_world:new h.Uniform2f(C,l.u_world)}),fillOutlinePattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_world:new h.Uniform2f(C,l.u_world),u_image:new h.Uniform1i(C,l.u_image),u_texsize:new h.Uniform2f(C,l.u_texsize),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade)}),circle:(C,l)=>({u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_scale_with_map:new h.Uniform1i(C,l.u_scale_with_map),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_extrude_scale:new h.Uniform2f(C,l.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),collisionBox:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pixels_to_tile_units:new h.Uniform1f(C,l.u_pixels_to_tile_units),u_extrude_scale:new h.Uniform2f(C,l.u_extrude_scale),u_overscale_factor:new h.Uniform1f(C,l.u_overscale_factor)}),collisionCircle:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_inv_matrix:new h.UniformMatrix4f(C,l.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(C,l.u_viewport_size)}),debug:(C,l)=>({u_color:new h.UniformColor(C,l.u_color),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_overlay:new h.Uniform1i(C,l.u_overlay),u_overlay_scale:new h.Uniform1f(C,l.u_overlay_scale)}),clippingMask:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),heatmap:(C,l)=>({u_extrude_scale:new h.Uniform1f(C,l.u_extrude_scale),u_intensity:new h.Uniform1f(C,l.u_intensity),u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),heatmapTexture:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_world:new h.Uniform2f(C,l.u_world),u_image:new h.Uniform1i(C,l.u_image),u_color_ramp:new h.Uniform1i(C,l.u_color_ramp),u_opacity:new h.Uniform1f(C,l.u_opacity)}),hillshade:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_image:new h.Uniform1i(C,l.u_image),u_latrange:new h.Uniform2f(C,l.u_latrange),u_light:new h.Uniform2f(C,l.u_light),u_shadow:new h.UniformColor(C,l.u_shadow),u_highlight:new h.UniformColor(C,l.u_highlight),u_accent:new h.UniformColor(C,l.u_accent)}),hillshadePrepare:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_image:new h.Uniform1i(C,l.u_image),u_dimension:new h.Uniform2f(C,l.u_dimension),u_zoom:new h.Uniform1f(C,l.u_zoom),u_unpack:new h.Uniform4f(C,l.u_unpack)}),line:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels)}),lineGradient:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels),u_image:new h.Uniform1i(C,l.u_image),u_image_height:new h.Uniform1f(C,l.u_image_height)}),linePattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_texsize:new h.Uniform2f(C,l.u_texsize),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_image:new h.Uniform1i(C,l.u_image),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade)}),lineSDF:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels),u_patternscale_a:new h.Uniform2f(C,l.u_patternscale_a),u_patternscale_b:new h.Uniform2f(C,l.u_patternscale_b),u_sdfgamma:new h.Uniform1f(C,l.u_sdfgamma),u_image:new h.Uniform1i(C,l.u_image),u_tex_y_a:new h.Uniform1f(C,l.u_tex_y_a),u_tex_y_b:new h.Uniform1f(C,l.u_tex_y_b),u_mix:new h.Uniform1f(C,l.u_mix)}),raster:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_tl_parent:new h.Uniform2f(C,l.u_tl_parent),u_scale_parent:new h.Uniform1f(C,l.u_scale_parent),u_buffer_scale:new h.Uniform1f(C,l.u_buffer_scale),u_fade_t:new h.Uniform1f(C,l.u_fade_t),u_opacity:new h.Uniform1f(C,l.u_opacity),u_image0:new h.Uniform1i(C,l.u_image0),u_image1:new h.Uniform1i(C,l.u_image1),u_brightness_low:new h.Uniform1f(C,l.u_brightness_low),u_brightness_high:new h.Uniform1f(C,l.u_brightness_high),u_saturation_factor:new h.Uniform1f(C,l.u_saturation_factor),u_contrast_factor:new h.Uniform1f(C,l.u_contrast_factor),u_spin_weights:new h.Uniform3f(C,l.u_spin_weights)}),symbolIcon:(C,l)=>({u_is_size_zoom_constant:new h.Uniform1i(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(C,l.u_is_size_feature_constant),u_size_t:new h.Uniform1f(C,l.u_size_t),u_size:new h.Uniform1f(C,l.u_size),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pitch:new h.Uniform1f(C,l.u_pitch),u_rotate_symbol:new h.Uniform1i(C,l.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(C,l.u_aspect_ratio),u_fade_change:new h.Uniform1f(C,l.u_fade_change),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(C,l.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(C,l.u_coord_matrix),u_is_text:new h.Uniform1i(C,l.u_is_text),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_texsize:new h.Uniform2f(C,l.u_texsize),u_texture:new h.Uniform1i(C,l.u_texture)}),symbolSDF:(C,l)=>({u_is_size_zoom_constant:new h.Uniform1i(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(C,l.u_is_size_feature_constant),u_size_t:new h.Uniform1f(C,l.u_size_t),u_size:new h.Uniform1f(C,l.u_size),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pitch:new h.Uniform1f(C,l.u_pitch),u_rotate_symbol:new h.Uniform1i(C,l.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(C,l.u_aspect_ratio),u_fade_change:new h.Uniform1f(C,l.u_fade_change),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(C,l.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(C,l.u_coord_matrix),u_is_text:new h.Uniform1i(C,l.u_is_text),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_texsize:new h.Uniform2f(C,l.u_texsize),u_texture:new h.Uniform1i(C,l.u_texture),u_gamma_scale:new h.Uniform1f(C,l.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(C,l.u_is_halo)}),symbolTextAndIcon:(C,l)=>({u_is_size_zoom_constant:new h.Uniform1i(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(C,l.u_is_size_feature_constant),u_size_t:new h.Uniform1f(C,l.u_size_t),u_size:new h.Uniform1f(C,l.u_size),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pitch:new h.Uniform1f(C,l.u_pitch),u_rotate_symbol:new h.Uniform1i(C,l.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(C,l.u_aspect_ratio),u_fade_change:new h.Uniform1f(C,l.u_fade_change),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(C,l.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(C,l.u_coord_matrix),u_is_text:new h.Uniform1i(C,l.u_is_text),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_texsize:new h.Uniform2f(C,l.u_texsize),u_texsize_icon:new h.Uniform2f(C,l.u_texsize_icon),u_texture:new h.Uniform1i(C,l.u_texture),u_texture_icon:new h.Uniform1i(C,l.u_texture_icon),u_gamma_scale:new h.Uniform1f(C,l.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(C,l.u_is_halo)}),background:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_opacity:new h.Uniform1f(C,l.u_opacity),u_color:new h.UniformColor(C,l.u_color)}),backgroundPattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_opacity:new h.Uniform1f(C,l.u_opacity),u_image:new h.Uniform1i(C,l.u_image),u_pattern_tl_a:new h.Uniform2f(C,l.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(C,l.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(C,l.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(C,l.u_pattern_br_b),u_texsize:new h.Uniform2f(C,l.u_texsize),u_mix:new h.Uniform1f(C,l.u_mix),u_pattern_size_a:new h.Uniform2f(C,l.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(C,l.u_pattern_size_b),u_scale_a:new h.Uniform1f(C,l.u_scale_a),u_scale_b:new h.Uniform1f(C,l.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(C,l.u_tile_units_to_pixels)})};class os{constructor(l,v,A){this.context=l;const k=l.gl;this.buffer=k.createBuffer(),this.dynamicDraw=Boolean(A),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const v=this.context.gl;this.context.unbindVAO(),this.bind(),v.bufferSubData(v.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const as={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vs{constructor(l,v,A,k){this.length=v.length,this.attributes=A,this.itemSize=v.bytesPerElement,this.dynamicDraw=k,this.context=l;const B=l.gl;this.buffer=B.createBuffer(),l.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const v=this.context.gl;this.bind(),v.bufferSubData(v.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,v){for(let A=0;A<this.attributes.length;A++){const k=v.attributes[this.attributes[A].name];k!==void 0&&l.enableVertexAttribArray(k)}}setVertexAttribPointers(l,v,A){for(let k=0;k<this.attributes.length;k++){const B=this.attributes[k],j=v.attributes[B.name];j!==void 0&&l.vertexAttribPointer(j,B.components,l[as[B.type]],!1,this.itemSize,B.offset+this.itemSize*(A||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ir{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class js extends ir{getDefault(){return h.Color.transparent}set(l){const v=this.current;(l.r!==v.r||l.g!==v.g||l.b!==v.b||l.a!==v.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class qs extends ir{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class qo extends ir{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class so extends ir{getDefault(){return[!0,!0,!0,!0]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||l[2]!==v[2]||l[3]!==v[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Go extends ir{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class ju extends ir{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class qu extends ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const v=this.current;(l.func!==v.func||l.ref!==v.ref||l.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Gu extends ir{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||l[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class au extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=l,this.dirty=!1}}class su extends ir{getDefault(){return[0,1]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class zl extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=l,this.dirty=!1}}class lu extends ir{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Hu extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.BLEND):v.disable(v.BLEND),this.current=l,this.dirty=!1}}class uu extends ir{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class nh extends ir{getDefault(){return h.Color.transparent}set(l){const v=this.current;(l.r!==v.r||l.g!==v.g||l.b!==v.b||l.a!==v.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Dl extends ir{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class ss extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=l,this.dirty=!1}}class rh extends ir{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ho extends ir{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class wc extends ir{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Gs extends ir{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Hs extends ir{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||l[2]!==v[2]||l[3]!==v[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class cl extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class xs extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ls extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindTexture(v.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class ja extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Zs extends ir{getDefault(){return null}set(l){const v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ws extends ir{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Zu extends ir{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Ws extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Pr extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class hl extends ir{constructor(l,v){super(l),this.context=l,this.parent=v}getDefault(){return null}}class Es extends hl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ec extends hl{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Wu{constructor(l,v,A,k){this.context=l,this.width=v,this.height=A;const B=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Es(l,B),k&&(this.depthAttachment=new Ec(l,B))}destroy(){const l=this.context.gl,v=this.colorAttachment.get();if(v&&l.deleteTexture(v),this.depthAttachment){const A=this.depthAttachment.get();A&&l.deleteRenderbuffer(A)}l.deleteFramebuffer(this.framebuffer)}}class Dn{constructor(l,v,A){this.blendFunction=l,this.blendColor=v,this.mask=A}}Dn.Replace=[1,0],Dn.disabled=new Dn(Dn.Replace,h.Color.transparent,[!1,!1,!1,!1]),Dn.unblended=new Dn(Dn.Replace,h.Color.transparent,[!0,!0,!0,!0]),Dn.alphaBlended=new Dn([1,771],h.Color.transparent,[!0,!0,!0,!0]);class cu{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new js(this),this.clearDepth=new qs(this),this.clearStencil=new qo(this),this.colorMask=new so(this),this.depthMask=new Go(this),this.stencilMask=new ju(this),this.stencilFunc=new qu(this),this.stencilOp=new Gu(this),this.stencilTest=new au(this),this.depthRange=new su(this),this.depthTest=new zl(this),this.depthFunc=new lu(this),this.blend=new Hu(this),this.blendFunc=new uu(this),this.blendColor=new nh(this),this.blendEquation=new Dl(this),this.cullFace=new ss(this),this.cullFaceSide=new rh(this),this.frontFace=new Ho(this),this.program=new wc(this),this.activeTexture=new Gs(this),this.viewport=new Hs(this),this.bindFramebuffer=new cl(this),this.bindRenderbuffer=new xs(this),this.bindTexture=new ls(this),this.bindVertexBuffer=new ja(this),this.bindElementBuffer=new Zs(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ws(this),this.pixelStoreUnpack=new Zu(this),this.pixelStoreUnpackPremultiplyAlpha=new Ws(this),this.pixelStoreUnpackFlipY=new Pr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,v){return new os(this,l,v)}createVertexBuffer(l,v,A){return new Vs(this,l,v,A)}createRenderbuffer(l,v,A){const k=this.gl,B=k.createRenderbuffer();return this.bindRenderbuffer.set(B),k.renderbufferStorage(k.RENDERBUFFER,l,v,A),this.bindRenderbuffer.set(null),B}createFramebuffer(l,v,A){return new Wu(this,l,v,A)}clear({color:l,depth:v}){const A=this.gl;let k=0;l&&(k|=A.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),v!==void 0&&(k|=A.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(v),this.depthMask.set(!0)),A.clear(k)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){R(l.blendFunction,Dn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class lr{constructor(l,v,A){this.func=l,this.mask=v,this.range=A}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const Xa=7680;class Dr{constructor(l,v,A,k,B,j){this.test=l,this.ref=v,this.mask=A,this.fail=k,this.depthFail=B,this.pass=j}}Dr.disabled=new Dr({func:519,mask:0},0,0,Xa,Xa,Xa);class lo{constructor(l,v,A){this.enable=l,this.mode=v,this.frontFace=A}}let hu;function du(C,l,v,A,k,B,j){const Z=C.context,J=Z.gl,ne=C.useProgram("collisionBox"),se=[];let ye=0,Ae=0;for(let ft=0;ft<A.length;ft++){const jt=A[ft],Ot=l.getTile(jt),Ut=Ot.getBucket(v);if(!Ut)continue;let ti=jt.posMatrix;k[0]===0&&k[1]===0||(ti=C.translatePosMatrix(jt.posMatrix,Ot,k,B));const ui=j?Ut.textCollisionBox:Ut.iconCollisionBox,qt=Ut.collisionCircleArray;if(qt.length>0){const Gi=h.create(),Ci=ti;h.mul(Gi,Ut.placementInvProjMatrix,C.transform.glCoordMatrix),h.mul(Gi,Gi,Ut.placementViewportMatrix),se.push({circleArray:qt,circleOffset:Ae,transform:Ci,invTransform:Gi}),ye+=qt.length/4,Ae=ye}ui&&ne.draw(Z,J.LINES,lr.disabled,Dr.disabled,C.colorModeForRenderPass(),lo.disabled,Va(ti,C.transform,Ot),v.id,ui.layoutVertexBuffer,ui.indexBuffer,ui.segments,null,C.transform.zoom,null,null,ui.collisionVertexBuffer)}if(!j||!se.length)return;const Je=C.useProgram("collisionCircle"),ke=new h.CollisionCircleLayoutArray;ke.resize(4*ye),ke._trim();let Ke=0;for(const ft of se)for(let jt=0;jt<ft.circleArray.length/4;jt++){const Ot=4*jt,Ut=ft.circleArray[Ot+0],ti=ft.circleArray[Ot+1],ui=ft.circleArray[Ot+2],qt=ft.circleArray[Ot+3];ke.emplace(Ke++,Ut,ti,ui,qt,0),ke.emplace(Ke++,Ut,ti,ui,qt,1),ke.emplace(Ke++,Ut,ti,ui,qt,2),ke.emplace(Ke++,Ut,ti,ui,qt,3)}(!hu||hu.length<2*ye)&&(hu=function(ft){const jt=2*ft,Ot=new h.QuadTriangleArray;Ot.resize(jt),Ot._trim();for(let Ut=0;Ut<jt;Ut++){const ti=6*Ut;Ot.uint16[ti+0]=4*Ut+0,Ot.uint16[ti+1]=4*Ut+1,Ot.uint16[ti+2]=4*Ut+2,Ot.uint16[ti+3]=4*Ut+2,Ot.uint16[ti+4]=4*Ut+3,Ot.uint16[ti+5]=4*Ut+0}return Ot}(ye));const ht=Z.createIndexBuffer(hu,!0),ut=Z.createVertexBuffer(ke,h.collisionCircleLayout.members,!0);for(const ft of se){const jt={u_matrix:ft.transform,u_inv_matrix:ft.invTransform,u_camera_to_center_distance:(bt=C.transform).cameraToCenterDistance,u_viewport_size:[bt.width,bt.height]};Je.draw(Z,J.TRIANGLES,lr.disabled,Dr.disabled,C.colorModeForRenderPass(),lo.disabled,jt,v.id,ut,ht,h.SegmentVector.simpleSegment(0,2*ft.circleOffset,ft.circleArray.length,ft.circleArray.length/2),null,C.transform.zoom,null,null,null)}var bt;ut.destroy(),ht.destroy()}lo.disabled=new lo(!1,1029,2305),lo.backCCW=new lo(!0,1029,2305);const dl=h.identity(new Float32Array(16));function Xu(C,l,v,A,k,B){const{horizontalAlign:j,verticalAlign:Z}=h.getAnchorAlignment(C),J=-(j-.5)*l,ne=-(Z-.5)*v,se=h.evaluateVariableOffset(C,A);return new h.pointGeometry((J/k+se[0])*B,(ne/k+se[1])*B)}function us(C,l,v,A,k,B,j,Z,J,ne){const se=C.text.placedSymbolArray,ye=C.text.dynamicLayoutVertexArray,Ae=C.icon.dynamicLayoutVertexArray,Je={};ye.clear();for(let ke=0;ke<se.length;ke++){const Ke=se.get(ke),ht=C.allowVerticalPlacement&&!Ke.placedOrientation,ut=Ke.hidden||!Ke.crossTileID||ht?null:A[Ke.crossTileID];if(ut){const bt=new h.pointGeometry(Ke.anchorX,Ke.anchorY),ft=kr(bt,v?j:B),jt=vi(k.cameraToCenterDistance,ft.signedDistanceFromCamera);let Ot=h.evaluateSizeForFeature(C.textSizeData,J,Ke)*jt/h.ONE_EM;v&&(Ot*=C.tilePixelRatio/Z);const{width:Ut,height:ti,anchor:ui,textOffset:qt,textBoxScale:Gi}=ut,Ci=Xu(ui,Ut,ti,qt,Gi,Ot),xn=v?kr(bt.add(Ci),B).point:ft.point.add(l?Ci.rotate(-k.angle):Ci),f=C.allowVerticalPlacement&&Ke.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let y=0;y<Ke.numGlyphs;y++)h.addDynamicAttributes(ye,xn,f);ne&&Ke.associatedIconIndex>=0&&(Je[Ke.associatedIconIndex]={shiftedAnchor:xn,angle:f})}else re(Ke.numGlyphs,ye)}if(ne){Ae.clear();const ke=C.icon.placedSymbolArray;for(let Ke=0;Ke<ke.length;Ke++){const ht=ke.get(Ke);if(ht.hidden)re(ht.numGlyphs,Ae);else{const ut=Je[Ke];if(ut)for(let bt=0;bt<ht.numGlyphs;bt++)h.addDynamicAttributes(Ae,ut.shiftedAnchor,ut.angle);else re(ht.numGlyphs,Ae)}}C.icon.dynamicLayoutVertexBuffer.updateData(Ae)}C.text.dynamicLayoutVertexBuffer.updateData(ye)}function cs(C,l,v){return v.iconsInText&&l?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function pu(C,l,v,A,k,B,j,Z,J,ne,se,ye){const Ae=C.context,Je=Ae.gl,ke=C.transform,Ke=Z==="map",ht=J==="map",ut=Z!=="viewport"&&v.layout.get("symbol-placement")!=="point",bt=Ke&&!ht&&!ut,ft=!v.layout.get("symbol-sort-key").isConstant();let jt=!1;const Ot=C.depthModeForSublayer(0,lr.ReadOnly),Ut=v.layout.get("text-variable-anchor"),ti=[];for(const ui of A){const qt=l.getTile(ui),Gi=qt.getBucket(v);if(!Gi)continue;const Ci=k?Gi.text:Gi.icon;if(!Ci||!Ci.segments.get().length)continue;const xn=Ci.programConfigurations.get(v.id),f=k||Gi.sdfIcons,y=k?Gi.textSizeData:Gi.iconSizeData,g=ht||ke.pitch!==0,w=C.useProgram(cs(f,k,Gi),xn),P=h.evaluateSizeForZoom(y,ke.zoom);let F,N,H,Q,ae=[0,0],_e=null;if(k){if(N=qt.glyphAtlasTexture,H=Je.LINEAR,F=qt.glyphAtlasTexture.size,Gi.iconsInText){ae=qt.imageAtlasTexture.size,_e=qt.imageAtlasTexture;const kt=y.kind==="composite"||y.kind==="camera";Q=g||C.options.rotating||C.options.zooming||kt?Je.LINEAR:Je.NEAREST}}else{const kt=v.layout.get("icon-size").constantOr(0)!==1||Gi.iconsNeedLinear;N=qt.imageAtlasTexture,H=f||C.options.rotating||C.options.zooming||kt||g?Je.LINEAR:Je.NEAREST,F=qt.imageAtlasTexture.size}const xe=ze(qt,1,C.transform.zoom),Ee=vo(ui.posMatrix,ht,Ke,C.transform,xe),Fe=la(ui.posMatrix,ht,Ke,C.transform,xe),Oe=Ut&&Gi.hasTextData(),Xe=v.layout.get("icon-text-fit")!=="none"&&Oe&&Gi.hasIconData();if(ut){const kt=v.layout.get("text-rotation-alignment")==="map";In(Gi,ui.posMatrix,C,k,Ee,Fe,ht,ne,kt)}const Ce=C.translatePosMatrix(ui.posMatrix,qt,B,j),je=ut||k&&Ut||Xe?dl:Ee,et=C.translatePosMatrix(Fe,qt,B,j,!0),pt=f&&v.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xt;xt=f?Gi.iconsInText?ou(y.kind,P,bt,ht,C,Ce,je,et,F,ae):ru(y.kind,P,bt,ht,C,Ce,je,et,k,F,!0):bs(y.kind,P,bt,ht,C,Ce,je,et,k,F);const Tt={program:w,buffers:Ci,uniformValues:xt,atlasTexture:N,atlasTextureIcon:_e,atlasInterpolation:H,atlasInterpolationIcon:Q,isSDF:f,hasHalo:pt};if(ft&&Gi.canOverlap){jt=!0;const kt=Ci.segments.get();for(const Ht of kt)ti.push({segments:new h.SegmentVector([Ht]),sortKey:Ht.sortKey,state:Tt})}else ti.push({segments:Ci.segments,sortKey:0,state:Tt})}jt&&ti.sort((ui,qt)=>ui.sortKey-qt.sortKey);for(const ui of ti){const qt=ui.state;if(Ae.activeTexture.set(Je.TEXTURE0),qt.atlasTexture.bind(qt.atlasInterpolation,Je.CLAMP_TO_EDGE),qt.atlasTextureIcon&&(Ae.activeTexture.set(Je.TEXTURE1),qt.atlasTextureIcon&&qt.atlasTextureIcon.bind(qt.atlasInterpolationIcon,Je.CLAMP_TO_EDGE)),qt.isSDF){const Gi=qt.uniformValues;qt.hasHalo&&(Gi.u_is_halo=1,Xs(qt.buffers,ui.segments,v,C,qt.program,Ot,se,ye,Gi)),Gi.u_is_halo=0}Xs(qt.buffers,ui.segments,v,C,qt.program,Ot,se,ye,qt.uniformValues)}}function Xs(C,l,v,A,k,B,j,Z,J){const ne=A.context;k.draw(ne,ne.gl.TRIANGLES,B,j,Z,lo.disabled,J,v.id,C.layoutVertexBuffer,C.indexBuffer,l,v.paint,A.transform.zoom,C.programConfigurations.get(v.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Rr(C,l,v,A,k,B,j){const Z=C.context.gl,J=v.paint.get("fill-pattern"),ne=J&&J.constantOr(1),se=v.getCrossfadeParameters();let ye,Ae,Je,ke,Ke;j?(Ae=ne&&!v.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=Z.LINES):(Ae=ne?"fillPattern":"fill",ye=Z.TRIANGLES);for(const ht of A){const ut=l.getTile(ht);if(ne&&!ut.patternsLoaded())continue;const bt=ut.getBucket(v);if(!bt)continue;const ft=bt.programConfigurations.get(v.id),jt=C.useProgram(Ae,ft);ne&&(C.context.activeTexture.set(Z.TEXTURE0),ut.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),ft.updatePaintBuffers(se));const Ot=J.constantOr(null);if(Ot&&ut.imageAtlas){const ti=ut.imageAtlas,ui=ti.patternPositions[Ot.to.toString()],qt=ti.patternPositions[Ot.from.toString()];ui&&qt&&ft.setConstantPatternPositions(ui,qt)}const Ut=C.translatePosMatrix(ht.posMatrix,ut,v.paint.get("fill-translate"),v.paint.get("fill-translate-anchor"));if(j){ke=bt.indexBuffer2,Ke=bt.segments2;const ti=[Z.drawingBufferWidth,Z.drawingBufferHeight];Je=Ae==="fillOutlinePattern"&&ne?za(Ut,C,se,ut,ti):_c(Ut,ti)}else ke=bt.indexBuffer,Ke=bt.segments,Je=ne?ca(Ut,C,se,ut):La(Ut);jt.draw(C.context,ye,k,C.stencilModeForClipping(ht),B,lo.disabled,Je,v.id,bt.layoutVertexBuffer,ke,Ke,v.paint,C.transform.zoom,ft)}}function Is(C,l,v,A,k,B,j){const Z=C.context,J=Z.gl,ne=v.paint.get("fill-extrusion-pattern"),se=ne.constantOr(1),ye=v.getCrossfadeParameters(),Ae=v.paint.get("fill-extrusion-opacity");for(const Je of A){const ke=l.getTile(Je),Ke=ke.getBucket(v);if(!Ke)continue;const ht=Ke.programConfigurations.get(v.id),ut=C.useProgram(se?"fillExtrusionPattern":"fillExtrusion",ht);se&&(C.context.activeTexture.set(J.TEXTURE0),ke.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),ht.updatePaintBuffers(ye));const bt=ne.constantOr(null);if(bt&&ke.imageAtlas){const Ut=ke.imageAtlas,ti=Ut.patternPositions[bt.to.toString()],ui=Ut.patternPositions[bt.from.toString()];ti&&ui&&ht.setConstantPatternPositions(ti,ui)}const ft=C.translatePosMatrix(Je.posMatrix,ke,v.paint.get("fill-extrusion-translate"),v.paint.get("fill-extrusion-translate-anchor")),jt=v.paint.get("fill-extrusion-vertical-gradient"),Ot=se?Br(ft,C,jt,Ae,Je,ye,ke):Pa(ft,C,jt,Ae);ut.draw(Z,Z.gl.TRIANGLES,k,B,j,lo.backCCW,Ot,v.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,v.paint,C.transform.zoom,ht)}}function Ku(C,l,v,A,k,B){const j=C.context,Z=j.gl,J=l.fbo;if(!J)return;const ne=C.useProgram("hillshade");j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,J.colorAttachment.get());const se=((ye,Ae,Je)=>{const ke=Je.paint.get("hillshade-shadow-color"),Ke=Je.paint.get("hillshade-highlight-color"),ht=Je.paint.get("hillshade-accent-color");let ut=Je.paint.get("hillshade-illumination-direction")*(Math.PI/180);Je.paint.get("hillshade-illumination-anchor")==="viewport"&&(ut-=ye.transform.angle);const bt=!ye.options.moving;return{u_matrix:ye.transform.calculatePosMatrix(Ae.tileID.toUnwrapped(),bt),u_image:0,u_latrange:rs(0,Ae.tileID),u_light:[Je.paint.get("hillshade-exaggeration"),ut],u_shadow:ke,u_highlight:Ke,u_accent:ht}})(C,l,v);ne.draw(j,Z.TRIANGLES,A,k,B,lo.disabled,se,v.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function ta(C,l,v,A,k,B){const j=C.context,Z=j.gl,J=l.dem;if(J&&J.data){const ne=J.dim,se=J.stride,ye=J.getPixels();if(j.activeTexture.set(Z.TEXTURE1),j.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||C.getTileTexture(se),l.demTexture){const Je=l.demTexture;Je.update(ye,{premultiply:!1}),Je.bind(Z.NEAREST,Z.CLAMP_TO_EDGE)}else l.demTexture=new be(j,ye,Z.RGBA,{premultiply:!1}),l.demTexture.bind(Z.NEAREST,Z.CLAMP_TO_EDGE);j.activeTexture.set(Z.TEXTURE0);let Ae=l.fbo;if(!Ae){const Je=new be(j,{width:ne,height:ne,data:null},Z.RGBA);Je.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ae=l.fbo=j.createFramebuffer(ne,ne,!0),Ae.colorAttachment.set(Je.texture)}j.bindFramebuffer.set(Ae.framebuffer),j.viewport.set([0,0,ne,ne]),C.useProgram("hillshadePrepare").draw(j,Z.TRIANGLES,A,k,B,lo.disabled,((Je,ke)=>{const Ke=ke.stride,ht=h.create();return h.ortho(ht,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(ht,ht,[0,-h.EXTENT,0]),{u_matrix:ht,u_image:1,u_dimension:[Ke,Ke],u_zoom:Je.overscaledZ,u_unpack:ke.getUnpackVector()}})(l.tileID,J),v.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Ic(C,l,v,A,k){const B=A.paint.get("raster-fade-duration");if(B>0){const j=h.exported.now(),Z=(j-C.timeAdded)/B,J=l?(j-l.timeAdded)/B:-1,ne=v.getSource(),se=k.coveringZoomLevel({tileSize:ne.tileSize,roundZoom:ne.roundZoom}),ye=!l||Math.abs(l.tileID.overscaledZ-se)>Math.abs(C.tileID.overscaledZ-se),Ae=ye&&C.refreshedUponExpiration?1:h.clamp(ye?Z:1-J,0,1);return C.refreshedUponExpiration&&Z>=1&&(C.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}const oh=new h.Color(1,0,0,1),Sc=new h.Color(0,1,0,1),Ss=new h.Color(0,0,1,1),Ts=new h.Color(1,0,1,1),pl=new h.Color(0,1,1,1);function fu(C,l,v,A){As(C,0,l+v/2,C.transform.width,v,A)}function Ks(C,l,v,A){As(C,l-v/2,0,v,C.transform.height,A)}function As(C,l,v,A,k,B){const j=C.context,Z=j.gl;Z.enable(Z.SCISSOR_TEST),Z.scissor(l*C.pixelRatio,v*C.pixelRatio,A*C.pixelRatio,k*C.pixelRatio),j.clear({color:B}),Z.disable(Z.SCISSOR_TEST)}function Tc(C,l,v){const A=C.context,k=A.gl,B=v.posMatrix,j=C.useProgram("debug"),Z=lr.disabled,J=Dr.disabled,ne=C.colorModeForRenderPass(),se="$debug";A.activeTexture.set(k.TEXTURE0),C.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),j.draw(A,k.LINE_STRIP,Z,J,ne,lo.disabled,ao(B,h.Color.red),se,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments);const ye=l.getTileByID(v.key).latestRawTileData,Ae=Math.floor((ye&&ye.byteLength||0)/1024),Je=l.getTile(v).tileSize,ke=512/Math.min(Je,512)*(v.overscaledZ/C.transform.zoom)*.5;let Ke=v.canonical.toString();v.overscaledZ!==v.canonical.z&&(Ke+=` => ${v.overscaledZ}`),function(ht,ut){ht.initDebugOverlayCanvas();const bt=ht.debugOverlayCanvas,ft=ht.context.gl,jt=ht.debugOverlayCanvas.getContext("2d");jt.clearRect(0,0,bt.width,bt.height),jt.shadowColor="white",jt.shadowBlur=2,jt.lineWidth=1.5,jt.strokeStyle="white",jt.textBaseline="top",jt.font="bold 36px Open Sans, sans-serif",jt.fillText(ut,5,5),jt.strokeText(ut,5,5),ht.debugOverlayTexture.update(bt),ht.debugOverlayTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE)}(C,`${Ke} ${Ae}kb`),j.draw(A,k.TRIANGLES,Z,J,Dn.alphaBlended,lo.disabled,ao(B,h.Color.transparent,ke),se,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments)}const hs={symbol:function(C,l,v,A,k){if(C.renderPass!=="translucent")return;const B=Dr.disabled,j=C.colorModeForRenderPass();v.layout.get("text-variable-anchor")&&function(Z,J,ne,se,ye,Ae,Je){const ke=J.transform,Ke=ye==="map",ht=Ae==="map";for(const ut of Z){const bt=se.getTile(ut),ft=bt.getBucket(ne);if(!ft||!ft.text||!ft.text.segments.get().length)continue;const jt=h.evaluateSizeForZoom(ft.textSizeData,ke.zoom),Ot=ze(bt,1,J.transform.zoom),Ut=vo(ut.posMatrix,ht,Ke,J.transform,Ot),ti=ne.layout.get("icon-text-fit")!=="none"&&ft.hasIconData();if(jt){const ui=Math.pow(2,ke.zoom-bt.tileID.overscaledZ);us(ft,Ke,ht,Je,ke,Ut,ut.posMatrix,ui,jt,ti)}}}(A,C,v,l,v.layout.get("text-rotation-alignment"),v.layout.get("text-pitch-alignment"),k),v.paint.get("icon-opacity").constantOr(1)!==0&&pu(C,l,v,A,!1,v.paint.get("icon-translate"),v.paint.get("icon-translate-anchor"),v.layout.get("icon-rotation-alignment"),v.layout.get("icon-pitch-alignment"),v.layout.get("icon-keep-upright"),B,j),v.paint.get("text-opacity").constantOr(1)!==0&&pu(C,l,v,A,!0,v.paint.get("text-translate"),v.paint.get("text-translate-anchor"),v.layout.get("text-rotation-alignment"),v.layout.get("text-pitch-alignment"),v.layout.get("text-keep-upright"),B,j),l.map.showCollisionBoxes&&(du(C,l,v,A,v.paint.get("text-translate"),v.paint.get("text-translate-anchor"),!0),du(C,l,v,A,v.paint.get("icon-translate"),v.paint.get("icon-translate-anchor"),!1))},circle:function(C,l,v,A){if(C.renderPass!=="translucent")return;const k=v.paint.get("circle-opacity"),B=v.paint.get("circle-stroke-width"),j=v.paint.get("circle-stroke-opacity"),Z=!v.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(B.constantOr(1)===0||j.constantOr(1)===0))return;const J=C.context,ne=J.gl,se=C.depthModeForSublayer(0,lr.ReadOnly),ye=Dr.disabled,Ae=C.colorModeForRenderPass(),Je=[];for(let ke=0;ke<A.length;ke++){const Ke=A[ke],ht=l.getTile(Ke),ut=ht.getBucket(v);if(!ut)continue;const bt=ut.programConfigurations.get(v.id),ft={programConfiguration:bt,program:C.useProgram("circle",bt),layoutVertexBuffer:ut.layoutVertexBuffer,indexBuffer:ut.indexBuffer,uniformValues:ll(C,Ke,ht,v)};if(Z){const jt=ut.segments.get();for(const Ot of jt)Je.push({segments:new h.SegmentVector([Ot]),sortKey:Ot.sortKey,state:ft})}else Je.push({segments:ut.segments,sortKey:0,state:ft})}Z&&Je.sort((ke,Ke)=>ke.sortKey-Ke.sortKey);for(const ke of Je){const{programConfiguration:Ke,program:ht,layoutVertexBuffer:ut,indexBuffer:bt,uniformValues:ft}=ke.state;ht.draw(J,ne.TRIANGLES,se,ye,Ae,lo.disabled,ft,v.id,ut,bt,ke.segments,v.paint,C.transform.zoom,Ke)}},heatmap:function(C,l,v,A){if(v.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const k=C.context,B=k.gl,j=Dr.disabled,Z=new Dn([B.ONE,B.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(J,ne,se){const ye=J.gl;J.activeTexture.set(ye.TEXTURE1),J.viewport.set([0,0,ne.width/4,ne.height/4]);let Ae=se.heatmapFbo;if(Ae)ye.bindTexture(ye.TEXTURE_2D,Ae.colorAttachment.get()),J.bindFramebuffer.set(Ae.framebuffer);else{const Je=ye.createTexture();ye.bindTexture(ye.TEXTURE_2D,Je),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_S,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_T,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MIN_FILTER,ye.LINEAR),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MAG_FILTER,ye.LINEAR),Ae=se.heatmapFbo=J.createFramebuffer(ne.width/4,ne.height/4,!1),function(ke,Ke,ht,ut){const bt=ke.gl;bt.texImage2D(bt.TEXTURE_2D,0,bt.RGBA,Ke.width/4,Ke.height/4,0,bt.RGBA,ke.extRenderToTextureHalfFloat?ke.extTextureHalfFloat.HALF_FLOAT_OES:bt.UNSIGNED_BYTE,null),ut.colorAttachment.set(ht)}(J,ne,Je,Ae)}})(k,C,v),k.clear({color:h.Color.transparent});for(let J=0;J<A.length;J++){const ne=A[J];if(l.hasRenderableParent(ne))continue;const se=l.getTile(ne),ye=se.getBucket(v);if(!ye)continue;const Ae=ye.programConfigurations.get(v.id),Je=C.useProgram("heatmap",Ae),{zoom:ke}=C.transform;Je.draw(k,B.TRIANGLES,lr.disabled,j,Z,lo.disabled,Lo(ne.posMatrix,se,ke,v.paint.get("heatmap-intensity")),v.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,v.paint,C.transform.zoom,Ae)}k.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(k,B){const j=k.context,Z=j.gl,J=B.heatmapFbo;if(!J)return;j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,J.colorAttachment.get()),j.activeTexture.set(Z.TEXTURE1);let ne=B.colorRampTexture;ne||(ne=B.colorRampTexture=new be(j,B.colorRamp,Z.RGBA)),ne.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(j,Z.TRIANGLES,lr.disabled,Dr.disabled,k.colorModeForRenderPass(),lo.disabled,((se,ye,Ae,Je)=>{const ke=h.create();h.ortho(ke,0,se.width,se.height,0,0,1);const Ke=se.context.gl;return{u_matrix:ke,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ye.paint.get("heatmap-opacity")}})(k,B),B.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,B.paint,k.transform.zoom)}(C,v))},line:function(C,l,v,A){if(C.renderPass!=="translucent")return;const k=v.paint.get("line-opacity"),B=v.paint.get("line-width");if(k.constantOr(1)===0||B.constantOr(1)===0)return;const j=C.depthModeForSublayer(0,lr.ReadOnly),Z=C.colorModeForRenderPass(),J=v.paint.get("line-dasharray"),ne=v.paint.get("line-pattern"),se=ne.constantOr(1),ye=v.paint.get("line-gradient"),Ae=v.getCrossfadeParameters(),Je=se?"linePattern":J?"lineSDF":ye?"lineGradient":"line",ke=C.context,Ke=ke.gl;let ht=!0;for(const ut of A){const bt=l.getTile(ut);if(se&&!bt.patternsLoaded())continue;const ft=bt.getBucket(v);if(!ft)continue;const jt=ft.programConfigurations.get(v.id),Ot=C.context.program.get(),Ut=C.useProgram(Je,jt),ti=ht||Ut.program!==Ot,ui=ne.constantOr(null);if(ui&&bt.imageAtlas){const Gi=bt.imageAtlas,Ci=Gi.patternPositions[ui.to.toString()],xn=Gi.patternPositions[ui.from.toString()];Ci&&xn&&jt.setConstantPatternPositions(Ci,xn)}const qt=se?ul(C,bt,v,Ae):J?Ao(C,bt,v,J,Ae):ye?Vu(C,bt,v,ft.lineClipsArray.length):nu(C,bt,v);if(se)ke.activeTexture.set(Ke.TEXTURE0),bt.imageAtlasTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),jt.updatePaintBuffers(Ae);else if(J&&(ti||C.lineAtlas.dirty))ke.activeTexture.set(Ke.TEXTURE0),C.lineAtlas.bind(ke);else if(ye){const Gi=ft.gradients[v.id];let Ci=Gi.texture;if(v.gradientVersion!==Gi.version){let xn=256;if(v.stepInterpolant){const f=l.getSource().maxzoom,y=ut.canonical.z===f?Math.ceil(1<<C.transform.maxZoom-ut.canonical.z):1;xn=h.clamp(h.nextPowerOfTwo(ft.maxLineLength/h.EXTENT*1024*y),256,ke.maxTextureSize)}Gi.gradient=h.renderColorRamp({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:xn,image:Gi.gradient||void 0,clips:ft.lineClipsArray}),Gi.texture?Gi.texture.update(Gi.gradient):Gi.texture=new be(ke,Gi.gradient,Ke.RGBA),Gi.version=v.gradientVersion,Ci=Gi.texture}ke.activeTexture.set(Ke.TEXTURE0),Ci.bind(v.stepInterpolant?Ke.NEAREST:Ke.LINEAR,Ke.CLAMP_TO_EDGE)}Ut.draw(ke,Ke.TRIANGLES,j,C.stencilModeForClipping(ut),Z,lo.disabled,qt,v.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,v.paint,C.transform.zoom,jt,ft.layoutVertexBuffer2),ht=!1}},fill:function(C,l,v,A){const k=v.paint.get("fill-color"),B=v.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const j=C.colorModeForRenderPass(),Z=v.paint.get("fill-pattern"),J=C.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&k.constantOr(h.Color.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===J){const ne=C.depthModeForSublayer(1,C.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Rr(C,l,v,A,ne,j,!1)}if(C.renderPass==="translucent"&&v.paint.get("fill-antialias")){const ne=C.depthModeForSublayer(v.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Rr(C,l,v,A,ne,j,!0)}},"fill-extrusion":function(C,l,v,A){const k=v.paint.get("fill-extrusion-opacity");if(k!==0&&C.renderPass==="translucent"){const B=new lr(C.context.gl.LEQUAL,lr.ReadWrite,C.depthRangeFor3D);if(k!==1||v.paint.get("fill-extrusion-pattern").constantOr(1))Is(C,l,v,A,B,Dr.disabled,Dn.disabled),Is(C,l,v,A,B,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const j=C.colorModeForRenderPass();Is(C,l,v,A,B,Dr.disabled,j)}}},hillshade:function(C,l,v,A){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const k=C.context,B=C.depthModeForSublayer(0,lr.ReadOnly),j=C.colorModeForRenderPass(),[Z,J]=C.renderPass==="translucent"?C.stencilConfigForOverlap(A):[{},A];for(const ne of J){const se=l.getTile(ne);se.needsHillshadePrepare&&C.renderPass==="offscreen"?ta(C,se,v,B,Dr.disabled,j):C.renderPass==="translucent"&&Ku(C,se,v,B,Z[ne.overscaledZ],j)}k.viewport.set([0,0,C.width,C.height])},raster:function(C,l,v,A){if(C.renderPass!=="translucent"||v.paint.get("raster-opacity")===0||!A.length)return;const k=C.context,B=k.gl,j=l.getSource(),Z=C.useProgram("raster"),J=C.colorModeForRenderPass(),[ne,se]=j instanceof Ki?[{},A]:C.stencilConfigForOverlap(A),ye=se[se.length-1].overscaledZ,Ae=!C.options.moving;for(const Je of se){const ke=C.depthModeForSublayer(Je.overscaledZ-ye,v.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,B.LESS),Ke=l.getTile(Je),ht=C.transform.calculatePosMatrix(Je.toUnwrapped(),Ae);Ke.registerFadeDuration(v.paint.get("raster-fade-duration"));const ut=l.findLoadedParent(Je,0),bt=Ic(Ke,ut,l,v,C.transform);let ft,jt;const Ot=v.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;k.activeTexture.set(B.TEXTURE0),Ke.texture.bind(Ot,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(B.TEXTURE1),ut?(ut.texture.bind(Ot,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),ft=Math.pow(2,ut.tileID.overscaledZ-Ke.tileID.overscaledZ),jt=[Ke.tileID.canonical.x*ft%1,Ke.tileID.canonical.y*ft%1]):Ke.texture.bind(Ot,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const Ut=bc(ht,jt||[0,0],ft||1,bt,v);j instanceof Ki?Z.draw(k,B.TRIANGLES,ke,Dr.disabled,J,lo.disabled,Ut,v.id,j.boundsBuffer,C.quadTriangleIndexBuffer,j.boundsSegments):Z.draw(k,B.TRIANGLES,ke,ne[Je.overscaledZ],J,lo.disabled,Ut,v.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}},background:function(C,l,v){const A=v.paint.get("background-color"),k=v.paint.get("background-opacity");if(k===0)return;const B=C.context,j=B.gl,Z=C.transform,J=Z.tileSize,ne=v.paint.get("background-pattern");if(C.isPatternMissing(ne))return;const se=!ne&&A.a===1&&k===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==se)return;const ye=Dr.disabled,Ae=C.depthModeForSublayer(0,se==="opaque"?lr.ReadWrite:lr.ReadOnly),Je=C.colorModeForRenderPass(),ke=C.useProgram(ne?"backgroundPattern":"background"),Ke=Z.coveringTiles({tileSize:J});ne&&(B.activeTexture.set(j.TEXTURE0),C.imageManager.bind(C.context));const ht=v.getCrossfadeParameters();for(const ut of Ke){const bt=C.transform.calculatePosMatrix(ut.toUnwrapped()),ft=ne?Ll(bt,k,C,ne,{tileID:ut,tileSize:J},ht):ih(bt,k,A);ke.draw(B,j.TRIANGLES,Ae,ye,Je,lo.disabled,ft,v.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}},debug:function(C,l,v){for(let A=0;A<v.length;A++)Tc(C,l,v[A])},custom:function(C,l,v){const A=C.context,k=v.implementation;if(C.renderPass==="offscreen"){const B=k.prerender;B&&(C.setCustomLayerDefaults(),A.setColorMode(C.colorModeForRenderPass()),B.call(k,A.gl,C.transform.customLayerMatrix()),A.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),A.setColorMode(C.colorModeForRenderPass()),A.setStencilMode(Dr.disabled);const B=k.renderingMode==="3d"?new lr(C.context.gl.LEQUAL,lr.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,lr.ReadOnly);A.setDepthMode(B),k.render(A.gl,C.transform.customLayerMatrix()),A.setDirty(),C.setBaseState(),A.bindFramebuffer.set(null)}}};class Da{constructor(l,v){this.context=new cu(l),this.transform=v,this._tileTextures={},this.setup(),this.numSublayers=gt.maxUnderzooming+gt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vi,this.gpuTimers={}}resize(l,v,A){if(this.width=l*A,this.height=v*A,this.pixelRatio=A,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const l=this.context,v=new h.PosArray;v.emplaceBack(0,0),v.emplaceBack(h.EXTENT,0),v.emplaceBack(0,h.EXTENT),v.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(v,Ko.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const A=new h.PosArray;A.emplaceBack(0,0),A.emplaceBack(h.EXTENT,0),A.emplaceBack(0,h.EXTENT),A.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=l.createVertexBuffer(A,Ko.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const k=new h.RasterBoundsArray;k.emplaceBack(0,0,0,0),k.emplaceBack(h.EXTENT,0,h.EXTENT,0),k.emplaceBack(0,h.EXTENT,0,h.EXTENT),k.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(k,Xt.members),this.rasterBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const B=new h.PosArray;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(B,Ko.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const j=new h.LineStripIndexArray;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(j);const Z=new h.TriangleIndexArray;Z.emplaceBack(0,1,2),Z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(Z),this.emptyTexture=new be(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);const J=this.context.gl;this.stencilClearMode=new Dr({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO)}clearStencil(){const l=this.context,v=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const A=h.create();h.ortho(A,0,this.width,this.height,0,0,1),h.scale(A,A,[v.drawingBufferWidth,v.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,v.TRIANGLES,lr.disabled,this.stencilClearMode,Dn.disabled,lo.disabled,ma(A),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,v){if(this.currentStencilSource===l.source||!l.isTileClipped()||!v||!v.length)return;this.currentStencilSource=l.source;const A=this.context,k=A.gl;this.nextStencilID+v.length>256&&this.clearStencil(),A.setColorMode(Dn.disabled),A.setDepthMode(lr.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of v){const Z=this._tileClippingMaskIDs[j.key]=this.nextStencilID++;B.draw(A,k.TRIANGLES,lr.disabled,new Dr({func:k.ALWAYS,mask:0},Z,255,k.KEEP,k.KEEP,k.REPLACE),Dn.disabled,lo.disabled,ma(j.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,v=this.context.gl;return new Dr({func:v.NOTEQUAL,mask:255},l,255,v.KEEP,v.KEEP,v.REPLACE)}stencilModeForClipping(l){const v=this.context.gl;return new Dr({func:v.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,v.KEEP,v.KEEP,v.REPLACE)}stencilConfigForOverlap(l){const v=this.context.gl,A=l.sort((j,Z)=>Z.overscaledZ-j.overscaledZ),k=A[A.length-1].overscaledZ,B=A[0].overscaledZ-k+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const j={};for(let Z=0;Z<B;Z++)j[Z+k]=new Dr({func:v.GEQUAL,mask:255},Z+this.nextStencilID,255,v.KEEP,v.KEEP,v.REPLACE);return this.nextStencilID+=B,[j,A]}return[{[k]:Dr.disabled},A]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Dn([l.CONSTANT_COLOR,l.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Dn.unblended:Dn.alphaBlended}depthModeForSublayer(l,v,A){if(!this.opaquePassEnabledForLayer())return lr.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new lr(A||this.context.gl.LEQUAL,v,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,v){this.style=l,this.options=v,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const A=this.style._order,k=this.style.sourceCaches;for(const J in k){const ne=k[J];ne.used&&ne.prepare(this.context)}const B={},j={},Z={};for(const J in k){const ne=k[J];B[J]=ne.getVisibleCoordinates(),j[J]=B[J].slice().reverse(),Z[J]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<A.length;J++)if(this.style._layers[A[J]].is3D()){this.opaquePassCutoff=J;break}this.renderPass="offscreen";for(const J of A){const ne=this.style._layers[J];if(!ne.hasOffscreenPass()||ne.isHidden(this.transform.zoom))continue;const se=j[ne.source];(ne.type==="custom"||se.length)&&this.renderLayer(this,k[ne.source],ne,se)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:v.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=v.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[A[this.currentLayer]],ne=k[J.source],se=B[J.source];this._renderTileClippingMasks(J,se),this.renderLayer(this,ne,J,se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const J=this.style._layers[A[this.currentLayer]],ne=k[J.source],se=(J.type==="symbol"?Z:j)[J.source];this._renderTileClippingMasks(J,B[J.source]),this.renderLayer(this,ne,J,se)}if(this.options.showTileBoundaries){let J,ne;Object.values(this.style._layers).forEach(se=>{se.source&&!se.isHidden(this.transform.zoom)&&(se.source!==(ne&&ne.id)&&(ne=this.style.sourceCaches[se.source]),(!J||J.getSource().maxzoom<ne.getSource().maxzoom)&&(J=ne))}),J&&hs.debug(this,J,J.getVisibleCoordinates())}this.options.showPadding&&function(J){const ne=J.transform.padding;fu(J,J.transform.height-(ne.top||0),3,oh),fu(J,ne.bottom||0,3,Sc),Ks(J,ne.left||0,3,Ss),Ks(J,J.transform.width-(ne.right||0),3,Ts);const se=J.transform.centerPoint;(function(ye,Ae,Je,ke){As(ye,Ae-1,Je-10,2,20,ke),As(ye,Ae-10,Je-1,20,2,ke)})(J,se.x,J.transform.height-se.y,pl)}(this),this.context.setDefault()}renderLayer(l,v,A,k){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="custom"||k.length)&&(this.id=A.id,this.gpuTimingStart(A),hs[A.type](l,v,A,k,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const v=this.context.extTimerQuery;let A=this.gpuTimers[l.id];A||(A=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:v.createQueryEXT()}),A.calls++,v.beginQueryEXT(v.TIME_ELAPSED_EXT,A.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}queryGpuTimers(l){const v={};for(const A in l){const k=l[A],B=this.context.extTimerQuery,j=B.getQueryObjectEXT(k.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(k.query),v[A]=j}return v}translatePosMatrix(l,v,A,k,B){if(!A[0]&&!A[1])return l;const j=B?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(j){const ne=Math.sin(j),se=Math.cos(j);A=[A[0]*se-A[1]*ne,A[0]*ne+A[1]*se]}const Z=[B?A[0]:ze(v,A[0],this.transform.zoom),B?A[1]:ze(v,A[1],this.transform.zoom),0],J=new Float32Array(16);return h.translate(J,l,Z),J}saveTileTexture(l){const v=this._tileTextures[l.size[0]];v?v.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const v=this._tileTextures[l];return v&&v.length>0?v.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const v=this.imageManager.getPattern(l.from.toString()),A=this.imageManager.getPattern(l.to.toString());return!v||!A}useProgram(l,v){this.cache=this.cache||{};const A=`${l}${v?v.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[A]||(this.cache[A]=new ea(this.context,l,iu[l],v,ga[l],this._showOverdrawInspector)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new be(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class mu{constructor(l,v){this.points=l,this.planes=v}static fromInvProjectionMatrix(l,v,A){const k=Math.pow(2,A),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Z=>h.transformMat4([],Z,l)).map(Z=>h.scale$1([],Z,1/Z[3]/v*k)),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Z=>{const J=function(Ae,Je){var ke=Je[0],Ke=Je[1],ht=Je[2],ut=ke*ke+Ke*Ke+ht*ht;return ut>0&&(ut=1/Math.sqrt(ut)),Ae[0]=Je[0]*ut,Ae[1]=Je[1]*ut,Ae[2]=Je[2]*ut,Ae}([],function(Ae,Je,ke){var Ke=Je[0],ht=Je[1],ut=Je[2],bt=ke[0],ft=ke[1],jt=ke[2];return Ae[0]=ht*jt-ut*ft,Ae[1]=ut*bt-Ke*jt,Ae[2]=Ke*ft-ht*bt,Ae}([],de([],B[Z[0]],B[Z[1]]),de([],B[Z[2]],B[Z[1]]))),ne=-((se=J)[0]*(ye=B[Z[1]])[0]+se[1]*ye[1]+se[2]*ye[2]);var se,ye;return J.concat(ne)});return new mu(B,j)}}class gu{constructor(l,v){this.min=l,this.max=v,this.center=function(A,k,B){return A[0]=.5*k[0],A[1]=.5*k[1],A[2]=.5*k[2],A}([],function(A,k,B){return A[0]=k[0]+B[0],A[1]=k[1]+B[1],A[2]=k[2]+B[2],A}([],this.min,this.max))}quadrant(l){const v=[l%2==0,l<2],A=ue(this.min),k=ue(this.max);for(let B=0;B<v.length;B++)A[B]=v[B]?this.min[B]:this.center[B],k[B]=v[B]?this.center[B]:this.max[B];return k[2]=this.max[2],new gu(A,k)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const v=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let A=!0;for(let k=0;k<l.planes.length;k++){const B=l.planes[k];let j=0;for(let Z=0;Z<v.length;Z++)h.dot(B,v[Z])>=0&&j++;if(j===0)return 0;j!==v.length&&(A=!1)}if(A)return 2;for(let k=0;k<3;k++){let B=Number.MAX_VALUE,j=-Number.MAX_VALUE;for(let Z=0;Z<l.points.length;Z++){const J=l.points[Z][k]-this.min[k];B=Math.min(B,J),j=Math.max(j,J)}if(j<0||B>this.max[k]-this.min[k])return 0}return 1}}class fl{constructor(l=0,v=0,A=0,k=0){if(isNaN(l)||l<0||isNaN(v)||v<0||isNaN(A)||A<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=v,this.left=A,this.right=k}interpolate(l,v,A){return v.top!=null&&l.top!=null&&(this.top=h.number(l.top,v.top,A)),v.bottom!=null&&l.bottom!=null&&(this.bottom=h.number(l.bottom,v.bottom,A)),v.left!=null&&l.left!=null&&(this.left=h.number(l.left,v.left,A)),v.right!=null&&l.right!=null&&(this.right=h.number(l.right,v.right,A)),this}getCenter(l,v){const A=h.clamp((this.left+l-this.right)/2,0,l),k=h.clamp((this.top+v-this.bottom)/2,0,v);return new h.pointGeometry(A,k)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new fl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ka{constructor(l,v,A,k,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=l||0,this._maxZoom=v||22,this._minPitch=A==null?0:A,this._maxPitch=k==null?60:k,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fl,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const l=new Ka(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const v=-h.wrap(l,-180,180)*Math.PI/180;this.angle!==v&&(this._unmodified=!1,this.angle=v,this._calcMatrices(),this.rotationMatrix=function(){var A=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A}(),function(A,k,B){var j=k[0],Z=k[1],J=k[2],ne=k[3],se=Math.sin(B),ye=Math.cos(B);A[0]=j*ye+J*se,A[1]=Z*ye+ne*se,A[2]=j*-se+J*ye,A[3]=Z*-se+ne*ye}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const v=h.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==v&&(this._unmodified=!1,this._pitch=v,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const v=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==v&&(this._unmodified=!1,this._zoom=v,this.scale=this.zoomScale(v),this.tileZoom=Math.floor(v),this.zoomFraction=v-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,v,A){this._unmodified=!1,this._edgeInsets.interpolate(l,v,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const v=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,v)}getVisibleUnwrappedCoordinates(l){const v=[new h.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const A=this.pointCoordinate(new h.pointGeometry(0,0)),k=this.pointCoordinate(new h.pointGeometry(this.width,0)),B=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),j=this.pointCoordinate(new h.pointGeometry(0,this.height)),Z=Math.floor(Math.min(A.x,k.x,B.x,j.x)),J=Math.floor(Math.max(A.x,k.x,B.x,j.x)),ne=1;for(let se=Z-ne;se<=J+ne;se++)se!==0&&v.push(new h.UnwrappedTileID(se,l))}return v}coveringTiles(l){let v=this.coveringZoomLevel(l);const A=v;if(l.minzoom!==void 0&&v<l.minzoom)return[];l.maxzoom!==void 0&&v>l.maxzoom&&(v=l.maxzoom);const k=h.MercatorCoordinate.fromLngLat(this.center),B=Math.pow(2,v),j=[B*k.x,B*k.y,0],Z=mu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let J=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(J=v);const ne=ke=>({aabb:new gu([ke*B,0,0],[(ke+1)*B,B,0]),zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),se=[],ye=[],Ae=v,Je=l.reparseOverscaled?A:v;if(this._renderWorldCopies)for(let ke=1;ke<=3;ke++)se.push(ne(-ke)),se.push(ne(ke));for(se.push(ne(0));se.length>0;){const ke=se.pop(),Ke=ke.x,ht=ke.y;let ut=ke.fullyVisible;if(!ut){const Ut=ke.aabb.intersects(Z);if(Ut===0)continue;ut=Ut===2}const bt=ke.aabb.distanceX(j),ft=ke.aabb.distanceY(j),jt=Math.max(Math.abs(bt),Math.abs(ft)),Ot=3+(1<<Ae-ke.zoom)-2;if(ke.zoom===Ae||jt>Ot&&ke.zoom>=J)ye.push({tileID:new h.OverscaledTileID(ke.zoom===Ae?Je:ke.zoom,ke.wrap,ke.zoom,Ke,ht),distanceSq:oe([j[0]-.5-Ke,j[1]-.5-ht])});else for(let Ut=0;Ut<4;Ut++){const ti=(Ke<<1)+Ut%2,ui=(ht<<1)+(Ut>>1);se.push({aabb:ke.aabb.quadrant(Ut),zoom:ke.zoom+1,x:ti,y:ui,wrap:ke.wrap,fullyVisible:ut})}}return ye.sort((ke,Ke)=>ke.distanceSq-Ke.distanceSq).map(ke=>ke.tileID)}resize(l,v){this.width=l,this.height=v,this.pixelsToGLUnits=[2/l,-2/v],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const v=h.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.pointGeometry(h.mercatorXfromLng(l.lng)*this.worldSize,h.mercatorYfromLat(v)*this.worldSize)}unproject(l){return new h.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(l,v){const A=this.pointCoordinate(v),k=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(l),j=new h.MercatorCoordinate(B.x-(A.x-k.x),B.y-(A.y-k.y));this.center=this.coordinateLocation(j),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l){return this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}locationCoordinate(l){return h.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l.toLngLat()}pointCoordinate(l){const v=[l.x,l.y,0,1],A=[l.x,l.y,1,1];h.transformMat4(v,v,this.pixelMatrixInverse),h.transformMat4(A,A,this.pixelMatrixInverse);const k=v[3],B=A[3],j=v[1]/k,Z=A[1]/B,J=v[2]/k,ne=A[2]/B,se=J===ne?0:(0-J)/(ne-J);return new h.MercatorCoordinate(h.number(v[0]/k,A[0]/B,se)/this.worldSize,h.number(j,Z,se)/this.worldSize)}coordinatePoint(l){const v=[l.x*this.worldSize,l.y*this.worldSize,0,1];return h.transformMat4(v,v,this.pixelMatrix),new h.pointGeometry(v[0]/v[3],v[1]/v[3])}getBounds(){return new h.LngLatBounds().extend(this.pointLocation(new h.pointGeometry(0,0))).extend(this.pointLocation(new h.pointGeometry(this.width,0))).extend(this.pointLocation(new h.pointGeometry(this.width,this.height))).extend(this.pointLocation(new h.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new h.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,v=!1){const A=l.key,k=v?this._alignedPosMatrixCache:this._posMatrixCache;if(k[A])return k[A];const B=l.canonical,j=this.worldSize/this.zoomScale(B.z),Z=B.x+Math.pow(2,B.z)*l.wrap,J=h.identity(new Float64Array(16));return h.translate(J,J,[Z*j,B.y*j,0]),h.scale(J,J,[j/h.EXTENT,j/h.EXTENT,1]),h.multiply(J,v?this.alignedProjMatrix:this.projMatrix,J),k[A]=new Float32Array(J),k[A]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,v,A,k,B=-90,j=90,Z=-180,J=180;const ne=this.size,se=this._unmodified;if(this.latRange){const Je=this.latRange;B=h.mercatorYfromLat(Je[1])*this.worldSize,j=h.mercatorYfromLat(Je[0])*this.worldSize,l=j-B<ne.y?ne.y/(j-B):0}if(this.lngRange){const Je=this.lngRange;Z=h.mercatorXfromLng(Je[0])*this.worldSize,J=h.mercatorXfromLng(Je[1])*this.worldSize,v=J-Z<ne.x?ne.x/(J-Z):0}const ye=this.point,Ae=Math.max(v||0,l||0);if(Ae)return this.center=this.unproject(new h.pointGeometry(v?(J+Z)/2:ye.x,l?(j+B)/2:ye.y)),this.zoom+=this.scaleZoom(Ae),this._unmodified=se,void(this._constraining=!1);if(this.latRange){const Je=ye.y,ke=ne.y/2;Je-ke<B&&(k=B+ke),Je+ke>j&&(k=j-ke)}if(this.lngRange){const Je=ye.x,ke=ne.x/2;Je-ke<Z&&(A=Z+ke),Je+ke>J&&(A=J-ke)}A===void 0&&k===void 0||(this.center=this.unproject(new h.pointGeometry(A!==void 0?A:ye.x,k!==void 0?k:ye.y))),this._unmodified=se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const v=Math.PI/2+this._pitch,A=this._fov*(.5+l.y/this.height),k=Math.sin(A)*this.cameraToCenterDistance/Math.sin(h.clamp(Math.PI-v-A,.01,Math.PI-.01)),B=this.point,j=B.x,Z=B.y,J=1.01*(Math.cos(Math.PI/2-this._pitch)*k+this.cameraToCenterDistance),ne=this.height/50;let se=new Float64Array(16);h.perspective(se,this._fov,this.width/this.height,ne,J),se[8]=2*-l.x/this.width,se[9]=2*l.y/this.height,h.scale(se,se,[1,-1,1]),h.translate(se,se,[0,0,-this.cameraToCenterDistance]),h.rotateX(se,se,this._pitch),h.rotateZ(se,se,this.angle),h.translate(se,se,[-j,-Z,0]),this.mercatorMatrix=h.scale([],se,[this.worldSize,this.worldSize,this.worldSize]),h.scale(se,se,[1,1,h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=se,this.invProjMatrix=h.invert([],this.projMatrix);const ye=this.width%2/2,Ae=this.height%2/2,Je=Math.cos(this.angle),ke=Math.sin(this.angle),Ke=j-Math.round(j)+Je*ye+ke*Ae,ht=Z-Math.round(Z)+Je*Ae+ke*ye,ut=new Float64Array(se);if(h.translate(ut,ut,[Ke>.5?Ke-1:Ke,ht>.5?ht-1:ht,0]),this.alignedProjMatrix=ut,se=h.create(),h.scale(se,se,[this.width/2,-this.height/2,1]),h.translate(se,se,[1,-1,0]),this.labelPlaneMatrix=se,se=h.create(),h.scale(se,se,[1,-1,1]),h.translate(se,se,[-1,-1,0]),h.scale(se,se,[2/this.width,2/this.height,1]),this.glCoordMatrix=se,this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),se=h.invert(new Float64Array(16),this.pixelMatrix),!se)throw new Error("failed to invert matrix");this.pixelMatrixInverse=se,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new h.pointGeometry(0,0)),v=[l.x*this.worldSize,l.y*this.worldSize,0,1];return h.transformMat4(v,v,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,l))}getCameraQueryGeometry(l){const v=this.getCameraPoint();if(l.length===1)return[l[0],v];{let A=v.x,k=v.y,B=v.x,j=v.y;for(const Z of l)A=Math.min(A,Z.x),k=Math.min(k,Z.y),B=Math.max(B,Z.x),j=Math.max(j,Z.y);return[new h.pointGeometry(A,k),new h.pointGeometry(B,k),new h.pointGeometry(B,j),new h.pointGeometry(A,j),new h.pointGeometry(A,k)]}}}class Rl{constructor(l){this._hashName=l&&encodeURIComponent(l),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(v,A){let k=!1,B=null;const j=()=>{B=null,k&&(v(),B=setTimeout(j,300),k=!1)};return()=>(k=!0,B||j(),B)}(this._updateHashUnthrottled.bind(this))}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const v=this._map.getCenter(),A=Math.round(100*this._map.getZoom())/100,k=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,k),j=Math.round(v.lng*B)/B,Z=Math.round(v.lat*B)/B,J=this._map.getBearing(),ne=this._map.getPitch();let se="";if(se+=l?`/${j}/${Z}/${A}`:`${A}/${Z}/${j}`,(J||ne)&&(se+="/"+Math.round(10*J)/10),ne&&(se+=`/${Math.round(ne)}`),this._hashName){const ye=this._hashName;let Ae=!1;const Je=window.location.hash.slice(1).split("&").map(ke=>{const Ke=ke.split("=")[0];return Ke===ye?(Ae=!0,`${Ke}=${se}`):ke}).filter(ke=>ke);return Ae||Je.push(`${ye}=${se}`),`#${Je.join("&")}`}return`#${se}`}_getCurrentHash(){const l=window.location.hash.replace("#","");if(this._hashName){let v;return l.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(v=A)}),(v&&v[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._getCurrentHash();if(l.length>=3&&!l.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:v,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}}}const Js={linearity:.3,easing:h.bezier(0,0,.3,1)},Ju=h.extend({deceleration:2500,maxSpeed:1400},Js),yu=h.extend({deceleration:20,maxSpeed:1400},Js),ah=h.extend({deceleration:1e3,maxSpeed:360},Js),Cs=h.extend({deceleration:1e3,maxSpeed:90},Js);class Yu{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,v=h.exported.now();for(;l.length>0&&v-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const v={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)v.zoom+=B.zoomDelta||0,v.bearing+=B.bearingDelta||0,v.pitch+=B.pitchDelta||0,B.panDelta&&v.pan._add(B.panDelta),B.around&&(v.around=B.around),B.pinchAround&&(v.pinchAround=B.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(v.pan.mag()){const B=Bl(v.pan.mag(),A,h.extend({},Ju,l||{}));k.offset=v.pan.mult(B.amount/v.pan.mag()),k.center=this._map.transform.center,Ol(k,B)}if(v.zoom){const B=Bl(v.zoom,A,yu);k.zoom=this._map.transform.zoom+B.amount,Ol(k,B)}if(v.bearing){const B=Bl(v.bearing,A,ah);k.bearing=this._map.transform.bearing+h.clamp(B.amount,-179,179),Ol(k,B)}if(v.pitch){const B=Bl(v.pitch,A,Cs);k.pitch=this._map.transform.pitch+B.amount,Ol(k,B)}if(k.zoom||k.bearing){const B=v.pinchAround===void 0?v.around:v.pinchAround;k.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),h.extend(k,{noMoveStart:!0})}}function Ol(C,l){(!C.duration||C.duration<l.duration)&&(C.duration=l.duration,C.easing=l.easing)}function Bl(C,l,v){const{maxSpeed:A,linearity:k,deceleration:B}=v,j=h.clamp(C*k/(l/1e3),-A,A),Z=Math.abs(j)/(B*k);return{easing:v.easing,duration:1e3*Z,amount:j*(Z/2)}}class ia extends h.Event{constructor(l,v,A,k={}){const B=O.mousePos(v.getCanvasContainer(),A),j=v.unproject(B);super(l,h.extend({point:B,lngLat:j,originalEvent:A},k)),this._defaultPrevented=!1,this.target=v}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class na extends h.Event{constructor(l,v,A){const k=l==="touchend"?A.changedTouches:A.touches,B=O.touchPos(v.getCanvasContainer(),k),j=B.map(J=>v.unproject(J)),Z=B.reduce((J,ne,se,ye)=>J.add(ne.div(ye.length)),new h.pointGeometry(0,0));super(l,{points:B,point:Z,lngLats:j,lngLat:v.unproject(Z),originalEvent:A}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ac extends h.Event{constructor(l,v,A){super(l,{originalEvent:A}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ks{constructor(l,v){this._map=l,this._clickTolerance=v.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Ac(l.type,this._map,l))}mousedown(l,v){return this._mousedownPos=v,this._firePreventable(new ia(l.type,this._map,l))}mouseup(l){this._map.fire(new ia(l.type,this._map,l))}click(l,v){this._mousedownPos&&this._mousedownPos.dist(v)>=this._clickTolerance||this._map.fire(new ia(l.type,this._map,l))}dblclick(l){return this._firePreventable(new ia(l.type,this._map,l))}mouseover(l){this._map.fire(new ia(l.type,this._map,l))}mouseout(l){this._map.fire(new ia(l.type,this._map,l))}touchstart(l){return this._firePreventable(new na(l.type,this._map,l))}touchmove(l){this._map.fire(new na(l.type,this._map,l))}touchend(l){this._map.fire(new na(l.type,this._map,l))}touchcancel(l){this._map.fire(new na(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fl{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(l){this._map.fire(new ia(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ia("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new ia(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ml{constructor(l,v){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=v.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,v){this.isEnabled()&&l.shiftKey&&l.button===0&&(O.disableDrag(),this._startPos=this._lastPos=v,this._active=!0)}mousemoveWindow(l,v){if(!this._active)return;const A=v;if(this._lastPos.equals(A)||!this._box&&A.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=A,this._box||(this._box=O.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const B=Math.min(k.x,A.x),j=Math.max(k.x,A.x),Z=Math.min(k.y,A.y),J=Math.max(k.y,A.y);O.setTransform(this._box,`translate(${B}px,${Z}px)`),this._box.style.width=j-B+"px",this._box.style.height=J-Z+"px"}mouseupWindow(l,v){if(!this._active||l.button!==0)return;const A=this._startPos,k=v;if(this.reset(),O.suppressClick(),A.x!==k.x||A.y!==k.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:B=>B.fitScreenCoordinates(A,k,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,v){return this._map.fire(new h.Event(l,{originalEvent:v}))}}function Ra(C,l){const v={};for(let A=0;A<C.length;A++)v[C[A].identifier]=l[A];return v}class Gr{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,v,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),A.length===this.numTouches&&(this.centroid=function(k){const B=new h.pointGeometry(0,0);for(const j of k)B._add(j);return B.div(k.length)}(v),this.touches=Ra(A,v)))}touchmove(l,v,A){if(this.aborted||!this.centroid)return;const k=Ra(A,v);for(const B in this.touches){const j=this.touches[B],Z=k[B];(!Z||Z.dist(j)>30)&&(this.aborted=!0)}}touchend(l,v,A){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class Ul{constructor(l){this.singleTap=new Gr(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,v,A){this.singleTap.touchstart(l,v,A)}touchmove(l,v,A){this.singleTap.touchmove(l,v,A)}touchend(l,v,A){const k=this.singleTap.touchend(l,v,A);if(k){const B=l.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(k)<30;if(B&&j||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class gl{constructor(){this._zoomIn=new Ul({numTouches:1,numTaps:2}),this._zoomOut=new Ul({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,v,A){this._zoomIn.touchstart(l,v,A),this._zoomOut.touchstart(l,v,A)}touchmove(l,v,A){this._zoomIn.touchmove(l,v,A),this._zoomOut.touchmove(l,v,A)}touchend(l,v,A){const k=this._zoomIn.touchend(l,v,A),B=this._zoomOut.touchend(l,v,A);return k?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()+1,around:j.unproject(k)},{originalEvent:l})}):B?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()-1,around:j.unproject(B)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ms={0:1,2:2};class Nn{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(l,v){return!1}_move(l,v){return{}}mousedown(l,v){if(this._lastPoint)return;const A=O.mouseButton(l);this._correctButton(l,A)&&(this._lastPoint=v,this._eventButton=A)}mousemoveWindow(l,v){const A=this._lastPoint;if(A){if(l.preventDefault(),function(k,B){const j=Ms[B];return k.buttons===void 0||(k.buttons&j)!==j}(l,this._eventButton))this.reset();else if(this._moved||!(v.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=v,this._move(A,v)}}mouseupWindow(l){this._lastPoint&&O.mouseButton(l)===this._eventButton&&(this._moved&&O.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vr extends Nn{mousedown(l,v){super.mousedown(l,v),this._lastPoint&&(this._active=!0)}_correctButton(l,v){return v===0&&!l.ctrlKey}_move(l,v){return{around:v,panDelta:v.sub(l)}}}class Si extends Nn{_correctButton(l,v){return v===0&&l.ctrlKey||v===2}_move(l,v){const A=.8*(v.x-l.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(l){l.preventDefault()}}class yl extends Nn{_correctButton(l,v){return v===0&&l.ctrlKey||v===2}_move(l,v){const A=-.5*(v.y-l.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(l){l.preventDefault()}}class ds{constructor(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0)}touchstart(l,v,A){return this._calculateTransform(l,v,A)}touchmove(l,v,A){if(this._active&&!(A.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,v,A)}touchend(l,v,A){this._calculateTransform(l,v,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,v,A){A.length>0&&(this._active=!0);const k=Ra(A,v),B=new h.pointGeometry(0,0),j=new h.pointGeometry(0,0);let Z=0;for(const ne in k){const se=k[ne],ye=this._touches[ne];ye&&(B._add(se),j._add(se.sub(ye)),Z++,k[ne]=se)}if(this._touches=k,Z<this._minTouches||!j.mag())return;const J=j.div(Z);return this._sum._add(J),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(Z),panDelta:J}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(l){}_move(l,v,A){return{}}touchstart(l,v,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([v[0],v[1]]))}touchmove(l,v,A){if(!this._firstTwoTouches)return;l.preventDefault();const[k,B]=this._firstTwoTouches,j=_u(A,v,k),Z=_u(A,v,B);if(!j||!Z)return;const J=this._aroundCenter?null:j.add(Z).div(2);return this._move([j,Z],J,l)}touchend(l,v,A){if(!this._firstTwoTouches)return;const[k,B]=this._firstTwoTouches,j=_u(A,v,k),Z=_u(A,v,B);j&&Z||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _u(C,l,v){for(let A=0;A<C.length;A++)if(C[A].identifier===v)return l[A]}function Mi(C,l){return Math.log(C/l)/Math.LN2}class _l extends Ja{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,v){const A=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mi(this._distance,A),pinchAround:v}}}function Nl(C,l){return 180*C.angleWith(l)/Math.PI}class Ps extends Ja{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,v){const A=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nl(this._vector,A),pinchAround:v}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const v=25/(Math.PI*this._minDiameter)*360,A=Nl(l,this._startVector);return Math.abs(A)<v}}function Jr(C){return Math.abs(C.y)>Math.abs(C.x)}class Vl extends Ja{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(l){this._lastPoints=l,Jr(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,v,A){const k=l[0].sub(this._lastPoints[0]),B=l[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(k,B,A.timeStamp),this._valid)return this._lastPoints=l,this._active=!0,{pitchDelta:(k.y+B.y)/2*-.5}}gestureBeginsVertically(l,v,A){if(this._valid!==void 0)return this._valid;const k=l.mag()>=2,B=v.mag()>=2;if(!k&&!B)return;if(!k||!B)return this._firstMove===void 0&&(this._firstMove=A),A-this._firstMove<100&&void 0;const j=l.y>0==v.y>0;return Jr(l)&&Jr(v)&&j}}const Cc={panStep:100,bearingStep:15,pitchStep:10};class fo{constructor(){const l=Cc;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let v=0,A=0,k=0,B=0,j=0;switch(l.keyCode){case 61:case 107:case 171:case 187:v=1;break;case 189:case 109:case 173:v=-1;break;case 37:l.shiftKey?A=-1:(l.preventDefault(),B=-1);break;case 39:l.shiftKey?A=1:(l.preventDefault(),B=1);break;case 38:l.shiftKey?k=1:(l.preventDefault(),j=-1);break;case 40:l.shiftKey?k=-1:(l.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(A=0,k=0),{cameraAnimation:Z=>{const J=Z.getZoom();Z.easeTo({duration:300,easeId:"keyboardHandler",easing:Ri,zoom:v?Math.round(J)+v*(l.shiftKey?2:1):J,bearing:Z.getBearing()+A*this._bearingStep,pitch:Z.getPitch()+k*this._pitchStep,offset:[-B*this._panStep,-j*this._panStep],center:Z.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ri(C){return C*(2-C)}const Jo=4.000244140625;class jl{constructor(l,v){this._map=l,this._el=l.getCanvasContainer(),this._handler=v,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;let v=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const A=h.exported.now(),k=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,v!==0&&v%Jo==0?this._type="wheel":v!==0&&Math.abs(v)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=v,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(k*v)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,v+=this._lastValue)),l.shiftKey&&v&&(v/=4),this._type&&(this._lastWheelEvent=l,this._delta-=v,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const v=O.mousePos(this._el,l);this._around=h.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(v)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;if(this._delta!==0){const Z=this._type==="wheel"&&Math.abs(this._delta)>Jo?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*Z)));this._delta<0&&J!==0&&(J=1/J);const ne=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ne*J))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,A=this._startZoom,k=this._easing;let B,j=!1;if(this._type==="wheel"&&A&&k){const Z=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),J=k(Z);B=h.number(A,v,J),Z<1?this._frameId||(this._frameId=!0):j=!0}else B=v,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:B-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let v=h.ease;if(this._prevEase){const A=this._prevEase,k=(h.exported.now()-A.start)/A.duration,B=A.easing(k+.01)-A.easing(k),j=.27/Math.sqrt(B*B+1e-4)*.01,Z=Math.sqrt(.0729-j*j);v=h.bezier(j,Z,.25,1)}return this._prevEase={start:h.exported.now(),duration:l,easing:v},v}reset(){this._active=!1}}class Ys{constructor(l,v){this._clickZoom=l,this._tapZoom=v}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Oa{constructor(){this.reset()}reset(){this._active=!1}dblclick(l,v){return l.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(l.shiftKey?-1:1),around:A.unproject(v)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hr{constructor(){this._tap=new Ul({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(l,v,A){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=v[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(l,v,A))}touchmove(l,v,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const k=v[0],B=k.y-this._swipePoint.y;return this._swipePoint=k,l.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(l,v,A)}touchend(l,v,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(l,v,A)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ps{constructor(l,v,A){this._el=l,this._mousePan=v,this._touchPan=A}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fi{constructor(l,v,A){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=v,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vu{constructor(l,v,A,k){this._el=l,this._touchZoom=v,this._touchRotate=A,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ls=C=>C.zoom||C.drag||C.pitch||C.rotate;class bu extends h.Event{}function ha(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Yr{constructor(l,v){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yu(l),this._bearingSnap=v.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(v),h.bindAll(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,B,j]of this._listeners)O.addEventListener(k,B,k===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[l,v,A]of this._listeners)O.removeEventListener(l,v,l===document?this.handleWindowEvent:this.handleEvent,A)}_addDefaultHandlers(l){const v=this._map,A=v.getCanvasContainer();this._add("mapEvent",new ks(v,l));const k=v.boxZoom=new ml(v,l);this._add("boxZoom",k);const B=new gl,j=new Oa;v.doubleClickZoom=new Ys(j,B),this._add("tapZoom",B),this._add("clickZoom",j);const Z=new Hr;this._add("tapDragZoom",Z);const J=v.touchPitch=new Vl;this._add("touchPitch",J);const ne=new Si(l),se=new yl(l);v.dragRotate=new fi(l,ne,se),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const ye=new vr(l),Ae=new ds(l);v.dragPan=new ps(A,ye,Ae),this._add("mousePan",ye),this._add("touchPan",Ae,["touchZoom","touchRotate"]);const Je=new Ps,ke=new _l;v.touchZoomRotate=new vu(A,ke,Je,Z),this._add("touchRotate",Je,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]);const Ke=v.scrollZoom=new jl(v,this);this._add("scrollZoom",Ke,["mousePan"]);const ht=v.keyboard=new fo;this._add("keyboard",ht),this._add("blockableMapEvent",new Fl(v));for(const ut of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[ut]&&v[ut].enable(l[ut])}_add(l,v,A){this._handlers.push({handlerName:l,handler:v,allowed:A}),this._handlersById[l]=v}stop(l){if(!this._updatingCamera){for(const{handler:v}of this._handlers)v.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ls(this._eventsInProgress))||this.isZooming()}_blockedByActive(l,v,A){for(const k in l)if(k!==A&&(!v||v.indexOf(k)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const v=[];for(const A of l)this._el.contains(A.target)&&v.push(A);return v}handleEvent(l,v){if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=l.type==="renderFrame"?void 0:l,k={needsRenderFrame:!1},B={},j={},Z=l.touches,J=Z?this._getMapTouches(Z):void 0,ne=J?O.touchPos(this._el,J):O.mousePos(this._el,l);for(const{handlerName:Ae,handler:Je,allowed:ke}of this._handlers){if(!Je.isEnabled())continue;let Ke;this._blockedByActive(j,ke,Ae)?Je.reset():Je[v||l.type]&&(Ke=Je[v||l.type](l,ne,J),this.mergeHandlerResult(k,B,Ke,Ae,A),Ke&&Ke.needsRenderFrame&&this._triggerRenderFrame()),(Ke||Je.isActive())&&(j[Ae]=Je)}const se={};for(const Ae in this._previousActiveHandlers)j[Ae]||(se[Ae]=A);this._previousActiveHandlers=j,(Object.keys(se).length||ha(k))&&(this._changes.push([k,B,se]),this._triggerRenderFrame()),(Object.keys(j).length||ha(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=k;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))}mergeHandlerResult(l,v,A,k,B){if(!A)return;h.extend(l,A);const j={handlerName:k,originalEvent:A.originalEvent||B};A.zoomDelta!==void 0&&(v.zoom=j),A.panDelta!==void 0&&(v.drag=j),A.pitchDelta!==void 0&&(v.pitch=j),A.bearingDelta!==void 0&&(v.rotate=j)}_applyChanges(){const l={},v={},A={};for(const[k,B,j]of this._changes)k.panDelta&&(l.panDelta=(l.panDelta||new h.pointGeometry(0,0))._add(k.panDelta)),k.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(l.around=k.around),k.pinchAround!==void 0&&(l.pinchAround=k.pinchAround),k.noInertia&&(l.noInertia=k.noInertia),h.extend(v,B),h.extend(A,j);this._updateMapTransform(l,v,A),this._changes=[]}_updateMapTransform(l,v,A){const k=this._map,B=k.transform;if(!ha(l))return this._fireEvents(v,A,!0);let{panDelta:j,zoomDelta:Z,bearingDelta:J,pitchDelta:ne,around:se,pinchAround:ye}=l;ye!==void 0&&(se=ye),k._stop(!0),se=se||k.transform.centerPoint;const Ae=B.pointLocation(j?se.sub(j):se);J&&(B.bearing+=J),ne&&(B.pitch+=ne),Z&&(B.zoom+=Z),B.setLocationAtPoint(Ae,se),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(v,A,!0)}_fireEvents(l,v,A){const k=Ls(this._eventsInProgress),B=Ls(l),j={};for(const se in l){const{originalEvent:ye}=l[se];this._eventsInProgress[se]||(j[`${se}start`]=ye),this._eventsInProgress[se]=l[se]}!k&&B&&this._fireEvent("movestart",B.originalEvent);for(const se in j)this._fireEvent(se,j[se]);B&&this._fireEvent("move",B.originalEvent);for(const se in l){const{originalEvent:ye}=l[se];this._fireEvent(se,ye)}const Z={};let J;for(const se in this._eventsInProgress){const{handlerName:ye,originalEvent:Ae}=this._eventsInProgress[se];this._handlersById[ye].isActive()||(delete this._eventsInProgress[se],J=v[ye]||Ae,Z[`${se}end`]=J)}for(const se in Z)this._fireEvent(se,Z[se]);const ne=Ls(this._eventsInProgress);if(A&&(k||B)&&!ne){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;se?(ye(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:J})):(this._map.fire(new h.Event("moveend",{originalEvent:J})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,v){this._map.fire(new h.Event(l,v?{originalEvent:v}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new bu("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Vr={extend:(C,...l)=>h.extend(C,...l),run(C){C()},logToElement(C,l=!1,v="log"){const A=window.document.getElementById(v);A&&(l&&(A.innerHTML=""),A.innerHTML+=`<br>${C}`)}};class vl extends h.Evented{constructor(l,v){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=v.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,v){return this.jumpTo({center:l},v)}panBy(l,v,A){return l=h.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,h.extend({offset:l},v),A)}panTo(l,v,A){return this.easeTo(h.extend({center:l},v),A)}getZoom(){return this.transform.zoom}setZoom(l,v){return this.jumpTo({zoom:l},v),this}zoomTo(l,v,A){return this.easeTo(h.extend({zoom:l},v),A)}zoomIn(l,v){return this.zoomTo(this.getZoom()+1,l,v),this}zoomOut(l,v){return this.zoomTo(this.getZoom()-1,l,v),this}getBearing(){return this.transform.bearing}setBearing(l,v){return this.jumpTo({bearing:l},v),this}getPadding(){return this.transform.padding}setPadding(l,v){return this.jumpTo({padding:l},v),this}rotateTo(l,v,A){return this.easeTo(h.extend({bearing:l},v),A)}resetNorth(l,v){return this.rotateTo(0,h.extend({duration:1e3},l),v),this}resetNorthPitch(l,v){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},l),v),this}snapToNorth(l,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,v):this}getPitch(){return this.transform.pitch}setPitch(l,v){return this.jumpTo({pitch:l},v),this}cameraForBounds(l,v){l=h.LngLatBounds.convert(l);const A=v&&v.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),A,v)}_cameraForBoxAndBearing(l,v,A,k){const B={top:0,bottom:0,right:0,left:0};if(typeof(k=h.extend({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const Ot=k.padding;k.padding={top:Ot,bottom:Ot,right:Ot,left:Ot}}k.padding=h.extend(B,k.padding);const j=this.transform,Z=j.padding,J=j.project(h.LngLat.convert(l)),ne=j.project(h.LngLat.convert(v)),se=J.rotate(-A*Math.PI/180),ye=ne.rotate(-A*Math.PI/180),Ae=new h.pointGeometry(Math.max(se.x,ye.x),Math.max(se.y,ye.y)),Je=new h.pointGeometry(Math.min(se.x,ye.x),Math.min(se.y,ye.y)),ke=Ae.sub(Je),Ke=(j.width-(Z.left+Z.right+k.padding.left+k.padding.right))/ke.x,ht=(j.height-(Z.top+Z.bottom+k.padding.top+k.padding.bottom))/ke.y;if(ht<0||Ke<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ut=Math.min(j.scaleZoom(j.scale*Math.min(Ke,ht)),k.maxZoom),bt=h.pointGeometry.convert(k.offset),ft=new h.pointGeometry((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(A*Math.PI/180),jt=bt.add(ft).mult(j.scale/j.zoomScale(ut));return{center:j.unproject(J.add(ne).div(2).sub(jt)),zoom:ut,bearing:A}}fitBounds(l,v,A){return this._fitInternal(this.cameraForBounds(l,v),v,A)}fitScreenCoordinates(l,v,A,k,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(l)),this.transform.pointLocation(h.pointGeometry.convert(v)),A,k),k,B)}_fitInternal(l,v,A){return l?(delete(v=h.extend(l,v)).padding,v.linear?this.easeTo(v,A):this.flyTo(v,A)):this}jumpTo(l,v){this.stop();const A=this.transform;let k=!1,B=!1,j=!1;return"zoom"in l&&A.zoom!==+l.zoom&&(k=!0,A.zoom=+l.zoom),l.center!==void 0&&(A.center=h.LngLat.convert(l.center)),"bearing"in l&&A.bearing!==+l.bearing&&(B=!0,A.bearing=+l.bearing),"pitch"in l&&A.pitch!==+l.pitch&&(j=!0,A.pitch=+l.pitch),l.padding==null||A.isPaddingEqual(l.padding)||(A.padding=l.padding),this.fire(new h.Event("movestart",v)).fire(new h.Event("move",v)),k&&this.fire(new h.Event("zoomstart",v)).fire(new h.Event("zoom",v)).fire(new h.Event("zoomend",v)),B&&this.fire(new h.Event("rotatestart",v)).fire(new h.Event("rotate",v)).fire(new h.Event("rotateend",v)),j&&this.fire(new h.Event("pitchstart",v)).fire(new h.Event("pitch",v)).fire(new h.Event("pitchend",v)),this.fire(new h.Event("moveend",v))}easeTo(l,v){this._stop(!1,l.easeId),((l=h.extend({offset:[0,0],duration:500,easing:h.ease},l)).animate===!1||!l.essential&&h.exported.prefersReducedMotion)&&(l.duration=0);const A=this.transform,k=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),J="zoom"in l?+l.zoom:k,ne="bearing"in l?this._normalizeBearing(l.bearing,B):B,se="pitch"in l?+l.pitch:j,ye="padding"in l?l.padding:A.padding,Ae=h.pointGeometry.convert(l.offset);let Je=A.centerPoint.add(Ae);const ke=A.pointLocation(Je),Ke=h.LngLat.convert(l.center||ke);this._normalizeCenter(Ke);const ht=A.project(ke),ut=A.project(Ke).sub(ht),bt=A.zoomScale(J-k);let ft,jt;l.around&&(ft=h.LngLat.convert(l.around),jt=A.locationPoint(ft));const Ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==k,this._rotating=this._rotating||B!==ne,this._pitching=this._pitching||se!==j,this._padding=!A.isPaddingEqual(ye),this._easeId=l.easeId,this._prepareEase(v,l.noMoveStart,Ot),this._ease(Ut=>{if(this._zooming&&(A.zoom=h.number(k,J,Ut)),this._rotating&&(A.bearing=h.number(B,ne,Ut)),this._pitching&&(A.pitch=h.number(j,se,Ut)),this._padding&&(A.interpolatePadding(Z,ye,Ut),Je=A.centerPoint.add(Ae)),ft)A.setLocationAtPoint(ft,jt);else{const ti=A.zoomScale(A.zoom-k),ui=J>k?Math.min(2,bt):Math.max(.5,bt),qt=Math.pow(ui,1-Ut),Gi=A.unproject(ht.add(ut.mult(Ut*qt)).mult(ti));A.setLocationAtPoint(A.renderWorldCopies?Gi.wrap():Gi,Je)}this._fireMoveEvents(v)},Ut=>{this._afterEase(v,Ut)},l),this}_prepareEase(l,v,A={}){this._moving=!0,v||A.moving||this.fire(new h.Event("movestart",l)),this._zooming&&!A.zooming&&this.fire(new h.Event("zoomstart",l)),this._rotating&&!A.rotating&&this.fire(new h.Event("rotatestart",l)),this._pitching&&!A.pitching&&this.fire(new h.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new h.Event("move",l)),this._zooming&&this.fire(new h.Event("zoom",l)),this._rotating&&this.fire(new h.Event("rotate",l)),this._pitching&&this.fire(new h.Event("pitch",l))}_afterEase(l,v){if(this._easeId&&v&&this._easeId===v)return;delete this._easeId;const A=this._zooming,k=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new h.Event("zoomend",l)),k&&this.fire(new h.Event("rotateend",l)),B&&this.fire(new h.Event("pitchend",l)),this.fire(new h.Event("moveend",l))}flyTo(l,v){if(!l.essential&&h.exported.prefersReducedMotion){const g=h.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,v)}this.stop(),l=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},l);const A=this.transform,k=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),J="zoom"in l?h.clamp(+l.zoom,A.minZoom,A.maxZoom):k,ne="bearing"in l?this._normalizeBearing(l.bearing,B):B,se="pitch"in l?+l.pitch:j,ye="padding"in l?l.padding:A.padding,Ae=A.zoomScale(J-k),Je=h.pointGeometry.convert(l.offset);let ke=A.centerPoint.add(Je);const Ke=A.pointLocation(ke),ht=h.LngLat.convert(l.center||Ke);this._normalizeCenter(ht);const ut=A.project(Ke),bt=A.project(ht).sub(ut);let ft=l.curve;const jt=Math.max(A.width,A.height),Ot=jt/Ae,Ut=bt.mag();if("minZoom"in l){const g=h.clamp(Math.min(l.minZoom,k,J),A.minZoom,A.maxZoom),w=jt/A.zoomScale(g-k);ft=Math.sqrt(w/Ut*2)}const ti=ft*ft;function ui(g){const w=(Ot*Ot-jt*jt+(g?-1:1)*ti*ti*Ut*Ut)/(2*(g?Ot:jt)*ti*Ut);return Math.log(Math.sqrt(w*w+1)-w)}function qt(g){return(Math.exp(g)-Math.exp(-g))/2}function Gi(g){return(Math.exp(g)+Math.exp(-g))/2}const Ci=ui(0);let xn=function(g){return Gi(Ci)/Gi(Ci+ft*g)},f=function(g){return jt*((Gi(Ci)*(qt(w=Ci+ft*g)/Gi(w))-qt(Ci))/ti)/Ut;var w},y=(ui(1)-Ci)/ft;if(Math.abs(Ut)<1e-6||!isFinite(y)){if(Math.abs(jt-Ot)<1e-6)return this.easeTo(l,v);const g=Ot<jt?-1:1;y=Math.abs(Math.log(Ot/jt))/ft,f=function(){return 0},xn=function(w){return Math.exp(g*ft*w)}}return l.duration="duration"in l?+l.duration:1e3*y/("screenSpeed"in l?+l.screenSpeed/ft:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=B!==ne,this._pitching=se!==j,this._padding=!A.isPaddingEqual(ye),this._prepareEase(v,!1),this._ease(g=>{const w=g*y,P=1/xn(w);A.zoom=g===1?J:k+A.scaleZoom(P),this._rotating&&(A.bearing=h.number(B,ne,g)),this._pitching&&(A.pitch=h.number(j,se,g)),this._padding&&(A.interpolatePadding(Z,ye,g),ke=A.centerPoint.add(Je));const F=g===1?ht:A.unproject(ut.add(bt.mult(f(w))).mult(P));A.setLocationAtPoint(A.renderWorldCopies?F.wrap():F,ke),this._fireMoveEvents(v)},()=>this._afterEase(v),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const A=this._onEaseEnd;delete this._onEaseEnd,A.call(this,v)}if(!l){const A=this.handlers;A&&A.stop(!1)}return this}_ease(l,v,A){A.animate===!1||A.duration===0?(l(1),v()):(this._easeStart=h.exported.now(),this._easeOptions=A,this._onEaseFrame=l,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,v){l=h.wrap(l,-180,180);const A=Math.abs(l-v);return Math.abs(l-360-v)<A&&(l-=360),Math.abs(l+360-v)<A&&(l+=360),l}_normalizeCenter(l){const v=this.transform;if(!v.renderWorldCopies||v.lngRange)return;const A=l.lng-v.center.lng;l.lng+=A>180?-360:A<-180?360:0}}class Yo{constructor(l={}){this.options=l,h.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,v){const A=this._map._getUIString(`AttributionControl.${v}`);l.title=A,l.setAttribute("aria-label",A)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const v=this._map.style.sourceCaches;for(const k in v){const B=v[k];if(B.used){const j=B.getSource();j.attribution&&l.indexOf(j.attribution)<0&&l.push(j.attribution)}}l=l.filter(k=>String(k).trim()),l.sort((k,B)=>k.length-B.length),l=l.filter((k,B)=>{for(let j=B+1;j<l.length;j++)if(l[j].indexOf(k)>=0)return!1;return!0});const A=l.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,l.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ya{constructor(l={}){this.options=l,h.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl mapboxgl-ctrl");const v=O.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return v.target="_blank",v.rel="noopener nofollow",v.href="https://maplibre.org/",v.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),v.setAttribute("rel","noopener nofollow"),this._container.appendChild(v),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const l=this._container.children;if(l.length){const v=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact","mapboxgl-compact"):v.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class kc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const v=++this._id;return this._queue.push({callback:l,id:v,cancelled:!1}),v}remove(l){const v=this._currentlyRunning,A=v?this._queue.concat(v):this._queue;for(const k of A)if(k.id===l)return void(k.cancelled=!0)}run(l=0){const v=this._currentlyRunning=this._queue;this._queue=[];for(const A of v)if(!A.cancelled&&(A.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ql={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},qa={showCompass:!0,showZoom:!0,visualizePitch:!1};class ya{constructor(l,v,A=!1){this._clickTolerance=10,this.element=v,this.mouseRotate=new Si({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,A&&(this.mousePitch=new yl({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),O.addEventListener(v,"mousedown",this.mousedown),O.addEventListener(v,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(v,"touchmove",this.touchmove),O.addEventListener(v,"touchend",this.touchend),O.addEventListener(v,"touchcancel",this.reset)}down(l,v){this.mouseRotate.mousedown(l,v),this.mousePitch&&this.mousePitch.mousedown(l,v),O.disableDrag()}move(l,v){const A=this.map,k=this.mouseRotate.mousemoveWindow(l,v);if(k&&k.bearingDelta&&A.setBearing(A.getBearing()+k.bearingDelta),this.mousePitch){const B=this.mousePitch.mousemoveWindow(l,v);B&&B.pitchDelta&&A.setPitch(A.getPitch()+B.pitchDelta)}}off(){const l=this.element;O.removeEventListener(l,"mousedown",this.mousedown),O.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(l,"touchmove",this.touchmove),O.removeEventListener(l,"touchend",this.touchend),O.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup)}mousedown(l){this.down(h.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),O.mousePos(this.element,l)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)}mousemove(l){this.move(l,O.mousePos(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Bi(C,l,v){if(C=new h.LngLat(C.lng,C.lat),l){const A=new h.LngLat(C.lng-360,C.lat),k=new h.LngLat(C.lng+360,C.lat),B=v.locationPoint(C).distSqr(l);v.locationPoint(A).distSqr(l)<B?C=A:v.locationPoint(k).distSqr(l)<B&&(C=k)}for(;Math.abs(C.lng-v.center.lng)>180;){const A=v.locationPoint(C);if(A.x>=0&&A.y>=0&&A.x<=v.width&&A.y<=v.height)break;C.lng>v.center.lng?C.lng-=360:C.lng+=360}return C}const ci={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _a(C,l,v){const A=C.classList;for(const k in ci)A.remove(`maplibregl-${v}-anchor-${k}`,`mapboxgl-${v}-anchor-${k}`);A.add(`maplibregl-${v}-anchor-${l}`,`mapboxgl-${v}-anchor-${l}`)}class ra extends h.Evented{constructor(l,v){if(super(),(l instanceof HTMLElement||v)&&(l=h.extend({element:l},v)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=h.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const A=O.createNS("http://www.w3.org/2000/svg","svg"),k=41,B=27;A.setAttributeNS(null,"display","block"),A.setAttributeNS(null,"height",`${k}px`),A.setAttributeNS(null,"width",`${B}px`),A.setAttributeNS(null,"viewBox",`0 0 ${B} ${k}`);const j=O.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"stroke","none"),j.setAttributeNS(null,"stroke-width","1"),j.setAttributeNS(null,"fill","none"),j.setAttributeNS(null,"fill-rule","evenodd");const Z=O.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill-rule","nonzero");const J=O.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(3.0, 29.0)"),J.setAttributeNS(null,"fill","#000000");const ne=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const bt of ne){const ft=O.createNS("http://www.w3.org/2000/svg","ellipse");ft.setAttributeNS(null,"opacity","0.04"),ft.setAttributeNS(null,"cx","10.5"),ft.setAttributeNS(null,"cy","5.80029008"),ft.setAttributeNS(null,"rx",bt.rx),ft.setAttributeNS(null,"ry",bt.ry),J.appendChild(ft)}const se=O.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const ye=O.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(ye);const Ae=O.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"opacity","0.25"),Ae.setAttributeNS(null,"fill","#000000");const Je=O.createNS("http://www.w3.org/2000/svg","path");Je.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ae.appendChild(Je);const ke=O.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ke.setAttributeNS(null,"fill","#FFFFFF");const Ke=O.createNS("http://www.w3.org/2000/svg","g");Ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ht=O.createNS("http://www.w3.org/2000/svg","circle");ht.setAttributeNS(null,"fill","#000000"),ht.setAttributeNS(null,"opacity","0.25"),ht.setAttributeNS(null,"cx","5.5"),ht.setAttributeNS(null,"cy","5.5"),ht.setAttributeNS(null,"r","5.4999962");const ut=O.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Ke.appendChild(ht),Ke.appendChild(ut),Z.appendChild(J),Z.appendChild(se),Z.appendChild(Ae),Z.appendChild(ke),Z.appendChild(Ke),A.appendChild(Z),A.setAttributeNS(null,"height",k*this._scale+"px"),A.setAttributeNS(null,"width",B*this._scale+"px"),this._element.appendChild(A),this._offset=h.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",A=>{A.preventDefault()}),this._element.addEventListener("mousedown",A=>{A.preventDefault()}),_a(this._element,this._anchor,"marker"),this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=h.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const k=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(l){const v=l.code,A=l.charCode||l.keyCode;v!=="Space"&&v!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(l){const v=l.originalEvent.target,A=this._element;this._popup&&(v===A||A.contains(v))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}_update(l){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Bi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${ci[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${v}`)}getOffset(){return this._offset}setOffset(l){return this._offset=h.pointGeometry.convert(l),this._update(),this}_onMove(l){if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(l){this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Co={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qr,va=0,to=!1;const oa={maxWidth:100,unit:"metric"};function zs(C,l,v){const A=v&&v.maxWidth||100,k=C._container.clientHeight/2,B=C.unproject([0,k]),j=C.unproject([A,k]),Z=B.distanceTo(j);if(v&&v.unit==="imperial"){const J=3.2808*Z;J>5280?gi(l,A,J/5280,C._getUIString("ScaleControl.Miles")):gi(l,A,J,C._getUIString("ScaleControl.Feet"))}else v&&v.unit==="nautical"?gi(l,A,Z/1852,C._getUIString("ScaleControl.NauticalMiles")):Z>=1e3?gi(l,A,Z/1e3,C._getUIString("ScaleControl.Kilometers")):gi(l,A,Z,C._getUIString("ScaleControl.Meters"))}function gi(C,l,v,A){const k=function(B){const j=Math.pow(10,`${Math.floor(B)}`.length-1);let Z=B/j;return Z=Z>=10?10:Z>=5?5:Z>=3?3:Z>=2?2:Z>=1?1:function(J){const ne=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*ne)/ne}(Z),j*Z}(v);C.style.width=l*(k/v)+"px",C.innerHTML=`${k}&nbsp;${A}`}const mi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xo(C){if(C){if(typeof C=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(C,2)));return{center:new h.pointGeometry(0,0),top:new h.pointGeometry(0,C),"top-left":new h.pointGeometry(l,l),"top-right":new h.pointGeometry(-l,l),bottom:new h.pointGeometry(0,-C),"bottom-left":new h.pointGeometry(l,-l),"bottom-right":new h.pointGeometry(-l,-l),left:new h.pointGeometry(C,0),right:new h.pointGeometry(-C,0)}}if(C instanceof h.pointGeometry||Array.isArray(C)){const l=h.pointGeometry.convert(C);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:h.pointGeometry.convert(C.center||[0,0]),top:h.pointGeometry.convert(C.top||[0,0]),"top-left":h.pointGeometry.convert(C["top-left"]||[0,0]),"top-right":h.pointGeometry.convert(C["top-right"]||[0,0]),bottom:h.pointGeometry.convert(C.bottom||[0,0]),"bottom-left":h.pointGeometry.convert(C["bottom-left"]||[0,0]),"bottom-right":h.pointGeometry.convert(C["bottom-right"]||[0,0]),left:h.pointGeometry.convert(C.left||[0,0]),right:h.pointGeometry.convert(C.right||[0,0])}}return xo(new h.pointGeometry(0,0))}const da={supported:I,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends vl{constructor(C){var l;if(h.PerformanceUtils.mark(h.PerformanceMarkers.create),(C=h.extend({},Mc,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ka(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new kc,this._controls=[],this._mapId=h.uniqueId(),this._locale=h.extend({},ql,C.locale),this._clickTolerance=C.clickTolerance,this._pixelRatio=(l=C.pixelRatio)!==null&&l!==void 0?l:devicePixelRatio,this._requestManager=new Y(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Yr(this,C),this._hash=C.hash&&new Rl(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,h.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Yo({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Ya,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",v=>{this._update(v.dataType==="style"),this.fire(new h.Event(`${v.dataType}data`,v))}),this.on("dataloading",v=>{this.fire(new h.Event(`${v.dataType}dataloading`,v))}),this.on("dataabort",v=>{this.fire(new h.Event("sourcedataabort",v))})}_getMapId(){return this._mapId}addControl(C,l){if(l===void 0&&(l=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const v=C.onAdd(this);this._controls.push(C);const A=this._controlPositions[l];return l.indexOf("bottom")!==-1?A.insertBefore(v,A.firstChild):A.appendChild(v),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(C);return l>-1&&this._controls.splice(l,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}resize(C){const l=this._containerDimensions(),v=l[0],A=l[1];this._resizeCanvas(v,A,this.getPixelRatio()),this.transform.resize(v,A),this.painter.resize(v,A,this.getPixelRatio());const k=!this._moving;return k&&(this.stop(),this.fire(new h.Event("movestart",C)).fire(new h.Event("move",C))),this.fire(new h.Event("resize",C)),k&&this.fire(new h.Event("moveend",C)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(C){const[l,v]=this._containerDimensions();this._pixelRatio=C,this._resizeCanvas(l,v,C),this.painter.resize(l,v,C)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(h.LngLatBounds.convert(C)),this._update()}setMinZoom(C){if((C=C==null?-2:C)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C==null?22:C)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C==null?0:C)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C==null?60:C)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}project(C){return this.transform.locationPoint(h.LngLat.convert(C))}unproject(C){return this.transform.pointLocation(h.pointGeometry.convert(C))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(C,l,v){if(C==="mouseenter"||C==="mouseover"){let A=!1;return{layer:l,listener:v,delegates:{mousemove:B=>{const j=this.getLayer(l)?this.queryRenderedFeatures(B.point,{layers:[l]}):[];j.length?A||(A=!0,v.call(this,new ia(C,this,B.originalEvent,{features:j}))):A=!1},mouseout:()=>{A=!1}}}}if(C==="mouseleave"||C==="mouseout"){let A=!1;return{layer:l,listener:v,delegates:{mousemove:j=>{(this.getLayer(l)?this.queryRenderedFeatures(j.point,{layers:[l]}):[]).length?A=!0:A&&(A=!1,v.call(this,new ia(C,this,j.originalEvent)))},mouseout:j=>{A&&(A=!1,v.call(this,new ia(C,this,j.originalEvent)))}}}}{const A=k=>{const B=this.getLayer(l)?this.queryRenderedFeatures(k.point,{layers:[l]}):[];B.length&&(k.features=B,v.call(this,k),delete k.features)};return{layer:l,listener:v,delegates:{[C]:A}}}}on(C,l,v){if(v===void 0)return super.on(C,l);const A=this._createDelegatedListener(C,l,v);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(A);for(const k in A.delegates)this.on(k,A.delegates[k]);return this}once(C,l,v){if(v===void 0)return super.once(C,l);const A=this._createDelegatedListener(C,l,v);for(const k in A.delegates)this.once(k,A.delegates[k]);return this}off(C,l,v){return v===void 0?super.off(C,l):(this._delegatedListeners&&this._delegatedListeners[C]&&(A=>{const k=this._delegatedListeners[C];for(let B=0;B<k.length;B++){const j=k[B];if(j.layer===l&&j.listener===v){for(const Z in j.delegates)this.off(Z,j.delegates[Z]);return k.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,l){if(!this.style)return[];let v;if(l!==void 0||C===void 0||C instanceof h.pointGeometry||Array.isArray(C)||(l=C,C=void 0),l=l||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof h.pointGeometry||typeof C[0]=="number")v=[h.pointGeometry.convert(C)];else{const A=h.pointGeometry.convert(C[0]),k=h.pointGeometry.convert(C[1]);v=[A,new h.pointGeometry(k.x,A.y),k,new h.pointGeometry(A.x,k.y),A]}return this.style.queryRenderedFeatures(v,l,this.transform)}querySourceFeatures(C,l){return this.style.querySourceFeatures(C,l)}setStyle(C,l){return(l=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(C,l))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const l=this._locale[C];if(l==null)throw new Error(`Missing UI string '${C}'`);return l}_updateStyle(C,l){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new fr(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,l){if(typeof C=="string"){const v=this._requestManager.transformRequest(C,h.ResourceType.Style);h.getJSON(v,(A,k)=>{A?this.fire(new h.ErrorEvent(A)):k&&this._updateDiff(k,l)})}else typeof C=="object"&&this._updateDiff(C,l)}_updateDiff(C,l){try{this.style.setState(C)&&this._update(!0)}catch(v){h.warnOnce(`Unable to perform style diff: ${v.message||v.error||v}.  Rebuilding the style from scratch.`),this._updateStyle(C,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.warnOnce("There is no style added to the map.")}addSource(C,l){return this._lazyInitEmptyStyle(),this.style.addSource(C,l),this._update(!0)}isSourceLoaded(C){const l=this.style&&this.style.sourceCaches[C];if(l!==void 0)return l.loaded();this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${C}'`)))}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const l in C){const v=C[l]._tiles;for(const A in v){const k=v[A];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(C,l,v){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,l,v)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,l,{pixelRatio:v=1,sdf:A=!1,stretchX:k,stretchY:B,content:j}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||h.isImageBitmap(l)){const{width:Z,height:J,data:ne}=h.exported.getImageData(l);this.style.addImage(C,{data:new h.RGBAImage({width:Z,height:J},ne),pixelRatio:v,stretchX:k,stretchY:B,content:j,sdf:A,version:0})}else{if(l.width===void 0||l.height===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Z,height:J,data:ne}=l,se=l;this.style.addImage(C,{data:new h.RGBAImage({width:Z,height:J},new Uint8Array(ne)),pixelRatio:v,stretchX:k,stretchY:B,content:j,sdf:A,version:0,userImage:se}),se.onAdd&&se.onAdd(this,C)}}}updateImage(C,l){const v=this.style.getImage(C);if(!v)return this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const A=l instanceof HTMLImageElement||h.isImageBitmap(l)?h.exported.getImageData(l):l,{width:k,height:B,data:j}=A;if(k===void 0||B===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==v.data.width||B!==v.data.height)return this.fire(new h.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Z=!(l instanceof HTMLImageElement||h.isImageBitmap(l));v.data.replace(j,Z),this.style.updateImage(C,v)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,l){h.getImage(this._requestManager.transformRequest(C,h.ResourceType.Image),l)}listImages(){return this.style.listImages()}addLayer(C,l){return this._lazyInitEmptyStyle(),this.style.addLayer(C,l),this._update(!0)}moveLayer(C,l){return this.style.moveLayer(C,l),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}setLayerZoomRange(C,l,v){return this.style.setLayerZoomRange(C,l,v),this._update(!0)}setFilter(C,l,v={}){return this.style.setFilter(C,l,v),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,l,v,A={}){return this.style.setPaintProperty(C,l,v,A),this._update(!0)}getPaintProperty(C,l){return this.style.getPaintProperty(C,l)}setLayoutProperty(C,l,v,A={}){return this.style.setLayoutProperty(C,l,v,A),this._update(!0)}getLayoutProperty(C,l){return this.style.getLayoutProperty(C,l)}setLight(C,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,l){return this.style.setFeatureState(C,l),this._update()}removeFeatureState(C,l){return this.style.removeFeatureState(C,l),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,l=0;return this._container&&(C=this._container.clientWidth||400,l=this._container.clientHeight||300),[C,l]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map","mapboxgl-map");const l=this._canvasContainer=O.create("div","maplibregl-canvas-container mapboxgl-canvas-container",C);this._interactive&&l.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const v=this._containerDimensions();this._resizeCanvas(v[0],v[1],this.getPixelRatio());const A=this._controlContainer=O.create("div","maplibregl-control-container mapboxgl-control-container",C),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{k[B]=O.create("div",`maplibregl-ctrl-${B} mapboxgl-ctrl-${B}`,A)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,l,v){this._canvas.width=v*C,this._canvas.height=v*l,this._canvas.style.width=`${C}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const C=h.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);l?(this.painter=new Da(l,this.transform),h.exported$1.testSupport(l)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:C}))}_contextRestored(C){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:C}))}_onMapScroll(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){let l,v=0;const A=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(l=A.createQueryEXT(),A.beginQueryEXT(A.TIME_ELAPSED_EXT,l),v=h.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const j=this.transform.zoom,Z=h.exported.now();this.style.zoomHistory.update(j,Z);const J=new h.EvaluationParameters(j,{now:Z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ne=J.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(k=!0,this._crossFadingFactor=ne),this.style.update(J)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.load),this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const j=h.exported.now()-v;A.endQueryEXT(A.TIME_ELAPSED_EXT,l),setTimeout(()=>{const Z=A.getQueryObjectEXT(l,A.QUERY_RESULT_EXT)/1e6;A.deleteQueryEXT(l),this.fire(new h.Event("gpu-timing-frame",{cpuTime:j,gpuTime:Z}))},50)}if(this.listens("gpu-timing-layer")){const j=this.painter.collectGpuTimers();setTimeout(()=>{const Z=this.painter.queryGpuTimers(j);this.fire(new h.Event("gpu-timing-layer",{layerTimes:Z}))},50)}const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.Event("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const C=this.painter.context.gl.getExtension("WEBGL_lose_context");C&&C.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),h.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.exported.frame(C=>{h.PerformanceUtils.frame(C),this._frame=null,this._render(C)}))}_onWindowOnline(){this._update()}_onWindowResize(C){this._trackResize&&this.resize({originalEvent:C})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}_setCacheLimits(C,l){h.setCacheLimits(C,l)}},NavigationControl:class{constructor(C){this.options=h.extend({},qa,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const C=this._map.getZoom(),l=C===this._map.getMaxZoom(),v=C===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const C=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=C}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ya(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,l){const v=O.create("button",C,this._container);return v.type="button",v.addEventListener("click",l),v}_setButtonTitle(C,l){const v=this._map._getUIString(`NavigationControl.${l}`);C.title=v,C.setAttribute("aria-label",v)}},GeolocateControl:class extends h.Evented{constructor(C){super(),this.options=h.extend({},Co,C),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(C){var l;return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,Qr!==void 0?l(Qr):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(v=>{Qr=v.state!=="denied",l(Qr)}):(Qr=!!window.navigator.geolocation,l(Qr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,va=0,to=!1}_isOutOfMapMaxBounds(C){const l=this._map.getMaxBounds(),v=C.coords;return l&&(v.longitude<l.getWest()||v.longitude>l.getEast()||v.latitude<l.getSouth()||v.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",C)),this._finish()}}_updateCamera(C){const l=new h.LngLat(C.coords.longitude,C.coords.latitude),v=C.coords.accuracy,A=this._map.getBearing(),k=h.extend({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(v),k,{geolocateSource:!0})}_updateMarker(C){if(C){const l=new h.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const C=this._map._container.clientHeight/2,l=this._map.unproject([0,C]),v=this._map.unproject([1,C]),A=l.distanceTo(v),k=Math.ceil(2*this._accuracy/A);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&to)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",C)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(C){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",C===!1){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ra(this._dotElement),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ra({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":va--,to=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),va++,va>1?(C={maximumAge:6e5,timeout:0},to=!0):(C=this.options.positionOptions,to=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yo,LogoControl:Ya,ScaleControl:class{constructor(C){this.options=h.extend({},oa,C),h.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){zs(this._map,this._container,this.options)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(C){this.options.unit=C,zs(this._map,this._container,this.options)}},FullscreenControl:class{constructor(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends h.Evented{constructor(C){super(),this.options=h.extend(Object.create(mi),C),h.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=h.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const l=document.createDocumentFragment(),v=document.createElement("body");let A;for(v.innerHTML=C;A=v.firstChild,A;)l.appendChild(A);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(C){this._update(C.point)}_onMouseMove(C){this._update(C.point)}_onDrag(C){this._update(C.point)}_update(C){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=O.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(B=>this._container.classList.add(B)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Bi(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!C))return;const l=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat);let v=this.options.anchor;const A=xo(this.options.offset);if(!v){const B=this._container.offsetWidth,j=this._container.offsetHeight;let Z;Z=l.y+A.bottom.y<j?["top"]:l.y>this._map.transform.height-j?["bottom"]:[],l.x<B/2?Z.push("left"):l.x>this._map.transform.width-B/2&&Z.push("right"),v=Z.length===0?"bottom":Z.join("-")}const k=l.add(A[v]).round();O.setTransform(this._container,`${ci[v]} translate(${k.x}px,${k.y}px)`),_a(this._container,v,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(xu);C&&C.focus()}_onClose(){this.remove()}},Marker:ra,Style:fr,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,Evented:h.Evented,AJAXError:h.AJAXError,config:h.config,CanvasSource:Jt,GeoJSONSource:ni,ImageSource:Ki,RasterDEMTileSource:Lt,RasterTileSource:Ye,VectorTileSource:Gt,VideoSource:ei,prewarm:function(){At().acquire(Cn)},clearPrewarmedResources:function(){const C=Kr;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Cn),Kr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return Zn.workerCount},set workerCount(C){Zn.workerCount=C},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){h.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage(C){h.clearTileCache(C)},workerUrl:"",addProtocol(C,l){h.config.REGISTERED_PROTOCOLS[C]=l},removeProtocol(C){delete h.config.REGISTERED_PROTOCOLS[C]}};return Vr.extend(da,{isSafari:h.isSafari,getPerformanceMetrics:h.PerformanceUtils.getPerformanceMetrics}),da});var c=p;return c})})(wd);var rk=wd.exports,Ep=ak,ok=Object.prototype.hasOwnProperty;function ak(){for(var o={},e=0;e<arguments.length;e++){var n=arguments[e];for(var a in n)ok.call(n,a)&&(o[a]=n[a])}return o}var B1={exports:{}};(function(o,e){(function(){var n={};o.exports=n,n.simpleFilter=function(a,p){return p.filter(function(_){return n.test(a,_)})},n.test=function(a,p){return n.match(a,p)!==null},n.match=function(a,p,_){_=_||{};var c=0,h=[],I=p.length,L=0,z=0,R=_.pre||"",O=_.post||"",Y=_.caseSensitive&&p||p.toLowerCase(),ee;a=_.caseSensitive&&a||a.toLowerCase();for(var ue=0;ue<I;ue++)ee=p[ue],Y[ue]===a[c]?(ee=R+ee+O,c+=1,z+=1+z):z=0,L+=z,h[h.length]=ee;return c===a.length?(L=Y===a?1/0:L,{rendered:h.join(""),score:L}):null},n.filter=function(a,p,_){return!p||p.length===0?[]:typeof a!="string"?p:(_=_||{},p.reduce(function(c,h,I,L){var z=h;_.extract&&(z=_.extract(h));var R=n.match(a,z,_);return R!=null&&(c[c.length]={string:R.rendered,score:R.score,index:I,original:h}),c},[]).sort(function(c,h){var I=h.score-c.score;return I||c.index-h.index}))}})()})(B1);var al=function(o){return this.component=o,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,o.el.parentNode.insertBefore(this.wrapper,o.el.nextSibling),this};al.prototype.show=function(){this.element.style.display="block"};al.prototype.hide=function(){this.element.style.display="none"};al.prototype.add=function(o){this.items.push(o)};al.prototype.clear=function(){this.items=[],this.active=0};al.prototype.isEmpty=function(){return!this.items.length};al.prototype.isVisible=function(){return this.element.style.display==="block"};al.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var o=0;o<this.items.length;o++)this.drawItem(this.items[o],this.active===o);this.show()};al.prototype.drawItem=function(o,e){var n=document.createElement("li"),a=document.createElement("a");e&&(n.className+=" active"),a.innerHTML=o.string,n.appendChild(a),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,o)}.bind(this))};al.prototype.handleMouseUp=function(o){this.selectingListItem=!1,this.component.value(o.original),this.clear(),this.draw()};al.prototype.move=function(o){this.active=o,this.draw()};al.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};al.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};al.prototype.drawError=function(o){var e=document.createElement("li");e.innerHTML=o,this.element.appendChild(e),this.show()};var sk=al,lk=Ep,uk=B1.exports,ck=sk,vs=function(o,e,n){return n=n||{},this.options=lk({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=o,this.data=e||[],this.list=new ck(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(a){this.handleKeyUp(a.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(a){this.handleKeyDown(a)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(a){this.handlePaste(a)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};vs.prototype.handleKeyUp=function(o){o===40||o===38||o===27||o===13||o===9||this.handleInputChange(this.el.value)};vs.prototype.handleKeyDown=function(o){switch(o.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&o.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};vs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};vs.prototype.handlePaste=function(o){if(o.clipboardData)this.handleInputChange(o.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(o.target.value)},100)}};vs.prototype.handleInputChange=function(o){if(this.query=this.normalize(o),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(e){for(var n=0;n<e.length&&(this.list.add(e[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};vs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};vs.prototype.update=function(o){this.data=o,this.handleKeyUp()};vs.prototype.clear=function(){this.data=[],this.list.clear()};vs.prototype.normalize=function(o){return o=o.toLowerCase(),o};vs.prototype.match=function(o,e){return o.indexOf(e)>-1};vs.prototype.value=function(o){if(this.selected=o,this.el.value=this.getItemValue(o),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};vs.prototype.getCandidates=function(o){var e={pre:"<strong>",post:"</strong>",extract:function(a){return this.getItemValue(a)}.bind(this)},n;this.options.filter?(n=uk.filter(this.query,this.data,e),n=n.map(function(a){return{original:a.original,string:this.render(a.original,a.string)}}.bind(this))):n=this.data.map(function(a){var p=this.render(a);return{original:a,string:p}}.bind(this)),o(n)};vs.prototype.getItemValue=function(o){return o};vs.prototype.render=function(o,e){if(e)return e;for(var n=o.original?this.getItemValue(o.original):this.getItemValue(o),a=this.normalize(n),p=a.lastIndexOf(this.query);p>-1;){var _=p+this.query.length;n=n.slice(0,p)+"<strong>"+n.slice(p,_)+"</strong>"+n.slice(_),p=a.slice(0,p).lastIndexOf(this.query)}return n};vs.prototype.renderError=function(o){this.list.drawError(o)};var hk=vs,F1=hk,dk=F1;typeof window!="undefined"&&(window.Suggestions=F1);var pk="Expected a function",k0=0/0,fk="[object Symbol]",mk=/^\s+|\s+$/g,gk=/^[-+]0x[0-9a-f]+$/i,yk=/^0b[01]+$/i,_k=/^0o[0-7]+$/i,vk=parseInt,bk=typeof Yl=="object"&&Yl&&Yl.Object===Object&&Yl,xk=typeof self=="object"&&self&&self.Object===Object&&self,wk=bk||xk||Function("return this")(),Ek=Object.prototype,Ik=Ek.toString,Sk=Math.max,Tk=Math.min,ny=function(){return wk.Date.now()};function Ak(o,e,n){var a,p,_,c,h,I,L=0,z=!1,R=!1,O=!0;if(typeof o!="function")throw new TypeError(pk);e=M0(e)||0,Sy(n)&&(z=!!n.leading,R="maxWait"in n,_=R?Sk(M0(n.maxWait)||0,e):_,O="trailing"in n?!!n.trailing:O);function Y(De){var fe=a,ct=p;return a=p=void 0,L=De,c=o.apply(ct,fe),c}function ee(De){return L=De,h=setTimeout(de,e),z?Y(De):c}function ue(De){var fe=De-I,ct=De-L,st=e-fe;return R?Tk(st,_-ct):st}function te(De){var fe=De-I,ct=De-L;return I===void 0||fe>=e||fe<0||R&&ct>=_}function de(){var De=ny();if(te(De))return oe(De);h=setTimeout(de,ue(De))}function oe(De){return h=void 0,O&&a?Y(De):(a=p=void 0,c)}function be(){h!==void 0&&clearTimeout(h),L=0,a=I=p=h=void 0}function qe(){return h===void 0?c:oe(ny())}function Ne(){var De=ny(),fe=te(De);if(a=arguments,p=this,I=De,fe){if(h===void 0)return ee(I);if(R)return h=setTimeout(de,e),Y(I)}return h===void 0&&(h=setTimeout(de,e)),c}return Ne.cancel=be,Ne.flush=qe,Ne}function Sy(o){var e=typeof o;return!!o&&(e=="object"||e=="function")}function Ck(o){return!!o&&typeof o=="object"}function kk(o){return typeof o=="symbol"||Ck(o)&&Ik.call(o)==fk}function M0(o){if(typeof o=="number")return o;if(kk(o))return k0;if(Sy(o)){var e=typeof o.valueOf=="function"?o.valueOf():o;o=Sy(e)?e+"":e}if(typeof o!="string")return o===0?o:+o;o=o.replace(mk,"");var n=yk.test(o);return n||_k.test(o)?vk(o.slice(2),n?2:8):gk.test(o)?k0:+o}var Mk=Ak,r_={exports:{}},fp=typeof Reflect=="object"?Reflect:null,P0=fp&&typeof fp.apply=="function"?fp.apply:function(e,n,a){return Function.prototype.apply.call(e,n,a)},vm;fp&&typeof fp.ownKeys=="function"?vm=fp.ownKeys:Object.getOwnPropertySymbols?vm=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:vm=function(e){return Object.getOwnPropertyNames(e)};function Pk(o){console&&console.warn&&console.warn(o)}var U1=Number.isNaN||function(e){return e!==e};function yo(){yo.init.call(this)}r_.exports=yo;r_.exports.once=Rk;yo.EventEmitter=yo;yo.prototype._events=void 0;yo.prototype._eventsCount=0;yo.prototype._maxListeners=void 0;var L0=10;function Hm(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}Object.defineProperty(yo,"defaultMaxListeners",{enumerable:!0,get:function(){return L0},set:function(o){if(typeof o!="number"||o<0||U1(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");L0=o}});yo.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yo.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||U1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function N1(o){return o._maxListeners===void 0?yo.defaultMaxListeners:o._maxListeners}yo.prototype.getMaxListeners=function(){return N1(this)};yo.prototype.emit=function(e){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var p=e==="error",_=this._events;if(_!==void 0)p=p&&_.error===void 0;else if(!p)return!1;if(p){var c;if(n.length>0&&(c=n[0]),c instanceof Error)throw c;var h=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw h.context=c,h}var I=_[e];if(I===void 0)return!1;if(typeof I=="function")P0(I,this,n);else for(var L=I.length,z=H1(I,L),a=0;a<L;++a)P0(z[a],this,n);return!0};function V1(o,e,n,a){var p,_,c;if(Hm(n),_=o._events,_===void 0?(_=o._events=Object.create(null),o._eventsCount=0):(_.newListener!==void 0&&(o.emit("newListener",e,n.listener?n.listener:n),_=o._events),c=_[e]),c===void 0)c=_[e]=n,++o._eventsCount;else if(typeof c=="function"?c=_[e]=a?[n,c]:[c,n]:a?c.unshift(n):c.push(n),p=N1(o),p>0&&c.length>p&&!c.warned){c.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=o,h.type=e,h.count=c.length,Pk(h)}return o}yo.prototype.addListener=function(e,n){return V1(this,e,n,!1)};yo.prototype.on=yo.prototype.addListener;yo.prototype.prependListener=function(e,n){return V1(this,e,n,!0)};function Lk(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j1(o,e,n){var a={fired:!1,wrapFn:void 0,target:o,type:e,listener:n},p=Lk.bind(a);return p.listener=n,a.wrapFn=p,p}yo.prototype.once=function(e,n){return Hm(n),this.on(e,j1(this,e,n)),this};yo.prototype.prependOnceListener=function(e,n){return Hm(n),this.prependListener(e,j1(this,e,n)),this};yo.prototype.removeListener=function(e,n){var a,p,_,c,h;if(Hm(n),p=this._events,p===void 0)return this;if(a=p[e],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete p[e],p.removeListener&&this.emit("removeListener",e,a.listener||n));else if(typeof a!="function"){for(_=-1,c=a.length-1;c>=0;c--)if(a[c]===n||a[c].listener===n){h=a[c].listener,_=c;break}if(_<0)return this;_===0?a.shift():zk(a,_),a.length===1&&(p[e]=a[0]),p.removeListener!==void 0&&this.emit("removeListener",e,h||n)}return this};yo.prototype.off=yo.prototype.removeListener;yo.prototype.removeAllListeners=function(e){var n,a,p;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[e]),this;if(arguments.length===0){var _=Object.keys(a),c;for(p=0;p<_.length;++p)c=_[p],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(p=n.length-1;p>=0;p--)this.removeListener(e,n[p]);return this};function q1(o,e,n){var a=o._events;if(a===void 0)return[];var p=a[e];return p===void 0?[]:typeof p=="function"?n?[p.listener||p]:[p]:n?Dk(p):H1(p,p.length)}yo.prototype.listeners=function(e){return q1(this,e,!0)};yo.prototype.rawListeners=function(e){return q1(this,e,!1)};yo.listenerCount=function(o,e){return typeof o.listenerCount=="function"?o.listenerCount(e):G1.call(o,e)};yo.prototype.listenerCount=G1;function G1(o){var e=this._events;if(e!==void 0){var n=e[o];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yo.prototype.eventNames=function(){return this._eventsCount>0?vm(this._events):[]};function H1(o,e){for(var n=new Array(e),a=0;a<e;++a)n[a]=o[a];return n}function zk(o,e){for(;e+1<o.length;e++)o[e]=o[e+1];o.pop()}function Dk(o){for(var e=new Array(o.length),n=0;n<e.length;++n)e[n]=o[n].listener||o[n];return e}function Rk(o,e){return new Promise(function(n,a){function p(c){o.removeListener(e,_),a(c)}function _(){typeof o.removeListener=="function"&&o.removeListener("error",p),n([].slice.call(arguments))}Z1(o,e,_,{once:!0}),e!=="error"&&Ok(o,p,{once:!0})})}function Ok(o,e,n){typeof o.on=="function"&&Z1(o,"error",e,n)}function Z1(o,e,n,a){if(typeof o.on=="function")a.once?o.once(e,n):o.on(e,n);else if(typeof o.addEventListener=="function")o.addEventListener(e,function p(_){a.once&&o.removeEventListener(e,p),n(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o)}var Bk={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function Fk(o){var e=o.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}function Uk(o){var e=o.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],a=e[2].split(";"),p=null,_=a.reduce(function(c,h){var I=Fk(h);return I?I.key==="rel"?(p||(p=I.value),c):(c[I.key]=I.value,c):c},{});return p?{url:n,rel:p,params:_}:null}function Nk(o){return o?o.split(/,\s*</).reduce(function(e,n){var a=Uk(n);if(!a)return e;var p=a.rel.split(/\s+/);return p.forEach(function(_){e[_]||(e[_]={url:a.url,params:a.params})}),e},{}):{}}var Vk=Nk,jk=Vk;function o_(o,e){this.request=o,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch{this.body=e.body}this.links=jk(this.headers.link)}o_.prototype.hasNextPage=function(){return!!this.links.next};o_.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var qk=o_,Zm={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},z0=Zm;function Gk(o){var e=o.type||z0.ERROR_HTTP,n;if(o.body)try{n=JSON.parse(o.body)}catch{n=o.body}else n=null;var a=o.message||null;a||(typeof n=="string"?a=n:n&&typeof n.message=="string"?a=n.message:e===z0.ERROR_REQUEST_ABORTED&&(a="Request aborted")),this.message=a,this.type=e,this.statusCode=o.statusCode||null,this.request=o.request,this.body=n}var Hk=Gk;function Zk(o){var e=o.indexOf(":"),n=o.substring(0,e).trim().toLowerCase(),a=o.substring(e+1).trim();return{name:n,value:a}}function Wk(o){var e={};return o&&o.trim().split(/[\r|\n]+/).forEach(function(n){var a=Zk(n);e[a.name]=a.value}),e}var Xk=Wk,Kk=qk,D0=Hk,ry=Zm,Jk=Xk,Cm={};function Yk(o){var e=Cm[o.id];!e||(e.abort(),delete Cm[o.id])}function Qk(o,e){return new Kk(o,{body:e.response,headers:Jk(e.getAllResponseHeaders()),statusCode:e.status})}function R0(o){var e=o.total,n=o.loaded,a=100*n/e;return{total:e,transferred:n,percent:a}}function W1(o,e){return new Promise(function(n,a){e.onprogress=function(c){o.emitter.emit(ry.EVENT_PROGRESS_DOWNLOAD,R0(c))};var p=o.file;p&&(e.upload.onprogress=function(c){o.emitter.emit(ry.EVENT_PROGRESS_UPLOAD,R0(c))}),e.onerror=function(c){a(c)},e.onabort=function(){var c=new D0({request:o,type:ry.ERROR_REQUEST_ABORTED});a(c)},e.onload=function(){if(delete Cm[o.id],e.status<200||e.status>=400){var c=new D0({request:o,body:e.response,statusCode:e.status});a(c);return}n(e)};var _=o.body;typeof _=="string"?e.send(_):_?e.send(JSON.stringify(_)):p?e.send(p):e.send(),Cm[o.id]=e}).then(function(n){return Qk(o,n)})}function X1(o,e){var n=o.url(e),a=new window.XMLHttpRequest;return a.open(o.method,n),Object.keys(o.headers).forEach(function(p){a.setRequestHeader(p,o.headers[p])}),a}function $k(o){return Promise.resolve().then(function(){var e=X1(o,o.client.accessToken);return W1(o,e)})}var eM={browserAbort:Yk,sendRequestXhr:W1,browserSend:$k,createRequestXhr:X1},Ty={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(o,e){(function(n){var a=e,p=o&&o.exports==a&&o,_=typeof Yl=="object"&&Yl;(_.global===_||_.window===_)&&(n=_);var c=function(ee){this.message=ee};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var h=function(ee){throw new c(ee)},I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=/[\t\n\f\r ]/g,z=function(ee){ee=String(ee).replace(L,"");var ue=ee.length;ue%4==0&&(ee=ee.replace(/==?$/,""),ue=ee.length),(ue%4==1||/[^+a-zA-Z0-9/]/.test(ee))&&h("Invalid character: the string to be decoded is not correctly encoded.");for(var te=0,de,oe,be="",qe=-1;++qe<ue;)oe=I.indexOf(ee.charAt(qe)),de=te%4?de*64+oe:oe,te++%4&&(be+=String.fromCharCode(255&de>>(-2*te&6)));return be},R=function(ee){ee=String(ee),/[^\0-\xFF]/.test(ee)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var ue=ee.length%3,te="",de=-1,oe,be,qe,Ne,De=ee.length-ue;++de<De;)oe=ee.charCodeAt(de)<<16,be=ee.charCodeAt(++de)<<8,qe=ee.charCodeAt(++de),Ne=oe+be+qe,te+=I.charAt(Ne>>18&63)+I.charAt(Ne>>12&63)+I.charAt(Ne>>6&63)+I.charAt(Ne&63);return ue==2?(oe=ee.charCodeAt(de)<<8,be=ee.charCodeAt(++de),Ne=oe+be,te+=I.charAt(Ne>>10)+I.charAt(Ne>>4&63)+I.charAt(Ne<<2&63)+"="):ue==1&&(Ne=ee.charCodeAt(de),te+=I.charAt(Ne>>2)+I.charAt(Ne<<4&63)+"=="),te},O={encode:R,decode:z,version:"0.1.0"};if(a&&!a.nodeType)if(p)p.exports=O;else for(var Y in O)O.hasOwnProperty(Y)&&(a[Y]=O[Y]);else n.base64=O})(Yl)})(Ty,Ty.exports);var tM=Ty.exports,oy={};function iM(o){if(oy[o])return oy[o];var e=o.split("."),n=e[0],a=e[1];if(!a)throw new Error("Invalid token");var p=nM(a),_={usage:n,user:p.u};return _d(p,"a")&&(_.authorization=p.a),_d(p,"exp")&&(_.expires=p.exp*1e3),_d(p,"iat")&&(_.created=p.iat*1e3),_d(p,"scopes")&&(_.scopes=p.scopes),_d(p,"client")&&(_.client=p.client),_d(p,"ll")&&(_.lastLogin=p.ll),_d(p,"iu")&&(_.impersonator=p.iu),oy[o]=_,_}function nM(o){try{return JSON.parse(tM.decode(o))}catch{throw new Error("Invalid token")}}function _d(o,e){return Object.prototype.hasOwnProperty.call(o,e)}var K1=iM,J1={exports:{}};(function(o){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function p(I,L,z){this.fn=I,this.context=L,this.once=z||!1}function _(I,L,z,R,O){if(typeof z!="function")throw new TypeError("The listener must be a function");var Y=new p(z,R||I,O),ee=n?n+L:L;return I._events[ee]?I._events[ee].fn?I._events[ee]=[I._events[ee],Y]:I._events[ee].push(Y):(I._events[ee]=Y,I._eventsCount++),I}function c(I,L){--I._eventsCount===0?I._events=new a:delete I._events[L]}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var L=[],z,R;if(this._eventsCount===0)return L;for(R in z=this._events)e.call(z,R)&&L.push(n?R.slice(1):R);return Object.getOwnPropertySymbols?L.concat(Object.getOwnPropertySymbols(z)):L},h.prototype.listeners=function(L){var z=n?n+L:L,R=this._events[z];if(!R)return[];if(R.fn)return[R.fn];for(var O=0,Y=R.length,ee=new Array(Y);O<Y;O++)ee[O]=R[O].fn;return ee},h.prototype.listenerCount=function(L){var z=n?n+L:L,R=this._events[z];return R?R.fn?1:R.length:0},h.prototype.emit=function(L,z,R,O,Y,ee){var ue=n?n+L:L;if(!this._events[ue])return!1;var te=this._events[ue],de=arguments.length,oe,be;if(te.fn){switch(te.once&&this.removeListener(L,te.fn,void 0,!0),de){case 1:return te.fn.call(te.context),!0;case 2:return te.fn.call(te.context,z),!0;case 3:return te.fn.call(te.context,z,R),!0;case 4:return te.fn.call(te.context,z,R,O),!0;case 5:return te.fn.call(te.context,z,R,O,Y),!0;case 6:return te.fn.call(te.context,z,R,O,Y,ee),!0}for(be=1,oe=new Array(de-1);be<de;be++)oe[be-1]=arguments[be];te.fn.apply(te.context,oe)}else{var qe=te.length,Ne;for(be=0;be<qe;be++)switch(te[be].once&&this.removeListener(L,te[be].fn,void 0,!0),de){case 1:te[be].fn.call(te[be].context);break;case 2:te[be].fn.call(te[be].context,z);break;case 3:te[be].fn.call(te[be].context,z,R);break;case 4:te[be].fn.call(te[be].context,z,R,O);break;default:if(!oe)for(Ne=1,oe=new Array(de-1);Ne<de;Ne++)oe[Ne-1]=arguments[Ne];te[be].fn.apply(te[be].context,oe)}}return!0},h.prototype.on=function(L,z,R){return _(this,L,z,R,!1)},h.prototype.once=function(L,z,R){return _(this,L,z,R,!0)},h.prototype.removeListener=function(L,z,R,O){var Y=n?n+L:L;if(!this._events[Y])return this;if(!z)return c(this,Y),this;var ee=this._events[Y];if(ee.fn)ee.fn===z&&(!O||ee.once)&&(!R||ee.context===R)&&c(this,Y);else{for(var ue=0,te=[],de=ee.length;ue<de;ue++)(ee[ue].fn!==z||O&&!ee[ue].once||R&&ee[ue].context!==R)&&te.push(ee[ue]);te.length?this._events[Y]=te.length===1?te[0]:te:c(this,Y)}return this},h.prototype.removeAllListeners=function(L){var z;return L?(z=n?n+L:L,this._events[z]&&c(this,z)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,o.exports=h})(J1);function rM(o){return o.map(encodeURIComponent).join(",")}function Y1(o){return Array.isArray(o)?rM(o):encodeURIComponent(String(o))}function Q1(o,e,n){if(n===!1||n===null)return o;var a=/\?/.test(o)?"&":"?",p=encodeURIComponent(e);return n!==void 0&&n!==""&&n!==!0&&(p+="="+Y1(n)),""+o+a+p}function oM(o,e){if(!e)return o;var n=o;return Object.keys(e).forEach(function(a){var p=e[a];p!==void 0&&(Array.isArray(p)&&(p=p.filter(function(_){return _!=null}).join(",")),n=Q1(n,a,p))}),n}function aM(o,e){if(!e||o.slice(0,4)==="http")return o;var n=o[0]==="/"?"":"/";return""+e.replace(/\/$/,"")+n+o}function sM(o,e){return e?o.replace(/\/:([a-zA-Z0-9]+)/g,function(n,a){var p=e[a];if(p===void 0)throw new Error("Unspecified route parameter "+a);var _=Y1(p);return"/"+_}):o}var lM={appendQueryObject:oM,appendQueryParam:Q1,prependOrigin:aM,interpolateRouteParams:sM},uM=K1,a_=Ep,cM=J1.exports,pm=lM,O0=Zm,hM=1;function Fh(o,e){if(!o)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var a=a_(n,e.headers),p=Object.keys(a).reduce(function(_,c){return _[c.toLowerCase()]=a[c],_},{});this.id=hM++,this._options=e,this.emitter=new cM,this.client=o,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||o.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=p}Fh.prototype.url=function(e){var n=pm.prependOrigin(this.path,this.origin);n=pm.appendQueryObject(n,this.query);var a=this.params,p=e==null?this.client.accessToken:e;if(p){n=pm.appendQueryParam(n,"access_token",p);var _=uM(p).user;a=a_({ownerId:_},a)}return n=pm.interpolateRouteParams(n,a),n};Fh.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(n){return e.response=n,e.emitter.emit(O0.EVENT_RESPONSE,n),n},function(n){throw e.error=n,e.emitter.emit(O0.EVENT_ERROR,n),n})};Fh.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Fh.prototype.eachPage=function(e){var n=this;function a(c){function h(){delete n._nextPageRequest;var I=c.nextPage();I&&(n._nextPageRequest=I,_(I))}e(null,c,h)}function p(c){e(c,null,function(){})}function _(c){c.send().then(a,p)}_(this)};Fh.prototype.clone=function(){return this._extend()};Fh.prototype._extend=function(e){var n=a_(this._options,e);return new Fh(this.client,n)};var dM=Fh,pM=K1,fM=dM,mM=Zm;function $1(o){if(!o||!o.accessToken)throw new Error("Cannot create a client without an access token");pM(o.accessToken),this.accessToken=o.accessToken,this.origin=o.origin||mM.API_ORIGIN}$1.prototype.createRequest=function(e){return new fM(this,e)};var eb=$1,tb=eM,ib=eb;function yp(o){ib.call(this,o)}yp.prototype=Object.create(ib.prototype);yp.prototype.constructor=yp;yp.prototype.sendRequest=tb.browserSend;yp.prototype.abortRequest=tb.browserAbort;function gM(o){return new yp(o)}var nb=gM,yM=nb,_M=yM,vM=Object.prototype.toString,bM=function(o){var e;return vM.call(o)==="[object Object]"&&(e=Object.getPrototypeOf(o),e===null||e===Object.getPrototypeOf({}))},xM=bM,wM=Ep,rb="value",ay=`
  `,Mo={};Mo.assert=function(o,e){return e=e||{},function(n){var a=Uh(o,n);if(!!a){var p=s_(a,e);throw e.apiName&&(p=e.apiName+": "+p),new Error(p)}}};Mo.shape=function(e){var n=TM(e);return function(p){var _=Uh(Mo.plainObject,p);if(_)return _;for(var c,h,I=[],L=0;L<n.length;L++)c=n[L].key,h=n[L].value,_=Uh(h,p[c]),_&&I.push([c].concat(_));return I.length<2?I[0]:function(z){I=I.map(function(Y){var ee=Y[0],ue=s_(Y,z).split(`
`).join(ay);return"- "+ee+": "+ue});var R=z.path.join("."),O=R===rb?"":" of "+R;return"The following properties"+O+" have invalid values:"+ay+I.join(ay)}}};Mo.strictShape=function(e){var n=Mo.shape(e);return function(p){var _=n(p);if(_)return _;var c=Object.keys(p).reduce(function(h,I){return e[I]===void 0&&h.push(I),h},[]);if(c.length!==0)return function(){return"The following keys are invalid: "+c.join(", ")}}};Mo.arrayOf=function(e){return ob(e)};Mo.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return ob(e)};function ob(o){var e=Array.isArray(o),n=function(a){return e?o[a]:o};return function(p){var _=Uh(Mo.plainArray,p);if(_)return _;if(e&&p.length!==o.length)return"an array with "+o.length+" items";for(var c=0;c<p.length;c++)if(_=Uh(n(c),p[c]),_)return[c].concat(_)}}Mo.required=function(e){function n(a){return a==null?function(p){return ab(p,sb(p.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return n.__required=!0,n};Mo.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(a){var p=e.map(function(_){return Uh(_,a)}).filter(Boolean);if(p.length===e.length)return p.every(function(_){return _.length===1&&typeof _[0]=="string"})?EM(p.map(function(_){return _[0]})):p.reduce(function(_,c){return c.length>_.length?c:_})}};Mo.equal=function(e){return function(a){if(a!==e)return JSON.stringify(e)}};Mo.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=e.map(function(a){return Mo.equal(a)});return Mo.oneOfType.apply(this,n)};Mo.range=function(e){var n=e[0],a=e[1];return function(_){var c=Uh(Mo.number,_);if(c||_<n||_>a)return"number between "+n+" & "+a+" (inclusive)"}};Mo.any=function(){};Mo.boolean=function(e){if(typeof e!="boolean")return"boolean"};Mo.number=function(e){if(typeof e!="number")return"number"};Mo.plainArray=function(e){if(!Array.isArray(e))return"array"};Mo.plainObject=function(e){if(!xM(e))return"object"};Mo.string=function(e){if(typeof e!="string")return"string"};Mo.func=function(e){if(typeof e!="function")return"function"};function Uh(o,e){if(!(e==null&&!o.hasOwnProperty("__required"))){var n=o(e);if(n)return Array.isArray(n)?n:[n]}}function s_(o,e){var n=o.length,a=o[n-1],p=o.slice(0,n-1);return p.length===0&&(p=[rb]),e=wM(e,{path:p}),typeof a=="function"?a(e):ab(e,IM(a))}function EM(o){return o.length<2?o[0]:o.length===2?o.join(" or "):o.slice(0,-1).join(", ")+", or "+o.slice(-1)}function IM(o){return"must be "+SM(o)+"."}function SM(o){return/^an? /.test(o)?o:/^[aeiou]/i.test(o)?"an "+o:/^[a-z]/i.test(o)?"a "+o:o}function ab(o,e){var n=sb(o.path),a=o.path.join(".")+" "+e,p=n?"Item at position ":"";return p+a}function sb(o){return typeof o[o.length-1]=="number"||typeof o[0]=="number"}function TM(o){return Object.keys(o||{}).map(function(e){return{key:e,value:o[e]}})}Mo.validate=Uh;Mo.processMessage=s_;var AM=Mo,CM=Ep,mp=AM;function kM(o){if(typeof window!="undefined")return o instanceof Yl.Blob||o instanceof Yl.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof o=="string"||o.pipe!==void 0))return"Filename or Readable stream"}function MM(o,e){return mp.assert(mp.strictShape(o),e)}function PM(o){var e="date";if(typeof o=="boolean")return e;try{var n=new Date(o);if(n.getTime&&isNaN(n.getTime()))return e}catch{return e}}function LM(o){return mp.tuple(mp.number,mp.number)(o)}var zM=CM(mp,{file:kM,date:PM,coordinates:LM,assertShape:MM});function DM(o,e){var n=function(a,p){return e.indexOf(a)!==-1&&p!==void 0};return typeof e=="function"&&(n=e),Object.keys(o).filter(function(a){return n(a,o[a])}).reduce(function(a,p){return a[p]=o[p],a},{})}var RM=DM;function OM(o,e){return Object.keys(o).reduce(function(n,a){return n[a]=e(a,o[a]),n},{})}var BM=OM,FM=BM;function UM(o){return FM(o,function(e,n){return typeof n=="boolean"?JSON.stringify(n):n})}var NM=UM,VM=eb,jM=nb;function qM(o){return function(e){var n;VM.prototype.isPrototypeOf(e)?n=e:n=jM(e);var a=Object.create(o);return a.client=n,a}}var GM=qM,lb=Ep,Ur=zM,km=RM,ub=NM,HM=GM,l_={},cb=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l_.forwardGeocode=function(o){Ur.assertShape({query:Ur.required(Ur.string),mode:Ur.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ur.arrayOf(Ur.string),proximity:Ur.oneOf(Ur.coordinates,"ip"),types:Ur.arrayOf(Ur.oneOf(cb)),autocomplete:Ur.boolean,bbox:Ur.arrayOf(Ur.number),limit:Ur.number,language:Ur.arrayOf(Ur.string),routing:Ur.boolean,fuzzyMatch:Ur.boolean,worldview:Ur.string})(o),o.mode=o.mode||"mapbox.places";var e=ub(lb({country:o.countries},km(o,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:km(o,["mode","query"]),query:e})};l_.reverseGeocode=function(o){Ur.assertShape({query:Ur.required(Ur.coordinates),mode:Ur.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ur.arrayOf(Ur.string),types:Ur.arrayOf(Ur.oneOf(cb)),bbox:Ur.arrayOf(Ur.number),limit:Ur.number,language:Ur.arrayOf(Ur.string),reverseMode:Ur.oneOf("distance","score"),routing:Ur.boolean,worldview:Ur.string})(o),o.mode=o.mode||"mapbox.places";var e=ub(lb({country:o.countries},km(o,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:km(o,["mode","query"]),query:e})};var ZM=HM(l_);let WM="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",hb=o=>crypto.getRandomValues(new Uint8Array(o)),db=(o,e,n)=>{let a=(2<<Math.log(o.length-1)/Math.LN2)-1,p=-~(1.6*a*e/o.length);return(_=e)=>{let c="";for(;;){let h=n(p),I=p;for(;I--;)if(c+=o[h[I]&a]||"",c.length===_)return c}}},XM=(o,e=21)=>db(o,e,hb),KM=(o=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(o));for(;o--;){let a=n[o]&63;a<36?e+=a.toString(36):a<62?e+=(a-26).toString(36).toUpperCase():a<63?e+="_":e+="-"}return e};var JM=Object.freeze(Object.defineProperty({__proto__:null,nanoid:KM,customAlphabet:XM,customRandom:db,urlAlphabet:WM,random:hb},Symbol.toStringTag,{value:"Module"})),YM=vC(JM),QM=YM.nanoid;function pb(o){this.origin=o.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=o.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=o,this.send=this.send.bind(this),this.countries=o.countries?o.countries.split(","):null,this.types=o.types?o.types.split(","):null,this.bbox=o.bbox?o.bbox:null,this.language=o.language?o.language.split(","):null,this.limit=o.limit?+o.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(o),this.eventQueue=new Array,this.flushInterval=o.flushInterval||1e3,this.maxQueueSize=o.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}pb.prototype={select:function(o,e){var n=this.getSelectedIndex(o,e),a=this.getEventPayload("search.select",e);if(a.resultIndex=n,a.resultPlaceName=o.place_name,a.resultId=o.id,!(n===this.lastSentIndex&&a.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=a.queryString,!!a.queryString))return this.push(a)},start:function(o){var e=this.getEventPayload("search.start",o);if(!!e.queryString)return this.push(e)},keyevent:function(o,e){if(!!o.key&&!(o.metaKey||[9,27,37,39,13,38,40].indexOf(o.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",e);if(n.lastAction=o.key,!!n.queryString)return this.push(n)}},send:function(o,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(o);this.request(n,function(a){if(a)return this.handleError(a,e);if(e)return e()}.bind(this))},getRequestOptions:function(o){Array.isArray(o)||(o=[o]);var e={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};return e},getEventPayload:function(o,e){var n;e.options.proximity?typeof e.options.proximity=="object"?n=[e.options.proximity.longitude,e.options.proximity.latitude]:e.options.proximity==="ip"?n=[999,999]:n=e.options.proximity:n=null;var a=e._map?e._map.getZoom():void 0,p={event:o,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:n,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:a,keyboardLocale:this.locale};return o==="search.select"?p.queryString=e.inputString:o!="search.select"&&e._inputEl?p.queryString=e._inputEl.value:p.queryString=e.inputString,p},request:function(o,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?e(null):e(this.statusText)},n.open(o.method,o.host+"/"+o.path,!0);for(var a in o.headers){var p=o.headers[a];n.setRequestHeader(a,p)}n.send(o.body)},handleError:function(o,e){if(e)return e(o)},generateSessionID:function(){return QM()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(o,e){if(!!e._typeahead){var n=e._typeahead.data,a=o.id,p=n.map(function(c){return c.id}),_=p.indexOf(a);return _}},shouldEnableLogging:function(o){return!(o.enableEventLogging===!1||o.origin&&o.origin.indexOf("api.mapbox.com")==-1||o.localGeocoder||o.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(o,e){this.eventQueue.push(o),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}};var $M=pb,eP={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},tP={placeholder:eP},fb={exports:{}};(function(o){(function(e,n,a){o.exports?o.exports=a():e[n]=a()})(Yl,"subtag",function(){var e="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function a(I){return I.match(n)||[]}function p(I){return a(I).filter(function(L,z){return L&&z})}function _(I){return I=a(I),{language:I[1]||e,extlang:I[2]||e,script:I[3]||e,region:I[4]||e}}function c(I,L,z){Object.defineProperty(I,L,{value:z,enumerable:!0})}function h(I,L,z){function R(O){return a(O)[I]||e}c(R,"pattern",L),c(_,z,R)}return h(1,/^[a-zA-Z]{2,3}$/,"language"),h(2,/^[a-zA-Z]{3}$/,"extlang"),h(3,/^[a-zA-Z]{4}$/,"script"),h(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(_,"split",p),_})})(fb);function mb(){}mb.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const o={enableHighAccuracy:!0};return new Promise(function(e,n){window.navigator.geolocation.getCurrentPosition(e,n,o)})}};var iP=mb;function nP(o,e){const n=gb(o),a=["address","street","place","country"];var p;if(typeof e=="function")return e(n);const _=a.indexOf(e);return _===-1?p=a:p=a.slice(_),p.reduce(function(c,h){return n[h]?(c!==""&&(c=c+", "),c+n[h]):c},"")}function gb(o){const e=o.address||"",n=o.text||"",a=o.place_name||"",_={address:a.split(",")[0],houseNumber:e,street:n,placeName:a};return o.context.forEach(function(c){const h=c.id.split(".")[0];_[h]=c.text}),_}var rP={transformFeatureToGeolocationText:nP,getAddressInfo:gb},oP=dk,aP=Mk,bd=Ep,sP=r_.exports.EventEmitter,B0=Bk,sy=_M,ly=ZM,lP=$M,uP=tP,cP=fb.exports,hP=iP,dP=rP;const zh={FORWARD:0,LOCAL:1,REVERSE:2};function pP(){var o=document.createElement("div");return o.className="mapboxgl-ctrl-geocoder--powered-by",o.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',o}function yb(o){this._eventEmitter=new sP,this.options=bd({},this.options,o),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new hP}yb.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(o){return o.place_name},render:function(o){var e=o.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},addTo:function(o){function e(n,a){if(!document.body.contains(a))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const p=n.onAdd();a.appendChild(p)}if(o._controlContainer)o.addControl(this);else if(o instanceof HTMLElement)e(this,o);else if(typeof o=="string"){const n=document.querySelectorAll(o);if(n.length===0)throw new Error("Element ",o,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(o){if(o&&typeof o!="string"&&(this._map=o),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=ly(sy({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new lP(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",aP(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(L){this.eventManager.keyevent(L,this)}.bind(this));var a=document.createElement("div");a.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var p=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(p),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),a.appendChild(this._clearEl),a.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(a),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var _=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(_),a.appendChild(this._geolocateEl),this._showGeolocateButton()}var c=this._typeahead=new oP(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),c.getItemValue=this.options.getItemValue;var h=c.list.draw,I=this._footerNode=pP();return c.list.draw=function(){h.call(this),I.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),I.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(I)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(o){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[o.coords.longitude,o.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const a=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(a),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(n).send().then(function(a){const p=a.body.features[0];if(p){const _=dP.transformFeatureToGeolocationText(p,this.options.addressAccuracy);this._setInputValue(_),p.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:p})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(o){o.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(o,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+o),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=e,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(o){this._inputEl.value=o,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(o){var e=(o.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(o){var e=27,n=9;if(o.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(o),this._inputEl.blur();var a=o.target&&o.target.shadowRoot?o.target.shadowRoot.activeElement:o.target,p=a?a.value:"";if(!p)return this.fresh=!0,o.keyCode!==n&&this.clear(o),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(o.metaKey||[n,e,37,39,13,38,40].indexOf(o.keyCode)!==-1)&&a.value.length>=this.options.minLength&&this._geocode(a.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(o){this.options.clearOnBlur&&this._clearOnBlur(o),this.options.collapsed&&this._collapse()},_onChange:function(){var o=this._typeahead.selected;o&&JSON.stringify(o)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(o),this.options.marker&&this._mapboxgl&&this._handleMarker(o),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(o),this._eventEmitter.emit("result",{result:o}),this.eventManager.select(o,this))},_fly:function(o){var e;if(o.properties&&B0[o.properties.short_code])e=bd({},this.options.flyTo),this._map&&this._map.fitBounds(B0[o.properties.short_code].bbox,e);else if(o.bbox){var n=o.bbox;e=bd({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else{var a={zoom:this.options.zoom};e=bd({},a,this.options.flyTo),o.center?e.center=o.center:o.geometry&&o.geometry.type&&o.geometry.type==="Point"&&o.geometry.coordinates&&(e.center=o.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(o,e){var n;const a=/^[ ]*(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;return o.localGeocoderOnly?n=zh.LOCAL:o.reverseGeocode&&a.test(e)?n=zh.REVERSE:n=zh.FORWARD,n},_setupConfig:function(o,e){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],a=/[\s,]+/;var p=this,_=n.reduce(function(h,I){if(p.options[I]===void 0||p.options[I]===null)return h;["countries","types","language"].indexOf(I)>-1?h[I]=p.options[I].split(a):h[I]=p.options[I];const L=typeof p.options[I].longitude=="number"&&typeof p.options[I].latitude=="number";if(I==="proximity"&&L){const z=p.options[I].longitude,R=p.options[I].latitude;h[I]=[z,R]}return h},{});switch(o){case zh.REVERSE:{var c=e.split(a).map(function(h){return parseFloat(h,10)});p.options.flipCoordinates||c.reverse(),_.types&&_.types[0],_=bd(_,{query:c,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(h){h in _&&delete _[h]})}break;case zh.FORWARD:/^[ ]*(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)*[ ]*$/.test(e)&&(e=e.replace(/,/g," ")),_=bd(_,{query:e});break}return _},_geocode:function(o){this.inputString=o,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:o});const e=this._requestType(this.options,o),n=this._setupConfig(e,o);var a;switch(e){case zh.LOCAL:a=Promise.resolve();break;case zh.FORWARD:a=this.geocoderService.forwardGeocode(n).send();break;case zh.REVERSE:a=this.geocoderService.reverseGeocode(n).send();break}var p=this.options.localGeocoder?this.options.localGeocoder(o)||[]:[],_=[],c=null;return a.catch(function(h){c=h}.bind(this)).then(function(h){this._hideLoadingIcon();var I={};return h?h.statusCode=="200"&&(I=h.body,I.request=h.request,I.headers=h.headers):I={type:"FeatureCollection",features:[]},I.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),I.features=I.features?p.concat(I.features):p,this.options.externalGeocoder?(_=this.options.externalGeocoder(o,I.features)||Promise.resolve([]),_.then(function(L){return I.features=I.features?L.concat(I.features):L,I},function(){return I})):I}.bind(this)).then(function(h){if(c)throw c;this.options.filter&&h.features.length&&(h.features=h.features.filter(this.options.filter)),h.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",h),this._typeahead.update(h.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",h))}.bind(this)).catch(function(h){this._hideLoadingIcon(),this._hideAttribution(),p.length&&this.options.localGeocoder||_.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(p)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:p}),this._eventEmitter.emit("error",{error:h})}.bind(this)),a},_clear:function(o){o&&o.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(o){this._clear(o),this._inputEl.focus()},_clearOnBlur:function(o){var e=this;o.relatedTarget&&e._clear(o)},_onQueryResult:function(o){var e=o.body;if(!!e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var o=this._map.getCenter().wrap();this.setProximity({longitude:o.lng,latitude:o.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(o){return this._geocode(o).then(this._onQueryResult),this},_renderError:function(){var o="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(o)},_renderLocationError:function(){var o="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(o)},_renderNoResults:function(){var o="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(o)},_renderUserDeniedGeolocationError:function(){var o="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(o)},_renderMessage:function(o){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(o)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var o=this.options.language.split(",")[0],e=cP.language(o),n=uP.placeholder[e];if(n)return n}return"Search"},setInput:function(o){return this._inputEl.value=o,this._typeahead.selected=null,this._typeahead.clear(),o.length>=this.options.minLength&&this._geocode(o),this},setProximity:function(o,e=!0){return this.options.proximity=o,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(o){return o&&typeof o=="function"&&(this._typeahead.render=o),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(o){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=o||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(o){return this.options.zoom=o,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(o){return this.options.flyTo=o,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(o){return this.placeholder=o||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(o){return this.options.bbox=o,this},getCountries:function(){return this.options.countries},setCountries:function(o){return this.options.countries=o,this},getTypes:function(){return this.options.types},setTypes:function(o){return this.options.types=o,this},getMinLength:function(){return this.options.minLength},setMinLength:function(o){return this.options.minLength=o,this._typeahead&&(this._typeahead.options.minLength=o),this},getLimit:function(){return this.options.limit},setLimit:function(o){return this.options.limit=o,this._typeahead&&(this._typeahead.options.limit=o),this},getFilter:function(){return this.options.filter},setFilter:function(o){return this.options.filter=o,this},setOrigin:function(o){return this.options.origin=o,this.geocoderService=ly(sy({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(o){return this.options.accessToken=o,this.geocoderService=ly(sy({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(o){return this.options.autocomplete=o,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(o){return this.options.fuzzyMatch=o,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(o){return this.options.routing=o,this},getRouting:function(){return this.options.routing},setWorldview:function(o){return this.options.worldview=o,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(o){if(!!this._map){this._removeMarker();var e={color:"#4668F2"},n=bd({},e,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),o.center?this.mapMarker.setLngLat(o.center).addTo(this._map):o.geometry&&o.geometry.type&&o.geometry.type==="Point"&&o.geometry.coordinates&&this.mapMarker.setLngLat(o.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(o,e){return this._eventEmitter.on(o,e),this},off:function(o,e){return this._eventEmitter.removeListener(o,e),this.eventManager.remove(),this}};var fP=yb,_b={},u_={},c_={},Wm={},h_={exports:{}},vb=function(e,n){return function(){for(var p=new Array(arguments.length),_=0;_<p.length;_++)p[_]=arguments[_];return e.apply(n,p)}},mP=vb,Md=Object.prototype.toString;function d_(o){return Md.call(o)==="[object Array]"}function Ay(o){return typeof o=="undefined"}function gP(o){return o!==null&&!Ay(o)&&o.constructor!==null&&!Ay(o.constructor)&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function yP(o){return Md.call(o)==="[object ArrayBuffer]"}function _P(o){return typeof FormData!="undefined"&&o instanceof FormData}function vP(o){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(o):e=o&&o.buffer&&o.buffer instanceof ArrayBuffer,e}function bP(o){return typeof o=="string"}function xP(o){return typeof o=="number"}function bb(o){return o!==null&&typeof o=="object"}function bm(o){if(Md.call(o)!=="[object Object]")return!1;var e=Object.getPrototypeOf(o);return e===null||e===Object.prototype}function wP(o){return Md.call(o)==="[object Date]"}function EP(o){return Md.call(o)==="[object File]"}function IP(o){return Md.call(o)==="[object Blob]"}function xb(o){return Md.call(o)==="[object Function]"}function SP(o){return bb(o)&&xb(o.pipe)}function TP(o){return typeof URLSearchParams!="undefined"&&o instanceof URLSearchParams}function AP(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function CP(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function p_(o,e){if(!(o===null||typeof o=="undefined"))if(typeof o!="object"&&(o=[o]),d_(o))for(var n=0,a=o.length;n<a;n++)e.call(null,o[n],n,o);else for(var p in o)Object.prototype.hasOwnProperty.call(o,p)&&e.call(null,o[p],p,o)}function Cy(){var o={};function e(p,_){bm(o[_])&&bm(p)?o[_]=Cy(o[_],p):bm(p)?o[_]=Cy({},p):d_(p)?o[_]=p.slice():o[_]=p}for(var n=0,a=arguments.length;n<a;n++)p_(arguments[n],e);return o}function kP(o,e,n){return p_(e,function(p,_){n&&typeof p=="function"?o[_]=mP(p,n):o[_]=p}),o}function MP(o){return o.charCodeAt(0)===65279&&(o=o.slice(1)),o}var Ml={isArray:d_,isArrayBuffer:yP,isBuffer:gP,isFormData:_P,isArrayBufferView:vP,isString:bP,isNumber:xP,isObject:bb,isPlainObject:bm,isUndefined:Ay,isDate:wP,isFile:EP,isBlob:IP,isFunction:xb,isStream:SP,isURLSearchParams:TP,isStandardBrowserEnv:CP,forEach:p_,merge:Cy,extend:kP,trim:AP,stripBOM:MP},ap=Ml;function F0(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var wb=function(e,n,a){if(!n)return e;var p;if(a)p=a(n);else if(ap.isURLSearchParams(n))p=n.toString();else{var _=[];ap.forEach(n,function(I,L){I===null||typeof I=="undefined"||(ap.isArray(I)?L=L+"[]":I=[I],ap.forEach(I,function(R){ap.isDate(R)?R=R.toISOString():ap.isObject(R)&&(R=JSON.stringify(R)),_.push(F0(L)+"="+F0(R))}))}),p=_.join("&")}if(p){var c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e},PP=Ml;function Xm(){this.handlers=[]}Xm.prototype.use=function(e,n,a){return this.handlers.push({fulfilled:e,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Xm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Xm.prototype.forEach=function(e){PP.forEach(this.handlers,function(a){a!==null&&e(a)})};var LP=Xm,zP=Ml,DP=function(e,n){zP.forEach(e,function(p,_){_!==n&&_.toUpperCase()===n.toUpperCase()&&(e[n]=p,delete e[_])})},Eb=function(e,n,a,p,_){return e.config=n,a&&(e.code=a),e.request=p,e.response=_,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},RP=Eb,Ib=function(e,n,a,p,_){var c=new Error(e);return RP(c,n,a,p,_)},OP=Ib,BP=function(e,n,a){var p=a.config.validateStatus;!a.status||!p||p(a.status)?e(a):n(OP("Request failed with status code "+a.status,a.config,null,a.request,a))},fm=Ml,FP=fm.isStandardBrowserEnv()?function(){return{write:function(n,a,p,_,c,h){var I=[];I.push(n+"="+encodeURIComponent(a)),fm.isNumber(p)&&I.push("expires="+new Date(p).toGMTString()),fm.isString(_)&&I.push("path="+_),fm.isString(c)&&I.push("domain="+c),h===!0&&I.push("secure"),document.cookie=I.join("; ")},read:function(n){var a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),UP=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},NP=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},VP=UP,jP=NP,qP=function(e,n){return e&&!VP(n)?jP(e,n):n},uy=Ml,GP=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],HP=function(e){var n={},a,p,_;return e&&uy.forEach(e.split(`
`),function(h){if(_=h.indexOf(":"),a=uy.trim(h.substr(0,_)).toLowerCase(),p=uy.trim(h.substr(_+1)),a){if(n[a]&&GP.indexOf(a)>=0)return;a==="set-cookie"?n[a]=(n[a]?n[a]:[]).concat([p]):n[a]=n[a]?n[a]+", "+p:p}}),n},U0=Ml,ZP=U0.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),a;function p(_){var c=_;return e&&(n.setAttribute("href",c),c=n.href),n.setAttribute("href",c),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return a=p(window.location.href),function(c){var h=U0.isString(c)?p(c):c;return h.protocol===a.protocol&&h.host===a.host}}():function(){return function(){return!0}}(),mm=Ml,WP=BP,XP=FP,KP=wb,JP=qP,YP=HP,QP=ZP,cy=Ib,N0=function(e){return new Promise(function(a,p){var _=e.data,c=e.headers,h=e.responseType;mm.isFormData(_)&&delete c["Content-Type"];var I=new XMLHttpRequest;if(e.auth){var L=e.auth.username||"",z=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.Authorization="Basic "+btoa(L+":"+z)}var R=JP(e.baseURL,e.url);I.open(e.method.toUpperCase(),KP(R,e.params,e.paramsSerializer),!0),I.timeout=e.timeout;function O(){if(!!I){var ee="getAllResponseHeaders"in I?YP(I.getAllResponseHeaders()):null,ue=!h||h==="text"||h==="json"?I.responseText:I.response,te={data:ue,status:I.status,statusText:I.statusText,headers:ee,config:e,request:I};WP(a,p,te),I=null}}if("onloadend"in I?I.onloadend=O:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(O)},I.onabort=function(){!I||(p(cy("Request aborted",e,"ECONNABORTED",I)),I=null)},I.onerror=function(){p(cy("Network Error",e,null,I)),I=null},I.ontimeout=function(){var ue="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(ue=e.timeoutErrorMessage),p(cy(ue,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",I)),I=null},mm.isStandardBrowserEnv()){var Y=(e.withCredentials||QP(R))&&e.xsrfCookieName?XP.read(e.xsrfCookieName):void 0;Y&&(c[e.xsrfHeaderName]=Y)}"setRequestHeader"in I&&mm.forEach(c,function(ue,te){typeof _=="undefined"&&te.toLowerCase()==="content-type"?delete c[te]:I.setRequestHeader(te,ue)}),mm.isUndefined(e.withCredentials)||(I.withCredentials=!!e.withCredentials),h&&h!=="json"&&(I.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&I.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(ue){!I||(I.abort(),p(ue),I=null)}),_||(_=null),I.send(_)})},ts=Ml,V0=DP,$P=Eb,eL={"Content-Type":"application/x-www-form-urlencoded"};function j0(o,e){!ts.isUndefined(o)&&ts.isUndefined(o["Content-Type"])&&(o["Content-Type"]=e)}function tL(){var o;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(o=N0),o}function iL(o,e,n){if(ts.isString(o))try{return(e||JSON.parse)(o),ts.trim(o)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(o)}var Km={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:tL(),transformRequest:[function(e,n){return V0(n,"Accept"),V0(n,"Content-Type"),ts.isFormData(e)||ts.isArrayBuffer(e)||ts.isBuffer(e)||ts.isStream(e)||ts.isFile(e)||ts.isBlob(e)?e:ts.isArrayBufferView(e)?e.buffer:ts.isURLSearchParams(e)?(j0(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ts.isObject(e)||n&&n["Content-Type"]==="application/json"?(j0(n,"application/json"),iL(e)):e}],transformResponse:[function(e){var n=this.transitional,a=n&&n.silentJSONParsing,p=n&&n.forcedJSONParsing,_=!a&&this.responseType==="json";if(_||p&&ts.isString(e)&&e.length)try{return JSON.parse(e)}catch(c){if(_)throw c.name==="SyntaxError"?$P(c,this,"E_JSON_PARSE"):c}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Km.headers={common:{Accept:"application/json, text/plain, */*"}};ts.forEach(["delete","get","head"],function(e){Km.headers[e]={}});ts.forEach(["post","put","patch"],function(e){Km.headers[e]=ts.merge(eL)});var f_=Km,nL=Ml,rL=f_,oL=function(e,n,a){var p=this||rL;return nL.forEach(a,function(c){e=c.call(p,e,n)}),e},Sb=function(e){return!!(e&&e.__CANCEL__)},q0=Ml,hy=oL,aL=Sb,sL=f_;function dy(o){o.cancelToken&&o.cancelToken.throwIfRequested()}var lL=function(e){dy(e),e.headers=e.headers||{},e.data=hy.call(e,e.data,e.headers,e.transformRequest),e.headers=q0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),q0.forEach(["delete","get","head","post","put","patch","common"],function(p){delete e.headers[p]});var n=e.adapter||sL.adapter;return n(e).then(function(p){return dy(e),p.data=hy.call(e,p.data,p.headers,e.transformResponse),p},function(p){return aL(p)||(dy(e),p&&p.response&&(p.response.data=hy.call(e,p.response.data,p.response.headers,e.transformResponse))),Promise.reject(p)})},ys=Ml,Tb=function(e,n){n=n||{};var a={},p=["url","method","data"],_=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function I(O,Y){return ys.isPlainObject(O)&&ys.isPlainObject(Y)?ys.merge(O,Y):ys.isPlainObject(Y)?ys.merge({},Y):ys.isArray(Y)?Y.slice():Y}function L(O){ys.isUndefined(n[O])?ys.isUndefined(e[O])||(a[O]=I(void 0,e[O])):a[O]=I(e[O],n[O])}ys.forEach(p,function(Y){ys.isUndefined(n[Y])||(a[Y]=I(void 0,n[Y]))}),ys.forEach(_,L),ys.forEach(c,function(Y){ys.isUndefined(n[Y])?ys.isUndefined(e[Y])||(a[Y]=I(void 0,e[Y])):a[Y]=I(void 0,n[Y])}),ys.forEach(h,function(Y){Y in n?a[Y]=I(e[Y],n[Y]):Y in e&&(a[Y]=I(void 0,e[Y]))});var z=p.concat(_).concat(c).concat(h),R=Object.keys(e).concat(Object.keys(n)).filter(function(Y){return z.indexOf(Y)===-1});return ys.forEach(R,L),a};const uL="axios",cL="0.21.4",hL="Promise based HTTP client for the browser and node.js",dL="index.js",pL={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},fL={type:"git",url:"https://github.com/axios/axios.git"},mL=["xhr","http","ajax","promise","node"],gL="Matt Zabriskie",yL="MIT",_L={url:"https://github.com/axios/axios/issues"},vL="https://axios-http.com",bL={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},xL={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},wL="dist/axios.min.js",EL="dist/axios.min.js",IL="./index.d.ts",SL={"follow-redirects":"^1.14.0"},TL=[{path:"./dist/axios.min.js",threshold:"5kB"}];var AL={name:uL,version:cL,description:hL,main:dL,scripts:pL,repository:fL,keywords:mL,author:gL,license:yL,bugs:_L,homepage:vL,devDependencies:bL,browser:xL,jsdelivr:wL,unpkg:EL,typings:IL,dependencies:SL,bundlesize:TL},Ab=AL,m_={};["object","boolean","number","function","string","symbol"].forEach(function(o,e){m_[o]=function(a){return typeof a===o||"a"+(e<1?"n ":" ")+o}});var G0={},CL=Ab.version.split(".");function Cb(o,e){for(var n=e?e.split("."):CL,a=o.split("."),p=0;p<3;p++){if(n[p]>a[p])return!0;if(n[p]<a[p])return!1}return!1}m_.transitional=function(e,n,a){var p=n&&Cb(n);function _(c,h){return"[Axios v"+Ab.version+"] Transitional option '"+c+"'"+h+(a?". "+a:"")}return function(c,h,I){if(e===!1)throw new Error(_(h," has been removed in "+n));return p&&!G0[h]&&(G0[h]=!0,console.warn(_(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(c,h,I):!0}};function kL(o,e,n){if(typeof o!="object")throw new TypeError("options must be an object");for(var a=Object.keys(o),p=a.length;p-- >0;){var _=a[p],c=e[_];if(c){var h=o[_],I=h===void 0||c(h,_,o);if(I!==!0)throw new TypeError("option "+_+" must be "+I);continue}if(n!==!0)throw Error("Unknown option "+_)}}var ML={isOlderVersion:Cb,assertOptions:kL,validators:m_},kb=Ml,PL=wb,H0=LP,Z0=lL,Jm=Tb,Mb=ML,sp=Mb.validators;function Ef(o){this.defaults=o,this.interceptors={request:new H0,response:new H0}}Ef.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Jm(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;n!==void 0&&Mb.assertOptions(n,{silentJSONParsing:sp.transitional(sp.boolean,"1.0.0"),forcedJSONParsing:sp.transitional(sp.boolean,"1.0.0"),clarifyTimeoutError:sp.transitional(sp.boolean,"1.0.0")},!1);var a=[],p=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(e)===!1||(p=p&&O.synchronous,a.unshift(O.fulfilled,O.rejected))});var _=[];this.interceptors.response.forEach(function(O){_.push(O.fulfilled,O.rejected)});var c;if(!p){var h=[Z0,void 0];for(Array.prototype.unshift.apply(h,a),h=h.concat(_),c=Promise.resolve(e);h.length;)c=c.then(h.shift(),h.shift());return c}for(var I=e;a.length;){var L=a.shift(),z=a.shift();try{I=L(I)}catch(R){z(R);break}}try{c=Z0(I)}catch(R){return Promise.reject(R)}for(;_.length;)c=c.then(_.shift(),_.shift());return c};Ef.prototype.getUri=function(e){return e=Jm(this.defaults,e),PL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};kb.forEach(["delete","get","head","options"],function(e){Ef.prototype[e]=function(n,a){return this.request(Jm(a||{},{method:e,url:n,data:(a||{}).data}))}});kb.forEach(["post","put","patch"],function(e){Ef.prototype[e]=function(n,a,p){return this.request(Jm(p||{},{method:e,url:n,data:a}))}});var LL=Ef;function g_(o){this.message=o}g_.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};g_.prototype.__CANCEL__=!0;var Pb=g_,zL=Pb;function Mm(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(p){e=p});var n=this;o(function(p){n.reason||(n.reason=new zL(p),e(n.reason))})}Mm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mm.source=function(){var e,n=new Mm(function(p){e=p});return{token:n,cancel:e}};var DL=Mm,RL=function(e){return function(a){return e.apply(null,a)}},OL=function(e){return typeof e=="object"&&e.isAxiosError===!0},W0=Ml,BL=vb,xm=LL,FL=Tb,UL=f_;function Lb(o){var e=new xm(o),n=BL(xm.prototype.request,e);return W0.extend(n,xm.prototype,e),W0.extend(n,e),n}var Nu=Lb(UL);Nu.Axios=xm;Nu.create=function(e){return Lb(FL(Nu.defaults,e))};Nu.Cancel=Pb;Nu.CancelToken=DL;Nu.isCancel=Sb;Nu.all=function(e){return Promise.all(e)};Nu.spread=RL;Nu.isAxiosError=OL;h_.exports=Nu;h_.exports.default=Nu;var NL=h_.exports,zb={exports:{}};(function(o,e){(function(n,a){o.exports=a()})(Yl,function(){var n,a,p;function _(c,h){if(!n)n=h;else if(!a)a=h;else{var I="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",L={};n(L),p=h(L),typeof window!="undefined"&&(p.workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"})))}}return _(["exports"],function(c){function h(t,s){return t(s={exports:{}},s.exports),s.exports}var I=L;function L(t,s,d,x){this.cx=3*t,this.bx=3*(d-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(x-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=x,this.p2x=d,this.p2y=x}L.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},L.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},L.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},L.prototype.solveCurveX=function(t,s){var d,x,S,M,r;for(s===void 0&&(s=1e-6),S=t,r=0;r<8;r++){if(M=this.sampleCurveX(S)-t,Math.abs(M)<s)return S;var i=this.sampleCurveDerivativeX(S);if(Math.abs(i)<1e-6)break;S-=M/i}if((S=t)<(d=0))return d;if(S>(x=1))return x;for(;d<x;){if(M=this.sampleCurveX(S),Math.abs(M-t)<s)return S;t>M?d=S:x=S,S=.5*(x-d)+d}return S},L.prototype.solve=function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))};var z=R;function R(t,s){this.x=t,this.y=s}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,s){return this.clone()._rotateAround(t,s)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var s=t.x-this.x,d=t.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,s){return Math.atan2(this.x*s-this.y*t,this.x*t+this.y*s)},_matMult:function(t){var s=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=s,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var s=Math.cos(t),d=Math.sin(t),x=d*this.x+s*this.y;return this.x=s*this.x-d*this.y,this.y=x,this},_rotateAround:function(t,s){var d=Math.cos(t),x=Math.sin(t),S=s.y+x*(this.x-s.x)+d*(this.y-s.y);return this.x=s.x+d*(this.x-s.x)-x*(this.y-s.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},R.convert=function(t){return t instanceof R?t:Array.isArray(t)?new R(t[0],t[1]):t};var O=typeof self!="undefined"?self:{},Y=Math.pow(2,53)-1;function ee(t,s,d,x){var S=new I(t,s,d,x);return function(M){return S.solve(M)}}var ue=ee(.25,.1,.25,1);function te(t,s,d){return Math.min(d,Math.max(s,t))}function de(t,s,d){var x=d-s,S=((t-s)%x+x)%x+s;return S===s?d:S}function oe(t){for(var s=[],d=arguments.length-1;d-- >0;)s[d]=arguments[d+1];for(var x=0,S=s;x<S.length;x+=1){var M=S[x];for(var r in M)t[r]=M[r]}return t}var be=1;function qe(){return be++}function Ne(){return function t(s){return s?(s^16*Math.random()>>s/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function De(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function fe(t,s){t.forEach(function(d){s[d]&&(s[d]=s[d].bind(s))})}function ct(t,s){return t.indexOf(s,t.length-s.length)!==-1}function st(t,s,d){var x={};for(var S in t)x[S]=s.call(d||this,t[S],S,t);return x}function Ge(t,s,d){var x={};for(var S in t)s.call(d||this,t[S],S,t)&&(x[S]=t[S]);return x}function Ue(t){return Array.isArray(t)?t.map(Ue):typeof t=="object"&&t?st(t,Ue):t}var Rt={};function He(t){Rt[t]||(typeof console!="undefined"&&console.warn(t),Rt[t]=!0)}function Mt(t,s,d){return(d.y-t.y)*(s.x-t.x)>(s.y-t.y)*(d.x-t.x)}function li(t){for(var s=0,d=0,x=t.length,S=x-1,M=void 0,r=void 0;d<x;S=d++)s+=((r=t[S]).x-(M=t[d]).x)*(M.y+r.y);return s}function Et(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Gt(t){var s={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(x,S,M,r){var i=M||r;return s[S]=!i||i.toLowerCase(),""}),s["max-age"]){var d=parseInt(s["max-age"],10);isNaN(d)?delete s["max-age"]:s["max-age"]=d}return s}var Ye=null;function wt(t){if(Ye==null){var s=t.navigator?t.navigator.userAgent:null;Ye=!!t.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ye}function Lt(t){try{var s=O[t];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}}var ni,Xt,Ki,ei,Jt=O.performance&&O.performance.now?O.performance.now.bind(O.performance):Date.now.bind(Date),xi=O.requestAnimationFrame||O.mozRequestAnimationFrame||O.webkitRequestAnimationFrame||O.msRequestAnimationFrame,ai=O.cancelAnimationFrame||O.mozCancelAnimationFrame||O.webkitCancelAnimationFrame||O.msCancelAnimationFrame,dt={now:Jt,frame:function(t){var s=xi(t);return{cancel:function(){return ai(s)}}},getImageData:function(t,s){s===void 0&&(s=0);var d=O.document.createElement("canvas"),x=d.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return d.width=t.width,d.height=t.height,x.drawImage(t,0,0,t.width,t.height),x.getImageData(-s,-s,t.width+2*s,t.height+2*s)},resolveURL:function(t){return ni||(ni=O.document.createElement("a")),ni.href=t,ni.href},hardwareConcurrency:O.navigator&&O.navigator.hardwareConcurrency||4,get devicePixelRatio(){return O.devicePixelRatio},get prefersReducedMotion(){return!!O.matchMedia&&(Xt==null&&(Xt=O.matchMedia("(prefers-reduced-motion: reduce)")),Xt.matches)}},It={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},St={supported:!1,testSupport:function(t){!Yi&&ei&&(Qt?gt(t):Ki=t)}},Yi=!1,Qt=!1;function gt(t){var s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,ei),t.isContextLost())return;St.supported=!0}catch{}t.deleteTexture(s),Yi=!0}O.document&&((ei=O.document.createElement("img")).onload=function(){Ki&&gt(Ki),Ki=null,Qt=!0},ei.onerror=function(){Yi=!0,Ki=null},ei.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Oi="01",ln=function(t,s){this._transformRequestFn=t,this._customAccessToken=s,this._createSkuToken()};function Cn(t){return t.indexOf("mapbox:")===0}ln.prototype._createSkuToken=function(){var t=function(){for(var s="",d=0;d<10;d++)s+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Oi,s].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},ln.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ln.prototype.transformRequest=function(t,s){return this._transformRequestFn&&this._transformRequestFn(t,s)||{url:t}},ln.prototype.normalizeStyleURL=function(t,s){if(!Cn(t))return t;var d=At(t);return d.path="/styles/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||s)},ln.prototype.normalizeGlyphsURL=function(t,s){if(!Cn(t))return t;var d=At(t);return d.path="/fonts/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||s)},ln.prototype.normalizeSourceURL=function(t,s){if(!Cn(t))return t;var d=At(t);return d.path="/v4/"+d.authority+".json",d.params.push("secure"),this._makeAPIURL(d,this._customAccessToken||s)},ln.prototype.normalizeSpriteURL=function(t,s,d,x){var S=At(t);return Cn(t)?(S.path="/styles/v1"+S.path+"/sprite"+s+d,this._makeAPIURL(S,this._customAccessToken||x)):(S.path+=""+s+d,Ni(S))},ln.prototype.normalizeTileURL=function(t,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Cn(t))return t;var d=At(t);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,(dt.devicePixelRatio>=2||s===512?"@2x":"")+(St.supported?".webp":"$1")),d.path=d.path.replace(/^.+\/v4\//,"/"),d.path="/v4"+d.path;var x=this._customAccessToken||function(S){for(var M=0,r=S;M<r.length;M+=1){var i=r[M].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(d.params)||It.ACCESS_TOKEN;return It.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&d.params.push("sku="+this._skuToken),this._makeAPIURL(d,x)},ln.prototype.canonicalizeTileURL=function(t,s){var d=At(t);if(!d.path.match(/(^\/v4\/)/)||!d.path.match(/\.[\w]+$/))return t;var x="mapbox://tiles/";x+=d.path.replace("/v4/","");var S=d.params;return s&&(S=S.filter(function(M){return!M.match(/^access_token=/)})),S.length&&(x+="?"+S.join("&")),x},ln.prototype.canonicalizeTileset=function(t,s){for(var d=!!s&&Cn(s),x=[],S=0,M=t.tiles||[];S<M.length;S+=1){var r=M[S];Nr(r)?x.push(this.canonicalizeTileURL(r,d)):x.push(r)}return x},ln.prototype._makeAPIURL=function(t,s){var d="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=At(It.API_URL);if(t.protocol=x.protocol,t.authority=x.authority,t.protocol==="http"){var S=t.params.indexOf("secure");S>=0&&t.params.splice(S,1)}if(x.path!=="/"&&(t.path=""+x.path+t.path),!It.REQUIRE_ACCESS_TOKEN)return Ni(t);if(!(s=s||It.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+d);if(s[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+d);return t.params=t.params.filter(function(M){return M.indexOf("access_token")===-1}),t.params.push("access_token="+s),Ni(t)};var Zn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Nr(t){return Zn.test(t)}var Kr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function At(t){var s=t.match(Kr);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function Ni(t){var s=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+s}function jn(t){if(!t)return null;var s=t.split(".");if(!s||s.length!==3)return null;try{return JSON.parse(decodeURIComponent(O.atob(s[1]).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var rn=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};rn.prototype.getStorageKey=function(t){var s,d=jn(It.ACCESS_TOKEN);return s=d&&d.u?O.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,function(x,S){return String.fromCharCode(Number("0x"+S))})):It.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+s:"mapbox.eventData:"+s},rn.prototype.fetchEventData=function(){var t=Lt("localStorage"),s=this.getStorageKey(),d=this.getStorageKey("uuid");if(t)try{var x=O.localStorage.getItem(s);x&&(this.eventData=JSON.parse(x));var S=O.localStorage.getItem(d);S&&(this.anonId=S)}catch{He("Unable to read from LocalStorage")}},rn.prototype.saveEventData=function(){var t=Lt("localStorage"),s=this.getStorageKey(),d=this.getStorageKey("uuid");if(t)try{O.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&O.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{He("Unable to write to LocalStorage")}},rn.prototype.processRequests=function(t){},rn.prototype.postEvent=function(t,s,d,x){var S=this;if(It.EVENTS_URL){var M=At(It.EVENTS_URL);M.params.push("access_token="+(x||It.ACCESS_TOKEN||""));var r={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Oi,userId:this.anonId},i=s?oe(r,s):r,u={url:Ni(M),headers:{"Content-Type":"text/plain"},body:JSON.stringify([i])};this.pendingRequest=wr(u,function(m){S.pendingRequest=null,d(m),S.saveEventData(),S.processRequests(x)})}},rn.prototype.queueRequest=function(t,s){this.queue.push(t),this.processRequests(s)};var $n,Ln,zt=function(t){function s(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.postMapLoadEvent=function(d,x,S,M){this.skuToken=S,(It.EVENTS_URL&&M||It.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(r){return Cn(r)||Nr(r)}))&&this.queueRequest({id:x,timestamp:Date.now()},M)},s.prototype.processRequests=function(d){var x=this;if(!this.pendingRequest&&this.queue.length!==0){var S=this.queue.shift(),M=S.id,r=S.timestamp;M&&this.success[M]||(this.anonId||this.fetchEventData(),De(this.anonId)||(this.anonId=Ne()),this.postEvent(r,{skuToken:this.skuToken},function(i){i||M&&(x.success[M]=!0)},d))}},s}(rn),Ui=new(function(t){function s(d){t.call(this,"appUserTurnstile"),this._customAccessToken=d}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.postTurnstileEvent=function(d,x){It.EVENTS_URL&&It.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(S){return Cn(S)||Nr(S)})&&this.queueRequest(Date.now(),x)},s.prototype.processRequests=function(d){var x=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var S=jn(It.ACCESS_TOKEN),M=S?S.u:It.ACCESS_TOKEN,r=M!==this.eventData.tokenU;De(this.anonId)||(this.anonId=Ne(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var u=new Date(this.eventData.lastSuccess),m=new Date(i),b=(i-this.eventData.lastSuccess)/864e5;r=r||b>=1||b<-1||u.getDate()!==m.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(E){E||(x.eventData.lastSuccess=i,x.eventData.tokenU=M)},d)}},s}(rn)),Ze=Ui.postTurnstileEvent.bind(Ui),Ft=new zt,Ji=Ft.postMapLoadEvent.bind(Ft),Gn=500,Wn=50;function _o(){O.caches&&!$n&&($n=O.caches.open("mapbox-tiles"))}function vo(t){var s=t.indexOf("?");return s<0?t:t.slice(0,s)}var la,kr=1/0;function vi(){return la==null&&(la=O.OffscreenCanvas&&new O.OffscreenCanvas(1,1).getContext("2d")&&typeof O.createImageBitmap=="function"),la}var Un={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Un);var In=function(t){function s(d,x,S){x===401&&Nr(S)&&(d+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,d),this.status=x,this.url=S,this.name=this.constructor.name,this.message=d}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},s}(Error),ro=Et()?function(){return self.worker&&self.worker.referrer}:function(){return(O.location.protocol==="blob:"?O.parent:O).location.href},ho,yn,ua=function(t,s){if(!(/^file:/.test(d=t.url)||/^file:/.test(ro())&&!/^\w+:/.test(d))){if(O.fetch&&O.Request&&O.AbortController&&O.Request.prototype.hasOwnProperty("signal"))return function(x,S){var M,r=new O.AbortController,i=new O.Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,referrer:ro(),signal:r.signal}),u=!1,m=!1,b=(M=i.url).indexOf("sku=")>0&&Nr(M);x.type==="json"&&i.headers.set("Accept","application/json");var E=function(D,U,V){if(!m){if(D&&D.message!=="SecurityError"&&He(D),U&&V)return T(U);var G=Date.now();O.fetch(i).then(function(q){if(q.ok){var K=b?q.clone():null;return T(q,K,G)}return S(new In(q.statusText,q.status,x.url))}).catch(function(q){q.code!==20&&S(new Error(q.message))})}},T=function(D,U,V){(x.type==="arrayBuffer"?D.arrayBuffer():x.type==="json"?D.json():D.text()).then(function(G){m||(U&&V&&function(q,K,$){if(_o(),$n){var ie={status:K.status,statusText:K.statusText,headers:new O.Headers};K.headers.forEach(function(ve,Be){return ie.headers.set(Be,ve)});var pe=Gt(K.headers.get("Cache-Control")||"");pe["no-store"]||(pe["max-age"]&&ie.headers.set("Expires",new Date($+1e3*pe["max-age"]).toUTCString()),new Date(ie.headers.get("Expires")).getTime()-$<42e4||function(ve,Be){if(Ln===void 0)try{new Response(new ReadableStream),Ln=!0}catch{Ln=!1}Ln?Be(ve.body):ve.blob().then(Be)}(K,function(ve){var Be=new O.Response(ve,ie);_o(),$n&&$n.then(function(Qe){return Qe.put(vo(q.url),Be)}).catch(function(Qe){return He(Qe.message)})}))}}(i,U,V),u=!0,S(null,G,D.headers.get("Cache-Control"),D.headers.get("Expires")))}).catch(function(G){m||S(new Error(G.message))})};return b?function(D,U){if(_o(),!$n)return U(null);var V=vo(D.url);$n.then(function(G){G.match(V).then(function(q){var K=function($){if(!$)return!1;var ie=new Date($.headers.get("Expires")||0),pe=Gt($.headers.get("Cache-Control")||"");return ie>Date.now()&&!pe["no-cache"]}(q);G.delete(V),K&&G.put(V,q.clone()),U(null,q,K)}).catch(U)}).catch(U)}(i,E):E(null,null),{cancel:function(){m=!0,u||r.abort()}}}(t,s);if(Et()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,s,void 0,!0)}var d;return function(x,S){var M=new O.XMLHttpRequest;for(var r in M.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(M.responseType="arraybuffer"),x.headers)M.setRequestHeader(r,x.headers[r]);return x.type==="json"&&(M.responseType="text",M.setRequestHeader("Accept","application/json")),M.withCredentials=x.credentials==="include",M.onerror=function(){S(new Error(M.statusText))},M.onload=function(){if((M.status>=200&&M.status<300||M.status===0)&&M.response!==null){var i=M.response;if(x.type==="json")try{i=JSON.parse(M.response)}catch(u){return S(u)}S(null,i,M.getResponseHeader("Cache-Control"),M.getResponseHeader("Expires"))}else S(new In(M.statusText,M.status,x.url))},M.send(x.body),{cancel:function(){return M.abort()}}}(t,s)},To=function(t,s){return ua(oe(t,{type:"arrayBuffer"}),s)},wr=function(t,s){return ua(oe(t,{method:"POST"}),s)},re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ho=[],yn=0;var ce=function(t,s){if(St.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),yn>=It.MAX_PARALLEL_IMAGE_REQUESTS){var d={requestParameters:t,callback:s,cancelled:!1,cancel:function(){this.cancelled=!0}};return ho.push(d),d}yn++;var x=!1,S=function(){if(!x)for(x=!0,yn--;ho.length&&yn<It.MAX_PARALLEL_IMAGE_REQUESTS;){var r=ho.shift();r.cancelled||(r.cancel=ce(r.requestParameters,r.callback).cancel)}},M=To(t,function(r,i,u,m){S(),r?s(r):i&&(vi()?function(b,E){var T=new O.Blob([new Uint8Array(b)],{type:"image/png"});O.createImageBitmap(T).then(function(D){E(null,D)}).catch(function(D){E(new Error("Could not load image because of "+D.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(i,s):function(b,E,T,D){var U=new O.Image,V=O.URL;U.onload=function(){E(null,U),V.revokeObjectURL(U.src),U.onload=null,O.requestAnimationFrame(function(){U.src=re})},U.onerror=function(){return E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var G=new O.Blob([new Uint8Array(b)],{type:"image/png"});U.cacheControl=T,U.expires=D,U.src=b.byteLength?V.createObjectURL(G):re}(i,s,u,m))});return{cancel:function(){M.cancel(),S()}}};function me(t,s,d){d[t]&&d[t].indexOf(s)!==-1||(d[t]=d[t]||[],d[t].push(s))}function Se(t,s,d){if(d&&d[t]){var x=d[t].indexOf(s);x!==-1&&d[t].splice(x,1)}}var ze=function(t,s){s===void 0&&(s={}),oe(this,s),this.type=t},$e=function(t){function s(d,x){x===void 0&&(x={}),t.call(this,"error",oe({error:d},x))}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s}(ze),it=function(){};it.prototype.on=function(t,s){return this._listeners=this._listeners||{},me(t,s,this._listeners),this},it.prototype.off=function(t,s){return Se(t,s,this._listeners),Se(t,s,this._oneTimeListeners),this},it.prototype.once=function(t,s){return this._oneTimeListeners=this._oneTimeListeners||{},me(t,s,this._oneTimeListeners),this},it.prototype.fire=function(t,s){typeof t=="string"&&(t=new ze(t,s||{}));var d=t.type;if(this.listens(d)){t.target=this;for(var x=0,S=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];x<S.length;x+=1)S[x].call(this,t);for(var M=0,r=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];M<r.length;M+=1){var i=r[M];Se(d,i,this._oneTimeListeners),i.call(this,t)}var u=this._eventedParent;u&&(oe(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof $e&&console.error(t.error);return this},it.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},it.prototype.setEventedParent=function(t,s){return this._eventedParent=t,this._eventedParentData=s,this};var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ve=function(t,s,d,x){this.message=(t?t+": ":"")+d,x&&(this.identifier=x),s!=null&&s.__line__&&(this.line=s.__line__)};function mt(t){var s=t.value;return s?[new Ve(t.key,s,"constants have been deprecated as of v8")]:[]}function he(t){for(var s=[],d=arguments.length-1;d-- >0;)s[d]=arguments[d+1];for(var x=0,S=s;x<S.length;x+=1){var M=S[x];for(var r in M)t[r]=M[r]}return t}function W(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function X(t){if(Array.isArray(t))return t.map(X);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var s={};for(var d in t)s[d]=X(t[d]);return s}return W(t)}var le=function(t){function s(d,x){t.call(this,x),this.message=x,this.key=d}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s}(Error),ge=function(t,s){s===void 0&&(s=[]),this.parent=t,this.bindings={};for(var d=0,x=s;d<x.length;d+=1){var S=x[d];this.bindings[S[0]]=S[1]}};ge.prototype.concat=function(t){return new ge(this,t)},ge.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},ge.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Te={kind:"null"},we={kind:"number"},Pe={kind:"string"},Me={kind:"boolean"},Le={kind:"color"},yt={kind:"object"},lt={kind:"value"},_t={kind:"collator"},si={kind:"formatted"},Re={kind:"resolvedImage"};function Yt(t,s){return{kind:"array",itemType:t,N:s}}function di(t){if(t.kind==="array"){var s=di(t.itemType);return typeof t.N=="number"?"array<"+s+", "+t.N+">":t.itemType.kind==="value"?"array":"array<"+s+">"}return t.kind}var kn=[Te,we,Pe,Me,Le,si,yt,Yt(lt),Re];function Xi(t,s){if(s.kind==="error")return null;if(t.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Xi(t.itemType,s.itemType))&&(typeof t.N!="number"||t.N===s.N))return null}else{if(t.kind===s.kind)return null;if(t.kind==="value"){for(var d=0,x=kn;d<x.length;d+=1)if(!Xi(x[d],s))return null}}return"Expected "+di(t)+" but found "+di(s)+" instead."}function nn(t,s){return s.some(function(d){return d.kind===t.kind})}function Vi(t,s){return s.some(function(d){return d==="null"?t===null:d==="array"?Array.isArray(t):d==="object"?t&&!Array.isArray(t)&&typeof t=="object":d===typeof t})}var Ii=h(function(t,s){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function x(i){return(i=Math.round(i))<0?0:i>255?255:i}function S(i){return x(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function M(i){return(u=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:u>1?1:u;var u}function r(i,u,m){return m<0?m+=1:m>1&&(m-=1),6*m<1?i+(u-i)*m*6:2*m<1?u:3*m<2?i+(u-i)*(2/3-m)*6:i}try{s.parseCSSColor=function(i){var u,m=i.replace(/ /g,"").toLowerCase();if(m in d)return d[m].slice();if(m[0]==="#")return m.length===4?(u=parseInt(m.substr(1),16))>=0&&u<=4095?[(3840&u)>>4|(3840&u)>>8,240&u|(240&u)>>4,15&u|(15&u)<<4,1]:null:m.length===7&&(u=parseInt(m.substr(1),16))>=0&&u<=16777215?[(16711680&u)>>16,(65280&u)>>8,255&u,1]:null;var b=m.indexOf("("),E=m.indexOf(")");if(b!==-1&&E+1===m.length){var T=m.substr(0,b),D=m.substr(b+1,E-(b+1)).split(","),U=1;switch(T){case"rgba":if(D.length!==4)return null;U=M(D.pop());case"rgb":return D.length!==3?null:[S(D[0]),S(D[1]),S(D[2]),U];case"hsla":if(D.length!==4)return null;U=M(D.pop());case"hsl":if(D.length!==3)return null;var V=(parseFloat(D[0])%360+360)%360/360,G=M(D[1]),q=M(D[2]),K=q<=.5?q*(G+1):q+G-q*G,$=2*q-K;return[x(255*r($,K,V+1/3)),x(255*r($,K,V)),x(255*r($,K,V-1/3)),U];default:return null}}return null}}catch{}}).parseCSSColor,dn=function(t,s,d,x){x===void 0&&(x=1),this.r=t,this.g=s,this.b=d,this.a=x};dn.parse=function(t){if(t){if(t instanceof dn)return t;if(typeof t=="string"){var s=Ii(t);if(s)return new dn(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3])}}},dn.prototype.toString=function(){var t=this.toArray(),s=t[1],d=t[2],x=t[3];return"rgba("+Math.round(t[0])+","+Math.round(s)+","+Math.round(d)+","+x+")"},dn.prototype.toArray=function(){var t=this.a;return t===0?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},dn.black=new dn(0,0,0,1),dn.white=new dn(1,1,1,1),dn.transparent=new dn(0,0,0,0),dn.red=new dn(1,0,0,1);var hr=function(t,s,d){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};hr.prototype.compare=function(t,s){return this.collator.compare(t,s)},hr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var po=function(t,s,d,x,S){this.text=t,this.image=s,this.scale=d,this.fontStack=x,this.textColor=S},fr=function(t){this.sections=t};fr.fromString=function(t){return new fr([new po(t,null,null,null,null)])},fr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(t){return t.text.length!==0||t.image&&t.image.name.length!==0})},fr.factory=function(t){return t instanceof fr?t:fr.fromString(t)},fr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(t){return t.text}).join("")},fr.prototype.serialize=function(){for(var t=["format"],s=0,d=this.sections;s<d.length;s+=1){var x=d[s];if(x.image)t.push(["image",x.image.name]);else{t.push(x.text);var S={};x.fontStack&&(S["text-font"]=["literal",x.fontStack.split(",")]),x.scale&&(S["font-scale"]=x.scale),x.textColor&&(S["text-color"]=["rgba"].concat(x.textColor.toArray())),t.push(S)}}return t};var Ko=function(t){this.name=t.name,this.available=t.available};function iu(t,s,d,x){return typeof t=="number"&&t>=0&&t<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof d=="number"&&d>=0&&d<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:"Invalid rgba value ["+[t,s,d,x].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof x=="number"?[t,s,d,x]:[t,s,d]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Mr(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof dn||t instanceof hr||t instanceof fr||t instanceof Ko)return!0;if(Array.isArray(t)){for(var s=0,d=t;s<d.length;s+=1)if(!Mr(d[s]))return!1;return!0}if(typeof t=="object"){for(var x in t)if(!Mr(t[x]))return!1;return!0}return!1}function oo(t){if(t===null)return Te;if(typeof t=="string")return Pe;if(typeof t=="boolean")return Me;if(typeof t=="number")return we;if(t instanceof dn)return Le;if(t instanceof hr)return _t;if(t instanceof fr)return si;if(t instanceof Ko)return Re;if(Array.isArray(t)){for(var s,d=t.length,x=0,S=t;x<S.length;x+=1){var M=oo(S[x]);if(s){if(s===M)continue;s=lt;break}s=M}return Yt(s||lt,d)}return yt}function sl(t){var s=typeof t;return t===null?"":s==="string"||s==="number"||s==="boolean"?String(t):t instanceof dn||t instanceof fr||t instanceof Ko?t.toString():JSON.stringify(t)}Ko.prototype.toString=function(){return this.name},Ko.fromString=function(t){return t?new Ko({name:t,available:!1}):null},Ko.prototype.serialize=function(){return["image",this.name]};var ea=function(t,s){this.type=t,this.value=s};ea.parse=function(t,s){if(t.length!==2)return s.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!Mr(t[1]))return s.error("invalid value");var d=t[1],x=oo(d),S=s.expectedType;return x.kind!=="array"||x.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(x=S),new ea(x,d)},ea.prototype.evaluate=function(){return this.value},ea.prototype.eachChild=function(){},ea.prototype.outputDefined=function(){return!0},ea.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof dn?["rgba"].concat(this.value.toArray()):this.value instanceof fr?this.value.serialize():this.value};var bo=function(t){this.name="ExpressionEvaluationError",this.message=t};bo.prototype.toJSON=function(){return this.message};var Pa={string:Pe,number:we,boolean:Me,object:yt},Br=function(t,s){this.type=t,this.args=s};Br.parse=function(t,s){if(t.length<2)return s.error("Expected at least one argument.");var d,x=1,S=t[0];if(S==="array"){var M,r;if(t.length>2){var i=t[1];if(typeof i!="string"||!(i in Pa)||i==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);M=Pa[i],x++}else M=lt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);r=t[2],x++}d=Yt(M,r)}else d=Pa[S];for(var u=[];x<t.length;x++){var m=s.parse(t[x],x,lt);if(!m)return null;u.push(m)}return new Br(d,u)},Br.prototype.evaluate=function(t){for(var s=0;s<this.args.length;s++){var d=this.args[s].evaluate(t);if(!Xi(this.type,oo(d)))return d;if(s===this.args.length-1)throw new bo("Expected value to be of type "+di(this.type)+", but found "+di(oo(d))+" instead.")}return null},Br.prototype.eachChild=function(t){this.args.forEach(t)},Br.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Br.prototype.serialize=function(){var t=this.type,s=[t.kind];if(t.kind==="array"){var d=t.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){s.push(d.kind);var x=t.N;(typeof x=="number"||this.args.length>1)&&s.push(x)}}return s.concat(this.args.map(function(S){return S.serialize()}))};var La=function(t){this.type=si,this.sections=t};La.parse=function(t,s){if(t.length<2)return s.error("Expected at least one argument.");var d=t[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");for(var x=[],S=!1,M=1;M<=t.length-1;++M){var r=t[M];if(S&&typeof r=="object"&&!Array.isArray(r)){S=!1;var i=null;if(r["font-scale"]&&!(i=s.parse(r["font-scale"],1,we)))return null;var u=null;if(r["text-font"]&&!(u=s.parse(r["text-font"],1,Yt(Pe))))return null;var m=null;if(r["text-color"]&&!(m=s.parse(r["text-color"],1,Le)))return null;var b=x[x.length-1];b.scale=i,b.font=u,b.textColor=m}else{var E=s.parse(t[M],1,lt);if(!E)return null;var T=E.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,x.push({content:E,scale:null,font:null,textColor:null})}}return new La(x)},La.prototype.evaluate=function(t){return new fr(this.sections.map(function(s){var d=s.content.evaluate(t);return oo(d)===Re?new po("",d,null,null,null):new po(sl(d),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null)}))},La.prototype.eachChild=function(t){for(var s=0,d=this.sections;s<d.length;s+=1){var x=d[s];t(x.content),x.scale&&t(x.scale),x.font&&t(x.font),x.textColor&&t(x.textColor)}},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){for(var t=["format"],s=0,d=this.sections;s<d.length;s+=1){var x=d[s];t.push(x.content.serialize());var S={};x.scale&&(S["font-scale"]=x.scale.serialize()),x.font&&(S["text-font"]=x.font.serialize()),x.textColor&&(S["text-color"]=x.textColor.serialize()),t.push(S)}return t};var ca=function(t){this.type=Re,this.input=t};ca.parse=function(t,s){if(t.length!==2)return s.error("Expected two arguments.");var d=s.parse(t[1],1,Pe);return d?new ca(d):s.error("No image name provided.")},ca.prototype.evaluate=function(t){var s=this.input.evaluate(t),d=Ko.fromString(s);return d&&t.availableImages&&(d.available=t.availableImages.indexOf(s)>-1),d},ca.prototype.eachChild=function(t){t(this.input)},ca.prototype.outputDefined=function(){return!1},ca.prototype.serialize=function(){return["image",this.input.serialize()]};var _c={"to-boolean":Me,"to-color":Le,"to-number":we,"to-string":Pe},za=function(t,s){this.type=t,this.args=s};za.parse=function(t,s){if(t.length<2)return s.error("Expected at least one argument.");var d=t[0];if((d==="to-boolean"||d==="to-string")&&t.length!==2)return s.error("Expected one argument.");for(var x=_c[d],S=[],M=1;M<t.length;M++){var r=s.parse(t[M],M,lt);if(!r)return null;S.push(r)}return new za(x,S)},za.prototype.evaluate=function(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){for(var s,d,x=0,S=this.args;x<S.length;x+=1){if(d=null,(s=S[x].evaluate(t))instanceof dn)return s;if(typeof s=="string"){var M=t.parseColor(s);if(M)return M}else if(Array.isArray(s)&&!(d=s.length<3||s.length>4?"Invalid rbga value "+JSON.stringify(s)+": expected an array containing either three or four numeric values.":iu(s[0],s[1],s[2],s[3])))return new dn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new bo(d||"Could not parse color from value '"+(typeof s=="string"?s:String(JSON.stringify(s)))+"'")}if(this.type.kind==="number"){for(var r=null,i=0,u=this.args;i<u.length;i+=1){if((r=u[i].evaluate(t))===null)return 0;var m=Number(r);if(!isNaN(m))return m}throw new bo("Could not convert "+JSON.stringify(r)+" to number.")}return this.type.kind==="formatted"?fr.fromString(sl(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?Ko.fromString(sl(this.args[0].evaluate(t))):sl(this.args[0].evaluate(t))},za.prototype.eachChild=function(t){this.args.forEach(t)},za.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},za.prototype.serialize=function(){if(this.type.kind==="formatted")return new La([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ca(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(s){t.push(s.serialize())}),t};var ll=["Unknown","Point","LineString","Polygon"],Va=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Va.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Va.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ll[this.feature.type]:this.feature.type:null},Va.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Va.prototype.canonicalID=function(){return this.canonical},Va.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Va.prototype.parseColor=function(t){var s=this._parseColorCache[t];return s||(s=this._parseColorCache[t]=dn.parse(t)),s};var ao=function(t,s,d,x){this.name=t,this.type=s,this._evaluate=d,this.args=x};ao.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ao.prototype.eachChild=function(t){this.args.forEach(t)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},ao.parse=function(t,s){var d,x=t[0],S=ao.definitions[x];if(!S)return s.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0);for(var M=Array.isArray(S)?S[0]:S.type,r=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,i=r.filter(function(vt){var ot=vt[0];return!Array.isArray(ot)||ot.length===t.length-1}),u=null,m=0,b=i;m<b.length;m+=1){var E=b[m],T=E[0],D=E[1];u=new js(s.registry,s.path,null,s.scope);for(var U=[],V=!1,G=1;G<t.length;G++){var q=t[G],K=Array.isArray(T)?T[G-1]:T.type,$=u.parse(q,1+U.length,K);if(!$){V=!0;break}U.push($)}if(!V)if(Array.isArray(T)&&T.length!==U.length)u.error("Expected "+T.length+" arguments, but found "+U.length+" instead.");else{for(var ie=0;ie<U.length;ie++){var pe=Array.isArray(T)?T[ie]:T.type,ve=U[ie];u.concat(ie+1).checkSubtype(pe,ve.type)}if(u.errors.length===0)return new ao(x,M,D,U)}}if(i.length===1)(d=s.errors).push.apply(d,u.errors);else{for(var Be=(i.length?i:r).map(function(vt){var ot;return ot=vt[0],Array.isArray(ot)?"("+ot.map(di).join(", ")+")":"("+di(ot.type)+"...)"}).join(" | "),Qe=[],nt=1;nt<t.length;nt++){var rt=s.parse(t[nt],1+Qe.length);if(!rt)return null;Qe.push(di(rt.type))}s.error("Expected arguments of type "+Be+", but found ("+Qe.join(", ")+") instead.")}return null},ao.register=function(t,s){for(var d in ao.definitions=s,s)t[d]=ao};var ma=function(t,s,d){this.type=_t,this.locale=d,this.caseSensitive=t,this.diacriticSensitive=s};function Lo(t,s){t[0]=Math.min(t[0],s[0]),t[1]=Math.min(t[1],s[1]),t[2]=Math.max(t[2],s[0]),t[3]=Math.max(t[3],s[1])}function rs(t,s){return!(t[0]<=s[0]||t[2]>=s[2]||t[1]<=s[1]||t[3]>=s[3])}function nu(t,s){var d=(180+t[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,S=Math.pow(2,s.z);return[Math.round(d*S*8192),Math.round(x*S*8192)]}function Vu(t,s,d){return s[1]>t[1]!=d[1]>t[1]&&t[0]<(d[0]-s[0])*(t[1]-s[1])/(d[1]-s[1])+s[0]}function ul(t,s){for(var d,x,S,M,r,i,u,m=!1,b=0,E=s.length;b<E;b++)for(var T=s[b],D=0,U=T.length;D<U-1;D++){if((M=(d=t)[0]-(x=T[D])[0])*(u=d[1]-(S=T[D+1])[1])-(i=d[0]-S[0])*(r=d[1]-x[1])==0&&M*i<=0&&r*u<=0)return!1;Vu(t,T[D],T[D+1])&&(m=!m)}return m}function Ao(t,s){for(var d=0;d<s.length;d++)if(ul(t,s[d]))return!0;return!1}function Pl(t,s,d,x){var S=x[0]-d[0],M=x[1]-d[1],r=(t[0]-d[0])*M-S*(t[1]-d[1]),i=(s[0]-d[0])*M-S*(s[1]-d[1]);return r>0&&i<0||r<0&&i>0}function vc(t,s,d){for(var x=0,S=d;x<S.length;x+=1)for(var M=S[x],r=0;r<M.length-1;++r)if((E=[(b=M[r+1])[0]-(m=M[r])[0],b[1]-m[1]])[0]*(T=[(u=s)[0]-(i=t)[0],u[1]-i[1]])[1]-E[1]*T[0]!=0&&Pl(i,u,m,b)&&Pl(m,b,i,u))return!0;var i,u,m,b,E,T;return!1}function bc(t,s){for(var d=0;d<t.length;++d)if(!ul(t[d],s))return!1;for(var x=0;x<t.length-1;++x)if(vc(t[x],t[x+1],s))return!1;return!0}function xc(t,s){for(var d=0;d<s.length;d++)if(bc(t,s[d]))return!0;return!1}function bs(t,s,d){for(var x=[],S=0;S<t.length;S++){for(var M=[],r=0;r<t[S].length;r++){var i=nu(t[S][r],d);Lo(s,i),M.push(i)}x.push(M)}return x}function ru(t,s,d){for(var x=[],S=0;S<t.length;S++){var M=bs(t[S],s,d);x.push(M)}return x}function ou(t,s,d,x){if(t[0]<d[0]||t[0]>d[2]){var S=.5*x,M=t[0]-d[0]>S?-x:d[0]-t[0]>S?x:0;M===0&&(M=t[0]-d[2]>S?-x:d[2]-t[0]>S?x:0),t[0]+=M}Lo(s,t)}function ih(t,s,d,x){for(var S=8192*Math.pow(2,x.z),M=[8192*x.x,8192*x.y],r=[],i=0,u=t;i<u.length;i+=1)for(var m=0,b=u[i];m<b.length;m+=1){var E=b[m],T=[E.x+M[0],E.y+M[1]];ou(T,s,d,S),r.push(T)}return r}function Ll(t,s,d,x){for(var S,M=8192*Math.pow(2,x.z),r=[8192*x.x,8192*x.y],i=[],u=0,m=t;u<m.length;u+=1){for(var b=[],E=0,T=m[u];E<T.length;E+=1){var D=T[E],U=[D.x+r[0],D.y+r[1]];Lo(s,U),b.push(U)}i.push(b)}if(s[2]-s[0]<=M/2){(S=s)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(var V=0,G=i;V<G.length;V+=1)for(var q=0,K=G[V];q<K.length;q+=1)ou(K[q],s,d,M)}return i}ma.parse=function(t,s){if(t.length!==2)return s.error("Expected one argument.");var d=t[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");var x=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Me);if(!x)return null;var S=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Me);if(!S)return null;var M=null;return d.locale&&!(M=s.parse(d.locale,1,Pe))?null:new ma(x,S,M)},ma.prototype.evaluate=function(t){return new hr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ma.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ma.prototype.outputDefined=function(){return!1},ma.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ga=function(t,s){this.type=Me,this.geojson=t,this.geometries=s};function os(t){if(t instanceof ao&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof ga)return!1;var s=!0;return t.eachChild(function(d){s&&!os(d)&&(s=!1)}),s}function as(t){if(t instanceof ao&&t.name==="feature-state")return!1;var s=!0;return t.eachChild(function(d){s&&!as(d)&&(s=!1)}),s}function Vs(t,s){if(t instanceof ao&&s.indexOf(t.name)>=0)return!1;var d=!0;return t.eachChild(function(x){d&&!Vs(x,s)&&(d=!1)}),d}ga.parse=function(t,s){if(t.length!==2)return s.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(Mr(t[1])){var d=t[1];if(d.type==="FeatureCollection")for(var x=0;x<d.features.length;++x){var S=d.features[x].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new ga(d,d.features[x].geometry)}else if(d.type==="Feature"){var M=d.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new ga(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ga(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ga.prototype.evaluate=function(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(s,d){var x=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],M=s.canonicalID();if(d.type==="Polygon"){var r=bs(d.coordinates,S,M),i=ih(s.geometry(),x,S,M);if(!rs(x,S))return!1;for(var u=0,m=i;u<m.length;u+=1)if(!ul(m[u],r))return!1}if(d.type==="MultiPolygon"){var b=ru(d.coordinates,S,M),E=ih(s.geometry(),x,S,M);if(!rs(x,S))return!1;for(var T=0,D=E;T<D.length;T+=1)if(!Ao(D[T],b))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(s,d){var x=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],M=s.canonicalID();if(d.type==="Polygon"){var r=bs(d.coordinates,S,M),i=Ll(s.geometry(),x,S,M);if(!rs(x,S))return!1;for(var u=0,m=i;u<m.length;u+=1)if(!bc(m[u],r))return!1}if(d.type==="MultiPolygon"){var b=ru(d.coordinates,S,M),E=Ll(s.geometry(),x,S,M);if(!rs(x,S))return!1;for(var T=0,D=E;T<D.length;T+=1)if(!xc(D[T],b))return!1}return!0}(t,this.geometries)}return!1},ga.prototype.eachChild=function(){},ga.prototype.outputDefined=function(){return!0},ga.prototype.serialize=function(){return["within",this.geojson]};var ir=function(t,s){this.type=s.type,this.name=t,this.boundExpression=s};ir.parse=function(t,s){if(t.length!==2||typeof t[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");var d=t[1];return s.scope.has(d)?new ir(d,s.scope.get(d)):s.error('Unknown variable "'+d+'". Make sure "'+d+'" has been bound in an enclosing "let" expression before using it.',1)},ir.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ir.prototype.eachChild=function(){},ir.prototype.outputDefined=function(){return!1},ir.prototype.serialize=function(){return["var",this.name]};var js=function(t,s,d,x,S){s===void 0&&(s=[]),x===void 0&&(x=new ge),S===void 0&&(S=[]),this.registry=t,this.path=s,this.key=s.map(function(M){return"["+M+"]"}).join(""),this.scope=x,this.errors=S,this.expectedType=d};function qs(t,s){for(var d,x=t.length-1,S=0,M=x,r=0;S<=M;)if((d=t[r=Math.floor((S+M)/2)])<=s){if(r===x||s<t[r+1])return r;S=r+1}else{if(!(d>s))throw new bo("Input is not a number.");M=r-1}return 0}js.prototype.parse=function(t,s,d,x,S){return S===void 0&&(S={}),s?this.concat(s,d,x)._parse(t,S):this._parse(t,S)},js.prototype._parse=function(t,s){function d(m,b,E){return E==="assert"?new Br(b,[m]):E==="coerce"?new za(b,[m]):m}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var x=t[0];if(typeof x!="string")return this.error("Expression name must be a string, but found "+typeof x+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var S=this.registry[x];if(S){var M=S.parse(t,this);if(!M)return null;if(this.expectedType){var r=this.expectedType,i=M.type;if(r.kind!=="string"&&r.kind!=="number"&&r.kind!=="boolean"&&r.kind!=="object"&&r.kind!=="array"||i.kind!=="value")if(r.kind!=="color"&&r.kind!=="formatted"&&r.kind!=="resolvedImage"||i.kind!=="value"&&i.kind!=="string"){if(this.checkSubtype(r,i))return null}else M=d(M,r,s.typeAnnotation||"coerce");else M=d(M,r,s.typeAnnotation||"assert")}if(!(M instanceof ea)&&M.type.kind!=="resolvedImage"&&function m(b){if(b instanceof ir)return m(b.boundExpression);if(b instanceof ao&&b.name==="error"||b instanceof ma||b instanceof ga)return!1;var E=b instanceof za||b instanceof Br,T=!0;return b.eachChild(function(D){T=E?T&&m(D):T&&D instanceof ea}),!!T&&os(b)&&Vs(b,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(M)){var u=new Va;try{M=new ea(M.type,M.evaluate(u))}catch(m){return this.error(m.message),null}}return M}return this.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},js.prototype.concat=function(t,s,d){var x=typeof t=="number"?this.path.concat(t):this.path,S=d?this.scope.concat(d):this.scope;return new js(this.registry,x,s||null,S,this.errors)},js.prototype.error=function(t){for(var s=[],d=arguments.length-1;d-- >0;)s[d]=arguments[d+1];var x=""+this.key+s.map(function(S){return"["+S+"]"}).join("");this.errors.push(new le(x,t))},js.prototype.checkSubtype=function(t,s){var d=Xi(t,s);return d&&this.error(d),d};var qo=function(t,s,d){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(var x=0,S=d;x<S.length;x+=1){var M=S[x],r=M[1];this.labels.push(M[0]),this.outputs.push(r)}};function so(t,s,d){return t*(1-d)+s*d}qo.parse=function(t,s){if(t.length-1<4)return s.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");var d=s.parse(t[1],1,we);if(!d)return null;var x=[],S=null;s.expectedType&&s.expectedType.kind!=="value"&&(S=s.expectedType);for(var M=1;M<t.length;M+=2){var r=M===1?-1/0:t[M],i=t[M+1],u=M,m=M+1;if(typeof r!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(x.length&&x[x.length-1][0]>=r)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var b=s.parse(i,m,S);if(!b)return null;S=S||b.type,x.push([r,b])}return new qo(S,d,x)},qo.prototype.evaluate=function(t){var s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(t);var x=this.input.evaluate(t);if(x<=s[0])return d[0].evaluate(t);var S=s.length;return x>=s[S-1]?d[S-1].evaluate(t):d[qs(s,x)].evaluate(t)},qo.prototype.eachChild=function(t){t(this.input);for(var s=0,d=this.outputs;s<d.length;s+=1)t(d[s])},qo.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},qo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],s=0;s<this.labels.length;s++)s>0&&t.push(this.labels[s]),t.push(this.outputs[s].serialize());return t};var Go=Object.freeze({__proto__:null,number:so,color:function(t,s,d){return new dn(so(t.r,s.r,d),so(t.g,s.g,d),so(t.b,s.b,d),so(t.a,s.a,d))},array:function(t,s,d){return t.map(function(x,S){return so(x,s[S],d)})}}),ju=6/29*3*(6/29),qu=Math.PI/180,Gu=180/Math.PI;function au(t){return t>.008856451679035631?Math.pow(t,1/3):t/ju+4/29}function su(t){return t>6/29?t*t*t:ju*(t-4/29)}function zl(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function lu(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Hu(t){var s=lu(t.r),d=lu(t.g),x=lu(t.b),S=au((.4124564*s+.3575761*d+.1804375*x)/.95047),M=au((.2126729*s+.7151522*d+.072175*x)/1);return{l:116*M-16,a:500*(S-M),b:200*(M-au((.0193339*s+.119192*d+.9503041*x)/1.08883)),alpha:t.a}}function uu(t){var s=(t.l+16)/116,d=isNaN(t.a)?s:s+t.a/500,x=isNaN(t.b)?s:s-t.b/200;return s=1*su(s),d=.95047*su(d),x=1.08883*su(x),new dn(zl(3.2404542*d-1.5371385*s-.4985314*x),zl(-.969266*d+1.8760108*s+.041556*x),zl(.0556434*d-.2040259*s+1.0572252*x),t.alpha)}function nh(t,s,d){var x=s-t;return t+d*(x>180||x<-180?x-360*Math.round(x/360):x)}var Dl={forward:Hu,reverse:uu,interpolate:function(t,s,d){return{l:so(t.l,s.l,d),a:so(t.a,s.a,d),b:so(t.b,s.b,d),alpha:so(t.alpha,s.alpha,d)}}},ss={forward:function(t){var s=Hu(t),d=s.l,x=s.a,S=s.b,M=Math.atan2(S,x)*Gu;return{h:M<0?M+360:M,c:Math.sqrt(x*x+S*S),l:d,alpha:t.a}},reverse:function(t){var s=t.h*qu,d=t.c;return uu({l:t.l,a:Math.cos(s)*d,b:Math.sin(s)*d,alpha:t.alpha})},interpolate:function(t,s,d){return{h:nh(t.h,s.h,d),c:so(t.c,s.c,d),l:so(t.l,s.l,d),alpha:so(t.alpha,s.alpha,d)}}},rh=Object.freeze({__proto__:null,lab:Dl,hcl:ss}),Ho=function(t,s,d,x,S){this.type=t,this.operator=s,this.interpolation=d,this.input=x,this.labels=[],this.outputs=[];for(var M=0,r=S;M<r.length;M+=1){var i=r[M],u=i[1];this.labels.push(i[0]),this.outputs.push(u)}};function wc(t,s,d,x){var S=x-d,M=t-d;return S===0?0:s===1?M/S:(Math.pow(s,M)-1)/(Math.pow(s,S)-1)}Ho.interpolationFactor=function(t,s,d,x){var S=0;if(t.name==="exponential")S=wc(s,t.base,d,x);else if(t.name==="linear")S=wc(s,1,d,x);else if(t.name==="cubic-bezier"){var M=t.controlPoints;S=new I(M[0],M[1],M[2],M[3]).solve(wc(s,1,d,x))}return S},Ho.parse=function(t,s){var d=t[0],x=t[1],S=t[2],M=t.slice(3);if(!Array.isArray(x)||x.length===0)return s.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){var r=x[1];if(typeof r!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:r}}else{if(x[0]!=="cubic-bezier")return s.error("Unknown interpolation type "+String(x[0]),1,0);var i=x.slice(1);if(i.length!==4||i.some(function(G){return typeof G!="number"||G<0||G>1}))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:i}}if(t.length-1<4)return s.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(!(S=s.parse(S,2,we)))return null;var u=[],m=null;d==="interpolate-hcl"||d==="interpolate-lab"?m=Le:s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);for(var b=0;b<M.length;b+=2){var E=M[b],T=M[b+1],D=b+3,U=b+4;if(typeof E!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(u.length&&u[u.length-1][0]>=E)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);var V=s.parse(T,U,m);if(!V)return null;m=m||V.type,u.push([E,V])}return m.kind==="number"||m.kind==="color"||m.kind==="array"&&m.itemType.kind==="number"&&typeof m.N=="number"?new Ho(m,d,x,S,u):s.error("Type "+di(m)+" is not interpolatable.")},Ho.prototype.evaluate=function(t){var s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(t);var x=this.input.evaluate(t);if(x<=s[0])return d[0].evaluate(t);var S=s.length;if(x>=s[S-1])return d[S-1].evaluate(t);var M=qs(s,x),r=Ho.interpolationFactor(this.interpolation,x,s[M],s[M+1]),i=d[M].evaluate(t),u=d[M+1].evaluate(t);return this.operator==="interpolate"?Go[this.type.kind.toLowerCase()](i,u,r):this.operator==="interpolate-hcl"?ss.reverse(ss.interpolate(ss.forward(i),ss.forward(u),r)):Dl.reverse(Dl.interpolate(Dl.forward(i),Dl.forward(u),r))},Ho.prototype.eachChild=function(t){t(this.input);for(var s=0,d=this.outputs;s<d.length;s+=1)t(d[s])},Ho.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Ho.prototype.serialize=function(){var t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var s=[this.operator,t,this.input.serialize()],d=0;d<this.labels.length;d++)s.push(this.labels[d],this.outputs[d].serialize());return s};var Gs=function(t,s){this.type=t,this.args=s};Gs.parse=function(t,s){if(t.length<2)return s.error("Expectected at least one argument.");var d=null,x=s.expectedType;x&&x.kind!=="value"&&(d=x);for(var S=[],M=0,r=t.slice(1);M<r.length;M+=1){var i=s.parse(r[M],1+S.length,d,void 0,{typeAnnotation:"omit"});if(!i)return null;d=d||i.type,S.push(i)}var u=x&&S.some(function(m){return Xi(x,m.type)});return new Gs(u?lt:d,S)},Gs.prototype.evaluate=function(t){for(var s,d=null,x=0,S=0,M=this.args;S<M.length&&(x++,(d=M[S].evaluate(t))&&d instanceof Ko&&!d.available&&(s||(s=d.name),d=null,x===this.args.length&&(d=s)),d===null);S+=1);return d},Gs.prototype.eachChild=function(t){this.args.forEach(t)},Gs.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Gs.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(s){t.push(s.serialize())}),t};var Hs=function(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s};Hs.prototype.evaluate=function(t){return this.result.evaluate(t)},Hs.prototype.eachChild=function(t){for(var s=0,d=this.bindings;s<d.length;s+=1)t(d[s][1]);t(this.result)},Hs.parse=function(t,s){if(t.length<4)return s.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var d=[],x=1;x<t.length-1;x+=2){var S=t[x];if(typeof S!="string")return s.error("Expected string, but found "+typeof S+" instead.",x);if(/[^a-zA-Z0-9_]/.test(S))return s.error("Variable names must contain only alphanumeric characters or '_'.",x);var M=s.parse(t[x+1],x+1);if(!M)return null;d.push([S,M])}var r=s.parse(t[t.length-1],t.length-1,s.expectedType,d);return r?new Hs(d,r):null},Hs.prototype.outputDefined=function(){return this.result.outputDefined()},Hs.prototype.serialize=function(){for(var t=["let"],s=0,d=this.bindings;s<d.length;s+=1){var x=d[s];t.push(x[0],x[1].serialize())}return t.push(this.result.serialize()),t};var cl=function(t,s,d){this.type=t,this.index=s,this.input=d};cl.parse=function(t,s){if(t.length!==3)return s.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var d=s.parse(t[1],1,we),x=s.parse(t[2],2,Yt(s.expectedType||lt));return d&&x?new cl(x.type.itemType,d,x):null},cl.prototype.evaluate=function(t){var s=this.index.evaluate(t),d=this.input.evaluate(t);if(s<0)throw new bo("Array index out of bounds: "+s+" < 0.");if(s>=d.length)throw new bo("Array index out of bounds: "+s+" > "+(d.length-1)+".");if(s!==Math.floor(s))throw new bo("Array index must be an integer, but found "+s+" instead.");return d[s]},cl.prototype.eachChild=function(t){t(this.index),t(this.input)},cl.prototype.outputDefined=function(){return!1},cl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xs=function(t,s){this.type=Me,this.needle=t,this.haystack=s};xs.parse=function(t,s){if(t.length!==3)return s.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var d=s.parse(t[1],1,lt),x=s.parse(t[2],2,lt);return d&&x?nn(d.type,[Me,Pe,we,Te,lt])?new xs(d,x):s.error("Expected first argument to be of type boolean, string, number or null, but found "+di(d.type)+" instead"):null},xs.prototype.evaluate=function(t){var s=this.needle.evaluate(t),d=this.haystack.evaluate(t);if(!d)return!1;if(!Vi(s,["boolean","string","number","null"]))throw new bo("Expected first argument to be of type boolean, string, number or null, but found "+di(oo(s))+" instead.");if(!Vi(d,["string","array"]))throw new bo("Expected second argument to be of type array or string, but found "+di(oo(d))+" instead.");return d.indexOf(s)>=0},xs.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},xs.prototype.outputDefined=function(){return!0},xs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ls=function(t,s,d){this.type=we,this.needle=t,this.haystack=s,this.fromIndex=d};ls.parse=function(t,s){if(t.length<=2||t.length>=5)return s.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var d=s.parse(t[1],1,lt),x=s.parse(t[2],2,lt);if(!d||!x)return null;if(!nn(d.type,[Me,Pe,we,Te,lt]))return s.error("Expected first argument to be of type boolean, string, number or null, but found "+di(d.type)+" instead");if(t.length===4){var S=s.parse(t[3],3,we);return S?new ls(d,x,S):null}return new ls(d,x)},ls.prototype.evaluate=function(t){var s=this.needle.evaluate(t),d=this.haystack.evaluate(t);if(!Vi(s,["boolean","string","number","null"]))throw new bo("Expected first argument to be of type boolean, string, number or null, but found "+di(oo(s))+" instead.");if(!Vi(d,["string","array"]))throw new bo("Expected second argument to be of type array or string, but found "+di(oo(d))+" instead.");if(this.fromIndex){var x=this.fromIndex.evaluate(t);return d.indexOf(s,x)}return d.indexOf(s)},ls.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ls.prototype.outputDefined=function(){return!1},ls.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ja=function(t,s,d,x,S,M){this.inputType=t,this.type=s,this.input=d,this.cases=x,this.outputs=S,this.otherwise=M};ja.parse=function(t,s){if(t.length<5)return s.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return s.error("Expected an even number of arguments.");var d,x;s.expectedType&&s.expectedType.kind!=="value"&&(x=s.expectedType);for(var S={},M=[],r=2;r<t.length-1;r+=2){var i=t[r],u=t[r+1];Array.isArray(i)||(i=[i]);var m=s.concat(r);if(i.length===0)return m.error("Expected at least one branch label.");for(var b=0,E=i;b<E.length;b+=1){var T=E[b];if(typeof T!="number"&&typeof T!="string")return m.error("Branch labels must be numbers or strings.");if(typeof T=="number"&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return m.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof T=="number"&&Math.floor(T)!==T)return m.error("Numeric branch labels must be integer values.");if(d){if(m.checkSubtype(d,oo(T)))return null}else d=oo(T);if(S[String(T)]!==void 0)return m.error("Branch labels must be unique.");S[String(T)]=M.length}var D=s.parse(u,r,x);if(!D)return null;x=x||D.type,M.push(D)}var U=s.parse(t[1],1,lt);if(!U)return null;var V=s.parse(t[t.length-1],t.length-1,x);return V?U.type.kind!=="value"&&s.concat(1).checkSubtype(d,U.type)?null:new ja(d,x,U,S,M,V):null},ja.prototype.evaluate=function(t){var s=this.input.evaluate(t);return(oo(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)},ja.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ja.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},ja.prototype.serialize=function(){for(var t=this,s=["match",this.input.serialize()],d=[],x={},S=0,M=Object.keys(this.cases).sort();S<M.length;S+=1){var r=M[S];(E=x[this.cases[r]])===void 0?(x[this.cases[r]]=d.length,d.push([this.cases[r],[r]])):d[E][1].push(r)}for(var i=function(D){return t.inputType.kind==="number"?Number(D):D},u=0,m=d;u<m.length;u+=1){var b=m[u],E=b[0],T=b[1];s.push(T.length===1?i(T[0]):T.map(i)),s.push(this.outputs[outputIndex$1].serialize())}return s.push(this.otherwise.serialize()),s};var Zs=function(t,s,d){this.type=t,this.branches=s,this.otherwise=d};Zs.parse=function(t,s){if(t.length<4)return s.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return s.error("Expected an odd number of arguments.");var d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);for(var x=[],S=1;S<t.length-1;S+=2){var M=s.parse(t[S],S,Me);if(!M)return null;var r=s.parse(t[S+1],S+1,d);if(!r)return null;x.push([M,r]),d=d||r.type}var i=s.parse(t[t.length-1],t.length-1,d);return i?new Zs(d,x,i):null},Zs.prototype.evaluate=function(t){for(var s=0,d=this.branches;s<d.length;s+=1){var x=d[s],S=x[1];if(x[0].evaluate(t))return S.evaluate(t)}return this.otherwise.evaluate(t)},Zs.prototype.eachChild=function(t){for(var s=0,d=this.branches;s<d.length;s+=1){var x=d[s],S=x[1];t(x[0]),t(S)}t(this.otherwise)},Zs.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},Zs.prototype.serialize=function(){var t=["case"];return this.eachChild(function(s){t.push(s.serialize())}),t};var ws=function(t,s,d,x){this.type=t,this.input=s,this.beginIndex=d,this.endIndex=x};function Zu(t,s){return t==="=="||t==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Ws(t,s,d,x){return x.compare(s,d)===0}function Pr(t,s,d){var x=t!=="=="&&t!=="!=";return function(){function S(M,r,i){this.type=Me,this.lhs=M,this.rhs=r,this.collator=i,this.hasUntypedArgument=M.type.kind==="value"||r.type.kind==="value"}return S.parse=function(M,r){if(M.length!==3&&M.length!==4)return r.error("Expected two or three arguments.");var i=M[0],u=r.parse(M[1],1,lt);if(!u)return null;if(!Zu(i,u.type))return r.concat(1).error('"'+i+`" comparisons are not supported for type '`+di(u.type)+"'.");var m=r.parse(M[2],2,lt);if(!m)return null;if(!Zu(i,m.type))return r.concat(2).error('"'+i+`" comparisons are not supported for type '`+di(m.type)+"'.");if(u.type.kind!==m.type.kind&&u.type.kind!=="value"&&m.type.kind!=="value")return r.error("Cannot compare types '"+di(u.type)+"' and '"+di(m.type)+"'.");x&&(u.type.kind==="value"&&m.type.kind!=="value"?u=new Br(m.type,[u]):u.type.kind!=="value"&&m.type.kind==="value"&&(m=new Br(u.type,[m])));var b=null;if(M.length===4){if(u.type.kind!=="string"&&m.type.kind!=="string"&&u.type.kind!=="value"&&m.type.kind!=="value")return r.error("Cannot use collator to compare non-string types.");if(!(b=r.parse(M[3],3,_t)))return null}return new S(u,m,b)},S.prototype.evaluate=function(M){var r=this.lhs.evaluate(M),i=this.rhs.evaluate(M);if(x&&this.hasUntypedArgument){var u=oo(r),m=oo(i);if(u.kind!==m.kind||u.kind!=="string"&&u.kind!=="number")throw new bo('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+u.kind+", "+m.kind+") instead.")}if(this.collator&&!x&&this.hasUntypedArgument){var b=oo(r),E=oo(i);if(b.kind!=="string"||E.kind!=="string")return s(M,r,i)}return this.collator?d(M,r,i,this.collator.evaluate(M)):s(M,r,i)},S.prototype.eachChild=function(M){M(this.lhs),M(this.rhs),this.collator&&M(this.collator)},S.prototype.outputDefined=function(){return!0},S.prototype.serialize=function(){var M=[t];return this.eachChild(function(r){M.push(r.serialize())}),M},S}()}ws.parse=function(t,s){if(t.length<=2||t.length>=5)return s.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var d=s.parse(t[1],1,lt),x=s.parse(t[2],2,we);if(!d||!x)return null;if(!nn(d.type,[Yt(lt),Pe,lt]))return s.error("Expected first argument to be of type array or string, but found "+di(d.type)+" instead");if(t.length===4){var S=s.parse(t[3],3,we);return S?new ws(d.type,d,x,S):null}return new ws(d.type,d,x)},ws.prototype.evaluate=function(t){var s=this.input.evaluate(t),d=this.beginIndex.evaluate(t);if(!Vi(s,["string","array"]))throw new bo("Expected first argument to be of type array or string, but found "+di(oo(s))+" instead.");if(this.endIndex){var x=this.endIndex.evaluate(t);return s.slice(d,x)}return s.slice(d)},ws.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ws.prototype.outputDefined=function(){return!1},ws.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var hl=Pr("==",function(t,s,d){return s===d},Ws),Es=Pr("!=",function(t,s,d){return s!==d},function(t,s,d,x){return!Ws(0,s,d,x)}),Ec=Pr("<",function(t,s,d){return s<d},function(t,s,d,x){return x.compare(s,d)<0}),Wu=Pr(">",function(t,s,d){return s>d},function(t,s,d,x){return x.compare(s,d)>0}),Dn=Pr("<=",function(t,s,d){return s<=d},function(t,s,d,x){return x.compare(s,d)<=0}),cu=Pr(">=",function(t,s,d){return s>=d},function(t,s,d,x){return x.compare(s,d)>=0}),lr=function(t,s,d,x,S){this.type=Pe,this.number=t,this.locale=s,this.currency=d,this.minFractionDigits=x,this.maxFractionDigits=S};lr.parse=function(t,s){if(t.length!==3)return s.error("Expected two arguments.");var d=s.parse(t[1],1,we);if(!d)return null;var x=t[2];if(typeof x!="object"||Array.isArray(x))return s.error("NumberFormat options argument must be an object.");var S=null;if(x.locale&&!(S=s.parse(x.locale,1,Pe)))return null;var M=null;if(x.currency&&!(M=s.parse(x.currency,1,Pe)))return null;var r=null;if(x["min-fraction-digits"]&&!(r=s.parse(x["min-fraction-digits"],1,we)))return null;var i=null;return x["max-fraction-digits"]&&!(i=s.parse(x["max-fraction-digits"],1,we))?null:new lr(d,S,M,r,i)},lr.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},lr.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Xa=function(t){this.type=we,this.input=t};Xa.parse=function(t,s){if(t.length!==2)return s.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var d=s.parse(t[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error("Expected argument of type string or array, but found "+di(d.type)+" instead."):new Xa(d):null},Xa.prototype.evaluate=function(t){var s=this.input.evaluate(t);if(typeof s=="string"||Array.isArray(s))return s.length;throw new bo("Expected value to be of type string or array, but found "+di(oo(s))+" instead.")},Xa.prototype.eachChild=function(t){t(this.input)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){var t=["length"];return this.eachChild(function(s){t.push(s.serialize())}),t};var Dr={"==":hl,"!=":Es,">":Wu,"<":Ec,">=":cu,"<=":Dn,array:Br,at:cl,boolean:Br,case:Zs,coalesce:Gs,collator:ma,format:La,image:ca,in:xs,"index-of":ls,interpolate:Ho,"interpolate-hcl":Ho,"interpolate-lab":Ho,length:Xa,let:Hs,literal:ea,match:ja,number:Br,"number-format":lr,object:Br,slice:ws,step:qo,string:Br,"to-boolean":za,"to-color":za,"to-number":za,"to-string":za,var:ir,within:ga};function lo(t,s){var d=s[0],x=s[1],S=s[2],M=s[3];d=d.evaluate(t),x=x.evaluate(t),S=S.evaluate(t);var r=M?M.evaluate(t):1,i=iu(d,x,S,r);if(i)throw new bo(i);return new dn(d/255*r,x/255*r,S/255*r,r)}function hu(t,s){return t in s}function du(t,s){var d=s[t];return d===void 0?null:d}function dl(t){return{type:t}}function Xu(t){return{result:"success",value:t}}function us(t){return{result:"error",value:t}}function cs(t){return t["property-type"]==="data-driven"||t["property-type"]==="cross-faded-data-driven"}function pu(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Xs(t){return!!t.expression&&t.expression.interpolated}function Rr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":t===null?"null":typeof t}function Is(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Ku(t){return t}function ta(t,s,d){return t!==void 0?t:s!==void 0?s:d!==void 0?d:void 0}function Ic(t,s,d,x,S){return ta(typeof d===S?x[d]:void 0,t.default,s.default)}function oh(t,s,d){if(Rr(d)!=="number")return ta(t.default,s.default);var x=t.stops.length;if(x===1||d<=t.stops[0][0])return t.stops[0][1];if(d>=t.stops[x-1][0])return t.stops[x-1][1];var S=qs(t.stops.map(function(M){return M[0]}),d);return t.stops[S][1]}function Sc(t,s,d){var x=t.base!==void 0?t.base:1;if(Rr(d)!=="number")return ta(t.default,s.default);var S=t.stops.length;if(S===1||d<=t.stops[0][0])return t.stops[0][1];if(d>=t.stops[S-1][0])return t.stops[S-1][1];var M=qs(t.stops.map(function(E){return E[0]}),d),r=function(E,T,D,U){var V=U-D,G=E-D;return V===0?0:T===1?G/V:(Math.pow(T,G)-1)/(Math.pow(T,V)-1)}(d,x,t.stops[M][0],t.stops[M+1][0]),i=t.stops[M][1],u=t.stops[M+1][1],m=Go[s.type]||Ku;if(t.colorSpace&&t.colorSpace!=="rgb"){var b=rh[t.colorSpace];m=function(E,T){return b.reverse(b.interpolate(b.forward(E),b.forward(T),r))}}return typeof i.evaluate=="function"?{evaluate:function(){for(var E=[],T=arguments.length;T--;)E[T]=arguments[T];var D=i.evaluate.apply(void 0,E),U=u.evaluate.apply(void 0,E);if(D!==void 0&&U!==void 0)return m(D,U,r)}}:m(i,u,r)}function Ss(t,s,d){return s.type==="color"?d=dn.parse(d):s.type==="formatted"?d=fr.fromString(d.toString()):s.type==="resolvedImage"?d=Ko.fromString(d.toString()):Rr(d)===s.type||s.type==="enum"&&s.values[d]||(d=void 0),ta(d,t.default,s.default)}ao.register(Dr,{error:[{kind:"error"},[Pe],function(t,s){throw new bo(s[0].evaluate(t))}],typeof:[Pe,[lt],function(t,s){return di(oo(s[0].evaluate(t)))}],"to-rgba":[Yt(we,4),[Le],function(t,s){return s[0].evaluate(t).toArray()}],rgb:[Le,[we,we,we],lo],rgba:[Le,[we,we,we,we],lo],has:{type:Me,overloads:[[[Pe],function(t,s){return hu(s[0].evaluate(t),t.properties())}],[[Pe,yt],function(t,s){var d=s[1];return hu(s[0].evaluate(t),d.evaluate(t))}]]},get:{type:lt,overloads:[[[Pe],function(t,s){return du(s[0].evaluate(t),t.properties())}],[[Pe,yt],function(t,s){var d=s[1];return du(s[0].evaluate(t),d.evaluate(t))}]]},"feature-state":[lt,[Pe],function(t,s){return du(s[0].evaluate(t),t.featureState||{})}],properties:[yt,[],function(t){return t.properties()}],"geometry-type":[Pe,[],function(t){return t.geometryType()}],id:[lt,[],function(t){return t.id()}],zoom:[we,[],function(t){return t.globals.zoom}],"heatmap-density":[we,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[we,[],function(t){return t.globals.lineProgress||0}],accumulated:[lt,[],function(t){return t.globals.accumulated===void 0?null:t.globals.accumulated}],"+":[we,dl(we),function(t,s){for(var d=0,x=0,S=s;x<S.length;x+=1)d+=S[x].evaluate(t);return d}],"*":[we,dl(we),function(t,s){for(var d=1,x=0,S=s;x<S.length;x+=1)d*=S[x].evaluate(t);return d}],"-":{type:we,overloads:[[[we,we],function(t,s){var d=s[1];return s[0].evaluate(t)-d.evaluate(t)}],[[we],function(t,s){return-s[0].evaluate(t)}]]},"/":[we,[we,we],function(t,s){var d=s[1];return s[0].evaluate(t)/d.evaluate(t)}],"%":[we,[we,we],function(t,s){var d=s[1];return s[0].evaluate(t)%d.evaluate(t)}],ln2:[we,[],function(){return Math.LN2}],pi:[we,[],function(){return Math.PI}],e:[we,[],function(){return Math.E}],"^":[we,[we,we],function(t,s){var d=s[1];return Math.pow(s[0].evaluate(t),d.evaluate(t))}],sqrt:[we,[we],function(t,s){return Math.sqrt(s[0].evaluate(t))}],log10:[we,[we],function(t,s){return Math.log(s[0].evaluate(t))/Math.LN10}],ln:[we,[we],function(t,s){return Math.log(s[0].evaluate(t))}],log2:[we,[we],function(t,s){return Math.log(s[0].evaluate(t))/Math.LN2}],sin:[we,[we],function(t,s){return Math.sin(s[0].evaluate(t))}],cos:[we,[we],function(t,s){return Math.cos(s[0].evaluate(t))}],tan:[we,[we],function(t,s){return Math.tan(s[0].evaluate(t))}],asin:[we,[we],function(t,s){return Math.asin(s[0].evaluate(t))}],acos:[we,[we],function(t,s){return Math.acos(s[0].evaluate(t))}],atan:[we,[we],function(t,s){return Math.atan(s[0].evaluate(t))}],min:[we,dl(we),function(t,s){return Math.min.apply(Math,s.map(function(d){return d.evaluate(t)}))}],max:[we,dl(we),function(t,s){return Math.max.apply(Math,s.map(function(d){return d.evaluate(t)}))}],abs:[we,[we],function(t,s){return Math.abs(s[0].evaluate(t))}],round:[we,[we],function(t,s){var d=s[0].evaluate(t);return d<0?-Math.round(-d):Math.round(d)}],floor:[we,[we],function(t,s){return Math.floor(s[0].evaluate(t))}],ceil:[we,[we],function(t,s){return Math.ceil(s[0].evaluate(t))}],"filter-==":[Me,[Pe,lt],function(t,s){var d=s[0],x=s[1];return t.properties()[d.value]===x.value}],"filter-id-==":[Me,[lt],function(t,s){var d=s[0];return t.id()===d.value}],"filter-type-==":[Me,[Pe],function(t,s){var d=s[0];return t.geometryType()===d.value}],"filter-<":[Me,[Pe,lt],function(t,s){var d=s[0],x=s[1],S=t.properties()[d.value],M=x.value;return typeof S==typeof M&&S<M}],"filter-id-<":[Me,[lt],function(t,s){var d=s[0],x=t.id(),S=d.value;return typeof x==typeof S&&x<S}],"filter->":[Me,[Pe,lt],function(t,s){var d=s[0],x=s[1],S=t.properties()[d.value],M=x.value;return typeof S==typeof M&&S>M}],"filter-id->":[Me,[lt],function(t,s){var d=s[0],x=t.id(),S=d.value;return typeof x==typeof S&&x>S}],"filter-<=":[Me,[Pe,lt],function(t,s){var d=s[0],x=s[1],S=t.properties()[d.value],M=x.value;return typeof S==typeof M&&S<=M}],"filter-id-<=":[Me,[lt],function(t,s){var d=s[0],x=t.id(),S=d.value;return typeof x==typeof S&&x<=S}],"filter->=":[Me,[Pe,lt],function(t,s){var d=s[0],x=s[1],S=t.properties()[d.value],M=x.value;return typeof S==typeof M&&S>=M}],"filter-id->=":[Me,[lt],function(t,s){var d=s[0],x=t.id(),S=d.value;return typeof x==typeof S&&x>=S}],"filter-has":[Me,[lt],function(t,s){return s[0].value in t.properties()}],"filter-has-id":[Me,[],function(t){return t.id()!==null&&t.id()!==void 0}],"filter-type-in":[Me,[Yt(Pe)],function(t,s){return s[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Me,[Yt(lt)],function(t,s){return s[0].value.indexOf(t.id())>=0}],"filter-in-small":[Me,[Pe,Yt(lt)],function(t,s){var d=s[0];return s[1].value.indexOf(t.properties()[d.value])>=0}],"filter-in-large":[Me,[Pe,Yt(lt)],function(t,s){var d=s[0],x=s[1];return function(S,M,r,i){for(;r<=i;){var u=r+i>>1;if(M[u]===S)return!0;M[u]>S?i=u-1:r=u+1}return!1}(t.properties()[d.value],x.value,0,x.value.length-1)}],all:{type:Me,overloads:[[[Me,Me],function(t,s){var d=s[1];return s[0].evaluate(t)&&d.evaluate(t)}],[dl(Me),function(t,s){for(var d=0,x=s;d<x.length;d+=1)if(!x[d].evaluate(t))return!1;return!0}]]},any:{type:Me,overloads:[[[Me,Me],function(t,s){var d=s[1];return s[0].evaluate(t)||d.evaluate(t)}],[dl(Me),function(t,s){for(var d=0,x=s;d<x.length;d+=1)if(x[d].evaluate(t))return!0;return!1}]]},"!":[Me,[Me],function(t,s){return!s[0].evaluate(t)}],"is-supported-script":[Me,[Pe],function(t,s){var d=t.globals&&t.globals.isSupportedScript;return!d||d(s[0].evaluate(t))}],upcase:[Pe,[Pe],function(t,s){return s[0].evaluate(t).toUpperCase()}],downcase:[Pe,[Pe],function(t,s){return s[0].evaluate(t).toLowerCase()}],concat:[Pe,dl(lt),function(t,s){return s.map(function(d){return sl(d.evaluate(t))}).join("")}],"resolved-locale":[Pe,[_t],function(t,s){return s[0].evaluate(t).resolvedLocale()}]});var Ts=function(t,s){this.expression=t,this._warningHistory={},this._evaluator=new Va,this._defaultValue=s?function(d){return d.type==="color"&&Is(d.default)?new dn(0,0,0,0):d.type==="color"?dn.parse(d.default)||null:d.default===void 0?null:d.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null};function pl(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Dr}function fu(t,s){var d=new js(Dr,[],s?function(S){var M={color:Le,string:Pe,number:we,enum:Pe,boolean:Me,formatted:si,resolvedImage:Re};return S.type==="array"?Yt(M[S.value]||lt,S.length):M[S.type]}(s):void 0),x=d.parse(t,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Xu(new Ts(x,s)):us(d.errors)}Ts.prototype.evaluateWithoutErrorHandling=function(t,s,d,x,S,M){return this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=x,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)},Ts.prototype.evaluate=function(t,s,d,x,S,M){this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=x,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=M||null;try{var r=this.expression.evaluate(this._evaluator);if(r==null||typeof r=="number"&&r!=r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new bo("Expected value to be one of "+Object.keys(this._enumValues).map(function(i){return JSON.stringify(i)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(i){return this._warningHistory[i.message]||(this._warningHistory[i.message]=!0,typeof console!="undefined"&&console.warn(i.message)),this._defaultValue}};var Ks=function(t,s){this.kind=t,this._styleExpression=s,this.isStateDependent=t!=="constant"&&!as(s.expression)};Ks.prototype.evaluateWithoutErrorHandling=function(t,s,d,x,S,M){return this._styleExpression.evaluateWithoutErrorHandling(t,s,d,x,S,M)},Ks.prototype.evaluate=function(t,s,d,x,S,M){return this._styleExpression.evaluate(t,s,d,x,S,M)};var As=function(t,s,d,x){this.kind=t,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=t!=="camera"&&!as(s.expression),this.interpolationType=x};function Tc(t,s){if((t=fu(t,s)).result==="error")return t;var d=t.value.expression,x=os(d);if(!x&&!cs(s))return us([new le("","data expressions not supported")]);var S=Vs(d,["zoom"]);if(!S&&!pu(s))return us([new le("","zoom expressions not supported")]);var M=function r(i){var u=null;if(i instanceof Hs)u=r(i.result);else if(i instanceof Gs)for(var m=0,b=i.args;m<b.length&&!(u=r(b[m]));m+=1);else(i instanceof qo||i instanceof Ho)&&i.input instanceof ao&&i.input.name==="zoom"&&(u=i);return u instanceof le||i.eachChild(function(E){var T=r(E);T instanceof le?u=T:!u&&T?u=new le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&T&&u!==T&&(u=new le("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}(d);return M||S?M instanceof le?us([M]):M instanceof Ho&&!Xs(s)?us([new le("",'"interpolate" expressions cannot be used with this property')]):Xu(M?new As(x?"camera":"composite",t.value,M.labels,M instanceof Ho?M.interpolation:void 0):new Ks(x?"constant":"source",t.value)):us([new le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}As.prototype.evaluateWithoutErrorHandling=function(t,s,d,x,S,M){return this._styleExpression.evaluateWithoutErrorHandling(t,s,d,x,S,M)},As.prototype.evaluate=function(t,s,d,x,S,M){return this._styleExpression.evaluate(t,s,d,x,S,M)},As.prototype.interpolationFactor=function(t,s,d){return this.interpolationType?Ho.interpolationFactor(this.interpolationType,t,s,d):0};var hs=function(t,s){this._parameters=t,this._specification=s,he(this,function d(x,S){var M,r,i,u=S.type==="color",m=x.stops&&typeof x.stops[0][0]=="object",b=m||!(m||x.property!==void 0),E=x.type||(Xs(S)?"exponential":"interval");if(u&&((x=he({},x)).stops&&(x.stops=x.stops.map(function(rt){return[rt[0],dn.parse(rt[1])]})),x.default=dn.parse(x.default?x.default:S.default)),x.colorSpace&&x.colorSpace!=="rgb"&&!rh[x.colorSpace])throw new Error("Unknown color space: "+x.colorSpace);if(E==="exponential")M=Sc;else if(E==="interval")M=oh;else if(E==="categorical"){M=Ic,r=Object.create(null);for(var T=0,D=x.stops;T<D.length;T+=1){var U=D[T];r[U[0]]=U[1]}i=typeof x.stops[0][0]}else{if(E!=="identity")throw new Error('Unknown function type "'+E+'"');M=Ss}if(m){for(var V={},G=[],q=0;q<x.stops.length;q++){var K=x.stops[q],$=K[0].zoom;V[$]===void 0&&(V[$]={zoom:$,type:x.type,property:x.property,default:x.default,stops:[]},G.push($)),V[$].stops.push([K[0].value,K[1]])}for(var ie=[],pe=0,ve=G;pe<ve.length;pe+=1){var Be=ve[pe];ie.push([V[Be].zoom,d(V[Be],S)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Ho.interpolationFactor.bind(void 0,Qe),zoomStops:ie.map(function(rt){return rt[0]}),evaluate:function(rt,vt){var ot=rt.zoom;return Sc({stops:ie,base:x.base},S,ot).evaluate(ot,vt)}}}if(b){var nt=E==="exponential"?{name:"exponential",base:x.base!==void 0?x.base:1}:null;return{kind:"camera",interpolationType:nt,interpolationFactor:Ho.interpolationFactor.bind(void 0,nt),zoomStops:x.stops.map(function(rt){return rt[0]}),evaluate:function(rt){return M(x,S,rt.zoom,r,i)}}}return{kind:"source",evaluate:function(rt,vt){var ot=vt&&vt.properties?vt.properties[x.property]:void 0;return ot===void 0?ta(x.default,S.default):M(x,S,ot,r,i)}}}(this._parameters,this._specification))};function Da(t){var s=t.key,d=t.value,x=t.valueSpec||{},S=t.objectElementValidators||{},M=t.style,r=t.styleSpec,i=[],u=Rr(d);if(u!=="object")return[new Ve(s,d,"object expected, "+u+" found")];for(var m in d){var b=m.split(".")[0],E=x[b]||x["*"],T=void 0;if(S[b])T=S[b];else if(x[b])T=Nn;else if(S["*"])T=S["*"];else{if(!x["*"]){i.push(new Ve(s,d[m],'unknown property "'+m+'"'));continue}T=Nn}i=i.concat(T({key:(s&&s+".")+m,value:d[m],valueSpec:E,style:M,styleSpec:r,object:d,objectKey:m},d))}for(var D in x)S[D]||x[D].required&&x[D].default===void 0&&d[D]===void 0&&i.push(new Ve(s,d,'missing required property "'+D+'"'));return i}function mu(t){var s=t.value,d=t.valueSpec,x=t.style,S=t.styleSpec,M=t.key,r=t.arrayElementValidator||Nn;if(Rr(s)!=="array")return[new Ve(M,s,"array expected, "+Rr(s)+" found")];if(d.length&&s.length!==d.length)return[new Ve(M,s,"array length "+d.length+" expected, length "+s.length+" found")];if(d["min-length"]&&s.length<d["min-length"])return[new Ve(M,s,"array length at least "+d["min-length"]+" expected, length "+s.length+" found")];var i={type:d.value,values:d.values};S.$version<7&&(i.function=d.function),Rr(d.value)==="object"&&(i=d.value);for(var u=[],m=0;m<s.length;m++)u=u.concat(r({array:s,arrayIndex:m,value:s[m],valueSpec:i,style:x,styleSpec:S,key:M+"["+m+"]"}));return u}function gu(t){var s=t.key,d=t.value,x=t.valueSpec,S=Rr(d);return S==="number"&&d!=d&&(S="NaN"),S!=="number"?[new Ve(s,d,"number expected, "+S+" found")]:"minimum"in x&&d<x.minimum?[new Ve(s,d,d+" is less than the minimum value "+x.minimum)]:"maximum"in x&&d>x.maximum?[new Ve(s,d,d+" is greater than the maximum value "+x.maximum)]:[]}function fl(t){var s,d,x,S=t.valueSpec,M=W(t.value.type),r={},i=M!=="categorical"&&t.value.property===void 0,u=!i,m=Rr(t.value.stops)==="array"&&Rr(t.value.stops[0])==="array"&&Rr(t.value.stops[0][0])==="object",b=Da({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(D){if(M==="identity")return[new Ve(D.key,D.value,'identity function may not have a "stops" property')];var U=[],V=D.value;return U=U.concat(mu({key:D.key,value:V,valueSpec:D.valueSpec,style:D.style,styleSpec:D.styleSpec,arrayElementValidator:E})),Rr(V)==="array"&&V.length===0&&U.push(new Ve(D.key,V,"array must have at least one stop")),U},default:function(D){return Nn({key:D.key,value:D.value,valueSpec:S,style:D.style,styleSpec:D.styleSpec})}}});return M==="identity"&&i&&b.push(new Ve(t.key,t.value,'missing required property "property"')),M==="identity"||t.value.stops||b.push(new Ve(t.key,t.value,'missing required property "stops"')),M==="exponential"&&t.valueSpec.expression&&!Xs(t.valueSpec)&&b.push(new Ve(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!cs(t.valueSpec)?b.push(new Ve(t.key,t.value,"property functions not supported")):i&&!pu(t.valueSpec)&&b.push(new Ve(t.key,t.value,"zoom functions not supported"))),M!=="categorical"&&!m||t.value.property!==void 0||b.push(new Ve(t.key,t.value,'"property" property is required')),b;function E(D){var U=[],V=D.value,G=D.key;if(Rr(V)!=="array")return[new Ve(G,V,"array expected, "+Rr(V)+" found")];if(V.length!==2)return[new Ve(G,V,"array length 2 expected, length "+V.length+" found")];if(m){if(Rr(V[0])!=="object")return[new Ve(G,V,"object expected, "+Rr(V[0])+" found")];if(V[0].zoom===void 0)return[new Ve(G,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new Ve(G,V,"object stop key must have value")];if(x&&x>W(V[0].zoom))return[new Ve(G,V[0].zoom,"stop zoom values must appear in ascending order")];W(V[0].zoom)!==x&&(x=W(V[0].zoom),d=void 0,r={}),U=U.concat(Da({key:G+"[0]",value:V[0],valueSpec:{zoom:{}},style:D.style,styleSpec:D.styleSpec,objectElementValidators:{zoom:gu,value:T}}))}else U=U.concat(T({key:G+"[0]",value:V[0],valueSpec:{},style:D.style,styleSpec:D.styleSpec},V));return pl(X(V[1]))?U.concat([new Ve(G+"[1]",V[1],"expressions are not allowed in function stops.")]):U.concat(Nn({key:G+"[1]",value:V[1],valueSpec:S,style:D.style,styleSpec:D.styleSpec}))}function T(D,U){var V=Rr(D.value),G=W(D.value),q=D.value!==null?D.value:U;if(s){if(V!==s)return[new Ve(D.key,q,V+" stop domain type must match previous stop domain type "+s)]}else s=V;if(V!=="number"&&V!=="string"&&V!=="boolean")return[new Ve(D.key,q,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&M!=="categorical"){var K="number expected, "+V+" found";return cs(S)&&M===void 0&&(K+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ve(D.key,q,K)]}return M!=="categorical"||V!=="number"||isFinite(G)&&Math.floor(G)===G?M!=="categorical"&&V==="number"&&d!==void 0&&G<d?[new Ve(D.key,q,"stop domain values must appear in ascending order")]:(d=G,M==="categorical"&&G in r?[new Ve(D.key,q,"stop domain values must be unique")]:(r[G]=!0,[])):[new Ve(D.key,q,"integer expected, found "+G)]}}function Ka(t){var s=(t.expressionContext==="property"?Tc:fu)(X(t.value),t.valueSpec);if(s.result==="error")return s.value.map(function(x){return new Ve(""+t.key+x.key,t.value,x.message)});var d=s.value.expression||s.value._styleExpression.expression;if(t.expressionContext==="property"&&t.propertyKey==="text-font"&&!d.outputDefined())return[new Ve(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if(t.expressionContext==="property"&&t.propertyType==="layout"&&!as(d))return[new Ve(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if(t.expressionContext==="filter"&&!as(d))return[new Ve(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&t.expressionContext.indexOf("cluster")===0){if(!Vs(d,["zoom","feature-state"]))return[new Ve(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(t.expressionContext==="cluster-initial"&&!os(d))return[new Ve(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rl(t){var s=t.key,d=t.value,x=t.valueSpec,S=[];return Array.isArray(x.values)?x.values.indexOf(W(d))===-1&&S.push(new Ve(s,d,"expected one of ["+x.values.join(", ")+"], "+JSON.stringify(d)+" found")):Object.keys(x.values).indexOf(W(d))===-1&&S.push(new Ve(s,d,"expected one of ["+Object.keys(x.values).join(", ")+"], "+JSON.stringify(d)+" found")),S}function Js(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var s=0,d=t.slice(1);s<d.length;s+=1){var x=d[s];if(!Js(x)&&typeof x!="boolean")return!1}return!0;default:return!0}}hs.deserialize=function(t){return new hs(t._parameters,t._specification)},hs.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Ju={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yu(t){if(t==null)return{filter:function(){return!0},needGeometry:!1};Js(t)||(t=Cs(t));var s=fu(t,Ju);if(s.result==="error")throw new Error(s.value.map(function(d){return d.key+": "+d.message}).join(", "));return{filter:function(d,x,S){return s.value.evaluate(d,x,{},S)},needGeometry:function d(x){if(!Array.isArray(x))return!1;if(x[0]==="within")return!0;for(var S=1;S<x.length;S++)if(d(x[S]))return!0;return!1}(t)}}function ah(t,s){return t<s?-1:t>s?1:0}function Cs(t){if(!t)return!0;var s,d=t[0];return t.length<=1?d!=="any":d==="=="?Yu(t[1],t[2],"=="):d==="!="?ia(Yu(t[1],t[2],"==")):d==="<"||d===">"||d==="<="||d===">="?Yu(t[1],t[2],d):d==="any"?(s=t.slice(1),["any"].concat(s.map(Cs))):d==="all"?["all"].concat(t.slice(1).map(Cs)):d==="none"?["all"].concat(t.slice(1).map(Cs).map(ia)):d==="in"?Ol(t[1],t.slice(2)):d==="!in"?ia(Ol(t[1],t.slice(2))):d==="has"?Bl(t[1]):d==="!has"?ia(Bl(t[1])):d!=="within"||t}function Yu(t,s,d){switch(t){case"$type":return["filter-type-"+d,s];case"$id":return["filter-id-"+d,s];default:return["filter-"+d,t,s]}}function Ol(t,s){if(s.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(function(d){return typeof d!=typeof s[0]})?["filter-in-large",t,["literal",s.sort(ah)]]:["filter-in-small",t,["literal",s]]}}function Bl(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ia(t){return["!",t]}function na(t){return Js(X(t.value))?Ka(he({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function s(d){var x=d.value,S=d.key;if(Rr(x)!=="array")return[new Ve(S,x,"array expected, "+Rr(x)+" found")];var M,r=d.styleSpec,i=[];if(x.length<1)return[new Ve(S,x,"filter array must have at least 1 element")];switch(i=i.concat(Rl({key:S+"[0]",value:x[0],valueSpec:r.filter_operator,style:d.style,styleSpec:d.styleSpec})),W(x[0])){case"<":case"<=":case">":case">=":x.length>=2&&W(x[1])==="$type"&&i.push(new Ve(S,x,'"$type" cannot be use with operator "'+x[0]+'"'));case"==":case"!=":x.length!==3&&i.push(new Ve(S,x,'filter array for operator "'+x[0]+'" must have 3 elements'));case"in":case"!in":x.length>=2&&(M=Rr(x[1]))!=="string"&&i.push(new Ve(S+"[1]",x[1],"string expected, "+M+" found"));for(var u=2;u<x.length;u++)M=Rr(x[u]),W(x[1])==="$type"?i=i.concat(Rl({key:S+"["+u+"]",value:x[u],valueSpec:r.geometry_type,style:d.style,styleSpec:d.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&i.push(new Ve(S+"["+u+"]",x[u],"string, number, or boolean expected, "+M+" found"));break;case"any":case"all":case"none":for(var m=1;m<x.length;m++)i=i.concat(s({key:S+"["+m+"]",value:x[m],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":M=Rr(x[1]),x.length!==2?i.push(new Ve(S,x,'filter array for "'+x[0]+'" operator must have 2 elements')):M!=="string"&&i.push(new Ve(S+"[1]",x[1],"string expected, "+M+" found"));break;case"within":M=Rr(x[1]),x.length!==2?i.push(new Ve(S,x,'filter array for "'+x[0]+'" operator must have 2 elements')):M!=="object"&&i.push(new Ve(S+"[1]",x[1],"object expected, "+M+" found"))}return i}(t)}function Ac(t,s){var d=t.key,x=t.style,S=t.styleSpec,M=t.value,r=t.objectKey,i=S[s+"_"+t.layerType];if(!i)return[];var u=r.match(/^(.*)-transition$/);if(s==="paint"&&u&&i[u[1]]&&i[u[1]].transition)return Nn({key:d,value:M,valueSpec:S.transition,style:x,styleSpec:S});var m,b=t.valueSpec||i[r];if(!b)return[new Ve(d,M,'unknown property "'+r+'"')];if(Rr(M)==="string"&&cs(b)&&!b.tokens&&(m=/^{([^}]+)}$/.exec(M)))return[new Ve(d,M,'"'+r+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(m[1])+" }`.")];var E=[];return t.layerType==="symbol"&&(r==="text-field"&&x&&!x.glyphs&&E.push(new Ve(d,M,'use of "text-field" requires a style "glyphs" property')),r==="text-font"&&Is(X(M))&&W(M.type)==="identity"&&E.push(new Ve(d,M,'"text-font" does not support identity functions'))),E.concat(Nn({key:t.key,value:M,valueSpec:b,style:x,styleSpec:S,expressionContext:"property",propertyType:s,propertyKey:r}))}function ks(t){return Ac(t,"paint")}function Fl(t){return Ac(t,"layout")}function ml(t){var s=[],d=t.value,x=t.key,S=t.style,M=t.styleSpec;d.type||d.ref||s.push(new Ve(x,d,'either "type" or "ref" is required'));var r,i=W(d.type),u=W(d.ref);if(d.id)for(var m=W(d.id),b=0;b<t.arrayIndex;b++){var E=S.layers[b];W(E.id)===m&&s.push(new Ve(x,d.id,'duplicate layer id "'+d.id+'", previously used at line '+E.id.__line__))}if("ref"in d)["type","source","source-layer","filter","layout"].forEach(function(U){U in d&&s.push(new Ve(x,d[U],'"'+U+'" is prohibited for ref layers'))}),S.layers.forEach(function(U){W(U.id)===u&&(r=U)}),r?r.ref?s.push(new Ve(x,d.ref,"ref cannot reference another ref layer")):i=W(r.type):s.push(new Ve(x,d.ref,'ref layer "'+u+'" not found'));else if(i!=="background")if(d.source){var T=S.sources&&S.sources[d.source],D=T&&W(T.type);T?D==="vector"&&i==="raster"?s.push(new Ve(x,d.source,'layer "'+d.id+'" requires a raster source')):D==="raster"&&i!=="raster"?s.push(new Ve(x,d.source,'layer "'+d.id+'" requires a vector source')):D!=="vector"||d["source-layer"]?D==="raster-dem"&&i!=="hillshade"?s.push(new Ve(x,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):i!=="line"||!d.paint||!d.paint["line-gradient"]||D==="geojson"&&T.lineMetrics||s.push(new Ve(x,d,'layer "'+d.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):s.push(new Ve(x,d,'layer "'+d.id+'" must specify a "source-layer"')):s.push(new Ve(x,d.source,'source "'+d.source+'" not found'))}else s.push(new Ve(x,d,'missing required property "source"'));return s=s.concat(Da({key:x,value:d,valueSpec:M.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Nn({key:x+".type",value:d.type,valueSpec:M.layer.type,style:t.style,styleSpec:t.styleSpec,object:d,objectKey:"type"})},filter:na,layout:function(U){return Da({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":function(V){return Fl(he({layerType:i},V))}}})},paint:function(U){return Da({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":function(V){return ks(he({layerType:i},V))}}})}}}))}function Ra(t){var s=t.value,d=t.key,x=Rr(s);return x!=="string"?[new Ve(d,s,"string expected, "+x+" found")]:[]}var Gr={promoteId:function(t){var s=t.key,d=t.value;if(Rr(d)==="string")return Ra({key:s,value:d});var x=[];for(var S in d)x.push.apply(x,Ra({key:s+"."+S,value:d[S]}));return x}};function Ul(t){var s=t.value,d=t.key,x=t.styleSpec,S=t.style;if(!s.type)return[new Ve(d,s,'"type" is required')];var M,r=W(s.type);switch(r){case"vector":case"raster":case"raster-dem":return Da({key:d,value:s,valueSpec:x["source_"+r.replace("-","_")],style:t.style,styleSpec:x,objectElementValidators:Gr});case"geojson":if(M=Da({key:d,value:s,valueSpec:x.source_geojson,style:S,styleSpec:x,objectElementValidators:Gr}),s.cluster)for(var i in s.clusterProperties){var u=s.clusterProperties[i],m=u[0],b=typeof m=="string"?[m,["accumulated"],["get",i]]:m;M.push.apply(M,Ka({key:d+"."+i+".map",value:u[1],expressionContext:"cluster-map"})),M.push.apply(M,Ka({key:d+"."+i+".reduce",value:b,expressionContext:"cluster-reduce"}))}return M;case"video":return Da({key:d,value:s,valueSpec:x.source_video,style:S,styleSpec:x});case"image":return Da({key:d,value:s,valueSpec:x.source_image,style:S,styleSpec:x});case"canvas":return[new Ve(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rl({key:d+".type",value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:S,styleSpec:x})}}function gl(t){var s=t.value,d=t.styleSpec,x=d.light,S=t.style,M=[],r=Rr(s);if(s===void 0)return M;if(r!=="object")return M.concat([new Ve("light",s,"object expected, "+r+" found")]);for(var i in s){var u=i.match(/^(.*)-transition$/);M=M.concat(u&&x[u[1]]&&x[u[1]].transition?Nn({key:i,value:s[i],valueSpec:d.transition,style:S,styleSpec:d}):x[i]?Nn({key:i,value:s[i],valueSpec:x[i],style:S,styleSpec:d}):[new Ve(i,s[i],'unknown property "'+i+'"')])}return M}var Ms={"*":function(){return[]},array:mu,boolean:function(t){var s=t.value,d=t.key,x=Rr(s);return x!=="boolean"?[new Ve(d,s,"boolean expected, "+x+" found")]:[]},number:gu,color:function(t){var s=t.key,d=t.value,x=Rr(d);return x!=="string"?[new Ve(s,d,"color expected, "+x+" found")]:Ii(d)===null?[new Ve(s,d,'color expected, "'+d+'" found')]:[]},constants:mt,enum:Rl,filter:na,function:fl,layer:ml,object:Da,source:Ul,light:gl,string:Ra,formatted:function(t){return Ra(t).length===0?[]:Ka(t)},resolvedImage:function(t){return Ra(t).length===0?[]:Ka(t)}};function Nn(t){var s=t.value,d=t.valueSpec,x=t.styleSpec;return d.expression&&Is(W(s))?fl(t):d.expression&&pl(X(s))?Ka(t):d.type&&Ms[d.type]?Ms[d.type](t):Da(he({},t,{valueSpec:d.type?x[d.type]:d}))}function vr(t){var s=t.value,d=t.key,x=Ra(t);return x.length||(s.indexOf("{fontstack}")===-1&&x.push(new Ve(d,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&x.push(new Ve(d,s,'"glyphs" url must include a "{range}" token'))),x}function Si(t,s){s===void 0&&(s=Ie);var d=[];return d=d.concat(Nn({key:"",value:t,valueSpec:s.$root,styleSpec:s,style:t,objectElementValidators:{glyphs:vr,"*":function(){return[]}}})),t.constants&&(d=d.concat(mt({key:"constants",value:t.constants,style:t,styleSpec:s}))),yl(d)}function yl(t){return[].concat(t).sort(function(s,d){return s.line-d.line})}function ds(t){return function(){for(var s=[],d=arguments.length;d--;)s[d]=arguments[d];return yl(t.apply(this,s))}}Si.source=ds(Ul),Si.light=ds(gl),Si.layer=ds(ml),Si.filter=ds(na),Si.paintProperty=ds(ks),Si.layoutProperty=ds(Fl);var Ja=Si,_u=Ja.light,Mi=Ja.paintProperty,_l=Ja.layoutProperty;function Nl(t,s){var d=!1;if(s&&s.length)for(var x=0,S=s;x<S.length;x+=1)t.fire(new $e(new Error(S[x].message))),d=!0;return d}var Ps=Jr;function Jr(t,s,d){var x=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var S=new Int32Array(this.arrayBuffer);t=S[0],this.d=(s=S[1])+2*(d=S[2]);for(var M=0;M<this.d*this.d;M++){var r=S[3+M],i=S[3+M+1];x.push(r===i?null:S.subarray(r,i))}var u=S[3+x.length+1];this.keys=S.subarray(S[3+x.length],u),this.bboxes=S.subarray(u),this.insert=this._insertReadonly}else{this.d=s+2*d;for(var m=0;m<this.d*this.d;m++)x.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=t,this.padding=d,this.scale=s/t,this.uid=0;var b=d/s*t;this.min=-b,this.max=t+b}Jr.prototype.insert=function(t,s,d,x,S){this._forEachCell(s,d,x,S,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(S)},Jr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jr.prototype._insertCell=function(t,s,d,x,S,M){this.cells[S].push(M)},Jr.prototype.query=function(t,s,d,x,S){var M=this.min,r=this.max;if(t<=M&&s<=M&&r<=d&&r<=x&&!S)return Array.prototype.slice.call(this.keys);var i=[];return this._forEachCell(t,s,d,x,this._queryCell,i,{},S),i},Jr.prototype._queryCell=function(t,s,d,x,S,M,r,i){var u=this.cells[S];if(u!==null)for(var m=this.keys,b=this.bboxes,E=0;E<u.length;E++){var T=u[E];if(r[T]===void 0){var D=4*T;(i?i(b[D+0],b[D+1],b[D+2],b[D+3]):t<=b[D+2]&&s<=b[D+3]&&d>=b[D+0]&&x>=b[D+1])?(r[T]=!0,M.push(m[T])):r[T]=!1}}},Jr.prototype._forEachCell=function(t,s,d,x,S,M,r,i){for(var u=this._convertToCellCoord(t),m=this._convertToCellCoord(s),b=this._convertToCellCoord(d),E=this._convertToCellCoord(x),T=u;T<=b;T++)for(var D=m;D<=E;D++){var U=this.d*D+T;if((!i||i(this._convertFromCellCoord(T),this._convertFromCellCoord(D),this._convertFromCellCoord(T+1),this._convertFromCellCoord(D+1)))&&S.call(this,t,s,d,x,U,M,r,i))return}},Jr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Jr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Jr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,s=3+this.cells.length+1+1,d=0,x=0;x<this.cells.length;x++)d+=this.cells[x].length;var S=new Int32Array(s+d+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;for(var M=s,r=0;r<t.length;r++){var i=t[r];S[3+r]=M,S.set(i,M),M+=i.length}return S[3+t.length]=M,S.set(this.keys,M),S[3+t.length+1]=M+=this.keys.length,S.set(this.bboxes,M),M+=this.bboxes.length,S.buffer};var Vl=O.ImageData,Cc=O.ImageBitmap,fo={};function Ri(t,s,d){d===void 0&&(d={}),Object.defineProperty(s,"_classRegistryKey",{value:t,writeable:!1}),fo[t]={klass:s,omit:d.omit||[],shallow:d.shallow||[]}}for(var Jo in Ri("Object",Object),Ps.serialize=function(t,s){var d=t.toArrayBuffer();return s&&s.push(d),{buffer:d}},Ps.deserialize=function(t){return new Ps(t.buffer)},Ri("Grid",Ps),Ri("Color",dn),Ri("Error",Error),Ri("ResolvedImage",Ko),Ri("StylePropertyFunction",hs),Ri("StyleExpression",Ts,{omit:["_evaluator"]}),Ri("ZoomDependentExpression",As),Ri("ZoomConstantExpression",Ks),Ri("CompoundExpression",ao,{omit:["_evaluate"]}),Dr)Dr[Jo]._classRegistryKey||Ri("Expression_"+Jo,Dr[Jo]);function jl(t){return t&&typeof ArrayBuffer!="undefined"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}function Ys(t){return Cc&&t instanceof Cc}function Oa(t,s){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(jl(t)||Ys(t))return s&&s.push(t),t;if(ArrayBuffer.isView(t)){var d=t;return s&&s.push(d.buffer),d}if(t instanceof Vl)return s&&s.push(t.data.buffer),t;if(Array.isArray(t)){for(var x=[],S=0,M=t;S<M.length;S+=1)x.push(Oa(M[S],s));return x}if(typeof t=="object"){var r=t.constructor,i=r._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class");var u=r.serialize?r.serialize(t,s):{};if(!r.serialize){for(var m in t)if(t.hasOwnProperty(m)&&!(fo[i].omit.indexOf(m)>=0)){var b=t[m];u[m]=fo[i].shallow.indexOf(m)>=0?b:Oa(b,s)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(u.$name=i),u}throw new Error("can't serialize object of type "+typeof t)}function Hr(t){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||jl(t)||Ys(t)||ArrayBuffer.isView(t)||t instanceof Vl)return t;if(Array.isArray(t))return t.map(Hr);if(typeof t=="object"){var s=t.$name||"Object",d=fo[s].klass;if(!d)throw new Error("can't deserialize unregistered class "+s);if(d.deserialize)return d.deserialize(t);for(var x=Object.create(d.prototype),S=0,M=Object.keys(t);S<M.length;S+=1){var r=M[S];if(r!=="$name"){var i=t[r];x[r]=fo[s].shallow.indexOf(r)>=0?i:Hr(i)}}return x}throw new Error("can't deserialize object of type "+typeof t)}var ps=function(){this.first=!0};ps.prototype.update=function(t,s){var d=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=d,!0))};var fi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function vu(t){for(var s=0,d=t;s<d.length;s+=1)if(Ls(d[s].charCodeAt(0)))return!0;return!1}function Ls(t){return!(t!==746&&t!==747&&(t<4352||!(fi["Bopomofo Extended"](t)||fi.Bopomofo(t)||fi["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||fi["CJK Compatibility Ideographs"](t)||fi["CJK Compatibility"](t)||fi["CJK Radicals Supplement"](t)||fi["CJK Strokes"](t)||!(!fi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||t===12336)||fi["CJK Unified Ideographs Extension A"](t)||fi["CJK Unified Ideographs"](t)||fi["Enclosed CJK Letters and Months"](t)||fi["Hangul Compatibility Jamo"](t)||fi["Hangul Jamo Extended-A"](t)||fi["Hangul Jamo Extended-B"](t)||fi["Hangul Jamo"](t)||fi["Hangul Syllables"](t)||fi.Hiragana(t)||fi["Ideographic Description Characters"](t)||fi.Kanbun(t)||fi["Kangxi Radicals"](t)||fi["Katakana Phonetic Extensions"](t)||fi.Katakana(t)&&t!==12540||!(!fi["Halfwidth and Fullwidth Forms"](t)||t===65288||t===65289||t===65293||t>=65306&&t<=65310||t===65339||t===65341||t===65343||t>=65371&&t<=65503||t===65507||t>=65512&&t<=65519)||!(!fi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||fi["Unified Canadian Aboriginal Syllabics"](t)||fi["Unified Canadian Aboriginal Syllabics Extended"](t)||fi["Vertical Forms"](t)||fi["Yijing Hexagram Symbols"](t)||fi["Yi Syllables"](t)||fi["Yi Radicals"](t))))}function bu(t){return!(Ls(t)||function(s){return!!(fi["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||fi["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||fi["Letterlike Symbols"](s)||fi["Number Forms"](s)||fi["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||fi["Control Pictures"](s)&&s!==9251||fi["Optical Character Recognition"](s)||fi["Enclosed Alphanumerics"](s)||fi["Geometric Shapes"](s)||fi["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||fi["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||fi["CJK Symbols and Punctuation"](s)||fi.Katakana(s)||fi["Private Use Area"](s)||fi["CJK Compatibility Forms"](s)||fi["Small Form Variants"](s)||fi["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(t))}function ha(t){return t>=1424&&t<=2303||fi["Arabic Presentation Forms-A"](t)||fi["Arabic Presentation Forms-B"](t)}function Yr(t,s){return!(!s&&ha(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||fi.Khmer(t))}function Vr(t){for(var s=0,d=t;s<d.length;s+=1)if(ha(d[s].charCodeAt(0)))return!0;return!1}var vl=null,Yo="unavailable",Ya=null,kc=function(t){t&&typeof t=="string"&&t.indexOf("NetworkError")>-1&&(Yo="error"),vl&&vl(t)};function ql(){Mc.fire(new ze("pluginStateChange",{pluginStatus:Yo,pluginURL:Ya}))}var Mc=new it,qa=function(){return Yo},ya=function(){if(Yo!=="deferred"||!Ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yo="loading",ql(),Ya&&To({url:Ya},function(t){t?kc(t):(Yo="loaded",ql())})},Bi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Yo==="loaded"||Bi.applyArabicShaping!=null},isLoading:function(){return Yo==="loading"},setState:function(t){Yo=t.pluginStatus,Ya=t.pluginURL},isParsed:function(){return Bi.applyArabicShaping!=null&&Bi.processBidirectionalText!=null&&Bi.processStyledBidirectionalText!=null},getPluginURL:function(){return Ya}},ci=function(t,s){this.zoom=t,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ps,this.transition={})};ci.prototype.isSupportedScript=function(t){return function(s,d){for(var x=0,S=s;x<S.length;x+=1)if(!Yr(S[x].charCodeAt(0),d))return!1;return!0}(t,Bi.isLoaded())},ci.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ci.prototype.getCrossfadeParameters=function(){var t=this.zoom,s=t-Math.floor(t),d=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}};var _a=function(t,s){this.property=t,this.value=s,this.expression=function(d,x){if(Is(d))return new hs(d,x);if(pl(d)){var S=Tc(d,x);if(S.result==="error")throw new Error(S.value.map(function(r){return r.key+": "+r.message}).join(", "));return S.value}var M=d;return typeof d=="string"&&x.type==="color"&&(M=dn.parse(d)),{kind:"constant",evaluate:function(){return M}}}(s===void 0?t.specification.default:s,t.specification)};_a.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},_a.prototype.possiblyEvaluate=function(t,s,d){return this.property.possiblyEvaluate(this,t,s,d)};var ra=function(t){this.property=t,this.value=new _a(t,void 0)};ra.prototype.transitioned=function(t,s){return new Qr(this.property,this.value,s,oe({},t.transition,this.transition),t.now)},ra.prototype.untransitioned=function(){return new Qr(this.property,this.value,null,{},0)};var Co=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Co.prototype.getValue=function(t){return Ue(this._values[t].value.value)},Co.prototype.setValue=function(t,s){this._values.hasOwnProperty(t)||(this._values[t]=new ra(this._values[t].property)),this._values[t].value=new _a(this._values[t].property,s===null?void 0:Ue(s))},Co.prototype.getTransition=function(t){return Ue(this._values[t].transition)},Co.prototype.setTransition=function(t,s){this._values.hasOwnProperty(t)||(this._values[t]=new ra(this._values[t].property)),this._values[t].transition=Ue(s)||void 0},Co.prototype.serialize=function(){for(var t={},s=0,d=Object.keys(this._values);s<d.length;s+=1){var x=d[s],S=this.getValue(x);S!==void 0&&(t[x]=S);var M=this.getTransition(x);M!==void 0&&(t[x+"-transition"]=M)}return t},Co.prototype.transitioned=function(t,s){for(var d=new va(this._properties),x=0,S=Object.keys(this._values);x<S.length;x+=1){var M=S[x];d._values[M]=this._values[M].transitioned(t,s._values[M])}return d},Co.prototype.untransitioned=function(){for(var t=new va(this._properties),s=0,d=Object.keys(this._values);s<d.length;s+=1){var x=d[s];t._values[x]=this._values[x].untransitioned()}return t};var Qr=function(t,s,d,x,S){this.property=t,this.value=s,this.begin=S+x.delay||0,this.end=this.begin+x.duration||0,t.specification.transition&&(x.delay||x.duration)&&(this.prior=d)};Qr.prototype.possiblyEvaluate=function(t,s,d){var x=t.now||0,S=this.value.possiblyEvaluate(t,s,d),M=this.prior;if(M){if(x>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(x<this.begin)return M.possiblyEvaluate(t,s,d);var r=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(t,s,d),S,function(i){if(i<=0)return 0;if(i>=1)return 1;var u=i*i,m=u*i;return 4*(i<.5?m:3*(i-u)+m-.75)}(r))}return S};var va=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};va.prototype.possiblyEvaluate=function(t,s,d){for(var x=new zs(this._properties),S=0,M=Object.keys(this._values);S<M.length;S+=1){var r=M[S];x._values[r]=this._values[r].possiblyEvaluate(t,s,d)}return x},va.prototype.hasTransition=function(){for(var t=0,s=Object.keys(this._values);t<s.length;t+=1)if(this._values[s[t]].prior)return!0;return!1};var to=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};to.prototype.getValue=function(t){return Ue(this._values[t].value)},to.prototype.setValue=function(t,s){this._values[t]=new _a(this._values[t].property,s===null?void 0:Ue(s))},to.prototype.serialize=function(){for(var t={},s=0,d=Object.keys(this._values);s<d.length;s+=1){var x=d[s],S=this.getValue(x);S!==void 0&&(t[x]=S)}return t},to.prototype.possiblyEvaluate=function(t,s,d){for(var x=new zs(this._properties),S=0,M=Object.keys(this._values);S<M.length;S+=1){var r=M[S];x._values[r]=this._values[r].possiblyEvaluate(t,s,d)}return x};var oa=function(t,s,d){this.property=t,this.value=s,this.parameters=d};oa.prototype.isConstant=function(){return this.value.kind==="constant"},oa.prototype.constantOr=function(t){return this.value.kind==="constant"?this.value.value:t},oa.prototype.evaluate=function(t,s,d,x){return this.property.evaluate(this.value,this.parameters,t,s,d,x)};var zs=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};zs.prototype.get=function(t){return this._values[t]};var gi=function(t){this.specification=t};gi.prototype.possiblyEvaluate=function(t,s){return t.expression.evaluate(s)},gi.prototype.interpolate=function(t,s,d){var x=Go[this.specification.type];return x?x(t,s,d):t};var mi=function(t,s){this.specification=t,this.overrides=s};mi.prototype.possiblyEvaluate=function(t,s,d,x){return new oa(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(s,null,{},d,x)}:t.expression,s)},mi.prototype.interpolate=function(t,s,d){if(t.value.kind!=="constant"||s.value.kind!=="constant")return t;if(t.value.value===void 0||s.value.value===void 0)return new oa(this,{kind:"constant",value:void 0},t.parameters);var x=Go[this.specification.type];return x?new oa(this,{kind:"constant",value:x(t.value.value,s.value.value,d)},t.parameters):t},mi.prototype.evaluate=function(t,s,d,x,S,M){return t.kind==="constant"?t.value:t.evaluate(s,d,x,S,M)};var xu=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.possiblyEvaluate=function(d,x,S,M){if(d.value===void 0)return new oa(this,{kind:"constant",value:void 0},x);if(d.expression.kind==="constant"){var r=d.expression.evaluate(x,null,{},S,M),i=d.property.specification.type==="resolvedImage"&&typeof r!="string"?r.name:r,u=this._calculate(i,i,i,x);return new oa(this,{kind:"constant",value:u},x)}if(d.expression.kind==="camera"){var m=this._calculate(d.expression.evaluate({zoom:x.zoom-1}),d.expression.evaluate({zoom:x.zoom}),d.expression.evaluate({zoom:x.zoom+1}),x);return new oa(this,{kind:"constant",value:m},x)}return new oa(this,d.expression,x)},s.prototype.evaluate=function(d,x,S,M,r,i){if(d.kind==="source"){var u=d.evaluate(x,S,M,r,i);return this._calculate(u,u,u,x)}return d.kind==="composite"?this._calculate(d.evaluate({zoom:Math.floor(x.zoom)-1},S,M),d.evaluate({zoom:Math.floor(x.zoom)},S,M),d.evaluate({zoom:Math.floor(x.zoom)+1},S,M),x):d.value},s.prototype._calculate=function(d,x,S,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:d,to:x}:{from:S,to:x}},s.prototype.interpolate=function(d){return d},s}(mi),xo=function(t){this.specification=t};xo.prototype.possiblyEvaluate=function(t,s,d,x){if(t.value!==void 0){if(t.expression.kind==="constant"){var S=t.expression.evaluate(s,null,{},d,x);return this._calculate(S,S,S,s)}return this._calculate(t.expression.evaluate(new ci(Math.floor(s.zoom-1),s)),t.expression.evaluate(new ci(Math.floor(s.zoom),s)),t.expression.evaluate(new ci(Math.floor(s.zoom+1),s)),s)}},xo.prototype._calculate=function(t,s,d,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:d,to:s}},xo.prototype.interpolate=function(t){return t};var da=function(t){this.specification=t};da.prototype.possiblyEvaluate=function(t,s,d,x){return!!t.expression.evaluate(s,null,{},d,x)},da.prototype.interpolate=function(){return!1};var C=function(t){for(var s in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var d=t[s];d.specification.overridable&&this.overridableProperties.push(s);var x=this.defaultPropertyValues[s]=new _a(d,void 0),S=this.defaultTransitionablePropertyValues[s]=new ra(d);this.defaultTransitioningPropertyValues[s]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=x.possiblyEvaluate({})}};Ri("DataDrivenProperty",mi),Ri("DataConstantProperty",gi),Ri("CrossFadedDataDrivenProperty",xu),Ri("CrossFadedProperty",xo),Ri("ColorRampProperty",da);var l=function(t){function s(d,x){if(t.call(this),this.id=d.id,this.type=d.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},d.type!=="custom"&&(this.metadata=(d=d).metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,d.type!=="background"&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),x.layout&&(this._unevaluatedLayout=new to(x.layout)),x.paint)){for(var S in this._transitionablePaint=new Co(x.paint),d.paint)this.setPaintProperty(S,d.paint[S],{validate:!1});for(var M in d.layout)this.setLayoutProperty(M,d.layout[M],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zs(x.paint)}}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},s.prototype.getLayoutProperty=function(d){return d==="visibility"?this.visibility:this._unevaluatedLayout.getValue(d)},s.prototype.setLayoutProperty=function(d,x,S){S===void 0&&(S={}),x!=null&&this._validate(_l,"layers."+this.id+".layout."+d,d,x,S)||(d!=="visibility"?this._unevaluatedLayout.setValue(d,x):this.visibility=x)},s.prototype.getPaintProperty=function(d){return ct(d,"-transition")?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)},s.prototype.setPaintProperty=function(d,x,S){if(S===void 0&&(S={}),x!=null&&this._validate(Mi,"layers."+this.id+".paint."+d,d,x,S))return!1;if(ct(d,"-transition"))return this._transitionablePaint.setTransition(d.slice(0,-11),x||void 0),!1;var M=this._transitionablePaint._values[d],r=M.property.specification["property-type"]==="cross-faded-data-driven",i=M.value.isDataDriven(),u=M.value;this._transitionablePaint.setValue(d,x),this._handleSpecialPaintPropertyUpdate(d);var m=this._transitionablePaint._values[d].value;return m.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(d,u,m)},s.prototype._handleSpecialPaintPropertyUpdate=function(d){},s.prototype._handleOverridablePaintPropertyUpdate=function(d,x,S){return!1},s.prototype.isHidden=function(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||this.visibility==="none"},s.prototype.updateTransitions=function(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)},s.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},s.prototype.recalculate=function(d,x){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,x)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,x)},s.prototype.serialize=function(){var d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),Ge(d,function(x,S){return!(x===void 0||S==="layout"&&!Object.keys(x).length||S==="paint"&&!Object.keys(x).length)})},s.prototype._validate=function(d,x,S,M,r){return r===void 0&&(r={}),(!r||r.validate!==!1)&&Nl(this,d.call(Ja,{key:x,layerType:this.type,objectKey:S,value:M,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))},s.prototype.is3D=function(){return!1},s.prototype.isTileClipped=function(){return!1},s.prototype.hasOffscreenPass=function(){return!1},s.prototype.resize=function(){},s.prototype.isStateDependent=function(){for(var d in this.paint._values){var x=this.paint.get(d);if(x instanceof oa&&cs(x.property.specification)&&(x.value.kind==="source"||x.value.kind==="composite")&&x.value.isStateDependent)return!0}return!1},s}(it),v={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},A=function(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},k=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function B(t,s){s===void 0&&(s=1);var d=0,x=0;return{members:t.map(function(S){var M=v[S.type].BYTES_PER_ELEMENT,r=d=j(d,Math.max(s,M)),i=S.components||1;return x=Math.max(x,M),d+=M*i,{name:S.name,type:S.type,components:i,offset:r}}),size:j(d,Math.max(x,s)),alignment:s}}function j(t,s){return Math.ceil(t/s)*s}k.serialize=function(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},k.deserialize=function(t){var s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s},k.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},k.prototype.clear=function(){this.length=0},k.prototype.resize=function(t){this.reserve(t),this.length=t},k.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}},k.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Z=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x){var S=this.length;return this.resize(S+1),this.emplace(S,d,x)},s.prototype.emplace=function(d,x,S){var M=2*d;return this.int16[M+0]=x,this.int16[M+1]=S,d},s}(k);Z.prototype.bytesPerElement=4,Ri("StructArrayLayout2i4",Z);var J=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M){var r=this.length;return this.resize(r+1),this.emplace(r,d,x,S,M)},s.prototype.emplace=function(d,x,S,M,r){var i=4*d;return this.int16[i+0]=x,this.int16[i+1]=S,this.int16[i+2]=M,this.int16[i+3]=r,d},s}(k);J.prototype.bytesPerElement=8,Ri("StructArrayLayout4i8",J);var ne=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i){var u=this.length;return this.resize(u+1),this.emplace(u,d,x,S,M,r,i)},s.prototype.emplace=function(d,x,S,M,r,i,u){var m=6*d;return this.int16[m+0]=x,this.int16[m+1]=S,this.int16[m+2]=M,this.int16[m+3]=r,this.int16[m+4]=i,this.int16[m+5]=u,d},s}(k);ne.prototype.bytesPerElement=12,Ri("StructArrayLayout2i4i12",ne);var se=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i){var u=this.length;return this.resize(u+1),this.emplace(u,d,x,S,M,r,i)},s.prototype.emplace=function(d,x,S,M,r,i,u){var m=4*d,b=8*d;return this.int16[m+0]=x,this.int16[m+1]=S,this.uint8[b+4]=M,this.uint8[b+5]=r,this.uint8[b+6]=i,this.uint8[b+7]=u,d},s}(k);se.prototype.bytesPerElement=8,Ri("StructArrayLayout2i4ub8",se);var ye=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x){var S=this.length;return this.resize(S+1),this.emplace(S,d,x)},s.prototype.emplace=function(d,x,S){var M=2*d;return this.float32[M+0]=x,this.float32[M+1]=S,d},s}(k);ye.prototype.bytesPerElement=8,Ri("StructArrayLayout2f8",ye);var Ae=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i,u,m,b,E){var T=this.length;return this.resize(T+1),this.emplace(T,d,x,S,M,r,i,u,m,b,E)},s.prototype.emplace=function(d,x,S,M,r,i,u,m,b,E,T){var D=10*d;return this.uint16[D+0]=x,this.uint16[D+1]=S,this.uint16[D+2]=M,this.uint16[D+3]=r,this.uint16[D+4]=i,this.uint16[D+5]=u,this.uint16[D+6]=m,this.uint16[D+7]=b,this.uint16[D+8]=E,this.uint16[D+9]=T,d},s}(k);Ae.prototype.bytesPerElement=20,Ri("StructArrayLayout10ui20",Ae);var Je=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i,u,m,b,E,T,D){var U=this.length;return this.resize(U+1),this.emplace(U,d,x,S,M,r,i,u,m,b,E,T,D)},s.prototype.emplace=function(d,x,S,M,r,i,u,m,b,E,T,D,U){var V=12*d;return this.int16[V+0]=x,this.int16[V+1]=S,this.int16[V+2]=M,this.int16[V+3]=r,this.uint16[V+4]=i,this.uint16[V+5]=u,this.uint16[V+6]=m,this.uint16[V+7]=b,this.int16[V+8]=E,this.int16[V+9]=T,this.int16[V+10]=D,this.int16[V+11]=U,d},s}(k);Je.prototype.bytesPerElement=24,Ri("StructArrayLayout4i4ui4i24",Je);var ke=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,S)},s.prototype.emplace=function(d,x,S,M){var r=3*d;return this.float32[r+0]=x,this.float32[r+1]=S,this.float32[r+2]=M,d},s}(k);ke.prototype.bytesPerElement=12,Ri("StructArrayLayout3f12",ke);var Ke=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d){var x=this.length;return this.resize(x+1),this.emplace(x,d)},s.prototype.emplace=function(d,x){return this.uint32[1*d+0]=x,d},s}(k);Ke.prototype.bytesPerElement=4,Ri("StructArrayLayout1ul4",Ke);var ht=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i,u,m,b){var E=this.length;return this.resize(E+1),this.emplace(E,d,x,S,M,r,i,u,m,b)},s.prototype.emplace=function(d,x,S,M,r,i,u,m,b,E){var T=10*d,D=5*d;return this.int16[T+0]=x,this.int16[T+1]=S,this.int16[T+2]=M,this.int16[T+3]=r,this.int16[T+4]=i,this.int16[T+5]=u,this.uint32[D+3]=m,this.uint16[T+8]=b,this.uint16[T+9]=E,d},s}(k);ht.prototype.bytesPerElement=20,Ri("StructArrayLayout6i1ul2ui20",ht);var ut=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i){var u=this.length;return this.resize(u+1),this.emplace(u,d,x,S,M,r,i)},s.prototype.emplace=function(d,x,S,M,r,i,u){var m=6*d;return this.int16[m+0]=x,this.int16[m+1]=S,this.int16[m+2]=M,this.int16[m+3]=r,this.int16[m+4]=i,this.int16[m+5]=u,d},s}(k);ut.prototype.bytesPerElement=12,Ri("StructArrayLayout2i2i2i12",ut);var bt=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r){var i=this.length;return this.resize(i+1),this.emplace(i,d,x,S,M,r)},s.prototype.emplace=function(d,x,S,M,r,i){var u=4*d,m=8*d;return this.float32[u+0]=x,this.float32[u+1]=S,this.float32[u+2]=M,this.int16[m+6]=r,this.int16[m+7]=i,d},s}(k);bt.prototype.bytesPerElement=16,Ri("StructArrayLayout2f1f2i16",bt);var ft=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M){var r=this.length;return this.resize(r+1),this.emplace(r,d,x,S,M)},s.prototype.emplace=function(d,x,S,M,r){var i=12*d,u=3*d;return this.uint8[i+0]=x,this.uint8[i+1]=S,this.float32[u+1]=M,this.float32[u+2]=r,d},s}(k);ft.prototype.bytesPerElement=12,Ri("StructArrayLayout2ub2f12",ft);var jt=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,S)},s.prototype.emplace=function(d,x,S,M){var r=3*d;return this.uint16[r+0]=x,this.uint16[r+1]=S,this.uint16[r+2]=M,d},s}(k);jt.prototype.bytesPerElement=6,Ri("StructArrayLayout3ui6",jt);var Ot=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i,u,m,b,E,T,D,U,V,G,q,K){var $=this.length;return this.resize($+1),this.emplace($,d,x,S,M,r,i,u,m,b,E,T,D,U,V,G,q,K)},s.prototype.emplace=function(d,x,S,M,r,i,u,m,b,E,T,D,U,V,G,q,K,$){var ie=24*d,pe=12*d,ve=48*d;return this.int16[ie+0]=x,this.int16[ie+1]=S,this.uint16[ie+2]=M,this.uint16[ie+3]=r,this.uint32[pe+2]=i,this.uint32[pe+3]=u,this.uint32[pe+4]=m,this.uint16[ie+10]=b,this.uint16[ie+11]=E,this.uint16[ie+12]=T,this.float32[pe+7]=D,this.float32[pe+8]=U,this.uint8[ve+36]=V,this.uint8[ve+37]=G,this.uint8[ve+38]=q,this.uint32[pe+10]=K,this.int16[ie+22]=$,d},s}(k);Ot.prototype.bytesPerElement=48,Ri("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ot);var Ut=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M,r,i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe,nt,rt,vt,ot,Kt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,d,x,S,M,r,i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe,nt,rt,vt,ot,Kt)},s.prototype.emplace=function(d,x,S,M,r,i,u,m,b,E,T,D,U,V,G,q,K,$,ie,pe,ve,Be,Qe,nt,rt,vt,ot,Kt,Wt){var Pt=34*d,Zt=17*d;return this.int16[Pt+0]=x,this.int16[Pt+1]=S,this.int16[Pt+2]=M,this.int16[Pt+3]=r,this.int16[Pt+4]=i,this.int16[Pt+5]=u,this.int16[Pt+6]=m,this.int16[Pt+7]=b,this.uint16[Pt+8]=E,this.uint16[Pt+9]=T,this.uint16[Pt+10]=D,this.uint16[Pt+11]=U,this.uint16[Pt+12]=V,this.uint16[Pt+13]=G,this.uint16[Pt+14]=q,this.uint16[Pt+15]=K,this.uint16[Pt+16]=$,this.uint16[Pt+17]=ie,this.uint16[Pt+18]=pe,this.uint16[Pt+19]=ve,this.uint16[Pt+20]=Be,this.uint16[Pt+21]=Qe,this.uint16[Pt+22]=nt,this.uint32[Zt+12]=rt,this.float32[Zt+13]=vt,this.float32[Zt+14]=ot,this.float32[Zt+15]=Kt,this.float32[Zt+16]=Wt,d},s}(k);Ut.prototype.bytesPerElement=68,Ri("StructArrayLayout8i15ui1ul4f68",Ut);var ti=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d){var x=this.length;return this.resize(x+1),this.emplace(x,d)},s.prototype.emplace=function(d,x){return this.float32[1*d+0]=x,d},s}(k);ti.prototype.bytesPerElement=4,Ri("StructArrayLayout1f4",ti);var ui=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,S)},s.prototype.emplace=function(d,x,S,M){var r=3*d;return this.int16[r+0]=x,this.int16[r+1]=S,this.int16[r+2]=M,d},s}(k);ui.prototype.bytesPerElement=6,Ri("StructArrayLayout3i6",ui);var qt=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,S)},s.prototype.emplace=function(d,x,S,M){var r=4*d;return this.uint32[2*d+0]=x,this.uint16[r+2]=S,this.uint16[r+3]=M,d},s}(k);qt.prototype.bytesPerElement=8,Ri("StructArrayLayout1ul2ui8",qt);var Gi=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x){var S=this.length;return this.resize(S+1),this.emplace(S,d,x)},s.prototype.emplace=function(d,x,S){var M=2*d;return this.uint16[M+0]=x,this.uint16[M+1]=S,d},s}(k);Gi.prototype.bytesPerElement=4,Ri("StructArrayLayout2ui4",Gi);var Ci=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d){var x=this.length;return this.resize(x+1),this.emplace(x,d)},s.prototype.emplace=function(d,x){return this.uint16[1*d+0]=x,d},s}(k);Ci.prototype.bytesPerElement=2,Ri("StructArrayLayout1ui2",Ci);var xn=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(d,x,S,M){var r=this.length;return this.resize(r+1),this.emplace(r,d,x,S,M)},s.prototype.emplace=function(d,x,S,M,r){var i=4*d;return this.float32[i+0]=x,this.float32[i+1]=S,this.float32[i+2]=M,this.float32[i+3]=r,d},s}(k);xn.prototype.bytesPerElement=16,Ri("StructArrayLayout4f16",xn);var f=function(t){function s(){t.apply(this,arguments)}t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s;var d={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return d.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},d.x1.get=function(){return this._structArray.int16[this._pos2+2]},d.y1.get=function(){return this._structArray.int16[this._pos2+3]},d.x2.get=function(){return this._structArray.int16[this._pos2+4]},d.y2.get=function(){return this._structArray.int16[this._pos2+5]},d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.anchorPoint.get=function(){return new z(this.anchorPointX,this.anchorPointY)},Object.defineProperties(s.prototype,d),s}(A);f.prototype.size=20;var y=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.get=function(d){return new f(this,d)},s}(ht);Ri("CollisionBoxArray",y);var g=function(t){function s(){t.apply(this,arguments)}t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},d.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},d.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},d.segment.get=function(){return this._structArray.uint16[this._pos2+10]},d.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},d.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},d.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},d.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},d.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},d.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},d.placedOrientation.set=function(x){this._structArray.uint8[this._pos1+37]=x},d.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},d.hidden.set=function(x){this._structArray.uint8[this._pos1+38]=x},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},d.crossTileID.set=function(x){this._structArray.uint32[this._pos4+10]=x},d.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(s.prototype,d),s}(A);g.prototype.size=48;var w=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.get=function(d){return new g(this,d)},s}(Ot);Ri("PlacedSymbolArray",w);var P=function(t){function s(){t.apply(this,arguments)}t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},d.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},d.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},d.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},d.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},d.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},d.key.get=function(){return this._structArray.uint16[this._pos2+8]},d.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},d.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},d.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},d.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},d.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},d.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},d.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},d.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},d.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},d.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},d.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},d.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},d.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},d.crossTileID.set=function(x){this._structArray.uint32[this._pos4+12]=x},d.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},d.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},d.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},d.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(s.prototype,d),s}(A);P.prototype.size=68;var F=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.get=function(d){return new P(this,d)},s}(Ut);Ri("SymbolInstanceArray",F);var N=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.getoffsetX=function(d){return this.float32[1*d+0]},s}(ti);Ri("GlyphOffsetArray",N);var H=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.getx=function(d){return this.int16[3*d+0]},s.prototype.gety=function(d){return this.int16[3*d+1]},s.prototype.gettileUnitDistanceFromAnchor=function(d){return this.int16[3*d+2]},s}(ui);Ri("SymbolLineVertexArray",H);var Q=function(t){function s(){t.apply(this,arguments)}t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s;var d={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(s.prototype,d),s}(A);Q.prototype.size=8;var ae=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.get=function(d){return new Q(this,d)},s}(qt);Ri("FeatureIndexArray",ae);var _e=B([{name:"a_pos",components:2,type:"Int16"}],4).members,xe=function(t){t===void 0&&(t=[]),this.segments=t};function Ee(t,s){return 256*(t=te(Math.floor(t),0,255))+te(Math.floor(s),0,255)}xe.prototype.prepareSegment=function(t,s,d,x){var S=this.segments[this.segments.length-1];return t>xe.MAX_VERTEX_ARRAY_LENGTH&&He("Max vertices per segment is "+xe.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!S||S.vertexLength+t>xe.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==x)&&(S={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},x!==void 0&&(S.sortKey=x),this.segments.push(S)),S},xe.prototype.get=function(){return this.segments},xe.prototype.destroy=function(){for(var t=0,s=this.segments;t<s.length;t+=1){var d=s[t];for(var x in d.vaos)d.vaos[x].destroy()}},xe.simpleSegment=function(t,s,d,x){return new xe([{vertexOffset:t,primitiveOffset:s,vertexLength:d,primitiveLength:x,vaos:{},sortKey:0}])},xe.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ri("SegmentVector",xe);var Fe=B([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Oe=h(function(t){t.exports=function(s,d){var x,S,M,r,i,u,m,b;for(S=s.length-(x=3&s.length),M=d,i=3432918353,u=461845907,b=0;b<S;)m=255&s.charCodeAt(b)|(255&s.charCodeAt(++b))<<8|(255&s.charCodeAt(++b))<<16|(255&s.charCodeAt(++b))<<24,++b,M=27492+(65535&(r=5*(65535&(M=(M^=m=(65535&(m=(m=(65535&m)*i+(((m>>>16)*i&65535)<<16)&4294967295)<<15|m>>>17))*u+(((m>>>16)*u&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(m=0,x){case 3:m^=(255&s.charCodeAt(b+2))<<16;case 2:m^=(255&s.charCodeAt(b+1))<<8;case 1:M^=m=(65535&(m=(m=(65535&(m^=255&s.charCodeAt(b)))*i+(((m>>>16)*i&65535)<<16)&4294967295)<<15|m>>>17))*u+(((m>>>16)*u&65535)<<16)&4294967295}return M^=s.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}}),Xe=h(function(t){t.exports=function(s,d){for(var x,S=s.length,M=d^S,r=0;S>=4;)x=1540483477*(65535&(x=255&s.charCodeAt(r)|(255&s.charCodeAt(++r))<<8|(255&s.charCodeAt(++r))<<16|(255&s.charCodeAt(++r))<<24))+((1540483477*(x>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),S-=4,++r;switch(S){case 3:M^=(255&s.charCodeAt(r+2))<<16;case 2:M^=(255&s.charCodeAt(r+1))<<8;case 1:M=1540483477*(65535&(M^=255&s.charCodeAt(r)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}}),Ce=Oe,je=Xe;Ce.murmur3=Oe,Ce.murmur2=je;var et=function(){this.ids=[],this.positions=[],this.indexed=!1};et.prototype.add=function(t,s,d,x){this.ids.push(xt(t)),this.positions.push(s,d,x)},et.prototype.getPositions=function(t){for(var s=xt(t),d=0,x=this.ids.length-1;d<x;){var S=d+x>>1;this.ids[S]>=s?x=S:d=S+1}for(var M=[];this.ids[d]===s;)M.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return M},et.serialize=function(t,s){var d=new Float64Array(t.ids),x=new Uint32Array(t.positions);return function S(M,r,i,u){for(;i<u;){for(var m=M[i+u>>1],b=i-1,E=u+1;;){do b++;while(M[b]<m);do E--;while(M[E]>m);if(b>=E)break;Tt(M,b,E),Tt(r,3*b,3*E),Tt(r,3*b+1,3*E+1),Tt(r,3*b+2,3*E+2)}E-i<u-E?(S(M,r,i,E),i=E+1):(S(M,r,E+1,u),u=E)}}(d,x,0,d.length-1),s&&s.push(d.buffer,x.buffer),{ids:d,positions:x}},et.deserialize=function(t){var s=new et;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s};var pt=Math.pow(2,53)-1;function xt(t){var s=+t;return!isNaN(s)&&s<=pt?s:Ce(String(t))}function Tt(t,s,d){var x=t[s];t[s]=t[d],t[d]=x}Ri("FeaturePositionMap",et);var kt=function(t,s){this.gl=t.gl,this.location=s},Ht=function(t){function s(d,x){t.call(this,d,x),this.current=0}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))},s}(kt),oi=function(t){function s(d,x){t.call(this,d,x),this.current=0}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))},s}(kt),ri=function(t){function s(d,x){t.call(this,d,x),this.current=[0,0]}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))},s}(kt),Ti=function(t){function s(d,x){t.call(this,d,x),this.current=[0,0,0]}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))},s}(kt),Zi=function(t){function s(d,x){t.call(this,d,x),this.current=[0,0,0,0]}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))},s}(kt),$i=function(t){function s(d,x){t.call(this,d,x),this.current=dn.transparent}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))},s}(kt),Hi=new Float32Array(16),Xn=function(t){function s(d,x){t.call(this,d,x),this.current=Hi}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.set=function(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(var x=1;x<16;x++)if(d[x]!==this.current[x]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}},s}(kt);function Pi(t){return[Ee(255*t.r,255*t.g),Ee(255*t.b,255*t.a)]}var _n=function(t,s,d){this.value=t,this.uniformNames=s.map(function(x){return"u_"+x}),this.type=d};_n.prototype.setUniform=function(t,s,d){t.set(d.constantOr(this.value))},_n.prototype.getBinding=function(t,s,d){return this.type==="color"?new $i(t,s):new oi(t,s)};var Vn=function(t,s){this.uniformNames=s.map(function(d){return"u_"+d}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Vn.prototype.setConstantPatternPositions=function(t,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=t.tlbr},Vn.prototype.setUniform=function(t,s,d,x){var S=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&t.set(S)},Vn.prototype.getBinding=function(t,s,d){return d.substr(0,9)==="u_pattern"?new Zi(t,s):new oi(t,s)};var hn=function(t,s,d,x){this.expression=t,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(function(S){return{name:"a_"+S,type:"Float32",components:d==="color"?2:1,offset:0}}),this.paintVertexArray=new x};hn.prototype.populatePaintArray=function(t,s,d,x,S){var M=this.paintVertexArray.length,r=this.expression.evaluate(new ci(0),s,{},x,[],S);this.paintVertexArray.resize(t),this._setPaintValue(M,t,r)},hn.prototype.updatePaintArray=function(t,s,d,x){var S=this.expression.evaluate({zoom:0},d,x);this._setPaintValue(t,s,S)},hn.prototype._setPaintValue=function(t,s,d){if(this.type==="color")for(var x=Pi(d),S=t;S<s;S++)this.paintVertexArray.emplace(S,x[0],x[1]);else{for(var M=t;M<s;M++)this.paintVertexArray.emplace(M,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}},hn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var an=function(t,s,d,x,S,M){this.expression=t,this.uniformNames=s.map(function(r){return"u_"+r+"_t"}),this.type=d,this.useIntegerZoom=x,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=s.map(function(r){return{name:"a_"+r,type:"Float32",components:d==="color"?4:2,offset:0}}),this.paintVertexArray=new M};an.prototype.populatePaintArray=function(t,s,d,x,S){var M=this.expression.evaluate(new ci(this.zoom),s,{},x,[],S),r=this.expression.evaluate(new ci(this.zoom+1),s,{},x,[],S),i=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(i,t,M,r)},an.prototype.updatePaintArray=function(t,s,d,x){var S=this.expression.evaluate({zoom:this.zoom},d,x),M=this.expression.evaluate({zoom:this.zoom+1},d,x);this._setPaintValue(t,s,S,M)},an.prototype._setPaintValue=function(t,s,d,x){if(this.type==="color")for(var S=Pi(d),M=Pi(x),r=t;r<s;r++)this.paintVertexArray.emplace(r,S[0],S[1],M[0],M[1]);else{for(var i=t;i<s;i++)this.paintVertexArray.emplace(i,d,x);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(x))}},an.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},an.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},an.prototype.setUniform=function(t,s){var d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,x=te(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);t.set(x)},an.prototype.getBinding=function(t,s,d){return new oi(t,s)};var Sn=function(t,s,d,x,S,M){this.expression=t,this.type=s,this.useIntegerZoom=d,this.zoom=x,this.layerId=M,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S};Sn.prototype.populatePaintArray=function(t,s,d){var x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(x,t,s.patterns&&s.patterns[this.layerId],d)},Sn.prototype.updatePaintArray=function(t,s,d,x,S){this._setPaintValues(t,s,d.patterns&&d.patterns[this.layerId],S)},Sn.prototype._setPaintValues=function(t,s,d,x){if(x&&d){var S=x[d.min],M=x[d.mid],r=x[d.max];if(S&&M&&r)for(var i=t;i<s;i++)this.zoomInPaintVertexArray.emplace(i,M.tl[0],M.tl[1],M.br[0],M.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],M.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,M.tl[0],M.tl[1],M.br[0],M.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],M.pixelRatio,r.pixelRatio)}},Sn.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Fe.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Fe.members,this.expression.isStateDependent))},Sn.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var tn=function(t,s,d){this.binders={},this._buffers=[];var x=[];for(var S in t.paint._values)if(d(S)){var M=t.paint.get(S);if(M instanceof oa&&cs(M.property.specification)){var r=$r(S,t.type),i=M.value,u=M.property.specification.type,m=M.property.useIntegerZoom,b=M.property.specification["property-type"],E=b==="cross-faded"||b==="cross-faded-data-driven";if(i.kind==="constant")this.binders[S]=E?new Vn(i.value,r):new _n(i.value,r,u),x.push("/u_"+S);else if(i.kind==="source"||E){var T=uo(S,u,"source");this.binders[S]=E?new Sn(i,u,m,s,T,t.id):new hn(i,r,u,T),x.push("/a_"+S)}else{var D=uo(S,u,"composite");this.binders[S]=new an(i,r,u,m,s,D),x.push("/z_"+S)}}}this.cacheKey=x.sort().join("")};tn.prototype.getMaxValue=function(t){var s=this.binders[t];return s instanceof hn||s instanceof an?s.maxValue:0},tn.prototype.populatePaintArrays=function(t,s,d,x,S){for(var M in this.binders){var r=this.binders[M];(r instanceof hn||r instanceof an||r instanceof Sn)&&r.populatePaintArray(t,s,d,x,S)}},tn.prototype.setConstantPatternPositions=function(t,s){for(var d in this.binders){var x=this.binders[d];x instanceof Vn&&x.setConstantPatternPositions(t,s)}},tn.prototype.updatePaintArrays=function(t,s,d,x,S){var M=!1;for(var r in t)for(var i=0,u=s.getPositions(r);i<u.length;i+=1){var m=u[i],b=d.feature(m.index);for(var E in this.binders){var T=this.binders[E];if((T instanceof hn||T instanceof an||T instanceof Sn)&&T.expression.isStateDependent===!0){var D=x.paint.get(E);T.expression=D.value,T.updatePaintArray(m.start,m.end,b,t[r],S),M=!0}}}return M},tn.prototype.defines=function(){var t=[];for(var s in this.binders){var d=this.binders[s];(d instanceof _n||d instanceof Vn)&&t.push.apply(t,d.uniformNames.map(function(x){return"#define HAS_UNIFORM_"+x}))}return t},tn.prototype.getBinderAttributes=function(){var t=[];for(var s in this.binders){var d=this.binders[s];if(d instanceof hn||d instanceof an)for(var x=0;x<d.paintVertexAttributes.length;x++)t.push(d.paintVertexAttributes[x].name);else if(d instanceof Sn)for(var S=0;S<Fe.members.length;S++)t.push(Fe.members[S].name)}return t},tn.prototype.getBinderUniforms=function(){var t=[];for(var s in this.binders){var d=this.binders[s];if(d instanceof _n||d instanceof Vn||d instanceof an)for(var x=0,S=d.uniformNames;x<S.length;x+=1)t.push(S[x])}return t},tn.prototype.getPaintVertexBuffers=function(){return this._buffers},tn.prototype.getUniforms=function(t,s){var d=[];for(var x in this.binders){var S=this.binders[x];if(S instanceof _n||S instanceof Vn||S instanceof an)for(var M=0,r=S.uniformNames;M<r.length;M+=1){var i=r[M];if(s[i]){var u=S.getBinding(t,s[i],i);d.push({name:i,property:x,binding:u})}}}return d},tn.prototype.setUniforms=function(t,s,d,x){for(var S=0,M=s;S<M.length;S+=1){var r=M[S],i=r.name,u=r.property;this.binders[u].setUniform(r.binding,x,d.get(u),i)}},tn.prototype.updatePaintBuffers=function(t){for(var s in this._buffers=[],this.binders){var d=this.binders[s];if(t&&d instanceof Sn){var x=t.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(d instanceof hn||d instanceof an)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}},tn.prototype.upload=function(t){for(var s in this.binders){var d=this.binders[s];(d instanceof hn||d instanceof an||d instanceof Sn)&&d.upload(t)}this.updatePaintBuffers()},tn.prototype.destroy=function(){for(var t in this.binders){var s=this.binders[t];(s instanceof hn||s instanceof an||s instanceof Sn)&&s.destroy()}};var Qi=function(t,s,d){d===void 0&&(d=function(){return!0}),this.programConfigurations={};for(var x=0,S=t;x<S.length;x+=1){var M=S[x];this.programConfigurations[M.id]=new tn(M,s,d)}this.needsUpload=!1,this._featureMap=new et,this._bufferOffset=0};function $r(t,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(s+"-","").replace(/-/g,"_")]}function uo(t,s,d){var x={color:{source:ye,composite:xn},number:{source:ti,composite:ye}},S=function(M){return{"line-pattern":{source:Ae,composite:Ae},"fill-pattern":{source:Ae,composite:Ae},"fill-extrusion-pattern":{source:Ae,composite:Ae}}[M]}(t);return S&&S[d]||x[s][d]}Qi.prototype.populatePaintArrays=function(t,s,d,x,S,M){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,s,x,S,M);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Qi.prototype.updatePaintArrays=function(t,s,d,x){for(var S=0,M=d;S<M.length;S+=1){var r=M[S];this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,s,r,x)||this.needsUpload}},Qi.prototype.get=function(t){return this.programConfigurations[t]},Qi.prototype.upload=function(t){if(this.needsUpload){for(var s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}},Qi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Ri("ConstantBinder",_n),Ri("CrossFadedConstantBinder",Vn),Ri("SourceExpressionBinder",hn),Ri("CrossFadedCompositeBinder",Sn),Ri("CompositeExpressionBinder",an),Ri("ProgramConfiguration",tn,{omit:["_buffers"]}),Ri("ProgramConfigurationSet",Qi);var wo=Math.pow(2,14)-1,Qo=-wo-1;function io(t){for(var s=8192/t.extent,d=t.loadGeometry(),x=0;x<d.length;x++)for(var S=d[x],M=0;M<S.length;M++){var r=S[M],i=Math.round(r.x*s),u=Math.round(r.y*s);r.x=te(i,Qo,wo),r.y=te(u,Qo,wo),(i<r.x||i>r.x+1||u<r.y||u>r.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return d}function er(t,s){return{type:t.type,id:t.id,properties:t.properties,geometry:s?io(t):[]}}function ba(t,s,d,x,S){t.emplaceBack(2*s+(x+1)/2,2*d+(S+1)/2)}var pa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Z,this.indexArray=new jt,this.segments=new xe,this.programConfigurations=new Qi(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};function Ga(t,s){for(var d=0;d<t.length;d++)if(Qs(s,t[d]))return!0;for(var x=0;x<s.length;x++)if(Qs(t,s[x]))return!0;return!!Qu(t,s)}function zo(t,s,d){return!!Qs(t,s)||!!bl(s,t,d)}function Ha(t,s){if(t.length===1)return wu(s,t[0]);for(var d=0;d<s.length;d++)for(var x=s[d],S=0;S<x.length;S++)if(Qs(t,x[S]))return!0;for(var M=0;M<t.length;M++)if(wu(s,t[M]))return!0;for(var r=0;r<s.length;r++)if(Qu(t,s[r]))return!0;return!1}function Za(t,s,d){if(t.length>1){if(Qu(t,s))return!0;for(var x=0;x<s.length;x++)if(bl(s[x],t,d))return!0}for(var S=0;S<t.length;S++)if(bl(t[S],s,d))return!0;return!1}function Qu(t,s){if(t.length===0||s.length===0)return!1;for(var d=0;d<t.length-1;d++)for(var x=t[d],S=t[d+1],M=0;M<s.length-1;M++)if($u(x,S,s[M],s[M+1]))return!0;return!1}function $u(t,s,d,x){return Mt(t,d,x)!==Mt(s,d,x)&&Mt(t,s,d)!==Mt(t,s,x)}function bl(t,s,d){var x=d*d;if(s.length===1)return t.distSqr(s[0])<x;for(var S=1;S<s.length;S++)if(ec(t,s[S-1],s[S])<x)return!0;return!1}function ec(t,s,d){var x=s.distSqr(d);if(x===0)return t.distSqr(s);var S=((t.x-s.x)*(d.x-s.x)+(t.y-s.y)*(d.y-s.y))/x;return t.distSqr(S<0?s:S>1?d:d.sub(s)._mult(S)._add(s))}function wu(t,s){for(var d,x,S,M=!1,r=0;r<t.length;r++)for(var i=0,u=(d=t[r]).length-1;i<d.length;u=i++)(x=d[i]).y>s.y!=(S=d[u]).y>s.y&&s.x<(S.x-x.x)*(s.y-x.y)/(S.y-x.y)+x.x&&(M=!M);return M}function Qs(t,s){for(var d=!1,x=0,S=t.length-1;x<t.length;S=x++){var M=t[x],r=t[S];M.y>s.y!=r.y>s.y&&s.x<(r.x-M.x)*(s.y-M.y)/(r.y-M.y)+M.x&&(d=!d)}return d}function Eu(t,s,d){var x=d[0],S=d[2];if(t.x<x.x&&s.x<x.x||t.x>S.x&&s.x>S.x||t.y<x.y&&s.y<x.y||t.y>S.y&&s.y>S.y)return!1;var M=Mt(t,s,d[0]);return M!==Mt(t,s,d[1])||M!==Mt(t,s,d[2])||M!==Mt(t,s,d[3])}function Ds(t,s,d){var x=s.paint.get(t).value;return x.kind==="constant"?x.value:d.programConfigurations.get(s.id).getMaxValue(t)}function Do(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Wa(t,s,d,x,S){if(!s[0]&&!s[1])return t;var M=z.convert(s)._mult(S);d==="viewport"&&M._rotate(-x);for(var r=[],i=0;i<t.length;i++)r.push(t[i].sub(M));return r}pa.prototype.populate=function(t,s,d){var x=this.layers[0],S=[],M=null;x.type==="circle"&&(M=x.layout.get("circle-sort-key"));for(var r=0,i=t;r<i.length;r+=1){var u=i[r],m=u.feature,b=u.id,E=u.index,T=u.sourceLayerIndex,D=this.layers[0]._featureFilter.needGeometry,U=er(m,D);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),U,d)){var V=M?M.evaluate(U,{},d):void 0,G={id:b,properties:m.properties,type:m.type,sourceLayerIndex:T,index:E,geometry:D?U.geometry:io(m),patterns:{},sortKey:V};S.push(G)}}M&&S.sort(function(Qe,nt){return Qe.sortKey-nt.sortKey});for(var q=0,K=S;q<K.length;q+=1){var $=K[q],ie=$.geometry,pe=$.index,ve=$.sourceLayerIndex,Be=t[pe].feature;this.addFeature($,ie,pe,d),s.featureIndex.insert(Be,ie,pe,ve,this.index)}},pa.prototype.update=function(t,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,d)},pa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_e),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},pa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pa.prototype.addFeature=function(t,s,d,x){for(var S=0,M=s;S<M.length;S+=1)for(var r=0,i=M[S];r<i.length;r+=1){var u=i[r],m=u.x,b=u.y;if(!(m<0||m>=8192||b<0||b>=8192)){var E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),T=E.vertexLength;ba(this.layoutVertexArray,m,b,-1,-1),ba(this.layoutVertexArray,m,b,1,-1),ba(this.layoutVertexArray,m,b,1,1),ba(this.layoutVertexArray,m,b,-1,1),this.indexArray.emplaceBack(T,T+1,T+2),this.indexArray.emplaceBack(T,T+3,T+2),E.vertexLength+=4,E.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,{},x)},Ri("CircleBucket",pa,{omit:["layers"]});var Gl=new C({"circle-sort-key":new mi(Ie.layout_circle["circle-sort-key"])}),Rs={paint:new C({"circle-radius":new mi(Ie.paint_circle["circle-radius"]),"circle-color":new mi(Ie.paint_circle["circle-color"]),"circle-blur":new mi(Ie.paint_circle["circle-blur"]),"circle-opacity":new mi(Ie.paint_circle["circle-opacity"]),"circle-translate":new gi(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new gi(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gi(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gi(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mi(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mi(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mi(Ie.paint_circle["circle-stroke-opacity"])}),layout:Gl},ur=typeof Float32Array!="undefined"?Float32Array:Array;function xa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ba(t,s,d){var x=s[0],S=s[1],M=s[2],r=s[3],i=s[4],u=s[5],m=s[6],b=s[7],E=s[8],T=s[9],D=s[10],U=s[11],V=s[12],G=s[13],q=s[14],K=s[15],$=d[0],ie=d[1],pe=d[2],ve=d[3];return t[0]=$*x+ie*i+pe*E+ve*V,t[1]=$*S+ie*u+pe*T+ve*G,t[2]=$*M+ie*m+pe*D+ve*q,t[3]=$*r+ie*b+pe*U+ve*K,t[4]=($=d[4])*x+(ie=d[5])*i+(pe=d[6])*E+(ve=d[7])*V,t[5]=$*S+ie*u+pe*T+ve*G,t[6]=$*M+ie*m+pe*D+ve*q,t[7]=$*r+ie*b+pe*U+ve*K,t[8]=($=d[8])*x+(ie=d[9])*i+(pe=d[10])*E+(ve=d[11])*V,t[9]=$*S+ie*u+pe*T+ve*G,t[10]=$*M+ie*m+pe*D+ve*q,t[11]=$*r+ie*b+pe*U+ve*K,t[12]=($=d[12])*x+(ie=d[13])*i+(pe=d[14])*E+(ve=d[15])*V,t[13]=$*S+ie*u+pe*T+ve*G,t[14]=$*M+ie*m+pe*D+ve*q,t[15]=$*r+ie*b+pe*U+ve*K,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,s=0,d=arguments.length;d--;)s+=t[d]*t[d];return Math.sqrt(s)});var Iu,tc=Ba;function ic(t,s,d){var x=s[0],S=s[1],M=s[2],r=s[3];return t[0]=d[0]*x+d[4]*S+d[8]*M+d[12]*r,t[1]=d[1]*x+d[5]*S+d[9]*M+d[13]*r,t[2]=d[2]*x+d[6]*S+d[10]*M+d[14]*r,t[3]=d[3]*x+d[7]*S+d[11]*M+d[15]*r,t}Iu=new ur(3),ur!=Float32Array&&(Iu[0]=0,Iu[1]=0,Iu[2]=0),function(){var t=new ur(4);ur!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var Pd=(function(){var t=new ur(2);ur!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function s(d){t.call(this,d,Rs)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.createBucket=function(d){return new pa(d)},s.prototype.queryRadius=function(d){var x=d;return Ds("circle-radius",this,x)+Ds("circle-stroke-width",this,x)+Do(this.paint.get("circle-translate"))},s.prototype.queryIntersectsFeature=function(d,x,S,M,r,i,u,m){for(var b=Wa(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,u),E=this.paint.get("circle-radius").evaluate(x,S)+this.paint.get("circle-stroke-width").evaluate(x,S),T=this.paint.get("circle-pitch-alignment")==="map",D=T?b:function(Be,Qe){return Be.map(function(nt){return xl(nt,Qe)})}(b,m),U=T?E*u:E,V=0,G=M;V<G.length;V+=1)for(var q=0,K=G[V];q<K.length;q+=1){var $=K[q],ie=T?$:xl($,m),pe=U,ve=ic([],[$.x,$.y,0,1],m);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=ve[3]/i.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=i.cameraToCenterDistance/ve[3]),zo(D,ie,pe))return!0}return!1},s}(l));function xl(t,s){var d=ic([],[t.x,t.y,0,1],s);return new z(d[0]/d[3],d[1]/d[3])}var Ld=function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s}(pa);function wl(t,s,d,x){var S=s.width,M=s.height;if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==S*M*d)throw new RangeError("mismatched image size")}else x=new Uint8Array(S*M*d);return t.width=S,t.height=M,t.data=x,t}function Pc(t,s,d){var x=s.width,S=s.height;if(x!==t.width||S!==t.height){var M=wl({},{width:x,height:S},d);zd(t,M,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,x),height:Math.min(t.height,S)},d),t.width=x,t.height=S,t.data=M.data}}function zd(t,s,d,x,S,M){if(S.width===0||S.height===0)return s;if(S.width>t.width||S.height>t.height||d.x>t.width-S.width||d.y>t.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>s.width||S.height>s.height||x.x>s.width-S.width||x.y>s.height-S.height)throw new RangeError("out of range destination coordinates for image copy");for(var r=t.data,i=s.data,u=0;u<S.height;u++)for(var m=((d.y+u)*t.width+d.x)*M,b=((x.y+u)*s.width+x.x)*M,E=0;E<S.width*M;E++)i[b+E]=r[m+E];return s}Ri("HeatmapBucket",Ld,{omit:["layers"]});var Lc=function(t,s){wl(this,t,1,s)};Lc.prototype.resize=function(t){Pc(this,t,1)},Lc.prototype.clone=function(){return new Lc({width:this.width,height:this.height},new Uint8Array(this.data))},Lc.copy=function(t,s,d,x,S){zd(t,s,d,x,S,1)};var wa=function(t,s){wl(this,t,4,s)};wa.prototype.resize=function(t){Pc(this,t,4)},wa.prototype.replace=function(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},wa.prototype.clone=function(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))},wa.copy=function(t,s,d,x,S){zd(t,s,d,x,S,4)},Ri("AlphaImage",Lc),Ri("RGBAImage",wa);var If={paint:new C({"heatmap-radius":new mi(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mi(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gi(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new da(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gi(Ie.paint_heatmap["heatmap-opacity"])})};function Dd(t){var s={},d=t.resolution||256,x=t.clips?t.clips.length:1,S=t.image||new wa({width:d,height:x}),M=function(U,V,G){s[t.evaluationKey]=G;var q=t.expression.evaluate(s);S.data[U+V+0]=Math.floor(255*q.r/q.a),S.data[U+V+1]=Math.floor(255*q.g/q.a),S.data[U+V+2]=Math.floor(255*q.b/q.a),S.data[U+V+3]=Math.floor(255*q.a)};if(t.clips)for(var r=0,i=0;r<x;++r,i+=4*d)for(var u=0,m=0;u<d;u++,m+=4){var b=u/(d-1),E=t.clips[r];M(i,m,E.start*(1-b)+E.end*b)}else for(var T=0,D=0;T<d;T++,D+=4)M(0,D,T/(d-1));return S}var Vh=function(t){function s(d){t.call(this,d,If),this._updateColorRamp()}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.createBucket=function(d){return new Ld(d)},s.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="heatmap-color"&&this._updateColorRamp()},s.prototype._updateColorRamp=function(){this.colorRamp=Dd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},s.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},s.prototype.queryRadius=function(){return 0},s.prototype.queryIntersectsFeature=function(){return!1},s.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},s}(l),Os={paint:new C({"hillshade-illumination-direction":new gi(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gi(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gi(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gi(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gi(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gi(Ie.paint_hillshade["hillshade-accent-color"])})},Sf=function(t){function s(d){t.call(this,d,Os)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},s}(l),Qm=B([{name:"a_pos",components:2,type:"Int16"}],4).members,Ip=sh,$m=sh;function sh(t,s,d){d=d||2;var x,S,M,r,i,u,m,b=s&&s.length,E=b?s[0]*d:t.length,T=jh(t,0,E,d,!0),D=[];if(!T||T.next===T.prev)return D;if(b&&(T=function(V,G,q,K){var $,ie,pe,ve=[];for($=0,ie=G.length;$<ie;$++)(pe=jh(V,G[$]*K,$<ie-1?G[$+1]*K:V.length,K,!1))===pe.next&&(pe.steiner=!0),ve.push(Tp(pe));for(ve.sort(ng),$=0;$<ve.length;$++)rg(ve[$],q),q=Su(q,q.next);return q}(t,s,T,d)),t.length>80*d){x=M=t[0],S=r=t[1];for(var U=d;U<E;U+=d)(i=t[U])<x&&(x=i),(u=t[U+1])<S&&(S=u),i>M&&(M=i),u>r&&(r=u);m=(m=Math.max(M-x,r-S))!==0?1/m:0}return $s(T,D,d,x,S,m),D}function jh(t,s,d,x,S){var M,r;if(S===Zh(t,s,d,x)>0)for(M=s;M<d;M+=x)r=Ap(M,t[M],t[M+1],r);else for(M=d-x;M>=s;M-=x)r=Ap(M,t[M],t[M+1],r);return r&&mo(r,r.next)&&(hh(r),r=r.next),r}function Su(t,s){if(!t)return t;s||(s=t);var d,x=t;do if(d=!1,x.steiner||!mo(x,x.next)&&Ro(x.prev,x,x.next)!==0)x=x.next;else{if(hh(x),(x=s=x.prev)===x.next)break;d=!0}while(d||x!==s);return s}function $s(t,s,d,x,S,M,r){if(t){!r&&M&&function(b,E,T,D){var U=b;do U.z===null&&(U.z=Sp(U.x,U.y,E,T,D)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==b);U.prevZ.nextZ=null,U.prevZ=null,function(V){var G,q,K,$,ie,pe,ve,Be,Qe=1;do{for(q=V,V=null,ie=null,pe=0;q;){for(pe++,K=q,ve=0,G=0;G<Qe&&(ve++,K=K.nextZ);G++);for(Be=Qe;ve>0||Be>0&&K;)ve!==0&&(Be===0||!K||q.z<=K.z)?($=q,q=q.nextZ,ve--):($=K,K=K.nextZ,Be--),ie?ie.nextZ=$:V=$,$.prevZ=ie,ie=$;q=K}ie.nextZ=null,Qe*=2}while(pe>1)}(U)}(t,x,S,M);for(var i,u,m=t;t.prev!==t.next;)if(i=t.prev,u=t.next,M?eg(t,x,S,M):qh(t))s.push(i.i/d),s.push(t.i/d),s.push(u.i/d),hh(t),t=u.next,m=u.next;else if((t=u)===m){r?r===1?$s(t=tg(Su(t),s,d),s,d,x,S,M,2):r===2&&ig(t,s,d,x,S,M):$s(Su(t),s,d,x,S,M,1);break}}}function qh(t){var s=t.prev,d=t,x=t.next;if(Ro(s,d,x)>=0)return!1;for(var S=t.next.next;S!==t.prev;){if(lh(s.x,s.y,d.x,d.y,x.x,x.y,S.x,S.y)&&Ro(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function eg(t,s,d,x){var S=t.prev,M=t,r=t.next;if(Ro(S,M,r)>=0)return!1;for(var i=S.x>M.x?S.x>r.x?S.x:r.x:M.x>r.x?M.x:r.x,u=S.y>M.y?S.y>r.y?S.y:r.y:M.y>r.y?M.y:r.y,m=Sp(S.x<M.x?S.x<r.x?S.x:r.x:M.x<r.x?M.x:r.x,S.y<M.y?S.y<r.y?S.y:r.y:M.y<r.y?M.y:r.y,s,d,x),b=Sp(i,u,s,d,x),E=t.prevZ,T=t.nextZ;E&&E.z>=m&&T&&T.z<=b;){if(E!==t.prev&&E!==t.next&&lh(S.x,S.y,M.x,M.y,r.x,r.y,E.x,E.y)&&Ro(E.prev,E,E.next)>=0||(E=E.prevZ,T!==t.prev&&T!==t.next&&lh(S.x,S.y,M.x,M.y,r.x,r.y,T.x,T.y)&&Ro(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=m;){if(E!==t.prev&&E!==t.next&&lh(S.x,S.y,M.x,M.y,r.x,r.y,E.x,E.y)&&Ro(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=b;){if(T!==t.prev&&T!==t.next&&lh(S.x,S.y,M.x,M.y,r.x,r.y,T.x,T.y)&&Ro(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function tg(t,s,d){var x=t;do{var S=x.prev,M=x.next.next;!mo(S,M)&&Gh(S,x,x.next,M)&&nc(S,M)&&nc(M,S)&&(s.push(S.i/d),s.push(x.i/d),s.push(M.i/d),hh(x),hh(x.next),x=t=M),x=x.next}while(x!==t);return Su(x)}function ig(t,s,d,x,S,M){var r=t;do{for(var i=r.next.next;i!==r.prev;){if(r.i!==i.i&&uh(r,i)){var u=ch(r,i);return r=Su(r,r.next),u=Su(u,u.next),$s(r,s,d,x,S,M),void $s(u,s,d,x,S,M)}i=i.next}r=r.next}while(r!==t)}function ng(t,s){return t.x-s.x}function rg(t,s){if(s=function(x,S){var M,r=S,i=x.x,u=x.y,m=-1/0;do{if(u<=r.y&&u>=r.next.y&&r.next.y!==r.y){var b=r.x+(u-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(b<=i&&b>m){if(m=b,b===i){if(u===r.y)return r;if(u===r.next.y)return r.next}M=r.x<r.next.x?r:r.next}}r=r.next}while(r!==S);if(!M)return null;if(i===m)return M;var E,T=M,D=M.x,U=M.y,V=1/0;r=M;do i>=r.x&&r.x>=D&&i!==r.x&&lh(u<U?i:m,u,D,U,u<U?m:i,u,r.x,r.y)&&(E=Math.abs(u-r.y)/(i-r.x),nc(r,x)&&(E<V||E===V&&(r.x>M.x||r.x===M.x&&og(M,r)))&&(M=r,V=E)),r=r.next;while(r!==T);return M}(t,s)){var d=ch(s,t);Su(s,s.next),Su(d,d.next)}}function og(t,s){return Ro(t.prev,t,s.prev)<0&&Ro(s.next,t,t.next)<0}function Sp(t,s,d,x,S){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-d)*S)|t<<8))|t<<4))|t<<2))|t<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-x)*S)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Tp(t){var s=t,d=t;do(s.x<d.x||s.x===d.x&&s.y<d.y)&&(d=s),s=s.next;while(s!==t);return d}function lh(t,s,d,x,S,M,r,i){return(S-r)*(s-i)-(t-r)*(M-i)>=0&&(t-r)*(x-i)-(d-r)*(s-i)>=0&&(d-r)*(M-i)-(S-r)*(x-i)>=0}function uh(t,s){return t.next.i!==s.i&&t.prev.i!==s.i&&!function(d,x){var S=d;do{if(S.i!==d.i&&S.next.i!==d.i&&S.i!==x.i&&S.next.i!==x.i&&Gh(S,S.next,d,x))return!0;S=S.next}while(S!==d);return!1}(t,s)&&(nc(t,s)&&nc(s,t)&&function(d,x){var S=d,M=!1,r=(d.x+x.x)/2,i=(d.y+x.y)/2;do S.y>i!=S.next.y>i&&S.next.y!==S.y&&r<(S.next.x-S.x)*(i-S.y)/(S.next.y-S.y)+S.x&&(M=!M),S=S.next;while(S!==d);return M}(t,s)&&(Ro(t.prev,t,s.prev)||Ro(t,s.prev,s))||mo(t,s)&&Ro(t.prev,t,t.next)>0&&Ro(s.prev,s,s.next)>0)}function Ro(t,s,d){return(s.y-t.y)*(d.x-s.x)-(s.x-t.x)*(d.y-s.y)}function mo(t,s){return t.x===s.x&&t.y===s.y}function Gh(t,s,d,x){var S=zc(Ro(t,s,d)),M=zc(Ro(t,s,x)),r=zc(Ro(d,x,t)),i=zc(Ro(d,x,s));return S!==M&&r!==i||!(S!==0||!Hh(t,d,s))||!(M!==0||!Hh(t,x,s))||!(r!==0||!Hh(d,t,x))||!(i!==0||!Hh(d,s,x))}function Hh(t,s,d){return s.x<=Math.max(t.x,d.x)&&s.x>=Math.min(t.x,d.x)&&s.y<=Math.max(t.y,d.y)&&s.y>=Math.min(t.y,d.y)}function zc(t){return t>0?1:t<0?-1:0}function nc(t,s){return Ro(t.prev,t,t.next)<0?Ro(t,s,t.next)>=0&&Ro(t,t.prev,s)>=0:Ro(t,s,t.prev)<0||Ro(t,t.next,s)<0}function ch(t,s){var d=new Dc(t.i,t.x,t.y),x=new Dc(s.i,s.x,s.y),S=t.next,M=s.prev;return t.next=s,s.prev=t,d.next=S,S.prev=d,x.next=d,d.prev=x,M.next=x,x.prev=M,x}function Ap(t,s,d,x){var S=new Dc(t,s,d);return x?(S.next=x.next,S.prev=x,x.next.prev=S,x.next=S):(S.prev=S,S.next=S),S}function hh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dc(t,s,d){this.i=t,this.x=s,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zh(t,s,d,x){for(var S=0,M=s,r=d-x;M<d;M+=x)S+=(t[r]-t[M])*(t[M+1]+t[r+1]),r=M;return S}function Cp(t,s,d,x,S){(function M(r,i,u,m,b){for(;m>u;){if(m-u>600){var E=m-u+1,T=i-u+1,D=Math.log(E),U=.5*Math.exp(2*D/3),V=.5*Math.sqrt(D*U*(E-U)/E)*(T-E/2<0?-1:1);M(r,i,Math.max(u,Math.floor(i-T*U/E+V)),Math.min(m,Math.floor(i+(E-T)*U/E+V)),b)}var G=r[i],q=u,K=m;for(dh(r,u,i),b(r[m],G)>0&&dh(r,u,m);q<K;){for(dh(r,q,K),q++,K--;b(r[q],G)<0;)q++;for(;b(r[K],G)>0;)K--}b(r[u],G)===0?dh(r,u,K):dh(r,++K,m),K<=i&&(u=K+1),i<=K&&(m=K-1)}})(t,s,d||0,x||t.length-1,S||ag)}function dh(t,s,d){var x=t[s];t[s]=t[d],t[d]=x}function ag(t,s){return t<s?-1:t>s?1:0}function Rd(t,s){var d=t.length;if(d<=1)return[t];for(var x,S,M=[],r=0;r<d;r++){var i=li(t[r]);i!==0&&(t[r].area=Math.abs(i),S===void 0&&(S=i<0),S===i<0?(x&&M.push(x),x=[t[r]]):x.push(t[r]))}if(x&&M.push(x),s>1)for(var u=0;u<M.length;u++)M[u].length<=s||(Cp(M[u],s,1,M[u].length-1,Wh),M[u]=M[u].slice(0,s));return M}function Wh(t,s){return s.area-t.area}function kp(t,s,d){for(var x=d.patternDependencies,S=!1,M=0,r=s;M<r.length;M+=1){var i=r[M].paint.get(t+"-pattern");i.isConstant()||(S=!0);var u=i.constantOr(null);u&&(S=!0,x[u.to]=!0,x[u.from]=!0)}return S}function Xh(t,s,d,x,S){for(var M=S.patternDependencies,r=0,i=s;r<i.length;r+=1){var u=i[r],m=u.paint.get(t+"-pattern").value;if(m.kind!=="constant"){var b=m.evaluate({zoom:x-1},d,{},S.availableImages),E=m.evaluate({zoom:x},d,{},S.availableImages),T=m.evaluate({zoom:x+1},d,{},S.availableImages);E=E&&E.name?E.name:E,T=T&&T.name?T.name:T,M[b=b&&b.name?b.name:b]=!0,M[E]=!0,M[T]=!0,d.patterns[u.id]={min:b,mid:E,max:T}}}return d}sh.deviation=function(t,s,d,x){var S=s&&s.length,M=Math.abs(Zh(t,0,S?s[0]*d:t.length,d));if(S)for(var r=0,i=s.length;r<i;r++)M-=Math.abs(Zh(t,s[r]*d,r<i-1?s[r+1]*d:t.length,d));var u=0;for(r=0;r<x.length;r+=3){var m=x[r]*d,b=x[r+1]*d,E=x[r+2]*d;u+=Math.abs((t[m]-t[E])*(t[b+1]-t[m+1])-(t[m]-t[b])*(t[E+1]-t[m+1]))}return M===0&&u===0?0:Math.abs((u-M)/M)},sh.flatten=function(t){for(var s=t[0][0].length,d={vertices:[],holes:[],dimensions:s},x=0,S=0;S<t.length;S++){for(var M=0;M<t[S].length;M++)for(var r=0;r<s;r++)d.vertices.push(t[S][M][r]);S>0&&d.holes.push(x+=t[S-1].length)}return d},Ip.default=$m;var El=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Z,this.indexArray=new jt,this.indexArray2=new Gi,this.programConfigurations=new Qi(t.layers,t.zoom),this.segments=new xe,this.segments2=new xe,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};El.prototype.populate=function(t,s,d){this.hasPattern=kp("fill",this.layers,s);for(var x=this.layers[0].layout.get("fill-sort-key"),S=[],M=0,r=t;M<r.length;M+=1){var i=r[M],u=i.feature,m=i.id,b=i.index,E=i.sourceLayerIndex,T=this.layers[0]._featureFilter.needGeometry,D=er(u,T);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),D,d)){var U=x?x.evaluate(D,{},d,s.availableImages):void 0,V={id:m,properties:u.properties,type:u.type,sourceLayerIndex:E,index:b,geometry:T?D.geometry:io(u),patterns:{},sortKey:U};S.push(V)}}x&&S.sort(function(Be,Qe){return Be.sortKey-Qe.sortKey});for(var G=0,q=S;G<q.length;G+=1){var K=q[G],$=K.geometry,ie=K.index,pe=K.sourceLayerIndex;if(this.hasPattern){var ve=Xh("fill",this.layers,K,this.zoom,s);this.patternFeatures.push(ve)}else this.addFeature(K,$,ie,d,{});s.featureIndex.insert(t[ie].feature,$,ie,pe,this.index)}},El.prototype.update=function(t,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,d)},El.prototype.addFeatures=function(t,s,d){for(var x=0,S=this.patternFeatures;x<S.length;x+=1){var M=S[x];this.addFeature(M,M.geometry,M.index,s,d)}},El.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},El.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},El.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qm),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},El.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},El.prototype.addFeature=function(t,s,d,x,S){for(var M=0,r=Rd(s,500);M<r.length;M+=1){for(var i=r[M],u=0,m=0,b=i;m<b.length;m+=1)u+=b[m].length;for(var E=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),T=E.vertexLength,D=[],U=[],V=0,G=i;V<G.length;V+=1){var q=G[V];if(q.length!==0){q!==i[0]&&U.push(D.length/2);var K=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),$=K.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack($+q.length-1,$),D.push(q[0].x),D.push(q[0].y);for(var ie=1;ie<q.length;ie++)this.layoutVertexArray.emplaceBack(q[ie].x,q[ie].y),this.indexArray2.emplaceBack($+ie-1,$+ie),D.push(q[ie].x),D.push(q[ie].y);K.vertexLength+=q.length,K.primitiveLength+=q.length}}for(var pe=Ip(D,U),ve=0;ve<pe.length;ve+=3)this.indexArray.emplaceBack(T+pe[ve],T+pe[ve+1],T+pe[ve+2]);E.vertexLength+=u,E.primitiveLength+=pe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,S,x)},Ri("FillBucket",El,{omit:["layers","patternFeatures"]});var Mp=new C({"fill-sort-key":new mi(Ie.layout_fill["fill-sort-key"])}),Pp={paint:new C({"fill-antialias":new gi(Ie.paint_fill["fill-antialias"]),"fill-opacity":new mi(Ie.paint_fill["fill-opacity"]),"fill-color":new mi(Ie.paint_fill["fill-color"]),"fill-outline-color":new mi(Ie.paint_fill["fill-outline-color"]),"fill-translate":new gi(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new gi(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new xu(Ie.paint_fill["fill-pattern"])}),layout:Mp},Lp=function(t){function s(d){t.call(this,d,Pp)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.recalculate=function(d,x){t.prototype.recalculate.call(this,d,x);var S=this.paint._values["fill-outline-color"];S.value.kind==="constant"&&S.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},s.prototype.createBucket=function(d){return new El(d)},s.prototype.queryRadius=function(){return Do(this.paint.get("fill-translate"))},s.prototype.queryIntersectsFeature=function(d,x,S,M,r,i,u){return Ha(Wa(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,u),M)},s.prototype.isTileClipped=function(){return!0},s}(l),sg=B([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Tf=ph;function ph(t,s,d,x,S){this.properties={},this.extent=d,this.type=0,this._pbf=t,this._geometry=-1,this._keys=x,this._values=S,t.readFields(lg,this,s)}function lg(t,s,d){t==1?s.id=d.readVarint():t==2?function(x,S){for(var M=x.readVarint()+x.pos;x.pos<M;){var r=S._keys[x.readVarint()],i=S._values[x.readVarint()];S.properties[r]=i}}(d,s):t==3?s.type=d.readVarint():t==4&&(s._geometry=d.pos)}function rc(t){for(var s,d,x=0,S=0,M=t.length,r=M-1;S<M;r=S++)x+=((d=t[r]).x-(s=t[S]).x)*(s.y+d.y);return x}ph.types=["Unknown","Point","LineString","Polygon"],ph.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var s,d=t.readVarint()+t.pos,x=1,S=0,M=0,r=0,i=[];t.pos<d;){if(S<=0){var u=t.readVarint();x=7&u,S=u>>3}if(S--,x===1||x===2)M+=t.readSVarint(),r+=t.readSVarint(),x===1&&(s&&i.push(s),s=[]),s.push(new z(M,r));else{if(x!==7)throw new Error("unknown command "+x);s&&s.push(s[0].clone())}}return s&&i.push(s),i},ph.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var s=t.readVarint()+t.pos,d=1,x=0,S=0,M=0,r=1/0,i=-1/0,u=1/0,m=-1/0;t.pos<s;){if(x<=0){var b=t.readVarint();d=7&b,x=b>>3}if(x--,d===1||d===2)(S+=t.readSVarint())<r&&(r=S),S>i&&(i=S),(M+=t.readSVarint())<u&&(u=M),M>m&&(m=M);else if(d!==7)throw new Error("unknown command "+d)}return[r,u,i,m]},ph.prototype.toGeoJSON=function(t,s,d){var x,S,M=this.extent*Math.pow(2,d),r=this.extent*t,i=this.extent*s,u=this.loadGeometry(),m=ph.types[this.type];function b(D){for(var U=0;U<D.length;U++){var V=D[U];D[U]=[360*(V.x+r)/M-180,360/Math.PI*Math.atan(Math.exp((180-360*(V.y+i)/M)*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(x=0;x<u.length;x++)E[x]=u[x][0];b(u=E);break;case 2:for(x=0;x<u.length;x++)b(u[x]);break;case 3:for(u=function(D){var U=D.length;if(U<=1)return[D];for(var V,G,q=[],K=0;K<U;K++){var $=rc(D[K]);$!==0&&(G===void 0&&(G=$<0),G===$<0?(V&&q.push(V),V=[D[K]]):V.push(D[K]))}return V&&q.push(V),q}(u),x=0;x<u.length;x++)for(S=0;S<u[x].length;S++)b(u[x][S])}u.length===1?u=u[0]:m="Multi"+m;var T={type:"Feature",geometry:{type:m,coordinates:u},properties:this.properties};return"id"in this&&(T.id=this.id),T};var Af=zp;function zp(t,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fh,this,s),this.length=this._features.length}function fh(t,s,d){t===15?s.version=d.readVarint():t===1?s.name=d.readString():t===5?s.extent=d.readVarint():t===2?s._features.push(d.pos):t===3?s._keys.push(d.readString()):t===4&&s._values.push(function(x){for(var S=null,M=x.readVarint()+x.pos;x.pos<M;){var r=x.readVarint()>>3;S=r===1?x.readString():r===2?x.readFloat():r===3?x.readDouble():r===4?x.readVarint64():r===5?x.readVarint():r===6?x.readSVarint():r===7?x.readBoolean():null}return S}(d))}function ug(t,s,d){if(t===3){var x=new Af(d,d.readVarint()+d.pos);x.length&&(s[x.name]=x)}}zp.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var s=this._pbf.readVarint()+this._pbf.pos;return new Tf(this._pbf,s,this.extent,this._keys,this._values)};var mh={VectorTile:function(t,s){this.layers=t.readFields(ug,{},s)},VectorTileFeature:Tf,VectorTileLayer:Af},cg=mh.VectorTileFeature.types,Od=Math.pow(2,13);function gh(t,s,d,x,S,M,r,i){t.emplaceBack(s,d,2*Math.floor(x*Od)+r,S*Od*2,M*Od*2,Math.round(i))}var Il=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ne,this.indexArray=new jt,this.programConfigurations=new Qi(t.layers,t.zoom),this.segments=new xe,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};function hg(t,s){return t.x===s.x&&(t.x<0||t.x>8192)||t.y===s.y&&(t.y<0||t.y>8192)}Il.prototype.populate=function(t,s,d){this.features=[],this.hasPattern=kp("fill-extrusion",this.layers,s);for(var x=0,S=t;x<S.length;x+=1){var M=S[x],r=M.feature,i=M.id,u=M.index,m=M.sourceLayerIndex,b=this.layers[0]._featureFilter.needGeometry,E=er(r,b);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),E,d)){var T={id:i,sourceLayerIndex:m,index:u,geometry:b?E.geometry:io(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(Xh("fill-extrusion",this.layers,T,this.zoom,s)):this.addFeature(T,T.geometry,u,d,{}),s.featureIndex.insert(r,T.geometry,u,m,this.index,!0)}}},Il.prototype.addFeatures=function(t,s,d){for(var x=0,S=this.features;x<S.length;x+=1){var M=S[x];this.addFeature(M,M.geometry,M.index,s,d)}},Il.prototype.update=function(t,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,d)},Il.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Il.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Il.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sg),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Il.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Il.prototype.addFeature=function(t,s,d,x,S){for(var M=0,r=Rd(s,500);M<r.length;M+=1){for(var i=r[M],u=0,m=0,b=i;m<b.length;m+=1)u+=b[m].length;for(var E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),T=0,D=i;T<D.length;T+=1){var U=D[T];if(U.length!==0&&!((Zt=U).every(function(Nt){return Nt.x<0})||Zt.every(function(Nt){return Nt.x>8192})||Zt.every(function(Nt){return Nt.y<0})||Zt.every(function(Nt){return Nt.y>8192})))for(var V=0,G=0;G<U.length;G++){var q=U[G];if(G>=1){var K=U[G-1];if(!hg(q,K)){E.vertexLength+4>xe.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var $=q.sub(K)._perp()._unit(),ie=K.dist(q);V+ie>32768&&(V=0),gh(this.layoutVertexArray,q.x,q.y,$.x,$.y,0,0,V),gh(this.layoutVertexArray,q.x,q.y,$.x,$.y,0,1,V),gh(this.layoutVertexArray,K.x,K.y,$.x,$.y,0,0,V+=ie),gh(this.layoutVertexArray,K.x,K.y,$.x,$.y,0,1,V);var pe=E.vertexLength;this.indexArray.emplaceBack(pe,pe+2,pe+1),this.indexArray.emplaceBack(pe+1,pe+2,pe+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+u>xe.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),cg[t.type]==="Polygon"){for(var ve=[],Be=[],Qe=E.vertexLength,nt=0,rt=i;nt<rt.length;nt+=1){var vt=rt[nt];if(vt.length!==0){vt!==i[0]&&Be.push(ve.length/2);for(var ot=0;ot<vt.length;ot++){var Kt=vt[ot];gh(this.layoutVertexArray,Kt.x,Kt.y,0,0,1,1,0),ve.push(Kt.x),ve.push(Kt.y)}}}for(var Wt=Ip(ve,Be),Pt=0;Pt<Wt.length;Pt+=3)this.indexArray.emplaceBack(Qe+Wt[Pt],Qe+Wt[Pt+2],Qe+Wt[Pt+1]);E.primitiveLength+=Wt.length/3,E.vertexLength+=u}}var Zt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,S,x)},Ri("FillExtrusionBucket",Il,{omit:["layers","features"]});var dg={paint:new C({"fill-extrusion-opacity":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xu(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},pg=function(t){function s(d){t.call(this,d,dg)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.createBucket=function(d){return new Il(d)},s.prototype.queryRadius=function(){return Do(this.paint.get("fill-extrusion-translate"))},s.prototype.is3D=function(){return!0},s.prototype.queryIntersectsFeature=function(d,x,S,M,r,i,u,m){var b=Wa(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i.angle,u),E=this.paint.get("fill-extrusion-height").evaluate(x,S),T=this.paint.get("fill-extrusion-base").evaluate(x,S),D=function(V,G,q,K){for(var $=[],ie=0,pe=V;ie<pe.length;ie+=1){var ve=pe[ie],Be=[ve.x,ve.y,0,1];ic(Be,Be,G),$.push(new z(Be[0]/Be[3],Be[1]/Be[3]))}return $}(b,m),U=function(V,G,q,K){for(var $=[],ie=[],pe=K[8]*G,ve=K[9]*G,Be=K[10]*G,Qe=K[11]*G,nt=K[8]*q,rt=K[9]*q,vt=K[10]*q,ot=K[11]*q,Kt=0,Wt=V;Kt<Wt.length;Kt+=1){for(var Pt=[],Zt=[],Nt=0,$t=Wt[Kt];Nt<$t.length;Nt+=1){var Bt=$t[Nt],Vt=Bt.x,ki=Bt.y,Ai=K[0]*Vt+K[4]*ki+K[12],on=K[1]*Vt+K[5]*ki+K[13],un=K[2]*Vt+K[6]*ki+K[14],Rn=K[3]*Vt+K[7]*ki+K[15],Kn=un+Be,mr=Rn+Qe,gr=Ai+nt,or=on+rt,Er=un+vt,ar=Rn+ot,Ir=new z((Ai+pe)/mr,(on+ve)/mr);Ir.z=Kn/mr,Pt.push(Ir);var vn=new z(gr/ar,or/ar);vn.z=Er/ar,Zt.push(vn)}$.push(Pt),ie.push(Zt)}return[$,ie]}(M,T,E,m);return function(V,G,q){var K=1/0;Ha(q,G)&&(K=yh(q,G[0]));for(var $=0;$<G.length;$++)for(var ie=G[$],pe=V[$],ve=0;ve<ie.length-1;ve++){var Be=ie[ve],Qe=[Be,ie[ve+1],pe[ve+1],pe[ve],Be];Ga(q,Qe)&&(K=Math.min(K,yh(q,Qe)))}return K!==1/0&&K}(U[0],U[1],D)},s}(l);function Rc(t,s){return t.x*s.x+t.y*s.y}function yh(t,s){if(t.length===1){for(var d,x=0,S=s[x++];!d||S.equals(d);)if(!(d=s[x++]))return 1/0;for(;x<s.length;x++){var M=s[x],r=t[0],i=d.sub(S),u=M.sub(S),m=r.sub(S),b=Rc(i,i),E=Rc(i,u),T=Rc(u,u),D=Rc(m,i),U=Rc(m,u),V=b*T-E*E,G=(T*D-E*U)/V,q=(b*U-E*D)/V,K=S.z*(1-G-q)+d.z*G+M.z*q;if(isFinite(K))return K}return 1/0}for(var $=1/0,ie=0,pe=s;ie<pe.length;ie+=1)$=Math.min($,pe[ie].z);return $}var Dp=B([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,fg=B([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,mg=mh.VectorTileFeature.types,gg=Math.cos(Math.PI/180*37.5),_h=Math.pow(2,14)/.5,Ea=function(t){var s=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(d){s.gradients[d.id]={}}),this.layoutVertexArray=new se,this.layoutVertexArray2=new ye,this.indexArray=new jt,this.programConfigurations=new Qi(t.layers,t.zoom),this.segments=new xe,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};Ea.prototype.populate=function(t,s,d){this.hasPattern=kp("line",this.layers,s);for(var x=this.layers[0].layout.get("line-sort-key"),S=[],M=0,r=t;M<r.length;M+=1){var i=r[M],u=i.feature,m=i.id,b=i.index,E=i.sourceLayerIndex,T=this.layers[0]._featureFilter.needGeometry,D=er(u,T);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),D,d)){var U=x?x.evaluate(D,{},d):void 0,V={id:m,properties:u.properties,type:u.type,sourceLayerIndex:E,index:b,geometry:T?D.geometry:io(u),patterns:{},sortKey:U};S.push(V)}}x&&S.sort(function(Be,Qe){return Be.sortKey-Qe.sortKey});for(var G=0,q=S;G<q.length;G+=1){var K=q[G],$=K.geometry,ie=K.index,pe=K.sourceLayerIndex;if(this.hasPattern){var ve=Xh("line",this.layers,K,this.zoom,s);this.patternFeatures.push(ve)}else this.addFeature(K,$,ie,d,{});s.featureIndex.insert(t[ie].feature,$,ie,pe,this.index)}},Ea.prototype.update=function(t,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,d)},Ea.prototype.addFeatures=function(t,s,d){for(var x=0,S=this.patternFeatures;x<S.length;x+=1){var M=S[x];this.addFeature(M,M.geometry,M.index,s,d)}},Ea.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ea.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ea.prototype.upload=function(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,fg)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Dp),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ea.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ea.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ea.prototype.addFeature=function(t,s,d,x,S){var M=this.layers[0].layout,r=M.get("line-join").evaluate(t,{}),i=M.get("line-cap"),u=M.get("line-miter-limit"),m=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var b=0,E=s;b<E.length;b+=1)this.addLine(E[b],t,r,i,u,m);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,S,x)},Ea.prototype.addLine=function(t,s,d,x,S,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var r=0;r<t.length-1;r++)this.totalDistance+=t[r].dist(t[r+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var i=mg[s.type]==="Polygon",u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var m=0;m<u-1&&t[m].equals(t[m+1]);)m++;if(!(u<(i?3:2))){d==="bevel"&&(S=1.05);var b,E=this.overscaling<=16?122880/(512*this.overscaling):0,T=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),D=void 0,U=void 0,V=void 0,G=void 0;this.e1=this.e2=-1,i&&(G=t[m].sub(b=t[u-2])._unit()._perp());for(var q=m;q<u;q++)if(!(U=q===u-1?i?t[m+1]:void 0:t[q+1])||!t[q].equals(U)){G&&(V=G),b&&(D=b),b=t[q],G=U?U.sub(b)._unit()._perp():V;var K=(V=V||G).add(G);K.x===0&&K.y===0||K._unit();var $=V.x*G.x+V.y*G.y,ie=K.x*G.x+K.y*G.y,pe=ie!==0?1/ie:1/0,ve=2*Math.sqrt(2-2*ie),Be=ie<gg&&D&&U,Qe=V.x*G.y-V.y*G.x>0;if(Be&&q>m){var nt=b.dist(D);if(nt>2*E){var rt=b.sub(b.sub(D)._mult(E/nt)._round());this.updateDistance(D,rt),this.addCurrentVertex(rt,V,0,0,T),D=rt}}var vt=D&&U,ot=vt?d:i?"butt":x;if(vt&&ot==="round"&&(pe<M?ot="miter":pe<=2&&(ot="fakeround")),ot==="miter"&&pe>S&&(ot="bevel"),ot==="bevel"&&(pe>2&&(ot="flipbevel"),pe<S&&(ot="miter")),D&&this.updateDistance(D,b),ot==="miter")K._mult(pe),this.addCurrentVertex(b,K,0,0,T);else if(ot==="flipbevel"){if(pe>100)K=G.mult(-1);else{var Kt=pe*V.add(G).mag()/V.sub(G).mag();K._perp()._mult(Kt*(Qe?-1:1))}this.addCurrentVertex(b,K,0,0,T),this.addCurrentVertex(b,K.mult(-1),0,0,T)}else if(ot==="bevel"||ot==="fakeround"){var Wt=-Math.sqrt(pe*pe-1),Pt=Qe?Wt:0,Zt=Qe?0:Wt;if(D&&this.addCurrentVertex(b,V,Pt,Zt,T),ot==="fakeround")for(var Nt=Math.round(180*ve/Math.PI/20),$t=1;$t<Nt;$t++){var Bt=$t/Nt;if(Bt!==.5){var Vt=Bt-.5;Bt+=Bt*Vt*(Bt-1)*((1.0904+$*($*(3.55645-1.43519*$)-3.2452))*Vt*Vt+(.848013+$*(.215638*$-1.06021)))}var ki=G.sub(V)._mult(Bt)._add(V)._unit()._mult(Qe?-1:1);this.addHalfVertex(b,ki.x,ki.y,!1,Qe,0,T)}U&&this.addCurrentVertex(b,G,-Pt,-Zt,T)}else if(ot==="butt")this.addCurrentVertex(b,K,0,0,T);else if(ot==="square"){var Ai=D?1:-1;this.addCurrentVertex(b,K,Ai,Ai,T)}else ot==="round"&&(D&&(this.addCurrentVertex(b,V,0,0,T),this.addCurrentVertex(b,V,1,1,T,!0)),U&&(this.addCurrentVertex(b,G,-1,-1,T,!0),this.addCurrentVertex(b,G,0,0,T)));if(Be&&q<u-1){var on=b.dist(U);if(on>2*E){var un=b.add(U.sub(b)._mult(E/on)._round());this.updateDistance(b,un),this.addCurrentVertex(un,G,0,0,T),b=un}}}}},Ea.prototype.addCurrentVertex=function(t,s,d,x,S,M){M===void 0&&(M=!1);var r=s.y*x-s.x,i=-s.y-s.x*x;this.addHalfVertex(t,s.x+s.y*d,s.y-s.x*d,M,!1,d,S),this.addHalfVertex(t,r,i,M,!0,-x,S),this.distance>_h/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,s,d,x,S,M))},Ea.prototype.addHalfVertex=function(t,s,d,x,S,M,r){var i=.5*(this.lineClips?this.scaledDistance*(_h-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(x?1:0),(t.y<<1)+(S?1:0),Math.round(63*s)+128,Math.round(63*d)+128,1+(M===0?0:M<0?-1:1)|(63&i)<<2,i>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=r.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),r.primitiveLength++),S?this.e2=u:this.e1=u},Ea.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ea.prototype.updateDistance=function(t,s){this.distance+=t.dist(s),this.updateScaledDistance()},Ri("LineBucket",Ea,{omit:["layers","patternFeatures"]});var yg=new C({"line-cap":new gi(Ie.layout_line["line-cap"]),"line-join":new mi(Ie.layout_line["line-join"]),"line-miter-limit":new gi(Ie.layout_line["line-miter-limit"]),"line-round-limit":new gi(Ie.layout_line["line-round-limit"]),"line-sort-key":new mi(Ie.layout_line["line-sort-key"])}),Cf={paint:new C({"line-opacity":new mi(Ie.paint_line["line-opacity"]),"line-color":new mi(Ie.paint_line["line-color"]),"line-translate":new gi(Ie.paint_line["line-translate"]),"line-translate-anchor":new gi(Ie.paint_line["line-translate-anchor"]),"line-width":new mi(Ie.paint_line["line-width"]),"line-gap-width":new mi(Ie.paint_line["line-gap-width"]),"line-offset":new mi(Ie.paint_line["line-offset"]),"line-blur":new mi(Ie.paint_line["line-blur"]),"line-dasharray":new xo(Ie.paint_line["line-dasharray"]),"line-pattern":new xu(Ie.paint_line["line-pattern"]),"line-gradient":new da(Ie.paint_line["line-gradient"])}),layout:yg},kf=new(function(t){function s(){t.apply(this,arguments)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.possiblyEvaluate=function(d,x){return x=new ci(Math.floor(x.zoom),{now:x.now,fadeDuration:x.fadeDuration,zoomHistory:x.zoomHistory,transition:x.transition}),t.prototype.possiblyEvaluate.call(this,d,x)},s.prototype.evaluate=function(d,x,S,M){return x=oe({},x,{zoom:Math.floor(x.zoom)}),t.prototype.evaluate.call(this,d,x,S,M)},s}(mi))(Cf.paint.properties["line-width"].specification);kf.useIntegerZoom=!0;var _g=function(t){function s(d){t.call(this,d,Cf),this.gradientVersion=0}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qo,this.gradientVersion=(this.gradientVersion+1)%Y)},s.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},s.prototype.recalculate=function(d,x){t.prototype.recalculate.call(this,d,x),this.paint._values["line-floorwidth"]=kf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)},s.prototype.createBucket=function(d){return new Ea(d)},s.prototype.queryRadius=function(d){var x=d,S=Mf(Ds("line-width",this,x),Ds("line-gap-width",this,x)),M=Ds("line-offset",this,x);return S/2+Math.abs(M)+Do(this.paint.get("line-translate"))},s.prototype.queryIntersectsFeature=function(d,x,S,M,r,i,u){var m=Wa(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),i.angle,u),b=u/2*Mf(this.paint.get("line-width").evaluate(x,S),this.paint.get("line-gap-width").evaluate(x,S)),E=this.paint.get("line-offset").evaluate(x,S);return E&&(M=function(T,D){for(var U=[],V=new z(0,0),G=0;G<T.length;G++){for(var q=T[G],K=[],$=0;$<q.length;$++){var ie=q[$],pe=q[$+1],ve=$===0?V:ie.sub(q[$-1])._unit()._perp(),Be=$===q.length-1?V:pe.sub(ie)._unit()._perp(),Qe=ve._add(Be)._unit();Qe._mult(1/(Qe.x*Be.x+Qe.y*Be.y)),K.push(Qe._mult(D)._add(ie))}U.push(K)}return U}(M,E*u)),function(T,D,U){for(var V=0;V<D.length;V++){var G=D[V];if(T.length>=3){for(var q=0;q<G.length;q++)if(Qs(T,G[q]))return!0}if(Za(T,G,U))return!0}return!1}(m,M,b)},s.prototype.isTileClipped=function(){return!0},s}(l);function Mf(t,s){return s>0?s+2*t:t}var vg=B([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pf=B([{name:"a_projected_pos",components:3,type:"Float32"}],4),Rp=(B([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),B([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Lf=(B([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),B([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zf=B([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Df(t,s,d){return t.sections.forEach(function(x){x.text=function(S,M,r){var i=M.layout.get("text-transform").evaluate(r,{});return i==="uppercase"?S=S.toLocaleUpperCase():i==="lowercase"&&(S=S.toLocaleLowerCase()),Bi.applyArabicShaping&&(S=Bi.applyArabicShaping(S)),S}(x.text,s,d)}),t}B([{name:"triangle",components:3,type:"Uint16"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),B([{type:"Float32",name:"offsetX"}]),B([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Rf=function(t,s,d,x,S){var M,r,i=8*S-x-1,u=(1<<i)-1,m=u>>1,b=-7,E=d?S-1:0,T=d?-1:1,D=t[s+E];for(E+=T,M=D&(1<<-b)-1,D>>=-b,b+=i;b>0;M=256*M+t[s+E],E+=T,b-=8);for(r=M&(1<<-b)-1,M>>=-b,b+=x;b>0;r=256*r+t[s+E],E+=T,b-=8);if(M===0)M=1-m;else{if(M===u)return r?NaN:1/0*(D?-1:1);r+=Math.pow(2,x),M-=m}return(D?-1:1)*r*Math.pow(2,M-x)},Of=function(t,s,d,x,S,M){var r,i,u,m=8*M-S-1,b=(1<<m)-1,E=b>>1,T=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=x?0:M-1,U=x?1:-1,V=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(i=isNaN(s)?1:0,r=b):(r=Math.floor(Math.log(s)/Math.LN2),s*(u=Math.pow(2,-r))<1&&(r--,u*=2),(s+=r+E>=1?T/u:T*Math.pow(2,1-E))*u>=2&&(r++,u/=2),r+E>=b?(i=0,r=b):r+E>=1?(i=(s*u-1)*Math.pow(2,S),r+=E):(i=s*Math.pow(2,E-1)*Math.pow(2,S),r=0));S>=8;t[d+D]=255&i,D+=U,i/=256,S-=8);for(r=r<<S|i,m+=S;m>0;t[d+D]=255&r,D+=U,r/=256,m-=8);t[d+D-U]|=128*V},Bd=jr;function jr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}jr.Varint=0,jr.Fixed64=1,jr.Bytes=2,jr.Fixed32=5;var Bf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Tu(t){return t.type===jr.Bytes?t.readVarint()+t.pos:t.pos+1}function Hl(t,s,d){return d?4294967296*s+(t>>>0):4294967296*(s>>>0)+(t>>>0)}function aa(t,s,d){var x=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));d.realloc(x);for(var S=d.pos-1;S>=t;S--)d.buf[S+x]=d.buf[S]}function Op(t,s){for(var d=0;d<t.length;d++)s.writeVarint(t[d])}function Ff(t,s){for(var d=0;d<t.length;d++)s.writeSVarint(t[d])}function Uf(t,s){for(var d=0;d<t.length;d++)s.writeFloat(t[d])}function Zr(t,s){for(var d=0;d<t.length;d++)s.writeDouble(t[d])}function oc(t,s){for(var d=0;d<t.length;d++)s.writeBoolean(t[d])}function Bp(t,s){for(var d=0;d<t.length;d++)s.writeFixed32(t[d])}function Nf(t,s){for(var d=0;d<t.length;d++)s.writeSFixed32(t[d])}function Vf(t,s){for(var d=0;d<t.length;d++)s.writeFixed64(t[d])}function Au(t,s){for(var d=0;d<t.length;d++)s.writeSFixed64(t[d])}function Cu(t,s){return(t[s]|t[s+1]<<8|t[s+2]<<16)+16777216*t[s+3]}function Oc(t,s,d){t[d]=s,t[d+1]=s>>>8,t[d+2]=s>>>16,t[d+3]=s>>>24}function jf(t,s){return(t[s]|t[s+1]<<8|t[s+2]<<16)+(t[s+3]<<24)}function bg(t,s,d){t===1&&d.readMessage(xg,s)}function xg(t,s,d){if(t===3){var x=d.readMessage(wg,{}),S=x.width,M=x.height,r=x.left,i=x.top,u=x.advance;s.push({id:x.id,bitmap:new Lc({width:S+6,height:M+6},x.bitmap),metrics:{width:S,height:M,left:r,top:i,advance:u}})}}function wg(t,s,d){t===1?s.id=d.readVarint():t===2?s.bitmap=d.readBytes():t===3?s.width=d.readVarint():t===4?s.height=d.readVarint():t===5?s.left=d.readSVarint():t===6?s.top=d.readSVarint():t===7&&(s.advance=d.readVarint())}function qf(t){for(var s=0,d=0,x=0,S=t;x<S.length;x+=1){var M=S[x];s+=M.w*M.h,d=Math.max(d,M.w)}t.sort(function(V,G){return G.h-V.h});for(var r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),d),h:1/0}],i=0,u=0,m=0,b=t;m<b.length;m+=1)for(var E=b[m],T=r.length-1;T>=0;T--){var D=r[T];if(!(E.w>D.w||E.h>D.h)){if(E.x=D.x,E.y=D.y,u=Math.max(u,E.y+E.h),i=Math.max(i,E.x+E.w),E.w===D.w&&E.h===D.h){var U=r.pop();T<r.length&&(r[T]=U)}else E.h===D.h?(D.x+=E.w,D.w-=E.w):E.w===D.w?(D.y+=E.h,D.h-=E.h):(r.push({x:D.x+E.w,y:D.y,w:D.w-E.w,h:E.h}),D.y+=E.h,D.h-=E.h);break}}return{w:i,h:u,fill:s/(i*u)||0}}jr.prototype={destroy:function(){this.buf=null},readFields:function(t,s,d){for(d=d||this.length;this.pos<d;){var x=this.readVarint(),S=x>>3,M=this.pos;this.type=7&x,t(S,s,this),this.pos===M&&this.skip(x)}return s},readMessage:function(t,s){return this.readFields(t,s,this.readVarint()+this.pos)},readFixed32:function(){var t=Cu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=jf(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Cu(this.buf,this.pos)+4294967296*Cu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Cu(this.buf,this.pos)+4294967296*jf(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Rf(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Rf(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var s,d,x=this.buf;return s=127&(d=x[this.pos++]),d<128?s:(s|=(127&(d=x[this.pos++]))<<7,d<128?s:(s|=(127&(d=x[this.pos++]))<<14,d<128?s:(s|=(127&(d=x[this.pos++]))<<21,d<128?s:function(S,M,r){var i,u,m=r.buf;if(i=(112&(u=m[r.pos++]))>>4,u<128||(i|=(127&(u=m[r.pos++]))<<3,u<128)||(i|=(127&(u=m[r.pos++]))<<10,u<128)||(i|=(127&(u=m[r.pos++]))<<17,u<128)||(i|=(127&(u=m[r.pos++]))<<24,u<128)||(i|=(1&(u=m[r.pos++]))<<31,u<128))return Hl(S,i,M);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(d=x[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,s=this.pos;return this.pos=t,t-s>=12&&Bf?function(d,x,S){return Bf.decode(d.subarray(x,S))}(this.buf,s,t):function(d,x,S){for(var M="",r=x;r<S;){var i,u,m,b=d[r],E=null,T=b>239?4:b>223?3:b>191?2:1;if(r+T>S)break;T===1?b<128&&(E=b):T===2?(192&(i=d[r+1]))==128&&(E=(31&b)<<6|63&i)<=127&&(E=null):T===3?(u=d[r+2],(192&(i=d[r+1]))==128&&(192&u)==128&&((E=(15&b)<<12|(63&i)<<6|63&u)<=2047||E>=55296&&E<=57343)&&(E=null)):T===4&&(u=d[r+2],m=d[r+3],(192&(i=d[r+1]))==128&&(192&u)==128&&(192&m)==128&&((E=(15&b)<<18|(63&i)<<12|(63&u)<<6|63&m)<=65535||E>=1114112)&&(E=null)),E===null?(E=65533,T=1):E>65535&&(E-=65536,M+=String.fromCharCode(E>>>10&1023|55296),E=56320|1023&E),M+=String.fromCharCode(E),r+=T}return M}(this.buf,s,t)},readBytes:function(){var t=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,t);return this.pos=t,s},readPackedVarint:function(t,s){if(this.type!==jr.Bytes)return t.push(this.readVarint(s));var d=Tu(this);for(t=t||[];this.pos<d;)t.push(this.readVarint(s));return t},readPackedSVarint:function(t){if(this.type!==jr.Bytes)return t.push(this.readSVarint());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==jr.Bytes)return t.push(this.readBoolean());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==jr.Bytes)return t.push(this.readFloat());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==jr.Bytes)return t.push(this.readDouble());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==jr.Bytes)return t.push(this.readFixed32());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==jr.Bytes)return t.push(this.readSFixed32());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==jr.Bytes)return t.push(this.readFixed64());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==jr.Bytes)return t.push(this.readSFixed64());var s=Tu(this);for(t=t||[];this.pos<s;)t.push(this.readSFixed64());return t},skip:function(t){var s=7&t;if(s===jr.Varint)for(;this.buf[this.pos++]>127;);else if(s===jr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===jr.Fixed32)this.pos+=4;else{if(s!==jr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(t,s){this.writeVarint(t<<3|s)},realloc:function(t){for(var s=this.length||16;s<this.pos+t;)s*=2;if(s!==this.length){var d=new Uint8Array(s);d.set(this.buf),this.buf=d,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Oc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Oc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Oc(this.buf,-1&t,this.pos),Oc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Oc(this.buf,-1&t,this.pos),Oc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(s,d){var x,S;if(s>=0?(x=s%4294967296|0,S=s/4294967296|0):(S=~(-s/4294967296),4294967295^(x=~(-s%4294967296))?x=x+1|0:(x=0,S=S+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(M,r,i){i.buf[i.pos++]=127&M|128,M>>>=7,i.buf[i.pos++]=127&M|128,M>>>=7,i.buf[i.pos++]=127&M|128,M>>>=7,i.buf[i.pos++]=127&M|128,i.buf[i.pos]=127&(M>>>=7)}(x,0,d),function(M,r){var i=(7&M)<<4;r.buf[r.pos++]|=i|((M>>>=3)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M)))))}(S,d)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var s=this.pos;this.pos=function(x,S,M){for(var r,i,u=0;u<S.length;u++){if((r=S.charCodeAt(u))>55295&&r<57344){if(!i){r>56319||u+1===S.length?(x[M++]=239,x[M++]=191,x[M++]=189):i=r;continue}if(r<56320){x[M++]=239,x[M++]=191,x[M++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(x[M++]=239,x[M++]=191,x[M++]=189,i=null);r<128?x[M++]=r:(r<2048?x[M++]=r>>6|192:(r<65536?x[M++]=r>>12|224:(x[M++]=r>>18|240,x[M++]=r>>12&63|128),x[M++]=r>>6&63|128),x[M++]=63&r|128)}return M}(this.buf,t,this.pos);var d=this.pos-s;d>=128&&aa(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeFloat:function(t){this.realloc(4),Of(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Of(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var s=t.length;this.writeVarint(s),this.realloc(s);for(var d=0;d<s;d++)this.buf[this.pos++]=t[d]},writeRawMessage:function(t,s){this.pos++;var d=this.pos;t(s,this);var x=this.pos-d;x>=128&&aa(d,x,this),this.pos=d-1,this.writeVarint(x),this.pos+=x},writeMessage:function(t,s,d){this.writeTag(t,jr.Bytes),this.writeRawMessage(s,d)},writePackedVarint:function(t,s){s.length&&this.writeMessage(t,Op,s)},writePackedSVarint:function(t,s){s.length&&this.writeMessage(t,Ff,s)},writePackedBoolean:function(t,s){s.length&&this.writeMessage(t,oc,s)},writePackedFloat:function(t,s){s.length&&this.writeMessage(t,Uf,s)},writePackedDouble:function(t,s){s.length&&this.writeMessage(t,Zr,s)},writePackedFixed32:function(t,s){s.length&&this.writeMessage(t,Bp,s)},writePackedSFixed32:function(t,s){s.length&&this.writeMessage(t,Nf,s)},writePackedFixed64:function(t,s){s.length&&this.writeMessage(t,Vf,s)},writePackedSFixed64:function(t,s){s.length&&this.writeMessage(t,Au,s)},writeBytesField:function(t,s){this.writeTag(t,jr.Bytes),this.writeBytes(s)},writeFixed32Field:function(t,s){this.writeTag(t,jr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(t,s){this.writeTag(t,jr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(t,s){this.writeTag(t,jr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(t,s){this.writeTag(t,jr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(t,s){this.writeTag(t,jr.Varint),this.writeVarint(s)},writeSVarintField:function(t,s){this.writeTag(t,jr.Varint),this.writeSVarint(s)},writeStringField:function(t,s){this.writeTag(t,jr.Bytes),this.writeString(s)},writeFloatField:function(t,s){this.writeTag(t,jr.Fixed32),this.writeFloat(s)},writeDoubleField:function(t,s){this.writeTag(t,jr.Fixed64),this.writeDouble(s)},writeBooleanField:function(t,s){this.writeVarintField(t,Boolean(s))}};var Fd=function(t,s){var d=s.pixelRatio,x=s.version,S=s.stretchX,M=s.stretchY,r=s.content;this.paddedRect=t,this.pixelRatio=d,this.stretchX=S,this.stretchY=M,this.content=r,this.version=x},Kh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Kh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Kh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Kh.tlbr.get=function(){return this.tl.concat(this.br)},Kh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Fd.prototype,Kh);var Jh=function(t,s){var d={},x={};this.haveRenderCallbacks=[];var S=[];this.addImages(t,d,S),this.addImages(s,x,S);var M=qf(S),r=new wa({width:M.w||1,height:M.h||1});for(var i in t){var u=t[i],m=d[i].paddedRect;wa.copy(u.data,r,{x:0,y:0},{x:m.x+1,y:m.y+1},u.data)}for(var b in s){var E=s[b],T=x[b].paddedRect,D=T.x+1,U=T.y+1,V=E.data.width,G=E.data.height;wa.copy(E.data,r,{x:0,y:0},{x:D,y:U},E.data),wa.copy(E.data,r,{x:0,y:G-1},{x:D,y:U-1},{width:V,height:1}),wa.copy(E.data,r,{x:0,y:0},{x:D,y:U+G},{width:V,height:1}),wa.copy(E.data,r,{x:V-1,y:0},{x:D-1,y:U},{width:1,height:G}),wa.copy(E.data,r,{x:0,y:0},{x:D+V,y:U},{width:1,height:G})}this.image=r,this.iconPositions=d,this.patternPositions=x};Jh.prototype.addImages=function(t,s,d){for(var x in t){var S=t[x],M={x:0,y:0,w:S.data.width+2,h:S.data.height+2};d.push(M),s[x]=new Fd(M,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(x)}},Jh.prototype.patchUpdatedImages=function(t,s){for(var d in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[d],t.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],t.getImage(d),s)},Jh.prototype.patchUpdatedImage=function(t,s,d){if(t&&s&&t.version!==s.version){t.version=s.version;var x=t.tl;d.update(s.data,void 0,{x:x[0],y:x[1]})}},Ri("ImagePosition",Fd),Ri("ImageAtlas",Jh);var fs={horizontal:1,vertical:2,horizontalOnly:3},ku=function(){this.scale=1,this.fontStack="",this.imageName=null};ku.forText=function(t,s){var d=new ku;return d.scale=t||1,d.fontStack=s,d},ku.forImage=function(t){var s=new ku;return s.imageName=t,s};var Oo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Yh(t,s,d,x,S,M,r,i,u,m,b,E,T,D,U,V){var G,q=Oo.fromFeature(t,S);E===fs.vertical&&q.verticalizePunctuation();var K=Bi.processBidirectionalText,$=Bi.processStyledBidirectionalText;if(K&&q.sections.length===1){G=[];for(var ie=0,pe=K(q.toString(),bh(q,m,M,s,x,D,U));ie<pe.length;ie+=1){var ve=pe[ie],Be=new Oo;Be.text=ve,Be.sections=q.sections;for(var Qe=0;Qe<ve.length;Qe++)Be.sectionIndex.push(0);G.push(Be)}}else if($){G=[];for(var nt=0,rt=$(q.text,q.sectionIndex,bh(q,m,M,s,x,D,U));nt<rt.length;nt+=1){var vt=rt[nt],ot=new Oo;ot.text=vt[0],ot.sectionIndex=vt[1],ot.sections=q.sections,G.push(ot)}}else G=function(Pt,Zt){for(var Nt=[],$t=Pt.text,Bt=0,Vt=0,ki=Zt;Vt<ki.length;Vt+=1){var Ai=ki[Vt];Nt.push(Pt.substring(Bt,Ai)),Bt=Ai}return Bt<$t.length&&Nt.push(Pt.substring(Bt,$t.length)),Nt}(q,bh(q,m,M,s,x,D,U));var Kt=[],Wt={positionedLines:Kt,text:q.toString(),top:b[1],bottom:b[1],left:b[0],right:b[0],writingMode:E,iconsInText:!1,verticalizable:!1};return function(Pt,Zt,Nt,$t,Bt,Vt,ki,Ai,on,un,Rn,Kn){for(var mr=0,gr=-17,or=0,Er=0,ar=Ai==="right"?1:Ai==="left"?0:.5,Ir=0,vn=0,Mn=Bt;vn<Mn.length;vn+=1){var On=Mn[vn];On.trim();var Tn=On.getMaxScale(),qr=24*(Tn-1),Fr={positionedGlyphs:[],lineOffset:0};Pt.positionedLines[Ir]=Fr;var nr=Fr.positionedGlyphs,Hn=0;if(On.length()){for(var br=0;br<On.length();br++){var ji=On.getSection(br),Fo=On.getSectionIndex(br),Wr=On.getCharCode(br),go=0,zr=null,sa=null,Wo=null,ms=24,Ia=!(on===fs.horizontal||!Rn&&!Ls(Wr)||Rn&&(Ud[Wr]||(Xl=Wr,fi.Arabic(Xl)||fi["Arabic Supplement"](Xl)||fi["Arabic Extended-A"](Xl)||fi["Arabic Presentation Forms-A"](Xl)||fi["Arabic Presentation Forms-B"](Xl))));if(ji.imageName){var Sa=$t[ji.imageName];if(!Sa)continue;Wo=ji.imageName,Pt.iconsInText=Pt.iconsInText||!0,sa=Sa.paddedRect;var Uo=Sa.displaySize;ji.scale=24*ji.scale/Kn,go=qr+(24-Uo[1]*ji.scale),ms=(zr={width:Uo[0],height:Uo[1],left:1,top:-3,advance:Ia?Uo[1]:Uo[0]}).advance;var gs=Ia?Uo[0]*ji.scale-24*Tn:Uo[1]*ji.scale-24*Tn;gs>0&&gs>Hn&&(Hn=gs)}else{var dc=Nt[ji.fontStack],qc=dc&&dc[Wr];if(qc&&qc.rect)sa=qc.rect,zr=qc.metrics;else{var Gc=Zt[ji.fontStack],Ah=Gc&&Gc[Wr];if(!Ah)continue;zr=Ah.metrics}go=24*(Tn-ji.scale)}Ia?(Pt.verticalizable=!0,nr.push({glyph:Wr,imageName:Wo,x:mr,y:gr+go,vertical:Ia,scale:ji.scale,fontStack:ji.fontStack,sectionIndex:Fo,metrics:zr,rect:sa}),mr+=ms*ji.scale+un):(nr.push({glyph:Wr,imageName:Wo,x:mr,y:gr+go,vertical:Ia,scale:ji.scale,fontStack:ji.fontStack,sectionIndex:Fo,metrics:zr,rect:sa}),mr+=zr.advance*ji.scale+un)}nr.length!==0&&(or=Math.max(mr-un,or),xh(nr,0,nr.length-1,ar,Hn)),mr=0;var tl=Vt*Tn+Hn;Fr.lineOffset=Math.max(Hn,qr),gr+=tl,Er=Math.max(tl,Er),++Ir}else gr+=Vt,++Ir}var Xl,Hc=gr- -17,pc=Bc(ki),zu=pc.horizontalAlign,Ch=pc.verticalAlign;(function(Yd,Qd,sd,ld,$d,ud,cd,$a,Zc){var Wc,Ta=(Qd-sd)*$d;Wc=ud!==cd?-$a*ld- -17:(-ld*Zc+.5)*cd;for(var es=0,Du=Yd;es<Du.length;es+=1)for(var Sl=0,kh=Du[es].positionedGlyphs;Sl<kh.length;Sl+=1){var il=kh[Sl];il.x+=Ta,il.y+=Wc}})(Pt.positionedLines,ar,zu,Ch,or,Er,Vt,Hc,Bt.length),Pt.top+=-Ch*Hc,Pt.bottom=Pt.top+Hc,Pt.left+=-zu*or,Pt.right=Pt.left+or}(Wt,s,d,x,G,r,i,u,E,m,T,V),!function(Pt){for(var Zt=0,Nt=Pt;Zt<Nt.length;Zt+=1)if(Nt[Zt].positionedGlyphs.length!==0)return!1;return!0}(Kt)&&Wt}Oo.fromFeature=function(t,s){for(var d=new Oo,x=0;x<t.sections.length;x++){var S=t.sections[x];S.image?d.addImageSection(S):d.addTextSection(S,s)}return d},Oo.prototype.length=function(){return this.text.length},Oo.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Oo.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Oo.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Oo.prototype.verticalizePunctuation=function(){this.text=function(t){for(var s="",d=0;d<t.length;d++){var x=t.charCodeAt(d+1)||null,S=t.charCodeAt(d-1)||null;s+=x&&bu(x)&&!vh[t[d+1]]||S&&bu(S)&&!vh[t[d-1]]||!vh[t[d]]?t[d]:vh[t[d]]}return s}(this.text)},Oo.prototype.trim=function(){for(var t=0,s=0;s<this.text.length&&Ud[this.text.charCodeAt(s)];s++)t++;for(var d=this.text.length,x=this.text.length-1;x>=0&&x>=t&&Ud[this.text.charCodeAt(x)];x--)d--;this.text=this.text.substring(t,d),this.sectionIndex=this.sectionIndex.slice(t,d)},Oo.prototype.substring=function(t,s){var d=new Oo;return d.text=this.text.substring(t,s),d.sectionIndex=this.sectionIndex.slice(t,s),d.sections=this.sections,d},Oo.prototype.toString=function(){return this.text},Oo.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(s,d){return Math.max(s,t.sections[d].scale)},0)},Oo.prototype.addTextSection=function(t,s){this.text+=t.text,this.sections.push(ku.forText(t.scale,t.fontStack||s));for(var d=this.sections.length-1,x=0;x<t.text.length;++x)this.sectionIndex.push(d)},Oo.prototype.addImageSection=function(t){var s=t.image?t.image.name:"";if(s.length!==0){var d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(ku.forImage(s)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}else He("Can't add FormattedSection with an empty image.")},Oo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ud={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qa={};function Gf(t,s,d,x,S,M){if(s.imageName){var r=x[s.imageName];return r?r.displaySize[0]*s.scale*24/M+S:0}var i=d[s.fontStack],u=i&&i[t];return u?u.metrics.advance*s.scale+S:0}function Fp(t,s,d,x){var S=Math.pow(t-s,2);return x?t<s?S/2:2*S:S+Math.abs(d)*d}function Up(t,s,d){var x=0;return t===10&&(x-=1e4),d&&(x+=150),t!==40&&t!==65288||(x+=50),s!==41&&s!==65289||(x+=50),x}function Np(t,s,d,x,S,M){for(var r=null,i=Fp(s,d,S,M),u=0,m=x;u<m.length;u+=1){var b=m[u],E=Fp(s-b.x,d,S,M)+b.badness;E<=i&&(r=b,i=E)}return{index:t,x:s,priorBreak:r,badness:i}}function bh(t,s,d,x,S,M,r){if(M!=="point")return[];if(!t)return[];for(var i,u=[],m=function(G,q,K,$,ie,pe){for(var ve=0,Be=0;Be<G.length();Be++){var Qe=G.getSection(Be);ve+=Gf(G.getCharCode(Be),Qe,$,ie,q,pe)}return ve/Math.max(1,Math.ceil(ve/K))}(t,s,d,x,S,r),b=t.text.indexOf("\u200B")>=0,E=0,T=0;T<t.length();T++){var D=t.getSection(T),U=t.getCharCode(T);if(Ud[U]||(E+=Gf(U,D,x,S,s,r)),T<t.length()-1){var V=!((i=U)<11904||!(fi["Bopomofo Extended"](i)||fi.Bopomofo(i)||fi["CJK Compatibility Forms"](i)||fi["CJK Compatibility Ideographs"](i)||fi["CJK Compatibility"](i)||fi["CJK Radicals Supplement"](i)||fi["CJK Strokes"](i)||fi["CJK Symbols and Punctuation"](i)||fi["CJK Unified Ideographs Extension A"](i)||fi["CJK Unified Ideographs"](i)||fi["Enclosed CJK Letters and Months"](i)||fi["Halfwidth and Fullwidth Forms"](i)||fi.Hiragana(i)||fi["Ideographic Description Characters"](i)||fi["Kangxi Radicals"](i)||fi["Katakana Phonetic Extensions"](i)||fi.Katakana(i)||fi["Vertical Forms"](i)||fi["Yi Radicals"](i)||fi["Yi Syllables"](i)));(Qa[U]||V||D.imageName)&&u.push(Np(T+1,E,m,u,Up(U,t.getCharCode(T+1),V&&b),!1))}}return function G(q){return q?G(q.priorBreak).concat(q.index):[]}(Np(t.length(),E,m,u,0,!0))}function Bc(t){var s=.5,d=.5;switch(t){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:s,verticalAlign:d}}function xh(t,s,d,x,S){if(x||S)for(var M=t[d],r=(t[d].x+M.metrics.advance*M.scale)*x,i=s;i<=d;i++)t[i].x-=r,t[i].y+=S}function Qh(t,s,d,x,S,M){var r,i=t.image;if(i.content){var u=i.content,m=i.pixelRatio||1;r=[u[0]/m,u[1]/m,i.displaySize[0]-u[2]/m,i.displaySize[1]-u[3]/m]}var b,E,T,D,U=s.left*M,V=s.right*M;d==="width"||d==="both"?(D=S[0]+U-x[3],E=S[0]+V+x[1]):E=(D=S[0]+(U+V-i.displaySize[0])/2)+i.displaySize[0];var G=s.top*M,q=s.bottom*M;return d==="height"||d==="both"?(b=S[1]+G-x[0],T=S[1]+q+x[2]):T=(b=S[1]+(G+q-i.displaySize[1])/2)+i.displaySize[1],{image:i,top:b,right:E,bottom:T,left:D,collisionPadding:r}}Qa[10]=!0,Qa[32]=!0,Qa[38]=!0,Qa[40]=!0,Qa[41]=!0,Qa[43]=!0,Qa[45]=!0,Qa[47]=!0,Qa[173]=!0,Qa[183]=!0,Qa[8203]=!0,Qa[8208]=!0,Qa[8211]=!0,Qa[8231]=!0;var Mu=function(t){function s(d,x,S,M){t.call(this,d,x),this.angle=S,M!==void 0&&(this.segment=M)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.clone=function(){return new s(this.x,this.y,this.angle,this.segment)},s}(z);function Vp(t,s){var d=s.expression;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new ci(t+1))};if(d.kind==="source")return{kind:"source"};for(var x=d.zoomStops,S=d.interpolationType,M=0;M<x.length&&x[M]<=t;)M++;for(var r=M=Math.max(0,M-1);r<x.length&&x[r]<t+1;)r++;r=Math.min(x.length-1,r);var i=x[M],u=x[r];return d.kind==="composite"?{kind:"composite",minZoom:i,maxZoom:u,interpolationType:S}:{kind:"camera",minZoom:i,maxZoom:u,minSize:d.evaluate(new ci(i)),maxSize:d.evaluate(new ci(u)),interpolationType:S}}function jp(t,s,d){var x=s.uSize,S=d.lowerSize;return t.kind==="source"?S/128:t.kind==="composite"?so(S/128,d.upperSize/128,s.uSizeT):x}function qp(t,s){var d=0,x=0;if(t.kind==="constant")x=t.layoutSize;else if(t.kind!=="source"){var S=t.interpolationType,M=S?te(Ho.interpolationFactor(S,s,t.minZoom,t.maxZoom),0,1):0;t.kind==="camera"?x=so(t.minSize,t.maxSize,M):d=M}return{uSizeT:d,uSize:x}}Ri("Anchor",Mu);var Eg=Object.freeze({__proto__:null,getSizeData:Vp,evaluateSizeForFeature:jp,evaluateSizeForZoom:qp,SIZE_PACK_FACTOR:128});function Gp(t,s,d,x,S){if(s.segment===void 0)return!0;for(var M=s,r=s.segment+1,i=0;i>-d/2;){if(--r<0)return!1;i-=t[r].dist(M),M=t[r]}i+=t[r].dist(t[r+1]),r++;for(var u=[],m=0;i<d/2;){var b=t[r],E=t[r+1];if(!E)return!1;var T=t[r-1].angleTo(b)-b.angleTo(E);for(T=Math.abs((T+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:i,angleDelta:T}),m+=T;i-u[0].distance>x;)m-=u.shift().angleDelta;if(m>S)return!1;r++,i+=b.dist(E)}return!0}function Hp(t){for(var s=0,d=0;d<t.length-1;d++)s+=t[d].dist(t[d+1]);return s}function Nd(t,s,d){return t?.6*s*d:0}function Vd(t,s){return Math.max(t?t.right-t.left:0,s?s.right-s.left:0)}function Ig(t,s,d,x,S,M){for(var r=Nd(d,S,M),i=Vd(d,x)*M,u=0,m=Hp(t)/2,b=0;b<t.length-1;b++){var E=t[b],T=t[b+1],D=E.dist(T);if(u+D>m){var U=(m-u)/D,V=so(E.x,T.x,U),G=so(E.y,T.y,U),q=new Mu(V,G,T.angleTo(E),b);return q._round(),!r||Gp(t,q,i,r,s)?q:void 0}u+=D}}function Sg(t,s,d,x,S,M,r,i,u){var m=Nd(x,M,r),b=Vd(x,S),E=b*r,T=t[0].x===0||t[0].x===u||t[0].y===0||t[0].y===u;return s-E<s/4&&(s=E+s/4),function D(U,V,G,q,K,$,ie,pe,ve){for(var Be=$/2,Qe=Hp(U),nt=0,rt=V-G,vt=[],ot=0;ot<U.length-1;ot++){for(var Kt=U[ot],Wt=U[ot+1],Pt=Kt.dist(Wt),Zt=Wt.angleTo(Kt);rt+G<nt+Pt;){var Nt=((rt+=G)-nt)/Pt,$t=so(Kt.x,Wt.x,Nt),Bt=so(Kt.y,Wt.y,Nt);if($t>=0&&$t<ve&&Bt>=0&&Bt<ve&&rt-Be>=0&&rt+Be<=Qe){var Vt=new Mu($t,Bt,Zt,ot);Vt._round(),q&&!Gp(U,Vt,$,q,K)||vt.push(Vt)}}nt+=Pt}return pe||vt.length||ie||(vt=D(U,nt/2,G,q,K,$,ie,!0,ve)),vt}(t,T?s/2*i%s:(b/2+2*M)*r*i%s,s,m,d,E,T,!1,u)}function Zp(t,s,d,x,S){for(var M=[],r=0;r<t.length;r++)for(var i=t[r],u=void 0,m=0;m<i.length-1;m++){var b=i[m],E=i[m+1];b.x<s&&E.x<s||(b.x<s?b=new z(s,b.y+(s-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x<s&&(E=new z(s,b.y+(s-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y<d&&E.y<d||(b.y<d?b=new z(b.x+(d-b.y)/(E.y-b.y)*(E.x-b.x),d)._round():E.y<d&&(E=new z(b.x+(d-b.y)/(E.y-b.y)*(E.x-b.x),d)._round()),b.x>=x&&E.x>=x||(b.x>=x?b=new z(x,b.y+(x-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x>=x&&(E=new z(x,b.y+(x-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y>=S&&E.y>=S||(b.y>=S?b=new z(b.x+(S-b.y)/(E.y-b.y)*(E.x-b.x),S)._round():E.y>=S&&(E=new z(b.x+(S-b.y)/(E.y-b.y)*(E.x-b.x),S)._round()),u&&b.equals(u[u.length-1])||M.push(u=[b]),u.push(E)))))}return M}function Zl(t,s,d,x){var S=[],M=t.image,r=M.pixelRatio,i=M.paddedRect.w-2,u=M.paddedRect.h-2,m=t.right-t.left,b=t.bottom-t.top,E=M.stretchX||[[0,i]],T=M.stretchY||[[0,u]],D=function($t,Bt){return $t+Bt[1]-Bt[0]},U=E.reduce(D,0),V=T.reduce(D,0),G=i-U,q=u-V,K=0,$=U,ie=0,pe=V,ve=0,Be=G,Qe=0,nt=q;if(M.content&&x){var rt=M.content;K=$h(E,0,rt[0]),ie=$h(T,0,rt[1]),$=$h(E,rt[0],rt[2]),pe=$h(T,rt[1],rt[3]),ve=rt[0]-K,Qe=rt[1]-ie,Be=rt[2]-rt[0]-$,nt=rt[3]-rt[1]-pe}var vt=function($t,Bt,Vt,ki){var Ai=ed($t.stretch-K,$,m,t.left),on=td($t.fixed-ve,Be,$t.stretch,U),un=ed(Bt.stretch-ie,pe,b,t.top),Rn=td(Bt.fixed-Qe,nt,Bt.stretch,V),Kn=ed(Vt.stretch-K,$,m,t.left),mr=td(Vt.fixed-ve,Be,Vt.stretch,U),gr=ed(ki.stretch-ie,pe,b,t.top),or=td(ki.fixed-Qe,nt,ki.stretch,V),Er=new z(Ai,un),ar=new z(Kn,un),Ir=new z(Kn,gr),vn=new z(Ai,gr),Mn=new z(on/r,Rn/r),On=new z(mr/r,or/r),Tn=s*Math.PI/180;if(Tn){var qr=Math.sin(Tn),Fr=Math.cos(Tn),nr=[Fr,-qr,qr,Fr];Er._matMult(nr),ar._matMult(nr),vn._matMult(nr),Ir._matMult(nr)}var Hn=$t.stretch+$t.fixed,br=Bt.stretch+Bt.fixed;return{tl:Er,tr:ar,bl:vn,br:Ir,tex:{x:M.paddedRect.x+1+Hn,y:M.paddedRect.y+1+br,w:Vt.stretch+Vt.fixed-Hn,h:ki.stretch+ki.fixed-br},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mn,pixelOffsetBR:On,minFontScaleX:Be/r/m,minFontScaleY:nt/r/b,isSDF:d}};if(x&&(M.stretchX||M.stretchY))for(var ot=Pu(E,G,U),Kt=Pu(T,q,V),Wt=0;Wt<ot.length-1;Wt++)for(var Pt=ot[Wt],Zt=ot[Wt+1],Nt=0;Nt<Kt.length-1;Nt++)S.push(vt(Pt,Kt[Nt],Zt,Kt[Nt+1]));else S.push(vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:i+1},{fixed:0,stretch:u+1}));return S}function $h(t,s,d){for(var x=0,S=0,M=t;S<M.length;S+=1){var r=M[S];x+=Math.max(s,Math.min(d,r[1]))-Math.max(s,Math.min(d,r[0]))}return x}function Pu(t,s,d){for(var x=[{fixed:-1,stretch:0}],S=0,M=t;S<M.length;S+=1){var r=M[S],i=r[0],u=r[1],m=x[x.length-1];x.push({fixed:i-m.stretch,stretch:m.stretch}),x.push({fixed:i-m.stretch,stretch:m.stretch+(u-i)})}return x.push({fixed:s+1,stretch:d}),x}function ed(t,s,d,x){return t/s*d+x}function td(t,s,d,x){return t-s*d/x}var id=function(t,s,d,x,S,M,r,i,u,m){if(this.boxStartIndex=t.length,u){var b=M.top,E=M.bottom,T=M.collisionPadding;T&&(b-=T[1],E+=T[3]);var D=E-b;D>0&&(D=Math.max(10,D),this.circleDiameter=D)}else{var U=M.top*r-i,V=M.bottom*r+i,G=M.left*r-i,q=M.right*r+i,K=M.collisionPadding;if(K&&(G-=K[0]*r,U-=K[1]*r,q+=K[2]*r,V+=K[3]*r),m){var $=new z(G,U),ie=new z(q,U),pe=new z(G,V),ve=new z(q,V),Be=m*Math.PI/180;$._rotate(Be),ie._rotate(Be),pe._rotate(Be),ve._rotate(Be),G=Math.min($.x,ie.x,pe.x,ve.x),q=Math.max($.x,ie.x,pe.x,ve.x),U=Math.min($.y,ie.y,pe.y,ve.y),V=Math.max($.y,ie.y,pe.y,ve.y)}t.emplaceBack(s.x,s.y,G,U,q,V,d,x,S)}this.boxEndIndex=t.length},Fc=function(t,s){if(t===void 0&&(t=[]),s===void 0&&(s=Tg),this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};function Tg(t,s){return t<s?-1:t>s?1:0}function Ag(t,s,d){s===void 0&&(s=1),d===void 0&&(d=!1);for(var x=1/0,S=1/0,M=-1/0,r=-1/0,i=t[0],u=0;u<i.length;u++){var m=i[u];(!u||m.x<x)&&(x=m.x),(!u||m.y<S)&&(S=m.y),(!u||m.x>M)&&(M=m.x),(!u||m.y>r)&&(r=m.y)}var b=Math.min(M-x,r-S),E=b/2,T=new Fc([],Hf);if(b===0)return new z(x,S);for(var D=x;D<M;D+=b)for(var U=S;U<r;U+=b)T.push(new Uc(D+E,U+E,E,t));for(var V=function(K){for(var $=0,ie=0,pe=0,ve=K[0],Be=0,Qe=ve.length,nt=Qe-1;Be<Qe;nt=Be++){var rt=ve[Be],vt=ve[nt],ot=rt.x*vt.y-vt.x*rt.y;ie+=(rt.x+vt.x)*ot,pe+=(rt.y+vt.y)*ot,$+=3*ot}return new Uc(ie/$,pe/$,0,K)}(t),G=T.length;T.length;){var q=T.pop();(q.d>V.d||!V.d)&&(V=q,d&&console.log("found best %d after %d probes",Math.round(1e4*q.d)/1e4,G)),q.max-V.d<=s||(T.push(new Uc(q.p.x-(E=q.h/2),q.p.y-E,E,t)),T.push(new Uc(q.p.x+E,q.p.y-E,E,t)),T.push(new Uc(q.p.x-E,q.p.y+E,E,t)),T.push(new Uc(q.p.x+E,q.p.y+E,E,t)),G+=4)}return d&&(console.log("num probes: "+G),console.log("best distance: "+V.d)),V.p}function Hf(t,s){return s.max-t.max}function Uc(t,s,d,x){this.p=new z(t,s),this.h=d,this.d=function(S,M){for(var r=!1,i=1/0,u=0;u<M.length;u++)for(var m=M[u],b=0,E=m.length,T=E-1;b<E;T=b++){var D=m[b],U=m[T];D.y>S.y!=U.y>S.y&&S.x<(U.x-D.x)*(S.y-D.y)/(U.y-D.y)+D.x&&(r=!r),i=Math.min(i,ec(S,D,U))}return(r?1:-1)*Math.sqrt(i)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}Fc.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Fc.prototype.pop=function(){if(this.length!==0){var t=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),t}},Fc.prototype.peek=function(){return this.data[0]},Fc.prototype._up=function(t){for(var s=this.data,d=this.compare,x=s[t];t>0;){var S=t-1>>1,M=s[S];if(d(x,M)>=0)break;s[t]=M,t=S}s[t]=x},Fc.prototype._down=function(t){for(var s=this.data,d=this.compare,x=this.length>>1,S=s[t];t<x;){var M=1+(t<<1),r=s[M],i=M+1;if(i<this.length&&d(s[i],r)<0&&(M=i,r=s[i]),d(r,S)>=0)break;s[t]=r,t=M}s[t]=S};var jd=Number.POSITIVE_INFINITY;function nd(t,s){return s[1]!==jd?function(d,x,S){var M=0,r=0;switch(x=Math.abs(x),S=Math.abs(S),d){case"top-right":case"top-left":case"top":r=S-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-S}switch(d){case"top-right":case"bottom-right":case"right":M=-x;break;case"top-left":case"bottom-left":case"left":M=x}return[M,r]}(t,s[0],s[1]):function(d,x){var S=0,M=0;x<0&&(x=0);var r=x/Math.sqrt(2);switch(d){case"top-right":case"top-left":M=r-7;break;case"bottom-right":case"bottom-left":M=7-r;break;case"bottom":M=7-x;break;case"top":M=x-7}switch(d){case"top-right":case"bottom-right":S=-r;break;case"top-left":case"bottom-left":S=r;break;case"left":S=x;break;case"right":S=-x}return[S,M]}(t,s[0])}function qd(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function rd(t,s,d,x,S,M,r,i,u,m,b,E,T,D,U){var V=function(ie,pe,ve,Be,Qe,nt,rt,vt){for(var ot=Be.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,Kt=[],Wt=0,Pt=pe.positionedLines;Wt<Pt.length;Wt+=1)for(var Zt=Pt[Wt],Nt=0,$t=Zt.positionedGlyphs;Nt<$t.length;Nt+=1){var Bt=$t[Nt];if(Bt.rect){var Vt=Bt.rect||{},ki=4,Ai=!0,on=1,un=0,Rn=(Qe||vt)&&Bt.vertical,Kn=Bt.metrics.advance*Bt.scale/2;if(vt&&pe.verticalizable&&(un=Zt.lineOffset/2-(Bt.imageName?-(24-Bt.metrics.width*Bt.scale)/2:24*(Bt.scale-1))),Bt.imageName){var mr=rt[Bt.imageName];Ai=mr.sdf,ki=1/(on=mr.pixelRatio)}var gr=Qe?[Bt.x+Kn,Bt.y]:[0,0],or=Qe?[0,0]:[Bt.x+Kn+ve[0],Bt.y+ve[1]-un],Er=[0,0];Rn&&(Er=or,or=[0,0]);var ar=(Bt.metrics.left-ki)*Bt.scale-Kn+or[0],Ir=(-Bt.metrics.top-ki)*Bt.scale+or[1],vn=ar+Vt.w*Bt.scale/on,Mn=Ir+Vt.h*Bt.scale/on,On=new z(ar,Ir),Tn=new z(vn,Ir),qr=new z(ar,Mn),Fr=new z(vn,Mn);if(Rn){var nr=new z(-Kn,Kn- -17),Hn=-Math.PI/2,br=12-Kn,ji=new z(22-br,-(Bt.imageName?br:0)),Fo=new(Function.prototype.bind.apply(z,[null].concat(Er)));On._rotateAround(Hn,nr)._add(ji)._add(Fo),Tn._rotateAround(Hn,nr)._add(ji)._add(Fo),qr._rotateAround(Hn,nr)._add(ji)._add(Fo),Fr._rotateAround(Hn,nr)._add(ji)._add(Fo)}if(ot){var Wr=Math.sin(ot),go=Math.cos(ot),zr=[go,-Wr,Wr,go];On._matMult(zr),Tn._matMult(zr),qr._matMult(zr),Fr._matMult(zr)}var sa=new z(0,0),Wo=new z(0,0);Kt.push({tl:On,tr:Tn,bl:qr,br:Fr,tex:Vt,writingMode:pe.writingMode,glyphOffset:gr,sectionIndex:Bt.sectionIndex,isSDF:Ai,pixelOffsetTL:sa,pixelOffsetBR:Wo,minFontScaleX:0,minFontScaleY:0})}}return Kt}(0,d,i,S,M,r,x,t.allowVerticalPlacement),G=t.textSizeData,q=null;G.kind==="source"?(q=[128*S.layout.get("text-size").evaluate(r,{})])[0]>32640&&He(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):G.kind==="composite"&&((q=[128*D.compositeTextSizes[0].evaluate(r,{},U),128*D.compositeTextSizes[1].evaluate(r,{},U)])[0]>32640||q[1]>32640)&&He(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,V,q,i,M,r,m,s,u.lineStartIndex,u.lineLength,T,U);for(var K=0,$=b;K<$.length;K+=1)E[$[K]]=t.text.placedSymbolArray.length-1;return 4*V.length}function od(t){for(var s in t)return t[s];return null}function Gd(t,s,d,x){var S=t.compareText;if(s in S){for(var M=S[s],r=M.length-1;r>=0;r--)if(x.dist(M[r])<d)return!0}else S[s]=[];return S[s].push(x),!1}var Cg=mh.VectorTileFeature.types,kg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hd(t,s,d,x,S,M,r,i,u,m,b,E,T){var D=i?Math.min(32640,Math.round(i[0])):0,U=i?Math.min(32640,Math.round(i[1])):0;t.emplaceBack(s,d,Math.round(32*x),Math.round(32*S),M,r,(D<<1)+(u?1:0),U,16*m,16*b,256*E,256*T)}function Wp(t,s,d){t.emplaceBack(s.x,s.y,d),t.emplaceBack(s.x,s.y,d),t.emplaceBack(s.x,s.y,d),t.emplaceBack(s.x,s.y,d)}function wh(t){for(var s=0,d=t.sections;s<d.length;s+=1)if(Vr(d[s].text))return!0;return!1}var ac=function(t){this.layoutVertexArray=new Je,this.indexArray=new jt,this.programConfigurations=t,this.segments=new xe,this.dynamicLayoutVertexArray=new ke,this.opacityVertexArray=new Ke,this.placedSymbolArray=new w};ac.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},ac.prototype.upload=function(t,s,d,x){this.isEmpty()||(d&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vg.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Pf.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,kg,!0),this.opacityVertexBuffer.itemSize=1),(d||x)&&this.programConfigurations.upload(t))},ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ri("SymbolBuffers",ac);var Eh=function(t,s,d){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new d,this.segments=new xe,this.collisionVertexArray=new ft};Eh.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Rp.members,!0)},Eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ri("CollisionBuffers",Eh);var Lr=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(M){return M.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=xa([]),this.placementViewportMatrix=xa([]);var s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vp(this.zoom,s["text-size"]),this.iconSizeData=Vp(this.zoom,s["icon-size"]);var d=this.layers[0].layout,x=d.get("symbol-sort-key"),S=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&x.constantOr(1)!==void 0,this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(function(M){return fs[M]})),this.stateDependentLayerIds=this.layers.filter(function(M){return M.isStateDependent()}).map(function(M){return M.id}),this.sourceID=t.sourceID};Lr.prototype.createArrays=function(){this.text=new ac(new Qi(this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new ac(new Qi(this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new N,this.lineVertexArray=new H,this.symbolInstances=new F},Lr.prototype.calculateGlyphDependencies=function(t,s,d,x,S){for(var M=0;M<t.length;M++)if(s[t.charCodeAt(M)]=!0,(d||x)&&S){var r=vh[t.charAt(M)];r&&(s[r.charCodeAt(0)]=!0)}},Lr.prototype.populate=function(t,s,d){var x=this.layers[0],S=x.layout,M=S.get("text-font"),r=S.get("text-field"),i=S.get("icon-image"),u=(r.value.kind!=="constant"||r.value.value instanceof fr&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),m=i.value.kind!=="constant"||!!i.value.value||Object.keys(i.parameters).length>0,b=S.get("symbol-sort-key");if(this.features=[],u||m){for(var E=s.iconDependencies,T=s.glyphDependencies,D=s.availableImages,U=new ci(this.zoom),V=0,G=t;V<G.length;V+=1){var q=G[V],K=q.feature,$=q.id,ie=q.index,pe=q.sourceLayerIndex,ve=x._featureFilter.needGeometry,Be=er(K,ve);if(x._featureFilter.filter(U,Be,d)){ve||(Be.geometry=io(K));var Qe=void 0;if(u){var nt=x.getValueAndResolveTokens("text-field",Be,d,D),rt=fr.factory(nt);wh(rt)&&(this.hasRTLText=!0),(!this.hasRTLText||qa()==="unavailable"||this.hasRTLText&&Bi.isParsed())&&(Qe=Df(rt,x,Be))}var vt=void 0;if(m){var ot=x.getValueAndResolveTokens("icon-image",Be,d,D);vt=ot instanceof Ko?ot:Ko.fromString(ot)}if(Qe||vt){var Kt=this.sortFeaturesByKey?b.evaluate(Be,{},d):void 0;if(this.features.push({id:$,text:Qe,icon:vt,index:ie,sourceLayerIndex:pe,geometry:Be.geometry,properties:K.properties,type:Cg[K.type],sortKey:Kt}),vt&&(E[vt.name]=!0),Qe){var Wt=M.evaluate(Be,{},d).join(","),Pt=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fs.vertical)>=0;for(var Zt=0,Nt=Qe.sections;Zt<Nt.length;Zt+=1){var $t=Nt[Zt];if($t.image)E[$t.image.name]=!0;else{var Bt=vu(Qe.toString()),Vt=$t.fontStack||Wt,ki=T[Vt]=T[Vt]||{};this.calculateGlyphDependencies($t.text,ki,Pt,this.allowVerticalPlacement,Bt)}}}}}}S.get("symbol-placement")==="line"&&(this.features=function(Ai){var on={},un={},Rn=[],Kn=0;function mr(nr){Rn.push(Ai[nr]),Kn++}function gr(nr,Hn,br){var ji=un[nr];return delete un[nr],un[Hn]=ji,Rn[ji].geometry[0].pop(),Rn[ji].geometry[0]=Rn[ji].geometry[0].concat(br[0]),ji}function or(nr,Hn,br){var ji=on[Hn];return delete on[Hn],on[nr]=ji,Rn[ji].geometry[0].shift(),Rn[ji].geometry[0]=br[0].concat(Rn[ji].geometry[0]),ji}function Er(nr,Hn,br){var ji=br?Hn[0][Hn[0].length-1]:Hn[0][0];return nr+":"+ji.x+":"+ji.y}for(var ar=0;ar<Ai.length;ar++){var Ir=Ai[ar],vn=Ir.geometry,Mn=Ir.text?Ir.text.toString():null;if(Mn){var On=Er(Mn,vn),Tn=Er(Mn,vn,!0);if(On in un&&Tn in on&&un[On]!==on[Tn]){var qr=or(On,Tn,vn),Fr=gr(On,Tn,Rn[qr].geometry);delete on[On],delete un[Tn],un[Er(Mn,Rn[Fr].geometry,!0)]=Fr,Rn[qr].geometry=null}else On in un?gr(On,Tn,vn):Tn in on?or(On,Tn,vn):(mr(ar),on[On]=Kn-1,un[Tn]=Kn-1)}else mr(ar)}return Rn.filter(function(nr){return nr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ai,on){return Ai.sortKey-on.sortKey})}},Lr.prototype.update=function(t,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,d))},Lr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Lr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Lr.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Lr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Lr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Lr.prototype.addToLineVertexArray=function(t,s){var d=this.lineVertexArray.length;if(t.segment!==void 0){for(var x=t.dist(s[t.segment+1]),S=t.dist(s[t.segment]),M={},r=t.segment+1;r<s.length;r++)M[r]={x:s[r].x,y:s[r].y,tileUnitDistanceFromAnchor:x},r<s.length-1&&(x+=s[r+1].dist(s[r]));for(var i=t.segment||0;i>=0;i--)M[i]={x:s[i].x,y:s[i].y,tileUnitDistanceFromAnchor:S},i>0&&(S+=s[i-1].dist(s[i]));for(var u=0;u<s.length;u++){var m=M[u];this.lineVertexArray.emplaceBack(m.x,m.y,m.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}},Lr.prototype.addSymbols=function(t,s,d,x,S,M,r,i,u,m,b,E){for(var T=t.indexArray,D=t.layoutVertexArray,U=t.segments.prepareSegment(4*s.length,D,T,this.canOverlap?M.sortKey:void 0),V=this.glyphOffsetArray.length,G=U.vertexLength,q=this.allowVerticalPlacement&&r===fs.vertical?Math.PI/2:0,K=M.text&&M.text.sections,$=0;$<s.length;$++){var ie=s[$],pe=ie.tl,ve=ie.tr,Be=ie.bl,Qe=ie.br,nt=ie.tex,rt=ie.pixelOffsetTL,vt=ie.pixelOffsetBR,ot=ie.minFontScaleX,Kt=ie.minFontScaleY,Wt=ie.glyphOffset,Pt=ie.isSDF,Zt=ie.sectionIndex,Nt=U.vertexLength,$t=Wt[1];Hd(D,i.x,i.y,pe.x,$t+pe.y,nt.x,nt.y,d,Pt,rt.x,rt.y,ot,Kt),Hd(D,i.x,i.y,ve.x,$t+ve.y,nt.x+nt.w,nt.y,d,Pt,vt.x,rt.y,ot,Kt),Hd(D,i.x,i.y,Be.x,$t+Be.y,nt.x,nt.y+nt.h,d,Pt,rt.x,vt.y,ot,Kt),Hd(D,i.x,i.y,Qe.x,$t+Qe.y,nt.x+nt.w,nt.y+nt.h,d,Pt,vt.x,vt.y,ot,Kt),Wp(t.dynamicLayoutVertexArray,i,q),T.emplaceBack(Nt,Nt+1,Nt+2),T.emplaceBack(Nt+1,Nt+2,Nt+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wt[0]),$!==s.length-1&&Zt===s[$+1].sectionIndex||t.programConfigurations.populatePaintArrays(D.length,M,M.index,{},E,K&&K[Zt])}t.placedSymbolArray.emplaceBack(i.x,i.y,V,this.glyphOffsetArray.length-V,G,u,m,i.segment,d?d[0]:0,d?d[1]:0,x[0],x[1],r,0,!1,0,b)},Lr.prototype._addCollisionDebugVertex=function(t,s,d,x,S,M){return s.emplaceBack(0,0),t.emplaceBack(d.x,d.y,x,S,Math.round(M.x),Math.round(M.y))},Lr.prototype.addCollisionDebugVertices=function(t,s,d,x,S,M,r){var i=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),u=i.vertexLength,m=S.layoutVertexArray,b=S.collisionVertexArray,E=r.anchorX,T=r.anchorY;this._addCollisionDebugVertex(m,b,M,E,T,new z(t,s)),this._addCollisionDebugVertex(m,b,M,E,T,new z(d,s)),this._addCollisionDebugVertex(m,b,M,E,T,new z(d,x)),this._addCollisionDebugVertex(m,b,M,E,T,new z(t,x)),i.vertexLength+=4;var D=S.indexArray;D.emplaceBack(u,u+1),D.emplaceBack(u+1,u+2),D.emplaceBack(u+2,u+3),D.emplaceBack(u+3,u),i.primitiveLength+=4},Lr.prototype.addDebugCollisionBoxes=function(t,s,d,x){for(var S=t;S<s;S++){var M=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,x?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,d)}},Lr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Eh(ut,Lf.members,Gi),this.iconCollisionBox=new Eh(ut,Lf.members,Gi);for(var t=0;t<this.symbolInstances.length;t++){var s=this.symbolInstances.get(t);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}},Lr.prototype._deserializeCollisionBoxesForSymbol=function(t,s,d,x,S,M,r,i,u){for(var m={},b=s;b<d;b++){var E=t.get(b);m.textBox={x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,anchorPointX:E.anchorPointX,anchorPointY:E.anchorPointY},m.textFeatureIndex=E.featureIndex;break}for(var T=x;T<S;T++){var D=t.get(T);m.verticalTextBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},m.verticalTextFeatureIndex=D.featureIndex;break}for(var U=M;U<r;U++){var V=t.get(U);m.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},m.iconFeatureIndex=V.featureIndex;break}for(var G=i;G<u;G++){var q=t.get(G);m.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},m.verticalIconFeatureIndex=q.featureIndex;break}return m},Lr.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var s=0;s<this.symbolInstances.length;s++){var d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}},Lr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Lr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Lr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Lr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Lr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Lr.prototype.addIndicesForPlacedSymbol=function(t,s){for(var d=t.placedSymbolArray.get(s),x=d.vertexStartIndex+4*d.numGlyphs,S=d.vertexStartIndex;S<x;S+=4)t.indexArray.emplaceBack(S,S+1,S+2),t.indexArray.emplaceBack(S+1,S+2,S+3)},Lr.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var s=Math.sin(t),d=Math.cos(t),x=[],S=[],M=[],r=0;r<this.symbolInstances.length;++r){M.push(r);var i=this.symbolInstances.get(r);x.push(0|Math.round(s*i.anchorX+d*i.anchorY)),S.push(i.featureIndex)}return M.sort(function(u,m){return x[u]-x[m]||S[m]-S[u]}),M},Lr.prototype.addToSortKeyRanges=function(t,s){var d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Lr.prototype.sortFeatures=function(t){var s=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var d=0,x=this.symbolInstanceIndexes;d<x.length;d+=1){var S=this.symbolInstances.get(x[d]);this.featureSortOrder.push(S.featureIndex),[S.rightJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.leftJustifiedTextSymbolIndex].forEach(function(M,r,i){M>=0&&i.indexOf(M)===r&&s.addIndicesForPlacedSymbol(s.text,M)}),S.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,S.verticalPlacedTextSymbolIndex),S.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.placedIconSymbolIndex),S.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ri("SymbolBucket",Lr,{omit:["layers","collisionBoxArray","features","compareText"]}),Lr.MAX_GLYPHS=65535,Lr.addDynamicAttributes=Wp;var Mg=new C({"symbol-placement":new gi(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new gi(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gi(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mi(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gi(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gi(Ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new gi(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new gi(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gi(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new mi(Ie.layout_symbol["icon-size"]),"icon-text-fit":new gi(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gi(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new mi(Ie.layout_symbol["icon-image"]),"icon-rotate":new mi(Ie.layout_symbol["icon-rotate"]),"icon-padding":new gi(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new gi(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new mi(Ie.layout_symbol["icon-offset"]),"icon-anchor":new mi(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gi(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gi(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gi(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new mi(Ie.layout_symbol["text-field"]),"text-font":new mi(Ie.layout_symbol["text-font"]),"text-size":new mi(Ie.layout_symbol["text-size"]),"text-max-width":new mi(Ie.layout_symbol["text-max-width"]),"text-line-height":new gi(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new mi(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new mi(Ie.layout_symbol["text-justify"]),"text-radial-offset":new mi(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gi(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new mi(Ie.layout_symbol["text-anchor"]),"text-max-angle":new gi(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new gi(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new mi(Ie.layout_symbol["text-rotate"]),"text-padding":new gi(Ie.layout_symbol["text-padding"]),"text-keep-upright":new gi(Ie.layout_symbol["text-keep-upright"]),"text-transform":new mi(Ie.layout_symbol["text-transform"]),"text-offset":new mi(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new gi(Ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new gi(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new gi(Ie.layout_symbol["text-optional"])}),Wl={paint:new C({"icon-opacity":new mi(Ie.paint_symbol["icon-opacity"]),"icon-color":new mi(Ie.paint_symbol["icon-color"]),"icon-halo-color":new mi(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new mi(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mi(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new gi(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new gi(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new mi(Ie.paint_symbol["text-opacity"]),"text-color":new mi(Ie.paint_symbol["text-color"],{runtimeType:Le,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new mi(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new mi(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new mi(Ie.paint_symbol["text-halo-blur"]),"text-translate":new gi(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new gi(Ie.paint_symbol["text-translate-anchor"])}),layout:Mg},Nc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Te,this.defaultValue=t};Nc.prototype.evaluate=function(t){if(t.formattedSection){var s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Nc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},Nc.prototype.outputDefined=function(){return!1},Nc.prototype.serialize=function(){return null},Ri("FormatSectionOverride",Nc,{omit:["defaultValue"]});var Zf=function(t){function s(d){t.call(this,d,Wl)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.recalculate=function(d,x){if(t.prototype.recalculate.call(this,d,x),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var S=this.layout.get("text-writing-mode");if(S){for(var M=[],r=0,i=S;r<i.length;r+=1){var u=i[r];M.indexOf(u)<0&&M.push(u)}this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},s.prototype.getValueAndResolveTokens=function(d,x,S,M){var r=this.layout.get(d).evaluate(x,{},S,M),i=this._unevaluatedLayout._values[d];return i.isDataDriven()||pl(i.value)||!r?r:function(u,m){return m.replace(/{([^{}]+)}/g,function(b,E){return E in u?String(u[E]):""})}(x.properties,r)},s.prototype.createBucket=function(d){return new Lr(d)},s.prototype.queryRadius=function(){return 0},s.prototype.queryIntersectsFeature=function(){return!1},s.prototype._setPaintOverrides=function(){for(var d=0,x=Wl.paint.overridableProperties;d<x.length;d+=1){var S=x[d];if(s.hasPaintOverride(this.layout,S)){var M,r=this.paint.get(S),i=new Nc(r),u=new Ts(i,r.property.specification);M=r.value.kind==="constant"||r.value.kind==="source"?new Ks("source",u):new As("composite",u,r.value.zoomStops,r.value._interpolationType),this.paint._values[S]=new oa(r.property,M,r.parameters)}}},s.prototype._handleOverridablePaintPropertyUpdate=function(d,x,S){return!(!this.layout||x.isDataDriven()||S.isDataDriven())&&s.hasPaintOverride(this.layout,d)},s.hasPaintOverride=function(d,x){var S=d.get("text-field"),M=Wl.paint.properties[x],r=!1,i=function(b){for(var E=0,T=b;E<T.length;E+=1)if(M.overrides&&M.overrides.hasOverride(T[E]))return void(r=!0)};if(S.value.kind==="constant"&&S.value.value instanceof fr)i(S.value.value.sections);else if(S.value.kind==="source"){var u=function(b){r||(b instanceof ea&&oo(b.value)===si?i(b.value.sections):b instanceof La?i(b.sections):b.eachChild(u))},m=S.value;m._styleExpression&&u(m._styleExpression.expression)}return r},s}(l),Pg={paint:new C({"background-color":new gi(Ie.paint_background["background-color"]),"background-pattern":new xo(Ie.paint_background["background-pattern"]),"background-opacity":new gi(Ie.paint_background["background-opacity"])})},Lg=function(t){function s(d){t.call(this,d,Pg)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s}(l),zg={paint:new C({"raster-opacity":new gi(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new gi(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gi(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gi(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new gi(Ie.paint_raster["raster-saturation"]),"raster-contrast":new gi(Ie.paint_raster["raster-contrast"]),"raster-resampling":new gi(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new gi(Ie.paint_raster["raster-fade-duration"])})},Zd=function(t){function s(d){t.call(this,d,zg)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s}(l),Xp=function(t){function s(d){t.call(this,d,{}),this.implementation=d}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},s.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},s.prototype.recalculate=function(){},s.prototype.updateTransitions=function(){},s.prototype.hasTransition=function(){},s.prototype.serialize=function(){},s.prototype.onAdd=function(d){this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},s.prototype.onRemove=function(d){this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},s}(l),Dg={circle:Pd,heatmap:Vh,hillshade:Sf,fill:Lp,"fill-extrusion":pg,line:_g,symbol:Zf,background:Lg,raster:Zd},Wd=O.HTMLImageElement,Xd=O.HTMLCanvasElement,Vc=O.HTMLVideoElement,Wf=O.ImageData,Ih=O.ImageBitmap,sc=function(t,s,d,x){this.context=t,this.format=d,this.texture=t.gl.createTexture(),this.update(s,x)};sc.prototype.update=function(t,s,d){var x=t.width,S=t.height,M=!(this.size&&this.size[0]===x&&this.size[1]===S||d),r=this.context,i=r.gl;if(this.useMipmap=Boolean(s&&s.useMipmap),i.bindTexture(i.TEXTURE_2D,this.texture),r.pixelStoreUnpackFlipY.set(!1),r.pixelStoreUnpack.set(1),r.pixelStoreUnpackPremultiplyAlpha.set(this.format===i.RGBA&&(!s||s.premultiply!==!1)),M)this.size=[x,S],t instanceof Wd||t instanceof Xd||t instanceof Vc||t instanceof Wf||Ih&&t instanceof Ih?i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,i.UNSIGNED_BYTE,t):i.texImage2D(i.TEXTURE_2D,0,this.format,x,S,0,this.format,i.UNSIGNED_BYTE,t.data);else{var u=d||{x:0,y:0},m=u.x,b=u.y;t instanceof Wd||t instanceof Xd||t instanceof Vc||t instanceof Wf||Ih&&t instanceof Ih?i.texSubImage2D(i.TEXTURE_2D,0,m,b,i.RGBA,i.UNSIGNED_BYTE,t):i.texSubImage2D(i.TEXTURE_2D,0,m,b,x,S,i.RGBA,i.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&i.generateMipmap(i.TEXTURE_2D)},sc.prototype.bind=function(t,s,d){var x=this.context.gl;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),t!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,t),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||t),this.filter=t),s!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,s),this.wrap=s)},sc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},sc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Sh=function(t){var s=this;this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){s._triggered=!1,s._callback()})};Sh.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Sh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var lc=function(t,s,d){this.target=t,this.parent=s,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},fe(["receive","process"],this),this.invoker=new Sh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Et()?t:O};function Xf(t,s,d){var x=2*Math.PI*6378137/256/Math.pow(2,d);return[t*x-2*Math.PI*6378137/2,s*x-2*Math.PI*6378137/2]}lc.prototype.send=function(t,s,d,x,S){var M=this;S===void 0&&(S=!1);var r=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[r]=d);var i=wt(this.globalScope)?void 0:[];return this.target.postMessage({id:r,type:t,hasCallback:!!d,targetMapId:x,mustQueue:S,sourceMapId:this.mapId,data:Oa(s,i)},i),{cancel:function(){d&&delete M.callbacks[r],M.target.postMessage({id:r,type:"<cancel>",targetMapId:x,sourceMapId:M.mapId})}}},lc.prototype.receive=function(t){var s=t.data,d=s.id;if(d&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[d];var x=this.cancelCallbacks[d];delete this.cancelCallbacks[d],x&&x()}else Et()||s.mustQueue?(this.tasks[d]=s,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,s)},lc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),s=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(t,s)}},lc.prototype.processTask=function(t,s){var d=this;if(s.type==="<response>"){var x=this.callbacks[t];delete this.callbacks[t],x&&(s.error?x(Hr(s.error)):x(null,Hr(s.data)))}else{var S=!1,M=wt(this.globalScope)?void 0:[],r=s.hasCallback?function(b,E){S=!0,delete d.cancelCallbacks[t],d.target.postMessage({id:t,type:"<response>",sourceMapId:d.mapId,error:b?Oa(b):null,data:Oa(E,M)},M)}:function(b){S=!0},i=null,u=Hr(s.data);if(this.parent[s.type])i=this.parent[s.type](s.sourceMapId,u,r);else if(this.parent.getWorkerSource){var m=s.type.split(".");i=this.parent.getWorkerSource(s.sourceMapId,m[0],u.source)[m[1]](u,r)}else r(new Error("Could not find function "+s.type));!S&&i&&i.cancel&&(this.cancelCallbacks[t]=i.cancel)}},lc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Bo=function(t,s){t&&(s?this.setSouthWest(t).setNorthEast(s):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Bo.prototype.setNorthEast=function(t){return this._ne=t instanceof eo?new eo(t.lng,t.lat):eo.convert(t),this},Bo.prototype.setSouthWest=function(t){return this._sw=t instanceof eo?new eo(t.lng,t.lat):eo.convert(t),this},Bo.prototype.extend=function(t){var s,d,x=this._sw,S=this._ne;if(t instanceof eo)s=t,d=t;else{if(!(t instanceof Bo))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Bo.convert(t)):this.extend(eo.convert(t)):this;if(d=t._ne,!(s=t._sw)||!d)return this}return x||S?(x.lng=Math.min(s.lng,x.lng),x.lat=Math.min(s.lat,x.lat),S.lng=Math.max(d.lng,S.lng),S.lat=Math.max(d.lat,S.lat)):(this._sw=new eo(s.lng,s.lat),this._ne=new eo(d.lng,d.lat)),this},Bo.prototype.getCenter=function(){return new eo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Bo.prototype.getSouthWest=function(){return this._sw},Bo.prototype.getNorthEast=function(){return this._ne},Bo.prototype.getNorthWest=function(){return new eo(this.getWest(),this.getNorth())},Bo.prototype.getSouthEast=function(){return new eo(this.getEast(),this.getSouth())},Bo.prototype.getWest=function(){return this._sw.lng},Bo.prototype.getSouth=function(){return this._sw.lat},Bo.prototype.getEast=function(){return this._ne.lng},Bo.prototype.getNorth=function(){return this._ne.lat},Bo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Bo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Bo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Bo.prototype.contains=function(t){var s=eo.convert(t),d=s.lng,x=s.lat,S=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&S},Bo.convert=function(t){return!t||t instanceof Bo?t:new Bo(t)};var eo=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid LngLat object: ("+t+", "+s+")");if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};eo.prototype.wrap=function(){return new eo(de(this.lng,-180,180),this.lat)},eo.prototype.toArray=function(){return[this.lng,this.lat]},eo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},eo.prototype.distanceTo=function(t){var s=Math.PI/180,d=this.lat*s,x=t.lat*s,S=Math.sin(d)*Math.sin(x)+Math.cos(d)*Math.cos(x)*Math.cos((t.lng-this.lng)*s);return 63710088e-1*Math.acos(Math.min(S,1))},eo.prototype.toBounds=function(t){t===void 0&&(t=0);var s=360*t/40075017,d=s/Math.cos(Math.PI/180*this.lat);return new Bo(new eo(this.lng-d,this.lat-s),new eo(this.lng+d,this.lat+s))},eo.convert=function(t){if(t instanceof eo)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new eo(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new eo(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Kf=2*Math.PI*63710088e-1;function Jf(t){return Kf*Math.cos(t*Math.PI/180)}function Kp(t){return(180+t)/360}function Eo(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function uc(t,s){return t/Jf(s)}function Kd(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var cc=function(t,s,d){d===void 0&&(d=0),this.x=+t,this.y=+s,this.z=+d};cc.fromLngLat=function(t,s){s===void 0&&(s=0);var d=eo.convert(t);return new cc(Kp(d.lng),Eo(d.lat),uc(s,d.lat))},cc.prototype.toLngLat=function(){return new eo(360*this.x-180,Kd(this.y))},cc.prototype.toAltitude=function(){return this.z*Jf(Kd(this.y))},cc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Kf*(t=Kd(this.y),1/Math.cos(t*Math.PI/180));var t};var hc=function(t,s,d){this.z=t,this.x=s,this.y=d,this.key=jc(0,t,t,s,d)};hc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},hc.prototype.url=function(t,s){var d,x,S,M,r,i=(x=this.y,S=this.z,M=Xf(256*(d=this.x),256*(x=Math.pow(2,S)-x-1),S),r=Xf(256*(d+1),256*(x+1),S),M[0]+","+M[1]+","+r[0]+","+r[1]),u=function(m,b,E){for(var T,D="",U=m;U>0;U--)D+=(b&(T=1<<U-1)?1:0)+(E&T?2:0);return D}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",i)},hc.prototype.getTilePoint=function(t){var s=Math.pow(2,this.z);return new z(8192*(t.x*s-this.x),8192*(t.y*s-this.y))},hc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Jp=function(t,s){this.wrap=t,this.canonical=s,this.key=jc(t,s.z,s.z,s.x,s.y)},ko=function(t,s,d,x,S){this.overscaledZ=t,this.wrap=s,this.canonical=new hc(d,+x,+S),this.key=jc(s,t,d,x,S)};function jc(t,s,d,x,S){(t*=2)<0&&(t=-1*t-1);var M=1<<d;return(M*M*t+M*S+x).toString(36)+d.toString(36)+s.toString(36)}ko.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ko.prototype.scaledTo=function(t){var s=this.canonical.z-t;return t>this.canonical.z?new ko(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ko(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)},ko.prototype.calculateScaledKey=function(t,s){var d=this.canonical.z-t;return t>this.canonical.z?jc(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y):jc(this.wrap*+s,t,t,this.canonical.x>>d,this.canonical.y>>d)},ko.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var s=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s},ko.prototype.children=function(t){if(this.overscaledZ>=t)return[new ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var s=this.canonical.z+1,d=2*this.canonical.x,x=2*this.canonical.y;return[new ko(s,this.wrap,s,d,x),new ko(s,this.wrap,s,d+1,x),new ko(s,this.wrap,s,d,x+1),new ko(s,this.wrap,s,d+1,x+1)]},ko.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ko.prototype.wrapped=function(){return new ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ko.prototype.unwrapTo=function(t){return new ko(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ko.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ko.prototype.toUnwrapped=function(){return new Jp(this.wrap,this.canonical)},ko.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ko.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new cc(t.x-this.wrap,t.y))},Ri("CanonicalTileID",hc),Ri("OverscaledTileID",ko,{omit:["posMatrix"]});var el=function(t,s,d){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return He('"'+d+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=s.height;var x=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=d||"mapbox";for(var S=0;S<x;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(x,S)]=this.data[this._idx(x-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,x)]=this.data[this._idx(S,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)]};el.prototype.get=function(t,s){var d=new Uint8Array(this.data.buffer),x=4*this._idx(t,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[x],d[x+1],d[x+2])},el.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},el.prototype._idx=function(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)},el.prototype._unpackMapbox=function(t,s,d){return(256*t*256+256*s+d)/10-1e4},el.prototype._unpackTerrarium=function(t,s,d){return 256*t+s+d/256-32768},el.prototype.getPixels=function(){return new wa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},el.prototype.backfillBorder=function(t,s,d){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var x=s*this.dim,S=s*this.dim+this.dim,M=d*this.dim,r=d*this.dim+this.dim;switch(s){case-1:x=S-1;break;case 1:S=x+1}switch(d){case-1:M=r-1;break;case 1:r=M+1}for(var i=-s*this.dim,u=-d*this.dim,m=M;m<r;m++)for(var b=x;b<S;b++)this.data[this._idx(b,m)]=t.data[this._idx(b+i,m+u)]},Ri("DEMData",el);var ad=function(t){this._stringToNumber={},this._numberToString=[];for(var s=0;s<t.length;s++){var d=t[s];this._stringToNumber[d]=s,this._numberToString[s]=d}};ad.prototype.encode=function(t){return this._stringToNumber[t]},ad.prototype.decode=function(t){return this._numberToString[t]};var Th=function(t,s,d,x,S){this.type="Feature",this._vectorTileFeature=t,t._z=s,t._x=d,t._y=x,this.properties=t.properties,this.id=S},Jd={geometry:{configurable:!0}};Jd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Jd.geometry.set=function(t){this._geometry=t},Th.prototype.toJSON=function(){var t={geometry:this.geometry};for(var s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(t[s]=this[s]);return t},Object.defineProperties(Th.prototype,Jd);var Fa=function(){this.state={},this.stateChanges={},this.deletedStates={}};Fa.prototype.updateState=function(t,s,d){var x=String(s);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][x]=this.stateChanges[t][x]||{},oe(this.stateChanges[t][x],d),this.deletedStates[t]===null)for(var S in this.deletedStates[t]={},this.state[t])S!==x&&(this.deletedStates[t][S]=null);else if(this.deletedStates[t]&&this.deletedStates[t][x]===null)for(var M in this.deletedStates[t][x]={},this.state[t][x])d[M]||(this.deletedStates[t][x][M]=null);else for(var r in d)this.deletedStates[t]&&this.deletedStates[t][x]&&this.deletedStates[t][x][r]===null&&delete this.deletedStates[t][x][r]},Fa.prototype.removeFeatureState=function(t,s,d){if(this.deletedStates[t]!==null){var x=String(s);if(this.deletedStates[t]=this.deletedStates[t]||{},d&&s!==void 0)this.deletedStates[t][x]!==null&&(this.deletedStates[t][x]=this.deletedStates[t][x]||{},this.deletedStates[t][x][d]=null);else if(s!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][x])for(d in this.deletedStates[t][x]={},this.stateChanges[t][x])this.deletedStates[t][x][d]=null;else this.deletedStates[t][x]=null;else this.deletedStates[t]=null}},Fa.prototype.getState=function(t,s){var d=String(s),x=oe({},(this.state[t]||{})[d],(this.stateChanges[t]||{})[d]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){var S=this.deletedStates[t][s];if(S===null)return{};for(var M in S)delete x[M]}return x},Fa.prototype.initializeTileState=function(t,s){t.setFeatureState(this.state,s)},Fa.prototype.coalesceChanges=function(t,s){var d={};for(var x in this.stateChanges){this.state[x]=this.state[x]||{};var S={};for(var M in this.stateChanges[x])this.state[x][M]||(this.state[x][M]={}),oe(this.state[x][M],this.stateChanges[x][M]),S[M]=this.state[x][M];d[x]=S}for(var r in this.deletedStates){this.state[r]=this.state[r]||{};var i={};if(this.deletedStates[r]===null)for(var u in this.state[r])i[u]={},this.state[r][u]={};else for(var m in this.deletedStates[r]){if(this.deletedStates[r][m]===null)this.state[r][m]={};else for(var b=0,E=Object.keys(this.deletedStates[r][m]);b<E.length;b+=1)delete this.state[r][m][E[b]];i[m]=this.state[r][m]}d[r]=d[r]||{},oe(d[r],i)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(var T in t)t[T].setFeatureState(d,s)};var Bs=function(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ps(8192,16,0),this.grid3D=new Ps(8192,16,0),this.featureIndexArray=new ae,this.promoteId=s};function Yp(t,s,d,x,S){return st(t,function(M,r){var i=s instanceof zs?s.get(r):null;return i&&i.evaluate?i.evaluate(d,x,S):i})}function Qp(t){for(var s=1/0,d=1/0,x=-1/0,S=-1/0,M=0,r=t;M<r.length;M+=1){var i=r[M];s=Math.min(s,i.x),d=Math.min(d,i.y),x=Math.max(x,i.x),S=Math.max(S,i.y)}return{minX:s,minY:d,maxX:x,maxY:S}}function Yf(t,s){return s-t}Bs.prototype.insert=function(t,s,d,x,S,M){var r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,x,S);for(var i=M?this.grid3D:this.grid,u=0;u<s.length;u++){for(var m=s[u],b=[1/0,1/0,-1/0,-1/0],E=0;E<m.length;E++){var T=m[E];b[0]=Math.min(b[0],T.x),b[1]=Math.min(b[1],T.y),b[2]=Math.max(b[2],T.x),b[3]=Math.max(b[3],T.y)}b[0]<8192&&b[1]<8192&&b[2]>=0&&b[3]>=0&&i.insert(r,b[0],b[1],b[2],b[3])}},Bs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mh.VectorTile(new Bd(this.rawTileData)).layers,this.sourceLayerCoder=new ad(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Bs.prototype.query=function(t,s,d,x){var S=this;this.loadVTLayers();for(var M=t.params||{},r=8192/t.tileSize/t.scale,i=yu(M.filter),u=t.queryGeometry,m=t.queryPadding*r,b=Qp(u),E=this.grid.query(b.minX-m,b.minY-m,b.maxX+m,b.maxY+m),T=Qp(t.cameraQueryGeometry),D=this.grid3D.query(T.minX-m,T.minY-m,T.maxX+m,T.maxY+m,function(ie,pe,ve,Be){return function(Qe,nt,rt,vt,ot){for(var Kt=0,Wt=Qe;Kt<Wt.length;Kt+=1){var Pt=Wt[Kt];if(nt<=Pt.x&&rt<=Pt.y&&vt>=Pt.x&&ot>=Pt.y)return!0}var Zt=[new z(nt,rt),new z(nt,ot),new z(vt,ot),new z(vt,rt)];if(Qe.length>2){for(var Nt=0,$t=Zt;Nt<$t.length;Nt+=1)if(Qs(Qe,$t[Nt]))return!0}for(var Bt=0;Bt<Qe.length-1;Bt++)if(Eu(Qe[Bt],Qe[Bt+1],Zt))return!0;return!1}(t.cameraQueryGeometry,ie-m,pe-m,ve+m,Be+m)}),U=0,V=D;U<V.length;U+=1)E.push(V[U]);E.sort(Yf);for(var G,q={},K=function(ie){var pe=E[ie];if(pe!==G){G=pe;var ve=S.featureIndexArray.get(pe),Be=null;S.loadMatchingFeature(q,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,i,M.layers,M.availableImages,s,d,x,function(Qe,nt,rt){return Be||(Be=io(Qe)),nt.queryIntersectsFeature(u,Qe,rt,Be,S.z,t.transform,r,t.pixelPosMatrix)})}},$=0;$<E.length;$++)K($);return q},Bs.prototype.loadMatchingFeature=function(t,s,d,x,S,M,r,i,u,m,b){var E=this.bucketLayerIDs[s];if(!M||function(Qe,nt){for(var rt=0;rt<Qe.length;rt++)if(nt.indexOf(Qe[rt])>=0)return!0;return!1}(M,E)){var T=this.sourceLayerCoder.decode(d),D=this.vtLayers[T].feature(x);if(S.needGeometry){var U=er(D,!0);if(!S.filter(new ci(this.tileID.overscaledZ),U,this.tileID.canonical))return}else if(!S.filter(new ci(this.tileID.overscaledZ),D))return;for(var V=this.getId(D,T),G=0;G<E.length;G++){var q=E[G];if(!(M&&M.indexOf(q)<0)){var K=i[q];if(K){var $={};V!==void 0&&m&&($=m.getState(K.sourceLayer||"_geojsonTileLayer",V));var ie=oe({},u[q]);ie.paint=Yp(ie.paint,K.paint,D,$,r),ie.layout=Yp(ie.layout,K.layout,D,$,r);var pe=!b||b(D,K,$);if(pe){var ve=new Th(D,this.z,this.x,this.y,V);ve.layer=ie;var Be=t[q];Be===void 0&&(Be=t[q]=[]),Be.push({featureIndex:x,feature:ve,intersectionZ:pe})}}}}}},Bs.prototype.lookupSymbolFeatures=function(t,s,d,x,S,M,r,i){var u={};this.loadVTLayers();for(var m=yu(S),b=0,E=t;b<E.length;b+=1)this.loadMatchingFeature(u,d,x,E[b],m,M,r,i,s);return u},Bs.prototype.hasLayer=function(t){for(var s=0,d=this.bucketLayerIDs;s<d.length;s+=1)for(var x=0,S=d[s];x<S.length;x+=1)if(t===S[x])return!0;return!1},Bs.prototype.getId=function(t,s){var d=t.id;return this.promoteId&&typeof(d=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]])=="boolean"&&(d=Number(d)),d},Ri("FeatureIndex",Bs,{omit:["rawTileData","sourceLayerCoder"]});var Zo=function(t,s){this.tileID=t,this.uid=qe(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Zo.prototype.registerFadeDuration=function(t){var s=t+this.timeAdded;s<dt.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)},Zo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Zo.prototype.loadVectorData=function(t,s,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var x in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(m,b){var E={};if(!b)return E;for(var T=function(){var V=U[D],G=V.layerIds.map(function($){return b.getLayer($)}).filter(Boolean);if(G.length!==0){V.layers=G,V.stateDependentLayerIds&&(V.stateDependentLayers=V.stateDependentLayerIds.map(function($){return G.filter(function(ie){return ie.id===$})[0]}));for(var q=0,K=G;q<K.length;q+=1)E[K[q].id]=V}},D=0,U=m;D<U.length;D+=1)T();return E}(t.buckets,s.style),this.hasSymbolBuckets=!1,this.buckets){var S=this.buckets[x];if(S instanceof Lr){if(this.hasSymbolBuckets=!0,!d)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var M in this.buckets){var r=this.buckets[M];if(r instanceof Lr&&r.hasRTLText){this.hasRTLText=!0,Bi.isLoading()||Bi.isLoaded()||qa()!=="deferred"||ya();break}}for(var i in this.queryPadding=0,this.buckets){var u=this.buckets[i];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(i).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new y},Zo.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Zo.prototype.getBucket=function(t){return this.buckets[t.id]},Zo.prototype.upload=function(t){for(var s in this.buckets){var d=this.buckets[s];d.uploadPending()&&d.upload(t)}var x=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sc(t,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sc(t,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)},Zo.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Zo.prototype.queryRenderedFeatures=function(t,s,d,x,S,M,r,i,u,m){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:S,scale:M,tileSize:this.tileSize,pixelPosMatrix:m,transform:i,params:r,queryPadding:this.queryPadding*u},t,s,d):{}},Zo.prototype.querySourceFeatures=function(t,s){var d=this.latestFeatureIndex;if(d&&d.rawTileData){var x=d.loadVTLayers(),S=s?s.sourceLayer:"",M=x._geojsonTileLayer||x[S];if(M)for(var r=yu(s&&s.filter),i=this.tileID.canonical,u=i.z,m=i.x,b=i.y,E={z:u,x:m,y:b},T=0;T<M.length;T++){var D=M.feature(T);if(r.needGeometry){var U=er(D,!0);if(!r.filter(new ci(this.tileID.overscaledZ),U,this.tileID.canonical))continue}else if(!r.filter(new ci(this.tileID.overscaledZ),D))continue;var V=d.getId(D,S),G=new Th(D,u,m,b,V);G.tile=E,t.push(G)}}},Zo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Zo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Zo.prototype.setExpiryData=function(t){var s=this.expirationTime;if(t.cacheControl){var d=Gt(t.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var x=Date.now(),S=!1;if(this.expirationTime>x)S=!1;else if(s)if(this.expirationTime<s)S=!0;else{var M=this.expirationTime-s;M?this.expirationTime=x+Math.max(M,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Zo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Zo.prototype.setFeatureState=function(t,s){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(t).length!==0){var d=this.latestFeatureIndex.loadVTLayers();for(var x in this.buckets)if(s.style.hasLayer(x)){var S=this.buckets[x],M=S.layers[0].sourceLayer||"_geojsonTileLayer",r=d[M],i=t[M];if(r&&i&&Object.keys(i).length!==0){S.update(i,r,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=s&&s.style&&s.style.getLayer(x);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(S)))}}}},Zo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Zo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<dt.now()},Zo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Zo.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=dt.now()+t},Zo.prototype.setDependencies=function(t,s){for(var d={},x=0,S=s;x<S.length;x+=1)d[S[x]]=!0;this.dependencies[t]=d},Zo.prototype.hasDependency=function(t,s){for(var d=0,x=t;d<x.length;d+=1){var S=this.dependencies[x[d]];if(S){for(var M=0,r=s;M<r.length;M+=1)if(S[r[M]])return!0}}return!1};var Lu=O.performance,$p=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Lu.mark(this._marks.start)};$p.prototype.finish=function(){Lu.mark(this._marks.end);var t=Lu.getEntriesByName(this._marks.measure);return t.length===0&&(Lu.measure(this._marks.measure,this._marks.start,this._marks.end),t=Lu.getEntriesByName(this._marks.measure),Lu.clearMarks(this._marks.start),Lu.clearMarks(this._marks.end),Lu.clearMeasures(this._marks.measure)),t},c.Actor=lc,c.AlphaImage=Lc,c.CanonicalTileID=hc,c.CollisionBoxArray=y,c.Color=dn,c.DEMData=el,c.DataConstantProperty=gi,c.DictionaryCoder=ad,c.EXTENT=8192,c.ErrorEvent=$e,c.EvaluationParameters=ci,c.Event=ze,c.Evented=it,c.FeatureIndex=Bs,c.FillBucket=El,c.FillExtrusionBucket=Il,c.ImageAtlas=Jh,c.ImagePosition=Fd,c.LineBucket=Ea,c.LngLat=eo,c.LngLatBounds=Bo,c.MercatorCoordinate=cc,c.ONE_EM=24,c.OverscaledTileID=ko,c.Point=z,c.Point$1=z,c.Properties=C,c.Protobuf=Bd,c.RGBAImage=wa,c.RequestManager=ln,c.RequestPerformance=$p,c.ResourceType=Un,c.SegmentVector=xe,c.SourceFeatureState=Fa,c.StructArrayLayout1ui2=Ci,c.StructArrayLayout2f1f2i16=bt,c.StructArrayLayout2i4=Z,c.StructArrayLayout3ui6=jt,c.StructArrayLayout4i8=J,c.SymbolBucket=Lr,c.Texture=sc,c.Tile=Zo,c.Transitionable=Co,c.Uniform1f=oi,c.Uniform1i=Ht,c.Uniform2f=ri,c.Uniform3f=Ti,c.Uniform4f=Zi,c.UniformColor=$i,c.UniformMatrix4f=Xn,c.UnwrappedTileID=Jp,c.ValidationError=Ve,c.WritingMode=fs,c.ZoomHistory=ps,c.add=function(t,s,d){return t[0]=s[0]+d[0],t[1]=s[1]+d[1],t[2]=s[2]+d[2],t},c.addDynamicAttributes=Wp,c.asyncAll=function(t,s,d){if(!t.length)return d(null,[]);var x=t.length,S=new Array(t.length),M=null;t.forEach(function(r,i){s(r,function(u,m){u&&(M=u),S[i]=m,--x==0&&d(M,S)})})},c.bezier=ee,c.bindAll=fe,c.browser=dt,c.cacheEntryPossiblyAdded=function(t){++kr>Wn&&(t.getActor().send("enforceCacheSizeLimit",Gn),kr=0)},c.clamp=te,c.clearTileCache=function(t){var s=O.caches.delete("mapbox-tiles");t&&s.catch(t).then(function(){return t()})},c.clipLine=Zp,c.clone=function(t){var s=new ur(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},c.clone$1=Ue,c.clone$2=function(t){var s=new ur(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},c.collisionCircleLayout=zf,c.config=It,c.create=function(){var t=new ur(16);return ur!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},c.create$1=function(){var t=new ur(9);return ur!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},c.create$2=function(){var t=new ur(4);return ur!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},c.createCommonjsModule=h,c.createExpression=fu,c.createLayout=B,c.createStyleLayer=function(t){return t.type==="custom"?new Xp(t):new Dg[t.type](t)},c.cross=function(t,s,d){var x=s[0],S=s[1],M=s[2],r=d[0],i=d[1],u=d[2];return t[0]=S*u-M*i,t[1]=M*r-x*u,t[2]=x*i-S*r,t},c.deepEqual=function t(s,d){if(Array.isArray(s)){if(!Array.isArray(d)||s.length!==d.length)return!1;for(var x=0;x<s.length;x++)if(!t(s[x],d[x]))return!1;return!0}if(typeof s=="object"&&s!==null&&d!==null){if(typeof d!="object"||Object.keys(s).length!==Object.keys(d).length)return!1;for(var S in s)if(!t(s[S],d[S]))return!1;return!0}return s===d},c.dot=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},c.dot$1=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},c.ease=ue,c.emitValidationErrors=Nl,c.endsWith=ct,c.enforceCacheSizeLimit=function(t){_o(),$n&&$n.then(function(s){s.keys().then(function(d){for(var x=0;x<d.length-t;x++)s.delete(d[x])})})},c.evaluateSizeForFeature=jp,c.evaluateSizeForZoom=qp,c.evaluateVariableOffset=nd,c.evented=Mc,c.extend=oe,c.featureFilter=yu,c.filterObject=Ge,c.fromRotation=function(t,s){var d=Math.sin(s),x=Math.cos(s);return t[0]=x,t[1]=d,t[2]=0,t[3]=-d,t[4]=x,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},c.getAnchorAlignment=Bc,c.getAnchorJustification=qd,c.getArrayBuffer=To,c.getImage=ce,c.getJSON=function(t,s){return ua(oe(t,{type:"json"}),s)},c.getRTLTextPluginStatus=qa,c.getReferrer=ro,c.getVideo=function(t,s){var d,x,S=O.document.createElement("video");S.muted=!0,S.onloadstart=function(){s(null,S)};for(var M=0;M<t.length;M++){var r=O.document.createElement("source");d=t[M],x=void 0,(x=O.document.createElement("a")).href=d,(x.protocol!==O.document.location.protocol||x.host!==O.document.location.host)&&(S.crossOrigin="Anonymous"),r.src=t[M],S.appendChild(r)}return{cancel:function(){}}},c.identity=xa,c.invert=function(t,s){var d=s[0],x=s[1],S=s[2],M=s[3],r=s[4],i=s[5],u=s[6],m=s[7],b=s[8],E=s[9],T=s[10],D=s[11],U=s[12],V=s[13],G=s[14],q=s[15],K=d*i-x*r,$=d*u-S*r,ie=d*m-M*r,pe=x*u-S*i,ve=x*m-M*i,Be=S*m-M*u,Qe=b*V-E*U,nt=b*G-T*U,rt=b*q-D*U,vt=E*G-T*V,ot=E*q-D*V,Kt=T*q-D*G,Wt=K*Kt-$*ot+ie*vt+pe*rt-ve*nt+Be*Qe;return Wt?(t[0]=(i*Kt-u*ot+m*vt)*(Wt=1/Wt),t[1]=(S*ot-x*Kt-M*vt)*Wt,t[2]=(V*Be-G*ve+q*pe)*Wt,t[3]=(T*ve-E*Be-D*pe)*Wt,t[4]=(u*rt-r*Kt-m*nt)*Wt,t[5]=(d*Kt-S*rt+M*nt)*Wt,t[6]=(G*ie-U*Be-q*$)*Wt,t[7]=(b*Be-T*ie+D*$)*Wt,t[8]=(r*ot-i*rt+m*Qe)*Wt,t[9]=(x*rt-d*ot-M*Qe)*Wt,t[10]=(U*ve-V*ie+q*K)*Wt,t[11]=(E*ie-b*ve-D*K)*Wt,t[12]=(i*nt-r*vt-u*Qe)*Wt,t[13]=(d*vt-x*nt+S*Qe)*Wt,t[14]=(V*$-U*pe-G*K)*Wt,t[15]=(b*pe-E*$+T*K)*Wt,t):null},c.isChar=fi,c.isMapboxURL=Cn,c.keysDifference=function(t,s){var d=[];for(var x in t)x in s||d.push(x);return d},c.makeRequest=ua,c.mapObject=st,c.mercatorXfromLng=Kp,c.mercatorYfromLat=Eo,c.mercatorZfromAltitude=uc,c.mul=tc,c.multiply=Ba,c.mvt=mh,c.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},c.normalize=function(t,s){var d=s[0],x=s[1],S=s[2],M=d*d+x*x+S*S;return M>0&&(M=1/Math.sqrt(M)),t[0]=s[0]*M,t[1]=s[1]*M,t[2]=s[2]*M,t},c.number=so,c.offscreenCanvasSupported=vi,c.ortho=function(t,s,d,x,S,M,r){var i=1/(s-d),u=1/(x-S),m=1/(M-r);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(s+d)*i,t[13]=(S+x)*u,t[14]=(r+M)*m,t[15]=1,t},c.parseGlyphPBF=function(t){return new Bd(t).readFields(bg,[])},c.pbf=Bd,c.performSymbolLayout=function(t,s,d,x,S,M,r){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var i=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,m={};if(t.textSizeData.kind==="composite"){var b=t.textSizeData,E=b.maxZoom;m.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ci(b.minZoom),r),u["text-size"].possiblyEvaluate(new ci(E),r)]}if(t.iconSizeData.kind==="composite"){var T=t.iconSizeData,D=T.maxZoom;m.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ci(T.minZoom),r),u["icon-size"].possiblyEvaluate(new ci(D),r)]}m.layoutTextSize=u["text-size"].possiblyEvaluate(new ci(t.zoom+1),r),m.layoutIconSize=u["icon-size"].possiblyEvaluate(new ci(t.zoom+1),r),m.textMaxSize=u["text-size"].possiblyEvaluate(new ci(18));for(var U=24*i.get("text-line-height"),V=i.get("text-rotation-alignment")==="map"&&i.get("symbol-placement")!=="point",G=i.get("text-keep-upright"),q=i.get("text-size"),K=function(){var pe=ie[$],ve=i.get("text-font").evaluate(pe,{},r).join(","),Be=q.evaluate(pe,{},r),Qe=m.layoutTextSize.evaluate(pe,{},r),nt=m.layoutIconSize.evaluate(pe,{},r),rt={horizontal:{},vertical:void 0},vt=pe.text,ot=[0,0];if(vt){var Kt=vt.toString(),Wt=24*i.get("text-letter-spacing").evaluate(pe,{},r),Pt=function(vn){for(var Mn=0,On=vn;Mn<On.length;Mn+=1)if(Tn=On[Mn].charCodeAt(0),fi.Arabic(Tn)||fi["Arabic Supplement"](Tn)||fi["Arabic Extended-A"](Tn)||fi["Arabic Presentation Forms-A"](Tn)||fi["Arabic Presentation Forms-B"](Tn))return!1;var Tn;return!0}(Kt)?Wt:0,Zt=i.get("text-anchor").evaluate(pe,{},r),Nt=i.get("text-variable-anchor");if(!Nt){var $t=i.get("text-radial-offset").evaluate(pe,{},r);ot=$t?nd(Zt,[24*$t,jd]):i.get("text-offset").evaluate(pe,{},r).map(function(vn){return 24*vn})}var Bt=V?"center":i.get("text-justify").evaluate(pe,{},r),Vt=i.get("symbol-placement"),ki=Vt==="point"?24*i.get("text-max-width").evaluate(pe,{},r):0,Ai=function(){t.allowVerticalPlacement&&vu(Kt)&&(rt.vertical=Yh(vt,s,d,S,ve,ki,U,Zt,"left",Pt,ot,fs.vertical,!0,Vt,Qe,Be))};if(!V&&Nt){for(var on=Bt==="auto"?Nt.map(function(vn){return qd(vn)}):[Bt],un=!1,Rn=0;Rn<on.length;Rn++){var Kn=on[Rn];if(!rt.horizontal[Kn])if(un)rt.horizontal[Kn]=rt.horizontal[0];else{var mr=Yh(vt,s,d,S,ve,ki,U,"center",Kn,Pt,ot,fs.horizontal,!1,Vt,Qe,Be);mr&&(rt.horizontal[Kn]=mr,un=mr.positionedLines.length===1)}}Ai()}else{Bt==="auto"&&(Bt=qd(Zt));var gr=Yh(vt,s,d,S,ve,ki,U,Zt,Bt,Pt,ot,fs.horizontal,!1,Vt,Qe,Be);gr&&(rt.horizontal[Bt]=gr),Ai(),vu(Kt)&&V&&G&&(rt.vertical=Yh(vt,s,d,S,ve,ki,U,Zt,Bt,Pt,ot,fs.vertical,!1,Vt,Qe,Be))}}var or=void 0,Er=!1;if(pe.icon&&pe.icon.name){var ar=x[pe.icon.name];ar&&(or=function(vn,Mn,On){var Tn=Bc(On),qr=Mn[0]-vn.displaySize[0]*Tn.horizontalAlign,Fr=Mn[1]-vn.displaySize[1]*Tn.verticalAlign;return{image:vn,top:Fr,bottom:Fr+vn.displaySize[1],left:qr,right:qr+vn.displaySize[0]}}(S[pe.icon.name],i.get("icon-offset").evaluate(pe,{},r),i.get("icon-anchor").evaluate(pe,{},r)),Er=ar.sdf,t.sdfIcons===void 0?t.sdfIcons=ar.sdf:t.sdfIcons!==ar.sdf&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ar.pixelRatio!==t.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(t.iconsNeedLinear=!0))}var Ir=od(rt.horizontal)||rt.vertical;t.iconsInText=!!Ir&&Ir.iconsInText,(Ir||or)&&function(vn,Mn,On,Tn,qr,Fr,nr,Hn,br,ji,Fo){var Wr=Fr.textMaxSize.evaluate(Mn,{});Wr===void 0&&(Wr=nr);var go,zr=vn.layers[0].layout,sa=zr.get("icon-offset").evaluate(Mn,{},Fo),Wo=od(On.horizontal),ms=nr/24,Ia=vn.tilePixelRatio*ms,Sa=vn.tilePixelRatio*Wr/24,Uo=vn.tilePixelRatio*Hn,gs=vn.tilePixelRatio*zr.get("symbol-spacing"),dc=zr.get("text-padding")*vn.tilePixelRatio,qc=zr.get("icon-padding")*vn.tilePixelRatio,Gc=zr.get("text-max-angle")/180*Math.PI,Ah=zr.get("text-rotation-alignment")==="map"&&zr.get("symbol-placement")!=="point",tl=zr.get("icon-rotation-alignment")==="map"&&zr.get("symbol-placement")!=="point",Xl=zr.get("symbol-placement"),Hc=gs/2,pc=zr.get("icon-text-fit");Tn&&pc!=="none"&&(vn.allowVerticalPlacement&&On.vertical&&(go=Qh(Tn,On.vertical,pc,zr.get("icon-text-fit-padding"),sa,ms)),Wo&&(Tn=Qh(Tn,Wo,pc,zr.get("icon-text-fit-padding"),sa,ms)));var zu=function(Db,ef){ef.x<0||ef.x>=8192||ef.y<0||ef.y>=8192||function(No,Ru,Rb,Mh,Fg,b_,Qf,fc,$f,tf,em,tm,Ug,x_,nf,w_,E_,I_,S_,T_,nl,im,A_,mc,Ob){var C_,hd,ep,tp,ip,np=No.addToLineVertexArray(Ru,Rb),k_=0,M_=0,P_=0,L_=0,Ng=-1,Vg=-1,Xc={},z_=Ce(""),jg=0,qg=0;if(fc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(jg=(C_=fc.layout.get("text-offset").evaluate(nl,{},mc).map(function(of){return 24*of}))[0],qg=C_[1]):(jg=24*fc.layout.get("text-radial-offset").evaluate(nl,{},mc),qg=jd),No.allowVerticalPlacement&&Mh.vertical){var D_=fc.layout.get("text-rotate").evaluate(nl,{},mc)+90;tp=new id($f,Ru,tf,em,tm,Mh.vertical,Ug,x_,nf,D_),Qf&&(ip=new id($f,Ru,tf,em,tm,Qf,E_,I_,nf,D_))}if(Fg){var Gg=fc.layout.get("icon-rotate").evaluate(nl,{}),R_=fc.layout.get("icon-text-fit")!=="none",O_=Zl(Fg,Gg,A_,R_),Hg=Qf?Zl(Qf,Gg,A_,R_):void 0;ep=new id($f,Ru,tf,em,tm,Fg,E_,I_,!1,Gg),k_=4*O_.length;var B_=No.iconSizeData,rf=null;B_.kind==="source"?(rf=[128*fc.layout.get("icon-size").evaluate(nl,{})])[0]>32640&&He(No.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):B_.kind==="composite"&&((rf=[128*im.compositeIconSizes[0].evaluate(nl,{},mc),128*im.compositeIconSizes[1].evaluate(nl,{},mc)])[0]>32640||rf[1]>32640)&&He(No.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),No.addSymbols(No.icon,O_,rf,T_,S_,nl,!1,Ru,np.lineStartIndex,np.lineLength,-1,mc),Ng=No.icon.placedSymbolArray.length-1,Hg&&(M_=4*Hg.length,No.addSymbols(No.icon,Hg,rf,T_,S_,nl,fs.vertical,Ru,np.lineStartIndex,np.lineLength,-1,mc),Vg=No.icon.placedSymbolArray.length-1)}for(var F_ in Mh.horizontal){var nm=Mh.horizontal[F_];if(!hd){z_=Ce(nm.text);var Bb=fc.layout.get("text-rotate").evaluate(nl,{},mc);hd=new id($f,Ru,tf,em,tm,nm,Ug,x_,nf,Bb)}var U_=nm.positionedLines.length===1;if(P_+=rd(No,Ru,nm,b_,fc,nf,nl,w_,np,Mh.vertical?fs.horizontal:fs.horizontalOnly,U_?Object.keys(Mh.horizontal):[F_],Xc,Ng,im,mc),U_)break}Mh.vertical&&(L_+=rd(No,Ru,Mh.vertical,b_,fc,nf,nl,w_,np,fs.vertical,["vertical"],Xc,Vg,im,mc));var Fb=hd?hd.boxStartIndex:No.collisionBoxArray.length,Ub=hd?hd.boxEndIndex:No.collisionBoxArray.length,Nb=tp?tp.boxStartIndex:No.collisionBoxArray.length,Vb=tp?tp.boxEndIndex:No.collisionBoxArray.length,jb=ep?ep.boxStartIndex:No.collisionBoxArray.length,qb=ep?ep.boxEndIndex:No.collisionBoxArray.length,Gb=ip?ip.boxStartIndex:No.collisionBoxArray.length,Hb=ip?ip.boxEndIndex:No.collisionBoxArray.length,gc=-1,rm=function(of,V_){return of&&of.circleDiameter?Math.max(of.circleDiameter,V_):V_};gc=rm(hd,gc),gc=rm(tp,gc),gc=rm(ep,gc);var N_=(gc=rm(ip,gc))>-1?1:0;N_&&(gc*=Ob/24),No.glyphOffsetArray.length>=Lr.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),nl.sortKey!==void 0&&No.addToSortKeyRanges(No.symbolInstances.length,nl.sortKey),No.symbolInstances.emplaceBack(Ru.x,Ru.y,Xc.right>=0?Xc.right:-1,Xc.center>=0?Xc.center:-1,Xc.left>=0?Xc.left:-1,Xc.vertical||-1,Ng,Vg,z_,Fb,Ub,Nb,Vb,jb,qb,Gb,Hb,tf,P_,L_,k_,M_,N_,0,Ug,jg,qg,gc)}(vn,ef,Db,On,Tn,qr,go,vn.layers[0],vn.collisionBoxArray,Mn.index,Mn.sourceLayerIndex,vn.index,Ia,dc,Ah,br,Uo,qc,tl,sa,Mn,Fr,ji,Fo,nr)};if(Xl==="line")for(var Ch=0,Yd=Zp(Mn.geometry,0,0,8192,8192);Ch<Yd.length;Ch+=1)for(var Qd=Yd[Ch],sd=0,ld=Sg(Qd,gs,Gc,On.vertical||Wo,Tn,24,Sa,vn.overscaling,8192);sd<ld.length;sd+=1){var $d=ld[sd];Wo&&Gd(vn,Wo.text,Hc,$d)||zu(Qd,$d)}else if(Xl==="line-center")for(var ud=0,cd=Mn.geometry;ud<cd.length;ud+=1){var $a=cd[ud];if($a.length>1){var Zc=Ig($a,Gc,On.vertical||Wo,Tn,24,Sa);Zc&&zu($a,Zc)}}else if(Mn.type==="Polygon")for(var Wc=0,Ta=Rd(Mn.geometry,0);Wc<Ta.length;Wc+=1){var es=Ta[Wc],Du=Ag(es,16);zu(es[0],new Mu(Du.x,Du.y,0))}else if(Mn.type==="LineString")for(var Sl=0,kh=Mn.geometry;Sl<kh.length;Sl+=1){var il=kh[Sl];zu(il,new Mu(il[0].x,il[0].y,0))}else if(Mn.type==="Point")for(var Rg=0,__=Mn.geometry;Rg<__.length;Rg+=1)for(var Og=0,v_=__[Rg];Og<v_.length;Og+=1){var Bg=v_[Og];zu([Bg],new Mu(Bg.x,Bg.y,0))}}(t,pe,rt,or,x,m,Qe,nt,ot,Er,r)},$=0,ie=t.features;$<ie.length;$+=1)K();M&&t.generateCollisionDebugBuffers()},c.perspective=function(t,s,d,x,S){var M,r=1/Math.tan(s/2);return t[0]=r/d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,S!=null&&S!==1/0?(t[10]=(S+x)*(M=1/(x-S)),t[14]=2*S*x*M):(t[10]=-1,t[14]=-2*x),t},c.pick=function(t,s){for(var d={},x=0;x<s.length;x++){var S=s[x];S in t&&(d[S]=t[S])}return d},c.plugin=Bi,c.polygonIntersectsPolygon=Ga,c.postMapLoadEvent=Ji,c.postTurnstileEvent=Ze,c.potpack=qf,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=Ri,c.registerForPluginStateChange=function(t){return t({pluginStatus:Yo,pluginURL:Ya}),Mc.on("pluginStateChange",t),t},c.renderColorRamp=Dd,c.rotate=function(t,s,d){var x=s[0],S=s[1],M=s[2],r=s[3],i=Math.sin(d),u=Math.cos(d);return t[0]=x*u+M*i,t[1]=S*u+r*i,t[2]=x*-i+M*u,t[3]=S*-i+r*u,t},c.rotateX=function(t,s,d){var x=Math.sin(d),S=Math.cos(d),M=s[4],r=s[5],i=s[6],u=s[7],m=s[8],b=s[9],E=s[10],T=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=M*S+m*x,t[5]=r*S+b*x,t[6]=i*S+E*x,t[7]=u*S+T*x,t[8]=m*S-M*x,t[9]=b*S-r*x,t[10]=E*S-i*x,t[11]=T*S-u*x,t},c.rotateZ=function(t,s,d){var x=Math.sin(d),S=Math.cos(d),M=s[0],r=s[1],i=s[2],u=s[3],m=s[4],b=s[5],E=s[6],T=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=M*S+m*x,t[1]=r*S+b*x,t[2]=i*S+E*x,t[3]=u*S+T*x,t[4]=m*S-M*x,t[5]=b*S-r*x,t[6]=E*S-i*x,t[7]=T*S-u*x,t},c.scale=function(t,s,d){var x=d[0],S=d[1],M=d[2];return t[0]=s[0]*x,t[1]=s[1]*x,t[2]=s[2]*x,t[3]=s[3]*x,t[4]=s[4]*S,t[5]=s[5]*S,t[6]=s[6]*S,t[7]=s[7]*S,t[8]=s[8]*M,t[9]=s[9]*M,t[10]=s[10]*M,t[11]=s[11]*M,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},c.scale$1=function(t,s,d){return t[0]=s[0]*d,t[1]=s[1]*d,t[2]=s[2]*d,t[3]=s[3]*d,t},c.scale$2=function(t,s,d){return t[0]=s[0]*d,t[1]=s[1]*d,t[2]=s[2]*d,t},c.setCacheLimits=function(t,s){Gn=t,Wn=s},c.setRTLTextPlugin=function(t,s,d){if(d===void 0&&(d=!1),Yo==="deferred"||Yo==="loading"||Yo==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ya=dt.resolveURL(t),Yo="deferred",vl=s,ql(),d||ya()},c.sphericalToCartesian=function(t){var s=t[0],d=t[1],x=t[2];return d+=90,d*=Math.PI/180,x*=Math.PI/180,{x:s*Math.cos(d)*Math.sin(x),y:s*Math.sin(d)*Math.sin(x),z:s*Math.cos(x)}},c.sqrLen=function(t){var s=t[0],d=t[1];return s*s+d*d},c.styleSpec=Ie,c.sub=function(t,s,d){return t[0]=s[0]-d[0],t[1]=s[1]-d[1],t[2]=s[2]-d[2],t},c.symbolSize=Eg,c.transformMat3=function(t,s,d){var x=s[0],S=s[1],M=s[2];return t[0]=x*d[0]+S*d[3]+M*d[6],t[1]=x*d[1]+S*d[4]+M*d[7],t[2]=x*d[2]+S*d[5]+M*d[8],t},c.transformMat4=ic,c.translate=function(t,s,d){var x,S,M,r,i,u,m,b,E,T,D,U,V=d[0],G=d[1],q=d[2];return s===t?(t[12]=s[0]*V+s[4]*G+s[8]*q+s[12],t[13]=s[1]*V+s[5]*G+s[9]*q+s[13],t[14]=s[2]*V+s[6]*G+s[10]*q+s[14],t[15]=s[3]*V+s[7]*G+s[11]*q+s[15]):(S=s[1],M=s[2],r=s[3],i=s[4],u=s[5],m=s[6],b=s[7],E=s[8],T=s[9],D=s[10],U=s[11],t[0]=x=s[0],t[1]=S,t[2]=M,t[3]=r,t[4]=i,t[5]=u,t[6]=m,t[7]=b,t[8]=E,t[9]=T,t[10]=D,t[11]=U,t[12]=x*V+i*G+E*q+s[12],t[13]=S*V+u*G+T*q+s[13],t[14]=M*V+m*G+D*q+s[14],t[15]=r*V+b*G+U*q+s[15]),t},c.triggerPluginCompletionEvent=kc,c.uniqueId=qe,c.validateCustomStyleLayer=function(t){var s=[],d=t.id;return d===void 0&&s.push({message:"layers."+d+': missing required property "id"'}),t.render===void 0&&s.push({message:"layers."+d+': missing required method "render"'}),t.renderingMode&&t.renderingMode!=="2d"&&t.renderingMode!=="3d"&&s.push({message:"layers."+d+': property "renderingMode" must be either "2d" or "3d"'}),s},c.validateLight=_u,c.validateStyle=Ja,c.values=function(t){var s=[];for(var d in t)s.push(t[d]);return s},c.vectorTile=mh,c.version="1.13.2",c.warnOnce=He,c.webpSupported=St,c.window=O,c.wrap=de}),_(["./shared"],function(c){function h(re){var ce=typeof re;if(ce==="number"||ce==="boolean"||ce==="string"||re==null)return JSON.stringify(re);if(Array.isArray(re)){for(var me="[",Se=0,ze=re;Se<ze.length;Se+=1)me+=h(ze[Se])+",";return me+"]"}for(var $e=Object.keys(re).sort(),it="{",Ie=0;Ie<$e.length;Ie++)it+=JSON.stringify($e[Ie])+":"+h(re[$e[Ie]])+",";return it+"}"}function I(re){for(var ce="",me=0,Se=c.refProperties;me<Se.length;me+=1)ce+="/"+h(re[Se[me]]);return ce}var L=function(re){this.keyCache={},re&&this.replace(re)};L.prototype.replace=function(re){this._layerConfigs={},this._layers={},this.update(re,[])},L.prototype.update=function(re,ce){for(var me=this,Se=0,ze=re;Se<ze.length;Se+=1){var $e=ze[Se];this._layerConfigs[$e.id]=$e;var it=this._layers[$e.id]=c.createStyleLayer($e);it._featureFilter=c.featureFilter(it.filter),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(var Ie=0,Ve=ce;Ie<Ve.length;Ie+=1){var mt=Ve[Ie];delete this.keyCache[mt],delete this._layerConfigs[mt],delete this._layers[mt]}this.familiesBySource={};for(var he=0,W=function(Me,Le){for(var yt={},lt=0;lt<Me.length;lt++){var _t=Le&&Le[Me[lt].id]||I(Me[lt]);Le&&(Le[Me[lt].id]=_t);var si=yt[_t];si||(si=yt[_t]=[]),si.push(Me[lt])}var Re=[];for(var Yt in yt)Re.push(yt[Yt]);return Re}(c.values(this._layerConfigs),this.keyCache);he<W.length;he+=1){var X=W[he].map(function(Me){return me._layers[Me.id]}),le=X[0];if(le.visibility!=="none"){var ge=le.source||"",Te=this.familiesBySource[ge];Te||(Te=this.familiesBySource[ge]={});var we=le.sourceLayer||"_geojsonTileLayer",Pe=Te[we];Pe||(Pe=Te[we]=[]),Pe.push(X)}}};var z=function(re){var ce={},me=[];for(var Se in re){var ze=re[Se],$e=ce[Se]={};for(var it in ze){var Ie=ze[+it];if(Ie&&Ie.bitmap.width!==0&&Ie.bitmap.height!==0){var Ve={x:0,y:0,w:Ie.bitmap.width+2,h:Ie.bitmap.height+2};me.push(Ve),$e[it]={rect:Ve,metrics:Ie.metrics}}}}var mt=c.potpack(me),he=new c.AlphaImage({width:mt.w||1,height:mt.h||1});for(var W in re){var X=re[W];for(var le in X){var ge=X[+le];if(ge&&ge.bitmap.width!==0&&ge.bitmap.height!==0){var Te=ce[W][le].rect;c.AlphaImage.copy(ge.bitmap,he,{x:0,y:0},{x:Te.x+1,y:Te.y+1},ge.bitmap)}}}this.image=he,this.positions=ce};c.register("GlyphAtlas",z);var R=function(re){this.tileID=new c.OverscaledTileID(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId};function O(re,ce,me){for(var Se=new c.EvaluationParameters(ce),ze=0,$e=re;ze<$e.length;ze+=1)$e[ze].recalculate(Se,me)}function Y(re,ce){var me=c.getArrayBuffer(re.request,function(Se,ze,$e,it){Se?ce(Se):ze&&ce(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(ze)),rawData:ze,cacheControl:$e,expires:it})});return function(){me.cancel(),ce()}}R.prototype.parse=function(re,ce,me,Se,ze){var $e=this;this.status="parsing",this.data=re,this.collisionBoxArray=new c.CollisionBoxArray;var it=new c.DictionaryCoder(Object.keys(re.layers).sort()),Ie=new c.FeatureIndex(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];var Ve,mt,he,W,X={},le={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},ge=ce.familiesBySource[this.source];for(var Te in ge){var we=re.layers[Te];if(we){we.version===1&&c.warnOnce('Vector tile source "'+this.source+'" layer "'+Te+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pe=it.encode(Te),Me=[],Le=0;Le<we.length;Le++){var yt=we.feature(Le),lt=Ie.getId(yt,Te);Me.push({feature:yt,id:lt,index:Le,sourceLayerIndex:Pe})}for(var _t=0,si=ge[Te];_t<si.length;_t+=1){var Re=si[_t],Yt=Re[0];Yt.minzoom&&this.zoom<Math.floor(Yt.minzoom)||Yt.maxzoom&&this.zoom>=Yt.maxzoom||Yt.visibility!=="none"&&(O(Re,this.zoom,me),(X[Yt.id]=Yt.createBucket({index:Ie.bucketLayerIDs.length,layers:Re,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pe,sourceID:this.source})).populate(Me,le,this.tileID.canonical),Ie.bucketLayerIDs.push(Re.map(function(Vi){return Vi.id})))}}}var di=c.mapObject(le.glyphDependencies,function(Vi){return Object.keys(Vi).map(Number)});Object.keys(di).length?Se.send("getGlyphs",{uid:this.uid,stacks:di},function(Vi,Ii){Ve||(Ve=Vi,mt=Ii,nn.call($e))}):mt={};var kn=Object.keys(le.iconDependencies);kn.length?Se.send("getImages",{icons:kn,source:this.source,tileID:this.tileID,type:"icons"},function(Vi,Ii){Ve||(Ve=Vi,he=Ii,nn.call($e))}):he={};var Xi=Object.keys(le.patternDependencies);function nn(){if(Ve)return ze(Ve);if(mt&&he&&W){var Vi=new z(mt),Ii=new c.ImageAtlas(he,W);for(var dn in X){var hr=X[dn];hr instanceof c.SymbolBucket?(O(hr.layers,this.zoom,me),c.performSymbolLayout(hr,mt,Vi.positions,he,Ii.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):hr.hasPattern&&(hr instanceof c.LineBucket||hr instanceof c.FillBucket||hr instanceof c.FillExtrusionBucket)&&(O(hr.layers,this.zoom,me),hr.addFeatures(le,this.tileID.canonical,Ii.patternPositions))}this.status="done",ze(null,{buckets:c.values(X).filter(function(po){return!po.isEmpty()}),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vi.image,imageAtlas:Ii,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?he:null,glyphPositions:this.returnDependencies?Vi.positions:null})}}Xi.length?Se.send("getImages",{icons:Xi,source:this.source,tileID:this.tileID,type:"patterns"},function(Vi,Ii){Ve||(Ve=Vi,W=Ii,nn.call($e))}):W={},nn.call(this)};var ee=function(re,ce,me,Se){this.actor=re,this.layerIndex=ce,this.availableImages=me,this.loadVectorData=Se||Y,this.loading={},this.loaded={}};ee.prototype.loadTile=function(re,ce){var me=this,Se=re.uid;this.loading||(this.loading={});var ze=!!(re&&re.request&&re.request.collectResourceTiming)&&new c.RequestPerformance(re.request),$e=this.loading[Se]=new R(re);$e.abort=this.loadVectorData(re,function(it,Ie){if(delete me.loading[Se],it||!Ie)return $e.status="done",me.loaded[Se]=$e,ce(it);var Ve=Ie.rawData,mt={};Ie.expires&&(mt.expires=Ie.expires),Ie.cacheControl&&(mt.cacheControl=Ie.cacheControl);var he={};if(ze){var W=ze.finish();W&&(he.resourceTiming=JSON.parse(JSON.stringify(W)))}$e.vectorTile=Ie.vectorTile,$e.parse(Ie.vectorTile,me.layerIndex,me.availableImages,me.actor,function(X,le){if(X||!le)return ce(X);ce(null,c.extend({rawTileData:Ve.slice(0)},le,mt,he))}),me.loaded=me.loaded||{},me.loaded[Se]=$e})},ee.prototype.reloadTile=function(re,ce){var me=this,Se=this.loaded,ze=re.uid,$e=this;if(Se&&Se[ze]){var it=Se[ze];it.showCollisionBoxes=re.showCollisionBoxes;var Ie=function(Ve,mt){var he=it.reloadCallback;he&&(delete it.reloadCallback,it.parse(it.vectorTile,$e.layerIndex,me.availableImages,$e.actor,he)),ce(Ve,mt)};it.status==="parsing"?it.reloadCallback=Ie:it.status==="done"&&(it.vectorTile?it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,Ie):Ie())}},ee.prototype.abortTile=function(re,ce){var me=this.loading,Se=re.uid;me&&me[Se]&&me[Se].abort&&(me[Se].abort(),delete me[Se]),ce()},ee.prototype.removeTile=function(re,ce){var me=this.loaded,Se=re.uid;me&&me[Se]&&delete me[Se],ce()};var ue=c.window.ImageBitmap,te=function(){this.loaded={}};function de(re,ce){if(re.length!==0){oe(re[0],ce);for(var me=1;me<re.length;me++)oe(re[me],!ce)}}function oe(re,ce){for(var me=0,Se=0,ze=re.length,$e=ze-1;Se<ze;$e=Se++)me+=(re[Se][0]-re[$e][0])*(re[$e][1]+re[Se][1]);me>=0!=!!ce&&re.reverse()}te.prototype.loadTile=function(re,ce){var me=re.uid,Se=re.encoding,ze=re.rawImageData,$e=ue&&ze instanceof ue?this.getImageData(ze):ze,it=new c.DEMData(me,$e,Se);this.loaded=this.loaded||{},this.loaded[me]=it,ce(null,it)},te.prototype.getImageData=function(re){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(re.width,re.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=re.width,this.offscreenCanvas.height=re.height,this.offscreenCanvasContext.drawImage(re,0,0,re.width,re.height);var ce=this.offscreenCanvasContext.getImageData(-1,-1,re.width+2,re.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:ce.width,height:ce.height},ce.data)},te.prototype.removeTile=function(re){var ce=this.loaded,me=re.uid;ce&&ce[me]&&delete ce[me]};var be=c.vectorTile.VectorTileFeature.prototype.toGeoJSON,qe=function(re){this._feature=re,this.extent=c.EXTENT,this.type=re.type,this.properties=re.tags,"id"in re&&!isNaN(re.id)&&(this.id=parseInt(re.id,10))};qe.prototype.loadGeometry=function(){if(this._feature.type===1){for(var re=[],ce=0,me=this._feature.geometry;ce<me.length;ce+=1){var Se=me[ce];re.push([new c.Point$1(Se[0],Se[1])])}return re}for(var ze=[],$e=0,it=this._feature.geometry;$e<it.length;$e+=1){for(var Ie=[],Ve=0,mt=it[$e];Ve<mt.length;Ve+=1){var he=mt[Ve];Ie.push(new c.Point$1(he[0],he[1]))}ze.push(Ie)}return ze},qe.prototype.toGeoJSON=function(re,ce,me){return be.call(this,re,ce,me)};var Ne=function(re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=re.length,this._features=re};Ne.prototype.feature=function(re){return new qe(this._features[re])};var De=c.vectorTile.VectorTileFeature,fe=ct;function ct(re,ce){this.options=ce||{},this.features=re,this.length=re.length}function st(re,ce){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=ce||4096}ct.prototype.feature=function(re){return new st(this.features[re],this.options.extent)},st.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var ce=0;ce<re.length;ce++){for(var me=re[ce],Se=[],ze=0;ze<me.length;ze++)Se.push(new c.Point$1(me[ze][0],me[ze][1]));this.geometry.push(Se)}return this.geometry},st.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,ce=1/0,me=-1/0,Se=1/0,ze=-1/0,$e=0;$e<re.length;$e++)for(var it=re[$e],Ie=0;Ie<it.length;Ie++){var Ve=it[Ie];ce=Math.min(ce,Ve.x),me=Math.max(me,Ve.x),Se=Math.min(Se,Ve.y),ze=Math.max(ze,Ve.y)}return[ce,Se,me,ze]},st.prototype.toGeoJSON=De.prototype.toGeoJSON;var Ge=Rt,Ue=fe;function Rt(re){var ce=new c.pbf;return function(me,Se){for(var ze in me.layers)Se.writeMessage(3,He,me.layers[ze])}(re,ce),ce.finish()}function He(re,ce){var me;ce.writeVarintField(15,re.version||1),ce.writeStringField(1,re.name||""),ce.writeVarintField(5,re.extent||4096);var Se={keys:[],values:[],keycache:{},valuecache:{}};for(me=0;me<re.length;me++)Se.feature=re.feature(me),ce.writeMessage(2,Mt,Se);var ze=Se.keys;for(me=0;me<ze.length;me++)ce.writeStringField(3,ze[me]);var $e=Se.values;for(me=0;me<$e.length;me++)ce.writeMessage(4,wt,$e[me])}function Mt(re,ce){var me=re.feature;me.id!==void 0&&ce.writeVarintField(1,me.id),ce.writeMessage(2,li,re),ce.writeVarintField(3,me.type),ce.writeMessage(4,Ye,me)}function li(re,ce){var me=re.feature,Se=re.keys,ze=re.values,$e=re.keycache,it=re.valuecache;for(var Ie in me.properties){var Ve=$e[Ie];Ve===void 0&&(Se.push(Ie),$e[Ie]=Ve=Se.length-1),ce.writeVarint(Ve);var mt=me.properties[Ie],he=typeof mt;he!=="string"&&he!=="boolean"&&he!=="number"&&(mt=JSON.stringify(mt));var W=he+":"+mt,X=it[W];X===void 0&&(ze.push(mt),it[W]=X=ze.length-1),ce.writeVarint(X)}}function Et(re,ce){return(ce<<3)+(7&re)}function Gt(re){return re<<1^re>>31}function Ye(re,ce){for(var me=re.loadGeometry(),Se=re.type,ze=0,$e=0,it=me.length,Ie=0;Ie<it;Ie++){var Ve=me[Ie],mt=1;Se===1&&(mt=Ve.length),ce.writeVarint(Et(1,mt));for(var he=Se===3?Ve.length-1:Ve.length,W=0;W<he;W++){W===1&&Se!==1&&ce.writeVarint(Et(2,he-1));var X=Ve[W].x-ze,le=Ve[W].y-$e;ce.writeVarint(Gt(X)),ce.writeVarint(Gt(le)),ze+=X,$e+=le}Se===3&&ce.writeVarint(Et(7,1))}}function wt(re,ce){var me=typeof re;me==="string"?ce.writeStringField(1,re):me==="boolean"?ce.writeBooleanField(7,re):me==="number"&&(re%1!=0?ce.writeDoubleField(3,re):re<0?ce.writeSVarintField(6,re):ce.writeVarintField(5,re))}function Lt(re,ce,me,Se){ni(re,me,Se),ni(ce,2*me,2*Se),ni(ce,2*me+1,2*Se+1)}function ni(re,ce,me){var Se=re[ce];re[ce]=re[me],re[me]=Se}function Xt(re,ce,me,Se){var ze=re-me,$e=ce-Se;return ze*ze+$e*$e}Ge.fromVectorTileJs=Rt,Ge.fromGeojsonVt=function(re,ce){ce=ce||{};var me={};for(var Se in re)me[Se]=new fe(re[Se].features,ce),me[Se].name=Se,me[Se].version=ce.version,me[Se].extent=ce.extent;return Rt({layers:me})},Ge.GeoJSONWrapper=Ue;var Ki=function(re){return re[0]},ei=function(re){return re[1]},Jt=function(re,ce,me,Se,ze){ce===void 0&&(ce=Ki),me===void 0&&(me=ei),Se===void 0&&(Se=64),ze===void 0&&(ze=Float64Array),this.nodeSize=Se,this.points=re;for(var $e=re.length<65536?Uint16Array:Uint32Array,it=this.ids=new $e(re.length),Ie=this.coords=new ze(2*re.length),Ve=0;Ve<re.length;Ve++)it[Ve]=Ve,Ie[2*Ve]=ce(re[Ve]),Ie[2*Ve+1]=me(re[Ve]);(function mt(he,W,X,le,ge,Te){if(!(ge-le<=X)){var we=le+ge>>1;(function Pe(Me,Le,yt,lt,_t,si){for(;_t>lt;){if(_t-lt>600){var Re=_t-lt+1,Yt=yt-lt+1,di=Math.log(Re),kn=.5*Math.exp(2*di/3),Xi=.5*Math.sqrt(di*kn*(Re-kn)/Re)*(Yt-Re/2<0?-1:1);Pe(Me,Le,yt,Math.max(lt,Math.floor(yt-Yt*kn/Re+Xi)),Math.min(_t,Math.floor(yt+(Re-Yt)*kn/Re+Xi)),si)}var nn=Le[2*yt+si],Vi=lt,Ii=_t;for(Lt(Me,Le,lt,yt),Le[2*_t+si]>nn&&Lt(Me,Le,lt,_t);Vi<Ii;){for(Lt(Me,Le,Vi,Ii),Vi++,Ii--;Le[2*Vi+si]<nn;)Vi++;for(;Le[2*Ii+si]>nn;)Ii--}Le[2*lt+si]===nn?Lt(Me,Le,lt,Ii):Lt(Me,Le,++Ii,_t),Ii<=yt&&(lt=Ii+1),yt<=Ii&&(_t=Ii-1)}})(he,W,we,le,ge,Te%2),mt(he,W,X,le,we-1,Te+1),mt(he,W,X,we+1,ge,Te+1)}})(it,Ie,Se,0,it.length-1,0)};Jt.prototype.range=function(re,ce,me,Se){return function(ze,$e,it,Ie,Ve,mt,he){for(var W,X,le=[0,ze.length-1,0],ge=[];le.length;){var Te=le.pop(),we=le.pop(),Pe=le.pop();if(we-Pe<=he)for(var Me=Pe;Me<=we;Me++)X=$e[2*Me+1],(W=$e[2*Me])>=it&&W<=Ve&&X>=Ie&&X<=mt&&ge.push(ze[Me]);else{var Le=Math.floor((Pe+we)/2);X=$e[2*Le+1],(W=$e[2*Le])>=it&&W<=Ve&&X>=Ie&&X<=mt&&ge.push(ze[Le]);var yt=(Te+1)%2;(Te===0?it<=W:Ie<=X)&&(le.push(Pe),le.push(Le-1),le.push(yt)),(Te===0?Ve>=W:mt>=X)&&(le.push(Le+1),le.push(we),le.push(yt))}}return ge}(this.ids,this.coords,re,ce,me,Se,this.nodeSize)},Jt.prototype.within=function(re,ce,me){return function(Se,ze,$e,it,Ie,Ve){for(var mt=[0,Se.length-1,0],he=[],W=Ie*Ie;mt.length;){var X=mt.pop(),le=mt.pop(),ge=mt.pop();if(le-ge<=Ve)for(var Te=ge;Te<=le;Te++)Xt(ze[2*Te],ze[2*Te+1],$e,it)<=W&&he.push(Se[Te]);else{var we=Math.floor((ge+le)/2),Pe=ze[2*we],Me=ze[2*we+1];Xt(Pe,Me,$e,it)<=W&&he.push(Se[we]);var Le=(X+1)%2;(X===0?$e-Ie<=Pe:it-Ie<=Me)&&(mt.push(ge),mt.push(we-1),mt.push(Le)),(X===0?$e+Ie>=Pe:it+Ie>=Me)&&(mt.push(we+1),mt.push(le),mt.push(Le))}}return he}(this.ids,this.coords,re,ce,me,this.nodeSize)};var xi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(re){return re}},ai=function(re){this.options=Oi(Object.create(xi),re),this.trees=new Array(this.options.maxZoom+1)};function dt(re,ce,me,Se,ze){return{x:re,y:ce,zoom:1/0,id:me,parentId:-1,numPoints:Se,properties:ze}}function It(re,ce){var me=re.geometry.coordinates,Se=me[1];return{x:Qt(me[0]),y:gt(Se),zoom:1/0,index:ce,parentId:-1}}function St(re){return{type:"Feature",id:re.id,properties:Yi(re),geometry:{type:"Point",coordinates:[(Se=re.x,360*(Se-.5)),(ce=re.y,me=(180-360*ce)*Math.PI/180,360*Math.atan(Math.exp(me))/Math.PI-90)]}};var ce,me,Se}function Yi(re){var ce=re.numPoints,me=ce>=1e4?Math.round(ce/1e3)+"k":ce>=1e3?Math.round(ce/100)/10+"k":ce;return Oi(Oi({},re.properties),{cluster:!0,cluster_id:re.id,point_count:ce,point_count_abbreviated:me})}function Qt(re){return re/360+.5}function gt(re){var ce=Math.sin(re*Math.PI/180),me=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return me<0?0:me>1?1:me}function Oi(re,ce){for(var me in ce)re[me]=ce[me];return re}function ln(re){return re.x}function Cn(re){return re.y}function Zn(re,ce,me,Se,ze,$e){var it=ze-me,Ie=$e-Se;if(it!==0||Ie!==0){var Ve=((re-me)*it+(ce-Se)*Ie)/(it*it+Ie*Ie);Ve>1?(me=ze,Se=$e):Ve>0&&(me+=it*Ve,Se+=Ie*Ve)}return(it=re-me)*it+(Ie=ce-Se)*Ie}function Nr(re,ce,me,Se){var ze={id:re===void 0?null:re,type:ce,geometry:me,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($e){var it=$e.geometry,Ie=$e.type;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")Kr($e,it);else if(Ie==="Polygon"||Ie==="MultiLineString")for(var Ve=0;Ve<it.length;Ve++)Kr($e,it[Ve]);else if(Ie==="MultiPolygon")for(Ve=0;Ve<it.length;Ve++)for(var mt=0;mt<it[Ve].length;mt++)Kr($e,it[Ve][mt])}(ze),ze}function Kr(re,ce){for(var me=0;me<ce.length;me+=3)re.minX=Math.min(re.minX,ce[me]),re.minY=Math.min(re.minY,ce[me+1]),re.maxX=Math.max(re.maxX,ce[me]),re.maxY=Math.max(re.maxY,ce[me+1])}function At(re,ce,me,Se){if(ce.geometry){var ze=ce.geometry.coordinates,$e=ce.geometry.type,it=Math.pow(me.tolerance/((1<<me.maxZoom)*me.extent),2),Ie=[],Ve=ce.id;if(me.promoteId?Ve=ce.properties[me.promoteId]:me.generateId&&(Ve=Se||0),$e==="Point")Ni(ze,Ie);else if($e==="MultiPoint")for(var mt=0;mt<ze.length;mt++)Ni(ze[mt],Ie);else if($e==="LineString")jn(ze,Ie,it,!1);else if($e==="MultiLineString"){if(me.lineMetrics){for(mt=0;mt<ze.length;mt++)jn(ze[mt],Ie=[],it,!1),re.push(Nr(Ve,"LineString",Ie,ce.properties));return}rn(ze,Ie,it,!1)}else if($e==="Polygon")rn(ze,Ie,it,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(mt=0;mt<ce.geometry.geometries.length;mt++)At(re,{id:Ve,geometry:ce.geometry.geometries[mt],properties:ce.properties},me,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<ze.length;mt++){var he=[];rn(ze[mt],he,it,!0),Ie.push(he)}}re.push(Nr(Ve,$e,Ie,ce.properties))}}function Ni(re,ce){ce.push($n(re[0])),ce.push(Ln(re[1])),ce.push(0)}function jn(re,ce,me,Se){for(var ze,$e,it=0,Ie=0;Ie<re.length;Ie++){var Ve=$n(re[Ie][0]),mt=Ln(re[Ie][1]);ce.push(Ve),ce.push(mt),ce.push(0),Ie>0&&(it+=Se?(ze*mt-Ve*$e)/2:Math.sqrt(Math.pow(Ve-ze,2)+Math.pow(mt-$e,2))),ze=Ve,$e=mt}var he=ce.length-3;ce[2]=1,function W(X,le,ge,Te){for(var we,Pe=Te,Me=ge-le>>1,Le=ge-le,yt=X[le],lt=X[le+1],_t=X[ge],si=X[ge+1],Re=le+3;Re<ge;Re+=3){var Yt=Zn(X[Re],X[Re+1],yt,lt,_t,si);if(Yt>Pe)we=Re,Pe=Yt;else if(Yt===Pe){var di=Math.abs(Re-Me);di<Le&&(we=Re,Le=di)}}Pe>Te&&(we-le>3&&W(X,le,we,Te),X[we+2]=Pe,ge-we>3&&W(X,we,ge,Te))}(ce,0,he,me),ce[he+2]=1,ce.size=Math.abs(it),ce.start=0,ce.end=ce.size}function rn(re,ce,me,Se){for(var ze=0;ze<re.length;ze++){var $e=[];jn(re[ze],$e,me,Se),ce.push($e)}}function $n(re){return re/360+.5}function Ln(re){var ce=Math.sin(re*Math.PI/180),me=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return me<0?0:me>1?1:me}function zt(re,ce,me,Se,ze,$e,it,Ie){if(Se/=ce,$e>=(me/=ce)&&it<Se)return re;if(it<me||$e>=Se)return null;for(var Ve=[],mt=0;mt<re.length;mt++){var he=re[mt],W=he.geometry,X=he.type,le=ze===0?he.minX:he.minY,ge=ze===0?he.maxX:he.maxY;if(le>=me&&ge<Se)Ve.push(he);else if(!(ge<me||le>=Se)){var Te=[];if(X==="Point"||X==="MultiPoint")Ui(W,Te,me,Se,ze);else if(X==="LineString")Ze(W,Te,me,Se,ze,!1,Ie.lineMetrics);else if(X==="MultiLineString")Ji(W,Te,me,Se,ze,!1);else if(X==="Polygon")Ji(W,Te,me,Se,ze,!0);else if(X==="MultiPolygon")for(var we=0;we<W.length;we++){var Pe=[];Ji(W[we],Pe,me,Se,ze,!0),Pe.length&&Te.push(Pe)}if(Te.length){if(Ie.lineMetrics&&X==="LineString"){for(we=0;we<Te.length;we++)Ve.push(Nr(he.id,X,Te[we],he.tags));continue}X!=="LineString"&&X!=="MultiLineString"||(Te.length===1?(X="LineString",Te=Te[0]):X="MultiLineString"),X!=="Point"&&X!=="MultiPoint"||(X=Te.length===3?"Point":"MultiPoint"),Ve.push(Nr(he.id,X,Te,he.tags))}}}return Ve.length?Ve:null}function Ui(re,ce,me,Se,ze){for(var $e=0;$e<re.length;$e+=3){var it=re[$e+ze];it>=me&&it<=Se&&(ce.push(re[$e]),ce.push(re[$e+1]),ce.push(re[$e+2]))}}function Ze(re,ce,me,Se,ze,$e,it){for(var Ie,Ve,mt=Ft(re),he=ze===0?Wn:_o,W=re.start,X=0;X<re.length-3;X+=3){var le=re[X],ge=re[X+1],Te=re[X+2],we=re[X+3],Pe=re[X+4],Me=ze===0?le:ge,Le=ze===0?we:Pe,yt=!1;it&&(Ie=Math.sqrt(Math.pow(le-we,2)+Math.pow(ge-Pe,2))),Me<me?Le>me&&(Ve=he(mt,le,ge,we,Pe,me),it&&(mt.start=W+Ie*Ve)):Me>Se?Le<Se&&(Ve=he(mt,le,ge,we,Pe,Se),it&&(mt.start=W+Ie*Ve)):Gn(mt,le,ge,Te),Le<me&&Me>=me&&(Ve=he(mt,le,ge,we,Pe,me),yt=!0),Le>Se&&Me<=Se&&(Ve=he(mt,le,ge,we,Pe,Se),yt=!0),!$e&&yt&&(it&&(mt.end=W+Ie*Ve),ce.push(mt),mt=Ft(re)),it&&(W+=Ie)}var lt=re.length-3;le=re[lt],ge=re[lt+1],Te=re[lt+2],(Me=ze===0?le:ge)>=me&&Me<=Se&&Gn(mt,le,ge,Te),lt=mt.length-3,$e&&lt>=3&&(mt[lt]!==mt[0]||mt[lt+1]!==mt[1])&&Gn(mt,mt[0],mt[1],mt[2]),mt.length&&ce.push(mt)}function Ft(re){var ce=[];return ce.size=re.size,ce.start=re.start,ce.end=re.end,ce}function Ji(re,ce,me,Se,ze,$e){for(var it=0;it<re.length;it++)Ze(re[it],ce,me,Se,ze,$e,!1)}function Gn(re,ce,me,Se){re.push(ce),re.push(me),re.push(Se)}function Wn(re,ce,me,Se,ze,$e){var it=($e-ce)/(Se-ce);return re.push($e),re.push(me+(ze-me)*it),re.push(1),it}function _o(re,ce,me,Se,ze,$e){var it=($e-me)/(ze-me);return re.push(ce+(Se-ce)*it),re.push($e),re.push(1),it}function vo(re,ce){for(var me=[],Se=0;Se<re.length;Se++){var ze,$e=re[Se],it=$e.type;if(it==="Point"||it==="MultiPoint"||it==="LineString")ze=la($e.geometry,ce);else if(it==="MultiLineString"||it==="Polygon"){ze=[];for(var Ie=0;Ie<$e.geometry.length;Ie++)ze.push(la($e.geometry[Ie],ce))}else if(it==="MultiPolygon")for(ze=[],Ie=0;Ie<$e.geometry.length;Ie++){for(var Ve=[],mt=0;mt<$e.geometry[Ie].length;mt++)Ve.push(la($e.geometry[Ie][mt],ce));ze.push(Ve)}me.push(Nr($e.id,it,ze,$e.tags))}return me}function la(re,ce){var me=[];me.size=re.size,re.start!==void 0&&(me.start=re.start,me.end=re.end);for(var Se=0;Se<re.length;Se+=3)me.push(re[Se]+ce,re[Se+1],re[Se+2]);return me}function kr(re,ce){if(re.transformed)return re;var me,Se,ze,$e=1<<re.z,it=re.x,Ie=re.y;for(me=0;me<re.features.length;me++){var Ve=re.features[me],mt=Ve.geometry,he=Ve.type;if(Ve.geometry=[],he===1)for(Se=0;Se<mt.length;Se+=2)Ve.geometry.push(vi(mt[Se],mt[Se+1],ce,$e,it,Ie));else for(Se=0;Se<mt.length;Se++){var W=[];for(ze=0;ze<mt[Se].length;ze+=2)W.push(vi(mt[Se][ze],mt[Se][ze+1],ce,$e,it,Ie));Ve.geometry.push(W)}}return re.transformed=!0,re}function vi(re,ce,me,Se,ze,$e){return[Math.round(me*(re*Se-ze)),Math.round(me*(ce*Se-$e))]}function Un(re,ce,me,Se,ze){for(var $e=ce===ze.maxZoom?0:ze.tolerance/((1<<ce)*ze.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:me,y:Se,z:ce,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ie=0;Ie<re.length;Ie++){it.numFeatures++,In(it,re[Ie],$e,ze);var Ve=re[Ie].minX,mt=re[Ie].minY,he=re[Ie].maxX,W=re[Ie].maxY;Ve<it.minX&&(it.minX=Ve),mt<it.minY&&(it.minY=mt),he>it.maxX&&(it.maxX=he),W>it.maxY&&(it.maxY=W)}return it}function In(re,ce,me,Se){var ze=ce.geometry,$e=ce.type,it=[];if($e==="Point"||$e==="MultiPoint")for(var Ie=0;Ie<ze.length;Ie+=3)it.push(ze[Ie]),it.push(ze[Ie+1]),re.numPoints++,re.numSimplified++;else if($e==="LineString")ro(it,ze,re,me,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(Ie=0;Ie<ze.length;Ie++)ro(it,ze[Ie],re,me,$e==="Polygon",Ie===0);else if($e==="MultiPolygon")for(var Ve=0;Ve<ze.length;Ve++){var mt=ze[Ve];for(Ie=0;Ie<mt.length;Ie++)ro(it,mt[Ie],re,me,!0,Ie===0)}if(it.length){var he=ce.tags||null;if($e==="LineString"&&Se.lineMetrics){for(var W in he={},ce.tags)he[W]=ce.tags[W];he.mapbox_clip_start=ze.start/ze.size,he.mapbox_clip_end=ze.end/ze.size}var X={geometry:it,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:he};ce.id!==null&&(X.id=ce.id),re.features.push(X)}}function ro(re,ce,me,Se,ze,$e){var it=Se*Se;if(Se>0&&ce.size<(ze?it:Se))me.numPoints+=ce.length/3;else{for(var Ie=[],Ve=0;Ve<ce.length;Ve+=3)(Se===0||ce[Ve+2]>it)&&(me.numSimplified++,Ie.push(ce[Ve]),Ie.push(ce[Ve+1])),me.numPoints++;ze&&function(mt,he){for(var W=0,X=0,le=mt.length,ge=le-2;X<le;ge=X,X+=2)W+=(mt[X]-mt[ge])*(mt[X+1]+mt[ge+1]);if(W>0===he)for(X=0,le=mt.length;X<le/2;X+=2){var Te=mt[X],we=mt[X+1];mt[X]=mt[le-2-X],mt[X+1]=mt[le-1-X],mt[le-2-X]=Te,mt[le-1-X]=we}}(Ie,$e),re.push(Ie)}}function ho(re,ce){var me=(ce=this.options=function(ze,$e){for(var it in $e)ze[it]=$e[it];return ze}(Object.create(this.options),ce)).debug;if(me&&console.time("preprocess data"),ce.maxZoom<0||ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ce.promoteId&&ce.generateId)throw new Error("promoteId and generateId cannot be used together.");var Se=function(ze,$e){var it=[];if(ze.type==="FeatureCollection")for(var Ie=0;Ie<ze.features.length;Ie++)At(it,ze.features[Ie],$e,Ie);else At(it,ze.type==="Feature"?ze:{geometry:ze},$e);return it}(re,ce);this.tiles={},this.tileCoords=[],me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ce.indexMaxZoom,ce.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Se=function(ze,$e){var it=$e.buffer/$e.extent,Ie=ze,Ve=zt(ze,1,-1-it,it,0,-1,2,$e),mt=zt(ze,1,1-it,2+it,0,-1,2,$e);return(Ve||mt)&&(Ie=zt(ze,1,-it,1+it,0,-1,2,$e)||[],Ve&&(Ie=vo(Ve,1).concat(Ie)),mt&&(Ie=Ie.concat(vo(mt,-1)))),Ie}(Se,ce)).length&&this.splitTile(Se,0,0,0),me&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yn(re,ce,me){return 32*((1<<re)*me+ce)+re}function ua(re,ce){var me=re.tileID.canonical;if(!this._geoJSONIndex)return ce(null,null);var Se=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!Se)return ce(null,null);var ze=new Ne(Se.features),$e=Ge(ze);$e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),ce(null,{vectorTile:ze,rawData:$e.buffer})}ai.prototype.load=function(re){var ce=this.options,me=ce.log,Se=ce.minZoom,ze=ce.maxZoom,$e=ce.nodeSize;me&&console.time("total time");var it="prepare "+re.length+" points";me&&console.time(it),this.points=re;for(var Ie=[],Ve=0;Ve<re.length;Ve++)re[Ve].geometry&&Ie.push(It(re[Ve],Ve));this.trees[ze+1]=new Jt(Ie,ln,Cn,$e,Float32Array),me&&console.timeEnd(it);for(var mt=ze;mt>=Se;mt--){var he=+Date.now();Ie=this._cluster(Ie,mt),this.trees[mt]=new Jt(Ie,ln,Cn,$e,Float32Array),me&&console.log("z%d: %d clusters in %dms",mt,Ie.length,+Date.now()-he)}return me&&console.timeEnd("total time"),this},ai.prototype.getClusters=function(re,ce){var me=((re[0]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,re[1])),ze=re[2]===180?180:((re[2]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)me=-180,ze=180;else if(me>ze){var it=this.getClusters([me,Se,180,$e],ce),Ie=this.getClusters([-180,Se,ze,$e],ce);return it.concat(Ie)}for(var Ve=this.trees[this._limitZoom(ce)],mt=[],he=0,W=Ve.range(Qt(me),gt($e),Qt(ze),gt(Se));he<W.length;he+=1){var X=Ve.points[W[he]];mt.push(X.numPoints?St(X):this.points[X.index])}return mt},ai.prototype.getChildren=function(re){var ce=this._getOriginId(re),me=this._getOriginZoom(re),Se="No cluster with the specified id.",ze=this.trees[me];if(!ze)throw new Error(Se);var $e=ze.points[ce];if(!$e)throw new Error(Se);for(var it=this.options.radius/(this.options.extent*Math.pow(2,me-1)),Ie=[],Ve=0,mt=ze.within($e.x,$e.y,it);Ve<mt.length;Ve+=1){var he=ze.points[mt[Ve]];he.parentId===re&&Ie.push(he.numPoints?St(he):this.points[he.index])}if(Ie.length===0)throw new Error(Se);return Ie},ai.prototype.getLeaves=function(re,ce,me){var Se=[];return this._appendLeaves(Se,re,ce=ce||10,me=me||0,0),Se},ai.prototype.getTile=function(re,ce,me){var Se=this.trees[this._limitZoom(re)],ze=Math.pow(2,re),$e=this.options,it=$e.radius/$e.extent,Ie=(me-it)/ze,Ve=(me+1+it)/ze,mt={features:[]};return this._addTileFeatures(Se.range((ce-it)/ze,Ie,(ce+1+it)/ze,Ve),Se.points,ce,me,ze,mt),ce===0&&this._addTileFeatures(Se.range(1-it/ze,Ie,1,Ve),Se.points,ze,me,ze,mt),ce===ze-1&&this._addTileFeatures(Se.range(0,Ie,it/ze,Ve),Se.points,-1,me,ze,mt),mt.features.length?mt:null},ai.prototype.getClusterExpansionZoom=function(re){for(var ce=this._getOriginZoom(re)-1;ce<=this.options.maxZoom;){var me=this.getChildren(re);if(ce++,me.length!==1)break;re=me[0].properties.cluster_id}return ce},ai.prototype._appendLeaves=function(re,ce,me,Se,ze){for(var $e=0,it=this.getChildren(ce);$e<it.length;$e+=1){var Ie=it[$e],Ve=Ie.properties;if(Ve&&Ve.cluster?ze+Ve.point_count<=Se?ze+=Ve.point_count:ze=this._appendLeaves(re,Ve.cluster_id,me,Se,ze):ze<Se?ze++:re.push(Ie),re.length===me)break}return ze},ai.prototype._addTileFeatures=function(re,ce,me,Se,ze,$e){for(var it=0,Ie=re;it<Ie.length;it+=1){var Ve=ce[Ie[it]],mt=Ve.numPoints,he={type:1,geometry:[[Math.round(this.options.extent*(Ve.x*ze-me)),Math.round(this.options.extent*(Ve.y*ze-Se))]],tags:mt?Yi(Ve):this.points[Ve.index].properties},W=void 0;mt?W=Ve.id:this.options.generateId?W=Ve.index:this.points[Ve.index].id&&(W=this.points[Ve.index].id),W!==void 0&&(he.id=W),$e.features.push(he)}},ai.prototype._limitZoom=function(re){return Math.max(this.options.minZoom,Math.min(+re,this.options.maxZoom+1))},ai.prototype._cluster=function(re,ce){for(var me=[],Se=this.options,ze=Se.reduce,$e=Se.minPoints,it=Se.radius/(Se.extent*Math.pow(2,ce)),Ie=0;Ie<re.length;Ie++){var Ve=re[Ie];if(!(Ve.zoom<=ce)){Ve.zoom=ce;for(var mt=this.trees[ce+1],he=mt.within(Ve.x,Ve.y,it),W=Ve.numPoints||1,X=W,le=0,ge=he;le<ge.length;le+=1){var Te=mt.points[ge[le]];Te.zoom>ce&&(X+=Te.numPoints||1)}if(X>=$e){for(var we=Ve.x*W,Pe=Ve.y*W,Me=ze&&W>1?this._map(Ve,!0):null,Le=(Ie<<5)+(ce+1)+this.points.length,yt=0,lt=he;yt<lt.length;yt+=1){var _t=mt.points[lt[yt]];if(!(_t.zoom<=ce)){_t.zoom=ce;var si=_t.numPoints||1;we+=_t.x*si,Pe+=_t.y*si,_t.parentId=Le,ze&&(Me||(Me=this._map(Ve,!0)),ze(Me,this._map(_t)))}}Ve.parentId=Le,me.push(dt(we/X,Pe/X,Le,X,Me))}else if(me.push(Ve),X>1)for(var Re=0,Yt=he;Re<Yt.length;Re+=1){var di=mt.points[Yt[Re]];di.zoom<=ce||(di.zoom=ce,me.push(di))}}}return me},ai.prototype._getOriginId=function(re){return re-this.points.length>>5},ai.prototype._getOriginZoom=function(re){return(re-this.points.length)%32},ai.prototype._map=function(re,ce){if(re.numPoints)return ce?Oi({},re.properties):re.properties;var me=this.points[re.index].properties,Se=this.options.map(me);return ce&&Se===me?Oi({},Se):Se},ho.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ho.prototype.splitTile=function(re,ce,me,Se,ze,$e,it){for(var Ie=[re,ce,me,Se],Ve=this.options,mt=Ve.debug;Ie.length;){Se=Ie.pop(),me=Ie.pop(),ce=Ie.pop(),re=Ie.pop();var he=1<<ce,W=yn(ce,me,Se),X=this.tiles[W];if(!X&&(mt>1&&console.time("creation"),X=this.tiles[W]=Un(re,ce,me,Se,Ve),this.tileCoords.push({z:ce,x:me,y:Se}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ce,me,Se,X.numFeatures,X.numPoints,X.numSimplified),console.timeEnd("creation"));var le="z"+ce;this.stats[le]=(this.stats[le]||0)+1,this.total++}if(X.source=re,ze){if(ce===Ve.maxZoom||ce===ze)continue;var ge=1<<ze-ce;if(me!==Math.floor($e/ge)||Se!==Math.floor(it/ge))continue}else if(ce===Ve.indexMaxZoom||X.numPoints<=Ve.indexMaxPoints)continue;if(X.source=null,re.length!==0){mt>1&&console.time("clipping");var Te,we,Pe,Me,Le,yt,lt=.5*Ve.buffer/Ve.extent,_t=.5-lt,si=.5+lt,Re=1+lt;Te=we=Pe=Me=null,Le=zt(re,he,me-lt,me+si,0,X.minX,X.maxX,Ve),yt=zt(re,he,me+_t,me+Re,0,X.minX,X.maxX,Ve),re=null,Le&&(Te=zt(Le,he,Se-lt,Se+si,1,X.minY,X.maxY,Ve),we=zt(Le,he,Se+_t,Se+Re,1,X.minY,X.maxY,Ve),Le=null),yt&&(Pe=zt(yt,he,Se-lt,Se+si,1,X.minY,X.maxY,Ve),Me=zt(yt,he,Se+_t,Se+Re,1,X.minY,X.maxY,Ve),yt=null),mt>1&&console.timeEnd("clipping"),Ie.push(Te||[],ce+1,2*me,2*Se),Ie.push(we||[],ce+1,2*me,2*Se+1),Ie.push(Pe||[],ce+1,2*me+1,2*Se),Ie.push(Me||[],ce+1,2*me+1,2*Se+1)}}},ho.prototype.getTile=function(re,ce,me){var Se=this.options,ze=Se.extent,$e=Se.debug;if(re<0||re>24)return null;var it=1<<re,Ie=yn(re,ce=(ce%it+it)%it,me);if(this.tiles[Ie])return kr(this.tiles[Ie],ze);$e>1&&console.log("drilling down to z%d-%d-%d",re,ce,me);for(var Ve,mt=re,he=ce,W=me;!Ve&&mt>0;)mt--,he=Math.floor(he/2),W=Math.floor(W/2),Ve=this.tiles[yn(mt,he,W)];return Ve&&Ve.source?($e>1&&console.log("found parent tile z%d-%d-%d",mt,he,W),$e>1&&console.time("drilling down"),this.splitTile(Ve.source,mt,he,W,re,ce,me),$e>1&&console.timeEnd("drilling down"),this.tiles[Ie]?kr(this.tiles[Ie],ze):null):null};var To=function(re){function ce(me,Se,ze,$e){re.call(this,me,Se,ze,ua),$e&&(this.loadGeoJSON=$e)}return re&&(ce.__proto__=re),(ce.prototype=Object.create(re&&re.prototype)).constructor=ce,ce.prototype.loadData=function(me,Se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Se,this._pendingLoadDataParams=me,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ce.prototype._loadData=function(){var me=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Se=this._pendingCallback,ze=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $e=!!(ze&&ze.request&&ze.request.collectResourceTiming)&&new c.RequestPerformance(ze.request);this.loadGeoJSON(ze,function(it,Ie){if(it||!Ie)return Se(it);if(typeof Ie!="object")return Se(new Error("Input data given to '"+ze.source+"' is not a valid GeoJSON object."));(function X(le,ge){var Te,we=le&&le.type;if(we==="FeatureCollection")for(Te=0;Te<le.features.length;Te++)X(le.features[Te],ge);else if(we==="GeometryCollection")for(Te=0;Te<le.geometries.length;Te++)X(le.geometries[Te],ge);else if(we==="Feature")X(le.geometry,ge);else if(we==="Polygon")de(le.coordinates,ge);else if(we==="MultiPolygon")for(Te=0;Te<le.coordinates.length;Te++)de(le.coordinates[Te],ge);return le})(Ie,!0);try{if(ze.filter){var Ve=c.createExpression(ze.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ve.result==="error")throw new Error(Ve.value.map(function(X){return X.key+": "+X.message}).join(", "));var mt=Ie.features.filter(function(X){return Ve.value.evaluate({zoom:0},X)});Ie={type:"FeatureCollection",features:mt}}me._geoJSONIndex=ze.cluster?new ai(function(X){var le=X.superclusterOptions,ge=X.clusterProperties;if(!ge||!le)return le;for(var Te={},we={},Pe={accumulated:null,zoom:0},Me={properties:null},Le=Object.keys(ge),yt=0,lt=Le;yt<lt.length;yt+=1){var _t=lt[yt],si=ge[_t],Re=si[0],Yt=c.createExpression(si[1]),di=c.createExpression(typeof Re=="string"?[Re,["accumulated"],["get",_t]]:Re);Te[_t]=Yt.value,we[_t]=di.value}return le.map=function(kn){Me.properties=kn;for(var Xi={},nn=0,Vi=Le;nn<Vi.length;nn+=1){var Ii=Vi[nn];Xi[Ii]=Te[Ii].evaluate(Pe,Me)}return Xi},le.reduce=function(kn,Xi){Me.properties=Xi;for(var nn=0,Vi=Le;nn<Vi.length;nn+=1){var Ii=Vi[nn];Pe.accumulated=kn[Ii],kn[Ii]=we[Ii].evaluate(Pe,Me)}},le}(ze)).load(Ie.features):function(X,le){return new ho(X,le)}(Ie,ze.geojsonVtOptions)}catch(X){return Se(X)}me.loaded={};var he={};if($e){var W=$e.finish();W&&(he.resourceTiming={},he.resourceTiming[ze.source]=JSON.parse(JSON.stringify(W)))}Se(null,he)})}},ce.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ce.prototype.reloadTile=function(me,Se){var ze=this.loaded;return ze&&ze[me.uid]?re.prototype.reloadTile.call(this,me,Se):this.loadTile(me,Se)},ce.prototype.loadGeoJSON=function(me,Se){if(me.request)c.getJSON(me.request,Se);else{if(typeof me.data!="string")return Se(new Error("Input data given to '"+me.source+"' is not a valid GeoJSON object."));try{return Se(null,JSON.parse(me.data))}catch{return Se(new Error("Input data given to '"+me.source+"' is not a valid GeoJSON object."))}}},ce.prototype.removeSource=function(me,Se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Se()},ce.prototype.getClusterExpansionZoom=function(me,Se){try{Se(null,this._geoJSONIndex.getClusterExpansionZoom(me.clusterId))}catch(ze){Se(ze)}},ce.prototype.getClusterChildren=function(me,Se){try{Se(null,this._geoJSONIndex.getChildren(me.clusterId))}catch(ze){Se(ze)}},ce.prototype.getClusterLeaves=function(me,Se){try{Se(null,this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset))}catch(ze){Se(ze)}},ce}(ee),wr=function(re){var ce=this;this.self=re,this.actor=new c.Actor(re,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:To},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(me,Se){if(ce.workerSourceTypes[me])throw new Error('Worker source with name "'+me+'" already registered.');ce.workerSourceTypes[me]=Se},this.self.registerRTLTextPlugin=function(me){if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=me.applyArabicShaping,c.plugin.processBidirectionalText=me.processBidirectionalText,c.plugin.processStyledBidirectionalText=me.processStyledBidirectionalText}};return wr.prototype.setReferrer=function(re,ce){this.referrer=ce},wr.prototype.setImages=function(re,ce,me){for(var Se in this.availableImages[re]=ce,this.workerSources[re]){var ze=this.workerSources[re][Se];for(var $e in ze)ze[$e].availableImages=ce}me()},wr.prototype.setLayers=function(re,ce,me){this.getLayerIndex(re).replace(ce),me()},wr.prototype.updateLayers=function(re,ce,me){this.getLayerIndex(re).update(ce.layers,ce.removedIds),me()},wr.prototype.loadTile=function(re,ce,me){this.getWorkerSource(re,ce.type,ce.source).loadTile(ce,me)},wr.prototype.loadDEMTile=function(re,ce,me){this.getDEMWorkerSource(re,ce.source).loadTile(ce,me)},wr.prototype.reloadTile=function(re,ce,me){this.getWorkerSource(re,ce.type,ce.source).reloadTile(ce,me)},wr.prototype.abortTile=function(re,ce,me){this.getWorkerSource(re,ce.type,ce.source).abortTile(ce,me)},wr.prototype.removeTile=function(re,ce,me){this.getWorkerSource(re,ce.type,ce.source).removeTile(ce,me)},wr.prototype.removeDEMTile=function(re,ce){this.getDEMWorkerSource(re,ce.source).removeTile(ce)},wr.prototype.removeSource=function(re,ce,me){if(this.workerSources[re]&&this.workerSources[re][ce.type]&&this.workerSources[re][ce.type][ce.source]){var Se=this.workerSources[re][ce.type][ce.source];delete this.workerSources[re][ce.type][ce.source],Se.removeSource!==void 0?Se.removeSource(ce,me):me()}},wr.prototype.loadWorkerSource=function(re,ce,me){try{this.self.importScripts(ce.url),me()}catch(Se){me(Se.toString())}},wr.prototype.syncRTLPluginState=function(re,ce,me){try{c.plugin.setState(ce);var Se=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);var ze=c.plugin.isParsed();me(ze?void 0:new Error("RTL Text Plugin failed to import scripts from "+Se),ze)}}catch($e){me($e.toString())}},wr.prototype.getAvailableImages=function(re){var ce=this.availableImages[re];return ce||(ce=[]),ce},wr.prototype.getLayerIndex=function(re){var ce=this.layerIndexes[re];return ce||(ce=this.layerIndexes[re]=new L),ce},wr.prototype.getWorkerSource=function(re,ce,me){var Se=this;return this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ce]||(this.workerSources[re][ce]={}),this.workerSources[re][ce][me]||(this.workerSources[re][ce][me]=new this.workerSourceTypes[ce]({send:function(ze,$e,it){Se.actor.send(ze,$e,it,re)}},this.getLayerIndex(re),this.getAvailableImages(re))),this.workerSources[re][ce][me]},wr.prototype.getDEMWorkerSource=function(re,ce){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ce]||(this.demWorkerSources[re][ce]=new te),this.demWorkerSources[re][ce]},wr.prototype.enforceCacheSizeLimit=function(re,ce){c.enforceCacheSizeLimit(ce)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new wr(self)),wr}),_(["./shared"],function(c){var h=c.createCommonjsModule(function(f){function y(P){return!g(P)}function g(P){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var N,H,Q=new Blob([""],{type:"text/javascript"}),ae=URL.createObjectURL(Q);try{H=new Worker(ae),N=!0}catch{N=!1}return H&&H.terminate(),URL.revokeObjectURL(ae),N}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var N=document.createElement("canvas");N.width=N.height=1;var H=N.getContext("2d");if(!H)return!1;var Q=H.getImageData(0,0,1,1);return Q&&Q.width===N.width}()?(w[F=P&&P.failIfMajorPerformanceCaveat]===void 0&&(w[F]=function(N){var H=function(ae){var _e=document.createElement("canvas"),xe=Object.create(y.webGLContextAttributes);return xe.failIfMajorPerformanceCaveat=ae,_e.probablySupportsContext?_e.probablySupportsContext("webgl",xe)||_e.probablySupportsContext("experimental-webgl",xe):_e.supportsContext?_e.supportsContext("webgl",xe)||_e.supportsContext("experimental-webgl",xe):_e.getContext("webgl",xe)||_e.getContext("experimental-webgl",xe)}(N);if(!H)return!1;var Q=H.createShader(H.VERTEX_SHADER);return!(!Q||H.isContextLost())&&(H.shaderSource(Q,"void main() {}"),H.compileShader(Q),H.getShaderParameter(Q,H.COMPILE_STATUS)===!0)}(F)),w[F]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var F}f.exports?f.exports=y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=y,window.mapboxgl.notSupportedReason=g);var w={};y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),I={create:function(f,y,g){var w=c.window.document.createElement(f);return y!==void 0&&(w.className=y),g&&g.appendChild(w),w},createNS:function(f,y){return c.window.document.createElementNS(f,y)}},L=c.window.document&&c.window.document.documentElement.style;function z(f){if(!L)return f[0];for(var y=0;y<f.length;y++)if(f[y]in L)return f[y];return f[0]}var R,O=z(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);I.disableDrag=function(){L&&O&&(R=L[O],L[O]="none")},I.enableDrag=function(){L&&O&&(L[O]=R)};var Y=z(["transform","WebkitTransform"]);I.setTransform=function(f,y){f.style[Y]=y};var ee=!1;try{var ue=Object.defineProperty({},"passive",{get:function(){ee=!0}});c.window.addEventListener("test",ue,ue),c.window.removeEventListener("test",ue,ue)}catch{ee=!1}I.addEventListener=function(f,y,g,w){w===void 0&&(w={}),f.addEventListener(y,g,"passive"in w&&ee?w:w.capture)},I.removeEventListener=function(f,y,g,w){w===void 0&&(w={}),f.removeEventListener(y,g,"passive"in w&&ee?w:w.capture)};var te=function(f){f.preventDefault(),f.stopPropagation(),c.window.removeEventListener("click",te,!0)};function de(f){var y=f.userImage;return!!(y&&y.render&&y.render())&&(f.data.replace(new Uint8Array(y.data.buffer)),!0)}I.suppressClick=function(){c.window.addEventListener("click",te,!0),c.window.setTimeout(function(){c.window.removeEventListener("click",te,!0)},0)},I.mousePos=function(f,y){var g=f.getBoundingClientRect();return new c.Point(y.clientX-g.left-f.clientLeft,y.clientY-g.top-f.clientTop)},I.touchPos=function(f,y){for(var g=f.getBoundingClientRect(),w=[],P=0;P<y.length;P++)w.push(new c.Point(y[P].clientX-g.left-f.clientLeft,y[P].clientY-g.top-f.clientTop));return w},I.mouseButton=function(f){return c.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&c.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},I.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};var oe=function(f){function y(){f.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.isLoaded=function(){return this.loaded},y.prototype.setLoaded=function(g){if(this.loaded!==g&&(this.loaded=g,g)){for(var w=0,P=this.requestors;w<P.length;w+=1){var F=P[w];this._notify(F.ids,F.callback)}this.requestors=[]}},y.prototype.getImage=function(g){return this.images[g]},y.prototype.addImage=function(g,w){this._validate(g,w)&&(this.images[g]=w)},y.prototype._validate=function(g,w){var P=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new c.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchX" value'))),P=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new c.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchY" value'))),P=!1),this._validateContent(w.content,w)||(this.fire(new c.ErrorEvent(new Error('Image "'+g+'" has invalid "content" value'))),P=!1),P},y.prototype._validateStretch=function(g,w){if(!g)return!0;for(var P=0,F=0,N=g;F<N.length;F+=1){var H=N[F];if(H[0]<P||H[1]<H[0]||w<H[1])return!1;P=H[1]}return!0},y.prototype._validateContent=function(g,w){return!(g&&(g.length!==4||g[0]<0||w.data.width<g[0]||g[1]<0||w.data.height<g[1]||g[2]<0||w.data.width<g[2]||g[3]<0||w.data.height<g[3]||g[2]<g[0]||g[3]<g[1]))},y.prototype.updateImage=function(g,w){w.version=this.images[g].version+1,this.images[g]=w,this.updatedImages[g]=!0},y.prototype.removeImage=function(g){var w=this.images[g];delete this.images[g],delete this.patterns[g],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},y.prototype.listImages=function(){return Object.keys(this.images)},y.prototype.getImages=function(g,w){var P=!0;if(!this.isLoaded())for(var F=0,N=g;F<N.length;F+=1)this.images[N[F]]||(P=!1);this.isLoaded()||P?this._notify(g,w):this.requestors.push({ids:g,callback:w})},y.prototype._notify=function(g,w){for(var P={},F=0,N=g;F<N.length;F+=1){var H=N[F];this.images[H]||this.fire(new c.Event("styleimagemissing",{id:H}));var Q=this.images[H];Q?P[H]={data:Q.data.clone(),pixelRatio:Q.pixelRatio,sdf:Q.sdf,version:Q.version,stretchX:Q.stretchX,stretchY:Q.stretchY,content:Q.content,hasRenderCallback:Boolean(Q.userImage&&Q.userImage.render)}:c.warnOnce('Image "'+H+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,P)},y.prototype.getPixelSize=function(){var g=this.atlasImage;return{width:g.width,height:g.height}},y.prototype.getPattern=function(g){var w=this.patterns[g],P=this.getImage(g);if(!P)return null;if(w&&w.position.version===P.version)return w.position;if(w)w.position.version=P.version;else{var F={w:P.data.width+2,h:P.data.height+2,x:0,y:0},N=new c.ImagePosition(F,P);this.patterns[g]={bin:F,position:N}}return this._updatePatternAtlas(),this.patterns[g].position},y.prototype.bind=function(g){var w=g.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.Texture(g,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},y.prototype._updatePatternAtlas=function(){var g=[];for(var w in this.patterns)g.push(this.patterns[w].bin);var P=c.potpack(g),F=P.w,N=P.h,H=this.atlasImage;for(var Q in H.resize({width:F||1,height:N||1}),this.patterns){var ae=this.patterns[Q].bin,_e=ae.x+1,xe=ae.y+1,Ee=this.images[Q].data,Fe=Ee.width,Oe=Ee.height;c.RGBAImage.copy(Ee,H,{x:0,y:0},{x:_e,y:xe},{width:Fe,height:Oe}),c.RGBAImage.copy(Ee,H,{x:0,y:Oe-1},{x:_e,y:xe-1},{width:Fe,height:1}),c.RGBAImage.copy(Ee,H,{x:0,y:0},{x:_e,y:xe+Oe},{width:Fe,height:1}),c.RGBAImage.copy(Ee,H,{x:Fe-1,y:0},{x:_e-1,y:xe},{width:1,height:Oe}),c.RGBAImage.copy(Ee,H,{x:0,y:0},{x:_e+Fe,y:xe},{width:1,height:Oe})}this.dirty=!0},y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},y.prototype.dispatchRenderCallbacks=function(g){for(var w=0,P=g;w<P.length;w+=1){var F=P[w];if(!this.callbackDispatchedThisFrame[F]){this.callbackDispatchedThisFrame[F]=!0;var N=this.images[F];de(N)&&this.updateImage(F,N)}}},y}(c.Evented),be=De,qe=De,Ne=1e20;function De(f,y,g,w,P,F){this.fontSize=f||24,this.buffer=y===void 0?3:y,this.cutoff=w||.25,this.fontFamily=P||"sans-serif",this.fontWeight=F||"normal",this.radius=g||8;var N=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=N,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.d=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Int16Array(N),this.middle=Math.round(N/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function fe(f,y,g,w,P,F,N){for(var H=0;H<y;H++){for(var Q=0;Q<g;Q++)w[Q]=f[Q*y+H];for(ct(w,P,F,N,g),Q=0;Q<g;Q++)f[Q*y+H]=P[Q]}for(Q=0;Q<g;Q++){for(H=0;H<y;H++)w[H]=f[Q*y+H];for(ct(w,P,F,N,y),H=0;H<y;H++)f[Q*y+H]=Math.sqrt(P[H])}}function ct(f,y,g,w,P){g[0]=0,w[0]=-Ne,w[1]=+Ne;for(var F=1,N=0;F<P;F++){for(var H=(f[F]+F*F-(f[g[N]]+g[N]*g[N]))/(2*F-2*g[N]);H<=w[N];)N--,H=(f[F]+F*F-(f[g[N]]+g[N]*g[N]))/(2*F-2*g[N]);g[++N]=F,w[N]=H,w[N+1]=+Ne}for(F=0,N=0;F<P;F++){for(;w[N+1]<F;)N++;y[F]=(F-g[N])*(F-g[N])+f[g[N]]}}De.prototype.draw=function(f){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(f,this.buffer,this.middle);for(var y=this.ctx.getImageData(0,0,this.size,this.size),g=new Uint8ClampedArray(this.size*this.size),w=0;w<this.size*this.size;w++){var P=y.data[4*w+3]/255;this.gridOuter[w]=P===1?0:P===0?Ne:Math.pow(Math.max(0,.5-P),2),this.gridInner[w]=P===1?Ne:P===0?0:Math.pow(Math.max(0,P-.5),2)}for(fe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),fe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),w=0;w<this.size*this.size;w++)g[w]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[w]-this.gridInner[w])/this.radius+this.cutoff))));return g},be.default=qe;var st=function(f,y){this.requestManager=f,this.localIdeographFontFamily=y,this.entries={}};st.prototype.setURL=function(f){this.url=f},st.prototype.getGlyphs=function(f,y){var g=this,w=[];for(var P in f)for(var F=0,N=f[P];F<N.length;F+=1)w.push({stack:P,id:N[F]});c.asyncAll(w,function(H,Q){var ae=H.stack,_e=H.id,xe=g.entries[ae];xe||(xe=g.entries[ae]={glyphs:{},requests:{},ranges:{}});var Ee=xe.glyphs[_e];if(Ee===void 0){if(Ee=g._tinySDF(xe,ae,_e))return xe.glyphs[_e]=Ee,void Q(null,{stack:ae,id:_e,glyph:Ee});var Fe=Math.floor(_e/256);if(256*Fe>65535)Q(new Error("glyphs > 65535 not supported"));else if(xe.ranges[Fe])Q(null,{stack:ae,id:_e,glyph:Ee});else{var Oe=xe.requests[Fe];Oe||(Oe=xe.requests[Fe]=[],st.loadGlyphRange(ae,Fe,g.url,g.requestManager,function(Xe,Ce){if(Ce){for(var je in Ce)g._doesCharSupportLocalGlyph(+je)||(xe.glyphs[+je]=Ce[+je]);xe.ranges[Fe]=!0}for(var et=0,pt=Oe;et<pt.length;et+=1)(0,pt[et])(Xe,Ce);delete xe.requests[Fe]})),Oe.push(function(Xe,Ce){Xe?Q(Xe):Ce&&Q(null,{stack:ae,id:_e,glyph:Ce[_e]||null})})}}else Q(null,{stack:ae,id:_e,glyph:Ee})},function(H,Q){if(H)y(H);else if(Q){for(var ae={},_e=0,xe=Q;_e<xe.length;_e+=1){var Ee=xe[_e],Fe=Ee.stack,Oe=Ee.id,Xe=Ee.glyph;(ae[Fe]||(ae[Fe]={}))[Oe]=Xe&&{id:Xe.id,bitmap:Xe.bitmap.clone(),metrics:Xe.metrics}}y(null,ae)}})},st.prototype._doesCharSupportLocalGlyph=function(f){return!!this.localIdeographFontFamily&&(c.isChar["CJK Unified Ideographs"](f)||c.isChar["Hangul Syllables"](f)||c.isChar.Hiragana(f)||c.isChar.Katakana(f))},st.prototype._tinySDF=function(f,y,g){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(g)){var P=f.tinySDF;if(!P){var F="400";/bold/i.test(y)?F="900":/medium/i.test(y)?F="500":/light/i.test(y)&&(F="200"),P=f.tinySDF=new st.TinySDF(24,3,8,.25,w,F)}return{id:g,bitmap:new c.AlphaImage({width:30,height:30},P.draw(String.fromCharCode(g))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},st.loadGlyphRange=function(f,y,g,w,P){var F=256*y,N=F+255,H=w.transformRequest(w.normalizeGlyphsURL(g).replace("{fontstack}",f).replace("{range}",F+"-"+N),c.ResourceType.Glyphs);c.getArrayBuffer(H,function(Q,ae){if(Q)P(Q);else if(ae){for(var _e={},xe=0,Ee=c.parseGlyphPBF(ae);xe<Ee.length;xe+=1){var Fe=Ee[xe];_e[Fe.id]=Fe}P(null,_e)}})},st.TinySDF=be;var Ge=function(){this.specification=c.styleSpec.light.position};Ge.prototype.possiblyEvaluate=function(f,y){return c.sphericalToCartesian(f.expression.evaluate(y))},Ge.prototype.interpolate=function(f,y,g){return{x:c.number(f.x,y.x,g),y:c.number(f.y,y.y,g),z:c.number(f.z,y.z,g)}};var Ue=new c.Properties({anchor:new c.DataConstantProperty(c.styleSpec.light.anchor),position:new Ge,color:new c.DataConstantProperty(c.styleSpec.light.color),intensity:new c.DataConstantProperty(c.styleSpec.light.intensity)}),Rt=function(f){function y(g){f.call(this),this._transitionable=new c.Transitionable(Ue),this.setLight(g),this._transitioning=this._transitionable.untransitioned()}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getLight=function(){return this._transitionable.serialize()},y.prototype.setLight=function(g,w){if(w===void 0&&(w={}),!this._validate(c.validateLight,g,w))for(var P in g){var F=g[P];c.endsWith(P,"-transition")?this._transitionable.setTransition(P.slice(0,-11),F):this._transitionable.setValue(P,F)}},y.prototype.updateTransitions=function(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)},y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},y.prototype.recalculate=function(g){this.properties=this._transitioning.possiblyEvaluate(g)},y.prototype._validate=function(g,w,P){return(!P||P.validate!==!1)&&c.emitValidationErrors(this,g.call(c.validateStyle,c.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:c.styleSpec})))},y}(c.Evented),He=function(f,y){this.width=f,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};He.prototype.getDash=function(f,y){var g=f.join(",")+String(y);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(f,y)),this.dashEntry[g]},He.prototype.getDashRanges=function(f,y,g){var w=[],P=f.length%2==1?-f[f.length-1]*g:0,F=f[0]*g,N=!0;w.push({left:P,right:F,isDash:N,zeroLength:f[0]===0});for(var H=f[0],Q=1;Q<f.length;Q++){var ae=f[Q];w.push({left:P=H*g,right:F=(H+=ae)*g,isDash:N=!N,zeroLength:ae===0})}return w},He.prototype.addRoundDash=function(f,y,g){for(var w=y/2,P=-g;P<=g;P++)for(var F=this.width*(this.nextRow+g+P),N=0,H=f[N],Q=0;Q<this.width;Q++){Q/H.right>1&&(H=f[++N]);var ae=Math.abs(Q-H.left),_e=Math.abs(Q-H.right),xe=Math.min(ae,_e),Ee=void 0,Fe=P/g*(w+1);if(H.isDash){var Oe=w-Math.abs(Fe);Ee=Math.sqrt(xe*xe+Oe*Oe)}else Ee=w-Math.sqrt(xe*xe+Fe*Fe);this.data[F+Q]=Math.max(0,Math.min(255,Ee+128))}},He.prototype.addRegularDash=function(f){for(var y=f.length-1;y>=0;--y){var g=f[y],w=f[y+1];g.zeroLength?f.splice(y,1):w&&w.isDash===g.isDash&&(w.left=g.left,f.splice(y,1))}var P=f[0],F=f[f.length-1];P.isDash===F.isDash&&(P.left=F.left-this.width,F.right=P.right+this.width);for(var N=this.width*this.nextRow,H=0,Q=f[H],ae=0;ae<this.width;ae++){ae/Q.right>1&&(Q=f[++H]);var _e=Math.abs(ae-Q.left),xe=Math.abs(ae-Q.right),Ee=Math.min(_e,xe);this.data[N+ae]=Math.max(0,Math.min(255,(Q.isDash?Ee:-Ee)+128))}},He.prototype.addDash=function(f,y){var g=y?7:0,w=2*g+1;if(this.nextRow+w>this.height)return c.warnOnce("LineAtlas out of space"),null;for(var P=0,F=0;F<f.length;F++)P+=f[F];if(P!==0){var N=this.width/P,H=this.getDashRanges(f,this.width,N);y?this.addRoundDash(H,N,g):this.addRegularDash(H)}var Q={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:P};return this.nextRow+=w,this.dirty=!0,Q},He.prototype.bind=function(f){var y=f.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))};var Mt=function f(y,g){this.workerPool=y,this.actors=[],this.currentActor=0,this.id=c.uniqueId();for(var w=this.workerPool.acquire(this.id),P=0;P<w.length;P++){var F=new f.Actor(w[P],g,this.id);F.name="Worker "+P,this.actors.push(F)}};function li(f,y,g){var w=function(P,F){if(P)return g(P);if(F){var N=c.pick(c.extend(F,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);F.vector_layers&&(N.vectorLayers=F.vector_layers,N.vectorLayerIds=N.vectorLayers.map(function(H){return H.id})),N.tiles=y.canonicalizeTileset(N,f.url),g(null,N)}};return f.url?c.getJSON(y.transformRequest(y.normalizeSourceURL(f.url),c.ResourceType.Source),w):c.browser.frame(function(){return w(null,f)})}Mt.prototype.broadcast=function(f,y,g){c.asyncAll(this.actors,function(w,P){w.send(f,y,P)},g=g||function(){})},Mt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Mt.prototype.remove=function(){this.actors.forEach(function(f){f.remove()}),this.actors=[],this.workerPool.release(this.id)},Mt.Actor=c.Actor;var Et=function(f,y,g){this.bounds=c.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=y||0,this.maxzoom=g||24};Et.prototype.validateBounds=function(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]},Et.prototype.contains=function(f){var y=Math.pow(2,f.z),g=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*y),w=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*y),P=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*y),F=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*y);return f.x>=g&&f.x<P&&f.y>=w&&f.y<F};var Gt=function(f){function y(g,w,P,F){if(f.call(this),this.id=g,this.dispatcher=P,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(w,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},w),this._collectResourceTiming=w.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(F)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,function(w,P){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new c.ErrorEvent(w)):P&&(c.extend(g,P),P.bounds&&(g.tileBounds=new Et(P.bounds,g.minzoom,g.maxzoom)),c.postTurnstileEvent(P.tiles,g.map._requestManager._customAccessToken),c.postMapLoadEvent(P.tiles,g.map._getMapId(),g.map._requestManager._skuToken,g.map._requestManager._customAccessToken),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},y.prototype.loaded=function(){return this._loaded},y.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setSourceProperty=function(g){this._tileJSONRequest&&this._tileJSONRequest.cancel(),g(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},y.prototype.setTiles=function(g){var w=this;return this.setSourceProperty(function(){w._options.tiles=g}),this},y.prototype.setUrl=function(g){var w=this;return this.setSourceProperty(function(){w.url=g,w._options.url=g}),this},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return c.extend({},this._options)},y.prototype.loadTile=function(g,w){var P=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),F={request:this.map._requestManager.transformRequest(P,c.ResourceType.Tile),uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function N(H,Q){return delete g.request,g.aborted?w(null):H&&H.status!==404?w(H):(Q&&Q.resourceTiming&&(g.resourceTiming=Q.resourceTiming),this.map._refreshExpiredTiles&&Q&&g.setExpiryData(Q),g.loadVectorData(Q,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),w(null),void(g.reloadCallback&&(this.loadTile(g,g.reloadCallback),g.reloadCallback=null)))}F.request.collectResourceTiming=this._collectResourceTiming,g.actor&&g.state!=="expired"?g.state==="loading"?g.reloadCallback=w:g.request=g.actor.send("reloadTile",F,N.bind(this)):(g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",F,N.bind(this)))},y.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.actor&&g.actor.send("abortTile",{uid:g.uid,type:this.type,source:this.id},void 0)},y.prototype.unloadTile=function(g){g.unloadVectorData(),g.actor&&g.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id},void 0)},y.prototype.hasTransition=function(){return!1},y}(c.Evented),Ye=function(f){function y(g,w,P,F){f.call(this),this.id=g,this.dispatcher=P,this.setEventedParent(F),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},w),c.extend(this,c.pick(w,["url","scheme","tileSize"]))}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,function(w,P){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new c.ErrorEvent(w)):P&&(c.extend(g,P),P.bounds&&(g.tileBounds=new Et(P.bounds,g.minzoom,g.maxzoom)),c.postTurnstileEvent(P.tiles),c.postMapLoadEvent(P.tiles,g.map._getMapId(),g.map._requestManager._skuToken),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},y.prototype.loaded=function(){return this._loaded},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return c.extend({},this._options)},y.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},y.prototype.loadTile=function(g,w){var P=this,F=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);g.request=c.getImage(this.map._requestManager.transformRequest(F,c.ResourceType.Tile),function(N,H){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(N)g.state="errored",w(N);else if(H){P.map._refreshExpiredTiles&&g.setExpiryData(H),delete H.cacheControl,delete H.expires;var Q=P.map.painter.context,ae=Q.gl;g.texture=P.map.painter.getTileTexture(H.width),g.texture?g.texture.update(H,{useMipmap:!0}):(g.texture=new c.Texture(Q,H,ae.RGBA,{useMipmap:!0}),g.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),Q.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax)),g.state="loaded",c.cacheEntryPossiblyAdded(P.dispatcher),w(null)}})},y.prototype.abortTile=function(g,w){g.request&&(g.request.cancel(),delete g.request),w()},y.prototype.unloadTile=function(g,w){g.texture&&this.map.painter.saveTileTexture(g.texture),w()},y.prototype.hasTransition=function(){return!1},y}(c.Evented),wt=function(f){function y(g,w,P,F){f.call(this,g,w,P,F),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},w),this.encoding=w.encoding||"mapbox"}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},y.prototype.loadTile=function(g,w){var P=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function F(N,H){N&&(g.state="errored",w(N)),H&&(g.dem=H,g.needsHillshadePrepare=!0,g.state="loaded",w(null))}g.request=c.getImage(this.map._requestManager.transformRequest(P,c.ResourceType.Tile),function(N,H){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(N)g.state="errored",w(N);else if(H){this.map._refreshExpiredTiles&&g.setExpiryData(H),delete H.cacheControl,delete H.expires;var Q=c.window.ImageBitmap&&H instanceof c.window.ImageBitmap&&c.offscreenCanvasSupported()?H:c.browser.getImageData(H,1),ae={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:Q,encoding:this.encoding};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",ae,F.bind(this)))}}.bind(this)),g.neighboringTiles=this._getNeighboringTiles(g.tileID)},y.prototype._getNeighboringTiles=function(g){var w=g.canonical,P=Math.pow(2,w.z),F=(w.x-1+P)%P,N=w.x===0?g.wrap-1:g.wrap,H=(w.x+1+P)%P,Q=w.x+1===P?g.wrap+1:g.wrap,ae={};return ae[new c.OverscaledTileID(g.overscaledZ,N,w.z,F,w.y).key]={backfilled:!1},ae[new c.OverscaledTileID(g.overscaledZ,Q,w.z,H,w.y).key]={backfilled:!1},w.y>0&&(ae[new c.OverscaledTileID(g.overscaledZ,N,w.z,F,w.y-1).key]={backfilled:!1},ae[new c.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},ae[new c.OverscaledTileID(g.overscaledZ,Q,w.z,H,w.y-1).key]={backfilled:!1}),w.y+1<P&&(ae[new c.OverscaledTileID(g.overscaledZ,N,w.z,F,w.y+1).key]={backfilled:!1},ae[new c.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},ae[new c.OverscaledTileID(g.overscaledZ,Q,w.z,H,w.y+1).key]={backfilled:!1}),ae},y.prototype.unloadTile=function(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded",g.actor&&g.actor.send("removeDEMTile",{uid:g.uid,source:this.id})},y}(Ye),Lt=function(f){function y(g,w,P,F){f.call(this),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=P.getActor(),this.setEventedParent(F),this._data=w.data,this._options=c.extend({},w),this._collectResourceTiming=w.collectResourceTiming,this._resourceTiming=[],w.maxzoom!==void 0&&(this.maxzoom=w.maxzoom),w.type&&(this.type=w.type),w.attribution&&(this.attribution=w.attribution),this.promoteId=w.promoteId;var N=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:w.cluster||!1,geojsonVtOptions:{buffer:(w.buffer!==void 0?w.buffer:128)*N,tolerance:(w.tolerance!==void 0?w.tolerance:.375)*N,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:w.lineMetrics||!1,generateId:w.generateId||!1},superclusterOptions:{maxZoom:w.clusterMaxZoom!==void 0?Math.min(w.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,w.clusterMinPoints||2),extent:c.EXTENT,radius:(w.clusterRadius||50)*N,log:!1,generateId:w.generateId||!1},clusterProperties:w.clusterProperties,filter:w.filter},w.workerOptions)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.load=function(){var g=this;this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w)g.fire(new c.ErrorEvent(w));else{var P={dataType:"source",sourceDataType:"metadata"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(P.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new c.Event("data",P))}})},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setData=function(g){var w=this;return this._data=g,this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(P){if(P)w.fire(new c.ErrorEvent(P));else{var F={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(F.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new c.Event("data",F))}}),this},y.prototype.getClusterExpansionZoom=function(g,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},w),this},y.prototype.getClusterChildren=function(g,w){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},w),this},y.prototype.getClusterLeaves=function(g,w,P,F){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:w,offset:P},F),this},y.prototype._updateWorkerData=function(g){var w=this;this._loaded=!1;var P=c.extend({},this.workerOptions),F=this._data;typeof F=="string"?(P.request=this.map._requestManager.transformRequest(c.browser.resolveURL(F),c.ResourceType.Source),P.request.collectResourceTiming=this._collectResourceTiming):P.data=JSON.stringify(F),this.actor.send(this.type+".loadData",P,function(N,H){w._removed||H&&H.abandoned||(w._loaded=!0,H&&H.resourceTiming&&H.resourceTiming[w.id]&&(w._resourceTiming=H.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:P.source},null),g(N))})},y.prototype.loaded=function(){return this._loaded},y.prototype.loadTile=function(g,w){var P=this,F=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(F,{type:this.type,uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(N,H){return delete g.request,g.unloadVectorData(),g.aborted?w(null):N?w(N):(g.loadVectorData(H,P.map.painter,F==="reloadTile"),w(null))})},y.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0},y.prototype.unloadTile=function(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})},y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},y.prototype.serialize=function(){return c.extend({},this._options,{type:this.type,data:this._data})},y.prototype.hasTransition=function(){return!1},y}(c.Evented),ni=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Xt=function(f){function y(g,w,P,F){f.call(this),this.id=g,this.dispatcher=P,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(F),this.options=w}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.load=function(g,w){var P=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),function(F,N){P._loaded=!0,F?P.fire(new c.ErrorEvent(F)):N&&(P.image=N,g&&(P.coordinates=g),w&&w(),P._finishLoading())})},y.prototype.loaded=function(){return this._loaded},y.prototype.updateImage=function(g){var w=this;return this.image&&g.url?(this.options.url=g.url,this.load(g.coordinates,function(){w.texture=null}),this):this},y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setCoordinates=function(g){var w=this;this.coordinates=g;var P=g.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(N){for(var H=1/0,Q=1/0,ae=-1/0,_e=-1/0,xe=0,Ee=N;xe<Ee.length;xe+=1){var Fe=Ee[xe];H=Math.min(H,Fe.x),Q=Math.min(Q,Fe.y),ae=Math.max(ae,Fe.x),_e=Math.max(_e,Fe.y)}var Oe=Math.max(ae-H,_e-Q),Xe=Math.max(0,Math.floor(-Math.log(Oe)/Math.LN2)),Ce=Math.pow(2,Xe);return new c.CanonicalTileID(Xe,Math.floor((H+ae)/2*Ce),Math.floor((Q+_e)/2*Ce))}(P),this.minzoom=this.maxzoom=this.tileID.z;var F=P.map(function(N){return w.tileID.getTilePoint(N)._round()});return this._boundsArray=new c.StructArrayLayout4i8,this._boundsArray.emplaceBack(F[0].x,F[0].y,0,0),this._boundsArray.emplaceBack(F[1].x,F[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(F[3].x,F[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(F[2].x,F[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this},y.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var g=this.map.painter.context,w=g.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new c.Texture(g,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[P];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},y.prototype.loadTile=function(g,w){this.tileID&&this.tileID.equals(g.tileID.canonical)?(this.tiles[String(g.tileID.wrap)]=g,g.buckets={},w(null)):(g.state="errored",w(null))},y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return!1},y}(c.Evented),Ki=function(f){function y(g,w,P,F){f.call(this,g,w,P,F),this.roundZoom=!0,this.type="video",this.options=w}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1;var w=this.options;this.urls=[];for(var P=0,F=w.urls;P<F.length;P+=1)this.urls.push(this.map._requestManager.transformRequest(F[P],c.ResourceType.Source).url);c.getVideo(this.urls,function(N,H){g._loaded=!0,N?g.fire(new c.ErrorEvent(N)):H&&(g.video=H,g.video.loop=!0,g.video.addEventListener("playing",function(){g.map.triggerRepaint()}),g.map&&g.video.play(),g._finishLoading())})},y.prototype.pause=function(){this.video&&this.video.pause()},y.prototype.play=function(){this.video&&this.video.play()},y.prototype.seek=function(g){if(this.video){var w=this.video.seekable;g<w.start(0)||g>w.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=g}},y.prototype.getVideo=function(){return this.video},y.prototype.onAdd=function(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var g=this.map.painter.context,w=g.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new c.Texture(g,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[P];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this.video&&!this.video.paused},y}(Xt),ei=function(f){function y(g,w,P,F){f.call(this,g,w,P,F),w.coordinates?Array.isArray(w.coordinates)&&w.coordinates.length===4&&!w.coordinates.some(function(N){return!Array.isArray(N)||N.length!==2||N.some(function(H){return typeof H!="number"})})||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'missing required property "coordinates"'))),w.animate&&typeof w.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'optional "animate" property must be a boolean value'))),w.canvas?typeof w.canvas=="string"||w.canvas instanceof c.window.HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'missing required property "canvas"'))),this.options=w,this.animate=w.animate===void 0||w.animate}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof c.window.HTMLCanvasElement?this.options.canvas:c.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},y.prototype.getCanvas=function(){return this.canvas},y.prototype.onAdd=function(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()},y.prototype.onRemove=function(){this.pause()},y.prototype.prepare=function(){var g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var w=this.map.painter.context,P=w.gl;for(var F in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.Texture(w,this.canvas,P.RGBA,{premultiply:!0}),this.tiles){var N=this.tiles[F];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this._playing},y.prototype._hasInvalidDimensions=function(){for(var g=0,w=[this.canvas.width,this.canvas.height];g<w.length;g+=1){var P=w[g];if(isNaN(P)||P<=0)return!0}return!1},y}(Xt),Jt={vector:Gt,raster:Ye,"raster-dem":wt,geojson:Lt,video:Ki,image:Xt,canvas:ei};function xi(f,y){var g=c.identity([]);return c.translate(g,g,[1,1,0]),c.scale(g,g,[.5*f.width,.5*f.height,1]),c.multiply(g,g,f.calculatePosMatrix(y.toUnwrapped()))}function ai(f,y,g,w,P,F){var N=function(Xe,Ce,je){if(Xe)for(var et=0,pt=Xe;et<pt.length;et+=1){var xt=Ce[pt[et]];if(xt&&xt.source===je&&xt.type==="fill-extrusion")return!0}else for(var Tt in Ce){var kt=Ce[Tt];if(kt.source===je&&kt.type==="fill-extrusion")return!0}return!1}(P&&P.layers,y,f.id),H=F.maxPitchScaleFactor(),Q=f.tilesIn(w,H,N);Q.sort(dt);for(var ae=[],_e=0,xe=Q;_e<xe.length;_e+=1){var Ee=xe[_e];ae.push({wrappedTileID:Ee.tileID.wrapped().key,queryResults:Ee.tile.queryRenderedFeatures(y,g,f._state,Ee.queryGeometry,Ee.cameraQueryGeometry,Ee.scale,P,F,H,xi(f.transform,Ee.tileID))})}var Fe=function(Xe){for(var Ce={},je={},et=0,pt=Xe;et<pt.length;et+=1){var xt=pt[et],Tt=xt.queryResults,kt=xt.wrappedTileID,Ht=je[kt]=je[kt]||{};for(var oi in Tt)for(var ri=Tt[oi],Ti=Ht[oi]=Ht[oi]||{},Zi=Ce[oi]=Ce[oi]||[],$i=0,Hi=ri;$i<Hi.length;$i+=1){var Xn=Hi[$i];Ti[Xn.featureIndex]||(Ti[Xn.featureIndex]=!0,Zi.push(Xn))}}return Ce}(ae);for(var Oe in Fe)Fe[Oe].forEach(function(Xe){var Ce=Xe.feature,je=f.getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=je});return Fe}function dt(f,y){var g=f.tileID,w=y.tileID;return g.overscaledZ-w.overscaledZ||g.canonical.y-w.canonical.y||g.wrap-w.wrap||g.canonical.x-w.canonical.x}var It=function(f,y){this.max=f,this.onRemove=y,this.reset()};It.prototype.reset=function(){for(var f in this.data)for(var y=0,g=this.data[f];y<g.length;y+=1){var w=g[y];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},It.prototype.add=function(f,y,g){var w=this,P=f.wrapped().key;this.data[P]===void 0&&(this.data[P]=[]);var F={value:y,timeout:void 0};if(g!==void 0&&(F.timeout=setTimeout(function(){w.remove(f,F)},g)),this.data[P].push(F),this.order.push(P),this.order.length>this.max){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},It.prototype.has=function(f){return f.wrapped().key in this.data},It.prototype.getAndRemove=function(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null},It.prototype._getAndRemoveByKey=function(f){var y=this.data[f].shift();return y.timeout&&clearTimeout(y.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),y.value},It.prototype.getByKey=function(f){var y=this.data[f];return y?y[0].value:null},It.prototype.get=function(f){return this.has(f)?this.data[f.wrapped().key][0].value:null},It.prototype.remove=function(f,y){if(!this.has(f))return this;var g=f.wrapped().key,w=y===void 0?0:this.data[g].indexOf(y),P=this.data[g][w];return this.data[g].splice(w,1),P.timeout&&clearTimeout(P.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(P.value),this.order.splice(this.order.indexOf(g),1),this},It.prototype.setMaxSize=function(f){for(this.max=f;this.order.length>this.max;){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},It.prototype.filter=function(f){var y=[];for(var g in this.data)for(var w=0,P=this.data[g];w<P.length;w+=1){var F=P[w];f(F.value)||y.push(F)}for(var N=0,H=y;N<H.length;N+=1){var Q=H[N];this.remove(Q.value.tileID,Q)}};var St=function(f,y,g){this.context=f;var w=f.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};St.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},St.prototype.updateData=function(f){var y=this.context.gl;this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)},St.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Qt=function(f,y,g,w){this.length=y.length,this.attributes=g,this.itemSize=y.bytesPerElement,this.dynamicDraw=w,this.context=f;var P=f.gl;this.buffer=P.createBuffer(),f.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};Qt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Qt.prototype.updateData=function(f){var y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,f.arrayBuffer)},Qt.prototype.enableAttributes=function(f,y){for(var g=0;g<this.attributes.length;g++){var w=y.attributes[this.attributes[g].name];w!==void 0&&f.enableVertexAttribArray(w)}},Qt.prototype.setVertexAttribPointers=function(f,y,g){for(var w=0;w<this.attributes.length;w++){var P=this.attributes[w],F=y.attributes[P.name];F!==void 0&&f.vertexAttribPointer(F,P.components,f[Yi[P.type]],!1,this.itemSize,P.offset+this.itemSize*(g||0))}},Qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var gt=function(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};gt.prototype.get=function(){return this.current},gt.prototype.set=function(f){},gt.prototype.getDefault=function(){return this.default},gt.prototype.setDefault=function(){this.set(this.default)};var Oi=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return c.Color.transparent},y.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.clearColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},y}(gt),ln=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return 1},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearDepth(g),this.current=g,this.dirty=!1)},y}(gt),Cn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return 0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearStencil(g),this.current=g,this.dirty=!1)},y}(gt),Zn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return[!0,!0,!0,!0]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.colorMask(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},y}(gt),Nr=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthMask(g),this.current=g,this.dirty=!1)},y}(gt),Kr=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return 255},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.stencilMask(g),this.current=g,this.dirty=!1)},y}(gt),At=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},y.prototype.set=function(g){var w=this.current;(g.func!==w.func||g.ref!==w.ref||g.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(g.func,g.ref,g.mask),this.current=g,this.dirty=!1)},y}(gt),Ni=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[g.KEEP,g.KEEP,g.KEEP]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(g[0],g[1],g[2]),this.current=g,this.dirty=!1)},y}(gt),jn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=g,this.dirty=!1}},y}(gt),rn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return[0,1]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.depthRange(g[0],g[1]),this.current=g,this.dirty=!1)},y}(gt),$n=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=g,this.dirty=!1}},y}(gt),Ln=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.LESS},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthFunc(g),this.current=g,this.dirty=!1)},y}(gt),zt=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.BLEND):w.disable(w.BLEND),this.current=g,this.dirty=!1}},y}(gt),Ui=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[g.ONE,g.ZERO]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(g[0],g[1]),this.current=g,this.dirty=!1)},y}(gt),Ze=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return c.Color.transparent},y.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.blendColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},y}(gt),Ft=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.FUNC_ADD},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.blendEquation(g),this.current=g,this.dirty=!1)},y}(gt),Ji=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=g,this.dirty=!1}},y}(gt),Gn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.BACK},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.cullFace(g),this.current=g,this.dirty=!1)},y}(gt),Wn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.CCW},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.frontFace(g),this.current=g,this.dirty=!1)},y}(gt),_o=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)},y}(gt),vo=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.TEXTURE0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.activeTexture(g),this.current=g,this.dirty=!1)},y}(gt),la=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[0,0,g.drawingBufferWidth,g.drawingBufferHeight]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.viewport(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},y}(gt),kr=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,g),this.current=g,this.dirty=!1}},y}(gt),vi=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},y}(gt),Un=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindTexture(w.TEXTURE_2D,g),this.current=g,this.dirty=!1}},y}(gt),In=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,g),this.current=g,this.dirty=!1}},y}(gt),ro=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g),this.current=g,this.dirty=!1},y}(gt),ho=function(f){function y(g){f.call(this,g),this.vao=g.extVertexArrayObject}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){this.vao&&(g!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(g),this.current=g,this.dirty=!1)},y}(gt),yn=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return 4},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,g),this.current=g,this.dirty=!1}},y}(gt),ua=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),this.current=g,this.dirty=!1}},y}(gt),To=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,g),this.current=g,this.dirty=!1}},y}(gt),wr=function(f){function y(g,w){f.call(this,g),this.context=g,this.parent=w}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y}(gt),re=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.setDirty=function(){this.dirty=!0},y.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,g,0),this.current=g,this.dirty=!1}},y}(wr),ce=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},y}(wr),me=function(f,y,g,w){this.context=f,this.width=y,this.height=g;var P=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new re(f,P),w&&(this.depthAttachment=new ce(f,P))};me.prototype.destroy=function(){var f=this.context.gl,y=this.colorAttachment.get();if(y&&f.deleteTexture(y),this.depthAttachment){var g=this.depthAttachment.get();g&&f.deleteRenderbuffer(g)}f.deleteFramebuffer(this.framebuffer)};var Se=function(f,y,g){this.func=f,this.mask=y,this.range=g};Se.ReadOnly=!1,Se.ReadWrite=!0,Se.disabled=new Se(519,Se.ReadOnly,[0,1]);var ze=function(f,y,g,w,P,F){this.test=f,this.ref=y,this.mask=g,this.fail=w,this.depthFail=P,this.pass=F};ze.disabled=new ze({func:519,mask:0},0,0,7680,7680,7680);var $e=function(f,y,g){this.blendFunction=f,this.blendColor=y,this.mask=g};$e.disabled=new $e($e.Replace=[1,0],c.Color.transparent,[!1,!1,!1,!1]),$e.unblended=new $e($e.Replace,c.Color.transparent,[!0,!0,!0,!0]),$e.alphaBlended=new $e([1,771],c.Color.transparent,[!0,!0,!0,!0]);var it=function(f,y,g){this.enable=f,this.mode=y,this.frontFace=g};it.disabled=new it(!1,1029,2305),it.backCCW=new it(!0,1029,2305);var Ie=function(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Oi(this),this.clearDepth=new ln(this),this.clearStencil=new Cn(this),this.colorMask=new Zn(this),this.depthMask=new Nr(this),this.stencilMask=new Kr(this),this.stencilFunc=new At(this),this.stencilOp=new Ni(this),this.stencilTest=new jn(this),this.depthRange=new rn(this),this.depthTest=new $n(this),this.depthFunc=new Ln(this),this.blend=new zt(this),this.blendFunc=new Ui(this),this.blendColor=new Ze(this),this.blendEquation=new Ft(this),this.cullFace=new Ji(this),this.cullFaceSide=new Gn(this),this.frontFace=new Wn(this),this.program=new _o(this),this.activeTexture=new vo(this),this.viewport=new la(this),this.bindFramebuffer=new kr(this),this.bindRenderbuffer=new vi(this),this.bindTexture=new Un(this),this.bindVertexBuffer=new In(this),this.bindElementBuffer=new ro(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ho(this),this.pixelStoreUnpack=new yn(this),this.pixelStoreUnpackPremultiplyAlpha=new ua(this),this.pixelStoreUnpackFlipY=new To(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)};Ie.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ie.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ie.prototype.createIndexBuffer=function(f,y){return new St(this,f,y)},Ie.prototype.createVertexBuffer=function(f,y,g){return new Qt(this,f,y,g)},Ie.prototype.createRenderbuffer=function(f,y,g){var w=this.gl,P=w.createRenderbuffer();return this.bindRenderbuffer.set(P),w.renderbufferStorage(w.RENDERBUFFER,f,y,g),this.bindRenderbuffer.set(null),P},Ie.prototype.createFramebuffer=function(f,y,g){return new me(this,f,y,g)},Ie.prototype.clear=function(f){var y=f.color,g=f.depth,w=this.gl,P=0;y&&(P|=w.COLOR_BUFFER_BIT,this.clearColor.set(y),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(P|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),w.clear(P)},Ie.prototype.setCullFace=function(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))},Ie.prototype.setDepthMode=function(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)},Ie.prototype.setStencilMode=function(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)},Ie.prototype.setColorMode=function(f){c.deepEqual(f.blendFunction,$e.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)},Ie.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ve=function(f){function y(g,w,P){var F=this;f.call(this),this.id=g,this.dispatcher=P,this.on("data",function(N){N.dataType==="source"&&N.sourceDataType==="metadata"&&(F._sourceLoaded=!0),F._sourceLoaded&&!F._paused&&N.dataType==="source"&&N.sourceDataType==="content"&&(F.reload(),F.transform&&F.update(F.transform))}),this.on("error",function(){F._sourceErrored=!0}),this._source=function(N,H,Q,ae){var _e=new Jt[H.type](N,H,Q,ae);if(_e.id!==N)throw new Error("Expected Source id to be "+N+" instead of "+_e.id);return c.bindAll(["load","abort","unload","serialize","prepare"],_e),_e}(g,w,P,this),this._tiles={},this._cache=new It(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new c.SourceFeatureState}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.onAdd=function(g){this.map=g,this._maxTileCacheSize=g?g._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(g)},y.prototype.onRemove=function(g){this._source&&this._source.onRemove&&this._source.onRemove(g)},y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var g in this._tiles){var w=this._tiles[g];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0},y.prototype.getSource=function(){return this._source},y.prototype.pause=function(){this._paused=!0},y.prototype.resume=function(){if(this._paused){var g=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,g&&this.reload(),this.transform&&this.update(this.transform)}},y.prototype._loadTile=function(g,w){return this._source.loadTile(g,w)},y.prototype._unloadTile=function(g){if(this._source.unloadTile)return this._source.unloadTile(g,function(){})},y.prototype._abortTile=function(g){if(this._source.abortTile)return this._source.abortTile(g,function(){})},y.prototype.serialize=function(){return this._source.serialize()},y.prototype.prepare=function(g){for(var w in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var P=this._tiles[w];P.upload(g),P.prepare(this.map.style.imageManager)}},y.prototype.getIds=function(){return c.values(this._tiles).map(function(g){return g.tileID}).sort(mt).map(function(g){return g.key})},y.prototype.getRenderableIds=function(g){var w=this,P=[];for(var F in this._tiles)this._isIdRenderable(F,g)&&P.push(this._tiles[F]);return g?P.sort(function(N,H){var Q=N.tileID,ae=H.tileID,_e=new c.Point(Q.canonical.x,Q.canonical.y)._rotate(w.transform.angle),xe=new c.Point(ae.canonical.x,ae.canonical.y)._rotate(w.transform.angle);return Q.overscaledZ-ae.overscaledZ||xe.y-_e.y||xe.x-_e.x}).map(function(N){return N.tileID.key}):P.map(function(N){return N.tileID}).sort(mt).map(function(N){return N.key})},y.prototype.hasRenderableParent=function(g){var w=this.findLoadedParent(g,0);return!!w&&this._isIdRenderable(w.tileID.key)},y.prototype._isIdRenderable=function(g,w){return this._tiles[g]&&this._tiles[g].hasData()&&!this._coveredTiles[g]&&(w||!this._tiles[g].holdingForFade())},y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var g in this._cache.reset(),this._tiles)this._tiles[g].state!=="errored"&&this._reloadTile(g,"reloading")},y.prototype._reloadTile=function(g,w){var P=this._tiles[g];P&&(P.state!=="loading"&&(P.state=w),this._loadTile(P,this._tileLoaded.bind(this,P,g,w)))},y.prototype._tileLoaded=function(g,w,P,F){if(F)return g.state="errored",void(F.status!==404?this._source.fire(new c.ErrorEvent(F,{tile:g})):this.update(this.transform));g.timeAdded=c.browser.now(),P==="expired"&&(g.refreshedUponExpiration=!0),this._setTileReloadTimer(w,g),this.getSource().type==="raster-dem"&&g.dem&&this._backfillDEM(g),this._state.initializeTileState(g,this.map?this.map.painter:null),this._source.fire(new c.Event("data",{dataType:"source",tile:g,coord:g.tileID}))},y.prototype._backfillDEM=function(g){for(var w=this.getRenderableIds(),P=0;P<w.length;P++){var F=w[P];if(g.neighboringTiles&&g.neighboringTiles[F]){var N=this.getTileByID(F);H(g,N),H(N,g)}}function H(Q,ae){Q.needsHillshadePrepare=!0;var _e=ae.tileID.canonical.x-Q.tileID.canonical.x,xe=ae.tileID.canonical.y-Q.tileID.canonical.y,Ee=Math.pow(2,Q.tileID.canonical.z),Fe=ae.tileID.key;_e===0&&xe===0||Math.abs(xe)>1||(Math.abs(_e)>1&&(Math.abs(_e+Ee)===1?_e+=Ee:Math.abs(_e-Ee)===1&&(_e-=Ee)),ae.dem&&Q.dem&&(Q.dem.backfillBorder(ae.dem,_e,xe),Q.neighboringTiles&&Q.neighboringTiles[Fe]&&(Q.neighboringTiles[Fe].backfilled=!0)))}},y.prototype.getTile=function(g){return this.getTileByID(g.key)},y.prototype.getTileByID=function(g){return this._tiles[g]},y.prototype._retainLoadedChildren=function(g,w,P,F){for(var N in this._tiles){var H=this._tiles[N];if(!(F[N]||!H.hasData()||H.tileID.overscaledZ<=w||H.tileID.overscaledZ>P)){for(var Q=H.tileID;H&&H.tileID.overscaledZ>w+1;){var ae=H.tileID.scaledTo(H.tileID.overscaledZ-1);(H=this._tiles[ae.key])&&H.hasData()&&(Q=ae)}for(var _e=Q;_e.overscaledZ>w;)if(g[(_e=_e.scaledTo(_e.overscaledZ-1)).key]){F[Q.key]=Q;break}}}},y.prototype.findLoadedParent=function(g,w){if(g.key in this._loadedParentTiles){var P=this._loadedParentTiles[g.key];return P&&P.tileID.overscaledZ>=w?P:null}for(var F=g.overscaledZ-1;F>=w;F--){var N=g.scaledTo(F),H=this._getLoadedTile(N);if(H)return H}},y.prototype._getLoadedTile=function(g){var w=this._tiles[g.key];return w&&w.hasData()?w:this._cache.getByKey(g.wrapped().key)},y.prototype.updateCacheSize=function(g){var w=Math.ceil(g.width/this._source.tileSize)+1,P=Math.ceil(g.height/this._source.tileSize)+1,F=Math.floor(w*P*5),N=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(N)},y.prototype.handleWrapJump=function(g){var w=Math.round((g-(this._prevLng===void 0?g:this._prevLng))/360);if(this._prevLng=g,w){var P={};for(var F in this._tiles){var N=this._tiles[F];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+w),P[N.tileID.key]=N}for(var H in this._tiles=P,this._timers)clearTimeout(this._timers[H]),delete this._timers[H];for(var Q in this._tiles)this._setTileReloadTimer(Q,this._tiles[Q])}},y.prototype.update=function(g){var w=this;if(this.transform=g,this._sourceLoaded&&!this._paused){var P;this.updateCacheSize(g),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?P=g.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ht){return new c.OverscaledTileID(Ht.canonical.z,Ht.wrap,Ht.canonical.z,Ht.canonical.x,Ht.canonical.y)}):(P=g.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(P=P.filter(function(Ht){return w._source.hasTile(Ht)}))):P=[];var F=g.coveringZoomLevel(this._source),N=Math.max(F-y.maxOverzooming,this._source.minzoom),H=Math.max(F+y.maxUnderzooming,this._source.minzoom),Q=this._updateRetainedTiles(P,F);if(he(this._source.type)){for(var ae={},_e={},xe=0,Ee=Object.keys(Q);xe<Ee.length;xe+=1){var Fe=Ee[xe],Oe=Q[Fe],Xe=this._tiles[Fe];if(Xe&&!(Xe.fadeEndTime&&Xe.fadeEndTime<=c.browser.now())){var Ce=this.findLoadedParent(Oe,N);Ce&&(this._addTile(Ce.tileID),ae[Ce.tileID.key]=Ce.tileID),_e[Fe]=Oe}}for(var je in this._retainLoadedChildren(_e,F,H,Q),ae)Q[je]||(this._coveredTiles[je]=!0,Q[je]=ae[je])}for(var et in Q)this._tiles[et].clearFadeHold();for(var pt=0,xt=c.keysDifference(this._tiles,Q);pt<xt.length;pt+=1){var Tt=xt[pt],kt=this._tiles[Tt];kt.hasSymbolBuckets&&!kt.holdingForFade()?kt.setHoldDuration(this.map._fadeDuration):kt.hasSymbolBuckets&&!kt.symbolFadeFinished()||this._removeTile(Tt)}this._updateLoadedParentTileCache()}},y.prototype.releaseSymbolFadeTiles=function(){for(var g in this._tiles)this._tiles[g].holdingForFade()&&this._removeTile(g)},y.prototype._updateRetainedTiles=function(g,w){for(var P={},F={},N=Math.max(w-y.maxOverzooming,this._source.minzoom),H=Math.max(w+y.maxUnderzooming,this._source.minzoom),Q={},ae=0,_e=g;ae<_e.length;ae+=1){var xe=_e[ae],Ee=this._addTile(xe);P[xe.key]=xe,Ee.hasData()||w<this._source.maxzoom&&(Q[xe.key]=xe)}this._retainLoadedChildren(Q,w,H,P);for(var Fe=0,Oe=g;Fe<Oe.length;Fe+=1){var Xe=Oe[Fe],Ce=this._tiles[Xe.key];if(!Ce.hasData()){if(w+1>this._source.maxzoom){var je=Xe.children(this._source.maxzoom)[0],et=this.getTile(je);if(et&&et.hasData()){P[je.key]=je;continue}}else{var pt=Xe.children(this._source.maxzoom);if(P[pt[0].key]&&P[pt[1].key]&&P[pt[2].key]&&P[pt[3].key])continue}for(var xt=Ce.wasRequested(),Tt=Xe.overscaledZ-1;Tt>=N;--Tt){var kt=Xe.scaledTo(Tt);if(F[kt.key]||(F[kt.key]=!0,!(Ce=this.getTile(kt))&&xt&&(Ce=this._addTile(kt)),Ce&&(P[kt.key]=kt,xt=Ce.wasRequested(),Ce.hasData())))break}}}return P},y.prototype._updateLoadedParentTileCache=function(){for(var g in this._loadedParentTiles={},this._tiles){for(var w=[],P=void 0,F=this._tiles[g].tileID;F.overscaledZ>0;){if(F.key in this._loadedParentTiles){P=this._loadedParentTiles[F.key];break}w.push(F.key);var N=F.scaledTo(F.overscaledZ-1);if(P=this._getLoadedTile(N))break;F=N}for(var H=0,Q=w;H<Q.length;H+=1)this._loadedParentTiles[Q[H]]=P}},y.prototype._addTile=function(g){var w=this._tiles[g.key];if(w)return w;(w=this._cache.getAndRemove(g))&&(this._setTileReloadTimer(g.key,w),w.tileID=g,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[g.key]&&(clearTimeout(this._cacheTimers[g.key]),delete this._cacheTimers[g.key],this._setTileReloadTimer(g.key,w)));var P=Boolean(w);return P||(w=new c.Tile(g,this._source.tileSize*g.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,g.key,w.state))),w?(w.uses++,this._tiles[g.key]=w,P||this._source.fire(new c.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},y.prototype._setTileReloadTimer=function(g,w){var P=this;g in this._timers&&(clearTimeout(this._timers[g]),delete this._timers[g]);var F=w.getExpiryTimeout();F&&(this._timers[g]=setTimeout(function(){P._reloadTile(g,"expired"),delete P._timers[g]},F))},y.prototype._removeTile=function(g){var w=this._tiles[g];w&&(w.uses--,delete this._tiles[g],this._timers[g]&&(clearTimeout(this._timers[g]),delete this._timers[g]),w.uses>0||(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},y.prototype.clearTiles=function(){for(var g in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(g);this._cache.reset()},y.prototype.tilesIn=function(g,w,P){var F=this,N=[],H=this.transform;if(!H)return N;for(var Q=P?H.getCameraQueryGeometry(g):g,ae=g.map(function(Tt){return H.pointCoordinate(Tt)}),_e=Q.map(function(Tt){return H.pointCoordinate(Tt)}),xe=this.getIds(),Ee=1/0,Fe=1/0,Oe=-1/0,Xe=-1/0,Ce=0,je=_e;Ce<je.length;Ce+=1){var et=je[Ce];Ee=Math.min(Ee,et.x),Fe=Math.min(Fe,et.y),Oe=Math.max(Oe,et.x),Xe=Math.max(Xe,et.y)}for(var pt=function(Tt){var kt=F._tiles[xe[Tt]];if(!kt.holdingForFade()){var Ht=kt.tileID,oi=Math.pow(2,H.zoom-kt.tileID.overscaledZ),ri=w*kt.queryPadding*c.EXTENT/kt.tileSize/oi,Ti=[Ht.getTilePoint(new c.MercatorCoordinate(Ee,Fe)),Ht.getTilePoint(new c.MercatorCoordinate(Oe,Xe))];if(Ti[0].x-ri<c.EXTENT&&Ti[0].y-ri<c.EXTENT&&Ti[1].x+ri>=0&&Ti[1].y+ri>=0){var Zi=ae.map(function(Hi){return Ht.getTilePoint(Hi)}),$i=_e.map(function(Hi){return Ht.getTilePoint(Hi)});N.push({tile:kt,tileID:Ht,queryGeometry:Zi,cameraQueryGeometry:$i,scale:oi})}}},xt=0;xt<xe.length;xt++)pt(xt);return N},y.prototype.getVisibleCoordinates=function(g){for(var w=this,P=this.getRenderableIds(g).map(function(Q){return w._tiles[Q].tileID}),F=0,N=P;F<N.length;F+=1){var H=N[F];H.posMatrix=this.transform.calculatePosMatrix(H.toUnwrapped())}return P},y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(he(this._source.type))for(var g in this._tiles){var w=this._tiles[g];if(w.fadeEndTime!==void 0&&w.fadeEndTime>=c.browser.now())return!0}return!1},y.prototype.setFeatureState=function(g,w,P){this._state.updateState(g=g||"_geojsonTileLayer",w,P)},y.prototype.removeFeatureState=function(g,w,P){this._state.removeFeatureState(g=g||"_geojsonTileLayer",w,P)},y.prototype.getFeatureState=function(g,w){return this._state.getState(g=g||"_geojsonTileLayer",w)},y.prototype.setDependencies=function(g,w,P){var F=this._tiles[g];F&&F.setDependencies(w,P)},y.prototype.reloadTilesForDependencies=function(g,w){for(var P in this._tiles)this._tiles[P].hasDependency(g,w)&&this._reloadTile(P,"reloading");this._cache.filter(function(F){return!F.hasDependency(g,w)})},y}(c.Evented);function mt(f,y){var g=Math.abs(2*f.wrap)-+(f.wrap<0),w=Math.abs(2*y.wrap)-+(y.wrap<0);return f.overscaledZ-y.overscaledZ||w-g||y.canonical.y-f.canonical.y||y.canonical.x-f.canonical.x}function he(f){return f==="raster"||f==="image"||f==="video"}function W(){return new c.window.Worker(xn.workerUrl)}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;var X="mapboxgl_preloaded_worker_pool",le=function(){this.active={}};le.prototype.acquire=function(f){if(!this.workers)for(this.workers=[];this.workers.length<le.workerCount;)this.workers.push(new W);return this.active[f]=!0,this.workers.slice()},le.prototype.release=function(f){delete this.active[f],this.numActive()===0&&(this.workers.forEach(function(y){y.terminate()}),this.workers=null)},le.prototype.isPreloaded=function(){return!!this.active[X]},le.prototype.numActive=function(){return Object.keys(this.active).length};var ge,Te=Math.floor(c.browser.hardwareConcurrency/2);function we(){return ge||(ge=new le),ge}function Pe(f,y){var g={};for(var w in f)w!=="ref"&&(g[w]=f[w]);return c.refProperties.forEach(function(P){P in y&&(g[P]=y[P])}),g}function Me(f){f=f.slice();for(var y=Object.create(null),g=0;g<f.length;g++)y[f[g].id]=f[g];for(var w=0;w<f.length;w++)"ref"in f[w]&&(f[w]=Pe(f[w],y[f[w].ref]));return f}le.workerCount=Math.max(Math.min(Te,6),1);var Le={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function yt(f,y,g){g.push({command:Le.addSource,args:[f,y[f]]})}function lt(f,y,g){y.push({command:Le.removeSource,args:[f]}),g[f]=!0}function _t(f,y,g,w){lt(f,g,w),yt(f,y,g)}function si(f,y,g){var w;for(w in f[g])if(f[g].hasOwnProperty(w)&&w!=="data"&&!c.deepEqual(f[g][w],y[g][w]))return!1;for(w in y[g])if(y[g].hasOwnProperty(w)&&w!=="data"&&!c.deepEqual(f[g][w],y[g][w]))return!1;return!0}function Re(f,y,g,w,P,F){var N;for(N in y=y||{},f=f||{})f.hasOwnProperty(N)&&(c.deepEqual(f[N],y[N])||g.push({command:F,args:[w,N,y[N],P]}));for(N in y)y.hasOwnProperty(N)&&!f.hasOwnProperty(N)&&(c.deepEqual(f[N],y[N])||g.push({command:F,args:[w,N,y[N],P]}))}function Yt(f){return f.id}function di(f,y){return f[y.id]=y,f}var kn=function(f,y){this.reset(f,y)};kn.prototype.reset=function(f,y){this.points=f||[],this._distances=[0];for(var g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},kn.prototype.lerp=function(f){if(this.points.length===1)return this.points[0];f=c.clamp(f,0,1);for(var y=1,g=this._distances[y],w=f*this.paddedLength+this.padding;g<w&&y<this._distances.length;)g=this._distances[++y];var P=y-1,F=this._distances[P],N=g-F,H=N>0?(w-F)/N:0;return this.points[P].mult(1-H).add(this.points[y].mult(H))};var Xi=function(f,y,g){var w=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(f/g),this.yCellCount=Math.ceil(y/g);for(var F=0;F<this.xCellCount*this.yCellCount;F++)w.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=y,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0};function nn(f,y,g,w,P){var F=c.create();return y?(c.scale(F,F,[1/P,1/P,1]),g||c.rotateZ(F,F,w.angle)):c.multiply(F,w.labelPlaneMatrix,f),F}function Vi(f,y,g,w,P){if(y){var F=c.clone(f);return c.scale(F,F,[P,P,1]),g||c.rotateZ(F,F,-w.angle),F}return w.glCoordMatrix}function Ii(f,y){var g=[f.x,f.y,0,1];bo(g,g,y);var w=g[3];return{point:new c.Point(g[0]/w,g[1]/w),signedDistanceFromCamera:w}}function dn(f,y){return .5+f/y*.5}function hr(f,y){var g=f[0]/f[3],w=f[1]/f[3];return g>=-y[0]&&g<=y[0]&&w>=-y[1]&&w<=y[1]}function po(f,y,g,w,P,F,N,H){var Q=w?f.textSizeData:f.iconSizeData,ae=c.evaluateSizeForZoom(Q,g.transform.zoom),_e=[256/g.width*2+1,256/g.height*2+1],xe=w?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;xe.clear();for(var Ee=f.lineVertexArray,Fe=w?f.text.placedSymbolArray:f.icon.placedSymbolArray,Oe=g.transform.width/g.transform.height,Xe=!1,Ce=0;Ce<Fe.length;Ce++){var je=Fe.get(Ce);if(je.hidden||je.writingMode===c.WritingMode.vertical&&!Xe)ea(je.numGlyphs,xe);else{Xe=!1;var et=[je.anchorX,je.anchorY,0,1];if(c.transformMat4(et,et,y),hr(et,_e)){var pt=dn(g.transform.cameraToCenterDistance,et[3]),xt=c.evaluateSizeForFeature(Q,ae,je),Tt=N?xt/pt:xt*pt,kt=new c.Point(je.anchorX,je.anchorY),Ht=Ii(kt,P).point,oi={},ri=iu(je,Tt,!1,H,y,P,F,f.glyphOffsetArray,Ee,xe,Ht,kt,oi,Oe);Xe=ri.useVertical,(ri.notEnoughRoom||Xe||ri.needsFlipping&&iu(je,Tt,!0,H,y,P,F,f.glyphOffsetArray,Ee,xe,Ht,kt,oi,Oe).notEnoughRoom)&&ea(je.numGlyphs,xe)}else ea(je.numGlyphs,xe)}}w?f.text.dynamicLayoutVertexBuffer.updateData(xe):f.icon.dynamicLayoutVertexBuffer.updateData(xe)}function fr(f,y,g,w,P,F,N,H,Q,ae,_e){var xe=H.glyphStartIndex+H.numGlyphs,Ee=H.lineStartIndex,Fe=H.lineStartIndex+H.lineLength,Oe=y.getoffsetX(H.glyphStartIndex),Xe=y.getoffsetX(xe-1),Ce=oo(f*Oe,g,w,P,F,N,H.segment,Ee,Fe,Q,ae,_e);if(!Ce)return null;var je=oo(f*Xe,g,w,P,F,N,H.segment,Ee,Fe,Q,ae,_e);return je?{first:Ce,last:je}:null}function Ko(f,y,g,w){return f===c.WritingMode.horizontal&&Math.abs(g.y-y.y)>Math.abs(g.x-y.x)*w?{useVertical:!0}:(f===c.WritingMode.vertical?y.y<g.y:y.x>g.x)?{needsFlipping:!0}:null}function iu(f,y,g,w,P,F,N,H,Q,ae,_e,xe,Ee,Fe){var Oe,Xe=y/24,Ce=f.lineOffsetX*Xe,je=f.lineOffsetY*Xe;if(f.numGlyphs>1){var et=f.glyphStartIndex+f.numGlyphs,pt=f.lineStartIndex,xt=f.lineStartIndex+f.lineLength,Tt=fr(Xe,H,Ce,je,g,_e,xe,f,Q,F,Ee);if(!Tt)return{notEnoughRoom:!0};var kt=Ii(Tt.first.point,N).point,Ht=Ii(Tt.last.point,N).point;if(w&&!g){var oi=Ko(f.writingMode,kt,Ht,Fe);if(oi)return oi}Oe=[Tt.first];for(var ri=f.glyphStartIndex+1;ri<et-1;ri++)Oe.push(oo(Xe*H.getoffsetX(ri),Ce,je,g,_e,xe,f.segment,pt,xt,Q,F,Ee));Oe.push(Tt.last)}else{if(w&&!g){var Ti=Ii(xe,P).point,Zi=f.lineStartIndex+f.segment+1,$i=new c.Point(Q.getx(Zi),Q.gety(Zi)),Hi=Ii($i,P),Xn=Hi.signedDistanceFromCamera>0?Hi.point:Mr(xe,$i,Ti,1,P),Pi=Ko(f.writingMode,Ti,Xn,Fe);if(Pi)return Pi}var _n=oo(Xe*H.getoffsetX(f.glyphStartIndex),Ce,je,g,_e,xe,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,Q,F,Ee);if(!_n)return{notEnoughRoom:!0};Oe=[_n]}for(var Vn=0,hn=Oe;Vn<hn.length;Vn+=1){var an=hn[Vn];c.addDynamicAttributes(ae,an.point,an.angle)}return{}}function Mr(f,y,g,w,P){var F=Ii(f.add(f.sub(y)._unit()),P).point,N=g.sub(F);return g.add(N._mult(w/N.mag()))}function oo(f,y,g,w,P,F,N,H,Q,ae,_e,xe){var Ee=w?f-y:f+y,Fe=Ee>0?1:-1,Oe=0;w&&(Fe*=-1,Oe=Math.PI),Fe<0&&(Oe+=Math.PI);for(var Xe=Fe>0?H+N:H+N+1,Ce=P,je=P,et=0,pt=0,xt=Math.abs(Ee),Tt=[];et+pt<=xt;){if((Xe+=Fe)<H||Xe>=Q)return null;if(je=Ce,Tt.push(Ce),(Ce=xe[Xe])===void 0){var kt=new c.Point(ae.getx(Xe),ae.gety(Xe)),Ht=Ii(kt,_e);if(Ht.signedDistanceFromCamera>0)Ce=xe[Xe]=Ht.point;else{var oi=Xe-Fe;Ce=Mr(et===0?F:new c.Point(ae.getx(oi),ae.gety(oi)),kt,je,xt-et+1,_e)}}et+=pt,pt=je.dist(Ce)}var ri=(xt-et)/pt,Ti=Ce.sub(je),Zi=Ti.mult(ri)._add(je);Zi._add(Ti._unit()._perp()._mult(g*Fe));var $i=Oe+Math.atan2(Ce.y-je.y,Ce.x-je.x);return Tt.push(Zi),{point:Zi,angle:$i,path:Tt}}Xi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Xi.prototype.insert=function(f,y,g,w,P){this._forEachCell(y,g,w,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(y),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(P)},Xi.prototype.insertCircle=function(f,y,g,w){this._forEachCell(y-w,g-w,y+w,g+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(y),this.circles.push(g),this.circles.push(w)},Xi.prototype._insertBoxCell=function(f,y,g,w,P,F){this.boxCells[P].push(F)},Xi.prototype._insertCircleCell=function(f,y,g,w,P,F){this.circleCells[P].push(F)},Xi.prototype._query=function(f,y,g,w,P,F){if(g<0||f>this.width||w<0||y>this.height)return!P&&[];var N=[];if(f<=0&&y<=0&&this.width<=g&&this.height<=w){if(P)return!0;for(var H=0;H<this.boxKeys.length;H++)N.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(var Q=0;Q<this.circleKeys.length;Q++){var ae=this.circles[3*Q],_e=this.circles[3*Q+1],xe=this.circles[3*Q+2];N.push({key:this.circleKeys[Q],x1:ae-xe,y1:_e-xe,x2:ae+xe,y2:_e+xe})}return F?N.filter(F):N}return this._forEachCell(f,y,g,w,this._queryCell,N,{hitTest:P,seenUids:{box:{},circle:{}}},F),P?N.length>0:N},Xi.prototype._queryCircle=function(f,y,g,w,P){var F=f-g,N=f+g,H=y-g,Q=y+g;if(N<0||F>this.width||Q<0||H>this.height)return!w&&[];var ae=[];return this._forEachCell(F,H,N,Q,this._queryCellCircle,ae,{hitTest:w,circle:{x:f,y,radius:g},seenUids:{box:{},circle:{}}},P),w?ae.length>0:ae},Xi.prototype.query=function(f,y,g,w,P){return this._query(f,y,g,w,!1,P)},Xi.prototype.hitTest=function(f,y,g,w,P){return this._query(f,y,g,w,!0,P)},Xi.prototype.hitTestCircle=function(f,y,g,w){return this._queryCircle(f,y,g,!0,w)},Xi.prototype._queryCell=function(f,y,g,w,P,F,N,H){var Q=N.seenUids,ae=this.boxCells[P];if(ae!==null)for(var _e=this.bboxes,xe=0,Ee=ae;xe<Ee.length;xe+=1){var Fe=Ee[xe];if(!Q.box[Fe]){Q.box[Fe]=!0;var Oe=4*Fe;if(f<=_e[Oe+2]&&y<=_e[Oe+3]&&g>=_e[Oe+0]&&w>=_e[Oe+1]&&(!H||H(this.boxKeys[Fe]))){if(N.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[Fe],x1:_e[Oe],y1:_e[Oe+1],x2:_e[Oe+2],y2:_e[Oe+3]})}}}var Xe=this.circleCells[P];if(Xe!==null)for(var Ce=this.circles,je=0,et=Xe;je<et.length;je+=1){var pt=et[je];if(!Q.circle[pt]){Q.circle[pt]=!0;var xt=3*pt;if(this._circleAndRectCollide(Ce[xt],Ce[xt+1],Ce[xt+2],f,y,g,w)&&(!H||H(this.circleKeys[pt]))){if(N.hitTest)return F.push(!0),!0;var Tt=Ce[xt],kt=Ce[xt+1],Ht=Ce[xt+2];F.push({key:this.circleKeys[pt],x1:Tt-Ht,y1:kt-Ht,x2:Tt+Ht,y2:kt+Ht})}}}},Xi.prototype._queryCellCircle=function(f,y,g,w,P,F,N,H){var Q=N.circle,ae=N.seenUids,_e=this.boxCells[P];if(_e!==null)for(var xe=this.bboxes,Ee=0,Fe=_e;Ee<Fe.length;Ee+=1){var Oe=Fe[Ee];if(!ae.box[Oe]){ae.box[Oe]=!0;var Xe=4*Oe;if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,xe[Xe+0],xe[Xe+1],xe[Xe+2],xe[Xe+3])&&(!H||H(this.boxKeys[Oe])))return F.push(!0),!0}}var Ce=this.circleCells[P];if(Ce!==null)for(var je=this.circles,et=0,pt=Ce;et<pt.length;et+=1){var xt=pt[et];if(!ae.circle[xt]){ae.circle[xt]=!0;var Tt=3*xt;if(this._circlesCollide(je[Tt],je[Tt+1],je[Tt+2],Q.x,Q.y,Q.radius)&&(!H||H(this.circleKeys[xt])))return F.push(!0),!0}}},Xi.prototype._forEachCell=function(f,y,g,w,P,F,N,H){for(var Q=this._convertToXCellCoord(f),ae=this._convertToYCellCoord(y),_e=this._convertToXCellCoord(g),xe=this._convertToYCellCoord(w),Ee=Q;Ee<=_e;Ee++)for(var Fe=ae;Fe<=xe;Fe++)if(P.call(this,f,y,g,w,this.xCellCount*Fe+Ee,F,N,H))return},Xi.prototype._convertToXCellCoord=function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))},Xi.prototype._convertToYCellCoord=function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))},Xi.prototype._circlesCollide=function(f,y,g,w,P,F){var N=w-f,H=P-y,Q=g+F;return Q*Q>N*N+H*H},Xi.prototype._circleAndRectCollide=function(f,y,g,w,P,F,N){var H=(F-w)/2,Q=Math.abs(f-(w+H));if(Q>H+g)return!1;var ae=(N-P)/2,_e=Math.abs(y-(P+ae));if(_e>ae+g)return!1;if(Q<=H||_e<=ae)return!0;var xe=Q-H,Ee=_e-ae;return xe*xe+Ee*Ee<=g*g};var sl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ea(f,y){for(var g=0;g<f;g++){var w=y.length;y.resize(w+4),y.float32.set(sl,3*w)}}function bo(f,y,g){var w=y[0],P=y[1];return f[0]=g[0]*w+g[4]*P+g[12],f[1]=g[1]*w+g[5]*P+g[13],f[3]=g[3]*w+g[7]*P+g[15],f}var Pa=function(f,y,g){y===void 0&&(y=new Xi(f.width+200,f.height+200,25)),g===void 0&&(g=new Xi(f.width+200,f.height+200,25)),this.transform=f,this.grid=y,this.ignoredGrid=g,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+100,this.screenBottomBoundary=f.height+100,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200};function Br(f,y,g){return y*(c.EXTENT/(f.tileSize*Math.pow(2,g-f.tileID.overscaledZ)))}Pa.prototype.placeCollisionBox=function(f,y,g,w,P){var F=this.projectAndGetPerspectiveRatio(w,f.anchorPointX,f.anchorPointY),N=g*F.perspectiveRatio,H=f.x1*N+F.point.x,Q=f.y1*N+F.point.y,ae=f.x2*N+F.point.x,_e=f.y2*N+F.point.y;return!this.isInsideGrid(H,Q,ae,_e)||!y&&this.grid.hitTest(H,Q,ae,_e,P)?{box:[],offscreen:!1}:{box:[H,Q,ae,_e],offscreen:this.isOffscreen(H,Q,ae,_e)}},Pa.prototype.placeCollisionCircles=function(f,y,g,w,P,F,N,H,Q,ae,_e,xe,Ee){var Fe=[],Oe=new c.Point(y.anchorX,y.anchorY),Xe=Ii(Oe,F),Ce=dn(this.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),je=(ae?P/Ce:P*Ce)/c.ONE_EM,et=Ii(Oe,N).point,pt=fr(je,w,y.lineOffsetX*je,y.lineOffsetY*je,!1,et,Oe,y,g,N,{}),xt=!1,Tt=!1,kt=!0;if(pt){for(var Ht=.5*xe*Ce+Ee,oi=new c.Point(-100,-100),ri=new c.Point(this.screenRightBoundary,this.screenBottomBoundary),Ti=new kn,Zi=pt.first,$i=pt.last,Hi=[],Xn=Zi.path.length-1;Xn>=1;Xn--)Hi.push(Zi.path[Xn]);for(var Pi=1;Pi<$i.path.length;Pi++)Hi.push($i.path[Pi]);var _n=2.5*Ht;if(H){var Vn=Hi.map(function(Za){return Ii(Za,H)});Hi=Vn.some(function(Za){return Za.signedDistanceFromCamera<=0})?[]:Vn.map(function(Za){return Za.point})}var hn=[];if(Hi.length>0){for(var an=Hi[0].clone(),Sn=Hi[0].clone(),tn=1;tn<Hi.length;tn++)an.x=Math.min(an.x,Hi[tn].x),an.y=Math.min(an.y,Hi[tn].y),Sn.x=Math.max(Sn.x,Hi[tn].x),Sn.y=Math.max(Sn.y,Hi[tn].y);hn=an.x>=oi.x&&Sn.x<=ri.x&&an.y>=oi.y&&Sn.y<=ri.y?[Hi]:Sn.x<oi.x||an.x>ri.x||Sn.y<oi.y||an.y>ri.y?[]:c.clipLine([Hi],oi.x,oi.y,ri.x,ri.y)}for(var Qi=0,$r=hn;Qi<$r.length;Qi+=1){var uo;Ti.reset($r[Qi],.25*Ht),uo=Ti.length<=.5*Ht?1:Math.ceil(Ti.paddedLength/_n)+1;for(var wo=0;wo<uo;wo++){var Qo=wo/Math.max(uo-1,1),io=Ti.lerp(Qo),er=io.x+100,ba=io.y+100;Fe.push(er,ba,Ht,0);var pa=er-Ht,Ga=ba-Ht,zo=er+Ht,Ha=ba+Ht;if(kt=kt&&this.isOffscreen(pa,Ga,zo,Ha),Tt=Tt||this.isInsideGrid(pa,Ga,zo,Ha),!f&&this.grid.hitTestCircle(er,ba,Ht,_e)&&(xt=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:xt}}}}return{circles:!Q&&xt||!Tt?[]:Fe,offscreen:kt,collisionDetected:xt}},Pa.prototype.queryRenderedSymbols=function(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var y=[],g=1/0,w=1/0,P=-1/0,F=-1/0,N=0,H=f;N<H.length;N+=1){var Q=H[N],ae=new c.Point(Q.x+100,Q.y+100);g=Math.min(g,ae.x),w=Math.min(w,ae.y),P=Math.max(P,ae.x),F=Math.max(F,ae.y),y.push(ae)}for(var _e={},xe={},Ee=0,Fe=this.grid.query(g,w,P,F).concat(this.ignoredGrid.query(g,w,P,F));Ee<Fe.length;Ee+=1){var Oe=Fe[Ee],Xe=Oe.key;if(_e[Xe.bucketInstanceId]===void 0&&(_e[Xe.bucketInstanceId]={}),!_e[Xe.bucketInstanceId][Xe.featureIndex]){var Ce=[new c.Point(Oe.x1,Oe.y1),new c.Point(Oe.x2,Oe.y1),new c.Point(Oe.x2,Oe.y2),new c.Point(Oe.x1,Oe.y2)];c.polygonIntersectsPolygon(y,Ce)&&(_e[Xe.bucketInstanceId][Xe.featureIndex]=!0,xe[Xe.bucketInstanceId]===void 0&&(xe[Xe.bucketInstanceId]=[]),xe[Xe.bucketInstanceId].push(Xe.featureIndex))}}return xe},Pa.prototype.insertCollisionBox=function(f,y,g,w,P){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:w,collisionGroupID:P},f[0],f[1],f[2],f[3])},Pa.prototype.insertCollisionCircles=function(f,y,g,w,P){for(var F=y?this.ignoredGrid:this.grid,N={bucketInstanceId:g,featureIndex:w,collisionGroupID:P},H=0;H<f.length;H+=4)F.insertCircle(N,f[H],f[H+1],f[H+2])},Pa.prototype.projectAndGetPerspectiveRatio=function(f,y,g){var w=[y,g,0,1];return bo(w,w,f),{point:new c.Point((w[0]/w[3]+1)/2*this.transform.width+100,(-w[1]/w[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}},Pa.prototype.isOffscreen=function(f,y,g,w){return g<100||f>=this.screenRightBoundary||w<100||y>this.screenBottomBoundary},Pa.prototype.isInsideGrid=function(f,y,g,w){return g>=0&&f<this.gridRightBoundary&&w>=0&&y<this.gridBottomBoundary},Pa.prototype.getViewportMatrix=function(){var f=c.identity([]);return c.translate(f,f,[-100,-100,0]),f};var La=function(f,y,g,w){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?y:-y))):w&&g?1:0,this.placed=g};La.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ca=function(f,y,g,w,P){this.text=new La(f?f.text:null,y,g,P),this.icon=new La(f?f.icon:null,y,w,P)};ca.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _c=function(f,y,g){this.text=f,this.icon=y,this.skipFade=g},za=function(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]},ll=function(f,y,g,w,P){this.bucketInstanceId=f,this.featureIndex=y,this.sourceLayerIndex=g,this.bucketIndex=w,this.tileID=P},Va=function(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}};function ao(f,y,g,w,P){var F=c.getAnchorAlignment(f),N=-(F.horizontalAlign-.5)*y,H=-(F.verticalAlign-.5)*g,Q=c.evaluateVariableOffset(f,w);return new c.Point(N+Q[0]*P,H+Q[1]*P)}function ma(f,y,g,w,P,F){var N=f.x1,H=f.x2,Q=f.y1,ae=f.y2,_e=f.anchorPointX,xe=f.anchorPointY,Ee=new c.Point(y,g);return w&&Ee._rotate(P?F:-F),{x1:N+Ee.x,y1:Q+Ee.y,x2:H+Ee.x,y2:ae+Ee.y,anchorPointX:_e,anchorPointY:xe}}Va.prototype.get=function(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){var y=++this.maxGroupID;this.collisionGroups[f]={ID:y,predicate:function(g){return g.collisionGroupID===y}}}return this.collisionGroups[f]};var Lo=function(f,y,g,w){this.transform=f.clone(),this.collisionIndex=new Pa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Va(g),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};function rs(f,y,g,w,P){f.emplaceBack(y?1:0,g?1:0,w||0,P||0),f.emplaceBack(y?1:0,g?1:0,w||0,P||0),f.emplaceBack(y?1:0,g?1:0,w||0,P||0),f.emplaceBack(y?1:0,g?1:0,w||0,P||0)}Lo.prototype.getBucketParts=function(f,y,g,w){var P=g.getBucket(y),F=g.latestFeatureIndex;if(P&&F&&y.id===P.layerIds[0]){var N=g.collisionBoxArray,H=P.layers[0].layout,Q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),ae=g.tileSize/c.EXTENT,_e=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),xe=H.get("text-pitch-alignment")==="map",Ee=H.get("text-rotation-alignment")==="map",Fe=Br(g,1,this.transform.zoom),Oe=nn(_e,xe,Ee,this.transform,Fe),Xe=null;if(xe){var Ce=Vi(_e,xe,Ee,this.transform,Fe);Xe=c.multiply([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[P.bucketInstanceId]=new ll(P.bucketInstanceId,F,P.sourceLayerIndex,P.index,g.tileID);var je={bucket:P,layout:H,posMatrix:_e,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Xe,scale:Q,textPixelRatio:ae,holdingForFade:g.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(w)for(var et=0,pt=P.sortKeyRanges;et<pt.length;et+=1){var xt=pt[et];f.push({sortKey:xt.sortKey,symbolInstanceStart:xt.symbolInstanceStart,symbolInstanceEnd:xt.symbolInstanceEnd,parameters:je})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:je})}},Lo.prototype.attemptAnchorPlacement=function(f,y,g,w,P,F,N,H,Q,ae,_e,xe,Ee,Fe,Oe){var Xe,Ce=[xe.textOffset0,xe.textOffset1],je=ao(f,g,w,Ce,P),et=this.collisionIndex.placeCollisionBox(ma(y,je.x,je.y,F,N,this.transform.angle),_e,H,Q,ae.predicate);if(!Oe||this.collisionIndex.placeCollisionBox(ma(Oe,je.x,je.y,F,N,this.transform.angle),_e,H,Q,ae.predicate).box.length!==0)return et.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[xe.crossTileID]&&this.prevPlacement.placements[xe.crossTileID]&&this.prevPlacement.placements[xe.crossTileID].text&&(Xe=this.prevPlacement.variableOffsets[xe.crossTileID].anchor),this.variableOffsets[xe.crossTileID]={textOffset:Ce,width:g,height:w,anchor:f,textBoxScale:P,prevAnchor:Xe},this.markUsedJustification(Ee,f,xe,Fe),Ee.allowVerticalPlacement&&(this.markUsedOrientation(Ee,Fe,xe),this.placedOrientations[xe.crossTileID]=Fe),{shift:je,placedGlyphBoxes:et}):void 0},Lo.prototype.placeLayerBucketPart=function(f,y,g){var w=this,P=f.parameters,F=P.bucket,N=P.layout,H=P.posMatrix,Q=P.textLabelPlaneMatrix,ae=P.labelToScreenMatrix,_e=P.textPixelRatio,xe=P.holdingForFade,Ee=P.collisionBoxArray,Fe=P.partiallyEvaluatedTextSize,Oe=P.collisionGroup,Xe=N.get("text-optional"),Ce=N.get("icon-optional"),je=N.get("text-allow-overlap"),et=N.get("icon-allow-overlap"),pt=N.get("text-rotation-alignment")==="map",xt=N.get("text-pitch-alignment")==="map",Tt=N.get("icon-text-fit")!=="none",kt=N.get("symbol-z-order")==="viewport-y",Ht=je&&(et||!F.hasIconData()||Ce),oi=et&&(je||!F.hasTextData()||Xe);!F.collisionArrays&&Ee&&F.deserializeCollisionBoxes(Ee);var ri=function(Pi,_n){if(!y[Pi.crossTileID])if(xe)w.placements[Pi.crossTileID]=new _c(!1,!1,!1);else{var Vn,hn=!1,an=!1,Sn=!0,tn=null,Qi={box:null,offscreen:null},$r={box:null,offscreen:null},uo=null,wo=null,Qo=0,io=0,er=0;_n.textFeatureIndex?Qo=_n.textFeatureIndex:Pi.useRuntimeCollisionCircles&&(Qo=Pi.featureIndex),_n.verticalTextFeatureIndex&&(io=_n.verticalTextFeatureIndex);var ba=_n.textBox;if(ba){var pa=function(ur){var xa=c.WritingMode.horizontal;if(F.allowVerticalPlacement&&!ur&&w.prevPlacement){var Ba=w.prevPlacement.placedOrientations[Pi.crossTileID];Ba&&(w.placedOrientations[Pi.crossTileID]=Ba,w.markUsedOrientation(F,xa=Ba,Pi))}return xa},Ga=function(ur,xa){if(F.allowVerticalPlacement&&Pi.numVerticalGlyphVertices>0&&_n.verticalTextBox)for(var Ba=0,Iu=F.writingModes;Ba<Iu.length&&(Iu[Ba]===c.WritingMode.vertical?(Qi=xa(),$r=Qi):Qi=ur(),!(Qi&&Qi.box&&Qi.box.length));Ba+=1);else Qi=ur()};if(N.get("text-variable-anchor")){var zo=N.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[Pi.crossTileID]){var Ha=w.prevPlacement.variableOffsets[Pi.crossTileID];zo.indexOf(Ha.anchor)>0&&(zo=zo.filter(function(ur){return ur!==Ha.anchor})).unshift(Ha.anchor)}var Za=function(ur,xa,Ba){for(var Iu=ur.x2-ur.x1,tc=ur.y2-ur.y1,ic=Pi.textBoxScale,Pd=Tt&&!et?xa:null,xl={box:[],offscreen:!1},Ld=je?2*zo.length:zo.length,wl=0;wl<Ld;++wl){var Pc=w.attemptAnchorPlacement(zo[wl%zo.length],ur,Iu,tc,ic,pt,xt,_e,H,Oe,wl>=zo.length,Pi,F,Ba,Pd);if(Pc&&(xl=Pc.placedGlyphBoxes)&&xl.box&&xl.box.length){hn=!0,tn=Pc.shift;break}}return xl};Ga(function(){return Za(ba,_n.iconBox,c.WritingMode.horizontal)},function(){var ur=_n.verticalTextBox;return F.allowVerticalPlacement&&!(Qi&&Qi.box&&Qi.box.length)&&Pi.numVerticalGlyphVertices>0&&ur?Za(ur,_n.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),Qi&&(hn=Qi.box,Sn=Qi.offscreen);var Qu=pa(Qi&&Qi.box);if(!hn&&w.prevPlacement){var $u=w.prevPlacement.variableOffsets[Pi.crossTileID];$u&&(w.variableOffsets[Pi.crossTileID]=$u,w.markUsedJustification(F,$u.anchor,Pi,Qu))}}else{var bl=function(ur,xa){var Ba=w.collisionIndex.placeCollisionBox(ur,je,_e,H,Oe.predicate);return Ba&&Ba.box&&Ba.box.length&&(w.markUsedOrientation(F,xa,Pi),w.placedOrientations[Pi.crossTileID]=xa),Ba};Ga(function(){return bl(ba,c.WritingMode.horizontal)},function(){var ur=_n.verticalTextBox;return F.allowVerticalPlacement&&Pi.numVerticalGlyphVertices>0&&ur?bl(ur,c.WritingMode.vertical):{box:null,offscreen:null}}),pa(Qi&&Qi.box&&Qi.box.length)}}if(hn=(Vn=Qi)&&Vn.box&&Vn.box.length>0,Sn=Vn&&Vn.offscreen,Pi.useRuntimeCollisionCircles){var ec=F.text.placedSymbolArray.get(Pi.centerJustifiedTextSymbolIndex),wu=c.evaluateSizeForFeature(F.textSizeData,Fe,ec),Qs=N.get("text-padding");uo=w.collisionIndex.placeCollisionCircles(je,ec,F.lineVertexArray,F.glyphOffsetArray,wu,H,Q,ae,g,xt,Oe.predicate,Pi.collisionCircleDiameter,Qs),hn=je||uo.circles.length>0&&!uo.collisionDetected,Sn=Sn&&uo.offscreen}if(_n.iconFeatureIndex&&(er=_n.iconFeatureIndex),_n.iconBox){var Eu=function(ur){var xa=Tt&&tn?ma(ur,tn.x,tn.y,pt,xt,w.transform.angle):ur;return w.collisionIndex.placeCollisionBox(xa,et,_e,H,Oe.predicate)};an=$r&&$r.box&&$r.box.length&&_n.verticalIconBox?(wo=Eu(_n.verticalIconBox)).box.length>0:(wo=Eu(_n.iconBox)).box.length>0,Sn=Sn&&wo.offscreen}var Ds=Xe||Pi.numHorizontalGlyphVertices===0&&Pi.numVerticalGlyphVertices===0,Do=Ce||Pi.numIconVertices===0;if(Ds||Do?Do?Ds||(an=an&&hn):hn=an&&hn:an=hn=an&&hn,hn&&Vn&&Vn.box&&w.collisionIndex.insertCollisionBox(Vn.box,N.get("text-ignore-placement"),F.bucketInstanceId,$r&&$r.box&&io?io:Qo,Oe.ID),an&&wo&&w.collisionIndex.insertCollisionBox(wo.box,N.get("icon-ignore-placement"),F.bucketInstanceId,er,Oe.ID),uo&&(hn&&w.collisionIndex.insertCollisionCircles(uo.circles,N.get("text-ignore-placement"),F.bucketInstanceId,Qo,Oe.ID),g)){var Wa=F.bucketInstanceId,Gl=w.collisionCircleArrays[Wa];Gl===void 0&&(Gl=w.collisionCircleArrays[Wa]=new za);for(var Rs=0;Rs<uo.circles.length;Rs+=4)Gl.circles.push(uo.circles[Rs+0]),Gl.circles.push(uo.circles[Rs+1]),Gl.circles.push(uo.circles[Rs+2]),Gl.circles.push(uo.collisionDetected?1:0)}w.placements[Pi.crossTileID]=new _c(hn||Ht,an||oi,Sn||F.justReloaded),y[Pi.crossTileID]=!0}};if(kt)for(var Ti=F.getSortedSymbolIndexes(this.transform.angle),Zi=Ti.length-1;Zi>=0;--Zi){var $i=Ti[Zi];ri(F.symbolInstances.get($i),F.collisionArrays[$i])}else for(var Hi=f.symbolInstanceStart;Hi<f.symbolInstanceEnd;Hi++)ri(F.symbolInstances.get(Hi),F.collisionArrays[Hi]);if(g&&F.bucketInstanceId in this.collisionCircleArrays){var Xn=this.collisionCircleArrays[F.bucketInstanceId];c.invert(Xn.invProjMatrix,H),Xn.viewportMatrix=this.collisionIndex.getViewportMatrix()}F.justReloaded=!1},Lo.prototype.markUsedJustification=function(f,y,g,w){var P;P=w===c.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(y)];for(var F=0,N=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];F<N.length;F+=1){var H=N[F];H>=0&&(f.text.placedSymbolArray.get(H).crossTileID=P>=0&&H!==P?0:g.crossTileID)}},Lo.prototype.markUsedOrientation=function(f,y,g){for(var w=y===c.WritingMode.horizontal||y===c.WritingMode.horizontalOnly?y:0,P=y===c.WritingMode.vertical?y:0,F=0,N=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];F<N.length;F+=1)f.text.placedSymbolArray.get(N[F]).placedOrientation=w;g.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=P)},Lo.prototype.commit=function(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;var y=this.prevPlacement,g=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;var w=y?y.symbolFadeChange(f):1,P=y?y.opacities:{},F=y?y.variableOffsets:{},N=y?y.placedOrientations:{};for(var H in this.placements){var Q=this.placements[H],ae=P[H];ae?(this.opacities[H]=new ca(ae,w,Q.text,Q.icon),g=g||Q.text!==ae.text.placed||Q.icon!==ae.icon.placed):(this.opacities[H]=new ca(null,w,Q.text,Q.icon,Q.skipFade),g=g||Q.text||Q.icon)}for(var _e in P){var xe=P[_e];if(!this.opacities[_e]){var Ee=new ca(xe,w,!1,!1);Ee.isHidden()||(this.opacities[_e]=Ee,g=g||xe.text.placed||xe.icon.placed)}}for(var Fe in F)this.variableOffsets[Fe]||!this.opacities[Fe]||this.opacities[Fe].isHidden()||(this.variableOffsets[Fe]=F[Fe]);for(var Oe in N)this.placedOrientations[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.placedOrientations[Oe]=N[Oe]);g?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:f)},Lo.prototype.updateLayerOpacities=function(f,y){for(var g={},w=0,P=y;w<P.length;w+=1){var F=P[w],N=F.getBucket(f);N&&F.latestFeatureIndex&&f.id===N.layerIds[0]&&this.updateBucketOpacities(N,g,F.collisionBoxArray)}},Lo.prototype.updateBucketOpacities=function(f,y,g){var w=this;f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();var P=f.layers[0].layout,F=new ca(null,0,!1,!1,!0),N=P.get("text-allow-overlap"),H=P.get("icon-allow-overlap"),Q=P.get("text-variable-anchor"),ae=P.get("text-rotation-alignment")==="map",_e=P.get("text-pitch-alignment")==="map",xe=P.get("icon-text-fit")!=="none",Ee=new ca(null,0,N&&(H||!f.hasIconData()||P.get("icon-optional")),H&&(N||!f.hasTextData()||P.get("text-optional")),!0);!f.collisionArrays&&g&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(g);for(var Fe=function(je,et,pt){for(var xt=0;xt<et/4;xt++)je.opacityVertexArray.emplaceBack(pt)},Oe=function(je){var et=f.symbolInstances.get(je),pt=et.numHorizontalGlyphVertices,xt=et.numVerticalGlyphVertices,Tt=et.crossTileID,kt=w.opacities[Tt];y[Tt]?kt=F:kt||(w.opacities[Tt]=kt=Ee),y[Tt]=!0;var Ht=et.numIconVertices>0,oi=w.placedOrientations[et.crossTileID],ri=oi===c.WritingMode.vertical,Ti=oi===c.WritingMode.horizontal||oi===c.WritingMode.horizontalOnly;if(pt>0||xt>0){var Zi=xc(kt.text);Fe(f.text,pt,ri?bs:Zi),Fe(f.text,xt,Ti?bs:Zi);var $i=kt.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(function(Qi){Qi>=0&&(f.text.placedSymbolArray.get(Qi).hidden=$i||ri?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=$i||Ti?1:0);var Hi=w.variableOffsets[et.crossTileID];Hi&&w.markUsedJustification(f,Hi.anchor,et,oi);var Xn=w.placedOrientations[et.crossTileID];Xn&&(w.markUsedJustification(f,"left",et,Xn),w.markUsedOrientation(f,Xn,et))}if(Ht){var Pi=xc(kt.icon),_n=!(xe&&et.verticalPlacedIconSymbolIndex&&ri);et.placedIconSymbolIndex>=0&&(Fe(f.icon,et.numIconVertices,_n?Pi:bs),f.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=kt.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Fe(f.icon,et.numVerticalIconVertices,_n?bs:Pi),f.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=kt.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){var Vn=f.collisionArrays[je];if(Vn){var hn=new c.Point(0,0);if(Vn.textBox||Vn.verticalTextBox){var an=!0;if(Q){var Sn=w.variableOffsets[Tt];Sn?(hn=ao(Sn.anchor,Sn.width,Sn.height,Sn.textOffset,Sn.textBoxScale),ae&&hn._rotate(_e?w.transform.angle:-w.transform.angle)):an=!1}Vn.textBox&&rs(f.textCollisionBox.collisionVertexArray,kt.text.placed,!an||ri,hn.x,hn.y),Vn.verticalTextBox&&rs(f.textCollisionBox.collisionVertexArray,kt.text.placed,!an||Ti,hn.x,hn.y)}var tn=Boolean(!Ti&&Vn.verticalIconBox);Vn.iconBox&&rs(f.iconCollisionBox.collisionVertexArray,kt.icon.placed,tn,xe?hn.x:0,xe?hn.y:0),Vn.verticalIconBox&&rs(f.iconCollisionBox.collisionVertexArray,kt.icon.placed,!tn,xe?hn.x:0,xe?hn.y:0)}}},Xe=0;Xe<f.symbolInstances.length;Xe++)Oe(Xe);if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){var Ce=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=Ce.invProjMatrix,f.placementViewportMatrix=Ce.viewportMatrix,f.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}},Lo.prototype.symbolFadeChange=function(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Lo.prototype.zoomAdjustment=function(f){return Math.max(0,(this.transform.zoom-f)/1.5)},Lo.prototype.hasTransitions=function(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration},Lo.prototype.stillRecent=function(f,y){var g=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*g>f},Lo.prototype.setStale=function(){this.stale=!0};var nu=Math.pow(2,25),Vu=Math.pow(2,24),ul=Math.pow(2,17),Ao=Math.pow(2,16),Pl=Math.pow(2,9),vc=Math.pow(2,8),bc=Math.pow(2,1);function xc(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;var y=f.placed?1:0,g=Math.floor(127*f.opacity);return g*nu+y*Vu+g*ul+y*Ao+g*Pl+y*vc+g*bc+y}var bs=0,ru=function(f){this._sortAcrossTiles=f.layout.get("symbol-z-order")!=="viewport-y"&&f.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ru.prototype.continuePlacement=function(f,y,g,w,P){for(var F=this._bucketParts;this._currentTileIndex<f.length;)if(y.getBucketParts(F,w,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort(function(N,H){return N.sortKey-H.sortKey}));this._currentPartIndex<F.length;)if(y.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,P())return!0;return!1};var ou=function(f,y,g,w,P,F,N){this.placement=new Lo(f,P,F,N),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=w,this._done=!1};ou.prototype.isDone=function(){return this._done},ou.prototype.continuePlacement=function(f,y,g){for(var w=this,P=c.browser.now(),F=function(){var Q=c.browser.now()-P;return!w._forceFullPlacement&&Q>2};this._currentPlacementIndex>=0;){var N=y[f[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=H)&&(!N.maxzoom||N.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new ru(N)),this._inProgressLayer.continuePlacement(g[N.source],this.placement,this._showCollisionBoxes,N,F))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ou.prototype.commit=function(f){return this.placement.commit(f),this.placement};var ih=512/c.EXTENT/2,Ll=function(f,y,g){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(var w=0;w<y.length;w++){var P=y.get(w),F=P.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:P.crossTileID,coord:this.getScaledCoordinates(P,f)})}};Ll.prototype.getScaledCoordinates=function(f,y){var g=ih/Math.pow(2,y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((y.canonical.x*c.EXTENT+f.anchorX)*g),y:Math.floor((y.canonical.y*c.EXTENT+f.anchorY)*g)}},Ll.prototype.findMatches=function(f,y,g){for(var w=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z),P=0;P<f.length;P++){var F=f.get(P);if(!F.crossTileID){var N=this.indexedSymbolInstances[F.key];if(N)for(var H=this.getScaledCoordinates(F,y),Q=0,ae=N;Q<ae.length;Q+=1){var _e=ae[Q];if(Math.abs(_e.coord.x-H.x)<=w&&Math.abs(_e.coord.y-H.y)<=w&&!g[_e.crossTileID]){g[_e.crossTileID]=!0,F.crossTileID=_e.crossTileID;break}}}}};var ga=function(){this.maxCrossTileID=0};ga.prototype.generate=function(){return++this.maxCrossTileID};var os=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};os.prototype.handleWrapJump=function(f){var y=Math.round((f-this.lng)/360);if(y!==0)for(var g in this.indexes){var w=this.indexes[g],P={};for(var F in w){var N=w[F];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+y),P[N.tileID.key]=N}this.indexes[g]=P}this.lng=f},os.prototype.addBucket=function(f,y,g){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(var w=0;w<y.symbolInstances.length;w++)y.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});var P=this.usedCrossTileIDs[f.overscaledZ];for(var F in this.indexes){var N=this.indexes[F];if(Number(F)>f.overscaledZ)for(var H in N){var Q=N[H];Q.tileID.isChildOf(f)&&Q.findMatches(y.symbolInstances,f,P)}else{var ae=N[f.scaledTo(Number(F)).key];ae&&ae.findMatches(y.symbolInstances,f,P)}}for(var _e=0;_e<y.symbolInstances.length;_e++){var xe=y.symbolInstances.get(_e);xe.crossTileID||(xe.crossTileID=g.generate(),P[xe.crossTileID]=!0)}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new Ll(f,y.symbolInstances,y.bucketInstanceId),!0},os.prototype.removeBucketCrossTileIDs=function(f,y){for(var g in y.indexedSymbolInstances)for(var w=0,P=y.indexedSymbolInstances[g];w<P.length;w+=1)delete this.usedCrossTileIDs[f][P[w].crossTileID]},os.prototype.removeStaleBuckets=function(f){var y=!1;for(var g in this.indexes){var w=this.indexes[g];for(var P in w)f[w[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,w[P]),delete w[P],y=!0)}return y};var as=function(){this.layerIndexes={},this.crossTileIDs=new ga,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};as.prototype.addLayer=function(f,y,g){var w=this.layerIndexes[f.id];w===void 0&&(w=this.layerIndexes[f.id]=new os);var P=!1,F={};w.handleWrapJump(g);for(var N=0,H=y;N<H.length;N+=1){var Q=H[N],ae=Q.getBucket(f);ae&&f.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(Q.tileID,ae,this.crossTileIDs)&&(P=!0),F[ae.bucketInstanceId]=!0)}return w.removeStaleBuckets(F)&&(P=!0),P},as.prototype.pruneUnusedLayers=function(f){var y={};for(var g in f.forEach(function(w){y[w]=!0}),this.layerIndexes)y[g]||delete this.layerIndexes[g]};var Vs=function(f,y){return c.emitValidationErrors(f,y&&y.filter(function(g){return g.identifier!=="source.canvas"}))},ir=c.pick(Le,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),js=c.pick(Le,["setCenter","setZoom","setBearing","setPitch"]),qs=function(){var f={},y=c.styleSpec.$version;for(var g in c.styleSpec.$root){var w,P=c.styleSpec.$root[g];P.required&&(w=g==="version"?y:P.type==="array"?[]:{})!=null&&(f[g]=w)}return f}(),qo=function(f){function y(g,w){var P=this;w===void 0&&(w={}),f.call(this),this.map=g,this.dispatcher=new Mt(we(),this),this.imageManager=new oe,this.imageManager.setEventedParent(this),this.glyphManager=new st(g._requestManager,w.localIdeographFontFamily),this.lineAtlas=new He(256,512),this.crossTileSymbolIndex=new as,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());var F=this;this._rtlTextPluginCallback=y.registerForPluginStateChange(function(N){F.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:N.pluginStatus,pluginURL:N.pluginURL},function(H,Q){if(c.triggerPluginCompletionEvent(H),Q&&Q.every(function(_e){return _e}))for(var ae in F.sourceCaches)F.sourceCaches[ae].reload()})}),this.on("data",function(N){if(N.dataType==="source"&&N.sourceDataType==="metadata"){var H=P.sourceCaches[N.sourceId];if(H){var Q=H.getSource();if(Q&&Q.vectorLayerIds)for(var ae in P._layers){var _e=P._layers[ae];_e.source===Q.id&&P._validateLayer(_e)}}}})}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.loadURL=function(g,w){var P=this;w===void 0&&(w={}),this.fire(new c.Event("dataloading",{dataType:"style"}));var F=typeof w.validate=="boolean"?w.validate:!c.isMapboxURL(g);g=this.map._requestManager.normalizeStyleURL(g,w.accessToken);var N=this.map._requestManager.transformRequest(g,c.ResourceType.Style);this._request=c.getJSON(N,function(H,Q){P._request=null,H?P.fire(new c.ErrorEvent(H)):Q&&P._load(Q,F)})},y.prototype.loadJSON=function(g,w){var P=this;w===void 0&&(w={}),this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.browser.frame(function(){P._request=null,P._load(g,w.validate!==!1)})},y.prototype.loadEmpty=function(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(qs,!1)},y.prototype._load=function(g,w){if(!w||!Vs(this,c.validateStyle(g))){for(var P in this._loaded=!0,this.stylesheet=g,g.sources)this.addSource(P,g.sources[P],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs);var F=Me(this.stylesheet.layers);this._order=F.map(function(ae){return ae.id}),this._layers={},this._serializedLayers={};for(var N=0,H=F;N<H.length;N+=1){var Q=H[N];(Q=c.createStyleLayer(Q)).setEventedParent(this,{layer:{id:Q.id}}),this._layers[Q.id]=Q,this._serializedLayers[Q.id]=Q.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Rt(this.stylesheet.light),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}},y.prototype._loadSprite=function(g){var w=this;this._spriteRequest=function(P,F,N){var H,Q,ae,_e=c.browser.devicePixelRatio>1?"@2x":"",xe=c.getJSON(F.transformRequest(F.normalizeSpriteURL(P,_e,".json"),c.ResourceType.SpriteJSON),function(Oe,Xe){xe=null,ae||(ae=Oe,H=Xe,Fe())}),Ee=c.getImage(F.transformRequest(F.normalizeSpriteURL(P,_e,".png"),c.ResourceType.SpriteImage),function(Oe,Xe){Ee=null,ae||(ae=Oe,Q=Xe,Fe())});function Fe(){if(ae)N(ae);else if(H&&Q){var Oe=c.browser.getImageData(Q),Xe={};for(var Ce in H){var je=H[Ce],et=je.width,pt=je.height,xt=je.x,Tt=je.y,kt=je.sdf,Ht=je.pixelRatio,oi=je.stretchX,ri=je.stretchY,Ti=je.content,Zi=new c.RGBAImage({width:et,height:pt});c.RGBAImage.copy(Oe,Zi,{x:xt,y:Tt},{x:0,y:0},{width:et,height:pt}),Xe[Ce]={data:Zi,pixelRatio:Ht,sdf:kt,stretchX:oi,stretchY:ri,content:Ti}}N(null,Xe)}}return{cancel:function(){xe&&(xe.cancel(),xe=null),Ee&&(Ee.cancel(),Ee=null)}}}(g,this.map._requestManager,function(P,F){if(w._spriteRequest=null,P)w.fire(new c.ErrorEvent(P));else if(F)for(var N in F)w.imageManager.addImage(N,F[N]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new c.Event("data",{dataType:"style"}))})},y.prototype._validateLayer=function(g){var w=this.sourceCaches[g.source];if(w){var P=g.sourceLayer;if(P){var F=w.getSource();(F.type==="geojson"||F.vectorLayerIds&&F.vectorLayerIds.indexOf(P)===-1)&&this.fire(new c.ErrorEvent(new Error('Source layer "'+P+'" does not exist on source "'+F.id+'" as specified by style layer "'+g.id+'"')))}}},y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var g in this.sourceCaches)if(!this.sourceCaches[g].loaded())return!1;return!!this.imageManager.isLoaded()},y.prototype._serializeLayers=function(g){for(var w=[],P=0,F=g;P<F.length;P+=1){var N=this._layers[F[P]];N.type!=="custom"&&w.push(N.serialize())}return w},y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var g in this.sourceCaches)if(this.sourceCaches[g].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},y.prototype.update=function(g){if(this._loaded){var w=this._changed;if(this._changed){var P=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);for(var N in(P.length||F.length)&&this._updateWorkerLayers(P,F),this._updatedSources){var H=this._updatedSources[N];H==="reload"?this._reloadSource(N):H==="clear"&&this._clearSource(N)}for(var Q in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Q].updateTransitions(g);this.light.updateTransitions(g),this._resetUpdates()}var ae={};for(var _e in this.sourceCaches){var xe=this.sourceCaches[_e];ae[_e]=xe.used,xe.used=!1}for(var Ee=0,Fe=this._order;Ee<Fe.length;Ee+=1){var Oe=this._layers[Fe[Ee]];Oe.recalculate(g,this._availableImages),!Oe.isHidden(g.zoom)&&Oe.source&&(this.sourceCaches[Oe.source].used=!0)}for(var Xe in ae){var Ce=this.sourceCaches[Xe];ae[Xe]!==Ce.used&&Ce.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Xe}))}this.light.recalculate(g),this.z=g.zoom,w&&this.fire(new c.Event("data",{dataType:"style"}))}},y.prototype._updateTilesForChangedImages=function(){var g=Object.keys(this._changedImages);if(g.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],g);this._changedImages={}}},y.prototype._updateWorkerLayers=function(g,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(g),removedIds:w})},y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},y.prototype.setState=function(g){var w=this;if(this._checkLoaded(),Vs(this,c.validateStyle(g)))return!1;(g=c.clone$1(g)).layers=Me(g.layers);var P=function(N,H){if(!N)return[{command:Le.setStyle,args:[H]}];var Q=[];try{if(!c.deepEqual(N.version,H.version))return[{command:Le.setStyle,args:[H]}];c.deepEqual(N.center,H.center)||Q.push({command:Le.setCenter,args:[H.center]}),c.deepEqual(N.zoom,H.zoom)||Q.push({command:Le.setZoom,args:[H.zoom]}),c.deepEqual(N.bearing,H.bearing)||Q.push({command:Le.setBearing,args:[H.bearing]}),c.deepEqual(N.pitch,H.pitch)||Q.push({command:Le.setPitch,args:[H.pitch]}),c.deepEqual(N.sprite,H.sprite)||Q.push({command:Le.setSprite,args:[H.sprite]}),c.deepEqual(N.glyphs,H.glyphs)||Q.push({command:Le.setGlyphs,args:[H.glyphs]}),c.deepEqual(N.transition,H.transition)||Q.push({command:Le.setTransition,args:[H.transition]}),c.deepEqual(N.light,H.light)||Q.push({command:Le.setLight,args:[H.light]});var ae={},_e=[];(function(Ee,Fe,Oe,Xe){var Ce;for(Ce in Fe=Fe||{},Ee=Ee||{})Ee.hasOwnProperty(Ce)&&(Fe.hasOwnProperty(Ce)||lt(Ce,Oe,Xe));for(Ce in Fe)Fe.hasOwnProperty(Ce)&&(Ee.hasOwnProperty(Ce)?c.deepEqual(Ee[Ce],Fe[Ce])||(Ee[Ce].type==="geojson"&&Fe[Ce].type==="geojson"&&si(Ee,Fe,Ce)?Oe.push({command:Le.setGeoJSONSourceData,args:[Ce,Fe[Ce].data]}):_t(Ce,Fe,Oe,Xe)):yt(Ce,Fe,Oe))})(N.sources,H.sources,_e,ae);var xe=[];N.layers&&N.layers.forEach(function(Ee){ae[Ee.source]?Q.push({command:Le.removeLayer,args:[Ee.id]}):xe.push(Ee)}),Q=Q.concat(_e),function(Ee,Fe,Oe){Fe=Fe||[];var Xe,Ce,je,et,pt,xt,Tt,kt=(Ee=Ee||[]).map(Yt),Ht=Fe.map(Yt),oi=Ee.reduce(di,{}),ri=Fe.reduce(di,{}),Ti=kt.slice(),Zi=Object.create(null);for(Xe=0,Ce=0;Xe<kt.length;Xe++)ri.hasOwnProperty(je=kt[Xe])?Ce++:(Oe.push({command:Le.removeLayer,args:[je]}),Ti.splice(Ti.indexOf(je,Ce),1));for(Xe=0,Ce=0;Xe<Ht.length;Xe++)Ti[Ti.length-1-Xe]!==(je=Ht[Ht.length-1-Xe])&&(oi.hasOwnProperty(je)?(Oe.push({command:Le.removeLayer,args:[je]}),Ti.splice(Ti.lastIndexOf(je,Ti.length-Ce),1)):Ce++,Oe.push({command:Le.addLayer,args:[ri[je],xt=Ti[Ti.length-Xe]]}),Ti.splice(Ti.length-Xe,0,je),Zi[je]=!0);for(Xe=0;Xe<Ht.length;Xe++)if(et=oi[je=Ht[Xe]],pt=ri[je],!Zi[je]&&!c.deepEqual(et,pt))if(c.deepEqual(et.source,pt.source)&&c.deepEqual(et["source-layer"],pt["source-layer"])&&c.deepEqual(et.type,pt.type)){for(Tt in Re(et.layout,pt.layout,Oe,je,null,Le.setLayoutProperty),Re(et.paint,pt.paint,Oe,je,null,Le.setPaintProperty),c.deepEqual(et.filter,pt.filter)||Oe.push({command:Le.setFilter,args:[je,pt.filter]}),c.deepEqual(et.minzoom,pt.minzoom)&&c.deepEqual(et.maxzoom,pt.maxzoom)||Oe.push({command:Le.setLayerZoomRange,args:[je,pt.minzoom,pt.maxzoom]}),et)et.hasOwnProperty(Tt)&&Tt!=="layout"&&Tt!=="paint"&&Tt!=="filter"&&Tt!=="metadata"&&Tt!=="minzoom"&&Tt!=="maxzoom"&&(Tt.indexOf("paint.")===0?Re(et[Tt],pt[Tt],Oe,je,Tt.slice(6),Le.setPaintProperty):c.deepEqual(et[Tt],pt[Tt])||Oe.push({command:Le.setLayerProperty,args:[je,Tt,pt[Tt]]}));for(Tt in pt)pt.hasOwnProperty(Tt)&&!et.hasOwnProperty(Tt)&&Tt!=="layout"&&Tt!=="paint"&&Tt!=="filter"&&Tt!=="metadata"&&Tt!=="minzoom"&&Tt!=="maxzoom"&&(Tt.indexOf("paint.")===0?Re(et[Tt],pt[Tt],Oe,je,Tt.slice(6),Le.setPaintProperty):c.deepEqual(et[Tt],pt[Tt])||Oe.push({command:Le.setLayerProperty,args:[je,Tt,pt[Tt]]}))}else Oe.push({command:Le.removeLayer,args:[je]}),xt=Ti[Ti.lastIndexOf(je)+1],Oe.push({command:Le.addLayer,args:[pt,xt]})}(xe,H.layers,Q)}catch(Ee){console.warn("Unable to compute style diff:",Ee),Q=[{command:Le.setStyle,args:[H]}]}return Q}(this.serialize(),g).filter(function(N){return!(N.command in js)});if(P.length===0)return!1;var F=P.filter(function(N){return!(N.command in ir)});if(F.length>0)throw new Error("Unimplemented: "+F.map(function(N){return N.command}).join(", ")+".");return P.forEach(function(N){N.command!=="setTransition"&&w[N.command].apply(w,N.args)}),this.stylesheet=g,!0},y.prototype.addImage=function(g,w){if(this.getImage(g))return this.fire(new c.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(g,w),this._afterImageUpdated(g)},y.prototype.updateImage=function(g,w){this.imageManager.updateImage(g,w)},y.prototype.getImage=function(g){return this.imageManager.getImage(g)},y.prototype.removeImage=function(g){if(!this.getImage(g))return this.fire(new c.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(g),this._afterImageUpdated(g)},y.prototype._afterImageUpdated=function(g){this._availableImages=this.imageManager.listImages(),this._changedImages[g]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))},y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},y.prototype.addSource=function(g,w,P){var F=this;if(P===void 0&&(P={}),this._checkLoaded(),this.sourceCaches[g]!==void 0)throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(c.validateStyle.source,"sources."+g,w,null,P))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var N=this.sourceCaches[g]=new Ve(g,w,this.dispatcher);N.style=this,N.setEventedParent(this,function(){return{isSourceLoaded:F.loaded(),source:N.serialize(),sourceId:g}}),N.onAdd(this.map),this._changed=!0}},y.prototype.removeSource=function(g){if(this._checkLoaded(),this.sourceCaches[g]===void 0)throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===g)return this.fire(new c.ErrorEvent(new Error('Source "'+g+'" cannot be removed while layer "'+w+'" is using it.')));var P=this.sourceCaches[g];delete this.sourceCaches[g],delete this._updatedSources[g],P.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g})),P.setEventedParent(null),P.clearTiles(),P.onRemove&&P.onRemove(this.map),this._changed=!0},y.prototype.setGeoJSONSourceData=function(g,w){this._checkLoaded(),this.sourceCaches[g].getSource().setData(w),this._changed=!0},y.prototype.getSource=function(g){return this.sourceCaches[g]&&this.sourceCaches[g].getSource()},y.prototype.addLayer=function(g,w,P){P===void 0&&(P={}),this._checkLoaded();var F=g.id;if(this.getLayer(F))this.fire(new c.ErrorEvent(new Error('Layer with id "'+F+'" already exists on this map')));else{var N;if(g.type==="custom"){if(Vs(this,c.validateCustomStyleLayer(g)))return;N=c.createStyleLayer(g)}else{if(typeof g.source=="object"&&(this.addSource(F,g.source),g=c.clone$1(g),g=c.extend(g,{source:F})),this._validate(c.validateStyle.layer,"layers."+F,g,{arrayIndex:-1},P))return;N=c.createStyleLayer(g),this._validateLayer(N),N.setEventedParent(this,{layer:{id:F}}),this._serializedLayers[N.id]=N.serialize()}var H=w?this._order.indexOf(w):this._order.length;if(w&&H===-1)this.fire(new c.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));else{if(this._order.splice(H,0,F),this._layerOrderChanged=!0,this._layers[F]=N,this._removedLayers[F]&&N.source&&N.type!=="custom"){var Q=this._removedLayers[F];delete this._removedLayers[F],Q.type!==N.type?this._updatedSources[N.source]="clear":(this._updatedSources[N.source]="reload",this.sourceCaches[N.source].pause())}this._updateLayer(N),N.onAdd&&N.onAdd(this.map)}}},y.prototype.moveLayer=function(g,w){if(this._checkLoaded(),this._changed=!0,this._layers[g]){if(g!==w){var P=this._order.indexOf(g);this._order.splice(P,1);var F=w?this._order.indexOf(w):this._order.length;w&&F===-1?this.fire(new c.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.'))):(this._order.splice(F,0,g),this._layerOrderChanged=!0)}}else this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be moved.")))},y.prototype.removeLayer=function(g){this._checkLoaded();var w=this._layers[g];if(w){w.setEventedParent(null);var P=this._order.indexOf(g);this._order.splice(P,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[g]=w,delete this._layers[g],delete this._serializedLayers[g],delete this._updatedLayers[g],delete this._updatedPaintProps[g],w.onRemove&&w.onRemove(this.map)}else this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be removed.")))},y.prototype.getLayer=function(g){return this._layers[g]},y.prototype.hasLayer=function(g){return g in this._layers},y.prototype.setLayerZoomRange=function(g,w,P){this._checkLoaded();var F=this.getLayer(g);F?F.minzoom===w&&F.maxzoom===P||(w!=null&&(F.minzoom=w),P!=null&&(F.maxzoom=P),this._updateLayer(F)):this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot have zoom extent.")))},y.prototype.setFilter=function(g,w,P){P===void 0&&(P={}),this._checkLoaded();var F=this.getLayer(g);if(F){if(!c.deepEqual(F.filter,w))return w==null?(F.filter=void 0,void this._updateLayer(F)):void(this._validate(c.validateStyle.filter,"layers."+F.id+".filter",w,null,P)||(F.filter=c.clone$1(w),this._updateLayer(F)))}else this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be filtered.")))},y.prototype.getFilter=function(g){return c.clone$1(this.getLayer(g).filter)},y.prototype.setLayoutProperty=function(g,w,P,F){F===void 0&&(F={}),this._checkLoaded();var N=this.getLayer(g);N?c.deepEqual(N.getLayoutProperty(w),P)||(N.setLayoutProperty(w,P,F),this._updateLayer(N)):this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getLayoutProperty=function(g,w){var P=this.getLayer(g);if(P)return P.getLayoutProperty(w);this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style.")))},y.prototype.setPaintProperty=function(g,w,P,F){F===void 0&&(F={}),this._checkLoaded();var N=this.getLayer(g);N?c.deepEqual(N.getPaintProperty(w),P)||(N.setPaintProperty(w,P,F)&&this._updateLayer(N),this._changed=!0,this._updatedPaintProps[g]=!0):this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getPaintProperty=function(g,w){return this.getLayer(g).getPaintProperty(w)},y.prototype.setFeatureState=function(g,w){this._checkLoaded();var P=g.source,F=g.sourceLayer,N=this.sourceCaches[P];if(N!==void 0){var H=N.getSource().type;H==="geojson"&&F?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):H!=="vector"||F?(g.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),N.setFeatureState(F,g.id,w)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")))},y.prototype.removeFeatureState=function(g,w){this._checkLoaded();var P=g.source,F=this.sourceCaches[P];if(F!==void 0){var N=F.getSource().type,H=N==="vector"?g.sourceLayer:void 0;N!=="vector"||H?w&&typeof g.id!="string"&&typeof g.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):F.removeFeatureState(H,g.id,w):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")))},y.prototype.getFeatureState=function(g){this._checkLoaded();var w=g.source,P=g.sourceLayer,F=this.sourceCaches[w];if(F!==void 0){if(F.getSource().type!=="vector"||P)return g.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),F.getFeatureState(P,g.id);this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")))},y.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},y.prototype.serialize=function(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(g){return g.serialize()}),layers:this._serializeLayers(this._order)},function(g){return g!==void 0})},y.prototype._updateLayer=function(g){this._updatedLayers[g.id]=!0,g.source&&!this._updatedSources[g.source]&&this.sourceCaches[g.source].getSource().type!=="raster"&&(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause()),this._changed=!0},y.prototype._flattenAndSortRenderedFeatures=function(g){for(var w=this,P=function(oi){return w._layers[oi].type==="fill-extrusion"},F={},N=[],H=this._order.length-1;H>=0;H--){var Q=this._order[H];if(P(Q)){F[Q]=H;for(var ae=0,_e=g;ae<_e.length;ae+=1){var xe=_e[ae][Q];if(xe)for(var Ee=0,Fe=xe;Ee<Fe.length;Ee+=1)N.push(Fe[Ee])}}}N.sort(function(oi,ri){return ri.intersectionZ-oi.intersectionZ});for(var Oe=[],Xe=this._order.length-1;Xe>=0;Xe--){var Ce=this._order[Xe];if(P(Ce))for(var je=N.length-1;je>=0;je--){var et=N[je].feature;if(F[et.layer.id]<Xe)break;Oe.push(et),N.pop()}else for(var pt=0,xt=g;pt<xt.length;pt+=1){var Tt=xt[pt][Ce];if(Tt)for(var kt=0,Ht=Tt;kt<Ht.length;kt+=1)Oe.push(Ht[kt].feature)}}return Oe},y.prototype.queryRenderedFeatures=function(g,w,P){w&&w.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var F={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var N=0,H=w.layers;N<H.length;N+=1){var Q=H[N],ae=this._layers[Q];if(!ae)return this.fire(new c.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be queried for features."))),[];F[ae.source]=!0}}var _e=[];for(var xe in w.availableImages=this._availableImages,this.sourceCaches)w.layers&&!F[xe]||_e.push(ai(this.sourceCaches[xe],this._layers,this._serializedLayers,g,w,P));return this.placement&&_e.push(function(Ee,Fe,Oe,Xe,Ce,je,et){for(var pt={},xt=je.queryRenderedSymbols(Xe),Tt=[],kt=0,Ht=Object.keys(xt).map(Number);kt<Ht.length;kt+=1)Tt.push(et[Ht[kt]]);Tt.sort(dt);for(var oi=function(){var Hi=Ti[ri],Xn=Hi.featureIndex.lookupSymbolFeatures(xt[Hi.bucketInstanceId],Fe,Hi.bucketIndex,Hi.sourceLayerIndex,Ce.filter,Ce.layers,Ce.availableImages,Ee);for(var Pi in Xn){var _n=pt[Pi]=pt[Pi]||[],Vn=Xn[Pi];Vn.sort(function(Sn,tn){var Qi=Hi.featureSortOrder;if(Qi){var $r=Qi.indexOf(Sn.featureIndex);return Qi.indexOf(tn.featureIndex)-$r}return tn.featureIndex-Sn.featureIndex});for(var hn=0,an=Vn;hn<an.length;hn+=1)_n.push(an[hn])}},ri=0,Ti=Tt;ri<Ti.length;ri+=1)oi();var Zi=function(Hi){pt[Hi].forEach(function(Xn){var Pi=Xn.feature,_n=Oe[Ee[Hi].source].getFeatureState(Pi.layer["source-layer"],Pi.id);Pi.source=Pi.layer.source,Pi.layer["source-layer"]&&(Pi.sourceLayer=Pi.layer["source-layer"]),Pi.state=_n})};for(var $i in pt)Zi($i);return pt}(this._layers,this._serializedLayers,this.sourceCaches,g,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_e)},y.prototype.querySourceFeatures=function(g,w){w&&w.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var P=this.sourceCaches[g];return P?function(F,N){for(var H=F.getRenderableIds().map(function(Fe){return F.getTileByID(Fe)}),Q=[],ae={},_e=0;_e<H.length;_e++){var xe=H[_e],Ee=xe.tileID.canonical.key;ae[Ee]||(ae[Ee]=!0,xe.querySourceFeatures(Q,N))}return Q}(P,w):[]},y.prototype.addSourceType=function(g,w,P){return y.getSourceType(g)?P(new Error('A source type called "'+g+'" already exists.')):(y.setSourceType(g,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:g,url:w.workerSourceURL},P):P(null,null))},y.prototype.getLight=function(){return this.light.getLight()},y.prototype.setLight=function(g,w){w===void 0&&(w={}),this._checkLoaded();var P=this.light.getLight(),F=!1;for(var N in g)if(!c.deepEqual(g[N],P[N])){F=!0;break}if(F){var H={now:c.browser.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(g,w),this.light.updateTransitions(H)}},y.prototype._validate=function(g,w,P,F,N){return N===void 0&&(N={}),(!N||N.validate!==!1)&&Vs(this,g.call(c.validateStyle,c.extend({key:w,style:this.serialize(),value:P,styleSpec:c.styleSpec},F)))},y.prototype._remove=function(){for(var g in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[g].setEventedParent(null);for(var w in this.sourceCaches)this.sourceCaches[w].clearTiles(),this.sourceCaches[w].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},y.prototype._clearSource=function(g){this.sourceCaches[g].clearTiles()},y.prototype._reloadSource=function(g){this.sourceCaches[g].resume(),this.sourceCaches[g].reload()},y.prototype._updateSources=function(g){for(var w in this.sourceCaches)this.sourceCaches[w].update(g)},y.prototype._generateCollisionBoxes=function(){for(var g in this.sourceCaches)this._reloadSource(g)},y.prototype._updatePlacement=function(g,w,P,F,N){N===void 0&&(N=!1);for(var H=!1,Q=!1,ae={},_e=0,xe=this._order;_e<xe.length;_e+=1){var Ee=this._layers[xe[_e]];if(Ee.type==="symbol"){if(!ae[Ee.source]){var Fe=this.sourceCaches[Ee.source];ae[Ee.source]=Fe.getRenderableIds(!0).map(function(et){return Fe.getTileByID(et)}).sort(function(et,pt){return pt.tileID.overscaledZ-et.tileID.overscaledZ||(et.tileID.isLessThan(pt.tileID)?-1:1)})}var Oe=this.crossTileSymbolIndex.addLayer(Ee,ae[Ee.source],g.center.lng);H=H||Oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((N=N||this._layerOrderChanged||P===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.browser.now(),g.zoom))&&(this.pauseablePlacement=new ou(g,this._order,N,w,P,F,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.browser.now()),Q=!0),H&&this.pauseablePlacement.placement.setStale()),Q||H)for(var Xe=0,Ce=this._order;Xe<Ce.length;Xe+=1){var je=this._layers[Ce[Xe]];je.type==="symbol"&&this.placement.updateLayerOpacities(je,ae[je.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.browser.now())},y.prototype._releaseSymbolFadeTiles=function(){for(var g in this.sourceCaches)this.sourceCaches[g].releaseSymbolFadeTiles()},y.prototype.getImages=function(g,w,P){this.imageManager.getImages(w.icons,P),this._updateTilesForChangedImages();var F=this.sourceCaches[w.source];F&&F.setDependencies(w.tileID.key,w.type,w.icons)},y.prototype.getGlyphs=function(g,w,P){this.glyphManager.getGlyphs(w.stacks,P)},y.prototype.getResource=function(g,w,P){return c.makeRequest(w,P)},y}(c.Evented);qo.getSourceType=function(f){return Jt[f]},qo.setSourceType=function(f,y){Jt[f]=y},qo.registerForPluginStateChange=c.registerForPluginStateChange;var so=c.createLayout([{name:"a_pos",type:"Int16",components:2}]),Go=Pr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ju=Pr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qu=Pr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Gu=Pr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),au=Pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),su=Pr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),zl=Pr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),lu=Pr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Hu=Pr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),uu=Pr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),nh=Pr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Dl=Pr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ss=Pr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),rh=Pr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ho=Pr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),wc=Pr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Gs=Pr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Hs=Pr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cl=Pr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),xs=Pr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ls=Pr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ja=Pr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Zs=Pr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ws=Pr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Zu=Pr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ws=Pr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Pr(f,y){var g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=y.match(/attribute ([\w]+) ([\w]+)/g),P=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=F?F.concat(P):P,H={};return{fragmentSource:f=f.replace(g,function(Q,ae,_e,xe,Ee){return H[Ee]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
varying `+_e+" "+xe+" "+Ee+`;
#else
uniform `+_e+" "+xe+" u_"+Ee+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ee+`
    `+_e+" "+xe+" "+Ee+" = u_"+Ee+`;
#endif
`}),vertexSource:y=y.replace(g,function(Q,ae,_e,xe,Ee){var Fe=xe==="float"?"vec2":"vec4",Oe=Ee.match(/color/)?"color":Fe;return H[Ee]?ae==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
uniform lowp float u_`+Ee+`_t;
attribute `+_e+" "+Fe+" a_"+Ee+`;
varying `+_e+" "+xe+" "+Ee+`;
#else
uniform `+_e+" "+xe+" u_"+Ee+`;
#endif
`:Oe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+Ee+" = a_"+Ee+`;
#else
    `+_e+" "+xe+" "+Ee+" = u_"+Ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+Ee+" = unpack_mix_"+Oe+"(a_"+Ee+", u_"+Ee+`_t);
#else
    `+_e+" "+xe+" "+Ee+" = u_"+Ee+`;
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
uniform lowp float u_`+Ee+`_t;
attribute `+_e+" "+Fe+" a_"+Ee+`;
#else
uniform `+_e+" "+xe+" u_"+Ee+`;
#endif
`:Oe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+_e+" "+xe+" "+Ee+" = a_"+Ee+`;
#else
    `+_e+" "+xe+" "+Ee+" = u_"+Ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+_e+" "+xe+" "+Ee+" = unpack_mix_"+Oe+"(a_"+Ee+", u_"+Ee+`_t);
#else
    `+_e+" "+xe+" "+Ee+" = u_"+Ee+`;
#endif
`}),staticAttributes:w,staticUniforms:N}}var hl=Object.freeze({__proto__:null,prelude:Go,background:ju,backgroundPattern:qu,circle:Gu,clippingMask:au,heatmap:su,heatmapTexture:zl,collisionBox:lu,collisionCircle:Hu,debug:uu,fill:nh,fillOutline:Dl,fillOutlinePattern:ss,fillPattern:rh,fillExtrusion:Ho,fillExtrusionPattern:wc,hillshadePrepare:Gs,hillshade:Hs,line:cl,lineGradient:xs,linePattern:ls,lineSDF:ja,raster:Zs,symbolIcon:ws,symbolSDF:Zu,symbolTextAndIcon:Ws}),Es=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ec(f){for(var y=[],g=0;g<f.length;g++)if(f[g]!==null){var w=f[g].split(" ");y.push(w.pop())}return y}Es.prototype.bind=function(f,y,g,w,P,F,N,H){this.context=f;for(var Q=this.boundPaintVertexBuffers.length!==w.length,ae=0;!Q&&ae<w.length;ae++)this.boundPaintVertexBuffers[ae]!==w[ae]&&(Q=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===y&&this.boundLayoutVertexBuffer===g&&!Q&&this.boundIndexBuffer===P&&this.boundVertexOffset===F&&this.boundDynamicVertexBuffer===N&&this.boundDynamicVertexBuffer2===H?(f.bindVertexArrayOES.set(this.vao),N&&N.bind(),P&&P.dynamicDraw&&P.bind(),H&&H.bind()):this.freshBind(y,g,w,P,F,N,H)},Es.prototype.freshBind=function(f,y,g,w,P,F,N){var H,Q=f.numAttributes,ae=this.context,_e=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),H=0,this.boundProgram=f,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=w,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=N;else{H=ae.currentNumAttributes||0;for(var xe=Q;xe<H;xe++)_e.disableVertexAttribArray(xe)}y.enableAttributes(_e,f);for(var Ee=0,Fe=g;Ee<Fe.length;Ee+=1)Fe[Ee].enableAttributes(_e,f);F&&F.enableAttributes(_e,f),N&&N.enableAttributes(_e,f),y.bind(),y.setVertexAttribPointers(_e,f,P);for(var Oe=0,Xe=g;Oe<Xe.length;Oe+=1){var Ce=Xe[Oe];Ce.bind(),Ce.setVertexAttribPointers(_e,f,P)}F&&(F.bind(),F.setVertexAttribPointers(_e,f,P)),w&&w.bind(),N&&(N.bind(),N.setVertexAttribPointers(_e,f,P)),ae.currentNumAttributes=Q},Es.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Wu=function(f,y,g,w,P,F){var N=f.gl;this.program=N.createProgram();for(var H=Ec(g.staticAttributes),Q=w?w.getBinderAttributes():[],ae=H.concat(Q),_e=g.staticUniforms?Ec(g.staticUniforms):[],xe=w?w.getBinderUniforms():[],Ee=[],Fe=0,Oe=_e.concat(xe);Fe<Oe.length;Fe+=1){var Xe=Oe[Fe];Ee.indexOf(Xe)<0&&Ee.push(Xe)}var Ce=w?w.defines():[];F&&Ce.push("#define OVERDRAW_INSPECTOR;");var je=Ce.concat(Go.fragmentSource,g.fragmentSource).join(`
`),et=Ce.concat(Go.vertexSource,g.vertexSource).join(`
`),pt=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())this.failedToCreate=!0;else{N.shaderSource(pt,je),N.compileShader(pt),N.attachShader(this.program,pt);var xt=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())this.failedToCreate=!0;else{N.shaderSource(xt,et),N.compileShader(xt),N.attachShader(this.program,xt),this.attributes={};var Tt={};this.numAttributes=ae.length;for(var kt=0;kt<this.numAttributes;kt++)ae[kt]&&(N.bindAttribLocation(this.program,kt,ae[kt]),this.attributes[ae[kt]]=kt);N.linkProgram(this.program),N.deleteShader(xt),N.deleteShader(pt);for(var Ht=0;Ht<Ee.length;Ht++){var oi=Ee[Ht];if(oi&&!Tt[oi]){var ri=N.getUniformLocation(this.program,oi);ri&&(Tt[oi]=ri)}}this.fixedUniforms=P(f,Tt),this.binderUniforms=w?w.getUniforms(f,Tt):[]}}};function Dn(f,y,g){var w=1/Br(g,1,y.transform.tileZoom),P=Math.pow(2,g.tileID.overscaledZ),F=g.tileSize*Math.pow(2,y.transform.tileZoom)/P,N=F*(g.tileID.canonical.x+g.tileID.wrap*P),H=F*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[w,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[N>>16,H>>16],u_pixel_coord_lower:[65535&N,65535&H]}}Wu.prototype.draw=function(f,y,g,w,P,F,N,H,Q,ae,_e,xe,Ee,Fe,Oe,Xe){var Ce,je=f.gl;if(!this.failedToCreate){for(var et in f.program.set(this.program),f.setDepthMode(g),f.setStencilMode(w),f.setColorMode(P),f.setCullFace(F),this.fixedUniforms)this.fixedUniforms[et].set(N[et]);Fe&&Fe.setUniforms(f,this.binderUniforms,xe,{zoom:Ee});for(var pt=(Ce={},Ce[je.LINES]=2,Ce[je.TRIANGLES]=3,Ce[je.LINE_STRIP]=1,Ce)[y],xt=0,Tt=_e.get();xt<Tt.length;xt+=1){var kt=Tt[xt],Ht=kt.vaos||(kt.vaos={});(Ht[H]||(Ht[H]=new Es)).bind(f,this,Q,Fe?Fe.getPaintVertexBuffers():[],ae,kt.vertexOffset,Oe,Xe),je.drawElements(y,kt.primitiveLength*pt,je.UNSIGNED_SHORT,kt.primitiveOffset*pt*2)}}};var cu=function(f,y,g,w){var P=y.style.light,F=P.properties.get("position"),N=[F.x,F.y,F.z],H=c.create$1();P.properties.get("anchor")==="viewport"&&c.fromRotation(H,-y.transform.angle),c.transformMat3(N,N,H);var Q=P.properties.get("color");return{u_matrix:f,u_lightpos:N,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[Q.r,Q.g,Q.b],u_vertical_gradient:+g,u_opacity:w}},lr=function(f,y,g,w,P,F,N){return c.extend(cu(f,y,g,w),Dn(F,y,N),{u_height_factor:-Math.pow(2,P.overscaledZ)/N.tileSize/8})},Xa=function(f){return{u_matrix:f}},Dr=function(f,y,g,w){return c.extend(Xa(f),Dn(g,y,w))},lo=function(f,y){return{u_matrix:f,u_world:y}},hu=function(f,y,g,w,P){return c.extend(Dr(f,y,g,w),{u_world:P})},du=function(f,y,g,w){var P,F,N=f.transform;if(w.paint.get("circle-pitch-alignment")==="map"){var H=Br(g,1,N.zoom);P=!0,F=[H,H]}else P=!1,F=N.pixelsToGLUnits;return{u_camera_to_center_distance:N.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(y.posMatrix,g,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+P,u_device_pixel_ratio:c.browser.devicePixelRatio,u_extrude_scale:F}},dl=function(f,y,g){var w=Br(g,1,y.zoom),P=Math.pow(2,y.zoom-g.tileID.overscaledZ),F=g.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:y.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[y.pixelsToGLUnits[0]/(w*P),y.pixelsToGLUnits[1]/(w*P)],u_overscale_factor:F}},Xu=function(f,y,g){return{u_matrix:f,u_inv_matrix:y,u_camera_to_center_distance:g.cameraToCenterDistance,u_viewport_size:[g.width,g.height]}},us=function(f,y,g){return g===void 0&&(g=1),{u_matrix:f,u_color:y,u_overlay:0,u_overlay_scale:g}},cs=function(f){return{u_matrix:f}},pu=function(f,y,g,w){return{u_matrix:f,u_extrude_scale:Br(y,1,g),u_intensity:w}},Xs=function(f,y,g){var w=f.transform;return{u_matrix:Ic(f,y,g),u_ratio:1/Br(y,1,w.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Rr=function(f,y,g,w){return c.extend(Xs(f,y,g),{u_image:0,u_image_height:w})},Is=function(f,y,g,w){var P=f.transform,F=ta(y,P);return{u_matrix:Ic(f,y,g),u_texsize:y.imageAtlasTexture.size,u_ratio:1/Br(y,1,P.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_image:0,u_scale:[F,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},Ku=function(f,y,g,w,P){var F=f.lineAtlas,N=ta(y,f.transform),H=g.layout.get("line-cap")==="round",Q=F.getDash(w.from,H),ae=F.getDash(w.to,H),_e=Q.width*P.fromScale,xe=ae.width*P.toScale;return c.extend(Xs(f,y,g),{u_patternscale_a:[N/_e,-Q.height/2],u_patternscale_b:[N/xe,-ae.height/2],u_sdfgamma:F.width/(256*Math.min(_e,xe)*c.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:ae.y,u_mix:P.t})};function ta(f,y){return 1/Br(f,1,y.tileZoom)}function Ic(f,y,g){return f.translatePosMatrix(y.tileID.posMatrix,y,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}var oh=function(f,y,g,w,P){return{u_matrix:f,u_tl_parent:y,u_scale_parent:g,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(N=P.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(F=P.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:Sc(P.paint.get("raster-hue-rotate"))};var F,N};function Sc(f){f*=Math.PI/180;var y=Math.sin(f),g=Math.cos(f);return[(2*g+1)/3,(-Math.sqrt(3)*y-g+1)/3,(Math.sqrt(3)*y-g+1)/3]}var Ss,Ts=function(f,y,g,w,P,F,N,H,Q,ae){var _e=P.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:y?y.uSizeT:0,u_size:y?y.uSize:0,u_camera_to_center_distance:_e.cameraToCenterDistance,u_pitch:_e.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:_e.width/_e.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:F,u_label_plane_matrix:N,u_coord_matrix:H,u_is_text:+Q,u_pitch_with_map:+w,u_texsize:ae,u_texture:0}},pl=function(f,y,g,w,P,F,N,H,Q,ae,_e){var xe=P.transform;return c.extend(Ts(f,y,g,w,P,F,N,H,Q,ae),{u_gamma_scale:w?Math.cos(xe._pitch)*xe.cameraToCenterDistance:1,u_device_pixel_ratio:c.browser.devicePixelRatio,u_is_halo:+_e})},fu=function(f,y,g,w,P,F,N,H,Q,ae){return c.extend(pl(f,y,g,w,P,F,N,H,!0,Q,!0),{u_texsize_icon:ae,u_texture_icon:1})},Ks=function(f,y,g){return{u_matrix:f,u_opacity:y,u_color:g}},As=function(f,y,g,w,P,F){return c.extend(function(N,H,Q,ae){var _e=Q.imageManager.getPattern(N.from.toString()),xe=Q.imageManager.getPattern(N.to.toString()),Ee=Q.imageManager.getPixelSize(),Fe=Ee.width,Oe=Ee.height,Xe=Math.pow(2,ae.tileID.overscaledZ),Ce=ae.tileSize*Math.pow(2,Q.transform.tileZoom)/Xe,je=Ce*(ae.tileID.canonical.x+ae.tileID.wrap*Xe),et=Ce*ae.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:_e.tl,u_pattern_br_a:_e.br,u_pattern_tl_b:xe.tl,u_pattern_br_b:xe.br,u_texsize:[Fe,Oe],u_mix:H.t,u_pattern_size_a:_e.displaySize,u_pattern_size_b:xe.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/Br(ae,1,Q.transform.tileZoom),u_pixel_coord_upper:[je>>16,et>>16],u_pixel_coord_lower:[65535&je,65535&et]}}(w,F,g,P),{u_matrix:f,u_opacity:y})},Tc={fillExtrusion:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_lightpos:new c.Uniform3f(f,y.u_lightpos),u_lightintensity:new c.Uniform1f(f,y.u_lightintensity),u_lightcolor:new c.Uniform3f(f,y.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,y.u_vertical_gradient),u_opacity:new c.Uniform1f(f,y.u_opacity)}},fillExtrusionPattern:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_lightpos:new c.Uniform3f(f,y.u_lightpos),u_lightintensity:new c.Uniform1f(f,y.u_lightintensity),u_lightcolor:new c.Uniform3f(f,y.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,y.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,y.u_height_factor),u_image:new c.Uniform1i(f,y.u_image),u_texsize:new c.Uniform2f(f,y.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,y.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,y.u_scale),u_fade:new c.Uniform1f(f,y.u_fade),u_opacity:new c.Uniform1f(f,y.u_opacity)}},fill:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix)}},fillPattern:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_image:new c.Uniform1i(f,y.u_image),u_texsize:new c.Uniform2f(f,y.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,y.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,y.u_scale),u_fade:new c.Uniform1f(f,y.u_fade)}},fillOutline:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_world:new c.Uniform2f(f,y.u_world)}},fillOutlinePattern:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_world:new c.Uniform2f(f,y.u_world),u_image:new c.Uniform1i(f,y.u_image),u_texsize:new c.Uniform2f(f,y.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,y.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,y.u_scale),u_fade:new c.Uniform1f(f,y.u_fade)}},circle:function(f,y){return{u_camera_to_center_distance:new c.Uniform1f(f,y.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(f,y.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(f,y.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(f,y.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,y.u_matrix)}},collisionBox:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,y.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(f,y.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(f,y.u_extrude_scale),u_overscale_factor:new c.Uniform1f(f,y.u_overscale_factor)}},collisionCircle:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,y.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,y.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,y.u_viewport_size)}},debug:function(f,y){return{u_color:new c.UniformColor(f,y.u_color),u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_overlay:new c.Uniform1i(f,y.u_overlay),u_overlay_scale:new c.Uniform1f(f,y.u_overlay_scale)}},clippingMask:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix)}},heatmap:function(f,y){return{u_extrude_scale:new c.Uniform1f(f,y.u_extrude_scale),u_intensity:new c.Uniform1f(f,y.u_intensity),u_matrix:new c.UniformMatrix4f(f,y.u_matrix)}},heatmapTexture:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_world:new c.Uniform2f(f,y.u_world),u_image:new c.Uniform1i(f,y.u_image),u_color_ramp:new c.Uniform1i(f,y.u_color_ramp),u_opacity:new c.Uniform1f(f,y.u_opacity)}},hillshade:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_image:new c.Uniform1i(f,y.u_image),u_latrange:new c.Uniform2f(f,y.u_latrange),u_light:new c.Uniform2f(f,y.u_light),u_shadow:new c.UniformColor(f,y.u_shadow),u_highlight:new c.UniformColor(f,y.u_highlight),u_accent:new c.UniformColor(f,y.u_accent)}},hillshadePrepare:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_image:new c.Uniform1i(f,y.u_image),u_dimension:new c.Uniform2f(f,y.u_dimension),u_zoom:new c.Uniform1f(f,y.u_zoom),u_unpack:new c.Uniform4f(f,y.u_unpack)}},line:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_ratio:new c.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,y.u_units_to_pixels)}},lineGradient:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_ratio:new c.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,y.u_units_to_pixels),u_image:new c.Uniform1i(f,y.u_image),u_image_height:new c.Uniform1f(f,y.u_image_height)}},linePattern:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_texsize:new c.Uniform2f(f,y.u_texsize),u_ratio:new c.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_image:new c.Uniform1i(f,y.u_image),u_units_to_pixels:new c.Uniform2f(f,y.u_units_to_pixels),u_scale:new c.Uniform3f(f,y.u_scale),u_fade:new c.Uniform1f(f,y.u_fade)}},lineSDF:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_ratio:new c.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,y.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(f,y.u_patternscale_a),u_patternscale_b:new c.Uniform2f(f,y.u_patternscale_b),u_sdfgamma:new c.Uniform1f(f,y.u_sdfgamma),u_image:new c.Uniform1i(f,y.u_image),u_tex_y_a:new c.Uniform1f(f,y.u_tex_y_a),u_tex_y_b:new c.Uniform1f(f,y.u_tex_y_b),u_mix:new c.Uniform1f(f,y.u_mix)}},raster:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_tl_parent:new c.Uniform2f(f,y.u_tl_parent),u_scale_parent:new c.Uniform1f(f,y.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,y.u_buffer_scale),u_fade_t:new c.Uniform1f(f,y.u_fade_t),u_opacity:new c.Uniform1f(f,y.u_opacity),u_image0:new c.Uniform1i(f,y.u_image0),u_image1:new c.Uniform1i(f,y.u_image1),u_brightness_low:new c.Uniform1f(f,y.u_brightness_low),u_brightness_high:new c.Uniform1f(f,y.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,y.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,y.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,y.u_spin_weights)}},symbolIcon:function(f,y){return{u_is_size_zoom_constant:new c.Uniform1i(f,y.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,y.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,y.u_size_t),u_size:new c.Uniform1f(f,y.u_size),u_camera_to_center_distance:new c.Uniform1f(f,y.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,y.u_pitch),u_rotate_symbol:new c.Uniform1i(f,y.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,y.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,y.u_fade_change),u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,y.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,y.u_coord_matrix),u_is_text:new c.Uniform1i(f,y.u_is_text),u_pitch_with_map:new c.Uniform1i(f,y.u_pitch_with_map),u_texsize:new c.Uniform2f(f,y.u_texsize),u_texture:new c.Uniform1i(f,y.u_texture)}},symbolSDF:function(f,y){return{u_is_size_zoom_constant:new c.Uniform1i(f,y.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,y.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,y.u_size_t),u_size:new c.Uniform1f(f,y.u_size),u_camera_to_center_distance:new c.Uniform1f(f,y.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,y.u_pitch),u_rotate_symbol:new c.Uniform1i(f,y.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,y.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,y.u_fade_change),u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,y.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,y.u_coord_matrix),u_is_text:new c.Uniform1i(f,y.u_is_text),u_pitch_with_map:new c.Uniform1i(f,y.u_pitch_with_map),u_texsize:new c.Uniform2f(f,y.u_texsize),u_texture:new c.Uniform1i(f,y.u_texture),u_gamma_scale:new c.Uniform1f(f,y.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,y.u_is_halo)}},symbolTextAndIcon:function(f,y){return{u_is_size_zoom_constant:new c.Uniform1i(f,y.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,y.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,y.u_size_t),u_size:new c.Uniform1f(f,y.u_size),u_camera_to_center_distance:new c.Uniform1f(f,y.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,y.u_pitch),u_rotate_symbol:new c.Uniform1i(f,y.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,y.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,y.u_fade_change),u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,y.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,y.u_coord_matrix),u_is_text:new c.Uniform1i(f,y.u_is_text),u_pitch_with_map:new c.Uniform1i(f,y.u_pitch_with_map),u_texsize:new c.Uniform2f(f,y.u_texsize),u_texsize_icon:new c.Uniform2f(f,y.u_texsize_icon),u_texture:new c.Uniform1i(f,y.u_texture),u_texture_icon:new c.Uniform1i(f,y.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,y.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,y.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,y.u_is_halo)}},background:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_opacity:new c.Uniform1f(f,y.u_opacity),u_color:new c.UniformColor(f,y.u_color)}},backgroundPattern:function(f,y){return{u_matrix:new c.UniformMatrix4f(f,y.u_matrix),u_opacity:new c.Uniform1f(f,y.u_opacity),u_image:new c.Uniform1i(f,y.u_image),u_pattern_tl_a:new c.Uniform2f(f,y.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,y.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,y.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,y.u_pattern_br_b),u_texsize:new c.Uniform2f(f,y.u_texsize),u_mix:new c.Uniform1f(f,y.u_mix),u_pattern_size_a:new c.Uniform2f(f,y.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,y.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,y.u_scale_a),u_scale_b:new c.Uniform1f(f,y.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,y.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,y.u_tile_units_to_pixels)}}};function hs(f,y,g,w,P,F,N){for(var H=f.context,Q=H.gl,ae=f.useProgram("collisionBox"),_e=[],xe=0,Ee=0,Fe=0;Fe<w.length;Fe++){var Oe=w[Fe],Xe=y.getTile(Oe),Ce=Xe.getBucket(g);if(Ce){var je=Oe.posMatrix;P[0]===0&&P[1]===0||(je=f.translatePosMatrix(Oe.posMatrix,Xe,P,F));var et=N?Ce.textCollisionBox:Ce.iconCollisionBox,pt=Ce.collisionCircleArray;if(pt.length>0){var xt=c.create(),Tt=je;c.mul(xt,Ce.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul(xt,xt,Ce.placementViewportMatrix),_e.push({circleArray:pt,circleOffset:Ee,transform:Tt,invTransform:xt}),Ee=xe+=pt.length/4}et&&ae.draw(H,Q.LINES,Se.disabled,ze.disabled,f.colorModeForRenderPass(),it.disabled,dl(je,f.transform,Xe),g.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,f.transform.zoom,null,null,et.collisionVertexBuffer)}}if(N&&_e.length){var kt=f.useProgram("collisionCircle"),Ht=new c.StructArrayLayout2f1f2i16;Ht.resize(4*xe),Ht._trim();for(var oi=0,ri=0,Ti=_e;ri<Ti.length;ri+=1)for(var Zi=Ti[ri],$i=0;$i<Zi.circleArray.length/4;$i++){var Hi=4*$i,Xn=Zi.circleArray[Hi+0],Pi=Zi.circleArray[Hi+1],_n=Zi.circleArray[Hi+2],Vn=Zi.circleArray[Hi+3];Ht.emplace(oi++,Xn,Pi,_n,Vn,0),Ht.emplace(oi++,Xn,Pi,_n,Vn,1),Ht.emplace(oi++,Xn,Pi,_n,Vn,2),Ht.emplace(oi++,Xn,Pi,_n,Vn,3)}(!Ss||Ss.length<2*xe)&&(Ss=function(uo){var wo=2*uo,Qo=new c.StructArrayLayout3ui6;Qo.resize(wo),Qo._trim();for(var io=0;io<wo;io++){var er=6*io;Qo.uint16[er+0]=4*io+0,Qo.uint16[er+1]=4*io+1,Qo.uint16[er+2]=4*io+2,Qo.uint16[er+3]=4*io+2,Qo.uint16[er+4]=4*io+3,Qo.uint16[er+5]=4*io+0}return Qo}(xe));for(var hn=H.createIndexBuffer(Ss,!0),an=H.createVertexBuffer(Ht,c.collisionCircleLayout.members,!0),Sn=0,tn=_e;Sn<tn.length;Sn+=1){var Qi=tn[Sn],$r=Xu(Qi.transform,Qi.invTransform,f.transform);kt.draw(H,Q.TRIANGLES,Se.disabled,ze.disabled,f.colorModeForRenderPass(),it.disabled,$r,g.id,an,hn,c.SegmentVector.simpleSegment(0,2*Qi.circleOffset,Qi.circleArray.length,Qi.circleArray.length/2),null,f.transform.zoom,null,null,null)}an.destroy(),hn.destroy()}}var Da=c.identity(new Float32Array(16));function mu(f,y,g,w,P,F){var N=c.getAnchorAlignment(f),H=-(N.horizontalAlign-.5)*y,Q=-(N.verticalAlign-.5)*g,ae=c.evaluateVariableOffset(f,w);return new c.Point((H/P+ae[0])*F,(Q/P+ae[1])*F)}function gu(f,y,g,w,P,F,N,H,Q,ae,_e){var xe=f.text.placedSymbolArray,Ee=f.text.dynamicLayoutVertexArray,Fe=f.icon.dynamicLayoutVertexArray,Oe={};Ee.clear();for(var Xe=0;Xe<xe.length;Xe++){var Ce=xe.get(Xe),je=Ce.hidden||!Ce.crossTileID||f.allowVerticalPlacement&&!Ce.placedOrientation?null:w[Ce.crossTileID];if(je){var et=new c.Point(Ce.anchorX,Ce.anchorY),pt=Ii(et,g?H:N),xt=dn(F.cameraToCenterDistance,pt.signedDistanceFromCamera),Tt=P.evaluateSizeForFeature(f.textSizeData,ae,Ce)*xt/c.ONE_EM;g&&(Tt*=f.tilePixelRatio/Q);for(var kt=mu(je.anchor,je.width,je.height,je.textOffset,je.textBoxScale,Tt),Ht=g?Ii(et.add(kt),N).point:pt.point.add(y?kt.rotate(-F.angle):kt),oi=f.allowVerticalPlacement&&Ce.placedOrientation===c.WritingMode.vertical?Math.PI/2:0,ri=0;ri<Ce.numGlyphs;ri++)c.addDynamicAttributes(Ee,Ht,oi);_e&&Ce.associatedIconIndex>=0&&(Oe[Ce.associatedIconIndex]={shiftedAnchor:Ht,angle:oi})}else ea(Ce.numGlyphs,Ee)}if(_e){Fe.clear();for(var Ti=f.icon.placedSymbolArray,Zi=0;Zi<Ti.length;Zi++){var $i=Ti.get(Zi);if($i.hidden)ea($i.numGlyphs,Fe);else{var Hi=Oe[Zi];if(Hi)for(var Xn=0;Xn<$i.numGlyphs;Xn++)c.addDynamicAttributes(Fe,Hi.shiftedAnchor,Hi.angle);else ea($i.numGlyphs,Fe)}}f.icon.dynamicLayoutVertexBuffer.updateData(Fe)}f.text.dynamicLayoutVertexBuffer.updateData(Ee)}function fl(f,y,g){return g.iconsInText&&y?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Ka(f,y,g,w,P,F,N,H,Q,ae,_e,xe){for(var Ee=f.context,Fe=Ee.gl,Oe=f.transform,Xe=H==="map",Ce=Q==="map",je=Xe&&g.layout.get("symbol-placement")!=="point",et=Xe&&!Ce&&!je,pt=g.layout.get("symbol-sort-key").constantOr(1)!==void 0,xt=!1,Tt=f.depthModeForSublayer(0,Se.ReadOnly),kt=g.layout.get("text-variable-anchor"),Ht=[],oi=0,ri=w;oi<ri.length;oi+=1){var Ti=ri[oi],Zi=y.getTile(Ti),$i=Zi.getBucket(g);if($i){var Hi=P?$i.text:$i.icon;if(Hi&&Hi.segments.get().length){var Xn=Hi.programConfigurations.get(g.id),Pi=P||$i.sdfIcons,_n=P?$i.textSizeData:$i.iconSizeData,Vn=Ce||Oe.pitch!==0,hn=f.useProgram(fl(Pi,P,$i),Xn),an=c.evaluateSizeForZoom(_n,Oe.zoom),Sn=void 0,tn=[0,0],Qi=void 0,$r=void 0,uo=null,wo=void 0;if(P)Qi=Zi.glyphAtlasTexture,$r=Fe.LINEAR,Sn=Zi.glyphAtlasTexture.size,$i.iconsInText&&(tn=Zi.imageAtlasTexture.size,uo=Zi.imageAtlasTexture,wo=Vn||f.options.rotating||f.options.zooming||_n.kind==="composite"||_n.kind==="camera"?Fe.LINEAR:Fe.NEAREST);else{var Qo=g.layout.get("icon-size").constantOr(0)!==1||$i.iconsNeedLinear;Qi=Zi.imageAtlasTexture,$r=Pi||f.options.rotating||f.options.zooming||Qo||Vn?Fe.LINEAR:Fe.NEAREST,Sn=Zi.imageAtlasTexture.size}var io=Br(Zi,1,f.transform.zoom),er=nn(Ti.posMatrix,Ce,Xe,f.transform,io),ba=Vi(Ti.posMatrix,Ce,Xe,f.transform,io),pa=kt&&$i.hasTextData(),Ga=g.layout.get("icon-text-fit")!=="none"&&pa&&$i.hasIconData();je&&po($i,Ti.posMatrix,f,P,er,ba,Ce,ae);var zo=f.translatePosMatrix(Ti.posMatrix,Zi,F,N),Ha=je||P&&kt||Ga?Da:er,Za=f.translatePosMatrix(ba,Zi,F,N,!0),Qu=Pi&&g.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0,$u={program:hn,buffers:Hi,uniformValues:Pi?$i.iconsInText?fu(_n.kind,an,et,Ce,f,zo,Ha,Za,Sn,tn):pl(_n.kind,an,et,Ce,f,zo,Ha,Za,P,Sn,!0):Ts(_n.kind,an,et,Ce,f,zo,Ha,Za,P,Sn),atlasTexture:Qi,atlasTextureIcon:uo,atlasInterpolation:$r,atlasInterpolationIcon:wo,isSDF:Pi,hasHalo:Qu};if(pt&&$i.canOverlap){xt=!0;for(var bl=0,ec=Hi.segments.get();bl<ec.length;bl+=1){var wu=ec[bl];Ht.push({segments:new c.SegmentVector([wu]),sortKey:wu.sortKey,state:$u})}}else Ht.push({segments:Hi.segments,sortKey:0,state:$u})}}}xt&&Ht.sort(function(Gl,Rs){return Gl.sortKey-Rs.sortKey});for(var Qs=0,Eu=Ht;Qs<Eu.length;Qs+=1){var Ds=Eu[Qs],Do=Ds.state;if(Ee.activeTexture.set(Fe.TEXTURE0),Do.atlasTexture.bind(Do.atlasInterpolation,Fe.CLAMP_TO_EDGE),Do.atlasTextureIcon&&(Ee.activeTexture.set(Fe.TEXTURE1),Do.atlasTextureIcon&&Do.atlasTextureIcon.bind(Do.atlasInterpolationIcon,Fe.CLAMP_TO_EDGE)),Do.isSDF){var Wa=Do.uniformValues;Do.hasHalo&&(Wa.u_is_halo=1,Rl(Do.buffers,Ds.segments,g,f,Do.program,Tt,_e,xe,Wa)),Wa.u_is_halo=0}Rl(Do.buffers,Ds.segments,g,f,Do.program,Tt,_e,xe,Do.uniformValues)}}function Rl(f,y,g,w,P,F,N,H,Q){var ae=w.context;P.draw(ae,ae.gl.TRIANGLES,F,N,H,it.disabled,Q,g.id,f.layoutVertexBuffer,f.indexBuffer,y,g.paint,w.transform.zoom,f.programConfigurations.get(g.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Js(f,y,g,w,P,F,N){var H,Q,ae,_e,xe,Ee=f.context.gl,Fe=g.paint.get("fill-pattern"),Oe=Fe&&Fe.constantOr(1),Xe=g.getCrossfadeParameters();N?(Q=Oe&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=Ee.LINES):(Q=Oe?"fillPattern":"fill",H=Ee.TRIANGLES);for(var Ce=0,je=w;Ce<je.length;Ce+=1){var et=je[Ce],pt=y.getTile(et);if(!Oe||pt.patternsLoaded()){var xt=pt.getBucket(g);if(xt){var Tt=xt.programConfigurations.get(g.id),kt=f.useProgram(Q,Tt);Oe&&(f.context.activeTexture.set(Ee.TEXTURE0),pt.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Tt.updatePaintBuffers(Xe));var Ht=Fe.constantOr(null);if(Ht&&pt.imageAtlas){var oi=pt.imageAtlas,ri=oi.patternPositions[Ht.to.toString()],Ti=oi.patternPositions[Ht.from.toString()];ri&&Ti&&Tt.setConstantPatternPositions(ri,Ti)}var Zi=f.translatePosMatrix(et.posMatrix,pt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(N){_e=xt.indexBuffer2,xe=xt.segments2;var $i=[Ee.drawingBufferWidth,Ee.drawingBufferHeight];ae=Q==="fillOutlinePattern"&&Oe?hu(Zi,f,Xe,pt,$i):lo(Zi,$i)}else _e=xt.indexBuffer,xe=xt.segments,ae=Oe?Dr(Zi,f,Xe,pt):Xa(Zi);kt.draw(f.context,H,P,f.stencilModeForClipping(et),F,it.disabled,ae,g.id,xt.layoutVertexBuffer,_e,xe,g.paint,f.transform.zoom,Tt)}}}}function Ju(f,y,g,w,P,F,N){for(var H=f.context,Q=H.gl,ae=g.paint.get("fill-extrusion-pattern"),_e=ae.constantOr(1),xe=g.getCrossfadeParameters(),Ee=g.paint.get("fill-extrusion-opacity"),Fe=0,Oe=w;Fe<Oe.length;Fe+=1){var Xe=Oe[Fe],Ce=y.getTile(Xe),je=Ce.getBucket(g);if(je){var et=je.programConfigurations.get(g.id),pt=f.useProgram(_e?"fillExtrusionPattern":"fillExtrusion",et);_e&&(f.context.activeTexture.set(Q.TEXTURE0),Ce.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),et.updatePaintBuffers(xe));var xt=ae.constantOr(null);if(xt&&Ce.imageAtlas){var Tt=Ce.imageAtlas,kt=Tt.patternPositions[xt.to.toString()],Ht=Tt.patternPositions[xt.from.toString()];kt&&Ht&&et.setConstantPatternPositions(kt,Ht)}var oi=f.translatePosMatrix(Xe.posMatrix,Ce,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),ri=g.paint.get("fill-extrusion-vertical-gradient"),Ti=_e?lr(oi,f,ri,Ee,Xe,xe,Ce):cu(oi,f,ri,Ee);pt.draw(H,H.gl.TRIANGLES,P,F,N,it.backCCW,Ti,g.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,g.paint,f.transform.zoom,et)}}}function yu(f,y,g,w,P,F){var N=f.context,H=N.gl,Q=y.fbo;if(Q){var ae=f.useProgram("hillshade");N.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Q.colorAttachment.get());var _e=function(xe,Ee,Fe){var Oe=Fe.paint.get("hillshade-shadow-color"),Xe=Fe.paint.get("hillshade-highlight-color"),Ce=Fe.paint.get("hillshade-accent-color"),je=Fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=xe.transform.angle);var et,pt,xt,Tt=!xe.options.moving;return{u_matrix:xe.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),Tt),u_image:0,u_latrange:(et=Ee.tileID,pt=Math.pow(2,et.canonical.z),xt=et.canonical.y,[new c.MercatorCoordinate(0,xt/pt).toLngLat().lat,new c.MercatorCoordinate(0,(xt+1)/pt).toLngLat().lat]),u_light:[Fe.paint.get("hillshade-exaggeration"),je],u_shadow:Oe,u_highlight:Xe,u_accent:Ce}}(f,y,g);ae.draw(N,H.TRIANGLES,w,P,F,it.disabled,_e,g.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}}function ah(f,y,g,w,P,F){var N=f.context,H=N.gl,Q=y.dem;if(Q&&Q.data){var ae=Q.dim,_e=Q.stride,xe=Q.getPixels();if(N.activeTexture.set(H.TEXTURE1),N.pixelStoreUnpackPremultiplyAlpha.set(!1),y.demTexture=y.demTexture||f.getTileTexture(_e),y.demTexture){var Ee=y.demTexture;Ee.update(xe,{premultiply:!1}),Ee.bind(H.NEAREST,H.CLAMP_TO_EDGE)}else y.demTexture=new c.Texture(N,xe,H.RGBA,{premultiply:!1}),y.demTexture.bind(H.NEAREST,H.CLAMP_TO_EDGE);N.activeTexture.set(H.TEXTURE0);var Fe=y.fbo;if(!Fe){var Oe=new c.Texture(N,{width:ae,height:ae,data:null},H.RGBA);Oe.bind(H.LINEAR,H.CLAMP_TO_EDGE),(Fe=y.fbo=N.createFramebuffer(ae,ae,!0)).colorAttachment.set(Oe.texture)}N.bindFramebuffer.set(Fe.framebuffer),N.viewport.set([0,0,ae,ae]),f.useProgram("hillshadePrepare").draw(N,H.TRIANGLES,w,P,F,it.disabled,function(Xe,Ce){var je=Ce.stride,et=c.create();return c.ortho(et,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(et,et,[0,-c.EXTENT,0]),{u_matrix:et,u_image:1,u_dimension:[je,je],u_zoom:Xe.overscaledZ,u_unpack:Ce.getUnpackVector()}}(y.tileID,Q),g.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),y.needsHillshadePrepare=!1}}function Cs(f,y,g,w,P){var F=w.paint.get("raster-fade-duration");if(F>0){var N=c.browser.now(),H=(N-f.timeAdded)/F,Q=y?(N-y.timeAdded)/F:-1,ae=g.getSource(),_e=P.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),xe=!y||Math.abs(y.tileID.overscaledZ-_e)>Math.abs(f.tileID.overscaledZ-_e),Ee=xe&&f.refreshedUponExpiration?1:c.clamp(xe?H:1-Q,0,1);return f.refreshedUponExpiration&&H>=1&&(f.refreshedUponExpiration=!1),y?{opacity:1,mix:1-Ee}:{opacity:Ee,mix:0}}return{opacity:1,mix:0}}var Yu=new c.Color(1,0,0,1),Ol=new c.Color(0,1,0,1),Bl=new c.Color(0,0,1,1),ia=new c.Color(1,0,1,1),na=new c.Color(0,1,1,1);function Ac(f,y,g,w){Fl(f,0,y+g/2,f.transform.width,g,w)}function ks(f,y,g,w){Fl(f,y-g/2,0,g,f.transform.height,w)}function Fl(f,y,g,w,P,F){var N=f.context,H=N.gl;H.enable(H.SCISSOR_TEST),H.scissor(y*c.browser.devicePixelRatio,g*c.browser.devicePixelRatio,w*c.browser.devicePixelRatio,P*c.browser.devicePixelRatio),N.clear({color:F}),H.disable(H.SCISSOR_TEST)}function ml(f,y,g){var w=f.context,P=w.gl,F=g.posMatrix,N=f.useProgram("debug"),H=Se.disabled,Q=ze.disabled,ae=f.colorModeForRenderPass();w.activeTexture.set(P.TEXTURE0),f.emptyTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),N.draw(w,P.LINE_STRIP,H,Q,ae,it.disabled,us(F,c.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);var _e=y.getTileByID(g.key).latestRawTileData,xe=Math.floor((_e&&_e.byteLength||0)/1024),Ee=y.getTile(g).tileSize,Fe=512/Math.min(Ee,512)*(g.overscaledZ/f.transform.zoom)*.5,Oe=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Oe+=" => "+g.overscaledZ),function(Xe,Ce){Xe.initDebugOverlayCanvas();var je=Xe.debugOverlayCanvas,et=Xe.context.gl,pt=Xe.debugOverlayCanvas.getContext("2d");pt.clearRect(0,0,je.width,je.height),pt.shadowColor="white",pt.shadowBlur=2,pt.lineWidth=1.5,pt.strokeStyle="white",pt.textBaseline="top",pt.font="bold 36px Open Sans, sans-serif",pt.fillText(Ce,5,5),pt.strokeText(Ce,5,5),Xe.debugOverlayTexture.update(je),Xe.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)}(f,Oe+" "+xe+"kb"),N.draw(w,P.TRIANGLES,H,Q,$e.alphaBlended,it.disabled,us(F,c.Color.transparent,Fe),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}var Ra={symbol:function(f,y,g,w,P){if(f.renderPass==="translucent"){var F=ze.disabled,N=f.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(H,Q,ae,_e,xe,Ee,Fe){for(var Oe=Q.transform,Xe=xe==="map",Ce=Ee==="map",je=0,et=H;je<et.length;je+=1){var pt=et[je],xt=_e.getTile(pt),Tt=xt.getBucket(ae);if(Tt&&Tt.text&&Tt.text.segments.get().length){var kt=c.evaluateSizeForZoom(Tt.textSizeData,Oe.zoom),Ht=Br(xt,1,Q.transform.zoom),oi=nn(pt.posMatrix,Ce,Xe,Q.transform,Ht),ri=ae.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(kt){var Ti=Math.pow(2,Oe.zoom-xt.tileID.overscaledZ);gu(Tt,Xe,Ce,Fe,c.symbolSize,Oe,oi,pt.posMatrix,Ti,kt,ri)}}}}(w,f,g,y,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),P),g.paint.get("icon-opacity").constantOr(1)!==0&&Ka(f,y,g,w,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),F,N),g.paint.get("text-opacity").constantOr(1)!==0&&Ka(f,y,g,w,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),F,N),y.map.showCollisionBoxes&&(hs(f,y,g,w,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),hs(f,y,g,w,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))}},circle:function(f,y,g,w){if(f.renderPass==="translucent"){var P=g.paint.get("circle-opacity"),F=g.paint.get("circle-stroke-width"),N=g.paint.get("circle-stroke-opacity"),H=g.layout.get("circle-sort-key").constantOr(1)!==void 0;if(P.constantOr(1)!==0||F.constantOr(1)!==0&&N.constantOr(1)!==0){for(var Q=f.context,ae=Q.gl,_e=f.depthModeForSublayer(0,Se.ReadOnly),xe=ze.disabled,Ee=f.colorModeForRenderPass(),Fe=[],Oe=0;Oe<w.length;Oe++){var Xe=w[Oe],Ce=y.getTile(Xe),je=Ce.getBucket(g);if(je){var et=je.programConfigurations.get(g.id),pt={programConfiguration:et,program:f.useProgram("circle",et),layoutVertexBuffer:je.layoutVertexBuffer,indexBuffer:je.indexBuffer,uniformValues:du(f,Xe,Ce,g)};if(H)for(var xt=0,Tt=je.segments.get();xt<Tt.length;xt+=1){var kt=Tt[xt];Fe.push({segments:new c.SegmentVector([kt]),sortKey:kt.sortKey,state:pt})}else Fe.push({segments:je.segments,sortKey:0,state:pt})}}H&&Fe.sort(function(Zi,$i){return Zi.sortKey-$i.sortKey});for(var Ht=0,oi=Fe;Ht<oi.length;Ht+=1){var ri=oi[Ht],Ti=ri.state;Ti.program.draw(Q,ae.TRIANGLES,_e,xe,Ee,it.disabled,Ti.uniformValues,g.id,Ti.layoutVertexBuffer,Ti.indexBuffer,ri.segments,g.paint,f.transform.zoom,Ti.programConfiguration)}}}},heatmap:function(f,y,g,w){if(g.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){var P=f.context,F=P.gl,N=ze.disabled,H=new $e([F.ONE,F.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(Fe,Oe,Xe){var Ce=Fe.gl;Fe.activeTexture.set(Ce.TEXTURE1),Fe.viewport.set([0,0,Oe.width/4,Oe.height/4]);var je=Xe.heatmapFbo;if(je)Ce.bindTexture(Ce.TEXTURE_2D,je.colorAttachment.get()),Fe.bindFramebuffer.set(je.framebuffer);else{var et=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,et),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),je=Xe.heatmapFbo=Fe.createFramebuffer(Oe.width/4,Oe.height/4,!1),function(pt,xt,Tt,kt){var Ht=pt.gl;Ht.texImage2D(Ht.TEXTURE_2D,0,Ht.RGBA,xt.width/4,xt.height/4,0,Ht.RGBA,pt.extRenderToTextureHalfFloat?pt.extTextureHalfFloat.HALF_FLOAT_OES:Ht.UNSIGNED_BYTE,null),kt.colorAttachment.set(Tt)}(Fe,Oe,et,je)}})(P,f,g),P.clear({color:c.Color.transparent});for(var Q=0;Q<w.length;Q++){var ae=w[Q];if(!y.hasRenderableParent(ae)){var _e=y.getTile(ae),xe=_e.getBucket(g);if(xe){var Ee=xe.programConfigurations.get(g.id);f.useProgram("heatmap",Ee).draw(P,F.TRIANGLES,Se.disabled,N,H,it.disabled,pu(ae.posMatrix,_e,f.transform.zoom,g.paint.get("heatmap-intensity")),g.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,g.paint,f.transform.zoom,Ee)}}}P.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(Fe,Oe){var Xe=Fe.context,Ce=Xe.gl,je=Oe.heatmapFbo;if(je){Xe.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_2D,je.colorAttachment.get()),Xe.activeTexture.set(Ce.TEXTURE1);var et=Oe.colorRampTexture;et||(et=Oe.colorRampTexture=new c.Texture(Xe,Oe.colorRamp,Ce.RGBA)),et.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Fe.useProgram("heatmapTexture").draw(Xe,Ce.TRIANGLES,Se.disabled,ze.disabled,Fe.colorModeForRenderPass(),it.disabled,function(pt,xt,Tt,kt){var Ht=c.create();c.ortho(Ht,0,pt.width,pt.height,0,0,1);var oi=pt.context.gl;return{u_matrix:Ht,u_world:[oi.drawingBufferWidth,oi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:xt.paint.get("heatmap-opacity")}}(Fe,Oe),Oe.id,Fe.viewportBuffer,Fe.quadTriangleIndexBuffer,Fe.viewportSegments,Oe.paint,Fe.transform.zoom)}}(f,g))},line:function(f,y,g,w){if(f.renderPass==="translucent"){var P=g.paint.get("line-opacity"),F=g.paint.get("line-width");if(P.constantOr(1)!==0&&F.constantOr(1)!==0)for(var N=f.depthModeForSublayer(0,Se.ReadOnly),H=f.colorModeForRenderPass(),Q=g.paint.get("line-dasharray"),ae=g.paint.get("line-pattern"),_e=ae.constantOr(1),xe=g.paint.get("line-gradient"),Ee=g.getCrossfadeParameters(),Fe=_e?"linePattern":Q?"lineSDF":xe?"lineGradient":"line",Oe=f.context,Xe=Oe.gl,Ce=!0,je=0,et=w;je<et.length;je+=1){var pt=et[je],xt=y.getTile(pt);if(!_e||xt.patternsLoaded()){var Tt=xt.getBucket(g);if(Tt){var kt=Tt.programConfigurations.get(g.id),Ht=f.context.program.get(),oi=f.useProgram(Fe,kt),ri=Ce||oi.program!==Ht,Ti=ae.constantOr(null);if(Ti&&xt.imageAtlas){var Zi=xt.imageAtlas,$i=Zi.patternPositions[Ti.to.toString()],Hi=Zi.patternPositions[Ti.from.toString()];$i&&Hi&&kt.setConstantPatternPositions($i,Hi)}var Xn=_e?Is(f,xt,g,Ee):Q?Ku(f,xt,g,Q,Ee):xe?Rr(f,xt,g,Tt.lineClipsArray.length):Xs(f,xt,g);if(_e)Oe.activeTexture.set(Xe.TEXTURE0),xt.imageAtlasTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),kt.updatePaintBuffers(Ee);else if(Q&&(ri||f.lineAtlas.dirty))Oe.activeTexture.set(Xe.TEXTURE0),f.lineAtlas.bind(Oe);else if(xe){var Pi=Tt.gradients[g.id],_n=Pi.texture;if(g.gradientVersion!==Pi.version){var Vn=256;if(g.stepInterpolant){var hn=y.getSource().maxzoom,an=pt.canonical.z===hn?Math.ceil(1<<f.transform.maxZoom-pt.canonical.z):1;Vn=c.clamp(c.nextPowerOfTwo(Tt.maxLineLength/c.EXTENT*1024*an),256,Oe.maxTextureSize)}Pi.gradient=c.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Vn,image:Pi.gradient||void 0,clips:Tt.lineClipsArray}),Pi.texture?Pi.texture.update(Pi.gradient):Pi.texture=new c.Texture(Oe,Pi.gradient,Xe.RGBA),Pi.version=g.gradientVersion,_n=Pi.texture}Oe.activeTexture.set(Xe.TEXTURE0),_n.bind(g.stepInterpolant?Xe.NEAREST:Xe.LINEAR,Xe.CLAMP_TO_EDGE)}oi.draw(Oe,Xe.TRIANGLES,N,f.stencilModeForClipping(pt),H,it.disabled,Xn,g.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,g.paint,f.transform.zoom,kt,Tt.layoutVertexBuffer2),Ce=!1}}}}},fill:function(f,y,g,w){var P=g.paint.get("fill-color"),F=g.paint.get("fill-opacity");if(F.constantOr(1)!==0){var N=f.colorModeForRenderPass(),H=g.paint.get("fill-pattern"),Q=f.opaquePassEnabledForLayer()&&!H.constantOr(1)&&P.constantOr(c.Color.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===Q){var ae=f.depthModeForSublayer(1,f.renderPass==="opaque"?Se.ReadWrite:Se.ReadOnly);Js(f,y,g,w,ae,N,!1)}if(f.renderPass==="translucent"&&g.paint.get("fill-antialias")){var _e=f.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,Se.ReadOnly);Js(f,y,g,w,_e,N,!0)}}},"fill-extrusion":function(f,y,g,w){var P=g.paint.get("fill-extrusion-opacity");if(P!==0&&f.renderPass==="translucent"){var F=new Se(f.context.gl.LEQUAL,Se.ReadWrite,f.depthRangeFor3D);if(P!==1||g.paint.get("fill-extrusion-pattern").constantOr(1))Ju(f,y,g,w,F,ze.disabled,$e.disabled),Ju(f,y,g,w,F,f.stencilModeFor3D(),f.colorModeForRenderPass());else{var N=f.colorModeForRenderPass();Ju(f,y,g,w,F,ze.disabled,N)}}},hillshade:function(f,y,g,w){if(f.renderPass==="offscreen"||f.renderPass==="translucent"){for(var P=f.context,F=f.depthModeForSublayer(0,Se.ReadOnly),N=f.colorModeForRenderPass(),H=f.renderPass==="translucent"?f.stencilConfigForOverlap(w):[{},w],Q=H[0],ae=0,_e=H[1];ae<_e.length;ae+=1){var xe=_e[ae],Ee=y.getTile(xe);Ee.needsHillshadePrepare&&f.renderPass==="offscreen"?ah(f,Ee,g,F,ze.disabled,N):f.renderPass==="translucent"&&yu(f,Ee,g,F,Q[xe.overscaledZ],N)}P.viewport.set([0,0,f.width,f.height])}},raster:function(f,y,g,w){if(f.renderPass==="translucent"&&g.paint.get("raster-opacity")!==0&&w.length)for(var P=f.context,F=P.gl,N=y.getSource(),H=f.useProgram("raster"),Q=f.colorModeForRenderPass(),ae=N instanceof Xt?[{},w]:f.stencilConfigForOverlap(w),_e=ae[0],xe=ae[1],Ee=xe[xe.length-1].overscaledZ,Fe=!f.options.moving,Oe=0,Xe=xe;Oe<Xe.length;Oe+=1){var Ce=Xe[Oe],je=f.depthModeForSublayer(Ce.overscaledZ-Ee,g.paint.get("raster-opacity")===1?Se.ReadWrite:Se.ReadOnly,F.LESS),et=y.getTile(Ce),pt=f.transform.calculatePosMatrix(Ce.toUnwrapped(),Fe);et.registerFadeDuration(g.paint.get("raster-fade-duration"));var xt=y.findLoadedParent(Ce,0),Tt=Cs(et,xt,y,g,f.transform),kt=void 0,Ht=void 0,oi=g.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;P.activeTexture.set(F.TEXTURE0),et.texture.bind(oi,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(F.TEXTURE1),xt?(xt.texture.bind(oi,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),kt=Math.pow(2,xt.tileID.overscaledZ-et.tileID.overscaledZ),Ht=[et.tileID.canonical.x*kt%1,et.tileID.canonical.y*kt%1]):et.texture.bind(oi,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);var ri=oh(pt,Ht||[0,0],kt||1,Tt,g);N instanceof Xt?H.draw(P,F.TRIANGLES,je,ze.disabled,Q,it.disabled,ri,g.id,N.boundsBuffer,f.quadTriangleIndexBuffer,N.boundsSegments):H.draw(P,F.TRIANGLES,je,_e[Ce.overscaledZ],Q,it.disabled,ri,g.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,y,g){var w=g.paint.get("background-color"),P=g.paint.get("background-opacity");if(P!==0){var F=f.context,N=F.gl,H=f.transform,Q=H.tileSize,ae=g.paint.get("background-pattern");if(!f.isPatternMissing(ae)){var _e=!ae&&w.a===1&&P===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass===_e){var xe=ze.disabled,Ee=f.depthModeForSublayer(0,_e==="opaque"?Se.ReadWrite:Se.ReadOnly),Fe=f.colorModeForRenderPass(),Oe=f.useProgram(ae?"backgroundPattern":"background"),Xe=H.coveringTiles({tileSize:Q});ae&&(F.activeTexture.set(N.TEXTURE0),f.imageManager.bind(f.context));for(var Ce=g.getCrossfadeParameters(),je=0,et=Xe;je<et.length;je+=1){var pt=et[je],xt=f.transform.calculatePosMatrix(pt.toUnwrapped()),Tt=ae?As(xt,P,f,ae,{tileID:pt,tileSize:Q},Ce):Ks(xt,P,w);Oe.draw(F,N.TRIANGLES,Ee,xe,Fe,it.disabled,Tt,g.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}}}},debug:function(f,y,g){for(var w=0;w<g.length;w++)ml(f,y,g[w])},custom:function(f,y,g){var w=f.context,P=g.implementation;if(f.renderPass==="offscreen"){var F=P.prerender;F&&(f.setCustomLayerDefaults(),w.setColorMode(f.colorModeForRenderPass()),F.call(P,w.gl,f.transform.customLayerMatrix()),w.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),w.setColorMode(f.colorModeForRenderPass()),w.setStencilMode(ze.disabled);var N=P.renderingMode==="3d"?new Se(f.context.gl.LEQUAL,Se.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Se.ReadOnly);w.setDepthMode(N),P.render(w.gl,f.transform.customLayerMatrix()),w.setDirty(),f.setBaseState(),w.bindFramebuffer.set(null)}}},Gr=function(f,y){this.context=new Ie(f),this.transform=y,this._tileTextures={},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new as,this.gpuTimers={}};Gr.prototype.resize=function(f,y){if(this.width=f*c.browser.devicePixelRatio,this.height=y*c.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var g=0,w=this.style._order;g<w.length;g+=1)this.style._layers[w[g]].resize()},Gr.prototype.setup=function(){var f=this.context,y=new c.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(c.EXTENT,0),y.emplaceBack(0,c.EXTENT),y.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(y,so.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);var g=new c.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(c.EXTENT,0),g.emplaceBack(0,c.EXTENT),g.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=f.createVertexBuffer(g,so.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);var w=new c.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(c.EXTENT,0,c.EXTENT,0),w.emplaceBack(0,c.EXTENT,0,c.EXTENT),w.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(w,ni.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);var P=new c.StructArrayLayout2i4;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(P,so.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);var F=new c.StructArrayLayout1ui2;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(F);var N=new c.StructArrayLayout3ui6;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(N),this.emptyTexture=new c.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA);var H=this.context.gl;this.stencilClearMode=new ze({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO)},Gr.prototype.clearStencil=function(){var f=this.context,y=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var g=c.create();c.ortho(g,0,this.width,this.height,0,0,1),c.scale(g,g,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,y.TRIANGLES,Se.disabled,this.stencilClearMode,$e.disabled,it.disabled,cs(g),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Gr.prototype._renderTileClippingMasks=function(f,y){if(this.currentStencilSource!==f.source&&f.isTileClipped()&&y&&y.length){this.currentStencilSource=f.source;var g=this.context,w=g.gl;this.nextStencilID+y.length>256&&this.clearStencil(),g.setColorMode($e.disabled),g.setDepthMode(Se.disabled);var P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var F=0,N=y;F<N.length;F+=1){var H=N[F],Q=this._tileClippingMaskIDs[H.key]=this.nextStencilID++;P.draw(g,w.TRIANGLES,Se.disabled,new ze({func:w.ALWAYS,mask:0},Q,255,w.KEEP,w.KEEP,w.REPLACE),$e.disabled,it.disabled,cs(H.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Gr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var f=this.nextStencilID++,y=this.context.gl;return new ze({func:y.NOTEQUAL,mask:255},f,255,y.KEEP,y.KEEP,y.REPLACE)},Gr.prototype.stencilModeForClipping=function(f){var y=this.context.gl;return new ze({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,y.KEEP,y.KEEP,y.REPLACE)},Gr.prototype.stencilConfigForOverlap=function(f){var y,g=this.context.gl,w=f.sort(function(Q,ae){return ae.overscaledZ-Q.overscaledZ}),P=w[w.length-1].overscaledZ,F=w[0].overscaledZ-P+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();for(var N={},H=0;H<F;H++)N[H+P]=new ze({func:g.GEQUAL,mask:255},H+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=F,[N,w]}return[(y={},y[P]=ze.disabled,y),w]},Gr.prototype.colorModeForRenderPass=function(){var f=this.context.gl;return this._showOverdrawInspector?new $e([f.CONSTANT_COLOR,f.ONE],new c.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$e.unblended:$e.alphaBlended},Gr.prototype.depthModeForSublayer=function(f,y,g){if(!this.opaquePassEnabledForLayer())return Se.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new Se(g||this.context.gl.LEQUAL,y,[w,w])},Gr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Gr.prototype.render=function(f,y){var g=this;this.style=f,this.options=y,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(c.browser.now()),this.imageManager.beginFrame();var w=this.style._order,P=this.style.sourceCaches;for(var F in P){var N=P[F];N.used&&N.prepare(this.context)}var H,Q,ae={},_e={},xe={};for(var Ee in P){var Fe=P[Ee];ae[Ee]=Fe.getVisibleCoordinates(),_e[Ee]=ae[Ee].slice().reverse(),xe[Ee]=Fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<w.length;Oe++)if(this.style._layers[w[Oe]].is3D()){this.opaquePassCutoff=Oe;break}this.renderPass="offscreen";for(var Xe=0,Ce=w;Xe<Ce.length;Xe+=1){var je=this.style._layers[Ce[Xe]];if(je.hasOffscreenPass()&&!je.isHidden(this.transform.zoom)){var et=_e[je.source];(je.type==="custom"||et.length)&&this.renderLayer(this,P[je.source],je,et)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var pt=this.style._layers[w[this.currentLayer]],xt=P[pt.source],Tt=ae[pt.source];this._renderTileClippingMasks(pt,Tt),this.renderLayer(this,xt,pt,Tt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var kt=this.style._layers[w[this.currentLayer]],Ht=P[kt.source],oi=(kt.type==="symbol"?xe:_e)[kt.source];this._renderTileClippingMasks(kt,ae[kt.source]),this.renderLayer(this,Ht,kt,oi)}this.options.showTileBoundaries&&(c.values(this.style._layers).forEach(function(ri){ri.source&&!ri.isHidden(g.transform.zoom)&&(ri.source!==(Q&&Q.id)&&(Q=g.style.sourceCaches[ri.source]),(!H||H.getSource().maxzoom<Q.getSource().maxzoom)&&(H=Q))}),H&&Ra.debug(this,H,H.getVisibleCoordinates())),this.options.showPadding&&function(ri){var Ti=ri.transform.padding;Ac(ri,ri.transform.height-(Ti.top||0),3,Yu),Ac(ri,Ti.bottom||0,3,Ol),ks(ri,Ti.left||0,3,Bl),ks(ri,ri.transform.width-(Ti.right||0),3,ia);var Zi=ri.transform.centerPoint;(function($i,Hi,Xn,Pi){Fl($i,Hi-1,Xn-10,2,20,Pi),Fl($i,Hi-10,Xn-1,20,2,Pi)})(ri,Zi.x,ri.transform.height-Zi.y,na)}(this),this.context.setDefault()},Gr.prototype.renderLayer=function(f,y,g,w){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||w.length)&&(this.id=g.id,this.gpuTimingStart(g),Ra[g.type](f,y,g,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Gr.prototype.gpuTimingStart=function(f){if(this.options.gpuTiming){var y=this.context.extTimerQuery,g=this.gpuTimers[f.id];g||(g=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:y.createQueryEXT()}),g.calls++,y.beginQueryEXT(y.TIME_ELAPSED_EXT,g.query)}},Gr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}},Gr.prototype.collectGpuTimers=function(){var f=this.gpuTimers;return this.gpuTimers={},f},Gr.prototype.queryGpuTimers=function(f){var y={};for(var g in f){var w=f[g],P=this.context.extTimerQuery,F=P.getQueryObjectEXT(w.query,P.QUERY_RESULT_EXT)/1e6;P.deleteQueryEXT(w.query),y[g]=F}return y},Gr.prototype.translatePosMatrix=function(f,y,g,w,P){if(!g[0]&&!g[1])return f;var F=P?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(F){var N=Math.sin(F),H=Math.cos(F);g=[g[0]*H-g[1]*N,g[0]*N+g[1]*H]}var Q=[P?g[0]:Br(y,g[0],this.transform.zoom),P?g[1]:Br(y,g[1],this.transform.zoom),0],ae=new Float32Array(16);return c.translate(ae,f,Q),ae},Gr.prototype.saveTileTexture=function(f){var y=this._tileTextures[f.size[0]];y?y.push(f):this._tileTextures[f.size[0]]=[f]},Gr.prototype.getTileTexture=function(f){var y=this._tileTextures[f];return y&&y.length>0?y.pop():null},Gr.prototype.isPatternMissing=function(f){if(!f)return!1;if(!f.from||!f.to)return!0;var y=this.imageManager.getPattern(f.from.toString()),g=this.imageManager.getPattern(f.to.toString());return!y||!g},Gr.prototype.useProgram=function(f,y){this.cache=this.cache||{};var g=""+f+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[g]||(this.cache[g]=new Wu(this.context,f,hl[f],y,Tc[f],this._showOverdrawInspector)),this.cache[g]},Gr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Gr.prototype.setBaseState=function(){var f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)},Gr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=c.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Gr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ul=function(f,y){this.points=f,this.planes=y};Ul.fromInvProjectionMatrix=function(f,y,g){var w=Math.pow(2,g),P=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(N){return c.transformMat4([],N,f)}).map(function(N){return c.scale$1([],N,1/N[3]/y*w)}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(N){var H=c.sub([],P[N[0]],P[N[1]]),Q=c.sub([],P[N[2]],P[N[1]]),ae=c.normalize([],c.cross([],H,Q)),_e=-c.dot(ae,P[N[1]]);return ae.concat(_e)});return new Ul(P,F)};var gl=function(f,y){this.min=f,this.max=y,this.center=c.scale$2([],c.add([],this.min,this.max),.5)};gl.prototype.quadrant=function(f){for(var y=[f%2==0,f<2],g=c.clone$2(this.min),w=c.clone$2(this.max),P=0;P<y.length;P++)g[P]=y[P]?this.min[P]:this.center[P],w[P]=y[P]?this.center[P]:this.max[P];return w[2]=this.max[2],new gl(g,w)},gl.prototype.distanceX=function(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]},gl.prototype.distanceY=function(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]},gl.prototype.intersects=function(f){for(var y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],g=!0,w=0;w<f.planes.length;w++){for(var P=f.planes[w],F=0,N=0;N<y.length;N++)F+=c.dot$1(P,y[N])>=0;if(F===0)return 0;F!==y.length&&(g=!1)}if(g)return 2;for(var H=0;H<3;H++){for(var Q=Number.MAX_VALUE,ae=-Number.MAX_VALUE,_e=0;_e<f.points.length;_e++){var xe=f.points[_e][H]-this.min[H];Q=Math.min(Q,xe),ae=Math.max(ae,xe)}if(ae<0||Q>this.max[H]-this.min[H])return 0}return 1};var Ms=function(f,y,g,w){if(f===void 0&&(f=0),y===void 0&&(y=0),g===void 0&&(g=0),w===void 0&&(w=0),isNaN(f)||f<0||isNaN(y)||y<0||isNaN(g)||g<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=y,this.left=g,this.right=w};Ms.prototype.interpolate=function(f,y,g){return y.top!=null&&f.top!=null&&(this.top=c.number(f.top,y.top,g)),y.bottom!=null&&f.bottom!=null&&(this.bottom=c.number(f.bottom,y.bottom,g)),y.left!=null&&f.left!=null&&(this.left=c.number(f.left,y.left,g)),y.right!=null&&f.right!=null&&(this.right=c.number(f.right,y.right,g)),this},Ms.prototype.getCenter=function(f,y){var g=c.clamp((this.left+f-this.right)/2,0,f),w=c.clamp((this.top+y-this.bottom)/2,0,y);return new c.Point(g,w)},Ms.prototype.equals=function(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right},Ms.prototype.clone=function(){return new Ms(this.top,this.bottom,this.left,this.right)},Ms.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Nn=function(f,y,g,w,P){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=P===void 0||P,this._minZoom=f||0,this._maxZoom=y||22,this._minPitch=g==null?0:g,this._maxPitch=w==null?60:w,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ms,this._posMatrixCache={},this._alignedPosMatrixCache={}},vr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Nn.prototype.clone=function(){var f=new Nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._calcMatrices(),f},vr.minZoom.get=function(){return this._minZoom},vr.minZoom.set=function(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))},vr.maxZoom.get=function(){return this._maxZoom},vr.maxZoom.set=function(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))},vr.minPitch.get=function(){return this._minPitch},vr.minPitch.set=function(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))},vr.maxPitch.get=function(){return this._maxPitch},vr.maxPitch.set=function(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))},vr.renderWorldCopies.get=function(){return this._renderWorldCopies},vr.renderWorldCopies.set=function(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f},vr.worldSize.get=function(){return this.tileSize*this.scale},vr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},vr.size.get=function(){return new c.Point(this.width,this.height)},vr.bearing.get=function(){return-this.angle/Math.PI*180},vr.bearing.set=function(f){var y=-c.wrap(f,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=c.create$2(),c.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},vr.pitch.get=function(){return this._pitch/Math.PI*180},vr.pitch.set=function(f){var y=c.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())},vr.fov.get=function(){return this._fov/Math.PI*180},vr.fov.set=function(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())},vr.zoom.get=function(){return this._zoom},vr.zoom.set=function(f){var y=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.scale=this.zoomScale(y),this.tileZoom=Math.floor(y),this.zoomFraction=y-this.tileZoom,this._constrain(),this._calcMatrices())},vr.center.get=function(){return this._center},vr.center.set=function(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())},vr.padding.get=function(){return this._edgeInsets.toJSON()},vr.padding.set=function(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())},vr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Nn.prototype.isPaddingEqual=function(f){return this._edgeInsets.equals(f)},Nn.prototype.interpolatePadding=function(f,y,g){this._unmodified=!1,this._edgeInsets.interpolate(f,y,g),this._constrain(),this._calcMatrices()},Nn.prototype.coveringZoomLevel=function(f){var y=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,y)},Nn.prototype.getVisibleUnwrappedCoordinates=function(f){var y=[new c.UnwrappedTileID(0,f)];if(this._renderWorldCopies)for(var g=this.pointCoordinate(new c.Point(0,0)),w=this.pointCoordinate(new c.Point(this.width,0)),P=this.pointCoordinate(new c.Point(this.width,this.height)),F=this.pointCoordinate(new c.Point(0,this.height)),N=Math.floor(Math.min(g.x,w.x,P.x,F.x)),H=Math.floor(Math.max(g.x,w.x,P.x,F.x)),Q=N-1;Q<=H+1;Q++)Q!==0&&y.push(new c.UnwrappedTileID(Q,f));return y},Nn.prototype.coveringTiles=function(f){var y=this.coveringZoomLevel(f),g=y;if(f.minzoom!==void 0&&y<f.minzoom)return[];f.maxzoom!==void 0&&y>f.maxzoom&&(y=f.maxzoom);var w=c.MercatorCoordinate.fromLngLat(this.center),P=Math.pow(2,y),F=[P*w.x,P*w.y,0],N=Ul.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y),H=f.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(H=y);var Q=function(ri){return{aabb:new gl([ri*P,0,0],[(ri+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ri,fullyVisible:!1}},ae=[],_e=[],xe=y,Ee=f.reparseOverscaled?g:y;if(this._renderWorldCopies)for(var Fe=1;Fe<=3;Fe++)ae.push(Q(-Fe)),ae.push(Q(Fe));for(ae.push(Q(0));ae.length>0;){var Oe=ae.pop(),Xe=Oe.x,Ce=Oe.y,je=Oe.fullyVisible;if(!je){var et=Oe.aabb.intersects(N);if(et===0)continue;je=et===2}var pt=Oe.aabb.distanceX(F),xt=Oe.aabb.distanceY(F),Tt=Math.max(Math.abs(pt),Math.abs(xt));if(Oe.zoom===xe||Tt>3+(1<<xe-Oe.zoom)-2&&Oe.zoom>=H)_e.push({tileID:new c.OverscaledTileID(Oe.zoom===xe?Ee:Oe.zoom,Oe.wrap,Oe.zoom,Xe,Ce),distanceSq:c.sqrLen([F[0]-.5-Xe,F[1]-.5-Ce])});else for(var kt=0;kt<4;kt++){var Ht=(Xe<<1)+kt%2,oi=(Ce<<1)+(kt>>1);ae.push({aabb:Oe.aabb.quadrant(kt),zoom:Oe.zoom+1,x:Ht,y:oi,wrap:Oe.wrap,fullyVisible:je})}}return _e.sort(function(ri,Ti){return ri.distanceSq-Ti.distanceSq}).map(function(ri){return ri.tileID})},Nn.prototype.resize=function(f,y){this.width=f,this.height=y,this.pixelsToGLUnits=[2/f,-2/y],this._constrain(),this._calcMatrices()},vr.unmodified.get=function(){return this._unmodified},Nn.prototype.zoomScale=function(f){return Math.pow(2,f)},Nn.prototype.scaleZoom=function(f){return Math.log(f)/Math.LN2},Nn.prototype.project=function(f){var y=c.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.Point(c.mercatorXfromLng(f.lng)*this.worldSize,c.mercatorYfromLat(y)*this.worldSize)},Nn.prototype.unproject=function(f){return new c.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()},vr.point.get=function(){return this.project(this.center)},Nn.prototype.setLocationAtPoint=function(f,y){var g=this.pointCoordinate(y),w=this.pointCoordinate(this.centerPoint),P=this.locationCoordinate(f),F=new c.MercatorCoordinate(P.x-(g.x-w.x),P.y-(g.y-w.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())},Nn.prototype.locationPoint=function(f){return this.coordinatePoint(this.locationCoordinate(f))},Nn.prototype.pointLocation=function(f){return this.coordinateLocation(this.pointCoordinate(f))},Nn.prototype.locationCoordinate=function(f){return c.MercatorCoordinate.fromLngLat(f)},Nn.prototype.coordinateLocation=function(f){return f.toLngLat()},Nn.prototype.pointCoordinate=function(f){var y=[f.x,f.y,0,1],g=[f.x,f.y,1,1];c.transformMat4(y,y,this.pixelMatrixInverse),c.transformMat4(g,g,this.pixelMatrixInverse);var w=y[3],P=g[3],F=y[1]/w,N=g[1]/P,H=y[2]/w,Q=g[2]/P,ae=H===Q?0:(0-H)/(Q-H);return new c.MercatorCoordinate(c.number(y[0]/w,g[0]/P,ae)/this.worldSize,c.number(F,N,ae)/this.worldSize)},Nn.prototype.coordinatePoint=function(f){var y=[f.x*this.worldSize,f.y*this.worldSize,0,1];return c.transformMat4(y,y,this.pixelMatrix),new c.Point(y[0]/y[3],y[1]/y[3])},Nn.prototype.getBounds=function(){return new c.LngLatBounds().extend(this.pointLocation(new c.Point(0,0))).extend(this.pointLocation(new c.Point(this.width,0))).extend(this.pointLocation(new c.Point(this.width,this.height))).extend(this.pointLocation(new c.Point(0,this.height)))},Nn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Nn.prototype.setMaxBounds=function(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Nn.prototype.calculatePosMatrix=function(f,y){y===void 0&&(y=!1);var g=f.key,w=y?this._alignedPosMatrixCache:this._posMatrixCache;if(w[g])return w[g];var P=f.canonical,F=this.worldSize/this.zoomScale(P.z),N=P.x+Math.pow(2,P.z)*f.wrap,H=c.identity(new Float64Array(16));return c.translate(H,H,[N*F,P.y*F,0]),c.scale(H,H,[F/c.EXTENT,F/c.EXTENT,1]),c.multiply(H,y?this.alignedProjMatrix:this.projMatrix,H),w[g]=new Float32Array(H),w[g]},Nn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Nn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var f,y,g,w,P=-90,F=90,N=-180,H=180,Q=this.size,ae=this._unmodified;if(this.latRange){var _e=this.latRange;P=c.mercatorYfromLat(_e[1])*this.worldSize,f=(F=c.mercatorYfromLat(_e[0])*this.worldSize)-P<Q.y?Q.y/(F-P):0}if(this.lngRange){var xe=this.lngRange;N=c.mercatorXfromLng(xe[0])*this.worldSize,y=(H=c.mercatorXfromLng(xe[1])*this.worldSize)-N<Q.x?Q.x/(H-N):0}var Ee=this.point,Fe=Math.max(y||0,f||0);if(Fe)return this.center=this.unproject(new c.Point(y?(H+N)/2:Ee.x,f?(F+P)/2:Ee.y)),this.zoom+=this.scaleZoom(Fe),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){var Oe=Ee.y,Xe=Q.y/2;Oe-Xe<P&&(w=P+Xe),Oe+Xe>F&&(w=F-Xe)}if(this.lngRange){var Ce=Ee.x,je=Q.x/2;Ce-je<N&&(g=N+je),Ce+je>H&&(g=H-je)}g===void 0&&w===void 0||(this.center=this.unproject(new c.Point(g!==void 0?g:Ee.x,w!==void 0?w:Ee.y))),this._unmodified=ae,this._constraining=!1}},Nn.prototype._calcMatrices=function(){if(this.height){var f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var y=Math.PI/2+this._pitch,g=this._fov*(.5+f.y/this.height),w=Math.sin(g)*this.cameraToCenterDistance/Math.sin(c.clamp(Math.PI-y-g,.01,Math.PI-.01)),P=this.point,F=P.x,N=P.y,H=1.01*(Math.cos(Math.PI/2-this._pitch)*w+this.cameraToCenterDistance),Q=this.height/50,ae=new Float64Array(16);c.perspective(ae,this._fov,this.width/this.height,Q,H),ae[8]=2*-f.x/this.width,ae[9]=2*f.y/this.height,c.scale(ae,ae,[1,-1,1]),c.translate(ae,ae,[0,0,-this.cameraToCenterDistance]),c.rotateX(ae,ae,this._pitch),c.rotateZ(ae,ae,this.angle),c.translate(ae,ae,[-F,-N,0]),this.mercatorMatrix=c.scale([],ae,[this.worldSize,this.worldSize,this.worldSize]),c.scale(ae,ae,[1,1,c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ae,this.invProjMatrix=c.invert([],this.projMatrix);var _e=this.width%2/2,xe=this.height%2/2,Ee=Math.cos(this.angle),Fe=Math.sin(this.angle),Oe=F-Math.round(F)+Ee*_e+Fe*xe,Xe=N-Math.round(N)+Ee*xe+Fe*_e,Ce=new Float64Array(ae);if(c.translate(Ce,Ce,[Oe>.5?Oe-1:Oe,Xe>.5?Xe-1:Xe,0]),this.alignedProjMatrix=Ce,ae=c.create(),c.scale(ae,ae,[this.width/2,-this.height/2,1]),c.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=c.create(),c.scale(ae,ae,[1,-1,1]),c.translate(ae,ae,[-1,-1,0]),c.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ae=c.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ae,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Nn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var f=this.pointCoordinate(new c.Point(0,0)),y=[f.x*this.worldSize,f.y*this.worldSize,0,1];return c.transformMat4(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Nn.prototype.getCameraPoint=function(){var f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.Point(0,f))},Nn.prototype.getCameraQueryGeometry=function(f){var y=this.getCameraPoint();if(f.length===1)return[f[0],y];for(var g=y.x,w=y.y,P=y.x,F=y.y,N=0,H=f;N<H.length;N+=1){var Q=H[N];g=Math.min(g,Q.x),w=Math.min(w,Q.y),P=Math.max(P,Q.x),F=Math.max(F,Q.y)}return[new c.Point(g,w),new c.Point(P,w),new c.Point(P,F),new c.Point(g,F),new c.Point(g,w)]},Object.defineProperties(Nn.prototype,vr);var Si=function(f){var y,g,w,P;this._hashName=f&&encodeURIComponent(f),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(y=this._updateHashUnthrottled.bind(this),g=!1,w=null,P=function(){w=null,g&&(y(),w=setTimeout(P,300),g=!1)},function(){return g=!0,w||P(),w})};Si.prototype.addTo=function(f){return this._map=f,c.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Si.prototype.remove=function(){return c.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Si.prototype.getHashString=function(f){var y=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,w=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,w),F=Math.round(y.lng*P)/P,N=Math.round(y.lat*P)/P,H=this._map.getBearing(),Q=this._map.getPitch(),ae="";if(ae+=f?"/"+F+"/"+N+"/"+g:g+"/"+N+"/"+F,(H||Q)&&(ae+="/"+Math.round(10*H)/10),Q&&(ae+="/"+Math.round(Q)),this._hashName){var _e=this._hashName,xe=!1,Ee=c.window.location.hash.slice(1).split("&").map(function(Fe){var Oe=Fe.split("=")[0];return Oe===_e?(xe=!0,Oe+"="+ae):Fe}).filter(function(Fe){return Fe});return xe||Ee.push(_e+"="+ae),"#"+Ee.join("&")}return"#"+ae},Si.prototype._getCurrentHash=function(){var f,y=this,g=c.window.location.hash.replace("#","");return this._hashName?(g.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===y._hashName&&(f=w)}),(f&&f[1]||"").split("/")):g.split("/")},Si.prototype._onHashChange=function(){var f=this._getCurrentHash();if(f.length>=3&&!f.some(function(g){return isNaN(g)})){var y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:y,pitch:+(f[4]||0)}),!0}return!1},Si.prototype._updateHashUnthrottled=function(){var f=c.window.location.href.replace(/(#.+)?$/,this.getHashString());try{c.window.history.replaceState(c.window.history.state,null,f)}catch{}};var yl={linearity:.3,easing:c.bezier(0,0,.3,1)},ds=c.extend({deceleration:2500,maxSpeed:1400},yl),Ja=c.extend({deceleration:20,maxSpeed:1400},yl),_u=c.extend({deceleration:1e3,maxSpeed:360},yl),Mi=c.extend({deceleration:1e3,maxSpeed:90},yl),_l=function(f){this._map=f,this.clear()};function Nl(f,y){(!f.duration||f.duration<y.duration)&&(f.duration=y.duration,f.easing=y.easing)}function Ps(f,y,g){var w=g.maxSpeed,P=g.linearity,F=g.deceleration,N=c.clamp(f*P/(y/1e3),-w,w),H=Math.abs(N)/(F*P);return{easing:g.easing,duration:1e3*H,amount:N*(H/2)}}_l.prototype.clear=function(){this._inertiaBuffer=[]},_l.prototype.record=function(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.browser.now(),settings:f})},_l.prototype._drainInertiaBuffer=function(){for(var f=this._inertiaBuffer,y=c.browser.now();f.length>0&&y-f[0].time>160;)f.shift()},_l.prototype._onMoveEnd=function(f){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var y={zoom:0,bearing:0,pitch:0,pan:new c.Point(0,0),pinchAround:void 0,around:void 0},g=0,w=this._inertiaBuffer;g<w.length;g+=1){var P=w[g].settings;y.zoom+=P.zoomDelta||0,y.bearing+=P.bearingDelta||0,y.pitch+=P.pitchDelta||0,P.panDelta&&y.pan._add(P.panDelta),P.around&&(y.around=P.around),P.pinchAround&&(y.pinchAround=P.pinchAround)}var F=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,N={};if(y.pan.mag()){var H=Ps(y.pan.mag(),F,c.extend({},ds,f||{}));N.offset=y.pan.mult(H.amount/y.pan.mag()),N.center=this._map.transform.center,Nl(N,H)}if(y.zoom){var Q=Ps(y.zoom,F,Ja);N.zoom=this._map.transform.zoom+Q.amount,Nl(N,Q)}if(y.bearing){var ae=Ps(y.bearing,F,_u);N.bearing=this._map.transform.bearing+c.clamp(ae.amount,-179,179),Nl(N,ae)}if(y.pitch){var _e=Ps(y.pitch,F,Mi);N.pitch=this._map.transform.pitch+_e.amount,Nl(N,_e)}if(N.zoom||N.bearing){var xe=y.pinchAround===void 0?y.around:y.pinchAround;N.around=xe?this._map.unproject(xe):this._map.getCenter()}return this.clear(),c.extend(N,{noMoveStart:!0})}};var Jr=function(f){function y(w,P,F,N){N===void 0&&(N={});var H=I.mousePos(P.getCanvasContainer(),F),Q=P.unproject(H);f.call(this,w,c.extend({point:H,lngLat:Q,originalEvent:F},N)),this._defaultPrevented=!1,this.target=P}f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(c.Event),Vl=function(f){function y(w,P,F){var N=w==="touchend"?F.changedTouches:F.touches,H=I.touchPos(P.getCanvasContainer(),N),Q=H.map(function(xe){return P.unproject(xe)}),ae=H.reduce(function(xe,Ee,Fe,Oe){return xe.add(Ee.div(Oe.length))},new c.Point(0,0)),_e=P.unproject(ae);f.call(this,w,{points:H,point:ae,lngLats:Q,lngLat:_e,originalEvent:F}),this._defaultPrevented=!1}f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(c.Event),Cc=function(f){function y(w,P,F){f.call(this,w,{originalEvent:F}),this._defaultPrevented=!1}f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(c.Event),fo=function(f,y){this._map=f,this._clickTolerance=y.clickTolerance};fo.prototype.reset=function(){delete this._mousedownPos},fo.prototype.wheel=function(f){return this._firePreventable(new Cc(f.type,this._map,f))},fo.prototype.mousedown=function(f,y){return this._mousedownPos=y,this._firePreventable(new Jr(f.type,this._map,f))},fo.prototype.mouseup=function(f){this._map.fire(new Jr(f.type,this._map,f))},fo.prototype.click=function(f,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new Jr(f.type,this._map,f))},fo.prototype.dblclick=function(f){return this._firePreventable(new Jr(f.type,this._map,f))},fo.prototype.mouseover=function(f){this._map.fire(new Jr(f.type,this._map,f))},fo.prototype.mouseout=function(f){this._map.fire(new Jr(f.type,this._map,f))},fo.prototype.touchstart=function(f){return this._firePreventable(new Vl(f.type,this._map,f))},fo.prototype.touchmove=function(f){this._map.fire(new Vl(f.type,this._map,f))},fo.prototype.touchend=function(f){this._map.fire(new Vl(f.type,this._map,f))},fo.prototype.touchcancel=function(f){this._map.fire(new Vl(f.type,this._map,f))},fo.prototype._firePreventable=function(f){if(this._map.fire(f),f.defaultPrevented)return{}},fo.prototype.isEnabled=function(){return!0},fo.prototype.isActive=function(){return!1},fo.prototype.enable=function(){},fo.prototype.disable=function(){};var Ri=function(f){this._map=f};Ri.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ri.prototype.mousemove=function(f){this._map.fire(new Jr(f.type,this._map,f))},Ri.prototype.mousedown=function(){this._delayContextMenu=!0},Ri.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Jr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ri.prototype.contextmenu=function(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new Jr(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()},Ri.prototype.isEnabled=function(){return!0},Ri.prototype.isActive=function(){return!1},Ri.prototype.enable=function(){},Ri.prototype.disable=function(){};var Jo=function(f,y){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=y.clickTolerance||1};function jl(f,y){for(var g={},w=0;w<f.length;w++)g[f[w].identifier]=y[w];return g}Jo.prototype.isEnabled=function(){return!!this._enabled},Jo.prototype.isActive=function(){return!!this._active},Jo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Jo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jo.prototype.mousedown=function(f,y){this.isEnabled()&&f.shiftKey&&f.button===0&&(I.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)},Jo.prototype.mousemoveWindow=function(f,y){if(this._active){var g=y;if(!(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=g,this._box||(this._box=I.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));var P=Math.min(w.x,g.x),F=Math.max(w.x,g.x),N=Math.min(w.y,g.y),H=Math.max(w.y,g.y);I.setTransform(this._box,"translate("+P+"px,"+N+"px)"),this._box.style.width=F-P+"px",this._box.style.height=H-N+"px"}}},Jo.prototype.mouseupWindow=function(f,y){var g=this;if(this._active&&f.button===0){var w=this._startPos,P=y;if(this.reset(),I.suppressClick(),w.x!==P.x||w.y!==P.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:function(F){return F.fitScreenCoordinates(w,P,g._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",f)}},Jo.prototype.keydown=function(f){this._active&&f.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",f))},Jo.prototype.blur=function(){this.reset()},Jo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos},Jo.prototype._fireEvent=function(f,y){return this._map.fire(new c.Event(f,{originalEvent:y}))};var Ys=function(f){this.reset(),this.numTouches=f.numTouches};Ys.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ys.prototype.touchstart=function(f,y,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=f.timeStamp),g.length===this.numTouches&&(this.centroid=function(w){for(var P=new c.Point(0,0),F=0,N=w;F<N.length;F+=1)P._add(N[F]);return P.div(w.length)}(y),this.touches=jl(g,y)))},Ys.prototype.touchmove=function(f,y,g){if(!this.aborted&&this.centroid){var w=jl(g,y);for(var P in this.touches){var F=w[P];(!F||F.dist(this.touches[P])>30)&&(this.aborted=!0)}}},Ys.prototype.touchend=function(f,y,g){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var Oa=function(f){this.singleTap=new Ys(f),this.numTaps=f.numTaps,this.reset()};Oa.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Oa.prototype.touchstart=function(f,y,g){this.singleTap.touchstart(f,y,g)},Oa.prototype.touchmove=function(f,y,g){this.singleTap.touchmove(f,y,g)},Oa.prototype.touchend=function(f,y,g){var w=this.singleTap.touchend(f,y,g);if(w){var P=f.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(w)<30;if(P&&F||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var Hr=function(){this._zoomIn=new Oa({numTouches:1,numTaps:2}),this._zoomOut=new Oa({numTouches:2,numTaps:1}),this.reset()};Hr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Hr.prototype.touchstart=function(f,y,g){this._zoomIn.touchstart(f,y,g),this._zoomOut.touchstart(f,y,g)},Hr.prototype.touchmove=function(f,y,g){this._zoomIn.touchmove(f,y,g),this._zoomOut.touchmove(f,y,g)},Hr.prototype.touchend=function(f,y,g){var w=this,P=this._zoomIn.touchend(f,y,g),F=this._zoomOut.touchend(f,y,g);return P?(this._active=!0,f.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(N){return N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(P)},{originalEvent:f})}}):F?(this._active=!0,f.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(N){return N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(F)},{originalEvent:f})}}):void 0},Hr.prototype.touchcancel=function(){this.reset()},Hr.prototype.enable=function(){this._enabled=!0},Hr.prototype.disable=function(){this._enabled=!1,this.reset()},Hr.prototype.isEnabled=function(){return this._enabled},Hr.prototype.isActive=function(){return this._active};var ps={0:1,2:2},fi=function(f){this.reset(),this._clickTolerance=f.clickTolerance||1};fi.prototype.blur=function(){this.reset()},fi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},fi.prototype._correctButton=function(f,y){return!1},fi.prototype._move=function(f,y){return{}},fi.prototype.mousedown=function(f,y){if(!this._lastPoint){var g=I.mouseButton(f);this._correctButton(f,g)&&(this._lastPoint=y,this._eventButton=g)}},fi.prototype.mousemoveWindow=function(f,y){var g=this._lastPoint;if(g){if(f.preventDefault(),function(w,P){var F=ps[P];return w.buttons===void 0||(w.buttons&F)!==F}(f,this._eventButton))this.reset();else if(this._moved||!(y.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=y,this._move(g,y)}},fi.prototype.mouseupWindow=function(f){this._lastPoint&&I.mouseButton(f)===this._eventButton&&(this._moved&&I.suppressClick(),this.reset())},fi.prototype.enable=function(){this._enabled=!0},fi.prototype.disable=function(){this._enabled=!1,this.reset()},fi.prototype.isEnabled=function(){return this._enabled},fi.prototype.isActive=function(){return this._active};var vu=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.mousedown=function(g,w){f.prototype.mousedown.call(this,g,w),this._lastPoint&&(this._active=!0)},y.prototype._correctButton=function(g,w){return w===0&&!g.ctrlKey},y.prototype._move=function(g,w){return{around:w,panDelta:w.sub(g)}},y}(fi),Ls=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype._correctButton=function(g,w){return w===0&&g.ctrlKey||w===2},y.prototype._move=function(g,w){var P=.8*(w.x-g.x);if(P)return this._active=!0,{bearingDelta:P}},y.prototype.contextmenu=function(g){g.preventDefault()},y}(fi),bu=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype._correctButton=function(g,w){return w===0&&g.ctrlKey||w===2},y.prototype._move=function(g,w){var P=-.5*(w.y-g.y);if(P)return this._active=!0,{pitchDelta:P}},y.prototype.contextmenu=function(g){g.preventDefault()},y}(fi),ha=function(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()};ha.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new c.Point(0,0)},ha.prototype.touchstart=function(f,y,g){return this._calculateTransform(f,y,g)},ha.prototype.touchmove=function(f,y,g){if(this._active&&!(g.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,y,g)},ha.prototype.touchend=function(f,y,g){this._calculateTransform(f,y,g),this._active&&g.length<this._minTouches&&this.reset()},ha.prototype.touchcancel=function(){this.reset()},ha.prototype._calculateTransform=function(f,y,g){g.length>0&&(this._active=!0);var w=jl(g,y),P=new c.Point(0,0),F=new c.Point(0,0),N=0;for(var H in w){var Q=w[H],ae=this._touches[H];ae&&(P._add(Q),F._add(Q.sub(ae)),N++,w[H]=Q)}if(this._touches=w,!(N<this._minTouches)&&F.mag()){var _e=F.div(N);if(this._sum._add(_e),!(this._sum.mag()<this._clickTolerance))return{around:P.div(N),panDelta:_e}}},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var Yr=function(){this.reset()};function Vr(f,y,g){for(var w=0;w<f.length;w++)if(f[w].identifier===g)return y[w]}function vl(f,y){return Math.log(f/y)/Math.LN2}Yr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yr.prototype._start=function(f){},Yr.prototype._move=function(f,y,g){return{}},Yr.prototype.touchstart=function(f,y,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([y[0],y[1]]))},Yr.prototype.touchmove=function(f,y,g){if(this._firstTwoTouches){f.preventDefault();var w=this._firstTwoTouches,P=w[1],F=Vr(g,y,w[0]),N=Vr(g,y,P);if(F&&N){var H=this._aroundCenter?null:F.add(N).div(2);return this._move([F,N],H,f)}}},Yr.prototype.touchend=function(f,y,g){if(this._firstTwoTouches){var w=this._firstTwoTouches,P=w[1],F=Vr(g,y,w[0]),N=Vr(g,y,P);F&&N||(this._active&&I.suppressClick(),this.reset())}},Yr.prototype.touchcancel=function(){this.reset()},Yr.prototype.enable=function(f){this._enabled=!0,this._aroundCenter=!!f&&f.around==="center"},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Yo=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.reset=function(){f.prototype.reset.call(this),delete this._distance,delete this._startDistance},y.prototype._start=function(g){this._startDistance=this._distance=g[0].dist(g[1])},y.prototype._move=function(g,w){var P=this._distance;if(this._distance=g[0].dist(g[1]),this._active||!(Math.abs(vl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vl(this._distance,P),pinchAround:w}},y}(Yr);function Ya(f,y){return 180*f.angleWith(y)/Math.PI}var kc=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.reset=function(){f.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},y.prototype._start=function(g){this._startVector=this._vector=g[0].sub(g[1]),this._minDiameter=g[0].dist(g[1])},y.prototype._move=function(g,w){var P=this._vector;if(this._vector=g[0].sub(g[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ya(this._vector,P),pinchAround:w}},y.prototype._isBelowThreshold=function(g){this._minDiameter=Math.min(this._minDiameter,g.mag());var w=25/(Math.PI*this._minDiameter)*360,P=Ya(g,this._startVector);return Math.abs(P)<w},y}(Yr);function ql(f){return Math.abs(f.y)>Math.abs(f.x)}var Mc=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.reset=function(){f.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},y.prototype._start=function(g){this._lastPoints=g,ql(g[0].sub(g[1]))&&(this._valid=!1)},y.prototype._move=function(g,w,P){var F=g[0].sub(this._lastPoints[0]),N=g[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(F,N,P.timeStamp),this._valid)return this._lastPoints=g,this._active=!0,{pitchDelta:(F.y+N.y)/2*-.5}},y.prototype.gestureBeginsVertically=function(g,w,P){if(this._valid!==void 0)return this._valid;var F=g.mag()>=2,N=w.mag()>=2;if(F||N){if(!F||!N)return this._firstMove===void 0&&(this._firstMove=P),P-this._firstMove<100&&void 0;var H=g.y>0==w.y>0;return ql(g)&&ql(w)&&H}},y}(Yr),qa={panStep:100,bearingStep:15,pitchStep:10},ya=function(){var f=qa;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1};function Bi(f){return f*(2-f)}ya.prototype.blur=function(){this.reset()},ya.prototype.reset=function(){this._active=!1},ya.prototype.keydown=function(f){var y=this;if(!(f.altKey||f.ctrlKey||f.metaKey)){var g=0,w=0,P=0,F=0,N=0;switch(f.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:f.shiftKey?w=-1:(f.preventDefault(),F=-1);break;case 39:f.shiftKey?w=1:(f.preventDefault(),F=1);break;case 38:f.shiftKey?P=1:(f.preventDefault(),N=-1);break;case 40:f.shiftKey?P=-1:(f.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(w=0,P=0),{cameraAnimation:function(H){var Q=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:Bi,zoom:g?Math.round(Q)+g*(f.shiftKey?2:1):Q,bearing:H.getBearing()+w*y._bearingStep,pitch:H.getPitch()+P*y._pitchStep,offset:[-F*y._panStep,-N*y._panStep],center:H.getCenter()},{originalEvent:f})}}}},ya.prototype.enable=function(){this._enabled=!0},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active},ya.prototype.disableRotation=function(){this._rotationDisabled=!0},ya.prototype.enableRotation=function(){this._rotationDisabled=!1};var ci=function(f,y){this._map=f,this._el=f.getCanvasContainer(),this._handler=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,c.bindAll(["_onTimeout"],this)};ci.prototype.setZoomRate=function(f){this._defaultZoomRate=f},ci.prototype.setWheelZoomRate=function(f){this._wheelZoomRate=f},ci.prototype.isEnabled=function(){return!!this._enabled},ci.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ci.prototype.isZooming=function(){return!!this._zooming},ci.prototype.enable=function(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&f.around==="center")},ci.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ci.prototype.wheel=function(f){if(this.isEnabled()){var y=f.deltaMode===c.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY,g=c.browser.now(),w=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,y!==0&&y%4.000244140625==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(w*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),f.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=f,this._delta-=y,this._active||this._start(f)),f.preventDefault()}},ci.prototype._onTimeout=function(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},ci.prototype._start=function(f){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var y=I.mousePos(this._el,f);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ci.prototype.renderFrame=function(){var f=this;if(this._frameId&&(this._frameId=null,this.isActive())){var y=this._map.transform;if(this._delta!==0){var g=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,w=2/(1+Math.exp(-Math.abs(this._delta*g)));this._delta<0&&w!==0&&(w=1/w);var P=typeof this._targetZoom=="number"?y.zoomScale(this._targetZoom):y.scale;this._targetZoom=Math.min(y.maxZoom,Math.max(y.minZoom,y.scaleZoom(P*w))),this._type==="wheel"&&(this._startZoom=y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var F,N=typeof this._targetZoom=="number"?this._targetZoom:y.zoom,H=this._startZoom,Q=this._easing,ae=!1;if(this._type==="wheel"&&H&&Q){var _e=Math.min((c.browser.now()-this._lastWheelEventTime)/200,1),xe=Q(_e);F=c.number(H,N,xe),_e<1?this._frameId||(this._frameId=!0):ae=!0}else F=N,ae=!0;return this._active=!0,ae&&(this._active=!1,this._finishTimeout=setTimeout(function(){f._zooming=!1,f._handler._triggerRenderFrame(),delete f._targetZoom,delete f._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ae,zoomDelta:F-y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ci.prototype._smoothOutEasing=function(f){var y=c.ease;if(this._prevEase){var g=this._prevEase,w=(c.browser.now()-g.start)/g.duration,P=g.easing(w+.01)-g.easing(w),F=.27/Math.sqrt(P*P+1e-4)*.01,N=Math.sqrt(.0729-F*F);y=c.bezier(F,N,.25,1)}return this._prevEase={start:c.browser.now(),duration:f,easing:y},y},ci.prototype.blur=function(){this.reset()},ci.prototype.reset=function(){this._active=!1};var _a=function(f,y){this._clickZoom=f,this._tapZoom=y};_a.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},_a.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},_a.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},_a.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ra=function(){this.reset()};ra.prototype.reset=function(){this._active=!1},ra.prototype.blur=function(){this.reset()},ra.prototype.dblclick=function(f,y){return f.preventDefault(),{cameraAnimation:function(g){g.easeTo({duration:300,zoom:g.getZoom()+(f.shiftKey?-1:1),around:g.unproject(y)},{originalEvent:f})}}},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active};var Co=function(){this._tap=new Oa({numTouches:1,numTaps:1}),this.reset()};Co.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Co.prototype.touchstart=function(f,y,g){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=y[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(f,y,g))},Co.prototype.touchmove=function(f,y,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;var w=y[0],P=w.y-this._swipePoint.y;return this._swipePoint=w,f.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(f,y,g)},Co.prototype.touchend=function(f,y,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(f,y,g)&&(this._tapTime=f.timeStamp)},Co.prototype.touchcancel=function(){this.reset()},Co.prototype.enable=function(){this._enabled=!0},Co.prototype.disable=function(){this._enabled=!1,this.reset()},Co.prototype.isEnabled=function(){return this._enabled},Co.prototype.isActive=function(){return this._active};var Qr=function(f,y,g){this._el=f,this._mousePan=y,this._touchPan=g};Qr.prototype.enable=function(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Qr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Qr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Qr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var va=function(f,y,g){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=y,this._mousePitch=g};va.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},va.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},va.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},va.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var to=function(f,y,g,w){this._el=f,this._touchZoom=y,this._touchRotate=g,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};to.prototype.enable=function(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},to.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},to.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},to.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},to.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},to.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var oa=function(f){return f.zoom||f.drag||f.pitch||f.rotate},zs=function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y}(c.Event);function gi(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}var mi=function(f,y){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _l(f),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y),c.bindAll(["handleEvent","handleWindowEvent"],this);var g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[c.window.document,"mousemove",{capture:!0}],[c.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[c.window,"blur",void 0]];for(var w=0,P=this._listeners;w<P.length;w+=1){var F=P[w],N=F[0];I.addEventListener(N,F[1],N===c.window.document?this.handleWindowEvent:this.handleEvent,F[2])}};mi.prototype.destroy=function(){for(var f=0,y=this._listeners;f<y.length;f+=1){var g=y[f],w=g[0];I.removeEventListener(w,g[1],w===c.window.document?this.handleWindowEvent:this.handleEvent,g[2])}},mi.prototype._addDefaultHandlers=function(f){var y=this._map,g=y.getCanvasContainer();this._add("mapEvent",new fo(y,f));var w=y.boxZoom=new Jo(y,f);this._add("boxZoom",w);var P=new Hr,F=new ra;y.doubleClickZoom=new _a(F,P),this._add("tapZoom",P),this._add("clickZoom",F);var N=new Co;this._add("tapDragZoom",N);var H=y.touchPitch=new Mc;this._add("touchPitch",H);var Q=new Ls(f),ae=new bu(f);y.dragRotate=new va(f,Q,ae),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);var _e=new vu(f),xe=new ha(f);y.dragPan=new Qr(g,_e,xe),this._add("mousePan",_e),this._add("touchPan",xe,["touchZoom","touchRotate"]);var Ee=new kc,Fe=new Yo;y.touchZoomRotate=new to(g,Fe,Ee,N),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",Fe,["touchPan","touchRotate"]);var Oe=y.scrollZoom=new ci(y,this);this._add("scrollZoom",Oe,["mousePan"]);var Xe=y.keyboard=new ya;this._add("keyboard",Xe),this._add("blockableMapEvent",new Ri(y));for(var Ce=0,je=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ce<je.length;Ce+=1){var et=je[Ce];f.interactive&&f[et]&&y[et].enable(f[et])}},mi.prototype._add=function(f,y,g){this._handlers.push({handlerName:f,handler:y,allowed:g}),this._handlersById[f]=y},mi.prototype.stop=function(f){if(!this._updatingCamera){for(var y=0,g=this._handlers;y<g.length;y+=1)g[y].handler.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}},mi.prototype.isActive=function(){for(var f=0,y=this._handlers;f<y.length;f+=1)if(y[f].handler.isActive())return!0;return!1},mi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},mi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},mi.prototype.isMoving=function(){return Boolean(oa(this._eventsInProgress))||this.isZooming()},mi.prototype._blockedByActive=function(f,y,g){for(var w in f)if(w!==g&&(!y||y.indexOf(w)<0))return!0;return!1},mi.prototype.handleWindowEvent=function(f){this.handleEvent(f,f.type+"Window")},mi.prototype._getMapTouches=function(f){for(var y=[],g=0,w=f;g<w.length;g+=1){var P=w[g];this._el.contains(P.target)&&y.push(P)}return y},mi.prototype.handleEvent=function(f,y){this._updatingCamera=!0;for(var g=f.type==="renderFrame"?void 0:f,w={needsRenderFrame:!1},P={},F={},N=f.touches?this._getMapTouches(f.touches):void 0,H=N?I.touchPos(this._el,N):I.mousePos(this._el,f),Q=0,ae=this._handlers;Q<ae.length;Q+=1){var _e=ae[Q],xe=_e.handlerName,Ee=_e.handler,Fe=_e.allowed;if(Ee.isEnabled()){var Oe=void 0;this._blockedByActive(F,Fe,xe)?Ee.reset():Ee[y||f.type]&&(Oe=Ee[y||f.type](f,H,N),this.mergeHandlerResult(w,P,Oe,xe,g),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||Ee.isActive())&&(F[xe]=Ee)}}var Xe={};for(var Ce in this._previousActiveHandlers)F[Ce]||(Xe[Ce]=g);this._previousActiveHandlers=F,(Object.keys(Xe).length||gi(w))&&(this._changes.push([w,P,Xe]),this._triggerRenderFrame()),(Object.keys(F).length||gi(w))&&this._map._stop(!0),this._updatingCamera=!1;var je=w.cameraAnimation;je&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],je(this._map))},mi.prototype.mergeHandlerResult=function(f,y,g,w,P){if(g){c.extend(f,g);var F={handlerName:w,originalEvent:g.originalEvent||P};g.zoomDelta!==void 0&&(y.zoom=F),g.panDelta!==void 0&&(y.drag=F),g.pitchDelta!==void 0&&(y.pitch=F),g.bearingDelta!==void 0&&(y.rotate=F)}},mi.prototype._applyChanges=function(){for(var f={},y={},g={},w=0,P=this._changes;w<P.length;w+=1){var F=P[w],N=F[0],H=F[1],Q=F[2];N.panDelta&&(f.panDelta=(f.panDelta||new c.Point(0,0))._add(N.panDelta)),N.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+N.zoomDelta),N.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+N.bearingDelta),N.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+N.pitchDelta),N.around!==void 0&&(f.around=N.around),N.pinchAround!==void 0&&(f.pinchAround=N.pinchAround),N.noInertia&&(f.noInertia=N.noInertia),c.extend(y,H),c.extend(g,Q)}this._updateMapTransform(f,y,g),this._changes=[]},mi.prototype._updateMapTransform=function(f,y,g){var w=this._map,P=w.transform;if(!gi(f))return this._fireEvents(y,g,!0);var F=f.panDelta,N=f.zoomDelta,H=f.bearingDelta,Q=f.pitchDelta,ae=f.around,_e=f.pinchAround;_e!==void 0&&(ae=_e),w._stop(!0),ae=ae||w.transform.centerPoint;var xe=P.pointLocation(F?ae.sub(F):ae);H&&(P.bearing+=H),Q&&(P.pitch+=Q),N&&(P.zoom+=N),P.setLocationAtPoint(xe,ae),this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(y,g,!0)},mi.prototype._fireEvents=function(f,y,g){var w=this,P=oa(this._eventsInProgress),F=oa(f),N={};for(var H in f)this._eventsInProgress[H]||(N[H+"start"]=f[H].originalEvent),this._eventsInProgress[H]=f[H];for(var Q in!P&&F&&this._fireEvent("movestart",F.originalEvent),N)this._fireEvent(Q,N[Q]);for(var ae in F&&this._fireEvent("move",F.originalEvent),f)this._fireEvent(ae,f[ae].originalEvent);var _e,xe={};for(var Ee in this._eventsInProgress){var Fe=this._eventsInProgress[Ee],Oe=Fe.handlerName,Xe=Fe.originalEvent;this._handlersById[Oe].isActive()||(delete this._eventsInProgress[Ee],xe[Ee+"end"]=_e=y[Oe]||Xe)}for(var Ce in xe)this._fireEvent(Ce,xe[Ce]);var je=oa(this._eventsInProgress);if(g&&(P||F)&&!je){this._updatingCamera=!0;var et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pt=function(xt){return xt!==0&&-w._bearingSnap<xt&&xt<w._bearingSnap};et?(pt(et.bearing||this._map.getBearing())&&(et.bearing=0),this._map.easeTo(et,{originalEvent:_e})):(this._map.fire(new c.Event("moveend",{originalEvent:_e})),pt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},mi.prototype._fireEvent=function(f,y){this._map.fire(new c.Event(f,y?{originalEvent:y}:{}))},mi.prototype._requestFrame=function(){var f=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(y){delete f._frameId,f.handleEvent(new zs("renderFrame",{timeStamp:y})),f._applyChanges()})},mi.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var xu=function(f){function y(g,w){f.call(this),this._moving=!1,this._zooming=!1,this.transform=g,this._bearingSnap=w.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.getCenter=function(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)},y.prototype.setCenter=function(g,w){return this.jumpTo({center:g},w)},y.prototype.panBy=function(g,w,P){return g=c.Point.convert(g).mult(-1),this.panTo(this.transform.center,c.extend({offset:g},w),P)},y.prototype.panTo=function(g,w,P){return this.easeTo(c.extend({center:g},w),P)},y.prototype.getZoom=function(){return this.transform.zoom},y.prototype.setZoom=function(g,w){return this.jumpTo({zoom:g},w),this},y.prototype.zoomTo=function(g,w,P){return this.easeTo(c.extend({zoom:g},w),P)},y.prototype.zoomIn=function(g,w){return this.zoomTo(this.getZoom()+1,g,w),this},y.prototype.zoomOut=function(g,w){return this.zoomTo(this.getZoom()-1,g,w),this},y.prototype.getBearing=function(){return this.transform.bearing},y.prototype.setBearing=function(g,w){return this.jumpTo({bearing:g},w),this},y.prototype.getPadding=function(){return this.transform.padding},y.prototype.setPadding=function(g,w){return this.jumpTo({padding:g},w),this},y.prototype.rotateTo=function(g,w,P){return this.easeTo(c.extend({bearing:g},w),P)},y.prototype.resetNorth=function(g,w){return this.rotateTo(0,c.extend({duration:1e3},g),w),this},y.prototype.resetNorthPitch=function(g,w){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},g),w),this},y.prototype.snapToNorth=function(g,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(g,w):this},y.prototype.getPitch=function(){return this.transform.pitch},y.prototype.setPitch=function(g,w){return this.jumpTo({pitch:g},w),this},y.prototype.cameraForBounds=function(g,w){g=c.LngLatBounds.convert(g);var P=w&&w.bearing||0;return this._cameraForBoxAndBearing(g.getNorthWest(),g.getSouthEast(),P,w)},y.prototype._cameraForBoxAndBearing=function(g,w,P,F){var N={top:0,bottom:0,right:0,left:0};if(typeof(F=c.extend({padding:N,offset:[0,0],maxZoom:this.transform.maxZoom},F)).padding=="number"){var H=F.padding;F.padding={top:H,bottom:H,right:H,left:H}}F.padding=c.extend(N,F.padding);var Q=this.transform,ae=Q.padding,_e=Q.project(c.LngLat.convert(g)),xe=Q.project(c.LngLat.convert(w)),Ee=_e.rotate(-P*Math.PI/180),Fe=xe.rotate(-P*Math.PI/180),Oe=new c.Point(Math.max(Ee.x,Fe.x),Math.max(Ee.y,Fe.y)),Xe=new c.Point(Math.min(Ee.x,Fe.x),Math.min(Ee.y,Fe.y)),Ce=Oe.sub(Xe),je=(Q.width-(ae.left+ae.right+F.padding.left+F.padding.right))/Ce.x,et=(Q.height-(ae.top+ae.bottom+F.padding.top+F.padding.bottom))/Ce.y;if(!(et<0||je<0)){var pt=Math.min(Q.scaleZoom(Q.scale*Math.min(je,et)),F.maxZoom),xt=typeof F.offset.x=="number"?new c.Point(F.offset.x,F.offset.y):c.Point.convert(F.offset),Tt=new c.Point((F.padding.left-F.padding.right)/2,(F.padding.top-F.padding.bottom)/2).rotate(P*Math.PI/180),kt=xt.add(Tt).mult(Q.scale/Q.zoomScale(pt));return{center:Q.unproject(_e.add(xe).div(2).sub(kt)),zoom:pt,bearing:P}}c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},y.prototype.fitBounds=function(g,w,P){return this._fitInternal(this.cameraForBounds(g,w),w,P)},y.prototype.fitScreenCoordinates=function(g,w,P,F,N){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.Point.convert(g)),this.transform.pointLocation(c.Point.convert(w)),P,F),F,N)},y.prototype._fitInternal=function(g,w,P){return g?(delete(w=c.extend(g,w)).padding,w.linear?this.easeTo(w,P):this.flyTo(w,P)):this},y.prototype.jumpTo=function(g,w){this.stop();var P=this.transform,F=!1,N=!1,H=!1;return"zoom"in g&&P.zoom!==+g.zoom&&(F=!0,P.zoom=+g.zoom),g.center!==void 0&&(P.center=c.LngLat.convert(g.center)),"bearing"in g&&P.bearing!==+g.bearing&&(N=!0,P.bearing=+g.bearing),"pitch"in g&&P.pitch!==+g.pitch&&(H=!0,P.pitch=+g.pitch),g.padding==null||P.isPaddingEqual(g.padding)||(P.padding=g.padding),this.fire(new c.Event("movestart",w)).fire(new c.Event("move",w)),F&&this.fire(new c.Event("zoomstart",w)).fire(new c.Event("zoom",w)).fire(new c.Event("zoomend",w)),N&&this.fire(new c.Event("rotatestart",w)).fire(new c.Event("rotate",w)).fire(new c.Event("rotateend",w)),H&&this.fire(new c.Event("pitchstart",w)).fire(new c.Event("pitch",w)).fire(new c.Event("pitchend",w)),this.fire(new c.Event("moveend",w))},y.prototype.easeTo=function(g,w){var P=this;this._stop(!1,g.easeId),((g=c.extend({offset:[0,0],duration:500,easing:c.ease},g)).animate===!1||!g.essential&&c.browser.prefersReducedMotion)&&(g.duration=0);var F=this.transform,N=this.getZoom(),H=this.getBearing(),Q=this.getPitch(),ae=this.getPadding(),_e="zoom"in g?+g.zoom:N,xe="bearing"in g?this._normalizeBearing(g.bearing,H):H,Ee="pitch"in g?+g.pitch:Q,Fe="padding"in g?g.padding:F.padding,Oe=c.Point.convert(g.offset),Xe=F.centerPoint.add(Oe),Ce=F.pointLocation(Xe),je=c.LngLat.convert(g.center||Ce);this._normalizeCenter(je);var et,pt,xt=F.project(Ce),Tt=F.project(je).sub(xt),kt=F.zoomScale(_e-N);g.around&&(et=c.LngLat.convert(g.around),pt=F.locationPoint(et));var Ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||_e!==N,this._rotating=this._rotating||H!==xe,this._pitching=this._pitching||Ee!==Q,this._padding=!F.isPaddingEqual(Fe),this._easeId=g.easeId,this._prepareEase(w,g.noMoveStart,Ht),this._ease(function(oi){if(P._zooming&&(F.zoom=c.number(N,_e,oi)),P._rotating&&(F.bearing=c.number(H,xe,oi)),P._pitching&&(F.pitch=c.number(Q,Ee,oi)),P._padding&&(F.interpolatePadding(ae,Fe,oi),Xe=F.centerPoint.add(Oe)),et)F.setLocationAtPoint(et,pt);else{var ri=F.zoomScale(F.zoom-N),Ti=_e>N?Math.min(2,kt):Math.max(.5,kt),Zi=Math.pow(Ti,1-oi),$i=F.unproject(xt.add(Tt.mult(oi*Zi)).mult(ri));F.setLocationAtPoint(F.renderWorldCopies?$i.wrap():$i,Xe)}P._fireMoveEvents(w)},function(oi){P._afterEase(w,oi)},g),this},y.prototype._prepareEase=function(g,w,P){P===void 0&&(P={}),this._moving=!0,w||P.moving||this.fire(new c.Event("movestart",g)),this._zooming&&!P.zooming&&this.fire(new c.Event("zoomstart",g)),this._rotating&&!P.rotating&&this.fire(new c.Event("rotatestart",g)),this._pitching&&!P.pitching&&this.fire(new c.Event("pitchstart",g))},y.prototype._fireMoveEvents=function(g){this.fire(new c.Event("move",g)),this._zooming&&this.fire(new c.Event("zoom",g)),this._rotating&&this.fire(new c.Event("rotate",g)),this._pitching&&this.fire(new c.Event("pitch",g))},y.prototype._afterEase=function(g,w){if(!this._easeId||!w||this._easeId!==w){delete this._easeId;var P=this._zooming,F=this._rotating,N=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,P&&this.fire(new c.Event("zoomend",g)),F&&this.fire(new c.Event("rotateend",g)),N&&this.fire(new c.Event("pitchend",g)),this.fire(new c.Event("moveend",g))}},y.prototype.flyTo=function(g,w){var P=this;if(!g.essential&&c.browser.prefersReducedMotion){var F=c.pick(g,["center","zoom","bearing","pitch","around"]);return this.jumpTo(F,w)}this.stop(),g=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},g);var N=this.transform,H=this.getZoom(),Q=this.getBearing(),ae=this.getPitch(),_e=this.getPadding(),xe="zoom"in g?c.clamp(+g.zoom,N.minZoom,N.maxZoom):H,Ee="bearing"in g?this._normalizeBearing(g.bearing,Q):Q,Fe="pitch"in g?+g.pitch:ae,Oe="padding"in g?g.padding:N.padding,Xe=N.zoomScale(xe-H),Ce=c.Point.convert(g.offset),je=N.centerPoint.add(Ce),et=N.pointLocation(je),pt=c.LngLat.convert(g.center||et);this._normalizeCenter(pt);var xt=N.project(et),Tt=N.project(pt).sub(xt),kt=g.curve,Ht=Math.max(N.width,N.height),oi=Ht/Xe,ri=Tt.mag();if("minZoom"in g){var Ti=c.clamp(Math.min(g.minZoom,H,xe),N.minZoom,N.maxZoom),Zi=Ht/N.zoomScale(Ti-H);kt=Math.sqrt(Zi/ri*2)}var $i=kt*kt;function Hi(tn){var Qi=(oi*oi-Ht*Ht+(tn?-1:1)*$i*$i*ri*ri)/(2*(tn?oi:Ht)*$i*ri);return Math.log(Math.sqrt(Qi*Qi+1)-Qi)}function Xn(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function Pi(tn){return(Math.exp(tn)+Math.exp(-tn))/2}var _n=Hi(0),Vn=function(tn){return Pi(_n)/Pi(_n+kt*tn)},hn=function(tn){return Ht*((Pi(_n)*(Xn(Qi=_n+kt*tn)/Pi(Qi))-Xn(_n))/$i)/ri;var Qi},an=(Hi(1)-_n)/kt;if(Math.abs(ri)<1e-6||!isFinite(an)){if(Math.abs(Ht-oi)<1e-6)return this.easeTo(g,w);var Sn=oi<Ht?-1:1;an=Math.abs(Math.log(oi/Ht))/kt,hn=function(){return 0},Vn=function(tn){return Math.exp(Sn*kt*tn)}}return g.duration="duration"in g?+g.duration:1e3*an/("screenSpeed"in g?+g.screenSpeed/kt:+g.speed),g.maxDuration&&g.duration>g.maxDuration&&(g.duration=0),this._zooming=!0,this._rotating=Q!==Ee,this._pitching=Fe!==ae,this._padding=!N.isPaddingEqual(Oe),this._prepareEase(w,!1),this._ease(function(tn){var Qi=tn*an,$r=1/Vn(Qi);N.zoom=tn===1?xe:H+N.scaleZoom($r),P._rotating&&(N.bearing=c.number(Q,Ee,tn)),P._pitching&&(N.pitch=c.number(ae,Fe,tn)),P._padding&&(N.interpolatePadding(_e,Oe,tn),je=N.centerPoint.add(Ce));var uo=tn===1?pt:N.unproject(xt.add(Tt.mult(hn(Qi))).mult($r));N.setLocationAtPoint(N.renderWorldCopies?uo.wrap():uo,je),P._fireMoveEvents(w)},function(){return P._afterEase(w)},g),this},y.prototype.isEasing=function(){return!!this._easeFrameId},y.prototype.stop=function(){return this._stop()},y.prototype._stop=function(g,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var P=this._onEaseEnd;delete this._onEaseEnd,P.call(this,w)}if(!g){var F=this.handlers;F&&F.stop(!1)}return this},y.prototype._ease=function(g,w,P){P.animate===!1||P.duration===0?(g(1),w()):(this._easeStart=c.browser.now(),this._easeOptions=P,this._onEaseFrame=g,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},y.prototype._renderFrameCallback=function(){var g=Math.min((c.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},y.prototype._normalizeBearing=function(g,w){g=c.wrap(g,-180,180);var P=Math.abs(g-w);return Math.abs(g-360-w)<P&&(g-=360),Math.abs(g+360-w)<P&&(g+=360),g},y.prototype._normalizeCenter=function(g){var w=this.transform;if(w.renderWorldCopies&&!w.lngRange){var P=g.lng-w.center.lng;g.lng+=P>180?-360:P<-180?360:0}},y}(c.Evented),xo=function(f){f===void 0&&(f={}),this.options=f,c.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};xo.prototype.getDefaultPosition=function(){return"bottom-right"},xo.prototype.onAdd=function(f){var y=this.options&&this.options.compact;return this._map=f,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),y===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xo.prototype.onRemove=function(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xo.prototype._setElementTitle=function(f,y){var g=this._map._getUIString("AttributionControl."+y);f.title=g,f.setAttribute("aria-label",g)},xo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},xo.prototype._updateEditLink=function(){var f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));var y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||c.config.ACCESS_TOKEN}];if(f){var g=y.reduce(function(w,P,F){return P.value&&(w+=P.key+"="+P.value+(F<y.length-1?"&":"")),w},"?");f.href=c.config.FEEDBACK_URL+"/"+g+(this._map._hash?this._map._hash.getHashString(!0):""),f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}},xo.prototype._updateData=function(f){!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},xo.prototype._updateAttributions=function(){if(this._map.style){var f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(function(H){return typeof H!="string"?"":H})):typeof this.options.customAttribution=="string"&&f.push(this.options.customAttribution)),this._map.style.stylesheet){var y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}var g=this._map.style.sourceCaches;for(var w in g){var P=g[w];if(P.used){var F=P.getSource();F.attribution&&f.indexOf(F.attribution)<0&&f.push(F.attribution)}}f.sort(function(H,Q){return H.length-Q.length});var N=(f=f.filter(function(H,Q){for(var ae=Q+1;ae<f.length;ae++)if(f[ae].indexOf(H)>=0)return!1;return!0})).join(" | ");N!==this._attribHTML&&(this._attribHTML=N,f.length?(this._innerContainer.innerHTML=N,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var da=function(){c.bindAll(["_updateLogo"],this),c.bindAll(["_updateCompact"],this)};da.prototype.onAdd=function(f){this._map=f,this._container=I.create("div","mapboxgl-ctrl");var y=I.create("a","mapboxgl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://www.mapbox.com/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},da.prototype.onRemove=function(){I.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},da.prototype.getDefaultPosition=function(){return"bottom-left"},da.prototype._updateLogo=function(f){f&&f.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},da.prototype._logoRequired=function(){if(this._map.style){var f=this._map.style.sourceCaches;for(var y in f)if(f[y].getSource().mapbox_logo)return!0;return!1}},da.prototype._updateCompact=function(){var f=this._container.children;if(f.length){var y=f[0];this._map.getCanvasContainer().offsetWidth<250?y.classList.add("mapboxgl-compact"):y.classList.remove("mapboxgl-compact")}};var C=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};C.prototype.add=function(f){var y=++this._id;return this._queue.push({callback:f,id:y,cancelled:!1}),y},C.prototype.remove=function(f){for(var y=this._currentlyRunning,g=0,w=y?this._queue.concat(y):this._queue;g<w.length;g+=1){var P=w[g];if(P.id===f)return void(P.cancelled=!0)}},C.prototype.run=function(f){f===void 0&&(f=0);var y=this._currentlyRunning=this._queue;this._queue=[];for(var g=0,w=y;g<w.length;g+=1){var P=w[g];if(!P.cancelled&&(P.callback(f),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},C.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var l={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},v=c.window.HTMLImageElement,A=c.window.HTMLElement,k=c.window.ImageBitmap,B={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},j=function(f){function y(w){var P=this;if((w=c.extend({},B,w)).minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var F=new Nn(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies);if(f.call(this,F,w),this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new C,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},l,w.locale),this._clickTolerance=w.clickTolerance,this._requestManager=new c.RequestManager(w.transformRequest,w.accessToken),typeof w.container=="string"){if(this._container=c.window.document.getElementById(w.container),!this._container)throw new Error("Container '"+w.container+"' not found.")}else{if(!(w.container instanceof A))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return P._update(!1)}),this.on("moveend",function(){return P._update(!1)}),this.on("zoom",function(){return P._update(!0)}),c.window!==void 0&&(c.window.addEventListener("online",this._onWindowOnline,!1),c.window.addEventListener("resize",this._onWindowResize,!1),c.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new mi(this,w),this._hash=w.hash&&new Si(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,c.extend({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new xo({customAttribution:w.customAttribution})),this.addControl(new da,w.logoPosition),this.on("style.load",function(){P.transform.unmodified&&P.jumpTo(P.style.stylesheet)}),this.on("data",function(N){P._update(N.dataType==="style"),P.fire(new c.Event(N.dataType+"data",N))}),this.on("dataloading",function(N){P.fire(new c.Event(N.dataType+"dataloading",N))})}f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y;var g={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return y.prototype._getMapId=function(){return this._mapId},y.prototype.addControl=function(w,P){if(P===void 0&&(P=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var F=w.onAdd(this);this._controls.push(w);var N=this._controlPositions[P];return P.indexOf("bottom")!==-1?N.insertBefore(F,N.firstChild):N.appendChild(F),this},y.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var P=this._controls.indexOf(w);return P>-1&&this._controls.splice(P,1),w.onRemove(this),this},y.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},y.prototype.resize=function(w){var P=this._containerDimensions(),F=P[0],N=P[1];if(F===this.transform.width&&N===this.transform.height)return this;this._resizeCanvas(F,N),this.transform.resize(F,N),this.painter.resize(F,N);var H=!this._moving;return H&&this.fire(new c.Event("movestart",w)).fire(new c.Event("move",w)),this.fire(new c.Event("resize",w)),H&&this.fire(new c.Event("moveend",w)),this},y.prototype.getBounds=function(){return this.transform.getBounds()},y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},y.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(c.LngLatBounds.convert(w)),this._update()},y.prototype.setMinZoom=function(w){if((w=w==null?-2:w)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},y.prototype.getMinZoom=function(){return this.transform.minZoom},y.prototype.setMaxZoom=function(w){if((w=w==null?22:w)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},y.prototype.getMaxZoom=function(){return this.transform.maxZoom},y.prototype.setMinPitch=function(w){if((w=w==null?0:w)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},y.prototype.getMinPitch=function(){return this.transform.minPitch},y.prototype.setMaxPitch=function(w){if((w=w==null?60:w)>60)throw new Error("maxPitch must be less than or equal to 60");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},y.prototype.getMaxPitch=function(){return this.transform.maxPitch},y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},y.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},y.prototype.project=function(w){return this.transform.locationPoint(c.LngLat.convert(w))},y.prototype.unproject=function(w){return this.transform.pointLocation(c.Point.convert(w))},y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},y.prototype._createDelegatedListener=function(w,P,F){var N,H=this;if(w==="mouseenter"||w==="mouseover"){var Q=!1;return{layer:P,listener:F,delegates:{mousemove:function(_e){var xe=H.getLayer(P)?H.queryRenderedFeatures(_e.point,{layers:[P]}):[];xe.length?Q||(Q=!0,F.call(H,new Jr(w,H,_e.originalEvent,{features:xe}))):Q=!1},mouseout:function(){Q=!1}}}}if(w==="mouseleave"||w==="mouseout"){var ae=!1;return{layer:P,listener:F,delegates:{mousemove:function(_e){(H.getLayer(P)?H.queryRenderedFeatures(_e.point,{layers:[P]}):[]).length?ae=!0:ae&&(ae=!1,F.call(H,new Jr(w,H,_e.originalEvent)))},mouseout:function(_e){ae&&(ae=!1,F.call(H,new Jr(w,H,_e.originalEvent)))}}}}return{layer:P,listener:F,delegates:(N={},N[w]=function(_e){var xe=H.getLayer(P)?H.queryRenderedFeatures(_e.point,{layers:[P]}):[];xe.length&&(_e.features=xe,F.call(H,_e),delete _e.features)},N)}},y.prototype.on=function(w,P,F){if(F===void 0)return f.prototype.on.call(this,w,P);var N=this._createDelegatedListener(w,P,F);for(var H in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(N),N.delegates)this.on(H,N.delegates[H]);return this},y.prototype.once=function(w,P,F){if(F===void 0)return f.prototype.once.call(this,w,P);var N=this._createDelegatedListener(w,P,F);for(var H in N.delegates)this.once(H,N.delegates[H]);return this},y.prototype.off=function(w,P,F){var N=this;return F===void 0?f.prototype.off.call(this,w,P):(this._delegatedListeners&&this._delegatedListeners[w]&&function(H){for(var Q=H[w],ae=0;ae<Q.length;ae++){var _e=Q[ae];if(_e.layer===P&&_e.listener===F){for(var xe in _e.delegates)N.off(xe,_e.delegates[xe]);return Q.splice(ae,1),N}}}(this._delegatedListeners),this)},y.prototype.queryRenderedFeatures=function(w,P){if(!this.style)return[];var F;if(P!==void 0||w===void 0||w instanceof c.Point||Array.isArray(w)||(P=w,w=void 0),P=P||{},(w=w||[[0,0],[this.transform.width,this.transform.height]])instanceof c.Point||typeof w[0]=="number")F=[c.Point.convert(w)];else{var N=c.Point.convert(w[0]),H=c.Point.convert(w[1]);F=[N,new c.Point(H.x,N.y),H,new c.Point(N.x,H.y),N]}return this.style.queryRenderedFeatures(F,P,this.transform)},y.prototype.querySourceFeatures=function(w,P){return this.style.querySourceFeatures(w,P)},y.prototype.setStyle=function(w,P){return(P=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},P)).diff!==!1&&P.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,P),this):(this._localIdeographFontFamily=P.localIdeographFontFamily,this._updateStyle(w,P))},y.prototype._getUIString=function(w){var P=this._locale[w];if(P==null)throw new Error("Missing UI string '"+w+"'");return P},y.prototype._updateStyle=function(w,P){return this.style&&(this.style.setEventedParent(null),this.style._remove()),w?(this.style=new qo(this,P||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w):this.style.loadJSON(w),this):(delete this.style,this)},y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},y.prototype._diffStyle=function(w,P){var F=this;if(typeof w=="string"){var N=this._requestManager.normalizeStyleURL(w),H=this._requestManager.transformRequest(N,c.ResourceType.Style);c.getJSON(H,function(Q,ae){Q?F.fire(new c.ErrorEvent(Q)):ae&&F._updateDiff(ae,P)})}else typeof w=="object"&&this._updateDiff(w,P)},y.prototype._updateDiff=function(w,P){try{this.style.setState(w)&&this._update(!0)}catch(F){c.warnOnce("Unable to perform style diff: "+(F.message||F.error||F)+".  Rebuilding the style from scratch."),this._updateStyle(w,P)}},y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")},y.prototype.addSource=function(w,P){return this._lazyInitEmptyStyle(),this.style.addSource(w,P),this._update(!0)},y.prototype.isSourceLoaded=function(w){var P=this.style&&this.style.sourceCaches[w];if(P!==void 0)return P.loaded();this.fire(new c.ErrorEvent(new Error("There is no source with ID '"+w+"'")))},y.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var P in w){var F=w[P]._tiles;for(var N in F){var H=F[N];if(H.state!=="loaded"&&H.state!=="errored")return!1}}return!0},y.prototype.addSourceType=function(w,P,F){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,P,F)},y.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},y.prototype.getSource=function(w){return this.style.getSource(w)},y.prototype.addImage=function(w,P,F){F===void 0&&(F={});var N=F.pixelRatio;N===void 0&&(N=1);var H=F.sdf;H===void 0&&(H=!1);var Q=F.stretchX,ae=F.stretchY,_e=F.content;if(this._lazyInitEmptyStyle(),P instanceof v||k&&P instanceof k){var xe=c.browser.getImageData(P);this.style.addImage(w,{data:new c.RGBAImage({width:xe.width,height:xe.height},xe.data),pixelRatio:N,stretchX:Q,stretchY:ae,content:_e,sdf:H,version:0})}else{if(P.width===void 0||P.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ee=P;this.style.addImage(w,{data:new c.RGBAImage({width:P.width,height:P.height},new Uint8Array(P.data)),pixelRatio:N,stretchX:Q,stretchY:ae,content:_e,sdf:H,version:0,userImage:Ee}),Ee.onAdd&&Ee.onAdd(this,w)}},y.prototype.updateImage=function(w,P){var F=this.style.getImage(w);if(!F)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var N=P instanceof v||k&&P instanceof k?c.browser.getImageData(P):P,H=N.width,Q=N.height,ae=N.data;return H===void 0||Q===void 0?this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):H!==F.data.width||Q!==F.data.height?this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(F.data.replace(ae,!(P instanceof v||k&&P instanceof k)),void this.style.updateImage(w,F))},y.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)},y.prototype.removeImage=function(w){this.style.removeImage(w)},y.prototype.loadImage=function(w,P){c.getImage(this._requestManager.transformRequest(w,c.ResourceType.Image),P)},y.prototype.listImages=function(){return this.style.listImages()},y.prototype.addLayer=function(w,P){return this._lazyInitEmptyStyle(),this.style.addLayer(w,P),this._update(!0)},y.prototype.moveLayer=function(w,P){return this.style.moveLayer(w,P),this._update(!0)},y.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},y.prototype.getLayer=function(w){return this.style.getLayer(w)},y.prototype.setLayerZoomRange=function(w,P,F){return this.style.setLayerZoomRange(w,P,F),this._update(!0)},y.prototype.setFilter=function(w,P,F){return F===void 0&&(F={}),this.style.setFilter(w,P,F),this._update(!0)},y.prototype.getFilter=function(w){return this.style.getFilter(w)},y.prototype.setPaintProperty=function(w,P,F,N){return N===void 0&&(N={}),this.style.setPaintProperty(w,P,F,N),this._update(!0)},y.prototype.getPaintProperty=function(w,P){return this.style.getPaintProperty(w,P)},y.prototype.setLayoutProperty=function(w,P,F,N){return N===void 0&&(N={}),this.style.setLayoutProperty(w,P,F,N),this._update(!0)},y.prototype.getLayoutProperty=function(w,P){return this.style.getLayoutProperty(w,P)},y.prototype.setLight=function(w,P){return P===void 0&&(P={}),this._lazyInitEmptyStyle(),this.style.setLight(w,P),this._update(!0)},y.prototype.getLight=function(){return this.style.getLight()},y.prototype.setFeatureState=function(w,P){return this.style.setFeatureState(w,P),this._update()},y.prototype.removeFeatureState=function(w,P){return this.style.removeFeatureState(w,P),this._update()},y.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},y.prototype.getContainer=function(){return this._container},y.prototype.getCanvasContainer=function(){return this._canvasContainer},y.prototype.getCanvas=function(){return this._canvas},y.prototype._containerDimensions=function(){var w=0,P=0;return this._container&&(w=this._container.clientWidth||400,P=this._container.clientHeight||300),[w,P]},y.prototype._detectMissingCSS=function(){c.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&c.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},y.prototype._setupContainer=function(){var w=this._container;w.classList.add("mapboxgl-map"),(this._missingCSSCanary=I.create("div","mapboxgl-canary",w)).style.visibility="hidden",this._detectMissingCSS();var P=this._canvasContainer=I.create("div","mapboxgl-canvas-container",w);this._interactive&&P.classList.add("mapboxgl-interactive"),this._canvas=I.create("canvas","mapboxgl-canvas",P),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var F=this._containerDimensions();this._resizeCanvas(F[0],F[1]);var N=this._controlContainer=I.create("div","mapboxgl-control-container",w),H=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Q){H[Q]=I.create("div","mapboxgl-ctrl-"+Q,N)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},y.prototype._resizeCanvas=function(w,P){var F=c.browser.devicePixelRatio||1;this._canvas.width=F*w,this._canvas.height=F*P,this._canvas.style.width=w+"px",this._canvas.style.height=P+"px"},y.prototype._setupPainter=function(){var w=c.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),P=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);P?(this.painter=new Gr(P,this.transform),c.webpSupported.testSupport(P)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))},y.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:w}))},y.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:w}))},y.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},y.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},y.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},y.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},y.prototype._render=function(w){var P,F=this,N=0,H=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(P=H.createQueryEXT(),H.beginQueryEXT(H.TIME_ELAPSED_EXT,P),N=c.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var Q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ae=this.transform.zoom,_e=c.browser.now();this.style.zoomHistory.update(ae,_e);var xe=new c.EvaluationParameters(ae,{now:_e,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ee=xe.crossFadingFactor();Ee===1&&Ee===this._crossFadingFactor||(Q=!0,this._crossFadingFactor=Ee),this.style.update(xe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||Q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Fe=c.browser.now()-N;H.endQueryEXT(H.TIME_ELAPSED_EXT,P),setTimeout(function(){var Ce=H.getQueryObjectEXT(P,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(P),F.fire(new c.Event("gpu-timing-frame",{cpuTime:Fe,gpuTime:Ce}))},50)}if(this.listens("gpu-timing-layer")){var Oe=this.painter.collectGpuTimers();setTimeout(function(){var Ce=F.painter.queryGpuTimers(Oe);F.fire(new c.Event("gpu-timing-layer",{layerTimes:Ce}))},50)}var Xe=this._sourcesDirty||this._styleDirty||this._placementDirty;return Xe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||Xe||(this._fullyLoaded=!0),this}},y.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,P=this._controls;w<P.length;w+=1)P[w].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),c.window!==void 0&&(c.window.removeEventListener("resize",this._onWindowResize,!1),c.window.removeEventListener("orientationchange",this._onWindowResize,!1),c.window.removeEventListener("online",this._onWindowOnline,!1));var F=this.painter.context.gl.getExtension("WEBGL_lose_context");F&&F.loseContext(),Z(this._canvasContainer),Z(this._controlContainer),Z(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new c.Event("remove"))},y.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=c.browser.frame(function(P){w._frame=null,w._render(P)}))},y.prototype._onWindowOnline=function(){this._update()},y.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},g.showTileBoundaries.get=function(){return!!this._showTileBoundaries},g.showTileBoundaries.set=function(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())},g.showPadding.get=function(){return!!this._showPadding},g.showPadding.set=function(w){this._showPadding!==w&&(this._showPadding=w,this._update())},g.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},g.showCollisionBoxes.set=function(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())},g.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},g.showOverdrawInspector.set=function(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())},g.repaint.get=function(){return!!this._repaint},g.repaint.set=function(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())},g.vertices.get=function(){return!!this._vertices},g.vertices.set=function(w){this._vertices=w,this._update()},y.prototype._setCacheLimits=function(w,P){c.setCacheLimits(w,P)},g.version.get=function(){return c.version},Object.defineProperties(y.prototype,g),y}(xu);function Z(f){f.parentNode&&f.parentNode.removeChild(f)}var J={showCompass:!0,showZoom:!0,visualizePitch:!1},ne=function(f){var y=this;this.options=c.extend({},J,f),this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(g){return g.preventDefault()}),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(g){return y._map.zoomIn({},{originalEvent:g})}),I.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(g){return y._map.zoomOut({},{originalEvent:g})}),I.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(g){y.options.visualizePitch?y._map.resetNorthPitch({},{originalEvent:g}):y._map.resetNorth({},{originalEvent:g})}),this._compassIcon=I.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ne.prototype._updateZoomButtons=function(){var f=this._map.getZoom(),y=f===this._map.getMaxZoom(),g=f===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},ne.prototype._rotateCompassArrow=function(){var f=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=f},ne.prototype.onAdd=function(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new se(this._map,this._compass,this.options.visualizePitch)),this._container},ne.prototype.onRemove=function(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ne.prototype._createButton=function(f,y){var g=I.create("button",f,this._container);return g.type="button",g.addEventListener("click",y),g},ne.prototype._setButtonTitle=function(f,y){var g=this._map._getUIString("NavigationControl."+y);f.title=g,f.setAttribute("aria-label",g)};var se=function(f,y,g){g===void 0&&(g=!1),this._clickTolerance=10,this.element=y,this.mouseRotate=new Ls({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,g&&(this.mousePitch=new bu({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),I.addEventListener(y,"mousedown",this.mousedown),I.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(y,"touchmove",this.touchmove),I.addEventListener(y,"touchend",this.touchend),I.addEventListener(y,"touchcancel",this.reset)};function ye(f,y,g){if(f=new c.LngLat(f.lng,f.lat),y){var w=new c.LngLat(f.lng-360,f.lat),P=new c.LngLat(f.lng+360,f.lat),F=g.locationPoint(f).distSqr(y);g.locationPoint(w).distSqr(y)<F?f=w:g.locationPoint(P).distSqr(y)<F&&(f=P)}for(;Math.abs(f.lng-g.center.lng)>180;){var N=g.locationPoint(f);if(N.x>=0&&N.y>=0&&N.x<=g.width&&N.y<=g.height)break;f.lng>g.center.lng?f.lng-=360:f.lng+=360}return f}se.prototype.down=function(f,y){this.mouseRotate.mousedown(f,y),this.mousePitch&&this.mousePitch.mousedown(f,y),I.disableDrag()},se.prototype.move=function(f,y){var g=this.map,w=this.mouseRotate.mousemoveWindow(f,y);if(w&&w.bearingDelta&&g.setBearing(g.getBearing()+w.bearingDelta),this.mousePitch){var P=this.mousePitch.mousemoveWindow(f,y);P&&P.pitchDelta&&g.setPitch(g.getPitch()+P.pitchDelta)}},se.prototype.off=function(){var f=this.element;I.removeEventListener(f,"mousedown",this.mousedown),I.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(f,"touchmove",this.touchmove),I.removeEventListener(f,"touchend",this.touchend),I.removeEventListener(f,"touchcancel",this.reset),this.offTemp()},se.prototype.offTemp=function(){I.enableDrag(),I.removeEventListener(c.window,"mousemove",this.mousemove),I.removeEventListener(c.window,"mouseup",this.mouseup)},se.prototype.mousedown=function(f){this.down(c.extend({},f,{ctrlKey:!0,preventDefault:function(){return f.preventDefault()}}),I.mousePos(this.element,f)),I.addEventListener(c.window,"mousemove",this.mousemove),I.addEventListener(c.window,"mouseup",this.mouseup)},se.prototype.mousemove=function(f){this.move(f,I.mousePos(this.element,f))},se.prototype.mouseup=function(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()},se.prototype.touchstart=function(f){f.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return f.preventDefault()}},this._startPos))},se.prototype.touchmove=function(f){f.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:function(){return f.preventDefault()}},this._lastPos))},se.prototype.touchend=function(f){f.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},se.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ae={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Je(f,y,g){var w=f.classList;for(var P in Ae)w.remove("mapboxgl-"+g+"-anchor-"+P);w.add("mapboxgl-"+g+"-anchor-"+y)}var ke,Ke=function(f){function y(g,w){if(f.call(this),(g instanceof c.window.HTMLElement||w)&&(g=c.extend({element:g},w)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=g&&g.anchor||"center",this._color=g&&g.color||"#3FB1CE",this._scale=g&&g.scale||1,this._draggable=g&&g.draggable||!1,this._clickTolerance=g&&g.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=g&&g.rotation||0,this._rotationAlignment=g&&g.rotationAlignment||"auto",this._pitchAlignment=g&&g.pitchAlignment&&g.pitchAlignment!=="auto"?g.pitchAlignment:this._rotationAlignment,g&&g.element)this._element=g.element,this._offset=c.Point.convert(g&&g.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");var P=I.createNS("http://www.w3.org/2000/svg","svg");P.setAttributeNS(null,"display","block"),P.setAttributeNS(null,"height","41px"),P.setAttributeNS(null,"width","27px"),P.setAttributeNS(null,"viewBox","0 0 27 41");var F=I.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"stroke","none"),F.setAttributeNS(null,"stroke-width","1"),F.setAttributeNS(null,"fill","none"),F.setAttributeNS(null,"fill-rule","evenodd");var N=I.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");var H=I.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");for(var Q=0,ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Q<ae.length;Q+=1){var _e=ae[Q],xe=I.createNS("http://www.w3.org/2000/svg","ellipse");xe.setAttributeNS(null,"opacity","0.04"),xe.setAttributeNS(null,"cx","10.5"),xe.setAttributeNS(null,"cy","5.80029008"),xe.setAttributeNS(null,"rx",_e.rx),xe.setAttributeNS(null,"ry",_e.ry),H.appendChild(xe)}var Ee=I.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill",this._color);var Fe=I.createNS("http://www.w3.org/2000/svg","path");Fe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ee.appendChild(Fe);var Oe=I.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"fill","#000000");var Xe=I.createNS("http://www.w3.org/2000/svg","path");Xe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Oe.appendChild(Xe);var Ce=I.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ce.setAttributeNS(null,"fill","#FFFFFF");var je=I.createNS("http://www.w3.org/2000/svg","g");je.setAttributeNS(null,"transform","translate(8.0, 8.0)");var et=I.createNS("http://www.w3.org/2000/svg","circle");et.setAttributeNS(null,"fill","#000000"),et.setAttributeNS(null,"opacity","0.25"),et.setAttributeNS(null,"cx","5.5"),et.setAttributeNS(null,"cy","5.5"),et.setAttributeNS(null,"r","5.4999962");var pt=I.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#FFFFFF"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962"),je.appendChild(et),je.appendChild(pt),N.appendChild(H),N.appendChild(Ee),N.appendChild(Oe),N.appendChild(Ce),N.appendChild(je),P.appendChild(N),P.setAttributeNS(null,"height",41*this._scale+"px"),P.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(P),this._offset=c.Point.convert(g&&g.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(xt){xt.preventDefault()}),this._element.addEventListener("mousedown",function(xt){xt.preventDefault()}),Je(this._element,this._anchor,"marker"),this._popup=null}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.addTo=function(g){return this.remove(),this._map=g,g.getCanvasContainer().appendChild(this._element),g.on("move",this._update),g.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(g){return this._lngLat=c.LngLat.convert(g),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},y.prototype.getElement=function(){return this._element},y.prototype.setPopup=function(g){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),g){if(!("offset"in g.options)){var w=Math.sqrt(Math.pow(13.5,2)/2);g.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=g,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},y.prototype._onKeyPress=function(g){var w=g.code,P=g.charCode||g.keyCode;w!=="Space"&&w!=="Enter"&&P!==32&&P!==13||this.togglePopup()},y.prototype._onMapClick=function(g){var w=g.originalEvent.target,P=this._element;this._popup&&(w===P||P.contains(w))&&this.togglePopup()},y.prototype.getPopup=function(){return this._popup},y.prototype.togglePopup=function(){var g=this._popup;return g?(g.isOpen()?g.remove():g.addTo(this._map),this):this},y.prototype._update=function(g){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ye(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var P="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?P="rotateX(0deg)":this._pitchAlignment==="map"&&(P="rotateX("+this._map.getPitch()+"deg)"),g&&g.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,Ae[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+P+" "+w)}},y.prototype.getOffset=function(){return this._offset},y.prototype.setOffset=function(g){return this._offset=c.Point.convert(g),this._update(),this},y.prototype._onMove=function(g){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))},y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"},y.prototype._addDragHandler=function(g){this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},y.prototype.setDraggable=function(g){return this._draggable=!!g,this._map&&(g?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},y.prototype.isDraggable=function(){return this._draggable},y.prototype.setRotation=function(g){return this._rotation=g||0,this._update(),this},y.prototype.getRotation=function(){return this._rotation},y.prototype.setRotationAlignment=function(g){return this._rotationAlignment=g||"auto",this._update(),this},y.prototype.getRotationAlignment=function(){return this._rotationAlignment},y.prototype.setPitchAlignment=function(g){return this._pitchAlignment=g&&g!=="auto"?g:this._rotationAlignment,this._update(),this},y.prototype.getPitchAlignment=function(){return this._pitchAlignment},y}(c.Evented),ht={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ut=0,bt=!1,ft=function(f){function y(g){f.call(this),this.options=c.extend({},ht,g),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.onAdd=function(g){var w;return this._map=g,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),w=this._setupUI,ke!==void 0?w(ke):c.window.navigator.permissions!==void 0?c.window.navigator.permissions.query({name:"geolocation"}).then(function(P){w(ke=P.state!=="denied")}):w(ke=!!c.window.navigator.geolocation),this._container},y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ut=0,bt=!1},y.prototype._isOutOfMapMaxBounds=function(g){var w=this._map.getMaxBounds(),P=g.coords;return w&&(P.longitude<w.getWest()||P.longitude>w.getEast()||P.latitude<w.getSouth()||P.latitude>w.getNorth())},y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},y.prototype._onSuccess=function(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",g)),this._finish()}},y.prototype._updateCamera=function(g){var w=new c.LngLat(g.coords.longitude,g.coords.latitude),P=g.coords.accuracy,F=this._map.getBearing(),N=c.extend({bearing:F},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(P),N,{geolocateSource:!0})},y.prototype._updateMarker=function(g){if(g){var w=new c.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},y.prototype._updateCircleRadius=function(){var g=this._map._container.clientHeight/2,w=this._map.unproject([0,g]),P=this._map.unproject([1,g]),F=w.distanceTo(P),N=Math.ceil(2*this._accuracy/F);this._circleElement.style.width=N+"px",this._circleElement.style.height=N+"px"},y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},y.prototype._onError=function(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&bt)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",g)),this._finish()}},y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},y.prototype._setupUI=function(g){var w=this;if(this._container.addEventListener("contextmenu",function(N){return N.preventDefault()}),this._geolocateButton=I.create("button","mapboxgl-ctrl-geolocate",this._container),I.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",g===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var P=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}else{var F=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ke(this._dotElement),this._circleElement=I.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ke({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(N){N.geolocateSource||w._watchState!=="ACTIVE_LOCK"||N.originalEvent&&N.originalEvent.type==="resize"||(w._watchState="BACKGROUND",w._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),w.fire(new c.Event("trackuserlocationend")))})},y.prototype.trigger=function(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ut--,bt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ut>1?(g={maximumAge:6e5,timeout:0},bt=!0):(g=this.options.positionOptions,bt=!1),this._geolocationWatchID=c.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else c.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},y.prototype._clearWatch=function(){c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},y}(c.Evented),jt={maxWidth:100,unit:"metric"},Ot=function(f){this.options=c.extend({},jt,f),c.bindAll(["_onMove","setUnit"],this)};function Ut(f,y,g){var w=g&&g.maxWidth||100,P=f._container.clientHeight/2,F=f.unproject([0,P]),N=f.unproject([w,P]),H=F.distanceTo(N);if(g&&g.unit==="imperial"){var Q=3.2808*H;Q>5280?ti(y,w,Q/5280,f._getUIString("ScaleControl.Miles")):ti(y,w,Q,f._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?ti(y,w,H/1852,f._getUIString("ScaleControl.NauticalMiles")):H>=1e3?ti(y,w,H/1e3,f._getUIString("ScaleControl.Kilometers")):ti(y,w,H,f._getUIString("ScaleControl.Meters"))}function ti(f,y,g,w){var P,F,N,H=(P=g,(F=Math.pow(10,(""+Math.floor(P)).length-1))*(N=(N=P/F)>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(Q){var ae=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*ae)/ae}(N)));f.style.width=y*(H/g)+"px",f.innerHTML=H+"&nbsp;"+w}Ot.prototype.getDefaultPosition=function(){return"bottom-left"},Ot.prototype._onMove=function(){Ut(this._map,this._container,this.options)},Ot.prototype.onAdd=function(f){return this._map=f,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ot.prototype.onRemove=function(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ot.prototype.setUnit=function(f){this.options.unit=f,Ut(this._map,this._container,this.options)};var ui=function(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof c.window.HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in c.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in c.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in c.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in c.window.document&&(this._fullscreenchange="MSFullscreenChange")};ui.prototype.onAdd=function(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ui.prototype.onRemove=function(){I.remove(this._controlContainer),this._map=null,c.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ui.prototype._checkFullscreenSupport=function(){return!!(c.window.document.fullscreenEnabled||c.window.document.mozFullScreenEnabled||c.window.document.msFullscreenEnabled||c.window.document.webkitFullscreenEnabled)},ui.prototype._setupUI=function(){var f=this._fullscreenButton=I.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),c.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ui.prototype._updateTitle=function(){var f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f},ui.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ui.prototype._isFullscreen=function(){return this._fullscreen},ui.prototype._changeIcon=function(){(c.window.document.fullscreenElement||c.window.document.mozFullScreenElement||c.window.document.webkitFullscreenElement||c.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ui.prototype._onClickFullscreen=function(){this._isFullscreen()?c.window.document.exitFullscreen?c.window.document.exitFullscreen():c.window.document.mozCancelFullScreen?c.window.document.mozCancelFullScreen():c.window.document.msExitFullscreen?c.window.document.msExitFullscreen():c.window.document.webkitCancelFullScreen&&c.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var qt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Gi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ci=function(f){function y(g){f.call(this),this.options=c.extend(Object.create(qt),g),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return f&&(y.__proto__=f),(y.prototype=Object.create(f&&f.prototype)).constructor=y,y.prototype.addTo=function(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this},y.prototype.isOpen=function(){return!!this._map},y.prototype.remove=function(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(g){return this._lngLat=c.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},y.prototype.getElement=function(){return this._container},y.prototype.setText=function(g){return this.setDOMContent(c.window.document.createTextNode(g))},y.prototype.setHTML=function(g){var w,P=c.window.document.createDocumentFragment(),F=c.window.document.createElement("body");for(F.innerHTML=g;w=F.firstChild;)P.appendChild(w);return this.setDOMContent(P)},y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},y.prototype.setMaxWidth=function(g){return this.options.maxWidth=g,this._update(),this},y.prototype.setDOMContent=function(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this},y.prototype.addClassName=function(g){this._container&&this._container.classList.add(g)},y.prototype.removeClassName=function(g){this._container&&this._container.classList.remove(g)},y.prototype.setOffset=function(g){return this.options.offset=g,this._update(),this},y.prototype.toggleClassName=function(g){if(this._container)return this._container.classList.toggle(g)},y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=I.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},y.prototype._onMouseUp=function(g){this._update(g.point)},y.prototype._onMouseMove=function(g){this._update(g.point)},y.prototype._onDrag=function(g){this._update(g.point)},y.prototype._update=function(g){var w=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=I.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(xe){return w._container.classList.add(xe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ye(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||g)){var P=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat),F=this.options.anchor,N=function xe(Ee){if(Ee){if(typeof Ee=="number"){var Fe=Math.round(Math.sqrt(.5*Math.pow(Ee,2)));return{center:new c.Point(0,0),top:new c.Point(0,Ee),"top-left":new c.Point(Fe,Fe),"top-right":new c.Point(-Fe,Fe),bottom:new c.Point(0,-Ee),"bottom-left":new c.Point(Fe,-Fe),"bottom-right":new c.Point(-Fe,-Fe),left:new c.Point(Ee,0),right:new c.Point(-Ee,0)}}if(Ee instanceof c.Point||Array.isArray(Ee)){var Oe=c.Point.convert(Ee);return{center:Oe,top:Oe,"top-left":Oe,"top-right":Oe,bottom:Oe,"bottom-left":Oe,"bottom-right":Oe,left:Oe,right:Oe}}return{center:c.Point.convert(Ee.center||[0,0]),top:c.Point.convert(Ee.top||[0,0]),"top-left":c.Point.convert(Ee["top-left"]||[0,0]),"top-right":c.Point.convert(Ee["top-right"]||[0,0]),bottom:c.Point.convert(Ee.bottom||[0,0]),"bottom-left":c.Point.convert(Ee["bottom-left"]||[0,0]),"bottom-right":c.Point.convert(Ee["bottom-right"]||[0,0]),left:c.Point.convert(Ee.left||[0,0]),right:c.Point.convert(Ee.right||[0,0])}}return xe(new c.Point(0,0))}(this.options.offset);if(!F){var H,Q=this._container.offsetWidth,ae=this._container.offsetHeight;H=P.y+N.bottom.y<ae?["top"]:P.y>this._map.transform.height-ae?["bottom"]:[],P.x<Q/2?H.push("left"):P.x>this._map.transform.width-Q/2&&H.push("right"),F=H.length===0?"bottom":H.join("-")}var _e=P.add(N[F]).round();I.setTransform(this._container,Ae[F]+" translate("+_e.x+"px,"+_e.y+"px)"),Je(this._container,F,"popup")}},y.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var g=this._container.querySelector(Gi);g&&g.focus()}},y.prototype._onClose=function(){this.remove()},y}(c.Evented),xn={version:c.version,supported:h,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:j,NavigationControl:ne,GeolocateControl:ft,AttributionControl:xo,ScaleControl:Ot,FullscreenControl:ui,Popup:Ci,Marker:Ke,Style:qo,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.Point,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,config:c.config,prewarm:function(){we().acquire(X)},clearPrewarmedResources:function(){var f=ge;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(X),ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return c.config.ACCESS_TOKEN},set accessToken(f){c.config.ACCESS_TOKEN=f},get baseApiUrl(){return c.config.API_URL},set baseApiUrl(f){c.config.API_URL=f},get workerCount(){return le.workerCount},set workerCount(f){le.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage:function(f){c.clearTileCache(f)},workerUrl:""};return xn}),p})})(zb);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.ContourType=o.Costing=void 0;const e=NL,n=zb.exports;o.Costing={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},o.ContourType={Time:"time",Distance:"distance"};class a{constructor(_,c,h){this.contourSources=[],this.contourLayers=[],this.contourMaker=void 0,this.contours=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}],this.map=_,this.url=c,h&&(this.contours=h)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(_=>{var c;(c=this.map)===null||c===void 0||c.removeLayer(_)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(_=>{var c;(c=this.map)===null||c===void 0||c.removeSource(_)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(_,c,h,I,L){this.clearFeatures();let z=JSON.parse(JSON.stringify(this.contours));L&&(z=L),z.forEach(O=>{h===o.ContourType.Time?delete O.distance:delete O.time});let R="km";return h===o.ContourType.Time&&(R="min"),new Promise((O,Y)=>{const ee={locations:[{lat:c,lon:_}],costing:I,contours:z,polygons:!0},ue=`${this.url}/isochrone?json=${JSON.stringify(ee)}`;e.default.get(ue).then(te=>{te.data.features.forEach(oe=>{var be,qe,Ne,De;const fe=`isochrone-${oe.properties.contour}`;(be=this.map)===null||be===void 0||be.addSource(fe,{type:"geojson",data:oe}),this.contourSources.push(fe),(qe=this.map)===null||qe===void 0||qe.addLayer({id:`pg-${fe}`,type:"fill",source:fe,layout:{},paint:{"fill-color":oe.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${fe}`),(Ne=this.map)===null||Ne===void 0||Ne.addLayer({id:`ls-${fe}`,type:"line",source:fe,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":oe.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${fe}`),(De=this.map)===null||De===void 0||De.addLayer({id:`symbol-${fe}`,type:"symbol",source:fe,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${R}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${fe}`)}),this.map&&(this.contourMaker=new n.Marker().setLngLat([_,c]).addTo(this.map)),O()}).catch(te=>Y(te))})}getContoursOption(){return this.contours}}o.default=a})(Wm);var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});class VL{constructor(e){this.color="#535353",this.map=e}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize.bind(this)),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,n;this.width=(e=this.map)===null||e===void 0?void 0:e.getCanvas().clientWidth,this.height=(n=this.map)===null||n===void 0?void 0:n.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,n=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1",`${0}px`),this.xLine.setAttribute("y1",`${n}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${n}px`)}}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="relative",n.setAttribute("width",`${this.width}px`),n.setAttribute("height",`${this.height}px`);const a=this.width/2,p=this.height/2;this.yLine=n.appendChild(this.createLine(a,0,a,this.height,this.color,"2px")),this.xLine=n.appendChild(this.createLine(0,p,this.width,p,this.color,"2px")),e==null||e.appendChild(n),this.svgCanvas=n}}createLine(e,n,a,p,_,c){const h=document.createElementNS("http://www.w3.org/2000/svg","line");return h.setAttribute("x1",e),h.setAttribute("y1",n),h.setAttribute("x2",a),h.setAttribute("y2",p),h.setAttribute("stroke-dasharray","5,5"),h.setAttribute("stroke",_),h.setAttribute("stroke-width",c),h}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}Ym.default=VL;var Ad={};Object.defineProperty(Ad,"__esModule",{value:!0});Ad.createTextbox=Ad.createSelection=void 0;const jL=(o,e,n,a,p)=>{const _=document.createElement("label");_.textContent=e;const c=document.createElement("select");c.setAttribute("id",`mapbox-gl-valhalla-${n}`),c.style.width="100%",Object.keys(o).forEach(z=>{const R=document.createElement("option");R.setAttribute("value",p(o,z)),R.appendChild(document.createTextNode(z)),R.setAttribute("name",n),a===o[z]&&(R.selected=!0),c.appendChild(R)});const h=document.createElement("TR"),I=document.createElement("TD"),L=document.createElement("TD");return I.appendChild(_),L.appendChild(c),h.appendChild(I),h.appendChild(L),h};Ad.createSelection=jL;const qL=(o,e,n,a,p)=>{const _=document.createElement("label");_.textContent=o,p||(p="text");const c=document.createElement("input");c.setAttribute("id",`mapbox-gl-valhalla-${e}`),c.setAttribute("type",p),c.setAttribute("value",n),c.readOnly=a;const h=document.createElement("TR"),I=document.createElement("TD"),L=document.createElement("TD");return I.appendChild(_),L.appendChild(c),h.appendChild(I),h.appendChild(L),h};Ad.createTextbox=qL;Object.defineProperty(c_,"__esModule",{value:!0});const py=Wm,GL=Ym,gm=Ad;class HL{constructor(e,n){this.map=e,this.valhalla=n,this.onDocumentClick=this.onDocumentClick.bind(this)}addTo(e){var n,a;this.map||console.error("map object is null"),this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("mapboxgl-valhalla-list"),this.mainButton=document.createElement("button"),this.mainButton.classList.add("mapboxgl-ctrl-icon"),this.mainButton.classList.add("mapboxgl-valhalla-time-isochrone-control"),this.mainButton.addEventListener("click",()=>{this.mainButton.style.display="none",this.mainContainer.style.display="block",this.toggleCrosshair(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.mainButton),this.controlContainer.appendChild(this.mainContainer);const p=document.createElement("TABLE");p.className="valhalla-table",this.mainContainer.appendChild(p);const _=gm.createSelection(py.Costing,"Means of transport","costing",py.Costing.Walking,(z,R)=>z[R]);p.appendChild(_);const c=(n=this.map)===null||n===void 0?void 0:n.getCenter();if(c){const z=gm.createTextbox("Longitude","lon-time",c.lng,!0);p.appendChild(z);const R=gm.createTextbox("Latitude","lat-time",c.lat,!0);p.appendChild(R)}const h=this.valhalla.getContoursOption();for(let z=0;z<h.length;z+=1){const R=h[z],O=gm.createTextbox(`Contour ${z+1} (min)`,`contour-time-${z}`,R.time,!1,"number");p.appendChild(O)}const I=document.createElement("button");I.textContent="Clear",I.classList.add("mapbox-valhalla-control-button"),I.addEventListener("click",()=>{this.valhalla.clearFeatures()}),this.mainContainer.appendChild(I);const L=document.createElement("button");return L.textContent="Calculate",L.classList.add("mapbox-valhalla-control-button"),L.addEventListener("click",()=>{const z=document.getElementById("mapbox-gl-valhalla-lon-time"),R=document.getElementById("mapbox-gl-valhalla-lat-time"),O=document.getElementById("mapbox-gl-valhalla-costing"),Y=this.valhalla.getContoursOption();for(let ee=0;ee<Y.length;ee+=1){const ue=Y[ee],te=document.getElementById(`mapbox-gl-valhalla-contour-time-${ee}`);ue.time=Number(te.value)}this.valhalla.getIsochrone(Number(z.value),Number(R.value),py.ContourType.Time,O.value,Y)}),this.mainContainer.appendChild(L),(a=this.map)===null||a===void 0||a.on("moveend",()=>{var z;const R=(z=this.map)===null||z===void 0?void 0:z.getCenter(),O=document.getElementById("mapbox-gl-valhalla-lon-time"),Y=document.getElementById("mapbox-gl-valhalla-lat-time");R||(O.setAttribute("value",""),Y.setAttribute("value",""));const ee=R,ue=ee!=null&&ee.lng?ee.lng.toString():"";O.setAttribute("value",ue);const te=ee!=null&&ee.lat?ee.lat.toString():"";Y.setAttribute("value",te)}),e.appendChild(this.controlContainer),e}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.hide()}hide(){this.mainContainer&&this.mainButton&&(this.mainContainer.style.display="none",this.mainButton.style.display="block",this.toggleCrosshair(!1))}destroy(){!this.mainContainer||!this.mainContainer.parentNode||!this.map||!this.mainButton||(this.mainButton.removeEventListener("click",this.onDocumentClick),this.mainContainer.parentNode.removeChild(this.mainContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}toggleCrosshair(e){e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new GL.default(this.map),this.crosshair.create())}}c_.default=HL;var y_={};Object.defineProperty(y_,"__esModule",{value:!0});const X0=Wm,ZL=Ym,fy=Ad;class WL{constructor(e,n){this.map=e,this.valhalla=n,this.onDocumentClick=this.onDocumentClick.bind(this)}addTo(e){var n,a;this.map||console.error("map object is null"),this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("mapboxgl-valhalla-list"),this.mainButton=document.createElement("button"),this.mainButton.classList.add("mapboxgl-ctrl-icon"),this.mainButton.classList.add("mapboxgl-valhalla-distance-isochrone-control"),this.mainButton.addEventListener("click",()=>{this.mainButton.style.display="none",this.mainContainer.style.display="block",this.toggleCrosshair(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.mainButton),this.controlContainer.appendChild(this.mainContainer);const p=document.createElement("TABLE");p.className="valhalla-table",this.mainContainer.appendChild(p);const _=(n=this.map)===null||n===void 0?void 0:n.getCenter();if(_){const L=fy.createTextbox("Longitude","lon-distance",_.lng,!0);p.appendChild(L);const z=fy.createTextbox("Latitude","lat-distance",_.lat,!0);p.appendChild(z)}const c=this.valhalla.getContoursOption();for(let L=0;L<c.length;L+=1){const z=c[L],R=fy.createTextbox(`Contour ${L+1} (km)`,`contour-distance-${L}`,z.distance,!1,"number");p.appendChild(R)}const h=document.createElement("button");h.textContent="Clear",h.classList.add("mapbox-valhalla-control-button"),h.addEventListener("click",()=>{this.valhalla.clearFeatures()}),this.mainContainer.appendChild(h);const I=document.createElement("button");return I.textContent="Calculate",I.classList.add("mapbox-valhalla-control-button"),I.addEventListener("click",()=>{const L=document.getElementById("mapbox-gl-valhalla-lon-distance"),z=document.getElementById("mapbox-gl-valhalla-lat-distance"),R=this.valhalla.getContoursOption();for(let O=0;O<R.length;O+=1){const Y=R[O],ee=document.getElementById(`mapbox-gl-valhalla-contour-distance-${O}`);Y.distance=Number(ee.value)}this.valhalla.getIsochrone(Number(L.value),Number(z.value),X0.ContourType.Distance,X0.Costing.Walking,R)}),this.mainContainer.appendChild(I),(a=this.map)===null||a===void 0||a.on("moveend",()=>{var L;const z=(L=this.map)===null||L===void 0?void 0:L.getCenter(),R=document.getElementById("mapbox-gl-valhalla-lon-distance"),O=document.getElementById("mapbox-gl-valhalla-lat-distance");z||(R.setAttribute("value",""),O.setAttribute("value",""));const Y=z,ee=Y!=null&&Y.lng?Y.lng.toString():"";R.setAttribute("value",ee);const ue=Y!=null&&Y.lat?Y.lat.toString():"";O.setAttribute("value",ue)}),e.appendChild(this.controlContainer),e}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.hide()}hide(){this.mainContainer&&this.mainButton&&(this.mainContainer.style.display="none",this.mainButton.style.display="block",this.toggleCrosshair(!1))}destroy(){!this.mainContainer||!this.mainContainer.parentNode||!this.map||!this.mainButton||(this.mainButton.removeEventListener("click",this.onDocumentClick),this.mainContainer.parentNode.removeChild(this.mainContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}toggleCrosshair(e){e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new ZL.default(this.map),this.crosshair.create())}}y_.default=WL;Object.defineProperty(u_,"__esModule",{value:!0});const XL=c_,KL=y_,JL=Wm;class YL{constructor(e,n){this.options={Contours:[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]},this.url=e,n&&(this.options=Object.assign(this.options,n)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){return this.map=e,this.map&&(this.valhalla=new JL.default(this.map,this.url,this.options.Contours)),this.controlContainer=document.createElement("div"),this.timeIsochroneControl=new XL.default(this.map,this.valhalla),this.controlContainer=this.timeIsochroneControl.addTo(this.controlContainer),this.distanceIsochroneControl=new KL.default(this.map,this.valhalla),this.controlContainer=this.distanceIsochroneControl.addTo(this.controlContainer),document.addEventListener("click",this.onDocumentClick),this.controlContainer}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.timeIsochroneControl&&this.distanceIsochroneControl&&(this.timeIsochroneControl.hide(),this.distanceIsochroneControl.hide())}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.timeIsochroneControl||!this.distanceIsochroneControl||(this.timeIsochroneControl.destroy(),this.distanceIsochroneControl.destroy(),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}}u_.default=YL;(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.MapboxValhallaControl=void 0;var e=u_;Object.defineProperty(o,"MapboxValhallaControl",{enumerable:!0,get:function(){return e.default}})})(_b);class QL{constructor(e=[],n){this.targets=e,this.callback=n,this.isActive=!1}onAdd(e){return this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.controlContainer}changeButtonCondition(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this))):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))}onClick(e){if(!this.isActive){this.callback&&this.callback([]);return}const n=[];this.targets.forEach(p=>{this.map.getLayer(p)&&n.push(p)});const a=this.map.queryRenderedFeatures(e.point,{layers:n});this.callback&&this.callback(a)}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)}}function $L(o){let e,n;return{c(){e=yi("div"),n=yi("div"),this.h()},l(a){e=_i(a,"DIV",{class:!0});var p=pi(e);n=_i(p,"DIV",{class:!0,id:!0}),pi(n).forEach(We),p.forEach(We),this.h()},h(){ii(n,"class","map svelte-lajqrs"),ii(n,"id","map"),ii(e,"class","map-wrap svelte-lajqrs")},m(a,p){Dt(a,e,p),sn(e,n),o[1](n)},p:Vo,i:Vo,o:Vo,d(a){a&&We(e),o[1](null)}}}function ez(o,e,n){let a;jo(o,zy,c=>n(2,a=c));let p;Po(async()=>{const c=new wd.exports.Map({container:p,style:a.uri,center:Tr.center,zoom:Tr.zoom,hash:!0,attributionControl:!1});if(c.addControl(new wd.exports.NavigationControl({}),"top-right"),c.addControl(new wd.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),c.addControl(new wd.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),c.addControl(new wd.exports.AttributionControl({compact:!0}),"bottom-right"),c.addControl(new QL(Tr.popup.target,ee=>{Dy.update(()=>ee)})),Tr.elevation){const ee=await(await W_(()=>import("./index-82a16aee.js").then(function(ue){return ue.i}),[])).default;c.addControl(new ee(Tr.elevation.url,Tr.elevation.options),"top-right")}const{MaplibreExportControl:h,Size:I,PageOrientation:L,Format:z,DPI:R}=await W_(()=>import("./index-24205682.js").then(function(ee){return ee.i}),[]);if(c.addControl(new h({PageSize:I.A4,PageOrientation:L.Landscape,Format:z.PNG,DPI:R[96],Crosshair:!0,PrintableArea:!0}),"top-right"),Tr.valhalla&&c.addControl(new _b.MapboxValhallaControl(Tr.valhalla.url,Tr.valhalla.options),"top-right"),!Tr.search)return;const O=await fetch(Tr.search.url).then(ee=>ee.json());function Y(ee){for(var ue=[],te=0;te<O.features.length;te++){var de=O.features[te];Tr.search.target.forEach(oe=>{var be=de.properties[oe];!be||be.toString().toLowerCase().search(ee.toString().toLowerCase())!==-1&&(de.place_name=Tr.search.format(de.properties),de.center=de.geometry.coordinates,de.place_type=Tr.search.place_type,ue.push(de))})}return ue}c.addControl(new fP({localGeocoder:Y,localGeocoderOnly:!0,zoom:Tr.search.zoom,placeholder:Tr.search.placeholder,mapboxgl:rk}),"top-left"),bp.update(()=>c)});function _(c){qi[c?"unshift":"push"](()=>{p=c,n(0,p)})}return[p,_]}class tz extends wn{constructor(e){super(),En(this,e,ez,$L,bn,{})}}function iz(o){let e,n;return e=new tz({}),{c(){Li(e.$$.fragment)},l(a){Wi(e.$$.fragment,a)},m(a,p){zi(e,a,p),n=!0},i(a){n||(tt(e.$$.fragment,a),n=!0)},o(a){at(e.$$.fragment,a),n=!1},d(a){Di(e,a)}}}function nz(o){let e,n,a,p,_,c;function h(R){o[1](R)}let I={};o[0]!==void 0&&(I.drawerOpen=o[0]),e=new c2({props:I}),qi.push(()=>Cl(e,"drawerOpen",h));function L(R){o[2](R)}let z={$$slots:{default:[iz]},$$scope:{ctx:o}};return o[0]!==void 0&&(z.open=o[0]),p=new nk({props:z}),qi.push(()=>Cl(p,"open",L)),{c(){Li(e.$$.fragment),a=Bn(),Li(p.$$.fragment)},l(R){Wi(e.$$.fragment,R),a=Fn(R),Wi(p.$$.fragment,R)},m(R,O){zi(e,R,O),Dt(R,a,O),zi(p,R,O),c=!0},p(R,[O]){const Y={};!n&&O&1&&(n=!0,Y.drawerOpen=R[0],kl(()=>n=!1)),e.$set(Y);const ee={};O&16&&(ee.$$scope={dirty:O,ctx:R}),!_&&O&1&&(_=!0,ee.open=R[0],kl(()=>_=!1)),p.$set(ee)},i(R){c||(tt(e.$$.fragment,R),tt(p.$$.fragment,R),c=!0)},o(R){at(e.$$.fragment,R),at(p.$$.fragment,R),c=!1},d(R){Di(e,R),R&&We(a),Di(p,R)}}}function rz(o,e,n){let a=!1;const p=Tr.styles[0];zy.update(()=>p);function _(h){a=h,n(0,a)}function c(h){a=h,n(0,a)}return[a,_,c]}class uz extends wn{constructor(e){super(),En(this,e,rz,nz,bn,{})}}export{uz as _,NL as a,lz as b,Yl as c,vC as g,wd as m};
